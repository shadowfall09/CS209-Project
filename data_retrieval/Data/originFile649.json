{"items":[{"tags":["java","angularjs","spring","spring-boot","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664287903,"creation_date":1664287903,"answer_id":73869065,"question_id":73866701,"body_markdown":"You haven&#39;t specified which HTTP method (GET, POST, PUT, DELETE, etc) the mapping should handle. To do that either use `@GetMapping` or change your `@RequestMapping` so it includes the `method` parameter.\r\n\r\n```java\r\n@GetMapping(&quot;/pendodnp/{visitorId}/{content}&quot;)\r\n```\r\n\r\nOr\r\n\r\n```java\r\nimport static org.springframework.web.bind.annotation.RequestMethod.GET;\r\n...\r\n@RequestMapping(method = GET, path = &quot;/pendodnp/{visitorId}/{content}&quot;)\r\n```\r\n\r\nUsing `@RequestMapping` without a `method` parameter is usually only done at the _class_ level, not individual methods. `@GetMapping` (or `@PostMapping`, `@PutMapping`, etc) are more common on controller _methods_.","title":"405 Method not allowed in Spring Boot and Ajax","body":"<p>You haven't specified which HTTP method (GET, POST, PUT, DELETE, etc) the mapping should handle. To do that either use <code>@GetMapping</code> or change your <code>@RequestMapping</code> so it includes the <code>method</code> parameter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/pendodnp/{visitorId}/{content}&quot;)\n</code></pre>\n<p>Or</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static org.springframework.web.bind.annotation.RequestMethod.GET;\n...\n@RequestMapping(method = GET, path = &quot;/pendodnp/{visitorId}/{content}&quot;)\n</code></pre>\n<p>Using <code>@RequestMapping</code> without a <code>method</code> parameter is usually only done at the <em>class</em> level, not individual methods. <code>@GetMapping</code> (or <code>@PostMapping</code>, <code>@PutMapping</code>, etc) are more common on controller <em>methods</em>.</p>\n"}],"owner":{"account_id":9979931,"reputation":2145,"user_id":7383204,"display_name":"Talk is Cheap Show me Code"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676393281,"creation_date":1664277463,"question_id":73866701,"body_markdown":"Hi I am having request mapping like this \r\n\r\n    @RequestMapping(value = &quot;/pendodnp/{visitorId}/{content}&quot;)\r\n    public ResponseEntity&lt;Object&gt; setPendoDNP(@PathVariable String visitorId, @PathVariable String content, final HttpSession session, final HttpServletRequest request) throws PendoException {\r\n        LOGGER.info(&quot;### pendodnp&quot;);\r\n        _splitService.updateDNP(visitorId, content);\r\n        return ResponseEntity.ok().body(content);\r\n    }\r\n\r\nbut when I hit this URL from an angular function, it gives &quot;405 method not allowed&quot; error. \r\n\r\n\r\n        $http.get(&quot;pendodnp/&quot;+visitorId+&quot;/&quot;+dnpValue, JSON.stringify(dnpValue))\r\n            .success(function(response) {\r\n \r\nHere is screenshot of how the request is going, can someone tell me what i am missing here? \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VUlre.png","title":"405 Method not allowed in Spring Boot and Ajax","body":"<p>Hi I am having request mapping like this</p>\n<pre><code>@RequestMapping(value = &quot;/pendodnp/{visitorId}/{content}&quot;)\npublic ResponseEntity&lt;Object&gt; setPendoDNP(@PathVariable String visitorId, @PathVariable String content, final HttpSession session, final HttpServletRequest request) throws PendoException {\n    LOGGER.info(&quot;### pendodnp&quot;);\n    _splitService.updateDNP(visitorId, content);\n    return ResponseEntity.ok().body(content);\n}\n</code></pre>\n<p>but when I hit this URL from an angular function, it gives &quot;405 method not allowed&quot; error.</p>\n<pre><code>    $http.get(&quot;pendodnp/&quot;+visitorId+&quot;/&quot;+dnpValue, JSON.stringify(dnpValue))\n        .success(function(response) {\n</code></pre>\n<p>Here is screenshot of how the request is going, can someone tell me what i am missing here?</p>\n<p><a href=\"https://i.stack.imgur.com/VUlre.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VUlre.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","dependencies","classloader","agent","byte-buddy"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1676901747,"post_id":75450643,"comment_id":133225235,"body_markdown":"You are mixing up two different tasks. First, creating a runtime environment which can cope with different versions of the same library. Second, implementing a Java Agent which can work correctly in such an environment. There is no way around the second task, so if `maven-shade-plugin` did already solve the first task but your Agent did not use the correct package, try fixing your Agent.","body":"You are mixing up two different tasks. First, creating a runtime environment which can cope with different versions of the same library. Second, implementing a Java Agent which can work correctly in such an environment. There is no way around the second task, so if <code>maven-shade-plugin</code> did already solve the first task but your Agent did not use the correct package, try fixing your Agent."},{"owner":{"account_id":27784928,"reputation":33,"user_id":21212592,"display_name":"Gourav Kumar"},"score":0,"creation_date":1676906307,"post_id":75450643,"comment_id":133226673,"body_markdown":"Basically what i was thinking that i will set my custom classloader as the default and will not load the `integration` module by adding some check and when user application&#39;s flow will go to the `premain` method in `agent` module then i will get user external dependencies through getClass().getClassLoader().And then will load only those dependencies which user is using.And also i will have to make  submodules of `integration` module by different dependency versions). and will load only those modules for which interceptor is being used. For eg: okhttp 3.14.9 interceptor module. if user uses it.","body":"Basically what i was thinking that i will set my custom classloader as the default and will not load the <code>integration</code> module by adding some check and when user application&#39;s flow will go to the <code>premain</code> method in <code>agent</code> module then i will get user external dependencies through getClass().getClassLoader().And then will load only those dependencies which user is using.And also i will have to make  submodules of <code>integration</code> module by different dependency versions). and will load only those modules for which interceptor is being used. For eg: okhttp 3.14.9 interceptor module. if user uses it."},{"owner":{"account_id":27784928,"reputation":33,"user_id":21212592,"display_name":"Gourav Kumar"},"score":0,"creation_date":1676906456,"post_id":75450643,"comment_id":133226703,"body_markdown":"You can refer this repo[https://github.com/keploy/java-sdk]. In this project i am trying to achieve the above task.","body":"You can refer this repo[<a href=\"https://github.com/keploy/java-sdk]\" rel=\"nofollow noreferrer\">github.com/keploy/java-sdk]</a>. In this project i am trying to achieve the above task."}],"owner":{"account_id":27784928,"reputation":33,"user_id":21212592,"display_name":"Gourav Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":230,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1676393193,"creation_date":1676391908,"question_id":75450643,"body_markdown":"I have a multimodule project called `k-sdk`. It has modules like\r\n\r\n**\\---\\&gt;** `agent`\r\n\r\n**\\---\\&gt;** `core`\r\n\r\n**\\---\\&gt;** `api`\r\n\r\n**\\---\\&gt;** `integration`\r\n\r\n**\\---\\&gt;** `sdk`\r\n\r\nwhere (**sdk** module contains **core**, **api**, **integration** modules and acting as a shaded jar).\r\nThis jar can be imported as a dependency in the user application.\r\n\r\nHere `k-sdk` is acting as a middleware to capture `request` and `response` of the api calls (both external and internal) and do some custom processing. And to intercept the internal calls i am using `servlet-filter` &amp; for external calls, i am using [ByteBuddy](http://bytebuddy.net/#/) and wrote the required code in the `premain` method. The corresponding interceptors are written in **integration** module. User can use this `k-sdk` by running agent jar(present in agent module) of the `k-sdk`.\r\n\r\nNow comes to the actual problem. Suppose I have written an Interceptor for `OkHttp` client version `4.10.0` in the `integration` module and the user is using the same client of version `3.14.9`, now these two versions share completely same package name. And there are some uncommon apis, methods etc, which is being used in the `OkHttpInterceptor` which results in **java.lang.NoSuchMethodError** because maven only resolves that version of dependency which has the shortest path. And only 1 version of a dependency will be loaded in the classloader.\r\n\r\n\r\nNow, To resolve this version conflict what i was thinking that i will use the below custom classloader. ([ref](https://medium.com/@isuru89/java-a-child-first-class-loader-cbd9c3d0305)) as i know that the solution lies in this approach only.\r\n\r\n```java\r\npublic class ChildFirstClassLoader extends URLClassLoader {\r\n\r\n    private final ClassLoader sysClzLoader;\r\n\r\n    public ChildFirstClassLoader(URL[] urls, ClassLoader parent) {\r\n        super(urls, parent);\r\n        sysClzLoader = getSystemClassLoader();\r\n    }\r\n\r\n    @Override\r\n    protected Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException {\r\n        // has the class loaded already?\r\n        Class&lt;?&gt; loadedClass = findLoadedClass(name);\r\n        if (loadedClass == null) {\r\n            try {\r\n                if (sysClzLoader != null) {\r\n                    loadedClass = sysClzLoader.loadClass(name);\r\n                }\r\n            } catch (ClassNotFoundException ex) {\r\n                // class not found in system class loader... silently skipping\r\n            }\r\n\r\n            try {\r\n                // find the class from given jar urls as in first constructor parameter.\r\n                if (loadedClass == null) {\r\n                    loadedClass = findClass(name);\r\n                }\r\n            } catch (ClassNotFoundException e) {\r\n                // class is not found in the given urls.\r\n                // Let&#39;s try it in parent classloader.\r\n                // If class is still not found, then this method will throw class not found ex.\r\n                loadedClass = super.loadClass(name, resolve);\r\n            }\r\n        }\r\n\r\n        if (resolve) {      // marked to resolve\r\n            resolveClass(loadedClass);\r\n        }\r\n        return loadedClass;\r\n    }\r\n\r\n\r\n\r\n    @Override\r\n    public Enumeration&lt;URL&gt; getResources(String name) throws IOException {\r\n        List&lt;URL&gt; allRes = new LinkedList&lt;&gt;();\r\n\r\n        // load resources from sys class loader\r\n        Enumeration&lt;URL&gt; sysResources = sysClzLoader.getResources(name);\r\n        if (sysResources != null) {\r\n            while (sysResources.hasMoreElements()) {\r\n                allRes.add(sysResources.nextElement());\r\n            }\r\n        }\r\n\r\n        // load resource from this classloader\r\n        Enumeration&lt;URL&gt; thisRes = findResources(name);\r\n        if (thisRes != null) {\r\n            while (thisRes.hasMoreElements()) {\r\n                allRes.add(thisRes.nextElement());\r\n            }\r\n        }\r\n\r\n        // then try finding resources from parent classloaders\r\n        Enumeration&lt;URL&gt; parentRes = super.findResources(name);\r\n        if (parentRes != null) {\r\n            while (parentRes.hasMoreElements()) {\r\n                allRes.add(parentRes.nextElement());\r\n            }\r\n        }\r\n\r\n        return new Enumeration&lt;URL&gt;() {\r\n            Iterator&lt;URL&gt; it = allRes.iterator();\r\n\r\n            @Override\r\n            public boolean hasMoreElements() {\r\n                return it.hasNext();\r\n            }\r\n\r\n            @Override\r\n            public URL nextElement() {\r\n                return it.next();\r\n            }\r\n        };\r\n    }\r\n\r\n    @Override\r\n    public URL getResource(String name) {\r\n        URL res = null;\r\n        if (sysClzLoader != null) {\r\n            res = sysClzLoader.getResource(name);\r\n        }\r\n        if (res == null) {\r\n            res = findResource(name);\r\n        }\r\n        if (res == null) {\r\n            res = super.getResource(name);\r\n        }\r\n        return res;\r\n    }\r\n}\r\n```\r\nAnd to improve the user experience, i have to make changes only in the `premain` method. Now i don&#39;t know how to use this classloader to resolve this conflicting issue.\r\n\r\nThe above classloader is extending `URLClassLoader`, and the application class loader is no longer an instance of `java.net.URLClassLoader` in java 9+. \r\n\r\nI am very new to this complex solution, Please! help me out.\r\n\r\n\r\n\r\nBefore this solution, i tried to repackage classes using `maven-shade-plugin` but that solution was not working because in `premain` method using ByteBuddy i was targeting a class of actual package and was using different package in the interceptor so the flow was not going to the interceptor as the class was not matching.","title":"How to deal with dependency conflicts using custom classloader in java properly?","body":"<p>I have a multimodule project called <code>k-sdk</code>. It has modules like</p>\n<p><strong>---&gt;</strong> <code>agent</code></p>\n<p><strong>---&gt;</strong> <code>core</code></p>\n<p><strong>---&gt;</strong> <code>api</code></p>\n<p><strong>---&gt;</strong> <code>integration</code></p>\n<p><strong>---&gt;</strong> <code>sdk</code></p>\n<p>where (<strong>sdk</strong> module contains <strong>core</strong>, <strong>api</strong>, <strong>integration</strong> modules and acting as a shaded jar).\nThis jar can be imported as a dependency in the user application.</p>\n<p>Here <code>k-sdk</code> is acting as a middleware to capture <code>request</code> and <code>response</code> of the api calls (both external and internal) and do some custom processing. And to intercept the internal calls i am using <code>servlet-filter</code> &amp; for external calls, i am using <a href=\"http://bytebuddy.net/#/\" rel=\"nofollow noreferrer\">ByteBuddy</a> and wrote the required code in the <code>premain</code> method. The corresponding interceptors are written in <strong>integration</strong> module. User can use this <code>k-sdk</code> by running agent jar(present in agent module) of the <code>k-sdk</code>.</p>\n<p>Now comes to the actual problem. Suppose I have written an Interceptor for <code>OkHttp</code> client version <code>4.10.0</code> in the <code>integration</code> module and the user is using the same client of version <code>3.14.9</code>, now these two versions share completely same package name. And there are some uncommon apis, methods etc, which is being used in the <code>OkHttpInterceptor</code> which results in <strong>java.lang.NoSuchMethodError</strong> because maven only resolves that version of dependency which has the shortest path. And only 1 version of a dependency will be loaded in the classloader.</p>\n<p>Now, To resolve this version conflict what i was thinking that i will use the below custom classloader. (<a href=\"https://medium.com/@isuru89/java-a-child-first-class-loader-cbd9c3d0305\" rel=\"nofollow noreferrer\">ref</a>) as i know that the solution lies in this approach only.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ChildFirstClassLoader extends URLClassLoader {\n\n    private final ClassLoader sysClzLoader;\n\n    public ChildFirstClassLoader(URL[] urls, ClassLoader parent) {\n        super(urls, parent);\n        sysClzLoader = getSystemClassLoader();\n    }\n\n    @Override\n    protected Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException {\n        // has the class loaded already?\n        Class&lt;?&gt; loadedClass = findLoadedClass(name);\n        if (loadedClass == null) {\n            try {\n                if (sysClzLoader != null) {\n                    loadedClass = sysClzLoader.loadClass(name);\n                }\n            } catch (ClassNotFoundException ex) {\n                // class not found in system class loader... silently skipping\n            }\n\n            try {\n                // find the class from given jar urls as in first constructor parameter.\n                if (loadedClass == null) {\n                    loadedClass = findClass(name);\n                }\n            } catch (ClassNotFoundException e) {\n                // class is not found in the given urls.\n                // Let's try it in parent classloader.\n                // If class is still not found, then this method will throw class not found ex.\n                loadedClass = super.loadClass(name, resolve);\n            }\n        }\n\n        if (resolve) {      // marked to resolve\n            resolveClass(loadedClass);\n        }\n        return loadedClass;\n    }\n\n\n\n    @Override\n    public Enumeration&lt;URL&gt; getResources(String name) throws IOException {\n        List&lt;URL&gt; allRes = new LinkedList&lt;&gt;();\n\n        // load resources from sys class loader\n        Enumeration&lt;URL&gt; sysResources = sysClzLoader.getResources(name);\n        if (sysResources != null) {\n            while (sysResources.hasMoreElements()) {\n                allRes.add(sysResources.nextElement());\n            }\n        }\n\n        // load resource from this classloader\n        Enumeration&lt;URL&gt; thisRes = findResources(name);\n        if (thisRes != null) {\n            while (thisRes.hasMoreElements()) {\n                allRes.add(thisRes.nextElement());\n            }\n        }\n\n        // then try finding resources from parent classloaders\n        Enumeration&lt;URL&gt; parentRes = super.findResources(name);\n        if (parentRes != null) {\n            while (parentRes.hasMoreElements()) {\n                allRes.add(parentRes.nextElement());\n            }\n        }\n\n        return new Enumeration&lt;URL&gt;() {\n            Iterator&lt;URL&gt; it = allRes.iterator();\n\n            @Override\n            public boolean hasMoreElements() {\n                return it.hasNext();\n            }\n\n            @Override\n            public URL nextElement() {\n                return it.next();\n            }\n        };\n    }\n\n    @Override\n    public URL getResource(String name) {\n        URL res = null;\n        if (sysClzLoader != null) {\n            res = sysClzLoader.getResource(name);\n        }\n        if (res == null) {\n            res = findResource(name);\n        }\n        if (res == null) {\n            res = super.getResource(name);\n        }\n        return res;\n    }\n}\n</code></pre>\n<p>And to improve the user experience, i have to make changes only in the <code>premain</code> method. Now i don't know how to use this classloader to resolve this conflicting issue.</p>\n<p>The above classloader is extending <code>URLClassLoader</code>, and the application class loader is no longer an instance of <code>java.net.URLClassLoader</code> in java 9+.</p>\n<p>I am very new to this complex solution, Please! help me out.</p>\n<p>Before this solution, i tried to repackage classes using <code>maven-shade-plugin</code> but that solution was not working because in <code>premain</code> method using ByteBuddy i was targeting a class of actual package and was using different package in the interceptor so the flow was not going to the interceptor as the class was not matching.</p>\n"},{"tags":["java","sql-server","spring-data"],"comments":[{"owner":{"account_id":1434396,"reputation":28043,"user_id":1356107,"accept_rate":79,"display_name":"Tschallacka"},"score":0,"creation_date":1524060436,"post_id":49901809,"comment_id":86819040,"body_markdown":"Try using nvarchar instead of varchar. Not sure, but that has always helped me when dealing with strings and sql server.","body":"Try using nvarchar instead of varchar. Not sure, but that has always helped me when dealing with strings and sql server."},{"owner":{"account_id":2312068,"reputation":90341,"user_id":2029983,"display_name":"Thom A"},"score":1,"creation_date":1524060541,"post_id":49901809,"comment_id":86819115,"body_markdown":"When posting your query, make sure you copy and paste it. `form table` isn&#39;t valid syntax. Although this might seem silly, if you have simply typographical errors like that and then ask a &quot;why isn&#39;t this working&quot; questions you&#39;re going to be told the reason is because of the spelling mistake.","body":"When posting your query, make sure you copy and paste it. <code>form table</code> isn&#39;t valid syntax. Although this might seem silly, if you have simply typographical errors like that and then ask a &quot;why isn&#39;t this working&quot; questions you&#39;re going to be told the reason is because of the spelling mistake."},{"owner":{"account_id":6094808,"reputation":7041,"user_id":4755974,"display_name":"Veselin Davidov"},"score":0,"creation_date":1524060825,"post_id":49901809,"comment_id":86819302,"body_markdown":"If the query is working properly in sql server (you can test with the management studio ) then the problem is your java code and you can give us some of that to see :)","body":"If the query is working properly in sql server (you can test with the management studio ) then the problem is your java code and you can give us some of that to see :)"},{"owner":{"account_id":5156143,"reputation":45,"user_id":5095233,"display_name":"kbral"},"score":0,"creation_date":1524061092,"post_id":49901809,"comment_id":86819512,"body_markdown":"I had a spelling mistake in the query.\nIt actually looks like:\n`select coalesce(t1.content, convert(varbinary(max), t2.content))\nfrom table1 t1 inner join table t2 on t1.id = t2.t1_id`","body":"I had a spelling mistake in the query. It actually looks like: <code>select coalesce(t1.content, convert(varbinary(max), t2.content)) from table1 t1 inner join table t2 on t1.id = t2.t1_id</code>"},{"owner":{"account_id":12999097,"reputation":1710,"user_id":9395740,"display_name":"MJH"},"score":0,"creation_date":1524061223,"post_id":49901809,"comment_id":86819605,"body_markdown":"@Larnu Well, you called it!  :)","body":"@Larnu Well, you called it!  :)"},{"owner":{"account_id":2312068,"reputation":90341,"user_id":2029983,"display_name":"Thom A"},"score":1,"creation_date":1524061441,"post_id":49901809,"comment_id":86819788,"body_markdown":"Wait, so the reason why this wasn&#39;t working really was because of `form table`...? **/headdesk**","body":"Wait, so the reason why this wasn&#39;t working really was because of <code>form table</code>...? <b>/headdesk</b>"},{"owner":{"account_id":5156143,"reputation":45,"user_id":5095233,"display_name":"kbral"},"score":0,"creation_date":1524061888,"post_id":49901809,"comment_id":86820146,"body_markdown":"No, that wasn&#39;t the problem. the query is executing. But returns a byte array that when converted to a String separates adds a space after each character.","body":"No, that wasn&#39;t the problem. the query is executing. But returns a byte array that when converted to a String separates adds a space after each character."}],"answers":[{"tags":[],"owner":{"account_id":5156143,"reputation":45,"user_id":5095233,"display_name":"kbral"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1524145487,"creation_date":1524145487,"answer_id":49922690,"question_id":49901809,"body_markdown":"After analysing the retrieved data I saw that Sql Server was converting automatically the varchar data to varbinary encoded with UTF-16LE. To sove it with the java code, I just nedded to instanciate a String passing the encoding like this:\r\n\r\n    new String(retrievedByteArray, Charset.forName(&quot;UTF-16LE&quot;))","title":"Converting varchar to varbinary SQL Server","body":"<p>After analysing the retrieved data I saw that Sql Server was converting automatically the varchar data to varbinary encoded with UTF-16LE. To sove it with the java code, I just nedded to instanciate a String passing the encoding like this:</p>\n\n<pre><code>new String(retrievedByteArray, Charset.forName(\"UTF-16LE\"))\n</code></pre>\n"}],"owner":{"account_id":5156143,"reputation":45,"user_id":5095233,"display_name":"kbral"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":576,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49922690,"answer_count":1,"score":0,"last_activity_date":1676393167,"creation_date":1524060280,"question_id":49901809,"body_markdown":"I have two different tables in my database and I am joining them to extract a varbinary or a varchar depending on which one comes first. I am using the operator `coalesce` to select between them and also using the `convert` operator to convert the varchar to varbinary.\r\nThe final query is something like this:\r\n\r\n    select coalesce(t1.varbinary_column, convert(varbinary(max), t2.varchar_column)) form table1 t1 inner join table2 t2....\r\n\r\nThe query returns a byte array that when converted to a java.lang.String separates each character with a additional space.\r\nIs also needed to say that I am using spring data to execute this native query and also using ResultSet to get the extracted data.\r\nThe question is how can I avoid this behavior?","title":"Converting varchar to varbinary SQL Server","body":"<p>I have two different tables in my database and I am joining them to extract a varbinary or a varchar depending on which one comes first. I am using the operator <code>coalesce</code> to select between them and also using the <code>convert</code> operator to convert the varchar to varbinary.\nThe final query is something like this:</p>\n<pre><code>select coalesce(t1.varbinary_column, convert(varbinary(max), t2.varchar_column)) form table1 t1 inner join table2 t2....\n</code></pre>\n<p>The query returns a byte array that when converted to a java.lang.String separates each character with a additional space.\nIs also needed to say that I am using spring data to execute this native query and also using ResultSet to get the extracted data.\nThe question is how can I avoid this behavior?</p>\n"},{"tags":["java","spring","spring-boot","qualifiers"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1673613960,"post_id":75109389,"comment_id":132544292,"body_markdown":"https://www.baeldung.com/spring-qualifier-annotation","body":"<a href=\"https://www.baeldung.com/spring-qualifier-annotation\" rel=\"nofollow noreferrer\">baeldung.com/spring-qualifier-annotation</a>"},{"owner":{"account_id":14482834,"reputation":3894,"user_id":10461625,"display_name":"PatPanda"},"score":0,"creation_date":1673618007,"post_id":75109389,"comment_id":132545603,"body_markdown":"The link you provided @Stultuske is pretty much my question. As you can see in the example of the tutorial ```@Qualifier(&quot;fooFormatter&quot;)``` the value is hard coded, not configurable. How to make it configurable please?","body":"The link you provided @Stultuske is pretty much my question. As you can see in the example of the tutorial <code>@Qualifier(&quot;fooFormatter&quot;)</code> the value is hard coded, not configurable. How to make it configurable please?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1673618849,"post_id":75109389,"comment_id":132545939,"body_markdown":"not. you don&#39;t. You provide two autowired beans, and based on (if value equals english -&gt; use englishqualifiedBean else useOtherbean. basically: a factory pattern","body":"not. you don&#39;t. You provide two autowired beans, and based on (if value equals english -&gt; use englishqualifiedBean else useOtherbean. basically: a factory pattern"},{"owner":{"account_id":14482834,"reputation":3894,"user_id":10461625,"display_name":"PatPanda"},"score":0,"creation_date":1673619541,"post_id":75109389,"comment_id":132546202,"body_markdown":"This is again the point of my question, many thanks. I have some 100+ concrete language beans. And Autowiring hundreds of concrete beans, + a giant if statement on the bean name is not optimal. Is there a way to simply configure which bean to use at application start time with a configurable @Qualifier?","body":"This is again the point of my question, many thanks. I have some 100+ concrete language beans. And Autowiring hundreds of concrete beans, + a giant if statement on the bean name is not optimal. Is there a way to simply configure which bean to use at application start time with a configurable @Qualifier?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1673619703,"post_id":75109389,"comment_id":132546270,"body_markdown":"This might be against the &quot;point&quot; of your question, but at least it would work. You can&#39;t dynamically build a value you pass to an annotation. You might put them all in a Map, and have a specific (for instance that &quot;english&quot; and &quot;french&quot;) mapped to them, and you can get them that way.","body":"This might be against the &quot;point&quot; of your question, but at least it would work. You can&#39;t dynamically build a value you pass to an annotation. You might put them all in a Map, and have a specific (for instance that &quot;english&quot; and &quot;french&quot;) mapped to them, and you can get them that way."}],"answers":[{"tags":[],"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673620379,"creation_date":1673619650,"answer_id":75110432,"question_id":75109389,"body_markdown":"You can&#39;t make this dynamic, you&#39;ll need to use a workaround.\r\nA factory pattern would do well, here. Instead of one bean, you would have two, and based on the value of that property, you would let your factory choose which one to use.\r\n\r\n    @Component\r\n    public class LanguageFactory {\r\n    \r\n      @Autowired\r\n      @Qualifier(&quot;english&quot;)\r\n      private LanguageService englishLanguage;\r\n    \r\n      @Autowired\r\n      @Qualifier(&quot;french&quot;)\r\n      private LanguageService frenchLanguage;\r\n    \r\n      @Value(&quot;${configuration}&quot;)\r\n      private String chosenLanguage;\r\n    \r\n      public LanguageService getLanguageService() {\r\n        switch(chosenLanguage) {\r\n          case &quot;english&quot;: return englishLanguage;\r\n          case &quot;french&quot;: return frenchLanguage;\r\n          // add any other language you need\r\n          default: throw new Exception(&quot;Invalid language: &quot; + chosenLanguage);\r\n        }\r\n       }\r\n    }\r\n\r\nSo, in your LanguageController, you would get something like this:\r\n\r\n      @Autowired\r\n      private LanguageFactory languageFactory;\r\n    \r\n      @GetMapping(&quot;/test&quot;)\r\n      public String test(@RequestParam String name) {\r\n          return languageFactory.getLangaugeService().process(name);\r\n      }\r\n\r\nEDIT:\r\n\r\nAnother option would be to use a Map. You would avoid all the if-elses, but you would still have to add them to a Map.\r\n\r\n    @Component\r\n    public class LanguageFactory {\r\n    \r\n      private Map&lt;String, LanguageService&gt; languages = new HashMap&lt;&gt;();\r\n    \r\n      @Value(&quot;${configuration}&quot;)\r\n      private String chosenLanguage;\r\n    \r\n      @Autowired\r\n      public LanguageFactory(@Qualifier(&quot;english&quot;) LanguageService englishLanguage, @Qualifer(&quot;french&quot;) LanguageService frenchService) {\r\n        this.languages.put(&quot;english&quot;, englishLanguage);\r\n        this.languages.put(&quot;french&quot;, frenchLanguage);\r\n      }\r\n    \r\n      public LanguageService getLanguageService() {\r\n        LanguageService ls = this.languages.get(chosenLanguage);\r\n        if ( ls == null ) {\r\n          // handle the issue as you see fit\r\n        }\r\n        return ls;\r\n      }\r\n    }\r\n\r\n  ","title":"SpringBoot: Configurable @Qualifier to select bean","body":"<p>You can't make this dynamic, you'll need to use a workaround.\nA factory pattern would do well, here. Instead of one bean, you would have two, and based on the value of that property, you would let your factory choose which one to use.</p>\n<pre><code>@Component\npublic class LanguageFactory {\n\n  @Autowired\n  @Qualifier(&quot;english&quot;)\n  private LanguageService englishLanguage;\n\n  @Autowired\n  @Qualifier(&quot;french&quot;)\n  private LanguageService frenchLanguage;\n\n  @Value(&quot;${configuration}&quot;)\n  private String chosenLanguage;\n\n  public LanguageService getLanguageService() {\n    switch(chosenLanguage) {\n      case &quot;english&quot;: return englishLanguage;\n      case &quot;french&quot;: return frenchLanguage;\n      // add any other language you need\n      default: throw new Exception(&quot;Invalid language: &quot; + chosenLanguage);\n    }\n   }\n}\n</code></pre>\n<p>So, in your LanguageController, you would get something like this:</p>\n<pre><code>  @Autowired\n  private LanguageFactory languageFactory;\n\n  @GetMapping(&quot;/test&quot;)\n  public String test(@RequestParam String name) {\n      return languageFactory.getLangaugeService().process(name);\n  }\n</code></pre>\n<p>EDIT:</p>\n<p>Another option would be to use a Map. You would avoid all the if-elses, but you would still have to add them to a Map.</p>\n<pre><code>@Component\npublic class LanguageFactory {\n\n  private Map&lt;String, LanguageService&gt; languages = new HashMap&lt;&gt;();\n\n  @Value(&quot;${configuration}&quot;)\n  private String chosenLanguage;\n\n  @Autowired\n  public LanguageFactory(@Qualifier(&quot;english&quot;) LanguageService englishLanguage, @Qualifer(&quot;french&quot;) LanguageService frenchService) {\n    this.languages.put(&quot;english&quot;, englishLanguage);\n    this.languages.put(&quot;french&quot;, frenchLanguage);\n  }\n\n  public LanguageService getLanguageService() {\n    LanguageService ls = this.languages.get(chosenLanguage);\n    if ( ls == null ) {\n      // handle the issue as you see fit\n    }\n    return ls;\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673880581,"creation_date":1673622020,"answer_id":75110883,"question_id":75109389,"body_markdown":"If you only need 1 of the `LanguageService` beans active at a time, then you can use `@ConditionalOnProperty` on each of them, each using a unique `havingValue`. Like this (warning, untested code written from memory):\r\n\r\n```java\r\ninterface ConfigKeys {\r\n\tpublic static final String LANGUAGE = &quot;my.app.prefix.language&quot;;\r\n}\r\n\r\n\r\n@Service\r\n@ConditionalOnProperty(name = ConfigKeys.LANGUAGE, havingValue = &quot;english&quot;)\r\npublic class EnglishLanguageServiceImpl implements LanguageService {\r\n\r\n    @Override\r\n    public String process(String name) {\r\n        return &quot;Welcome &quot; + name;\r\n    }\r\n\r\n}\r\n\r\n@Service\r\n@ConditionalOnProperty(name = ConfigKeys.LANGUAGE, havingValue = &quot;french&quot;)\r\npublic class FrenchLanguageServiceImpl implements LanguageService {\r\n\r\n    @Override\r\n    public String process(String name) {\r\n        return &quot;Bonjour &quot; + name;\r\n    }\r\n\r\n}\r\n```\r\n\r\nWith that, you don&#39;t need any qualifiers, just set the `my.app.prefix.language` property in your config (application.properties or application.yaml) to the value you want, and there will just one `LanguageService` bean in the context. You can inject that bean wherever you need it without needing a qualifier.","title":"SpringBoot: Configurable @Qualifier to select bean","body":"<p>If you only need 1 of the <code>LanguageService</code> beans active at a time, then you can use <code>@ConditionalOnProperty</code> on each of them, each using a unique <code>havingValue</code>. Like this (warning, untested code written from memory):</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface ConfigKeys {\n    public static final String LANGUAGE = &quot;my.app.prefix.language&quot;;\n}\n\n\n@Service\n@ConditionalOnProperty(name = ConfigKeys.LANGUAGE, havingValue = &quot;english&quot;)\npublic class EnglishLanguageServiceImpl implements LanguageService {\n\n    @Override\n    public String process(String name) {\n        return &quot;Welcome &quot; + name;\n    }\n\n}\n\n@Service\n@ConditionalOnProperty(name = ConfigKeys.LANGUAGE, havingValue = &quot;french&quot;)\npublic class FrenchLanguageServiceImpl implements LanguageService {\n\n    @Override\n    public String process(String name) {\n        return &quot;Bonjour &quot; + name;\n    }\n\n}\n</code></pre>\n<p>With that, you don't need any qualifiers, just set the <code>my.app.prefix.language</code> property in your config (application.properties or application.yaml) to the value you want, and there will just one <code>LanguageService</code> bean in the context. You can inject that bean wherever you need it without needing a qualifier.</p>\n"},{"tags":[],"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673624441,"creation_date":1673624441,"answer_id":75111358,"question_id":75109389,"body_markdown":"A much simpler option would be to group the related beans in `@Configuration` classes, and then use `@Conditional` to enable (or not) the configuration, and in turn, a set of beans. That way, you’re not dealing with individual beans, as you say you’ve many.","title":"SpringBoot: Configurable @Qualifier to select bean","body":"<p>A much simpler option would be to group the related beans in <code>@Configuration</code> classes, and then use <code>@Conditional</code> to enable (or not) the configuration, and in turn, a set of beans. That way, you’re not dealing with individual beans, as you say you’ve many.</p>\n"}],"owner":{"account_id":14482834,"reputation":3894,"user_id":10461625,"display_name":"PatPanda"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":532,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75110883,"answer_count":3,"score":2,"last_activity_date":1676393140,"creation_date":1673613807,"question_id":75109389,"body_markdown":"Small question for SpringBoot, and how to configure the bean using ```@Qualifier``` please.\r\n\r\nI have a very straightforward piece of code:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.1&lt;/version&gt;\r\n        &lt;relativePath/&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;groupId&gt;com.question&lt;/groupId&gt;\r\n    &lt;artifactId&gt;language&lt;/artifactId&gt;\r\n    &lt;version&gt;1.1&lt;/version&gt;\r\n\r\n    &lt;name&gt;language&lt;/name&gt;\r\n    &lt;description&gt;Spring Boot&lt;/description&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n```\r\npackage com.question;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class LanguageApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(LanguageApplication.class, args);\r\n    }\r\n\r\n}\r\n```\r\n\r\n```\r\npackage com.question.service;\r\n\r\npublic interface LanguageService {\r\n\r\n    String process(String name);\r\n\r\n}\r\n\r\n```\r\n\r\n```\r\npackage com.question.service;\r\n\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service(&quot;french&quot;)\r\npublic class FrenchLanguageServiceImpl implements LanguageService {\r\n\r\n    @Override\r\n    public String process(String name) {\r\n        return &quot;Bonjour &quot; + name;\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n```\r\npackage com.question.service;\r\n\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service(&quot;english&quot;)\r\npublic class EnglishLanguageServiceImpl implements LanguageService {\r\n\r\n    @Override\r\n    public String process(String name) {\r\n        return &quot;Welcome &quot; + name;\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n```\r\npackage com.question.controller;\r\n\r\nimport com.question.service.LanguageService;\r\nimport org.springframework.beans.factory.annotation.Qualifier;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\n@RestController\r\npublic class LanguageController {\r\n\r\n    private final LanguageService languageService;\r\n\r\n    @Value(&quot;${configuration}&quot;)\r\n    public String configuration;\r\n\r\n    public LanguageController(@Qualifier(configuration) LanguageService languageService) {\r\n        this.languageService = languageService;\r\n    }\r\n\r\n    @GetMapping(&quot;/test&quot;)\r\n    public String test(@RequestParam String name) {\r\n        return languageService.process(name);\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nExpected:\r\n\r\nWhat I hope to achieve is equally straightforward. I would like to pass some sort of configuration to ```application.properties```, something like ```configuration=french``` or ```configuration=english```.\r\n\r\nAt the controller layer, to use ```(@Qualifier(configuration) LanguageService languageService)``` And the correct concrete service will be used.\r\n\r\nActual:\r\n\r\nUnfortunately, \r\n\r\n```@Qualifier(configuration) + @Value(&quot;${configuration}&quot;) public String configuration;```\r\n\r\nwill yield ```Attribute Value must be constant```.\r\n\r\nIs there a way we can configure the concrete Bean via a configurable ```@Qualifier``` please?\r\n\r\nI understand there is a way to workaround this by using ApplicationContext getBean.\r\n\r\nBut having this construct: @Qualifier(configuration) makes the code clean and easily understandable. How to achieve this please?\r\n\r\nThank you","title":"SpringBoot: Configurable @Qualifier to select bean","body":"<p>Small question for SpringBoot, and how to configure the bean using <code>@Qualifier</code> please.</p>\n<p>I have a very straightforward piece of code:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;relativePath/&gt;\n    &lt;/parent&gt;\n\n    &lt;groupId&gt;com.question&lt;/groupId&gt;\n    &lt;artifactId&gt;language&lt;/artifactId&gt;\n    &lt;version&gt;1.1&lt;/version&gt;\n\n    &lt;name&gt;language&lt;/name&gt;\n    &lt;description&gt;Spring Boot&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<pre><code>package com.question;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class LanguageApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(LanguageApplication.class, args);\n    }\n\n}\n</code></pre>\n<pre><code>package com.question.service;\n\npublic interface LanguageService {\n\n    String process(String name);\n\n}\n\n</code></pre>\n<pre><code>package com.question.service;\n\nimport org.springframework.stereotype.Service;\n\n@Service(&quot;french&quot;)\npublic class FrenchLanguageServiceImpl implements LanguageService {\n\n    @Override\n    public String process(String name) {\n        return &quot;Bonjour &quot; + name;\n    }\n\n}\n\n</code></pre>\n<pre><code>package com.question.service;\n\nimport org.springframework.stereotype.Service;\n\n@Service(&quot;english&quot;)\npublic class EnglishLanguageServiceImpl implements LanguageService {\n\n    @Override\n    public String process(String name) {\n        return &quot;Welcome &quot; + name;\n    }\n\n}\n\n</code></pre>\n<pre><code>package com.question.controller;\n\nimport com.question.service.LanguageService;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\npublic class LanguageController {\n\n    private final LanguageService languageService;\n\n    @Value(&quot;${configuration}&quot;)\n    public String configuration;\n\n    public LanguageController(@Qualifier(configuration) LanguageService languageService) {\n        this.languageService = languageService;\n    }\n\n    @GetMapping(&quot;/test&quot;)\n    public String test(@RequestParam String name) {\n        return languageService.process(name);\n    }\n\n}\n\n</code></pre>\n<p>Expected:</p>\n<p>What I hope to achieve is equally straightforward. I would like to pass some sort of configuration to <code>application.properties</code>, something like <code>configuration=french</code> or <code>configuration=english</code>.</p>\n<p>At the controller layer, to use <code>(@Qualifier(configuration) LanguageService languageService)</code> And the correct concrete service will be used.</p>\n<p>Actual:</p>\n<p>Unfortunately,</p>\n<p><code>@Qualifier(configuration) + @Value(&quot;${configuration}&quot;) public String configuration;</code></p>\n<p>will yield <code>Attribute Value must be constant</code>.</p>\n<p>Is there a way we can configure the concrete Bean via a configurable <code>@Qualifier</code> please?</p>\n<p>I understand there is a way to workaround this by using ApplicationContext getBean.</p>\n<p>But having this construct: @Qualifier(configuration) makes the code clean and easily understandable. How to achieve this please?</p>\n<p>Thank you</p>\n"},{"tags":["java","spring","jpa","transactions","spring-data"],"comments":[{"owner":{"account_id":136531,"reputation":21531,"user_id":340088,"accept_rate":68,"display_name":"jbx"},"score":1,"creation_date":1674065643,"post_id":75163357,"comment_id":132637540,"body_markdown":"1. Are you sure the ID in `PersonDto` corresponds to the same ID in the returned `Person` object? Are you sure it is not null?\n2. Are you sure you are not calling `method2` from another Transactional method, thus the transaction wouldn&#39;t have ended yet, and maybe `method3()` is called from another transaction before the first one is committed?","body":"1. Are you sure the ID in <code>PersonDto</code> corresponds to the same ID in the returned <code>Person</code> object? Are you sure it is not null? 2. Are you sure you are not calling <code>method2</code> from another Transactional method, thus the transaction wouldn&#39;t have ended yet, and maybe <code>method3()</code> is called from another transaction before the first one is committed?"},{"owner":{"account_id":11874841,"reputation":303,"user_id":8690140,"display_name":"Serr"},"score":0,"creation_date":1674070114,"post_id":75163357,"comment_id":132638915,"body_markdown":"Yes, I&#39;m sure, I have a log for it before retrieving it in method3. Also, it works most of the time, about 1% of the time it fails, generally, when it executes super fast. About the Transaction, in the StackTrace there is no other method with a @Transactional annotation. Thanks!","body":"Yes, I&#39;m sure, I have a log for it before retrieving it in method3. Also, it works most of the time, about 1% of the time it fails, generally, when it executes super fast. About the Transaction, in the StackTrace there is no other method with a @Transactional annotation. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674066861,"creation_date":1674066861,"answer_id":75163798,"question_id":75163357,"body_markdown":"I can see a couple of reason why you&#39;re getting the results you describe.\r\n\r\nOne possibility is that `@Transactional` doesn&#39;t necessarily mean &quot;execute this method in a totally separate transaction.&quot; The default propagation is `REQUIRED`, which will use an existing transaction if one is already active. So if `method2()` is called in a stack where a transaction was opened earlier, it won&#39;t create a new one (and thus the new entity won&#39;t be committed) until that original transaction is committed. If this is what&#39;s happening, one solution would be to change the propagation to `REQUIRES_NEW`:\r\n```java\r\n@Transactional(propagation = REQUIRES_NEW)\r\n```\r\n\r\nAnother possibility, which seems more likely, is that these methods are all in the same class. To understand why that fails, you have to understand how Spring implements handling of `@Transactional` (and most other behavioral annotations): using proxies. That means that only method calls that come through the proxy get the transactional behavior. That&#39;s the typical scenario when one object calls a reference it has to another; the reference is actually to the proxy, which intercepts the call and wraps the behavior (in this case, transactionality) around it. However, when calling methods within the same instance, there is no proxy in play (Spring doesn&#39;t/can&#39;t replace `this` with a reference to the proxy), and thus no transactional behavior.\r\n\r\nThere are a few ways to work around that, but first I would consider how to restructure my classes and methods to avoid it. If that&#39;s not reasonable, things like AspectJ, `TransactionTemplate`, and maybe some other ideas are discussed in [this SO Q&amp;A][1].\r\n\r\n---\r\nAddendum:\r\n[This question and its answers][2] also talks about options to work around the proxying problem.\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/4396284/639520\r\n  [2]: https://stackoverflow.com/q/3423972/639520","title":"Database is not changed immediately after the @Transactional method ends","body":"<p>I can see a couple of reason why you're getting the results you describe.</p>\n<p>One possibility is that <code>@Transactional</code> doesn't necessarily mean &quot;execute this method in a totally separate transaction.&quot; The default propagation is <code>REQUIRED</code>, which will use an existing transaction if one is already active. So if <code>method2()</code> is called in a stack where a transaction was opened earlier, it won't create a new one (and thus the new entity won't be committed) until that original transaction is committed. If this is what's happening, one solution would be to change the propagation to <code>REQUIRES_NEW</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional(propagation = REQUIRES_NEW)\n</code></pre>\n<p>Another possibility, which seems more likely, is that these methods are all in the same class. To understand why that fails, you have to understand how Spring implements handling of <code>@Transactional</code> (and most other behavioral annotations): using proxies. That means that only method calls that come through the proxy get the transactional behavior. That's the typical scenario when one object calls a reference it has to another; the reference is actually to the proxy, which intercepts the call and wraps the behavior (in this case, transactionality) around it. However, when calling methods within the same instance, there is no proxy in play (Spring doesn't/can't replace <code>this</code> with a reference to the proxy), and thus no transactional behavior.</p>\n<p>There are a few ways to work around that, but first I would consider how to restructure my classes and methods to avoid it. If that's not reasonable, things like AspectJ, <code>TransactionTemplate</code>, and maybe some other ideas are discussed in <a href=\"https://stackoverflow.com/q/4396284/639520\">this SO Q&amp;A</a>.</p>\n<hr />\n<p>Addendum:\n<a href=\"https://stackoverflow.com/q/3423972/639520\">This question and its answers</a> also talks about options to work around the proxying problem.</p>\n"}],"owner":{"account_id":11874841,"reputation":303,"user_id":8690140,"display_name":"Serr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":558,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75163798,"answer_count":1,"score":2,"last_activity_date":1676393080,"creation_date":1674064523,"question_id":75163357,"body_markdown":"I have a Java, Spring Data application with a PostgreSQL DB and I have a code similar to this in my service layer:\r\n\r\n\r\n```\r\npublic void method1() {\r\n    PersonDto dto = method2();\r\n    method3(dto);\r\n}\r\n\r\n@Transactional\r\npublic PersonDto method2() {\r\n    Person p1 = personRepository.saveAndFlush(new Person());\r\n    return createPersonDto(p1);\r\n}\r\n\r\n@Transactional\r\npublic void method3(PersonDto p1) {\r\n    Person p2 = personRepository.findById(p1.getId());\r\n    if (p2 == null) {\r\n        System.out.println(&quot;Not in the DB&quot;);\r\n    } else {\r\n        System.out.println(&quot;In the DB&quot;);\r\n    }\r\n}\r\n``` \r\n\r\nSometimes this code prints &quot;Not in the DB&quot;, when I was expecting that it would always print &quot;In the DB&quot;. My questions are:\r\n\r\n 1. This saveAndFlush is even necessary? Since I&#39;m not reusing that Entity in the same transaction, I guess it would have the same effect as a save, right?\r\n 2. How to guarantee that the changes in method2 will be committed before method 3 calls it? So it will always print &quot;In the DB&quot;?\r\n 3. The fact that I&#39;m converting my Entity to a DTO is what is messing this up? Maybe if I was passing the Entity itself it would work properly?\r\n\r\nI&#39;m thinking about @Transactional only in method1, or replacing @Transactional in method3 with @Transactional(isolation = Isolation.READ_UNCOMMITTED).\r\nAny advice?","title":"Database is not changed immediately after the @Transactional method ends","body":"<p>I have a Java, Spring Data application with a PostgreSQL DB and I have a code similar to this in my service layer:</p>\n<pre><code>public void method1() {\n    PersonDto dto = method2();\n    method3(dto);\n}\n\n@Transactional\npublic PersonDto method2() {\n    Person p1 = personRepository.saveAndFlush(new Person());\n    return createPersonDto(p1);\n}\n\n@Transactional\npublic void method3(PersonDto p1) {\n    Person p2 = personRepository.findById(p1.getId());\n    if (p2 == null) {\n        System.out.println(&quot;Not in the DB&quot;);\n    } else {\n        System.out.println(&quot;In the DB&quot;);\n    }\n}\n</code></pre>\n<p>Sometimes this code prints &quot;Not in the DB&quot;, when I was expecting that it would always print &quot;In the DB&quot;. My questions are:</p>\n<ol>\n<li>This saveAndFlush is even necessary? Since I'm not reusing that Entity in the same transaction, I guess it would have the same effect as a save, right?</li>\n<li>How to guarantee that the changes in method2 will be committed before method 3 calls it? So it will always print &quot;In the DB&quot;?</li>\n<li>The fact that I'm converting my Entity to a DTO is what is messing this up? Maybe if I was passing the Entity itself it would work properly?</li>\n</ol>\n<p>I'm thinking about @Transactional only in method1, or replacing @Transactional in method3 with @Transactional(isolation = Isolation.READ_UNCOMMITTED).\nAny advice?</p>\n"},{"tags":["java","json","spring","spring-boot","jackson-databind"],"comments":[{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":0,"creation_date":1674073271,"post_id":75164807,"comment_id":132639787,"body_markdown":"What does the `body` member look like before serialization?  It looks like you&#39;re putting JSON inside of JSON.","body":"What does the <code>body</code> member look like before serialization?  It looks like you&#39;re putting JSON inside of JSON."},{"owner":{"account_id":18322534,"reputation":510,"user_id":13342990,"display_name":"Ryan Burch"},"score":0,"creation_date":1674073529,"post_id":75164807,"comment_id":132639863,"body_markdown":"@stdunbar If I print to stdout before the ResponseEntity I get `{&quot;status&quot;:&quot;Healthy!&quot;}`.","body":"@stdunbar If I print to stdout before the ResponseEntity I get <code>{&quot;status&quot;:&quot;Healthy!&quot;}</code>."},{"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"score":0,"creation_date":1674073533,"post_id":75164807,"comment_id":132639864,"body_markdown":"why do you want to have body as string? Keep the type as `HttpEntity` and remove this `EntityUtils.toString(entity)`. It should work fine","body":"why do you want to have body as string? Keep the type as <code>HttpEntity</code> and remove this <code>EntityUtils.toString(entity)</code>. It should work fine"},{"owner":{"account_id":18322534,"reputation":510,"user_id":13342990,"display_name":"Ryan Burch"},"score":0,"creation_date":1674073696,"post_id":75164807,"comment_id":132639915,"body_markdown":"@pvpkiran If I change the type to HttpEntity in my Response class and pass the entity, I get an Error. \n`No serializer found for class org.apache.http.conn.EofSensorInputStream and no properties discovered to create BeanSerializer`","body":"@pvpkiran If I change the type to HttpEntity in my Response class and pass the entity, I get an Error.  <code>No serializer found for class org.apache.http.conn.EofSensorInputStream and no properties discovered to create BeanSerializer</code>"}],"answers":[{"tags":[],"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674088155,"creation_date":1674074801,"answer_id":75165113,"question_id":75164807,"body_markdown":"You are getting exactly what you asked for with the definition of `ApiResponse`.\r\n```Java\r\npublic String body;\r\n```\r\nIf you want Jackson to serialize that as a part of the object. It needs to be defined as part of the object.\r\nThis may be as simple as changing it to `JsonNode`.\r\n\r\n```Java\r\npublic JsonNode body;\r\n```\r\nAnd generating a `JsonNode` from the entity.\r\n```Java\r\nif (entity != null) {\r\n  // return it as a JsonNode\r\n  String stringResponse = EntityUtils.toString(entity);\r\n  ObjectMapper mapper = new ObjectMapper();\r\n  JsonNode jsonNode = mapper.readTree(stringResponse);\r\n  apiResponse.setBody(jsonNode);\r\n}\r\n```\r\n\r\nAlthough it would probably be better if your `ApiResponse` object more accurately modeled what it is holding.","title":"Java Spring Boot response not converting whole response to JSON","body":"<p>You are getting exactly what you asked for with the definition of <code>ApiResponse</code>.</p>\n<pre><code>public String body;\n</code></pre>\n<p>If you want Jackson to serialize that as a part of the object. It needs to be defined as part of the object.\nThis may be as simple as changing it to <code>JsonNode</code>.</p>\n<pre><code>public JsonNode body;\n</code></pre>\n<p>And generating a <code>JsonNode</code> from the entity.</p>\n<pre><code>if (entity != null) {\n  // return it as a JsonNode\n  String stringResponse = EntityUtils.toString(entity);\n  ObjectMapper mapper = new ObjectMapper();\n  JsonNode jsonNode = mapper.readTree(stringResponse);\n  apiResponse.setBody(jsonNode);\n}\n</code></pre>\n<p>Although it would probably be better if your <code>ApiResponse</code> object more accurately modeled what it is holding.</p>\n"},{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674077863,"creation_date":1674077863,"answer_id":75165547,"question_id":75164807,"body_markdown":"As others have said, by declaring the type of `ApiResponse.body` as String, that&#39;s exactly what&#39;s being stored there; the JSON serializer doesn&#39;t have any knowledge of the content of the String, so it just serializes it out (with required escaping to make it a valid string value).\r\n\r\nI can think of 2 options to make that a more useful object that can be serialized: A) transform the response `HttpEntity` you get from the downstream API into a simple DTO with just the properties you care about; or B) use `HttpEntity&lt;&gt;` directly and instruct the serializer to ignore properties you don&#39;t care about (such as the `EofSensorInputStream` from the exception you reported).\r\n\r\nOption A seems fairly obvious so I won&#39;t show code for that. Here&#39;s how you can accomplish Option B:\r\n\r\n```java\r\npublic class ApiResponse {\r\n    // ... other fields ...\r\n    private HttpEntity&lt;?&gt; body;\r\n\r\n    // ... other methods ...\r\n\r\n    @JsonIncludeProperties({&quot;body&quot;, &quot;headers&quot;})\r\n    public HttpEntity&lt;?&gt; getBody() {\r\n        return body;\r\n    }\r\n```\r\n\r\nThat instructs the serializer to only include `body` and `headers` when it serializes the `body` of `ApiResponse`, ignoring anything else in the `HttpEntity`.","title":"Java Spring Boot response not converting whole response to JSON","body":"<p>As others have said, by declaring the type of <code>ApiResponse.body</code> as String, that's exactly what's being stored there; the JSON serializer doesn't have any knowledge of the content of the String, so it just serializes it out (with required escaping to make it a valid string value).</p>\n<p>I can think of 2 options to make that a more useful object that can be serialized: A) transform the response <code>HttpEntity</code> you get from the downstream API into a simple DTO with just the properties you care about; or B) use <code>HttpEntity&lt;&gt;</code> directly and instruct the serializer to ignore properties you don't care about (such as the <code>EofSensorInputStream</code> from the exception you reported).</p>\n<p>Option A seems fairly obvious so I won't show code for that. Here's how you can accomplish Option B:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ApiResponse {\n    // ... other fields ...\n    private HttpEntity&lt;?&gt; body;\n\n    // ... other methods ...\n\n    @JsonIncludeProperties({&quot;body&quot;, &quot;headers&quot;})\n    public HttpEntity&lt;?&gt; getBody() {\n        return body;\n    }\n</code></pre>\n<p>That instructs the serializer to only include <code>body</code> and <code>headers</code> when it serializes the <code>body</code> of <code>ApiResponse</code>, ignoring anything else in the <code>HttpEntity</code>.</p>\n"}],"owner":{"account_id":18322534,"reputation":510,"user_id":13342990,"display_name":"Ryan Burch"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":534,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75165113,"answer_count":2,"score":1,"last_activity_date":1676393044,"creation_date":1674072753,"question_id":75164807,"body_markdown":"I am having an issue where my Spring Boot response Entity is mostly being converted to JSON but the body is staying as a string.\r\n\r\nI have read many of the other questions on this site, but they all seem to point to the same thing. \r\n\r\npom.xml Dependencies\r\n```xml\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;!--OpenAPI Generator Dependencies--&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!--Http Dependencies--&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!--Log4j Dependencies--&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!--Spring Framework Dependencies--&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!--Dotenv Dependencies--&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.cdimascio&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;java-dotenv&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${dotenv.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!--JSON Object Dependencies--&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.json&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;json&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;20220924&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.14.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.14.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n```\r\n\r\nApiResponse Class\r\n```java\r\npublic class ApiResponse {\r\n    // class used to model api response data\r\n    public Integer statusCode;\r\n    public String statusReason;\r\n    public String statusLine;\r\n    public String url;\r\n    public String body;\r\n    public ProtocolVersion protocolVersion;\r\n\r\n    public String getStatusLine() {\r\n        return statusLine;\r\n    }\r\n\r\n    public void setStatusLine(String statusLine) {\r\n        this.statusLine = statusLine;\r\n    }\r\n\r\n    public ProtocolVersion getProtocolVersion() {\r\n        return protocolVersion;\r\n    }\r\n\r\n    public String getStatusReason() {\r\n        return statusReason;\r\n    }\r\n\r\n    public void setStatusReason(String statusReason) {\r\n        this.statusReason = statusReason;\r\n    }\r\n\r\n    public void setProtocolVersion(ProtocolVersion protocolVersion) {\r\n        this.protocolVersion = protocolVersion;\r\n    }\r\n\r\n    public Integer getStatusCode() {\r\n        return statusCode;\r\n    }\r\n\r\n    public void setStatusCode(Integer statusCode) {\r\n        this.statusCode = statusCode;\r\n    }\r\n\r\n    public String getUrl() {\r\n        return url;\r\n    }\r\n\r\n    public void setUrl(String url) {\r\n        this.url = url;\r\n    }\r\n\r\n    public String getBody() {\r\n        return body;\r\n    }\r\n\r\n    public void setBody(String body) {\r\n        this.body = body;\r\n    }\r\n\r\n}\r\n```\r\n\r\nprocessResponse method\r\n```java\r\n    public ApiResponse processResponse(CloseableHttpResponse response) throws IOException {\r\n        // process custom apache httpClient response\r\n        ApiResponse apiResponse = new ApiResponse();\r\n        apiResponse.setProtocolVersion(response.getProtocolVersion());\r\n        apiResponse.setStatusCode(response.getStatusLine().getStatusCode());\r\n        apiResponse.setStatusReason(response.getStatusLine().getReasonPhrase());\r\n        apiResponse.setStatusLine(response.getStatusLine().toString());\r\n\r\n        HttpEntity entity = response.getEntity();\r\n        if (entity != null) {\r\n            // return it as a String\r\n            String result = EntityUtils.toString(entity);\r\n            apiResponse.setBody(result);\r\n        }\r\n        response.close();\r\n        return apiResponse;\r\n    }\r\n```\r\n\r\ngetCall method\r\n```java\r\n    @GetMapping(value = &quot;/getHealth&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n    public ResponseEntity&lt;ApiResponse&gt; getClientHealth() throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException {\r\n\r\n        Client clientSetup = new Client(dotEnv.get(&quot;URL&quot;), 80);\r\n\r\n        try {\r\n            ApiResponse response = clientSetup.getHealth();\r\n\r\n            return new ResponseEntity&lt;&gt;(response, HttpStatusCode.valueOf(response.getStatusCode()));\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```\r\n\r\nThe response\r\n```json\r\n{\r\n  &quot;statusCode&quot;: 200,\r\n  &quot;statusReason&quot;: &quot;OK&quot;,\r\n  &quot;statusLine&quot;: &quot;HTTP/1.1 200 OK&quot;,\r\n  &quot;url&quot;: null,\r\n  &quot;body&quot;: &quot;{\\&quot;status\\&quot;:\\&quot;Healthy!\\&quot;}&quot;,\r\n  &quot;protocolVersion&quot;: {\r\n    &quot;protocol&quot;: &quot;HTTP&quot;,\r\n    &quot;major&quot;: 1,\r\n    &quot;minor&quot;: 1\r\n  }\r\n}\r\n```\r\nThe problem is with `&quot;body&quot;: &quot;{\\&quot;status\\&quot;:\\&quot;Healthy!\\&quot;}&quot;`\r\n\r\nI have been unsuccessful in getting the body to be converted from a string to JSON when returned through my Spring Boot ResponseEntity.","title":"Java Spring Boot response not converting whole response to JSON","body":"<p>I am having an issue where my Spring Boot response Entity is mostly being converted to JSON but the body is staying as a string.</p>\n<p>I have read many of the other questions on this site, but they all seem to point to the same thing.</p>\n<p>pom.xml Dependencies</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;dependencies&gt;\n        &lt;!--OpenAPI Generator Dependencies--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n            &lt;version&gt;2.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--Http Dependencies--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!--Log4j Dependencies--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!--Spring Framework Dependencies--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;!--Dotenv Dependencies--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.cdimascio&lt;/groupId&gt;\n            &lt;artifactId&gt;java-dotenv&lt;/artifactId&gt;\n            &lt;version&gt;${dotenv.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!--JSON Object Dependencies--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\n            &lt;version&gt;20220924&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.14.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n            &lt;version&gt;2.14.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n</code></pre>\n<p>ApiResponse Class</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ApiResponse {\n    // class used to model api response data\n    public Integer statusCode;\n    public String statusReason;\n    public String statusLine;\n    public String url;\n    public String body;\n    public ProtocolVersion protocolVersion;\n\n    public String getStatusLine() {\n        return statusLine;\n    }\n\n    public void setStatusLine(String statusLine) {\n        this.statusLine = statusLine;\n    }\n\n    public ProtocolVersion getProtocolVersion() {\n        return protocolVersion;\n    }\n\n    public String getStatusReason() {\n        return statusReason;\n    }\n\n    public void setStatusReason(String statusReason) {\n        this.statusReason = statusReason;\n    }\n\n    public void setProtocolVersion(ProtocolVersion protocolVersion) {\n        this.protocolVersion = protocolVersion;\n    }\n\n    public Integer getStatusCode() {\n        return statusCode;\n    }\n\n    public void setStatusCode(Integer statusCode) {\n        this.statusCode = statusCode;\n    }\n\n    public String getUrl() {\n        return url;\n    }\n\n    public void setUrl(String url) {\n        this.url = url;\n    }\n\n    public String getBody() {\n        return body;\n    }\n\n    public void setBody(String body) {\n        this.body = body;\n    }\n\n}\n</code></pre>\n<p>processResponse method</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public ApiResponse processResponse(CloseableHttpResponse response) throws IOException {\n        // process custom apache httpClient response\n        ApiResponse apiResponse = new ApiResponse();\n        apiResponse.setProtocolVersion(response.getProtocolVersion());\n        apiResponse.setStatusCode(response.getStatusLine().getStatusCode());\n        apiResponse.setStatusReason(response.getStatusLine().getReasonPhrase());\n        apiResponse.setStatusLine(response.getStatusLine().toString());\n\n        HttpEntity entity = response.getEntity();\n        if (entity != null) {\n            // return it as a String\n            String result = EntityUtils.toString(entity);\n            apiResponse.setBody(result);\n        }\n        response.close();\n        return apiResponse;\n    }\n</code></pre>\n<p>getCall method</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @GetMapping(value = &quot;/getHealth&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\n    public ResponseEntity&lt;ApiResponse&gt; getClientHealth() throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException {\n\n        Client clientSetup = new Client(dotEnv.get(&quot;URL&quot;), 80);\n\n        try {\n            ApiResponse response = clientSetup.getHealth();\n\n            return new ResponseEntity&lt;&gt;(response, HttpStatusCode.valueOf(response.getStatusCode()));\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<p>The response</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;statusCode&quot;: 200,\n  &quot;statusReason&quot;: &quot;OK&quot;,\n  &quot;statusLine&quot;: &quot;HTTP/1.1 200 OK&quot;,\n  &quot;url&quot;: null,\n  &quot;body&quot;: &quot;{\\&quot;status\\&quot;:\\&quot;Healthy!\\&quot;}&quot;,\n  &quot;protocolVersion&quot;: {\n    &quot;protocol&quot;: &quot;HTTP&quot;,\n    &quot;major&quot;: 1,\n    &quot;minor&quot;: 1\n  }\n}\n</code></pre>\n<p>The problem is with <code>&quot;body&quot;: &quot;{\\&quot;status\\&quot;:\\&quot;Healthy!\\&quot;}&quot;</code></p>\n<p>I have been unsuccessful in getting the body to be converted from a string to JSON when returned through my Spring Boot ResponseEntity.</p>\n"},{"tags":["java","spring","annotations","aop","spring-aop"],"answers":[{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674828842,"creation_date":1674828842,"answer_id":75259292,"question_id":75258989,"body_markdown":"To understand why you&#39;re getting the results you see, you have to understand how Spring implements handling of most behavioral annotations: using proxies. That means that only method calls that come through the proxy get the annotation behavior. That&#39;s the typical scenario when one object calls a reference it has to another object; the reference is actually to the proxy, which intercepts the call and wraps the behavior (in this case, logging) around it. However, when calling methods within the same instance, there is no proxy in play (Spring doesn&#39;t/can&#39;t replace `this` with a reference to the proxy), and thus no annotation behavior.\r\n\r\nThere are a few ways to work around that, some ideas are discussed in [this SO Q&amp;A][1]. [There are also some answers here][2] with options to work around the proxying limitation.\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/4396284/639520\r\n  [2]: https://stackoverflow.com/q/3423972/639520","title":"Spring Boot AOP nested custom annotations not called","body":"<p>To understand why you're getting the results you see, you have to understand how Spring implements handling of most behavioral annotations: using proxies. That means that only method calls that come through the proxy get the annotation behavior. That's the typical scenario when one object calls a reference it has to another object; the reference is actually to the proxy, which intercepts the call and wraps the behavior (in this case, logging) around it. However, when calling methods within the same instance, there is no proxy in play (Spring doesn't/can't replace <code>this</code> with a reference to the proxy), and thus no annotation behavior.</p>\n<p>There are a few ways to work around that, some ideas are discussed in <a href=\"https://stackoverflow.com/q/4396284/639520\">this SO Q&amp;A</a>. <a href=\"https://stackoverflow.com/q/3423972/639520\">There are also some answers here</a> with options to work around the proxying limitation.</p>\n"}],"owner":{"account_id":6441401,"reputation":506,"user_id":4991308,"accept_rate":62,"display_name":"Ares91"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":485,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1674860966,"accepted_answer_id":75259292,"answer_count":1,"score":0,"last_activity_date":1676392958,"creation_date":1674827275,"question_id":75258989,"body_markdown":"I have created a simple custom annotation in Spring Boot that logs something and it&#39;s working but only for the first annotation, the nested one are not called\r\n\r\n    import java.lang.annotation.ElementType;\r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.RetentionPolicy;\r\n    import java.lang.annotation.Target;\r\n    \r\n    @Target(ElementType.METHOD)\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface Traceable {\r\n    \r\n    }\r\n\r\nAnnotation processor (aspect)\r\n\r\n    import org.aspectj.lang.ProceedingJoinPoint;\r\n    import org.aspectj.lang.annotation.Around;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Aspect\r\n    @Component\r\n    public class TraceableAspect {\r\n    \r\n        @Around(&quot;@annotation(Traceable)&quot;)\r\n        public Object trace(ProceedingJoinPoint joinPoint) throws Throwable {\r\n    \r\n            System.out.println(&quot;Inside Aspect&quot;);\r\n            \r\n            Object result = joinPoint.proceed();\r\n    \r\n            System.out.println(result);\r\n            return result;\r\n        }\r\n    }\r\n\r\nExample of a controller used to test\r\n\r\n\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    \r\n    @Controller\r\n    @RequestMapping(&quot;/test&quot;)\r\n    public class ControllerTest {\r\n    \r\n        @GetMapping(&quot;/get&quot;)\r\n        @Traceable\r\n        public String get(){\r\n    \r\n            test1();\r\n            test2();\r\n    \r\n            return &quot;Hi&quot;;\r\n        }\r\n        \r\n        @Traceable\r\n        public void test1(){\r\n            String str = &quot;1&quot;;\r\n            System.out.println(str);\r\n        }\r\n\r\n        @Traceable\r\n        public Object test2(){\r\n            String str = &quot;2&quot;;\r\n            System.out.println(str);\r\n\r\n            test1();\r\n            return null;\r\n        }\r\n    \r\n    }\r\n\r\nThe console output here is:\r\n\r\n    Inside Aspect\r\n    1\r\n    2\r\n    1\r\n    Hi\r\n\r\nbut I think it&#39;s worng, it has to be like this:\r\n\r\n        Inside Aspect\r\n        Inside Aspect\r\n        1\r\n        Inside Aspect\r\n        2\r\n        Inside Aspect\r\n        1\r\n        Hi\r\n\r\nIt seems that only the first @Traceable is processed, all the other ones are ignored. How to handle this? Thanks","title":"Spring Boot AOP nested custom annotations not called","body":"<p>I have created a simple custom annotation in Spring Boot that logs something and it's working but only for the first annotation, the nested one are not called</p>\n<pre><code>import java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface Traceable {\n\n}\n</code></pre>\n<p>Annotation processor (aspect)</p>\n<pre><code>import org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.springframework.stereotype.Component;\n\n@Aspect\n@Component\npublic class TraceableAspect {\n\n    @Around(&quot;@annotation(Traceable)&quot;)\n    public Object trace(ProceedingJoinPoint joinPoint) throws Throwable {\n\n        System.out.println(&quot;Inside Aspect&quot;);\n        \n        Object result = joinPoint.proceed();\n\n        System.out.println(result);\n        return result;\n    }\n}\n</code></pre>\n<p>Example of a controller used to test</p>\n<pre><code>import org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\n@RequestMapping(&quot;/test&quot;)\npublic class ControllerTest {\n\n    @GetMapping(&quot;/get&quot;)\n    @Traceable\n    public String get(){\n\n        test1();\n        test2();\n\n        return &quot;Hi&quot;;\n    }\n    \n    @Traceable\n    public void test1(){\n        String str = &quot;1&quot;;\n        System.out.println(str);\n    }\n\n    @Traceable\n    public Object test2(){\n        String str = &quot;2&quot;;\n        System.out.println(str);\n\n        test1();\n        return null;\n    }\n\n}\n</code></pre>\n<p>The console output here is:</p>\n<pre><code>Inside Aspect\n1\n2\n1\nHi\n</code></pre>\n<p>but I think it's worng, it has to be like this:</p>\n<pre><code>    Inside Aspect\n    Inside Aspect\n    1\n    Inside Aspect\n    2\n    Inside Aspect\n    1\n    Hi\n</code></pre>\n<p>It seems that only the first @Traceable is processed, all the other ones are ignored. How to handle this? Thanks</p>\n"},{"tags":["java","spring","hibernate","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674829954,"creation_date":1674829336,"answer_id":75259379,"question_id":75258920,"body_markdown":"In JPA, entity IDs can be either assigned by the application code, or generated (by the JPA provider, such as Hibernate, or by the database). In many situations, it&#39;s desirable to have the entity IDs be *generated* instead of applicaiton-assigned; it seems like that&#39;s what you are expecting.\r\n\r\nIf so, you need to annotate the `id` field with `@GeneratedValue`. For example:\r\n```java\r\nclass Entity {\r\n    @Id\r\n    @GeneratedValue\r\n    UUID id;\r\n\r\n    String name;\r\n}\r\n```\r\n\r\n\r\nNote that there are considerations to be made regarding the generation strategy, so you&#39;ll want to educate yourself about them and make the right choice based on your situation. [This][1] is a good page that discusses the options. [This SO Answer][2] also is worth reading (the author is a well-known expert on JPA and Hibernate).\r\n\r\n\r\n  [1]: https://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Sequencing\r\n  [2]: https://stackoverflow.com/a/38391106/639520","title":"How to save an entity without an id in Spring Data JPA (hibernate)","body":"<p>In JPA, entity IDs can be either assigned by the application code, or generated (by the JPA provider, such as Hibernate, or by the database). In many situations, it's desirable to have the entity IDs be <em>generated</em> instead of applicaiton-assigned; it seems like that's what you are expecting.</p>\n<p>If so, you need to annotate the <code>id</code> field with <code>@GeneratedValue</code>. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Entity {\n    @Id\n    @GeneratedValue\n    UUID id;\n\n    String name;\n}\n</code></pre>\n<p>Note that there are considerations to be made regarding the generation strategy, so you'll want to educate yourself about them and make the right choice based on your situation. <a href=\"https://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Sequencing\" rel=\"nofollow noreferrer\">This</a> is a good page that discusses the options. <a href=\"https://stackoverflow.com/a/38391106/639520\">This SO Answer</a> also is worth reading (the author is a well-known expert on JPA and Hibernate).</p>\n"}],"owner":{"account_id":6412021,"reputation":1101,"user_id":4971476,"display_name":"Dave Ankin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":824,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75259379,"answer_count":1,"score":0,"last_activity_date":1676392897,"creation_date":1674826961,"question_id":75258920,"body_markdown":"consider an entity with just an id and text field:\r\n\r\n```java\r\n@lombok.Data\r\nclass Entity {\r\n  @javax.persistence.Id\r\n  UUID id;\r\n  String name;\r\n}\r\n```\r\n\r\nconsider that the table definition is as follows:\r\n\r\n```sql\r\ncreate table entity (\r\n  id uniqueidentifier not null primary key default newid(),\r\n  name varchar(max)\r\n);\r\n```\r\n\r\nI am then curious why this doesn&#39;t work and how i could make it work:\r\n\r\n```java\r\nUUID savedId = entityRepository.save(new Entity().setName(&quot;entity name&quot;)).getId();\r\n```","title":"How to save an entity without an id in Spring Data JPA (hibernate)","body":"<p>consider an entity with just an id and text field:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@lombok.Data\nclass Entity {\n  @javax.persistence.Id\n  UUID id;\n  String name;\n}\n</code></pre>\n<p>consider that the table definition is as follows:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table entity (\n  id uniqueidentifier not null primary key default newid(),\n  name varchar(max)\n);\n</code></pre>\n<p>I am then curious why this doesn't work and how i could make it work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>UUID savedId = entityRepository.save(new Entity().setName(&quot;entity name&quot;)).getId();\n</code></pre>\n"},{"tags":["java","spring","spring-boot","stream","resttemplate"],"answers":[{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674834557,"creation_date":1674834557,"answer_id":75260388,"question_id":75259593,"body_markdown":"[Spring Cloud Gateway][1] (more documentation [here][2]) can help. It&#39;s primary purpose seems to be as a configuration-driven gateway, but it can be embedded into an application to serve just certain endpoints; so you may be able to configure it in your &quot;Ingress&quot; service to route certain requests to your Storage service.\r\n\r\nIf that doesn&#39;t work (or, as was in my case, it&#39;s too much work), you can use some specific classes from Spring Cloud Gateway in your own service. Specifically, I&#39;ve used the `ProxyExchange` class to [proxy calls to another service][3] and stream the results back to the original caller.\r\n\r\n\r\n  [1]: https://spring.io/projects/spring-cloud-gateway\r\n  [2]: https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/\r\n  [3]: https://cloud.spring.io/spring-cloud-gateway/multi/multi__building_a_simple_gateway_using_spring_mvc.html","title":"Restream files from another server to client springboot","body":"<p><a href=\"https://spring.io/projects/spring-cloud-gateway\" rel=\"nofollow noreferrer\">Spring Cloud Gateway</a> (more documentation <a href=\"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/\" rel=\"nofollow noreferrer\">here</a>) can help. It's primary purpose seems to be as a configuration-driven gateway, but it can be embedded into an application to serve just certain endpoints; so you may be able to configure it in your &quot;Ingress&quot; service to route certain requests to your Storage service.</p>\n<p>If that doesn't work (or, as was in my case, it's too much work), you can use some specific classes from Spring Cloud Gateway in your own service. Specifically, I've used the <code>ProxyExchange</code> class to <a href=\"https://cloud.spring.io/spring-cloud-gateway/multi/multi__building_a_simple_gateway_using_spring_mvc.html\" rel=\"nofollow noreferrer\">proxy calls to another service</a> and stream the results back to the original caller.</p>\n"}],"owner":{"account_id":16710393,"reputation":21,"user_id":12077736,"display_name":"Hasuni"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1676392862,"creation_date":1674830374,"question_id":75259593,"body_markdown":"I have 2 services - Ingress (input node) and Storage.\r\nClient send requests on Ingress to get some data (large files).\r\nIngress send request to Storage to get data that Client needs.\r\nMaybe, somebody can tell what I can use to restream response from Storage to Client without OutOfMemory issues.\r\n\r\nNow I&#39;ve implemented it as saving result in file on Ingress, rereading it and sending as response to Client. But it works really slow, of course.\r\n\r\nThank you.","title":"Restream files from another server to client springboot","body":"<p>I have 2 services - Ingress (input node) and Storage.\nClient send requests on Ingress to get some data (large files).\nIngress send request to Storage to get data that Client needs.\nMaybe, somebody can tell what I can use to restream response from Storage to Client without OutOfMemory issues.</p>\n<p>Now I've implemented it as saving result in file on Ingress, rereading it and sending as response to Client. But it works really slow, of course.</p>\n<p>Thank you.</p>\n"},{"tags":["java","hibernate","postgresql"],"comments":[{"owner":{"display_name":"user330315"},"score":0,"creation_date":1359374143,"post_id":14561385,"comment_id":20316513,"body_markdown":"I&#39;d say Hibernate doesn&#39;t know that you are using sequences. It seems to want to use it&#39;s own home-grown (slow) sequence table. There should be some kind of anotation that tells Hibernate that your `id` column is linked to a sequence.","body":"I&#39;d say Hibernate doesn&#39;t know that you are using sequences. It seems to want to use it&#39;s own home-grown (slow) sequence table. There should be some kind of anotation that tells Hibernate that your <code>id</code> column is linked to a sequence."},{"owner":{"account_id":8613736,"reputation":724,"user_id":6451395,"accept_rate":50,"display_name":"Krish"},"score":0,"creation_date":1500599553,"post_id":14561385,"comment_id":77421167,"body_markdown":"@Lakshmi did you resolve the issue ?","body":"@Lakshmi did you resolve the issue ?"}],"answers":[{"tags":[],"owner":{"account_id":1980276,"reputation":8081,"user_id":1777072,"accept_rate":60,"display_name":"David Lavender"},"down_vote_count":1,"up_vote_count":33,"is_accepted":false,"score":32,"last_activity_date":1359374315,"creation_date":1359374146,"answer_id":14561498,"question_id":14561385,"body_markdown":"You haven&#39;t posted the important bit: the `Employee` class.\r\n\r\nBut my guess is that your Employee class is using `@GeneratedValue()` without specifying the sequence to use. So, Hibernate uses its default name: hibernate_sequence.\r\n\r\nYou can supply a sequence name as part of the GeneratedValue annotation. eg. \r\n\r\n    @GeneratedValue(strategy=SEQUENCE, generator=&quot;employee_id_seq&quot;)\r\n\r\n","title":"Missing sequence or table: hibernate_sequence","body":"<p>You haven't posted the important bit: the <code>Employee</code> class.</p>\n\n<p>But my guess is that your Employee class is using <code>@GeneratedValue()</code> without specifying the sequence to use. So, Hibernate uses its default name: hibernate_sequence.</p>\n\n<p>You can supply a sequence name as part of the GeneratedValue annotation. eg. </p>\n\n<pre><code>@GeneratedValue(strategy=SEQUENCE, generator=\"employee_id_seq\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2693469,"reputation":147,"user_id":2326165,"display_name":"oleh.kovaliuk"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1391772963,"creation_date":1391772963,"answer_id":21626735,"question_id":14561385,"body_markdown":"If you don&#39;t use annotation you should change YourClass.hbm.xml file.\r\n\r\nYour ID section should be:\r\n\r\n    &lt;id name=&quot;id&quot; type=&quot;int&quot; column=&quot;id&quot;&gt;\r\n         &lt;generator class=&quot;sequence&quot;&gt;\r\n             &lt;param name=&quot;sequence&quot;&gt;employee_id_seq&lt;/param&gt;\r\n         &lt;/generator&gt;\r\n    &lt;/id&gt;\r\n\r\nFile sample:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;!DOCTYPE hibernate-mapping PUBLIC \r\n     &quot;-//Hibernate/Hibernate Mapping DTD//EN&quot;\r\n     &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt; \r\n    \r\n    &lt;hibernate-mapping&gt;\r\n       &lt;class name=&quot;Employee&quot; table=&quot;EMPLOYEE&quot;&gt;\r\n          &lt;meta attribute=&quot;class-description&quot;&gt;\r\n             This class contains the employee detail. \r\n          &lt;/meta&gt;\r\n          &lt;id name=&quot;id&quot; type=&quot;int&quot; column=&quot;id&quot;&gt;\r\n             &lt;generator class=&quot;sequence&quot;&gt;\r\n                 &lt;param name=&quot;sequence&quot;&gt;employee_id_seq&lt;/param&gt;\r\n             &lt;/generator&gt;\r\n          &lt;/id&gt;\r\n          &lt;property name=&quot;firstName&quot; column=&quot;first_name&quot; type=&quot;string&quot;/&gt;\r\n          &lt;property name=&quot;lastName&quot; column=&quot;last_name&quot; type=&quot;string&quot;/&gt;\r\n          &lt;property name=&quot;salary&quot; column=&quot;salary&quot; type=&quot;int&quot;/&gt;\r\n       &lt;/class&gt;\r\n    &lt;/hibernate-mapping&gt;","title":"Missing sequence or table: hibernate_sequence","body":"<p>If you don't use annotation you should change YourClass.hbm.xml file.</p>\n\n<p>Your ID section should be:</p>\n\n<pre><code>&lt;id name=\"id\" type=\"int\" column=\"id\"&gt;\n     &lt;generator class=\"sequence\"&gt;\n         &lt;param name=\"sequence\"&gt;employee_id_seq&lt;/param&gt;\n     &lt;/generator&gt;\n&lt;/id&gt;\n</code></pre>\n\n<p>File sample:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC \n \"-//Hibernate/Hibernate Mapping DTD//EN\"\n \"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd\"&gt; \n\n&lt;hibernate-mapping&gt;\n   &lt;class name=\"Employee\" table=\"EMPLOYEE\"&gt;\n      &lt;meta attribute=\"class-description\"&gt;\n         This class contains the employee detail. \n      &lt;/meta&gt;\n      &lt;id name=\"id\" type=\"int\" column=\"id\"&gt;\n         &lt;generator class=\"sequence\"&gt;\n             &lt;param name=\"sequence\"&gt;employee_id_seq&lt;/param&gt;\n         &lt;/generator&gt;\n      &lt;/id&gt;\n      &lt;property name=\"firstName\" column=\"first_name\" type=\"string\"/&gt;\n      &lt;property name=\"lastName\" column=\"last_name\" type=\"string\"/&gt;\n      &lt;property name=\"salary\" column=\"salary\" type=\"int\"/&gt;\n   &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5987826,"reputation":37,"user_id":4704836,"accept_rate":0,"display_name":"Daniel"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1429888777,"creation_date":1429888777,"answer_id":29851328,"question_id":14561385,"body_markdown":"You can do two things.\r\nOne is to just manually create a blank hibernate_sequence table postgresql. \r\nTwo, most likely there is a conflict with the user account permissions not allowing grails to create that table.","title":"Missing sequence or table: hibernate_sequence","body":"<p>You can do two things.\nOne is to just manually create a blank hibernate_sequence table postgresql. \nTwo, most likely there is a conflict with the user account permissions not allowing grails to create that table.</p>\n"},{"tags":[],"owner":{"account_id":4626870,"reputation":967,"user_id":3750441,"display_name":"Chipo Hamayobe"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1455845092,"creation_date":1455845092,"answer_id":35495685,"question_id":14561385,"body_markdown":"For me, what was causing this error was the wrong version of the MySql.Data library.\r\n\r\nI had a version 6.9.6.0 defined in the web.config and yet the actual referenced version was older.\r\n\r\nI just commented out :\r\n\r\n         &lt;system.data&gt;\r\n          &lt;DbProviderFactories&gt;\r\n          &lt;remove invariant=&quot;MySql.Data.MySqlClient&quot; /&gt;\r\n            &lt;add name=&quot;MySQL Data Provider&quot; invariant=&quot;MySql.Data.MySqlClient&quot; description=&quot;.Net Framework Data Provider for MySQL&quot; type=&quot;MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.9.6.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d&quot; /&gt;\r\n         &lt;/DbProviderFactories&gt;\r\n       &lt;/system.data&gt;\r\n","title":"Missing sequence or table: hibernate_sequence","body":"<p>For me, what was causing this error was the wrong version of the MySql.Data library.</p>\n\n<p>I had a version 6.9.6.0 defined in the web.config and yet the actual referenced version was older.</p>\n\n<p>I just commented out :</p>\n\n<pre><code>     &lt;system.data&gt;\n      &lt;DbProviderFactories&gt;\n      &lt;remove invariant=\"MySql.Data.MySqlClient\" /&gt;\n        &lt;add name=\"MySQL Data Provider\" invariant=\"MySql.Data.MySqlClient\" description=\".Net Framework Data Provider for MySQL\" type=\"MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.9.6.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d\" /&gt;\n     &lt;/DbProviderFactories&gt;\n   &lt;/system.data&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7869735,"reputation":1778,"user_id":5947458,"display_name":"Riddhi Gohil"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1468575662,"creation_date":1468575662,"answer_id":38392847,"question_id":14561385,"body_markdown":"&gt; Simple solution :\r\n\r\ncreate  hibernate_sequence table  as :\r\n\r\n    &quot;create sequence &lt;schema&gt;.hibernate_sequence&quot;","title":"Missing sequence or table: hibernate_sequence","body":"<blockquote>\n  <p>Simple solution :</p>\n</blockquote>\n\n<p>create  hibernate_sequence table  as :</p>\n\n<pre><code>\"create sequence &lt;schema&gt;.hibernate_sequence\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1519017,"reputation":833,"user_id":1419261,"display_name":"user1419261"},"down_vote_count":2,"up_vote_count":45,"is_accepted":false,"score":43,"last_activity_date":1531274295,"creation_date":1531274295,"answer_id":51276180,"question_id":14561385,"body_markdown":"   In your domain or Model object annotate the id field as below  and it should  work. For me the GenerationType.AUTO failed\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate int id;","title":"Missing sequence or table: hibernate_sequence","body":"<p>In your domain or Model object annotate the id field as below  and it should  work. For me the GenerationType.AUTO failed</p>\n\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate int id;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":878161,"reputation":133,"user_id":159081,"display_name":"T.Thamilvaanan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676392851,"creation_date":1594090836,"answer_id":62767492,"question_id":14561385,"body_markdown":"If you encounter this with Spring Boot or Spring boot/Hibernate Migration then potentially you can try the following\r\n\r\n[Quote][1]:\r\n\r\n&gt; By default, Hibernate generates key from hibernate_sequence table, we\r\n&gt; can disable it by setting this hibernate.use-new-id-generator-mappings\r\n&gt; to false.\r\n\r\n    application.properties\r\n\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/test\r\n    spring.datasource.username=mkyong\r\n    spring.datasource.password=password\r\n    spring.jpa.hibernate.use-new-id-generator-mappings=false\r\n\r\n\r\n  [1]: https://mkyong.com/spring-boot/spring-boot-mysql-table-db_name-hibernate_sequence-doesnt-exist/","title":"Missing sequence or table: hibernate_sequence","body":"<p>If you encounter this with Spring Boot or Spring boot/Hibernate Migration then potentially you can try the following</p>\n<p><a href=\"https://mkyong.com/spring-boot/spring-boot-mysql-table-db_name-hibernate_sequence-doesnt-exist/\" rel=\"nofollow noreferrer\">Quote</a>:</p>\n<blockquote>\n<p>By default, Hibernate generates key from hibernate_sequence table, we\ncan disable it by setting this hibernate.use-new-id-generator-mappings\nto false.</p>\n</blockquote>\n<pre><code>application.properties\n\n\nspring.datasource.url=jdbc:mysql://localhost:3306/test\nspring.datasource.username=mkyong\nspring.datasource.password=password\nspring.jpa.hibernate.use-new-id-generator-mappings=false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8834636,"reputation":57,"user_id":6599413,"display_name":"Saleh"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1601161049,"creation_date":1601161049,"answer_id":64083238,"question_id":14561385,"body_markdown":"Apart from creating the table hibernate_sequence which has a column next_val \r\nyou can also set quarkus.hibernate-orm.database.generation = drop-and-create. Note this will delete all the record in you database.","title":"Missing sequence or table: hibernate_sequence","body":"<p>Apart from creating the table hibernate_sequence which has a column next_val\nyou can also set quarkus.hibernate-orm.database.generation = drop-and-create. Note this will delete all the record in you database.</p>\n"}],"owner":{"account_id":2281958,"reputation":2224,"user_id":2006839,"accept_rate":67,"display_name":"Lakshmi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91415,"favorite_count":0,"down_vote_count":0,"up_vote_count":41,"answer_count":8,"score":41,"last_activity_date":1676392851,"creation_date":1359373798,"question_id":14561385,"body_markdown":"I am new to hibernate and postgres. Actually I am trying to map potgres database using Hibernate. This is my table stucture in postgresql\r\n\r\n    CREATE TABLE employee\r\n    (\r\n    id serial NOT NULL,\r\n    firstname character varying(20),\r\n    lastname character varying(20),\r\n    birth_date date,\r\n    cell_phone character varying(15),\r\n    CONSTRAINT employee_pkey PRIMARY KEY (id )\r\n    )\r\n\r\n I am trying to add a record to the database using the following code\r\n   \r\n\r\n     System.out.println(&quot;******* WRITE *******&quot;);\r\n        Employee empl = new Employee(&quot;Jack&quot;, &quot;Bauer&quot;, new Date(System.currentTimeMillis()), &quot;911&quot;);\r\n        empl = save(empl);\r\n\r\n\r\n\r\n     //This is the save function\r\n\r\n        private static Employee save(Employee employee) {\r\n        SessionFactory sf = HibernateUtil.getSessionFactory();\r\n        Session session = sf.openSession();\r\n \r\n        session.beginTransaction();\r\n \r\n        \r\n        int id = (Integer) session.save(employee);\r\n        employee.setId(id);\r\n         \r\n        session.getTransaction().commit();\r\n         \r\n        session.close();\r\n \r\n        return employee;\r\n    }\r\n \r\nWhen I execute the code I am getting the following error\r\n\r\n    org.hibernate.HibernateException: Missing sequence or table: hibernate_sequence\r\n    Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\r\n\tat org.tcs.com.Hibernate.HibernateUtil.buildSessionFactory(HibernateUtil.java:18)\r\n\tat org.tcs.com.Hibernate.HibernateUtil.&lt;clinit&gt;(HibernateUtil.java:8)\r\n\tat org.tcs.com.Hibernate.MainApp.list(MainApp.java:51)\r\n\tat org.tcs.com.Hibernate.MainApp.main(MainApp.java:17)\r\n    Caused by: org.hibernate.HibernateException: Missing sequence or table: hibernate_sequence\r\n\tat org.hibernate.cfg.Configuration.validateSchema(Configuration.java:1282)\r\n\tat org.hibernate.tool.hbm2ddl.SchemaValidator.validate(SchemaValidator.java:155)\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:498)\r\n\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1740)\r\n\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1778)\r\n\tat org.tcs.com.Hibernate.HibernateUtil.buildSessionFactory(HibernateUtil.java:15)\r\n\t... 3 more\r\n\r\n I have the sequence called &quot;employee_id_seq&quot; in my database. But I dont know why the database is looking for hibernate_seq. Could someone explain the error and the reason.\r\n\r\nThanks in advance!\r\n\r\n**Added info**\r\n \r\nThis is my employee class\r\n\r\n    import java.sql.Date;\r\n\r\n    public class Employee {\r\n \r\n    private int id;\r\n     \r\n    private String firstname;\r\n     \r\n    private String lastname;\r\n     \r\n    private Date birthDate;\r\n     \r\n    private String cellphone;\r\n \r\n    public Employee() {\r\n         \r\n    }\r\n     \r\n    public Employee(String firstname, String lastname, Date birthdate, String phone) {\r\n        this.firstname = firstname;\r\n        this.lastname = lastname;\r\n        this.birthDate = birthdate;\r\n        this.cellphone = phone;\r\n         \r\n    }\r\n\r\n\tpublic int getId() {\r\n\t\treturn id;\r\n\t}\r\n\r\n\tpublic void setId(int id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\r\n\tpublic String getFirstname() {\r\n\t\treturn firstname;\r\n\t}\r\n\r\n\tpublic void setFirstname(String firstname) {\r\n\t\tthis.firstname = firstname;\r\n\t}\r\n\r\n\tpublic String getLastname() {\r\n\t\treturn lastname;\r\n\t}\r\n\r\n\tpublic void setLastname(String lastname) {\r\n\t\tthis.lastname = lastname;\r\n\t}\r\n\r\n\tpublic Date getBirthDate() {\r\n\t\treturn birthDate;\r\n\t}\r\n\r\n\tpublic void setBirthDate(Date birthDate) {\r\n\t\tthis.birthDate = birthDate;\r\n\t}\r\n\r\n\tpublic String getCellphone() {\r\n\t\treturn cellphone;\r\n\t}\r\n\r\n\tpublic void setCellphone(String cellphone) {\r\n\t\tthis.cellphone = cellphone;\r\n\t}\r\n     \r\n    \r\n \r\n    }","title":"Missing sequence or table: hibernate_sequence","body":"<p>I am new to hibernate and postgres. Actually I am trying to map potgres database using Hibernate. This is my table stucture in postgresql</p>\n\n<pre><code>CREATE TABLE employee\n(\nid serial NOT NULL,\nfirstname character varying(20),\nlastname character varying(20),\nbirth_date date,\ncell_phone character varying(15),\nCONSTRAINT employee_pkey PRIMARY KEY (id )\n)\n</code></pre>\n\n<p>I am trying to add a record to the database using the following code</p>\n\n<pre><code> System.out.println(\"******* WRITE *******\");\n    Employee empl = new Employee(\"Jack\", \"Bauer\", new Date(System.currentTimeMillis()), \"911\");\n    empl = save(empl);\n\n\n\n //This is the save function\n\n    private static Employee save(Employee employee) {\n    SessionFactory sf = HibernateUtil.getSessionFactory();\n    Session session = sf.openSession();\n\n    session.beginTransaction();\n\n\n    int id = (Integer) session.save(employee);\n    employee.setId(id);\n\n    session.getTransaction().commit();\n\n    session.close();\n\n    return employee;\n}\n</code></pre>\n\n<p>When I execute the code I am getting the following error</p>\n\n<pre><code>org.hibernate.HibernateException: Missing sequence or table: hibernate_sequence\nException in thread \"main\" java.lang.ExceptionInInitializerError\nat org.tcs.com.Hibernate.HibernateUtil.buildSessionFactory(HibernateUtil.java:18)\nat org.tcs.com.Hibernate.HibernateUtil.&lt;clinit&gt;(HibernateUtil.java:8)\nat org.tcs.com.Hibernate.MainApp.list(MainApp.java:51)\nat org.tcs.com.Hibernate.MainApp.main(MainApp.java:17)\nCaused by: org.hibernate.HibernateException: Missing sequence or table: hibernate_sequence\nat org.hibernate.cfg.Configuration.validateSchema(Configuration.java:1282)\nat org.hibernate.tool.hbm2ddl.SchemaValidator.validate(SchemaValidator.java:155)\nat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:498)\nat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1740)\nat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1778)\nat org.tcs.com.Hibernate.HibernateUtil.buildSessionFactory(HibernateUtil.java:15)\n... 3 more\n</code></pre>\n\n<p>I have the sequence called \"employee_id_seq\" in my database. But I dont know why the database is looking for hibernate_seq. Could someone explain the error and the reason.</p>\n\n<p>Thanks in advance!</p>\n\n<p><strong>Added info</strong></p>\n\n<p>This is my employee class</p>\n\n<pre><code>import java.sql.Date;\n\npublic class Employee {\n\nprivate int id;\n\nprivate String firstname;\n\nprivate String lastname;\n\nprivate Date birthDate;\n\nprivate String cellphone;\n\npublic Employee() {\n\n}\n\npublic Employee(String firstname, String lastname, Date birthdate, String phone) {\n    this.firstname = firstname;\n    this.lastname = lastname;\n    this.birthDate = birthdate;\n    this.cellphone = phone;\n\n}\n\npublic int getId() {\n    return id;\n}\n\npublic void setId(int id) {\n    this.id = id;\n}\n\npublic String getFirstname() {\n    return firstname;\n}\n\npublic void setFirstname(String firstname) {\n    this.firstname = firstname;\n}\n\npublic String getLastname() {\n    return lastname;\n}\n\npublic void setLastname(String lastname) {\n    this.lastname = lastname;\n}\n\npublic Date getBirthDate() {\n    return birthDate;\n}\n\npublic void setBirthDate(Date birthDate) {\n    this.birthDate = birthDate;\n}\n\npublic String getCellphone() {\n    return cellphone;\n}\n\npublic void setCellphone(String cellphone) {\n    this.cellphone = cellphone;\n}\n\n\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","api"],"comments":[{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1676379571,"post_id":75448011,"comment_id":133121717,"body_markdown":"Please show your controller method and the full DTO that you&#39;re deserializing into. There are additional annotations required to get Spring to automatically apply the validation annotations.","body":"Please show your controller method and the full DTO that you&#39;re deserializing into. There are additional annotations required to get Spring to automatically apply the validation annotations."},{"owner":{"account_id":27754578,"reputation":25,"user_id":21188343,"display_name":"Jay93"},"score":0,"creation_date":1676379920,"post_id":75448011,"comment_id":133121835,"body_markdown":"I have spring working and it validate all other inputs including String, Integer Etc but its just Float I am not sure the correct validation to use","body":"I have spring working and it validate all other inputs including String, Integer Etc but its just Float I am not sure the correct validation to use"}],"answers":[{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676380297,"creation_date":1676380297,"answer_id":75448348,"question_id":75448011,"body_markdown":"If you&#39;re using the javax.validation `@Max` annotation, the JavaDoc states that float an double types are not supported (due to rounding errors). You could try using `BigDecimal` in your controller (DTO?), then converting as necessary after validation has been run.\r\n\r\nAlternatively, you could write a custom validator that does the work, but keep in mind the warning about potential rounding errors - if it were simple the javax.validation annotations would already do it.","title":"How to add a validation on a float property in a api using JavaX / SpringBoot","body":"<p>If you're using the javax.validation <code>@Max</code> annotation, the JavaDoc states that float an double types are not supported (due to rounding errors). You could try using <code>BigDecimal</code> in your controller (DTO?), then converting as necessary after validation has been run.</p>\n<p>Alternatively, you could write a custom validator that does the work, but keep in mind the warning about potential rounding errors - if it were simple the javax.validation annotations would already do it.</p>\n"}],"owner":{"account_id":27754578,"reputation":25,"user_id":21188343,"display_name":"Jay93"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676392785,"creation_date":1676378618,"question_id":75448011,"body_markdown":"When spending a postman request to my API, I would like an error to be thrown when I enter a value that is outside the max value for a float, 3.4028235e+38f. (I am using Java &amp; Spring Boot) \r\n\r\nI have tried to use a float which was the requirement for the particular field but I haven&#39;t been able to work it out. I have tried using a decimal instead but have still not manage to get the error i expected displayed in postman. \r\n\r\n  \r\n    // @Max(34028235 + 38)\r\n    // MAX_VALUE = 0x1.fffffeP+127f; // 3.4028235e+38f\r\n    //Long maxFloatValue = longValue(3.4028235e+38f);\r\n    //@Range(max= (longValue(3.4028235e+38f)))\r\n    //@Max(maxFloatValue)\r\n    @JsonProperty(&quot;RequestedAm&quot;)\r\n    private Float requestedAm;\r\n\r\n    //@Max (340282300000000000000000000000000000000);\r\n    //@JsonProperty(&quot;RequestedAm&quot;)\r\n    //private BigDecimal requestedAm;`\r\n\r\nI would like an error to be displayed in postman like it does for the Strings when using Min and Max but not sure how this works for a float or as near as?","title":"How to add a validation on a float property in a api using JavaX / SpringBoot","body":"<p>When spending a postman request to my API, I would like an error to be thrown when I enter a value that is outside the max value for a float, 3.4028235e+38f. (I am using Java &amp; Spring Boot)</p>\n<p>I have tried to use a float which was the requirement for the particular field but I haven't been able to work it out. I have tried using a decimal instead but have still not manage to get the error i expected displayed in postman.</p>\n<pre><code>// @Max(34028235 + 38)\n// MAX_VALUE = 0x1.fffffeP+127f; // 3.4028235e+38f\n//Long maxFloatValue = longValue(3.4028235e+38f);\n//@Range(max= (longValue(3.4028235e+38f)))\n//@Max(maxFloatValue)\n@JsonProperty(&quot;RequestedAm&quot;)\nprivate Float requestedAm;\n\n//@Max (340282300000000000000000000000000000000);\n//@JsonProperty(&quot;RequestedAm&quot;)\n//private BigDecimal requestedAm;`\n</code></pre>\n<p>I would like an error to be displayed in postman like it does for the Strings when using Min and Max but not sure how this works for a float or as near as?</p>\n"},{"tags":["java","maven","pom.xml"],"comments":[{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1676374756,"post_id":75442007,"comment_id":133120257,"body_markdown":"Did you add `&lt;type&gt;pom&lt;/type&gt;` to the `&lt;dependency&gt;`?","body":"Did you add <code>&lt;type&gt;pom&lt;&#47;type&gt;</code> to the <code>&lt;dependency&gt;</code>?"},{"owner":{"account_id":1428986,"reputation":584,"user_id":1351827,"accept_rate":45,"display_name":"Patrick Aquilone"},"score":0,"creation_date":1676384760,"post_id":75442007,"comment_id":133123378,"body_markdown":"Yes.  Still got the error.","body":"Yes.  Still got the error."}],"answers":[{"tags":[],"owner":{"account_id":1428986,"reputation":584,"user_id":1351827,"accept_rate":45,"display_name":"Patrick Aquilone"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676392657,"creation_date":1676392657,"answer_id":75450762,"question_id":75442007,"body_markdown":"So for my situation (and not the best solution), I went into the dependency that has only a pom and pulled the dependencies out of there and built.  It worked.  But feel there should be a way to make it work without having to do this. ","title":"Pom.XML Maven Build Dependency of POM Only Looking for Jar","body":"<p>So for my situation (and not the best solution), I went into the dependency that has only a pom and pulled the dependencies out of there and built.  It worked.  But feel there should be a way to make it work without having to do this.</p>\n"}],"owner":{"account_id":1428986,"reputation":584,"user_id":1351827,"accept_rate":45,"display_name":"Patrick Aquilone"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676392657,"creation_date":1676329605,"question_id":75442007,"body_markdown":"**GIVEN:**\r\nI have an in house tool built with gradle that includes a dependency that is only a POM file which in turn then includes a bunch of other dependencies.  No jar for this particular dependency by itself.  The tool builds.\r\n\r\nI have a maven project with a pom.xml file that I want to include this tool in because of all the company specific methods needed for some processes.  I added the dependency with the type of pom and when I build it fails.\r\n\r\n**ERROR:**\r\n```\r\n[ERROR] Failed to execute goal on project &lt;MYPROJECT&gt;: Could not resolve dependencies for project &lt;MYPROJECT&gt;:jar:0.0.326: &lt;com.pom.only.dependency&gt;:jar:7.0 was not found in &lt;Company Repo where this POM file exists&gt; during a previous attempt. This failure was cached in the local repository and resolution is not reattempted until the update interval of &lt;company repo&gt; has elapsed or updates are forced\r\n```\r\n\r\n**REQUEST:**\r\nI have tried making the tool a fat jar in the hopes it would not need this.  But it does.  The my project builds without this tool jar so I know it is this jar that brings in the dependency.  I just have no idea how to resolve this.\r\n\r\n**ALMOST CODE EXAMPLE**\r\nBecause of company specific, I can not put the exact POM code but I can put what it looks like removing company specific stuff.\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.group&lt;/groupId&gt;\r\n            &lt;artifactId&gt;tools-app&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.group&lt;/groupId&gt;\r\n            &lt;artifactId&gt;pom only dependency&lt;/artifactId&gt;\r\n            &lt;version&gt;7.0&lt;/version&gt;\r\n            &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nSo tools app is the one that I am pulling it.  It is the gradle build and uses the pom only dependency without any issue.  If I pull this into a gradle app it works fine and builds.  However, in the app that has this in the pom, if fails for above.  So I add the dependency for the pom only dependency and mark it as type pom but still get the error.  ","title":"Pom.XML Maven Build Dependency of POM Only Looking for Jar","body":"<p><strong>GIVEN:</strong>\nI have an in house tool built with gradle that includes a dependency that is only a POM file which in turn then includes a bunch of other dependencies.  No jar for this particular dependency by itself.  The tool builds.</p>\n<p>I have a maven project with a pom.xml file that I want to include this tool in because of all the company specific methods needed for some processes.  I added the dependency with the type of pom and when I build it fails.</p>\n<p><strong>ERROR:</strong></p>\n<pre><code>[ERROR] Failed to execute goal on project &lt;MYPROJECT&gt;: Could not resolve dependencies for project &lt;MYPROJECT&gt;:jar:0.0.326: &lt;com.pom.only.dependency&gt;:jar:7.0 was not found in &lt;Company Repo where this POM file exists&gt; during a previous attempt. This failure was cached in the local repository and resolution is not reattempted until the update interval of &lt;company repo&gt; has elapsed or updates are forced\n</code></pre>\n<p><strong>REQUEST:</strong>\nI have tried making the tool a fat jar in the hopes it would not need this.  But it does.  The my project builds without this tool jar so I know it is this jar that brings in the dependency.  I just have no idea how to resolve this.</p>\n<p><strong>ALMOST CODE EXAMPLE</strong>\nBecause of company specific, I can not put the exact POM code but I can put what it looks like removing company specific stuff.</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.group&lt;/groupId&gt;\n            &lt;artifactId&gt;tools-app&lt;/artifactId&gt;\n            &lt;version&gt;1.0.11&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.group&lt;/groupId&gt;\n            &lt;artifactId&gt;pom only dependency&lt;/artifactId&gt;\n            &lt;version&gt;7.0&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>So tools app is the one that I am pulling it.  It is the gradle build and uses the pom only dependency without any issue.  If I pull this into a gradle app it works fine and builds.  However, in the app that has this in the pom, if fails for above.  So I add the dependency for the pom only dependency and mark it as type pom but still get the error.</p>\n"},{"tags":["java","spring","spring-boot","validation","kotlin"],"comments":[{"owner":{"account_id":5940172,"reputation":3457,"user_id":4671717,"accept_rate":25,"display_name":"Chris Maggiulli"},"score":0,"creation_date":1619121886,"post_id":67220022,"comment_id":118816656,"body_markdown":"Can you also set `server.error.include-message=always` if that works I will write it as an alnswer","body":"Can you also set <code>server.error.include-message=always</code> if that works I will write it as an alnswer"},{"owner":{"account_id":20231162,"reputation":211,"user_id":14837661,"display_name":"Yunz"},"score":0,"creation_date":1619122246,"post_id":67220022,"comment_id":118816806,"body_markdown":"@ChrisMaggiulli I have already set this property but it still does not work","body":"@ChrisMaggiulli I have already set this property but it still does not work"}],"answers":[{"tags":[],"owner":{"account_id":2371603,"reputation":422,"user_id":2076114,"accept_rate":50,"display_name":"sham"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1619152032,"creation_date":1619125185,"answer_id":67220684,"question_id":67220022,"body_markdown":"@Yunz I think the &quot;errors&quot; attribute gets added to your response since you set \r\n`server.error.include-binding-errors=always` can you try setting that to `never` or don&#39;t define this property and rely on default(which is `never`).\r\n\r\nyou need to set the `server.error.include-message=always` since version 2.3, Spring Boot hides the message field in the response to avoid leaking sensitive information; we can use this property with an always value to enable it\r\n\r\nfor details check out the [spring boot documentation][1]:\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#server.error.include-binding-errors","title":"Spring Boot validation message not shown","body":"<p>@Yunz I think the &quot;errors&quot; attribute gets added to your response since you set\n<code>server.error.include-binding-errors=always</code> can you try setting that to <code>never</code> or don't define this property and rely on default(which is <code>never</code>).</p>\n<p>you need to set the <code>server.error.include-message=always</code> since version 2.3, Spring Boot hides the message field in the response to avoid leaking sensitive information; we can use this property with an always value to enable it</p>\n<p>for details check out the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#server.error.include-binding-errors\" rel=\"nofollow noreferrer\">spring boot documentation</a>:</p>\n"},{"tags":[],"owner":{"account_id":20231162,"reputation":211,"user_id":14837661,"display_name":"Yunz"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1619193565,"creation_date":1619193565,"answer_id":67233284,"question_id":67220022,"body_markdown":"Ok finally I found a solution. I created a global exception handler that listens to the MethodArgumentNotValidException. After that I manipulate the message and set the validation message that I set before in the annotation\r\n\r\n```Kotlin\r\n@RestControllerAdvice\r\nclass ExceptionControllerAdvice {\r\n\r\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n    @ExceptionHandler(MethodArgumentNotValidException::class)\r\n    fun handleValidationExceptions(ex: MethodArgumentNotValidException): Map&lt;String, String?&gt;? {\r\n        val errors: MutableMap&lt;String, String?&gt; = HashMap()\r\n        ex.bindingResult.allErrors.forEach { error: ObjectError -&gt;\r\n            val fieldName = (error as FieldError).field\r\n            val errorMessage = error.getDefaultMessage()\r\n            errors[fieldName] = errorMessage\r\n        }\r\n        return errors\r\n    }\r\n\r\n}\r\n```\r\n\r\nSource: https://www.baeldung.com/spring-boot-bean-validation","title":"Spring Boot validation message not shown","body":"<p>Ok finally I found a solution. I created a global exception handler that listens to the MethodArgumentNotValidException. After that I manipulate the message and set the validation message that I set before in the annotation</p>\n<pre><code>@RestControllerAdvice\nclass ExceptionControllerAdvice {\n\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\n    @ExceptionHandler(MethodArgumentNotValidException::class)\n    fun handleValidationExceptions(ex: MethodArgumentNotValidException): Map&lt;String, String?&gt;? {\n        val errors: MutableMap&lt;String, String?&gt; = HashMap()\n        ex.bindingResult.allErrors.forEach { error: ObjectError -&gt;\n            val fieldName = (error as FieldError).field\n            val errorMessage = error.getDefaultMessage()\n            errors[fieldName] = errorMessage\n        }\n        return errors\n    }\n\n}\n</code></pre>\n<p>Source: <a href=\"https://www.baeldung.com/spring-boot-bean-validation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-bean-validation</a></p>\n"},{"tags":[],"owner":{"account_id":26817435,"reputation":1,"user_id":20407231,"display_name":"user20407231"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668256734,"creation_date":1668256734,"answer_id":74412998,"question_id":67220022,"body_markdown":"Please create the following &lt;code&gt;ControllerAdvice&lt;/code&gt; with the corresponding &lt;code&gt;ExceptionHandler&lt;/code&gt;. Should be something like this:\r\n\r\n    @ControllerAdvice\r\n    public class RestResponseEntityExceptionHandler extends ResponseEntityExceptionHandler {\r\n        @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n        @ExceptionHandler(MethodArgumentNotValidException.class)\r\n        public Map&lt;String, String&gt; handleValidationExceptions(MethodArgumentNotValidException ex) {\r\n            Map&lt;String, String&gt; errors = new HashMap&lt;&gt;();\r\n            ex.getBindingResult().getAllErrors().forEach((error) -&gt; {\r\n                String fieldName = ((FieldError) error).getField();\r\n                String errorMessage = error.getDefaultMessage();\r\n                errors.put(fieldName, errorMessage);\r\n            });\r\n            return errors;\r\n        }\r\n    }\r\n\r\nIn the recent Spring Boot versions, the sending of error messages was disabled, and now needs to be manually implemented like shown above.\r\n\r\nReference: https://www.baeldung.com/spring-boot-bean-validation#the-exceptionhandler-annotation","title":"Spring Boot validation message not shown","body":"<p>Please create the following <code>ControllerAdvice</code> with the corresponding <code>ExceptionHandler</code>. Should be something like this:</p>\n<pre><code>@ControllerAdvice\npublic class RestResponseEntityExceptionHandler extends ResponseEntityExceptionHandler {\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\n    @ExceptionHandler(MethodArgumentNotValidException.class)\n    public Map&lt;String, String&gt; handleValidationExceptions(MethodArgumentNotValidException ex) {\n        Map&lt;String, String&gt; errors = new HashMap&lt;&gt;();\n        ex.getBindingResult().getAllErrors().forEach((error) -&gt; {\n            String fieldName = ((FieldError) error).getField();\n            String errorMessage = error.getDefaultMessage();\n            errors.put(fieldName, errorMessage);\n        });\n        return errors;\n    }\n}\n</code></pre>\n<p>In the recent Spring Boot versions, the sending of error messages was disabled, and now needs to be manually implemented like shown above.</p>\n<p>Reference: <a href=\"https://www.baeldung.com/spring-boot-bean-validation#the-exceptionhandler-annotation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-bean-validation#the-exceptionhandler-annotation</a></p>\n"},{"tags":[],"owner":{"account_id":2294145,"reputation":1272,"user_id":2016070,"accept_rate":0,"display_name":"Bilal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676392506,"creation_date":1676392506,"answer_id":75450738,"question_id":67220022,"body_markdown":"Please here you can find an optimised solution :\r\n\r\n    @ControllerAdvice\r\n    public class ControllerAdvisor extends ResponseEntityExceptionHandler {\r\n        @Override\r\n        protected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {\r\n    \r\n            var errors = new HashMap&lt;&gt;();\r\n            for (var err : ex.getBindingResult().getAllErrors()) \r\n                errors.put(((FieldError) err).getField(), err.getDefaultMessage());\r\n            \r\n    \r\n            return this.handleExceptionInternal(ex, errors, headers, status, request);\r\n        }\r\n    }","title":"Spring Boot validation message not shown","body":"<p>Please here you can find an optimised solution :</p>\n<pre><code>@ControllerAdvice\npublic class ControllerAdvisor extends ResponseEntityExceptionHandler {\n    @Override\n    protected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {\n\n        var errors = new HashMap&lt;&gt;();\n        for (var err : ex.getBindingResult().getAllErrors()) \n            errors.put(((FieldError) err).getField(), err.getDefaultMessage());\n        \n\n        return this.handleExceptionInternal(ex, errors, headers, status, request);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20231162,"reputation":211,"user_id":14837661,"display_name":"Yunz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9637,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":4,"score":6,"last_activity_date":1676392506,"creation_date":1619121770,"question_id":67220022,"body_markdown":"I have a Spring Boot application (with version 2.4.5) as a Kotlin project. Now when I enter something invalid, I get an error message, but not my error message that I set in the annotation.\r\n\r\n\r\nController\r\n```\r\n  @PostMapping(value = [&quot;/seatMap/save&quot;])\r\n    fun addSeatPlan(@RequestPart @Valid data: DSeatMap, @RequestPart image: MultipartFile?, auth: AuthenticationToken) {\r\n        try {\r\n            if (data.uuid == null) {\r\n                seatService.addSeatMap(auth.organisation!!, data, image)\r\n            } else {\r\n                seatService.updateSeatMap(data, auth.organisation!!, image)\r\n            }\r\n        } catch (e: UnauthorizedException) {\r\n            throw e\r\n        }\r\n    }\r\n```\r\nData class\r\n```\r\nimport java.util.*\r\nimport javax.validation.constraints.NotEmpty\r\n\r\ndata class DSeatMap(\r\n    var uuid: UUID?,\r\n    @field:NotEmpty(message = &quot;name is empty&quot;)\r\n    val name: String,\r\n    var data: String,\r\n    val quantity: Int,\r\n    var settings: DSettings?\r\n)\r\n\r\n```\r\nMy Response, here should be message = &quot;name is empty&quot;\r\n```\r\n{\r\n  &quot;timestamp&quot;: &quot;2021-04-22T19:47:08.194+00:00&quot;,\r\n  &quot;status&quot;: 400,\r\n  &quot;error&quot;: &quot;Bad Request&quot;,\r\n  &quot;message&quot;: &quot;Validation failed for object=&#39;data&#39;. Error count: 1&quot;,\r\n}\r\n```\r\nIf I set the property it shows me the correct one but I don&#39;t want to have all the side information I only want to output the message\r\n```\r\nserver.error.include-binding-errors=always\r\n```\r\nResult:\r\n```\r\n{\r\n  &quot;timestamp&quot;: &quot;2021-04-22T19:56:30.058+00:00&quot;,\r\n  &quot;status&quot;: 400,\r\n  &quot;error&quot;: &quot;Bad Request&quot;,\r\n  &quot;message&quot;: &quot;Validation failed for object=&#39;data&#39;. Error count: 1&quot;,\r\n  &quot;errors&quot;: [\r\n    {\r\n      &quot;codes&quot;: [\r\n        &quot;NotEmpty.data.name&quot;,\r\n        &quot;NotEmpty.name&quot;,\r\n        &quot;NotEmpty.java.lang.String&quot;,\r\n        &quot;NotEmpty&quot;\r\n      ],\r\n      &quot;arguments&quot;: [\r\n        {\r\n          &quot;codes&quot;: [\r\n            &quot;data.name&quot;,\r\n            &quot;name&quot;\r\n          ],\r\n          &quot;arguments&quot;: null,\r\n          &quot;defaultMessage&quot;: &quot;name&quot;,\r\n          &quot;code&quot;: &quot;name&quot;\r\n        }\r\n      ],\r\n      &quot;defaultMessage&quot;: &quot;name is empty&quot;,\r\n      &quot;objectName&quot;: &quot;data&quot;,\r\n      &quot;field&quot;: &quot;name&quot;,\r\n      &quot;rejectedValue&quot;: &quot;&quot;,\r\n      &quot;bindingFailure&quot;: false,\r\n      &quot;code&quot;: &quot;NotEmpty&quot;\r\n    }\r\n  ],\r\n  &quot;path&quot;: &quot;/api/dashboard/seatMap/save&quot;\r\n}\r\n```\r\n\r\n","title":"Spring Boot validation message not shown","body":"<p>I have a Spring Boot application (with version 2.4.5) as a Kotlin project. Now when I enter something invalid, I get an error message, but not my error message that I set in the annotation.</p>\n<p>Controller</p>\n<pre><code>  @PostMapping(value = [&quot;/seatMap/save&quot;])\n    fun addSeatPlan(@RequestPart @Valid data: DSeatMap, @RequestPart image: MultipartFile?, auth: AuthenticationToken) {\n        try {\n            if (data.uuid == null) {\n                seatService.addSeatMap(auth.organisation!!, data, image)\n            } else {\n                seatService.updateSeatMap(data, auth.organisation!!, image)\n            }\n        } catch (e: UnauthorizedException) {\n            throw e\n        }\n    }\n</code></pre>\n<p>Data class</p>\n<pre><code>import java.util.*\nimport javax.validation.constraints.NotEmpty\n\ndata class DSeatMap(\n    var uuid: UUID?,\n    @field:NotEmpty(message = &quot;name is empty&quot;)\n    val name: String,\n    var data: String,\n    val quantity: Int,\n    var settings: DSettings?\n)\n\n</code></pre>\n<p>My Response, here should be message = &quot;name is empty&quot;</p>\n<pre><code>{\n  &quot;timestamp&quot;: &quot;2021-04-22T19:47:08.194+00:00&quot;,\n  &quot;status&quot;: 400,\n  &quot;error&quot;: &quot;Bad Request&quot;,\n  &quot;message&quot;: &quot;Validation failed for object='data'. Error count: 1&quot;,\n}\n</code></pre>\n<p>If I set the property it shows me the correct one but I don't want to have all the side information I only want to output the message</p>\n<pre><code>server.error.include-binding-errors=always\n</code></pre>\n<p>Result:</p>\n<pre><code>{\n  &quot;timestamp&quot;: &quot;2021-04-22T19:56:30.058+00:00&quot;,\n  &quot;status&quot;: 400,\n  &quot;error&quot;: &quot;Bad Request&quot;,\n  &quot;message&quot;: &quot;Validation failed for object='data'. Error count: 1&quot;,\n  &quot;errors&quot;: [\n    {\n      &quot;codes&quot;: [\n        &quot;NotEmpty.data.name&quot;,\n        &quot;NotEmpty.name&quot;,\n        &quot;NotEmpty.java.lang.String&quot;,\n        &quot;NotEmpty&quot;\n      ],\n      &quot;arguments&quot;: [\n        {\n          &quot;codes&quot;: [\n            &quot;data.name&quot;,\n            &quot;name&quot;\n          ],\n          &quot;arguments&quot;: null,\n          &quot;defaultMessage&quot;: &quot;name&quot;,\n          &quot;code&quot;: &quot;name&quot;\n        }\n      ],\n      &quot;defaultMessage&quot;: &quot;name is empty&quot;,\n      &quot;objectName&quot;: &quot;data&quot;,\n      &quot;field&quot;: &quot;name&quot;,\n      &quot;rejectedValue&quot;: &quot;&quot;,\n      &quot;bindingFailure&quot;: false,\n      &quot;code&quot;: &quot;NotEmpty&quot;\n    }\n  ],\n  &quot;path&quot;: &quot;/api/dashboard/seatMap/save&quot;\n}\n</code></pre>\n"},{"tags":["java","javafx","richtextfx"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1652796442,"post_id":72204764,"comment_id":127689726,"body_markdown":"I think your event is going to have the information. You can probably get the location that started it, and find that location in your document. Did you try, `var kids = textArea.getChildren();` to get the list of children, then use `int dex = kids.indexOf(text);` and `kids.set(dex, modifiedText);`","body":"I think your event is going to have the information. You can probably get the location that started it, and find that location in your document. Did you try, <code>var kids = textArea.getChildren();</code> to get the list of children, then use <code>int dex = kids.indexOf(text);</code> and <code>kids.set(dex, modifiedText);</code>"},{"owner":{"account_id":12824901,"reputation":1708,"user_id":9278333,"display_name":"trilogy"},"score":0,"creation_date":1652796757,"post_id":72204764,"comment_id":127689869,"body_markdown":"@matt `getChildren()` has protected access , but they do have a `getChildrenUnmodifiable()` but unfortunetly the `indexOf` didn&#39;t work...","body":"@matt <code>getChildren()</code> has protected access , but they do have a <code>getChildrenUnmodifiable()</code> but unfortunetly the <code>indexOf</code> didn&#39;t work..."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1652840353,"post_id":72204764,"comment_id":127701444,"body_markdown":"How does your `module-info.java` file look? I can seem to get the code to run because I am missing something in there.","body":"How does your <code>module-info.java</code> file look? I can seem to get the code to run because I am missing something in there."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1652840755,"post_id":72204764,"comment_id":127701504,"body_markdown":"Okay. After triple checking, I noticed I was missing `requires reactfx;`","body":"Okay. After triple checking, I noticed I was missing <code>requires reactfx;</code>"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1652842598,"post_id":72204764,"comment_id":127701801,"body_markdown":"Here is something that can probably help. It gets you in the right direction for the first word. I can&#39;t see a loop where it handles the other words. Maybe I need fresh eyes. `System.out.println(&quot;begin: &quot; + textArea.getText().indexOf(text.getText()));\n                            textArea.replaceText(textArea.getText().indexOf(text.getText()), text.getText().length(), word);`","body":"Here is something that can probably help. It gets you in the right direction for the first word. I can&#39;t see a loop where it handles the other words. Maybe I need fresh eyes. <code>System.out.println(&quot;begin: &quot; + textArea.getText().indexOf(text.getText()));                             textArea.replaceText(textArea.getText().indexOf(text.getText&zwnj;&#8203;()), text.getText().length(), word);</code>"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1652858575,"post_id":72204764,"comment_id":127705212,"body_markdown":"Are you sure your ` event.getTarget();` is only a Text? Maybe it&#39;s a Span or Styled component. They have a position.","body":"Are you sure your ` event.getTarget();` is only a Text? Maybe it&#39;s a Span or Styled component. They have a position."},{"owner":{"account_id":12824901,"reputation":1708,"user_id":9278333,"display_name":"trilogy"},"score":0,"creation_date":1652874274,"post_id":72204764,"comment_id":127711121,"body_markdown":"@matt it’s a Text for sure, even used an “instanceof”","body":"@matt it’s a Text for sure, even used an “instanceof”"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1652874764,"post_id":72204764,"comment_id":127711287,"body_markdown":"@trilogy Right it is a Text, but it could also be something else. Something that retains the information of where it is at in the document.","body":"@trilogy Right it is a Text, but it could also be something else. Something that retains the information of where it is at in the document."}],"answers":[{"tags":[],"owner":{"account_id":12824901,"reputation":1708,"user_id":9278333,"display_name":"trilogy"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1676392349,"creation_date":1652879089,"answer_id":72289785,"question_id":72204764,"body_markdown":"I found out how. By using the caret position, I can select a word and replace it. The problem is, right clicking didn&#39;t move the caret. So in order to move the caret, you add a listener.\r\n\r\n    textArea.setOnMouseClicked((MouseEvent mouseEvent) -&gt;\r\n    {\r\n        if (mouseEvent.getButton().equals(MouseButton.SECONDARY))\r\n        {\r\n            if (mouseEvent.getClickCount() == 1)\r\n            {\r\n                CharacterHit hit = textArea.hit(mouseEvent.getX(), mouseEvent.getY());\r\n                int characterPosition = hit.getInsertionIndex();\r\n\r\n                // move the caret to that character&#39;s position\r\n                textArea.moveTo(characterPosition, SelectionPolicy.CLEAR);\r\n            }\r\n        }\r\n    });\r\n\r\nEdit 1:\r\n\r\nAdded indexing and concurrency for performance purposes. Context menu is now instantaneous. \r\n\r\nEdit 2:\r\n\r\nFixed macOS issue with context menu\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\nFull code:\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.text.BreakIterator;\r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.Collections;\r\n    import java.util.Comparator;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.Set;\r\n    import java.util.concurrent.ConcurrentHashMap;\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    import javafx.animation.PauseTransition;\r\n    \r\n    import org.fxmisc.flowless.VirtualizedScrollPane;\r\n    import org.fxmisc.richtext.StyleClassedTextArea;\r\n    import org.fxmisc.richtext.model.StyleSpans;\r\n    import org.fxmisc.richtext.model.StyleSpansBuilder;\r\n    \r\n    import javafx.application.Application;\r\n    import javafx.concurrent.Task;\r\n    import javafx.event.ActionEvent;\r\n    import javafx.scene.Node;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.ContextMenu;\r\n    import javafx.scene.control.MenuItem;\r\n    import javafx.scene.control.SeparatorMenuItem;\r\n    import javafx.scene.input.Clipboard;\r\n    import javafx.scene.input.ClipboardContent;\r\n    import javafx.scene.input.MouseButton;\r\n    import javafx.scene.input.MouseEvent;\r\n    import javafx.scene.layout.StackPane;\r\n    import javafx.scene.text.Text;\r\n    import javafx.stage.Stage;\r\n    import javafx.util.Duration;\r\n    import org.apache.commons.lang3.CharUtils;\r\n    import org.apache.commons.lang3.StringUtils;\r\n    import org.apache.commons.lang3.math.NumberUtils;\r\n    import org.apache.commons.text.WordUtils;\r\n    import org.apache.commons.text.similarity.JaroWinklerSimilarity;\r\n    import org.fxmisc.richtext.CharacterHit;\r\n    import org.fxmisc.richtext.NavigationActions.SelectionPolicy;\r\n    \r\n    public class SpellCheckingDemo extends Application\r\n    {\r\n    \r\n        private static final int NUMBER_OF_SUGGESTIONS = 5;\r\n        private static final Set&lt;String&gt; DICTIONARY = ConcurrentHashMap.newKeySet();\r\n        private static final Map&lt;String, List&lt;String&gt;&gt; SUGGESTIONS = new ConcurrentHashMap&lt;&gt;();\r\n    \r\n        public static void main(String[] args)\r\n        {\r\n            launch(args);\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage)\r\n        {\r\n            StyleClassedTextArea textArea = new StyleClassedTextArea();\r\n            textArea.setWrapText(true);\r\n            textArea.requestFollowCaret();\r\n            //wait a bit before typing has stopped to compute the highlighting\r\n            PauseTransition textAreaDelay = new PauseTransition(Duration.millis(250));\r\n    \r\n            textArea.textProperty().addListener((observable, oldValue, newValue) -&gt;\r\n            {\r\n                textAreaDelay.setOnFinished(event -&gt;\r\n                {\r\n                    textArea.setStyleSpans(0, computeHighlighting(textArea.getText()));\r\n    \r\n                    //have a new thread index all incorrect words, and pre-populate suggestions\r\n                    Task task = new Task&lt;Void&gt;()\r\n                    {\r\n    \r\n                        @Override\r\n                        public Void call()\r\n                        {\r\n                            //iterating over entire list is ok because after the first time, it will hit the index anyway\r\n                            for (String word : SpellCheckingDemo.SUGGESTIONS.keySet())\r\n                            {\r\n                                SpellCheckingDemo.getClosestWords(word);\r\n                                SpellCheckingDemo.getClosestWords(StringUtils.trim(word));\r\n    \r\n                            }\r\n    \r\n                            return null;\r\n                        }\r\n                    };\r\n                    new Thread(task).start();\r\n                });\r\n                textAreaDelay.playFromStart();\r\n            });\r\n    \r\n            textArea.setOnMouseClicked((MouseEvent mouseEvent) -&gt;\r\n            {\r\n                if (mouseEvent.getButton().equals(MouseButton.SECONDARY))\r\n                {\r\n                    if (mouseEvent.getClickCount() == 1)\r\n                    {\r\n                        CharacterHit hit = textArea.hit(mouseEvent.getX(), mouseEvent.getY());\r\n                        int characterPosition = hit.getInsertionIndex();\r\n    \r\n                        // move the caret to that character&#39;s position\r\n                        if (StringUtils.isEmpty(textArea.getSelectedText()))\r\n                        {\r\n                            textArea.moveTo(characterPosition, SelectionPolicy.CLEAR);\r\n    \r\n                        }\r\n    \r\n                        if (mouseEvent.getTarget() instanceof Text &amp;&amp; StringUtils.isEmpty(textArea.getSelectedText()))\r\n                        {\r\n    \r\n                            textArea.selectWord();\r\n    \r\n                            //When selecting right next to puncuation and spaces, the replacements elimantes these values. This avoids the issue by moving the caret towards the middle\r\n                            if (!StringUtils.isEmpty(textArea.getSelectedText()) &amp;&amp; !CharUtils.isAsciiAlphanumeric(textArea.getSelectedText().charAt(textArea.getSelectedText().length() - 1)))\r\n                            {\r\n                                textArea.moveTo(textArea.getCaretPosition() - 2);\r\n                                textArea.selectWord();\r\n    \r\n                            }\r\n    \r\n                            String referenceWord = textArea.getSelectedText();\r\n    \r\n                            textArea.deselect();\r\n    \r\n                            if (!NumberUtils.isParsable(referenceWord) &amp;&amp; !DICTIONARY.contains(StringUtils.trim(StringUtils.lowerCase(referenceWord))))\r\n                            {\r\n                                ContextMenu context = new ContextMenu();\r\n    \r\n                                for (String word : SpellCheckingDemo.getClosestWords(referenceWord))\r\n                                {\r\n    \r\n                                    MenuItem item = new MenuItem(word);\r\n                                    item.setOnAction((ActionEvent a) -&gt;\r\n                                    {\r\n    \r\n                                        textArea.selectWord();\r\n                                        textArea.replaceSelection(word);\r\n                                        textArea.deselect();\r\n    \r\n                                    });\r\n                                    context.getItems().add(item);\r\n    \r\n                                }\r\n    \r\n                                if (!context.getItems().isEmpty())\r\n                                {\r\n                                    textArea.moveTo(textArea.getCaretPosition() - 1);\r\n    \r\n                                    context.show((Node) mouseEvent.getTarget(), mouseEvent.getScreenX(), mouseEvent.getScreenY());\r\n                                    ((Node) mouseEvent.getTarget()).addEventHandler(MouseEvent.MOUSE_PRESSED, event -&gt; context.hide());\r\n    \r\n                                } else\r\n                                {\r\n                                    ContextMenu copyPasteMenu = getCopyPasteMenu(textArea);\r\n                                    copyPasteMenu.show((Node) mouseEvent.getTarget(), mouseEvent.getScreenX(), mouseEvent.getScreenY());\r\n                                    ((Node) mouseEvent.getTarget()).addEventHandler(MouseEvent.MOUSE_PRESSED, event -&gt; copyPasteMenu.hide());\r\n    \r\n                                }\r\n                            } else\r\n                            {\r\n                                ContextMenu copyPasteMenu = getCopyPasteMenu(textArea);\r\n                                copyPasteMenu.show((Node) mouseEvent.getTarget(), mouseEvent.getScreenX(), mouseEvent.getScreenY());\r\n                                ((Node) mouseEvent.getTarget()).addEventHandler(MouseEvent.MOUSE_PRESSED, event -&gt; copyPasteMenu.hide());\r\n    \r\n                            }\r\n    \r\n                        } else\r\n                        {\r\n                            ContextMenu copyPasteMenu = getCopyPasteMenu(textArea);\r\n                            copyPasteMenu.show((Node) mouseEvent.getTarget(), mouseEvent.getScreenX(), mouseEvent.getScreenY());\r\n                            ((Node) mouseEvent.getTarget()).addEventHandler(MouseEvent.MOUSE_PRESSED, event -&gt; copyPasteMenu.hide());\r\n    \r\n                        }\r\n                    }\r\n                }\r\n            });\r\n    \r\n            // load the dictionary\r\n            try (InputStream input = SpellCheckingDemo.class.getResourceAsStream(&quot;/spellchecking.dict&quot;);\r\n                    BufferedReader br = new BufferedReader(new InputStreamReader(input)))\r\n            {\r\n                String line;\r\n                while ((line = br.readLine()) != null)\r\n                {\r\n                    DICTIONARY.add(line);\r\n                }\r\n            } catch (IOException ex)\r\n            {\r\n                Logger.getLogger(SpellCheckingDemo.class.getName()).log(Level.SEVERE, null, ex);\r\n            }\r\n    \r\n            // load the sample document\r\n            InputStream input2 = SpellCheckingDemo.class.getResourceAsStream(&quot;/spellchecking.txt&quot;);\r\n            try (java.util.Scanner s = new java.util.Scanner(input2))\r\n            {\r\n                String document = s.useDelimiter(&quot;\\\\A&quot;).hasNext() ? s.next() : &quot;&quot;;\r\n                textArea.replaceText(0, 0, document);\r\n            }\r\n    \r\n            Scene scene = new Scene(new StackPane(new VirtualizedScrollPane&lt;&gt;(textArea)), 600, 400);\r\n            scene.getStylesheets().add(SpellCheckingDemo.class.getResource(&quot;/spellchecking.css&quot;).toExternalForm());\r\n            primaryStage.setScene(scene);\r\n            primaryStage.setTitle(&quot;Spell Checking Demo&quot;);\r\n            primaryStage.show();\r\n        }\r\n    \r\n        private static StyleSpans&lt;Collection&lt;String&gt;&gt; computeHighlighting(String text)\r\n        {\r\n    \r\n            StyleSpansBuilder&lt;Collection&lt;String&gt;&gt; spansBuilder = new StyleSpansBuilder&lt;&gt;();\r\n    \r\n            BreakIterator wb = BreakIterator.getWordInstance();\r\n            wb.setText(text);\r\n    \r\n            int lastIndex = wb.first();\r\n            int lastKwEnd = 0;\r\n            while (lastIndex != BreakIterator.DONE)\r\n            {\r\n                int firstIndex = lastIndex;\r\n                lastIndex = wb.next();\r\n    \r\n                if (lastIndex != BreakIterator.DONE &amp;&amp; Character.isLetterOrDigit(text.charAt(firstIndex)))\r\n                {\r\n                    String word = text.substring(firstIndex, lastIndex);\r\n    \r\n                    if (!NumberUtils.isParsable(word) &amp;&amp; !DICTIONARY.contains(StringUtils.lowerCase(word)))\r\n                    {\r\n                        spansBuilder.add(Collections.emptyList(), firstIndex - lastKwEnd);\r\n                        spansBuilder.add(Collections.singleton(&quot;underlined&quot;), lastIndex - firstIndex);\r\n                        lastKwEnd = lastIndex;\r\n                        SpellCheckingDemo.SUGGESTIONS.putIfAbsent(word, Collections.emptyList());\r\n                    }\r\n                    //System.err.println();\r\n                }\r\n            }\r\n            spansBuilder.add(Collections.emptyList(), text.length() - lastKwEnd);\r\n    \r\n            return spansBuilder.create();\r\n        }\r\n    \r\n        public static List&lt;String&gt; getClosestWords(String word)\r\n        {\r\n    \r\n            //check to see if an suggestions for this word have already been indexed\r\n            if (SpellCheckingDemo.SUGGESTIONS.containsKey(word) &amp;&amp; !SpellCheckingDemo.SUGGESTIONS.get(word).isEmpty())\r\n            {\r\n                return SpellCheckingDemo.SUGGESTIONS.get(word);\r\n            }\r\n    \r\n            List&lt;StringDistancePair&gt; allWordDistances = new ArrayList&lt;&gt;(DICTIONARY.size());\r\n    \r\n            String lowerCaseWord = StringUtils.lowerCase(word);\r\n            JaroWinklerSimilarity jaroWinklerAlgorithm = new JaroWinklerSimilarity();\r\n            for (String checkWord : DICTIONARY)\r\n            {\r\n                allWordDistances.add(new StringDistancePair(jaroWinklerAlgorithm.apply(lowerCaseWord, checkWord), checkWord));\r\n    \r\n            }\r\n    \r\n            allWordDistances.sort(Comparator.comparingDouble(StringDistancePair::getDistance));\r\n    \r\n            List&lt;String&gt; closestWords = new ArrayList&lt;&gt;(NUMBER_OF_SUGGESTIONS);\r\n    \r\n            System.out.println(word);\r\n            for (StringDistancePair pair : allWordDistances.subList(allWordDistances.size() - NUMBER_OF_SUGGESTIONS, allWordDistances.size()))\r\n            {\r\n                // 0 is not a match at all, so no point adding to list\r\n                if (pair.getDistance() == 0.0)\r\n                {\r\n                    continue;\r\n                }\r\n                String addWord;\r\n                if (StringUtils.isAllUpperCase(word))\r\n                {\r\n                    addWord = StringUtils.upperCase(pair.getWord());\r\n                } else if (CharUtils.isAsciiAlphaUpper(word.charAt(0)))\r\n                {\r\n                    addWord = WordUtils.capitalize(pair.getWord());\r\n                } else\r\n                {\r\n                    addWord = StringUtils.lowerCase(pair.getWord());\r\n                }\r\n                System.out.println(pair);\r\n                closestWords.add(addWord);\r\n            }\r\n            System.out.println();\r\n            Collections.reverse(closestWords);\r\n    \r\n            //add the suggestion list to index to allow future pulls\r\n            SpellCheckingDemo.SUGGESTIONS.put(word, closestWords);\r\n    \r\n            return closestWords;\r\n    \r\n        }\r\n    \r\n        public static ContextMenu getCopyPasteMenu(StyleClassedTextArea textArea)\r\n        {\r\n            ContextMenu context = new ContextMenu();\r\n            MenuItem cutItem = new MenuItem(&quot;Cut&quot;);\r\n            cutItem.setOnAction((ActionEvent a) -&gt;\r\n            {\r\n    \r\n                Clipboard clipboard = Clipboard.getSystemClipboard();\r\n                ClipboardContent content = new ClipboardContent();\r\n                content.putString(textArea.getSelectedText());\r\n                clipboard.setContent(content);\r\n                textArea.replaceSelection(&quot;&quot;);\r\n    \r\n            });\r\n    \r\n            context.getItems().add(cutItem);\r\n    \r\n            MenuItem copyItem = new MenuItem(&quot;Copy&quot;);\r\n            copyItem.setOnAction((ActionEvent a) -&gt;\r\n            {\r\n    \r\n                Clipboard clipboard = Clipboard.getSystemClipboard();\r\n                ClipboardContent content = new ClipboardContent();\r\n                content.putString(textArea.getSelectedText());\r\n                clipboard.setContent(content);\r\n    \r\n            });\r\n    \r\n            context.getItems().add(copyItem);\r\n    \r\n            MenuItem pasteItem = new MenuItem(&quot;Paste&quot;);\r\n            pasteItem.setOnAction((ActionEvent a) -&gt;\r\n            {\r\n    \r\n                Clipboard clipboard = Clipboard.getSystemClipboard();\r\n                if (!StringUtils.isEmpty(textArea.getSelectedText()))\r\n                {\r\n                    textArea.replaceSelection(clipboard.getString());\r\n                } else\r\n                {\r\n                    textArea.insertText(textArea.getCaretPosition(), clipboard.getString());\r\n                }\r\n            });\r\n            context.getItems().add(pasteItem);\r\n            context.getItems().add(new SeparatorMenuItem());\r\n    \r\n            MenuItem selectAllItem = new MenuItem(&quot;Select All&quot;);\r\n            selectAllItem.setOnAction((ActionEvent a) -&gt;\r\n            {\r\n    \r\n                textArea.selectAll();\r\n            });\r\n            context.getItems().add(selectAllItem);\r\n    \r\n            if (StringUtils.isEmpty(textArea.getSelectedText()))\r\n            {\r\n                cutItem.setDisable(true);\r\n                copyItem.setDisable(true);\r\n            }\r\n    \r\n            return context;\r\n        }\r\n    \r\n        private static class StringDistancePair\r\n        {\r\n    \r\n            private final double x;\r\n            private final String y;\r\n    \r\n            public StringDistancePair(double x, String y)\r\n            {\r\n                this.x = x;\r\n                this.y = y;\r\n            }\r\n    \r\n            public String getWord()\r\n            {\r\n                return y;\r\n            }\r\n    \r\n            public double getDistance()\r\n            {\r\n                return x;\r\n            }\r\n    \r\n            @Override\r\n            public String toString()\r\n            {\r\n                return StringUtils.join(String.valueOf(getDistance()), &quot; : &quot;, String.valueOf(getWord()));\r\n            }\r\n        }\r\n    }\r\n\r\nDownload the full English dictionary here:\r\nhttps://github.com/dwyl/english-words/blob/master/words_alpha.txt\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kJu3E.gif\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"JavaFX Spell checker using RichTextFX how to create right click suggestions","body":"<p>I found out how. By using the caret position, I can select a word and replace it. The problem is, right clicking didn't move the caret. So in order to move the caret, you add a listener.</p>\n<pre><code>textArea.setOnMouseClicked((MouseEvent mouseEvent) -&gt;\n{\n    if (mouseEvent.getButton().equals(MouseButton.SECONDARY))\n    {\n        if (mouseEvent.getClickCount() == 1)\n        {\n            CharacterHit hit = textArea.hit(mouseEvent.getX(), mouseEvent.getY());\n            int characterPosition = hit.getInsertionIndex();\n\n            // move the caret to that character's position\n            textArea.moveTo(characterPosition, SelectionPolicy.CLEAR);\n        }\n    }\n});\n</code></pre>\n<p>Edit 1:</p>\n<p>Added indexing and concurrency for performance purposes. Context menu is now instantaneous.</p>\n<p>Edit 2:</p>\n<p>Fixed macOS issue with context menu</p>\n<p><a href=\"https://i.stack.imgur.com/kJu3E.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kJu3E.gif\" alt=\"enter image description here\" /></a></p>\n<p>Full code:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.text.BreakIterator;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.Collections;\nimport java.util.Comparator;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.concurrent.ConcurrentHashMap;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport javafx.animation.PauseTransition;\n\nimport org.fxmisc.flowless.VirtualizedScrollPane;\nimport org.fxmisc.richtext.StyleClassedTextArea;\nimport org.fxmisc.richtext.model.StyleSpans;\nimport org.fxmisc.richtext.model.StyleSpansBuilder;\n\nimport javafx.application.Application;\nimport javafx.concurrent.Task;\nimport javafx.event.ActionEvent;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.ContextMenu;\nimport javafx.scene.control.MenuItem;\nimport javafx.scene.control.SeparatorMenuItem;\nimport javafx.scene.input.Clipboard;\nimport javafx.scene.input.ClipboardContent;\nimport javafx.scene.input.MouseButton;\nimport javafx.scene.input.MouseEvent;\nimport javafx.scene.layout.StackPane;\nimport javafx.scene.text.Text;\nimport javafx.stage.Stage;\nimport javafx.util.Duration;\nimport org.apache.commons.lang3.CharUtils;\nimport org.apache.commons.lang3.StringUtils;\nimport org.apache.commons.lang3.math.NumberUtils;\nimport org.apache.commons.text.WordUtils;\nimport org.apache.commons.text.similarity.JaroWinklerSimilarity;\nimport org.fxmisc.richtext.CharacterHit;\nimport org.fxmisc.richtext.NavigationActions.SelectionPolicy;\n\npublic class SpellCheckingDemo extends Application\n{\n\n    private static final int NUMBER_OF_SUGGESTIONS = 5;\n    private static final Set&lt;String&gt; DICTIONARY = ConcurrentHashMap.newKeySet();\n    private static final Map&lt;String, List&lt;String&gt;&gt; SUGGESTIONS = new ConcurrentHashMap&lt;&gt;();\n\n    public static void main(String[] args)\n    {\n        launch(args);\n\n    }\n\n    @Override\n    public void start(Stage primaryStage)\n    {\n        StyleClassedTextArea textArea = new StyleClassedTextArea();\n        textArea.setWrapText(true);\n        textArea.requestFollowCaret();\n        //wait a bit before typing has stopped to compute the highlighting\n        PauseTransition textAreaDelay = new PauseTransition(Duration.millis(250));\n\n        textArea.textProperty().addListener((observable, oldValue, newValue) -&gt;\n        {\n            textAreaDelay.setOnFinished(event -&gt;\n            {\n                textArea.setStyleSpans(0, computeHighlighting(textArea.getText()));\n\n                //have a new thread index all incorrect words, and pre-populate suggestions\n                Task task = new Task&lt;Void&gt;()\n                {\n\n                    @Override\n                    public Void call()\n                    {\n                        //iterating over entire list is ok because after the first time, it will hit the index anyway\n                        for (String word : SpellCheckingDemo.SUGGESTIONS.keySet())\n                        {\n                            SpellCheckingDemo.getClosestWords(word);\n                            SpellCheckingDemo.getClosestWords(StringUtils.trim(word));\n\n                        }\n\n                        return null;\n                    }\n                };\n                new Thread(task).start();\n            });\n            textAreaDelay.playFromStart();\n        });\n\n        textArea.setOnMouseClicked((MouseEvent mouseEvent) -&gt;\n        {\n            if (mouseEvent.getButton().equals(MouseButton.SECONDARY))\n            {\n                if (mouseEvent.getClickCount() == 1)\n                {\n                    CharacterHit hit = textArea.hit(mouseEvent.getX(), mouseEvent.getY());\n                    int characterPosition = hit.getInsertionIndex();\n\n                    // move the caret to that character's position\n                    if (StringUtils.isEmpty(textArea.getSelectedText()))\n                    {\n                        textArea.moveTo(characterPosition, SelectionPolicy.CLEAR);\n\n                    }\n\n                    if (mouseEvent.getTarget() instanceof Text &amp;&amp; StringUtils.isEmpty(textArea.getSelectedText()))\n                    {\n\n                        textArea.selectWord();\n\n                        //When selecting right next to puncuation and spaces, the replacements elimantes these values. This avoids the issue by moving the caret towards the middle\n                        if (!StringUtils.isEmpty(textArea.getSelectedText()) &amp;&amp; !CharUtils.isAsciiAlphanumeric(textArea.getSelectedText().charAt(textArea.getSelectedText().length() - 1)))\n                        {\n                            textArea.moveTo(textArea.getCaretPosition() - 2);\n                            textArea.selectWord();\n\n                        }\n\n                        String referenceWord = textArea.getSelectedText();\n\n                        textArea.deselect();\n\n                        if (!NumberUtils.isParsable(referenceWord) &amp;&amp; !DICTIONARY.contains(StringUtils.trim(StringUtils.lowerCase(referenceWord))))\n                        {\n                            ContextMenu context = new ContextMenu();\n\n                            for (String word : SpellCheckingDemo.getClosestWords(referenceWord))\n                            {\n\n                                MenuItem item = new MenuItem(word);\n                                item.setOnAction((ActionEvent a) -&gt;\n                                {\n\n                                    textArea.selectWord();\n                                    textArea.replaceSelection(word);\n                                    textArea.deselect();\n\n                                });\n                                context.getItems().add(item);\n\n                            }\n\n                            if (!context.getItems().isEmpty())\n                            {\n                                textArea.moveTo(textArea.getCaretPosition() - 1);\n\n                                context.show((Node) mouseEvent.getTarget(), mouseEvent.getScreenX(), mouseEvent.getScreenY());\n                                ((Node) mouseEvent.getTarget()).addEventHandler(MouseEvent.MOUSE_PRESSED, event -&gt; context.hide());\n\n                            } else\n                            {\n                                ContextMenu copyPasteMenu = getCopyPasteMenu(textArea);\n                                copyPasteMenu.show((Node) mouseEvent.getTarget(), mouseEvent.getScreenX(), mouseEvent.getScreenY());\n                                ((Node) mouseEvent.getTarget()).addEventHandler(MouseEvent.MOUSE_PRESSED, event -&gt; copyPasteMenu.hide());\n\n                            }\n                        } else\n                        {\n                            ContextMenu copyPasteMenu = getCopyPasteMenu(textArea);\n                            copyPasteMenu.show((Node) mouseEvent.getTarget(), mouseEvent.getScreenX(), mouseEvent.getScreenY());\n                            ((Node) mouseEvent.getTarget()).addEventHandler(MouseEvent.MOUSE_PRESSED, event -&gt; copyPasteMenu.hide());\n\n                        }\n\n                    } else\n                    {\n                        ContextMenu copyPasteMenu = getCopyPasteMenu(textArea);\n                        copyPasteMenu.show((Node) mouseEvent.getTarget(), mouseEvent.getScreenX(), mouseEvent.getScreenY());\n                        ((Node) mouseEvent.getTarget()).addEventHandler(MouseEvent.MOUSE_PRESSED, event -&gt; copyPasteMenu.hide());\n\n                    }\n                }\n            }\n        });\n\n        // load the dictionary\n        try (InputStream input = SpellCheckingDemo.class.getResourceAsStream(&quot;/spellchecking.dict&quot;);\n                BufferedReader br = new BufferedReader(new InputStreamReader(input)))\n        {\n            String line;\n            while ((line = br.readLine()) != null)\n            {\n                DICTIONARY.add(line);\n            }\n        } catch (IOException ex)\n        {\n            Logger.getLogger(SpellCheckingDemo.class.getName()).log(Level.SEVERE, null, ex);\n        }\n\n        // load the sample document\n        InputStream input2 = SpellCheckingDemo.class.getResourceAsStream(&quot;/spellchecking.txt&quot;);\n        try (java.util.Scanner s = new java.util.Scanner(input2))\n        {\n            String document = s.useDelimiter(&quot;\\\\A&quot;).hasNext() ? s.next() : &quot;&quot;;\n            textArea.replaceText(0, 0, document);\n        }\n\n        Scene scene = new Scene(new StackPane(new VirtualizedScrollPane&lt;&gt;(textArea)), 600, 400);\n        scene.getStylesheets().add(SpellCheckingDemo.class.getResource(&quot;/spellchecking.css&quot;).toExternalForm());\n        primaryStage.setScene(scene);\n        primaryStage.setTitle(&quot;Spell Checking Demo&quot;);\n        primaryStage.show();\n    }\n\n    private static StyleSpans&lt;Collection&lt;String&gt;&gt; computeHighlighting(String text)\n    {\n\n        StyleSpansBuilder&lt;Collection&lt;String&gt;&gt; spansBuilder = new StyleSpansBuilder&lt;&gt;();\n\n        BreakIterator wb = BreakIterator.getWordInstance();\n        wb.setText(text);\n\n        int lastIndex = wb.first();\n        int lastKwEnd = 0;\n        while (lastIndex != BreakIterator.DONE)\n        {\n            int firstIndex = lastIndex;\n            lastIndex = wb.next();\n\n            if (lastIndex != BreakIterator.DONE &amp;&amp; Character.isLetterOrDigit(text.charAt(firstIndex)))\n            {\n                String word = text.substring(firstIndex, lastIndex);\n\n                if (!NumberUtils.isParsable(word) &amp;&amp; !DICTIONARY.contains(StringUtils.lowerCase(word)))\n                {\n                    spansBuilder.add(Collections.emptyList(), firstIndex - lastKwEnd);\n                    spansBuilder.add(Collections.singleton(&quot;underlined&quot;), lastIndex - firstIndex);\n                    lastKwEnd = lastIndex;\n                    SpellCheckingDemo.SUGGESTIONS.putIfAbsent(word, Collections.emptyList());\n                }\n                //System.err.println();\n            }\n        }\n        spansBuilder.add(Collections.emptyList(), text.length() - lastKwEnd);\n\n        return spansBuilder.create();\n    }\n\n    public static List&lt;String&gt; getClosestWords(String word)\n    {\n\n        //check to see if an suggestions for this word have already been indexed\n        if (SpellCheckingDemo.SUGGESTIONS.containsKey(word) &amp;&amp; !SpellCheckingDemo.SUGGESTIONS.get(word).isEmpty())\n        {\n            return SpellCheckingDemo.SUGGESTIONS.get(word);\n        }\n\n        List&lt;StringDistancePair&gt; allWordDistances = new ArrayList&lt;&gt;(DICTIONARY.size());\n\n        String lowerCaseWord = StringUtils.lowerCase(word);\n        JaroWinklerSimilarity jaroWinklerAlgorithm = new JaroWinklerSimilarity();\n        for (String checkWord : DICTIONARY)\n        {\n            allWordDistances.add(new StringDistancePair(jaroWinklerAlgorithm.apply(lowerCaseWord, checkWord), checkWord));\n\n        }\n\n        allWordDistances.sort(Comparator.comparingDouble(StringDistancePair::getDistance));\n\n        List&lt;String&gt; closestWords = new ArrayList&lt;&gt;(NUMBER_OF_SUGGESTIONS);\n\n        System.out.println(word);\n        for (StringDistancePair pair : allWordDistances.subList(allWordDistances.size() - NUMBER_OF_SUGGESTIONS, allWordDistances.size()))\n        {\n            // 0 is not a match at all, so no point adding to list\n            if (pair.getDistance() == 0.0)\n            {\n                continue;\n            }\n            String addWord;\n            if (StringUtils.isAllUpperCase(word))\n            {\n                addWord = StringUtils.upperCase(pair.getWord());\n            } else if (CharUtils.isAsciiAlphaUpper(word.charAt(0)))\n            {\n                addWord = WordUtils.capitalize(pair.getWord());\n            } else\n            {\n                addWord = StringUtils.lowerCase(pair.getWord());\n            }\n            System.out.println(pair);\n            closestWords.add(addWord);\n        }\n        System.out.println();\n        Collections.reverse(closestWords);\n\n        //add the suggestion list to index to allow future pulls\n        SpellCheckingDemo.SUGGESTIONS.put(word, closestWords);\n\n        return closestWords;\n\n    }\n\n    public static ContextMenu getCopyPasteMenu(StyleClassedTextArea textArea)\n    {\n        ContextMenu context = new ContextMenu();\n        MenuItem cutItem = new MenuItem(&quot;Cut&quot;);\n        cutItem.setOnAction((ActionEvent a) -&gt;\n        {\n\n            Clipboard clipboard = Clipboard.getSystemClipboard();\n            ClipboardContent content = new ClipboardContent();\n            content.putString(textArea.getSelectedText());\n            clipboard.setContent(content);\n            textArea.replaceSelection(&quot;&quot;);\n\n        });\n\n        context.getItems().add(cutItem);\n\n        MenuItem copyItem = new MenuItem(&quot;Copy&quot;);\n        copyItem.setOnAction((ActionEvent a) -&gt;\n        {\n\n            Clipboard clipboard = Clipboard.getSystemClipboard();\n            ClipboardContent content = new ClipboardContent();\n            content.putString(textArea.getSelectedText());\n            clipboard.setContent(content);\n\n        });\n\n        context.getItems().add(copyItem);\n\n        MenuItem pasteItem = new MenuItem(&quot;Paste&quot;);\n        pasteItem.setOnAction((ActionEvent a) -&gt;\n        {\n\n            Clipboard clipboard = Clipboard.getSystemClipboard();\n            if (!StringUtils.isEmpty(textArea.getSelectedText()))\n            {\n                textArea.replaceSelection(clipboard.getString());\n            } else\n            {\n                textArea.insertText(textArea.getCaretPosition(), clipboard.getString());\n            }\n        });\n        context.getItems().add(pasteItem);\n        context.getItems().add(new SeparatorMenuItem());\n\n        MenuItem selectAllItem = new MenuItem(&quot;Select All&quot;);\n        selectAllItem.setOnAction((ActionEvent a) -&gt;\n        {\n\n            textArea.selectAll();\n        });\n        context.getItems().add(selectAllItem);\n\n        if (StringUtils.isEmpty(textArea.getSelectedText()))\n        {\n            cutItem.setDisable(true);\n            copyItem.setDisable(true);\n        }\n\n        return context;\n    }\n\n    private static class StringDistancePair\n    {\n\n        private final double x;\n        private final String y;\n\n        public StringDistancePair(double x, String y)\n        {\n            this.x = x;\n            this.y = y;\n        }\n\n        public String getWord()\n        {\n            return y;\n        }\n\n        public double getDistance()\n        {\n            return x;\n        }\n\n        @Override\n        public String toString()\n        {\n            return StringUtils.join(String.valueOf(getDistance()), &quot; : &quot;, String.valueOf(getWord()));\n        }\n    }\n}\n</code></pre>\n<p>Download the full English dictionary here:\n<a href=\"https://github.com/dwyl/english-words/blob/master/words_alpha.txt\" rel=\"nofollow noreferrer\">https://github.com/dwyl/english-words/blob/master/words_alpha.txt</a></p>\n"}],"owner":{"account_id":12824901,"reputation":1708,"user_id":9278333,"display_name":"trilogy"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":670,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":72289785,"answer_count":1,"score":6,"last_activity_date":1676392349,"creation_date":1652287511,"question_id":72204764,"body_markdown":"I have a spell checker demo here, visually it  is exactly what I want (red underline for words that are not correct), but I&#39;m having trouble creating a right-click context menu to apply suggestions. \r\n\r\nI was able to get a context menu on the `Text` object, but I was not able to find the position of the text in the box to replace using the prediction.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHere is the code:\r\n\r\n**pom.xml**\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.fxmisc.richtext&lt;/groupId&gt;\r\n            &lt;artifactId&gt;richtextfx&lt;/artifactId&gt;\r\n            &lt;version&gt;0.10.6&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-text&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9&lt;/version&gt;\r\n            &lt;type&gt;jar&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n\r\n**SpellCheckDemo.java**\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.text.BreakIterator;\r\n    import java.time.Duration;\r\n    import java.util.Collection;\r\n    import java.util.Collections;\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    \r\n    import org.fxmisc.flowless.VirtualizedScrollPane;\r\n    import org.fxmisc.richtext.StyleClassedTextArea;\r\n    import org.fxmisc.richtext.model.StyleSpans;\r\n    import org.fxmisc.richtext.model.StyleSpansBuilder;\r\n    \r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.ContextMenu;\r\n    import javafx.scene.control.MenuItem;\r\n    import javafx.scene.input.ContextMenuEvent;\r\n    import javafx.scene.layout.StackPane;\r\n    import javafx.scene.text.Text;\r\n    import javafx.stage.Stage;\r\n    import org.apache.commons.text.similarity.JaroWinklerDistance;\r\n    import org.reactfx.Subscription;\r\n    \r\n    public class SpellCheckingDemo extends Application\r\n    {\r\n    \r\n        private static final Set&lt;String&gt; dictionary = new HashSet&lt;String&gt;();\r\n        private final static double JAROWINKLERDISTANCE_THRESHOLD = .80;\r\n    \r\n        public static void main(String[] args)\r\n        {\r\n            launch(args);\r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage)\r\n        {\r\n            StyleClassedTextArea textArea = new StyleClassedTextArea();\r\n            textArea.setWrapText(true);\r\n    \r\n            Subscription cleanupWhenFinished = textArea.multiPlainChanges()\r\n                    .successionEnds(Duration.ofMillis(500))\r\n                    .subscribe(change -&gt;\r\n                    {\r\n                        textArea.setStyleSpans(0, computeHighlighting(textArea.getText()));\r\n                    });\r\n            // call when no longer need it: `cleanupWhenFinished.unsubscribe();`\r\n    \r\n            textArea.setOnContextMenuRequested((ContextMenuEvent event) -&gt;\r\n            {\r\n                if (event.getTarget() instanceof Text)\r\n                {\r\n                    Text text = (Text) event.getTarget();\r\n                    ContextMenu context = new ContextMenu();\r\n                    JaroWinklerDistance distance = new JaroWinklerDistance();\r\n                    for (String word : dictionary)\r\n                    {\r\n                        if (distance.apply(text.getText(), word) &gt;= JAROWINKLERDISTANCE_THRESHOLD)\r\n                        {\r\n                            MenuItem item = new MenuItem(word);\r\n                            item.setOnAction(a -&gt;\r\n                            {\r\n                                // how do I find the position of the Text object ?                    \r\n                                textArea.replaceText(25, 25 + text.getText().length(), word);\r\n                            });\r\n                            context.getItems().add(item);\r\n    \r\n                        }\r\n    \r\n                    }\r\n    \r\n                    context.show(primaryStage, event.getScreenX(), event.getScreenY());\r\n    \r\n                }\r\n            });\r\n    \r\n            // load the dictionary\r\n            try (InputStream input = SpellCheckingDemo.class.getResourceAsStream(&quot;/spellchecking.dict&quot;);\r\n                    BufferedReader br = new BufferedReader(new InputStreamReader(input)))\r\n            {\r\n                String line;\r\n                while ((line = br.readLine()) != null)\r\n                {\r\n                    dictionary.add(line);\r\n                }\r\n            } catch (IOException e)\r\n            {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            // load the sample document\r\n            InputStream input2 = SpellCheckingDemo.class.getResourceAsStream(&quot;/spellchecking.txt&quot;);\r\n            try (java.util.Scanner s = new java.util.Scanner(input2))\r\n            {\r\n                String document = s.useDelimiter(&quot;\\\\A&quot;).hasNext() ? s.next() : &quot;&quot;;\r\n                textArea.replaceText(0, 0, document);\r\n            }\r\n    \r\n            Scene scene = new Scene(new StackPane(new VirtualizedScrollPane&lt;&gt;(textArea)), 600, 400);\r\n            scene.getStylesheets().add(SpellCheckingDemo.class.getResource(&quot;/spellchecking.css&quot;).toExternalForm());\r\n            primaryStage.setScene(scene);\r\n            primaryStage.setTitle(&quot;Spell Checking Demo&quot;);\r\n            primaryStage.show();\r\n        }\r\n    \r\n        private static StyleSpans&lt;Collection&lt;String&gt;&gt; computeHighlighting(String text)\r\n        {\r\n    \r\n            StyleSpansBuilder&lt;Collection&lt;String&gt;&gt; spansBuilder = new StyleSpansBuilder&lt;&gt;();\r\n    \r\n            BreakIterator wb = BreakIterator.getWordInstance();\r\n            wb.setText(text);\r\n    \r\n            int lastIndex = wb.first();\r\n            int lastKwEnd = 0;\r\n            while (lastIndex != BreakIterator.DONE)\r\n            {\r\n                int firstIndex = lastIndex;\r\n                lastIndex = wb.next();\r\n    \r\n                if (lastIndex != BreakIterator.DONE\r\n                        &amp;&amp; Character.isLetterOrDigit(text.charAt(firstIndex)))\r\n                {\r\n                    String word = text.substring(firstIndex, lastIndex).toLowerCase();\r\n                    if (!dictionary.contains(word))\r\n                    {\r\n                        spansBuilder.add(Collections.emptyList(), firstIndex - lastKwEnd);\r\n                        spansBuilder.add(Collections.singleton(&quot;underlined&quot;), lastIndex - firstIndex);\r\n                        lastKwEnd = lastIndex;\r\n                    }\r\n                    System.err.println();\r\n                }\r\n            }\r\n            spansBuilder.add(Collections.emptyList(), text.length() - lastKwEnd);\r\n    \r\n            return spansBuilder.create();\r\n        }\r\n    }\r\n\r\nThe following files go into the resource folder: \r\n\r\n**spellchecking.css**\r\n\r\n    .underlined {\r\n        -rtfx-background-color: #f0f0f0;\r\n        -rtfx-underline-color: red;\r\n        -rtfx-underline-dash-array: 2 2;\r\n        -rtfx-underline-width: 1;\r\n        -rtfx-underline-cap: butt;\r\n    }\r\n\r\n**spellchecking.dict**\r\n\r\n    a\r\n    applied\r\n    basic\r\n    brown\r\n    but\r\n    could\r\n    document\r\n    dog\r\n    fox\r\n    here\r\n    if\r\n    is\r\n    its\r\n    jumps\r\n    lazy\r\n    no\r\n    over\r\n    quick\r\n    rendering\r\n    sample\r\n    see\r\n    styling\r\n    the\r\n    there\r\n    this\r\n    were\r\n    you\r\n\r\n**spellchecking.txt**\r\n\r\n    The quik brown fox jumps over the lazy dog.\r\n    Ths is a sample dokument.\r\n    There is no styling aplied, but if there were, you could see its basic rndering here.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hJ5T7.gif","title":"JavaFX Spell checker using RichTextFX how to create right click suggestions","body":"<p>I have a spell checker demo here, visually it  is exactly what I want (red underline for words that are not correct), but I'm having trouble creating a right-click context menu to apply suggestions.</p>\n<p>I was able to get a context menu on the <code>Text</code> object, but I was not able to find the position of the text in the box to replace using the prediction.</p>\n<p><a href=\"https://i.stack.imgur.com/hJ5T7.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hJ5T7.gif\" alt=\"enter image description here\" /></a></p>\n<p>Here is the code:</p>\n<p><strong>pom.xml</strong></p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.fxmisc.richtext&lt;/groupId&gt;\n        &lt;artifactId&gt;richtextfx&lt;/artifactId&gt;\n        &lt;version&gt;0.10.6&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-text&lt;/artifactId&gt;\n        &lt;version&gt;1.9&lt;/version&gt;\n        &lt;type&gt;jar&lt;/type&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p><strong>SpellCheckDemo.java</strong></p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.text.BreakIterator;\nimport java.time.Duration;\nimport java.util.Collection;\nimport java.util.Collections;\nimport java.util.HashSet;\nimport java.util.Set;\n\nimport org.fxmisc.flowless.VirtualizedScrollPane;\nimport org.fxmisc.richtext.StyleClassedTextArea;\nimport org.fxmisc.richtext.model.StyleSpans;\nimport org.fxmisc.richtext.model.StyleSpansBuilder;\n\nimport javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.control.ContextMenu;\nimport javafx.scene.control.MenuItem;\nimport javafx.scene.input.ContextMenuEvent;\nimport javafx.scene.layout.StackPane;\nimport javafx.scene.text.Text;\nimport javafx.stage.Stage;\nimport org.apache.commons.text.similarity.JaroWinklerDistance;\nimport org.reactfx.Subscription;\n\npublic class SpellCheckingDemo extends Application\n{\n\n    private static final Set&lt;String&gt; dictionary = new HashSet&lt;String&gt;();\n    private final static double JAROWINKLERDISTANCE_THRESHOLD = .80;\n\n    public static void main(String[] args)\n    {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage)\n    {\n        StyleClassedTextArea textArea = new StyleClassedTextArea();\n        textArea.setWrapText(true);\n\n        Subscription cleanupWhenFinished = textArea.multiPlainChanges()\n                .successionEnds(Duration.ofMillis(500))\n                .subscribe(change -&gt;\n                {\n                    textArea.setStyleSpans(0, computeHighlighting(textArea.getText()));\n                });\n        // call when no longer need it: `cleanupWhenFinished.unsubscribe();`\n\n        textArea.setOnContextMenuRequested((ContextMenuEvent event) -&gt;\n        {\n            if (event.getTarget() instanceof Text)\n            {\n                Text text = (Text) event.getTarget();\n                ContextMenu context = new ContextMenu();\n                JaroWinklerDistance distance = new JaroWinklerDistance();\n                for (String word : dictionary)\n                {\n                    if (distance.apply(text.getText(), word) &gt;= JAROWINKLERDISTANCE_THRESHOLD)\n                    {\n                        MenuItem item = new MenuItem(word);\n                        item.setOnAction(a -&gt;\n                        {\n                            // how do I find the position of the Text object ?                    \n                            textArea.replaceText(25, 25 + text.getText().length(), word);\n                        });\n                        context.getItems().add(item);\n\n                    }\n\n                }\n\n                context.show(primaryStage, event.getScreenX(), event.getScreenY());\n\n            }\n        });\n\n        // load the dictionary\n        try (InputStream input = SpellCheckingDemo.class.getResourceAsStream(&quot;/spellchecking.dict&quot;);\n                BufferedReader br = new BufferedReader(new InputStreamReader(input)))\n        {\n            String line;\n            while ((line = br.readLine()) != null)\n            {\n                dictionary.add(line);\n            }\n        } catch (IOException e)\n        {\n            e.printStackTrace();\n        }\n\n        // load the sample document\n        InputStream input2 = SpellCheckingDemo.class.getResourceAsStream(&quot;/spellchecking.txt&quot;);\n        try (java.util.Scanner s = new java.util.Scanner(input2))\n        {\n            String document = s.useDelimiter(&quot;\\\\A&quot;).hasNext() ? s.next() : &quot;&quot;;\n            textArea.replaceText(0, 0, document);\n        }\n\n        Scene scene = new Scene(new StackPane(new VirtualizedScrollPane&lt;&gt;(textArea)), 600, 400);\n        scene.getStylesheets().add(SpellCheckingDemo.class.getResource(&quot;/spellchecking.css&quot;).toExternalForm());\n        primaryStage.setScene(scene);\n        primaryStage.setTitle(&quot;Spell Checking Demo&quot;);\n        primaryStage.show();\n    }\n\n    private static StyleSpans&lt;Collection&lt;String&gt;&gt; computeHighlighting(String text)\n    {\n\n        StyleSpansBuilder&lt;Collection&lt;String&gt;&gt; spansBuilder = new StyleSpansBuilder&lt;&gt;();\n\n        BreakIterator wb = BreakIterator.getWordInstance();\n        wb.setText(text);\n\n        int lastIndex = wb.first();\n        int lastKwEnd = 0;\n        while (lastIndex != BreakIterator.DONE)\n        {\n            int firstIndex = lastIndex;\n            lastIndex = wb.next();\n\n            if (lastIndex != BreakIterator.DONE\n                    &amp;&amp; Character.isLetterOrDigit(text.charAt(firstIndex)))\n            {\n                String word = text.substring(firstIndex, lastIndex).toLowerCase();\n                if (!dictionary.contains(word))\n                {\n                    spansBuilder.add(Collections.emptyList(), firstIndex - lastKwEnd);\n                    spansBuilder.add(Collections.singleton(&quot;underlined&quot;), lastIndex - firstIndex);\n                    lastKwEnd = lastIndex;\n                }\n                System.err.println();\n            }\n        }\n        spansBuilder.add(Collections.emptyList(), text.length() - lastKwEnd);\n\n        return spansBuilder.create();\n    }\n}\n</code></pre>\n<p>The following files go into the resource folder:</p>\n<p><strong>spellchecking.css</strong></p>\n<pre><code>.underlined {\n    -rtfx-background-color: #f0f0f0;\n    -rtfx-underline-color: red;\n    -rtfx-underline-dash-array: 2 2;\n    -rtfx-underline-width: 1;\n    -rtfx-underline-cap: butt;\n}\n</code></pre>\n<p><strong>spellchecking.dict</strong></p>\n<pre><code>a\napplied\nbasic\nbrown\nbut\ncould\ndocument\ndog\nfox\nhere\nif\nis\nits\njumps\nlazy\nno\nover\nquick\nrendering\nsample\nsee\nstyling\nthe\nthere\nthis\nwere\nyou\n</code></pre>\n<p><strong>spellchecking.txt</strong></p>\n<pre><code>The quik brown fox jumps over the lazy dog.\nThs is a sample dokument.\nThere is no styling aplied, but if there were, you could see its basic rndering here.\n</code></pre>\n"},{"tags":["java","spring","utf-8","intellij-idea","thymeleaf"],"comments":[{"owner":{"account_id":3963498,"reputation":1926,"user_id":3270066,"display_name":"pagurix"},"score":0,"creation_date":1443542520,"post_id":26432479,"comment_id":53531128,"body_markdown":"works for me. thanks","body":"works for me. thanks"}],"answers":[{"tags":[],"owner":{"account_id":5187150,"reputation":11818,"user_id":4151201,"accept_rate":96,"display_name":"Sikor"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1413581218,"creation_date":1413580406,"answer_id":26433527,"question_id":26432479,"body_markdown":"Okay, I figured it out. Here&#39;s the deal:\r\n\r\nI had the following code:\r\n\r\n    &lt;bean id=&quot;messageSource&quot;\r\n          class=&quot;org.springframework.context.support.ResourceBundleMessageSource&quot;&gt;\r\n        &lt;property name=&quot;basename&quot; value=&quot;messages&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\n**Option 1:**\r\nJust add this as another property:\r\n\r\n    &lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;/&gt;\r\n\r\n**Option 2:**\r\nChanged it to:\r\n\r\n    &lt;bean id=&quot;messageSource&quot;\r\n          class=&quot;org.springframework.context.support.ReloadableResourceBundleMessageSource&quot;&gt;\r\n        &lt;property name=&quot;basename&quot; value=&quot;classpath:messages&quot;/&gt;\r\n        &lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;/&gt;\r\n    &lt;/bean&gt;\r\n\r\nIf you change it to reloadable, keep in mind to also change the property value from &quot;messages&quot; to &quot;classpath:messages&quot;. For some reason it couldn&#39;t find the message bundle if I didn&#39;t change it.","title":"Messages from .properties file do not display UTF-8 characters","body":"<p>Okay, I figured it out. Here's the deal:</p>\n\n<p>I had the following code:</p>\n\n<pre><code>&lt;bean id=\"messageSource\"\n      class=\"org.springframework.context.support.ResourceBundleMessageSource\"&gt;\n    &lt;property name=\"basename\" value=\"messages\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p><strong>Option 1:</strong>\nJust add this as another property:</p>\n\n<pre><code>&lt;property name=\"defaultEncoding\" value=\"UTF-8\"/&gt;\n</code></pre>\n\n<p><strong>Option 2:</strong>\nChanged it to:</p>\n\n<pre><code>&lt;bean id=\"messageSource\"\n      class=\"org.springframework.context.support.ReloadableResourceBundleMessageSource\"&gt;\n    &lt;property name=\"basename\" value=\"classpath:messages\"/&gt;\n    &lt;property name=\"defaultEncoding\" value=\"UTF-8\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>If you change it to reloadable, keep in mind to also change the property value from \"messages\" to \"classpath:messages\". For some reason it couldn't find the message bundle if I didn't change it.</p>\n"},{"tags":[],"owner":{"account_id":4716379,"reputation":1255,"user_id":3901138,"accept_rate":41,"display_name":"Park JongBum"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1527470686,"creation_date":1527470686,"answer_id":50558035,"question_id":26432479,"body_markdown":"When you use ResourceBundleMessageSource object, you need to set default encoding as follows: \r\n\r\n    @Bean\r\n    public MessageSource messageSource() { \r\n    \tResourceBundleMessageSource resource = \r\n    \t\t\tnew ResourceBundleMessageSource();\r\n    \tresource.setBasename(&quot;messages&quot;);\r\n    \tresource.setDefaultEncoding(&quot;utf-8&quot;);\r\n    \treturn resource;    \r\n    }\r\n\r\n","title":"Messages from .properties file do not display UTF-8 characters","body":"<p>When you use ResourceBundleMessageSource object, you need to set default encoding as follows: </p>\n\n<pre><code>@Bean\npublic MessageSource messageSource() { \n    ResourceBundleMessageSource resource = \n            new ResourceBundleMessageSource();\n    resource.setBasename(\"messages\");\n    resource.setDefaultEncoding(\"utf-8\");\n    return resource;    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13678477,"reputation":299,"user_id":9869394,"display_name":"Dinushika Rathnayake"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676392188,"creation_date":1676392188,"answer_id":75450689,"question_id":26432479,"body_markdown":"In my case setting default encoding is not enough, have to create properties files in UTF-8 format also.\r\n\r\nFor more details please refer https://stackoverflow.com/questions/28112852/springboot-utf-8-doesnt-work-in-messages-properties","title":"Messages from .properties file do not display UTF-8 characters","body":"<p>In my case setting default encoding is not enough, have to create properties files in UTF-8 format also.</p>\n<p>For more details please refer <a href=\"https://stackoverflow.com/questions/28112852/springboot-utf-8-doesnt-work-in-messages-properties\">SpringBoot - UTF-8 Doesnt work in messages.properties</a></p>\n"}],"owner":{"account_id":5187150,"reputation":11818,"user_id":4151201,"accept_rate":96,"display_name":"Sikor"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13028,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":26433527,"answer_count":3,"score":11,"last_activity_date":1676392188,"creation_date":1413575469,"question_id":26432479,"body_markdown":"As the title says, I can only add that if I enter ą ę &#243; manually in html file, it&#39;s fine.\r\n\r\nViewResolver:\r\n\r\n    &lt;bean id=&quot;templateResolver&quot; class=&quot;org.thymeleaf.templateresolver.ServletContextTemplateResolver&quot;&gt;\r\n        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/templates/&quot; /&gt;\r\n        &lt;property name=&quot;suffix&quot; value=&quot;.html&quot; /&gt;\r\n        &lt;property name=&quot;templateMode&quot; value=&quot;HTML5&quot; /&gt;\r\n        &lt;property name=&quot;cacheable&quot; value=&quot;false&quot;/&gt;\r\n        &lt;property name=&quot;characterEncoding&quot; value=&quot;UTF-8&quot;/&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;bean id=&quot;templateEngine&quot; class=&quot;org.thymeleaf.spring3.SpringTemplateEngine&quot;&gt;\r\n        &lt;property name=&quot;templateResolver&quot; ref=&quot;templateResolver&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;bean class=&quot;org.thymeleaf.spring3.view.ThymeleafViewResolver&quot;&gt;\r\n        &lt;property name=&quot;templateEngine&quot; ref=&quot;templateEngine&quot; /&gt;\r\n        &lt;property name=&quot;characterEncoding&quot; value=&quot;UTF-8&quot;/&gt;\r\n        &lt;property name=&quot;order&quot; value=&quot;1&quot;/&gt;\r\n    &lt;/bean&gt;\r\n\r\npom.xml:\r\n\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\r\nexample of html input:\r\n\r\n    &lt;h2&gt;&lt;p th:text=&quot;#{homepage.greeting}&quot;&gt;Welcome&lt;/p&gt;&lt;/h2&gt;\r\n\r\ninside the &lt;head&gt; tag of the html file:\r\n\r\n    &lt;meta charset=&quot;UTF-8&quot;/&gt;\r\n\r\nIn IntelliJ Idea I have set project encoding to UTF-8, default encoding for properties files to UTF-8\r\n![enter image description here][1]\r\n\r\nAnd I honestly have no idea where is the problem. When I change locale to pl, this is the output:\r\n![enter image description here][2]\r\n\r\nSorry but I can&#39;t post images yet.\r\nAny help would be greatly appreciated.\r\n\r\nTried this filter in web.xml, still no luck.\r\n\r\n    &lt;filter&gt;\r\n        &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\r\n        &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;encoding&lt;/param-name&gt;\r\n            &lt;param-value&gt;UTF-8&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;forceEncoding&lt;/param-name&gt;\r\n            &lt;param-value&gt;true&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n    &lt;/filter&gt;\r\n    &lt;filter-mapping&gt;\r\n        &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\r\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n    &lt;/filter-mapping&gt;\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/nKC1B.png\r\n  [2]: http://i.stack.imgur.com/DaqxV.png","title":"Messages from .properties file do not display UTF-8 characters","body":"<p>As the title says, I can only add that if I enter ą ę ó manually in html file, it's fine.</p>\n\n<p>ViewResolver:</p>\n\n<pre><code>&lt;bean id=\"templateResolver\" class=\"org.thymeleaf.templateresolver.ServletContextTemplateResolver\"&gt;\n    &lt;property name=\"prefix\" value=\"/WEB-INF/templates/\" /&gt;\n    &lt;property name=\"suffix\" value=\".html\" /&gt;\n    &lt;property name=\"templateMode\" value=\"HTML5\" /&gt;\n    &lt;property name=\"cacheable\" value=\"false\"/&gt;\n    &lt;property name=\"characterEncoding\" value=\"UTF-8\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"templateEngine\" class=\"org.thymeleaf.spring3.SpringTemplateEngine\"&gt;\n    &lt;property name=\"templateResolver\" ref=\"templateResolver\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean class=\"org.thymeleaf.spring3.view.ThymeleafViewResolver\"&gt;\n    &lt;property name=\"templateEngine\" ref=\"templateEngine\" /&gt;\n    &lt;property name=\"characterEncoding\" value=\"UTF-8\"/&gt;\n    &lt;property name=\"order\" value=\"1\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>pom.xml:</p>\n\n<pre><code>&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n</code></pre>\n\n<p>example of html input:</p>\n\n<pre><code>&lt;h2&gt;&lt;p th:text=\"#{homepage.greeting}\"&gt;Welcome&lt;/p&gt;&lt;/h2&gt;\n</code></pre>\n\n<p>inside the  tag of the html file:</p>\n\n<pre><code>&lt;meta charset=\"UTF-8\"/&gt;\n</code></pre>\n\n<p>In IntelliJ Idea I have set project encoding to UTF-8, default encoding for properties files to UTF-8\n<img src=\"https://i.stack.imgur.com/nKC1B.png\" alt=\"enter image description here\"></p>\n\n<p>And I honestly have no idea where is the problem. When I change locale to pl, this is the output:\n<img src=\"https://i.stack.imgur.com/DaqxV.png\" alt=\"enter image description here\"></p>\n\n<p>Sorry but I can't post images yet.\nAny help would be greatly appreciated.</p>\n\n<p>Tried this filter in web.xml, still no luck.</p>\n\n<pre><code>&lt;filter&gt;\n    &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;encoding&lt;/param-name&gt;\n        &lt;param-value&gt;UTF-8&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;forceEncoding&lt;/param-name&gt;\n        &lt;param-value&gt;true&lt;/param-value&gt;\n    &lt;/init-param&gt;\n&lt;/filter&gt;\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n"},{"tags":["java","php","hashmap"],"comments":[{"owner":{"account_id":2674049,"reputation":93913,"user_id":2310830,"display_name":"RiggsFolly"},"score":0,"creation_date":1676384288,"post_id":75446679,"comment_id":133123216,"body_markdown":"It is better to tell us the data you have (with examples), then what you want it to become (with examples that match the previosu examples), then what you tried to majke that happen.","body":"It is better to tell us the data you have (with examples), then what you want it to become (with examples that match the previosu examples), then what you tried to majke that happen."},{"owner":{"account_id":2674049,"reputation":93913,"user_id":2310830,"display_name":"RiggsFolly"},"score":0,"creation_date":1676389804,"post_id":75446679,"comment_id":133125144,"body_markdown":"So show us the loop code. Show a `print_r()` of any input arrays. Make the output you require also look like a `print_r()` or similiar. If we can see what you statr with and what you want to finish up with, then we can try and help with the code to get you there","body":"So show us the loop code. Show a <code>print_r()</code> of any input arrays. Make the output you require also look like a <code>print_r()</code> or similiar. If we can see what you statr with and what you want to finish up with, then we can try and help with the code to get you there"},{"owner":{"account_id":13891354,"reputation":1432,"user_id":10029265,"display_name":"habib"},"score":0,"creation_date":1676390416,"post_id":75446679,"comment_id":133125377,"body_markdown":"@RiggsFolly I just did without print_r\ncheck the example test case","body":"@RiggsFolly I just did without print_r check the example test case"},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1676390654,"post_id":75446679,"comment_id":133125465,"body_markdown":"[As per the manual](https://www.php.net/manual/en/language.types.array.php): &quot;Arrays and objects _can not_ be used as keys. Doing so will result in a warning: Illegal offset type.&quot; So you&#39;re either stuck with hashing yourself, or (probably nicer?) writing a task-appropriate datastructure instead of using maps.","body":"<a href=\"https://www.php.net/manual/en/language.types.array.php\" rel=\"nofollow noreferrer\">As per the manual</a>: &quot;Arrays and objects <i>can not</i> be used as keys. Doing so will result in a warning: Illegal offset type.&quot; So you&#39;re either stuck with hashing yourself, or (probably nicer?) writing a task-appropriate datastructure instead of using maps."},{"owner":{"account_id":13891354,"reputation":1432,"user_id":10029265,"display_name":"habib"},"score":0,"creation_date":1676392625,"post_id":75446679,"comment_id":133126103,"body_markdown":"@Mike&#39;Pomax&#39;Kamermans my code is working 100% fine but it will eventually slow down on if input is very big","body":"@Mike&#39;Pomax&#39;Kamermans my code is working 100% fine but it will eventually slow down on if input is very big"},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1676393553,"post_id":75446679,"comment_id":133126408,"body_markdown":"That is the nature of runtime complexity. If you want to fix _that_, it&#39;s definitely time to write your own tree data structure with an ordered index that lets you efficiently find a keyed value anywhere in the tree.","body":"That is the nature of runtime complexity. If you want to fix <i>that</i>, it&#39;s definitely time to write your own tree data structure with an ordered index that lets you efficiently find a keyed value anywhere in the tree."}],"owner":{"account_id":13891354,"reputation":1432,"user_id":10029265,"display_name":"habib"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676390692,"creation_date":1676371320,"question_id":75446679,"body_markdown":"In Java, we can use HashMap as a key in other HashMap. I&#39;m using an associative array as a map in PHP. Now there is a need to store an associative array as a key in another associative array.\r\nI asked ChatGPT and it presented a lengthy solution:\r\nSuppose $map is an array that I want to use as a key:\r\n\r\n        ksort($map);\r\n        $key = serialize($map);\r\n\r\n        if(!isset($main[$key])){\r\n            $main[$key] = 0;\r\n        }\r\n        $main[$key]++\r\n\r\nI&#39;m running above code in a loop where map is:\r\n\r\non first iteration: [a=&gt;1, b=&gt;2, c=&gt;3]\r\n\r\non second iteration: [b=&gt;2, a=&gt;1, c=&gt;3]\r\n\r\nafter 2 two iterations\r\nmain is looking like\r\n$main[&quot;serialized---key&quot;] -&gt; 2\r\n\r\nYes, I need to use ksort because the next $map could contain the same array but keys could be in a different order.\r\n\r\nThe above solution is working fine but it will slow down drastically on large inputs. I need a better way where I don&#39;t need to use ksort and serialization.\r\n\r\nI also used **spl_object_hash** instead of serialize but it didn&#39;t work. please suggest an optimal approach just like hashmap in java.\r\nAlso, I used **splObjectStorage** class by type-casting the array into an object but it gives incorrect results.\r\n\r\nDetailed problem:\r\n\r\nWhat I&#39;m actually trying to do?\r\nI&#39;m solving the following problem:\r\nGiven an array of strings strs, group the anagrams together. You can return the answer in any order.\r\n\r\nAn Anagram is a word or phrase formed by rearranging the letters of a different word or phrase, typically using all the original letters exactly once.\r\n\r\nExample 1:\r\n\r\nInput: strs = \r\n    \r\n    [&quot;eat&quot;,&quot;tea&quot;,&quot;tan&quot;,&quot;ate&quot;,&quot;nat&quot;,&quot;bat&quot;]\r\n\r\nOutput: \r\n    \r\n    [[&quot;bat&quot;],[&quot;nat&quot;,&quot;tan&quot;],[&quot;ate&quot;,&quot;eat&quot;,&quot;tea&quot;]]\r\n\r\n\r\nMy working code:\r\n\r\nIn short, I&#39;m just grouping the strings based on their frequency map.\r\n\r\n```\r\nfunction groupAnagrams(array $arr){\r\n    $main = [];\r\n    $ret = [];\r\n    for($i=0; $i&lt;count($arr); $i++){\r\n        $el = $arr[$i];\r\n        $map = [];\r\n        for($j=0; $j&lt;strlen($el); $j++){\r\n            if(!isset($map[$el[$j]])){\r\n                $map[$el[$j]]=0;\r\n            }\r\n            $map[$el[$j]]++;\r\n        }\r\n        ksort($map);\r\n        $key = serialize($map);\r\n\r\n        if(!isset($main[$key])){\r\n            $main[$key] = [];\r\n        }\r\n        $main[$key][] = $el;\r\n    }\r\n\r\n\r\n\r\n    //return $main;\r\n    foreach($main as $key=&gt;$val){\r\n        $ret[] = $val;\r\n    }\r\n\r\n    return $ret;\r\n}\r\n```\r\n\r\n\r\nHere is the problem link: https://leetcode.com/problems/group-anagrams/","title":"how to use associateArray as a key in other associativeArray in PHP (just like using HashMap as key in another HashMap in JAVA)","body":"<p>In Java, we can use HashMap as a key in other HashMap. I'm using an associative array as a map in PHP. Now there is a need to store an associative array as a key in another associative array.\nI asked ChatGPT and it presented a lengthy solution:\nSuppose $map is an array that I want to use as a key:</p>\n<pre><code>    ksort($map);\n    $key = serialize($map);\n\n    if(!isset($main[$key])){\n        $main[$key] = 0;\n    }\n    $main[$key]++\n</code></pre>\n<p>I'm running above code in a loop where map is:</p>\n<p>on first iteration: [a=&gt;1, b=&gt;2, c=&gt;3]</p>\n<p>on second iteration: [b=&gt;2, a=&gt;1, c=&gt;3]</p>\n<p>after 2 two iterations\nmain is looking like\n$main[&quot;serialized---key&quot;] -&gt; 2</p>\n<p>Yes, I need to use ksort because the next $map could contain the same array but keys could be in a different order.</p>\n<p>The above solution is working fine but it will slow down drastically on large inputs. I need a better way where I don't need to use ksort and serialization.</p>\n<p>I also used <strong>spl_object_hash</strong> instead of serialize but it didn't work. please suggest an optimal approach just like hashmap in java.\nAlso, I used <strong>splObjectStorage</strong> class by type-casting the array into an object but it gives incorrect results.</p>\n<p>Detailed problem:</p>\n<p>What I'm actually trying to do?\nI'm solving the following problem:\nGiven an array of strings strs, group the anagrams together. You can return the answer in any order.</p>\n<p>An Anagram is a word or phrase formed by rearranging the letters of a different word or phrase, typically using all the original letters exactly once.</p>\n<p>Example 1:</p>\n<p>Input: strs =</p>\n<pre><code>[&quot;eat&quot;,&quot;tea&quot;,&quot;tan&quot;,&quot;ate&quot;,&quot;nat&quot;,&quot;bat&quot;]\n</code></pre>\n<p>Output:</p>\n<pre><code>[[&quot;bat&quot;],[&quot;nat&quot;,&quot;tan&quot;],[&quot;ate&quot;,&quot;eat&quot;,&quot;tea&quot;]]\n</code></pre>\n<p>My working code:</p>\n<p>In short, I'm just grouping the strings based on their frequency map.</p>\n<pre><code>function groupAnagrams(array $arr){\n    $main = [];\n    $ret = [];\n    for($i=0; $i&lt;count($arr); $i++){\n        $el = $arr[$i];\n        $map = [];\n        for($j=0; $j&lt;strlen($el); $j++){\n            if(!isset($map[$el[$j]])){\n                $map[$el[$j]]=0;\n            }\n            $map[$el[$j]]++;\n        }\n        ksort($map);\n        $key = serialize($map);\n\n        if(!isset($main[$key])){\n            $main[$key] = [];\n        }\n        $main[$key][] = $el;\n    }\n\n\n\n    //return $main;\n    foreach($main as $key=&gt;$val){\n        $ret[] = $val;\n    }\n\n    return $ret;\n}\n</code></pre>\n<p>Here is the problem link: <a href=\"https://leetcode.com/problems/group-anagrams/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/group-anagrams/</a></p>\n"},{"tags":["java","security","servlets","servlet-filters","denial-of-service"],"answers":[{"tags":[],"owner":{"account_id":120605,"reputation":24173,"user_id":313137,"display_name":"Romain Hippeau"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676390515,"creation_date":1277402969,"answer_id":3112695,"question_id":3112663,"body_markdown":"If you are using Spring then [Acegi security][1] is pretty complete.   \r\n[Here is a series of tutorial articles][2].   \r\nIt looks like you might be able to run this without needing Spring everywhere, [See here][3].\r\n\r\n\r\n  [1]: http://www.acegisecurity.org/guide/springsecurity.html\r\n  [2]: http://www.ibm.com/developerworks/views/java/libraryview.jsp?search_by=securing+acegi\r\n  [3]: http://www.acegisecurity.org/standalone.html\r\n\r\nAcegi has become Spring Security since this was posted. \r\nAlso looks like www.acegisecurity.org has been hacked.","title":"Servlet filters for abuse prevention? (DoS, spam, etc)","body":"<p>If you are using Spring then <a href=\"http://www.acegisecurity.org/guide/springsecurity.html\" rel=\"nofollow noreferrer\">Acegi security</a> is pretty complete.<br />\n<a href=\"http://www.ibm.com/developerworks/views/java/libraryview.jsp?search_by=securing+acegi\" rel=\"nofollow noreferrer\">Here is a series of tutorial articles</a>.<br />\nIt looks like you might be able to run this without needing Spring everywhere, <a href=\"http://www.acegisecurity.org/standalone.html\" rel=\"nofollow noreferrer\">See here</a>.</p>\n<p>Acegi has become Spring Security since this was posted.\nAlso looks like <a href=\"http://www.acegisecurity.org\" rel=\"nofollow noreferrer\">www.acegisecurity.org</a> has been hacked.</p>\n"},{"tags":[],"owner":{"account_id":158173,"reputation":2138,"user_id":376610,"display_name":"A. Ionescu"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1277495789,"creation_date":1277495789,"answer_id":3121040,"question_id":3112663,"body_markdown":"[Apache Shiro][1] is an interesting security solution (it was called jSecurity before joining Apache.org). I find their source code much easier to understand and tweak for my needs, and also to integrate it.\r\n\r\n\r\n  [1]: http://incubator.apache.org/shiro/","title":"Servlet filters for abuse prevention? (DoS, spam, etc)","body":"<p><a href=\"http://incubator.apache.org/shiro/\" rel=\"nofollow noreferrer\">Apache Shiro</a> is an interesting security solution (it was called jSecurity before joining Apache.org). I find their source code much easier to understand and tweak for my needs, and also to integrate it.</p>\n"},{"tags":[],"owner":{"account_id":8068554,"reputation":31,"user_id":6081976,"display_name":"Nikolay Milovanov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1458297008,"creation_date":1458297008,"answer_id":36082010,"question_id":3112663,"body_markdown":"[iTransformers DDOS servlet][1] filter is a good example for a servlet filter able to apply Remotely Triggered Black holing https://www.rfc-editor.org/rfc/rfc5635 which is the only real/good and scalable way to defend yourself from a DDOS attacks. \r\n\r\n\r\n  [1]: https://github.com/iTransformers/DDOSServletFIlter","title":"Servlet filters for abuse prevention? (DoS, spam, etc)","body":"<p><a href=\"https://github.com/iTransformers/DDOSServletFIlter\" rel=\"nofollow noreferrer\">iTransformers DDOS servlet</a> filter is a good example for a servlet filter able to apply Remotely Triggered Black holing <a href=\"https://www.rfc-editor.org/rfc/rfc5635\" rel=\"nofollow noreferrer\">https://www.rfc-editor.org/rfc/rfc5635</a> which is the only real/good and scalable way to defend yourself from a DDOS attacks.</p>\n"}],"owner":{"account_id":36514,"reputation":3615,"user_id":104181,"accept_rate":65,"display_name":"sehugg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3939,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1676390515,"creation_date":1277402611,"question_id":3112663,"body_markdown":"I&#39;m looking for a servlet filter library that helps me secure our web service against unauthorized usage and DDoS.\r\n\r\nWe have &quot;authorized clients&quot; for our web service, so ideally the filter would help detect clients that aren&#39;t authorized or behave improperly, or detect multiple people using the same account. Also we need a way to prevent DoS&#39;ing of our various services since we have an open-account policy -- limiting the number of simultaneous connections for a user, etc.\r\n\r\nWe&#39;ve looked at the Tomcat LockOutFilter and such but those are fairly primitive and only prevent against one sort of attack.\r\n\r\nOf course there are many application-specific components of the solution, but I was wondering if someone had written up a general solution as a starting point.\r\n","title":"Servlet filters for abuse prevention? (DoS, spam, etc)","body":"<p>I'm looking for a servlet filter library that helps me secure our web service against unauthorized usage and DDoS.</p>\n\n<p>We have \"authorized clients\" for our web service, so ideally the filter would help detect clients that aren't authorized or behave improperly, or detect multiple people using the same account. Also we need a way to prevent DoS'ing of our various services since we have an open-account policy -- limiting the number of simultaneous connections for a user, etc.</p>\n\n<p>We've looked at the Tomcat LockOutFilter and such but those are fairly primitive and only prevent against one sort of attack.</p>\n\n<p>Of course there are many application-specific components of the solution, but I was wondering if someone had written up a general solution as a starting point.</p>\n"},{"tags":["java","maven","quarkus"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1676403170,"post_id":75450110,"comment_id":133129148,"body_markdown":"For what purpose is `settings-custom.xml` needed? Why do you need something like this in a test?","body":"For what purpose is <code>settings-custom.xml</code> needed? Why do you need something like this in a test?"},{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1676440941,"post_id":75450110,"comment_id":133135138,"body_markdown":"How are you running the tests?","body":"How are you running the tests?"},{"owner":{"account_id":3140002,"reputation":892,"user_id":2655624,"display_name":"johanwannheden"},"score":0,"creation_date":1676491360,"post_id":75450110,"comment_id":133149748,"body_markdown":"The `settings-custom.xml` is not intended for tests. I need a few different Maven settings files on my machine, in one project one settings file, in another project another one.\n\nI&#39;m running the tests directly from Maven, i.e. `mvn verify`, or directly in the IDE.","body":"The <code>settings-custom.xml</code> is not intended for tests. I need a few different Maven settings files on my machine, in one project one settings file, in another project another one.  I&#39;m running the tests directly from Maven, i.e. <code>mvn verify</code>, or directly in the IDE."}],"owner":{"account_id":3140002,"reputation":892,"user_id":2655624,"display_name":"johanwannheden"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676389165,"creation_date":1676389165,"question_id":75450110,"body_markdown":"Running a `QuarkusTest` fails, when Maven settings are set in a user settings file (i.e. `~/.m2/settings-custom.xml` as opposed to a more standard scenario `~/.m2/settings.xml`).\r\n\r\nThis is also the case when a `.mvn/maven.config` file with a reference to the settings file is defined at project level with contents as follows: `-s /Users/johndoe/.m2/settings-custom.xml`.\r\n\r\nAlso, IntelliJ has a setting, which allows setting custom Maven settings files:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/BjuOF.png)](https://i.stack.imgur.com/BjuOF.png)\r\n\r\nThat setting does not seem to work either.\r\n\r\nAny ideas?\r\n\r\nIf I replace `settings.xml` with the contents of `settings-custom.xml`, everything works as expected.","title":"QuarkusTest ignores custom Maven user settings file","body":"<p>Running a <code>QuarkusTest</code> fails, when Maven settings are set in a user settings file (i.e. <code>~/.m2/settings-custom.xml</code> as opposed to a more standard scenario <code>~/.m2/settings.xml</code>).</p>\n<p>This is also the case when a <code>.mvn/maven.config</code> file with a reference to the settings file is defined at project level with contents as follows: <code>-s /Users/johndoe/.m2/settings-custom.xml</code>.</p>\n<p>Also, IntelliJ has a setting, which allows setting custom Maven settings files:</p>\n<p><a href=\"https://i.stack.imgur.com/BjuOF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BjuOF.png\" alt=\"enter image description here\" /></a></p>\n<p>That setting does not seem to work either.</p>\n<p>Any ideas?</p>\n<p>If I replace <code>settings.xml</code> with the contents of <code>settings-custom.xml</code>, everything works as expected.</p>\n"},{"tags":["java","parallel-processing"],"comments":[{"owner":{"account_id":25333394,"reputation":23,"user_id":20415613,"display_name":"feter"},"score":0,"creation_date":1676386556,"post_id":75449506,"comment_id":133123952,"body_markdown":"Update, I see now that sometimes the para_array has two of the same elements after eachothr and the arraysort does not, and othertimes it is the opposite","body":"Update, I see now that sometimes the para_array has two of the same elements after eachothr and the arraysort does not, and othertimes it is the opposite"},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1676386619,"post_id":75449506,"comment_id":133123972,"body_markdown":"Sorting the first `k` elements does not change which elements are in that section of the array.  But if any of the `k` largest elements do not start among the first `k` elements overall, then sorting the whole array (decreasing) *does* change which elements are among the first `k`.  It&#39;s not surprising, then, that you sometimes observe different results from the two approaches you describe.","body":"Sorting the first <code>k</code> elements does not change which elements are in that section of the array.  But if any of the <code>k</code> largest elements do not start among the first <code>k</code> elements overall, then sorting the whole array (decreasing) <i>does</i> change which elements are among the first <code>k</code>.  It&#39;s not surprising, then, that you sometimes observe different results from the two approaches you describe."},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1676386719,"post_id":75449506,"comment_id":133124022,"body_markdown":"Or if that&#39;s not what you&#39;re actually doing then please clarify.","body":"Or if that&#39;s not what you&#39;re actually doing then please clarify."},{"owner":{"account_id":25333394,"reputation":23,"user_id":20415613,"display_name":"feter"},"score":0,"creation_date":1676386998,"post_id":75449506,"comment_id":133124133,"body_markdown":"@JohnBollinger im not sure if i understood you, but i do not need to sort the whole array just the first k, which is done by the for loop w/o threads, then when wanting to find if the rest of array has larger number that the ones in the k-first we let the threads just go thorugh their segment and checks and the just insert it to the k-first","body":"@JohnBollinger im not sure if i understood you, but i do not need to sort the whole array just the first k, which is done by the for loop w/o threads, then when wanting to find if the rest of array has larger number that the ones in the k-first we let the threads just go thorugh their segment and checks and the just insert it to the k-first"},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1676387208,"post_id":75449506,"comment_id":133124204,"body_markdown":"My comment is about how you prepare the other array for comparison: &quot;I then sort the other array with `array.sort()` and make it in decreasing order&quot;.  As written, that seems to say that you sort the *whole* other array (more than `k` elements), which is the wrong thing to do for your comparison if the other sort (was supposed to have) sorted only the first `k` elements of its array.","body":"My comment is about how you prepare the other array for comparison: &quot;I then sort the other array with <code>array.sort()</code> and make it in decreasing order&quot;.  As written, that seems to say that you sort the <i>whole</i> other array (more than <code>k</code> elements), which is the wrong thing to do for your comparison if the other sort (was supposed to have) sorted only the first <code>k</code> elements of its array."},{"owner":{"account_id":25333394,"reputation":23,"user_id":20415613,"display_name":"feter"},"score":0,"creation_date":1676387601,"post_id":75449506,"comment_id":133124346,"body_markdown":"@JohnBollinger im sorry for misunderstanding, the way i do the arraysort is i first make every number in the array negativ, after that i use array.sort(arraysort) after that i make every number positive. But if the whole array is sorted, shouldent the k first also be sorted correctly?","body":"@JohnBollinger im sorry for misunderstanding, the way i do the arraysort is i first make every number in the array negativ, after that i use array.sort(arraysort) after that i make every number positive. But if the whole array is sorted, shouldent the k first also be sorted correctly?"},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1676387919,"post_id":75449506,"comment_id":133124442,"body_markdown":"Yes, that would make the first `k` sorted correctly relative to each other, but you&#39;re missing the point.  The first `k` of the result are likely not *the same* first `k`. Consider a trivial example: The initial array is `{ 2, 7, 3 }` and `k` is 1.  If you sort just the first 1 element of that, by any correct algorithm, then the result is `{ 2, 7, 3 }`.  If you sort the the whole array then the result is `{ 7, 3, 2 }`.  The first `k` (1) elements of these two results do not agree.","body":"Yes, that would make the first <code>k</code> sorted correctly relative to each other, but you&#39;re missing the point.  The first <code>k</code> of the result are likely not <i>the same</i> first <code>k</code>. Consider a trivial example: The initial array is <code>{ 2, 7, 3 }</code> and <code>k</code> is 1.  If you sort just the first 1 element of that, by any correct algorithm, then the result is <code>{ 2, 7, 3 }</code>.  If you sort the the whole array then the result is <code>{ 7, 3, 2 }</code>.  The first <code>k</code> (1) elements of these two results do not agree."},{"owner":{"account_id":25333394,"reputation":23,"user_id":20415613,"display_name":"feter"},"score":0,"creation_date":1676388515,"post_id":75449506,"comment_id":133124652,"body_markdown":"&#180;The first k of the result are likely not the same first k&#180; what you mean with this, are you now comparing the para_array with arraysort, if so shouldent be if the numbers and k is the same for both, if you talk about the segment of each thread, the first k are not the same probably, but why is that important, they will go through the whole segment and just compare it to the k of the para_array. i see that i have messed up the array names in the code which would make this confusing, when creating a thread we should pass in para_array","body":"&#180;The first k of the result are likely not the same first k&#180; what you mean with this, are you now comparing the para_array with arraysort, if so shouldent be if the numbers and k is the same for both, if you talk about the segment of each thread, the first k are not the same probably, but why is that important, they will go through the whole segment and just compare it to the k of the para_array. i see that i have messed up the array names in the code which would make this confusing, when creating a thread we should pass in para_array"},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1676388527,"post_id":75449506,"comment_id":133124656,"body_markdown":"But even if you corrected your checking strategy, your parallel sort is not correct. Consider the serial version: each iteration of the outer loop depends on the invariant that the leading `i` elements of the array are already in sorted order relative to each other. That is achieved by the in-order operation of the previous `i-1` outer-loop iterations.  If you just split the outer-loop iterations among multiple threads, you do not ensure the needed order of those outer-loop iterations.  If you add enough synchronization to ensure that, then it makes the sort effectively serial.","body":"But even if you corrected your checking strategy, your parallel sort is not correct. Consider the serial version: each iteration of the outer loop depends on the invariant that the leading <code>i</code> elements of the array are already in sorted order relative to each other. That is achieved by the in-order operation of the previous <code>i-1</code> outer-loop iterations.  If you just split the outer-loop iterations among multiple threads, you do not ensure the needed order of those outer-loop iterations.  If you add enough synchronization to ensure that, then it makes the sort effectively serial."},{"owner":{"account_id":13179806,"reputation":91,"user_id":21197077,"display_name":"gneginskiy"},"score":1,"creation_date":1676388676,"post_id":75449506,"comment_id":133124728,"body_markdown":"i would consider writing parallel mergesort algorithm instead. divide &amp; conquer algorithms are easier to split into more or less independent tasks for threads.","body":"i would consider writing parallel mergesort algorithm instead. divide &amp; conquer algorithms are easier to split into more or less independent tasks for threads."},{"owner":{"account_id":25333394,"reputation":23,"user_id":20415613,"display_name":"feter"},"score":0,"creation_date":1676388887,"post_id":75449506,"comment_id":133124811,"body_markdown":"Thank you both for the suggestions, i am learning about parallel and am just trying my best to try it here, but try the others also","body":"Thank you both for the suggestions, i am learning about parallel and am just trying my best to try it here, but try the others also"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1676388897,"post_id":75449506,"comment_id":133124816,"body_markdown":"Letting each thread synchronize on a different object has no effect at all. This is broken.","body":"Letting each thread synchronize on a different object has no effect at all. This is broken."},{"owner":{"account_id":25333394,"reputation":23,"user_id":20415613,"display_name":"feter"},"score":0,"creation_date":1676389075,"post_id":75449506,"comment_id":133124890,"body_markdown":"@Holger I thought you had to synchronize when trying to change a value everyone has access to?","body":"@Holger I thought you had to synchronize when trying to change a value everyone has access to?"},{"owner":{"account_id":25333394,"reputation":23,"user_id":20415613,"display_name":"feter"},"score":0,"creation_date":1676389357,"post_id":75449506,"comment_id":133124976,"body_markdown":"@Holger could you help me figure out why this wont work.","body":"@Holger could you help me figure out why this wont work."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1676389692,"post_id":75449506,"comment_id":133125098,"body_markdown":"I already told you. Your code is not thread safe. There might be more issues, but this code is too complicated to see everything at a glance, especially as it is incomplete. It’s not a useful approach anyway. Read about Quicksort or MergeSort. These are algorithms you can understand and have a natural way of extending them to parallel processing.","body":"I already told you. Your code is not thread safe. There might be more issues, but this code is too complicated to see everything at a glance, especially as it is incomplete. It’s not a useful approach anyway. Read about Quicksort or MergeSort. These are algorithms you can understand and have a natural way of extending them to parallel processing."}],"owner":{"account_id":25333394,"reputation":23,"user_id":20415613,"display_name":"feter"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676388543,"creation_date":1676386049,"question_id":75449506,"body_markdown":"I am trying to insertion-sort (some modification) an array using threads. My problem is that sometimes after I sort, I get that `para_array`  and `arraysort` are equal, sometimes not. The checking where the numbers are not equal I get something like this:\r\n \r\n     99940 and 99941\r\n     99938 and 99940\r\n     99935 and 99938\r\n     99934 and 99935\r\n     99932 and 99934\r\n\r\nwhere `para_array` has the left values and `arraysort` has the right\r\n\r\n\r\nI fill both the array before sorting with random(7363), one random for each so they have the same values.\r\n\r\nI have to sort the `k` first numbers of the array, so what I do is I serially sort the `k` first like this:\r\n\r\n     //sort the k first wher 0 is largest number and k-1 is lowest\r\n     for (int i = 1; i &lt; k; i++) {\r\n          int check = para_array[i];\r\n          int prev = i - 1;\r\n          while (prev &gt;= 0 &amp;&amp; para_array[prev] &lt; check) {\r\n            para_array[prev + 1] = para_array[prev];\r\n            previous_element--;\r\n          }\r\n          para_array[prev + 1] = check;\r\n        }\r\n\r\nI then start the threads. I have a list of threads to run:\r\n      \r\n      for (Thread t : threads) {\r\n        t.start();\r\n      }\r\n\r\n\r\nMy thread:\r\n\r\n     public SortingThread(int[] arr, int start, int end, int k, Object lock) {\r\n      this.arr = arr;\r\n      this.start = start;\r\n      this.end = end;\r\n      this.k = k;\r\n      this.lock = lock;\r\n    }\r\n    \r\n    @Override\r\n    public void run() {\r\n      for (int i = start; i &lt; end; i++) {\r\n        //whill try to find a larger value in its own segment than k-2 if found sort it\r\n        synchronized (lock) {\r\n          if (arr[i] &gt; arr[k - 1]) {\r\n            int set_correct = arr[i];\r\n            int j = k - 2;\r\n            while (j &gt;= 0 &amp;&amp; arr[j] &lt; set_correct) {\r\n              \r\n              arr[j + 1] = arr[j];\r\n              \r\n              j--;\r\n            }\r\n            \r\n            arr[j + 1] = set_correct;\r\n            }\r\n          }\r\n        \r\n      }\r\n\r\n    }\r\n\r\n\r\nThe threads are created like this:\r\n    \r\n      // Create and start all the threads\r\n      for (int i = 0; i &lt; number_of_cores; i++) {\r\n        int start = i * portionSize;\r\n        int end = Math.min((i + 1) * portionSize, n);\r\n  \r\n        threads.add(new SortingThread(para_array, start, end, k,locks.get(i)));\r\n      }\r\n\r\n\r\nI then sort the other array with `array.sort()` and make it in decreasing order, then I check the *k* first values for both.\r\n","title":"Parallel sort and array sort not giving equal output","body":"<p>I am trying to insertion-sort (some modification) an array using threads. My problem is that sometimes after I sort, I get that <code>para_array</code>  and <code>arraysort</code> are equal, sometimes not. The checking where the numbers are not equal I get something like this:</p>\n<pre><code> 99940 and 99941\n 99938 and 99940\n 99935 and 99938\n 99934 and 99935\n 99932 and 99934\n</code></pre>\n<p>where <code>para_array</code> has the left values and <code>arraysort</code> has the right</p>\n<p>I fill both the array before sorting with random(7363), one random for each so they have the same values.</p>\n<p>I have to sort the <code>k</code> first numbers of the array, so what I do is I serially sort the <code>k</code> first like this:</p>\n<pre><code> //sort the k first wher 0 is largest number and k-1 is lowest\n for (int i = 1; i &lt; k; i++) {\n      int check = para_array[i];\n      int prev = i - 1;\n      while (prev &gt;= 0 &amp;&amp; para_array[prev] &lt; check) {\n        para_array[prev + 1] = para_array[prev];\n        previous_element--;\n      }\n      para_array[prev + 1] = check;\n    }\n</code></pre>\n<p>I then start the threads. I have a list of threads to run:</p>\n<pre><code>  for (Thread t : threads) {\n    t.start();\n  }\n</code></pre>\n<p>My thread:</p>\n<pre><code> public SortingThread(int[] arr, int start, int end, int k, Object lock) {\n  this.arr = arr;\n  this.start = start;\n  this.end = end;\n  this.k = k;\n  this.lock = lock;\n}\n\n@Override\npublic void run() {\n  for (int i = start; i &lt; end; i++) {\n    //whill try to find a larger value in its own segment than k-2 if found sort it\n    synchronized (lock) {\n      if (arr[i] &gt; arr[k - 1]) {\n        int set_correct = arr[i];\n        int j = k - 2;\n        while (j &gt;= 0 &amp;&amp; arr[j] &lt; set_correct) {\n          \n          arr[j + 1] = arr[j];\n          \n          j--;\n        }\n        \n        arr[j + 1] = set_correct;\n        }\n      }\n    \n  }\n\n}\n</code></pre>\n<p>The threads are created like this:</p>\n<pre><code>  // Create and start all the threads\n  for (int i = 0; i &lt; number_of_cores; i++) {\n    int start = i * portionSize;\n    int end = Math.min((i + 1) * portionSize, n);\n\n    threads.add(new SortingThread(para_array, start, end, k,locks.get(i)));\n  }\n</code></pre>\n<p>I then sort the other array with <code>array.sort()</code> and make it in decreasing order, then I check the <em>k</em> first values for both.</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1676385951,"post_id":75449391,"comment_id":133123757,"body_markdown":"`the used heap memory drops back to normal but the unused/free heap space remains 1GB.` This sounds normal to me.  In garbage collected systems, the GC doesn&#39;t run until it&#39;s reasonable to do so.  High load may delay the GC and lack of memory pressure might delay it as well.  It&#39;s normal to see the memory usage go way up, then drop back down when the system gets around to GC.  As long as you&#39;re not throwing errors you&#39;re probably ok.","body":"<code>the used heap memory drops back to normal but the unused&#47;free heap space remains 1GB.</code> This sounds normal to me.  In garbage collected systems, the GC doesn&#39;t run until it&#39;s reasonable to do so.  High load may delay the GC and lack of memory pressure might delay it as well.  It&#39;s normal to see the memory usage go way up, then drop back down when the system gets around to GC.  As long as you&#39;re not throwing errors you&#39;re probably ok."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1676386135,"post_id":75449391,"comment_id":133123822,"body_markdown":"Which jvm are you using? [this](https://thomas.preissler.me/blog/2021/05/02/release-memory-back-to-the-os-with-java-11) suggests some options, but I&#39;m not sure if they&#39;re relevant for later JVMs","body":"Which jvm are you using? <a href=\"https://thomas.preissler.me/blog/2021/05/02/release-memory-back-to-the-os-with-java-11\" rel=\"nofollow noreferrer\">this</a> suggests some options, but I&#39;m not sure if they&#39;re relevant for later JVMs"},{"owner":{"account_id":4735383,"reputation":1567,"user_id":3829912,"accept_rate":18,"display_name":"Harpreet"},"score":0,"creation_date":1676388227,"post_id":75449391,"comment_id":133124549,"body_markdown":"I am using open jdk 11","body":"I am using open jdk 11"}],"answers":[{"tags":[],"owner":{"account_id":374094,"reputation":6654,"user_id":724109,"accept_rate":100,"display_name":"Avishek Bhattacharya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676388520,"creation_date":1676388231,"answer_id":75449954,"question_id":75449391,"body_markdown":"The used heap will not return if the `-Xms` is high. `-Xms` essentially overrides the FreeRation. Now there are other factors to consider, in the case of parallel GC you can&#39;t shrink the heap as parallel GC doesn&#39;t allow that.\r\n\r\nAlso, JVM can only relinquish the memory after the fullGC if parallelGC is not used.\r\n\r\nSo essentially, not much can be done here. The JVM doesn&#39;t relinquish the memory to OS to avoid recreating the memory. Memory allocation is expensive work, so JVM will hold on to that memory for some time and as the memory management is controlled by Java, it is not always possible to force things here. \r\n\r\nOne downside of reducing heap size would be, it will take time for Java to recreate the memory space over and over with incoming requests. So the clients will always see some higher latency. However, if the memory space is already created, the next stream of clients will see lower latency so essentially your amortized performance will increase. ","title":"Java not releasing unused heap memory","body":"<p>The used heap will not return if the <code>-Xms</code> is high. <code>-Xms</code> essentially overrides the FreeRation. Now there are other factors to consider, in the case of parallel GC you can't shrink the heap as parallel GC doesn't allow that.</p>\n<p>Also, JVM can only relinquish the memory after the fullGC if parallelGC is not used.</p>\n<p>So essentially, not much can be done here. The JVM doesn't relinquish the memory to OS to avoid recreating the memory. Memory allocation is expensive work, so JVM will hold on to that memory for some time and as the memory management is controlled by Java, it is not always possible to force things here.</p>\n<p>One downside of reducing heap size would be, it will take time for Java to recreate the memory space over and over with incoming requests. So the clients will always see some higher latency. However, if the memory space is already created, the next stream of clients will see lower latency so essentially your amortized performance will increase.</p>\n"}],"owner":{"account_id":4735383,"reputation":1567,"user_id":3829912,"accept_rate":18,"display_name":"Harpreet"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":283,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676388520,"creation_date":1676385552,"question_id":75449391,"body_markdown":"I am facing an issue where my Java application heap increases with an increased no. of requests to the application but then it does not release even the unused heap memory.\r\n\r\nHere is the description:\r\n- My java application starts with a heap memory of 200MB out of which around 100MB is in use.\r\n- As the no. of requests increases, the heap memory usage goes up to 1GB.\r\n- Once the requests processing is finished, the used heap memory drops back to normal but the unused/free heap space remains 1GB.\r\n\r\nI have tried to use *-XX:-ShrinkHeapInSteps, -XX:MinHeapFreeRatio* and *-XX:MaxHeapFreeRatio* JVM arguments but was not able to solve this.\r\n\r\n**Note:** If I try to run the Garbage Collector manually then it lowers the unused heap memory also.\r\n\r\nPlease suggest how we can lower the unused heap memory.","title":"Java not releasing unused heap memory","body":"<p>I am facing an issue where my Java application heap increases with an increased no. of requests to the application but then it does not release even the unused heap memory.</p>\n<p>Here is the description:</p>\n<ul>\n<li>My java application starts with a heap memory of 200MB out of which around 100MB is in use.</li>\n<li>As the no. of requests increases, the heap memory usage goes up to 1GB.</li>\n<li>Once the requests processing is finished, the used heap memory drops back to normal but the unused/free heap space remains 1GB.</li>\n</ul>\n<p>I have tried to use <em>-XX:-ShrinkHeapInSteps, -XX:MinHeapFreeRatio</em> and <em>-XX:MaxHeapFreeRatio</em> JVM arguments but was not able to solve this.</p>\n<p><strong>Note:</strong> If I try to run the Garbage Collector manually then it lowers the unused heap memory also.</p>\n<p>Please suggest how we can lower the unused heap memory.</p>\n"},{"tags":["java","spring","mongodb","jpa","spring-webflux"],"comments":[{"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"score":0,"creation_date":1676388857,"post_id":75449974,"comment_id":133124790,"body_markdown":"you forgot to subscribe()","body":"you forgot to subscribe()"},{"owner":{"account_id":267723,"reputation":351,"user_id":556070,"accept_rate":100,"display_name":"Nix"},"score":0,"creation_date":1676391503,"post_id":75449974,"comment_id":133125741,"body_markdown":"If I .suscribe() after the map I get a reactor.core.Exceptions$ErrorCallbackNotImplemented: io.mongock.driver.api.lock.LockCheckException","body":"If I .suscribe() after the map I get a reactor.core.Exceptions$ErrorCallbackNotImplemented: io.mongock.driver.api.lock.LockCheckException"},{"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"score":0,"creation_date":1676391634,"post_id":75449974,"comment_id":133125784,"body_markdown":"check this https://docs.mongock.io/v5/driver/mongodb-reactive/index.html","body":"check this <a href=\"https://docs.mongock.io/v5/driver/mongodb-reactive/index.html\" rel=\"nofollow noreferrer\">docs.mongock.io/v5/driver/mongodb-reactive/index.html</a>"}],"owner":{"account_id":267723,"reputation":351,"user_id":556070,"accept_rate":100,"display_name":"Nix"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676388353,"creation_date":1676388353,"question_id":75449974,"body_markdown":"In a mongok script I want to update the value of an attribute and save the change, in the project I currently only have a ReactiveMongoRepository\r\n\r\nI&#39;m sure that I&#39;m missing something stupid but I can&#39;t figure it out\r\n\r\nHere are my simplified classes\r\n\r\nRepository : \r\n\r\n    @Repository\r\n    public interface CalendarMongoRepository extends ReactiveMongoRepository&lt;CalendarMongo, CalendarMongoId&gt; {\r\n        //Some methods not used here\r\n    }\r\n\r\nPOJO : \r\n\r\n    @Document(&quot;calendars&quot;)\r\n    public class CalendarMongo {\r\n    \r\n        @Id\r\n        private CalendarMongoId id;\r\n    \r\n        private String calendar;\r\n\r\n        public String getCalendar() {\r\n            return calendar;\r\n        }\r\n    \r\n        public CalendarMongo setCalendar(String calendar) {\r\n            this.calendar = calendar;\r\n            return this;\r\n        }\r\n    \r\n        //Other getters setters and other attributes\r\n    \r\n    }\r\n\r\nPOJO ID : \r\n\r\n    public class CalendarMongoId {\r\n    \r\n        @Indexed(name = &quot;branchCode_index&quot;)\r\n        private BranchEnum branchCode;\r\n    \r\n        //Getters setters and other attributes\r\n    }\r\n\r\nMongok Script :\r\n\r\n    @Slf4j\r\n    @ChangeUnit(id = &quot;SetupAttribute&quot;, order = &quot;7&quot;, author = &quot;mongock&quot;)\r\n    public class DatabaseChangeV007SetupAttribute {\r\n    \r\n        private final CalendarMongoRepository calendarMongoRepository;\r\n    \r\n        public DatabaseChangeV007SetupFieldType(CalendarMongoRepository calendarMongoRepository) {\r\n            this.calendarMongoRepository = calendarMongoRepository;\r\n        }\r\n    \r\n        @Execution\r\n        public void migrationMethod() {\r\n            calendarMongoRepository.findAll()\r\n                               .map(calendarMongo -&gt; calendarMongo.setCalendar(&quot;AA&quot;))\r\n                               .map(calendarMongoRepository::save);\r\n    \r\n        }\r\n    \r\n        @RollbackExecution\r\n        public void rollback() {\r\n            log.error(&quot;Rollback invoked&quot;);\r\n        }\r\n    \r\n    }\r\n\r\n\r\nWhen I launch my project this script just does nothing, I do not see the change in my database. I&#39;m sure the problem is not the structure of the script because of other tests.\r\n\r\nI tried to use doOnNext but it&#39;s not the way to do.\r\n\r\nI tried to use flatMap but I didn&#39;t manage to make it work either.\r\n\r\nDo you have an idea ? \r\nThank you in advance !","title":"Changing the value of an attribute and saving it using ReactiveMongoRepository","body":"<p>In a mongok script I want to update the value of an attribute and save the change, in the project I currently only have a ReactiveMongoRepository</p>\n<p>I'm sure that I'm missing something stupid but I can't figure it out</p>\n<p>Here are my simplified classes</p>\n<p>Repository :</p>\n<pre><code>@Repository\npublic interface CalendarMongoRepository extends ReactiveMongoRepository&lt;CalendarMongo, CalendarMongoId&gt; {\n    //Some methods not used here\n}\n</code></pre>\n<p>POJO :</p>\n<pre><code>@Document(&quot;calendars&quot;)\npublic class CalendarMongo {\n\n    @Id\n    private CalendarMongoId id;\n\n    private String calendar;\n\n    public String getCalendar() {\n        return calendar;\n    }\n\n    public CalendarMongo setCalendar(String calendar) {\n        this.calendar = calendar;\n        return this;\n    }\n\n    //Other getters setters and other attributes\n\n}\n</code></pre>\n<p>POJO ID :</p>\n<pre><code>public class CalendarMongoId {\n\n    @Indexed(name = &quot;branchCode_index&quot;)\n    private BranchEnum branchCode;\n\n    //Getters setters and other attributes\n}\n</code></pre>\n<p>Mongok Script :</p>\n<pre><code>@Slf4j\n@ChangeUnit(id = &quot;SetupAttribute&quot;, order = &quot;7&quot;, author = &quot;mongock&quot;)\npublic class DatabaseChangeV007SetupAttribute {\n\n    private final CalendarMongoRepository calendarMongoRepository;\n\n    public DatabaseChangeV007SetupFieldType(CalendarMongoRepository calendarMongoRepository) {\n        this.calendarMongoRepository = calendarMongoRepository;\n    }\n\n    @Execution\n    public void migrationMethod() {\n        calendarMongoRepository.findAll()\n                           .map(calendarMongo -&gt; calendarMongo.setCalendar(&quot;AA&quot;))\n                           .map(calendarMongoRepository::save);\n\n    }\n\n    @RollbackExecution\n    public void rollback() {\n        log.error(&quot;Rollback invoked&quot;);\n    }\n\n}\n</code></pre>\n<p>When I launch my project this script just does nothing, I do not see the change in my database. I'm sure the problem is not the structure of the script because of other tests.</p>\n<p>I tried to use doOnNext but it's not the way to do.</p>\n<p>I tried to use flatMap but I didn't manage to make it work either.</p>\n<p>Do you have an idea ?\nThank you in advance !</p>\n"},{"tags":["java","sorting","arraylist","return","nested-for-loop"],"answers":[{"tags":[],"owner":{"account_id":11988367,"reputation":540,"user_id":8772274,"display_name":"Nahuel Giani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676383914,"creation_date":1676383914,"answer_id":75449056,"question_id":75448823,"body_markdown":"You are not telling to Java newList array&#39;s size, in that case you cannot use *.add* with index.\r\n\r\nYou have 3 options:\r\n\r\n1) Change newList to a array of String&#39;s\r\n\r\n&gt; \t    String[] newList = new String[x-size];\r\n\r\n\r\n2) Use the .sort method of ArrayList.\r\n\r\n\r\n&gt; \t    wordList.sort((o1, o2) -&gt; o1.compareTo(o2));\r\n\r\n\r\n3) Move the arrayList values to a treeSet (which use Comparable and is sorted)\r\n\r\n&gt; \t    Set&lt;String&gt; sortedSet = new TreeSet&lt;&gt;();\r\n&gt; \t    \r\n&gt; \t    for (String word : wordList) {\t\t\t\r\n&gt; \t         sortedSet.add(word);\r\n&gt; \t    }","title":"Error with the return of a sorting words alphabetically method. Probably a logical error?","body":"<p>You are not telling to Java newList array's size, in that case you cannot use <em>.add</em> with index.</p>\n<p>You have 3 options:</p>\n<ol>\n<li>Change newList to a array of String's</li>\n</ol>\n<blockquote>\n<pre><code>  String[] newList = new String[x-size];\n</code></pre>\n</blockquote>\n<ol start=\"2\">\n<li>Use the .sort method of ArrayList.</li>\n</ol>\n<blockquote>\n<pre><code>  wordList.sort((o1, o2) -&gt; o1.compareTo(o2));\n</code></pre>\n</blockquote>\n<ol start=\"3\">\n<li>Move the arrayList values to a treeSet (which use Comparable and is sorted)</li>\n</ol>\n<blockquote>\n<pre><code>  Set&lt;String&gt; sortedSet = new TreeSet&lt;&gt;();\n  \n  for (String word : wordList) {          \n       sortedSet.add(word);\n  }\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":18089384,"reputation":79,"user_id":13149404,"display_name":"Bujaq"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676387544,"creation_date":1676387544,"answer_id":75449818,"question_id":75448823,"body_markdown":"use **==0** instead of **&lt;0**   :\r\n`         if((wordList.get(outter)).compareTo(wordList.get(inner))&lt;0 )`\r\ncompareTo returns number of common characters, fo You shouldn&#39;t get -1 \r\n\r\n\r\nCorrect code :\r\n\r\n    public ArrayList&lt;String&gt; sortWords(ArrayList&lt;String&gt; wordList) { // changed static void\r\n        // TO DO #1: Sort the words in wordList in alphabetical order.\r\n        ArrayList&lt;String&gt; newList = new ArrayList&lt;String&gt;();\r\n        for(int outter = 0; outter&lt;wordList.size(); outter ++){ // takes 1 word in the list at a time\r\n          for(int inner = 0; inner&lt;wordList.size(); inner ++){ // compares it to all the other words in the list\r\n             if((wordList.get(outter)).compareTo(wordList.get(inner))==0 ){ \r\n            // return i;\r\n               newList.add(inner,wordList.get(outter));// adds current word to index of the inner loop\r\n               continue;\r\n           }// end of if\r\n       } // end of inner\r\n        }// end outter\r\n           return newList;\r\n        \r\n      }**","title":"Error with the return of a sorting words alphabetically method. Probably a logical error?","body":"<p>use <strong>==0</strong> instead of <strong>&lt;0</strong>   :\n<code>         if((wordList.get(outter)).compareTo(wordList.get(inner))&lt;0 )</code>\ncompareTo returns number of common characters, fo You shouldn't get -1</p>\n<p>Correct code :</p>\n<pre><code>public ArrayList&lt;String&gt; sortWords(ArrayList&lt;String&gt; wordList) { // changed static void\n    // TO DO #1: Sort the words in wordList in alphabetical order.\n    ArrayList&lt;String&gt; newList = new ArrayList&lt;String&gt;();\n    for(int outter = 0; outter&lt;wordList.size(); outter ++){ // takes 1 word in the list at a time\n      for(int inner = 0; inner&lt;wordList.size(); inner ++){ // compares it to all the other words in the list\n         if((wordList.get(outter)).compareTo(wordList.get(inner))==0 ){ \n        // return i;\n           newList.add(inner,wordList.get(outter));// adds current word to index of the inner loop\n           continue;\n       }// end of if\n   } // end of inner\n    }// end outter\n       return newList;\n    \n  }**\n</code></pre>\n"}],"owner":{"account_id":27779034,"reputation":1,"user_id":21207751,"display_name":"N3wb1e"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1676387544,"creation_date":1676382756,"question_id":75448823,"body_markdown":"I have a method thats supposted to go through an ArrayList of words and put them in order alphabetically using .compareTo(). However I get this message when the program is run\r\n```\r\nException message: java.lang.IndexOutOfBoundsException: Index: 3, Size: 0\r\n\t at java.base/java.util.ArrayList.rangeCheckForAdd(Unknown Source)\r\n\t at java.base/java.util.ArrayList.add(Unknown Source)\r\n\t at ListSorter.sortWords(ListSorter.java:19) \r\n\t at MyConsole.main(MyConsole.java:11) \r\n```\r\nI need it to return a list of words sorted alphabetically.\r\nIve tried taking out &quot;newList&quot; and replacing where you see newList with wordList but this message appears\r\n```\r\nException message: java.lang.OutOfMemoryError: Java heap space\r\n\t at java.base/java.util.Arrays.copyOf(Unknown Source)\r\n\t at java.base/java.util.ArrayList.grow(Unknown Source)\r\n\t at java.base/java.util.ArrayList.grow(Unknown Source)\r\n\t at java.base/java.util.ArrayList.add(Unknown Source)\r\n\t at ListSorter.sortWords(ListSorter.java:19)\r\n\t at MyConsole.main(MyConsole.java:11)\r\n```\r\nAny suggestions?\r\n\r\n**The method in a class called ListSorter**\r\n```\r\npublic ArrayList&lt;String&gt; sortWords(ArrayList&lt;String&gt; wordList) { // changed static void\r\n    // TO DO #1: Sort the words in wordList in alphabetical order.\r\n    ArrayList&lt;String&gt; newList = new ArrayList&lt;String&gt;();\r\n    for(int outter = 0; outter&lt;wordList.size(); outter ++){ // takes 1 word in the list at a time\r\n      for(int inner = 0; inner&lt;wordList.size(); inner ++){ // compares it to all the other words in the list\r\n         if((wordList.get(outter)).compareTo(wordList.get(inner))&lt;0 ){ \r\n        // return i;\r\n           newList.add(inner,wordList.get(outter));// adds current word to index of the inner loop\r\n       }// end of if\r\n   } // end of inner\r\n    }// end outter\r\n       return newList;\r\n    \r\n  }\r\n```\r\n\r\n**Whats currently in MyConsole**\r\n```\r\n ArrayList&lt;String&gt; wordList = FileReader.getStringData(&quot;words.txt&quot;);\r\nListSorter newList = new ListSorter();\r\n   // newList.setTextList(wordList);\r\n    // TO DO #2: Call the sortWords() method and print the updated list.\r\nSystem.out.print(newList.sortWords(wordList));\r\n//newList.sortWords(wordList);\r\n```","title":"Error with the return of a sorting words alphabetically method. Probably a logical error?","body":"<p>I have a method thats supposted to go through an ArrayList of words and put them in order alphabetically using .compareTo(). However I get this message when the program is run</p>\n<pre><code>Exception message: java.lang.IndexOutOfBoundsException: Index: 3, Size: 0\n     at java.base/java.util.ArrayList.rangeCheckForAdd(Unknown Source)\n     at java.base/java.util.ArrayList.add(Unknown Source)\n     at ListSorter.sortWords(ListSorter.java:19) \n     at MyConsole.main(MyConsole.java:11) \n</code></pre>\n<p>I need it to return a list of words sorted alphabetically.\nIve tried taking out &quot;newList&quot; and replacing where you see newList with wordList but this message appears</p>\n<pre><code>Exception message: java.lang.OutOfMemoryError: Java heap space\n     at java.base/java.util.Arrays.copyOf(Unknown Source)\n     at java.base/java.util.ArrayList.grow(Unknown Source)\n     at java.base/java.util.ArrayList.grow(Unknown Source)\n     at java.base/java.util.ArrayList.add(Unknown Source)\n     at ListSorter.sortWords(ListSorter.java:19)\n     at MyConsole.main(MyConsole.java:11)\n</code></pre>\n<p>Any suggestions?</p>\n<p><strong>The method in a class called ListSorter</strong></p>\n<pre><code>public ArrayList&lt;String&gt; sortWords(ArrayList&lt;String&gt; wordList) { // changed static void\n    // TO DO #1: Sort the words in wordList in alphabetical order.\n    ArrayList&lt;String&gt; newList = new ArrayList&lt;String&gt;();\n    for(int outter = 0; outter&lt;wordList.size(); outter ++){ // takes 1 word in the list at a time\n      for(int inner = 0; inner&lt;wordList.size(); inner ++){ // compares it to all the other words in the list\n         if((wordList.get(outter)).compareTo(wordList.get(inner))&lt;0 ){ \n        // return i;\n           newList.add(inner,wordList.get(outter));// adds current word to index of the inner loop\n       }// end of if\n   } // end of inner\n    }// end outter\n       return newList;\n    \n  }\n</code></pre>\n<p><strong>Whats currently in MyConsole</strong></p>\n<pre><code> ArrayList&lt;String&gt; wordList = FileReader.getStringData(&quot;words.txt&quot;);\nListSorter newList = new ListSorter();\n   // newList.setTextList(wordList);\n    // TO DO #2: Call the sortWords() method and print the updated list.\nSystem.out.print(newList.sortWords(wordList));\n//newList.sortWords(wordList);\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1676387394,"post_id":75449744,"comment_id":133124273,"body_markdown":"Take care of java naming conventions. variable names should start with lower case character and all names should be camelCase not snake_case. And also you should indent your code properbly. Your code is very hard to read.","body":"Take care of java naming conventions. variable names should start with lower case character and all names should be camelCase not snake_case. And also you should indent your code properbly. Your code is very hard to read."}],"owner":{"account_id":23533465,"reputation":15,"user_id":17578737,"display_name":"ramesh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1676387307,"answer_count":0,"score":0,"last_activity_date":1676387502,"creation_date":1676387196,"question_id":75449744,"body_markdown":"Below is the java code which is used in an email with an excel attachment, but this excel file is getting from another class. while running this send email class in eclipse mail sent successfully but when I run through the batch file getting an error as cannot find the symbol in the lone &quot;String difference_path =Difference_directory.getLatestFilePath();&quot;.\r\n\r\n    public class Send_email{\r\n\tstatic String status=null;\r\n\tpublic static Properties CONFIG = null;\r\n\t\r\n    public static void main(String[] args) throws Exception {\r\n    \t  \r\n\t\tString difference_path = Difference_directory.getLatestFilePath();\r\n\t\tSystem.out.println(difference_path);\r\n\t\tProperties props = new Properties();\r\n\t\tprops.put(&quot;mail.transport.protocol&quot;, &quot;smtp&quot;);\r\n    \tprops.put(&quot;mail.smtp.port&quot;, 587); \r\n    \tprops.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n    \tprops.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n\t\t\r\n\t\t//Loading Config file\r\n\tProperties CONFIG = new Properties();\r\n\tFileInputStream fs = new FileInputStream(System.getProperty(&quot;user.dir&quot;)+&quot;\\\\src\\\\main\\\\resource\\\\config2.properties&quot;);\r\n\t\r\n\t\tCONFIG.load(fs);\r\n\t\tString FROM= CONFIG.getProperty(&quot;FROM&quot;);\r\n\t\tString FROMNAME= CONFIG.getProperty(&quot;FROMNAME&quot;);\r\n\t\tString SMTP_USERNAME= CONFIG.getProperty(&quot;SMTP_USERNAME&quot;);\r\n\t\tString SMTP_PASSWORD= CONFIG.getProperty(&quot;SMTP_PASSWORD&quot;);\r\n\t\tString HOST= CONFIG.getProperty(&quot;HOST&quot;);\r\n\t\tString TO=&quot;&quot;;\r\n\t\t\r\n\t\t// folder path for execution report\r\n\t\t \r\n        final String FOLDER_PATH = &quot;C:\\\\Users\\\\rramesh\\\\eclipse-workspace\\\\Financial_API\\\\test-output&quot;;\r\n\t\tgetStatus(FOLDER_PATH + &quot;/testng-results.xml&quot;);\r\n\t\t\r\n\t\t\r\n\t\tif(status.equals(&quot;PASSED&quot;)){\r\n\t\t\tTO=CONFIG.getProperty(&quot;PassMail&quot;);\r\n\t\t}else if(status.equals(&quot;FAILED&quot;)){\r\n\t\t\tTO=CONFIG.getProperty(&quot;FailMail&quot;);\r\n\t\t}\r\n\t\t\r\n\t\t   Session session = Session.getDefaultInstance(props);\r\n\t\t\tMessage message = new MimeMessage(session);\r\n\t\t\tmessage.setFrom(new InternetAddress(FROM,FROMNAME));\r\n\t\t\tmessage.setRecipients(Message.RecipientType.TO,\r\n\t\t\t\t\tInternetAddress.parse(TO));\r\n\t\t\tmessage.setSubject(status + &quot; : Financial Block&quot; );\r\n\t\t\tBodyPart messageBodyPart = new MimeBodyPart();\r\n\t\t\tString myMessage1=&quot;Hi All,&quot;;\r\n\t\t\tString myMessage2=&quot;&lt;br&gt;Data is Mismatchng between Database Search and Elastic Search&quot;;\r\n\t\t\tString myMessage3=&quot;&lt;br&gt;Regards&lt;br&gt;QA Automation Team&quot;;\r\n\t\t\t//messageBodyPart.setText(myMessage1);\r\n\t\t\tmessageBodyPart.setContent(myMessage1 + &quot;&lt;br&gt;&quot;+ myMessage2 + &quot;&lt;br&gt;&quot;+ myMessage3, &quot;text/html&quot;);\r\n\r\n\t\t\tMultipart multipart = new MimeMultipart();\r\n\t\t\tmultipart.addBodyPart(messageBodyPart);\r\n\t\t\tmessageBodyPart = new MimeBodyPart();\r\n\t\t\t//String filename = FOLDER_PATH + &quot;/eTicket-Automation-report.html&quot;;\r\n\t\t\tString efile = FOLDER_PATH + &quot;/emailable-report.html&quot;;\r\n\t\t\tDataSource src = new FileDataSource(difference_path);\r\n\t\t\tmessageBodyPart.setDataHandler(new DataHandler(src));\r\n\t\t\t//DataSource source = new FileDataSource(filename);\r\n\t\t\t//messageBodyPart.setDataHandler(new DataHandler(source));\r\n\t\t\tString reportName=&quot;&quot;;\r\n\t\t\t\r\n\t\t\t\treportName=&quot;Financial Block automation&quot;;\r\n\t\t\t\r\n\t\t\tmessageBodyPart.setFileName(reportName + &quot;.xlsx&quot;);\r\n\t\t\tmultipart.addBodyPart(messageBodyPart);\r\n\t\t\tmessage.setContent(multipart);\r\n\t\t\t Transport transport = session.getTransport();\r\n\t\t\t \r\n\t\t\t try\r\n\t\t        {\r\n\t\t            System.out.println(&quot;Sending...&quot;);\r\n\t\t            \r\n\t\t            \r\n\t\t            // Connect to Amazon SES using the SMTP username and password you specified above.\r\n\t\t            transport.connect(HOST, SMTP_USERNAME, SMTP_PASSWORD);\r\n\t\t             \r\n\t\t            // Send the email.\r\n\t\t            transport.sendMessage(message, message.getAllRecipients());\r\n\t\t            \r\n\t\t            System.out.println(&quot;Email sent!&quot;);\r\n\t\t        }\r\n\t\t        catch (Exception ex) {\r\n\t\t            System.out.println(&quot;The email was not sent.&quot;);\r\n\t\t            System.out.println(&quot;Error message: &quot; + ex.getMessage());\r\n\t\t        }\r\n\t\t        finally\r\n\t\t        {\r\n\t\t            // Close and terminate the connection.\r\n\t\t            transport.close();\r\n\t\t        }\r\n\t\t\r\n\t}\r\n\r\n\tpublic static void getStatus(String filePath) throws SAXException, IOException, ParserConfigurationException {\r\n\t\tFile inputFile = new File(filePath);\r\n\t\tDocumentBuilderFactory dbFactory \r\n\t\t= DocumentBuilderFactory.newInstance();\r\n\t\tDocumentBuilder dBuilder = dbFactory.newDocumentBuilder();\r\n\t\tDocument doc = dBuilder.parse(inputFile);\r\n\t\tdoc.getDocumentElement().normalize();\r\n\t\tNodeList nList = doc.getElementsByTagName(&quot;testng-results&quot;);\r\n\t\tNode nNode = nList.item(0);\r\n\t\tif (nNode.getNodeType() == Node.ELEMENT_NODE) {\r\n\t\t\tElement eElement = (Element) nNode;\r\n\t\t\tint failed = Integer.parseInt(eElement.getAttribute(&quot;failed&quot;));\r\n\t\t\tint skipped = Integer.parseInt(eElement.getAttribute(&quot;skipped&quot;));\r\n\r\n\t\t\tif(failed!=0 || skipped!=0)\r\n\t\t\t\tstatus=&quot;FAILED&quot;;\r\n\t\t\telse\r\n\t\t\t\tstatus=&quot;PASSED&quot;;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nAnd the batch file is \r\ncd\\\r\ncd C:\\Users\\rramesh\\eclipse-workspace\\Financial_API\\src\\main\\java\\Utlities\r\njavac -cp C:\\JarLib\\*;. Send_email.java \r\ncd..\r\njava -cp C:\\JarLib\\*;. Utlities.Send_email\r\n \r\n \r\n\r\n","title":"Java class file running successfully in eclipse getting error while running through batch file","body":"<p>Below is the java code which is used in an email with an excel attachment, but this excel file is getting from another class. while running this send email class in eclipse mail sent successfully but when I run through the batch file getting an error as cannot find the symbol in the lone &quot;String difference_path =Difference_directory.getLatestFilePath();&quot;.</p>\n<pre><code>public class Send_email{\nstatic String status=null;\npublic static Properties CONFIG = null;\n\npublic static void main(String[] args) throws Exception {\n      \n    String difference_path = Difference_directory.getLatestFilePath();\n    System.out.println(difference_path);\n    Properties props = new Properties();\n    props.put(&quot;mail.transport.protocol&quot;, &quot;smtp&quot;);\n    props.put(&quot;mail.smtp.port&quot;, 587); \n    props.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\n    props.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\n    \n    //Loading Config file\nProperties CONFIG = new Properties();\nFileInputStream fs = new FileInputStream(System.getProperty(&quot;user.dir&quot;)+&quot;\\\\src\\\\main\\\\resource\\\\config2.properties&quot;);\n\n    CONFIG.load(fs);\n    String FROM= CONFIG.getProperty(&quot;FROM&quot;);\n    String FROMNAME= CONFIG.getProperty(&quot;FROMNAME&quot;);\n    String SMTP_USERNAME= CONFIG.getProperty(&quot;SMTP_USERNAME&quot;);\n    String SMTP_PASSWORD= CONFIG.getProperty(&quot;SMTP_PASSWORD&quot;);\n    String HOST= CONFIG.getProperty(&quot;HOST&quot;);\n    String TO=&quot;&quot;;\n    \n    // folder path for execution report\n     \n    final String FOLDER_PATH = &quot;C:\\\\Users\\\\rramesh\\\\eclipse-workspace\\\\Financial_API\\\\test-output&quot;;\n    getStatus(FOLDER_PATH + &quot;/testng-results.xml&quot;);\n    \n    \n    if(status.equals(&quot;PASSED&quot;)){\n        TO=CONFIG.getProperty(&quot;PassMail&quot;);\n    }else if(status.equals(&quot;FAILED&quot;)){\n        TO=CONFIG.getProperty(&quot;FailMail&quot;);\n    }\n    \n       Session session = Session.getDefaultInstance(props);\n        Message message = new MimeMessage(session);\n        message.setFrom(new InternetAddress(FROM,FROMNAME));\n        message.setRecipients(Message.RecipientType.TO,\n                InternetAddress.parse(TO));\n        message.setSubject(status + &quot; : Financial Block&quot; );\n        BodyPart messageBodyPart = new MimeBodyPart();\n        String myMessage1=&quot;Hi All,&quot;;\n        String myMessage2=&quot;&lt;br&gt;Data is Mismatchng between Database Search and Elastic Search&quot;;\n        String myMessage3=&quot;&lt;br&gt;Regards&lt;br&gt;QA Automation Team&quot;;\n        //messageBodyPart.setText(myMessage1);\n        messageBodyPart.setContent(myMessage1 + &quot;&lt;br&gt;&quot;+ myMessage2 + &quot;&lt;br&gt;&quot;+ myMessage3, &quot;text/html&quot;);\n\n        Multipart multipart = new MimeMultipart();\n        multipart.addBodyPart(messageBodyPart);\n        messageBodyPart = new MimeBodyPart();\n        //String filename = FOLDER_PATH + &quot;/eTicket-Automation-report.html&quot;;\n        String efile = FOLDER_PATH + &quot;/emailable-report.html&quot;;\n        DataSource src = new FileDataSource(difference_path);\n        messageBodyPart.setDataHandler(new DataHandler(src));\n        //DataSource source = new FileDataSource(filename);\n        //messageBodyPart.setDataHandler(new DataHandler(source));\n        String reportName=&quot;&quot;;\n        \n            reportName=&quot;Financial Block automation&quot;;\n        \n        messageBodyPart.setFileName(reportName + &quot;.xlsx&quot;);\n        multipart.addBodyPart(messageBodyPart);\n        message.setContent(multipart);\n         Transport transport = session.getTransport();\n         \n         try\n            {\n                System.out.println(&quot;Sending...&quot;);\n                \n                \n                // Connect to Amazon SES using the SMTP username and password you specified above.\n                transport.connect(HOST, SMTP_USERNAME, SMTP_PASSWORD);\n                 \n                // Send the email.\n                transport.sendMessage(message, message.getAllRecipients());\n                \n                System.out.println(&quot;Email sent!&quot;);\n            }\n            catch (Exception ex) {\n                System.out.println(&quot;The email was not sent.&quot;);\n                System.out.println(&quot;Error message: &quot; + ex.getMessage());\n            }\n            finally\n            {\n                // Close and terminate the connection.\n                transport.close();\n            }\n    \n}\n\npublic static void getStatus(String filePath) throws SAXException, IOException, ParserConfigurationException {\n    File inputFile = new File(filePath);\n    DocumentBuilderFactory dbFactory \n    = DocumentBuilderFactory.newInstance();\n    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();\n    Document doc = dBuilder.parse(inputFile);\n    doc.getDocumentElement().normalize();\n    NodeList nList = doc.getElementsByTagName(&quot;testng-results&quot;);\n    Node nNode = nList.item(0);\n    if (nNode.getNodeType() == Node.ELEMENT_NODE) {\n        Element eElement = (Element) nNode;\n        int failed = Integer.parseInt(eElement.getAttribute(&quot;failed&quot;));\n        int skipped = Integer.parseInt(eElement.getAttribute(&quot;skipped&quot;));\n\n        if(failed!=0 || skipped!=0)\n            status=&quot;FAILED&quot;;\n        else\n            status=&quot;PASSED&quot;;\n    }\n}\n</code></pre>\n<p>}</p>\n<p>And the batch file is\ncd<br />\ncd C:\\Users\\rramesh\\eclipse-workspace\\Financial_API\\src\\main\\java\\Utlities\njavac -cp C:\\JarLib*;. Send_email.java\ncd..\njava -cp C:\\JarLib*;. Utlities.Send_email</p>\n"},{"tags":["java","websocket","vert.x","kucoin"],"owner":{"account_id":398338,"reputation":85,"user_id":762965,"display_name":"foundationer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":206,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676387354,"creation_date":1676387354,"question_id":75449778,"body_markdown":"I&#39;m trying to connect to the **Kucoin** API using **Secure WebSockets** (WSS). I&#39;m using JDK 17 and **Vert.x** 4.3.8 (the latest version at this time). I followed the instructions [here][1].\r\n\r\n\r\nSo currently I have a basic app with two verticles: the first one uses a **WebClient** to connect to the `/api/v1/bullet-public` URI to get the WSS endpoint and the token. Once I get an answer, I save these to a local map and publish an event to the bus to connect to the WebSocket feed. This part works fine.\r\n\r\nThe second verticle consumes the event published by the first one and creates a websocket using the settings saved on the local map. This doesn&#39;t work. I tried two slightly different approaches and I get different errors on each.\r\n\r\nThe first approach is to set the host to ws-api-spot.kucoin.com and the relative URI. The code for this is on [this Github gist][2].\r\n\r\nIn this case I get the following error:\r\n\r\n    io.netty.handler.codec.http.websocketx.WebSocketHandshakeException: Connection closed while handshake in process\r\n\tat io.vertx.core.http.impl.WebSocketHandshakeInboundHandler.channelInactive(WebSocketHandshakeInboundHandler.java:81)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:305)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:274)\r\n\tat io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelInactive(CombinedChannelDuplexHandler.java:418)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:411)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:376)\r\n\tat io.netty.handler.codec.http.HttpClientCodec$Decoder.channelInactive(HttpClientCodec.java:329)\r\n\tat io.netty.channel.CombinedChannelDuplexHandler.channelInactive(CombinedChannelDuplexHandler.java:221)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:303)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:274)\r\n\tat io.netty.handler.logging.LoggingHandler.channelInactive(LoggingHandler.java:206)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:303)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:274)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:411)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:376)\r\n\tat io.netty.handler.ssl.SslHandler.channelInactive(SslHandler.java:1075)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:305)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:274)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1405)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:301)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:901)\r\n\tat io.netty.channel.AbstractChannel$AbstractUnsafe$7.run(AbstractChannel.java:813)\r\n\tat io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)\r\n\tat io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\r\nThe second approach is to set the absolute URI to something like this:\r\n\r\n    wss://ws-api-spot.kucoin.com/endpoint/?token=&lt;token_value&gt;&amp;topic=/market/ticker:btc&amp;response=true\r\n\r\nTo do this, I slightly modified the getOptions method like this:\r\n\r\n    private static WebSocketConnectOptions getOptions(LocalMap&lt;String, String&gt; serverDetails) {\r\n      WebSocketConnectOptions options = new WebSocketConnectOptions();\r\n      options.setMethod(HttpMethod.GET);\r\n      options.setAllowOriginHeader(false);\r\n      options.setPort(443);\r\n      options.setSsl(true);\r\n      options.setAbsoluteURI(serverDetails.get(&quot;endpoint&quot;) + &quot;endpoint/?token=&quot; + serverDetails.get(&quot;token&quot;) + &quot;&amp;topic=/market/ticker:btc&amp;response=true&quot;);\r\n      return options;\r\n    }\r\n\r\nIn this case, I get this other error:\r\n\r\n    io.vertx.core.VertxException: Invalid url: wss://ws-api-spot.kucoin.com/endpoint/?token=&lt;token_value&gt;&amp;topic=/market/ticker:btc&amp;response=true\r\n\tat io.vertx.core.http.RequestOptions.parseUrl(RequestOptions.java:357)\r\n\tat io.vertx.core.http.RequestOptions.setAbsoluteURI(RequestOptions.java:370)\r\n\tat org.phase5.goyena.SymbolSnapshotVerticle.getOptions(SymbolSnapshotVerticle.java:52)\r\n\tat org.phase5.goyena.SymbolSnapshotVerticle.lambda$start$3(SymbolSnapshotVerticle.java:32)\r\n\tat io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:264)\r\n\tat io.vertx.core.eventbus.impl.MessageConsumerImpl.dispatch(MessageConsumerImpl.java:177)\r\n\tat io.vertx.core.eventbus.impl.HandlerRegistration$InboundDeliveryContext.execute(HandlerRegistration.java:137)\r\n\tat io.vertx.core.eventbus.impl.DeliveryContextBase.next(DeliveryContextBase.java:72)\r\n\tat io.vertx.core.eventbus.impl.DeliveryContextBase.dispatch(DeliveryContextBase.java:43)\r\n\tat io.vertx.core.eventbus.impl.HandlerRegistration.dispatch(HandlerRegistration.java:98)\r\n\tat io.vertx.core.eventbus.impl.MessageConsumerImpl.deliver(MessageConsumerImpl.java:183)\r\n\tat io.vertx.core.eventbus.impl.MessageConsumerImpl.doReceive(MessageConsumerImpl.java:168)\r\n\tat io.vertx.core.eventbus.impl.HandlerRegistration.lambda$receive$0(HandlerRegistration.java:49)\r\n\tat io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)\r\n\tat io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n    Caused by: java.net.MalformedURLException: unknown protocol: wss\r\n\tat java.base/java.net.URL.&lt;init&gt;(URL.java:681)\r\n\tat java.base/java.net.URL.&lt;init&gt;(URL.java:569)\r\n\tat java.base/java.net.URL.&lt;init&gt;(URL.java:516)\r\n\tat io.vertx.core.http.RequestOptions.parseUrl(RequestOptions.java:355)\r\n\t... 20 common frames omitted\r\n\r\nWhen I manually run a request from **Postman** following the same instructions, I successfully get a connection. Any ideas of what&#39;s wrong? Do I need to change the options for either the HTTP client or the Websocket?\r\n\r\nThanks in advance.\r\n\r\n  [1]: https://docs.kucoin.com/#websocket-feed\r\n  [2]: https://gist.github.com/foundationer/7c2024b85f946baac1131791870058f4","title":"Unable to connect to Kucoin API using Secure WebSockets, JDK 17 and Vert.x","body":"<p>I'm trying to connect to the <strong>Kucoin</strong> API using <strong>Secure WebSockets</strong> (WSS). I'm using JDK 17 and <strong>Vert.x</strong> 4.3.8 (the latest version at this time). I followed the instructions <a href=\"https://docs.kucoin.com/#websocket-feed\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>So currently I have a basic app with two verticles: the first one uses a <strong>WebClient</strong> to connect to the <code>/api/v1/bullet-public</code> URI to get the WSS endpoint and the token. Once I get an answer, I save these to a local map and publish an event to the bus to connect to the WebSocket feed. This part works fine.</p>\n<p>The second verticle consumes the event published by the first one and creates a websocket using the settings saved on the local map. This doesn't work. I tried two slightly different approaches and I get different errors on each.</p>\n<p>The first approach is to set the host to ws-api-spot.kucoin.com and the relative URI. The code for this is on <a href=\"https://gist.github.com/foundationer/7c2024b85f946baac1131791870058f4\" rel=\"nofollow noreferrer\">this Github gist</a>.</p>\n<p>In this case I get the following error:</p>\n<pre><code>io.netty.handler.codec.http.websocketx.WebSocketHandshakeException: Connection closed while handshake in process\nat io.vertx.core.http.impl.WebSocketHandshakeInboundHandler.channelInactive(WebSocketHandshakeInboundHandler.java:81)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:305)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)\nat io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:274)\nat io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelInactive(CombinedChannelDuplexHandler.java:418)\nat io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:411)\nat io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:376)\nat io.netty.handler.codec.http.HttpClientCodec$Decoder.channelInactive(HttpClientCodec.java:329)\nat io.netty.channel.CombinedChannelDuplexHandler.channelInactive(CombinedChannelDuplexHandler.java:221)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:303)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)\nat io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:274)\nat io.netty.handler.logging.LoggingHandler.channelInactive(LoggingHandler.java:206)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:303)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)\nat io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:274)\nat io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:411)\nat io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:376)\nat io.netty.handler.ssl.SslHandler.channelInactive(SslHandler.java:1075)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:305)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)\nat io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:274)\nat io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1405)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:301)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)\nat io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:901)\nat io.netty.channel.AbstractChannel$AbstractUnsafe$7.run(AbstractChannel.java:813)\nat io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)\nat io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)\nat io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)\nat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)\nat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\nat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\nat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\nat java.base/java.lang.Thread.run(Thread.java:833)\n</code></pre>\n<p>The second approach is to set the absolute URI to something like this:</p>\n<pre><code>wss://ws-api-spot.kucoin.com/endpoint/?token=&lt;token_value&gt;&amp;topic=/market/ticker:btc&amp;response=true\n</code></pre>\n<p>To do this, I slightly modified the getOptions method like this:</p>\n<pre><code>private static WebSocketConnectOptions getOptions(LocalMap&lt;String, String&gt; serverDetails) {\n  WebSocketConnectOptions options = new WebSocketConnectOptions();\n  options.setMethod(HttpMethod.GET);\n  options.setAllowOriginHeader(false);\n  options.setPort(443);\n  options.setSsl(true);\n  options.setAbsoluteURI(serverDetails.get(&quot;endpoint&quot;) + &quot;endpoint/?token=&quot; + serverDetails.get(&quot;token&quot;) + &quot;&amp;topic=/market/ticker:btc&amp;response=true&quot;);\n  return options;\n}\n</code></pre>\n<p>In this case, I get this other error:</p>\n<pre><code>io.vertx.core.VertxException: Invalid url: wss://ws-api-spot.kucoin.com/endpoint/?token=&lt;token_value&gt;&amp;topic=/market/ticker:btc&amp;response=true\nat io.vertx.core.http.RequestOptions.parseUrl(RequestOptions.java:357)\nat io.vertx.core.http.RequestOptions.setAbsoluteURI(RequestOptions.java:370)\nat org.phase5.goyena.SymbolSnapshotVerticle.getOptions(SymbolSnapshotVerticle.java:52)\nat org.phase5.goyena.SymbolSnapshotVerticle.lambda$start$3(SymbolSnapshotVerticle.java:32)\nat io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:264)\nat io.vertx.core.eventbus.impl.MessageConsumerImpl.dispatch(MessageConsumerImpl.java:177)\nat io.vertx.core.eventbus.impl.HandlerRegistration$InboundDeliveryContext.execute(HandlerRegistration.java:137)\nat io.vertx.core.eventbus.impl.DeliveryContextBase.next(DeliveryContextBase.java:72)\nat io.vertx.core.eventbus.impl.DeliveryContextBase.dispatch(DeliveryContextBase.java:43)\nat io.vertx.core.eventbus.impl.HandlerRegistration.dispatch(HandlerRegistration.java:98)\nat io.vertx.core.eventbus.impl.MessageConsumerImpl.deliver(MessageConsumerImpl.java:183)\nat io.vertx.core.eventbus.impl.MessageConsumerImpl.doReceive(MessageConsumerImpl.java:168)\nat io.vertx.core.eventbus.impl.HandlerRegistration.lambda$receive$0(HandlerRegistration.java:49)\nat io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)\nat io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)\nat io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)\nat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)\nat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\nat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\nat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\nat java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.net.MalformedURLException: unknown protocol: wss\nat java.base/java.net.URL.&lt;init&gt;(URL.java:681)\nat java.base/java.net.URL.&lt;init&gt;(URL.java:569)\nat java.base/java.net.URL.&lt;init&gt;(URL.java:516)\nat io.vertx.core.http.RequestOptions.parseUrl(RequestOptions.java:355)\n... 20 common frames omitted\n</code></pre>\n<p>When I manually run a request from <strong>Postman</strong> following the same instructions, I successfully get a connection. Any ideas of what's wrong? Do I need to change the options for either the HTTP client or the Websocket?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","binary-search","lower-bound","upperbound"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1364159135,"post_id":15603832,"comment_id":22128926,"body_markdown":"For those of us who don&#39;t speak &quot;C&quot;, could you describe what you want in English with examples?","body":"For those of us who don&#39;t speak &quot;C&quot;, could you describe what you want in English with examples?"}],"answers":[{"tags":[],"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"down_vote_count":1,"up_vote_count":13,"is_accepted":true,"score":12,"last_activity_date":1614139106,"creation_date":1364158560,"answer_id":15603895,"question_id":15603832,"body_markdown":"In Java, you use [`Collections.binarySearch`][1] to find the lower bound of the equal range in a sorted list (`Arrays.binarySearch` provides a similar capability for arrays). This gives you a position within the equal range with no further guarantees:\r\n\r\n&gt; [If the list contains multiple elements equal to the specified object, there is no guarantee which one will be found.][1]\r\n\r\nThen you iterate linearly forward and then backward until you hit the end of the equal range.\r\n\r\nThese methods work for objects implementing the [`Comparable`][2] interface. For classes that do not implement the `Comparable`, you can supply an instance of a *custom* [`Comparator`][3] for comparing the elements of your specific type.\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20T%29\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html\r\n  [3]: http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html","title":"Java equivalent of c++ equal_range (or lower_bound &amp; upper_bound)","body":"<p>In Java, you use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20T%29\" rel=\"nofollow noreferrer\"><code>Collections.binarySearch</code></a> to find the lower bound of the equal range in a sorted list (<code>Arrays.binarySearch</code> provides a similar capability for arrays). This gives you a position within the equal range with no further guarantees:</p>\n<blockquote>\n<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20T%29\" rel=\"nofollow noreferrer\">If the list contains multiple elements equal to the specified object, there is no guarantee which one will be found.</a></p>\n</blockquote>\n<p>Then you iterate linearly forward and then backward until you hit the end of the equal range.</p>\n<p>These methods work for objects implementing the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html\" rel=\"nofollow noreferrer\"><code>Comparable</code></a> interface. For classes that do not implement the <code>Comparable</code>, you can supply an instance of a <em>custom</em> <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html\" rel=\"nofollow noreferrer\"><code>Comparator</code></a> for comparing the elements of your specific type.</p>\n"},{"tags":[],"owner":{"account_id":2199259,"reputation":674,"user_id":1944117,"display_name":"Survivor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602637537,"creation_date":1364159325,"answer_id":15604031,"question_id":15603832,"body_markdown":"You can try something like this:\r\n```java\r\npublic class TestSOF {\r\n\r\n    private ArrayList &lt;Integer&gt; testList = new ArrayList &lt;Integer&gt;();\r\n    private Integer first, last;\r\n\r\n    public void fillArray(){\r\n\r\n        testList.add(10);\r\n        testList.add(20);\r\n        testList.add(30);\r\n        testList.add(30);\r\n        testList.add(20);\r\n        testList.add(10);\r\n        testList.add(10);\r\n        testList.add(20);\r\n    }\r\n\r\n    public ArrayList getArray(){\r\n\r\n        return this.testList;\r\n    }\r\n\r\n    public void sortArray(){\r\n\r\n        Collections.sort(testList);\r\n    }\r\n\r\n    public void checkPosition(int element){\r\n\r\n        if (testList.contains(element)){\r\n    \r\n            first = testList.indexOf(element);\r\n            last = testList.lastIndexOf(element);\r\n\r\n            System.out.println(&quot;The element &quot; + element + &quot;has it&#39;s first appeareance on position &quot; \r\n        + first + &quot;and it&#39;s last on position &quot; + last);\r\n        }\r\n        \r\n        else{\r\n    \r\n             System.out.println(&quot;Your element &quot; + element + &quot; is not into the arraylist!&quot;);\r\n       }\r\n    }\r\n\r\n    public static void main (String [] args){\r\n\r\n        TestSOF testSOF = new TestSOF();\r\n\r\n        testSOF.fillArray();\r\n        testSOF.sortArray();\r\n        testSOF.checkPosition(20);\r\n    } \r\n}\r\n```","title":"Java equivalent of c++ equal_range (or lower_bound &amp; upper_bound)","body":"<p>You can try something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class TestSOF {\n\n    private ArrayList &lt;Integer&gt; testList = new ArrayList &lt;Integer&gt;();\n    private Integer first, last;\n\n    public void fillArray(){\n\n        testList.add(10);\n        testList.add(20);\n        testList.add(30);\n        testList.add(30);\n        testList.add(20);\n        testList.add(10);\n        testList.add(10);\n        testList.add(20);\n    }\n\n    public ArrayList getArray(){\n\n        return this.testList;\n    }\n\n    public void sortArray(){\n\n        Collections.sort(testList);\n    }\n\n    public void checkPosition(int element){\n\n        if (testList.contains(element)){\n    \n            first = testList.indexOf(element);\n            last = testList.lastIndexOf(element);\n\n            System.out.println(&quot;The element &quot; + element + &quot;has it's first appeareance on position &quot; \n        + first + &quot;and it's last on position &quot; + last);\n        }\n        \n        else{\n    \n             System.out.println(&quot;Your element &quot; + element + &quot; is not into the arraylist!&quot;);\n       }\n    }\n\n    public static void main (String [] args){\n\n        TestSOF testSOF = new TestSOF();\n\n        testSOF.fillArray();\n        testSOF.sortArray();\n        testSOF.checkPosition(20);\n    } \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3853172,"reputation":345,"user_id":3192744,"accept_rate":67,"display_name":"RJN_WLY"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1443345450,"creation_date":1434346783,"answer_id":30838028,"question_id":15603832,"body_markdown":"In binary search , when you find the element then you can keep doing binary search  to its left in order to find first occurrence and to right in order to find last element.\r\nThe idea should be clear with the code: \r\n\r\n    /*\r\n    B: element to find first or last occurrence of\r\n    searchFirst: true to find first occurrence, false  to find last\r\n     */\r\n    Integer bound(final List&lt;Integer&gt; A,int B,boolean searchFirst){\r\n        int n = A.size();\r\n        int low = 0;\r\n        int high = n-1;\r\n        int res = -1;   //if element not found\r\n        int mid ;\r\n        while(low&lt;=high){\r\n            mid = low+(high-low)/2;\r\n            if(A.get(mid)==B){\r\n                res=mid;\r\n                if(searchFirst){high=mid-1;}    //to find first , go left\r\n                else{low=mid+1;}                // to find last, go right\r\n            }\r\n            else if(B&gt;A.get(mid)){low=mid+1;}\r\n            else{high=mid-1;}\r\n        }\r\n        return res;\r\n    }","title":"Java equivalent of c++ equal_range (or lower_bound &amp; upper_bound)","body":"<p>In binary search , when you find the element then you can keep doing binary search  to its left in order to find first occurrence and to right in order to find last element.\nThe idea should be clear with the code: </p>\n\n<pre><code>/*\nB: element to find first or last occurrence of\nsearchFirst: true to find first occurrence, false  to find last\n */\nInteger bound(final List&lt;Integer&gt; A,int B,boolean searchFirst){\n    int n = A.size();\n    int low = 0;\n    int high = n-1;\n    int res = -1;   //if element not found\n    int mid ;\n    while(low&lt;=high){\n        mid = low+(high-low)/2;\n        if(A.get(mid)==B){\n            res=mid;\n            if(searchFirst){high=mid-1;}    //to find first , go left\n            else{low=mid+1;}                // to find last, go right\n        }\n        else if(B&gt;A.get(mid)){low=mid+1;}\n        else{high=mid-1;}\n    }\n    return res;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10105963,"reputation":1331,"user_id":7468538,"display_name":"HariUserX"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503344579,"creation_date":1503344098,"answer_id":45804379,"question_id":15603832,"body_markdown":"    import java.io.BufferedReader;\r\n    import java.io.BufferedWriter;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.io.OutputStreamWriter;\r\n    import java.util.Collections;\r\n    import java.util.Vector;\r\n    \r\n    public class Bounds {\r\n    \r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \t\tVector&lt;Float&gt; data = new Vector&lt;&gt;();\r\n    \t\tfor (int i = 29; i &gt;= 0; i -= 2) {\r\n    \t\t\tdata.add(Float.valueOf(i));\r\n    \t\t}\r\n    \t\tCollections.sort(data);\r\n    \t\tfloat element = 14;\r\n    \t\tBufferedReader bf = new BufferedReader(new InputStreamReader(System.in));\r\n    \t\tBufferedWriter log = new BufferedWriter(new OutputStreamWriter(System.out));\r\n    \t\tString string = bf.readLine();\r\n    \t\twhile (!string.equals(&quot;q&quot;)) {\r\n    \t\t\telement=Float.parseFloat(string);\r\n    \t\t\tint first = 0;\r\n    \t\t\tint last = data.size();\r\n    \t\t\tint mid;\r\n    \t\t\twhile (first &lt; last) {\r\n    \t\t\t\tmid = first + ((last - first) &gt;&gt; 1); \r\n    \t\t\t\tif (data.get(mid) &lt; element)  //lower bound. for upper use &lt;= \r\n    \t\t\t\t\tfirst = mid + 1; \r\n    \t\t\t\telse \r\n    \t\t\t\t\tlast = mid;\r\n    \t\t\t}\r\n    \t\t\tlog.write(&quot;data is: &quot;+data+&quot;\\n&quot;);\r\n    \t\t\tif(first==data.size())\r\n    \t\t\t\tfirst=data.size()-1;\r\n    \t\t\tlog.write(&quot;element is : &quot; + first+ &quot;\\n&quot;);\r\n    \t\t\tlog.flush();\r\n    \t\t\tstring= bf.readLine();\r\n    \t\t}\r\n    \t\tbf.close();\r\n    \t}\r\n    \r\n    }\r\n\r\nThis is the implementation for lower_bound and upper_bound similar to c++.\r\nNote that the element you are searching for need not be present in the vector or list. This implementation only gives the element&#39;s upper and lower bounds.","title":"Java equivalent of c++ equal_range (or lower_bound &amp; upper_bound)","body":"<pre><code>import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.OutputStreamWriter;\nimport java.util.Collections;\nimport java.util.Vector;\n\npublic class Bounds {\n\n    public static void main(String[] args) throws IOException {\n        Vector&lt;Float&gt; data = new Vector&lt;&gt;();\n        for (int i = 29; i &gt;= 0; i -= 2) {\n            data.add(Float.valueOf(i));\n        }\n        Collections.sort(data);\n        float element = 14;\n        BufferedReader bf = new BufferedReader(new InputStreamReader(System.in));\n        BufferedWriter log = new BufferedWriter(new OutputStreamWriter(System.out));\n        String string = bf.readLine();\n        while (!string.equals(\"q\")) {\n            element=Float.parseFloat(string);\n            int first = 0;\n            int last = data.size();\n            int mid;\n            while (first &lt; last) {\n                mid = first + ((last - first) &gt;&gt; 1); \n                if (data.get(mid) &lt; element)  //lower bound. for upper use &lt;= \n                    first = mid + 1; \n                else \n                    last = mid;\n            }\n            log.write(\"data is: \"+data+\"\\n\");\n            if(first==data.size())\n                first=data.size()-1;\n            log.write(\"element is : \" + first+ \"\\n\");\n            log.flush();\n            string= bf.readLine();\n        }\n        bf.close();\n    }\n\n}\n</code></pre>\n\n<p>This is the implementation for lower_bound and upper_bound similar to c++.\nNote that the element you are searching for need not be present in the vector or list. This implementation only gives the element's upper and lower bounds.</p>\n"},{"tags":[],"owner":{"account_id":8086591,"reputation":1869,"user_id":6093953,"display_name":"Andrushenko Alexander"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1567602680,"creation_date":1567601134,"answer_id":57788702,"question_id":15603832,"body_markdown":"Java have already built-in binary search functionality that calculates lower/upper bounds for an element in an array, there is no need to implement custom methods. \r\n\r\nWhen we speak about upper/lower bounds or equal ranges, we always mean indexes of a container (in this case of ArrayList), and not the elements contained.\r\nLet&#39;s consider an array (we assume the array is sorted, otherwise we sort it first):\r\n\r\n    List&lt;Integer&gt; nums = new ArrayList&lt;&gt;(Arrays.asList(2,3,5,5,7,9,10,18,22));\r\n\r\nThe &quot;lower bound&quot; function must return the **index of the array**, where the element must be inserted to **keep the array sorted**. The &quot;upper bound&quot; must return the index of the **smallest element in the array, that is bigger than** the looked for element.\r\nFor example\r\n\r\n    lowerBound(nums, 6)\r\n\r\nmust return 3, because 3 is the position of the array (starting counting with 0), where 6 must be inserted to keep array sorted.\r\n \r\nThe\r\n\r\n    upperBound(nums, 6)\r\n\r\nmust return 4, because 4 is the position of the **smallest** element in the array, that is **bigger** than 5 or 6, (number 7 on position 4). \r\n\r\nIn C++ in standard library the both algorithms already implemented in standard library. In Java you can use \r\n\r\n    Collections.binarySearch(nums, element)\r\n\r\nto calculate the position in **logarithmic time complexity**.\r\n\r\nIf the array contains the element, *Collections.binarySearch* returns the first index of the element (in the array above 2). Otherwise it returns a negative number that specifies the position in the array of the next bigger element, **counting backwards from the last index of the array**. The number found in this position is the **smallest element of the array that is bigger than the element** you look for.\r\n\r\nFor example, if you call\r\n\r\n    int idx = Collections.binarySearch(nums, 6)\r\n\r\nthe function returns -5. If you count backwards from the last index of the array (-1, -2, ...) the index -5 points to number 7 - the smallest number in the array that is bigger than the element 6.\r\n\r\nConclusion:\r\nif the sorted array **contains** the looked for element, the lower bound is the position of the element, and the upper bound is the position of the next bigger element.\r\n\r\nIf the array **does not contains** the element, the lower bound is the position\r\n\r\n    Math.abs(idx) - 2\r\n\r\nand the upper bound is the position \r\n\r\n    Math.abs(idx) - 1\r\n\r\nwhere \r\n\r\n    idx = Collections.binarySearch(nums, element)\r\n\r\nAnd please always keep in mind the border cases. For example, if you look for 1 in the above specified array:\r\n\r\n    idx = Collections.binarySearch(nums, 1)\r\n\r\nThe functon returns -1. So, the upperBound = Math.abs(idx) - 1 = 0 - the element 2 at position 0. But there is no lower bound for element 1, because 2 is the smallest number in the array. \r\nThe same logic applies to elements bigger than the biggest number in the array: if you look for lower/upper bounds of number 25, you will get \r\n\r\n      idx = Collections.binarySearch(nums, 25) \r\n\r\nix = -10. You can calculate the lower bound : lb = Math.abs(-10) - 2 = 8, that is the last index of the array, but there is no upper bound, because 22 is already biggest element in the array and there is no element at position 9.\r\n\r\nThe equal_range specifies all indexes of the array in the range starting from the lower bound index up to (but not including) the upper bound.\r\nFor example, the equal range of number 5 in the array above are indexes\r\n\r\n     [2,3]\r\n\r\nEqual range of number 6 is empty, because there is no number 6 in the array.","title":"Java equivalent of c++ equal_range (or lower_bound &amp; upper_bound)","body":"<p>Java have already built-in binary search functionality that calculates lower/upper bounds for an element in an array, there is no need to implement custom methods. </p>\n\n<p>When we speak about upper/lower bounds or equal ranges, we always mean indexes of a container (in this case of ArrayList), and not the elements contained.\nLet's consider an array (we assume the array is sorted, otherwise we sort it first):</p>\n\n<pre><code>List&lt;Integer&gt; nums = new ArrayList&lt;&gt;(Arrays.asList(2,3,5,5,7,9,10,18,22));\n</code></pre>\n\n<p>The \"lower bound\" function must return the <strong>index of the array</strong>, where the element must be inserted to <strong>keep the array sorted</strong>. The \"upper bound\" must return the index of the <strong>smallest element in the array, that is bigger than</strong> the looked for element.\nFor example</p>\n\n<pre><code>lowerBound(nums, 6)\n</code></pre>\n\n<p>must return 3, because 3 is the position of the array (starting counting with 0), where 6 must be inserted to keep array sorted.</p>\n\n<p>The</p>\n\n<pre><code>upperBound(nums, 6)\n</code></pre>\n\n<p>must return 4, because 4 is the position of the <strong>smallest</strong> element in the array, that is <strong>bigger</strong> than 5 or 6, (number 7 on position 4). </p>\n\n<p>In C++ in standard library the both algorithms already implemented in standard library. In Java you can use </p>\n\n<pre><code>Collections.binarySearch(nums, element)\n</code></pre>\n\n<p>to calculate the position in <strong>logarithmic time complexity</strong>.</p>\n\n<p>If the array contains the element, <em>Collections.binarySearch</em> returns the first index of the element (in the array above 2). Otherwise it returns a negative number that specifies the position in the array of the next bigger element, <strong>counting backwards from the last index of the array</strong>. The number found in this position is the <strong>smallest element of the array that is bigger than the element</strong> you look for.</p>\n\n<p>For example, if you call</p>\n\n<pre><code>int idx = Collections.binarySearch(nums, 6)\n</code></pre>\n\n<p>the function returns -5. If you count backwards from the last index of the array (-1, -2, ...) the index -5 points to number 7 - the smallest number in the array that is bigger than the element 6.</p>\n\n<p>Conclusion:\nif the sorted array <strong>contains</strong> the looked for element, the lower bound is the position of the element, and the upper bound is the position of the next bigger element.</p>\n\n<p>If the array <strong>does not contains</strong> the element, the lower bound is the position</p>\n\n<pre><code>Math.abs(idx) - 2\n</code></pre>\n\n<p>and the upper bound is the position </p>\n\n<pre><code>Math.abs(idx) - 1\n</code></pre>\n\n<p>where </p>\n\n<pre><code>idx = Collections.binarySearch(nums, element)\n</code></pre>\n\n<p>And please always keep in mind the border cases. For example, if you look for 1 in the above specified array:</p>\n\n<pre><code>idx = Collections.binarySearch(nums, 1)\n</code></pre>\n\n<p>The functon returns -1. So, the upperBound = Math.abs(idx) - 1 = 0 - the element 2 at position 0. But there is no lower bound for element 1, because 2 is the smallest number in the array. \nThe same logic applies to elements bigger than the biggest number in the array: if you look for lower/upper bounds of number 25, you will get </p>\n\n<pre><code>  idx = Collections.binarySearch(nums, 25) \n</code></pre>\n\n<p>ix = -10. You can calculate the lower bound : lb = Math.abs(-10) - 2 = 8, that is the last index of the array, but there is no upper bound, because 22 is already biggest element in the array and there is no element at position 9.</p>\n\n<p>The equal_range specifies all indexes of the array in the range starting from the lower bound index up to (but not including) the upper bound.\nFor example, the equal range of number 5 in the array above are indexes</p>\n\n<pre><code> [2,3]\n</code></pre>\n\n<p>Equal range of number 6 is empty, because there is no number 6 in the array.</p>\n"},{"tags":[],"owner":{"account_id":15269101,"reputation":61,"user_id":11016819,"display_name":"Akshay Gupta"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1590935222,"creation_date":1590935222,"answer_id":62117661,"question_id":15603832,"body_markdown":"Java equivalent of lower_bound in cpp is \r\n\r\n    public static int lower(int arr[],int key){\r\n        int low = 0;\r\n        int high = arr.length-1;\r\n        while(low &lt; high){\r\n            int mid = low + (high - low)/2;\r\n            if(arr[mid] &gt;= key){\r\n                high = mid;\r\n            }\r\n            else{\r\n                low = mid+1;\r\n            }\r\n        }\r\n        return low;\r\n    }\r\n\r\nBut the above snippet will give the lower bound if the key is not present in the array\r\n\r\nJava equivalent of upper_bound in cpp is \r\n\r\n    public static int upper(int arr[],int key){\r\n        int low = 0;\r\n        int high = arr.length-1;\r\n        while(low &lt; high){\r\n            int mid = low + (high - low+1)/2;\r\n            if(arr[mid] &lt;= key){\r\n                low = mid;\r\n            }\r\n            else{\r\n                high = mid-1;\r\n            }\r\n        }\r\n        return low;\r\n    }\r\nBut the above snippet will give the lower bound of key if the key is not present in the array","title":"Java equivalent of c++ equal_range (or lower_bound &amp; upper_bound)","body":"<p>Java equivalent of lower_bound in cpp is </p>\n\n<pre><code>public static int lower(int arr[],int key){\n    int low = 0;\n    int high = arr.length-1;\n    while(low &lt; high){\n        int mid = low + (high - low)/2;\n        if(arr[mid] &gt;= key){\n            high = mid;\n        }\n        else{\n            low = mid+1;\n        }\n    }\n    return low;\n}\n</code></pre>\n\n<p>But the above snippet will give the lower bound if the key is not present in the array</p>\n\n<p>Java equivalent of upper_bound in cpp is </p>\n\n<pre><code>public static int upper(int arr[],int key){\n    int low = 0;\n    int high = arr.length-1;\n    while(low &lt; high){\n        int mid = low + (high - low+1)/2;\n        if(arr[mid] &lt;= key){\n            low = mid;\n        }\n        else{\n            high = mid-1;\n        }\n    }\n    return low;\n}\n</code></pre>\n\n<p>But the above snippet will give the lower bound of key if the key is not present in the array</p>\n"},{"tags":[],"owner":{"account_id":16526261,"reputation":111,"user_id":11940935,"display_name":"Atish Naskar"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1599895795,"creation_date":1599869054,"answer_id":63855640,"question_id":15603832,"body_markdown":"We can find Lower bound and upper bound with the help of java library function as well as by defining our own **LowerBound and UpperBound Function.**\r\n\r\n**{#case-1}**\r\n\t    \r\nif the number is not present both lower bound and upper bound would be\r\nsame .i.e. in that case *lb* and *ub* would be the insertion point of the array i.e. that point where the number should be inserted to keep the array sorted.\r\n\r\n*Example-1:*\r\n\t\t\t \r\n\r\n    6 1 // 6 is the size of the array and 1 is the key\r\n    2 3 4 5 6 7 here lb=0 and ub=0 (0 is the position where 1 should be inserted to keep the array sorted)\r\n\r\n\t6 8 // 6 is the size of the array and 8 is the key\r\n\t2 3 4 5 6 7\t here lb=6 and ub=6 (6 is the position where 8 should be inserted to keep the array sorted)\r\n\t\r\n    6 3 // 6 is the size of the array and 3 is the key\r\n\t1 2 2 2 4 5\t here lb=4 and ub=4 (4 is the position where 3 should be inserted to keep the array sorted)\r\n\r\n \r\n \t\t\r\n**{#case-2(a)}**\r\n \t\t\r\nif the number is present and have frequency 1. i.e. number of occurrence is 1\r\n \t\t\r\n*lb*=index of that number.&lt;br /&gt;\r\n*ub*=index of the next number which is just greater than that number in the array\r\n \t\t.i.e. *ub*=index of that number+1\r\n\r\n*Example-2:*\r\n \t\t\r\n    6 5 // 6 is the size of the array and 5 is the key\r\n\t1 2 3 4 5 6 here lb=4 and ub=5\r\n\t\t\r\n**{#case-2(b)}**\r\n\t\t\r\nif the number is present and have frequency more than 1.\r\n\t\tnumber is occured multiple times.in this case \r\n\t\t*lb* would be the index of the 1st occurrence of that number.\r\n\t\t*ub* would be the index of the last occurrence of that number+1.\r\n\t\ti.e. index of that number which is just greater than the key in the array.\r\n\r\n*Example-3:*\r\n\t\t\r\n     11 5 // 11 is the size of the array and 5 is the key\r\n\t 1 2 3 4 5 5 5 5 5 7 7 here lb=4 and ub=9\r\n\r\n# Implementation of Lower_Bound and Upper_Bound \r\n**Method-1:**\r\n *By Library function*\r\n\r\n// a is the array and x is the target value\r\n        \r\n    int lb=Arrays.binarySearch(a,x); // for lower_bound\r\n\r\n    int ub=Arrays.binarySearch(a,x); // for upper_bound\r\n\r\n    if(lb&lt;0) {lb=Math.abs(lb)-1;}//if the number is not present\r\n    \r\n    else{ // if the number is present we are checking \r\n    \t//whether the number is present multiple times or not\r\n        int y=a[lb];\r\n        for(int i=lb-1; i&gt;=0; i--){\r\n            if(a[i]==y) --lb;\r\n            else break;\r\n        }\r\n    }\r\n      if(ub&lt;0) {ub=Math.abs(ub)-1;}//if the number is not present\r\n   \r\n      else{// if the number is present we are checking \r\n    \t//whether the number is present multiple times or not\r\n        int y=a[ub];\r\n        for(int i=ub+1; i&lt;n; i++){\r\n            if(a[i]==y) ++ub;\r\n            else break;\r\n        }\r\n        ++ub;\r\n    }\r\n\r\n**Method-2:**\r\n*By Defining own Function*\r\n\r\n//for lower bound\r\n\r\n    static int LowerBound(int a[], int x) { // x is the target value or key\r\n      int l=-1,r=a.length;\r\n      while(l+1&lt;r) {\r\n\t\tint m=(l+r)&gt;&gt;&gt;1;\r\n        if(a[m]&gt;=x) r=m;\r\n        else l=m;\r\n\t  }\r\n\t  return r;\r\n    }\r\n\r\n// for Upper_Bound\r\n\r\n     static int UpperBound(int a[], int x) {// x is the key or target value\r\n\t    int l=-1,r=a.length;\r\n\t    while(l+1&lt;r) {\r\n\t\t   int m=(l+r)&gt;&gt;&gt;1;\r\n           if(a[m]&lt;=x) l=m;\r\n           else r=m;\r\n\t    }\r\n\t    return l+1;\r\n     }\r\n\r\n         \r\nor we can use \r\n       \r\n    int m=l+(r-l)/2;\r\n\r\nbut if we use\r\n\r\n    int m=(l+r)&gt;&gt;&gt;1; // it is probably faster\r\n\r\nbut the usage of any of the above formula of calculating m will prevent overflow\r\n\r\nIn C and C++ (&gt;&gt;&gt;) operator is absent, we can do this:\r\n        \r\n    int m= ((unsigned int)l + (unsigned int)r)) &gt;&gt; 1;\r\n\r\n// implementation in program:\r\n\r\n    import java.util.*;\r\n    import java.lang.*;\r\n    import java.io.*;\r\n    public class Lower_bound_and_Upper_bound {\r\n\r\n\tpublic static void main (String[] args) throws java.lang.Exception\r\n\t{\r\n\t    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\r\n\t\tStringTokenizer s = new StringTokenizer(br.readLine());\r\n\t    int n=Integer.parseInt(s.nextToken()),x=Integer.parseInt(s.nextToken()),a[]=new int[n];\r\n\t    s = new StringTokenizer(br.readLine());\r\n\t    for(int i=0; i&lt;n; i++) a[i]=Integer.parseInt(s.nextToken());\r\n\t    Arrays.sort(a);// Array should be sorted. otherwise lb and ub cant be calculated\r\n        int u=UpperBound(a,x);\r\n\t    int l=LowerBound(a,x);\r\n\t    System.out.println(l+&quot; &quot;+u);\r\n     }\r\n    }\r\n\r\n**# Equivalent C++ code for calculating lowerbound and upperbound**\r\n\r\n      #include&lt;bits/stdc++.h&gt;\r\n      #define IRONMAN ios_base::sync_with_stdio(false);cin.tie(0);cout.tie(0);\r\n      using namespace std;\r\n      typedef long long int ll;\r\n      int main() {\r\n\t    IRONMAN\r\n\t    int n,x;cin&gt;&gt;n&gt;&gt;x;\r\n        vector&lt;int&gt; v(n);\r\n        for(auto &amp;i: v) cin&gt;&gt;i;\r\n        ll lb=(lower_bound(v.begin(),v.end(),x))-v.begin();// for calculating lb\r\n        ll ub=(upper_bound(v.begin(),v.end(),x))-v.begin();// for calculating ub\r\n        cout&lt;&lt;lb&lt;&lt;&quot; &quot;&lt;&lt;ub&lt;&lt;&quot;\\n&quot;;\r\n\t    return 0;\r\n      }\r\n\r\n\r\n\r\n\r\n","title":"Java equivalent of c++ equal_range (or lower_bound &amp; upper_bound)","body":"<p>We can find Lower bound and upper bound with the help of java library function as well as by defining our own <strong>LowerBound and UpperBound Function.</strong></p>\n<p><strong>{#case-1}</strong></p>\n<p>if the number is not present both lower bound and upper bound would be\nsame .i.e. in that case <em>lb</em> and <em>ub</em> would be the insertion point of the array i.e. that point where the number should be inserted to keep the array sorted.</p>\n<p><em>Example-1:</em></p>\n<pre><code>6 1 // 6 is the size of the array and 1 is the key\n2 3 4 5 6 7 here lb=0 and ub=0 (0 is the position where 1 should be inserted to keep the array sorted)\n\n6 8 // 6 is the size of the array and 8 is the key\n2 3 4 5 6 7  here lb=6 and ub=6 (6 is the position where 8 should be inserted to keep the array sorted)\n\n6 3 // 6 is the size of the array and 3 is the key\n1 2 2 2 4 5  here lb=4 and ub=4 (4 is the position where 3 should be inserted to keep the array sorted)\n\n\n    \n</code></pre>\n<p><strong>{#case-2(a)}</strong></p>\n<p>if the number is present and have frequency 1. i.e. number of occurrence is 1</p>\n<p><em>lb</em>=index of that number.<br />\n<em>ub</em>=index of the next number which is just greater than that number in the array\n.i.e. <em>ub</em>=index of that number+1</p>\n<p><em>Example-2:</em></p>\n<pre><code>6 5 // 6 is the size of the array and 5 is the key\n1 2 3 4 5 6 here lb=4 and ub=5\n    \n</code></pre>\n<p><strong>{#case-2(b)}</strong></p>\n<p>if the number is present and have frequency more than 1.\nnumber is occured multiple times.in this case\n<em>lb</em> would be the index of the 1st occurrence of that number.\n<em>ub</em> would be the index of the last occurrence of that number+1.\ni.e. index of that number which is just greater than the key in the array.</p>\n<p><em>Example-3:</em></p>\n<pre><code> 11 5 // 11 is the size of the array and 5 is the key\n 1 2 3 4 5 5 5 5 5 7 7 here lb=4 and ub=9\n</code></pre>\n<h1>Implementation of Lower_Bound and Upper_Bound</h1>\n<p><strong>Method-1:</strong>\n<em>By Library function</em></p>\n<p>// a is the array and x is the target value</p>\n<pre><code>int lb=Arrays.binarySearch(a,x); // for lower_bound\n\nint ub=Arrays.binarySearch(a,x); // for upper_bound\n\nif(lb&lt;0) {lb=Math.abs(lb)-1;}//if the number is not present\n\nelse{ // if the number is present we are checking \n    //whether the number is present multiple times or not\n    int y=a[lb];\n    for(int i=lb-1; i&gt;=0; i--){\n        if(a[i]==y) --lb;\n        else break;\n    }\n}\n  if(ub&lt;0) {ub=Math.abs(ub)-1;}//if the number is not present\n\n  else{// if the number is present we are checking \n    //whether the number is present multiple times or not\n    int y=a[ub];\n    for(int i=ub+1; i&lt;n; i++){\n        if(a[i]==y) ++ub;\n        else break;\n    }\n    ++ub;\n}\n</code></pre>\n<p><strong>Method-2:</strong>\n<em>By Defining own Function</em></p>\n<p>//for lower bound</p>\n<pre><code>static int LowerBound(int a[], int x) { // x is the target value or key\n  int l=-1,r=a.length;\n  while(l+1&lt;r) {\n    int m=(l+r)&gt;&gt;&gt;1;\n    if(a[m]&gt;=x) r=m;\n    else l=m;\n  }\n  return r;\n}\n</code></pre>\n<p>// for Upper_Bound</p>\n<pre><code> static int UpperBound(int a[], int x) {// x is the key or target value\n    int l=-1,r=a.length;\n    while(l+1&lt;r) {\n       int m=(l+r)&gt;&gt;&gt;1;\n       if(a[m]&lt;=x) l=m;\n       else r=m;\n    }\n    return l+1;\n }\n\n     \n</code></pre>\n<p>or we can use</p>\n<pre><code>int m=l+(r-l)/2;\n</code></pre>\n<p>but if we use</p>\n<pre><code>int m=(l+r)&gt;&gt;&gt;1; // it is probably faster\n</code></pre>\n<p>but the usage of any of the above formula of calculating m will prevent overflow</p>\n<p>In C and C++ (&gt;&gt;&gt;) operator is absent, we can do this:</p>\n<pre><code>int m= ((unsigned int)l + (unsigned int)r)) &gt;&gt; 1;\n</code></pre>\n<p>// implementation in program:</p>\n<pre><code>import java.util.*;\nimport java.lang.*;\nimport java.io.*;\npublic class Lower_bound_and_Upper_bound {\n\npublic static void main (String[] args) throws java.lang.Exception\n{\n    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n    StringTokenizer s = new StringTokenizer(br.readLine());\n    int n=Integer.parseInt(s.nextToken()),x=Integer.parseInt(s.nextToken()),a[]=new int[n];\n    s = new StringTokenizer(br.readLine());\n    for(int i=0; i&lt;n; i++) a[i]=Integer.parseInt(s.nextToken());\n    Arrays.sort(a);// Array should be sorted. otherwise lb and ub cant be calculated\n    int u=UpperBound(a,x);\n    int l=LowerBound(a,x);\n    System.out.println(l+&quot; &quot;+u);\n }\n}\n</code></pre>\n<p><strong># Equivalent C++ code for calculating lowerbound and upperbound</strong></p>\n<pre><code>  #include&lt;bits/stdc++.h&gt;\n  #define IRONMAN ios_base::sync_with_stdio(false);cin.tie(0);cout.tie(0);\n  using namespace std;\n  typedef long long int ll;\n  int main() {\n    IRONMAN\n    int n,x;cin&gt;&gt;n&gt;&gt;x;\n    vector&lt;int&gt; v(n);\n    for(auto &amp;i: v) cin&gt;&gt;i;\n    ll lb=(lower_bound(v.begin(),v.end(),x))-v.begin();// for calculating lb\n    ll ub=(upper_bound(v.begin(),v.end(),x))-v.begin();// for calculating ub\n    cout&lt;&lt;lb&lt;&lt;&quot; &quot;&lt;&lt;ub&lt;&lt;&quot;\\n&quot;;\n    return 0;\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18737117,"reputation":754,"user_id":13661219,"display_name":"Mohd Asim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624428514,"creation_date":1624428514,"answer_id":68094375,"question_id":15603832,"body_markdown":"Try in this way, for lower and upper bounds.\r\nIt is easy to implement.\r\n\r\n```\r\nimport java.util.Arrays;\r\n\r\nclass LowerBoundUpperBound{\r\n    public static void main(String[] args) {\r\n        int a[] = {1, 2, 3, 4, 5, 5, 5, 5, 5, 7, 7};\r\n\r\n        int key = 5;\r\n        int pos = Arrays.binarySearch(a, key);\r\n        int lb = (pos &lt; 0) ? ~pos - 1 : getlb(pos, a);\r\n        int ub = (pos &lt; 0) ? ~pos : getUb(pos, a);\r\n\r\n        System.out.println(&quot;Lower Bound=&quot; + lb);\r\n        System.out.println(&quot;Upper Bound=&quot; + ub);\r\n\r\n        // You can also try on a[] = {1 ,2 ,3 ,4 ,5 ,6};\r\n        // For key=5, lb=3 and ub=5\r\n\r\n\r\n    }\r\n\r\n    private static int getlb(int pos, int[] a) {\r\n        while (pos - 1 &gt;= 0 &amp;&amp; a[pos] == a[pos - 1]) pos--;\r\n        return pos - 1;\r\n    }\r\n\r\n    private static int getUb(int pos, int[] a) {\r\n        while (pos + 1 &lt; a.length &amp;&amp; a[pos] == a[pos + 1]) pos++;\r\n        return pos + 1;\r\n\r\n    }\r\n}\r\n```\r\n**Note:** Array must be sorted while performing the above method.","title":"Java equivalent of c++ equal_range (or lower_bound &amp; upper_bound)","body":"<p>Try in this way, for lower and upper bounds.\nIt is easy to implement.</p>\n<pre><code>import java.util.Arrays;\n\nclass LowerBoundUpperBound{\n    public static void main(String[] args) {\n        int a[] = {1, 2, 3, 4, 5, 5, 5, 5, 5, 7, 7};\n\n        int key = 5;\n        int pos = Arrays.binarySearch(a, key);\n        int lb = (pos &lt; 0) ? ~pos - 1 : getlb(pos, a);\n        int ub = (pos &lt; 0) ? ~pos : getUb(pos, a);\n\n        System.out.println(&quot;Lower Bound=&quot; + lb);\n        System.out.println(&quot;Upper Bound=&quot; + ub);\n\n        // You can also try on a[] = {1 ,2 ,3 ,4 ,5 ,6};\n        // For key=5, lb=3 and ub=5\n\n\n    }\n\n    private static int getlb(int pos, int[] a) {\n        while (pos - 1 &gt;= 0 &amp;&amp; a[pos] == a[pos - 1]) pos--;\n        return pos - 1;\n    }\n\n    private static int getUb(int pos, int[] a) {\n        while (pos + 1 &lt; a.length &amp;&amp; a[pos] == a[pos + 1]) pos++;\n        return pos + 1;\n\n    }\n}\n</code></pre>\n<p><strong>Note:</strong> Array must be sorted while performing the above method.</p>\n"},{"tags":[],"owner":{"account_id":15302432,"reputation":595,"user_id":11677095,"display_name":"Abhinav Keshri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631881911,"creation_date":1631881155,"answer_id":69223319,"question_id":15603832,"body_markdown":"If you want to find lower_bound without defining your own method and do everything from scratch, then use the following code snippet. As you may have noticed, this method works only with primitive arrays not with ArrayList because we do not have a function in Collections class to specify the **start** and **stop** index for Binaryserach (as of java16). \r\n\r\n* al is an array ```(String[] al = new String[N];)```\r\n* ```token``` is what we are looking for in the array.\r\n```\r\nArrays.sort(al, 0, N); \r\nint index = Arrays.binarySearch(al, 0, N , token);\r\nwhile(index &gt; 0 &amp;&amp; al[index].equals(al[index - 1])){\r\n       index = Arrays.binarySearch(al, 0, index, token); //lower_bound in java.\r\n}\r\n```\r\n\r\nFor upper bound you can easily modify the code. \r\n\r\n","title":"Java equivalent of c++ equal_range (or lower_bound &amp; upper_bound)","body":"<p>If you want to find lower_bound without defining your own method and do everything from scratch, then use the following code snippet. As you may have noticed, this method works only with primitive arrays not with ArrayList because we do not have a function in Collections class to specify the <strong>start</strong> and <strong>stop</strong> index for Binaryserach (as of java16).</p>\n<ul>\n<li>al is an array <code>(String[] al = new String[N];)</code></li>\n<li><code>token</code> is what we are looking for in the array.</li>\n</ul>\n<pre><code>Arrays.sort(al, 0, N); \nint index = Arrays.binarySearch(al, 0, N , token);\nwhile(index &gt; 0 &amp;&amp; al[index].equals(al[index - 1])){\n       index = Arrays.binarySearch(al, 0, index, token); //lower_bound in java.\n}\n</code></pre>\n<p>For upper bound you can easily modify the code.</p>\n"}],"owner":{"account_id":442748,"reputation":5867,"user_id":833538,"accept_rate":90,"display_name":"RoundPi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36267,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":15603895,"answer_count":9,"score":21,"last_activity_date":1676387244,"creation_date":1364158218,"question_id":15603832,"body_markdown":"I have a List of object sorted and I want to find the first occurrence and the last occurrence of an object. In C++, I can easily use std::equal_range (or just one lower_bound and one upper_bound). \r\n\r\nFor example:\r\n\r\n    bool mygreater (int i,int j) { return (i&gt;j); }\r\n    \r\n    int main () {\r\n      int myints[] = {10,20,30,30,20,10,10,20};\r\n      std::vector&lt;int&gt; v(myints,myints+8);                         // 10 20 30 30 20 10 10 20\r\n      std::pair&lt;std::vector&lt;int&gt;::iterator,std::vector&lt;int&gt;::iterator&gt; bounds;\r\n    \r\n      // using default comparison:\r\n      std::sort (v.begin(), v.end());                              // 10 10 10 20 20 20 30 30\r\n      bounds=std::equal_range (v.begin(), v.end(), 20);            //          ^        ^\r\n    \r\n      // using &quot;mygreater&quot; as comp:\r\n      std::sort (v.begin(), v.end(), mygreater);                   // 30 30 20 20 20 10 10 10\r\n      bounds=std::equal_range (v.begin(), v.end(), 20, mygreater); //       ^        ^\r\n    \r\n      std::cout &lt;&lt; &quot;bounds at positions &quot; &lt;&lt; (bounds.first - v.begin());\r\n      std::cout &lt;&lt; &quot; and &quot; &lt;&lt; (bounds.second - v.begin()) &lt;&lt; &#39;\\n&#39;;\r\n    \r\n      return 0;\r\n    }\r\n\r\n\r\nIn Java, there seems to be no simple equivalence? How should I do with the equal range with \r\n\r\n    List&lt;MyClass&gt; myList;\r\n\r\nBy the way, I am using a standard import java.util.List; ","title":"Java equivalent of c++ equal_range (or lower_bound &amp; upper_bound)","body":"<p>I have a List of object sorted and I want to find the first occurrence and the last occurrence of an object. In C++, I can easily use std::equal_range (or just one lower_bound and one upper_bound). </p>\n\n<p>For example:</p>\n\n<pre><code>bool mygreater (int i,int j) { return (i&gt;j); }\n\nint main () {\n  int myints[] = {10,20,30,30,20,10,10,20};\n  std::vector&lt;int&gt; v(myints,myints+8);                         // 10 20 30 30 20 10 10 20\n  std::pair&lt;std::vector&lt;int&gt;::iterator,std::vector&lt;int&gt;::iterator&gt; bounds;\n\n  // using default comparison:\n  std::sort (v.begin(), v.end());                              // 10 10 10 20 20 20 30 30\n  bounds=std::equal_range (v.begin(), v.end(), 20);            //          ^        ^\n\n  // using \"mygreater\" as comp:\n  std::sort (v.begin(), v.end(), mygreater);                   // 30 30 20 20 20 10 10 10\n  bounds=std::equal_range (v.begin(), v.end(), 20, mygreater); //       ^        ^\n\n  std::cout &lt;&lt; \"bounds at positions \" &lt;&lt; (bounds.first - v.begin());\n  std::cout &lt;&lt; \" and \" &lt;&lt; (bounds.second - v.begin()) &lt;&lt; '\\n';\n\n  return 0;\n}\n</code></pre>\n\n<p>In Java, there seems to be no simple equivalence? How should I do with the equal range with </p>\n\n<pre><code>List&lt;MyClass&gt; myList;\n</code></pre>\n\n<p>By the way, I am using a standard import java.util.List; </p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1497253299,"post_id":44493858,"comment_id":75981114,"body_markdown":"You only compare arr1 with arr2 not arr2 with arr1","body":"You only compare arr1 with arr2 not arr2 with arr1"},{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":2,"creation_date":1497253300,"post_id":44493858,"comment_id":75981115,"body_markdown":"Your code finds all the elements of the first list which are not present in the second list. It doesn&#39;t find the elements of the second list not present in the first list.","body":"Your code finds all the elements of the first list which are not present in the second list. It doesn&#39;t find the elements of the second list not present in the first list."},{"owner":{"account_id":4281721,"reputation":1308,"user_id":3500874,"accept_rate":40,"display_name":"Aishu"},"score":0,"creation_date":1497253859,"post_id":44493858,"comment_id":75981447,"body_markdown":"@KishanCS - Have u tested that code whatever the link u shared","body":"@KishanCS - Have u tested that code whatever the link u shared"},{"owner":{"account_id":4281721,"reputation":1308,"user_id":3500874,"accept_rate":40,"display_name":"Aishu"},"score":0,"creation_date":1497253937,"post_id":44493858,"comment_id":75981504,"body_markdown":"I&#39;m not sure why my question got downvoted. Please provide justification if u think it is not valid","body":"I&#39;m not sure why my question got downvoted. Please provide justification if u think it is not valid"},{"owner":{"account_id":4281721,"reputation":1308,"user_id":3500874,"accept_rate":40,"display_name":"Aishu"},"score":0,"creation_date":1497254202,"post_id":44493858,"comment_id":75981666,"body_markdown":"@KishanCS - No, it is not..I want to find unique elements in both the arrays. The link u provided will find unique elements in only one array(i.e arr1)","body":"@KishanCS - No, it is not..I want to find unique elements in both the arrays. The link u provided will find unique elements in only one array(i.e arr1)"},{"owner":{"account_id":7996309,"reputation":1367,"user_id":6032482,"accept_rate":60,"display_name":"KishanCS"},"score":0,"creation_date":1497255315,"post_id":44493858,"comment_id":75982282,"body_markdown":"Check the bellow answer","body":"Check the bellow answer"}],"answers":[{"tags":[],"owner":{"account_id":8870738,"reputation":1640,"user_id":6624525,"accept_rate":86,"display_name":"Markus G."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497253429,"creation_date":1497253429,"answer_id":44493954,"question_id":44493858,"body_markdown":"You have to add a second for-loop to check if elements of arr2 are in arr1 cause you are only checking if elements of arr1 are in arr2\r\n\r\n    public static void main(String[] args) {\r\n            // TODO Auto-generated method stub\r\n    \r\n            int[] arr1 = new int[] { 1, 2, 3, 4, 5, 6 };\r\n            int[] arr2 = new int[] { 5, 6, 7, 8 };\r\n    \r\n            boolean contains = false;\r\n            List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\r\n            for (int i = 0; i &lt; arr1.length; i++) {\r\n                for (int j = 0; j &lt; arr2.length; j++) {\r\n                    if (arr1[i] == arr2[j]) {\r\n                        contains = true;\r\n                        break;\r\n                    }\r\n                }\r\n    \r\n                if(!contains){\r\n                    list.add(arr1[i]);\r\n                }\r\n                else{\r\n                    contains = false;\r\n                }\r\n            }\r\n           for (int i = 0; i &lt; arr2.length; i++) {\r\n                for (int j = 0; j &lt; arr1.length; j++) {\r\n                    if (arr1[i] == arr2[j]) {\r\n                        contains = true;\r\n                        break;\r\n                    }\r\n                }\r\n    \r\n                if(!contains){\r\n                    list.add(arr2[i]);\r\n                }\r\n                else{\r\n                    contains = false;\r\n                }\r\n            }\r\n            System.out.println(list);\r\n    \r\n        }","title":"Java - Finding unique elements in two different arrays","body":"<p>You have to add a second for-loop to check if elements of arr2 are in arr1 cause you are only checking if elements of arr1 are in arr2</p>\n\n<pre><code>public static void main(String[] args) {\n        // TODO Auto-generated method stub\n\n        int[] arr1 = new int[] { 1, 2, 3, 4, 5, 6 };\n        int[] arr2 = new int[] { 5, 6, 7, 8 };\n\n        boolean contains = false;\n        List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\n        for (int i = 0; i &lt; arr1.length; i++) {\n            for (int j = 0; j &lt; arr2.length; j++) {\n                if (arr1[i] == arr2[j]) {\n                    contains = true;\n                    break;\n                }\n            }\n\n            if(!contains){\n                list.add(arr1[i]);\n            }\n            else{\n                contains = false;\n            }\n        }\n       for (int i = 0; i &lt; arr2.length; i++) {\n            for (int j = 0; j &lt; arr1.length; j++) {\n                if (arr1[i] == arr2[j]) {\n                    contains = true;\n                    break;\n                }\n            }\n\n            if(!contains){\n                list.add(arr2[i]);\n            }\n            else{\n                contains = false;\n            }\n        }\n        System.out.println(list);\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7996309,"reputation":1367,"user_id":6032482,"accept_rate":60,"display_name":"KishanCS"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1497257960,"creation_date":1497254663,"answer_id":44494318,"question_id":44493858,"body_markdown":"This solves your problem:\r\n\r\n\r\n   \tpublic static void main(String[] args) {\r\n\r\n\t\t// Make the two lists\r\n\t\tList&lt;Integer&gt; list1 = Arrays.asList(1, 2, 3, 4, 4, 5, 6);\r\n\t\tList&lt;Integer&gt; list2 = Arrays.asList(5, 6, 7, 8);\r\n\t\t// Prepare a union\r\n\t\tSet&lt;Integer&gt; union = new HashSet&lt;Integer&gt;(list1);\r\n\t\tunion.addAll(list2);\r\n\t\t// Prepare an intersection\r\n\t\tSet&lt;Integer&gt; intersection = new HashSet&lt;Integer&gt;(list1);\r\n\t\tintersection.retainAll(list2);\r\n\t\t// Subtract the intersection from the union\r\n\t\tunion.removeAll(intersection);\r\n\t\t// Print the result\r\n\t\tfor (Integer n : union) {\r\n\t\t\tSystem.out.println(n);\r\n\t\t}\r\n\t}","title":"Java - Finding unique elements in two different arrays","body":"<p>This solves your problem:</p>\n\n<pre><code>public static void main(String[] args) {\n\n    // Make the two lists\n    List&lt;Integer&gt; list1 = Arrays.asList(1, 2, 3, 4, 4, 5, 6);\n    List&lt;Integer&gt; list2 = Arrays.asList(5, 6, 7, 8);\n    // Prepare a union\n    Set&lt;Integer&gt; union = new HashSet&lt;Integer&gt;(list1);\n    union.addAll(list2);\n    // Prepare an intersection\n    Set&lt;Integer&gt; intersection = new HashSet&lt;Integer&gt;(list1);\n    intersection.retainAll(list2);\n    // Subtract the intersection from the union\n    union.removeAll(intersection);\n    // Print the result\n    for (Integer n : union) {\n        System.out.println(n);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9487126,"reputation":347,"user_id":7053196,"display_name":"Haythem ROUIS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497256297,"creation_date":1497256297,"answer_id":44494792,"question_id":44493858,"body_markdown":"A more optimized way would be using list iterators. \r\n\r\n            int[] arr1 = new int[] { 1, 2, 3, 4, 5, 6 };\r\n    \t\tint[] arr2 = new int[] { 5, 6, 7, 8 };\r\n    \r\n    \t\tList&lt;Integer&gt; list1 = IntStream.of(arr1).boxed().collect(Collectors.toList());\r\n    \t\tList&lt;Integer&gt; list2 = IntStream.of(arr2).boxed().collect(Collectors.toList());\r\n    \r\n    \t\tIterator list1Iter = list1.iterator();\r\n    \t\tboolean contains = false;\r\n    \t\twhile(list1Iter.hasNext()) {\r\n    \t\t\tint val1 = (int)list1Iter.next();\r\n    \t\t\tIterator list2Iter = list2.iterator();\r\n    \t\t\twhile(list2Iter.hasNext()) {\r\n    \t\t\t\tint val2 = (int)list2Iter.next();\r\n    \t\t\t\tif( val1 == val2) {\r\n                        // remove duplicate\r\n    \t\t\t\t\tlist1Iter.remove();\r\n    \t\t\t\t\tlist2Iter.remove();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tlist1.addAll(list2);\r\n    \t\tfor( Object val : list1) {\r\n    \t\t\tSystem.out.println(val);\r\n    \t\t}\r\n\r\nIf you are using Java 8, you can do the following  : \r\n\r\n\tList resultList = list1.stream().filter(nbr -&gt;  !list2.contains(nbr)).collect(Collectors.toList());\r\n\tresultList.addAll(list2.stream().filter(nbr -&gt; !list1.contains(nbr)).collect(Collectors.toList()));\r\n\r\n","title":"Java - Finding unique elements in two different arrays","body":"<p>A more optimized way would be using list iterators. </p>\n\n<pre><code>        int[] arr1 = new int[] { 1, 2, 3, 4, 5, 6 };\n        int[] arr2 = new int[] { 5, 6, 7, 8 };\n\n        List&lt;Integer&gt; list1 = IntStream.of(arr1).boxed().collect(Collectors.toList());\n        List&lt;Integer&gt; list2 = IntStream.of(arr2).boxed().collect(Collectors.toList());\n\n        Iterator list1Iter = list1.iterator();\n        boolean contains = false;\n        while(list1Iter.hasNext()) {\n            int val1 = (int)list1Iter.next();\n            Iterator list2Iter = list2.iterator();\n            while(list2Iter.hasNext()) {\n                int val2 = (int)list2Iter.next();\n                if( val1 == val2) {\n                    // remove duplicate\n                    list1Iter.remove();\n                    list2Iter.remove();\n                }\n            }\n        }\n        list1.addAll(list2);\n        for( Object val : list1) {\n            System.out.println(val);\n        }\n</code></pre>\n\n<p>If you are using Java 8, you can do the following  : </p>\n\n<pre><code>List resultList = list1.stream().filter(nbr -&gt;  !list2.contains(nbr)).collect(Collectors.toList());\nresultList.addAll(list2.stream().filter(nbr -&gt; !list1.contains(nbr)).collect(Collectors.toList()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1497256371,"creation_date":1497256371,"answer_id":44494814,"question_id":44493858,"body_markdown":"If you are using java 8 i would suggest this solution :\r\n\r\n    public static void main(String[] args) {\r\n        int[] arr1 = new int[]{1, 2, 3, 4, 5, 6};\r\n        int[] arr2 = new int[]{5, 6, 7, 8};\r\n    \r\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();//create a list or Integers\r\n        //add the values of the two arrays in this list\r\n        list.addAll(Arrays.stream(arr1).boxed().collect(Collectors.toList()));\r\n        list.addAll(Arrays.stream(arr2).boxed().collect(Collectors.toList()));\r\n    \r\n        //we need a set to check if the element is duplicate or not\r\n        Set&lt;Integer&gt; set = new HashSet();\r\n        List&lt;Integer&gt; result = new ArrayList&lt;&gt;(list);\r\n\r\n        //loop throw your list, and check if you can add this element to the set\r\n        // or not, if not this mean it is duplicate you have to remove it from your list\r\n        list.stream().filter((i) -&gt; (!set.add(i))).forEachOrdered((i) -&gt; {\r\n            result.removeAll(Collections.singleton(i));\r\n        });\r\n\r\n        System.out.println(result);\r\n    }\r\n\r\n**Output**\r\n\r\n    [1, 2, 3, 4, 7, 8]\r\n\r\n---\r\n\r\nTo solve this problem, i based to this posts : https://stackoverflow.com/questions/7414667/identify-duplicates-in-a-list","title":"Java - Finding unique elements in two different arrays","body":"<p>If you are using java 8 i would suggest this solution :</p>\n\n<pre><code>public static void main(String[] args) {\n    int[] arr1 = new int[]{1, 2, 3, 4, 5, 6};\n    int[] arr2 = new int[]{5, 6, 7, 8};\n\n    List&lt;Integer&gt; list = new ArrayList&lt;&gt;();//create a list or Integers\n    //add the values of the two arrays in this list\n    list.addAll(Arrays.stream(arr1).boxed().collect(Collectors.toList()));\n    list.addAll(Arrays.stream(arr2).boxed().collect(Collectors.toList()));\n\n    //we need a set to check if the element is duplicate or not\n    Set&lt;Integer&gt; set = new HashSet();\n    List&lt;Integer&gt; result = new ArrayList&lt;&gt;(list);\n\n    //loop throw your list, and check if you can add this element to the set\n    // or not, if not this mean it is duplicate you have to remove it from your list\n    list.stream().filter((i) -&gt; (!set.add(i))).forEachOrdered((i) -&gt; {\n        result.removeAll(Collections.singleton(i));\n    });\n\n    System.out.println(result);\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>[1, 2, 3, 4, 7, 8]\n</code></pre>\n\n<hr>\n\n<p>To solve this problem, i based to this posts : <a href=\"https://stackoverflow.com/questions/7414667/identify-duplicates-in-a-list\">Identify duplicates in a List</a></p>\n"},{"tags":[],"owner":{"account_id":3971227,"reputation":8507,"user_id":3275788,"display_name":"wumpz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1497278205,"creation_date":1497257856,"answer_id":44495271,"question_id":44493858,"body_markdown":"And here another streaming (Java 8) solution. Using streams one should avoid modifying stream outside variables.\r\n\r\nThe idea here is to union the lists and then to count the occurance of each item. All items with count 1 are only in one list. Those are collected to the result list.\r\n\r\n        //using here Integer instead of atomic int, simplifies the union.\r\n        Integer[] arr1 = new Integer[]{1, 2, 3, 4, 5, 6};\r\n        Integer[] arr2 = new Integer[]{5, 6, 7, 8};\r\n\r\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n        list.addAll(new HashSet&lt;&gt;(Arrays.asList(arr1)));\r\n        list.addAll(new HashSet&lt;&gt;(Arrays.asList(arr2)));\r\n\r\n        System.out.println(\r\n                list.stream()\r\n                        .collect(groupingBy(identity(), counting()))\r\n                        .entrySet().stream()\r\n                        .filter(i -&gt; i.getValue() == 1)\r\n                        .map(i -&gt; i.getKey())\r\n                        .collect(toList())\r\n        );\r\n\r\n\r\n**EDIT:**\r\nChanged this answer to adress multiples within one list problem.","title":"Java - Finding unique elements in two different arrays","body":"<p>And here another streaming (Java 8) solution. Using streams one should avoid modifying stream outside variables.</p>\n\n<p>The idea here is to union the lists and then to count the occurance of each item. All items with count 1 are only in one list. Those are collected to the result list.</p>\n\n<pre><code>    //using here Integer instead of atomic int, simplifies the union.\n    Integer[] arr1 = new Integer[]{1, 2, 3, 4, 5, 6};\n    Integer[] arr2 = new Integer[]{5, 6, 7, 8};\n\n    List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n    list.addAll(new HashSet&lt;&gt;(Arrays.asList(arr1)));\n    list.addAll(new HashSet&lt;&gt;(Arrays.asList(arr2)));\n\n    System.out.println(\n            list.stream()\n                    .collect(groupingBy(identity(), counting()))\n                    .entrySet().stream()\n                    .filter(i -&gt; i.getValue() == 1)\n                    .map(i -&gt; i.getKey())\n                    .collect(toList())\n    );\n</code></pre>\n\n<p><strong>EDIT:</strong>\nChanged this answer to adress multiples within one list problem.</p>\n"},{"tags":[],"owner":{"account_id":332245,"reputation":16487,"user_id":657427,"accept_rate":67,"display_name":"Christophe Roussy"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1497261117,"creation_date":1497258635,"answer_id":44495566,"question_id":44493858,"body_markdown":"Using HashSet, for educative purposes, which could be very fast if lists are big:\r\n\r\n      public static void main(final String[] args) {\r\n        final List&lt;Integer&gt; list1 = new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3, 4, 5, 6));\r\n        final Set&lt;Integer&gt; set1 = new HashSet&lt;&gt;(list1);\r\n\r\n        final List&lt;Integer&gt; list2 = new ArrayList&lt;&gt;(Arrays.asList(5, 6, 7, 8));\r\n        final Set&lt;Integer&gt; set2 = new HashSet&lt;&gt;(list2);\r\n    \r\n        set1.retainAll(set2); // Keep union.\r\n    \r\n        // Remove union to keep only unique items.\r\n        list1.removeAll(set1);\r\n        list2.removeAll(set1);\r\n    \r\n        // Accumulate unique items.\r\n        list1.addAll(list2);\r\n\r\n        System.out.println(new HashSet&lt;&gt;(list1));\r\n        // [1,2,3,4,7,8]\r\n      }\r\n\r\n","title":"Java - Finding unique elements in two different arrays","body":"<p>Using HashSet, for educative purposes, which could be very fast if lists are big:</p>\n\n<pre><code>  public static void main(final String[] args) {\n    final List&lt;Integer&gt; list1 = new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3, 4, 5, 6));\n    final Set&lt;Integer&gt; set1 = new HashSet&lt;&gt;(list1);\n\n    final List&lt;Integer&gt; list2 = new ArrayList&lt;&gt;(Arrays.asList(5, 6, 7, 8));\n    final Set&lt;Integer&gt; set2 = new HashSet&lt;&gt;(list2);\n\n    set1.retainAll(set2); // Keep union.\n\n    // Remove union to keep only unique items.\n    list1.removeAll(set1);\n    list2.removeAll(set1);\n\n    // Accumulate unique items.\n    list1.addAll(list2);\n\n    System.out.println(new HashSet&lt;&gt;(list1));\n    // [1,2,3,4,7,8]\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12696458,"reputation":1,"user_id":9224741,"display_name":"Goal Android"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1516112975,"creation_date":1516112975,"answer_id":48283538,"question_id":44493858,"body_markdown":"    import java.util.Scanner;\r\n    import java.io.*;\r\n    \r\n    \r\n    public class CandidateCode{\r\n        static int count =0;\r\n        public static void main(String args[])\r\n        {\r\n            \r\n        int n,n1;\r\n        Scanner sc=new Scanner(System.in);\r\n        System.out.println(&quot;Enter no. of elements for first array&quot;);\r\n        n=sc.nextInt();\r\n        int arr[]=new int[n];\r\n        System.out.println(&quot;Enter the elements of first array&quot;);\r\n        for(int i=0;i&lt;n;i++)\r\n        {\r\n            arr[i]=sc.nextInt();\r\n            \r\n        }\r\n        System.out.println(&quot;Enter no. of elements for second array&quot;);\r\n        n1=sc.nextInt();\r\n        int arr1[]=new int[n1];\r\n        System.out.println(&quot;Enter the elements of second array&quot;);\r\n        for(int i=0;i&lt;n1;i++)\r\n        {\r\n            arr1[i]=sc.nextInt();\r\n            \r\n        }\r\n        unique_ele(arr,arr1);\r\n        unique_ele(arr1,arr);\r\n        System.out.println(&quot;The number of unique elements are&quot;);\r\n        System.out.println(count);\r\n        }\r\n        public static int unique_ele(int arr2[],int arr3[])\r\n        {\r\n            boolean contains = false;\r\n            for(int i=0;i&lt;arr2.length;i++)\r\n            {\r\n                for(int j=0;j&lt;arr3.length;j++)\r\n                {\r\n                    if (arr2[i] == arr3[j]) {\r\n                        contains = true;\r\n                        break;\r\n                    }            \r\n                    \r\n                }\r\n                 if(!contains){\r\n                   count++;\r\n                }\r\n                else{\r\n                    contains = false;\r\n                }\r\n            }\r\n            \r\n            return count;    \r\n        }\r\n          \r\n    }\r\n         \r\n","title":"Java - Finding unique elements in two different arrays","body":"<pre><code>import java.util.Scanner;\nimport java.io.*;\n\n\npublic class CandidateCode{\n    static int count =0;\n    public static void main(String args[])\n    {\n\n    int n,n1;\n    Scanner sc=new Scanner(System.in);\n    System.out.println(\"Enter no. of elements for first array\");\n    n=sc.nextInt();\n    int arr[]=new int[n];\n    System.out.println(\"Enter the elements of first array\");\n    for(int i=0;i&lt;n;i++)\n    {\n        arr[i]=sc.nextInt();\n\n    }\n    System.out.println(\"Enter no. of elements for second array\");\n    n1=sc.nextInt();\n    int arr1[]=new int[n1];\n    System.out.println(\"Enter the elements of second array\");\n    for(int i=0;i&lt;n1;i++)\n    {\n        arr1[i]=sc.nextInt();\n\n    }\n    unique_ele(arr,arr1);\n    unique_ele(arr1,arr);\n    System.out.println(\"The number of unique elements are\");\n    System.out.println(count);\n    }\n    public static int unique_ele(int arr2[],int arr3[])\n    {\n        boolean contains = false;\n        for(int i=0;i&lt;arr2.length;i++)\n        {\n            for(int j=0;j&lt;arr3.length;j++)\n            {\n                if (arr2[i] == arr3[j]) {\n                    contains = true;\n                    break;\n                }            \n\n            }\n             if(!contains){\n               count++;\n            }\n            else{\n                contains = false;\n            }\n        }\n\n        return count;    \n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9902388,"reputation":189,"user_id":7332002,"display_name":"Muhammad Aasharib Nawshad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557073690,"creation_date":1557073690,"answer_id":55994074,"question_id":44493858,"body_markdown":"    public static ArrayList&lt;Integer&gt; findUniqueAmongLists(ArrayList&lt;Integer&gt; a, ArrayList&lt;Integer&gt; b){\r\n        \tArrayList&lt;Integer&gt; uniqueArr = new ArrayList&lt;&gt;();\r\n        \tArrayList&lt;Integer&gt; duplicateArr = new ArrayList&lt;&gt;();\r\n        \tfor(int i=0; i&lt; a.size(); i++){\r\n        \t\tif(!duplicateArr.contains(a.get(i))){\r\n        \t\t\tuniqueArr.add(a.get(i));\r\n        \t\t\tduplicateArr.add(a.get(i));\r\n        \t\t}\r\n        \t\telse{\r\n        \t\t\tuniqueArr.remove(a.get(i));\r\n        \t\t}\r\n        \t}\r\n        \tfor(int j=0; j&lt; b.size(); j++){\r\n        \t\tif(!duplicateArr.contains(b.get(j))){\r\n        \t\t\tuniqueArr.add(b.get(j));\r\n        \t\t\tduplicateArr.add(b.get(j));\r\n        \t\t}\r\n        \t\telse{\r\n        \t\t\tuniqueArr.remove(b.get(j));\r\n        \t\t}\r\n        \t}\r\n        \treturn uniqueArr;\r\n        }","title":"Java - Finding unique elements in two different arrays","body":"<pre><code>public static ArrayList&lt;Integer&gt; findUniqueAmongLists(ArrayList&lt;Integer&gt; a, ArrayList&lt;Integer&gt; b){\n        ArrayList&lt;Integer&gt; uniqueArr = new ArrayList&lt;&gt;();\n        ArrayList&lt;Integer&gt; duplicateArr = new ArrayList&lt;&gt;();\n        for(int i=0; i&lt; a.size(); i++){\n            if(!duplicateArr.contains(a.get(i))){\n                uniqueArr.add(a.get(i));\n                duplicateArr.add(a.get(i));\n            }\n            else{\n                uniqueArr.remove(a.get(i));\n            }\n        }\n        for(int j=0; j&lt; b.size(); j++){\n            if(!duplicateArr.contains(b.get(j))){\n                uniqueArr.add(b.get(j));\n                duplicateArr.add(b.get(j));\n            }\n            else{\n                uniqueArr.remove(b.get(j));\n            }\n        }\n        return uniqueArr;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18524246,"reputation":1,"user_id":13496485,"display_name":"himani tiwari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589162435,"creation_date":1589137540,"answer_id":61717339,"question_id":44493858,"body_markdown":"    int[] arr1 = new int[] { 1, 2, 3, 4, 5, 6 };\r\n\t\tint[] arr2 = new int[] { 5, 6, 7, 8 };\r\n\r\n\t\tboolean contains = false;\r\n\t\tList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\r\n\t\tfor (int i = 0; i &lt; arr1.length; i++) {\r\n\t\t\tfor (int j = 0; j &lt; arr2.length; j++) {\r\n\t\t\t\tif (arr1[i] == arr2[j]) {\r\n\t\t\t\t\tcontains = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (!contains) {\r\n\t\t\t\tlist.add(arr1[i]);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tcontains = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (int j = 0; j &lt; arr2.length; j++) {\r\n\t\t\tfor (int k = 0; k &lt; arr1.length; k++) {\r\n\t\t\t\tif (arr2[j] == arr1[k]) {\r\n\t\t\t\t\tcontains = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tif (!contains) {\r\n\r\n\t\t\t\tlist.add(arr2[j]);\r\n\t\t\t} else {\r\n\t\t\t\tcontains = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(list);\r\n\t}","title":"Java - Finding unique elements in two different arrays","body":"<pre><code>int[] arr1 = new int[] { 1, 2, 3, 4, 5, 6 };\n    int[] arr2 = new int[] { 5, 6, 7, 8 };\n\n    boolean contains = false;\n    List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\n    for (int i = 0; i &lt; arr1.length; i++) {\n        for (int j = 0; j &lt; arr2.length; j++) {\n            if (arr1[i] == arr2[j]) {\n                contains = true;\n                break;\n            }\n\n        }\n\n        if (!contains) {\n            list.add(arr1[i]);\n\n        } else {\n            contains = false;\n        }\n    }\n\n    for (int j = 0; j &lt; arr2.length; j++) {\n        for (int k = 0; k &lt; arr1.length; k++) {\n            if (arr2[j] == arr1[k]) {\n                contains = true;\n                break;\n            }\n\n        }\n        if (!contains) {\n\n            list.add(arr2[j]);\n        } else {\n            contains = false;\n        }\n    }\n    System.out.println(list);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16569445,"reputation":222,"user_id":11973019,"display_name":"Nuwan Harshakumara Piyarathna"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1676387155,"creation_date":1589159757,"answer_id":61720835,"question_id":44493858,"body_markdown":"Actually, there is a more simple solution using Java TreeSet.java TreeSet doesn&#39;t contain duplicate elements. Therefore, all you have to do is create a TreeSet and adding all elements to it. It also keeps the natural (sorted) Order.\r\n\r\n    public static void main(String[] args) {\r\n        int[] arr1 = new int[] { 1, 2, 3, 4, 5, 6 };\r\n        int[] arr2 = new int[] { 5, 6, 7, 8 };\r\n        TreeSet&lt;Integer&gt; set = new TreeSet&lt;&gt;();\r\n        for (int i:arr1) {\r\n            set.add(i);\r\n        }\r\n        for (int i:arr2) {\r\n            set.add(i);\r\n        }\r\n        System.out.println(set);\r\n    }\r\noutput: [1, 2, 3, 4, 5, 6, 7, 8]","title":"Java - Finding unique elements in two different arrays","body":"<p>Actually, there is a more simple solution using Java TreeSet.java TreeSet doesn't contain duplicate elements. Therefore, all you have to do is create a TreeSet and adding all elements to it. It also keeps the natural (sorted) Order.</p>\n<pre><code>public static void main(String[] args) {\n    int[] arr1 = new int[] { 1, 2, 3, 4, 5, 6 };\n    int[] arr2 = new int[] { 5, 6, 7, 8 };\n    TreeSet&lt;Integer&gt; set = new TreeSet&lt;&gt;();\n    for (int i:arr1) {\n        set.add(i);\n    }\n    for (int i:arr2) {\n        set.add(i);\n    }\n    System.out.println(set);\n}\n</code></pre>\n<p>output: [1, 2, 3, 4, 5, 6, 7, 8]</p>\n"},{"tags":[],"owner":{"account_id":20425721,"reputation":21,"user_id":14985771,"display_name":"prakash k"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619351949,"creation_date":1612590604,"answer_id":66073977,"question_id":44493858,"body_markdown":"```\r\npublic class UniqueElementFrom2array {\r\n\r\n\tpublic static void main(String[] args) \r\n\t{      \r\n      int[] a= {1,2,3,4,5,6,7};\r\n      int[] b= {1,2,3,8,9,4,10,11,12};\r\n      int[] c=new int[a.length+b.length];\r\n        int len1=a.length;\r\n        int len2=b.length;\r\n        System.arraycopy(a, 0, c, 0, len1);\r\n        System.arraycopy(b, 0, c, len1,len2);\r\n        Arrays.sort(c);\r\n        System.out.println(Arrays.toString(c));\r\n        Set s=new HashSet();\r\n        \r\n    for(int i=0;i&lt;c.length;i++)\r\n    {\r\n    \tif(!s.contains(c[i]))\r\n    \t{\r\n    \t\ts.add(c[i]);\r\n            System.out.print(c[i] + &quot; &quot;); \r\n    \t}\r\n    }\r\n\t}\r\n}\r\n```","title":"Java - Finding unique elements in two different arrays","body":"<pre><code>public class UniqueElementFrom2array {\n\n    public static void main(String[] args) \n    {      \n      int[] a= {1,2,3,4,5,6,7};\n      int[] b= {1,2,3,8,9,4,10,11,12};\n      int[] c=new int[a.length+b.length];\n        int len1=a.length;\n        int len2=b.length;\n        System.arraycopy(a, 0, c, 0, len1);\n        System.arraycopy(b, 0, c, len1,len2);\n        Arrays.sort(c);\n        System.out.println(Arrays.toString(c));\n        Set s=new HashSet();\n        \n    for(int i=0;i&lt;c.length;i++)\n    {\n        if(!s.contains(c[i]))\n        {\n            s.add(c[i]);\n            System.out.print(c[i] + &quot; &quot;); \n        }\n    }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19105206,"reputation":551,"user_id":13952516,"display_name":"SudhakarH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629983580,"creation_date":1629983580,"answer_id":68939194,"question_id":44493858,"body_markdown":"A complete code using TreeSet in java.\r\n\r\n    import java.util.*;\r\n    import java.util.Scanner;\r\n    public class Main\r\n    {\r\n        public static void uniqElements(int arr1[], int arr2[],int n){\r\n            TreeSet&lt;Integer&gt; set1 = new TreeSet&lt;&gt;();\r\n            TreeSet&lt;Integer&gt; set2 = new TreeSet&lt;&gt;();\r\n            TreeSet&lt;Integer&gt; set3 = new TreeSet&lt;&gt;();\r\n            TreeSet&lt;Integer&gt; set4 = new TreeSet&lt;&gt;();\r\n            for (int i:arr1) {\r\n                set1.add(i);\r\n                set3.add(i);\r\n            }\r\n            for (int i:arr2) {\r\n                set2.add(i);\r\n                set4.add(i);\r\n            }\r\n            set3.addAll(set4);\r\n            set1.retainAll(set2);\r\n            set3.removeAll(set1);\r\n            System.out.println(set3);\r\n        \r\n        }\r\n\t    public static void main(String[] args) {\r\n\t\t    Scanner sc = new Scanner(System.in);\r\n\t\t    int n = sc.nextInt();\r\n\t\t    int[] arr1 = new int[n];\r\n\t\t    int[] arr2 = new int[n];\r\n\t\t    for(int i =0;i&lt;n;i++){\r\n\t\t        arr1[i]=sc.nextInt();\r\n\t\t    }\r\n\t\t    for(int i =0;i&lt;n;i++){\r\n\t\t        arr2[i]=sc.nextInt();\r\n\t\t    }\r\n\t\t    uniqElements(arr1,arr2,n);\r\n\t\t\r\n\t    }\r\n    }\r\n","title":"Java - Finding unique elements in two different arrays","body":"<p>A complete code using TreeSet in java.</p>\n<pre><code>import java.util.*;\nimport java.util.Scanner;\npublic class Main\n{\n    public static void uniqElements(int arr1[], int arr2[],int n){\n        TreeSet&lt;Integer&gt; set1 = new TreeSet&lt;&gt;();\n        TreeSet&lt;Integer&gt; set2 = new TreeSet&lt;&gt;();\n        TreeSet&lt;Integer&gt; set3 = new TreeSet&lt;&gt;();\n        TreeSet&lt;Integer&gt; set4 = new TreeSet&lt;&gt;();\n        for (int i:arr1) {\n            set1.add(i);\n            set3.add(i);\n        }\n        for (int i:arr2) {\n            set2.add(i);\n            set4.add(i);\n        }\n        set3.addAll(set4);\n        set1.retainAll(set2);\n        set3.removeAll(set1);\n        System.out.println(set3);\n    \n    }\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int n = sc.nextInt();\n        int[] arr1 = new int[n];\n        int[] arr2 = new int[n];\n        for(int i =0;i&lt;n;i++){\n            arr1[i]=sc.nextInt();\n        }\n        for(int i =0;i&lt;n;i++){\n            arr2[i]=sc.nextInt();\n        }\n        uniqElements(arr1,arr2,n);\n    \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":371425,"reputation":3209,"user_id":719950,"accept_rate":41,"display_name":"Jeets"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648229279,"creation_date":1648229279,"answer_id":71620933,"question_id":44493858,"body_markdown":"    \r\n\r\n        public static void main(String[] args) {\r\n            int[] arr1 = new int[] { 1, 2, 3, 4, 5, 6 };\r\n            int[] arr2 = new int[] { 5, 6, 7, 8 };\r\n            System.out.println(Stream.concat(Arrays.stream(arr1).boxed(), Arrays.stream(arr2).boxed()).distinct().collect(Collectors.toList()));\r\n    }\r\n\r\n","title":"Java - Finding unique elements in two different arrays","body":"<pre><code>    public static void main(String[] args) {\n        int[] arr1 = new int[] { 1, 2, 3, 4, 5, 6 };\n        int[] arr2 = new int[] { 5, 6, 7, 8 };\n        System.out.println(Stream.concat(Arrays.stream(arr1).boxed(), Arrays.stream(arr2).boxed()).distinct().collect(Collectors.toList()));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19318640,"reputation":121,"user_id":14122804,"display_name":"devtunus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654497854,"creation_date":1654497854,"answer_id":72513953,"question_id":44493858,"body_markdown":"1. Merge all array.\r\n2. Remove elements at merged array that contains second array value.\r\n\r\n```\r\nimport java.util.TreeSet;\r\n\r\npublic class ArrayUnique {\r\n    public static void getUniqueElements(int arr1[], int arr2[]){\r\n\r\n        // Merge all array with treeset \r\n        // it will remove duplicate element\r\n\r\n        TreeSet&lt;Integer&gt; all= new TreeSet&lt;&gt;();\r\n        TreeSet&lt;Integer&gt; secondArray= new TreeSet&lt;&gt;();\r\n        \r\n        for(int i:arr1){\r\n            all.add(i);\r\n        }\r\n        for(int i:arr2){\r\n            all.add(i);\r\n            secondArray.add(i);\r\n        }\r\n\r\n        //Delete element that contains secondArray value\r\n        all.removeAll(secondArray);\r\n\r\n        //print to console\r\n        System.out.println(all);\r\n    }\r\n\r\n\r\n    public static void main(String[] args) {\r\n        \r\n         int[] arr1 = {1,2,3,4};\r\n         int[] arr2 = {1,3,5,10,16};\r\n         getUniqueElements(arr1,arr2);\r\n\r\n         //Result: [2,4]\r\n    \r\n    }\r\n}\r\n\r\n\r\n```","title":"Java - Finding unique elements in two different arrays","body":"<ol>\n<li>Merge all array.</li>\n<li>Remove elements at merged array that contains second array value.</li>\n</ol>\n<pre><code>import java.util.TreeSet;\n\npublic class ArrayUnique {\n    public static void getUniqueElements(int arr1[], int arr2[]){\n\n        // Merge all array with treeset \n        // it will remove duplicate element\n\n        TreeSet&lt;Integer&gt; all= new TreeSet&lt;&gt;();\n        TreeSet&lt;Integer&gt; secondArray= new TreeSet&lt;&gt;();\n        \n        for(int i:arr1){\n            all.add(i);\n        }\n        for(int i:arr2){\n            all.add(i);\n            secondArray.add(i);\n        }\n\n        //Delete element that contains secondArray value\n        all.removeAll(secondArray);\n\n        //print to console\n        System.out.println(all);\n    }\n\n\n    public static void main(String[] args) {\n        \n         int[] arr1 = {1,2,3,4};\n         int[] arr2 = {1,3,5,10,16};\n         getUniqueElements(arr1,arr2);\n\n         //Result: [2,4]\n    \n    }\n}\n\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25356455,"reputation":61,"user_id":19172498,"display_name":"Kishor Mandve"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654499228,"creation_date":1654499228,"answer_id":72514162,"question_id":44493858,"body_markdown":"Try this:\r\n\r\n    \tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tint[] arr1 = new int[] { 1, 2, 3, 4, 5, 6 };\r\n\t\tint[] arr2 = new int[] { 5, 6, 7, 8 };\r\n\t\tList&lt;Integer&gt; list = Stream.concat(Arrays.stream(arr1).boxed(), Arrays.stream(arr2).boxed()).distinct().collect(Collectors.toList());\r\n\t\tSystem.out.println(list);\r\n\r\n\t}\r\n\r\nhope this will resolve issue.","title":"Java - Finding unique elements in two different arrays","body":"<p>Try this:</p>\n<pre><code>    public static void main(String[] args) {\n    // TODO Auto-generated method stub\n    int[] arr1 = new int[] { 1, 2, 3, 4, 5, 6 };\n    int[] arr2 = new int[] { 5, 6, 7, 8 };\n    List&lt;Integer&gt; list = Stream.concat(Arrays.stream(arr1).boxed(), Arrays.stream(arr2).boxed()).distinct().collect(Collectors.toList());\n    System.out.println(list);\n\n}\n</code></pre>\n<p>hope this will resolve issue.</p>\n"},{"tags":[],"owner":{"account_id":21066371,"reputation":41,"user_id":15483536,"display_name":"RAJDEEP SONDARVA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660679900,"creation_date":1660679242,"answer_id":73379545,"question_id":44493858,"body_markdown":"This will give you the unique values from two arrays;\r\n\r\n    public static String[] uniqueArr(String[] names1, String[] \r\n    names2) \r\n    {\r\n    Set&lt;String&gt; set = new HashSet&lt;&gt;(new\r\n    LinkedList&lt;&gt;(Stream.of(names1,\r\n    names2).flatMap(Stream::of).collect(Collectors.toList())));\r\n    String[] arr = new String[set.size()];\r\n    set.toArray(arr);\r\n    return arr;\r\n    }","title":"Java - Finding unique elements in two different arrays","body":"<p>This will give you the unique values from two arrays;</p>\n<pre><code>public static String[] uniqueArr(String[] names1, String[] \nnames2) \n{\nSet&lt;String&gt; set = new HashSet&lt;&gt;(new\nLinkedList&lt;&gt;(Stream.of(names1,\nnames2).flatMap(Stream::of).collect(Collectors.toList())));\nString[] arr = new String[set.size()];\nset.toArray(arr);\nreturn arr;\n}\n</code></pre>\n"}],"owner":{"account_id":4281721,"reputation":1308,"user_id":3500874,"accept_rate":40,"display_name":"Aishu"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30970,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":16,"score":2,"last_activity_date":1676387155,"creation_date":1497253161,"question_id":44493858,"body_markdown":"I need to find the unique elements in two different arrays. \r\n\r\n    public static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \r\n    \t\tint[] arr1 = new int[] { 1, 2, 3, 4, 5, 6 };\r\n    \t\tint[] arr2 = new int[] { 5, 6, 7, 8 };\r\n    \r\n    \t\tboolean contains = false;\r\n    \t\tList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\r\n    \t\tfor (int i = 0; i &lt; arr1.length; i++) {\r\n    \t\t\tfor (int j = 0; j &lt; arr2.length; j++) {\r\n    \t\t\t\tif (arr1[i] == arr2[j]) {\r\n    \t\t\t\t\tcontains = true;\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tif(!contains){\r\n    \t\t\t\tlist.add(arr1[i]);\r\n    \t\t\t}\r\n    \t\t\telse{\r\n    \t\t\t\tcontains = false;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tSystem.out.println(list);\r\n    \r\n    \t}\r\n\r\nBut here I&#39;m getting `[1,2,3,4]` as output. But the expected output is `[1,2,3,4,7,8]`. I&#39;m not sure what I&#39;m doing wrong here. And I need it in a traditional way. I don&#39;t want to use any inbuilt methods to acheive this.\r\n\r\nNote: I feel it is not a duplicate because, the solution provided is not finding the unique elements on two arrays.\r\n\r\n","title":"Java - Finding unique elements in two different arrays","body":"<p>I need to find the unique elements in two different arrays. </p>\n\n<pre><code>public static void main(String[] args) {\n        // TODO Auto-generated method stub\n\n        int[] arr1 = new int[] { 1, 2, 3, 4, 5, 6 };\n        int[] arr2 = new int[] { 5, 6, 7, 8 };\n\n        boolean contains = false;\n        List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\n        for (int i = 0; i &lt; arr1.length; i++) {\n            for (int j = 0; j &lt; arr2.length; j++) {\n                if (arr1[i] == arr2[j]) {\n                    contains = true;\n                    break;\n                }\n            }\n\n            if(!contains){\n                list.add(arr1[i]);\n            }\n            else{\n                contains = false;\n            }\n        }\n        System.out.println(list);\n\n    }\n</code></pre>\n\n<p>But here I'm getting <code>[1,2,3,4]</code> as output. But the expected output is <code>[1,2,3,4,7,8]</code>. I'm not sure what I'm doing wrong here. And I need it in a traditional way. I don't want to use any inbuilt methods to acheive this.</p>\n\n<p>Note: I feel it is not a duplicate because, the solution provided is not finding the unique elements on two arrays.</p>\n"},{"tags":["java","spring-webflux","project-reactor","reactive"],"answers":[{"tags":[],"owner":{"account_id":11171319,"reputation":2160,"user_id":8198203,"accept_rate":75,"display_name":"Frischling"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1551806551,"creation_date":1551792386,"answer_id":55003975,"question_id":55001326,"body_markdown":"`Flux.range(1,10).take(1)` should do the trick (the `range(...)` part here is only to emit some sample values; if you `blockFirst()` or `subscribe()` to the stream, you should see **&#39;1&#39;**)","title":"Is it possible to get the first element from flux without converting flux into stream?","body":"<p><code>Flux.range(1,10).take(1)</code> should do the trick (the <code>range(...)</code> part here is only to emit some sample values; if you <code>blockFirst()</code> or <code>subscribe()</code> to the stream, you should see <strong>'1'</strong>)</p>\n"},{"tags":[],"owner":{"account_id":1126254,"reputation":27393,"user_id":1113486,"display_name":"Simon Basl&#233;"},"down_vote_count":0,"up_vote_count":26,"is_accepted":true,"score":26,"last_activity_date":1551881148,"creation_date":1551881148,"answer_id":55024995,"question_id":55001326,"body_markdown":"Alternatively to `take(1)`, if you need a `Mono&lt;T&gt;` that represents the first element of the `Flux&lt;T&gt;` you can use `.next()`.\r\n\r\nOr if you need the i-th element, use `.elementAt(i)` (must be sure that such an element exists though, unlike `take` and `next` which just return an empty publisher if not enough elements).","title":"Is it possible to get the first element from flux without converting flux into stream?","body":"<p>Alternatively to <code>take(1)</code>, if you need a <code>Mono&lt;T&gt;</code> that represents the first element of the <code>Flux&lt;T&gt;</code> you can use <code>.next()</code>.</p>\n\n<p>Or if you need the i-th element, use <code>.elementAt(i)</code> (must be sure that such an element exists though, unlike <code>take</code> and <code>next</code> which just return an empty publisher if not enough elements).</p>\n"},{"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676387115,"creation_date":1675196400,"answer_id":75302706,"question_id":55001326,"body_markdown":"Also the easiest: you can convert your `Flux` to `Mono` using [Mono.from()][1]\r\n\r\n    Mono&lt;T&gt; mono = Mono.from(flux);\r\n\r\nIt takes the first element of flux or completes with empty if flux has not emitted any element.\r\n\r\n  [1]: https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#from-org.reactivestreams.Publisher-","title":"Is it possible to get the first element from flux without converting flux into stream?","body":"<p>Also the easiest: you can convert your <code>Flux</code> to <code>Mono</code> using <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#from-org.reactivestreams.Publisher-\" rel=\"nofollow noreferrer\">Mono.from()</a></p>\n<pre><code>Mono&lt;T&gt; mono = Mono.from(flux);\n</code></pre>\n<p>It takes the first element of flux or completes with empty if flux has not emitted any element.</p>\n"}],"owner":{"account_id":9419109,"reputation":675,"user_id":7005973,"accept_rate":0,"display_name":"Dil1y_reddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27944,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":55024995,"answer_count":3,"score":20,"last_activity_date":1676387115,"creation_date":1551783747,"question_id":55001326,"body_markdown":"Is it possible to get the first element from flux without converting flux into stream?","title":"Is it possible to get the first element from flux without converting flux into stream?","body":"<p>Is it possible to get the first element from flux without converting flux into stream?</p>\n"},{"tags":["java","postgresql","jpa","eclipselink"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":2,"creation_date":1676365739,"post_id":75445430,"comment_id":133117553,"body_markdown":"How come you are checking `d != null` the line after an unguarded call to `d.size()`?","body":"How come you are checking <code>d != null</code> the line after an unguarded call to <code>d.size()</code>?"},{"owner":{"account_id":13179806,"reputation":91,"user_id":21197077,"display_name":"gneginskiy"},"score":0,"creation_date":1676365831,"post_id":75445430,"comment_id":133117588,"body_markdown":"same thoughts. log all the incoming parameters to know which are nulls. or run it in a debug mode. d.size() is a main suspect","body":"same thoughts. log all the incoming parameters to know which are nulls. or run it in a debug mode. d.size() is a main suspect"},{"owner":{"account_id":7777897,"reputation":261,"user_id":10307613,"display_name":"ATW"},"score":0,"creation_date":1676366474,"post_id":75445430,"comment_id":133117767,"body_markdown":"@khelwood Yes, thank you, that&#39;s a code point but neither a nor d is null when I run it correctly. But you are right, I have to do the check somewhere further up but the NPE remains the same... I&#39;m just confused how the setMaxResults(...) can cause a NPE when neither page, nor numberOfResults, nor d are null...","body":"@khelwood Yes, thank you, that&#39;s a code point but neither a nor d is null when I run it correctly. But you are right, I have to do the check somewhere further up but the NPE remains the same... I&#39;m just confused how the setMaxResults(...) can cause a NPE when neither page, nor numberOfResults, nor d are null..."},{"owner":{"account_id":1718670,"reputation":4778,"user_id":1575188,"display_name":"fantaghirocco"},"score":0,"creation_date":1676367069,"post_id":75445430,"comment_id":133117957,"body_markdown":"Does this answer your question? [What is a NullPointerException, and how do I fix it?](https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"},{"owner":{"account_id":7777897,"reputation":261,"user_id":10307613,"display_name":"ATW"},"score":0,"creation_date":1676367333,"post_id":75445430,"comment_id":133118042,"body_markdown":"@fantaghirocco No. It seems like the NPE is thrown somewhere in the TypedQuery class. As I said, neither a, nor d, nor page, nor numberOfResults is null und the NPE is thrown anyway.","body":"@fantaghirocco No. It seems like the NPE is thrown somewhere in the TypedQuery class. As I said, neither a, nor d, nor page, nor numberOfResults is null und the NPE is thrown anyway."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1676386543,"post_id":75445430,"comment_id":133123946,"body_markdown":"What version of EclipseLink are you using? The stack shows the NPE when building the results and working over a OneToOne relationship - maybe show the entities and the resulting SQL ( https://wiki.eclipse.org/EclipseLink/Examples/JPA/Logging ) The maxResult value you use seems odd - why are you putting in d.size() in there at all? Are you trying to account for a cartesian join somehow? Maybe try using just the absolute number of As you want to return and specify the offset to skip to the current page of values.","body":"What version of EclipseLink are you using? The stack shows the NPE when building the results and working over a OneToOne relationship - maybe show the entities and the resulting SQL ( <a href=\"https://wiki.eclipse.org/EclipseLink/Examples/JPA/Logging\" rel=\"nofollow noreferrer\">wiki.eclipse.org/EclipseLink/Examples/JPA/Logging</a> ) The maxResult value you use seems odd - why are you putting in d.size() in there at all? Are you trying to account for a cartesian join somehow? Maybe try using just the absolute number of As you want to return and specify the offset to skip to the current page of values."}],"owner":{"account_id":7777897,"reputation":261,"user_id":10307613,"display_name":"ATW"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676386827,"creation_date":1676365107,"question_id":75445430,"body_markdown":"I have the following code snippet:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public List&lt;EntityA&gt; getAllEntityAByAAndDPaginated(\r\n            Collection&lt;Long&gt; a, \r\n            Collection&lt;Long&gt; d, \r\n            int numberOfResults, \r\n            int page\r\n        ) {\r\n                TypedQuery&lt;EntityA&gt; q = entityManager.createNamedQuery(EntityA.GET_BY_A_AND_D,\r\n                        EntityA.class);\r\n                q.setParameter(A, a);\r\n                q.setParameter(D, d);\r\n                q.setMaxResults((page + 1) * numberOfResults * d.size()); // without this, it works!\r\n                return a != null &amp;&amp; !a.isEmpty() &amp;&amp; d != null &amp;&amp; !d.isEmpty()\r\n                        ? q.getResultList() : new ArrayList&lt;&gt;();\r\n        }\r\n\r\nFor performance reasons, I am only loading `(page + 1) * numberOfResults * d.size()` results. But executing this, I get a NullPointerException in the last line of the code snippet of the following form:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    java.lang.NullPointerException\r\n\tat java.base/java.util.ArrayList.&lt;init&gt;(ArrayList.java:179)\r\n\tat org.eclipse.persistence.mappings.ForeignReferenceMapping.prepareNestedJoinQueryClone(ForeignReferenceMapping.java:2455)\r\n\tat org.eclipse.persistence.mappings.OneToOneMapping.valueFromRowInternalWithJoin(OneToOneMapping.java:1814)\r\n\tat org.eclipse.persistence.mappings.ForeignReferenceMapping.valueFromRow(ForeignReferenceMapping.java:2177)\r\n\tat org.eclipse.persistence.mappings.ForeignReferenceMapping.buildCloneFromRow(ForeignReferenceMapping.java:341)\r\n\tat org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildAttributesIntoWorkingCopyClone(ObjectBuilder.java:2007)\r\n\tat org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildWorkingCopyCloneFromRow(ObjectBuilder.java:2260)\r\n\tat org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObjectInUnitOfWork(ObjectBuilder.java:858)\r\n\tat org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObject(ObjectBuilder.java:745)\r\n\tat org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObject(ObjectBuilder.java:699)\r\n\tat ...\r\n\r\nAccording the exception stacktrace, it seems like it has tried somewhere to add null values to the result list. When I delete the part `q.setMaxResults((page + 1) * numberOfResults * d.size());`, it works fine, i.e. this has to cause the NPE somehow.\r\n\r\nThe database of EntityA does not contain any null values.\r\n\r\nHow can I fix this?","title":"NullPointerException when setting query.setMaxResuts(...)","body":"<p>I have the following code snippet:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public List&lt;EntityA&gt; getAllEntityAByAAndDPaginated(\n        Collection&lt;Long&gt; a, \n        Collection&lt;Long&gt; d, \n        int numberOfResults, \n        int page\n    ) {\n            TypedQuery&lt;EntityA&gt; q = entityManager.createNamedQuery(EntityA.GET_BY_A_AND_D,\n                    EntityA.class);\n            q.setParameter(A, a);\n            q.setParameter(D, d);\n            q.setMaxResults((page + 1) * numberOfResults * d.size()); // without this, it works!\n            return a != null &amp;&amp; !a.isEmpty() &amp;&amp; d != null &amp;&amp; !d.isEmpty()\n                    ? q.getResultList() : new ArrayList&lt;&gt;();\n    }\n</code></pre>\n<p>For performance reasons, I am only loading <code>(page + 1) * numberOfResults * d.size()</code> results. But executing this, I get a NullPointerException in the last line of the code snippet of the following form:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.NullPointerException\nat java.base/java.util.ArrayList.&lt;init&gt;(ArrayList.java:179)\nat org.eclipse.persistence.mappings.ForeignReferenceMapping.prepareNestedJoinQueryClone(ForeignReferenceMapping.java:2455)\nat org.eclipse.persistence.mappings.OneToOneMapping.valueFromRowInternalWithJoin(OneToOneMapping.java:1814)\nat org.eclipse.persistence.mappings.ForeignReferenceMapping.valueFromRow(ForeignReferenceMapping.java:2177)\nat org.eclipse.persistence.mappings.ForeignReferenceMapping.buildCloneFromRow(ForeignReferenceMapping.java:341)\nat org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildAttributesIntoWorkingCopyClone(ObjectBuilder.java:2007)\nat org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildWorkingCopyCloneFromRow(ObjectBuilder.java:2260)\nat org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObjectInUnitOfWork(ObjectBuilder.java:858)\nat org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObject(ObjectBuilder.java:745)\nat org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObject(ObjectBuilder.java:699)\nat ...\n</code></pre>\n<p>According the exception stacktrace, it seems like it has tried somewhere to add null values to the result list. When I delete the part <code>q.setMaxResults((page + 1) * numberOfResults * d.size());</code>, it works fine, i.e. this has to cause the NPE somehow.</p>\n<p>The database of EntityA does not contain any null values.</p>\n<p>How can I fix this?</p>\n"},{"tags":["java","jdbc"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1676386629,"post_id":75448752,"comment_id":133123979,"body_markdown":"You can reuse `Statement`, but not while traversing a result set created from that statement. If you want to do that, you need to disable auto-commit and use two statement objects. That said, this is better solved with for example SQL standard `MERGE` or similar statements, as it avoids the so-called N+1 query problem that you have. Although with your basic example, you can simply replace the entire select + loop with update code with a single `UPDATE tableName set concern_key = &#39;love&#39;`...","body":"You can reuse <code>Statement</code>, but not while traversing a result set created from that statement. If you want to do that, you need to disable auto-commit and use two statement objects. That said, this is better solved with for example SQL standard <code>MERGE</code> or similar statements, as it avoids the so-called N+1 query problem that you have. Although with your basic example, you can simply replace the entire select + loop with update code with a single <code>UPDATE tableName set concern_key = &#39;love&#39;</code>..."}],"owner":{"account_id":3992180,"reputation":1526,"user_id":3290745,"display_name":"Tristate"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1676386994,"answer_count":0,"score":0,"last_activity_date":1676386779,"creation_date":1676382402,"question_id":75448752,"body_markdown":"Is it possible to create a database connection with statement and reuse this statement for several queries?\r\n\r\nPseudocode:\r\n\r\n```none\r\nJdbcConnection connection = (JdbcConnection) \r\ndatabase.getConnection();\r\nStatement statement = connection.createStatement();\r\n   \r\nexecute SELECT * FROM on statement object\r\n  forEach Result\r\n   execute UPDATE row, on same statement object.\r\n```\r\n\r\nJava code.\r\n```java\r\nJdbcConnection connection = (JdbcConnection) database.getConnection();\r\nStatement statement = null;\r\ntry {\r\n    statement = connection.createStatement();\r\n \r\n//FIRST QUERY &lt;---------\r\nString selectQuery = &quot;SELECT id, concern_key, concern_name FROM &quot; + tableName;\r\ntry (ResultSet resultSet = statement.executeQuery(selectQuery)) {\r\n    List&lt;SqlStatement&gt; updateStatements = new ArrayList&lt;&gt;();\r\n    while (resultSet.next()) {\r\n        String id = resultSet.getString(&quot;id&quot;);\r\n        String concernKey = resultSet.getString(&quot;concern_key&quot;);\r\n        String concernName = resultSet.getString(&quot;concern_name&quot;);\r\n\r\n        // SECOND QUERY &lt;-------\r\n        String selectQuery2 = &quot;UPDATE &quot;+ tableName+&quot; SET concern_key = &#39;love&#39; WHERE concern_key = &#39;&quot; + concernKey + &quot;&#39;&quot;;\r\n        statement.executeUpdate(selectQuery2);\r\n\r\n} catch (LiquibaseException e) {\r\n    LOG.error(&quot;Error migrating table &quot; + tableName, e);\r\n} finally {\r\n    close(statement);\r\n}\r\n```\r\n","title":"Is it possible to reuse a connection statement without closing it?","body":"<p>Is it possible to create a database connection with statement and reuse this statement for several queries?</p>\n<p>Pseudocode:</p>\n<pre class=\"lang-none prettyprint-override\"><code>JdbcConnection connection = (JdbcConnection) \ndatabase.getConnection();\nStatement statement = connection.createStatement();\n   \nexecute SELECT * FROM on statement object\n  forEach Result\n   execute UPDATE row, on same statement object.\n</code></pre>\n<p>Java code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>JdbcConnection connection = (JdbcConnection) database.getConnection();\nStatement statement = null;\ntry {\n    statement = connection.createStatement();\n \n//FIRST QUERY &lt;---------\nString selectQuery = &quot;SELECT id, concern_key, concern_name FROM &quot; + tableName;\ntry (ResultSet resultSet = statement.executeQuery(selectQuery)) {\n    List&lt;SqlStatement&gt; updateStatements = new ArrayList&lt;&gt;();\n    while (resultSet.next()) {\n        String id = resultSet.getString(&quot;id&quot;);\n        String concernKey = resultSet.getString(&quot;concern_key&quot;);\n        String concernName = resultSet.getString(&quot;concern_name&quot;);\n\n        // SECOND QUERY &lt;-------\n        String selectQuery2 = &quot;UPDATE &quot;+ tableName+&quot; SET concern_key = 'love' WHERE concern_key = '&quot; + concernKey + &quot;'&quot;;\n        statement.executeUpdate(selectQuery2);\n\n} catch (LiquibaseException e) {\n    LOG.error(&quot;Error migrating table &quot; + tableName, e);\n} finally {\n    close(statement);\n}\n</code></pre>\n"},{"tags":["java","jax-rs","java-ee-8","jersey-test-framework","tomee-8"],"owner":{"account_id":3191958,"reputation":285,"user_id":2696009,"display_name":"Gerhard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1676386579,"creation_date":1676386268,"question_id":75449552,"body_markdown":"According to the [TomEE Download Page][1], TomEE 8.0 implements the APIs of [Java EE 8][2] and [MicroProfile 2.0][3]. Part of these specifications is the API JAX-RS 2.1.\r\n\r\nRecently, however, I ran into `ClassNotFoundExceptions` when trying to use the the Jersey Testframework (Version 2.38), which also is based on JAX-RS 2.1. When I analyzed this problem, I found that Jersey introduced a dependency jakarta.ws.rs-api-2.1.6.jar, that contained different versions of the API classes than the ones from TomEE 8.0 (javaee-api-8.0-5.jar from org.apache.tomee:javaee-api:8.0-5). Furthermore, the source code from the latter library is commented with *Apache Geronimo JAX-RS Spec 2.0*. On the other hand, a javaee-api-8.0.jar from Oracle (javax:javaee-api:8.0) contains the same classes as the Jersey dependency.\r\n\r\nSo from this, it looks like TomEE is in fact based on JAX-RS 2.0. Can anybody shed a light on this discrepancy?\r\n\r\n\r\n  [1]: https://tomee.apache.org/download.html\r\n  [2]: https://www.oracle.com/java/technologies/java-ee-8.html\r\n  [3]: https://projects.eclipse.org/projects/technology.microprofile/releases/microprofile-2.0","title":"Which version of the JAX-RS API is supported by TomEE 8.0? JAX-RS 2.0 or JAX-RS 2.1?","body":"<p>According to the <a href=\"https://tomee.apache.org/download.html\" rel=\"nofollow noreferrer\">TomEE Download Page</a>, TomEE 8.0 implements the APIs of <a href=\"https://www.oracle.com/java/technologies/java-ee-8.html\" rel=\"nofollow noreferrer\">Java EE 8</a> and <a href=\"https://projects.eclipse.org/projects/technology.microprofile/releases/microprofile-2.0\" rel=\"nofollow noreferrer\">MicroProfile 2.0</a>. Part of these specifications is the API JAX-RS 2.1.</p>\n<p>Recently, however, I ran into <code>ClassNotFoundExceptions</code> when trying to use the the Jersey Testframework (Version 2.38), which also is based on JAX-RS 2.1. When I analyzed this problem, I found that Jersey introduced a dependency jakarta.ws.rs-api-2.1.6.jar, that contained different versions of the API classes than the ones from TomEE 8.0 (javaee-api-8.0-5.jar from org.apache.tomee:javaee-api:8.0-5). Furthermore, the source code from the latter library is commented with <em>Apache Geronimo JAX-RS Spec 2.0</em>. On the other hand, a javaee-api-8.0.jar from Oracle (javax:javaee-api:8.0) contains the same classes as the Jersey dependency.</p>\n<p>So from this, it looks like TomEE is in fact based on JAX-RS 2.0. Can anybody shed a light on this discrepancy?</p>\n"},{"tags":["java","database","spring-boot","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":15107999,"reputation":13,"user_id":10903041,"display_name":"mrKaczorrro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676386378,"creation_date":1676372963,"answer_id":75446959,"question_id":75445895,"body_markdown":"Whenever I need to join data from more than 1 table, I am using Jdbi.\r\n\r\n[Here you have the official documentation:][1]\r\n\r\nRemember to include the required dependencies and configure a bean for Jdbi in your project. \r\n\r\nThen I create a repository class, POJO and query with all of the information which I need. For example:\r\n\r\n    select c.transaction_id as transactionId, t.name as name from ApiAudit c INNER JOIN ApiAudiInfo t ON c.transactionId = t.msgId\r\n\r\n\r\n[Here you have some code samples from official documentation][2]\r\n\r\n\r\n  [1]: https://jdbi.org/\r\n  [2]: https://in3code.dev/_posts/2020-05-11-intro-to-jdbi-and-spring/\r\n\r\nAfter you map your data to POJO, you can use \r\n\r\n    public PageImpl(List&lt;T&gt; content, Pageable pageable, long total)\r\n\r\nto return paginated data.\r\n\r\nThere is a big chance that there is a better solution, but this works for me every time.","title":"Get Data from 2 tables in spring boot jpa","body":"<p>Whenever I need to join data from more than 1 table, I am using Jdbi.</p>\n<p><a href=\"https://jdbi.org/\" rel=\"nofollow noreferrer\">Here you have the official documentation:</a></p>\n<p>Remember to include the required dependencies and configure a bean for Jdbi in your project.</p>\n<p>Then I create a repository class, POJO and query with all of the information which I need. For example:</p>\n<pre><code>select c.transaction_id as transactionId, t.name as name from ApiAudit c INNER JOIN ApiAudiInfo t ON c.transactionId = t.msgId\n</code></pre>\n<p><a href=\"https://in3code.dev/_posts/2020-05-11-intro-to-jdbi-and-spring/\" rel=\"nofollow noreferrer\">Here you have some code samples from official documentation</a></p>\n<p>After you map your data to POJO, you can use</p>\n<pre><code>public PageImpl(List&lt;T&gt; content, Pageable pageable, long total)\n</code></pre>\n<p>to return paginated data.</p>\n<p>There is a big chance that there is a better solution, but this works for me every time.</p>\n"}],"owner":{"account_id":6967732,"reputation":604,"user_id":5345105,"display_name":"Shubham Arya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676386378,"creation_date":1676367356,"question_id":75445895,"body_markdown":"I have one table which has all the api audit information - Table name : **api_audit**\r\n\r\nI have one table which has extra information about every api call - Table name : **api_audit_info**\r\n\r\nInside **api_audit** I have primary key as &quot;**transaction_id**&quot;.\r\n\r\nI want all the data from **api_audit** table and some data from **api_audit_info** table. \r\n\r\nI have written a custom query like -\r\n`@Query(select c from ApiAudit c INNER JOIN ApiAudiInfo t ON c.transactionId = t.msgId)`\r\n\r\nBut the issue is that the result type that I am getting this way contains only ApiAudit type data.\r\nWhat shall I do to get data from both the tables. Please help.\r\n\r\nNote: I am using JpaRepository as I need paginated data.\r\n\r\nI am fairly new to Spring boot and JPA so not sure exactly which direction to look to.","title":"Get Data from 2 tables in spring boot jpa","body":"<p>I have one table which has all the api audit information - Table name : <strong>api_audit</strong></p>\n<p>I have one table which has extra information about every api call - Table name : <strong>api_audit_info</strong></p>\n<p>Inside <strong>api_audit</strong> I have primary key as &quot;<strong>transaction_id</strong>&quot;.</p>\n<p>I want all the data from <strong>api_audit</strong> table and some data from <strong>api_audit_info</strong> table.</p>\n<p>I have written a custom query like -\n<code>@Query(select c from ApiAudit c INNER JOIN ApiAudiInfo t ON c.transactionId = t.msgId)</code></p>\n<p>But the issue is that the result type that I am getting this way contains only ApiAudit type data.\nWhat shall I do to get data from both the tables. Please help.</p>\n<p>Note: I am using JpaRepository as I need paginated data.</p>\n<p>I am fairly new to Spring boot and JPA so not sure exactly which direction to look to.</p>\n"},{"tags":["java","amazon-ec2","jakarta-ee","wildfly"],"comments":[{"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"score":0,"creation_date":1676455191,"post_id":75449261,"comment_id":133138334,"body_markdown":"Assuming your scheduler is inside an autostartup singleton session bean, I think you could restart the bean using the web admin (or via JBoss CLI)","body":"Assuming your scheduler is inside an autostartup singleton session bean, I think you could restart the bean using the web admin (or via JBoss CLI)"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":1,"creation_date":1676488414,"post_id":75449261,"comment_id":133149001,"body_markdown":"I would first try to determine why it needs to be restarted.","body":"I would first try to determine why it needs to be restarted."},{"owner":{"account_id":3803644,"reputation":1290,"user_id":3156607,"display_name":"Dennis Kieselhorst"},"score":0,"creation_date":1678183570,"post_id":75449261,"comment_id":133479897,"body_markdown":"Another option would be to externalize the scheduling using Amazon EventBridge: https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-create-rule-schedule.html","body":"Another option would be to externalize the scheduling using Amazon EventBridge: <a href=\"https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-create-rule-schedule.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/eventbridge/latest/userguide/&hellip;</a>"}],"owner":{"account_id":9656914,"reputation":213,"user_id":7166176,"display_name":"Emmajiugo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676386328,"creation_date":1676384905,"question_id":75449261,"body_markdown":"I have a task scheduler that runs every 10mins. I noticed that sometimes it stops running, and I need to restart Wildfly or the server for it to kick back up.\r\n\r\nIs there a way I can restart the scheduler without restarting the server or Wildfly?\r\nThe project is deployed to Wildfly on EC2.","title":"Restart a Task Scheduler (@Schedule(...)) without restarting the server/wildfly","body":"<p>I have a task scheduler that runs every 10mins. I noticed that sometimes it stops running, and I need to restart Wildfly or the server for it to kick back up.</p>\n<p>Is there a way I can restart the scheduler without restarting the server or Wildfly?\nThe project is deployed to Wildfly on EC2.</p>\n"},{"tags":["java","spring-data","spring-data-elasticsearch"],"owner":{"account_id":1644520,"reputation":540,"user_id":1516291,"display_name":"Wang Tang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676386211,"creation_date":1676386211,"question_id":75449540,"body_markdown":"I have kind of a combination-follow up question to [1] and [2].\r\n\r\nI have a POJO with a field I want to persist in - and read from - Elasticsearch:\r\n```java\r\n@Document\r\npublic class MyPojo {\r\n\r\n    private String level3;\r\n\r\n    // getters/setters...\r\n}\r\n```\r\nFor convenience and because the property is also being persisted (flatly) into postgres, the property `level3` should be a String, however it should be written into ES as a nested object (because the ES index is defined elsewhere).\r\n\r\nThe current solution is unsatisfactory:\r\n\r\n```java\r\n@Document\r\n@Entity\r\npublic class MyPojo {\r\n\r\n    @Column(name = &quot;level3)\r\n    @Field(name = &quot;level3&quot;, type = FieldType.Keyword)\r\n    @ValueConverter(MyConverter.class)\r\n    private String level3;\r\n\r\n    // getters/setters...\r\n}\r\n```\r\nwith the object path &quot;level1.level2.level3&quot; hardcoded within MyConverter, which converts from Map&lt;String, Object&gt; to String (read) and from String to Map&lt;String, Object&gt; (write). Because we potentially need to do this on multiple fields, this is not a really viable solution.\r\n\r\nI&#39;d rather do something like this:\r\n```java\r\n@Document\r\n@Entity\r\npublic class MyPojo {\r\n\r\n    @Column(name = &quot;level3)\r\n    @Field(name = &quot;level1.level2.level3&quot;, type = FieldType.Keyword)\r\n    @ValueConverter(MyConverter2.class)\r\n    private String level3;\r\n\r\n    // getters/setters...\r\n}\r\n```\r\nwhich does not work (writing works fine, while reading we get the &quot;null is not a map&quot; error from [2]).\r\n\r\n1. Is this at all possible (if I understood [2] correctly, no)? If not, is there another way to achieve what I want without hardcoding and an extra converter per field?\r\n2. Can I somehow access the @Field annotation within MyConverter (e.g. the name), or can I somehow supply additional arguments to MyConverter?\r\n\r\n---\r\n[1] https://stackoverflow.com/questions/75251142/spring-data-elasticsearch-embedded-field-mapping\r\n\r\n[2] https://stackoverflow.com/questions/65140621/spring-elasticsearch-adding-fields-to-working-pojo-class-causes-illegalargument","title":"Spring Data Elasticsearch: Convert a String to an Object (and vice versa) using ValueConverter and dot-notation","body":"<p>I have kind of a combination-follow up question to [1] and [2].</p>\n<p>I have a POJO with a field I want to persist in - and read from - Elasticsearch:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Document\npublic class MyPojo {\n\n    private String level3;\n\n    // getters/setters...\n}\n</code></pre>\n<p>For convenience and because the property is also being persisted (flatly) into postgres, the property <code>level3</code> should be a String, however it should be written into ES as a nested object (because the ES index is defined elsewhere).</p>\n<p>The current solution is unsatisfactory:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Document\n@Entity\npublic class MyPojo {\n\n    @Column(name = &quot;level3)\n    @Field(name = &quot;level3&quot;, type = FieldType.Keyword)\n    @ValueConverter(MyConverter.class)\n    private String level3;\n\n    // getters/setters...\n}\n</code></pre>\n<p>with the object path &quot;level1.level2.level3&quot; hardcoded within MyConverter, which converts from Map&lt;String, Object&gt; to String (read) and from String to Map&lt;String, Object&gt; (write). Because we potentially need to do this on multiple fields, this is not a really viable solution.</p>\n<p>I'd rather do something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Document\n@Entity\npublic class MyPojo {\n\n    @Column(name = &quot;level3)\n    @Field(name = &quot;level1.level2.level3&quot;, type = FieldType.Keyword)\n    @ValueConverter(MyConverter2.class)\n    private String level3;\n\n    // getters/setters...\n}\n</code></pre>\n<p>which does not work (writing works fine, while reading we get the &quot;null is not a map&quot; error from [2]).</p>\n<ol>\n<li>Is this at all possible (if I understood [2] correctly, no)? If not, is there another way to achieve what I want without hardcoding and an extra converter per field?</li>\n<li>Can I somehow access the @Field annotation within MyConverter (e.g. the name), or can I somehow supply additional arguments to MyConverter?</li>\n</ol>\n<hr />\n<p>[1] <a href=\"https://stackoverflow.com/questions/75251142/spring-data-elasticsearch-embedded-field-mapping\">Spring data elasticsearch embedded field mapping</a></p>\n<p>[2] <a href=\"https://stackoverflow.com/questions/65140621/spring-elasticsearch-adding-fields-to-working-pojo-class-causes-illegalargument\">Spring Elasticsearch: Adding fields to working POJO class causes IllegalArgumentException: null is not a Map</a></p>\n"},{"tags":["java","microservices"],"comments":[{"owner":{"account_id":4209791,"reputation":4656,"user_id":3447827,"accept_rate":75,"display_name":"durbnpoisn"},"score":0,"creation_date":1447359582,"post_id":33680497,"comment_id":55134137,"body_markdown":"Try to imagine how the Unix OS works.  There is a Kernel that is the main process controlling everything.  But everything that makes the OS actually DO anything is all the little programs that make up the system.  There is a separate, tiny program, that runs every aspect of what the system does.","body":"Try to imagine how the Unix OS works.  There is a Kernel that is the main process controlling everything.  But everything that makes the OS actually DO anything is all the little programs that make up the system.  There is a separate, tiny program, that runs every aspect of what the system does."},{"owner":{"account_id":444211,"reputation":61229,"user_id":835883,"accept_rate":81,"display_name":"j2emanue"},"score":0,"creation_date":1447359837,"post_id":33680497,"comment_id":55134283,"body_markdown":"thats a nice analogy but in java web code would you say that a microservice could be a api call ? Lets say i had one web service to get user accounts and then i had another &#39;microservice&#39; web api  to get the address and phone numbers of the user account and return it back to the first call, would that count as a microservice ?","body":"thats a nice analogy but in java web code would you say that a microservice could be a api call ? Lets say i had one web service to get user accounts and then i had another &#39;microservice&#39; web api  to get the address and phone numbers of the user account and return it back to the first call, would that count as a microservice ?"},{"owner":{"account_id":4209791,"reputation":4656,"user_id":3447827,"accept_rate":75,"display_name":"durbnpoisn"},"score":0,"creation_date":1447360096,"post_id":33680497,"comment_id":55134449,"body_markdown":"I would say so.  Anything that is sorta sitting in the background waiting to be given an instruction, and otherwise keeps quite, would qualify.  As long as it&#39;s not part of the main thread, taking up memory when it&#39;s not in use.","body":"I would say so.  Anything that is sorta sitting in the background waiting to be given an instruction, and otherwise keeps quite, would qualify.  As long as it&#39;s not part of the main thread, taking up memory when it&#39;s not in use."}],"answers":[{"tags":[],"owner":{"account_id":1339399,"reputation":21672,"user_id":1281407,"accept_rate":93,"display_name":"mprivat"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1447687379,"creation_date":1447360968,"answer_id":33680942,"question_id":33680497,"body_markdown":"A microservice is exactly like its name suggests. It&#39;s a tiny service that performs a very simple function.\r\n\r\nSo yes, in terms of code, you&#39;re probably looking at a REST service. Note that any other API style would work. It doesn&#39;t have to be REST, however it must be **language agnostic** for you to draw all the benefits.\r\n\r\nBut the idea is bigger than that. The idea behind it is that they are very specialized and there&#39;s no big business workflow attached to they. For example, if you have a service that processes payments, then writes an audit log, then notifies the customer. I wouldn&#39;t count that as a microservice. Writing an audit log, that&#39;d probably be a microservice, notifying the customer too, processing the credit card as well. Your system would coordinate that business workflow (the 3 steps mentioned above) by calling the 3 necessary microservices. So your system is a coordinator and you don&#39;t worry about implementing the business functions.\r\n\r\nMicroservices don&#39;t try to think too much, they just do as they&#39;re told, but they do it quickly.\r\n\r\nSo in short. Take a very simple business function, put a REST API in front of it. And you have a microservice.\r\n\r\nThere are several **interesting properties** with microservices:\r\n\r\n1. They can be deployed independently. That&#39;s nice because you can deploy pieces of your app without taking everything down all at once.\r\n2. They can run in their own silo. So if you have a microservice that is very memory hungry, it can be deployed on a separate server so it doesn&#39;t affect the rest of your system.\r\n3. They can use different technology. You may have microservices in Java, some on .Net\r\n4. They keep dependencies in check. Developers have a tendency to bleed dependencies from one component to the next when they live together. Here you can&#39;t.\r\n\r\nBut you should also consider some **drawbacks**\r\n\r\n1. It&#39;s a lot harder to maintain a consistent transaction across all these calls. If you need to roll back, you&#39;ll need JTA to rollback all the REST calls. That can be a pain and doesn&#39;t perform very well in my experience.\r\n\r\n2. Tracking a transaction through the system in order to troubleshoot can be pretty rough if you don&#39;t have consistent logging and a consistent transaction id\r\n\r\n3. It might get tricky to find where a defect was introduced if the ground is constantly shifting due to deployments that may have side effects.\r\n\r\n4. Obviously all these REST calls can stack up to be pretty expensive. I&#39;m not necessarily talking about the transport since it&#39;s likely all your microservices would live in the same data center. But every time you make a call over the network, you have to marshal/unmarshal your data and that could quickly get expensive CPU-wise.\r\n\r\n","title":"What is a Java microservice","body":"<p>A microservice is exactly like its name suggests. It's a tiny service that performs a very simple function.</p>\n\n<p>So yes, in terms of code, you're probably looking at a REST service. Note that any other API style would work. It doesn't have to be REST, however it must be <strong>language agnostic</strong> for you to draw all the benefits.</p>\n\n<p>But the idea is bigger than that. The idea behind it is that they are very specialized and there's no big business workflow attached to they. For example, if you have a service that processes payments, then writes an audit log, then notifies the customer. I wouldn't count that as a microservice. Writing an audit log, that'd probably be a microservice, notifying the customer too, processing the credit card as well. Your system would coordinate that business workflow (the 3 steps mentioned above) by calling the 3 necessary microservices. So your system is a coordinator and you don't worry about implementing the business functions.</p>\n\n<p>Microservices don't try to think too much, they just do as they're told, but they do it quickly.</p>\n\n<p>So in short. Take a very simple business function, put a REST API in front of it. And you have a microservice.</p>\n\n<p>There are several <strong>interesting properties</strong> with microservices:</p>\n\n<ol>\n<li>They can be deployed independently. That's nice because you can deploy pieces of your app without taking everything down all at once.</li>\n<li>They can run in their own silo. So if you have a microservice that is very memory hungry, it can be deployed on a separate server so it doesn't affect the rest of your system.</li>\n<li>They can use different technology. You may have microservices in Java, some on .Net</li>\n<li>They keep dependencies in check. Developers have a tendency to bleed dependencies from one component to the next when they live together. Here you can't.</li>\n</ol>\n\n<p>But you should also consider some <strong>drawbacks</strong></p>\n\n<ol>\n<li><p>It's a lot harder to maintain a consistent transaction across all these calls. If you need to roll back, you'll need JTA to rollback all the REST calls. That can be a pain and doesn't perform very well in my experience.</p></li>\n<li><p>Tracking a transaction through the system in order to troubleshoot can be pretty rough if you don't have consistent logging and a consistent transaction id</p></li>\n<li><p>It might get tricky to find where a defect was introduced if the ground is constantly shifting due to deployments that may have side effects.</p></li>\n<li><p>Obviously all these REST calls can stack up to be pretty expensive. I'm not necessarily talking about the transport since it's likely all your microservices would live in the same data center. But every time you make a call over the network, you have to marshal/unmarshal your data and that could quickly get expensive CPU-wise.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4448063,"reputation":2887,"user_id":3620833,"accept_rate":67,"display_name":"Vino"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1485177133,"creation_date":1485177133,"answer_id":41807231,"question_id":33680497,"body_markdown":"You can check this:\r\nhttps://spring.io/blog/2015/01/20/microservice-registration-and-discovery-with-spring-cloud-and-netflix-s-eureka \r\n\r\nThis example is based on the following services:\r\n\r\n**Netflix Eureka :**\r\n\r\nEureka is a REST (Representational State Transfer) based service that is primarily used in the AWS cloud for locating services for the purpose of load balancing and failover of middle-tier servers.\r\n\r\nEureka is just a Service Registry holding all started service instance severname and port details.\r\n\r\n**Netflix Zuul :**\r\n\r\nZuul is an edge service that provides dynamic routing, monitoring, resiliency, security, and more. \r\n\r\nIt is the endpoint for microservice clients. All other service instances are secured in secured box whereas Zuul is exposed to clients which intercepts all client requests.\r\n\r\n**Netflix Ribbon:**\r\n\r\nRibbon is a Inter Process Communication (remote procedure calls) library with built in software load balancers. The primary usage model involves REST calls with various serialization scheme support.\r\n\r\nRibbon works in conjunctions with Zuul, uses plenty of algorithms to elect the best performing service node to serve the requests when N number of microservice instances are running.\r\n\r\n\r\nIn simple words, Zuul intercepts client requests and based on the request URL Zuul finds the ip and port of Microservice instance by Using Eureka service discovery. Ribbon elects the best service node to service the request and then from Zuul request is routed to the respective microservice instance.\r\n\r\n**Advantage from my project perspective:**\r\n\r\nWe can add or remove &#39;N&#39; number of service nodes based on the network traffic. \r\n","title":"What is a Java microservice","body":"<p>You can check this:\n<a href=\"https://spring.io/blog/2015/01/20/microservice-registration-and-discovery-with-spring-cloud-and-netflix-s-eureka\" rel=\"nofollow noreferrer\">https://spring.io/blog/2015/01/20/microservice-registration-and-discovery-with-spring-cloud-and-netflix-s-eureka</a> </p>\n\n<p>This example is based on the following services:</p>\n\n<p><strong>Netflix Eureka :</strong></p>\n\n<p>Eureka is a REST (Representational State Transfer) based service that is primarily used in the AWS cloud for locating services for the purpose of load balancing and failover of middle-tier servers.</p>\n\n<p>Eureka is just a Service Registry holding all started service instance severname and port details.</p>\n\n<p><strong>Netflix Zuul :</strong></p>\n\n<p>Zuul is an edge service that provides dynamic routing, monitoring, resiliency, security, and more. </p>\n\n<p>It is the endpoint for microservice clients. All other service instances are secured in secured box whereas Zuul is exposed to clients which intercepts all client requests.</p>\n\n<p><strong>Netflix Ribbon:</strong></p>\n\n<p>Ribbon is a Inter Process Communication (remote procedure calls) library with built in software load balancers. The primary usage model involves REST calls with various serialization scheme support.</p>\n\n<p>Ribbon works in conjunctions with Zuul, uses plenty of algorithms to elect the best performing service node to serve the requests when N number of microservice instances are running.</p>\n\n<p>In simple words, Zuul intercepts client requests and based on the request URL Zuul finds the ip and port of Microservice instance by Using Eureka service discovery. Ribbon elects the best service node to service the request and then from Zuul request is routed to the respective microservice instance.</p>\n\n<p><strong>Advantage from my project perspective:</strong></p>\n\n<p>We can add or remove 'N' number of service nodes based on the network traffic. </p>\n"},{"tags":[],"owner":{"account_id":12713,"reputation":7904,"user_id":25191,"accept_rate":83,"display_name":"Glenn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1552971968,"creation_date":1552971968,"answer_id":55233977,"question_id":33680497,"body_markdown":"Here are some concrete examples of microservices written in Java. These microservices are educational by design so hopefully that means you should be able to follow along.\r\n\r\nIt is not recommended to write a Java microservice from scratch as there are plenty of frameworks that can accelerate your development. The two most popular Java frameworks for microservice development are Spring Boot and Dropwizard.\r\n\r\nThe [feed3 project][1] implements a rudimentary polyglot persistent news feed microservice using Dropwizard. \r\n\r\nThe [feed8 project][2] implements the same feature identical microservice using Spring Boot. \r\n\r\nThere is even a [Spring Boot vs Dropwizard article][3] that analyzes the differences.\r\n\r\n\r\n  [1]: https://github.com/gengstrand/clojure-news-feed/tree/master/server/feed3\r\n  [2]: https://github.com/gengstrand/clojure-news-feed/tree/master/server/feed8\r\n  [3]: http://glennengstrand.info/software/performance/springboot/dropwizard","title":"What is a Java microservice","body":"<p>Here are some concrete examples of microservices written in Java. These microservices are educational by design so hopefully that means you should be able to follow along.</p>\n\n<p>It is not recommended to write a Java microservice from scratch as there are plenty of frameworks that can accelerate your development. The two most popular Java frameworks for microservice development are Spring Boot and Dropwizard.</p>\n\n<p>The <a href=\"https://github.com/gengstrand/clojure-news-feed/tree/master/server/feed3\" rel=\"nofollow noreferrer\">feed3 project</a> implements a rudimentary polyglot persistent news feed microservice using Dropwizard. </p>\n\n<p>The <a href=\"https://github.com/gengstrand/clojure-news-feed/tree/master/server/feed8\" rel=\"nofollow noreferrer\">feed8 project</a> implements the same feature identical microservice using Spring Boot. </p>\n\n<p>There is even a <a href=\"http://glennengstrand.info/software/performance/springboot/dropwizard\" rel=\"nofollow noreferrer\">Spring Boot vs Dropwizard article</a> that analyzes the differences.</p>\n"},{"tags":[],"owner":{"account_id":27726093,"reputation":1,"user_id":21165625,"display_name":"Ruchita Raskar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676376395,"creation_date":1676376395,"answer_id":75447611,"question_id":33680497,"body_markdown":" - Microservice architecture means multiple smaller applications that can communicate with each other using a light weight protocols like HTTP.\r\n - Monolithic approach was replaced by a microservice. \r\n - Lets begin with monolithic approach. Imagine a Facebook app, where we can post, chat, it has login page etc. All this comes under a single code base and it becomes difficult to manage. If a small bug is detected the whole application may crash down. Also if we want to add a single functionality in login page we will have to redeploy the whole application once its done. \r\n - Now let&#39;s imagine the same scenario with microservices. Now in microservice we will have multiple small applications - one for login, one for messaging, one for posing the content, etc. These applications are loosely coupled with each other. They can communicate with each other through REST APIs. Now if one application is down it wont affect the other applications. We can easily add any functionality and deploy only that specific code, no need to deploy the whole application. We can easily use different technologies for building different microservices.\r\n \r\n\r\n \r\n\r\n","title":"What is a Java microservice","body":"<ul>\n<li>Microservice architecture means multiple smaller applications that can communicate with each other using a light weight protocols like HTTP.</li>\n<li>Monolithic approach was replaced by a microservice.</li>\n<li>Lets begin with monolithic approach. Imagine a Facebook app, where we can post, chat, it has login page etc. All this comes under a single code base and it becomes difficult to manage. If a small bug is detected the whole application may crash down. Also if we want to add a single functionality in login page we will have to redeploy the whole application once its done.</li>\n<li>Now let's imagine the same scenario with microservices. Now in microservice we will have multiple small applications - one for login, one for messaging, one for posing the content, etc. These applications are loosely coupled with each other. They can communicate with each other through REST APIs. Now if one application is down it wont affect the other applications. We can easily add any functionality and deploy only that specific code, no need to deploy the whole application. We can easily use different technologies for building different microservices.</li>\n</ul>\n"}],"owner":{"account_id":444211,"reputation":61229,"user_id":835883,"accept_rate":81,"display_name":"j2emanue"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4473,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":33680942,"answer_count":4,"score":4,"last_activity_date":1676386209,"creation_date":1447359371,"question_id":33680497,"body_markdown":"I been searching on the web, but I&#39;m a little confused on what exactly is a Java microservice. I mean I know what a web service is, and I&#39;m told that a microservice is the following per wiki:\r\n\r\n&gt; In computing, microservices is a software architecture style in which complex applications are composed of small, independent processes communicating with each other using language-agnostic APIs.\r\n\r\nand the properties of a microservice are:\r\n\r\n&gt;  Properties of microservices architecture:\r\n&gt; \r\n&gt; It&#39;s a kind of architecture The services are easy to replace Services\r\n&gt; are organized around capabilities, e.g. user interface front-end,\r\n&gt; recommendation, logistics, billing, etc Services can be implemented\r\n&gt; using different programming languages, databases, hardware and\r\n&gt; software environment, depending on what fits best Architectures are\r\n&gt; symmetrical rather than hierarchical (producer - consumer)\r\n\r\nI need a concrete Java example to understand how I can make a microservice.  Does anyone have a example you could provide?","title":"What is a Java microservice","body":"<p>I been searching on the web, but I'm a little confused on what exactly is a Java microservice. I mean I know what a web service is, and I'm told that a microservice is the following per wiki:</p>\n<blockquote>\n<p>In computing, microservices is a software architecture style in which complex applications are composed of small, independent processes communicating with each other using language-agnostic APIs.</p>\n</blockquote>\n<p>and the properties of a microservice are:</p>\n<blockquote>\n<p>Properties of microservices architecture:</p>\n<p>It's a kind of architecture The services are easy to replace Services\nare organized around capabilities, e.g. user interface front-end,\nrecommendation, logistics, billing, etc Services can be implemented\nusing different programming languages, databases, hardware and\nsoftware environment, depending on what fits best Architectures are\nsymmetrical rather than hierarchical (producer - consumer)</p>\n</blockquote>\n<p>I need a concrete Java example to understand how I can make a microservice.  Does anyone have a example you could provide?</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-mvc"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1641311700,"post_id":70581530,"comment_id":124769743,"body_markdown":"Well... is there an unresolvable circular reference?","body":"Well... is there an unresolvable circular reference?"},{"owner":{"account_id":21009120,"reputation":305,"user_id":15438138,"display_name":"Simion Georgian"},"score":0,"creation_date":1641313198,"post_id":70581530,"comment_id":124770378,"body_markdown":"Need to add more code from my project to clear this out?","body":"Need to add more code from my project to clear this out?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1641313361,"post_id":70581530,"comment_id":124770438,"body_markdown":"no, only 1 little clarification: why there is no `@Configuration` on your `@EnableWebSecurity` ..adapter?","body":"no, only 1 little clarification: why there is no <code>@Configuration</code> on your <code>@EnableWebSecurity</code> ..adapter?"},{"owner":{"account_id":21009120,"reputation":305,"user_id":15438138,"display_name":"Simion Georgian"},"score":0,"creation_date":1641313540,"post_id":70581530,"comment_id":124770507,"body_markdown":"No is not, i`m trying to learn spring so if you can help me with an advice will be great","body":"No is not, i`m trying to learn spring so if you can help me with an advice will be great"},{"owner":{"account_id":3618847,"reputation":867,"user_id":17695211,"display_name":"Alexey Veleshko"},"score":2,"creation_date":1641319098,"post_id":70581530,"comment_id":124772818,"body_markdown":"I think it should be just `configure` instead of `configureGlobal` plus not `@Autowired` but `@Overrides` there. Also, `@Configuration` is missing indeed.","body":"I think it should be just <code>configure</code> instead of <code>configureGlobal</code> plus not <code>@Autowired</code> but <code>@Overrides</code> there. Also, <code>@Configuration</code> is missing indeed."},{"owner":{"account_id":21009120,"reputation":305,"user_id":15438138,"display_name":"Simion Georgian"},"score":1,"creation_date":1641397256,"post_id":70581530,"comment_id":124795167,"body_markdown":"Thank you  \n@AlexeyVeleshko It worked","body":"Thank you   @AlexeyVeleshko It worked"},{"owner":{"account_id":9355,"reputation":6382,"user_id":17239,"accept_rate":76,"display_name":"Roger C S Wernersson"},"score":0,"creation_date":1649235053,"post_id":70581530,"comment_id":126821871,"body_markdown":"@AlexeyVeleshko, could you post an answer with the code as it would look, please?","body":"@AlexeyVeleshko, could you post an answer with the code as it would look, please?"}],"answers":[{"tags":[],"owner":{"account_id":21009120,"reputation":305,"user_id":15438138,"display_name":"Simion Georgian"},"down_vote_count":3,"up_vote_count":17,"is_accepted":true,"score":14,"last_activity_date":1641397751,"creation_date":1641397751,"answer_id":70595758,"question_id":70581530,"body_markdown":"After i changed to configure instead of configureGlobal with @Overrides and deleted @Autowired\r\nAdded @Configuration\r\nNow the code is working,\r\n\r\nThanks to  Alexey Veleshko\r\n","title":"Error creating bean with name &#39;securityConfig&#39;: Requested bean is currently in creation:","body":"<p>After i changed to configure instead of configureGlobal with @Overrides and deleted @Autowired\nAdded @Configuration\nNow the code is working,</p>\n<p>Thanks to  Alexey Veleshko</p>\n"},{"tags":[],"owner":{"account_id":24978230,"reputation":171,"user_id":18840649,"display_name":"Konzerra"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1650720268,"creation_date":1650720268,"answer_id":71980044,"question_id":70581530,"body_markdown":"More detailed solution:\r\n\r\ncode before:\r\n\r\n    @Autowired\r\n    public void configureGlobal(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\r\n        authenticationManagerBuilder.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\r\n    }\r\n\r\nchanging @Autowired and function name\r\n\r\n    @Override\r\n    public void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\r\n        authenticationManagerBuilder.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\r\n    }","title":"Error creating bean with name &#39;securityConfig&#39;: Requested bean is currently in creation:","body":"<p>More detailed solution:</p>\n<p>code before:</p>\n<pre><code>@Autowired\npublic void configureGlobal(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\n    authenticationManagerBuilder.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\n}\n</code></pre>\n<p>changing @Autowired and function name</p>\n<pre><code>@Override\npublic void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\n    authenticationManagerBuilder.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6443880,"reputation":438,"user_id":4992961,"display_name":"Hamdhan Azeez T"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1655388047,"creation_date":1655388047,"answer_id":72647157,"question_id":70581530,"body_markdown":"spring.main.allow-circular-references=true\r\nadd this property in application.properties file \r\n\r\nor add below in application.yaml file\r\nspring: \r\n  main:\r\n    allow-circular-references: true\r\n","title":"Error creating bean with name &#39;securityConfig&#39;: Requested bean is currently in creation:","body":"<p>spring.main.allow-circular-references=true\nadd this property in application.properties file</p>\n<p>or add below in application.yaml file\nspring:\nmain:\nallow-circular-references: true</p>\n"},{"tags":[],"owner":{"account_id":11529584,"reputation":631,"user_id":8448924,"display_name":"Brijesh Lakkad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666710515,"creation_date":1666710515,"answer_id":74196262,"question_id":70581530,"body_markdown":"    package ro.contabilitateexpert.AccountExpert.config;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.security.authentication.AuthenticationManager;\r\n    import org.springframework.security.config.BeanIds;\r\n    import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n    import org.springframework.security.core.userdetails.UserDetailsService;\r\n    import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\n    import org.springframework.security.crypto.password.PasswordEncoder;\r\n    \r\n    @EnableWebSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Autowired\r\n        private UserDetailsService userDetailsService;\r\n    \r\n        @Bean(BeanIds.AUTHENTICATION_MANAGER)\r\n        @Override\r\n        public AuthenticationManager authenticationManagerBean() throws Exception {\r\n            return super.authenticationManagerBean();\r\n        }\r\n    \r\n        @Override\r\n        public void configure(HttpSecurity httpSecurity) throws Exception {\r\n            httpSecurity.csrf().disable().authorizeRequests()\r\n                    .antMatchers(&quot;/api/auth/**&quot;)\r\n                    .permitAll()\r\n                    .anyRequest()\r\n                    .authenticated();\r\n        }\r\n    \r\n        @Override\r\n        public void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\r\n            authenticationManagerBuilder.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\r\n        }\r\n    \r\n        @Bean\r\n        PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    }\r\n\r\nI edited the code; this should work. What did I do? I changed the name of the `configureGlobal` method to configure and used the `@Override` annotation instead of `@Autowired`. The @Autowired method, `configureGlobal`, somehow was also using the `SecurityConfig` bean, which was internally being created (of course, it was being created; what do we think made the call to the `configureGlobal` method)","title":"Error creating bean with name &#39;securityConfig&#39;: Requested bean is currently in creation:","body":"<pre><code>package ro.contabilitateexpert.AccountExpert.config;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.BeanIds;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\n\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Bean(BeanIds.AUTHENTICATION_MANAGER)\n    @Override\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n\n    @Override\n    public void configure(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity.csrf().disable().authorizeRequests()\n                .antMatchers(&quot;/api/auth/**&quot;)\n                .permitAll()\n                .anyRequest()\n                .authenticated();\n    }\n\n    @Override\n    public void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\n        authenticationManagerBuilder.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\n    }\n\n    @Bean\n    PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n<p>I edited the code; this should work. What did I do? I changed the name of the <code>configureGlobal</code> method to configure and used the <code>@Override</code> annotation instead of <code>@Autowired</code>. The @Autowired method, <code>configureGlobal</code>, somehow was also using the <code>SecurityConfig</code> bean, which was internally being created (of course, it was being created; what do we think made the call to the <code>configureGlobal</code> method)</p>\n"},{"tags":[],"owner":{"account_id":1612518,"reputation":797,"user_id":1491081,"display_name":"sarath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676386182,"creation_date":1676386182,"answer_id":75449533,"question_id":70581530,"body_markdown":"**When migrating spring and other dependencies, including spring security, I have encountered this issue.**\r\n\r\n    Description:\r\n    \r\n    The dependencies of some of the beans in the application context form a cycle:\r\n    \r\n       FrameworkContextFilter defined in class path resource [com/company/frame/autoconfigure/web/servlet/WebMvcAutoConfiguration.class]\r\n          ↓\r\n       mvcHandlerMappingIntrospector defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]\r\n          ↓\r\n       org.springframework.security.oauth2.config.annotation.web.configuration.AuthorizationServerEndpointsConfiguration (field private java.util.List org.springframework.security.oauth2.config.annotation.web.configuration.AuthorizationServerEndpointsConfiguration.configurers)\r\n          ↓\r\n       oauthConfig.AuthorizationServerConfiguration (field org.springframework.security.authentication.AuthenticationManager com.company.frame.config.OauthConfig$AuthorizationServerConfiguration.authenticationManager)\r\n    ┌─────┐\r\n    |  securityConfig (field private org.springframework.security.crypto.password.PasswordEncoder com.company.frame.config.SecurityConfig.passwordEncoder)\r\n    └─────┘\r\n\r\n**Following is the solution which survived my troubleshooting.**\r\n\r\n\r\n    @Autowired private PasswordEncoder passwordEncoder;\r\n    \t| \r\n        V\r\n    @Autowired @Lazy private PasswordEncoder passwordEncoder;\r\n\r\n\tand\r\n\r\n    @Autowired\r\n      public void configureGlobal(AuthenticationManagerBuilder auth)\r\n    \t|\r\n    \tV \r\n    @Override\r\n      public void configure(AuthenticationManagerBuilder auth)\r\n\r\n","title":"Error creating bean with name &#39;securityConfig&#39;: Requested bean is currently in creation:","body":"<p><strong>When migrating spring and other dependencies, including spring security, I have encountered this issue.</strong></p>\n<pre><code>Description:\n\nThe dependencies of some of the beans in the application context form a cycle:\n\n   FrameworkContextFilter defined in class path resource [com/company/frame/autoconfigure/web/servlet/WebMvcAutoConfiguration.class]\n      ↓\n   mvcHandlerMappingIntrospector defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]\n      ↓\n   org.springframework.security.oauth2.config.annotation.web.configuration.AuthorizationServerEndpointsConfiguration (field private java.util.List org.springframework.security.oauth2.config.annotation.web.configuration.AuthorizationServerEndpointsConfiguration.configurers)\n      ↓\n   oauthConfig.AuthorizationServerConfiguration (field org.springframework.security.authentication.AuthenticationManager com.company.frame.config.OauthConfig$AuthorizationServerConfiguration.authenticationManager)\n┌─────┐\n|  securityConfig (field private org.springframework.security.crypto.password.PasswordEncoder com.company.frame.config.SecurityConfig.passwordEncoder)\n└─────┘\n</code></pre>\n<p><strong>Following is the solution which survived my troubleshooting.</strong></p>\n<pre><code>@Autowired private PasswordEncoder passwordEncoder;\n    | \n    V\n@Autowired @Lazy private PasswordEncoder passwordEncoder;\n\nand\n\n@Autowired\n  public void configureGlobal(AuthenticationManagerBuilder auth)\n    |\n    V \n@Override\n  public void configure(AuthenticationManagerBuilder auth)\n</code></pre>\n"}],"owner":{"account_id":21009120,"reputation":305,"user_id":15438138,"display_name":"Simion Georgian"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20468,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":70595758,"answer_count":5,"score":14,"last_activity_date":1676386182,"creation_date":1641311577,"question_id":70581530,"body_markdown":"```\r\npackage ro.contabilitateexpert.AccountExpert.config;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.config.BeanIds;\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\n\r\n@EnableWebSecurity\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Autowired\r\n    private UserDetailsService userDetailsService;\r\n\r\n    @Bean(BeanIds.AUTHENTICATION_MANAGER)\r\n    @Override\r\n    public AuthenticationManager authenticationManagerBean() throws Exception {\r\n        return super.authenticationManagerBean();\r\n    }\r\n\r\n    @Override\r\n    public void configure(HttpSecurity httpSecurity) throws Exception {\r\n        httpSecurity.csrf().disable().authorizeRequests()\r\n                .antMatchers(&quot;/api/auth/**&quot;)\r\n                .permitAll()\r\n                .anyRequest()\r\n                .authenticated();\r\n    }\r\n\r\n    @Autowired\r\n    public void configureGlobal(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\r\n        authenticationManagerBuilder.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\r\n    }\r\n\r\n    @Bean\r\n    PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n```\r\nI have the following error :\r\n Error creating bean with name &#39;securityConfig&#39;: Requested bean is currently in creation: Is there an unresolvable circular reference?\r\n\r\nHow can i solve it?\r\n\r\n\r\n","title":"Error creating bean with name &#39;securityConfig&#39;: Requested bean is currently in creation:","body":"<pre><code>package ro.contabilitateexpert.AccountExpert.config;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.BeanIds;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\n\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Bean(BeanIds.AUTHENTICATION_MANAGER)\n    @Override\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n\n    @Override\n    public void configure(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity.csrf().disable().authorizeRequests()\n                .antMatchers(&quot;/api/auth/**&quot;)\n                .permitAll()\n                .anyRequest()\n                .authenticated();\n    }\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\n        authenticationManagerBuilder.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\n    }\n\n    @Bean\n    PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n<p>I have the following error :\nError creating bean with name 'securityConfig': Requested bean is currently in creation: Is there an unresolvable circular reference?</p>\n<p>How can i solve it?</p>\n"},{"tags":["java","selenium-webdriver","gettext"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1676334595,"post_id":75442356,"comment_id":133112924,"body_markdown":"Can you show the HTML for the field that you&#39;re trying to find?","body":"Can you show the HTML for the field that you&#39;re trying to find?"},{"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1676370507,"post_id":75442356,"comment_id":133119025,"body_markdown":"Can you share the error?","body":"Can you share the error?"},{"owner":{"account_id":27778611,"reputation":1,"user_id":21207425,"display_name":"Qa_Automatino"},"score":0,"creation_date":1676376620,"post_id":75442356,"comment_id":133120809,"body_markdown":"HTML in the CODE LINK (image) you can see all code.  \n\n&lt;div class=&quot;&quot; data-v-2fe357a6=&quot;&quot;&gt;&lt;input class=&quot;oxd-input oxd-input--active orangehrm-firstname&quot; name=&quot;firstName&quot; placeholder=&quot;First Name&quot; data-v-844e87dc=&quot;&quot;&gt;&lt;/div&gt;","body":"HTML in the CODE LINK (image) you can see all code.    &lt;div class=&quot;&quot; data-v-2fe357a6=&quot;&quot;&gt;&lt;input class=&quot;oxd-input oxd-input--active orangehrm-firstname&quot; name=&quot;firstName&quot; placeholder=&quot;First Name&quot; data-v-844e87dc=&quot;&quot;&gt;&lt;/div&gt;"},{"owner":{"account_id":10121872,"reputation":2186,"user_id":7478530,"display_name":"Dragonthoughts"},"score":0,"creation_date":1676385983,"post_id":75442356,"comment_id":133123764,"body_markdown":"Please edit your question to include the HTML, then you can format it and people are more likely to find important information without having to look through the comments.","body":"Please edit your question to include the HTML, then you can format it and people are more likely to find important information without having to look through the comments."},{"owner":{"account_id":27778611,"reputation":1,"user_id":21207425,"display_name":"Qa_Automatino"},"score":0,"creation_date":1676399113,"post_id":75442356,"comment_id":133127949,"body_markdown":"Sorry, this is my first post and the English language is not my native language.","body":"Sorry, this is my first post and the English language is not my native language."}],"answers":[{"tags":[],"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676386122,"creation_date":1676386122,"answer_id":75449524,"question_id":75442356,"body_markdown":"Try by using `.getAttribute()`instead of `.getText()`. Try the below:\r\n\r\n`System.out.println(firstName.getAttribute(&quot;value&quot;));`\r\n\r\n**Note:** Assuming the HTML contains attribute `value` and its content is **rodrigo**","title":"Cannot get the value of the element in the HTML","body":"<p>Try by using <code>.getAttribute()</code>instead of <code>.getText()</code>. Try the below:</p>\n<p><code>System.out.println(firstName.getAttribute(&quot;value&quot;));</code></p>\n<p><strong>Note:</strong> Assuming the HTML contains attribute <code>value</code> and its content is <strong>rodrigo</strong></p>\n"}],"owner":{"account_id":27778611,"reputation":1,"user_id":21207425,"display_name":"Qa_Automatino"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676386122,"creation_date":1676333772,"question_id":75442356,"body_markdown":"````\r\nPage.java:\r\n @FindBy(xpath = &quot;//input[@name=&#39;firstName&#39;]&quot;) WebElement firstName;\r\n.\r\n.\r\n.\r\n.\r\nString nombreActual = firstName.getText() ;\r\nSystem.out.println(firstName.getText());\r\n````\r\n\r\n\r\n[Code](https://i.stack.imgur.com/UKS2H.png)\r\n\r\n\r\n\r\nThe value is required to be able to compare against other value as per below asset statement.\r\n\r\n`Assert.assertEquals(nombre,nombreActual);`","title":"Cannot get the value of the element in the HTML","body":"<pre><code>Page.java:\n @FindBy(xpath = &quot;//input[@name='firstName']&quot;) WebElement firstName;\n.\n.\n.\n.\nString nombreActual = firstName.getText() ;\nSystem.out.println(firstName.getText());\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/UKS2H.png\" rel=\"nofollow noreferrer\">Code</a></p>\n<p>The value is required to be able to compare against other value as per below asset statement.</p>\n<p><code>Assert.assertEquals(nombre,nombreActual);</code></p>\n"},{"tags":["java","spring-boot","maven","intellij-idea"],"comments":[{"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"score":0,"creation_date":1661850720,"post_id":73537915,"comment_id":129863724,"body_markdown":"IDE uses Maven configuration as an initial source of project configuration. So, manual changed in project configuration will be overridden on Maven reload. Is it possible to share project to check where path comes from?","body":"IDE uses Maven configuration as an initial source of project configuration. So, manual changed in project configuration will be overridden on Maven reload. Is it possible to share project to check where path comes from?"}],"answers":[{"tags":[],"owner":{"account_id":9905560,"reputation":641,"user_id":7334180,"accept_rate":75,"display_name":"Holinc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676385724,"creation_date":1676385724,"answer_id":75449421,"question_id":73537915,"body_markdown":"It works for me by setting `relativePath` in pom.xml.\r\n\r\nBy the way, the official description of `relativePath` is:\r\n\r\n&gt; The relative path of the parent pom.xml file within the check out. If\r\n&gt; not specified, it defaults to ../pom.xml. Maven looks for the parent\r\n&gt; POM first in this location on the filesystem, then the local\r\n&gt; repository, and lastly in the remote repo. relativePath allows you to\r\n&gt; select a different location, for example when your structure is flat,\r\n&gt; or deeper without an intermediate parent POM. However, the group ID,\r\n&gt; artifact ID and version are still required, and must match the file in\r\n&gt; the location given or it will revert to the repository for the POM.\r\n&gt; This feature is only for enhancing the development in a local checkout\r\n&gt; of that project. Set the value to an empty string in case you want to\r\n&gt; disable the feature and always resolve the parent POM from the\r\n&gt; repositories.","title":"Intellij Idea Maven Project Compiler Output Is Alway Changed","body":"<p>It works for me by setting <code>relativePath</code> in pom.xml.</p>\n<p>By the way, the official description of <code>relativePath</code> is:</p>\n<blockquote>\n<p>The relative path of the parent pom.xml file within the check out. If\nnot specified, it defaults to ../pom.xml. Maven looks for the parent\nPOM first in this location on the filesystem, then the local\nrepository, and lastly in the remote repo. relativePath allows you to\nselect a different location, for example when your structure is flat,\nor deeper without an intermediate parent POM. However, the group ID,\nartifact ID and version are still required, and must match the file in\nthe location given or it will revert to the repository for the POM.\nThis feature is only for enhancing the development in a local checkout\nof that project. Set the value to an empty string in case you want to\ndisable the feature and always resolve the parent POM from the\nrepositories.</p>\n</blockquote>\n"}],"owner":{"account_id":9905560,"reputation":641,"user_id":7334180,"accept_rate":75,"display_name":"Holinc"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":549,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1676385724,"creation_date":1661840344,"question_id":73537915,"body_markdown":"&gt; Intellij Idea Project Settings &lt;br/&gt;\r\n&gt; Compiler Output\r\n&gt;  - Inherit project compile output path\r\n&gt;  - Use module compile output path\r\n\r\nI choose `Use module compile output path` option，but it is alway changed in another path, not my project compile output path. I can not run my project in correct.\r\n\r\nAny help?\r\n\r\nOutput Path: `D:\\repo\\repository\\org\\springframework\\boot\\spring-boot-starter-parent\\2.5.12\\target\\classes`\r\n\r\nTest output path: `D:\\repo\\repository\\org\\springframework\\boot\\spring-boot-starter-parent\\2.5.12\\target\\test-classes`","title":"Intellij Idea Maven Project Compiler Output Is Alway Changed","body":"<blockquote>\n<p>Intellij Idea Project Settings <br/>\nCompiler Output</p>\n<ul>\n<li>Inherit project compile output path</li>\n<li>Use module compile output path</li>\n</ul>\n</blockquote>\n<p>I choose <code>Use module compile output path</code> option，but it is alway changed in another path, not my project compile output path. I can not run my project in correct.</p>\n<p>Any help?</p>\n<p>Output Path: <code>D:\\repo\\repository\\org\\springframework\\boot\\spring-boot-starter-parent\\2.5.12\\target\\classes</code></p>\n<p>Test output path: <code>D:\\repo\\repository\\org\\springframework\\boot\\spring-boot-starter-parent\\2.5.12\\target\\test-classes</code></p>\n"},{"tags":["java","arraylist","compareto"],"comments":[{"owner":{"account_id":2617274,"reputation":6112,"user_id":2266098,"accept_rate":72,"display_name":"NeplatnyUdaj"},"score":1,"creation_date":1395667832,"post_id":22610728,"comment_id":34428245,"body_markdown":"Why don&#39;t you just use `Collections.sort(List&lt;T&gt; list)` ?","body":"Why don&#39;t you just use <code>Collections.sort(List&lt;T&gt; list)</code> ?"},{"owner":{"account_id":2927647,"reputation":2746,"user_id":2508646,"accept_rate":100,"display_name":"Dan Temple"},"score":0,"creation_date":1395668024,"post_id":22610728,"comment_id":34428381,"body_markdown":"You could also loop through the list of Strings using the compareTo method to determine the position of the list to add the new word.","body":"You could also loop through the list of Strings using the compareTo method to determine the position of the list to add the new word."}],"answers":[{"tags":[],"owner":{"account_id":3016236,"reputation":15507,"user_id":4969827,"display_name":"Sergey Shustikov"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1512480199,"creation_date":1395668021,"answer_id":22610920,"question_id":22610728,"body_markdown":"Use a `Collections.sort(List&lt;T&gt; list, Comparator&lt;T&gt; c);`\r\n\r\n    Collections.sort(yourList,new Comparator&lt;String&gt;() {\r\n    \t@Override\r\n    \tpublic int compare(String lhs, String rhs) {\r\n    \t\treturn lhs.compareTo(rhs);   //or whatever your sorting algorithm\r\n    \t}\r\n    });","title":"Using compareTo in ArrayLists","body":"<p>Use a <code>Collections.sort(List&lt;T&gt; list, Comparator&lt;T&gt; c);</code></p>\n\n<pre><code>Collections.sort(yourList,new Comparator&lt;String&gt;() {\n    @Override\n    public int compare(String lhs, String rhs) {\n        return lhs.compareTo(rhs);   //or whatever your sorting algorithm\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3552359,"reputation":623,"user_id":2966938,"display_name":"Karura91"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1395668049,"creation_date":1395668049,"answer_id":22610938,"question_id":22610728,"body_markdown":"compareTo is a method of String class.\r\nSo, in order to use it, you have to write something like this:\r\n\r\n    list.get(i).compareTo(newWord)\r\n\r\nwhere i is the index of an element of your list and newWord is the newWord.\r\n\r\nHere is an useful [link][1]\r\n\r\nYou could simple add an element and then use Collections.sort(list) but since I think this is a school assignment probably you can&#39;t, so you have to manage the insert manually using compareTo method as I showed you.\r\n\r\n  [1]: http://www.tutorialspoint.com/java/java_string_compareto.htm","title":"Using compareTo in ArrayLists","body":"<p>compareTo is a method of String class.\nSo, in order to use it, you have to write something like this:</p>\n\n<pre><code>list.get(i).compareTo(newWord)\n</code></pre>\n\n<p>where i is the index of an element of your list and newWord is the newWord.</p>\n\n<p>Here is an useful <a href=\"http://www.tutorialspoint.com/java/java_string_compareto.htm\" rel=\"nofollow\">link</a></p>\n\n<p>You could simple add an element and then use Collections.sort(list) but since I think this is a school assignment probably you can't, so you have to manage the insert manually using compareTo method as I showed you.</p>\n"}],"owner":{"account_id":3802318,"reputation":1,"user_id":3155599,"display_name":"Tomas1337"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4280,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1676385451,"creation_date":1395667474,"question_id":22610728,"body_markdown":"I need some help using compareTo in ArrayLists. As a guide I was given this paragraph: \n\n&gt;addOrder(ArrayList&lt;String&gt; words, String newWord) – this method adds newWord in the proper alphabetical order. \n&gt;\n&gt;Hint you can use: x.compareTo(y) \n&gt;\n&gt;If x.compareTo(y) is &lt; 0, x comes before y)\n&gt;\n&gt;addOrder should then return this updated ArrayList of Strings.\n\nBut even though I researched alot still struggling to understand how to apply it to ArrayLists. This is my code that I want to use the compareTo method:\n   \n\n    import java.util.ArrayList;\n    import java.util.ArrayList;\n    import java.util.List;\n    \n    class StringList {\n        public static void main(String [] args)\n        {\n            ArrayList&lt; String&gt; list = new ArrayList&lt; String&gt;();\n            list.add(&quot;Goldsmiths&quot;);\n            list.add(&quot;College&quot;);\n            list.add(&quot;London&quot;);\n            list.add(&quot;Manchester&quot;);\n            list.add(&quot;London&quot;);\n            list.add(&quot;York&quot;);\n            System.out.println(&quot;These are your words:&quot;);\n            System.out.println(list);\n            System.out.println(&quot;This is the size of the array:&quot;);\n            System.out.println(lengthArray(list));\n            System.out.println(&quot;The length of all strings is:&quot;);\n            System.out.println(totalLengthArray(list));\n        }\n    \n        public static int lengthArray(List&lt;String&gt; list)\n        {\n            return list.size();\n        }\n    \n        public static int totalLengthArray(List&lt;String&gt; list)\n        {\n            int count = 0;\n            for (String s: list)\n            {\n                count += s.length();\n            }\n            return count;\n        }\n    }\n\nI want to compare and sort out the list items that I have added which you can see in my code.","title":"Using compareTo in ArrayLists","body":"<p>I need some help using compareTo in ArrayLists. As a guide I was given this paragraph:</p>\n<blockquote>\n<p>addOrder(ArrayList words, String newWord) – this method adds newWord in the proper alphabetical order.</p>\n<p>Hint you can use: x.compareTo(y)</p>\n<p>If x.compareTo(y) is &lt; 0, x comes before y)</p>\n<p>addOrder should then return this updated ArrayList of Strings.</p>\n</blockquote>\n<p>But even though I researched alot still struggling to understand how to apply it to ArrayLists. This is my code that I want to use the compareTo method:</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.ArrayList;\nimport java.util.List;\n\nclass StringList {\n    public static void main(String [] args)\n    {\n        ArrayList&lt; String&gt; list = new ArrayList&lt; String&gt;();\n        list.add(&quot;Goldsmiths&quot;);\n        list.add(&quot;College&quot;);\n        list.add(&quot;London&quot;);\n        list.add(&quot;Manchester&quot;);\n        list.add(&quot;London&quot;);\n        list.add(&quot;York&quot;);\n        System.out.println(&quot;These are your words:&quot;);\n        System.out.println(list);\n        System.out.println(&quot;This is the size of the array:&quot;);\n        System.out.println(lengthArray(list));\n        System.out.println(&quot;The length of all strings is:&quot;);\n        System.out.println(totalLengthArray(list));\n    }\n\n    public static int lengthArray(List&lt;String&gt; list)\n    {\n        return list.size();\n    }\n\n    public static int totalLengthArray(List&lt;String&gt; list)\n    {\n        int count = 0;\n        for (String s: list)\n        {\n            count += s.length();\n        }\n        return count;\n    }\n}\n</code></pre>\n<p>I want to compare and sort out the list items that I have added which you can see in my code.</p>\n"},{"tags":["java","mockito","junit5"],"answers":[{"tags":[],"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1676385278,"creation_date":1676356974,"answer_id":75444277,"question_id":75444121,"body_markdown":"You&#39;re in a bit of a bind here. Your `IntVisitor` class is very tightly coupled to the concrete class `IntReqDecorator`. And the `apply` method is defined, verbatim, to do the same thing as `intReqDecorator.decorate`. So without changing any of the signatures, the best you can possibly do is write the same test you did for `decorate` but over again.\r\n\r\nNow, what you probably *should* do with this code is break that dependency. First, your constructor concretely builds an `IntReqDecorator` the moment it&#39;s constructed. You can still do that as a handy default, but you should provide a way for the caller to specify the decorator they wish to use. We can do that by overloading the constructor.\r\n\r\n    public InternalCallVisitor() {\r\n      this(new IntReqDecorator());\r\n    }\r\n\r\n    public InternalCallVisitor(IntReqDecorator intReqDecorator) {\r\n      this.intReqDecorator = intReqDecorator;\r\n    }\r\n\r\nNow this alone is enough firepower for us to write a good test. We can mock `IntReqDecorator` and use the one-argument constructor in tests.\r\n\r\nBut I would go even further. You only ever use one method from `IntReqDecorator`, namely `decorate`. But since it&#39;s a concrete class, it probably has other methods that we don&#39;t really need here. So in an effort to follow [dependency inversion](https://en.wikipedia.org/wiki/Dependency_inversion_principle), it may be a good idea to create an interface `IntReqDecoratorLike` (choose a better name for your use case) that has just that one method, and then have `IntReqDecorator` *implement* that interface.\r\n\r\nThen your constructor takes a `IntReqDecoratorLike` that is capable of doing *only* exactly what we need it to. The great thing about this is that you barely even have to mock anything to test it. You could theoretically just write a new (ordinary) class that implements `IntReqDecoratorLike` and use that in tests. We&#39;ll probably still use the mocking framework, since it does provide good error messages and built-in validation, but the alternative is there in principle.\r\n\r\nAs a very broad general rule, when you find yourself scratching your head and saying &quot;This code looks difficult to test&quot;, you should take a step back. Because oftentimes, you can make a change to the API that not only makes testing easier but also makes the code more ergonomic to use down the road.","title":"Mockito a void method","body":"<p>You're in a bit of a bind here. Your <code>IntVisitor</code> class is very tightly coupled to the concrete class <code>IntReqDecorator</code>. And the <code>apply</code> method is defined, verbatim, to do the same thing as <code>intReqDecorator.decorate</code>. So without changing any of the signatures, the best you can possibly do is write the same test you did for <code>decorate</code> but over again.</p>\n<p>Now, what you probably <em>should</em> do with this code is break that dependency. First, your constructor concretely builds an <code>IntReqDecorator</code> the moment it's constructed. You can still do that as a handy default, but you should provide a way for the caller to specify the decorator they wish to use. We can do that by overloading the constructor.</p>\n<pre><code>public InternalCallVisitor() {\n  this(new IntReqDecorator());\n}\n\npublic InternalCallVisitor(IntReqDecorator intReqDecorator) {\n  this.intReqDecorator = intReqDecorator;\n}\n</code></pre>\n<p>Now this alone is enough firepower for us to write a good test. We can mock <code>IntReqDecorator</code> and use the one-argument constructor in tests.</p>\n<p>But I would go even further. You only ever use one method from <code>IntReqDecorator</code>, namely <code>decorate</code>. But since it's a concrete class, it probably has other methods that we don't really need here. So in an effort to follow <a href=\"https://en.wikipedia.org/wiki/Dependency_inversion_principle\" rel=\"nofollow noreferrer\">dependency inversion</a>, it may be a good idea to create an interface <code>IntReqDecoratorLike</code> (choose a better name for your use case) that has just that one method, and then have <code>IntReqDecorator</code> <em>implement</em> that interface.</p>\n<p>Then your constructor takes a <code>IntReqDecoratorLike</code> that is capable of doing <em>only</em> exactly what we need it to. The great thing about this is that you barely even have to mock anything to test it. You could theoretically just write a new (ordinary) class that implements <code>IntReqDecoratorLike</code> and use that in tests. We'll probably still use the mocking framework, since it does provide good error messages and built-in validation, but the alternative is there in principle.</p>\n<p>As a very broad general rule, when you find yourself scratching your head and saying &quot;This code looks difficult to test&quot;, you should take a step back. Because oftentimes, you can make a change to the API that not only makes testing easier but also makes the code more ergonomic to use down the road.</p>\n"}],"owner":{"account_id":14059537,"reputation":67,"user_id":10155969,"display_name":"Drazer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75444277,"answer_count":1,"score":0,"last_activity_date":1676385278,"creation_date":1676355649,"question_id":75444121,"body_markdown":"How do I write a mockito test for the below method? `IntReqDecorate.decorate` adds an Id to a call.\r\n\r\n```\r\npublic class IntVisitor implements Visitor {\r\n\r\n    private final IntReqDecorator intReqDecorator;\r\n\r\n    public InternalCallVisitor() {\r\n        this.intReqDecorator = new IntReqDecorator();\r\n    }\r\n\r\n    @Override\r\n    public void apply(Call call) {\r\n        intReqDecorator.decorate(call);\r\n    }\r\n}\r\n```","title":"Mockito a void method","body":"<p>How do I write a mockito test for the below method? <code>IntReqDecorate.decorate</code> adds an Id to a call.</p>\n<pre><code>public class IntVisitor implements Visitor {\n\n    private final IntReqDecorator intReqDecorator;\n\n    public InternalCallVisitor() {\n        this.intReqDecorator = new IntReqDecorator();\n    }\n\n    @Override\n    public void apply(Call call) {\n        intReqDecorator.decorate(call);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":1496659,"reputation":138,"user_id":1402425,"display_name":"vudangngoc"},"score":0,"creation_date":1676385687,"post_id":75449339,"comment_id":133123681,"body_markdown":"you should copy the font files to resources folder, then follow this guideline\n\nhttps://mkyong.com/java/java-read-a-file-from-resources-folder/","body":"you should copy the font files to resources folder, then follow this guideline  <a href=\"https://mkyong.com/java/java-read-a-file-from-resources-folder/\" rel=\"nofollow noreferrer\">mkyong.com/java/java-read-a-file-from-resources-folder</a>"}],"owner":{"account_id":2737217,"reputation":1295,"user_id":2359634,"accept_rate":71,"display_name":"user2359634"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676385262,"creation_date":1676385262,"question_id":75449339,"body_markdown":"I have spring boot application packaged as jar.\r\n\r\nThe static files I see at /opt/springboot/springboot-app/app.jar!/BOOT-INF/classes!/static/font\r\n\r\nHow do I access the files under font , but not as an InputStream\r\n","title":"Access static files in springboot jar","body":"<p>I have spring boot application packaged as jar.</p>\n<p>The static files I see at /opt/springboot/springboot-app/app.jar!/BOOT-INF/classes!/static/font</p>\n<p>How do I access the files under font , but not as an InputStream</p>\n"},{"tags":["java","android","kotlin","android-edittext"],"owner":{"account_id":27764469,"reputation":83,"user_id":21196105,"display_name":"WBarber"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1676385170,"creation_date":1676348975,"question_id":75443466,"body_markdown":"When overriding onDraw in an edittext, I can make the text in any location I see fit. What I&#39;m having trouble with is aligning their respective &quot;boxes&quot; ie the area where the actual char is clicked to edit said char. The text I can move, or rather draw wherever, but how do I align the actual physical position of the char to it&#39;s painted char? I&#39;m at a bit of a loss I couldn&#39;t figure out what to override to change these positions. Any help would be awesome! I don&#39;t have any code to post, as it&#39;s literally just an extended edittext and override onDraw with a for loop.\r\n\r\nI attempted to move the position of text digits individually inside an edit text using onDraw, but found it doesn&#39;t seem to move the actual location just the paint representation of it.\r\n\r\nEDIT ----------------------------------\r\n\r\nIve found what I believe to be what needs overriden, the onSelection start and end. But, it seems to cause an infinite recursion loop? Anyone got any ideas as to how this is done? Indentation is hard to do on a phone but here&#39;s a sample of the rough idea:\r\n\r\n\r\n    class HexEditorEditText(context: Context, attrs: AttributeSet?) : EditText(context, attrs) {\r\n    private val characterWidth: Float\r\n    private val characterHeight: Float\r\n\r\n    init {\r\n        val textPaint = paint\r\n        characterWidth = textPaint.measureText(&quot;00&quot;)\r\n        characterHeight = textPaint.fontSpacing\r\n    }\r\n\r\n    override fun onDraw(canvas: Canvas?) {\r\n        val text = text.toString()\r\n        var x = 0f\r\n        var y = 0f\r\n        for (i in 0 until text.length step 2) {\r\n            val pair = text.substring(i, i + 2)\r\n            canvas?.drawText(pair, x, y, paint)\r\n            x += characterWidth + characterWidth / 2\r\n        }\r\n    }\r\n\r\n    override fun getSelectionStart(): Int {\r\n        val layout = layout\r\n        val line = layout.getLineForOffset(selectionStart)\r\n        val x = layout.getPrimaryHorizontal(selectionStart)\r\n        return (x / (characterWidth + characterWidth / 2)).toInt() * 2\r\n        }\r\n\r\n    override fun getSelectionEnd(): Int {\r\n        val layout = layout\r\n        val line = layout.getLineForOffset(selectionEnd)\r\n        val x = layout.getPrimaryHorizontal(selectionEnd)\r\n        return (x / (characterWidth + characterWidth / 2)).toInt() * 2\r\n        }\r\n\r\n    override fun setSelection(start: Int, stop: Int) {\r\n        super.setSelection((start / 2) * 2, (stop / 2) * 2)\r\n        }\r\n    }\r\n","title":"Android EditText align actual text to onDraw positions?","body":"<p>When overriding onDraw in an edittext, I can make the text in any location I see fit. What I'm having trouble with is aligning their respective &quot;boxes&quot; ie the area where the actual char is clicked to edit said char. The text I can move, or rather draw wherever, but how do I align the actual physical position of the char to it's painted char? I'm at a bit of a loss I couldn't figure out what to override to change these positions. Any help would be awesome! I don't have any code to post, as it's literally just an extended edittext and override onDraw with a for loop.</p>\n<p>I attempted to move the position of text digits individually inside an edit text using onDraw, but found it doesn't seem to move the actual location just the paint representation of it.</p>\n<p>EDIT ----------------------------------</p>\n<p>Ive found what I believe to be what needs overriden, the onSelection start and end. But, it seems to cause an infinite recursion loop? Anyone got any ideas as to how this is done? Indentation is hard to do on a phone but here's a sample of the rough idea:</p>\n<pre><code>class HexEditorEditText(context: Context, attrs: AttributeSet?) : EditText(context, attrs) {\nprivate val characterWidth: Float\nprivate val characterHeight: Float\n\ninit {\n    val textPaint = paint\n    characterWidth = textPaint.measureText(&quot;00&quot;)\n    characterHeight = textPaint.fontSpacing\n}\n\noverride fun onDraw(canvas: Canvas?) {\n    val text = text.toString()\n    var x = 0f\n    var y = 0f\n    for (i in 0 until text.length step 2) {\n        val pair = text.substring(i, i + 2)\n        canvas?.drawText(pair, x, y, paint)\n        x += characterWidth + characterWidth / 2\n    }\n}\n\noverride fun getSelectionStart(): Int {\n    val layout = layout\n    val line = layout.getLineForOffset(selectionStart)\n    val x = layout.getPrimaryHorizontal(selectionStart)\n    return (x / (characterWidth + characterWidth / 2)).toInt() * 2\n    }\n\noverride fun getSelectionEnd(): Int {\n    val layout = layout\n    val line = layout.getLineForOffset(selectionEnd)\n    val x = layout.getPrimaryHorizontal(selectionEnd)\n    return (x / (characterWidth + characterWidth / 2)).toInt() * 2\n    }\n\noverride fun setSelection(start: Int, stop: Int) {\n    super.setSelection((start / 2) * 2, (stop / 2) * 2)\n    }\n}\n</code></pre>\n"},{"tags":["java","gradle","intellij-idea","integration-testing"],"answers":[{"tags":[],"owner":{"account_id":914392,"reputation":5655,"user_id":947526,"accept_rate":46,"display_name":"C-Otto"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1589648730,"creation_date":1589636319,"answer_id":61837673,"question_id":61836692,"body_markdown":"Two pieces were missing. The following only defines JUnit for the `test` module, but not `integrationTest`. See https://discuss.gradle.org/t/integration-tests-not-being-run/28745.\r\n```\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n```\r\n\r\nAs such, one of the following is necessary:\r\n```\r\nintegrationTest {\r\n    useJUnitPlatform()\r\n}\r\n```\r\nor\r\n```\r\ntasks.withType(Test) {\r\n    useJUnitPlatform()\r\n}\r\n```\r\n\r\nFurthermore, the JUnit runtime wasn&#39;t available for the integration tests. This can be fixed by including the test runtime dependencies:\r\n\r\nInstead of `integrationTestRuntimeOnly.extendsFrom runtimeOnly` use `integrationTestRuntimeOnly.extendsFrom testRuntimeOnly`.\r\n\r\nIf I add these two changes, the tests are executed with `./gradlew check`.\r\nI&#39;m also able to run the tests from inside IntelliJ IDEA.","title":"Gradle: make integration test source module work","body":"<p>Two pieces were missing. The following only defines JUnit for the <code>test</code> module, but not <code>integrationTest</code>. See <a href=\"https://discuss.gradle.org/t/integration-tests-not-being-run/28745\" rel=\"noreferrer\">https://discuss.gradle.org/t/integration-tests-not-being-run/28745</a>.</p>\n\n<pre><code>test {\n    useJUnitPlatform()\n}\n</code></pre>\n\n<p>As such, one of the following is necessary:</p>\n\n<pre><code>integrationTest {\n    useJUnitPlatform()\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>tasks.withType(Test) {\n    useJUnitPlatform()\n}\n</code></pre>\n\n<p>Furthermore, the JUnit runtime wasn't available for the integration tests. This can be fixed by including the test runtime dependencies:</p>\n\n<p>Instead of <code>integrationTestRuntimeOnly.extendsFrom runtimeOnly</code> use <code>integrationTestRuntimeOnly.extendsFrom testRuntimeOnly</code>.</p>\n\n<p>If I add these two changes, the tests are executed with <code>./gradlew check</code>.\nI'm also able to run the tests from inside IntelliJ IDEA.</p>\n"}],"owner":{"account_id":914392,"reputation":5655,"user_id":947526,"accept_rate":46,"display_name":"C-Otto"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8031,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":61837673,"answer_count":1,"score":6,"last_activity_date":1676384846,"creation_date":1589631927,"question_id":61836692,"body_markdown":"I have a simple multi-module Java Gradle project. The unit tests run fine, but I&#39;m unable to add a working source set for integration tests. The tests are compiled (I see compile errors), and appear in the console output, but they are not executed (the existing tests should fail). \r\n\r\nFurthermore, in IntelliJ IDEA, the source set is shown, but not as a test module.\r\nI see the &quot;run&quot; icons in the gutter next to the tests, but running a test gives\r\n`&gt; No tests found for given includes: [de.cotto.integration_tests.moduletwo.ModuleTest.name](filter.includeTestsMatching)`.\r\n\r\nMy questions:\r\n\r\n - What do I need to change in order to make the test(s) run (using `./gradlew build`)?\r\n - How can I make IntelliJ IDEA pick up the source set as a &quot;test&quot; module?\r\n - How can I run the tests from IntelliJ IDEA?\r\n - Bonus points for Java 14 with modules ([commit][1])\r\n\r\nSource set definition:\r\n```\r\nsourceSets {\r\n    integrationTest {\r\n        compileClasspath += sourceSets.main.output\r\n        runtimeClasspath += sourceSets.main.output\r\n    }\r\n}\r\n\r\nconfigurations {\r\n    integrationTestImplementation.extendsFrom testImplementation\r\n    integrationTestRuntimeOnly.extendsFrom runtimeOnly\r\n}\r\n\r\ntask integrationTest(type: Test) {\r\n    description = &#39;Runs integration tests.&#39;\r\n    group = &#39;verification&#39;\r\n\r\n    testClassesDirs = sourceSets.integrationTest.output.classesDirs\r\n    classpath = sourceSets.integrationTest.runtimeClasspath\r\n    shouldRunAfter test\r\n}\r\n\r\ncheck.dependsOn integrationTest\r\n```\r\n\r\n - Gradle 6.4.1\r\n - JUnit 5\r\n - Java 14 and 11\r\n - With and without Java modules (JPMS, Jigsaw)\r\n - IntelliJ IDEA 2020.1.2\r\n\r\n```\r\n$ ./gradlew clean check --no-build-cache --console=plain\r\n&gt; Task :module-one:clean\r\n&gt; Task :module-two:clean\r\n&gt; Task :module-two:processResources NO-SOURCE\r\n&gt; Task :module-two:processTestResources NO-SOURCE\r\n&gt; Task :module-two:processIntegrationTestResources NO-SOURCE\r\n&gt; Task :module-one:compileJava\r\n&gt; Task :module-one:processResources NO-SOURCE\r\n&gt; Task :module-one:classes\r\n&gt; Task :module-two:compileJava\r\n&gt; Task :module-two:classes\r\n&gt; Task :module-one:compileTestJava\r\n&gt; Task :module-one:processTestResources NO-SOURCE\r\n&gt; Task :module-one:testClasses\r\n&gt; Task :module-two:compileTestJava\r\n&gt; Task :module-two:testClasses\r\n&gt; Task :module-two:compileIntegrationTestJava\r\n&gt; Task :module-two:integrationTestClasses\r\n&gt; Task :module-one:test\r\n&gt; Task :module-one:check\r\n&gt; Task :module-one:jar\r\n&gt; Task :module-two:test\r\n&gt; Task :module-two:integrationTest &lt;-- What happens here? Why doesn&#39;t the test fail?\r\n&gt; Task :module-two:check\r\n\r\nBUILD SUCCESSFUL in 2s\r\n11 actionable tasks: 11 executed\r\n```\r\n\r\nSource code:\r\nhttps://github.com/C-Otto/gradle-integration-tests\r\n\r\n\r\n  [1]: https://github.com/C-Otto/gradle-integration-tests/commit/1d78291ba107031f3d9446683e3db124bba81ebe","title":"Gradle: make integration test source module work","body":"<p>I have a simple multi-module Java Gradle project. The unit tests run fine, but I'm unable to add a working source set for integration tests. The tests are compiled (I see compile errors), and appear in the console output, but they are not executed (the existing tests should fail). </p>\n\n<p>Furthermore, in IntelliJ IDEA, the source set is shown, but not as a test module.\nI see the \"run\" icons in the gutter next to the tests, but running a test gives\n<code>&gt; No tests found for given includes: [de.cotto.integration_tests.moduletwo.ModuleTest.name](filter.includeTestsMatching)</code>.</p>\n\n<p>My questions:</p>\n\n<ul>\n<li>What do I need to change in order to make the test(s) run (using <code>./gradlew build</code>)?</li>\n<li>How can I make IntelliJ IDEA pick up the source set as a \"test\" module?</li>\n<li>How can I run the tests from IntelliJ IDEA?</li>\n<li>Bonus points for Java 14 with modules (<a href=\"https://github.com/C-Otto/gradle-integration-tests/commit/1d78291ba107031f3d9446683e3db124bba81ebe\" rel=\"noreferrer\">commit</a>)</li>\n</ul>\n\n<p>Source set definition:</p>\n\n<pre><code>sourceSets {\n    integrationTest {\n        compileClasspath += sourceSets.main.output\n        runtimeClasspath += sourceSets.main.output\n    }\n}\n\nconfigurations {\n    integrationTestImplementation.extendsFrom testImplementation\n    integrationTestRuntimeOnly.extendsFrom runtimeOnly\n}\n\ntask integrationTest(type: Test) {\n    description = 'Runs integration tests.'\n    group = 'verification'\n\n    testClassesDirs = sourceSets.integrationTest.output.classesDirs\n    classpath = sourceSets.integrationTest.runtimeClasspath\n    shouldRunAfter test\n}\n\ncheck.dependsOn integrationTest\n</code></pre>\n\n<ul>\n<li>Gradle 6.4.1</li>\n<li>JUnit 5</li>\n<li>Java 14 and 11</li>\n<li>With and without Java modules (JPMS, Jigsaw)</li>\n<li>IntelliJ IDEA 2020.1.2</li>\n</ul>\n\n<pre><code>$ ./gradlew clean check --no-build-cache --console=plain\n&gt; Task :module-one:clean\n&gt; Task :module-two:clean\n&gt; Task :module-two:processResources NO-SOURCE\n&gt; Task :module-two:processTestResources NO-SOURCE\n&gt; Task :module-two:processIntegrationTestResources NO-SOURCE\n&gt; Task :module-one:compileJava\n&gt; Task :module-one:processResources NO-SOURCE\n&gt; Task :module-one:classes\n&gt; Task :module-two:compileJava\n&gt; Task :module-two:classes\n&gt; Task :module-one:compileTestJava\n&gt; Task :module-one:processTestResources NO-SOURCE\n&gt; Task :module-one:testClasses\n&gt; Task :module-two:compileTestJava\n&gt; Task :module-two:testClasses\n&gt; Task :module-two:compileIntegrationTestJava\n&gt; Task :module-two:integrationTestClasses\n&gt; Task :module-one:test\n&gt; Task :module-one:check\n&gt; Task :module-one:jar\n&gt; Task :module-two:test\n&gt; Task :module-two:integrationTest &lt;-- What happens here? Why doesn't the test fail?\n&gt; Task :module-two:check\n\nBUILD SUCCESSFUL in 2s\n11 actionable tasks: 11 executed\n</code></pre>\n\n<p>Source code:\n<a href=\"https://github.com/C-Otto/gradle-integration-tests\" rel=\"noreferrer\">https://github.com/C-Otto/gradle-integration-tests</a></p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1676298572,"post_id":75435896,"comment_id":133103628,"body_markdown":"Do you not have control over the class with `@ConfigurationProperties` and `@ConditionalOnProperty`?","body":"Do you not have control over the class with <code>@ConfigurationProperties</code> and <code>@ConditionalOnProperty</code>?"},{"owner":{"account_id":14300904,"reputation":156,"user_id":10330261,"display_name":"Wafa"},"score":0,"creation_date":1676299911,"post_id":75435896,"comment_id":133104157,"body_markdown":"Yes exactly the configuration class is in a third party library, and in my current project, the properties shall be organized in a specific way where the &quot;b&quot; should be under the property &quot;a&quot;, I could exclude the configuration class in the library and create it again with @ConditionalOnProperty(prefix = &quot;a.b&quot;) But wanted to know is there a feature in spring to rewrite a property name","body":"Yes exactly the configuration class is in a third party library, and in my current project, the properties shall be organized in a specific way where the &quot;b&quot; should be under the property &quot;a&quot;, I could exclude the configuration class in the library and create it again with @ConditionalOnProperty(prefix = &quot;a.b&quot;) But wanted to know is there a feature in spring to rewrite a property name"},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1676307845,"post_id":75435896,"comment_id":133106888,"body_markdown":"`@ConditionalOnProperty` requires a `name`, not just a prefix. It can&#39;t match a prefix, it has to be told a specific property to match. Did you leave something out when you adapted the code for this question?","body":"<code>@ConditionalOnProperty</code> requires a <code>name</code>, not just a prefix. It can&#39;t match a prefix, it has to be told a specific property to match. Did you leave something out when you adapted the code for this question?"},{"owner":{"account_id":14300904,"reputation":156,"user_id":10330261,"display_name":"Wafa"},"score":0,"creation_date":1676384414,"post_id":75435896,"comment_id":133123252,"body_markdown":"yes, true I have missed name property","body":"yes, true I have missed name property"}],"answers":[{"tags":[],"owner":{"account_id":2346611,"reputation":1008,"user_id":2056697,"accept_rate":94,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676300650,"creation_date":1676300650,"answer_id":75437631,"question_id":75435896,"body_markdown":"So your configuration class and properties files cannot be adapted. You can rename it at runtime in your `application.yml` :\r\n\r\n## BProperties\r\n``` java\r\n@ConfigurationProperties(prefix =&quot;b&quot;)\r\npublic class BProperties {\r\n    private String c;\r\n    private String d;\r\n}\r\n```\r\nAnd this properties file :\r\n\r\n## my-props-file.properties\r\n``` properties\r\na.b.c=value1\r\na.b.d=value2\r\n```\r\n\r\nYou can rename the properties at runtime in your `application.yml` (define in classpath under src/main/ressources/) :\r\n## application.yml \r\n``` yml\r\nb:\r\n  c: ${a.b.c}\r\n  d: ${a.b.d}\r\n```\r\n\r\n","title":"Rewrite a property name in Spring Boot","body":"<p>So your configuration class and properties files cannot be adapted. You can rename it at runtime in your <code>application.yml</code> :</p>\n<h2>BProperties</h2>\n<pre class=\"lang-java prettyprint-override\"><code>@ConfigurationProperties(prefix =&quot;b&quot;)\npublic class BProperties {\n    private String c;\n    private String d;\n}\n</code></pre>\n<p>And this properties file :</p>\n<h2>my-props-file.properties</h2>\n<pre><code>a.b.c=value1\na.b.d=value2\n</code></pre>\n<p>You can rename the properties at runtime in your <code>application.yml</code> (define in classpath under src/main/ressources/) :</p>\n<h2>application.yml</h2>\n<pre class=\"lang-yaml prettyprint-override\"><code>b:\n  c: ${a.b.c}\n  d: ${a.b.d}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1676310515,"creation_date":1676308484,"answer_id":75439119,"question_id":75435896,"body_markdown":"You can (probably, depending on the exact context of the config class you&#39;re working with) use YAML anchor and alias to meet this need. YAML anchors are similar to anchors (`&lt;a&gt;` tags) in HTML; you mark some part of the yaml with an anchor, then refer to it with a reference somewhere else. The reference is an _alias_ to the anchored value.\r\n\r\nIn your example, assuming the conditional config class is something like this:\r\n```java\r\n@Configuration\r\n@ConditionalOnProperty(prefix = &quot;b&quot;, name = &quot;foo&quot;)\r\n@ConfigurationProperties(prefix =&quot;b&quot;)\r\n@Getter @Setter\r\npublic class SO_75435896 {\r\n\r\n\tprivate String foo;\r\n}\r\n```\r\n\r\nYou can have a YAML config like this to populate it:\r\n```yaml\r\na.b: &amp;b-alias\r\n  foo: bar\r\n\r\nb: *b-alias\r\n```\r\n\r\nThe anchor name (`b-alias` in my example) can be whatever you want, there&#39;s nothing special about that name I chose.\r\n\r\n---\r\n\r\nIf you want to read more about YAML anchors, [this is a decent explanation][1]. It&#39;s part of Bitbucket documentation, but provides a pretty good general-purpose explanation with examples. There are, of course, plenty of other web pages about YAML anchors.\r\n\r\n\r\n  [1]: https://support.atlassian.com/bitbucket-cloud/docs/yaml-anchors/","title":"Rewrite a property name in Spring Boot","body":"<p>You can (probably, depending on the exact context of the config class you're working with) use YAML anchor and alias to meet this need. YAML anchors are similar to anchors (<code>&lt;a&gt;</code> tags) in HTML; you mark some part of the yaml with an anchor, then refer to it with a reference somewhere else. The reference is an <em>alias</em> to the anchored value.</p>\n<p>In your example, assuming the conditional config class is something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@ConditionalOnProperty(prefix = &quot;b&quot;, name = &quot;foo&quot;)\n@ConfigurationProperties(prefix =&quot;b&quot;)\n@Getter @Setter\npublic class SO_75435896 {\n\n    private String foo;\n}\n</code></pre>\n<p>You can have a YAML config like this to populate it:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>a.b: &amp;b-alias\n  foo: bar\n\nb: *b-alias\n</code></pre>\n<p>The anchor name (<code>b-alias</code> in my example) can be whatever you want, there's nothing special about that name I chose.</p>\n<hr />\n<p>If you want to read more about YAML anchors, <a href=\"https://support.atlassian.com/bitbucket-cloud/docs/yaml-anchors/\" rel=\"nofollow noreferrer\">this is a decent explanation</a>. It's part of Bitbucket documentation, but provides a pretty good general-purpose explanation with examples. There are, of course, plenty of other web pages about YAML anchors.</p>\n"}],"owner":{"account_id":14300904,"reputation":156,"user_id":10330261,"display_name":"Wafa"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":466,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75439119,"answer_count":2,"score":2,"last_activity_date":1676384447,"creation_date":1676291358,"question_id":75435896,"body_markdown":"I have a library that has a configuration class with `@ConfigurationProperties(prefix =&quot;b&quot;)` and `@ConditionalOnProperty(prefix = &quot;b&quot;, name= &quot;c&quot;)`, in the project where I included this configuration class, the property &quot;b&quot; is nested under a property called &quot;a&quot; instead of being at the root level of the properties.yml, with this the property &quot;b&quot; name is &quot;a.b&quot; and the configuration class will get ignored, the property name needs to be kept &quot;a.b&quot; in the property file, is there a way to tell spring boot to ignore the &quot;a&quot; prefix for the property &quot;b&quot; or to rewrite the property name from &quot;a.b&quot; to &quot;b&quot; after application.yml gets loaded ?","title":"Rewrite a property name in Spring Boot","body":"<p>I have a library that has a configuration class with <code>@ConfigurationProperties(prefix =&quot;b&quot;)</code> and <code>@ConditionalOnProperty(prefix = &quot;b&quot;, name= &quot;c&quot;)</code>, in the project where I included this configuration class, the property &quot;b&quot; is nested under a property called &quot;a&quot; instead of being at the root level of the properties.yml, with this the property &quot;b&quot; name is &quot;a.b&quot; and the configuration class will get ignored, the property name needs to be kept &quot;a.b&quot; in the property file, is there a way to tell spring boot to ignore the &quot;a&quot; prefix for the property &quot;b&quot; or to rewrite the property name from &quot;a.b&quot; to &quot;b&quot; after application.yml gets loaded ?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1894536,"reputation":54819,"user_id":1711796,"accept_rate":100,"display_name":"Bernhard Barker"},"score":2,"creation_date":1385227824,"post_id":20165485,"comment_id":30060108,"body_markdown":"If you think it should be returning true, your regex is not doing what you think it&#39;s doing. Please tell us what you think it should be doing so we can tell you where you&#39;ve gone wrong.","body":"If you think it should be returning true, your regex is not doing what you think it&#39;s doing. Please tell us what you think it should be doing so we can tell you where you&#39;ve gone wrong."},{"owner":{"account_id":197547,"reputation":2250,"user_id":441692,"accept_rate":100,"display_name":"Sanchit"},"score":0,"creation_date":1385228101,"post_id":20165485,"comment_id":30060210,"body_markdown":"Another wild guess here. But are you meaning to use `^` to mean the begining of the line? If so you are doing it wrong.","body":"Another wild guess here. But are you meaning to use <code>^</code> to mean the begining of the line? If so you are doing it wrong."},{"owner":{"account_id":3248402,"reputation":2386,"user_id":2739334,"accept_rate":64,"display_name":"Pwnstar"},"score":0,"creation_date":1499949935,"post_id":20165485,"comment_id":77134481,"body_markdown":"ever tried &#39;if(matcher.find() == true) return matcher.group(0);&#39;","body":"ever tried &#39;if(matcher.find() == true) return matcher.group(0);&#39;"},{"owner":{"account_id":2833171,"reputation":578,"user_id":2434307,"display_name":"Jose Quijada"},"score":0,"creation_date":1570327813,"post_id":20165485,"comment_id":102877325,"body_markdown":"This behavior of Java&#39;s `String.matches()` does not seem intuitive because in Perl you can do `perl -e &#39;$target_str = &quot;the string&quot;; print $target_str =~ /the/&#39;` and the match is positive. The command returns 1, which equates to `true`. This is something that always gets me in Java and I have to keep referring to support to remember how `String.matches()` works in Java.","body":"This behavior of Java&#39;s <code>String.matches()</code> does not seem intuitive because in Perl you can do <code>perl -e &#39;$target_str = &quot;the string&quot;; print $target_str =~ &#47;the&#47;&#39;</code> and the match is positive. The command returns 1, which equates to <code>true</code>. This is something that always gets me in Java and I have to keep referring to support to remember how <code>String.matches()</code> works in Java."}],"answers":[{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1676383889,"creation_date":1385227913,"answer_id":20165570,"question_id":20165485,"body_markdown":"`matches` returns `true` only if regex matches *entire string*. \r\n\r\nIn your case your regex represents only *one* character that is not `a-z`, `A-Z` or `.`. \r\n\r\nI suspect that you want to check if string *contains* one of these special characters which you described in regex. In that case surround your regex with `.*` to let regex match entire string. Oh, and you don&#39;t have to escape `.` inside character class `[.]`.\r\n\r\n    if (&quot;test%$@*)$(%&quot;.matches(&quot;.*[^a-zA-Z.].*&quot;)) {\r\n        //string contains character that is not in rage a-z, A-Z, or &#39;.&#39;\r\n\r\n---\r\nBUT if you care about performance you can use `Matcher#find()` method which \r\n\r\n1. can return `true` the moment it will find substring containing match for regex. This way application will not need to check rest of the text, which saves us more time the longer remaining text is.\r\n\r\n2. Will not force us to constantly build Pattern object each time `String#matches(regex)` is called, because we can create Pattern once and reuse it with different data.\r\n\r\nDemo:\r\n\r\n```\r\nPattern p = Pattern.compile(&quot;[^a-zA-Z\\\\.]&quot;);\r\n\r\nMatcher m = p.matcher(&quot;test%$@*)$(%&quot;);\r\nif(m.find())\r\n    System.exit(0);\r\n\r\n//OR with Matcher inlined since we don&#39;t really need that variable\r\nif (p.matcher(&quot;test%$@*)$(%&quot;).find())\r\n    System.exit(0);\r\n```","title":"Why is String.matches returning false in Java?","body":"<p><code>matches</code> returns <code>true</code> only if regex matches <em>entire string</em>.</p>\n<p>In your case your regex represents only <em>one</em> character that is not <code>a-z</code>, <code>A-Z</code> or <code>.</code>.</p>\n<p>I suspect that you want to check if string <em>contains</em> one of these special characters which you described in regex. In that case surround your regex with <code>.*</code> to let regex match entire string. Oh, and you don't have to escape <code>.</code> inside character class <code>[.]</code>.</p>\n<pre><code>if (&quot;test%$@*)$(%&quot;.matches(&quot;.*[^a-zA-Z.].*&quot;)) {\n    //string contains character that is not in rage a-z, A-Z, or '.'\n</code></pre>\n<hr />\n<p>BUT if you care about performance you can use <code>Matcher#find()</code> method which</p>\n<ol>\n<li><p>can return <code>true</code> the moment it will find substring containing match for regex. This way application will not need to check rest of the text, which saves us more time the longer remaining text is.</p>\n</li>\n<li><p>Will not force us to constantly build Pattern object each time <code>String#matches(regex)</code> is called, because we can create Pattern once and reuse it with different data.</p>\n</li>\n</ol>\n<p>Demo:</p>\n<pre><code>Pattern p = Pattern.compile(&quot;[^a-zA-Z\\\\.]&quot;);\n\nMatcher m = p.matcher(&quot;test%$@*)$(%&quot;);\nif(m.find())\n    System.exit(0);\n\n//OR with Matcher inlined since we don't really need that variable\nif (p.matcher(&quot;test%$@*)$(%&quot;).find())\n    System.exit(0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2603307,"reputation":88305,"user_id":2255089,"display_name":"Casimir et Hippolyte"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1647984846,"creation_date":1385227926,"answer_id":20165575,"question_id":20165485,"body_markdown":"You obtain always false because the `matches()` method returns `true` only when the pattern matches the full string.\r\n\r\n","title":"Why is String.matches returning false in Java?","body":"<p>You obtain always false because the <code>matches()</code> method returns <code>true</code> only when the pattern matches the full string.</p>\n"},{"tags":[],"owner":{"account_id":701757,"reputation":121151,"user_id":592139,"display_name":"Ian Roberts"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1385228961,"creation_date":1385228961,"answer_id":20165752,"question_id":20165485,"body_markdown":"`x.matches(y)` is equivalent to\r\n\r\n    Pattern.compile(y).matcher(x).matches()\r\n\r\nand requires the whole string `x` to match the regex `y`.  If you just want to know if there is _some substring_ of `x` that matches `y` then you need to use `find()` instead of `matches()`:\r\n\r\n    if(Pattern.compile(&quot;[^a-zA-Z.]&quot;).matcher(&quot;test%$@*)$(%&quot;).find())\r\n        System.exit(0);\r\n\r\nAlternatively you could reverse the sense of the test:\r\n\r\n    if(!&quot;test%$@*)$(%&quot;.matches(&quot;[a-zA-Z.]*&quot;))\r\n\r\nby providing a pattern that matches the strings that are allowed rather than the characters that aren&#39;t, and then seeing whether the test string _fails_ to match this pattern.","title":"Why is String.matches returning false in Java?","body":"<p><code>x.matches(y)</code> is equivalent to</p>\n\n<pre><code>Pattern.compile(y).matcher(x).matches()\n</code></pre>\n\n<p>and requires the whole string <code>x</code> to match the regex <code>y</code>.  If you just want to know if there is <em>some substring</em> of <code>x</code> that matches <code>y</code> then you need to use <code>find()</code> instead of <code>matches()</code>:</p>\n\n<pre><code>if(Pattern.compile(\"[^a-zA-Z.]\").matcher(\"test%$@*)$(%\").find())\n    System.exit(0);\n</code></pre>\n\n<p>Alternatively you could reverse the sense of the test:</p>\n\n<pre><code>if(!\"test%$@*)$(%\".matches(\"[a-zA-Z.]*\"))\n</code></pre>\n\n<p>by providing a pattern that matches the strings that are allowed rather than the characters that aren't, and then seeing whether the test string <em>fails</em> to match this pattern.</p>\n"}],"owner":{"account_id":295003,"reputation":24939,"user_id":599184,"accept_rate":78,"display_name":"Leo Jiang"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17003,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"accepted_answer_id":20165570,"answer_count":3,"score":9,"last_activity_date":1676383889,"creation_date":1385227516,"question_id":20165485,"body_markdown":"    if(&quot;test%$@*)$(%&quot;.matches(&quot;[^a-zA-Z\\\\.]&quot;))\r\n    \tSystem.exit(0);\r\n\r\n    if(&quot;te/st.txt&quot;.matches(&quot;[^a-zA-Z\\\\.]&quot;))\r\n    \tSystem.exit(0);\r\n\r\nThe program isn&#39;t exiting even though the regexes should be returning true. What&#39;s wrong with the code?","title":"Why is String.matches returning false in Java?","body":"<pre><code>if(\"test%$@*)$(%\".matches(\"[^a-zA-Z\\\\.]\"))\n    System.exit(0);\n\nif(\"te/st.txt\".matches(\"[^a-zA-Z\\\\.]\"))\n    System.exit(0);\n</code></pre>\n\n<p>The program isn't exiting even though the regexes should be returning true. What's wrong with the code?</p>\n"},{"tags":["java","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":1,"creation_date":1675332410,"post_id":75321100,"comment_id":132907481,"body_markdown":"Why 2 sets 1) version: &#39;4.3.0&#39;/java.version: &#39;11.0.15&#39; and 2) version: &#39;3.141.59&#39;/java.version: &#39;11.0.17&#39;? Are you using SeleniumGrid?","body":"Why 2 sets 1) version: &#39;4.3.0&#39;/java.version: &#39;11.0.15&#39; and 2) version: &#39;3.141.59&#39;/java.version: &#39;11.0.17&#39;? Are you using SeleniumGrid?"},{"owner":{"account_id":10621254,"reputation":2629,"user_id":7822301,"accept_rate":56,"display_name":"Zakaria Shahed"},"score":0,"creation_date":1675337553,"post_id":75321100,"comment_id":132909234,"body_markdown":"share your dependency pom file, If its a maven project","body":"share your dependency pom file, If its a maven project"},{"owner":{"account_id":6235501,"reputation":3140,"user_id":4850949,"accept_rate":57,"display_name":"not2savvy"},"score":0,"creation_date":1675339853,"post_id":75321100,"comment_id":132909959,"body_markdown":"@ZakariaShahed I did, please check.","body":"@ZakariaShahed I did, please check."},{"owner":{"account_id":6235501,"reputation":3140,"user_id":4850949,"accept_rate":57,"display_name":"not2savvy"},"score":0,"creation_date":1675340058,"post_id":75321100,"comment_id":132910029,"body_markdown":"@undetectedSelenium I must admit I have no idea. 2) is from pom, but 1) I&#39;m not sure - is it the Chrome browser&#39;s version? Tests run on a Linux machine that connects to a Chrome in docker (selenium/standalone-chrome). No grid.","body":"@undetectedSelenium I must admit I have no idea. 2) is from pom, but 1) I&#39;m not sure - is it the Chrome browser&#39;s version? Tests run on a Linux machine that connects to a Chrome in docker (selenium/standalone-chrome). No grid."},{"owner":{"account_id":6235501,"reputation":3140,"user_id":4850949,"accept_rate":57,"display_name":"not2savvy"},"score":0,"creation_date":1675348127,"post_id":75321100,"comment_id":132913012,"body_markdown":"I&#39;ve updated Selenium to version 4.8.0 to see if that fixes it, but I&#39;m still getting these exceptions.","body":"I&#39;ve updated Selenium to version 4.8.0 to see if that fixes it, but I&#39;m still getting these exceptions."}],"answers":[{"tags":[],"owner":{"account_id":6235501,"reputation":3140,"user_id":4850949,"accept_rate":57,"display_name":"not2savvy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676383534,"creation_date":1675696705,"answer_id":75363193,"question_id":75321100,"body_markdown":"My assumption is that the error message `Expected to read a START_MAP but instead have: END` is caused by a page that was loaded okay, but then changed (due to some JavaScript perhaps), and Selenium&#39;s internal map does match the DOM any more. It actually looks like it&#39;s suddenly turned into an empty page. So this is may the same cause as with the `StaleElementReferenceException`, but it happens even before the element has been found. \r\n\r\nOr maybe it&#39;s something completely different.\r\n\r\nHowever, while I haven&#39;t really found out the root cause, I have found a way to successfully work around the problem. When the `WebDriverException` occurs, it turned out to be a successful approach to start over from loading the page.\r\n\r\nI therefore created a wrapper function that would `try` and `catch` the `WebDriverException`, then wait a second and try again. In my tests, it was always enough to retry just once.\r\n\r\nSimple example:\r\n````\r\n\tpublic void normalLogin() {\r\n    \tdriver.get(getBaseUrl() + location);\r\n\t    driver.findElement(By.id(&quot;password&quot;).sendKeys(getPassword());\r\n\t    driver.findElement(By.id(&quot;authenticateButton&quot;).click();\r\n    }\r\n\r\n    public void stableLogin() {\r\n\t\ttry {\r\n\t\t\tnormalLogin();\r\n\t\t}\r\n\t\tcatch (WebDriverException driverE) {\r\n\t\t\tSystem.err.println(&quot;Caught a WebDriverException, retrying&quot;);\r\n\t\t\t// wait a little \r\n\t\t\ttry {\r\n\t             Thread.sleep(1000);\r\n\t        } catch (final InterruptedException e) {\r\n\t        \t Thread.currentThread().interrupt();\r\n\t        }\r\n\t\t\t// then try again\r\n            normalLogin();\r\n\t\t}\r\n    }\r\n````\r\n\r\nNote that the second attempt won&#39;t be caught any more, because I haven&#39;t had a case where repeating only once wouldn&#39;t haven been enough.","title":"How to fix sporadic org.openqa.selenium.WebDriverException: Expected to read a START_MAP but instead have: END","body":"<p>My assumption is that the error message <code>Expected to read a START_MAP but instead have: END</code> is caused by a page that was loaded okay, but then changed (due to some JavaScript perhaps), and Selenium's internal map does match the DOM any more. It actually looks like it's suddenly turned into an empty page. So this is may the same cause as with the <code>StaleElementReferenceException</code>, but it happens even before the element has been found.</p>\n<p>Or maybe it's something completely different.</p>\n<p>However, while I haven't really found out the root cause, I have found a way to successfully work around the problem. When the <code>WebDriverException</code> occurs, it turned out to be a successful approach to start over from loading the page.</p>\n<p>I therefore created a wrapper function that would <code>try</code> and <code>catch</code> the <code>WebDriverException</code>, then wait a second and try again. In my tests, it was always enough to retry just once.</p>\n<p>Simple example:</p>\n<pre><code>    public void normalLogin() {\n        driver.get(getBaseUrl() + location);\n        driver.findElement(By.id(&quot;password&quot;).sendKeys(getPassword());\n        driver.findElement(By.id(&quot;authenticateButton&quot;).click();\n    }\n\n    public void stableLogin() {\n        try {\n            normalLogin();\n        }\n        catch (WebDriverException driverE) {\n            System.err.println(&quot;Caught a WebDriverException, retrying&quot;);\n            // wait a little \n            try {\n                 Thread.sleep(1000);\n            } catch (final InterruptedException e) {\n                 Thread.currentThread().interrupt();\n            }\n            // then try again\n            normalLogin();\n        }\n    }\n</code></pre>\n<p>Note that the second attempt won't be caught any more, because I haven't had a case where repeating only once wouldn't haven been enough.</p>\n"}],"owner":{"account_id":6235501,"reputation":3140,"user_id":4850949,"accept_rate":57,"display_name":"not2savvy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75363193,"answer_count":1,"score":1,"last_activity_date":1676383534,"creation_date":1675330395,"question_id":75321100,"body_markdown":"In our Selenium tests, we occasionally get\r\n````\r\norg.openqa.selenium.WebDriverException: \r\nExpected to read a START_MAP but instead have: END. Last 0 characters read: \r\n````\r\nThese exceptions occur sporadically in a random single test case among many. \r\n\r\nWhat causes this exception and how to fix it?\r\n\r\n----\r\nAdditional info from the error message that may be relevant:\r\n````\r\nBuild info: version: &#39;4.3.0&#39;, revision: &#39;a4995e2c09*&#39;\r\nSystem info: host: &#39;chrome.test.domain&#39;, ip: &#39;172.17.0.5&#39;, os.name: &#39;Linux&#39;, os.arch: \r\n&#39;amd64&#39;, os.version: &#39;5.4.0-132-generic&#39;, java.version: &#39;11.0.15&#39;\r\nDriver info: driver.version: unknown\r\nBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\nSystem info: host: &#39;test-server&#39;, ip: &#39;127.0.1.1&#39;, os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, \r\nos.version: &#39;5.4.0-132-generic&#39;, java.version: &#39;11.0.17&#39;\r\nDriver info: org.openqa.selenium.remote.RemoteWebDriver\r\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: \r\n103.0.5060.53, chrome: {chromedriverVersion: 103.0.5060.53 (a1711811edd7..., \r\nuserDataDir: /tmp/.com.google.Chrome.rGHR0n}, goog:chromeOptions: {debuggerAddress: \r\nlocalhost:42853}, javascriptEnabled: true, networkConnectionEnabled: false, \r\npageLoadStrategy: normal, platform: LINUX, platformName: LINUX, proxy: Proxy(), se:cdp: \r\nws://172.17.0.5:4444/sessio..., se:cdpVersion: 103.0.5060.53, se:vnc: \r\nws://172.17.0.5:4444/sessio..., se:vncEnabled: true, se:vncLocalAddress: \r\nws://172.17.0.5:7900, setWindowRect: true, strictFileInteractability: false, timeouts: \r\n{implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and \r\nnotify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, \r\nwebauthn:virtualAuthenticators: true}\r\n````\r\nTesting dependencies in pom.xml (note that originally I was using version 3.141.59, now updated to 3.8.0 because of [this issue](https://github.com/SeleniumHQ/docker-selenium/issues/1507), but that didn&#39;t help):\r\n````\r\n      &lt;!-- Dependencies for testing. --&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;junit&lt;/groupId&gt;\r\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n        &lt;version&gt;[4.8.0,5.0.0)&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.assertj&lt;/groupId&gt;\r\n        &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\r\n        &lt;version&gt;3.14.0&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\r\n        &lt;version&gt;1.8.5&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n        &lt;version&gt;4.1.1&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n        &lt;version&gt;1.6.6&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.0&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n        &lt;artifactId&gt;selenium-support&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.0&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n````","title":"How to fix sporadic org.openqa.selenium.WebDriverException: Expected to read a START_MAP but instead have: END","body":"<p>In our Selenium tests, we occasionally get</p>\n<pre><code>org.openqa.selenium.WebDriverException: \nExpected to read a START_MAP but instead have: END. Last 0 characters read: \n</code></pre>\n<p>These exceptions occur sporadically in a random single test case among many.</p>\n<p>What causes this exception and how to fix it?</p>\n<hr />\n<p>Additional info from the error message that may be relevant:</p>\n<pre><code>Build info: version: '4.3.0', revision: 'a4995e2c09*'\nSystem info: host: 'chrome.test.domain', ip: '172.17.0.5', os.name: 'Linux', os.arch: \n'amd64', os.version: '5.4.0-132-generic', java.version: '11.0.15'\nDriver info: driver.version: unknown\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'test-server', ip: '127.0.1.1', os.name: 'Linux', os.arch: 'amd64', \nos.version: '5.4.0-132-generic', java.version: '11.0.17'\nDriver info: org.openqa.selenium.remote.RemoteWebDriver\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: \n103.0.5060.53, chrome: {chromedriverVersion: 103.0.5060.53 (a1711811edd7..., \nuserDataDir: /tmp/.com.google.Chrome.rGHR0n}, goog:chromeOptions: {debuggerAddress: \nlocalhost:42853}, javascriptEnabled: true, networkConnectionEnabled: false, \npageLoadStrategy: normal, platform: LINUX, platformName: LINUX, proxy: Proxy(), se:cdp: \nws://172.17.0.5:4444/sessio..., se:cdpVersion: 103.0.5060.53, se:vnc: \nws://172.17.0.5:4444/sessio..., se:vncEnabled: true, se:vncLocalAddress: \nws://172.17.0.5:7900, setWindowRect: true, strictFileInteractability: false, timeouts: \n{implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and \nnotify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, \nwebauthn:virtualAuthenticators: true}\n</code></pre>\n<p>Testing dependencies in pom.xml (note that originally I was using version 3.141.59, now updated to 3.8.0 because of <a href=\"https://github.com/SeleniumHQ/docker-selenium/issues/1507\" rel=\"nofollow noreferrer\">this issue</a>, but that didn't help):</p>\n<pre><code>      &lt;!-- Dependencies for testing. --&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;[4.8.0,5.0.0)&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.assertj&lt;/groupId&gt;\n        &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\n        &lt;version&gt;3.14.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n        &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\n        &lt;version&gt;1.8.5&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n        &lt;version&gt;4.1.1&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n        &lt;version&gt;1.6.6&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n        &lt;version&gt;3.8.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-support&lt;/artifactId&gt;\n        &lt;version&gt;3.8.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","maven","gradle","build.gradle","gradlew"],"answers":[{"tags":[],"owner":{"account_id":5218565,"reputation":1034,"user_id":6540591,"display_name":"User51"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676383509,"creation_date":1676383509,"answer_id":75448969,"question_id":75443474,"body_markdown":"Assuming you did step 2 in project B, it should work (although I would like do a `clean` as well): `./gradlew clean build --refresh-dependencies`\r\n\r\nIf you do this a lot (and esp if you find it tedious to type `--refresh-dependencies` every time, you could consider marking the dependency from project A as `changing`...\r\n\r\n```groovy\r\nconfigurations.all { resolutionStrategy.cacheChangingModulesFor 0, &quot;seconds&quot; }\r\ndependencies {\r\n    implementation(&quot;com.example.group:my-artifact:3.2.1&quot;)) { changing = true }\r\n// ...\r\n}\r\n```\r\n\r\nThe `configurations` block tells Gradle how to handle changing modules, and the the `changing = true` will flag individual dependencies.  Then, every Gradle build, it will try to update the dependency.","title":"How do I reload all the dependencies from mavenLocal using gradle?","body":"<p>Assuming you did step 2 in project B, it should work (although I would like do a <code>clean</code> as well): <code>./gradlew clean build --refresh-dependencies</code></p>\n<p>If you do this a lot (and esp if you find it tedious to type <code>--refresh-dependencies</code> every time, you could consider marking the dependency from project A as <code>changing</code>...</p>\n<pre><code>configurations.all { resolutionStrategy.cacheChangingModulesFor 0, &quot;seconds&quot; }\ndependencies {\n    implementation(&quot;com.example.group:my-artifact:3.2.1&quot;)) { changing = true }\n// ...\n}\n</code></pre>\n<p>The <code>configurations</code> block tells Gradle how to handle changing modules, and the the <code>changing = true</code> will flag individual dependencies.  Then, every Gradle build, it will try to update the dependency.</p>\n"}],"owner":{"account_id":13969752,"reputation":125,"user_id":10088682,"display_name":"Varun Hegde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75448969,"answer_count":1,"score":0,"last_activity_date":1676383509,"creation_date":1676349065,"question_id":75443474,"body_markdown":"I have Project A and B in my system and B uses some of the packages defined in A and I have added some classes in project A but i am not able to reference them in B.\r\n\r\nWhat I have tried\r\n1) Did ./gradlew publishToMavenLocal in project A\r\n2) Did ./gradlew build --refresh-dependencies\r\n\r\nCan some please advise me how can I achieve this ?\r\n\r\nThanks\r\n","title":"How do I reload all the dependencies from mavenLocal using gradle?","body":"<p>I have Project A and B in my system and B uses some of the packages defined in A and I have added some classes in project A but i am not able to reference them in B.</p>\n<p>What I have tried</p>\n<ol>\n<li>Did ./gradlew publishToMavenLocal in project A</li>\n<li>Did ./gradlew build --refresh-dependencies</li>\n</ol>\n<p>Can some please advise me how can I achieve this ?</p>\n<p>Thanks</p>\n"},{"tags":["java","automated-tests","selenide"],"comments":[{"owner":{"account_id":2976922,"reputation":9740,"user_id":2527795,"accept_rate":92,"display_name":"VLL"},"score":0,"creation_date":1676372763,"post_id":75446661,"comment_id":133119674,"body_markdown":"What programming language or framework are you using to create the tests? Are these unit tests or system tests?","body":"What programming language or framework are you using to create the tests? Are these unit tests or system tests?"},{"owner":{"account_id":27542578,"reputation":1,"user_id":21019077,"display_name":"조잔쓰"},"score":0,"creation_date":1676375574,"post_id":75446661,"comment_id":133120495,"body_markdown":"Since I make products manually, I want to make products automatically to reduce resources, so I am making them myself.\nI&#39;m working with Java &amp; Selenide.","body":"Since I make products manually, I want to make products automatically to reduce resources, so I am making them myself. I&#39;m working with Java &amp; Selenide."}],"owner":{"account_id":27542578,"reputation":1,"user_id":21019077,"display_name":"조잔쓰"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676383389,"creation_date":1676371269,"question_id":75446661,"body_markdown":"If the create product button is inactive, it should not be clicked, and after the code a is executed, the code to click the create button on the entered page is written as follows.\r\n\r\n```\r\nCreatorProductPage.createProductButton().shouldNotBe(Condition.disabled).click();\r\nCreatorAddProductPage.createClassButton().click();\r\n```\r\n\r\n\r\nBut here, if I can&#39;t find the product creation button in code a, I want to run code b. How should I do that?","title":"I&#39;m creating test automation and I want to resolve exceptions","body":"<p>If the create product button is inactive, it should not be clicked, and after the code a is executed, the code to click the create button on the entered page is written as follows.</p>\n<pre><code>CreatorProductPage.createProductButton().shouldNotBe(Condition.disabled).click();\nCreatorAddProductPage.createClassButton().click();\n</code></pre>\n<p>But here, if I can't find the product creation button in code a, I want to run code b. How should I do that?</p>\n"},{"tags":["java","android","android-fragments"],"comments":[{"owner":{"account_id":4716677,"reputation":580,"user_id":3815660,"display_name":"Yurii"},"score":1,"creation_date":1676383177,"post_id":75448865,"comment_id":133122837,"body_markdown":"remove android:onClick=&quot;Cocktails&quot;","body":"remove android:onClick=&quot;Cocktails&quot;"},{"owner":{"account_id":4716677,"reputation":580,"user_id":3815660,"display_name":"Yurii"},"score":0,"creation_date":1676384876,"post_id":75448865,"comment_id":133123419,"body_markdown":"provide more details, like screenshots, also provide where is R.id.fragment_home and where did you add HomeFragment ?","body":"provide more details, like screenshots, also provide where is R.id.fragment_home and where did you add HomeFragment ?"}],"owner":{"account_id":23694523,"reputation":11,"user_id":17718436,"display_name":"Tuan Do"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676382973,"creation_date":1676382973,"question_id":75448865,"body_markdown":"How can I open a fragment from a fragment with Cardview?  I have a list of Cardview in fragment_home.xml and when i click in one of those want to show in another fragment. \r\nHere is what i have so far.\r\n\r\nfragment_home.xml\r\n\r\n\r\n           &lt;androidx.cardview.widget.CardView\r\n            android:id=&quot;@+id/cvCocktails&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_margin=&quot;10dp&quot;\r\n            app:cardCornerRadius=&quot;15dp&quot;\r\n            app:cardElevation=&quot;0dp&quot;\r\n            app:layout_columnWeight=&quot;1&quot;\r\n            app:layout_rowWeight=&quot;1&quot;\r\n            &gt;\r\n\r\n            &lt;RelativeLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:onClick=&quot;Cocktails&quot;&gt;\r\n\r\n                &lt;ImageView\r\n                    android:id=&quot;@+id/ivCocktails&quot;\r\n                    android:layout_width=&quot;115dp&quot;\r\n                    android:layout_height=&quot;115dp&quot;\r\n                    android:layout_centerInParent=&quot;true&quot;\r\n                    android:contentDescription=&quot;@string/cocktail&quot;\r\n                    android:src=&quot;@drawable/cocktail_color&quot;\r\n                    android:translationY=&quot;-15dp&quot;\r\n                    tools:ignore=&quot;VisualLintBounds&quot; /&gt;\r\n\r\n                &lt;TextView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_below=&quot;@id/ivCocktails&quot;\r\n                    android:layout_centerHorizontal=&quot;true&quot;\r\n                    android:text=&quot;@string/cocktail&quot;\r\n                    android:textSize=&quot;20dp&quot;\r\n                    tools:ignore=&quot;SpUsage,TextSizeCheck&quot; /&gt;\r\n            &lt;/RelativeLayout&gt;\r\n\r\nHomeFragment.java\r\n\r\n    public class HomeFragment extends Fragment {\r\n    public CardView cocktails;\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n\r\n        View view = inflater.inflate(R.layout.fragment_home,container,false);\r\n\r\n        cocktails = view.findViewById(R.id.cvCocktails);\r\n        cocktails.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                CocktailFragment cocktailFragment = new CocktailFragment();\r\n                getActivity().getSupportFragmentManager().beginTransaction()\r\n                        .replace(R.id.fragment_home,cocktailFragment,null)\r\n                        .addToBackStack(null).commit();\r\n            }\r\n        });\r\n        return  view;\r\n    }\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n    }\r\n  }\r\n\r\nWhen i compile the app and click on Cocktail Cardview i have this error. How can i fix this. Thank you.\r\n&gt; \r\n        E/AndroidRuntime: FATAL EXCEPTION: main\r\n        Process: com.example.barapp, PID: 11805\r\n        java.lang.IllegalStateException: Could not find method Cocktails(View) in a parent \r\n        or ancestor Context for android:onClick attribute defined on view class \r\n        android.widget.RelativeLayout\r\n        at android.view.View$DeclaredOnClickListener.resolveMethod(View.java:6302)\r\n        at android.view.View$DeclaredOnClickListener.onClick(View.java:6259)\r\n        at android.view.View.performClick(View.java:7448)\r\n        at android.view.View.performClickInternal(View.java:7425)\r\n        at android.view.View.access$3600(View.java:810)\r\n        at android.view.View$PerformClick.run(View.java:28305)\r\n        at android.os.Handler.handleCallback(Handler.java:938)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:223)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)","title":"Open fragment from a fragment with cardview","body":"<p>How can I open a fragment from a fragment with Cardview?  I have a list of Cardview in fragment_home.xml and when i click in one of those want to show in another fragment.\nHere is what i have so far.</p>\n<p>fragment_home.xml</p>\n<pre><code>       &lt;androidx.cardview.widget.CardView\n        android:id=&quot;@+id/cvCocktails&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_margin=&quot;10dp&quot;\n        app:cardCornerRadius=&quot;15dp&quot;\n        app:cardElevation=&quot;0dp&quot;\n        app:layout_columnWeight=&quot;1&quot;\n        app:layout_rowWeight=&quot;1&quot;\n        &gt;\n\n        &lt;RelativeLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:onClick=&quot;Cocktails&quot;&gt;\n\n            &lt;ImageView\n                android:id=&quot;@+id/ivCocktails&quot;\n                android:layout_width=&quot;115dp&quot;\n                android:layout_height=&quot;115dp&quot;\n                android:layout_centerInParent=&quot;true&quot;\n                android:contentDescription=&quot;@string/cocktail&quot;\n                android:src=&quot;@drawable/cocktail_color&quot;\n                android:translationY=&quot;-15dp&quot;\n                tools:ignore=&quot;VisualLintBounds&quot; /&gt;\n\n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_below=&quot;@id/ivCocktails&quot;\n                android:layout_centerHorizontal=&quot;true&quot;\n                android:text=&quot;@string/cocktail&quot;\n                android:textSize=&quot;20dp&quot;\n                tools:ignore=&quot;SpUsage,TextSizeCheck&quot; /&gt;\n        &lt;/RelativeLayout&gt;\n</code></pre>\n<p>HomeFragment.java</p>\n<pre><code>public class HomeFragment extends Fragment {\npublic CardView cocktails;\n@Override\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\n                         Bundle savedInstanceState) {\n    // Inflate the layout for this fragment\n\n    View view = inflater.inflate(R.layout.fragment_home,container,false);\n\n    cocktails = view.findViewById(R.id.cvCocktails);\n    cocktails.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            CocktailFragment cocktailFragment = new CocktailFragment();\n            getActivity().getSupportFragmentManager().beginTransaction()\n                    .replace(R.id.fragment_home,cocktailFragment,null)\n                    .addToBackStack(null).commit();\n        }\n    });\n    return  view;\n}\n@Override\npublic void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n    super.onViewCreated(view, savedInstanceState);\n}\n</code></pre>\n<p>}</p>\n<p>When i compile the app and click on Cocktail Cardview i have this error. How can i fix this. Thank you.</p>\n<blockquote>\n</blockquote>\n<pre><code>    E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.barapp, PID: 11805\n    java.lang.IllegalStateException: Could not find method Cocktails(View) in a parent \n    or ancestor Context for android:onClick attribute defined on view class \n    android.widget.RelativeLayout\n    at android.view.View$DeclaredOnClickListener.resolveMethod(View.java:6302)\n    at android.view.View$DeclaredOnClickListener.onClick(View.java:6259)\n    at android.view.View.performClick(View.java:7448)\n    at android.view.View.performClickInternal(View.java:7425)\n    at android.view.View.access$3600(View.java:810)\n    at android.view.View$PerformClick.run(View.java:28305)\n    at android.os.Handler.handleCallback(Handler.java:938)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at android.os.Looper.loop(Looper.java:223)\n    at android.app.ActivityThread.main(ActivityThread.java:7656)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n</code></pre>\n"},{"tags":["java","jvm","jprofiler","code-profiling"],"answers":[{"tags":[],"owner":{"account_id":900581,"reputation":46749,"user_id":936832,"accept_rate":75,"display_name":"Ingo Kegel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676382937,"creation_date":1676382937,"answer_id":75448856,"question_id":75448190,"body_markdown":"**&quot;Direct connection&quot;** means that you can connect to remote machine on the selected profiling port (8849 by default). This is usually not the case unless the remote machine is on a private network because firewalls will prevent the connection. Also, in that case you must have added the `-agentpath` VM parameter for loading the JProfiler agent to the start command of the profiled JVM. This parameter can be obtained by invoking the &quot;Session-&gt;Integration Wizards-&gt;New Remote Integration&quot; wizard.\r\n\r\nWith **SSH connections** in JProfiler, you can tunnel the connection through SSH. This will work if you have an SSH server running on the remove machine. SSH connections work for VMs where the JProfiler agent has been loaded with the -agentpath VM parameter as well as in attach mode for all JVMs that are running on the remote system.\r\n\r\nThe related documentation is available at\r\n\r\nhttps://www.ej-technologies.com/resources/jprofiler/help/doc/main/profiling.html","title":"Remote Profiling in Jprofiler","body":"<p><strong>&quot;Direct connection&quot;</strong> means that you can connect to remote machine on the selected profiling port (8849 by default). This is usually not the case unless the remote machine is on a private network because firewalls will prevent the connection. Also, in that case you must have added the <code>-agentpath</code> VM parameter for loading the JProfiler agent to the start command of the profiled JVM. This parameter can be obtained by invoking the &quot;Session-&gt;Integration Wizards-&gt;New Remote Integration&quot; wizard.</p>\n<p>With <strong>SSH connections</strong> in JProfiler, you can tunnel the connection through SSH. This will work if you have an SSH server running on the remove machine. SSH connections work for VMs where the JProfiler agent has been loaded with the -agentpath VM parameter as well as in attach mode for all JVMs that are running on the remote system.</p>\n<p>The related documentation is available at</p>\n<p><a href=\"https://www.ej-technologies.com/resources/jprofiler/help/doc/main/profiling.html\" rel=\"nofollow noreferrer\">https://www.ej-technologies.com/resources/jprofiler/help/doc/main/profiling.html</a></p>\n"}],"owner":{"account_id":12951031,"reputation":23,"user_id":9363361,"display_name":"Jeby"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1676382937,"creation_date":1676379564,"question_id":75448190,"body_markdown":"I have my sample java application running on port 9010 in one of my Azure VM with an IP let say xxx.xx.xx.254. I have installed Jprofiler in another Azure VM, with IP xxx.xx.xx.159.  How can i profile the application from xxx.xx.xx.159 (Both machines are Windows)?\r\n\r\nI have tried remote profile using direct connection, but it couldn&#39;t connect. Also checked with SSH, that too failed as &#39;Connection timeout&#39;\r\n\r\nIs there any step by step process for this connection?\r\n\r\n\r\nSolution to the problem, how to connect and profile the Remote application from my local machine using JProfiler","title":"Remote Profiling in Jprofiler","body":"<p>I have my sample java application running on port 9010 in one of my Azure VM with an IP let say xxx.xx.xx.254. I have installed Jprofiler in another Azure VM, with IP xxx.xx.xx.159.  How can i profile the application from xxx.xx.xx.159 (Both machines are Windows)?</p>\n<p>I have tried remote profile using direct connection, but it couldn't connect. Also checked with SSH, that too failed as 'Connection timeout'</p>\n<p>Is there any step by step process for this connection?</p>\n<p>Solution to the problem, how to connect and profile the Remote application from my local machine using JProfiler</p>\n"},{"tags":["java","http-post","spring-data-rest","nested-object"],"owner":{"account_id":19924673,"reputation":1,"user_id":14599654,"display_name":"Carmelo Fortunato"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676382600,"creation_date":1676382194,"question_id":75448716,"body_markdown":"I&#39;m trying using Spring Data Rest in a Spring Boot backend.\r\nI have an entity named Request with some fields and another entity named RequestData.\r\nNow, RequestData&#39;s mapped table has the foreign key referencing request_id (and nullable=false)\r\n\r\nThen, I need to insert a request along with request data. \r\n\r\nThe problem here is when I try to create a new request along with its data: I can&#39;t set the request inside request data because I still have no request Id, but the request_id is not nullable so i need to insert it.\r\n\r\na body like this: \r\n\r\n```\r\n{\r\n   type: &quot;localhost:8080/..../1&quot;,\r\n   state: &quot;localhost:8080/.../1&quot;,\r\n   ...\r\n   data: [\r\n      {\r\n         field: &quot;foo&quot;,\r\n         value: &quot;bar&quot;,\r\n      }\r\n   ]\r\n}\r\n```\r\nthrows an exception because it needs the request inside the data record.\r\n\r\n\r\n\r\nThis is the Request Entity\r\n```\r\n@Entity\r\n@Table(name=&quot;requests&quot;)\r\npublic class Request {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name=&quot;id&quot;)\r\n    private long id;\r\n    @ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\r\n    @JoinColumn(name=&quot;request_type_id&quot;)\r\n    private RequestType type;\r\n    @ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\r\n    @JoinColumn(name=&quot;request_state_id&quot;)\r\n    private RequestState state;\r\n    @ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\r\n    @JoinColumn(name=&quot;citizen_id&quot;)\r\n    private User citizen;\r\n    @ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\r\n    @JoinColumn(name=&quot;request_by&quot;)\r\n    private User requestedBy;\r\n    @ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\r\n    @JoinColumn(name=&quot;operator_id&quot;)\r\n    private User operator;\r\n    @Column(name=&quot;creation_date&quot;)\r\n    private Instant creationDate;\r\n    @Column(name=&quot;last_change_date&quot;)\r\n    private Instant lastChangeDate;\r\n    @Column(name=&quot;closing_date&quot;)\r\n    private Instant closingDate;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL)\r\n    @JoinColumn(name=&quot;request_id&quot;)\r\n    private List&lt;RequestData&gt; data;\r\n    @OneToMany(cascade = CascadeType.ALL)\r\n    @JoinColumn(name=&quot;request_id&quot;)\r\n    private List&lt;RequestPost&gt; posts;\r\n    @OneToMany(cascade = CascadeType.ALL)\r\n    @JoinColumn(name=&quot;request_id&quot;)\r\n    private List&lt;RequestAttachment&gt; attachments;\r\n    // constructors, getters, setters, ...\r\n```\r\nThis is the RequestData Entity\r\n\r\n```\r\n@Entity\r\n@Table(name=&quot;request_data&quot;,\r\nuniqueConstraints = {@UniqueConstraint(columnNames = {&quot;request_id&quot;, &quot;field&quot;})})\r\npublic class RequestData {\r\n    @Id\r\n    @GeneratedValue(strategy= GenerationType.IDENTITY)\r\n    @Column(name=&quot;id&quot;)\r\n    private long id;\r\n    @Column(name=&quot;field&quot;, length=25, nullable = false)\r\n    private String field;\r\n    @Column(name=&quot;value&quot;)\r\n    private String Value;\r\n    @ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\r\n    @JoinColumn(name=&quot;request_id&quot;, nullable = false)\r\n    private Request request;\r\n\r\n    // constructors, getters and setters... \r\n```\r\nI created a RequestRepository extending JPARepository but not a RequestDataRepository because request data should always go along with the request.\r\n\r\nRemoving the not nullable constraint on request_data.request_id would let me to do the post call without problems and checking the request data record over the table I find the request_id correctly set. \r\nBut I don&#39;t want to remove that constraint. Is there any method to specify that request Id will be automatically populated with the new request&#39;s id?\r\n\r\nThanks in advance\r\n\r\n","title":"Post nested objects with Spring Data REST","body":"<p>I'm trying using Spring Data Rest in a Spring Boot backend.\nI have an entity named Request with some fields and another entity named RequestData.\nNow, RequestData's mapped table has the foreign key referencing request_id (and nullable=false)</p>\n<p>Then, I need to insert a request along with request data.</p>\n<p>The problem here is when I try to create a new request along with its data: I can't set the request inside request data because I still have no request Id, but the request_id is not nullable so i need to insert it.</p>\n<p>a body like this:</p>\n<pre><code>{\n   type: &quot;localhost:8080/..../1&quot;,\n   state: &quot;localhost:8080/.../1&quot;,\n   ...\n   data: [\n      {\n         field: &quot;foo&quot;,\n         value: &quot;bar&quot;,\n      }\n   ]\n}\n</code></pre>\n<p>throws an exception because it needs the request inside the data record.</p>\n<p>This is the Request Entity</p>\n<pre><code>@Entity\n@Table(name=&quot;requests&quot;)\npublic class Request {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name=&quot;id&quot;)\n    private long id;\n    @ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\n    @JoinColumn(name=&quot;request_type_id&quot;)\n    private RequestType type;\n    @ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\n    @JoinColumn(name=&quot;request_state_id&quot;)\n    private RequestState state;\n    @ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\n    @JoinColumn(name=&quot;citizen_id&quot;)\n    private User citizen;\n    @ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\n    @JoinColumn(name=&quot;request_by&quot;)\n    private User requestedBy;\n    @ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\n    @JoinColumn(name=&quot;operator_id&quot;)\n    private User operator;\n    @Column(name=&quot;creation_date&quot;)\n    private Instant creationDate;\n    @Column(name=&quot;last_change_date&quot;)\n    private Instant lastChangeDate;\n    @Column(name=&quot;closing_date&quot;)\n    private Instant closingDate;\n\n    @OneToMany(cascade = CascadeType.ALL)\n    @JoinColumn(name=&quot;request_id&quot;)\n    private List&lt;RequestData&gt; data;\n    @OneToMany(cascade = CascadeType.ALL)\n    @JoinColumn(name=&quot;request_id&quot;)\n    private List&lt;RequestPost&gt; posts;\n    @OneToMany(cascade = CascadeType.ALL)\n    @JoinColumn(name=&quot;request_id&quot;)\n    private List&lt;RequestAttachment&gt; attachments;\n    // constructors, getters, setters, ...\n</code></pre>\n<p>This is the RequestData Entity</p>\n<pre><code>@Entity\n@Table(name=&quot;request_data&quot;,\nuniqueConstraints = {@UniqueConstraint(columnNames = {&quot;request_id&quot;, &quot;field&quot;})})\npublic class RequestData {\n    @Id\n    @GeneratedValue(strategy= GenerationType.IDENTITY)\n    @Column(name=&quot;id&quot;)\n    private long id;\n    @Column(name=&quot;field&quot;, length=25, nullable = false)\n    private String field;\n    @Column(name=&quot;value&quot;)\n    private String Value;\n    @ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\n    @JoinColumn(name=&quot;request_id&quot;, nullable = false)\n    private Request request;\n\n    // constructors, getters and setters... \n</code></pre>\n<p>I created a RequestRepository extending JPARepository but not a RequestDataRepository because request data should always go along with the request.</p>\n<p>Removing the not nullable constraint on request_data.request_id would let me to do the post call without problems and checking the request data record over the table I find the request_id correctly set.\nBut I don't want to remove that constraint. Is there any method to specify that request Id will be automatically populated with the new request's id?</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","arraylist","hashmap","hashcode","hashset"],"comments":[{"owner":{"account_id":536567,"reputation":7838,"user_id":905488,"display_name":"Mick Mnemonic"},"score":0,"creation_date":1455664179,"post_id":35444639,"comment_id":58587683,"body_markdown":"If you can use a `Map&lt;String, Bla&gt; map = new HashMap&lt;&gt;()`, where you would use string identifiers as map keys, you shouldn&#39;t have a problem even if the values change afterwards.","body":"If you can use a <code>Map&lt;String, Bla&gt; map = new HashMap&lt;&gt;()</code>, where you would use string identifiers as map keys, you shouldn&#39;t have a problem even if the values change afterwards."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1676382207,"creation_date":1455663574,"answer_id":35444680,"question_id":35444639,"body_markdown":"&gt; What will happen if setContent() gets called after the object was added to HashSet or HashMap (and its hashCode changes)?\r\n\r\nDisaster.\r\n\r\n&gt; Should I fully set the (hashCode influencing) content before adding / putting into HashSets or HashMaps? Is it generally recommended to finish building objects before adding them?\r\n\r\nYes.\r\n\r\nThe relevant line of [documentation is on `java.util.Set`][1]:\r\n\r\n&gt; Note: Great care must be exercised if mutable objects are used as set elements. **The behavior of a set is not specified if the value of an object is changed in a manner that affects `equals` comparisons while the object is an element in the set.** A special case of this prohibition is that it is not permissible for a set to contain itself as an element.\r\n\r\nGenerally speaking, this sort of error will manifest itself with elements being both &quot;in&quot; and &quot;not in&quot; your collection, with different methods disagreeing.  You may get lucky and your elements may appear to still be in the collection, or they may not; this may happen essentially at random.\r\n\r\nThis is one of the many, many reasons why it&#39;s excellent practice for most of your objects to be immutable -- completely impossible to modify in the first place after construction.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html","title":"Altering hashCode of object inside of HashSet / HashMap","body":"<blockquote>\n<p>What will happen if setContent() gets called after the object was added to HashSet or HashMap (and its hashCode changes)?</p>\n</blockquote>\n<p>Disaster.</p>\n<blockquote>\n<p>Should I fully set the (hashCode influencing) content before adding / putting into HashSets or HashMaps? Is it generally recommended to finish building objects before adding them?</p>\n</blockquote>\n<p>Yes.</p>\n<p>The relevant line of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html\" rel=\"nofollow noreferrer\">documentation is on <code>java.util.Set</code></a>:</p>\n<blockquote>\n<p>Note: Great care must be exercised if mutable objects are used as set elements. <strong>The behavior of a set is not specified if the value of an object is changed in a manner that affects <code>equals</code> comparisons while the object is an element in the set.</strong> A special case of this prohibition is that it is not permissible for a set to contain itself as an element.</p>\n</blockquote>\n<p>Generally speaking, this sort of error will manifest itself with elements being both &quot;in&quot; and &quot;not in&quot; your collection, with different methods disagreeing.  You may get lucky and your elements may appear to still be in the collection, or they may not; this may happen essentially at random.</p>\n<p>This is one of the many, many reasons why it's excellent practice for most of your objects to be immutable -- completely impossible to modify in the first place after construction.</p>\n"}],"owner":{"account_id":1387596,"reputation":1302,"user_id":1319253,"accept_rate":94,"display_name":"dotwin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1430,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":35444680,"answer_count":1,"score":7,"last_activity_date":1676382207,"creation_date":1455663390,"question_id":35444639,"body_markdown":"I am relatively new to Java and am puzzled about the following thing:  I usually add objects to an `ArrayList` before setting its content.  I.e.,\r\n\r\n    List&lt;Bla&gt; list = new ArrayList&lt;&gt;();\r\n    Bla bla = new Bla();\r\n    list.add(bla);\r\n    bla.setContent(); // content influences hashCode\r\n\r\nThis approach works great.  I am concerned whether this approach will give me trouble when used with `HashSet`s or `HashMap`s.  The internal hash table get set at the time the object is added.  What will happen if `setContent()` gets called after the object was added to `HashSet` or `HashMap` (and its hashCode changes)?\r\n\r\nShould I fully set the (hashCode influencing) content *before* adding / putting into `HashSet`s or `HashMap`s?  Is it generally recommended to finish building objects before adding them?\r\n\r\nThank you very much for your insights.\r\n","title":"Altering hashCode of object inside of HashSet / HashMap","body":"<p>I am relatively new to Java and am puzzled about the following thing:  I usually add objects to an <code>ArrayList</code> before setting its content.  I.e.,</p>\n\n<pre><code>List&lt;Bla&gt; list = new ArrayList&lt;&gt;();\nBla bla = new Bla();\nlist.add(bla);\nbla.setContent(); // content influences hashCode\n</code></pre>\n\n<p>This approach works great.  I am concerned whether this approach will give me trouble when used with <code>HashSet</code>s or <code>HashMap</code>s.  The internal hash table get set at the time the object is added.  What will happen if <code>setContent()</code> gets called after the object was added to <code>HashSet</code> or <code>HashMap</code> (and its hashCode changes)?</p>\n\n<p>Should I fully set the (hashCode influencing) content <em>before</em> adding / putting into <code>HashSet</code>s or <code>HashMap</code>s?  Is it generally recommended to finish building objects before adding them?</p>\n\n<p>Thank you very much for your insights.</p>\n"},{"tags":["java","geometry","intersection","graphics2d"],"comments":[{"owner":{"account_id":449564,"reputation":78054,"user_id":844416,"display_name":"MBo"},"score":0,"creation_date":1676428190,"post_id":75442831,"comment_id":133133620,"body_markdown":"You can build visibility graph for your points and get any Euler path (if exists)","body":"You can build visibility graph for your points and get any Euler path (if exists)"},{"owner":{"account_id":22060406,"reputation":44,"user_id":16323206,"display_name":"jazznbass"},"score":0,"creation_date":1676550032,"post_id":75442831,"comment_id":133161546,"body_markdown":"thanks for this suggestion, I will take a look at JGraphT library and see if I can get a way around it.","body":"thanks for this suggestion, I will take a look at JGraphT library and see if I can get a way around it."}],"owner":{"account_id":22060406,"reputation":44,"user_id":16323206,"display_name":"jazznbass"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676382142,"creation_date":1676340288,"question_id":75442831,"body_markdown":"I am using code from https://stackoverflow.com/questions/19481514/how-to-get-a-random-point-on-the-interior-of-an-irregular-polygon slightly modified in order to draw a random path2D by connecting random points together one after the other inside a polygon Shape. The problem is when the Shape is a non-convex polygon, the path can intersect with the polygon sides. What would be a propper way to stop intersecting and create a path with all its segments inside the Shape area? A solution could be the reordering of points in a way that never intersect with Shape. A similar reordering example might help.\r\n\r\n``` \r\n//generate random points inside a polygon Shape\r\n\r\n\r\npublic ArrayList&lt;Point2D&gt; generateDoubleRandomPointList(Shape region, int numberRandomPoints){ \r\n   \r\n\r\n   ArrayList&lt;Point2D&gt; randomPointList = new ArrayList&lt;&gt;();\r\n   for (int i = 0; i &lt; numberRandomPoints; i++) {\r\n      \r\n  \r\n          Rectangle2D r = region.getBounds();\r\n    double x = 0, y = 0;\r\n    Random rand = new Random();\r\n          if(!r.isEmpty()) { // prevent null exception\r\n           \r\n           do {\r\n        x = (double) (r.getX() + rand.nextDouble( (double) r.getWidth() ));\r\n        y = (double) (r.getY() + rand.nextDouble( (double) r.getHeight() ));        \r\n    }  while(!region.contains(x,y));\r\n       }\r\n       else{\r\n\r\n       //nothing here\r\n       }  \r\n\r\nrandomPointList.add(new Point2D.Double(x,y)); // new\r\n   }\r\n\r\n    return randomPointList;\r\n}\r\n\r\n``` \r\n\r\n``` \r\n// create the path\r\n        public  static Path2D createPathFromListOfPoints2D(List&lt;Point2D&gt; points) { \r\n          \r\n          // Create a Path2D object\r\n      java.awt.geom.Path2D path = new java.awt.geom.Path2D.Double();  \r\n    \r\n             Point2D p = points.get(0);\r\n             double xΑ = p.getX();\r\n             double yΑ = p.getY();\r\n    \r\n               // Start at the first coordinate given\r\n      path.moveTo(xΑ, yΑ);\r\n      // Loop over the remaining coordinates:\r\n      for(int i=1; i&lt;points.size(); i++) {\r\n         p = points.get(i);\r\n         \r\n              \r\n        // And draw lines from corner to corner\r\n        path.lineTo(p.getX(), p.getY());\r\n         \r\n      }\r\n            // After the loop, close the path to finish the polygon\r\n          path.closePath();\r\n          return path;\r\n       \r\n        }\r\n``` \r\n\r\n\r\n","title":"How to connect random points inside a non-convex polygon, without intersecting with the polygon boundaries, in java","body":"<p>I am using code from <a href=\"https://stackoverflow.com/questions/19481514/how-to-get-a-random-point-on-the-interior-of-an-irregular-polygon\">How to get a random point on the interior of an irregular polygon?</a> slightly modified in order to draw a random path2D by connecting random points together one after the other inside a polygon Shape. The problem is when the Shape is a non-convex polygon, the path can intersect with the polygon sides. What would be a propper way to stop intersecting and create a path with all its segments inside the Shape area? A solution could be the reordering of points in a way that never intersect with Shape. A similar reordering example might help.</p>\n<pre><code>//generate random points inside a polygon Shape\n\n\npublic ArrayList&lt;Point2D&gt; generateDoubleRandomPointList(Shape region, int numberRandomPoints){ \n   \n\n   ArrayList&lt;Point2D&gt; randomPointList = new ArrayList&lt;&gt;();\n   for (int i = 0; i &lt; numberRandomPoints; i++) {\n      \n  \n          Rectangle2D r = region.getBounds();\n    double x = 0, y = 0;\n    Random rand = new Random();\n          if(!r.isEmpty()) { // prevent null exception\n           \n           do {\n        x = (double) (r.getX() + rand.nextDouble( (double) r.getWidth() ));\n        y = (double) (r.getY() + rand.nextDouble( (double) r.getHeight() ));        \n    }  while(!region.contains(x,y));\n       }\n       else{\n\n       //nothing here\n       }  \n\nrandomPointList.add(new Point2D.Double(x,y)); // new\n   }\n\n    return randomPointList;\n}\n\n</code></pre>\n<pre><code>// create the path\n        public  static Path2D createPathFromListOfPoints2D(List&lt;Point2D&gt; points) { \n          \n          // Create a Path2D object\n      java.awt.geom.Path2D path = new java.awt.geom.Path2D.Double();  \n    \n             Point2D p = points.get(0);\n             double xΑ = p.getX();\n             double yΑ = p.getY();\n    \n               // Start at the first coordinate given\n      path.moveTo(xΑ, yΑ);\n      // Loop over the remaining coordinates:\n      for(int i=1; i&lt;points.size(); i++) {\n         p = points.get(i);\n         \n              \n        // And draw lines from corner to corner\n        path.lineTo(p.getX(), p.getY());\n         \n      }\n            // After the loop, close the path to finish the polygon\n          path.closePath();\n          return path;\n       \n        }\n</code></pre>\n"},{"tags":["java","java.util.concurrent"],"comments":[{"owner":{"account_id":27451148,"reputation":11,"user_id":20943379,"display_name":"axel"},"score":0,"creation_date":1676475122,"post_id":75448666,"comment_id":133144711,"body_markdown":"Anybody, to help...","body":"Anybody, to help..."}],"owner":{"account_id":27451148,"reputation":11,"user_id":20943379,"display_name":"axel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676381959,"creation_date":1676381959,"question_id":75448666,"body_markdown":"I was just trying to run multiple threads with CyclicBarrier limit:3 but threads are run more or less than limit\r\n. \r\nIn CyclicBarrierDemo (in main thread) I create CyclicBarrier object with limit 3 and BarAction thread, and after that I excute multiple threads object of Waiting thread. \r\n\r\nAnd as I expect it execute BarAction thread after any 3 thread but it not.\r\n\r\n\r\n    public class CyclicBarrierDemo {\r\n        public static void main(String args[]){\r\n            CyclicBarrier cb = new CyclicBarrier(3, () -&gt; System.out.println(&quot;Reached Barrier!&quot;));\r\n        \r\n            System.out.println(&quot;Starting...&quot;);\r\n          \r\n            new WaitingThread(cb, &quot;A&quot;);\r\n            new WaitingThread(cb, &quot;B&quot;);\r\n            new WaitingThread(cb, &quot;C&quot;);      \r\n        }\r\n    }\r\n\r\n    class WaitingThread implements Runnable{\r\n        CyclicBarrier cb;\r\n        String name;\r\n\r\n        public WaitingThread(CyclicBarrier cb, String name) {\r\n            this.cb = cb;\r\n            this.name = name;\r\n            new Thread(this).start();\r\n        }\r\n    \r\n        public void run(){\r\n            System.out.println(name);\r\n            try{\r\n                cb.await();\r\n            }catch(InterruptedException e){\r\n                System.out.println(name+&quot; was interrupted!&quot;);\r\n            }catch(BrokenBarrierException e){\r\n                System.out.println(name+&quot;broken barrier occur!&quot;);\r\n            }\r\n        }   \r\n    }\r\n\r\nSorry I am new in java and also search on google and stackoverflow but did&#39;n get satisfied answer.\r\nApprecite to helping.","title":"CyclicBarrier not working properly as I expected and showing different result","body":"<p>I was just trying to run multiple threads with CyclicBarrier limit:3 but threads are run more or less than limit\n.\nIn CyclicBarrierDemo (in main thread) I create CyclicBarrier object with limit 3 and BarAction thread, and after that I excute multiple threads object of Waiting thread.</p>\n<p>And as I expect it execute BarAction thread after any 3 thread but it not.</p>\n<pre><code>public class CyclicBarrierDemo {\n    public static void main(String args[]){\n        CyclicBarrier cb = new CyclicBarrier(3, () -&gt; System.out.println(&quot;Reached Barrier!&quot;));\n    \n        System.out.println(&quot;Starting...&quot;);\n      \n        new WaitingThread(cb, &quot;A&quot;);\n        new WaitingThread(cb, &quot;B&quot;);\n        new WaitingThread(cb, &quot;C&quot;);      \n    }\n}\n\nclass WaitingThread implements Runnable{\n    CyclicBarrier cb;\n    String name;\n\n    public WaitingThread(CyclicBarrier cb, String name) {\n        this.cb = cb;\n        this.name = name;\n        new Thread(this).start();\n    }\n\n    public void run(){\n        System.out.println(name);\n        try{\n            cb.await();\n        }catch(InterruptedException e){\n            System.out.println(name+&quot; was interrupted!&quot;);\n        }catch(BrokenBarrierException e){\n            System.out.println(name+&quot;broken barrier occur!&quot;);\n        }\n    }   \n}\n</code></pre>\n<p>Sorry I am new in java and also search on google and stackoverflow but did'n get satisfied answer.\nApprecite to helping.</p>\n"},{"tags":["java","xml","spring-integration","spring-integration-http"],"comments":[{"owner":{"account_id":20185812,"reputation":249,"user_id":14805169,"display_name":"Santrupta Dash"},"score":0,"creation_date":1675349609,"post_id":75318919,"comment_id":132913595,"body_markdown":"Is spring integration dead ? I do not see any new question or any samples using java. All the samples are only with xml or java DSL. Can anyone help me I am wasting time using spring integration ?","body":"Is spring integration dead ? I do not see any new question or any samples using java. All the samples are only with xml or java DSL. Can anyone help me I am wasting time using spring integration ?"},{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1675355632,"post_id":75318919,"comment_id":132915824,"body_markdown":"How do you upload the file? What is your `messageConverter`? You can turn on DEBUG logging level for `org.springframework.integration` to see how your messages are traveling through the flow and with what content.","body":"How do you upload the file? What is your <code>messageConverter</code>? You can turn on DEBUG logging level for <code>org.springframework.integration</code> to see how your messages are traveling through the flow and with what content."}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675360234,"creation_date":1675360234,"answer_id":75327088,"question_id":75318919,"body_markdown":"Here is a simple test to demonstrate how we can upload the file using Spring Integration:\r\n\r\n    @SpringJUnitWebConfig\r\n    @DirtiesContext\r\n    public class FileUploadTests {\r\n    \r\n    \t@Autowired\r\n    \tprivate WebApplicationContext wac;\r\n    \r\n    \r\n    \tprivate MockMvc mockMvc;\r\n    \r\n    \t@BeforeEach\r\n    \tpublic void setup() {\r\n    \t\tthis.mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();\r\n    \t}\r\n    \r\n    \t@Test\r\n    \tvoid commonsFileUploadValidation() throws Exception {\r\n    \t\tMockPart mockPart1 = new MockPart(&quot;file&quot;, &quot;file.text&quot;, &quot;ABC&quot;.getBytes(StandardCharsets.UTF_8));\r\n    \t\tmockPart1.getHeaders().setContentType(MediaType.TEXT_PLAIN);\r\n    \r\n    \t\tthis.mockMvc.perform(multipart(&quot;/path&quot;).part(mockPart1))\r\n    \t\t\t\t.andExpect(status().isOk())\r\n    \t\t\t\t.andExpect(content().string(&quot;File uploaded: file.text with content: ABC&quot;));\r\n    \t}\r\n    \r\n    \t@Configuration\r\n    \t@EnableIntegration\r\n    \tpublic static class ContextConfiguration {\r\n    \r\n    \t\t@Bean(&quot;Inbound_GATEWAY_in&quot;)\r\n    \t\tpublic MessageChannel Inbound_GATEWAY_in() {\r\n    \t\t\treturn new DirectChannel();\r\n    \t\t}\r\n    \r\n    \t\t@Bean\r\n    \t\tpublic HttpRequestHandlingMessagingGateway selerixInboundRequest() {\r\n    \t\t\tHttpRequestHandlingMessagingGateway gateway = new HttpRequestHandlingMessagingGateway();\r\n    \t\t\tRequestMapping requestMapping = new RequestMapping();\r\n    \t\t\trequestMapping.setPathPatterns(&quot;/path&quot;);\r\n    \t\t\tgateway.setRequestMapping(requestMapping);\r\n    \t\t\tgateway.setRequestChannelName(&quot;Inbound_GATEWAY_in&quot;);\r\n    \t\t\treturn gateway;\r\n    \t\t}\r\n    \r\n    \t\t@Bean(name = DispatcherServlet.MULTIPART_RESOLVER_BEAN_NAME)\r\n    \t\tpublic MultipartResolver multipartResolver() {\r\n    \t\t\treturn new StandardServletMultipartResolver();\r\n    \t\t}\r\n    \r\n    \t\t@ServiceActivator(inputChannel = &quot;Inbound_GATEWAY_in&quot;)\r\n    \t\tpublic String headerEnrich_Inbound_GATEWAY_in(MultiValueMap&lt;String, MultipartFile&gt; payload) throws IOException {\r\n    \t\t\tMultipartFile file = payload.getFirst(&quot;file&quot;);\r\n    \t\t\treturn &quot;File uploaded: &quot; + file.getOriginalFilename() + &quot; with content: &quot; + new String(file.getBytes());\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nNote: the `CommonsMultipartResolver` is deprecated for a while and was removed from latest Spring. Please, be sure that you use the latest versions of the frameworks: https://spring.io/projects/spring-integration#learn","title":"Upload a xml file in spring integration using HttpRequestHandlingMessagingGateway","body":"<p>Here is a simple test to demonstrate how we can upload the file using Spring Integration:</p>\n<pre><code>@SpringJUnitWebConfig\n@DirtiesContext\npublic class FileUploadTests {\n\n    @Autowired\n    private WebApplicationContext wac;\n\n\n    private MockMvc mockMvc;\n\n    @BeforeEach\n    public void setup() {\n        this.mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();\n    }\n\n    @Test\n    void commonsFileUploadValidation() throws Exception {\n        MockPart mockPart1 = new MockPart(&quot;file&quot;, &quot;file.text&quot;, &quot;ABC&quot;.getBytes(StandardCharsets.UTF_8));\n        mockPart1.getHeaders().setContentType(MediaType.TEXT_PLAIN);\n\n        this.mockMvc.perform(multipart(&quot;/path&quot;).part(mockPart1))\n                .andExpect(status().isOk())\n                .andExpect(content().string(&quot;File uploaded: file.text with content: ABC&quot;));\n    }\n\n    @Configuration\n    @EnableIntegration\n    public static class ContextConfiguration {\n\n        @Bean(&quot;Inbound_GATEWAY_in&quot;)\n        public MessageChannel Inbound_GATEWAY_in() {\n            return new DirectChannel();\n        }\n\n        @Bean\n        public HttpRequestHandlingMessagingGateway selerixInboundRequest() {\n            HttpRequestHandlingMessagingGateway gateway = new HttpRequestHandlingMessagingGateway();\n            RequestMapping requestMapping = new RequestMapping();\n            requestMapping.setPathPatterns(&quot;/path&quot;);\n            gateway.setRequestMapping(requestMapping);\n            gateway.setRequestChannelName(&quot;Inbound_GATEWAY_in&quot;);\n            return gateway;\n        }\n\n        @Bean(name = DispatcherServlet.MULTIPART_RESOLVER_BEAN_NAME)\n        public MultipartResolver multipartResolver() {\n            return new StandardServletMultipartResolver();\n        }\n\n        @ServiceActivator(inputChannel = &quot;Inbound_GATEWAY_in&quot;)\n        public String headerEnrich_Inbound_GATEWAY_in(MultiValueMap&lt;String, MultipartFile&gt; payload) throws IOException {\n            MultipartFile file = payload.getFirst(&quot;file&quot;);\n            return &quot;File uploaded: &quot; + file.getOriginalFilename() + &quot; with content: &quot; + new String(file.getBytes());\n        }\n\n    }\n\n}\n</code></pre>\n<p>Note: the <code>CommonsMultipartResolver</code> is deprecated for a while and was removed from latest Spring. Please, be sure that you use the latest versions of the frameworks: <a href=\"https://spring.io/projects/spring-integration#learn\" rel=\"nofollow noreferrer\">https://spring.io/projects/spring-integration#learn</a></p>\n"},{"tags":[],"owner":{"account_id":7091542,"reputation":58,"user_id":5426567,"display_name":"Didil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676381596,"creation_date":1676381596,"answer_id":75448584,"question_id":75318919,"body_markdown":"What I did is I created an interface \r\n\r\n```\r\n@Configuration\r\n@MessagingGateway\r\n@EnableIntegration\r\npublic interface IntegrationGateway2 {\r\n\r\n @Gateway(requestChannel = &quot;Inbound_CHANNEL_in&quot;, replyChannel = &quot;Inbound_Channel_reply&quot;)\r\n public Message&lt;?&gt; sendAndReceive(Message&lt;?&gt; input);\r\n}\r\n```\r\nand then created a normal rest controller and fetched the multipart file and then converted to a message. \r\n\r\n```\r\n\r\n@RestController\r\n@EnableIntegration\r\n@Configuration\r\npublic class SelerixController {\r\n   \r\n    @Bean(&quot;Inbound_CHANNEL_in&quot;)\r\n    public MessageChannel Inbound_Channel_in() {\r\n        return new DirectChannel();\r\n    }\r\n    @Bean(&quot;Inbound_Channel_reply&quot;)\r\n    public MessageChannel Inbound_Channel_reply() {\r\n        return new DirectChannel();\r\n    }\r\n\r\n    @Autowired\r\n    IntegrationGateway integrationGateway;\r\n\r\n    @PostMapping(&quot;/processFile&quot;)\r\n    public ResponseEntity&lt;String&gt; fileUpload(@RequestParam String partner, @RequestParam(&quot;file&quot;) MultipartFile file ) throws IOException {\r\n        Message reply = null;\r\n        String xmlInputData = &quot;&quot;;\r\n        if (file != null) {\r\n            InputStream is = file.getInputStream();\r\n            xmlInputData = new BufferedReader(new InputStreamReader(is))\r\n                    .lines().collect(Collectors.joining(&quot;&quot;));\r\n            MapConversionUtility mcu = new MapConversionUtility();\r\n            String json = mcu.convertXmlToJSON(xmlInputData);\r\n\r\n            Map&lt;String, Object&gt; header = new HashMap&lt;String, Object&gt;();\r\n            header.put(&quot;uuid&quot;, UUID.randomUUID().toString());\r\n            header.put(&quot;REAL_TIME_FLAG&quot;, &quot;TRUE&quot;); //QUERY_PARAM\r\n            header.put(&quot;QUERY_PARAM&quot;, partner);\r\n            Message&lt;?&gt; request = MessageBuilder\r\n                    .withPayload(json)\r\n                    .copyHeaders(header)\r\n                    .build();\r\n            reply = integrationGateway.sendAndReceive( request);\r\n            LOGGER.info(&quot;getting reply final *************** {}&quot;,reply.getPayload());\r\n        }\r\n\t}\r\n}\r\n```","title":"Upload a xml file in spring integration using HttpRequestHandlingMessagingGateway","body":"<p>What I did is I created an interface</p>\n<pre><code>@Configuration\n@MessagingGateway\n@EnableIntegration\npublic interface IntegrationGateway2 {\n\n @Gateway(requestChannel = &quot;Inbound_CHANNEL_in&quot;, replyChannel = &quot;Inbound_Channel_reply&quot;)\n public Message&lt;?&gt; sendAndReceive(Message&lt;?&gt; input);\n}\n</code></pre>\n<p>and then created a normal rest controller and fetched the multipart file and then converted to a message.</p>\n<pre><code>\n@RestController\n@EnableIntegration\n@Configuration\npublic class SelerixController {\n   \n    @Bean(&quot;Inbound_CHANNEL_in&quot;)\n    public MessageChannel Inbound_Channel_in() {\n        return new DirectChannel();\n    }\n    @Bean(&quot;Inbound_Channel_reply&quot;)\n    public MessageChannel Inbound_Channel_reply() {\n        return new DirectChannel();\n    }\n\n    @Autowired\n    IntegrationGateway integrationGateway;\n\n    @PostMapping(&quot;/processFile&quot;)\n    public ResponseEntity&lt;String&gt; fileUpload(@RequestParam String partner, @RequestParam(&quot;file&quot;) MultipartFile file ) throws IOException {\n        Message reply = null;\n        String xmlInputData = &quot;&quot;;\n        if (file != null) {\n            InputStream is = file.getInputStream();\n            xmlInputData = new BufferedReader(new InputStreamReader(is))\n                    .lines().collect(Collectors.joining(&quot;&quot;));\n            MapConversionUtility mcu = new MapConversionUtility();\n            String json = mcu.convertXmlToJSON(xmlInputData);\n\n            Map&lt;String, Object&gt; header = new HashMap&lt;String, Object&gt;();\n            header.put(&quot;uuid&quot;, UUID.randomUUID().toString());\n            header.put(&quot;REAL_TIME_FLAG&quot;, &quot;TRUE&quot;); //QUERY_PARAM\n            header.put(&quot;QUERY_PARAM&quot;, partner);\n            Message&lt;?&gt; request = MessageBuilder\n                    .withPayload(json)\n                    .copyHeaders(header)\n                    .build();\n            reply = integrationGateway.sendAndReceive( request);\n            LOGGER.info(&quot;getting reply final *************** {}&quot;,reply.getPayload());\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20185812,"reputation":249,"user_id":14805169,"display_name":"Santrupta Dash"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75327088,"answer_count":2,"score":1,"last_activity_date":1676381596,"creation_date":1675314771,"question_id":75318919,"body_markdown":"I am trying to upload a multipart form-data with an attached xml file to integration server. \r\n\r\nI am using a `HttpRequestHandlingMessagingGateway` with a `RequestMapping` bean. \r\n\r\n```\r\n  @Bean(&quot;Inbound_GATEWAY_in&quot;)\r\n    public MessageChannel Inbound_GATEWAY_in() { return new DirectChannel(); }\r\n  @Bean\r\n    public HttpRequestHandlingMessagingGateway selerixInboundRequest() {\r\n        HttpRequestHandlingMessagingGateway gateway =\r\n                new HttpRequestHandlingMessagingGateway(true);\r\n        gateway.setRequestMapping(selerixMapping());\r\n        gateway.setMessageConverters( messageConverter() );\r\n        gateway.setMultipartResolver(multipartResolverBean());\r\n        gateway.setRequestTimeout(3000); // 3s\r\n        gateway.setReplyTimeout(5000); // 5s\r\n        gateway.setRequestChannelName(&quot;Inbound_GATEWAY_in&quot;);\r\n        gateway.setReplyChannelName(&quot;Outbound_GATEWAY_out&quot;);\r\n        return gateway;\r\n    }\r\n    @Bean\r\n    public RequestMapping selerixMapping() {\r\n        RequestMapping requestMapping = new RequestMapping();\r\n        requestMapping.setPathPatterns(&quot;/path&quot;);\r\n        requestMapping.setMethods(HttpMethod.POST);\r\n        requestMapping.setConsumes(MediaType.MULTIPART_FORM_DATA_VALUE);\r\n        return requestMapping;\r\n    }\r\n@Bean\r\n    public MultipartResolver multipartResolverBean(){\r\n        return new CommonsMultipartResolver();\r\n    }\r\n@ServiceActivator(inputChannel = &quot;Inbound_GATEWAY_in&quot;)\r\n    public Message&lt;?&gt;  headerEnrich_Inbound_GATEWAY_in(Message&lt;?&gt; message){\r\n         Message&lt;?&gt; outmessage = null;\r\n    LOGGER.info(&quot;message &quot;, message); // returns blank message\r\n```\r\n\r\nBut when I am trying to upload the xml file the message is coming as blank.\r\n\r\nHow can I find the xml file in the Message&lt;?&gt; or how can I check the Request object ? ","title":"Upload a xml file in spring integration using HttpRequestHandlingMessagingGateway","body":"<p>I am trying to upload a multipart form-data with an attached xml file to integration server.</p>\n<p>I am using a <code>HttpRequestHandlingMessagingGateway</code> with a <code>RequestMapping</code> bean.</p>\n<pre><code>  @Bean(&quot;Inbound_GATEWAY_in&quot;)\n    public MessageChannel Inbound_GATEWAY_in() { return new DirectChannel(); }\n  @Bean\n    public HttpRequestHandlingMessagingGateway selerixInboundRequest() {\n        HttpRequestHandlingMessagingGateway gateway =\n                new HttpRequestHandlingMessagingGateway(true);\n        gateway.setRequestMapping(selerixMapping());\n        gateway.setMessageConverters( messageConverter() );\n        gateway.setMultipartResolver(multipartResolverBean());\n        gateway.setRequestTimeout(3000); // 3s\n        gateway.setReplyTimeout(5000); // 5s\n        gateway.setRequestChannelName(&quot;Inbound_GATEWAY_in&quot;);\n        gateway.setReplyChannelName(&quot;Outbound_GATEWAY_out&quot;);\n        return gateway;\n    }\n    @Bean\n    public RequestMapping selerixMapping() {\n        RequestMapping requestMapping = new RequestMapping();\n        requestMapping.setPathPatterns(&quot;/path&quot;);\n        requestMapping.setMethods(HttpMethod.POST);\n        requestMapping.setConsumes(MediaType.MULTIPART_FORM_DATA_VALUE);\n        return requestMapping;\n    }\n@Bean\n    public MultipartResolver multipartResolverBean(){\n        return new CommonsMultipartResolver();\n    }\n@ServiceActivator(inputChannel = &quot;Inbound_GATEWAY_in&quot;)\n    public Message&lt;?&gt;  headerEnrich_Inbound_GATEWAY_in(Message&lt;?&gt; message){\n         Message&lt;?&gt; outmessage = null;\n    LOGGER.info(&quot;message &quot;, message); // returns blank message\n</code></pre>\n<p>But when I am trying to upload the xml file the message is coming as blank.</p>\n<p>How can I find the xml file in the Message&lt;?&gt; or how can I check the Request object ?</p>\n"},{"tags":["java","arrays","generics"],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1676381463,"creation_date":1676381463,"answer_id":75448558,"question_id":75448500,"body_markdown":"The problem is almost certainly this definition:\r\n\r\n    public class StudentGradesGeneric &lt;E extends Comparable&lt;E&gt;&gt; extends Number\r\n\r\nThis defines a new class named `StudentGradesGeneric` with a type argument named `E` that is required to extend `Comparable&lt;E&gt;`. `StudentGradesGeneric` also extends `Number`.\r\n\r\nThat last part is wrong: there&#39;s no reason for `StudentGradesGeneric` itself to extend `Number` (it&#39;s conceivable that someone would want that, but it&#39;d be unlikely and nothing in your question indicates you do).\r\n\r\nWhat you want is `E` to extend `Number`:\r\n\r\n    public class StudentGradesGeneric &lt;E extends Number &amp; Comparable&lt;E&gt;&gt;\r\n\r\nI&#39;ve not checked the rest of your code and I think you&#39;ll find that `Number` is not as useful a base type as you&#39;d wish, as there&#39;s no way, for example to add two generic `Number` objects and get an object of the same type back.","title":"I want to make this generic","body":"<p>The problem is almost certainly this definition:</p>\n<pre><code>public class StudentGradesGeneric &lt;E extends Comparable&lt;E&gt;&gt; extends Number\n</code></pre>\n<p>This defines a new class named <code>StudentGradesGeneric</code> with a type argument named <code>E</code> that is required to extend <code>Comparable&lt;E&gt;</code>. <code>StudentGradesGeneric</code> also extends <code>Number</code>.</p>\n<p>That last part is wrong: there's no reason for <code>StudentGradesGeneric</code> itself to extend <code>Number</code> (it's conceivable that someone would want that, but it'd be unlikely and nothing in your question indicates you do).</p>\n<p>What you want is <code>E</code> to extend <code>Number</code>:</p>\n<pre><code>public class StudentGradesGeneric &lt;E extends Number &amp; Comparable&lt;E&gt;&gt;\n</code></pre>\n<p>I've not checked the rest of your code and I think you'll find that <code>Number</code> is not as useful a base type as you'd wish, as there's no way, for example to add two generic <code>Number</code> objects and get an object of the same type back.</p>\n"}],"owner":{"account_id":26959847,"reputation":15,"user_id":20527664,"display_name":"Nadia"},"comment_count":0,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1676392633,"answer_count":1,"score":-3,"last_activity_date":1676381463,"creation_date":1676381157,"question_id":75448500,"body_markdown":"So I have written this code that works just fine with integers. Now I want to make it generic (extends Number), but keep it an array. \r\n\r\n\r\n\r\n\r\n```\r\nimport java.util.Arrays;\r\n\r\npublic class StudentGrades {\r\n    private int grades[];\r\n    private int pointer;\r\n    private int max_grade;\r\n    private int min_grade;\r\n    private double average_grade;\r\n    private  int better_than_average;\r\n    private  int worse_than_average;\r\n    private int excelent_count;\r\n    private int good_count;\r\n    private int enaught_count;\r\n\r\n    public int getMax_grade() {\r\n        return max_grade;\r\n    }\r\n\r\n    public int getMin_grade() {\r\n        return min_grade;\r\n    }\r\n\r\n    public double getAverage_grade() {\r\n        return average_grade;\r\n    }\r\n\r\n    public int getBetter_than_average() {\r\n        return better_than_average;\r\n    }\r\n\r\n    public int getWorse_than_average() {\r\n        return worse_than_average;\r\n    }\r\n\r\n    public int getExcelent_count() {\r\n        return excelent_count;\r\n    }\r\n\r\n    public int getGood_count() {\r\n        return good_count;\r\n    }\r\n\r\n    public int getEnough_count() {\r\n        return enaught_count;\r\n    }\r\n\r\n\r\n    StudentGrades()\r\n    {\r\n        pointer=-1;\r\n        grades=new int[1000];\r\n        average_grade=0;\r\n        better_than_average=0;\r\n        worse_than_average=0;\r\n        excelent_count=0;\r\n        good_count=0;\r\n        enaught_count=0;\r\n        max_grade=0;\r\n        min_grade=0;\r\n    }\r\n\r\n    private void calculate()\r\n    {\r\n        average_grade=0;\r\n        better_than_average=0;\r\n        worse_than_average=0;\r\n        excelent_count=0;\r\n        good_count=0;\r\n        enaught_count=0;\r\n        max_grade=0;\r\n        min_grade=0;\r\n        if (pointer&lt;0)return;\r\n        double sum=0;\r\n        max_grade=grades[0];\r\n        min_grade=grades[0];\r\n        for (int i=0; i&lt;=pointer;i++)\r\n        {\r\n            sum+=grades[i];\r\n            if(grades[i]&gt;max_grade)\r\n                max_grade=grades[i];\r\n            if(grades[i]&lt;min_grade)\r\n                min_grade=grades[i];\r\n            if(grades[i]&gt;=91)\r\n                excelent_count++;\r\n            else if(grades[i]&gt;=71)\r\n                good_count++;\r\n            else if (grades[i]&gt;=60)\r\n                enaught_count++;\r\n        }\r\n        average_grade=sum/(double) (pointer+1);\r\n\r\n        for(int i=0; i&lt;=pointer;i++)\r\n        {\r\n            if(grades[i]&gt;average_grade)\r\n                better_than_average++;\r\n            else\r\n                worse_than_average++;\r\n        }\r\n    }\r\n\r\n    private boolean is_valid(int n)\r\n    {\r\n        return (n&gt;0 &amp;&amp; n&lt;100);\r\n    }\r\n\r\n    public boolean setter( int marks[])\r\n    {\r\n        for(int i=0; i&lt;marks.length; i++)\r\n        {\r\n            if(!is_valid(marks[i]))\r\n                return false;\r\n        }\r\n        grades=marks;\r\n        pointer=marks.length-1;\r\n        calculate();\r\n        return true;\r\n    }\r\n\r\n    public boolean adder(int new_element)\r\n    {\r\n        if(!is_valid(new_element))\r\n            return false;\r\n        if(grades.length==pointer+1)\r\n        {\r\n            int[] new_size_array =new int[grades.length*2];\r\n            for(int i=0; i&lt;=pointer;i++) new_size_array[i]=grades[i];\r\n            grades=new_size_array;\r\n        }\r\n        pointer++;\r\n        grades[pointer]=new_element;\r\n        calculate();\r\n        return true;\r\n    }\r\n\r\n    public int[] getter()\r\n    {\r\n        int[] result = new int[pointer+1];\r\n        for (int i=0; i&lt;=pointer;i++)\r\n            result[i]=grades[i];\r\n        return  result;\r\n    }\r\n    public void to_string(){\r\n        System.out.println(Arrays.toString(getter()));\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\nI have done this, but I strongly believe it is completely wrong and Im moving in the wrong direction. Im relatively new to programming, so please make your explanations as detailed as possible. Thamks! \r\n\r\n```\r\nimport java.util.Arrays;\r\nimport java.lang.reflect.Array;\r\n\r\npublic class StudentGradesGeneric &lt;E extends Comparable&lt;E&gt;&gt; extends Number{\r\n\r\n\r\n    public StudentGradesGeneric(Class&lt;E&gt; clazz, int capacity) {\r\n        grades = (E[]) Array.newInstance(clazz, capacity);\r\n    }\r\n\r\n\r\n    private E[] grades;\r\n    private int pointer;\r\n    private E max_grade;\r\n    private E min_grade;\r\n    private E average_grade;\r\n    private  E better_than_average;\r\n    private  E worse_than_average;\r\n    private E excelent_count;\r\n    private E good_count;\r\n    private E enaught_count;\r\n\r\n    public E getMax_grade() {\r\n        return max_grade;\r\n    }\r\n\r\n    public E getMin_grade() {\r\n        return min_grade;\r\n    }\r\n\r\n    public E getAverage_grade() {\r\n        return average_grade;\r\n    }\r\n\r\n    public E getBetter_than_average() {\r\n        return better_than_average;\r\n    }\r\n\r\n    public E getWorse_than_average() {\r\n        return worse_than_average;\r\n    }\r\n\r\n    public E getExcelent_count() {\r\n        return excelent_count;\r\n    }\r\n\r\n    public E getGood_count() {\r\n        return good_count;\r\n    }\r\n\r\n    public E getEnough_count() {\r\n        return enaught_count;\r\n    }\r\n\r\n\r\n    StudentGradesGeneric()\r\n    {\r\n        pointer=-1;\r\n        grades= (E[]) new Comparable[1000];\r\n        average_grade=null;\r\n        better_than_average=null;\r\n        worse_than_average=null;\r\n        excelent_count=null;\r\n        good_count=null;\r\n        enaught_count=null;\r\n        max_grade=null;\r\n        min_grade=null;\r\n\r\n    }\r\n\r\n    @Override\r\n    public int intValue() {\r\n        return 0;\r\n    }\r\n\r\n    @Override\r\n    public long longValue() {\r\n        return 0;\r\n    }\r\n\r\n    @Override\r\n    public float floatValue() {\r\n        return 0;\r\n    }\r\n\r\n    @Override\r\n    public double doubleValue() {\r\n        return 0;\r\n    }\r\n\r\n\r\n    private &lt;E&gt; void calculate()\r\n    {\r\n        average_grade=null;\r\n        better_than_average=null;\r\n        worse_than_average=null;\r\n        excelent_count=null;\r\n        good_count=null;\r\n        enaught_count=null;\r\n        max_grade=null;\r\n        min_grade=null;\r\n        if (pointer&lt;0)return;\r\n        E sum=null;\r\n        max_grade=grades[0];\r\n        min_grade=grades[0];\r\n        for (int i=0; i&lt;=pointer;i++)\r\n        {\r\n            sum =grades[i] + sum;\r\n            if ( grades[i].compareTo(max_grade) &gt; 0)\r\n                max_grade=grades[i];\r\n            if(grades[i].compareTo(min_grade) &lt; 0)\r\n                min_grade=grades[i];\r\n            if(grades[i].compareTo(91) &gt;= 0)\r\n                excelent_count++;\r\n            else if(grades[i]&gt;=71)\r\n                good_count++;\r\n            else if (grades[i]&gt;=60)\r\n                enaught_count++;\r\n        }\r\n        average_grade=sum/ (pointer+1);\r\n\r\n        for(int i=0; i&lt;=pointer;i++)\r\n        {\r\n            if(grades[i]&gt;average_grade)\r\n                better_than_average++;\r\n            else\r\n                worse_than_average++;\r\n        }\r\n    }\r\n\r\n    private boolean is_valid(E n)\r\n    {\r\n        return (n&gt;0 &amp;&amp; n&lt;100);\r\n    }\r\n\r\n    public boolean setter( E marks[])\r\n    {\r\n        for(int i=0; i&lt;marks.length; i++)\r\n        {\r\n            if(!is_valid(marks[i]))\r\n                return false;\r\n        }\r\n        grades=marks;\r\n        pointer=marks.length-1;\r\n        calculate();\r\n        return true;\r\n    }\r\n\r\n    public boolean adder(E new_element)\r\n    {\r\n        if(!is_valid(new_element))\r\n            return false;\r\n        if(grades.length==pointer+1)\r\n        {\r\n            E[] new_size_array =(E[]) new Comparable[grades.length*2];\r\n            for(int i=0; i&lt;=pointer;i++)\r\n                new_size_array[i]=grades[i];\r\n            grades=new_size_array;\r\n        }\r\n        pointer++;\r\n        grades[pointer]=new_element;\r\n        calculate();\r\n        return true;\r\n    }\r\n\r\n    public E[] getter()\r\n    {\r\n        E[] result = (E[]) new Comparable[pointer+1];\r\n        for (int i=0; i&lt;=pointer;i++)\r\n            result[i]=grades[i];\r\n        return result;\r\n    }\r\n    public void to_string(){\r\n        System.out.println(Arrays.toString(getter()));\r\n    }\r\n\r\n\r\n}\r\n\r\n```\r\n","title":"I want to make this generic","body":"<p>So I have written this code that works just fine with integers. Now I want to make it generic (extends Number), but keep it an array.</p>\n<pre><code>import java.util.Arrays;\n\npublic class StudentGrades {\n    private int grades[];\n    private int pointer;\n    private int max_grade;\n    private int min_grade;\n    private double average_grade;\n    private  int better_than_average;\n    private  int worse_than_average;\n    private int excelent_count;\n    private int good_count;\n    private int enaught_count;\n\n    public int getMax_grade() {\n        return max_grade;\n    }\n\n    public int getMin_grade() {\n        return min_grade;\n    }\n\n    public double getAverage_grade() {\n        return average_grade;\n    }\n\n    public int getBetter_than_average() {\n        return better_than_average;\n    }\n\n    public int getWorse_than_average() {\n        return worse_than_average;\n    }\n\n    public int getExcelent_count() {\n        return excelent_count;\n    }\n\n    public int getGood_count() {\n        return good_count;\n    }\n\n    public int getEnough_count() {\n        return enaught_count;\n    }\n\n\n    StudentGrades()\n    {\n        pointer=-1;\n        grades=new int[1000];\n        average_grade=0;\n        better_than_average=0;\n        worse_than_average=0;\n        excelent_count=0;\n        good_count=0;\n        enaught_count=0;\n        max_grade=0;\n        min_grade=0;\n    }\n\n    private void calculate()\n    {\n        average_grade=0;\n        better_than_average=0;\n        worse_than_average=0;\n        excelent_count=0;\n        good_count=0;\n        enaught_count=0;\n        max_grade=0;\n        min_grade=0;\n        if (pointer&lt;0)return;\n        double sum=0;\n        max_grade=grades[0];\n        min_grade=grades[0];\n        for (int i=0; i&lt;=pointer;i++)\n        {\n            sum+=grades[i];\n            if(grades[i]&gt;max_grade)\n                max_grade=grades[i];\n            if(grades[i]&lt;min_grade)\n                min_grade=grades[i];\n            if(grades[i]&gt;=91)\n                excelent_count++;\n            else if(grades[i]&gt;=71)\n                good_count++;\n            else if (grades[i]&gt;=60)\n                enaught_count++;\n        }\n        average_grade=sum/(double) (pointer+1);\n\n        for(int i=0; i&lt;=pointer;i++)\n        {\n            if(grades[i]&gt;average_grade)\n                better_than_average++;\n            else\n                worse_than_average++;\n        }\n    }\n\n    private boolean is_valid(int n)\n    {\n        return (n&gt;0 &amp;&amp; n&lt;100);\n    }\n\n    public boolean setter( int marks[])\n    {\n        for(int i=0; i&lt;marks.length; i++)\n        {\n            if(!is_valid(marks[i]))\n                return false;\n        }\n        grades=marks;\n        pointer=marks.length-1;\n        calculate();\n        return true;\n    }\n\n    public boolean adder(int new_element)\n    {\n        if(!is_valid(new_element))\n            return false;\n        if(grades.length==pointer+1)\n        {\n            int[] new_size_array =new int[grades.length*2];\n            for(int i=0; i&lt;=pointer;i++) new_size_array[i]=grades[i];\n            grades=new_size_array;\n        }\n        pointer++;\n        grades[pointer]=new_element;\n        calculate();\n        return true;\n    }\n\n    public int[] getter()\n    {\n        int[] result = new int[pointer+1];\n        for (int i=0; i&lt;=pointer;i++)\n            result[i]=grades[i];\n        return  result;\n    }\n    public void to_string(){\n        System.out.println(Arrays.toString(getter()));\n    }\n\n\n\n}\n\n</code></pre>\n<p>I have done this, but I strongly believe it is completely wrong and Im moving in the wrong direction. Im relatively new to programming, so please make your explanations as detailed as possible. Thamks!</p>\n<pre><code>import java.util.Arrays;\nimport java.lang.reflect.Array;\n\npublic class StudentGradesGeneric &lt;E extends Comparable&lt;E&gt;&gt; extends Number{\n\n\n    public StudentGradesGeneric(Class&lt;E&gt; clazz, int capacity) {\n        grades = (E[]) Array.newInstance(clazz, capacity);\n    }\n\n\n    private E[] grades;\n    private int pointer;\n    private E max_grade;\n    private E min_grade;\n    private E average_grade;\n    private  E better_than_average;\n    private  E worse_than_average;\n    private E excelent_count;\n    private E good_count;\n    private E enaught_count;\n\n    public E getMax_grade() {\n        return max_grade;\n    }\n\n    public E getMin_grade() {\n        return min_grade;\n    }\n\n    public E getAverage_grade() {\n        return average_grade;\n    }\n\n    public E getBetter_than_average() {\n        return better_than_average;\n    }\n\n    public E getWorse_than_average() {\n        return worse_than_average;\n    }\n\n    public E getExcelent_count() {\n        return excelent_count;\n    }\n\n    public E getGood_count() {\n        return good_count;\n    }\n\n    public E getEnough_count() {\n        return enaught_count;\n    }\n\n\n    StudentGradesGeneric()\n    {\n        pointer=-1;\n        grades= (E[]) new Comparable[1000];\n        average_grade=null;\n        better_than_average=null;\n        worse_than_average=null;\n        excelent_count=null;\n        good_count=null;\n        enaught_count=null;\n        max_grade=null;\n        min_grade=null;\n\n    }\n\n    @Override\n    public int intValue() {\n        return 0;\n    }\n\n    @Override\n    public long longValue() {\n        return 0;\n    }\n\n    @Override\n    public float floatValue() {\n        return 0;\n    }\n\n    @Override\n    public double doubleValue() {\n        return 0;\n    }\n\n\n    private &lt;E&gt; void calculate()\n    {\n        average_grade=null;\n        better_than_average=null;\n        worse_than_average=null;\n        excelent_count=null;\n        good_count=null;\n        enaught_count=null;\n        max_grade=null;\n        min_grade=null;\n        if (pointer&lt;0)return;\n        E sum=null;\n        max_grade=grades[0];\n        min_grade=grades[0];\n        for (int i=0; i&lt;=pointer;i++)\n        {\n            sum =grades[i] + sum;\n            if ( grades[i].compareTo(max_grade) &gt; 0)\n                max_grade=grades[i];\n            if(grades[i].compareTo(min_grade) &lt; 0)\n                min_grade=grades[i];\n            if(grades[i].compareTo(91) &gt;= 0)\n                excelent_count++;\n            else if(grades[i]&gt;=71)\n                good_count++;\n            else if (grades[i]&gt;=60)\n                enaught_count++;\n        }\n        average_grade=sum/ (pointer+1);\n\n        for(int i=0; i&lt;=pointer;i++)\n        {\n            if(grades[i]&gt;average_grade)\n                better_than_average++;\n            else\n                worse_than_average++;\n        }\n    }\n\n    private boolean is_valid(E n)\n    {\n        return (n&gt;0 &amp;&amp; n&lt;100);\n    }\n\n    public boolean setter( E marks[])\n    {\n        for(int i=0; i&lt;marks.length; i++)\n        {\n            if(!is_valid(marks[i]))\n                return false;\n        }\n        grades=marks;\n        pointer=marks.length-1;\n        calculate();\n        return true;\n    }\n\n    public boolean adder(E new_element)\n    {\n        if(!is_valid(new_element))\n            return false;\n        if(grades.length==pointer+1)\n        {\n            E[] new_size_array =(E[]) new Comparable[grades.length*2];\n            for(int i=0; i&lt;=pointer;i++)\n                new_size_array[i]=grades[i];\n            grades=new_size_array;\n        }\n        pointer++;\n        grades[pointer]=new_element;\n        calculate();\n        return true;\n    }\n\n    public E[] getter()\n    {\n        E[] result = (E[]) new Comparable[pointer+1];\n        for (int i=0; i&lt;=pointer;i++)\n            result[i]=grades[i];\n        return result;\n    }\n    public void to_string(){\n        System.out.println(Arrays.toString(getter()));\n    }\n\n\n}\n\n</code></pre>\n"},{"tags":["java","json","graphql","rest-assured","rest-assured-jsonpath"],"owner":{"account_id":27781894,"reputation":1,"user_id":21210076,"display_name":"sunita kamboj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676380944,"creation_date":1676368137,"question_id":75446049,"body_markdown":"I am new to Rest Assured &amp; GraphQL service.\r\nI have a test requirement where I need to validate the address data in JSON response received for multiple PIN codes &amp; fieldnames sent in the request.\r\nRequest:\r\n```\r\nquery{\r\ngetAddress(pinCode:&quot;110074&quot;,&quot;110047&quot;){\r\n addressLine1\r\n addressLine2\r\n city}\r\n}\r\n```\r\n\r\nResponse:\r\n```json\r\n{&quot;data&quot;: {\r\n &quot;addressDetails&quot;: [\r\n  {\r\n   pinCode:&quot;110074&quot;,\r\n   addressLine1:&quot;house number 123&quot;,\r\n   addressLine2:&quot;ABC Colony&quot;\r\n  }\r\n  {\r\n   pinCode:&quot;110047&quot;,\r\n   addressLine1:&quot;house number 567&quot;,\r\n   addressLine2:&quot;XYZ Colony&quot;\r\n  }\r\n]}\r\n}\r\n```\r\n\r\nNumber of PIN codes might increase and details will be fetched for all the PIN codes.\r\n\r\nI want to validate that all the PINcodes details are being received and data received are also to be validated against data in an excel sheet.","title":"How to validate dynamic response structure &amp; data for a GraphQL service using Rest Assured","body":"<p>I am new to Rest Assured &amp; GraphQL service.\nI have a test requirement where I need to validate the address data in JSON response received for multiple PIN codes &amp; fieldnames sent in the request.\nRequest:</p>\n<pre><code>query{\ngetAddress(pinCode:&quot;110074&quot;,&quot;110047&quot;){\n addressLine1\n addressLine2\n city}\n}\n</code></pre>\n<p>Response:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{&quot;data&quot;: {\n &quot;addressDetails&quot;: [\n  {\n   pinCode:&quot;110074&quot;,\n   addressLine1:&quot;house number 123&quot;,\n   addressLine2:&quot;ABC Colony&quot;\n  }\n  {\n   pinCode:&quot;110047&quot;,\n   addressLine1:&quot;house number 567&quot;,\n   addressLine2:&quot;XYZ Colony&quot;\n  }\n]}\n}\n</code></pre>\n<p>Number of PIN codes might increase and details will be fetched for all the PIN codes.</p>\n<p>I want to validate that all the PINcodes details are being received and data received are also to be validated against data in an excel sheet.</p>\n"},{"tags":["java","hibernate","hibernate-search"],"answers":[{"tags":[],"owner":{"account_id":8974783,"reputation":9445,"user_id":6692043,"display_name":"yrodiere"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676380941,"creation_date":1656315907,"answer_id":72768579,"question_id":72746710,"body_markdown":"EDIT: Hibernate Search 6.2.0.Alpha2 introduced a `hasClause` method on `BooleanPredicateOptionsCollector`/`BooleanPredicateClausesStep`, so you should use that.\r\n\r\n---\r\n\r\nPrevious answer:\r\n\r\nBefore Hibernate Search 6.2, there is no equivalent.\r\n\r\nIn the meantime, you can pass a `List` to `addProbableVendorNameBool` as a workaround. While not very pretty, it will work:\r\n\r\n```\r\n    public SearchPredicate buildProbableVendorNamesPredicate(SearchPredicateFactory pf, Set&lt;String&gt; vendorNames) {\r\n        List&lt;SearchPredicate&gt; clauses = new ArrayList();\r\n\r\n        vendorNames.forEach(name -&gt;\r\n                addProbableVendorNameBool(pf, clauses, name)\r\n        );\r\n\r\n        if (clauses.isEmpty()) {\r\n            return null;\r\n        }\r\n\r\n        BooleanPredicateClausesStep namesBool = pf.bool();\r\n        clauses.forEach(namesBool::should);\r\n        return namesBool.toPredicate();\r\n    }\r\n\r\n    private void addProbableVendorNameBool(SearchPredicateFactory pf, List&lt;SearchPredicate&gt; clauses, String name) {\r\n        ...\r\n    }\r\n```\r\n\r\nOr, if you can change `addProbableVendorNameBool` so that it returns exactly exactly one predicate (e.g. by having it create its own boolean predicate if necessary) or `null`:\r\n\r\n\r\n```\r\n    public SearchPredicate buildProbableVendorNamesPredicate(SearchPredicateFactory pf, Set&lt;String&gt; vendorNames) {\r\n        List&lt;SearchPredicate&gt; clauses = vendorNames.stream()\r\n                .map(name -&gt; buildProbableVendorSingleNamePredicate(pf, name))\r\n                .filter(Objects::nonNull)\r\n                .collect(Collectors.toList());\r\n\r\n        if (clauses.isEmpty()) {\r\n            return null;\r\n        }\r\n\r\n        BooleanPredicateClausesStep namesBool = pf.bool();\r\n        clauses.forEach(namesBool::should);\r\n        return namesBool.toPredicate();\r\n    }\r\n\r\n    private SearchPredicate buildProbableVendorSingleNamePredicate(SearchPredicateFactory pf, String name) {\r\n        ...\r\n        return &lt;something or null&gt;;\r\n    }\r\n```","title":"BooleanJunction#isEmpty equivalent in Hibernate Search 6 BooleanPredicateClausesStep","body":"<p>EDIT: Hibernate Search 6.2.0.Alpha2 introduced a <code>hasClause</code> method on <code>BooleanPredicateOptionsCollector</code>/<code>BooleanPredicateClausesStep</code>, so you should use that.</p>\n<hr />\n<p>Previous answer:</p>\n<p>Before Hibernate Search 6.2, there is no equivalent.</p>\n<p>In the meantime, you can pass a <code>List</code> to <code>addProbableVendorNameBool</code> as a workaround. While not very pretty, it will work:</p>\n<pre><code>    public SearchPredicate buildProbableVendorNamesPredicate(SearchPredicateFactory pf, Set&lt;String&gt; vendorNames) {\n        List&lt;SearchPredicate&gt; clauses = new ArrayList();\n\n        vendorNames.forEach(name -&gt;\n                addProbableVendorNameBool(pf, clauses, name)\n        );\n\n        if (clauses.isEmpty()) {\n            return null;\n        }\n\n        BooleanPredicateClausesStep namesBool = pf.bool();\n        clauses.forEach(namesBool::should);\n        return namesBool.toPredicate();\n    }\n\n    private void addProbableVendorNameBool(SearchPredicateFactory pf, List&lt;SearchPredicate&gt; clauses, String name) {\n        ...\n    }\n</code></pre>\n<p>Or, if you can change <code>addProbableVendorNameBool</code> so that it returns exactly exactly one predicate (e.g. by having it create its own boolean predicate if necessary) or <code>null</code>:</p>\n<pre><code>    public SearchPredicate buildProbableVendorNamesPredicate(SearchPredicateFactory pf, Set&lt;String&gt; vendorNames) {\n        List&lt;SearchPredicate&gt; clauses = vendorNames.stream()\n                .map(name -&gt; buildProbableVendorSingleNamePredicate(pf, name))\n                .filter(Objects::nonNull)\n                .collect(Collectors.toList());\n\n        if (clauses.isEmpty()) {\n            return null;\n        }\n\n        BooleanPredicateClausesStep namesBool = pf.bool();\n        clauses.forEach(namesBool::should);\n        return namesBool.toPredicate();\n    }\n\n    private SearchPredicate buildProbableVendorSingleNamePredicate(SearchPredicateFactory pf, String name) {\n        ...\n        return &lt;something or null&gt;;\n    }\n</code></pre>\n"}],"owner":{"account_id":5922405,"reputation":162,"user_id":4659370,"display_name":"Rick Gagne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72768579,"answer_count":1,"score":0,"last_activity_date":1676380941,"creation_date":1656086705,"question_id":72746710,"body_markdown":"Hibernate Search 5 BooleanJunction has a useful isEmpty() method to you can determine whether any clauses actually exist.  This helps when building the Queries upstream b/c we won&#39;t include, or will alter our Query if a particular BooleanJunction is empty since it will not provide the results desired.\r\n\r\nWhat is the equivalent for BooleanPredicateClausesStep in Hibernate Search 6?  I don&#39;t see one, so is there another way to determine whether a BooleanPredicateClausesStep is empty or has no clauses contained within it?\r\n\r\nProviding some example code to illustrate.\r\n\r\nHibernate Search 5.10.7.Final:\r\n```\r\n     public Query buildProbableVendorNamesQuery(FullTextSession fts, QueryBuilder qb, Set&lt;String&gt; vendorNames) {\r\n            BooleanJunction namesBool = qb.bool();\r\n\r\n            vendorNames.forEach(name -&gt;\r\n                    addProbableVendorNameBool(fts, qb, namesBool, name)\r\n            );\r\n    \r\n            return namesBool.isEmpty() ? null : namesBool.createQuery();\r\n        }\r\n```\r\nHibernate Search 6.1.5.Final:\r\n```\r\n    public SearchPredicate buildProbableVendorNamesPredicate(SearchPredicateFactory pf, Set&lt;String&gt; vendorNames) {\r\n        BooleanPredicateClausesStep namesBool = pf.bool();\r\n\r\n        vendorNames.forEach(name -&gt;\r\n                addProbableVendorNameBool(pf, namesBool, name)\r\n        );\r\n\r\n        //TODO: How can we know if namesBool is empty so we can return null?\r\n        return namesBool.toPredicate();\r\n    }\r\n```\r\nThere are various reasons why namesBool could be empty, 1 being that the name itself ended up being a stop word or normalizing down to nothing. In that case we&#39;d want to inform the caller upstream that the SearchPredicate is null so don&#39;t attempt to use it in a query.","title":"BooleanJunction#isEmpty equivalent in Hibernate Search 6 BooleanPredicateClausesStep","body":"<p>Hibernate Search 5 BooleanJunction has a useful isEmpty() method to you can determine whether any clauses actually exist.  This helps when building the Queries upstream b/c we won't include, or will alter our Query if a particular BooleanJunction is empty since it will not provide the results desired.</p>\n<p>What is the equivalent for BooleanPredicateClausesStep in Hibernate Search 6?  I don't see one, so is there another way to determine whether a BooleanPredicateClausesStep is empty or has no clauses contained within it?</p>\n<p>Providing some example code to illustrate.</p>\n<p>Hibernate Search 5.10.7.Final:</p>\n<pre><code>     public Query buildProbableVendorNamesQuery(FullTextSession fts, QueryBuilder qb, Set&lt;String&gt; vendorNames) {\n            BooleanJunction namesBool = qb.bool();\n\n            vendorNames.forEach(name -&gt;\n                    addProbableVendorNameBool(fts, qb, namesBool, name)\n            );\n    \n            return namesBool.isEmpty() ? null : namesBool.createQuery();\n        }\n</code></pre>\n<p>Hibernate Search 6.1.5.Final:</p>\n<pre><code>    public SearchPredicate buildProbableVendorNamesPredicate(SearchPredicateFactory pf, Set&lt;String&gt; vendorNames) {\n        BooleanPredicateClausesStep namesBool = pf.bool();\n\n        vendorNames.forEach(name -&gt;\n                addProbableVendorNameBool(pf, namesBool, name)\n        );\n\n        //TODO: How can we know if namesBool is empty so we can return null?\n        return namesBool.toPredicate();\n    }\n</code></pre>\n<p>There are various reasons why namesBool could be empty, 1 being that the name itself ended up being a stop word or normalizing down to nothing. In that case we'd want to inform the caller upstream that the SearchPredicate is null so don't attempt to use it in a query.</p>\n"},{"tags":["java","android","react-native","kotlin","okhttp"],"answers":[{"tags":[],"owner":{"account_id":459638,"reputation":6041,"user_id":860212,"display_name":"karllindmark"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676314369,"creation_date":1676314369,"answer_id":75440096,"question_id":75437743,"body_markdown":"Have you considered adding your `CustomInterceptor` as a [&quot;network interceptor&quot;][1]? That might help to get more information from it (not completely sure that&#39;s actually what you need in the long run, though).\r\n\r\n```\r\nreturn clientBuilder\r\n    .certificatePinner(certificatePinner)\r\n    .addNetworkInterceptor(new CustomInterceptor())\r\n    .build();\r\n```\r\n\r\n\r\n  [1]: https://square.github.io/okhttp/features/interceptors/#network-interceptors","title":"chain.proceed(request) not returning any response","body":"<p>Have you considered adding your <code>CustomInterceptor</code> as a <a href=\"https://square.github.io/okhttp/features/interceptors/#network-interceptors\" rel=\"nofollow noreferrer\">&quot;network interceptor&quot;</a>? That might help to get more information from it (not completely sure that's actually what you need in the long run, though).</p>\n<pre><code>return clientBuilder\n    .certificatePinner(certificatePinner)\n    .addNetworkInterceptor(new CustomInterceptor())\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24695717,"reputation":33,"user_id":18587725,"display_name":"Harjinder Singh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676380628,"creation_date":1676380628,"answer_id":75448410,"question_id":75437743,"body_markdown":"I have been able to get around this problem by adding the chain.proceed(request) in try-catch block and catching the exception. Exception object contains the message that request failed due to invalid SSL hash.\r\n\r\n    @Override\r\n    public Response intercept(Chain chain) throws IOException {\r\n        Request request = chain.request();\r\n        System.out.println(&quot;My Client::: Intercepted request: &quot; +request.toString());\r\n        Response res= null;\r\n        try{\r\n            res=chain.proceed(request);\r\n        }catch(Exception e){\r\n            System.out.println(e);\r\n        }\r\n        System.out.println(&quot;My Client::: Intercepted response: &quot; + res.toString());\r\n        return res;\r\n    }\r\n\r\n\r\n","title":"chain.proceed(request) not returning any response","body":"<p>I have been able to get around this problem by adding the chain.proceed(request) in try-catch block and catching the exception. Exception object contains the message that request failed due to invalid SSL hash.</p>\n<pre><code>@Override\npublic Response intercept(Chain chain) throws IOException {\n    Request request = chain.request();\n    System.out.println(&quot;My Client::: Intercepted request: &quot; +request.toString());\n    Response res= null;\n    try{\n        res=chain.proceed(request);\n    }catch(Exception e){\n        System.out.println(e);\n    }\n    System.out.println(&quot;My Client::: Intercepted response: &quot; + res.toString());\n    return res;\n}\n</code></pre>\n"}],"owner":{"account_id":24695717,"reputation":33,"user_id":18587725,"display_name":"Harjinder Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":221,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75448410,"answer_count":2,"score":2,"last_activity_date":1676380628,"creation_date":1676301219,"question_id":75437743,"body_markdown":"I have implemented SSL pinning in my react-native app in the android code and i want to get some sort of message/warning when the request is rejected due to invalid SSL hash, so i added an interceptor to get the message from the response.\r\n\r\nHere is code of the added interceptor,\r\n```\r\nOkHttpClient.Builder clientBuilder = OkHttpClientProvider.createClientBuilder();\r\n         return clientBuilder\r\n                 .certificatePinner(certificatePinner)\r\n                 .addInterceptor(new CustomInterceptor())\r\n                 .build();\r\n```\r\n\r\nThe problem is when i add an invalid key (for testing purposes), the code below `chain.proceed(request)` never runs, i am not familiar with OKHTTP or android, but i am guessing it automatically returns a null response in case the request is rejected. \r\n\r\nIs there any way to get the response object even if the request is rejected due to invalid SSL hash.\r\n\r\nHere is code for my interceptor.\r\n\r\n```\r\npublic class CustomInterceptor implements Interceptor {\r\n    @Override\r\n    public Response intercept(Chain chain) throws IOException {\r\n        Request request = chain.request();\r\n        System.out.println(&quot;My Client::: Intercepted request: &quot; +request.toString());\r\n        Response res= chain.proceed(request);\r\n        System.out.println(&quot;My Client::: Intercepted response: &quot; + res.toString());\r\n        return res;\r\n    }\r\n}\r\n```\r\n\r\nIn my app Axios is used as a network managing library and i haven&#39;t found any library for SSL pinning which works with Axios, that is the reason i had to add that directly at native code. Any other solution regarding this is also welcome.","title":"chain.proceed(request) not returning any response","body":"<p>I have implemented SSL pinning in my react-native app in the android code and i want to get some sort of message/warning when the request is rejected due to invalid SSL hash, so i added an interceptor to get the message from the response.</p>\n<p>Here is code of the added interceptor,</p>\n<pre><code>OkHttpClient.Builder clientBuilder = OkHttpClientProvider.createClientBuilder();\n         return clientBuilder\n                 .certificatePinner(certificatePinner)\n                 .addInterceptor(new CustomInterceptor())\n                 .build();\n</code></pre>\n<p>The problem is when i add an invalid key (for testing purposes), the code below <code>chain.proceed(request)</code> never runs, i am not familiar with OKHTTP or android, but i am guessing it automatically returns a null response in case the request is rejected.</p>\n<p>Is there any way to get the response object even if the request is rejected due to invalid SSL hash.</p>\n<p>Here is code for my interceptor.</p>\n<pre><code>public class CustomInterceptor implements Interceptor {\n    @Override\n    public Response intercept(Chain chain) throws IOException {\n        Request request = chain.request();\n        System.out.println(&quot;My Client::: Intercepted request: &quot; +request.toString());\n        Response res= chain.proceed(request);\n        System.out.println(&quot;My Client::: Intercepted response: &quot; + res.toString());\n        return res;\n    }\n}\n</code></pre>\n<p>In my app Axios is used as a network managing library and i haven't found any library for SSL pinning which works with Axios, that is the reason i had to add that directly at native code. Any other solution regarding this is also welcome.</p>\n"},{"tags":["java","redisson","jcache"],"comments":[{"owner":{"account_id":633896,"reputation":3552,"user_id":399637,"accept_rate":90,"display_name":"res1"},"score":0,"creation_date":1673308452,"post_id":75063978,"comment_id":132465678,"body_markdown":"from [redisson doc](https://github.com/redisson/redisson/wiki/4.-data-serialization) it seems that `Redisson` uses [Kryo](https://github.com/EsotericSoftware/kryo) as default data serializer/deserializer. I suppose this is the same when used with `JCache`.","body":"from <a href=\"https://github.com/redisson/redisson/wiki/4.-data-serialization\" rel=\"nofollow noreferrer\">redisson doc</a> it seems that <code>Redisson</code> uses <a href=\"https://github.com/EsotericSoftware/kryo\" rel=\"nofollow noreferrer\">Kryo</a> as default data serializer/deserializer. I suppose this is the same when used with <code>JCache</code>."}],"answers":[{"tags":[],"owner":{"account_id":633896,"reputation":3552,"user_id":399637,"accept_rate":90,"display_name":"res1"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676379705,"creation_date":1676379705,"answer_id":75448223,"question_id":75063978,"body_markdown":"As my comment, from [redisson documentation](https://github.com/redisson/redisson/wiki/4.-data-serialization) `Redisson` use [Kryo](https://github.com/EsotericSoftware/kryo) as default data serializer/deserializer.","title":"JCache with Redisson, how serialization / deserialization works?","body":"<p>As my comment, from <a href=\"https://github.com/redisson/redisson/wiki/4.-data-serialization\" rel=\"nofollow noreferrer\">redisson documentation</a> <code>Redisson</code> use <a href=\"https://github.com/EsotericSoftware/kryo\" rel=\"nofollow noreferrer\">Kryo</a> as default data serializer/deserializer.</p>\n"}],"owner":{"account_id":633896,"reputation":3552,"user_id":399637,"accept_rate":90,"display_name":"res1"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":283,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75448223,"answer_count":1,"score":0,"last_activity_date":1676379705,"creation_date":1673306831,"question_id":75063978,"body_markdown":"I am using `JCache` with `Redisson`, it&#39;s not clear to me how serialization/deserialization works while using the cache.\r\n\r\n\r\nWhen I setup the `Cache` via configuration I didn&#39;t setup anything about this. Is this done transparently?\r\n\r\nThe objects I am storing in cache are lists, objects from `java.time` for example, but I require all of objects of the classes I am storing in the cache implement `Serializable`, is this enough?\r\n\r\nLooking at the data on redis it seems it is storing data serialized via java default serialization, am I wrong?\r\n\r\nCan I control this behaviour? or it&#39;s better to leave it as it is ?\r\n\r\nThanks for help\r\n","title":"JCache with Redisson, how serialization / deserialization works?","body":"<p>I am using <code>JCache</code> with <code>Redisson</code>, it's not clear to me how serialization/deserialization works while using the cache.</p>\n<p>When I setup the <code>Cache</code> via configuration I didn't setup anything about this. Is this done transparently?</p>\n<p>The objects I am storing in cache are lists, objects from <code>java.time</code> for example, but I require all of objects of the classes I am storing in the cache implement <code>Serializable</code>, is this enough?</p>\n<p>Looking at the data on redis it seems it is storing data serialized via java default serialization, am I wrong?</p>\n<p>Can I control this behaviour? or it's better to leave it as it is ?</p>\n<p>Thanks for help</p>\n"},{"tags":["java","spring-mvc"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1418669495,"post_id":27490953,"comment_id":43413664,"body_markdown":"You should be programming to interfaces so your code should use the `EmployeeService`. Next your `EmployeeService` is actually not that good as a service should represent useless, functions of your system. You are only using it as an added layer of complexity to hide your dao.","body":"You should be programming to interfaces so your code should use the <code>EmployeeService</code>. Next your <code>EmployeeService</code> is actually not that good as a service should represent useless, functions of your system. You are only using it as an added layer of complexity to hide your dao."},{"owner":{"account_id":1638661,"reputation":2399,"user_id":1511531,"display_name":"Semih Eker"},"score":0,"creation_date":1418669640,"post_id":27490953,"comment_id":43413738,"body_markdown":"I think main reason is the Dependency Injection. Read this post; http://stackoverflow.com/questions/256255/spring-and-interfaces","body":"I think main reason is the Dependency Injection. Read this post; <a href=\"http://stackoverflow.com/questions/256255/spring-and-interfaces\">stackoverflow.com/questions/256255/spring-and-interfaces</a>"},{"owner":{"account_id":872746,"reputation":1869,"user_id":923233,"display_name":"Divanshu"},"score":0,"creation_date":1527136359,"post_id":27490953,"comment_id":88014490,"body_markdown":"I know it&#39;s an old post but just wanted to make a point, there are no justification on using the Impl classes.  The point of using interface is to have more than one implementations(if not now, then most likely in future).  For sake of adding the the interface is of no use. e.g. you could use ListService interface which have list() method and then you can have EmployeeService class which can implement it but writing EmployeeService interface and EmployeeServiceImpl is useless.  Ref: [link](https://octoperf.com/blog/2016/10/27/impl-classes-are-evil/)","body":"I know it&#39;s an old post but just wanted to make a point, there are no justification on using the Impl classes.  The point of using interface is to have more than one implementations(if not now, then most likely in future).  For sake of adding the the interface is of no use. e.g. you could use ListService interface which have list() method and then you can have EmployeeService class which can implement it but writing EmployeeService interface and EmployeeServiceImpl is useless.  Ref: <a href=\"https://octoperf.com/blog/2016/10/27/impl-classes-are-evil/\" rel=\"nofollow noreferrer\">link</a>"}],"answers":[{"tags":[],"owner":{"account_id":5278944,"reputation":114,"user_id":4214943,"display_name":"rfceron"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1418669540,"creation_date":1418669540,"answer_id":27491052,"question_id":27490953,"body_markdown":"Interfaces are always a good practice for decoupling, but also, when speaking about Spring, there are several features you can use having interfaces rather than concrete classes. \r\n\r\nA big advantage is proxying - Spring AOP. \r\n\r\nYou can find more information here: http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/aop.html\r\n\r\nThere are other advantages, like post processing and things like that, but I think you will have an interesting reading on Spring AOP. \r\n\r\n","title":"Why we are using interface in spring MVC pattern?","body":"<p>Interfaces are always a good practice for decoupling, but also, when speaking about Spring, there are several features you can use having interfaces rather than concrete classes. </p>\n\n<p>A big advantage is proxying - Spring AOP. </p>\n\n<p>You can find more information here: <a href=\"http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/aop.html\" rel=\"nofollow\">http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/aop.html</a></p>\n\n<p>There are other advantages, like post processing and things like that, but I think you will have an interesting reading on Spring AOP. </p>\n"},{"tags":[],"owner":{"account_id":983997,"reputation":7005,"user_id":1002972,"accept_rate":61,"display_name":"manash"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1418669665,"creation_date":1418669665,"answer_id":27491085,"question_id":27490953,"body_markdown":"It is recommended to write code against interfaces instead specific implementations.\r\n\r\nThis way, the client code doesn&#39;t know the specific implementations but only knows the contract.\r\n\r\nRegarding Spring, you generally have to use interfaces since Spring often needs to create Java proxies and this can be done only for classes that implement interfaces.","title":"Why we are using interface in spring MVC pattern?","body":"<p>It is recommended to write code against interfaces instead specific implementations.</p>\n\n<p>This way, the client code doesn't know the specific implementations but only knows the contract.</p>\n\n<p>Regarding Spring, you generally have to use interfaces since Spring often needs to create Java proxies and this can be done only for classes that implement interfaces.</p>\n"},{"tags":[],"owner":{"account_id":4443039,"reputation":3322,"user_id":3617127,"accept_rate":100,"display_name":"Panther"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1418669674,"creation_date":1418669674,"answer_id":27491089,"question_id":27490953,"body_markdown":"It don&#39;t have much .to do with Spring or MVC.It is good practice to design with interfaces, so that implementation can be changes easily. It provides loose coupling and if you are using spring you can siimply change implementation. Whenver needed.\r\n\r\nAlso , it helps during testing with Junit. You can easily mockup your dao.","title":"Why we are using interface in spring MVC pattern?","body":"<p>It don't have much .to do with Spring or MVC.It is good practice to design with interfaces, so that implementation can be changes easily. It provides loose coupling and if you are using spring you can siimply change implementation. Whenver needed.</p>\n\n<p>Also , it helps during testing with Junit. You can easily mockup your dao.</p>\n"},{"tags":[],"owner":{"account_id":313216,"reputation":44997,"user_id":627727,"accept_rate":84,"display_name":"mkobit"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1418671940,"creation_date":1418670248,"answer_id":27491238,"question_id":27490953,"body_markdown":"A few principles that are part of the [SOLID][1] acronym for OO design apply to this: \r\n\r\n 1. [Liskov substitution principle][2] - you should be able substitute any subtype of `T` without affecting the outcome of the problem. E.g., if you call a method that returns a `List&lt;&gt;`, and the underlying implementation switches from returning an `ArrayList&lt;&gt;` to a `LinkedList&lt;&gt;`, your program should still perform in the same manner. Basically, you should design your classes so that client dependencies can be substituted with subclasses without the client knowing about the change. Here is a short snippet from the wiki page:\r\n\r\n&gt; Substitutability is a principle in object-oriented programming. It\r\n&gt; states that, in a computer program, if S is a subtype of T, then\r\n&gt; objects of type T may be replaced with objects of type S (i.e.,\r\n&gt; objects of type S may substitute objects of type T) without altering\r\n&gt; any of the desirable properties of that program (correctness, task\r\n&gt; performed, etc.)\r\n\r\n 2. [Dependency inversion principle][3] - The main idea is that you isolate the class behind a boundary based upon the abstractions it depends on. That way if any of the details that sit behind those abstractions change, the class will be unaffected.\r\n\r\n&gt; In object-oriented programming, the dependency inversion principle\r\n&gt; refers to a specific form of decoupling software modules. When\r\n&gt; following this principle, the conventional dependency relationships\r\n&gt; established from high-level, policy-setting modules to low-level,\r\n&gt; dependency modules are inverted (i.e. reversed), thus rendering\r\n&gt; high-level modules independent of the low-level module implementation\r\n&gt; details. The principle states\r\n&gt; \r\n&gt;         A. High-level modules should not depend on low-level modules. \r\n&gt;            Both should depend on abstractions.\r\n&gt;         B. Abstractions should not depend on details. \r\n&gt;            Details should depend on abstractions.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29\r\n  [2]: http://en.wikipedia.org/wiki/Liskov_substitution_principle\r\n  [3]: http://en.wikipedia.org/wiki/Dependency_inversion_principle","title":"Why we are using interface in spring MVC pattern?","body":"<p>A few principles that are part of the <a href=\"http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29\" rel=\"nofollow\">SOLID</a> acronym for OO design apply to this: </p>\n\n<ol>\n<li><a href=\"http://en.wikipedia.org/wiki/Liskov_substitution_principle\" rel=\"nofollow\">Liskov substitution principle</a> - you should be able substitute any subtype of <code>T</code> without affecting the outcome of the problem. E.g., if you call a method that returns a <code>List&lt;&gt;</code>, and the underlying implementation switches from returning an <code>ArrayList&lt;&gt;</code> to a <code>LinkedList&lt;&gt;</code>, your program should still perform in the same manner. Basically, you should design your classes so that client dependencies can be substituted with subclasses without the client knowing about the change. Here is a short snippet from the wiki page:</li>\n</ol>\n\n<blockquote>\n  <p>Substitutability is a principle in object-oriented programming. It\n  states that, in a computer program, if S is a subtype of T, then\n  objects of type T may be replaced with objects of type S (i.e.,\n  objects of type S may substitute objects of type T) without altering\n  any of the desirable properties of that program (correctness, task\n  performed, etc.)</p>\n</blockquote>\n\n<ol start=\"2\">\n<li><a href=\"http://en.wikipedia.org/wiki/Dependency_inversion_principle\" rel=\"nofollow\">Dependency inversion principle</a> - The main idea is that you isolate the class behind a boundary based upon the abstractions it depends on. That way if any of the details that sit behind those abstractions change, the class will be unaffected.</li>\n</ol>\n\n<blockquote>\n  <p>In object-oriented programming, the dependency inversion principle\n  refers to a specific form of decoupling software modules. When\n  following this principle, the conventional dependency relationships\n  established from high-level, policy-setting modules to low-level,\n  dependency modules are inverted (i.e. reversed), thus rendering\n  high-level modules independent of the low-level module implementation\n  details. The principle states</p>\n\n<pre><code>    A. High-level modules should not depend on low-level modules. \n       Both should depend on abstractions.\n    B. Abstractions should not depend on details. \n       Details should depend on abstractions.\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1521734,"reputation":3389,"user_id":1421189,"accept_rate":58,"display_name":"Pranalee"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1418670508,"creation_date":1418670508,"answer_id":27491301,"question_id":27490953,"body_markdown":"Weather spring mvc or not, one should always code to interface. Interface gives me better readability when i just want to see what the class does instead of worrying about how it does it, kind of API exposed to outer world. \r\n\r\nAnother benefit is there could be multiple implementations of &#39;how to do&#39; it and spring helps to switch easily between multiple implementations. For e.g. you could have one more implementation of EmployeeService say FullTimeEmployeeServiceImpl, RemoteEmployeeServiceImpl.\r\n\r\nNow if you have client class which uses EmployeeService:\r\n\r\n    class EmployeeManager{\r\n        private EmployeeService service;\r\n    }\r\n\r\nyou can inject any of bean here \r\n\r\n\r\n    &lt;bean id=&quot;employeeManager&quot; class=&quot;com.abc.EmployeeManager&quot;&gt;\r\n      &lt;property name=&quot;service&quot; ref=&quot;fullTimeEmployee | remoteEmployee&quot; &gt;\r\n    &lt;/bean&gt;\r\n     \r\n    &lt;bean id=&quot;fullTimeEmployee&quot; class=&quot;com.abc.FullTimeEmployeeServiceImpl&quot; /&gt;\r\n    &lt;bean id=&quot;remoteEmployee&quot; class=&quot;com.abc.RemoteEmployeeServiceImpl&quot; /&gt;\r\n\r\n\r\n","title":"Why we are using interface in spring MVC pattern?","body":"<p>Weather spring mvc or not, one should always code to interface. Interface gives me better readability when i just want to see what the class does instead of worrying about how it does it, kind of API exposed to outer world. </p>\n\n<p>Another benefit is there could be multiple implementations of 'how to do' it and spring helps to switch easily between multiple implementations. For e.g. you could have one more implementation of EmployeeService say FullTimeEmployeeServiceImpl, RemoteEmployeeServiceImpl.</p>\n\n<p>Now if you have client class which uses EmployeeService:</p>\n\n<pre><code>class EmployeeManager{\n    private EmployeeService service;\n}\n</code></pre>\n\n<p>you can inject any of bean here </p>\n\n<pre><code>&lt;bean id=\"employeeManager\" class=\"com.abc.EmployeeManager\"&gt;\n  &lt;property name=\"service\" ref=\"fullTimeEmployee | remoteEmployee\" &gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"fullTimeEmployee\" class=\"com.abc.FullTimeEmployeeServiceImpl\" /&gt;\n&lt;bean id=\"remoteEmployee\" class=\"com.abc.RemoteEmployeeServiceImpl\" /&gt;\n</code></pre>\n"}],"owner":{"account_id":5489878,"reputation":79,"user_id":4363550,"display_name":"som"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5856,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"answer_count":5,"score":7,"last_activity_date":1676379684,"creation_date":1418669143,"question_id":27490953,"body_markdown":"I am new to spring MVC , I have downloaded a small spring MVC project . The project is executing fine but it this project  interfaces and classes are being used .\r\nlike\r\n\r\n&lt;pre&gt;\r\n&lt;code&gt;\r\npublic interface EmployeeService {\r\n\t\r\n\tpublic void addEmployee(Employee employee);\r\n\r\n\tpublic List&lt;Employee&gt; listEmployeess();\r\n\t\r\n\tpublic Employee getEmployee(int empid);\r\n\t\r\n\tpublic void deleteEmployee(Employee employee);\r\n}\r\n&lt;/code&gt;\r\n&lt;/pre&gt;\r\n\r\nAnd\r\n\r\n&lt;pre&gt;\r\n&lt;code&gt;\r\npublic class EmployeeServiceImpl implements EmployeeService {\r\n\r\n\t@Autowired\r\n\tprivate EmployeeDao employeeDao;\r\n\t\r\n\t@Transactional(propagation = Propagation.REQUIRED, readOnly = false)\r\n\tpublic void addEmployee(Employee employee) {\r\n\t\temployeeDao.addEmployee(employee);\r\n\t}\r\n\t\r\n\tpublic List&lt;Employee&gt; listEmployeess() {\r\n\t\treturn employeeDao.listEmployeess();\r\n\t}\r\n\r\n\tpublic Employee getEmployee(int empid) {\r\n\t\treturn employeeDao.getEmployee(empid);\r\n\t}\r\n\t\r\n\tpublic void deleteEmployee(Employee employee) {\r\n\t\temployeeDao.deleteEmployee(employee);\r\n\t}\r\n\r\n}\r\n&lt;/code&gt;\r\n&lt;/pre&gt; \r\n\r\nMy  doubt is if we are using `EmployeeServiceImpl`  what is the need of implementing `EmployeeService` ? same thing is there in `EmployeeDao` and `EmployeeDaoImpl`.","title":"Why we are using interface in spring MVC pattern?","body":"<p>I am new to spring MVC , I have downloaded a small spring MVC project . The project is executing fine but it this project  interfaces and classes are being used .\nlike</p>\n\n<pre>\n<code>\npublic interface EmployeeService {\n\n    public void addEmployee(Employee employee);\n\n    public List listEmployeess();\n\n    public Employee getEmployee(int empid);\n\n    public void deleteEmployee(Employee employee);\n}\n</code>\n</pre>\n\n<p>And</p>\n\n<pre>\n<code>\npublic class EmployeeServiceImpl implements EmployeeService {\n\n    @Autowired\n    private EmployeeDao employeeDao;\n\n    @Transactional(propagation = Propagation.REQUIRED, readOnly = false)\n    public void addEmployee(Employee employee) {\n        employeeDao.addEmployee(employee);\n    }\n\n    public List listEmployeess() {\n        return employeeDao.listEmployeess();\n    }\n\n    public Employee getEmployee(int empid) {\n        return employeeDao.getEmployee(empid);\n    }\n\n    public void deleteEmployee(Employee employee) {\n        employeeDao.deleteEmployee(employee);\n    }\n\n}\n</code>\n</pre> \n\n<p>My  doubt is if we are using <code>EmployeeServiceImpl</code>  what is the need of implementing <code>EmployeeService</code> ? same thing is there in <code>EmployeeDao</code> and <code>EmployeeDaoImpl</code>.</p>\n"},{"tags":["java","c#","double","icollection"],"comments":[{"owner":{"account_id":2918545,"reputation":111555,"user_id":2501279,"display_name":"Guru Stron"},"score":0,"creation_date":1676377241,"post_id":75447586,"comment_id":133120999,"body_markdown":"What is `Double.Divide` for C#? =)","body":"What is <code>Double.Divide</code> for C#? =)"},{"owner":{"account_id":8238102,"reputation":20380,"user_id":6196568,"display_name":"shingo"},"score":0,"creation_date":1676377779,"post_id":75447586,"comment_id":133121165,"body_markdown":"Java only has `Collection&lt;T&gt;`","body":"Java only has <code>Collection&lt;T&gt;</code>"},{"owner":{"account_id":19708136,"reputation":25,"user_id":14429297,"display_name":"Ananda Vicky"},"score":0,"creation_date":1676379148,"post_id":75447586,"comment_id":133121585,"body_markdown":"@GuruStron sorry i mean decimal.Divide","body":"@GuruStron sorry i mean decimal.Divide"}],"owner":{"account_id":19708136,"reputation":25,"user_id":14429297,"display_name":"Ananda Vicky"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676379548,"creation_date":1676376258,"question_id":75447586,"body_markdown":"I imported a program from Github. It is written in C# and I convert the codes to Java. Everything works except one, the method that needs ICollection and decimal.Divide.\r\n\r\nAre there ICollection and decimal.Divide for Java? Or alternatives?\r\n\r\nI opened Apache NetBeans and it shows:\r\n\r\n    cannot find symbol\r\n      symbol:   class ICollection\r\n      location: class MathFormulas\r\n\r\n\r\n    cannot find symbol\r\n      symbol:   variable decimal\r\n      location: class MathFormulas","title":"ICollection and decimal.Divide for Java","body":"<p>I imported a program from Github. It is written in C# and I convert the codes to Java. Everything works except one, the method that needs ICollection and decimal.Divide.</p>\n<p>Are there ICollection and decimal.Divide for Java? Or alternatives?</p>\n<p>I opened Apache NetBeans and it shows:</p>\n<pre><code>cannot find symbol\n  symbol:   class ICollection\n  location: class MathFormulas\n\n\ncannot find symbol\n  symbol:   variable decimal\n  location: class MathFormulas\n</code></pre>\n"},{"tags":["java","selenium","selenium-webdriver","pom.xml","page-factory"],"answers":[{"tags":[],"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663340220,"creation_date":1663340220,"answer_id":73746751,"question_id":73746576,"body_markdown":"NoSuchMethodError normally means you compiled with one version, but are running with a different (normally older) version, hence the Exception.\r\n\r\nThe solution is to make sure you are developing and running on the same version of Java, selenium, and any other 3rd party library you are also using","title":"java.lang.NoSuchMethodError: &#39;void org.openqa.selenium.support.PageFactory.initElements(org.openqa.selenium.SearchContext, java.lang.Object)&#39;","body":"<p>NoSuchMethodError normally means you compiled with one version, but are running with a different (normally older) version, hence the Exception.</p>\n<p>The solution is to make sure you are developing and running on the same version of Java, selenium, and any other 3rd party library you are also using</p>\n"},{"tags":[],"owner":{"account_id":26605747,"reputation":1,"user_id":20226611,"display_name":"Krupa Gadhiya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665617845,"creation_date":1665617845,"answer_id":74049011,"question_id":73746576,"body_markdown":"I just re-added the selenium jar file and TestNG library, and it&#39;s working! \r\n\r\nWork around: Project name &gt; right click &gt; Build path &gt; Configure Build Path... &gt; Add External Library(to add selenium jar file) and &gt; Add Library (to add TestNG)","title":"java.lang.NoSuchMethodError: &#39;void org.openqa.selenium.support.PageFactory.initElements(org.openqa.selenium.SearchContext, java.lang.Object)&#39;","body":"<p>I just re-added the selenium jar file and TestNG library, and it's working!</p>\n<p>Work around: Project name &gt; right click &gt; Build path &gt; Configure Build Path... &gt; Add External Library(to add selenium jar file) and &gt; Add Library (to add TestNG)</p>\n"}],"owner":{"account_id":10487892,"reputation":3,"user_id":7730791,"display_name":"suneetha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2720,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73746751,"answer_count":2,"score":0,"last_activity_date":1676379458,"creation_date":1663339358,"question_id":73746576,"body_markdown":"I was trying to run my old selenium practiced scripts which were working fine a month ago and are throwing  errors now, especially at the constructor \t\t\r\n\r\n    PageFactory.initElements(driver, this);\r\n    \r\nAny advice?\r\n    \r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.support.FindBy;\r\n    import org.openqa.selenium.support.PageFactory;\r\n    import com.crm.qa.base.TestBase;\r\n    \r\n    public class LoginPage extends TestBase {\r\n    \t\r\n    \t@FindBy(name=&quot;username&quot;)`enter code here`\r\n    \tWebElement Username;\r\n    \r\n    \t@FindBy(name=&quot;password&quot;)\r\n    \tWebElement Password;\r\n    \t\r\n    \t@FindBy(xpath=&quot;//div[@class=&#39;input-group-btn&#39;]//input&quot;)\r\n    \tWebElement LoginBtn;\r\n    \t\r\n    \t@FindBy(xpath=&quot;//a[contains(text(),&#39;Sign Up&#39;)]&quot;)\r\n    \tWebElement SignUPLink;\r\n    \t\r\n    \t@FindBy(xpath=&quot;//a[@class=&#39;navbar-brand&#39;]//img&quot;)\r\n    \tWebElement CRMPROLogo;\r\n    \t\r\n    \tpublic  LoginPage() {\r\n    \t\tPageFactory.initElements(driver, this);\r\n    \t}\r\n    \t//#Actions\r\n    \tpublic String ValidateLoginPageTitle() {\r\n    \t\t return driver.getTitle();\r\n    \t}\r\n    \tpublic boolean ValidateCRMlogoImg() {\r\n    \t\treturn CRMPROLogo.isEnabled();\r\n    \t}\r\n    \tpublic  HomePage ValidateLoginTest(String un, String pwd) throws InterruptedException {\r\n    \t\tUsername.sendKeys(un);\r\n    \t\tPassword.sendKeys(pwd);\r\n    \t\tLoginBtn.click();\r\n    \t\tThread.sleep(3000);\r\n    \t\treturn new HomePage();\r\n    \t}\r\n    }\r\n    \r\n    \r\nStacktrace\r\n    \r\n    FAILED CONFIGURATION: @BeforeMethod SetUp\r\n    java.lang.NoSuchMethodError: &#39;void org.openqa.selenium.support.PageFactory.initElements(org.openqa.selenium.SearchContext, java.lang.Object)&#39;\r\n    \tat com.crm.qa.pages.LoginPage.&lt;init&gt;(LoginPage.java:29)\r\n    \tat com.crm.qa.testcases.LoginPageTest.SetUp(LoginPageTest.java:24)\r\n    \tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:577)","title":"java.lang.NoSuchMethodError: &#39;void org.openqa.selenium.support.PageFactory.initElements(org.openqa.selenium.SearchContext, java.lang.Object)&#39;","body":"<p>I was trying to run my old selenium practiced scripts which were working fine a month ago and are throwing  errors now, especially at the constructor</p>\n<pre><code>PageFactory.initElements(driver, this);\n</code></pre>\n<p>Any advice?</p>\n<pre><code>import org.openqa.selenium.WebElement;\nimport org.openqa.selenium.support.FindBy;\nimport org.openqa.selenium.support.PageFactory;\nimport com.crm.qa.base.TestBase;\n\npublic class LoginPage extends TestBase {\n    \n    @FindBy(name=&quot;username&quot;)`enter code here`\n    WebElement Username;\n\n    @FindBy(name=&quot;password&quot;)\n    WebElement Password;\n    \n    @FindBy(xpath=&quot;//div[@class='input-group-btn']//input&quot;)\n    WebElement LoginBtn;\n    \n    @FindBy(xpath=&quot;//a[contains(text(),'Sign Up')]&quot;)\n    WebElement SignUPLink;\n    \n    @FindBy(xpath=&quot;//a[@class='navbar-brand']//img&quot;)\n    WebElement CRMPROLogo;\n    \n    public  LoginPage() {\n        PageFactory.initElements(driver, this);\n    }\n    //#Actions\n    public String ValidateLoginPageTitle() {\n         return driver.getTitle();\n    }\n    public boolean ValidateCRMlogoImg() {\n        return CRMPROLogo.isEnabled();\n    }\n    public  HomePage ValidateLoginTest(String un, String pwd) throws InterruptedException {\n        Username.sendKeys(un);\n        Password.sendKeys(pwd);\n        LoginBtn.click();\n        Thread.sleep(3000);\n        return new HomePage();\n    }\n}\n</code></pre>\n<p>Stacktrace</p>\n<pre><code>FAILED CONFIGURATION: @BeforeMethod SetUp\njava.lang.NoSuchMethodError: 'void org.openqa.selenium.support.PageFactory.initElements(org.openqa.selenium.SearchContext, java.lang.Object)'\n    at com.crm.qa.pages.LoginPage.&lt;init&gt;(LoginPage.java:29)\n    at com.crm.qa.testcases.LoginPageTest.SetUp(LoginPageTest.java:24)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:577)\n</code></pre>\n"},{"tags":["java","spring","maven","aop","aspectj"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1676454166,"post_id":75446269,"comment_id":133138060,"body_markdown":"You do not need a bean definition for a native AspectJ aspect, but the correct load-time weaving configuration instead. As a newbie on SO, please also learn [how to ask a question on SO](https://stackoverflow.com/help/how-to-ask) and provide a [minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve). Thank you. In this case, a complete, minimal sample project on GitHub would be helpful, becasue an aspect snippet without the application code you are tragetting is not very helpful. The problem could be anywhere, also in the configuration.","body":"You do not need a bean definition for a native AspectJ aspect, but the correct load-time weaving configuration instead. As a newbie on SO, please also learn <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question on SO</a> and provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. Thank you. In this case, a complete, minimal sample project on GitHub would be helpful, becasue an aspect snippet without the application code you are tragetting is not very helpful. The problem could be anywhere, also in the configuration."}],"owner":{"account_id":19374740,"reputation":1,"user_id":14167253,"display_name":"CYM"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676378716,"creation_date":1676369286,"question_id":75446269,"body_markdown":"I need to bring selectKey from spring to controller.\r\n\r\nI&#39;m working with AspectJ because it&#39;s impossible with Spring AOP, but Expression seems to have no problem.\r\n\r\nConfig xml:\r\n\r\n```xml\r\n&lt;bean id=&quot;jLoggerInsertSelectIdAttribute&quot; class=&quot;dsehs.common.ComAspectjLogging&quot; /&gt;\r\n&lt;bean id=&quot;InsertSelectIdAttribute&quot; class=&quot;com.ibatis.sqlmap.engine.mapping.statement.InsertStatement&quot;&gt;&lt;/bean&gt;\r\n&lt;aop:aspectj-autoproxy /&gt;\r\n```\r\n\r\nAspect class:\r\n\r\n```java\r\n@Aspect \r\npublic class ComAspectjLogging {\r\n    protected Log log = LogFactory.getLog(this.getClass());\r\n\r\n\t@After(&quot;execution(* com.ibatis.sqlmap.engine.mapping.statement.InsertStatement.*(..))&quot;)\r\n    public void getSelectIdAttribute (JoinPoint joinPoint) throws Throwable {\r\n        log.debug(joinPoint.getSignature().getName());\r\n    }\r\n}\r\n```\r\n\r\nI tried Spring AOP(ofcourse it never work), And AspectJ. and another expressions, e.g.\r\n  * `execution(* com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.*(..)) \t`\r\n * `within(com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.executeSelectKey..*)`\r\n\r\nand searching different solution. **can AspectJ check the Maven Framework&#39;s Class? then how can i fix that?**","title":"How can make joinpoint that executeSelectKey Method in SqlMapExecutorDelegate?","body":"<p>I need to bring selectKey from spring to controller.</p>\n<p>I'm working with AspectJ because it's impossible with Spring AOP, but Expression seems to have no problem.</p>\n<p>Config xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=&quot;jLoggerInsertSelectIdAttribute&quot; class=&quot;dsehs.common.ComAspectjLogging&quot; /&gt;\n&lt;bean id=&quot;InsertSelectIdAttribute&quot; class=&quot;com.ibatis.sqlmap.engine.mapping.statement.InsertStatement&quot;&gt;&lt;/bean&gt;\n&lt;aop:aspectj-autoproxy /&gt;\n</code></pre>\n<p>Aspect class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Aspect \npublic class ComAspectjLogging {\n    protected Log log = LogFactory.getLog(this.getClass());\n\n    @After(&quot;execution(* com.ibatis.sqlmap.engine.mapping.statement.InsertStatement.*(..))&quot;)\n    public void getSelectIdAttribute (JoinPoint joinPoint) throws Throwable {\n        log.debug(joinPoint.getSignature().getName());\n    }\n}\n</code></pre>\n<p>I tried Spring AOP(ofcourse it never work), And AspectJ. and another expressions, e.g.</p>\n<ul>\n<li><code>execution(* com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.*(..))    </code></li>\n<li><code>within(com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.executeSelectKey..*)</code></li>\n</ul>\n<p>and searching different solution. <strong>can AspectJ check the Maven Framework's Class? then how can i fix that?</strong></p>\n"},{"tags":["java","docker-compose","airflow"],"answers":[{"tags":[],"owner":{"account_id":11514826,"reputation":517,"user_id":8971938,"display_name":"Requin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1621202678,"creation_date":1621202678,"answer_id":67561942,"question_id":67268054,"body_markdown":"Try the following:\r\n\r\nCreate the following Dockerfile in the directory where you also have the docker-compose.yml:\r\n\r\n    FROM apache/airflow:2.0.2\r\n    \r\n    USER root\r\n    \r\n    # Install OpenJDK-11\r\n    RUN apt update &amp;&amp; \\\r\n        apt-get install -y openjdk-11-jdk &amp;&amp; \\\r\n        apt-get install -y ant &amp;&amp; \\\r\n        apt-get clean;\r\n\r\n    # Set JAVA_HOME\r\n    ENV JAVA_HOME /usr/lib/jvm/java-11-openjdk-amd64/\r\n    RUN export JAVA_HOME\r\n    \r\n    USER airflow\r\n    \r\n    WORKDIR /app\r\n    \r\n    COPY requirements.txt /app\r\n    \r\n    RUN pip install --trusted-host pypi.python.org -r requirements.txt\r\n\r\nIn order to install packages via apt, you have to switch to root user. Later, we switch back to user airflow. The specification of the working directory and the installation of python packages through requirements.txt might not apply, depending on your case.\r\n\r\nThen, in your docker-compose.yml, add `build: .` after `&amp;airflow-common`.\r\n\r\nFinally, build your pipeline using `docker-compose up -d --build`.\r\n\r\nFor more information, look here: https://airflow.apache.org/docs/docker-stack/build.html#building-the-image","title":"How to install java in an airflow container using docker-compose.yaml","body":"<p>Try the following:</p>\n<p>Create the following Dockerfile in the directory where you also have the docker-compose.yml:</p>\n<pre><code>FROM apache/airflow:2.0.2\n\nUSER root\n\n# Install OpenJDK-11\nRUN apt update &amp;&amp; \\\n    apt-get install -y openjdk-11-jdk &amp;&amp; \\\n    apt-get install -y ant &amp;&amp; \\\n    apt-get clean;\n\n# Set JAVA_HOME\nENV JAVA_HOME /usr/lib/jvm/java-11-openjdk-amd64/\nRUN export JAVA_HOME\n\nUSER airflow\n\nWORKDIR /app\n\nCOPY requirements.txt /app\n\nRUN pip install --trusted-host pypi.python.org -r requirements.txt\n</code></pre>\n<p>In order to install packages via apt, you have to switch to root user. Later, we switch back to user airflow. The specification of the working directory and the installation of python packages through requirements.txt might not apply, depending on your case.</p>\n<p>Then, in your docker-compose.yml, add <code>build: .</code> after <code>&amp;airflow-common</code>.</p>\n<p>Finally, build your pipeline using <code>docker-compose up -d --build</code>.</p>\n<p>For more information, look here: <a href=\"https://airflow.apache.org/docs/docker-stack/build.html#building-the-image\" rel=\"nofollow noreferrer\">https://airflow.apache.org/docs/docker-stack/build.html#building-the-image</a></p>\n"},{"tags":[],"owner":{"account_id":19916156,"reputation":16,"user_id":14622929,"display_name":"Leandro Queiroz dos Santos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676378442,"creation_date":1676378442,"answer_id":75447987,"question_id":67268054,"body_markdown":"You have to build your own airflow image.\r\nIn your Dockerfile you have to apt install the airflow and export JAVA_HOME. \r\n\r\nDockerfile example:\r\n\r\n```\r\nFROM apache/airflow:2.5.1\r\nUSER root\r\nRUN apt-get update \\\r\n  &amp;&amp; apt-get install -y --no-install-recommends \\\r\n         openjdk-11-jre-headless \\\r\n  &amp;&amp; apt-get autoremove -yqq --purge \\\r\n  &amp;&amp; apt-get clean \\\r\n  &amp;&amp; rm -rf /var/lib/apt/lists/*\r\nUSER airflow\r\nENV JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\r\nRUN pip install --no-cache-dir apache-airflow-providers-apache-spark==2.1.3\r\n```\r\nBuild command example:  \r\n```\r\ndocker build -t airflow-with-java .\r\n```\r\n\r\nAfter successfully image building edit your docker-compose by replacing airflow image:\r\n```\r\n\r\nx-airflow-common:\r\n  &amp;airflow-common\r\n  image: ${AIRFLOW_IMAGE_NAME:-airflow-with-java}\r\n```\r\n\r\nMore information you can look here: https://airflow.apache.org/docs/docker-stack/build.html","title":"How to install java in an airflow container using docker-compose.yaml","body":"<p>You have to build your own airflow image.\nIn your Dockerfile you have to apt install the airflow and export JAVA_HOME.</p>\n<p>Dockerfile example:</p>\n<pre><code>FROM apache/airflow:2.5.1\nUSER root\nRUN apt-get update \\\n  &amp;&amp; apt-get install -y --no-install-recommends \\\n         openjdk-11-jre-headless \\\n  &amp;&amp; apt-get autoremove -yqq --purge \\\n  &amp;&amp; apt-get clean \\\n  &amp;&amp; rm -rf /var/lib/apt/lists/*\nUSER airflow\nENV JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\nRUN pip install --no-cache-dir apache-airflow-providers-apache-spark==2.1.3\n</code></pre>\n<p>Build command example:</p>\n<pre><code>docker build -t airflow-with-java .\n</code></pre>\n<p>After successfully image building edit your docker-compose by replacing airflow image:</p>\n<pre><code>\nx-airflow-common:\n  &amp;airflow-common\n  image: ${AIRFLOW_IMAGE_NAME:-airflow-with-java}\n</code></pre>\n<p>More information you can look here: <a href=\"https://airflow.apache.org/docs/docker-stack/build.html\" rel=\"nofollow noreferrer\">https://airflow.apache.org/docs/docker-stack/build.html</a></p>\n"}],"owner":{"account_id":10583242,"reputation":51,"user_id":7796375,"display_name":"Venkat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5211,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1676378442,"creation_date":1619445515,"question_id":67268054,"body_markdown":"I am using this docker-compose.yaml file to run airflow on docker container.\r\n\r\nhttps://airflow.apache.org/docs/apache-airflow/2.0.2/docker-compose.yaml\r\n\r\nI need to install JRE in one of the containers. How do I add instruction to add java to the docker-compose.yaml file?\r\n","title":"How to install java in an airflow container using docker-compose.yaml","body":"<p>I am using this docker-compose.yaml file to run airflow on docker container.</p>\n<p><a href=\"https://airflow.apache.org/docs/apache-airflow/2.0.2/docker-compose.yaml\" rel=\"nofollow noreferrer\">https://airflow.apache.org/docs/apache-airflow/2.0.2/docker-compose.yaml</a></p>\n<p>I need to install JRE in one of the containers. How do I add instruction to add java to the docker-compose.yaml file?</p>\n"},{"tags":["java","jsonpath"],"answers":[{"tags":[],"owner":{"account_id":9641278,"reputation":1707,"user_id":7155432,"display_name":"VaibS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676377289,"creation_date":1676377289,"answer_id":75447758,"question_id":75447625,"body_markdown":"Assuming your POJO has different property names:\r\n\r\n    public class GitlabProject {\r\n        private int id;\r\n        @JsonProperty(&quot;http_url_to_repo&quot;)\r\n        private String httpUrlToRepo;\r\n        // Constructor, getters and setters omitted for brevity\r\n    }\r\n    \r\nUse ObjectMapper from the Jackson library to deserialize the JSON array into a list of GitlabProject objects:\r\n\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    List&lt;GitlabProject&gt; projects = objectMapper.readValue(json, new TypeReference&lt;List&lt;GitlabProject&gt;&gt;(){});\r\n\r\nYou can do similar thing using Google&#39;s GSON library.\r\n\r\n    List&lt;GitlabProject&gt; projects = new Gson().fromJson(json, new TypeToken&lt;List&lt;GitlabProject&gt;&gt;(){}.getType());\r\n\r\nNot that you&#39;ll need to use @SerializedName if property name is different in this case.\r\n\r\n","title":"Create Java objects more directly from JSON with JsonPath","body":"<p>Assuming your POJO has different property names:</p>\n<pre><code>public class GitlabProject {\n    private int id;\n    @JsonProperty(&quot;http_url_to_repo&quot;)\n    private String httpUrlToRepo;\n    // Constructor, getters and setters omitted for brevity\n}\n</code></pre>\n<p>Use ObjectMapper from the Jackson library to deserialize the JSON array into a list of GitlabProject objects:</p>\n<pre><code>ObjectMapper objectMapper = new ObjectMapper();\nList&lt;GitlabProject&gt; projects = objectMapper.readValue(json, new TypeReference&lt;List&lt;GitlabProject&gt;&gt;(){});\n</code></pre>\n<p>You can do similar thing using Google's GSON library.</p>\n<pre><code>List&lt;GitlabProject&gt; projects = new Gson().fromJson(json, new TypeToken&lt;List&lt;GitlabProject&gt;&gt;(){}.getType());\n</code></pre>\n<p>Not that you'll need to use @SerializedName if property name is different in this case.</p>\n"},{"tags":[],"owner":{"account_id":9858780,"reputation":491,"user_id":9982796,"display_name":"Abhijith Ravindran"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676378390,"creation_date":1676378390,"answer_id":75447976,"question_id":75447625,"body_markdown":"This can be done using JsonPath itself directly.\r\nJust define a custom mapping function.\r\n\r\n    List&lt;GitlabProject&gt; projects = JsonPath.parse(json)\r\n        .read(&quot;$[*]&quot;, list -&gt; list.stream()\r\n            .map(obj -&gt; {\r\n                String httpUrl = JsonPath.read(obj, &quot;$.http_url_to_repo&quot;);\r\n                int id = JsonPath.read(obj, &quot;$.id&quot;);\r\n                return new GitlabProject(httpUrl, id);\r\n            })\r\n            .collect(Collectors.toList())\r\n    );\r\n\r\n - &quot;$[*]&quot; - selects all elements in the JSON array \r\n - The lamda expression    inside &quot;read&quot; method extracts all \r\n   &quot;http_url_to_repo&quot; and &quot;id&quot; values    from JSON and creates\r\n   corresponding &quot;GitlabProject&quot;.\r\n - Finally the list    of objects are created using\r\n   &quot;Collectors.toList()&quot;","title":"Create Java objects more directly from JSON with JsonPath","body":"<p>This can be done using JsonPath itself directly.\nJust define a custom mapping function.</p>\n<pre><code>List&lt;GitlabProject&gt; projects = JsonPath.parse(json)\n    .read(&quot;$[*]&quot;, list -&gt; list.stream()\n        .map(obj -&gt; {\n            String httpUrl = JsonPath.read(obj, &quot;$.http_url_to_repo&quot;);\n            int id = JsonPath.read(obj, &quot;$.id&quot;);\n            return new GitlabProject(httpUrl, id);\n        })\n        .collect(Collectors.toList())\n);\n</code></pre>\n<ul>\n<li>&quot;$[*]&quot; - selects all elements in the JSON array</li>\n<li>The lamda expression    inside &quot;read&quot; method extracts all\n&quot;http_url_to_repo&quot; and &quot;id&quot; values    from JSON and creates\ncorresponding &quot;GitlabProject&quot;.</li>\n<li>Finally the list    of objects are created using\n&quot;Collectors.toList()&quot;</li>\n</ul>\n"}],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1676378390,"creation_date":1676376471,"question_id":75447625,"body_markdown":"I create Objects from JsonPath with\r\n\r\n````java\r\nList&lt;String&gt; httpList = JsonPath.read(json, &quot;$.*.http_url_to_repo&quot;);\r\nList&lt;String&gt; idList = JsonPath.read(json, &quot;$.*.id&quot;);\r\n\r\nfor (int i = 0; i &lt; httpList.size(); i++)\r\n{\r\n    back.add(new GitlabProject(httpList.get(i), idList.get(i)));\r\n}\r\n````\r\n\r\nIs there a more direct way to create the `GitlabProject` objects from the JSON?\r\n\r\nThe JSON looks like\r\n\r\n````json\r\n[\r\n    {\r\n        &quot;id&quot;: 63,\r\n        &quot;description&quot;: null,\r\n        &quot;name&quot;: &quot;conti-maven-plugin-mm&quot;,\r\n        &quot;name_with_namespace&quot;: &quot;ik / spu / other / conti-maven-plugin-mm&quot;,\r\n        &quot;path&quot;: &quot;conti-maven-plugin-mm&quot;,\r\n        &quot;path_with_namespace&quot;: &quot;ik/spu/other/conti-maven-plugin-mm&quot;,\r\n        &quot;created_at&quot;: &quot;2023-01-30T12:33:59.218Z&quot;,\r\n        &quot;default_branch&quot;: &quot;main&quot;,\r\n        &quot;tag_list&quot;: [],\r\n        &quot;topics&quot;: [],\r\n        &quot;ssh_url_to_repo&quot;: &quot;git@gitlab-test.continentale.loc:ik/spu/other/conti-maven-plugin-mm.git&quot;,\r\n        &quot;http_url_to_repo&quot;: &quot;https://gitlab-test.continentale.loc/ik/spu/other/conti-maven-plugin-mm.git&quot;,\r\n        &quot;web_url&quot;: &quot;https://gitlab-test.continentale.loc/ik/spu/other/conti-maven-plugin-mm&quot;,\r\n        ....\r\n````\r\n","title":"Create Java objects more directly from JSON with JsonPath","body":"<p>I create Objects from JsonPath with</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; httpList = JsonPath.read(json, &quot;$.*.http_url_to_repo&quot;);\nList&lt;String&gt; idList = JsonPath.read(json, &quot;$.*.id&quot;);\n\nfor (int i = 0; i &lt; httpList.size(); i++)\n{\n    back.add(new GitlabProject(httpList.get(i), idList.get(i)));\n}\n</code></pre>\n<p>Is there a more direct way to create the <code>GitlabProject</code> objects from the JSON?</p>\n<p>The JSON looks like</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n    {\n        &quot;id&quot;: 63,\n        &quot;description&quot;: null,\n        &quot;name&quot;: &quot;conti-maven-plugin-mm&quot;,\n        &quot;name_with_namespace&quot;: &quot;ik / spu / other / conti-maven-plugin-mm&quot;,\n        &quot;path&quot;: &quot;conti-maven-plugin-mm&quot;,\n        &quot;path_with_namespace&quot;: &quot;ik/spu/other/conti-maven-plugin-mm&quot;,\n        &quot;created_at&quot;: &quot;2023-01-30T12:33:59.218Z&quot;,\n        &quot;default_branch&quot;: &quot;main&quot;,\n        &quot;tag_list&quot;: [],\n        &quot;topics&quot;: [],\n        &quot;ssh_url_to_repo&quot;: &quot;git@gitlab-test.continentale.loc:ik/spu/other/conti-maven-plugin-mm.git&quot;,\n        &quot;http_url_to_repo&quot;: &quot;https://gitlab-test.continentale.loc/ik/spu/other/conti-maven-plugin-mm.git&quot;,\n        &quot;web_url&quot;: &quot;https://gitlab-test.continentale.loc/ik/spu/other/conti-maven-plugin-mm&quot;,\n        ....\n</code></pre>\n"},{"tags":["java","jaxb","unmarshalling","utf-16"],"comments":[{"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1676376114,"post_id":75447446,"comment_id":133120651,"body_markdown":"The fact that it works fine when you run it with UTF-8 means that the file is actually in UTF-8 and not UTF-16.","body":"The fact that it works fine when you run it with UTF-8 means that the file is actually in UTF-8 and not UTF-16."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1676378278,"creation_date":1676376044,"answer_id":75447546,"question_id":75447446,"body_markdown":"There&#39;s several things wrong here (ranging from slightly suboptimal, to potentially very wrong). In increasing order of likelihood of causing the problem:\r\n\r\n1. When constructing an `InputStreamReader`, there&#39;s no need to call `toString()` on the `Charset`, because that class has [a constructor that takes a `Charset`][1], so simply remove the `.toString()`:\r\n\r\n       Reader reader = new InputStreamReader(inputStream, StandardCharsets.UTF_16);\r\n\r\n    This is a tiny nitpick and has no effect on functionality.\r\n\r\n2. Don&#39;t construct a `Reader` at all! XML is a format that&#39;s self-describing when it comes to encoding: Valid XML files can be parsed without knowing the encoding up-front. So instead of creating a `Reader`, simply pass the `InputStream` directly into your XML-handling code. Delete the line that creates the `Reader` and change the next one to this:\r\n\r\n        MarkerDto markerDto = (MarkerDto) jaxbUnmarshaller.unmarshal(inputStream);\r\n\r\n    This *may or may not* fix your problem, depending on whether the input is well-formed.\r\n\r\n3. Your XML file might have `encoding=&quot;UTF-16&quot;` in the header and not actually be UTF-16 encoded. If that&#39;s the case, then it is malformed and a conforming parser will decline to parse it. Verify this by opening the file with the advanced text editor of your choice (I suggest Notepad++ on Windows, Linux users probably know what their preference is) and check if it shows &quot;UTF-16&quot; as encoding (and the content is readable).\r\n\r\n    &gt; If I run the same with UTF-8 everything works fine.\r\n\r\n    This line suggests that that&#39;s what&#39;s actually happening here: the XML file is mis-labeling itself. This needs to be fixed at the point where the XML file is created.\r\n\r\n    Notably, this demo code provides exactly the same `Content is not allowed in prolog.` exception message that is reported in the question:\r\n\r\n    ```\r\n    String xml = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-16\\&quot;?&gt;\\n&lt;foo /&gt;&quot;;\r\n    JAXBContext jaxbContext = JAXBContext.newInstance();\r\n    Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\r\n    InputStream inputStream = new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8));\r\n    jaxbUnmarshaller.unmarshal(inputStream);\r\n    ```\r\n\r\n    Note that the XML encoding attribute claims `UTF-16`, but the actual data handed to the XML parser is UTF-8 encoded.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/InputStreamReader.html#%3Cinit%3E(java.io.InputStream,java.nio.charset.Charset)","title":"Problems with JAXB and UTF-16 encoding","body":"<p>There's several things wrong here (ranging from slightly suboptimal, to potentially very wrong). In increasing order of likelihood of causing the problem:</p>\n<ol>\n<li><p>When constructing an <code>InputStreamReader</code>, there's no need to call <code>toString()</code> on the <code>Charset</code>, because that class has <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/InputStreamReader.html#%3Cinit%3E(java.io.InputStream,java.nio.charset.Charset)\" rel=\"nofollow noreferrer\">a constructor that takes a <code>Charset</code></a>, so simply remove the <code>.toString()</code>:</p>\n<pre><code>Reader reader = new InputStreamReader(inputStream, StandardCharsets.UTF_16);\n</code></pre>\n<p>This is a tiny nitpick and has no effect on functionality.</p>\n</li>\n<li><p>Don't construct a <code>Reader</code> at all! XML is a format that's self-describing when it comes to encoding: Valid XML files can be parsed without knowing the encoding up-front. So instead of creating a <code>Reader</code>, simply pass the <code>InputStream</code> directly into your XML-handling code. Delete the line that creates the <code>Reader</code> and change the next one to this:</p>\n<pre><code> MarkerDto markerDto = (MarkerDto) jaxbUnmarshaller.unmarshal(inputStream);\n</code></pre>\n<p>This <em>may or may not</em> fix your problem, depending on whether the input is well-formed.</p>\n</li>\n<li><p>Your XML file might have <code>encoding=&quot;UTF-16&quot;</code> in the header and not actually be UTF-16 encoded. If that's the case, then it is malformed and a conforming parser will decline to parse it. Verify this by opening the file with the advanced text editor of your choice (I suggest Notepad++ on Windows, Linux users probably know what their preference is) and check if it shows &quot;UTF-16&quot; as encoding (and the content is readable).</p>\n<blockquote>\n<p>If I run the same with UTF-8 everything works fine.</p>\n</blockquote>\n<p>This line suggests that that's what's actually happening here: the XML file is mis-labeling itself. This needs to be fixed at the point where the XML file is created.</p>\n<p>Notably, this demo code provides exactly the same <code>Content is not allowed in prolog.</code> exception message that is reported in the question:</p>\n<pre><code>String xml = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-16\\&quot;?&gt;\\n&lt;foo /&gt;&quot;;\nJAXBContext jaxbContext = JAXBContext.newInstance();\nUnmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\nInputStream inputStream = new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8));\njaxbUnmarshaller.unmarshal(inputStream);\n</code></pre>\n<p>Note that the XML encoding attribute claims <code>UTF-16</code>, but the actual data handed to the XML parser is UTF-8 encoded.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":27783008,"reputation":13,"user_id":21211017,"display_name":"ca2so"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":268,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75447546,"answer_count":1,"score":1,"last_activity_date":1676378278,"creation_date":1676375552,"question_id":75447446,"body_markdown":"Hi I have a small APP that reads content from an xml file and put it into a corresponding Java object.\r\n\r\nHere is the XML:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-16&quot;?&gt;\r\n&lt;Marker&gt;\r\n&lt;TimePosition&gt;2700&lt;/TimePosition&gt;\r\n&lt;SamplePosition&gt;119070&lt;/SamplePosition&gt;\r\n&lt;/Marker&gt;\r\n```\r\nhere is the corresponding Java code:\r\n\r\n```\r\nJAXBContext jaxbContext = JAXBContext.newInstance(MarkerDto.class);\r\nUnmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\r\nInputStream inputStream = new FileInputStream(&quot;D:/marker.xml&quot;);\r\nReader reader = new InputStreamReader(inputStream, StandardCharsets.UTF_16.toString());\r\nMarkerDto markerDto = (MarkerDto) jaxbUnmarshaller.unmarshal(reader);\r\n\r\n```\r\n\r\n\r\n\r\n\r\nIf I run this code I get an &quot;Content is not allowed in prolog.&quot; exception. If I run the same with UTF-8 everything works fine. Does anyone have a clue what might be the problem?","title":"Problems with JAXB and UTF-16 encoding","body":"<p>Hi I have a small APP that reads content from an xml file and put it into a corresponding Java object.</p>\n<p>Here is the XML:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-16&quot;?&gt;\n&lt;Marker&gt;\n&lt;TimePosition&gt;2700&lt;/TimePosition&gt;\n&lt;SamplePosition&gt;119070&lt;/SamplePosition&gt;\n&lt;/Marker&gt;\n</code></pre>\n<p>here is the corresponding Java code:</p>\n<pre><code>JAXBContext jaxbContext = JAXBContext.newInstance(MarkerDto.class);\nUnmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\nInputStream inputStream = new FileInputStream(&quot;D:/marker.xml&quot;);\nReader reader = new InputStreamReader(inputStream, StandardCharsets.UTF_16.toString());\nMarkerDto markerDto = (MarkerDto) jaxbUnmarshaller.unmarshal(reader);\n\n</code></pre>\n<p>If I run this code I get an &quot;Content is not allowed in prolog.&quot; exception. If I run the same with UTF-8 everything works fine. Does anyone have a clue what might be the problem?</p>\n"},{"tags":["java","exception","cdi"],"comments":[{"owner":{"account_id":3340852,"reputation":1493,"user_id":2807177,"display_name":"gmanjon"},"score":0,"creation_date":1638740430,"post_id":70235576,"comment_id":124162702,"body_markdown":"In which package are you creating this `OrderedObserver`?","body":"In which package are you creating this <code>OrderedObserver</code>?"},{"owner":{"account_id":12463020,"reputation":1,"user_id":9073992,"display_name":"Raphael Giusti"},"score":0,"creation_date":1638808617,"post_id":70235576,"comment_id":124180612,"body_markdown":"Hi, I solved this exception converting my project to Java 8. Thank you for answer me.","body":"Hi, I solved this exception converting my project to Java 8. Thank you for answer me."}],"owner":{"account_id":12463020,"reputation":1,"user_id":9073992,"display_name":"Raphael Giusti"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1638808705,"answer_count":0,"score":0,"last_activity_date":1676378061,"creation_date":1638716550,"question_id":70235576,"body_markdown":"I&#39;m trying to create a java container, but I&#39;m getting the below exception:\r\n\r\n```\r\nDec 05, 2021 11:33:36 AM org.jboss.weld.bootstrap.WeldStartup &lt;clinit&gt;\r\nINFO: WELD-000900: 3.1.0 (Final)\r\nException in thread &quot;main&quot; java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @5f8754e\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\r\n\tat java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199)\r\n\tat java.base/java.lang.reflect.Method.setAccessible(Method.java:193)\r\n\tat org.jboss.weld.util.bytecode.ClassFileUtils$1.run(ClassFileUtils.java:88)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\r\n\tat org.jboss.weld.util.bytecode.ClassFileUtils.makeClassLoaderMethodsAccessible(ClassFileUtils.java:64)\r\n\tat org.jboss.weld.bootstrap.WeldStartup.startContainer(WeldStartup.java:220)\r\n\tat org.jboss.weld.bootstrap.WeldBootstrap.startContainer(WeldBootstrap.java:72)\r\n\tat org.jboss.weld.environment.se.Weld.initialize(Weld.java:797)\r\n\tat org.jboss.weld.environment.se.Weld.initialize(Weld.java:176)\r\n\tat user_pack.OrderedObserver.main(OrderedObserver.java:13)***\r\n```\r\n\r\nMy code that is generating the exception:\r\n\r\n\r\n    import javax.annotation.Priority;\r\n    import javax.enterprise.event.Observes;\r\n    import javax.enterprise.inject.se.SeContainer;\r\n    import javax.enterprise.inject.se.SeContainerInitializer;\r\n    import javax.interceptor.Interceptor;\r\n    \r\n    public class OrderedObserver {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\ttry (SeContainer container = SeContainerInitializer.newInstance().initialize()) {\r\n    \t\t\tcontainer.getBeanManager().fireEvent(new MyEvent(&quot;event: &quot; + System.currentTimeMillis()));\r\n    \t\t }\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic void thisEventBefore(\r\n    \t\t@Observes @Priority(Interceptor.Priority.APPLICATION - 200) \r\n    \t\tMyEvent event) {\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;thisEventBefore: &quot; + event.getValue());\r\n    \t}\r\n    \t\r\n    \tpublic void thisEventAfter(\r\n    \t\t@Observes @Priority(Interceptor.Priority.APPLICATION + 200) \r\n    \t\tMyEvent event) {\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;thisEventAfter: &quot; + event.getValue());\r\n    \t}\r\n    \t\r\n    \t\r\n    }\r\n\r\nJava version:\r\nopenjdk version &quot;17.0.1&quot; 2021-10-19\r\nOpenJDK Runtime Environment 21.9 (build 17.0.1+12)\r\nOpenJDK 64-Bit Server VM 21.9 (build 17.0.1+12, mixed mode, sharing)\r\n\r\n","title":"InaccessibleObjectException when I run java container","body":"<p>I'm trying to create a java container, but I'm getting the below exception:</p>\n<pre><code>Dec 05, 2021 11:33:36 AM org.jboss.weld.bootstrap.WeldStartup &lt;clinit&gt;\nINFO: WELD-000900: 3.1.0 (Final)\nException in thread &quot;main&quot; java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @5f8754e\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\n    at java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199)\n    at java.base/java.lang.reflect.Method.setAccessible(Method.java:193)\n    at org.jboss.weld.util.bytecode.ClassFileUtils$1.run(ClassFileUtils.java:88)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\n    at org.jboss.weld.util.bytecode.ClassFileUtils.makeClassLoaderMethodsAccessible(ClassFileUtils.java:64)\n    at org.jboss.weld.bootstrap.WeldStartup.startContainer(WeldStartup.java:220)\n    at org.jboss.weld.bootstrap.WeldBootstrap.startContainer(WeldBootstrap.java:72)\n    at org.jboss.weld.environment.se.Weld.initialize(Weld.java:797)\n    at org.jboss.weld.environment.se.Weld.initialize(Weld.java:176)\n    at user_pack.OrderedObserver.main(OrderedObserver.java:13)***\n</code></pre>\n<p>My code that is generating the exception:</p>\n<pre><code>import javax.annotation.Priority;\nimport javax.enterprise.event.Observes;\nimport javax.enterprise.inject.se.SeContainer;\nimport javax.enterprise.inject.se.SeContainerInitializer;\nimport javax.interceptor.Interceptor;\n\npublic class OrderedObserver {\n\n    public static void main(String[] args) {\n\n        try (SeContainer container = SeContainerInitializer.newInstance().initialize()) {\n            container.getBeanManager().fireEvent(new MyEvent(&quot;event: &quot; + System.currentTimeMillis()));\n         }\n        \n    }\n    \n    public void thisEventBefore(\n        @Observes @Priority(Interceptor.Priority.APPLICATION - 200) \n        MyEvent event) {\n        \n        System.out.println(&quot;thisEventBefore: &quot; + event.getValue());\n    }\n    \n    public void thisEventAfter(\n        @Observes @Priority(Interceptor.Priority.APPLICATION + 200) \n        MyEvent event) {\n        \n        System.out.println(&quot;thisEventAfter: &quot; + event.getValue());\n    }\n    \n    \n}\n</code></pre>\n<p>Java version:\nopenjdk version &quot;17.0.1&quot; 2021-10-19\nOpenJDK Runtime Environment 21.9 (build 17.0.1+12)\nOpenJDK 64-Bit Server VM 21.9 (build 17.0.1+12, mixed mode, sharing)</p>\n"},{"tags":["java","tomcat","jax-rs"],"answers":[{"tags":[],"owner":{"account_id":26179080,"reputation":1,"user_id":19862722,"display_name":"MishaBucha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662125271,"creation_date":1662125271,"answer_id":73583336,"question_id":73541646,"body_markdown":"The answer was simple enough, I put it in web.xml and it worked. Before that I didn&#39;t touch web.xml because I had WebServlet annotation working, which meant web.xml version &gt;3.0, but it turns out not, after adding this, it all worked\r\n\r\n     &lt;servlet&gt;\r\n       &lt;servlet-name&gt;javax.ws.rs.core.Application&lt;/servlet-name&gt;\r\n     &lt;/servlet&gt;\r\n       &lt;servlet-mapping&gt;\r\n         &lt;servlet-name&gt;javax.ws.rs.core.Application&lt;/servlet-name&gt;\r\n         &lt;url-pattern&gt;/api/*&lt;/url-pattern&gt;\r\n       &lt;/servlet-mapping&gt;\r\n    &lt;/web-app&gt;","title":"Jakarta http 404","body":"<p>The answer was simple enough, I put it in web.xml and it worked. Before that I didn't touch web.xml because I had WebServlet annotation working, which meant web.xml version &gt;3.0, but it turns out not, after adding this, it all worked</p>\n<pre><code> &lt;servlet&gt;\n   &lt;servlet-name&gt;javax.ws.rs.core.Application&lt;/servlet-name&gt;\n &lt;/servlet&gt;\n   &lt;servlet-mapping&gt;\n     &lt;servlet-name&gt;javax.ws.rs.core.Application&lt;/servlet-name&gt;\n     &lt;url-pattern&gt;/api/*&lt;/url-pattern&gt;\n   &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n"}],"owner":{"account_id":26179080,"reputation":1,"user_id":19862722,"display_name":"MishaBucha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73583336,"answer_count":1,"score":0,"last_activity_date":1676377980,"creation_date":1661858571,"question_id":73541646,"body_markdown":"I have a problem in the simplest code here: \r\n\r\n    import jakarta.ws.rs.GET;\r\n    import jakarta.ws.rs.Path;\r\n\r\n    @Path(&quot;/test&quot;)\r\n    public class HelloResource {\r\n\r\n        @GET\r\n        public String sayHello(){\r\n           return &quot;hello&quot;;\r\n        }\r\n     }\r\n\r\nApplication: \r\n\r\n    import jakarta.ws.rs.ApplicationPath;\r\n    import jakarta.ws.rs.core.Application;\r\n\r\n    @ApplicationPath(&quot;/api&quot;)\r\n    public class MyApplication extends Application {\r\n\r\n    }\r\n\r\npom: \r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.jakartaee-web-api&lt;/artifactId&gt;\r\n            &lt;version&gt;9.0.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n      \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;version&gt;42.5.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n            &lt;version&gt;1.5.2.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n            &lt;version&gt;6.1.2.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;4.13.2&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n\r\nI click on the link: http://localhost:8080/name_war/api/test\r\n\r\nAnd this give to me: \r\n\r\nHttp staus 404 : The requested resource [/javaEE_1_0_SNAPSHOT_war/api/test] is not available\r\n","title":"Jakarta http 404","body":"<p>I have a problem in the simplest code here:</p>\n<pre><code>import jakarta.ws.rs.GET;\nimport jakarta.ws.rs.Path;\n\n@Path(&quot;/test&quot;)\npublic class HelloResource {\n\n    @GET\n    public String sayHello(){\n       return &quot;hello&quot;;\n    }\n }\n</code></pre>\n<p>Application:</p>\n<pre><code>import jakarta.ws.rs.ApplicationPath;\nimport jakarta.ws.rs.core.Application;\n\n@ApplicationPath(&quot;/api&quot;)\npublic class MyApplication extends Application {\n\n}\n</code></pre>\n<p>pom:</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\n        &lt;artifactId&gt;jakarta.jakartaee-web-api&lt;/artifactId&gt;\n        &lt;version&gt;9.0.0&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n  \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;version&gt;42.5.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n        &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n        &lt;version&gt;1.5.2.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;6.1.2.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.13.2&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n</code></pre>\n<p>I click on the link: http://localhost:8080/name_war/api/test</p>\n<p>And this give to me:</p>\n<p>Http staus 404 : The requested resource [/javaEE_1_0_SNAPSHOT_war/api/test] is not available</p>\n"},{"tags":["java","selenium-webdriver"],"answers":[{"tags":[],"owner":{"account_id":11849212,"reputation":23,"user_id":8670990,"display_name":"Th&#225;i L&#234;"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1676377517,"creation_date":1676377517,"answer_id":75447798,"question_id":75447043,"body_markdown":"you can get the text and parse them all in pattern","title":"Getting text from a list of Web Elements is slow","body":"<p>you can get the text and parse them all in pattern</p>\n"}],"owner":{"account_id":448713,"reputation":304,"user_id":843075,"accept_rate":17,"display_name":"fdama"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676377919,"creation_date":1676373430,"question_id":75447043,"body_markdown":"I am scraping data from a web table and I have some code to read the text from each of the web elements(rows) which are in a list and then add this text to another list(columns) to be sent to a method to write to excel. The process of reading the web elements (approx 200 rows) and writing the data to the new list is very slow. Is there a quicker way? Or is this to be expected?\r\n\r\nHere is my code: \r\n\r\n    package mypackage;\r\n    \r\n    import java.io.IOException;\r\n    import java.time.Duration;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    \r\n    import com.seleniumpractice.utilities.XLUtils;\r\n    \r\n    import io.github.bonigarcia.wdm.WebDriverManager;\r\n    \r\n    public class CovidWebTable {\r\n    \tstatic WebDriver driver;\r\n    \tstatic XLUtils xl;\r\n    \tstatic List&lt;WebElement&gt; header;\r\n    \tstatic List&lt;WebElement&gt; rows;\r\n    \tstatic List&lt;ArrayList&lt;String&gt;&gt;rowsXL;\r\n    \r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \t\tWebDriverManager.chromedriver().setup();\r\n    \t\tdriver = new ChromeDriver();\r\n    \t\tdriver.get(&quot;https://www.worldometers.info/coronavirus&quot;);\r\n    \t\tdriver.manage().window().maximize();\r\n    \t\tdriver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\r\n    \t\t\r\n    \t\tWebElement table = driver.findElement(By.xpath(&quot;//table[@id=&#39;main_table_countries_today&#39;]&quot;));\r\n    \t\trows = table.findElements(By.xpath(&quot;.//tr[@role=&#39;row&#39;]&quot;));\r\n    \t\tSystem.out.println(&quot;Total rows: &quot;+rows.size());\r\n    \t\t\r\n    \t\txl = new XLUtils(&quot;.\\\\datafiles\\\\covid.xls&quot;);\r\n    \t\t//xl.setCellData(null, rows, rows, null);\r\n    \t\t\r\n    \t\trowsXL = new ArrayList&lt;ArrayList&lt;String&gt;&gt;();\r\n    \t\t\r\n    \t\t//Add header\r\n    \t\theader = table.findElements(By.xpath(&quot;.//thead//th&quot;));\r\n    \t\tSystem.out.println(&quot;Header cols: &quot;+ header.size());\r\n    \t\t\r\n    \t\tArrayList&lt;String&gt; headerXL = new ArrayList&lt;String&gt;();\r\n    \t\t\r\n    \t\tfor(int col=1; col&lt;header.size()-1; col++) {\r\n    \t\t\t//xl.setCellData(&quot;Covid Data&quot;, 0, col-1, header.get(col).getText());\r\n    \t\t\theaderXL.add(header.get(col).getText());\r\n    \t\t}\r\n    \t\t\r\n    \t\trowsXL.add(headerXL);\r\n    \t\t\r\n    \t\tint xlRow = 1;\r\n    \t\tint skippedRows = 0;\r\n    \t\t\t\t\r\n    \t\tfor(int r=1; r&lt;rows.size(); r++) {\r\n    \t\t\t\r\n    \t\t\tString a = rows.get(r).getText();\r\n    \t\t\t\r\n    \t\t\t//skip empty rows\r\n    \t\t\tif(rows.get(r).getText().equals(&quot;&quot;)) {\r\n    \t\t\t\tskippedRows++;\r\n    \t\t\t\tcontinue;\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println(&quot;Reading row &quot;+r);\t\r\n    \t\t\t\r\n    \t\tArrayList&lt;String&gt; cols = new ArrayList&lt;String&gt;();\r\n    \t\t\t\r\n    \t\t\tfor(int c=1; c&lt;header.size(); c++) {\r\n    \t\t\t\tString data = rows.get(r).findElement(By.xpath(&quot;.//td[&quot;+(c+1)+&quot;]&quot;)).getText();\r\n    \t\t\t\t//xl.setCellData(&quot;Covid Data&quot;, xlRow, c-1, rows.get(r).findElement(By.xpath(&quot;.//td[&quot;+(c+1)+&quot;]&quot;)).getText());\r\n    \t\t\t\tcols.add(data);\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \t\t\trowsXL.add(cols);\r\n    \t\t\txlRow++;\r\n    \t\t\t\r\n    \t\t}\r\n    \t\txl.setCellDataFromList(rowsXL, &quot;Orders&quot;);\r\n    \t\tSystem.out.println(&quot;Scraped Rows: &quot;+ rowsXL.size());\r\n    \t\tSystem.out.println(&quot;Skipped Rows: &quot;+skippedRows);\r\n    \t\tSystem.out.println(&quot;Complete.&quot;);\r\n    \t\t\r\n    \t\tdriver.close();\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \r\n    \t\t}\r\n    \r\n    }\r\n\r\n","title":"Getting text from a list of Web Elements is slow","body":"<p>I am scraping data from a web table and I have some code to read the text from each of the web elements(rows) which are in a list and then add this text to another list(columns) to be sent to a method to write to excel. The process of reading the web elements (approx 200 rows) and writing the data to the new list is very slow. Is there a quicker way? Or is this to be expected?</p>\n<p>Here is my code:</p>\n<pre><code>package mypackage;\n\nimport java.io.IOException;\nimport java.time.Duration;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\n\nimport com.seleniumpractice.utilities.XLUtils;\n\nimport io.github.bonigarcia.wdm.WebDriverManager;\n\npublic class CovidWebTable {\n    static WebDriver driver;\n    static XLUtils xl;\n    static List&lt;WebElement&gt; header;\n    static List&lt;WebElement&gt; rows;\n    static List&lt;ArrayList&lt;String&gt;&gt;rowsXL;\n\n    public static void main(String[] args) throws IOException {\n        WebDriverManager.chromedriver().setup();\n        driver = new ChromeDriver();\n        driver.get(&quot;https://www.worldometers.info/coronavirus&quot;);\n        driver.manage().window().maximize();\n        driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\n        \n        WebElement table = driver.findElement(By.xpath(&quot;//table[@id='main_table_countries_today']&quot;));\n        rows = table.findElements(By.xpath(&quot;.//tr[@role='row']&quot;));\n        System.out.println(&quot;Total rows: &quot;+rows.size());\n        \n        xl = new XLUtils(&quot;.\\\\datafiles\\\\covid.xls&quot;);\n        //xl.setCellData(null, rows, rows, null);\n        \n        rowsXL = new ArrayList&lt;ArrayList&lt;String&gt;&gt;();\n        \n        //Add header\n        header = table.findElements(By.xpath(&quot;.//thead//th&quot;));\n        System.out.println(&quot;Header cols: &quot;+ header.size());\n        \n        ArrayList&lt;String&gt; headerXL = new ArrayList&lt;String&gt;();\n        \n        for(int col=1; col&lt;header.size()-1; col++) {\n            //xl.setCellData(&quot;Covid Data&quot;, 0, col-1, header.get(col).getText());\n            headerXL.add(header.get(col).getText());\n        }\n        \n        rowsXL.add(headerXL);\n        \n        int xlRow = 1;\n        int skippedRows = 0;\n                \n        for(int r=1; r&lt;rows.size(); r++) {\n            \n            String a = rows.get(r).getText();\n            \n            //skip empty rows\n            if(rows.get(r).getText().equals(&quot;&quot;)) {\n                skippedRows++;\n                continue;\n            }\n            System.out.println(&quot;Reading row &quot;+r);   \n            \n        ArrayList&lt;String&gt; cols = new ArrayList&lt;String&gt;();\n            \n            for(int c=1; c&lt;header.size(); c++) {\n                String data = rows.get(r).findElement(By.xpath(&quot;.//td[&quot;+(c+1)+&quot;]&quot;)).getText();\n                //xl.setCellData(&quot;Covid Data&quot;, xlRow, c-1, rows.get(r).findElement(By.xpath(&quot;.//td[&quot;+(c+1)+&quot;]&quot;)).getText());\n                cols.add(data);\n                \n            }\n            rowsXL.add(cols);\n            xlRow++;\n            \n        }\n        xl.setCellDataFromList(rowsXL, &quot;Orders&quot;);\n        System.out.println(&quot;Scraped Rows: &quot;+ rowsXL.size());\n        System.out.println(&quot;Skipped Rows: &quot;+skippedRows);\n        System.out.println(&quot;Complete.&quot;);\n        \n        driver.close();\n        \n        \n        \n        \n\n        }\n\n}\n</code></pre>\n"},{"tags":["java","reflection","dependencies"],"comments":[{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1676297739,"post_id":75436937,"comment_id":133103312,"body_markdown":"Are you thinking of compiling with both libraries on the classpath, but then removing one of them from the final deployed result during packaging/deployment? If yes, may I ask why?","body":"Are you thinking of compiling with both libraries on the classpath, but then removing one of them from the final deployed result during packaging/deployment? If yes, may I ask why?"},{"owner":{"account_id":21554207,"reputation":93,"user_id":15889782,"display_name":"underflow"},"score":0,"creation_date":1676297959,"post_id":75436937,"comment_id":133103395,"body_markdown":"It&#39;s a framework, and the user starts the boostrap process specifying which backend library should the framework use. As the libraries are pretty heavy, it would be beneficial to avoid shading unused ones into the jar. Additionally, it would protect against accidental load of classes from another library as their static initialization is currently known to be quite heavy on ClassLoader.","body":"It&#39;s a framework, and the user starts the boostrap process specifying which backend library should the framework use. As the libraries are pretty heavy, it would be beneficial to avoid shading unused ones into the jar. Additionally, it would protect against accidental load of classes from another library as their static initialization is currently known to be quite heavy on ClassLoader."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1676377755,"creation_date":1676298153,"answer_id":75437119,"question_id":75436937,"body_markdown":"&gt; In Java, what&#39;s the proper way of using an optional dependency without `ClassNotFoundError`?\r\n\r\nThe simple way is to use `Class.forName`.\r\n\r\n&gt; I would also like to avoid loading backends using `Class.forName`.\r\n\r\nErm ... OK.\r\n\r\n&gt; Can you help me understand if any of these will lead to a `ClassNotFoundError` for unshaded library and which will not?\r\n\r\nIf I understand what you are proposing correctly, none of them will work.\r\n\r\n&gt;  Leaving an unused class field, of type from this library\r\n\r\nLoading the class that defines that field will trigger&lt;sup&gt;1&lt;/sup&gt; loading the library that defines the type of the field.\r\n\r\n&gt; Leaving an unused method, with arguments or return from this library\r\n\r\nLoading the class that defines that method will trigger&lt;sup&gt;1&lt;/sup&gt; loading the library that defines the argument or return type.\r\n\r\n&gt; Referencing this library in a backend class that will only be loaded conditionally like:\r\n&gt;\r\n&gt;     backend = isNewBackend ? new FancyBackend() : new OldBackend()\r\n\r\nThe code that does that calculation needs to be defined in a class.  To running that code that is liable to trigger&lt;sup&gt;1&lt;/sup&gt; loading *both* the `FancyBackend` and `OldBackend` classes to verify the code.\r\n\r\n----------------------------\r\n\r\nIf you wanted to avoid explicit `Class.forName` calls, you could potentially implement your optional dependency as a custom Service Provider Interface (SPI).  That gives you additional flexibility, but it is *more complicated* than simply using `Class.forName`.\r\n\r\nHere are some references for SPIs:\r\n\r\n  - The [javadocs for `java.utils.ServiceLoader`][1].\r\n  - [Creating Extensible Applications](https://docs.oracle.com/javase/tutorial/ext/basics/spi.html) from the Oracle Java™ Tutorials.  (This tutorial is outdated.)\r\n  - [Java Service Provider Interface](https://www.baeldung.com/java-spi) from Baeldung.\r\n\r\n----------------------------\r\n\r\n&lt;sup&gt;1 - Per https://stackoverflow.com/q/41965457/2711488 if the JVM implements lazy class loading, loading may not be triggered by mentioning a class in a method or field signature.  However, lazy loading is implementation dependent and (AFAIK) not specified.  So relying on the JVM to do it will make your application platform dependent.&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ServiceLoader.html","title":"In Java, what&#39;s the proper way of using an optional dependency without ClassNotFoundError?","body":"<blockquote>\n<p>In Java, what's the proper way of using an optional dependency without <code>ClassNotFoundError</code>?</p>\n</blockquote>\n<p>The simple way is to use <code>Class.forName</code>.</p>\n<blockquote>\n<p>I would also like to avoid loading backends using <code>Class.forName</code>.</p>\n</blockquote>\n<p>Erm ... OK.</p>\n<blockquote>\n<p>Can you help me understand if any of these will lead to a <code>ClassNotFoundError</code> for unshaded library and which will not?</p>\n</blockquote>\n<p>If I understand what you are proposing correctly, none of them will work.</p>\n<blockquote>\n<p>Leaving an unused class field, of type from this library</p>\n</blockquote>\n<p>Loading the class that defines that field will trigger<sup>1</sup> loading the library that defines the type of the field.</p>\n<blockquote>\n<p>Leaving an unused method, with arguments or return from this library</p>\n</blockquote>\n<p>Loading the class that defines that method will trigger<sup>1</sup> loading the library that defines the argument or return type.</p>\n<blockquote>\n<p>Referencing this library in a backend class that will only be loaded conditionally like:</p>\n<pre><code>backend = isNewBackend ? new FancyBackend() : new OldBackend()\n</code></pre>\n</blockquote>\n<p>The code that does that calculation needs to be defined in a class.  To running that code that is liable to trigger<sup>1</sup> loading <em>both</em> the <code>FancyBackend</code> and <code>OldBackend</code> classes to verify the code.</p>\n<hr />\n<p>If you wanted to avoid explicit <code>Class.forName</code> calls, you could potentially implement your optional dependency as a custom Service Provider Interface (SPI).  That gives you additional flexibility, but it is <em>more complicated</em> than simply using <code>Class.forName</code>.</p>\n<p>Here are some references for SPIs:</p>\n<ul>\n<li>The <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ServiceLoader.html\" rel=\"nofollow noreferrer\">javadocs for <code>java.utils.ServiceLoader</code></a>.</li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/ext/basics/spi.html\" rel=\"nofollow noreferrer\">Creating Extensible Applications</a> from the Oracle Java™ Tutorials.  (This tutorial is outdated.)</li>\n<li><a href=\"https://www.baeldung.com/java-spi\" rel=\"nofollow noreferrer\">Java Service Provider Interface</a> from Baeldung.</li>\n</ul>\n<hr />\n<p><sup>1 - Per <a href=\"https://stackoverflow.com/q/41965457/2711488\">Does the JVM throw if an unused class is absent?</a> if the JVM implements lazy class loading, loading may not be triggered by mentioning a class in a method or field signature.  However, lazy loading is implementation dependent and (AFAIK) not specified.  So relying on the JVM to do it will make your application platform dependent.</sup></p>\n"}],"owner":{"account_id":21554207,"reputation":93,"user_id":15889782,"display_name":"underflow"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676377755,"creation_date":1676297207,"question_id":75436937,"body_markdown":"I would like my projekt to switch at startup between backend libraries, with option to not shade both of them into resulting Jar, while having full compile-them visibility of both.\r\nI would also like to avoid loading backends using Class.forName.  \r\n  \r\nCan you help me understand if any of these will lead to a ClassNotFoundError for unshaded library and which will not?\r\n\r\n 1. Leaving an unused class field, of type from this library\r\n 2. Leaving an unused method, with arguments or return from this library\r\n 3. Referencing this library in a backend class that will only be loaded conditionally like `backend = isNewBackend ? new FancyBackend() : new OldBackend()`\r\n\r\nIf all of these result in error, is there an easier strategy for this?","title":"In Java, what&#39;s the proper way of using an optional dependency without ClassNotFoundError?","body":"<p>I would like my projekt to switch at startup between backend libraries, with option to not shade both of them into resulting Jar, while having full compile-them visibility of both.\nI would also like to avoid loading backends using Class.forName.</p>\n<p>Can you help me understand if any of these will lead to a ClassNotFoundError for unshaded library and which will not?</p>\n<ol>\n<li>Leaving an unused class field, of type from this library</li>\n<li>Leaving an unused method, with arguments or return from this library</li>\n<li>Referencing this library in a backend class that will only be loaded conditionally like <code>backend = isNewBackend ? new FancyBackend() : new OldBackend()</code></li>\n</ol>\n<p>If all of these result in error, is there an easier strategy for this?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":14710657,"reputation":371,"user_id":10624147,"display_name":"gonzaloan"},"score":0,"creation_date":1543950891,"post_id":53619895,"comment_id":94100192,"body_markdown":"Possible duplicate of [Display PDF within web browser](https://stackoverflow.com/questions/4853898/display-pdf-within-web-browser)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/4853898/display-pdf-within-web-browser\">Display PDF within web browser</a>"}],"answers":[{"tags":[],"owner":{"account_id":265988,"reputation":13467,"user_id":553308,"display_name":"Andrew T Finnell"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1543950874,"creation_date":1543950874,"answer_id":53619934,"question_id":53619895,"body_markdown":"Change your headers to this:\r\n\r\n    Content-Type: application/pdf\r\n    Content-Disposition: inline; filename=&quot;filename.pdf&quot;\r\n\r\nSetting the Content-Type to `application/octet-stream` will FORCE it to always download.","title":"SpringBoot - display PDF-file in browser instead of downloading","body":"<p>Change your headers to this:</p>\n\n<pre><code>Content-Type: application/pdf\nContent-Disposition: inline; filename=\"filename.pdf\"\n</code></pre>\n\n<p>Setting the Content-Type to <code>application/octet-stream</code> will FORCE it to always download.</p>\n"},{"tags":[],"owner":{"account_id":14692591,"reputation":2143,"user_id":10610826,"display_name":"Mykhailo Moskura"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543950898,"creation_date":1543950898,"answer_id":53619936,"question_id":53619895,"body_markdown":"Use Content-Type `application/pdf` instead of `application/octet-stream`","title":"SpringBoot - display PDF-file in browser instead of downloading","body":"<p>Use Content-Type <code>application/pdf</code> instead of <code>application/octet-stream</code></p>\n"},{"tags":[],"owner":{"account_id":22585429,"reputation":286,"user_id":16769477,"display_name":"Jay Yadav"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1676377305,"creation_date":1675696669,"answer_id":75363184,"question_id":53619895,"body_markdown":"Combining your code &amp; Andrew answer above this modified code works fine !!\r\n\r\n```\r\n@RequestMapping(value = &quot;/download&quot; , method=RequestMethod.GET)\r\n\t public ResponseEntity&lt;InputStreamResource&gt; downloadPdf() throws IOException {\r\n\t     ClassPathResource pdfFile = new ClassPathResource(&quot;files/Locations.pdf&quot;);\r\n\t     return ResponseEntity\r\n\t             .ok()\r\n\t             .contentLength(pdfFile.contentLength())\r\n\t             .header(&quot;Content-Disposition&quot;, &quot;inline; filename=\\&quot;&quot; + pdfFile.getFilename() + &quot;\\&quot;&quot;)\r\n\t             .contentType(\r\n\t                     MediaType.parseMediaType(&quot;application/pdf&quot;))\r\n\t             .body(new InputStreamResource(pdfFile.getInputStream()));\r\n\r\n\t }\r\n```","title":"SpringBoot - display PDF-file in browser instead of downloading","body":"<p>Combining your code &amp; Andrew answer above this modified code works fine !!</p>\n<pre><code>@RequestMapping(value = &quot;/download&quot; , method=RequestMethod.GET)\n     public ResponseEntity&lt;InputStreamResource&gt; downloadPdf() throws IOException {\n         ClassPathResource pdfFile = new ClassPathResource(&quot;files/Locations.pdf&quot;);\n         return ResponseEntity\n                 .ok()\n                 .contentLength(pdfFile.contentLength())\n                 .header(&quot;Content-Disposition&quot;, &quot;inline; filename=\\&quot;&quot; + pdfFile.getFilename() + &quot;\\&quot;&quot;)\n                 .contentType(\n                         MediaType.parseMediaType(&quot;application/pdf&quot;))\n                 .body(new InputStreamResource(pdfFile.getInputStream()));\n\n     }\n</code></pre>\n"}],"owner":{"account_id":12169164,"reputation":5,"user_id":8884445,"display_name":"Shashank Ranjan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4793,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1676377305,"creation_date":1543950713,"question_id":53619895,"body_markdown":"i am trying to display a pdf in my browser with spring. my problem is that the browser downloads the file instead of displaying it. this is my code:\r\n\r\n     @RequestMapping(value = &quot;/download&quot; , method=RequestMethod.GET , produces = &quot;application/pdf&quot;)\r\n\tpublic ResponseEntity&lt;InputStreamResource&gt; downloadPdf() throws IOException {\r\n\t\tClassPathResource pdfFile = new ClassPathResource(&quot;TMOBILE.pdf&quot;);\r\n\t\treturn ResponseEntity\r\n\t            .ok()\r\n\t            .contentLength(pdfFile.contentLength())\r\n\t            .contentType(\r\n\t                    MediaType.parseMediaType(&quot;application/octet-stream&quot;))\r\n\t            .body(new InputStreamResource(pdfFile.getInputStream()));\r\n\t\t\r\n\t}\r\n\r\n\r\n\r\ni am looking forward to your answers! thanks","title":"SpringBoot - display PDF-file in browser instead of downloading","body":"<p>i am trying to display a pdf in my browser with spring. my problem is that the browser downloads the file instead of displaying it. this is my code:</p>\n\n<pre><code> @RequestMapping(value = \"/download\" , method=RequestMethod.GET , produces = \"application/pdf\")\npublic ResponseEntity&lt;InputStreamResource&gt; downloadPdf() throws IOException {\n    ClassPathResource pdfFile = new ClassPathResource(\"TMOBILE.pdf\");\n    return ResponseEntity\n            .ok()\n            .contentLength(pdfFile.contentLength())\n            .contentType(\n                    MediaType.parseMediaType(\"application/octet-stream\"))\n            .body(new InputStreamResource(pdfFile.getInputStream()));\n\n}\n</code></pre>\n\n<p>i am looking forward to your answers! thanks</p>\n"},{"tags":["java","swing","jframe","jtable"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1643926666,"post_id":70978745,"comment_id":125476562,"body_markdown":"1) add the scroll pane to the CENTER of the BorderLayout. 2) You need to define the resize behaviour of the JTable. Check out the `setAutoResizeMode(...)` method. *So how can I make it so that the cells of the table are always squares,* - only the width will be resized. There is no automatic resizing of heights.","body":"1) add the scroll pane to the CENTER of the BorderLayout. 2) You need to define the resize behaviour of the JTable. Check out the <code>setAutoResizeMode(...)</code> method. <i>So how can I make it so that the cells of the table are always squares,</i> - only the width will be resized. There is no automatic resizing of heights."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1643927170,"post_id":70978745,"comment_id":125476706,"body_markdown":"I don&#39;t think a `JTable` is the right component for this. Perhaps instead look to this question about the [layout of a chess board](https://stackoverflow.com/q/21142686/418556). It includes answers from both myself and @camickr, and discusses (more camickr) the pitfalls of layout when the available space cannot accommodate same size cells.","body":"I don&#39;t think a <code>JTable</code> is the right component for this. Perhaps instead look to this question about the <a href=\"https://stackoverflow.com/q/21142686/418556\">layout of a chess board</a>. It includes answers from both myself and @camickr, and discusses (more camickr) the pitfalls of layout when the available space cannot accommodate same size cells."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643926746,"creation_date":1643925534,"answer_id":70978868,"question_id":70978745,"body_markdown":"You did not set any LayoutManager. The default is not a FlowLayout but at least not null:\r\n\r\n*The default content pane will have a BorderLayout manager set on it.*\r\n([Java 17 API][1])\r\n\r\nThis would mean by resizing the window you would more have to fight with the scrollpane&#39;s resizing. What happens if you use \r\n\r\n    container.add(new JScrollPane(table), BorderLayout.CENTER);\r\n\r\nThat should let the scrollpane grow and shrink with the frame, and the amount of rows/columns inside the table might vary. This might also get impacted by [JTable.setAutoResizeMode()][2].\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JFrame.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JTable.html#setAutoResizeMode(int)","title":"Why doesn&#39;t frame.pack() work with a JTable?","body":"<p>You did not set any LayoutManager. The default is not a FlowLayout but at least not null:</p>\n<p><em>The default content pane will have a BorderLayout manager set on it.</em>\n(<a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JFrame.html\" rel=\"nofollow noreferrer\">Java 17 API</a>)</p>\n<p>This would mean by resizing the window you would more have to fight with the scrollpane's resizing. What happens if you use</p>\n<pre><code>container.add(new JScrollPane(table), BorderLayout.CENTER);\n</code></pre>\n<p>That should let the scrollpane grow and shrink with the frame, and the amount of rows/columns inside the table might vary. This might also get impacted by <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JTable.html#setAutoResizeMode(int)\" rel=\"nofollow noreferrer\">JTable.setAutoResizeMode()</a>.</p>\n"},{"tags":[],"owner":{"account_id":23863113,"reputation":21907,"user_id":17865804,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643997422,"creation_date":1643997422,"answer_id":70990829,"question_id":70978745,"body_markdown":"Option 1\r\n--------\r\n\r\nYou haven&#39;t really mentioned how you are about to use this table (what data will be held and how the user is expected to interact with); however, it sounds like a use case for [`GridLayout`][1] (regarding data cells), as well as [`GridBagLayout`][2] (regarding header cells). Example below:\r\n\r\n    public class DayPlanner {\r\n    \tprivate JFrame frame;\r\n    \tDimension cellSize = new Dimension(75, 75);\r\n    \r\n    \tprivate void createAndShowGUI() {\r\n    \t\tframe = new JFrame();\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \r\n    \t\t// Create header cells\r\n    \t\tJPanel p1 = new JPanel(new GridBagLayout());\r\n    \t\tGridBagConstraints c = new GridBagConstraints();\r\n    \t\tString[] columnNames = { &quot;Day 1&quot;, &quot;Day 2&quot;, &quot;Day 3&quot;, &quot;Day 4&quot;, &quot;Day 5&quot;, &quot;Day 6&quot;, &quot;Day 7&quot; };\r\n    \t\tint count = 0;\r\n    \t\tfor (int i = 0; i &lt; columnNames.length; i++) {\r\n    \t\t\tJLabel l = new JLabel(columnNames[i], SwingConstants.CENTER);\r\n    \t\t\tl.setFont(new Font(&quot;Times New Roman&quot;, Font.BOLD, 14));\r\n    \t\t\tl.setBackground(new Color(238, 238, 238));\r\n    \t\t\tl.setOpaque(true);\r\n    \t\t\tl.setBorder(BorderFactory.createMatteBorder(0, 0, 0, 1, new Color(122, 138, 153)));\r\n    \t\t\tc.fill = GridBagConstraints.HORIZONTAL;\r\n    \t\t\tc.ipady = 5; // adjusts cell&#39;s height\r\n    \t\t\tc.weightx = 0.5;\r\n    \t\t\tc.gridx = count++;\r\n    \t\t\tc.gridy = 0;\r\n    \t\t\tp1.add(l, c);\r\n    \t\t}\r\n    \r\n    \t\t// Create data cells\r\n    \t\tJPanel p2 = new JPanel();\r\n    \t\tp2.setLayout(new GridLayout(5, 7));\r\n    \t\tfor (int i = 0; i &lt; 35; i++) {\r\n    \t\t\tJLabel l = new JLabel(&quot;&lt;html&gt; This is some sample text &quot; + i + &quot;&lt;/html&gt;&quot;); // html tags allow text-wrapping\r\n    \t\t\tl.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 14));\r\n    \t\t\tl.setVerticalAlignment(SwingConstants.TOP);\r\n    \t\t\tl.setHorizontalAlignment(SwingConstants.LEFT);\r\n    \t\t\tl.setPreferredSize(cellSize);\r\n    \t\t\tl.setBackground(Color.WHITE);\r\n    \t\t\tl.setOpaque(true);\r\n    \t\t\tl.setBorder(BorderFactory.createMatteBorder(0, 0, 1, 1, new Color(122, 138, 153)));\r\n    \t\t\tp2.add(l);\r\n    \t\t}\r\n    \r\n    \r\n    \t\tJScrollPane sp = new JScrollPane(p2);\r\n    \t\tsp.getVerticalScrollBar().setUnitIncrement((int) cellSize.getHeight() / 2); // adjusts scrolling speed\r\n    \t\tsp.getViewport().setBackground(Color.WHITE);\r\n    \t\tContainer container = frame.getContentPane();\r\n    \t\tcontainer.add(p1, BorderLayout.NORTH);\r\n    \t\tcontainer.add(sp, BorderLayout.CENTER);\r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationRelativeTo(null);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSwingUtilities.invokeLater(new Runnable() {\r\n    \t\t\tpublic void run() {\r\n    \t\t\t\tnew DayPlanner().createAndShowGUI();\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    }\r\n\r\nOption 2\r\n--------\r\n\r\nIf you still want to use the `JTable` given in your question, you could add a [ComponentListener][3] to your `JFrame`, so that you can listen to &quot;resize events&quot;, allowing you to readjust the cells&#39; size and retain their square shape.\r\n\r\n    frame.addComponentListener(new ComponentAdapter() {\r\n    \tpublic void componentResized(ComponentEvent evt) {\r\n    \t\tfor (int row = 0; row &lt; table.getRowCount(); row++) {\r\n    \t\t\tint colWidth = table.getColumnModel().getColumn(0).getWidth();\r\n    \t\t\ttable.setRowHeight(row, colWidth);\r\n    \t\t}\r\n    \t}\r\n    });\r\n\r\nAs for the `pack()` issue, you could set the initial size of the `JFrame` according to the columns and rows in your table (remember to comment out `frame.pack();`). The below, although it would remove the empty space at the bottom of the frame, it wouldn&#39;t, however, stop the user from resizing the window and bringing that back.  \r\n\r\n    int colWidth = table.getColumnModel().getColumn(0).getWidth();\r\n    frame.setSize(7 * colWidth, 5 * table.getRowHeight(0) + 25);\r\n    //frame.pack();\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html\r\n  [2]: https://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html\r\n  [3]: https://docs.oracle.com/javase/tutorial/uiswing/events/componentlistener.html","title":"Why doesn&#39;t frame.pack() work with a JTable?","body":"<h2>Option 1</h2>\n<p>You haven't really mentioned how you are about to use this table (what data will be held and how the user is expected to interact with); however, it sounds like a use case for <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html\" rel=\"nofollow noreferrer\"><code>GridLayout</code></a> (regarding data cells), as well as <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html\" rel=\"nofollow noreferrer\"><code>GridBagLayout</code></a> (regarding header cells). Example below:</p>\n<pre><code>public class DayPlanner {\n    private JFrame frame;\n    Dimension cellSize = new Dimension(75, 75);\n\n    private void createAndShowGUI() {\n        frame = new JFrame();\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        // Create header cells\n        JPanel p1 = new JPanel(new GridBagLayout());\n        GridBagConstraints c = new GridBagConstraints();\n        String[] columnNames = { &quot;Day 1&quot;, &quot;Day 2&quot;, &quot;Day 3&quot;, &quot;Day 4&quot;, &quot;Day 5&quot;, &quot;Day 6&quot;, &quot;Day 7&quot; };\n        int count = 0;\n        for (int i = 0; i &lt; columnNames.length; i++) {\n            JLabel l = new JLabel(columnNames[i], SwingConstants.CENTER);\n            l.setFont(new Font(&quot;Times New Roman&quot;, Font.BOLD, 14));\n            l.setBackground(new Color(238, 238, 238));\n            l.setOpaque(true);\n            l.setBorder(BorderFactory.createMatteBorder(0, 0, 0, 1, new Color(122, 138, 153)));\n            c.fill = GridBagConstraints.HORIZONTAL;\n            c.ipady = 5; // adjusts cell's height\n            c.weightx = 0.5;\n            c.gridx = count++;\n            c.gridy = 0;\n            p1.add(l, c);\n        }\n\n        // Create data cells\n        JPanel p2 = new JPanel();\n        p2.setLayout(new GridLayout(5, 7));\n        for (int i = 0; i &lt; 35; i++) {\n            JLabel l = new JLabel(&quot;&lt;html&gt; This is some sample text &quot; + i + &quot;&lt;/html&gt;&quot;); // html tags allow text-wrapping\n            l.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 14));\n            l.setVerticalAlignment(SwingConstants.TOP);\n            l.setHorizontalAlignment(SwingConstants.LEFT);\n            l.setPreferredSize(cellSize);\n            l.setBackground(Color.WHITE);\n            l.setOpaque(true);\n            l.setBorder(BorderFactory.createMatteBorder(0, 0, 1, 1, new Color(122, 138, 153)));\n            p2.add(l);\n        }\n\n\n        JScrollPane sp = new JScrollPane(p2);\n        sp.getVerticalScrollBar().setUnitIncrement((int) cellSize.getHeight() / 2); // adjusts scrolling speed\n        sp.getViewport().setBackground(Color.WHITE);\n        Container container = frame.getContentPane();\n        container.add(p1, BorderLayout.NORTH);\n        container.add(sp, BorderLayout.CENTER);\n        frame.pack();\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new Runnable() {\n            public void run() {\n                new DayPlanner().createAndShowGUI();\n            }\n        });\n    }\n}\n</code></pre>\n<h2>Option 2</h2>\n<p>If you still want to use the <code>JTable</code> given in your question, you could add a <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/events/componentlistener.html\" rel=\"nofollow noreferrer\">ComponentListener</a> to your <code>JFrame</code>, so that you can listen to &quot;resize events&quot;, allowing you to readjust the cells' size and retain their square shape.</p>\n<pre><code>frame.addComponentListener(new ComponentAdapter() {\n    public void componentResized(ComponentEvent evt) {\n        for (int row = 0; row &lt; table.getRowCount(); row++) {\n            int colWidth = table.getColumnModel().getColumn(0).getWidth();\n            table.setRowHeight(row, colWidth);\n        }\n    }\n});\n</code></pre>\n<p>As for the <code>pack()</code> issue, you could set the initial size of the <code>JFrame</code> according to the columns and rows in your table (remember to comment out <code>frame.pack();</code>). The below, although it would remove the empty space at the bottom of the frame, it wouldn't, however, stop the user from resizing the window and bringing that back.</p>\n<pre><code>int colWidth = table.getColumnModel().getColumn(0).getWidth();\nframe.setSize(7 * colWidth, 5 * table.getRowHeight(0) + 25);\n//frame.pack();\n</code></pre>\n"}],"owner":{"account_id":10441754,"reputation":109,"user_id":7698156,"display_name":"Denny Williams"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1676376490,"creation_date":1643924900,"question_id":70978745,"body_markdown":"I have a super basic `JTable`, which I&#39;m adding to a `JFrame`, but for some reason `frame.pack()` doesn&#39;t work. I&#39;m setting the row height to the column width so that the cells of the table are squares, but this doesn&#39;t seem to work when the window is resized. So, how can I make it so that the cells of the table are always squares, even when resized, and the frame is properly packed? Here&#39;s the code for the window:\r\n\r\n    package me.an.ar.window;\r\n    \r\n    import java.awt.Container;\r\n    \r\n    import javax.swing.JFrame;\r\n    import javax.swing.JScrollPane;\r\n    import javax.swing.JTable;\r\n    import javax.swing.SwingUtilities;\r\n    \r\n    public class DayPlanner\r\n    {\r\n    \tprivate JFrame frame;\r\n    \r\n    \tprivate void createAndShowGUI()\r\n    \t{\r\n    \t\tframe = new JFrame();\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \r\n    \t\tContainer container = frame.getContentPane();\r\n    \r\n    \t\tObject[][] data = new Object[5][7];\r\n    \t\tString[] columnNames = { &quot;Day1&quot;, &quot;Day2&quot;, &quot;Day3&quot;, &quot;Day4&quot;, &quot;Day5&quot;, &quot;Day6&quot;, &quot;Day7&quot; };\r\n    \t\tJTable table = new JTable(data, columnNames);\r\n    \r\n    \t\tfor (int col = 0; col &lt; table.getColumnCount(); col++)\r\n    \t\t{\r\n    \t\t\tfor (int row = 0; row &lt; table.getRowCount(); row++)\r\n    \t\t\t{\r\n    \t\t\t\tint colWidth = table.getColumnModel().getColumn(col).getWidth();\r\n    \t\t\t\ttable.setRowHeight(row, colWidth);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tcontainer.add(new JScrollPane(table));\r\n    \r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationRelativeTo(null);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \r\n    \tprivate void show()\r\n    \t{\r\n    \t\tSwingUtilities.invokeLater(new Runnable()\r\n    \t\t{\r\n    \t\t\tpublic void run()\r\n    \t\t\t{\r\n    \t\t\t\tcreateAndShowGUI();\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    \r\n    \tpublic DayPlanner()\r\n    \t{\r\n    \t\tshow();\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args)\r\n    \t{\r\n    \t\tnew DayPlanner();\r\n    \t}\r\n    }\r\n\r\n","title":"Why doesn&#39;t frame.pack() work with a JTable?","body":"<p>I have a super basic <code>JTable</code>, which I'm adding to a <code>JFrame</code>, but for some reason <code>frame.pack()</code> doesn't work. I'm setting the row height to the column width so that the cells of the table are squares, but this doesn't seem to work when the window is resized. So, how can I make it so that the cells of the table are always squares, even when resized, and the frame is properly packed? Here's the code for the window:</p>\n<pre><code>package me.an.ar.window;\n\nimport java.awt.Container;\n\nimport javax.swing.JFrame;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTable;\nimport javax.swing.SwingUtilities;\n\npublic class DayPlanner\n{\n    private JFrame frame;\n\n    private void createAndShowGUI()\n    {\n        frame = new JFrame();\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        Container container = frame.getContentPane();\n\n        Object[][] data = new Object[5][7];\n        String[] columnNames = { &quot;Day1&quot;, &quot;Day2&quot;, &quot;Day3&quot;, &quot;Day4&quot;, &quot;Day5&quot;, &quot;Day6&quot;, &quot;Day7&quot; };\n        JTable table = new JTable(data, columnNames);\n\n        for (int col = 0; col &lt; table.getColumnCount(); col++)\n        {\n            for (int row = 0; row &lt; table.getRowCount(); row++)\n            {\n                int colWidth = table.getColumnModel().getColumn(col).getWidth();\n                table.setRowHeight(row, colWidth);\n            }\n        }\n\n        container.add(new JScrollPane(table));\n\n        frame.pack();\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n    }\n\n    private void show()\n    {\n        SwingUtilities.invokeLater(new Runnable()\n        {\n            public void run()\n            {\n                createAndShowGUI();\n            }\n        });\n    }\n\n    public DayPlanner()\n    {\n        show();\n    }\n\n    public static void main(String[] args)\n    {\n        new DayPlanner();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","openapi"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1676376373,"post_id":75447588,"comment_id":133120729,"body_markdown":"The use of `${...}` only works in Spring annotations, because Spring itself performs special postprocessing on those values. Likely in the case of those `@ExtensionProperty`, Spring provides no support.","body":"The use of <code>${...}</code> only works in Spring annotations, because Spring itself performs special postprocessing on those values. Likely in the case of those <code>@ExtensionProperty</code>, Spring provides no support."},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1676376559,"post_id":75447588,"comment_id":133120787,"body_markdown":"And they retrieves their values from Spring&#39;s [application properties mechanism](https://www.baeldung.com/properties-with-spring), not from a random openapi spec file.","body":"And they retrieves their values from Spring&#39;s <a href=\"https://www.baeldung.com/properties-with-spring\" rel=\"nofollow noreferrer\">application properties mechanism</a>, not from a random openapi spec file."}],"owner":{"account_id":27783055,"reputation":1,"user_id":21211065,"display_name":"o10s"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676376461,"creation_date":1676376270,"question_id":75447588,"body_markdown":"I have a simple Java Spring Boot application that uses springdoc openAPI v2 here is part of the maven file I am using ( I will spare you the rest of the details it is just starter web to be able to have a rest controller nothing fancy and especially nothing relevant here):\r\n\r\nI use the spring boot starter parent for my application\r\n```xml\r\n&lt;parent&gt;\r\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n  &lt;version&gt;3.0.2&lt;/version&gt;\r\n  &lt;relativePath/&gt;\r\n&lt;/parent&gt;\r\n```\r\n\r\nThen I have the following for Spring Doc OpenAPI:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n    &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n    &lt;version&gt;${springdoc.openapi.starter.webmvc.version}&lt;/version&gt; // this is defined as 2.0.2 in properties file\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI define now an @OpenApiConfiguration as such (note: here values are BS and always the same, they all point to a value defined in my application.yaml, it is just to test everything before pushing more code, the idea being to define the API in the properties file):\r\n\r\n```java\r\n@Configuration\r\n@OpenAPIDefinition(\r\n        info = @Info(title = &quot;${openapi.info.name}&quot;, contact = @Contact(name = &quot;${openapi.info.name}&quot;)),\r\n        tags = {\r\n                @Tag(name = &quot;${openapi.info.name}&quot;),\r\n        },\r\n        extensions = @Extension(properties = {\r\n                @ExtensionProperty(name = &quot;${openapi.info.name}&quot;, value = &quot;${openapi.info.name}&quot;),\r\n        })\r\n)\r\n```\r\n\r\nDoing the above declaration I can now check my generated JSON OpenAPI contract expecting every value to be replaces but to my surprise only few of the values were replaced:\r\n```json\r\n{\r\n&quot;openapi&quot;:&quot;3.0.1&quot;,\r\n&quot;info&quot;:{\r\n  &quot;title&quot;:&quot;ttt&quot;, //replaced correctly\r\n  &quot;contact&quot;:{\r\n    &quot;name&quot;:&quot;ttt&quot; //replaced correctly\r\n  }\r\n},\r\n&quot;servers&quot;:[\r\n  {\r\n    &quot;url&quot;:&quot;http://localhost:8080/api-2023&quot;,\r\n    &quot;description&quot;:&quot;Generated server url&quot;\r\n  }\r\n],\r\n&quot;tags&quot;:[\r\n  {\r\n    &quot;name&quot;: &quot;${openapi.info.name}&quot; // not replaced\r\n  }\r\n],\r\n&quot;x-${openapi.info.name}&quot;:&quot;${openapi.info.name}&quot;} // not replaced\r\n```\r\n\r\nI really do not understand much about how the substitution occurs and why it doesn&#39;t my understanding is that whatever comes from the ${} nomenclature should be coming from application.yaml but apparently not. What I am really confused about is why sometimes it works and sometimes not. I would have imagined everything work or doesn&#39;t? \r\n\r\nCan anyone shed a light on this please?","title":"Using the ${} in Java annotations should allow to use properties values... but it is not working every time?","body":"<p>I have a simple Java Spring Boot application that uses springdoc openAPI v2 here is part of the maven file I am using ( I will spare you the rest of the details it is just starter web to be able to have a rest controller nothing fancy and especially nothing relevant here):</p>\n<p>I use the spring boot starter parent for my application</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;parent&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n  &lt;version&gt;3.0.2&lt;/version&gt;\n  &lt;relativePath/&gt;\n&lt;/parent&gt;\n</code></pre>\n<p>Then I have the following for Spring Doc OpenAPI:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n    &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n    &lt;version&gt;${springdoc.openapi.starter.webmvc.version}&lt;/version&gt; // this is defined as 2.0.2 in properties file\n&lt;/dependency&gt;\n</code></pre>\n<p>I define now an @OpenApiConfiguration as such (note: here values are BS and always the same, they all point to a value defined in my application.yaml, it is just to test everything before pushing more code, the idea being to define the API in the properties file):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@OpenAPIDefinition(\n        info = @Info(title = &quot;${openapi.info.name}&quot;, contact = @Contact(name = &quot;${openapi.info.name}&quot;)),\n        tags = {\n                @Tag(name = &quot;${openapi.info.name}&quot;),\n        },\n        extensions = @Extension(properties = {\n                @ExtensionProperty(name = &quot;${openapi.info.name}&quot;, value = &quot;${openapi.info.name}&quot;),\n        })\n)\n</code></pre>\n<p>Doing the above declaration I can now check my generated JSON OpenAPI contract expecting every value to be replaces but to my surprise only few of the values were replaced:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n&quot;openapi&quot;:&quot;3.0.1&quot;,\n&quot;info&quot;:{\n  &quot;title&quot;:&quot;ttt&quot;, //replaced correctly\n  &quot;contact&quot;:{\n    &quot;name&quot;:&quot;ttt&quot; //replaced correctly\n  }\n},\n&quot;servers&quot;:[\n  {\n    &quot;url&quot;:&quot;http://localhost:8080/api-2023&quot;,\n    &quot;description&quot;:&quot;Generated server url&quot;\n  }\n],\n&quot;tags&quot;:[\n  {\n    &quot;name&quot;: &quot;${openapi.info.name}&quot; // not replaced\n  }\n],\n&quot;x-${openapi.info.name}&quot;:&quot;${openapi.info.name}&quot;} // not replaced\n</code></pre>\n<p>I really do not understand much about how the substitution occurs and why it doesn't my understanding is that whatever comes from the ${} nomenclature should be coming from application.yaml but apparently not. What I am really confused about is why sometimes it works and sometimes not. I would have imagined everything work or doesn't?</p>\n<p>Can anyone shed a light on this please?</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1676315389,"post_id":75439210,"comment_id":133109045,"body_markdown":"You aren&#39;t showing how you are checking the result, the transaction settings or how and when the IDs for A and C are set. JPA should automatically set the embedded id properties based on the relationship values, but only on the managed entity instance and likely (provider can control this) when the transaction commits or is flushed. So how you save your entity and return it matters (JPA merge has different behavior than jpa persist).","body":"You aren&#39;t showing how you are checking the result, the transaction settings or how and when the IDs for A and C are set. JPA should automatically set the embedded id properties based on the relationship values, but only on the managed entity instance and likely (provider can control this) when the transaction commits or is flushed. So how you save your entity and return it matters (JPA merge has different behavior than jpa persist)."},{"owner":{"account_id":11044887,"reputation":99,"user_id":8270202,"accept_rate":56,"display_name":"jimmyrap"},"score":0,"creation_date":1676317987,"post_id":75439210,"comment_id":133109656,"body_markdown":"I just call saveAndFlush on my simple ClassA repository, which extends JpaRepository&lt;ClassA, Long&gt;. I wrote few integration tests and while debugging the reason I don&#39;t get expected results after save I could see that returned entity after insert has all the fields set, but that composite key has null fields.","body":"I just call saveAndFlush on my simple ClassA repository, which extends JpaRepository&lt;ClassA, Long&gt;. I wrote few integration tests and while debugging the reason I don&#39;t get expected results after save I could see that returned entity after insert has all the fields set, but that composite key has null fields."},{"owner":{"account_id":11044887,"reputation":99,"user_id":8270202,"accept_rate":56,"display_name":"jimmyrap"},"score":0,"creation_date":1676318172,"post_id":75439210,"comment_id":133109693,"body_markdown":"Regarding ID generation:\nClassA\n\n`@Id\n    @GeneratedValue(generator = a_SEQ, strategy = GenerationType.SEQUENCE)\n    @SequenceGenerator(name = a_SEQ, sequenceName = a_SEQ, allocationSize = 1)\n    @Column(name = &quot;id&quot;)\n    @EqualsAndHashCode.Include\n    private Long id;`","body":"Regarding ID generation: ClassA  <code>@Id     @GeneratedValue(generator = a_SEQ, strategy = GenerationType.SEQUENCE)     @SequenceGenerator(name = a_SEQ, sequenceName = a_SEQ, allocationSize = 1)     @Column(name = &quot;id&quot;)     @EqualsAndHashCode.Include     private Long id;</code>"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1676386127,"post_id":75439210,"comment_id":133123819,"body_markdown":"Show what you mean as it is a common mistake to pass in an instance to save and just assume that your object passed in becomes managed - use the instance it returns, not the one you gave it to check for generated values after the flush/commit. Also show the references are set, and how A and C are managed in the context. As the answer states below states you have, do you initialize the embedded object? I&#39;d have expected an NPE in your callbacks if you didn&#39;t.","body":"Show what you mean as it is a common mistake to pass in an instance to save and just assume that your object passed in becomes managed - use the instance it returns, not the one you gave it to check for generated values after the flush/commit. Also show the references are set, and how A and C are managed in the context. As the answer states below states you have, do you initialize the embedded object? I&#39;d have expected an NPE in your callbacks if you didn&#39;t."}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676376315,"creation_date":1676376315,"answer_id":75447600,"question_id":75439210,"body_markdown":"I think you have to assign the id to at least an empty object for this to work:\r\n\r\n    @EmbeddedId\r\n    private ClassBId id = new ClassBId();","title":"Hibernate doesn&#39;t insert values into EmbeddedId with mappings","body":"<p>I think you have to assign the id to at least an empty object for this to work:</p>\n<pre><code>@EmbeddedId\nprivate ClassBId id = new ClassBId();\n</code></pre>\n"}],"owner":{"account_id":11044887,"reputation":99,"user_id":8270202,"accept_rate":56,"display_name":"jimmyrap"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":224,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1676376315,"creation_date":1676308896,"question_id":75439210,"body_markdown":"I have a **ClassA** entity, which contains set of ClassB entities. \r\n\r\n```\r\npublic class ClassA {\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @EqualsAndHashCode.Include\r\n    private Long id;\r\n\r\n    @OneToMany(fetch = FetchType.EAGER, mappedBy = &quot;classA&quot;)\r\n    @Cascade({org.hibernate.annotations.CascadeType.MERGE, org.hibernate.annotations.CascadeType.SAVE_UPDATE, org.hibernate.annotations.CascadeType.REFRESH, org.hibernate.annotations.CascadeType.DETACH})\r\n    private Set&lt;ClassB&gt; classB = new HashSet&lt;&gt;();\r\n\r\n    @PrePersist\r\n    @PreUpdate\r\n    void setClassA() {\r\n        if (nonNull(this.classB)) {\r\n            this.classB.forEach(b -&gt; b.setA(this));\r\n        }\r\n    }\r\n}\r\n```\r\n**ClassB** entity has composite key, which points to two other entities&#39; ids.\r\n\r\n\r\n```\r\n@Embeddable\r\npublic class ClassBId implements Serializable {\r\n    private String cId;\r\n    private Long aId;\r\n}\r\n```\r\n\r\n```\r\npublic class ClassB {\r\n\r\n    @AttributeOverrides({\r\n            @AttributeOverride(name = &quot;c&quot;, column = @Column(name = &quot;c_id&quot;)),\r\n            @AttributeOverride(name = &quot;a&quot;, column = @Column(name = &quot;a_id&quot;))\r\n    })\r\n    @EmbeddedId\r\n    private ClassBId id;\r\n\r\n    @OneToOne\r\n    @Cascade({org.hibernate.annotations.CascadeType.MERGE, org.hibernate.annotations.CascadeType.SAVE_UPDATE, org.hibernate.annotations.CascadeType.REFRESH, org.hibernate.annotations.CascadeType.DETACH})\r\n    @JoinColumn(name = &quot;c_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    @MapsId(&quot;cId&quot;)\r\n    private ClassC classC;\r\n    @ManyToOne\r\n    @Cascade({org.hibernate.annotations.CascadeType.MERGE, org.hibernate.annotations.CascadeType.SAVE_UPDATE, org.hibernate.annotations.CascadeType.REFRESH, org.hibernate.annotations.CascadeType.DETACH})\r\n    @JoinColumn(name = &quot;a_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    @MapsId(&quot;aId&quot;)\r\n    private ClassA classA;\r\n\r\n    @PrePersist\r\n    @PreUpdate\r\n    private void setEmbeddedId() {\r\n        id.setCId(c.getId());\r\n        id.setAId(a.getId());\r\n    }\r\n}\r\n```\r\n\r\nWhen I save my **ClassA** entity and CrudRepository returns me a result, everything is nicely filled in but that **embedded id remains null**, with or without setting id manually in pre-operation method. \r\n\r\nWhat kind of join or mapping am I missing so on save or update I can not only have ClassC and ClassA inside of ClassB entity (which takes place already) but also somehow have that composite key consisting of PKs of ClassA and ClassC automagically filled in? ","title":"Hibernate doesn&#39;t insert values into EmbeddedId with mappings","body":"<p>I have a <strong>ClassA</strong> entity, which contains set of ClassB entities.</p>\n<pre><code>public class ClassA {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @EqualsAndHashCode.Include\n    private Long id;\n\n    @OneToMany(fetch = FetchType.EAGER, mappedBy = &quot;classA&quot;)\n    @Cascade({org.hibernate.annotations.CascadeType.MERGE, org.hibernate.annotations.CascadeType.SAVE_UPDATE, org.hibernate.annotations.CascadeType.REFRESH, org.hibernate.annotations.CascadeType.DETACH})\n    private Set&lt;ClassB&gt; classB = new HashSet&lt;&gt;();\n\n    @PrePersist\n    @PreUpdate\n    void setClassA() {\n        if (nonNull(this.classB)) {\n            this.classB.forEach(b -&gt; b.setA(this));\n        }\n    }\n}\n</code></pre>\n<p><strong>ClassB</strong> entity has composite key, which points to two other entities' ids.</p>\n<pre><code>@Embeddable\npublic class ClassBId implements Serializable {\n    private String cId;\n    private Long aId;\n}\n</code></pre>\n<pre><code>public class ClassB {\n\n    @AttributeOverrides({\n            @AttributeOverride(name = &quot;c&quot;, column = @Column(name = &quot;c_id&quot;)),\n            @AttributeOverride(name = &quot;a&quot;, column = @Column(name = &quot;a_id&quot;))\n    })\n    @EmbeddedId\n    private ClassBId id;\n\n    @OneToOne\n    @Cascade({org.hibernate.annotations.CascadeType.MERGE, org.hibernate.annotations.CascadeType.SAVE_UPDATE, org.hibernate.annotations.CascadeType.REFRESH, org.hibernate.annotations.CascadeType.DETACH})\n    @JoinColumn(name = &quot;c_id&quot;, referencedColumnName = &quot;id&quot;)\n    @MapsId(&quot;cId&quot;)\n    private ClassC classC;\n    @ManyToOne\n    @Cascade({org.hibernate.annotations.CascadeType.MERGE, org.hibernate.annotations.CascadeType.SAVE_UPDATE, org.hibernate.annotations.CascadeType.REFRESH, org.hibernate.annotations.CascadeType.DETACH})\n    @JoinColumn(name = &quot;a_id&quot;, referencedColumnName = &quot;id&quot;)\n    @MapsId(&quot;aId&quot;)\n    private ClassA classA;\n\n    @PrePersist\n    @PreUpdate\n    private void setEmbeddedId() {\n        id.setCId(c.getId());\n        id.setAId(a.getId());\n    }\n}\n</code></pre>\n<p>When I save my <strong>ClassA</strong> entity and CrudRepository returns me a result, everything is nicely filled in but that <strong>embedded id remains null</strong>, with or without setting id manually in pre-operation method.</p>\n<p>What kind of join or mapping am I missing so on save or update I can not only have ClassC and ClassA inside of ClassB entity (which takes place already) but also somehow have that composite key consisting of PKs of ClassA and ClassC automagically filled in?</p>\n"},{"tags":["java","dbunit"],"answers":[{"tags":[],"owner":{"account_id":3766298,"reputation":49,"user_id":7984574,"display_name":"sadath pasha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648131454,"creation_date":1648131454,"answer_id":71604158,"question_id":71589356,"body_markdown":"Adding all the postgress table types solved the issue.\r\n","title":"DBUnit delete data from postrgess partition table java","body":"<p>Adding all the postgress table types solved the issue.</p>\n"},{"tags":[],"owner":{"account_id":24257941,"reputation":1,"user_id":18208004,"display_name":"יהונתן קדוש"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676376314,"creation_date":1676372016,"answer_id":75446801,"question_id":71589356,"body_markdown":"dbunit before executing query verify if the table name exists.\r\nIf fails to retrieve partitioned tables since in postgres the table type for partitioned tables is &#39;PARTITIONED TABLE&#39; .\r\nBy default dbunit retrieves all tables with table type &#39;TABLE&#39; which retrieves all the tables partitions without the original tables.\r\n\r\n\r\nwhere the connection to the dbunit being generated, external configuration must be made.\r\n\r\n    connection.getConfig.setProperty(DatabaseConfig.PROPERTY_TABLE_TYPE, Array[String](&quot;VIEW&quot;, &quot;TABLE&quot;, &quot;PARTITIONED TABLE&quot;))\r\n\r\nwhere connection is dbunit DatabaseConnection","title":"DBUnit delete data from postrgess partition table java","body":"<p>dbunit before executing query verify if the table name exists.\nIf fails to retrieve partitioned tables since in postgres the table type for partitioned tables is 'PARTITIONED TABLE' .\nBy default dbunit retrieves all tables with table type 'TABLE' which retrieves all the tables partitions without the original tables.</p>\n<p>where the connection to the dbunit being generated, external configuration must be made.</p>\n<pre><code>connection.getConfig.setProperty(DatabaseConfig.PROPERTY_TABLE_TYPE, Array[String](&quot;VIEW&quot;, &quot;TABLE&quot;, &quot;PARTITIONED TABLE&quot;))\n</code></pre>\n<p>where connection is dbunit DatabaseConnection</p>\n"}],"owner":{"account_id":3766298,"reputation":49,"user_id":7984574,"display_name":"sadath pasha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":209,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1676376314,"creation_date":1648047194,"question_id":71589356,"body_markdown":"We have a table invoice_meta_data which is partitioned into &lt;br/&gt;\r\n\r\n 1. invoice_meta_data_10m\r\n 2. invoice_meta_data_20m\r\n\r\nNow when I try to delete the data using  **DatabaseOperation.DELETE.execute(connection, invoiceDataSet);**\r\n\r\n\r\n```[m org.dbunit.dataset.NoSuchTableException: invoice_meta_data\r\n\tat org.dbunit.database.DatabaseDataSet.getTableMetaData(DatabaseDataSet.java:305) ~[dbunit-2.7.3.jar:?]\r\n\tat org.dbunit.operation.AbstractOperation.getOperationMetaData(AbstractOperation.java:80) ~[dbunit-2.7.3.jar:?]\r\n\tat org.dbunit.operation.AbstractBatchOperation.execute(AbstractBatchOperation.java:151) ~[dbunit-2.7.3.jar:?]\r\n\tat domain.dsinvoicing.common.db.InvoiceDbHook.insertData(InvoiceDbHook.java:95) [test-classes/:?]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_271]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_271]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_271]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_271]\r\n\tat io.cucumber.java.Invoker.invoke(Invoker.java:27) [cucumber-java-5.7.0.jar:?]\r\n\tat io.cucumber.java.JavaHookDefinition.execute(JavaHookDefinition.java:61) [cucumber-java-5.7.0.jar:?]\r\n\tat io.cucumber.core.runner.CoreHookDefinition.execute(CoreHookDefinition.java:31) [cucumber-core-5.7.0.jar:?]\r\n\tat io.cucumber.core.runner.HookDefinitionMatch.runStep(HookDefinitionMatch.java:20) [cucumber-core-5.7.0.jar:?]\r\n\tat io.cucumber.core.runner.TestStep.executeStep(TestStep.java:64) [cucumber-core-5.7.0.jar:?]\r\n```\r\n\r\nDBunit configuration is \r\n```\r\n  IDatabaseConnection connection = new DatabaseConnection(conn,schema);\r\n  DatabaseConfig dbConfig = connection.getConfig();\r\n  dbConfig.setProperty(DatabaseConfig.FEATURE_QUALIFIED_TABLE_NAMES, false);\r\n  dbConfig .setProperty(DatabaseConfig.PROPERTY_METADATA_HANDLER, new\r\n  DefaultMetadataHandler());\r\n  dbConfig.setProperty(DatabaseConfig.FEATURE_CASE_SENSITIVE_TABLE_NAMES, Boolean.TRUE);\r\n  dbConfig.setProperty(DatabaseConfig.PROPERTY_TABLE_TYPE, new String[] { &quot;VIEW&quot;, &quot;TABLE&quot; });\r\n  dbConfig.setProperty(DatabaseConfig.PROPERTY_DATATYPE_FACTORY, new JsonbDataFactory());\r\n```\r\n\r\nSo basically how to handle the partitions in DBubit\r\n","title":"DBUnit delete data from postrgess partition table java","body":"<p>We have a table invoice_meta_data which is partitioned into <br/></p>\n<ol>\n<li>invoice_meta_data_10m</li>\n<li>invoice_meta_data_20m</li>\n</ol>\n<p>Now when I try to delete the data using  <strong>DatabaseOperation.DELETE.execute(connection, invoiceDataSet);</strong></p>\n<pre><code>    at org.dbunit.database.DatabaseDataSet.getTableMetaData(DatabaseDataSet.java:305) ~[dbunit-2.7.3.jar:?]\n    at org.dbunit.operation.AbstractOperation.getOperationMetaData(AbstractOperation.java:80) ~[dbunit-2.7.3.jar:?]\n    at org.dbunit.operation.AbstractBatchOperation.execute(AbstractBatchOperation.java:151) ~[dbunit-2.7.3.jar:?]\n    at domain.dsinvoicing.common.db.InvoiceDbHook.insertData(InvoiceDbHook.java:95) [test-classes/:?]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_271]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_271]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_271]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_271]\n    at io.cucumber.java.Invoker.invoke(Invoker.java:27) [cucumber-java-5.7.0.jar:?]\n    at io.cucumber.java.JavaHookDefinition.execute(JavaHookDefinition.java:61) [cucumber-java-5.7.0.jar:?]\n    at io.cucumber.core.runner.CoreHookDefinition.execute(CoreHookDefinition.java:31) [cucumber-core-5.7.0.jar:?]\n    at io.cucumber.core.runner.HookDefinitionMatch.runStep(HookDefinitionMatch.java:20) [cucumber-core-5.7.0.jar:?]\n    at io.cucumber.core.runner.TestStep.executeStep(TestStep.java:64) [cucumber-core-5.7.0.jar:?]\n</code></pre>\n<p>DBunit configuration is</p>\n<pre><code>  IDatabaseConnection connection = new DatabaseConnection(conn,schema);\n  DatabaseConfig dbConfig = connection.getConfig();\n  dbConfig.setProperty(DatabaseConfig.FEATURE_QUALIFIED_TABLE_NAMES, false);\n  dbConfig .setProperty(DatabaseConfig.PROPERTY_METADATA_HANDLER, new\n  DefaultMetadataHandler());\n  dbConfig.setProperty(DatabaseConfig.FEATURE_CASE_SENSITIVE_TABLE_NAMES, Boolean.TRUE);\n  dbConfig.setProperty(DatabaseConfig.PROPERTY_TABLE_TYPE, new String[] { &quot;VIEW&quot;, &quot;TABLE&quot; });\n  dbConfig.setProperty(DatabaseConfig.PROPERTY_DATATYPE_FACTORY, new JsonbDataFactory());\n</code></pre>\n<p>So basically how to handle the partitions in DBubit</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":18911549,"reputation":600,"user_id":13797513,"display_name":"chptr-one"},"score":1,"creation_date":1676378177,"post_id":75447571,"comment_id":133121286,"body_markdown":"Try to use `!&quot;error&quot;.equalsIgnoreCase(cell.getStringCellValue())` instead of `!=`","body":"Try to use <code>!&quot;error&quot;.equalsIgnoreCase(cell.getStringCellValue())</code> instead of <code>!=</code>"}],"owner":{"account_id":27782845,"reputation":1,"user_id":21210886,"display_name":"Gohila Mani"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1676392138,"answer_count":0,"score":0,"last_activity_date":1676376173,"creation_date":1676376173,"question_id":75447571,"body_markdown":"I am trying to write a java code to read data from excel and print the same but to ignore if the word is &#203;RROR or error. Below is my code and I have used &quot;if&quot; statement. \r\n\r\n    package ExcelFiles;\r\n\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.util.Iterator;\r\n\r\n    import org.apache.poi.ss.usermodel.Cell;\r\n    import org.apache.poi.ss.usermodel.Row;\r\n    import org.apache.poi.xssf.usermodel.XSSFSheet;\r\n    import org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\n\r\n    public class ignoreerror {\r\n\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tFileInputStream fs = new FileInputStream(&quot;D:\\\\JavaFiles\\\\InputData.xlsx.xlsx&quot;);\r\n\t\tXSSFWorkbook wk = new XSSFWorkbook(fs);\r\n\t\tXSSFSheet s1 = wk.getSheet(&quot;Sheet1&quot;);\r\n\t\tIterator&lt;Row&gt; rowIterator = s1.iterator();\r\n\t\t\r\n\t\twhile (rowIterator.hasNext()) {\r\n\t\t\t  \r\n            Row row = rowIterator.next();\r\n\r\n            // For each row, iterate through all the\r\n            // columns\r\n            Iterator&lt;Cell&gt; cellIterator\r\n                = row.cellIterator();\r\n\r\n            while (cellIterator.hasNext()) {\r\n\r\n                Cell cell = cellIterator.next();\r\n\r\n                // Checking the cell type and format\r\n                // accordingly\r\n                switch (cell.getCellType()) {\r\n                \r\n                // Case 1\r\n                case NUMERIC:\r\n                    System.out.print(\r\n                        cell.getNumericCellValue()\r\n                        + &quot;\\t&quot;);\r\n                    \r\n                    break;\r\n\r\n                // Case 2\r\n                case STRING:\r\n                \t\r\n                \tif (cell.getStringCellValue()!=&quot;ERROR&quot; || cell.getStringCellValue()!=&quot;error&quot;)\r\n                \t{\r\n                      System.out.print(cell.getStringCellValue()+ &quot;\\t&quot;);\r\n                \t}\r\n                    \r\n                \telse\r\n                \t{\r\n                \t\tSystem.out.print(&quot;This line has error&quot;);\r\n                \t}\r\n                   break;\r\n                }\r\n                \t\r\n            }\r\n            \r\n            System.out.println(&quot;&quot;);\r\n            \r\n        }\r\n\t\tfs.close();\r\n\t\t\r\n\t\tFileOutputStream out =\r\n\t\t        new FileOutputStream(new File(&quot;D:\\\\JavaFiles\\\\Test.xlsx&quot;));\r\n\t\t    wk.write(out);\r\n\t\t    out.close();\r\n    }\r\n\t}\r\n\r\n\r\nIf my data in Excel cells are as below\r\nHello\r\nWorld\r\nERROR\r\n123\r\n\r\nI expect below Output\r\nHello\r\nWorld\r\n123\r\n\r\nBut i get all of my input data in the output.","title":"Reading excel data and ignore a particular word for printing","body":"<p>I am trying to write a java code to read data from excel and print the same but to ignore if the word is ËRROR or error. Below is my code and I have used &quot;if&quot; statement.</p>\n<pre><code>package ExcelFiles;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.util.Iterator;\n\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.xssf.usermodel.XSSFSheet;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\n\npublic class ignoreerror {\n\npublic static void main(String[] args) throws IOException {\n    // TODO Auto-generated method stub\n    FileInputStream fs = new FileInputStream(&quot;D:\\\\JavaFiles\\\\InputData.xlsx.xlsx&quot;);\n    XSSFWorkbook wk = new XSSFWorkbook(fs);\n    XSSFSheet s1 = wk.getSheet(&quot;Sheet1&quot;);\n    Iterator&lt;Row&gt; rowIterator = s1.iterator();\n    \n    while (rowIterator.hasNext()) {\n          \n        Row row = rowIterator.next();\n\n        // For each row, iterate through all the\n        // columns\n        Iterator&lt;Cell&gt; cellIterator\n            = row.cellIterator();\n\n        while (cellIterator.hasNext()) {\n\n            Cell cell = cellIterator.next();\n\n            // Checking the cell type and format\n            // accordingly\n            switch (cell.getCellType()) {\n            \n            // Case 1\n            case NUMERIC:\n                System.out.print(\n                    cell.getNumericCellValue()\n                    + &quot;\\t&quot;);\n                \n                break;\n\n            // Case 2\n            case STRING:\n                \n                if (cell.getStringCellValue()!=&quot;ERROR&quot; || cell.getStringCellValue()!=&quot;error&quot;)\n                {\n                  System.out.print(cell.getStringCellValue()+ &quot;\\t&quot;);\n                }\n                \n                else\n                {\n                    System.out.print(&quot;This line has error&quot;);\n                }\n               break;\n            }\n                \n        }\n        \n        System.out.println(&quot;&quot;);\n        \n    }\n    fs.close();\n    \n    FileOutputStream out =\n            new FileOutputStream(new File(&quot;D:\\\\JavaFiles\\\\Test.xlsx&quot;));\n        wk.write(out);\n        out.close();\n}\n}\n</code></pre>\n<p>If my data in Excel cells are as below\nHello\nWorld\nERROR\n123</p>\n<p>I expect below Output\nHello\nWorld\n123</p>\n<p>But i get all of my input data in the output.</p>\n"},{"tags":["java","intellij-idea","parameters","interface","editor"],"answers":[{"tags":[],"owner":{"account_id":2700750,"reputation":688,"user_id":2331527,"display_name":"floating cat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676376130,"creation_date":1676346942,"answer_id":75443303,"question_id":75442335,"body_markdown":"The class file doesn&#39;t store parameter names for non-default methods. So if you don&#39;t have the source code of that code, after the decompilation, the IDEA has no idea about the actual parameter names before.\r\n\r\nIf you use `javap -verbose Foo.class` to check it, you can see the bytecode contains the parameter name for the default method but not for the normal method:\r\n\r\n```\r\nConstant pool:\r\n   #1 = InterfaceMethodref #2.#3          // Foo.getBar:(Ljava/lang/String;I)LBar;\r\n   #2 = Class              #4             // Foo\r\n   #3 = NameAndType        #5:#6          // getBar:(Ljava/lang/String;I)LBar;\r\n   #4 = Utf8               Foo\r\n   #5 = Utf8               getBar\r\n   #6 = Utf8               (Ljava/lang/String;I)LBar;\r\n   #7 = Class              #8             // java/lang/Object\r\n   #8 = Utf8               java/lang/Object\r\n   #9 = Utf8               (Ljava/lang/String;)LBar;\r\n  #10 = Utf8               Code\r\n  #11 = Utf8               LineNumberTable\r\n  #12 = Utf8               LocalVariableTable\r\n  #13 = Utf8               this\r\n  #14 = Utf8               LFoo;\r\n  #15 = Utf8               name\r\n  #16 = Utf8               Ljava/lang/String;\r\n  #17 = Utf8               SourceFile\r\n  #18 = Utf8               Foo.java\r\n{\r\n  public abstract Bar getBar(java.lang.String, int);\r\n    descriptor: (Ljava/lang/String;I)LBar;\r\n    flags: (0x0401) ACC_PUBLIC, ACC_ABSTRACT\r\n\r\n  public default Bar getBar(java.lang.String);\r\n    descriptor: (Ljava/lang/String;)LBar;\r\n    flags: (0x0001) ACC_PUBLIC\r\n    Code:\r\n      stack=3, locals=2, args_size=2\r\n         0: aload_0\r\n         1: aload_1\r\n         2: iconst_1\r\n         3: invokeinterface #1,  3            // InterfaceMethod getBar:(Ljava/lang/String;I)LBar;\r\n         8: areturn\r\n      LineNumberTable:\r\n        line 5: 0\r\n      LocalVariableTable:\r\n        Start  Length  Slot  Name   Signature\r\n            0       9     0  this   LFoo;\r\n            0       9     1  name   Ljava/lang/String;\r\n}\r\n```","title":"Intellij java editor: could not show interface parameter names","body":"<p>The class file doesn't store parameter names for non-default methods. So if you don't have the source code of that code, after the decompilation, the IDEA has no idea about the actual parameter names before.</p>\n<p>If you use <code>javap -verbose Foo.class</code> to check it, you can see the bytecode contains the parameter name for the default method but not for the normal method:</p>\n<pre><code>Constant pool:\n   #1 = InterfaceMethodref #2.#3          // Foo.getBar:(Ljava/lang/String;I)LBar;\n   #2 = Class              #4             // Foo\n   #3 = NameAndType        #5:#6          // getBar:(Ljava/lang/String;I)LBar;\n   #4 = Utf8               Foo\n   #5 = Utf8               getBar\n   #6 = Utf8               (Ljava/lang/String;I)LBar;\n   #7 = Class              #8             // java/lang/Object\n   #8 = Utf8               java/lang/Object\n   #9 = Utf8               (Ljava/lang/String;)LBar;\n  #10 = Utf8               Code\n  #11 = Utf8               LineNumberTable\n  #12 = Utf8               LocalVariableTable\n  #13 = Utf8               this\n  #14 = Utf8               LFoo;\n  #15 = Utf8               name\n  #16 = Utf8               Ljava/lang/String;\n  #17 = Utf8               SourceFile\n  #18 = Utf8               Foo.java\n{\n  public abstract Bar getBar(java.lang.String, int);\n    descriptor: (Ljava/lang/String;I)LBar;\n    flags: (0x0401) ACC_PUBLIC, ACC_ABSTRACT\n\n  public default Bar getBar(java.lang.String);\n    descriptor: (Ljava/lang/String;)LBar;\n    flags: (0x0001) ACC_PUBLIC\n    Code:\n      stack=3, locals=2, args_size=2\n         0: aload_0\n         1: aload_1\n         2: iconst_1\n         3: invokeinterface #1,  3            // InterfaceMethod getBar:(Ljava/lang/String;I)LBar;\n         8: areturn\n      LineNumberTable:\n        line 5: 0\n      LocalVariableTable:\n        Start  Length  Slot  Name   Signature\n            0       9     0  this   LFoo;\n            0       9     1  name   Ljava/lang/String;\n}\n</code></pre>\n"}],"owner":{"account_id":4904476,"reputation":4812,"user_id":3951576,"accept_rate":50,"display_name":"eastwater"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75443303,"answer_count":1,"score":0,"last_activity_date":1676376130,"creation_date":1676333558,"question_id":75442335,"body_markdown":"Intellij java editor: could not show interface parameter names in a lib jar.\r\ne.g.,\r\n\r\n    public interface Foo {\r\n        public Bar getBar(String name, int type);\r\n    \r\n        public default Bar getBar(String name) {\r\n             return getBar(name, 1);\r\n        }\r\n    \r\n    }\r\n\r\nIn java editor:\r\n\r\n    Foo foo = getFoo();\r\n    foo.\r\n        getBar(String s, int i)\r\n        getBar(String name)\r\n\r\nWhen typing dot after foo, two methods show up. The first method shows parameter names as &quot;s&quot; and &quot;i&quot;, could not show the original parameter names (name, type).\r\n\r\nThe second method is &quot;default&quot; method and its parameter names show up correctly.\r\n\r\nIs there way for the editor to show the interface method parameter names ?\r\n\r\nThe lib jar source code is not available.\r\n\r\nUPDATE:\r\n------\r\n\r\n1. attaching javadoc directory to the lib jar did not help.\r\n2. compile with -parameters option, did not help. Seen from javap, class file contains all interface method parameters. So Intellij should be able to get them.\r\n\r\nNo#1(attaching javadoc) is the preferred solution. Option -parameters will make class file size bigger and may have performance overhead.\r\n","title":"Intellij java editor: could not show interface parameter names","body":"<p>Intellij java editor: could not show interface parameter names in a lib jar.\ne.g.,</p>\n<pre><code>public interface Foo {\n    public Bar getBar(String name, int type);\n\n    public default Bar getBar(String name) {\n         return getBar(name, 1);\n    }\n\n}\n</code></pre>\n<p>In java editor:</p>\n<pre><code>Foo foo = getFoo();\nfoo.\n    getBar(String s, int i)\n    getBar(String name)\n</code></pre>\n<p>When typing dot after foo, two methods show up. The first method shows parameter names as &quot;s&quot; and &quot;i&quot;, could not show the original parameter names (name, type).</p>\n<p>The second method is &quot;default&quot; method and its parameter names show up correctly.</p>\n<p>Is there way for the editor to show the interface method parameter names ?</p>\n<p>The lib jar source code is not available.</p>\n<h2>UPDATE:</h2>\n<ol>\n<li>attaching javadoc directory to the lib jar did not help.</li>\n<li>compile with -parameters option, did not help. Seen from javap, class file contains all interface method parameters. So Intellij should be able to get them.</li>\n</ol>\n<p>No#1(attaching javadoc) is the preferred solution. Option -parameters will make class file size bigger and may have performance overhead.</p>\n"},{"tags":["java","whatsapp","vert.x"],"owner":{"account_id":362603,"reputation":303,"user_id":705887,"display_name":"ramaadhitia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676375186,"creation_date":1676375186,"question_id":75447382,"body_markdown":"I have issue with using Vert.x httpclient or webclient class to call whatsapp API. If I make two API call **back to back** to whatsapp using the same httpclient / webclient object then I often encountered connection reset error.\r\n\r\nI&#39;m thinking that this issue is caused by whatsapp doesn&#39;t want to keep long http connection thus causing http connection in the connection pool becomes stale. I tried to set max pool size of httpclient to be 1 but I still encountered this connection reset issue. I tried to set max pool size of 0, but it turned out that it is not allowed.\r\n\r\nHow do I then disable connection pool in Vert.x httpclient / webclient class so that each http request using fresh new connection ?\r\n","title":"Disable connection pool on Vert.x httpclient or webclient","body":"<p>I have issue with using Vert.x httpclient or webclient class to call whatsapp API. If I make two API call <strong>back to back</strong> to whatsapp using the same httpclient / webclient object then I often encountered connection reset error.</p>\n<p>I'm thinking that this issue is caused by whatsapp doesn't want to keep long http connection thus causing http connection in the connection pool becomes stale. I tried to set max pool size of httpclient to be 1 but I still encountered this connection reset issue. I tried to set max pool size of 0, but it turned out that it is not allowed.</p>\n<p>How do I then disable connection pool in Vert.x httpclient / webclient class so that each http request using fresh new connection ?</p>\n"},{"tags":["java","spring","spring-boot"],"owner":{"account_id":6015718,"reputation":41,"user_id":4724665,"display_name":"Sach"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676375040,"creation_date":1676373807,"question_id":75447117,"body_markdown":"I am using Spring cloud Stream Kafka Binder and I have a requirement to inject retryable-exceptions values from environment variable, I tried below but I am getting error &quot;No Convertor found capable of converting from type [java.lang.String] to type [java.util.Map&lt;java.lang.Class&lt;java.lang.Throwable&gt;,java.lang.Boolean&gt;]&quot;\r\n```\r\nspring:\r\n   cloud:\r\n     stream:\r\n       bindings:\r\n         consumer-in:\r\n            consumer:\r\n              retryable-exceptions: {env.map.retryableExceptions:{}}\r\n```\r\nWhat is a correct syntax to inject Map from environment variable?\r\n\r\nThanks","title":"Spring cloud Stream Kafka, Inject value from Environment variables ie retryable-exceptions section","body":"<p>I am using Spring cloud Stream Kafka Binder and I have a requirement to inject retryable-exceptions values from environment variable, I tried below but I am getting error &quot;No Convertor found capable of converting from type [java.lang.String] to type [java.util.Map&lt;java.lang.Class&lt;java.lang.Throwable&gt;,java.lang.Boolean&gt;]&quot;</p>\n<pre><code>spring:\n   cloud:\n     stream:\n       bindings:\n         consumer-in:\n            consumer:\n              retryable-exceptions: {env.map.retryableExceptions:{}}\n</code></pre>\n<p>What is a correct syntax to inject Map from environment variable?</p>\n<p>Thanks</p>\n"},{"tags":["java","request","slack","verification","signing"],"comments":[{"owner":{"account_id":83913,"reputation":110658,"user_id":234938,"accept_rate":90,"display_name":"Christopher Orr"},"score":1,"creation_date":1531264561,"post_id":51264984,"comment_id":89528315,"body_markdown":"I&#39;m glad to see I&#39;m not the only one having problems. I&#39;ve been talking to Slack support about this, and we verified that my HMAC implementation is good, and I can no longer see what the issue is on my end. If this is a particularly new feature, perhaps they have an issue on their end? Anyway, perhaps try writing to support as your implementation looks generally ok to me.","body":"I&#39;m glad to see I&#39;m not the only one having problems. I&#39;ve been talking to Slack support about this, and we verified that my HMAC implementation is good, and I can no longer see what the issue is on my end. If this is a particularly new feature, perhaps they have an issue on their end? Anyway, perhaps try writing to support as your implementation looks generally ok to me."},{"owner":{"account_id":13930799,"reputation":111,"user_id":10059043,"display_name":"Majo"},"score":0,"creation_date":1531293012,"post_id":51264984,"comment_id":89535955,"body_markdown":"@ChristopherOrr Yes, I also wrote to the Slack support, they will look on that soon","body":"@ChristopherOrr Yes, I also wrote to the Slack support, they will look on that soon"}],"answers":[{"tags":[],"owner":{"account_id":5142474,"reputation":214,"user_id":4119378,"accept_rate":100,"display_name":"Stefan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1533686139,"creation_date":1533686139,"answer_id":51736914,"question_id":51264984,"body_markdown":"The following worked for us:\r\n\r\n    public enum SigningVerification {\r\n        VERIFIED,\r\n        DENIED\r\n    }\r\n\r\n    public SigningVerification verify(ImmutableSigningSecretRequest request) {\r\n        String basestring = String.join(&quot;:&quot;, &quot;v0&quot;, request.timestamp(), request.body());\r\n        SecretKeySpec secret_key = new SecretKeySpec(signingSecret.getBytes(), &quot;HmacSHA256&quot;);\r\n        Mac sha256_HMAC = Try.of(() -&gt; Mac.getInstance(&quot;HmacSHA256&quot;)).getOrElseThrow((SupplierRuntimeException) RuntimeException::new);\r\n        Try.run(() -&gt; sha256_HMAC.init(secret_key));\r\n        String hash = &quot;v0=&quot; + Hex.encodeHexString(sha256_HMAC.doFinal(basestring.getBytes()));\r\n        return hash.equals(request.verificationSignature()) ? VERIFIED : DENIED;\r\n    }\r\n\r\nController:\r\n\r\n    @PostMapping(&quot;/command&quot;)\r\n    public RichMessage postCommand(@RequestHeader(value = &quot;X-Slack-Request-Timestamp&quot;) String timestamp,\r\n                                   @RequestHeader(value = &quot;X-Slack-Signature&quot;) String signature,\r\n                                   @RequestParam(value = &quot;text&quot;, required = false) String message,\r\n                                   @RequestBody String body) {\r\n        SigningSecretVerification.SigningVerification verification = verifier.verify(ImmutableSigningSecretRequest\r\n                .builder()\r\n                .timestamp(timestamp)\r\n                .verificationSignature(signature)\r\n                .body(body)\r\n                .build()\r\n        );\r\n        return new RichMessage(message);\r\n\r\n    }\r\n\r\nWe basically just followed the steps in the Slack doc and it works fine.","title":"Slack request verification: Can&#39;t compute matching request digest using signed secret","body":"<p>The following worked for us:</p>\n\n<pre><code>public enum SigningVerification {\n    VERIFIED,\n    DENIED\n}\n\npublic SigningVerification verify(ImmutableSigningSecretRequest request) {\n    String basestring = String.join(\":\", \"v0\", request.timestamp(), request.body());\n    SecretKeySpec secret_key = new SecretKeySpec(signingSecret.getBytes(), \"HmacSHA256\");\n    Mac sha256_HMAC = Try.of(() -&gt; Mac.getInstance(\"HmacSHA256\")).getOrElseThrow((SupplierRuntimeException) RuntimeException::new);\n    Try.run(() -&gt; sha256_HMAC.init(secret_key));\n    String hash = \"v0=\" + Hex.encodeHexString(sha256_HMAC.doFinal(basestring.getBytes()));\n    return hash.equals(request.verificationSignature()) ? VERIFIED : DENIED;\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>@PostMapping(\"/command\")\npublic RichMessage postCommand(@RequestHeader(value = \"X-Slack-Request-Timestamp\") String timestamp,\n                               @RequestHeader(value = \"X-Slack-Signature\") String signature,\n                               @RequestParam(value = \"text\", required = false) String message,\n                               @RequestBody String body) {\n    SigningSecretVerification.SigningVerification verification = verifier.verify(ImmutableSigningSecretRequest\n            .builder()\n            .timestamp(timestamp)\n            .verificationSignature(signature)\n            .body(body)\n            .build()\n    );\n    return new RichMessage(message);\n\n}\n</code></pre>\n\n<p>We basically just followed the steps in the Slack doc and it works fine.</p>\n"},{"tags":[],"owner":{"account_id":7084070,"reputation":111,"user_id":5421397,"display_name":"snake_404"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534749860,"creation_date":1534749860,"answer_id":51925844,"question_id":51264984,"body_markdown":"I was having the same problem, In my controller I was receiving the body of the request as a `Map`, I received all the values but when I was calculating the hash I saw that the slack-signature and my hash wasn&#39;t the same.\r\n\r\nI tried to receive the request body as a `String` just like the @Stefan solution and that works for me, so, instead using `HttpEntity&lt;String&gt;` in your controller, you must receive the body as plain `String` with `@RequestBody String body` in your method argument, the reason is that slack sends encoded values in the request, `%2F` or `%3A`, with `HttpEntity` or `Map`, spring interprets that values as `/` and `:` and this is the reason why your hash is not equals as slack signature.\r\n\r\nHope this help you.","title":"Slack request verification: Can&#39;t compute matching request digest using signed secret","body":"<p>I was having the same problem, In my controller I was receiving the body of the request as a <code>Map</code>, I received all the values but when I was calculating the hash I saw that the slack-signature and my hash wasn't the same.</p>\n\n<p>I tried to receive the request body as a <code>String</code> just like the @Stefan solution and that works for me, so, instead using <code>HttpEntity&lt;String&gt;</code> in your controller, you must receive the body as plain <code>String</code> with <code>@RequestBody String body</code> in your method argument, the reason is that slack sends encoded values in the request, <code>%2F</code> or <code>%3A</code>, with <code>HttpEntity</code> or <code>Map</code>, spring interprets that values as <code>/</code> and <code>:</code> and this is the reason why your hash is not equals as slack signature.</p>\n\n<p>Hope this help you.</p>\n"},{"tags":[],"owner":{"account_id":91074,"reputation":7909,"user_id":250301,"accept_rate":88,"display_name":"Joel A. Villarreal Bertoldi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1543732782,"creation_date":1543732782,"answer_id":53578010,"question_id":51264984,"body_markdown":"I stumbled upon the very same problem on a Node.js implementation, and found this [Medium article](https://medium.com/@rajat_sriv/verifying-requests-from-slack-using-node-js-69a8b771b704) which states the following:\r\n\r\n&gt;Note: We cannot use the built-in querystring Node package because it only supports RFC3986 space encoding and Slack requires us to implement RFC1738 space encoding.\r\n\r\nWhat&#39;s the difference between both encodings? The way spaces are parsed:\r\n\r\n- RFC3986 will convert `&quot; &quot;` to `&quot;%20&quot;`\r\n- RFC1738 will convert `&quot; &quot;` to `&quot;+&quot;`\r\n\r\nFor Node.js, it suggests to install [qs](https://npmjs.com/package/qs) and to use it like this:\r\n\r\n&lt;pre&gt;&lt;code language=&quot;javascript&quot;&gt;\r\nqs.stringify(req.body, { format : &#39;RFC1738&#39; });\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\n","title":"Slack request verification: Can&#39;t compute matching request digest using signed secret","body":"<p>I stumbled upon the very same problem on a Node.js implementation, and found this <a href=\"https://medium.com/@rajat_sriv/verifying-requests-from-slack-using-node-js-69a8b771b704\" rel=\"noreferrer\">Medium article</a> which states the following:</p>\n\n<blockquote>\n  <p>Note: We cannot use the built-in querystring Node package because it only supports RFC3986 space encoding and Slack requires us to implement RFC1738 space encoding.</p>\n</blockquote>\n\n<p>What's the difference between both encodings? The way spaces are parsed:</p>\n\n<ul>\n<li>RFC3986 will convert <code>\" \"</code> to <code>\"%20\"</code></li>\n<li>RFC1738 will convert <code>\" \"</code> to <code>\"+\"</code></li>\n</ul>\n\n<p>For Node.js, it suggests to install <a href=\"https://npmjs.com/package/qs\" rel=\"noreferrer\">qs</a> and to use it like this:</p>\n\n<pre>\nqs.stringify(req.body, { format : 'RFC1738' });\n</pre>\n"},{"tags":[],"owner":{"account_id":218267,"reputation":224,"user_id":785114,"display_name":"Andrew Bruce"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1554973381,"creation_date":1554827757,"answer_id":55597441,"question_id":51264984,"body_markdown":"I had the same problem, using Spring&#39;s `@RequestBody`.\r\n\r\nAfter going to the trouble of setting up a [mitmproxy](https://mitmproxy.org/) between Slack and my Spring app in order to compare request bodies, it turned out that Spring was decoding e.g. asterisk characters instead of leaving them as `%2A`.\r\n\r\n&lt;del&gt;\r\nThe fix for me was to switch to asking for a [HttpServletRequest](https://github.com/boclips/terry/commit/c51382a5a6a9e96d5b19e22b038654bfb19b65b0#diff-79f3c274c9fa96261f8c9e09306a088bR37) (doesn&#39;t need a Spring annotation) and reading the raw body from it using `request.reader.use { it.readText() }` (using Kotlin&#39;s `use` to close the reader object after reading).\r\n&lt;/del&gt;\r\n\r\n**EDIT:** the above technique doesn&#39;t work, and getting the raw request body from Spring is a mission in itself! Ongoing.","title":"Slack request verification: Can&#39;t compute matching request digest using signed secret","body":"<p>I had the same problem, using Spring's <code>@RequestBody</code>.</p>\n\n<p>After going to the trouble of setting up a <a href=\"https://mitmproxy.org/\" rel=\"nofollow noreferrer\">mitmproxy</a> between Slack and my Spring app in order to compare request bodies, it turned out that Spring was decoding e.g. asterisk characters instead of leaving them as <code>%2A</code>.</p>\n\n<del>\nThe fix for me was to switch to asking for a [HttpServletRequest](https://github.com/boclips/terry/commit/c51382a5a6a9e96d5b19e22b038654bfb19b65b0#diff-79f3c274c9fa96261f8c9e09306a088bR37) (doesn't need a Spring annotation) and reading the raw body from it using `request.reader.use { it.readText() }` (using Kotlin's `use` to close the reader object after reading).\n</del>\n\n<p><strong>EDIT:</strong> the above technique doesn't work, and getting the raw request body from Spring is a mission in itself! Ongoing.</p>\n"},{"tags":[],"owner":{"account_id":6063546,"reputation":228,"user_id":4734658,"display_name":"Ben Denger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1561388386,"creation_date":1561121881,"answer_id":56703942,"question_id":51264984,"body_markdown":"we just stumbled along with the exact same problem. \r\nYour tip about the asterisk decoding helped us a lot! \r\nI don&#39;t know if you already solved your issue with caching the request, but maybe you want to take a look on our open source SlackBot SDK for Spring boot, where we were able to solve that issue: https://github.com/kreait/slack-spring-boot-starter/blob/master/starter/slack-spring-boot/src/main/kotlin/io/olaph/slack/broker/security/VerificationMethodArgumentResolver.kt \r\nThis VerificationMethodArgumentResolver basically receives the request, wraps it in a ContentCachingRequestWrapper, and invokes the internalResolveArgument of the normal [ArgumentResolvers][1] and verifies the request using the cached request. The tricky part here is, that the cache is empty until you&#39;ve requested its parameterMap. So it is important to validate the signing **after** you&#39;ve consumed the request.\r\n\r\n  [1]: https://github.com/kreait/slack-spring-boot-starter/blob/master/starter/slack-spring-boot/src/main/kotlin/io/olaph/slack/broker/configuration/InteractiveResponseArgumentResolver.kt","title":"Slack request verification: Can&#39;t compute matching request digest using signed secret","body":"<p>we just stumbled along with the exact same problem. \nYour tip about the asterisk decoding helped us a lot! \nI don't know if you already solved your issue with caching the request, but maybe you want to take a look on our open source SlackBot SDK for Spring boot, where we were able to solve that issue: <a href=\"https://github.com/kreait/slack-spring-boot-starter/blob/master/starter/slack-spring-boot/src/main/kotlin/io/olaph/slack/broker/security/VerificationMethodArgumentResolver.kt\" rel=\"nofollow noreferrer\">https://github.com/kreait/slack-spring-boot-starter/blob/master/starter/slack-spring-boot/src/main/kotlin/io/olaph/slack/broker/security/VerificationMethodArgumentResolver.kt</a> \nThis VerificationMethodArgumentResolver basically receives the request, wraps it in a ContentCachingRequestWrapper, and invokes the internalResolveArgument of the normal <a href=\"https://github.com/kreait/slack-spring-boot-starter/blob/master/starter/slack-spring-boot/src/main/kotlin/io/olaph/slack/broker/configuration/InteractiveResponseArgumentResolver.kt\" rel=\"nofollow noreferrer\">ArgumentResolvers</a> and verifies the request using the cached request. The tricky part here is, that the cache is empty until you've requested its parameterMap. So it is important to validate the signing <strong>after</strong> you've consumed the request.</p>\n"},{"tags":[],"owner":{"account_id":37969,"reputation":2730,"user_id":108758,"accept_rate":100,"display_name":"albogdano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1562872273,"creation_date":1562872273,"answer_id":56995889,"question_id":51264984,"body_markdown":"Here&#39;s what I found out on the topic:\r\n\r\n- Spring MVC will read the body of the request and will return a **different** body, where the order of parameters is changed. The reading part usually happens inside one of the first filters on the chain [`HiddenHttpMethodFilter`](https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/filter/HiddenHttpMethodFilter.java#L84) and this is the main reason why my signature verification failed.\r\n- The request is &quot;reconstructed&quot; incorrectly here [`ServletServerHttpRequest`](https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/http/server/ServletServerHttpRequest.java#L241) I&#39;m not sure if this should be filed as a bug or not, but it&#39;s definitely messed up.\r\n- If you use an injected `HttpEntity&lt;String&gt;` or `@RequestBody String body` you will receive the wrong body, not the raw content but the &quot;reconstructed&quot; one\r\n\r\nAnd now the **solution**:\r\n\r\n1. Create a filter for verifying Slack signatures and register it with the highest priority so it&#39;s on to top of the filter chain:\r\n```java\r\n@Bean\r\npublic FilterRegistrationBean&lt;SlackVerificationFilter&gt; slackVerificationFilterRegistrationBean() {\r\n\tString path = &quot;/slack&quot;;\r\n\tFilterRegistrationBean&lt;SlackVerificationFilter&gt; frb = new FilterRegistrationBean&lt;&gt;(new SlackVerificationFilter());\r\n\tfrb.setDispatcherTypes(EnumSet.of(DispatcherType.REQUEST));\r\n\tfrb.setName(&quot;csrfFilter&quot;);\r\n\tfrb.setAsyncSupported(true);\r\n\tfrb.addUrlPatterns(path);\r\n\tfrb.setMatchAfter(false);\r\n\tfrb.setEnabled(true);\r\n\tfrb.setOrder(Ordered.HIGHEST_PRECEDENCE);\r\n\treturn frb;\r\n}\r\n```\r\n2. Inside the filter, wrap the request with some sort of `HttpServletRequestWrapper` like this:\r\n```java\r\npublic class SlackVerificationFilter extends GenericFilterBean {\r\n\tpublic void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {\r\n\t\tfinal BufferedRequestWrapper request = new BufferedRequestWrapper((HttpServletRequest) req);\r\n\t\tfinal HttpServletResponse response = (HttpServletResponse) res;\r\n\r\n\t\tString rawBody = IOUtils.toString(request.getInputStream(), &quot;UTF-8&quot;);\r\n\t\t// do signature verification here\r\n\t\tchain.doFilter(request, response);\r\n\t}\r\n}\r\n```\r\nI won&#39;t go into details about the request wrapper. There are lots of examples of it on this site and elsewhere.\r\n\r\n3. Your `HttpServletRequestWrapper` *must implement* the following methods:\r\n```java\r\npublic ServletInputStream getInputStream();\r\npublic BufferedReader getReader() throws IOException;\r\npublic Map&lt;String, String[]&gt; getParameterMap();\r\npublic String getParameter(String name);\r\n```\r\n\r\nAfter this you should no longer have problems verifying Slack signatures.\r\n\r\nIn my case, I didn&#39;t have issues with any of the encoded characters mentioned above (`%20`, `%2A`, etc). I only had problems verifying signatures of slash command requests. Message action request were verified correctly because they only had 1 request parameter in the body (`payload`).\r\n","title":"Slack request verification: Can&#39;t compute matching request digest using signed secret","body":"<p>Here's what I found out on the topic:</p>\n\n<ul>\n<li>Spring MVC will read the body of the request and will return a <strong>different</strong> body, where the order of parameters is changed. The reading part usually happens inside one of the first filters on the chain <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/filter/HiddenHttpMethodFilter.java#L84\" rel=\"nofollow noreferrer\"><code>HiddenHttpMethodFilter</code></a> and this is the main reason why my signature verification failed.</li>\n<li>The request is \"reconstructed\" incorrectly here <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/http/server/ServletServerHttpRequest.java#L241\" rel=\"nofollow noreferrer\"><code>ServletServerHttpRequest</code></a> I'm not sure if this should be filed as a bug or not, but it's definitely messed up.</li>\n<li>If you use an injected <code>HttpEntity&lt;String&gt;</code> or <code>@RequestBody String body</code> you will receive the wrong body, not the raw content but the \"reconstructed\" one</li>\n</ul>\n\n<p>And now the <strong>solution</strong>:</p>\n\n<ol>\n<li>Create a filter for verifying Slack signatures and register it with the highest priority so it's on to top of the filter chain:</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic FilterRegistrationBean&lt;SlackVerificationFilter&gt; slackVerificationFilterRegistrationBean() {\n    String path = \"/slack\";\n    FilterRegistrationBean&lt;SlackVerificationFilter&gt; frb = new FilterRegistrationBean&lt;&gt;(new SlackVerificationFilter());\n    frb.setDispatcherTypes(EnumSet.of(DispatcherType.REQUEST));\n    frb.setName(\"csrfFilter\");\n    frb.setAsyncSupported(true);\n    frb.addUrlPatterns(path);\n    frb.setMatchAfter(false);\n    frb.setEnabled(true);\n    frb.setOrder(Ordered.HIGHEST_PRECEDENCE);\n    return frb;\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>Inside the filter, wrap the request with some sort of <code>HttpServletRequestWrapper</code> like this:</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class SlackVerificationFilter extends GenericFilterBean {\n    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {\n        final BufferedRequestWrapper request = new BufferedRequestWrapper((HttpServletRequest) req);\n        final HttpServletResponse response = (HttpServletResponse) res;\n\n        String rawBody = IOUtils.toString(request.getInputStream(), \"UTF-8\");\n        // do signature verification here\n        chain.doFilter(request, response);\n    }\n}\n</code></pre>\n\n<p>I won't go into details about the request wrapper. There are lots of examples of it on this site and elsewhere.</p>\n\n<ol start=\"3\">\n<li>Your <code>HttpServletRequestWrapper</code> <em>must implement</em> the following methods:</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>public ServletInputStream getInputStream();\npublic BufferedReader getReader() throws IOException;\npublic Map&lt;String, String[]&gt; getParameterMap();\npublic String getParameter(String name);\n</code></pre>\n\n<p>After this you should no longer have problems verifying Slack signatures.</p>\n\n<p>In my case, I didn't have issues with any of the encoded characters mentioned above (<code>%20</code>, <code>%2A</code>, etc). I only had problems verifying signatures of slash command requests. Message action request were verified correctly because they only had 1 request parameter in the body (<code>payload</code>).</p>\n"},{"tags":[],"owner":{"account_id":149602,"reputation":543,"user_id":2120131,"display_name":"Auke"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1592380949,"creation_date":1592380949,"answer_id":62424226,"question_id":51264984,"body_markdown":"I also got bitten by this. Using `@RequestBody` does not give you back the original body as @andrew-bruce also noted. Specifically for me it failed on the original `%2A` ending up as an unencoded `*` when getting the body like that. Obviously that fails the verification.\r\n\r\nI ended up with this solution:\r\n\r\n1. a filter combined with a HttpServletRequest wrapper that allows to read the body multiple times:\r\n\r\n```java\r\nimport org.springframework.web.filter.OncePerRequestFilter\r\nimport javax.servlet.FilterChain\r\nimport javax.servlet.http.HttpServletRequest\r\nimport javax.servlet.http.HttpServletResponse\r\n\r\n/**\r\n * To verify if requests are coming from Slack we need to implement this:\r\n * https://api.slack.com/authentication/verifying-requests-from-slack. Luckily the Bolt framework already implements\r\n * this for us, however we need to provide it with a body that is unaltered. Somewhere in Springs filterchain Spring\r\n * will already have consumed the [HttpServletRequest#inputstream], so we cannot get it from the [HttpServletRequest]\r\n * directly. Spring obviously provides a [org.springframework.web.bind.annotation.RequestBody] annotation, but this is \r\n * slightly different from the original body. This servlet filter will be put as the very first in\r\n * the chain (see [SlackConfig#multiReadRequestFilter] should make sure\r\n * that we can re-read it and construct the raw body, so that the verification doesn&#39;t fail.\r\n */\r\nclass MultiReadHttpServletFilter : OncePerRequestFilter() {\r\n\r\n    override fun doFilterInternal(request: HttpServletRequest, response: HttpServletResponse, filterChain: FilterChain) {\r\n        val multiReadHttpServletRequest = MultiReadHttpServletRequest(request)\r\n\r\n        filterChain.doFilter(multiReadHttpServletRequest, response)\r\n    }\r\n}\r\n\r\n```\r\n\r\n```java\r\nimport org.apache.commons.io.IOUtils\r\nimport java.io.ByteArrayInputStream\r\nimport java.io.IOException\r\nimport javax.servlet.ReadListener\r\nimport javax.servlet.ServletInputStream\r\nimport javax.servlet.http.HttpServletRequest\r\nimport javax.servlet.http.HttpServletRequestWrapper\r\n\r\n\r\nclass MultiReadHttpServletRequest(request: HttpServletRequest) : HttpServletRequestWrapper(request) {\r\n\r\n    private var body: ByteArray = IOUtils.toByteArray(request.inputStream)\r\n\r\n    @Throws(IOException::class)\r\n    override fun getInputStream(): ServletInputStream {\r\n        return object : ServletInputStream() {\r\n            val bais = ByteArrayInputStream(body)\r\n\r\n            override fun isReady(): Boolean = true\r\n\r\n            override fun isFinished(): Boolean = bais.available() == 0\r\n\r\n            override fun read(): Int = bais.read()\r\n\r\n            override fun setReadListener(readListener: ReadListener) {\r\n                throw NotImplementedError(&quot;Not implemented!&quot;)\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n2. Configure it as first in the chain. Because this filter actually consumes things in-memory I&#39;ve specifically targeted a specific path, so it&#39;s only for the incoming Slack events in this case.\r\n\r\n```java\r\n    @Bean\r\n    fun multiReadRequestFilter(): FilterRegistrationBean&lt;MultiReadHttpServletFilter&gt; {\r\n        // this needs to match the path(s) of the controller SlackAppController\r\n        val urlPatterns = slacks.allByKey().keys.map { &quot;/v2/$it/slack/events&quot; }.toTypedArray()\r\n\r\n        val registrationBean = FilterRegistrationBean&lt;MultiReadHttpServletFilter&gt;()\r\n        registrationBean.filter = MultiReadHttpServletFilter()\r\n        registrationBean.addUrlPatterns(*urlPatterns)\r\n        registrationBean.order = Ordered.HIGHEST_PRECEDENCE\r\n\r\n        return registrationBean\r\n    }\r\n```\r\n\r\n3. Now I can use it to retrieve the &#39;real&#39; raw body:\r\n\r\n```java\r\n@RestController\r\n@RequestMapping(&quot;/v2/{slackId}/slack/events&quot;)\r\nclass SlackAppController() {\r\n\r\n    // ...\r\n\r\n    @PostMapping\r\n    fun handle(\r\n            @PathVariable(&quot;slackId&quot;) slackId: String,\r\n            httpServletRequest: HttpServletRequest,\r\n            @RequestParam queryStringParams: MultiValueMap&lt;String, String&gt;,\r\n            @RequestHeader headers: MultiValueMap&lt;String, String&gt;): ResponseEntity&lt;*&gt; {\r\n\r\n        val body = IOUtils.toString(httpServletRequest.inputStream, StandardCharsets.UTF_8)\r\n\r\n        // ...\r\n    }\r\n}\r\n```","title":"Slack request verification: Can&#39;t compute matching request digest using signed secret","body":"<p>I also got bitten by this. Using <code>@RequestBody</code> does not give you back the original body as @andrew-bruce also noted. Specifically for me it failed on the original <code>%2A</code> ending up as an unencoded <code>*</code> when getting the body like that. Obviously that fails the verification.</p>\n\n<p>I ended up with this solution:</p>\n\n<ol>\n<li>a filter combined with a HttpServletRequest wrapper that allows to read the body multiple times:</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.web.filter.OncePerRequestFilter\nimport javax.servlet.FilterChain\nimport javax.servlet.http.HttpServletRequest\nimport javax.servlet.http.HttpServletResponse\n\n/**\n * To verify if requests are coming from Slack we need to implement this:\n * https://api.slack.com/authentication/verifying-requests-from-slack. Luckily the Bolt framework already implements\n * this for us, however we need to provide it with a body that is unaltered. Somewhere in Springs filterchain Spring\n * will already have consumed the [HttpServletRequest#inputstream], so we cannot get it from the [HttpServletRequest]\n * directly. Spring obviously provides a [org.springframework.web.bind.annotation.RequestBody] annotation, but this is \n * slightly different from the original body. This servlet filter will be put as the very first in\n * the chain (see [SlackConfig#multiReadRequestFilter] should make sure\n * that we can re-read it and construct the raw body, so that the verification doesn't fail.\n */\nclass MultiReadHttpServletFilter : OncePerRequestFilter() {\n\n    override fun doFilterInternal(request: HttpServletRequest, response: HttpServletResponse, filterChain: FilterChain) {\n        val multiReadHttpServletRequest = MultiReadHttpServletRequest(request)\n\n        filterChain.doFilter(multiReadHttpServletRequest, response)\n    }\n}\n\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.commons.io.IOUtils\nimport java.io.ByteArrayInputStream\nimport java.io.IOException\nimport javax.servlet.ReadListener\nimport javax.servlet.ServletInputStream\nimport javax.servlet.http.HttpServletRequest\nimport javax.servlet.http.HttpServletRequestWrapper\n\n\nclass MultiReadHttpServletRequest(request: HttpServletRequest) : HttpServletRequestWrapper(request) {\n\n    private var body: ByteArray = IOUtils.toByteArray(request.inputStream)\n\n    @Throws(IOException::class)\n    override fun getInputStream(): ServletInputStream {\n        return object : ServletInputStream() {\n            val bais = ByteArrayInputStream(body)\n\n            override fun isReady(): Boolean = true\n\n            override fun isFinished(): Boolean = bais.available() == 0\n\n            override fun read(): Int = bais.read()\n\n            override fun setReadListener(readListener: ReadListener) {\n                throw NotImplementedError(\"Not implemented!\")\n            }\n        }\n    }\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>Configure it as first in the chain. Because this filter actually consumes things in-memory I've specifically targeted a specific path, so it's only for the incoming Slack events in this case.</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    fun multiReadRequestFilter(): FilterRegistrationBean&lt;MultiReadHttpServletFilter&gt; {\n        // this needs to match the path(s) of the controller SlackAppController\n        val urlPatterns = slacks.allByKey().keys.map { \"/v2/$it/slack/events\" }.toTypedArray()\n\n        val registrationBean = FilterRegistrationBean&lt;MultiReadHttpServletFilter&gt;()\n        registrationBean.filter = MultiReadHttpServletFilter()\n        registrationBean.addUrlPatterns(*urlPatterns)\n        registrationBean.order = Ordered.HIGHEST_PRECEDENCE\n\n        return registrationBean\n    }\n</code></pre>\n\n<ol start=\"3\">\n<li>Now I can use it to retrieve the 'real' raw body:</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(\"/v2/{slackId}/slack/events\")\nclass SlackAppController() {\n\n    // ...\n\n    @PostMapping\n    fun handle(\n            @PathVariable(\"slackId\") slackId: String,\n            httpServletRequest: HttpServletRequest,\n            @RequestParam queryStringParams: MultiValueMap&lt;String, String&gt;,\n            @RequestHeader headers: MultiValueMap&lt;String, String&gt;): ResponseEntity&lt;*&gt; {\n\n        val body = IOUtils.toString(httpServletRequest.inputStream, StandardCharsets.UTF_8)\n\n        // ...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6795316,"reputation":306,"user_id":5507700,"display_name":"HeffZilla"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648575159,"creation_date":1648574499,"answer_id":71666313,"question_id":51264984,"body_markdown":"I had this same issue using `@RequestBody` and not being able to validate the request. Here&#39;s how I fixed it in Kotlin. It should translate to Java fairly easily.\r\n\r\n```\r\nimport org.springframework.web.bind.annotation.*\r\nimport org.apache.commons.io.IOUtils\r\nimport javax.crypto.Mac\r\nimport javax.crypto.spec.SecretKeySpec\r\nimport javax.servlet.http.HttpServletRequest\r\nimport org.apache.commons.codec.binary.Hex\r\n\r\n\r\nfun validateSlackWebhook(\r\n    @RequestHeader(&quot;X-Slack-Request-Timestamp&quot;) slackRequestTimestamp: String,\r\n    @RequestHeader(&quot;X-Slack-Signature&quot;) slackSignature: String,\r\n    request: HttpServletRequest,\r\n    ) {\r\n        val body = IOUtils.toString(request.reader)\r\n        val basestring = &quot;v0:$slackRequestTimestamp:$body&quot;\r\n\r\n        val sha256Hmac = Mac.getInstance(&quot;HmacSHA256&quot;)\r\n        val secretKey = SecretKeySpec(slackSigningSecret.toByteArray(), &quot;HmacSHA256&quot;)\r\n        sha256Hmac.init(secretKey)\r\n\r\n        val finalHex = &quot;v0=${Hex.encodeHexString(sha256Hmac.doFinal(basestring.toByteArray()))}&quot;\r\n        val validated = finalHex.compareTo(slackSignature) == 0\r\n\r\n        if (!validated) {\r\n            // Code to run if request was not validated\r\n            return\r\n        }\r\n\r\n        // Code to run if request was validated\r\n    }\r\n```\r\n","title":"Slack request verification: Can&#39;t compute matching request digest using signed secret","body":"<p>I had this same issue using <code>@RequestBody</code> and not being able to validate the request. Here's how I fixed it in Kotlin. It should translate to Java fairly easily.</p>\n<pre><code>import org.springframework.web.bind.annotation.*\nimport org.apache.commons.io.IOUtils\nimport javax.crypto.Mac\nimport javax.crypto.spec.SecretKeySpec\nimport javax.servlet.http.HttpServletRequest\nimport org.apache.commons.codec.binary.Hex\n\n\nfun validateSlackWebhook(\n    @RequestHeader(&quot;X-Slack-Request-Timestamp&quot;) slackRequestTimestamp: String,\n    @RequestHeader(&quot;X-Slack-Signature&quot;) slackSignature: String,\n    request: HttpServletRequest,\n    ) {\n        val body = IOUtils.toString(request.reader)\n        val basestring = &quot;v0:$slackRequestTimestamp:$body&quot;\n\n        val sha256Hmac = Mac.getInstance(&quot;HmacSHA256&quot;)\n        val secretKey = SecretKeySpec(slackSigningSecret.toByteArray(), &quot;HmacSHA256&quot;)\n        sha256Hmac.init(secretKey)\n\n        val finalHex = &quot;v0=${Hex.encodeHexString(sha256Hmac.doFinal(basestring.toByteArray()))}&quot;\n        val validated = finalHex.compareTo(slackSignature) == 0\n\n        if (!validated) {\n            // Code to run if request was not validated\n            return\n        }\n\n        // Code to run if request was validated\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15811439,"reputation":302,"user_id":11408375,"display_name":"hdsuperman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676374764,"creation_date":1676374764,"answer_id":75447291,"question_id":51264984,"body_markdown":"I finally solved it by looking at the official SDK source code of Slack!\r\n\r\nhttps://github.com/slackapi/java-slack-sdk/blob/f283e45601157a0d2483ea3d3e8074e80b81a0e6/slack-app-backend/src/main/java/com/slack/api/app_backend/SlackSignature.java#L88-L122\r\n\r\n```java\r\npublic String generate(String slackRequestTimestamp, String requestBody) {\r\n            if (slackRequestTimestamp == null) {\r\n                return null;\r\n            }\r\n\r\n            // 1) Retrieve the X-Slack-Request-Timestamp header on the HTTP request, and the body of the request.\r\n            // &quot;slackRequestTimestamp&quot; here\r\n\r\n            // 2) Concatenate the version number, the timestamp, and the body of the request to form a basestring.\r\n            //    Use a colon as the delimiter between the three elements.\r\n            //    For example, v0:123456789:command=/weather&amp;text=94070. The version number right now is always v0.\r\n            String baseString = &quot;v0:&quot; + slackRequestTimestamp + &quot;:&quot; + requestBody;\r\n\r\n            // 3) With the help of HMAC SHA256 implemented in your favorite programming, hash the above basestring,\r\n            //    using the Slack Signing Secret as the key.\r\n            SecretKeySpec sk = new SecretKeySpec(slackSigningSecret.getBytes(), ALGORITHM);\r\n            try {\r\n                Mac mac = Mac.getInstance(ALGORITHM);\r\n                mac.init(sk);\r\n                byte[] macBytes = mac.doFinal(baseString.getBytes());\r\n                StringBuilder hashValue = new StringBuilder(2 * macBytes.length);\r\n                for (byte macByte : macBytes) {\r\n                    hashValue.append(String.format(&quot;%02x&quot;, macByte &amp; 0xff));\r\n                }\r\n                return &quot;v0=&quot; + hashValue.toString();\r\n\r\n                // 4) Compare this computed signature to the X-Slack-Signature header on the request.\r\n\r\n            } catch (NoSuchAlgorithmException | InvalidKeyException e) {\r\n                log.error(&quot;Failed to hash the base string value with HMAC-SHA256 because {}&quot;, e.getMessage(), e);\r\n                return null;\r\n            }\r\n        }\r\n```","title":"Slack request verification: Can&#39;t compute matching request digest using signed secret","body":"<p>I finally solved it by looking at the official SDK source code of Slack!</p>\n<p><a href=\"https://github.com/slackapi/java-slack-sdk/blob/f283e45601157a0d2483ea3d3e8074e80b81a0e6/slack-app-backend/src/main/java/com/slack/api/app_backend/SlackSignature.java#L88-L122\" rel=\"nofollow noreferrer\">https://github.com/slackapi/java-slack-sdk/blob/f283e45601157a0d2483ea3d3e8074e80b81a0e6/slack-app-backend/src/main/java/com/slack/api/app_backend/SlackSignature.java#L88-L122</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>public String generate(String slackRequestTimestamp, String requestBody) {\n            if (slackRequestTimestamp == null) {\n                return null;\n            }\n\n            // 1) Retrieve the X-Slack-Request-Timestamp header on the HTTP request, and the body of the request.\n            // &quot;slackRequestTimestamp&quot; here\n\n            // 2) Concatenate the version number, the timestamp, and the body of the request to form a basestring.\n            //    Use a colon as the delimiter between the three elements.\n            //    For example, v0:123456789:command=/weather&amp;text=94070. The version number right now is always v0.\n            String baseString = &quot;v0:&quot; + slackRequestTimestamp + &quot;:&quot; + requestBody;\n\n            // 3) With the help of HMAC SHA256 implemented in your favorite programming, hash the above basestring,\n            //    using the Slack Signing Secret as the key.\n            SecretKeySpec sk = new SecretKeySpec(slackSigningSecret.getBytes(), ALGORITHM);\n            try {\n                Mac mac = Mac.getInstance(ALGORITHM);\n                mac.init(sk);\n                byte[] macBytes = mac.doFinal(baseString.getBytes());\n                StringBuilder hashValue = new StringBuilder(2 * macBytes.length);\n                for (byte macByte : macBytes) {\n                    hashValue.append(String.format(&quot;%02x&quot;, macByte &amp; 0xff));\n                }\n                return &quot;v0=&quot; + hashValue.toString();\n\n                // 4) Compare this computed signature to the X-Slack-Signature header on the request.\n\n            } catch (NoSuchAlgorithmException | InvalidKeyException e) {\n                log.error(&quot;Failed to hash the base string value with HMAC-SHA256 because {}&quot;, e.getMessage(), e);\n                return null;\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":13930799,"reputation":111,"user_id":10059043,"display_name":"Majo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5900,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":9,"score":11,"last_activity_date":1676374764,"creation_date":1531225017,"question_id":51264984,"body_markdown":"I&#39;m implementing interactive messages on Slack, which contains some action buttons. Using [Slack App][1] I&#39;m able to handle Slack users clicking the buttons on my Java Springboot API. \r\n\r\nTo this moment, everything is fine. However, I struggle to compute matching request signature (digest) to verify, that it actually comes from Slack. I read all the documentation for that on [Slack verification documentation page][2]. \r\n\r\nThe page decribes, that the signature has to be computed as a [HMAC][3] SHA256 hash, using Signing Secret as a key and content as concatenation of slack version, timestamp and request body, for example:\r\n\r\n    v0:123456789:command=/weather&amp;text=94070\r\n\r\nOn the page is stated:\r\n\r\n&gt; ...Evaluate only the raw HTTP request body when computing signatures.\r\n\r\n... so I&#39;m not encoding/deserializing the request before hash computing (I&#39;ve attached my received request from Slack below)\r\n\r\nTo compute the hash I use the code found on [StackOverflow][4]:\r\n\r\n    private String computeMessageDigest(String content) {\r\n        final String ALGORITHM = &quot;HmacSHA256&quot;;\r\n        final String UTF_8 = &quot;UTF-8&quot;;\r\n\r\n        try {\r\n            Key signingKey = new SecretKeySpec(signingSecret.getBytes(UTF_8), ALGORITHM);\r\n            Mac mac = Mac.getInstance(ALGORITHM);\r\n            mac.init(signingKey);\r\n\r\n            return Hex.encodeHexString(mac.doFinal(content.getBytes(UTF_8)));\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\nI tried also this [online hash generator][5] to compare the results, and they were the same.\r\n\r\nThe request received from Slack looks like this:\r\n\r\n    {\r\n    \t&quot;headers&quot;: {\r\n    \t\t&quot;x-forwarded-for&quot;: [&quot;::ffff:52.72.111.29&quot;],\r\n    \t\t&quot;x-forwarded-proto&quot;: [&quot;https&quot;],\r\n    \t\t&quot;x-pagekite-port&quot;: [&quot;443&quot;],\r\n    \t\t&quot;host&quot;: [&quot;inqool.pagekite.me&quot;],\r\n    \t\t&quot;user-agent&quot;: [&quot;Slackbot 1.0 (+https://api.slack.com/robots)&quot;],\r\n    \t\t&quot;accept-encoding&quot;: [&quot;gzip,deflate&quot;],\r\n    \t\t&quot;accept&quot;: [&quot;application/json,*/*&quot;],\r\n    \t\t&quot;x-slack-signature&quot;: [&quot;v0=87fbffb089501ba823991cc20058df525767a8a2287b3809f9afff3e3b600dd8&quot;],\r\n    \t\t&quot;x-slack-request-timestamp&quot;: [&quot;1531221943&quot;],\r\n    \t\t&quot;content-length&quot;: [&quot;2731&quot;],\r\n    \t\t&quot;Content-Type&quot;: [&quot;application/x-www-form-urlencoded;charset=UTF-8&quot;]\r\n    \t},\r\n    \t&quot;body&quot;: &quot;payload=%7B%22type%22%3A%22interactive_message%22%2C%22actions%22%3A%5B%7B%22name%22%3A%22reject_btn%22%2C%22type%22%3A%22button%22%2C%22value%22%3A%22false%22%7D%5D%2C%22callback_id%22%3A%22artwork%3D40d7a87f-466c-4fc9-b454-09ce020d4465%22%2C%22team%22%3A%7B%22id%22%3A%22T03NP6SA7%22%2C%22domain%22%3A%22artstaq%22%7D%2C%22channel%22%3A%7B%22id%22%3A%22G8F2WR4FJ%22%2C%22name%22%3A%22privategroup%22%7D%2C%22user%22%3A%7B%22id%22%3A%22U66T9QX60%22%2C%22name%22%3A%22majo%22%7D%2C%22action_ts%22%3A%221531221943.512498%22%2C%22message_ts%22%3A%221531221198.000225%22%2C%22attachment_id%22%3A%221%22%2C%22token%22%3A%22ZABrZDXgJCOOLNau5mXnfNQR%22%2C%22is_app_unfurl%22%3Afalse%2C%22original_message%22%3A%7B%22text%22%3A%22User+just+put+item+on+*EXCHANGE*.%22%2C%22bot_id%22%3A%22BBM1W4QEL%22%2C%22attachments%22%3A%5B%7B%22author_name%22%3A%22Slack+Test%3B+slack%40test.com%22%2C%22callback_id%22%3A%22artwork%3D40d7a87f-466c-4fc9-b454-09ce020d4465%22%2C%22fallback%22%3A%22Slack+Test%3B+%3Cmailto%3Aslack%40test.com%7Cslack%40test.com%3E+just+put+item+Panenka+%5C%2F+Doll+by+artist+Jaroslav+Vale%5Cu010dka+into+ON+REQUEST+mode%22%2C%22text%22%3A%22%3Chttp%3A%5C%2F%5C%2Flocalhost%3A8080%5C%2Fartist%5C%2F609cd328-d533-4ab0-b982-ec2f104476f2%7CJaroslav+Vale%5Cu010dka%3E%22%2C%22title%22%3A%22Panenka+%5C%2F+Doll%22%2C%22footer%22%3A%22ARTSTAQ+Slack+Reporter%22%2C%22id%22%3A1%2C%22title_link%22%3A%22http%3A%5C%2F%5C%2Flocalhost%3A8080%5C%2Fartwork%5C%2F40d7a87f-466c-4fc9-b454-09ce020d4465%22%2C%22color%22%3A%22f0d0ad%22%2C%22fields%22%3A%5B%7B%22title%22%3A%22Trading+type%22%2C%22value%22%3A%22ON+REQUEST%22%2C%22short%22%3Atrue%7D%5D%2C%22actions%22%3A%5B%7B%22id%22%3A%221%22%2C%22name%22%3A%22approve_btn%22%2C%22text%22%3A%22APPROVE%22%2C%22type%22%3A%22button%22%2C%22value%22%3A%22true%22%2C%22style%22%3A%22primary%22%2C%22confirm%22%3A%7B%22text%22%3A%22Do+you+really+want+to+approve+this+artwork%3F%22%2C%22title%22%3A%22Approve+artwork%22%2C%22ok_text%22%3A%22Yes%22%2C%22dismiss_text%22%3A%22Cancel%22%7D%7D%2C%7B%22id%22%3A%222%22%2C%22name%22%3A%22reject_btn%22%2C%22text%22%3A%22REJECT%22%2C%22type%22%3A%22button%22%2C%22value%22%3A%22false%22%2C%22style%22%3A%22danger%22%2C%22confirm%22%3A%7B%22text%22%3A%22Do+you+really+want+to+reject+this+artwork%3F%22%2C%22title%22%3A%22Reject+artwork%22%2C%22ok_text%22%3A%22Yes%22%2C%22dismiss_text%22%3A%22Cancel%22%7D%7D%5D%7D%5D%2C%22type%22%3A%22message%22%2C%22subtype%22%3A%22bot_message%22%2C%22ts%22%3A%221531221198.000225%22%7D%2C%22response_url%22%3A%22https%3A%5C%2F%5C%2Fhooks.slack.com%5C%2Factions%5C%2FT03NP6SA7%5C%2F395760858899%5C%2FGlP9jsNQak7FqEciEHhscx4L%22%2C%22trigger_id%22%3A%22395632563524.3771230347.851ab60578de033398338a9faeb41a15%22%7D&quot;\r\n    }\r\n\r\nWhen I computed the HMAC SHA256 hash, I got `561034bb6860c07a6b4eaf245b6da3ea869c7806c7f7be20b1a830b6d25c54c8` but I should get `87fbffb089501ba823991cc20058df525767a8a2287b3809f9afff3e3b600dd8`, as in the request header.\r\n\r\nI also tried to compute the hash from the URL decoded body, but still not be able to get the matching signature.\r\n\r\nAm I doing something wrong? Thanks for the answers/hints.\r\n\r\n----------\r\n\r\n**EDIT:** here&#39;s the whole source code of my REST controller and request verifier:\r\n\r\n    package com.artstaq.resource;\r\n    \r\n    import com.artstaq.integration.slack.SlackRequestVerifier;\r\n    import org.springframework.http.HttpEntity;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RequestMethod;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    import javax.inject.Inject;\r\n    \r\n    @RestController\r\n    @RequestMapping(&quot;/content_admin&quot;)\r\n    public class ContentAdminResource {\r\n    \r\n        private SlackRequestVerifier slackVerifier;\r\n    \r\n    \r\n        @RequestMapping(value = &quot;/slack/artwork/resolve&quot;, method = RequestMethod.POST, consumes = MediaType.APPLICATION_FORM_URLENCODED_VALUE)\r\n        public void resolve(HttpEntity&lt;String&gt; request) {\r\n            slackVerifier.verifySlackRequest(request);\r\n        }\r\n    \r\n    \r\n        @Inject\r\n        public void setSlackVerifier(SlackRequestVerifier slackVerifier) {\r\n            this.slackVerifier = slackVerifier;\r\n        }\r\n    }\r\n\r\n----------\r\n\r\n    package com.artstaq.integration.slack;\r\n    \r\n    import com.artstaq.exception.SignatureVerificationException;\r\n    import com.artstaq.exception.TimestampTooOldException;\r\n    import org.apache.commons.codec.binary.Hex;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.http.HttpEntity;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    import javax.crypto.Mac;\r\n    import javax.crypto.spec.SecretKeySpec;\r\n    import java.security.Key;\r\n    import java.time.Instant;\r\n    import java.time.temporal.ChronoUnit;\r\n    \r\n    /**\r\n     * Class providing request verification received from Slack\r\n     */\r\n    @Component\r\n    public class SlackRequestVerifier {\r\n    \r\n        @Value(&quot;${integration.slack.version:v0}&quot;)\r\n        private String version;\r\n    \r\n        @Value(&quot;${integration.slack.signingSecret}&quot;)\r\n        private String signingSecret;\r\n    \r\n        /**\r\n         * Verifies the integrity of received Slack request.\r\n         */\r\n        public void verifySlackRequest(HttpEntity&lt;String&gt; request) {\r\n            String timestamp = request.getHeaders().getFirst(SlackHeaders.TIMESTAMP);\r\n            Instant timeInstant = Instant.ofEpochSecond(Long.valueOf(timestamp));\r\n            if (timeInstant.plus(5, ChronoUnit.MINUTES).compareTo(Instant.now()) &lt; 0) {\r\n                throw new TimestampTooOldException(timeInstant);\r\n            }\r\n    \r\n            String expectedDigest = request.getHeaders().getFirst(SlackHeaders.SIGNATURE);\r\n    \r\n            String basestring = String.join(&quot;:&quot;, version, timestamp, request.getBody());\r\n            String computedDigest = version + &quot;=&quot; + computeMessageDigest(basestring);\r\n    \r\n            if (!computedDigest.equals(expectedDigest)) {\r\n                throw new SignatureVerificationException(expectedDigest, computedDigest);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Compute HMAC SHA256 digest for given content using defined slack signing secret\r\n         */\r\n        private String computeMessageDigest(String content) {\r\n            final String ALGORITHM = &quot;HmacSHA256&quot;;\r\n            final String UTF_8 = &quot;UTF-8&quot;;\r\n    \r\n            try {\r\n                Key signingKey = new SecretKeySpec(signingSecret.getBytes(UTF_8), ALGORITHM);\r\n                Mac mac = Mac.getInstance(ALGORITHM);\r\n                mac.init(signingKey);\r\n    \r\n                return Hex.encodeHexString(mac.doFinal(content.getBytes(UTF_8)));\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    \r\n    \r\n        private static class SlackHeaders {\r\n            private static final String TIMESTAMP = &quot;X-Slack-Request-Timestamp&quot;;\r\n            private static final String SIGNATURE = &quot;X-Slack-Signature&quot;;\r\n        }\r\n    }\r\n\r\n\r\n\r\n  [1]: https://slack.com/apps\r\n  [2]: https://api.slack.com/docs/verifying-requests-from-slack\r\n  [3]: https://en.wikipedia.org/wiki/HMAC\r\n  [4]: https://stackoverflow.com/a/11804805/10059043\r\n  [5]: https://www.freeformatter.com/hmac-generator.html","title":"Slack request verification: Can&#39;t compute matching request digest using signed secret","body":"<p>I'm implementing interactive messages on Slack, which contains some action buttons. Using <a href=\"https://slack.com/apps\" rel=\"noreferrer\">Slack App</a> I'm able to handle Slack users clicking the buttons on my Java Springboot API. </p>\n\n<p>To this moment, everything is fine. However, I struggle to compute matching request signature (digest) to verify, that it actually comes from Slack. I read all the documentation for that on <a href=\"https://api.slack.com/docs/verifying-requests-from-slack\" rel=\"noreferrer\">Slack verification documentation page</a>. </p>\n\n<p>The page decribes, that the signature has to be computed as a <a href=\"https://en.wikipedia.org/wiki/HMAC\" rel=\"noreferrer\">HMAC</a> SHA256 hash, using Signing Secret as a key and content as concatenation of slack version, timestamp and request body, for example:</p>\n\n<pre><code>v0:123456789:command=/weather&amp;text=94070\n</code></pre>\n\n<p>On the page is stated:</p>\n\n<blockquote>\n  <p>...Evaluate only the raw HTTP request body when computing signatures.</p>\n</blockquote>\n\n<p>... so I'm not encoding/deserializing the request before hash computing (I've attached my received request from Slack below)</p>\n\n<p>To compute the hash I use the code found on <a href=\"https://stackoverflow.com/a/11804805/10059043\">StackOverflow</a>:</p>\n\n<pre><code>private String computeMessageDigest(String content) {\n    final String ALGORITHM = \"HmacSHA256\";\n    final String UTF_8 = \"UTF-8\";\n\n    try {\n        Key signingKey = new SecretKeySpec(signingSecret.getBytes(UTF_8), ALGORITHM);\n        Mac mac = Mac.getInstance(ALGORITHM);\n        mac.init(signingKey);\n\n        return Hex.encodeHexString(mac.doFinal(content.getBytes(UTF_8)));\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n\n<p>I tried also this <a href=\"https://www.freeformatter.com/hmac-generator.html\" rel=\"noreferrer\">online hash generator</a> to compare the results, and they were the same.</p>\n\n<p>The request received from Slack looks like this:</p>\n\n<pre><code>{\n    \"headers\": {\n        \"x-forwarded-for\": [\"::ffff:52.72.111.29\"],\n        \"x-forwarded-proto\": [\"https\"],\n        \"x-pagekite-port\": [\"443\"],\n        \"host\": [\"inqool.pagekite.me\"],\n        \"user-agent\": [\"Slackbot 1.0 (+https://api.slack.com/robots)\"],\n        \"accept-encoding\": [\"gzip,deflate\"],\n        \"accept\": [\"application/json,*/*\"],\n        \"x-slack-signature\": [\"v0=87fbffb089501ba823991cc20058df525767a8a2287b3809f9afff3e3b600dd8\"],\n        \"x-slack-request-timestamp\": [\"1531221943\"],\n        \"content-length\": [\"2731\"],\n        \"Content-Type\": [\"application/x-www-form-urlencoded;charset=UTF-8\"]\n    },\n    \"body\": \"payload=%7B%22type%22%3A%22interactive_message%22%2C%22actions%22%3A%5B%7B%22name%22%3A%22reject_btn%22%2C%22type%22%3A%22button%22%2C%22value%22%3A%22false%22%7D%5D%2C%22callback_id%22%3A%22artwork%3D40d7a87f-466c-4fc9-b454-09ce020d4465%22%2C%22team%22%3A%7B%22id%22%3A%22T03NP6SA7%22%2C%22domain%22%3A%22artstaq%22%7D%2C%22channel%22%3A%7B%22id%22%3A%22G8F2WR4FJ%22%2C%22name%22%3A%22privategroup%22%7D%2C%22user%22%3A%7B%22id%22%3A%22U66T9QX60%22%2C%22name%22%3A%22majo%22%7D%2C%22action_ts%22%3A%221531221943.512498%22%2C%22message_ts%22%3A%221531221198.000225%22%2C%22attachment_id%22%3A%221%22%2C%22token%22%3A%22ZABrZDXgJCOOLNau5mXnfNQR%22%2C%22is_app_unfurl%22%3Afalse%2C%22original_message%22%3A%7B%22text%22%3A%22User+just+put+item+on+*EXCHANGE*.%22%2C%22bot_id%22%3A%22BBM1W4QEL%22%2C%22attachments%22%3A%5B%7B%22author_name%22%3A%22Slack+Test%3B+slack%40test.com%22%2C%22callback_id%22%3A%22artwork%3D40d7a87f-466c-4fc9-b454-09ce020d4465%22%2C%22fallback%22%3A%22Slack+Test%3B+%3Cmailto%3Aslack%40test.com%7Cslack%40test.com%3E+just+put+item+Panenka+%5C%2F+Doll+by+artist+Jaroslav+Vale%5Cu010dka+into+ON+REQUEST+mode%22%2C%22text%22%3A%22%3Chttp%3A%5C%2F%5C%2Flocalhost%3A8080%5C%2Fartist%5C%2F609cd328-d533-4ab0-b982-ec2f104476f2%7CJaroslav+Vale%5Cu010dka%3E%22%2C%22title%22%3A%22Panenka+%5C%2F+Doll%22%2C%22footer%22%3A%22ARTSTAQ+Slack+Reporter%22%2C%22id%22%3A1%2C%22title_link%22%3A%22http%3A%5C%2F%5C%2Flocalhost%3A8080%5C%2Fartwork%5C%2F40d7a87f-466c-4fc9-b454-09ce020d4465%22%2C%22color%22%3A%22f0d0ad%22%2C%22fields%22%3A%5B%7B%22title%22%3A%22Trading+type%22%2C%22value%22%3A%22ON+REQUEST%22%2C%22short%22%3Atrue%7D%5D%2C%22actions%22%3A%5B%7B%22id%22%3A%221%22%2C%22name%22%3A%22approve_btn%22%2C%22text%22%3A%22APPROVE%22%2C%22type%22%3A%22button%22%2C%22value%22%3A%22true%22%2C%22style%22%3A%22primary%22%2C%22confirm%22%3A%7B%22text%22%3A%22Do+you+really+want+to+approve+this+artwork%3F%22%2C%22title%22%3A%22Approve+artwork%22%2C%22ok_text%22%3A%22Yes%22%2C%22dismiss_text%22%3A%22Cancel%22%7D%7D%2C%7B%22id%22%3A%222%22%2C%22name%22%3A%22reject_btn%22%2C%22text%22%3A%22REJECT%22%2C%22type%22%3A%22button%22%2C%22value%22%3A%22false%22%2C%22style%22%3A%22danger%22%2C%22confirm%22%3A%7B%22text%22%3A%22Do+you+really+want+to+reject+this+artwork%3F%22%2C%22title%22%3A%22Reject+artwork%22%2C%22ok_text%22%3A%22Yes%22%2C%22dismiss_text%22%3A%22Cancel%22%7D%7D%5D%7D%5D%2C%22type%22%3A%22message%22%2C%22subtype%22%3A%22bot_message%22%2C%22ts%22%3A%221531221198.000225%22%7D%2C%22response_url%22%3A%22https%3A%5C%2F%5C%2Fhooks.slack.com%5C%2Factions%5C%2FT03NP6SA7%5C%2F395760858899%5C%2FGlP9jsNQak7FqEciEHhscx4L%22%2C%22trigger_id%22%3A%22395632563524.3771230347.851ab60578de033398338a9faeb41a15%22%7D\"\n}\n</code></pre>\n\n<p>When I computed the HMAC SHA256 hash, I got <code>561034bb6860c07a6b4eaf245b6da3ea869c7806c7f7be20b1a830b6d25c54c8</code> but I should get <code>87fbffb089501ba823991cc20058df525767a8a2287b3809f9afff3e3b600dd8</code>, as in the request header.</p>\n\n<p>I also tried to compute the hash from the URL decoded body, but still not be able to get the matching signature.</p>\n\n<p>Am I doing something wrong? Thanks for the answers/hints.</p>\n\n<hr>\n\n<p><strong>EDIT:</strong> here's the whole source code of my REST controller and request verifier:</p>\n\n<pre><code>package com.artstaq.resource;\n\nimport com.artstaq.integration.slack.SlackRequestVerifier;\nimport org.springframework.http.HttpEntity;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport javax.inject.Inject;\n\n@RestController\n@RequestMapping(\"/content_admin\")\npublic class ContentAdminResource {\n\n    private SlackRequestVerifier slackVerifier;\n\n\n    @RequestMapping(value = \"/slack/artwork/resolve\", method = RequestMethod.POST, consumes = MediaType.APPLICATION_FORM_URLENCODED_VALUE)\n    public void resolve(HttpEntity&lt;String&gt; request) {\n        slackVerifier.verifySlackRequest(request);\n    }\n\n\n    @Inject\n    public void setSlackVerifier(SlackRequestVerifier slackVerifier) {\n        this.slackVerifier = slackVerifier;\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>package com.artstaq.integration.slack;\n\nimport com.artstaq.exception.SignatureVerificationException;\nimport com.artstaq.exception.TimestampTooOldException;\nimport org.apache.commons.codec.binary.Hex;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.http.HttpEntity;\nimport org.springframework.stereotype.Component;\n\nimport javax.crypto.Mac;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.security.Key;\nimport java.time.Instant;\nimport java.time.temporal.ChronoUnit;\n\n/**\n * Class providing request verification received from Slack\n */\n@Component\npublic class SlackRequestVerifier {\n\n    @Value(\"${integration.slack.version:v0}\")\n    private String version;\n\n    @Value(\"${integration.slack.signingSecret}\")\n    private String signingSecret;\n\n    /**\n     * Verifies the integrity of received Slack request.\n     */\n    public void verifySlackRequest(HttpEntity&lt;String&gt; request) {\n        String timestamp = request.getHeaders().getFirst(SlackHeaders.TIMESTAMP);\n        Instant timeInstant = Instant.ofEpochSecond(Long.valueOf(timestamp));\n        if (timeInstant.plus(5, ChronoUnit.MINUTES).compareTo(Instant.now()) &lt; 0) {\n            throw new TimestampTooOldException(timeInstant);\n        }\n\n        String expectedDigest = request.getHeaders().getFirst(SlackHeaders.SIGNATURE);\n\n        String basestring = String.join(\":\", version, timestamp, request.getBody());\n        String computedDigest = version + \"=\" + computeMessageDigest(basestring);\n\n        if (!computedDigest.equals(expectedDigest)) {\n            throw new SignatureVerificationException(expectedDigest, computedDigest);\n        }\n    }\n\n    /**\n     * Compute HMAC SHA256 digest for given content using defined slack signing secret\n     */\n    private String computeMessageDigest(String content) {\n        final String ALGORITHM = \"HmacSHA256\";\n        final String UTF_8 = \"UTF-8\";\n\n        try {\n            Key signingKey = new SecretKeySpec(signingSecret.getBytes(UTF_8), ALGORITHM);\n            Mac mac = Mac.getInstance(ALGORITHM);\n            mac.init(signingKey);\n\n            return Hex.encodeHexString(mac.doFinal(content.getBytes(UTF_8)));\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n\n    private static class SlackHeaders {\n        private static final String TIMESTAMP = \"X-Slack-Request-Timestamp\";\n        private static final String SIGNATURE = \"X-Slack-Signature\";\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate","jpa","constraints"],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676374553,"creation_date":1676374553,"answer_id":75447263,"question_id":75438438,"body_markdown":"SQL check constraints only work on a single table. What you want is a so called SQL assertion constraint, but no database implements that. The best you can do is to pre-create rows for the amount of vacancies and just assign students to these rows without ever creating more rows. This way, you can make sure that you only assign as many students as there are vacancies, given that you use optimistic/pessimistic locking when assigning a student.","title":"How to use Hibernate Check constraint in this case?","body":"<p>SQL check constraints only work on a single table. What you want is a so called SQL assertion constraint, but no database implements that. The best you can do is to pre-create rows for the amount of vacancies and just assign students to these rows without ever creating more rows. This way, you can make sure that you only assign as many students as there are vacancies, given that you use optimistic/pessimistic locking when assigning a student.</p>\n"}],"owner":{"account_id":27050131,"reputation":5,"user_id":20603640,"display_name":"jpcairesf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75447263,"answer_count":1,"score":0,"last_activity_date":1676374553,"creation_date":1676304672,"question_id":75438438,"body_markdown":"I want to use check constraint to verify if there are more students in the subject more than vacancies. These are the entities:\r\n\r\nSubjectOffer\r\n```\r\n@Entity\r\n@SequenceGenerator(name = &quot;SUBJECT_OFFER_SEQ&quot;, sequenceName = &quot;SUBJECT_OFFER_SEQ&quot;)\r\n@Table(name = &quot;SUBJECT_OFFER&quot;, uniqueConstraints = {\r\n        @UniqueConstraint(name = &quot;UQ_SUBJECT_OFFER_COURSE_SUBJECT_SEMESTER_CLASS&quot;, columnNames = {&quot;COURSE_ID&quot;, &quot;SUBJECT_ID&quot;, &quot;SEMESTER&quot;, &quot;CLASS_NUMBER&quot;})})\r\n@Check(constraints = &quot;COUNT(STUDENT_SUBJECT_ID) &lt;= VACANCIES&quot;)\r\npublic class SubjectOffer {\r\n\r\n    @Id\r\n    @GeneratedValue(generator = &quot;SUBJECT_OFFER_SEQ&quot;)\r\n    @Column(name = &quot;SUBJECT_OFFER_ID&quot;, nullable = false)\r\n    private Long id;\r\n\r\n    @OneToMany(fetch = FetchType.LAZY, orphanRemoval = true, cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;STUDENT_SUBJECT_ID&quot;)\r\n    private Set&lt;StudentSubject&gt; studentSubjects = new HashSet&lt;&gt;();\r\n\r\n    //other attributes\r\n\r\n    @Column(name = &quot;VACANCIES&quot;, nullable = false)\r\n    private int vacancies;\r\n}\r\n```\r\n\r\nStudentSubject\r\n```\r\n@Entity\r\n@Table(name = &quot;STUDENT_SUBJECT&quot;)\r\npublic class StudentSubject {\r\n\r\n    @EmbeddedId\r\n    private StudentSubjectId id = new StudentSubjectId();\r\n\r\n    @MapsId(&quot;studentId&quot;)\r\n    @ManyToOne(fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;STUDENT_ID&quot;, nullable = false)\r\n    private Student student;\r\n\r\n    @MapsId(&quot;subjectOfferId&quot;)\r\n    @ManyToOne(fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;SUBJECT_OFFER_ID&quot;, nullable = false)\r\n    private SubjectOffer subjectOffer;\r\n\r\n    @Column(name = &quot;SEMESTER&quot;, nullable = false)\r\n    private int semester;\r\n\r\n    @Column(name = &quot;GRADE&quot;)\r\n    private BigDecimal grade;\r\n\r\n}\r\n```\r\n\r\n\r\nI also tried column definition in Set&lt;StudentSubject&gt; @JoinColumn but it didn&#39;t work\r\n","title":"How to use Hibernate Check constraint in this case?","body":"<p>I want to use check constraint to verify if there are more students in the subject more than vacancies. These are the entities:</p>\n<p>SubjectOffer</p>\n<pre><code>@Entity\n@SequenceGenerator(name = &quot;SUBJECT_OFFER_SEQ&quot;, sequenceName = &quot;SUBJECT_OFFER_SEQ&quot;)\n@Table(name = &quot;SUBJECT_OFFER&quot;, uniqueConstraints = {\n        @UniqueConstraint(name = &quot;UQ_SUBJECT_OFFER_COURSE_SUBJECT_SEMESTER_CLASS&quot;, columnNames = {&quot;COURSE_ID&quot;, &quot;SUBJECT_ID&quot;, &quot;SEMESTER&quot;, &quot;CLASS_NUMBER&quot;})})\n@Check(constraints = &quot;COUNT(STUDENT_SUBJECT_ID) &lt;= VACANCIES&quot;)\npublic class SubjectOffer {\n\n    @Id\n    @GeneratedValue(generator = &quot;SUBJECT_OFFER_SEQ&quot;)\n    @Column(name = &quot;SUBJECT_OFFER_ID&quot;, nullable = false)\n    private Long id;\n\n    @OneToMany(fetch = FetchType.LAZY, orphanRemoval = true, cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;STUDENT_SUBJECT_ID&quot;)\n    private Set&lt;StudentSubject&gt; studentSubjects = new HashSet&lt;&gt;();\n\n    //other attributes\n\n    @Column(name = &quot;VACANCIES&quot;, nullable = false)\n    private int vacancies;\n}\n</code></pre>\n<p>StudentSubject</p>\n<pre><code>@Entity\n@Table(name = &quot;STUDENT_SUBJECT&quot;)\npublic class StudentSubject {\n\n    @EmbeddedId\n    private StudentSubjectId id = new StudentSubjectId();\n\n    @MapsId(&quot;studentId&quot;)\n    @ManyToOne(fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;STUDENT_ID&quot;, nullable = false)\n    private Student student;\n\n    @MapsId(&quot;subjectOfferId&quot;)\n    @ManyToOne(fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;SUBJECT_OFFER_ID&quot;, nullable = false)\n    private SubjectOffer subjectOffer;\n\n    @Column(name = &quot;SEMESTER&quot;, nullable = false)\n    private int semester;\n\n    @Column(name = &quot;GRADE&quot;)\n    private BigDecimal grade;\n\n}\n</code></pre>\n<p>I also tried column definition in Set @JoinColumn but it didn't work</p>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676374383,"creation_date":1676374383,"answer_id":75447229,"question_id":75437521,"body_markdown":"`parent.id` is not a property name, but a property path. If you read the java doc, you will see that `Path#get` requires a property name though. So to fix this, use `root.get(&quot;parent&quot;).get(&quot;id&quot;)`","title":"Hibernate predicate to get children based on parent","body":"<p><code>parent.id</code> is not a property name, but a property path. If you read the java doc, you will see that <code>Path#get</code> requires a property name though. So to fix this, use <code>root.get(&quot;parent&quot;).get(&quot;id&quot;)</code></p>\n"}],"owner":{"account_id":1681294,"reputation":940,"user_id":1545467,"accept_rate":25,"display_name":"Ilya K."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75447229,"answer_count":1,"score":0,"last_activity_date":1676374383,"creation_date":1676300090,"question_id":75437521,"body_markdown":"I have following structure:\r\n\r\n```\r\n@Entity\r\nclass Parent {\r\n  @Id\r\n  int id;\r\n\r\n  @OneToMany(fetch = FetchType.LAZY)\r\n  List&lt;Child&gt; children;\r\n\r\n}\r\n\r\n@Entity\r\npublic class Child {    \r\n  @Id\r\n  int id;\r\n\r\n  @ManyToOne\r\n  Parent parent;  \r\n}\r\n```\r\n\r\nI want to get children based on a specific parent id. As I want to paginate the result I want to build predicate for children and not just fetch parent and get all the children this way.\r\n\r\nSo, I imagining predicate like this for the Child query:\r\n\r\n```\r\nbuilder.equal(root.get(&quot;parent.id&quot;), parentId);\r\n``` \r\n\r\nBut this obviously will not work. So, what is the right way to do it?\r\n\r\nThanks","title":"Hibernate predicate to get children based on parent","body":"<p>I have following structure:</p>\n<pre><code>@Entity\nclass Parent {\n  @Id\n  int id;\n\n  @OneToMany(fetch = FetchType.LAZY)\n  List&lt;Child&gt; children;\n\n}\n\n@Entity\npublic class Child {    \n  @Id\n  int id;\n\n  @ManyToOne\n  Parent parent;  \n}\n</code></pre>\n<p>I want to get children based on a specific parent id. As I want to paginate the result I want to build predicate for children and not just fetch parent and get all the children this way.</p>\n<p>So, I imagining predicate like this for the Child query:</p>\n<pre><code>builder.equal(root.get(&quot;parent.id&quot;), parentId);\n</code></pre>\n<p>But this obviously will not work. So, what is the right way to do it?</p>\n<p>Thanks</p>\n"},{"tags":["java","spring-boot","maven","spring-framework-beans","milestone"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1664891512,"post_id":73947252,"comment_id":130570301,"body_markdown":"Have you checked the release notes for spring 3.0.0-M1..M5... for needed changes... this is major release change... I expect things needed to be changed... I would first get the app working with 2.7.4... migrate it to 3.0.0-M5 and afterwards modularize it... (The question is why modularize ?)...","body":"Have you checked the release notes for spring 3.0.0-M1..M5... for needed changes... this is major release change... I expect things needed to be changed... I would first get the app working with 2.7.4... migrate it to 3.0.0-M5 and afterwards modularize it... (The question is why modularize ?)..."},{"owner":{"account_id":5238567,"reputation":113,"user_id":4186378,"display_name":"Piotr Sulecki"},"score":0,"creation_date":1664892132,"post_id":73947252,"comment_id":130570558,"body_markdown":"The app is working perfectly fine with Spring Boot 2.7.4 and Spring Framework 5.3, even modularized. But we need to create an installer for it, and for jlink to work (as I understand) I need to have a modularized app, and Spring Boot 2.7 / Spring 5.3 are not. Or am I wrong here?","body":"The app is working perfectly fine with Spring Boot 2.7.4 and Spring Framework 5.3, even modularized. But we need to create an installer for it, and for jlink to work (as I understand) I need to have a modularized app, and Spring Boot 2.7 / Spring 5.3 are not. Or am I wrong here?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1665137640,"post_id":73947252,"comment_id":130634348,"body_markdown":"If you like to use jlink all the dependencies must be modules which is very unlikely at the moment ..furthermore the output shows that you are using spring boot 3.0.0-XX which changes things which should be fixed first (see release notes)..","body":"If you like to use jlink all the dependencies must be modules which is very unlikely at the moment ..furthermore the output shows that you are using spring boot 3.0.0-XX which changes things which should be fixed first (see release notes).."}],"answers":[{"tags":[],"owner":{"account_id":6410870,"reputation":1740,"user_id":4970679,"display_name":"ahuemmer"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1676374142,"creation_date":1676374142,"answer_id":75447191,"question_id":73947252,"body_markdown":"The problem seems to be related with `org.springframework:spring-beans:5.3.25`, which does not include the required class yet. By accident, we had this version pinned in our `build.gradle` when migrating to Spring 3.0. This should not be necessary any more.\r\n\r\nThus, you could try removing `spring-beans` from your `build.gradle` or `pom.xml`, depending on whether you use Gradle oder Maven. This should already be sufficient. If not, you could try `gradle dependencies` or `mvn dependency:tree` (having the related plugin installed) to find out, if/where the old version is pulled in. Alternatively, you could explicitly include the newest version in your `build.gradle` or `pom.xml`.","title":"NoClassDefFoundError: NestedIOException when running tests with Spring Boot 3.0.0-M4 / Spring 6.0.0-M5","body":"<p>The problem seems to be related with <code>org.springframework:spring-beans:5.3.25</code>, which does not include the required class yet. By accident, we had this version pinned in our <code>build.gradle</code> when migrating to Spring 3.0. This should not be necessary any more.</p>\n<p>Thus, you could try removing <code>spring-beans</code> from your <code>build.gradle</code> or <code>pom.xml</code>, depending on whether you use Gradle oder Maven. This should already be sufficient. If not, you could try <code>gradle dependencies</code> or <code>mvn dependency:tree</code> (having the related plugin installed) to find out, if/where the old version is pulled in. Alternatively, you could explicitly include the newest version in your <code>build.gradle</code> or <code>pom.xml</code>.</p>\n"}],"owner":{"account_id":5238567,"reputation":113,"user_id":4186378,"display_name":"Piotr Sulecki"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10850,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1676374142,"creation_date":1664883096,"question_id":73947252,"body_markdown":"I have a Java-17 project using Spring Boot which I&#39;m trying to modularize. To take full advantage of the modularization, I&#39;m porting it to Spring Boot 3 milestone 4 and Spring 6 milestone 5.\r\n\r\nThe project is managed my Maven. I was able to get the project to compile. However, it fails to execute the standard contextLoads() test as generated by Spring Boot. The specific error message is:\r\n```\r\n[main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Could not load default TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener]. Specify custom listener classes or make the default listener classes available.\r\njava.lang.NoClassDefFoundError: jakarta/servlet/ServletContext\r\n```\r\nThis error message is repeated twice more with different TestExecutionListener implementations, namely TransactionalTestExecutionListener and SqlScriptsTestExecutionListener, but Spring ultimately loads a number of TestExecutionListeners and tries to execute the test. However, the test fails:\r\n```\r\njava.lang.NoClassDefFoundError: org/springframework/beans/factory/aot/BeanFactoryInitializationAotProcessor\r\n    [...series of java.base frames...]\r\n\tat spring.context@6.0.0-M5/org.springframework.context.annotation.AnnotationConfigUtils.registerAnnotationConfigProcessors(AnnotationConfigUtils.java:165)\r\n\tat spring.context@6.0.0-M5/org.springframework.context.annotation.AnnotationConfigUtils.registerAnnotationConfigProcessors(AnnotationConfigUtils.java:138)\r\n\tat spring.context@6.0.0-M5/org.springframework.context.annotation.AnnotatedBeanDefinitionReader.&lt;init&gt;(AnnotatedBeanDefinitionReader.java:88)\r\n\tat spring.context@6.0.0-M5/org.springframework.context.annotation.AnnotatedBeanDefinitionReader.&lt;init&gt;(AnnotatedBeanDefinitionReader.java:71)\r\n\tat spring.context@6.0.0-M5/org.springframework.context.annotation.AnnotationConfigApplicationContext.&lt;init&gt;(AnnotationConfigApplicationContext.java:69)\r\n\tat spring.boot@3.0.0-M4/org.springframework.boot.ApplicationContextFactory.lambda$static$0(ApplicationContextFactory.java:55)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$1(SpringBootContextLoader.java:120)\r\n\tat spring.boot@3.0.0-M4/org.springframework.boot.SpringApplication.createApplicationContext(SpringApplication.java:566)\r\n\tat spring.boot@3.0.0-M4/org.springframework.boot.SpringApplication.run(SpringApplication.java:309)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:123)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\r\n\tat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363)\r\n    [...many more frames, mostly from junit and surefire...]\r\nCaused by: java.lang.ClassNotFoundException: org.springframework.beans.factory.aot.BeanFactoryInitializationAotProcessor\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n```\r\nThis problem is probably caused by some error in my module-info.java. The Spring modules I&#39;m using are:\r\n```\r\n    requires spring.beans;\r\n    requires spring.context;\r\n    requires spring.boot.autoconfigure;\r\n    requires spring.core;\r\n    requires spring.boot;\r\n    requires spring.oxm;\r\n    requires spring.web;\r\n    requires spring.ws.core;\r\n    [...]\r\n    opens [my module] to spring.core;\r\n    exports [my module] to spring.beans, spring.context;\r\n```\r\n\r\nWhat am I missing? The application compiles and works fine with Spring 5.3 / Spring Boot 2.7, but I need to modularize it to be able to create an installer.","title":"NoClassDefFoundError: NestedIOException when running tests with Spring Boot 3.0.0-M4 / Spring 6.0.0-M5","body":"<p>I have a Java-17 project using Spring Boot which I'm trying to modularize. To take full advantage of the modularization, I'm porting it to Spring Boot 3 milestone 4 and Spring 6 milestone 5.</p>\n<p>The project is managed my Maven. I was able to get the project to compile. However, it fails to execute the standard contextLoads() test as generated by Spring Boot. The specific error message is:</p>\n<pre><code>[main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Could not load default TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener]. Specify custom listener classes or make the default listener classes available.\njava.lang.NoClassDefFoundError: jakarta/servlet/ServletContext\n</code></pre>\n<p>This error message is repeated twice more with different TestExecutionListener implementations, namely TransactionalTestExecutionListener and SqlScriptsTestExecutionListener, but Spring ultimately loads a number of TestExecutionListeners and tries to execute the test. However, the test fails:</p>\n<pre><code>java.lang.NoClassDefFoundError: org/springframework/beans/factory/aot/BeanFactoryInitializationAotProcessor\n    [...series of java.base frames...]\n    at spring.context@6.0.0-M5/org.springframework.context.annotation.AnnotationConfigUtils.registerAnnotationConfigProcessors(AnnotationConfigUtils.java:165)\n    at spring.context@6.0.0-M5/org.springframework.context.annotation.AnnotationConfigUtils.registerAnnotationConfigProcessors(AnnotationConfigUtils.java:138)\n    at spring.context@6.0.0-M5/org.springframework.context.annotation.AnnotatedBeanDefinitionReader.&lt;init&gt;(AnnotatedBeanDefinitionReader.java:88)\n    at spring.context@6.0.0-M5/org.springframework.context.annotation.AnnotatedBeanDefinitionReader.&lt;init&gt;(AnnotatedBeanDefinitionReader.java:71)\n    at spring.context@6.0.0-M5/org.springframework.context.annotation.AnnotationConfigApplicationContext.&lt;init&gt;(AnnotationConfigApplicationContext.java:69)\n    at spring.boot@3.0.0-M4/org.springframework.boot.ApplicationContextFactory.lambda$static$0(ApplicationContextFactory.java:55)\n    at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$1(SpringBootContextLoader.java:120)\n    at spring.boot@3.0.0-M4/org.springframework.boot.SpringApplication.createApplicationContext(SpringApplication.java:566)\n    at spring.boot@3.0.0-M4/org.springframework.boot.SpringApplication.run(SpringApplication.java:309)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:123)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\n    at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\n    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363)\n    [...many more frames, mostly from junit and surefire...]\nCaused by: java.lang.ClassNotFoundException: org.springframework.beans.factory.aot.BeanFactoryInitializationAotProcessor\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n</code></pre>\n<p>This problem is probably caused by some error in my module-info.java. The Spring modules I'm using are:</p>\n<pre><code>    requires spring.beans;\n    requires spring.context;\n    requires spring.boot.autoconfigure;\n    requires spring.core;\n    requires spring.boot;\n    requires spring.oxm;\n    requires spring.web;\n    requires spring.ws.core;\n    [...]\n    opens [my module] to spring.core;\n    exports [my module] to spring.beans, spring.context;\n</code></pre>\n<p>What am I missing? The application compiles and works fine with Spring 5.3 / Spring Boot 2.7, but I need to modularize it to be able to create an installer.</p>\n"},{"tags":["java","audio","javasound"],"answers":[{"tags":[],"owner":{"account_id":109792,"reputation":5102,"user_id":290769,"accept_rate":75,"display_name":"Lithium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1302804151,"creation_date":1302804151,"answer_id":5667512,"question_id":5667454,"body_markdown":"I don&#39;t believe the java AudioStream class supports mp3 natively.  According to [this link][1] it only supports AIFF, AU and WAV.  You&#39;ll have to look into using another library to load and play an mp3 file.  \r\n\r\n[This site][2] describes how to play a mp3 file in Java\r\n\r\n\r\n  [1]: http://java.sun.com/products/java-media/sound/techReference/javasoundfaq.html#formats\r\n  [2]: http://introcs.cs.princeton.edu/faq/mp3/mp3.html","title":"Playing MP3 using Java Sound API","body":"<p>I don't believe the java AudioStream class supports mp3 natively.  According to <a href=\"http://java.sun.com/products/java-media/sound/techReference/javasoundfaq.html#formats\" rel=\"nofollow\">this link</a> it only supports AIFF, AU and WAV.  You'll have to look into using another library to load and play an mp3 file.  </p>\n\n<p><a href=\"http://introcs.cs.princeton.edu/faq/mp3/mp3.html\" rel=\"nofollow\">This site</a> describes how to play a mp3 file in Java</p>\n"},{"tags":[],"owner":{"account_id":269227,"reputation":18215,"user_id":558433,"accept_rate":72,"display_name":"Marcos Vasconcelos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1302804593,"creation_date":1302804593,"answer_id":5667611,"question_id":5667454,"body_markdown":"Sun Sound API do not plays MP3\r\n\r\n\r\nWhen I need it, I use the JavaZOOM jLayer library (http://www.javazoom.net/javalayer/javalayer.html).\r\n\r\nTo be able to play mp3 you still need to add the MP3SPI (provided with jLayer). ","title":"Playing MP3 using Java Sound API","body":"<p>Sun Sound API do not plays MP3</p>\n\n<p>When I need it, I use the JavaZOOM jLayer library (http://www.javazoom.net/javalayer/javalayer.html).</p>\n\n<p>To be able to play mp3 you still need to add the MP3SPI (provided with jLayer). </p>\n"},{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1412860334,"creation_date":1302808834,"answer_id":5668510,"question_id":5667454,"body_markdown":"As mentioned, Java Sound does not support MP3 by default.  For the types it does support in any specific JRE, check `AudioSystem.getAudioFileTypes()`.\r\n\r\nOne way to add support for reading MP3 is to add the JMF based &lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/download-137625.html&quot;&gt;mp3plugin.jar&lt;/a&gt;&lt;sup&gt;1&lt;/sup&gt; to the application&#39;s run-time class-path.\r\n\r\n1. That link is known to be less than entirely reliable.  The Jar is also available at my [software share drive](https://drive.google.com/drive/#folders/0B5B9wDXIGw9lUnJaUjA2cmlVRE0).\r\n\r\nAs to your actual question, while a &lt;a href=&quot;http://download.oracle.com/javase/7/docs/api/javax/sound/sampled/Clip.html&quot;&gt;javax.sound.sampled.Clip&lt;/a&gt; might seem ideal for this kind of task, it unfortunately will only hold a second of stereo, 16 bit, 44.1KHz sound.  That is why I developed `BigClip`.  (Which has its own problems with looping, if you fix them, report back.)\r\n\r\n    package org.pscode.xui.sound.bigclip;\r\n    \r\n    import java.awt.Component;\r\n    import javax.swing.*;\r\n    \r\n    // J2SE 1.3\r\n    import javax.sound.sampled.*;\r\n    \r\n    import java.io.*;\r\n    \r\n    // J2SE 1.4\r\n    import java.util.logging.*;\r\n    \r\n    import java.util.Arrays;\r\n    \r\n    /** An implementation of the javax.sound.sampled.Clip that is designed\r\n    to handle Clips of arbitrary size, limited only by the amount of memory\r\n    available to the app.    It uses the post 1.4 thread behaviour (daemon thread)\r\n    that will stop the sound running after the main has exited.\r\n    &lt;ul&gt;\r\n    &lt;li&gt;2012-07-24 - Fixed bug in size of byte array (2^16 -&gt; (int)Math.pow(2, 16)).\r\n    &lt;li&gt;2009-09-01 - Fixed bug that had clip ..clipped at the end, by calling drain() (before\r\n    calling stop()) on the dataline after the play loop was complete. Improvement to frame\r\n    and microsecond position determination.\r\n    &lt;li&gt;2009-08-17 - added convenience constructor that accepts a Clip. Changed the private\r\n    convertFrameToM..seconds methods from &#39;micro&#39; to &#39;milli&#39; to reflect that they were dealing\r\n    with units of 1000/th of a second.\r\n    &lt;li&gt;2009-08-14 - got rid of flush() after the sound loop, as it was cutting off tracks just\r\n    before the end, and was found to be not needed for the fast-forward/rewind functionality it\r\n    was introduced to support.\r\n    &lt;li&gt;2009-08-11 - First binary release.\r\n    &lt;/ul&gt;\r\n    N.B. Remove @Override notation and logging to use in 1.3+\r\n    @since 1.5\r\n    @version 2009-08-17\r\n    @author Andrew Thompson */\r\n    public class BigClip implements Clip, LineListener {\r\n    \r\n        /** The DataLine used by this Clip. */\r\n        private SourceDataLine dataLine;\r\n    \r\n        /** The raw bytes of the audio data. */\r\n        private byte[] audioData;\r\n    \r\n        /** The stream wrapper for the audioData. */\r\n        private ByteArrayInputStream inputStream;\r\n    \r\n        /** Loop count set by the calling code. */\r\n        private int loopCount;\r\n        /** Internal count of how many loops to go. */\r\n        private int countDown;\r\n        /** The start of a loop point.    Defaults to 0. */\r\n        private int loopPointStart;\r\n        /** The end of a loop point.    Defaults to the end of the Clip. */\r\n        private int loopPointEnd;\r\n    \r\n        /** Stores the current frame position of the clip. */\r\n        private int framePosition;\r\n    \r\n        /** Thread used to run() sound. */\r\n        private Thread thread;\r\n        /** Whether the sound is currently playing or active. */\r\n        private boolean active;\r\n        /** Stores the last time bytes were dumped to the audio stream. */\r\n        private long timelastPositionSet;\r\n    \r\n        private int bufferUpdateFactor = 2;\r\n    \r\n        /** The parent Component for the loading progress dialog.    */\r\n        Component parent = null;\r\n    \r\n        /** Used for reporting messages. */\r\n        private Logger logger = Logger.getAnonymousLogger();\r\n    \r\n        /** Default constructor for a BigClip.    Does nothing.    Information from the\r\n        AudioInputStream passed in open() will be used to get an appropriate SourceDataLine. */\r\n        public BigClip() {}\r\n    \r\n        /** There are a number of AudioSystem methods that will return a configured Clip.    This\r\n        convenience constructor allows us to obtain a SourceDataLine for the BigClip that uses\r\n        the same AudioFormat as the original Clip.\r\n        @param clip Clip The Clip used to configure the BigClip. */\r\n        public BigClip(Clip clip) throws LineUnavailableException {\r\n            dataLine = AudioSystem.getSourceDataLine( clip.getFormat() );\r\n        }\r\n    \r\n        /** Provides the entire audio buffer of this clip.\r\n        @return audioData byte[] The bytes of the audio data that is loaded in this Clip. */\r\n        public byte[] getAudioData() {\r\n            return audioData;\r\n        }\r\n    \r\n        /** Sets a parent component to act as owner of a &quot;Loading track..&quot; progress dialog.\r\n        If null, there will be no progress shown. */\r\n        public void setParentComponent(Component parent) {\r\n            this.parent = parent;\r\n        }\r\n    \r\n        /** Converts a frame count to a duration in milliseconds. */\r\n        private long convertFramesToMilliseconds(int frames) {\r\n            return (frames/(long)dataLine.getFormat().getSampleRate())*1000;\r\n        }\r\n    \r\n        /** Converts a duration in milliseconds to a frame count. */\r\n        private int convertMillisecondsToFrames(long milliseconds) {\r\n            return (int)(milliseconds/dataLine.getFormat().getSampleRate());\r\n        }\r\n    \r\n        @Override\r\n        public void update(LineEvent le) {\r\n            logger.log(Level.FINEST, &quot;update: &quot; + le );\r\n        }\r\n    \r\n        @Override\r\n        public void loop(int count) {\r\n            logger.log(Level.FINEST, &quot;loop(&quot; + count + &quot;) - framePosition: &quot; + framePosition);\r\n            loopCount = count;\r\n            countDown = count;\r\n            active = true;\r\n            inputStream.reset();\r\n    \r\n            start();\r\n        }\r\n    \r\n        @Override\r\n        public void setLoopPoints(int start, int end) {\r\n            if (\r\n                start&lt;0 ||\r\n                start&gt;audioData.length-1 ||\r\n                end&lt;0 ||\r\n                end&gt;audioData.length\r\n                ) {\r\n                throw new IllegalArgumentException(\r\n                    &quot;Loop points &#39;&quot; +\r\n                    start +\r\n                    &quot;&#39; and &#39;&quot; +\r\n                    end +\r\n                    &quot;&#39; cannot be set for buffer of size &quot; +\r\n                    audioData.length);\r\n            }\r\n            if (start&gt;end) {\r\n                throw new IllegalArgumentException(\r\n                    &quot;End position &quot; +\r\n                    end +\r\n                    &quot; preceeds start position &quot; + start);\r\n            }\r\n    \r\n            loopPointStart = start;\r\n            framePosition = loopPointStart;\r\n            loopPointEnd = end;\r\n        }\r\n    \r\n        @Override\r\n        public void setMicrosecondPosition(long milliseconds) {\r\n            framePosition = convertMillisecondsToFrames(milliseconds);\r\n        }\r\n    \r\n        @Override\r\n        public long getMicrosecondPosition() {\r\n            return convertFramesToMilliseconds(getFramePosition());\r\n        }\r\n    \r\n        @Override\r\n        public long getMicrosecondLength() {\r\n            return convertFramesToMilliseconds(getFrameLength());\r\n        }\r\n    \r\n        @Override\r\n        public void setFramePosition(int frames) {\r\n            framePosition = frames;\r\n            int offset = framePosition*format.getFrameSize();\r\n            try {\r\n                inputStream.reset();\r\n                inputStream.read(new byte[offset]);\r\n            } catch(Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public int getFramePosition() {\r\n            long timeSinceLastPositionSet = System.currentTimeMillis() - timelastPositionSet;\r\n            int size = dataLine.getBufferSize()*(format.getChannels()/2)/bufferUpdateFactor;\r\n            int framesSinceLast = (int)((timeSinceLastPositionSet/1000f)*\r\n                dataLine.getFormat().getFrameRate());\r\n            int framesRemainingTillTime = size - framesSinceLast;\r\n            return framePosition\r\n                - framesRemainingTillTime;\r\n        }\r\n    \r\n        @Override\r\n        public int getFrameLength() {\r\n            return audioData.length/format.getFrameSize();\r\n        }\r\n    \r\n        AudioFormat format;\r\n    \r\n        @Override\r\n        public void open(AudioInputStream stream) throws\r\n            IOException,\r\n            LineUnavailableException {\r\n    \r\n            AudioInputStream is1;\r\n            format = stream.getFormat();\r\n    \r\n            if (format.getEncoding()!=AudioFormat.Encoding.PCM_SIGNED) {\r\n                is1 = AudioSystem.getAudioInputStream(\r\n                    AudioFormat.Encoding.PCM_SIGNED, stream );\r\n            } else {\r\n                is1 = stream;\r\n            }\r\n            format = is1.getFormat();\r\n            InputStream is2;\r\n            if (parent!=null) {\r\n                ProgressMonitorInputStream pmis = new ProgressMonitorInputStream(\r\n                    parent,\r\n                    &quot;Loading track..&quot;,\r\n                    is1);\r\n                pmis.getProgressMonitor().setMillisToPopup(0);\r\n                is2 = pmis;\r\n            } else {\r\n                is2 = is1;\r\n            }\r\n    \r\n            byte[] buf = new byte[ (int)Math.pow(2, 16) ];\r\n            int totalRead = 0;\r\n            int numRead = 0;\r\n            ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n            numRead = is2.read( buf );\r\n            while (numRead&gt;-1) {\r\n                baos.write( buf, 0, numRead );\r\n                numRead = is2.read( buf, 0, buf.length );\r\n                totalRead += numRead;\r\n            }\r\n            is2.close();\r\n            audioData = baos.toByteArray();\r\n            AudioFormat afTemp;\r\n            if (format.getChannels()&lt;2) {\r\n                afTemp = new AudioFormat(\r\n                    format.getEncoding(),\r\n                    format.getSampleRate(),\r\n                    format.getSampleSizeInBits(),\r\n                    2,\r\n                    format.getSampleSizeInBits()*2/8, // calculate frame size\r\n                    format.getFrameRate(),\r\n                    format.isBigEndian()\r\n                    );\r\n            } else {\r\n                afTemp = format;\r\n            }\r\n    \r\n            setLoopPoints(0,audioData.length);\r\n            dataLine = AudioSystem.getSourceDataLine(afTemp);\r\n            dataLine.open();\r\n            inputStream = new ByteArrayInputStream( audioData );\r\n        }\r\n    \r\n        @Override\r\n        public void open(AudioFormat format,\r\n            byte[] data,\r\n            int offset,\r\n            int bufferSize)\r\n            throws LineUnavailableException {\r\n            byte[] input = new byte[bufferSize];\r\n            for (int ii=0; ii&lt;input.length; ii++) {\r\n                input[ii] = data[offset+ii];\r\n            }\r\n            ByteArrayInputStream inputStream = new ByteArrayInputStream(input);\r\n            try {\r\n                AudioInputStream ais1 = AudioSystem.getAudioInputStream(inputStream);\r\n                AudioInputStream ais2 = AudioSystem.getAudioInputStream(format, ais1);\r\n                open(ais2);\r\n            } catch( UnsupportedAudioFileException uafe ) {\r\n                throw new IllegalArgumentException(uafe);\r\n            } catch( IOException ioe ) {\r\n                throw new IllegalArgumentException(ioe);\r\n            }\r\n            // TODO    -    throw IAE for invalid frame size, format.\r\n        }\r\n    \r\n        @Override\r\n        public float getLevel() {\r\n            return dataLine.getLevel();\r\n        }\r\n    \r\n        @Override\r\n        public long getLongFramePosition() {\r\n            return dataLine.getLongFramePosition()*2/format.getChannels();\r\n        }\r\n    \r\n        @Override\r\n        public int available() {\r\n            return dataLine.available();\r\n        }\r\n    \r\n        @Override\r\n        public int getBufferSize() {\r\n            return dataLine.getBufferSize();\r\n        }\r\n    \r\n        @Override\r\n        public AudioFormat getFormat() {\r\n            return format;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isActive() {\r\n            return dataLine.isActive();\r\n        }\r\n    \r\n        @Override\r\n        public boolean isRunning() {\r\n            return dataLine.isRunning();\r\n        }\r\n    \r\n        @Override\r\n        public boolean isOpen() {\r\n            return dataLine.isOpen();\r\n        }\r\n    \r\n        @Override\r\n        public void stop() {\r\n            logger.log(Level.FINEST, &quot;BigClip.stop()&quot;);\r\n            active = false;\r\n            // why did I have this commented out?\r\n            dataLine.stop();\r\n            if (thread!=null) {\r\n                try {\r\n                    active = false;\r\n                    thread.join();\r\n                } catch(InterruptedException wakeAndContinue) {\r\n                }\r\n            }\r\n        }\r\n    \r\n        public byte[] convertMonoToStereo(byte[] data, int bytesRead) {\r\n            byte[] tempData = new byte[bytesRead*2];\r\n            if (format.getSampleSizeInBits()==8) {\r\n                for(int ii=0; ii&lt;bytesRead; ii++) {\r\n                    byte b = data[ii];\r\n                    tempData[ii*2] = b;\r\n                    tempData[ii*2+1] = b;\r\n                }\r\n            } else {\r\n                for(int ii=0; ii&lt;bytesRead-1; ii+=2) {\r\n                    //byte b2 = is2.read();\r\n                    byte b1 = data[ii];\r\n                    byte b2 = data[ii+1];\r\n                    tempData[ii*2] = b1;\r\n                    tempData[ii*2+1] = b2;\r\n                    tempData[ii*2+2] = b1;\r\n                    tempData[ii*2+3] = b2;\r\n                }\r\n            }\r\n            return tempData;\r\n        }\r\n    \r\n        boolean fastForward;\r\n        boolean fastRewind;\r\n    \r\n        public void setFastForward(boolean fastForward) {\r\n            logger.log(Level.FINEST, &quot;FastForward &quot; + fastForward);\r\n            this.fastForward = fastForward;\r\n            fastRewind = false;\r\n            flush();\r\n        }\r\n    \r\n        public boolean getFastForward() {\r\n            return fastForward;\r\n        }\r\n    \r\n        public void setFastRewind(boolean fastRewind) {\r\n            logger.log(Level.FINEST, &quot;FastRewind &quot; + fastRewind);\r\n            this.fastRewind = fastRewind;\r\n            fastForward = false;\r\n            flush();\r\n        }\r\n    \r\n        public boolean getFastRewind() {\r\n            return fastRewind;\r\n        }\r\n    \r\n        /** TODO - fix bug in LOOP_CONTINUOUSLY */\r\n        @Override\r\n        public void start() {\r\n            Runnable r = new Runnable() {\r\n                public void run() {\r\n                    try {\r\n                        /* Should these open()/close() calls be here, or explicitly\r\n                        called by user program?    The JavaDocs for line suggest that\r\n                        Clip should throw an IllegalArgumentException, so we&#39;ll\r\n                        stick with that and call it explicitly. */\r\n                        dataLine.open();\r\n    \r\n                        dataLine.start();\r\n                        int bytesRead = 0;\r\n                        int frameSize = dataLine.getFormat().getFrameSize();\r\n                        int bufSize = dataLine.getBufferSize();\r\n                        boolean startOrMove = true;\r\n                        byte[] data = new byte[bufSize];\r\n                        int offset = framePosition*frameSize;\r\n                        int totalBytes = offset;\r\n                        inputStream.read(new byte[offset], 0, offset);\r\n                        logger.log(Level.FINEST, &quot;loopCount &quot; + loopCount );\r\n                        while ((bytesRead = inputStream.read(data,0,data.length))\r\n                            != -1 &amp;&amp;\r\n                            (loopCount==Clip.LOOP_CONTINUOUSLY ||\r\n                            countDown&gt;0) &amp;&amp;\r\n                            active ) {\r\n                            logger.log(Level.FINEST,\r\n                                &quot;BigClip.start() loop &quot; + framePosition );\r\n                            totalBytes += bytesRead;\r\n                            int framesRead;\r\n                            byte[] tempData;\r\n                            if (format.getChannels()&lt;2) {\r\n                                tempData = convertMonoToStereo(data, bytesRead);\r\n                                framesRead = bytesRead/\r\n                                    format.getFrameSize();\r\n                                bytesRead*=2;\r\n                            } else {\r\n                                framesRead = bytesRead/\r\n                                    dataLine.getFormat().getFrameSize();\r\n                                tempData = Arrays.copyOfRange(data, 0, bytesRead);\r\n                            }\r\n                            framePosition += framesRead;\r\n                            if (framePosition&gt;=loopPointEnd) {\r\n                                framePosition = loopPointStart;\r\n                                inputStream.reset();\r\n                                countDown--;\r\n                                logger.log(Level.FINEST,\r\n                                    &quot;Loop Count: &quot; + countDown );\r\n                            }\r\n                            timelastPositionSet = System.currentTimeMillis();\r\n                            byte[] newData;\r\n                            if (fastForward) {\r\n                                newData = getEveryNthFrame(tempData, 2);\r\n                            } else if (fastRewind) {\r\n                                byte[] temp = getEveryNthFrame(tempData, 2);\r\n                                newData = reverseFrames(temp);\r\n                                inputStream.reset();\r\n                                totalBytes -= 2*bytesRead;\r\n                            framePosition -= 2*framesRead;\r\n                                if (totalBytes&lt;0) {\r\n                                    setFastRewind(false);\r\n                                    totalBytes = 0;\r\n                                }\r\n                                inputStream.skip(totalBytes);\r\n                                logger.log(Level.INFO, &quot;totalBytes &quot; + totalBytes);\r\n                            } else {\r\n                                newData = tempData;\r\n                            }\r\n                            dataLine.write(newData, 0, newData.length);\r\n                            if (startOrMove) {\r\n                                data = new byte[bufSize/\r\n                                    bufferUpdateFactor];\r\n                                startOrMove = false;\r\n                            }\r\n                        }\r\n                        logger.log(Level.FINEST,\r\n                            &quot;BigClip.start() loop ENDED&quot; + framePosition );\r\n                        active = false;\r\n                        dataLine.drain();\r\n                        dataLine.stop();\r\n                        /* should these open()/close() be here, or explicitly\r\n                        called by user program? */\r\n                        dataLine.close();\r\n                    } catch (LineUnavailableException lue) {\r\n                        logger.log( Level.SEVERE,\r\n                            &quot;No sound line available!&quot;, lue );\r\n                        if (parent!=null) {\r\n                            JOptionPane.showMessageDialog(\r\n                                parent,\r\n                                &quot;Clear the sound lines to proceed&quot;,\r\n                                &quot;No audio lines available!&quot;,\r\n                                JOptionPane.ERROR_MESSAGE);\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n            thread= new Thread(r);\r\n            // makes thread behaviour compatible with JavaSound post 1.4\r\n            thread.setDaemon(true);\r\n            thread.start();\r\n        }\r\n    \r\n        /** Assume the frame size is 4. */\r\n        public byte[] reverseFrames(byte[] data) {\r\n            byte[] reversed = new byte[data.length];\r\n            byte[] frame = new byte[4];\r\n    \r\n            for (int ii=0; ii&lt;data.length/4; ii++) {\r\n                int first = (data.length)-((ii+1)*4)+0;\r\n                int last = (data.length)-((ii+1)*4)+3;\r\n                frame[0] = data[first];\r\n                frame[1] = data[(data.length)-((ii+1)*4)+1];\r\n                frame[2] = data[(data.length)-((ii+1)*4)+2];\r\n                frame[3] = data[last];\r\n    \r\n                reversed[ii*4+0] = frame[0];\r\n                reversed[ii*4+1] = frame[1];\r\n                reversed[ii*4+2] = frame[2];\r\n                reversed[ii*4+3] = frame[3];\r\n                if (ii&lt;5 || ii&gt;(data.length/4)-5) {\r\n                    logger.log(Level.FINER, &quot;From \\t&quot; + first + &quot; \\tlast &quot; + last );\r\n                    logger.log(Level.FINER, &quot;To \\t&quot; + ((ii*4)+0) + &quot; \\tlast &quot; + ((ii*4)+3) );\r\n                }\r\n            }\r\n    \r\n    /*\r\n            for (int ii=0; ii&lt;data.length; ii++) {\r\n                reversed[ii] = data[data.length-1-ii];\r\n            }\r\n    */\r\n    \r\n            return reversed;\r\n        }\r\n    \r\n        /** Assume the frame size is 4. */\r\n        public byte[] getEveryNthFrame(byte[] data, int skip) {\r\n            int length = data.length/skip;\r\n            length = (length/4)*4;\r\n            logger.log(Level.FINEST, &quot;length &quot; + data.length + &quot; \\t&quot; + length);\r\n            byte[] b = new byte[length];\r\n            //byte[] frame = new byte[4];\r\n            for (int ii=0; ii&lt;b.length/4; ii++) {\r\n                b[ii*4+0] = data[ii*skip*4+0];\r\n                b[ii*4+1] = data[ii*skip*4+1];\r\n                b[ii*4+2] = data[ii*skip*4+2];\r\n                b[ii*4+3] = data[ii*skip*4+3];\r\n            }\r\n            return b;\r\n        }\r\n    \r\n        @Override\r\n        public void flush() {\r\n            dataLine.flush();\r\n        }\r\n    \r\n        @Override\r\n        public void drain() {\r\n            dataLine.drain();\r\n        }\r\n    \r\n        @Override\r\n        public void removeLineListener(LineListener listener) {\r\n            dataLine.removeLineListener(listener);\r\n        }\r\n    \r\n        @Override\r\n        public void addLineListener(LineListener listener) {\r\n            dataLine.addLineListener(listener);\r\n        }\r\n    \r\n        @Override\r\n        public Control getControl(Control.Type control) {\r\n            return dataLine.getControl(control);\r\n        }\r\n    \r\n        @Override\r\n        public Control[] getControls() {\r\n            if (dataLine==null) {\r\n                return new Control[0];\r\n            } else {\r\n                return dataLine.getControls();\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public boolean isControlSupported(Control.Type control) {\r\n            return dataLine.isControlSupported(control);\r\n        }\r\n    \r\n        @Override\r\n        public void close() {\r\n            dataLine.close();\r\n        }\r\n    \r\n        @Override\r\n        public void open() throws LineUnavailableException {\r\n            throw new IllegalArgumentException(&quot;illegal call to open() in interface Clip&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public Line.Info getLineInfo() {\r\n            return dataLine.getLineInfo();\r\n        }\r\n    \r\n        /** Determines the single largest sample size of all channels of the current clip.\r\n        This can be handy for determining a fraction to scal visual representations.\r\n        @return Double between 0 &amp; 1 representing the maximum signal level of any channel. */\r\n        public double getLargestSampleSize() {\r\n    \r\n            int largest = 0;\r\n            int current;\r\n    \r\n            boolean signed = (format.getEncoding()==AudioFormat.Encoding.PCM_SIGNED);\r\n            int bitDepth = format.getSampleSizeInBits();\r\n            boolean bigEndian = format.isBigEndian();\r\n    \r\n            int samples = audioData.length*8/bitDepth;\r\n    \r\n            if (signed) {\r\n                if (bitDepth/8==2) {\r\n                    if (bigEndian) {\r\n                        for (int cc = 0; cc &lt; samples; cc++) {\r\n                            current = (audioData[cc*2]*256 + (audioData[cc*2+1] &amp; 0xFF));\r\n                            if (Math.abs(current)&gt;largest) {\r\n                                largest = Math.abs(current);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        for (int cc = 0; cc &lt; samples; cc++) {\r\n                            current = (audioData[cc*2+1]*256 + (audioData[cc*2] &amp; 0xFF));\r\n                            if (Math.abs(current)&gt;largest) {\r\n                                largest = Math.abs(current);\r\n                            }\r\n                        }\r\n                    }\r\n                } else {\r\n                    for (int cc = 0; cc &lt; samples; cc++) {\r\n                        current = (audioData[cc] &amp; 0xFF);\r\n                        if (Math.abs(current)&gt;largest) {\r\n                            largest = Math.abs(current);\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                if (bitDepth/8==2) {\r\n                    if (bigEndian) {\r\n                        for (int cc = 0; cc &lt; samples; cc++) {\r\n                            current = (audioData[cc*2]*256 + (audioData[cc*2+1] - 0x80));\r\n                            if (Math.abs(current)&gt;largest) {\r\n                                largest = Math.abs(current);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        for (int cc = 0; cc &lt; samples; cc++) {\r\n                            current = (audioData[cc*2+1]*256 + (audioData[cc*2] - 0x80));\r\n                            if (Math.abs(current)&gt;largest) {\r\n                                largest = Math.abs(current);\r\n                            }\r\n                        }\r\n                    }\r\n                } else {\r\n                    for (int cc = 0; cc &lt; samples; cc++) {\r\n                        if ( audioData[cc]&gt;0 ) {\r\n                            current = (audioData[cc] - 0x80);\r\n                            if (Math.abs(current)&gt;largest) {\r\n                                largest = Math.abs(current);\r\n                            }\r\n                        } else {\r\n                            current = (audioData[cc] + 0x80);\r\n                            if (Math.abs(current)&gt;largest) {\r\n                                largest = Math.abs(current);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            // audioData\r\n            logger.log(Level.FINEST, &quot;Max signal level: &quot; + (double)largest/(Math.pow(2, bitDepth-1)));\r\n            return (double)largest/(Math.pow(2, bitDepth-1));\r\n        }\r\n    }","title":"Playing MP3 using Java Sound API","body":"<p>As mentioned, Java Sound does not support MP3 by default.  For the types it does support in any specific JRE, check <code>AudioSystem.getAudioFileTypes()</code>.</p>\n\n<p>One way to add support for reading MP3 is to add the JMF based <a href=\"http://www.oracle.com/technetwork/java/javase/download-137625.html\" rel=\"noreferrer\">mp3plugin.jar</a><sup>1</sup> to the application's run-time class-path.</p>\n\n<ol>\n<li>That link is known to be less than entirely reliable.  The Jar is also available at my <a href=\"https://drive.google.com/drive/#folders/0B5B9wDXIGw9lUnJaUjA2cmlVRE0\" rel=\"noreferrer\">software share drive</a>.</li>\n</ol>\n\n<p>As to your actual question, while a <a href=\"http://download.oracle.com/javase/7/docs/api/javax/sound/sampled/Clip.html\" rel=\"noreferrer\">javax.sound.sampled.Clip</a> might seem ideal for this kind of task, it unfortunately will only hold a second of stereo, 16 bit, 44.1KHz sound.  That is why I developed <code>BigClip</code>.  (Which has its own problems with looping, if you fix them, report back.)</p>\n\n<pre><code>package org.pscode.xui.sound.bigclip;\n\nimport java.awt.Component;\nimport javax.swing.*;\n\n// J2SE 1.3\nimport javax.sound.sampled.*;\n\nimport java.io.*;\n\n// J2SE 1.4\nimport java.util.logging.*;\n\nimport java.util.Arrays;\n\n/** An implementation of the javax.sound.sampled.Clip that is designed\nto handle Clips of arbitrary size, limited only by the amount of memory\navailable to the app.    It uses the post 1.4 thread behaviour (daemon thread)\nthat will stop the sound running after the main has exited.\n&lt;ul&gt;\n&lt;li&gt;2012-07-24 - Fixed bug in size of byte array (2^16 -&gt; (int)Math.pow(2, 16)).\n&lt;li&gt;2009-09-01 - Fixed bug that had clip ..clipped at the end, by calling drain() (before\ncalling stop()) on the dataline after the play loop was complete. Improvement to frame\nand microsecond position determination.\n&lt;li&gt;2009-08-17 - added convenience constructor that accepts a Clip. Changed the private\nconvertFrameToM..seconds methods from 'micro' to 'milli' to reflect that they were dealing\nwith units of 1000/th of a second.\n&lt;li&gt;2009-08-14 - got rid of flush() after the sound loop, as it was cutting off tracks just\nbefore the end, and was found to be not needed for the fast-forward/rewind functionality it\nwas introduced to support.\n&lt;li&gt;2009-08-11 - First binary release.\n&lt;/ul&gt;\nN.B. Remove @Override notation and logging to use in 1.3+\n@since 1.5\n@version 2009-08-17\n@author Andrew Thompson */\npublic class BigClip implements Clip, LineListener {\n\n    /** The DataLine used by this Clip. */\n    private SourceDataLine dataLine;\n\n    /** The raw bytes of the audio data. */\n    private byte[] audioData;\n\n    /** The stream wrapper for the audioData. */\n    private ByteArrayInputStream inputStream;\n\n    /** Loop count set by the calling code. */\n    private int loopCount;\n    /** Internal count of how many loops to go. */\n    private int countDown;\n    /** The start of a loop point.    Defaults to 0. */\n    private int loopPointStart;\n    /** The end of a loop point.    Defaults to the end of the Clip. */\n    private int loopPointEnd;\n\n    /** Stores the current frame position of the clip. */\n    private int framePosition;\n\n    /** Thread used to run() sound. */\n    private Thread thread;\n    /** Whether the sound is currently playing or active. */\n    private boolean active;\n    /** Stores the last time bytes were dumped to the audio stream. */\n    private long timelastPositionSet;\n\n    private int bufferUpdateFactor = 2;\n\n    /** The parent Component for the loading progress dialog.    */\n    Component parent = null;\n\n    /** Used for reporting messages. */\n    private Logger logger = Logger.getAnonymousLogger();\n\n    /** Default constructor for a BigClip.    Does nothing.    Information from the\n    AudioInputStream passed in open() will be used to get an appropriate SourceDataLine. */\n    public BigClip() {}\n\n    /** There are a number of AudioSystem methods that will return a configured Clip.    This\n    convenience constructor allows us to obtain a SourceDataLine for the BigClip that uses\n    the same AudioFormat as the original Clip.\n    @param clip Clip The Clip used to configure the BigClip. */\n    public BigClip(Clip clip) throws LineUnavailableException {\n        dataLine = AudioSystem.getSourceDataLine( clip.getFormat() );\n    }\n\n    /** Provides the entire audio buffer of this clip.\n    @return audioData byte[] The bytes of the audio data that is loaded in this Clip. */\n    public byte[] getAudioData() {\n        return audioData;\n    }\n\n    /** Sets a parent component to act as owner of a \"Loading track..\" progress dialog.\n    If null, there will be no progress shown. */\n    public void setParentComponent(Component parent) {\n        this.parent = parent;\n    }\n\n    /** Converts a frame count to a duration in milliseconds. */\n    private long convertFramesToMilliseconds(int frames) {\n        return (frames/(long)dataLine.getFormat().getSampleRate())*1000;\n    }\n\n    /** Converts a duration in milliseconds to a frame count. */\n    private int convertMillisecondsToFrames(long milliseconds) {\n        return (int)(milliseconds/dataLine.getFormat().getSampleRate());\n    }\n\n    @Override\n    public void update(LineEvent le) {\n        logger.log(Level.FINEST, \"update: \" + le );\n    }\n\n    @Override\n    public void loop(int count) {\n        logger.log(Level.FINEST, \"loop(\" + count + \") - framePosition: \" + framePosition);\n        loopCount = count;\n        countDown = count;\n        active = true;\n        inputStream.reset();\n\n        start();\n    }\n\n    @Override\n    public void setLoopPoints(int start, int end) {\n        if (\n            start&lt;0 ||\n            start&gt;audioData.length-1 ||\n            end&lt;0 ||\n            end&gt;audioData.length\n            ) {\n            throw new IllegalArgumentException(\n                \"Loop points '\" +\n                start +\n                \"' and '\" +\n                end +\n                \"' cannot be set for buffer of size \" +\n                audioData.length);\n        }\n        if (start&gt;end) {\n            throw new IllegalArgumentException(\n                \"End position \" +\n                end +\n                \" preceeds start position \" + start);\n        }\n\n        loopPointStart = start;\n        framePosition = loopPointStart;\n        loopPointEnd = end;\n    }\n\n    @Override\n    public void setMicrosecondPosition(long milliseconds) {\n        framePosition = convertMillisecondsToFrames(milliseconds);\n    }\n\n    @Override\n    public long getMicrosecondPosition() {\n        return convertFramesToMilliseconds(getFramePosition());\n    }\n\n    @Override\n    public long getMicrosecondLength() {\n        return convertFramesToMilliseconds(getFrameLength());\n    }\n\n    @Override\n    public void setFramePosition(int frames) {\n        framePosition = frames;\n        int offset = framePosition*format.getFrameSize();\n        try {\n            inputStream.reset();\n            inputStream.read(new byte[offset]);\n        } catch(Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Override\n    public int getFramePosition() {\n        long timeSinceLastPositionSet = System.currentTimeMillis() - timelastPositionSet;\n        int size = dataLine.getBufferSize()*(format.getChannels()/2)/bufferUpdateFactor;\n        int framesSinceLast = (int)((timeSinceLastPositionSet/1000f)*\n            dataLine.getFormat().getFrameRate());\n        int framesRemainingTillTime = size - framesSinceLast;\n        return framePosition\n            - framesRemainingTillTime;\n    }\n\n    @Override\n    public int getFrameLength() {\n        return audioData.length/format.getFrameSize();\n    }\n\n    AudioFormat format;\n\n    @Override\n    public void open(AudioInputStream stream) throws\n        IOException,\n        LineUnavailableException {\n\n        AudioInputStream is1;\n        format = stream.getFormat();\n\n        if (format.getEncoding()!=AudioFormat.Encoding.PCM_SIGNED) {\n            is1 = AudioSystem.getAudioInputStream(\n                AudioFormat.Encoding.PCM_SIGNED, stream );\n        } else {\n            is1 = stream;\n        }\n        format = is1.getFormat();\n        InputStream is2;\n        if (parent!=null) {\n            ProgressMonitorInputStream pmis = new ProgressMonitorInputStream(\n                parent,\n                \"Loading track..\",\n                is1);\n            pmis.getProgressMonitor().setMillisToPopup(0);\n            is2 = pmis;\n        } else {\n            is2 = is1;\n        }\n\n        byte[] buf = new byte[ (int)Math.pow(2, 16) ];\n        int totalRead = 0;\n        int numRead = 0;\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        numRead = is2.read( buf );\n        while (numRead&gt;-1) {\n            baos.write( buf, 0, numRead );\n            numRead = is2.read( buf, 0, buf.length );\n            totalRead += numRead;\n        }\n        is2.close();\n        audioData = baos.toByteArray();\n        AudioFormat afTemp;\n        if (format.getChannels()&lt;2) {\n            afTemp = new AudioFormat(\n                format.getEncoding(),\n                format.getSampleRate(),\n                format.getSampleSizeInBits(),\n                2,\n                format.getSampleSizeInBits()*2/8, // calculate frame size\n                format.getFrameRate(),\n                format.isBigEndian()\n                );\n        } else {\n            afTemp = format;\n        }\n\n        setLoopPoints(0,audioData.length);\n        dataLine = AudioSystem.getSourceDataLine(afTemp);\n        dataLine.open();\n        inputStream = new ByteArrayInputStream( audioData );\n    }\n\n    @Override\n    public void open(AudioFormat format,\n        byte[] data,\n        int offset,\n        int bufferSize)\n        throws LineUnavailableException {\n        byte[] input = new byte[bufferSize];\n        for (int ii=0; ii&lt;input.length; ii++) {\n            input[ii] = data[offset+ii];\n        }\n        ByteArrayInputStream inputStream = new ByteArrayInputStream(input);\n        try {\n            AudioInputStream ais1 = AudioSystem.getAudioInputStream(inputStream);\n            AudioInputStream ais2 = AudioSystem.getAudioInputStream(format, ais1);\n            open(ais2);\n        } catch( UnsupportedAudioFileException uafe ) {\n            throw new IllegalArgumentException(uafe);\n        } catch( IOException ioe ) {\n            throw new IllegalArgumentException(ioe);\n        }\n        // TODO    -    throw IAE for invalid frame size, format.\n    }\n\n    @Override\n    public float getLevel() {\n        return dataLine.getLevel();\n    }\n\n    @Override\n    public long getLongFramePosition() {\n        return dataLine.getLongFramePosition()*2/format.getChannels();\n    }\n\n    @Override\n    public int available() {\n        return dataLine.available();\n    }\n\n    @Override\n    public int getBufferSize() {\n        return dataLine.getBufferSize();\n    }\n\n    @Override\n    public AudioFormat getFormat() {\n        return format;\n    }\n\n    @Override\n    public boolean isActive() {\n        return dataLine.isActive();\n    }\n\n    @Override\n    public boolean isRunning() {\n        return dataLine.isRunning();\n    }\n\n    @Override\n    public boolean isOpen() {\n        return dataLine.isOpen();\n    }\n\n    @Override\n    public void stop() {\n        logger.log(Level.FINEST, \"BigClip.stop()\");\n        active = false;\n        // why did I have this commented out?\n        dataLine.stop();\n        if (thread!=null) {\n            try {\n                active = false;\n                thread.join();\n            } catch(InterruptedException wakeAndContinue) {\n            }\n        }\n    }\n\n    public byte[] convertMonoToStereo(byte[] data, int bytesRead) {\n        byte[] tempData = new byte[bytesRead*2];\n        if (format.getSampleSizeInBits()==8) {\n            for(int ii=0; ii&lt;bytesRead; ii++) {\n                byte b = data[ii];\n                tempData[ii*2] = b;\n                tempData[ii*2+1] = b;\n            }\n        } else {\n            for(int ii=0; ii&lt;bytesRead-1; ii+=2) {\n                //byte b2 = is2.read();\n                byte b1 = data[ii];\n                byte b2 = data[ii+1];\n                tempData[ii*2] = b1;\n                tempData[ii*2+1] = b2;\n                tempData[ii*2+2] = b1;\n                tempData[ii*2+3] = b2;\n            }\n        }\n        return tempData;\n    }\n\n    boolean fastForward;\n    boolean fastRewind;\n\n    public void setFastForward(boolean fastForward) {\n        logger.log(Level.FINEST, \"FastForward \" + fastForward);\n        this.fastForward = fastForward;\n        fastRewind = false;\n        flush();\n    }\n\n    public boolean getFastForward() {\n        return fastForward;\n    }\n\n    public void setFastRewind(boolean fastRewind) {\n        logger.log(Level.FINEST, \"FastRewind \" + fastRewind);\n        this.fastRewind = fastRewind;\n        fastForward = false;\n        flush();\n    }\n\n    public boolean getFastRewind() {\n        return fastRewind;\n    }\n\n    /** TODO - fix bug in LOOP_CONTINUOUSLY */\n    @Override\n    public void start() {\n        Runnable r = new Runnable() {\n            public void run() {\n                try {\n                    /* Should these open()/close() calls be here, or explicitly\n                    called by user program?    The JavaDocs for line suggest that\n                    Clip should throw an IllegalArgumentException, so we'll\n                    stick with that and call it explicitly. */\n                    dataLine.open();\n\n                    dataLine.start();\n                    int bytesRead = 0;\n                    int frameSize = dataLine.getFormat().getFrameSize();\n                    int bufSize = dataLine.getBufferSize();\n                    boolean startOrMove = true;\n                    byte[] data = new byte[bufSize];\n                    int offset = framePosition*frameSize;\n                    int totalBytes = offset;\n                    inputStream.read(new byte[offset], 0, offset);\n                    logger.log(Level.FINEST, \"loopCount \" + loopCount );\n                    while ((bytesRead = inputStream.read(data,0,data.length))\n                        != -1 &amp;&amp;\n                        (loopCount==Clip.LOOP_CONTINUOUSLY ||\n                        countDown&gt;0) &amp;&amp;\n                        active ) {\n                        logger.log(Level.FINEST,\n                            \"BigClip.start() loop \" + framePosition );\n                        totalBytes += bytesRead;\n                        int framesRead;\n                        byte[] tempData;\n                        if (format.getChannels()&lt;2) {\n                            tempData = convertMonoToStereo(data, bytesRead);\n                            framesRead = bytesRead/\n                                format.getFrameSize();\n                            bytesRead*=2;\n                        } else {\n                            framesRead = bytesRead/\n                                dataLine.getFormat().getFrameSize();\n                            tempData = Arrays.copyOfRange(data, 0, bytesRead);\n                        }\n                        framePosition += framesRead;\n                        if (framePosition&gt;=loopPointEnd) {\n                            framePosition = loopPointStart;\n                            inputStream.reset();\n                            countDown--;\n                            logger.log(Level.FINEST,\n                                \"Loop Count: \" + countDown );\n                        }\n                        timelastPositionSet = System.currentTimeMillis();\n                        byte[] newData;\n                        if (fastForward) {\n                            newData = getEveryNthFrame(tempData, 2);\n                        } else if (fastRewind) {\n                            byte[] temp = getEveryNthFrame(tempData, 2);\n                            newData = reverseFrames(temp);\n                            inputStream.reset();\n                            totalBytes -= 2*bytesRead;\n                        framePosition -= 2*framesRead;\n                            if (totalBytes&lt;0) {\n                                setFastRewind(false);\n                                totalBytes = 0;\n                            }\n                            inputStream.skip(totalBytes);\n                            logger.log(Level.INFO, \"totalBytes \" + totalBytes);\n                        } else {\n                            newData = tempData;\n                        }\n                        dataLine.write(newData, 0, newData.length);\n                        if (startOrMove) {\n                            data = new byte[bufSize/\n                                bufferUpdateFactor];\n                            startOrMove = false;\n                        }\n                    }\n                    logger.log(Level.FINEST,\n                        \"BigClip.start() loop ENDED\" + framePosition );\n                    active = false;\n                    dataLine.drain();\n                    dataLine.stop();\n                    /* should these open()/close() be here, or explicitly\n                    called by user program? */\n                    dataLine.close();\n                } catch (LineUnavailableException lue) {\n                    logger.log( Level.SEVERE,\n                        \"No sound line available!\", lue );\n                    if (parent!=null) {\n                        JOptionPane.showMessageDialog(\n                            parent,\n                            \"Clear the sound lines to proceed\",\n                            \"No audio lines available!\",\n                            JOptionPane.ERROR_MESSAGE);\n                    }\n                }\n            }\n        };\n        thread= new Thread(r);\n        // makes thread behaviour compatible with JavaSound post 1.4\n        thread.setDaemon(true);\n        thread.start();\n    }\n\n    /** Assume the frame size is 4. */\n    public byte[] reverseFrames(byte[] data) {\n        byte[] reversed = new byte[data.length];\n        byte[] frame = new byte[4];\n\n        for (int ii=0; ii&lt;data.length/4; ii++) {\n            int first = (data.length)-((ii+1)*4)+0;\n            int last = (data.length)-((ii+1)*4)+3;\n            frame[0] = data[first];\n            frame[1] = data[(data.length)-((ii+1)*4)+1];\n            frame[2] = data[(data.length)-((ii+1)*4)+2];\n            frame[3] = data[last];\n\n            reversed[ii*4+0] = frame[0];\n            reversed[ii*4+1] = frame[1];\n            reversed[ii*4+2] = frame[2];\n            reversed[ii*4+3] = frame[3];\n            if (ii&lt;5 || ii&gt;(data.length/4)-5) {\n                logger.log(Level.FINER, \"From \\t\" + first + \" \\tlast \" + last );\n                logger.log(Level.FINER, \"To \\t\" + ((ii*4)+0) + \" \\tlast \" + ((ii*4)+3) );\n            }\n        }\n\n/*\n        for (int ii=0; ii&lt;data.length; ii++) {\n            reversed[ii] = data[data.length-1-ii];\n        }\n*/\n\n        return reversed;\n    }\n\n    /** Assume the frame size is 4. */\n    public byte[] getEveryNthFrame(byte[] data, int skip) {\n        int length = data.length/skip;\n        length = (length/4)*4;\n        logger.log(Level.FINEST, \"length \" + data.length + \" \\t\" + length);\n        byte[] b = new byte[length];\n        //byte[] frame = new byte[4];\n        for (int ii=0; ii&lt;b.length/4; ii++) {\n            b[ii*4+0] = data[ii*skip*4+0];\n            b[ii*4+1] = data[ii*skip*4+1];\n            b[ii*4+2] = data[ii*skip*4+2];\n            b[ii*4+3] = data[ii*skip*4+3];\n        }\n        return b;\n    }\n\n    @Override\n    public void flush() {\n        dataLine.flush();\n    }\n\n    @Override\n    public void drain() {\n        dataLine.drain();\n    }\n\n    @Override\n    public void removeLineListener(LineListener listener) {\n        dataLine.removeLineListener(listener);\n    }\n\n    @Override\n    public void addLineListener(LineListener listener) {\n        dataLine.addLineListener(listener);\n    }\n\n    @Override\n    public Control getControl(Control.Type control) {\n        return dataLine.getControl(control);\n    }\n\n    @Override\n    public Control[] getControls() {\n        if (dataLine==null) {\n            return new Control[0];\n        } else {\n            return dataLine.getControls();\n        }\n    }\n\n    @Override\n    public boolean isControlSupported(Control.Type control) {\n        return dataLine.isControlSupported(control);\n    }\n\n    @Override\n    public void close() {\n        dataLine.close();\n    }\n\n    @Override\n    public void open() throws LineUnavailableException {\n        throw new IllegalArgumentException(\"illegal call to open() in interface Clip\");\n    }\n\n    @Override\n    public Line.Info getLineInfo() {\n        return dataLine.getLineInfo();\n    }\n\n    /** Determines the single largest sample size of all channels of the current clip.\n    This can be handy for determining a fraction to scal visual representations.\n    @return Double between 0 &amp; 1 representing the maximum signal level of any channel. */\n    public double getLargestSampleSize() {\n\n        int largest = 0;\n        int current;\n\n        boolean signed = (format.getEncoding()==AudioFormat.Encoding.PCM_SIGNED);\n        int bitDepth = format.getSampleSizeInBits();\n        boolean bigEndian = format.isBigEndian();\n\n        int samples = audioData.length*8/bitDepth;\n\n        if (signed) {\n            if (bitDepth/8==2) {\n                if (bigEndian) {\n                    for (int cc = 0; cc &lt; samples; cc++) {\n                        current = (audioData[cc*2]*256 + (audioData[cc*2+1] &amp; 0xFF));\n                        if (Math.abs(current)&gt;largest) {\n                            largest = Math.abs(current);\n                        }\n                    }\n                } else {\n                    for (int cc = 0; cc &lt; samples; cc++) {\n                        current = (audioData[cc*2+1]*256 + (audioData[cc*2] &amp; 0xFF));\n                        if (Math.abs(current)&gt;largest) {\n                            largest = Math.abs(current);\n                        }\n                    }\n                }\n            } else {\n                for (int cc = 0; cc &lt; samples; cc++) {\n                    current = (audioData[cc] &amp; 0xFF);\n                    if (Math.abs(current)&gt;largest) {\n                        largest = Math.abs(current);\n                    }\n                }\n            }\n        } else {\n            if (bitDepth/8==2) {\n                if (bigEndian) {\n                    for (int cc = 0; cc &lt; samples; cc++) {\n                        current = (audioData[cc*2]*256 + (audioData[cc*2+1] - 0x80));\n                        if (Math.abs(current)&gt;largest) {\n                            largest = Math.abs(current);\n                        }\n                    }\n                } else {\n                    for (int cc = 0; cc &lt; samples; cc++) {\n                        current = (audioData[cc*2+1]*256 + (audioData[cc*2] - 0x80));\n                        if (Math.abs(current)&gt;largest) {\n                            largest = Math.abs(current);\n                        }\n                    }\n                }\n            } else {\n                for (int cc = 0; cc &lt; samples; cc++) {\n                    if ( audioData[cc]&gt;0 ) {\n                        current = (audioData[cc] - 0x80);\n                        if (Math.abs(current)&gt;largest) {\n                            largest = Math.abs(current);\n                        }\n                    } else {\n                        current = (audioData[cc] + 0x80);\n                        if (Math.abs(current)&gt;largest) {\n                            largest = Math.abs(current);\n                        }\n                    }\n                }\n            }\n        }\n\n        // audioData\n        logger.log(Level.FINEST, \"Max signal level: \" + (double)largest/(Math.pow(2, bitDepth-1)));\n        return (double)largest/(Math.pow(2, bitDepth-1));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1750827,"reputation":37,"user_id":1599947,"display_name":"REMOSEWA"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1345154552,"creation_date":1345018791,"answer_id":11966057,"question_id":5667454,"body_markdown":"I tried to make an edit based on the bugs that I encountered with the BigClip code, however it was rejected. The following code are my fixes to the program. Keep in mind that some of this is still untested as I wasn&#39;t really concerned with looping,fast-forwarding,or rewinding.\r\n\r\n\r\n\r\nedit: Ran tests and updated code as it wasn&#39;t working with rewind/fast-forward. Now it works, but still haven&#39;t tested looping, although it should theoretically work.\r\n\r\nGet updated BigClip code here:  http://pastie.org/4523763","title":"Playing MP3 using Java Sound API","body":"<p>I tried to make an edit based on the bugs that I encountered with the BigClip code, however it was rejected. The following code are my fixes to the program. Keep in mind that some of this is still untested as I wasn't really concerned with looping,fast-forwarding,or rewinding.</p>\n\n<p>edit: Ran tests and updated code as it wasn't working with rewind/fast-forward. Now it works, but still haven't tested looping, although it should theoretically work.</p>\n\n<p>Get updated BigClip code here:  <a href=\"http://pastie.org/4523763\" rel=\"nofollow\">http://pastie.org/4523763</a></p>\n"},{"tags":[],"owner":{"account_id":1883643,"reputation":483,"user_id":1703291,"accept_rate":67,"display_name":"MMujtabaRoohani"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1351378671,"creation_date":1351370865,"answer_id":13104050,"question_id":5667454,"body_markdown":"Convert the file to `.wav` using [media.io&#39;s online service][1]; then use it in your program.\r\n\r\n\r\n  [1]: http://media.io","title":"Playing MP3 using Java Sound API","body":"<p>Convert the file to <code>.wav</code> using <a href=\"http://media.io\" rel=\"nofollow\">media.io's online service</a>; then use it in your program.</p>\n"},{"tags":[],"owner":{"account_id":2631908,"reputation":822,"user_id":2277645,"accept_rate":56,"display_name":"Tech Nerd"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1367048036,"creation_date":1367005341,"answer_id":16244045,"question_id":5667454,"body_markdown":"           String file=&quot;SOME//SONGFILE//PATH&quot;;\r\n           FileInputStream fis     = new FileInputStream(file);\r\n           BufferedInputStream bis = new BufferedInputStream(fis);\r\n           player = new Player(bis);\r\n\r\n           player.play();\r\nThe jar folders you must have: mp3plugin.jar and jlayer.jar (do google)","title":"Playing MP3 using Java Sound API","body":"<pre><code>       String file=\"SOME//SONGFILE//PATH\";\n       FileInputStream fis     = new FileInputStream(file);\n       BufferedInputStream bis = new BufferedInputStream(fis);\n       player = new Player(bis);\n\n       player.play();\n</code></pre>\n\n<p>The jar folders you must have: mp3plugin.jar and jlayer.jar (do google)</p>\n"},{"tags":[],"owner":{"account_id":1536969,"reputation":1409,"user_id":1432734,"display_name":"Adam Gawne-Cain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676374123,"creation_date":1676374123,"answer_id":75447185,"question_id":5667454,"body_markdown":"How to play MP3 from Java without plugin\r\n----------------------------------------\r\n\r\nIf you must use Java Sound API you will need to get an MP3 plugin.\r\n\r\nHowever, if you want to play MP3 from Java without any plugin then you can use Runtime and Process to get a OS command line utility to play the MP3 file.  For example, here is how to do it in macOS:\r\n\r\n\tpublic class Play {\r\n\t\tpublic static void main(String[] args) throws Exception {\r\n\t\t\tRuntime rt = Runtime.getRuntime();\r\n\t\t\tProcess p=rt.exec(new String[] {\r\n\t\t\t\t\t&quot;afplay&quot;,\r\n\t\t\t\t\t&quot;/some/path/tester.mp3&quot;\r\n\t\t\t});\r\n\t\t\tp.waitFor();\r\n\t\t}\r\n\t}\r\n\r\nThis example uses macOS command-line utility &quot;afplay&quot;.   I guess there are similar command-line utilities in Windows, Linux etc.\r\n\r\nThe above code uses &quot;p.waitFor()&quot; to wait until the MP3 file finishes playing.  That way you can play lots of MP3 files one-after-the-other with a Java loop.","title":"Playing MP3 using Java Sound API","body":"<h2>How to play MP3 from Java without plugin</h2>\n<p>If you must use Java Sound API you will need to get an MP3 plugin.</p>\n<p>However, if you want to play MP3 from Java without any plugin then you can use Runtime and Process to get a OS command line utility to play the MP3 file.  For example, here is how to do it in macOS:</p>\n<pre><code>public class Play {\n    public static void main(String[] args) throws Exception {\n        Runtime rt = Runtime.getRuntime();\n        Process p=rt.exec(new String[] {\n                &quot;afplay&quot;,\n                &quot;/some/path/tester.mp3&quot;\n        });\n        p.waitFor();\n    }\n}\n</code></pre>\n<p>This example uses macOS command-line utility &quot;afplay&quot;.   I guess there are similar command-line utilities in Windows, Linux etc.</p>\n<p>The above code uses &quot;p.waitFor()&quot; to wait until the MP3 file finishes playing.  That way you can play lots of MP3 files one-after-the-other with a Java loop.</p>\n"}],"owner":{"account_id":326393,"reputation":22554,"user_id":648138,"accept_rate":68,"display_name":"Suhail Gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43510,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":5668510,"answer_count":7,"score":7,"last_activity_date":1676374123,"creation_date":1302803802,"question_id":5667454,"body_markdown":"Can you please suggest that how can i write a _piece_ that plays a song.?\r\n\r\nI tried the following snippet but i get the this exception:![enter image description here][1]\r\n\r\n    import sun.audio.*;\r\n    import java.io.*;\r\n\r\n    class tester {\r\n     public static void main(String args[]) throws Exception {\r\n      InputStream in=new FileInputStream(&quot;tester.mp3&quot;);\r\n      AudioStream as=new AudioStream(in);\r\n      AudioPlayer.player.start(as);\r\n     }\r\n    }\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/MLEzR.jpg\r\n\r\n","title":"Playing MP3 using Java Sound API","body":"<p>Can you please suggest that how can i write a <em>piece</em> that plays a song.?</p>\n\n<p>I tried the following snippet but i get the this exception:<img src=\"https://i.stack.imgur.com/MLEzR.jpg\" alt=\"enter image description here\"></p>\n\n<pre><code>import sun.audio.*;\nimport java.io.*;\n\nclass tester {\n public static void main(String args[]) throws Exception {\n  InputStream in=new FileInputStream(\"tester.mp3\");\n  AudioStream as=new AudioStream(in);\n  AudioPlayer.player.start(as);\n }\n}\n</code></pre>\n"},{"tags":["java","maven","intellij-idea","junit","junit-jupiter"],"comments":[{"owner":{"account_id":10344310,"reputation":1039,"user_id":7629737,"display_name":"Yevhen Danchenko"},"score":0,"creation_date":1591074198,"post_id":62144635,"comment_id":109909904,"body_markdown":"JUnit 5 consists of several modules and assumptions are a part of `junit-jupiter-api` library, so you need this dependency in your pom file, e.g. the latest stable version is [5.6.2](https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api/5.6.2)","body":"JUnit 5 consists of several modules and assumptions are a part of <code>junit-jupiter-api</code> library, so you need this dependency in your pom file, e.g. the latest stable version is <a href=\"https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api/5.6.2\" rel=\"nofollow noreferrer\">5.6.2</a>"},{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":0,"creation_date":1591085995,"post_id":62144635,"comment_id":109914725,"body_markdown":"Can you compile project from command line by Maven?","body":"Can you compile project from command line by Maven?"},{"owner":{"account_id":18631910,"reputation":215,"user_id":13579667,"display_name":"Mikhail"},"score":0,"creation_date":1591088713,"post_id":62144635,"comment_id":109915982,"body_markdown":"No, I have tried)","body":"No, I have tried)"}],"answers":[{"tags":[],"owner":{"account_id":5312467,"reputation":44,"user_id":4238282,"display_name":"Adao Amaral"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1591103140,"creation_date":1591103140,"answer_id":62152701,"question_id":62144635,"body_markdown":"It&#39;s a import problem probably. Try:\r\n\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n         &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n         &lt;version&gt;5.6.2&lt;/version&gt;\r\n         &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt; \r\n\r\n   - Check if maven import is ok\r\n   - Close your project in intellij\r\n   - Delete your .m2 folder in your HOME directory (user/yourusername in windows, /home in linux)\r\n   - Execute in a terminal in your project: mvn dependency:purge-local-repository clean.\r\n   - Open your project again\r\n\r\nIf it&#39;s not ok yet, try the junit 4.12. Its have Assumptions too.\r\n","title":"IDE does not recognize Assumptions","body":"<p>It's a import problem probably. Try:</p>\n\n<pre><code>  &lt;dependency&gt;\n     &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n     &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n     &lt;version&gt;5.6.2&lt;/version&gt;\n     &lt;scope&gt;test&lt;/scope&gt;\n  &lt;/dependency&gt; \n</code></pre>\n\n<ul>\n<li>Check if maven import is ok</li>\n<li>Close your project in intellij</li>\n<li>Delete your .m2 folder in your HOME directory (user/yourusername in windows, /home in linux)</li>\n<li>Execute in a terminal in your project: mvn dependency:purge-local-repository clean.</li>\n<li>Open your project again</li>\n</ul>\n\n<p>If it's not ok yet, try the junit 4.12. Its have Assumptions too.</p>\n"},{"tags":[],"owner":{"account_id":9858780,"reputation":491,"user_id":9982796,"display_name":"Abhijith Ravindran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676374030,"creation_date":1676374030,"answer_id":75447161,"question_id":62144635,"body_markdown":"assumeTrue method is part of JUnit 4, but you can also use it in JUnit 5 through the \r\n\r\n&gt; org.junit.jupiter.api.Assumptions class. \r\n\r\nFor intelliJ - Junit5 combination, make sure to import the following in your class:\r\n\r\n    import static org.junit.jupiter.api.Assumptions.assumeTrue;\r\n\r\n","title":"IDE does not recognize Assumptions","body":"<p>assumeTrue method is part of JUnit 4, but you can also use it in JUnit 5 through the</p>\n<blockquote>\n<p>org.junit.jupiter.api.Assumptions class.</p>\n</blockquote>\n<p>For intelliJ - Junit5 combination, make sure to import the following in your class:</p>\n<pre><code>import static org.junit.jupiter.api.Assumptions.assumeTrue;\n</code></pre>\n"}],"owner":{"account_id":18631910,"reputation":215,"user_id":13579667,"display_name":"Mikhail"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":62152701,"answer_count":2,"score":2,"last_activity_date":1676374030,"creation_date":1591070659,"question_id":62144635,"body_markdown":"I am using **Junit5**, and my **IDE (IntelijIdea)** is not recognize **Assumptions**. I am actually do not know why, but may be there is some dependecy on Maven I do not connect into project. Below I will show you the sample of my code.\r\n\r\nThis is my Assumptions import.\r\n\r\n`import org.junit.jupiter.api.Assumptions;`\r\n\r\nAnd this is wrong code (I can not compile it, compiler does not know what is assumeTrue() )\r\n\r\n    @Test\r\n    @EnabledOnOs(OS.MAC)\r\n    void testInsertion() {\r\n        assumeTrue(isServerUp); //That place is crashing\r\n        assertThrows(NullPointerException.class, () -&gt; Connection.insertTheInstance(person),\r\n                &quot;&quot;);\r\nIf you are familiar with this case then, please, share you knowledge) Many thanks!\r\n\r\n","title":"IDE does not recognize Assumptions","body":"<p>I am using <strong>Junit5</strong>, and my <strong>IDE (IntelijIdea)</strong> is not recognize <strong>Assumptions</strong>. I am actually do not know why, but may be there is some dependecy on Maven I do not connect into project. Below I will show you the sample of my code.</p>\n\n<p>This is my Assumptions import.</p>\n\n<p><code>import org.junit.jupiter.api.Assumptions;</code></p>\n\n<p>And this is wrong code (I can not compile it, compiler does not know what is assumeTrue() )</p>\n\n<pre><code>@Test\n@EnabledOnOs(OS.MAC)\nvoid testInsertion() {\n    assumeTrue(isServerUp); //That place is crashing\n    assertThrows(NullPointerException.class, () -&gt; Connection.insertTheInstance(person),\n            \"\");\n</code></pre>\n\n<p>If you are familiar with this case then, please, share you knowledge) Many thanks!</p>\n"},{"tags":["java","spring","rest","spring-boot"],"comments":[{"owner":{"account_id":7074458,"reputation":3504,"user_id":5415018,"display_name":"Urosh T."},"score":0,"creation_date":1543240970,"post_id":53482633,"comment_id":93835220,"body_markdown":"Probably your controller class is not picked up by your application scanning. Could you show us your package structure?","body":"Probably your controller class is not picked up by your application scanning. Could you show us your package structure?"},{"owner":{"account_id":4468601,"reputation":7627,"user_id":3635454,"accept_rate":75,"display_name":"pleft"},"score":0,"creation_date":1543241076,"post_id":53482633,"comment_id":93835287,"body_markdown":"`apllication.properties` are you sure you have not a typo here? should be `application.properties`","body":"<code>apllication.properties</code> are you sure you have not a typo here? should be <code>application.properties</code>"},{"owner":{"account_id":14809700,"reputation":619,"user_id":10695731,"display_name":"NicO"},"score":0,"creation_date":1543241658,"post_id":53482633,"comment_id":93835637,"body_markdown":"@pleft woops, thats a typo in the question, the one i actually have in the project is correct tho.","body":"@pleft woops, thats a typo in the question, the one i actually have in the project is correct tho."},{"owner":{"account_id":14809700,"reputation":619,"user_id":10695731,"display_name":"NicO"},"score":0,"creation_date":1543241837,"post_id":53482633,"comment_id":93835744,"body_markdown":"@UroshT. ive added it","body":"@UroshT. ive added it"},{"owner":{"account_id":10235034,"reputation":10879,"user_id":7554328,"display_name":"Darren Forsythe"},"score":0,"creation_date":1543247818,"post_id":53482633,"comment_id":93839232,"body_markdown":"Check out SpringBoot&#39;s configuration proeprties to bind external properties to an Object that can be passed. Its cleaner than using @Value everwhere and should by proxy fix your issue. The controller may be being bean&#39;d before the environment has fully refreshed with the properties.","body":"Check out SpringBoot&#39;s configuration proeprties to bind external properties to an Object that can be passed. Its cleaner than using @Value everwhere and should by proxy fix your issue. The controller may be being bean&#39;d before the environment has fully refreshed with the properties."},{"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"score":0,"creation_date":1543248017,"post_id":53482633,"comment_id":93839352,"body_markdown":"1. You are definitely using  the correct @Value annotation? https://stackoverflow.com/questions/51387952/spring-boot-value-is-null","body":"1. You are definitely using  the correct @Value annotation? <a href=\"https://stackoverflow.com/questions/51387952/spring-boot-value-is-null\" title=\"spring boot value is null\">stackoverflow.com/questions/51387952/spring-boot-value-is-nu&zwnj;&#8203;ll</a>"}],"answers":[{"tags":[],"owner":{"account_id":8794729,"reputation":15297,"user_id":6572971,"display_name":"Alien"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543241562,"creation_date":1543241562,"answer_id":53482964,"question_id":53482633,"body_markdown":"I had the same issue before and @Value was not working for controller but working for component classes so i had used below solution.\r\n\r\nYou can `@Autowire Environment environment` and then `environment.getProperty(&quot;hsm.provider&quot;)`.\r\n\r\nNote: This is just a workaround solution.","title":"@Value in Springboot returns null","body":"<p>I had the same issue before and @Value was not working for controller but working for component classes so i had used below solution.</p>\n\n<p>You can <code>@Autowire Environment environment</code> and then <code>environment.getProperty(\"hsm.provider\")</code>.</p>\n\n<p>Note: This is just a workaround solution.</p>\n"},{"tags":[],"owner":{"account_id":7074458,"reputation":3504,"user_id":5415018,"display_name":"Urosh T."},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1543242021,"creation_date":1543242021,"answer_id":53483114,"question_id":53482633,"body_markdown":"Judging by your package structure, those properties should definitely be loaded. Only possible option is that you have instantiated your `Controller` class as `new Controller()` instead of letting spring injecting the class (using `@Autowired` or constructor injection).","title":"@Value in Springboot returns null","body":"<p>Judging by your package structure, those properties should definitely be loaded. Only possible option is that you have instantiated your <code>Controller</code> class as <code>new Controller()</code> instead of letting spring injecting the class (using <code>@Autowired</code> or constructor injection).</p>\n"},{"tags":[],"owner":{"account_id":2446854,"reputation":1098,"user_id":2133965,"display_name":"VietDD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543246990,"creation_date":1543243974,"answer_id":53483722,"question_id":53482633,"body_markdown":"Controller.java\r\n\r\nWith Lombok\r\n\r\n    package com.example.demo;\r\n    \r\n    import lombok.Data;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/hsm&quot;)\r\n    @Data\r\n    public class Controller {\r\n        @Value(&quot;${hsm.ip}&quot;)\r\n        private String ip;\r\n    \r\n        @Value(&quot;${hsm.port}&quot;)\r\n        private String port;\r\n    \r\n        @Value(&quot;${hsm.name}&quot;)\r\n        private String name;\r\n    \r\n        @Value(&quot;${hsm.timeout}&quot;)\r\n        private String timeout;\r\n    \r\n        @Value(&quot;${hsm.provider}&quot;)\r\n        private String provider;\r\n    }\r\n\r\nWithout Lombok ( generated by Intelliji - Refactor DeLombok )\r\n\r\n        package com.example.demo;\r\n    \r\n        import org.springframework.beans.factory.annotation.Value;\r\n        import org.springframework.web.bind.annotation.RequestMapping;\r\n        import org.springframework.web.bind.annotation.RestController;\r\n    \r\n        @RestController\r\n        @RequestMapping(&quot;/hsm&quot;)\r\n        public class Controller {\r\n            @Value(&quot;${hsm.ip}&quot;)\r\n            private String ip;\r\n    \r\n            @Value(&quot;${hsm.port}&quot;)\r\n            private String port;\r\n    \r\n            @Value(&quot;${hsm.name}&quot;)\r\n            private String name;\r\n    \r\n            @Value(&quot;${hsm.timeout}&quot;)\r\n            private String timeout;\r\n    \r\n            @Value(&quot;${hsm.provider}&quot;)\r\n            private String provider;\r\n    \r\n            public Controller() {\r\n            }\r\n    \r\n            public String getIp() {\r\n                return this.ip;\r\n            }\r\n    \r\n            public String getPort() {\r\n                return this.port;\r\n            }\r\n    \r\n            public String getName() {\r\n                return this.name;\r\n            }\r\n    \r\n            public String getTimeout() {\r\n                return this.timeout;\r\n            }\r\n    \r\n            public String getProvider() {\r\n                return this.provider;\r\n            }\r\n    \r\n            public void setIp(String ip) {\r\n                this.ip = ip;\r\n            }\r\n    \r\n            public void setPort(String port) {\r\n                this.port = port;\r\n            }\r\n    \r\n            public void setName(String name) {\r\n                this.name = name;\r\n            }\r\n    \r\n            public void setTimeout(String timeout) {\r\n                this.timeout = timeout;\r\n            }\r\n    \r\n            public void setProvider(String provider) {\r\n                this.provider = provider;\r\n            }\r\n    \r\n            public boolean equals(final Object o) {\r\n                if (o == this) return true;\r\n                if (!(o instanceof Controller)) return false;\r\n                final Controller other = (Controller) o;\r\n                if (!other.canEqual((Object) this)) return false;\r\n                final Object this$ip = this.getIp();\r\n                final Object other$ip = other.getIp();\r\n                if (this$ip == null ? other$ip != null : !this$ip.equals(other$ip)) return false;\r\n                final Object this$port = this.getPort();\r\n                final Object other$port = other.getPort();\r\n                if (this$port == null ? other$port != null : !this$port.equals(other$port)) return false;\r\n                final Object this$name = this.getName();\r\n                final Object other$name = other.getName();\r\n                if (this$name == null ? other$name != null : !this$name.equals(other$name)) return false;\r\n                final Object this$timeout = this.getTimeout();\r\n                final Object other$timeout = other.getTimeout();\r\n                if (this$timeout == null ? other$timeout != null : !this$timeout.equals(other$timeout)) return false;\r\n                final Object this$provider = this.getProvider();\r\n                final Object other$provider = other.getProvider();\r\n                if (this$provider == null ? other$provider != null : !this$provider.equals(other$provider)) return false;\r\n                return true;\r\n            }\r\n    \r\n            protected boolean canEqual(final Object other) {\r\n                return other instanceof Controller;\r\n            }\r\n    \r\n            public int hashCode() {\r\n                final int PRIME = 59;\r\n                int result = 1;\r\n                final Object $ip = this.getIp();\r\n                result = result * PRIME + ($ip == null ? 43 : $ip.hashCode());\r\n                final Object $port = this.getPort();\r\n                result = result * PRIME + ($port == null ? 43 : $port.hashCode());\r\n                final Object $name = this.getName();\r\n                result = result * PRIME + ($name == null ? 43 : $name.hashCode());\r\n                final Object $timeout = this.getTimeout();\r\n                result = result * PRIME + ($timeout == null ? 43 : $timeout.hashCode());\r\n                final Object $provider = this.getProvider();\r\n                result = result * PRIME + ($provider == null ? 43 : $provider.hashCode());\r\n                return result;\r\n            }\r\n    \r\n            public String toString() {\r\n                return &quot;Controller(ip=&quot; + this.getIp() + &quot;, port=&quot; + this.getPort() + &quot;, name=&quot; + this.getName() + &quot;, timeout=&quot; + this.getTimeout() + &quot;, provider=&quot; + this.getProvider() + &quot;)&quot;;\r\n            }\r\n        }\r\n\r\n\r\nDemoApplication.java\r\n\r\n    package com.example.demo;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.context.ConfigurableApplicationContext;\r\n    \r\n    @SpringBootApplication\r\n    public class DemoApplication {\r\n        @Autowired\r\n        Controller controller;\r\n    \r\n        public static void main(String[] args) {\r\n            try (ConfigurableApplicationContext ctx = SpringApplication.run(DemoApplication.class, args)) {\r\n                DemoApplication app = ctx.getBean(DemoApplication.class);\r\n                app.run(args);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        public void run(String... args) throws Exception {\r\n            System.out.println(controller);\r\n        }\r\n    }\r\n\r\nOutput:\r\n`Controller(ip=127.0.0.1, port=3001, name=TestHsm, timeout=1000, provider=software)`","title":"@Value in Springboot returns null","body":"<p>Controller.java</p>\n\n<p>With Lombok</p>\n\n<pre><code>package com.example.demo;\n\nimport lombok.Data;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"/hsm\")\n@Data\npublic class Controller {\n    @Value(\"${hsm.ip}\")\n    private String ip;\n\n    @Value(\"${hsm.port}\")\n    private String port;\n\n    @Value(\"${hsm.name}\")\n    private String name;\n\n    @Value(\"${hsm.timeout}\")\n    private String timeout;\n\n    @Value(\"${hsm.provider}\")\n    private String provider;\n}\n</code></pre>\n\n<p>Without Lombok ( generated by Intelliji - Refactor DeLombok )</p>\n\n<pre><code>    package com.example.demo;\n\n    import org.springframework.beans.factory.annotation.Value;\n    import org.springframework.web.bind.annotation.RequestMapping;\n    import org.springframework.web.bind.annotation.RestController;\n\n    @RestController\n    @RequestMapping(\"/hsm\")\n    public class Controller {\n        @Value(\"${hsm.ip}\")\n        private String ip;\n\n        @Value(\"${hsm.port}\")\n        private String port;\n\n        @Value(\"${hsm.name}\")\n        private String name;\n\n        @Value(\"${hsm.timeout}\")\n        private String timeout;\n\n        @Value(\"${hsm.provider}\")\n        private String provider;\n\n        public Controller() {\n        }\n\n        public String getIp() {\n            return this.ip;\n        }\n\n        public String getPort() {\n            return this.port;\n        }\n\n        public String getName() {\n            return this.name;\n        }\n\n        public String getTimeout() {\n            return this.timeout;\n        }\n\n        public String getProvider() {\n            return this.provider;\n        }\n\n        public void setIp(String ip) {\n            this.ip = ip;\n        }\n\n        public void setPort(String port) {\n            this.port = port;\n        }\n\n        public void setName(String name) {\n            this.name = name;\n        }\n\n        public void setTimeout(String timeout) {\n            this.timeout = timeout;\n        }\n\n        public void setProvider(String provider) {\n            this.provider = provider;\n        }\n\n        public boolean equals(final Object o) {\n            if (o == this) return true;\n            if (!(o instanceof Controller)) return false;\n            final Controller other = (Controller) o;\n            if (!other.canEqual((Object) this)) return false;\n            final Object this$ip = this.getIp();\n            final Object other$ip = other.getIp();\n            if (this$ip == null ? other$ip != null : !this$ip.equals(other$ip)) return false;\n            final Object this$port = this.getPort();\n            final Object other$port = other.getPort();\n            if (this$port == null ? other$port != null : !this$port.equals(other$port)) return false;\n            final Object this$name = this.getName();\n            final Object other$name = other.getName();\n            if (this$name == null ? other$name != null : !this$name.equals(other$name)) return false;\n            final Object this$timeout = this.getTimeout();\n            final Object other$timeout = other.getTimeout();\n            if (this$timeout == null ? other$timeout != null : !this$timeout.equals(other$timeout)) return false;\n            final Object this$provider = this.getProvider();\n            final Object other$provider = other.getProvider();\n            if (this$provider == null ? other$provider != null : !this$provider.equals(other$provider)) return false;\n            return true;\n        }\n\n        protected boolean canEqual(final Object other) {\n            return other instanceof Controller;\n        }\n\n        public int hashCode() {\n            final int PRIME = 59;\n            int result = 1;\n            final Object $ip = this.getIp();\n            result = result * PRIME + ($ip == null ? 43 : $ip.hashCode());\n            final Object $port = this.getPort();\n            result = result * PRIME + ($port == null ? 43 : $port.hashCode());\n            final Object $name = this.getName();\n            result = result * PRIME + ($name == null ? 43 : $name.hashCode());\n            final Object $timeout = this.getTimeout();\n            result = result * PRIME + ($timeout == null ? 43 : $timeout.hashCode());\n            final Object $provider = this.getProvider();\n            result = result * PRIME + ($provider == null ? 43 : $provider.hashCode());\n            return result;\n        }\n\n        public String toString() {\n            return \"Controller(ip=\" + this.getIp() + \", port=\" + this.getPort() + \", name=\" + this.getName() + \", timeout=\" + this.getTimeout() + \", provider=\" + this.getProvider() + \")\";\n        }\n    }\n</code></pre>\n\n<p>DemoApplication.java</p>\n\n<pre><code>package com.example.demo;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\n\n@SpringBootApplication\npublic class DemoApplication {\n    @Autowired\n    Controller controller;\n\n    public static void main(String[] args) {\n        try (ConfigurableApplicationContext ctx = SpringApplication.run(DemoApplication.class, args)) {\n            DemoApplication app = ctx.getBean(DemoApplication.class);\n            app.run(args);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public void run(String... args) throws Exception {\n        System.out.println(controller);\n    }\n}\n</code></pre>\n\n<p>Output:\n<code>Controller(ip=127.0.0.1, port=3001, name=TestHsm, timeout=1000, provider=software)</code></p>\n"},{"tags":[],"owner":{"account_id":14540892,"reputation":1111,"user_id":10502646,"display_name":"snmaddula"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1543250954,"creation_date":1543250954,"answer_id":53485626,"question_id":53482633,"body_markdown":"I&#39;ve added your code into a Spring boot project and it is in a working condition. \r\n\r\nCheckout this [53482633](https://github.com/snmaddula-stackoverflow/53482633) repository and follow the instructions to get it up and running.\r\n\r\nAlso compare your code against this application to figure out what was going wrong at your end.\r\n\r\nIn case if you still face any issues, please post it here.","title":"@Value in Springboot returns null","body":"<p>I've added your code into a Spring boot project and it is in a working condition. </p>\n\n<p>Checkout this <a href=\"https://github.com/snmaddula-stackoverflow/53482633\" rel=\"nofollow noreferrer\">53482633</a> repository and follow the instructions to get it up and running.</p>\n\n<p>Also compare your code against this application to figure out what was going wrong at your end.</p>\n\n<p>In case if you still face any issues, please post it here.</p>\n"},{"tags":[],"owner":{"account_id":14809700,"reputation":619,"user_id":10695731,"display_name":"NicO"},"down_vote_count":2,"up_vote_count":13,"is_accepted":true,"score":11,"last_activity_date":1551276235,"creation_date":1551276235,"answer_id":54907245,"question_id":53482633,"body_markdown":"Okay, i solved it with the top answer of [this][1] Question. I put the variables and @Values in the signature of the constructor and not as class variables.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/43844551/how-to-get-the-content-of-file-properties-in-spring-boot","title":"@Value in Springboot returns null","body":"<p>Okay, i solved it with the top answer of <a href=\"https://stackoverflow.com/questions/43844551/how-to-get-the-content-of-file-properties-in-spring-boot\">this</a> Question. I put the variables and @Values in the signature of the constructor and not as class variables.</p>\n"},{"tags":[],"owner":{"account_id":17187658,"reputation":49,"user_id":12441982,"display_name":"turniprincess"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625244692,"creation_date":1625243768,"answer_id":68228681,"question_id":53482633,"body_markdown":"I had the same issue with doing the @Value in my service file.\r\nI was making a new service in my controller file\r\n\r\nNOT WORKING:\r\n\r\nUserController.java\r\n\r\n    UserService userService = new UserService();\r\n    String user = userService.getUser(); // NULL!!\r\n\r\nUserService.java\r\n\r\n    public class UserService {\r\n    \r\n    \t@Value(&quot;${hello.world}&quot;)\r\n    \tString hello;\r\n    \r\n    \tpublic String GetUser() {\r\n    \t\treturn hello;\t// NULL!!\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nand that was overriding my injection in my UserService file.\r\n\r\n\r\nSo instead, I did the @Value injection in my Controller file, and passed that variable along into my service constructor.\r\n\r\nWORKING:\r\n\r\nUserController.java\r\n\r\n    @Value(&quot;${hello.world}&quot;)\r\n    String hello;\r\n    \r\n    UserService userService = new UserService(hello);\r\n\r\nUserService.java\r\n\r\n    public class UserService {\r\n    \r\n    \tprivate String hello;\r\n    \r\n    \t// constructor\r\n    \tpublic UserService(@Value(&quot;${hello.world}&quot;) String hello) {\r\n    \tthis.hello = hello;\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"@Value in Springboot returns null","body":"<p>I had the same issue with doing the @Value in my service file.\nI was making a new service in my controller file</p>\n<p>NOT WORKING:</p>\n<p>UserController.java</p>\n<pre><code>UserService userService = new UserService();\nString user = userService.getUser(); // NULL!!\n</code></pre>\n<p>UserService.java</p>\n<pre><code>public class UserService {\n\n    @Value(&quot;${hello.world}&quot;)\n    String hello;\n\n    public String GetUser() {\n        return hello;   // NULL!!\n    }\n\n}\n</code></pre>\n<p>and that was overriding my injection in my UserService file.</p>\n<p>So instead, I did the @Value injection in my Controller file, and passed that variable along into my service constructor.</p>\n<p>WORKING:</p>\n<p>UserController.java</p>\n<pre><code>@Value(&quot;${hello.world}&quot;)\nString hello;\n\nUserService userService = new UserService(hello);\n</code></pre>\n<p>UserService.java</p>\n<pre><code>public class UserService {\n\n    private String hello;\n\n    // constructor\n    public UserService(@Value(&quot;${hello.world}&quot;) String hello) {\n    this.hello = hello;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23419713,"reputation":91,"user_id":17480104,"display_name":"Omkar Pisal"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1637682710,"creation_date":1637682710,"answer_id":70083880,"question_id":53482633,"body_markdown":"The reason why @Value returns null sometimes is because when you try to use &#39;application.properties&#39; contents for static variables which is not allowed in spring. Follow this: [https://mkyong.com/spring/spring-inject-a-value-into-static-variables/][1] \r\nand it should work fine.\r\n\r\n\r\n  [1]: https://mkyong.com/spring/spring-inject-a-value-into-static-variables/","title":"@Value in Springboot returns null","body":"<p>The reason why @Value returns null sometimes is because when you try to use 'application.properties' contents for static variables which is not allowed in spring. Follow this: <a href=\"https://mkyong.com/spring/spring-inject-a-value-into-static-variables/\" rel=\"noreferrer\">https://mkyong.com/spring/spring-inject-a-value-into-static-variables/</a>\nand it should work fine.</p>\n"},{"tags":[],"owner":{"account_id":14016270,"reputation":707,"user_id":10123715,"display_name":"Enock Lubowa"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640601384,"creation_date":1640601384,"answer_id":70494380,"question_id":53482633,"body_markdown":"You can use a separate class that autowires the values from properties file.\r\nCreate a class like this:\r\n```\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class Properties {\r\n\r\n    public static String hsmProvider;\r\n\r\n    @Autowired\r\n    public Properties(@Value(&quot;${hsm.provider}&quot;) String hsmProvider){\r\n        Properties.hsmProvider = hsmProvider;\r\n    }\r\n\r\n}\r\n```\r\n\r\nYou can use the property anywhere as `Properties.hsmProvider`\r\n","title":"@Value in Springboot returns null","body":"<p>You can use a separate class that autowires the values from properties file.\nCreate a class like this:</p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class Properties {\n\n    public static String hsmProvider;\n\n    @Autowired\n    public Properties(@Value(&quot;${hsm.provider}&quot;) String hsmProvider){\n        Properties.hsmProvider = hsmProvider;\n    }\n\n}\n</code></pre>\n<p>You can use the property anywhere as <code>Properties.hsmProvider</code></p>\n"},{"tags":[],"owner":{"account_id":17817896,"reputation":1,"user_id":12940999,"display_name":"hanisntsolo"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1669318315,"creation_date":1669318315,"answer_id":74565512,"question_id":53482633,"body_markdown":"See the answer is very simple I have been through the same problem So I am writing this here so that nobody faces it again.\r\n\r\nIn order to use the values injected in the bean of a class.\r\n\r\n***You need to autowire that class in which the injection has been done to another class where you want the values to be used.***\r\n\r\nAnd the injected vales will never be null.\r\n\r\nSince once spring has started with autowiring the beans would always be fetched with non null values.","title":"@Value in Springboot returns null","body":"<p>See the answer is very simple I have been through the same problem So I am writing this here so that nobody faces it again.</p>\n<p>In order to use the values injected in the bean of a class.</p>\n<p><em><strong>You need to autowire that class in which the injection has been done to another class where you want the values to be used.</strong></em></p>\n<p>And the injected vales will never be null.</p>\n<p>Since once spring has started with autowiring the beans would always be fetched with non null values.</p>\n"},{"tags":[],"owner":{"account_id":21910001,"reputation":247,"user_id":16194563,"display_name":"Ramya Musunuru"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676373679,"creation_date":1670936435,"answer_id":74785282,"question_id":53482633,"body_markdown":"@Value returns null because of the following reasons, so make sure\r\n\r\n1.The class in which you use **@Value** is not declared as any of the spring initialized class for ex: **component,service,repository**. So make the class as **spring-managed class**\r\n\r\n   \r\n\r\n    @Component\r\n    class ClassA {\r\n        @Value(&quot;${property.value}&quot;)\r\n        private String valueString;\r\n    }\r\nOR\r\n\r\n    @Service\r\n    class ClassA {\r\n            @Value(&quot;${property.value}&quot;)\r\n            private String valueString;\r\n    }\r\n\r\nOR\r\n\r\n    @Repository\r\n        class ClassA {\r\n            @Value(&quot;${property.value}&quot;)\r\n            private String valueString;\r\n        }\r\n\r\n2.You must be passing this class as a newly initialised object, from the place where you are calling the method in this class.  You should **@Autowire** the class in the calling class and then use the method.\r\n\r\n    @Component\r\n    public class ClassA {\r\n    \r\n        private final String propertyValue;\r\n    \r\n        @Autowired\r\n        public ClassA(@Value(&quot;${propery.value}&quot;) String propertyValue) {\r\n            this.propertyValue = propertyValue;\r\n        }\r\n    \r\n    }\r\n\r\n","title":"@Value in Springboot returns null","body":"<p>@Value returns null because of the following reasons, so make sure</p>\n<p>1.The class in which you use <strong>@Value</strong> is not declared as any of the spring initialized class for ex: <strong>component,service,repository</strong>. So make the class as <strong>spring-managed class</strong></p>\n<pre><code>@Component\nclass ClassA {\n    @Value(&quot;${property.value}&quot;)\n    private String valueString;\n}\n</code></pre>\n<p>OR</p>\n<pre><code>@Service\nclass ClassA {\n        @Value(&quot;${property.value}&quot;)\n        private String valueString;\n}\n</code></pre>\n<p>OR</p>\n<pre><code>@Repository\n    class ClassA {\n        @Value(&quot;${property.value}&quot;)\n        private String valueString;\n    }\n</code></pre>\n<p>2.You must be passing this class as a newly initialised object, from the place where you are calling the method in this class.  You should <strong>@Autowire</strong> the class in the calling class and then use the method.</p>\n<pre><code>@Component\npublic class ClassA {\n\n    private final String propertyValue;\n\n    @Autowired\n    public ClassA(@Value(&quot;${propery.value}&quot;) String propertyValue) {\n        this.propertyValue = propertyValue;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":14809700,"reputation":619,"user_id":10695731,"display_name":"NicO"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71493,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":54907245,"answer_count":10,"score":22,"last_activity_date":1676373679,"creation_date":1543240441,"question_id":53482633,"body_markdown":"I have the application.properties, which is located in the resources\r\n\r\n**apllication.properties**\r\n \r\n\r\n    hsm.provider=software\r\n    hsm.name=TestHsm\r\n    hsm.port=3001\r\n    hsm.ip=127.0.0.1\r\n    hsm.timeout=10000\r\n\r\nand the **Controller**\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/hsm&quot;)\r\n    public class Controller {\r\n\t\r\n\t  @Value(&quot;${hsm.ip}&quot;)\r\n\t  private String ip;\r\n\t\r\n\t  @Value(&quot;${hsm.port}&quot;)\r\n\t  private String port;\r\n\t\r\n\t  @Value(&quot;${hsm.name}&quot;)\r\n\t  private String name;\r\n\t\r\n\t  @Value(&quot;${hsm.timeout}&quot;)\r\n\t  private String timeout;\r\n\t\r\n\t  @Value(&quot;${hsm.provider}&quot;)\r\n\t  private String provider;}\r\n    }\r\nhowever when i run application, all variables remain NULL.\r\nWhat am i missing?\r\n\r\n  **EDIT**\r\nThis is the projectstructure as of the src folder\r\n\r\n    src\r\n    ├───main\r\n    │   ├───java\r\n    │   │   └───com\r\n    │   │       └───xyz\r\n    │   │           └───hsmservice\r\n    │   │               └───hsm\r\n    │   │                   └───api\r\n    │   │                           Application.java\r\n    │   │                           Controller.java\r\n    │   │                           HSM.java\r\n    │   │\r\n    │   └───resources\r\n    │       │   application.properties\r\n    │       │\r\n    │       └───META-INF\r\n    │               plugin.xml\r\n    │\r\n    └───test\r\n    \t├───java\r\n    \t│       LibraryTest.java\r\n    \t│\r\n    \t└───resources\r\n\r\n**EDIT 2**\r\nHere is the application class\r\n\r\n  \r\n  \r\n\r\n    @SpringBootApplication\r\n    public class Application {\t\r\n\t    public static void main(String[] args) {\r\n\t\t   SpringApplication.run(Application.class, args);\r\n\t    }\r\n    }","title":"@Value in Springboot returns null","body":"<p>I have the application.properties, which is located in the resources</p>\n\n<p><strong>apllication.properties</strong></p>\n\n<pre><code>hsm.provider=software\nhsm.name=TestHsm\nhsm.port=3001\nhsm.ip=127.0.0.1\nhsm.timeout=10000\n</code></pre>\n\n<p>and the <strong>Controller</strong></p>\n\n<pre><code>@RestController\n@RequestMapping(\"/hsm\")\npublic class Controller {\n\n  @Value(\"${hsm.ip}\")\n  private String ip;\n\n  @Value(\"${hsm.port}\")\n  private String port;\n\n  @Value(\"${hsm.name}\")\n  private String name;\n\n  @Value(\"${hsm.timeout}\")\n  private String timeout;\n\n  @Value(\"${hsm.provider}\")\n  private String provider;}\n}\n</code></pre>\n\n<p>however when i run application, all variables remain NULL.\nWhat am i missing?</p>\n\n<p><strong>EDIT</strong>\nThis is the projectstructure as of the src folder</p>\n\n<pre><code>src\n├───main\n│   ├───java\n│   │   └───com\n│   │       └───xyz\n│   │           └───hsmservice\n│   │               └───hsm\n│   │                   └───api\n│   │                           Application.java\n│   │                           Controller.java\n│   │                           HSM.java\n│   │\n│   └───resources\n│       │   application.properties\n│       │\n│       └───META-INF\n│               plugin.xml\n│\n└───test\n    ├───java\n    │       LibraryTest.java\n    │\n    └───resources\n</code></pre>\n\n<p><strong>EDIT 2</strong>\nHere is the application class</p>\n\n<pre><code>@SpringBootApplication\npublic class Application {  \n    public static void main(String[] args) {\n       SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676373354,"creation_date":1676373354,"answer_id":75447028,"question_id":75446307,"body_markdown":"About `Mono.zip()` : \r\n\r\n&gt; An error or empty completion of any source will cause other sources to\r\n&gt; be cancelled and the resulting Mono to immediately error or complete,\r\n&gt; respectively.\r\n\r\nAlso, reactor does not allow **null** values, so you should do some workaround in your case. In some simple cases it is easy to define some default value in case of error (for example, empty String), but for custom types it would be weird to create an empty object.\r\n\r\nAs an alternative for such cases I would suggest to use `Optional`.\r\nThis solution adds some boilerplate code, though.\r\n\r\nFirst service:\r\n\r\n&lt;!-- language: java --&gt;\r\n    class FirstService {\r\n       Mono&lt;Optional&lt;FirstResponse&gt;&gt; get(){ \r\n          return webclient.get(...)\r\n            .bodyToMono(FirstResponse.class)\r\n            .map(Optional::of)\r\n            .onErrorReturn(Optional.empty());\r\n       }\r\n    }\r\n\r\nSecond service:\r\n\r\n&lt;!-- language: java --&gt;\r\n    class SecondService {\r\n       Mono&lt;Optional&lt;SecondResponse&gt;&gt; get(){ \r\n          return webclient.get(...)\r\n            .bodyToMono(SecondResponse.class)\r\n            .map(Optional::of)\r\n            .onErrorReturn(Optional.empty());\r\n       }\r\n    }\r\n\r\nAnd &quot;combiner&quot; :\r\n\r\n&lt;!-- language: java --&gt;\r\n    @GetMapping(...)\r\n    Mono&lt;CombinedResponse&gt; getCombined() {\r\n        Mono.zip(firstService.get(), secondService.get())\r\n                .map(tuple -&gt; {\r\n                    // check optionals here from tuple.getT1() and tuple.getT2()\r\n                    // and do whatever you want \r\n                })\r\n                ...\r\n    }\r\n\r\n\r\n","title":"Webflux combine results of two downstream calls (and ignore failures)","body":"<p>About <code>Mono.zip()</code> :</p>\n<blockquote>\n<p>An error or empty completion of any source will cause other sources to\nbe cancelled and the resulting Mono to immediately error or complete,\nrespectively.</p>\n</blockquote>\n<p>Also, reactor does not allow <strong>null</strong> values, so you should do some workaround in your case. In some simple cases it is easy to define some default value in case of error (for example, empty String), but for custom types it would be weird to create an empty object.</p>\n<p>As an alternative for such cases I would suggest to use <code>Optional</code>.\nThis solution adds some boilerplate code, though.</p>\n<p>First service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class FirstService {\n   Mono&lt;Optional&lt;FirstResponse&gt;&gt; get(){ \n      return webclient.get(...)\n        .bodyToMono(FirstResponse.class)\n        .map(Optional::of)\n        .onErrorReturn(Optional.empty());\n   }\n}\n</code></pre>\n<p>Second service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class SecondService {\n   Mono&lt;Optional&lt;SecondResponse&gt;&gt; get(){ \n      return webclient.get(...)\n        .bodyToMono(SecondResponse.class)\n        .map(Optional::of)\n        .onErrorReturn(Optional.empty());\n   }\n}\n</code></pre>\n<p>And &quot;combiner&quot; :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(...)\nMono&lt;CombinedResponse&gt; getCombined() {\n    Mono.zip(firstService.get(), secondService.get())\n            .map(tuple -&gt; {\n                // check optionals here from tuple.getT1() and tuple.getT2()\n                // and do whatever you want \n            })\n            ...\n}\n</code></pre>\n"}],"owner":{"account_id":92363,"reputation":1385,"user_id":253167,"accept_rate":79,"display_name":"woezelmann"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":371,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1676373669,"creation_date":1676369442,"question_id":75446307,"body_markdown":"I know that my question has been asked already multiple times, but I feel like there is still no satisfying answer to it. \r\n\r\nBasically I have two downstream services which I want to call (in parallel) and then I want to combine the results and return it (as Json). Both calls can fail but both results are not mandatory, so also an empty combined response is possible:\r\n\r\n```\r\nclass FirstResponse {...}\r\n```\r\n\r\n```\r\nclass SecondResponse {...}\r\n```\r\n\r\n```\r\nclass CombinedResponse {\r\n   private FirstResponse first;\r\n   private SecondResponse second;\r\n}\r\n```\r\n\r\n```\r\nclass FirstService {\r\n   Mono&lt;FirstResponse&gt; get(){ \r\n      return webclient.get(...)\r\n        .bodyToMono(FirstResponse.class)\r\n        .onErrorResume(throwable -&gt; Mono.empty);\r\n   }\r\n}\r\n```\r\n\r\n```\r\nclass SecondService {\r\n   Mono&lt;SecondResponse&gt; get(){ \r\n      return webclient.get(...)\r\n        .bodyToMono(SecondResponse.class)\r\n        .onErrorResume(throwable -&gt; Mono.empty);\r\n   }\r\n}\r\n```\r\n\r\n```\r\n@RestController(...)\r\nclass CombinationController {\r\n   @GetMapping(...)\r\n   Mono&lt;CombinedResponse&gt; getCombined() {\r\n      Mono.zip(firstService.get(), secondService.get(), (first, second) -&gt; {\r\n          return new CombinedResponse(first, second);\r\n      })\r\n   }\r\n}\r\n```\r\n\r\nNow in case the calls to firstService fails, also the response from secondService gets ignored. But what I actually would like to have, is that `CombinedResponse` still gets (partially populated).\r\n\r\nAs a disclaimer I have to say, that I am currently migrating my code from rxjava1 and there in case of downstream errors I just return `Single.just(null)`. This allows me to zip both results and just sets the values to `null`.","title":"Webflux combine results of two downstream calls (and ignore failures)","body":"<p>I know that my question has been asked already multiple times, but I feel like there is still no satisfying answer to it.</p>\n<p>Basically I have two downstream services which I want to call (in parallel) and then I want to combine the results and return it (as Json). Both calls can fail but both results are not mandatory, so also an empty combined response is possible:</p>\n<pre><code>class FirstResponse {...}\n</code></pre>\n<pre><code>class SecondResponse {...}\n</code></pre>\n<pre><code>class CombinedResponse {\n   private FirstResponse first;\n   private SecondResponse second;\n}\n</code></pre>\n<pre><code>class FirstService {\n   Mono&lt;FirstResponse&gt; get(){ \n      return webclient.get(...)\n        .bodyToMono(FirstResponse.class)\n        .onErrorResume(throwable -&gt; Mono.empty);\n   }\n}\n</code></pre>\n<pre><code>class SecondService {\n   Mono&lt;SecondResponse&gt; get(){ \n      return webclient.get(...)\n        .bodyToMono(SecondResponse.class)\n        .onErrorResume(throwable -&gt; Mono.empty);\n   }\n}\n</code></pre>\n<pre><code>@RestController(...)\nclass CombinationController {\n   @GetMapping(...)\n   Mono&lt;CombinedResponse&gt; getCombined() {\n      Mono.zip(firstService.get(), secondService.get(), (first, second) -&gt; {\n          return new CombinedResponse(first, second);\n      })\n   }\n}\n</code></pre>\n<p>Now in case the calls to firstService fails, also the response from secondService gets ignored. But what I actually would like to have, is that <code>CombinedResponse</code> still gets (partially populated).</p>\n<p>As a disclaimer I have to say, that I am currently migrating my code from rxjava1 and there in case of downstream errors I just return <code>Single.just(null)</code>. This allows me to zip both results and just sets the values to <code>null</code>.</p>\n"},{"tags":["java","android","android-layout"],"answers":[{"tags":[],"owner":{"account_id":5884902,"reputation":43,"user_id":4633222,"display_name":"Browni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676322572,"creation_date":1676322572,"answer_id":75441211,"question_id":75437444,"body_markdown":"You can try this:\r\n\r\n    &lt;RelativeLayout\r\n      &lt;ConstraintLayout \r\n          &lt;Button\r\n          &lt;ImageView\r\n          &lt;TextView\r\n          &lt;TextView\r\n      &lt;/ConstraintLayout\r\n     &lt;/RelativeLayout\r\n          ","title":"Sophisticated button layout","body":"<p>You can try this:</p>\n<pre><code>&lt;RelativeLayout\n  &lt;ConstraintLayout \n      &lt;Button\n      &lt;ImageView\n      &lt;TextView\n      &lt;TextView\n  &lt;/ConstraintLayout\n &lt;/RelativeLayout\n      \n</code></pre>\n"},{"tags":[],"owner":{"account_id":27046178,"reputation":17,"user_id":20600345,"display_name":"Dazai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676373204,"creation_date":1676373204,"answer_id":75447005,"question_id":75437444,"body_markdown":"    &lt;RelativeLayout\r\n            android:id=&quot;@+id/requestButton&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;88dp&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:layout_marginTop=&quot;20dp&quot;\r\n            android:layout_marginBottom=&quot;20dp&quot;\r\n            android:background=&quot;@drawable/button_background&quot;\r\n            android:padding=&quot;15dp&quot;&gt;\r\n\r\n            &lt;ImageView\r\n                android:id=&quot;@+id/iconImageView&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_centerVertical=&quot;true&quot;\r\n                android:layout_marginEnd=&quot;15dp&quot;\r\n                android:elevation=&quot;10dp&quot;\r\n                android:src=&quot;@drawable/cr_icon&quot; /&gt;\r\n\r\n            &lt;RelativeLayout\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_centerVertical=&quot;true&quot;\r\n                android:layout_toEndOf=&quot;@id/iconImageView&quot;&gt;\r\n\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/requestTextView&quot;\r\n                    style=&quot;@style/request_title_text_view&quot;\r\n                    android:text=&quot;@string/cr_request&quot; /&gt;\r\n\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/bodyTextView&quot;\r\n                    style=&quot;@style/request_body_text_view&quot;\r\n                    android:layout_below=&quot;@+id/requestTextView&quot;\r\n                    android:text=&quot;@string/cr_request_body&quot; /&gt;\r\n\r\n            &lt;/RelativeLayout&gt;\r\n\r\n        &lt;/RelativeLayout&gt;","title":"Sophisticated button layout","body":"<pre><code>&lt;RelativeLayout\n        android:id=&quot;@+id/requestButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;88dp&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:layout_marginTop=&quot;20dp&quot;\n        android:layout_marginBottom=&quot;20dp&quot;\n        android:background=&quot;@drawable/button_background&quot;\n        android:padding=&quot;15dp&quot;&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/iconImageView&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_centerVertical=&quot;true&quot;\n            android:layout_marginEnd=&quot;15dp&quot;\n            android:elevation=&quot;10dp&quot;\n            android:src=&quot;@drawable/cr_icon&quot; /&gt;\n\n        &lt;RelativeLayout\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_centerVertical=&quot;true&quot;\n            android:layout_toEndOf=&quot;@id/iconImageView&quot;&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/requestTextView&quot;\n                style=&quot;@style/request_title_text_view&quot;\n                android:text=&quot;@string/cr_request&quot; /&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/bodyTextView&quot;\n                style=&quot;@style/request_body_text_view&quot;\n                android:layout_below=&quot;@+id/requestTextView&quot;\n                android:text=&quot;@string/cr_request_body&quot; /&gt;\n\n        &lt;/RelativeLayout&gt;\n\n    &lt;/RelativeLayout&gt;\n</code></pre>\n"}],"owner":{"account_id":27046178,"reputation":17,"user_id":20600345,"display_name":"Dazai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1676373204,"creation_date":1676299688,"question_id":75437444,"body_markdown":"Im trying to create a large button in the center of the layout, with an image on the left,\r\nwith padding on all sides, followed by another two different textviews centered vertically\r\n\r\nThis is what im trying to achieve:\r\n[![This is my whole button][1]][1]\r\n\r\nIm kind of new and any help would be greatly appreciated :)\r\n\r\nThis is how I do it currently:\r\n\r\n    &lt;FrameLayout\r\n            android:id=&quot;@+id/buttonLayout&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:layout_marginTop=&quot;20dp&quot;\r\n            android:layout_marginBottom=&quot;20dp&quot;\r\n            android:background=&quot;@color/white&quot;&gt;\r\n\r\n            &lt;Button\r\n                android:id=&quot;@+id/requestButton&quot;\r\n                style=&quot;@style/request_button&quot;\r\n                android:drawableStart=&quot;@drawable/card_icon&quot; /&gt;\r\n\r\n            &lt;Button\r\n                android:id=&quot;@+id/requestTextView&quot;\r\n                style=&quot;@style/request_title_text_view&quot;\r\n                android:text=&quot;@string/cards_request&quot;/&gt;\r\n\r\n            &lt;Button\r\n                android:id=&quot;@+id/bodyTextView&quot;\r\n                style=&quot;@style/request_body_text_view&quot;\r\n                android:text=&quot;@string/cards_request_card&quot; /&gt;\r\n\r\n        &lt;/FrameLayout&gt;\r\n\r\nAnd styles:\r\n\r\n    &lt;style name=&quot;request_title_text_view&quot; parent=&quot;request_body_text_view&quot;&gt;\r\n        &lt;item name=&quot;android:textSize&quot;&gt;26sp&lt;/item&gt;\r\n        &lt;item name=&quot;android:textStyle&quot;&gt;bold&lt;/item&gt;\r\n        &lt;item name=&quot;android:layout_marginTop&quot;&gt;10dp&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n    &lt;style name=&quot;request_body_text_view&quot; parent=&quot;android:Widget.TextView&quot;&gt;\r\n        &lt;item name=&quot;android:layout_width&quot;&gt;wrap_content&lt;/item&gt;\r\n        &lt;item name=&quot;android:layout_height&quot;&gt;wrap_content&lt;/item&gt;\r\n        &lt;item name=&quot;android:textColor&quot;&gt;@color/white&lt;/item&gt;\r\n        &lt;item name=&quot;android:textSize&quot;&gt;18sp&lt;/item&gt;\r\n        &lt;item name=&quot;android:textAllCaps&quot;&gt;true&lt;/item&gt;\r\n        &lt;item name=&quot;android:paddingRight&quot;&gt;20dp&lt;/item&gt;\r\n        &lt;item name=&quot;android:paddingLeft&quot;&gt;16dp&lt;/item&gt;\r\n        &lt;item name=&quot;android:layout_marginTop&quot;&gt;45dp&lt;/item&gt;\r\n        &lt;item name=&quot;android:layout_marginLeft&quot;&gt;80dp&lt;/item&gt;\r\n        &lt;item name=&quot;android:elevation&quot;&gt;10dp&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\nIts just a bad practice to put those margins there hard-coded and was wondering if there is another better way?\r\n\r\n  [1]: https://i.stack.imgur.com/gnfT2.png","title":"Sophisticated button layout","body":"<p>Im trying to create a large button in the center of the layout, with an image on the left,\nwith padding on all sides, followed by another two different textviews centered vertically</p>\n<p>This is what im trying to achieve:\n<a href=\"https://i.stack.imgur.com/gnfT2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gnfT2.png\" alt=\"This is my whole button\" /></a></p>\n<p>Im kind of new and any help would be greatly appreciated :)</p>\n<p>This is how I do it currently:</p>\n<pre><code>&lt;FrameLayout\n        android:id=&quot;@+id/buttonLayout&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:layout_marginTop=&quot;20dp&quot;\n        android:layout_marginBottom=&quot;20dp&quot;\n        android:background=&quot;@color/white&quot;&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/requestButton&quot;\n            style=&quot;@style/request_button&quot;\n            android:drawableStart=&quot;@drawable/card_icon&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/requestTextView&quot;\n            style=&quot;@style/request_title_text_view&quot;\n            android:text=&quot;@string/cards_request&quot;/&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/bodyTextView&quot;\n            style=&quot;@style/request_body_text_view&quot;\n            android:text=&quot;@string/cards_request_card&quot; /&gt;\n\n    &lt;/FrameLayout&gt;\n</code></pre>\n<p>And styles:</p>\n<pre><code>&lt;style name=&quot;request_title_text_view&quot; parent=&quot;request_body_text_view&quot;&gt;\n    &lt;item name=&quot;android:textSize&quot;&gt;26sp&lt;/item&gt;\n    &lt;item name=&quot;android:textStyle&quot;&gt;bold&lt;/item&gt;\n    &lt;item name=&quot;android:layout_marginTop&quot;&gt;10dp&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=&quot;request_body_text_view&quot; parent=&quot;android:Widget.TextView&quot;&gt;\n    &lt;item name=&quot;android:layout_width&quot;&gt;wrap_content&lt;/item&gt;\n    &lt;item name=&quot;android:layout_height&quot;&gt;wrap_content&lt;/item&gt;\n    &lt;item name=&quot;android:textColor&quot;&gt;@color/white&lt;/item&gt;\n    &lt;item name=&quot;android:textSize&quot;&gt;18sp&lt;/item&gt;\n    &lt;item name=&quot;android:textAllCaps&quot;&gt;true&lt;/item&gt;\n    &lt;item name=&quot;android:paddingRight&quot;&gt;20dp&lt;/item&gt;\n    &lt;item name=&quot;android:paddingLeft&quot;&gt;16dp&lt;/item&gt;\n    &lt;item name=&quot;android:layout_marginTop&quot;&gt;45dp&lt;/item&gt;\n    &lt;item name=&quot;android:layout_marginLeft&quot;&gt;80dp&lt;/item&gt;\n    &lt;item name=&quot;android:elevation&quot;&gt;10dp&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n<p>Its just a bad practice to put those margins there hard-coded and was wondering if there is another better way?</p>\n"},{"tags":["java","android","gesture","accessibilityservice"],"owner":{"account_id":7371369,"reputation":97,"user_id":5611428,"display_name":"Jos B"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676372851,"creation_date":1676369241,"question_id":75446252,"body_markdown":"I want to use an AccessibilityService to remove automatically all shortcuts on the home screen by holding them and draging them up to the remove area.\r\n\r\nFor now I can remove one shortcut, but I fail to find a way to chain this drag and drop process multiple time.\r\n\r\n    @Override\r\n    public void onAccessibilityEvent(AccessibilityEvent event) {\r\n            Handler handler = new Handler();\r\n            handler.postDelayed(new Runnable() {\r\n               public void run() {\r\n                sendToTrashbin(110, 600); //pass the shortcut&#39;s coordinate\r\n                sendToTrashbin(265, 600); //nothing happens when adding this line\r\n            }}, 2000);\r\n    }\r\n\r\n    private void sendToTrashbin(int x, int y){\r\n        dragAndDrop(x, y, 380, 70); //380 and 70 are the trashbin&#39;s coordinates\r\n    }\r\n\r\n    private void dragAndDrop(int x1, int y1, int x2, int y2){\r\n        Path path = new Path();\r\n        path.moveTo(x1, y1);\r\n        GestureDescription.StrokeDescription sd = new GestureDescription.StrokeDescription(path, 0, 1, true); //Press and hold the shortcut\r\n\r\n        Path path2 = new Path();\r\n        path2.moveTo(x1, y1);\r\n        path2.lineTo(x2, y2);\r\n        GestureDescription.StrokeDescription sd2 = sd.continueStroke(path2, 500, 100, false); //Drag and drop the shortcut in the remove area\r\n\r\n        dispatchGesture(new GestureDescription.Builder().addStroke(sd).build(), new AccessibilityService.GestureResultCallback() {\r\n            @Override\r\n            public void onCompleted(GestureDescription gestureDescription) {\r\n                super.onCompleted(gestureDescription);\r\n                dispatchGesture(new GestureDescription.Builder().addStroke(sd2).build(), null, null);\r\n            }}, null);\r\n    }\r\n\r\nWhen only adding ```sendToTrashbin(110, 600);``` the program removes the first shortcut icon successfully, but when I add ```sendToTrashbin(265, 600);``` nothing happens then.\r\n\r\nI thought about adding mutiple continuing strokes as a callback at the end of ```dragAndDrop()``` but as I have to do it 10 times, this is going to result in a lot of nested callbacks.\r\n\r\nHow could I wait for the first gesture from the ```sendToTrashbin()``` call to end before starting the next one?\r\n","title":"How to chain multiple gestures using AccessibilityService?","body":"<p>I want to use an AccessibilityService to remove automatically all shortcuts on the home screen by holding them and draging them up to the remove area.</p>\n<p>For now I can remove one shortcut, but I fail to find a way to chain this drag and drop process multiple time.</p>\n<pre><code>@Override\npublic void onAccessibilityEvent(AccessibilityEvent event) {\n        Handler handler = new Handler();\n        handler.postDelayed(new Runnable() {\n           public void run() {\n            sendToTrashbin(110, 600); //pass the shortcut's coordinate\n            sendToTrashbin(265, 600); //nothing happens when adding this line\n        }}, 2000);\n}\n\nprivate void sendToTrashbin(int x, int y){\n    dragAndDrop(x, y, 380, 70); //380 and 70 are the trashbin's coordinates\n}\n\nprivate void dragAndDrop(int x1, int y1, int x2, int y2){\n    Path path = new Path();\n    path.moveTo(x1, y1);\n    GestureDescription.StrokeDescription sd = new GestureDescription.StrokeDescription(path, 0, 1, true); //Press and hold the shortcut\n\n    Path path2 = new Path();\n    path2.moveTo(x1, y1);\n    path2.lineTo(x2, y2);\n    GestureDescription.StrokeDescription sd2 = sd.continueStroke(path2, 500, 100, false); //Drag and drop the shortcut in the remove area\n\n    dispatchGesture(new GestureDescription.Builder().addStroke(sd).build(), new AccessibilityService.GestureResultCallback() {\n        @Override\n        public void onCompleted(GestureDescription gestureDescription) {\n            super.onCompleted(gestureDescription);\n            dispatchGesture(new GestureDescription.Builder().addStroke(sd2).build(), null, null);\n        }}, null);\n}\n</code></pre>\n<p>When only adding <code>sendToTrashbin(110, 600);</code> the program removes the first shortcut icon successfully, but when I add <code>sendToTrashbin(265, 600);</code> nothing happens then.</p>\n<p>I thought about adding mutiple continuing strokes as a callback at the end of <code>dragAndDrop()</code> but as I have to do it 10 times, this is going to result in a lot of nested callbacks.</p>\n<p>How could I wait for the first gesture from the <code>sendToTrashbin()</code> call to end before starting the next one?</p>\n"},{"tags":["java","sql","jdbc"],"answers":[{"tags":[],"owner":{"account_id":3583855,"reputation":150,"user_id":2991440,"display_name":"krishnan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676327922,"creation_date":1676327922,"answer_id":75441851,"question_id":75441787,"body_markdown":"Use ResultSet object to fetch the GeneratedKeys on Statement\r\n\r\n    ResultSet rs = ps.getGeneratedKeys();\r\n    \r\n    if (rs.next()) {\r\n        long id = rs.getLong(1);\r\n        System.out.println(&quot;Inserted ID -&quot; + id); // display inserted record\r\n    }\r\n\r\nFor Oracle :\r\n\r\n   \r\n\r\n    String key[] = {&quot;ID&quot;}; //put the name of the primary key column\r\n    \r\n    ps = con.prepareStatement(insertQuery, key);\r\n    ps.executeUpdate();\r\n    \r\n    rs = ps.getGeneratedKeys();\r\n    if (rs.next()) {\r\n        generatedKey = rs.getLong(1);\r\n    }","title":"How can I use last insert id SQL from Java?","body":"<p>Use ResultSet object to fetch the GeneratedKeys on Statement</p>\n<pre><code>ResultSet rs = ps.getGeneratedKeys();\n\nif (rs.next()) {\n    long id = rs.getLong(1);\n    System.out.println(&quot;Inserted ID -&quot; + id); // display inserted record\n}\n</code></pre>\n<p>For Oracle :</p>\n<pre><code>String key[] = {&quot;ID&quot;}; //put the name of the primary key column\n\nps = con.prepareStatement(insertQuery, key);\nps.executeUpdate();\n\nrs = ps.getGeneratedKeys();\nif (rs.next()) {\n    generatedKey = rs.getLong(1);\n}\n</code></pre>\n"}],"owner":{"account_id":27777600,"reputation":1,"user_id":21206633,"display_name":"santiago"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1676372691,"answer_count":1,"score":0,"last_activity_date":1676372733,"creation_date":1676327273,"question_id":75441787,"body_markdown":"Here is my code:\r\n``` \r\nString sql=&quot;INSERT INTO ventas(prefijo,fecha,hora,vtanum,vlrfactura,cambio) VALUES(?,?,?,?,?,?);&quot;;\r\ntry {\r\n    ps=con.prepareStatement(sql,Statement.RETURN_GENERATED_KEYS);\r\n    ps.setString(1, vta.getPrefijo());\r\n    ps.setDate(2, vta.getFecha());\r\n    ps.setTime(3, vta.getHora());\r\n    ps.setInt(4, vta.getVtanum());\r\n    ps.setInt(5,vta.getVlrfactura());\r\n    ps.setInt(6,vta.getCambio());\r\n    ps.execute();\r\n    return true;\r\n} catch (SQLException ex) {\r\n    Logger.getLogger(OperacionesBD.class.getName()).log(Level.SEVERE, null, ex);\r\n    return false;\r\n}\r\n```\r\nI want get the PK of that sentence and then use it in another statement like this:\r\n```\r\nSET @last_id_in_table1 = LAST_INSERT_ID();\r\nINSERT INTO pagmundimotos.pagos(id_venta,frmpag) VALUES (@last_id_in_table1, &#39;9&#39;); \r\n```\r\nBut I don&#39;t know how to obtain the last_insert_id in Java.\r\n","title":"How can I use last insert id SQL from Java?","body":"<p>Here is my code:</p>\n<pre><code>String sql=&quot;INSERT INTO ventas(prefijo,fecha,hora,vtanum,vlrfactura,cambio) VALUES(?,?,?,?,?,?);&quot;;\ntry {\n    ps=con.prepareStatement(sql,Statement.RETURN_GENERATED_KEYS);\n    ps.setString(1, vta.getPrefijo());\n    ps.setDate(2, vta.getFecha());\n    ps.setTime(3, vta.getHora());\n    ps.setInt(4, vta.getVtanum());\n    ps.setInt(5,vta.getVlrfactura());\n    ps.setInt(6,vta.getCambio());\n    ps.execute();\n    return true;\n} catch (SQLException ex) {\n    Logger.getLogger(OperacionesBD.class.getName()).log(Level.SEVERE, null, ex);\n    return false;\n}\n</code></pre>\n<p>I want get the PK of that sentence and then use it in another statement like this:</p>\n<pre><code>SET @last_id_in_table1 = LAST_INSERT_ID();\nINSERT INTO pagmundimotos.pagos(id_venta,frmpag) VALUES (@last_id_in_table1, '9'); \n</code></pre>\n<p>But I don't know how to obtain the last_insert_id in Java.</p>\n"},{"tags":["java","json","file-access"],"comments":[{"owner":{"account_id":540420,"reputation":6131,"user_id":908621,"accept_rate":61,"display_name":"fishinear"},"score":0,"creation_date":1675603223,"post_id":75338232,"comment_id":132960735,"body_markdown":"The code you show does something completely different from the question that you claim you have. Hence it is not clear what your question exactly is. Do you have problems accessing the directory, reading the files, getting the contents of a file into a string, parsing that string as a json object? What is your problem?","body":"The code you show does something completely different from the question that you claim you have. Hence it is not clear what your question exactly is. Do you have problems accessing the directory, reading the files, getting the contents of a file into a string, parsing that string as a json object? What is your problem?"},{"owner":{"account_id":11389854,"reputation":6022,"user_id":8370915,"display_name":"invzbl3"},"score":0,"creation_date":1675603679,"post_id":75338232,"comment_id":132960829,"body_markdown":"@fishinear, I disagree with the statement about &quot;completely different&quot;. In my code I&#39;ve specified `String content` with `strings` of locations to `JSON`-s. I need to read both of `JSON`-s and then get as a `String` representation the parameter to pass it in the provided custom method as `getAllExportsWithProductIds`.  The problem is I can&#39;t do it in the way which I attached in the example.","body":"@fishinear, I disagree with the statement about &quot;completely different&quot;. In my code I&#39;ve specified <code>String content</code> with <code>strings</code> of locations to <code>JSON</code>-s. I need to read both of <code>JSON</code>-s and then get as a <code>String</code> representation the parameter to pass it in the provided custom method as <code>getAllExportsWithProductIds</code>.  The problem is I can&#39;t do it in the way which I attached in the example."},{"owner":{"account_id":540420,"reputation":6131,"user_id":908621,"accept_rate":61,"display_name":"fishinear"},"score":0,"creation_date":1675603766,"post_id":75338232,"comment_id":132960842,"body_markdown":"That does not clarify what your problem is. Do you have problems accessing the directory, reading the files, getting the contents of a file into a string, parsing that string as a json object? What is your problem?","body":"That does not clarify what your problem is. Do you have problems accessing the directory, reading the files, getting the contents of a file into a string, parsing that string as a json object? What is your problem?"},{"owner":{"account_id":11389854,"reputation":6022,"user_id":8370915,"display_name":"invzbl3"},"score":0,"creation_date":1675603945,"post_id":75338232,"comment_id":132960877,"body_markdown":"The problem is how to read two `JSON`-s with the content inside to get `String` representation for both of them to pass it to the custom method. I&#39;ve received the requirement to send two `JSON`-s somehow as a `String` representation to the custom method. I don&#39;t quite understand the way how can I do that correctly. I can improve the question, if it helps to clarify it.","body":"The problem is how to read two <code>JSON</code>-s with the content inside to get <code>String</code> representation for both of them to pass it to the custom method. I&#39;ve received the requirement to send two <code>JSON</code>-s somehow as a <code>String</code> representation to the custom method. I don&#39;t quite understand the way how can I do that correctly. I can improve the question, if it helps to clarify it."},{"owner":{"account_id":540420,"reputation":6131,"user_id":908621,"accept_rate":61,"display_name":"fishinear"},"score":1,"creation_date":1675604107,"post_id":75338232,"comment_id":132960904,"body_markdown":"See https://stackoverflow.com/q/14169661/908621 for how to read the full contents of a file into a String.","body":"See <a href=\"https://stackoverflow.com/q/14169661/908621\">stackoverflow.com/q/14169661/908621</a> for how to read the full contents of a file into a String."},{"owner":{"account_id":11389854,"reputation":6022,"user_id":8370915,"display_name":"invzbl3"},"score":0,"creation_date":1675604294,"post_id":75338232,"comment_id":132960941,"body_markdown":"@fishinear, thank you for the example. I&#39;m investigating it now.","body":"@fishinear, thank you for the example. I&#39;m investigating it now."},{"owner":{"account_id":11389854,"reputation":6022,"user_id":8370915,"display_name":"invzbl3"},"score":0,"creation_date":1675605640,"post_id":75338232,"comment_id":132961164,"body_markdown":"@fishinear, I&#39;ve just checked your provided [example](https://stackoverflow.com/q/14169661/908621) and [it doesn&#39;t for me](https://gist.github.com/invzbl3/e81f1a71bb8dcffa42e59a29adf69f7a#file-productidimporter-java-L44). It&#39;s working by the same principle as I did in the [second attempt](https://gist.github.com/invzbl3/49c8b9df28fda1ea973b799596db3487#file-productidimporter2-java-L45). I&#39;m getting the issue related to [indexes](https://gist.github.com/invzbl3/a8abb5a50ca6c44519b67c5d5e4b9299#file-invalidpathexception-java-L30), but thank you a lot for your effort to help me with it.","body":"@fishinear, I&#39;ve just checked your provided <a href=\"https://stackoverflow.com/q/14169661/908621\">example</a> and <a href=\"https://gist.github.com/invzbl3/e81f1a71bb8dcffa42e59a29adf69f7a#file-productidimporter-java-L44\" rel=\"nofollow noreferrer\">it doesn&#39;t for me</a>. It&#39;s working by the same principle as I did in the <a href=\"https://gist.github.com/invzbl3/49c8b9df28fda1ea973b799596db3487#file-productidimporter2-java-L45\" rel=\"nofollow noreferrer\">second attempt</a>. I&#39;m getting the issue related to <a href=\"https://gist.github.com/invzbl3/a8abb5a50ca6c44519b67c5d5e4b9299#file-invalidpathexception-java-L30\" rel=\"nofollow noreferrer\">indexes</a>, but thank you a lot for your effort to help me with it."},{"owner":{"account_id":540420,"reputation":6131,"user_id":908621,"accept_rate":61,"display_name":"fishinear"},"score":1,"creation_date":1675606004,"post_id":75338232,"comment_id":132961227,"body_markdown":"You might want to update your question, so that it clearly states what you want to achieve, what you have tried and what problem you run into. Remove anything not related to the problem. For example, as I understand your problem, it has nothing to do with the fact the files contain JSON . So remove that from the problem definition.","body":"You might want to update your question, so that it clearly states what you want to achieve, what you have tried and what problem you run into. Remove anything not related to the problem. For example, as I understand your problem, it has nothing to do with the fact the files contain JSON . So remove that from the problem definition."},{"owner":{"account_id":11389854,"reputation":6022,"user_id":8370915,"display_name":"invzbl3"},"score":0,"creation_date":1675606475,"post_id":75338232,"comment_id":132961306,"body_markdown":"@fishinear, no problem, I&#39;ve updated the question with concrete error and the way I&#39;m using for reproducing it. Hope it makes more sense now.","body":"@fishinear, no problem, I&#39;ve updated the question with concrete error and the way I&#39;m using for reproducing it. Hope it makes more sense now."},{"owner":{"account_id":540420,"reputation":6131,"user_id":908621,"accept_rate":61,"display_name":"fishinear"},"score":1,"creation_date":1675606768,"post_id":75338232,"comment_id":132961357,"body_markdown":"The &quot;invalid path exception&quot; tells you exactly what the problem is: you are using a file path that is invalid on your computer. It even tells you which character is invalid.","body":"The &quot;invalid path exception&quot; tells you exactly what the problem is: you are using a file path that is invalid on your computer. It even tells you which character is invalid."}],"answers":[{"tags":[],"owner":{"account_id":11389854,"reputation":6022,"user_id":8370915,"display_name":"invzbl3"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676372567,"creation_date":1675701996,"answer_id":75364214,"question_id":75338232,"body_markdown":"As one of ways it could be implemented as provided below:\r\n\r\n    public class ProductIdImporter {\r\n        record ExportList(Json undecoded, List&lt;Product&gt; products) {\r\n            static ExportList fromJson(Json json) {\r\n                return new ExportList(\r\n                        json,\r\n                        JsonDecoder.field(json, &quot;products&quot;, JsonDecoder.array(Product::fromJson))\r\n                );\r\n            }\r\n        }\r\n    \r\n        record Product(String productID) {\r\n            static Product fromJson(Json json) {\r\n                return new Product(JsonDecoder.field(\r\n                        json,\r\n                        &quot;productID&quot;,\r\n                        JsonDecoder::string\r\n                ));\r\n            }\r\n        }\r\n    \r\n        public static List&lt;ExportList&gt; loadExports(InputStream resource) throws IOException {\r\n            var json = Json.read(new InputStreamReader(resource));\r\n            return JsonDecoder.array(json, ExportList::fromJson);\r\n        }\r\n    \r\n        public static List&lt;Json&gt; getAllExportsWithProductIds(List&lt;String&gt; resources, List&lt;String&gt; productIds) throws IOException {\r\n            var exports = new ArrayList&lt;ExportList&gt;();\r\n            for (var resource : resources) {\r\n                try (var inputStream = Objects.requireNonNull(ProductIdImporter.class.getResourceAsStream(resource))) {\r\n                    exports.addAll(loadExports(inputStream));\r\n                }\r\n            }\r\n    \r\n            return  exports.stream()\r\n                    .filter(export -&gt; export.products\r\n                            .stream()\r\n                            .anyMatch(product -&gt; productIds.contains(product.productID))\r\n                    )\r\n                    .map(ExportList::undecoded)\r\n                    .toList();\r\n    \r\n        }\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            var resources = List.of(&quot;/product1.json&quot;, &quot;/product2.json&quot;);\r\n            var productIds = List.of( &quot;00017552897&quot;);\r\n            System.out.println(getAllExportsWithProductIds(\r\n                    resources,\r\n                    productIds\r\n            ));\r\n        }\r\n    }","title":"How can I fix the issue as: &quot;Exception in thread &quot;main&quot; java.nio.file.InvalidPathException: Illegal char &lt;:&gt; at index&quot; reading JSON-s as a String?","body":"<p>As one of ways it could be implemented as provided below:</p>\n<pre><code>public class ProductIdImporter {\n    record ExportList(Json undecoded, List&lt;Product&gt; products) {\n        static ExportList fromJson(Json json) {\n            return new ExportList(\n                    json,\n                    JsonDecoder.field(json, &quot;products&quot;, JsonDecoder.array(Product::fromJson))\n            );\n        }\n    }\n\n    record Product(String productID) {\n        static Product fromJson(Json json) {\n            return new Product(JsonDecoder.field(\n                    json,\n                    &quot;productID&quot;,\n                    JsonDecoder::string\n            ));\n        }\n    }\n\n    public static List&lt;ExportList&gt; loadExports(InputStream resource) throws IOException {\n        var json = Json.read(new InputStreamReader(resource));\n        return JsonDecoder.array(json, ExportList::fromJson);\n    }\n\n    public static List&lt;Json&gt; getAllExportsWithProductIds(List&lt;String&gt; resources, List&lt;String&gt; productIds) throws IOException {\n        var exports = new ArrayList&lt;ExportList&gt;();\n        for (var resource : resources) {\n            try (var inputStream = Objects.requireNonNull(ProductIdImporter.class.getResourceAsStream(resource))) {\n                exports.addAll(loadExports(inputStream));\n            }\n        }\n\n        return  exports.stream()\n                .filter(export -&gt; export.products\n                        .stream()\n                        .anyMatch(product -&gt; productIds.contains(product.productID))\n                )\n                .map(ExportList::undecoded)\n                .toList();\n\n    }\n\n    public static void main(String[] args) throws IOException {\n        var resources = List.of(&quot;/product1.json&quot;, &quot;/product2.json&quot;);\n        var productIds = List.of( &quot;00017552897&quot;);\n        System.out.println(getAllExportsWithProductIds(\n                resources,\n                productIds\n        ));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11389854,"reputation":6022,"user_id":8370915,"display_name":"invzbl3"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":530,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1675776667,"accepted_answer_id":75364214,"answer_count":1,"score":0,"last_activity_date":1676372567,"creation_date":1675440181,"question_id":75338232,"body_markdown":"**What I need:**\r\n\r\nI need to get `String` representation of two `JSON` files separately or at the same time, if it possible.\r\n\r\nTo send it to the method with declaration as:\r\n\r\n    public static List&lt;String&gt; getAllExportsWithProductIds(String directory, List&lt;String&gt; productIds)\r\n\r\n----------\r\n**What I have:**\r\n\r\nI&#39;m working with the *following* version of code as:\r\n\r\n```\r\npublic class ProductIdImporter {\r\n    public ProductIdImporter() {\r\n        // TODO Auto-generated constructor stub\r\n    }\r\n\r\n    public void importJson() throws IOException {\r\n        //List&lt;String&gt; stringList = Arrays.asList(&quot;0001755256&quot;, &quot;0001694109&quot;);\r\n        List&lt;Path&gt; paths = Arrays.asList(Paths.get(&quot;C:\\\\Users\\\\pc\\\\IdeaProjects\\\\jsonapi\\\\src\\\\test\\\\java\\\\resources\\\\json\\\\product_0001690510.json&quot;),\r\n                Paths.get(&quot;C:\\\\Users\\\\pc\\\\IdeaProjects\\\\jsonapi\\\\src\\\\test\\\\java\\\\resources\\\\json\\\\product_0001694109.json&quot;));\r\n\r\n        ObjectMapper jsonMapper = new ObjectMapper().configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n\r\n        List&lt;String&gt; productIds = paths\r\n                .stream()\r\n                .map(path -&gt; {\r\n                    try {\r\n                        return jsonMapper\r\n                                .readValue(Files.newInputStream(path), Product[].class);\r\n                    } catch (Exception e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                }).map(Arrays::asList)\r\n                .flatMap(List::stream)\r\n                .map(Product::getId)\r\n                .toList();\r\n        productIds.forEach(System.out::println);\r\n\r\n        try {\r\n            String content = new String(Files.readAllBytes(Paths.get(&quot;C:\\\\Users\\\\pc\\\\IdeaProjects\\\\jsonapi\\\\src\\\\test\\\\java\\\\resources\\\\json\\\\product_0001690510.json&quot;,\r\n                    &quot;C:\\\\Users\\\\pc\\\\IdeaProjects\\\\jsonapi\\\\src\\\\test\\\\java\\\\resources\\\\json\\\\product_0001694109.json&quot;)), StandardCharsets.UTF_8);\r\n            // default StandardCharsets.UTF_8\r\n            System.out.println(getAllExportsWithProductIds(content, productIds));\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        ProductIdImporter importer = new ProductIdImporter();\r\n        importer.importJson();\r\n    }\r\n\r\n    static class ExportList {\r\n        public List&lt;Product&gt; products;\r\n\r\n        public ExportList() {\r\n        }\r\n\r\n        public List&lt;Product&gt; getProducts() {\r\n            return products;\r\n        }\r\n    }\r\n\r\n    static class Product {\r\n        public String productID;\r\n\r\n        public Product() {\r\n        }\r\n\r\n        public String getId() {\r\n            return productID;\r\n        }\r\n    }\r\n\r\n    public static List&lt;String&gt; getAllExportsWithProductIds(String directory, List&lt;String&gt; productIds) throws IOException {\r\n        var matchingObjects = new ArrayList&lt;String&gt;();\r\n        try (var fileStream = Files.walk(Path.of(directory))) {\r\n            for (var file : fileStream.toList()) {\r\n                var json = Json.readString(Files.readString(file));\r\n                var objects = JsonDecoder.array(json);\r\n\r\n                for (var object : objects) {\r\n                    var objectProductIDs = JsonDecoder.field(\r\n                            object, &quot;products&quot;,\r\n                            JsonDecoder.array(JsonDecoder.field(&quot;productID&quot;, JsonDecoder::string))\r\n                    );\r\n                    for (var productId : objectProductIDs) {\r\n                        if (productIds.contains(productId)) {\r\n                            matchingObjects.add(Json.writeString(object));\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        return matchingObjects;\r\n    }\r\n}\r\n```\r\n\r\nwhere I need to get the access specifically to the directory to read two `JSON` files separately to get as a parameter String representation each of them to send to the custom method for handling based on `productID` parameter:\r\n\r\n1. [JSON №1](https://gist.github.com/invzbl3/29a298bc757dfaa4717901eaa3bc9a55)\r\n2. [JSON №2](https://gist.github.com/invzbl3/98b6d8c8589f795ea6feafcea0fe9d04)\r\n\r\nThe directory is:\r\n`C:\\Users\\pc\\IdeaProjects\\jsonapi\\src\\test\\java\\resources\\json`\r\n\r\nbefore handling list of `id`-s.\r\n\r\nMy `project-structure` of the project is as in the buttom provided:\r\n\r\n```\r\nC:.\r\n├───.idea\r\n│   ├───artifacts\r\n│   ├───inspectionProfiles\r\n│   └───libraries\r\n├───out\r\n│   └───artifacts\r\n│       └───jsonapi_jar\r\n├───src\r\n│   ├───main\r\n│   │   ├───java\r\n│   │   │   └───org.example\r\n│   │   └───resources\r\n│   │       └───META-INF\r\n│   └───test\r\n│       └───java\r\n│           └───resources\r\n│               └───json\r\n└───target\r\n    ├───classes\r\n    │   ├───META-INF\r\n    │   └───org\r\n    │       └───example\r\n    └───generated-sources\r\n        └───annotations\r\n```\r\n\r\n----------\r\n\r\n\r\n**What I tried:**\r\n\r\n**№1:** I have updated my [code version](https://gist.github.com/invzbl3/b5bee6c108d849d216a85006fbdbbd10). I need to get the access to the directory with `JSON`-s correctly\r\n\r\n**№2:** I have updated again with [newer version](https://gist.github.com/invzbl3/49c8b9df28fda1ea973b799596db3487), but still no luck.\r\n\r\n**№3:** I have tried to use the [code snippet](https://gist.github.com/invzbl3/08792c1cc2c12a75adb6fb0d1c8cad8a) based on this [answer](https://stackoverflow.com/a/9999177/8370915), but it returns me still the error while [reading and parsing](https://gist.github.com/invzbl3/7460faecc11e3f64a6d5e52bb897216d) it as `InvalidPathException.java`.\r\n\r\n----------\r\nWhile running the attached code and reading the content inside `JSON`-s, I&#39;m reproducing [the issue][1] as:\r\n\r\n```\r\nException in thread &quot;main&quot; java.nio.file.InvalidPathException: Illegal char &lt;:&gt; at index\r\n```\r\nin one of my provided attempts.\r\n\r\n----------\r\n\r\n**To summarize:**\r\n\r\nAs you can see, I&#39;m passing a directory to the method instead of a file and that doesn&#39;t work. \r\n\r\nBased on it, my *question* is:\r\n\r\nHow can I do each file at a time and manage them after? If it doesn&#39;t make sense to try to do two at the same time. Can I handle two files of `JSON`-s as one file at a time, parse to `String`, and send each of them to the method for handling? Is it possible, at all?\r\n\r\nThank you in advance for your ideas how to handle it. If you need more details, I&#39;m ready to provide.\r\n\r\n\r\n  [1]: https://gist.github.com/invzbl3/29d9e2e4bf9c6c629b372cda24a72dfe#file-invalidpathexception-java-L30","title":"How can I fix the issue as: &quot;Exception in thread &quot;main&quot; java.nio.file.InvalidPathException: Illegal char &lt;:&gt; at index&quot; reading JSON-s as a String?","body":"<p><strong>What I need:</strong></p>\n<p>I need to get <code>String</code> representation of two <code>JSON</code> files separately or at the same time, if it possible.</p>\n<p>To send it to the method with declaration as:</p>\n<pre><code>public static List&lt;String&gt; getAllExportsWithProductIds(String directory, List&lt;String&gt; productIds)\n</code></pre>\n<hr />\n<p><strong>What I have:</strong></p>\n<p>I'm working with the <em>following</em> version of code as:</p>\n<pre><code>public class ProductIdImporter {\n    public ProductIdImporter() {\n        // TODO Auto-generated constructor stub\n    }\n\n    public void importJson() throws IOException {\n        //List&lt;String&gt; stringList = Arrays.asList(&quot;0001755256&quot;, &quot;0001694109&quot;);\n        List&lt;Path&gt; paths = Arrays.asList(Paths.get(&quot;C:\\\\Users\\\\pc\\\\IdeaProjects\\\\jsonapi\\\\src\\\\test\\\\java\\\\resources\\\\json\\\\product_0001690510.json&quot;),\n                Paths.get(&quot;C:\\\\Users\\\\pc\\\\IdeaProjects\\\\jsonapi\\\\src\\\\test\\\\java\\\\resources\\\\json\\\\product_0001694109.json&quot;));\n\n        ObjectMapper jsonMapper = new ObjectMapper().configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n\n        List&lt;String&gt; productIds = paths\n                .stream()\n                .map(path -&gt; {\n                    try {\n                        return jsonMapper\n                                .readValue(Files.newInputStream(path), Product[].class);\n                    } catch (Exception e) {\n                        throw new RuntimeException(e);\n                    }\n                }).map(Arrays::asList)\n                .flatMap(List::stream)\n                .map(Product::getId)\n                .toList();\n        productIds.forEach(System.out::println);\n\n        try {\n            String content = new String(Files.readAllBytes(Paths.get(&quot;C:\\\\Users\\\\pc\\\\IdeaProjects\\\\jsonapi\\\\src\\\\test\\\\java\\\\resources\\\\json\\\\product_0001690510.json&quot;,\n                    &quot;C:\\\\Users\\\\pc\\\\IdeaProjects\\\\jsonapi\\\\src\\\\test\\\\java\\\\resources\\\\json\\\\product_0001694109.json&quot;)), StandardCharsets.UTF_8);\n            // default StandardCharsets.UTF_8\n            System.out.println(getAllExportsWithProductIds(content, productIds));\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void main(String[] args) throws IOException {\n        ProductIdImporter importer = new ProductIdImporter();\n        importer.importJson();\n    }\n\n    static class ExportList {\n        public List&lt;Product&gt; products;\n\n        public ExportList() {\n        }\n\n        public List&lt;Product&gt; getProducts() {\n            return products;\n        }\n    }\n\n    static class Product {\n        public String productID;\n\n        public Product() {\n        }\n\n        public String getId() {\n            return productID;\n        }\n    }\n\n    public static List&lt;String&gt; getAllExportsWithProductIds(String directory, List&lt;String&gt; productIds) throws IOException {\n        var matchingObjects = new ArrayList&lt;String&gt;();\n        try (var fileStream = Files.walk(Path.of(directory))) {\n            for (var file : fileStream.toList()) {\n                var json = Json.readString(Files.readString(file));\n                var objects = JsonDecoder.array(json);\n\n                for (var object : objects) {\n                    var objectProductIDs = JsonDecoder.field(\n                            object, &quot;products&quot;,\n                            JsonDecoder.array(JsonDecoder.field(&quot;productID&quot;, JsonDecoder::string))\n                    );\n                    for (var productId : objectProductIDs) {\n                        if (productIds.contains(productId)) {\n                            matchingObjects.add(Json.writeString(object));\n                            break;\n                        }\n                    }\n                }\n            }\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n        return matchingObjects;\n    }\n}\n</code></pre>\n<p>where I need to get the access specifically to the directory to read two <code>JSON</code> files separately to get as a parameter String representation each of them to send to the custom method for handling based on <code>productID</code> parameter:</p>\n<ol>\n<li><a href=\"https://gist.github.com/invzbl3/29a298bc757dfaa4717901eaa3bc9a55\" rel=\"nofollow noreferrer\">JSON №1</a></li>\n<li><a href=\"https://gist.github.com/invzbl3/98b6d8c8589f795ea6feafcea0fe9d04\" rel=\"nofollow noreferrer\">JSON №2</a></li>\n</ol>\n<p>The directory is:\n<code>C:\\Users\\pc\\IdeaProjects\\jsonapi\\src\\test\\java\\resources\\json</code></p>\n<p>before handling list of <code>id</code>-s.</p>\n<p>My <code>project-structure</code> of the project is as in the buttom provided:</p>\n<pre><code>C:.\n├───.idea\n│   ├───artifacts\n│   ├───inspectionProfiles\n│   └───libraries\n├───out\n│   └───artifacts\n│       └───jsonapi_jar\n├───src\n│   ├───main\n│   │   ├───java\n│   │   │   └───org.example\n│   │   └───resources\n│   │       └───META-INF\n│   └───test\n│       └───java\n│           └───resources\n│               └───json\n└───target\n    ├───classes\n    │   ├───META-INF\n    │   └───org\n    │       └───example\n    └───generated-sources\n        └───annotations\n</code></pre>\n<hr />\n<p><strong>What I tried:</strong></p>\n<p><strong>№1:</strong> I have updated my <a href=\"https://gist.github.com/invzbl3/b5bee6c108d849d216a85006fbdbbd10\" rel=\"nofollow noreferrer\">code version</a>. I need to get the access to the directory with <code>JSON</code>-s correctly</p>\n<p><strong>№2:</strong> I have updated again with <a href=\"https://gist.github.com/invzbl3/49c8b9df28fda1ea973b799596db3487\" rel=\"nofollow noreferrer\">newer version</a>, but still no luck.</p>\n<p><strong>№3:</strong> I have tried to use the <a href=\"https://gist.github.com/invzbl3/08792c1cc2c12a75adb6fb0d1c8cad8a\" rel=\"nofollow noreferrer\">code snippet</a> based on this <a href=\"https://stackoverflow.com/a/9999177/8370915\">answer</a>, but it returns me still the error while <a href=\"https://gist.github.com/invzbl3/7460faecc11e3f64a6d5e52bb897216d\" rel=\"nofollow noreferrer\">reading and parsing</a> it as <code>InvalidPathException.java</code>.</p>\n<hr />\n<p>While running the attached code and reading the content inside <code>JSON</code>-s, I'm reproducing <a href=\"https://gist.github.com/invzbl3/29d9e2e4bf9c6c629b372cda24a72dfe#file-invalidpathexception-java-L30\" rel=\"nofollow noreferrer\">the issue</a> as:</p>\n<pre><code>Exception in thread &quot;main&quot; java.nio.file.InvalidPathException: Illegal char &lt;:&gt; at index\n</code></pre>\n<p>in one of my provided attempts.</p>\n<hr />\n<p><strong>To summarize:</strong></p>\n<p>As you can see, I'm passing a directory to the method instead of a file and that doesn't work.</p>\n<p>Based on it, my <em>question</em> is:</p>\n<p>How can I do each file at a time and manage them after? If it doesn't make sense to try to do two at the same time. Can I handle two files of <code>JSON</code>-s as one file at a time, parse to <code>String</code>, and send each of them to the method for handling? Is it possible, at all?</p>\n<p>Thank you in advance for your ideas how to handle it. If you need more details, I'm ready to provide.</p>\n"},{"tags":["java","postgresql","spring-boot","tomcat","connection-pool"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1548442004,"post_id":54370963,"comment_id":95556612,"body_markdown":"We&#39;ll need the full exception stacktrace of the connection failure. Probably not related to your problem, but why are you including the username and password in the URL and also as properties?","body":"We&#39;ll need the full exception stacktrace of the connection failure. Probably not related to your problem, but why are you including the username and password in the URL and also as properties?"},{"owner":{"account_id":2162628,"reputation":1252,"user_id":1916461,"display_name":"高科技黑手"},"score":0,"creation_date":1548443327,"post_id":54370963,"comment_id":95557187,"body_markdown":"I&#39;m not so sure about &quot;also as properties&quot; part, were you referring to application.properties or .env? It doesn&#39;t affect anything if login/shadow are in the JDBC URL, I did it this way only because Heroku does it and I wanted to try different approaches. I will edit this question later again with the full stack traces.","body":"I&#39;m not so sure about &quot;also as properties&quot; part, were you referring to application.properties or .env? It doesn&#39;t affect anything if login/shadow are in the JDBC URL, I did it this way only because Heroku does it and I wanted to try different approaches. I will edit this question later again with the full stack traces."},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1548488135,"post_id":54370963,"comment_id":95566915,"body_markdown":"I was referring to the fact you have the username in property `spring.datasource.username` and the password in property `spring.datasource.password`, while you also have it in your JDBC url.","body":"I was referring to the fact you have the username in property <code>spring.datasource.username</code> and the password in property <code>spring.datasource.password</code>, while you also have it in your JDBC url."},{"owner":{"display_name":"user330315"},"score":0,"creation_date":1548663648,"post_id":54370963,"comment_id":95606618,"body_markdown":"&quot;*java.net.UnknownHostException*&quot; - the hostname `login:shadow@127.0.0.1` in your JDBC is invalid. Please show us the **real** URL you are using (looks like you tried to include the username in there somehow)","body":"&quot;<i>java.net.UnknownHostException</i>&quot; - the hostname <code>login:shadow@127.0.0.1</code> in your JDBC is invalid. Please show us the <b>real</b> URL you are using (looks like you tried to include the username in there somehow)"}],"answers":[{"tags":[],"owner":{"account_id":2324956,"reputation":969,"user_id":2039693,"accept_rate":50,"display_name":"Ramesh Subramanian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1548662936,"creation_date":1548662936,"answer_id":54397771,"question_id":54370963,"body_markdown":"Seems your JDBC URL is wrong. (POSTGRES_URL=`postgresql://`) Please specify it as like `jdbc:postgresql://.....`\r\n\r\nThere is a WARN message in your log showing `03:28:47.447 [main] WARN  org.springframework.boot.autoconfigure.orm.jpa.DatabaseLookup - Unable to determine jdbc url from datasource` that JDBC URL is not valid.","title":"org.apache.tomcat.jdbc.pool.ConnectionPool - Unable to create initial connections of pool","body":"<p>Seems your JDBC URL is wrong. (POSTGRES_URL=<code>postgresql://</code>) Please specify it as like <code>jdbc:postgresql://.....</code></p>\n\n<p>There is a WARN message in your log showing <code>03:28:47.447 [main] WARN  org.springframework.boot.autoconfigure.orm.jpa.DatabaseLookup - Unable to determine jdbc url from datasource</code> that JDBC URL is not valid.</p>\n"}],"owner":{"account_id":2162628,"reputation":1252,"user_id":1916461,"display_name":"高科技黑手"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12384,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1676372555,"creation_date":1548440851,"question_id":54370963,"body_markdown":"I&#39;m working on a Spring Boot based project which incorporates a Tomcat Connection Pool (instead of the default Hikari). I&#39;ve done everything according to this [article][1] and it works as expected, although when I change  from MySQL to PostgreSQL, it just won&#39;t work; here&#39;s the stack traces:\r\n\r\n\t03:28:47.399 [main] ERROR org.apache.tomcat.jdbc.pool.ConnectionPool - Unable to create initial connections of pool.\r\n\torg.postgresql.util.PSQLException: The connection attempt failed.\r\n\t    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:292)\r\n\t    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49)\r\n\t    at org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:195)\r\n\t    at org.postgresql.Driver.makeConnection(Driver.java:454)\r\n\t    at org.postgresql.Driver.connect(Driver.java:256)\r\n\t    at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:319)\r\n\t    at org.apache.tomcat.jdbc.pool.PooledConnection.connect(PooledConnection.java:212)\r\n\t    at org.apache.tomcat.jdbc.pool.ConnectionPool.createConnection(ConnectionPool.java:739)\r\n\t    at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:671)\r\n\t    at org.apache.tomcat.jdbc.pool.ConnectionPool.init(ConnectionPool.java:483)\r\n\t    at org.apache.tomcat.jdbc.pool.ConnectionPool.&lt;init&gt;(ConnectionPool.java:154)\r\n\t    at org.apache.tomcat.jdbc.pool.DataSourceProxy.pCreatePool(DataSourceProxy.java:118)\r\n\t    at org.apache.tomcat.jdbc.pool.DataSourceProxy.createPool(DataSourceProxy.java:107)\r\n\t    at org.apache.tomcat.jdbc.pool.DataSourceProxy.getConnection(DataSourceProxy.java:131)\r\n\t    at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:157)\r\n\t    at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:115)\r\n\t    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:78)\r\n\t    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:319)\r\n\t    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:356)\r\n\t    at org.springframework.boot.autoconfigure.orm.jpa.DatabaseLookup.getDatabase(DatabaseLookup.java:73)\r\n\t    at org.springframework.boot.autoconfigure.orm.jpa.JpaProperties.determineDatabase(JpaProperties.java:142)\r\n\t    at org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.jpaVendorAdapter(JpaBaseConfiguration.java:112)\r\n\t    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration$$EnhancerBySpringCGLIB$$671956e6.CGLIB$jpaVendorAdapter$8(&lt;generated&gt;)\r\n\t    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration$$EnhancerBySpringCGLIB$$671956e6$$FastClassBySpringCGLIB$$1c2ee8aa.invoke(&lt;generated&gt;)\r\n\t    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\r\n\t    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363)\r\n\t    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration$$EnhancerBySpringCGLIB$$671956e6.jpaVendorAdapter(&lt;generated&gt;)\r\n\t    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\t    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\t    at java.lang.reflect.Method.invoke(Unknown Source)\r\n\t    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n\t    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622)\r\n\t    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n\t    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\t    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\r\n\t    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1244)\r\n\t    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)\r\n\t    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)\r\n\t    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)\r\n\t    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n\t    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\t    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\r\n\t    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1244)\r\n\t    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)\r\n\t    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)\r\n\t    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)\r\n\t    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n\t    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\t    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1083)\r\n\t    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:853)\r\n\t    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)\r\n\t    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)\r\n\t    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)\r\n\t    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)\r\n\t    at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)\r\n\t    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)\r\n\t    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)\r\n\t    at me.socialmall.basic.Application.main(Application.java:10)\r\n\t    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\t    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\t    at java.lang.reflect.Method.invoke(Unknown Source)\r\n\t    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48)\r\n\t    at org.springframework.boot.loader.Launcher.launch(Launcher.java:87)\r\n\t    at org.springframework.boot.loader.Launcher.launch(Launcher.java:50)\r\n\t    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51)\r\n\tCaused by: java.net.UnknownHostException: login:shadow@127.0.0.1\r\n\t    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)\r\n\t    at java.net.PlainSocketImpl.connect(Unknown Source)\r\n\t    at java.net.SocksSocketImpl.connect(Unknown Source)\r\n\t    at java.net.Socket.connect(Unknown Source)\r\n\t    at org.postgresql.core.PGStream.&lt;init&gt;(PGStream.java:70)\r\n\t    at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:91)\r\n\t    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:192)\r\n\t    ... 87 common frames omitted\r\n\t03:28:47.447 [main] WARN  org.springframework.boot.autoconfigure.orm.jpa.DatabaseLookup - Unable to determine jdbc url from datasource\r\n\torg.springframework.jdbc.support.MetaDataAccessException: Could not get Connection for extracting meta-data; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is org.postgresql.util.PSQLException: The connection attempt failed.\r\n\t    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:328)\r\n\t    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:356)\r\n\t    at org.springframework.boot.autoconfigure.orm.jpa.DatabaseLookup.getDatabase(DatabaseLookup.java:73)\r\n\t    at org.springframework.boot.autoconfigure.orm.jpa.JpaProperties.determineDatabase(JpaProperties.java:142)\r\n\t    at org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.jpaVendorAdapter(JpaBaseConfiguration.java:112)\r\n\t    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration$$EnhancerBySpringCGLIB$$671956e6.CGLIB$jpaVendorAdapter$8(&lt;generated&gt;)\r\n\t    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration$$EnhancerBySpringCGLIB$$671956e6$$FastClassBySpringCGLIB$$1c2ee8aa.invoke(&lt;generated&gt;)\r\n\t    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\r\n\t    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363)\r\n\t    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration$$EnhancerBySpringCGLIB$$671956e6.jpaVendorAdapter(&lt;generated&gt;)\r\n\t    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\t    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\t    at java.lang.reflect.Method.invoke(Unknown Source)\r\n\t    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n\t    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622)\r\n\t    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n\t    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\t    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\r\n\t    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1244)\r\n\t    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)\r\n\t    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)\r\n\t    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)\r\n\t    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n\t    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\t    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\r\n\t    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1244)\r\n\t    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)\r\n\t    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)\r\n\t    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)\r\n\t    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)\r\n\t    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n\t    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n\t    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\t    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1083)\r\n\t    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:853)\r\n\t    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)\r\n\t    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)\r\n\t    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)\r\n\t    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)\r\n\t    at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)\r\n\t    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)\r\n\t    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)\r\n\t    at me.socialmall.basic.Application.main(Application.java:10)\r\n\t    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\t    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\t    at java.lang.reflect.Method.invoke(Unknown Source)\r\n\t    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48)\r\n\t    at org.springframework.boot.loader.Launcher.launch(Launcher.java:87)\r\n\t    at org.springframework.boot.loader.Launcher.launch(Launcher.java:50)\r\n\t    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51)\r\n\tCaused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is org.postgresql.util.PSQLException: The connection attempt failed.\r\n\t    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)\r\n\t    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:319)\r\n\t    ... 70 common frames omitted\r\n\tCaused by: org.postgresql.util.PSQLException: The connection attempt failed.\r\n\t    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:292)\r\n\t    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49)\r\n\t    at org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:195)\r\n\t    at org.postgresql.Driver.makeConnection(Driver.java:454)\r\n\t    at org.postgresql.Driver.connect(Driver.java:256)\r\n\t    at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:319)\r\n\t    at org.apache.tomcat.jdbc.pool.PooledConnection.connect(PooledConnection.java:212)\r\n\t    at org.apache.tomcat.jdbc.pool.ConnectionPool.createConnection(ConnectionPool.java:739)\r\n\t    at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:671)\r\n\t    at org.apache.tomcat.jdbc.pool.ConnectionPool.init(ConnectionPool.java:483)\r\n\t    at org.apache.tomcat.jdbc.pool.ConnectionPool.&lt;init&gt;(ConnectionPool.java:154)\r\n\t    at org.apache.tomcat.jdbc.pool.DataSourceProxy.pCreatePool(DataSourceProxy.java:118)\r\n\t    at org.apache.tomcat.jdbc.pool.DataSourceProxy.createPool(DataSourceProxy.java:107)\r\n\t    at org.apache.tomcat.jdbc.pool.DataSourceProxy.getConnection(DataSourceProxy.java:131)\r\n\t    at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:157)\r\n\t    at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:115)\r\n\t    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:78)\r\n\t    ... 71 common frames omitted\r\n\tCaused by: java.net.UnknownHostException: login:shadow@127.0.0.1\r\n\t    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)\r\n\t    at java.net.PlainSocketImpl.connect(Unknown Source)\r\n\t    at java.net.SocksSocketImpl.connect(Unknown Source)\r\n\t    at java.net.Socket.connect(Unknown Source)\r\n\t    at org.postgresql.core.PGStream.&lt;init&gt;(PGStream.java:70)\r\n\t    at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:91)\r\n\t    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:192)\r\n\t    ... 87 common frames omitted\r\n\r\nRelated dependencies in **pom.xml**:\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;exclusions&gt;\r\n\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t&lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\r\n\t\t\t&lt;/exclusion&gt;\r\n\t\t&lt;/exclusions&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nRelated configurations in **application.properties**:\r\n\r\n\tspring.datasource.password=${POSTGRES_PASSWORD}\r\n\tspring.datasource.type=org.apache.tomcat.jdbc.pool.DataSource\r\n\tspring.datasource.url=jdbc:${POSTGRES_URL}\r\n\tspring.datasource.username=${POSTGRES_USER}\r\n\tspring.datasource.tomcat.default-auto-commit=false\r\n\tspring.datasource.tomcat.default-catalog=${POSTGRES_DATABASE}\r\n\tspring.datasource.tomcat.rollback-on-return=true\r\n\tspring.datasource.tomcat.initial-size=10\r\n\tspring.datasource.tomcat.max-active=20\r\n\tspring.datasource.tomcat.max-idle=10\r\n\tspring.datasource.tomcat.min-idle=5\r\n\tspring.datasource.tomcat.max-wait=10000\r\n\tspring.datasource.tomcat.validation-query=SELECT NULL\r\n\tspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQL95Dialect\r\n\tspring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\r\n\tspring.jpa.show-sql=true\r\n\r\nThis project is hosted on [Heroku][2] hence we need the **.env** file to provide environment variables during development:\r\n\r\n\tPOSTGRES_USER=(Login username of the database)\r\n\tPOSTGRES_PASSWORD=(Login password of the database)\r\n\tPOSTGRES_DATABASE=(Name of the database)\r\n\tPOSTGRES_URL=postgresql://(Login username of the database):(Login password of the database)@127.0.0.1:5432/(Name of the database)\r\n\r\nI&#39;ve tried many different approaches and with no luck, please help.\r\n\r\n  [1]: https://www.baeldung.com/spring-boot-tomcat-connection-pool\r\n  [2]: https://www.heroku.com/","title":"org.apache.tomcat.jdbc.pool.ConnectionPool - Unable to create initial connections of pool","body":"<p>I'm working on a Spring Boot based project which incorporates a Tomcat Connection Pool (instead of the default Hikari). I've done everything according to this <a href=\"https://www.baeldung.com/spring-boot-tomcat-connection-pool\" rel=\"nofollow noreferrer\">article</a> and it works as expected, although when I change  from MySQL to PostgreSQL, it just won't work; here's the stack traces:</p>\n\n<pre><code>03:28:47.399 [main] ERROR org.apache.tomcat.jdbc.pool.ConnectionPool - Unable to create initial connections of pool.\norg.postgresql.util.PSQLException: The connection attempt failed.\n    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:292)\n    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49)\n    at org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:195)\n    at org.postgresql.Driver.makeConnection(Driver.java:454)\n    at org.postgresql.Driver.connect(Driver.java:256)\n    at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:319)\n    at org.apache.tomcat.jdbc.pool.PooledConnection.connect(PooledConnection.java:212)\n    at org.apache.tomcat.jdbc.pool.ConnectionPool.createConnection(ConnectionPool.java:739)\n    at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:671)\n    at org.apache.tomcat.jdbc.pool.ConnectionPool.init(ConnectionPool.java:483)\n    at org.apache.tomcat.jdbc.pool.ConnectionPool.&lt;init&gt;(ConnectionPool.java:154)\n    at org.apache.tomcat.jdbc.pool.DataSourceProxy.pCreatePool(DataSourceProxy.java:118)\n    at org.apache.tomcat.jdbc.pool.DataSourceProxy.createPool(DataSourceProxy.java:107)\n    at org.apache.tomcat.jdbc.pool.DataSourceProxy.getConnection(DataSourceProxy.java:131)\n    at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:157)\n    at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:115)\n    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:78)\n    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:319)\n    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:356)\n    at org.springframework.boot.autoconfigure.orm.jpa.DatabaseLookup.getDatabase(DatabaseLookup.java:73)\n    at org.springframework.boot.autoconfigure.orm.jpa.JpaProperties.determineDatabase(JpaProperties.java:142)\n    at org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.jpaVendorAdapter(JpaBaseConfiguration.java:112)\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration$$EnhancerBySpringCGLIB$$671956e6.CGLIB$jpaVendorAdapter$8(&lt;generated&gt;)\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration$$EnhancerBySpringCGLIB$$671956e6$$FastClassBySpringCGLIB$$1c2ee8aa.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363)\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration$$EnhancerBySpringCGLIB$$671956e6.jpaVendorAdapter(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1244)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1244)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1083)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:853)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)\n    at me.socialmall.basic.Application.main(Application.java:10)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:87)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:50)\n    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51)\nCaused by: java.net.UnknownHostException: login:shadow@127.0.0.1\n    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)\n    at java.net.PlainSocketImpl.connect(Unknown Source)\n    at java.net.SocksSocketImpl.connect(Unknown Source)\n    at java.net.Socket.connect(Unknown Source)\n    at org.postgresql.core.PGStream.&lt;init&gt;(PGStream.java:70)\n    at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:91)\n    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:192)\n    ... 87 common frames omitted\n03:28:47.447 [main] WARN  org.springframework.boot.autoconfigure.orm.jpa.DatabaseLookup - Unable to determine jdbc url from datasource\norg.springframework.jdbc.support.MetaDataAccessException: Could not get Connection for extracting meta-data; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is org.postgresql.util.PSQLException: The connection attempt failed.\n    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:328)\n    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:356)\n    at org.springframework.boot.autoconfigure.orm.jpa.DatabaseLookup.getDatabase(DatabaseLookup.java:73)\n    at org.springframework.boot.autoconfigure.orm.jpa.JpaProperties.determineDatabase(JpaProperties.java:142)\n    at org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.jpaVendorAdapter(JpaBaseConfiguration.java:112)\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration$$EnhancerBySpringCGLIB$$671956e6.CGLIB$jpaVendorAdapter$8(&lt;generated&gt;)\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration$$EnhancerBySpringCGLIB$$671956e6$$FastClassBySpringCGLIB$$1c2ee8aa.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363)\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration$$EnhancerBySpringCGLIB$$671956e6.jpaVendorAdapter(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1244)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1244)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1083)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:853)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)\n    at me.socialmall.basic.Application.main(Application.java:10)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:87)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:50)\n    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51)\nCaused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is org.postgresql.util.PSQLException: The connection attempt failed.\n    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)\n    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:319)\n    ... 70 common frames omitted\nCaused by: org.postgresql.util.PSQLException: The connection attempt failed.\n    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:292)\n    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49)\n    at org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:195)\n    at org.postgresql.Driver.makeConnection(Driver.java:454)\n    at org.postgresql.Driver.connect(Driver.java:256)\n    at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:319)\n    at org.apache.tomcat.jdbc.pool.PooledConnection.connect(PooledConnection.java:212)\n    at org.apache.tomcat.jdbc.pool.ConnectionPool.createConnection(ConnectionPool.java:739)\n    at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:671)\n    at org.apache.tomcat.jdbc.pool.ConnectionPool.init(ConnectionPool.java:483)\n    at org.apache.tomcat.jdbc.pool.ConnectionPool.&lt;init&gt;(ConnectionPool.java:154)\n    at org.apache.tomcat.jdbc.pool.DataSourceProxy.pCreatePool(DataSourceProxy.java:118)\n    at org.apache.tomcat.jdbc.pool.DataSourceProxy.createPool(DataSourceProxy.java:107)\n    at org.apache.tomcat.jdbc.pool.DataSourceProxy.getConnection(DataSourceProxy.java:131)\n    at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:157)\n    at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:115)\n    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:78)\n    ... 71 common frames omitted\nCaused by: java.net.UnknownHostException: login:shadow@127.0.0.1\n    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)\n    at java.net.PlainSocketImpl.connect(Unknown Source)\n    at java.net.SocksSocketImpl.connect(Unknown Source)\n    at java.net.Socket.connect(Unknown Source)\n    at org.postgresql.core.PGStream.&lt;init&gt;(PGStream.java:70)\n    at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:91)\n    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:192)\n    ... 87 common frames omitted\n</code></pre>\n\n<p>Related dependencies in <strong>pom.xml</strong>:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n    &lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n    &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\n            &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Related configurations in <strong>application.properties</strong>:</p>\n\n<pre><code>spring.datasource.password=${POSTGRES_PASSWORD}\nspring.datasource.type=org.apache.tomcat.jdbc.pool.DataSource\nspring.datasource.url=jdbc:${POSTGRES_URL}\nspring.datasource.username=${POSTGRES_USER}\nspring.datasource.tomcat.default-auto-commit=false\nspring.datasource.tomcat.default-catalog=${POSTGRES_DATABASE}\nspring.datasource.tomcat.rollback-on-return=true\nspring.datasource.tomcat.initial-size=10\nspring.datasource.tomcat.max-active=20\nspring.datasource.tomcat.max-idle=10\nspring.datasource.tomcat.min-idle=5\nspring.datasource.tomcat.max-wait=10000\nspring.datasource.tomcat.validation-query=SELECT NULL\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQL95Dialect\nspring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\nspring.jpa.show-sql=true\n</code></pre>\n\n<p>This project is hosted on <a href=\"https://www.heroku.com/\" rel=\"nofollow noreferrer\">Heroku</a> hence we need the <strong>.env</strong> file to provide environment variables during development:</p>\n\n<pre><code>POSTGRES_USER=(Login username of the database)\nPOSTGRES_PASSWORD=(Login password of the database)\nPOSTGRES_DATABASE=(Name of the database)\nPOSTGRES_URL=postgresql://(Login username of the database):(Login password of the database)@127.0.0.1:5432/(Name of the database)\n</code></pre>\n\n<p>I've tried many different approaches and with no luck, please help.</p>\n"},{"tags":["java","syntax","functional-programming"],"comments":[{"owner":{"account_id":4541793,"reputation":26875,"user_id":3689450,"display_name":"VLAZ"},"score":1,"creation_date":1676227621,"post_id":75429317,"comment_id":133090789,"body_markdown":"How exactly do you have a property which is also generic? If that was possible then `Collections.EMPTY_LIST` wouldn&#39;t be obsolete in favour of `Collections.emptyList()`","body":"How exactly do you have a property which is also generic? If that was possible then <code>Collections.EMPTY_LIST</code> wouldn&#39;t be obsolete in favour of <code>Collections.emptyList()</code>"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":2,"creation_date":1676246003,"post_id":75429317,"comment_id":133093618,"body_markdown":"Seems like an XY problem. What are you *actually* wanting to achieve?","body":"Seems like an XY problem. What are you <i>actually</i> wanting to achieve?"},{"owner":{"account_id":1109371,"reputation":14160,"user_id":1100135,"accept_rate":53,"display_name":"piotrek"},"score":0,"creation_date":1676283215,"post_id":75429317,"comment_id":133099209,"body_markdown":"i want to have a function that transforms a stream (any stream) and i need only one such function. so i wonder if i can have it in a field instead of creating new one with each invocation (like the identity function)","body":"i want to have a function that transforms a stream (any stream) and i need only one such function. so i wonder if i can have it in a field instead of creating new one with each invocation (like the identity function)"}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676301269,"creation_date":1676300904,"answer_id":75437690,"question_id":75429317,"body_markdown":"The `identity()` function returns a lambda and is not using `new xxxx`. I think the JDK implementation can determine what definition is returned, it isn&#39;t necessarily returning a new function each time as you suggest. \r\n\r\nConsider this method:\r\n\r\n    public static void main(String...  args) {\r\n        Function&lt;String,String&gt; f = Function.identity();\r\n        Function&lt;Integer,Integer&gt; g = Function.identity();\r\n        Function&lt;String,String&gt; h = Function.identity();\r\n\r\n        System.out.println(&quot;f=&quot;+f+ &quot; hc=&quot;+System.identityHashCode(f));\r\n        System.out.println(&quot;g=&quot;+f+ &quot; hc=&quot;+System.identityHashCode(g));\r\n        System.out.println(&quot;h=&quot;+f+ &quot; hc=&quot;+System.identityHashCode(h));\r\n        System.out.println(&quot;f.equals(g)=&quot;+f.equals(g));\r\n        System.out.println(&quot;(f == h)=&quot;+(f == h));\r\n    }\r\n\r\nOn my Windows and Linux JDK (19+20) this prints something like below which confirms same hashCode / reference from multiple calls to `identity()`:\r\n\r\n    f=java.util.function.Function$$Lambda$1/0x00000008010410f0@3a71f4dd hc=980546781\r\n    g=java.util.function.Function$$Lambda$1/0x00000008010410f0@3a71f4dd hc=980546781\r\n    h=java.util.function.Function$$Lambda$1/0x00000008010410f0@3a71f4dd hc=980546781\r\n    f.equals(g)=true\r\n    (f == h)=true\r\n\r\nSo, for these JDKs at least, there would be no point assigning the lambda as a field value in place of just calling `Function.identity()` directly.","title":"Is it possible to declare identity function as a field in Java?","body":"<p>The <code>identity()</code> function returns a lambda and is not using <code>new xxxx</code>. I think the JDK implementation can determine what definition is returned, it isn't necessarily returning a new function each time as you suggest.</p>\n<p>Consider this method:</p>\n<pre><code>public static void main(String...  args) {\n    Function&lt;String,String&gt; f = Function.identity();\n    Function&lt;Integer,Integer&gt; g = Function.identity();\n    Function&lt;String,String&gt; h = Function.identity();\n\n    System.out.println(&quot;f=&quot;+f+ &quot; hc=&quot;+System.identityHashCode(f));\n    System.out.println(&quot;g=&quot;+f+ &quot; hc=&quot;+System.identityHashCode(g));\n    System.out.println(&quot;h=&quot;+f+ &quot; hc=&quot;+System.identityHashCode(h));\n    System.out.println(&quot;f.equals(g)=&quot;+f.equals(g));\n    System.out.println(&quot;(f == h)=&quot;+(f == h));\n}\n</code></pre>\n<p>On my Windows and Linux JDK (19+20) this prints something like below which confirms same hashCode / reference from multiple calls to <code>identity()</code>:</p>\n<pre><code>f=java.util.function.Function$$Lambda$1/0x00000008010410f0@3a71f4dd hc=980546781\ng=java.util.function.Function$$Lambda$1/0x00000008010410f0@3a71f4dd hc=980546781\nh=java.util.function.Function$$Lambda$1/0x00000008010410f0@3a71f4dd hc=980546781\nf.equals(g)=true\n(f == h)=true\n</code></pre>\n<p>So, for these JDKs at least, there would be no point assigning the lambda as a field value in place of just calling <code>Function.identity()</code> directly.</p>\n"},{"tags":[],"owner":{"account_id":30898,"reputation":8917,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676372401,"creation_date":1676372401,"answer_id":75446868,"question_id":75429317,"body_markdown":"You can&#39;t have generic fields in Java. If you really wanted to use a field for the identity function then you could do something like the following:\r\n\r\n```java\r\nprivate static final Function&lt;Object, Object&gt; IDENTITY = x -&gt; x;\r\n\r\npublic static &lt;T&gt; Function&lt;T, T&gt; identity() {\r\n    return (Function&lt;T, T&gt;)IDENTITY;\r\n}\r\n\r\npublic static void main(String[] args) {\r\n    System.out.println(identity().apply(1));\r\n    System.out.println(identity().apply(&quot;one&quot;));\r\n}\r\n```\r\n\r\nhowever, as DuncG notes, there would be no benefit in doing so.","title":"Is it possible to declare identity function as a field in Java?","body":"<p>You can't have generic fields in Java. If you really wanted to use a field for the identity function then you could do something like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final Function&lt;Object, Object&gt; IDENTITY = x -&gt; x;\n\npublic static &lt;T&gt; Function&lt;T, T&gt; identity() {\n    return (Function&lt;T, T&gt;)IDENTITY;\n}\n\npublic static void main(String[] args) {\n    System.out.println(identity().apply(1));\n    System.out.println(identity().apply(&quot;one&quot;));\n}\n</code></pre>\n<p>however, as DuncG notes, there would be no benefit in doing so.</p>\n"}],"owner":{"account_id":1109371,"reputation":14160,"user_id":1100135,"accept_rate":53,"display_name":"piotrek"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1676372401,"creation_date":1676227306,"question_id":75429317,"body_markdown":"Currently identity function `java.util.function.Function#identity` is declared as a method that on each invocation returns new function.\r\n```\r\nstatic &lt;T&gt; Function&lt;T, T&gt; identity() {\r\n        return t -&gt; t;\r\n}\r\n```\r\n\r\nIs it possible to declare it as a field and still keep generics?","title":"Is it possible to declare identity function as a field in Java?","body":"<p>Currently identity function <code>java.util.function.Function#identity</code> is declared as a method that on each invocation returns new function.</p>\n<pre><code>static &lt;T&gt; Function&lt;T, T&gt; identity() {\n        return t -&gt; t;\n}\n</code></pre>\n<p>Is it possible to declare it as a field and still keep generics?</p>\n"},{"tags":["java","excel","pdf","report"],"comments":[{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1676373190,"post_id":75446806,"comment_id":133119787,"body_markdown":"Great! What did you&#39;ve tried so far and what problem do you have?","body":"Great! What did you&#39;ve tried so far and what problem do you have?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1676373691,"post_id":75446806,"comment_id":133119947,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":27782447,"reputation":1,"user_id":21210559,"display_name":"vivi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676372053,"creation_date":1676372053,"question_id":75446806,"body_markdown":"I have more than a dozen different template reports, including many tables, column -shaped or fan -shaped, whether there are some tools or jars that can be exported easily. I need to use Java to achieve it.\r\n\r\nThe data will be prepared. no need java code to handle","title":"How to export the complex report to PDF or Excel","body":"<p>I have more than a dozen different template reports, including many tables, column -shaped or fan -shaped, whether there are some tools or jars that can be exported easily. I need to use Java to achieve it.</p>\n<p>The data will be prepared. no need java code to handle</p>\n"},{"tags":["java","c#",".net","hash"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1542079471,"post_id":53273279,"comment_id":93429573,"body_markdown":"Java doesn&#39;t make any guarantee that distinct objects will have distinct hash codes.","body":"Java doesn&#39;t make any guarantee that distinct objects will have distinct hash codes."},{"owner":{"account_id":364905,"reputation":18691,"user_id":709537,"accept_rate":72,"display_name":"Evgeniy Berezovsky"},"score":0,"creation_date":1542079671,"post_id":53273279,"comment_id":93429609,"body_markdown":"@shmosel The docs don&#39;t guarantee, but Oracle&#39;s comment to the bug report I quoted does say as much.","body":"@shmosel The docs don&#39;t guarantee, but Oracle&#39;s comment to the bug report I quoted does say as much."},{"owner":{"account_id":15904,"reputation":23418,"user_id":34092,"display_name":"mjwills"},"score":1,"creation_date":1542079717,"post_id":53273279,"comment_id":93429626,"body_markdown":"Guarantees are not the same as implementation details.","body":"Guarantees are not the same as implementation details."},{"owner":{"account_id":3557648,"reputation":8235,"user_id":2970960,"accept_rate":43,"display_name":"Jai"},"score":0,"creation_date":1542079800,"post_id":53273279,"comment_id":93429641,"body_markdown":"No, the hash method returns an `int` (32-bit value) which is normally beyond the address range that the heap memory size can allocate. This will cause objects at diff memory to return the same `int` value.","body":"No, the hash method returns an <code>int</code> (32-bit value) which is normally beyond the address range that the heap memory size can allocate. This will cause objects at diff memory to return the same <code>int</code> value."},{"owner":{"account_id":364905,"reputation":18691,"user_id":709537,"accept_rate":72,"display_name":"Evgeniy Berezovsky"},"score":0,"creation_date":1542079931,"post_id":53273279,"comment_id":93429663,"body_markdown":"@mjwills Re: your first comment: It will allow me to write a `int CompareTo(X other)` that falls back to `RuntimeHelpers.GetHashCode(this) - RuntimeHelpers.GetHashCode(other)` to get a stable sort.","body":"@mjwills Re: your first comment: It will allow me to write a <code>int CompareTo(X other)</code> that falls back to <code>RuntimeHelpers.GetHashCode(this) - RuntimeHelpers.GetHashCode(other)</code> to get a stable sort."},{"owner":{"account_id":15904,"reputation":23418,"user_id":34092,"display_name":"mjwills"},"score":0,"creation_date":1542080430,"post_id":53273279,"comment_id":93429765,"body_markdown":"Sure - but I suspect it is the best that you have. An alternative, when sorting, is to do a projection including the original index and then sort by the value **then the index**.","body":"Sure - but I suspect it is the best that you have. An alternative, when sorting, is to do a projection including the original index and then sort by the value <b>then the index</b>."},{"owner":{"account_id":15904,"reputation":23418,"user_id":34092,"display_name":"mjwills"},"score":1,"creation_date":1542080995,"post_id":53273279,"comment_id":93429875,"body_markdown":"Why would you remove the `I am trying to build a stable sort algorithm.` statement I added to your post? It really gave useful context to your problem.","body":"Why would you remove the <code>I am trying to build a stable sort algorithm.</code> statement I added to your post? It really gave useful context to your problem."},{"owner":{"account_id":15904,"reputation":23418,"user_id":34092,"display_name":"mjwills"},"score":1,"creation_date":1542081389,"post_id":53273279,"comment_id":93429968,"body_markdown":"I also suspect you are misunderstanding how Java does this. It does guarantee that a hash code will not change for an object (as per https://stackoverflow.com/questions/3796699/will-hashcode-return-a-different-int-due-to-compaction-of-tenure-space). But if a GC occurs, memory is compacted and an object is moved elsewhere then nothing stops a new instance of the type occupying the same memory address as the &#39;original&#39; object. Then, you will have two objects with the same hashcode. As such, you can&#39;t state `In addition to that, there will not be hash collisions between any two living objects`.","body":"I also suspect you are misunderstanding how Java does this. It does guarantee that a hash code will not change for an object (as per <a href=\"https://stackoverflow.com/questions/3796699/will-hashcode-return-a-different-int-due-to-compaction-of-tenure-space\" title=\"will hashcode return a different int due to compaction of tenure space\">stackoverflow.com/questions/3796699/&hellip;</a>). But if a GC occurs, memory is compacted and an object is moved elsewhere then nothing stops a new instance of the type occupying the same memory address as the &#39;original&#39; object. Then, you will have two objects with the same hashcode. As such, you can&#39;t state <code>In addition to that, there will not be hash collisions between any two living objects</code>."},{"owner":{"account_id":3557648,"reputation":8235,"user_id":2970960,"accept_rate":43,"display_name":"Jai"},"score":1,"creation_date":1542085410,"post_id":53273279,"comment_id":93430869,"body_markdown":"While Java&#39;s `Object#hashCode()` and `System.identifyHashCode()` guarantees that the value it returns for a particular *instance* would never change, it does not mention that it would return a unique value for each object. In fact, it only returns the trailing 32-bit memory address in the heap of the object - this means that `0x 0 FFFF FFFF` and `0x 1 FFFF FFFF` would both return `0x FFFF FFFF`. You can modify the bug report&#39;s example, such that you make a static list to store the `obj` to prevent GC, collision *will* still occur.","body":"While Java&#39;s <code>Object#hashCode()</code> and <code>System.identifyHashCode()</code> guarantees that the value it returns for a particular <i>instance</i> would never change, it does not mention that it would return a unique value for each object. In fact, it only returns the trailing 32-bit memory address in the heap of the object - this means that <code>0x 0 FFFF FFFF</code> and <code>0x 1 FFFF FFFF</code> would both return <code>0x FFFF FFFF</code>. You can modify the bug report&#39;s example, such that you make a static list to store the <code>obj</code> to prevent GC, collision <i>will</i> still occur."},{"owner":{"account_id":15904,"reputation":23418,"user_id":34092,"display_name":"mjwills"},"score":0,"creation_date":1542088161,"post_id":53273279,"comment_id":93431685,"body_markdown":"`so it will always be the same for the same object, no matter if the object is mutated between calls` I am not sure this is true either - https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29 (&quot;provided no information used in equals comparisons on the object is modified&quot; means that the hash code **can** change if the object is mutated)","body":"<code>so it will always be the same for the same object, no matter if the object is mutated between calls</code> I am not sure this is true either - <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/lang/&hellip;</a> (&quot;provided no information used in equals comparisons on the object is modified&quot; means that the hash code <b>can</b> change if the object is mutated)"}],"answers":[{"tags":[],"owner":{"account_id":7389276,"reputation":3320,"user_id":5623232,"display_name":"NPras"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1542083059,"creation_date":1542083059,"answer_id":53273782,"question_id":53273279,"body_markdown":"I would refer you to the [following answer from Eric Lippert][1] (who was part of the C# language design &amp; compiler team) where he suggested using ObjectIDGenerator. \r\n\r\n&gt; To generate unique ids for objects you could use the aptly named `ObjectIDGenerator` that we conveniently provide for you\r\n\r\n[Looking at the reference source][2] (good thing they open-sourced the framework now), it does use `RuntimeHelpers.GetHashCode()` but also handles the potential collision by storing the references separately.\r\n\r\n**Do note his warning about object lifetime.**  If you need it for transient objects, he suggested you reimplement the generator - which is now much easier that you have access to the source.\r\n\r\n  [1]: https://stackoverflow.com/a/4854959/5623232\r\n  [2]: https://referencesource.microsoft.com/#mscorlib/system/runtime/serialization/objectidgenerator.cs","title":".Net equivalent of Java&#39;s System.identityHashCode()","body":"<p>I would refer you to the <a href=\"https://stackoverflow.com/a/4854959/5623232\">following answer from Eric Lippert</a> (who was part of the C# language design &amp; compiler team) where he suggested using ObjectIDGenerator. </p>\n\n<blockquote>\n  <p>To generate unique ids for objects you could use the aptly named <code>ObjectIDGenerator</code> that we conveniently provide for you</p>\n</blockquote>\n\n<p><a href=\"https://referencesource.microsoft.com/#mscorlib/system/runtime/serialization/objectidgenerator.cs\" rel=\"nofollow noreferrer\">Looking at the reference source</a> (good thing they open-sourced the framework now), it does use <code>RuntimeHelpers.GetHashCode()</code> but also handles the potential collision by storing the references separately.</p>\n\n<p><strong>Do note his warning about object lifetime.</strong>  If you need it for transient objects, he suggested you reimplement the generator - which is now much easier that you have access to the source.</p>\n"},{"tags":[],"owner":{"account_id":3557648,"reputation":8235,"user_id":2970960,"accept_rate":43,"display_name":"Jai"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1542087467,"creation_date":1542087467,"answer_id":53274486,"question_id":53273279,"body_markdown":"Currently Java&#39;s `Object#hashCode()` and `System#identifyHashCode()` do **not** ensure unique values to be returned. There is already questions on this, and [this](https://stackoverflow.com/questions/1381060/hashcode-uniqueness) is an example.\r\n\r\nYou have mentioned a bug report which states that collision occurred *because* objects were garbage collected, and the same memory address is reused. However modifying the same test case would prove otherwise:\r\n\r\n    List&lt;Object&gt; allObjs = new ArrayList&lt;&gt;(); // Used to prevent GC\r\n\tSet&lt;Integer&gt; hashes = new HashSet&lt;Integer&gt;(1024);\r\n\r\n\tint colls = 0;\r\n\tfor (int n = 0; n &lt; 100000; n++)\r\n\t{\r\n\t\tInteger obj = new Integer(88);\r\n\t\tallObjs.add(obj); // keep a strong reference to prevent GC\r\n\t\tint ihash = System.identityHashCode(obj);\r\n\t\tInteger iho = Integer.valueOf(ihash);\r\n\t\tif (hashes.contains(iho))\r\n\t\t{\r\n\t\t\tSystem.err.println(&quot;System.identityHashCode() collision!&quot;);\r\n\t\t\tcolls++;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\thashes.add(iho);\r\n\t\t}\r\n\t}\r\n\r\n\tSystem.out.println(&quot;created 100000 different objects - &quot;\r\n\t\t\t+ colls\r\n\t\t\t+ &quot; times with the same value for System.identityHashCode()&quot;);\r\n\r\n\tSystem.out.println(&quot;Size of all objects is &quot; + allObjs.size());\r\n\tSystem.out.println(&quot;Size of hashset of hash values is &quot; + hashes.size());\r\n\r\n\r\nResult:\r\n\r\n    System.identityHashCode() collision!\r\n    System.identityHashCode() collision!\r\n    System.identityHashCode() collision!\r\n    created 100000 different objects - 3 times with the same value for System.identityHashCode()\r\n    Size of all objects is 100000\r\n    Size of hashset of hash values is 99997\r\n\r\nIn the linked SO question, it was also mentioned that in some implementations of JRE, the rate of collision is *greatly reduced*. However, it does seem like no implementation has managed to prevent *all* collisions. Therefore, there is no way of ensuring uniqueness of hash codes even in Java.\r\n\r\nTherefore, don&#39;t simply believe based on one source. The person commenting it is also just a member of the Oracle team, and he or she is most likely not the person designing this.\r\n\r\nIn both C# and Java, you would have to create your own unique number generator of some kind. So the [solution](https://stackoverflow.com/a/53273782/2970960) provided by NPras seems to do that for .NET.","title":".Net equivalent of Java&#39;s System.identityHashCode()","body":"<p>Currently Java's <code>Object#hashCode()</code> and <code>System#identifyHashCode()</code> do <strong>not</strong> ensure unique values to be returned. There is already questions on this, and <a href=\"https://stackoverflow.com/questions/1381060/hashcode-uniqueness\">this</a> is an example.</p>\n\n<p>You have mentioned a bug report which states that collision occurred <em>because</em> objects were garbage collected, and the same memory address is reused. However modifying the same test case would prove otherwise:</p>\n\n<pre><code>List&lt;Object&gt; allObjs = new ArrayList&lt;&gt;(); // Used to prevent GC\nSet&lt;Integer&gt; hashes = new HashSet&lt;Integer&gt;(1024);\n\nint colls = 0;\nfor (int n = 0; n &lt; 100000; n++)\n{\n    Integer obj = new Integer(88);\n    allObjs.add(obj); // keep a strong reference to prevent GC\n    int ihash = System.identityHashCode(obj);\n    Integer iho = Integer.valueOf(ihash);\n    if (hashes.contains(iho))\n    {\n        System.err.println(\"System.identityHashCode() collision!\");\n        colls++;\n    }\n    else\n    {\n        hashes.add(iho);\n    }\n}\n\nSystem.out.println(\"created 100000 different objects - \"\n        + colls\n        + \" times with the same value for System.identityHashCode()\");\n\nSystem.out.println(\"Size of all objects is \" + allObjs.size());\nSystem.out.println(\"Size of hashset of hash values is \" + hashes.size());\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>System.identityHashCode() collision!\nSystem.identityHashCode() collision!\nSystem.identityHashCode() collision!\ncreated 100000 different objects - 3 times with the same value for System.identityHashCode()\nSize of all objects is 100000\nSize of hashset of hash values is 99997\n</code></pre>\n\n<p>In the linked SO question, it was also mentioned that in some implementations of JRE, the rate of collision is <em>greatly reduced</em>. However, it does seem like no implementation has managed to prevent <em>all</em> collisions. Therefore, there is no way of ensuring uniqueness of hash codes even in Java.</p>\n\n<p>Therefore, don't simply believe based on one source. The person commenting it is also just a member of the Oracle team, and he or she is most likely not the person designing this.</p>\n\n<p>In both C# and Java, you would have to create your own unique number generator of some kind. So the <a href=\"https://stackoverflow.com/a/53273782/2970960\">solution</a> provided by NPras seems to do that for .NET.</p>\n"},{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676371910,"creation_date":1668501003,"answer_id":74442591,"question_id":53273279,"body_markdown":"## To cut a long story short:\r\n\r\nThe equivalent to Java&#39;s `System.identityHashCode( Object obj )` in DotNet is `System.Runtime.CompilerServices.RuntimeHelpers.GetHashCode( object obj )`.\r\n","title":".Net equivalent of Java&#39;s System.identityHashCode()","body":"<h2>To cut a long story short:</h2>\n<p>The equivalent to Java's <code>System.identityHashCode( Object obj )</code> in DotNet is <code>System.Runtime.CompilerServices.RuntimeHelpers.GetHashCode( object obj )</code>.</p>\n"}],"owner":{"account_id":364905,"reputation":18691,"user_id":709537,"accept_rate":72,"display_name":"Evgeniy Berezovsky"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":916,"favorite_count":0,"down_vote_count":2,"up_vote_count":6,"accepted_answer_id":53274486,"answer_count":3,"score":4,"last_activity_date":1676371910,"creation_date":1542078967,"question_id":53273279,"body_markdown":"Java&#39;s [`System.identityHashCode()`](https://docs.oracle.com/javase/10/docs/api/java/lang/System.html#identityHashCode(java.lang.Object))\r\n\r\n&gt; Returns the same hash code for the given object as would be returned\r\n&gt; by the default method hashCode(), whether or not the given object&#39;s\r\n&gt; class overrides hashCode().\r\n\r\nThat hash code is based on the object identity, so it will always be the same for the same object, no matter if the object is mutated between calls to `identityHashCode()`.\r\n\r\n&lt;strike&gt;In addition to that, there will not be hash collisions between any two living objects (with some Java runtimes):&lt;/strike&gt; (the former is an inaccurate statement by Oracle in the source given below, as Jai&#39;s answer shows, and as [another bug report](https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6321873) points out as well - which basically invalidates my original question...)\r\n\r\n&gt; [...] garbage objects are readily reclaimed and the address space is\r\n&gt; reused. The collisons result from address space reuse. If the original\r\n&gt; object remains live (not GCed) then you will not encounter this\r\n&gt; problem.\r\n\r\n[Source](https://bugs.java.com/view_bug.do?bug_id=6809470)\r\n\r\nIn .Net, there is [`RuntimeHelpers.GetHashCode()`](https://learn.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.runtimehelpers.gethashcode?view=netframework-4.7.2), which fulfills the first condition, but not the second:\r\n\r\n&gt; Note that GetHashCode always returns identical hash codes for equal object references. However, the reverse is not true: equal hash codes do not indicate equal object references. A particular hash code value is not unique to a particular object reference; different object references can generate identical hash codes.\r\n\r\nSo is there anything like Java&#39;s `identityHashCode()` in .Net?\r\n\r\n**Edit:**\r\n\r\nIt was suggested that this is the same as https://stackoverflow.com/questions/4994277 which it is not, as the memory address cannot be used here (solely), as memory management moves objects around, hence the address may change during the lifetime of an object.\r\n","title":".Net equivalent of Java&#39;s System.identityHashCode()","body":"<p>Java's <a href=\"https://docs.oracle.com/javase/10/docs/api/java/lang/System.html#identityHashCode(java.lang.Object)\" rel=\"nofollow noreferrer\"><code>System.identityHashCode()</code></a></p>\n\n<blockquote>\n  <p>Returns the same hash code for the given object as would be returned\n  by the default method hashCode(), whether or not the given object's\n  class overrides hashCode().</p>\n</blockquote>\n\n<p>That hash code is based on the object identity, so it will always be the same for the same object, no matter if the object is mutated between calls to <code>identityHashCode()</code>.</p>\n\n<p><strike>In addition to that, there will not be hash collisions between any two living objects (with some Java runtimes):</strike> (the former is an inaccurate statement by Oracle in the source given below, as Jai's answer shows, and as <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6321873\" rel=\"nofollow noreferrer\">another bug report</a> points out as well - which basically invalidates my original question...)</p>\n\n<blockquote>\n  <p>[...] garbage objects are readily reclaimed and the address space is\n  reused. The collisons result from address space reuse. If the original\n  object remains live (not GCed) then you will not encounter this\n  problem.</p>\n</blockquote>\n\n<p><a href=\"https://bugs.java.com/view_bug.do?bug_id=6809470\" rel=\"nofollow noreferrer\">Source</a></p>\n\n<p>In .Net, there is <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.runtimehelpers.gethashcode?view=netframework-4.7.2\" rel=\"nofollow noreferrer\"><code>RuntimeHelpers.GetHashCode()</code></a>, which fulfills the first condition, but not the second:</p>\n\n<blockquote>\n  <p>Note that GetHashCode always returns identical hash codes for equal object references. However, the reverse is not true: equal hash codes do not indicate equal object references. A particular hash code value is not unique to a particular object reference; different object references can generate identical hash codes.</p>\n</blockquote>\n\n<p>So is there anything like Java's <code>identityHashCode()</code> in .Net?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>It was suggested that this is the same as <a href=\"https://stackoverflow.com/questions/4994277\">Memory address of an object in C#</a> which it is not, as the memory address cannot be used here (solely), as memory management moves objects around, hence the address may change during the lifetime of an object.</p>\n"},{"tags":["java","testing","automation","cucumber","rest-assured"],"comments":[{"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"score":0,"creation_date":1641434707,"post_id":70598876,"comment_id":124806542,"body_markdown":"I  cloned your project, added the failure scenario and ran success. No problem","body":"I  cloned your project, added the failure scenario and ran success. No problem"},{"owner":{"account_id":19107010,"reputation":1,"user_id":13953917,"display_name":"maden35"},"score":0,"creation_date":1641451768,"post_id":70598876,"comment_id":124809162,"body_markdown":"Hi, I started to suspect the following situation, after this comment, I wonder if it could be because of the jdk I use or my own pc? I am using mac m1. I have openjdk 17. Could this be caused by a situation? @lucas-nguyen-17","body":"Hi, I started to suspect the following situation, after this comment, I wonder if it could be because of the jdk I use or my own pc? I am using mac m1. I have openjdk 17. Could this be caused by a situation? @lucas-nguyen-17"},{"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"score":0,"creation_date":1641458875,"post_id":70598876,"comment_id":124810990,"body_markdown":"No, nothing&#39;s wrong. I&#39;m using openjdk17 and oracle jdk17.","body":"No, nothing&#39;s wrong. I&#39;m using openjdk17 and oracle jdk17."}],"answers":[{"tags":[],"owner":{"account_id":12241931,"reputation":11,"user_id":8934747,"display_name":"Cemre ARSLAN"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676371403,"creation_date":1655973057,"answer_id":72727001,"question_id":70598876,"body_markdown":"For anyone encounters this problem, project language different than English causes this problem. The actual cause was setting Resource bundle without a country. For us it was Turkish.\r\n\r\n 1. Setting country alongside with language for Resource Bundle is the actual solution if you need to use.\r\n 2. If you don&#39;t want to use language support, then setting project language in pom.xml to English works.\r\n\r\nTo set the project language [see this answer][1] \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/17774592/8934747","title":"Rest-Assured Throw HttpResponseException Before Then Statement","body":"<p>For anyone encounters this problem, project language different than English causes this problem. The actual cause was setting Resource bundle without a country. For us it was Turkish.</p>\n<ol>\n<li>Setting country alongside with language for Resource Bundle is the actual solution if you need to use.</li>\n<li>If you don't want to use language support, then setting project language in pom.xml to English works.</li>\n</ol>\n<p>To set the project language <a href=\"https://stackoverflow.com/a/17774592/8934747\">see this answer</a></p>\n"}],"owner":{"account_id":19107010,"reputation":1,"user_id":13953917,"display_name":"maden35"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":788,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676371403,"creation_date":1641412384,"question_id":70598876,"body_markdown":"while doing my API tests, I am getting an error while sending the request before going to the testing phase. This situation occurs in tests that do not return a status code of 2xx. For example, I am getting the following error by Rest-Assured while performing a test where I expect any 404 or 400 results. I could not understand why. Thanks in advance for the support.\r\n\r\nProject Link:\r\nhttps://github.com/mustafamaden/restapi_BDD_examples\r\n\r\nFailure Scenario:\r\n```\r\nScenario: Invalid Grocery\r\n    Given Prepare Url &quot;https://e3f7f8d3-b06d-49ce-825e-8f4e9635fb99.mock.pstmn.io/allGrocery/123&quot;\r\n    When Send Request &quot;GET&quot;\r\n    Then Expected to see 400 status code\r\n```\r\n\r\nLog:\r\n```\r\nStep failed\r\nio.restassured.internal.http.HttpResponseException: status code: 400, reason phrase: Bad Request\r\n\tat io.restassured.internal.http.HTTPBuilder.defaultFailureHandler(HTTPBuilder.java:627)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\r\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1268)\r\n\tat groovy.lang.MetaClassImpl.invokeMethodClosure(MetaClassImpl.java:1048)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1142)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1035)\r\n\tat groovy.lang.Closure.call(Closure.java:412)\r\n\tat groovy.lang.Closure.call(Closure.java:428)\r\n\tat groovy.lang.Closure$call$0.call(Unknown Source)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)\r\n\tat io.restassured.internal.RequestSpecificationImpl$RestAssuredHttpBuilder.doRequest(RequestSpecificationImpl.groovy:2082)\r\n\tat io.restassured.internal.http.HTTPBuilder.doRequest(HTTPBuilder.java:495)\r\n\tat io.restassured.internal.http.HTTPBuilder.request(HTTPBuilder.java:452)\r\n\tat io.restassured.internal.http.HTTPBuilder$request$2.call(Unknown Source)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:166)\r\n\tat io.restassured.internal.RequestSpecificationImpl.sendHttpRequest(RequestSpecificationImpl.groovy:1453)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\r\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1268)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1035)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:819)\r\n\tat groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\r\n\tat org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\r\n\tat org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.callCurrent(PogoInterceptableSite.java:55)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\r\n\tat io.restassured.internal.RequestSpecificationImpl.sendRequest(RequestSpecificationImpl.groovy:1202)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\r\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1268)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1035)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:819)\r\n\tat groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\r\n\tat org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:166)\r\n\tat io.restassured.internal.filter.SendRequestFilter.filter(SendRequestFilter.groovy:30)\r\n\tat io.restassured.filter.Filter$filter$0.call(Unknown Source)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\n\tat io.restassured.filter.Filter$filter.call(Unknown Source)\r\n\tat io.restassured.internal.filter.FilterContextImpl.next(FilterContextImpl.groovy:72)\r\n\tat io.restassured.filter.time.TimingFilter.filter(TimingFilter.java:56)\r\n\tat io.restassured.filter.Filter$filter.call(Unknown Source)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:157)\r\n\tat io.restassured.internal.filter.FilterContextImpl.next(FilterContextImpl.groovy:72)\r\n\tat io.restassured.filter.FilterContext$next.call(Unknown Source)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:148)\r\n\tat io.restassured.internal.RequestSpecificationImpl.applyPathParamsAndSendRequest(RequestSpecificationImpl.groovy:1672)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\r\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1268)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1035)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:819)\r\n\tat groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\r\n\tat org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\r\n\tat org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.callCurrent(PogoInterceptableSite.java:55)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:203)\r\n\tat io.restassured.internal.RequestSpecificationImpl.applyPathParamsAndSendRequest(RequestSpecificationImpl.groovy:1678)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\r\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1268)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1035)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:819)\r\n\tat groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\r\n\tat org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\r\n\tat org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.callCurrent(PogoInterceptableSite.java:55)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:203)\r\n\tat io.restassured.internal.RequestSpecificationImpl.get(RequestSpecificationImpl.groovy:173)\r\n\tat io.restassured.internal.RequestSpecificationImpl.get(RequestSpecificationImpl.groovy)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\r\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1268)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1035)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:819)\r\n\tat groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\r\n\tat org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\r\n\tat org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.callCurrent(PogoInterceptableSite.java:55)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:185)\r\n\tat io.restassured.internal.RequestSpecificationImpl.get(RequestSpecificationImpl.groovy:257)\r\n\tat io.restassured.internal.RequestSpecificationImpl.get(RequestSpecificationImpl.groovy)\r\nat steps.PrepareRequest.sendRequest(PrepareRequest.java:104)\r\n```\r\n\r\n","title":"Rest-Assured Throw HttpResponseException Before Then Statement","body":"<p>while doing my API tests, I am getting an error while sending the request before going to the testing phase. This situation occurs in tests that do not return a status code of 2xx. For example, I am getting the following error by Rest-Assured while performing a test where I expect any 404 or 400 results. I could not understand why. Thanks in advance for the support.</p>\n<p>Project Link:\n<a href=\"https://github.com/mustafamaden/restapi_BDD_examples\" rel=\"nofollow noreferrer\">https://github.com/mustafamaden/restapi_BDD_examples</a></p>\n<p>Failure Scenario:</p>\n<pre><code>Scenario: Invalid Grocery\n    Given Prepare Url &quot;https://e3f7f8d3-b06d-49ce-825e-8f4e9635fb99.mock.pstmn.io/allGrocery/123&quot;\n    When Send Request &quot;GET&quot;\n    Then Expected to see 400 status code\n</code></pre>\n<p>Log:</p>\n<pre><code>Step failed\nio.restassured.internal.http.HttpResponseException: status code: 400, reason phrase: Bad Request\n    at io.restassured.internal.http.HTTPBuilder.defaultFailureHandler(HTTPBuilder.java:627)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\n    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1268)\n    at groovy.lang.MetaClassImpl.invokeMethodClosure(MetaClassImpl.java:1048)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1142)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1035)\n    at groovy.lang.Closure.call(Closure.java:412)\n    at groovy.lang.Closure.call(Closure.java:428)\n    at groovy.lang.Closure$call$0.call(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)\n    at io.restassured.internal.RequestSpecificationImpl$RestAssuredHttpBuilder.doRequest(RequestSpecificationImpl.groovy:2082)\n    at io.restassured.internal.http.HTTPBuilder.doRequest(HTTPBuilder.java:495)\n    at io.restassured.internal.http.HTTPBuilder.request(HTTPBuilder.java:452)\n    at io.restassured.internal.http.HTTPBuilder$request$2.call(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:166)\n    at io.restassured.internal.RequestSpecificationImpl.sendHttpRequest(RequestSpecificationImpl.groovy:1453)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\n    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1268)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1035)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:819)\n    at groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\n    at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\n    at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.callCurrent(PogoInterceptableSite.java:55)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\n    at io.restassured.internal.RequestSpecificationImpl.sendRequest(RequestSpecificationImpl.groovy:1202)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\n    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1268)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1035)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:819)\n    at groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\n    at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:166)\n    at io.restassured.internal.filter.SendRequestFilter.filter(SendRequestFilter.groovy:30)\n    at io.restassured.filter.Filter$filter$0.call(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\n    at io.restassured.filter.Filter$filter.call(Unknown Source)\n    at io.restassured.internal.filter.FilterContextImpl.next(FilterContextImpl.groovy:72)\n    at io.restassured.filter.time.TimingFilter.filter(TimingFilter.java:56)\n    at io.restassured.filter.Filter$filter.call(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:157)\n    at io.restassured.internal.filter.FilterContextImpl.next(FilterContextImpl.groovy:72)\n    at io.restassured.filter.FilterContext$next.call(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:148)\n    at io.restassured.internal.RequestSpecificationImpl.applyPathParamsAndSendRequest(RequestSpecificationImpl.groovy:1672)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\n    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1268)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1035)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:819)\n    at groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\n    at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\n    at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.callCurrent(PogoInterceptableSite.java:55)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:203)\n    at io.restassured.internal.RequestSpecificationImpl.applyPathParamsAndSendRequest(RequestSpecificationImpl.groovy:1678)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\n    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1268)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1035)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:819)\n    at groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\n    at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\n    at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.callCurrent(PogoInterceptableSite.java:55)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:203)\n    at io.restassured.internal.RequestSpecificationImpl.get(RequestSpecificationImpl.groovy:173)\n    at io.restassured.internal.RequestSpecificationImpl.get(RequestSpecificationImpl.groovy)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\n    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1268)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1035)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:819)\n    at groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\n    at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\n    at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.callCurrent(PogoInterceptableSite.java:55)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:185)\n    at io.restassured.internal.RequestSpecificationImpl.get(RequestSpecificationImpl.groovy:257)\n    at io.restassured.internal.RequestSpecificationImpl.get(RequestSpecificationImpl.groovy)\nat steps.PrepareRequest.sendRequest(PrepareRequest.java:104)\n</code></pre>\n"},{"tags":["java","android","android-activity","binding","runtime"],"comments":[{"owner":{"account_id":1335791,"reputation":1390,"user_id":1278585,"display_name":"Craig"},"score":1,"creation_date":1388363466,"post_id":20831722,"comment_id":31242391,"body_markdown":"From [what is intent in android?](http://stackoverflow.com/questions/6578051/what-is-intent-in-android/16183937#16183937): &quot;API calls are compile time binding while intent-based calls are run-time binding.&quot;","body":"From <a href=\"http://stackoverflow.com/questions/6578051/what-is-intent-in-android/16183937#16183937\">what is intent in android?</a>: &quot;API calls are compile time binding while intent-based calls are run-time binding.&quot;"}],"answers":[{"tags":[],"owner":{"account_id":2746014,"reputation":2642,"user_id":2366418,"accept_rate":88,"display_name":"3yakuya"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1388406516,"creation_date":1388363506,"answer_id":20831752,"question_id":20831722,"body_markdown":"Some short research could lead you to this http://en.wikipedia.org/wiki/Late_binding .\r\n\r\nShort definition to prevent some dead-linking: Runtime binding is a computer programming mechanism in which the method being called upon an object is looked up by name at runtime.","title":"What is runtime binding?","body":"<p>Some short research could lead you to this <a href=\"http://en.wikipedia.org/wiki/Late_binding\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Late_binding</a> .</p>\n\n<p>Short definition to prevent some dead-linking: Runtime binding is a computer programming mechanism in which the method being called upon an object is looked up by name at runtime.</p>\n"},{"tags":[],"owner":{"account_id":1286181,"reputation":14890,"user_id":1239189,"accept_rate":69,"display_name":"Ali Gajani"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1388363702,"creation_date":1388363702,"answer_id":20831772,"question_id":20831722,"body_markdown":"Runtime binding is the same thing as dynamic binding or late binding. Dynamic binding basically means that the method implementation that is actually called is determined at run-time, and not at compile-time. And that’s why it’s called dynamic binding – because the method that will be run is chosen at run time.","title":"What is runtime binding?","body":"<p>Runtime binding is the same thing as dynamic binding or late binding. Dynamic binding basically means that the method implementation that is actually called is determined at run-time, and not at compile-time. And that’s why it’s called dynamic binding – because the method that will be run is chosen at run time.</p>\n"},{"tags":[],"owner":{"account_id":1110848,"reputation":3563,"user_id":1101332,"accept_rate":67,"display_name":"sasankad"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1388363842,"creation_date":1388363842,"answer_id":20831786,"question_id":20831722,"body_markdown":"Dynamic Binding refers to the case where compiler is not able to resolve the call and the binding is done at runtime only. Let&#39;s try to understand this. Suppose we have a class named &#39;SuperClass&#39; and another class named &#39;SubClass&#39; extends it. Now a &#39;SuperClass&#39; reference can be assigned to an object of the type &#39;SubClass&#39; as well. If we have a method (say &#39;someMethod()&#39;) in the &#39;SuperClass&#39; which we override in the &#39;SubClass&#39; then a call of that method on a &#39;SuperClass&#39; reference can only be resolved at runtime as the compiler can&#39;t be sure of what type of object this reference would be pointing to at runtime.\r\n\r\n    ...\r\n    SuperClass superClass1 = new SuperClass();\r\n    SuperClass superClass2 = new SubClass();\r\n    ...\r\n\r\n    superClass1.someMethod(); // SuperClass version is called\r\n    superClass2.someMethod(); // SubClass version is called\r\n    ....\r\n\r\nHere, we see that even though both the object references superClass1 and superClass2 are of type &#39;SuperClass&#39; only, but at run time they refer to the objects of types &#39;SuperClass&#39; and &#39;SubClass&#39; respectively.\r\n\r\nHence, at compile time the compiler can&#39;t be sure if the call to the method &#39;someMethod()&#39; on these references actually refer to which version of the method - the super class version or the sub class version.\r\n\r\nThus, we see that dynamic binding in Java simply binds the method calls (inherited methods only as they can be overriden in a sub class and hence compiler may not be sure of which version of the method to call) based on the actual object type and not on the declared type of the object reference.\r\n\r\n\r\nCopied from the following [site][1]\r\n\r\n\r\n  [1]: http://geekexplains.blogspot.com.au/2008/06/dynamic-binding-vs-static-binding-in.html\r\n","title":"What is runtime binding?","body":"<p>Dynamic Binding refers to the case where compiler is not able to resolve the call and the binding is done at runtime only. Let's try to understand this. Suppose we have a class named 'SuperClass' and another class named 'SubClass' extends it. Now a 'SuperClass' reference can be assigned to an object of the type 'SubClass' as well. If we have a method (say 'someMethod()') in the 'SuperClass' which we override in the 'SubClass' then a call of that method on a 'SuperClass' reference can only be resolved at runtime as the compiler can't be sure of what type of object this reference would be pointing to at runtime.</p>\n\n<pre><code>...\nSuperClass superClass1 = new SuperClass();\nSuperClass superClass2 = new SubClass();\n...\n\nsuperClass1.someMethod(); // SuperClass version is called\nsuperClass2.someMethod(); // SubClass version is called\n....\n</code></pre>\n\n<p>Here, we see that even though both the object references superClass1 and superClass2 are of type 'SuperClass' only, but at run time they refer to the objects of types 'SuperClass' and 'SubClass' respectively.</p>\n\n<p>Hence, at compile time the compiler can't be sure if the call to the method 'someMethod()' on these references actually refer to which version of the method - the super class version or the sub class version.</p>\n\n<p>Thus, we see that dynamic binding in Java simply binds the method calls (inherited methods only as they can be overriden in a sub class and hence compiler may not be sure of which version of the method to call) based on the actual object type and not on the declared type of the object reference.</p>\n\n<p>Copied from the following <a href=\"http://geekexplains.blogspot.com.au/2008/06/dynamic-binding-vs-static-binding-in.html\" rel=\"nofollow\">site</a></p>\n"},{"tags":[],"owner":{"account_id":3122569,"reputation":1943,"user_id":2642058,"accept_rate":100,"display_name":"Ashish"},"down_vote_count":1,"up_vote_count":8,"is_accepted":true,"score":7,"last_activity_date":1467702112,"creation_date":1388390291,"answer_id":20835623,"question_id":20831722,"body_markdown":"Inheritance creates type compatibility.\r\nIt allows a super class reference to\r\nrefer to the object of sub class.\r\n(Reverse is not true).\r\n\r\nA super class reference, that refers to\r\nobject of sub class, can only be used to\r\naccess the inherited and overridden \r\nmethods of sub class.\r\nThe members newly defined in sub class\r\nare not accessible using reference of\r\nsuper class.\r\n\r\n\r\n\r\n    class A  {\r\n     void f1() {  //this holds address of object of B     \r\n       System.out.println(&quot;A f1&quot;);\r\n     }\r\n     void f2() {\r\n       System.out.println(&quot;A f2&quot;);\r\n     }\r\n    }//A\r\n\r\n\r\n    class B extends A {\r\n\r\n     void f3() {   //new method     \r\n       System.out.println(&quot;B f3&quot;);\r\n     }\r\n\r\n     void f2() { //this holds address of object of B     \r\n       System.out.println(&quot;B f2 starts&quot;);\r\n       f3(); //this.f3()\r\n       System.out.println(&quot;B f2 ends &quot;);\r\n       \r\n     } }  //B\r\n\r\n\r\n    class TypeCmptbl {\r\n       public static void main(String args[]) {\r\n          A ref; //reference of A\r\n          ref = new B();//Object of B\r\n    \r\n          //ref.inherited()  allowed\r\n          ref.f1();\r\n    \r\n          //ref.overridden() allowed\r\n          ref.f2();\r\n      \r\n         //ref.newMembersOfChild() not allowed\r\n        //ref.f3();\r\n    \r\n      }//main\r\n    }\r\n\r\n\r\nConsider the statement\r\n \r\n\r\n      ref.f2();\r\n\r\nHere ref is a reference of class A\r\nand it has address of object of class B\r\nf2() is a overridden method.\r\n\r\nWhen compiler detects such a statement\r\nthen it doesn&#39;t bind the function call with any\r\ndefinition. It only validates the call. \r\n\r\nBinding of such calls is left for the runtime\r\nenvironment.\r\nAt program runtime system identifies the \r\ndatatype of the object and binds the\r\nfunction call with the function definition provided by the\r\nclass of object.\r\nThis type of binding between the function\r\ncall and function defination is called as &quot;late binding&quot;\r\nor &quot;**runtime binding**&quot; or &quot;**runtime polymorphism**&quot;\r\nor &quot;**dynamic method dispatch**&quot;.\r\n\r\n\r\n","title":"What is runtime binding?","body":"<p>Inheritance creates type compatibility.\nIt allows a super class reference to\nrefer to the object of sub class.\n(Reverse is not true).</p>\n\n<p>A super class reference, that refers to\nobject of sub class, can only be used to\naccess the inherited and overridden \nmethods of sub class.\nThe members newly defined in sub class\nare not accessible using reference of\nsuper class.</p>\n\n<pre><code>class A  {\n void f1() {  //this holds address of object of B     \n   System.out.println(\"A f1\");\n }\n void f2() {\n   System.out.println(\"A f2\");\n }\n}//A\n\n\nclass B extends A {\n\n void f3() {   //new method     \n   System.out.println(\"B f3\");\n }\n\n void f2() { //this holds address of object of B     \n   System.out.println(\"B f2 starts\");\n   f3(); //this.f3()\n   System.out.println(\"B f2 ends \");\n\n } }  //B\n\n\nclass TypeCmptbl {\n   public static void main(String args[]) {\n      A ref; //reference of A\n      ref = new B();//Object of B\n\n      //ref.inherited()  allowed\n      ref.f1();\n\n      //ref.overridden() allowed\n      ref.f2();\n\n     //ref.newMembersOfChild() not allowed\n    //ref.f3();\n\n  }//main\n}\n</code></pre>\n\n<p>Consider the statement</p>\n\n<pre><code>  ref.f2();\n</code></pre>\n\n<p>Here ref is a reference of class A\nand it has address of object of class B\nf2() is a overridden method.</p>\n\n<p>When compiler detects such a statement\nthen it doesn't bind the function call with any\ndefinition. It only validates the call. </p>\n\n<p>Binding of such calls is left for the runtime\nenvironment.\nAt program runtime system identifies the \ndatatype of the object and binds the\nfunction call with the function definition provided by the\nclass of object.\nThis type of binding between the function\ncall and function defination is called as \"late binding\"\nor \"<strong>runtime binding</strong>\" or \"<strong>runtime polymorphism</strong>\"\nor \"<strong>dynamic method dispatch</strong>\".</p>\n"}],"owner":{"account_id":2507892,"reputation":897,"user_id":2181017,"accept_rate":70,"display_name":"PuffySparrow"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15499,"favorite_count":0,"down_vote_count":1,"up_vote_count":11,"accepted_answer_id":20835623,"answer_count":4,"score":10,"last_activity_date":1676371188,"creation_date":1388363269,"question_id":20831722,"body_markdown":"According to the Android Developer Guides:\r\n\r\n&gt;An Intent is an object that provides **runtime binding** between separate components (such as two activities).\r\n\r\nWhat is &quot;runtime binding&quot;?","title":"What is runtime binding?","body":"<p>According to the Android Developer Guides:</p>\n<blockquote>\n<p>An Intent is an object that provides <strong>runtime binding</strong> between separate components (such as two activities).</p>\n</blockquote>\n<p>What is &quot;runtime binding&quot;?</p>\n"},{"tags":["java","google-cloud-functions"],"comments":[{"owner":{"account_id":137890,"reputation":8718,"user_id":995052,"accept_rate":56,"display_name":"Kris"},"score":1,"creation_date":1676276584,"post_id":75433352,"comment_id":133097400,"body_markdown":"Cloud function&#39;s memory usage might not be just the application code alone, it will have an execution context container more like a VM which also needs memory probably. Also when you use Runtime, you are issuing requests to that system, which probably needs memory and cpu to do that as well.","body":"Cloud function&#39;s memory usage might not be just the application code alone, it will have an execution context container more like a VM which also needs memory probably. Also when you use Runtime, you are issuing requests to that system, which probably needs memory and cpu to do that as well."},{"owner":{"account_id":15760814,"reputation":68963,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":0,"creation_date":1676285208,"post_id":75433352,"comment_id":133099704,"body_markdown":"JVM memory footprint. The Achille heel of Java.","body":"JVM memory footprint. The Achille heel of Java."},{"owner":{"account_id":19103228,"reputation":75,"user_id":13956589,"display_name":"HamsterofDeath"},"score":0,"creation_date":1676290428,"post_id":75433352,"comment_id":133101102,"body_markdown":"@guillaumeblaquiere definitely not the problem here, the discrepancy is huge and the OOM does not happen inside the JVM. it&#39;s always google that detects it.\n\n-&gt; Kris: this would mean that the 128mb setting is not even enough to run a &quot;noop&quot; function reliably. i can&#39;t see a justification for 128mb+ usage if all i do is &quot;println(&quot;n bytes just arrived&quot;)","body":"@guillaumeblaquiere definitely not the problem here, the discrepancy is huge and the OOM does not happen inside the JVM. it&#39;s always google that detects it.  -&gt; Kris: this would mean that the 128mb setting is not even enough to run a &quot;noop&quot; function reliably. i can&#39;t see a justification for 128mb+ usage if all i do is &quot;println(&quot;n bytes just arrived&quot;)"},{"owner":{"account_id":25241637,"reputation":1294,"user_id":19075433,"display_name":"Vaidehi Jamankar"},"score":0,"creation_date":1676368302,"post_id":75433352,"comment_id":133118341,"body_markdown":"Can you check with the logs and metrics in cloud monitoring to find the details of what caused the issue. If you are not aware, you can check with this [link](https://www.cloudskillsboost.google/focuses/1833?parent=catalog) on how to configure Viewing Cloud Function logs &amp; metrics in Cloud Monitoring. Also check with this [Stackoverflow Link](https://stackoverflow.com/questions/69848893).","body":"Can you check with the logs and metrics in cloud monitoring to find the details of what caused the issue. If you are not aware, you can check with this <a href=\"https://www.cloudskillsboost.google/focuses/1833?parent=catalog\" rel=\"nofollow noreferrer\">link</a> on how to configure Viewing Cloud Function logs &amp; metrics in Cloud Monitoring. Also check with this <a href=\"https://stackoverflow.com/questions/69848893\">Stackoverflow Link</a>."},{"owner":{"account_id":19103228,"reputation":75,"user_id":13956589,"display_name":"HamsterofDeath"},"score":0,"creation_date":1676370641,"post_id":75433352,"comment_id":133119077,"body_markdown":"@VaidehiJamankar in my case the cause were temp files, but the default dashboards don&#39;t show that","body":"@VaidehiJamankar in my case the cause were temp files, but the default dashboards don&#39;t show that"}],"owner":{"account_id":19103228,"reputation":75,"user_id":13956589,"display_name":"HamsterofDeath"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1676370671,"creation_date":1676276226,"question_id":75433352,"body_markdown":"I created a simple Cloud Function that does nothing except receiving a PubSub event and printing out for much memory is used/free/etc (Runtime.getRuntime.*)\r\n\r\nAccording to my logs, the JVM has allocated 24mb and can allocate at most 64mb. According to the google cloud dashboards, the function hovers around 120mb. It sometimes gets restarted because it supposedly uses &gt;128mb (which is the limit I set)\r\n\r\nHow can i find out what the additional 100mb are required for?","title":"Google cloud function (based on Java) needs only 24mb but Google&#39;s dashboard claims it uses 128mb+","body":"<p>I created a simple Cloud Function that does nothing except receiving a PubSub event and printing out for much memory is used/free/etc (Runtime.getRuntime.*)</p>\n<p>According to my logs, the JVM has allocated 24mb and can allocate at most 64mb. According to the google cloud dashboards, the function hovers around 120mb. It sometimes gets restarted because it supposedly uses &gt;128mb (which is the limit I set)</p>\n<p>How can i find out what the additional 100mb are required for?</p>\n"},{"tags":["java","javafx","checkbox","tableview"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1676369808,"post_id":75445484,"comment_id":133118799,"body_markdown":"You may want to consider [Why should I avoid using PropertyValueFactory in JavaFX?](https://stackoverflow.com/q/72437983/6395627).","body":"You may want to consider <a href=\"https://stackoverflow.com/q/72437983/6395627\">Why should I avoid using PropertyValueFactory in JavaFX?</a>."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":2,"creation_date":1676370523,"post_id":75445484,"comment_id":133119031,"body_markdown":"you __must not__ have nodes as items (nor properties of items) - that&#39;s currently only doc&#39;ed for ComboBox, soon for all virtualized controls.","body":"you <b>must not</b> have nodes as items (nor properties of items) - that&#39;s currently only doc&#39;ed for ComboBox, soon for all virtualized controls."}],"answers":[{"tags":[],"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1676370442,"creation_date":1676369787,"answer_id":75446370,"question_id":75445484,"body_markdown":"Your `Items` class should not reference any UI objects, including `CheckBox`. The model should ideally not even know the view exists. If you plan on having `Items` track if it&#39;s selected itself, then it should expose a `BooleanProperty` representing this state. With a properly configured table and column, the check box associated with an item and the item&#39;s selected property will remain synchronized. And since the items of the table keep track of their own selected state, getting all the selected items is relatively straightforward. Simply iterate/stream the items and grab all the selected ones.\r\n\r\nHere&#39;s an example using `CheckBoxTableCell`:\r\n\r\n```lang-java\r\nimport javafx.application.Application;\r\nimport javafx.beans.property.BooleanProperty;\r\nimport javafx.beans.property.SimpleBooleanProperty;\r\nimport javafx.beans.property.SimpleStringProperty;\r\nimport javafx.beans.property.StringProperty;\r\nimport javafx.geometry.Insets;\r\nimport javafx.geometry.Pos;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.control.TableColumn;\r\nimport javafx.scene.control.TableView;\r\nimport javafx.scene.control.cell.CheckBoxTableCell;\r\nimport javafx.scene.layout.BorderPane;\r\nimport javafx.stage.Stage;\r\n\r\npublic class Main extends Application {\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) {\r\n        var table = new TableView&lt;Item&gt;();\r\n        table.setEditable(true);\r\n        table.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);\r\n        for (int i = 0; i &lt; 50; i++) {\r\n            table.getItems().add(new Item(&quot;Item #&quot; + (i + 1)));\r\n        }\r\n\r\n        var selectedCol = new TableColumn&lt;Item, Boolean&gt;(&quot;Selected&quot;);\r\n        // configure cell factory to use a cell implementation that displays a CheckBox\r\n        selectedCol.setCellFactory(CheckBoxTableCell.forTableColumn(selectedCol));\r\n        // link CheckBox and model selected property\r\n        selectedCol.setCellValueFactory(data -&gt; data.getValue().selectedProperty());\r\n        table.getColumns().add(selectedCol);\r\n\r\n        var nameCol = new TableColumn&lt;Item, String&gt;(&quot;Name&quot;);\r\n        nameCol.setCellValueFactory(data -&gt; data.getValue().nameProperty());\r\n        table.getColumns().add(nameCol);\r\n\r\n        var button = new Button(&quot;Print checked items&quot;);\r\n        button.setOnAction(e -&gt; {\r\n            // filter for selected items and collect into a list\r\n            var checkedItems = table.getItems().stream().filter(Item::isSelected).toList();\r\n\r\n            // log selected items\r\n            System.out.printf(&quot;There are %,d checked items:%n&quot;, checkedItems.size());\r\n            for (var item : checkedItems) {\r\n                System.out.println(&quot;  &quot; + item);\r\n            }\r\n        });\r\n\r\n        var root = new BorderPane();\r\n        root.setTop(button);\r\n        root.setCenter(table);\r\n        root.setPadding(new Insets(10));\r\n        BorderPane.setMargin(button, new Insets(0, 0, 10, 0));\r\n        BorderPane.setAlignment(button, Pos.CENTER_RIGHT);\r\n\r\n        primaryStage.setScene(new Scene(root, 600, 400));\r\n        primaryStage.show();\r\n    }\r\n\r\n    public static class Item {\r\n\r\n        private final StringProperty name = new SimpleStringProperty(this, &quot;name&quot;);\r\n        public final void setName(String name) { this.name.set(name); }\r\n        public final String getName() { return name.get(); }\r\n        public final StringProperty nameProperty() { return name; }\r\n\r\n        private final BooleanProperty selected = new SimpleBooleanProperty(this, &quot;selected&quot;);\r\n        public final void setSelected(boolean selected) { this.selected.set(selected); }\r\n        public final boolean isSelected() { return selected.get(); }\r\n        public final BooleanProperty selectedProperty() { return selected; }\r\n\r\n        public Item() {}\r\n\r\n        public Item(String name) {\r\n            setName(name);\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return String.format(&quot;Item(name=%s, selected=%s)&quot;, getName(), isSelected());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nNote that `TableView` has a selection model. That is not the same thing. It&#39;s used for the selection of rows or cells of the table (and thus works best on a per-table basis). You, however, want to be able to &quot;check&quot; items, and that requires keeping track of that state differently--an item&#39;s row could be selected while the item is not checked, and vice versa.\r\n\r\nAnd note I recommend that any model class used with `TableView` expose JavaFX properties (like the `Item` class in the example above). It makes it much easier to work with `TableView`. But that could interfere with other parts of your code (e.g., Spring). In that case, you could do one of three things:\r\n\r\n1. Create a simple adapter class that holds a reference to the &quot;real&quot; object and provides a `BooleanProperty`. This adapter class would only be used for the `TableView`.\r\n\r\n2. Create a more complex adapter class that mirrors the &quot;real&quot; class in content, but exposes the properties as JavaFX properties (e.g., `BooleanProperty`, `StringProperty`, etc.). Map between them as you cross layer boundaries in your application.\r\n\r\n3. In the controller, or wherever you have the `TableView`, keep the selected state external to the model class. For instance, you could use a `Map&lt;Item, BooleanProperty&gt;`.\r\n\r\n   I probably would only use this approach as a last resort, if ever.","title":"JavaFX TableView with CheckBoxes: retrieve the rows whose checkboxes are checked","body":"<p>Your <code>Items</code> class should not reference any UI objects, including <code>CheckBox</code>. The model should ideally not even know the view exists. If you plan on having <code>Items</code> track if it's selected itself, then it should expose a <code>BooleanProperty</code> representing this state. With a properly configured table and column, the check box associated with an item and the item's selected property will remain synchronized. And since the items of the table keep track of their own selected state, getting all the selected items is relatively straightforward. Simply iterate/stream the items and grab all the selected ones.</p>\n<p>Here's an example using <code>CheckBoxTableCell</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javafx.application.Application;\nimport javafx.beans.property.BooleanProperty;\nimport javafx.beans.property.SimpleBooleanProperty;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.beans.property.StringProperty;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport javafx.scene.control.cell.CheckBoxTableCell;\nimport javafx.scene.layout.BorderPane;\nimport javafx.stage.Stage;\n\npublic class Main extends Application {\n\n    @Override\n    public void start(Stage primaryStage) {\n        var table = new TableView&lt;Item&gt;();\n        table.setEditable(true);\n        table.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);\n        for (int i = 0; i &lt; 50; i++) {\n            table.getItems().add(new Item(&quot;Item #&quot; + (i + 1)));\n        }\n\n        var selectedCol = new TableColumn&lt;Item, Boolean&gt;(&quot;Selected&quot;);\n        // configure cell factory to use a cell implementation that displays a CheckBox\n        selectedCol.setCellFactory(CheckBoxTableCell.forTableColumn(selectedCol));\n        // link CheckBox and model selected property\n        selectedCol.setCellValueFactory(data -&gt; data.getValue().selectedProperty());\n        table.getColumns().add(selectedCol);\n\n        var nameCol = new TableColumn&lt;Item, String&gt;(&quot;Name&quot;);\n        nameCol.setCellValueFactory(data -&gt; data.getValue().nameProperty());\n        table.getColumns().add(nameCol);\n\n        var button = new Button(&quot;Print checked items&quot;);\n        button.setOnAction(e -&gt; {\n            // filter for selected items and collect into a list\n            var checkedItems = table.getItems().stream().filter(Item::isSelected).toList();\n\n            // log selected items\n            System.out.printf(&quot;There are %,d checked items:%n&quot;, checkedItems.size());\n            for (var item : checkedItems) {\n                System.out.println(&quot;  &quot; + item);\n            }\n        });\n\n        var root = new BorderPane();\n        root.setTop(button);\n        root.setCenter(table);\n        root.setPadding(new Insets(10));\n        BorderPane.setMargin(button, new Insets(0, 0, 10, 0));\n        BorderPane.setAlignment(button, Pos.CENTER_RIGHT);\n\n        primaryStage.setScene(new Scene(root, 600, 400));\n        primaryStage.show();\n    }\n\n    public static class Item {\n\n        private final StringProperty name = new SimpleStringProperty(this, &quot;name&quot;);\n        public final void setName(String name) { this.name.set(name); }\n        public final String getName() { return name.get(); }\n        public final StringProperty nameProperty() { return name; }\n\n        private final BooleanProperty selected = new SimpleBooleanProperty(this, &quot;selected&quot;);\n        public final void setSelected(boolean selected) { this.selected.set(selected); }\n        public final boolean isSelected() { return selected.get(); }\n        public final BooleanProperty selectedProperty() { return selected; }\n\n        public Item() {}\n\n        public Item(String name) {\n            setName(name);\n        }\n\n        @Override\n        public String toString() {\n            return String.format(&quot;Item(name=%s, selected=%s)&quot;, getName(), isSelected());\n        }\n    }\n}\n</code></pre>\n<p>Note that <code>TableView</code> has a selection model. That is not the same thing. It's used for the selection of rows or cells of the table (and thus works best on a per-table basis). You, however, want to be able to &quot;check&quot; items, and that requires keeping track of that state differently--an item's row could be selected while the item is not checked, and vice versa.</p>\n<p>And note I recommend that any model class used with <code>TableView</code> expose JavaFX properties (like the <code>Item</code> class in the example above). It makes it much easier to work with <code>TableView</code>. But that could interfere with other parts of your code (e.g., Spring). In that case, you could do one of three things:</p>\n<ol>\n<li><p>Create a simple adapter class that holds a reference to the &quot;real&quot; object and provides a <code>BooleanProperty</code>. This adapter class would only be used for the <code>TableView</code>.</p>\n</li>\n<li><p>Create a more complex adapter class that mirrors the &quot;real&quot; class in content, but exposes the properties as JavaFX properties (e.g., <code>BooleanProperty</code>, <code>StringProperty</code>, etc.). Map between them as you cross layer boundaries in your application.</p>\n</li>\n<li><p>In the controller, or wherever you have the <code>TableView</code>, keep the selected state external to the model class. For instance, you could use a <code>Map&lt;Item, BooleanProperty&gt;</code>.</p>\n<p>I probably would only use this approach as a last resort, if ever.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":3938593,"reputation":233,"user_id":3254023,"display_name":"Calfa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":413,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75446370,"answer_count":1,"score":0,"last_activity_date":1676370442,"creation_date":1676365319,"question_id":75445484,"body_markdown":"I&#39;ve been searching for a while, but all I found seems very old and can&#39;t get it to work and I&#39;m very confused.\r\n\r\nI have a tableview with a checkbox in a column header (select all) and another checkbox for each row (select row). What I am trying to achieve is to get all the rows whose checkboxes are checked to perform an action.\r\n\r\nHere&#39;s what it looks like:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAnd here&#39;s the code in my controller:\r\n\r\n    package com.comparador.controller;\r\n    \r\n    import java.io.IOException;\r\n    import java.net.URL;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.ResourceBundle;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    import com.comparador.ComparadorPreciosApplication;\r\n    import com.comparador.entity.Commerce;\r\n    import com.comparador.entity.Items;\r\n    import com.comparador.entity.ShoppingListPrices;\r\n    import com.comparador.repository.CommerceRepository;\r\n    import com.comparador.repository.ProductRepository;\r\n    import com.comparador.service.ShoppingService;\r\n    \r\n    import javafx.collections.FXCollections;\r\n    import javafx.collections.ObservableList;\r\n    import javafx.fxml.FXML;\r\n    import javafx.fxml.FXMLLoader;\r\n    import javafx.fxml.Initializable;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.SceneAntialiasing;\r\n    import javafx.scene.control.Button;\r\n    import javafx.scene.control.CheckBox;\r\n    import javafx.scene.control.Label;\r\n    import javafx.scene.control.SelectionMode;\r\n    import javafx.scene.control.TableColumn;\r\n    import javafx.scene.control.TableColumn.CellEditEvent;\r\n    import javafx.scene.control.TableView;\r\n    import javafx.scene.control.cell.PropertyValueFactory;\r\n    import javafx.scene.control.cell.TextFieldTableCell;\r\n    import javafx.stage.Stage;\r\n    import javafx.util.converter.IntegerStringConverter;\r\n    \r\n    @Component\r\n    public class ShoppingController implements Initializable {\r\n    //    @Autowired\r\n    //    @Qualifier(&quot;lblTitulo&quot;)\r\n        private String titulo = &quot;Productos&quot;;\r\n    \r\n        @Autowired\r\n        private ProductRepository productRepository;\r\n        @Autowired\r\n        private CommerceRepository commerceRepository;\r\n        @Autowired\r\n        private ShoppingService shoppingService;\r\n    \r\n        @FXML\r\n        private Label lblTitulo;\r\n        @FXML\r\n        private Button btBack;\r\n        @FXML\r\n        private TableView&lt;Items&gt; tvProducts;\r\n        @FXML\r\n        private TableColumn&lt;Items, CheckBox&gt; colSelected;\t\t//THE CHECKBOX COLUMN\r\n        @FXML\r\n        private TableColumn&lt;Items, String&gt; colName;\r\n        @FXML\r\n        private TableColumn&lt;Items, Integer&gt; colAmount;\r\n        @FXML\r\n        private TableView&lt;ShoppingListPrices&gt; tvTotalPrices;\r\n        @FXML\r\n        private TableColumn&lt;ShoppingListPrices, String&gt; colCommerce;\r\n        @FXML\r\n        private TableColumn&lt;ShoppingListPrices, Double&gt; colTotal;\r\n    \r\n        private CheckBox selectAll;\r\n        List&lt;ShoppingListPrices&gt; shoppingList = new ArrayList&lt;&gt;();\r\n        \r\n        \r\n        \r\n        @Override\r\n        public void initialize(URL location, ResourceBundle resources) {\r\n        \tcolName.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;name&quot;));\r\n        \tcolAmount.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;amount&quot;));\r\n        \tcolAmount.setCellFactory(TextFieldTableCell.forTableColumn(new IntegerStringConverter()));\r\n    //    \tcolSelected.setCellFactory(CheckBoxTableCell.forTableColumn(colSelected));\r\n    //    \tcolSelected.setCellValueFactory(cellData -&gt; new ReadOnlyBooleanWrapper(cellData.getValue().getChecked()));\r\n        \tcolSelected.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;selected&quot;));\r\n        \tcolCommerce.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;commerceName&quot;));\r\n        \tcolTotal.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;total&quot;));\r\n            lblTitulo.setText(titulo);\r\n            tvProducts.getSelectionModel().setSelectionMode(SelectionMode.MULTIPLE);\r\n            reloadTableViewProducts();\r\n            \r\n            selectAll = new CheckBox();\r\n            selectAll.setOnAction(event -&gt; {\r\n            \tevent.consume();\r\n            \ttvProducts.getItems().forEach(item -&gt; {\r\n            \t\titem.getSelected().setSelected(selectAll.isSelected());\r\n            \t});\r\n            \t\r\n            });\r\n            \r\n            setShoppingList();\r\n            \r\n            colSelected.setGraphic(selectAll);\r\n        }\r\n        \r\n        @FXML\r\n        public void editAmount(CellEditEvent&lt;Items, Integer&gt; event) {\r\n        \tItems item = event.getRowValue();\r\n        \tif(event.getTableColumn().getText().equals(&quot;Cantidad&quot;)) {\r\n        \t\titem.setAmount(event.getNewValue());\r\n        \t}\r\n        \tsetShoppingList();\r\n        }\r\n        \r\n        /*\r\n         * CLICKING ON A CHECKBOX SHOULD CALL THIS METHOD AND ADD THE ROW TO &quot;selectedItems&quot;\r\n         */\r\n        @FXML\r\n        public void setShoppingList() {\r\n        \t\r\n        \tList&lt;Items&gt; selectedItems = new ArrayList&lt;&gt;();\r\n    \r\n        \t//Before trying this I was selecting each row by Ctrl + Clicking on it\r\n    //    \tList&lt;Items&gt; selectedItems = tvProducts.getSelectionModel().getSelectedItems();\r\n        \t\r\n        \t//This didn&#39;t seem to work\r\n    //    \tList&lt;ShoppingListItems&gt; selectedItems = tvProducts.getItems().filtered(x-&gt;x.getSelected() == true);\r\n        \t\r\n        \t\r\n        \tList&lt;Commerce&gt; commerces = commerceRepository.findByNameContaining(&quot;&quot;);\r\n        \t\r\n        \tShoppingListPrices pricesMixingCommerces = shoppingService.getCheapestShoppingList(commerces, selectedItems);\r\n        \tList&lt;ShoppingListPrices&gt; pricesByCommerce = shoppingService.getShoppingListsPerCommerce(commerces, selectedItems);\r\n        \t\r\n        \tshoppingList = new ArrayList&lt;&gt;();\r\n        \tshoppingList.add(pricesMixingCommerces); \r\n        \tshoppingList.addAll(pricesByCommerce);\r\n        \t\r\n        \tObservableList&lt;ShoppingListPrices&gt; resultOL = FXCollections.observableArrayList();\r\n        \tresultOL.addAll(shoppingList);\r\n            tvTotalPrices.setItems(resultOL);\r\n        }\r\n        \r\n        \r\n        @FXML\r\n        public void openShoppingList() throws IOException {\r\n        \tFXMLLoader loader  = new FXMLLoader(getClass().getResource(&quot;/shoppingList.fxml&quot;));\r\n        \tShoppingListController shoppingListController = new ShoppingListController();\r\n        \tloader.setControllerFactory(ComparadorPreciosApplication.applicationContext::getBean);\r\n        \tloader.setController(shoppingListController);\r\n        \tshoppingListController.setup(tvTotalPrices.getSelectionModel().getSelectedItem());\r\n    \t\ttry {\r\n    \t\t\tScene scene = new Scene(loader.load(), 800, 400, true, SceneAntialiasing.BALANCED);\r\n    \t\t\tStage stage = new Stage();//(Stage) btBack.getScene().getWindow();\r\n    \t\t\tstage.setUserData(tvTotalPrices.getSelectionModel().getSelectedItem());\r\n    \t\t\tstage.setScene(scene);\r\n    \t\t\tstage.show();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n        }\r\n        \r\n        \r\n    \t@FXML\r\n        public void goBack() {\r\n        \tFXMLLoader loader  = new FXMLLoader(ComparadorPreciosApplication.class.getResource(&quot;/index.fxml&quot;));\r\n        \tloader.setControllerFactory(ComparadorPreciosApplication.applicationContext::getBean);\r\n    \t\ttry {\r\n    \t\t\tScene scene = new Scene(loader.load(), 800, 800, false, SceneAntialiasing.BALANCED);\r\n    \t\t\tStage stage = (Stage) btBack.getScene().getWindow();\r\n    \t\t\tstage.setScene(scene);\r\n    \t\t\tstage.show();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n        }\r\n    \t\r\n    \t\r\n    \tprivate void reloadTableViewProducts() {\r\n        \tList&lt;String&gt; productNames = productRepository.findOnProductPerName(&quot;&quot;);\r\n        \tList&lt;Items&gt; items = new ArrayList&lt;&gt;();\r\n        \tfor(String name : productNames) {\r\n        \t\t//items.add(new Items(new SimpleBooleanProperty(false), name, 1));\r\n        \t\tItems item = new Items((CheckBox) new CheckBox(), name, 1);\r\n        \t\titem.getSelected().setSelected(false);\r\n        \t\titems.add(item);\r\n        \t}\r\n        \tObservableList&lt;Items&gt; itemsOL = FXCollections.observableArrayList();\r\n            itemsOL.addAll(items);\r\n            tvProducts.setItems(itemsOL);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IeqmY.png\r\n","title":"JavaFX TableView with CheckBoxes: retrieve the rows whose checkboxes are checked","body":"<p>I've been searching for a while, but all I found seems very old and can't get it to work and I'm very confused.</p>\n<p>I have a tableview with a checkbox in a column header (select all) and another checkbox for each row (select row). What I am trying to achieve is to get all the rows whose checkboxes are checked to perform an action.</p>\n<p>Here's what it looks like:</p>\n<p><a href=\"https://i.stack.imgur.com/IeqmY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IeqmY.png\" alt=\"enter image description here\" /></a></p>\n<p>And here's the code in my controller:</p>\n<pre><code>package com.comparador.controller;\n\nimport java.io.IOException;\nimport java.net.URL;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.ResourceBundle;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\n\nimport com.comparador.ComparadorPreciosApplication;\nimport com.comparador.entity.Commerce;\nimport com.comparador.entity.Items;\nimport com.comparador.entity.ShoppingListPrices;\nimport com.comparador.repository.CommerceRepository;\nimport com.comparador.repository.ProductRepository;\nimport com.comparador.service.ShoppingService;\n\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.fxml.FXML;\nimport javafx.fxml.FXMLLoader;\nimport javafx.fxml.Initializable;\nimport javafx.scene.Scene;\nimport javafx.scene.SceneAntialiasing;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.CheckBox;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.SelectionMode;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableColumn.CellEditEvent;\nimport javafx.scene.control.TableView;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.control.cell.TextFieldTableCell;\nimport javafx.stage.Stage;\nimport javafx.util.converter.IntegerStringConverter;\n\n@Component\npublic class ShoppingController implements Initializable {\n//    @Autowired\n//    @Qualifier(&quot;lblTitulo&quot;)\n    private String titulo = &quot;Productos&quot;;\n\n    @Autowired\n    private ProductRepository productRepository;\n    @Autowired\n    private CommerceRepository commerceRepository;\n    @Autowired\n    private ShoppingService shoppingService;\n\n    @FXML\n    private Label lblTitulo;\n    @FXML\n    private Button btBack;\n    @FXML\n    private TableView&lt;Items&gt; tvProducts;\n    @FXML\n    private TableColumn&lt;Items, CheckBox&gt; colSelected;       //THE CHECKBOX COLUMN\n    @FXML\n    private TableColumn&lt;Items, String&gt; colName;\n    @FXML\n    private TableColumn&lt;Items, Integer&gt; colAmount;\n    @FXML\n    private TableView&lt;ShoppingListPrices&gt; tvTotalPrices;\n    @FXML\n    private TableColumn&lt;ShoppingListPrices, String&gt; colCommerce;\n    @FXML\n    private TableColumn&lt;ShoppingListPrices, Double&gt; colTotal;\n\n    private CheckBox selectAll;\n    List&lt;ShoppingListPrices&gt; shoppingList = new ArrayList&lt;&gt;();\n    \n    \n    \n    @Override\n    public void initialize(URL location, ResourceBundle resources) {\n        colName.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;name&quot;));\n        colAmount.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;amount&quot;));\n        colAmount.setCellFactory(TextFieldTableCell.forTableColumn(new IntegerStringConverter()));\n//      colSelected.setCellFactory(CheckBoxTableCell.forTableColumn(colSelected));\n//      colSelected.setCellValueFactory(cellData -&gt; new ReadOnlyBooleanWrapper(cellData.getValue().getChecked()));\n        colSelected.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;selected&quot;));\n        colCommerce.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;commerceName&quot;));\n        colTotal.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;total&quot;));\n        lblTitulo.setText(titulo);\n        tvProducts.getSelectionModel().setSelectionMode(SelectionMode.MULTIPLE);\n        reloadTableViewProducts();\n        \n        selectAll = new CheckBox();\n        selectAll.setOnAction(event -&gt; {\n            event.consume();\n            tvProducts.getItems().forEach(item -&gt; {\n                item.getSelected().setSelected(selectAll.isSelected());\n            });\n            \n        });\n        \n        setShoppingList();\n        \n        colSelected.setGraphic(selectAll);\n    }\n    \n    @FXML\n    public void editAmount(CellEditEvent&lt;Items, Integer&gt; event) {\n        Items item = event.getRowValue();\n        if(event.getTableColumn().getText().equals(&quot;Cantidad&quot;)) {\n            item.setAmount(event.getNewValue());\n        }\n        setShoppingList();\n    }\n    \n    /*\n     * CLICKING ON A CHECKBOX SHOULD CALL THIS METHOD AND ADD THE ROW TO &quot;selectedItems&quot;\n     */\n    @FXML\n    public void setShoppingList() {\n        \n        List&lt;Items&gt; selectedItems = new ArrayList&lt;&gt;();\n\n        //Before trying this I was selecting each row by Ctrl + Clicking on it\n//      List&lt;Items&gt; selectedItems = tvProducts.getSelectionModel().getSelectedItems();\n        \n        //This didn't seem to work\n//      List&lt;ShoppingListItems&gt; selectedItems = tvProducts.getItems().filtered(x-&gt;x.getSelected() == true);\n        \n        \n        List&lt;Commerce&gt; commerces = commerceRepository.findByNameContaining(&quot;&quot;);\n        \n        ShoppingListPrices pricesMixingCommerces = shoppingService.getCheapestShoppingList(commerces, selectedItems);\n        List&lt;ShoppingListPrices&gt; pricesByCommerce = shoppingService.getShoppingListsPerCommerce(commerces, selectedItems);\n        \n        shoppingList = new ArrayList&lt;&gt;();\n        shoppingList.add(pricesMixingCommerces); \n        shoppingList.addAll(pricesByCommerce);\n        \n        ObservableList&lt;ShoppingListPrices&gt; resultOL = FXCollections.observableArrayList();\n        resultOL.addAll(shoppingList);\n        tvTotalPrices.setItems(resultOL);\n    }\n    \n    \n    @FXML\n    public void openShoppingList() throws IOException {\n        FXMLLoader loader  = new FXMLLoader(getClass().getResource(&quot;/shoppingList.fxml&quot;));\n        ShoppingListController shoppingListController = new ShoppingListController();\n        loader.setControllerFactory(ComparadorPreciosApplication.applicationContext::getBean);\n        loader.setController(shoppingListController);\n        shoppingListController.setup(tvTotalPrices.getSelectionModel().getSelectedItem());\n        try {\n            Scene scene = new Scene(loader.load(), 800, 400, true, SceneAntialiasing.BALANCED);\n            Stage stage = new Stage();//(Stage) btBack.getScene().getWindow();\n            stage.setUserData(tvTotalPrices.getSelectionModel().getSelectedItem());\n            stage.setScene(scene);\n            stage.show();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n    \n    \n    @FXML\n    public void goBack() {\n        FXMLLoader loader  = new FXMLLoader(ComparadorPreciosApplication.class.getResource(&quot;/index.fxml&quot;));\n        loader.setControllerFactory(ComparadorPreciosApplication.applicationContext::getBean);\n        try {\n            Scene scene = new Scene(loader.load(), 800, 800, false, SceneAntialiasing.BALANCED);\n            Stage stage = (Stage) btBack.getScene().getWindow();\n            stage.setScene(scene);\n            stage.show();\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    }\n    \n    \n    private void reloadTableViewProducts() {\n        List&lt;String&gt; productNames = productRepository.findOnProductPerName(&quot;&quot;);\n        List&lt;Items&gt; items = new ArrayList&lt;&gt;();\n        for(String name : productNames) {\n            //items.add(new Items(new SimpleBooleanProperty(false), name, 1));\n            Items item = new Items((CheckBox) new CheckBox(), name, 1);\n            item.getSelected().setSelected(false);\n            items.add(item);\n        }\n        ObservableList&lt;Items&gt; itemsOL = FXCollections.observableArrayList();\n        itemsOL.addAll(items);\n        tvProducts.setItems(itemsOL);\n    }\n}\n</code></pre>\n"},{"tags":["java","google-cloud-platform","google-cloud-dataflow","google-bucket"],"answers":[{"tags":[],"owner":{"account_id":12799902,"reputation":5994,"user_id":9261558,"display_name":"Mazlum Tosun"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1676370424,"creation_date":1676370424,"answer_id":75446483,"question_id":75445867,"body_markdown":"When a file is uploaded to `Cloud Storage`, you can trigger a Cloud Function V2 with event arc.\r\n\r\nThen in this Cloud Function, you can trigger a `Dataflow` job.\r\n\r\n- Deploy and trigger the [Cloud Function V2](https://cloud.google.com/functions/docs/calling/storage), with event type object finalize : \r\n\r\n```shell\r\ngcloud functions deploy your_function_name \\\r\n--gen2 \\\r\n--trigger-event-filters=&quot;type=google.cloud.storage.object.v1.finalized&quot; \\\r\n--trigger-event-filters=&quot;bucket=YOUR_STORAGE_BUCKET\r\n```\r\n\r\n- In the Cloud Function, you will trigger the `Dataflow` job with a [code sample](https://medium.com/@aishwarya.gupta3/cloud-function-to-start-a-data-flow-job-on-a-new-file-upload-in-google-cloud-storage-using-trigger-30270b31a06d) that looks like this : \r\n\r\n```python\r\ndef startDataflowProcess(data, context):\r\n\tfrom googleapiclient.discovery import build\r\n\t#replace with your projectID\r\n\tproject = &quot;grounded-pivot-266616&quot;\r\n\tjob = project + &quot; &quot; + str(data[&#39;timeCreated&#39;])\r\n\t#path of the dataflow template on google storage bucket\r\n\ttemplate = &quot;gs://sample-bucket/sample-template&quot;\r\n\tinputFile = &quot;gs://&quot; + str(data[&#39;bucket&#39;]) + &quot;/&quot; + str(data[&#39;name&#39;])\r\n\t#user defined parameters to pass to the dataflow pipeline job\r\n\tparameters = {\r\n\t\t&#39;inputFile&#39;: inputFile,\r\n\t}\r\n\t#tempLocation is the path on GCS to store temp files generated during the dataflow job\r\n\tenvironment = {&#39;tempLocation&#39;: &#39;gs://sample-bucket/temp-location&#39;}\r\n\r\n\tservice = build(&#39;dataflow&#39;, &#39;v1b3&#39;, cache_discovery=False)\r\n\t#below API is used when we want to pass the location of the dataflow job\r\n\trequest = service.projects().locations().templates().launch(\r\n\t\tprojectId=project,\r\n\t\tgcsPath=template,\r\n\t\tlocation=&#39;europe-west1&#39;,\r\n\t\tbody={\r\n\t\t\t&#39;jobName&#39;: job,\r\n\t\t\t&#39;parameters&#39;: parameters,\r\n\t\t\t&#39;environment&#39;:environment\r\n\t\t},\r\n\t)\r\n\tresponse = request.execute()\r\n\tprint(str(response))\r\n```\r\n\r\nThis Cloud Function shows an example with `Python` but you can keep your logic with `Java` if you prefer.\r\n","title":"Google Dataflow trigger from Google bucket upload?","body":"<p>When a file is uploaded to <code>Cloud Storage</code>, you can trigger a Cloud Function V2 with event arc.</p>\n<p>Then in this Cloud Function, you can trigger a <code>Dataflow</code> job.</p>\n<ul>\n<li>Deploy and trigger the <a href=\"https://cloud.google.com/functions/docs/calling/storage\" rel=\"nofollow noreferrer\">Cloud Function V2</a>, with event type object finalize :</li>\n</ul>\n<pre class=\"lang-bash prettyprint-override\"><code>gcloud functions deploy your_function_name \\\n--gen2 \\\n--trigger-event-filters=&quot;type=google.cloud.storage.object.v1.finalized&quot; \\\n--trigger-event-filters=&quot;bucket=YOUR_STORAGE_BUCKET\n</code></pre>\n<ul>\n<li>In the Cloud Function, you will trigger the <code>Dataflow</code> job with a <a href=\"https://medium.com/@aishwarya.gupta3/cloud-function-to-start-a-data-flow-job-on-a-new-file-upload-in-google-cloud-storage-using-trigger-30270b31a06d\" rel=\"nofollow noreferrer\">code sample</a> that looks like this :</li>\n</ul>\n<pre class=\"lang-py prettyprint-override\"><code>def startDataflowProcess(data, context):\n    from googleapiclient.discovery import build\n    #replace with your projectID\n    project = &quot;grounded-pivot-266616&quot;\n    job = project + &quot; &quot; + str(data['timeCreated'])\n    #path of the dataflow template on google storage bucket\n    template = &quot;gs://sample-bucket/sample-template&quot;\n    inputFile = &quot;gs://&quot; + str(data['bucket']) + &quot;/&quot; + str(data['name'])\n    #user defined parameters to pass to the dataflow pipeline job\n    parameters = {\n        'inputFile': inputFile,\n    }\n    #tempLocation is the path on GCS to store temp files generated during the dataflow job\n    environment = {'tempLocation': 'gs://sample-bucket/temp-location'}\n\n    service = build('dataflow', 'v1b3', cache_discovery=False)\n    #below API is used when we want to pass the location of the dataflow job\n    request = service.projects().locations().templates().launch(\n        projectId=project,\n        gcsPath=template,\n        location='europe-west1',\n        body={\n            'jobName': job,\n            'parameters': parameters,\n            'environment':environment\n        },\n    )\n    response = request.execute()\n    print(str(response))\n</code></pre>\n<p>This Cloud Function shows an example with <code>Python</code> but you can keep your logic with <code>Java</code> if you prefer.</p>\n"}],"owner":{"account_id":1072602,"reputation":3808,"user_id":1071515,"accept_rate":93,"display_name":"tomaytotomato"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":153,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75446483,"answer_count":1,"score":0,"last_activity_date":1676370424,"creation_date":1676367237,"question_id":75445867,"body_markdown":"I am currently evaluating a proof of concept which uses Google bucket, a java microservice and Dataflow.\r\n\r\nThe communication flow is like so:\r\n\r\n 1. User sends CSV file to third party service\r\n 2. Service uploads CSV file to Google bucket with ID and filename\r\n 3. A create event is triggered and sent as a HTTP request to Java microservice\r\n 4. Java service triggers a Google Dataflow job\r\n\r\nI am starting to think that the Java service is not necessary and I can directly call Dataflow after the CSV is uploaded to the bucket?\r\n\r\nThis is the service as you can see its just a basic controller that validates the request params from the &quot;Create&quot; trigger and then delegates to the Dataflow service\r\n\r\n```java\r\n@PostMapping(value = &quot;/dataflow&quot;, produces = {MediaType.APPLICATION_JSON_VALUE})\r\n    public ResponseEntity&lt;Object&gt; triggerDataFlowJob(@RequestBody Map&lt;String, Object&gt; body) {\r\n        Map&lt;String, String&gt; requestParams = getRequestParams(body);\r\n        log.atInfo().log(&quot;Body %s&quot;, requestParams);\r\n\r\n        String bucket = requestParams.get(&quot;bucket&quot;);\r\n        String fileName = requestParams.get(&quot;name&quot;);\r\n\r\n        if (Objects.isNull(bucket) || Objects.isNull(fileName)) {\r\n            AuditLogger.log(AuditCode.INVALID_CLOUD_STORAGE_REQUEST.getCode(), AuditCode.INVALID_CLOUD_STORAGE_REQUEST.getAuditText());\r\n            return ResponseEntity.accepted().build();\r\n        }\r\n\r\n        log.atInfo().log(&quot;Triggering a Dataflow job, using Cloud Storage bucket: %s --&gt; and file %s&quot;, bucket, fileName);\r\n        try {\r\n                return DataflowTransport\r\n                .newDataflowClient(options)\r\n                .build()\r\n                .projects()\r\n                .locations()\r\n                .flexTemplates()\r\n                .launch(gcpProjectIdProvider.getProjectId(),\r\n                        dataflowProperties.getRegion(),\r\n                        launchFlexTemplateRequest)\r\n                .execute();\r\n        } catch (Exception ex) {\r\n            if (ex instanceof GoogleJsonResponseException &amp;&amp; ((GoogleJsonResponseException) ex).getStatusCode() == 409) {\r\n                log.atInfo().log(&quot;Dataflow job already triggered using Cloud Storage bucket: %s --&gt; and file %s&quot;, bucket, fileName);\r\n            } else {\r\n                log.atSevere().withCause(ex).log(&quot;Error while launching dataflow jobs&quot;);\r\n                AuditLogger.log(AuditCode.LAUNCH_DATAFLOW_JOB.getCode(), AuditCode.LAUNCH_DATAFLOW_JOB.getAuditText());\r\n            }\r\n        }\r\n\r\n        return ResponseEntity.accepted().build();\r\n    }\r\n```\r\n\r\n\r\nIs there a way to directly integrate Google bucket triggers with Dataflow?","title":"Google Dataflow trigger from Google bucket upload?","body":"<p>I am currently evaluating a proof of concept which uses Google bucket, a java microservice and Dataflow.</p>\n<p>The communication flow is like so:</p>\n<ol>\n<li>User sends CSV file to third party service</li>\n<li>Service uploads CSV file to Google bucket with ID and filename</li>\n<li>A create event is triggered and sent as a HTTP request to Java microservice</li>\n<li>Java service triggers a Google Dataflow job</li>\n</ol>\n<p>I am starting to think that the Java service is not necessary and I can directly call Dataflow after the CSV is uploaded to the bucket?</p>\n<p>This is the service as you can see its just a basic controller that validates the request params from the &quot;Create&quot; trigger and then delegates to the Dataflow service</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(value = &quot;/dataflow&quot;, produces = {MediaType.APPLICATION_JSON_VALUE})\n    public ResponseEntity&lt;Object&gt; triggerDataFlowJob(@RequestBody Map&lt;String, Object&gt; body) {\n        Map&lt;String, String&gt; requestParams = getRequestParams(body);\n        log.atInfo().log(&quot;Body %s&quot;, requestParams);\n\n        String bucket = requestParams.get(&quot;bucket&quot;);\n        String fileName = requestParams.get(&quot;name&quot;);\n\n        if (Objects.isNull(bucket) || Objects.isNull(fileName)) {\n            AuditLogger.log(AuditCode.INVALID_CLOUD_STORAGE_REQUEST.getCode(), AuditCode.INVALID_CLOUD_STORAGE_REQUEST.getAuditText());\n            return ResponseEntity.accepted().build();\n        }\n\n        log.atInfo().log(&quot;Triggering a Dataflow job, using Cloud Storage bucket: %s --&gt; and file %s&quot;, bucket, fileName);\n        try {\n                return DataflowTransport\n                .newDataflowClient(options)\n                .build()\n                .projects()\n                .locations()\n                .flexTemplates()\n                .launch(gcpProjectIdProvider.getProjectId(),\n                        dataflowProperties.getRegion(),\n                        launchFlexTemplateRequest)\n                .execute();\n        } catch (Exception ex) {\n            if (ex instanceof GoogleJsonResponseException &amp;&amp; ((GoogleJsonResponseException) ex).getStatusCode() == 409) {\n                log.atInfo().log(&quot;Dataflow job already triggered using Cloud Storage bucket: %s --&gt; and file %s&quot;, bucket, fileName);\n            } else {\n                log.atSevere().withCause(ex).log(&quot;Error while launching dataflow jobs&quot;);\n                AuditLogger.log(AuditCode.LAUNCH_DATAFLOW_JOB.getCode(), AuditCode.LAUNCH_DATAFLOW_JOB.getAuditText());\n            }\n        }\n\n        return ResponseEntity.accepted().build();\n    }\n</code></pre>\n<p>Is there a way to directly integrate Google bucket triggers with Dataflow?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9343,"page":649,"page_size":100}
