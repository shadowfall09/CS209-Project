{"items":[{"tags":["java","swing","tooltip","always-on-top"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1693336626,"post_id":77002784,"comment_id":135746649,"body_markdown":"It would be helpful if you would create a [mre] that we can copy into our IDE, compile, run, and that illustrates the problem.  The example should just be a `JFrame` set the way you described, a couple of `JButtons`, and tool tips.  Edit your question to include the example.","body":"It would be helpful if you would create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that we can copy into our IDE, compile, run, and that illustrates the problem.  The example should just be a <code>JFrame</code> set the way you described, a couple of <code>JButtons</code>, and tool tips.  Edit your question to include the example."},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1693336808,"post_id":77002784,"comment_id":135746687,"body_markdown":"My guess is that tool tips are disabled when the `JFrame` loses focus to not confuse the user.  If the `JFrame` is not in focus, the user is doing something with a different application.","body":"My guess is that tool tips are disabled when the <code>JFrame</code> loses focus to not confuse the user.  If the <code>JFrame</code> is not in focus, the user is doing something with a different application."},{"owner":{"account_id":10014547,"reputation":1156,"user_id":7406338,"display_name":"Morph21"},"score":0,"creation_date":1693337660,"post_id":77002784,"comment_id":135746810,"body_markdown":"well, since it&#39;s an overlay application you can&#39;t have focus there to avoid minimizing fullscreen mode of other application and to avoid showing windows toolbar when focus changes","body":"well, since it&#39;s an overlay application you can&#39;t have focus there to avoid minimizing fullscreen mode of other application and to avoid showing windows toolbar when focus changes"},{"owner":{"account_id":10014547,"reputation":1156,"user_id":7406338,"display_name":"Morph21"},"score":0,"creation_date":1693338443,"post_id":77002784,"comment_id":135746959,"body_markdown":"@GilbertLeBlanc I edited my question, now there is a minimal reproducible example there","body":"@GilbertLeBlanc I edited my question, now there is a minimal reproducible example there"},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1693345991,"post_id":77002784,"comment_id":135748151,"body_markdown":"After adding a call to the `SwingUtilities` `invokeLater` method and rearranging your `JFrame` method calls so they execute in the correct order, I was able to test your code.  I got an illegal reflective access warning.  I looked at the `ToolTipManager` class which extends `MouseAdapter` to see if you could write a cleaner hack.  I think your hack is probably the only way to override the default tool tip coding","body":"After adding a call to the <code>SwingUtilities</code> <code>invokeLater</code> method and rearranging your <code>JFrame</code> method calls so they execute in the correct order, I was able to test your code.  I got an illegal reflective access warning.  I looked at the <code>ToolTipManager</code> class which extends <code>MouseAdapter</code> to see if you could write a cleaner hack.  I think your hack is probably the only way to override the default tool tip coding"}],"owner":{"account_id":10014547,"reputation":1156,"user_id":7406338,"display_name":"Morph21"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693338416,"creation_date":1693333702,"question_id":77002784,"body_markdown":"this problem is for some swing masters, maybe someone will be able to help me.\r\n\r\n\r\nSo I have an application which is an overlay for fullscreen game.\r\nBecause of that my JFrame is set to these values\r\n\r\n        this.setFocusableWindowState(false);\r\n        this.setFocusable(false);\r\n        this.setAlwaysOnTop(true);\r\n\r\nOn this JFrame I have few buttons with tooltips but the tooltips won&#39;t ever show.\r\nAccording to documentation \r\n\r\n        JComponent.setTooltipText(String text)\r\nshould register itself to tooltipManager.sharedInstance\r\nbut &quot;only if component has focus bindings&quot; &lt;- documentation of ToolTipManager.registerComponent(JComponent component)\r\n\r\nI tried setting \r\n\r\n    this.setFocusableWindowState(true);\r\n\r\nfor my JFrame but it results in JFrame flickering instead of being on top of the game.\r\n\r\nFinally after a lot of tries I came up with a code which works (you should focus on parts with &quot;tooltip magic&quot;:\r\n\r\n\r\n      button.addMouseListener(new MouseAdapter() {\r\n            Border prevBorder;\r\n\r\n            @Override\r\n            public void mouseEntered(MouseEvent e) {\r\n                prevBorder = button.getBorder();\r\n                button.setBorder(BorderFactory.createCompoundBorder(\r\n                        BorderFactory.createLineBorder(AppThemeColor.ADR_SELECTED_BORDER),\r\n                        BorderFactory.createEmptyBorder(3, 3, 3, 3)));\r\n                button.setCursor(new Cursor(Cursor.HAND_CURSOR));\r\n\r\n                // Tooltip magic - start\r\n                UIManager.put(&quot;ToolTipManager.enableToolTipMode&quot;, &quot;test&quot;);\r\n                try {\r\n                    Method method = ToolTipManager.class.getDeclaredMethod(&quot;showTipWindow&quot;);\r\n                    Field field = ToolTipManager.class.getDeclaredField(&quot;mouseEvent&quot;);\r\n                    field.setAccessible(true);\r\n                    field.set(ToolTipManager.sharedInstance(), e);\r\n                    method.setAccessible(true);\r\n                    method.invoke(ToolTipManager.sharedInstance());\r\n                } catch (NoSuchMethodException | IllegalAccessException | InvocationTargetException |\r\n                         NoSuchFieldException ex) {\r\n                    ex.printStackTrace();\r\n                }\r\n                ToolTipManager.sharedInstance().mouseMoved(e);\r\n                ToolTipManager.sharedInstance().mouseEntered(e);\r\n                // Tooltip magic - end\r\n\r\n            }\r\n\r\n            @Override\r\n            public void mouseExited(MouseEvent e) {\r\n                button.setBorder(prevBorder);\r\n                button.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));\r\n                // Tooltip magic - reverse setting\r\n                UIManager.put(&quot;ToolTipManager.enableToolTipMode&quot;, &quot;activeApplication&quot;);\r\n            }\r\n        });\r\n\r\n\r\nAnd here is my question:\r\n\r\n**How to do it in a way that should be possible within built in functions instead of hacking private fields and methods?**\r\n\r\n\r\nBtw. I also tried creating my own tooltip system but it resulted in a lot of other problems.\r\nIf you want to know more about application and the code itself, here is the link:\r\nhttps://github.com/Morph21/MercuryTrade-Community-Fork\r\n\r\nJFrame that I&#39;m talking about here is TaskBarFrame, button creation is in ComponentsFactory.getIconButton\r\n\r\n\r\n\r\n**Here is a minimal reproducible example**\r\n\r\n    import javax.swing.*;\r\n    import java.awt.event.MouseAdapter;\r\n    import java.awt.event.MouseEvent;\r\n    import java.lang.reflect.Field;\r\n    import java.lang.reflect.InvocationTargetException;\r\n    import java.lang.reflect.Method;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String args[]) {\r\n            JFrame frame = new JFrame(&quot;Tooltip test&quot;);\r\n            frame.setVisible(true);\r\n            frame.setFocusable(false);\r\n            frame.setFocusableWindowState(false);\r\n            frame.setAlwaysOnTop(true);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.setSize(300,300);\r\n            JButton button = new JButton(&quot;Press&quot;);\r\n            String tooltip = &quot;tooltip value&quot;;\r\n    \r\n            //notWorkingTooltip(button, tooltip);\r\n            workingTooltip(button, tooltip);\r\n    \r\n            frame.getContentPane().add(button);\r\n        }\r\n    \r\n        private static void notWorkingTooltip(JButton button, String tooltip) {\r\n            button.setToolTipText(tooltip);\r\n        }\r\n    \r\n        private static void workingTooltip(JButton button, String tooltip) {\r\n            button.setToolTipText(tooltip);\r\n            button.addMouseListener(new MouseAdapter() {\r\n    \r\n                @Override\r\n                public void mouseEntered(MouseEvent e) {\r\n                    UIManager.put(&quot;ToolTipManager.enableToolTipMode&quot;, &quot;test&quot;);\r\n                    try {\r\n                        Method method = ToolTipManager.class.getDeclaredMethod(&quot;showTipWindow&quot;);\r\n                        Field field = ToolTipManager.class.getDeclaredField(&quot;mouseEvent&quot;);\r\n                        field.setAccessible(true);\r\n                        field.set(ToolTipManager.sharedInstance(), e);\r\n                        method.setAccessible(true);\r\n                        method.invoke(ToolTipManager.sharedInstance());\r\n                    } catch (NoSuchMethodException | IllegalAccessException | InvocationTargetException |\r\n                             NoSuchFieldException ex) {\r\n                        ex.printStackTrace();\r\n                    }\r\n                    ToolTipManager.sharedInstance().mouseMoved(e);\r\n                    ToolTipManager.sharedInstance().mouseEntered(e);\r\n                }\r\n    \r\n                @Override\r\n                public void mouseExited(MouseEvent e) {\r\n                    UIManager.put(&quot;ToolTipManager.enableToolTipMode&quot;, &quot;activeApplication&quot;);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n","title":"Swing Tooltips not working while FocusableWindowState is false","body":"<p>this problem is for some swing masters, maybe someone will be able to help me.</p>\n<p>So I have an application which is an overlay for fullscreen game.\nBecause of that my JFrame is set to these values</p>\n<pre><code>    this.setFocusableWindowState(false);\n    this.setFocusable(false);\n    this.setAlwaysOnTop(true);\n</code></pre>\n<p>On this JFrame I have few buttons with tooltips but the tooltips won't ever show.\nAccording to documentation</p>\n<pre><code>    JComponent.setTooltipText(String text)\n</code></pre>\n<p>should register itself to tooltipManager.sharedInstance\nbut &quot;only if component has focus bindings&quot; &lt;- documentation of ToolTipManager.registerComponent(JComponent component)</p>\n<p>I tried setting</p>\n<pre><code>this.setFocusableWindowState(true);\n</code></pre>\n<p>for my JFrame but it results in JFrame flickering instead of being on top of the game.</p>\n<p>Finally after a lot of tries I came up with a code which works (you should focus on parts with &quot;tooltip magic&quot;:</p>\n<pre><code>  button.addMouseListener(new MouseAdapter() {\n        Border prevBorder;\n\n        @Override\n        public void mouseEntered(MouseEvent e) {\n            prevBorder = button.getBorder();\n            button.setBorder(BorderFactory.createCompoundBorder(\n                    BorderFactory.createLineBorder(AppThemeColor.ADR_SELECTED_BORDER),\n                    BorderFactory.createEmptyBorder(3, 3, 3, 3)));\n            button.setCursor(new Cursor(Cursor.HAND_CURSOR));\n\n            // Tooltip magic - start\n            UIManager.put(&quot;ToolTipManager.enableToolTipMode&quot;, &quot;test&quot;);\n            try {\n                Method method = ToolTipManager.class.getDeclaredMethod(&quot;showTipWindow&quot;);\n                Field field = ToolTipManager.class.getDeclaredField(&quot;mouseEvent&quot;);\n                field.setAccessible(true);\n                field.set(ToolTipManager.sharedInstance(), e);\n                method.setAccessible(true);\n                method.invoke(ToolTipManager.sharedInstance());\n            } catch (NoSuchMethodException | IllegalAccessException | InvocationTargetException |\n                     NoSuchFieldException ex) {\n                ex.printStackTrace();\n            }\n            ToolTipManager.sharedInstance().mouseMoved(e);\n            ToolTipManager.sharedInstance().mouseEntered(e);\n            // Tooltip magic - end\n\n        }\n\n        @Override\n        public void mouseExited(MouseEvent e) {\n            button.setBorder(prevBorder);\n            button.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));\n            // Tooltip magic - reverse setting\n            UIManager.put(&quot;ToolTipManager.enableToolTipMode&quot;, &quot;activeApplication&quot;);\n        }\n    });\n</code></pre>\n<p>And here is my question:</p>\n<p><strong>How to do it in a way that should be possible within built in functions instead of hacking private fields and methods?</strong></p>\n<p>Btw. I also tried creating my own tooltip system but it resulted in a lot of other problems.\nIf you want to know more about application and the code itself, here is the link:\n<a href=\"https://github.com/Morph21/MercuryTrade-Community-Fork\" rel=\"nofollow noreferrer\">https://github.com/Morph21/MercuryTrade-Community-Fork</a></p>\n<p>JFrame that I'm talking about here is TaskBarFrame, button creation is in ComponentsFactory.getIconButton</p>\n<p><strong>Here is a minimal reproducible example</strong></p>\n<pre><code>import javax.swing.*;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.lang.reflect.Field;\nimport java.lang.reflect.InvocationTargetException;\nimport java.lang.reflect.Method;\n\npublic class Main {\n\n    public static void main(String args[]) {\n        JFrame frame = new JFrame(&quot;Tooltip test&quot;);\n        frame.setVisible(true);\n        frame.setFocusable(false);\n        frame.setFocusableWindowState(false);\n        frame.setAlwaysOnTop(true);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(300,300);\n        JButton button = new JButton(&quot;Press&quot;);\n        String tooltip = &quot;tooltip value&quot;;\n\n        //notWorkingTooltip(button, tooltip);\n        workingTooltip(button, tooltip);\n\n        frame.getContentPane().add(button);\n    }\n\n    private static void notWorkingTooltip(JButton button, String tooltip) {\n        button.setToolTipText(tooltip);\n    }\n\n    private static void workingTooltip(JButton button, String tooltip) {\n        button.setToolTipText(tooltip);\n        button.addMouseListener(new MouseAdapter() {\n\n            @Override\n            public void mouseEntered(MouseEvent e) {\n                UIManager.put(&quot;ToolTipManager.enableToolTipMode&quot;, &quot;test&quot;);\n                try {\n                    Method method = ToolTipManager.class.getDeclaredMethod(&quot;showTipWindow&quot;);\n                    Field field = ToolTipManager.class.getDeclaredField(&quot;mouseEvent&quot;);\n                    field.setAccessible(true);\n                    field.set(ToolTipManager.sharedInstance(), e);\n                    method.setAccessible(true);\n                    method.invoke(ToolTipManager.sharedInstance());\n                } catch (NoSuchMethodException | IllegalAccessException | InvocationTargetException |\n                         NoSuchFieldException ex) {\n                    ex.printStackTrace();\n                }\n                ToolTipManager.sharedInstance().mouseMoved(e);\n                ToolTipManager.sharedInstance().mouseEntered(e);\n            }\n\n            @Override\n            public void mouseExited(MouseEvent e) {\n                UIManager.put(&quot;ToolTipManager.enableToolTipMode&quot;, &quot;activeApplication&quot;);\n            }\n        });\n    }\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","enums"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1693323329,"post_id":77001594,"comment_id":135744071,"body_markdown":"Not a duplicate, but you can get some inspiration from [this answer](https://stackoverflow.com/a/8762387/133203)","body":"Not a duplicate, but you can get some inspiration from <a href=\"https://stackoverflow.com/a/8762387/133203\">this answer</a>"},{"owner":{"account_id":27761018,"reputation":71,"user_id":21193451,"display_name":"user21193451"},"score":0,"creation_date":1693323580,"post_id":77001594,"comment_id":135744138,"body_markdown":"Seems Interesting!","body":"Seems Interesting!"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1693324731,"post_id":77001594,"comment_id":135744379,"body_markdown":"Why is Kotlin tagged?","body":"Why is Kotlin tagged?"},{"owner":{"account_id":27761018,"reputation":71,"user_id":21193451,"display_name":"user21193451"},"score":0,"creation_date":1693324944,"post_id":77001594,"comment_id":135744432,"body_markdown":"@Tenfour04: They are similar. Also for SO AI-duplicate finder.","body":"@Tenfour04: They are similar. Also for SO AI-duplicate finder."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1693428269,"post_id":77001594,"comment_id":135761524,"body_markdown":"Wait, in your question, you say that you want smile to return `(3,4]`, but your example of intervals goes `[0,1), [1,2), ..., [4, 5]`. So does Smile capture `(3, 4]` or `[4, 5]`? And if it captures `(3, 4]`, then who captures `[4, 5]`? And if it is someone else, then `4` could be captured by 2 cases --- Smile, and whoever owns this `[4, 5]` case! Is that truly what you meant?","body":"Wait, in your question, you say that you want smile to return <code>(3,4]</code>, but your example of intervals goes <code>[0,1), [1,2), ..., [4, 5]</code>. So does Smile capture <code>(3, 4]</code> or <code>[4, 5]</code>? And if it captures <code>(3, 4]</code>, then who captures <code>[4, 5]</code>? And if it is someone else, then <code>4</code> could be captured by 2 cases --- Smile, and whoever owns this <code>[4, 5]</code> case! Is that truly what you meant?"},{"owner":{"account_id":27761018,"reputation":71,"user_id":21193451,"display_name":"user21193451"},"score":0,"creation_date":1693456487,"post_id":77001594,"comment_id":135764071,"body_markdown":"@davidalayachew: You are right. That is my mistake.","body":"@davidalayachew: You are right. That is my mistake."}],"answers":[{"comments":[{"owner":{"account_id":27761018,"reputation":71,"user_id":21193451,"display_name":"user21193451"},"score":0,"creation_date":1693327156,"post_id":77002099,"comment_id":135744883,"body_markdown":"My question is how to assign an interval to a String using enum. does your post answer my question?","body":"My question is how to assign an interval to a String using enum. does your post answer my question?"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":1,"creation_date":1693327324,"post_id":77002099,"comment_id":135744916,"body_markdown":"What do you mean by &quot;assign to a String&quot;? Do you mean you want a function that has an input parameter of an Int and returns a range formatted as a String? No Behavior return value? My answer solves the request you had &quot; i.e. return SMILE for 3&lt;x&lt;= 4&quot;","body":"What do you mean by &quot;assign to a String&quot;? Do you mean you want a function that has an input parameter of an Int and returns a range formatted as a String? No Behavior return value? My answer solves the request you had &quot; i.e. return SMILE for 3&lt;x&lt;= 4&quot;"},{"owner":{"account_id":27761018,"reputation":71,"user_id":21193451,"display_name":"user21193451"},"score":0,"creation_date":1693328055,"post_id":77002099,"comment_id":135745055,"body_markdown":"That is what I want (return SMILE for 3&lt;x&lt;= 4&quot;). I asked this because I see no interval in your code. everything is in Int!!","body":"That is what I want (return SMILE for 3&lt;x&lt;= 4&quot;). I asked this because I see no interval in your code. everything is in Int!!"},{"owner":{"account_id":27761018,"reputation":71,"user_id":21193451,"display_name":"user21193451"},"score":0,"creation_date":1693328305,"post_id":77002099,"comment_id":135745108,"body_markdown":"`Behavior(3.5)` will return `SMILE`? but it accept just int values.!!","body":"<code>Behavior(3.5)</code> will return <code>SMILE</code>? but it accept just int values.!!"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":1,"creation_date":1693329814,"post_id":77002099,"comment_id":135745406,"body_markdown":"The logic will do what you&#39;re describing without separately defined ranges. It works because we keep the items sorted, so the sorted list acts as the definition of the ranges. If you want to accept doubles, you can change it to `code: Double` and it should still work.","body":"The logic will do what you&#39;re describing without separately defined ranges. It works because we keep the items sorted, so the sorted list acts as the definition of the ranges. If you want to accept doubles, you can change it to <code>code: Double</code> and it should still work."}],"tags":[],"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"comment_count":5,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1693326976,"creation_date":1693326976,"answer_id":77002099,"question_id":77001594,"body_markdown":"This is in Kotlin, but you can do something similar in Java with a static function and member collection.\r\n\r\nKeep a sorted list of the items, then search it when an item is requested in the companion object function.\r\n\r\n```kotlin\r\nenum class Behavior(val behaviorCode: Int) {\r\n    SMILE(4),\r\n    FUNNY(3),\r\n    NORMAL(2),\r\n    SAD(1),\r\n    CRY(0);\r\n\r\n    companion object {\r\n        private val sortedByCode = Behavior.values().sortedBy(Behavior::behaviorCode)\r\n\r\n        fun forCode(code: Int): Behavior? = sortedByCode.firstOrNull { it.behaviorCode &gt;= code }\r\n    }\r\n}","title":"How can I have enum of interval type instead of single integer type?","body":"<p>This is in Kotlin, but you can do something similar in Java with a static function and member collection.</p>\n<p>Keep a sorted list of the items, then search it when an item is requested in the companion object function.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>enum class Behavior(val behaviorCode: Int) {\n    SMILE(4),\n    FUNNY(3),\n    NORMAL(2),\n    SAD(1),\n    CRY(0);\n\n    companion object {\n        private val sortedByCode = Behavior.values().sortedBy(Behavior::behaviorCode)\n\n        fun forCode(code: Int): Behavior? = sortedByCode.firstOrNull { it.behaviorCode &gt;= code }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693336513,"creation_date":1693336513,"answer_id":77003076,"question_id":77001594,"body_markdown":"For Java, you can use a [`Predicate&lt;Double&gt;`][1]. That would be the simplest way.\r\n\r\nBy the way, I am assuming that your intervals do not overlap. If they do, provide clarification via an edit to your post, and then comment on my answer, notifying me.\r\n\r\n```java\r\n   public enum Behavior \r\n   {\r\n      \r\n      SMILE(4),\r\n      FUNNY(3),\r\n      NORMAL(2),\r\n      SAD(1),\r\n      CRY(0),\r\n      ;\r\n   \r\n      final int behaviorCode;\r\n      private final java.util.function.Predicate&lt;Double&gt; range;\r\n   \r\n      Behavior(final int behaviorCode) \r\n      {\r\n      \r\n         this.behaviorCode = behaviorCode;\r\n         this.range = x -&gt; this.behaviorCode &lt; x &amp;&amp; x &lt;= this.behaviorCode + 1;\r\n      \r\n      }\r\n      \r\n      public static Behavior forValue(final double value)\r\n      {\r\n      \r\n         for (final Behavior each : Behavior.values())\r\n         {\r\n         \r\n            if (each.range.test(value))\r\n            {\r\n            \r\n               return each;\r\n            \r\n            }\r\n         \r\n         }\r\n         \r\n         throw new IllegalArgumentException(&quot;value does not match any of the Behaviour Codes! value = &quot; + value);\r\n      \r\n      }\r\n   \r\n   }\r\n```\r\n\r\nIf I run it, here is how it goes.\r\n\r\n```\r\nBehavior.forValue(5)      ---&gt; Behavior.SMILE\r\nBehavior.forValue(4.9999) ---&gt; Behavior.SMILE\r\nBehavior.forValue(4.0001) ---&gt; Behavior.SMILE\r\nBehavior.forValue(4)      ---&gt; Behavior.FUNNY\r\nBehavior.forValue(4.0)    ---&gt; Behavior.FUNNY\r\nBehavior.forValue(3.9999) ---&gt; Behavior.FUNNY\r\nBehavior.forValue(3)      ---&gt; Behavior.NORMAL\r\nBehavior.forValue(2)      ---&gt; Behavior.SAD\r\nBehavior.forValue(1)      ---&gt; Behavior.CRY\r\nBehavior.forValue(0)      ---&gt; java.lang.IllegalArgumentException: value does not match any of the Behaviour Codes! value = 0.0\r\nBehavior.forValue(5.0001) ---&gt; java.lang.IllegalArgumentException: value does not match any of the Behaviour Codes! value = 5.0001\r\nBehavior.forValue(6)      ---&gt; java.lang.IllegalArgumentException: value does not match any of the Behaviour Codes! value = 6.0\r\nBehavior.forValue(42)     ---&gt; java.lang.IllegalArgumentException: value does not match any of the Behaviour Codes! value = 42.0\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/function/Predicate.html","title":"How can I have enum of interval type instead of single integer type?","body":"<p>For Java, you can use a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/function/Predicate.html\" rel=\"nofollow noreferrer\"><code>Predicate&lt;Double&gt;</code></a>. That would be the simplest way.</p>\n<p>By the way, I am assuming that your intervals do not overlap. If they do, provide clarification via an edit to your post, and then comment on my answer, notifying me.</p>\n<pre class=\"lang-java prettyprint-override\"><code>   public enum Behavior \n   {\n      \n      SMILE(4),\n      FUNNY(3),\n      NORMAL(2),\n      SAD(1),\n      CRY(0),\n      ;\n   \n      final int behaviorCode;\n      private final java.util.function.Predicate&lt;Double&gt; range;\n   \n      Behavior(final int behaviorCode) \n      {\n      \n         this.behaviorCode = behaviorCode;\n         this.range = x -&gt; this.behaviorCode &lt; x &amp;&amp; x &lt;= this.behaviorCode + 1;\n      \n      }\n      \n      public static Behavior forValue(final double value)\n      {\n      \n         for (final Behavior each : Behavior.values())\n         {\n         \n            if (each.range.test(value))\n            {\n            \n               return each;\n            \n            }\n         \n         }\n         \n         throw new IllegalArgumentException(&quot;value does not match any of the Behaviour Codes! value = &quot; + value);\n      \n      }\n   \n   }\n</code></pre>\n<p>If I run it, here is how it goes.</p>\n<pre><code>Behavior.forValue(5)      ---&gt; Behavior.SMILE\nBehavior.forValue(4.9999) ---&gt; Behavior.SMILE\nBehavior.forValue(4.0001) ---&gt; Behavior.SMILE\nBehavior.forValue(4)      ---&gt; Behavior.FUNNY\nBehavior.forValue(4.0)    ---&gt; Behavior.FUNNY\nBehavior.forValue(3.9999) ---&gt; Behavior.FUNNY\nBehavior.forValue(3)      ---&gt; Behavior.NORMAL\nBehavior.forValue(2)      ---&gt; Behavior.SAD\nBehavior.forValue(1)      ---&gt; Behavior.CRY\nBehavior.forValue(0)      ---&gt; java.lang.IllegalArgumentException: value does not match any of the Behaviour Codes! value = 0.0\nBehavior.forValue(5.0001) ---&gt; java.lang.IllegalArgumentException: value does not match any of the Behaviour Codes! value = 5.0001\nBehavior.forValue(6)      ---&gt; java.lang.IllegalArgumentException: value does not match any of the Behaviour Codes! value = 6.0\nBehavior.forValue(42)     ---&gt; java.lang.IllegalArgumentException: value does not match any of the Behaviour Codes! value = 42.0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693338272,"creation_date":1693338272,"answer_id":77003234,"question_id":77001594,"body_markdown":"If your intervals are adjacent, you can treat each value as a ceiling with another field to indicate whether it&#39;s inclusive or exclusive:\r\n\r\n    public enum Behavior {\r\n        SMILE(5, true),\r\n        FUNNY(4, true),\r\n        NORMAL(3, true),\r\n        SAD(2, false),\r\n        CRY(1, false);\r\n\r\n        public static Behavior find(double value) {\r\n            return Arrays.stream(values())\r\n                    .sorted(Comparator.comparingDouble(b -&gt; b.ceil))\r\n                    .filter(b -&gt; b.inclusive ? value &lt;= b.ceil : value &lt; b.ceil)\r\n                    .findFirst()\r\n                    .orElse(null);\r\n        }\r\n\r\n        private final double ceil;\r\n        private final boolean inclusive;\r\n\r\n        Behavior(double ceil, boolean inclusive) {\r\n            this.ceil = ceil;\r\n            this.inclusive = inclusive;\r\n        }\r\n    }\r\n\r\nIf you need more flexibility, take a look at [Guava&#39;s][1] `Range` and `RangeMap`.\r\n\r\n\r\n  [1]: https://github.com/google/guava/wiki/RangesExplained","title":"How can I have enum of interval type instead of single integer type?","body":"<p>If your intervals are adjacent, you can treat each value as a ceiling with another field to indicate whether it's inclusive or exclusive:</p>\n<pre><code>public enum Behavior {\n    SMILE(5, true),\n    FUNNY(4, true),\n    NORMAL(3, true),\n    SAD(2, false),\n    CRY(1, false);\n\n    public static Behavior find(double value) {\n        return Arrays.stream(values())\n                .sorted(Comparator.comparingDouble(b -&gt; b.ceil))\n                .filter(b -&gt; b.inclusive ? value &lt;= b.ceil : value &lt; b.ceil)\n                .findFirst()\n                .orElse(null);\n    }\n\n    private final double ceil;\n    private final boolean inclusive;\n\n    Behavior(double ceil, boolean inclusive) {\n        this.ceil = ceil;\n        this.inclusive = inclusive;\n    }\n}\n</code></pre>\n<p>If you need more flexibility, take a look at <a href=\"https://github.com/google/guava/wiki/RangesExplained\" rel=\"nofollow noreferrer\">Guava's</a> <code>Range</code> and <code>RangeMap</code>.</p>\n"}],"owner":{"account_id":27761018,"reputation":71,"user_id":21193451,"display_name":"user21193451"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77002099,"answer_count":3,"score":1,"last_activity_date":1693338272,"creation_date":1693323087,"question_id":77001594,"body_markdown":"I want to assign a String/behavior  to each interval [0,1), [1,2), ..., [4, 5]. For a general `enum` class we can assign just an integer to each String:\r\n\r\n````````\r\npublic enum Behavior {\r\n    SMILE(4),\r\n    FUNNY(3),\r\n    NORMAL(2),\r\n    SAD(1),\r\n    CRY(0);\r\n\r\n    final int behaviorCode;\r\n\r\n    BehaviorCode(int behaviorCode) {\r\n        this.behaviorCode= behaviorCode;\r\n    }\r\n}\r\n````````\r\n\r\nIs that possible to have something like `SMILE((3,4])` in Java? i.e. return `SMILE` for `3&lt;x&lt;= 4`.\r\n\r\nI know that one can write a similar method inside the activity/fragment using `if-else`. But I like to do that with enum or at least in less code.","title":"How can I have enum of interval type instead of single integer type?","body":"<p>I want to assign a String/behavior  to each interval [0,1), [1,2), ..., [4, 5]. For a general <code>enum</code> class we can assign just an integer to each String:</p>\n<pre><code>public enum Behavior {\n    SMILE(4),\n    FUNNY(3),\n    NORMAL(2),\n    SAD(1),\n    CRY(0);\n\n    final int behaviorCode;\n\n    BehaviorCode(int behaviorCode) {\n        this.behaviorCode= behaviorCode;\n    }\n}\n</code></pre>\n<p>Is that possible to have something like <code>SMILE((3,4])</code> in Java? i.e. return <code>SMILE</code> for <code>3&lt;x&lt;= 4</code>.</p>\n<p>I know that one can write a similar method inside the activity/fragment using <code>if-else</code>. But I like to do that with enum or at least in less code.</p>\n"},{"tags":["java","assertj"],"comments":[{"owner":{"account_id":39322,"reputation":1695,"user_id":113332,"accept_rate":94,"display_name":"Jon Bristow"},"score":0,"creation_date":1693339162,"post_id":77002695,"comment_id":135747094,"body_markdown":"Ok, arguing about what I was asking has pushed me a little closer, but I&#39;m not sure I want to edit the original question.  Why does the `ListAssert&lt;ELEMENT&gt;` need to convert into a capture (specifically `? super List&lt;? extends ELEMENT&gt;`) when calling satisfies? What would be the disadvantage of returning `? super List&lt;ELEMENT&gt;`?","body":"Ok, arguing about what I was asking has pushed me a little closer, but I&#39;m not sure I want to edit the original question.  Why does the <code>ListAssert&lt;ELEMENT&gt;</code> need to convert into a capture (specifically <code>? super List&lt;? extends ELEMENT&gt;</code>) when calling satisfies? What would be the disadvantage of returning <code>? super List&lt;ELEMENT&gt;</code>?"}],"answers":[{"comments":[{"owner":{"account_id":39322,"reputation":1695,"user_id":113332,"accept_rate":94,"display_name":"Jon Bristow"},"score":0,"creation_date":1693335285,"post_id":77002922,"comment_id":135746414,"body_markdown":"but why? Can you explain what the compiler is getting confused about? Like I said in my question, I know *how* to fix it, but I want to know _why I have to._","body":"but why? Can you explain what the compiler is getting confused about? Like I said in my question, I know <i>how</i> to fix it, but I want to know <i>why I have to.</i>"},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1693335662,"post_id":77002922,"comment_id":135746466,"body_markdown":"@JonBristow I added an example of the code behind the AssertJ library.","body":"@JonBristow I added an example of the code behind the AssertJ library."},{"owner":{"account_id":39322,"reputation":1695,"user_id":113332,"accept_rate":94,"display_name":"Jon Bristow"},"score":0,"creation_date":1693336074,"post_id":77002922,"comment_id":135746542,"body_markdown":"Nope, still doesn&#39;t answer my question... why does it appear that `List&lt;ELEMENT&gt;` is not assignable to `Iterable&lt;? extends ELEMENT&gt;`. what _specifically_ is confusing the compiler.","body":"Nope, still doesn&#39;t answer my question... why does it appear that <code>List&lt;ELEMENT&gt;</code> is not assignable to <code>Iterable&lt;? extends ELEMENT&gt;</code>. what <i>specifically</i> is confusing the compiler."},{"owner":{"account_id":39322,"reputation":1695,"user_id":113332,"accept_rate":94,"display_name":"Jon Bristow"},"score":0,"creation_date":1693336161,"post_id":77002922,"comment_id":135746555,"body_markdown":"my example code contains the assignment from `List` to `Iterable` _and it compiles just fine!_ Where exactly does it break when doing what looks should end up the same type in AssertJ?","body":"my example code contains the assignment from <code>List</code> to <code>Iterable</code> <i>and it compiles just fine!</i> Where exactly does it break when doing what looks should end up the same type in AssertJ?"},{"owner":{"account_id":39322,"reputation":1695,"user_id":113332,"accept_rate":94,"display_name":"Jon Bristow"},"score":0,"creation_date":1693336470,"post_id":77002922,"comment_id":135746612,"body_markdown":"And I understand that `Iterable&lt;? extends capture&lt;? extends example.ExampleTest.ICommon&gt;&gt;` is not _exactly_ the same as `Iterable&lt;capture&lt;? extends example.ExampleTest.ICommon&gt;&gt;` but why not? What is the compiler choking on?","body":"And I understand that <code>Iterable&lt;? extends capture&lt;? extends example.ExampleTest.ICommon&gt;&gt;</code> is not <i>exactly</i> the same as <code>Iterable&lt;capture&lt;? extends example.ExampleTest.ICommon&gt;&gt;</code> but why not? What is the compiler choking on?"},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1693336473,"post_id":77002922,"comment_id":135746616,"body_markdown":"@JonBristow, calling `assertThat(actual)` already returns a `ListAssert&lt;ICommon&gt;`","body":"@JonBristow, calling <code>assertThat(actual)</code> already returns a <code>ListAssert&lt;ICommon&gt;</code>"},{"owner":{"account_id":39322,"reputation":1695,"user_id":113332,"accept_rate":94,"display_name":"Jon Bristow"},"score":0,"creation_date":1693336712,"post_id":77002922,"comment_id":135746665,"body_markdown":"again, I don&#39;t want to know HOW to fix it. I want to know what the compiler is doing. How exactly is`Iterable&lt;? extends X&gt;` not equivalent to `Iterable&lt;X&gt;` when `X` is a capture of `&lt;? extends ICommon&gt;`?","body":"again, I don&#39;t want to know HOW to fix it. I want to know what the compiler is doing. How exactly is<code>Iterable&lt;? extends X&gt;</code> not equivalent to <code>Iterable&lt;X&gt;</code> when <code>X</code> is a capture of <code>&lt;? extends ICommon&gt;</code>?"},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":1,"creation_date":1693336976,"post_id":77002922,"comment_id":135746710,"body_markdown":"@JonBristow I think this [Reddit comment](https://www.reddit.com/r/javahelp/comments/d35ds9/java_generics_addcapture_of_cannot_be_applied_to/ezzcguy/) sums it up. I tailored the wording to **your scenario:** _`List&lt;? extends ELEMENT&gt;` should be read as &quot;a `List` of a specific but unknown type that extends `ELEMENT`&quot;, and since that specific but unknown type is not known (it could for example be anything...), you cannot just add `ELEMENT` objects to that list, since the `ELEMENT` is not guaranteed to be of that correct (specific but unknown) type._","body":"@JonBristow I think this <a href=\"https://www.reddit.com/r/javahelp/comments/d35ds9/java_generics_addcapture_of_cannot_be_applied_to/ezzcguy/\" rel=\"nofollow noreferrer\">Reddit comment</a> sums it up. I tailored the wording to <b>your scenario:</b> <i><code>List&lt;? extends ELEMENT&gt;</code> should be read as &quot;a <code>List</code> of a specific but unknown type that extends <code>ELEMENT</code>&quot;, and since that specific but unknown type is not known (it could for example be anything...), you cannot just add <code>ELEMENT</code> objects to that list, since the <code>ELEMENT</code> is not guaranteed to be of that correct (specific but unknown) type.</i>"},{"owner":{"account_id":39322,"reputation":1695,"user_id":113332,"accept_rate":94,"display_name":"Jon Bristow"},"score":0,"creation_date":1693337769,"post_id":77002922,"comment_id":135746839,"body_markdown":"But where is the difference coming from? As you pointed out, assertJ is returning a `ListAssert&lt;ICommon&gt;` so we would expect the `containsAnyElementsOf` to accept a `Iterable&lt;? extends ICommon&gt;`why is `List&lt;ICommon&gt;` not assignable to this?  (And why is the actual type reading as `Iterable&lt;? extends ? extends ICommon&gt;`? And why doesn&#39;t ICommon fit the invariant here?)","body":"But where is the difference coming from? As you pointed out, assertJ is returning a <code>ListAssert&lt;ICommon&gt;</code> so we would expect the <code>containsAnyElementsOf</code> to accept a <code>Iterable&lt;? extends ICommon&gt;</code>why is <code>List&lt;ICommon&gt;</code> not assignable to this?  (And why is the actual type reading as <code>Iterable&lt;? extends ? extends ICommon&gt;</code>? And why doesn&#39;t ICommon fit the invariant here?)"},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":1,"creation_date":1693338046,"post_id":77002922,"comment_id":135746891,"body_markdown":"@JonBristow AssertJ is only returning a ListAssert&lt;ICommon&gt;, because `assertThat()` behaves differently from an assertion passed in via `satisfies()`. They have different method signatures. When calling `satisfies()`, you need to assign the result to a variable, or else it will not deduce the type correctly.","body":"@JonBristow AssertJ is only returning a ListAssert&lt;ICommon&gt;, because <code>assertThat()</code> behaves differently from an assertion passed in via <code>satisfies()</code>. They have different method signatures. When calling <code>satisfies()</code>, you need to assign the result to a variable, or else it will not deduce the type correctly."},{"owner":{"account_id":39322,"reputation":1695,"user_id":113332,"accept_rate":94,"display_name":"Jon Bristow"},"score":0,"creation_date":1693338728,"post_id":77002922,"comment_id":135747011,"body_markdown":"Where is the extra capture/question mark coming from, and why is the assertj api written so that this happens? What breaks if we change FactoryBasedNavigableListAssert from `ACTUAL extends List&lt;? extends ELEMENT&gt;` to `ACTUAL extends List&lt;ELEMENT&gt;`?","body":"Where is the extra capture/question mark coming from, and why is the assertj api written so that this happens? What breaks if we change FactoryBasedNavigableListAssert from <code>ACTUAL extends List&lt;? extends ELEMENT&gt;</code> to <code>ACTUAL extends List&lt;ELEMENT&gt;</code>?"}],"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"comment_count":11,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1693337128,"creation_date":1693335079,"answer_id":77002922,"question_id":77002695,"body_markdown":"You need to assign the `assertThat(assertion)` statement to a typed `ListAssert&lt;ICommon&gt;` variable. This is because the `assertThat` method does not know what the concrete list type should be.\r\n\r\n```java\r\nassertThat(actual).satisfies(assertion -&gt; {\r\n    ListAssert&lt;ICommon&gt; list = assertThat(assertion); // Declare the type\r\n    list.containsAnyElementsOf(expected);\r\n});\r\n```\r\n\r\n---\r\n\r\nHere is a working unit test. I used Lombok to annotate the classes to supply the `equals()` and `hashCode()` methods. Also, I changed `List.of` to `Arrays.asList` for Java 8 compatibility. Feel free to change it back.\r\n\r\n```java\r\npackage org.example;\r\n\r\nimport static org.assertj.core.api.Assertions.assertThat;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\nimport org.assertj.core.api.ListAssert;\r\nimport org.junit.Test;\r\n\r\nimport lombok.EqualsAndHashCode;\r\n\r\npublic class ExampleTest {\r\n    public interface ICommon {}\r\n\r\n    @EqualsAndHashCode\r\n    public static class TypeA implements ICommon {}\r\n\r\n    @EqualsAndHashCode\r\n    public static class TypeB implements ICommon {}\r\n\r\n    @Test\r\n    public void test() {\r\n        final List&lt;ICommon&gt; actual = Arrays.asList(new TypeA(), new TypeB());\r\n        final List&lt;ICommon&gt; expected = Arrays.asList(new TypeA());\r\n\r\n        assertThat(actual).satisfies(assertion -&gt; {\r\n            ListAssert&lt;ICommon&gt; list = assertThat(assertion);\r\n            list.containsAnyElementsOf(expected);\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nYou could also cast the list inline:\r\n\r\n```java\r\n@Test\r\n@SuppressWarnings(&quot;unchecked&quot;)\r\npublic void test() {\r\n    final List&lt;ICommon&gt; actual = Arrays.asList(new TypeA(), new TypeB());\r\n    final List&lt;ICommon&gt; expected = Arrays.asList(new TypeA());\r\n\r\n    assertThat(actual)\r\n        .satisfies(assertion -&gt; ((ListAssert&lt;ICommon&gt;) assertThat(assertion))\r\n            .containsAnyElementsOf(expected));\r\n}\r\n```\r\n\r\nSince the `org.assertj.core.api.Assertions#assertThat` method is static, you are required to assign its result into a `ListAssert&lt;ELEMENT&gt;` variables. Where `ELEMENT` is the type of list item to be checked. I believe they thing that is throwing you off is the `&lt;? extends ELEMENT&gt;` part.\r\n\r\n```java\r\n/**\r\n * Creates a new instance of &lt;code&gt;{@link ListAssert}&lt;/code&gt;.\r\n *\r\n * @param &lt;ELEMENT&gt; the type of elements.\r\n * @param actual the actual value.\r\n * @return the created assertion object.\r\n */\r\npublic static &lt;ELEMENT&gt; ListAssert&lt;ELEMENT&gt; assertThat(List&lt;? extends ELEMENT&gt; actual) {\r\n  return AssertionsForInterfaceTypes.assertThat(actual);\r\n}\r\n```\r\n\r\nYou could simplify this to just:\r\n\r\n```java\r\nassertThat(actual).containsAnyElementsOf(expected);\r\n```","title":"What is the captured class of the satisfies method when applied to a list?","body":"<p>You need to assign the <code>assertThat(assertion)</code> statement to a typed <code>ListAssert&lt;ICommon&gt;</code> variable. This is because the <code>assertThat</code> method does not know what the concrete list type should be.</p>\n<pre class=\"lang-java prettyprint-override\"><code>assertThat(actual).satisfies(assertion -&gt; {\n    ListAssert&lt;ICommon&gt; list = assertThat(assertion); // Declare the type\n    list.containsAnyElementsOf(expected);\n});\n</code></pre>\n<hr />\n<p>Here is a working unit test. I used Lombok to annotate the classes to supply the <code>equals()</code> and <code>hashCode()</code> methods. Also, I changed <code>List.of</code> to <code>Arrays.asList</code> for Java 8 compatibility. Feel free to change it back.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\nimport java.util.Arrays;\nimport java.util.List;\n\nimport org.assertj.core.api.ListAssert;\nimport org.junit.Test;\n\nimport lombok.EqualsAndHashCode;\n\npublic class ExampleTest {\n    public interface ICommon {}\n\n    @EqualsAndHashCode\n    public static class TypeA implements ICommon {}\n\n    @EqualsAndHashCode\n    public static class TypeB implements ICommon {}\n\n    @Test\n    public void test() {\n        final List&lt;ICommon&gt; actual = Arrays.asList(new TypeA(), new TypeB());\n        final List&lt;ICommon&gt; expected = Arrays.asList(new TypeA());\n\n        assertThat(actual).satisfies(assertion -&gt; {\n            ListAssert&lt;ICommon&gt; list = assertThat(assertion);\n            list.containsAnyElementsOf(expected);\n        });\n    }\n}\n</code></pre>\n<p>You could also cast the list inline:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\n@SuppressWarnings(&quot;unchecked&quot;)\npublic void test() {\n    final List&lt;ICommon&gt; actual = Arrays.asList(new TypeA(), new TypeB());\n    final List&lt;ICommon&gt; expected = Arrays.asList(new TypeA());\n\n    assertThat(actual)\n        .satisfies(assertion -&gt; ((ListAssert&lt;ICommon&gt;) assertThat(assertion))\n            .containsAnyElementsOf(expected));\n}\n</code></pre>\n<p>Since the <code>org.assertj.core.api.Assertions#assertThat</code> method is static, you are required to assign its result into a <code>ListAssert&lt;ELEMENT&gt;</code> variables. Where <code>ELEMENT</code> is the type of list item to be checked. I believe they thing that is throwing you off is the <code>&lt;? extends ELEMENT&gt;</code> part.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Creates a new instance of &lt;code&gt;{@link ListAssert}&lt;/code&gt;.\n *\n * @param &lt;ELEMENT&gt; the type of elements.\n * @param actual the actual value.\n * @return the created assertion object.\n */\npublic static &lt;ELEMENT&gt; ListAssert&lt;ELEMENT&gt; assertThat(List&lt;? extends ELEMENT&gt; actual) {\n  return AssertionsForInterfaceTypes.assertThat(actual);\n}\n</code></pre>\n<p>You could simplify this to just:</p>\n<pre class=\"lang-java prettyprint-override\"><code>assertThat(actual).containsAnyElementsOf(expected);\n</code></pre>\n"}],"owner":{"account_id":39322,"reputation":1695,"user_id":113332,"accept_rate":94,"display_name":"Jon Bristow"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693337128,"creation_date":1693332887,"question_id":77002695,"body_markdown":"I admit this is a contrived situation, but why does the following code not compile?\r\n\r\nEnvironment details: \r\n- Java: openjdk 11.0.20 2023-07-18\r\n- AssertJ: 3.24.2 (discovered while running 3.21.0)\r\n\r\n\r\n```java\r\npackage example;\r\n\r\nimport org.junit.Test;\r\n\r\nimport java.util.List;\r\n\r\nimport static org.assertj.core.api.Assertions.*;\r\n\r\npublic class ExampleTest {\r\n    public interface ICommon {\r\n\r\n    }\r\n\r\n    public static class TypeA implements ICommon {\r\n        // assume overridden equals\r\n    }\r\n\r\n    public static class TypeB implements ICommon {\r\n        // assume overridden equals\r\n    }\r\n\r\n    @Test\r\n    public void test() {\r\n        final List&lt;ICommon&gt; actual = List.of(new TypeA(), new TypeB());\r\n        final List&lt;ICommon&gt; expected = List.of(new TypeA());\r\n\r\n        final Iterable&lt;? extends ICommon&gt; thisCompiles = expected; // no problems\r\n\r\n        /*\r\n         * &#39;containsAnyElementsOf(java.lang.Iterable&lt;? extends capture&lt;? extends example.ExampleTest.ICommon&gt;&gt;)&#39;\r\n         * in &#39;org.assertj.core.api.AbstractIterableAssert&#39; cannot be applied to\r\n         * &#39;(java.util.List&lt;example.ExampleTest.ICommon&gt;)&#39;\r\n         */\r\n        assertThat(actual).satisfies(r -&gt; assertThat(r).containsAnyElementsOf(expected));\r\n\r\n        /*\r\n         *\r\n         * &#39;containsAnyElementsOf(java.lang.Iterable&lt;? extends capture&lt;? extends example.ExampleTest.ICommon&gt;&gt;)&#39;\r\n         * in &#39;org.assertj.core.api.AbstractIterableAssert&#39; cannot be applied to\r\n         * &#39;(java.lang.Iterable&lt;capture&lt;? extends example.ExampleTest.ICommon&gt;&gt;)&#39;\r\n         */\r\n        assertThat(actual).satisfies(r -&gt; assertThat(r).containsAnyElementsOf(thisCompiles));\r\n    }\r\n}\r\n```\r\n(I Reiterate: this example is not a good way to test what is being tested, it is merely a stripped down model for example purposes only. DO NOT use it as an example of best practices. This is not a place of honor.)\r\n\r\nA coworker came to me with code that ultimately boiled down to a similar situation. I managed to give them a better way to do the assertion, but I was personally disturbed because I realized I could not explain _why_ this code does not compile. Because of this I am returning to StackOverflow after a long absence to throw this to the community. What is preventing the compiler from figuring this code out? \r\n\r\n","title":"What is the captured class of the satisfies method when applied to a list?","body":"<p>I admit this is a contrived situation, but why does the following code not compile?</p>\n<p>Environment details:</p>\n<ul>\n<li>Java: openjdk 11.0.20 2023-07-18</li>\n<li>AssertJ: 3.24.2 (discovered while running 3.21.0)</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>package example;\n\nimport org.junit.Test;\n\nimport java.util.List;\n\nimport static org.assertj.core.api.Assertions.*;\n\npublic class ExampleTest {\n    public interface ICommon {\n\n    }\n\n    public static class TypeA implements ICommon {\n        // assume overridden equals\n    }\n\n    public static class TypeB implements ICommon {\n        // assume overridden equals\n    }\n\n    @Test\n    public void test() {\n        final List&lt;ICommon&gt; actual = List.of(new TypeA(), new TypeB());\n        final List&lt;ICommon&gt; expected = List.of(new TypeA());\n\n        final Iterable&lt;? extends ICommon&gt; thisCompiles = expected; // no problems\n\n        /*\n         * 'containsAnyElementsOf(java.lang.Iterable&lt;? extends capture&lt;? extends example.ExampleTest.ICommon&gt;&gt;)'\n         * in 'org.assertj.core.api.AbstractIterableAssert' cannot be applied to\n         * '(java.util.List&lt;example.ExampleTest.ICommon&gt;)'\n         */\n        assertThat(actual).satisfies(r -&gt; assertThat(r).containsAnyElementsOf(expected));\n\n        /*\n         *\n         * 'containsAnyElementsOf(java.lang.Iterable&lt;? extends capture&lt;? extends example.ExampleTest.ICommon&gt;&gt;)'\n         * in 'org.assertj.core.api.AbstractIterableAssert' cannot be applied to\n         * '(java.lang.Iterable&lt;capture&lt;? extends example.ExampleTest.ICommon&gt;&gt;)'\n         */\n        assertThat(actual).satisfies(r -&gt; assertThat(r).containsAnyElementsOf(thisCompiles));\n    }\n}\n</code></pre>\n<p>(I Reiterate: this example is not a good way to test what is being tested, it is merely a stripped down model for example purposes only. DO NOT use it as an example of best practices. This is not a place of honor.)</p>\n<p>A coworker came to me with code that ultimately boiled down to a similar situation. I managed to give them a better way to do the assertion, but I was personally disturbed because I realized I could not explain <em>why</em> this code does not compile. Because of this I am returning to StackOverflow after a long absence to throw this to the community. What is preventing the compiler from figuring this code out?</p>\n"},{"tags":["java","android","react-native"],"answers":[{"comments":[{"owner":{"account_id":11026741,"reputation":66,"user_id":8099410,"display_name":"clonalejandro"},"score":0,"creation_date":1693338186,"post_id":77003129,"comment_id":135746912,"body_markdown":"https://i.imgur.com/4c9Y9nl.png\nWhy I dont have the getEuiccProfileInfoList method?","body":"<a href=\"https://i.imgur.com/4c9Y9nl.png\" rel=\"nofollow noreferrer\">i.imgur.com/4c9Y9nl.png</a> Why I dont have the getEuiccProfileInfoList method?"}],"tags":[],"owner":{"account_id":18999437,"reputation":2461,"user_id":13867124,"display_name":"AztecCodes"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693337098,"creation_date":1693337098,"answer_id":77003129,"question_id":77002858,"body_markdown":"Using the `EuiccManager` class should do the job. Use the `downloadSubscription()` and `getEuiccProfileInfoList()` methods to retrieve all of the eSIM profiles. You can download a subscription to the `eUICC` and get the list of the profiles that are on the `eUICC`.\r\n\r\n**How to adapt your code:**\r\n```java\r\npublic void listESIMProfiles(Promise promise) {\r\n    try {\r\n        EuiccManager euiccManager = (EuiccManager) getReactApplicationContext().getSystemService(Context.EUICC_SERVICE);\r\n\r\n        // This callback gets all the available profiles on the eUICC.\r\n        euiccManager.getEuiccProfileInfoList(new EuiccManager.GetEuiccProfileInfoListCallback() {\r\n            @Override\r\n            public void onComplete(GetEuiccProfileInfoListResult result) {\r\n\r\n                if (result.getResult() == EuiccManager.EUICC_RESULT_SUCCESS) {\r\n                    List&lt;String&gt; profiles = new ArrayList&lt;&gt;();\r\n    \r\n                    for (EuiccProfileInfo info : result.getProfiles()) {\r\n                        // You can add more details from EuiccProfileInfo if you want to.\r\n                        profiles.add(info.getIccid());\r\n                    }\r\n                    promise.resolve(profiles);\r\n                }\r\n\r\n                else {\r\n                    promise.reject(&quot;ERROR&quot;, &quot;Failed to get profiles.&quot;);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    catch (Exception e) {\r\n        promise.reject(&quot;ERROR&quot;, e.getMessage());\r\n    }\r\n}\r\n```","title":"get all esim profiles of my card Android API","body":"<p>Using the <code>EuiccManager</code> class should do the job. Use the <code>downloadSubscription()</code> and <code>getEuiccProfileInfoList()</code> methods to retrieve all of the eSIM profiles. You can download a subscription to the <code>eUICC</code> and get the list of the profiles that are on the <code>eUICC</code>.</p>\n<p><strong>How to adapt your code:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public void listESIMProfiles(Promise promise) {\n    try {\n        EuiccManager euiccManager = (EuiccManager) getReactApplicationContext().getSystemService(Context.EUICC_SERVICE);\n\n        // This callback gets all the available profiles on the eUICC.\n        euiccManager.getEuiccProfileInfoList(new EuiccManager.GetEuiccProfileInfoListCallback() {\n            @Override\n            public void onComplete(GetEuiccProfileInfoListResult result) {\n\n                if (result.getResult() == EuiccManager.EUICC_RESULT_SUCCESS) {\n                    List&lt;String&gt; profiles = new ArrayList&lt;&gt;();\n    \n                    for (EuiccProfileInfo info : result.getProfiles()) {\n                        // You can add more details from EuiccProfileInfo if you want to.\n                        profiles.add(info.getIccid());\n                    }\n                    promise.resolve(profiles);\n                }\n\n                else {\n                    promise.reject(&quot;ERROR&quot;, &quot;Failed to get profiles.&quot;);\n                }\n            }\n        });\n    }\n    catch (Exception e) {\n        promise.reject(&quot;ERROR&quot;, e.getMessage());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11026741,"reputation":66,"user_id":8099410,"display_name":"clonalejandro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693337098,"creation_date":1693334538,"question_id":77002858,"body_markdown":"I want to get all esim profiles of my esim card\r\nHow can i get it ? \r\n\r\n\r\nIm trying this function \r\n\r\n```java\r\n    public void listESIMProfiles(Promise promise) {\r\n        try {\r\n            EuiccManager euiccManager = (EuiccManager) getReactApplicationContext().getSystemService(Context.EUICC_SERVICE);\r\n            List&lt;UiccCardInfo&gt; uiccCardInfos = euiccManager.getUiccCardsInfo();\r\n            List&lt;String&gt; profiles = new ArrayList&lt;&gt;();\r\n            for (UiccCardInfo uiccCardInfo : uiccCardInfos) {\r\n                EuiccInfo euiccInfo = uiccCardInfo.getEuiccInfo();\r\n                if (euiccInfo != null) {\r\n                    profiles.add(euiccInfo.getEid());\r\n                }\r\n            }\r\n            promise.resolve(profiles);\r\n        } catch (Exception e) {\r\n            promise.reject(&quot;ERROR&quot;, e.getMessage());\r\n        }\r\n    }\r\n```\r\n\r\nbut the method `getUiccCardsInfo` does not exists","title":"get all esim profiles of my card Android API","body":"<p>I want to get all esim profiles of my esim card\nHow can i get it ?</p>\n<p>Im trying this function</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public void listESIMProfiles(Promise promise) {\n        try {\n            EuiccManager euiccManager = (EuiccManager) getReactApplicationContext().getSystemService(Context.EUICC_SERVICE);\n            List&lt;UiccCardInfo&gt; uiccCardInfos = euiccManager.getUiccCardsInfo();\n            List&lt;String&gt; profiles = new ArrayList&lt;&gt;();\n            for (UiccCardInfo uiccCardInfo : uiccCardInfos) {\n                EuiccInfo euiccInfo = uiccCardInfo.getEuiccInfo();\n                if (euiccInfo != null) {\n                    profiles.add(euiccInfo.getEid());\n                }\n            }\n            promise.resolve(profiles);\n        } catch (Exception e) {\n            promise.reject(&quot;ERROR&quot;, e.getMessage());\n        }\n    }\n</code></pre>\n<p>but the method <code>getUiccCardsInfo</code> does not exists</p>\n"},{"tags":["java","google-cloud-dataflow","apache-beam","beam"],"owner":{"account_id":28739851,"reputation":1,"user_id":22010204,"display_name":"knoeh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693336133,"creation_date":1685740428,"question_id":76393506,"body_markdown":"Reading this article https://cloud.google.com/blog/products/data-analytics/after-lambda-exactly-once-processing-in-google-cloud-dataflow-part-1\r\n\r\nThe side effects section says\r\n&gt; Cloud Dataflow does not guarantee that this code is run only once per record, whether by the streaming or batch runner. It might run a given record through a user transform multiple times, or it might even run the same record simultaneously on multiple workers; this is necessary to guarantee at-least once processing in the face of worker failures\r\n\r\nIf I use the [GroupIntoBatches](https://beam.apache.org/documentation/transforms/java/aggregation/groupintobatches/) transform will the resulting batch be run through a user transform multiple times?\r\n\r\n","title":"Does GroupIntoBatches guarantee that code is run only once per batch?","body":"<p>Reading this article <a href=\"https://cloud.google.com/blog/products/data-analytics/after-lambda-exactly-once-processing-in-google-cloud-dataflow-part-1\" rel=\"nofollow noreferrer\">https://cloud.google.com/blog/products/data-analytics/after-lambda-exactly-once-processing-in-google-cloud-dataflow-part-1</a></p>\n<p>The side effects section says</p>\n<blockquote>\n<p>Cloud Dataflow does not guarantee that this code is run only once per record, whether by the streaming or batch runner. It might run a given record through a user transform multiple times, or it might even run the same record simultaneously on multiple workers; this is necessary to guarantee at-least once processing in the face of worker failures</p>\n</blockquote>\n<p>If I use the <a href=\"https://beam.apache.org/documentation/transforms/java/aggregation/groupintobatches/\" rel=\"nofollow noreferrer\">GroupIntoBatches</a> transform will the resulting batch be run through a user transform multiple times?</p>\n"},{"tags":["java","spring-boot","reusability"],"answers":[{"tags":[],"owner":{"account_id":7975532,"reputation":103,"user_id":6018837,"display_name":"Daniel Matev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690381507,"creation_date":1690381507,"answer_id":76772308,"question_id":76772132,"body_markdown":"Library is your best bet in this situation and you&#39;ll have to compile it in order to share it accross the different APIs (assuming that by this you mean different projects and repos). The code needs to be compiled and then shared as a maven/gradle shared library so you can import it in other services that are being developed. \\\r\nIf you&#39;re looking to test something fast, you can always deploy a test/dev version of the library and use that for local testing/developing until the feature is ready and then update the latest version of the library. Keep in mind that this also prevents you from forcing changes to other repos, since they can always use the old library version, until they&#39;re ready to update (use semantic versioning).","title":"How to reuse code/functionality from multiple Spring Boot applications?","body":"<p>Library is your best bet in this situation and you'll have to compile it in order to share it accross the different APIs (assuming that by this you mean different projects and repos). The code needs to be compiled and then shared as a maven/gradle shared library so you can import it in other services that are being developed. <br />\nIf you're looking to test something fast, you can always deploy a test/dev version of the library and use that for local testing/developing until the feature is ready and then update the latest version of the library. Keep in mind that this also prevents you from forcing changes to other repos, since they can always use the old library version, until they're ready to update (use semantic versioning).</p>\n"}],"owner":{"account_id":21589628,"reputation":3,"user_id":15919464,"display_name":"Andres Jalife"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693336018,"creation_date":1690380303,"question_id":76772132,"body_markdown":"I&#39;m developing multiple applications (API&#39;s) with Spring Boot and some of them are only used by some specific clients. The problem is that I&#39;m having to duplicate code and functionalities between different API&#39;s and I don&#39;t know how to reuse the code in them.\r\n\r\nFor an example, I have a main API that every client use and it has multiple model/dto/services/controller. I have another API that&#39;s specific for one client (which I don&#39;t want to have in my main API, because some clients won&#39;t need it) that needs some of the main API entities. \r\n\r\nShould I unify the applications and find a way to separate them inside one project, or how could I reuse these entities between the different applications?\r\n\r\nIs creating a library with the main models, dtos, exceptions the best solution here?\r\n\r\nOne question I have with creating a library is, when I&#39;m developing one API that uses this library, I have to have the library compiled? or it can use a non-compiled version?\r\n\r\nI&#39;m asking this because it could make the development process more slow for the team (if we have to recompile every time we make a change in the library).\r\n\r\n\r\nHaven&#39;t tried anything yet","title":"How to reuse code/functionality from multiple Spring Boot applications?","body":"<p>I'm developing multiple applications (API's) with Spring Boot and some of them are only used by some specific clients. The problem is that I'm having to duplicate code and functionalities between different API's and I don't know how to reuse the code in them.</p>\n<p>For an example, I have a main API that every client use and it has multiple model/dto/services/controller. I have another API that's specific for one client (which I don't want to have in my main API, because some clients won't need it) that needs some of the main API entities.</p>\n<p>Should I unify the applications and find a way to separate them inside one project, or how could I reuse these entities between the different applications?</p>\n<p>Is creating a library with the main models, dtos, exceptions the best solution here?</p>\n<p>One question I have with creating a library is, when I'm developing one API that uses this library, I have to have the library compiled? or it can use a non-compiled version?</p>\n<p>I'm asking this because it could make the development process more slow for the team (if we have to recompile every time we make a change in the library).</p>\n<p>Haven't tried anything yet</p>\n"},{"tags":["java","spring","spring-boot","maven","gradle"],"answers":[{"tags":[],"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657175688,"creation_date":1657175688,"answer_id":72893239,"question_id":72892623,"body_markdown":"You can manage projects as module and use them on importing\r\n\r\nCheck this link:\r\nhttps://stackoverflow.com/a/69660601/7505687\r\n\r\nIf you need to share spring boot beans ammong them use `@ComponentScan`\r\n","title":"How to package gradle multi-module spring boot app for other project to use?","body":"<p>You can manage projects as module and use them on importing</p>\n<p>Check this link:\n<a href=\"https://stackoverflow.com/a/69660601/7505687\">https://stackoverflow.com/a/69660601/7505687</a></p>\n<p>If you need to share spring boot beans ammong them use <code>@ComponentScan</code></p>\n"}],"owner":{"account_id":18625023,"reputation":27,"user_id":13574344,"display_name":"stackoverflow_user"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1742,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693335840,"creation_date":1657171161,"question_id":72892623,"body_markdown":"I have a gradle spring boot project with multiple modules and want to build it as a jar file so that I can reuse the methods from different modules in other projects.\r\n\r\nI used ```java-library``` plugin in the ```build.gradle``` of the root path and packaged it as a jar. But when I imported it into my other applications as a dependency, the jar files of each module under ```BOOT-INF/libs``` are not accessible and the methods I called can&#39;t be located.\r\n\r\nIs there any way I can make each module reusable for other applications?","title":"How to package gradle multi-module spring boot app for other project to use?","body":"<p>I have a gradle spring boot project with multiple modules and want to build it as a jar file so that I can reuse the methods from different modules in other projects.</p>\n<p>I used <code>java-library</code> plugin in the <code>build.gradle</code> of the root path and packaged it as a jar. But when I imported it into my other applications as a dependency, the jar files of each module under <code>BOOT-INF/libs</code> are not accessible and the methods I called can't be located.</p>\n<p>Is there any way I can make each module reusable for other applications?</p>\n"},{"tags":["java","spring-boot","gradle","intellij-idea"],"comments":[{"owner":{"account_id":25489317,"reputation":259,"user_id":19284394,"display_name":"nicku"},"score":0,"creation_date":1670962432,"post_id":74782940,"comment_id":131993302,"body_markdown":"This error disappears if I comment out a `plugin id: com.internal....` But this custom plugin is required for other things. Not sure if we could just stop spotless from including or running","body":"This error disappears if I comment out a <code>plugin id: com.internal....</code> But this custom plugin is required for other things. Not sure if we could just stop spotless from including or running"}],"answers":[{"comments":[{"owner":{"account_id":25489317,"reputation":259,"user_id":19284394,"display_name":"nicku"},"score":0,"creation_date":1670955484,"post_id":74783045,"comment_id":131991247,"body_markdown":"I searched in the entire codebase the term `spotless` doesn&#39;t appear","body":"I searched in the entire codebase the term <code>spotless</code> doesn&#39;t appear"},{"owner":{"account_id":25489317,"reputation":259,"user_id":19284394,"display_name":"nicku"},"score":0,"creation_date":1670962419,"post_id":74783045,"comment_id":131993300,"body_markdown":"This error disappears if I comment out a `plugin id: com.internal....` But this custom plugin is required for other things. Not sure if we could just stop spotless from including or running","body":"This error disappears if I comment out a <code>plugin id: com.internal....</code> But this custom plugin is required for other things. Not sure if we could just stop spotless from including or running"}],"tags":[],"owner":{"account_id":2932396,"reputation":49,"user_id":2512273,"display_name":"Tou Hat"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670925873,"creation_date":1670925873,"answer_id":74783045,"question_id":74782940,"body_markdown":"check out your build.gradle - probably you missed something inside block:\r\n\r\n    spotless {\r\n        ...\r\n    }\r\n\r\nat least, if you simply remove it - the issue will gone","title":"Multiple steps for spotless format java error while gradle build","body":"<p>check out your build.gradle - probably you missed something inside block:</p>\n<pre><code>spotless {\n    ...\n}\n</code></pre>\n<p>at least, if you simply remove it - the issue will gone</p>\n"}],"owner":{"account_id":25489317,"reputation":259,"user_id":19284394,"display_name":"nicku"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693335762,"creation_date":1670925368,"question_id":74782940,"body_markdown":"There is an IntelliJ project using Gradle, Java and in one of the modules, I put the Java code which is working independently. But on moving the code within this project and running the build.gradle I am getting the following error:  \r\n\r\n&gt; Could not create task &#39;:wlcr-auto-api:spotlessJavaApply&#39;. Could not  \r\n&gt; create task &#39;:wlcr-auto-api:spotlessJava&#39;. Multiple steps with name  \r\n&gt; &#39;google-java-format&#39; for spotless format &#39;java&#39;  \r\n    \r\nI am not sure what is the reason for this error. Also, I am not sure if the project structure is correct in Intellij.  \r\n\r\n[![enter image description here][1]][1]  \r\n  \r\n  \r\nIn the above image **auto** is the project that was already created. I created a new module **auto-api** and put all my code inside it. There is an Application.java inside it, the main file to run the spring boot application. It works when the code is not put inside this **auto** project. But not when included in the project.   \r\nI have no clue how to debug this.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7nI12.png","title":"Multiple steps for spotless format java error while gradle build","body":"<p>There is an IntelliJ project using Gradle, Java and in one of the modules, I put the Java code which is working independently. But on moving the code within this project and running the build.gradle I am getting the following error:</p>\n<blockquote>\n<p>Could not create task ':wlcr-auto-api:spotlessJavaApply'. Could not<br />\ncreate task ':wlcr-auto-api:spotlessJava'. Multiple steps with name<br />\n'google-java-format' for spotless format 'java'</p>\n</blockquote>\n<p>I am not sure what is the reason for this error. Also, I am not sure if the project structure is correct in Intellij.</p>\n<p><a href=\"https://i.stack.imgur.com/7nI12.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7nI12.png\" alt=\"enter image description here\" /></a></p>\n<p>In the above image <strong>auto</strong> is the project that was already created. I created a new module <strong>auto-api</strong> and put all my code inside it. There is an Application.java inside it, the main file to run the spring boot application. It works when the code is not put inside this <strong>auto</strong> project. But not when included in the project.<br />\nI have no clue how to debug this.</p>\n"},{"tags":["java","spring","intellij-idea","spring-boot"],"comments":[{"owner":{"account_id":1587827,"reputation":931,"user_id":1471785,"display_name":"rapasoft"},"score":0,"creation_date":1462253309,"post_id":36995670,"comment_id":61546038,"body_markdown":"Could you please write down steps you&#39;ve taken so far? This question is way too general to answer. You need to setup your project in IDEA to support JPA/Hibernate and then you can use this: https://www.jetbrains.com/help/idea/2016.1/generating-persistence-mappings.html","body":"Could you please write down steps you&#39;ve taken so far? This question is way too general to answer. You need to setup your project in IDEA to support JPA/Hibernate and then you can use this: <a href=\"https://www.jetbrains.com/help/idea/2016.1/generating-persistence-mappings.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/2016.1/&hellip;</a>"},{"owner":{"account_id":7095188,"reputation":612,"user_id":5429049,"accept_rate":80,"display_name":"Lucas Le&#243;n"},"score":0,"creation_date":1462253487,"post_id":36995670,"comment_id":61546117,"body_markdown":"I created a project with Spring Initializr Wizard","body":"I created a project with Spring Initializr Wizard"},{"owner":{"account_id":3598339,"reputation":1871,"user_id":3002336,"display_name":"Anand Varkey Philips"},"score":6,"creation_date":1492073980,"post_id":36995670,"comment_id":73853875,"body_markdown":"Its only available in paid version. Community version users please dont waste time searching for it like I did!!!","body":"Its only available in paid version. Community version users please dont waste time searching for it like I did!!!"}],"answers":[{"comments":[{"owner":{"account_id":3081027,"reputation":229,"user_id":2609219,"display_name":"Hasan Mhd Amin"},"score":0,"creation_date":1671622814,"post_id":36996497,"comment_id":132137441,"body_markdown":"This way generate only java classes. Is there any way to generate Kotlin data classes?","body":"This way generate only java classes. Is there any way to generate Kotlin data classes?"}],"tags":[],"owner":{"account_id":1587827,"reputation":931,"user_id":1471785,"display_name":"rapasoft"},"comment_count":1,"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1462254288,"creation_date":1462254288,"answer_id":36996497,"question_id":36995670,"body_markdown":"Prerequisites are:\r\n\r\n1. You have your Spring Boot project initialized correctly in IDEA\r\n2. JPA persistence.xml file or similar has been generated correctly\r\n\r\nThen you have to do these things:\r\n\r\n1. [Create a DataSource](https://www.jetbrains.com/help/idea/2016.1/working-with-the-database-tool-window.html?origin=old_help#create_data_source) - here you will add a simple DataSource that will connect to your database. The setup should be intuitive - you only provide connection details and add DB drivers (IDEA can download them for you)\r\n2. Add JPA/Hibernate facet. You can do it like [this](https://www.jetbrains.com/help/idea/2016.1/enabling-jpa-support.html?origin=old_help#d998879e350) or [this](https://www.jetbrains.com/help/idea/2016.1/enabling-hibernate-support.html?origin=old_help#d1785882e332). \r\n3. Now you should be able to [generate entities using IDEA](https://www.jetbrains.com/help/idea/2016.1/generating-persistence-mappings.html). What you want to do here is choose `Generate by Database Schema`. The dialog will let you select the tables you want to use, the rest should be up to you.","title":"How can I generate entities classes from database using Spring Boot and IntelliJ Idea?","body":"<p>Prerequisites are:</p>\n\n<ol>\n<li>You have your Spring Boot project initialized correctly in IDEA</li>\n<li>JPA persistence.xml file or similar has been generated correctly</li>\n</ol>\n\n<p>Then you have to do these things:</p>\n\n<ol>\n<li><a href=\"https://www.jetbrains.com/help/idea/2016.1/working-with-the-database-tool-window.html?origin=old_help#create_data_source\" rel=\"noreferrer\">Create a DataSource</a> - here you will add a simple DataSource that will connect to your database. The setup should be intuitive - you only provide connection details and add DB drivers (IDEA can download them for you)</li>\n<li>Add JPA/Hibernate facet. You can do it like <a href=\"https://www.jetbrains.com/help/idea/2016.1/enabling-jpa-support.html?origin=old_help#d998879e350\" rel=\"noreferrer\">this</a> or <a href=\"https://www.jetbrains.com/help/idea/2016.1/enabling-hibernate-support.html?origin=old_help#d1785882e332\" rel=\"noreferrer\">this</a>. </li>\n<li>Now you should be able to <a href=\"https://www.jetbrains.com/help/idea/2016.1/generating-persistence-mappings.html\" rel=\"noreferrer\">generate entities using IDEA</a>. What you want to do here is choose <code>Generate by Database Schema</code>. The dialog will let you select the tables you want to use, the rest should be up to you.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":978242,"reputation":1004,"user_id":998626,"accept_rate":60,"display_name":"Akshay Hiremath"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693334989,"creation_date":1693334989,"answer_id":77002906,"question_id":36995670,"body_markdown":"If you are using IntelliJ Idea&#39;s newer version (2022 or so) and not able to find the option in step 3 &quot;`Generate by Database Schema`&quot; in the accepted answer above then use the following:\r\n\r\nStep 1: Create DataSource (as you create for database in Idea)&lt;br/&gt;&lt;br/&gt;\r\nStep 2: Add JPA Hibernate Facet through File -&gt; Project Structure -&gt;Facets&lt;br/&gt;&lt;br/&gt;\r\nStep 3: Generate Entities:  In the Database window,&lt;br/&gt; \r\n\r\n 1. Open the data connection to your DataSource,\r\n 2. Open schemas and find tables that you need to create entity classes for Right-click \r\n 3. Choose Tools -&gt; Scripted Extensions -&gt; Generate POJOs.groovy \r\n 4. Select the generation path (ideally your package for storing entities) and proceed.\r\n\r\nThese steps are verified and found working in `IntelliJ IDEA 2022.3.3 (Ultimate Edition)`","title":"How can I generate entities classes from database using Spring Boot and IntelliJ Idea?","body":"<p>If you are using IntelliJ Idea's newer version (2022 or so) and not able to find the option in step 3 &quot;<code>Generate by Database Schema</code>&quot; in the accepted answer above then use the following:</p>\n<p>Step 1: Create DataSource (as you create for database in Idea)<br/><br/>\nStep 2: Add JPA Hibernate Facet through File -&gt; Project Structure -&gt;Facets<br/><br/>\nStep 3: Generate Entities:  In the Database window,<br/></p>\n<ol>\n<li>Open the data connection to your DataSource,</li>\n<li>Open schemas and find tables that you need to create entity classes for Right-click</li>\n<li>Choose Tools -&gt; Scripted Extensions -&gt; Generate POJOs.groovy</li>\n<li>Select the generation path (ideally your package for storing entities) and proceed.</li>\n</ol>\n<p>These steps are verified and found working in <code>IntelliJ IDEA 2022.3.3 (Ultimate Edition)</code></p>\n"}],"owner":{"account_id":7095188,"reputation":612,"user_id":5429049,"accept_rate":80,"display_name":"Lucas Le&#243;n"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72965,"favorite_count":0,"down_vote_count":1,"up_vote_count":35,"accepted_answer_id":36996497,"answer_count":2,"score":34,"last_activity_date":1693334989,"creation_date":1462250053,"question_id":36995670,"body_markdown":"I trying to make a project using the Spring Initializr wizard and I already have a database, so I want to generate entities classes using Spring Boot and IntelliJ Idea. ","title":"How can I generate entities classes from database using Spring Boot and IntelliJ Idea?","body":"<p>I trying to make a project using the Spring Initializr wizard and I already have a database, so I want to generate entities classes using Spring Boot and IntelliJ Idea. </p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1791757,"reputation":22226,"user_id":1631967,"display_name":"aminography"},"score":0,"creation_date":1601886525,"post_id":10202805,"comment_id":113534337,"body_markdown":"To format file size, try this: https://stackoverflow.com/a/63389334/1631967","body":"To format file size, try this: <a href=\"https://stackoverflow.com/a/63389334/1631967\">stackoverflow.com/a/63389334/1631967</a>"}],"answers":[{"comments":[{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":31,"creation_date":1536222477,"post_id":10202879,"comment_id":91348434,"body_markdown":"Just a tip: To show the file size in a nice readable way on Android, you can use `Formatter.formatShortFileSize(context,file.length())`","body":"Just a tip: To show the file size in a nice readable way on Android, you can use <code>Formatter.formatShortFileSize(context,file.length())</code>"},{"owner":{"account_id":5814053,"reputation":2527,"user_id":7759514,"accept_rate":61,"display_name":"Tobiq"},"score":9,"creation_date":1557003166,"post_id":10202879,"comment_id":98622362,"body_markdown":"Why are you serialising and deserialising the kilobytes-size to and from a string?","body":"Why are you serialising and deserialising the kilobytes-size to and from a string?"}],"tags":[],"owner":{"account_id":358138,"reputation":5171,"user_id":698716,"accept_rate":100,"display_name":"Akash Singh"},"comment_count":2,"down_vote_count":1,"up_vote_count":239,"is_accepted":true,"score":238,"last_activity_date":1605156438,"creation_date":1334724076,"answer_id":10202879,"question_id":10202805,"body_markdown":"I hope this can help you:\r\n```java      \r\n    File file = new File(selectedPath);\r\n    int file_size = Integer.parseInt(String.valueOf(file.length()/1024));\r\n```\r\nWhere the String `selectedPath` is the path to the file whose file size you want to determine.\r\n\r\n`file.length()` returns the length of the file in bytes, as described in the [Java 7 Documentation][1]: \r\n\r\n&gt; Returns the length, in bytes, of the file denoted by this abstract pathname, or 0L if the file does not exist. Some operating systems may return 0L for pathnames denoting system-dependent entities such as devices or pipes. \r\n\r\nDividing by 1024 converts the size from bytes to kibibytes. kibibytes = 1024 bytes.\r\n\r\n[1]: https://docs.oracle.com/javase/7/docs/api/java/io/File.html#length() ","title":"how do I get file size of temp file in android?","body":"<p>I hope this can help you:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    File file = new File(selectedPath);\n    int file_size = Integer.parseInt(String.valueOf(file.length()/1024));\n</code></pre>\n<p>Where the String <code>selectedPath</code> is the path to the file whose file size you want to determine.</p>\n<p><code>file.length()</code> returns the length of the file in bytes, as described in the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/File.html#length()\" rel=\"noreferrer\">Java 7 Documentation</a>:</p>\n<blockquote>\n<p>Returns the length, in bytes, of the file denoted by this abstract pathname, or 0L if the file does not exist. Some operating systems may return 0L for pathnames denoting system-dependent entities such as devices or pipes.</p>\n</blockquote>\n<p>Dividing by 1024 converts the size from bytes to kibibytes. kibibytes = 1024 bytes.</p>\n"},{"comments":[{"owner":{"account_id":16192048,"reputation":2374,"user_id":11690526,"display_name":"Tippu Fisal Sheriff"},"score":0,"creation_date":1666089216,"post_id":52628084,"comment_id":130847579,"body_markdown":"what is URL here ?","body":"what is URL here ?"}],"tags":[],"owner":{"account_id":9187712,"reputation":375,"user_id":8197867,"display_name":"Devangi"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1538573111,"creation_date":1538573111,"answer_id":52628084,"question_id":10202805,"body_markdown":"Try to use below code:\r\n\r\n    // Get file from file name\r\n        final String dirPath = f.getAbsolutePath();\r\n        String fileName = url.substring(url.lastIndexOf(&#39;/&#39;) + 1);\r\n        File file = new File(dirPath + &quot;/&quot; + fileName);\r\n\r\n          // Get length of file in bytes\r\n              long fileSizeInBytes = file.length();\r\n         // Convert the bytes to Kilobytes (1 KB = 1024 Bytes)\r\n              long fileSizeInKB = fileSizeInBytes / 1024;\r\n        //  Convert the KB to MegaBytes (1 MB = 1024 KBytes)\r\n              long fileSizeInMB = fileSizeInKB / 1024;\r\n\r\n              if (fileSizeInMB &gt; 27) {\r\n              ...\r\n              }\r\n\r\nHope It will work for you..!!","title":"how do I get file size of temp file in android?","body":"<p>Try to use below code:</p>\n\n<pre><code>// Get file from file name\n    final String dirPath = f.getAbsolutePath();\n    String fileName = url.substring(url.lastIndexOf('/') + 1);\n    File file = new File(dirPath + \"/\" + fileName);\n\n      // Get length of file in bytes\n          long fileSizeInBytes = file.length();\n     // Convert the bytes to Kilobytes (1 KB = 1024 Bytes)\n          long fileSizeInKB = fileSizeInBytes / 1024;\n    //  Convert the KB to MegaBytes (1 MB = 1024 KBytes)\n          long fileSizeInMB = fileSizeInKB / 1024;\n\n          if (fileSizeInMB &gt; 27) {\n          ...\n          }\n</code></pre>\n\n<p>Hope It will work for you..!!</p>\n"},{"comments":[{"owner":{"account_id":12584729,"reputation":301,"user_id":9154145,"display_name":"Androidz"},"score":0,"creation_date":1606141300,"post_id":59851340,"comment_id":114863076,"body_markdown":"Use Uri.path() and not Uri.toString()!","body":"Use Uri.path() and not Uri.toString()!"}],"tags":[],"owner":{"account_id":946995,"reputation":43616,"user_id":974045,"display_name":"Gibolt"},"comment_count":1,"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1579718077,"creation_date":1579655400,"answer_id":59851340,"question_id":10202805,"body_markdown":"## Kotlin Extension Solution\r\n\r\nAdd these somewhere, then call `myFile.sizeInMb` or whichever you need\r\n\r\n    val File.size get() = if (!exists()) 0.0 else length().toDouble()\r\n    val File.sizeInKb get() = size / 1024\r\n    val File.sizeInMb get() = sizeInKb / 1024\r\n    val File.sizeInGb get() = sizeInMb / 1024\r\n    val File.sizeInTb get() = sizeInGb / 1024\r\n\r\nIf you need a File from a String or Uri, try adding these\r\n\r\n    fun Uri.asFile(): File = File(toString())\r\n\r\n    fun String?.asUri(): Uri? {\r\n        try {\r\n            return Uri.parse(this)\r\n        } catch (e: Exception) {\r\n        }\r\n        return null\r\n    }\r\n\r\nIf you&#39;d like to easily display the values as a string, these are simple wrappers. Feel free to customize the default decimals displayed\r\n    \r\n    fun File.sizeStr(): String = size.toString()\r\n    fun File.sizeStrInKb(decimals: Int = 0): String = &quot;%.${decimals}f&quot;.format(sizeInKb)\r\n    fun File.sizeStrInMb(decimals: Int = 0): String = &quot;%.${decimals}f&quot;.format(sizeInMb)\r\n    fun File.sizeStrInGb(decimals: Int = 0): String = &quot;%.${decimals}f&quot;.format(sizeInGb)\r\n\r\n    fun File.sizeStrWithBytes(): String = sizeStr() + &quot;b&quot;\r\n    fun File.sizeStrWithKb(decimals: Int = 0): String = sizeStrInKb(decimals) + &quot;Kb&quot;\r\n    fun File.sizeStrWithMb(decimals: Int = 0): String = sizeStrInMb(decimals) + &quot;Mb&quot;\r\n    fun File.sizeStrWithGb(decimals: Int = 0): String = sizeStrInGb(decimals) + &quot;Gb&quot;","title":"how do I get file size of temp file in android?","body":"<h2>Kotlin Extension Solution</h2>\n\n<p>Add these somewhere, then call <code>myFile.sizeInMb</code> or whichever you need</p>\n\n<pre><code>val File.size get() = if (!exists()) 0.0 else length().toDouble()\nval File.sizeInKb get() = size / 1024\nval File.sizeInMb get() = sizeInKb / 1024\nval File.sizeInGb get() = sizeInMb / 1024\nval File.sizeInTb get() = sizeInGb / 1024\n</code></pre>\n\n<p>If you need a File from a String or Uri, try adding these</p>\n\n<pre><code>fun Uri.asFile(): File = File(toString())\n\nfun String?.asUri(): Uri? {\n    try {\n        return Uri.parse(this)\n    } catch (e: Exception) {\n    }\n    return null\n}\n</code></pre>\n\n<p>If you'd like to easily display the values as a string, these are simple wrappers. Feel free to customize the default decimals displayed</p>\n\n<pre><code>fun File.sizeStr(): String = size.toString()\nfun File.sizeStrInKb(decimals: Int = 0): String = \"%.${decimals}f\".format(sizeInKb)\nfun File.sizeStrInMb(decimals: Int = 0): String = \"%.${decimals}f\".format(sizeInMb)\nfun File.sizeStrInGb(decimals: Int = 0): String = \"%.${decimals}f\".format(sizeInGb)\n\nfun File.sizeStrWithBytes(): String = sizeStr() + \"b\"\nfun File.sizeStrWithKb(decimals: Int = 0): String = sizeStrInKb(decimals) + \"Kb\"\nfun File.sizeStrWithMb(decimals: Int = 0): String = sizeStrInMb(decimals) + \"Mb\"\nfun File.sizeStrWithGb(decimals: Int = 0): String = sizeStrInGb(decimals) + \"Gb\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18411434,"reputation":2196,"user_id":13500457,"display_name":"Apoorv Pandey"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1612298998,"creation_date":1607337541,"answer_id":65180145,"question_id":10202805,"body_markdown":"    private boolean isFileLessThan2MB(File file) {\r\n        int maxFileSize = 2 * 1024 * 1024;\r\n        Long l = file.length();\r\n        String fileSize = l.toString();\r\n        int finalFileSize = Integer.parseInt(fileSize);\r\n        return finalFileSize &gt;= maxFileSize;\r\n    }\r\n\r\nYou can use this function as well I&#39;m using this to check if the file size is less than 2MB when you use file.lenght funtion it returns the file size in bytes. So I&#39;ve check the file size in bytes.","title":"how do I get file size of temp file in android?","body":"<pre><code>private boolean isFileLessThan2MB(File file) {\n    int maxFileSize = 2 * 1024 * 1024;\n    Long l = file.length();\n    String fileSize = l.toString();\n    int finalFileSize = Integer.parseInt(fileSize);\n    return finalFileSize &gt;= maxFileSize;\n}\n</code></pre>\n<p>You can use this function as well I'm using this to check if the file size is less than 2MB when you use file.lenght funtion it returns the file size in bytes. So I've check the file size in bytes.</p>\n"},{"tags":[],"owner":{"account_id":17657117,"reputation":56,"user_id":12816445,"display_name":"Sreyans Bohara"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1614016791,"creation_date":1614016791,"answer_id":66320989,"question_id":10202805,"body_markdown":"All the codes above have a slight issue because **the file.length() does not return the exact size of the file**. To resolve this issue, I tried multiple ways, and after a while I got the fix. Below is the code by which you can get the **exact size** of the file.\r\n\r\n**Note that for the bytes to KB conversion I have divided by 1000.0** instead of 1024.0. It works for me.\r\n\r\n    public static String getFolderSizeLabel(File file) {\r\n        double size = (double) getFolderSize(file) / 1000.0; // Get size and convert bytes into KB.\r\n        if (size &gt;= 1024) {\r\n            return (size / 1024) + &quot; MB&quot;;\r\n        } else {\r\n            return size + &quot; KB&quot;;\r\n        }\r\n    }\r\n    public static long getFolderSize(File file) {\r\n        long size = 0;\r\n        if (file.isDirectory()) {\r\n            for (File child : file.listFiles()) {\r\n                size += getFolderSize(child);\r\n            }\r\n        } else {\r\n            size = file.length();\r\n        }\r\n        return size;\r\n    }","title":"how do I get file size of temp file in android?","body":"<p>All the codes above have a slight issue because <strong>the file.length() does not return the exact size of the file</strong>. To resolve this issue, I tried multiple ways, and after a while I got the fix. Below is the code by which you can get the <strong>exact size</strong> of the file.</p>\n<p><strong>Note that for the bytes to KB conversion I have divided by 1000.0</strong> instead of 1024.0. It works for me.</p>\n<pre><code>public static String getFolderSizeLabel(File file) {\n    double size = (double) getFolderSize(file) / 1000.0; // Get size and convert bytes into KB.\n    if (size &gt;= 1024) {\n        return (size / 1024) + &quot; MB&quot;;\n    } else {\n        return size + &quot; KB&quot;;\n    }\n}\npublic static long getFolderSize(File file) {\n    long size = 0;\n    if (file.isDirectory()) {\n        for (File child : file.listFiles()) {\n            size += getFolderSize(child);\n        }\n    } else {\n        size = file.length();\n    }\n    return size;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3544684,"reputation":310,"user_id":2960949,"display_name":"Rade"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679855303,"creation_date":1668031162,"answer_id":74381860,"question_id":10202805,"body_markdown":"For Kotlin devs, just use this line\r\n\r\n    floor(file.length() / 1000.0 + 0.5).toInt()\r\n\r\nThe + 0.5 helps to round it to the nearest whole number.\r\n\r\nFor argument’s sake, let’s say we want to round 9.2 to the nearest integer. We can add 0.5 to it, which will give 9.7. When we use math.floor on it, which will round down, we will get 9. Now, say we want to round 9.9 to the nearest integer, we will add 0.5 to it, which will give 10.4, when we use math.floor on it, it’ll return 10","title":"how do I get file size of temp file in android?","body":"<p>For Kotlin devs, just use this line</p>\n<pre><code>floor(file.length() / 1000.0 + 0.5).toInt()\n</code></pre>\n<p>The + 0.5 helps to round it to the nearest whole number.</p>\n<p>For argument’s sake, let’s say we want to round 9.2 to the nearest integer. We can add 0.5 to it, which will give 9.7. When we use math.floor on it, which will round down, we will get 9. Now, say we want to round 9.9 to the nearest integer, we will add 0.5 to it, which will give 10.4, when we use math.floor on it, it’ll return 10</p>\n"}],"owner":{"account_id":542294,"reputation":1852,"user_id":911086,"accept_rate":67,"display_name":"alexl"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111970,"favorite_count":0,"down_vote_count":0,"up_vote_count":100,"accepted_answer_id":10202879,"answer_count":6,"score":100,"last_activity_date":1693334938,"creation_date":1334723551,"question_id":10202805,"body_markdown":"if I use openFileOutput() to create and write to a temp file how do I get filesize after I&#39;m done writing to it?","title":"how do I get file size of temp file in android?","body":"<p>if I use openFileOutput() to create and write to a temp file how do I get filesize after I'm done writing to it?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":24281583,"reputation":168,"user_id":18228017,"display_name":"Cayman"},"score":0,"creation_date":1651016480,"post_id":72021558,"comment_id":127260353,"body_markdown":"did you tried adding: spring.datasource.driver-class-name=com.mysql.jdbc.Driver","body":"did you tried adding: spring.datasource.driver-class-name=com.mysql.jdbc.Driver"},{"owner":{"account_id":23114984,"reputation":1,"user_id":17222388,"display_name":"BateauG"},"score":0,"creation_date":1651016659,"post_id":72021558,"comment_id":127260382,"body_markdown":"I did, no luck.","body":"I did, no luck."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1651044499,"post_id":72021558,"comment_id":127265431,"body_markdown":"If that is what is in your `application.properties` there really is no url property. If there is there is something wrong which you aren&#39;t explaining (like trying to be smarter then your build system, putting files in the wrong location etc.).","body":"If that is what is in your <code>application.properties</code> there really is no url property. If there is there is something wrong which you aren&#39;t explaining (like trying to be smarter then your build system, putting files in the wrong location etc.)."}],"owner":{"account_id":23114984,"reputation":1,"user_id":17222388,"display_name":"BateauG"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":296,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693333584,"creation_date":1651014935,"question_id":72021558,"body_markdown":"I am trying to create a Restful API using Springboot but am running into the following error: \r\n\r\n&gt; Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured.\r\n&gt;\r\n&gt; Reason: Failed to determine a suitable driver class\r\n\r\nHere is my Pom.xl\r\n\r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6.7&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.enterpriseproj&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;filmdepo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;griffin&lt;/name&gt;\r\n\r\n\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\nMy Application properties (I don&#39;t wan&#39;t to show all the details as they show personal info.) :\r\n\r\n```\r\nspring.datasource.url= \r\nspring.datasource.username=\r\nspring.datasource.password=\r\n```\r\n\r\n\r\n","title":"Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be","body":"<p>I am trying to create a Restful API using Springboot but am running into the following error:</p>\n<blockquote>\n<p>Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.</p>\n<p>Reason: Failed to determine a suitable driver class</p>\n</blockquote>\n<p>Here is my Pom.xl</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.7&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.enterpriseproj&lt;/groupId&gt;\n    &lt;artifactId&gt;filmdepo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;griffin&lt;/name&gt;\n\n\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                \n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>My Application properties (I don't wan't to show all the details as they show personal info.) :</p>\n<pre><code>spring.datasource.url= \nspring.datasource.username=\nspring.datasource.password=\n</code></pre>\n"},{"tags":["java","docker","scala","sbt"],"answers":[{"tags":[],"owner":{"account_id":2385436,"reputation":2506,"user_id":2819689,"accept_rate":98,"display_name":"MikiBelavista"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693328420,"creation_date":1693315025,"answer_id":77000585,"question_id":77000440,"body_markdown":"I solved this using:\r\n\r\n    echo 256 | sudo tee /proc/sys/fs/inotify/max_user_instances","title":"SBT User limit of inotify instances reached or too many open files","body":"<p>I solved this using:</p>\n<pre><code>echo 256 | sudo tee /proc/sys/fs/inotify/max_user_instances\n</code></pre>\n"}],"owner":{"account_id":2385436,"reputation":2506,"user_id":2819689,"accept_rate":98,"display_name":"MikiBelavista"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77000585,"answer_count":1,"score":0,"last_activity_date":1693333340,"creation_date":1693313896,"question_id":77000440,"body_markdown":"I have cloned [AWS Code Build][1] REPO.\r\n\r\nwhen I try to build \r\n```\r\n =&gt; ERROR [runtimes_n_corretto 4/6] RUN sbt version -Dsbt.rootdir=true                                      14.6s\r\n------\r\n &gt; [runtimes_n_corretto 4/6] RUN sbt version -Dsbt.rootdir=true:\r\n0.578 copying runtime jar...\r\n5.095 [info] [launcher] getting org.scala-sbt sbt 1.6.2  (this may take some time)...\r\n10.28 [info] [launcher] getting Scala 2.12.15 (for sbt)...\r\n11.28 [info] Updated file /project/build.properties: set sbt.version to 1.6.2\r\n11.29 [info] welcome to sbt 1.6.2 (Amazon.com Inc. Java 11.0.20.1)\r\n12.42 [info] loading project definition from /project\r\n14.01 [info] set current project to root (in build file:/)\r\n14.02 java.io.IOException: User limit of inotify instances reached or too many open files\r\n....\r\n\r\n    Dockerfile:414\r\n    --------------------\r\n     412 |     \r\n     413 |     ENV PATH &quot;/usr/local/bin/sbt/bin:$PATH&quot;\r\n     414 | &gt;&gt;&gt; RUN sbt version -Dsbt.rootdir=true\r\n     415 |     # Cleanup\r\n     416 |     RUN rm -fr /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\r\n    --------------------\r\n    ERROR: failed to solve: process &quot;/bin/sh -c sbt version -Dsbt.rootdir=true&quot; did not complete successfully: exit code: 1\r\n```\r\nsbt lines in Dockerfile\r\n\r\n    ENV PATH &quot;/usr/local/bin/sbt/bin:$PATH&quot;\r\n    RUN sbt version -Dsbt.rootdir=true\r\n\r\n`sbt version` shows\r\n\r\n    [warn] No sbt.version set in project/build.properties, base directory: /home/miki/aws-codebuild-docker-images/ubuntu/standard/5.0\r\n    [info] welcome to sbt 1.9.4 (Ubuntu Java 11.0.20)\r\n    [info] set current project to root-5-0 (in build file:/home/miki/aws-codebuild-docker-images/ubuntu/standard/5.0/\r\n    [info] 0.1.0-SNAPSHOT\r\n\r\nHow to fix this?\r\n\r\n  [1]: https://github.com/aws/aws-codebuild-docker-images.git","title":"SBT User limit of inotify instances reached or too many open files","body":"<p>I have cloned <a href=\"https://github.com/aws/aws-codebuild-docker-images.git\" rel=\"nofollow noreferrer\">AWS Code Build</a> REPO.</p>\n<p>when I try to build</p>\n<pre><code> =&gt; ERROR [runtimes_n_corretto 4/6] RUN sbt version -Dsbt.rootdir=true                                      14.6s\n------\n &gt; [runtimes_n_corretto 4/6] RUN sbt version -Dsbt.rootdir=true:\n0.578 copying runtime jar...\n5.095 [info] [launcher] getting org.scala-sbt sbt 1.6.2  (this may take some time)...\n10.28 [info] [launcher] getting Scala 2.12.15 (for sbt)...\n11.28 [info] Updated file /project/build.properties: set sbt.version to 1.6.2\n11.29 [info] welcome to sbt 1.6.2 (Amazon.com Inc. Java 11.0.20.1)\n12.42 [info] loading project definition from /project\n14.01 [info] set current project to root (in build file:/)\n14.02 java.io.IOException: User limit of inotify instances reached or too many open files\n....\n\n    Dockerfile:414\n    --------------------\n     412 |     \n     413 |     ENV PATH &quot;/usr/local/bin/sbt/bin:$PATH&quot;\n     414 | &gt;&gt;&gt; RUN sbt version -Dsbt.rootdir=true\n     415 |     # Cleanup\n     416 |     RUN rm -fr /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n    --------------------\n    ERROR: failed to solve: process &quot;/bin/sh -c sbt version -Dsbt.rootdir=true&quot; did not complete successfully: exit code: 1\n</code></pre>\n<p>sbt lines in Dockerfile</p>\n<pre><code>ENV PATH &quot;/usr/local/bin/sbt/bin:$PATH&quot;\nRUN sbt version -Dsbt.rootdir=true\n</code></pre>\n<p><code>sbt version</code> shows</p>\n<pre><code>[warn] No sbt.version set in project/build.properties, base directory: /home/miki/aws-codebuild-docker-images/ubuntu/standard/5.0\n[info] welcome to sbt 1.9.4 (Ubuntu Java 11.0.20)\n[info] set current project to root-5-0 (in build file:/home/miki/aws-codebuild-docker-images/ubuntu/standard/5.0/\n[info] 0.1.0-SNAPSHOT\n</code></pre>\n<p>How to fix this?</p>\n"},{"tags":["java","android","drag-and-drop"],"answers":[{"tags":[],"owner":{"account_id":26136616,"reputation":194,"user_id":19826534,"display_name":"Ozgur Baykal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683033568,"creation_date":1683033568,"answer_id":76155305,"question_id":76154227,"body_markdown":"Problem solved with help from another source.\r\n\r\nAll drag-and-drop functions worked correctly when I **removed** the code below:\r\n\r\n```\r\ndraggedView.setLayoutParams(new FrameLayout.LayoutParams(\r\n        FrameLayout.LayoutParams.WRAP_CONTENT,\r\n        FrameLayout.LayoutParams.WRAP_CONTENT));\r\n```","title":"Drag and Drop method works incorrectly on first use","body":"<p>Problem solved with help from another source.</p>\n<p>All drag-and-drop functions worked correctly when I <strong>removed</strong> the code below:</p>\n<pre><code>draggedView.setLayoutParams(new FrameLayout.LayoutParams(\n        FrameLayout.LayoutParams.WRAP_CONTENT,\n        FrameLayout.LayoutParams.WRAP_CONTENT));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22835379,"reputation":84,"user_id":16983216,"display_name":"PavelZh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693333293,"creation_date":1693333293,"answer_id":77002739,"question_id":76154227,"body_markdown":"This is strange, but code below helped me:\r\n\r\n    val tempWidth = draggableItem.width\r\n    val tempHeight = draggableItem.height\r\n    draggableItem.layoutParams = ConstraintLayout.LayoutParams(tempWidth, tempHeight)","title":"Drag and Drop method works incorrectly on first use","body":"<p>This is strange, but code below helped me:</p>\n<pre><code>val tempWidth = draggableItem.width\nval tempHeight = draggableItem.height\ndraggableItem.layoutParams = ConstraintLayout.LayoutParams(tempWidth, tempHeight)\n</code></pre>\n"}],"owner":{"account_id":26136616,"reputation":194,"user_id":19826534,"display_name":"Ozgur Baykal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76155305,"answer_count":2,"score":1,"last_activity_date":1693333293,"creation_date":1683025630,"question_id":76154227,"body_markdown":"I want to place several view objects on the screen where the user drags and drops with the drag and drop method. But this strangely misbehaves on first use and places it not where the user left it, but in a very unrelated place, sometimes even off the screen. However, after the first use, there is no such problem. It puts it exactly where I want it. What is the source of this problem?\r\n\r\n**setOnDragListener()**\r\n```\r\ncontentTableLayout.setOnDragListener(new View.OnDragListener() {\r\n  @Override\r\n  public boolean onDrag(View view, DragEvent event) {\r\n    Log.i(TAG, &quot; event.getAction(): &quot; + event.getAction() + &quot; getView: ID: &quot; + view.getId() + &quot; getContext: &quot; + view.getContext());\r\n    String getImageFileNameSelectedRoom = getImageFileNameToRoom();\r\n\r\n    switch (event.getAction()) {\r\n\r\n    case DragEvent.ACTION_DRAG_STARTED:\r\n      if (event.getClipDescription().hasMimeType(ClipDescription.MIMETYPE_TEXT_PLAIN)) {\r\n        View draggedView = (View) event.getLocalState();\r\n        initialX = draggedView.getX();\r\n        initialY = draggedView.getY();\r\n        Log.i(TAG, &quot;ACTION_DRAG_STARTED -&gt; initialX: &quot; + initialX + &quot; initialY: &quot; + initialY);\r\n   \r\n        changeBackgroundColorOnDrag(view, &quot;#664CAF50&quot;, true);\r\n\r\n        return true;\r\n\r\n      }\r\n      return event.getClipDescription().hasMimeType(ClipDescription.MIMETYPE_TEXT_PLAIN);\r\n\r\n    case DragEvent.ACTION_DRAG_ENTERED:\r\n      changeBackgroundColorOnDrag(view, &quot;#664CAF50&quot;, true);\r\n\r\n      return true;\r\n\r\n    case DragEvent.ACTION_DRAG_LOCATION:\r\n      return true;\r\n\r\n    case DragEvent.ACTION_DRAG_EXITED:\r\n\r\n      changeBackgroundColorOnDrag(view, &quot;#66D32121&quot;, true);\r\n      return true;\r\n\r\n    case DragEvent.ACTION_DROP:\r\n      Log.i(TAG, &quot;ACTION_DROP -&gt; &quot;);\r\n\r\n\r\n      View draggedView = (View) event.getLocalState();\r\n      ViewGroup owner = (ViewGroup) draggedView.getParent();\r\n      owner.removeView(draggedView);\r\n\r\n      FrameLayout container = (FrameLayout) view;\r\n      container.addView(draggedView);\r\n\r\n      View.DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(draggedView);\r\n      Point shadowSize = new Point();\r\n      shadowBuilder.onProvideShadowMetrics(shadowSize, new Point());\r\n\r\n      int x = (int) event.getX() - draggedView.getMeasuredWidth() / 2;\r\n      int y = (int) event.getY() - draggedView.getMeasuredHeight() / 2;\r\n\r\n\r\n      draggedView.setLayoutParams(new FrameLayout.LayoutParams(\r\n        FrameLayout.LayoutParams.WRAP_CONTENT,\r\n        FrameLayout.LayoutParams.WRAP_CONTENT));\r\n\r\n      Log.i(TAG, &quot;ACTION_DROP -&gt; &quot; + x + &quot;  y: &quot; + y);\r\n\r\n      draggedView.setX(x);\r\n      draggedView.setY(y);\r\n\r\n      draggedView.setVisibility(View.VISIBLE);\r\n      return true;\r\n\r\n    case DragEvent.ACTION_DRAG_ENDED:\r\n      if (!event.getResult()) {\r\n\r\n        if (getImageFileNameSelectedRoom != null) {\r\n          File targetFile = findImageFile(getImageFileNameSelectedRoom);\r\n\r\n          if (targetFile != null) {\r\n            Bitmap bitmap = BitmapFactory.decodeFile(targetFile.getAbsolutePath());\r\n            BitmapDrawable bitmapDrawable = new BitmapDrawable(getResources(), bitmap);\r\n            ((FrameLayout) view).setBackground(bitmapDrawable);\r\n\r\n            view.invalidate();\r\n          } else {\r\n            Log.e(TAG, &quot;Resim dosyası bulunamadı.&quot;);\r\n          }\r\n\r\n        }\r\n\r\n        View droppedView = (View) event.getLocalState();\r\n        droppedView.setVisibility(View.VISIBLE);\r\n      }\r\n      return true;\r\n\r\n    default:\r\n      break;\r\n    }\r\n    return false;\r\n  }\r\n});\r\n```\r\n\r\n**setOnLongListener()**\r\n```\r\nmainView.setOnLongClickListener(new View.OnLongClickListener() {\r\n                @Override\r\n                public boolean onLongClick(View view) {\r\n                    ClipData.Item item = new ClipData.Item((CharSequence) view.getTag());\r\n                    ClipData dragData = new ClipData((CharSequence) view.getTag(), new String[]{ClipDescription.MIMETYPE_TEXT_PLAIN}, item);\r\n                    View.DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);\r\n                    Log.i(TAG, &quot; getXFromView: &quot; + view.getX() + &quot;getYFromView: &quot; + view.getY());\r\n\r\n\r\n                    view.startDrag(dragData, shadowBuilder, view, 0);\r\n                    return true;\r\n                }\r\n            });\r\n```\r\n\r\nIn the above code, the first drag-and-drop operation works incorrectly. When I try the code below, the first drag-and-drop operation is fine, but this time the next ones are broken.\r\n\r\n```\r\ncase DragEvent.ACTION_DROP:\r\n    // ...\r\n    int x = (int) (initialX + event.getX() - shadowSize.x / 2);\r\n    int y = (int) (initialY + event.getY() - shadowSize.y / 2);\r\n\r\n//initialX and initialY values come from the ACTION_DRAG_STARTED case.\r\n    // ...\r\n\r\n```","title":"Drag and Drop method works incorrectly on first use","body":"<p>I want to place several view objects on the screen where the user drags and drops with the drag and drop method. But this strangely misbehaves on first use and places it not where the user left it, but in a very unrelated place, sometimes even off the screen. However, after the first use, there is no such problem. It puts it exactly where I want it. What is the source of this problem?</p>\n<p><strong>setOnDragListener()</strong></p>\n<pre><code>contentTableLayout.setOnDragListener(new View.OnDragListener() {\n  @Override\n  public boolean onDrag(View view, DragEvent event) {\n    Log.i(TAG, &quot; event.getAction(): &quot; + event.getAction() + &quot; getView: ID: &quot; + view.getId() + &quot; getContext: &quot; + view.getContext());\n    String getImageFileNameSelectedRoom = getImageFileNameToRoom();\n\n    switch (event.getAction()) {\n\n    case DragEvent.ACTION_DRAG_STARTED:\n      if (event.getClipDescription().hasMimeType(ClipDescription.MIMETYPE_TEXT_PLAIN)) {\n        View draggedView = (View) event.getLocalState();\n        initialX = draggedView.getX();\n        initialY = draggedView.getY();\n        Log.i(TAG, &quot;ACTION_DRAG_STARTED -&gt; initialX: &quot; + initialX + &quot; initialY: &quot; + initialY);\n   \n        changeBackgroundColorOnDrag(view, &quot;#664CAF50&quot;, true);\n\n        return true;\n\n      }\n      return event.getClipDescription().hasMimeType(ClipDescription.MIMETYPE_TEXT_PLAIN);\n\n    case DragEvent.ACTION_DRAG_ENTERED:\n      changeBackgroundColorOnDrag(view, &quot;#664CAF50&quot;, true);\n\n      return true;\n\n    case DragEvent.ACTION_DRAG_LOCATION:\n      return true;\n\n    case DragEvent.ACTION_DRAG_EXITED:\n\n      changeBackgroundColorOnDrag(view, &quot;#66D32121&quot;, true);\n      return true;\n\n    case DragEvent.ACTION_DROP:\n      Log.i(TAG, &quot;ACTION_DROP -&gt; &quot;);\n\n\n      View draggedView = (View) event.getLocalState();\n      ViewGroup owner = (ViewGroup) draggedView.getParent();\n      owner.removeView(draggedView);\n\n      FrameLayout container = (FrameLayout) view;\n      container.addView(draggedView);\n\n      View.DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(draggedView);\n      Point shadowSize = new Point();\n      shadowBuilder.onProvideShadowMetrics(shadowSize, new Point());\n\n      int x = (int) event.getX() - draggedView.getMeasuredWidth() / 2;\n      int y = (int) event.getY() - draggedView.getMeasuredHeight() / 2;\n\n\n      draggedView.setLayoutParams(new FrameLayout.LayoutParams(\n        FrameLayout.LayoutParams.WRAP_CONTENT,\n        FrameLayout.LayoutParams.WRAP_CONTENT));\n\n      Log.i(TAG, &quot;ACTION_DROP -&gt; &quot; + x + &quot;  y: &quot; + y);\n\n      draggedView.setX(x);\n      draggedView.setY(y);\n\n      draggedView.setVisibility(View.VISIBLE);\n      return true;\n\n    case DragEvent.ACTION_DRAG_ENDED:\n      if (!event.getResult()) {\n\n        if (getImageFileNameSelectedRoom != null) {\n          File targetFile = findImageFile(getImageFileNameSelectedRoom);\n\n          if (targetFile != null) {\n            Bitmap bitmap = BitmapFactory.decodeFile(targetFile.getAbsolutePath());\n            BitmapDrawable bitmapDrawable = new BitmapDrawable(getResources(), bitmap);\n            ((FrameLayout) view).setBackground(bitmapDrawable);\n\n            view.invalidate();\n          } else {\n            Log.e(TAG, &quot;Resim dosyası bulunamadı.&quot;);\n          }\n\n        }\n\n        View droppedView = (View) event.getLocalState();\n        droppedView.setVisibility(View.VISIBLE);\n      }\n      return true;\n\n    default:\n      break;\n    }\n    return false;\n  }\n});\n</code></pre>\n<p><strong>setOnLongListener()</strong></p>\n<pre><code>mainView.setOnLongClickListener(new View.OnLongClickListener() {\n                @Override\n                public boolean onLongClick(View view) {\n                    ClipData.Item item = new ClipData.Item((CharSequence) view.getTag());\n                    ClipData dragData = new ClipData((CharSequence) view.getTag(), new String[]{ClipDescription.MIMETYPE_TEXT_PLAIN}, item);\n                    View.DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);\n                    Log.i(TAG, &quot; getXFromView: &quot; + view.getX() + &quot;getYFromView: &quot; + view.getY());\n\n\n                    view.startDrag(dragData, shadowBuilder, view, 0);\n                    return true;\n                }\n            });\n</code></pre>\n<p>In the above code, the first drag-and-drop operation works incorrectly. When I try the code below, the first drag-and-drop operation is fine, but this time the next ones are broken.</p>\n<pre><code>case DragEvent.ACTION_DROP:\n    // ...\n    int x = (int) (initialX + event.getX() - shadowSize.x / 2);\n    int y = (int) (initialY + event.getY() - shadowSize.y / 2);\n\n//initialX and initialY values come from the ACTION_DRAG_STARTED case.\n    // ...\n\n</code></pre>\n"},{"tags":["java","spring","serialization","protocol-buffers"],"owner":{"account_id":29307589,"reputation":21,"user_id":22454223,"display_name":"Liron Tal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693332829,"creation_date":1693322156,"question_id":77001485,"body_markdown":"I&#39;m trying to seriealize a class containing proto back into a json response\r\nThat&#39;s how I create the Class from a yaml file:\r\n\r\n```\r\nfor (String yamlString : strings) {\r\n            ObjectMapper mapper = new YAMLMapper();\r\n            mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n            try {\r\n                AbilityWrapper ability = mapper.readValue(yamlString, PredefinedRuleWrapper.class);\r\n                if (ability.isActive()) {\r\n                    abilities.add(ability);\r\n                }\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n```\r\n\r\n\r\nClass definition:\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\npublic class AbilityWrapper {\r\n    @JsonDeserialize(using = AbilityProtoDeserializer.class)\r\n    private Model.Ability ability;\r\n    private boolean active;\r\n\r\n    public static class AbilityProtoDeserializer extends JsonDeserializer&lt;Model.Ability&gt; {\r\n        @Override\r\n        public Model.Ability deserialize(JsonParser p, DeserializationContext ctxt) throws IOException {\r\n            Model.Builder builder = Model.Ability.newBuilder();\r\n            JsonFormat.parser().merge(p.readValueAsTree().toString(), builder);\r\n            return builder.build();\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nWhen debugging the proto is correctly saved, but when I try to return the HTTP response I get:\r\n\r\n```\r\nhandleException\r\ncom.fasterxml.jackson.databind.exc.InvalidDefinitionException: Direct self-reference leading to cycle (through reference chain: java.util.ArrayList[0]-&gt;abilities.ability.AbilityWrapper[&quot;rule&quot;]-&gt;abilities.Model$AbilityDto[&quot;unknownFields&quot;]-&gt;com.google.protobuf.UnknownFieldSet[&quot;defaultInstanceForType&quot;])\r\n\r\n```\r\n\r\nWhen trying to add a serializer like this:\r\n```\r\n\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\npublic class PredefinedRuleWrapper {\r\n    @JsonDeserialize(using = AbilityProtoDeserializer.class)\r\n    @JsonSerialize(using = PredefinedRuleWrapperSerializer.class)\r\n    private Rules.RuleDto rule;\r\n.\r\n.\r\n.\r\n    public static class AbilityWrapperSerializer extends StdSerializer&lt;AbilityWrapper&gt; {\r\n        public AbilityWrapperSerializer() {\r\n            super(AbilityWrapper.class);\r\n        }\r\n\r\n        @Override\r\n        public void serialize(AbilityWrapper value, JsonGenerator gen, SerializerProvider provider) throws IOException {\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            ObjectNode node = mapper.createObjectNode();\r\n            node.put(&quot;active&quot;, value.isActive());\r\n\r\n            // Convert the RuleDto to JSON string using protobuf&#39;s JsonFormat\r\n            String ruleJson = JsonFormat.printer().print(value.getAbility());\r\n            JsonNode abilityNode = mapper.readTree(AbilityJson);\r\n            node.set(&quot;ability&quot;, abilityNode);\r\n\r\n            mapper.writeValue(gen, node);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nI get the following error: (not sure if it&#39;s a progress or not, and for some reason when debugging the code doesn&#39;t even get to the serializer)\r\n\r\n```\r\n Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: class.Message$AbilityDto cannot be cast to class.AbilityWrapper (Abilities$abilityDto and AbilityWrapper are in unnamed module of loader &#39;app&#39;); nested exception is com.fasterxml.jackson.databind.JsonMappingException: class Abilities$abilityDto cannot be cast to class .abilities.AbilityWrapper (Abilities$abilityDto and abilities.AbilityWrapper are in unnamed module of loader &#39;app&#39;) (through reference chain: java.util.ArrayList[0]-&gt;ability.AbilityWrapper[&quot;ability&quot;])]\r\n```\r\n","title":"Java serializing proto into JSON","body":"<p>I'm trying to seriealize a class containing proto back into a json response\nThat's how I create the Class from a yaml file:</p>\n<pre><code>for (String yamlString : strings) {\n            ObjectMapper mapper = new YAMLMapper();\n            mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n            try {\n                AbilityWrapper ability = mapper.readValue(yamlString, PredefinedRuleWrapper.class);\n                if (ability.isActive()) {\n                    abilities.add(ability);\n                }\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n</code></pre>\n<p>Class definition:</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\npublic class AbilityWrapper {\n    @JsonDeserialize(using = AbilityProtoDeserializer.class)\n    private Model.Ability ability;\n    private boolean active;\n\n    public static class AbilityProtoDeserializer extends JsonDeserializer&lt;Model.Ability&gt; {\n        @Override\n        public Model.Ability deserialize(JsonParser p, DeserializationContext ctxt) throws IOException {\n            Model.Builder builder = Model.Ability.newBuilder();\n            JsonFormat.parser().merge(p.readValueAsTree().toString(), builder);\n            return builder.build();\n        }\n    }\n\n}\n</code></pre>\n<p>When debugging the proto is correctly saved, but when I try to return the HTTP response I get:</p>\n<pre><code>handleException\ncom.fasterxml.jackson.databind.exc.InvalidDefinitionException: Direct self-reference leading to cycle (through reference chain: java.util.ArrayList[0]-&gt;abilities.ability.AbilityWrapper[&quot;rule&quot;]-&gt;abilities.Model$AbilityDto[&quot;unknownFields&quot;]-&gt;com.google.protobuf.UnknownFieldSet[&quot;defaultInstanceForType&quot;])\n\n</code></pre>\n<p>When trying to add a serializer like this:</p>\n<pre><code>\n@Getter\n@Setter\n@NoArgsConstructor\npublic class PredefinedRuleWrapper {\n    @JsonDeserialize(using = AbilityProtoDeserializer.class)\n    @JsonSerialize(using = PredefinedRuleWrapperSerializer.class)\n    private Rules.RuleDto rule;\n.\n.\n.\n    public static class AbilityWrapperSerializer extends StdSerializer&lt;AbilityWrapper&gt; {\n        public AbilityWrapperSerializer() {\n            super(AbilityWrapper.class);\n        }\n\n        @Override\n        public void serialize(AbilityWrapper value, JsonGenerator gen, SerializerProvider provider) throws IOException {\n            ObjectMapper mapper = new ObjectMapper();\n            ObjectNode node = mapper.createObjectNode();\n            node.put(&quot;active&quot;, value.isActive());\n\n            // Convert the RuleDto to JSON string using protobuf's JsonFormat\n            String ruleJson = JsonFormat.printer().print(value.getAbility());\n            JsonNode abilityNode = mapper.readTree(AbilityJson);\n            node.set(&quot;ability&quot;, abilityNode);\n\n            mapper.writeValue(gen, node);\n        }\n    }\n\n}\n\n</code></pre>\n<p>I get the following error: (not sure if it's a progress or not, and for some reason when debugging the code doesn't even get to the serializer)</p>\n<pre><code> Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: class.Message$AbilityDto cannot be cast to class.AbilityWrapper (Abilities$abilityDto and AbilityWrapper are in unnamed module of loader 'app'); nested exception is com.fasterxml.jackson.databind.JsonMappingException: class Abilities$abilityDto cannot be cast to class .abilities.AbilityWrapper (Abilities$abilityDto and abilities.AbilityWrapper are in unnamed module of loader 'app') (through reference chain: java.util.ArrayList[0]-&gt;ability.AbilityWrapper[&quot;ability&quot;])]\n</code></pre>\n"},{"tags":["java","eclipselink","payara-micro"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1693405799,"post_id":77002687,"comment_id":135756958,"body_markdown":"What did you have when you were using version 2.7.x for dependencies - did you change anything else?  I would suspect you should only be using &#39;org.eclipse.persistence.core&#39; and &#39;org.eclipse.persistence.jpa&#39; - as the &#39;eclipselink&#39; artifact includes everything EclipseLink offers, including JPARS (https://eclipse.dev/eclipselink/documentation/2.4/solutions/restful_jpa.htm ). I would have thought there is more setup required, such as including the jar in the war file directly, but I could be wrong though as I&#39;ve not set it up myself.","body":"What did you have when you were using version 2.7.x for dependencies - did you change anything else?  I would suspect you should only be using &#39;org.eclipse.persistence.core&#39; and &#39;org.eclipse.persistence.jpa&#39; - as the &#39;eclipselink&#39; artifact includes everything EclipseLink offers, including JPARS (<a href=\"https://eclipse.dev/eclipselink/documentation/2.4/solutions/restful_jpa.htm\" rel=\"nofollow noreferrer\">eclipse.dev/eclipselink/documentation/2.4/solutions/&hellip;</a> ). I would have thought there is more setup required, such as including the jar in the war file directly, but I could be wrong though as I&#39;ve not set it up myself."},{"owner":{"account_id":17000363,"reputation":3,"user_id":12297903,"display_name":"Tushar Raj"},"score":0,"creation_date":1693473869,"post_id":77002687,"comment_id":135766844,"body_markdown":"I used &#39;org.eclipse.persistence.core&#39; and it solved my problem. Thanks @Chris for your comment.","body":"I used &#39;org.eclipse.persistence.core&#39; and it solved my problem. Thanks @Chris for your comment."}],"owner":{"account_id":17000363,"reputation":3,"user_id":12297903,"display_name":"Tushar Raj"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693332680,"creation_date":1693332680,"question_id":77002687,"body_markdown":"I have added below dependency to my pom.xml\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.eclipse.persistence&lt;/groupId&gt;\r\n    &lt;artifactId&gt;eclipselink&lt;/artifactId&gt;\r\n    &lt;version&gt;3.0.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nThis creates a list of extra rest apis, mentioned below:\r\n\r\n```\r\nGET     /api/{version : v\\d\\.\\d|latest}\r\nPOST    /api/{version : v\\d\\.\\d|latest}\r\nOPTIONS /api/{version : v\\d\\.\\d|latest}/{context}/entity/{entityName}\r\nPOST    /api/{version : v\\d\\.\\d|latest}/{context}/entity/{type}\r\nPUT     /api/{version : v\\d\\.\\d|latest}/{context}/entity/{type}\r\nDELETE  /api/{version : v\\d\\.\\d|latest}/{context}/entity/{type}/{id}\r\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/entity/{type}/{id}\r\nDELETE  /api/{version : v\\d\\.\\d|latest}/{context}/entity/{type}/{id}/{attribute}\r\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/entity/{type}/{id}/{attribute}\r\nPOST    /api/{version : v\\d\\.\\d|latest}/{context}/entity/{type}/{id}/{attribute}\r\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/metadata\r\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/metadata-catalog\r\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/metadata-catalog/entity/{entityName}\r\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/metadata-catalog/query/{queryName}\r\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/metadata/entity/{descriptorAlias}\r\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/metadata/query\r\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/metadata/query/{queryName}\r\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/query/{name}\r\nOPTIONS /api/{version : v\\d\\.\\d|latest}/{context}/query/{name}\r\nPOST    /api/{version : v\\d\\.\\d|latest}/{context}/query/{name}\r\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/singleResultQuery/{name}\r\n```\r\n\r\nI do not want these extra apis. how do I get rid of them?\r\n\r\nWhen I was using eclipselink version 2.7.x, no extra apis were being created. Now I am moving my project from java ee 8 to jakarta ee 9 and hence changed the version of eclipselink to 3.x. This creates extra apis which i do not want.","title":"How to remove extra rest apis exposed by eclipselink version greter than 3.x?","body":"<p>I have added below dependency to my pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.eclipse.persistence&lt;/groupId&gt;\n    &lt;artifactId&gt;eclipselink&lt;/artifactId&gt;\n    &lt;version&gt;3.0.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>This creates a list of extra rest apis, mentioned below:</p>\n<pre><code>GET     /api/{version : v\\d\\.\\d|latest}\nPOST    /api/{version : v\\d\\.\\d|latest}\nOPTIONS /api/{version : v\\d\\.\\d|latest}/{context}/entity/{entityName}\nPOST    /api/{version : v\\d\\.\\d|latest}/{context}/entity/{type}\nPUT     /api/{version : v\\d\\.\\d|latest}/{context}/entity/{type}\nDELETE  /api/{version : v\\d\\.\\d|latest}/{context}/entity/{type}/{id}\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/entity/{type}/{id}\nDELETE  /api/{version : v\\d\\.\\d|latest}/{context}/entity/{type}/{id}/{attribute}\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/entity/{type}/{id}/{attribute}\nPOST    /api/{version : v\\d\\.\\d|latest}/{context}/entity/{type}/{id}/{attribute}\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/metadata\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/metadata-catalog\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/metadata-catalog/entity/{entityName}\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/metadata-catalog/query/{queryName}\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/metadata/entity/{descriptorAlias}\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/metadata/query\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/metadata/query/{queryName}\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/query/{name}\nOPTIONS /api/{version : v\\d\\.\\d|latest}/{context}/query/{name}\nPOST    /api/{version : v\\d\\.\\d|latest}/{context}/query/{name}\nGET     /api/{version : v\\d\\.\\d|latest}/{context}/singleResultQuery/{name}\n</code></pre>\n<p>I do not want these extra apis. how do I get rid of them?</p>\n<p>When I was using eclipselink version 2.7.x, no extra apis were being created. Now I am moving my project from java ee 8 to jakarta ee 9 and hence changed the version of eclipselink to 3.x. This creates extra apis which i do not want.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"score":0,"creation_date":1525070638,"post_id":50094547,"comment_id":87206508,"body_markdown":"which version of itext you are using?","body":"which version of itext you are using?"},{"owner":{"account_id":10156712,"reputation":1466,"user_id":7501582,"accept_rate":0,"display_name":"surbhiGoel"},"score":0,"creation_date":1525071179,"post_id":50094547,"comment_id":87206756,"body_markdown":"I am using iText 1.3.1","body":"I am using iText 1.3.1"},{"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"score":0,"creation_date":1525071423,"post_id":50094547,"comment_id":87206877,"body_markdown":"Try iText 2.1.7","body":"Try iText 2.1.7"},{"owner":{"account_id":10156712,"reputation":1466,"user_id":7501582,"accept_rate":0,"display_name":"surbhiGoel"},"score":0,"creation_date":1525072074,"post_id":50094547,"comment_id":87207198,"body_markdown":"This exception occured now.   \njava.lang.ClassNotFoundException: com.lowagie.text.rtf.style.RtfFont","body":"This exception occured now.    java.lang.ClassNotFoundException: com.lowagie.text.rtf.style.RtfFont"}],"answers":[{"tags":[],"owner":{"account_id":1072799,"reputation":81,"user_id":1071671,"display_name":"user1071671"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626809820,"creation_date":1626809820,"answer_id":68460450,"question_id":50094547,"body_markdown":"I guess I am late but for anyone looking for solution. Just add either Itext dependency or Openpdf runtime jar dependency in your application build.gradle or pom.xml.\r\n\r\n```\r\nruntime &#39;com.github.librepdf:openpdf:1.2.5&#39;\r\n\r\nor \r\n\r\nruntime &#39;com.lowagie:itext:2.1.7&#39;\r\n\r\n\r\n```\r\n\r\n","title":"java.lang.ClassNotFoundException: com.lowagie.text.Font","body":"<p>I guess I am late but for anyone looking for solution. Just add either Itext dependency or Openpdf runtime jar dependency in your application build.gradle or pom.xml.</p>\n<pre><code>runtime 'com.github.librepdf:openpdf:1.2.5'\n\nor \n\nruntime 'com.lowagie:itext:2.1.7'\n\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20701840,"reputation":871,"user_id":15200705,"display_name":"Luciana Oliveira"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693332518,"creation_date":1693332518,"answer_id":77002671,"question_id":50094547,"body_markdown":"You can try set this dependency in the pom.xml:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.lowagie&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;itext&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.2.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;","title":"java.lang.ClassNotFoundException: com.lowagie.text.Font","body":"<p>You can try set this dependency in the pom.xml:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.lowagie&lt;/groupId&gt;\n        &lt;artifactId&gt;itext&lt;/artifactId&gt;\n        &lt;version&gt;4.2.1&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":10156712,"reputation":1466,"user_id":7501582,"accept_rate":0,"display_name":"surbhiGoel"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":523,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1693332518,"creation_date":1525066891,"question_id":50094547,"body_markdown":"Getting this error:\r\n\r\n&gt;Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed; nested exception is java.lang.NoClassDefFoundError: com/lowagie/text/Font] with root cause\r\n\r\n**in**\r\n\r\n    WordDoc.setColWidth(colWidth, colWidthForSecond);\r\n    String fileName = WordDoc.generateWordDoc(title, &quot;filename&quot;, &quot;&quot;, null,&quot;&quot;, \r\n    tabledata,tabledata[0].length, &quot;&quot;, null, &quot;&quot;, null, 0, &quot;&quot;, &quot;&quot;);","title":"java.lang.ClassNotFoundException: com.lowagie.text.Font","body":"<p>Getting this error:</p>\n\n<blockquote>\n  <p>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed; nested exception is java.lang.NoClassDefFoundError: com/lowagie/text/Font] with root cause</p>\n</blockquote>\n\n<p><strong>in</strong></p>\n\n<pre><code>WordDoc.setColWidth(colWidth, colWidthForSecond);\nString fileName = WordDoc.generateWordDoc(title, \"filename\", \"\", null,\"\", \ntabledata,tabledata[0].length, \"\", null, \"\", null, 0, \"\", \"\");\n</code></pre>\n"},{"tags":["java","java-8","apache-httpclient-4.x","http-patch"],"comments":[{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1687882302,"post_id":76566434,"comment_id":134997814,"body_markdown":"The class is there in httpclient JAR, which you have included. Please check server classpath. If you are deploying as a WAR check if it is getting packaged in WEB-INF/lib. The class is very much there, so it is a classpath problem. To be doubly sure, open the jar file and physically check","body":"The class is there in httpclient JAR, which you have included. Please check server classpath. If you are deploying as a WAR check if it is getting packaged in WEB-INF/lib. The class is very much there, so it is a classpath problem. To be doubly sure, open the jar file and physically check"},{"owner":{"account_id":13729295,"reputation":867,"user_id":9907182,"display_name":"Justin"},"score":0,"creation_date":1688011415,"post_id":76566434,"comment_id":135017192,"body_markdown":"Hi @Ironluca\nThanks for reply, As you suggested, tried to check Jar which has class or not. class present there. please check updated question for more details.","body":"Hi @Ironluca Thanks for reply, As you suggested, tried to check Jar which has class or not. class present there. please check updated question for more details."},{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1688034117,"post_id":76566434,"comment_id":135020854,"body_markdown":"What is your mode of deployment, is it a regular WAR file or is it part of a framework like Spring Boot. What is the server container you are using","body":"What is your mode of deployment, is it a regular WAR file or is it part of a framework like Spring Boot. What is the server container you are using"},{"owner":{"account_id":13729295,"reputation":867,"user_id":9907182,"display_name":"Justin"},"score":0,"creation_date":1688043918,"post_id":76566434,"comment_id":135022856,"body_markdown":"Hi @Ironluca Actually i am integrating this piece of Java class mediation inside Integration tool called &quot;WSO2 EI&quot; where we can write java code as well. At finally we can export this class as Jar and place it inside wso2 server lib path or include this class mediator inside deployable archive file called &quot;CAR&quot; which is specific to WSO2 tool.","body":"Hi @Ironluca Actually i am integrating this piece of Java class mediation inside Integration tool called &quot;WSO2 EI&quot; where we can write java code as well. At finally we can export this class as Jar and place it inside wso2 server lib path or include this class mediator inside deployable archive file called &quot;CAR&quot; which is specific to WSO2 tool."}],"owner":{"account_id":13729295,"reputation":867,"user_id":9907182,"display_name":"Justin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693331942,"creation_date":1687879662,"question_id":76566434,"body_markdown":"I am posting `JSON` Payload to REST API by using `PATCH` method with the help of `apache http client libraries`\r\n\r\nJava Version: 1.8.0_171\r\n\r\nFollowing this [link][1] for PATCH method with apache http client\r\n\r\nCode snippet in blog:\r\n\r\n \r\n\r\n    try {\r\n    \r\n            //This is just to avoid ssl hostname verification and to trust all, you can use simple Http client also\r\n            CloseableHttpClient httpClient = HttpClientBuilder.create().setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, TrustAllStrategy.INSTANCE).build())\r\n                    .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE).build();\r\n    \r\n            HttpPatch request = new HttpPatch(REST_SERVICE_URL);\r\n            StringEntity params = new StringEntity(JSON.toJSONString(payload), ContentType.APPLICATION_JSON);\r\n            request.setEntity(params);\r\n            request.addHeader(org.apache.http.HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE);\r\n            request.addHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE);\r\n            request.addHeader(HttpHeaders.AUTHORIZATION, OAuth2AccessToken.BEARER_TYPE + &quot; &quot; + accessToken);\r\n            HttpResponse response =     httpClient.execute(request);            \r\n    \r\n            String statusCode = response.getStatusLine().getStatusCode();\r\n    \r\n        } catch (Exception ex) {\r\n            // handle exception here\r\n        }\r\n\r\nWhat I tried:\r\n\r\n    import java.util.Base64;\r\n    \r\n    import org.apache.http.HttpResponse;\r\n    import org.apache.http.client.methods.HttpPatch;\r\n    import org.apache.http.conn.ssl.NoopHostnameVerifier;\r\n    import org.apache.http.conn.ssl.TrustAllStrategy;\r\n    import org.apache.http.entity.StringEntity;\r\n    import org.apache.http.impl.client.CloseableHttpClient;\r\n    import org.apache.http.impl.client.HttpClientBuilder;\r\n    import org.apache.http.ssl.SSLContextBuilder;\r\n    \r\n    \r\n    public class Connect2Client {\r\n    public static void main(String[] args) {\r\n    \tString url = &quot;https://client.domain.com/client/api/A1234&quot;;\r\n    \r\n    \tString Credentials = &quot;XXXX&quot;;\r\n    \tString paylod=&quot;[{ \\&quot;op\\&quot;: \\&quot;add\\&quot;, \\&quot;path\\&quot;: \\&quot;/progressTrail\\&quot;, \\&quot;value\\&quot;: \\&quot;messageType update\\&quot;, \\&quot;from\\&quot; : \\&quot;string\\&quot; } ]&quot;;\r\n    \ttry {\r\n    \t\tString returnPayload=connect(url, Credentials, paylod);\r\n    \t} catch (Exception e) {\r\n    \t\t// TODO Auto-generated catch block\r\n    \t\te.printStackTrace();\r\n    \t}\r\n    }\r\n    \r\n    public static String connect(String url, String Credentials, String data) throws Exception {\r\n    \tString resp = null;\r\n    \t //This is just to avoid ssl hostname verification and to trust all, you can use simple Http client also\r\n        CloseableHttpClient httpClient = HttpClientBuilder.create().setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, TrustAllStrategy.INSTANCE).build())\r\n                .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE).build();\r\n        HttpPatch request = new HttpPatch(url);\r\n        StringEntity params = new StringEntity(data);\r\n        String authStringEnc = Base64.getEncoder().encodeToString(Credentials.getBytes());\r\n        request.setEntity(params);\r\n        request.addHeader(&quot;Content-Type&quot;, &quot;application/json-patch+json&quot;);\r\n        request.addHeader(&quot;Authorization&quot;, &quot;Basic &quot; + authStringEnc);\r\n        HttpResponse response = httpClient.execute(request); \r\n        System.out.println(&quot;GET Response Status:: &quot;\r\n    \t\t\t+ response.getStatusLine().getStatusCode());\r\n    \treturn resp;\r\n    }\r\n    }\r\n\r\nBelow Jars added in both class path and server lib :\r\n\r\n - httpclient-4.5.14\r\n - httpcore-4.4.15\r\n\r\nGot ERROR like below\r\n\r\n    java.lang.NoClassDefFoundError: org/apache/http/conn/ssl/TrustAllStrategy \r\n\r\nUpdate:\r\n\r\nBy using [Java Decompiler][2], tried to extract Java code from httpclient jar in order to check whether TrustAllStrategy class present or not, \r\n\r\n[![class][3]][3]\r\n\r\noutcome: Class resides inside Jar, then what causes this issue, No idea on this.\r\n\r\nMay I know the way to resolve this ERROR? \r\n\r\n\r\n  [1]: https://stackoverflow.com/q/25163131/\r\n  [2]: http://www.javadecompilers.com/result?currentfile=org/apache/http/conn/ssl/TrustAllStrategy.java\r\n  [3]: https://i.stack.imgur.com/sSrv8.png","title":"PATCH HTTP Method : java.lang.NoClassDefFoundError: org/apache/http/conn/ssl/TrustAllStrategy in Java 8","body":"<p>I am posting <code>JSON</code> Payload to REST API by using <code>PATCH</code> method with the help of <code>apache http client libraries</code></p>\n<p>Java Version: 1.8.0_171</p>\n<p>Following this <a href=\"https://stackoverflow.com/q/25163131/\">link</a> for PATCH method with apache http client</p>\n<p>Code snippet in blog:</p>\n<pre><code>try {\n\n        //This is just to avoid ssl hostname verification and to trust all, you can use simple Http client also\n        CloseableHttpClient httpClient = HttpClientBuilder.create().setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, TrustAllStrategy.INSTANCE).build())\n                .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE).build();\n\n        HttpPatch request = new HttpPatch(REST_SERVICE_URL);\n        StringEntity params = new StringEntity(JSON.toJSONString(payload), ContentType.APPLICATION_JSON);\n        request.setEntity(params);\n        request.addHeader(org.apache.http.HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE);\n        request.addHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE);\n        request.addHeader(HttpHeaders.AUTHORIZATION, OAuth2AccessToken.BEARER_TYPE + &quot; &quot; + accessToken);\n        HttpResponse response =     httpClient.execute(request);            \n\n        String statusCode = response.getStatusLine().getStatusCode();\n\n    } catch (Exception ex) {\n        // handle exception here\n    }\n</code></pre>\n<p>What I tried:</p>\n<pre><code>import java.util.Base64;\n\nimport org.apache.http.HttpResponse;\nimport org.apache.http.client.methods.HttpPatch;\nimport org.apache.http.conn.ssl.NoopHostnameVerifier;\nimport org.apache.http.conn.ssl.TrustAllStrategy;\nimport org.apache.http.entity.StringEntity;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClientBuilder;\nimport org.apache.http.ssl.SSLContextBuilder;\n\n\npublic class Connect2Client {\npublic static void main(String[] args) {\n    String url = &quot;https://client.domain.com/client/api/A1234&quot;;\n\n    String Credentials = &quot;XXXX&quot;;\n    String paylod=&quot;[{ \\&quot;op\\&quot;: \\&quot;add\\&quot;, \\&quot;path\\&quot;: \\&quot;/progressTrail\\&quot;, \\&quot;value\\&quot;: \\&quot;messageType update\\&quot;, \\&quot;from\\&quot; : \\&quot;string\\&quot; } ]&quot;;\n    try {\n        String returnPayload=connect(url, Credentials, paylod);\n    } catch (Exception e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n}\n\npublic static String connect(String url, String Credentials, String data) throws Exception {\n    String resp = null;\n     //This is just to avoid ssl hostname verification and to trust all, you can use simple Http client also\n    CloseableHttpClient httpClient = HttpClientBuilder.create().setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, TrustAllStrategy.INSTANCE).build())\n            .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE).build();\n    HttpPatch request = new HttpPatch(url);\n    StringEntity params = new StringEntity(data);\n    String authStringEnc = Base64.getEncoder().encodeToString(Credentials.getBytes());\n    request.setEntity(params);\n    request.addHeader(&quot;Content-Type&quot;, &quot;application/json-patch+json&quot;);\n    request.addHeader(&quot;Authorization&quot;, &quot;Basic &quot; + authStringEnc);\n    HttpResponse response = httpClient.execute(request); \n    System.out.println(&quot;GET Response Status:: &quot;\n            + response.getStatusLine().getStatusCode());\n    return resp;\n}\n}\n</code></pre>\n<p>Below Jars added in both class path and server lib :</p>\n<ul>\n<li>httpclient-4.5.14</li>\n<li>httpcore-4.4.15</li>\n</ul>\n<p>Got ERROR like below</p>\n<pre><code>java.lang.NoClassDefFoundError: org/apache/http/conn/ssl/TrustAllStrategy \n</code></pre>\n<p>Update:</p>\n<p>By using <a href=\"http://www.javadecompilers.com/result?currentfile=org/apache/http/conn/ssl/TrustAllStrategy.java\" rel=\"nofollow noreferrer\">Java Decompiler</a>, tried to extract Java code from httpclient jar in order to check whether TrustAllStrategy class present or not,</p>\n<p><a href=\"https://i.stack.imgur.com/sSrv8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sSrv8.png\" alt=\"class\" /></a></p>\n<p>outcome: Class resides inside Jar, then what causes this issue, No idea on this.</p>\n<p>May I know the way to resolve this ERROR?</p>\n"},{"tags":["java","multithreading","wildfly","resteasy"],"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1686687593,"post_id":76467545,"comment_id":134832989,"body_markdown":"Are you want to use the Jakarta REST Client or the MicroProfile REST Client? The MP REST client is generally done via injection where as with the Jakarta REST Client the builder is used. Note in WildFly 27+ you can @Inject a client.","body":"Are you want to use the Jakarta REST Client or the MicroProfile REST Client? The MP REST client is generally done via injection where as with the Jakarta REST Client the builder is used. Note in WildFly 27+ you can @Inject a client."},{"owner":{"account_id":11222708,"reputation":587,"user_id":8233361,"display_name":"Claudio Weiler"},"score":0,"creation_date":1686689613,"post_id":76467545,"comment_id":134833324,"body_markdown":"Hi @JamesR.Perkins! Both are used, problem is with Jakarta REST Client (actually Java EE 8), or, at least, I think it is.","body":"Hi @JamesR.Perkins! Both are used, problem is with Jakarta REST Client (actually Java EE 8), or, at least, I think it is."},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1686782586,"post_id":76467545,"comment_id":134848352,"body_markdown":"The lifecycle of an MP REST Client is bound to CDI. I can&#39;t give an exact answer to how the pooling is done. It should be the same as a Jakarta REST Client though. Currently by default RESTEasy uses the Apache HTTP Client, though I&#39;d like to make changes there.","body":"The lifecycle of an MP REST Client is bound to CDI. I can&#39;t give an exact answer to how the pooling is done. It should be the same as a Jakarta REST Client though. Currently by default RESTEasy uses the Apache HTTP Client, though I&#39;d like to make changes there."},{"owner":{"account_id":11222708,"reputation":587,"user_id":8233361,"display_name":"Claudio Weiler"},"score":0,"creation_date":1686843389,"post_id":76467545,"comment_id":134856914,"body_markdown":"@JamesR.Perkins *&quot;It should be the same as a Jakarta REST Client though&quot;* From my tests: Yes, it is. But route pool for &lt;login_server&gt; barely uses &quot;20 of 50&quot;.","body":"@JamesR.Perkins <i>&quot;It should be the same as a Jakarta REST Client though&quot;</i> From my tests: Yes, it is. But route pool for &lt;login_server&gt; barely uses &quot;20 of 50&quot;."}],"answers":[{"comments":[{"owner":{"account_id":11222708,"reputation":587,"user_id":8233361,"display_name":"Claudio Weiler"},"score":0,"creation_date":1686770555,"post_id":76475657,"comment_id":134846457,"body_markdown":"Thanks! The manual `Client` handling is made out of CDI. I can file an issue, but for now I have no clue if this is a bug or expected behavior. But I found some more infos, added to main question.","body":"Thanks! The manual <code>Client</code> handling is made out of CDI. I can file an issue, but for now I have no clue if this is a bug or expected behavior. But I found some more infos, added to main question."}],"tags":[],"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686759551,"creation_date":1686759551,"answer_id":76475657,"question_id":76467545,"body_markdown":"You should be able to share a `Client` instance. If not, I would probably consider that a bug. Given you are using WildFly, you could file an issue with [RESTEasy][1]. One thing to note is WildFly 29+ would be the only releases to see the fix.\r\n\r\nWith regard to should you share or not, IMO it depends. It should be fine to share in most cases. However, there could be scenarios you don&#39;t want to share an instance and those should be thought about.\r\n\r\nIf the overhead is a concern because you make a lot of REST calls, then sharing makes sense there as well. However, if they are not common then the overhead likely doesn&#39;t matter.\r\n\r\nOne option would be to use your own CDI producer to inject the `Client` being used. For the MicroProfile REST Client it would be a bit different because it is already managed via CLI.\r\n\r\n[1]: https://issues.redhat.com/browse/RESTEASY","title":"Should I use javax.ws.rs.client.Client instances single shared, pool shared or not shared at all?","body":"<p>You should be able to share a <code>Client</code> instance. If not, I would probably consider that a bug. Given you are using WildFly, you could file an issue with <a href=\"https://issues.redhat.com/browse/RESTEASY\" rel=\"nofollow noreferrer\">RESTEasy</a>. One thing to note is WildFly 29+ would be the only releases to see the fix.</p>\n<p>With regard to should you share or not, IMO it depends. It should be fine to share in most cases. However, there could be scenarios you don't want to share an instance and those should be thought about.</p>\n<p>If the overhead is a concern because you make a lot of REST calls, then sharing makes sense there as well. However, if they are not common then the overhead likely doesn't matter.</p>\n<p>One option would be to use your own CDI producer to inject the <code>Client</code> being used. For the MicroProfile REST Client it would be a bit different because it is already managed via CLI.</p>\n"}],"owner":{"account_id":11222708,"reputation":587,"user_id":8233361,"display_name":"Claudio Weiler"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693331297,"creation_date":1686678901,"question_id":76467545,"body_markdown":"`javax.ws.rs.client.Client` documentation states that:\r\n\r\n&gt; The main entry point to the API is a ClientBuilder that is used to bootstrap Client instances - configurable, **heavy-weight objects** that manage the underlying communication infrastructure and serve as the root objects for accessing any Web resource.\r\n\r\nI have doubts if it refers to `Client` or `ClientBuilder` instances. Searched in the web, and it appears that it refers to `Client`, but...\r\n\r\nI made a simple load test. It starts 10 threads, each thread makes 50 calls with a random interval (100 to 500 ms) between calls.\r\n\r\nEach test call actually do 2 HTTP requests:\r\n\r\n1. Manual request to get access token with `javax.ws.rs.client.Client`;\r\n2. MicroProfile REST Client managed final request using above access token with `@ClientHeaderParam(name = HttpHeaders.AUTHORIZATION, ...`.\r\n\r\nWith this load test I made some implementations tests. The tests are run in a WildFly 26 instance.\r\n\r\n**First implementation** - Each request do a `ClientBuilder.newClient()`\r\n\r\nObs. Each `Response` and `Client` are closed after use.\r\n\r\n- Minimum: 31 ms\r\n- Maximum: 196 ms\r\n- Average: ~48 ms\r\n\r\n**Second Implementation** - Shared `ClientBuilder` instance\r\n\r\nObs. Each `Response` and `Client` are closed after use.\r\n\r\n- Minimum: 25 ms\r\n- Maximum: 72 ms\r\n- Average: ~32 ms\r\n\r\nHere we got some improvements, looks like `ClientBuilder` really benefits from being shared. \r\n\r\nBoth implementations run flawless.\r\n\r\n**Third implementation** - Shared `Client` instance\r\n\r\nObs. Each `Response` are closed after use.\r\n\r\nThis test can&#39;t run complete, it starts to throw errors about the 7~10 iteration of each thread, so the results are limited:\r\n\r\n- Minimum: 14 ms\r\n- Maximum: 53 ms\r\n- Average: ~21 ms\r\n\r\nIt really looks that a shared instance is a way to go, but the errors made this a no go.\r\n\r\nError: `java.net.SocketException: Software caused connection abort: recv failed`\r\n\r\n**Fourth implementation** - Shared pooled `Client` instance with `commons-pool2`\r\n\r\nObs. Each `Response` are closed and `Client` is return to the pool after use.\r\n\r\nCreated a generic pool with 20 max capacity, `Client` factory uses a shared `ClientBuilder`, this pool is filled (by demand) with 10 clients during run, which corresponds to the load test 10 threads. But this test also starts to throw errors (same error above), now about the 9~12 iteration of each thread, so the results are also limited:\r\n\r\n- Minimum: 15 ms\r\n- Maximum: 67 ms (with some aberrations to ~5500 ms)\r\n- Average: ~20 ms (ignoring aberrations)\r\n\r\nLooks like there is no gain using a pool with shared `Client` instances.\r\n\r\n**Observations**\r\n\r\nIt really appears that `Client` instances should be shared, but for some reasons it appears that this instance starts to broke after some uses.\r\n\r\nWith a shallow inspection on MicroProfile REST Client, it looks to always use a new ClientBuilder, it is different implementation, but I can&#39;t go deeper in my investigation.\r\n\r\n**So, my question**\r\n\r\nShould I, or not, to reuse `javax.ws.rs.client.Client` instances?\r\n\r\n**References**\r\n\r\n- https://javaee.github.io/javaee-spec/javadocs/javax/ws/rs/client/package-summary.html\r\n- https://stackoverflow.com/questions/57735098/is-a-singleton-javax-ws-rs-client-client-thread-safe-in-case-of-being-used-in-th\r\n- https://stackoverflow.com/questions/38378322/jax-rs-client-pool\r\n- https://stackoverflow.com/questions/34566278/how-to-correctly-share-jax-rs-2-0-client\r\n- https://stackoverflow.com/questions/35859582/need-to-create-javax-ws-rs-client-client-for-each-webservcie-call\r\n\r\n---\r\n\r\n**Use case explanation**\r\n\r\nI have a MicroProfile REST Client that connects to a authenticated endpoint. Authentication is made with OpenID Connect.\r\n\r\n`@ClientHeaderParam` is used to inject the authentication header into MP client requests, and this annotations points to an authentication header generator that do the client_credential authentication with OpenID Server (KeyCloak) to obtain a valid token and return it to the MP method call.\r\n\r\n---\r\n\r\n**Edit 1**\r\n\r\nI found how to enable some loggings and I see a lot of this debug output:\r\n\r\n```\r\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] (Thread-*) Connection request: [route: {}-&gt;http://localhost:80][total available: 0; route allocated: 50 of 50; total allocated: 50 of 50]\r\n```\r\n\r\nThis line represents the requests made to REST endpoint, not the OpenID server.\r\n\r\nSo, now my suspect is that the problem is not directly on `Client` instance, but in MicroProfile REST Client. For some reason, when the `Client` instance is shared, MP connection pooling takes to long to release the leased connections, what made it to hang on waiting to available connections. And when `Client` instance isn&#39;t shared, the release occurs more quickly, in this case I never get an `allocated: 50 of 50`.\r\n\r\nWith this new info, I found that the 1 thread that do 50 calls caused some contentions, so I isolated the call into a `Callable` and it resolved the errors, but this also made the average time grow to absurd 2 seconds!\r\n\r\nNow I have a new question: How is `Client` instance sharing is related to MicroProfile REST Client connection pool?\r\n\r\n---\r\n\r\n**Edit 2**\r\n\r\nSo, it doesn&#39;t matter how REST client is being build, all will fall into `org.apache.http.impl.conn.PoolingHttpClientConnectionManager`.\r\n\r\nFor some reason, it can&#39;t share connections and takes too long to release connections quickly hitting 50 of 50 allocated, then it begins to lock resources, when I use `@Inject @RestClient`.\r\n\r\nWhen I build proxies manually with `RestClientBuilder.newBuilder().baseUri(uri).build(Client.class)` it always use a fresh connection manager with 1 of 50 allocated, and connection manager is shut down right after each connection usage.\r\n\r\nI think that MicroProfile REST client builder shares the builder: https://github.com/eclipse/microprofile-rest-client/blob/b6eb2f651c0cbb19f0300eba5c6a3242e9e46019/api/src/main/java/org/eclipse/microprofile/rest/client/RestClientBuilder.java#L57\r\n\r\nAnd I think it tries to share the client, but for each request, for the very same endpoint, with the same header (can change when token expires), it just don&#39;t reuse the client connection from the pool.","title":"Should I use javax.ws.rs.client.Client instances single shared, pool shared or not shared at all?","body":"<p><code>javax.ws.rs.client.Client</code> documentation states that:</p>\n<blockquote>\n<p>The main entry point to the API is a ClientBuilder that is used to bootstrap Client instances - configurable, <strong>heavy-weight objects</strong> that manage the underlying communication infrastructure and serve as the root objects for accessing any Web resource.</p>\n</blockquote>\n<p>I have doubts if it refers to <code>Client</code> or <code>ClientBuilder</code> instances. Searched in the web, and it appears that it refers to <code>Client</code>, but...</p>\n<p>I made a simple load test. It starts 10 threads, each thread makes 50 calls with a random interval (100 to 500 ms) between calls.</p>\n<p>Each test call actually do 2 HTTP requests:</p>\n<ol>\n<li>Manual request to get access token with <code>javax.ws.rs.client.Client</code>;</li>\n<li>MicroProfile REST Client managed final request using above access token with <code>@ClientHeaderParam(name = HttpHeaders.AUTHORIZATION, ...</code>.</li>\n</ol>\n<p>With this load test I made some implementations tests. The tests are run in a WildFly 26 instance.</p>\n<p><strong>First implementation</strong> - Each request do a <code>ClientBuilder.newClient()</code></p>\n<p>Obs. Each <code>Response</code> and <code>Client</code> are closed after use.</p>\n<ul>\n<li>Minimum: 31 ms</li>\n<li>Maximum: 196 ms</li>\n<li>Average: ~48 ms</li>\n</ul>\n<p><strong>Second Implementation</strong> - Shared <code>ClientBuilder</code> instance</p>\n<p>Obs. Each <code>Response</code> and <code>Client</code> are closed after use.</p>\n<ul>\n<li>Minimum: 25 ms</li>\n<li>Maximum: 72 ms</li>\n<li>Average: ~32 ms</li>\n</ul>\n<p>Here we got some improvements, looks like <code>ClientBuilder</code> really benefits from being shared.</p>\n<p>Both implementations run flawless.</p>\n<p><strong>Third implementation</strong> - Shared <code>Client</code> instance</p>\n<p>Obs. Each <code>Response</code> are closed after use.</p>\n<p>This test can't run complete, it starts to throw errors about the 7~10 iteration of each thread, so the results are limited:</p>\n<ul>\n<li>Minimum: 14 ms</li>\n<li>Maximum: 53 ms</li>\n<li>Average: ~21 ms</li>\n</ul>\n<p>It really looks that a shared instance is a way to go, but the errors made this a no go.</p>\n<p>Error: <code>java.net.SocketException: Software caused connection abort: recv failed</code></p>\n<p><strong>Fourth implementation</strong> - Shared pooled <code>Client</code> instance with <code>commons-pool2</code></p>\n<p>Obs. Each <code>Response</code> are closed and <code>Client</code> is return to the pool after use.</p>\n<p>Created a generic pool with 20 max capacity, <code>Client</code> factory uses a shared <code>ClientBuilder</code>, this pool is filled (by demand) with 10 clients during run, which corresponds to the load test 10 threads. But this test also starts to throw errors (same error above), now about the 9~12 iteration of each thread, so the results are also limited:</p>\n<ul>\n<li>Minimum: 15 ms</li>\n<li>Maximum: 67 ms (with some aberrations to ~5500 ms)</li>\n<li>Average: ~20 ms (ignoring aberrations)</li>\n</ul>\n<p>Looks like there is no gain using a pool with shared <code>Client</code> instances.</p>\n<p><strong>Observations</strong></p>\n<p>It really appears that <code>Client</code> instances should be shared, but for some reasons it appears that this instance starts to broke after some uses.</p>\n<p>With a shallow inspection on MicroProfile REST Client, it looks to always use a new ClientBuilder, it is different implementation, but I can't go deeper in my investigation.</p>\n<p><strong>So, my question</strong></p>\n<p>Should I, or not, to reuse <code>javax.ws.rs.client.Client</code> instances?</p>\n<p><strong>References</strong></p>\n<ul>\n<li><a href=\"https://javaee.github.io/javaee-spec/javadocs/javax/ws/rs/client/package-summary.html\" rel=\"nofollow noreferrer\">https://javaee.github.io/javaee-spec/javadocs/javax/ws/rs/client/package-summary.html</a></li>\n<li><a href=\"https://stackoverflow.com/questions/57735098/is-a-singleton-javax-ws-rs-client-client-thread-safe-in-case-of-being-used-in-th\">Is a singleton javax.ws.rs.client.Client thread-safe in case of being used in the JAX-RS Resource?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/38378322/jax-rs-client-pool\">Jax rs client pool</a></li>\n<li><a href=\"https://stackoverflow.com/questions/34566278/how-to-correctly-share-jax-rs-2-0-client\">How to correctly share JAX-RS 2.0 client</a></li>\n<li><a href=\"https://stackoverflow.com/questions/35859582/need-to-create-javax-ws-rs-client-client-for-each-webservcie-call\">Need to create javax.ws.rs.client.Client for each webservcie call</a></li>\n</ul>\n<hr />\n<p><strong>Use case explanation</strong></p>\n<p>I have a MicroProfile REST Client that connects to a authenticated endpoint. Authentication is made with OpenID Connect.</p>\n<p><code>@ClientHeaderParam</code> is used to inject the authentication header into MP client requests, and this annotations points to an authentication header generator that do the client_credential authentication with OpenID Server (KeyCloak) to obtain a valid token and return it to the MP method call.</p>\n<hr />\n<p><strong>Edit 1</strong></p>\n<p>I found how to enable some loggings and I see a lot of this debug output:</p>\n<pre><code>[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] (Thread-*) Connection request: [route: {}-&gt;http://localhost:80][total available: 0; route allocated: 50 of 50; total allocated: 50 of 50]\n</code></pre>\n<p>This line represents the requests made to REST endpoint, not the OpenID server.</p>\n<p>So, now my suspect is that the problem is not directly on <code>Client</code> instance, but in MicroProfile REST Client. For some reason, when the <code>Client</code> instance is shared, MP connection pooling takes to long to release the leased connections, what made it to hang on waiting to available connections. And when <code>Client</code> instance isn't shared, the release occurs more quickly, in this case I never get an <code>allocated: 50 of 50</code>.</p>\n<p>With this new info, I found that the 1 thread that do 50 calls caused some contentions, so I isolated the call into a <code>Callable</code> and it resolved the errors, but this also made the average time grow to absurd 2 seconds!</p>\n<p>Now I have a new question: How is <code>Client</code> instance sharing is related to MicroProfile REST Client connection pool?</p>\n<hr />\n<p><strong>Edit 2</strong></p>\n<p>So, it doesn't matter how REST client is being build, all will fall into <code>org.apache.http.impl.conn.PoolingHttpClientConnectionManager</code>.</p>\n<p>For some reason, it can't share connections and takes too long to release connections quickly hitting 50 of 50 allocated, then it begins to lock resources, when I use <code>@Inject @RestClient</code>.</p>\n<p>When I build proxies manually with <code>RestClientBuilder.newBuilder().baseUri(uri).build(Client.class)</code> it always use a fresh connection manager with 1 of 50 allocated, and connection manager is shut down right after each connection usage.</p>\n<p>I think that MicroProfile REST client builder shares the builder: <a href=\"https://github.com/eclipse/microprofile-rest-client/blob/b6eb2f651c0cbb19f0300eba5c6a3242e9e46019/api/src/main/java/org/eclipse/microprofile/rest/client/RestClientBuilder.java#L57\" rel=\"nofollow noreferrer\">https://github.com/eclipse/microprofile-rest-client/blob/b6eb2f651c0cbb19f0300eba5c6a3242e9e46019/api/src/main/java/org/eclipse/microprofile/rest/client/RestClientBuilder.java#L57</a></p>\n<p>And I think it tries to share the client, but for each request, for the very same endpoint, with the same header (can change when token expires), it just don't reuse the client connection from the pool.</p>\n"},{"tags":["java","spring-boot","datasource","hikaricp"],"answers":[{"comments":[{"owner":{"account_id":12616725,"reputation":1228,"user_id":9614332,"display_name":"Stefano Bossi"},"score":0,"creation_date":1693342835,"post_id":77002542,"comment_id":135747757,"body_markdown":"Thanks for the reply, the strange thing here is that that bean should work to an another dB which is an in ram embedded H2 and that one it&#39;s definitely avaiable! That&#39;s wierd. But you are rigth, the problem is somewhere. Thanks","body":"Thanks for the reply, the strange thing here is that that bean should work to an another dB which is an in ram embedded H2 and that one it&#39;s definitely avaiable! That&#39;s wierd. But you are rigth, the problem is somewhere. Thanks"}],"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693331188,"creation_date":1693331188,"answer_id":77002542,"question_id":77002103,"body_markdown":"I think your Hikari configuration is fine. It already can achieve what you want to do now which Hikari actually can start successfully in fail safe mode even it cannot connect to DB during startup. But the things are other beans / framework most probably will not support such behaviour during startup and will fail fast immediately. For example, hibernate can only start if the DB can be connected.\r\n\r\nIn your case , the bean `it.fox.hermes.jobs.component.JobsInit` expect it can connect to DB during start up. So your problem now is more about how to make this bean can start in fail safe mode if the DB is unavailable and can also recover once it finds the DB is available later , more than a problem of configuring Hikari datasouce can start if DB is unavailable which you already can do it.\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Start an Hikari Datasource when the DB is not available","body":"<p>I think your Hikari configuration is fine. It already can achieve what you want to do now which Hikari actually can start successfully in fail safe mode even it cannot connect to DB during startup. But the things are other beans / framework most probably will not support such behaviour during startup and will fail fast immediately. For example, hibernate can only start if the DB can be connected.</p>\n<p>In your case , the bean <code>it.fox.hermes.jobs.component.JobsInit</code> expect it can connect to DB during start up. So your problem now is more about how to make this bean can start in fail safe mode if the DB is unavailable and can also recover once it finds the DB is available later , more than a problem of configuring Hikari datasouce can start if DB is unavailable which you already can do it.</p>\n"}],"owner":{"account_id":12616725,"reputation":1228,"user_id":9614332,"display_name":"Stefano Bossi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77002542,"answer_count":1,"score":0,"last_activity_date":1693331188,"creation_date":1693327002,"question_id":77002103,"body_markdown":"I have configured with Spring a Datasouce with Hkikari to interact with a Maria DB. \r\nEverything is fine if when I start my application the Maria DB is up and running, after the start Hikari is resilient to disconnections and can cope to all the various communication problem. \r\nIf the App start when Maria is down the app can&#39;t start. \r\n\r\nI have configured the Datasource like this:\r\n\r\n```java\r\n    @Bean\r\n    DataSource dataSource() {\r\n        HikariConfig hikariConfig = new HikariConfig();\r\n        hikariConfig.setConnectionTimeout(300);\r\n        hikariConfig.setMinimumIdle(0);\r\n        hikariConfig.setInitializationFailTimeout(-1);\r\n        hikariConfig.setMaximumPoolSize(3);\r\n        hikariConfig.setIdleTimeout(6000);\r\n        hikariConfig.setMaxLifetime(1800000);\r\n        hikariConfig.setPassword(mariaParams.getPassword());\r\n        hikariConfig.setUsername(mariaParams.getUserName());\r\n        hikariConfig.setDriverClassName(&quot;org.mariadb.jdbc.Driver&quot;);\r\n        hikariConfig.setJdbcUrl(mariaParams.getUri());\r\n        hikariConfig.setPoolName(&quot;MariaHikariPool&quot;);\r\n        hikariConfig.addDataSourceProperty(&quot;continue-on-error&quot;, &quot;true&quot;);\r\n        hikariConfig.addDataSourceProperty(&quot;spring.jpa.database-platform&quot;, &quot;org.hibernate.dialect.MariaDBDialect&quot;);\r\n        HikariDataSource hikariDataSource = new HikariDataSource(hikariConfig);\r\n        \r\n        return hikariDataSource;\r\n```\r\n\r\nThe error I have is: \r\n```\r\n[INFO ] 18:29:30.083 com.zaxxer.hikari.HikariDataSource.close() - MariaHikariPool - Shutdown completed.\r\nAug 29, 2023 6:29:30 PM org.apache.catalina.core.StandardService stopInternal\r\nINFO: Stopping service [Tomcat]\r\n[INFO ] 18:29:30.130 org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLogger.logMessage() - \r\n\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n[ERROR] 18:29:30.145 org.springframework.boot.SpringApplication.reportFailure() - Application run failed\r\n org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;jobsInit&#39;: Injection of autowired dependencies failed\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:489) ~[spring-beans-6.0.11.jar:6.0.11]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416) ~[spring-beans-6.0.11.jar:6.0.11]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597) ~[spring-beans-6.0.11.jar:6.0.11]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.11.jar:6.0.11]\r\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942) ~[spring-context-6.0.11.jar:6.0.11]\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) [spring-boot-3.1.2.jar:3.1.2]\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) [spring-boot-3.1.2.jar:3.1.2]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) [spring-boot-3.1.2.jar:3.1.2]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) [spring-boot-3.1.2.jar:3.1.2]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) [spring-boot-3.1.2.jar:3.1.2]\r\n        at it.fox.hermes.App.main(App.java:23) [main/:?]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n        at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\r\n        at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) [spring-boot-devtools-3.1.2.jar:3.1.2]\r\nCaused by: org.springframework.transaction.CannotCreateTransactionException: Could not open JDBC Connection for transaction\r\n        at org.springframework.jdbc.datasource.DataSourceTransactionManager.doBegin(DataSourceTransactionManager.java:313) ~[spring-jdbc-6.0.11.jar:6.0.11]\r\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-6.0.11.jar:6.0.11]\r\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-6.0.11.jar:6.0.11]\r\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:601) ~[spring-tx-6.0.11.jar:6.0.11]\r\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.0.11.jar:6.0.11]\r\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]\r\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]\r\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]\r\n        at it.fox.hermes.jobs.service.SchedulerJobService$$SpringCGLIB$$0.getAllJobList(&lt;generated&gt;) ~[main/:?]\r\n        at it.fox.hermes.jobs.component.JobsInit.initDefaultJobs(JobsInit.java:20) ~[main/:?]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n        at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:783) ~[spring-beans-6.0.11.jar:6.0.11]\r\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.0.11.jar:6.0.11]\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:483) ~[spring-beans-6.0.11.jar:6.0.11]\r\n        ... 22 more\r\nCaused by: java.sql.SQLTransientConnectionException: MariaHikariPool - Connection is not available, request timed out after 301ms.\r\n        at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696) ~[HikariCP-5.0.1.jar:?]\r\n        at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181) ~[HikariCP-5.0.1.jar:?]\r\n        at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146) ~[HikariCP-5.0.1.jar:?]\r\n        at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:100) ~[HikariCP-5.0.1.jar:?]\r\n        at org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy$LazyConnectionInvocationHandler.getTargetConnection(LazyConnectionDataSourceProxy.java:405) ~[spring-jdbc-6.0.11.jar:6.0.11]\r\n        at org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy$LazyConnectionInvocationHandler.invoke(LazyConnectionDataSourceProxy.java:378) ~[spring-jdbc-6.0.11.jar:6.0.11]\r\n        at jdk.proxy2.$Proxy119.getAutoCommit(Unknown Source) ~[?:?]\r\n        at org.springframework.jdbc.datasource.DataSourceTransactionManager.doBegin(DataSourceTransactionManager.java:286) ~[spring-jdbc-6.0.11.jar:6.0.11]\r\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-6.0.11.jar:6.0.11]\r\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-6.0.11.jar:6.0.11]\r\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:601) ~[spring-tx-6.0.11.jar:6.0.11]\r\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.0.11.jar:6.0.11]\r\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]\r\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]\r\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]\r\n        at it.fox.hermes.jobs.service.SchedulerJobService$$SpringCGLIB$$0.getAllJobList(&lt;generated&gt;) ~[main/:?]\r\n        at it.fox.hermes.jobs.component.JobsInit.initDefaultJobs(JobsInit.java:20) ~[main/:?]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n        at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:783) ~[spring-beans-6.0.11.jar:6.0.11]\r\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.0.11.jar:6.0.11]\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:483) ~[spring-beans-6.0.11.jar:6.0.11]\r\n        ... 22 more\r\nCaused by: java.sql.SQLNonTransientConnectionException: Socket fail to connect to host:address=(host=maria.farm.rimoldi.it)(port=3306)(type=primary). Connect timed out\r\n        at org.mariadb.jdbc.client.impl.ConnectionHelper.connectSocket(ConnectionHelper.java:137) ~[mariadb-java-client-3.1.4.jar:?]\r\n        at org.mariadb.jdbc.client.impl.StandardClient.&lt;init&gt;(StandardClient.java:99) ~[mariadb-java-client-3.1.4.jar:?]\r\n        at org.mariadb.jdbc.Driver.connect(Driver.java:70) ~[mariadb-java-client-3.1.4.jar:?]\r\n        at org.mariadb.jdbc.Driver.connect(Driver.java:101) ~[mariadb-java-client-3.1.4.jar:?]\r\n        at org.mariadb.jdbc.Driver.connect(Driver.java:27) ~[mariadb-java-client-3.1.4.jar:?]\r\n        at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-5.0.1.jar:?]\r\n        at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:?]\r\n        at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:?]\r\n        at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:?]\r\n        at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733) ~[HikariCP-5.0.1.jar:?]\r\n        at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712) ~[HikariCP-5.0.1.jar:?]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[?:?]\r\n        at java.lang.Thread.run(Thread.java:833) ~[?:?]\r\nCaused by: java.net.SocketTimeoutException: Connect timed out\r\n        at sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:546) ~[?:?]\r\n        at sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597) ~[?:?]\r\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[?:?]\r\n        at java.net.Socket.connect(Socket.java:633) ~[?:?]\r\n        at org.mariadb.jdbc.client.impl.ConnectionHelper.connectSocket(ConnectionHelper.java:131) ~[mariadb-java-client-3.1.4.jar:?]\r\n        at org.mariadb.jdbc.client.impl.StandardClient.&lt;init&gt;(StandardClient.java:99) ~[mariadb-java-client-3.1.4.jar:?]\r\n        at org.mariadb.jdbc.Driver.connect(Driver.java:70) ~[mariadb-java-client-3.1.4.jar:?]\r\n        at org.mariadb.jdbc.Driver.connect(Driver.java:101) ~[mariadb-java-client-3.1.4.jar:?]\r\n        at org.mariadb.jdbc.Driver.connect(Driver.java:27) ~[mariadb-java-client-3.1.4.jar:?]\r\n        at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-5.0.1.jar:?]\r\n        at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:?]\r\n        at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:?]\r\n        at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:?]\r\n        at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733) ~[HikariCP-5.0.1.jar:?]\r\n        at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712) ~[HikariCP-5.0.1.jar:?]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[?:?]\r\n        at java.lang.Thread.run(Thread.java:833) ~[?:?]\r\n2023-08-29 18:29:30 database: closing mem:quartzDb\r\n2023-08-29 18:29:30 database: closed\r\n```\r\n\r\nMy purpose is to have an app that could start even if the database is not available. \r\nI suspect that some configuration is missing and Kikari infer these information from the database itself when it&#39;s seen the first time. \r\n\r\nI have tried to change different init parameters but wihthout success. ","title":"Start an Hikari Datasource when the DB is not available","body":"<p>I have configured with Spring a Datasouce with Hkikari to interact with a Maria DB.\nEverything is fine if when I start my application the Maria DB is up and running, after the start Hikari is resilient to disconnections and can cope to all the various communication problem.\nIf the App start when Maria is down the app can't start.</p>\n<p>I have configured the Datasource like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    DataSource dataSource() {\n        HikariConfig hikariConfig = new HikariConfig();\n        hikariConfig.setConnectionTimeout(300);\n        hikariConfig.setMinimumIdle(0);\n        hikariConfig.setInitializationFailTimeout(-1);\n        hikariConfig.setMaximumPoolSize(3);\n        hikariConfig.setIdleTimeout(6000);\n        hikariConfig.setMaxLifetime(1800000);\n        hikariConfig.setPassword(mariaParams.getPassword());\n        hikariConfig.setUsername(mariaParams.getUserName());\n        hikariConfig.setDriverClassName(&quot;org.mariadb.jdbc.Driver&quot;);\n        hikariConfig.setJdbcUrl(mariaParams.getUri());\n        hikariConfig.setPoolName(&quot;MariaHikariPool&quot;);\n        hikariConfig.addDataSourceProperty(&quot;continue-on-error&quot;, &quot;true&quot;);\n        hikariConfig.addDataSourceProperty(&quot;spring.jpa.database-platform&quot;, &quot;org.hibernate.dialect.MariaDBDialect&quot;);\n        HikariDataSource hikariDataSource = new HikariDataSource(hikariConfig);\n        \n        return hikariDataSource;\n</code></pre>\n<p>The error I have is:</p>\n<pre><code>[INFO ] 18:29:30.083 com.zaxxer.hikari.HikariDataSource.close() - MariaHikariPool - Shutdown completed.\nAug 29, 2023 6:29:30 PM org.apache.catalina.core.StandardService stopInternal\nINFO: Stopping service [Tomcat]\n[INFO ] 18:29:30.130 org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLogger.logMessage() - \n\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n[ERROR] 18:29:30.145 org.springframework.boot.SpringApplication.reportFailure() - Application run failed\n org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jobsInit': Injection of autowired dependencies failed\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:489) ~[spring-beans-6.0.11.jar:6.0.11]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416) ~[spring-beans-6.0.11.jar:6.0.11]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597) ~[spring-beans-6.0.11.jar:6.0.11]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.11.jar:6.0.11]\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942) ~[spring-context-6.0.11.jar:6.0.11]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) [spring-boot-3.1.2.jar:3.1.2]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) [spring-boot-3.1.2.jar:3.1.2]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) [spring-boot-3.1.2.jar:3.1.2]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) [spring-boot-3.1.2.jar:3.1.2]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) [spring-boot-3.1.2.jar:3.1.2]\n        at it.fox.hermes.App.main(App.java:23) [main/:?]\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n        at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\n        at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) [spring-boot-devtools-3.1.2.jar:3.1.2]\nCaused by: org.springframework.transaction.CannotCreateTransactionException: Could not open JDBC Connection for transaction\n        at org.springframework.jdbc.datasource.DataSourceTransactionManager.doBegin(DataSourceTransactionManager.java:313) ~[spring-jdbc-6.0.11.jar:6.0.11]\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-6.0.11.jar:6.0.11]\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-6.0.11.jar:6.0.11]\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:601) ~[spring-tx-6.0.11.jar:6.0.11]\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.0.11.jar:6.0.11]\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]\n        at it.fox.hermes.jobs.service.SchedulerJobService$$SpringCGLIB$$0.getAllJobList(&lt;generated&gt;) ~[main/:?]\n        at it.fox.hermes.jobs.component.JobsInit.initDefaultJobs(JobsInit.java:20) ~[main/:?]\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n        at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:783) ~[spring-beans-6.0.11.jar:6.0.11]\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.0.11.jar:6.0.11]\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:483) ~[spring-beans-6.0.11.jar:6.0.11]\n        ... 22 more\nCaused by: java.sql.SQLTransientConnectionException: MariaHikariPool - Connection is not available, request timed out after 301ms.\n        at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696) ~[HikariCP-5.0.1.jar:?]\n        at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181) ~[HikariCP-5.0.1.jar:?]\n        at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146) ~[HikariCP-5.0.1.jar:?]\n        at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:100) ~[HikariCP-5.0.1.jar:?]\n        at org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy$LazyConnectionInvocationHandler.getTargetConnection(LazyConnectionDataSourceProxy.java:405) ~[spring-jdbc-6.0.11.jar:6.0.11]\n        at org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy$LazyConnectionInvocationHandler.invoke(LazyConnectionDataSourceProxy.java:378) ~[spring-jdbc-6.0.11.jar:6.0.11]\n        at jdk.proxy2.$Proxy119.getAutoCommit(Unknown Source) ~[?:?]\n        at org.springframework.jdbc.datasource.DataSourceTransactionManager.doBegin(DataSourceTransactionManager.java:286) ~[spring-jdbc-6.0.11.jar:6.0.11]\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-6.0.11.jar:6.0.11]\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-6.0.11.jar:6.0.11]\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:601) ~[spring-tx-6.0.11.jar:6.0.11]\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.0.11.jar:6.0.11]\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]\n        at it.fox.hermes.jobs.service.SchedulerJobService$$SpringCGLIB$$0.getAllJobList(&lt;generated&gt;) ~[main/:?]\n        at it.fox.hermes.jobs.component.JobsInit.initDefaultJobs(JobsInit.java:20) ~[main/:?]\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n        at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:783) ~[spring-beans-6.0.11.jar:6.0.11]\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.0.11.jar:6.0.11]\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:483) ~[spring-beans-6.0.11.jar:6.0.11]\n        ... 22 more\nCaused by: java.sql.SQLNonTransientConnectionException: Socket fail to connect to host:address=(host=maria.farm.rimoldi.it)(port=3306)(type=primary). Connect timed out\n        at org.mariadb.jdbc.client.impl.ConnectionHelper.connectSocket(ConnectionHelper.java:137) ~[mariadb-java-client-3.1.4.jar:?]\n        at org.mariadb.jdbc.client.impl.StandardClient.&lt;init&gt;(StandardClient.java:99) ~[mariadb-java-client-3.1.4.jar:?]\n        at org.mariadb.jdbc.Driver.connect(Driver.java:70) ~[mariadb-java-client-3.1.4.jar:?]\n        at org.mariadb.jdbc.Driver.connect(Driver.java:101) ~[mariadb-java-client-3.1.4.jar:?]\n        at org.mariadb.jdbc.Driver.connect(Driver.java:27) ~[mariadb-java-client-3.1.4.jar:?]\n        at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-5.0.1.jar:?]\n        at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:?]\n        at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:?]\n        at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:?]\n        at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733) ~[HikariCP-5.0.1.jar:?]\n        at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712) ~[HikariCP-5.0.1.jar:?]\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[?:?]\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[?:?]\n        at java.lang.Thread.run(Thread.java:833) ~[?:?]\nCaused by: java.net.SocketTimeoutException: Connect timed out\n        at sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:546) ~[?:?]\n        at sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597) ~[?:?]\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[?:?]\n        at java.net.Socket.connect(Socket.java:633) ~[?:?]\n        at org.mariadb.jdbc.client.impl.ConnectionHelper.connectSocket(ConnectionHelper.java:131) ~[mariadb-java-client-3.1.4.jar:?]\n        at org.mariadb.jdbc.client.impl.StandardClient.&lt;init&gt;(StandardClient.java:99) ~[mariadb-java-client-3.1.4.jar:?]\n        at org.mariadb.jdbc.Driver.connect(Driver.java:70) ~[mariadb-java-client-3.1.4.jar:?]\n        at org.mariadb.jdbc.Driver.connect(Driver.java:101) ~[mariadb-java-client-3.1.4.jar:?]\n        at org.mariadb.jdbc.Driver.connect(Driver.java:27) ~[mariadb-java-client-3.1.4.jar:?]\n        at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-5.0.1.jar:?]\n        at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:?]\n        at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:?]\n        at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:?]\n        at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733) ~[HikariCP-5.0.1.jar:?]\n        at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712) ~[HikariCP-5.0.1.jar:?]\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[?:?]\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[?:?]\n        at java.lang.Thread.run(Thread.java:833) ~[?:?]\n2023-08-29 18:29:30 database: closing mem:quartzDb\n2023-08-29 18:29:30 database: closed\n</code></pre>\n<p>My purpose is to have an app that could start even if the database is not available.\nI suspect that some configuration is missing and Kikari infer these information from the database itself when it's seen the first time.</p>\n<p>I have tried to change different init parameters but wihthout success.</p>\n"},{"tags":["java","interface"],"comments":[{"owner":{"account_id":809675,"reputation":24177,"user_id":904316,"accept_rate":100,"display_name":"sdasdadas"},"score":2,"creation_date":1366733715,"post_id":16174260,"comment_id":23118394,"body_markdown":"The left side is always just a slot where an object can go. As Johan said, you need to actually &quot;put&quot; an object there by creating one with `new`.","body":"The left side is always just a slot where an object can go. As Johan said, you need to actually &quot;put&quot; an object there by creating one with <code>new</code>."},{"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"score":0,"creation_date":1366734208,"post_id":16174260,"comment_id":23118697,"body_markdown":"Please try to post a [SSCCE](http://sscce.org) to describe your problem. And include the error messages you get. The interface won&#39;t compile and the main method will throw a `NullPointerException`. Other than that, your question is valid and should be answered by my answer below.","body":"Please try to post a <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE</a> to describe your problem. And include the error messages you get. The interface won&#39;t compile and the main method will throw a <code>NullPointerException</code>. Other than that, your question is valid and should be answered by my answer below."},{"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"score":2,"creation_date":1366740318,"post_id":16174260,"comment_id":23121901,"body_markdown":"@JayZhang: Don&#39;t forget to accept (checkmark) the best answer. So everybody knows that the problem is solved.","body":"@JayZhang: Don&#39;t forget to accept (checkmark) the best answer. So everybody knows that the problem is solved."},{"owner":{"account_id":7465996,"reputation":1866,"user_id":5675550,"accept_rate":77,"display_name":"viper"},"score":0,"creation_date":1479616855,"post_id":16174260,"comment_id":68630269,"body_markdown":"This works for me thanks. But is this the standard way of using `service` interface classes and `serviceimpl` classes?","body":"This works for me thanks. But is this the standard way of using <code>service</code> interface classes and <code>serviceimpl</code> classes?"}],"answers":[{"comments":[{"owner":{"account_id":1479215,"reputation":2511,"user_id":1388943,"accept_rate":48,"display_name":"stdout"},"score":0,"creation_date":1453982099,"post_id":16174282,"comment_id":57844242,"body_markdown":"Not equal in the sense of OO Design. If you have that interface, you need to use it to prove it&#39;s existence.","body":"Not equal in the sense of OO Design. If you have that interface, you need to use it to prove it&#39;s existence."}],"tags":[],"owner":{"account_id":182101,"reputation":48239,"user_id":416564,"accept_rate":100,"display_name":"Johan Sj&#246;berg"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1366733945,"creation_date":1366733642,"answer_id":16174282,"question_id":16174260,"body_markdown":"You need to invoke the routine on the actual `AImpl` object\r\n\r\n    A aa = new AImpl();\r\n    aa.a();\r\n\r\nwhich here is equivalent to following\r\n\r\n    AImpl aa = new AImpl();\r\n    aa.a();\r\n\r\nYour sample will raise an error since you&#39;re trying invoke a method on an uninitalized object.  ","title":"Confusion on call Java Interface method","body":"<p>You need to invoke the routine on the actual <code>AImpl</code> object</p>\n\n<pre><code>A aa = new AImpl();\naa.a();\n</code></pre>\n\n<p>which here is equivalent to following</p>\n\n<pre><code>AImpl aa = new AImpl();\naa.a();\n</code></pre>\n\n<p>Your sample will raise an error since you're trying invoke a method on an uninitalized object.  </p>\n"},{"tags":[],"owner":{"account_id":72575,"reputation":40794,"user_id":209513,"accept_rate":100,"display_name":"Subhrajyoti Majumder"},"comment_count":0,"down_vote_count":1,"up_vote_count":33,"is_accepted":false,"score":32,"last_activity_date":1366736286,"creation_date":1366733770,"answer_id":16174322,"question_id":16174260,"body_markdown":"    A aa = new AImpl();\r\n    aa.a();\r\n\r\n*Here your reference variable is interface `A` type But actual `Object` is `AImpl`*.\r\n\r\n\r\n&gt; When you define a new interface, you are defining a new reference data\r\n&gt; type. You can use interface names anywhere you can use any other data\r\n&gt; type name. If you define a reference variable whose type is an\r\n&gt; interface, any object you assign to it must be an instance of a class\r\n&gt; that implements the interface.\r\n\r\nRead more on [Documentation][1]\r\n\r\n A Interface reference can hold Object of AImpl as it implements the A interface.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/java/IandI/interfaceAsType.html","title":"Confusion on call Java Interface method","body":"<pre><code>A aa = new AImpl();\naa.a();\n</code></pre>\n\n<p><em>Here your reference variable is interface <code>A</code> type But actual <code>Object</code> is <code>AImpl</code></em>.</p>\n\n<blockquote>\n  <p>When you define a new interface, you are defining a new reference data\n  type. You can use interface names anywhere you can use any other data\n  type name. If you define a reference variable whose type is an\n  interface, any object you assign to it must be an instance of a class\n  that implements the interface.</p>\n</blockquote>\n\n<p>Read more on <a href=\"http://docs.oracle.com/javase/tutorial/java/IandI/interfaceAsType.html\">Documentation</a></p>\n\n<p>A Interface reference can hold Object of AImpl as it implements the A interface.</p>\n"},{"tags":[],"owner":{"account_id":2543027,"reputation":213,"user_id":2208420,"display_name":"Vindicare"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1366733782,"creation_date":1366733782,"answer_id":16174325,"question_id":16174260,"body_markdown":"You could probably find this out by running the code yourself.\r\n\r\nCurrently you will get a `NullPointerException` because you haven&#39;t assigned anything to the variable `aa`. Changing your code to the following will invoke the method and output the text:\r\n\r\n    public static void main(String[] args){\r\n        A aa = new AImpl();\r\n        aa.a();\r\n    }","title":"Confusion on call Java Interface method","body":"<p>You could probably find this out by running the code yourself.</p>\n\n<p>Currently you will get a <code>NullPointerException</code> because you haven't assigned anything to the variable <code>aa</code>. Changing your code to the following will invoke the method and output the text:</p>\n\n<pre><code>public static void main(String[] args){\n    A aa = new AImpl();\n    aa.a();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":166521,"reputation":30443,"user_id":390695,"accept_rate":72,"display_name":"Damian Leszczyński - Vash"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1366733803,"creation_date":1366733803,"answer_id":16174332,"question_id":16174260,"body_markdown":"No. I will not. \r\n\r\nYou have declared a variable. You should initialze it first with instance of an object in this case your class `AImpl`.\r\n\r\n    public static void main(String[] args){\r\n      A aa = new AImp();\r\n      aa.a();\r\n    }","title":"Confusion on call Java Interface method","body":"<p>No. I will not. </p>\n\n<p>You have declared a variable. You should initialze it first with instance of an object in this case your class <code>AImpl</code>.</p>\n\n<pre><code>public static void main(String[] args){\n  A aa = new AImp();\n  aa.a();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2675589,"reputation":629,"user_id":2312071,"accept_rate":45,"display_name":"Jay Zhang"},"score":0,"creation_date":1366740213,"post_id":16174386,"comment_id":23121826,"body_markdown":"Thank you, I am now understand","body":"Thank you, I am now understand"},{"owner":{"account_id":2432847,"reputation":1011,"user_id":2123400,"accept_rate":85,"display_name":"Eftekhari"},"score":5,"creation_date":1495310502,"post_id":16174386,"comment_id":75202074,"body_markdown":"Example isn&#39;t another way to teach, it is the only way to teach (Albert Einstein).\nThank you.","body":"Example isn&#39;t another way to teach, it is the only way to teach (Albert Einstein). Thank you."}],"tags":[],"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"comment_count":2,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1366733992,"creation_date":1366733992,"answer_id":16174386,"question_id":16174260,"body_markdown":"It depends on the runtime type of the object. See:\r\n\r\nThis is your interface:\r\n\r\n    public interface A {\r\n      public void a();\r\n    }\r\n\r\nAnd this is your class:\r\n\r\n    public class AImpl implements A {\r\n        public void a() {\r\n           println(&quot;I am AImpl&quot;);\r\n        }\r\n    }\r\n\r\nThere is another implementation:\r\n\r\n    public class AnotherAImpl implements A {\r\n        public void a() {\r\n           println(&quot;I am another AImpl&quot;);\r\n        }\r\n    }\r\n\r\nSo have a look at the this main method:\r\n\r\n\r\n    public static void main(String[] args){\r\n      A aa;\r\n      aa = new AImpl();\r\n      aa.a(); // prints I am AImpl\r\n      aa = new AnotherAImpl();\r\n      aa.a(); // now it prints I am another AImpl\r\n    }\r\n\r\n","title":"Confusion on call Java Interface method","body":"<p>It depends on the runtime type of the object. See:</p>\n\n<p>This is your interface:</p>\n\n<pre><code>public interface A {\n  public void a();\n}\n</code></pre>\n\n<p>And this is your class:</p>\n\n<pre><code>public class AImpl implements A {\n    public void a() {\n       println(\"I am AImpl\");\n    }\n}\n</code></pre>\n\n<p>There is another implementation:</p>\n\n<pre><code>public class AnotherAImpl implements A {\n    public void a() {\n       println(\"I am another AImpl\");\n    }\n}\n</code></pre>\n\n<p>So have a look at the this main method:</p>\n\n<pre><code>public static void main(String[] args){\n  A aa;\n  aa = new AImpl();\n  aa.a(); // prints I am AImpl\n  aa = new AnotherAImpl();\n  aa.a(); // now it prints I am another AImpl\n}\n</code></pre>\n"}],"owner":{"account_id":2675589,"reputation":629,"user_id":2312071,"accept_rate":45,"display_name":"Jay Zhang"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88713,"favorite_count":0,"down_vote_count":1,"up_vote_count":26,"answer_count":5,"score":25,"last_activity_date":1693329897,"creation_date":1366733554,"question_id":16174260,"body_markdown":"Let&#39;s say I have an interface **A**, defined as follows:\r\n\r\n    public interface A {\r\n        public void a();\r\n    }\r\n\r\nIt includes a method called **a**.\r\n\r\nI have a class which implements this interface and it has only one method:\r\n\r\n    public class AImpl implements A {\r\n        @Override\r\n        public void a() {\r\n            System.out.println(&quot;Do something&quot;);\r\n        }\r\n    }\r\n\r\nQ: If, in the main class I call the interface method, will it call the implementation belonging to the class which implements the interface?\r\n\r\nFor example:\r\n\r\n    public static void main(String[] args) {\r\n        A aa;\r\n        aa.a();\r\n    }\r\n\r\nWill this print &quot;Do something&quot;?","title":"Confusion on call Java Interface method","body":"<p>Let's say I have an interface <strong>A</strong>, defined as follows:</p>\n<pre><code>public interface A {\n    public void a();\n}\n</code></pre>\n<p>It includes a method called <strong>a</strong>.</p>\n<p>I have a class which implements this interface and it has only one method:</p>\n<pre><code>public class AImpl implements A {\n    @Override\n    public void a() {\n        System.out.println(&quot;Do something&quot;);\n    }\n}\n</code></pre>\n<p>Q: If, in the main class I call the interface method, will it call the implementation belonging to the class which implements the interface?</p>\n<p>For example:</p>\n<pre><code>public static void main(String[] args) {\n    A aa;\n    aa.a();\n}\n</code></pre>\n<p>Will this print &quot;Do something&quot;?</p>\n"},{"tags":["java","aws-sdk","amazon-cloudfront"],"answers":[{"tags":[],"owner":{"account_id":437406,"reputation":1997,"user_id":825077,"accept_rate":67,"display_name":"CaptRespect"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603315382,"creation_date":1603315382,"answer_id":64471925,"question_id":56472243,"body_markdown":"I don&#39;t think it&#39;s been implemented yet. In the meantime, it was fairly easy to rip code from the old version to do the same thing. \r\n\r\nThis is from https://github.com/dashpradeep99/aws-sdk-java-code/blob/master/aws-java-sdk-cloudfront/src/main/java/com/amazonaws/services/cloudfront/util/SignerUtils.java\r\n\r\nand \r\n\r\nhttps://github.com/dashpradeep99/aws-sdk-java-code/blob/master/aws-java-sdk-cloudfront/src/main/java/com/amazonaws/services/cloudfront/CloudFrontUrlSigner.java\r\n\r\n\r\n    import software.amazon.awssdk.core.exception.SdkException;\r\n    \r\n    import java.nio.charset.StandardCharsets;\r\n    import java.security.InvalidKeyException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.PrivateKey;\r\n    import java.security.SecureRandom;\r\n    import java.security.Signature;\r\n    import java.security.SignatureException;\r\n    import java.util.Date;\r\n    \r\n    import static java.util.concurrent.TimeUnit.MILLISECONDS;\r\n    \r\n    public class AwsUtils {\r\n    \r\n      private static final SecureRandom srand = new SecureRandom();\r\n    \r\n      /**\r\n       * Generates a signed url that expires after given date.\r\n       * @param resourceUrlOrPath The url.\r\n       * @param keyPairId The keypair id used to sign.\r\n       * @param privateKey The private key.\r\n       * @param dateLessThan The expire date/time.\r\n       * @return A valid cloudwatch url.\r\n       * @throws SdkException If any errors occur during the signing process.\r\n       */\r\n      public static String getSignedUrlWithCannedPolicy(String resourceUrlOrPath,\r\n                                                        String keyPairId,\r\n                                                        PrivateKey privateKey,\r\n                                                        Date dateLessThan) throws SdkException {\r\n        try {\r\n          String cannedPolicy = buildCannedPolicy(resourceUrlOrPath, dateLessThan);\r\n          byte[] signatureBytes = signWithSha1Rsa(cannedPolicy.getBytes(StandardCharsets.UTF_8), privateKey);\r\n          String urlSafeSignature = makeBytesUrlSafe(signatureBytes);\r\n          return resourceUrlOrPath\r\n              + (resourceUrlOrPath.indexOf(&#39;?&#39;) &gt;= 0 ? &quot;&amp;&quot; : &quot;?&quot;)\r\n              + &quot;Expires=&quot; + MILLISECONDS.toSeconds(dateLessThan.getTime())\r\n              + &quot;&amp;Signature=&quot; + urlSafeSignature\r\n              + &quot;&amp;Key-Pair-Id=&quot; + keyPairId;\r\n        } catch (InvalidKeyException e) {\r\n          throw SdkException.create(&quot;Couldn&#39;t sign url&quot;, e);\r\n        }\r\n      }\r\n    \r\n      /**\r\n       * Returns a &quot;canned&quot; policy for the given parameters.\r\n       * For more information, see &lt;a href=\r\n       * &quot;http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-signed-urls-overview.html&quot;\r\n       * &gt;Overview of Signed URLs&lt;/a&gt;.\r\n       * @param resourceUrlOrPath The resource to grant access.\r\n       * @param dateLessThan The expiration time.\r\n       * @return the aws policy as a string.\r\n       */\r\n      public static String buildCannedPolicy(String resourceUrlOrPath,\r\n                                             Date dateLessThan) {\r\n        return &quot;{\\&quot;Statement\\&quot;:[{\\&quot;Resource\\&quot;:\\&quot;&quot;\r\n            + resourceUrlOrPath\r\n            + &quot;\\&quot;,\\&quot;Condition\\&quot;:{\\&quot;DateLessThan\\&quot;:{\\&quot;AWS:EpochTime\\&quot;:&quot;\r\n            + MILLISECONDS.toSeconds(dateLessThan.getTime())\r\n            + &quot;}}}]}&quot;;\r\n      }\r\n    \r\n      /**\r\n       * Signs the data given with the private key given, using the SHA1withRSA\r\n       * algorithm provided by bouncy castle.\r\n       * @param dataToSign The data to sign.\r\n       * @param privateKey The private key.\r\n       * @return A signature.\r\n       * @throws InvalidKeyException if an invalid key was provided.\r\n       */\r\n      public static byte[] signWithSha1Rsa(byte[] dataToSign,\r\n                                           PrivateKey privateKey) throws InvalidKeyException {\r\n        Signature signature;\r\n        try {\r\n          signature = Signature.getInstance(&quot;SHA1withRSA&quot;);\r\n          signature.initSign(privateKey, srand);\r\n          signature.update(dataToSign);\r\n          return signature.sign();\r\n        } catch (NoSuchAlgorithmException | SignatureException e) {\r\n          throw new IllegalStateException(e);\r\n        }\r\n      }\r\n    \r\n      /**\r\n       * Converts the given data to be safe for use in signed URLs for a private\r\n       * distribution by using specialized Base64 encoding.\r\n       * @param bytes The bytes\r\n       */\r\n      public static String makeBytesUrlSafe(byte[] bytes) {\r\n        byte[] encoded = java.util.Base64.getEncoder().encode(bytes);\r\n    \r\n        for (int i = 0; i &lt; encoded.length; i++) {\r\n          switch (encoded[i]) {\r\n            case &#39;+&#39;:\r\n              encoded[i] = &#39;-&#39;;\r\n              continue;\r\n            case &#39;=&#39;:\r\n              encoded[i] = &#39;_&#39;;\r\n              continue;\r\n            case &#39;/&#39;:\r\n              encoded[i] = &#39;~&#39;;\r\n              continue;\r\n            default:\r\n              continue;\r\n          }\r\n        }\r\n        return new String(encoded, StandardCharsets.UTF_8);\r\n      }\r\n    }\r\n\r\n","title":"Replacement for CloudFrontUrlSigner in AWS Java SDK2","body":"<p>I don't think it's been implemented yet. In the meantime, it was fairly easy to rip code from the old version to do the same thing.</p>\n<p>This is from <a href=\"https://github.com/dashpradeep99/aws-sdk-java-code/blob/master/aws-java-sdk-cloudfront/src/main/java/com/amazonaws/services/cloudfront/util/SignerUtils.java\" rel=\"nofollow noreferrer\">https://github.com/dashpradeep99/aws-sdk-java-code/blob/master/aws-java-sdk-cloudfront/src/main/java/com/amazonaws/services/cloudfront/util/SignerUtils.java</a></p>\n<p>and</p>\n<p><a href=\"https://github.com/dashpradeep99/aws-sdk-java-code/blob/master/aws-java-sdk-cloudfront/src/main/java/com/amazonaws/services/cloudfront/CloudFrontUrlSigner.java\" rel=\"nofollow noreferrer\">https://github.com/dashpradeep99/aws-sdk-java-code/blob/master/aws-java-sdk-cloudfront/src/main/java/com/amazonaws/services/cloudfront/CloudFrontUrlSigner.java</a></p>\n<pre><code>import software.amazon.awssdk.core.exception.SdkException;\n\nimport java.nio.charset.StandardCharsets;\nimport java.security.InvalidKeyException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.PrivateKey;\nimport java.security.SecureRandom;\nimport java.security.Signature;\nimport java.security.SignatureException;\nimport java.util.Date;\n\nimport static java.util.concurrent.TimeUnit.MILLISECONDS;\n\npublic class AwsUtils {\n\n  private static final SecureRandom srand = new SecureRandom();\n\n  /**\n   * Generates a signed url that expires after given date.\n   * @param resourceUrlOrPath The url.\n   * @param keyPairId The keypair id used to sign.\n   * @param privateKey The private key.\n   * @param dateLessThan The expire date/time.\n   * @return A valid cloudwatch url.\n   * @throws SdkException If any errors occur during the signing process.\n   */\n  public static String getSignedUrlWithCannedPolicy(String resourceUrlOrPath,\n                                                    String keyPairId,\n                                                    PrivateKey privateKey,\n                                                    Date dateLessThan) throws SdkException {\n    try {\n      String cannedPolicy = buildCannedPolicy(resourceUrlOrPath, dateLessThan);\n      byte[] signatureBytes = signWithSha1Rsa(cannedPolicy.getBytes(StandardCharsets.UTF_8), privateKey);\n      String urlSafeSignature = makeBytesUrlSafe(signatureBytes);\n      return resourceUrlOrPath\n          + (resourceUrlOrPath.indexOf('?') &gt;= 0 ? &quot;&amp;&quot; : &quot;?&quot;)\n          + &quot;Expires=&quot; + MILLISECONDS.toSeconds(dateLessThan.getTime())\n          + &quot;&amp;Signature=&quot; + urlSafeSignature\n          + &quot;&amp;Key-Pair-Id=&quot; + keyPairId;\n    } catch (InvalidKeyException e) {\n      throw SdkException.create(&quot;Couldn't sign url&quot;, e);\n    }\n  }\n\n  /**\n   * Returns a &quot;canned&quot; policy for the given parameters.\n   * For more information, see &lt;a href=\n   * &quot;http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-signed-urls-overview.html&quot;\n   * &gt;Overview of Signed URLs&lt;/a&gt;.\n   * @param resourceUrlOrPath The resource to grant access.\n   * @param dateLessThan The expiration time.\n   * @return the aws policy as a string.\n   */\n  public static String buildCannedPolicy(String resourceUrlOrPath,\n                                         Date dateLessThan) {\n    return &quot;{\\&quot;Statement\\&quot;:[{\\&quot;Resource\\&quot;:\\&quot;&quot;\n        + resourceUrlOrPath\n        + &quot;\\&quot;,\\&quot;Condition\\&quot;:{\\&quot;DateLessThan\\&quot;:{\\&quot;AWS:EpochTime\\&quot;:&quot;\n        + MILLISECONDS.toSeconds(dateLessThan.getTime())\n        + &quot;}}}]}&quot;;\n  }\n\n  /**\n   * Signs the data given with the private key given, using the SHA1withRSA\n   * algorithm provided by bouncy castle.\n   * @param dataToSign The data to sign.\n   * @param privateKey The private key.\n   * @return A signature.\n   * @throws InvalidKeyException if an invalid key was provided.\n   */\n  public static byte[] signWithSha1Rsa(byte[] dataToSign,\n                                       PrivateKey privateKey) throws InvalidKeyException {\n    Signature signature;\n    try {\n      signature = Signature.getInstance(&quot;SHA1withRSA&quot;);\n      signature.initSign(privateKey, srand);\n      signature.update(dataToSign);\n      return signature.sign();\n    } catch (NoSuchAlgorithmException | SignatureException e) {\n      throw new IllegalStateException(e);\n    }\n  }\n\n  /**\n   * Converts the given data to be safe for use in signed URLs for a private\n   * distribution by using specialized Base64 encoding.\n   * @param bytes The bytes\n   */\n  public static String makeBytesUrlSafe(byte[] bytes) {\n    byte[] encoded = java.util.Base64.getEncoder().encode(bytes);\n\n    for (int i = 0; i &lt; encoded.length; i++) {\n      switch (encoded[i]) {\n        case '+':\n          encoded[i] = '-';\n          continue;\n        case '=':\n          encoded[i] = '_';\n          continue;\n        case '/':\n          encoded[i] = '~';\n          continue;\n        default:\n          continue;\n      }\n    }\n    return new String(encoded, StandardCharsets.UTF_8);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7935678,"reputation":133,"user_id":5991792,"display_name":"Jared Bates"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693329776,"creation_date":1693329776,"answer_id":77002406,"question_id":56472243,"body_markdown":"This is available now in AWS Java SDK v2. You can use `CloudFrontUtilities` and `CannedSignerRequest`.\r\n\r\n```\r\nCloudFrontUtilities cloudFrontUtilities = CloudFrontUtilities.create();\r\nInstant expirationDate = Instant.now().plus(7, ChronoUnit.DAYS);\r\nString resourceUrl = &quot;https://d1npcfkc2mojrf.cloudfront.net/s3ObjectKey&quot;;\r\nString keyPairId = &quot;myKeyPairId&quot;;\r\nPrivateKey privateKey = myPrivateKey; // Either PrivateKey or Path can be passed in\r\nCannedSignerRequest cannedRequest = CannedSignerRequest.builder()\r\n                                                       .resourceUrl(resourceUrl)\r\n                                                       .privateKey(privateKey)\r\n                                                       .keyPairId(keyPairId)\r\n                                                       .expirationDate(expirationDate)\r\n                                                       .build();\r\n```\r\n\r\n\r\nRefer to https://aws.amazon.com/blogs/developer/amazon-cloudfront-signed-urls-and-cookies-are-now-supported-in-aws-sdk-for-java-2-x/ for more information.\r\n","title":"Replacement for CloudFrontUrlSigner in AWS Java SDK2","body":"<p>This is available now in AWS Java SDK v2. You can use <code>CloudFrontUtilities</code> and <code>CannedSignerRequest</code>.</p>\n<pre><code>CloudFrontUtilities cloudFrontUtilities = CloudFrontUtilities.create();\nInstant expirationDate = Instant.now().plus(7, ChronoUnit.DAYS);\nString resourceUrl = &quot;https://d1npcfkc2mojrf.cloudfront.net/s3ObjectKey&quot;;\nString keyPairId = &quot;myKeyPairId&quot;;\nPrivateKey privateKey = myPrivateKey; // Either PrivateKey or Path can be passed in\nCannedSignerRequest cannedRequest = CannedSignerRequest.builder()\n                                                       .resourceUrl(resourceUrl)\n                                                       .privateKey(privateKey)\n                                                       .keyPairId(keyPairId)\n                                                       .expirationDate(expirationDate)\n                                                       .build();\n</code></pre>\n<p>Refer to <a href=\"https://aws.amazon.com/blogs/developer/amazon-cloudfront-signed-urls-and-cookies-are-now-supported-in-aws-sdk-for-java-2-x/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/blogs/developer/amazon-cloudfront-signed-urls-and-cookies-are-now-supported-in-aws-sdk-for-java-2-x/</a> for more information.</p>\n"}],"owner":{"account_id":989210,"reputation":5391,"user_id":1006944,"accept_rate":74,"display_name":"Selvakumar Ponnusamy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1122,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1693329776,"creation_date":1559803939,"question_id":56472243,"body_markdown":"I use Java 11. As AWS Java SDK2 supports for Java 11 I use SDK2. How to create cloud front url for s3 key. I&#39;m able to get many examples for SDK 1.x version but not for SDK2. This is how the url is been generated in 1.x\r\n\r\n`CloudFrontUrlSigner.getSignedURLWithCannedPolicy(url, keyPairId, privateKey, expires)`\r\n\r\nIs there any alternative way or replacement in SDK 2.x version","title":"Replacement for CloudFrontUrlSigner in AWS Java SDK2","body":"<p>I use Java 11. As AWS Java SDK2 supports for Java 11 I use SDK2. How to create cloud front url for s3 key. I'm able to get many examples for SDK 1.x version but not for SDK2. This is how the url is been generated in 1.x</p>\n\n<p><code>CloudFrontUrlSigner.getSignedURLWithCannedPolicy(url, keyPairId, privateKey, expires)</code></p>\n\n<p>Is there any alternative way or replacement in SDK 2.x version</p>\n"},{"tags":["java","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1595425225,"creation_date":1595425225,"answer_id":63035566,"question_id":63032912,"body_markdown":"Yes; `container.pause()` sets a flag to tell the `Consumer` thread to pause before its next `poll()` call. Similarly, `resume()` resets the flag so the consumer thread will resume the `Consumer` before the next poll.","title":"Spring Kafka MessageListenerContainer Resume/Pause # spring-kafka","body":"<p>Yes; <code>container.pause()</code> sets a flag to tell the <code>Consumer</code> thread to pause before its next <code>poll()</code> call. Similarly, <code>resume()</code> resets the flag so the consumer thread will resume the <code>Consumer</code> before the next poll.</p>\n"}],"owner":{"account_id":8609568,"reputation":129,"user_id":6448432,"display_name":"SBhogal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1118,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":63035566,"answer_count":1,"score":1,"last_activity_date":1693329384,"creation_date":1595416425,"question_id":63032912,"body_markdown":"As native KafkaConsumer is not thread safe, so it is discouraged to call pause and resume methods from different thread instead of kafka-consumer processing thread.\r\nbut as spring-kafka provides another layer KafkaMessageListenerContainer which internally use kafka-consumer. So my question is can we use KafkaListenerEndpointRegistry to get the listener container by id and call resume or pause method from other thread rather than consumer processing thread.\r\n\r\n    kafkaListenerEndpointRegistry.getListenerContainer(&quot;id&quot;).pause();\r\n           \r\n\r\n        ExecutorService executorService  = newFixedThreadPool(2);\r\n        executorService.submit(()-&gt;{\r\n\r\n            System.out.println(&quot;CurrentThread: {}&quot; + Thread.currentThread().getId()+ &quot; &quot; + Thread.currentThread().getName());\r\n            try {\r\n                Thread.sleep(5000);\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n            kafkaListenerEndpointRegistry.getListenerContainer(&quot;id&quot;).resume();\r\n        });","title":"Spring Kafka MessageListenerContainer Resume/Pause # spring-kafka","body":"<p>As native KafkaConsumer is not thread safe, so it is discouraged to call pause and resume methods from different thread instead of kafka-consumer processing thread.\nbut as spring-kafka provides another layer KafkaMessageListenerContainer which internally use kafka-consumer. So my question is can we use KafkaListenerEndpointRegistry to get the listener container by id and call resume or pause method from other thread rather than consumer processing thread.</p>\n<pre><code>kafkaListenerEndpointRegistry.getListenerContainer(&quot;id&quot;).pause();\n       \n\n    ExecutorService executorService  = newFixedThreadPool(2);\n    executorService.submit(()-&gt;{\n\n        System.out.println(&quot;CurrentThread: {}&quot; + Thread.currentThread().getId()+ &quot; &quot; + Thread.currentThread().getName());\n        try {\n            Thread.sleep(5000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        kafkaListenerEndpointRegistry.getListenerContainer(&quot;id&quot;).resume();\n    });\n</code></pre>\n"},{"tags":["java","spring-boot","junit","spring-batch","h2"],"comments":[{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1693404793,"post_id":77002328,"comment_id":135756689,"body_markdown":"Please share the code that leads to that error: https://stackoverflow.com/help/minimal-reproducible-example","body":"Please share the code that leads to that error: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"},{"owner":{"account_id":979585,"reputation":899,"user_id":999681,"accept_rate":100,"display_name":"Tom Davies"},"score":0,"creation_date":1693732172,"post_id":77002328,"comment_id":135797003,"body_markdown":"Have you run the query manually against the database to verify that you do get data back?","body":"Have you run the query manually against the database to verify that you do get data back?"}],"owner":{"account_id":29313193,"reputation":11,"user_id":22458485,"display_name":"Jeet_dev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693328997,"creation_date":1693328997,"question_id":77002328,"body_markdown":"I am testing a spring batch application witht he help of the Spring batch testing. I have created the tables that the spring batch test use manually in the h2 database. However when test launching a `Step` I am  getting the following error -\r\n\r\n\r\n```\r\n\r\n18:45:19.909 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@75b3ef1a size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]\r\n18:45:20.158 [main] DEBUG org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$ReferenceTargetSource - Initializing lazy target object\r\n18:45:20.163 [main] WARN  org.springframework.batch.core.configuration.annotation.DefaultBatchConfigurer - No transaction manager was provided, using a DataSourceTransactionManager\r\n18:45:20.196 [main] DEBUG org.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource\r\n18:45:20.196 [main] DEBUG org.springframework.jdbc.datasource.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;INIT=RUNSCRIPT FROM &#39;classpath:schema.sql&#39;]\r\n18:45:20.222 [main] INFO  org.springframework.batch.core.repository.support.JobRepositoryFactoryBean - No database type set, using meta data indicating: H2\r\n18:45:20.956 [main] DEBUG org.springframework.transaction.interceptor.NameMatchTransactionAttributeSource - Adding transactional method [*] with attribute [PROPAGATION_REQUIRED,ISOLATION_DEFAULT]\r\n18:45:20.956 [main] DEBUG org.springframework.transaction.interceptor.NameMatchTransactionAttributeSource - Adding transactional method [create*] with attribute [PROPAGATION_REQUIRES_NEW,ISOLATION_SERIALIZABLE]\r\n18:45:20.956 [main] DEBUG org.springframework.transaction.interceptor.NameMatchTransactionAttributeSource - Adding transactional method [getLastJobExecution*] with attribute [PROPAGATION_REQUIRES_NEW,ISOLATION_SERIALIZABLE]\r\n18:45:21.012 [main] INFO  org.springframework.batch.core.launch.support.SimpleJobLauncher - No TaskExecutor has been set, defaulting to synchronous executor.\r\n18:45:21.020 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [org.springframework.batch.core.repository.support.SimpleJobRepository.getLastJobExecution]: PROPAGATION_REQUIRES_NEW,ISOLATION_SERIALIZABLE\r\n18:45:21.021 [main] DEBUG org.springframework.jdbc.datasource.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;INIT=RUNSCRIPT FROM &#39;classpath:schema.sql&#39;]\r\n18:45:21.042 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [conn5: url=jdbc:h2:mem:testdb user=SA] for JDBC transaction\r\n18:45:21.045 [main] DEBUG org.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [conn5: url=jdbc:h2:mem:testdb user=SA] to 8\r\n18:45:21.045 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [conn5: url=jdbc:h2:mem:testdb user=SA] to manual commit\r\n18:45:21.061 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query\r\n18:45:21.064 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT JOB_INSTANCE_ID, JOB_NAME from BATCH_JOB_INSTANCE where JOB_NAME = ? and JOB_KEY = ?]\r\n18:45:21.073 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit\r\n18:45:21.074 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [conn5: url=jdbc:h2:mem:testdb user=SA]\r\n18:45:21.074 [main] DEBUG org.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [conn5: url=jdbc:h2:mem:testdb user=SA] to 2\r\n18:45:21.074 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [conn5: url=jdbc:h2:mem:testdb user=SA] after transaction\r\n18:45:21.075 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [org.springframework.batch.core.repository.support.SimpleJobRepository.createJobExecution]: PROPAGATION_REQUIRES_NEW,ISOLATION_SERIALIZABLE\r\n18:45:21.075 [main] DEBUG org.springframework.jdbc.datasource.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;INIT=RUNSCRIPT FROM &#39;classpath:schema.sql&#39;]\r\n18:45:21.092 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [conn6: url=jdbc:h2:mem:testdb user=SA] for JDBC transaction\r\n18:45:21.092 [main] DEBUG org.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [conn6: url=jdbc:h2:mem:testdb user=SA] to 8\r\n18:45:21.092 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [conn6: url=jdbc:h2:mem:testdb user=SA] to manual commit\r\n18:45:21.092 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query\r\n18:45:21.092 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT JOB_INSTANCE_ID, JOB_NAME from BATCH_JOB_INSTANCE where JOB_NAME = ? and JOB_KEY = ?]\r\n18:45:21.093 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query\r\n18:45:21.093 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT JOB_INSTANCE_ID, JOB_NAME from BATCH_JOB_INSTANCE where JOB_NAME = ? and JOB_KEY = ?]\r\n18:45:21.102 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update\r\n18:45:21.102 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT into BATCH_JOB_INSTANCE(JOB_INSTANCE_ID, JOB_NAME, JOB_KEY, VERSION) values (?, ?, ?, ?)]\r\n18:45:21.119 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update\r\n18:45:21.119 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT into BATCH_JOB_EXECUTION(JOB_EXECUTION_ID, JOB_INSTANCE_ID, START_TIME, END_TIME, STATUS, EXIT_CODE, EXIT_MESSAGE, VERSION, CREATE_TIME, LAST_UPDATED, JOB_CONFIGURATION_LOCATION) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]\r\n18:45:21.270 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update\r\n18:45:21.270 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO BATCH_JOB_EXECUTION_CONTEXT (SHORT_CONTEXT, SERIALIZED_CONTEXT, JOB_EXECUTION_ID) VALUES(?, ?, ?)]\r\n18:45:21.273 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit\r\n18:45:21.273 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [conn6: url=jdbc:h2:mem:testdb user=SA]\r\n18:45:21.274 [main] DEBUG org.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [conn6: url=jdbc:h2:mem:testdb user=SA] to 2\r\n18:45:21.274 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [conn6: url=jdbc:h2:mem:testdb user=SA] after transaction\r\n18:45:21.277 [main] INFO  org.springframework.batch.core.launch.support.SimpleJobLauncher - Job: [SimpleJob: [name=TestJob]] launched with the following parameters: [{}]\r\n18:45:21.290 [main] DEBUG org.springframework.batch.core.job.AbstractJob - Job execution starting: JobExecution: id=1, version=0, startTime=null, endTime=null, lastUpdated=Tue Aug 29 18:45:21 CEST 2023, status=STARTING, exitStatus=exitCode=UNKNOWN;exitDescription=, job=[JobInstance: id=1, version=0, Job=[TestJob]], jobParameters=[{}]\r\n18:45:21.395 [main] DEBUG org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$ReferenceTargetSource - Initializing lazy target object\r\n18:45:21.396 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [org.springframework.batch.core.repository.support.SimpleJobRepository.update]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT\r\n18:45:21.396 [main] DEBUG org.springframework.jdbc.datasource.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;INIT=RUNSCRIPT FROM &#39;classpath:schema.sql&#39;]\r\n18:45:21.408 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [conn7: url=jdbc:h2:mem:testdb user=SA] for JDBC transaction\r\n18:45:21.408 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [conn7: url=jdbc:h2:mem:testdb user=SA] to manual commit\r\n18:45:21.415 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query\r\n18:45:21.415 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT VERSION FROM BATCH_JOB_EXECUTION WHERE JOB_EXECUTION_ID=?]\r\n18:45:21.418 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Initiating transaction rollback\r\n18:45:21.418 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Rolling back JDBC transaction on Connection [conn7: url=jdbc:h2:mem:testdb user=SA]\r\n18:45:21.418 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [conn7: url=jdbc:h2:mem:testdb user=SA] after transaction\r\n18:45:21.419 [main] ERROR org.springframework.batch.core.job.AbstractJob - Encountered fatal error executing job\r\norg.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0\r\n\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97) ~[spring-tx-5.3.25.jar:5.3.25]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:880) ~[spring-jdbc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:906) ~[spring-jdbc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.batch.core.repository.dao.JdbcJobExecutionDao.synchronizeStatus(JdbcJobExecutionDao.java:307) ~[spring-batch-core-4.3.8.jar:4.3.8]\r\n\tat org.springframework.batch.core.repository.support.SimpleJobRepository.update(SimpleJobRepository.java:174) ~[spring-batch-core-4.3.8.jar:4.3.8]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\tat java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) ~[spring-aop-5.3.25.jar:5.3.25]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) ~[spring-aop-5.3.25.jar:5.3.25]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.25.jar:5.3.25]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.25.jar:5.3.25]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.25.jar:5.3.25]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.25.jar:5.3.25]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.25.jar:5.3.25]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.25.jar:5.3.25]\r\n\tat com.sun.proxy.$Proxy108.update(Unknown Source) ~[?:?]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\tat java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) ~[spring-aop-5.3.25.jar:5.3.25]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) ~[spring-aop-5.3.25.jar:5.3.25]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.25.jar:5.3.25]\r\n\tat org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128) ~[spring-batch-core-4.3.8.jar:4.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.25.jar:5.3.25]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.25.jar:5.3.25]\r\n\tat com.sun.proxy.$Proxy108.update(Unknown Source) ~[?:?]\r\n\tat org.springframework.batch.core.job.AbstractJob.updateStatus(AbstractJob.java:443) ~[spring-batch-core-4.3.8.jar:4.3.8]\r\n\tat org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:315) ~[spring-batch-core-4.3.8.jar:4.3.8]\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149) ~[spring-batch-core-4.3.8.jar:4.3.8]\r\n\tat org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50) ~[spring-core-5.3.25.jar:5.3.25]\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140) ~[spring-batch-core-4.3.8.jar:4.3.8]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\tat java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) ~[spring-aop-5.3.25.jar:5.3.25]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) ~[spring-aop-5.3.25.jar:5.3.25]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.25.jar:5.3.25]\r\n\tat org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128) ~[spring-batch-core-4.3.8.jar:4.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.25.jar:5.3.25]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.25.jar:5.3.25]\r\n\tat com.sun.proxy.$Proxy121.run(Unknown Source) ~[?:?]\r\n\tat org.springframework.batch.test.StepRunner.launchJob(StepRunner.java:172) ~[spring-batch-test-4.3.8.jar:4.3.8]\r\n\tat org.springframework.batch.test.StepRunner.launchStep(StepRunner.java:161) ~[spring-batch-test-4.3.8.jar:4.3.8]\r\n\tat org.springframework.batch.test.JobLauncherTestUtils.launchStep(JobLauncherTestUtils.java:251) ~[spring-batch-test-4.3.8.jar:4.3.8]\r\n\tat org.springframework.batch.test.JobLauncherTestUtils.launchStep(JobLauncherTestUtils.java:225) ~[spring-batch-test-4.3.8.jar:4.3.8]\r\n\tat BatchTest.testStep(BatchTest.java:152) ~[test-classes/:?]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\tat java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725) ~[junit-platform-commons-1.8.2.jar:1.8.2]\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:\r\n```\r\n\r\n\r\nI dont know why this query is not returning any value what it requires \r\n\r\n```\r\nSELECT JOB_INSTANCE_ID, JOB_NAME from BATCH_JOB_INSTANCE where JOB_NAME = ? and JOB_KEY = ?]\r\n```\r\n\r\nMy application-test.properties looks as follows -\r\n\r\n\r\n```\r\nspring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;INIT=RUNSCRIPT FROM &#39;classpath:schema.sql&#39;\r\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\nspring.jpa.generate-ddl=true\r\nspring.sql.init.mode=always\r\nspring.batch.jdbc.initialize-schema=always\r\nspring.jpa.defer-datasource-initialization=true\r\nspring.jpa.hibernate.ddl-auto=create-drop\r\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.H2Dialect\r\nspring.jpa.database=h2\r\nspring.datasource.username=sa\r\nspring.datasource.password=\r\nspring.datasource.driverClassName=org.h2.Driver\r\n```\r\n\r\nI have created the following schema for the BATCH_JOB_INSTANCE under the file `schema.sql` -\r\n\r\n\r\n```\r\nCREATE TABLE BATCH_JOB_INSTANCE  (\r\n                                     JOB_INSTANCE_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY ,\r\n                                     VERSION BIGINT ,\r\n                                     JOB_NAME VARCHAR(100) NOT NULL,\r\n                                     JOB_KEY VARCHAR(32) NOT NULL,\r\n                                     constraint JOB_INST_UN unique (JOB_NAME, JOB_KEY)\r\n) ;\r\n```\r\n","title":"Why does SELECT VERSION FROM BATCH_JOB_EXECUTION WHERE JOB_EXECUTION_ID=? returns nothing?","body":"<p>I am testing a spring batch application witht he help of the Spring batch testing. I have created the tables that the spring batch test use manually in the h2 database. However when test launching a <code>Step</code> I am  getting the following error -</p>\n<pre><code>\n18:45:19.909 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@75b3ef1a size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]\n18:45:20.158 [main] DEBUG org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$ReferenceTargetSource - Initializing lazy target object\n18:45:20.163 [main] WARN  org.springframework.batch.core.configuration.annotation.DefaultBatchConfigurer - No transaction manager was provided, using a DataSourceTransactionManager\n18:45:20.196 [main] DEBUG org.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource\n18:45:20.196 [main] DEBUG org.springframework.jdbc.datasource.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;INIT=RUNSCRIPT FROM 'classpath:schema.sql']\n18:45:20.222 [main] INFO  org.springframework.batch.core.repository.support.JobRepositoryFactoryBean - No database type set, using meta data indicating: H2\n18:45:20.956 [main] DEBUG org.springframework.transaction.interceptor.NameMatchTransactionAttributeSource - Adding transactional method [*] with attribute [PROPAGATION_REQUIRED,ISOLATION_DEFAULT]\n18:45:20.956 [main] DEBUG org.springframework.transaction.interceptor.NameMatchTransactionAttributeSource - Adding transactional method [create*] with attribute [PROPAGATION_REQUIRES_NEW,ISOLATION_SERIALIZABLE]\n18:45:20.956 [main] DEBUG org.springframework.transaction.interceptor.NameMatchTransactionAttributeSource - Adding transactional method [getLastJobExecution*] with attribute [PROPAGATION_REQUIRES_NEW,ISOLATION_SERIALIZABLE]\n18:45:21.012 [main] INFO  org.springframework.batch.core.launch.support.SimpleJobLauncher - No TaskExecutor has been set, defaulting to synchronous executor.\n18:45:21.020 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [org.springframework.batch.core.repository.support.SimpleJobRepository.getLastJobExecution]: PROPAGATION_REQUIRES_NEW,ISOLATION_SERIALIZABLE\n18:45:21.021 [main] DEBUG org.springframework.jdbc.datasource.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;INIT=RUNSCRIPT FROM 'classpath:schema.sql']\n18:45:21.042 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [conn5: url=jdbc:h2:mem:testdb user=SA] for JDBC transaction\n18:45:21.045 [main] DEBUG org.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [conn5: url=jdbc:h2:mem:testdb user=SA] to 8\n18:45:21.045 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [conn5: url=jdbc:h2:mem:testdb user=SA] to manual commit\n18:45:21.061 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query\n18:45:21.064 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT JOB_INSTANCE_ID, JOB_NAME from BATCH_JOB_INSTANCE where JOB_NAME = ? and JOB_KEY = ?]\n18:45:21.073 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit\n18:45:21.074 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [conn5: url=jdbc:h2:mem:testdb user=SA]\n18:45:21.074 [main] DEBUG org.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [conn5: url=jdbc:h2:mem:testdb user=SA] to 2\n18:45:21.074 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [conn5: url=jdbc:h2:mem:testdb user=SA] after transaction\n18:45:21.075 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [org.springframework.batch.core.repository.support.SimpleJobRepository.createJobExecution]: PROPAGATION_REQUIRES_NEW,ISOLATION_SERIALIZABLE\n18:45:21.075 [main] DEBUG org.springframework.jdbc.datasource.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;INIT=RUNSCRIPT FROM 'classpath:schema.sql']\n18:45:21.092 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [conn6: url=jdbc:h2:mem:testdb user=SA] for JDBC transaction\n18:45:21.092 [main] DEBUG org.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [conn6: url=jdbc:h2:mem:testdb user=SA] to 8\n18:45:21.092 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [conn6: url=jdbc:h2:mem:testdb user=SA] to manual commit\n18:45:21.092 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query\n18:45:21.092 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT JOB_INSTANCE_ID, JOB_NAME from BATCH_JOB_INSTANCE where JOB_NAME = ? and JOB_KEY = ?]\n18:45:21.093 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query\n18:45:21.093 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT JOB_INSTANCE_ID, JOB_NAME from BATCH_JOB_INSTANCE where JOB_NAME = ? and JOB_KEY = ?]\n18:45:21.102 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update\n18:45:21.102 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT into BATCH_JOB_INSTANCE(JOB_INSTANCE_ID, JOB_NAME, JOB_KEY, VERSION) values (?, ?, ?, ?)]\n18:45:21.119 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update\n18:45:21.119 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT into BATCH_JOB_EXECUTION(JOB_EXECUTION_ID, JOB_INSTANCE_ID, START_TIME, END_TIME, STATUS, EXIT_CODE, EXIT_MESSAGE, VERSION, CREATE_TIME, LAST_UPDATED, JOB_CONFIGURATION_LOCATION) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]\n18:45:21.270 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update\n18:45:21.270 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO BATCH_JOB_EXECUTION_CONTEXT (SHORT_CONTEXT, SERIALIZED_CONTEXT, JOB_EXECUTION_ID) VALUES(?, ?, ?)]\n18:45:21.273 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit\n18:45:21.273 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [conn6: url=jdbc:h2:mem:testdb user=SA]\n18:45:21.274 [main] DEBUG org.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [conn6: url=jdbc:h2:mem:testdb user=SA] to 2\n18:45:21.274 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [conn6: url=jdbc:h2:mem:testdb user=SA] after transaction\n18:45:21.277 [main] INFO  org.springframework.batch.core.launch.support.SimpleJobLauncher - Job: [SimpleJob: [name=TestJob]] launched with the following parameters: [{}]\n18:45:21.290 [main] DEBUG org.springframework.batch.core.job.AbstractJob - Job execution starting: JobExecution: id=1, version=0, startTime=null, endTime=null, lastUpdated=Tue Aug 29 18:45:21 CEST 2023, status=STARTING, exitStatus=exitCode=UNKNOWN;exitDescription=, job=[JobInstance: id=1, version=0, Job=[TestJob]], jobParameters=[{}]\n18:45:21.395 [main] DEBUG org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$ReferenceTargetSource - Initializing lazy target object\n18:45:21.396 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [org.springframework.batch.core.repository.support.SimpleJobRepository.update]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT\n18:45:21.396 [main] DEBUG org.springframework.jdbc.datasource.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;INIT=RUNSCRIPT FROM 'classpath:schema.sql']\n18:45:21.408 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [conn7: url=jdbc:h2:mem:testdb user=SA] for JDBC transaction\n18:45:21.408 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [conn7: url=jdbc:h2:mem:testdb user=SA] to manual commit\n18:45:21.415 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query\n18:45:21.415 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT VERSION FROM BATCH_JOB_EXECUTION WHERE JOB_EXECUTION_ID=?]\n18:45:21.418 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Initiating transaction rollback\n18:45:21.418 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Rolling back JDBC transaction on Connection [conn7: url=jdbc:h2:mem:testdb user=SA]\n18:45:21.418 [main] DEBUG org.springframework.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [conn7: url=jdbc:h2:mem:testdb user=SA] after transaction\n18:45:21.419 [main] ERROR org.springframework.batch.core.job.AbstractJob - Encountered fatal error executing job\norg.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0\n    at org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97) ~[spring-tx-5.3.25.jar:5.3.25]\n    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:880) ~[spring-jdbc-5.3.25.jar:5.3.25]\n    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:906) ~[spring-jdbc-5.3.25.jar:5.3.25]\n    at org.springframework.batch.core.repository.dao.JdbcJobExecutionDao.synchronizeStatus(JdbcJobExecutionDao.java:307) ~[spring-batch-core-4.3.8.jar:4.3.8]\n    at org.springframework.batch.core.repository.support.SimpleJobRepository.update(SimpleJobRepository.java:174) ~[spring-batch-core-4.3.8.jar:4.3.8]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) ~[spring-aop-5.3.25.jar:5.3.25]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) ~[spring-aop-5.3.25.jar:5.3.25]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.25.jar:5.3.25]\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.25.jar:5.3.25]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.25.jar:5.3.25]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.25.jar:5.3.25]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.25.jar:5.3.25]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.25.jar:5.3.25]\n    at com.sun.proxy.$Proxy108.update(Unknown Source) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) ~[spring-aop-5.3.25.jar:5.3.25]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) ~[spring-aop-5.3.25.jar:5.3.25]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.25.jar:5.3.25]\n    at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128) ~[spring-batch-core-4.3.8.jar:4.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.25.jar:5.3.25]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.25.jar:5.3.25]\n    at com.sun.proxy.$Proxy108.update(Unknown Source) ~[?:?]\n    at org.springframework.batch.core.job.AbstractJob.updateStatus(AbstractJob.java:443) ~[spring-batch-core-4.3.8.jar:4.3.8]\n    at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:315) ~[spring-batch-core-4.3.8.jar:4.3.8]\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149) ~[spring-batch-core-4.3.8.jar:4.3.8]\n    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50) ~[spring-core-5.3.25.jar:5.3.25]\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140) ~[spring-batch-core-4.3.8.jar:4.3.8]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) ~[spring-aop-5.3.25.jar:5.3.25]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) ~[spring-aop-5.3.25.jar:5.3.25]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.25.jar:5.3.25]\n    at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128) ~[spring-batch-core-4.3.8.jar:4.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.25.jar:5.3.25]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.25.jar:5.3.25]\n    at com.sun.proxy.$Proxy121.run(Unknown Source) ~[?:?]\n    at org.springframework.batch.test.StepRunner.launchJob(StepRunner.java:172) ~[spring-batch-test-4.3.8.jar:4.3.8]\n    at org.springframework.batch.test.StepRunner.launchStep(StepRunner.java:161) ~[spring-batch-test-4.3.8.jar:4.3.8]\n    at org.springframework.batch.test.JobLauncherTestUtils.launchStep(JobLauncherTestUtils.java:251) ~[spring-batch-test-4.3.8.jar:4.3.8]\n    at org.springframework.batch.test.JobLauncherTestUtils.launchStep(JobLauncherTestUtils.java:225) ~[spring-batch-test-4.3.8.jar:4.3.8]\n    at BatchTest.testStep(BatchTest.java:152) ~[test-classes/:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725) ~[junit-platform-commons-1.8.2.jar:1.8.2]\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.1.jar:5.8.1]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:\n</code></pre>\n<p>I dont know why this query is not returning any value what it requires</p>\n<pre><code>SELECT JOB_INSTANCE_ID, JOB_NAME from BATCH_JOB_INSTANCE where JOB_NAME = ? and JOB_KEY = ?]\n</code></pre>\n<p>My application-test.properties looks as follows -</p>\n<pre><code>spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;INIT=RUNSCRIPT FROM 'classpath:schema.sql'\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.generate-ddl=true\nspring.sql.init.mode=always\nspring.batch.jdbc.initialize-schema=always\nspring.jpa.defer-datasource-initialization=true\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.H2Dialect\nspring.jpa.database=h2\nspring.datasource.username=sa\nspring.datasource.password=\nspring.datasource.driverClassName=org.h2.Driver\n</code></pre>\n<p>I have created the following schema for the BATCH_JOB_INSTANCE under the file <code>schema.sql</code> -</p>\n<pre><code>CREATE TABLE BATCH_JOB_INSTANCE  (\n                                     JOB_INSTANCE_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY ,\n                                     VERSION BIGINT ,\n                                     JOB_NAME VARCHAR(100) NOT NULL,\n                                     JOB_KEY VARCHAR(32) NOT NULL,\n                                     constraint JOB_INST_UN unique (JOB_NAME, JOB_KEY)\n) ;\n</code></pre>\n"},{"tags":["java","android","ssl"],"comments":[{"owner":{"account_id":251706,"reputation":5323,"user_id":529282,"display_name":"Martheen"},"score":1,"creation_date":1693328951,"post_id":77002289,"comment_id":135745235,"body_markdown":"https://developer.android.com/reference/java/security/KeyStore says BKS is supported since Android 1","body":"<a href=\"https://developer.android.com/reference/java/security/KeyStore\" rel=\"nofollow noreferrer\">developer.android.com/reference/java/security/KeyStore</a> says BKS is supported since Android 1"},{"owner":{"account_id":1601476,"reputation":547,"user_id":1482428,"accept_rate":18,"display_name":"Henrik Berg"},"score":0,"creation_date":1693329106,"post_id":77002289,"comment_id":135745258,"body_markdown":"@Martheen Thanks, I hadn&#39;t notice that! So going with just BKS should be enough, then? I assume it won&#39;t be removed anytime soon either?","body":"@Martheen Thanks, I hadn&#39;t notice that! So going with just BKS should be enough, then? I assume it won&#39;t be removed anytime soon either?"},{"owner":{"account_id":251706,"reputation":5323,"user_id":529282,"display_name":"Martheen"},"score":0,"creation_date":1693359650,"post_id":77002289,"comment_id":135749262,"body_markdown":"The lack of JKS support is due to its proprietary nature, BKS meanwhile has a very permissive license https://bouncycastle.org/LICENSE.html. The last update is the addition of AndroidKeyStore in Android 4.3, over a decade ago and with no depreciation of other types since, so I don&#39;t any major changes for your app expected lifetime","body":"The lack of JKS support is due to its proprietary nature, BKS meanwhile has a very permissive license <a href=\"https://bouncycastle.org/LICENSE.html\" rel=\"nofollow noreferrer\">bouncycastle.org/LICENSE.html</a>. The last update is the addition of AndroidKeyStore in Android 4.3, over a decade ago and with no depreciation of other types since, so I don&#39;t any major changes for your app expected lifetime"}],"owner":{"account_id":1601476,"reputation":547,"user_id":1482428,"accept_rate":18,"display_name":"Henrik Berg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693328575,"creation_date":1693328575,"question_id":77002289,"body_markdown":"I need to use SSL sockets in my Android app. I&#39;ve managed to get it to work, but initially I had some problems with the keystore. On my first try I used a JKS keystore, but apparently that does not work on Android. E.g. the answers to [this question](https://stackoverflow.com/questions/9312193/does-android-support-jks-keystore-type) say that Android only supports BKS.\r\n\r\nSo I converted my keystore to BKS, and as a result everything seems to work perfectly.\r\n\r\nBut then I started to worry: Do all versions (or at least reasonably recent versions) of Android support BKS, and is it supported on all devices? Or do I have to add keystores in other formats as well (e.g. JKS, BKS-v1 etc), and check at runtime what version to use? I&#39;ve tried googling this for some time now, but I&#39;m not able to figure it out.","title":"Which Android versions support BKS?","body":"<p>I need to use SSL sockets in my Android app. I've managed to get it to work, but initially I had some problems with the keystore. On my first try I used a JKS keystore, but apparently that does not work on Android. E.g. the answers to <a href=\"https://stackoverflow.com/questions/9312193/does-android-support-jks-keystore-type\">this question</a> say that Android only supports BKS.</p>\n<p>So I converted my keystore to BKS, and as a result everything seems to work perfectly.</p>\n<p>But then I started to worry: Do all versions (or at least reasonably recent versions) of Android support BKS, and is it supported on all devices? Or do I have to add keystores in other formats as well (e.g. JKS, BKS-v1 etc), and check at runtime what version to use? I've tried googling this for some time now, but I'm not able to figure it out.</p>\n"},{"tags":["java","spring-boot","spring-security","java-17","jakarta-migration"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1693334605,"post_id":77002268,"comment_id":135746319,"body_markdown":"You are upgrading too much at once. Your error indicates you haven&#39;t uypgraded spring security (which should be upgraded automatically when you upgrade Spring Boot, why are you managing that separately)?","body":"You are upgrading too much at once. Your error indicates you haven&#39;t uypgraded spring security (which should be upgraded automatically when you upgrade Spring Boot, why are you managing that separately)?"},{"owner":{"account_id":11614164,"reputation":83,"user_id":8507504,"display_name":"Jared"},"score":0,"creation_date":1693341396,"post_id":77002268,"comment_id":135747516,"body_markdown":"I am upgrading Spring boot and Spring security to versions 3.1.3 and 6.1.3 respectively","body":"I am upgrading Spring boot and Spring security to versions 3.1.3 and 6.1.3 respectively"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1693379016,"post_id":77002268,"comment_id":135751062,"body_markdown":"You aren&#39;t as it clearly indicates that the filter used (which is from Spring Security) is still using older api&#39;s . Also, as mentioned, you shouldn&#39;t manage your spring security dependency separately. Please add you `pom.xml` to the question.","body":"You aren&#39;t as it clearly indicates that the filter used (which is from Spring Security) is still using older api&#39;s . Also, as mentioned, you shouldn&#39;t manage your spring security dependency separately. Please add you <code>pom.xml</code> to the question."},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1693381192,"post_id":77002268,"comment_id":135751435,"body_markdown":"what is the purpose of `MySecurityFilter` why do you need a custom filter?","body":"what is the purpose of <code>MySecurityFilter</code> why do you need a custom filter?"},{"owner":{"account_id":11614164,"reputation":83,"user_id":8507504,"display_name":"Jared"},"score":0,"creation_date":1693418845,"post_id":77002268,"comment_id":135759826,"body_markdown":"I found the fix. I need to use `http.addFilterBefore(new MySecurityFilter();` instead. I guess this is a new API introduced since I don&#39;t recollect it in the previous release! I solved the compilation, but am running into a different runtime error!\n\nYou&#39;re right about my using older APIs. I identified that one of the dependencies is using javax.servlet instead of jakarta.servlet and our upgrade is blocked by that library!","body":"I found the fix. I need to use <code>http.addFilterBefore(new MySecurityFilter();</code> instead. I guess this is a new API introduced since I don&#39;t recollect it in the previous release! I solved the compilation, but am running into a different runtime error!  You&#39;re right about my using older APIs. I identified that one of the dependencies is using javax.servlet instead of jakarta.servlet and our upgrade is blocked by that library!"}],"owner":{"account_id":11614164,"reputation":83,"user_id":8507504,"display_name":"Jared"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693328454,"creation_date":1693328454,"question_id":77002268,"body_markdown":"I need to upgrade Spring Boot, Spring Security, and JDK from 11 to 17\r\n\r\nTo perform this upgrade, I had to replace `javax.servlet.http.*` with `jakarta.servlet.http.*`\r\n\r\nThe problem I am running into is the compilation of the Line `http.addFilterBefore(new MySecurityFilter(), ChannelProcessingFilter.class);`\r\n\r\nIt gives me the compilation error `WebSecurityConfig.java:[47,85] incompatible types: java.lang.Class&lt;org.springframework.security.web.access.channel.ChannelProcessingFilter&gt; cannot be converted to java.lang.Class&lt;? extends jakarta.servlet.Filter&gt;`\r\n\r\nIf I do NOT specify this line, the inbuilt security runs for all `/api/**` requests since they contain the Bearer token. I want to authenticate them myself using `MySecurityFilter`\r\n\r\n**Any idea how to fix this since I&#39;m not sure what class in the Jakarta library could be used as a replacement for the `ChannelProcessingFilter`?**\r\n\r\nI&#39;ll be grateful for any help\r\n\r\n```\r\n// OLD CODE\r\npackage com.my.server.security;\r\n\r\nimport com.my.server.security.filter.MySecurityFilter;\r\nimport org.keycloak.adapters.springsecurity.KeycloakSecurityComponents;\r\nimport org.keycloak.adapters.springsecurity.authentication.KeycloakAuthenticationProvider;\r\nimport org.keycloak.adapters.springsecurity.config.KeycloakWebSecurityConfigurerAdapter;\r\nimport org.keycloak.adapters.springsecurity.filter.AdapterStateCookieRequestMatcher;\r\nimport org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticationProcessingFilter;\r\nimport org.keycloak.adapters.springsecurity.filter.QueryParamPresenceRequestMatcher;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.core.authority.mapping.SimpleAuthorityMapper;\r\nimport org.springframework.security.core.session.SessionRegistryImpl;\r\nimport org.springframework.security.web.access.channel.ChannelProcessingFilter;\r\nimport org.springframework.security.web.authentication.session.RegisterSessionAuthenticationStrategy;\r\nimport org.springframework.security.web.authentication.session.SessionAuthenticationStrategy;\r\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\r\nimport org.springframework.security.web.util.matcher.OrRequestMatcher;\r\nimport org.springframework.security.web.util.matcher.RequestMatcher;\r\n\r\nimport javax.servlet.http.HttpServletRequest;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\n@ComponentScan(basePackageClasses = KeycloakSecurityComponents.class)\r\nclass WebSecurityConfig extends KeycloakWebSecurityConfigurerAdapter {\r\n\r\n    @Autowired\r\n    public void configureGlobal(AuthenticationManagerBuilder auth) {\r\n        KeycloakAuthenticationProvider keycloakAuthenticationProvider = keycloakAuthenticationProvider();\r\n        keycloakAuthenticationProvider.setGrantedAuthoritiesMapper(new SimpleAuthorityMapper());\r\n        auth.authenticationProvider(keycloakAuthenticationProvider);\r\n    }\r\n\r\n    @Bean\r\n    @Override\r\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\r\n        return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\r\n    }\r\n\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        super.configure(http);\r\n        http.cors().and().csrf().disable();\r\n\r\n        http.authorizeRequests()\r\n                .antMatchers(&quot;/echo/**&quot;, &quot;/api/**&quot;).permitAll()\r\n                .antMatchers(&quot;/js/**&quot;, &quot;/css/**&quot;, &quot;/img/**&quot;).permitAll()\r\n                .antMatchers(&quot;/admin/**&quot;).hasAnyRole(&quot;USER&quot;)\r\n                .anyRequest().authenticated();\r\n\r\n        http.addFilterBefore(new MySecurityFilter(), ChannelProcessingFilter.class);\r\n    }\r\n\r\n    @Bean\r\n    @Override\r\n    protected KeycloakAuthenticationProcessingFilter keycloakAuthenticationProcessingFilter() throws Exception {\r\n        RequestMatcher requestMatcher =\r\n                new OrRequestMatcher(\r\n                        new AntPathRequestMatcher(&quot;/sso/login&quot;),\r\n                        new IgnoreKeycloakProcessingFilterRequestMatcher(), // verify Bearer in MySecurityFilter\r\n                        new QueryParamPresenceRequestMatcher(&quot;access_token&quot;),\r\n                        new AdapterStateCookieRequestMatcher()\r\n                );\r\n        return new KeycloakAuthenticationProcessingFilter(authenticationManagerBean(), requestMatcher);\r\n    }\r\n\r\n    private class IgnoreKeycloakProcessingFilterRequestMatcher implements RequestMatcher {\r\n        IgnoreKeycloakProcessingFilterRequestMatcher() {}\r\n        public boolean matches(HttpServletRequest request) {\r\n            String authorizationHeaderValue = request.getHeader(&quot;Authorization&quot;);\r\n            return authorizationHeaderValue != null &amp;&amp; !authorizationHeaderValue.startsWith(&quot;Bearer &quot;);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nimport org.springframework.web.filter.GenericFilterBean;\r\n\r\npublic class MySecurityFilter extends GenericFilterBean {\r\n    ...\r\n}\r\n```\r\n\r\n\r\n\r\n```\r\n// NEW CODE\r\npackage com.my.server.security;\r\n\r\nimport com.my.server.security.filter.MySecurityFilter;\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport org.keycloak.adapters.springsecurity.KeycloakSecurityComponents;\r\nimport org.keycloak.adapters.springsecurity.filter.AdapterStateCookieRequestMatcher;\r\nimport org.keycloak.adapters.springsecurity.filter.QueryParamPresenceRequestMatcher;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityCustomizer;\r\nimport org.springframework.security.core.session.SessionRegistryImpl;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.access.channel.ChannelProcessingFilter;\r\nimport org.springframework.security.web.authentication.session.RegisterSessionAuthenticationStrategy;\r\nimport org.springframework.security.web.authentication.session.SessionAuthenticationStrategy;\r\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\r\nimport org.springframework.security.web.util.matcher.OrRequestMatcher;\r\nimport org.springframework.security.web.util.matcher.RequestMatcher;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\n@ComponentScan(basePackageClasses = KeycloakSecurityComponents.class)\r\npublic class WebSecurityConfig {\r\n\r\n    @Bean\r\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\r\n        return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http.cors().and().csrf().disable();\r\n\r\n        http.authorizeRequests()\r\n                .requestMatchers(&quot;/echo/**&quot;, &quot;/api/**&quot;).permitAll()\r\n                .requestMatchers(&quot;/js/**&quot;, &quot;/css/**&quot;, &quot;/img/**&quot;).permitAll()\r\n                .requestMatchers(&quot;/admin/**&quot;).hasAnyRole(&quot;USER&quot;)\r\n                .anyRequest().authenticated();\r\n\r\n        http.addFilterBefore(new MySecurityFilter(), ChannelProcessingFilter.class);\r\n\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() throws Exception {\r\n        return (web) -&gt; web.ignoring()\r\n                .requestMatchers(\r\n                        new OrRequestMatcher(\r\n                                new AntPathRequestMatcher(&quot;/sso/login&quot;),\r\n                                new IgnoreKeycloakProcessingFilterRequestMatcher(),\r\n                                new QueryParamPresenceRequestMatcher(&quot;access_token&quot;),\r\n                                new AdapterStateCookieRequestMatcher()\r\n                        )\r\n                );\r\n    }\r\n\r\n    private class IgnoreKeycloakProcessingFilterRequestMatcher implements RequestMatcher {\r\n        IgnoreKeycloakProcessingFilterRequestMatcher() {}\r\n        public boolean matches(HttpServletRequest request) {\r\n            String authorizationHeaderValue = request.getHeader(&quot;Authorization&quot;);\r\n            return authorizationHeaderValue != null &amp;&amp; !authorizationHeaderValue.startsWith(&quot;Bearer &quot;);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nimport jakarta.servlet.Filter;\r\nimport jakarta.servlet.http.HttpFilter;\r\n\r\npublic class MySecurityFilter extends HttpFilter implements Filter {\r\n    ...\r\n}\r\n```","title":"What class in jakarta library could be used to replace the class ChannelProcessingFilter from javax?","body":"<p>I need to upgrade Spring Boot, Spring Security, and JDK from 11 to 17</p>\n<p>To perform this upgrade, I had to replace <code>javax.servlet.http.*</code> with <code>jakarta.servlet.http.*</code></p>\n<p>The problem I am running into is the compilation of the Line <code>http.addFilterBefore(new MySecurityFilter(), ChannelProcessingFilter.class);</code></p>\n<p>It gives me the compilation error <code>WebSecurityConfig.java:[47,85] incompatible types: java.lang.Class&lt;org.springframework.security.web.access.channel.ChannelProcessingFilter&gt; cannot be converted to java.lang.Class&lt;? extends jakarta.servlet.Filter&gt;</code></p>\n<p>If I do NOT specify this line, the inbuilt security runs for all <code>/api/**</code> requests since they contain the Bearer token. I want to authenticate them myself using <code>MySecurityFilter</code></p>\n<p><strong>Any idea how to fix this since I'm not sure what class in the Jakarta library could be used as a replacement for the <code>ChannelProcessingFilter</code>?</strong></p>\n<p>I'll be grateful for any help</p>\n<pre><code>// OLD CODE\npackage com.my.server.security;\n\nimport com.my.server.security.filter.MySecurityFilter;\nimport org.keycloak.adapters.springsecurity.KeycloakSecurityComponents;\nimport org.keycloak.adapters.springsecurity.authentication.KeycloakAuthenticationProvider;\nimport org.keycloak.adapters.springsecurity.config.KeycloakWebSecurityConfigurerAdapter;\nimport org.keycloak.adapters.springsecurity.filter.AdapterStateCookieRequestMatcher;\nimport org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticationProcessingFilter;\nimport org.keycloak.adapters.springsecurity.filter.QueryParamPresenceRequestMatcher;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.core.authority.mapping.SimpleAuthorityMapper;\nimport org.springframework.security.core.session.SessionRegistryImpl;\nimport org.springframework.security.web.access.channel.ChannelProcessingFilter;\nimport org.springframework.security.web.authentication.session.RegisterSessionAuthenticationStrategy;\nimport org.springframework.security.web.authentication.session.SessionAuthenticationStrategy;\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\nimport org.springframework.security.web.util.matcher.OrRequestMatcher;\nimport org.springframework.security.web.util.matcher.RequestMatcher;\n\nimport javax.servlet.http.HttpServletRequest;\n\n@Configuration\n@EnableWebSecurity\n@ComponentScan(basePackageClasses = KeycloakSecurityComponents.class)\nclass WebSecurityConfig extends KeycloakWebSecurityConfigurerAdapter {\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) {\n        KeycloakAuthenticationProvider keycloakAuthenticationProvider = keycloakAuthenticationProvider();\n        keycloakAuthenticationProvider.setGrantedAuthoritiesMapper(new SimpleAuthorityMapper());\n        auth.authenticationProvider(keycloakAuthenticationProvider);\n    }\n\n    @Bean\n    @Override\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\n        return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\n    }\n\n    protected void configure(HttpSecurity http) throws Exception {\n        super.configure(http);\n        http.cors().and().csrf().disable();\n\n        http.authorizeRequests()\n                .antMatchers(&quot;/echo/**&quot;, &quot;/api/**&quot;).permitAll()\n                .antMatchers(&quot;/js/**&quot;, &quot;/css/**&quot;, &quot;/img/**&quot;).permitAll()\n                .antMatchers(&quot;/admin/**&quot;).hasAnyRole(&quot;USER&quot;)\n                .anyRequest().authenticated();\n\n        http.addFilterBefore(new MySecurityFilter(), ChannelProcessingFilter.class);\n    }\n\n    @Bean\n    @Override\n    protected KeycloakAuthenticationProcessingFilter keycloakAuthenticationProcessingFilter() throws Exception {\n        RequestMatcher requestMatcher =\n                new OrRequestMatcher(\n                        new AntPathRequestMatcher(&quot;/sso/login&quot;),\n                        new IgnoreKeycloakProcessingFilterRequestMatcher(), // verify Bearer in MySecurityFilter\n                        new QueryParamPresenceRequestMatcher(&quot;access_token&quot;),\n                        new AdapterStateCookieRequestMatcher()\n                );\n        return new KeycloakAuthenticationProcessingFilter(authenticationManagerBean(), requestMatcher);\n    }\n\n    private class IgnoreKeycloakProcessingFilterRequestMatcher implements RequestMatcher {\n        IgnoreKeycloakProcessingFilterRequestMatcher() {}\n        public boolean matches(HttpServletRequest request) {\n            String authorizationHeaderValue = request.getHeader(&quot;Authorization&quot;);\n            return authorizationHeaderValue != null &amp;&amp; !authorizationHeaderValue.startsWith(&quot;Bearer &quot;);\n        }\n    }\n}\n\n\n\nimport org.springframework.web.filter.GenericFilterBean;\n\npublic class MySecurityFilter extends GenericFilterBean {\n    ...\n}\n</code></pre>\n<pre><code>// NEW CODE\npackage com.my.server.security;\n\nimport com.my.server.security.filter.MySecurityFilter;\nimport jakarta.servlet.http.HttpServletRequest;\nimport org.keycloak.adapters.springsecurity.KeycloakSecurityComponents;\nimport org.keycloak.adapters.springsecurity.filter.AdapterStateCookieRequestMatcher;\nimport org.keycloak.adapters.springsecurity.filter.QueryParamPresenceRequestMatcher;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityCustomizer;\nimport org.springframework.security.core.session.SessionRegistryImpl;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.access.channel.ChannelProcessingFilter;\nimport org.springframework.security.web.authentication.session.RegisterSessionAuthenticationStrategy;\nimport org.springframework.security.web.authentication.session.SessionAuthenticationStrategy;\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\nimport org.springframework.security.web.util.matcher.OrRequestMatcher;\nimport org.springframework.security.web.util.matcher.RequestMatcher;\n\n@Configuration\n@EnableWebSecurity\n@ComponentScan(basePackageClasses = KeycloakSecurityComponents.class)\npublic class WebSecurityConfig {\n\n    @Bean\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\n        return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\n    }\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http.cors().and().csrf().disable();\n\n        http.authorizeRequests()\n                .requestMatchers(&quot;/echo/**&quot;, &quot;/api/**&quot;).permitAll()\n                .requestMatchers(&quot;/js/**&quot;, &quot;/css/**&quot;, &quot;/img/**&quot;).permitAll()\n                .requestMatchers(&quot;/admin/**&quot;).hasAnyRole(&quot;USER&quot;)\n                .anyRequest().authenticated();\n\n        http.addFilterBefore(new MySecurityFilter(), ChannelProcessingFilter.class);\n\n        return http.build();\n    }\n\n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer() throws Exception {\n        return (web) -&gt; web.ignoring()\n                .requestMatchers(\n                        new OrRequestMatcher(\n                                new AntPathRequestMatcher(&quot;/sso/login&quot;),\n                                new IgnoreKeycloakProcessingFilterRequestMatcher(),\n                                new QueryParamPresenceRequestMatcher(&quot;access_token&quot;),\n                                new AdapterStateCookieRequestMatcher()\n                        )\n                );\n    }\n\n    private class IgnoreKeycloakProcessingFilterRequestMatcher implements RequestMatcher {\n        IgnoreKeycloakProcessingFilterRequestMatcher() {}\n        public boolean matches(HttpServletRequest request) {\n            String authorizationHeaderValue = request.getHeader(&quot;Authorization&quot;);\n            return authorizationHeaderValue != null &amp;&amp; !authorizationHeaderValue.startsWith(&quot;Bearer &quot;);\n        }\n    }\n}\n\n\n\nimport jakarta.servlet.Filter;\nimport jakarta.servlet.http.HttpFilter;\n\npublic class MySecurityFilter extends HttpFilter implements Filter {\n    ...\n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver","testng","pom.xml"],"comments":[{"owner":{"account_id":1459673,"reputation":1958,"user_id":1374322,"accept_rate":88,"display_name":"JockX"},"score":0,"creation_date":1693346133,"post_id":77002212,"comment_id":135748158,"body_markdown":"And when exactly you expect to initialize the null variable? Because nothing calls `setup` on `CreationDialogUtils`.","body":"And when exactly you expect to initialize the null variable? Because nothing calls <code>setup</code> on <code>CreationDialogUtils</code>."},{"owner":{"account_id":26682848,"reputation":3568,"user_id":20292589,"display_name":"Yaroslavm"},"score":0,"creation_date":1693393126,"post_id":77002212,"comment_id":135753989,"body_markdown":"I see that `CreationDialogUtils` extends from `BaseSeleniumTest` and setup method is called with `@BeforeTest`, so in runtime it looks like has not been called yet. Have you tried to call `setup` with `@BeforeClass` annotation?","body":"I see that <code>CreationDialogUtils</code> extends from <code>BaseSeleniumTest</code> and setup method is called with <code>@BeforeTest</code>, so in runtime it looks like has not been called yet. Have you tried to call <code>setup</code> with <code>@BeforeClass</code> annotation?"},{"owner":{"account_id":20412391,"reputation":23,"user_id":14975443,"display_name":"Raza Sultan"},"score":0,"creation_date":1693506316,"post_id":77002212,"comment_id":135773820,"body_markdown":"@Yaroslavm I also tried to call setup with `@BeforeClass` but the problem is that `CreationDialogUtils` is not a Test class it&#39;s just a supporting class that performs some common actions for multiple HTML pages.","body":"@Yaroslavm I also tried to call setup with <code>@BeforeClass</code> but the problem is that <code>CreationDialogUtils</code> is not a Test class it&#39;s just a supporting class that performs some common actions for multiple HTML pages."}],"owner":{"account_id":20412391,"reputation":23,"user_id":14975443,"display_name":"Raza Sultan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693327928,"creation_date":1693327928,"question_id":77002212,"body_markdown":"I have a base class in which I am initializing some protected variables and using these variables in some of the base class common methods. \r\nThen I have test classes which are extended with the base class. Then I have the page objects classes which are also extended with baseClass.At this point, if I want to use protected variables from baseClass in TestClasses or PageObjectClasses they can be accessible. \r\n\r\nI am facing a problem, I created a utility extended beseclass. In this class I am instantiating three-page object classes and creating some common methods using objects of multiple pages, I am performing some actions. `NullPointerException` occurred when in this Utility class I am trying to call a method from the base class\r\n\r\n    public class BaseSeleniumTest {\r\n    private static final Logger logger = LoggerFactory.getLogger(BaseSeleniumTest.class);\r\n    protected String browserName;\r\n    protected String tenantName;\r\n    protected String userRole;\r\n    protected String testType;\r\n    protected AreaOfBusiness areaOfBusiness;\r\n    protected static ThreadLocal&lt;WebDriver&gt; driver = new ThreadLocal&lt;&gt;();\r\n    protected static ThreadLocal&lt;WebDriverWait&gt; wait = new ThreadLocal&lt;&gt;();\r\n    protected static ThreadLocal&lt;WebDriverWait&gt; longWait = new ThreadLocal&lt;&gt;();\r\n    protected BasePage basePage;\r\n\r\n    @Parameters({&quot;profile&quot;, &quot;browserName&quot;, &quot;userRole&quot;, &quot;testType&quot;, &quot;areaOfBusiness&quot;, &quot;tenantName&quot;})\r\n    @BeforeTest(alwaysRun = true)\r\n    public void setup(@Optional(&quot;local&quot;) String profile, @Optional(&quot;chrome&quot;) String browserName,\r\n                      @Optional String userRole, @Optional String testType,\r\n                      @Optional(&quot;BMW&quot;) AreaOfBusiness areaOfBusiness, @Optional(&quot;Autohaus Huber&quot;) String tenantName)\r\n        throws IOException {\r\n        this.browserName = browserName;\r\n        this.userRole = userRole;\r\n        this.testType = testType;\r\n        this.tenantName = tenantName;\r\n        this.areaOfBusiness = areaOfBusiness;\r\n\r\n        ConfigurationManager.loadProperties(profile);\r\n        driver.set(createBrowserSession(browserName));\r\n\r\n        wait.set(getWait());\r\n        longWait.set(getLongWait());\r\n\r\n        navigateToBackOffice(driver.get(), areaOfBusiness);\r\n\r\n        //Login process\r\n\r\n        // Instantiate page objects\r\n        }\r\n\r\n    @Parameters({&quot;browserName&quot;, &quot;userRole&quot;, &quot;testType&quot;, &quot;areaOfBusiness&quot;, &quot;tenantName&quot;})\r\n    @BeforeClass(alwaysRun = true)\r\n    public void beforeClassInitialization(@Optional(&quot;chrome&quot;) String browserName,\r\n                                          @Optional String userRole, @Optional String testType,\r\n                                          @Optional(&quot;BMW&quot;) AreaOfBusiness areaOfBusiness,\r\n                                          @Optional(&quot;Autohaus Huber&quot;) String tenantName) {\r\n        this.browserName = browserName;\r\n        this.userRole = userRole;\r\n        this.testType = testType;\r\n        this.tenantName = tenantName;\r\n        this.areaOfBusiness = areaOfBusiness;\r\n        this.basePage = new BasePage(driver.get());\r\n    }\r\n\r\n    protected WebDriverWait getWait() {\r\n        return new WebDriverWait(driver.get(), Duration.ofSeconds(10));\r\n    }\r\n\r\n    protected WebDriverWait getLongWait() {\r\n        return new WebDriverWait(driver.get(), Duration.ofSeconds(300));\r\n    }\r\n\r\n \r\n    public WebDriver createBrowserSession(String browser) {\r\n        some code....\r\n        return webDriver;\r\n    }\r\n\r\n  \r\n    @AfterTest(alwaysRun = true)\r\n    public void tearDown() {\r\n        if (driver.get() != null) {\r\n            logger.info(&quot;TearDown Called!&quot;);\r\n            logger.info(&quot;Browser Closed.&quot;);\r\n            driver.get().quit();\r\n        }\r\n    }\r\n\r\n        public void checkErrorPage() {\r\n        String errorPage = MessageFormat.format(ConfigurationManager.getBackOfficeBaseUrl(),\r\n            areaOfBusiness.getValue()) + ERROR_PAGE;\r\n\r\n        if (errorPage.equals(driver.get().getCurrentUrl())) {\r\n            logger.info(&quot;Error page occurred, redirecting to base URL&quot;);\r\n            String redirectToBaseUrl = MessageFormat.format(ConfigurationManager.getBackOfficeBaseUrl(),\r\n                areaOfBusiness.getValue());\r\n            driver.get().navigate().to(redirectToBaseUrl);\r\n        }\r\n    }\r\n\r\n    }\r\n\r\n\r\nBelow is test class\r\n\r\n    public class CreateNewInvoiceFieldsValidationTest extends BaseSeleniumTest {\r\n    protected InvoiceCreationPage invoiceCreation;\r\n    protected ValidationErrorPage validationErrorPage;\r\n    protected CreationDialogUtils creationDialogUtils;\r\n\r\n    @BeforeClass(alwaysRun = true)\r\n    public void createNewInvoiceFieldsValidationBeforeClass() {\r\n        invoiceCreation = new InvoiceCreationPage(driver.get());\r\n        validationErrorPage = new ValidationErrorPage(driver.get());\r\n        creationDialogUtils = new CreationDialogUtils();\r\n    }\r\n\r\n    @Test(description = &quot;To test if the user does not check any of the title checks box and verify validation message&quot;\r\n            + &quot;must be displayed&quot;)\r\n    public void tc019NewCaseFieldTitleValidationTest() throws Exception {\r\n        creationDialogUtils.openInvoiceCreationDialogBox();\r\n        //Invoice creation form\r\n        //Customer data\r\n        var customerData = randomCustomerData();\r\n        customerData.setTitleIndexValue(4);\r\n        creationDialogUtils.fillCustomerData(invoiceCreation, customerData);\r\n        //Invoice data\r\n        var invoiceData = invoiceData();\r\n        creationDialogUtils.fillInvoiceDetails(invoiceCreation, invoiceData, CREATE, INVOICE_CREATION);\r\n        //Click send invoice button\r\n        invoiceCreation.clickSendButton();\r\n        //Verify validation error message\r\n        var errorMessageData = validationErrors(getErrorMessage(&quot;requiredError&quot;,\r\n                &quot;Title&quot;));\r\n        checkValidationErrors(validationErrorPage, errorMessageData, &quot;title&quot;);\r\n        //Close the form\r\n        invoiceCreation.clickCancelButton();\r\n    }\r\n\r\n\r\nAnd This is Utility Class\r\n\r\n    public class CreationDialogUtils extends BaseSeleniumTest {\r\n        protected InvoiceCreationPage invoiceCreation;\r\n        protected OfferPage offerCreation;\r\n        protected RepairOrderPage repairOrder;\r\n    public CreationDialogUtils() {\r\n        invoiceCreation = new InvoiceCreationPage(driver.get());\r\n        offerCreation = new OfferPage(driver.get());\r\n        repairOrder = new RepairOrderPage(driver.get());\r\n    }\r\n       //some methods ....\r\n    problematic method is when i am calling \r\n    public void openInvoiceCreationDialogBox() {\r\n        checkInvoicePage();\r\n        invoiceCreation.clickFormCloseButton();\r\n        invoiceCreation.clickCreateInvoiceButton();\r\n    }\r\n    \r\n\r\nHere checkInvoicePage(); the method is in BaseClass which uses Variable areaOfBusines which gets null, and throws `NullPointerException`. \r\n\r\nBy Debugging I see when control passes to baseClass from the Utility class all the Variables have Null values.\r\n\r\n \r\n","title":"Selenium, TestNG, Base Class&#39;s method throw NullPointerException","body":"<p>I have a base class in which I am initializing some protected variables and using these variables in some of the base class common methods.\nThen I have test classes which are extended with the base class. Then I have the page objects classes which are also extended with baseClass.At this point, if I want to use protected variables from baseClass in TestClasses or PageObjectClasses they can be accessible.</p>\n<p>I am facing a problem, I created a utility extended beseclass. In this class I am instantiating three-page object classes and creating some common methods using objects of multiple pages, I am performing some actions. <code>NullPointerException</code> occurred when in this Utility class I am trying to call a method from the base class</p>\n<pre><code>public class BaseSeleniumTest {\nprivate static final Logger logger = LoggerFactory.getLogger(BaseSeleniumTest.class);\nprotected String browserName;\nprotected String tenantName;\nprotected String userRole;\nprotected String testType;\nprotected AreaOfBusiness areaOfBusiness;\nprotected static ThreadLocal&lt;WebDriver&gt; driver = new ThreadLocal&lt;&gt;();\nprotected static ThreadLocal&lt;WebDriverWait&gt; wait = new ThreadLocal&lt;&gt;();\nprotected static ThreadLocal&lt;WebDriverWait&gt; longWait = new ThreadLocal&lt;&gt;();\nprotected BasePage basePage;\n\n@Parameters({&quot;profile&quot;, &quot;browserName&quot;, &quot;userRole&quot;, &quot;testType&quot;, &quot;areaOfBusiness&quot;, &quot;tenantName&quot;})\n@BeforeTest(alwaysRun = true)\npublic void setup(@Optional(&quot;local&quot;) String profile, @Optional(&quot;chrome&quot;) String browserName,\n                  @Optional String userRole, @Optional String testType,\n                  @Optional(&quot;BMW&quot;) AreaOfBusiness areaOfBusiness, @Optional(&quot;Autohaus Huber&quot;) String tenantName)\n    throws IOException {\n    this.browserName = browserName;\n    this.userRole = userRole;\n    this.testType = testType;\n    this.tenantName = tenantName;\n    this.areaOfBusiness = areaOfBusiness;\n\n    ConfigurationManager.loadProperties(profile);\n    driver.set(createBrowserSession(browserName));\n\n    wait.set(getWait());\n    longWait.set(getLongWait());\n\n    navigateToBackOffice(driver.get(), areaOfBusiness);\n\n    //Login process\n\n    // Instantiate page objects\n    }\n\n@Parameters({&quot;browserName&quot;, &quot;userRole&quot;, &quot;testType&quot;, &quot;areaOfBusiness&quot;, &quot;tenantName&quot;})\n@BeforeClass(alwaysRun = true)\npublic void beforeClassInitialization(@Optional(&quot;chrome&quot;) String browserName,\n                                      @Optional String userRole, @Optional String testType,\n                                      @Optional(&quot;BMW&quot;) AreaOfBusiness areaOfBusiness,\n                                      @Optional(&quot;Autohaus Huber&quot;) String tenantName) {\n    this.browserName = browserName;\n    this.userRole = userRole;\n    this.testType = testType;\n    this.tenantName = tenantName;\n    this.areaOfBusiness = areaOfBusiness;\n    this.basePage = new BasePage(driver.get());\n}\n\nprotected WebDriverWait getWait() {\n    return new WebDriverWait(driver.get(), Duration.ofSeconds(10));\n}\n\nprotected WebDriverWait getLongWait() {\n    return new WebDriverWait(driver.get(), Duration.ofSeconds(300));\n}\n\n\npublic WebDriver createBrowserSession(String browser) {\n    some code....\n    return webDriver;\n}\n\n\n@AfterTest(alwaysRun = true)\npublic void tearDown() {\n    if (driver.get() != null) {\n        logger.info(&quot;TearDown Called!&quot;);\n        logger.info(&quot;Browser Closed.&quot;);\n        driver.get().quit();\n    }\n}\n\n    public void checkErrorPage() {\n    String errorPage = MessageFormat.format(ConfigurationManager.getBackOfficeBaseUrl(),\n        areaOfBusiness.getValue()) + ERROR_PAGE;\n\n    if (errorPage.equals(driver.get().getCurrentUrl())) {\n        logger.info(&quot;Error page occurred, redirecting to base URL&quot;);\n        String redirectToBaseUrl = MessageFormat.format(ConfigurationManager.getBackOfficeBaseUrl(),\n            areaOfBusiness.getValue());\n        driver.get().navigate().to(redirectToBaseUrl);\n    }\n}\n\n}\n</code></pre>\n<p>Below is test class</p>\n<pre><code>public class CreateNewInvoiceFieldsValidationTest extends BaseSeleniumTest {\nprotected InvoiceCreationPage invoiceCreation;\nprotected ValidationErrorPage validationErrorPage;\nprotected CreationDialogUtils creationDialogUtils;\n\n@BeforeClass(alwaysRun = true)\npublic void createNewInvoiceFieldsValidationBeforeClass() {\n    invoiceCreation = new InvoiceCreationPage(driver.get());\n    validationErrorPage = new ValidationErrorPage(driver.get());\n    creationDialogUtils = new CreationDialogUtils();\n}\n\n@Test(description = &quot;To test if the user does not check any of the title checks box and verify validation message&quot;\n        + &quot;must be displayed&quot;)\npublic void tc019NewCaseFieldTitleValidationTest() throws Exception {\n    creationDialogUtils.openInvoiceCreationDialogBox();\n    //Invoice creation form\n    //Customer data\n    var customerData = randomCustomerData();\n    customerData.setTitleIndexValue(4);\n    creationDialogUtils.fillCustomerData(invoiceCreation, customerData);\n    //Invoice data\n    var invoiceData = invoiceData();\n    creationDialogUtils.fillInvoiceDetails(invoiceCreation, invoiceData, CREATE, INVOICE_CREATION);\n    //Click send invoice button\n    invoiceCreation.clickSendButton();\n    //Verify validation error message\n    var errorMessageData = validationErrors(getErrorMessage(&quot;requiredError&quot;,\n            &quot;Title&quot;));\n    checkValidationErrors(validationErrorPage, errorMessageData, &quot;title&quot;);\n    //Close the form\n    invoiceCreation.clickCancelButton();\n}\n</code></pre>\n<p>And This is Utility Class</p>\n<pre><code>public class CreationDialogUtils extends BaseSeleniumTest {\n    protected InvoiceCreationPage invoiceCreation;\n    protected OfferPage offerCreation;\n    protected RepairOrderPage repairOrder;\npublic CreationDialogUtils() {\n    invoiceCreation = new InvoiceCreationPage(driver.get());\n    offerCreation = new OfferPage(driver.get());\n    repairOrder = new RepairOrderPage(driver.get());\n}\n   //some methods ....\nproblematic method is when i am calling \npublic void openInvoiceCreationDialogBox() {\n    checkInvoicePage();\n    invoiceCreation.clickFormCloseButton();\n    invoiceCreation.clickCreateInvoiceButton();\n}\n</code></pre>\n<p>Here checkInvoicePage(); the method is in BaseClass which uses Variable areaOfBusines which gets null, and throws <code>NullPointerException</code>.</p>\n<p>By Debugging I see when control passes to baseClass from the Utility class all the Variables have Null values.</p>\n"},{"tags":["java","spring-boot","gradle","upgrade","querydsl"],"comments":[{"owner":{"account_id":12966721,"reputation":499,"user_id":9373974,"display_name":"theg"},"score":0,"creation_date":1690296405,"post_id":75328934,"comment_id":135331848,"body_markdown":"Did you solve this?","body":"Did you solve this?"},{"owner":{"account_id":371244,"reputation":443,"user_id":17825391,"display_name":"user213769"},"score":0,"creation_date":1696545513,"post_id":75328934,"comment_id":136170829,"body_markdown":"I&#39;ve had a very similar problem, but OP has not provided a minimal example here, so it&#39;s hard to tell if it&#39;s the same. Still, the solution for me was to verify that the generated dirs are processed at all. In my case, they weren&#39;t. I went with upgrading everything related (including Gradle itself, from 7.6.2 to 8.3), and, lo and behold, it worked.","body":"I&#39;ve had a very similar problem, but OP has not provided a minimal example here, so it&#39;s hard to tell if it&#39;s the same. Still, the solution for me was to verify that the generated dirs are processed at all. In my case, they weren&#39;t. I went with upgrading everything related (including Gradle itself, from 7.6.2 to 8.3), and, lo and behold, it worked."}],"answers":[{"tags":[],"owner":{"account_id":27658274,"reputation":9,"user_id":21111687,"display_name":"Dan"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1693327819,"creation_date":1693325512,"answer_id":77001901,"question_id":75328934,"body_markdown":"To answer my own question, a coworker ended up changing a line at the end of the `generateJPA` task from\r\n\r\n```\r\nhbm2java(destdir: &#39;src/main/java&#39;, ejb3: &#39;true&#39;, jdk5: &#39;true&#39;)\r\n```\r\n\r\nto\r\n\r\n```\r\nhbm2java(destdir: &#39;src/main/java&#39;, ejb3: &#39;true&#39;, jdk5: &#39;true&#39;, templatepath: &#39;resources/templates&#39;)\r\n```\r\n\r\nand made sure we had a &amp;lt;Spring Boot project root&amp;gt;/resources/templates/pojo/Pojo.ftl file with this content:\r\n\r\n```\r\n${pojo.getPackageDeclaration()}\r\n\r\n&lt;#assign classbody&gt;\r\n&lt;#include &quot;PojoTypeDeclaration.ftl&quot;/&gt; {\r\n\r\n&lt;#if !pojo.isInterface()&gt;\r\n&lt;#include &quot;PojoFields.ftl&quot;/&gt;\r\n\r\n&lt;#include &quot;PojoConstructors.ftl&quot;/&gt;\r\n   \r\n&lt;#include &quot;PojoPropertyAccessors.ftl&quot;/&gt;\r\n\r\n&lt;#include &quot;PojoToString.ftl&quot;/&gt;\r\n\r\n&lt;#include &quot;PojoEqualsHashcode.ftl&quot;/&gt;\r\n\r\n&lt;#else&gt;\r\n&lt;#include &quot;PojoInterfacePropertyAccessors.ftl&quot;/&gt;\r\n\r\n&lt;/#if&gt;\r\n&lt;#include &quot;PojoExtraClassCode.ftl&quot;/&gt;\r\n\r\n}\r\n&lt;/#assign&gt;\r\n\r\n${pojo.generateImports()}\r\n${classbody}\r\n```\r\n\r\nThis solved it for us.\r\n","title":"QueryDSL Q Classes Not Generating after Java 17 Upgrade","body":"<p>To answer my own question, a coworker ended up changing a line at the end of the <code>generateJPA</code> task from</p>\n<pre><code>hbm2java(destdir: 'src/main/java', ejb3: 'true', jdk5: 'true')\n</code></pre>\n<p>to</p>\n<pre><code>hbm2java(destdir: 'src/main/java', ejb3: 'true', jdk5: 'true', templatepath: 'resources/templates')\n</code></pre>\n<p>and made sure we had a &lt;Spring Boot project root&gt;/resources/templates/pojo/Pojo.ftl file with this content:</p>\n<pre><code>${pojo.getPackageDeclaration()}\n\n&lt;#assign classbody&gt;\n&lt;#include &quot;PojoTypeDeclaration.ftl&quot;/&gt; {\n\n&lt;#if !pojo.isInterface()&gt;\n&lt;#include &quot;PojoFields.ftl&quot;/&gt;\n\n&lt;#include &quot;PojoConstructors.ftl&quot;/&gt;\n   \n&lt;#include &quot;PojoPropertyAccessors.ftl&quot;/&gt;\n\n&lt;#include &quot;PojoToString.ftl&quot;/&gt;\n\n&lt;#include &quot;PojoEqualsHashcode.ftl&quot;/&gt;\n\n&lt;#else&gt;\n&lt;#include &quot;PojoInterfacePropertyAccessors.ftl&quot;/&gt;\n\n&lt;/#if&gt;\n&lt;#include &quot;PojoExtraClassCode.ftl&quot;/&gt;\n\n}\n&lt;/#assign&gt;\n\n${pojo.generateImports()}\n${classbody}\n</code></pre>\n<p>This solved it for us.</p>\n"}],"owner":{"account_id":27658274,"reputation":9,"user_id":21111687,"display_name":"Dan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1091,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77001901,"answer_count":1,"score":1,"last_activity_date":1693327819,"creation_date":1675371903,"question_id":75328934,"body_markdown":"I&#39;m upgrading a Gradle 7.5 project that uses Spring Boot 2.7.5 and QueryDSL 5.0 from Java 8 to Java 17. The project was working before the upgrade, but afterword, it does not build because the final CompileJava execution logs a &quot;cannot find symbol&quot; error for all the Q class references in the code.\r\n\r\nI think these classes are either being stored differently or are not being generated.\r\n\r\nAlso, in case this helps, I&#39;m using VS Code as my IDE, but am running all my Gradle commands from a standard Windows command prompt.\r\n\r\nI&#39;ve looked at Stack Overflow and other sites for questions related to this. Unfortunately, though this question has been asked in various contexts, their answers did not work out for my context. Here are some places where I looked in case this helps others:\r\n\r\n - [https://stackoverflow.com/questions/45794079/query-dsl-q-type-classes-not-generated](https://stackoverflow.com/questions/45794079/query-dsl-q-type-classes-not-generated)\r\n- [https://stackoverflow.com/questions/52905768/java-querydsl-code-generation-does-not-generate-q-class](https://stackoverflow.com/questions/52905768/java-querydsl-code-generation-does-not-generate-q-class)\r\n- [https://stackoverflow.com/questions/54134455/java-11-querydsl-4-gradle-5-springboot-2-1-not-generating-qclasses](https://stackoverflow.com/questions/54134455/java-11-querydsl-4-gradle-5-springboot-2-1-not-generating-qclasses)\r\n- [https://groups.google.com/g/querydsl/c/riZl9NMFbEw](https://groups.google.com/g/querydsl/c/riZl9NMFbEw)\r\n\r\nHere&#39;s my build.gradle. Please note that this was working when I had &#39;sourceCompatability = 1.8&quot; and haden&#39;t started using the toolchain notation or even Java 17, yet. Also know that I did not create this file from scratch, but am editing one that someone else started.\r\n\r\nAdditionally, it&#39;s the &quot;compileJava&quot; command in the &quot;bootRun&quot; task that is failing (the main task to &#39;run&#39; the app is &quot;MyAppRun&quot;. It, in turn executes &quot;preCompile&quot;, &quot;generateJPA&quot;, &quot;generateQueryDSL&quot;, and &quot;bootRun&quot; in that order). I expect something needs to change in the &quot;generateQueryDSL&quot; task.\r\n\r\nI&#39;m very new to Gradle and QueryDSL and would appreciate any advice.\r\n\r\nThanks in advance!\r\n\r\n\r\n```\r\nplugins {\r\n\tid &#39;org.springframework.boot&#39; version &#39;2.7.5&#39;\r\n\t// id &#39;net.ltgt.apt&#39; version &#39;0.18&#39;\r\n\tid &#39;java&#39;\r\n}\r\n\r\napply plugin: &#39;io.spring.dependency-management&#39;\r\n\r\ngroup = &#39;com.mydomain&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\n\r\njava {\r\n    toolchain {\r\n        languageVersion = JavaLanguageVersion.of(17)\r\n    }\r\n}\r\n\r\n// sourceCompatibility = &#39;17.0.6&#39;\r\n\r\nrepositories {\r\n\tmavenLocal()\r\n\tmavenCentral()\r\n\tmaven { url &#39;https://repo.spring.io/snapshot&#39; }\r\n\tmaven { url &#39;https://repo.spring.io/milestone&#39; }\r\n}\r\n\r\nconfigurations {\r\n    hibernatetool\r\n\tquerydslapt\r\n}\r\n\r\nconfigurations.implementation.canBeResolved = true\r\n\r\nsourceSets {\r\n    main {\r\n        java {\r\n            srcDirs = [&#39;src/main/java&#39;]\r\n        }\r\n    }\r\n\r\n    generated {\r\n        java {\r\n            srcDir &quot;$projectDir/generated/java&quot;\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-rest&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-jersey&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n  \timplementation &#39;org.springframework.security:spring-security-config:5.6.8&#39;\r\n  \timplementation &#39;org.springframework.security:spring-security-core:5.6.8&#39;\r\n  \timplementation &#39;org.springframework.security:spring-security-oauth2-resource-server:5.6.8&#39;\r\n\timplementation &#39;org.springframework.security:spring-security-oauth2-jose:5.6.8&#39;\r\n\truntimeOnly group: &#39;com.nimbusds&#39;, name: &#39;oauth2-oidc-sdk&#39;, version: &#39;6.23&#39;\r\n    implementation &#39;org.hibernate:hibernate-core:5.6.12.Final&#39;\r\n\timplementation &#39;org.hibernate:hibernate-tools:5.6.2.Final&#39;\r\n    implementation &#39;org.springframework.data:spring-data-rest-hal-explorer&#39;\r\n  \timplementation group: &#39;org.apache.commons&#39;, name: &#39;commons-lang3&#39;, version: &#39;3.3.2&#39;\r\n\timplementation group: &#39;org.json&#39;, name: &#39;json&#39;, version: &#39;20200518&#39;\r\n\truntimeOnly &#39;org.postgresql:postgresql&#39;\r\n\ttestImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;) {\r\n\t\texclude group: &#39;org.junit.vintage&#39;, module: &#39;junit-vintage-engine&#39;\r\n\t\texclude group: &#39;junit&#39;, module: &#39;junit&#39;\r\n\t}\r\n\r\n    hibernatetool group:&#39;org.hibernate&#39;, name:&#39;hibernate-core&#39;, version:&#39;5.6.12.Final&#39;\r\n    hibernatetool group:&#39;org.hibernate&#39;, name:&#39;hibernate-tools&#39;, version:&#39;5.6.2.Final&#39;\r\n    hibernatetool group:&#39;org.hibernate&#39;, name:&#39;hibernate-entitymanager&#39;, version:&#39;5.6.12.Final&#39;\r\n    hibernatetool group:&#39;org.postgresql&#39;, name:&#39;postgresql&#39;\r\n\r\n    implementation(&quot;com.querydsl:querydsl-core:5.0.0&quot;)\r\n    implementation(&quot;com.querydsl:querydsl-jpa:5.0.0&quot;)\r\n\timplementation(&#39;com.google.guava:guava:31.1-jre&#39;)\r\n\timplementation(&#39;com.google.code.findbugs:jsr305:3.0.2&#39;)\r\n    annotationProcessor(&quot;com.querydsl:querydsl-apt:5.0.0:jpa&quot;)\r\n\tannotationProcessor(&#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;)\r\n\tannotationProcessor(&#39;org.springframework.boot:spring-boot-starter-data-rest&#39;)\r\n    annotationProcessor(&#39;javax.persistence:javax.persistence-api:2.2&#39;)\r\n    annotationProcessor(&#39;javax.annotation:javax.annotation-api:1.3.2&#39;)\r\n\timplementation fileTree(include: [&#39;*.jar&#39;], dir: &#39;./libs&#39;)\r\n\r\n\t/* annotationProcessor     &#39;com.querydsl:querydsl-apt:4.2.1:jpa&#39;\r\n    annotationProcessor     &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39; // needed because the query dsl annotation processor doesn&#39;t recognize javax.persistence.Entity\r\n    compile                 &#39;com.querydsl:querydsl-jpa:4.2.1&#39;*/\r\n\t\r\n}\r\n\r\nspringBoot {\r\n\tif (project.hasProperty(&#39;import&#39;)) {\r\n\t\tmainClass = &#39;com.mydomain.MyAppservices.ImportApplication&#39;\r\n\t} else {\r\n\t\tmainClass = &#39;com.mydomain.MyAppservices.MyAppApplication&#39;\r\n\t}\r\n}\r\n\r\nbootRun {\r\n\tif (project.hasProperty(&#39;import&#39;)) {\r\n        args project.import\r\n    }\r\n\r\n    compileJava {\r\n\t\toptions.compilerArgs &lt;&lt; &quot;-proc:none&quot;\r\n\t}\r\n}\r\n\r\ntask preCompile (type: JavaCompile) {\r\n    source = sourceSets.main.java.srcDirs\r\n    include &#39;com/mydomain/MyAppservices/config/MyAppReverseEngineeringStrategy.java&#39;\r\n    classpath = configurations.implementation\r\n    destinationDirectory = file(&quot;build/classes/java/main&quot;)\r\n}\r\n\r\ntask generateJPA  {\r\n\tgroup &#39;MyApp&#39;\r\n\tdescription &#39;Generate JPA Entities&#39;\r\n\tdoLast{\r\n\t\tdelete &#39;src/main/java/com/mydomain/MyAppservices/model&#39;, &#39;*&#39;\r\n\t\tdelete fileTree(&#39;src/main/java/com/mydomain/MyAppservices/views&#39;) { include &#39;Q*&#39; }\r\n\t\tant {\r\n\t\t\ttaskdef(name: &#39;hibernateTool&#39;,\r\n    \t\t\tclassname: &#39;org.hibernate.tool.ant.HibernateToolTask&#39;,\r\n    \t\t\tclasspath: configurations.hibernatetool.asPath)\r\n    \t\thibernateTool { \r\n    \t\t\tjdbcconfiguration(propertyFile: &#39;resources/hibernate.reveng.properties&#39;,\r\n\t\t\t\t\t\t\t\tdetectmanytomany: &#39;true&#39;,\r\n\t\t\t\t\t\t\t\treversestrategy: &#39;com.mydomain.MyAppservices.config.MyAppReverseEngineeringStrategy&#39;,\r\n\t\t\t\t\t\t\t\tpackagename: &#39;com.mydomain.MyAppservices.model&#39;,\r\n\t\t\t\t\t\t\t\trevengfile: &#39;resources/hibernate.reveng.xml&#39;)\r\n    \t\t\thbm2java(destdir: &#39;src/main/java&#39;, ejb3: &#39;true&#39;, jdk5: &#39;true&#39;)\r\n\t\t\t\tclasspath { \r\n        \t\t\tpathElement(path: &quot;build/classes/java/main&quot;)\r\n      \t\t\t}\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\ntask generateQueryDSL (type: JavaCompile) {\r\n\tgroup &#39;MyApp&#39;\r\n\tdescription &quot;Generate QueryDSL classes&quot;\r\n    options.compilerArgs &lt;&lt; &quot;-s&quot;\r\n    options.compilerArgs &lt;&lt; &quot;src/main/java/&quot;\r\n\toptions.compilerArgs &lt;&lt; &quot;-proc:only&quot;\r\n\toptions.compilerArgs &lt;&lt; &#39;-processor&#39;\r\n\toptions.compilerArgs &lt;&lt; &#39;com.querydsl.apt.jpa.JPAAnnotationProcessor&#39;\r\n\toptions.annotationProcessorPath = configurations.annotationProcessor\r\n    source = sourceSets.main.java.srcDirs\r\n    classpath = configurations.implementation + configurations.annotationProcessor\r\n    destinationDirectory = file(&quot;build/classes/java/main&quot;)\r\n}\r\n\r\ngenerateJPA.dependsOn preCompile\r\ngenerateQueryDSL.dependsOn generateJPA\r\n\r\ntask generate {\r\n\tgroup &#39;MyApp&#39;\r\n\tdescription &quot;Generate all JPAs and QueryDSL classes&quot;\r\n\tdependsOn generateQueryDSL\r\n}\r\n\r\ntask MyAppRun {\r\n\tdependsOn bootRun\r\n\tdependsOn generate\r\n    tasks.findByName(&#39;bootRun&#39;).mustRunAfter &#39;generate&#39;\r\n}\r\n\r\ntask cleanGenerated {\r\n\tdoLast{\r\n\t\tdelete &#39;src/main/java/com/mydomain/MyAppservices/model&#39;, &#39;*&#39;\r\n\t}\r\n}\r\n\r\n```\r\n\r\n","title":"QueryDSL Q Classes Not Generating after Java 17 Upgrade","body":"<p>I'm upgrading a Gradle 7.5 project that uses Spring Boot 2.7.5 and QueryDSL 5.0 from Java 8 to Java 17. The project was working before the upgrade, but afterword, it does not build because the final CompileJava execution logs a &quot;cannot find symbol&quot; error for all the Q class references in the code.</p>\n<p>I think these classes are either being stored differently or are not being generated.</p>\n<p>Also, in case this helps, I'm using VS Code as my IDE, but am running all my Gradle commands from a standard Windows command prompt.</p>\n<p>I've looked at Stack Overflow and other sites for questions related to this. Unfortunately, though this question has been asked in various contexts, their answers did not work out for my context. Here are some places where I looked in case this helps others:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/45794079/query-dsl-q-type-classes-not-generated\">Query DSL Q type classes not generated</a></li>\n<li><a href=\"https://stackoverflow.com/questions/52905768/java-querydsl-code-generation-does-not-generate-q-class\">Java QueryDsl code generation does not generate Q class</a></li>\n<li><a href=\"https://stackoverflow.com/questions/54134455/java-11-querydsl-4-gradle-5-springboot-2-1-not-generating-qclasses\">Java 11 + QueryDSL 4 + Gradle 5 + SpringBoot 2.1- not generating QClasses</a></li>\n<li><a href=\"https://groups.google.com/g/querydsl/c/riZl9NMFbEw\" rel=\"nofollow noreferrer\">https://groups.google.com/g/querydsl/c/riZl9NMFbEw</a></li>\n</ul>\n<p>Here's my build.gradle. Please note that this was working when I had 'sourceCompatability = 1.8&quot; and haden't started using the toolchain notation or even Java 17, yet. Also know that I did not create this file from scratch, but am editing one that someone else started.</p>\n<p>Additionally, it's the &quot;compileJava&quot; command in the &quot;bootRun&quot; task that is failing (the main task to 'run' the app is &quot;MyAppRun&quot;. It, in turn executes &quot;preCompile&quot;, &quot;generateJPA&quot;, &quot;generateQueryDSL&quot;, and &quot;bootRun&quot; in that order). I expect something needs to change in the &quot;generateQueryDSL&quot; task.</p>\n<p>I'm very new to Gradle and QueryDSL and would appreciate any advice.</p>\n<p>Thanks in advance!</p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.7.5'\n    // id 'net.ltgt.apt' version '0.18'\n    id 'java'\n}\n\napply plugin: 'io.spring.dependency-management'\n\ngroup = 'com.mydomain'\nversion = '0.0.1-SNAPSHOT'\n\njava {\n    toolchain {\n        languageVersion = JavaLanguageVersion.of(17)\n    }\n}\n\n// sourceCompatibility = '17.0.6'\n\nrepositories {\n    mavenLocal()\n    mavenCentral()\n    maven { url 'https://repo.spring.io/snapshot' }\n    maven { url 'https://repo.spring.io/milestone' }\n}\n\nconfigurations {\n    hibernatetool\n    querydslapt\n}\n\nconfigurations.implementation.canBeResolved = true\n\nsourceSets {\n    main {\n        java {\n            srcDirs = ['src/main/java']\n        }\n    }\n\n    generated {\n        java {\n            srcDir &quot;$projectDir/generated/java&quot;\n        }\n    }\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-data-rest'\n    implementation 'org.springframework.boot:spring-boot-starter-jersey'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n    implementation 'org.springframework.security:spring-security-config:5.6.8'\n    implementation 'org.springframework.security:spring-security-core:5.6.8'\n    implementation 'org.springframework.security:spring-security-oauth2-resource-server:5.6.8'\n    implementation 'org.springframework.security:spring-security-oauth2-jose:5.6.8'\n    runtimeOnly group: 'com.nimbusds', name: 'oauth2-oidc-sdk', version: '6.23'\n    implementation 'org.hibernate:hibernate-core:5.6.12.Final'\n    implementation 'org.hibernate:hibernate-tools:5.6.2.Final'\n    implementation 'org.springframework.data:spring-data-rest-hal-explorer'\n    implementation group: 'org.apache.commons', name: 'commons-lang3', version: '3.3.2'\n    implementation group: 'org.json', name: 'json', version: '20200518'\n    runtimeOnly 'org.postgresql:postgresql'\n    testImplementation('org.springframework.boot:spring-boot-starter-test') {\n        exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'\n        exclude group: 'junit', module: 'junit'\n    }\n\n    hibernatetool group:'org.hibernate', name:'hibernate-core', version:'5.6.12.Final'\n    hibernatetool group:'org.hibernate', name:'hibernate-tools', version:'5.6.2.Final'\n    hibernatetool group:'org.hibernate', name:'hibernate-entitymanager', version:'5.6.12.Final'\n    hibernatetool group:'org.postgresql', name:'postgresql'\n\n    implementation(&quot;com.querydsl:querydsl-core:5.0.0&quot;)\n    implementation(&quot;com.querydsl:querydsl-jpa:5.0.0&quot;)\n    implementation('com.google.guava:guava:31.1-jre')\n    implementation('com.google.code.findbugs:jsr305:3.0.2')\n    annotationProcessor(&quot;com.querydsl:querydsl-apt:5.0.0:jpa&quot;)\n    annotationProcessor('org.springframework.boot:spring-boot-starter-data-jpa')\n    annotationProcessor('org.springframework.boot:spring-boot-starter-data-rest')\n    annotationProcessor('javax.persistence:javax.persistence-api:2.2')\n    annotationProcessor('javax.annotation:javax.annotation-api:1.3.2')\n    implementation fileTree(include: ['*.jar'], dir: './libs')\n\n    /* annotationProcessor     'com.querydsl:querydsl-apt:4.2.1:jpa'\n    annotationProcessor     'org.springframework.boot:spring-boot-starter-data-jpa' // needed because the query dsl annotation processor doesn't recognize javax.persistence.Entity\n    compile                 'com.querydsl:querydsl-jpa:4.2.1'*/\n    \n}\n\nspringBoot {\n    if (project.hasProperty('import')) {\n        mainClass = 'com.mydomain.MyAppservices.ImportApplication'\n    } else {\n        mainClass = 'com.mydomain.MyAppservices.MyAppApplication'\n    }\n}\n\nbootRun {\n    if (project.hasProperty('import')) {\n        args project.import\n    }\n\n    compileJava {\n        options.compilerArgs &lt;&lt; &quot;-proc:none&quot;\n    }\n}\n\ntask preCompile (type: JavaCompile) {\n    source = sourceSets.main.java.srcDirs\n    include 'com/mydomain/MyAppservices/config/MyAppReverseEngineeringStrategy.java'\n    classpath = configurations.implementation\n    destinationDirectory = file(&quot;build/classes/java/main&quot;)\n}\n\ntask generateJPA  {\n    group 'MyApp'\n    description 'Generate JPA Entities'\n    doLast{\n        delete 'src/main/java/com/mydomain/MyAppservices/model', '*'\n        delete fileTree('src/main/java/com/mydomain/MyAppservices/views') { include 'Q*' }\n        ant {\n            taskdef(name: 'hibernateTool',\n                classname: 'org.hibernate.tool.ant.HibernateToolTask',\n                classpath: configurations.hibernatetool.asPath)\n            hibernateTool { \n                jdbcconfiguration(propertyFile: 'resources/hibernate.reveng.properties',\n                                detectmanytomany: 'true',\n                                reversestrategy: 'com.mydomain.MyAppservices.config.MyAppReverseEngineeringStrategy',\n                                packagename: 'com.mydomain.MyAppservices.model',\n                                revengfile: 'resources/hibernate.reveng.xml')\n                hbm2java(destdir: 'src/main/java', ejb3: 'true', jdk5: 'true')\n                classpath { \n                    pathElement(path: &quot;build/classes/java/main&quot;)\n                }   \n            }\n        }\n    }\n}\n\ntask generateQueryDSL (type: JavaCompile) {\n    group 'MyApp'\n    description &quot;Generate QueryDSL classes&quot;\n    options.compilerArgs &lt;&lt; &quot;-s&quot;\n    options.compilerArgs &lt;&lt; &quot;src/main/java/&quot;\n    options.compilerArgs &lt;&lt; &quot;-proc:only&quot;\n    options.compilerArgs &lt;&lt; '-processor'\n    options.compilerArgs &lt;&lt; 'com.querydsl.apt.jpa.JPAAnnotationProcessor'\n    options.annotationProcessorPath = configurations.annotationProcessor\n    source = sourceSets.main.java.srcDirs\n    classpath = configurations.implementation + configurations.annotationProcessor\n    destinationDirectory = file(&quot;build/classes/java/main&quot;)\n}\n\ngenerateJPA.dependsOn preCompile\ngenerateQueryDSL.dependsOn generateJPA\n\ntask generate {\n    group 'MyApp'\n    description &quot;Generate all JPAs and QueryDSL classes&quot;\n    dependsOn generateQueryDSL\n}\n\ntask MyAppRun {\n    dependsOn bootRun\n    dependsOn generate\n    tasks.findByName('bootRun').mustRunAfter 'generate'\n}\n\ntask cleanGenerated {\n    doLast{\n        delete 'src/main/java/com/mydomain/MyAppservices/model', '*'\n    }\n}\n\n</code></pre>\n"},{"tags":["java","spring-boot","jpa","transactions"],"answers":[{"tags":[],"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693327648,"creation_date":1693327648,"answer_id":77002174,"question_id":76997668,"body_markdown":"Check out locking. In particular, optimistic locking. When used with application logic that checks the version value, optimistic locking can ensure that no one changes the data out from under the application after it has been read in - so the application will get an OptmisticLockException when it occurs. \r\n\r\nIe:\r\n\r\n    @Entity\r\n    public class Employee {\r\n      @Version\r\n      @Column(name=&quot;VERSION&quot;)\r\n      int version;\r\n      ...\r\n    }\r\n\r\nYour Post api then needs to check that the version value hasn&#39;t changed since you last read it - JPA should do this for you if you merge in a detached instance back into the context, but you might have to be careful if you read in the entity and perform the merge yourself.\r\n\r\nSee https://wiki.eclipse.org/EclipseLink/Examples/JPA/Locking for a brief explanation, and there are many tutorials to explain it better.","title":"Sprintboot transaction - How to make sure all threads read latest data","body":"<p>Check out locking. In particular, optimistic locking. When used with application logic that checks the version value, optimistic locking can ensure that no one changes the data out from under the application after it has been read in - so the application will get an OptmisticLockException when it occurs.</p>\n<p>Ie:</p>\n<pre><code>@Entity\npublic class Employee {\n  @Version\n  @Column(name=&quot;VERSION&quot;)\n  int version;\n  ...\n}\n</code></pre>\n<p>Your Post api then needs to check that the version value hasn't changed since you last read it - JPA should do this for you if you merge in a detached instance back into the context, but you might have to be careful if you read in the entity and perform the merge yourself.</p>\n<p>See <a href=\"https://wiki.eclipse.org/EclipseLink/Examples/JPA/Locking\" rel=\"nofollow noreferrer\">https://wiki.eclipse.org/EclipseLink/Examples/JPA/Locking</a> for a brief explanation, and there are many tutorials to explain it better.</p>\n"}],"owner":{"account_id":20237879,"reputation":47,"user_id":14842499,"display_name":"sachin p"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693327648,"creation_date":1693288811,"question_id":76997668,"body_markdown":"I am creating a sprintboot Java application that has following entity &lt;br/&gt;\r\n\r\n``` \r\nEmployee - Entity with following fields\r\nid\r\nstatus // valid values FREE,BUSY\r\nage\r\n```\r\nI have added an API `POST /doTask` which should change the status of the Employee as `BUSY` from `FREE`. The catch here is that Employee takes some time to complete the task and till that time they should not accept any new task. Basically Employee can only do one task at a time.&lt;br/&gt;\r\nHow do I make sure that when multiple threads all calling `POST /doTask` API, only one manages to assign task and rest all other Requests are given message that Employee is busy ?\r\n\r\n&lt;br/&gt;\r\nI know I can use `@Transactional` annotation, but not sure it works as I am expecting it to. ie. Only one request should be able to update status as `BUSY` and rest all should be able to read this status immediately.\r\n\r\nThanks\r\n","title":"Sprintboot transaction - How to make sure all threads read latest data","body":"<p>I am creating a sprintboot Java application that has following entity <br/></p>\n<pre><code>Employee - Entity with following fields\nid\nstatus // valid values FREE,BUSY\nage\n</code></pre>\n<p>I have added an API <code>POST /doTask</code> which should change the status of the Employee as <code>BUSY</code> from <code>FREE</code>. The catch here is that Employee takes some time to complete the task and till that time they should not accept any new task. Basically Employee can only do one task at a time.<br/>\nHow do I make sure that when multiple threads all calling <code>POST /doTask</code> API, only one manages to assign task and rest all other Requests are given message that Employee is busy ?</p>\n<br/>\nI know I can use `@Transactional` annotation, but not sure it works as I am expecting it to. ie. Only one request should be able to update status as `BUSY` and rest all should be able to read this status immediately.\n<p>Thanks</p>\n"},{"tags":["java","intellij-idea","minecraft","minecraft-fabric"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1693218316,"post_id":76991950,"comment_id":135726539,"body_markdown":"did you bother to read the stacktrace you link to? java.lang.NoClassDefFoundError: net/minecraft/client/MinecraftClient","body":"did you bother to read the stacktrace you link to? java.lang.NoClassDefFoundError: net/minecraft/client/MinecraftClient"},{"owner":{"account_id":23682617,"reputation":17,"user_id":17707980,"display_name":"MARIUCHINAS"},"score":0,"creation_date":1693224954,"post_id":76991950,"comment_id":135727778,"body_markdown":"@Stultuske so how do i even fix that","body":"@Stultuske so how do i even fix that"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1693225337,"post_id":76991950,"comment_id":135727856,"body_markdown":"by putting that class on the classpath","body":"by putting that class on the classpath"},{"owner":{"account_id":23682617,"reputation":17,"user_id":17707980,"display_name":"MARIUCHINAS"},"score":0,"creation_date":1693227800,"post_id":76991950,"comment_id":135728425,"body_markdown":"@Stultuske it is on the classpath i just decompiled Minecraft client and at the top it says package net.minecraft.client;","body":"@Stultuske it is on the classpath i just decompiled Minecraft client and at the top it says package net.minecraft.client;"},{"owner":{"account_id":23682617,"reputation":17,"user_id":17707980,"display_name":"MARIUCHINAS"},"score":0,"creation_date":1693228083,"post_id":76991950,"comment_id":135728486,"body_markdown":"@Stultuske and the function for getting the instance does exist because i found this in the decompiled code: `public static net.minecraft.client.MinecraftClient getInstance()`","body":"@Stultuske and the function for getting the instance does exist because i found this in the decompiled code: <code>public static net.minecraft.client.MinecraftClient getInstance()</code>"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1693231281,"post_id":76991950,"comment_id":135729266,"body_markdown":"if it was on the classpath, you wouldn&#39;t get that error. Maybe there &#39;s a problem in conflicting versions, or it&#39;s in a different scope, but you don&#39;t provide nearly sufficient information to deduct that from","body":"if it was on the classpath, you wouldn&#39;t get that error. Maybe there &#39;s a problem in conflicting versions, or it&#39;s in a different scope, but you don&#39;t provide nearly sufficient information to deduct that from"},{"owner":{"account_id":23682617,"reputation":17,"user_id":17707980,"display_name":"MARIUCHINAS"},"score":0,"creation_date":1693236588,"post_id":76991950,"comment_id":135730582,"body_markdown":"@Stultuske please tell me what i need to provide i really want to fix this","body":"@Stultuske please tell me what i need to provide i really want to fix this"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1693291012,"post_id":76991950,"comment_id":135737401,"body_markdown":"I have no idea, as I said: you don&#39;t provide nearly sufficient information. let&#39;s start with: What is the structure of your project? are you using a DMS (Dependency Management System)?","body":"I have no idea, as I said: you don&#39;t provide nearly sufficient information. let&#39;s start with: What is the structure of your project? are you using a DMS (Dependency Management System)?"}],"answers":[{"tags":[],"owner":{"account_id":10061714,"reputation":428,"user_id":7438147,"display_name":"Krzysztof Sroga"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693327179,"creation_date":1693327179,"answer_id":77002119,"question_id":76991950,"body_markdown":"It looks like you&#39;re developing a server mod. \r\nI assume the entry point to your mod is either `ServerModInitializer` (or less likely `ModInitializer`) and not `ClientModInitializer`.\r\n\r\nIf you run the mod on the server, the classes `MinecraftClient` as well as `ClientWorld` do not exist hence runtime error. In order to get the list of the players, you need to use server equivalents of these classes. The equivalent to your code would look like that: \r\n\r\n```java\r\nprivate void listPlayers(MinecraftServer minecraftServer) {\r\n    // Get the world\r\n    ServerWorld serverWorld = minecraftServer.getWorld(World.OVERWORLD);\r\n\r\n    // Check if the world is available\r\n    if (serverWorld != null) {\r\n        // Get the list of players\r\n        List&lt;ServerPlayerEntity&gt; players = serverWorld.getPlayers();\r\n\r\n        // Iterate over the players and do something with their names\r\n        for (ServerPlayerEntity player : players) {\r\n            String playerName = player.getEntityName();\r\n            // Do something with the player name\r\n            System.out.println(playerName);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nYou need to pass an instance of `MinecraftServer` class to that method. I assume you&#39;re already getting it somewhere. In case you don&#39;t, you can look at this answer: https://stackoverflow.com/a/71059107/7438147","title":"Why does minecraft crash when getting the Instance?","body":"<p>It looks like you're developing a server mod.\nI assume the entry point to your mod is either <code>ServerModInitializer</code> (or less likely <code>ModInitializer</code>) and not <code>ClientModInitializer</code>.</p>\n<p>If you run the mod on the server, the classes <code>MinecraftClient</code> as well as <code>ClientWorld</code> do not exist hence runtime error. In order to get the list of the players, you need to use server equivalents of these classes. The equivalent to your code would look like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void listPlayers(MinecraftServer minecraftServer) {\n    // Get the world\n    ServerWorld serverWorld = minecraftServer.getWorld(World.OVERWORLD);\n\n    // Check if the world is available\n    if (serverWorld != null) {\n        // Get the list of players\n        List&lt;ServerPlayerEntity&gt; players = serverWorld.getPlayers();\n\n        // Iterate over the players and do something with their names\n        for (ServerPlayerEntity player : players) {\n            String playerName = player.getEntityName();\n            // Do something with the player name\n            System.out.println(playerName);\n        }\n    }\n}\n</code></pre>\n<p>You need to pass an instance of <code>MinecraftServer</code> class to that method. I assume you're already getting it somewhere. In case you don't, you can look at this answer: <a href=\"https://stackoverflow.com/a/71059107/7438147\">https://stackoverflow.com/a/71059107/7438147</a></p>\n"}],"owner":{"account_id":23682617,"reputation":17,"user_id":17707980,"display_name":"MARIUCHINAS"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1693327179,"creation_date":1693218160,"question_id":76991950,"body_markdown":"My fabric minecraft client based utility mod crashed the game when it hits this line \r\n\r\n`MinecraftClient minecraftClient = MinecraftClient.getInstance();` This is line 21 by the way\r\n\r\nHere is the crash report link: https://mclo.gs/QVOqz5G\r\n\r\nAnd here is the full code in case the getInstance part is not whats causing the error \r\n\r\n    package net.mariuchinas.dorts.commands;\r\n    \r\n    import com.mojang.brigadier.builder.LiteralArgumentBuilder;\r\n    import meteordevelopment.meteorclient.commands.Command;\r\n    import net.minecraft.client.network.AbstractClientPlayerEntity;\r\n    import net.minecraft.command.CommandSource;\r\n    import net.minecraft.client.MinecraftClient;\r\n    import net.minecraft.client.network.ClientPlayerEntity;\r\n    import net.minecraft.client.world.ClientWorld;\r\n    import java.util.List;\r\n    \r\n    public class GetPlayersCommand extends Command {\r\n        public GetPlayersCommand() {\r\n            super(&quot;getplayers&quot;, &quot;Sends a list of all the players on the server&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void build(LiteralArgumentBuilder&lt;CommandSource&gt; builder) {\r\n            builder.executes(context -&gt; {\r\n                // Get the client instance and the current world\r\n                MinecraftClient minecraftClient = MinecraftClient.getInstance();\r\n                ClientWorld clientWorld = minecraftClient.world;\r\n    \r\n                // Check if the world and client player are available\r\n                if (clientWorld != null &amp;&amp; minecraftClient.player != null) {\r\n                    // Get the list of players\r\n                    List&lt;AbstractClientPlayerEntity&gt; players = clientWorld.getPlayers();\r\n    \r\n                    // Iterate over the players and do something with their names\r\n                    for (AbstractClientPlayerEntity player : players) {\r\n                        String playerName = player.getEntityName();\r\n                        // Do something with the player name\r\n                        System.out.println(playerName);\r\n                    }\r\n                }\r\n                return 0;\r\n            });\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nA detailed walkthrough of the error, its code path and all known details is as follows:\r\n---------------------------------------------------------------------------------------\r\n\r\n    -- Head --\r\n    Thread: Render thread\r\n    Stacktrace:\r\n    \tat net.mariuchinas.dorts.commands.GetPlayersCommand.lambda$build$0(GetPlayersCommand.java:21)\r\n    \tat com.mojang.brigadier.CommandDispatcher.execute(CommandDispatcher.java:263)\r\n    \tat com.mojang.brigadier.CommandDispatcher.execute(CommandDispatcher.java:177)\r\n    \tat com.mojang.brigadier.CommandDispatcher.execute(CommandDispatcher.java:142)\r\n    \tat meteordevelopment.meteorclient.commands.Commands.dispatch(Commands.java:75)\r\n    \tat net.minecraft.class_634.handler$zmj000$meteor-client$onSendChatMessage(class_634.java:5826)\r\n    \tat net.minecraft.class_634.method_45729(class_634.java)\r\n    \tat net.minecraft.class_408.method_44056(class_408.java:250)\r\n    \tat net.minecraft.class_408.method_25404(class_408.java:102)\r\n    \tat net.minecraft.class_309.method_1454(class_309.java:394)\r\n    \tat net.minecraft.class_437.method_25412(class_437.java:540)\r\n    \tat net.minecraft.class_309.method_1466(class_309.java:390)\r\n    \tat net.minecraft.class_309.method_22678(class_309.java:478)\r\n    \tat net.minecraft.class_1255.execute(class_1255.java:102)\r\n    \tat net.minecraft.class_309.method_22676(class_309.java:478)\r\n    \tat org.lwjgl.glfw.GLFWKeyCallbackI.callback(GLFWKeyCallbackI.java:44)\r\n    \tat org.lwjgl.system.JNI.invokeV(Native Method)\r\n    \tat org.lwjgl.glfw.GLFW.glfwPollEvents(GLFW.java:3403)\r\n    \tat com.mojang.blaze3d.systems.RenderSystem.pollEvents(RenderSystem.java:198)\r\n    \tat com.mojang.blaze3d.systems.RenderSystem.flipFrame(RenderSystem.java:209)\r\n    \r\n    -- Affected screen --\r\n    Details:\r\n    \tScreen name: net.minecraft.class_408\r\n    Stacktrace:\r\n    \tat net.minecraft.class_437.method_25412(class_437.java:540)\r\n    \tat net.minecraft.class_309.method_1466(class_309.java:390)\r\n    \tat net.minecraft.class_309.method_22678(class_309.java:478)\r\n    \tat net.minecraft.class_1255.execute(class_1255.java:102)\r\n    \tat net.minecraft.class_309.method_22676(class_309.java:478)\r\n    \tat org.lwjgl.glfw.GLFWKeyCallbackI.callback(GLFWKeyCallbackI.java:44)\r\n    \tat org.lwjgl.system.JNI.invokeV(Native Method)\r\n    \tat org.lwjgl.glfw.GLFW.glfwPollEvents(GLFW.java:3403)\r\n    \tat com.mojang.blaze3d.systems.RenderSystem.pollEvents(RenderSystem.java:198)\r\n    \tat com.mojang.blaze3d.systems.RenderSystem.flipFrame(RenderSystem.java:209)\r\n    \tat net.minecraft.class_1041.method_15998(class_1041.java:310)\r\n    \tat net.minecraft.class_310.method_1523(class_310.java:1238)\r\n    \tat net.minecraft.class_310.method_1514(class_310.java:801)\r\n    \tat net.minecraft.client.main.Main.main(Main.java:237)\r\n    \tat net.fabricmc.loader.impl.game.minecraft.MinecraftGameProvider.launch(MinecraftGameProvider.java:468)\r\n    \tat net.fabricmc.loader.impl.launch.knot.Knot.launch(Knot.java:74)\r\n    \tat net.fabricmc.loader.impl.launch.knot.KnotClient.main(KnotClient.java:23)\r\n    \r\n    -- Affected level --\r\n    Details:\r\n    \tAll players: 35 total; [class_746[&#39;MARIUCHINAS&#39;/87477, l=&#39;ClientLevel&#39;, x=4.46, y=91.00, z=-3.78], class_745[&#39;alessandrobrodiz&#39;/85566, l=&#39;ClientLevel&#39;, x=3.94, y=90.00, z=1.88], class_745[&#39;1Spider1&#39;/86609, l=&#39;ClientLevel&#39;, x=-15.47, y=90.00, z=4.59], class_745[&#39;smith451&#39;/76890, l=&#39;ClientLevel&#39;, x=0.50, y=90.00, z=4.50], class_745[&#39;&#167;r&#39;/202, l=&#39;ClientLevel&#39;, x=7.50, y=90.00, z=1.50], class_745[&#39;Petermh&#39;/66889, l=&#39;ClientLevel&#39;, x=0.50, y=90.00, z=4.50], class_745[&#39;Lolman_PL&#39;/87424, l=&#39;ClientLevel&#39;, x=-1.06, y=87.02, z=-5.30], class_745[&#39;CalypsoAlt3&#39;/73697, l=&#39;ClientLevel&#39;, x=0.50, y=90.00, z=4.50], class_745[&#39;Duk1&#39;/87009, l=&#39;ClientLevel&#39;, x=0.50, y=90.00, z=4.50], class_745[&#39;QuFox&#39;/178, l=&#39;ClientLevel&#39;, x=3.66, y=111.50, z=17.97], class_745[&#39;&#167;rBotervrij&#39;/181, l=&#39;ClientLevel&#39;, x=3.63, y=111.50, z=24.00], class_745[&#39;&#167;rJustThiemo&#39;/184, l=&#39;ClientLevel&#39;, x=3.47, y=111.50, z=20.97], class_745[&#39;&#167;rvoodootje0&#39;/187, l=&#39;ClientLevel&#39;, x=0.50, y=111.50, z=26.50], class_745[&#39;Andeh&#39;/175, l=&#39;ClientLevel&#39;, x=-2.47, y=111.50, z=23.94], class_745[&#39;&#167;rGunfire&#39;/190, l=&#39;ClientLevel&#39;, x=-2.50, y=111.50, z=20.97], class_745[&#39;Rodagave115&#39;/212, l=&#39;ClientLevel&#39;, x=-2.72, y=111.50, z=18.00], class_745[&#39;poseidonzubrik&#39;/85794, l=&#39;ClientLevel&#39;, x=-4.69, y=90.94, z=-0.20], class_745[&#39;&#167;r&#39;/193, l=&#39;ClientLevel&#39;, x=0.50, y=93.06, z=36.47], class_745[&#39;Nirahz&#39;/205, l=&#39;ClientLevel&#39;, x=-27.75, y=90.00, z=1.16], class_745[&#39;stupxd&#39;/215, l=&#39;ClientLevel&#39;, x=-31.66, y=90.00, z=0.97], class_745[&#39;dbstalion&#39;/86741, l=&#39;ClientLevel&#39;, x=-6.38, y=85.00, z=-28.94], class_745[&#39;&#167;r&#39;/199, l=&#39;ClientLevel&#39;, x=2.59, y=87.00, z=-16.41], class_745[&#39;monarchrules&#39;/85882, l=&#39;ClientLevel&#39;, x=3.97, y=86.17, z=-26.51], class_745[&#39;epic6539&#39;/85854, l=&#39;ClientLevel&#39;, x=19.86, y=85.91, z=-22.76], class_745[&#39;QDucktator&#39;/85786, l=&#39;ClientLevel&#39;, x=-23.75, y=85.00, z=-37.69], class_745[&#39;v7u9tcfs&#39;/93956, l=&#39;ClientLevel&#39;, x=-9.50, y=90.00, z=1.50], class_745[&#39;EinEchterGulli&#39;/87573, l=&#39;ClientLevel&#39;, x=-0.88, y=87.00, z=-7.91], class_745[&#39;nylof&#39;/87681, l=&#39;ClientLevel&#39;, x=0.50, y=90.00, z=4.50], class_745[&#39;sagla&#39;/87709, l=&#39;ClientLevel&#39;, x=0.44, y=90.00, z=2.84], class_745[&#39;&#167;r&#39;/148, l=&#39;ClientLevel&#39;, x=18.53, y=87.00, z=-47.59], class_745[&#39;&#167;r&#39;/172, l=&#39;ClientLevel&#39;, x=-17.53, y=87.00, z=-47.53], class_745[&#39;&#167;r&#39;/151, l=&#39;ClientLevel&#39;, x=14.50, y=87.00, z=-49.56], class_745[&#39;&#167;r&#39;/154, l=&#39;ClientLevel&#39;, x=10.56, y=87.00, z=-51.53], class_745[&#39;&#167;r&#39;/166, l=&#39;ClientLevel&#39;, x=-9.53, y=87.00, z=-51.44], class_745[&#39;&#167;r&#39;/169, l=&#39;ClientLevel&#39;, x=-13.56, y=87.00, z=-49.50]]\r\n    \tChunk stats: 18225, 361\r\n    \tLevel dimension: minecraft:overworld\r\n    \tLevel spawn location: World: (0,90,0), Section: (at 0,10,0 in 0,5,0; chunk contains blocks 0,0,0 to 15,255,15), Region: (0,0; contains chunks 0,0 to 31,31, blocks 0,0,0 to 511,255,511)\r\n    \tLevel time: 1177223165 game time, 47424000 day time\r\n    \tServer brand: PaperSpigot (Velocity)\r\n    \tServer type: Non-integrated multiplayer server\r\n    Stacktrace:\r\n    \tat net.minecraft.class_638.method_8538(class_638.java:455)\r\n    \tat net.minecraft.class_310.method_1587(class_310.java:2406)\r\n    \tat net.minecraft.class_310.method_1514(class_310.java:820)\r\n    \tat net.minecraft.client.main.Main.main(Main.java:237)\r\n    \tat net.fabricmc.loader.impl.game.minecraft.MinecraftGameProvider.launch(MinecraftGameProvider.java:468)\r\n    \tat net.fabricmc.loader.impl.launch.knot.Knot.launch(Knot.java:74)\r\n    \tat net.fabricmc.loader.impl.launch.knot.KnotClient.main(KnotClient.java:23)\r\n    \r\n    -- Last reload --\r\n    Details:\r\n    \tReload number: 1\r\n    \tReload reason: initial\r\n    \tFinished: Yes\r\n    \tPacks: vanilla, fabric\r\n    \r\n    -- System Details --\r\n    Details:\r\n    \tMinecraft Version: 1.19.4\r\n    \tMinecraft Version ID: 1.19.4\r\n    \tOperating System: Windows 10 (amd64) version 10.0\r\n    \tJava Version: 17.0.3, Microsoft\r\n    \tJava VM Version: OpenJDK 64-Bit Server VM (mixed mode), Microsoft\r\n    \tMemory: 551676232 bytes (526 MiB) / 1056964608 bytes (1008 MiB) up to 3959422976 bytes (3776 MiB)\r\n    \tCPUs: 12\r\n    \tProcessor Vendor: AuthenticAMD\r\n    \tProcessor Name: AMD Ryzen 5 4600H with Radeon Graphics         \r\n    \tIdentifier: AuthenticAMD Family 23 Model 96 Stepping 1\r\n    \tMicroarchitecture: unknown\r\n    \tFrequency (GHz): 2.99\r\n    \tNumber of physical packages: 1\r\n    \tNumber of physical CPUs: 6\r\n    \tNumber of logical CPUs: 12\r\n    \tGraphics card #0 name: NVIDIA GeForce GTX 1650\r\n    \tGraphics card #0 vendor: NVIDIA (0x10de)\r\n    \tGraphics card #0 VRAM (MB): 4095.00\r\n    \tGraphics card #0 deviceId: 0x1f99\r\n    \tGraphics card #0 versionInfo: DriverVersion=31.0.15.3118\r\n    \tGraphics card #1 name: AMD Radeon(TM) Graphics\r\n    \tGraphics card #1 vendor: Advanced Micro Devices, Inc. (0x1002)\r\n    \tGraphics card #1 VRAM (MB): 512.00\r\n    \tGraphics card #1 deviceId: 0x1636\r\n    \tGraphics card #1 versionInfo: DriverVersion=27.20.15002.11002\r\n    \tMemory slot #0 capacity (MB): 4096.00\r\n    \tMemory slot #0 clockSpeed (GHz): 3.20\r\n    \tMemory slot #0 type: DDR4\r\n    \tMemory slot #1 capacity (MB): 4096.00\r\n    \tMemory slot #1 clockSpeed (GHz): 3.20\r\n    \tMemory slot #1 type: DDR4\r\n    \tVirtual memory max (MB): 22389.06\r\n    \tVirtual memory used (MB): 15744.68\r\n    \tSwap memory total (MB): 14848.00\r\n    \tSwap memory used (MB): 2071.96\r\n    \tJVM Flags: 8 total; -XX: UnlockExperimentalVMOptions -XX: UseG1GC -XX:G1NewSizePercent=20 -XX:G1ReservePercent=20 -XX:MaxGCPauseMillis=50 -XX:G1HeapRegionSize=16M -Xmx3770m -XX:HeapDumpPath=MojangTricksIntelDriversForPerformance_javaw.exe_minecraft.exe.heapdump\r\n    \tFabric Mods: \r\n    \t\taddon-template: Dorts 0.1.0\r\n    \t\tfabric-api: Fabric API 0.83.0 1.19.4\r\n    \t\t\tfabric-api-base: Fabric API Base 0.4.27 1e9487d2f4\r\n    \t\t\tfabric-api-lookup-api-v1: Fabric API Lookup API (v1) 1.6.28 504944c8f4\r\n    \t\t\tfabric-biome-api-v1: Fabric Biome API (v1) 13.0.9 10ce000ff4\r\n    \t\t\tfabric-block-api-v1: Fabric Block API (v1) 1.0.8 e022e5d1f4\r\n    \t\t\tfabric-blockrenderlayer-v1: Fabric BlockRenderLayer Registration (v1) 1.1.37 10ce000ff4\r\n    \t\t\tfabric-client-tags-api-v1: Fabric Client Tags 1.0.18 10ce000ff4\r\n    \t\t\tfabric-command-api-v1: Fabric Command API (v1) 1.2.30 f71b366ff4\r\n    \t\t\tfabric-command-api-v2: Fabric Command API (v2) 2.2.9 10ce000ff4\r\n    \t\t\tfabric-commands-v0: Fabric Commands (v0) 0.2.47 df3654b3f4\r\n    \t\t\tfabric-containers-v0: Fabric Containers (v0) 0.1.57 df3654b3f4\r\n    \t\t\tfabric-content-registries-v0: Fabric Content Registries (v0) 3.5.12 10ce000ff4\r\n    \t\t\tfabric-convention-tags-v1: Fabric Convention Tags 1.5.2 10ce000ff4\r\n    \t\t\tfabric-crash-report-info-v1: Fabric Crash Report Info (v1) 0.2.17 aeb40ebef4\r\n    \t\t\tfabric-data-generation-api-v1: Fabric Data Generation API (v1) 11.4.3 10ce000ff4\r\n    \t\t\tfabric-dimensions-v1: Fabric Dimensions API (v1) 2.1.48 10ce000ff4\r\n    \t\t\tfabric-entity-events-v1: Fabric Entity Events (v1) 1.5.16 10ce000ff4\r\n    \t\t\tfabric-events-interaction-v0: Fabric Events Interaction (v0) 0.6.0 10ce000ff4\r\n    \t\t\tfabric-events-lifecycle-v0: Fabric Events Lifecycle (v0) 0.2.55 df3654b3f4\r\n    \t\t\tfabric-game-rule-api-v1: Fabric Game Rule API (v1) 1.0.35 a1ccd7bff4\r\n    \t\t\tfabric-item-api-v1: Fabric Item API (v1) 2.1.20 10ce000ff4\r\n    \t\t\tfabric-item-group-api-v1: Fabric Item Group API (v1) 3.0.8 10ce000ff4\r\n    \t\t\tfabric-key-binding-api-v1: Fabric Key Binding API (v1) 1.0.35 504944c8f4\r\n    \t\t\tfabric-keybindings-v0: Fabric Key Bindings (v0) 0.2.33 df3654b3f4\r\n    \t\t\tfabric-lifecycle-events-v1: Fabric Lifecycle Events (v1) 2.2.18 10ce000ff4\r\n    \t\t\tfabric-loot-api-v2: Fabric Loot API (v2) 1.1.30 10ce000ff4\r\n    \t\t\tfabric-loot-tables-v1: Fabric Loot Tables (v1) 1.1.34 9e7660c6f4\r\n    \t\t\tfabric-message-api-v1: Fabric Message API (v1) 5.1.4 10ce000ff4\r\n    \t\t\tfabric-mining-level-api-v1: Fabric Mining Level API (v1) 2.1.42 10ce000ff4\r\n    \t\t\tfabric-models-v0: Fabric Models (v0) 0.3.33 10ce000ff4\r\n    \t\t\tfabric-networking-api-v1: Fabric Networking API (v1) 1.3.4 10ce000ff4\r\n    \t\t\tfabric-networking-v0: Fabric Networking (v0) 0.3.44 df3654b3f4\r\n    \t\t\tfabric-object-builder-api-v1: Fabric Object Builder API (v1) 7.0.6 10ce000ff4\r\n    \t\t\tfabric-particles-v1: Fabric Particles (v1) 1.0.26 10ce000ff4\r\n    \t\t\tfabric-recipe-api-v1: Fabric Recipe API (v1) 1.0.11 10ce000ff4\r\n    \t\t\tfabric-registry-sync-v0: Fabric Registry Sync (v0) 2.2.3 10ce000ff4\r\n    \t\t\tfabric-renderer-api-v1: Fabric Renderer API (v1) 2.3.1 10ce000ff4\r\n    \t\t\tfabric-renderer-indigo: Fabric Renderer - Indigo 1.3.1 10ce000ff4\r\n    \t\t\tfabric-renderer-registries-v1: Fabric Renderer Registries (v1) 3.2.41 df3654b3f4\r\n    \t\t\tfabric-rendering-data-attachment-v1: Fabric Rendering Data Attachment (v1) 0.3.31 10ce000ff4\r\n    \t\t\tfabric-rendering-fluids-v1: Fabric Rendering Fluids (v1) 3.0.24 10ce000ff4\r\n    \t\t\tfabric-rendering-v0: Fabric Rendering (v0) 1.1.44 df3654b3f4\r\n    \t\t\tfabric-rendering-v1: Fabric Rendering (v1) 2.1.4 10ce000ff4\r\n    \t\t\tfabric-resource-conditions-api-v1: Fabric Resource Conditions API (v1) 2.3.3 10ce000ff4\r\n    \t\t\tfabric-resource-loader-v0: Fabric Resource Loader (v0) 0.11.5 5ade3c38f4\r\n    \t\t\tfabric-screen-api-v1: Fabric Screen API (v1) 1.0.48 10ce000ff4\r\n    \t\t\tfabric-screen-handler-api-v1: Fabric Screen Handler API (v1) 1.3.23 10ce000ff4\r\n    \t\t\tfabric-sound-api-v1: Fabric Sound API (v1) 1.0.11 10ce000ff4\r\n    \t\t\tfabric-transfer-api-v1: Fabric Transfer API (v1) 3.2.1 10ce000ff4\r\n    \t\t\tfabric-transitive-access-wideners-v1: Fabric Transitive Access Wideners (v1) 3.2.0 10ce000ff4\r\n    \t\tfabricloader: Fabric Loader 0.14.21\r\n    \t\tjava: OpenJDK 64-Bit Server VM 17\r\n    \t\tmeteor-client: Meteor Client 0.5.3\r\n    \t\t\tbaritone-meteor: Baritone 1.19.4-SNAPSHOT\r\n    \t\tmeteor-rejects: Meteor Rejects 0.2\r\n    \t\t\tseedcrackerx-api: SeedCrackerX API 2.10.1\r\n    \t\tminecraft: Minecraft 1.19.4\r\n    \t\tseedcrackerx: SeedCrackerX 2.14.2\r\n    \t\t\tcloth-config: Cloth Config v10 10.0.96\r\n    \t\t\t\tcloth-basic-math: cloth-basic-math 0.6.1\r\n    \t\t\tcom_seedfinding_latticg: latticg 1.6\r\n    \t\t\tcom_seedfinding_mc_biome: mc_biome b2271807a047bb43ac60c8c20ad47e315f19b9a6\r\n    \t\t\tcom_seedfinding_mc_core: mc_core d685a37f0a466d4bf800e7f285daf9ef73c81678\r\n    \t\t\tcom_seedfinding_mc_feature: mc_feature c29fd1fcd746e14c1bcdb127da3113ba273db1fd\r\n    \t\t\tcom_seedfinding_mc_math: mc_math 0eb505174da8a92550f8ec6efe254e0fa936cc0d\r\n    \t\t\tcom_seedfinding_mc_noise: mc_noise a6ab8e6c688491829f8d2adf845392da22ef8e9c\r\n    \t\t\tcom_seedfinding_mc_reversal: mc_reversal ca64c0890c106f1a2207623c316fce86f250b918\r\n    \t\t\tcom_seedfinding_mc_seed: mc_seed 5518e3ba3ee567fb0b51c15958967f70a6a19e02\r\n    \t\t\tcom_seedfinding_mc_terrain: mc_terrain 9e937ddb838e28e79423c287fa18b1ce66f061d7\r\n    \t\tuiutils: UI Utils 1.2.2\r\n    \tLaunched Version: fabric-loader-0.14.21-1.19.4\r\n    \tBackend library: LWJGL version 3.3.1 SNAPSHOT\r\n    \tBackend API: AMD Radeon(TM) Graphics GL version 3.2.148201 Core Profile Forward-Compatible Context **.**.**.** 27.20.15002.11002, ATI Technologies Inc.\r\n    \tWindow size: 1920x1080\r\n    \tGL Caps: Using framebuffer using OpenGL 3.2\r\n    \tGL debug messages: \r\n    \tUsing VBOs: Yes\r\n    \tIs Modded: Definitely; Client brand changed to &#39;fabric&#39;\r\n    \tType: Client (map_client.txt)\r\n    \tGraphics mode: fancy\r\n    \tResource Packs: vanilla, fabric\r\n    \tCurrent Language: en_gb\r\n    \tCPU: 12x AMD Ryzen 5 4600H with Radeon Graphics \r\n    `\r\n\r\n\r\n\r\n\r\n","title":"Why does minecraft crash when getting the Instance?","body":"<p>My fabric minecraft client based utility mod crashed the game when it hits this line</p>\n<p><code>MinecraftClient minecraftClient = MinecraftClient.getInstance();</code> This is line 21 by the way</p>\n<p>Here is the crash report link: <a href=\"https://mclo.gs/QVOqz5G\" rel=\"nofollow noreferrer\">https://mclo.gs/QVOqz5G</a></p>\n<p>And here is the full code in case the getInstance part is not whats causing the error</p>\n<pre><code>package net.mariuchinas.dorts.commands;\n\nimport com.mojang.brigadier.builder.LiteralArgumentBuilder;\nimport meteordevelopment.meteorclient.commands.Command;\nimport net.minecraft.client.network.AbstractClientPlayerEntity;\nimport net.minecraft.command.CommandSource;\nimport net.minecraft.client.MinecraftClient;\nimport net.minecraft.client.network.ClientPlayerEntity;\nimport net.minecraft.client.world.ClientWorld;\nimport java.util.List;\n\npublic class GetPlayersCommand extends Command {\n    public GetPlayersCommand() {\n        super(&quot;getplayers&quot;, &quot;Sends a list of all the players on the server&quot;);\n    }\n\n    @Override\n    public void build(LiteralArgumentBuilder&lt;CommandSource&gt; builder) {\n        builder.executes(context -&gt; {\n            // Get the client instance and the current world\n            MinecraftClient minecraftClient = MinecraftClient.getInstance();\n            ClientWorld clientWorld = minecraftClient.world;\n\n            // Check if the world and client player are available\n            if (clientWorld != null &amp;&amp; minecraftClient.player != null) {\n                // Get the list of players\n                List&lt;AbstractClientPlayerEntity&gt; players = clientWorld.getPlayers();\n\n                // Iterate over the players and do something with their names\n                for (AbstractClientPlayerEntity player : players) {\n                    String playerName = player.getEntityName();\n                    // Do something with the player name\n                    System.out.println(playerName);\n                }\n            }\n            return 0;\n        });\n    }\n\n\n}\n</code></pre>\n<h2>A detailed walkthrough of the error, its code path and all known details is as follows:</h2>\n<pre><code>-- Head --\nThread: Render thread\nStacktrace:\n    at net.mariuchinas.dorts.commands.GetPlayersCommand.lambda$build$0(GetPlayersCommand.java:21)\n    at com.mojang.brigadier.CommandDispatcher.execute(CommandDispatcher.java:263)\n    at com.mojang.brigadier.CommandDispatcher.execute(CommandDispatcher.java:177)\n    at com.mojang.brigadier.CommandDispatcher.execute(CommandDispatcher.java:142)\n    at meteordevelopment.meteorclient.commands.Commands.dispatch(Commands.java:75)\n    at net.minecraft.class_634.handler$zmj000$meteor-client$onSendChatMessage(class_634.java:5826)\n    at net.minecraft.class_634.method_45729(class_634.java)\n    at net.minecraft.class_408.method_44056(class_408.java:250)\n    at net.minecraft.class_408.method_25404(class_408.java:102)\n    at net.minecraft.class_309.method_1454(class_309.java:394)\n    at net.minecraft.class_437.method_25412(class_437.java:540)\n    at net.minecraft.class_309.method_1466(class_309.java:390)\n    at net.minecraft.class_309.method_22678(class_309.java:478)\n    at net.minecraft.class_1255.execute(class_1255.java:102)\n    at net.minecraft.class_309.method_22676(class_309.java:478)\n    at org.lwjgl.glfw.GLFWKeyCallbackI.callback(GLFWKeyCallbackI.java:44)\n    at org.lwjgl.system.JNI.invokeV(Native Method)\n    at org.lwjgl.glfw.GLFW.glfwPollEvents(GLFW.java:3403)\n    at com.mojang.blaze3d.systems.RenderSystem.pollEvents(RenderSystem.java:198)\n    at com.mojang.blaze3d.systems.RenderSystem.flipFrame(RenderSystem.java:209)\n\n-- Affected screen --\nDetails:\n    Screen name: net.minecraft.class_408\nStacktrace:\n    at net.minecraft.class_437.method_25412(class_437.java:540)\n    at net.minecraft.class_309.method_1466(class_309.java:390)\n    at net.minecraft.class_309.method_22678(class_309.java:478)\n    at net.minecraft.class_1255.execute(class_1255.java:102)\n    at net.minecraft.class_309.method_22676(class_309.java:478)\n    at org.lwjgl.glfw.GLFWKeyCallbackI.callback(GLFWKeyCallbackI.java:44)\n    at org.lwjgl.system.JNI.invokeV(Native Method)\n    at org.lwjgl.glfw.GLFW.glfwPollEvents(GLFW.java:3403)\n    at com.mojang.blaze3d.systems.RenderSystem.pollEvents(RenderSystem.java:198)\n    at com.mojang.blaze3d.systems.RenderSystem.flipFrame(RenderSystem.java:209)\n    at net.minecraft.class_1041.method_15998(class_1041.java:310)\n    at net.minecraft.class_310.method_1523(class_310.java:1238)\n    at net.minecraft.class_310.method_1514(class_310.java:801)\n    at net.minecraft.client.main.Main.main(Main.java:237)\n    at net.fabricmc.loader.impl.game.minecraft.MinecraftGameProvider.launch(MinecraftGameProvider.java:468)\n    at net.fabricmc.loader.impl.launch.knot.Knot.launch(Knot.java:74)\n    at net.fabricmc.loader.impl.launch.knot.KnotClient.main(KnotClient.java:23)\n\n-- Affected level --\nDetails:\n    All players: 35 total; [class_746['MARIUCHINAS'/87477, l='ClientLevel', x=4.46, y=91.00, z=-3.78], class_745['alessandrobrodiz'/85566, l='ClientLevel', x=3.94, y=90.00, z=1.88], class_745['1Spider1'/86609, l='ClientLevel', x=-15.47, y=90.00, z=4.59], class_745['smith451'/76890, l='ClientLevel', x=0.50, y=90.00, z=4.50], class_745['§r'/202, l='ClientLevel', x=7.50, y=90.00, z=1.50], class_745['Petermh'/66889, l='ClientLevel', x=0.50, y=90.00, z=4.50], class_745['Lolman_PL'/87424, l='ClientLevel', x=-1.06, y=87.02, z=-5.30], class_745['CalypsoAlt3'/73697, l='ClientLevel', x=0.50, y=90.00, z=4.50], class_745['Duk1'/87009, l='ClientLevel', x=0.50, y=90.00, z=4.50], class_745['QuFox'/178, l='ClientLevel', x=3.66, y=111.50, z=17.97], class_745['§rBotervrij'/181, l='ClientLevel', x=3.63, y=111.50, z=24.00], class_745['§rJustThiemo'/184, l='ClientLevel', x=3.47, y=111.50, z=20.97], class_745['§rvoodootje0'/187, l='ClientLevel', x=0.50, y=111.50, z=26.50], class_745['Andeh'/175, l='ClientLevel', x=-2.47, y=111.50, z=23.94], class_745['§rGunfire'/190, l='ClientLevel', x=-2.50, y=111.50, z=20.97], class_745['Rodagave115'/212, l='ClientLevel', x=-2.72, y=111.50, z=18.00], class_745['poseidonzubrik'/85794, l='ClientLevel', x=-4.69, y=90.94, z=-0.20], class_745['§r'/193, l='ClientLevel', x=0.50, y=93.06, z=36.47], class_745['Nirahz'/205, l='ClientLevel', x=-27.75, y=90.00, z=1.16], class_745['stupxd'/215, l='ClientLevel', x=-31.66, y=90.00, z=0.97], class_745['dbstalion'/86741, l='ClientLevel', x=-6.38, y=85.00, z=-28.94], class_745['§r'/199, l='ClientLevel', x=2.59, y=87.00, z=-16.41], class_745['monarchrules'/85882, l='ClientLevel', x=3.97, y=86.17, z=-26.51], class_745['epic6539'/85854, l='ClientLevel', x=19.86, y=85.91, z=-22.76], class_745['QDucktator'/85786, l='ClientLevel', x=-23.75, y=85.00, z=-37.69], class_745['v7u9tcfs'/93956, l='ClientLevel', x=-9.50, y=90.00, z=1.50], class_745['EinEchterGulli'/87573, l='ClientLevel', x=-0.88, y=87.00, z=-7.91], class_745['nylof'/87681, l='ClientLevel', x=0.50, y=90.00, z=4.50], class_745['sagla'/87709, l='ClientLevel', x=0.44, y=90.00, z=2.84], class_745['§r'/148, l='ClientLevel', x=18.53, y=87.00, z=-47.59], class_745['§r'/172, l='ClientLevel', x=-17.53, y=87.00, z=-47.53], class_745['§r'/151, l='ClientLevel', x=14.50, y=87.00, z=-49.56], class_745['§r'/154, l='ClientLevel', x=10.56, y=87.00, z=-51.53], class_745['§r'/166, l='ClientLevel', x=-9.53, y=87.00, z=-51.44], class_745['§r'/169, l='ClientLevel', x=-13.56, y=87.00, z=-49.50]]\n    Chunk stats: 18225, 361\n    Level dimension: minecraft:overworld\n    Level spawn location: World: (0,90,0), Section: (at 0,10,0 in 0,5,0; chunk contains blocks 0,0,0 to 15,255,15), Region: (0,0; contains chunks 0,0 to 31,31, blocks 0,0,0 to 511,255,511)\n    Level time: 1177223165 game time, 47424000 day time\n    Server brand: PaperSpigot (Velocity)\n    Server type: Non-integrated multiplayer server\nStacktrace:\n    at net.minecraft.class_638.method_8538(class_638.java:455)\n    at net.minecraft.class_310.method_1587(class_310.java:2406)\n    at net.minecraft.class_310.method_1514(class_310.java:820)\n    at net.minecraft.client.main.Main.main(Main.java:237)\n    at net.fabricmc.loader.impl.game.minecraft.MinecraftGameProvider.launch(MinecraftGameProvider.java:468)\n    at net.fabricmc.loader.impl.launch.knot.Knot.launch(Knot.java:74)\n    at net.fabricmc.loader.impl.launch.knot.KnotClient.main(KnotClient.java:23)\n\n-- Last reload --\nDetails:\n    Reload number: 1\n    Reload reason: initial\n    Finished: Yes\n    Packs: vanilla, fabric\n\n-- System Details --\nDetails:\n    Minecraft Version: 1.19.4\n    Minecraft Version ID: 1.19.4\n    Operating System: Windows 10 (amd64) version 10.0\n    Java Version: 17.0.3, Microsoft\n    Java VM Version: OpenJDK 64-Bit Server VM (mixed mode), Microsoft\n    Memory: 551676232 bytes (526 MiB) / 1056964608 bytes (1008 MiB) up to 3959422976 bytes (3776 MiB)\n    CPUs: 12\n    Processor Vendor: AuthenticAMD\n    Processor Name: AMD Ryzen 5 4600H with Radeon Graphics         \n    Identifier: AuthenticAMD Family 23 Model 96 Stepping 1\n    Microarchitecture: unknown\n    Frequency (GHz): 2.99\n    Number of physical packages: 1\n    Number of physical CPUs: 6\n    Number of logical CPUs: 12\n    Graphics card #0 name: NVIDIA GeForce GTX 1650\n    Graphics card #0 vendor: NVIDIA (0x10de)\n    Graphics card #0 VRAM (MB): 4095.00\n    Graphics card #0 deviceId: 0x1f99\n    Graphics card #0 versionInfo: DriverVersion=31.0.15.3118\n    Graphics card #1 name: AMD Radeon(TM) Graphics\n    Graphics card #1 vendor: Advanced Micro Devices, Inc. (0x1002)\n    Graphics card #1 VRAM (MB): 512.00\n    Graphics card #1 deviceId: 0x1636\n    Graphics card #1 versionInfo: DriverVersion=27.20.15002.11002\n    Memory slot #0 capacity (MB): 4096.00\n    Memory slot #0 clockSpeed (GHz): 3.20\n    Memory slot #0 type: DDR4\n    Memory slot #1 capacity (MB): 4096.00\n    Memory slot #1 clockSpeed (GHz): 3.20\n    Memory slot #1 type: DDR4\n    Virtual memory max (MB): 22389.06\n    Virtual memory used (MB): 15744.68\n    Swap memory total (MB): 14848.00\n    Swap memory used (MB): 2071.96\n    JVM Flags: 8 total; -XX: UnlockExperimentalVMOptions -XX: UseG1GC -XX:G1NewSizePercent=20 -XX:G1ReservePercent=20 -XX:MaxGCPauseMillis=50 -XX:G1HeapRegionSize=16M -Xmx3770m -XX:HeapDumpPath=MojangTricksIntelDriversForPerformance_javaw.exe_minecraft.exe.heapdump\n    Fabric Mods: \n        addon-template: Dorts 0.1.0\n        fabric-api: Fabric API 0.83.0 1.19.4\n            fabric-api-base: Fabric API Base 0.4.27 1e9487d2f4\n            fabric-api-lookup-api-v1: Fabric API Lookup API (v1) 1.6.28 504944c8f4\n            fabric-biome-api-v1: Fabric Biome API (v1) 13.0.9 10ce000ff4\n            fabric-block-api-v1: Fabric Block API (v1) 1.0.8 e022e5d1f4\n            fabric-blockrenderlayer-v1: Fabric BlockRenderLayer Registration (v1) 1.1.37 10ce000ff4\n            fabric-client-tags-api-v1: Fabric Client Tags 1.0.18 10ce000ff4\n            fabric-command-api-v1: Fabric Command API (v1) 1.2.30 f71b366ff4\n            fabric-command-api-v2: Fabric Command API (v2) 2.2.9 10ce000ff4\n            fabric-commands-v0: Fabric Commands (v0) 0.2.47 df3654b3f4\n            fabric-containers-v0: Fabric Containers (v0) 0.1.57 df3654b3f4\n            fabric-content-registries-v0: Fabric Content Registries (v0) 3.5.12 10ce000ff4\n            fabric-convention-tags-v1: Fabric Convention Tags 1.5.2 10ce000ff4\n            fabric-crash-report-info-v1: Fabric Crash Report Info (v1) 0.2.17 aeb40ebef4\n            fabric-data-generation-api-v1: Fabric Data Generation API (v1) 11.4.3 10ce000ff4\n            fabric-dimensions-v1: Fabric Dimensions API (v1) 2.1.48 10ce000ff4\n            fabric-entity-events-v1: Fabric Entity Events (v1) 1.5.16 10ce000ff4\n            fabric-events-interaction-v0: Fabric Events Interaction (v0) 0.6.0 10ce000ff4\n            fabric-events-lifecycle-v0: Fabric Events Lifecycle (v0) 0.2.55 df3654b3f4\n            fabric-game-rule-api-v1: Fabric Game Rule API (v1) 1.0.35 a1ccd7bff4\n            fabric-item-api-v1: Fabric Item API (v1) 2.1.20 10ce000ff4\n            fabric-item-group-api-v1: Fabric Item Group API (v1) 3.0.8 10ce000ff4\n            fabric-key-binding-api-v1: Fabric Key Binding API (v1) 1.0.35 504944c8f4\n            fabric-keybindings-v0: Fabric Key Bindings (v0) 0.2.33 df3654b3f4\n            fabric-lifecycle-events-v1: Fabric Lifecycle Events (v1) 2.2.18 10ce000ff4\n            fabric-loot-api-v2: Fabric Loot API (v2) 1.1.30 10ce000ff4\n            fabric-loot-tables-v1: Fabric Loot Tables (v1) 1.1.34 9e7660c6f4\n            fabric-message-api-v1: Fabric Message API (v1) 5.1.4 10ce000ff4\n            fabric-mining-level-api-v1: Fabric Mining Level API (v1) 2.1.42 10ce000ff4\n            fabric-models-v0: Fabric Models (v0) 0.3.33 10ce000ff4\n            fabric-networking-api-v1: Fabric Networking API (v1) 1.3.4 10ce000ff4\n            fabric-networking-v0: Fabric Networking (v0) 0.3.44 df3654b3f4\n            fabric-object-builder-api-v1: Fabric Object Builder API (v1) 7.0.6 10ce000ff4\n            fabric-particles-v1: Fabric Particles (v1) 1.0.26 10ce000ff4\n            fabric-recipe-api-v1: Fabric Recipe API (v1) 1.0.11 10ce000ff4\n            fabric-registry-sync-v0: Fabric Registry Sync (v0) 2.2.3 10ce000ff4\n            fabric-renderer-api-v1: Fabric Renderer API (v1) 2.3.1 10ce000ff4\n            fabric-renderer-indigo: Fabric Renderer - Indigo 1.3.1 10ce000ff4\n            fabric-renderer-registries-v1: Fabric Renderer Registries (v1) 3.2.41 df3654b3f4\n            fabric-rendering-data-attachment-v1: Fabric Rendering Data Attachment (v1) 0.3.31 10ce000ff4\n            fabric-rendering-fluids-v1: Fabric Rendering Fluids (v1) 3.0.24 10ce000ff4\n            fabric-rendering-v0: Fabric Rendering (v0) 1.1.44 df3654b3f4\n            fabric-rendering-v1: Fabric Rendering (v1) 2.1.4 10ce000ff4\n            fabric-resource-conditions-api-v1: Fabric Resource Conditions API (v1) 2.3.3 10ce000ff4\n            fabric-resource-loader-v0: Fabric Resource Loader (v0) 0.11.5 5ade3c38f4\n            fabric-screen-api-v1: Fabric Screen API (v1) 1.0.48 10ce000ff4\n            fabric-screen-handler-api-v1: Fabric Screen Handler API (v1) 1.3.23 10ce000ff4\n            fabric-sound-api-v1: Fabric Sound API (v1) 1.0.11 10ce000ff4\n            fabric-transfer-api-v1: Fabric Transfer API (v1) 3.2.1 10ce000ff4\n            fabric-transitive-access-wideners-v1: Fabric Transitive Access Wideners (v1) 3.2.0 10ce000ff4\n        fabricloader: Fabric Loader 0.14.21\n        java: OpenJDK 64-Bit Server VM 17\n        meteor-client: Meteor Client 0.5.3\n            baritone-meteor: Baritone 1.19.4-SNAPSHOT\n        meteor-rejects: Meteor Rejects 0.2\n            seedcrackerx-api: SeedCrackerX API 2.10.1\n        minecraft: Minecraft 1.19.4\n        seedcrackerx: SeedCrackerX 2.14.2\n            cloth-config: Cloth Config v10 10.0.96\n                cloth-basic-math: cloth-basic-math 0.6.1\n            com_seedfinding_latticg: latticg 1.6\n            com_seedfinding_mc_biome: mc_biome b2271807a047bb43ac60c8c20ad47e315f19b9a6\n            com_seedfinding_mc_core: mc_core d685a37f0a466d4bf800e7f285daf9ef73c81678\n            com_seedfinding_mc_feature: mc_feature c29fd1fcd746e14c1bcdb127da3113ba273db1fd\n            com_seedfinding_mc_math: mc_math 0eb505174da8a92550f8ec6efe254e0fa936cc0d\n            com_seedfinding_mc_noise: mc_noise a6ab8e6c688491829f8d2adf845392da22ef8e9c\n            com_seedfinding_mc_reversal: mc_reversal ca64c0890c106f1a2207623c316fce86f250b918\n            com_seedfinding_mc_seed: mc_seed 5518e3ba3ee567fb0b51c15958967f70a6a19e02\n            com_seedfinding_mc_terrain: mc_terrain 9e937ddb838e28e79423c287fa18b1ce66f061d7\n        uiutils: UI Utils 1.2.2\n    Launched Version: fabric-loader-0.14.21-1.19.4\n    Backend library: LWJGL version 3.3.1 SNAPSHOT\n    Backend API: AMD Radeon(TM) Graphics GL version 3.2.148201 Core Profile Forward-Compatible Context **.**.**.** 27.20.15002.11002, ATI Technologies Inc.\n    Window size: 1920x1080\n    GL Caps: Using framebuffer using OpenGL 3.2\n    GL debug messages: \n    Using VBOs: Yes\n    Is Modded: Definitely; Client brand changed to 'fabric'\n    Type: Client (map_client.txt)\n    Graphics mode: fancy\n    Resource Packs: vanilla, fabric\n    Current Language: en_gb\n    CPU: 12x AMD Ryzen 5 4600H with Radeon Graphics \n`\n</code></pre>\n"},{"tags":["java","jackson"],"comments":[{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1693321289,"post_id":77001335,"comment_id":135743567,"body_markdown":"Pretty sure it caches information about the classes. e.g. what public methods it has, what fields it has. Because it has to use reflection to get that info, and reflection is &quot;slow&quot; (relatively speaking), the cache is used to speed that up. Not sure when, if ever, that cache is invalidated. It shouldn&#39;t be stateful in a way that&#39;s observable, unless you&#39;re doing something really weird like redefining classes at runtime.","body":"Pretty sure it caches information about the classes. e.g. what public methods it has, what fields it has. Because it has to use reflection to get that info, and reflection is &quot;slow&quot; (relatively speaking), the cache is used to speed that up. Not sure when, if ever, that cache is invalidated. It shouldn&#39;t be stateful in a way that&#39;s observable, unless you&#39;re doing something really weird like redefining classes at runtime."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1693321739,"post_id":77001335,"comment_id":135743691,"body_markdown":"So in practice, no, it doesn&#39;t have any relevant state. You can safely reuse `ObjectMapper` instances, even from different threads at the same time.","body":"So in practice, no, it doesn&#39;t have any relevant state. You can safely reuse <code>ObjectMapper</code> instances, even from different threads at the same time."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1693323153,"post_id":77001335,"comment_id":135744034,"body_markdown":"To quote from the [javadoc](https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.12.4/com/fasterxml/jackson/databind/ObjectMapper.html): _&quot;Mapper instances are fully thread-safe provided that ALL configuration of the instance occurs before ANY read or write calls.&quot;_","body":"To quote from the <a href=\"https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.12.4/com/fasterxml/jackson/databind/ObjectMapper.html\" rel=\"nofollow noreferrer\">javadoc</a>: <i>&quot;Mapper instances are fully thread-safe provided that ALL configuration of the instance occurs before ANY read or write calls.&quot;</i>"},{"owner":{"account_id":28949040,"reputation":53,"user_id":22174061,"display_name":"ash"},"score":0,"creation_date":1693323486,"post_id":77001335,"comment_id":135744116,"body_markdown":"@Michael write this an an ans and i&#39;ll accept","body":"@Michael write this an an ans and i&#39;ll accept"},{"owner":{"account_id":28949040,"reputation":53,"user_id":22174061,"display_name":"ash"},"score":0,"creation_date":1693323524,"post_id":77001335,"comment_id":135744123,"body_markdown":"@Jorn write this as an ans and i&#39;ll upvote. can only accept 1 ans","body":"@Jorn write this as an ans and i&#39;ll upvote. can only accept 1 ans"}],"answers":[{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":true,"score":-2,"last_activity_date":1693326737,"creation_date":1693326737,"answer_id":77002071,"question_id":77001335,"body_markdown":"`ObjectMapper` is Thread-safe so you can use the same instance in different places and in different threads and it will work fine. In fact, using the same instance is a good practice.\r\n\r\nBased on this fact I actually wrote a Json utility that provides static methods for serializing and de-serializing any arbitrary class instances to/from JSON. This utility is a thin wrapper over `ObjectMapper` class. Behind the scenes, I have a single instance of `ObjectMapper` class that is used for all the operations. This utility works well in multithreaded environments, which is the proof of my answer that you can safely use a single `ObjectMapper` instance in different places and different threads.\r\n\r\nIf you are interested you can check at my utility. Here is a [JsonUtils Javadoc][1]. It comes as part of the Open Source MgntUtils java library written and maintained by me. you can get it as [maven artifact][2] or from [Github][3] (including source code and Javadoc)\r\n\r\n\r\n  [1]: https://michaelgantman.github.io/Mgnt/docs/com/mgnt/utils/JsonUtils.html\r\n  [2]: https://search.maven.org/artifact/com.github.michaelgantman/MgntUtils\r\n  [3]: https://github.com/michaelgantman/Mgnt/releases","title":"does ObjectMapper retain any state info on the conversion it processes?","body":"<p><code>ObjectMapper</code> is Thread-safe so you can use the same instance in different places and in different threads and it will work fine. In fact, using the same instance is a good practice.</p>\n<p>Based on this fact I actually wrote a Json utility that provides static methods for serializing and de-serializing any arbitrary class instances to/from JSON. This utility is a thin wrapper over <code>ObjectMapper</code> class. Behind the scenes, I have a single instance of <code>ObjectMapper</code> class that is used for all the operations. This utility works well in multithreaded environments, which is the proof of my answer that you can safely use a single <code>ObjectMapper</code> instance in different places and different threads.</p>\n<p>If you are interested you can check at my utility. Here is a <a href=\"https://michaelgantman.github.io/Mgnt/docs/com/mgnt/utils/JsonUtils.html\" rel=\"nofollow noreferrer\">JsonUtils Javadoc</a>. It comes as part of the Open Source MgntUtils java library written and maintained by me. you can get it as <a href=\"https://search.maven.org/artifact/com.github.michaelgantman/MgntUtils\" rel=\"nofollow noreferrer\">maven artifact</a> or from <a href=\"https://github.com/michaelgantman/Mgnt/releases\" rel=\"nofollow noreferrer\">Github</a> (including source code and Javadoc)</p>\n"}],"owner":{"account_id":28949040,"reputation":53,"user_id":22174061,"display_name":"ash"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77002071,"answer_count":1,"score":0,"last_activity_date":1693326737,"creation_date":1693321105,"question_id":77001335,"body_markdown":"I&#39;m looking for verification/correction on the following -- just not to miss out\r\n\r\n`com.fasterxml.jackson.databind.ObjectMapper` doesn&#39;t retain any state after a mapping operation, especially upon calling its `.writeValueAsString(Object)`?\r\n\r\nI&#39;ll have one `ObjectMapper` used several places and on different types of objects in the code. I&#39;m wondering if there would be any trouble at all out of this.\r\n\r\n\r\n","title":"does ObjectMapper retain any state info on the conversion it processes?","body":"<p>I'm looking for verification/correction on the following -- just not to miss out</p>\n<p><code>com.fasterxml.jackson.databind.ObjectMapper</code> doesn't retain any state after a mapping operation, especially upon calling its <code>.writeValueAsString(Object)</code>?</p>\n<p>I'll have one <code>ObjectMapper</code> used several places and on different types of objects in the code. I'm wondering if there would be any trouble at all out of this.</p>\n"},{"tags":["java","android","java-native-interface",".so"],"comments":[{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1693296945,"post_id":76997375,"comment_id":135738502,"body_markdown":"You left out the build system that creates the shared library from your cpp file, everything else looks fine.","body":"You left out the build system that creates the shared library from your cpp file, everything else looks fine."},{"owner":{"account_id":19757645,"reputation":457,"user_id":14467573,"display_name":"Rohan Pande"},"score":0,"creation_date":1693308046,"post_id":76997375,"comment_id":135740522,"body_markdown":"I have multiple.cpp files of which we create multiple .a libraries and then we link it to a single .so file\n\nWhen I dumped the .a file I am able to see my native function symbol and it&#39;s present inside that \n\nBut when I dump the .so file I am not able to see my native function inside that file \n\nCommand used: &quot;nm -gDC yourlibname.so&quot; \n\nDuring linking libraries we use  &quot;target-link-library&quot; of CMake","body":"I have multiple.cpp files of which we create multiple .a libraries and then we link it to a single .so file  When I dumped the .a file I am able to see my native function symbol and it&#39;s present inside that   But when I dump the .so file I am not able to see my native function inside that file   Command used: &quot;nm -gDC yourlibname.so&quot;   During linking libraries we use  &quot;target-link-library&quot; of CMake"},{"owner":{"account_id":1654563,"reputation":57569,"user_id":1524450,"display_name":"Michael"},"score":0,"creation_date":1693313160,"post_id":76997375,"comment_id":135741652,"body_markdown":"Your C++ function is missing the two arguments (`JNIEnv*, jobject`). Is that what your actual code looks like?","body":"Your C++ function is missing the two arguments (<code>JNIEnv*, jobject</code>). Is that what your actual code looks like?"},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1693381662,"post_id":76997375,"comment_id":135751522,"body_markdown":"Voting to close as cannot reproduce, since there&#39;s no [mre] or information to go on.","body":"Voting to close as cannot reproduce, since there&#39;s no <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or information to go on."}],"owner":{"account_id":19757645,"reputation":457,"user_id":14467573,"display_name":"Rohan Pande"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":0,"score":6,"last_activity_date":1693325805,"creation_date":1693284653,"question_id":76997375,"body_markdown":"I generate a .so file during my build and add it in the right place inside &#39;jnilibs&#39; folder but I am facing an error stating &quot;Cannot find the native function implementation with Unsatisfied Link Error&quot; \r\n\r\n    // This is my .kt file\r\n\r\n    import abc.def.xyz\r\n\r\n    class MainActivity : Activity () {\r\n\r\n\tpublic external fun MyNativeFunction() : Boolean\r\n\r\n\t    override\r\n\t    fun onCreate (pSavedInstance : Bundle?) \r\n\t    {\r\n\t\t    super.onCreate (pSavedInstance)\r\n\t\t\r\n\t\t    // Calling my Native function\r\n\t\t\r\n\t\t    val check = MyNativeFunction ()\r\n\t    }\r\n    }\r\n\r\n\r\n    // This is my .cpp file\r\n\r\n    extern &quot;C&quot; JNIEXPORT jboolean JNICALL\r\n    Java_abc_def_xyz_MainActivity_MyNativeFunction () noexcept\r\n\r\n    {\r\n\r\n\t     // .... some code written here\r\n\r\n\t    return true;\r\n    }\r\n\r\nIt&#39;s not able to find the function&#39;s implementation &#39;MyNativefunction&#39;. Even the signature is correct but couldn&#39;t find where I am going wrong. \r\n\r\nWhen I tried to extract the symbols from my generated .so file I was not able to see the this function inside the .so file. Can somebody tell me where I am going wrong?\r\n\r\nHelp would be appreciated.\r\n\r\n\r\n\r\n\r\n\r\n  ","title":"In Android, I am not able to find few symbols inside my .so file?","body":"<p>I generate a .so file during my build and add it in the right place inside 'jnilibs' folder but I am facing an error stating &quot;Cannot find the native function implementation with Unsatisfied Link Error&quot;</p>\n<pre><code>// This is my .kt file\n\nimport abc.def.xyz\n\nclass MainActivity : Activity () {\n\npublic external fun MyNativeFunction() : Boolean\n\n    override\n    fun onCreate (pSavedInstance : Bundle?) \n    {\n        super.onCreate (pSavedInstance)\n    \n        // Calling my Native function\n    \n        val check = MyNativeFunction ()\n    }\n}\n\n\n// This is my .cpp file\n\nextern &quot;C&quot; JNIEXPORT jboolean JNICALL\nJava_abc_def_xyz_MainActivity_MyNativeFunction () noexcept\n\n{\n\n     // .... some code written here\n\n    return true;\n}\n</code></pre>\n<p>It's not able to find the function's implementation 'MyNativefunction'. Even the signature is correct but couldn't find where I am going wrong.</p>\n<p>When I tried to extract the symbols from my generated .so file I was not able to see the this function inside the .so file. Can somebody tell me where I am going wrong?</p>\n<p>Help would be appreciated.</p>\n"},{"tags":["java","oracle","scala","apache-spark"],"comments":[{"owner":{"account_id":177686,"reputation":35366,"user_id":409172,"accept_rate":50,"display_name":"Jon Heller"},"score":1,"creation_date":1693267540,"post_id":76996526,"comment_id":135735334,"body_markdown":"This doesn&#39;t sound like a database problem, since Oracle is more likely to hang on the first row than the last row. To confirm, run this query a few times: `select elapsed_time/1000000 seconds, gv$sql.* from gv$sql where users_executing &gt; 0 order by elapsed_time desc;` If the SECONDS keeps increasing, the database is the cause. If the SECONDS does not increase, the query is waiting for the client to request more rows. If you can&#39;t find your query at all, then the database has already closed the cursor and I&#39;m not sure why your application is still waiting.","body":"This doesn&#39;t sound like a database problem, since Oracle is more likely to hang on the first row than the last row. To confirm, run this query a few times: <code>select elapsed_time&#47;1000000 seconds, gv$sql.* from gv$sql where users_executing &gt; 0 order by elapsed_time desc;</code> If the SECONDS keeps increasing, the database is the cause. If the SECONDS does not increase, the query is waiting for the client to request more rows. If you can&#39;t find your query at all, then the database has already closed the cursor and I&#39;m not sure why your application is still waiting."},{"owner":{"account_id":26978029,"reputation":6997,"user_id":20542862,"display_name":"Paul W"},"score":1,"creation_date":1693274903,"post_id":76996526,"comment_id":135735980,"body_markdown":"Agree, almost certainly a client-issue. Next time it &quot;hangs&quot;, find your session in `v$session` and look at the `status` field. Does it say `INACTIVE`? You can also look at `event` and `state`.. if `state` = `WAITING` and `event` is  `SQL*Net message from client` , the database is not doing anything. It&#39;s waiting on your client. You&#39;d have to investigate on the client-side. Lastly, you can do a 10046 trace to see the calls the client is making and you can identify whether or not that last FETCH operation was ever made and if so whether `r=` (rows) is what you expect.","body":"Agree, almost certainly a client-issue. Next time it &quot;hangs&quot;, find your session in <code>v$session</code> and look at the <code>status</code> field. Does it say <code>INACTIVE</code>? You can also look at <code>event</code> and <code>state</code>.. if <code>state</code> = <code>WAITING</code> and <code>event</code> is  <code>SQL*Net message from client</code> , the database is not doing anything. It&#39;s waiting on your client. You&#39;d have to investigate on the client-side. Lastly, you can do a 10046 trace to see the calls the client is making and you can identify whether or not that last FETCH operation was ever made and if so whether <code>r=</code> (rows) is what you expect."},{"owner":{"account_id":1353687,"reputation":2465,"user_id":8385666,"display_name":"andnik"},"score":0,"creation_date":1693325589,"post_id":76996526,"comment_id":135744555,"body_markdown":"Thank you for help. I have figured out the problem and solution. Posted as answer.","body":"Thank you for help. I have figured out the problem and solution. Posted as answer."}],"answers":[{"tags":[],"owner":{"account_id":1353687,"reputation":2465,"user_id":8385666,"display_name":"andnik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693325499,"creation_date":1693325499,"answer_id":77001900,"question_id":76996526,"body_markdown":"I cannot explain very strange behaviour of the client driver library but I know the cause of my issue:\r\n\r\nOracle DB table SampleTable with column batch_id VARCHAR2(10).\r\n\r\nThe issue is reproduced when send a query with filter using numeric values. E.g.:\r\n```sql\r\nSELECT * FROM SampleTable WHERE batch_id = 10\r\n```\r\n\r\nSay there are 25 records, our fetch size is 10, we will receive 20 records and then the process just hangs.\r\n\r\nIf we would change request to use correct condition type string instead of number, then the problem disappears:\r\n```\r\nSELECT * FROM SampleTable WHERE batch_id = &#39;10&#39;\r\n```\r\n\r\nNow we are able to fetch all 25 records without any problem.\r\n\r\nHere is Scala sample code:\r\n```scala\r\npackage com.sample\r\n\r\nimport java.sql.Connection\r\nimport oracle.jdbc.pool.OracleDataSource\r\n\r\nobject App {\r\n  \r\n  def main(args : Array[String]) {\r\n    val query = &quot;SELECT * FROM SampleTable WHERE batch_id = &#39;10&#39;&quot;\r\n    // Failing query: &quot;SELECT * FROM SampleTable WHERE batch_id = 10&quot;\r\n\r\n    val ods = new OracleDataSource()\r\n    ods.setURL(&quot;jdbc:oracle:thin:@//{oracle_db_host}:{port}/{database}&quot;)\r\n    ods.setUser(&quot;username&quot;)\r\n    ods.setPassword(&quot;password&quot;)\r\n\r\n    val connection = ods.getConnection()\r\n    val statement = connection.createStatement()\r\n\r\n    statement.setFetchSize(10)\r\n\r\n    val resultSet : java.sql.ResultSet = statement.executeQuery(query)\r\n    resultSet.next()\r\n\r\n    var num = 0\r\n    do {\r\n      num += 1\r\n      println(&quot;Record number: &quot; + num)\r\n    } while (resultSet.next)\r\n  }\r\n}\r\n```\r\n\r\nBuilt with Maven dependecy:\r\n```xml\r\n&lt;dependency&gt;\r\n   &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n   &lt;artifactId&gt;ojdbc11&lt;/artifactId&gt;\r\n   &lt;version&gt;23.2.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Oracle DB hangs on last request from Spark and Java","body":"<p>I cannot explain very strange behaviour of the client driver library but I know the cause of my issue:</p>\n<p>Oracle DB table SampleTable with column batch_id VARCHAR2(10).</p>\n<p>The issue is reproduced when send a query with filter using numeric values. E.g.:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT * FROM SampleTable WHERE batch_id = 10\n</code></pre>\n<p>Say there are 25 records, our fetch size is 10, we will receive 20 records and then the process just hangs.</p>\n<p>If we would change request to use correct condition type string instead of number, then the problem disappears:</p>\n<pre><code>SELECT * FROM SampleTable WHERE batch_id = '10'\n</code></pre>\n<p>Now we are able to fetch all 25 records without any problem.</p>\n<p>Here is Scala sample code:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>package com.sample\n\nimport java.sql.Connection\nimport oracle.jdbc.pool.OracleDataSource\n\nobject App {\n  \n  def main(args : Array[String]) {\n    val query = &quot;SELECT * FROM SampleTable WHERE batch_id = '10'&quot;\n    // Failing query: &quot;SELECT * FROM SampleTable WHERE batch_id = 10&quot;\n\n    val ods = new OracleDataSource()\n    ods.setURL(&quot;jdbc:oracle:thin:@//{oracle_db_host}:{port}/{database}&quot;)\n    ods.setUser(&quot;username&quot;)\n    ods.setPassword(&quot;password&quot;)\n\n    val connection = ods.getConnection()\n    val statement = connection.createStatement()\n\n    statement.setFetchSize(10)\n\n    val resultSet : java.sql.ResultSet = statement.executeQuery(query)\n    resultSet.next()\n\n    var num = 0\n    do {\n      num += 1\n      println(&quot;Record number: &quot; + num)\n    } while (resultSet.next)\n  }\n}\n</code></pre>\n<p>Built with Maven dependecy:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n   &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n   &lt;artifactId&gt;ojdbc11&lt;/artifactId&gt;\n   &lt;version&gt;23.2.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":1353687,"reputation":2465,"user_id":8385666,"display_name":"andnik"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693325499,"creation_date":1693265600,"question_id":76996526,"body_markdown":"Please help, I&#39;m clueless.\r\n\r\nI use Spark with ojdbc8-12.2.0.1 driver to read data from Oracle.\r\n\r\nSet fetch size 5000.\r\nEverything works well until the very last moment to get that final batch of 5000 records and the process just hangs.\r\n\r\nI also tried to implement simple reader using Scala and ojdbc11:23.2.0.0 library.\r\n\r\nSame thing. No matter what fetch size I set, everything works well until that last piece of data where Oracle DB simply does not respond.\r\n\r\nExample: I query a subset of data that contains 499 records, I set fetch size 100, I receive first 400 records but last 99 records request just hangs without response.\r\n\r\nI tried to use Connection.setNetworkTimeout in Scala code to break connection if Oracle does not respond for last 10 seconds. Indeed, Oracle does not respond on the very last request.\r\n\r\nWhat can be the reason? ","title":"Oracle DB hangs on last request from Spark and Java","body":"<p>Please help, I'm clueless.</p>\n<p>I use Spark with ojdbc8-12.2.0.1 driver to read data from Oracle.</p>\n<p>Set fetch size 5000.\nEverything works well until the very last moment to get that final batch of 5000 records and the process just hangs.</p>\n<p>I also tried to implement simple reader using Scala and ojdbc11:23.2.0.0 library.</p>\n<p>Same thing. No matter what fetch size I set, everything works well until that last piece of data where Oracle DB simply does not respond.</p>\n<p>Example: I query a subset of data that contains 499 records, I set fetch size 100, I receive first 400 records but last 99 records request just hangs without response.</p>\n<p>I tried to use Connection.setNetworkTimeout in Scala code to break connection if Oracle does not respond for last 10 seconds. Indeed, Oracle does not respond on the very last request.</p>\n<p>What can be the reason?</p>\n"},{"tags":["java","swing","mouseevent","jbutton"],"comments":[{"owner":{"account_id":231365,"reputation":2941,"user_id":495558,"accept_rate":87,"display_name":"Genzer"},"score":0,"creation_date":1365086216,"post_id":15812915,"comment_id":22492667,"body_markdown":"Does your button has any `ActionListener`? You want the user click on the button and nothing happens or the user cannot click on the button?","body":"Does your button has any <code>ActionListener</code>? You want the user click on the button and nothing happens or the user cannot click on the button?"},{"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"score":0,"creation_date":1365087292,"post_id":15812915,"comment_id":22493425,"body_markdown":"do you want to consume() mouseevents only ???, but whats with events came from KeyBoard (Enter and Tab are implemented as accelerators)","body":"do you want to consume() mouseevents only ???, but whats with events came from KeyBoard (Enter and Tab are implemented as accelerators)"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1365088705,"post_id":15812915,"comment_id":22494333,"body_markdown":"no, that&#39;s definitely not what you should want: a well-behaved user interface must be equally well usable by keyboard _and_ mouse. What&#39;s your _real_ goal?","body":"no, that&#39;s definitely not what you should want: a well-behaved user interface must be equally well usable by keyboard <i>and</i> mouse. What&#39;s your <i>real</i> goal?"},{"owner":{"account_id":348145,"reputation":20859,"user_id":682662,"accept_rate":56,"display_name":"saplingPro"},"score":0,"creation_date":1365090770,"post_id":15812915,"comment_id":22495641,"body_markdown":"@Genzer cannot click the button","body":"@Genzer cannot click the button"},{"owner":{"account_id":348145,"reputation":20859,"user_id":682662,"accept_rate":56,"display_name":"saplingPro"},"score":0,"creation_date":1365090997,"post_id":15812915,"comment_id":22495761,"body_markdown":"@mKorbel there is no scope for that _(accelerators)_ . After the user clicks a button, he should not be able to click on anything.All other buttons be disabled","body":"@mKorbel there is no scope for that <i>(accelerators)</i> . After the user clicks a button, he should not be able to click on anything.All other buttons be disabled"},{"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"score":0,"creation_date":1365094066,"post_id":15812915,"comment_id":22497595,"body_markdown":"this info dramatically changed your request, please edit your question with all ideas","body":"this info dramatically changed your request, please edit your question with all ideas"}],"answers":[{"comments":[{"owner":{"account_id":2461139,"reputation":4729,"user_id":2145295,"display_name":"Jean Waghetti"},"score":4,"creation_date":1365083179,"post_id":15813069,"comment_id":22490558,"body_markdown":"Won&#39;t the button still receive the action event? I understand that he wants an `ActionListener`, but that do not listen to an action triggered by mouse.","body":"Won&#39;t the button still receive the action event? I understand that he wants an <code>ActionListener</code>, but that do not listen to an action triggered by mouse."},{"owner":{"account_id":348145,"reputation":20859,"user_id":682662,"accept_rate":56,"display_name":"saplingPro"},"score":0,"creation_date":1365083389,"post_id":15813069,"comment_id":22490718,"body_markdown":"I didn&#39;t understand you.Let us suppose there are 6 buttons and I press one of them. As I press it, I want to disable the mouse click on each of the buttons present there. How will adding an empty mouse listener help in that ? Even if I keep the mouse listener empty,I can still press the other buttons","body":"I didn&#39;t understand you.Let us suppose there are 6 buttons and I press one of them. As I press it, I want to disable the mouse click on each of the buttons present there. How will adding an empty mouse listener help in that ? Even if I keep the mouse listener empty,I can still press the other buttons"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1365088769,"post_id":15813069,"comment_id":22494377,"body_markdown":"hmm ... and why would you add that empty listener, to start with?","body":"hmm ... and why would you add that empty listener, to start with?"},{"owner":{"account_id":300331,"reputation":50767,"user_id":607407,"accept_rate":71,"display_name":"Tom&#225;š Zato"},"score":0,"creation_date":1451972766,"post_id":15813069,"comment_id":56955375,"body_markdown":"@kleopatra because that&#39;s what the answer says.","body":"@kleopatra because that&#39;s what the answer says."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1452080064,"post_id":15813069,"comment_id":57009261,"body_markdown":"@Tom&#225;šZato the answer is plain wrong - adding an empty listener of whatevertype has exactly no effect on listeners that are already registered - so I wanted to know how/why it might work ;-)","body":"@Tom&#225;šZato the answer is plain wrong - adding an empty listener of whatevertype has exactly no effect on listeners that are already registered - so I wanted to know how/why it might work ;-)"},{"owner":{"account_id":300331,"reputation":50767,"user_id":607407,"accept_rate":71,"display_name":"Tom&#225;š Zato"},"score":0,"creation_date":1452083056,"post_id":15813069,"comment_id":57010993,"body_markdown":"@kleopatra I thought you&#39;re talking to saplingPro, not AlexR. Because yes, the answer is wrong, but I wouldn&#39;t call anybody out for trying it, just to be sure. I did try it too actually before downvoting this answer.","body":"@kleopatra I thought you&#39;re talking to saplingPro, not AlexR. Because yes, the answer is wrong, but I wouldn&#39;t call anybody out for trying it, just to be sure. I did try it too actually before downvoting this answer."}],"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"comment_count":6,"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1365083069,"creation_date":1365083069,"answer_id":15813069,"question_id":15812915,"body_markdown":"Add empty mouse listener. This will &quot;disable&quot; the click because it will not have any effect. ","title":"How can I disable the mouse click on the button action event?","body":"<p>Add empty mouse listener. This will \"disable\" the click because it will not have any effect. </p>\n"},{"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1365088842,"post_id":15814803,"comment_id":22494425,"body_markdown":"there&#39;s already a type of ActionListener with a enabled property: it&#39;s called Action :-)","body":"there&#39;s already a type of ActionListener with a enabled property: it&#39;s called Action :-)"}],"tags":[],"owner":{"account_id":1759817,"reputation":204,"user_id":1607238,"accept_rate":83,"display_name":"Blakhar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1365087495,"creation_date":1365087495,"answer_id":15814803,"question_id":15812915,"body_markdown":"You can add an extended ActionListener to all the buttons like this:\r\n\r\n    public abstract class ExtendedActionListener implements ActionListener{\r\n\r\n        private static boolean disabled = false;\r\n\r\n        public static void setDisabled(boolean disabled){\r\n            ExtendedActionListener.disabled  = disabled;\r\n        }\r\n\r\n        @Override\r\n        public final void actionPerformed(ActionEvent e){\r\n    \r\n            if(disabled)\r\n                return;\r\n\r\n            doSomething;\r\n            \r\n        }\r\n    }\r\n\r\nAnd now just disable all the ActionListeners by calling the method `setDisabled(false)`. The Button visual behavior doesn&#39;t change at all, but nothing happens, when you click on it.\r\n\r\nIf the visual click behaviour doesn&#39;t matter, then you can just remove the MouseListeners.","title":"How can I disable the mouse click on the button action event?","body":"<p>You can add an extended ActionListener to all the buttons like this:</p>\n\n<pre><code>public abstract class ExtendedActionListener implements ActionListener{\n\n    private static boolean disabled = false;\n\n    public static void setDisabled(boolean disabled){\n        ExtendedActionListener.disabled  = disabled;\n    }\n\n    @Override\n    public final void actionPerformed(ActionEvent e){\n\n        if(disabled)\n            return;\n\n        doSomething;\n\n    }\n}\n</code></pre>\n\n<p>And now just disable all the ActionListeners by calling the method <code>setDisabled(false)</code>. The Button visual behavior doesn't change at all, but nothing happens, when you click on it.</p>\n\n<p>If the visual click behaviour doesn't matter, then you can just remove the MouseListeners.</p>\n"},{"tags":[],"owner":{"account_id":231365,"reputation":2941,"user_id":495558,"accept_rate":87,"display_name":"Genzer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1365129111,"creation_date":1365129111,"answer_id":15824936,"question_id":15812915,"body_markdown":"You can create a button group like this:\r\n\r\n    public class SingleSelectionButtonGroup {\r\n    \r\n    \tprivate final List&lt;JButton&gt; buttons;\r\n    \r\n    \tpublic static SingleSelectionButtonGroup group(List&lt;JButton&gt; buttons) {\r\n    \t\treturn new SingleSelectionButtonGroup(buttons);\r\n    \t}\r\n    \t\r\n    \tpublic static SingleSelectionButtonGroup group(JButton...buttons) {\r\n    \t\treturn new SingleSelectionButtonGroup(Arrays.asList(buttons));\r\n    \t}\r\n    \t\r\n    \tprivate SingleSelectionButtonGroup(List&lt;JButton&gt; buttons) {\r\n    \t\tthis.buttons = new ArrayList&lt;JButton&gt;(buttons);\r\n    \t\tsetupListener();\r\n    \t}\r\n    \r\n    \tprivate void setupListener() {\r\n    \t\tActionListener listener = new ActionListener() {\r\n    \t\t\tpublic void actionPerformed(ActionEvent e) {\r\n    \t\t\t\tSingleSelectionButtonGroup.this.disableAllExcept((JButton) e.getSource());\r\n    \t\t\t}\r\n    \t\t};\r\n    \t\t\r\n    \t\tfor (JButton button : buttons) {\r\n    \t\t\tbutton.addActionListener(listener);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate void disableAllExcept(JButton clickedButton) {\r\n    \t\tfor (JButton button : buttons) {\r\n    \t\t\tif (!clickedButton.equals(button)) {\r\n    \t\t\t\tbutton.setEnabled(false);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\nAnd then uses it with a collection of buttons that you want to group:\r\n\r\n    public class Application {\r\n    \t\r\n    \tpublic void run() {\r\n    \t\tfinal JFrame frame = new JFrame(&quot;test&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\tframe.setSize(new Dimension(400, 300));\r\n    \t\t\r\n    \t\tfinal JPanel pane = new JPanel();\r\n    \r\n    \t\tList&lt;JButton&gt; buttons = new ArrayList&lt;JButton&gt;();\r\n    \t\tString[] texts = {&quot;A&quot;, &quot;B&quot;, &quot;C&quot;};\r\n    \t\t\r\n    \t\tfor (String text : texts) {\r\n    \t\t\tJButton button = new JButton(text);\r\n    \t\t\tbuttons.add(button);\r\n    \t\t\tpane.add(button);\r\n    \t\t}\r\n    \t\t\r\n    \t\tSingleSelectionButtonGroup.group(buttons);\t\t\r\n    \t\tframe.getContentPane().add(pane);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tnew Application().run();\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"How can I disable the mouse click on the button action event?","body":"<p>You can create a button group like this:</p>\n\n<pre><code>public class SingleSelectionButtonGroup {\n\n    private final List&lt;JButton&gt; buttons;\n\n    public static SingleSelectionButtonGroup group(List&lt;JButton&gt; buttons) {\n        return new SingleSelectionButtonGroup(buttons);\n    }\n\n    public static SingleSelectionButtonGroup group(JButton...buttons) {\n        return new SingleSelectionButtonGroup(Arrays.asList(buttons));\n    }\n\n    private SingleSelectionButtonGroup(List&lt;JButton&gt; buttons) {\n        this.buttons = new ArrayList&lt;JButton&gt;(buttons);\n        setupListener();\n    }\n\n    private void setupListener() {\n        ActionListener listener = new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n                SingleSelectionButtonGroup.this.disableAllExcept((JButton) e.getSource());\n            }\n        };\n\n        for (JButton button : buttons) {\n            button.addActionListener(listener);\n        }\n    }\n\n    private void disableAllExcept(JButton clickedButton) {\n        for (JButton button : buttons) {\n            if (!clickedButton.equals(button)) {\n                button.setEnabled(false);\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>And then uses it with a collection of buttons that you want to group:</p>\n\n<pre><code>public class Application {\n\n    public void run() {\n        final JFrame frame = new JFrame(\"test\");\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(new Dimension(400, 300));\n\n        final JPanel pane = new JPanel();\n\n        List&lt;JButton&gt; buttons = new ArrayList&lt;JButton&gt;();\n        String[] texts = {\"A\", \"B\", \"C\"};\n\n        for (String text : texts) {\n            JButton button = new JButton(text);\n            buttons.add(button);\n            pane.add(button);\n        }\n\n        SingleSelectionButtonGroup.group(buttons);      \n        frame.getContentPane().add(pane);\n        frame.setVisible(true);\n    }\n\n    public static void main(String[] args) {\n        new Application().run();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9298045,"reputation":490,"user_id":6904555,"accept_rate":83,"display_name":"dhaval joshi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475824634,"creation_date":1475824634,"answer_id":39911562,"question_id":15812915,"body_markdown":" **you should use one common class of your listener and have static method for turn listener turn on and off**\r\n\r\n\r\n\r\n    public abstract class BaseMouseListener implements ActionListener{\r\n\r\n    private static boolean active = true;\r\n    public static void setActive(boolean active){\r\n        BaseMouseListener.active = active;\r\n    }\r\n\r\n    protected abstract void doPerformAction(ActionEvent e);\r\n\r\n    @Override\r\n    public final void actionPerformed(ActionEvent e){\r\n        if(active){\r\n            doPerformAction(e);\r\n        }\r\n    }\r\n    }\r\n\r\n**your listeners would have to implements** `doPerformedAction()`","title":"How can I disable the mouse click on the button action event?","body":"<p><strong>you should use one common class of your listener and have static method for turn listener turn on and off</strong></p>\n\n<pre><code>public abstract class BaseMouseListener implements ActionListener{\n\nprivate static boolean active = true;\npublic static void setActive(boolean active){\n    BaseMouseListener.active = active;\n}\n\nprotected abstract void doPerformAction(ActionEvent e);\n\n@Override\npublic final void actionPerformed(ActionEvent e){\n    if(active){\n        doPerformAction(e);\n    }\n}\n}\n</code></pre>\n\n<p><strong>your listeners would have to implements</strong> <code>doPerformedAction()</code></p>\n"}],"owner":{"account_id":348145,"reputation":20859,"user_id":682662,"accept_rate":56,"display_name":"saplingPro"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14015,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":4,"score":1,"last_activity_date":1693325301,"creation_date":1365082670,"question_id":15812915,"body_markdown":"Is there a way I can disable mouse click ? In the panel there are different components and for some of the Button Click events, I want to disable the mouse click. I mean the click of the mouse doesn&#39;t have any effect on the components. I can disable using the `setEnabled()` function but I don&#39;t want to do that way.\r\n\r\nIs there any way I can disable the mouse click ?\r\n\r\nSituation :\r\n\r\n    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {  \r\n           //..disable the mouse click on each component present inside the panel\r\n    }","title":"How can I disable the mouse click on the button action event?","body":"<p>Is there a way I can disable mouse click ? In the panel there are different components and for some of the Button Click events, I want to disable the mouse click. I mean the click of the mouse doesn't have any effect on the components. I can disable using the <code>setEnabled()</code> function but I don't want to do that way.</p>\n\n<p>Is there any way I can disable the mouse click ?</p>\n\n<p>Situation :</p>\n\n<pre><code>private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {  \n       //..disable the mouse click on each component present inside the panel\n}\n</code></pre>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":1674243,"reputation":10078,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"score":3,"creation_date":1612460062,"post_id":66050803,"comment_id":116780302,"body_markdown":"Read [generic methods in Java](https://docs.oracle.com/javase/tutorial/java/generics/methods.html); `&lt;E&gt;` is a generic type declaration, `Set&lt;E&gt;` is a return type of the method.","body":"Read <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/methods.html\" rel=\"nofollow noreferrer\">generic methods in Java</a>; <code>&lt;E&gt;</code> is a generic type declaration, <code>Set&lt;E&gt;</code> is a return type of the method."}],"answers":[{"tags":[],"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1612460216,"creation_date":1612460216,"answer_id":66050902,"question_id":66050803,"body_markdown":"    static &lt;E&gt; Set&lt;E&gt; of(E e1, E e2, E e3, E e4) {\r\n\r\nYou can read it as: whatever &#39;E&#39; is (for any type &#39;E&#39;), pass 4 parameters of this type and get a Set of this type as a result.","title":"Java generic notation, &lt;E&gt; Set &lt;E&gt;","body":"<pre><code>static &lt;E&gt; Set&lt;E&gt; of(E e1, E e2, E e3, E e4) {\n</code></pre>\n<p>You can read it as: whatever 'E' is (for any type 'E'), pass 4 parameters of this type and get a Set of this type as a result.</p>\n"},{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1693325170,"creation_date":1612460339,"answer_id":66050933,"question_id":66050803,"body_markdown":"&gt; can we not just say `Set&lt;E&gt;` instead of `&lt;E&gt; Set&lt;E&gt;`?\r\n\r\nNo, because then the type variable `E` wouldn&#39;t be declared.\r\n\r\nThis isn&#39;t a &quot;double&quot; use:\r\n\r\n* The first `&lt;E&gt;` is the type variable declaration\r\n* The second `&lt;E&gt;` is part of the type of the `Set&lt;E&gt;` which is the return type of the method: it&#39;s a `Set` whose elements are of type `E`, and to which `E`s can be added.\r\n\r\nDeclaring one or more type variables on a method makes the method a [*generic method*](https://docs.oracle.com/javase/specs/jls/se14/html/jls-8.html#jls-8.4.4). Instance methods can access type variables from the surrounding class, and can declare their own additional ones if needed; static methods cannot access type variables from the surrounding class, and so must always declare their own.\r\n\r\n    // Generic class, E is accessible in instance methods/initializers/constructors.\r\n    class MyClass&lt;E&gt; {\r\n      // Non-generic method, uses the E from the class.\r\n      Set&lt;E&gt; someSet() { ... } \r\n\r\n      // Generic method, declares its own type variable.\r\n      &lt;M&gt; Set&lt;M&gt; someSet1() { ... } \r\n\r\n      // Generic method, declares its own type variable which hides\r\n      // the E on the class (bad idea).\r\n      &lt;E&gt; Set&lt;E&gt; someSet2() { ... } \r\n\r\n      // Generic method, must declare its own type variable.\r\n      static &lt;E&gt; Set&lt;E&gt; someStaticSet() { ... } \r\n    }\r\n\r\n    // Non-generic classes can declare generic methods.\r\n    class MyClass {\r\n      // Generic method, declares its own type variable.\r\n      &lt;M&gt; Set&lt;M&gt; someSet1() { ... } \r\n\r\n      // Generic method, must declare its own type variable.\r\n      static &lt;E&gt; Set&lt;E&gt; someStaticSet() { ... } \r\n    }","title":"Java generic notation, &lt;E&gt; Set &lt;E&gt;","body":"<blockquote>\n<p>can we not just say <code>Set&lt;E&gt;</code> instead of <code>&lt;E&gt; Set&lt;E&gt;</code>?</p>\n</blockquote>\n<p>No, because then the type variable <code>E</code> wouldn't be declared.</p>\n<p>This isn't a &quot;double&quot; use:</p>\n<ul>\n<li>The first <code>&lt;E&gt;</code> is the type variable declaration</li>\n<li>The second <code>&lt;E&gt;</code> is part of the type of the <code>Set&lt;E&gt;</code> which is the return type of the method: it's a <code>Set</code> whose elements are of type <code>E</code>, and to which <code>E</code>s can be added.</li>\n</ul>\n<p>Declaring one or more type variables on a method makes the method a <a href=\"https://docs.oracle.com/javase/specs/jls/se14/html/jls-8.html#jls-8.4.4\" rel=\"nofollow noreferrer\"><em>generic method</em></a>. Instance methods can access type variables from the surrounding class, and can declare their own additional ones if needed; static methods cannot access type variables from the surrounding class, and so must always declare their own.</p>\n<pre><code>// Generic class, E is accessible in instance methods/initializers/constructors.\nclass MyClass&lt;E&gt; {\n  // Non-generic method, uses the E from the class.\n  Set&lt;E&gt; someSet() { ... } \n\n  // Generic method, declares its own type variable.\n  &lt;M&gt; Set&lt;M&gt; someSet1() { ... } \n\n  // Generic method, declares its own type variable which hides\n  // the E on the class (bad idea).\n  &lt;E&gt; Set&lt;E&gt; someSet2() { ... } \n\n  // Generic method, must declare its own type variable.\n  static &lt;E&gt; Set&lt;E&gt; someStaticSet() { ... } \n}\n\n// Non-generic classes can declare generic methods.\nclass MyClass {\n  // Generic method, declares its own type variable.\n  &lt;M&gt; Set&lt;M&gt; someSet1() { ... } \n\n  // Generic method, must declare its own type variable.\n  static &lt;E&gt; Set&lt;E&gt; someStaticSet() { ... } \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13704384,"reputation":401,"user_id":9888491,"display_name":"vb.stack"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612461134,"creation_date":1612461134,"answer_id":66051141,"question_id":66050803,"body_markdown":"Your method is `static`. It won&#39;t be able to access type variables declared from its class, hence it needs to declare its own `&lt;type&gt;` declaration.\r\nSo its not double declaration. \r\n\r\n    The first &lt;E&gt; is where static method declares which type it uses\r\n    The second with Set&lt;E&gt; to specify the type of elements in a Set. \r\n\r\nyou won&#39;t need to use this kind of declaration if your non static method uses same generic `&lt;type&gt;` declared by class.","title":"Java generic notation, &lt;E&gt; Set &lt;E&gt;","body":"<p>Your method is <code>static</code>. It won't be able to access type variables declared from its class, hence it needs to declare its own <code>&lt;type&gt;</code> declaration.\nSo its not double declaration.</p>\n<pre><code>The first &lt;E&gt; is where static method declares which type it uses\nThe second with Set&lt;E&gt; to specify the type of elements in a Set. \n</code></pre>\n<p>you won't need to use this kind of declaration if your non static method uses same generic <code>&lt;type&gt;</code> declared by class.</p>\n"}],"owner":{"account_id":19159657,"reputation":327,"user_id":13995718,"display_name":"Sam Gregory"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":66050933,"answer_count":3,"score":1,"last_activity_date":1693325170,"creation_date":1612459879,"question_id":66050803,"body_markdown":"The following Java code is used to create a set in Java:\r\n\r\n```Java\r\n    Set&lt;String&gt; fromUi = Set.of(&quot;val1&quot;, &quot;val2&quot;, &quot;val3&quot;, &quot;val4&quot;);\r\n```\r\nWhich in term calls this code:\r\n\r\n```Java\r\nstatic &lt;E&gt; Set&lt;E&gt; of(E e1, E e2, E e3, E e4) {\r\n        return new ImmutableCollections.SetN&lt;&gt;(e1, e2, e3, e4);\r\n    }\r\n```\r\nWhat does the &quot;double&quot; use of the type parameter mean? i.e can we not just say `Set&lt;E&gt;` instead of `&lt;E&gt; Set&lt;E&gt;`?\r\n","title":"Java generic notation, &lt;E&gt; Set &lt;E&gt;","body":"<p>The following Java code is used to create a set in Java:</p>\n<pre><code>    Set&lt;String&gt; fromUi = Set.of(&quot;val1&quot;, &quot;val2&quot;, &quot;val3&quot;, &quot;val4&quot;);\n</code></pre>\n<p>Which in term calls this code:</p>\n<pre><code>static &lt;E&gt; Set&lt;E&gt; of(E e1, E e2, E e3, E e4) {\n        return new ImmutableCollections.SetN&lt;&gt;(e1, e2, e3, e4);\n    }\n</code></pre>\n<p>What does the &quot;double&quot; use of the type parameter mean? i.e can we not just say <code>Set&lt;E&gt;</code> instead of <code>&lt;E&gt; Set&lt;E&gt;</code>?</p>\n"},{"tags":["java","jsf","primefaces","quarkus"],"answers":[{"comments":[{"owner":{"account_id":235505,"reputation":10708,"user_id":502366,"display_name":"Melloware"},"score":0,"creation_date":1693339058,"post_id":77001846,"comment_id":135747071,"body_markdown":"Also listed in the Quarkus Faces issues as a known issue: https://github.com/melloware/quarkus-faces/wiki/Quarkus-Faces-Known-Issues#uber-jar","body":"Also listed in the Quarkus Faces issues as a known issue: <a href=\"https://github.com/melloware/quarkus-faces/wiki/Quarkus-Faces-Known-Issues#uber-jar\" rel=\"nofollow noreferrer\">github.com/melloware/quarkus-faces/wiki/&hellip;</a>"},{"owner":{"account_id":3067718,"reputation":203,"user_id":2599062,"display_name":"Schorsch"},"score":0,"creation_date":1693388499,"post_id":77001846,"comment_id":135753000,"body_markdown":"Thanks a lot. Don&#39;t understand why I haven&#39;t found this page myself....","body":"Thanks a lot. Don&#39;t understand why I haven&#39;t found this page myself...."}],"tags":[],"owner":{"account_id":4166540,"reputation":2310,"user_id":3415398,"display_name":"tandraschko"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1693324961,"creation_date":1693324961,"answer_id":77001846,"question_id":77001505,"body_markdown":"Quarkus in Uber-JAR mode is not supported by MyFaces.\r\nSee: https://issues.apache.org/jira/browse/MYFACES-4427","title":"Quarkus uber-jar not running with primefaces","body":"<p>Quarkus in Uber-JAR mode is not supported by MyFaces.\nSee: <a href=\"https://issues.apache.org/jira/browse/MYFACES-4427\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/MYFACES-4427</a></p>\n"}],"owner":{"account_id":3067718,"reputation":203,"user_id":2599062,"display_name":"Schorsch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77001846,"answer_count":1,"score":2,"last_activity_date":1693324961,"creation_date":1693322358,"question_id":77001505,"body_markdown":"I migrated a project that created a WAR file (with JSF and PrimeFaces) for Wildfly, to a Quarkus application, using the quarkus-primfaces-extension.\r\n\r\nThe application is running fine in dev mode when start it via maven quarkus:dev. \\\r\nBut when I build and run it as an uber-jar, as soon as I call the main page, I get the following error:\r\n\r\n```\r\nSEVERE org.apache.myfaces.application.ApplicationImpl.createComponent(1282) [executor-thread-1] - Undefined component type org.primefaces.component.Growl\r\njakarta.faces.FacesException: Undefined component type org.primefaces.component.Growl\r\n        at org.apache.myfaces.application.ApplicationImpl.createComponent(ApplicationImpl.java:1283)\r\n        at org.apache.myfaces.application.ApplicationImpl.createComponent(ApplicationImpl.java:1252)\r\n        at jakarta.faces.application.ApplicationWrapper.createComponent(ApplicationWrapper.java:128)\r\n        at org.apache.myfaces.view.facelets.tag.faces.ComponentTagHandlerDelegate.createComponent(ComponentTagHandlerDelegate.java:587)\r\n        at org.apache.myfaces.view.facelets.tag.faces.ComponentTagHandlerDelegate.apply(ComponentTagHandlerDelegate.java:275)\r\n        at jakarta.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:52)\r\n        at jakarta.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)\r\n        at org.apache.myfaces.view.facelets.tag.faces.core.ViewHandler.apply(ViewHandler.java:195)\r\n[...]\r\n```\r\n\r\nI&#39;m using:\r\n\r\n - Quarkus version 3.0.4.Final, \r\n - quarkus-primefaces 3.13.3\r\n - myfaces-quarkus 4.0.1\r\n - quarkus-omnifaces 4.2.1\r\n - JDK 17\r\n\r\nAny ideas why this happens?\r\n\r\nRegards","title":"Quarkus uber-jar not running with primefaces","body":"<p>I migrated a project that created a WAR file (with JSF and PrimeFaces) for Wildfly, to a Quarkus application, using the quarkus-primfaces-extension.</p>\n<p>The application is running fine in dev mode when start it via maven quarkus:dev. <br />\nBut when I build and run it as an uber-jar, as soon as I call the main page, I get the following error:</p>\n<pre><code>SEVERE org.apache.myfaces.application.ApplicationImpl.createComponent(1282) [executor-thread-1] - Undefined component type org.primefaces.component.Growl\njakarta.faces.FacesException: Undefined component type org.primefaces.component.Growl\n        at org.apache.myfaces.application.ApplicationImpl.createComponent(ApplicationImpl.java:1283)\n        at org.apache.myfaces.application.ApplicationImpl.createComponent(ApplicationImpl.java:1252)\n        at jakarta.faces.application.ApplicationWrapper.createComponent(ApplicationWrapper.java:128)\n        at org.apache.myfaces.view.facelets.tag.faces.ComponentTagHandlerDelegate.createComponent(ComponentTagHandlerDelegate.java:587)\n        at org.apache.myfaces.view.facelets.tag.faces.ComponentTagHandlerDelegate.apply(ComponentTagHandlerDelegate.java:275)\n        at jakarta.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:52)\n        at jakarta.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)\n        at org.apache.myfaces.view.facelets.tag.faces.core.ViewHandler.apply(ViewHandler.java:195)\n[...]\n</code></pre>\n<p>I'm using:</p>\n<ul>\n<li>Quarkus version 3.0.4.Final,</li>\n<li>quarkus-primefaces 3.13.3</li>\n<li>myfaces-quarkus 4.0.1</li>\n<li>quarkus-omnifaces 4.2.1</li>\n<li>JDK 17</li>\n</ul>\n<p>Any ideas why this happens?</p>\n<p>Regards</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":21704500,"reputation":75,"user_id":16017180,"display_name":"Joan"},"score":0,"creation_date":1633425715,"post_id":69446383,"comment_id":122750100,"body_markdown":"After some research and asking someone I found that ApachePOI is the tool to go. It can create documents in docx and add whatever element we wish for. https://poi.apache.org/components/document/","body":"After some research and asking someone I found that ApachePOI is the tool to go. It can create documents in docx and add whatever element we wish for. <a href=\"https://poi.apache.org/components/document/\" rel=\"nofollow noreferrer\">poi.apache.org/components/document</a>"}],"answers":[{"tags":[],"owner":{"account_id":21704500,"reputation":75,"user_id":16017180,"display_name":"Joan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693324644,"creation_date":1693324644,"answer_id":77001803,"question_id":69446383,"body_markdown":"I used Apache POI for the given task. \r\n ","title":"Is there any way to create a dynamic word document to an existing template in Java?","body":"<p>I used Apache POI for the given task.</p>\n"}],"owner":{"account_id":21704500,"reputation":75,"user_id":16017180,"display_name":"Joan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77001803,"answer_count":1,"score":1,"last_activity_date":1693324644,"creation_date":1633418840,"question_id":69446383,"body_markdown":"I need to automatically generate 4 different types of CVs using Java/Spring. The information is already in the database in a structured way. However, we need to generate a Word Document for 4 different types of CVs. If you have noticed in the Europass format there are sections like work-experience and education and training that need to be duplicated more than once.\r\n\r\nI have seen a docx4j version , where creating an XML file and adjusting the word document to comply with that XML can make it work. However, what I can&#39;t seem to be figuring out for now, is how to add repeating sections, for example a list of experiences. Not only do I have to repeat the actual data, but I also have to duplicate the text in the existing template. \r\n\r\nIf any of you guys knows any other library/plug-in/tech that might help me to dynamically create a word document (the CV) using Java, please let me know.","title":"Is there any way to create a dynamic word document to an existing template in Java?","body":"<p>I need to automatically generate 4 different types of CVs using Java/Spring. The information is already in the database in a structured way. However, we need to generate a Word Document for 4 different types of CVs. If you have noticed in the Europass format there are sections like work-experience and education and training that need to be duplicated more than once.</p>\n<p>I have seen a docx4j version , where creating an XML file and adjusting the word document to comply with that XML can make it work. However, what I can't seem to be figuring out for now, is how to add repeating sections, for example a list of experiences. Not only do I have to repeat the actual data, but I also have to duplicate the text in the existing template.</p>\n<p>If any of you guys knows any other library/plug-in/tech that might help me to dynamically create a word document (the CV) using Java, please let me know.</p>\n"},{"tags":["java","android","inheritance","android-viewbinding"],"owner":{"account_id":182141,"reputation":21047,"user_id":416631,"accept_rate":69,"display_name":"Kenny Wyland"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693324518,"creation_date":1693324518,"question_id":77001787,"body_markdown":"I&#39;m migrating an existing app from the old `findViewById()` to View Binding. My fragments use inheritance extensively and common views are stored in various fragments in the inheritance hierarchy. For example...\r\n\r\n```\r\nclass OverPaidQuotaBillingIssueFragment&lt;FragmentOverPaidQuotaBinding&gt; extends FixBillingIssueFragment {\r\n\tButton upgradeButton;\r\n\t\r\n\t@NonNull\r\n\t@Override\r\n\tFragmentOverPaidQuotaBinding createviewbinding() {\r\n\t\treturn FragmentOverPaidQuotaBinding.inflate(getLayoutInflater());\r\n\t}\r\n}\r\n\r\nabstract class FixBillingIssueFragment&lt;VB extends ViewBinding&gt; extends BaseFragment {\r\n\tTextView explanationTextView;\t\r\n}\r\n\r\nabstract class BaseFragment&lt;VB extends ViewBinding&gt; extends Fragment {\r\n\tVB binding;\r\n\tProgressBar spinner;\r\n\t\r\n\tabstract @NonNull VB createviewbinding();\r\n\t\r\n\t@Override\r\n\tpublic View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n\t\tthis.binding = createviewbinding();\r\n\t\treturn this.binding.getRoot();\r\n\t}\r\n}\r\n```\r\n\r\nSince a ton of my fragments throughout the app need a progress bar, I&#39;ve got that defined in my BaseFragment and it is auto-controlled for lots of common situations by the BaseFragment code. \r\n\r\nLikewise, all of the FixBillingIssueFragment-based screens will at least have a TextView that will contain the explanation of what is wrong. \r\n\r\nAnd then the top level class OverPaidQuotaBillingIssueFragment would have specific UI elements to handle that situation, like an upgrade button. \r\n\r\nI&#39;ve put together an arrangement so that I can define the binding in the BaseFragment and try to reduce boilerplate as much as I can, but my problem is in `FixBillingIssueFragment` and `BaseFragment`.\r\n\r\n`FixBillingIssueFragment` and `BaseFragment` need to be able to interact with their `explanationTextView` and `spinner`, but neither of them know what the real type of their ViewBinding class is, so they don&#39;t know that it has those fields in it.\r\n\r\nDue to the nature of my layouts and the type of views we&#39;re talking about, I can&#39;t just segregate the common layout items into separate files in order to inflate them separately. \r\n\r\nI don&#39;t really want to have the top-level class (`OverPaidQuotaBillingIssueFragment`) have to capture the view references for it&#39;s parent classes, because then every top-level class would have to have duplicated code capturing that view reference to store it in the parent class. \r\n\r\nBut the only other option I can think of is to have the abstract parent classes capture the references it wants by calling `findViewById()` which really seems like I&#39;m writing a lot of code to replace `findViewById()` only to have to resort to still using `findViewById()`.\r\n\r\nIs there another option I&#39;m missing? Any suggestions are appreciated. ","title":"Android View Binding with some Views in Base Classes","body":"<p>I'm migrating an existing app from the old <code>findViewById()</code> to View Binding. My fragments use inheritance extensively and common views are stored in various fragments in the inheritance hierarchy. For example...</p>\n<pre><code>class OverPaidQuotaBillingIssueFragment&lt;FragmentOverPaidQuotaBinding&gt; extends FixBillingIssueFragment {\n    Button upgradeButton;\n    \n    @NonNull\n    @Override\n    FragmentOverPaidQuotaBinding createviewbinding() {\n        return FragmentOverPaidQuotaBinding.inflate(getLayoutInflater());\n    }\n}\n\nabstract class FixBillingIssueFragment&lt;VB extends ViewBinding&gt; extends BaseFragment {\n    TextView explanationTextView;   \n}\n\nabstract class BaseFragment&lt;VB extends ViewBinding&gt; extends Fragment {\n    VB binding;\n    ProgressBar spinner;\n    \n    abstract @NonNull VB createviewbinding();\n    \n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        this.binding = createviewbinding();\n        return this.binding.getRoot();\n    }\n}\n</code></pre>\n<p>Since a ton of my fragments throughout the app need a progress bar, I've got that defined in my BaseFragment and it is auto-controlled for lots of common situations by the BaseFragment code.</p>\n<p>Likewise, all of the FixBillingIssueFragment-based screens will at least have a TextView that will contain the explanation of what is wrong.</p>\n<p>And then the top level class OverPaidQuotaBillingIssueFragment would have specific UI elements to handle that situation, like an upgrade button.</p>\n<p>I've put together an arrangement so that I can define the binding in the BaseFragment and try to reduce boilerplate as much as I can, but my problem is in <code>FixBillingIssueFragment</code> and <code>BaseFragment</code>.</p>\n<p><code>FixBillingIssueFragment</code> and <code>BaseFragment</code> need to be able to interact with their <code>explanationTextView</code> and <code>spinner</code>, but neither of them know what the real type of their ViewBinding class is, so they don't know that it has those fields in it.</p>\n<p>Due to the nature of my layouts and the type of views we're talking about, I can't just segregate the common layout items into separate files in order to inflate them separately.</p>\n<p>I don't really want to have the top-level class (<code>OverPaidQuotaBillingIssueFragment</code>) have to capture the view references for it's parent classes, because then every top-level class would have to have duplicated code capturing that view reference to store it in the parent class.</p>\n<p>But the only other option I can think of is to have the abstract parent classes capture the references it wants by calling <code>findViewById()</code> which really seems like I'm writing a lot of code to replace <code>findViewById()</code> only to have to resort to still using <code>findViewById()</code>.</p>\n<p>Is there another option I'm missing? Any suggestions are appreciated.</p>\n"},{"tags":["java","modelmapper"],"answers":[{"tags":[],"owner":{"account_id":463295,"reputation":2840,"user_id":866104,"accept_rate":86,"display_name":"Michelle"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693324283,"creation_date":1693324283,"answer_id":77001754,"question_id":76956440,"body_markdown":"Rather than calling `ModelMapper.addConverter`, which actually creates or adds to a `TypeMap` under the hood, a converter can be added to ModelMapper&#39;s implicit mapping by implementing `ConditionalConverter` and adding our converter directly to the underlying configuration. The converter class:\r\n\r\n```\r\n// Our converter will implement ConditionalConverter instead\r\npublic class LabelledToStringConverter implements ConditionalConverter&lt;Labelled, String&gt; {\r\n      private final MessageSource messageSource;\r\n\r\n    public LabelledToStringConverter(MessageSource messageSource) {\r\n        this.messageSource = messageSource;\r\n    }\r\n\r\n    @Override\r\n    public MatchResult match(Class&lt;?&gt; sourceType, Class&lt;?&gt; destinationType) {\r\n        return Labelled.class.isAssignableFrom(sourceType) &amp;&amp; String.class.isAssignableFrom(destinationType)\r\n                ? MatchResult.FULL : MatchResult.NONE;\r\n    }\r\n\r\n    @Override\r\n    public String convert(MappingContext&lt;Labelled, String&gt; context) {\r\n        if (context.getSource() == null) {\r\n            return null;\r\n        }\r\n        final Locale locale = LocaleContextHolder.getLocale();\r\n        final String messageCode = context.getSource().getLabel();\r\n        return messageSource.getMessage(messageCode, null, messageCode, locale);\r\n    }\r\n}\r\n```\r\n\r\nThe `ModelMapper` setup:\r\n\r\n```\r\nfinal ModelMapper mapper = new ModelMapper();\r\nmapper.getConfiguration().getConverters().add(new LabelledToStringConverter(messageSource));\r\n// Do any other explicit type mapping necessary, e.g. where names don&#39;t match\r\n```\r\n\r\nThis will use the converter implementation anytime the conditions are matched, here anytime the model mapper is converting a property from `Labelled` to `String`.","title":"Can I configure ModelMapper to use a converter for all properties with the source type?","body":"<p>Rather than calling <code>ModelMapper.addConverter</code>, which actually creates or adds to a <code>TypeMap</code> under the hood, a converter can be added to ModelMapper's implicit mapping by implementing <code>ConditionalConverter</code> and adding our converter directly to the underlying configuration. The converter class:</p>\n<pre><code>// Our converter will implement ConditionalConverter instead\npublic class LabelledToStringConverter implements ConditionalConverter&lt;Labelled, String&gt; {\n      private final MessageSource messageSource;\n\n    public LabelledToStringConverter(MessageSource messageSource) {\n        this.messageSource = messageSource;\n    }\n\n    @Override\n    public MatchResult match(Class&lt;?&gt; sourceType, Class&lt;?&gt; destinationType) {\n        return Labelled.class.isAssignableFrom(sourceType) &amp;&amp; String.class.isAssignableFrom(destinationType)\n                ? MatchResult.FULL : MatchResult.NONE;\n    }\n\n    @Override\n    public String convert(MappingContext&lt;Labelled, String&gt; context) {\n        if (context.getSource() == null) {\n            return null;\n        }\n        final Locale locale = LocaleContextHolder.getLocale();\n        final String messageCode = context.getSource().getLabel();\n        return messageSource.getMessage(messageCode, null, messageCode, locale);\n    }\n}\n</code></pre>\n<p>The <code>ModelMapper</code> setup:</p>\n<pre><code>final ModelMapper mapper = new ModelMapper();\nmapper.getConfiguration().getConverters().add(new LabelledToStringConverter(messageSource));\n// Do any other explicit type mapping necessary, e.g. where names don't match\n</code></pre>\n<p>This will use the converter implementation anytime the conditions are matched, here anytime the model mapper is converting a property from <code>Labelled</code> to <code>String</code>.</p>\n"}],"owner":{"account_id":463295,"reputation":2840,"user_id":866104,"accept_rate":86,"display_name":"Michelle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77001754,"answer_count":1,"score":0,"last_activity_date":1693324283,"creation_date":1692733435,"question_id":76956440,"body_markdown":"I&#39;m trying to configure ModelMapper to use a certain converter for all properties that implement a certain interface, across any entity class. I can get everything working by defining a TypeMap for each entity, and defining mappings for each relevant property, but I&#39;m hoping there&#39;s a simpler way that doesn&#39;t need to be updated anytime a property is added.\r\n\r\nSo far I have something like this:\r\n\r\n```\r\npublic interface Labelled { String getLabel; // returns a message code }\r\npublic class Vegetable implements labelled { ... }\r\npublic class Protein implements labelled { ... }\r\npublic class Starch implements labelled { ... }\r\npublic class Dinner { Vegetable veg; Starch starch; Protein protein; String name; // getters and setters }\r\npublic class DinnerDto { String veg; String starch; String protein; String name; // get/set }\r\n\r\npublic class LabelledToStringConverter extends AbstractConverter&lt;Labelled, String&gt; {\r\n      private final MessageSource messageSource;\r\n\r\n    public LabelledToStringConverter(MessageSource messageSource) {\r\n        this.messageSource = messageSource;\r\n    }\r\n\r\n    @Override\r\n    protected String convert(Labelled labelled) {\r\n        final Locale locale = LocaleContextHolder.getLocale();\r\n        final String messageCode = labelled.getLabel();\r\n        return messageSource.getMessage(messageCode, null, messageCode, locale);\r\n    }\r\n}\r\n\r\n@Configuration\r\npublic class Configuration {\r\n    @Bean\r\n    public ModelMapper modelMapper(final MessageSource messageSource) {\r\n        final ModelMapper mapper = new ModelMapper();\r\n        final Converter&lt;Labelled, String&gt; converter = new LabelledToStringConverter(messageSource);\r\n        mapper.createTypeMap(Dinner.class, DinnerDto.class)\r\n                .addMappings(map -&gt; {\r\n                    map.using(converter).map(Dinner::getVegetable, DinnerDto::setVegetable);\r\n                    map.using(converter).map(Dinner::getProtein, DinnerDto::setProtein);\r\n                    map.using(converter).map(Dinner::getStarch, DinnerDto::setStarch);\r\n                });\r\n        return mapper;\r\n    }\r\n```\r\n...but I&#39;d prefer to avoid mapping each individual field, and if possible each type. `TypeMap.setPropertyConverter` doesn&#39;t work when there are fields of other types. `ModelMap.addConverter` doesn&#39;t appear to do anything (I&#39;ve tried both implementing `Converter` and extending `AbstractConverter`).\r\n\r\nIs there another way to configure ModelMapper with my converter and have it apply that to all relevant fields without explicitly defining a mapping for each one?","title":"Can I configure ModelMapper to use a converter for all properties with the source type?","body":"<p>I'm trying to configure ModelMapper to use a certain converter for all properties that implement a certain interface, across any entity class. I can get everything working by defining a TypeMap for each entity, and defining mappings for each relevant property, but I'm hoping there's a simpler way that doesn't need to be updated anytime a property is added.</p>\n<p>So far I have something like this:</p>\n<pre><code>public interface Labelled { String getLabel; // returns a message code }\npublic class Vegetable implements labelled { ... }\npublic class Protein implements labelled { ... }\npublic class Starch implements labelled { ... }\npublic class Dinner { Vegetable veg; Starch starch; Protein protein; String name; // getters and setters }\npublic class DinnerDto { String veg; String starch; String protein; String name; // get/set }\n\npublic class LabelledToStringConverter extends AbstractConverter&lt;Labelled, String&gt; {\n      private final MessageSource messageSource;\n\n    public LabelledToStringConverter(MessageSource messageSource) {\n        this.messageSource = messageSource;\n    }\n\n    @Override\n    protected String convert(Labelled labelled) {\n        final Locale locale = LocaleContextHolder.getLocale();\n        final String messageCode = labelled.getLabel();\n        return messageSource.getMessage(messageCode, null, messageCode, locale);\n    }\n}\n\n@Configuration\npublic class Configuration {\n    @Bean\n    public ModelMapper modelMapper(final MessageSource messageSource) {\n        final ModelMapper mapper = new ModelMapper();\n        final Converter&lt;Labelled, String&gt; converter = new LabelledToStringConverter(messageSource);\n        mapper.createTypeMap(Dinner.class, DinnerDto.class)\n                .addMappings(map -&gt; {\n                    map.using(converter).map(Dinner::getVegetable, DinnerDto::setVegetable);\n                    map.using(converter).map(Dinner::getProtein, DinnerDto::setProtein);\n                    map.using(converter).map(Dinner::getStarch, DinnerDto::setStarch);\n                });\n        return mapper;\n    }\n</code></pre>\n<p>...but I'd prefer to avoid mapping each individual field, and if possible each type. <code>TypeMap.setPropertyConverter</code> doesn't work when there are fields of other types. <code>ModelMap.addConverter</code> doesn't appear to do anything (I've tried both implementing <code>Converter</code> and extending <code>AbstractConverter</code>).</p>\n<p>Is there another way to configure ModelMapper with my converter and have it apply that to all relevant fields without explicitly defining a mapping for each one?</p>\n"},{"tags":["java","spring-boot","rest","maven","http-status-code-404"],"comments":[{"owner":{"account_id":19635311,"reputation":1574,"user_id":14372685,"display_name":"tbjorch"},"score":0,"creation_date":1649171755,"post_id":71754111,"comment_id":126805705,"body_markdown":"Spring throws 404 Not Found due to the endpoint does not exist. Are you sure that the endpoint is correct? In any way, something is missing in the mapping of the endpoint.","body":"Spring throws 404 Not Found due to the endpoint does not exist. Are you sure that the endpoint is correct? In any way, something is missing in the mapping of the endpoint."},{"owner":{"account_id":24448556,"reputation":69,"user_id":18371113,"display_name":"Przemek Grabarek"},"score":0,"creation_date":1649172145,"post_id":71754111,"comment_id":126805877,"body_markdown":"Yes the endpoint exist because when the backend throws exception the request returns status 500 Internal server error, it is when the code goes all the way to return section and request is being finished successfully, then 404 is being returned. I even debugged the backend and it shows that request enters the controller and then service","body":"Yes the endpoint exist because when the backend throws exception the request returns status 500 Internal server error, it is when the code goes all the way to return section and request is being finished successfully, then 404 is being returned. I even debugged the backend and it shows that request enters the controller and then service"},{"owner":{"account_id":3245007,"reputation":2260,"user_id":2736849,"accept_rate":80,"display_name":"mfaisalhyder"},"score":0,"creation_date":1649172650,"post_id":71754111,"comment_id":126806088,"body_markdown":"kindly post your Controller classes. After your update that, 500 is coming ,then you must can see the stack trace as well, why this method threw 500","body":"kindly post your Controller classes. After your update that, 500 is coming ,then you must can see the stack trace as well, why this method threw 500"},{"owner":{"account_id":24448556,"reputation":69,"user_id":18371113,"display_name":"Przemek Grabarek"},"score":0,"creation_date":1649172911,"post_id":71754111,"comment_id":126806213,"body_markdown":"I added the controller @mfaisalhyder","body":"I added the controller @mfaisalhyder"},{"owner":{"account_id":3245007,"reputation":2260,"user_id":2736849,"accept_rate":80,"display_name":"mfaisalhyder"},"score":0,"creation_date":1649173032,"post_id":71754111,"comment_id":126806266,"body_markdown":"@PrzemekGrabarek, can you add the stack trace, and error logs as well, restart the application, and hit the end point. now go to console and copy the complete stack trace and paste here. so that we can help you better.,","body":"@PrzemekGrabarek, can you add the stack trace, and error logs as well, restart the application, and hit the end point. now go to console and copy the complete stack trace and paste here. so that we can help you better.,"},{"owner":{"account_id":24448556,"reputation":69,"user_id":18371113,"display_name":"Przemek Grabarek"},"score":0,"creation_date":1649180427,"post_id":71754111,"comment_id":126809025,"body_markdown":"I provided stack trace @mfaisalhyder","body":"I provided stack trace @mfaisalhyder"},{"owner":{"account_id":3245007,"reputation":2260,"user_id":2736849,"accept_rate":80,"display_name":"mfaisalhyder"},"score":0,"creation_date":1649254243,"post_id":71754111,"comment_id":126829590,"body_markdown":"&quot; because &quot;com.company.bftConfiguration.mqtt.MqttClientConnector.client&quot; is null. @PrzemekGrabarek this variable is null, check why it is null, is it not initialized properly?","body":"&quot; because &quot;com.company.bftConfiguration.mqtt.MqttClientConnector.clien&zwnj;&#8203;t&quot; is null. @PrzemekGrabarek this variable is null, check why it is null, is it not initialized properly?"}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1649255827,"post_id":71768424,"comment_id":126830359,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/71768424/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"owner":{"account_id":24448556,"reputation":69,"user_id":18371113,"display_name":"Przemek Grabarek"},"score":3,"creation_date":1649517822,"post_id":71768424,"comment_id":126898274,"body_markdown":"I do not agree, the answer is clear and simple, instead of Controller adnotation, you use RestController, since it is the correct adnotation used for spring boot rest controller classes","body":"I do not agree, the answer is clear and simple, instead of Controller adnotation, you use RestController, since it is the correct adnotation used for spring boot rest controller classes"}],"tags":[],"owner":{"account_id":24448556,"reputation":69,"user_id":18371113,"display_name":"Przemek Grabarek"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693324271,"creation_date":1649254512,"answer_id":71768424,"question_id":71754111,"body_markdown":"Ok, so the issue was very silly, and the solution is super simple:\r\n\r\nI was using @Controller adnotation in my RfidReaderController which is from springframework.stereotype library. I changed it to @RestController and now it works. \r\njust as follows:\r\n      \r\n    @RestController\r\n    @CrossOrigin\r\n    @RequiredArgsConstructor\r\n    @RequestMapping(&quot;/rfid&quot;)\r\n    public class RfidReaderController {\r\n    ...\r\n    }","title":"Why do I get 404 Not Found in Spring Boot","body":"<p>Ok, so the issue was very silly, and the solution is super simple:</p>\n<p>I was using @Controller adnotation in my RfidReaderController which is from springframework.stereotype library. I changed it to @RestController and now it works.\njust as follows:</p>\n<pre><code>@RestController\n@CrossOrigin\n@RequiredArgsConstructor\n@RequestMapping(&quot;/rfid&quot;)\npublic class RfidReaderController {\n...\n}\n</code></pre>\n"}],"owner":{"account_id":24448556,"reputation":69,"user_id":18371113,"display_name":"Przemek Grabarek"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7040,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":71768424,"answer_count":1,"score":-2,"last_activity_date":1693324271,"creation_date":1649170991,"question_id":71754111,"body_markdown":"My Spring Boot application sends data through REST API. I connects to many Google Cloud components: google pubsub, mqtt server and google SQL. Since I implemented PUBSUB and MQTT, whenever I send a request from Postman I receive \r\n[![not found response][1]][1]\r\n\r\n\r\nMy pom.xml configuration looks like this\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.6.6&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.company&lt;/groupId&gt;\r\n    &lt;artifactId&gt;bftConfiguration&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;bftConfiguration&lt;/name&gt;\r\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n        &lt;spring-cloud-gcp.version&gt;3.1.0&lt;/spring-cloud-gcp.version&gt;\r\n        &lt;spring-cloud.version&gt;2021.0.2-SNAPSHOT&lt;/spring-cloud.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-integration&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n            &lt;version&gt;0.9.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-integration-mqtt&lt;/artifactId&gt;\r\n            &lt;version&gt;5.5.9&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-gcp-starter-pubsub&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-integration-core&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;joda-time&lt;/groupId&gt;\r\n            &lt;artifactId&gt;joda-time&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-cli&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-cli&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-gcp-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-cloud-gcp.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                        &lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;spring-milestones&lt;/id&gt;\r\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\r\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;false&lt;/enabled&gt;\r\n            &lt;/snapshots&gt;\r\n        &lt;/repository&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\r\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n            &lt;releases&gt;\r\n                &lt;enabled&gt;false&lt;/enabled&gt;\r\n            &lt;/releases&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n    &lt;pluginRepositories&gt;\r\n        &lt;pluginRepository&gt;\r\n            &lt;id&gt;spring-milestones&lt;/id&gt;\r\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\r\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;false&lt;/enabled&gt;\r\n            &lt;/snapshots&gt;\r\n        &lt;/pluginRepository&gt;\r\n        &lt;pluginRepository&gt;\r\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\r\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n            &lt;releases&gt;\r\n                &lt;enabled&gt;false&lt;/enabled&gt;\r\n            &lt;/releases&gt;\r\n        &lt;/pluginRepository&gt;\r\n    &lt;/pluginRepositories&gt;\r\n\r\n&lt;/project&gt;\r\n\r\nI also found that request is being served by backend to the point of return, so if backend throws an Exception during request processing, it returns 500 Internal Server error\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iY9zo.png\r\n  [2]: https://i.stack.imgur.com/2jWjB.png\r\n\r\nEven the record is being inserted to database\r\n\r\n    Hibernate: insert into rfid_reader (antennas, created_at, device_id, duration, freqmhz, is_deleted, is_temporary, mode, population, powerdbm, search_mode, session, updated_at, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n    \r\nThis is my controller\r\n    \r\n    @Controller\r\n    @CrossOrigin\r\n    @RequiredArgsConstructor\r\n    @RequestMapping(&quot;/rfid&quot;)\r\n    public class RfidReaderController {\r\n\r\n    final RfidReaderService rfidReaderService;\r\n\r\n    @ResponseStatus(HttpStatus.OK)\r\n    @GetMapping(&quot;/get&quot;)\r\n    public RfidReaderDTO getRfidReader(@PathVariable UUID id){\r\n        return rfidReaderService.getRfidReader(id);\r\n    }\r\n\r\n    @ResponseStatus(HttpStatus.OK)\r\n    @GetMapping(&quot;/getByDevice/{deviceId}&quot;)\r\n    public List&lt;RfidReaderDTO&gt; getAllRfidReaders(@PathVariable(&quot;deviceId&quot;) String id){\r\n        return rfidReaderService.getRfidReaderOptionsByDevice(id);\r\n    }\r\n    @ResponseStatus(HttpStatus.CREATED)\r\n    @PostMapping(&quot;/add&quot;)\r\n    public RfidReaderDTO addRfid(@RequestBody RfidPostDTO input) throws MqttException, IOException, NoSuchAlgorithmException, InvalidKeySpecException, InterruptedException {\r\n        return rfidReaderService.addReaderSettings(input.getDeviceId(),input.getPowerDBm(),input.getFreqMHz(), input.getMode(), input.getSession(), input.getPopulation(), input.getDuration(), input.getSearchMode(),input.getAntennas());\r\n    }\r\n\r\n    }\r\nhere&#39;s stack trace when 500 is returned\r\n\r\n    java.lang.NullPointerException: Cannot invoke &quot;org.eclipse.paho.client.mqttv3.MqttClient.publish(String, org.eclipse.paho.client.mqttv3.MqttMessage)&quot; because &quot;com.company.bftConfiguration.mqtt.MqttClientConnector.client&quot; is null\r\n    at com.company.bftConfiguration.service.RfidReaderService.addReaderSettings(RfidReaderService.java:122) ~[classes/:na]\r\n    at com.company.bftConfiguration.controller.RfidReaderController.addRfid(RfidReaderController.java:41) ~[classes/:na]\r\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.18.jar:5.3.18]\r\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.18.jar:5.3.18]\r\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.18.jar:5.3.18]\r\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.18.jar:5.3.18]\r\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.18.jar:5.3.18]\r\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.18.jar:5.3.18]\r\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.18.jar:5.3.18]\r\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.18.jar:5.3.18]\r\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.18.jar:5.3.18]\r\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.18.jar:5.3.18]\r\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.60.jar:4.0.FR]\r\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.18.jar:5.3.18]\r\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.60.jar:4.0.FR]\r\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.60.jar:9.0.60]\r\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-5.3.18.jar:5.3.18]\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.18.jar:5.3.18]\r\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at com.company.bftConfiguration.cors.CORSFilter.doFilter(CORSFilter.java:40) ~[classes/:na]\r\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.18.jar:5.3.18]\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.18.jar:5.3.18]\r\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.18.jar:5.3.18]\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.18.jar:5.3.18]\r\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.6.jar:2.6.6]\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.18.jar:5.3.18]\r\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.18.jar:5.3.18]\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.18.jar:5.3.18]\r\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\r\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n\r\nand here is the code snippet of that service\r\n\r\n     public RfidReaderDTO addReaderSettings(\r\n            String deviceId,\r\n            Integer powerDBm,\r\n            Double freqMHz,\r\n            Integer mode,\r\n            Integer session,\r\n            Integer population,\r\n            Integer duration,\r\n            Integer searchMode,\r\n            List&lt;Integer&gt; antennas\r\n    ) throws IOException, MqttException, NoSuchAlgorithmException, InvalidKeySpecException, InterruptedException {\r\n        Device device = deviceRepository.findDeviceByDeviceId(deviceId);\r\n        OffsetDateTime dateTime = Date.getDateWithTimeZone();\r\n        ReaderDefaultOptions readerDefaultOptions = new ReaderDefaultOptions();\r\n\r\n        RfidReader reader = new RfidReader();\r\n        reader.setPowerDBm(powerDBm != null ? powerDBm : readerDefaultOptions.getPowerDBm());\r\n        reader.setFreqMHz(freqMHz != null ? freqMHz : readerDefaultOptions.getFreqMHz());\r\n\r\n        reader.setMode(mode != null ? mode : readerDefaultOptions.getMode());\r\n\r\n        reader.setSession(session != null ? session : readerDefaultOptions.getSession());\r\n\r\n        reader.setPopulation(population != null ? population : readerDefaultOptions.getPopulation());\r\n\r\n        reader.setDuration(duration != null ? duration : readerDefaultOptions.getDuration());\r\n\r\n        reader.setSearchMode(searchMode != null ? searchMode : readerDefaultOptions.getSearchMode());\r\n\r\n        reader.setAntennas(antennas != null ? antennas : readerDefaultOptions.getAntennas());\r\n        reader.setDevice(device);\r\n        reader.setCreatedAt(dateTime);\r\n        reader.setUpdatedAt(dateTime);\r\n        reader.setIsTemporary(true);\r\n        rfidReaderRepository.save(reader);\r\n        RfidReaderDTO rfidDTO = RfidReaderDTO.builder()\r\n                .antennas(antennas)\r\n                .duration(duration)\r\n                .freqMHz(freqMHz)\r\n                .isTemporary(true)\r\n                .mode(mode)\r\n                .searchMode(searchMode)\r\n                .population(population)\r\n                .powerDBm(powerDBm)\r\n                .session(session)\r\n                .build();\r\n        String rfidJson = new Gson().toJson(rfidDTO);\r\n        MqttClientConnector connector = new MqttClientConnector();\r\n        MqttMessage mqttMessage = new MqttMessage(&quot;state&quot;.getBytes(StandardCharsets.UTF_8));\r\n        MqttClientConnector.client.publish(&quot;dsa&quot;,mqttMessage);\r\n        connector.publishData(rfidJson);\r\n        messagingGateway.sendToPubsub(rfidJson);\r\n        return rfidDT\r\n\r\nI am not interested in the error, I know why it is being thrown. I want to figure out why response returns 404 when the endpoint exists.\r\n\r\n","title":"Why do I get 404 Not Found in Spring Boot","body":"<p>My Spring Boot application sends data through REST API. I connects to many Google Cloud components: google pubsub, mqtt server and google SQL. Since I implemented PUBSUB and MQTT, whenever I send a request from Postman I receive\n<a href=\"https://i.stack.imgur.com/iY9zo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iY9zo.png\" alt=\"not found response\" /></a></p>\n<p>My pom.xml configuration looks like this</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.6.6&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;com.company&lt;/groupId&gt;\n&lt;artifactId&gt;bftConfiguration&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;bftConfiguration&lt;/name&gt;\n&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n&lt;properties&gt;\n    &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;spring-cloud-gcp.version&gt;3.1.0&lt;/spring-cloud-gcp.version&gt;\n    &lt;spring-cloud.version&gt;2021.0.2-SNAPSHOT&lt;/spring-cloud.version&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-integration&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n        &lt;artifactId&gt;gson&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n        &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n        &lt;version&gt;0.9.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-integration-mqtt&lt;/artifactId&gt;\n        &lt;version&gt;5.5.9&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-gcp-starter-pubsub&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-integration-core&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;joda-time&lt;/groupId&gt;\n        &lt;artifactId&gt;joda-time&lt;/artifactId&gt;\n        &lt;version&gt;2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-cli&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-cli&lt;/artifactId&gt;\n        &lt;version&gt;1.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-gcp-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-cloud-gcp.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;excludes&gt;\n                    &lt;exclude&gt;\n                        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                    &lt;/exclude&gt;\n                &lt;/excludes&gt;\n            &lt;/configuration&gt;\n\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;spring-milestones&lt;/id&gt;\n        &lt;name&gt;Spring Milestones&lt;/name&gt;\n        &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;false&lt;/enabled&gt;\n        &lt;/snapshots&gt;\n    &lt;/repository&gt;\n    &lt;repository&gt;\n        &lt;id&gt;spring-snapshots&lt;/id&gt;\n        &lt;name&gt;Spring Snapshots&lt;/name&gt;\n        &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n        &lt;releases&gt;\n            &lt;enabled&gt;false&lt;/enabled&gt;\n        &lt;/releases&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n&lt;pluginRepositories&gt;\n    &lt;pluginRepository&gt;\n        &lt;id&gt;spring-milestones&lt;/id&gt;\n        &lt;name&gt;Spring Milestones&lt;/name&gt;\n        &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;false&lt;/enabled&gt;\n        &lt;/snapshots&gt;\n    &lt;/pluginRepository&gt;\n    &lt;pluginRepository&gt;\n        &lt;id&gt;spring-snapshots&lt;/id&gt;\n        &lt;name&gt;Spring Snapshots&lt;/name&gt;\n        &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n        &lt;releases&gt;\n            &lt;enabled&gt;false&lt;/enabled&gt;\n        &lt;/releases&gt;\n    &lt;/pluginRepository&gt;\n&lt;/pluginRepositories&gt;\n</code></pre>\n\n<p>I also found that request is being served by backend to the point of return, so if backend throws an Exception during request processing, it returns 500 Internal Server error\n<a href=\"https://i.stack.imgur.com/2jWjB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2jWjB.png\" alt=\"enter image description here\" /></a></p>\n<p>Even the record is being inserted to database</p>\n<pre><code>Hibernate: insert into rfid_reader (antennas, created_at, device_id, duration, freqmhz, is_deleted, is_temporary, mode, population, powerdbm, search_mode, session, updated_at, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n</code></pre>\n<p>This is my controller</p>\n<pre><code>@Controller\n@CrossOrigin\n@RequiredArgsConstructor\n@RequestMapping(&quot;/rfid&quot;)\npublic class RfidReaderController {\n\nfinal RfidReaderService rfidReaderService;\n\n@ResponseStatus(HttpStatus.OK)\n@GetMapping(&quot;/get&quot;)\npublic RfidReaderDTO getRfidReader(@PathVariable UUID id){\n    return rfidReaderService.getRfidReader(id);\n}\n\n@ResponseStatus(HttpStatus.OK)\n@GetMapping(&quot;/getByDevice/{deviceId}&quot;)\npublic List&lt;RfidReaderDTO&gt; getAllRfidReaders(@PathVariable(&quot;deviceId&quot;) String id){\n    return rfidReaderService.getRfidReaderOptionsByDevice(id);\n}\n@ResponseStatus(HttpStatus.CREATED)\n@PostMapping(&quot;/add&quot;)\npublic RfidReaderDTO addRfid(@RequestBody RfidPostDTO input) throws MqttException, IOException, NoSuchAlgorithmException, InvalidKeySpecException, InterruptedException {\n    return rfidReaderService.addReaderSettings(input.getDeviceId(),input.getPowerDBm(),input.getFreqMHz(), input.getMode(), input.getSession(), input.getPopulation(), input.getDuration(), input.getSearchMode(),input.getAntennas());\n}\n\n}\n</code></pre>\n<p>here's stack trace when 500 is returned</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;org.eclipse.paho.client.mqttv3.MqttClient.publish(String, org.eclipse.paho.client.mqttv3.MqttMessage)&quot; because &quot;com.company.bftConfiguration.mqtt.MqttClientConnector.client&quot; is null\nat com.company.bftConfiguration.service.RfidReaderService.addReaderSettings(RfidReaderService.java:122) ~[classes/:na]\nat com.company.bftConfiguration.controller.RfidReaderController.addRfid(RfidReaderController.java:41) ~[classes/:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\nat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.18.jar:5.3.18]\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.18.jar:5.3.18]\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.18.jar:5.3.18]\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.18.jar:5.3.18]\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.18.jar:5.3.18]\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.18.jar:5.3.18]\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.18.jar:5.3.18]\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.18.jar:5.3.18]\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.18.jar:5.3.18]\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.18.jar:5.3.18]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.60.jar:4.0.FR]\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.18.jar:5.3.18]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.60.jar:4.0.FR]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.60.jar:9.0.60]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-5.3.18.jar:5.3.18]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.18.jar:5.3.18]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat com.company.bftConfiguration.cors.CORSFilter.doFilter(CORSFilter.java:40) ~[classes/:na]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.18.jar:5.3.18]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.18.jar:5.3.18]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.18.jar:5.3.18]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.18.jar:5.3.18]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.6.jar:2.6.6]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.18.jar:5.3.18]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.18.jar:5.3.18]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.18.jar:5.3.18]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.60.jar:9.0.60]\nat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<p>and here is the code snippet of that service</p>\n<pre><code> public RfidReaderDTO addReaderSettings(\n        String deviceId,\n        Integer powerDBm,\n        Double freqMHz,\n        Integer mode,\n        Integer session,\n        Integer population,\n        Integer duration,\n        Integer searchMode,\n        List&lt;Integer&gt; antennas\n) throws IOException, MqttException, NoSuchAlgorithmException, InvalidKeySpecException, InterruptedException {\n    Device device = deviceRepository.findDeviceByDeviceId(deviceId);\n    OffsetDateTime dateTime = Date.getDateWithTimeZone();\n    ReaderDefaultOptions readerDefaultOptions = new ReaderDefaultOptions();\n\n    RfidReader reader = new RfidReader();\n    reader.setPowerDBm(powerDBm != null ? powerDBm : readerDefaultOptions.getPowerDBm());\n    reader.setFreqMHz(freqMHz != null ? freqMHz : readerDefaultOptions.getFreqMHz());\n\n    reader.setMode(mode != null ? mode : readerDefaultOptions.getMode());\n\n    reader.setSession(session != null ? session : readerDefaultOptions.getSession());\n\n    reader.setPopulation(population != null ? population : readerDefaultOptions.getPopulation());\n\n    reader.setDuration(duration != null ? duration : readerDefaultOptions.getDuration());\n\n    reader.setSearchMode(searchMode != null ? searchMode : readerDefaultOptions.getSearchMode());\n\n    reader.setAntennas(antennas != null ? antennas : readerDefaultOptions.getAntennas());\n    reader.setDevice(device);\n    reader.setCreatedAt(dateTime);\n    reader.setUpdatedAt(dateTime);\n    reader.setIsTemporary(true);\n    rfidReaderRepository.save(reader);\n    RfidReaderDTO rfidDTO = RfidReaderDTO.builder()\n            .antennas(antennas)\n            .duration(duration)\n            .freqMHz(freqMHz)\n            .isTemporary(true)\n            .mode(mode)\n            .searchMode(searchMode)\n            .population(population)\n            .powerDBm(powerDBm)\n            .session(session)\n            .build();\n    String rfidJson = new Gson().toJson(rfidDTO);\n    MqttClientConnector connector = new MqttClientConnector();\n    MqttMessage mqttMessage = new MqttMessage(&quot;state&quot;.getBytes(StandardCharsets.UTF_8));\n    MqttClientConnector.client.publish(&quot;dsa&quot;,mqttMessage);\n    connector.publishData(rfidJson);\n    messagingGateway.sendToPubsub(rfidJson);\n    return rfidDT\n</code></pre>\n<p>I am not interested in the error, I know why it is being thrown. I want to figure out why response returns 404 when the endpoint exists.</p>\n"},{"tags":["java","spring-boot","vaadin","railway"],"comments":[{"owner":{"account_id":3837378,"reputation":35488,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1693079240,"post_id":76984592,"comment_id":135713632,"body_markdown":"Have you followed the instructions on how to build and run a production build?","body":"Have you followed the instructions on how to build and run a production build?"},{"owner":{"account_id":7510409,"reputation":1883,"user_id":5705554,"display_name":"Marcus Hellberg"},"score":0,"creation_date":1693080345,"post_id":76984592,"comment_id":135713750,"body_markdown":"It sounds like you&#39;re trying to deploy a development mode build. Make sure you build a production mode build.","body":"It sounds like you&#39;re trying to deploy a development mode build. Make sure you build a production mode build."},{"owner":{"account_id":29305253,"reputation":1,"user_id":22452469,"display_name":"Bogdan Pogorelov"},"score":0,"creation_date":1693087875,"post_id":76984592,"comment_id":135714446,"body_markdown":"now i have new error)\n\nCaused by: java.io.IOException: Unable to find index.html. It should be available on the classpath w","body":"now i have new error)  Caused by: java.io.IOException: Unable to find index.html. It should be available on the classpath w"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1693314281,"post_id":76984592,"comment_id":135741911,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":29305253,"reputation":1,"user_id":22452469,"display_name":"Bogdan Pogorelov"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693324257,"creation_date":1693079116,"question_id":76984592,"body_markdown":"I&#39;m trying to deploy my simple spring boot project to railway, but have error:\r\n\r\n&gt; va.lang.RuntimeException: Unable to initialize\r\n&gt; com.vaadin.flow.spring.VaadinServletContextInitializer$DevModeServletContextListener\r\n&gt; \r\n&gt; at\r\n&gt; com.vaadin.flow.spring.VaadinServletContextInitializer$FailFastServletContextListener.contextInitialized(VaadinServletContextInitializer.java:191)\r\n&gt; ~[vaadin-spring-24.1.7.jar!/:na]\r\n&gt; \r\n&gt; at\r\n&gt; com.vaadin.flow.spring.VaadinServletContextInitializer$CompositeServletContextListener.lambda$contextInitialized$0(VaadinServletContextInitializer.java:213)\r\n&gt; ~[vaadin-spring-24.1.7.jar!/:na]\r\n&gt; \r\n&gt; at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\r\n&gt; \r\n&gt; used by: java.util.concurrent.CompletionException:\r\n&gt; java.lang.IllegalStateException:\r\n&gt; \r\n&gt; Failed to find the following files:\r\n&gt; \r\n&gt; - ./generated/jar-resources/lit-renderer.ts\r\n&gt; \r\n&gt; - ./generated/jar-resources/gridConnector.js\r\n&gt; \r\n&gt; - ./generated/jar-resources/vaadin-time-picker/timepickerConnector.js\r\n&gt; \r\n&gt; - ./generated/jar-resources/contextMenuConnector.js\r\n&gt; \r\n&gt; - ./generated/jar-resources/vaadin-grid-flow-selection-column.js\r\n&gt; \r\n&gt; - ./generated/jar-resources/buttonFunctions.js\r\n&gt; \r\n&gt; - ./generated/jar-resources/dndConnector.js\r\n&gt; \r\n&gt; - ./generated/jar-resources/messageListConnector.js\r\n&gt; \r\n&gt; - ./generated/jar-resources/contextMenuTargetConnector.js\r\n&gt; \r\n&gt; - ./generated/jar-resources/datepickerConnector.js\r\n&gt; \r\n&gt; - ./generated/jar-resources/vaadin-big-decimal-field.js\r\n&gt; \r\n&gt; - ./generated/jar-resources/comboBoxConnector.js\r\n&gt; \r\n&gt; - ./generated/jar-resources/selectConnector.js\r\n&gt; \r\n&gt; - ./generated/jar-resources/tooltip.ts\r\n\r\nIs something wrong with my built configuration?\r\n\r\nSecond try: now i have a new error\r\n\r\n&gt; Caused by: java.io.IOException: Unable to find index.html. It should\r\n&gt; be available on the classpath w\r\n\r\n","title":"Spring Boot + Vaadin deploy","body":"<p>I'm trying to deploy my simple spring boot project to railway, but have error:</p>\n<blockquote>\n<p>va.lang.RuntimeException: Unable to initialize\ncom.vaadin.flow.spring.VaadinServletContextInitializer$DevModeServletContextListener</p>\n<p>at\ncom.vaadin.flow.spring.VaadinServletContextInitializer$FailFastServletContextListener.contextInitialized(VaadinServletContextInitializer.java:191)\n~[vaadin-spring-24.1.7.jar!/:na]</p>\n<p>at\ncom.vaadin.flow.spring.VaadinServletContextInitializer$CompositeServletContextListener.lambda$contextInitialized$0(VaadinServletContextInitializer.java:213)\n~[vaadin-spring-24.1.7.jar!/:na]</p>\n<p>at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]</p>\n<p>used by: java.util.concurrent.CompletionException:\njava.lang.IllegalStateException:</p>\n<p>Failed to find the following files:</p>\n<ul>\n<li><p>./generated/jar-resources/lit-renderer.ts</p>\n</li>\n<li><p>./generated/jar-resources/gridConnector.js</p>\n</li>\n<li><p>./generated/jar-resources/vaadin-time-picker/timepickerConnector.js</p>\n</li>\n<li><p>./generated/jar-resources/contextMenuConnector.js</p>\n</li>\n<li><p>./generated/jar-resources/vaadin-grid-flow-selection-column.js</p>\n</li>\n<li><p>./generated/jar-resources/buttonFunctions.js</p>\n</li>\n<li><p>./generated/jar-resources/dndConnector.js</p>\n</li>\n<li><p>./generated/jar-resources/messageListConnector.js</p>\n</li>\n<li><p>./generated/jar-resources/contextMenuTargetConnector.js</p>\n</li>\n<li><p>./generated/jar-resources/datepickerConnector.js</p>\n</li>\n<li><p>./generated/jar-resources/vaadin-big-decimal-field.js</p>\n</li>\n<li><p>./generated/jar-resources/comboBoxConnector.js</p>\n</li>\n<li><p>./generated/jar-resources/selectConnector.js</p>\n</li>\n<li><p>./generated/jar-resources/tooltip.ts</p>\n</li>\n</ul>\n</blockquote>\n<p>Is something wrong with my built configuration?</p>\n<p>Second try: now i have a new error</p>\n<blockquote>\n<p>Caused by: java.io.IOException: Unable to find index.html. It should\nbe available on the classpath w</p>\n</blockquote>\n"},{"tags":["java","neo4j","cypher","spring-data-neo4j"],"comments":[{"owner":{"account_id":5567614,"reputation":773,"user_id":4414246,"accept_rate":60,"display_name":"David A Stumpf"},"score":0,"creation_date":1529689040,"post_id":50961361,"comment_id":88980731,"body_markdown":"Why not use code to create a CSV file and then use a LOAD CSV cypher query to bulk upload the file?","body":"Why not use code to create a CSV file and then use a LOAD CSV cypher query to bulk upload the file?"},{"owner":{"account_id":9074842,"reputation":988,"user_id":6756805,"accept_rate":78,"display_name":"Hema"},"score":0,"creation_date":1529738230,"post_id":50961361,"comment_id":88991770,"body_markdown":"Hi, Cant we upload using java collections and cypher without CSV file...?","body":"Hi, Cant we upload using java collections and cypher without CSV file...?"},{"owner":{"account_id":33099,"reputation":29856,"user_id":92359,"accept_rate":94,"display_name":"InverseFalcon"},"score":0,"creation_date":1529806544,"post_id":50961361,"comment_id":89006192,"body_markdown":"Note that Spring Data Neo4j isn&#39;t meant for high volume insertion. Highly recommend using LOAD CSV here.","body":"Note that Spring Data Neo4j isn&#39;t meant for high volume insertion. Highly recommend using LOAD CSV here."},{"owner":{"account_id":9074842,"reputation":988,"user_id":6756805,"accept_rate":78,"display_name":"Hema"},"score":0,"creation_date":1529914608,"post_id":50961361,"comment_id":89030419,"body_markdown":"@InverseFalcon Thank you for the response. Actually data is not of high volume. Suppose creating 10 nodes at a time, but with batch insertion. LOAD CSV is the only option in this case...?","body":"@InverseFalcon Thank you for the response. Actually data is not of high volume. Suppose creating 10 nodes at a time, but with batch insertion. LOAD CSV is the only option in this case...?"},{"owner":{"account_id":5855328,"reputation":1828,"user_id":6594488,"accept_rate":60,"display_name":"KAs"},"score":0,"creation_date":1553666567,"post_id":50961361,"comment_id":97464002,"body_markdown":"@Hema Hey, any solutions for this scenario? I&#39;ve face the same issue too since one rest API request will need to add thousands of nodes and relationships, which takes quite a long time to process. Any hint would be appreciated.","body":"@Hema Hey, any solutions for this scenario? I&#39;ve face the same issue too since one rest API request will need to add thousands of nodes and relationships, which takes quite a long time to process. Any hint would be appreciated."},{"owner":{"account_id":9074842,"reputation":988,"user_id":6756805,"accept_rate":78,"display_name":"Hema"},"score":0,"creation_date":1553684167,"post_id":50961361,"comment_id":97472973,"body_markdown":"@KAs  Nope.. I used for each loop as it was less number of iterations. At tht time could&#39;nt find any solutions.","body":"@KAs  Nope.. I used for each loop as it was less number of iterations. At tht time could&#39;nt find any solutions."}],"answers":[{"tags":[],"owner":{"account_id":10871719,"reputation":51,"user_id":7993403,"display_name":"Saravanan Shanmugaraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672538070,"creation_date":1672538070,"answer_id":74972811,"question_id":50961361,"body_markdown":"You can have the params in a list and unwind it to create nodes. Your query would be like `WITH [{name:&#39;&#39;,geohash:&#39;&#39;},{name:&#39;&#39;,geohash:&#39;&#39;},{name:&#39;&#39;,geohash:&#39;&#39;}] as data UNWIND data as d MATCH (c:C) WHERE c.name = d.name CREATE (g: G{name :d.geohash} )&lt;-[:cToG]-(c) RETURN c,g`\r\n\r\nHope this helps!","title":"How to do batch insert using neo4j cypher and java","body":"<p>You can have the params in a list and unwind it to create nodes. Your query would be like <code>WITH [{name:'',geohash:''},{name:'',geohash:''},{name:'',geohash:''}] as data UNWIND data as d MATCH (c:C) WHERE c.name = d.name CREATE (g: G{name :d.geohash} )&lt;-[:cToG]-(c) RETURN c,g</code></p>\n<p>Hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":8035703,"reputation":551,"user_id":6058900,"display_name":"Vikram S"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693324067,"creation_date":1693324067,"answer_id":77001724,"question_id":50961361,"body_markdown":"After lots of trial and error: sharing the code that finally worked:\r\n\r\n     Driver driver;\r\n    void batchInsert() {\r\n        try (var session = driver.session()) {\r\n            //Create a list of objects\r\n            List&lt;Map&lt;String, Object&gt;&gt; listOfObjects = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt; 10000; i++) {\r\n                Map&lt;String, Object&gt; person = new HashMap&lt;&gt;();\r\n                person.put(&quot;id&quot;, i);\r\n                person.put(&quot;name&quot;, UUID.randomUUID()\r\n                        .toString()\r\n                        .substring(0, 10));\r\n                person.put(&quot;age&quot;, new Random().nextInt(100));\r\n                listOfObjects.add(person);\r\n            }\r\n            Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\r\n            params.put(&quot;props&quot;, listOfObjects);\r\n            long start = System.currentTimeMillis();\r\n            session.writeTransaction((tx -&gt; tx.run(&quot;UNWIND $props AS map CREATE (n:PERSONS) SET n=map&quot;, params).consume()));\r\n            System.out.println(&quot;Time Taken to process and save 10000 records to Neo4j Batch Insert took &quot;+ (System.currentTimeMillis() - start) + &quot; ms&quot;);\r\n        }\r\n    }","title":"How to do batch insert using neo4j cypher and java","body":"<p>After lots of trial and error: sharing the code that finally worked:</p>\n<pre><code> Driver driver;\nvoid batchInsert() {\n    try (var session = driver.session()) {\n        //Create a list of objects\n        List&lt;Map&lt;String, Object&gt;&gt; listOfObjects = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; 10000; i++) {\n            Map&lt;String, Object&gt; person = new HashMap&lt;&gt;();\n            person.put(&quot;id&quot;, i);\n            person.put(&quot;name&quot;, UUID.randomUUID()\n                    .toString()\n                    .substring(0, 10));\n            person.put(&quot;age&quot;, new Random().nextInt(100));\n            listOfObjects.add(person);\n        }\n        Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\n        params.put(&quot;props&quot;, listOfObjects);\n        long start = System.currentTimeMillis();\n        session.writeTransaction((tx -&gt; tx.run(&quot;UNWIND $props AS map CREATE (n:PERSONS) SET n=map&quot;, params).consume()));\n        System.out.println(&quot;Time Taken to process and save 10000 records to Neo4j Batch Insert took &quot;+ (System.currentTimeMillis() - start) + &quot; ms&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9074842,"reputation":988,"user_id":6756805,"accept_rate":78,"display_name":"Hema"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1153,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1693324067,"creation_date":1529560912,"question_id":50961361,"body_markdown":"I am performing single insert using for each loop for each value.\r\n\r\n\r\nHow can we do batch insert using cypher queries.\r\n\r\n\r\nHere is my code...\r\n\r\n**Controller**\r\n\r\n\r\n    @PostMapping(&quot;/geohash&quot;)\r\n\tpublic Set&lt;String&gt;  create(@RequestParam String name, @RequestBody LatLng[] latLngs) {\r\n\t\tdouble[][] polygonPoints = convertTo2dArrayOfLatLng(latLngs);\r\n\t\tSet&lt;String&gt; geoHashesForPolygon = GeoHashUtils.geoHashesForPolygon(6, polygonPoints);\r\n\t\tfor (String geohash : geoHashesForPolygon) {\r\n\t\t\tmin = Math.min(min, geohash.length());\r\n\t\t\tgeohashes = neoService.create(name, geohash);\r\n\t\t}\r\n\t\treturn geoHashesForPolygon;\r\n\t}\r\n\r\nI want to insert each `geoHashesForPolygon` as single node..\r\n\r\n**Cypher query**\r\n\r\n\r\n    @Query(&quot;MATCH (c:C) WHERE c.name = {name} CREATE (g: G{name : {geohash}} )&lt;-[:cToG]-(c) RETURN c,g&quot;)\r\n\tpublic GeohashOfCluster create(@Param(&quot;name&quot;) String name,@Param(&quot;geohash&quot;) String geohash);","title":"How to do batch insert using neo4j cypher and java","body":"<p>I am performing single insert using for each loop for each value.</p>\n\n<p>How can we do batch insert using cypher queries.</p>\n\n<p>Here is my code...</p>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>@PostMapping(\"/geohash\")\npublic Set&lt;String&gt;  create(@RequestParam String name, @RequestBody LatLng[] latLngs) {\n    double[][] polygonPoints = convertTo2dArrayOfLatLng(latLngs);\n    Set&lt;String&gt; geoHashesForPolygon = GeoHashUtils.geoHashesForPolygon(6, polygonPoints);\n    for (String geohash : geoHashesForPolygon) {\n        min = Math.min(min, geohash.length());\n        geohashes = neoService.create(name, geohash);\n    }\n    return geoHashesForPolygon;\n}\n</code></pre>\n\n<p>I want to insert each <code>geoHashesForPolygon</code> as single node..</p>\n\n<p><strong>Cypher query</strong></p>\n\n<pre><code>@Query(\"MATCH (c:C) WHERE c.name = {name} CREATE (g: G{name : {geohash}} )&lt;-[:cToG]-(c) RETURN c,g\")\npublic GeohashOfCluster create(@Param(\"name\") String name,@Param(\"geohash\") String geohash);\n</code></pre>\n"},{"tags":["java","junit","osgi","osgi-bundle","osgi-fragment"],"owner":{"account_id":28939040,"reputation":1,"user_id":22165951,"display_name":"Vasu. Tk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693323942,"creation_date":1693323942,"question_id":77001713,"body_markdown":"In the junit we can use the Assume.assumeTrue(false) to skip the execution of the test cases.\r\n\r\n  `@BeforeClass\r\n  public static void beforeClass() {\r\n    Assume.assumeTrue(booleanCondition());\r\n  }`\r\n\r\nBut in OSGI integration i am not able to use the assumeTrue.\r\nSo how can i skip the test class execution based on the condition in osgi integration tests.\r\n","title":"How to skip the test classes in OSGI integration test?","body":"<p>In the junit we can use the Assume.assumeTrue(false) to skip the execution of the test cases.</p>\n<p><code>@BeforeClass public static void beforeClass() { Assume.assumeTrue(booleanCondition()); }</code></p>\n<p>But in OSGI integration i am not able to use the assumeTrue.\nSo how can i skip the test class execution based on the condition in osgi integration tests.</p>\n"},{"tags":["java","spring-boot","graphql","graphql-spqr"],"answers":[{"tags":[],"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693323830,"creation_date":1693248031,"answer_id":76995319,"question_id":76942617,"body_markdown":"Since both methods return the same type `UserDto`, they&#39;ll be of the same type in the GraphQL schema as well. To completely remove a field in only one of the cases, you&#39;d have to map `UserDto` to 2 distinct types based on the context. Early versions of SPQR did support this out-of-the-box, but it proved painfully difficult to maintain both in user projects and in the library itself and was thus removed.\r\n\r\nThat said, it is _always_ possible to customize SPQR to your heart&#39;s content. This is the central tenet behind its design. So there are still ways to achieve the behavior you&#39;re after. One way is to leave the types as they are, and conditionally remove the values of the sensitive fields on the fly. But it is also possible to have distinct types and remove the sensitive fields from the schema altogether. Here&#39;s a list of ideas (that I haven&#39;t tested fully, so you might have to add some exception handling etc):\r\n\r\n## Sanitizing the values at runtime\r\n\r\n#### 1. Using permissions and Spring Security alone\r\n\r\nIf it is your `userRead` and `userSelect` permissions that capture the ability to see `birthday` field, you could do something like this:\r\n\r\n    @GraphQLQuery\r\n    @PreAuthorize(&quot;hasAuthority(&#39;userRead&#39;)&quot;)\r\n    public LocalDate birthday(@GraphQLContext UserDto user) {\r\n        return user.getBirthday();\r\n    }\r\n\r\nNow this method will be called to resolve `User.birthday` instead of the getter or field on `UserDto`, that would normally be used. And this method can be protected by Spring Security normally, as it is on a managed bean (unlike the getter/field).\r\n\r\n#### 2. Using an interceptor\r\n\r\nIf the permissions do not solve your problem, you could introduce a custom annotation like `@Sanitize(&quot;birthday = null&quot;)` and an interceptor (`ResolverInterceptor`) that post-processes the result before returning it to the user.\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.METHOD)\r\n    public @interface Sanitize {\r\n      String value();\r\n    }\r\n    \r\n    public class Sanitizer implements ResolverInterceptor, ResolverInterceptorFactory {\r\n    \r\n      private static final SpelExpressionParser parser = new SpelExpressionParser();\r\n    \r\n      @Override\r\n      public Object aroundInvoke(InvocationContext context, Continuation continuation) throws Exception {\r\n        Object result = continuation.proceed(context);\r\n        String exp = context.getResolver().getTypedElement().getAnnotation(Sanitize.class).value();\r\n        SpelExpression expr = parser.parseRaw(exp);\r\n        if (result instanceof Collection) {\r\n          Collection c = (Collection) result;\r\n          c.forEach(i -&gt; expr.getValue(i, null));\r\n        } else {\r\n          expr.getValue(result, null);\r\n        }\r\n        return result;\r\n      }\r\n    \r\n      @Override\r\n      public List&lt;ResolverInterceptor&gt; getInterceptors(ResolverInterceptorFactoryParams params) {\r\n        if (params.getResolver().getTypedElement().isAnnotationPresent(Sanitize.class)) {\r\n          return Collections.singletonList(this);\r\n        }\r\n        return Collections.emptyList();\r\n      }\r\n    }\r\n    \r\n    @Bean\r\n    public ExtensionProvider&lt;GeneratorConfiguration, ResolverInterceptorFactory&gt; interceptors() {\r\n      return (config, interceptors) -&gt; interceptors.append(new Sanitizer());\r\n    }\r\n\r\nYou can now do things like:\r\n\r\n    @GraphQLQuery(name = &quot;getAllUsers&quot;)\r\n    @PreAuthorize(&quot;hasAuthority(&#39;userSelect&#39;)&quot;)\r\n    @Sanitize(username = &#39;REDACTED&#39;) //Replace username with &#39;REDACTED&#39;\r\n    @Sanitize(birthday = null) //Set birthday to null\r\n    public List&lt;UserDto&gt; getAllUsers() {...}\r\n\r\nI added SpEL support here mostly for fun, but you can make it much simpler and just set `null` for the given field name. Or even have hard-coded logic, and skip all the expression and reflection magic altogether.\r\n\r\n#### 3. Abusing Spring Security `@PostFilter`\r\n\r\nYou can achieve pretty much the same thing as above by abusing Spring Security&#39;s `@PostFilter` by providing a custom `MethodSecurityExpressionHandler` and implementing `filter` so that it does what I did above. This is just a more convoluted version of my previous idea, but makes it independent of SPQR and GraphQL - it would apply even if you invoke the method via REST or anything else.\r\n\r\n## Having separate types per context\r\n\r\nIf removing/replacing the redacted _values_ on the fly isn&#39;t enough, and you really want to remove the field itself from the schema, you could do something like:\r\n    \r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.TYPE_USE)\r\n    public @interface Sanitize {\r\n      String typeName() default &quot;&quot;; //Or make this mandatory to keep it simple\r\n      String[] fields();\r\n    }\r\n    \r\n    //Custom TypeMapper that produces types without the sensitive fields\r\n    public static class SanitizingTypeMapper extends ObjectTypeMapper {\r\n    \r\n      @Override\r\n      protected List&lt;GraphQLFieldDefinition&gt; getFields(String typeName, AnnotatedType javaType, TypeMappingEnvironment env) {\r\n        List&lt;GraphQLFieldDefinition&gt; fields = super.getFields(typeName, javaType, env);\r\n        if (javaType.isAnnotationPresent(Sanitize.class)) {\r\n          Sanitize sanitize = javaType.getAnnotation(Sanitize.class);\r\n          Set&lt;String&gt; sanitized = new HashSet&lt;&gt;(Arrays.asList(sanitize.fields()));\r\n          return fields.stream()\r\n                  .filter(field -&gt; !sanitized.contains(field.getName()))\r\n                  .collect(Collectors.toList());\r\n        }\r\n        return fields;\r\n      }\r\n    \r\n      //Each sanitized type needs a unique name\r\n      //You can just return sanitize.typeName(), the complication is purely optional\r\n      @Override\r\n      protected String getTypeName(AnnotatedType type, BuildContext buildContext) {\r\n        if (type.isAnnotationPresent(Sanitize.class)) {\r\n          Sanitize sanitize = type.getAnnotation(Sanitize.class);\r\n          if (Utils.isNotEmpty(sanitize.typeName())) {\r\n            return sanitize.typeName();\r\n          }\r\n          String[] fields = sanitize.fields();\r\n          Arrays.sort(fields); //Important!\r\n          StringBuilder name = new StringBuilder(&quot;Sanitized&quot;);\r\n          for (String f : fields) {\r\n            name.append(Utils.capitalize(f));\r\n          }\r\n          name.append(super.getTypeName(type, buildContext));\r\n          return name.toString();\r\n        }\r\n        return super.getTypeName(type, buildContext);\r\n      }\r\n    }\r\n\r\n    @Bean\r\n    public ExtensionProvider&lt;GeneratorConfiguration, TypeMapper&gt; customMappers() {\r\n        return (config, mappers) -&gt; mappers.replace(ObjectTypeMapper.class, __ -&gt; new SanitizingTypeMapper());\r\n    }\r\n\r\nWith this, you can do:\r\n\r\n    @GraphQLQuery(name = &quot;getAllUsers&quot;)\r\n    @PreAuthorize(&quot;hasAuthority(&#39;userSelect&#39;)&quot;)\r\n    public List&lt;@Sanitize(fields = {&quot;birthday&quot;, &quot;location&quot;}) UserDto&gt; getAllUsers() {...}\r\n\r\nThis will generate a type `SanitizedBirthdayLocationUser` and will map the result of `getAllUsers` to that. To give the type a custom name (and make triple sure it really is unique or all hell breaks loose):\r\n\r\n    @GraphQLQuery(name = &quot;getAllUsers&quot;)\r\n    @PreAuthorize(&quot;hasAuthority(&#39;userSelect&#39;)&quot;)\r\n    public List&lt;@Sanitize(typeName = &quot;UserLite&quot;, fields = {&quot;birthday&quot;, &quot;location&quot;}) UserDto&gt; getAllUsers() {...}\r\n\r\n#### Notes\r\n\r\nI left the separate types option at the bottom intentionally. While it may be the cleanest option when used sparingly, after all you have the type system working with you and it even requires less custom code than some of the other options (ignoring the entirely optional type name generation I added), if you have many such instances, your schema can quickly become overwhelming for the client to understand, and overwhelming for you to maintain. So as with everything in systems design — choose your trade-offs carefully.","title":"Dynamically restrict fields in graphql spring methods returning the same object type","body":"<p>Since both methods return the same type <code>UserDto</code>, they'll be of the same type in the GraphQL schema as well. To completely remove a field in only one of the cases, you'd have to map <code>UserDto</code> to 2 distinct types based on the context. Early versions of SPQR did support this out-of-the-box, but it proved painfully difficult to maintain both in user projects and in the library itself and was thus removed.</p>\n<p>That said, it is <em>always</em> possible to customize SPQR to your heart's content. This is the central tenet behind its design. So there are still ways to achieve the behavior you're after. One way is to leave the types as they are, and conditionally remove the values of the sensitive fields on the fly. But it is also possible to have distinct types and remove the sensitive fields from the schema altogether. Here's a list of ideas (that I haven't tested fully, so you might have to add some exception handling etc):</p>\n<h2>Sanitizing the values at runtime</h2>\n<h4>1. Using permissions and Spring Security alone</h4>\n<p>If it is your <code>userRead</code> and <code>userSelect</code> permissions that capture the ability to see <code>birthday</code> field, you could do something like this:</p>\n<pre><code>@GraphQLQuery\n@PreAuthorize(&quot;hasAuthority('userRead')&quot;)\npublic LocalDate birthday(@GraphQLContext UserDto user) {\n    return user.getBirthday();\n}\n</code></pre>\n<p>Now this method will be called to resolve <code>User.birthday</code> instead of the getter or field on <code>UserDto</code>, that would normally be used. And this method can be protected by Spring Security normally, as it is on a managed bean (unlike the getter/field).</p>\n<h4>2. Using an interceptor</h4>\n<p>If the permissions do not solve your problem, you could introduce a custom annotation like <code>@Sanitize(&quot;birthday = null&quot;)</code> and an interceptor (<code>ResolverInterceptor</code>) that post-processes the result before returning it to the user.</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\npublic @interface Sanitize {\n  String value();\n}\n\npublic class Sanitizer implements ResolverInterceptor, ResolverInterceptorFactory {\n\n  private static final SpelExpressionParser parser = new SpelExpressionParser();\n\n  @Override\n  public Object aroundInvoke(InvocationContext context, Continuation continuation) throws Exception {\n    Object result = continuation.proceed(context);\n    String exp = context.getResolver().getTypedElement().getAnnotation(Sanitize.class).value();\n    SpelExpression expr = parser.parseRaw(exp);\n    if (result instanceof Collection) {\n      Collection c = (Collection) result;\n      c.forEach(i -&gt; expr.getValue(i, null));\n    } else {\n      expr.getValue(result, null);\n    }\n    return result;\n  }\n\n  @Override\n  public List&lt;ResolverInterceptor&gt; getInterceptors(ResolverInterceptorFactoryParams params) {\n    if (params.getResolver().getTypedElement().isAnnotationPresent(Sanitize.class)) {\n      return Collections.singletonList(this);\n    }\n    return Collections.emptyList();\n  }\n}\n\n@Bean\npublic ExtensionProvider&lt;GeneratorConfiguration, ResolverInterceptorFactory&gt; interceptors() {\n  return (config, interceptors) -&gt; interceptors.append(new Sanitizer());\n}\n</code></pre>\n<p>You can now do things like:</p>\n<pre><code>@GraphQLQuery(name = &quot;getAllUsers&quot;)\n@PreAuthorize(&quot;hasAuthority('userSelect')&quot;)\n@Sanitize(username = 'REDACTED') //Replace username with 'REDACTED'\n@Sanitize(birthday = null) //Set birthday to null\npublic List&lt;UserDto&gt; getAllUsers() {...}\n</code></pre>\n<p>I added SpEL support here mostly for fun, but you can make it much simpler and just set <code>null</code> for the given field name. Or even have hard-coded logic, and skip all the expression and reflection magic altogether.</p>\n<h4>3. Abusing Spring Security <code>@PostFilter</code></h4>\n<p>You can achieve pretty much the same thing as above by abusing Spring Security's <code>@PostFilter</code> by providing a custom <code>MethodSecurityExpressionHandler</code> and implementing <code>filter</code> so that it does what I did above. This is just a more convoluted version of my previous idea, but makes it independent of SPQR and GraphQL - it would apply even if you invoke the method via REST or anything else.</p>\n<h2>Having separate types per context</h2>\n<p>If removing/replacing the redacted <em>values</em> on the fly isn't enough, and you really want to remove the field itself from the schema, you could do something like:</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE_USE)\npublic @interface Sanitize {\n  String typeName() default &quot;&quot;; //Or make this mandatory to keep it simple\n  String[] fields();\n}\n\n//Custom TypeMapper that produces types without the sensitive fields\npublic static class SanitizingTypeMapper extends ObjectTypeMapper {\n\n  @Override\n  protected List&lt;GraphQLFieldDefinition&gt; getFields(String typeName, AnnotatedType javaType, TypeMappingEnvironment env) {\n    List&lt;GraphQLFieldDefinition&gt; fields = super.getFields(typeName, javaType, env);\n    if (javaType.isAnnotationPresent(Sanitize.class)) {\n      Sanitize sanitize = javaType.getAnnotation(Sanitize.class);\n      Set&lt;String&gt; sanitized = new HashSet&lt;&gt;(Arrays.asList(sanitize.fields()));\n      return fields.stream()\n              .filter(field -&gt; !sanitized.contains(field.getName()))\n              .collect(Collectors.toList());\n    }\n    return fields;\n  }\n\n  //Each sanitized type needs a unique name\n  //You can just return sanitize.typeName(), the complication is purely optional\n  @Override\n  protected String getTypeName(AnnotatedType type, BuildContext buildContext) {\n    if (type.isAnnotationPresent(Sanitize.class)) {\n      Sanitize sanitize = type.getAnnotation(Sanitize.class);\n      if (Utils.isNotEmpty(sanitize.typeName())) {\n        return sanitize.typeName();\n      }\n      String[] fields = sanitize.fields();\n      Arrays.sort(fields); //Important!\n      StringBuilder name = new StringBuilder(&quot;Sanitized&quot;);\n      for (String f : fields) {\n        name.append(Utils.capitalize(f));\n      }\n      name.append(super.getTypeName(type, buildContext));\n      return name.toString();\n    }\n    return super.getTypeName(type, buildContext);\n  }\n}\n\n@Bean\npublic ExtensionProvider&lt;GeneratorConfiguration, TypeMapper&gt; customMappers() {\n    return (config, mappers) -&gt; mappers.replace(ObjectTypeMapper.class, __ -&gt; new SanitizingTypeMapper());\n}\n</code></pre>\n<p>With this, you can do:</p>\n<pre><code>@GraphQLQuery(name = &quot;getAllUsers&quot;)\n@PreAuthorize(&quot;hasAuthority('userSelect')&quot;)\npublic List&lt;@Sanitize(fields = {&quot;birthday&quot;, &quot;location&quot;}) UserDto&gt; getAllUsers() {...}\n</code></pre>\n<p>This will generate a type <code>SanitizedBirthdayLocationUser</code> and will map the result of <code>getAllUsers</code> to that. To give the type a custom name (and make triple sure it really is unique or all hell breaks loose):</p>\n<pre><code>@GraphQLQuery(name = &quot;getAllUsers&quot;)\n@PreAuthorize(&quot;hasAuthority('userSelect')&quot;)\npublic List&lt;@Sanitize(typeName = &quot;UserLite&quot;, fields = {&quot;birthday&quot;, &quot;location&quot;}) UserDto&gt; getAllUsers() {...}\n</code></pre>\n<h4>Notes</h4>\n<p>I left the separate types option at the bottom intentionally. While it may be the cleanest option when used sparingly, after all you have the type system working with you and it even requires less custom code than some of the other options (ignoring the entirely optional type name generation I added), if you have many such instances, your schema can quickly become overwhelming for the client to understand, and overwhelming for you to maintain. So as with everything in systems design — choose your trade-offs carefully.</p>\n"}],"owner":{"account_id":13527076,"reputation":95,"user_id":9758614,"display_name":"StarkSlasher"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1693323830,"creation_date":1692596449,"question_id":76942617,"body_markdown":"Would it be possible to somehow restrict some fields from being returned in a graph ql method, bur return them in another considering they both return the same object ? \r\n\r\nFor example in the following methods i would like to restrict the field UserDto.birthday from being able to be queried in the second method.\r\n\r\n    @GraphQLQuery(name = &quot;getUser&quot;)\r\n    @PreAuthorize(&quot;hasAuthority(&#39;userRead&#39;)&quot;)\r\n    public UserDto getUser(@GraphQLArgument(name = &quot;id&quot;) Long id) \r\n\r\nand \r\n\r\n    @GraphQLQuery(name = &quot;getAllUsers&quot;)\r\n    @PreAuthorize(&quot;hasAuthority(&#39;userSelect&#39;)&quot;)\r\n    public List&lt;UserDto&gt; getAllUsers()\r\n\r\nI am using graphql-spqr-spring-boot-starter version 0.0.7 with Spring Boot 2.7.6\r\n\r\n ","title":"Dynamically restrict fields in graphql spring methods returning the same object type","body":"<p>Would it be possible to somehow restrict some fields from being returned in a graph ql method, bur return them in another considering they both return the same object ?</p>\n<p>For example in the following methods i would like to restrict the field UserDto.birthday from being able to be queried in the second method.</p>\n<pre><code>@GraphQLQuery(name = &quot;getUser&quot;)\n@PreAuthorize(&quot;hasAuthority('userRead')&quot;)\npublic UserDto getUser(@GraphQLArgument(name = &quot;id&quot;) Long id) \n</code></pre>\n<p>and</p>\n<pre><code>@GraphQLQuery(name = &quot;getAllUsers&quot;)\n@PreAuthorize(&quot;hasAuthority('userSelect')&quot;)\npublic List&lt;UserDto&gt; getAllUsers()\n</code></pre>\n<p>I am using graphql-spqr-spring-boot-starter version 0.0.7 with Spring Boot 2.7.6</p>\n"},{"tags":["java","animated-gif"],"owner":{"account_id":26210003,"reputation":1,"user_id":19889048,"display_name":"archita"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693323009,"creation_date":1693323009,"question_id":77001584,"body_markdown":"```\r\n            int delayMs = Integer.parseInt(m.group(1));\r\n            AnimatedGifEncoder e = new AnimatedGifEncoder();\r\n            e.start(Path.of(this.outputPath, name).toString());\r\n            e.setDelay(delayMs);\r\n            saveData.imageList().forEach(e::addFrame);\r\n            e.finish();\r\n```\r\nI check the delays, images, and paths by printing them out.\r\nI&#39;m sure that they are all valid data, but how the gif result doesn&#39;t appear on my dir?\r\n\r\nI was trying to replace the parameter type of the method-start to FileOutputStream from String,\r\nbut it triggered an IOException.","title":"Animated-gif-lib doesn&#39;t work in regular condition","body":"<pre><code>            int delayMs = Integer.parseInt(m.group(1));\n            AnimatedGifEncoder e = new AnimatedGifEncoder();\n            e.start(Path.of(this.outputPath, name).toString());\n            e.setDelay(delayMs);\n            saveData.imageList().forEach(e::addFrame);\n            e.finish();\n</code></pre>\n<p>I check the delays, images, and paths by printing them out.\nI'm sure that they are all valid data, but how the gif result doesn't appear on my dir?</p>\n<p>I was trying to replace the parameter type of the method-start to FileOutputStream from String,\nbut it triggered an IOException.</p>\n"},{"tags":["java","extract","rar"],"comments":[{"owner":{"account_id":1228795,"reputation":8221,"user_id":1193808,"display_name":"Subir Kumar Sao"},"score":0,"creation_date":1343211004,"post_id":11647362,"comment_id":15431261,"body_markdown":"By the variety of zipping files I assume you are in linux env. Why don&#39;t you call shell commands from Java. It will be sorter and faster.","body":"By the variety of zipping files I assume you are in linux env. Why don&#39;t you call shell commands from Java. It will be sorter and faster."},{"owner":{"account_id":1550027,"reputation":431,"user_id":1442655,"accept_rate":46,"display_name":"flexinIT"},"score":0,"creation_date":1343211249,"post_id":11647362,"comment_id":15431358,"body_markdown":"No i am actually using windows but the application i am working on at the moment has specifications to be able to unzip .tar.gz files so I have to do it... I want it to be a stand alone application so I don&#39;t really want to be doing calls outside of the application if i can help it","body":"No i am actually using windows but the application i am working on at the moment has specifications to be able to unzip .tar.gz files so I have to do it... I want it to be a stand alone application so I don&#39;t really want to be doing calls outside of the application if i can help it"}],"answers":[{"comments":[{"owner":{"account_id":2364908,"reputation":10925,"user_id":2070775,"accept_rate":54,"display_name":"dev4life"},"score":1,"creation_date":1441906623,"post_id":14289281,"comment_id":52875618,"body_markdown":"I just set up junrar and it worked great in a mac. It requires Apache Commons, Apache Commons VFS and log4j.","body":"I just set up junrar and it worked great in a mac. It requires Apache Commons, Apache Commons VFS and log4j."},{"owner":{"account_id":3261346,"reputation":1761,"user_id":2746883,"accept_rate":56,"display_name":"Acuna"},"score":0,"creation_date":1532314594,"post_id":14289281,"comment_id":89910435,"body_markdown":"But if it&#39;s a proprietary format, how is VFS working with it? I haven&#39;t found a `Runtime` methods in its code.","body":"But if it&#39;s a proprietary format, how is VFS working with it? I haven&#39;t found a <code>Runtime</code> methods in its code."}],"tags":[],"owner":{"account_id":2162182,"reputation":26357,"user_id":1916110,"accept_rate":100,"display_name":"Tom"},"comment_count":2,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1361644245,"creation_date":1357954387,"answer_id":14289281,"question_id":11647362,"body_markdown":"You are able to extract `.gz`, `.zip`, `.jar` files as they use number of compression algorithms built into the Java SDK.\r\n\r\nThe case with **RAR** format is a bit different. RAR is a **proprietary** archive file format. [RAR license][1] does not allow to include it into software development tools like Java SDK. \r\n\r\nThe best way to *unrar* your files will be using 3rd party libraries such as [junrar][2].\r\n\r\nYou can find some references to other Java RAR libraries in SO question [RAR archives with java][3]. Also SO question [How to compress text file to rar format using java program][4] explains more on different workarounds (e.g. using `Runtime`).\r\n\r\n  [1]: http://www.buyrar.com/Prices.asp?Type=License\r\n  [2]: https://github.com/edmund-wagner/junrar\r\n  [3]: https://stackoverflow.com/q/561107/1916110\r\n  [4]: https://stackoverflow.com/q/8804329/1916110","title":"Using java to extract .rar files","body":"<p>You are able to extract <code>.gz</code>, <code>.zip</code>, <code>.jar</code> files as they use number of compression algorithms built into the Java SDK.</p>\n\n<p>The case with <strong>RAR</strong> format is a bit different. RAR is a <strong>proprietary</strong> archive file format. <a href=\"http://www.buyrar.com/Prices.asp?Type=License\" rel=\"noreferrer\">RAR license</a> does not allow to include it into software development tools like Java SDK. </p>\n\n<p>The best way to <em>unrar</em> your files will be using 3rd party libraries such as <a href=\"https://github.com/edmund-wagner/junrar\" rel=\"noreferrer\">junrar</a>.</p>\n\n<p>You can find some references to other Java RAR libraries in SO question <a href=\"https://stackoverflow.com/q/561107/1916110\">RAR archives with java</a>. Also SO question <a href=\"https://stackoverflow.com/q/8804329/1916110\">How to compress text file to rar format using java program</a> explains more on different workarounds (e.g. using <code>Runtime</code>).</p>\n"},{"tags":[],"owner":{"account_id":3401338,"reputation":625,"user_id":2853402,"display_name":"adramazany"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1524118905,"creation_date":1524118905,"answer_id":49914042,"question_id":11647362,"body_markdown":"you could simply add this maven dependency to you code:\r\n\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.github.junrar&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;junrar&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.7&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand then use this code for extract rar file:\r\n\r\n    \t\tFile rar = new File(&quot;path_to_rar_file.rar&quot;);\r\n\t\tFile tmpDir = File.createTempFile(&quot;bip.&quot;,&quot;.unrar&quot;);\r\n\t\tif(!(tmpDir.delete())){\r\n\t\t\tthrow new IOException(&quot;Could not delete temp file: &quot; + tmpDir.getAbsolutePath());\r\n\t\t}\r\n\t\tif(!(tmpDir.mkdir())){\r\n\t\t\tthrow new IOException(&quot;Could not create temp directory: &quot; + tmpDir.getAbsolutePath());\r\n\t\t}\r\n\t\tSystem.out.println(&quot;tmpDir=&quot;+tmpDir.getAbsolutePath());\r\n\t\tExtractArchive extractArchive = new ExtractArchive();\r\n\t\textractArchive.extractArchive(rar, tmpDir);\r\n\t\tSystem.out.println(&quot;finished.&quot;);\r\n\r\n\r\n","title":"Using java to extract .rar files","body":"<p>you could simply add this maven dependency to you code:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.github.junrar&lt;/groupId&gt;\n    &lt;artifactId&gt;junrar&lt;/artifactId&gt;\n    &lt;version&gt;0.7&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>and then use this code for extract rar file:</p>\n\n<pre><code>        File rar = new File(\"path_to_rar_file.rar\");\n    File tmpDir = File.createTempFile(\"bip.\",\".unrar\");\n    if(!(tmpDir.delete())){\n        throw new IOException(\"Could not delete temp file: \" + tmpDir.getAbsolutePath());\n    }\n    if(!(tmpDir.mkdir())){\n        throw new IOException(\"Could not create temp directory: \" + tmpDir.getAbsolutePath());\n    }\n    System.out.println(\"tmpDir=\"+tmpDir.getAbsolutePath());\n    ExtractArchive extractArchive = new ExtractArchive();\n    extractArchive.extractArchive(rar, tmpDir);\n    System.out.println(\"finished.\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2435406,"reputation":15534,"user_id":2125442,"accept_rate":81,"display_name":"bartektartanus"},"score":2,"creation_date":1593459998,"post_id":55249840,"comment_id":110784232,"body_markdown":"Beware, junrar does not support RAR v5","body":"Beware, junrar does not support RAR v5"}],"tags":[],"owner":{"account_id":10746303,"reputation":377,"user_id":7907493,"display_name":"Jeremias Santos"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693322984,"creation_date":1553028936,"answer_id":55249840,"question_id":11647362,"body_markdown":"You can use the library `junrar`\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;com.github.junrar&lt;/groupId&gt;\r\n       &lt;artifactId&gt;junrar&lt;/artifactId&gt;\r\n       &lt;version&gt;0.7&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\nCode example:\r\n\r\n```java\r\nFile f = new File(filename);\r\nArchive archive = new Archive(f);\r\narchive.getMainHeader().print();\r\nFileHeader fh = archive.nextFileHeader();\r\nwhile(fh!=null){        \r\n    File fileEntry = new File(fh.getFileNameString().trim());\r\n    System.out.println(fileEntry.getAbsolutePath());\r\n    FileOutputStream os = new FileOutputStream(fileEntry);\r\n    archive.extractFile(fh, os);\r\n    os.close();\r\n    fh=archive.nextFileHeader();\r\n}\r\n```","title":"Using java to extract .rar files","body":"<p>You can use the library <code>junrar</code></p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;com.github.junrar&lt;/groupId&gt;\n   &lt;artifactId&gt;junrar&lt;/artifactId&gt;\n   &lt;version&gt;0.7&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Code example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>File f = new File(filename);\nArchive archive = new Archive(f);\narchive.getMainHeader().print();\nFileHeader fh = archive.nextFileHeader();\nwhile(fh!=null){        \n    File fileEntry = new File(fh.getFileNameString().trim());\n    System.out.println(fileEntry.getAbsolutePath());\n    FileOutputStream os = new FileOutputStream(fileEntry);\n    archive.extractFile(fh, os);\n    os.close();\n    fh=archive.nextFileHeader();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7291906,"reputation":503,"user_id":7789681,"display_name":"Alexey Bril"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1608202695,"creation_date":1608202695,"answer_id":65339381,"question_id":11647362,"body_markdown":"You can use http://sevenzipjbind.sourceforge.net/index.html\r\n\r\nIn addition to supporting a large number of archive formats, version 16.02-2.01 has full support for RAR5 extraction with:\r\n\r\n - password protected archives\r\n - archives with encrypted headers\r\n - archives splitted in volumes\r\n\r\ngradle\r\n```gradle\r\nimplementation &#39;net.sf.sevenzipjbinding:sevenzipjbinding:16.02-2.01&#39;\r\nimplementation &#39;net.sf.sevenzipjbinding:sevenzipjbinding-all-platforms:16.02-2.01&#39;\r\n```\r\n\r\nor maven\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;net.sf.sevenzipjbinding&lt;/groupId&gt;\r\n    &lt;artifactId&gt;sevenzipjbinding&lt;/artifactId&gt;\r\n    &lt;version&gt;16.02-2.01&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;net.sf.sevenzipjbinding&lt;/groupId&gt;\r\n    &lt;artifactId&gt;sevenzipjbinding-all-platforms&lt;/artifactId&gt;\r\n    &lt;version&gt;16.02-2.01&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nAnd code example\r\n\r\n```java\r\n\r\nimport net.sf.sevenzipjbinding.ExtractOperationResult;\r\nimport net.sf.sevenzipjbinding.IInArchive;\r\nimport net.sf.sevenzipjbinding.SevenZip;\r\nimport net.sf.sevenzipjbinding.impl.RandomAccessFileInStream;\r\nimport net.sf.sevenzipjbinding.simple.ISimpleInArchiveItem;\r\n\r\nimport java.io.*;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n/**\r\n * Responsible for unpacking archives with the RAR extension.\r\n * Support Rar4, Rar4 with password, Rar5, Rar5 with password.\r\n * Determines the type of archive itself.\r\n */\r\npublic class RarExtractor {\r\n\r\n    /**\r\n     * Extracts files from archive. Archive can be encrypted with password\r\n     *\r\n     * @param filePath path to .rar file\r\n     * @param password string password for archive\r\n     * @return map of extracted file with file name\r\n     * @throws IOException\r\n     */\r\n    public Map&lt;InputStream, String&gt; extract(String filePath, String password) throws IOException {\r\n        Map&lt;InputStream, String&gt; extractedMap = new HashMap&lt;&gt;();\r\n\r\n        RandomAccessFile randomAccessFile = new RandomAccessFile(filePath, &quot;r&quot;);\r\n        RandomAccessFileInStream randomAccessFileStream = new RandomAccessFileInStream(randomAccessFile);\r\n        IInArchive inArchive = SevenZip.openInArchive(null, randomAccessFileStream);\r\n\r\n        for (ISimpleInArchiveItem item : inArchive.getSimpleInterface().getArchiveItems()) {\r\n            if (!item.isFolder()) {\r\n                ExtractOperationResult result = item.extractSlow(data -&gt; {\r\n                    extractedMap.put(new BufferedInputStream(new ByteArrayInputStream(data)), item.getPath());\r\n\r\n                    return data.length;\r\n                }, password);\r\n\r\n                if (result != ExtractOperationResult.OK) {\r\n                    throw new RuntimeException(\r\n                            String.format(&quot;Error extracting archive. Extracting error: %s&quot;, result));\r\n                }\r\n            }\r\n        }\r\n\r\n        return extractedMap;\r\n    }\r\n}\r\n```\r\n\r\nP.S.\r\n@BorisBrodski [https://github.com/borisbrodski][1] Happy 40th birthday to you! Hope you had a great celebration. Thanks for your work!\r\n\r\n\r\n  [1]: https://github.com/borisbrodski","title":"Using java to extract .rar files","body":"<p>You can use <a href=\"http://sevenzipjbind.sourceforge.net/index.html\" rel=\"nofollow noreferrer\">http://sevenzipjbind.sourceforge.net/index.html</a></p>\n<p>In addition to supporting a large number of archive formats, version 16.02-2.01 has full support for RAR5 extraction with:</p>\n<ul>\n<li>password protected archives</li>\n<li>archives with encrypted headers</li>\n<li>archives splitted in volumes</li>\n</ul>\n<p>gradle</p>\n<pre><code>implementation 'net.sf.sevenzipjbinding:sevenzipjbinding:16.02-2.01'\nimplementation 'net.sf.sevenzipjbinding:sevenzipjbinding-all-platforms:16.02-2.01'\n</code></pre>\n<p>or maven</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;net.sf.sevenzipjbinding&lt;/groupId&gt;\n    &lt;artifactId&gt;sevenzipjbinding&lt;/artifactId&gt;\n    &lt;version&gt;16.02-2.01&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;net.sf.sevenzipjbinding&lt;/groupId&gt;\n    &lt;artifactId&gt;sevenzipjbinding-all-platforms&lt;/artifactId&gt;\n    &lt;version&gt;16.02-2.01&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And code example</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport net.sf.sevenzipjbinding.ExtractOperationResult;\nimport net.sf.sevenzipjbinding.IInArchive;\nimport net.sf.sevenzipjbinding.SevenZip;\nimport net.sf.sevenzipjbinding.impl.RandomAccessFileInStream;\nimport net.sf.sevenzipjbinding.simple.ISimpleInArchiveItem;\n\nimport java.io.*;\nimport java.util.HashMap;\nimport java.util.Map;\n\n/**\n * Responsible for unpacking archives with the RAR extension.\n * Support Rar4, Rar4 with password, Rar5, Rar5 with password.\n * Determines the type of archive itself.\n */\npublic class RarExtractor {\n\n    /**\n     * Extracts files from archive. Archive can be encrypted with password\n     *\n     * @param filePath path to .rar file\n     * @param password string password for archive\n     * @return map of extracted file with file name\n     * @throws IOException\n     */\n    public Map&lt;InputStream, String&gt; extract(String filePath, String password) throws IOException {\n        Map&lt;InputStream, String&gt; extractedMap = new HashMap&lt;&gt;();\n\n        RandomAccessFile randomAccessFile = new RandomAccessFile(filePath, &quot;r&quot;);\n        RandomAccessFileInStream randomAccessFileStream = new RandomAccessFileInStream(randomAccessFile);\n        IInArchive inArchive = SevenZip.openInArchive(null, randomAccessFileStream);\n\n        for (ISimpleInArchiveItem item : inArchive.getSimpleInterface().getArchiveItems()) {\n            if (!item.isFolder()) {\n                ExtractOperationResult result = item.extractSlow(data -&gt; {\n                    extractedMap.put(new BufferedInputStream(new ByteArrayInputStream(data)), item.getPath());\n\n                    return data.length;\n                }, password);\n\n                if (result != ExtractOperationResult.OK) {\n                    throw new RuntimeException(\n                            String.format(&quot;Error extracting archive. Extracting error: %s&quot;, result));\n                }\n            }\n        }\n\n        return extractedMap;\n    }\n}\n</code></pre>\n<p>P.S.\n@BorisBrodski <a href=\"https://github.com/borisbrodski\" rel=\"nofollow noreferrer\">https://github.com/borisbrodski</a> Happy 40th birthday to you! Hope you had a great celebration. Thanks for your work!</p>\n"},{"tags":[],"owner":{"account_id":2617457,"reputation":33,"user_id":2266229,"display_name":"Alex A"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666881014,"creation_date":1666880683,"answer_id":74223706,"question_id":11647362,"body_markdown":"This method helps to extract files to streams from rar(RAR5) file stream if you have input stream. In my case I was processing MimeBodyPart from email. \r\n\r\nThe [example][1] from @Alexey Bril didn&#39;t work for me. \r\n\r\n\r\nDependencies are the same\r\n\r\nGradle\r\n\r\n    implementation &#39;net.sf.sevenzipjbinding:sevenzipjbinding:16.02-2.01&#39;\r\n    implementation &#39;net.sf.sevenzipjbinding:sevenzipjbinding-all-platforms:16.02-2.01&#39;\r\n\r\nMaven\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;net.sf.sevenzipjbinding&lt;/groupId&gt;\r\n        &lt;artifactId&gt;sevenzipjbinding&lt;/artifactId&gt;\r\n        &lt;version&gt;16.02-2.01&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;net.sf.sevenzipjbinding&lt;/groupId&gt;\r\n        &lt;artifactId&gt;sevenzipjbinding-all-platforms&lt;/artifactId&gt;\r\n        &lt;version&gt;16.02-2.01&lt;/version&gt;\r\n    &lt;/dependency&gt;  \r\n\r\n\r\nCode\r\n\r\n    private List&lt;InputStream&gt; getInputStreamsFromRar5InputStream(InputStream is) throws IOException {\r\n\r\n        List&lt;InputStream&gt; inputStreams = new ArrayList&lt;&gt;();\r\n        \r\n        File tempFile = File.createTempFile(&quot;tempRarArchive-&quot;, &quot;.rar&quot;, null);\r\n\r\n        try (FileOutputStream fos = new FileOutputStream(tempFile)) {\r\n            fos.write(is.readAllBytes());\r\n            fos.flush();\r\n            try (RandomAccessFile raf = new RandomAccessFile(tempFile, &quot;r&quot;)) {// open for reading\r\n                try (IInArchive inArchive = SevenZip.openInArchive(null, // autodetect archive type\r\n                        new RandomAccessFileInStream(raf))) {\r\n                    // Getting simple interface of the archive inArchive\r\n                    ISimpleInArchive simpleInArchive = inArchive.getSimpleInterface();\r\n\r\n                    for (ISimpleInArchiveItem item : simpleInArchive.getArchiveItems()) {\r\n                        if (!item.isFolder()) {\r\n                            ExtractOperationResult result;\r\n                            final InputStream[] IS = new InputStream[1];\r\n\r\n                            final Integer[] sizeArray = new Integer[1];\r\n                            result = item.extractSlow(new ISequentialOutStream() {\r\n                                /**\r\n                                 * @param bytes of extracted data\r\n                                 * @return size of extracted data\r\n                                 */\r\n                                @Override\r\n                                public int write(byte[] bytes) {\r\n                                    InputStream is = new ByteArrayInputStream(bytes);\r\n                                    sizeArray[0] = bytes.length;\r\n                                    IS[0] = new BufferedInputStream(is); // Data to write to file\r\n                                    return sizeArray[0];\r\n                                }\r\n                            });\r\n\r\n                            if (result == ExtractOperationResult.OK) {\r\n                                inputStreams.add(IS[0]);\r\n                            } else {\r\n                                log.error(&quot;Error extracting item: &quot; + result);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            \r\n        } finally {\r\n            tempFile.delete();\r\n        }\r\n\r\n        return inputStreams;\r\n\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/65339381/2266229","title":"Using java to extract .rar files","body":"<p>This method helps to extract files to streams from rar(RAR5) file stream if you have input stream. In my case I was processing MimeBodyPart from email.</p>\n<p>The <a href=\"https://stackoverflow.com/a/65339381/2266229\">example</a> from @Alexey Bril didn't work for me.</p>\n<p>Dependencies are the same</p>\n<p>Gradle</p>\n<pre><code>implementation 'net.sf.sevenzipjbinding:sevenzipjbinding:16.02-2.01'\nimplementation 'net.sf.sevenzipjbinding:sevenzipjbinding-all-platforms:16.02-2.01'\n</code></pre>\n<p>Maven</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;net.sf.sevenzipjbinding&lt;/groupId&gt;\n    &lt;artifactId&gt;sevenzipjbinding&lt;/artifactId&gt;\n    &lt;version&gt;16.02-2.01&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;net.sf.sevenzipjbinding&lt;/groupId&gt;\n    &lt;artifactId&gt;sevenzipjbinding-all-platforms&lt;/artifactId&gt;\n    &lt;version&gt;16.02-2.01&lt;/version&gt;\n&lt;/dependency&gt;  \n</code></pre>\n<p>Code</p>\n<pre><code>private List&lt;InputStream&gt; getInputStreamsFromRar5InputStream(InputStream is) throws IOException {\n\n    List&lt;InputStream&gt; inputStreams = new ArrayList&lt;&gt;();\n    \n    File tempFile = File.createTempFile(&quot;tempRarArchive-&quot;, &quot;.rar&quot;, null);\n\n    try (FileOutputStream fos = new FileOutputStream(tempFile)) {\n        fos.write(is.readAllBytes());\n        fos.flush();\n        try (RandomAccessFile raf = new RandomAccessFile(tempFile, &quot;r&quot;)) {// open for reading\n            try (IInArchive inArchive = SevenZip.openInArchive(null, // autodetect archive type\n                    new RandomAccessFileInStream(raf))) {\n                // Getting simple interface of the archive inArchive\n                ISimpleInArchive simpleInArchive = inArchive.getSimpleInterface();\n\n                for (ISimpleInArchiveItem item : simpleInArchive.getArchiveItems()) {\n                    if (!item.isFolder()) {\n                        ExtractOperationResult result;\n                        final InputStream[] IS = new InputStream[1];\n\n                        final Integer[] sizeArray = new Integer[1];\n                        result = item.extractSlow(new ISequentialOutStream() {\n                            /**\n                             * @param bytes of extracted data\n                             * @return size of extracted data\n                             */\n                            @Override\n                            public int write(byte[] bytes) {\n                                InputStream is = new ByteArrayInputStream(bytes);\n                                sizeArray[0] = bytes.length;\n                                IS[0] = new BufferedInputStream(is); // Data to write to file\n                                return sizeArray[0];\n                            }\n                        });\n\n                        if (result == ExtractOperationResult.OK) {\n                            inputStreams.add(IS[0]);\n                        } else {\n                            log.error(&quot;Error extracting item: &quot; + result);\n                        }\n                    }\n                }\n            }\n        }\n        \n    } finally {\n        tempFile.delete();\n    }\n\n    return inputStreams;\n\n}\n</code></pre>\n"}],"owner":{"account_id":1550027,"reputation":431,"user_id":1442655,"accept_rate":46,"display_name":"flexinIT"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53056,"favorite_count":0,"down_vote_count":1,"up_vote_count":20,"answer_count":5,"score":19,"last_activity_date":1693322984,"creation_date":1343210798,"question_id":11647362,"body_markdown":"I am looking a ways to unzip `.rar` files using Java and where ever I search i keep ending up with the same tool - `JavaUnRar`. I have been looking into unzipping `.rar` files with this but all the ways i seem to find to do this are very long and awkward like in [this example][1]\r\n\r\nI am currently able to extract `.tar`, `.tar.gz`, `.zip` and `.jar` files in 20 lines of code or less so there must be a simpler way to extract `.rar` files, does anybody know?\r\n\r\nJust if it helps anybody this is the code that I am using to extract both `.zip` and `.jar` files, it works for both\r\n\r\n     public void getZipFiles(String zipFile, String destFolder) throws IOException {\r\n        BufferedOutputStream dest = null;\r\n        ZipInputStream zis = new ZipInputStream(\r\n                                           new BufferedInputStream(\r\n                                                 new FileInputStream(zipFile)));\r\n        ZipEntry entry;\r\n        while (( entry = zis.getNextEntry() ) != null) {\r\n            System.out.println( &quot;Extracting: &quot; + entry.getName() );\r\n            int count;\r\n            byte data[] = new byte[BUFFER];\r\n\r\n            if (entry.isDirectory()) {\r\n                new File( destFolder + &quot;/&quot; + entry.getName() ).mkdirs();\r\n                continue;\r\n            } else {\r\n                int di = entry.getName().lastIndexOf( &#39;/&#39; );\r\n                if (di != -1) {\r\n                    new File( destFolder + &quot;/&quot; + entry.getName()\r\n                                                 .substring( 0, di ) ).mkdirs();\r\n                }\r\n            }\r\n            FileOutputStream fos = new FileOutputStream( destFolder + &quot;/&quot;\r\n                                                         + entry.getName() );\r\n            dest = new BufferedOutputStream( fos );\r\n            while (( count = zis.read( data ) ) != -1) \r\n                dest.write( data, 0, count );\r\n            dest.flush();\r\n            dest.close();\r\n        }\r\n    }\r\n    \r\n\r\n\r\n  [1]: https://github.com/edmund-wagner/junrar/blob/6f32323c983015d96c64084418793853f514b519/testutil/src/main/java/de/innosystec/unrar/testutil/ExtractArchive.java","title":"Using java to extract .rar files","body":"<p>I am looking a ways to unzip <code>.rar</code> files using Java and where ever I search i keep ending up with the same tool - <code>JavaUnRar</code>. I have been looking into unzipping <code>.rar</code> files with this but all the ways i seem to find to do this are very long and awkward like in <a href=\"https://github.com/edmund-wagner/junrar/blob/6f32323c983015d96c64084418793853f514b519/testutil/src/main/java/de/innosystec/unrar/testutil/ExtractArchive.java\" rel=\"noreferrer\">this example</a></p>\n\n<p>I am currently able to extract <code>.tar</code>, <code>.tar.gz</code>, <code>.zip</code> and <code>.jar</code> files in 20 lines of code or less so there must be a simpler way to extract <code>.rar</code> files, does anybody know?</p>\n\n<p>Just if it helps anybody this is the code that I am using to extract both <code>.zip</code> and <code>.jar</code> files, it works for both</p>\n\n<pre><code> public void getZipFiles(String zipFile, String destFolder) throws IOException {\n    BufferedOutputStream dest = null;\n    ZipInputStream zis = new ZipInputStream(\n                                       new BufferedInputStream(\n                                             new FileInputStream(zipFile)));\n    ZipEntry entry;\n    while (( entry = zis.getNextEntry() ) != null) {\n        System.out.println( \"Extracting: \" + entry.getName() );\n        int count;\n        byte data[] = new byte[BUFFER];\n\n        if (entry.isDirectory()) {\n            new File( destFolder + \"/\" + entry.getName() ).mkdirs();\n            continue;\n        } else {\n            int di = entry.getName().lastIndexOf( '/' );\n            if (di != -1) {\n                new File( destFolder + \"/\" + entry.getName()\n                                             .substring( 0, di ) ).mkdirs();\n            }\n        }\n        FileOutputStream fos = new FileOutputStream( destFolder + \"/\"\n                                                     + entry.getName() );\n        dest = new BufferedOutputStream( fos );\n        while (( count = zis.read( data ) ) != -1) \n            dest.write( data, 0, count );\n        dest.flush();\n        dest.close();\n    }\n}\n</code></pre>\n"},{"tags":["java","nio","nonblocking"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1693322811,"post_id":77001534,"comment_id":135743957,"body_markdown":"From the [javadoc](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/channels/ServerSocketChannel.html#accept()): _&quot;**Returns**:  The socket channel for the new connection, or `null` if this channel is in non-blocking mode and no connection is available to be accepted&quot;_","body":"From the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/channels/ServerSocketChannel.html#accept()\" rel=\"nofollow noreferrer\">javadoc</a>: <i>&quot;<b>Returns</b>:  The socket channel for the new connection, or <code>null</code> if this channel is in non-blocking mode and no connection is available to be accepted&quot;</i>"},{"owner":{"account_id":20145110,"reputation":2014,"user_id":14773830,"display_name":"Rahul"},"score":0,"creation_date":1693323147,"post_id":77001534,"comment_id":135744031,"body_markdown":"What i can see about `isAcceptable` from [here](https://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/nio/channels/SelectionKey.html#isAcceptable()) is, `isAcceptable` return true if this key&#39;s channel is ready to accept a new socket connection. And i am calling `serverSocketChannel.accept()` only when `isAcceptable()` is true. So, it should not return null.","body":"What i can see about <code>isAcceptable</code> from <a href=\"https://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/nio/channels/SelectionKey.html#isAcceptable()\" rel=\"nofollow noreferrer\">here</a> is, <code>isAcceptable</code> return true if this key&#39;s channel is ready to accept a new socket connection. And i am calling <code>serverSocketChannel.accept()</code> only when <code>isAcceptable()</code> is true. So, it should not return null."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1693323562,"post_id":77001534,"comment_id":135744136,"body_markdown":"I hardly ever program NIO, but shouldn&#39;t you remove the selection key from the set after you processed it? In other words, given you don&#39;t remove it, subsequent calls to `selectedKeys()` continue to return it, even if there currently is nothing waiting.","body":"I hardly ever program NIO, but shouldn&#39;t you remove the selection key from the set after you processed it? In other words, given you don&#39;t remove it, subsequent calls to <code>selectedKeys()</code> continue to return it, even if there currently is nothing waiting."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697402963,"post_id":77001534,"comment_id":136272356,"body_markdown":"@MarkRotteveel is correct. The key was still acceptable from last time.","body":"@MarkRotteveel is correct. The key was still acceptable from last time."},{"owner":{"account_id":20145110,"reputation":2014,"user_id":14773830,"display_name":"Rahul"},"score":0,"creation_date":1697470621,"post_id":77001534,"comment_id":136280879,"body_markdown":"It was resolved, thanks @MarkRotteveel","body":"It was resolved, thanks @MarkRotteveel"}],"owner":{"account_id":20145110,"reputation":2014,"user_id":14773830,"display_name":"Rahul"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693322904,"creation_date":1693322582,"question_id":77001534,"body_markdown":"I am trying to write a simple client server program in Java NIO.\r\n\r\nHere is the code:\r\n```java\r\npackage org.lb;\r\n\r\nimport java.io.IOException;\r\nimport java.net.InetSocketAddress;\r\nimport java.nio.channels.SelectionKey;\r\nimport java.nio.channels.Selector;\r\nimport java.nio.channels.ServerSocketChannel;\r\nimport java.nio.channels.SocketChannel;\r\nimport java.util.Set;\r\n\r\npublic class Test {\r\n  public static void main(String[] args) throws IOException {\r\n    ServerSocketChannel serverSocketChannel = ServerSocketChannel.open();\r\n    serverSocketChannel.bind(new InetSocketAddress(8080));\r\n    serverSocketChannel.configureBlocking(false);\r\n\r\n    Selector selector = Selector.open();\r\n    serverSocketChannel.register(selector, SelectionKey.OP_ACCEPT);\r\n\r\n    while (true) {\r\n      selector.select();\r\n      Set&lt;SelectionKey&gt; selectionKeySet = selector.selectedKeys();\r\n      for (SelectionKey selectionKey : selectionKeySet) {\r\n        if (selectionKey.isAcceptable()) {\r\n          SocketChannel socketChannel = serverSocketChannel.accept();\r\n          if (socketChannel == null) {\r\n            System.out.println(&quot;No connection...&quot;);\r\n          } else {\r\n            socketChannel.configureBlocking(false);\r\n            socketChannel.register(selector, SelectionKey.OP_READ);\r\n            System.out.println(&quot;Connection done!&quot;);\r\n          }\r\n        }\r\n\r\n        if (selectionKey.isReadable()) {\r\n          System.out.println(&quot;isReadable&quot;);\r\n          SocketChannel socketChannel = (SocketChannel) selectionKey.channel();\r\n          socketChannel.close();\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\nYou can see that I call `serverSocketChannel.accept()` only when `selectionKey.isAcceptable()` returns true. So, I assume that `serverSocketChannel.accept()` should always return a valid `SocketChannel` instance, but sometimes it&#39;s returning null as well. \r\n\r\nI am trying to send request using Postman, but the same case is with browser requests too. \r\n\r\n#### Output with Postman single request \r\n```none\r\nConnection done!\r\nNo connection...\r\nisReadable\r\nConnection done!\r\nNo connection...\r\nisReadable\r\n```\r\n\r\nI expected that `Connection done!` is printed once, but it&#39;s printing twice. Also, why `No connection...` is printed?\r\n\r\n#### Output with curl single request \r\n```none\r\nConnection done!\r\nisReadable\r\nNo connection...\r\n```\r\n","title":"serverSocketChannel.accept() returns null","body":"<p>I am trying to write a simple client server program in Java NIO.</p>\n<p>Here is the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.lb;\n\nimport java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.nio.channels.SelectionKey;\nimport java.nio.channels.Selector;\nimport java.nio.channels.ServerSocketChannel;\nimport java.nio.channels.SocketChannel;\nimport java.util.Set;\n\npublic class Test {\n  public static void main(String[] args) throws IOException {\n    ServerSocketChannel serverSocketChannel = ServerSocketChannel.open();\n    serverSocketChannel.bind(new InetSocketAddress(8080));\n    serverSocketChannel.configureBlocking(false);\n\n    Selector selector = Selector.open();\n    serverSocketChannel.register(selector, SelectionKey.OP_ACCEPT);\n\n    while (true) {\n      selector.select();\n      Set&lt;SelectionKey&gt; selectionKeySet = selector.selectedKeys();\n      for (SelectionKey selectionKey : selectionKeySet) {\n        if (selectionKey.isAcceptable()) {\n          SocketChannel socketChannel = serverSocketChannel.accept();\n          if (socketChannel == null) {\n            System.out.println(&quot;No connection...&quot;);\n          } else {\n            socketChannel.configureBlocking(false);\n            socketChannel.register(selector, SelectionKey.OP_READ);\n            System.out.println(&quot;Connection done!&quot;);\n          }\n        }\n\n        if (selectionKey.isReadable()) {\n          System.out.println(&quot;isReadable&quot;);\n          SocketChannel socketChannel = (SocketChannel) selectionKey.channel();\n          socketChannel.close();\n        }\n      }\n    }\n  }\n}\n</code></pre>\n<p>You can see that I call <code>serverSocketChannel.accept()</code> only when <code>selectionKey.isAcceptable()</code> returns true. So, I assume that <code>serverSocketChannel.accept()</code> should always return a valid <code>SocketChannel</code> instance, but sometimes it's returning null as well.</p>\n<p>I am trying to send request using Postman, but the same case is with browser requests too.</p>\n<h4>Output with Postman single request</h4>\n<pre class=\"lang-none prettyprint-override\"><code>Connection done!\nNo connection...\nisReadable\nConnection done!\nNo connection...\nisReadable\n</code></pre>\n<p>I expected that <code>Connection done!</code> is printed once, but it's printing twice. Also, why <code>No connection...</code> is printed?</p>\n<h4>Output with curl single request</h4>\n<pre class=\"lang-none prettyprint-override\"><code>Connection done!\nisReadable\nNo connection...\n</code></pre>\n"},{"tags":["java","xdocreport"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1693243345,"post_id":76994724,"comment_id":135731893,"body_markdown":"`ODTHelloWordWithVelocity.odt` is in docx format ? you should post the stack trace ?","body":"<code>ODTHelloWordWithVelocity.odt</code> is in docx format ? you should post the stack trace ?"},{"owner":{"account_id":14414866,"reputation":33,"user_id":10412579,"display_name":"JavaDevS"},"score":0,"creation_date":1693322042,"post_id":76994724,"comment_id":135743764,"body_markdown":"A also tried .docx , the same result","body":"A also tried .docx , the same result"}],"answers":[{"tags":[],"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693244244,"creation_date":1693244244,"answer_id":76994936,"question_id":76994724,"body_markdown":"I have nearly the same code running with\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;fr.opensagres.xdocreport&lt;/groupId&gt;\r\n            &lt;artifactId&gt;fr.opensagres.xdocreport.document&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;fr.opensagres.xdocreport&lt;/groupId&gt;\r\n            &lt;artifactId&gt;fr.opensagres.xdocreport.document.odt&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;fr.opensagres.xdocreport&lt;/groupId&gt;\r\n            &lt;artifactId&gt;fr.opensagres.xdocreport.template.velocity&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;fr.opensagres.xdocreport&lt;/groupId&gt;\r\n            &lt;artifactId&gt;fr.opensagres.xdocreport.converter.odt.odfdom&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n  \r\n        try {\r\n            ITemplateEngine templateEngine = new VelocityTemplateEngine(new Properties());\r\n            InputStream in = new FileInputStream(new File(templatePath));\r\n            IXDocReport report = XDocReportRegistry.getRegistry().loadReport(in, templateEngine);\r\n\r\n            IContext context = report.createContext();\r\n            context.putMap(map);\r\n            Options options = Options.getTo(ConverterTypeTo.PDF);\r\n\r\n            ByteArrayOutputStream out = new ByteArrayOutputStream(2048);\r\n            report.convert(context, options, out);\r\n            out.close();\r\n            return out.toByteArray();\r\n        } catch (XDocReportException ex) {\r\n            log.error(ex.getMessage(), ex);\r\n        }","title":"Error while converting docx to pdf Cannot read the array length because &quot;this.NewSubrsIndexNonCID&quot; is null","body":"<p>I have nearly the same code running with</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;fr.opensagres.xdocreport&lt;/groupId&gt;\n        &lt;artifactId&gt;fr.opensagres.xdocreport.document&lt;/artifactId&gt;\n        &lt;version&gt;2.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;fr.opensagres.xdocreport&lt;/groupId&gt;\n        &lt;artifactId&gt;fr.opensagres.xdocreport.document.odt&lt;/artifactId&gt;\n        &lt;version&gt;2.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;fr.opensagres.xdocreport&lt;/groupId&gt;\n        &lt;artifactId&gt;fr.opensagres.xdocreport.template.velocity&lt;/artifactId&gt;\n        &lt;version&gt;2.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;fr.opensagres.xdocreport&lt;/groupId&gt;\n        &lt;artifactId&gt;fr.opensagres.xdocreport.converter.odt.odfdom&lt;/artifactId&gt;\n        &lt;version&gt;2.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n    try {\n        ITemplateEngine templateEngine = new VelocityTemplateEngine(new Properties());\n        InputStream in = new FileInputStream(new File(templatePath));\n        IXDocReport report = XDocReportRegistry.getRegistry().loadReport(in, templateEngine);\n\n        IContext context = report.createContext();\n        context.putMap(map);\n        Options options = Options.getTo(ConverterTypeTo.PDF);\n\n        ByteArrayOutputStream out = new ByteArrayOutputStream(2048);\n        report.convert(context, options, out);\n        out.close();\n        return out.toByteArray();\n    } catch (XDocReportException ex) {\n        log.error(ex.getMessage(), ex);\n    }\n</code></pre>\n"}],"owner":{"account_id":14414866,"reputation":33,"user_id":10412579,"display_name":"JavaDevS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693322522,"creation_date":1693242159,"question_id":76994724,"body_markdown":"I use xdocreport with the follow dependencies:\r\n\r\n            &lt;dependency&gt;\r\n            &lt;groupId&gt;fr.opensagres.xdocreport&lt;/groupId&gt;\r\n            &lt;artifactId&gt;xdocreport&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/fr.opensagres.xdocreport/fr.opensagres.xdocreport.converter.docx.xwpf --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;fr.opensagres.xdocreport&lt;/groupId&gt;\r\n            &lt;artifactId&gt;fr.opensagres.poi.xwpf.converter.pdf&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nCode:\r\n\r\n \r\n\r\n       ITemplateEngine templateEngine = VelocityTemplateEngine.getDefault();\r\n    InputStream in= new FileInputStream(new File(&quot;ODTHelloWordWithVelocity.odt&quot;));\r\n    IXDocReport report = XDocReportRegistry.getRegistry().loadReport(in,templateEngine);\r\n    \r\n    // 2) Create Java model context \r\n    IContext context = report.createContext();\r\n    context.put(&quot;name&quot;, &quot;world&quot;);\r\n    \r\n    // 3) Set PDF as format converter\r\n    Options options = Options.getTo(ConverterTypeTo.PDF);\r\n    \r\n    // 3) Generate report by merging Java model with the ODT and convert it to PDF\r\n    OutputStream out = new FileOutputStream(new File(&quot;ODTHelloWordWithVelocity_Out.odt&quot;));\r\n    report.convert(context, options, out);\r\n\r\nand, as result:\r\n\r\ncom.lowagie.text.ExceptionConverter: Cannot read the array length because &quot;this.NewSubrsIndexNonCID&quot; is null\r\n\r\nHow to fix it, What NewSubrsIndexNonCID is ?  \r\nI expect to get pdf document. If I use Doc4j, it works as expected. But DOC4J is very slowly. To convert 4 pages to pdf it takes about 5 seconds and above. \r\n\r\nUPD. Stack trace:\r\n2023-08-29T18:11:38.381+03:00 ERROR 13480 --- [nio-8080-exec-3] f.o.x.c.d.p.i.XWPF2PDFViaITextConverter  : java.lang.NullPointerException: Cannot read the array length because &quot;this.NewSubrsIndexNonCID&quot; is null\r\n2023-08-29T18:11:38.385+03:00 ERROR 13480 --- [nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.RuntimeException: fr.opensagres.xdocreport.converter.XDocConverterException: fr.opensagres.poi.xwpf.converter.core.XWPFConverterException: java.lang.NullPointerException: Cannot read the array length because &quot;this.NewSubrsIndexNonCID&quot; is null] with root cause\r\n\r\ncom.lowagie.text.ExceptionConverter: Cannot read the array length because &quot;this.NewSubrsIndexNonCID&quot; is null\r\n\r\nlooks like problem with fonts. If I use Calibri, it works fine.\r\n\r\nOk, I try add new fonts:\r\n\r\n        @PostConstruct\r\n    public void init() {\r\n        var fonts = resourceLoader.getResources(&quot;classpath:fonts/*&quot;);\r\n        for (var font : fonts) {\r\n            FontFactory.register(font.getURL().toString());\r\n        }\r\n    }\r\n\r\nBut result the same....","title":"Error while converting docx to pdf Cannot read the array length because &quot;this.NewSubrsIndexNonCID&quot; is null","body":"<p>I use xdocreport with the follow dependencies:</p>\n<pre><code>        &lt;dependency&gt;\n        &lt;groupId&gt;fr.opensagres.xdocreport&lt;/groupId&gt;\n        &lt;artifactId&gt;xdocreport&lt;/artifactId&gt;\n        &lt;version&gt;2.0.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/fr.opensagres.xdocreport/fr.opensagres.xdocreport.converter.docx.xwpf --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;fr.opensagres.xdocreport&lt;/groupId&gt;\n        &lt;artifactId&gt;fr.opensagres.poi.xwpf.converter.pdf&lt;/artifactId&gt;\n        &lt;version&gt;2.0.4&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Code:</p>\n<pre><code>   ITemplateEngine templateEngine = VelocityTemplateEngine.getDefault();\nInputStream in= new FileInputStream(new File(&quot;ODTHelloWordWithVelocity.odt&quot;));\nIXDocReport report = XDocReportRegistry.getRegistry().loadReport(in,templateEngine);\n\n// 2) Create Java model context \nIContext context = report.createContext();\ncontext.put(&quot;name&quot;, &quot;world&quot;);\n\n// 3) Set PDF as format converter\nOptions options = Options.getTo(ConverterTypeTo.PDF);\n\n// 3) Generate report by merging Java model with the ODT and convert it to PDF\nOutputStream out = new FileOutputStream(new File(&quot;ODTHelloWordWithVelocity_Out.odt&quot;));\nreport.convert(context, options, out);\n</code></pre>\n<p>and, as result:</p>\n<p>com.lowagie.text.ExceptionConverter: Cannot read the array length because &quot;this.NewSubrsIndexNonCID&quot; is null</p>\n<p>How to fix it, What NewSubrsIndexNonCID is ?<br />\nI expect to get pdf document. If I use Doc4j, it works as expected. But DOC4J is very slowly. To convert 4 pages to pdf it takes about 5 seconds and above.</p>\n<p>UPD. Stack trace:\n2023-08-29T18:11:38.381+03:00 ERROR 13480 --- [nio-8080-exec-3] f.o.x.c.d.p.i.XWPF2PDFViaITextConverter  : java.lang.NullPointerException: Cannot read the array length because &quot;this.NewSubrsIndexNonCID&quot; is null\n2023-08-29T18:11:38.385+03:00 ERROR 13480 --- [nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.RuntimeException: fr.opensagres.xdocreport.converter.XDocConverterException: fr.opensagres.poi.xwpf.converter.core.XWPFConverterException: java.lang.NullPointerException: Cannot read the array length because &quot;this.NewSubrsIndexNonCID&quot; is null] with root cause</p>\n<p>com.lowagie.text.ExceptionConverter: Cannot read the array length because &quot;this.NewSubrsIndexNonCID&quot; is null</p>\n<p>looks like problem with fonts. If I use Calibri, it works fine.</p>\n<p>Ok, I try add new fonts:</p>\n<pre><code>    @PostConstruct\npublic void init() {\n    var fonts = resourceLoader.getResources(&quot;classpath:fonts/*&quot;);\n    for (var font : fonts) {\n        FontFactory.register(font.getURL().toString());\n    }\n}\n</code></pre>\n<p>But result the same....</p>\n"},{"tags":["java","faker"],"comments":[{"owner":{"account_id":5572640,"reputation":5109,"user_id":4417306,"display_name":"Mark"},"score":0,"creation_date":1566930378,"post_id":57680255,"comment_id":101807380,"body_markdown":"You&#39;re determining the sex based on what appears to be a random number generator, so ofcourse that&#39;s not going to match their name perse","body":"You&#39;re determining the sex based on what appears to be a random number generator, so ofcourse that&#39;s not going to match their name perse"},{"owner":{"account_id":6951436,"reputation":1275,"user_id":5333936,"accept_rate":89,"display_name":"CloudPotato"},"score":0,"creation_date":1566930440,"post_id":57680255,"comment_id":101807403,"body_markdown":"On what assumptions is your expected output based? Your user is generated with random values.","body":"On what assumptions is your expected output based? Your user is generated with random values."},{"owner":{"account_id":9477288,"reputation":311,"user_id":7046251,"display_name":"pdrersin"},"score":0,"creation_date":1581314674,"post_id":57680255,"comment_id":106376140,"body_markdown":"you can use ```faker.demographic().sex()``` for the gender","body":"you can use <code>faker.demographic().sex()</code> for the gender"}],"answers":[{"comments":[{"owner":{"account_id":5105567,"reputation":1321,"user_id":4093727,"display_name":"Michael M"},"score":0,"creation_date":1693322644,"post_id":57680594,"comment_id":135743925,"body_markdown":"In the program I am using the JavaFaker class in, I also populate a &quot;fullName&quot; property, but due to the randomness of how the class works, I am generating names separately, and then concatenating them together for a full name.  This works well for providing controlled consistency, but also prevents the random titles and name suffixes from being included as they are unimportant to me.","body":"In the program I am using the JavaFaker class in, I also populate a &quot;fullName&quot; property, but due to the randomness of how the class works, I am generating names separately, and then concatenating them together for a full name.  This works well for providing controlled consistency, but also prevents the random titles and name suffixes from being included as they are unimportant to me."}],"tags":[],"owner":{"account_id":15956467,"reputation":4079,"user_id":11514534,"display_name":"second"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1566934069,"creation_date":1566931586,"answer_id":57680594,"question_id":57680255,"body_markdown":"The problem with your code is that each call of `faker.name().fullName()` will generate a new name. (Also `faker.name().username()` has no relation to any previously generated full name.)\r\n\r\nYou could change your code to this:&lt;br/&gt;\r\n(Assuming that each `fullName` consist of at least two parts, seperated by a space)\r\n\r\n```\r\nString fullName = faker.name().fullName();\r\nString firstName = fullName.substring(fullName.indexOf(&#39; &#39;));\r\n\r\np.setEmail(firstName + &quot;@lucatinder.org&quot;);\r\np.setAge(faker.number().numberBetween(18, 90));\r\np.setGender(sex);\r\np.setName(fullName);\r\np.setPassword(faker.lorem().characters(8, 16));\r\n```\r\n\r\nHowever that won&#39;t solve your `gender` issue, as that does not seem to be a supported feature.&lt;br/&gt; Check this related [`issue`](https://github.com/DiUS/java-faker/issues/31) on the github project.\r\n\r\nFor whatever you&#39;re trying to do with that generated data, there (normally) shouldn&#39;t be an issue if the sex does not match to the name.\r\n","title":"How to create a coherent object with java faker","body":"<p>The problem with your code is that each call of <code>faker.name().fullName()</code> will generate a new name. (Also <code>faker.name().username()</code> has no relation to any previously generated full name.)</p>\n\n<p>You could change your code to this:<br/>\n(Assuming that each <code>fullName</code> consist of at least two parts, seperated by a space)</p>\n\n<pre><code>String fullName = faker.name().fullName();\nString firstName = fullName.substring(fullName.indexOf(' '));\n\np.setEmail(firstName + \"@lucatinder.org\");\np.setAge(faker.number().numberBetween(18, 90));\np.setGender(sex);\np.setName(fullName);\np.setPassword(faker.lorem().characters(8, 16));\n</code></pre>\n\n<p>However that won't solve your <code>gender</code> issue, as that does not seem to be a supported feature.<br/> Check this related <a href=\"https://github.com/DiUS/java-faker/issues/31\" rel=\"nofollow noreferrer\"><code>issue</code></a> on the github project.</p>\n\n<p>For whatever you're trying to do with that generated data, there (normally) shouldn't be an issue if the sex does not match to the name.</p>\n"},{"comments":[{"owner":{"account_id":15956467,"reputation":4079,"user_id":11514534,"display_name":"second"},"score":0,"creation_date":1566932589,"post_id":57680675,"comment_id":101808232,"body_markdown":"As far as I&#39;ve seen in the code `name()` only forwards to the matching generator. The method call after that generates a new something. Also you&#39;re link does not point to a `java` version of said library.","body":"As far as I&#39;ve seen in the code <code>name()</code> only forwards to the matching generator. The method call after that generates a new something. Also you&#39;re link does not point to a <code>java</code> version of said library."}],"tags":[],"owner":{"account_id":5578471,"reputation":520,"user_id":4421151,"display_name":"Jeremiah Shore"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566931918,"creation_date":1566931918,"answer_id":57680675,"question_id":57680255,"body_markdown":"According to the [Faker documentation][1], it appears you are getting a different name each time you invoke `.name()`.\r\n\r\n&gt; Each call to method fake.name() yields a different (random) result. This is because faker forwards faker.Generator.method_name() calls to faker.Generator.format(method_name).\r\n\r\n\r\n\r\n\r\n  [1]: https://faker.readthedocs.io/en/master/","title":"How to create a coherent object with java faker","body":"<p>According to the <a href=\"https://faker.readthedocs.io/en/master/\" rel=\"nofollow noreferrer\">Faker documentation</a>, it appears you are getting a different name each time you invoke <code>.name()</code>.</p>\n\n<blockquote>\n  <p>Each call to method fake.name() yields a different (random) result. This is because faker forwards faker.Generator.method_name() calls to faker.Generator.format(method_name).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":5105567,"reputation":1321,"user_id":4093727,"display_name":"Michael M"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693322325,"creation_date":1693322325,"answer_id":77001501,"question_id":57680255,"body_markdown":"Yes, I&#39;m running into the same issue as well.  And it is by design.  The purpose of the JavaFaker class (based originally on a Gem from the Ruby language) is to kick back random data that matches the entity type... not have a coherent set of data for a given entity.\r\n\r\nWhat is needed is a way of kicking back a base entity (such as a Name object, or an Address object), and then converting the data contained within into an instance object of some kind.  But based on how the JavaFaker class was written, I don&#39;t think trying to capture a single entity set is the intended use.  I&#39;m not even certain that the data being returned in an address is associated in anyway... I think each entity/data property from the JavaFaker class is isolated from each other.  You can create base objects, but the JavaFaker class still &quot;randomly&quot; generates values for each sub property.","title":"How to create a coherent object with java faker","body":"<p>Yes, I'm running into the same issue as well.  And it is by design.  The purpose of the JavaFaker class (based originally on a Gem from the Ruby language) is to kick back random data that matches the entity type... not have a coherent set of data for a given entity.</p>\n<p>What is needed is a way of kicking back a base entity (such as a Name object, or an Address object), and then converting the data contained within into an instance object of some kind.  But based on how the JavaFaker class was written, I don't think trying to capture a single entity set is the intended use.  I'm not even certain that the data being returned in an address is associated in anyway... I think each entity/data property from the JavaFaker class is isolated from each other.  You can create base objects, but the JavaFaker class still &quot;randomly&quot; generates values for each sub property.</p>\n"}],"owner":{"account_id":16348678,"reputation":43,"user_id":11807785,"display_name":"CandyBear"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4332,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1693322325,"creation_date":1566929885,"question_id":57680255,"body_markdown":"I&#39;m trying to create an object `user` with java faker, and the variables are not coherent (if I create a user&#39;s name it could be `bob` and a username could be `jhon.smith`)\r\n\r\nThis is my code that creates a fake user:\r\n\r\n\tpublic static User userRandom() {\r\n\t\t\r\n\t\tUser p = new User();\r\n\t\tFaker faker = new Faker(new Locale(&quot;ES&quot;));\r\n\r\n\t\tint ramdomN = faker.number().numberBetween(0, 1);\r\n\t\tchar sex;\r\n\t\tif (ramdomN == 0) {\r\n\t\t\tsex = &#39;M&#39;;\r\n\t\t} else {\r\n\t\t\tsex = &#39;F&#39;;\r\n\t\t}\r\n\r\n\t\tfaker.name().fullName();\r\n\t\tp.setEmail(faker.name().username() + &quot;@lucatinder.org&quot;);\r\n        p.setAge(faker.number().numberBetween(18, 90));\r\n\t\tp.setGender(sex);\r\n\t\tp.setName(faker.name().fullName());\r\n\t\tp.setPassword(faker.lorem().characters(8, 16));\r\n\t\t\r\n\t\treturn p;\r\n\t}\r\n\r\nI expect the output to be: \r\n\r\n\temail: Elisa@lucatinder.org,\r\n\tPassword: gki5ra4l2v,\r\n\tname: Elisa Robledo Robledo,\r\n\tage: 33,\r\n\tGender: F, (Female)\r\n\r\nBut the actual output is:\r\n\r\n\tEmail: Elisa@lucatinder.org,\r\n\tPassword: gki5ra4l2v,\r\n\tname: Carlota Robledo Robledo,\r\n\tage: 33,\r\n\tGender: M, (male)\r\n\r\nAnd that is wrong, because in `email` and `name` I have different names and Elisa is female but the `gender` is male","title":"How to create a coherent object with java faker","body":"<p>I'm trying to create an object <code>user</code> with java faker, and the variables are not coherent (if I create a user's name it could be <code>bob</code> and a username could be <code>jhon.smith</code>)</p>\n\n<p>This is my code that creates a fake user:</p>\n\n<pre><code>public static User userRandom() {\n\n    User p = new User();\n    Faker faker = new Faker(new Locale(\"ES\"));\n\n    int ramdomN = faker.number().numberBetween(0, 1);\n    char sex;\n    if (ramdomN == 0) {\n        sex = 'M';\n    } else {\n        sex = 'F';\n    }\n\n    faker.name().fullName();\n    p.setEmail(faker.name().username() + \"@lucatinder.org\");\n    p.setAge(faker.number().numberBetween(18, 90));\n    p.setGender(sex);\n    p.setName(faker.name().fullName());\n    p.setPassword(faker.lorem().characters(8, 16));\n\n    return p;\n}\n</code></pre>\n\n<p>I expect the output to be: </p>\n\n<pre><code>email: Elisa@lucatinder.org,\nPassword: gki5ra4l2v,\nname: Elisa Robledo Robledo,\nage: 33,\nGender: F, (Female)\n</code></pre>\n\n<p>But the actual output is:</p>\n\n<pre><code>Email: Elisa@lucatinder.org,\nPassword: gki5ra4l2v,\nname: Carlota Robledo Robledo,\nage: 33,\nGender: M, (male)\n</code></pre>\n\n<p>And that is wrong, because in <code>email</code> and <code>name</code> I have different names and Elisa is female but the <code>gender</code> is male</p>\n"},{"tags":["java","selenium-webdriver","automated-tests"],"comments":[{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1693339811,"post_id":77001452,"comment_id":135747225,"body_markdown":"you&#39;re building one string var there... each iteration overrites it.  The second one looks right, but where do you call testList()?   Might be easier to just put it all in the loop and add the iterator... &quot;beginning of the xpath...&quot; + i  + &quot;the rest of the xpath&quot;","body":"you&#39;re building one string var there... each iteration overrites it.  The second one looks right, but where do you call testList()?   Might be easier to just put it all in the loop and add the iterator... &quot;beginning of the xpath...&quot; + i  + &quot;the rest of the xpath&quot;"},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1693340415,"post_id":77001452,"comment_id":135747335,"body_markdown":"might need i.toString()...","body":"might need i.toString()..."}],"owner":{"account_id":27485505,"reputation":1,"user_id":20971832,"display_name":"Tokar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693321924,"creation_date":1693321924,"question_id":77001452,"body_markdown":"Im trying to convert my 7 Strings(xpaths) into WebElements and send keys for these labels, but only the first one is converted and my test sending keys only for the first one. \r\n\r\n```\r\nprivate static final String DAY_LABEL_VARIABLE = &quot;//*[@id=&#39;app&#39;]/div[1]/div[2]/div[2]/div/form/div[2]/table/tbody/tr[1]/td[&#39;%s&#39;]/div/div[2]/input&quot;;\r\n\r\n    public TimeBuilder pickData() {\r\n        String format = &quot;&quot;;\r\n        for (int i = 3; i &lt; 10; i++) {\r\n            format = String.format(DAY_LABEL_VARIABLE, i);\r\n        }\r\n        WebElement webElement = getDriver().findElement(By.xpath(format));\r\n        deletingAndAddingContentToLabel(webElement, sendNumbers0And23());\r\n\r\n        return new TimeBuilder();\r\n    }\r\n```\r\n\r\n\r\nI tried to add Strings into the list and go through with using for loop but the final outcome is the same like in code block before.\r\n\r\n```\r\n    public List&lt;String&gt; testList() {\r\n        String format = &quot;&quot;;\r\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n        for (int i = 3; i &lt; 10; i++) {\r\n            format = String.format(DAY_LABEL_VARIABLE, i);\r\n            list.add(format);\r\n        }\r\n        return list;\r\n    }\r\n\r\n    public TimeBuilder testElements() {\r\n        for (int i = 0; i &lt; testList().size() - 1; i++) {\r\n            WebElement webElement = getDriver().findElement(By.xpath(testList().get(i)));\r\n            deletingAndAddingContentToLabel(webElement, sendNumbers0And23());\r\n        }\r\n\r\n        return new TimeBuilder();\r\n    }\r\n```\r\nOf course there is an other solution by manually adding every locators and sending keys for them but its not a solution im looking for:\r\n\r\n\r\n```\r\n    public TimeBuilder sendHoursForEveryDayOfTheWeek() {\r\n        mondayLabel.sendKeys(sendNumbers0And23());\r\n        tuesdayLabel.sendKeys(sendNumbers0And23());\r\n        wednesdayLabel.sendKeys(sendNumbers0And23());\r\n        thursdayLabel.sendKeys(sendNumbers0And23());\r\n        fridayLabel.sendKeys(sendNumbers0And23());\r\n        saturdayLabel.sendKeys(sendNumbers0And23());\r\n        sundayLabel.sendKeys(sendNumbers0And23());\r\n        return new TimeBuilder();\r\n    }\r\n```\r\nThanks for help =)\r\n","title":"convert Strings to WebElements Selenium Java","body":"<p>Im trying to convert my 7 Strings(xpaths) into WebElements and send keys for these labels, but only the first one is converted and my test sending keys only for the first one.</p>\n<pre><code>private static final String DAY_LABEL_VARIABLE = &quot;//*[@id='app']/div[1]/div[2]/div[2]/div/form/div[2]/table/tbody/tr[1]/td['%s']/div/div[2]/input&quot;;\n\n    public TimeBuilder pickData() {\n        String format = &quot;&quot;;\n        for (int i = 3; i &lt; 10; i++) {\n            format = String.format(DAY_LABEL_VARIABLE, i);\n        }\n        WebElement webElement = getDriver().findElement(By.xpath(format));\n        deletingAndAddingContentToLabel(webElement, sendNumbers0And23());\n\n        return new TimeBuilder();\n    }\n</code></pre>\n<p>I tried to add Strings into the list and go through with using for loop but the final outcome is the same like in code block before.</p>\n<pre><code>    public List&lt;String&gt; testList() {\n        String format = &quot;&quot;;\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\n        for (int i = 3; i &lt; 10; i++) {\n            format = String.format(DAY_LABEL_VARIABLE, i);\n            list.add(format);\n        }\n        return list;\n    }\n\n    public TimeBuilder testElements() {\n        for (int i = 0; i &lt; testList().size() - 1; i++) {\n            WebElement webElement = getDriver().findElement(By.xpath(testList().get(i)));\n            deletingAndAddingContentToLabel(webElement, sendNumbers0And23());\n        }\n\n        return new TimeBuilder();\n    }\n</code></pre>\n<p>Of course there is an other solution by manually adding every locators and sending keys for them but its not a solution im looking for:</p>\n<pre><code>    public TimeBuilder sendHoursForEveryDayOfTheWeek() {\n        mondayLabel.sendKeys(sendNumbers0And23());\n        tuesdayLabel.sendKeys(sendNumbers0And23());\n        wednesdayLabel.sendKeys(sendNumbers0And23());\n        thursdayLabel.sendKeys(sendNumbers0And23());\n        fridayLabel.sendKeys(sendNumbers0And23());\n        saturdayLabel.sendKeys(sendNumbers0And23());\n        sundayLabel.sendKeys(sendNumbers0And23());\n        return new TimeBuilder();\n    }\n</code></pre>\n<p>Thanks for help =)</p>\n"},{"tags":["java","junit","jboss-arquillian"],"answers":[{"tags":[],"owner":{"account_id":13944176,"reputation":1,"user_id":10069296,"display_name":"Erol &#220;nala"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693321579,"creation_date":1693321579,"answer_id":77001409,"question_id":74458742,"body_markdown":"I started to get a similar problem with Arquillian 1.7.0.Final/JUnit 4.12 when I migrated my environment to Java17 with JakartaEE. The solution that worked for me was to upgrade to Junit5.","title":"Arquillian with Junit, Could not create new instance of class org.jboss.arquillian.test.impl.EventTestRunnerAdaptor","body":"<p>I started to get a similar problem with Arquillian 1.7.0.Final/JUnit 4.12 when I migrated my environment to Java17 with JakartaEE. The solution that worked for me was to upgrade to Junit5.</p>\n"}],"owner":{"account_id":26036770,"reputation":11,"user_id":19742116,"display_name":"Albert Albatros"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693321579,"creation_date":1668593852,"question_id":74458742,"body_markdown":"I have this all dependencies in my pom.xml file:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.jboss.arquillian.protocol&lt;/groupId&gt;\r\n    &lt;artifactId&gt;arquillian-protocol-servlet&lt;/artifactId&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.jboss.arquillian.junit&lt;/groupId&gt;\r\n    &lt;artifactId&gt;arquillian-junit-container&lt;/artifactId&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;\r\n    &lt;artifactId&gt;arquillian-glassfish-embedded-3.1&lt;/artifactId&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.eu.ingwar.tools&lt;/groupId&gt;\r\n    &lt;artifactId&gt;arquillian-suite-extension&lt;/artifactId&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.jboss.arquillian.extension&lt;/groupId&gt;\r\n    &lt;artifactId&gt;arquillian-transaction-jta&lt;/artifactId&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n, and i get java.lang.RuntimeException: Could not create new instance of class org.jboss.arquillian.test.impl.EventTestRunnerAdaptor. Am i missing some more dependencies?\r\n\r\nI tried to add some more depenedecies but none of them helped me.","title":"Arquillian with Junit, Could not create new instance of class org.jboss.arquillian.test.impl.EventTestRunnerAdaptor","body":"<p>I have this all dependencies in my pom.xml file:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jboss.arquillian.protocol&lt;/groupId&gt;\n    &lt;artifactId&gt;arquillian-protocol-servlet&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.jboss.arquillian.junit&lt;/groupId&gt;\n    &lt;artifactId&gt;arquillian-junit-container&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;\n    &lt;artifactId&gt;arquillian-glassfish-embedded-3.1&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.eu.ingwar.tools&lt;/groupId&gt;\n    &lt;artifactId&gt;arquillian-suite-extension&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.jboss.arquillian.extension&lt;/groupId&gt;\n    &lt;artifactId&gt;arquillian-transaction-jta&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>, and i get java.lang.RuntimeException: Could not create new instance of class org.jboss.arquillian.test.impl.EventTestRunnerAdaptor. Am i missing some more dependencies?</p>\n<p>I tried to add some more depenedecies but none of them helped me.</p>\n"},{"tags":["java","spring","logging","spring-rest"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1447712686,"post_id":33744875,"comment_id":55259969,"body_markdown":"Probably via a logging ServletFilter (e.g. http://stackoverflow.com/a/2171633/995891 ), alternatively `HandlerInterceptor` but that may not work well with logging the response as mentioned in the answer: http://www.concretepage.com/spring/spring-mvc/spring-handlerinterceptor-annotation-example-webmvcconfigureradapter - HandlerInterceptor has access to the method (method: &quot;UsersController.getUser&quot;) though. That&#39;s not known in a servlet filter.","body":"Probably via a logging ServletFilter (e.g. <a href=\"http://stackoverflow.com/a/2171633/995891\">stackoverflow.com/a/2171633/995891</a> ), alternatively <code>HandlerInterceptor</code> but that may not work well with logging the response as mentioned in the answer: <a href=\"http://www.concretepage.com/spring/spring-mvc/spring-handlerinterceptor-annotation-example-webmvcconfigureradapter\" rel=\"nofollow noreferrer\">concretepage.com/spring/spring-mvc/&hellip;</a> - HandlerInterceptor has access to the method (method: &quot;UsersController.getUser&quot;) though. That&#39;s not known in a servlet filter."},{"owner":{"account_id":4522916,"reputation":1224,"user_id":3675565,"display_name":"AntJavaDev"},"score":1,"creation_date":1472112436,"post_id":33744875,"comment_id":65624090,"body_markdown":"still , even if you add a filter or whatever solution at application layer , you will not log all the request , f.e. the HTTP 500 Server Error will not get logged , cause at the time that an unhandled exception will  get thrown at the Application layer , the default embedded tomcat&#39;s on error page will be displayed after swallowing the exception and ofcourse will not preserve the log. Also if you check user1817243 answer , in case of any exception he will again not log the request but he will log the exception (!!).","body":"still , even if you add a filter or whatever solution at application layer , you will not log all the request , f.e. the HTTP 500 Server Error will not get logged , cause at the time that an unhandled exception will  get thrown at the Application layer , the default embedded tomcat&#39;s on error page will be displayed after swallowing the exception and ofcourse will not preserve the log. Also if you check user1817243 answer , in case of any exception he will again not log the request but he will log the exception (!!)."},{"owner":{"account_id":6430407,"reputation":1114,"user_id":4983845,"accept_rate":93,"display_name":"Vale"},"score":0,"creation_date":1472112678,"post_id":33744875,"comment_id":65624237,"body_markdown":"Does that log format must be consistent with every character you wrote? Seems like a JSON translation would be optimal in your case: `LogClass{ getRequestAndSaveIt()} Gson.toJson(LogClass)` as pseudocode","body":"Does that log format must be consistent with every character you wrote? Seems like a JSON translation would be optimal in your case: <code>LogClass{ getRequestAndSaveIt()} Gson.toJson(LogClass)</code> as pseudocode"},{"owner":{"account_id":74886,"reputation":26643,"user_id":214977,"accept_rate":69,"display_name":"granadaCoder"},"score":1,"creation_date":1548165963,"post_id":33744875,"comment_id":95439677,"body_markdown":"Future readers may benefit from my answer (url to follow in this comment).  Basically, I was able to franken-stein together different posts about this question.  PLEASE consider the actuator answer (in the answers below) before trying it by hand.  But the answer I am posting allows &quot;400, 404, 500&quot; (any/all) to be logged, but setting the order-priority to the lowest-priority (or within by &quot;8&quot; if you look at the code).  https://stackoverflow.com/questions/10210645/http-servlet-request-lose-params-from-post-body-after-read-it-once/54258488#54258488","body":"Future readers may benefit from my answer (url to follow in this comment).  Basically, I was able to franken-stein together different posts about this question.  PLEASE consider the actuator answer (in the answers below) before trying it by hand.  But the answer I am posting allows &quot;400, 404, 500&quot; (any/all) to be logged, but setting the order-priority to the lowest-priority (or within by &quot;8&quot; if you look at the code).  <a href=\"https://stackoverflow.com/questions/10210645/http-servlet-request-lose-params-from-post-body-after-read-it-once/54258488#54258488\" title=\"http servlet request lose params from post body after read it once\">stackoverflow.com/questions/10210645/&hellip;</a>"},{"owner":{"account_id":4423722,"reputation":12877,"user_id":4374291,"accept_rate":80,"display_name":"T04435"},"score":0,"creation_date":1567517916,"post_id":33744875,"comment_id":101980900,"body_markdown":"I did follow the spring docs on logging from here: https://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html","body":"I did follow the spring docs on logging from here: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":1474388,"reputation":5265,"user_id":1385174,"accept_rate":60,"display_name":"Adam"},"score":0,"creation_date":1479835322,"post_id":39137815,"comment_id":68721639,"body_markdown":"This works well for response logging - although I had to put a limit on the number of bytes it logs otherwise it trashes the Intellij logging console output.","body":"This works well for response logging - although I had to put a limit on the number of bytes it logs otherwise it trashes the Intellij logging console output."},{"owner":{"account_id":1474388,"reputation":5265,"user_id":1385174,"accept_rate":60,"display_name":"Adam"},"score":0,"creation_date":1479835407,"post_id":39137815,"comment_id":68721689,"body_markdown":"String getContent() {\n    if (bos == null) {\n         return String.format(&quot;called %s too early&quot;,\n                BufferedResponseWrapper.class.getCanonicalName());\n    }\n    byte[] bytes = bos.toByteArray();\n    return new String(Arrays.copyOf(bytes, 5000)) + &quot;....&quot;;\n}","body":"String getContent() {     if (bos == null) {          return String.format(&quot;called %s too early&quot;,                 BufferedResponseWrapper.class.getCanonicalName());     }     byte[] bytes = bos.toByteArray();     return new String(Arrays.copyOf(bytes, 5000)) + &quot;....&quot;; }"},{"owner":{"account_id":1474388,"reputation":5265,"user_id":1385174,"accept_rate":60,"display_name":"Adam"},"score":0,"creation_date":1479896041,"post_id":39137815,"comment_id":68747595,"body_markdown":"It&#39;s also worth putting in a &quot;log.isTraceEnabled()&quot; switch around the logging too.","body":"It&#39;s also worth putting in a &quot;log.isTraceEnabled()&quot; switch around the logging too."},{"owner":{"account_id":1474388,"reputation":5265,"user_id":1385174,"accept_rate":60,"display_name":"Adam"},"score":9,"creation_date":1479896478,"post_id":39137815,"comment_id":68747916,"body_markdown":"What would be cool is if Java added some default methods to HttpServletResponse so we don&#39;t need to write such a huge implementation.","body":"What would be cool is if Java added some default methods to HttpServletResponse so we don&#39;t need to write such a huge implementation."},{"owner":{"account_id":3249876,"reputation":6323,"user_id":2790036,"accept_rate":67,"display_name":"Pratik Singhal"},"score":1,"creation_date":1528602474,"post_id":39137815,"comment_id":88567507,"body_markdown":"This should be the accepted answer! It answers question correctly and to the point. Works perfectly!","body":"This should be the accepted answer! It answers question correctly and to the point. Works perfectly!"},{"owner":{"account_id":74886,"reputation":26643,"user_id":214977,"accept_rate":69,"display_name":"granadaCoder"},"score":2,"creation_date":1547504588,"post_id":39137815,"comment_id":95208275,"body_markdown":"plus one for including the import statements","body":"plus one for including the import statements"},{"owner":{"account_id":8403592,"reputation":521,"user_id":7130244,"display_name":"Nakrule"},"score":0,"creation_date":1570017405,"post_id":39137815,"comment_id":102779894,"body_markdown":"What does  &quot;just register it as a filter&quot; means?","body":"What does  &quot;just register it as a filter&quot; means?"},{"owner":{"account_id":943688,"reputation":2561,"user_id":971355,"accept_rate":79,"display_name":"ka3ak"},"score":0,"creation_date":1594303231,"post_id":39137815,"comment_id":111083940,"body_markdown":"@Nakrule It&#39;s explained here https://www.baeldung.com/spring-boot-add-filter","body":"@Nakrule It&#39;s explained here <a href=\"https://www.baeldung.com/spring-boot-add-filter\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-add-filter</a>"}],"tags":[],"owner":{"account_id":2034569,"reputation":521,"user_id":1817243,"display_name":"user1817243"},"comment_count":8,"down_vote_count":3,"up_vote_count":35,"is_accepted":false,"score":32,"last_activity_date":1472105292,"creation_date":1472105292,"answer_id":39137815,"question_id":33744875,"body_markdown":"This code works for me in a Spring Boot application - just register it as a filter\r\n\r\n        import java.io.BufferedReader;\r\n        import java.io.ByteArrayInputStream;\r\n        import java.io.ByteArrayOutputStream;\r\n        import java.io.IOException;\r\n        import java.io.InputStream;\r\n        import java.io.InputStreamReader;\r\n        import java.io.OutputStream;\r\n        import java.io.PrintWriter;\r\n        import java.util.Collection;\r\n        import java.util.Enumeration;\r\n        import java.util.HashMap;\r\n        import java.util.Locale;\r\n        import java.util.Map;\r\n        import javax.servlet.*;\r\n        import javax.servlet.http.Cookie;\r\n        import javax.servlet.http.HttpServletRequest;\r\n        import javax.servlet.http.HttpServletRequestWrapper;\r\n        import javax.servlet.http.HttpServletResponse;\r\n        import org.apache.commons.io.output.TeeOutputStream;\r\n        import org.slf4j.Logger;\r\n        import org.slf4j.LoggerFactory;\r\n        import org.springframework.stereotype.Component;\r\n\r\n        @Component\r\n        public class HttpLoggingFilter implements Filter {\r\n\r\n            private static final Logger log = LoggerFactory.getLogger(HttpLoggingFilter.class);\r\n\r\n            @Override\r\n            public void init(FilterConfig filterConfig) throws ServletException {\r\n            }\r\n\r\n            @Override\r\n            public void doFilter(ServletRequest request, ServletResponse response,\r\n                                 FilterChain chain) throws IOException, ServletException {\r\n                try {\r\n                    HttpServletRequest httpServletRequest = (HttpServletRequest) request;\r\n                    HttpServletResponse httpServletResponse = (HttpServletResponse) response;\r\n\r\n                    Map&lt;String, String&gt; requestMap = this\r\n                            .getTypesafeRequestMap(httpServletRequest);\r\n                    BufferedRequestWrapper bufferedRequest = new BufferedRequestWrapper(\r\n                            httpServletRequest);\r\n                    BufferedResponseWrapper bufferedResponse = new BufferedResponseWrapper(\r\n                            httpServletResponse);\r\n\r\n                    final StringBuilder logMessage = new StringBuilder(\r\n                            &quot;REST Request - &quot;).append(&quot;[HTTP METHOD:&quot;)\r\n                            .append(httpServletRequest.getMethod())\r\n                            .append(&quot;] [PATH INFO:&quot;)\r\n                            .append(httpServletRequest.getServletPath())\r\n                            .append(&quot;] [REQUEST PARAMETERS:&quot;).append(requestMap)\r\n                            .append(&quot;] [REQUEST BODY:&quot;)\r\n                            .append(bufferedRequest.getRequestBody())\r\n                            .append(&quot;] [REMOTE ADDRESS:&quot;)\r\n                            .append(httpServletRequest.getRemoteAddr()).append(&quot;]&quot;);\r\n\r\n                    chain.doFilter(bufferedRequest, bufferedResponse);\r\n                    logMessage.append(&quot; [RESPONSE:&quot;)\r\n                            .append(bufferedResponse.getContent()).append(&quot;]&quot;);\r\n                    log.debug(logMessage.toString());\r\n                } catch (Throwable a) {\r\n                    log.error(a.getMessage());\r\n                }\r\n            }\r\n\r\n            private Map&lt;String, String&gt; getTypesafeRequestMap(HttpServletRequest request) {\r\n                Map&lt;String, String&gt; typesafeRequestMap = new HashMap&lt;String, String&gt;();\r\n                Enumeration&lt;?&gt; requestParamNames = request.getParameterNames();\r\n                while (requestParamNames.hasMoreElements()) {\r\n                    String requestParamName = (String) requestParamNames.nextElement();\r\n                    String requestParamValue;\r\n                    if (requestParamName.equalsIgnoreCase(&quot;password&quot;)) {\r\n                        requestParamValue = &quot;********&quot;;\r\n                    } else {\r\n                        requestParamValue = request.getParameter(requestParamName);\r\n                    }\r\n                    typesafeRequestMap.put(requestParamName, requestParamValue);\r\n                }\r\n                return typesafeRequestMap;\r\n            }\r\n\r\n            @Override\r\n            public void destroy() {\r\n            }\r\n\r\n            private static final class BufferedRequestWrapper extends\r\n                    HttpServletRequestWrapper {\r\n\r\n                private ByteArrayInputStream bais = null;\r\n                private ByteArrayOutputStream baos = null;\r\n                private BufferedServletInputStream bsis = null;\r\n                private byte[] buffer = null;\r\n\r\n                public BufferedRequestWrapper(HttpServletRequest req)\r\n                        throws IOException {\r\n                    super(req);\r\n                    // Read InputStream and store its content in a buffer.\r\n                    InputStream is = req.getInputStream();\r\n                    this.baos = new ByteArrayOutputStream();\r\n                    byte buf[] = new byte[1024];\r\n                    int read;\r\n                    while ((read = is.read(buf)) &gt; 0) {\r\n                        this.baos.write(buf, 0, read);\r\n                    }\r\n                    this.buffer = this.baos.toByteArray();\r\n                }\r\n\r\n                @Override\r\n                public ServletInputStream getInputStream() {\r\n                    this.bais = new ByteArrayInputStream(this.buffer);\r\n                    this.bsis = new BufferedServletInputStream(this.bais);\r\n                    return this.bsis;\r\n                }\r\n\r\n                String getRequestBody() throws IOException {\r\n                    BufferedReader reader = new BufferedReader(new InputStreamReader(\r\n                            this.getInputStream()));\r\n                    String line = null;\r\n                    StringBuilder inputBuffer = new StringBuilder();\r\n                    do {\r\n                        line = reader.readLine();\r\n                        if (null != line) {\r\n                            inputBuffer.append(line.trim());\r\n                        }\r\n                    } while (line != null);\r\n                    reader.close();\r\n                    return inputBuffer.toString().trim();\r\n                }\r\n\r\n            }\r\n\r\n            private static final class BufferedServletInputStream extends\r\n                    ServletInputStream {\r\n\r\n                private ByteArrayInputStream bais;\r\n\r\n                public BufferedServletInputStream(ByteArrayInputStream bais) {\r\n                    this.bais = bais;\r\n                }\r\n\r\n                @Override\r\n                public int available() {\r\n                    return this.bais.available();\r\n                }\r\n\r\n                @Override\r\n                public int read() {\r\n                    return this.bais.read();\r\n                }\r\n\r\n                @Override\r\n                public int read(byte[] buf, int off, int len) {\r\n                    return this.bais.read(buf, off, len);\r\n                }\r\n\r\n                @Override\r\n                public boolean isFinished() {\r\n                    return false;\r\n                }\r\n\r\n                @Override\r\n                public boolean isReady() {\r\n                    return true;\r\n                }\r\n\r\n                @Override\r\n                public void setReadListener(ReadListener readListener) {\r\n\r\n                }\r\n            }\r\n\r\n            public class TeeServletOutputStream extends ServletOutputStream {\r\n\r\n                private final TeeOutputStream targetStream;\r\n\r\n                public TeeServletOutputStream(OutputStream one, OutputStream two) {\r\n                    targetStream = new TeeOutputStream(one, two);\r\n                }\r\n\r\n                @Override\r\n                public void write(int arg0) throws IOException {\r\n                    this.targetStream.write(arg0);\r\n                }\r\n\r\n                public void flush() throws IOException {\r\n                    super.flush();\r\n                    this.targetStream.flush();\r\n                }\r\n\r\n                public void close() throws IOException {\r\n                    super.close();\r\n                    this.targetStream.close();\r\n                }\r\n\r\n                @Override\r\n                public boolean isReady() {\r\n                    return false;\r\n                }\r\n\r\n                @Override\r\n                public void setWriteListener(WriteListener writeListener) {\r\n\r\n                }\r\n            }\r\n\r\n            public class BufferedResponseWrapper implements HttpServletResponse {\r\n\r\n                HttpServletResponse original;\r\n                TeeServletOutputStream tee;\r\n                ByteArrayOutputStream bos;\r\n\r\n                public BufferedResponseWrapper(HttpServletResponse response) {\r\n                    original = response;\r\n                }\r\n\r\n                public String getContent() {\r\n                    return bos.toString();\r\n                }\r\n\r\n                public PrintWriter getWriter() throws IOException {\r\n                    return original.getWriter();\r\n                }\r\n\r\n                public ServletOutputStream getOutputStream() throws IOException {\r\n                    if (tee == null) {\r\n                        bos = new ByteArrayOutputStream();\r\n                        tee = new TeeServletOutputStream(original.getOutputStream(),\r\n                                bos);\r\n                    }\r\n                    return tee;\r\n\r\n                }\r\n\r\n                @Override\r\n                public String getCharacterEncoding() {\r\n                    return original.getCharacterEncoding();\r\n                }\r\n\r\n                @Override\r\n                public String getContentType() {\r\n                    return original.getContentType();\r\n                }\r\n\r\n                @Override\r\n                public void setCharacterEncoding(String charset) {\r\n                    original.setCharacterEncoding(charset);\r\n                }\r\n\r\n                @Override\r\n                public void setContentLength(int len) {\r\n                    original.setContentLength(len);\r\n                }\r\n\r\n                @Override\r\n                public void setContentLengthLong(long l) {\r\n                    original.setContentLengthLong(l);\r\n                }\r\n\r\n                @Override\r\n                public void setContentType(String type) {\r\n                    original.setContentType(type);\r\n                }\r\n\r\n                @Override\r\n                public void setBufferSize(int size) {\r\n                    original.setBufferSize(size);\r\n                }\r\n\r\n                @Override\r\n                public int getBufferSize() {\r\n                    return original.getBufferSize();\r\n                }\r\n\r\n                @Override\r\n                public void flushBuffer() throws IOException {\r\n                    tee.flush();\r\n                }\r\n\r\n                @Override\r\n                public void resetBuffer() {\r\n                    original.resetBuffer();\r\n                }\r\n\r\n                @Override\r\n                public boolean isCommitted() {\r\n                    return original.isCommitted();\r\n                }\r\n\r\n                @Override\r\n                public void reset() {\r\n                    original.reset();\r\n                }\r\n\r\n                @Override\r\n                public void setLocale(Locale loc) {\r\n                    original.setLocale(loc);\r\n                }\r\n\r\n                @Override\r\n                public Locale getLocale() {\r\n                    return original.getLocale();\r\n                }\r\n\r\n                @Override\r\n                public void addCookie(Cookie cookie) {\r\n                    original.addCookie(cookie);\r\n                }\r\n\r\n                @Override\r\n                public boolean containsHeader(String name) {\r\n                    return original.containsHeader(name);\r\n                }\r\n\r\n                @Override\r\n                public String encodeURL(String url) {\r\n                    return original.encodeURL(url);\r\n                }\r\n\r\n                @Override\r\n                public String encodeRedirectURL(String url) {\r\n                    return original.encodeRedirectURL(url);\r\n                }\r\n\r\n                @SuppressWarnings(&quot;deprecation&quot;)\r\n                @Override\r\n                public String encodeUrl(String url) {\r\n                    return original.encodeUrl(url);\r\n                }\r\n\r\n                @SuppressWarnings(&quot;deprecation&quot;)\r\n                @Override\r\n                public String encodeRedirectUrl(String url) {\r\n                    return original.encodeRedirectUrl(url);\r\n                }\r\n\r\n                @Override\r\n                public void sendError(int sc, String msg) throws IOException {\r\n                    original.sendError(sc, msg);\r\n                }\r\n\r\n                @Override\r\n                public void sendError(int sc) throws IOException {\r\n                    original.sendError(sc);\r\n                }\r\n\r\n                @Override\r\n                public void sendRedirect(String location) throws IOException {\r\n                    original.sendRedirect(location);\r\n                }\r\n\r\n                @Override\r\n                public void setDateHeader(String name, long date) {\r\n                    original.setDateHeader(name, date);\r\n                }\r\n\r\n                @Override\r\n                public void addDateHeader(String name, long date) {\r\n                    original.addDateHeader(name, date);\r\n                }\r\n\r\n                @Override\r\n                public void setHeader(String name, String value) {\r\n                    original.setHeader(name, value);\r\n                }\r\n\r\n                @Override\r\n                public void addHeader(String name, String value) {\r\n                    original.addHeader(name, value);\r\n                }\r\n\r\n                @Override\r\n                public void setIntHeader(String name, int value) {\r\n                    original.setIntHeader(name, value);\r\n                }\r\n\r\n                @Override\r\n                public void addIntHeader(String name, int value) {\r\n                    original.addIntHeader(name, value);\r\n                }\r\n\r\n                @Override\r\n                public void setStatus(int sc) {\r\n                    original.setStatus(sc);\r\n                }\r\n\r\n                @SuppressWarnings(&quot;deprecation&quot;)\r\n                @Override\r\n                public void setStatus(int sc, String sm) {\r\n                    original.setStatus(sc, sm);\r\n                }\r\n\r\n                @Override\r\n                public String getHeader(String arg0) {\r\n                    return original.getHeader(arg0);\r\n                }\r\n\r\n                @Override\r\n                public Collection&lt;String&gt; getHeaderNames() {\r\n                    return original.getHeaderNames();\r\n                }\r\n\r\n                @Override\r\n                public Collection&lt;String&gt; getHeaders(String arg0) {\r\n                    return original.getHeaders(arg0);\r\n                }\r\n\r\n                @Override\r\n                public int getStatus() {\r\n                    return original.getStatus();\r\n                }\r\n\r\n            }\r\n        }","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>This code works for me in a Spring Boot application - just register it as a filter</p>\n\n<pre><code>    import java.io.BufferedReader;\n    import java.io.ByteArrayInputStream;\n    import java.io.ByteArrayOutputStream;\n    import java.io.IOException;\n    import java.io.InputStream;\n    import java.io.InputStreamReader;\n    import java.io.OutputStream;\n    import java.io.PrintWriter;\n    import java.util.Collection;\n    import java.util.Enumeration;\n    import java.util.HashMap;\n    import java.util.Locale;\n    import java.util.Map;\n    import javax.servlet.*;\n    import javax.servlet.http.Cookie;\n    import javax.servlet.http.HttpServletRequest;\n    import javax.servlet.http.HttpServletRequestWrapper;\n    import javax.servlet.http.HttpServletResponse;\n    import org.apache.commons.io.output.TeeOutputStream;\n    import org.slf4j.Logger;\n    import org.slf4j.LoggerFactory;\n    import org.springframework.stereotype.Component;\n\n    @Component\n    public class HttpLoggingFilter implements Filter {\n\n        private static final Logger log = LoggerFactory.getLogger(HttpLoggingFilter.class);\n\n        @Override\n        public void init(FilterConfig filterConfig) throws ServletException {\n        }\n\n        @Override\n        public void doFilter(ServletRequest request, ServletResponse response,\n                             FilterChain chain) throws IOException, ServletException {\n            try {\n                HttpServletRequest httpServletRequest = (HttpServletRequest) request;\n                HttpServletResponse httpServletResponse = (HttpServletResponse) response;\n\n                Map&lt;String, String&gt; requestMap = this\n                        .getTypesafeRequestMap(httpServletRequest);\n                BufferedRequestWrapper bufferedRequest = new BufferedRequestWrapper(\n                        httpServletRequest);\n                BufferedResponseWrapper bufferedResponse = new BufferedResponseWrapper(\n                        httpServletResponse);\n\n                final StringBuilder logMessage = new StringBuilder(\n                        \"REST Request - \").append(\"[HTTP METHOD:\")\n                        .append(httpServletRequest.getMethod())\n                        .append(\"] [PATH INFO:\")\n                        .append(httpServletRequest.getServletPath())\n                        .append(\"] [REQUEST PARAMETERS:\").append(requestMap)\n                        .append(\"] [REQUEST BODY:\")\n                        .append(bufferedRequest.getRequestBody())\n                        .append(\"] [REMOTE ADDRESS:\")\n                        .append(httpServletRequest.getRemoteAddr()).append(\"]\");\n\n                chain.doFilter(bufferedRequest, bufferedResponse);\n                logMessage.append(\" [RESPONSE:\")\n                        .append(bufferedResponse.getContent()).append(\"]\");\n                log.debug(logMessage.toString());\n            } catch (Throwable a) {\n                log.error(a.getMessage());\n            }\n        }\n\n        private Map&lt;String, String&gt; getTypesafeRequestMap(HttpServletRequest request) {\n            Map&lt;String, String&gt; typesafeRequestMap = new HashMap&lt;String, String&gt;();\n            Enumeration&lt;?&gt; requestParamNames = request.getParameterNames();\n            while (requestParamNames.hasMoreElements()) {\n                String requestParamName = (String) requestParamNames.nextElement();\n                String requestParamValue;\n                if (requestParamName.equalsIgnoreCase(\"password\")) {\n                    requestParamValue = \"********\";\n                } else {\n                    requestParamValue = request.getParameter(requestParamName);\n                }\n                typesafeRequestMap.put(requestParamName, requestParamValue);\n            }\n            return typesafeRequestMap;\n        }\n\n        @Override\n        public void destroy() {\n        }\n\n        private static final class BufferedRequestWrapper extends\n                HttpServletRequestWrapper {\n\n            private ByteArrayInputStream bais = null;\n            private ByteArrayOutputStream baos = null;\n            private BufferedServletInputStream bsis = null;\n            private byte[] buffer = null;\n\n            public BufferedRequestWrapper(HttpServletRequest req)\n                    throws IOException {\n                super(req);\n                // Read InputStream and store its content in a buffer.\n                InputStream is = req.getInputStream();\n                this.baos = new ByteArrayOutputStream();\n                byte buf[] = new byte[1024];\n                int read;\n                while ((read = is.read(buf)) &gt; 0) {\n                    this.baos.write(buf, 0, read);\n                }\n                this.buffer = this.baos.toByteArray();\n            }\n\n            @Override\n            public ServletInputStream getInputStream() {\n                this.bais = new ByteArrayInputStream(this.buffer);\n                this.bsis = new BufferedServletInputStream(this.bais);\n                return this.bsis;\n            }\n\n            String getRequestBody() throws IOException {\n                BufferedReader reader = new BufferedReader(new InputStreamReader(\n                        this.getInputStream()));\n                String line = null;\n                StringBuilder inputBuffer = new StringBuilder();\n                do {\n                    line = reader.readLine();\n                    if (null != line) {\n                        inputBuffer.append(line.trim());\n                    }\n                } while (line != null);\n                reader.close();\n                return inputBuffer.toString().trim();\n            }\n\n        }\n\n        private static final class BufferedServletInputStream extends\n                ServletInputStream {\n\n            private ByteArrayInputStream bais;\n\n            public BufferedServletInputStream(ByteArrayInputStream bais) {\n                this.bais = bais;\n            }\n\n            @Override\n            public int available() {\n                return this.bais.available();\n            }\n\n            @Override\n            public int read() {\n                return this.bais.read();\n            }\n\n            @Override\n            public int read(byte[] buf, int off, int len) {\n                return this.bais.read(buf, off, len);\n            }\n\n            @Override\n            public boolean isFinished() {\n                return false;\n            }\n\n            @Override\n            public boolean isReady() {\n                return true;\n            }\n\n            @Override\n            public void setReadListener(ReadListener readListener) {\n\n            }\n        }\n\n        public class TeeServletOutputStream extends ServletOutputStream {\n\n            private final TeeOutputStream targetStream;\n\n            public TeeServletOutputStream(OutputStream one, OutputStream two) {\n                targetStream = new TeeOutputStream(one, two);\n            }\n\n            @Override\n            public void write(int arg0) throws IOException {\n                this.targetStream.write(arg0);\n            }\n\n            public void flush() throws IOException {\n                super.flush();\n                this.targetStream.flush();\n            }\n\n            public void close() throws IOException {\n                super.close();\n                this.targetStream.close();\n            }\n\n            @Override\n            public boolean isReady() {\n                return false;\n            }\n\n            @Override\n            public void setWriteListener(WriteListener writeListener) {\n\n            }\n        }\n\n        public class BufferedResponseWrapper implements HttpServletResponse {\n\n            HttpServletResponse original;\n            TeeServletOutputStream tee;\n            ByteArrayOutputStream bos;\n\n            public BufferedResponseWrapper(HttpServletResponse response) {\n                original = response;\n            }\n\n            public String getContent() {\n                return bos.toString();\n            }\n\n            public PrintWriter getWriter() throws IOException {\n                return original.getWriter();\n            }\n\n            public ServletOutputStream getOutputStream() throws IOException {\n                if (tee == null) {\n                    bos = new ByteArrayOutputStream();\n                    tee = new TeeServletOutputStream(original.getOutputStream(),\n                            bos);\n                }\n                return tee;\n\n            }\n\n            @Override\n            public String getCharacterEncoding() {\n                return original.getCharacterEncoding();\n            }\n\n            @Override\n            public String getContentType() {\n                return original.getContentType();\n            }\n\n            @Override\n            public void setCharacterEncoding(String charset) {\n                original.setCharacterEncoding(charset);\n            }\n\n            @Override\n            public void setContentLength(int len) {\n                original.setContentLength(len);\n            }\n\n            @Override\n            public void setContentLengthLong(long l) {\n                original.setContentLengthLong(l);\n            }\n\n            @Override\n            public void setContentType(String type) {\n                original.setContentType(type);\n            }\n\n            @Override\n            public void setBufferSize(int size) {\n                original.setBufferSize(size);\n            }\n\n            @Override\n            public int getBufferSize() {\n                return original.getBufferSize();\n            }\n\n            @Override\n            public void flushBuffer() throws IOException {\n                tee.flush();\n            }\n\n            @Override\n            public void resetBuffer() {\n                original.resetBuffer();\n            }\n\n            @Override\n            public boolean isCommitted() {\n                return original.isCommitted();\n            }\n\n            @Override\n            public void reset() {\n                original.reset();\n            }\n\n            @Override\n            public void setLocale(Locale loc) {\n                original.setLocale(loc);\n            }\n\n            @Override\n            public Locale getLocale() {\n                return original.getLocale();\n            }\n\n            @Override\n            public void addCookie(Cookie cookie) {\n                original.addCookie(cookie);\n            }\n\n            @Override\n            public boolean containsHeader(String name) {\n                return original.containsHeader(name);\n            }\n\n            @Override\n            public String encodeURL(String url) {\n                return original.encodeURL(url);\n            }\n\n            @Override\n            public String encodeRedirectURL(String url) {\n                return original.encodeRedirectURL(url);\n            }\n\n            @SuppressWarnings(\"deprecation\")\n            @Override\n            public String encodeUrl(String url) {\n                return original.encodeUrl(url);\n            }\n\n            @SuppressWarnings(\"deprecation\")\n            @Override\n            public String encodeRedirectUrl(String url) {\n                return original.encodeRedirectUrl(url);\n            }\n\n            @Override\n            public void sendError(int sc, String msg) throws IOException {\n                original.sendError(sc, msg);\n            }\n\n            @Override\n            public void sendError(int sc) throws IOException {\n                original.sendError(sc);\n            }\n\n            @Override\n            public void sendRedirect(String location) throws IOException {\n                original.sendRedirect(location);\n            }\n\n            @Override\n            public void setDateHeader(String name, long date) {\n                original.setDateHeader(name, date);\n            }\n\n            @Override\n            public void addDateHeader(String name, long date) {\n                original.addDateHeader(name, date);\n            }\n\n            @Override\n            public void setHeader(String name, String value) {\n                original.setHeader(name, value);\n            }\n\n            @Override\n            public void addHeader(String name, String value) {\n                original.addHeader(name, value);\n            }\n\n            @Override\n            public void setIntHeader(String name, int value) {\n                original.setIntHeader(name, value);\n            }\n\n            @Override\n            public void addIntHeader(String name, int value) {\n                original.addIntHeader(name, value);\n            }\n\n            @Override\n            public void setStatus(int sc) {\n                original.setStatus(sc);\n            }\n\n            @SuppressWarnings(\"deprecation\")\n            @Override\n            public void setStatus(int sc, String sm) {\n                original.setStatus(sc, sm);\n            }\n\n            @Override\n            public String getHeader(String arg0) {\n                return original.getHeader(arg0);\n            }\n\n            @Override\n            public Collection&lt;String&gt; getHeaderNames() {\n                return original.getHeaderNames();\n            }\n\n            @Override\n            public Collection&lt;String&gt; getHeaders(String arg0) {\n                return original.getHeaders(arg0);\n            }\n\n            @Override\n            public int getStatus() {\n                return original.getStatus();\n            }\n\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":99729,"reputation":6589,"user_id":269221,"accept_rate":83,"display_name":"Tom Howard"},"score":2,"creation_date":1472690009,"post_id":39181445,"comment_id":65857872,"body_markdown":"This logs the method invocation, not what was actually received and sent at the HTTP level.","body":"This logs the method invocation, not what was actually received and sent at the HTTP level."},{"owner":{"display_name":"user6023611"},"score":1,"creation_date":1480406821,"post_id":39181445,"comment_id":68936917,"body_markdown":"How to write request BODY ? In my case it is POST BODY. on request.getReader or getInputStream I get error that stream is closed.","body":"How to write request BODY ? In my case it is POST BODY. on request.getReader or getInputStream I get error that stream is closed."},{"owner":{"account_id":2520844,"reputation":4665,"user_id":2191256,"display_name":"vilpe89"},"score":0,"creation_date":1699439075,"post_id":39181445,"comment_id":136530542,"body_markdown":"yeah stream is closed because it will be consumed by Spring before aspect gets called","body":"yeah stream is closed because it will be consumed by Spring before aspect gets called"}],"tags":[],"owner":{"account_id":6995023,"reputation":600,"user_id":5362960,"display_name":"GreyGoose"},"comment_count":3,"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1472302890,"creation_date":1472302890,"answer_id":39181445,"question_id":33744875,"body_markdown":"If you dont mind trying Spring AOP, this is something I have been exploring for logging purposes and it works pretty well for me. It wont log requests that have not been defined and failed request attempts though.\r\n\r\nAdd these three dependencies\r\n\r\n    spring-aop, aspectjrt, aspectjweaver\r\n\r\nAdd this to your xml config file `&lt;aop:aspectj-autoproxy/&gt;`\r\n\r\nCreate an annotation which can be used as a pointcut \r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target({ElementType.METHOD,ElementType.TYPE})\r\n    public @interface EnableLogging {\r\n    ActionType actionType();\r\n    }\r\n\r\nNow annotate all your rest API methods which you want to log\r\n\r\n    @EnableLogging(actionType = ActionType.SOME_EMPLOYEE_ACTION)\r\n\t@Override\r\n\tpublic Response getEmployees(RequestDto req, final String param) {\r\n    ...\r\n    }\r\n\r\nNow on to the Aspect. component-scan the package which this class is in.\r\n\r\n    @Aspect\r\n    @Component\r\n    public class Aspects {\r\n\r\n    @AfterReturning(pointcut = &quot;execution(@co.xyz.aspect.EnableLogging * *(..)) &amp;&amp; @annotation(enableLogging) &amp;&amp; args(reqArg, reqArg1,..)&quot;, returning = &quot;result&quot;)\r\n\tpublic void auditInfo(JoinPoint joinPoint, Object result, EnableLogging enableLogging, Object reqArg, String reqArg1) {\r\n\r\n\t\tHttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes())\r\n\t\t\t\t.getRequest();\r\n\r\n\t\tif (result instanceof Response) {\r\n\t\t\tResponse responseObj = (Response) result;\r\n\r\n\t\tString requestUrl = request.getScheme() + &quot;://&quot; + request.getServerName()\r\n\t\t\t\t\t+ &quot;:&quot; + request.getServerPort() + request.getContextPath() + request.getRequestURI()\r\n\t\t\t\t\t+ &quot;?&quot; + request.getQueryString();\r\n\r\n    String clientIp = request.getRemoteAddr();\r\n    String clientRequest = reqArg.toString();\r\n    int httpResponseStatus = responseObj.getStatus();\r\n    responseObj.getEntity();\r\n    // Can log whatever stuff from here in a single spot.\r\n    }\r\n\r\n\r\n\t@AfterThrowing(pointcut = &quot;execution(@co.xyz.aspect.EnableLogging * *(..)) &amp;&amp; @annotation(enableLogging) &amp;&amp; args(reqArg, reqArg1,..)&quot;, throwing=&quot;exception&quot;)\r\n\tpublic void auditExceptionInfo(JoinPoint joinPoint, Throwable exception, EnableLogging enableLogging, Object reqArg, String reqArg1) {\r\n\r\n\t\tHttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes())\r\n\t\t\t\t.getRequest();\r\n\t\t\r\n\t\tString requestUrl = request.getScheme() + &quot;://&quot; + request.getServerName()\r\n\t\t+ &quot;:&quot; + request.getServerPort() + request.getContextPath() + request.getRequestURI()\r\n\t\t+ &quot;?&quot; + request.getQueryString();\r\n\t\t\r\n\t\texception.getMessage();\r\n\t\texception.getCause();\r\n\t\texception.printStackTrace();\r\n\t\texception.getLocalizedMessage();\r\n        // Can log whatever exceptions, requests, etc from here in a single spot.\r\n\t    }\r\n    }\r\n\r\n\r\n&gt; @AfterReturning advice runs when a matched method execution returns\r\n&gt; normally.\r\n&gt; \r\n&gt; @AfterThrowing advice runs when a matched method execution exits by\r\n&gt; throwing an exception.\r\n\r\nIf you want to read in detail read through this.\r\nhttp://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>If you dont mind trying Spring AOP, this is something I have been exploring for logging purposes and it works pretty well for me. It wont log requests that have not been defined and failed request attempts though.</p>\n\n<p>Add these three dependencies</p>\n\n<pre><code>spring-aop, aspectjrt, aspectjweaver\n</code></pre>\n\n<p>Add this to your xml config file <code>&lt;aop:aspectj-autoproxy/&gt;</code></p>\n\n<p>Create an annotation which can be used as a pointcut </p>\n\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.METHOD,ElementType.TYPE})\npublic @interface EnableLogging {\nActionType actionType();\n}\n</code></pre>\n\n<p>Now annotate all your rest API methods which you want to log</p>\n\n<pre><code>@EnableLogging(actionType = ActionType.SOME_EMPLOYEE_ACTION)\n@Override\npublic Response getEmployees(RequestDto req, final String param) {\n...\n}\n</code></pre>\n\n<p>Now on to the Aspect. component-scan the package which this class is in.</p>\n\n<pre><code>@Aspect\n@Component\npublic class Aspects {\n\n@AfterReturning(pointcut = \"execution(@co.xyz.aspect.EnableLogging * *(..)) &amp;&amp; @annotation(enableLogging) &amp;&amp; args(reqArg, reqArg1,..)\", returning = \"result\")\npublic void auditInfo(JoinPoint joinPoint, Object result, EnableLogging enableLogging, Object reqArg, String reqArg1) {\n\n    HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes())\n            .getRequest();\n\n    if (result instanceof Response) {\n        Response responseObj = (Response) result;\n\n    String requestUrl = request.getScheme() + \"://\" + request.getServerName()\n                + \":\" + request.getServerPort() + request.getContextPath() + request.getRequestURI()\n                + \"?\" + request.getQueryString();\n\nString clientIp = request.getRemoteAddr();\nString clientRequest = reqArg.toString();\nint httpResponseStatus = responseObj.getStatus();\nresponseObj.getEntity();\n// Can log whatever stuff from here in a single spot.\n}\n\n\n@AfterThrowing(pointcut = \"execution(@co.xyz.aspect.EnableLogging * *(..)) &amp;&amp; @annotation(enableLogging) &amp;&amp; args(reqArg, reqArg1,..)\", throwing=\"exception\")\npublic void auditExceptionInfo(JoinPoint joinPoint, Throwable exception, EnableLogging enableLogging, Object reqArg, String reqArg1) {\n\n    HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes())\n            .getRequest();\n\n    String requestUrl = request.getScheme() + \"://\" + request.getServerName()\n    + \":\" + request.getServerPort() + request.getContextPath() + request.getRequestURI()\n    + \"?\" + request.getQueryString();\n\n    exception.getMessage();\n    exception.getCause();\n    exception.printStackTrace();\n    exception.getLocalizedMessage();\n    // Can log whatever exceptions, requests, etc from here in a single spot.\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>@AfterReturning advice runs when a matched method execution returns\n  normally.</p>\n  \n  <p>@AfterThrowing advice runs when a matched method execution exits by\n  throwing an exception.</p>\n</blockquote>\n\n<p>If you want to read in detail read through this.\n<a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html\">http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html</a></p>\n"},{"comments":[{"owner":{"account_id":99729,"reputation":6589,"user_id":269221,"accept_rate":83,"display_name":"Tom Howard"},"score":3,"creation_date":1472690130,"post_id":39207422,"comment_id":65857897,"body_markdown":"what happens when the response is a stream and the stream doesn&#39;t support seek? Will the above still work?","body":"what happens when the response is a stream and the stream doesn&#39;t support seek? Will the above still work?"},{"owner":{"account_id":99729,"reputation":6589,"user_id":269221,"accept_rate":83,"display_name":"Tom Howard"},"score":0,"creation_date":1472690627,"post_id":39207422,"comment_id":65858018,"body_markdown":"I don&#39;t care about the method invoked, just the data received and sent. Filter appears to point me in the right direction and @ike_love&#39;s response has directed me to https://github.com/spring-projects/spring-boot/blob/master/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/trace/WebRequestTraceFilter.java","body":"I don&#39;t care about the method invoked, just the data received and sent. Filter appears to point me in the right direction and @ike_love&#39;s response has directed me to <a href=\"https://github.com/spring-projects/spring-boot/blob/master/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/trace/WebRequestTraceFilter.java\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/blob/master/&hellip;</a>"},{"owner":{"account_id":393366,"reputation":3638,"user_id":755183,"accept_rate":71,"display_name":"hahn"},"score":1,"creation_date":1472711301,"post_id":39207422,"comment_id":65863466,"body_markdown":"@TomHoward AFAIK, there&#39;s no out of the box &quot;response logging&quot; in spring. Therefore you can extend WebRequestTraceFilter or AbstractRequestLoggingFilter adding response logging logic.","body":"@TomHoward AFAIK, there&#39;s no out of the box &quot;response logging&quot; in spring. Therefore you can extend WebRequestTraceFilter or AbstractRequestLoggingFilter adding response logging logic."},{"owner":{"account_id":71704,"reputation":4230,"user_id":207352,"accept_rate":51,"display_name":"Pavel Vlasov"},"score":0,"creation_date":1508427065,"post_id":39207422,"comment_id":80614688,"body_markdown":"Works just fine!","body":"Works just fine!"},{"owner":{"account_id":3675763,"reputation":1288,"user_id":3061903,"accept_rate":55,"display_name":"Vishal Maral"},"score":0,"creation_date":1520854203,"post_id":39207422,"comment_id":85471298,"body_markdown":"@hahn why did you use Dispatcher servlet for this? can same login not be added with filter in doFilter?","body":"@hahn why did you use Dispatcher servlet for this? can same login not be added with filter in doFilter?"},{"owner":{"account_id":2093803,"reputation":439,"user_id":1863021,"display_name":"Mayank Madhav"},"score":0,"creation_date":1587763504,"post_id":39207422,"comment_id":108648083,"body_markdown":"@hahn To make this solution work, is it necessary to change the packaging to war? Coz when i tried this in my spring boot rest api with jar packaging (embedded tomcat) , i keep getting the error java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/loggingDispatcherServlet-servlet.xml]","body":"@hahn To make this solution work, is it necessary to change the packaging to war? Coz when i tried this in my spring boot rest api with jar packaging (embedded tomcat) , i keep getting the error java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/loggingDispatcherServlet-servlet.xml]"},{"owner":{"account_id":12959467,"reputation":421,"user_id":9369165,"display_name":"Honey Shah"},"score":0,"creation_date":1597724367,"post_id":39207422,"comment_id":112219559,"body_markdown":"@hahn dispatcher servlet is throwing Bad request for RequestPart params. Is there any way to solve it?","body":"@hahn dispatcher servlet is throwing Bad request for RequestPart params. Is there any way to solve it?"},{"owner":{"account_id":19114960,"reputation":508,"user_id":14438633,"display_name":"Gilad Dahan"},"score":0,"creation_date":1627549357,"post_id":39207422,"comment_id":121187465,"body_markdown":"This custom class does not work when the request is of type &quot;multipart/form-data&quot; :(","body":"This custom class does not work when the request is of type &quot;multipart/form-data&quot; :("},{"owner":{"account_id":997805,"reputation":126,"user_id":1013339,"display_name":"Kaur Kase"},"score":0,"creation_date":1700480583,"post_id":39207422,"comment_id":136655702,"body_markdown":"ContentCachingResponseWrapper breaks SockJS fallback options(xhr_streaming, xhr_polling). Just adding this here in the hopes that someone googling it may find it.","body":"ContentCachingResponseWrapper breaks SockJS fallback options(xhr_streaming, xhr_polling). Just adding this here in the hopes that someone googling it may find it."},{"owner":{"account_id":5226795,"reputation":656,"user_id":4178596,"accept_rate":91,"display_name":"t4dohx"},"score":0,"creation_date":1700923863,"post_id":39207422,"comment_id":136712778,"body_markdown":"The doDispatch method gets executed twice when controller throws any exception in Spring Boot 3.2.0. First time there is no exception message in response payload, the second time there is no payload in request. Help?","body":"The doDispatch method gets executed twice when controller throws any exception in Spring Boot 3.2.0. First time there is no exception message in response payload, the second time there is no payload in request. Help?"}],"tags":[],"owner":{"account_id":393366,"reputation":3638,"user_id":755183,"accept_rate":71,"display_name":"hahn"},"comment_count":10,"down_vote_count":1,"up_vote_count":104,"is_accepted":false,"score":103,"last_activity_date":1472484495,"creation_date":1472477010,"answer_id":39207422,"question_id":33744875,"body_markdown":"You could use `javax.servlet.Filter` if there wasn&#39;t a requirement to log java method that been executed.\r\n\r\nBut with this requirement you have to access information stored in `handlerMapping` of `DispatcherServlet`. That said, you can override `DispatcherServlet` to accomplish logging of request/response pair.\r\n\r\nBelow is an example of idea that can be further enhanced and adopted to your needs.\r\n   \r\n\r\n    public class LoggableDispatcherServlet extends DispatcherServlet {\r\n\r\n        private final Log logger = LogFactory.getLog(getClass());\r\n\r\n        @Override\r\n        protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {\r\n            if (!(request instanceof ContentCachingRequestWrapper)) {\r\n                request = new ContentCachingRequestWrapper(request);\r\n            }\r\n            if (!(response instanceof ContentCachingResponseWrapper)) {\r\n                response = new ContentCachingResponseWrapper(response);\r\n            }\r\n            HandlerExecutionChain handler = getHandler(request);\r\n    \r\n            try {\r\n                super.doDispatch(request, response);\r\n            } finally {\r\n                log(request, response, handler);\r\n                updateResponse(response);\r\n            }\r\n        }\r\n    \r\n        private void log(HttpServletRequest requestToCache, HttpServletResponse responseToCache, HandlerExecutionChain handler) {\r\n            LogMessage log = new LogMessage();\r\n            log.setHttpStatus(responseToCache.getStatus());\r\n            log.setHttpMethod(requestToCache.getMethod());\r\n            log.setPath(requestToCache.getRequestURI());\r\n            log.setClientIp(requestToCache.getRemoteAddr());\r\n            log.setJavaMethod(handler.toString());\r\n            log.setResponse(getResponsePayload(responseToCache));\r\n            logger.info(log);\r\n        }\r\n    \r\n        private String getResponsePayload(HttpServletResponse response) {\r\n            ContentCachingResponseWrapper wrapper = WebUtils.getNativeResponse(response, ContentCachingResponseWrapper.class);\r\n            if (wrapper != null) {\r\n    \r\n                byte[] buf = wrapper.getContentAsByteArray();\r\n                if (buf.length &gt; 0) {\r\n                    int length = Math.min(buf.length, 5120);\r\n                    try {\r\n                        return new String(buf, 0, length, wrapper.getCharacterEncoding());\r\n                    }\r\n                    catch (UnsupportedEncodingException ex) {\r\n                        // NOOP\r\n                    }\r\n                }\r\n            }\r\n            return &quot;[unknown]&quot;;\r\n        }\r\n    \r\n        private void updateResponse(HttpServletResponse response) throws IOException {\r\n            ContentCachingResponseWrapper responseWrapper =\r\n                WebUtils.getNativeResponse(response, ContentCachingResponseWrapper.class);\r\n            responseWrapper.copyBodyToResponse();\r\n        }\r\n\r\n    }\r\n\r\n`HandlerExecutionChain` - contains the information about request handler.\r\n\r\nYou then can register this dispatcher as following:\r\n\r\n        @Bean\r\n        public ServletRegistrationBean dispatcherRegistration() {\r\n            return new ServletRegistrationBean(dispatcherServlet());\r\n        }\r\n    \r\n        @Bean(name = DispatcherServletAutoConfiguration.DEFAULT_DISPATCHER_SERVLET_BEAN_NAME)\r\n        public DispatcherServlet dispatcherServlet() {\r\n            return new LoggableDispatcherServlet();\r\n        }\r\n\r\nAnd here&#39;s the sample of logs:\r\n\r\n    http http://localhost:8090/settings/test\r\n    i.g.m.s.s.LoggableDispatcherServlet      : LogMessage{httpStatus=500, path=&#39;/error&#39;, httpMethod=&#39;GET&#39;, clientIp=&#39;127.0.0.1&#39;, javaMethod=&#39;HandlerExecutionChain with handler [public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)] and 3 interceptors&#39;, arguments=null, response=&#39;{&quot;timestamp&quot;:1472475814077,&quot;status&quot;:500,&quot;error&quot;:&quot;Internal Server Error&quot;,&quot;exception&quot;:&quot;java.lang.RuntimeException&quot;,&quot;message&quot;:&quot;org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.RuntimeException&quot;,&quot;path&quot;:&quot;/settings/test&quot;}&#39;}\r\n\r\n    http http://localhost:8090/settings/params\r\n    i.g.m.s.s.LoggableDispatcherServlet      : LogMessage{httpStatus=200, path=&#39;/settings/httpParams&#39;, httpMethod=&#39;GET&#39;, clientIp=&#39;127.0.0.1&#39;, javaMethod=&#39;HandlerExecutionChain with handler [public x.y.z.DTO x.y.z.Controller.params()] and 3 interceptors&#39;, arguments=null, response=&#39;{}&#39;}\r\n\r\n    http http://localhost:8090/123\r\n    i.g.m.s.s.LoggableDispatcherServlet      : LogMessage{httpStatus=404, path=&#39;/error&#39;, httpMethod=&#39;GET&#39;, clientIp=&#39;127.0.0.1&#39;, javaMethod=&#39;HandlerExecutionChain with handler [public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)] and 3 interceptors&#39;, arguments=null, response=&#39;{&quot;timestamp&quot;:1472475840592,&quot;status&quot;:404,&quot;error&quot;:&quot;Not Found&quot;,&quot;message&quot;:&quot;Not Found&quot;,&quot;path&quot;:&quot;/123&quot;}&#39;}\r\n\r\n**UPDATE**\r\n\r\nIn case of errors Spring does automatic error handling. Therefore, `BasicErrorController#error` is shown as request handler. If you want to preserve original request handler, then you can override this behavior at `spring-webmvc-4.2.5.RELEASE-sources.jar!/org/springframework/web/servlet/DispatcherServlet.java:971` before `#processDispatchResult` is called, to cache original handler.","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>You could use <code>javax.servlet.Filter</code> if there wasn't a requirement to log java method that been executed.</p>\n\n<p>But with this requirement you have to access information stored in <code>handlerMapping</code> of <code>DispatcherServlet</code>. That said, you can override <code>DispatcherServlet</code> to accomplish logging of request/response pair.</p>\n\n<p>Below is an example of idea that can be further enhanced and adopted to your needs.</p>\n\n<pre><code>public class LoggableDispatcherServlet extends DispatcherServlet {\n\n    private final Log logger = LogFactory.getLog(getClass());\n\n    @Override\n    protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {\n        if (!(request instanceof ContentCachingRequestWrapper)) {\n            request = new ContentCachingRequestWrapper(request);\n        }\n        if (!(response instanceof ContentCachingResponseWrapper)) {\n            response = new ContentCachingResponseWrapper(response);\n        }\n        HandlerExecutionChain handler = getHandler(request);\n\n        try {\n            super.doDispatch(request, response);\n        } finally {\n            log(request, response, handler);\n            updateResponse(response);\n        }\n    }\n\n    private void log(HttpServletRequest requestToCache, HttpServletResponse responseToCache, HandlerExecutionChain handler) {\n        LogMessage log = new LogMessage();\n        log.setHttpStatus(responseToCache.getStatus());\n        log.setHttpMethod(requestToCache.getMethod());\n        log.setPath(requestToCache.getRequestURI());\n        log.setClientIp(requestToCache.getRemoteAddr());\n        log.setJavaMethod(handler.toString());\n        log.setResponse(getResponsePayload(responseToCache));\n        logger.info(log);\n    }\n\n    private String getResponsePayload(HttpServletResponse response) {\n        ContentCachingResponseWrapper wrapper = WebUtils.getNativeResponse(response, ContentCachingResponseWrapper.class);\n        if (wrapper != null) {\n\n            byte[] buf = wrapper.getContentAsByteArray();\n            if (buf.length &gt; 0) {\n                int length = Math.min(buf.length, 5120);\n                try {\n                    return new String(buf, 0, length, wrapper.getCharacterEncoding());\n                }\n                catch (UnsupportedEncodingException ex) {\n                    // NOOP\n                }\n            }\n        }\n        return \"[unknown]\";\n    }\n\n    private void updateResponse(HttpServletResponse response) throws IOException {\n        ContentCachingResponseWrapper responseWrapper =\n            WebUtils.getNativeResponse(response, ContentCachingResponseWrapper.class);\n        responseWrapper.copyBodyToResponse();\n    }\n\n}\n</code></pre>\n\n<p><code>HandlerExecutionChain</code> - contains the information about request handler.</p>\n\n<p>You then can register this dispatcher as following:</p>\n\n<pre><code>    @Bean\n    public ServletRegistrationBean dispatcherRegistration() {\n        return new ServletRegistrationBean(dispatcherServlet());\n    }\n\n    @Bean(name = DispatcherServletAutoConfiguration.DEFAULT_DISPATCHER_SERVLET_BEAN_NAME)\n    public DispatcherServlet dispatcherServlet() {\n        return new LoggableDispatcherServlet();\n    }\n</code></pre>\n\n<p>And here's the sample of logs:</p>\n\n<pre><code>http http://localhost:8090/settings/test\ni.g.m.s.s.LoggableDispatcherServlet      : LogMessage{httpStatus=500, path='/error', httpMethod='GET', clientIp='127.0.0.1', javaMethod='HandlerExecutionChain with handler [public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)] and 3 interceptors', arguments=null, response='{\"timestamp\":1472475814077,\"status\":500,\"error\":\"Internal Server Error\",\"exception\":\"java.lang.RuntimeException\",\"message\":\"org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.RuntimeException\",\"path\":\"/settings/test\"}'}\n\nhttp http://localhost:8090/settings/params\ni.g.m.s.s.LoggableDispatcherServlet      : LogMessage{httpStatus=200, path='/settings/httpParams', httpMethod='GET', clientIp='127.0.0.1', javaMethod='HandlerExecutionChain with handler [public x.y.z.DTO x.y.z.Controller.params()] and 3 interceptors', arguments=null, response='{}'}\n\nhttp http://localhost:8090/123\ni.g.m.s.s.LoggableDispatcherServlet      : LogMessage{httpStatus=404, path='/error', httpMethod='GET', clientIp='127.0.0.1', javaMethod='HandlerExecutionChain with handler [public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)] and 3 interceptors', arguments=null, response='{\"timestamp\":1472475840592,\"status\":404,\"error\":\"Not Found\",\"message\":\"Not Found\",\"path\":\"/123\"}'}\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>In case of errors Spring does automatic error handling. Therefore, <code>BasicErrorController#error</code> is shown as request handler. If you want to preserve original request handler, then you can override this behavior at <code>spring-webmvc-4.2.5.RELEASE-sources.jar!/org/springframework/web/servlet/DispatcherServlet.java:971</code> before <code>#processDispatchResult</code> is called, to cache original handler.</p>\n"},{"comments":[{"owner":{"account_id":99729,"reputation":6589,"user_id":269221,"accept_rate":83,"display_name":"Tom Howard"},"score":4,"creation_date":1472690383,"post_id":39234957,"comment_id":65857957,"body_markdown":"any more details? I found https://github.com/spring-projects/spring-boot/tree/master/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/trace, but not much in beyond that.","body":"any more details? I found <a href=\"https://github.com/spring-projects/spring-boot/tree/master/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/trace\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/tree/master/&hellip;</a>, but not much in beyond that."},{"owner":{"account_id":99729,"reputation":6589,"user_id":269221,"accept_rate":83,"display_name":"Tom Howard"},"score":0,"creation_date":1472690399,"post_id":39234957,"comment_id":65857962,"body_markdown":"And is this just for the request, or the response as well?","body":"And is this just for the request, or the response as well?"},{"owner":{"account_id":393366,"reputation":3638,"user_id":755183,"accept_rate":71,"display_name":"hahn"},"score":0,"creation_date":1472710903,"post_id":39234957,"comment_id":65863261,"body_markdown":"@TomHoward all implementations that spring provides consider only request.","body":"@TomHoward all implementations that spring provides consider only request."},{"owner":{"account_id":238135,"reputation":3952,"user_id":506813,"display_name":"bekce"},"score":35,"creation_date":1479718641,"post_id":39234957,"comment_id":68659590,"body_markdown":"This cannot be used for debugging: unauthenticated requests (for example with spring security) do not get logged.","body":"This cannot be used for debugging: unauthenticated requests (for example with spring security) do not get logged."},{"owner":{"account_id":1474388,"reputation":5265,"user_id":1385174,"accept_rate":60,"display_name":"Adam"},"score":1,"creation_date":1479824522,"post_id":39234957,"comment_id":68714139,"body_markdown":"Actuator format is all JSON which you may or may not appreciate.","body":"Actuator format is all JSON which you may or may not appreciate."},{"owner":{"account_id":3195718,"reputation":506,"user_id":2698939,"accept_rate":33,"display_name":"Vladimir Filipchenko"},"score":26,"creation_date":1480356640,"post_id":39234957,"comment_id":68918158,"body_markdown":"Actually Actuator doesn&#39;t have any specific components for enebling http logging. /trace - show only last N requests.","body":"Actually Actuator doesn&#39;t have any specific components for enebling http logging. /trace - show only last N requests."},{"owner":{"display_name":"user6023611"},"score":25,"creation_date":1481045077,"post_id":39234957,"comment_id":69211410,"body_markdown":"@ike_love, how to confgure actuator such that it logging request (also POST body) to file ?","body":"@ike_love, how to confgure actuator such that it logging request (also POST body) to file ?"},{"owner":{"account_id":1902693,"reputation":9592,"user_id":1718213,"accept_rate":71,"display_name":"SergeyB"},"score":0,"creation_date":1505780937,"post_id":39234957,"comment_id":79542953,"body_markdown":"@IcedDante, yes, e.g. providing a link to official documentation instead of copying and pasting example that are guaranteed to get out of date.","body":"@IcedDante, yes, e.g. providing a link to official documentation instead of copying and pasting example that are guaranteed to get out of date."},{"owner":{"account_id":3072521,"reputation":1252,"user_id":2602807,"accept_rate":41,"display_name":"user2602807"},"score":0,"creation_date":1507554917,"post_id":39234957,"comment_id":80243771,"body_markdown":"And... Where is at least a little example? Just log request and responce to file","body":"And... Where is at least a little example? Just log request and responce to file"},{"owner":{"account_id":1902693,"reputation":9592,"user_id":1718213,"accept_rate":71,"display_name":"SergeyB"},"score":0,"creation_date":1507928528,"post_id":39234957,"comment_id":80422787,"body_markdown":"@user2602807 - did you follow the link provided in the answer?","body":"@user2602807 - did you follow the link provided in the answer?"},{"owner":{"account_id":220085,"reputation":355,"user_id":477324,"accept_rate":18,"display_name":"Lekkie"},"score":28,"creation_date":1508743203,"post_id":39234957,"comment_id":80714927,"body_markdown":"Trace will not log request and response body for you....everything else (header etc) but those.","body":"Trace will not log request and response body for you....everything else (header etc) but those."},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":1,"creation_date":1527180761,"post_id":39234957,"comment_id":88041416,"body_markdown":"Does AWS log all requests anywhere?","body":"Does AWS log all requests anywhere?"},{"owner":{"account_id":93940,"reputation":5106,"user_id":256770,"accept_rate":31,"display_name":"Farrukh Najmi"},"score":2,"creation_date":1528904434,"post_id":39234957,"comment_id":88686057,"body_markdown":"&quot;Trace will not log request and response body for you....everything else (header etc) but those&quot;\n\nYup. Is there a way to include request and response body? That is what is really needed most of the time.","body":"&quot;Trace will not log request and response body for you....everything else (header etc) but those&quot;  Yup. Is there a way to include request and response body? That is what is really needed most of the time."},{"owner":{"account_id":4745777,"reputation":319,"user_id":3837185,"accept_rate":83,"display_name":"TolkienWASP"},"score":0,"creation_date":1533592038,"post_id":39234957,"comment_id":90393440,"body_markdown":"@Lekkie can you confirm that there&#39;s no means of enabling this?","body":"@Lekkie can you confirm that there&#39;s no means of enabling this?"},{"owner":{"account_id":10843746,"reputation":6105,"user_id":7974082,"display_name":"Michał Stochmal"},"score":3,"creation_date":1534253352,"post_id":39234957,"comment_id":90638335,"body_markdown":"Logging request/response payloads support has been dropped since spring boot 2.0. Source: https://github.com/spring-projects/spring-boot/issues/12953#issuecomment-383830749","body":"Logging request/response payloads support has been dropped since spring boot 2.0. Source: <a href=\"https://github.com/spring-projects/spring-boot/issues/12953#issuecomment-383830749\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/&hellip;</a>"},{"owner":{"account_id":404984,"reputation":2612,"user_id":773623,"display_name":"Jonathan Drapeau"},"score":43,"creation_date":1537972357,"post_id":39234957,"comment_id":91979923,"body_markdown":"If you want the body, this is not useful, please mention it.","body":"If you want the body, this is not useful, please mention it."},{"owner":{"account_id":4667026,"reputation":10199,"user_id":3779853,"accept_rate":85,"display_name":"phil294"},"score":0,"creation_date":1550412521,"post_id":39234957,"comment_id":96250422,"body_markdown":"this does not provide configuration for writing stuff to file, you cant configure anything here, the docs are eveyrthing but helpful and at some point simply tell you to &quot;implement your own [insert class name here]&quot; in order to have something as basic as a logfile with requests in it. I dont think this answer is in any way helpful for what OP wants.","body":"this does not provide configuration for writing stuff to file, you cant configure anything here, the docs are eveyrthing but helpful and at some point simply tell you to &quot;implement your own [insert class name here]&quot; in order to have something as basic as a logfile with requests in it. I dont think this answer is in any way helpful for what OP wants."},{"owner":{"account_id":1902693,"reputation":9592,"user_id":1718213,"accept_rate":71,"display_name":"SergeyB"},"score":0,"creation_date":1550430928,"post_id":39234957,"comment_id":96255864,"body_markdown":"@Blauhirn, OP did not ask to how to write to a file, the question was how to log request/response information and that is that the answer provided. Writing to a file is a bad practice - https://12factor.net/logs","body":"@Blauhirn, OP did not ask to how to write to a file, the question was how to log request/response information and that is that the answer provided. Writing to a file is a bad practice - <a href=\"https://12factor.net/logs\" rel=\"nofollow noreferrer\">12factor.net/logs</a>"},{"owner":{"account_id":2357514,"reputation":1444,"user_id":3890673,"accept_rate":55,"display_name":"crusy"},"score":0,"creation_date":1551100310,"post_id":39234957,"comment_id":96504240,"body_markdown":"This does not log requests to actuator endpoints (as in &quot;log _all_ requests&quot;)","body":"This does not log requests to actuator endpoints (as in &quot;log <i>all</i> requests&quot;)"},{"owner":{"account_id":2357514,"reputation":1444,"user_id":3890673,"accept_rate":55,"display_name":"crusy"},"score":2,"creation_date":1551339122,"post_id":39234957,"comment_id":96606249,"body_markdown":"PS to my previous comment: Configure `org.springframework.boot.actuate.autoconfigure.web.ManagementContextConfiguration` to have actuator requests being handled as well","body":"PS to my previous comment: Configure <code>org.springframework.boot.actuate.autoconfigure.web.Managemen&zwnj;&#8203;tContextConfiguratio&zwnj;&#8203;n</code> to have actuator requests being handled as well"},{"owner":{"account_id":409316,"reputation":400,"user_id":780504,"display_name":"gabor"},"score":1,"creation_date":1563873704,"post_id":39234957,"comment_id":100835681,"body_markdown":"This is totally different.  The question is how to log requests and responses into a file.  The actuator is a means to provide this information to external parties on demand, not proactively log it.","body":"This is totally different.  The question is how to log requests and responses into a file.  The actuator is a means to provide this information to external parties on demand, not proactively log it."},{"owner":{"account_id":3129869,"reputation":1542,"user_id":2647910,"accept_rate":92,"display_name":"aswzen"},"score":0,"creation_date":1568791134,"post_id":39234957,"comment_id":102382078,"body_markdown":"spring boot actuator is not working without &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n                &lt;/exclusion&gt;","body":"spring boot actuator is not working without &lt;exclusion&gt;                     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;                     &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;                 &lt;/exclusion&gt;"},{"owner":{"account_id":4246303,"reputation":53,"user_id":3474861,"display_name":"Kekar"},"score":0,"creation_date":1570602692,"post_id":39234957,"comment_id":102959196,"body_markdown":"The links to github are not working right now. I am looking for a way to implement custom trace without exposing actuator endpoints.","body":"The links to github are not working right now. I am looking for a way to implement custom trace without exposing actuator endpoints."},{"owner":{"account_id":2452904,"reputation":2249,"user_id":2138727,"accept_rate":88,"display_name":"Kasnady"},"score":0,"creation_date":1571979899,"post_id":39234957,"comment_id":103425012,"body_markdown":"the answer is not clear enough of how to implement it","body":"the answer is not clear enough of how to implement it"},{"owner":{"account_id":85429,"reputation":9406,"user_id":238190,"accept_rate":71,"display_name":"emeraldhieu"},"score":3,"creation_date":1601628828,"post_id":39234957,"comment_id":113471552,"body_markdown":"Not sure why this answer gets that much upvotes. Actuator doesn&#39;t log request body. Things I&#39;ve tried come from http://slackspace.de/articles/log-request-body-with-spring-boot/. It works.","body":"Not sure why this answer gets that much upvotes. Actuator doesn&#39;t log request body. Things I&#39;ve tried come from <a href=\"http://slackspace.de/articles/log-request-body-with-spring-boot/\" rel=\"nofollow noreferrer\">slackspace.de/articles/log-request-body-with-spring-boot</a>. It works."},{"owner":{"account_id":1230894,"reputation":2364,"user_id":1195507,"accept_rate":100,"display_name":"rvazquezglez"},"score":1,"creation_date":1602131741,"post_id":39234957,"comment_id":113624618,"body_markdown":"@emeraldhieu yes actuator doesn&#39;t support request/response body https://github.com/spring-projects/spring-boot/issues/12953","body":"@emeraldhieu yes actuator doesn&#39;t support request/response body <a href=\"https://github.com/spring-projects/spring-boot/issues/12953\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/12953</a>"},{"owner":{"account_id":5567278,"reputation":94,"user_id":4414047,"display_name":"michals"},"score":1,"creation_date":1610013130,"post_id":39234957,"comment_id":116000688,"body_markdown":"Seems it is also not recommended anymore as it consume a lot resources https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.2.0-M3-Release-Notes#actuator-http-trace-and-auditing-are-disabled-by-default","body":"Seems it is also not recommended anymore as it consume a lot resources <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.2.0-M3-Release-Notes#actuator-http-trace-and-auditing-are-disabled-by-default\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/wiki/&hellip;</a>"},{"owner":{"account_id":11087309,"reputation":861,"user_id":8140523,"display_name":"NanoNova"},"score":0,"creation_date":1650946580,"post_id":39234957,"comment_id":127237765,"body_markdown":"https://stackoverflow.com/a/60450043/8140523","body":"<a href=\"https://stackoverflow.com/a/60450043/8140523\">stackoverflow.com/a/60450043/8140523</a>"},{"owner":{"account_id":15491991,"reputation":66,"user_id":11793381,"display_name":"skidoodle3336"},"score":1,"creation_date":1657625147,"post_id":39234957,"comment_id":128850176,"body_markdown":"I just wasted half an hour because of this answer since I need to log the request bodies, and Spring actuator doesn&#39;t support it.","body":"I just wasted half an hour because of this answer since I need to log the request bodies, and Spring actuator doesn&#39;t support it."},{"owner":{"account_id":1902693,"reputation":9592,"user_id":1718213,"accept_rate":71,"display_name":"SergeyB"},"score":0,"creation_date":1660008787,"post_id":39234957,"comment_id":129426015,"body_markdown":"@skidoodle3336, sorry you wasted ALL of your development experience on my answer :(","body":"@skidoodle3336, sorry you wasted ALL of your development experience on my answer :("},{"owner":{"account_id":7566728,"reputation":407,"user_id":5751473,"display_name":"Se ven"},"score":1,"creation_date":1668781386,"post_id":39234957,"comment_id":131496258,"body_markdown":"Just mention that after `Spring Boot 2.2.0 M3` `Spring Framework 5.2 M2` [actuator http trace and auditing are disabled by default](https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.2.0-M3-Release-Notes#actuator-http-trace-and-auditing-are-disabled-by-default) since the default repositories implementations are in-memory and may consume too many resources and are not cluster friendly.","body":"Just mention that after <code>Spring Boot 2.2.0 M3</code> <code>Spring Framework 5.2 M2</code> <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.2.0-M3-Release-Notes#actuator-http-trace-and-auditing-are-disabled-by-default\" rel=\"nofollow noreferrer\">actuator http trace and auditing are disabled by default</a> since the default repositories implementations are in-memory and may consume too many resources and are not cluster friendly."}],"tags":[],"owner":{"account_id":1902693,"reputation":9592,"user_id":1718213,"accept_rate":71,"display_name":"SergeyB"},"comment_count":31,"down_vote_count":46,"up_vote_count":270,"is_accepted":false,"score":224,"last_activity_date":1579096457,"creation_date":1472582822,"answer_id":39234957,"question_id":33744875,"body_markdown":"Don&#39;t write any Interceptors, Filters, Components, Aspects, etc., this is a very common problem and has been solved many times over. \r\n\r\nSpring Boot has a modules called [Actuator][1], which provides HTTP request logging out of the box. There&#39;s an endpoint mapped to `/trace` (SB1.x) or `/actuator/httptrace` (SB2.0+) which will show you last 100 HTTP requests. You can customize it to log each request, or write to a DB.  \r\n\r\nTo get the endpoints you want, you&#39;ll need the spring-boot-starter-actuator dependency, and also to &quot;whitelist&quot; the endpoints you&#39;re looking for, and possibly setup or disable security for it.\r\n\r\nAlso, where will this application run? Will you be using a PaaS? Hosting providers, Heroku for example, provide request logging as part of their service and you don&#39;t need to do **any** coding whatsoever then.\r\n\r\n  [1]: http://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>Don't write any Interceptors, Filters, Components, Aspects, etc., this is a very common problem and has been solved many times over. </p>\n\n<p>Spring Boot has a modules called <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html\" rel=\"noreferrer\">Actuator</a>, which provides HTTP request logging out of the box. There's an endpoint mapped to <code>/trace</code> (SB1.x) or <code>/actuator/httptrace</code> (SB2.0+) which will show you last 100 HTTP requests. You can customize it to log each request, or write to a DB.  </p>\n\n<p>To get the endpoints you want, you'll need the spring-boot-starter-actuator dependency, and also to \"whitelist\" the endpoints you're looking for, and possibly setup or disable security for it.</p>\n\n<p>Also, where will this application run? Will you be using a PaaS? Hosting providers, Heroku for example, provide request logging as part of their service and you don't need to do <strong>any</strong> coding whatsoever then.</p>\n"},{"comments":[{"owner":{"account_id":2093803,"reputation":439,"user_id":1863021,"display_name":"Mayank Madhav"},"score":0,"creation_date":1587763966,"post_id":41043393,"comment_id":108648229,"body_markdown":"is your application packaged as war or jar? I keep getting the error java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/loggingDispatcherServlet-servlet.xml]","body":"is your application packaged as war or jar? I keep getting the error java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/loggingDispatcherServlet-servlet.xml]"}],"tags":[],"owner":{"account_id":4152913,"reputation":1339,"user_id":4411645,"accept_rate":29,"display_name":"AA_PV"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1481212017,"creation_date":1481212017,"answer_id":41043393,"question_id":33744875,"body_markdown":"[@hahn&#39;s answer][1] required a bit of modification for it to work for me, but it is by far the most customizable thing I could get.\r\n\r\nIt didn&#39;t work for me, probably because I also have a HandlerInterceptorAdapter[??] but I kept getting a bad response from the server in that version. Here&#39;s my modification of it.\r\n\r\n    public class LoggableDispatcherServlet extends DispatcherServlet {\r\n    \r\n        private final Log logger = LogFactory.getLog(getClass());\r\n    \r\n        @Override\r\n        protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {\r\n    \r\n            long startTime = System.currentTimeMillis();\r\n            try {\r\n                super.doDispatch(request, response);\r\n            } finally {\r\n                log(new ContentCachingRequestWrapper(request), new ContentCachingResponseWrapper(response),\r\n                        System.currentTimeMillis() - startTime);\r\n            }\r\n        }\r\n    \r\n        private void log(HttpServletRequest requestToCache, HttpServletResponse responseToCache, long timeTaken) {\r\n            int status = responseToCache.getStatus();\r\n            JsonObject jsonObject = new JsonObject();\r\n            jsonObject.addProperty(&quot;httpStatus&quot;, status);\r\n            jsonObject.addProperty(&quot;path&quot;, requestToCache.getRequestURI());\r\n            jsonObject.addProperty(&quot;httpMethod&quot;, requestToCache.getMethod());\r\n            jsonObject.addProperty(&quot;timeTakenMs&quot;, timeTaken);\r\n            jsonObject.addProperty(&quot;clientIP&quot;, requestToCache.getRemoteAddr());\r\n            if (status &gt; 299) {\r\n                String requestBody = null;\r\n                try {\r\n                    requestBody = requestToCache.getReader().lines().collect(Collectors.joining(System.lineSeparator()));\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                jsonObject.addProperty(&quot;requestBody&quot;, requestBody);\r\n                jsonObject.addProperty(&quot;requestParams&quot;, requestToCache.getQueryString());\r\n                jsonObject.addProperty(&quot;tokenExpiringHeader&quot;,\r\n                        responseToCache.getHeader(ResponseHeaderModifierInterceptor.HEADER_TOKEN_EXPIRING));\r\n            }\r\n            logger.info(jsonObject);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/39207422/4411645\r\n","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p><a href=\"https://stackoverflow.com/a/39207422/4411645\">@hahn's answer</a> required a bit of modification for it to work for me, but it is by far the most customizable thing I could get.</p>\n\n<p>It didn't work for me, probably because I also have a HandlerInterceptorAdapter[??] but I kept getting a bad response from the server in that version. Here's my modification of it.</p>\n\n<pre><code>public class LoggableDispatcherServlet extends DispatcherServlet {\n\n    private final Log logger = LogFactory.getLog(getClass());\n\n    @Override\n    protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {\n\n        long startTime = System.currentTimeMillis();\n        try {\n            super.doDispatch(request, response);\n        } finally {\n            log(new ContentCachingRequestWrapper(request), new ContentCachingResponseWrapper(response),\n                    System.currentTimeMillis() - startTime);\n        }\n    }\n\n    private void log(HttpServletRequest requestToCache, HttpServletResponse responseToCache, long timeTaken) {\n        int status = responseToCache.getStatus();\n        JsonObject jsonObject = new JsonObject();\n        jsonObject.addProperty(\"httpStatus\", status);\n        jsonObject.addProperty(\"path\", requestToCache.getRequestURI());\n        jsonObject.addProperty(\"httpMethod\", requestToCache.getMethod());\n        jsonObject.addProperty(\"timeTakenMs\", timeTaken);\n        jsonObject.addProperty(\"clientIP\", requestToCache.getRemoteAddr());\n        if (status &gt; 299) {\n            String requestBody = null;\n            try {\n                requestBody = requestToCache.getReader().lines().collect(Collectors.joining(System.lineSeparator()));\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n            jsonObject.addProperty(\"requestBody\", requestBody);\n            jsonObject.addProperty(\"requestParams\", requestToCache.getQueryString());\n            jsonObject.addProperty(\"tokenExpiringHeader\",\n                    responseToCache.getHeader(ResponseHeaderModifierInterceptor.HEADER_TOKEN_EXPIRING));\n        }\n        logger.info(jsonObject);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9227009,"reputation":1342,"user_id":6854489,"accept_rate":100,"display_name":"takanuva15"},"score":0,"creation_date":1695831416,"post_id":42023374,"comment_id":136077575,"body_markdown":"This did the trick for logging the request body for me. Important note though, that you should only log the body after the request has been processed - not before!","body":"This did the trick for logging the request body for me. Important note though, that you should only log the body after the request has been processed - not before!"}],"tags":[],"owner":{"account_id":8114023,"reputation":1631,"user_id":6113110,"accept_rate":62,"display_name":"Robert"},"comment_count":1,"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1486122841,"creation_date":1486121840,"answer_id":42023374,"question_id":33744875,"body_markdown":"Here is how I do it in spring data rest\r\nby using\r\n`org.springframework.web.util.ContentCachingRequestWrapper`  and\r\n`org.springframework.web.util.ContentCachingResponseWrapper`\r\n\r\n    \r\n    /**\r\n     * Doogies very cool HTTP request logging\r\n     *\r\n     * There is also {@link org.springframework.web.filter.CommonsRequestLoggingFilter}  but it cannot log request method\r\n     * And it cannot easily be extended.\r\n     *\r\n     * https://mdeinum.wordpress.com/2015/07/01/spring-framework-hidden-gems/\r\n     * http://stackoverflow.com/questions/8933054/how-to-read-and-copy-the-http-servlet-response-output-stream-content-for-logging\r\n     */\r\n    public class DoogiesRequestLogger extends OncePerRequestFilter {\r\n    \r\n      private boolean includeResponsePayload = true;\r\n      private int maxPayloadLength = 1000;\r\n    \r\n      private String getContentAsString(byte[] buf, int maxLength, String charsetName) {\r\n        if (buf == null || buf.length == 0) return &quot;&quot;;\r\n        int length = Math.min(buf.length, this.maxPayloadLength);\r\n        try {\r\n          return new String(buf, 0, length, charsetName);\r\n        } catch (UnsupportedEncodingException ex) {\r\n          return &quot;Unsupported Encoding&quot;;\r\n        }\r\n      }\r\n    \r\n      /**\r\n       * Log each request and respponse with full Request URI, content payload and duration of the request in ms.\r\n       * @param request the request\r\n       * @param response the response\r\n       * @param filterChain chain of filters\r\n       * @throws ServletException\r\n       * @throws IOException\r\n       */\r\n      @Override\r\n      protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n    \r\n        long startTime = System.currentTimeMillis();\r\n        StringBuffer reqInfo = new StringBuffer()\r\n         .append(&quot;[&quot;)\r\n         .append(startTime % 10000)  // request ID\r\n         .append(&quot;] &quot;)\r\n         .append(request.getMethod())\r\n         .append(&quot; &quot;)\r\n         .append(request.getRequestURL());\r\n    \r\n        String queryString = request.getQueryString();\r\n        if (queryString != null) {\r\n          reqInfo.append(&quot;?&quot;).append(queryString);\r\n        }\r\n    \r\n        if (request.getAuthType() != null) {\r\n          reqInfo.append(&quot;, authType=&quot;)\r\n            .append(request.getAuthType());\r\n        }\r\n        if (request.getUserPrincipal() != null) {\r\n          reqInfo.append(&quot;, principalName=&quot;)\r\n            .append(request.getUserPrincipal().getName());\r\n        }\r\n    \r\n        this.logger.debug(&quot;=&gt; &quot; + reqInfo);\r\n    \r\n        // ========= Log request and response payload (&quot;body&quot;) ========\r\n        // We CANNOT simply read the request payload here, because then the InputStream would be consumed and cannot be read again by the actual processing/server.\r\n        //    String reqBody = DoogiesUtil._stream2String(request.getInputStream());   // THIS WOULD NOT WORK!\r\n        // So we need to apply some stronger magic here :-)\r\n        ContentCachingRequestWrapper wrappedRequest = new ContentCachingRequestWrapper(request);\r\n        ContentCachingResponseWrapper wrappedResponse = new ContentCachingResponseWrapper(response);\r\n    \r\n        filterChain.doFilter(wrappedRequest, wrappedResponse);     // ======== This performs the actual request!\r\n        long duration = System.currentTimeMillis() - startTime;\r\n    \r\n        // I can only log the request&#39;s body AFTER the request has been made and ContentCachingRequestWrapper did its work.\r\n        String requestBody = this.getContentAsString(wrappedRequest.getContentAsByteArray(), this.maxPayloadLength, request.getCharacterEncoding());\r\n        if (requestBody.length() &gt; 0) {\r\n          this.logger.debug(&quot;   Request body:\\n&quot; +requestBody);\r\n        }\r\n    \r\n        this.logger.debug(&quot;&lt;= &quot; + reqInfo + &quot;: returned status=&quot; + response.getStatus() + &quot; in &quot;+duration + &quot;ms&quot;);\r\n        if (includeResponsePayload) {\r\n          byte[] buf = wrappedResponse.getContentAsByteArray();\r\n          this.logger.debug(&quot;   Response body:\\n&quot;+getContentAsString(buf, this.maxPayloadLength, response.getCharacterEncoding()));\r\n        }\r\n\r\n        wrappedResponse.copyBodyToResponse();  // IMPORTANT: copy content of response back into original response\r\n    \r\n      }\r\n    \r\n      \r\n    }\r\n\r\n","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>Here is how I do it in spring data rest\nby using\n<code>org.springframework.web.util.ContentCachingRequestWrapper</code>  and\n<code>org.springframework.web.util.ContentCachingResponseWrapper</code></p>\n\n<pre><code>/**\n * Doogies very cool HTTP request logging\n *\n * There is also {@link org.springframework.web.filter.CommonsRequestLoggingFilter}  but it cannot log request method\n * And it cannot easily be extended.\n *\n * https://mdeinum.wordpress.com/2015/07/01/spring-framework-hidden-gems/\n * http://stackoverflow.com/questions/8933054/how-to-read-and-copy-the-http-servlet-response-output-stream-content-for-logging\n */\npublic class DoogiesRequestLogger extends OncePerRequestFilter {\n\n  private boolean includeResponsePayload = true;\n  private int maxPayloadLength = 1000;\n\n  private String getContentAsString(byte[] buf, int maxLength, String charsetName) {\n    if (buf == null || buf.length == 0) return \"\";\n    int length = Math.min(buf.length, this.maxPayloadLength);\n    try {\n      return new String(buf, 0, length, charsetName);\n    } catch (UnsupportedEncodingException ex) {\n      return \"Unsupported Encoding\";\n    }\n  }\n\n  /**\n   * Log each request and respponse with full Request URI, content payload and duration of the request in ms.\n   * @param request the request\n   * @param response the response\n   * @param filterChain chain of filters\n   * @throws ServletException\n   * @throws IOException\n   */\n  @Override\n  protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n\n    long startTime = System.currentTimeMillis();\n    StringBuffer reqInfo = new StringBuffer()\n     .append(\"[\")\n     .append(startTime % 10000)  // request ID\n     .append(\"] \")\n     .append(request.getMethod())\n     .append(\" \")\n     .append(request.getRequestURL());\n\n    String queryString = request.getQueryString();\n    if (queryString != null) {\n      reqInfo.append(\"?\").append(queryString);\n    }\n\n    if (request.getAuthType() != null) {\n      reqInfo.append(\", authType=\")\n        .append(request.getAuthType());\n    }\n    if (request.getUserPrincipal() != null) {\n      reqInfo.append(\", principalName=\")\n        .append(request.getUserPrincipal().getName());\n    }\n\n    this.logger.debug(\"=&gt; \" + reqInfo);\n\n    // ========= Log request and response payload (\"body\") ========\n    // We CANNOT simply read the request payload here, because then the InputStream would be consumed and cannot be read again by the actual processing/server.\n    //    String reqBody = DoogiesUtil._stream2String(request.getInputStream());   // THIS WOULD NOT WORK!\n    // So we need to apply some stronger magic here :-)\n    ContentCachingRequestWrapper wrappedRequest = new ContentCachingRequestWrapper(request);\n    ContentCachingResponseWrapper wrappedResponse = new ContentCachingResponseWrapper(response);\n\n    filterChain.doFilter(wrappedRequest, wrappedResponse);     // ======== This performs the actual request!\n    long duration = System.currentTimeMillis() - startTime;\n\n    // I can only log the request's body AFTER the request has been made and ContentCachingRequestWrapper did its work.\n    String requestBody = this.getContentAsString(wrappedRequest.getContentAsByteArray(), this.maxPayloadLength, request.getCharacterEncoding());\n    if (requestBody.length() &gt; 0) {\n      this.logger.debug(\"   Request body:\\n\" +requestBody);\n    }\n\n    this.logger.debug(\"&lt;= \" + reqInfo + \": returned status=\" + response.getStatus() + \" in \"+duration + \"ms\");\n    if (includeResponsePayload) {\n      byte[] buf = wrappedResponse.getContentAsByteArray();\n      this.logger.debug(\"   Response body:\\n\"+getContentAsString(buf, this.maxPayloadLength, response.getCharacterEncoding()));\n    }\n\n    wrappedResponse.copyBodyToResponse();  // IMPORTANT: copy content of response back into original response\n\n  }\n\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":102455,"reputation":1500,"user_id":275020,"accept_rate":86,"display_name":"Pavel Vyazankin"},"score":2,"creation_date":1495017295,"post_id":43109437,"comment_id":75071298,"body_markdown":"What about POST body?","body":"What about POST body?"},{"owner":{"account_id":2481390,"reputation":1190,"user_id":2160802,"accept_rate":62,"display_name":"Piotr Chowaniec"},"score":0,"creation_date":1495039682,"post_id":43109437,"comment_id":75087670,"body_markdown":"@dart I&#39;ve added example for you","body":"@dart I&#39;ve added example for you"},{"owner":{"account_id":353069,"reputation":7200,"user_id":690553,"accept_rate":76,"display_name":"Amir Pashazadeh"},"score":1,"creation_date":1499701585,"post_id":43109437,"comment_id":77006564,"body_markdown":"I was doing something like this, but the problem is the response body is not available to `TraceRepository`, how can we access to that?","body":"I was doing something like this, but the problem is the response body is not available to <code>TraceRepository</code>, how can we access to that?"},{"owner":{"account_id":2481390,"reputation":1190,"user_id":2160802,"accept_rate":62,"display_name":"Piotr Chowaniec"},"score":0,"creation_date":1499708632,"post_id":43109437,"comment_id":77010871,"body_markdown":"@AmirPashazadeh you have to override `protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)` but I&#39;m not sure when this filter is executed - may be on request phase, so response body won&#39;t be ready there.","body":"@AmirPashazadeh you have to override <code>protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)</code> but I&#39;m not sure when this filter is executed - may be on request phase, so response body won&#39;t be ready there."},{"owner":{"account_id":4246303,"reputation":53,"user_id":3474861,"display_name":"Kekar"},"score":0,"creation_date":1570602457,"post_id":43109437,"comment_id":102959085,"body_markdown":"Both of those classes are not available in Spring Boot version 2.1.6. Does anyone have a workaround for that?","body":"Both of those classes are not available in Spring Boot version 2.1.6. Does anyone have a workaround for that?"},{"owner":{"account_id":2481390,"reputation":1190,"user_id":2160802,"accept_rate":62,"display_name":"Piotr Chowaniec"},"score":1,"creation_date":1570632189,"post_id":43109437,"comment_id":102975264,"body_markdown":"@Kekar Since 2.0 there is HttpTraceRepository (instead of TraceRepository)","body":"@Kekar Since 2.0 there is HttpTraceRepository (instead of TraceRepository)"}],"tags":[],"owner":{"account_id":2481390,"reputation":1190,"user_id":2160802,"accept_rate":62,"display_name":"Piotr Chowaniec"},"comment_count":6,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1495039647,"creation_date":1490852527,"answer_id":43109437,"question_id":33744875,"body_markdown":"After adding [Actuators][1] to the spring boot bassed application you have `/trace` endpoint available with latest requests informations. This endpoint is working based on [TraceRepository][2] and default implementation is [InMemoryTraceRepository][3] that saves last 100 calls. You can change this by implementing this interface by yourself and make it available as a Spring bean. For example to log all requests to log (and still use default implementation as a basic storage for serving info on `/trace` endpoint) I&#39;m using this kind of implementation: \r\n\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.boot.actuate.trace.InMemoryTraceRepository;\r\n    import org.springframework.boot.actuate.trace.Trace;\r\n    import org.springframework.boot.actuate.trace.TraceRepository;\r\n    import org.springframework.stereotype.Component;\r\n\r\n    import java.util.List;\r\n    import java.util.Map;\r\n\r\n\r\n    @Component\r\n    public class LoggingTraceRepository implements TraceRepository {\r\n\r\n      private static final Logger LOG = LoggerFactory.getLogger(LoggingTraceRepository.class);\r\n      private final TraceRepository delegate = new InMemoryTraceRepository();\r\n\r\n      @Override\r\n      public List&lt;Trace&gt; findAll() {\r\n        return delegate.findAll();\r\n      }\r\n\r\n      @Override\r\n      public void add(Map&lt;String, Object&gt; traceInfo) {\r\n        LOG.info(traceInfo.toString());\r\n        this.delegate.add(traceInfo);\r\n      }\r\n    }\r\n\r\nThis `traceInfo` map contains basic informations about request and response in this kind of form:\r\n`{method=GET, path=/api/hello/John, headers={request={host=localhost:8080, user-agent=curl/7.51.0, accept=*/*}, response={X-Application-Context=application, Content-Type=text/plain;charset=UTF-8, Content-Length=10, Date=Wed, 29 Mar 2017 20:41:21 GMT, status=200}}}`. There is NO response content here.\r\n\r\n\r\n**EDIT!** Logging POST data\r\n\r\nYou can access POST data by overriding [WebRequestTraceFilter][4], but don&#39;t think it is a good idea (e.g. all uploaded file content will go to logs)\r\nHere is sample code, but **don&#39;t** use it:\r\n    \r\n    package info.fingo.nuntius.acuate.trace;\r\n\r\n    import org.apache.commons.io.IOUtils;\r\n    import org.springframework.boot.actuate.trace.TraceProperties;\r\n    import org.springframework.boot.actuate.trace.TraceRepository;\r\n    import org.springframework.boot.actuate.trace.WebRequestTraceFilter;\r\n    import org.springframework.stereotype.Component;\r\n\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import java.io.IOException;\r\n    import java.nio.charset.Charset;\r\n    import java.util.LinkedHashMap;\r\n    import java.util.Map;\r\n\r\n    @Component\r\n    public class CustomWebTraceFilter extends WebRequestTraceFilter {\r\n\r\n      public CustomWebTraceFilter(TraceRepository repository, TraceProperties properties) {\r\n        super(repository, properties);\r\n    }\r\n\r\n      @Override\r\n      protected Map&lt;String, Object&gt; getTrace(HttpServletRequest request) {\r\n        Map&lt;String, Object&gt; trace = super.getTrace(request);\r\n        String multipartHeader = request.getHeader(&quot;content-type&quot;);\r\n        if (multipartHeader != null &amp;&amp; multipartHeader.startsWith(&quot;multipart/form-data&quot;)) {\r\n            Map&lt;String, Object&gt; parts = new LinkedHashMap&lt;&gt;();\r\n            try {\r\n                request.getParts().forEach(\r\n                        part -&gt; {\r\n                            try {\r\n                                parts.put(part.getName(), IOUtils.toString(part.getInputStream(), Charset.forName(&quot;UTF-8&quot;)));\r\n                            } catch (IOException e) {\r\n                                e.printStackTrace();\r\n                            }\r\n                        }\r\n                );\r\n            } catch (IOException | ServletException e) {\r\n                e.printStackTrace();\r\n            }\r\n            if (!parts.isEmpty()) {\r\n                trace.put(&quot;multipart-content-map&quot;, parts);\r\n            }\r\n        }\r\n        return trace;\r\n      }\r\n    }\r\n\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html\r\n  [2]: https://github.com/spring-projects/spring-boot/blob/master/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/trace/TraceRepository.java &quot;TraceRepository&quot;\r\n  [3]: https://github.com/spring-projects/spring-boot/blob/master/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/trace/InMemoryTraceRepository.java\r\n  [4]: https://github.com/spring-projects/spring-boot/blob/master/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/trace/WebRequestTraceFilter.java","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>After adding <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html\" rel=\"noreferrer\">Actuators</a> to the spring boot bassed application you have <code>/trace</code> endpoint available with latest requests informations. This endpoint is working based on <a href=\"https://github.com/spring-projects/spring-boot/blob/master/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/trace/TraceRepository.java\" rel=\"noreferrer\" title=\"TraceRepository\">TraceRepository</a> and default implementation is <a href=\"https://github.com/spring-projects/spring-boot/blob/master/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/trace/InMemoryTraceRepository.java\" rel=\"noreferrer\">InMemoryTraceRepository</a> that saves last 100 calls. You can change this by implementing this interface by yourself and make it available as a Spring bean. For example to log all requests to log (and still use default implementation as a basic storage for serving info on <code>/trace</code> endpoint) I'm using this kind of implementation: </p>\n\n<pre><code>import org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.boot.actuate.trace.InMemoryTraceRepository;\nimport org.springframework.boot.actuate.trace.Trace;\nimport org.springframework.boot.actuate.trace.TraceRepository;\nimport org.springframework.stereotype.Component;\n\nimport java.util.List;\nimport java.util.Map;\n\n\n@Component\npublic class LoggingTraceRepository implements TraceRepository {\n\n  private static final Logger LOG = LoggerFactory.getLogger(LoggingTraceRepository.class);\n  private final TraceRepository delegate = new InMemoryTraceRepository();\n\n  @Override\n  public List&lt;Trace&gt; findAll() {\n    return delegate.findAll();\n  }\n\n  @Override\n  public void add(Map&lt;String, Object&gt; traceInfo) {\n    LOG.info(traceInfo.toString());\n    this.delegate.add(traceInfo);\n  }\n}\n</code></pre>\n\n<p>This <code>traceInfo</code> map contains basic informations about request and response in this kind of form:\n<code>{method=GET, path=/api/hello/John, headers={request={host=localhost:8080, user-agent=curl/7.51.0, accept=*/*}, response={X-Application-Context=application, Content-Type=text/plain;charset=UTF-8, Content-Length=10, Date=Wed, 29 Mar 2017 20:41:21 GMT, status=200}}}</code>. There is NO response content here.</p>\n\n<p><strong>EDIT!</strong> Logging POST data</p>\n\n<p>You can access POST data by overriding <a href=\"https://github.com/spring-projects/spring-boot/blob/master/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/trace/WebRequestTraceFilter.java\" rel=\"noreferrer\">WebRequestTraceFilter</a>, but don't think it is a good idea (e.g. all uploaded file content will go to logs)\nHere is sample code, but <strong>don't</strong> use it:</p>\n\n<pre><code>package info.fingo.nuntius.acuate.trace;\n\nimport org.apache.commons.io.IOUtils;\nimport org.springframework.boot.actuate.trace.TraceProperties;\nimport org.springframework.boot.actuate.trace.TraceRepository;\nimport org.springframework.boot.actuate.trace.WebRequestTraceFilter;\nimport org.springframework.stereotype.Component;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport java.io.IOException;\nimport java.nio.charset.Charset;\nimport java.util.LinkedHashMap;\nimport java.util.Map;\n\n@Component\npublic class CustomWebTraceFilter extends WebRequestTraceFilter {\n\n  public CustomWebTraceFilter(TraceRepository repository, TraceProperties properties) {\n    super(repository, properties);\n}\n\n  @Override\n  protected Map&lt;String, Object&gt; getTrace(HttpServletRequest request) {\n    Map&lt;String, Object&gt; trace = super.getTrace(request);\n    String multipartHeader = request.getHeader(\"content-type\");\n    if (multipartHeader != null &amp;&amp; multipartHeader.startsWith(\"multipart/form-data\")) {\n        Map&lt;String, Object&gt; parts = new LinkedHashMap&lt;&gt;();\n        try {\n            request.getParts().forEach(\n                    part -&gt; {\n                        try {\n                            parts.put(part.getName(), IOUtils.toString(part.getInputStream(), Charset.forName(\"UTF-8\")));\n                        } catch (IOException e) {\n                            e.printStackTrace();\n                        }\n                    }\n            );\n        } catch (IOException | ServletException e) {\n            e.printStackTrace();\n        }\n        if (!parts.isEmpty()) {\n            trace.put(\"multipart-content-map\", parts);\n        }\n    }\n    return trace;\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"score":154,"creation_date":1496646583,"post_id":43155103,"comment_id":75728410,"body_markdown":"Note that it does _not_ log the responses, only the requests.","body":"Note that it does <i>not</i> log the responses, only the requests."},{"owner":{"account_id":3072521,"reputation":1252,"user_id":2602807,"accept_rate":41,"display_name":"user2602807"},"score":3,"creation_date":1507895827,"post_id":43155103,"comment_id":80404695,"body_markdown":"There is only requests. How to log responses bodies using CommonsRequestLoggingFilter ?","body":"There is only requests. How to log responses bodies using CommonsRequestLoggingFilter ?"},{"owner":{"account_id":3675763,"reputation":1288,"user_id":3061903,"accept_rate":55,"display_name":"Vishal Maral"},"score":12,"creation_date":1520494244,"post_id":43155103,"comment_id":85340327,"body_markdown":"Also this does not log Exception","body":"Also this does not log Exception"},{"owner":{"account_id":2130509,"reputation":4379,"user_id":1891456,"display_name":"Yogesh Badke"},"score":0,"creation_date":1520496945,"post_id":43155103,"comment_id":85341700,"body_markdown":"Well, that is expected as it&#39;s a request logging filter. More on this here: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/filter/CommonsRequestLoggingFilter.html","body":"Well, that is expected as it&#39;s a request logging filter. More on this here: <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/filter/CommonsRequestLoggingFilter.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring/docs/current/javadoc-api/org/&hellip;</a>"},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":1,"creation_date":1527183365,"post_id":43155103,"comment_id":88042753,"body_markdown":"Sorry newbie question but...add it to our config?  in springboot for instance?","body":"Sorry newbie question but...add it to our config?  in springboot for instance?"},{"owner":{"account_id":4767709,"reputation":1245,"user_id":3853405,"accept_rate":25,"display_name":"Jaspreet Jolly"},"score":0,"creation_date":1529935072,"post_id":43155103,"comment_id":89042880,"body_markdown":"But it only logs payload in after request message not in before request message.Is there a way to log payload in before request??","body":"But it only logs payload in after request message not in before request message.Is there a way to log payload in before request??"},{"owner":{"account_id":1399180,"reputation":1687,"user_id":1328275,"accept_rate":67,"display_name":"Venkatesh Nannan"},"score":6,"creation_date":1535007655,"post_id":43155103,"comment_id":90909656,"body_markdown":"If you have large JSON body, set the payload length to a big number to log the whole request body.  loggingFilter.setMaxPayloadLength(100000);","body":"If you have large JSON body, set the payload length to a big number to log the whole request body.  loggingFilter.setMaxPayloadLength(100000);"},{"owner":{"account_id":263257,"reputation":603,"user_id":548701,"accept_rate":83,"display_name":"S&#233;bastien Tromp"},"score":0,"creation_date":1539767913,"post_id":43155103,"comment_id":92618180,"body_markdown":"Do you know how to log the JSON body on a single line (ie remove pretty-print)?","body":"Do you know how to log the JSON body on a single line (ie remove pretty-print)?"},{"owner":{"account_id":83967,"reputation":7565,"user_id":235026,"accept_rate":100,"display_name":"Mingjiang Shi"},"score":1,"creation_date":1588584419,"post_id":43155103,"comment_id":108943932,"body_markdown":"Why does it log the request twice, i.e. before and after the request being processed. and the only difference is the after request log contains payload.","body":"Why does it log the request twice, i.e. before and after the request being processed. and the only difference is the after request log contains payload."},{"owner":{"account_id":12512860,"reputation":167,"user_id":9107303,"display_name":"folkboat"},"score":1,"creation_date":1589698997,"post_id":43155103,"comment_id":109392434,"body_markdown":"make sure you have enable `debug = true` in application.properties","body":"make sure you have enable <code>debug = true</code> in application.properties"},{"owner":{"account_id":10160262,"reputation":604,"user_id":7503961,"display_name":"Ashish Sharma"},"score":0,"creation_date":1606977029,"post_id":43155103,"comment_id":115128103,"body_markdown":"how to measure latency ?","body":"how to measure latency ?"},{"owner":{"account_id":7524109,"reputation":1090,"user_id":5715001,"display_name":"V&#225;clav Kužel"},"score":4,"creation_date":1650023303,"post_id":43155103,"comment_id":127024797,"body_markdown":"@rogerdpack Add `logging.level.org.springframework.web.filter.CommonsRequestLoggingFilter=DEBUG` to the properties. Then look for &quot;before request&quot; and &quot;after request&quot; debug messages.","body":"@rogerdpack Add <code>logging.level.org.springframework.web.filter.CommonsRequestL&zwnj;&#8203;oggingFilter=DEBUG</code> to the properties. Then look for &quot;before request&quot; and &quot;after request&quot; debug messages."},{"owner":{"account_id":460510,"reputation":9305,"user_id":861646,"accept_rate":54,"display_name":"Tobia"},"score":1,"creation_date":1679062550,"post_id":43155103,"comment_id":133658437,"body_markdown":"It doesn&#39;t work for me. I have set log level to debug for that package.","body":"It doesn&#39;t work for me. I have set log level to debug for that package."}],"tags":[],"owner":{"account_id":2130509,"reputation":4379,"user_id":1891456,"display_name":"Yogesh Badke"},"comment_count":13,"down_vote_count":14,"up_vote_count":209,"is_accepted":false,"score":195,"last_activity_date":1573228140,"creation_date":1491039132,"answer_id":43155103,"question_id":33744875,"body_markdown":"Spring already provides a filter that does this job. Add following bean to your config\r\n\r\n    @Bean\r\n    public CommonsRequestLoggingFilter requestLoggingFilter() {\r\n        CommonsRequestLoggingFilter loggingFilter = new CommonsRequestLoggingFilter();\r\n        loggingFilter.setIncludeClientInfo(true);\r\n        loggingFilter.setIncludeQueryString(true);\r\n        loggingFilter.setIncludePayload(true);\r\n        loggingFilter.setMaxPayloadLength(64000);\r\n        return loggingFilter;\r\n    }\r\n\r\nDon&#39;t forget to change log level of `org.springframework.web.filter.CommonsRequestLoggingFilter` to `DEBUG`. ","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>Spring already provides a filter that does this job. Add following bean to your config</p>\n\n<pre><code>@Bean\npublic CommonsRequestLoggingFilter requestLoggingFilter() {\n    CommonsRequestLoggingFilter loggingFilter = new CommonsRequestLoggingFilter();\n    loggingFilter.setIncludeClientInfo(true);\n    loggingFilter.setIncludeQueryString(true);\n    loggingFilter.setIncludePayload(true);\n    loggingFilter.setMaxPayloadLength(64000);\n    return loggingFilter;\n}\n</code></pre>\n\n<p>Don't forget to change log level of <code>org.springframework.web.filter.CommonsRequestLoggingFilter</code> to <code>DEBUG</code>. </p>\n"},{"comments":[{"owner":{"account_id":62423,"reputation":3486,"user_id":185498,"display_name":"Manushin Igor"},"score":3,"creation_date":1504868229,"post_id":45031297,"comment_id":79191737,"body_markdown":"Yes, you are right - this is valid answer for get requests logging to the same log file with all other results. However, @moreo asked to log GET, POST, etc. and to the separate file (as I understand)","body":"Yes, you are right - this is valid answer for get requests logging to the same log file with all other results. However, @moreo asked to log GET, POST, etc. and to the separate file (as I understand)"},{"owner":{"account_id":2078190,"reputation":1221,"user_id":1850930,"display_name":"jfajunior"},"score":4,"creation_date":1577348910,"post_id":45031297,"comment_id":105146649,"body_markdown":"If you want the headers to be included in the log, then you should add: \n&quot;spring.http.log-request-details=true&quot; to you application.properties file.","body":"If you want the headers to be included in the log, then you should add:  &quot;spring.http.log-request-details=true&quot; to you application.properties file."}],"tags":[],"owner":{"account_id":252813,"reputation":2146,"user_id":531111,"accept_rate":55,"display_name":"Ankit"},"comment_count":2,"down_vote_count":0,"up_vote_count":64,"is_accepted":false,"score":64,"last_activity_date":1499767191,"creation_date":1499767191,"answer_id":45031297,"question_id":33744875,"body_markdown":"I had defined logging level in `application.properties` to print requests/responses, method url in the log file\r\n\r\n    logging.level.org.springframework.web=DEBUG\r\n    logging.level.org.hibernate.SQL=INFO\r\n    logging.file=D:/log/myapp.log\r\n\r\nI had used Spring Boot. ","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>I had defined logging level in <code>application.properties</code> to print requests/responses, method url in the log file</p>\n\n<pre><code>logging.level.org.springframework.web=DEBUG\nlogging.level.org.hibernate.SQL=INFO\nlogging.file=D:/log/myapp.log\n</code></pre>\n\n<p>I had used Spring Boot. </p>\n"},{"tags":[],"owner":{"account_id":1502661,"reputation":1753,"user_id":1406807,"display_name":"Yura"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1500988789,"creation_date":1500988789,"answer_id":45304605,"question_id":33744875,"body_markdown":"if you use Tomcat in your boot app here is `org.apache.catalina.filters.RequestDumperFilter` in a class path for you. (but it will not provide you &quot;with exceptions in single place&quot;).\r\n","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>if you use Tomcat in your boot app here is <code>org.apache.catalina.filters.RequestDumperFilter</code> in a class path for you. (but it will not provide you \"with exceptions in single place\").</p>\n"},{"comments":[{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":5,"creation_date":1521147228,"post_id":47963056,"comment_id":85620178,"body_markdown":"added as a dependency to a minimal spring boot app and tried to run - no change, no logging output at all in my app. I think there are some additional dependencies or classes this needs? Registering it as a filter doesn&#39;t seem to do anything either.","body":"added as a dependency to a minimal spring boot app and tried to run - no change, no logging output at all in my app. I think there are some additional dependencies or classes this needs? Registering it as a filter doesn&#39;t seem to do anything either."},{"owner":{"account_id":3249876,"reputation":6323,"user_id":2790036,"accept_rate":67,"display_name":"Pratik Singhal"},"score":1,"creation_date":1527855134,"post_id":47963056,"comment_id":88296388,"body_markdown":"@eis You need to register it as a filter as explained in the docs here. https://github.com/zalando/logbook","body":"@eis You need to register it as a filter as explained in the docs here. <a href=\"https://github.com/zalando/logbook\" rel=\"nofollow noreferrer\">github.com/zalando/logbook</a>"},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1527858017,"post_id":47963056,"comment_id":88298303,"body_markdown":"I know, that&#39;s why I said &quot;registering it as a filter doesn&#39;t seem to do anything either&quot;","body":"I know, that&#39;s why I said &quot;registering it as a filter doesn&#39;t seem to do anything either&quot;"},{"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"score":5,"creation_date":1531823965,"post_id":47963056,"comment_id":89730047,"body_markdown":"Logbook doc says: &quot;Logbook comes with a convenient auto configuration for Spring Boot users. It sets up all of the following parts automatically with sensible defaults.&quot; But it does not work.","body":"Logbook doc says: &quot;Logbook comes with a convenient auto configuration for Spring Boot users. It sets up all of the following parts automatically with sensible defaults.&quot; But it does not work."},{"owner":{"account_id":4745777,"reputation":319,"user_id":3837185,"accept_rate":83,"display_name":"TolkienWASP"},"score":14,"creation_date":1533592450,"post_id":47963056,"comment_id":90393547,"body_markdown":"@LeosLiterak I believe you need to add `logging.level.org.zalando.logbook=TRACE`  to your `application.properties` (as is stated in the `Readme`)","body":"@LeosLiterak I believe you need to add <code>logging.level.org.zalando.logbook=TRACE</code>  to your <code>application.properties</code> (as is stated in the <code>Readme</code>)"},{"owner":{"account_id":3016677,"reputation":548,"user_id":2558642,"accept_rate":17,"display_name":"Yashveer Rana"},"score":3,"creation_date":1541104702,"post_id":47963056,"comment_id":93113321,"body_markdown":"Logbook autoconfiguration doesn&#39;t seem to work for spring-boot v2.0.5","body":"Logbook autoconfiguration doesn&#39;t seem to work for spring-boot v2.0.5"},{"owner":{"account_id":1740131,"reputation":3810,"user_id":1591777,"display_name":"cstroe"},"score":1,"creation_date":1570165558,"post_id":47963056,"comment_id":102834652,"body_markdown":"Successfully used Logbook with Spring Boot 2.1.8.","body":"Successfully used Logbook with Spring Boot 2.1.8."},{"owner":{"account_id":14204637,"reputation":470,"user_id":11375887,"display_name":"Jonathan Mendoza"},"score":0,"creation_date":1590707872,"post_id":47963056,"comment_id":109790761,"body_markdown":"Hi @TolkienWASP thanks for your comment, it worked with Spring Boot 2.3.0.RELEASE, regards.","body":"Hi @TolkienWASP thanks for your comment, it worked with Spring Boot 2.3.0.RELEASE, regards."},{"owner":{"account_id":98194,"reputation":4266,"user_id":265954,"display_name":"t0r0X"},"score":0,"creation_date":1608186415,"post_id":47963056,"comment_id":115507209,"body_markdown":"The log level is the key! Thanks @TolkienWASP","body":"The log level is the key! Thanks @TolkienWASP"},{"owner":{"account_id":533485,"reputation":2992,"user_id":903885,"accept_rate":87,"display_name":"Hasan Can Saral"},"score":0,"creation_date":1619523822,"post_id":47963056,"comment_id":118926040,"body_markdown":"Logbook doesn&#39;t support `DispatcherServlet`, meaning that Spring Boot error response logs (HTTP 400 or HTTP 500) will not have body.","body":"Logbook doesn&#39;t support <code>DispatcherServlet</code>, meaning that Spring Boot error response logs (HTTP 400 or HTTP 500) will not have body."},{"owner":{"account_id":208224,"reputation":71,"user_id":458574,"display_name":"togaurav"},"score":0,"creation_date":1625314652,"post_id":47963056,"comment_id":120597955,"body_markdown":"After adding the logbook dependency, getting following error &gt;&gt;    Caused by: java.lang.ClassNotFoundException: org.springframework.boot.autoconfigure.security.SecurityFilterAutoConfiguration\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:602)","body":"After adding the logbook dependency, getting following error &gt;&gt;    Caused by: java.lang.ClassNotFoundException: org.springframework.boot.autoconfigure.security.SecurityFilt&zwnj;&#8203;erAutoConfiguration \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(B&zwnj;&#8203;uiltinClassLoader.ja&zwnj;&#8203;va:602)"},{"owner":{"account_id":2364090,"reputation":374,"user_id":2070165,"display_name":"Franco G"},"score":0,"creation_date":1677674489,"post_id":47963056,"comment_id":133383670,"body_markdown":"It worked for me with Spring boot 2.7.2, but I think that a common cause of errors is adding the core library (&#39;org.zalando:logbook-core:2.15.0&#39;) instead of the spring-boot library (&#39;org.zalando:logbook-spring-boot-starter:2.15.0&#39;) to the project. Also I would prefer the HTTP format, expected by default, (more readable on the console), to JSON that apparently is the new default. Anyway, it is a great and handy tool.","body":"It worked for me with Spring boot 2.7.2, but I think that a common cause of errors is adding the core library (&#39;org.zalando:logbook-core:2.15.0&#39;) instead of the spring-boot library (&#39;org.zalando:logbook-spring-boot-starter:2.15.0&#39;) to the project. Also I would prefer the HTTP format, expected by default, (more readable on the console), to JSON that apparently is the new default. Anyway, it is a great and handy tool."},{"owner":{"account_id":5729928,"reputation":61,"user_id":4525785,"display_name":"Jean Gon&#231;alves"},"score":0,"creation_date":1693428766,"post_id":47963056,"comment_id":135761603,"body_markdown":"Success here! I just added teh dependency and set the log level.","body":"Success here! I just added teh dependency and set the log level."}],"tags":[],"owner":{"account_id":11197077,"reputation":1367,"user_id":8215387,"display_name":"sihaya"},"comment_count":13,"down_vote_count":1,"up_vote_count":96,"is_accepted":false,"score":95,"last_activity_date":1608186303,"creation_date":1514139420,"answer_id":47963056,"question_id":33744875,"body_markdown":"The [Logbook][1] library is specifically made for logging HTTP requests and responses. It supports Spring Boot using a special starter library.\r\n\r\nTo enable logging in Spring Boot all you need to do is adding the library to your project&#39;s dependencies. For example assuming you are using Maven:\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.zalando&lt;/groupId&gt;\r\n        &lt;artifactId&gt;logbook-spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;version&gt;1.5.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nBy default the logging output looks like this:\r\n\r\n    {\r\n      &quot;origin&quot; : &quot;local&quot;,\r\n      &quot;correlation&quot; : &quot;52e19498-890c-4f75-a06c-06ddcf20836e&quot;,\r\n      &quot;status&quot; : 200,\r\n      &quot;headers&quot; : {\r\n        &quot;X-Application-Context&quot; : [\r\n          &quot;application:8088&quot;\r\n        ],\r\n        &quot;Content-Type&quot; : [\r\n          &quot;application/json;charset=UTF-8&quot;\r\n        ],\r\n        &quot;Transfer-Encoding&quot; : [\r\n          &quot;chunked&quot;\r\n        ],\r\n        &quot;Date&quot; : [\r\n          &quot;Sun, 24 Dec 2017 13:10:45 GMT&quot;\r\n        ]\r\n      },\r\n      &quot;body&quot; : {\r\n        &quot;thekey&quot; : &quot;some_example&quot;\r\n      },\r\n      &quot;duration&quot; : 105,\r\n      &quot;protocol&quot; : &quot;HTTP/1.1&quot;,\r\n      &quot;type&quot; : &quot;response&quot;\r\n    }\r\n\r\n\r\nIt does however not output the class name that is handling the request. The library does have some interfaces for writing custom loggers.\r\n\r\nNotes\r\n=====\r\nIn the meantime the library has significantly evolved, current version is **2.4.1**, see [https://github.com/zalando/logbook/releases][2]. E.g. the default ouput format has changed, and can be configured, filtered, etc.\r\n\r\nDo NOT forget to set the log level to `TRACE`, else you won&#39;t see anything:\r\n\r\n    logging:\r\n      level:\r\n        org.zalando.logbook: TRACE\r\n\r\n\r\n  [1]: https://github.com/zalando/logbook\r\n  [2]: https://github.com/zalando/logbook/releases","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>The <a href=\"https://github.com/zalando/logbook\" rel=\"noreferrer\">Logbook</a> library is specifically made for logging HTTP requests and responses. It supports Spring Boot using a special starter library.</p>\n<p>To enable logging in Spring Boot all you need to do is adding the library to your project's dependencies. For example assuming you are using Maven:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.zalando&lt;/groupId&gt;\n    &lt;artifactId&gt;logbook-spring-boot-starter&lt;/artifactId&gt;\n    &lt;version&gt;1.5.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>By default the logging output looks like this:</p>\n<pre><code>{\n  &quot;origin&quot; : &quot;local&quot;,\n  &quot;correlation&quot; : &quot;52e19498-890c-4f75-a06c-06ddcf20836e&quot;,\n  &quot;status&quot; : 200,\n  &quot;headers&quot; : {\n    &quot;X-Application-Context&quot; : [\n      &quot;application:8088&quot;\n    ],\n    &quot;Content-Type&quot; : [\n      &quot;application/json;charset=UTF-8&quot;\n    ],\n    &quot;Transfer-Encoding&quot; : [\n      &quot;chunked&quot;\n    ],\n    &quot;Date&quot; : [\n      &quot;Sun, 24 Dec 2017 13:10:45 GMT&quot;\n    ]\n  },\n  &quot;body&quot; : {\n    &quot;thekey&quot; : &quot;some_example&quot;\n  },\n  &quot;duration&quot; : 105,\n  &quot;protocol&quot; : &quot;HTTP/1.1&quot;,\n  &quot;type&quot; : &quot;response&quot;\n}\n</code></pre>\n<p>It does however not output the class name that is handling the request. The library does have some interfaces for writing custom loggers.</p>\n<h1>Notes</h1>\n<p>In the meantime the library has significantly evolved, current version is <strong>2.4.1</strong>, see <a href=\"https://github.com/zalando/logbook/releases\" rel=\"noreferrer\">https://github.com/zalando/logbook/releases</a>. E.g. the default ouput format has changed, and can be configured, filtered, etc.</p>\n<p>Do NOT forget to set the log level to <code>TRACE</code>, else you won't see anything:</p>\n<pre><code>logging:\n  level:\n    org.zalando.logbook: TRACE\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11087309,"reputation":861,"user_id":8140523,"display_name":"NanoNova"},"score":0,"creation_date":1650950612,"post_id":49388272,"comment_id":127238448,"body_markdown":"no response body","body":"no response body"}],"tags":[],"owner":{"account_id":208839,"reputation":1399,"user_id":459572,"accept_rate":23,"display_name":"Donz"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1521559830,"creation_date":1521559830,"answer_id":49388272,"question_id":33744875,"body_markdown":"If somebody still need it here is simple implementation with Spring HttpTrace Actuator. But as they have told upper it doesn&#39;t log bodies.\r\n\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.apache.commons.lang3.builder.ToStringBuilder;\r\n    import org.springframework.boot.actuate.trace.http.HttpTrace;\r\n    import org.springframework.boot.actuate.trace.http.InMemoryHttpTraceRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    @Slf4j\r\n    @Repository\r\n    public class LoggingInMemoryHttpTraceRepository extends InMemoryHttpTraceRepository {\r\n        public void add(HttpTrace trace) {\r\n            super.add(trace);\r\n            log.info(&quot;Trace:&quot; + ToStringBuilder.reflectionToString(trace));\r\n            log.info(&quot;Request:&quot; + ToStringBuilder.reflectionToString(trace.getRequest()));\r\n            log.info(&quot;Response:&quot; + ToStringBuilder.reflectionToString(trace.getResponse()));\r\n        }\r\n    }","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>If somebody still need it here is simple implementation with Spring HttpTrace Actuator. But as they have told upper it doesn't log bodies.</p>\n\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.apache.commons.lang3.builder.ToStringBuilder;\nimport org.springframework.boot.actuate.trace.http.HttpTrace;\nimport org.springframework.boot.actuate.trace.http.InMemoryHttpTraceRepository;\nimport org.springframework.stereotype.Repository;\n\n@Slf4j\n@Repository\npublic class LoggingInMemoryHttpTraceRepository extends InMemoryHttpTraceRepository {\n    public void add(HttpTrace trace) {\n        super.add(trace);\n        log.info(\"Trace:\" + ToStringBuilder.reflectionToString(trace));\n        log.info(\"Request:\" + ToStringBuilder.reflectionToString(trace.getRequest()));\n        log.info(\"Response:\" + ToStringBuilder.reflectionToString(trace.getResponse()));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1042454,"reputation":2808,"user_id":1048185,"accept_rate":57,"display_name":"Ihor M."},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1523565169,"creation_date":1523565169,"answer_id":49805419,"question_id":33744875,"body_markdown":"In order to log requests that result in 400 only:\r\n\r\n    import javax.servlet.FilterChain;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import javax.servlet.http.HttpSession;\r\n    \r\n    import org.apache.commons.io.FileUtils;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.server.ServletServerHttpRequest;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.util.StringUtils;\r\n    import org.springframework.web.filter.AbstractRequestLoggingFilter;\r\n    import org.springframework.web.filter.OncePerRequestFilter;\r\n    import org.springframework.web.util.ContentCachingRequestWrapper;\r\n    import org.springframework.web.util.WebUtils;\r\n    \r\n    /**\r\n     * Implementation is partially copied from {@link AbstractRequestLoggingFilter} and modified to output request information only if request resulted in 400.\r\n     * Unfortunately {@link AbstractRequestLoggingFilter} is not smart enough to expose {@link HttpServletResponse} value in afterRequest() method.\r\n     */\r\n    @Component\r\n    public class RequestLoggingFilter extends OncePerRequestFilter {\r\n    \r\n        public static final String DEFAULT_AFTER_MESSAGE_PREFIX = &quot;After request [&quot;;\r\n    \r\n        public static final String DEFAULT_AFTER_MESSAGE_SUFFIX = &quot;]&quot;;\r\n    \r\n        private final boolean includeQueryString = true;\r\n        private final boolean includeClientInfo = true;\r\n        private final boolean includeHeaders = true;\r\n        private final boolean includePayload = true;\r\n    \r\n        private final int maxPayloadLength = (int) (2 * FileUtils.ONE_MB);\r\n    \r\n        private final String afterMessagePrefix = DEFAULT_AFTER_MESSAGE_PREFIX;\r\n    \r\n        private final String afterMessageSuffix = DEFAULT_AFTER_MESSAGE_SUFFIX;\r\n    \r\n        /**\r\n         * The default value is &quot;false&quot; so that the filter may log a &quot;before&quot; message\r\n         * at the start of request processing and an &quot;after&quot; message at the end from\r\n         * when the last asynchronously dispatched thread is exiting.\r\n         */\r\n        @Override\r\n        protected boolean shouldNotFilterAsyncDispatch() {\r\n            return false;\r\n        }\r\n    \r\n        @Override\r\n        protected void doFilterInternal(final HttpServletRequest request, final HttpServletResponse response, final FilterChain filterChain)\r\n                throws ServletException, IOException {\r\n    \r\n            final boolean isFirstRequest = !isAsyncDispatch(request);\r\n            HttpServletRequest requestToUse = request;\r\n    \r\n            if (includePayload &amp;&amp; isFirstRequest &amp;&amp; !(request instanceof ContentCachingRequestWrapper)) {\r\n                requestToUse = new ContentCachingRequestWrapper(request, maxPayloadLength);\r\n            }\r\n    \r\n            final boolean shouldLog = shouldLog(requestToUse);\r\n    \r\n            try {\r\n                filterChain.doFilter(requestToUse, response);\r\n            } finally {\r\n                if (shouldLog &amp;&amp; !isAsyncStarted(requestToUse)) {\r\n                    afterRequest(requestToUse, response, getAfterMessage(requestToUse));\r\n                }\r\n            }\r\n        }\r\n    \r\n        private String getAfterMessage(final HttpServletRequest request) {\r\n            return createMessage(request, this.afterMessagePrefix, this.afterMessageSuffix);\r\n        }\r\n    \r\n        private String createMessage(final HttpServletRequest request, final String prefix, final String suffix) {\r\n            final StringBuilder msg = new StringBuilder();\r\n            msg.append(prefix);\r\n            msg.append(&quot;uri=&quot;).append(request.getRequestURI());\r\n    \r\n            if (includeQueryString) {\r\n                final String queryString = request.getQueryString();\r\n                if (queryString != null) {\r\n                    msg.append(&#39;?&#39;).append(queryString);\r\n                }\r\n            }\r\n    \r\n            if (includeClientInfo) {\r\n                final String client = request.getRemoteAddr();\r\n                if (StringUtils.hasLength(client)) {\r\n                    msg.append(&quot;;client=&quot;).append(client);\r\n                }\r\n                final HttpSession session = request.getSession(false);\r\n                if (session != null) {\r\n                    msg.append(&quot;;session=&quot;).append(session.getId());\r\n                }\r\n                final String user = request.getRemoteUser();\r\n                if (user != null) {\r\n                    msg.append(&quot;;user=&quot;).append(user);\r\n                }\r\n            }\r\n    \r\n            if (includeHeaders) {\r\n                msg.append(&quot;;headers=&quot;).append(new ServletServerHttpRequest(request).getHeaders());\r\n            }\r\n    \r\n            if (includeHeaders) {\r\n                final ContentCachingRequestWrapper wrapper = WebUtils.getNativeRequest(request, ContentCachingRequestWrapper.class);\r\n                if (wrapper != null) {\r\n                    final byte[] buf = wrapper.getContentAsByteArray();\r\n                    if (buf.length &gt; 0) {\r\n                        final int length = Math.min(buf.length, maxPayloadLength);\r\n                        String payload;\r\n                        try {\r\n                            payload = new String(buf, 0, length, wrapper.getCharacterEncoding());\r\n                        } catch (final UnsupportedEncodingException ex) {\r\n                            payload = &quot;[unknown]&quot;;\r\n                        }\r\n                        msg.append(&quot;;payload=&quot;).append(payload);\r\n                    }\r\n                }\r\n            }\r\n            msg.append(suffix);\r\n            return msg.toString();\r\n        }\r\n    \r\n        private boolean shouldLog(final HttpServletRequest request) {\r\n            return true;\r\n        }\r\n    \r\n        private void afterRequest(final HttpServletRequest request, final HttpServletResponse response, final String message) {\r\n            if (response.getStatus() == HttpStatus.BAD_REQUEST.value()) {\r\n                logger.warn(message);\r\n            }\r\n        }\r\n    \r\n    }","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>In order to log requests that result in 400 only:</p>\n\n<pre><code>import javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.servlet.http.HttpSession;\n\nimport org.apache.commons.io.FileUtils;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.server.ServletServerHttpRequest;\nimport org.springframework.stereotype.Component;\nimport org.springframework.util.StringUtils;\nimport org.springframework.web.filter.AbstractRequestLoggingFilter;\nimport org.springframework.web.filter.OncePerRequestFilter;\nimport org.springframework.web.util.ContentCachingRequestWrapper;\nimport org.springframework.web.util.WebUtils;\n\n/**\n * Implementation is partially copied from {@link AbstractRequestLoggingFilter} and modified to output request information only if request resulted in 400.\n * Unfortunately {@link AbstractRequestLoggingFilter} is not smart enough to expose {@link HttpServletResponse} value in afterRequest() method.\n */\n@Component\npublic class RequestLoggingFilter extends OncePerRequestFilter {\n\n    public static final String DEFAULT_AFTER_MESSAGE_PREFIX = \"After request [\";\n\n    public static final String DEFAULT_AFTER_MESSAGE_SUFFIX = \"]\";\n\n    private final boolean includeQueryString = true;\n    private final boolean includeClientInfo = true;\n    private final boolean includeHeaders = true;\n    private final boolean includePayload = true;\n\n    private final int maxPayloadLength = (int) (2 * FileUtils.ONE_MB);\n\n    private final String afterMessagePrefix = DEFAULT_AFTER_MESSAGE_PREFIX;\n\n    private final String afterMessageSuffix = DEFAULT_AFTER_MESSAGE_SUFFIX;\n\n    /**\n     * The default value is \"false\" so that the filter may log a \"before\" message\n     * at the start of request processing and an \"after\" message at the end from\n     * when the last asynchronously dispatched thread is exiting.\n     */\n    @Override\n    protected boolean shouldNotFilterAsyncDispatch() {\n        return false;\n    }\n\n    @Override\n    protected void doFilterInternal(final HttpServletRequest request, final HttpServletResponse response, final FilterChain filterChain)\n            throws ServletException, IOException {\n\n        final boolean isFirstRequest = !isAsyncDispatch(request);\n        HttpServletRequest requestToUse = request;\n\n        if (includePayload &amp;&amp; isFirstRequest &amp;&amp; !(request instanceof ContentCachingRequestWrapper)) {\n            requestToUse = new ContentCachingRequestWrapper(request, maxPayloadLength);\n        }\n\n        final boolean shouldLog = shouldLog(requestToUse);\n\n        try {\n            filterChain.doFilter(requestToUse, response);\n        } finally {\n            if (shouldLog &amp;&amp; !isAsyncStarted(requestToUse)) {\n                afterRequest(requestToUse, response, getAfterMessage(requestToUse));\n            }\n        }\n    }\n\n    private String getAfterMessage(final HttpServletRequest request) {\n        return createMessage(request, this.afterMessagePrefix, this.afterMessageSuffix);\n    }\n\n    private String createMessage(final HttpServletRequest request, final String prefix, final String suffix) {\n        final StringBuilder msg = new StringBuilder();\n        msg.append(prefix);\n        msg.append(\"uri=\").append(request.getRequestURI());\n\n        if (includeQueryString) {\n            final String queryString = request.getQueryString();\n            if (queryString != null) {\n                msg.append('?').append(queryString);\n            }\n        }\n\n        if (includeClientInfo) {\n            final String client = request.getRemoteAddr();\n            if (StringUtils.hasLength(client)) {\n                msg.append(\";client=\").append(client);\n            }\n            final HttpSession session = request.getSession(false);\n            if (session != null) {\n                msg.append(\";session=\").append(session.getId());\n            }\n            final String user = request.getRemoteUser();\n            if (user != null) {\n                msg.append(\";user=\").append(user);\n            }\n        }\n\n        if (includeHeaders) {\n            msg.append(\";headers=\").append(new ServletServerHttpRequest(request).getHeaders());\n        }\n\n        if (includeHeaders) {\n            final ContentCachingRequestWrapper wrapper = WebUtils.getNativeRequest(request, ContentCachingRequestWrapper.class);\n            if (wrapper != null) {\n                final byte[] buf = wrapper.getContentAsByteArray();\n                if (buf.length &gt; 0) {\n                    final int length = Math.min(buf.length, maxPayloadLength);\n                    String payload;\n                    try {\n                        payload = new String(buf, 0, length, wrapper.getCharacterEncoding());\n                    } catch (final UnsupportedEncodingException ex) {\n                        payload = \"[unknown]\";\n                    }\n                    msg.append(\";payload=\").append(payload);\n                }\n            }\n        }\n        msg.append(suffix);\n        return msg.toString();\n    }\n\n    private boolean shouldLog(final HttpServletRequest request) {\n        return true;\n    }\n\n    private void afterRequest(final HttpServletRequest request, final HttpServletResponse response, final String message) {\n        if (response.getStatus() == HttpStatus.BAD_REQUEST.value()) {\n            logger.warn(message);\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1324402,"reputation":3807,"user_id":1269558,"display_name":"diogo"},"comment_count":0,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1524496770,"creation_date":1524496770,"answer_id":49984534,"question_id":33744875,"body_markdown":"You can also configure a custom Spring interceptor `HandlerInterceptorAdapter` for a simplified implementation of pre-only/post-only interceptors:\r\n\r\n    @Component\r\n    public class CustomHttpInterceptor extends HandlerInterceptorAdapter {\r\n    \r\n        @Override\r\n        public boolean preHandle (final HttpServletRequest request, final HttpServletResponse response,\r\n                final Object handler)\r\n                throws Exception {\r\n\r\n            // Logs here\r\n\r\n            return super.preHandle(request, response, handler);\r\n        }\r\n    \r\n        @Override\r\n        public void afterCompletion(final HttpServletRequest request, final HttpServletResponse response,\r\n                final Object handler, final Exception ex) {\r\n            // Logs here\r\n        }\r\n    }\r\n\r\nThen, you register as many interceptors as you want:\r\n\r\n    @Configuration\r\n    public class WebMvcConfig implements WebMvcConfigurer {\r\n    \r\n        @Autowired\r\n        CustomHttpInterceptor customHttpInterceptor;\r\n    \r\n        @Override\r\n        public void addInterceptors(InterceptorRegistry registry) {\r\n            registry.addInterceptor(customHttpInterceptor).addPathPatterns(&quot;/endpoints&quot;);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n----------\r\n\r\n\r\n***Note:** [just like stated by @Robert][1], you need to pay attention to the specific implementations of `HttpServletRequest` and `HttpServletResponse` your application is using.* \r\n\r\nFor example, for apps using the `ShallowEtagHeaderFilter`, the response implementation would be a `ContentCachingResponseWrapper`, so you&#39;d have:\r\n\r\n    @Component\r\n    public class CustomHttpInterceptor extends HandlerInterceptorAdapter {\r\n    \r\n        private static final Logger LOGGER = LoggerFactory.getLogger(CustomHttpInterceptor.class);\r\n    \r\n        private static final int MAX_PAYLOAD_LENGTH = 1000;\r\n    \r\n        @Override\r\n        public void afterCompletion(final HttpServletRequest request, final HttpServletResponse response,\r\n                final Object handler, final Exception ex) {\r\n            final byte[] contentAsByteArray = ((ContentCachingResponseWrapper) response).getContentAsByteArray();\r\n    \r\n            LOGGER.info(&quot;Request body:\\n&quot; + getContentAsString(contentAsByteArray, response.getCharacterEncoding()));\r\n        }\r\n    \r\n        private String getContentAsString(byte[] buf, String charsetName) {\r\n            if (buf == null || buf.length == 0) {\r\n                return &quot;&quot;;\r\n            }\r\n    \r\n            try {\r\n                int length = Math.min(buf.length, MAX_PAYLOAD_LENGTH);\r\n    \r\n                return new String(buf, 0, length, charsetName);\r\n            } catch (UnsupportedEncodingException ex) {\r\n                return &quot;Unsupported Encoding&quot;;\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n  [1]: https://stackoverflow.com/a/42023374/1269558","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>You can also configure a custom Spring interceptor <code>HandlerInterceptorAdapter</code> for a simplified implementation of pre-only/post-only interceptors:</p>\n\n<pre><code>@Component\npublic class CustomHttpInterceptor extends HandlerInterceptorAdapter {\n\n    @Override\n    public boolean preHandle (final HttpServletRequest request, final HttpServletResponse response,\n            final Object handler)\n            throws Exception {\n\n        // Logs here\n\n        return super.preHandle(request, response, handler);\n    }\n\n    @Override\n    public void afterCompletion(final HttpServletRequest request, final HttpServletResponse response,\n            final Object handler, final Exception ex) {\n        // Logs here\n    }\n}\n</code></pre>\n\n<p>Then, you register as many interceptors as you want:</p>\n\n<pre><code>@Configuration\npublic class WebMvcConfig implements WebMvcConfigurer {\n\n    @Autowired\n    CustomHttpInterceptor customHttpInterceptor;\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(customHttpInterceptor).addPathPatterns(\"/endpoints\");\n    }\n\n}\n</code></pre>\n\n<hr>\n\n<p><strong><em>Note:</strong> <a href=\"https://stackoverflow.com/a/42023374/1269558\">just like stated by @Robert</a>, you need to pay attention to the specific implementations of <code>HttpServletRequest</code> and <code>HttpServletResponse</code> your application is using.</em> </p>\n\n<p>For example, for apps using the <code>ShallowEtagHeaderFilter</code>, the response implementation would be a <code>ContentCachingResponseWrapper</code>, so you'd have:</p>\n\n<pre><code>@Component\npublic class CustomHttpInterceptor extends HandlerInterceptorAdapter {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(CustomHttpInterceptor.class);\n\n    private static final int MAX_PAYLOAD_LENGTH = 1000;\n\n    @Override\n    public void afterCompletion(final HttpServletRequest request, final HttpServletResponse response,\n            final Object handler, final Exception ex) {\n        final byte[] contentAsByteArray = ((ContentCachingResponseWrapper) response).getContentAsByteArray();\n\n        LOGGER.info(\"Request body:\\n\" + getContentAsString(contentAsByteArray, response.getCharacterEncoding()));\n    }\n\n    private String getContentAsString(byte[] buf, String charsetName) {\n        if (buf == null || buf.length == 0) {\n            return \"\";\n        }\n\n        try {\n            int length = Math.min(buf.length, MAX_PAYLOAD_LENGTH);\n\n            return new String(buf, 0, length, charsetName);\n        } catch (UnsupportedEncodingException ex) {\n            return \"Unsupported Encoding\";\n        }\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7078292,"reputation":690,"user_id":5417540,"accept_rate":0,"display_name":"Noman Akhtar"},"score":0,"creation_date":1554703015,"post_id":50954543,"comment_id":97833087,"body_markdown":"I am trying to use it in spring mvc and it&#39;s not working for me, It is required any additional setting except registering this bean and adding logger?","body":"I am trying to use it in spring mvc and it&#39;s not working for me, It is required any additional setting except registering this bean and adding logger?"}],"tags":[],"owner":{"account_id":7484685,"reputation":89,"user_id":5688352,"display_name":"Chris Paika"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1529518038,"creation_date":1529518038,"answer_id":50954543,"question_id":33744875,"body_markdown":"If you are seeing only part of your request payload, you need to call the `setMaxPayloadLength` function as it defaults to showing only 50 characters in your request body.  Also, setting `setIncludeHeaders` to false is a good idea if you don&#39;t want to log your auth headers! \r\n\r\n    @Bean\r\n    public CommonsRequestLoggingFilter requestLoggingFilter() {\r\n        CommonsRequestLoggingFilter loggingFilter = new CommonsRequestLoggingFilter();\r\n        loggingFilter.setIncludeClientInfo(false);\r\n        loggingFilter.setIncludeQueryString(false);\r\n        loggingFilter.setIncludePayload(true);\r\n        loggingFilter.setIncludeHeaders(false);\r\n        loggingFilter.setMaxPayloadLength(500);\r\n        return loggingFilter;\r\n    }\r\n\r\n\r\n","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>If you are seeing only part of your request payload, you need to call the <code>setMaxPayloadLength</code> function as it defaults to showing only 50 characters in your request body.  Also, setting <code>setIncludeHeaders</code> to false is a good idea if you don't want to log your auth headers! </p>\n\n<pre><code>@Bean\npublic CommonsRequestLoggingFilter requestLoggingFilter() {\n    CommonsRequestLoggingFilter loggingFilter = new CommonsRequestLoggingFilter();\n    loggingFilter.setIncludeClientInfo(false);\n    loggingFilter.setIncludeQueryString(false);\n    loggingFilter.setIncludePayload(true);\n    loggingFilter.setIncludeHeaders(false);\n    loggingFilter.setMaxPayloadLength(500);\n    return loggingFilter;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":332120,"reputation":4862,"user_id":657224,"accept_rate":17,"display_name":"Mike"},"score":2,"creation_date":1555422569,"post_id":50975133,"comment_id":98100246,"body_markdown":"Great answer, only suggestion would be to collect all the output into a buffer and log in a single statement.","body":"Great answer, only suggestion would be to collect all the output into a buffer and log in a single statement."},{"owner":{"account_id":5145448,"reputation":574,"user_id":4121585,"accept_rate":20,"display_name":"Vishal Patel"},"score":0,"creation_date":1614835502,"post_id":50975133,"comment_id":117507409,"body_markdown":"what if the api is returning Huge Stream of File. how to handle that?","body":"what if the api is returning Huge Stream of File. how to handle that?"}],"tags":[],"owner":{"account_id":3191341,"reputation":161,"user_id":2695504,"display_name":"Ramesh"},"comment_count":2,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1529604747,"creation_date":1529604747,"answer_id":50975133,"question_id":33744875,"body_markdown":"Please refer to below link for actual answer\r\n&lt;https://gist.github.com/int128/e47217bebdb4c402b2ffa7cc199307ba&gt;\r\n\r\nMade some changes from above referred solution , request and response will log in console and in file too if logger level is info. we can print either in console or file.\r\n\r\n    @Component\r\n    public class LoggingFilter extends OncePerRequestFilter {\r\n\r\n\tprivate static final List&lt;MediaType&gt; VISIBLE_TYPES = Arrays.asList(\r\n\t\t\tMediaType.valueOf(&quot;text/*&quot;),\r\n\t\t\tMediaType.APPLICATION_FORM_URLENCODED,\r\n\t\t\tMediaType.APPLICATION_JSON,\r\n\t\t\tMediaType.APPLICATION_XML,\r\n\t\t\tMediaType.valueOf(&quot;application/*+json&quot;),\r\n\t\t\tMediaType.valueOf(&quot;application/*+xml&quot;),\r\n\t\t\tMediaType.MULTIPART_FORM_DATA\r\n\t\t\t);\r\n\tLogger log = LoggerFactory.getLogger(ReqAndResLoggingFilter.class);\r\n\tprivate static final Path path = Paths.get(&quot;/home/ramesh/loggerReq.txt&quot;);\r\n\tprivate static BufferedWriter writer = null;\r\n\t@Override\r\n\tprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n\t\ttry {\r\n\t\t\twriter = Files.newBufferedWriter(path, Charset.forName(&quot;UTF-8&quot;));\r\n\t\tif (isAsyncDispatch(request)) {\r\n\t\t\tfilterChain.doFilter(request, response);\r\n\t\t} else {\r\n\t\t\tdoFilterWrapped(wrapRequest(request), wrapResponse(response), filterChain);\r\n\t\t}\r\n\t\t}finally {\r\n\t\t\twriter.close();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected void doFilterWrapped(ContentCachingRequestWrapper request, ContentCachingResponseWrapper response, FilterChain filterChain) throws ServletException, IOException {\r\n\t\ttry {\r\n\t\t\tbeforeRequest(request, response);\r\n\t\t\tfilterChain.doFilter(request, response);\r\n\t\t}\r\n\t\tfinally {\r\n\t\t\tafterRequest(request, response);\r\n\t\t\tresponse.copyBodyToResponse();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected void beforeRequest(ContentCachingRequestWrapper request, ContentCachingResponseWrapper response) throws IOException {\r\n\t\tif (log.isInfoEnabled()) {\r\n\t\t\tlogRequestHeader(request, request.getRemoteAddr() + &quot;|&gt;&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\tprotected void afterRequest(ContentCachingRequestWrapper request, ContentCachingResponseWrapper response) throws IOException {\r\n\t\tif (log.isInfoEnabled()) {\r\n\t\t\tlogRequestBody(request, request.getRemoteAddr() + &quot;|&gt;&quot;);\r\n\t\t\tlogResponse(response, request.getRemoteAddr() + &quot;|&lt;&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void logRequestHeader(ContentCachingRequestWrapper request, String prefix) throws IOException {\r\n\t\tString queryString = request.getQueryString();\r\n\t\tif (queryString == null) {\r\n\t\t\tprintLines(prefix,request.getMethod(),request.getRequestURI());\r\n\t\t\tlog.info(&quot;{} {} {}&quot;, prefix, request.getMethod(), request.getRequestURI());\r\n\t\t} else {\r\n\t\t\tprintLines(prefix,request.getMethod(),request.getRequestURI(),queryString);\r\n\t\t\tlog.info(&quot;{} {} {}?{}&quot;, prefix, request.getMethod(), request.getRequestURI(), queryString);\r\n\t\t}\r\n\t\tCollections.list(request.getHeaderNames()).forEach(headerName -&gt;\r\n\t\tCollections.list(request.getHeaders(headerName)).forEach(headerValue -&gt;\r\n\t\tlog.info(&quot;{} {}: {}&quot;, prefix, headerName, headerValue)));\r\n\t\tprintLines(prefix);\r\n\t\tprintLines(RequestContextHolder.currentRequestAttributes().getSessionId());\r\n\t\tlog.info(&quot;{}&quot;, prefix);\r\n\r\n\t\tlog.info(&quot; Session ID: &quot;, RequestContextHolder.currentRequestAttributes().getSessionId());\r\n\t}\r\n\r\n\tprivate void printLines(String ...args) throws IOException {\r\n\r\n\t\ttry {\r\n\t\tfor(String varArgs:args) {\r\n\t\t\t\twriter.write(varArgs);\r\n\t\t\t\twriter.newLine();\r\n\t\t}\r\n\t\t\t}catch(IOException ex){\r\n\t\t\t\tex.printStackTrace();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprivate void logRequestBody(ContentCachingRequestWrapper request, String prefix) {\r\n\t\tbyte[] content = request.getContentAsByteArray();\r\n\t\tif (content.length &gt; 0) {\r\n\t\t\tlogContent(content, request.getContentType(), request.getCharacterEncoding(), prefix);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void logResponse(ContentCachingResponseWrapper response, String prefix) throws IOException {\r\n\t\tint status = response.getStatus();\r\n\t\tprintLines(prefix, String.valueOf(status), HttpStatus.valueOf(status).getReasonPhrase());\r\n\t\tlog.info(&quot;{} {} {}&quot;, prefix, status, HttpStatus.valueOf(status).getReasonPhrase());\r\n\t\tresponse.getHeaderNames().forEach(headerName -&gt;\r\n\t\tresponse.getHeaders(headerName).forEach(headerValue -&gt;\r\n\t\tlog.info(&quot;{} {}: {}&quot;, prefix, headerName, headerValue)));\r\n\t\tprintLines(prefix);\r\n\t\tlog.info(&quot;{}&quot;, prefix);\r\n\t\tbyte[] content = response.getContentAsByteArray();\r\n\t\tif (content.length &gt; 0) {\r\n\t\t\tlogContent(content, response.getContentType(), response.getCharacterEncoding(), prefix);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void logContent(byte[] content, String contentType, String contentEncoding, String prefix) {\r\n\t\tMediaType mediaType = MediaType.valueOf(contentType);\r\n\t\tboolean visible = VISIBLE_TYPES.stream().anyMatch(visibleType -&gt; visibleType.includes(mediaType));\r\n\t\tif (visible) {\r\n\t\t\ttry {\r\n\t\t\t\tString contentString = new String(content, contentEncoding);\r\n\t\t\t\tStream.of(contentString.split(&quot;\\r\\n|\\r|\\n&quot;)).forEach(line -&gt; {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tprintLines(line);\r\n\t\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n    //\t\t\t\tlog.info(&quot;{} {}&quot;, prefix, line));\r\n\t\t\t} catch (UnsupportedEncodingException e) {\r\n\t\t\t\tlog.info(&quot;{} [{} bytes content]&quot;, prefix, content.length);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\tlog.info(&quot;{} [{} bytes content]&quot;, prefix, content.length);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static ContentCachingRequestWrapper wrapRequest(HttpServletRequest request) {\r\n\t\tif (request instanceof ContentCachingRequestWrapper) {\r\n\t\t\treturn (ContentCachingRequestWrapper) request;\r\n\t\t} else {\r\n\t\t\treturn new ContentCachingRequestWrapper(request);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static ContentCachingResponseWrapper wrapResponse(HttpServletResponse response) {\r\n\t\tif (response instanceof ContentCachingResponseWrapper) {\r\n\t\t\treturn (ContentCachingResponseWrapper) response;\r\n\t\t} else {\r\n\t\t\treturn new ContentCachingResponseWrapper(response);\r\n\t\t}\r\n\t}\r\n    } \r\n\r\n\r\nOutput in File:\r\n\r\n    127.0.0.1|&gt;\r\n    POST\r\n    /createUser\r\n    127.0.0.1|&gt;\r\n    session Id:C0793464532E7F0C7154913CBA018B2B\r\n    Request:\r\n    {\r\n      &quot;name&quot;: &quot;asdasdas&quot;,\r\n      &quot;birthDate&quot;: &quot;2018-06-21T17:11:15.679+0000&quot;\r\n    }\r\n    127.0.0.1|&lt;\r\n    200\r\n    OK\r\n    127.0.0.1|&lt;\r\n    Response:\r\n    {&quot;name&quot;:&quot;asdasdas&quot;,&quot;birthDate&quot;:&quot;2018-06-21T17:11:15.679+0000&quot;,&quot;id&quot;:4}","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>Please refer to below link for actual answer\n<a href=\"https://gist.github.com/int128/e47217bebdb4c402b2ffa7cc199307ba\" rel=\"noreferrer\">https://gist.github.com/int128/e47217bebdb4c402b2ffa7cc199307ba</a></p>\n\n<p>Made some changes from above referred solution , request and response will log in console and in file too if logger level is info. we can print either in console or file.</p>\n\n<pre><code>@Component\npublic class LoggingFilter extends OncePerRequestFilter {\n\nprivate static final List&lt;MediaType&gt; VISIBLE_TYPES = Arrays.asList(\n        MediaType.valueOf(\"text/*\"),\n        MediaType.APPLICATION_FORM_URLENCODED,\n        MediaType.APPLICATION_JSON,\n        MediaType.APPLICATION_XML,\n        MediaType.valueOf(\"application/*+json\"),\n        MediaType.valueOf(\"application/*+xml\"),\n        MediaType.MULTIPART_FORM_DATA\n        );\nLogger log = LoggerFactory.getLogger(ReqAndResLoggingFilter.class);\nprivate static final Path path = Paths.get(\"/home/ramesh/loggerReq.txt\");\nprivate static BufferedWriter writer = null;\n@Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n    try {\n        writer = Files.newBufferedWriter(path, Charset.forName(\"UTF-8\"));\n    if (isAsyncDispatch(request)) {\n        filterChain.doFilter(request, response);\n    } else {\n        doFilterWrapped(wrapRequest(request), wrapResponse(response), filterChain);\n    }\n    }finally {\n        writer.close();\n    }\n}\n\nprotected void doFilterWrapped(ContentCachingRequestWrapper request, ContentCachingResponseWrapper response, FilterChain filterChain) throws ServletException, IOException {\n    try {\n        beforeRequest(request, response);\n        filterChain.doFilter(request, response);\n    }\n    finally {\n        afterRequest(request, response);\n        response.copyBodyToResponse();\n    }\n}\n\nprotected void beforeRequest(ContentCachingRequestWrapper request, ContentCachingResponseWrapper response) throws IOException {\n    if (log.isInfoEnabled()) {\n        logRequestHeader(request, request.getRemoteAddr() + \"|&gt;\");\n    }\n}\n\nprotected void afterRequest(ContentCachingRequestWrapper request, ContentCachingResponseWrapper response) throws IOException {\n    if (log.isInfoEnabled()) {\n        logRequestBody(request, request.getRemoteAddr() + \"|&gt;\");\n        logResponse(response, request.getRemoteAddr() + \"|&lt;\");\n    }\n}\n\nprivate void logRequestHeader(ContentCachingRequestWrapper request, String prefix) throws IOException {\n    String queryString = request.getQueryString();\n    if (queryString == null) {\n        printLines(prefix,request.getMethod(),request.getRequestURI());\n        log.info(\"{} {} {}\", prefix, request.getMethod(), request.getRequestURI());\n    } else {\n        printLines(prefix,request.getMethod(),request.getRequestURI(),queryString);\n        log.info(\"{} {} {}?{}\", prefix, request.getMethod(), request.getRequestURI(), queryString);\n    }\n    Collections.list(request.getHeaderNames()).forEach(headerName -&gt;\n    Collections.list(request.getHeaders(headerName)).forEach(headerValue -&gt;\n    log.info(\"{} {}: {}\", prefix, headerName, headerValue)));\n    printLines(prefix);\n    printLines(RequestContextHolder.currentRequestAttributes().getSessionId());\n    log.info(\"{}\", prefix);\n\n    log.info(\" Session ID: \", RequestContextHolder.currentRequestAttributes().getSessionId());\n}\n\nprivate void printLines(String ...args) throws IOException {\n\n    try {\n    for(String varArgs:args) {\n            writer.write(varArgs);\n            writer.newLine();\n    }\n        }catch(IOException ex){\n            ex.printStackTrace();\n    }\n\n}\n\nprivate void logRequestBody(ContentCachingRequestWrapper request, String prefix) {\n    byte[] content = request.getContentAsByteArray();\n    if (content.length &gt; 0) {\n        logContent(content, request.getContentType(), request.getCharacterEncoding(), prefix);\n    }\n}\n\nprivate void logResponse(ContentCachingResponseWrapper response, String prefix) throws IOException {\n    int status = response.getStatus();\n    printLines(prefix, String.valueOf(status), HttpStatus.valueOf(status).getReasonPhrase());\n    log.info(\"{} {} {}\", prefix, status, HttpStatus.valueOf(status).getReasonPhrase());\n    response.getHeaderNames().forEach(headerName -&gt;\n    response.getHeaders(headerName).forEach(headerValue -&gt;\n    log.info(\"{} {}: {}\", prefix, headerName, headerValue)));\n    printLines(prefix);\n    log.info(\"{}\", prefix);\n    byte[] content = response.getContentAsByteArray();\n    if (content.length &gt; 0) {\n        logContent(content, response.getContentType(), response.getCharacterEncoding(), prefix);\n    }\n}\n\nprivate void logContent(byte[] content, String contentType, String contentEncoding, String prefix) {\n    MediaType mediaType = MediaType.valueOf(contentType);\n    boolean visible = VISIBLE_TYPES.stream().anyMatch(visibleType -&gt; visibleType.includes(mediaType));\n    if (visible) {\n        try {\n            String contentString = new String(content, contentEncoding);\n            Stream.of(contentString.split(\"\\r\\n|\\r|\\n\")).forEach(line -&gt; {\n                try {\n                    printLines(line);\n                } catch (IOException e) {\n                    // TODO Auto-generated catch block\n                    e.printStackTrace();\n                }\n            });\n//              log.info(\"{} {}\", prefix, line));\n        } catch (UnsupportedEncodingException e) {\n            log.info(\"{} [{} bytes content]\", prefix, content.length);\n        }\n    } else {\n\n        log.info(\"{} [{} bytes content]\", prefix, content.length);\n    }\n}\n\nprivate static ContentCachingRequestWrapper wrapRequest(HttpServletRequest request) {\n    if (request instanceof ContentCachingRequestWrapper) {\n        return (ContentCachingRequestWrapper) request;\n    } else {\n        return new ContentCachingRequestWrapper(request);\n    }\n}\n\nprivate static ContentCachingResponseWrapper wrapResponse(HttpServletResponse response) {\n    if (response instanceof ContentCachingResponseWrapper) {\n        return (ContentCachingResponseWrapper) response;\n    } else {\n        return new ContentCachingResponseWrapper(response);\n    }\n}\n} \n</code></pre>\n\n<p>Output in File:</p>\n\n<pre><code>127.0.0.1|&gt;\nPOST\n/createUser\n127.0.0.1|&gt;\nsession Id:C0793464532E7F0C7154913CBA018B2B\nRequest:\n{\n  \"name\": \"asdasdas\",\n  \"birthDate\": \"2018-06-21T17:11:15.679+0000\"\n}\n127.0.0.1|&lt;\n200\nOK\n127.0.0.1|&lt;\nResponse:\n{\"name\":\"asdasdas\",\"birthDate\":\"2018-06-21T17:11:15.679+0000\",\"id\":4}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8192858,"reputation":1882,"user_id":6166627,"accept_rate":86,"display_name":"Sam"},"score":1,"creation_date":1575034083,"post_id":52164562,"comment_id":104443115,"body_markdown":"`new ObjectMapper()` is expensive, better share one mapper for all","body":"<code>new ObjectMapper()</code> is expensive, better share one mapper for all"},{"owner":{"account_id":3691447,"reputation":6845,"user_id":3073945,"accept_rate":90,"display_name":"Md. Sajedul Karim"},"score":1,"creation_date":1575044273,"post_id":52164562,"comment_id":104447803,"body_markdown":"Yeah, sure. This is demo code. In production we have to follow best practices.","body":"Yeah, sure. This is demo code. In production we have to follow best practices."}],"tags":[],"owner":{"account_id":3691447,"reputation":6845,"user_id":3073945,"accept_rate":90,"display_name":"Md. Sajedul Karim"},"comment_count":2,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1595751725,"creation_date":1536058174,"answer_id":52164562,"question_id":33744875,"body_markdown":"Currently Spring Boot has the Actuator feature to get the logs of requests and responses. \r\n\r\nBut you can also get the logs using Aspect(AOP). \r\n\r\nAspect provides you with annotations like: `@Before`,  `@AfterReturning`, `@AfterThrowing` etc.\r\n\r\n`@Before` logs the request, `@AfterReturning` logs the response and `@AfterThrowing` logs the error message,\r\nYou may not need all endpoints&#39; log, so you can apply some filters on the packages.\r\n\r\n**Here are some examples**:\r\n\r\n**For Request:**\r\n\r\n    @Before(&quot;within(your.package.where.endpoints.are..*)&quot;)\r\n        public void endpointBefore(JoinPoint p) {\r\n            if (log.isTraceEnabled()) {\r\n                log.trace(p.getTarget().getClass().getSimpleName() + &quot; &quot; + p.getSignature().getName() + &quot; START&quot;);\r\n                Object[] signatureArgs = p.getArgs();\r\n    \r\n    \r\n                ObjectMapper mapper = new ObjectMapper();\r\n                mapper.enable(SerializationFeature.INDENT_OUTPUT);\r\n                try {\r\n    \r\n                    if (signatureArgs[0] != null) {\r\n                        log.trace(&quot;\\nRequest object: \\n&quot; + mapper.writeValueAsString(signatureArgs[0]));\r\n                    }\r\n                } catch (JsonProcessingException e) {\r\n                }\r\n            }\r\n        }\r\n\r\n    \r\nHere `@Before(&quot;within(your.package.where.endpoints.are..*)&quot;)` has the package path. All endpoints within this package will generate the log.\r\n\r\n**For Response:**\r\n\r\n    @AfterReturning(value = (&quot;within(your.package.where.endpoints.are..*)&quot;),\r\n                returning = &quot;returnValue&quot;)\r\n        public void endpointAfterReturning(JoinPoint p, Object returnValue) {\r\n            if (log.isTraceEnabled()) {\r\n                ObjectMapper mapper = new ObjectMapper();\r\n                mapper.enable(SerializationFeature.INDENT_OUTPUT);\r\n                try {\r\n                    log.trace(&quot;\\nResponse object: \\n&quot; + mapper.writeValueAsString(returnValue));\r\n                } catch (JsonProcessingException e) {\r\n                    System.out.println(e.getMessage());\r\n                }\r\n                log.trace(p.getTarget().getClass().getSimpleName() + &quot; &quot; + p.getSignature().getName() + &quot; END&quot;);\r\n            }\r\n        }\r\n\r\n    \r\nHere `@AfterReturning(&quot;within(your.package.where.endpoints.are..*)&quot;)` has the package path. All endpoints within this package will generate the log. Also `Object returnValue` contains the response.\r\n\r\n   **For Exception:**\r\n\r\n    @AfterThrowing(pointcut = (&quot;within(your.package.where.endpoints.are..*)&quot;), throwing = &quot;e&quot;)\r\n    public void endpointAfterThrowing(JoinPoint p, Exception e) throws DmoneyException {\r\n        if (log.isTraceEnabled()) {\r\n            System.out.println(e.getMessage());\r\n\r\n            e.printStackTrace();\r\n\r\n\r\n            log.error(p.getTarget().getClass().getSimpleName() + &quot; &quot; + p.getSignature().getName() + &quot; &quot; + e.getMessage());\r\n        }\r\n    }\r\n    \r\nHere `@AfterThrowing(pointcut = (&quot;within(your.package.where.endpoints.are..*)&quot;), throwing = &quot;e&quot;)`  has the package path. All endpoints within this package will generate the log. Also `Exception e` contains the error response.\r\n\r\n Here is the full code:\r\n\r\n \r\n\r\n    import com.fasterxml.jackson.core.JsonProcessingException;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.SerializationFeature;\r\n    import org.apache.log4j.Logger;\r\n    import org.aspectj.lang.JoinPoint;\r\n    import org.aspectj.lang.annotation.AfterReturning;\r\n    import org.aspectj.lang.annotation.AfterThrowing;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.aspectj.lang.annotation.Before;\r\n    import org.springframework.core.annotation.Order;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Aspect\r\n    @Order(1)\r\n    @Component\r\n    @ConditionalOnExpression(&quot;${endpoint.aspect.enabled:true}&quot;)\r\n    public class EndpointAspect {\r\n        static Logger log = Logger.getLogger(EndpointAspect.class);\r\n    \r\n        @Before(&quot;within(your.package.where.is.endpoint..*)&quot;)\r\n        public void endpointBefore(JoinPoint p) {\r\n            if (log.isTraceEnabled()) {\r\n                log.trace(p.getTarget().getClass().getSimpleName() + &quot; &quot; + p.getSignature().getName() + &quot; START&quot;);\r\n                Object[] signatureArgs = p.getArgs();\r\n    \r\n    \r\n                ObjectMapper mapper = new ObjectMapper();\r\n                mapper.enable(SerializationFeature.INDENT_OUTPUT);\r\n                try {\r\n    \r\n                    if (signatureArgs[0] != null) {\r\n                        log.trace(&quot;\\nRequest object: \\n&quot; + mapper.writeValueAsString(signatureArgs[0]));\r\n                    }\r\n                } catch (JsonProcessingException e) {\r\n                }\r\n            }\r\n        }\r\n    \r\n        @AfterReturning(value = (&quot;within(your.package.where.is.endpoint..*)&quot;),\r\n                returning = &quot;returnValue&quot;)\r\n        public void endpointAfterReturning(JoinPoint p, Object returnValue) {\r\n            if (log.isTraceEnabled()) {\r\n                ObjectMapper mapper = new ObjectMapper();\r\n                mapper.enable(SerializationFeature.INDENT_OUTPUT);\r\n                try {\r\n                    log.trace(&quot;\\nResponse object: \\n&quot; + mapper.writeValueAsString(returnValue));\r\n                } catch (JsonProcessingException e) {\r\n                    System.out.println(e.getMessage());\r\n                }\r\n                log.trace(p.getTarget().getClass().getSimpleName() + &quot; &quot; + p.getSignature().getName() + &quot; END&quot;);\r\n            }\r\n        }\r\n    \r\n    \r\n        @AfterThrowing(pointcut = (&quot;within(your.package.where.is.endpoint..*)&quot;), throwing = &quot;e&quot;)\r\n        public void endpointAfterThrowing(JoinPoint p, Exception e) throws Exception {\r\n            if (log.isTraceEnabled()) {\r\n                System.out.println(e.getMessage());\r\n    \r\n                e.printStackTrace();\r\n    \r\n    \r\n                log.error(p.getTarget().getClass().getSimpleName() + &quot; &quot; + p.getSignature().getName() + &quot; &quot; + e.getMessage());\r\n            }\r\n        }\r\n    }\r\n    \r\n\r\nHere, using `@ConditionalOnExpression(&quot;${endpoint.aspect.enabled:true}&quot;)` you can enable/disable the log. just add `endpoint.aspect.enabled:true` into the `application.property` and control the log\r\n\r\nMore info about AOP visit here:\r\n\r\n[Spring docs about AOP][1]\r\n\r\n[Sample article about AOP][2]\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/4.3.15.RELEASE/spring-framework-reference/html/aop.html\r\n\r\n  [2]: https://www.javacodegeeks.com/2012/06/simple-introduction-to-aop.html\r\n\r\n","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>Currently Spring Boot has the Actuator feature to get the logs of requests and responses.</p>\n<p>But you can also get the logs using Aspect(AOP).</p>\n<p>Aspect provides you with annotations like: <code>@Before</code>,  <code>@AfterReturning</code>, <code>@AfterThrowing</code> etc.</p>\n<p><code>@Before</code> logs the request, <code>@AfterReturning</code> logs the response and <code>@AfterThrowing</code> logs the error message,\nYou may not need all endpoints' log, so you can apply some filters on the packages.</p>\n<p><strong>Here are some examples</strong>:</p>\n<p><strong>For Request:</strong></p>\n<pre><code>@Before(&quot;within(your.package.where.endpoints.are..*)&quot;)\n    public void endpointBefore(JoinPoint p) {\n        if (log.isTraceEnabled()) {\n            log.trace(p.getTarget().getClass().getSimpleName() + &quot; &quot; + p.getSignature().getName() + &quot; START&quot;);\n            Object[] signatureArgs = p.getArgs();\n\n\n            ObjectMapper mapper = new ObjectMapper();\n            mapper.enable(SerializationFeature.INDENT_OUTPUT);\n            try {\n\n                if (signatureArgs[0] != null) {\n                    log.trace(&quot;\\nRequest object: \\n&quot; + mapper.writeValueAsString(signatureArgs[0]));\n                }\n            } catch (JsonProcessingException e) {\n            }\n        }\n    }\n</code></pre>\n<p>Here <code>@Before(&quot;within(your.package.where.endpoints.are..*)&quot;)</code> has the package path. All endpoints within this package will generate the log.</p>\n<p><strong>For Response:</strong></p>\n<pre><code>@AfterReturning(value = (&quot;within(your.package.where.endpoints.are..*)&quot;),\n            returning = &quot;returnValue&quot;)\n    public void endpointAfterReturning(JoinPoint p, Object returnValue) {\n        if (log.isTraceEnabled()) {\n            ObjectMapper mapper = new ObjectMapper();\n            mapper.enable(SerializationFeature.INDENT_OUTPUT);\n            try {\n                log.trace(&quot;\\nResponse object: \\n&quot; + mapper.writeValueAsString(returnValue));\n            } catch (JsonProcessingException e) {\n                System.out.println(e.getMessage());\n            }\n            log.trace(p.getTarget().getClass().getSimpleName() + &quot; &quot; + p.getSignature().getName() + &quot; END&quot;);\n        }\n    }\n</code></pre>\n<p>Here <code>@AfterReturning(&quot;within(your.package.where.endpoints.are..*)&quot;)</code> has the package path. All endpoints within this package will generate the log. Also <code>Object returnValue</code> contains the response.</p>\n<p><strong>For Exception:</strong></p>\n<pre><code>@AfterThrowing(pointcut = (&quot;within(your.package.where.endpoints.are..*)&quot;), throwing = &quot;e&quot;)\npublic void endpointAfterThrowing(JoinPoint p, Exception e) throws DmoneyException {\n    if (log.isTraceEnabled()) {\n        System.out.println(e.getMessage());\n\n        e.printStackTrace();\n\n\n        log.error(p.getTarget().getClass().getSimpleName() + &quot; &quot; + p.getSignature().getName() + &quot; &quot; + e.getMessage());\n    }\n}\n</code></pre>\n<p>Here <code>@AfterThrowing(pointcut = (&quot;within(your.package.where.endpoints.are..*)&quot;), throwing = &quot;e&quot;)</code>  has the package path. All endpoints within this package will generate the log. Also <code>Exception e</code> contains the error response.</p>\n<p>Here is the full code:</p>\n<pre><code>import com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\nimport org.apache.log4j.Logger;\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.annotation.AfterReturning;\nimport org.aspectj.lang.annotation.AfterThrowing;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.springframework.core.annotation.Order;\nimport org.springframework.stereotype.Component;\n\n@Aspect\n@Order(1)\n@Component\n@ConditionalOnExpression(&quot;${endpoint.aspect.enabled:true}&quot;)\npublic class EndpointAspect {\n    static Logger log = Logger.getLogger(EndpointAspect.class);\n\n    @Before(&quot;within(your.package.where.is.endpoint..*)&quot;)\n    public void endpointBefore(JoinPoint p) {\n        if (log.isTraceEnabled()) {\n            log.trace(p.getTarget().getClass().getSimpleName() + &quot; &quot; + p.getSignature().getName() + &quot; START&quot;);\n            Object[] signatureArgs = p.getArgs();\n\n\n            ObjectMapper mapper = new ObjectMapper();\n            mapper.enable(SerializationFeature.INDENT_OUTPUT);\n            try {\n\n                if (signatureArgs[0] != null) {\n                    log.trace(&quot;\\nRequest object: \\n&quot; + mapper.writeValueAsString(signatureArgs[0]));\n                }\n            } catch (JsonProcessingException e) {\n            }\n        }\n    }\n\n    @AfterReturning(value = (&quot;within(your.package.where.is.endpoint..*)&quot;),\n            returning = &quot;returnValue&quot;)\n    public void endpointAfterReturning(JoinPoint p, Object returnValue) {\n        if (log.isTraceEnabled()) {\n            ObjectMapper mapper = new ObjectMapper();\n            mapper.enable(SerializationFeature.INDENT_OUTPUT);\n            try {\n                log.trace(&quot;\\nResponse object: \\n&quot; + mapper.writeValueAsString(returnValue));\n            } catch (JsonProcessingException e) {\n                System.out.println(e.getMessage());\n            }\n            log.trace(p.getTarget().getClass().getSimpleName() + &quot; &quot; + p.getSignature().getName() + &quot; END&quot;);\n        }\n    }\n\n\n    @AfterThrowing(pointcut = (&quot;within(your.package.where.is.endpoint..*)&quot;), throwing = &quot;e&quot;)\n    public void endpointAfterThrowing(JoinPoint p, Exception e) throws Exception {\n        if (log.isTraceEnabled()) {\n            System.out.println(e.getMessage());\n\n            e.printStackTrace();\n\n\n            log.error(p.getTarget().getClass().getSimpleName() + &quot; &quot; + p.getSignature().getName() + &quot; &quot; + e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p>Here, using <code>@ConditionalOnExpression(&quot;${endpoint.aspect.enabled:true}&quot;)</code> you can enable/disable the log. just add <code>endpoint.aspect.enabled:true</code> into the <code>application.property</code> and control the log</p>\n<p>More info about AOP visit here:</p>\n<p><a href=\"https://docs.spring.io/spring/docs/4.3.15.RELEASE/spring-framework-reference/html/aop.html\" rel=\"noreferrer\">Spring docs about AOP</a></p>\n<p><a href=\"https://www.javacodegeeks.com/2012/06/simple-introduction-to-aop.html\" rel=\"noreferrer\">Sample article about AOP</a></p>\n"},{"comments":[{"owner":{"account_id":1679362,"reputation":495,"user_id":1544034,"accept_rate":75,"display_name":"Hammad Dar"},"score":1,"creation_date":1624881199,"post_id":52749255,"comment_id":120469971,"body_markdown":"This does not show the request body i suppose.","body":"This does not show the request body i suppose."},{"owner":{"account_id":28851,"reputation":29373,"user_id":77409,"accept_rate":100,"display_name":"James Ward"},"score":3,"creation_date":1635424764,"post_id":52749255,"comment_id":123298233,"body_markdown":"You also need to add an `InMemoryHttpTraceRepository` Bean. See: https://juplo.de/actuator-httptrace-does-not-work-with-spring-boot-2-2/","body":"You also need to add an <code>InMemoryHttpTraceRepository</code> Bean. See: <a href=\"https://juplo.de/actuator-httptrace-does-not-work-with-spring-boot-2-2/\" rel=\"nofollow noreferrer\">juplo.de/actuator-httptrace-does-not-work-with-spring-boot-2&zwnj;&#8203;-2</a>"}],"tags":[],"owner":{"account_id":159637,"reputation":2203,"user_id":379173,"display_name":"Enrico Giurin"},"comment_count":2,"down_vote_count":2,"up_vote_count":12,"is_accepted":false,"score":10,"last_activity_date":1559651507,"creation_date":1539208110,"answer_id":52749255,"question_id":33744875,"body_markdown":"Here my solution (Spring 2.0.x)\r\n\r\nAdd the maven dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nEdit the **application.properties** and add the following line:\r\n\r\n    management.endpoints.web.exposure.include=* \r\n\r\nOnce your spring boot application is started you can track the latest 100 http requests by calling this url: \r\n*http://localhost:8070/actuator/httptrace*\r\n\r\n","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>Here my solution (Spring 2.0.x)</p>\n\n<p>Add the maven dependency:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Edit the <strong>application.properties</strong> and add the following line:</p>\n\n<pre><code>management.endpoints.web.exposure.include=* \n</code></pre>\n\n<p>Once your spring boot application is started you can track the latest 100 http requests by calling this url: \n<em><a href=\"http://localhost:8070/actuator/httptrace\" rel=\"noreferrer\">http://localhost:8070/actuator/httptrace</a></em></p>\n"},{"tags":[],"owner":{"account_id":9895668,"reputation":331,"user_id":10639167,"display_name":"Andrea Saba"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1576929935,"creation_date":1576929935,"answer_id":59436033,"question_id":33744875,"body_markdown":"the code pasted below works with my tests and can be downloaded from my [github project][1], sharing after applying a solution based on that on a production project.\r\n\r\n    \r\n    @Configuration\r\n    public class LoggingFilter extends GenericFilterBean {\r\n    \r\n        /**\r\n         * It&#39;s important that you actually register your filter this way rather then just annotating it\r\n         * as @Component as you need to be able to set for which &quot;DispatcherType&quot;s to enable the filter\r\n         * (see point *1*)\r\n         * \r\n         * @return\r\n         */\r\n        @Bean\r\n        public FilterRegistrationBean&lt;LoggingFilter&gt; initFilter() {\r\n            FilterRegistrationBean&lt;LoggingFilter&gt; registrationBean = new FilterRegistrationBean&lt;&gt;();\r\n            registrationBean.setFilter(new LoggingFilter());\r\n    \r\n            // *1* make sure you sett all dispatcher types if you want the filter to log upon\r\n            registrationBean.setDispatcherTypes(EnumSet.allOf(DispatcherType.class));\r\n    \r\n            // *2* this should put your filter above any other filter\r\n            registrationBean.setOrder(Ordered.HIGHEST_PRECEDENCE);\r\n    \r\n            return registrationBean;\r\n        }\r\n    \r\n        @Override\r\n        public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\r\n                throws IOException, ServletException {\r\n    \r\n            ContentCachingRequestWrapper wreq = \r\n                new ContentCachingRequestWrapper(\r\n                    (HttpServletRequest) request);\r\n    \r\n            ContentCachingResponseWrapper wres = \r\n                new ContentCachingResponseWrapper(\r\n                    (HttpServletResponse) response);\r\n    \r\n            try {\r\n    \r\n                // let it be ...\r\n                chain.doFilter(wreq, wres);\r\n    \r\n                // makes sure that the input is read (e.g. in 404 it may not be)\r\n                while (wreq.getInputStream().read() &gt;= 0);\r\n    \r\n                System.out.printf(&quot;=== REQUEST%n%s%n=== end request%n&quot;,\r\n                        new String(wreq.getContentAsByteArray()));\r\n    \r\n                // Do whatever logging you wish here, in this case I&#39;m writing request \r\n                // and response to system out which is probably not what you wish to do\r\n                System.out.printf(&quot;=== RESPONSE%n%s%n=== end response%n&quot;,\r\n                        new String(wres.getContentAsByteArray()));\r\n    \r\n                // this is specific of the &quot;ContentCachingResponseWrapper&quot; we are relying on, \r\n                // make sure you call it after you read the content from the response\r\n                wres.copyBodyToResponse();\r\n    \r\n                // One more point, in case of redirect this will be called twice! beware to handle that\r\n                // somewhat\r\n    \r\n            } catch (Throwable t) {\r\n                // Do whatever logging you whish here, too\r\n                // here you should also be logging the error!!!\r\n                throw t;\r\n            }\r\n    \r\n        }\r\n    }\r\n","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>the code pasted below works with my tests and can be downloaded from my [github project][1], sharing after applying a solution based on that on a production project.</p>\n\n<pre><code>@Configuration\npublic class LoggingFilter extends GenericFilterBean {\n\n    /**\n     * It's important that you actually register your filter this way rather then just annotating it\n     * as @Component as you need to be able to set for which \"DispatcherType\"s to enable the filter\n     * (see point *1*)\n     * \n     * @return\n     */\n    @Bean\n    public FilterRegistrationBean&lt;LoggingFilter&gt; initFilter() {\n        FilterRegistrationBean&lt;LoggingFilter&gt; registrationBean = new FilterRegistrationBean&lt;&gt;();\n        registrationBean.setFilter(new LoggingFilter());\n\n        // *1* make sure you sett all dispatcher types if you want the filter to log upon\n        registrationBean.setDispatcherTypes(EnumSet.allOf(DispatcherType.class));\n\n        // *2* this should put your filter above any other filter\n        registrationBean.setOrder(Ordered.HIGHEST_PRECEDENCE);\n\n        return registrationBean;\n    }\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n            throws IOException, ServletException {\n\n        ContentCachingRequestWrapper wreq = \n            new ContentCachingRequestWrapper(\n                (HttpServletRequest) request);\n\n        ContentCachingResponseWrapper wres = \n            new ContentCachingResponseWrapper(\n                (HttpServletResponse) response);\n\n        try {\n\n            // let it be ...\n            chain.doFilter(wreq, wres);\n\n            // makes sure that the input is read (e.g. in 404 it may not be)\n            while (wreq.getInputStream().read() &gt;= 0);\n\n            System.out.printf(\"=== REQUEST%n%s%n=== end request%n\",\n                    new String(wreq.getContentAsByteArray()));\n\n            // Do whatever logging you wish here, in this case I'm writing request \n            // and response to system out which is probably not what you wish to do\n            System.out.printf(\"=== RESPONSE%n%s%n=== end response%n\",\n                    new String(wres.getContentAsByteArray()));\n\n            // this is specific of the \"ContentCachingResponseWrapper\" we are relying on, \n            // make sure you call it after you read the content from the response\n            wres.copyBodyToResponse();\n\n            // One more point, in case of redirect this will be called twice! beware to handle that\n            // somewhat\n\n        } catch (Throwable t) {\n            // Do whatever logging you whish here, too\n            // here you should also be logging the error!!!\n            throw t;\n        }\n\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1522148,"reputation":597,"user_id":1421518,"accept_rate":100,"display_name":"amstegraf"},"score":0,"creation_date":1645549111,"post_id":59693356,"comment_id":125898702,"body_markdown":"I just answered the same thing and thought maybe best to checkout all the other answers as well. AOP is perfect for logging, as it is cross-cut","body":"I just answered the same thing and thought maybe best to checkout all the other answers as well. AOP is perfect for logging, as it is cross-cut"}],"tags":[],"owner":{"account_id":10492365,"reputation":21,"user_id":7733766,"display_name":"Rushikesh Kulkarni"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1578736518,"creation_date":1578736518,"answer_id":59693356,"question_id":33744875,"body_markdown":"In order to log all the requests with input parameters and body, we can use **filters** and **interceptors**. But while using a filter or interceptor, we cannot print the request body multiple times.\r\nThe better way is we can use spring-AOP. By using this we can decouple the logging mechanism from the application. AOP can be used for logging **Input and output** of **each method** in the application.\r\n\r\n\r\nMy solution is:\r\n\r\n \r\n     import org.aspectj.lang.ProceedingJoinPoint;\r\n     import org.aspectj.lang.annotation.Around;\r\n     import org.aspectj.lang.annotation.Aspect;\r\n     import org.aspectj.lang.annotation.Pointcut;\r\n     import org.aspectj.lang.reflect.CodeSignature;\r\n     import org.slf4j.Logger;\r\n     import org.slf4j.LoggerFactory;\r\n     import org.springframework.stereotype.Component;\r\n     import com.fasterxml.jackson.databind.ObjectMapper;\r\n     @Aspect\r\n     @Component\r\n    public class LoggingAdvice {\r\n\tprivate static final Logger logger = \r\n    LoggerFactory.getLogger(LoggingAdvice.class);\r\n    \r\n    //here we can provide any methodName, packageName, className \r\n\t@Pointcut(value = &quot;execution(* com.package.name.*.*.*(..) )&quot;)\r\n\tpublic void myPointcut() {\r\n\r\n\t}\r\n\r\n\t@Around(&quot;myPointcut()&quot;)\r\n\tpublic Object applicationLogger(ProceedingJoinPoint pjt) throws Throwable {\r\n\t\tObjectMapper mapper = new ObjectMapper();\r\n\t\tString methodName = pjt.getSignature().getName();\r\n\t\tString className = pjt.getTarget().getClass().toString();\r\n\t\tString inputParams = this.getInputArgs(pjt ,mapper);\r\n\t\tlogger.info(&quot;method invoked from &quot; + className + &quot; : &quot; + methodName + &quot;--Request Payload::::&quot;+inputParams);\r\n\t\tObject object = pjt.proceed();\r\n\t\ttry {\r\n\t\t\tlogger.info(&quot;Response Object---&quot; + mapper.writeValueAsString(object));\r\n\t\t} catch (Exception e) {\r\n\t\t}\r\n\t\treturn object;\r\n\t}\r\n\r\n\tprivate String getInputArgs(ProceedingJoinPoint pjt,ObjectMapper mapper) {\r\n\t\tObject[] array = pjt.getArgs();\r\n\t\tCodeSignature signature = (CodeSignature) pjt.getSignature();\r\n\t\t\r\n\t\tStringBuilder sb = new StringBuilder();\r\n\t\tsb.append(&quot;{&quot;);\r\n\t\tint i = 0;\r\n\t\tString[] parameterNames = signature.getParameterNames();\r\n\t\tint maxArgs = parameterNames.length;\r\n\t\tfor (String name : signature.getParameterNames()) {\r\n\t\t\tsb.append(&quot;[&quot;).append(name).append(&quot;:&quot;);\r\n\t\t\ttry {\r\n\t\t\t\tsb.append(mapper.writeValueAsString(array[i])).append(&quot;]&quot;);\r\n\t\t\t\tif(i != maxArgs -1 ) {\r\n\t\t\t\t\tsb.append(&quot;,&quot;);\r\n\t\t\t\t}\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tsb.append(&quot;],&quot;);\r\n\t\t\t}\r\n\t\t\ti++;\r\n\t\t}\r\n\t\treturn sb.append(&quot;}&quot;).toString();\r\n\t}\r\n}\r\n\r\n \r\n \r\n\r\n\r\n\r\n\r\n","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>In order to log all the requests with input parameters and body, we can use <strong>filters</strong> and <strong>interceptors</strong>. But while using a filter or interceptor, we cannot print the request body multiple times.\nThe better way is we can use spring-AOP. By using this we can decouple the logging mechanism from the application. AOP can be used for logging <strong>Input and output</strong> of <strong>each method</strong> in the application.</p>\n\n<p>My solution is:</p>\n\n<pre><code> import org.aspectj.lang.ProceedingJoinPoint;\n import org.aspectj.lang.annotation.Around;\n import org.aspectj.lang.annotation.Aspect;\n import org.aspectj.lang.annotation.Pointcut;\n import org.aspectj.lang.reflect.CodeSignature;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n import org.springframework.stereotype.Component;\n import com.fasterxml.jackson.databind.ObjectMapper;\n @Aspect\n @Component\npublic class LoggingAdvice {\nprivate static final Logger logger = \nLoggerFactory.getLogger(LoggingAdvice.class);\n\n//here we can provide any methodName, packageName, className \n@Pointcut(value = \"execution(* com.package.name.*.*.*(..) )\")\npublic void myPointcut() {\n\n}\n\n@Around(\"myPointcut()\")\npublic Object applicationLogger(ProceedingJoinPoint pjt) throws Throwable {\n    ObjectMapper mapper = new ObjectMapper();\n    String methodName = pjt.getSignature().getName();\n    String className = pjt.getTarget().getClass().toString();\n    String inputParams = this.getInputArgs(pjt ,mapper);\n    logger.info(\"method invoked from \" + className + \" : \" + methodName + \"--Request Payload::::\"+inputParams);\n    Object object = pjt.proceed();\n    try {\n        logger.info(\"Response Object---\" + mapper.writeValueAsString(object));\n    } catch (Exception e) {\n    }\n    return object;\n}\n\nprivate String getInputArgs(ProceedingJoinPoint pjt,ObjectMapper mapper) {\n    Object[] array = pjt.getArgs();\n    CodeSignature signature = (CodeSignature) pjt.getSignature();\n\n    StringBuilder sb = new StringBuilder();\n    sb.append(\"{\");\n    int i = 0;\n    String[] parameterNames = signature.getParameterNames();\n    int maxArgs = parameterNames.length;\n    for (String name : signature.getParameterNames()) {\n        sb.append(\"[\").append(name).append(\":\");\n        try {\n            sb.append(mapper.writeValueAsString(array[i])).append(\"]\");\n            if(i != maxArgs -1 ) {\n                sb.append(\",\");\n            }\n        } catch (Exception e) {\n            sb.append(\"],\");\n        }\n        i++;\n    }\n    return sb.append(\"}\").toString();\n}\n</code></pre>\n\n<p>}</p>\n"},{"comments":[{"owner":{"account_id":2479898,"reputation":1010,"user_id":2159573,"accept_rate":33,"display_name":"Saurabhcdt"},"score":0,"creation_date":1614084198,"post_id":61895610,"comment_id":117271310,"body_markdown":"Adding &quot;logging.level.org.apache.coyote.http11=DEBUG&quot; to application.properties logs request &amp; response but any request made to other back end services using restTemplate are not logged same way.","body":"Adding &quot;logging.level.org.apache.coyote.http11=DEBUG&quot; to application.properties logs request &amp; response but any request made to other back end services using restTemplate are not logged same way."}],"tags":[],"owner":{"account_id":7906665,"reputation":21,"user_id":5971942,"display_name":"Narendra"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589962026,"creation_date":1589904396,"answer_id":61895610,"question_id":33744875,"body_markdown":"If you have Spring boot Config server configured then just enable Debug logger for class : \r\n\r\n `Http11InputBuffer.Http11InputBuffer.java` \r\n\r\nDebugs will log all the requests and  responses for every request\r\n","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>If you have Spring boot Config server configured then just enable Debug logger for class : </p>\n\n<p><code>Http11InputBuffer.Http11InputBuffer.java</code> </p>\n\n<p>Debugs will log all the requests and  responses for every request</p>\n"},{"comments":[{"owner":{"account_id":1374097,"reputation":564,"user_id":1308453,"accept_rate":100,"display_name":"Philip Rego"},"score":1,"creation_date":1650993039,"post_id":64607940,"comment_id":127253831,"body_markdown":"This doesn&#39;t work with latest Spring Boot. `/actuator/` and `/actuator/httptrace` will still return 404","body":"This doesn&#39;t work with latest Spring Boot. <code>&#47;actuator&#47;</code> and <code>&#47;actuator&#47;httptrace</code> will still return 404"},{"owner":{"account_id":1374097,"reputation":564,"user_id":1308453,"accept_rate":100,"display_name":"Philip Rego"},"score":1,"creation_date":1650995521,"post_id":64607940,"comment_id":127254710,"body_markdown":"It appears endpoint was changed to `/httptrace`. All endpoints: https://docs.spring.io/spring-boot/docs/2.1.7.RELEASE/reference/html/production-ready-endpoints.html#production-ready-endpoints-exposing-endpoints","body":"It appears endpoint was changed to <code>&#47;httptrace</code>. All endpoints: <a href=\"https://docs.spring.io/spring-boot/docs/2.1.7.RELEASE/reference/html/production-ready-endpoints.html#production-ready-endpoints-exposing-endpoints\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/2.1.7.RELEASE/reference/html&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":1374097,"reputation":564,"user_id":1308453,"accept_rate":100,"display_name":"Philip Rego"},"score":1,"creation_date":1650999898,"post_id":64607940,"comment_id":127256147,"body_markdown":"You&#39;ll need to find your `management.endpoints.web.base-path` config if you want to know what the actual endpoint is.","body":"You&#39;ll need to find your <code>management.endpoints.web.base-path</code> config if you want to know what the actual endpoint is."},{"owner":{"account_id":1374097,"reputation":564,"user_id":1308453,"accept_rate":100,"display_name":"Philip Rego"},"score":1,"creation_date":1651000656,"post_id":64607940,"comment_id":127256370,"body_markdown":"Definitely still needs the HttpTraceRepository Bean in your @Configuration class. Doesn&#39;t work without it.","body":"Definitely still needs the HttpTraceRepository Bean in your @Configuration class. Doesn&#39;t work without it."}],"tags":[],"owner":{"account_id":2732640,"reputation":399,"user_id":2356062,"accept_rate":100,"display_name":"atkuzmanov"},"comment_count":4,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1604059070,"creation_date":1604059070,"answer_id":64607940,"question_id":33744875,"body_markdown":"**Has there been any development with Actuator HTTP Trace since the initial question was posted i.e. is there a way to enrich it with the response body?**\r\n\r\n**What about enriching it with custom metadata from MDC or from Spring-Sleuth or Zipkin, such as traceId and spanId?**\r\n\r\n*Also for me Actuator HTTP Trace didn&#39;t work Spring Boot 2.2.3, and I found the fix here: [https://juplo.de/actuator-httptrace-does-not-work-with-spring-boot-2-2/][1]*\r\n\r\npom.xml\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot\r\n      &lt;artifactId&gt;spring-boot-starter-actuator\r\n    &lt;/dependency&gt;\r\n\r\napplication.properties\r\n\r\n    management.endpoints.web.exposure.include=httptrace\r\n\r\n**The fix:**\r\n\r\n&gt; The simple fix for this problem is, to add a @Bean of type\r\n&gt; InMemoryHttpTraceRepository to your @Configuration-class:\r\n\r\n    @Bean\r\n    public HttpTraceRepository htttpTraceRepository()\r\n    {\r\n      return new InMemoryHttpTraceRepository();\r\n    }\r\n\r\n**The Explanation:**\r\n\r\n&gt; The cause of this problem is not a bug, but a legitimate change in the\r\n&gt; default configuration. Unfortunately, this change is not noted in the\r\n&gt; according section of the documentation. Instead it is burried in the\r\n&gt; Upgrade Notes for Spring Boot 2.2\r\n&gt; \r\n&gt; The default-implementation stores the captured data in memory. Hence,\r\n&gt; it consumes much memory, without the user knowing, or even worse:\r\n&gt; needing it. This is especially undesirable in cluster environments,\r\n&gt; where memory is a precious good. And remember: Spring Boot was\r\n&gt; invented to simplify cluster deployments!\r\n&gt; \r\n&gt; That is, why this feature is now turned of by default and has to be\r\n&gt; turned on by the user explicitly, if needed.\r\n\r\n  [1]: https://juplo.de/actuator-httptrace-does-not-work-with-spring-boot-2-2/","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p><strong>Has there been any development with Actuator HTTP Trace since the initial question was posted i.e. is there a way to enrich it with the response body?</strong></p>\n<p><strong>What about enriching it with custom metadata from MDC or from Spring-Sleuth or Zipkin, such as traceId and spanId?</strong></p>\n<p><em>Also for me Actuator HTTP Trace didn't work Spring Boot 2.2.3, and I found the fix here: <a href=\"https://juplo.de/actuator-httptrace-does-not-work-with-spring-boot-2-2/\" rel=\"nofollow noreferrer\">https://juplo.de/actuator-httptrace-does-not-work-with-spring-boot-2-2/</a></em></p>\n<p>pom.xml</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot\n  &lt;artifactId&gt;spring-boot-starter-actuator\n&lt;/dependency&gt;\n</code></pre>\n<p>application.properties</p>\n<pre><code>management.endpoints.web.exposure.include=httptrace\n</code></pre>\n<p><strong>The fix:</strong></p>\n<blockquote>\n<p>The simple fix for this problem is, to add a @Bean of type\nInMemoryHttpTraceRepository to your @Configuration-class:</p>\n</blockquote>\n<pre><code>@Bean\npublic HttpTraceRepository htttpTraceRepository()\n{\n  return new InMemoryHttpTraceRepository();\n}\n</code></pre>\n<p><strong>The Explanation:</strong></p>\n<blockquote>\n<p>The cause of this problem is not a bug, but a legitimate change in the\ndefault configuration. Unfortunately, this change is not noted in the\naccording section of the documentation. Instead it is burried in the\nUpgrade Notes for Spring Boot 2.2</p>\n<p>The default-implementation stores the captured data in memory. Hence,\nit consumes much memory, without the user knowing, or even worse:\nneeding it. This is especially undesirable in cluster environments,\nwhere memory is a precious good. And remember: Spring Boot was\ninvented to simplify cluster deployments!</p>\n<p>That is, why this feature is now turned of by default and has to be\nturned on by the user explicitly, if needed.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":200630,"reputation":27386,"user_id":446591,"accept_rate":65,"display_name":"Brad Mace"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1606853256,"creation_date":1606853256,"answer_id":65097756,"question_id":33744875,"body_markdown":"As [suggested previously](https://stackoverflow.com/a/47963056/446591), [Logbook](https://github.com/zalando/logbook) is just about perfect for this, but I did have a little trouble setting it up when using Java modules, due to a split package between `logbook-api` and `logbook-core`.\r\n\r\nFor my Gradle + Spring Boot project, I needed\r\n\r\n### build.gradle\r\n\r\n```\r\ndependencies {\r\n    compileOnly group: &#39;org.zalando&#39;, name: &#39;logbook-api&#39;, version: &#39;2.4.1&#39;\r\n    runtimeOnly group: &#39;org.zalando&#39;, name: &#39;logbook-spring-boot-starter&#39;, version: &#39;2.4.1&#39;\r\n    //...\r\n}\r\n\r\n```\r\n\r\n### logback-spring.xml\r\n\r\n```\r\n&lt;configuration&gt;\r\n    &lt;!-- HTTP Requests and Responses --&gt;\r\n    &lt;logger name=&quot;org.zalando.logbook&quot; level=&quot;trace&quot; /&gt;\r\n&lt;/configuration&gt;\r\n```","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>As <a href=\"https://stackoverflow.com/a/47963056/446591\">suggested previously</a>, <a href=\"https://github.com/zalando/logbook\" rel=\"nofollow noreferrer\">Logbook</a> is just about perfect for this, but I did have a little trouble setting it up when using Java modules, due to a split package between <code>logbook-api</code> and <code>logbook-core</code>.</p>\n<p>For my Gradle + Spring Boot project, I needed</p>\n<h3>build.gradle</h3>\n<pre><code>dependencies {\n    compileOnly group: 'org.zalando', name: 'logbook-api', version: '2.4.1'\n    runtimeOnly group: 'org.zalando', name: 'logbook-spring-boot-starter', version: '2.4.1'\n    //...\n}\n\n</code></pre>\n<h3>logback-spring.xml</h3>\n<pre><code>&lt;configuration&gt;\n    &lt;!-- HTTP Requests and Responses --&gt;\n    &lt;logger name=&quot;org.zalando.logbook&quot; level=&quot;trace&quot; /&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12808955,"reputation":41,"user_id":9267782,"display_name":"Bence"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1628121141,"creation_date":1628083932,"answer_id":68652184,"question_id":33744875,"body_markdown":"Note \r\n\r\n     @Bean\r\n    public CommonsRequestLoggingFilter requestLoggingFilter() {\r\n    ...\r\n    }\r\n\r\napproach will not work with spring security filter chains.\r\nYou have to manually add CommonsRequestLoggingFilter like\r\n\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n    \t     HttpSecurity filter = http\r\n         \t.cors().and().addFilterBefore(new CommonsRequestLoggingFilter(), CorsFilter.class);\r\n    }\r\n\r\n","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>Note</p>\n<pre><code> @Bean\npublic CommonsRequestLoggingFilter requestLoggingFilter() {\n...\n}\n</code></pre>\n<p>approach will not work with spring security filter chains.\nYou have to manually add CommonsRequestLoggingFilter like</p>\n<pre><code>protected void configure(HttpSecurity http) throws Exception {\n         HttpSecurity filter = http\n        .cors().and().addFilterBefore(new CommonsRequestLoggingFilter(), CorsFilter.class);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19498714,"reputation":155,"user_id":14265327,"display_name":"erfanmorsali"},"comment_count":0,"down_vote_count":6,"up_vote_count":0,"is_accepted":false,"score":-6,"last_activity_date":1646570315,"creation_date":1646570315,"answer_id":71370341,"question_id":33744875,"body_markdown":"you can use Aspect Oriented Programming To Handle All These In One Plcae.","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>you can use Aspect Oriented Programming To Handle All These In One Plcae.</p>\n"},{"tags":[],"owner":{"account_id":6688303,"reputation":2926,"user_id":5158636,"display_name":"tschumann"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1648539924,"creation_date":1648539924,"answer_id":71658216,"question_id":33744875,"body_markdown":"I created a file called LoggingConfig.java with contents:\r\n```\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.web.filter.CommonsRequestLoggingFilter;\r\n\r\n@Configuration\r\npublic class LoggingConfig {\r\n\r\n    @Bean\r\n    public CommonsRequestLoggingFilter requestLoggingFilter() {\r\n        final CommonsRequestLoggingFilter loggingFilter = new CommonsRequestLoggingFilter();\r\n        loggingFilter.setIncludeClientInfo(true);\r\n        loggingFilter.setIncludeQueryString(true);\r\n        loggingFilter.setIncludePayload(true);\r\n        loggingFilter.setMaxPayloadLength(32768);\r\n        return loggingFilter;\r\n    }\r\n}\r\n\r\n```\r\n\r\nIn application.properties I added:\r\n```\r\nlogging.level.org.springframework.web.filter.CommonsRequestLoggingFilter=DEBUG\r\n```","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>I created a file called LoggingConfig.java with contents:</p>\n<pre><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.filter.CommonsRequestLoggingFilter;\n\n@Configuration\npublic class LoggingConfig {\n\n    @Bean\n    public CommonsRequestLoggingFilter requestLoggingFilter() {\n        final CommonsRequestLoggingFilter loggingFilter = new CommonsRequestLoggingFilter();\n        loggingFilter.setIncludeClientInfo(true);\n        loggingFilter.setIncludeQueryString(true);\n        loggingFilter.setIncludePayload(true);\n        loggingFilter.setMaxPayloadLength(32768);\n        return loggingFilter;\n    }\n}\n\n</code></pre>\n<p>In application.properties I added:</p>\n<pre><code>logging.level.org.springframework.web.filter.CommonsRequestLoggingFilter=DEBUG\n</code></pre>\n"},{"tags":[],"owner":{"account_id":706860,"reputation":9592,"user_id":601844,"display_name":"epox"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1649430786,"creation_date":1649430401,"answer_id":71799297,"question_id":33744875,"body_markdown":"Logging Request + payload in a CUSTOM FORMAT:\r\n=\r\nFor a custom format, just override the super implementation of the Spring logger Bean - [org/springframework/web/filter/AbstractRequestLoggingFilter.java][1]\r\n\r\nLet&#39;s say we whish skipping GET requests and only tracing write requests (PUT, PATCH, DELETE, etc) with INFO log level:\r\n\r\n    @Bean\r\n    public CommonsRequestLoggingFilter requestLoggingFilter() {\r\n    CommonsRequestLoggingFilter logFilter = new CommonsRequestLoggingFilter() {\r\n\r\n      @Override\r\n      protected boolean shouldLog(HttpServletRequest request) {\r\n        return logger.isInfoEnabled() &amp;&amp; !Objects.equals(request.getMethod(), &quot;GET&quot;);\r\n      }\r\n\r\n\r\n\t  @Override\r\n\t  protected void beforeRequest(HttpServletRequest request, String message) {\r\n\t\t// Do nothing if you need logging payload.\r\n        // As, Before the Request, the payload is not read from the input-stream, yet.\r\n\t  }\r\n\r\n\r\n\t  @Override\r\n\t  protected void afterRequest(HttpServletRequest request, String message) {\r\n\t\tlogger.info(message); // Or log to a file here, as OP asks.\r\n\t  }\r\n\r\n\r\n      @Override\r\n      protected @NonNull String createMessage(HttpServletRequest request, @NonNull String prefix, @NonNull String suffix) {\r\n        // Output: [PUT][/api/my-entity], user:[my-loging], payload was:[{ &quot;id&quot;: 33, &quot;value&quot;: 777.00}]\r\n        StringBuilder msg = new StringBuilder()\r\n            .append(prefix)\r\n            .append(&quot;[&quot;).append(request.getMethod()).append(&quot;]&quot;)\r\n            .append(&quot;[&quot;).append(request.getRequestURI()).append(&quot;]&quot;);\r\n\r\n        String user = request.getRemoteUser();\r\n        msg.append(&quot;, user:[&quot;).append(null == user ? &quot;&quot; : user).append(&quot;]&quot;);\r\n\r\n        String payload = getMessagePayload(request);\r\n        if (payload != null) {\r\n          // It&#39;s not null on After event. As, on Before event, the Input stream was not read, yet.\r\n          msg.append(&quot;, payload was:[&quot;).append(payload.replace(&quot;\\n&quot;, &quot;&quot;)).append(&quot;]&quot;);  // Remove /n to be compliant with elastic search readers.\r\n        }\r\n\r\n        msg.append(suffix);\r\n        return msg.toString();\r\n      }\r\n    };\r\n    logFilter.setBeforeMessagePrefix(&quot;Incoming REST call: --&gt;&gt;&gt;[&quot;);\r\n    logFilter.setBeforeMessageSuffix(&quot;]...&quot;);\r\n    logFilter.setAfterMessagePrefix(&quot;REST call processed: -&lt;&lt;&lt;[&quot;);\r\n    logFilter.setAfterMessageSuffix(&quot;]&quot;);\r\n    logFilter.setIncludePayload(true);\r\n    logFilter.setMaxPayloadLength(64000);\r\n    return logFilter;\r\n    }\r\n\r\n\r\n\r\nLoggging Requeest + Response/status:\r\n=\r\nsee https://www.baeldung.com/spring-http-logging#custom-request-logging\r\n\r\n*(I can add the exact code example to here if the answer gets the demand/ reaches 50+ upvotes)*\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/web/filter/AbstractRequestLoggingFilter.java#L314-L322","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<h1>Logging Request + payload in a CUSTOM FORMAT:</h1>\n<p>For a custom format, just override the super implementation of the Spring logger Bean - <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/web/filter/AbstractRequestLoggingFilter.java#L314-L322\" rel=\"nofollow noreferrer\">org/springframework/web/filter/AbstractRequestLoggingFilter.java</a></p>\n<p>Let's say we whish skipping GET requests and only tracing write requests (PUT, PATCH, DELETE, etc) with INFO log level:</p>\n<pre><code>@Bean\npublic CommonsRequestLoggingFilter requestLoggingFilter() {\nCommonsRequestLoggingFilter logFilter = new CommonsRequestLoggingFilter() {\n\n  @Override\n  protected boolean shouldLog(HttpServletRequest request) {\n    return logger.isInfoEnabled() &amp;&amp; !Objects.equals(request.getMethod(), &quot;GET&quot;);\n  }\n\n\n  @Override\n  protected void beforeRequest(HttpServletRequest request, String message) {\n    // Do nothing if you need logging payload.\n    // As, Before the Request, the payload is not read from the input-stream, yet.\n  }\n\n\n  @Override\n  protected void afterRequest(HttpServletRequest request, String message) {\n    logger.info(message); // Or log to a file here, as OP asks.\n  }\n\n\n  @Override\n  protected @NonNull String createMessage(HttpServletRequest request, @NonNull String prefix, @NonNull String suffix) {\n    // Output: [PUT][/api/my-entity], user:[my-loging], payload was:[{ &quot;id&quot;: 33, &quot;value&quot;: 777.00}]\n    StringBuilder msg = new StringBuilder()\n        .append(prefix)\n        .append(&quot;[&quot;).append(request.getMethod()).append(&quot;]&quot;)\n        .append(&quot;[&quot;).append(request.getRequestURI()).append(&quot;]&quot;);\n\n    String user = request.getRemoteUser();\n    msg.append(&quot;, user:[&quot;).append(null == user ? &quot;&quot; : user).append(&quot;]&quot;);\n\n    String payload = getMessagePayload(request);\n    if (payload != null) {\n      // It's not null on After event. As, on Before event, the Input stream was not read, yet.\n      msg.append(&quot;, payload was:[&quot;).append(payload.replace(&quot;\\n&quot;, &quot;&quot;)).append(&quot;]&quot;);  // Remove /n to be compliant with elastic search readers.\n    }\n\n    msg.append(suffix);\n    return msg.toString();\n  }\n};\nlogFilter.setBeforeMessagePrefix(&quot;Incoming REST call: --&gt;&gt;&gt;[&quot;);\nlogFilter.setBeforeMessageSuffix(&quot;]...&quot;);\nlogFilter.setAfterMessagePrefix(&quot;REST call processed: -&lt;&lt;&lt;[&quot;);\nlogFilter.setAfterMessageSuffix(&quot;]&quot;);\nlogFilter.setIncludePayload(true);\nlogFilter.setMaxPayloadLength(64000);\nreturn logFilter;\n}\n</code></pre>\n<h1>Loggging Requeest + Response/status:</h1>\n<p>see <a href=\"https://www.baeldung.com/spring-http-logging#custom-request-logging\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-http-logging#custom-request-logging</a></p>\n<p><em>(I can add the exact code example to here if the answer gets the demand/ reaches 50+ upvotes)</em></p>\n"},{"comments":[{"owner":{"account_id":9094867,"reputation":393,"user_id":7430588,"display_name":"malware"},"score":0,"creation_date":1656511060,"post_id":72786064,"comment_id":128591046,"body_markdown":"`actuator` doesn&#39;t log the body of the request or response.","body":"<code>actuator</code> doesn&#39;t log the body of the request or response."},{"owner":{"account_id":7566728,"reputation":407,"user_id":5751473,"display_name":"Se ven"},"score":0,"creation_date":1668781428,"post_id":72786064,"comment_id":131496269,"body_markdown":"Just mention that after `Spring Boot 2.2.0 M3` `Spring Framework 5.2 M2` [actuator http trace and auditing are disabled by default](https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.2.0-M3-Release-Notes#actuator-http-trace-and-auditing-are-disabled-by-default) since the default repositories implementations are in-memory and may consume too many resources and are not cluster friendly.","body":"Just mention that after <code>Spring Boot 2.2.0 M3</code> <code>Spring Framework 5.2 M2</code> <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.2.0-M3-Release-Notes#actuator-http-trace-and-auditing-are-disabled-by-default\" rel=\"nofollow noreferrer\">actuator http trace and auditing are disabled by default</a> since the default repositories implementations are in-memory and may consume too many resources and are not cluster friendly."}],"tags":[],"owner":{"account_id":11885668,"reputation":729,"user_id":8698137,"display_name":"Shadyar"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656417722,"creation_date":1656417722,"answer_id":72786064,"question_id":33744875,"body_markdown":"You can use Actuator in Spring Boot.  \r\nIt logs requests and responses and more information about servlet and system operating.  \r\nYou just add it as a dependency of your project and config, if more details needed to log.  \r\nTake a look at this example:  \r\n[Actuator in Spring Boot example](https://springframework.guru/actuator-in-spring-boot/)","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>You can use Actuator in Spring Boot.<br />\nIt logs requests and responses and more information about servlet and system operating.<br />\nYou just add it as a dependency of your project and config, if more details needed to log.<br />\nTake a look at this example:<br />\n<a href=\"https://springframework.guru/actuator-in-spring-boot/\" rel=\"nofollow noreferrer\">Actuator in Spring Boot example</a></p>\n"},{"tags":[],"owner":{"account_id":127914,"reputation":162,"user_id":325413,"display_name":"Max S"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681554642,"creation_date":1679843403,"answer_id":75848569,"question_id":33744875,"body_markdown":"I created a Filter class which extends the Spring class CommonsRequestLoggingFilter. It logs all requests to file and database.\r\n\r\n\r\n    package &lt;my.package&gt;\r\n    //...\r\n\r\n    public class LogRequestFilter extends CommonsRequestLoggingFilter {\r\n    \r\n    \t@Autowired\r\n    \tprivate LogRequestRepository logRequestRepository;\r\n    \t\r\n    \t@Autowired\r\n    \tprivate ObjectMapper jsonMapper;\r\n    \t\r\n    \t@Getter\r\n    \t@Setter\r\n    \tprivate boolean includeParams = false;\r\n    \t\r\n    \t@Getter\r\n    \t@Setter\r\n    \tprivate boolean includeResponsePayload = false;\r\n    \t\r\n    \t\r\n    \t@Override\r\n    \tprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n    \t\t\tthrows ServletException, IOException {\r\n    \t\t\r\n    \t\tlong startTime = System.currentTimeMillis();\r\n    \t\tContentCachingRequestWrapper wrappedRequest = null;\r\n    \t\tContentCachingResponseWrapper wrappedResponse = null;\r\n    \t\tLogRequest logRequest = null;\r\n    \t\ttry {\r\n    \t\t\t\r\n    \t\t\t// filter calls by methods\r\n    \t\t\tif (!request.getMethod().equals(&quot;OPTIONS&quot;)) {\r\n    \t\t\t\t\r\n    \t\t\t\t// read request\r\n    \t\t\t\tString requestHeaders = isIncludeHeaders() ? getRequestHeaders(request) : null;\r\n    \t\t\t\tString requestParams = isIncludeParams() ? getRequestParams(request) : null;\r\n    \t\t\t\tString requestUri = getRequestURI(request);\r\n    \t\t\t\tString userId = getUserId(request);\r\n    \t\t\t\t\r\n    \t\t\t\t// wrap request/response to intercept them\r\n    \t\t\t\twrappedRequest = new ContentCachingRequestWrapper(request);\r\n    \t\t\t\twrappedResponse = new ContentCachingResponseWrapper(response);\r\n    \r\n    \t\t\t\t// forward request\r\n    \t\t\t\tsuper.doFilterInternal(wrappedRequest, wrappedResponse, filterChain);\r\n    \t\t\t\t\r\n    \t\t\t\tString requestPayload = null;\r\n    \t\t\t\tif (isIncludePayload()) {\r\n    \t\t\t\t\trequestPayload = super.getMessagePayload(wrappedRequest);\r\n    \t\t\t\t\tif (requestPayload != null &amp;&amp; &quot;application/json&quot;.equalsIgnoreCase(request.getContentType())) {\r\n    \t\t\t\t\t\tObject o = jsonMapper.readValue(requestPayload, Object.class);\r\n    \t\t\t\t\t\trequestPayload = jsonObjectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(o);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tString responsePayload = null;\r\n    \t\t\t\tif (isIncludeResponsePayload()) {\r\n    \t\t\t\t\tresponsePayload = getResponsePayload(wrappedResponse);\r\n    \t\t\t\t\tif (responsePayload != null &amp;&amp; &quot;application/json&quot;.equalsIgnoreCase(response.getContentType())) {\r\n    \t\t\t\t\t\tObject o = jsonMapper.readValue(responsePayload, Object.class);\r\n    \t\t\t\t\t\tresponsePayload = jsonObjectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(o);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\t// prepare log\r\n    \t\t\t\tlogRequest = new LogRequest();\r\n    \t\t\t\tlogRequest.setThreadId(Thread.currentThread().getId());\r\n    \t\t\t\tlogRequest.setRequestHeaders(requestHeaders);\r\n    \t\t\t\tlogRequest.setRequestParams(requestParams);\r\n    \t\t\t\tlogRequest.setRequestUri(requestUri.toString());\r\n    \t\t\t\tlogRequest.setUserId(userId);\r\n    \t\t\t\tlogRequest.setRequestPayload(requestPayload);\r\n    \t\t\t\tlogRequest.setResponsePayload(responsePayload);\r\n    \t\t\t\tlogRequest.setHttpStatus(response.getStatus());\r\n    \t\t\t\t//logRequest.setContentType(response.getContentType() + &quot;; charset=&quot; + response.getCharacterEncoding());\r\n    \t\t\t\tlogRequest.setResponseContentType(response.getContentType());\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \t\t\telse {\r\n    \t\t\t\tsuper.doFilterInternal(request, response, filterChain);\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t}\r\n    \t\tfinally {\r\n    \t\t\t// save log to db\r\n    \t\t\tif (logRequest != null) {\r\n    \t\t\t\tlogRequest.setTime((System.currentTimeMillis() - startTime) / 1000.0);\r\n    \t\t\t\tlogRequestRepository.save(logRequest);\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\t// important! copy to the original response\r\n    \t\t\tif (wrappedResponse != null)\r\n    \t\t\t\twrappedResponse.copyBodyToResponse();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate String getRequestURI(HttpServletRequest request) {\r\n    \t\tStringBuilder requestUri = new StringBuilder();\r\n    \t\trequestUri.append(request.getMethod()).append(&quot; &quot;).append(request.getRequestURI());\r\n    \t\tif (isIncludeQueryString()) {\r\n    \t\t\tString queryString = request.getQueryString();\r\n    \t\t\tif (queryString != null) requestUri.append(&quot;?&quot;).append(queryString);\r\n    \t\t}\r\n    \t\treturn requestUri.toString();\r\n    \t}\r\n    \t\r\n    \tprivate String getUserId(HttpServletRequest request) {\r\n    \t\tString userId = request.getParameter(&quot;userId&quot;);\r\n    \t\tif (userId == null) userId = request.getParameter(&quot;userid&quot;);\r\n    \t\treturn userId;\r\n    \t}\r\n    \r\n    \tprivate String getRequestParams(HttpServletRequest request) {\r\n    \t\tEnumeration&lt;String&gt; parameterNames = request.getParameterNames();\r\n    \t\tStringBuilder requestParameters = new StringBuilder();\r\n    \t\twhile (parameterNames.hasMoreElements()) {\r\n    \t\t\tString parameterName = parameterNames.nextElement();\r\n    \t\t\trequestParameters.append(parameterName).append(&quot;: &quot;).append(request.getParameter(parameterName)).append(&quot;\\n&quot;);\r\n    \t\t}\r\n    \t\treturn requestParameters.toString();\r\n    \t}\r\n    \r\n    \tprivate String getRequestHeaders(HttpServletRequest request) {\r\n    \t\tEnumeration&lt;String&gt; headerNames = request.getHeaderNames();\r\n    \t\tStringBuilder requestHeaders = new StringBuilder();\r\n    \t\twhile (headerNames.hasMoreElements()) {\r\n    \t\t\tString headerName = (String) headerNames.nextElement();\r\n    \t\t\trequestHeaders.append(headerName).append(&quot;: &quot;).append(request.getHeader(headerName)).append(&quot;\\n&quot;);\r\n    \t\t}\r\n    \t\treturn requestHeaders.toString();\r\n    \t}\r\n    \r\n    \t@SuppressWarnings(&quot;unused&quot;)\r\n    \tprivate String getResponseHeaders(HttpServletResponse response) {\r\n    \t\tCollection&lt;String&gt; responseHeaderNames = response.getHeaderNames();\r\n    \t\tStringBuilder responseHeaders = new StringBuilder();\r\n    \t\tfor (Iterator&lt;String&gt; iterator = responseHeaderNames.iterator(); iterator.hasNext();) {\r\n    \t\t\tString responseHeaderName = iterator.next();\r\n    \t\t\tresponseHeaders.append(responseHeaderName).append(&quot;: &quot;).append(response.getHeader(responseHeaderName)).append(&quot;\\n&quot;);\r\n    \t\t}\r\n    \t\treturn responseHeaders.toString();\r\n    \t}\r\n    \t\r\n    \tprotected String getResponsePayload(HttpServletResponse response) {\r\n    \t\tContentCachingResponseWrapper wrapper = WebUtils.getNativeResponse(response, ContentCachingResponseWrapper.class);\r\n    \t\tif (wrapper != null) {\r\n    \t\t\tbyte[] buf = wrapper.getContentAsByteArray();\r\n    \t\t\tif (buf.length &gt; 0) {\r\n    \t\t\t\tint length = Math.min(buf.length, getMaxPayloadLength());\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\treturn new String(buf, 0, length, wrapper.getCharacterEncoding());\r\n    \t\t\t\t}\r\n    \t\t\t\tcatch (UnsupportedEncodingException ex) {\r\n    \t\t\t\t\treturn &quot;[unknown]&quot;;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \t\r\n    }\r\n\r\n \r\nI configured it in @Configuration class:\r\n\r\n\r\n    @Value(&quot;${logging.filter.logRequest.maxPayloadLength}&quot;)\r\n    public int requestLogFilterMaxPayloadLength;\r\n    // etc...\r\n    \r\n    @Bean\r\n    public CommonsRequestLoggingFilter requestLogFilter() {\r\n        LogRequestFilter filter = new LogRequestFilter();\r\n        filter.setAfterMessagePrefix(&quot;REQUEST:[&quot;);\r\n        filter.setAfterMessageSuffix(&quot;]&quot;);\r\n        filter.setIncludeClientInfo(requestLogFilterIncludeClientInfo);\r\n        filter.setIncludeHeaders(requestLogFilterIncludeHeaders);\r\n        filter.setIncludeParams(requestLogFilterIncludeParams);\r\n        filter.setIncludePayload(requestLogFilterIncludePayload);\r\n        filter.setIncludeResponsePayload(requestLogFilterIncludeResponsePayload);   \r\n        filter.setIncludeQueryString(requestLogFilterIncludeQueryString);\r\n        filter.setMaxPayloadLength(requestLogFilterMaxPayloadLength);\r\n        return filter;\r\n    }\r\n    \r\n\r\n\r\nand finally in the application.yml:\r\n\r\n    logging:\r\n      file: log/logRequest.log\r\n      filter:\r\n        logRequest:\r\n          includeClientInfo: false\r\n          includeHeaders: true\r\n          includeParams: true\r\n          includePayload: true\r\n          includeQueryString: true\r\n          includeResponsePayload: true\r\n          maxPayloadLength: 100000\r\n      level:\r\n        root: WARN\r\n        &lt;my.package&gt;.LogRequestFilter: DEBUG\r\n","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>I created a Filter class which extends the Spring class CommonsRequestLoggingFilter. It logs all requests to file and database.</p>\n<pre><code>package &lt;my.package&gt;\n//...\n\npublic class LogRequestFilter extends CommonsRequestLoggingFilter {\n\n    @Autowired\n    private LogRequestRepository logRequestRepository;\n    \n    @Autowired\n    private ObjectMapper jsonMapper;\n    \n    @Getter\n    @Setter\n    private boolean includeParams = false;\n    \n    @Getter\n    @Setter\n    private boolean includeResponsePayload = false;\n    \n    \n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        \n        long startTime = System.currentTimeMillis();\n        ContentCachingRequestWrapper wrappedRequest = null;\n        ContentCachingResponseWrapper wrappedResponse = null;\n        LogRequest logRequest = null;\n        try {\n            \n            // filter calls by methods\n            if (!request.getMethod().equals(&quot;OPTIONS&quot;)) {\n                \n                // read request\n                String requestHeaders = isIncludeHeaders() ? getRequestHeaders(request) : null;\n                String requestParams = isIncludeParams() ? getRequestParams(request) : null;\n                String requestUri = getRequestURI(request);\n                String userId = getUserId(request);\n                \n                // wrap request/response to intercept them\n                wrappedRequest = new ContentCachingRequestWrapper(request);\n                wrappedResponse = new ContentCachingResponseWrapper(response);\n\n                // forward request\n                super.doFilterInternal(wrappedRequest, wrappedResponse, filterChain);\n                \n                String requestPayload = null;\n                if (isIncludePayload()) {\n                    requestPayload = super.getMessagePayload(wrappedRequest);\n                    if (requestPayload != null &amp;&amp; &quot;application/json&quot;.equalsIgnoreCase(request.getContentType())) {\n                        Object o = jsonMapper.readValue(requestPayload, Object.class);\n                        requestPayload = jsonObjectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(o);\n                    }\n                }\n                \n                String responsePayload = null;\n                if (isIncludeResponsePayload()) {\n                    responsePayload = getResponsePayload(wrappedResponse);\n                    if (responsePayload != null &amp;&amp; &quot;application/json&quot;.equalsIgnoreCase(response.getContentType())) {\n                        Object o = jsonMapper.readValue(responsePayload, Object.class);\n                        responsePayload = jsonObjectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(o);\n                    }\n                }\n\n                // prepare log\n                logRequest = new LogRequest();\n                logRequest.setThreadId(Thread.currentThread().getId());\n                logRequest.setRequestHeaders(requestHeaders);\n                logRequest.setRequestParams(requestParams);\n                logRequest.setRequestUri(requestUri.toString());\n                logRequest.setUserId(userId);\n                logRequest.setRequestPayload(requestPayload);\n                logRequest.setResponsePayload(responsePayload);\n                logRequest.setHttpStatus(response.getStatus());\n                //logRequest.setContentType(response.getContentType() + &quot;; charset=&quot; + response.getCharacterEncoding());\n                logRequest.setResponseContentType(response.getContentType());\n                \n            }\n            else {\n                super.doFilterInternal(request, response, filterChain);\n            }\n            \n        }\n        finally {\n            // save log to db\n            if (logRequest != null) {\n                logRequest.setTime((System.currentTimeMillis() - startTime) / 1000.0);\n                logRequestRepository.save(logRequest);\n            }\n            \n            // important! copy to the original response\n            if (wrappedResponse != null)\n                wrappedResponse.copyBodyToResponse();\n        }\n    }\n\n    private String getRequestURI(HttpServletRequest request) {\n        StringBuilder requestUri = new StringBuilder();\n        requestUri.append(request.getMethod()).append(&quot; &quot;).append(request.getRequestURI());\n        if (isIncludeQueryString()) {\n            String queryString = request.getQueryString();\n            if (queryString != null) requestUri.append(&quot;?&quot;).append(queryString);\n        }\n        return requestUri.toString();\n    }\n    \n    private String getUserId(HttpServletRequest request) {\n        String userId = request.getParameter(&quot;userId&quot;);\n        if (userId == null) userId = request.getParameter(&quot;userid&quot;);\n        return userId;\n    }\n\n    private String getRequestParams(HttpServletRequest request) {\n        Enumeration&lt;String&gt; parameterNames = request.getParameterNames();\n        StringBuilder requestParameters = new StringBuilder();\n        while (parameterNames.hasMoreElements()) {\n            String parameterName = parameterNames.nextElement();\n            requestParameters.append(parameterName).append(&quot;: &quot;).append(request.getParameter(parameterName)).append(&quot;\\n&quot;);\n        }\n        return requestParameters.toString();\n    }\n\n    private String getRequestHeaders(HttpServletRequest request) {\n        Enumeration&lt;String&gt; headerNames = request.getHeaderNames();\n        StringBuilder requestHeaders = new StringBuilder();\n        while (headerNames.hasMoreElements()) {\n            String headerName = (String) headerNames.nextElement();\n            requestHeaders.append(headerName).append(&quot;: &quot;).append(request.getHeader(headerName)).append(&quot;\\n&quot;);\n        }\n        return requestHeaders.toString();\n    }\n\n    @SuppressWarnings(&quot;unused&quot;)\n    private String getResponseHeaders(HttpServletResponse response) {\n        Collection&lt;String&gt; responseHeaderNames = response.getHeaderNames();\n        StringBuilder responseHeaders = new StringBuilder();\n        for (Iterator&lt;String&gt; iterator = responseHeaderNames.iterator(); iterator.hasNext();) {\n            String responseHeaderName = iterator.next();\n            responseHeaders.append(responseHeaderName).append(&quot;: &quot;).append(response.getHeader(responseHeaderName)).append(&quot;\\n&quot;);\n        }\n        return responseHeaders.toString();\n    }\n    \n    protected String getResponsePayload(HttpServletResponse response) {\n        ContentCachingResponseWrapper wrapper = WebUtils.getNativeResponse(response, ContentCachingResponseWrapper.class);\n        if (wrapper != null) {\n            byte[] buf = wrapper.getContentAsByteArray();\n            if (buf.length &gt; 0) {\n                int length = Math.min(buf.length, getMaxPayloadLength());\n                try {\n                    return new String(buf, 0, length, wrapper.getCharacterEncoding());\n                }\n                catch (UnsupportedEncodingException ex) {\n                    return &quot;[unknown]&quot;;\n                }\n            }\n        }\n        return null;\n    }\n    \n}\n</code></pre>\n<p>I configured it in @Configuration class:</p>\n<pre><code>@Value(&quot;${logging.filter.logRequest.maxPayloadLength}&quot;)\npublic int requestLogFilterMaxPayloadLength;\n// etc...\n\n@Bean\npublic CommonsRequestLoggingFilter requestLogFilter() {\n    LogRequestFilter filter = new LogRequestFilter();\n    filter.setAfterMessagePrefix(&quot;REQUEST:[&quot;);\n    filter.setAfterMessageSuffix(&quot;]&quot;);\n    filter.setIncludeClientInfo(requestLogFilterIncludeClientInfo);\n    filter.setIncludeHeaders(requestLogFilterIncludeHeaders);\n    filter.setIncludeParams(requestLogFilterIncludeParams);\n    filter.setIncludePayload(requestLogFilterIncludePayload);\n    filter.setIncludeResponsePayload(requestLogFilterIncludeResponsePayload);   \n    filter.setIncludeQueryString(requestLogFilterIncludeQueryString);\n    filter.setMaxPayloadLength(requestLogFilterMaxPayloadLength);\n    return filter;\n}\n</code></pre>\n<p>and finally in the application.yml:</p>\n<pre><code>logging:\n  file: log/logRequest.log\n  filter:\n    logRequest:\n      includeClientInfo: false\n      includeHeaders: true\n      includeParams: true\n      includePayload: true\n      includeQueryString: true\n      includeResponsePayload: true\n      maxPayloadLength: 100000\n  level:\n    root: WARN\n    &lt;my.package&gt;.LogRequestFilter: DEBUG\n</code></pre>\n"},{"comments":[{"owner":{"account_id":36818,"reputation":2521,"user_id":105101,"display_name":"Greg"},"score":0,"creation_date":1699316574,"post_id":77001381,"comment_id":136514089,"body_markdown":"Many solutions here did not work for me.  I have a requirement that logging level in PROD cannot be finer than INFO. This is a good solution!","body":"Many solutions here did not work for me.  I have a requirement that logging level in PROD cannot be finer than INFO. This is a good solution!"}],"tags":[],"owner":{"account_id":221010,"reputation":71,"user_id":478752,"display_name":"HirenP"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693321404,"creation_date":1693321404,"answer_id":77001381,"question_id":33744875,"body_markdown":"This logs request and response body:\r\n\r\n```\r\n\r\nimport java.io.IOException;\r\nimport java.io.UnsupportedEncodingException;\r\n\r\nimport javax.servlet.FilterChain;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.web.filter.OncePerRequestFilter;\r\nimport org.springframework.web.util.ContentCachingRequestWrapper;\r\nimport org.springframework.web.util.ContentCachingResponseWrapper;\r\n\r\n@Component\r\npublic class LoggingFilter extends OncePerRequestFilter {\r\n\r\n    private static final Logger LOGGER = LoggerFactory.getLogger(LoggingFilter.class);\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n            throws ServletException, IOException {\r\n        ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper(request);\r\n        ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response);\r\n\r\n        long startTime = System.currentTimeMillis();\r\n        filterChain.doFilter(requestWrapper, responseWrapper);\r\n        long timeTaken = System.currentTimeMillis() - startTime;\r\n\r\n        String requestBody = getStringValue(requestWrapper.getContentAsByteArray(),\r\n                request.getCharacterEncoding());\r\n        String responseBody = getStringValue(responseWrapper.getContentAsByteArray(),\r\n                response.getCharacterEncoding());\r\n\r\n        LOGGER.info(\r\n                &quot;FINISHED PROCESSING : METHOD={}; REQUESTURI={}; REQUEST PAYLOAD={}; RESPONSE CODE={}; RESPONSE={}; TIM TAKEN={} milliseconds&quot;,\r\n                request.getMethod(), request.getRequestURI(), requestBody, response.getStatus(), responseBody,\r\n                timeTaken);\r\n        responseWrapper.copyBodyToResponse();\r\n    }\r\n\r\n    private String getStringValue(byte[] contentAsByteArray, String characterEncoding) {\r\n        try {\r\n            return new String(contentAsByteArray, 0, contentAsByteArray.length, characterEncoding);\r\n        } catch (UnsupportedEncodingException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return &quot;&quot;;\r\n    }\r\n\r\n}\r\n```","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>This logs request and response body:</p>\n<pre><code>\nimport java.io.IOException;\nimport java.io.UnsupportedEncodingException;\n\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.filter.OncePerRequestFilter;\nimport org.springframework.web.util.ContentCachingRequestWrapper;\nimport org.springframework.web.util.ContentCachingResponseWrapper;\n\n@Component\npublic class LoggingFilter extends OncePerRequestFilter {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(LoggingFilter.class);\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper(request);\n        ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response);\n\n        long startTime = System.currentTimeMillis();\n        filterChain.doFilter(requestWrapper, responseWrapper);\n        long timeTaken = System.currentTimeMillis() - startTime;\n\n        String requestBody = getStringValue(requestWrapper.getContentAsByteArray(),\n                request.getCharacterEncoding());\n        String responseBody = getStringValue(responseWrapper.getContentAsByteArray(),\n                response.getCharacterEncoding());\n\n        LOGGER.info(\n                &quot;FINISHED PROCESSING : METHOD={}; REQUESTURI={}; REQUEST PAYLOAD={}; RESPONSE CODE={}; RESPONSE={}; TIM TAKEN={} milliseconds&quot;,\n                request.getMethod(), request.getRequestURI(), requestBody, response.getStatus(), responseBody,\n                timeTaken);\n        responseWrapper.copyBodyToResponse();\n    }\n\n    private String getStringValue(byte[] contentAsByteArray, String characterEncoding) {\n        try {\n            return new String(contentAsByteArray, 0, contentAsByteArray.length, characterEncoding);\n        } catch (UnsupportedEncodingException e) {\n            e.printStackTrace();\n        }\n        return &quot;&quot;;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":3942923,"reputation":8945,"user_id":3256597,"accept_rate":16,"display_name":"Teimuraz"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":663226,"favorite_count":0,"down_vote_count":0,"up_vote_count":375,"answer_count":30,"score":375,"last_activity_date":1693321404,"creation_date":1447708884,"question_id":33744875,"body_markdown":"I&#39;m working on REST API with spring boot. I need to log all requests with input params (with methods, eg. GET, POST, etc.), request path, query string, corresponding class method of this request, also response of this action, both success and errors. For example:\r\n\r\n**Successful request:**\r\n\r\n    http://example.com/api/users/1\r\n\r\nLog should look something like this:\r\n\r\n```lang-json\r\n{\r\n   HttpStatus: 200,\r\n   path: &quot;api/users/1&quot;,\r\n   method: &quot;GET&quot;,\r\n   clientIp: &quot;0.0.0.0&quot;,\r\n   accessToken: &quot;XHGu6as5dajshdgau6i6asdjhgjhg&quot;,\r\n   method: &quot;UsersController.getUser&quot;,\r\n   arguments: {\r\n     id: 1 \r\n   },\r\n   response: {\r\n      user: {\r\n        id: 1,\r\n        username: &quot;user123&quot;,\r\n        email: &quot;user123@example.com&quot;   \r\n      }\r\n   },\r\n   exceptions: []       \r\n}\r\n```\r\n\r\n\r\nOr **request with error:**\r\n\r\n    http://example.com/api/users/9999\r\n\r\nLog should be something like this:\r\n\r\n```lang-json\r\n{\r\n   HttpStatus: 404,\r\n   errorCode: 101,                 \r\n   path: &quot;api/users/9999&quot;,\r\n   method: &quot;GET&quot;,\r\n   clientIp: &quot;0.0.0.0&quot;,\r\n   accessToken: &quot;XHGu6as5dajshdgau6i6asdjhgjhg&quot;,\r\n   method: &quot;UsersController.getUser&quot;,\r\n   arguments: {\r\n     id: 9999 \r\n   },\r\n   returns: {            \r\n   },\r\n   exceptions: [\r\n     {\r\n       exception: &quot;UserNotFoundException&quot;,\r\n       message: &quot;User with id 9999 not found&quot;,\r\n       exceptionId: &quot;adhaskldjaso98d7324kjh989&quot;,\r\n       stacktrace: ...................    \r\n   ]       \r\n}\r\n```\r\n\r\n\r\nI want Request/Response to be a single entity, with custom information related to this entity, both in successful and error cases.\r\n\r\nWhat is best practice in spring to achieve this, may be with filters? if yes, can you provide concrete example?\r\n\r\nI&#39;ve played with `@ControllerAdvice` and `@ExceptionHandler`, but as I mentioned, I need to handle all success and error requests in single place (and single log).\r\n","title":"Spring Boot - How to log all requests and responses with exceptions in single place?","body":"<p>I'm working on REST API with spring boot. I need to log all requests with input params (with methods, eg. GET, POST, etc.), request path, query string, corresponding class method of this request, also response of this action, both success and errors. For example:</p>\n<p><strong>Successful request:</strong></p>\n<pre><code>http://example.com/api/users/1\n</code></pre>\n<p>Log should look something like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n   HttpStatus: 200,\n   path: &quot;api/users/1&quot;,\n   method: &quot;GET&quot;,\n   clientIp: &quot;0.0.0.0&quot;,\n   accessToken: &quot;XHGu6as5dajshdgau6i6asdjhgjhg&quot;,\n   method: &quot;UsersController.getUser&quot;,\n   arguments: {\n     id: 1 \n   },\n   response: {\n      user: {\n        id: 1,\n        username: &quot;user123&quot;,\n        email: &quot;user123@example.com&quot;   \n      }\n   },\n   exceptions: []       \n}\n</code></pre>\n<p>Or <strong>request with error:</strong></p>\n<pre><code>http://example.com/api/users/9999\n</code></pre>\n<p>Log should be something like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n   HttpStatus: 404,\n   errorCode: 101,                 \n   path: &quot;api/users/9999&quot;,\n   method: &quot;GET&quot;,\n   clientIp: &quot;0.0.0.0&quot;,\n   accessToken: &quot;XHGu6as5dajshdgau6i6asdjhgjhg&quot;,\n   method: &quot;UsersController.getUser&quot;,\n   arguments: {\n     id: 9999 \n   },\n   returns: {            \n   },\n   exceptions: [\n     {\n       exception: &quot;UserNotFoundException&quot;,\n       message: &quot;User with id 9999 not found&quot;,\n       exceptionId: &quot;adhaskldjaso98d7324kjh989&quot;,\n       stacktrace: ...................    \n   ]       \n}\n</code></pre>\n<p>I want Request/Response to be a single entity, with custom information related to this entity, both in successful and error cases.</p>\n<p>What is best practice in spring to achieve this, may be with filters? if yes, can you provide concrete example?</p>\n<p>I've played with <code>@ControllerAdvice</code> and <code>@ExceptionHandler</code>, but as I mentioned, I need to handle all success and error requests in single place (and single log).</p>\n"},{"tags":["java","oracle","hibernate-mapping","joincolumn"],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1693545878,"post_id":77001378,"comment_id":135777877,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/77001378/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29322981,"reputation":1,"user_id":22466141,"display_name":"ams"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693321397,"creation_date":1693321397,"answer_id":77001378,"question_id":70925913,"body_markdown":"Seems the replay should have two parts.\r\n\r\n1. **@ManyToOne(..., optional = false)** meens that the relation is mandatory or it is an INNER JOIN. INNER JOIN requires direct comparison in relation. So the output form of the query is correct.\r\n\r\n2. NULL is a special status of the value, that should be translated as UNKNOWN value. Any direct comparison with NULL gives FALSE as a result. Even comparing NULL with NULL will give you FALSE as a result. That&#39;s why we have special unary operations in DB servers IS NULL/IS NOT NULL to check for NULLs. Keeping in mind that general logic is: NULL is not equal to another NULL, it is your local logic, based on data knowledge and unique keys presence, in this particular case that some NULLs could be considered as equal values. Hence, local logic requires local handwritten queries, methods, etc.\r\n\r\n*Remark.* The question in the topic is similar to having a FK by multiple columns - Oracle has SIMPLE approach for such cases: FK is being validated ONLY if all values in FK are NOT NULL, if one of them is NULL then no validation happens. What you wrote in the sample of SQL means FULL approach in FK and checks additional condition (VALUE1 = VALUE2 or (VALUE1 IS NULL and VALUE2 IS NULL)). Oacle does not support it. And only few database servers do support for that.","title":"Hibernate: ManyToOne / multiple join columns with one column nullable=true","body":"<p>Seems the replay should have two parts.</p>\n<ol>\n<li><p><strong>@ManyToOne(..., optional = false)</strong> meens that the relation is mandatory or it is an INNER JOIN. INNER JOIN requires direct comparison in relation. So the output form of the query is correct.</p>\n</li>\n<li><p>NULL is a special status of the value, that should be translated as UNKNOWN value. Any direct comparison with NULL gives FALSE as a result. Even comparing NULL with NULL will give you FALSE as a result. That's why we have special unary operations in DB servers IS NULL/IS NOT NULL to check for NULLs. Keeping in mind that general logic is: NULL is not equal to another NULL, it is your local logic, based on data knowledge and unique keys presence, in this particular case that some NULLs could be considered as equal values. Hence, local logic requires local handwritten queries, methods, etc.</p>\n</li>\n</ol>\n<p><em>Remark.</em> The question in the topic is similar to having a FK by multiple columns - Oracle has SIMPLE approach for such cases: FK is being validated ONLY if all values in FK are NOT NULL, if one of them is NULL then no validation happens. What you wrote in the sample of SQL means FULL approach in FK and checks additional condition (VALUE1 = VALUE2 or (VALUE1 IS NULL and VALUE2 IS NULL)). Oacle does not support it. And only few database servers do support for that.</p>\n"}],"owner":{"account_id":1670803,"reputation":611,"user_id":1537298,"accept_rate":100,"display_name":"NeoP5"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":981,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1693321397,"creation_date":1643631706,"question_id":70925913,"body_markdown":"I hope you can help me on that.\r\n\r\nTable A has a multi-column join to Table B where one of the JoinColumns can be nullable...\r\n\r\n    @Entity\r\n    @Table(name = &quot;TABLE_A&quot;)\r\n    public class TableA {\r\n\r\n    @ManyToOne(fetch = FetchType.EAGER, optional = false)\r\n\t@JoinColumns({ \r\n\t\t\t@JoinColumn(name = &quot;KEY1_TABLE_A&quot;, referencedColumnName = &quot;KEY1_TABLE_B&quot;),\r\n\t\t\t@JoinColumn(name = &quot;KEY2_TABLE_A&quot;, referencedColumnName = &quot;KEY2_TABLE_B&quot;),\r\n\t\t\t@JoinColumn(name = &quot;GROUP_TABLE_A&quot;, referencedColumnName = &quot;GROUP_TABLE_B&quot;, nullable = true)})\r\n\tprivate TableB typeB;\r\n\r\n    }\r\n\r\nIn TableB object the columns\r\n\r\n - TABLE_B#KEY1_TABLE_B (not null)\r\n - TABLE_B#KEY2_TABLE_B (not null)\r\n - TABLE_B#GROUP_TABLE_B (nullable)\r\n\r\nare mapped as Strings.\r\nThe touple KEY1_TABLE_B /KEY2_TABLE_B  /GROUP_TABLE_B  is a unique key.\r\n\r\n\r\nThe generated SQL is as follows (shortened)\r\n\r\n    SELECT\r\n     *\r\n    FROM\r\n         table_a this_\r\n         INNER JOIN table_b b_ ON \r\n            this_.KEY1_TABLE_A = b_.KEY1_TABLE_B AND \r\n            this_.KEY2_TABLE_A = b_.KEY2_TABLE_B AND \r\n            this_.GROUP_TABLE_A = b_.GROUP_TABLE_B  &lt;-- here is the issue: works only with &quot;is not null&quot; on Oracle\r\n     WHERE\r\n         this.XYZ=&lt;some-conditions-here&gt;;\r\n\r\nif i would write the SQL directly it should be something like\r\n\r\n    on ... AND (\r\n                (this_.GROUP_TABLE_A = b_.GROUP_TABLE_B) \r\n             OR (this_.GROUP_TABLE_A is null and b_.GROUP_TABLE_B is null)\r\n               )\r\n\r\nThanks for your thoughts and ideas!","title":"Hibernate: ManyToOne / multiple join columns with one column nullable=true","body":"<p>I hope you can help me on that.</p>\n<p>Table A has a multi-column join to Table B where one of the JoinColumns can be nullable...</p>\n<pre><code>@Entity\n@Table(name = &quot;TABLE_A&quot;)\npublic class TableA {\n\n@ManyToOne(fetch = FetchType.EAGER, optional = false)\n@JoinColumns({ \n        @JoinColumn(name = &quot;KEY1_TABLE_A&quot;, referencedColumnName = &quot;KEY1_TABLE_B&quot;),\n        @JoinColumn(name = &quot;KEY2_TABLE_A&quot;, referencedColumnName = &quot;KEY2_TABLE_B&quot;),\n        @JoinColumn(name = &quot;GROUP_TABLE_A&quot;, referencedColumnName = &quot;GROUP_TABLE_B&quot;, nullable = true)})\nprivate TableB typeB;\n\n}\n</code></pre>\n<p>In TableB object the columns</p>\n<ul>\n<li>TABLE_B#KEY1_TABLE_B (not null)</li>\n<li>TABLE_B#KEY2_TABLE_B (not null)</li>\n<li>TABLE_B#GROUP_TABLE_B (nullable)</li>\n</ul>\n<p>are mapped as Strings.\nThe touple KEY1_TABLE_B /KEY2_TABLE_B  /GROUP_TABLE_B  is a unique key.</p>\n<p>The generated SQL is as follows (shortened)</p>\n<pre><code>SELECT\n *\nFROM\n     table_a this_\n     INNER JOIN table_b b_ ON \n        this_.KEY1_TABLE_A = b_.KEY1_TABLE_B AND \n        this_.KEY2_TABLE_A = b_.KEY2_TABLE_B AND \n        this_.GROUP_TABLE_A = b_.GROUP_TABLE_B  &lt;-- here is the issue: works only with &quot;is not null&quot; on Oracle\n WHERE\n     this.XYZ=&lt;some-conditions-here&gt;;\n</code></pre>\n<p>if i would write the SQL directly it should be something like</p>\n<pre><code>on ... AND (\n            (this_.GROUP_TABLE_A = b_.GROUP_TABLE_B) \n         OR (this_.GROUP_TABLE_A is null and b_.GROUP_TABLE_B is null)\n           )\n</code></pre>\n<p>Thanks for your thoughts and ideas!</p>\n"},{"tags":["java"],"comments":[{"owner":{"display_name":"user6073886"},"score":3,"creation_date":1693321393,"post_id":77001271,"comment_id":135743596,"body_markdown":"This is very likely because of integer over- / underflow. You use values that are very close to integers minimum value, so when you compare them by simply using the `-` operator you will get wrong results.","body":"This is very likely because of integer over- / underflow. You use values that are very close to integers minimum value, so when you compare them by simply using the <code>-</code> operator you will get wrong results."},{"owner":{"display_name":"user6073886"},"score":3,"creation_date":1693321525,"post_id":77001271,"comment_id":135743624,"body_markdown":"Try to change`(a,b)-&gt;a[0]-b[0]` to  `(a,b)-&gt;Integer.compare(a[0], b[0])`  and see if it fixes your problem.","body":"Try to change<code>(a,b)-&gt;a[0]-b[0]</code> to  <code>(a,b)-&gt;Integer.compare(a[0], b[0])</code>  and see if it fixes your problem."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1693334363,"post_id":77001271,"comment_id":135746269,"body_markdown":"@OHGODSPIDERS is right. `-2147483646 - 2147483646` overflows to `4`, which means that the sorting thinks that `2147483646` is __larger__ than `2147483646`.","body":"@OHGODSPIDERS is right. <code>-2147483646 - 2147483646</code> overflows to <code>4</code>, which means that the sorting thinks that <code>2147483646</code> is <b>larger</b> than <code>2147483646</code>."}],"owner":{"account_id":28549447,"reputation":11,"user_id":21854530,"display_name":"Sakshi Rautela"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693321162,"creation_date":1693320640,"question_id":77001271,"body_markdown":"The comparator method is giving positive value first then negative:\r\n\r\n```\r\nimport java.util.Arrays;\r\n\r\nclass FindMinArrowShots {\r\n    public static int findMinArrowShots(int[][] points) {\r\n        if(points.length&lt;=1){\r\n            return points.length;\r\n        }\r\n        Arrays.sort(points,(a,b)-&gt;a[0]-b[0]);\r\n        for(int i=0;i&lt;points.length;i++){\r\n            System.out.println(points[i][0] + &quot;,&quot; + points[i][1]+&quot; &quot;);\r\n\r\n        }\r\n        int compare=Integer.MAX_VALUE;\r\n        int shots=1;\r\n        for (int i=0;i&lt;points.length;i++) {\r\n            if(points[i][0]&gt;compare){\r\n                compare=points[i][1];\r\n                shots++;\r\n            }\r\n            compare=Math.min(compare,points[i][1]);\r\n        }\r\n        return shots;\r\n\r\n    }\r\n    public static void main(String[] args) {\r\n        System.out.println(findMinArrowShots(new int[][]{{-2147483646,-2147483645 } ,{ 2147483646,2147483647 } }));\r\n    }\r\n}\r\n```\r\n\r\ne.g. the input \r\n`(new int[][]{{-2147483646,-2147483645}, {2147483646, 2147483647}})`\r\n\r\nis giving the output \r\n`{{ 2147483646,2147483647 },{-2147483646,-2147483645 }}`\r\n\r\n\r\nAlso the input \r\n`(new int[][]{{-2147483646,-2147483645 }, {2147483646, 2147483647}})`\r\n\r\nis giving the output\r\n`{{ 2147483646,2147483647}, {-2147483646,-2147483645 }}`\r\ninstead of\r\n`{{-2147483646,-2147483645}, { 2147483646, 2147483647 }}` ","title":"Why is the comparator method giving positive value first then negative?","body":"<p>The comparator method is giving positive value first then negative:</p>\n<pre><code>import java.util.Arrays;\n\nclass FindMinArrowShots {\n    public static int findMinArrowShots(int[][] points) {\n        if(points.length&lt;=1){\n            return points.length;\n        }\n        Arrays.sort(points,(a,b)-&gt;a[0]-b[0]);\n        for(int i=0;i&lt;points.length;i++){\n            System.out.println(points[i][0] + &quot;,&quot; + points[i][1]+&quot; &quot;);\n\n        }\n        int compare=Integer.MAX_VALUE;\n        int shots=1;\n        for (int i=0;i&lt;points.length;i++) {\n            if(points[i][0]&gt;compare){\n                compare=points[i][1];\n                shots++;\n            }\n            compare=Math.min(compare,points[i][1]);\n        }\n        return shots;\n\n    }\n    public static void main(String[] args) {\n        System.out.println(findMinArrowShots(new int[][]{{-2147483646,-2147483645 } ,{ 2147483646,2147483647 } }));\n    }\n}\n</code></pre>\n<p>e.g. the input\n<code>(new int[][]{{-2147483646,-2147483645}, {2147483646, 2147483647}})</code></p>\n<p>is giving the output\n<code>{{ 2147483646,2147483647 },{-2147483646,-2147483645 }}</code></p>\n<p>Also the input\n<code>(new int[][]{{-2147483646,-2147483645 }, {2147483646, 2147483647}})</code></p>\n<p>is giving the output\n<code>{{ 2147483646,2147483647}, {-2147483646,-2147483645 }}</code>\ninstead of\n<code>{{-2147483646,-2147483645}, { 2147483646, 2147483647 }}</code></p>\n"},{"tags":["java","sorting","selenium-webdriver"],"owner":{"account_id":8475811,"reputation":21,"user_id":6357584,"display_name":"kc29"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693320864,"creation_date":1693320864,"question_id":77001298,"body_markdown":"I&#39;m trying to write a Selenium test to validate primary and secondary sorting within a table. My table includes a Name and Date/Time column. I need to verify that the date/time column is sorted in descending order and then by Name in ascending order. My code below works except for if the date is the same with a different time. How do I get it to factor in the time? For reference, I&#39;m using Selenium 4.11.0 and Java 11. \r\n\r\nHere is a snippet of my code. \r\n\r\n    public void primaryAndSecondarySorting(List&lt;String&gt; col1, List&lt;String&gt; col2, int sortType){\r\n    List&lt;String&gt; concat = new ArrayList&lt;&gt;();\r\n    for(int i = 0; i &lt; col1.size(); i++){\r\n        concat.add(col1.get(i).concat(&quot;|&quot;).concat(col2.get(i)));\r\n    }       \r\n    \r\n    List&lt;String&gt; expected = new ArrayList&lt;String&gt;(concat);\r\n    Collections.sort(expected, sortType == 1 ? Collections.reverseOrder(String::compareTo) : String::compareTo);\r\n    assertTrue(concat.equals(expected));\r\n}\r\n\r\nOutput:\r\n\r\nconcat{08/03/2023 2:31 PM|ABI, JOXXX, 06/13/2023 1:22 PM|BEE, STXXX, 06/06/2023 10:07 AM|AAXX, JEXXX, 06/06/2023 9:36 AM|BEE, FRXXX}\r\n\r\nexpected{08/03/2023 2:31 PM|ABI, JOXXX, 06/13/2023 1:22 PM|BEE, STXXX, 06/06/2023 9:36 AM|BEE, FRXXX, 06/06/2023 10:07 AM|AAXX, JEXXX}","title":"Selenium Testing of Primary and Secondary sorting with a date","body":"<p>I'm trying to write a Selenium test to validate primary and secondary sorting within a table. My table includes a Name and Date/Time column. I need to verify that the date/time column is sorted in descending order and then by Name in ascending order. My code below works except for if the date is the same with a different time. How do I get it to factor in the time? For reference, I'm using Selenium 4.11.0 and Java 11.</p>\n<p>Here is a snippet of my code.</p>\n<pre><code>public void primaryAndSecondarySorting(List&lt;String&gt; col1, List&lt;String&gt; col2, int sortType){\nList&lt;String&gt; concat = new ArrayList&lt;&gt;();\nfor(int i = 0; i &lt; col1.size(); i++){\n    concat.add(col1.get(i).concat(&quot;|&quot;).concat(col2.get(i)));\n}       \n\nList&lt;String&gt; expected = new ArrayList&lt;String&gt;(concat);\nCollections.sort(expected, sortType == 1 ? Collections.reverseOrder(String::compareTo) : String::compareTo);\nassertTrue(concat.equals(expected));\n</code></pre>\n<p>}</p>\n<p>Output:</p>\n<p>concat{08/03/2023 2:31 PM|ABI, JOXXX, 06/13/2023 1:22 PM|BEE, STXXX, 06/06/2023 10:07 AM|AAXX, JEXXX, 06/06/2023 9:36 AM|BEE, FRXXX}</p>\n<p>expected{08/03/2023 2:31 PM|ABI, JOXXX, 06/13/2023 1:22 PM|BEE, STXXX, 06/06/2023 9:36 AM|BEE, FRXXX, 06/06/2023 10:07 AM|AAXX, JEXXX}</p>\n"},{"tags":["java","unit-testing","junit","mockito","tdd"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1692090445,"post_id":76904635,"comment_id":135574461,"body_markdown":"You can use `Matchers.eq` to match a specific parameter value","body":"You can use <code>Matchers.eq</code> to match a specific parameter value"},{"owner":{"account_id":5759686,"reputation":315,"user_id":4546488,"display_name":"obela06"},"score":0,"creation_date":1692091300,"post_id":76904635,"comment_id":135574605,"body_markdown":"Hi @Jorn, can you show me an example to explain me how can i us Matchers.eq with my two parameters SAVE or UPDATE","body":"Hi @Jorn, can you show me an example to explain me how can i us Matchers.eq with my two parameters SAVE or UPDATE"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1692091395,"post_id":76904635,"comment_id":135574624,"body_markdown":"There are a ton of examples for that available on Google","body":"There are a ton of examples for that available on Google"},{"owner":{"account_id":5759686,"reputation":315,"user_id":4546488,"display_name":"obela06"},"score":0,"creation_date":1692091670,"post_id":76904635,"comment_id":135574673,"body_markdown":"@Jorn, in can do this example : verify( messageInTopic, times(1))sendMessage(result.getId(),eq( Msg.SAVE),eq( Msg.UPDATE)); my sendMessage method must have two arguments , the id and the string Msg.SAVE or Msg.UPDATE.","body":"@Jorn, in can do this example : verify( messageInTopic, times(1))sendMessage(result.getId(),eq( Msg.SAVE),eq( Msg.UPDATE)); my sendMessage method must have two arguments , the id and the string Msg.SAVE or Msg.UPDATE."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1692100252,"post_id":76904635,"comment_id":135576184,"body_markdown":"You are mocking _everything_, even your service! What are you actually testing? Correct, _nothing_ except your mock setup. Your real `CustomerService.saveCustomer` logic is never executed (and thus `sendMessage` never called)","body":"You are mocking <i>everything</i>, even your service! What are you actually testing? Correct, <i>nothing</i> except your mock setup. Your real <code>CustomerService.saveCustomer</code> logic is never executed (and thus <code>sendMessage</code> never called)"}],"answers":[{"tags":[],"owner":{"account_id":29142851,"reputation":21,"user_id":22325451,"display_name":"Keji C"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692133898,"creation_date":1692133898,"answer_id":76909143,"question_id":76904635,"body_markdown":"@knittl has it correct. Your verify call is correct. The problem is you&#39;re mocking the class you&#39;re trying to test. When you call `mock(CustomerService.class)`, Mockito is actually creating a class that stubs all the methods (i.e. overrides them and returns a default):\r\n```\r\nclass CustomerServiceMock extends CustomerService {\r\n  ...\r\n  @Override\r\n  public Customer saveCustomer(Customer savedCustomer) {\r\n    // Stub\r\n    return null;\r\n  }\r\n  ...\r\n}\r\n```\r\nSo `customerService.saveCustomer(customer)` will return null since customerService is actually a CustomerServiceMock. `assertEquals(result, customer)` will fail because of this. The solution is to replace `customerService = mock(CustomerService.class);` with `customerService = new CustomerService(customerRepository, messageInTopic)`. Note that customerRepository and messageInTopic are the mocks you&#39;ve declared.\r\n\r\nHOWEVER, your assertEqual should still fail because of these lines. \r\n```\r\nwhen(customerRepository.findCustomerByEmail(customer.getEmail())\r\n        .thenReturn(Optional.of(customerEntity));\r\nwhen(customerRepository.save(customerEntity)).thenReturn(customerEntity);\r\n```\r\nThese make it so that `saveCustomer(customer)` returns the mock `customerEntity`.\r\n\r\n 1. the `assertEquals` fails because `customerEntity` does not match `customer`.\r\n 2. the `verify(messageInTopic ...` also won&#39;t work because `sendMessage(result.getId(),Msg.SAVE)` is equivalent to `sendMessage(null, Msg.SAVE)`. This is because `customerEntity` is a `mock(Customer.class)`, which means that `customerEntity.getId` looks like this:\r\n```\r\nclass CustomerMock extends Customer {\r\n...\r\n\r\n  public String getId() {\r\n    // Stub\r\n    return null;\r\n  }\r\n...\r\n}\r\n```\r\nThere are many ways to fix this. My recommendation is to just remove `customerEntity` and use `customer` like so:\r\n```\r\nwhen(customerRepository.findCustomerByEmail(customer.getEmail())\r\n        .thenReturn(Optional.of(customer));\r\nwhen(customerRepository.save(customer)).thenReturn(customer);\r\n```\r\nThis will make it so that saveCustomer returns `customer` so that the assertEqual passes. It will also make it so that `savedCustomer.getId()` and `result.getId()` are equal. `findCustomerByEmail` is supposed to return the real customer anyways, so this makes the most sense to me.\r\n\r\n---\r\nAlso just as an FYI: Matchers.eq and just directly using the argument are functionally the same, so it won&#39;t change anything:\r\n```\r\nverify(messageInTopic, times(1)).sendMessage(result.getId(),Msg.SAVE);\r\nverify(messageInTopic, times(1)).sendMessage(Matchers.eq(result.getId()), Matchers.eq(Msg.SAVE));\r\n```\r\nSo why use Matchers.eq at all? Well let&#39;s say you only want to verify that sendMessage is called with Msg.SAVE vs. Msg.UPDATE and you don&#39;t care about the id. The problem is that you CANNOT mix matchers and direct arguments, so this doesn&#39;t work:\r\n```\r\nverify(messageInTopic, times(1)).sendMessage(Matchers.any(), Msg.SAVE);\r\n```\r\nBut this will work:\r\n```\r\nverify(messageInTopic, times(1)).sendMessage(Matchers.any(), Matchers.eq(Msg.SAVE));\r\n```\r\n---\r\nAlso as a second FYI, there are many different ways to verify arguments. Here&#39;s a post with information about all the different ways: https://stackoverflow.com/questions/3555472/mockito-verify-method-arguments. This is especially important if you want to verify arguments that are objects.","title":"How to verify that a specific method was called with this parameter or another parameter using mockito?","body":"<p>@knittl has it correct. Your verify call is correct. The problem is you're mocking the class you're trying to test. When you call <code>mock(CustomerService.class)</code>, Mockito is actually creating a class that stubs all the methods (i.e. overrides them and returns a default):</p>\n<pre><code>class CustomerServiceMock extends CustomerService {\n  ...\n  @Override\n  public Customer saveCustomer(Customer savedCustomer) {\n    // Stub\n    return null;\n  }\n  ...\n}\n</code></pre>\n<p>So <code>customerService.saveCustomer(customer)</code> will return null since customerService is actually a CustomerServiceMock. <code>assertEquals(result, customer)</code> will fail because of this. The solution is to replace <code>customerService = mock(CustomerService.class);</code> with <code>customerService = new CustomerService(customerRepository, messageInTopic)</code>. Note that customerRepository and messageInTopic are the mocks you've declared.</p>\n<p>HOWEVER, your assertEqual should still fail because of these lines.</p>\n<pre><code>when(customerRepository.findCustomerByEmail(customer.getEmail())\n        .thenReturn(Optional.of(customerEntity));\nwhen(customerRepository.save(customerEntity)).thenReturn(customerEntity);\n</code></pre>\n<p>These make it so that <code>saveCustomer(customer)</code> returns the mock <code>customerEntity</code>.</p>\n<ol>\n<li>the <code>assertEquals</code> fails because <code>customerEntity</code> does not match <code>customer</code>.</li>\n<li>the <code>verify(messageInTopic ...</code> also won't work because <code>sendMessage(result.getId(),Msg.SAVE)</code> is equivalent to <code>sendMessage(null, Msg.SAVE)</code>. This is because <code>customerEntity</code> is a <code>mock(Customer.class)</code>, which means that <code>customerEntity.getId</code> looks like this:</li>\n</ol>\n<pre><code>class CustomerMock extends Customer {\n...\n\n  public String getId() {\n    // Stub\n    return null;\n  }\n...\n}\n</code></pre>\n<p>There are many ways to fix this. My recommendation is to just remove <code>customerEntity</code> and use <code>customer</code> like so:</p>\n<pre><code>when(customerRepository.findCustomerByEmail(customer.getEmail())\n        .thenReturn(Optional.of(customer));\nwhen(customerRepository.save(customer)).thenReturn(customer);\n</code></pre>\n<p>This will make it so that saveCustomer returns <code>customer</code> so that the assertEqual passes. It will also make it so that <code>savedCustomer.getId()</code> and <code>result.getId()</code> are equal. <code>findCustomerByEmail</code> is supposed to return the real customer anyways, so this makes the most sense to me.</p>\n<hr />\n<p>Also just as an FYI: Matchers.eq and just directly using the argument are functionally the same, so it won't change anything:</p>\n<pre><code>verify(messageInTopic, times(1)).sendMessage(result.getId(),Msg.SAVE);\nverify(messageInTopic, times(1)).sendMessage(Matchers.eq(result.getId()), Matchers.eq(Msg.SAVE));\n</code></pre>\n<p>So why use Matchers.eq at all? Well let's say you only want to verify that sendMessage is called with Msg.SAVE vs. Msg.UPDATE and you don't care about the id. The problem is that you CANNOT mix matchers and direct arguments, so this doesn't work:</p>\n<pre><code>verify(messageInTopic, times(1)).sendMessage(Matchers.any(), Msg.SAVE);\n</code></pre>\n<p>But this will work:</p>\n<pre><code>verify(messageInTopic, times(1)).sendMessage(Matchers.any(), Matchers.eq(Msg.SAVE));\n</code></pre>\n<hr />\n<p>Also as a second FYI, there are many different ways to verify arguments. Here's a post with information about all the different ways: <a href=\"https://stackoverflow.com/questions/3555472/mockito-verify-method-arguments\">Mockito. Verify method arguments</a>. This is especially important if you want to verify arguments that are objects.</p>\n"},{"tags":[],"owner":{"account_id":748890,"reputation":9396,"user_id":730754,"accept_rate":50,"display_name":"Eduardo Y&#225;&#241;ez Parareda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693320714,"creation_date":1693320714,"answer_id":77001281,"question_id":76904635,"body_markdown":"There are several ways to do it. For example, using captors:\r\n\r\nFirst declare a captor of the argument you want to check in the test class:\r\n\r\n    @Captor\r\n    private ArgumentCaptor&lt;Msg.class&gt; msgCaptor;\r\n\r\nThen in the test, verify and assert the correct value:\r\n\r\n    verify(messageInTopic).sendMessage(result.getId(), msgCaptor.capture());\r\n    // If using org.assertj.core.api.Assertions.assertThat;\r\n    assertThat(msgCaptor.getValue()).isEqualTo(Msg.SAVE);","title":"How to verify that a specific method was called with this parameter or another parameter using mockito?","body":"<p>There are several ways to do it. For example, using captors:</p>\n<p>First declare a captor of the argument you want to check in the test class:</p>\n<pre><code>@Captor\nprivate ArgumentCaptor&lt;Msg.class&gt; msgCaptor;\n</code></pre>\n<p>Then in the test, verify and assert the correct value:</p>\n<pre><code>verify(messageInTopic).sendMessage(result.getId(), msgCaptor.capture());\n// If using org.assertj.core.api.Assertions.assertThat;\nassertThat(msgCaptor.getValue()).isEqualTo(Msg.SAVE);\n</code></pre>\n"}],"owner":{"account_id":5759686,"reputation":315,"user_id":4546488,"display_name":"obela06"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693320714,"creation_date":1692090403,"question_id":76904635,"body_markdown":"How to verify that my sendMessage method is called with Msg.SAVE or with Msg.UPDATE using mockito&#39;s verify method.\r\n\r\n    @Service\r\n    public class CustomerService {\r\n    private final CustomerRepository customerRepository;\r\n    private final SendMessageInTopic messageInTopic;\r\n    public CustomerService (CustomerRepository customerRepository,  SendMessageInTopic messageInTopic) \r\n     {\r\n        this.customerRepository = customerRepository;\r\n        this.messageInTopic= messageInTopic;\r\n     }\r\n    \r\n    public Customer saveCustomer(Customer savedCustomer) {\r\n            Customer customer =    customerRepository\r\n                    .findCustomerByEmail(savedCustomer.getEmail());\r\n    \r\n            if(customer != null) {\r\n                customer.setFirstName(savedCustomer.getFirstName());\r\n                customer.setLastName(savedCustomer.getLastName());\r\n                customer.setPhoneNumber(savedCustomer.getPhoneNumber());\r\n                messageInTopic.sendMessage(savedCustomer.getId(),Msg.SAVE)\r\n            } else {\r\n                customer = new Customer();\r\n                customer.setFirstName(savedCustomer.getFirstName());\r\n                customer.setLastName(savedCustomer.getLastName());\r\n                customer.setEmail(savedCustomer.getEmail());\r\n                customer.setPhoneNumber(savedCustomer.getPhoneNumber());\r\n                messageInTopic.sendMessage(savedCustomer.getId(),Msg.Update)\r\n            }\r\n            return customerRepository.save(customer);\r\n        }\r\n    }\r\n\r\n    public class CustomerServiceTest{\r\n    private final CustomerRepository customerRepository = mock(CustomerRepository.class);\r\n    private final CustomerService customerService = mock(CustomerService.class);\r\n    private final SendMessageInTopic  messageInTopic = mock(SendMessageInTopic.class);\r\n    private final CustomerMapper customerMapper = mock(CustomerMapper.class);\r\n        @Test\r\n        void whenSaveCustomerThenMsgSAVEOrUPDATE() {\r\n        // Given\r\n    \r\n        final var customerId = &quot;123456&quot;;\r\n        final var customer =\r\n            new CustomerDto(ensUserId, &#39;james&#39;, &#39;GREWAN&#39;, &#39;32766666&#39;, &#39;j.grewan@gree.com&#39;);\r\n    \r\n        final customerEntity = mock(Customer.class);\r\n    \r\n        when(customerRepository.findCustomerByEmail(customer.getEmail())\r\n            .thenReturn(Optional.of(customerEntity));\r\n        when(customerRepository.save(customerEntity)).thenReturn(customerEntity);\r\n        when(customerMapper.toDto(customerEntity)).thenReturn(customer);\r\n    \r\n        // When\r\n    \r\n        final var result = customrService.saveCustomer(customer);\r\n    \r\n        // Then\r\n    \r\n        assertEquals(result, customer);\r\n        verify(messageInTopic, times(1)).sendMessage(result.getId(),Msg.SAVE);\r\n      }\r\n    }\r\n\r\n**verify(messageInTopic, times(1)).sendMessage(result.getId(),Msg.SAVE);** : This is where I will test if I call my sendMessage method with the Msg.SAVE parameter in the create case or the Msg.UPDATE parameter in the update case.\r\n\r\nhow to do this test please ?\r\n","title":"How to verify that a specific method was called with this parameter or another parameter using mockito?","body":"<p>How to verify that my sendMessage method is called with Msg.SAVE or with Msg.UPDATE using mockito's verify method.</p>\n<pre><code>@Service\npublic class CustomerService {\nprivate final CustomerRepository customerRepository;\nprivate final SendMessageInTopic messageInTopic;\npublic CustomerService (CustomerRepository customerRepository,  SendMessageInTopic messageInTopic) \n {\n    this.customerRepository = customerRepository;\n    this.messageInTopic= messageInTopic;\n }\n\npublic Customer saveCustomer(Customer savedCustomer) {\n        Customer customer =    customerRepository\n                .findCustomerByEmail(savedCustomer.getEmail());\n\n        if(customer != null) {\n            customer.setFirstName(savedCustomer.getFirstName());\n            customer.setLastName(savedCustomer.getLastName());\n            customer.setPhoneNumber(savedCustomer.getPhoneNumber());\n            messageInTopic.sendMessage(savedCustomer.getId(),Msg.SAVE)\n        } else {\n            customer = new Customer();\n            customer.setFirstName(savedCustomer.getFirstName());\n            customer.setLastName(savedCustomer.getLastName());\n            customer.setEmail(savedCustomer.getEmail());\n            customer.setPhoneNumber(savedCustomer.getPhoneNumber());\n            messageInTopic.sendMessage(savedCustomer.getId(),Msg.Update)\n        }\n        return customerRepository.save(customer);\n    }\n}\n\npublic class CustomerServiceTest{\nprivate final CustomerRepository customerRepository = mock(CustomerRepository.class);\nprivate final CustomerService customerService = mock(CustomerService.class);\nprivate final SendMessageInTopic  messageInTopic = mock(SendMessageInTopic.class);\nprivate final CustomerMapper customerMapper = mock(CustomerMapper.class);\n    @Test\n    void whenSaveCustomerThenMsgSAVEOrUPDATE() {\n    // Given\n\n    final var customerId = &quot;123456&quot;;\n    final var customer =\n        new CustomerDto(ensUserId, 'james', 'GREWAN', '32766666', 'j.grewan@gree.com');\n\n    final customerEntity = mock(Customer.class);\n\n    when(customerRepository.findCustomerByEmail(customer.getEmail())\n        .thenReturn(Optional.of(customerEntity));\n    when(customerRepository.save(customerEntity)).thenReturn(customerEntity);\n    when(customerMapper.toDto(customerEntity)).thenReturn(customer);\n\n    // When\n\n    final var result = customrService.saveCustomer(customer);\n\n    // Then\n\n    assertEquals(result, customer);\n    verify(messageInTopic, times(1)).sendMessage(result.getId(),Msg.SAVE);\n  }\n}\n</code></pre>\n<p><strong>verify(messageInTopic, times(1)).sendMessage(result.getId(),Msg.SAVE);</strong> : This is where I will test if I call my sendMessage method with the Msg.SAVE parameter in the create case or the Msg.UPDATE parameter in the update case.</p>\n<p>how to do this test please ?</p>\n"},{"tags":["java","asynchronous","nio","java-io"],"comments":[{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":1,"creation_date":1594456061,"post_id":62842128,"comment_id":111137073,"body_markdown":"Taking aside the fact that NIO could be implemented more efficiently by the JDK in the future or on some platforms, there is still the aspect of &quot;what is the benefit of providing a facility as part of the standard library when I and everyone else can just implement the same thing independently by myself&quot;. Unless you can do better than the standard library, it would be a waste of time. Even if you can do better, it would need to be quite a bit better in order to justify the effort.","body":"Taking aside the fact that NIO could be implemented more efficiently by the JDK in the future or on some platforms, there is still the aspect of &quot;what is the benefit of providing a facility as part of the standard library when I and everyone else can just implement the same thing independently by myself&quot;. Unless you can do better than the standard library, it would be a waste of time. Even if you can do better, it would need to be quite a bit better in order to justify the effort."},{"owner":{"account_id":2453365,"reputation":333,"user_id":2139101,"accept_rate":95,"display_name":"Peter"},"score":0,"creation_date":1594459577,"post_id":62842128,"comment_id":111137944,"body_markdown":"@Thilo I didn&#39;t mean to reimplement the wheel, but for example, encrypting a file via Streams and offloading it to a thread pool seems 100 times easier than implementing encryption using async callbacks. The future JDK improvement is a valid argument, but right now what is the benefit?","body":"@Thilo I didn&#39;t mean to reimplement the wheel, but for example, encrypting a file via Streams and offloading it to a thread pool seems 100 times easier than implementing encryption using async callbacks. The future JDK improvement is a valid argument, but right now what is the benefit?"},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1594461506,"post_id":62842128,"comment_id":111138413,"body_markdown":"That is a very odd argument. I would expect that streaming library to take care of efficient use of NIO under the hood already, and that should be 100 times easier than manually messing around with a thread pool. If encrypting a file via streams takes more than a couple of lines of code then I would start looking for another library.","body":"That is a very odd argument. I would expect that streaming library to take care of efficient use of NIO under the hood already, and that should be 100 times easier than manually messing around with a thread pool. If encrypting a file via streams takes more than a couple of lines of code then I would start looking for another library."},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":3,"creation_date":1594462472,"post_id":62842128,"comment_id":111138649,"body_markdown":"Now that I am thinking about how I would actually do that, no such library comes to mind. Could be that I have been in Scala-land for too long. Maybe there is a hole to be filled. But my point was that NIO is not something to use directly, but something that libraries like Netty or Reactive Streams would use internally.","body":"Now that I am thinking about how I would actually do that, no such library comes to mind. Could be that I have been in Scala-land for too long. Maybe there is a hole to be filled. But my point was that NIO is not something to use directly, but something that libraries like Netty or Reactive Streams would use internally."},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":3,"creation_date":1594463674,"post_id":62842128,"comment_id":111138939,"body_markdown":"After Googling for a while, I only found this in the Reactor library: https://projectreactor.io/docs/netty/release/api/reactor/netty/ByteBufFlux.html#fromPath-java.nio.file.Path-   Creates a Flux of buffers being read from a file path using NIO via Netty.  So yeah, unless you are already using this Reactor library this is a bit too much effort.","body":"After Googling for a while, I only found this in the Reactor library: <a href=\"https://projectreactor.io/docs/netty/release/api/reactor/netty/ByteBufFlux.html#fromPath-java.nio.file.Path-\" rel=\"nofollow noreferrer\">projectreactor.io/docs/netty/release/api/reactor/netty/&hellip;</a>   Creates a Flux of buffers being read from a file path using NIO via Netty.  So yeah, unless you are already using this Reactor library this is a bit too much effort."},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1594464145,"post_id":62842128,"comment_id":111139043,"body_markdown":"Akka Streams also does this: https://doc.akka.io/docs/akka/current/stream/stream-io.html#streaming-file-io","body":"Akka Streams also does this: <a href=\"https://doc.akka.io/docs/akka/current/stream/stream-io.html#streaming-file-io\" rel=\"nofollow noreferrer\">doc.akka.io/docs/akka/current/stream/&hellip;</a>"},{"owner":{"account_id":2453365,"reputation":333,"user_id":2139101,"accept_rate":95,"display_name":"Peter"},"score":0,"creation_date":1594464378,"post_id":62842128,"comment_id":111139098,"body_markdown":"@Thilo staying with the encryption example, with AsynchronousFileChannel it took me like 150 lines of code, messing with cipher update, cipher doFinal, maintaining read/write position, etc, while it&#39;s two lines with CipherOutputStream. I&#39;m using Reactor + Spring, but sometimes their implementations are surprising as well, like FilePart&#39;s &quot;reactive&quot; transferTo method: https://github.com/spring-projects/spring-framework/blob/b16f6fa4564658615363f9206edf726a492b6083/spring-web/src/main/java/org/springframework/http/codec/multipart/SynchronossPartHttpMessageReader.java#L467","body":"@Thilo staying with the encryption example, with AsynchronousFileChannel it took me like 150 lines of code, messing with cipher update, cipher doFinal, maintaining read/write position, etc, while it&#39;s two lines with CipherOutputStream. I&#39;m using Reactor + Spring, but sometimes their implementations are surprising as well, like FilePart&#39;s &quot;reactive&quot; transferTo method: <a href=\"https://github.com/spring-projects/spring-framework/blob/b16f6fa4564658615363f9206edf726a492b6083/spring-web/src/main/java/org/springframework/http/codec/multipart/SynchronossPartHttpMessageReader.java#L467\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-framework/blob/&hellip;</a>"},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":2,"creation_date":1594465510,"post_id":62842128,"comment_id":111139402,"body_markdown":"&quot;Akka Streams also does this&quot;. Well, maybe not. The documentation talks about having a dedicated pool for blocking IO, so probably no NIO in there either :-/   Could be that the pragmatic approach of not doing either, but just have straight blocking IO on the main thread is good enough? How hard can you hit that disk before it becomes a bottleneck for parallelism that you cannot get past anyway?","body":"&quot;Akka Streams also does this&quot;. Well, maybe not. The documentation talks about having a dedicated pool for blocking IO, so probably no NIO in there either :-/   Could be that the pragmatic approach of not doing either, but just have straight blocking IO on the main thread is good enough? How hard can you hit that disk before it becomes a bottleneck for parallelism that you cannot get past anyway?"},{"owner":{"account_id":2453365,"reputation":333,"user_id":2139101,"accept_rate":95,"display_name":"Peter"},"score":0,"creation_date":1594466314,"post_id":62842128,"comment_id":111139596,"body_markdown":"This is the loop I&#39;ve got into a few weeks ago, I hope I didn&#39;t ruin your life as well. :D Thank you for reading and commenting this much about it.","body":"This is the loop I&#39;ve got into a few weeks ago, I hope I didn&#39;t ruin your life as well. :D Thank you for reading and commenting this much about it."},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":2,"creation_date":1594466419,"post_id":62842128,"comment_id":111139617,"body_markdown":"Start with whatever is the easiest to program, understand, debug. Focus on the application logic. Most likely it will be perfectly fine performance-wise. If not, only then go in and revisit.","body":"Start with whatever is the easiest to program, understand, debug. Focus on the application logic. Most likely it will be perfectly fine performance-wise. If not, only then go in and revisit."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1594988568,"post_id":62842128,"comment_id":111326974,"body_markdown":"As Knuth is quoted as saying *“The real problem is that programmers have spent far too much time worrying about efficiency in the wrong places and at the wrong times; premature optimization is the root of all evil (or at least most of it) in programming.”* - Read more about premature optimization [here](https://stackify.com/premature-optimization-evil).","body":"As Knuth is quoted as saying <i>“The real problem is that programmers have spent far too much time worrying about efficiency in the wrong places and at the wrong times; premature optimization is the root of all evil (or at least most of it) in programming.”</i> - Read more about premature optimization <a href=\"https://stackify.com/premature-optimization-evil\" rel=\"nofollow noreferrer\">here</a>."},{"owner":{"account_id":4787547,"reputation":5568,"user_id":3867574,"accept_rate":43,"display_name":"Serg M Ten"},"score":1,"creation_date":1595197291,"post_id":62842128,"comment_id":111383511,"body_markdown":"I benchmarked it myself some time ago and found that Async File NIO has no obvious performance advantages but quite a few added complexity. See results [here](https://stackoverflow.com/questions/4716503/reading-a-plain-text-file-in-java/40597140#40597140).","body":"I benchmarked it myself some time ago and found that Async File NIO has no obvious performance advantages but quite a few added complexity. See results <a href=\"https://stackoverflow.com/questions/4716503/reading-a-plain-text-file-in-java/40597140#40597140\">here</a>."},{"owner":{"account_id":219684,"reputation":37267,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"score":0,"creation_date":1603982917,"post_id":62842128,"comment_id":114213180,"body_markdown":"This is a duplicate of [non-blocking IO vs async IO and implementation in Java](https://stackoverflow.com/q/25099640/476716)","body":"This is a duplicate of <a href=\"https://stackoverflow.com/q/25099640/476716\">non-blocking IO vs async IO and implementation in Java</a>"}],"answers":[{"comments":[{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1604025902,"post_id":64593351,"comment_id":114228281,"body_markdown":"when `loom` ends up in the mainstream, this paradigm of asynchronous might be entirely irrelevant, one way or the way. 1+ still","body":"when <code>loom</code> ends up in the mainstream, this paradigm of asynchronous might be entirely irrelevant, one way or the way. 1+ still"}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1666966890,"creation_date":1603982396,"answer_id":64593351,"question_id":62842128,"body_markdown":"It&#39;s mostly about handrolling your buffer sizes. In that way, you can save a _lot_ of memory, but only if you&#39;re trying to handle a lot (many thousands) of simultaneous connections.\r\n\r\nFirst some simplifications and caveats:\r\n\r\n* I&#39;m going to assume a non-boneheaded scheduler. There are some OSes that just do a really poor job of juggling thousands of threads. There is no inherent reason that an OS will fall down when a user process fires up 1000 full threads, but some OSes do anyway. NIO can help there, but that&#39;s a bit of an unfair comparison - usually you should just upgrade your OS. Pretty much any linux, and I believe win10 definitely don&#39;t have issues with this many threads, but some old linux port on an ARM hack, or something like windows 7 - that might cause problems.\r\n\r\n* I&#39;m going to assume you&#39;re using NIO to deal with incoming TCP/IP connections (e.g. a web server, or IRC server, something like that). The same principles apply if you&#39;re trying to read 1000 files simultaneously, but note that you do need to think about where the bottleneck lies. For example, reading 1000 files simultaneously from a single disk is a pointless exercise - that just slows things down as you&#39;re making life harder for the disk (this counts double if it&#39;s a spinning disk). For networking, especially if you&#39;re on a fast pipe, the bottleneck is not the pipe or your network card, which makes &#39;handle 1000s of connections simultaneously&#39; a good example. In fact, I&#39;m going to use as example a chat server where 1000 people all connect to one giant chatroom. The job is to receive text messages from anybody connected and send them out to everybody.\r\n\r\n## The synchronous model\r\n\r\nIn the synchronous model, life is relatively simple: We&#39;ll make 2001 threads:\r\n\r\n* 1 thread to listen for new incoming TCP connections on a socket. This thread will create the 2 &#39;handler&#39; threads and go back to listening for new connections.\r\n* per user a thread that reads from the socket until it sees an enter symbol. If it sees this, it will take all text received so far, and notify all 1000 &#39;sender&#39; threads with this new string that needs to be sent out.\r\n* per user a thread that will send out the strings in a buffer of &#39;text messages to send out&#39;. If there&#39;s nothing left to send it will wait until a new message is delivered to it.\r\n\r\nEach individual moving piece is easily programmed. Some tactical use of a single `java.util.concurrent` datatype, or even some basic `synchronized()` blocks will ensure we don&#39;t run into any race conditions. I envision maybe 1 page of code for each piece.\r\n\r\nBut, we do have 2001 threads. Each thread has a stack. In JVMs, each thread gets the same size stack [EDITED]unless you explicitly define the stack size when you create a [thread](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html#%3Cinit%3E(java.lang.ThreadGroup,java.lang.Runnable,java.lang.String,long)) - you should absolutely be doing this if you&#39;re going to spin off 2000 threads like in this example, and make them as small as you can reasonably get away with [/EDITED], by default you configure how large these stacks are with the `-Xss` parameter. You can make them as small as, say, 128k, but even then that&#39;s still `128k * 2001` = ~256MB  __just for the stacks__ ([EDIT] These days you can make them a lot smaller, maybe 32k even - this synchronous model would work totally fine, you need a lot more threads before this model becomes untenable![/EDIT]), we haven&#39;t covered any of the heap (all those strings that people are sending back and forth, stuck in send queues), or the app itself, or the JVM basics.\r\n\r\nUnder the hood, what&#39;s going to happen to the CPU which has, say, 16 cores, is that there are 2001 threads and each thread has its own set of conditions which would result in it waking up. For the receivers it&#39;s data coming in over the pipe, for the senders its either the network card indicating it is ready to send another packet (in case it&#39;s waiting to push data down the line), or waiting for a `obj.wait()` call to get notified (the threads that receive text from the users would add that string to all the queues of each of the 1000 senders and then notify them all).\r\n\r\nThat&#39;s a lot of context switching: A thread wakes up, sees `Joe: Hello, everybody, good morning!` in the buffer, turns that into a packet, blits it to the memory buffer of the network card (this is all extremely fast, it&#39;s just CPU and memory interacting), and will fall back asleep, for example. The CPU core will then move on and find another thread that is ready to do some work.\r\n\r\nCPU cores have on-core caches; in fact, there&#39;s a hierarchy. There&#39;s main RAM, then L3 cache, L2 cache, on-core cache - and a CPU cannot really operate on RAM anymore in modern architecture, they need for the infrastructure around the chip to realize that it needs to read or write to memory that is on a page that isn&#39;t in one of these caches, then the CPU will just freeze for a while until the infra can copy over that page of RAM into one of the caches.\r\n\r\nEvery time a core switches, it is highly likely that it needs to load a new page, and that can take many hundreds of cycles where the CPU is twiddling its thumbs. A badly written scheduler would cause a lot more of this than is needed. If you read about advantages of NIO, often &#39;those context switches are expensive!&#39; comes up - this is more or less what they are talking about (but, spoiler alert: The async model also suffers from this!)\r\n\r\n## The async model\r\n\r\nIn the synchronous model, the job of figuring out which of the 1000 connected users is ready for stuff to happen is &#39;stuck&#39; in threads waiting on events; the OS is juggling those 1000 threads and will wake up threads when there&#39;s stuff to do.\r\n\r\nIn the async model we switch it up: We still have threads, but far fewer (one to two for each core is a good idea). That&#39;s far fewer threads than connected users: Each thread is responsible for _ALL_ the connections, instead of only for 1 connection. That means each thread will do the job of checking which of the connected users have stuff to do (their network pipe has data to read, or is ready for us to push more data down the wire to them).\r\n\r\nThe difference is in what the thread asks the OS:\r\n\r\n* [synchronous] Okay, I want to go to sleep until this one connection sends data to me.\r\n* [async] Okay, I want to go to sleep until one of these thousand connections either sends data to me, or I registered that I&#39;m waiting for the network buffer to clear because I have more data to send, and the network is clear, or the socketlistener has a new user connecting.\r\n\r\nThere is no inherent speed or design advantage to either model - we&#39;re just shifting the job around between app and OS.\r\n\r\nOne advantage often touted for NIO is that you don&#39;t need to &#39;worry&#39; about race conditions, synchronizing, concurrency-safe data structures. This is a commonly repeated falsehood: CPUs have many cores, so if your non-blocking app only ever makes one thread, the vast majority of your CPU will just sit there idle doing nothing, that is highly inefficient.\r\n\r\nThe great upside here is: Hey, only 16 threads. That&#39;s `128k * 16` = 2MB of stack space. That&#39;s in __stark__ contrast to the 256MB that the sync model took! However, a different thing now happens: In the synchronous model, a lot of state info about a connection is &#39;stuck&#39; in that stack. For example, if I write this:\r\n\r\nLet&#39;s assume the protocol is: client sends 1 int, it&#39;s the # of bytes in the message, and then that many bytes, which is the message, UTF-8 encoded.\r\n\r\n```\r\n// synchronous code\r\nint size = readInt();\r\nbyte[] buffer = new byte[size];\r\nint pos = 0;\r\nwhile (pos &lt; size) {\r\n    int r = input.read(buffer, pos, size - pos);\r\n    if (r == -1) throw new IOException(&quot;Client hung up&quot;);\r\n    pos += r;\r\n}\r\nsendMessage(username + &quot;: &quot; + new String(buffer, StandardCharsets.UTF_8));\r\n```\r\n\r\nWhen running this, the thread is most likely going to end up blocking on that `read` call to the inputstream, as that will involve talking to the network card and moving some bytes from its memory buffers into this process&#39;s buffers to get the job done. Whilst its frozen, the pointer to that byte array, the `size` variable, `r`, etcetera are all in stack.\r\n\r\nIn the async model, it doesn&#39;t work that way. In the async model, you get data given to you, and you get given whatever is there, and you must then handle this because if you don&#39;t, that data is gone.\r\n\r\nSo, in the async model you get, say, half of the `Hello everybody, good morning!` message. You get the bytes that represent `Hello eve` and that&#39;s it. For that matter, you got the total byte length of this message already and need to remember that, as well as the half you received so far. You need to __explicitly__ make an object and store this stuff somewhere.\r\n\r\n__Here&#39;s the key point: With the synchronous model, a lot of your state info is in stacks. In the async model, you make the data structures to store this state yourself__.\r\n\r\nAnd because you make these yourself, they can be dynamically sized, and generally far smaller: You just need ~4 bytes to store size, another 8 or so for a pointer to the byte array, a handful for the username pointer and that&#39;s about it. That&#39;s orders of magnitude less than the `128k` that stack is taking to store that stuff.\r\n\r\nNow, another theoretical benefit is that you don&#39;t get the context switch - instead of the CPU and OS having to swap to another thread when a read() call has no data left to give you because the network card is waiting for data, it&#39;s now the thread&#39;s job to go: Okay, no problem - I shall move on to another context object.\r\n\r\nBut that&#39;s a red herring - it doesn&#39;t matter if the OS is juggling 1000 context concepts (1000 threads), or if your application is juggling 1000 context concepts (these &#39;tracker&#39; objects). It&#39;s still 1000 connections and everybody chatting away, so every time your thread moves on to check another context object and fill its byte array with more data, most likely it&#39;s still a cache miss and the CPU is still going to twiddle its thumbs for hundreds of cycles whilst the hardware infrastructure pulls the appropriate page from main RAM into the caches. So that part is not nearly as relevant, though the fact that the context objects are smaller is going to reduce cache misses somewhat.\r\n\r\nThat gets us back to: The primary benefit is that you get to handroll those buffers, and in so doing, you can both make them far smaller, and size them dynamically.\r\n\r\n## The downsides of async\r\n\r\nThere&#39;s a reason we have garbage collected languages. There is a reason we don&#39;t write all our code in assembler. Carefully managing all these finicky details by hand is usually not worth it. And so it is here: Often that benefit is not worth it. But just like GFX drivers and kernel cores have a ton of machine code, and drivers tend to be written in hand-managed memory environments, there are cases where careful management of those buffers is very much worth it.\r\n\r\nThe cost is high, though.\r\n\r\nImagine a theoretical programming language with the following properties:\r\n\r\n* Each function is either red or blue.\r\n* A red function can call blue or red functions, no problem.\r\n* A blue function can also call both, but if a blue function calls a red function, you have a bug that is almost impossible to test for but will kill your performance on realistic loads. Blue can call red functions only by going out of their way to define both the call and the response to the result of the call separately and injecting this pair into a queue.\r\n* functions tend not to document their colour.\r\n* Some system functions are red.\r\n* Your function must be blue.\r\n\r\nThis seems like an __utterly boneheaded disaster of a language__, no? _But that&#39;s exactly the world you live in when writing async code!_\r\n\r\nThe problem is: Within async code, you cannot call a blocking function because if it blocks, hey, that&#39;s one of only 16 threads that is now blocked, and that immediately means your CPU is now doing 1/16ths nothing. If all 16 threads end up in that blocking part the CPU is literally doing nothing at all and everything is frozen. You just can&#39;t do it.\r\n\r\nThere is a ton of stuff that blocks: Opening files, even touching a class never touched before (that class needs to be loaded from the jar from disk, verified, and linked), so much as looking at a database, doing a quick network check, sometimes asking for the current time will do it. Even logging at debug level might do it (if that ends up writing to disk, voila - blocking operation).\r\n\r\nDo you know of any logging framework that either promises to fire up a separate thread to process logs onto disk, or goes out of its way to document if it blocks or not? I don&#39;t know of any, either.\r\n\r\nSo, methods that block are red, your async handlers are blue. Tada - that&#39;s why async is so incredibly difficult to truly get right.\r\n\r\n## The executive summary\r\n\r\nWriting async code well is a real pain due to the coloured functions issue. It&#39;s also not on its face faster - in fact, it&#39;s usually slower. Async can win big if you want to run many thousands of operations simultaneously and the amount of storage required to track the relevant state data for each individual operation is small, because you get to handroll that buffer instead of being forced into relying on 1 stack per thread.\r\n\r\nIf you have some money left over, well, a developer salary buys you __a lot of sticks of RAM__, so usually the right option is to go with threads and just opt for a box with a lot of RAM if you want to handle many simultaneous connections.\r\n\r\nNote that sites like youtube, facebook, etc effectively take the &#39;toss money at RAM&#39; solution - they shard their product so that many simple and cheap computers work together to serve up a website. Don&#39;t knock it.\r\n\r\nExamples where async can really shine is the chat app I&#39;ve described in this answer. Another is, say, you receiving a short message, and all you do is hash it, encrypt the hash, and respond with it (To hash, you don&#39;t need to remember all the bytes flowing in, you can just toss each byte into the hasher which has constant memory load, and when the bytes are all sent, voila, you have your hash). You&#39;re looking for little state per operation and not much CPU power either relative to the speed at which the data is provided.\r\n\r\nSome bad examples: are a system where you need to do a bunch of DB queries (you&#39;d need an async way to talk to your DB, and in general DBs are bad at trying to run 1000 queries simultaneously), a bitcoin mining operation (the bitcoin mining is the bottleneck, there&#39;s no point trying to handle thousands of connections simultaneously on one machine).\r\n","title":"What&#39;s the benefit of Async File NIO in Java?","body":"<p>It's mostly about handrolling your buffer sizes. In that way, you can save a <em>lot</em> of memory, but only if you're trying to handle a lot (many thousands) of simultaneous connections.</p>\n<p>First some simplifications and caveats:</p>\n<ul>\n<li><p>I'm going to assume a non-boneheaded scheduler. There are some OSes that just do a really poor job of juggling thousands of threads. There is no inherent reason that an OS will fall down when a user process fires up 1000 full threads, but some OSes do anyway. NIO can help there, but that's a bit of an unfair comparison - usually you should just upgrade your OS. Pretty much any linux, and I believe win10 definitely don't have issues with this many threads, but some old linux port on an ARM hack, or something like windows 7 - that might cause problems.</p>\n</li>\n<li><p>I'm going to assume you're using NIO to deal with incoming TCP/IP connections (e.g. a web server, or IRC server, something like that). The same principles apply if you're trying to read 1000 files simultaneously, but note that you do need to think about where the bottleneck lies. For example, reading 1000 files simultaneously from a single disk is a pointless exercise - that just slows things down as you're making life harder for the disk (this counts double if it's a spinning disk). For networking, especially if you're on a fast pipe, the bottleneck is not the pipe or your network card, which makes 'handle 1000s of connections simultaneously' a good example. In fact, I'm going to use as example a chat server where 1000 people all connect to one giant chatroom. The job is to receive text messages from anybody connected and send them out to everybody.</p>\n</li>\n</ul>\n<h2>The synchronous model</h2>\n<p>In the synchronous model, life is relatively simple: We'll make 2001 threads:</p>\n<ul>\n<li>1 thread to listen for new incoming TCP connections on a socket. This thread will create the 2 'handler' threads and go back to listening for new connections.</li>\n<li>per user a thread that reads from the socket until it sees an enter symbol. If it sees this, it will take all text received so far, and notify all 1000 'sender' threads with this new string that needs to be sent out.</li>\n<li>per user a thread that will send out the strings in a buffer of 'text messages to send out'. If there's nothing left to send it will wait until a new message is delivered to it.</li>\n</ul>\n<p>Each individual moving piece is easily programmed. Some tactical use of a single <code>java.util.concurrent</code> datatype, or even some basic <code>synchronized()</code> blocks will ensure we don't run into any race conditions. I envision maybe 1 page of code for each piece.</p>\n<p>But, we do have 2001 threads. Each thread has a stack. In JVMs, each thread gets the same size stack [EDITED]unless you explicitly define the stack size when you create a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html#%3Cinit%3E(java.lang.ThreadGroup,java.lang.Runnable,java.lang.String,long)\" rel=\"nofollow noreferrer\">thread</a> - you should absolutely be doing this if you're going to spin off 2000 threads like in this example, and make them as small as you can reasonably get away with [/EDITED], by default you configure how large these stacks are with the <code>-Xss</code> parameter. You can make them as small as, say, 128k, but even then that's still <code>128k * 2001</code> = ~256MB  <strong>just for the stacks</strong> ([EDIT] These days you can make them a lot smaller, maybe 32k even - this synchronous model would work totally fine, you need a lot more threads before this model becomes untenable![/EDIT]), we haven't covered any of the heap (all those strings that people are sending back and forth, stuck in send queues), or the app itself, or the JVM basics.</p>\n<p>Under the hood, what's going to happen to the CPU which has, say, 16 cores, is that there are 2001 threads and each thread has its own set of conditions which would result in it waking up. For the receivers it's data coming in over the pipe, for the senders its either the network card indicating it is ready to send another packet (in case it's waiting to push data down the line), or waiting for a <code>obj.wait()</code> call to get notified (the threads that receive text from the users would add that string to all the queues of each of the 1000 senders and then notify them all).</p>\n<p>That's a lot of context switching: A thread wakes up, sees <code>Joe: Hello, everybody, good morning!</code> in the buffer, turns that into a packet, blits it to the memory buffer of the network card (this is all extremely fast, it's just CPU and memory interacting), and will fall back asleep, for example. The CPU core will then move on and find another thread that is ready to do some work.</p>\n<p>CPU cores have on-core caches; in fact, there's a hierarchy. There's main RAM, then L3 cache, L2 cache, on-core cache - and a CPU cannot really operate on RAM anymore in modern architecture, they need for the infrastructure around the chip to realize that it needs to read or write to memory that is on a page that isn't in one of these caches, then the CPU will just freeze for a while until the infra can copy over that page of RAM into one of the caches.</p>\n<p>Every time a core switches, it is highly likely that it needs to load a new page, and that can take many hundreds of cycles where the CPU is twiddling its thumbs. A badly written scheduler would cause a lot more of this than is needed. If you read about advantages of NIO, often 'those context switches are expensive!' comes up - this is more or less what they are talking about (but, spoiler alert: The async model also suffers from this!)</p>\n<h2>The async model</h2>\n<p>In the synchronous model, the job of figuring out which of the 1000 connected users is ready for stuff to happen is 'stuck' in threads waiting on events; the OS is juggling those 1000 threads and will wake up threads when there's stuff to do.</p>\n<p>In the async model we switch it up: We still have threads, but far fewer (one to two for each core is a good idea). That's far fewer threads than connected users: Each thread is responsible for <em>ALL</em> the connections, instead of only for 1 connection. That means each thread will do the job of checking which of the connected users have stuff to do (their network pipe has data to read, or is ready for us to push more data down the wire to them).</p>\n<p>The difference is in what the thread asks the OS:</p>\n<ul>\n<li>[synchronous] Okay, I want to go to sleep until this one connection sends data to me.</li>\n<li>[async] Okay, I want to go to sleep until one of these thousand connections either sends data to me, or I registered that I'm waiting for the network buffer to clear because I have more data to send, and the network is clear, or the socketlistener has a new user connecting.</li>\n</ul>\n<p>There is no inherent speed or design advantage to either model - we're just shifting the job around between app and OS.</p>\n<p>One advantage often touted for NIO is that you don't need to 'worry' about race conditions, synchronizing, concurrency-safe data structures. This is a commonly repeated falsehood: CPUs have many cores, so if your non-blocking app only ever makes one thread, the vast majority of your CPU will just sit there idle doing nothing, that is highly inefficient.</p>\n<p>The great upside here is: Hey, only 16 threads. That's <code>128k * 16</code> = 2MB of stack space. That's in <strong>stark</strong> contrast to the 256MB that the sync model took! However, a different thing now happens: In the synchronous model, a lot of state info about a connection is 'stuck' in that stack. For example, if I write this:</p>\n<p>Let's assume the protocol is: client sends 1 int, it's the # of bytes in the message, and then that many bytes, which is the message, UTF-8 encoded.</p>\n<pre><code>// synchronous code\nint size = readInt();\nbyte[] buffer = new byte[size];\nint pos = 0;\nwhile (pos &lt; size) {\n    int r = input.read(buffer, pos, size - pos);\n    if (r == -1) throw new IOException(&quot;Client hung up&quot;);\n    pos += r;\n}\nsendMessage(username + &quot;: &quot; + new String(buffer, StandardCharsets.UTF_8));\n</code></pre>\n<p>When running this, the thread is most likely going to end up blocking on that <code>read</code> call to the inputstream, as that will involve talking to the network card and moving some bytes from its memory buffers into this process's buffers to get the job done. Whilst its frozen, the pointer to that byte array, the <code>size</code> variable, <code>r</code>, etcetera are all in stack.</p>\n<p>In the async model, it doesn't work that way. In the async model, you get data given to you, and you get given whatever is there, and you must then handle this because if you don't, that data is gone.</p>\n<p>So, in the async model you get, say, half of the <code>Hello everybody, good morning!</code> message. You get the bytes that represent <code>Hello eve</code> and that's it. For that matter, you got the total byte length of this message already and need to remember that, as well as the half you received so far. You need to <strong>explicitly</strong> make an object and store this stuff somewhere.</p>\n<p><strong>Here's the key point: With the synchronous model, a lot of your state info is in stacks. In the async model, you make the data structures to store this state yourself</strong>.</p>\n<p>And because you make these yourself, they can be dynamically sized, and generally far smaller: You just need ~4 bytes to store size, another 8 or so for a pointer to the byte array, a handful for the username pointer and that's about it. That's orders of magnitude less than the <code>128k</code> that stack is taking to store that stuff.</p>\n<p>Now, another theoretical benefit is that you don't get the context switch - instead of the CPU and OS having to swap to another thread when a read() call has no data left to give you because the network card is waiting for data, it's now the thread's job to go: Okay, no problem - I shall move on to another context object.</p>\n<p>But that's a red herring - it doesn't matter if the OS is juggling 1000 context concepts (1000 threads), or if your application is juggling 1000 context concepts (these 'tracker' objects). It's still 1000 connections and everybody chatting away, so every time your thread moves on to check another context object and fill its byte array with more data, most likely it's still a cache miss and the CPU is still going to twiddle its thumbs for hundreds of cycles whilst the hardware infrastructure pulls the appropriate page from main RAM into the caches. So that part is not nearly as relevant, though the fact that the context objects are smaller is going to reduce cache misses somewhat.</p>\n<p>That gets us back to: The primary benefit is that you get to handroll those buffers, and in so doing, you can both make them far smaller, and size them dynamically.</p>\n<h2>The downsides of async</h2>\n<p>There's a reason we have garbage collected languages. There is a reason we don't write all our code in assembler. Carefully managing all these finicky details by hand is usually not worth it. And so it is here: Often that benefit is not worth it. But just like GFX drivers and kernel cores have a ton of machine code, and drivers tend to be written in hand-managed memory environments, there are cases where careful management of those buffers is very much worth it.</p>\n<p>The cost is high, though.</p>\n<p>Imagine a theoretical programming language with the following properties:</p>\n<ul>\n<li>Each function is either red or blue.</li>\n<li>A red function can call blue or red functions, no problem.</li>\n<li>A blue function can also call both, but if a blue function calls a red function, you have a bug that is almost impossible to test for but will kill your performance on realistic loads. Blue can call red functions only by going out of their way to define both the call and the response to the result of the call separately and injecting this pair into a queue.</li>\n<li>functions tend not to document their colour.</li>\n<li>Some system functions are red.</li>\n<li>Your function must be blue.</li>\n</ul>\n<p>This seems like an <strong>utterly boneheaded disaster of a language</strong>, no? <em>But that's exactly the world you live in when writing async code!</em></p>\n<p>The problem is: Within async code, you cannot call a blocking function because if it blocks, hey, that's one of only 16 threads that is now blocked, and that immediately means your CPU is now doing 1/16ths nothing. If all 16 threads end up in that blocking part the CPU is literally doing nothing at all and everything is frozen. You just can't do it.</p>\n<p>There is a ton of stuff that blocks: Opening files, even touching a class never touched before (that class needs to be loaded from the jar from disk, verified, and linked), so much as looking at a database, doing a quick network check, sometimes asking for the current time will do it. Even logging at debug level might do it (if that ends up writing to disk, voila - blocking operation).</p>\n<p>Do you know of any logging framework that either promises to fire up a separate thread to process logs onto disk, or goes out of its way to document if it blocks or not? I don't know of any, either.</p>\n<p>So, methods that block are red, your async handlers are blue. Tada - that's why async is so incredibly difficult to truly get right.</p>\n<h2>The executive summary</h2>\n<p>Writing async code well is a real pain due to the coloured functions issue. It's also not on its face faster - in fact, it's usually slower. Async can win big if you want to run many thousands of operations simultaneously and the amount of storage required to track the relevant state data for each individual operation is small, because you get to handroll that buffer instead of being forced into relying on 1 stack per thread.</p>\n<p>If you have some money left over, well, a developer salary buys you <strong>a lot of sticks of RAM</strong>, so usually the right option is to go with threads and just opt for a box with a lot of RAM if you want to handle many simultaneous connections.</p>\n<p>Note that sites like youtube, facebook, etc effectively take the 'toss money at RAM' solution - they shard their product so that many simple and cheap computers work together to serve up a website. Don't knock it.</p>\n<p>Examples where async can really shine is the chat app I've described in this answer. Another is, say, you receiving a short message, and all you do is hash it, encrypt the hash, and respond with it (To hash, you don't need to remember all the bytes flowing in, you can just toss each byte into the hasher which has constant memory load, and when the bytes are all sent, voila, you have your hash). You're looking for little state per operation and not much CPU power either relative to the speed at which the data is provided.</p>\n<p>Some bad examples: are a system where you need to do a bunch of DB queries (you'd need an async way to talk to your DB, and in general DBs are bad at trying to run 1000 queries simultaneously), a bitcoin mining operation (the bitcoin mining is the bottleneck, there's no point trying to handle thousands of connections simultaneously on one machine).</p>\n"},{"tags":[],"owner":{"account_id":324398,"reputation":1260,"user_id":644949,"accept_rate":14,"display_name":"Vipresh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693320469,"creation_date":1693320469,"answer_id":77001247,"question_id":62842128,"body_markdown":"According to the javadoc https://docs.oracle.com/javase/7/docs/api/java/nio/channels/AsynchronousChannelGroup.html#withThreadPool(java.util.concurrent.ExecutorService) this threadpool is used to run completion handlers https://docs.oracle.com/javase/7/docs/api/java/nio/channels/CompletionHandler.html - the handlers used to process IO events not actual IO. \r\nAs i understand in node.js we have single event loop - in java we have ability to run callbacks concurrently in threads of this Thread pool. ","title":"What&#39;s the benefit of Async File NIO in Java?","body":"<p>According to the javadoc <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/channels/AsynchronousChannelGroup.html#withThreadPool(java.util.concurrent.ExecutorService)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/nio/channels/AsynchronousChannelGroup.html#withThreadPool(java.util.concurrent.ExecutorService)</a> this threadpool is used to run completion handlers <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/channels/CompletionHandler.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/nio/channels/CompletionHandler.html</a> - the handlers used to process IO events not actual IO.\nAs i understand in node.js we have single event loop - in java we have ability to run callbacks concurrently in threads of this Thread pool.</p>\n"}],"owner":{"account_id":2453365,"reputation":333,"user_id":2139101,"accept_rate":95,"display_name":"Peter"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2167,"favorite_count":0,"down_vote_count":1,"up_vote_count":17,"accepted_answer_id":64593351,"answer_count":2,"score":16,"last_activity_date":1693320469,"creation_date":1594414440,"question_id":62842128,"body_markdown":"According to the documentation of [AsynchronousFileChannel][1] and [AsynchronousChannelGroup][2], async NIO is using a dedicated thread pool where &quot;IO events are handled&quot;. I couldn&#39;t find any clear statement what &quot;handling&quot; means in this context but according to [this][3], I&#39;m pretty sure that at the end of the day, blocking occurs on those dedicated threads. To narrow things down, I&#39;m using Linux and based on [Alex Yursha&#39;s][3] answer, there is no such thing as non-blocking IO on it, only Windows supports it on some levels. \r\n\r\nMy question is: what is the benefit of using async NIO versus synchronous IO running on a dedicated thread pool created by myself? Considering the introduced complexity, what would be a scenario when it would still worth to implement?   \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/nio/channels/AsynchronousFileChannel.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/nio/channels/AsynchronousChannelGroup.html\r\n  [3]: https://stackoverflow.com/questions/25099640/non-blocking-io-vs-async-io-and-implementation-in-java","title":"What&#39;s the benefit of Async File NIO in Java?","body":"<p>According to the documentation of <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/channels/AsynchronousFileChannel.html\" rel=\"noreferrer\">AsynchronousFileChannel</a> and <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/channels/AsynchronousChannelGroup.html\" rel=\"noreferrer\">AsynchronousChannelGroup</a>, async NIO is using a dedicated thread pool where &quot;IO events are handled&quot;. I couldn't find any clear statement what &quot;handling&quot; means in this context but according to <a href=\"https://stackoverflow.com/questions/25099640/non-blocking-io-vs-async-io-and-implementation-in-java\">this</a>, I'm pretty sure that at the end of the day, blocking occurs on those dedicated threads. To narrow things down, I'm using Linux and based on <a href=\"https://stackoverflow.com/questions/25099640/non-blocking-io-vs-async-io-and-implementation-in-java\">Alex Yursha's</a> answer, there is no such thing as non-blocking IO on it, only Windows supports it on some levels.</p>\n<p>My question is: what is the benefit of using async NIO versus synchronous IO running on a dedicated thread pool created by myself? Considering the introduced complexity, what would be a scenario when it would still worth to implement?</p>\n"},{"tags":["java","android","cordova-plugins"],"answers":[{"tags":[],"owner":{"account_id":180055,"reputation":75792,"user_id":413127,"accept_rate":96,"display_name":"Blundell"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693320394,"creation_date":1693320394,"answer_id":77001238,"question_id":77001201,"body_markdown":"https://web.dev/appcache-removal/#android-webviews\r\n\r\n&gt; Some developers of Android applications use Chrome WebView to display\r\n&gt; web content, and might also use AppCache. However, it&#39;s not possible\r\n&gt; to enable an origin trial for a WebView. In light of that, Chrome\r\n&gt; WebView will support AppCache without an origin trial until the final\r\n&gt; removal takes place, expected in Chrome 90.\r\n\r\nBut take a look at: https://developer.android.com/reference/android/webkit/WebSettings\r\n\r\nCache Mode:\r\n\r\nhttps://developer.android.com/reference/android/webkit/WebSettings#setCacheMode(int)\r\n\r\n&gt; Overrides the way the cache is used. The way the cache is used is\r\n&gt; based on the navigation type. For a normal page load, the cache is\r\n&gt; checked and content is re-validated as needed. When navigating back,\r\n&gt; content is not revalidated, instead the content is just retrieved from\r\n&gt; the cache. This method allows the client to override this behavior by\r\n&gt; specifying one of LOAD_DEFAULT, LOAD_CACHE_ELSE_NETWORK, LOAD_NO_CACHE\r\n&gt; or LOAD_CACHE_ONLY. The default value is LOAD_DEFAULT.\r\n\r\n\r\nAlso someone else asked similar here: https://stackoverflow.com/questions/73488108/websettings-setappcacheenabled-deprecated-what-to-use-instead","title":"Replace for Android website.websettings.setAppCacheEnabled()","body":"<p><a href=\"https://web.dev/appcache-removal/#android-webviews\" rel=\"nofollow noreferrer\">https://web.dev/appcache-removal/#android-webviews</a></p>\n<blockquote>\n<p>Some developers of Android applications use Chrome WebView to display\nweb content, and might also use AppCache. However, it's not possible\nto enable an origin trial for a WebView. In light of that, Chrome\nWebView will support AppCache without an origin trial until the final\nremoval takes place, expected in Chrome 90.</p>\n</blockquote>\n<p>But take a look at: <a href=\"https://developer.android.com/reference/android/webkit/WebSettings\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/webkit/WebSettings</a></p>\n<p>Cache Mode:</p>\n<p><a href=\"https://developer.android.com/reference/android/webkit/WebSettings#setCacheMode(int)\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/webkit/WebSettings#setCacheMode(int)</a></p>\n<blockquote>\n<p>Overrides the way the cache is used. The way the cache is used is\nbased on the navigation type. For a normal page load, the cache is\nchecked and content is re-validated as needed. When navigating back,\ncontent is not revalidated, instead the content is just retrieved from\nthe cache. This method allows the client to override this behavior by\nspecifying one of LOAD_DEFAULT, LOAD_CACHE_ELSE_NETWORK, LOAD_NO_CACHE\nor LOAD_CACHE_ONLY. The default value is LOAD_DEFAULT.</p>\n</blockquote>\n<p>Also someone else asked similar here: <a href=\"https://stackoverflow.com/questions/73488108/websettings-setappcacheenabled-deprecated-what-to-use-instead\">Websettings.SetAppCacheEnabled deprecated, what to use instead?</a></p>\n"}],"owner":{"account_id":14264129,"reputation":78,"user_id":10303908,"display_name":"Pedro Santos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693320394,"creation_date":1693320118,"question_id":77001201,"body_markdown":"I use a cordova libry that uses Android native website.websettings.setAppCacheEnabled().\r\nIt has been removed from API 33 and the libry stop to work. \r\nIs there any other way to replace this method?","title":"Replace for Android website.websettings.setAppCacheEnabled()","body":"<p>I use a cordova libry that uses Android native website.websettings.setAppCacheEnabled().\nIt has been removed from API 33 and the libry stop to work.\nIs there any other way to replace this method?</p>\n"},{"tags":["java","junit","command-line","classpath","junit5"],"comments":[{"owner":{"account_id":1534652,"reputation":8621,"user_id":1431016,"accept_rate":100,"display_name":"Sormuras"},"score":1,"creation_date":1548790098,"post_id":54409727,"comment_id":95666765,"body_markdown":"Please enumerate all JAR files located in the &quot;lib&quot; directory. Like: `java -jar ... -cp lib/apache-commons-x.jar:another-tool.jar:out --scan-class-path`","body":"Please enumerate all JAR files located in the &quot;lib&quot; directory. Like: <code>java -jar ... -cp lib&#47;apache-commons-x.jar:another-tool.jar:out --scan-class-path</code>"},{"owner":{"account_id":5170435,"reputation":191,"user_id":4139116,"accept_rate":67,"display_name":"Nat G"},"score":0,"creation_date":1548798200,"post_id":54409727,"comment_id":95670168,"body_markdown":"@Sormuras that worked, thanks!","body":"@Sormuras that worked, thanks!"},{"owner":{"account_id":1459673,"reputation":1958,"user_id":1374322,"accept_rate":88,"display_name":"JockX"},"score":0,"creation_date":1602350018,"post_id":54409727,"comment_id":113695129,"body_markdown":"@Sormuras wildcard jars can be loaded to java classpath with -cp argument like this: \n `java -cp &quot;.;lib\\*&quot; org.junit.platform.console.ConsoleLauncher --scan-class-path` . Not sure why junit&#39;s `-cp` does not work in an equivalent way.","body":"@Sormuras wildcard jars can be loaded to java classpath with -cp argument like this:   <code>java -cp &quot;.;lib\\*&quot; org.junit.platform.console.ConsoleLauncher --scan-class-path</code> . Not sure why junit&#39;s <code>-cp</code> does not work in an equivalent way."}],"answers":[{"tags":[],"owner":{"account_id":5170435,"reputation":191,"user_id":4139116,"accept_rate":67,"display_name":"Nat G"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1548798455,"creation_date":1548798455,"answer_id":54430101,"question_id":54409727,"body_markdown":"Based on @Sormuras comment, adding the specific jar used to the classpath works. However, this doesn&#39;t seem like an ideal solution if many dependencies are used: \r\n\r\n`$ java -jar lib/junit-platform-console-standalone-1.3.2.jar -cp lib/commons-io-2.6.jar:out --scan-class-path`","title":"JUnit5 ConsoleLauncher NoClassDefFoundError","body":"<p>Based on @Sormuras comment, adding the specific jar used to the classpath works. However, this doesn't seem like an ideal solution if many dependencies are used: </p>\n\n<p><code>$ java -jar lib/junit-platform-console-standalone-1.3.2.jar -cp lib/commons-io-2.6.jar:out --scan-class-path</code></p>\n"},{"tags":[],"owner":{"account_id":5211690,"reputation":561,"user_id":4167902,"display_name":"Vincz777"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693320233,"creation_date":1693320233,"answer_id":77001216,"question_id":54409727,"body_markdown":"I had the same issue then I changed the command to:\r\n\r\n    java -cp lib/*:out org.junit.platform.console.ConsoleLauncher --scan-class-path\r\n\r\nwith `lib` folder containing the `junit-platform-console-standalone` JAR and it worked. ","title":"JUnit5 ConsoleLauncher NoClassDefFoundError","body":"<p>I had the same issue then I changed the command to:</p>\n<pre><code>java -cp lib/*:out org.junit.platform.console.ConsoleLauncher --scan-class-path\n</code></pre>\n<p>with <code>lib</code> folder containing the <code>junit-platform-console-standalone</code> JAR and it worked.</p>\n"}],"owner":{"account_id":5170435,"reputation":191,"user_id":4139116,"accept_rate":67,"display_name":"Nat G"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":754,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":54430101,"answer_count":2,"score":0,"last_activity_date":1693320233,"creation_date":1548706985,"question_id":54409727,"body_markdown":"My test file uses Commons IO library:\r\n\r\n    import org.apache.commons.io.FileUtils;\r\n    ...\r\n    @Test\r\n    public void testExampleEvalOutput_dataset() throws IOException {\r\n    \t\r\n        File file1 = FileUtils.getFile(pathToProject + pathToExampleResults + &quot;exampleEvalOutput_dataset.csv&quot;);\r\n        File file2 = FileUtils.getFile(pathToProject + pathToYourResults + &quot;exampleEvalOutput_dataset.csv&quot;);\r\n        assertEquals(true, FileUtils.contentEquals(file1, file2));\r\n    }\r\n\r\nTests work when I run from Eclipse.\r\n\r\nTrying to run from command line. Compile test file:\r\n\r\n`$ mkdir out`\r\n\r\nCommons IO jar is in `lib` directory, along with JUnit ConsoleLauncher jar.\r\n\r\n`$ javac -d out -cp &quot;lib/*&quot; path/to/ExampleEvalTests.java`\r\n\r\nCompiling works.\r\n\r\nHowever, the library is not picked up at runtime:\r\n\r\n`$ java -jar lib/junit-platform-console-standalone-1.3.2.jar -cp lib:out/ --scan-class-path`\r\n\r\n    JUnit Vintage:ExampleEvalTests:testExampleEvalOutput_dataset\r\n    MethodSource [className = &#39;org.company.test.ExampleEvalTests&#39;, methodName = &#39;testExampleEvalOutput_dataset&#39;, methodParameterTypes = &#39;&#39;]\r\n    =&gt; java.lang.NoClassDefFoundError: org/apache/commons/io/FileUtils\r\n       org.company.test.ExampleEvalTests.testExampleEvalOutput_dataset(ExampleEvalTests.java:27)\r\n       java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n       java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n       java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n       java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n       org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n       org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n       org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n       org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n       org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n       [...]\r\n\r\nDirectory structure:\r\n\r\n`lib\r\norg\r\n  company\r\n    test\r\nout`\r\n\r\n\r\nHow do I get the executable in `out` to pick up `lib`?\r\n ","title":"JUnit5 ConsoleLauncher NoClassDefFoundError","body":"<p>My test file uses Commons IO library:</p>\n\n<pre><code>import org.apache.commons.io.FileUtils;\n...\n@Test\npublic void testExampleEvalOutput_dataset() throws IOException {\n\n    File file1 = FileUtils.getFile(pathToProject + pathToExampleResults + \"exampleEvalOutput_dataset.csv\");\n    File file2 = FileUtils.getFile(pathToProject + pathToYourResults + \"exampleEvalOutput_dataset.csv\");\n    assertEquals(true, FileUtils.contentEquals(file1, file2));\n}\n</code></pre>\n\n<p>Tests work when I run from Eclipse.</p>\n\n<p>Trying to run from command line. Compile test file:</p>\n\n<p><code>$ mkdir out</code></p>\n\n<p>Commons IO jar is in <code>lib</code> directory, along with JUnit ConsoleLauncher jar.</p>\n\n<p><code>$ javac -d out -cp \"lib/*\" path/to/ExampleEvalTests.java</code></p>\n\n<p>Compiling works.</p>\n\n<p>However, the library is not picked up at runtime:</p>\n\n<p><code>$ java -jar lib/junit-platform-console-standalone-1.3.2.jar -cp lib:out/ --scan-class-path</code></p>\n\n<pre><code>JUnit Vintage:ExampleEvalTests:testExampleEvalOutput_dataset\nMethodSource [className = 'org.company.test.ExampleEvalTests', methodName = 'testExampleEvalOutput_dataset', methodParameterTypes = '']\n=&gt; java.lang.NoClassDefFoundError: org/apache/commons/io/FileUtils\n   org.company.test.ExampleEvalTests.testExampleEvalOutput_dataset(ExampleEvalTests.java:27)\n   java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n   java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n   java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n   java.base/java.lang.reflect.Method.invoke(Method.java:564)\n   org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n   org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n   org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n   org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n   org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n   [...]\n</code></pre>\n\n<p>Directory structure:</p>\n\n<p><code>lib\norg\n  company\n    test\nout</code></p>\n\n<p>How do I get the executable in <code>out</code> to pick up <code>lib</code>?</p>\n"},{"tags":["java","etl","export-to-csv","pentaho","pentaho-data-integration"],"answers":[{"comments":[{"owner":{"account_id":21050619,"reputation":65,"user_id":16714065,"display_name":"hermann joel"},"score":0,"creation_date":1698758338,"post_id":77001143,"comment_id":136443632,"body_markdown":"I had the same issue. After using @Vesanto solution, everything worked.","body":"I had the same issue. After using @Vesanto solution, everything worked."}],"tags":[],"owner":{"account_id":2546260,"reputation":526,"user_id":2816941,"display_name":"HeikkiVesanto"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693319664,"creation_date":1693319664,"answer_id":77001143,"question_id":76483018,"body_markdown":"Try ticking the &quot;Fast data dump (no formatting)&quot; box in the Content section of Text file output step.","title":"How to solve Pentaho text file output error - Requested array size exceeds VM limit","body":"<p>Try ticking the &quot;Fast data dump (no formatting)&quot; box in the Content section of Text file output step.</p>\n"}],"owner":{"account_id":2730902,"reputation":13,"user_id":2354719,"display_name":"Shailesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693319664,"creation_date":1686835886,"question_id":76483018,"body_markdown":"I am exporting data by suing &quot;table input&quot; step to &quot;text_file_output&quot; step into csv file, but failing to export even 10 records in the csv file because of **&quot;java.lang.OutOfMemoryError: Requested array size exceeds VM limit&quot;**\r\nMy spoon.bat file has below parameters already set but no luck yet.\r\n```PENTAHO_DI_JAVA_OPTIONS=&quot;-Xms1024m&quot; &quot;-Xmx2048m&quot; &quot;-XX:MaxPermSize=256m&quot; &quot;-XX:+UseCompressedOops&quot; &quot;-XX:+HeapDumpOnOutOfMemoryError&quot;```\r\n\r\n[In this transformation, exporting data to excel works okay but performance is bad for 10k+ records ,\r\nso used alternate way as text file output with csv extension, tested with sample data and it worked for 10k records in few seconds only but for new data it&#39;s failing even for 1 record.\r\nTried with increasing heap size as Xms 2GB and Xmx 4 GB but no luck ][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/A9w6g.png\r\n\r\n\r\n","title":"How to solve Pentaho text file output error - Requested array size exceeds VM limit","body":"<p>I am exporting data by suing &quot;table input&quot; step to &quot;text_file_output&quot; step into csv file, but failing to export even 10 records in the csv file because of <strong>&quot;java.lang.OutOfMemoryError: Requested array size exceeds VM limit&quot;</strong>\nMy spoon.bat file has below parameters already set but no luck yet.\n<code>PENTAHO_DI_JAVA_OPTIONS=&quot;-Xms1024m&quot; &quot;-Xmx2048m&quot; &quot;-XX:MaxPermSize=256m&quot; &quot;-XX:+UseCompressedOops&quot; &quot;-XX:+HeapDumpOnOutOfMemoryError&quot;</code></p>\n<p><a href=\"https://i.stack.imgur.com/A9w6g.png\" rel=\"nofollow noreferrer\">In this transformation, exporting data to excel works okay but performance is bad for 10k+ records ,\nso used alternate way as text file output with csv extension, tested with sample data and it worked for 10k records in few seconds only but for new data it's failing even for 1 record.\nTried with increasing heap size as Xms 2GB and Xmx 4 GB but no luck </a></p>\n"},{"tags":["java","sql","oracle","jdbc"],"comments":[{"owner":{"account_id":536567,"reputation":7838,"user_id":905488,"display_name":"Mick Mnemonic"},"score":1,"creation_date":1428691392,"post_id":29568472,"comment_id":47286525,"body_markdown":"_Why_ don&#39;t you want to use an `OUT` variable in the procedure? How could the variable move over JDBC otherwise?","body":"<i>Why</i> don&#39;t you want to use an <code>OUT</code> variable in the procedure? How could the variable move over JDBC otherwise?"},{"owner":{"account_id":6228,"reputation":228269,"user_id":10397,"display_name":"Justin Cave"},"score":1,"creation_date":1428691847,"post_id":29568472,"comment_id":47286730,"body_markdown":"You can&#39;t.  But your goal doesn&#39;t seem to make sense.  A stored procedure runs on the database server.  It can only write to a memory buffer on the client.  If you don&#39;t expose an API to return that data to the client (such as using an OUT parameter), the client can&#39;t possibly access memory that is internal to the server.  You could come up with a more obscure/ complicated method to return the data but I don&#39;t see why you&#39;d want to.","body":"You can&#39;t.  But your goal doesn&#39;t seem to make sense.  A stored procedure runs on the database server.  It can only write to a memory buffer on the client.  If you don&#39;t expose an API to return that data to the client (such as using an OUT parameter), the client can&#39;t possibly access memory that is internal to the server.  You could come up with a more obscure/ complicated method to return the data but I don&#39;t see why you&#39;d want to."}],"answers":[{"comments":[{"owner":{"account_id":4923650,"reputation":985,"user_id":3965524,"accept_rate":91,"display_name":"JavaTec"},"score":1,"creation_date":1472155968,"post_id":29575064,"comment_id":65651383,"body_markdown":"check this out - https://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:45027262935845","body":"check this out - <a href=\"https://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:45027262935845\" rel=\"nofollow noreferrer\">asktom.oracle.com/pls/asktom/&hellip;</a>"}],"tags":[],"owner":{"account_id":6093646,"reputation":862,"user_id":4755179,"display_name":"Vincent"},"comment_count":1,"down_vote_count":2,"up_vote_count":4,"is_accepted":true,"score":2,"last_activity_date":1428766804,"creation_date":1428735383,"answer_id":29575064,"question_id":29568472,"body_markdown":"Change your procedure to a function as:\r\n\r\n    FUNCTION SOME_FUNCTION\r\n    RETURN VARCHAR2\r\n    IS\r\n    BEGIN\r\n     -- Do some processing here....\r\n     RETURN &#39;output:&#39; || ....;\r\n    END;\r\n\r\nBack in java land:\r\n\r\n    CallableStatement cs = connection.prepareCall(&quot;{? = call SOME_FUNCTION}&quot;);\r\n    cs.registerOutParameter(1, String);\r\n    cs.executeUpdate();\r\n    system.out.println(cs.getString(1));\r\n\r\n\r\nThere is no other way.  You got ORACLE, you got the IDE console. There is no relationship between the two. To get data back from the database, you have to use a function to return a value, you could argue that returning values as out parameters is the same thing, and while both WILL get a value back, your code will be much more intuitive to others.  It says, this call returns something.\r\n\r\nThat said, you can call the method in SQL developer and print as follows:\r\n\r\n    DECLARE\r\n        result varchar2;\r\n    BEGIN\r\n        result := SOME_FUNCTION;\r\n        DBMS_OUTPUT.PUTLINE(result);\r\n    END;","title":"Print stored procedure message directly to Java console","body":"<p>Change your procedure to a function as:</p>\n\n<pre><code>FUNCTION SOME_FUNCTION\nRETURN VARCHAR2\nIS\nBEGIN\n -- Do some processing here....\n RETURN 'output:' || ....;\nEND;\n</code></pre>\n\n<p>Back in java land:</p>\n\n<pre><code>CallableStatement cs = connection.prepareCall(\"{? = call SOME_FUNCTION}\");\ncs.registerOutParameter(1, String);\ncs.executeUpdate();\nsystem.out.println(cs.getString(1));\n</code></pre>\n\n<p>There is no other way.  You got ORACLE, you got the IDE console. There is no relationship between the two. To get data back from the database, you have to use a function to return a value, you could argue that returning values as out parameters is the same thing, and while both WILL get a value back, your code will be much more intuitive to others.  It says, this call returns something.</p>\n\n<p>That said, you can call the method in SQL developer and print as follows:</p>\n\n<pre><code>DECLARE\n    result varchar2;\nBEGIN\n    result := SOME_FUNCTION;\n    DBMS_OUTPUT.PUTLINE(result);\nEND;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2381693,"reputation":721,"user_id":2083581,"display_name":"Marcio J"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693319292,"creation_date":1693319292,"answer_id":77001096,"question_id":29568472,"body_markdown":"If you are doing this for debug purposes, you can just use a table to store the value you want:\r\n\r\n``` lang-sql\r\n...\r\nBEGIN\t\r\n    UPDATE MY_TABLE \r\n    SET MY_COLUMN = &#39;hello&#39;\r\n    WHERE ID = 123456;\r\n    COMMIT;    \r\n    -- Rest of stored procedure code\r\nEND;\r\n```\r\n\r\nThen check the value in that table after you run the stored procedure.\r\n","title":"Print stored procedure message directly to Java console","body":"<p>If you are doing this for debug purposes, you can just use a table to store the value you want:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>...\nBEGIN   \n    UPDATE MY_TABLE \n    SET MY_COLUMN = 'hello'\n    WHERE ID = 123456;\n    COMMIT;    \n    -- Rest of stored procedure code\nEND;\n</code></pre>\n<p>Then check the value in that table after you run the stored procedure.</p>\n"}],"owner":{"account_id":2880509,"reputation":87,"user_id":2471555,"accept_rate":75,"display_name":"Avinash Jethy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9351,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":29575064,"answer_count":2,"score":4,"last_activity_date":1693319292,"creation_date":1428690932,"question_id":29568472,"body_markdown":"I have a stored procedure where I am using\r\n\r\n    dbms_output.put_line(&#39; output&#39; || outVar);\r\n\r\nI want to print same output directly in Java console (directly from stored proc) without using below code to get `outVar` :\r\n\r\n    callableStatement.registerOutParameter(1, String);\r\n    system.out.println(callableStatement.getString());\r\n","title":"Print stored procedure message directly to Java console","body":"<p>I have a stored procedure where I am using</p>\n\n<pre><code>dbms_output.put_line(' output' || outVar);\n</code></pre>\n\n<p>I want to print same output directly in Java console (directly from stored proc) without using below code to get <code>outVar</code> :</p>\n\n<pre><code>callableStatement.registerOutParameter(1, String);\nsystem.out.println(callableStatement.getString());\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1693312897,"post_id":77000175,"comment_id":135741601,"body_markdown":"This doesn&#39;t look like the [right command](https://ericplayground.com/2015/06/07/how-to-configure-geany-to-run-java/)","body":"This doesn&#39;t look like the <a href=\"https://ericplayground.com/2015/06/07/how-to-configure-geany-to-run-java/\" rel=\"nofollow noreferrer\">right command</a>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1693321606,"post_id":77000175,"comment_id":135743649,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":23835944,"reputation":1,"user_id":17841681,"display_name":"lahiru madushan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693319032,"creation_date":1693311799,"question_id":77000175,"body_markdown":"When I try to run a java file from geany it shows that,\r\n\r\n```\r\n20:14:08: Cannot execute build command &quot;cmd.exe /Q /C ^&quot;C:\\Program^ Files\\Geany\\libexec\\geany\\geany-run-helper^&quot;^ ^&quot;G:\\Lahiru^&quot;^ 0^ java^ ^&quot;Example^&quot;&quot;:\r\n\r\nOperation did not complete successfully because the file contains a virus or potentially unwanted software. Check the Terminal setting in Preferences\r\n```\r\n\r\nWhat is the reason for this issue?\r\n\r\nI attempted to reinstall the software twice, but the problem persisted. Additionally, I disabled the Avast software for one hour, yet the issue remained unresolved.","title":"cannot run a java file in geany","body":"<p>When I try to run a java file from geany it shows that,</p>\n<pre><code>20:14:08: Cannot execute build command &quot;cmd.exe /Q /C ^&quot;C:\\Program^ Files\\Geany\\libexec\\geany\\geany-run-helper^&quot;^ ^&quot;G:\\Lahiru^&quot;^ 0^ java^ ^&quot;Example^&quot;&quot;:\n\nOperation did not complete successfully because the file contains a virus or potentially unwanted software. Check the Terminal setting in Preferences\n</code></pre>\n<p>What is the reason for this issue?</p>\n<p>I attempted to reinstall the software twice, but the problem persisted. Additionally, I disabled the Avast software for one hour, yet the issue remained unresolved.</p>\n"},{"tags":["java","google-app-engine","junit","task-queue"],"answers":[{"tags":[],"owner":{"account_id":3252144,"reputation":476,"user_id":2742117,"display_name":"John Muraguri"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1495460843,"creation_date":1495460843,"answer_id":44114571,"question_id":40716781,"body_markdown":"I was experiencing the &quot;The specified queue is unknown&quot; error. After looking at this solution https://stackoverflow.com/a/11200214/2742117, I fixed it by adding this to my base test class\r\n\r\n    private static String dir;\r\n    static {\r\n      dir = System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/webapp/WEB-INF/queue.xml&quot;;\r\n      System.out.println(dir);\r\n    }\r\n\r\n    protected final LocalServiceTestHelper helper =\r\n      new LocalServiceTestHelper(\r\n          //some other configurations removed for brevity...\r\n          new LocalTaskQueueTestConfig().setQueueXmlPath(dir)\r\n      );\r\n\r\nAfter this my tests were able to work with my non default queue.","title":"Google App Engine: Exception while using TaskQueue with JUnit test cases","body":"<p>I was experiencing the \"The specified queue is unknown\" error. After looking at this solution <a href=\"https://stackoverflow.com/a/11200214/2742117\">https://stackoverflow.com/a/11200214/2742117</a>, I fixed it by adding this to my base test class</p>\n\n<pre><code>private static String dir;\nstatic {\n  dir = System.getProperty(\"user.dir\") + \"/src/main/webapp/WEB-INF/queue.xml\";\n  System.out.println(dir);\n}\n\nprotected final LocalServiceTestHelper helper =\n  new LocalServiceTestHelper(\n      //some other configurations removed for brevity...\n      new LocalTaskQueueTestConfig().setQueueXmlPath(dir)\n  );\n</code></pre>\n\n<p>After this my tests were able to work with my non default queue.</p>\n"},{"tags":[],"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693318309,"creation_date":1693318309,"answer_id":77000985,"question_id":40716781,"body_markdown":"I was getting this issue not in my unit tests, but in actuality. In the end I had to actually add the new queue in my queue.xml\r\n\r\n\t&lt;queue&gt;\r\n\t\t&lt;name&gt;myNewQueue&lt;/name&gt;\r\n\t\t&lt;rate&gt;100/s&lt;/rate&gt;\r\n\t\t&lt;max-concurrent-requests&gt;100&lt;/max-concurrent-requests&gt;\r\n\t\t&lt;retry-parameters&gt;\r\n\t\t\t&lt;task-age-limit&gt;300h&lt;/task-age-limit&gt;\r\n\t\t\t&lt;min-backoff-seconds&gt;10&lt;/min-backoff-seconds&gt;\r\n\t\t\t&lt;max-backoff-seconds&gt;200&lt;/max-backoff-seconds&gt;\r\n\t\t\t&lt;max-doublings&gt;0&lt;/max-doublings&gt;\r\n\t\t&lt;/retry-parameters&gt;\r\n\t\t&lt;target&gt;my-queue-service&lt;/target&gt;\r\n\t&lt;/queue&gt;","title":"Google App Engine: Exception while using TaskQueue with JUnit test cases","body":"<p>I was getting this issue not in my unit tests, but in actuality. In the end I had to actually add the new queue in my queue.xml</p>\n<pre><code>&lt;queue&gt;\n    &lt;name&gt;myNewQueue&lt;/name&gt;\n    &lt;rate&gt;100/s&lt;/rate&gt;\n    &lt;max-concurrent-requests&gt;100&lt;/max-concurrent-requests&gt;\n    &lt;retry-parameters&gt;\n        &lt;task-age-limit&gt;300h&lt;/task-age-limit&gt;\n        &lt;min-backoff-seconds&gt;10&lt;/min-backoff-seconds&gt;\n        &lt;max-backoff-seconds&gt;200&lt;/max-backoff-seconds&gt;\n        &lt;max-doublings&gt;0&lt;/max-doublings&gt;\n    &lt;/retry-parameters&gt;\n    &lt;target&gt;my-queue-service&lt;/target&gt;\n&lt;/queue&gt;\n</code></pre>\n"}],"owner":{"account_id":6372775,"reputation":1407,"user_id":4944711,"accept_rate":61,"display_name":"Abhishek Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":914,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1693318309,"creation_date":1479720623,"question_id":40716781,"body_markdown":"I want to call task queue from Junit Test cases. my code is:\r\n\t\r\n\r\n    @Test\r\n    \tpublic void monthlyCronTest1() throws Exception {\r\n    ....\r\n           Queue queue = QueueFactory.getQueue(&quot;updateVcoCron&quot;);\r\n           TaskOptions options = TaskOptions.Builder.withUrl(String.format(&quot;/api/v1/users/update/validation/points&quot;)).method(TaskOptions.Method.GET);\r\n            \t\t\toptions.param(&quot;pageNumber&quot;, String.valueOf(pageNumber));\r\n            \t\t\toptions.param(&quot;validatableBrands&quot;, validatableBrands);\r\n              queue.add(options); // this line throw exception\r\n    ......\r\n    }\r\n\r\nhere I am getting error:\r\n\r\n\r\n     Exception:java.lang.IllegalStateException: The specified queue is unknown : updateVcoCron\r\n        [junit] 1577867 INFO  org.quartz.impl.StdSchedulerFactory  - Quartz scheduler &#39;DefaultQuartzScheduler&#39; initialized f\r\n    rom default resource file in Quartz package: &#39;quartz.properties&#39;\r\n        [junit] 1577867 INFO  org.quartz.impl.StdSchedulerFactory  - Quartz scheduler version: UNKNOWN.UNKNOWN.UNKNOWN\r\n        [junit] 1577867 INFO  org.quartz.core.QuartzScheduler  - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.\r\n\r\n2) If I use default Queue like:\r\n\r\n       Queue queue = QueueFactory.getDefaultQueue();\r\nI get different error.\r\n\r\n\t\r\n\r\n        [junit] com.google.apphosting.api.ApiProxy$ApplicationException: ApplicationError: 2: Received exception executing h\r\n    ttp method GET against URL http://localhost:8080/api/v1/users/update/validation/points?pageNumber=1&amp;validatableBrands=Vi\r\n    rgin+Trains: Connection to http://localhost:8080 refused\r\n        [junit]     at com.google.appengine.api.urlfetch.dev.LocalURLFetchService.fetch(LocalURLFetchService.java:412)\r\n        [junit]     at com.google.appengine.api.taskqueue.dev.LocalTaskQueue$UrlFetchServiceLocalTaskQueueCallback.execute(L\r\n    ocalTaskQueue.java:701)\r\n        [junit]     at com.google.appengine.api.taskqueue.dev.UrlFetchJob.execute(UrlFetchJob.java:90)\r\n        [junit]     at org.quartz.core.JobRunShell.run(JobRunShell.java:203)\r\n        [junit]     at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520)\r\n        [junit] 432275 ERROR org.quartz.core.ErrorLogger  - Job (default.task-1a8a7b8a-db49-432e-ac3d-cce784211b8a threw an\r\n    exception.\r\n\r\n\r\nMy queue.xml is in the below path:\r\n------------------------\r\nsrc/main/webapp/WEB-INF.\r\n\r\nNow my question: is there any configuration left for JUnit environment? why it is not picking queue.xml? Please help here. \r\n","title":"Google App Engine: Exception while using TaskQueue with JUnit test cases","body":"<p>I want to call task queue from Junit Test cases. my code is:</p>\n\n<pre><code>@Test\n    public void monthlyCronTest1() throws Exception {\n....\n       Queue queue = QueueFactory.getQueue(\"updateVcoCron\");\n       TaskOptions options = TaskOptions.Builder.withUrl(String.format(\"/api/v1/users/update/validation/points\")).method(TaskOptions.Method.GET);\n                    options.param(\"pageNumber\", String.valueOf(pageNumber));\n                    options.param(\"validatableBrands\", validatableBrands);\n          queue.add(options); // this line throw exception\n......\n}\n</code></pre>\n\n<p>here I am getting error:</p>\n\n<pre><code> Exception:java.lang.IllegalStateException: The specified queue is unknown : updateVcoCron\n    [junit] 1577867 INFO  org.quartz.impl.StdSchedulerFactory  - Quartz scheduler 'DefaultQuartzScheduler' initialized f\nrom default resource file in Quartz package: 'quartz.properties'\n    [junit] 1577867 INFO  org.quartz.impl.StdSchedulerFactory  - Quartz scheduler version: UNKNOWN.UNKNOWN.UNKNOWN\n    [junit] 1577867 INFO  org.quartz.core.QuartzScheduler  - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.\n</code></pre>\n\n<p>2) If I use default Queue like:</p>\n\n<pre><code>   Queue queue = QueueFactory.getDefaultQueue();\n</code></pre>\n\n<p>I get different error.</p>\n\n<pre><code>    [junit] com.google.apphosting.api.ApiProxy$ApplicationException: ApplicationError: 2: Received exception executing h\nttp method GET against URL http://localhost:8080/api/v1/users/update/validation/points?pageNumber=1&amp;validatableBrands=Vi\nrgin+Trains: Connection to http://localhost:8080 refused\n    [junit]     at com.google.appengine.api.urlfetch.dev.LocalURLFetchService.fetch(LocalURLFetchService.java:412)\n    [junit]     at com.google.appengine.api.taskqueue.dev.LocalTaskQueue$UrlFetchServiceLocalTaskQueueCallback.execute(L\nocalTaskQueue.java:701)\n    [junit]     at com.google.appengine.api.taskqueue.dev.UrlFetchJob.execute(UrlFetchJob.java:90)\n    [junit]     at org.quartz.core.JobRunShell.run(JobRunShell.java:203)\n    [junit]     at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520)\n    [junit] 432275 ERROR org.quartz.core.ErrorLogger  - Job (default.task-1a8a7b8a-db49-432e-ac3d-cce784211b8a threw an\nexception.\n</code></pre>\n\n<h2>My queue.xml is in the below path:</h2>\n\n<p>src/main/webapp/WEB-INF.</p>\n\n<p>Now my question: is there any configuration left for JUnit environment? why it is not picking queue.xml? Please help here. </p>\n"},{"tags":["java","soap","saaj"],"comments":[{"owner":{"account_id":52873,"reputation":2689,"user_id":158037,"display_name":"user158037"},"score":0,"creation_date":1660840483,"post_id":71428192,"comment_id":129634098,"body_markdown":"If anyone else finds this question you might want to check https://stackoverflow.com/a/66421487/158037 or other answers in that question.","body":"If anyone else finds this question you might want to check <a href=\"https://stackoverflow.com/a/66421487/158037\">stackoverflow.com/a/66421487/158037</a> or other answers in that question."}],"answers":[{"comments":[{"owner":{"account_id":12985701,"reputation":351,"user_id":9386660,"display_name":"Parul"},"score":0,"creation_date":1676656060,"post_id":74459669,"comment_id":133187988,"body_markdown":"I have upgraded the application to spring boot 3 and java 17. For me the SOAP APIs were working in eclipse but not in tomcat. After adding the above dependencies it worked for me in tomcat as well. Thank you.","body":"I have upgraded the application to spring boot 3 and java 17. For me the SOAP APIs were working in eclipse but not in tomcat. After adding the above dependencies it worked for me in tomcat as well. Thank you."}],"tags":[],"owner":{"account_id":26950012,"reputation":31,"user_id":20519386,"display_name":"Dovile"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1668597969,"creation_date":1668597969,"answer_id":74459669,"question_id":71428192,"body_markdown":"For my Java 17 SoapMessageCreationException was solved with these dependencies\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.soap&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.xml.soap-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.4.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.xml.messaging.saaj&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;saaj-impl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.5.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n","title":"Unable to create SAAJ meta-factory in Java 17","body":"<p>For my Java 17 SoapMessageCreationException was solved with these dependencies</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;javax.xml.soap&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.xml.soap-api&lt;/artifactId&gt;\n        &lt;version&gt;1.4.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.messaging.saaj&lt;/groupId&gt;\n        &lt;artifactId&gt;saaj-impl&lt;/artifactId&gt;\n        &lt;version&gt;1.5.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29322443,"reputation":1,"user_id":22465705,"display_name":"Rendz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693318096,"creation_date":1693317644,"answer_id":77000887,"question_id":71428192,"body_markdown":"The dependencies above helped to resolve the error below after upgrading to java 17 from java 11:\r\n\r\n    Caused by: org.w3c.dom.DOMException: HIERARCHY_REQUEST_ERR: An attempt was made to insert a node where it is not permitted.\r\n                at java.xml/com.sun.org.apache.xerces.internal.dom.CoreDocumentImpl.insertBefore(CoreDocumentImpl.java:439)\r\n                at java.xml/com.sun.org.apache.xerces.internal.dom.NodeImpl.appendChild(NodeImpl.java:230)","title":"Unable to create SAAJ meta-factory in Java 17","body":"<p>The dependencies above helped to resolve the error below after upgrading to java 17 from java 11:</p>\n<pre><code>Caused by: org.w3c.dom.DOMException: HIERARCHY_REQUEST_ERR: An attempt was made to insert a node where it is not permitted.\n            at java.xml/com.sun.org.apache.xerces.internal.dom.CoreDocumentImpl.insertBefore(CoreDocumentImpl.java:439)\n            at java.xml/com.sun.org.apache.xerces.internal.dom.NodeImpl.appendChild(NodeImpl.java:230)\n</code></pre>\n"}],"owner":{"account_id":7691896,"reputation":793,"user_id":5827891,"accept_rate":50,"display_name":"DarkCrow"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7216,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1693318096,"creation_date":1646932481,"question_id":71428192,"body_markdown":"I&#39;m getting the following error while starting my spring boot application\r\n\r\n    Caused by: org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factoryProvider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found; nested exception is javax.xml.soap.SOAPException: Unable to create SAAJ meta-factoryProvider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found\r\n    \tat org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:156)\r\n    \tat org.springframework.ws.support.DefaultStrategiesHelper.instantiateBean(DefaultStrategiesHelper.java:182)\r\n    \t... 103 more\r\n    Caused by: javax.xml.soap.SOAPException: Unable to create SAAJ meta-factoryProvider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found\r\n    \tat javax.xml.soap.SAAJMetaFactory.getInstance(SAAJMetaFactory.java:94)\r\n    \tat javax.xml.soap.MessageFactory.newInstance(MessageFactory.java:138)\r\n    \tat org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:139)\r\n    \t... 104 more\r\n\r\n\r\nHere is my dependency\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.xml.soap&lt;/groupId&gt;\r\n                &lt;artifactId&gt;saaj-api&lt;/artifactId&gt;\r\n                &lt;version&gt;1.3.5&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.sun.xml.messaging.saaj&lt;/groupId&gt;\r\n                &lt;artifactId&gt;saaj-impl&lt;/artifactId&gt;\r\n                &lt;version&gt;1.5.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\nI&#39;m the spring boot application in Java 17. Am I missing anything here?","title":"Unable to create SAAJ meta-factory in Java 17","body":"<p>I'm getting the following error while starting my spring boot application</p>\n<pre><code>Caused by: org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factoryProvider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found; nested exception is javax.xml.soap.SOAPException: Unable to create SAAJ meta-factoryProvider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found\n    at org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:156)\n    at org.springframework.ws.support.DefaultStrategiesHelper.instantiateBean(DefaultStrategiesHelper.java:182)\n    ... 103 more\nCaused by: javax.xml.soap.SOAPException: Unable to create SAAJ meta-factoryProvider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found\n    at javax.xml.soap.SAAJMetaFactory.getInstance(SAAJMetaFactory.java:94)\n    at javax.xml.soap.MessageFactory.newInstance(MessageFactory.java:138)\n    at org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:139)\n    ... 104 more\n</code></pre>\n<p>Here is my dependency</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.soap&lt;/groupId&gt;\n            &lt;artifactId&gt;saaj-api&lt;/artifactId&gt;\n            &lt;version&gt;1.3.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.messaging.saaj&lt;/groupId&gt;\n            &lt;artifactId&gt;saaj-impl&lt;/artifactId&gt;\n            &lt;version&gt;1.5.1&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I'm the spring boot application in Java 17. Am I missing anything here?</p>\n"},{"tags":["java","list","algorithm","dynamic-programming","greedy"],"comments":[{"owner":{"account_id":29068972,"reputation":69,"user_id":22267832,"display_name":"Yu Xing"},"score":1,"creation_date":1693040515,"post_id":76979392,"comment_id":135709630,"body_markdown":"Sorry I made a mistake, and now I have modified this question.","body":"Sorry I made a mistake, and now I have modified this question."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1693098999,"post_id":76979392,"comment_id":135715176,"body_markdown":"Thank you for the edit. That does clear things up. But, now, can you tell us about what you tried, and your thoughts about why it might not have worked? Please include Java code of your attempt, if you are able.","body":"Thank you for the edit. That does clear things up. But, now, can you tell us about what you tried, and your thoughts about why it might not have worked? Please include Java code of your attempt, if you are able."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1693245379,"post_id":76979392,"comment_id":135732242,"body_markdown":"That information should be in the question body. The admins here don&#39;t want comments to be used for chat.","body":"That information should be in the question body. The admins here don&#39;t want comments to be used for chat."},{"owner":{"account_id":29068972,"reputation":69,"user_id":22267832,"display_name":"Yu Xing"},"score":0,"creation_date":1693318133,"post_id":76979392,"comment_id":135742811,"body_markdown":"Ok, I put my information to the body","body":"Ok, I put my information to the body"}],"answers":[{"tags":[],"owner":{"account_id":29068972,"reputation":69,"user_id":22267832,"display_name":"Yu Xing"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693318095,"creation_date":1693318095,"answer_id":77000951,"question_id":76979392,"body_markdown":"My approach is to use a map to record the occurrence count of each number. If there is a number that appears only once or there are at least three different numbers in total, I will return the length of the array. Otherwise, if the scenario is similar to &quot;1 2 1 2 1 2 1 2&quot;, I will return the length of the array divided by 2 plus 1 (each deletion triggers an automatic removal, reducing the length by 2; when the length reaches 2, two deletions can be performed). But I wonder if it is right and how to prove it. ","title":"Finding the Maximum and Minimum Number of Operations to Delete all Element in a Circular List","body":"<p>My approach is to use a map to record the occurrence count of each number. If there is a number that appears only once or there are at least three different numbers in total, I will return the length of the array. Otherwise, if the scenario is similar to &quot;1 2 1 2 1 2 1 2&quot;, I will return the length of the array divided by 2 plus 1 (each deletion triggers an automatic removal, reducing the length by 2; when the length reaches 2, two deletions can be performed). But I wonder if it is right and how to prove it.</p>\n"}],"owner":{"account_id":29068972,"reputation":69,"user_id":22267832,"display_name":"Yu Xing"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1693318095,"creation_date":1692984392,"question_id":76979392,"body_markdown":"In a circular list of length n, where a1 is adjacent to a2, a2 is adjacent to a3, and an is adjacent to a1. Each operation can delete one number, after each deletion, if there exists adjacent equal numbers, one of them will be automaticlly deleted until there are no adjacent equal numbers in the list. \r\n\r\nFor example, consider a circular list [1, 2, 3, 2]. If we delete the number 3, one of the adjacent 2&#39;s will be automatically deleted, resulting in [1, 2]. If we then delete the number 2, the list becomes [1]. Finally 1 is deleted, and the operation number is 3, because automatically deletions are not included.\r\n\r\nI would like to know the maximum and minimum number of operations required to delete all the elements in the circular list. What are the approaches or algorithms that can be used to solve this problem efficiently? Java code is better.","title":"Finding the Maximum and Minimum Number of Operations to Delete all Element in a Circular List","body":"<p>In a circular list of length n, where a1 is adjacent to a2, a2 is adjacent to a3, and an is adjacent to a1. Each operation can delete one number, after each deletion, if there exists adjacent equal numbers, one of them will be automaticlly deleted until there are no adjacent equal numbers in the list.</p>\n<p>For example, consider a circular list [1, 2, 3, 2]. If we delete the number 3, one of the adjacent 2's will be automatically deleted, resulting in [1, 2]. If we then delete the number 2, the list becomes [1]. Finally 1 is deleted, and the operation number is 3, because automatically deletions are not included.</p>\n<p>I would like to know the maximum and minimum number of operations required to delete all the elements in the circular list. What are the approaches or algorithms that can be used to solve this problem efficiently? Java code is better.</p>\n"},{"tags":["java","spring","spring-boot","pom.xml","parent-pom"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1693315756,"post_id":77000629,"comment_id":135742252,"body_markdown":"What do you mean by external jar? Share your pom so we can see the Maven configurations of the project.","body":"What do you mean by external jar? Share your pom so we can see the Maven configurations of the project."}],"owner":{"account_id":29036119,"reputation":1,"user_id":22241987,"display_name":"Tarique Aziz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1693317544,"answer_count":0,"score":0,"last_activity_date":1693317603,"creation_date":1693315410,"question_id":77000629,"body_markdown":"I have included an external JAR and plugin in my pom.xml file using Maven, but when I to build and generate a WAR file, the generated WAR file does not contain the external JAR. How can I resolve this issue?\r\n\r\n\r\n    &lt;dependencies&gt;\r\n       &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.abbyy.FCEngine&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;FCEngine&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.0&lt;/version&gt;\r\n    \t&lt;scope&gt;system&lt;/scope&gt;\r\n    &lt;systemPath&gt;${basedir}\\src\\lib\\com.abbyy.FCEngine.jar&lt;/systemPath&gt;\r\n       &lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;build&gt;\r\n        &lt;pluginManagement&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n              &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;  \r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/pluginManagement&gt; \r\n     &lt;/build&gt;\r\n\r\n","title":"Why Maven External JARs are not present in WAR file after build?","body":"<p>I have included an external JAR and plugin in my pom.xml file using Maven, but when I to build and generate a WAR file, the generated WAR file does not contain the external JAR. How can I resolve this issue?</p>\n<pre><code>&lt;dependencies&gt;\n   &lt;dependency&gt;\n    &lt;groupId&gt;com.abbyy.FCEngine&lt;/groupId&gt;\n    &lt;artifactId&gt;FCEngine&lt;/artifactId&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;scope&gt;system&lt;/scope&gt;\n&lt;systemPath&gt;${basedir}\\src\\lib\\com.abbyy.FCEngine.jar&lt;/systemPath&gt;\n   &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n    &lt;pluginManagement&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;  \n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/pluginManagement&gt; \n &lt;/build&gt;\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":448411,"reputation":585,"user_id":842590,"accept_rate":78,"display_name":"Lucy Brennan"},"score":0,"creation_date":1347864280,"post_id":12446316,"comment_id":16748806,"body_markdown":"Thanks for all the information, however I knew all that already. I know which JRE is being used when I run &#39;java&#39; in the command line. I know that I am using &#39;JavaSE-1.6&#39; in Eclipse because it says so. But I don&#39;t know which implementation of JavaSE-1.6 that is (e.g. Oracle?), and I don&#39;t know how to use that exact implementation to execute smth from command line (where is it on the file system?).","body":"Thanks for all the information, however I knew all that already. I know which JRE is being used when I run &#39;java&#39; in the command line. I know that I am using &#39;JavaSE-1.6&#39; in Eclipse because it says so. But I don&#39;t know which implementation of JavaSE-1.6 that is (e.g. Oracle?), and I don&#39;t know how to use that exact implementation to execute smth from command line (where is it on the file system?)."},{"owner":{"account_id":448411,"reputation":585,"user_id":842590,"accept_rate":78,"display_name":"Lucy Brennan"},"score":0,"creation_date":1347864354,"post_id":12446316,"comment_id":16748833,"body_markdown":"Obviously, if I install JRE myself and set Eclipse up to use that one,  I can answer the two above questions. But I don&#39;t know for the defaultly present JREs, e.g. &#39;JavaSE-1.6&#39;.","body":"Obviously, if I install JRE myself and set Eclipse up to use that one,  I can answer the two above questions. But I don&#39;t know for the defaultly present JREs, e.g. &#39;JavaSE-1.6&#39;."}],"answers":[{"comments":[{"owner":{"account_id":1483039,"reputation":8759,"user_id":1391924,"accept_rate":41,"display_name":"Chandrayya G K"},"score":2,"creation_date":1402041478,"post_id":12446331,"comment_id":37129768,"body_markdown":"In case of multiple installation of JDK?Which one eclipse is using? Question is not about which jvm user project/application is using.","body":"In case of multiple installation of JDK?Which one eclipse is using? Question is not about which jvm user project/application is using."}],"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1347793196,"creation_date":1347793196,"answer_id":12446331,"question_id":12446316,"body_markdown":"It is up to your configuration.\r\n\r\nGo to Windows/Preferences, then check: \r\n\r\nJava/Installed JREs and Java/Compiler/\r\n\r\nYou can also override your settings per project: project preferences, Java Compiler.\r\n","title":"Which Java is Eclipse using?","body":"<p>It is up to your configuration.</p>\n\n<p>Go to Windows/Preferences, then check: </p>\n\n<p>Java/Installed JREs and Java/Compiler/</p>\n\n<p>You can also override your settings per project: project preferences, Java Compiler.</p>\n"},{"comments":[{"owner":{"account_id":1483039,"reputation":8759,"user_id":1391924,"accept_rate":41,"display_name":"Chandrayya G K"},"score":2,"creation_date":1402041501,"post_id":12446898,"comment_id":37129785,"body_markdown":"In case of multiple installation of JDK?Which one eclipse is using? Question is not about which jvm user project/application is using.","body":"In case of multiple installation of JDK?Which one eclipse is using? Question is not about which jvm user project/application is using."}],"tags":[],"owner":{"account_id":1355206,"reputation":33312,"user_id":1293744,"accept_rate":44,"display_name":"Kumar Vivek Mitra"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1402042114,"creation_date":1347798854,"answer_id":12446898,"question_id":12446316,"body_markdown":"Eclipse gives you an option to select the `JDK` on **per project basis** as well as **for All projects.**\r\n\r\n\r\n**For All projects :**\r\n\r\nWindows ---&gt; Preferences ---&gt; Java Compiler ---&gt; Compiler compliance level ---&gt; Select the JDK you wish to work with.\r\n\r\n\r\n**For Specific projects :**\r\n\r\n\r\nProject ---&gt; Properties ---&gt; Java Compiler ---&gt; Compiler compliance level ---&gt; Select the JDK you wish to work with.\r\n\r\n\r\nThe settings for the specific project is given priority over the All project settings...\r\n","title":"Which Java is Eclipse using?","body":"<p>Eclipse gives you an option to select the <code>JDK</code> on <strong>per project basis</strong> as well as <strong>for All projects.</strong></p>\n\n<p><strong>For All projects :</strong></p>\n\n<p>Windows ---> Preferences ---> Java Compiler ---> Compiler compliance level ---> Select the JDK you wish to work with.</p>\n\n<p><strong>For Specific projects :</strong></p>\n\n<p>Project ---> Properties ---> Java Compiler ---> Compiler compliance level ---> Select the JDK you wish to work with.</p>\n\n<p>The settings for the specific project is given priority over the All project settings...</p>\n"},{"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":9,"creation_date":1347814647,"post_id":12446993,"comment_id":16740202,"body_markdown":"and the one running Eclipse?","body":"and the one running Eclipse?"}],"tags":[],"owner":{"account_id":221930,"reputation":381,"user_id":480179,"display_name":"Iman"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1693316933,"creation_date":1347799881,"answer_id":12446993,"question_id":12446316,"body_markdown":"If you want to know \r\n+ where is **Java located in** your **system**,\r\nrun it in terminal `whereis java`.\r\n\r\n+ which **Java** is **used in** your **system**, run it in terminal `which java`.\r\n\r\n+ what **Java version** is **used by default**, run it in terminal `java --version`\r\n+ which **JDK** is **used in Eclipse**, refer to `Project-&gt;Properties-&gt;Java Compiler`\r\n+ which **JRE** is **used in Eclipse**, refer to `Windows-&gt;Preferences-&gt;Installed JREs`","title":"Which Java is Eclipse using?","body":"<p>If you want to know</p>\n<ul>\n<li><p>where is <strong>Java located in</strong> your <strong>system</strong>,\nrun it in terminal <code>whereis java</code>.</p>\n</li>\n<li><p>which <strong>Java</strong> is <strong>used in</strong> your <strong>system</strong>, run it in terminal <code>which java</code>.</p>\n</li>\n<li><p>what <strong>Java version</strong> is <strong>used by default</strong>, run it in terminal <code>java --version</code></p>\n</li>\n<li><p>which <strong>JDK</strong> is <strong>used in Eclipse</strong>, refer to <code>Project-&gt;Properties-&gt;Java Compiler</code></p>\n</li>\n<li><p>which <strong>JRE</strong> is <strong>used in Eclipse</strong>, refer to <code>Windows-&gt;Preferences-&gt;Installed JREs</code></p>\n</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":964327,"reputation":6305,"user_id":988052,"display_name":"TacticalCoder"},"score":0,"creation_date":1347800885,"post_id":12447086,"comment_id":16737398,"body_markdown":"Using a separate user account on Linux without Java just to browse the Web is seen as wise by some seen that, since 2011, Java surpassed Flash as the single biggest attack vector for Web-based exploits.  If some site (like some very poorly designed bank websites in the U.S.) mandates the use of Java you can always use a browser from a user account that has Java (I personally think that banking websites should be accessed from Live CDs only but that is another topic ; )","body":"Using a separate user account on Linux without Java just to browse the Web is seen as wise by some seen that, since 2011, Java surpassed Flash as the single biggest attack vector for Web-based exploits.  If some site (like some very poorly designed bank websites in the U.S.) mandates the use of Java you can always use a browser from a user account that has Java (I personally think that banking websites should be accessed from Live CDs only but that is another topic ; )"},{"owner":{"account_id":1483039,"reputation":8759,"user_id":1391924,"accept_rate":41,"display_name":"Chandrayya G K"},"score":0,"creation_date":1402041635,"post_id":12447086,"comment_id":37129858,"body_markdown":"+1. So user need to change the order of installation path in $PATH variable, in order to use different JDK version which eclipse uses?Any other way?","body":"+1. So user need to change the order of installation path in $PATH variable, in order to use different JDK version which eclipse uses?Any other way?"},{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":0,"creation_date":1402043936,"post_id":12447086,"comment_id":37130984,"body_markdown":"Change eclipse.ini to point it to the runtime you want it to specifically use?","body":"Change eclipse.ini to point it to the runtime you want it to specifically use?"}],"tags":[],"owner":{"account_id":964327,"reputation":6305,"user_id":988052,"display_name":"TacticalCoder"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1347800690,"creation_date":1347800690,"answer_id":12447086,"question_id":12446316,"body_markdown":"*(this is too long for a comment)*\r\n\r\n&gt; Let say I want to use that same JRE to execute my Java program from\r\n&gt; command line, how do I find the &#39;java&#39; executable?\r\n\r\nOn Linux the java executable is the first executable named &quot;java&quot; found on your path.\r\n\r\nFor example:\r\n\r\n    ... $  echo $PATH\r\n    /home/f/jdk1.6.0_33/bin:/usr/local/bin:/usr/bin:/bin\r\n    ... $  which java\r\n    /home/f/jdk1.6.0_33/bin/java\r\n \r\nYou can install as many JRE/JDK as you want.  You can even trivially create user accounts with Java (*e.g.* a user account for development) and users account without Java (*e.g.* a user account without Java that you&#39;d use only for browsing the Web [see comment]).\r\n\r\nIf you try to launch Eclipse when the $PATH doesn&#39;t contain any Java executable and if you didn&#39;t install any JRE/JDK inside *~/eclipse/*, then Eclipse shall complain and refuse to launch:\r\n\r\n*&quot;A JRE or JDK must installed in order to launch Eclipse&quot;*\r\n\r\nAt that point and if you did install Java, you can simply add it to the $PATH and Eclipse shall launch:\r\n\r\n    ... $  export PATH=~/jdk1.6.0_33/bin:$PATH\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Which Java is Eclipse using?","body":"<p><em>(this is too long for a comment)</em></p>\n\n<blockquote>\n  <p>Let say I want to use that same JRE to execute my Java program from\n  command line, how do I find the 'java' executable?</p>\n</blockquote>\n\n<p>On Linux the java executable is the first executable named \"java\" found on your path.</p>\n\n<p>For example:</p>\n\n<pre><code>... $  echo $PATH\n/home/f/jdk1.6.0_33/bin:/usr/local/bin:/usr/bin:/bin\n... $  which java\n/home/f/jdk1.6.0_33/bin/java\n</code></pre>\n\n<p>You can install as many JRE/JDK as you want.  You can even trivially create user accounts with Java (<em>e.g.</em> a user account for development) and users account without Java (<em>e.g.</em> a user account without Java that you'd use only for browsing the Web [see comment]).</p>\n\n<p>If you try to launch Eclipse when the $PATH doesn't contain any Java executable and if you didn't install any JRE/JDK inside <em>~/eclipse/</em>, then Eclipse shall complain and refuse to launch:</p>\n\n<p><em>\"A JRE or JDK must installed in order to launch Eclipse\"</em></p>\n\n<p>At that point and if you did install Java, you can simply add it to the $PATH and Eclipse shall launch:</p>\n\n<pre><code>... $  export PATH=~/jdk1.6.0_33/bin:$PATH\n</code></pre>\n"},{"comments":[{"owner":{"account_id":12578470,"reputation":366,"user_id":9150059,"display_name":"Nitb"},"score":1,"creation_date":1544681372,"post_id":34719678,"comment_id":94364232,"body_markdown":"This is the precise and correct answer to the asked question. This should be marked as accepted answer.","body":"This is the precise and correct answer to the asked question. This should be marked as accepted answer."},{"owner":{"account_id":70637,"reputation":3185,"user_id":204658,"accept_rate":88,"display_name":"thoni56"},"score":0,"creation_date":1564488215,"post_id":34719678,"comment_id":101040448,"body_markdown":"And if Eclipse doesn&#39;t start because of wrong Java?","body":"And if Eclipse doesn&#39;t start because of wrong Java?"}],"tags":[],"owner":{"account_id":5684267,"reputation":1025,"user_id":4494324,"accept_rate":100,"display_name":"IndianerJones"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1452509540,"creation_date":1452509540,"answer_id":34719678,"question_id":12446316,"body_markdown":"While you are in Eclipse:\r\n\r\n- Open Help -&gt; About Eclipse \r\n- click on Installation Details\r\n- select the Tab Configuration\r\n\r\nsearch for the entry\r\n\r\n    eclipse.vm=\r\n\r\nthere should be the path to the used JRE.","title":"Which Java is Eclipse using?","body":"<p>While you are in Eclipse:</p>\n\n<ul>\n<li>Open Help -> About Eclipse </li>\n<li>click on Installation Details</li>\n<li>select the Tab Configuration</li>\n</ul>\n\n<p>search for the entry</p>\n\n<pre><code>eclipse.vm=\n</code></pre>\n\n<p>there should be the path to the used JRE.</p>\n"}],"owner":{"account_id":448411,"reputation":585,"user_id":842590,"accept_rate":78,"display_name":"Lucy Brennan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7423,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":5,"score":8,"last_activity_date":1693316933,"creation_date":1347792974,"question_id":12446316,"body_markdown":"I downloaded &#39;Eclipse IDE for Java EE Developers&#39; for Linux from eclipse.org. I am able to write, compile and run Java programs. But I don&#39;t understand what JDK / JRE is being used. \r\n\r\nIf I start a new &#39;Java Project&#39; I can choose which JRE to use, but if I choose for instance &#39;JavaSE-1.6&#39; I still don&#39;t know what that is? Oracle? IBM? And I don&#39;t know where that JRE is in my file system. \r\n\r\nLet&#39;s say I want to use that same JRE to execute my Java program from command line, how do I find the &#39;java&#39; executable?\r\n\r\n","title":"Which Java is Eclipse using?","body":"<p>I downloaded 'Eclipse IDE for Java EE Developers' for Linux from eclipse.org. I am able to write, compile and run Java programs. But I don't understand what JDK / JRE is being used. </p>\n\n<p>If I start a new 'Java Project' I can choose which JRE to use, but if I choose for instance 'JavaSE-1.6' I still don't know what that is? Oracle? IBM? And I don't know where that JRE is in my file system. </p>\n\n<p>Let's say I want to use that same JRE to execute my Java program from command line, how do I find the 'java' executable?</p>\n"},{"tags":["java","spring","spring-boot","twilio","twilio-api"],"comments":[{"owner":{"account_id":2258060,"reputation":3689,"user_id":1988798,"accept_rate":83,"display_name":"Gaurav"},"score":0,"creation_date":1693312164,"post_id":76999571,"comment_id":135741406,"body_markdown":"It seems to me that you are missing `EnableConfigurationProperties` on TwilioProperties due to which its instance is set of null values which of course is not acceptable by Twilio. Can you debug it and verify this behaviour ? What are the values passed to service ?","body":"It seems to me that you are missing <code>EnableConfigurationProperties</code> on TwilioProperties due to which its instance is set of null values which of course is not acceptable by Twilio. Can you debug it and verify this behaviour ? What are the values passed to service ?"},{"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"score":0,"creation_date":1693312328,"post_id":76999571,"comment_id":135741460,"body_markdown":"I have checked all the properties in console using Logger. No value is null and I am not getting any NullPointerException. A TwilioConfig object has been autowired in Service class. It holds all the values. Please correct me if I misunderstood something you specified. Thanks!","body":"I have checked all the properties in console using Logger. No value is null and I am not getting any NullPointerException. A TwilioConfig object has been autowired in Service class. It holds all the values. Please correct me if I misunderstood something you specified. Thanks!"},{"owner":{"account_id":2258060,"reputation":3689,"user_id":1988798,"accept_rate":83,"display_name":"Gaurav"},"score":0,"creation_date":1693312538,"post_id":76999571,"comment_id":135741504,"body_markdown":"Then I am afraid, you need to debug into Twilio VerificationCreator source code to see why it is throwing the exception.","body":"Then I am afraid, you need to debug into Twilio VerificationCreator source code to see why it is throwing the exception."},{"owner":{"account_id":2324765,"reputation":3704,"user_id":2039546,"display_name":"İsmail Y."},"score":0,"creation_date":1693313400,"post_id":76999571,"comment_id":135741705,"body_markdown":"Can you check that the value of `twilioConfig.getMessagingServiceSid()` is &quot;VAXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;?","body":"Can you check that the value of <code>twilioConfig.getMessagingServiceSid()</code> is &quot;VAXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;?"},{"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"score":0,"creation_date":1693313698,"post_id":76999571,"comment_id":135741764,"body_markdown":"Yes its a non-null string not starting, but not starting with V- MG97d8XXXXXXXXXXXXXXX99bd82e16e745 found under- Messaging-&gt;Services.","body":"Yes its a non-null string not starting, but not starting with V- MG97d8XXXXXXXXXXXXXXX99bd82e16e745 found under- Messaging-&gt;Services."}],"answers":[{"comments":[{"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"score":0,"creation_date":1693316878,"post_id":77000447,"comment_id":135742523,"body_markdown":"Ok. Thanks for pointing it out. I have currently chosen the &quot;Verify Users&quot; type messaging service which gives me a MG token. Am I using the wrong service? Should I use something else other than Messaging?","body":"Ok. Thanks for pointing it out. I have currently chosen the &quot;Verify Users&quot; type messaging service which gives me a MG token. Am I using the wrong service? Should I use something else other than Messaging?"},{"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"score":1,"creation_date":1693317108,"post_id":77000447,"comment_id":135742573,"body_markdown":"Thanks for helping. I found the &quot;Verify services&quot; under more products. I guess I need to use that. Thanks for helping me!","body":"Thanks for helping. I found the &quot;Verify services&quot; under more products. I guess I need to use that. Thanks for helping me!"}],"tags":[],"owner":{"account_id":2324765,"reputation":3704,"user_id":2039546,"display_name":"İsmail Y."},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693314390,"creation_date":1693313940,"answer_id":77000447,"question_id":76999571,"body_markdown":"You need to use a service SID that starts with `VA`.\r\n\r\nYou want to use the **&quot;Verify (VA)&quot;** service but you are using the `SID` for the **&quot;Messaging (MG)&quot;** service.\r\n\r\nThere are some more mistakes (if you don&#39;t do it on purpose);\r\n\r\n- Your `TwilioInitializer` class is creating a service for the **Verify Service** every time you run your code. *If you do this on purpose, it&#39;s fine, but if you do it unknowingly; you don&#39;t need to create a service every time.*\r\n\r\n- You only need to run the `Twilio.init(...);` block once, you don&#39;t need to run it in every method.","title":"com.twilio.exception.ApiException: Invalid parameter: Spring Boot","body":"<p>You need to use a service SID that starts with <code>VA</code>.</p>\n<p>You want to use the <strong>&quot;Verify (VA)&quot;</strong> service but you are using the <code>SID</code> for the <strong>&quot;Messaging (MG)&quot;</strong> service.</p>\n<p>There are some more mistakes (if you don't do it on purpose);</p>\n<ul>\n<li><p>Your <code>TwilioInitializer</code> class is creating a service for the <strong>Verify Service</strong> every time you run your code. <em>If you do this on purpose, it's fine, but if you do it unknowingly; you don't need to create a service every time.</em></p>\n</li>\n<li><p>You only need to run the <code>Twilio.init(...);</code> block once, you don't need to run it in every method.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77000447,"answer_count":1,"score":0,"last_activity_date":1693316780,"creation_date":1693306613,"question_id":76999571,"body_markdown":"I am working on a **SpringBoot** project, where I want to implement **Mobile Number OTP Verification** using **Twilio.** I am using the following versions-  \r\n 1. Spring: 6\r\n 2. SpringBoot: 3.1.3\r\n 3. Java: 17\r\n 4. Twilio-\r\n ```\r\n&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.twilio.sdk&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;twilio&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;9.11.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\nI referred the following docs and implemented accordingly-  \r\nhttps://www.twilio.com/docs/verify/api#user-verification-workflow\r\nand  https://www.twilio.com/blog/phone-number-verification-java-spring-boot-verify-totp.  \r\n\r\nMy code-  \r\n**Config-** I have verified all the ids and tokens\r\n```\r\n\r\nimport org.springframework.boot.context.properties.ConfigurationProperties;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\n@ConfigurationProperties(&quot;twilio&quot;)\r\npublic class TwilioConfig {\r\n    private String accountSid;\r\n    private String authToken;\r\n    private String trialNumber;\r\n\r\n    private String messagingServiceSid;\r\n\r\n    public void setAccountSid(String accountSid) {\r\n        this.accountSid = accountSid;\r\n    }\r\n\r\n    public void setAuthToken(String authToken) {\r\n        this.authToken = authToken;\r\n    }\r\n\r\n    public void setTrialNumber(String trialNumber) {\r\n        this.trialNumber = trialNumber;\r\n    }\r\n\r\n    public void setMessagingServiceSid(String messagingServiceSid) {\r\n        this.messagingServiceSid = messagingServiceSid;\r\n    }\r\n\r\n    public TwilioConfig(){\r\n\r\n    }\r\n\r\n    public String getAccountSid() {\r\n        return accountSid;\r\n    }\r\n\r\n    public String getAuthToken() {\r\n        return authToken;\r\n    }\r\n\r\n    public String getTrialNumber() {\r\n        return trialNumber;\r\n    }\r\n\r\n    public String getMessagingServiceSid() {\r\n        return messagingServiceSid;\r\n    }\r\n\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;TwilioConfig{&quot; +\r\n                &quot;accountSid=&#39;&quot; + accountSid + &#39;\\&#39;&#39; +\r\n                &quot;, authToken=&#39;&quot; + authToken + &#39;\\&#39;&#39; +\r\n                &quot;, trialNumber=&#39;&quot; + trialNumber + &#39;\\&#39;&#39; +\r\n                &quot;, messagingServiceSid=&#39;&quot; + messagingServiceSid + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n\r\n```\r\n**Twilio Initializer-**\r\n```\r\nimport com.twilio.Twilio;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class TwilioInitializer {\r\n\r\n    Logger logger= LoggerFactory.getLogger(TwilioInitializer.class);\r\n\r\n    private final TwilioConfig twilioConfig;\r\n\r\n    @Autowired\r\n    public TwilioInitializer(TwilioConfig twilioConfig) {\r\n        this.twilioConfig = twilioConfig;\r\n        logger.info(&quot;Initializing Twilio&quot;);\r\n        Twilio.init(\r\n                twilioConfig.getAccountSid(),\r\n                twilioConfig.getAuthToken()\r\n        );\r\n        com.twilio.rest.verify.v2.Service service = com.twilio.rest.verify.v2.Service.creator(&quot;My First Verify Service&quot;).create();\r\n        logger.info(&quot;Twilio initialized&quot;);\r\n\r\n    }\r\n}\r\n```\r\nand, **Service-**  \r\n```\r\nimport com.twilio.Twilio;\r\nimport com.twilio.rest.verify.v2.service.Verification;\r\nimport com.twilio.rest.verify.v2.service.VerificationCheck;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.time.LocalDateTime;\r\n\r\n@Service\r\npublic class SmsSenderImpl implements SmsSender {\r\n    private final Logger logger = LoggerFactory.getLogger(SmsSenderImpl.class);\r\n\r\n    private final TwilioConfig twilioConfig;\r\n\r\n    @Autowired\r\n    public SmsSenderImpl(TwilioConfig twilioConfig) {\r\n        this.twilioConfig = twilioConfig;\r\n    }\r\n\r\n    @Override\r\n    public void sendSms(SmsRequest smsRequest) {\r\n        Twilio.init(twilioConfig.getAccountSid(), twilioConfig.getAuthToken());\r\n\r\n        String phoneNumber = &quot;+91&quot; + smsRequest.getPhoneNumber().trim();\r\n        try {\r\n            logger.info(&quot;twilioConfig: &quot; + twilioConfig);\r\n            logger.info(&quot;Sending otp: &quot; + smsRequest);\r\n            Verification verification = Verification.creator(twilioConfig.getMessagingServiceSid(), // this is your verification sid\r\n                    phoneNumber, //this is your Twilio verified recipient phone number\r\n                    &quot;sms&quot; // this is your channel type\r\n            ).create();\r\n\r\n            logger.info(&quot;Verification status: &quot; + verification.getStatus());\r\n\r\n            logger.info(&quot;OTP has been successfully generated, and awaits your verification {}&quot;, LocalDateTime.now());\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void verifyOTP(String otp, String to) {\r\n        Twilio.init(twilioConfig.getAccountSid(), twilioConfig.getAuthToken());\r\n        logger.info(&quot;Verifying otp: &quot; + otp);\r\n\r\n        try {\r\n\r\n            VerificationCheck verificationCheck = VerificationCheck.creator(twilioConfig.getMessagingServiceSid()).setTo(to.trim()).setCode(otp.trim()).create();\r\n\r\n            logger.info(&quot;verify otp, Verification status: &quot; + verificationCheck.getStatus());\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n```\r\n\r\n**Problem-**\r\nWhen I use the method- **sendSms** in service layer, I get the following error-\r\n```\r\ncom.twilio.exception.ApiException: Invalid parameter\r\n\tat com.twilio.rest.verify.v2.service.VerificationCreator.create(VerificationCreator.java:184)\r\n\tat com.twilio.rest.verify.v2.service.VerificationCreator.create(VerificationCreator.java:32)\r\n\tat com.twilio.base.Creator.create(Creator.java:40)\r\n```\r\n\r\nI have chosen the service-  \r\nMessaging-&gt;Services-&gt;New-Service-&gt; Service Type- **&quot;Verify Users&quot;**.\r\n[![enter image description here][1]][1]\r\nI am not able to understand where is the issue. I have also created a service on Twilio and tested it on using https://console.twilio.com/us1/develop/sms/try-it-out/send-an-sms. But, I am getting error in the code and I can&#39;t find the issue. Please help!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IIQxJ.png","title":"com.twilio.exception.ApiException: Invalid parameter: Spring Boot","body":"<p>I am working on a <strong>SpringBoot</strong> project, where I want to implement <strong>Mobile Number OTP Verification</strong> using <strong>Twilio.</strong> I am using the following versions-</p>\n<ol>\n<li>Spring: 6</li>\n<li>SpringBoot: 3.1.3</li>\n<li>Java: 17</li>\n<li>Twilio-</li>\n</ol>\n<pre><code>&lt;dependency&gt;\n           &lt;groupId&gt;com.twilio.sdk&lt;/groupId&gt;\n           &lt;artifactId&gt;twilio&lt;/artifactId&gt;\n           &lt;version&gt;9.11.0&lt;/version&gt;\n       &lt;/dependency&gt;\n</code></pre>\n<p>I referred the following docs and implemented accordingly-<br />\n<a href=\"https://www.twilio.com/docs/verify/api#user-verification-workflow\" rel=\"nofollow noreferrer\">https://www.twilio.com/docs/verify/api#user-verification-workflow</a>\nand  <a href=\"https://www.twilio.com/blog/phone-number-verification-java-spring-boot-verify-totp\" rel=\"nofollow noreferrer\">https://www.twilio.com/blog/phone-number-verification-java-spring-boot-verify-totp</a>.</p>\n<p>My code-<br />\n<strong>Config-</strong> I have verified all the ids and tokens</p>\n<pre><code>\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@ConfigurationProperties(&quot;twilio&quot;)\npublic class TwilioConfig {\n    private String accountSid;\n    private String authToken;\n    private String trialNumber;\n\n    private String messagingServiceSid;\n\n    public void setAccountSid(String accountSid) {\n        this.accountSid = accountSid;\n    }\n\n    public void setAuthToken(String authToken) {\n        this.authToken = authToken;\n    }\n\n    public void setTrialNumber(String trialNumber) {\n        this.trialNumber = trialNumber;\n    }\n\n    public void setMessagingServiceSid(String messagingServiceSid) {\n        this.messagingServiceSid = messagingServiceSid;\n    }\n\n    public TwilioConfig(){\n\n    }\n\n    public String getAccountSid() {\n        return accountSid;\n    }\n\n    public String getAuthToken() {\n        return authToken;\n    }\n\n    public String getTrialNumber() {\n        return trialNumber;\n    }\n\n    public String getMessagingServiceSid() {\n        return messagingServiceSid;\n    }\n\n\n    @Override\n    public String toString() {\n        return &quot;TwilioConfig{&quot; +\n                &quot;accountSid='&quot; + accountSid + '\\'' +\n                &quot;, authToken='&quot; + authToken + '\\'' +\n                &quot;, trialNumber='&quot; + trialNumber + '\\'' +\n                &quot;, messagingServiceSid='&quot; + messagingServiceSid + '\\'' +\n                '}';\n    }\n}\n\n</code></pre>\n<p><strong>Twilio Initializer-</strong></p>\n<pre><code>import com.twilio.Twilio;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class TwilioInitializer {\n\n    Logger logger= LoggerFactory.getLogger(TwilioInitializer.class);\n\n    private final TwilioConfig twilioConfig;\n\n    @Autowired\n    public TwilioInitializer(TwilioConfig twilioConfig) {\n        this.twilioConfig = twilioConfig;\n        logger.info(&quot;Initializing Twilio&quot;);\n        Twilio.init(\n                twilioConfig.getAccountSid(),\n                twilioConfig.getAuthToken()\n        );\n        com.twilio.rest.verify.v2.Service service = com.twilio.rest.verify.v2.Service.creator(&quot;My First Verify Service&quot;).create();\n        logger.info(&quot;Twilio initialized&quot;);\n\n    }\n}\n</code></pre>\n<p>and, <strong>Service-</strong></p>\n<pre><code>import com.twilio.Twilio;\nimport com.twilio.rest.verify.v2.service.Verification;\nimport com.twilio.rest.verify.v2.service.VerificationCheck;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport java.time.LocalDateTime;\n\n@Service\npublic class SmsSenderImpl implements SmsSender {\n    private final Logger logger = LoggerFactory.getLogger(SmsSenderImpl.class);\n\n    private final TwilioConfig twilioConfig;\n\n    @Autowired\n    public SmsSenderImpl(TwilioConfig twilioConfig) {\n        this.twilioConfig = twilioConfig;\n    }\n\n    @Override\n    public void sendSms(SmsRequest smsRequest) {\n        Twilio.init(twilioConfig.getAccountSid(), twilioConfig.getAuthToken());\n\n        String phoneNumber = &quot;+91&quot; + smsRequest.getPhoneNumber().trim();\n        try {\n            logger.info(&quot;twilioConfig: &quot; + twilioConfig);\n            logger.info(&quot;Sending otp: &quot; + smsRequest);\n            Verification verification = Verification.creator(twilioConfig.getMessagingServiceSid(), // this is your verification sid\n                    phoneNumber, //this is your Twilio verified recipient phone number\n                    &quot;sms&quot; // this is your channel type\n            ).create();\n\n            logger.info(&quot;Verification status: &quot; + verification.getStatus());\n\n            logger.info(&quot;OTP has been successfully generated, and awaits your verification {}&quot;, LocalDateTime.now());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Override\n    public void verifyOTP(String otp, String to) {\n        Twilio.init(twilioConfig.getAccountSid(), twilioConfig.getAuthToken());\n        logger.info(&quot;Verifying otp: &quot; + otp);\n\n        try {\n\n            VerificationCheck verificationCheck = VerificationCheck.creator(twilioConfig.getMessagingServiceSid()).setTo(to.trim()).setCode(otp.trim()).create();\n\n            logger.info(&quot;verify otp, Verification status: &quot; + verificationCheck.getStatus());\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n    }\n\n\n}\n\n</code></pre>\n<p><strong>Problem-</strong>\nWhen I use the method- <strong>sendSms</strong> in service layer, I get the following error-</p>\n<pre><code>com.twilio.exception.ApiException: Invalid parameter\n    at com.twilio.rest.verify.v2.service.VerificationCreator.create(VerificationCreator.java:184)\n    at com.twilio.rest.verify.v2.service.VerificationCreator.create(VerificationCreator.java:32)\n    at com.twilio.base.Creator.create(Creator.java:40)\n</code></pre>\n<p>I have chosen the service-<br />\nMessaging-&gt;Services-&gt;New-Service-&gt; Service Type- <strong>&quot;Verify Users&quot;</strong>.\n<a href=\"https://i.stack.imgur.com/IIQxJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IIQxJ.png\" alt=\"enter image description here\" /></a>\nI am not able to understand where is the issue. I have also created a service on Twilio and tested it on using <a href=\"https://console.twilio.com/us1/develop/sms/try-it-out/send-an-sms\" rel=\"nofollow noreferrer\">https://console.twilio.com/us1/develop/sms/try-it-out/send-an-sms</a>. But, I am getting error in the code and I can't find the issue. Please help!</p>\n"},{"tags":["java","plugins","minecraft"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1693294723,"post_id":76995803,"comment_id":135738063,"body_markdown":"Welcome on StackOverflow. You&#39;re talking about the tab completion?","body":"Welcome on StackOverflow. You&#39;re talking about the tab completion?"},{"owner":{"account_id":25239528,"reputation":11,"user_id":19073581,"display_name":"Senne"},"score":0,"creation_date":1693300917,"post_id":76995803,"comment_id":135739242,"body_markdown":"Yes, but I asked in the PaperMC discord and the TabCompleteEvent doesn&#39;t work on vanilla commands","body":"Yes, but I asked in the PaperMC discord and the TabCompleteEvent doesn&#39;t work on vanilla commands"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1693305641,"post_id":76995803,"comment_id":135740078,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":25239528,"reputation":11,"user_id":19073581,"display_name":"Senne"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1693316715,"creation_date":1693254169,"question_id":76995803,"body_markdown":"I am trying to add suggestions (more options in tab complete) to the items part of the Minecraft give command with brigadier from PaperMC. Their is almost no doc for this and I can&#39;t figure it out. \r\n\r\nI want to add custom items to the tab complete list of the give command.\r\n\r\nI tried manually looking into the command tree you get from the AsyncPlayerSendCommandsEvent event. I found a CommandNode with the name items in the give command, but I couldn&#39;t find where to add arguments.","title":"add suggestions to Minecraft give command with PaperMC","body":"<p>I am trying to add suggestions (more options in tab complete) to the items part of the Minecraft give command with brigadier from PaperMC. Their is almost no doc for this and I can't figure it out.</p>\n<p>I want to add custom items to the tab complete list of the give command.</p>\n<p>I tried manually looking into the command tree you get from the AsyncPlayerSendCommandsEvent event. I found a CommandNode with the name items in the give command, but I couldn't find where to add arguments.</p>\n"},{"tags":["java","amazon-sqs","temporal-workflow"],"comments":[{"owner":{"account_id":3447097,"reputation":4331,"user_id":2887657,"display_name":"James"},"score":0,"creation_date":1693315389,"post_id":76991343,"comment_id":135742158,"body_markdown":"Why are you increasing the `WorkflowTaskTimeout` to 1 minute?","body":"Why are you increasing the <code>WorkflowTaskTimeout</code> to 1 minute?"}],"answers":[{"tags":[],"owner":{"account_id":3447097,"reputation":4331,"user_id":2887657,"display_name":"James"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693316574,"creation_date":1693316574,"answer_id":77000768,"question_id":76991343,"body_markdown":"Your Workflow is using a `LinkedBlockingQueue`.\r\n\r\nThat can&#39;t work, because that causes execution to block entirely, preventing completion of the Workflow Task, which ends up timing out.\r\n\r\nHere is a pertinent snippet from [Temporal&#39;s Dev Guide](https://docs.temporal.io/dev-guide/java/foundations#workflow-logic-requirements):\r\n\r\n&gt; Do not use synchronization, locks, or other standard Java blocking concurrency-related classes besides those provided by the Workflow class. There is no need for explicit synchronization because multi-threaded code inside a Workflow is executed one thread at a time and under a global lock.\r\n&gt; - Call Workflow.sleep instead of Thread.sleep.\r\n&gt; - Use Promise and CompletablePromise instead of Future and CompletableFuture.\r\n&gt; - Use WorkflowQueue instead of BlockingQueue.\r\n\r\nThe `WorkflowQueue` class internally uses `Workflow.await` rather than Java&#39;s synchronization primitives, so that wait periods (eg. `poll()`) do not block completion of the current Workflow Task.\r\n\r\nOnce that is fixed, you may also want to reset your `WorkflowTaskTimeout` to its default value (ie. default is 10 seconds, but just remove the `setWorkflowTaskTimeout(...)` call).","title":"Temporal Workflow start workflows with same id in fifo queue and WorkflowTaskTimeout","body":"<p>Your Workflow is using a <code>LinkedBlockingQueue</code>.</p>\n<p>That can't work, because that causes execution to block entirely, preventing completion of the Workflow Task, which ends up timing out.</p>\n<p>Here is a pertinent snippet from <a href=\"https://docs.temporal.io/dev-guide/java/foundations#workflow-logic-requirements\" rel=\"nofollow noreferrer\">Temporal's Dev Guide</a>:</p>\n<blockquote>\n<p>Do not use synchronization, locks, or other standard Java blocking concurrency-related classes besides those provided by the Workflow class. There is no need for explicit synchronization because multi-threaded code inside a Workflow is executed one thread at a time and under a global lock.</p>\n<ul>\n<li>Call Workflow.sleep instead of Thread.sleep.</li>\n<li>Use Promise and CompletablePromise instead of Future and CompletableFuture.</li>\n<li>Use WorkflowQueue instead of BlockingQueue.</li>\n</ul>\n</blockquote>\n<p>The <code>WorkflowQueue</code> class internally uses <code>Workflow.await</code> rather than Java's synchronization primitives, so that wait periods (eg. <code>poll()</code>) do not block completion of the current Workflow Task.</p>\n<p>Once that is fixed, you may also want to reset your <code>WorkflowTaskTimeout</code> to its default value (ie. default is 10 seconds, but just remove the <code>setWorkflowTaskTimeout(...)</code> call).</p>\n"}],"owner":{"account_id":15684809,"reputation":35,"user_id":11317798,"display_name":"Mykhailo Yablon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":263,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693316574,"creation_date":1693212975,"question_id":76991343,"body_markdown":"I&#39;m currently working with the Temporal workflow framework and the Java Temporal SDK. My setup involves an AWS SQS listener that triggers a Temporal workflow. The messages received by the listener contain a sourceId. Based on this sourceId, I need to start Temporal workflows in a queue. However, if there is already a running workflow for the same sourceId, I want to add the new message to a FIFO queue and wait for the previous workflow to complete.\r\nHere&#39;s an overview of the relevant parts of my code:\r\n\r\n\r\n\r\n```\r\n@SqsListener(value = QueueName.PROCESSING_QUEUE,\r\n      deletionPolicy = SqsMessageDeletionPolicy.ON_SUCCESS)\r\npublic void receive(ProcessingMessage message) {\r\n    var workflowId = createWorkflowId(message.getSourceId());\r\n    var options = WorkflowOptions.newBuilder()\r\n        .setTaskQueue(STARTER_WORKFLOW_QUEUE)\r\n        .setWorkflowId(workflowId)\r\n        .setWorkflowTaskTimeout(Duration.of(1, ChronoUnit.MINUTES))\r\n        .build();\r\n    log.info(&quot;Starting workflow with id - {}&quot;, workflowId);\r\n    var workflow = workflowClient.newUntypedWorkflowStub(&quot;RecordStarterWorkflow&quot;, options);\r\n    workflow.signalWithStart(&quot;putNewEmployee&quot;, new Object[]{message}, new Object[]{});\r\n}\r\n```\r\nAnd my RecordStarterWorkflow class\r\n\r\n```\r\nprivate final LinkedBlockingQueue&lt;SingleEnrollmentProcessingMessage&gt; employeeMessages\r\n      = new LinkedBlockingQueue&lt;&gt;();\r\n\r\n@Override\r\npublic void startWorkflow() {\r\n    do {\r\n        var message = employeeMessages.poll();\r\n        var childWorkflow = Workflow.newChildWorkflowStub(SomeWorkflow.class, options);\r\n        try {\r\n            childWorkflow.startWorkflow(message);\r\n        } catch (Exception exception) {\r\n            log.error(&quot;Workflow failed. Workflow id:{} | Message:{}&quot;, options.getWorkflowId(),\r\n                exception.getMessage());\r\n        }\r\n    } while (!employeeMessages.isEmpty());\r\n    log.info(&quot;Processing finished&quot;);\r\n}\r\n\r\n@Override\r\n@SneakyThrows\r\npublic void putNewEmployee(ProcessingMessage message) {\r\n    log.debug(&quot;Received signal with message: {}&quot;, message);\r\n    this.employeeMessages.add(message);\r\n}\r\n```\r\nThe above code works well when processing two sourceId messages. However, as I attempt to scale it and send three or more messages via AWS SQS, I start encountering Timeout exceptions in my workflow execution. This eventually leads to long-running workflows and performance degradation.\r\nI&#39;m seeking advice on how to effectively scale my Temporal workflow processing while avoiding these Timeout exceptions. I suspect that the way I&#39;m handling child workflows and their execution might be causing the issue. If anyone has insights, recommendations, or alternative approaches that could help me address this scaling challenge, I would greatly appreciate your input.\r\n","title":"Temporal Workflow start workflows with same id in fifo queue and WorkflowTaskTimeout","body":"<p>I'm currently working with the Temporal workflow framework and the Java Temporal SDK. My setup involves an AWS SQS listener that triggers a Temporal workflow. The messages received by the listener contain a sourceId. Based on this sourceId, I need to start Temporal workflows in a queue. However, if there is already a running workflow for the same sourceId, I want to add the new message to a FIFO queue and wait for the previous workflow to complete.\nHere's an overview of the relevant parts of my code:</p>\n<pre><code>@SqsListener(value = QueueName.PROCESSING_QUEUE,\n      deletionPolicy = SqsMessageDeletionPolicy.ON_SUCCESS)\npublic void receive(ProcessingMessage message) {\n    var workflowId = createWorkflowId(message.getSourceId());\n    var options = WorkflowOptions.newBuilder()\n        .setTaskQueue(STARTER_WORKFLOW_QUEUE)\n        .setWorkflowId(workflowId)\n        .setWorkflowTaskTimeout(Duration.of(1, ChronoUnit.MINUTES))\n        .build();\n    log.info(&quot;Starting workflow with id - {}&quot;, workflowId);\n    var workflow = workflowClient.newUntypedWorkflowStub(&quot;RecordStarterWorkflow&quot;, options);\n    workflow.signalWithStart(&quot;putNewEmployee&quot;, new Object[]{message}, new Object[]{});\n}\n</code></pre>\n<p>And my RecordStarterWorkflow class</p>\n<pre><code>private final LinkedBlockingQueue&lt;SingleEnrollmentProcessingMessage&gt; employeeMessages\n      = new LinkedBlockingQueue&lt;&gt;();\n\n@Override\npublic void startWorkflow() {\n    do {\n        var message = employeeMessages.poll();\n        var childWorkflow = Workflow.newChildWorkflowStub(SomeWorkflow.class, options);\n        try {\n            childWorkflow.startWorkflow(message);\n        } catch (Exception exception) {\n            log.error(&quot;Workflow failed. Workflow id:{} | Message:{}&quot;, options.getWorkflowId(),\n                exception.getMessage());\n        }\n    } while (!employeeMessages.isEmpty());\n    log.info(&quot;Processing finished&quot;);\n}\n\n@Override\n@SneakyThrows\npublic void putNewEmployee(ProcessingMessage message) {\n    log.debug(&quot;Received signal with message: {}&quot;, message);\n    this.employeeMessages.add(message);\n}\n</code></pre>\n<p>The above code works well when processing two sourceId messages. However, as I attempt to scale it and send three or more messages via AWS SQS, I start encountering Timeout exceptions in my workflow execution. This eventually leads to long-running workflows and performance degradation.\nI'm seeking advice on how to effectively scale my Temporal workflow processing while avoiding these Timeout exceptions. I suspect that the way I'm handling child workflows and their execution might be causing the issue. If anyone has insights, recommendations, or alternative approaches that could help me address this scaling challenge, I would greatly appreciate your input.</p>\n"},{"tags":["java","struts2","parameter-passing","chain","model-driven"],"answers":[{"comments":[{"owner":{"account_id":533426,"reputation":5411,"user_id":903907,"accept_rate":52,"display_name":"muthu"},"score":0,"creation_date":1357101467,"post_id":14112680,"comment_id":19538193,"body_markdown":"@AndreaLigios Why we avoid Chain Result? Shall i know the reason","body":"@AndreaLigios Why we avoid Chain Result? Shall i know the reason"},{"owner":{"account_id":14645,"reputation":14042,"user_id":30354,"accept_rate":100,"display_name":"Ulf Lindback"},"score":0,"creation_date":1423638804,"post_id":14112680,"comment_id":45225369,"body_markdown":"Cannot edit comment, so adding an updated link to action chaining in a new comment: http://struts.apache.org/docs/action-chaining.html","body":"Cannot edit comment, so adding an updated link to action chaining in a new comment: <a href=\"http://struts.apache.org/docs/action-chaining.html\" rel=\"nofollow noreferrer\">struts.apache.org/docs/action-chaining.html</a>"}],"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693316131,"creation_date":1357062095,"answer_id":14112680,"question_id":14111092,"body_markdown":"Put your data into the session or use parameters with a result as described [here][1] and [there][2].\r\n\r\n&gt;Parameters can be passed to results using the params attribute. The value of this attribute is a string array with an even number of elements in the form {&quot;key0&quot;, &quot;value0, &quot;key1&quot;, &quot;value1&quot; ... &quot;keyN&quot;, &quot;valueN&quot;}. For example:\r\n\r\n&gt;      @Action(value=&quot;/different/url&quot;,\r\n        results={@Result(name=&quot;success&quot;, type=&quot;httpheader&quot;, params={&quot;status&quot;, &quot;500&quot;, &quot;errorMessage&quot;, &quot;Internal Error&quot;})}\r\n      )\r\n\r\n  [1]: https://cwiki.apache.org/confluence/display/WW/Parameters+in+configuration+results\r\n  [2]: https://struts.apache.org/plugins/convention/#result-annotation\r\n","title":"Struts 2 - Passing parameters between action are lost when second action works with form","body":"<p>Put your data into the session or use parameters with a result as described <a href=\"https://cwiki.apache.org/confluence/display/WW/Parameters+in+configuration+results\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://struts.apache.org/plugins/convention/#result-annotation\" rel=\"nofollow noreferrer\">there</a>.</p>\n<blockquote>\n<p>Parameters can be passed to results using the params attribute. The value of this attribute is a string array with an even number of elements in the form {&quot;key0&quot;, &quot;value0, &quot;key1&quot;, &quot;value1&quot; ... &quot;keyN&quot;, &quot;valueN&quot;}. For example:</p>\n</blockquote>\n<blockquote>\n<pre><code> @Action(value=&quot;/different/url&quot;,\n</code></pre>\n</blockquote>\n<pre><code>    results={@Result(name=&quot;success&quot;, type=&quot;httpheader&quot;, params={&quot;status&quot;, &quot;500&quot;, &quot;errorMessage&quot;, &quot;Internal Error&quot;})}\n  )\n</code></pre>\n"}],"owner":{"account_id":1848393,"reputation":37,"user_id":1675543,"display_name":"PeeNpee PeePeen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3867,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":14112680,"answer_count":1,"score":1,"last_activity_date":1693316131,"creation_date":1357048761,"question_id":14111092,"body_markdown":"I have two action classes which work with same model over `ModelDriven` interface.\r\n**Every action class works with form**. \r\nI need to store values to same model in both actions.\r\n\r\nFrom first action class(after validation), I pass modeldriven model into second class through:\r\n\r\n    @Result(name = &quot;success&quot;, location = &quot;action2&quot;, type = &quot;chain&quot;)\r\n\r\nIn second action class, I show values, which has been store into model in first action.\r\n\r\nThis works fine, but when I execute form submit in second action, stored values\r\nfrom first action are lost.\r\n\r\n**So, data from first action are stored only for first call second action.**\r\n\r\nIs there any solution to achieve this?\r\n\r\n","title":"Struts 2 - Passing parameters between action are lost when second action works with form","body":"<p>I have two action classes which work with same model over <code>ModelDriven</code> interface.\n<strong>Every action class works with form</strong>. \nI need to store values to same model in both actions.</p>\n\n<p>From first action class(after validation), I pass modeldriven model into second class through:</p>\n\n<pre><code>@Result(name = \"success\", location = \"action2\", type = \"chain\")\n</code></pre>\n\n<p>In second action class, I show values, which has been store into model in first action.</p>\n\n<p>This works fine, but when I execute form submit in second action, stored values\nfrom first action are lost.</p>\n\n<p><strong>So, data from first action are stored only for first call second action.</strong></p>\n\n<p>Is there any solution to achieve this?</p>\n"},{"tags":["java","algorithm","random","game-development"],"comments":[{"owner":{"account_id":28578269,"reputation":142,"user_id":21879587,"display_name":"tamtejszystan"},"score":1,"creation_date":1693307082,"post_id":76999591,"comment_id":135740326,"body_markdown":"Please add some source code for better context.","body":"Please add some source code for better context."},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1693307144,"post_id":76999591,"comment_id":135740350,"body_markdown":"What you already tried?","body":"What you already tried?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1693307157,"post_id":76999591,"comment_id":135740353,"body_markdown":"Have you considered the obvious and simple method of creating a new random position if the one generated was already taken?","body":"Have you considered the obvious and simple method of creating a new random position if the one generated was already taken?"},{"owner":{"account_id":25387878,"reputation":29,"user_id":19199417,"display_name":"user502233"},"score":0,"creation_date":1693307305,"post_id":76999591,"comment_id":135740379,"body_markdown":"@Kayaman yes, but it is not optimized","body":"@Kayaman yes, but it is not optimized"},{"owner":{"account_id":25387878,"reputation":29,"user_id":19199417,"display_name":"user502233"},"score":0,"creation_date":1693307438,"post_id":76999591,"comment_id":135740397,"body_markdown":"@DiegoBorba to use HashSet","body":"@DiegoBorba to use HashSet"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1693307537,"post_id":76999591,"comment_id":135740412,"body_markdown":"It doesn&#39;t matter if it&#39;s not optimized, neither is the rest of your code.","body":"It doesn&#39;t matter if it&#39;s not optimized, neither is the rest of your code."},{"owner":{"account_id":25387878,"reputation":29,"user_id":19199417,"display_name":"user502233"},"score":0,"creation_date":1693307652,"post_id":76999591,"comment_id":135740435,"body_markdown":"@Kayaman why? I always felt the opposite.","body":"@Kayaman why? I always felt the opposite."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1693307874,"post_id":76999591,"comment_id":135740481,"body_markdown":"You&#39;re writing a battleship game where you generate positions rarely. There&#39;s no real performance benefits to be had. You&#39;re also overengineering this, making a simple issue into a complex.","body":"You&#39;re writing a battleship game where you generate positions rarely. There&#39;s no real performance benefits to be had. You&#39;re also overengineering this, making a simple issue into a complex."},{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":0,"creation_date":1693307998,"post_id":76999591,"comment_id":135740511,"body_markdown":"Premature optimization is a bad thing. Make it work first!","body":"Premature optimization is a bad thing. Make it work first!"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1693308045,"post_id":76999591,"comment_id":135740521,"body_markdown":"Stupid optimization is a bad thing. Unfortunately all programmers go through the same &quot;what if every line were optimized&quot; idea when they start and don&#39;t understand what &quot;performance&quot; means, before they get a job and have to provide actual results.","body":"Stupid optimization is a bad thing. Unfortunately all programmers go through the same &quot;what if every line were optimized&quot; idea when they start and don&#39;t understand what &quot;performance&quot; means, before they get a job and have to provide actual results."},{"owner":{"account_id":25387878,"reputation":29,"user_id":19199417,"display_name":"user502233"},"score":0,"creation_date":1693308258,"post_id":76999591,"comment_id":135740570,"body_markdown":"@Kayaman you are right, I&#39;d better make different logic, but still, I was wondering how it can be optimized","body":"@Kayaman you are right, I&#39;d better make different logic, but still, I was wondering how it can be optimized"},{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":0,"creation_date":1693308417,"post_id":76999591,"comment_id":135740610,"body_markdown":"If you don&#39;t want to iterate random tries, then you can keep a list of valid positions. Remove entries from this list as they become invalid. Select a random value from this list.","body":"If you don&#39;t want to iterate random tries, then you can keep a list of valid positions. Remove entries from this list as they become invalid. Select a random value from this list."},{"owner":{"account_id":25387878,"reputation":29,"user_id":19199417,"display_name":"user502233"},"score":0,"creation_date":1693308656,"post_id":76999591,"comment_id":135740663,"body_markdown":"@Sam I thought about it, but it is less optimized, in game user can pick cells count, and what if I have 10000000000 cells, and I will place only 3 ships? and in java the ArrayList.remove() is O(n) (because it&#39;s backend is the simple array)","body":"@Sam I thought about it, but it is less optimized, in game user can pick cells count, and what if I have 10000000000 cells, and I will place only 3 ships? and in java the ArrayList.remove() is O(n) (because it&#39;s backend is the simple array)"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1693308910,"post_id":76999591,"comment_id":135740721,"body_markdown":"Please provide `Cell` class and the enum class used in `switch(d)`.","body":"Please provide <code>Cell</code> class and the enum class used in <code>switch(d)</code>."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1693309198,"post_id":76999591,"comment_id":135740792,"body_markdown":"You have to identify your problem first, before you can search for solutions. Even if the generated start positions are unique, it doesn’t guaranty that the ships which extend over multiple cells won’t overlap. Further note that with your current strategy of restricting the start position, certain legal placements are impossible (e.g. a vertical ship close to the right border or a horizontal ship close to the lower border [or upper border when you direction is upward]).","body":"You have to identify your problem first, before you can search for solutions. Even if the generated start positions are unique, it doesn’t guaranty that the ships which extend over multiple cells won’t overlap. Further note that with your current strategy of restricting the start position, certain legal placements are impossible (e.g. a vertical ship close to the right border or a horizontal ship close to the lower border [or upper border when you direction is upward])."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1693309538,"post_id":76999591,"comment_id":135740863,"body_markdown":"@user502233: No real battleship game has 10000000000 cells, so you&#39;re moving the goal post. One important skill you will need to develop is to find out &quot;what is needed&quot;: do I need this code to be able to handle very large number of sparsely populated cells? (then the &quot;try random, repeate if occupied&quot; method works fine) or do I need to do be able to handle &quot;normal battleship dimensions&quot;? Because writing the code that can handle all of these equally well is most certainly wasted effort: it&#39;s not needed.","body":"@user502233: No real battleship game has 10000000000 cells, so you&#39;re moving the goal post. One important skill you will need to develop is to find out &quot;what is needed&quot;: do I need this code to be able to handle very large number of sparsely populated cells? (then the &quot;try random, repeate if occupied&quot; method works fine) or do I need to do be able to handle &quot;normal battleship dimensions&quot;? Because writing the code that can handle all of these equally well is most certainly wasted effort: it&#39;s not needed."},{"owner":{"account_id":25387878,"reputation":29,"user_id":19199417,"display_name":"user502233"},"score":0,"creation_date":1693310036,"post_id":76999591,"comment_id":135740958,"body_markdown":"@JoachimSauer thank you, I am going to make  more flexible design (for follower ideas) and less absolute solution.","body":"@JoachimSauer thank you, I am going to make  more flexible design (for follower ideas) and less absolute solution."},{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":0,"creation_date":1693311991,"post_id":76999591,"comment_id":135741371,"body_markdown":"There are a few paths to pick from here. Either you go for a optimistic approach (let&#39;s try this box, is it valid?) or a pessimistic approach (keeping track of what valid choices there are). Keeping track of valid choices can either be whitelisting or blacklisting. These options all come with price, and that price varies with size and filling rate. No one size fits all here.","body":"There are a few paths to pick from here. Either you go for a optimistic approach (let&#39;s try this box, is it valid?) or a pessimistic approach (keeping track of what valid choices there are). Keeping track of valid choices can either be whitelisting or blacklisting. These options all come with price, and that price varies with size and filling rate. No one size fits all here."},{"owner":{"account_id":25387878,"reputation":29,"user_id":19199417,"display_name":"user502233"},"score":0,"creation_date":1693312272,"post_id":76999591,"comment_id":135741441,"body_markdown":"@Sam, I decide to use the optimistic approach, and make the hasColision method for Cells(no Cell) class then iterate over the collection of Cells(no Cell) and  call hasColision method","body":"@Sam, I decide to use the optimistic approach, and make the hasColision method for Cells(no Cell) class then iterate over the collection of Cells(no Cell) and  call hasColision method"}],"answers":[{"tags":[],"owner":{"account_id":25387878,"reputation":29,"user_id":19199417,"display_name":"user502233"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693316039,"creation_date":1693315996,"answer_id":77000695,"question_id":76999591,"body_markdown":"I come up with a really good algorithm, but to understand this, you will know the work and feature of LCG. I have NoneRepeatRandomPairs class, and `int[] getPair(int first)` method in it, that class is storing a HashMap with integer key and LCG like Randomizer value in it, when you  request a new random pair giving an int, it gets the neccesery LCG(at your provided key) from HashMap, and return your provided int with new generated, if the LCG&#39;s period is passed then the key is changing inner  LCG with other from the same HashMap, and the `int[] getPair(int first)` is giving the redirected integer and another integer genereted by it&#39;s LCG","title":"How to get non repeating random number pairs,elements can repeat","body":"<p>I come up with a really good algorithm, but to understand this, you will know the work and feature of LCG. I have NoneRepeatRandomPairs class, and <code>int[] getPair(int first)</code> method in it, that class is storing a HashMap with integer key and LCG like Randomizer value in it, when you  request a new random pair giving an int, it gets the neccesery LCG(at your provided key) from HashMap, and return your provided int with new generated, if the LCG's period is passed then the key is changing inner  LCG with other from the same HashMap, and the <code>int[] getPair(int first)</code> is giving the redirected integer and another integer genereted by it's LCG</p>\n"}],"owner":{"account_id":25387878,"reputation":29,"user_id":19199417,"display_name":"user502233"},"comment_count":19,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1693316039,"creation_date":1693306862,"question_id":76999591,"body_markdown":"I&#39;m currently programming a  BattleShip game in Java, I randomly generate x, then y for the first cell of the ship,\r\n\r\n```Java\r\npublic class Cell implements Comparable&lt;Cell&gt; {\r\n\r\n\r\n    private final int x;\r\n    private final int y;\r\n\r\n    public int getX() {\r\n        return x;\r\n    }\r\n\r\n    public int getY() {\r\n        return y;\r\n    }\r\n\r\n    Cell(int xc, int yc) {\r\n        x = xc;\r\n        y = yc;\r\n    }\r\n\r\n\r\n    public Cell continueWithDirection(Direction d) {\r\n        switch (d) {\r\n            case ROW -&gt; {\r\n                return new Cell(x + 1, y);\r\n            }\r\n\r\n            case COLUMN -&gt; {\r\n                return new Cell(x, y + 1);\r\n            }\r\n        }\r\n        ;\r\n\r\n        return new Cell(x, y);\r\n    }\r\n}\r\n\r\n//file 2\r\n\r\nimport java.util.Random;\r\n\r\npublic enum Direction {\r\n    ROW,\r\n    COLUMN;\r\n\r\n  private static final Random randomizer=new Random();\r\n  \r\n    static Direction random(){\r\n        boolean b = randomizer.nextBoolean();\r\n        if (b) {\r\n            return Direction.ROW;\r\n        } else {\r\n            return Direction.COLUMN;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```Java\r\nCell[] cells = new Cell[size];\r\ncells[0] = new Cell(randomizer.nextInt(getAreaWidth() - size + 1), randomizer.nextInt(getAreaHeight() - size + 1));\r\n\r\nfor (int i = 1; i &lt; cells.length; i++) {\r\n\tcells[i] = cells[i - 1].continueWithDirection(getDirection());\r\n}\r\n\r\nreturn cells;\r\n```\r\n\r\n and then choose a random direction (either up or right) for the other 2 cells of the ship\r\n the first cell is placed from 0 to `bound-shipSize + 1` x and y bound, so I guarantee that all ships will be placed in the border area, but how do I implement random coordinate generation without repeating the same x and y together.  I thought to randomly generate only the first ship, then just randomly go in some direction from the ship and put a new ship, but even so I have to store an array of all ships, and detect collisions.  How can I better implement this algorithm","title":"How to get non repeating random number pairs,elements can repeat","body":"<p>I'm currently programming a  BattleShip game in Java, I randomly generate x, then y for the first cell of the ship,</p>\n<pre><code>public class Cell implements Comparable&lt;Cell&gt; {\n\n\n    private final int x;\n    private final int y;\n\n    public int getX() {\n        return x;\n    }\n\n    public int getY() {\n        return y;\n    }\n\n    Cell(int xc, int yc) {\n        x = xc;\n        y = yc;\n    }\n\n\n    public Cell continueWithDirection(Direction d) {\n        switch (d) {\n            case ROW -&gt; {\n                return new Cell(x + 1, y);\n            }\n\n            case COLUMN -&gt; {\n                return new Cell(x, y + 1);\n            }\n        }\n        ;\n\n        return new Cell(x, y);\n    }\n}\n\n//file 2\n\nimport java.util.Random;\n\npublic enum Direction {\n    ROW,\n    COLUMN;\n\n  private static final Random randomizer=new Random();\n  \n    static Direction random(){\n        boolean b = randomizer.nextBoolean();\n        if (b) {\n            return Direction.ROW;\n        } else {\n            return Direction.COLUMN;\n        }\n    }\n}\n</code></pre>\n<pre><code>Cell[] cells = new Cell[size];\ncells[0] = new Cell(randomizer.nextInt(getAreaWidth() - size + 1), randomizer.nextInt(getAreaHeight() - size + 1));\n\nfor (int i = 1; i &lt; cells.length; i++) {\n    cells[i] = cells[i - 1].continueWithDirection(getDirection());\n}\n\nreturn cells;\n</code></pre>\n<p>and then choose a random direction (either up or right) for the other 2 cells of the ship\nthe first cell is placed from 0 to <code>bound-shipSize + 1</code> x and y bound, so I guarantee that all ships will be placed in the border area, but how do I implement random coordinate generation without repeating the same x and y together.  I thought to randomly generate only the first ship, then just randomly go in some direction from the ship and put a new ship, but even so I have to store an array of all ships, and detect collisions.  How can I better implement this algorithm</p>\n"},{"tags":["java","android-studio","gradle"],"answers":[{"comments":[{"owner":{"account_id":324617,"reputation":665,"user_id":5438128,"accept_rate":50,"display_name":"ebyrob"},"score":0,"creation_date":1700151496,"post_id":77000688,"comment_id":136622004,"body_markdown":"Where is the persistent window where I can see this error in android studio?  Why does it just come up as a &quot;toast&quot;.  Where can I click the error to be taken to this line of code?  (in a persistent window?)  How would I know this error is happening in the AndroidManfest.xml file without choosing to write all android apps via SDK WITHOUT Android Studio?","body":"Where is the persistent window where I can see this error in android studio?  Why does it just come up as a &quot;toast&quot;.  Where can I click the error to be taken to this line of code?  (in a persistent window?)  How would I know this error is happening in the AndroidManfest.xml file without choosing to write all android apps via SDK WITHOUT Android Studio?"}],"tags":[],"owner":{"account_id":9902388,"reputation":189,"user_id":7332002,"display_name":"Muhammad Aasharib Nawshad"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1693315931,"creation_date":1693315931,"answer_id":77000688,"question_id":76921843,"body_markdown":"**ERROR REASON:**\r\nIn your AndroidManifest.xml you have to provide default activity. But in your case you have commented out \r\n\r\n    &lt;intent-filter&gt;\r\n           &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n           &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n    &lt;/intent-filter&gt;\r\n\r\nwhich is needed to be provided to default activity. \r\n\r\n**SOLUTION:**\r\njust uncomment or add these lines to your activity tag. Hopefully this solution will work.","title":"Error running &#39;app&#39; Unable to determine activity name","body":"<p><strong>ERROR REASON:</strong>\nIn your AndroidManifest.xml you have to provide default activity. But in your case you have commented out</p>\n<pre><code>&lt;intent-filter&gt;\n       &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n       &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n&lt;/intent-filter&gt;\n</code></pre>\n<p>which is needed to be provided to default activity.</p>\n<p><strong>SOLUTION:</strong>\njust uncomment or add these lines to your activity tag. Hopefully this solution will work.</p>\n"}],"owner":{"account_id":16430837,"reputation":181,"user_id":11869740,"display_name":"Yunus Emrah Ulu&#231;ay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4714,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"accepted_answer_id":77000688,"answer_count":1,"score":2,"last_activity_date":1693315931,"creation_date":1692277783,"question_id":76921843,"body_markdown":"I am working on Android Studio. I have created a Tabbed View Activity by first creating an Empty Activity. When I try to run the project I got the error below. I tried to Clean Project, Build Project, Invalidating Caches and updating the Gradle Version. But I still getting the error. How can I proceed ? \r\n[![error_img][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oh3yO.png\r\n\r\n\r\nbuild.gradle.kts(Module) : \r\n\r\n    plugins {\r\n        id(&quot;com.android.application&quot;)\r\n    }\r\n    \r\n    android {\r\n        namespace = &quot;com.yunusulucay.myapplication&quot;\r\n        compileSdk = 33\r\n    \r\n        defaultConfig {\r\n            applicationId = &quot;com.yunusulucay.myapplication&quot;\r\n            minSdk = 24\r\n            targetSdk = 33\r\n            versionCode = 1\r\n            versionName = &quot;1.0&quot;\r\n    \r\n            testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        }\r\n    \r\n        buildTypes {\r\n            release {\r\n                isMinifyEnabled = false\r\n                proguardFiles(getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;), &quot;proguard-rules.pro&quot;)\r\n            }\r\n        }\r\n        compileOptions {\r\n            sourceCompatibility = JavaVersion.VERSION_11\r\n            targetCompatibility = JavaVersion.VERSION_11\r\n        }\r\n        buildFeatures {\r\n            viewBinding = true\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n    \r\n        implementation(&quot;androidx.appcompat:appcompat:1.6.1&quot;)\r\n        implementation(&quot;com.google.android.material:material:1.9.0&quot;)\r\n        implementation(&quot;androidx.constraintlayout:constraintlayout:2.1.4&quot;)\r\n        implementation(&quot;androidx.lifecycle:lifecycle-livedata-ktx:2.5.1&quot;)\r\n        implementation(&quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.5.1&quot;)\r\n        testImplementation(&quot;junit:junit:4.13.2&quot;)\r\n        androidTestImplementation(&quot;androidx.test.ext:junit:1.1.5&quot;)\r\n        androidTestImplementation(&quot;androidx.test.espresso:espresso-core:3.5.1&quot;)\r\n    }\r\n\r\nAndroidManifest.xml : \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n            android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n            android:supportsRtl=&quot;true&quot;\r\n            android:theme=&quot;@style/Theme.MyApplication&quot;\r\n            tools:targetApi=&quot;31&quot;&gt;\r\n            &lt;activity\r\n                android:name=&quot;.MainActivity&quot;\r\n                android:exported=&quot;false&quot;\r\n                android:label=&quot;@string/title_activity_main&quot;\r\n                android:theme=&quot;@style/Theme.MyApplication.AppBarOverlay&quot;\r\n                &gt;\r\n    \r\n    &lt;!--            &lt;intent-filter&gt;--&gt;\r\n    &lt;!--                &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;--&gt;\r\n    &lt;!--                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;/&gt;--&gt;\r\n    \r\n    &lt;!--            &lt;/intent-filter&gt;--&gt;\r\n    \r\n            &lt;/activity&gt;\r\n       &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;\r\n\r\n","title":"Error running &#39;app&#39; Unable to determine activity name","body":"<p>I am working on Android Studio. I have created a Tabbed View Activity by first creating an Empty Activity. When I try to run the project I got the error below. I tried to Clean Project, Build Project, Invalidating Caches and updating the Gradle Version. But I still getting the error. How can I proceed ?\n<a href=\"https://i.stack.imgur.com/oh3yO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oh3yO.png\" alt=\"error_img\" /></a></p>\n<p>build.gradle.kts(Module) :</p>\n<pre><code>plugins {\n    id(&quot;com.android.application&quot;)\n}\n\nandroid {\n    namespace = &quot;com.yunusulucay.myapplication&quot;\n    compileSdk = 33\n\n    defaultConfig {\n        applicationId = &quot;com.yunusulucay.myapplication&quot;\n        minSdk = 24\n        targetSdk = 33\n        versionCode = 1\n        versionName = &quot;1.0&quot;\n\n        testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            isMinifyEnabled = false\n            proguardFiles(getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;), &quot;proguard-rules.pro&quot;)\n        }\n    }\n    compileOptions {\n        sourceCompatibility = JavaVersion.VERSION_11\n        targetCompatibility = JavaVersion.VERSION_11\n    }\n    buildFeatures {\n        viewBinding = true\n    }\n}\n\ndependencies {\n\n    implementation(&quot;androidx.appcompat:appcompat:1.6.1&quot;)\n    implementation(&quot;com.google.android.material:material:1.9.0&quot;)\n    implementation(&quot;androidx.constraintlayout:constraintlayout:2.1.4&quot;)\n    implementation(&quot;androidx.lifecycle:lifecycle-livedata-ktx:2.5.1&quot;)\n    implementation(&quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.5.1&quot;)\n    testImplementation(&quot;junit:junit:4.13.2&quot;)\n    androidTestImplementation(&quot;androidx.test.ext:junit:1.1.5&quot;)\n    androidTestImplementation(&quot;androidx.test.espresso:espresso-core:3.5.1&quot;)\n}\n</code></pre>\n<p>AndroidManifest.xml :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.MyApplication&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;false&quot;\n            android:label=&quot;@string/title_activity_main&quot;\n            android:theme=&quot;@style/Theme.MyApplication.AppBarOverlay&quot;\n            &gt;\n\n&lt;!--            &lt;intent-filter&gt;--&gt;\n&lt;!--                &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;--&gt;\n&lt;!--                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;/&gt;--&gt;\n\n&lt;!--            &lt;/intent-filter&gt;--&gt;\n\n        &lt;/activity&gt;\n   &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9733,"reputation":98826,"user_id":18103,"accept_rate":68,"display_name":"skiphoppy"},"score":6,"creation_date":1346866749,"post_id":12286871,"comment_id":16480626,"body_markdown":"Please specify how Class.forName() &quot;didn&#39;t work.&quot;","body":"Please specify how Class.forName() &quot;didn&#39;t work.&quot;"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":3,"creation_date":1346866824,"post_id":12286871,"comment_id":16480654,"body_markdown":"If Class.forName() didn&#39;t work, its very likely that a) the class name is not right b) you got an error message but didn&#39;t know what it meant so you ignored it. ;)","body":"If Class.forName() didn&#39;t work, its very likely that a) the class name is not right b) you got an error message but didn&#39;t know what it meant so you ignored it. ;)"},{"owner":{"account_id":1324014,"reputation":5651,"user_id":1311351,"display_name":"Colin D"},"score":1,"creation_date":1346867094,"post_id":12286871,"comment_id":16480764,"body_markdown":"Post your error message! and post the code where you tried using `Class.forName()`","body":"Post your error message! and post the code where you tried using <code>Class.forName()</code>"}],"answers":[{"comments":[{"owner":{"account_id":1814350,"reputation":163,"user_id":1649770,"accept_rate":75,"display_name":"Bipin Wanchoo"},"score":1,"creation_date":1374090711,"post_id":12286949,"comment_id":25808297,"body_markdown":"Yes, the className was not fully qualified.\nUpon giving the fully qualified name, it worked :)\n\nThanks :)","body":"Yes, the className was not fully qualified. Upon giving the fully qualified name, it worked :)  Thanks :)"}],"tags":[],"owner":{"account_id":65096,"reputation":15647,"user_id":191797,"accept_rate":100,"display_name":"Piyush Mattoo"},"comment_count":1,"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1346866933,"creation_date":1346866933,"answer_id":12286949,"question_id":12286871,"body_markdown":"    Class&lt;?&gt; classType = Class.forName(className);\r\n\r\nMake sure `className` is fully qualified class name like `com.package.class` Also, please share your error message that you see.","title":"How to convert String type to Class type in java","body":"<pre><code>Class&lt;?&gt; classType = Class.forName(className);\n</code></pre>\n\n<p>Make sure <code>className</code> is fully qualified class name like <code>com.package.class</code> Also, please share your error message that you see.</p>\n"},{"tags":[],"owner":{"account_id":1443308,"reputation":6387,"user_id":1362735,"accept_rate":50,"display_name":"heretolearn"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1346870025,"creation_date":1346868115,"answer_id":12287231,"question_id":12286871,"body_markdown":"If the fully-qualified name of a class is available, it is possible to get the corresponding Class using the static method Class.forName().\r\n\r\nEg:\r\n\r\n    Class c = Class.forName(&quot;com.duke.MyLocaleServiceProvider&quot;); \r\n\r\n&gt; **Note:** Make sure the parameter you provide for the function is fully qualified class name like com.package.class \r\n\r\n\r\n[Check here](http://docs.oracle.com/javase/tutorial/reflect/class/classNew.html) for any reference.\r\n\r\n**EDIT:**\r\n\r\nYou could also try using `loadClass()` method.\r\n\r\nEg:\r\n\r\n     ClassLoader cl;\r\n     Class c = cl.loadClass(name);\r\n\r\nIt is invoked by the Java virtual machine to resolve class references.\r\n\r\n**Syntax:**\r\n\r\n    public Class&lt;?&gt; loadClass(String name)\r\n                       throws ClassNotFoundException\r\n\r\n[For details on ClassLoader check here](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html)\r\n\r\n[Here](http://www.java2s.com/Code/Java/Reflection/ConvertagivenStringintotheappropriateClass.htm)\r\nis an implementation of ClassLoader.","title":"How to convert String type to Class type in java","body":"<p>If the fully-qualified name of a class is available, it is possible to get the corresponding Class using the static method Class.forName().</p>\n\n<p>Eg:</p>\n\n<pre><code>Class c = Class.forName(\"com.duke.MyLocaleServiceProvider\"); \n</code></pre>\n\n<blockquote>\n  <p><strong>Note:</strong> Make sure the parameter you provide for the function is fully qualified class name like com.package.class </p>\n</blockquote>\n\n<p><a href=\"http://docs.oracle.com/javase/tutorial/reflect/class/classNew.html\" rel=\"nofollow\">Check here</a> for any reference.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>You could also try using <code>loadClass()</code> method.</p>\n\n<p>Eg:</p>\n\n<pre><code> ClassLoader cl;\n Class c = cl.loadClass(name);\n</code></pre>\n\n<p>It is invoked by the Java virtual machine to resolve class references.</p>\n\n<p><strong>Syntax:</strong></p>\n\n<pre><code>public Class&lt;?&gt; loadClass(String name)\n                   throws ClassNotFoundException\n</code></pre>\n\n<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html\" rel=\"nofollow\">For details on ClassLoader check here</a></p>\n\n<p><a href=\"http://www.java2s.com/Code/Java/Reflection/ConvertagivenStringintotheappropriateClass.htm\" rel=\"nofollow\">Here</a>\nis an implementation of ClassLoader.</p>\n"},{"tags":[],"owner":{"account_id":11400119,"reputation":11,"user_id":8357329,"display_name":"Pranay"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1500897557,"creation_date":1500894400,"answer_id":45279012,"question_id":12286871,"body_markdown":"Please try as following.\r\n\r\n    String str = &quot;RequiredClassName&quot;;    \r\n    Class &lt;?&gt; Cref = Class .forName(&quot;PackageNaem.&quot;+str );","title":"How to convert String type to Class type in java","body":"<p>Please try as following.</p>\n\n<pre><code>String str = \"RequiredClassName\";    \nClass &lt;?&gt; Cref = Class .forName(\"PackageNaem.\"+str );\n</code></pre>\n"}],"owner":{"account_id":1814350,"reputation":163,"user_id":1649770,"accept_rate":75,"display_name":"Bipin Wanchoo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58215,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":12286949,"answer_count":3,"score":15,"last_activity_date":1693315654,"creation_date":1346866627,"question_id":12286871,"body_markdown":"I want to print all the class names in a package and also to print the corresponding attributes and their data types in each package.\r\n\r\nIn one code, I am able to get the classnames in the form of string.\r\nIn another code I am able to get the attributes and their data types using `Classname.class.getAttribute();`\r\n\r\nHowever I want to merge the two codes. Since in the first code I got the classnames in the form of string , I can&#39;t use `Classname.class.getAttribute()` since here `Classname` will be of type `String`.\r\n\r\nSo I want a method which will convert the &quot;Classname&quot; from `String` type to `Class` type.\r\n\r\nI tried `Class.forName()` but it didn&#39;t work.","title":"How to convert String type to Class type in java","body":"<p>I want to print all the class names in a package and also to print the corresponding attributes and their data types in each package.</p>\n\n<p>In one code, I am able to get the classnames in the form of string.\nIn another code I am able to get the attributes and their data types using <code>Classname.class.getAttribute();</code></p>\n\n<p>However I want to merge the two codes. Since in the first code I got the classnames in the form of string , I can't use <code>Classname.class.getAttribute()</code> since here <code>Classname</code> will be of type <code>String</code>.</p>\n\n<p>So I want a method which will convert the \"Classname\" from <code>String</code> type to <code>Class</code> type.</p>\n\n<p>I tried <code>Class.forName()</code> but it didn't work.</p>\n"},{"tags":["java","spring-boot","rest","spring-security","dynamic-permissions"],"answers":[{"tags":[],"owner":{"account_id":10827831,"reputation":143,"user_id":7963227,"display_name":"Sametcey"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1693315598,"creation_date":1681203430,"answer_id":75984075,"question_id":75983493,"body_markdown":"My Opinion: Change your Security Concept!\r\n\r\n1) Use JWT to secure your endpoint!\r\n2) You can create Role-Based Permissions which are Stored in your Datbase and if you make a Request so the Roles will load from your Database -&gt; Which are combined with UserDetailsService from Springboot Library\r\n3) in your RESTController you can then use `@RolesAllowed(&quot;ROLE_EDITOR&quot;)`\r\n\r\nfor more Information look at this website:\r\n\r\nhttps://www.codejava.net/frameworks/spring-boot/spring-security-jwt-role-based-authorization\r\n","title":"Securing REST API Endpoints in Spring Boot with Spring Security: Handling Dynamically Changing Permissions","body":"<p>My Opinion: Change your Security Concept!</p>\n<ol>\n<li>Use JWT to secure your endpoint!</li>\n<li>You can create Role-Based Permissions which are Stored in your Datbase and if you make a Request so the Roles will load from your Database -&gt; Which are combined with UserDetailsService from Springboot Library</li>\n<li>in your RESTController you can then use <code>@RolesAllowed(&quot;ROLE_EDITOR&quot;)</code></li>\n</ol>\n<p>for more Information look at this website:</p>\n<p><a href=\"https://www.codejava.net/frameworks/spring-boot/spring-security-jwt-role-based-authorization\" rel=\"nofollow noreferrer\">https://www.codejava.net/frameworks/spring-boot/spring-security-jwt-role-based-authorization</a></p>\n"}],"owner":{"display_name":"user15773347"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":482,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693315598,"creation_date":1681198698,"question_id":75983493,"body_markdown":"I&#39;m building a REST API using Spring Boot and Spring Security for my application. I have different roles and permissions defined in my system, and I want to secure my API endpoints based on these permissions. However, I have a requirement where the permissions for certain endpoints can change dynamically at runtime, without requiring a server restart or application redeployment.\r\n\r\nI&#39;ve looked into using `@PreAuthorize` and `@PostAuthorize` annotations provided by Spring Security, but they seem to work only with fixed permissions defined in the code or configuration files. I need a solution that allows me to handle dynamically changing permissions for my API endpoints without restarting the application.\r\n\r\nIs there a way to achieve this using Spring Boot and Spring Security? How can I implement a solution that allows me to handle dynamically changing permissions for my REST API endpoints in Spring Boot without requiring a server restart or application redeployment?","title":"Securing REST API Endpoints in Spring Boot with Spring Security: Handling Dynamically Changing Permissions","body":"<p>I'm building a REST API using Spring Boot and Spring Security for my application. I have different roles and permissions defined in my system, and I want to secure my API endpoints based on these permissions. However, I have a requirement where the permissions for certain endpoints can change dynamically at runtime, without requiring a server restart or application redeployment.</p>\n<p>I've looked into using <code>@PreAuthorize</code> and <code>@PostAuthorize</code> annotations provided by Spring Security, but they seem to work only with fixed permissions defined in the code or configuration files. I need a solution that allows me to handle dynamically changing permissions for my API endpoints without restarting the application.</p>\n<p>Is there a way to achieve this using Spring Boot and Spring Security? How can I implement a solution that allows me to handle dynamically changing permissions for my REST API endpoints in Spring Boot without requiring a server restart or application redeployment?</p>\n"},{"tags":["java","md5","md5sum"],"answers":[{"tags":[],"owner":{"account_id":17046253,"reputation":79,"user_id":12333037,"display_name":"Tomer Yogev"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693315420,"creation_date":1693315420,"answer_id":77000630,"question_id":67171935,"body_markdown":"Had the same issue, I think the reason is that in OpenJDK 8 the JIT compiler is initialized after `premain` is called for java agents. This means the md5 calculation is running in interpreter-mode. This was fixed in OpenJDK 10: https://bugs.openjdk.org/browse/JDK-7018422.","title":"java md5 is slow in javaagent mode","body":"<p>Had the same issue, I think the reason is that in OpenJDK 8 the JIT compiler is initialized after <code>premain</code> is called for java agents. This means the md5 calculation is running in interpreter-mode. This was fixed in OpenJDK 10: <a href=\"https://bugs.openjdk.org/browse/JDK-7018422\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-7018422</a>.</p>\n"}],"owner":{"account_id":8224865,"reputation":1686,"user_id":6187459,"accept_rate":8,"display_name":"twogoods"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1693315420,"creation_date":1618888212,"question_id":67171935,"body_markdown":"     public static void main(String[] args) {\r\n        File f = new File(args[0]);\r\n        System.out.println(&quot;1: &quot; + DownloadUtils.getMD5(f));\r\n        System.out.println(&quot;2: &quot; + DownloadUtils.getMD5InJava(f));\r\n        System.out.println(&quot;3: &quot; + DownloadUtils.getMD5InJava2(f));\r\n    }\r\n\r\n    public static void premain(String args, Instrumentation inst) {\r\n        File f = new File(args);\r\n        System.out.println(&quot;1: &quot; + DownloadUtils.getMD5(f));\r\n        System.out.println(&quot;2: &quot; + DownloadUtils.getMD5InJava(f));\r\n        System.out.println(&quot;3: &quot; + DownloadUtils.getMD5InJava2(f));\r\n        System.exit(1);\r\n    }\r\nmd5:\r\n\r\n    public static String getMD5(File file) {\r\n        long start = System.currentTimeMillis();\r\n        try {\r\n            // fast-md5\r\n            return MD5.asHex(MD5.getHash(file));\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            return &quot;&quot;;\r\n        } finally {\r\n            System.out.println(&quot;checkout md5 cost  : &quot; + (System.currentTimeMillis() - start));\r\n        }\r\n    }\r\n\r\n    public static String getMD5InJava(File file) {\r\n        long start = System.currentTimeMillis();\r\n        BigInteger bi = null;\r\n        try {\r\n            byte[] buffer = new byte[8192];\r\n            int len = 0;\r\n            MessageDigest md = MessageDigest.getInstance(&quot;MD5&quot;);\r\n            FileInputStream fis = new FileInputStream(file);\r\n            while ((len = fis.read(buffer)) != -1) {\r\n                md.update(buffer, 0, len);\r\n            }\r\n            fis.close();\r\n            byte[] b = md.digest();\r\n            bi = new BigInteger(1, b);\r\n        } catch (NoSuchAlgorithmException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        String md5 = bi.toString(16);\r\n        if (md5.length() == 31) {\r\n            return &quot;0&quot; + md5;\r\n        }\r\n        System.out.println(&quot;checkout md5 cost  : &quot; + (System.currentTimeMillis() - start));\r\n        return md5;\r\n    }\r\n\r\n    public static String getMD5InJava2(File file) {\r\n        long start = System.currentTimeMillis();\r\n        MessageDigest md = null;\r\n        try {\r\n            md = MessageDigest.getInstance(&quot;MD5&quot;);\r\n            md.update(Files.readAllBytes(Paths.get(file.getPath())));\r\n            byte[] digest = md.digest();\r\n            String md5 = DatatypeConverter.printHexBinary(digest).toUpperCase();\r\n            return md5;\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return &quot;&quot;;\r\n        } finally {\r\n            System.out.println(&quot;checkout md5 cost  : &quot; + (System.currentTimeMillis() - start));\r\n        }\r\n    }\r\n\r\n and package a test.jar\r\n\r\nrun `java -jar test.jar /root/bigfile.jar`  (bigfile.jar 100M) , and output:\r\n\r\n    checkout md5 cost  : 558\r\n    1: ac6e30dfb8493bb21dfb9cd51beac152\r\n    checkout md5 cost  : 537\r\n    2: ac6e30dfb8493bb21dfb9cd51beac152\r\n    checkout md5 cost  : 692\r\n    3: AC6E30DFB8493BB21DFB9CD51BEAC152\r\n\r\nrun `java -javaagent:test.jar=/root/bigfile.jar -jar demo.jar` ，and output:\r\n\r\n    checkout md5 cost  : 7582\r\n    1: ac6e30dfb8493bb21dfb9cd51beac152\r\n    checkout md5 cost  : 17506\r\n    2: ac6e30dfb8493bb21dfb9cd51beac152\r\n    checkout md5 cost  : 17360\r\n    3: AC6E30DFB8493BB21DFB9CD51BEAC152\r\n\r\nWhy md5 in javaagent is so slow?","title":"java md5 is slow in javaagent mode","body":"<pre><code> public static void main(String[] args) {\n    File f = new File(args[0]);\n    System.out.println(&quot;1: &quot; + DownloadUtils.getMD5(f));\n    System.out.println(&quot;2: &quot; + DownloadUtils.getMD5InJava(f));\n    System.out.println(&quot;3: &quot; + DownloadUtils.getMD5InJava2(f));\n}\n\npublic static void premain(String args, Instrumentation inst) {\n    File f = new File(args);\n    System.out.println(&quot;1: &quot; + DownloadUtils.getMD5(f));\n    System.out.println(&quot;2: &quot; + DownloadUtils.getMD5InJava(f));\n    System.out.println(&quot;3: &quot; + DownloadUtils.getMD5InJava2(f));\n    System.exit(1);\n}\n</code></pre>\n<p>md5:</p>\n<pre><code>public static String getMD5(File file) {\n    long start = System.currentTimeMillis();\n    try {\n        // fast-md5\n        return MD5.asHex(MD5.getHash(file));\n    } catch (IOException e) {\n        e.printStackTrace();\n        return &quot;&quot;;\n    } finally {\n        System.out.println(&quot;checkout md5 cost  : &quot; + (System.currentTimeMillis() - start));\n    }\n}\n\npublic static String getMD5InJava(File file) {\n    long start = System.currentTimeMillis();\n    BigInteger bi = null;\n    try {\n        byte[] buffer = new byte[8192];\n        int len = 0;\n        MessageDigest md = MessageDigest.getInstance(&quot;MD5&quot;);\n        FileInputStream fis = new FileInputStream(file);\n        while ((len = fis.read(buffer)) != -1) {\n            md.update(buffer, 0, len);\n        }\n        fis.close();\n        byte[] b = md.digest();\n        bi = new BigInteger(1, b);\n    } catch (NoSuchAlgorithmException e) {\n        e.printStackTrace();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    String md5 = bi.toString(16);\n    if (md5.length() == 31) {\n        return &quot;0&quot; + md5;\n    }\n    System.out.println(&quot;checkout md5 cost  : &quot; + (System.currentTimeMillis() - start));\n    return md5;\n}\n\npublic static String getMD5InJava2(File file) {\n    long start = System.currentTimeMillis();\n    MessageDigest md = null;\n    try {\n        md = MessageDigest.getInstance(&quot;MD5&quot;);\n        md.update(Files.readAllBytes(Paths.get(file.getPath())));\n        byte[] digest = md.digest();\n        String md5 = DatatypeConverter.printHexBinary(digest).toUpperCase();\n        return md5;\n    } catch (Exception e) {\n        e.printStackTrace();\n        return &quot;&quot;;\n    } finally {\n        System.out.println(&quot;checkout md5 cost  : &quot; + (System.currentTimeMillis() - start));\n    }\n}\n</code></pre>\n<p>and package a test.jar</p>\n<p>run <code>java -jar test.jar /root/bigfile.jar</code>  (bigfile.jar 100M) , and output:</p>\n<pre><code>checkout md5 cost  : 558\n1: ac6e30dfb8493bb21dfb9cd51beac152\ncheckout md5 cost  : 537\n2: ac6e30dfb8493bb21dfb9cd51beac152\ncheckout md5 cost  : 692\n3: AC6E30DFB8493BB21DFB9CD51BEAC152\n</code></pre>\n<p>run <code>java -javaagent:test.jar=/root/bigfile.jar -jar demo.jar</code> ，and output:</p>\n<pre><code>checkout md5 cost  : 7582\n1: ac6e30dfb8493bb21dfb9cd51beac152\ncheckout md5 cost  : 17506\n2: ac6e30dfb8493bb21dfb9cd51beac152\ncheckout md5 cost  : 17360\n3: AC6E30DFB8493BB21DFB9CD51BEAC152\n</code></pre>\n<p>Why md5 in javaagent is so slow?</p>\n"},{"tags":["java","hibernate","hibernate-mapping"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1693315943,"post_id":77000619,"comment_id":135742310,"body_markdown":"By manually, do you mean with `OPTIMISTIC_FORCE_INCREMENT`?","body":"By manually, do you mean with <code>OPTIMISTIC_FORCE_INCREMENT</code>?"}],"owner":{"account_id":3157873,"reputation":55,"user_id":2669823,"display_name":"Navpreet Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693315270,"creation_date":1693315270,"question_id":77000619,"body_markdown":"I came across an issue while upgrading Hibernate Core from 4.1 to 5.6.\r\nHibernate moved from `HbmBinder` to `ModelBinder` for constructing entities (and their properties) from the `*.hbm.xml` file. For the version property, in `HbmBinder`, if the \r\n`&quot;optimistic-lock&quot;` attribute in the hbm file is set to true or null, it will make `isIncludedInOptimisticLocking` for version true. Now, in `ModelBinder`, hibernate is using the `VersionAttributeSourceImpl` class for the version property. In this class, the return value of the `isIncludedInOptimisticLocking` method is hardcoded to false and cannot be changed. My code has very critical business logic that changes an entity&#39;s version property manually.\r\nNow when I am running Junit, which updates the version manually, I am getting an exception as entity is getting dirty since property is changed, but since version is not part of optimistic locking, the update SQL is not getting generated and the SQL is coming out null, which is causing NPE. Is there any way I can override the `isIncludedInOptimisticLocking` method behaviour and return true so that I can achieve the previous behaviour?","title":"Modify isIncludedInOptimisticLocking property value of VersionAttributeSourceImpl class in Hibernate 5.6.15.Final","body":"<p>I came across an issue while upgrading Hibernate Core from 4.1 to 5.6.\nHibernate moved from <code>HbmBinder</code> to <code>ModelBinder</code> for constructing entities (and their properties) from the <code>*.hbm.xml</code> file. For the version property, in <code>HbmBinder</code>, if the\n<code>&quot;optimistic-lock&quot;</code> attribute in the hbm file is set to true or null, it will make <code>isIncludedInOptimisticLocking</code> for version true. Now, in <code>ModelBinder</code>, hibernate is using the <code>VersionAttributeSourceImpl</code> class for the version property. In this class, the return value of the <code>isIncludedInOptimisticLocking</code> method is hardcoded to false and cannot be changed. My code has very critical business logic that changes an entity's version property manually.\nNow when I am running Junit, which updates the version manually, I am getting an exception as entity is getting dirty since property is changed, but since version is not part of optimistic locking, the update SQL is not getting generated and the SQL is coming out null, which is causing NPE. Is there any way I can override the <code>isIncludedInOptimisticLocking</code> method behaviour and return true so that I can achieve the previous behaviour?</p>\n"},{"tags":["java","swing","graphics2d"],"owner":{"account_id":29118402,"reputation":3,"user_id":22306589,"display_name":"Tech of the Absence"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693315023,"creation_date":1693295612,"question_id":76998349,"body_markdown":"I want to paint a radial gradient with color dodge effect (just like in photoshop or pixel art)using Swing library.\r\n\r\nI have tried just rendering standart radial gradient in `paint(Graphics)` method:\r\n```java\r\npaint(Graphics g){\r\n\t((Graphics2D)g).setPaint(new RadialGradientPaint(getWidth()/2,getHeight()/2,getHeight(),new float[]{0,1},new Color[]{new Color(255,245,235,150),new Color(255,245,235,0)}\r\n\tg.fillRect(0,0,getWidth(),getHeight());\r\n}\r\n```\r\n...but it is not &quot;realistic&quot; enought.\r\n\r\nJust for understanding of what I am trying to achieve:  \r\n\r\ncolor dodge gradient over image (required):\r\n\r\n[![https://i.stack.imgur.com/qQW0m.png][1]][1]\r\n\r\nnormal gradient over the same image (unwanted):\r\n\r\n[![https://i.stack.imgur.com/xqj32.png][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qQW0m.png\r\n  [2]: https://i.stack.imgur.com/xqj32.png","title":"How to create radial gradient with &quot;color dodge&quot; effect?","body":"<p>I want to paint a radial gradient with color dodge effect (just like in photoshop or pixel art)using Swing library.</p>\n<p>I have tried just rendering standart radial gradient in <code>paint(Graphics)</code> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>paint(Graphics g){\n    ((Graphics2D)g).setPaint(new RadialGradientPaint(getWidth()/2,getHeight()/2,getHeight(),new float[]{0,1},new Color[]{new Color(255,245,235,150),new Color(255,245,235,0)}\n    g.fillRect(0,0,getWidth(),getHeight());\n}\n</code></pre>\n<p>...but it is not &quot;realistic&quot; enought.</p>\n<p>Just for understanding of what I am trying to achieve:</p>\n<p>color dodge gradient over image (required):</p>\n<p><a href=\"https://i.stack.imgur.com/qQW0m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qQW0m.png\" alt=\"https://i.stack.imgur.com/qQW0m.png\" /></a></p>\n<p>normal gradient over the same image (unwanted):</p>\n<p><a href=\"https://i.stack.imgur.com/xqj32.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xqj32.png\" alt=\"https://i.stack.imgur.com/xqj32.png\" /></a></p>\n"},{"tags":["java","hibernate","jpa","jpql"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1693231289,"post_id":76993439,"comment_id":135729268,"body_markdown":"You have what look like very very different entities using the same table, but with different IDs? There is no version that will work, as nothing uniquely identifies a row across all the different entity types- how do you define such a table? That root Entity really should have a simple Id that defines the ID for all rows regardless of type. If not, then what you have are completely disparate entities - use MappedSuperclass and define the table on each subclass. Treat your ParamCodes as a proper entity and it should work - your query is missing an &quot;id&quot; embeddable property for the ParamCodesId","body":"You have what look like very very different entities using the same table, but with different IDs? There is no version that will work, as nothing uniquely identifies a row across all the different entity types- how do you define such a table? That root Entity really should have a simple Id that defines the ID for all rows regardless of type. If not, then what you have are completely disparate entities - use MappedSuperclass and define the table on each subclass. Treat your ParamCodes as a proper entity and it should work - your query is missing an &quot;id&quot; embeddable property for the ParamCodesId"},{"owner":{"account_id":301230,"reputation":28997,"user_id":608820,"accept_rate":89,"display_name":"Augusto"},"score":0,"creation_date":1693231479,"post_id":76993439,"comment_id":135729307,"body_markdown":"Is this the real code? The query `SELECT e FROM ParamCodes e WHERE e.id in (:ids)` doesn&#39;t look right at all as the class `ParamCodes` you shared doesn&#39;t have an `id` field. I have the impression you have  a bunch of small mapping errors that have snowballed into something that is tricky to grok. Also you must remove `@Data` from your entities. It adds an equals and hashcode that will produce weird behaviour. If you are new to hibernate, please spend time reading a book and the manual as it&#39;s a complex technology.","body":"Is this the real code? The query <code>SELECT e FROM ParamCodes e WHERE e.id in (:ids)</code> doesn&#39;t look right at all as the class <code>ParamCodes</code> you shared doesn&#39;t have an <code>id</code> field. I have the impression you have  a bunch of small mapping errors that have snowballed into something that is tricky to grok. Also you must remove <code>@Data</code> from your entities. It adds an equals and hashcode that will produce weird behaviour. If you are new to hibernate, please spend time reading a book and the manual as it&#39;s a complex technology."}],"answers":[{"tags":[],"owner":{"account_id":15608330,"reputation":1466,"user_id":11260467,"display_name":"Xiidref"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693315007,"creation_date":1693315007,"answer_id":77000580,"question_id":76993439,"body_markdown":"The solution I&#39;ve found is to remove the @Inheritance from the `Entity` class.\\\r\nWithout it the HQL is not able to interpret the query bellow because the `e.id` is not mapped anymore to the getId from the `Entity` :\r\n```SQL\r\nSELECT e FROM ParamCodes e WHERE e.id in (:ids)\r\n```\r\nInstead I just remove the `.id` since `e` by itself is already used as a `ParamCodesId` by hibernate so the query now look like : \r\n```SQL\r\nSELECT e FROM ParamCodes e WHERE e in (:ids)\r\n```\r\n\r\nAnd the `Entity` class now only have the `@MappedSuperClass` annotation and the abstract `getId` method is removed since it&#39;s not used anymore  : \r\n```java\r\n@MappedSuperclass\r\npublic abstract class Entity implements Serializable {\r\n\r\n    @Getter\r\n    @Setter\r\n    @Column(name = &quot;USER_CREATION&quot;, insertable = true, updatable = false)\r\n    private String auditUtilisateurCreation;\r\n\r\n    ...\r\n}\r\n```","title":"Hibernate JPA generic IdField not detected after updating hibernate version","body":"<p>The solution I've found is to remove the @Inheritance from the <code>Entity</code> class.<br />\nWithout it the HQL is not able to interpret the query bellow because the <code>e.id</code> is not mapped anymore to the getId from the <code>Entity</code> :</p>\n<pre><code>SELECT e FROM ParamCodes e WHERE e.id in (:ids)\n</code></pre>\n<p>Instead I just remove the <code>.id</code> since <code>e</code> by itself is already used as a <code>ParamCodesId</code> by hibernate so the query now look like :</p>\n<pre><code>SELECT e FROM ParamCodes e WHERE e in (:ids)\n</code></pre>\n<p>And the <code>Entity</code> class now only have the <code>@MappedSuperClass</code> annotation and the abstract <code>getId</code> method is removed since it's not used anymore  :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@MappedSuperclass\npublic abstract class Entity implements Serializable {\n\n    @Getter\n    @Setter\n    @Column(name = &quot;USER_CREATION&quot;, insertable = true, updatable = false)\n    private String auditUtilisateurCreation;\n\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":15608330,"reputation":1466,"user_id":11260467,"display_name":"Xiidref"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77000580,"answer_count":1,"score":0,"last_activity_date":1693315007,"creation_date":1693230811,"question_id":76993439,"body_markdown":"I&#39;m migrating my app from an old version of hibernate to a more recent one (6.0.2.Final)\r\n\r\nIn my code, I have a parent entity class that group all columns that are generic between tables and define a generic getter to get an IdClass instance for each tables : \r\n\r\nParent class : \r\n```java\r\n@Inheritance(strategy = InheritanceType.SINGLE_TABLE)\r\n@MappedSuperclass\r\npublic abstract class Entity implements Serializable {\r\n\r\n    @Getter\r\n    @Setter\r\n    @Column(name = &quot;USER_CREATION&quot;, insertable = true, updatable = false)\r\n    private String auditUtilisateurCreation;\r\n\r\n    ...\r\n\r\n\t//Refer to the IdClass object of the classes \r\n    public abstract Object getId();\r\n\r\n    ...\r\n}\r\n```\r\n\r\nEntity class : \r\n```java\r\n@Entity\r\n@Table(name = &quot;PARAM_CODES&quot;)\r\n@IdClass(ParamCodesId.class)\r\n@Data\r\npublic class ParamCodes extends Entity {\r\n    @Id\r\n    @Column(name = &quot;FIELD&quot;)\r\n    private String field;\r\n\r\n    @Id\r\n    @Column(name = &quot;CODE&quot;)\r\n    private String code;\r\n\r\n    @Column(name = &quot;ORDER&quot;)\r\n    private Long order;\r\n\t\r\n\t...\r\n\r\n   \r\n    @Override\r\n    public ParamCodeLibelleId getId() {\r\n        return new ParamCodesId(field, code);\r\n    }\r\n}\r\n```\r\n\r\nId class :\r\n```java\r\n@Data\r\n@EqualsAndHashCode(of = {&quot;field&quot;, &quot;code&quot; })\r\n@ToString(of = { &quot;field&quot;, &quot;code&quot; })\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class ParamCodesId implements Serializable {\r\n    private String field;\r\n    private String code;\r\n}\r\n```\r\n\r\nAfter the upgrade I now have a message telling me that `An entity cannot be annotated with both @Inheritance and @MappedSuperclass, @Inheritance will be ignored`\r\nI&#39;ve tried few things :\r\n - Keeping only the @MappedSuperclass on Entity =&gt; The Id column is not found in my query\r\n - Keeping only the @Inheritance on Entity =&gt; The columns from Entity (like USER_CREATION) are not found while updating the database\r\n - Adding a column named id as @Transient in the child class =&gt; Not queryable by my request\r\n - Adding a column named id as @Column(name = &quot;id&quot;, insertable = false, updatable = false) in the child class =&gt; Unknown column id in field list\r\n\r\nI&#39;m unable to find a way to have both the generic fields like USER_CREATION and the id still be detected by requests like :\r\n\r\n```java \r\n@Repository\r\npublic class JpaParamCodeLibelleRepository {\r\n\r\n\t...\r\n\r\n    @Transactional(propagation = Propagation.MANDATORY)\r\n    public List&lt;ParamCodes&gt; getExisingEntity(List&lt;ParamCodesId&gt; ids) {\r\n        Query querySelect = getEntityManager().createQuery(&quot;SELECT e FROM ParamCodes e WHERE e.id in (:ids)&quot;, ParamCodes.class);\r\n        return querySelect.setParameter(&quot;ids&quot;, ids).getResultList();\r\n    }\r\n}\r\n```\r\n\r\nWhat&#39;s the right way to do this ? ","title":"Hibernate JPA generic IdField not detected after updating hibernate version","body":"<p>I'm migrating my app from an old version of hibernate to a more recent one (6.0.2.Final)</p>\n<p>In my code, I have a parent entity class that group all columns that are generic between tables and define a generic getter to get an IdClass instance for each tables :</p>\n<p>Parent class :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Inheritance(strategy = InheritanceType.SINGLE_TABLE)\n@MappedSuperclass\npublic abstract class Entity implements Serializable {\n\n    @Getter\n    @Setter\n    @Column(name = &quot;USER_CREATION&quot;, insertable = true, updatable = false)\n    private String auditUtilisateurCreation;\n\n    ...\n\n    //Refer to the IdClass object of the classes \n    public abstract Object getId();\n\n    ...\n}\n</code></pre>\n<p>Entity class :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;PARAM_CODES&quot;)\n@IdClass(ParamCodesId.class)\n@Data\npublic class ParamCodes extends Entity {\n    @Id\n    @Column(name = &quot;FIELD&quot;)\n    private String field;\n\n    @Id\n    @Column(name = &quot;CODE&quot;)\n    private String code;\n\n    @Column(name = &quot;ORDER&quot;)\n    private Long order;\n    \n    ...\n\n   \n    @Override\n    public ParamCodeLibelleId getId() {\n        return new ParamCodesId(field, code);\n    }\n}\n</code></pre>\n<p>Id class :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@EqualsAndHashCode(of = {&quot;field&quot;, &quot;code&quot; })\n@ToString(of = { &quot;field&quot;, &quot;code&quot; })\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ParamCodesId implements Serializable {\n    private String field;\n    private String code;\n}\n</code></pre>\n<p>After the upgrade I now have a message telling me that <code>An entity cannot be annotated with both @Inheritance and @MappedSuperclass, @Inheritance will be ignored</code>\nI've tried few things :</p>\n<ul>\n<li>Keeping only the @MappedSuperclass on Entity =&gt; The Id column is not found in my query</li>\n<li>Keeping only the @Inheritance on Entity =&gt; The columns from Entity (like USER_CREATION) are not found while updating the database</li>\n<li>Adding a column named id as @Transient in the child class =&gt; Not queryable by my request</li>\n<li>Adding a column named id as @Column(name = &quot;id&quot;, insertable = false, updatable = false) in the child class =&gt; Unknown column id in field list</li>\n</ul>\n<p>I'm unable to find a way to have both the generic fields like USER_CREATION and the id still be detected by requests like :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic class JpaParamCodeLibelleRepository {\n\n    ...\n\n    @Transactional(propagation = Propagation.MANDATORY)\n    public List&lt;ParamCodes&gt; getExisingEntity(List&lt;ParamCodesId&gt; ids) {\n        Query querySelect = getEntityManager().createQuery(&quot;SELECT e FROM ParamCodes e WHERE e.id in (:ids)&quot;, ParamCodes.class);\n        return querySelect.setParameter(&quot;ids&quot;, ids).getResultList();\n    }\n}\n</code></pre>\n<p>What's the right way to do this ?</p>\n"},{"tags":["java","android","arrays"],"comments":[{"owner":{"account_id":123783,"reputation":595,"user_id":318460,"display_name":"Narmo"},"score":0,"creation_date":1682018771,"post_id":76055686,"comment_id":134154054,"body_markdown":"Try to move all your processing from `onTextChanged` to `afterTextChanged` and assign `palabra` to `editable.toString().trim()`. Maybe it will help.","body":"Try to move all your processing from <code>onTextChanged</code> to <code>afterTextChanged</code> and assign <code>palabra</code> to <code>editable.toString().trim()</code>. Maybe it will help."},{"owner":{"account_id":27959189,"reputation":1,"user_id":21351414,"display_name":"FELIPE EDUARDO ROJAS"},"score":0,"creation_date":1682432322,"post_id":76055686,"comment_id":134212419,"body_markdown":"I tried that and it didn&#39;t work either, finally I made a method to manage the filter with a button but it&#39;s not filling my spinner hahahaha","body":"I tried that and it didn&#39;t work either, finally I made a method to manage the filter with a button but it&#39;s not filling my spinner hahahaha"}],"answers":[{"tags":[],"owner":{"account_id":20866182,"reputation":114,"user_id":15327167,"display_name":"Saif Khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693314979,"creation_date":1693314979,"answer_id":77000575,"question_id":76055686,"body_markdown":"    Txtbuscar.addTextChangedListener(new TextWatcher() {\r\n        @Override\r\n        public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n        }\r\n    \r\n        @Override\r\n        public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n            String inputText = charSequence.toString().trim();\r\n            String[] keywords = inputText.split(&quot;\\\\s+&quot;);\r\n    \r\n            Log.d(&quot;TextWatcher&quot;, &quot;Input keywords: &quot; + Arrays.toString(keywords));\r\n    \r\n            if (clientesAdapter != null) {\r\n                clientesAdapter.getFilter().filterByKeywords(keywords);\r\n                ClienteAfectado.setSelection(0);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void afterTextChanged(Editable editable) {\r\n        }\r\n    });\r\n    \r\n    ## let&#39;s verify the filtering process within your adapter&#39;s filterByKeywords ##\r\n    public void filterByKeywords(String[] keywords) {\r\n        filteredClientes.clear();\r\n    \r\n        for (Cliente cliente : originalClientes) {\r\n            boolean matchesAllKeywords = true;\r\n    \r\n            for (String keyword : keywords) {\r\n                if (!cliente.getName().toLowerCase().contains(keyword.toLowerCase())) {\r\n                    matchesAllKeywords = false;\r\n                    break;\r\n                }\r\n            }\r\n    \r\n            if (matchesAllKeywords) {\r\n                filteredClientes.add(cliente);\r\n            }\r\n        }\r\n    \r\n        Log.d(&quot;Filter&quot;, &quot;Filtered clients: &quot; + filteredClientes.toString());\r\n    \r\n        notifyDataSetChanged();\r\n    }\r\n    \r\n    \r\n    \r\n    ----------\r\n\r\n","title":"Real time text filtering","body":"<pre><code>Txtbuscar.addTextChangedListener(new TextWatcher() {\n    @Override\n    public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n    }\n\n    @Override\n    public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n        String inputText = charSequence.toString().trim();\n        String[] keywords = inputText.split(&quot;\\\\s+&quot;);\n\n        Log.d(&quot;TextWatcher&quot;, &quot;Input keywords: &quot; + Arrays.toString(keywords));\n\n        if (clientesAdapter != null) {\n            clientesAdapter.getFilter().filterByKeywords(keywords);\n            ClienteAfectado.setSelection(0);\n        }\n    }\n\n    @Override\n    public void afterTextChanged(Editable editable) {\n    }\n});\n\n## let's verify the filtering process within your adapter's filterByKeywords ##\npublic void filterByKeywords(String[] keywords) {\n    filteredClientes.clear();\n\n    for (Cliente cliente : originalClientes) {\n        boolean matchesAllKeywords = true;\n\n        for (String keyword : keywords) {\n            if (!cliente.getName().toLowerCase().contains(keyword.toLowerCase())) {\n                matchesAllKeywords = false;\n                break;\n            }\n        }\n\n        if (matchesAllKeywords) {\n            filteredClientes.add(cliente);\n        }\n    }\n\n    Log.d(&quot;Filter&quot;, &quot;Filtered clients: &quot; + filteredClientes.toString());\n\n    notifyDataSetChanged();\n}\n\n\n\n----------\n</code></pre>\n"}],"owner":{"account_id":27959189,"reputation":1,"user_id":21351414,"display_name":"FELIPE EDUARDO ROJAS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693314979,"creation_date":1681914384,"question_id":76055686,"body_markdown":"What happens is that currently my filter searches for one word and I need to search for texts with more than one word and I don&#39;t know how to do it.\r\n\r\n&#180;&#180;&#180;\r\n\r\n        Txtbuscar.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n                //String palabra = Txtbuscar.getText().toString().trim();\r\n                String palabra = charSequence.toString().trim();\r\n                //Filtra los clientes seg&#250;n el texto que se va ingresando en tiempo real\r\n                if (clientesAdapter != null) {\r\n                    clientesAdapter.getFilter().filter(palabra);\r\n                    // Resetea la selecci&#243;n del Spinner\r\n                    ClienteAfectado.setSelection(0);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable editable) {\r\n            }\r\n        });\r\n&#180;&#180;&#180;\r\n\r\n\r\nI don&#39;t know what I&#39;m missing :s, I debugged the theme and according to andorid studio the variable text is taking all the text even if they are 2 words, but still my spinner doesn&#39;t fill me with the results, basically it says that they don&#39;t exist.\r\n\r\nMy idea is that this editText will help me to filter the results.","title":"Real time text filtering","body":"<p>What happens is that currently my filter searches for one word and I need to search for texts with more than one word and I don't know how to do it.</p>\n<p>´´´</p>\n<pre><code>    Txtbuscar.addTextChangedListener(new TextWatcher() {\n        @Override\n        public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n        }\n\n        @Override\n        public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n            //String palabra = Txtbuscar.getText().toString().trim();\n            String palabra = charSequence.toString().trim();\n            //Filtra los clientes según el texto que se va ingresando en tiempo real\n            if (clientesAdapter != null) {\n                clientesAdapter.getFilter().filter(palabra);\n                // Resetea la selección del Spinner\n                ClienteAfectado.setSelection(0);\n            }\n        }\n\n        @Override\n        public void afterTextChanged(Editable editable) {\n        }\n    });\n</code></pre>\n<p>´´´</p>\n<p>I don't know what I'm missing :s, I debugged the theme and according to andorid studio the variable text is taking all the text even if they are 2 words, but still my spinner doesn't fill me with the results, basically it says that they don't exist.</p>\n<p>My idea is that this editText will help me to filter the results.</p>\n"},{"tags":["java","mongodb","spring-boot","docker","docker-networking"],"comments":[{"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"score":0,"creation_date":1692717121,"post_id":76951015,"comment_id":135660862,"body_markdown":"Since you are using [tag:spring-boot], I would expect properties like `SPRING_DATA_MONGODB_HOST=mongo` and `SPRING_DATA_MONGODB_PORT=27017` or an `application.yml`. In the example you provided I don&#39;t see an `application.yml` copied into the docker image, nor a `docker run` command with these environment variables. Could you clarify how you set your environment variables when you run locally? It&#39;s not clear what `MONGO_URL` means.","body":"Since you are using <a href=\"https://stackoverflow.com/questions/tagged/spring-boot\">spring-boot</a>, I would expect properties like <code>SPRING_DATA_MONGODB_HOST=mongo</code> and <code>SPRING_DATA_MONGODB_PORT=27017</code> or an <code>application.yml</code>. In the example you provided I don&#39;t see an <code>application.yml</code> copied into the docker image, nor a <code>docker run</code> command with these environment variables. Could you clarify how you set your environment variables when you run locally? It&#39;s not clear what <code>MONGO_URL</code> means."},{"owner":{"account_id":19564503,"reputation":41,"user_id":14317040,"display_name":"Alien6306"},"score":0,"creation_date":1692797940,"post_id":76951015,"comment_id":135673172,"body_markdown":"@WLefever thanks for your comment. this is my application props for `mongodb` when i run locally: `spring.data.mongodb.uri=${MONGO_URL:mongodb://localhost:27017/dev}` . `MONGO_URL` sets an environment variable inside the container. `mongo` is precisely the name that I gave to the MongoDB container with the `--name=mongo` flag","body":"@WLefever thanks for your comment. this is my application props for <code>mongodb</code> when i run locally: <code>spring.data.mongodb.uri=${MONGO_URL:mongodb:&#47;&#47;localhost:2701&zwnj;&#8203;7&#47;dev}</code> . <code>MONGO_URL</code> sets an environment variable inside the container. <code>mongo</code> is precisely the name that I gave to the MongoDB container with the <code>--name=mongo</code> flag"}],"answers":[{"tags":[],"owner":{"account_id":19564503,"reputation":41,"user_id":14317040,"display_name":"Alien6306"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693314944,"creation_date":1693314944,"answer_id":77000572,"question_id":76951015,"body_markdown":"This configurations solved my issue - \r\n\r\ndocker-compose:\r\n\r\n`version: &#39;3.1&#39;\r\nservices:\r\n  mongodb:\r\n    image: mongo\r\n    container_name: &quot;mongodb&quot;\r\n    ports:\r\n      - &#39;27017:27017&#39;\r\n    networks:\r\n      - myapp\r\n  myapp:\r\n    image: myuser/myapp:1.0.0\r\n    environment:\r\n      - MONGO_URL=mongodb://mongodb:27017/dev\r\n    container_name: &quot;myapp&quot;\r\n    ports:\r\n      - &quot;8080:8080&quot;\r\n    depends_on:\r\n      - mongodb\r\n    networks:\r\n      - myapp\r\nnetworks:\r\n  myapp:\r\n`\r\n\r\n.properties:\r\n\r\n`spring.data.mongodb.uri=${MONGO_URL:mongodb://mongodb:27017/dev}`\r\n","title":"MongoSocketOpenException in Spring-Boot Application","body":"<p>This configurations solved my issue -</p>\n<p>docker-compose:</p>\n<p><code>version: '3.1' services: mongodb: image: mongo container_name: &quot;mongodb&quot; ports: - '27017:27017' networks: - myapp myapp: image: myuser/myapp:1.0.0 environment: - MONGO_URL=mongodb://mongodb:27017/dev container_name: &quot;myapp&quot; ports: - &quot;8080:8080&quot; depends_on: - mongodb networks: - myapp networks: myapp: </code></p>\n<p>.properties:</p>\n<p><code>spring.data.mongodb.uri=${MONGO_URL:mongodb://mongodb:27017/dev}</code></p>\n"}],"owner":{"account_id":19564503,"reputation":41,"user_id":14317040,"display_name":"Alien6306"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77000572,"answer_count":1,"score":1,"last_activity_date":1693314944,"creation_date":1692689546,"question_id":76951015,"body_markdown":"I&#39;m trying to run my app on Docker. Problem is that when I&#39;m running image of `mongo`, it works perfectly. But then I&#39;m running myapp image which using `mongo` as a db, it gives `com.mongodb.MongoSocketOpenException: Exception opening socket`. By the way I&#39;m creating both of them under the same network.\r\n\r\nException\r\n\r\n[![enter image description here][1]][1]\r\n\r\nNote: when I run myapp from my local it works perfectly. Problem is just about image of my app. I can`t understand what is difference? Why dos it give this error?\r\n\r\nFirst command, that run mongo image:\r\n\r\n    docker run --name=mongo --rm --network=mynet  -p 27017:27017 mongo\r\n\r\nSecond command, that run myapp image: \r\n\r\n    docker run --name=myapp --rm --network=mynet  -p 8088:8080 -e MONGO_URL=mongodb://mongo:27017 myapp\r\n\r\nInspection of mynet network:\r\n                     \r\n    &quot;Name&quot;:&quot;enote&quot;,\r\n    &quot;Id&quot;:&quot;95c6704778676fded0f856b2f905d60544bf67a83910b96193f00ef6a23730be&quot;,\r\n    &quot;Created&quot;:&quot;2023-08-21T07:59:34.479354749Z&quot;,\r\n    &quot;Scope&quot;:&quot;local&quot;,\r\n    &quot;Driver&quot;:&quot;bridge&quot;,\r\n    &quot;EnableIPv6&quot;:false,\r\n    &quot;IPAM&quot;:{\r\n       &quot;Driver&quot;:&quot;default&quot;,\r\n       &quot;Options&quot;:{\r\n          \r\n       },\r\n       &quot;Config&quot;:[\r\n          {\r\n             &quot;Subnet&quot;:&quot;172.22.0.0/16&quot;,\r\n             &quot;Gateway&quot;:&quot;172.22.0.1&quot;\r\n          }\r\n       ]\r\n    },\r\n    &quot;Internal&quot;:false,\r\n    &quot;Attachable&quot;:false,\r\n    &quot;Ingress&quot;:false,\r\n    &quot;ConfigFrom&quot;:{\r\n       &quot;Network&quot;:&quot;&quot;\r\n    },\r\n    &quot;ConfigOnly&quot;:false,\r\n    &quot;Containers&quot;:{\r\n       &quot;bf1bd274fcfdd61f93afc8be87d3542f1cefe81d62587a3d669b09b06cef2e84&quot;:{\r\n          &quot;Name&quot;:&quot;enote-java&quot;,\r\n          &quot;EndpointID&quot;:&quot;af36329326a5ce2c0ac3b24d1dc60c63d27a22e2df2b50c5469094bae21b8a05&quot;,\r\n          &quot;MacAddress&quot;:&quot;02:42:ac:16:00:03&quot;,\r\n          &quot;IPv4Address&quot;:&quot;172.22.0.3/16&quot;,\r\n          &quot;IPv6Address&quot;:&quot;&quot;\r\n       },\r\n       &quot;fa44ba0e009744610ec7f93ff7c04078692d853714193e2dc542cfe2ed815845&quot;:{\r\n          &quot;Name&quot;:&quot;mongo&quot;,\r\n          &quot;EndpointID&quot;:&quot;89be69458e5614976622731e89351f93cd406f8f1dfdc474480310039b8c4a74&quot;,\r\n          &quot;MacAddress&quot;:&quot;02:42:ac:16:00:02&quot;,\r\n          &quot;IPv4Address&quot;:&quot;172.22.0.2/16&quot;,\r\n          &quot;IPv6Address&quot;:&quot;&quot;\r\n       }\r\n    },\r\n    &quot;Options&quot;:{\r\n       \r\n    },\r\n    &quot;Labels&quot;:{\r\n       \r\n    }\r\n\r\nDockerfile of myapp:\r\n\r\n    FROM adoptopenjdk/openjdk11:jdk-11.0.2.9-slim\r\n    WORKDIR /opt\r\n    ENV PORT 8080\r\n    EXPOSE 8080\r\n    COPY target/*.jar /opt/app.jar\r\n    ENTRYPOINT exec java -jar app.jar\r\n\r\n  [1]: https://i.stack.imgur.com/tVURz.png","title":"MongoSocketOpenException in Spring-Boot Application","body":"<p>I'm trying to run my app on Docker. Problem is that when I'm running image of <code>mongo</code>, it works perfectly. But then I'm running myapp image which using <code>mongo</code> as a db, it gives <code>com.mongodb.MongoSocketOpenException: Exception opening socket</code>. By the way I'm creating both of them under the same network.</p>\n<p>Exception</p>\n<p><a href=\"https://i.stack.imgur.com/tVURz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tVURz.png\" alt=\"enter image description here\" /></a></p>\n<p>Note: when I run myapp from my local it works perfectly. Problem is just about image of my app. I can`t understand what is difference? Why dos it give this error?</p>\n<p>First command, that run mongo image:</p>\n<pre><code>docker run --name=mongo --rm --network=mynet  -p 27017:27017 mongo\n</code></pre>\n<p>Second command, that run myapp image:</p>\n<pre><code>docker run --name=myapp --rm --network=mynet  -p 8088:8080 -e MONGO_URL=mongodb://mongo:27017 myapp\n</code></pre>\n<p>Inspection of mynet network:</p>\n<pre><code>&quot;Name&quot;:&quot;enote&quot;,\n&quot;Id&quot;:&quot;95c6704778676fded0f856b2f905d60544bf67a83910b96193f00ef6a23730be&quot;,\n&quot;Created&quot;:&quot;2023-08-21T07:59:34.479354749Z&quot;,\n&quot;Scope&quot;:&quot;local&quot;,\n&quot;Driver&quot;:&quot;bridge&quot;,\n&quot;EnableIPv6&quot;:false,\n&quot;IPAM&quot;:{\n   &quot;Driver&quot;:&quot;default&quot;,\n   &quot;Options&quot;:{\n      \n   },\n   &quot;Config&quot;:[\n      {\n         &quot;Subnet&quot;:&quot;172.22.0.0/16&quot;,\n         &quot;Gateway&quot;:&quot;172.22.0.1&quot;\n      }\n   ]\n},\n&quot;Internal&quot;:false,\n&quot;Attachable&quot;:false,\n&quot;Ingress&quot;:false,\n&quot;ConfigFrom&quot;:{\n   &quot;Network&quot;:&quot;&quot;\n},\n&quot;ConfigOnly&quot;:false,\n&quot;Containers&quot;:{\n   &quot;bf1bd274fcfdd61f93afc8be87d3542f1cefe81d62587a3d669b09b06cef2e84&quot;:{\n      &quot;Name&quot;:&quot;enote-java&quot;,\n      &quot;EndpointID&quot;:&quot;af36329326a5ce2c0ac3b24d1dc60c63d27a22e2df2b50c5469094bae21b8a05&quot;,\n      &quot;MacAddress&quot;:&quot;02:42:ac:16:00:03&quot;,\n      &quot;IPv4Address&quot;:&quot;172.22.0.3/16&quot;,\n      &quot;IPv6Address&quot;:&quot;&quot;\n   },\n   &quot;fa44ba0e009744610ec7f93ff7c04078692d853714193e2dc542cfe2ed815845&quot;:{\n      &quot;Name&quot;:&quot;mongo&quot;,\n      &quot;EndpointID&quot;:&quot;89be69458e5614976622731e89351f93cd406f8f1dfdc474480310039b8c4a74&quot;,\n      &quot;MacAddress&quot;:&quot;02:42:ac:16:00:02&quot;,\n      &quot;IPv4Address&quot;:&quot;172.22.0.2/16&quot;,\n      &quot;IPv6Address&quot;:&quot;&quot;\n   }\n},\n&quot;Options&quot;:{\n   \n},\n&quot;Labels&quot;:{\n   \n}\n</code></pre>\n<p>Dockerfile of myapp:</p>\n<pre><code>FROM adoptopenjdk/openjdk11:jdk-11.0.2.9-slim\nWORKDIR /opt\nENV PORT 8080\nEXPOSE 8080\nCOPY target/*.jar /opt/app.jar\nENTRYPOINT exec java -jar app.jar\n</code></pre>\n"},{"tags":["java","parameters","struts2","ognl","xml-configuration"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1379596059,"post_id":18710193,"comment_id":27890313,"body_markdown":"What do you mean by &quot;showing it as regular text&quot;?","body":"What do you mean by &quot;showing it as regular text&quot;?"}],"answers":[{"comments":[{"owner":{"account_id":1597565,"reputation":1,"user_id":1479280,"display_name":"Storm Rider"},"score":0,"creation_date":1378795758,"post_id":18710386,"comment_id":27571522,"body_markdown":"But still. It&#39;s not working when I tried setting value to it but no use. By &#39;as regular text&#39; means that &lt;s:property /&gt; displays &#39;${app_Id}&#39;","body":"But still. It&#39;s not working when I tried setting value to it but no use. By &#39;as regular text&#39; means that &lt;s:property /&gt; displays &#39;${app_Id}&#39;"},{"owner":{"account_id":216384,"reputation":23447,"user_id":471607,"accept_rate":73,"display_name":"Umesh Awasthi"},"score":0,"creation_date":1378796147,"post_id":18710386,"comment_id":27571684,"body_markdown":"i am not sure what you trying to do here? if you want to see that value in jsp `&lt;s:property value=&quot;app_id&quot;&gt;` should display the value","body":"i am not sure what you trying to do here? if you want to see that value in jsp <code>&lt;s:property value=&quot;app_id&quot;&gt;</code> should display the value"},{"owner":{"account_id":1597565,"reputation":1,"user_id":1479280,"display_name":"Storm Rider"},"score":0,"creation_date":1378802424,"post_id":18710386,"comment_id":27574707,"body_markdown":"Okay, Let me explain. Normally defining parameter in the result is working fine. What i wanna do is define dynamic global parameter for this action.","body":"Okay, Let me explain. Normally defining parameter in the result is working fine. What i wanna do is define dynamic global parameter for this action."},{"owner":{"account_id":1820003,"reputation":49625,"user_id":1654265,"accept_rate":93,"display_name":"Andrea Ligios"},"score":1,"creation_date":1378802853,"post_id":18710386,"comment_id":27574918,"body_markdown":"Define &quot;global&quot;. Global to all the methods of *that* Action ?","body":"Define &quot;global&quot;. Global to all the methods of <i>that</i> Action ?"},{"owner":{"account_id":216384,"reputation":23447,"user_id":471607,"accept_rate":73,"display_name":"Umesh Awasthi"},"score":0,"creation_date":1378804179,"post_id":18710386,"comment_id":27575610,"body_markdown":"@StormRider:can you define what you mean by global as asked by Andrea","body":"@StormRider:can you define what you mean by global as asked by Andrea"},{"owner":{"account_id":1597565,"reputation":1,"user_id":1479280,"display_name":"Storm Rider"},"score":0,"creation_date":1378951222,"post_id":18710386,"comment_id":27644741,"body_markdown":"Ok, I saw this tutorial by mkyoung. Here&#39;s the link : http://www.mkyong.com/struts2/struts-2-configure-static-parameter-for-action-class/ . And i was wondering if i could possibly redefine static variables. Not predefined.","body":"Ok, I saw this tutorial by mkyoung. Here&#39;s the link : <a href=\"http://www.mkyong.com/struts2/struts-2-configure-static-parameter-for-action-class/\" rel=\"nofollow noreferrer\">mkyong.com/struts2/&hellip;</a> . And i was wondering if i could possibly redefine static variables. Not predefined."}],"tags":[],"owner":{"account_id":216384,"reputation":23447,"user_id":471607,"accept_rate":73,"display_name":"Umesh Awasthi"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1378784726,"creation_date":1378784726,"answer_id":18710386,"question_id":18710193,"body_markdown":"Note sure what exactly you mean by It shows `${app_Id}` as regular text.Struts2 provide this flexibility where you can set `param` values dynamically.\r\n\r\nAll you need to set these values in your action class and you are all set to use them as a place holder.\r\n\r\n    public class MyAction extends ActionSupport {\r\n       private int app_Id;\r\n        \r\n       public String execute() {\r\n          // you execute logic\r\n     \r\n          this.app_Id= 123;\r\n          return SUCCESS;\r\n       }\r\n     \r\n     // getter and setter for app_Id\r\n    }\r\n\r\nAnd you can use this `app_Id` in your result configuration \r\n\r\n     &lt;action name=&quot;TestApp_*&quot; class=&quot;test.TestApp&quot; method=&quot;{1}&quot;&gt;\r\n           &lt;param name=&quot;app_Id&quot;&gt;${app_Id}&lt;/param&gt;\r\n           &lt;result name=&quot;input&quot;&gt;WEB-INF/jsp/test/testView.jsp&lt;/result&gt;\r\n    &lt;/action&gt;\r\n\r\nyou can get more details [parameters-in-configuration-results][1]\r\n\r\n\r\n  [1]: http://struts.apache.org/release/2.3.x/docs/parameters-in-configuration-results.html","title":"How to dynamically set the value to a static parameter in Struts 2","body":"<p>Note sure what exactly you mean by It shows <code>${app_Id}</code> as regular text.Struts2 provide this flexibility where you can set <code>param</code> values dynamically.</p>\n\n<p>All you need to set these values in your action class and you are all set to use them as a place holder.</p>\n\n<pre><code>public class MyAction extends ActionSupport {\n   private int app_Id;\n\n   public String execute() {\n      // you execute logic\n\n      this.app_Id= 123;\n      return SUCCESS;\n   }\n\n // getter and setter for app_Id\n}\n</code></pre>\n\n<p>And you can use this <code>app_Id</code> in your result configuration </p>\n\n<pre><code> &lt;action name=\"TestApp_*\" class=\"test.TestApp\" method=\"{1}\"&gt;\n       &lt;param name=\"app_Id\"&gt;${app_Id}&lt;/param&gt;\n       &lt;result name=\"input\"&gt;WEB-INF/jsp/test/testView.jsp&lt;/result&gt;\n&lt;/action&gt;\n</code></pre>\n\n<p>you can get more details <a href=\"http://struts.apache.org/release/2.3.x/docs/parameters-in-configuration-results.html\" rel=\"nofollow\">parameters-in-configuration-results</a></p>\n"},{"comments":[{"owner":{"account_id":1597565,"reputation":1,"user_id":1479280,"display_name":"Storm Rider"},"score":0,"creation_date":1378802504,"post_id":18713555,"comment_id":27574747,"body_markdown":"I did use IDE to generate getter/setter.","body":"I did use IDE to generate getter/setter."},{"owner":{"account_id":1820003,"reputation":49625,"user_id":1654265,"accept_rate":93,"display_name":"Andrea Ligios"},"score":0,"creation_date":1378802546,"post_id":18713555,"comment_id":27574764,"body_markdown":"please post the Java part","body":"please post the Java part"}],"tags":[],"owner":{"account_id":1820003,"reputation":49625,"user_id":1654265,"accept_rate":93,"display_name":"Andrea Ligios"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1378800145,"creation_date":1378800145,"answer_id":18713555,"question_id":18710193,"body_markdown":"You probably have written (erroneusly) the getter by hand, instead of letting the IDE do it for you.\r\n\r\nA variable `app_Id;` must have a getter `getApp_Id()`, while you could have something like `getapp_Id()` or `get_app_Id()`... but how are we supposed to know it if you don&#39;t post your Action code ?!\r\n\r\nAlso, consider to change your variables (from now on) to respect the convention, that wants them camelCased, instead that underscore-separated... then `appId` for the variable and `getAppId()` for the getter.\r\n\r\n","title":"How to dynamically set the value to a static parameter in Struts 2","body":"<p>You probably have written (erroneusly) the getter by hand, instead of letting the IDE do it for you.</p>\n\n<p>A variable <code>app_Id;</code> must have a getter <code>getApp_Id()</code>, while you could have something like <code>getapp_Id()</code> or <code>get_app_Id()</code>... but how are we supposed to know it if you don't post your Action code ?!</p>\n\n<p>Also, consider to change your variables (from now on) to respect the convention, that wants them camelCased, instead that underscore-separated... then <code>appId</code> for the variable and <code>getAppId()</code> for the getter.</p>\n"},{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1618682906,"creation_date":1378802875,"answer_id":18714396,"question_id":18710193,"body_markdown":"Look at the [`staticParams` interceptor][1]. \r\n\r\n&gt;This interceptor populates the action with the static parameters defined in the action configuration. If the action implements `Parameterizable`, a map of the static parameters will be also be passed directly to the action. The static params will be added to the request params map, unless `merge` is set to `false`.\r\n&gt;\r\n&gt;Parameters are typically defined with `&lt;param&gt;` elements within `struts.xml`.\r\n\r\nIt shows how to configure this interceptor to your action configuration. \r\n\r\n**For example:**\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;action name=&quot;someAction&quot; class=&quot;com.examples.SomeAction&quot;&gt;\r\n        &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;\r\n             &lt;param name=&quot;staticParams.parse&quot;&gt;true&lt;/param&gt;\r\n             &lt;param name=&quot;staticParams.overwrite&quot;&gt;false&lt;/param&gt;\r\n        &lt;/interceptor-ref&gt;\r\n        &lt;param name=&quot;num&quot;&gt;${numValue}&lt;/param&gt;\r\n        &lt;result name=&quot;success&quot;&gt;good_result.ftl&lt;/result&gt;\r\n    &lt;/action&gt;\r\n\r\nThis enables the interceptor to *parse* parameter values for OGNL expression from the action configuration. \r\n\r\n  [1]: https://struts.apache.org/core-developers/static-parameters-interceptor.html\r\n\r\n","title":"How to dynamically set the value to a static parameter in Struts 2","body":"<p>Look at the <a href=\"https://struts.apache.org/core-developers/static-parameters-interceptor.html\" rel=\"nofollow noreferrer\"><code>staticParams</code> interceptor</a>.</p>\n<blockquote>\n<p>This interceptor populates the action with the static parameters defined in the action configuration. If the action implements <code>Parameterizable</code>, a map of the static parameters will be also be passed directly to the action. The static params will be added to the request params map, unless <code>merge</code> is set to <code>false</code>.</p>\n<p>Parameters are typically defined with <code>&lt;param&gt;</code> elements within <code>struts.xml</code>.</p>\n</blockquote>\n<p>It shows how to configure this interceptor to your action configuration.</p>\n<p><strong>For example:</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;action name=&quot;someAction&quot; class=&quot;com.examples.SomeAction&quot;&gt;\n    &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;\n         &lt;param name=&quot;staticParams.parse&quot;&gt;true&lt;/param&gt;\n         &lt;param name=&quot;staticParams.overwrite&quot;&gt;false&lt;/param&gt;\n    &lt;/interceptor-ref&gt;\n    &lt;param name=&quot;num&quot;&gt;${numValue}&lt;/param&gt;\n    &lt;result name=&quot;success&quot;&gt;good_result.ftl&lt;/result&gt;\n&lt;/action&gt;\n</code></pre>\n<p>This enables the interceptor to <em>parse</em> parameter values for OGNL expression from the action configuration.</p>\n"},{"tags":[],"owner":{"account_id":3259438,"reputation":1802,"user_id":2745277,"accept_rate":60,"display_name":"Pratik Shah"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1378893001,"creation_date":1378893001,"answer_id":18737924,"question_id":18710193,"body_markdown":"try to do it like this way..\r\n\r\n    \r\n\r\n    &lt;result type=&quot;redirect&quot;&gt;\r\n        &lt;param name=&quot;location&quot;&gt;WEB-INF/jsp/test/testView.jsp&lt;/param&gt;\r\n        &lt;param name=&quot;inputName&quot;&gt;app_Id&lt;/param&gt;\r\n    &lt;/result&gt;\r\n\r\nin the jsp page you can directly use this value like\r\n\r\n    &lt;s:properties value=&quot;app_Id&quot;&gt;\r\n\r\ntry this.","title":"How to dynamically set the value to a static parameter in Struts 2","body":"<p>try to do it like this way..</p>\n\n<pre><code>&lt;result type=\"redirect\"&gt;\n    &lt;param name=\"location\"&gt;WEB-INF/jsp/test/testView.jsp&lt;/param&gt;\n    &lt;param name=\"inputName\"&gt;app_Id&lt;/param&gt;\n&lt;/result&gt;\n</code></pre>\n\n<p>in the jsp page you can directly use this value like</p>\n\n<pre><code>&lt;s:properties value=\"app_Id\"&gt;\n</code></pre>\n\n<p>try this.</p>\n"}],"owner":{"account_id":1597565,"reputation":1,"user_id":1479280,"display_name":"Storm Rider"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2219,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1693314618,"creation_date":1378783039,"question_id":18710193,"body_markdown":"I was wondering, is it possible to dynamically set value to static parameter\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;action name=&quot;TestApp_*&quot; class=&quot;test.TestApp&quot; method=&quot;{1}&quot;&gt;\r\n   \t   &lt;param name=&quot;app_Id&quot;&gt;Dynamic value here&lt;/param&gt;\r\n       &lt;result name=&quot;input&quot;&gt;WEB-INF/jsp/test/testView.jsp&lt;/result&gt;\r\n    &lt;/action&gt;\r\n\r\nI tried\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;action name=&quot;TestApp_*&quot; class=&quot;test.TestApp&quot; method=&quot;{1}&quot;&gt;\r\n   \t   &lt;param name=&quot;app_Id&quot;&gt;${app_Id}&lt;/param&gt;\r\n       &lt;result name=&quot;input&quot;&gt;WEB-INF/jsp/test/testView.jsp&lt;/result&gt;\r\n    &lt;/action&gt;\r\n\r\nNot working. It shows `${app_Id}` as regular text.\r\n\r\n","title":"How to dynamically set the value to a static parameter in Struts 2","body":"<p>I was wondering, is it possible to dynamically set value to static parameter</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;action name=\"TestApp_*\" class=\"test.TestApp\" method=\"{1}\"&gt;\n   &lt;param name=\"app_Id\"&gt;Dynamic value here&lt;/param&gt;\n   &lt;result name=\"input\"&gt;WEB-INF/jsp/test/testView.jsp&lt;/result&gt;\n&lt;/action&gt;\n</code></pre>\n\n<p>I tried</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;action name=\"TestApp_*\" class=\"test.TestApp\" method=\"{1}\"&gt;\n   &lt;param name=\"app_Id\"&gt;${app_Id}&lt;/param&gt;\n   &lt;result name=\"input\"&gt;WEB-INF/jsp/test/testView.jsp&lt;/result&gt;\n&lt;/action&gt;\n</code></pre>\n\n<p>Not working. It shows <code>${app_Id}</code> as regular text.</p>\n"},{"tags":["java","format","java.util.scanner"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1693277815,"post_id":76997032,"comment_id":135736191,"body_markdown":"`System.out.printf(&quot;%.2f C= %.2f F&quot;, celsius, fahrenheit);`?","body":"<code>System.out.printf(&quot;%.2f C= %.2f F&quot;, celsius, fahrenheit);</code>?"}],"answers":[{"tags":[],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693314516,"creation_date":1693314516,"answer_id":77000519,"question_id":76997032,"body_markdown":"You&#39;re on the right track using the `printf` method for formatting. However, the format string you provided to `printf` is incomplete. \r\n\r\nThe `printf` method allows you to specify placeholders in the format string and then provide the arguments to replace those placeholders.\r\n\r\nHere&#39;s how you can modify your code to get the desired output:\r\n\r\n1. The format string should be: `&quot;%.2f C = %.2f F\\n&quot;`\r\n2. Provide both `celsius` and `fahrenheit` as arguments to `printf`.\r\n\r\nHere&#39;s the corrected part of your code:\r\n\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Celcius2Farenheit {\r\n    \r\n        public static void main(String[] args) {\r\n            double celsius, fahrenheit;\r\n            Scanner scanner;\r\n            scanner = new Scanner(System.in);\r\n            System.out.println(&quot;Please enter a temperature in celsius:&quot;);\r\n            celsius = scanner.nextDouble();\r\n            fahrenheit = (9.0 / 5.0) * celsius + 32;\r\n            System.out.printf(&quot;%.2f C = %.2f F\\n&quot;, celsius, fahrenheit);\r\n        }\r\n        \r\n    }\r\n\r\n \r\n\r\nNow, if you enter a value like `21`, it will correctly print: `21.00 C = 69.80 F`.","title":"Include input in output print line","body":"<p>You're on the right track using the <code>printf</code> method for formatting. However, the format string you provided to <code>printf</code> is incomplete.</p>\n<p>The <code>printf</code> method allows you to specify placeholders in the format string and then provide the arguments to replace those placeholders.</p>\n<p>Here's how you can modify your code to get the desired output:</p>\n<ol>\n<li>The format string should be: <code>&quot;%.2f C = %.2f F\\n&quot;</code></li>\n<li>Provide both <code>celsius</code> and <code>fahrenheit</code> as arguments to <code>printf</code>.</li>\n</ol>\n<p>Here's the corrected part of your code:</p>\n<pre><code>import java.util.Scanner;\n\npublic class Celcius2Farenheit {\n\n    public static void main(String[] args) {\n        double celsius, fahrenheit;\n        Scanner scanner;\n        scanner = new Scanner(System.in);\n        System.out.println(&quot;Please enter a temperature in celsius:&quot;);\n        celsius = scanner.nextDouble();\n        fahrenheit = (9.0 / 5.0) * celsius + 32;\n        System.out.printf(&quot;%.2f C = %.2f F\\n&quot;, celsius, fahrenheit);\n    }\n    \n}\n</code></pre>\n<p>Now, if you enter a value like <code>21</code>, it will correctly print: <code>21.00 C = 69.80 F</code>.</p>\n"}],"owner":{"account_id":29318418,"reputation":3,"user_id":22462585,"display_name":"Rs2023"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77000519,"answer_count":1,"score":0,"last_activity_date":1693314516,"creation_date":1693277636,"question_id":76997032,"body_markdown":"I am trying to get my code to print results out as &quot;21.0 C = 69.80 F&quot; but I can&#39;t get it to include the initial celsius input or limit it to the second decimal wihout error codes. This is for homework so I want to know where I&#39;m going wrong, and what I need to add or remove to be able to format my System.out.print\r\n\r\n\r\n```\r\npublic class Celcius2Farenheit {\r\n\r\n        /**\r\n     * @param args the command line arguments\r\n     */\r\n    public static void main(String[] args) {\r\n        double celsius, fahrenheit;\r\n        Scanner scanner;\r\n        scanner = new Scanner(System.in);\r\n        System.out.println(&quot;Please enter a temperature in celsius:&quot;);\r\n        celsius = scanner.nextDouble();\r\n        fahrenheit = (9.0 / 5.0) * celsius + 32;\r\n        System.out.printf(&quot;%.2f&quot;  + fahrenheit);\r\n        \r\n    }\r\n    \r\n}\r\n```","title":"Include input in output print line","body":"<p>I am trying to get my code to print results out as &quot;21.0 C = 69.80 F&quot; but I can't get it to include the initial celsius input or limit it to the second decimal wihout error codes. This is for homework so I want to know where I'm going wrong, and what I need to add or remove to be able to format my System.out.print</p>\n<pre><code>public class Celcius2Farenheit {\n\n        /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args) {\n        double celsius, fahrenheit;\n        Scanner scanner;\n        scanner = new Scanner(System.in);\n        System.out.println(&quot;Please enter a temperature in celsius:&quot;);\n        celsius = scanner.nextDouble();\n        fahrenheit = (9.0 / 5.0) * celsius + 32;\n        System.out.printf(&quot;%.2f&quot;  + fahrenheit);\n        \n    }\n    \n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2399479,"reputation":6729,"user_id":2097529,"accept_rate":76,"display_name":"Kick Buttowski"},"score":0,"creation_date":1422212365,"post_id":28140193,"comment_id":44651955,"body_markdown":"I do not know but I guess OOP or Not OOP this is a question?","body":"I do not know but I guess OOP or Not OOP this is a question?"},{"owner":{"account_id":2661104,"reputation":1914,"user_id":2300769,"accept_rate":89,"display_name":"Hugo Sousa"},"score":12,"creation_date":1422212419,"post_id":28140193,"comment_id":44651972,"body_markdown":"I don&#39;t know too, but the API Note may explain something: `This method exists to be used as a Predicate, filter(Objects::isNull)`.","body":"I don&#39;t know too, but the API Note may explain something: <code>This method exists to be used as a Predicate, filter(Objects::isNull)</code>."}],"answers":[{"tags":[],"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"comment_count":0,"down_vote_count":0,"up_vote_count":104,"is_accepted":true,"score":104,"last_activity_date":1422212441,"creation_date":1422212441,"answer_id":28140226,"question_id":28140193,"body_markdown":"From [the JavaDoc of the method](http://docs.oracle.com/javase/8/docs/api/java/util/Objects.html#isNull-java.lang.Object-):\r\n\r\n&gt; API Note:\r\n&gt;     This method exists to be used as a `Predicate`, `filter(Objects::isNull)`","title":"Purpose of Objects.isNull(...) / Objects.nonNull(...)","body":"<p>From <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Objects.html#isNull-java.lang.Object-\">the JavaDoc of the method</a>:</p>\n\n<blockquote>\n  <p>API Note:\n      This method exists to be used as a <code>Predicate</code>, <code>filter(Objects::isNull)</code></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693314420,"creation_date":1693296411,"answer_id":76998431,"question_id":28140193,"body_markdown":"Elaborating the above answer further with an example. Given a list of strings, `Objects.isNull` and `Objects.nonNull` can be used to filter out the `null` and `non null` values respectively from the list.\r\n\r\n\r\n    List&lt;String&gt; stringList = Arrays.asList(&quot;T&quot;, null, &quot;S&quot;);\r\n    \r\n    // Filter out all the elements that are not null.    \r\n    stringList.stream().filter(Objects::nonNull).collect(Collectors.toList()); // &quot;T&quot;,&quot;S&quot;\r\n    \r\n    // Filter out all the null elements.\r\n    stringList.stream().filter(Objects::isNull).collect(Collectors.toList()); // null\r\n\r\n","title":"Purpose of Objects.isNull(...) / Objects.nonNull(...)","body":"<p>Elaborating the above answer further with an example. Given a list of strings, <code>Objects.isNull</code> and <code>Objects.nonNull</code> can be used to filter out the <code>null</code> and <code>non null</code> values respectively from the list.</p>\n<pre><code>List&lt;String&gt; stringList = Arrays.asList(&quot;T&quot;, null, &quot;S&quot;);\n\n// Filter out all the elements that are not null.    \nstringList.stream().filter(Objects::nonNull).collect(Collectors.toList()); // &quot;T&quot;,&quot;S&quot;\n\n// Filter out all the null elements.\nstringList.stream().filter(Objects::isNull).collect(Collectors.toList()); // null\n</code></pre>\n"}],"owner":{"account_id":910051,"reputation":3554,"user_id":944099,"accept_rate":90,"display_name":"babanin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38531,"favorite_count":0,"down_vote_count":1,"up_vote_count":62,"accepted_answer_id":28140226,"answer_count":2,"score":61,"last_activity_date":1693314420,"creation_date":1422212243,"question_id":28140193,"body_markdown":"What is the purpose of \r\n\r\n    Objects.isNull(x) \r\n\r\nif we can simply write \r\n\r\n    x == null\r\n\r\n?\r\n\r\nSame for \r\n\r\n    Objects.nonNull(...)\r\n\r\nand\r\n\r\n    x != null","title":"Purpose of Objects.isNull(...) / Objects.nonNull(...)","body":"<p>What is the purpose of </p>\n\n<pre><code>Objects.isNull(x) \n</code></pre>\n\n<p>if we can simply write </p>\n\n<pre><code>x == null\n</code></pre>\n\n<p>?</p>\n\n<p>Same for </p>\n\n<pre><code>Objects.nonNull(...)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>x != null\n</code></pre>\n"},{"tags":["java","spring","spring-boot","tomcat"],"comments":[{"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"score":0,"creation_date":1585575592,"post_id":60931718,"comment_id":107800419,"body_markdown":"see if u can set properties like this https://stackoverflow.com/questions/51703746/setting-relaxedquerychars-for-embedded-tomcat/51703955#51703955","body":"see if u can set properties like this <a href=\"https://stackoverflow.com/questions/51703746/setting-relaxedquerychars-for-embedded-tomcat/51703955#51703955\" title=\"setting relaxedquerychars for embedded tomcat\">stackoverflow.com/questions/51703746/&hellip;</a>"},{"owner":{"account_id":1825316,"reputation":138,"user_id":1658288,"display_name":"Yonatan Alon"},"score":0,"creation_date":1585576894,"post_id":60931718,"comment_id":107801200,"body_markdown":"@pvpkiran I have already tried, to no avail.\nYou can refer to the tomcat instance in the way specified in that question, but you can only provide an internal tomcat executor this way:\n\nTomcatWebServer server = (TomcatWebServer)factory.getWebServer();\n        server.getTomcat().getService().addExecutor(/*Only allows org.apache.catalina.Executor*/);","body":"@pvpkiran I have already tried, to no avail. You can refer to the tomcat instance in the way specified in that question, but you can only provide an internal tomcat executor this way:  TomcatWebServer server = (TomcatWebServer)factory.getWebServer();         server.getTomcat().getService().addExecutor(/*Only allows org.apache.catalina.Executor*/);"}],"answers":[{"comments":[{"owner":{"account_id":1825316,"reputation":138,"user_id":1658288,"display_name":"Yonatan Alon"},"score":0,"creation_date":1591775065,"post_id":62273613,"comment_id":110180356,"body_markdown":"I will look into this. I&#39;m currently using a different workaround but I will try this one too","body":"I will look into this. I&#39;m currently using a different workaround but I will try this one too"}],"tags":[],"owner":{"account_id":14127085,"reputation":121,"user_id":10379094,"display_name":"Joseph"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1591666137,"creation_date":1591666137,"answer_id":62273613,"question_id":60931718,"body_markdown":"I looked up some source code (see `TomcatServletWebServerFactory.java`/`ServletWebServerFactoryConfiguration.java`) and found a way to do that.\r\n\r\n    @Bean\r\n    public TomcatProtocolHandlerCustomizer&lt;?&gt; tomcatProtocolHandlerCustomizer() {\r\n        return protocolHandler -&gt; {\r\n            protocolHandler.setExecutor(...);\r\n        };\r\n    }\r\n","title":"How can I customize spring boot embedded tomcat thread pool?","body":"<p>I looked up some source code (see <code>TomcatServletWebServerFactory.java</code>/<code>ServletWebServerFactoryConfiguration.java</code>) and found a way to do that.</p>\n\n<pre><code>@Bean\npublic TomcatProtocolHandlerCustomizer&lt;?&gt; tomcatProtocolHandlerCustomizer() {\n    return protocolHandler -&gt; {\n        protocolHandler.setExecutor(...);\n    };\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1825316,"reputation":138,"user_id":1658288,"display_name":"Yonatan Alon"},"score":0,"creation_date":1674955624,"post_id":75259842,"comment_id":132824501,"body_markdown":"I really like your solution, because it gives programmatic access to all Tomcat components.\n\nHowever, it is worth mentioning that an executor can be added to a Tomcat Service by calling `service.addExecutor(executorImpl)`. \n\nIf you can kindly amend your code example, I will mark this as the accepted answer :)","body":"I really like your solution, because it gives programmatic access to all Tomcat components.  However, it is worth mentioning that an executor can be added to a Tomcat Service by calling <code>service.addExecutor(executorImpl)</code>.   If you can kindly amend your code example, I will mark this as the accepted answer :)"},{"owner":{"account_id":1825316,"reputation":138,"user_id":1658288,"display_name":"Yonatan Alon"},"score":0,"creation_date":1674956670,"post_id":75259842,"comment_id":132824610,"body_markdown":"Do note that `postProcessContext()` gets called AFTER Tomcat is started, while &#39;customize()&#39; get called before Tomcat is started.\n\n\n\n(see https://github.com/spring-projects/spring-boot/blob/390892f11beecfa2c24cfba344451433ab27837d/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/web/embedded/tomcat/TomcatServletWebServerFactory.java)","body":"Do note that <code>postProcessContext()</code> gets called AFTER Tomcat is started, while &#39;customize()&#39; get called before Tomcat is started.    (see <a href=\"https://github.com/spring-projects/spring-boot/blob/390892f11beecfa2c24cfba344451433ab27837d/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/web/embedded/tomcat/TomcatServletWebServerFactory.java\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/blob/&hellip;</a>)"}],"tags":[],"owner":{"account_id":435422,"reputation":147,"user_id":821990,"display_name":"danidacila"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675079993,"creation_date":1674831543,"answer_id":75259842,"question_id":60931718,"body_markdown":"I needed to customize Tomcat also.\r\nI ended up with a code like this:\r\n\r\n    @Component\r\n    public class TomcatCustomizer extends TomcatServletWebServerFactory {\r\n      @Override\r\n      protected void postProcessContext(Context context) {\r\n        Engine engine = (Engine) context.getParent().getParent();\r\n        Service service = engine.getService();\r\n        Server server = service.getServer();\r\n        Connector connector = service.findConnectors()[0];\r\n      }\r\n    }\r\n\r\nYou can then set different properties of the server, service, engine, connector.\r\nFrom the object service you can also access the executor and change it.\r\nThis part I never tried.\r\nWhatever you change it will override and complete the spring-boot configuration, you will not loose the spring-boot config.\r\n\r\nAs Yonatan mentioned one can add an executor with\r\nservice.addExecutor(...)\r\nthere is also a method from removing an executor.\r\n\r\nI needed this kind of detailed access to the configuration because I needed to configure the server.getGlobalNamingResources().\r\nAlso to add a JAASRealm and a Valve.\r\nI do not see how one could achieve complete config access with just the customize method.","title":"How can I customize spring boot embedded tomcat thread pool?","body":"<p>I needed to customize Tomcat also.\nI ended up with a code like this:</p>\n<pre><code>@Component\npublic class TomcatCustomizer extends TomcatServletWebServerFactory {\n  @Override\n  protected void postProcessContext(Context context) {\n    Engine engine = (Engine) context.getParent().getParent();\n    Service service = engine.getService();\n    Server server = service.getServer();\n    Connector connector = service.findConnectors()[0];\n  }\n}\n</code></pre>\n<p>You can then set different properties of the server, service, engine, connector.\nFrom the object service you can also access the executor and change it.\nThis part I never tried.\nWhatever you change it will override and complete the spring-boot configuration, you will not loose the spring-boot config.</p>\n<p>As Yonatan mentioned one can add an executor with\nservice.addExecutor(...)\nthere is also a method from removing an executor.</p>\n<p>I needed this kind of detailed access to the configuration because I needed to configure the server.getGlobalNamingResources().\nAlso to add a JAASRealm and a Valve.\nI do not see how one could achieve complete config access with just the customize method.</p>\n"},{"comments":[{"owner":{"account_id":356493,"reputation":1254,"user_id":696037,"accept_rate":0,"display_name":"davidmpaz"},"score":0,"creation_date":1693251481,"post_id":75272047,"comment_id":135733336,"body_markdown":"I did copy `org.apache.catalina.core.StandardThreadExecutor` into a demo app, changed its name. Followed instructions here and am receiving a `Caused by: org.apache.catalina.LifecycleException: An invalid Lifecycle transition was attempted ([STARTING]) for component [com.example.demo.tomcat.MyStandardThreadExecutor@778db1fc] in state [NEW]` any idea?","body":"I did copy <code>org.apache.catalina.core.StandardThreadExecutor</code> into a demo app, changed its name. Followed instructions here and am receiving a <code>Caused by: org.apache.catalina.LifecycleException: An invalid Lifecycle transition was attempted ([STARTING]) for component [com.example.demo.tomcat.MyStandardThreadExecutor@778db1fc] in state [NEW]</code> any idea?"},{"owner":{"account_id":1825316,"reputation":138,"user_id":1658288,"display_name":"Yonatan Alon"},"score":0,"creation_date":1693314219,"post_id":75272047,"comment_id":135741895,"body_markdown":"@davidmpaz I added an example implementation to my answer, so that you can compare yours against it.","body":"@davidmpaz I added an example implementation to my answer, so that you can compare yours against it."},{"owner":{"account_id":1825316,"reputation":138,"user_id":1658288,"display_name":"Yonatan Alon"},"score":0,"creation_date":1693314307,"post_id":75272047,"comment_id":135741919,"body_markdown":"@davidmpaz It is also worth checking the following resources: https://tomcat.apache.org/tomcat-8.5-doc/api/org/apache/catalina/core/StandardThreadExecutor.html#startInternal(), https://tomcat.apache.org/tomcat-8.5-doc/api/org/apache/catalina/util/LifecycleBase.html#startInternal(), https://tomcat.apache.org/tomcat-8.5-doc/api/org/apache/catalina/Lifecycle.html#START_EVENT","body":"@davidmpaz It is also worth checking the following resources: <a href=\"https://tomcat.apache.org/tomcat-8.5-doc/api/org/apache/catalina/core/StandardThreadExecutor.html#startInternal()\" rel=\"nofollow noreferrer\">tomcat.apache.org/tomcat-8.5-doc/api/org/apache/catalina/cor&zwnj;&#8203;e/&hellip;</a>, <a href=\"https://tomcat.apache.org/tomcat-8.5-doc/api/org/apache/catalina/util/LifecycleBase.html#startInternal()\" rel=\"nofollow noreferrer\">tomcat.apache.org/tomcat-8.5-doc/api/org/apache/catalina/uti&zwnj;&#8203;l/&hellip;</a>, <a href=\"https://tomcat.apache.org/tomcat-8.5-doc/api/org/apache/catalina/Lifecycle.html#START_EVENT\" rel=\"nofollow noreferrer\">tomcat.apache.org/tomcat-8.5-doc/api/org/apache/catalina/&hellip;</a>"},{"owner":{"account_id":356493,"reputation":1254,"user_id":696037,"accept_rate":0,"display_name":"davidmpaz"},"score":0,"creation_date":1693333735,"post_id":75272047,"comment_id":135746149,"body_markdown":"thanks for the infos! I cecked them all, also I created a repo here: https://github.com/davidmpaz/spring-tomcat-executor,  which reproduce my issue, do you think we could take a look there together? Thanks!","body":"thanks for the infos! I cecked them all, also I created a repo here: <a href=\"https://github.com/davidmpaz/spring-tomcat-executor\" rel=\"nofollow noreferrer\">github.com/davidmpaz/spring-tomcat-executor</a>,  which reproduce my issue, do you think we could take a look there together? Thanks!"},{"owner":{"account_id":1825316,"reputation":138,"user_id":1658288,"display_name":"Yonatan Alon"},"score":0,"creation_date":1693475747,"post_id":75272047,"comment_id":135767228,"body_markdown":"@davidmpaz After checking your repo, notice that your implementing class is defined as `public class CustomThreadExecutor extends LifecycleMBeanBase implements Executor, ResizableExecutor`, and has an `@Slf4j` annotation above it. Please try and convert it to `public class CustomThreadExecutor extends StandardThreadExecutor`, as per the example provided, and remove the logger annotation.","body":"@davidmpaz After checking your repo, notice that your implementing class is defined as <code>public class CustomThreadExecutor extends LifecycleMBeanBase implements Executor, ResizableExecutor</code>, and has an <code>@Slf4j</code> annotation above it. Please try and convert it to <code>public class CustomThreadExecutor extends StandardThreadExecutor</code>, as per the example provided, and remove the logger annotation."},{"owner":{"account_id":1825316,"reputation":138,"user_id":1658288,"display_name":"Yonatan Alon"},"score":0,"creation_date":1693476076,"post_id":75272047,"comment_id":135767290,"body_markdown":"Please also remove the copy-paste code of the method implementations, which should now be defined in the `StandardThreadExecutor` super class you will be inheriting from","body":"Please also remove the copy-paste code of the method implementations, which should now be defined in the <code>StandardThreadExecutor</code> super class you will be inheriting from"},{"owner":{"account_id":356493,"reputation":1254,"user_id":696037,"accept_rate":0,"display_name":"davidmpaz"},"score":0,"creation_date":1693564394,"post_id":75272047,"comment_id":135781065,"body_markdown":"thanks! How do you see it different. I mean the implementation is the same, I assume Tomcat expect only that the class implement required interfaces and extends from LifecycleMBeanBase, it should make no difference... I just updated the code as you told me, it is on branch: testing-inheritance, unfortunately I am getting same error. Thanks in advance!","body":"thanks! How do you see it different. I mean the implementation is the same, I assume Tomcat expect only that the class implement required interfaces and extends from LifecycleMBeanBase, it should make no difference... I just updated the code as you told me, it is on branch: testing-inheritance, unfortunately I am getting same error. Thanks in advance!"},{"owner":{"account_id":1825316,"reputation":138,"user_id":1658288,"display_name":"Yonatan Alon"},"score":0,"creation_date":1694011666,"post_id":75272047,"comment_id":135835702,"body_markdown":"@davidmpaz Unfortunately I no longer have access to the environment we used, only to the code. If your issue persists and you believe this is a bug related to Tomcat, perhaps you should write to the Tomcat team and ask them for assistance.","body":"@davidmpaz Unfortunately I no longer have access to the environment we used, only to the code. If your issue persists and you believe this is a bug related to Tomcat, perhaps you should write to the Tomcat team and ask them for assistance."},{"owner":{"account_id":356493,"reputation":1254,"user_id":696037,"accept_rate":0,"display_name":"davidmpaz"},"score":0,"creation_date":1694092378,"post_id":75272047,"comment_id":135847746,"body_markdown":"All good @Yonatan, thank you for your help! It indeed helped me a lot!","body":"All good @Yonatan, thank you for your help! It indeed helped me a lot!"}],"tags":[],"owner":{"account_id":1825316,"reputation":138,"user_id":1658288,"display_name":"Yonatan Alon"},"comment_count":9,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693314181,"creation_date":1674955227,"answer_id":75272047,"question_id":60931718,"body_markdown":"Considering two and a half years have passed since I originally asked this question, I think it is time that I shared our solution for the benefit of anyone that might read this in the future.\r\n\r\nWe ended up writing a custom component that implements [WebServerFactoryCustomizer][1]. Spring Boot will scan for all beans before starting its embedded Tomcat server. If it detects a bean that implements this interface, it will invoke the `customize()` method and pass the server factory as an argument to the function.\r\n\r\nFrom there, it was straightforward:\r\n\r\n```\r\npackage your.pack.age.name;\r\n\r\nimport org.apache.catalina.core.StandardThreadExecutor;\r\nimport org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;\r\nimport org.springframework.boot.web.embedded.tomcat.TomcatWebServer;\r\nimport org.springframework.boot.web.server.WebServerFactoryCustomizer;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class TomcatServerConfig implements WebServerFactoryCustomizer&lt;TomcatServletWebServerFactory&gt; {\r\n    private final StandardThreadExecutor customExecutor;\r\n\r\n    public TomcatServerConfig() {\r\n        this.customExecutor = YourExecutorImplementation();\r\n    }\r\n\r\n    @Override\r\n    public void customize(TomcatServletWebServerFactory factory) {\r\n\t\t/*This web server is the Tomcat server embedded in Spring Boot*/\r\n\t\tTomcatWebServer webServer = (TomcatWebServer)factory.getWebServer()\r\n        webServer.getTomcat().getService().addExecutor(this.customExecutor);\r\n    }\r\n}\r\n```\r\n\r\n(The actual code we used was simplified here, for the sake of a clear answer)\r\n\r\nIt is also worth noting that similar code needs to be written for the Tomcat Connectors, using [TomcatConnectorCustomizer][2]:\r\n\r\n```\r\npackage your.pack.age.name;\r\n\r\nimport org.apache.catalina.connector.Connector;\r\nimport org.springframework.boot.web.embedded.tomcat.TomcatConnectorCustomizer;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class TomcatConnectorConfig implements TomcatConnectorCustomizer {\r\n    private final StandardThreadExecutor customExecutor;\r\n\r\n    public TomcatConnectorConfig() {\r\n        this.customExecutor = YourExecutorImplementation();\r\n    }\r\n\r\n    @Override\r\n    public void customize(Connector connector) {\r\n         connector.getProtocolHandler().setExecutor(this.customExecutor);\r\n    }\r\n}\r\n```\r\n\r\n\r\nFor convenience, I am adding a skeletal custom implementation of a thread executor:\r\n\r\n```\r\nimport org.apache.catalina.LifecycleException;\r\nimport org.apache.catalina.core.StandardThreadExecutor;\r\n\r\npublic class HTTPThreadExecutor extends StandardThreadExecutor {\r\n    public HTTPThreadExecutor() {\r\n        super();\r\n\r\n        /* Custom constructor code here */\r\n    }\r\n\r\n    @Override\r\n    protected void startInternal() throws LifecycleException {\r\n        super.startInternal();\r\n\r\n        /* Any work you need done upon startup */\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/web/server/WebServerFactoryCustomizer.html\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/web/embedded/tomcat/TomcatConnectorCustomizer.html","title":"How can I customize spring boot embedded tomcat thread pool?","body":"<p>Considering two and a half years have passed since I originally asked this question, I think it is time that I shared our solution for the benefit of anyone that might read this in the future.</p>\n<p>We ended up writing a custom component that implements <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/web/server/WebServerFactoryCustomizer.html\" rel=\"nofollow noreferrer\">WebServerFactoryCustomizer</a>. Spring Boot will scan for all beans before starting its embedded Tomcat server. If it detects a bean that implements this interface, it will invoke the <code>customize()</code> method and pass the server factory as an argument to the function.</p>\n<p>From there, it was straightforward:</p>\n<pre><code>package your.pack.age.name;\n\nimport org.apache.catalina.core.StandardThreadExecutor;\nimport org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;\nimport org.springframework.boot.web.embedded.tomcat.TomcatWebServer;\nimport org.springframework.boot.web.server.WebServerFactoryCustomizer;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class TomcatServerConfig implements WebServerFactoryCustomizer&lt;TomcatServletWebServerFactory&gt; {\n    private final StandardThreadExecutor customExecutor;\n\n    public TomcatServerConfig() {\n        this.customExecutor = YourExecutorImplementation();\n    }\n\n    @Override\n    public void customize(TomcatServletWebServerFactory factory) {\n        /*This web server is the Tomcat server embedded in Spring Boot*/\n        TomcatWebServer webServer = (TomcatWebServer)factory.getWebServer()\n        webServer.getTomcat().getService().addExecutor(this.customExecutor);\n    }\n}\n</code></pre>\n<p>(The actual code we used was simplified here, for the sake of a clear answer)</p>\n<p>It is also worth noting that similar code needs to be written for the Tomcat Connectors, using <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/web/embedded/tomcat/TomcatConnectorCustomizer.html\" rel=\"nofollow noreferrer\">TomcatConnectorCustomizer</a>:</p>\n<pre><code>package your.pack.age.name;\n\nimport org.apache.catalina.connector.Connector;\nimport org.springframework.boot.web.embedded.tomcat.TomcatConnectorCustomizer;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class TomcatConnectorConfig implements TomcatConnectorCustomizer {\n    private final StandardThreadExecutor customExecutor;\n\n    public TomcatConnectorConfig() {\n        this.customExecutor = YourExecutorImplementation();\n    }\n\n    @Override\n    public void customize(Connector connector) {\n         connector.getProtocolHandler().setExecutor(this.customExecutor);\n    }\n}\n</code></pre>\n<p>For convenience, I am adding a skeletal custom implementation of a thread executor:</p>\n<pre><code>import org.apache.catalina.LifecycleException;\nimport org.apache.catalina.core.StandardThreadExecutor;\n\npublic class HTTPThreadExecutor extends StandardThreadExecutor {\n    public HTTPThreadExecutor() {\n        super();\n\n        /* Custom constructor code here */\n    }\n\n    @Override\n    protected void startInternal() throws LifecycleException {\n        super.startInternal();\n\n        /* Any work you need done upon startup */\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1825316,"reputation":138,"user_id":1658288,"display_name":"Yonatan Alon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2718,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1693314181,"creation_date":1585575191,"question_id":60931718,"body_markdown":"Tomcat architecture is comprised of the following elements: Server =&gt; Service =&gt; Engine =&gt; Host =&gt; Context \r\n[![tomcat architecture][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/jDm7m.png\r\n\r\n\r\nWhen configuring a standard Tomcat server, we can configure a custom thread pool by specifying the following in our server.xml file: (below is pseudo-code)\r\n\r\n``` \r\n&lt;Server&gt;\r\n  &lt;Service name=&quot;Catalina&quot;&gt;\r\n    &lt;Connector port=&quot;8080&quot;/&gt;\r\n    &lt;Executor name=&quot;custom-pool&quot; className=&quot;my.package.poolImplementation&quot; /&gt;\r\n    &lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot;&gt;  \r\n      &lt;Here be more elements /&gt;\r\n    &lt;/Engine&gt;\r\n  &lt;/Service&gt;\r\n&lt;/Server&gt;\r\n``` \r\n\r\n(specifically, the **Executor name=&quot;custom-pool&quot; className=&quot;my.package.poolImplementation&quot;**)\r\n\r\nHow do I configure Spring Boot to allow the same behaviour **programmatically** ? &lt;br /&gt;\r\n(WITHOUT using Spring configuration files)&lt;br /&gt;\r\n\r\nNo matter where i searched, or how hard I tried, I couldn&#39;t find any answer or example.&lt;br /&gt;\r\nThanks in advance&lt;br /&gt;","title":"How can I customize spring boot embedded tomcat thread pool?","body":"<p>Tomcat architecture is comprised of the following elements: Server => Service => Engine => Host => Context \n<a href=\"https://i.stack.imgur.com/jDm7m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jDm7m.png\" alt=\"tomcat architecture\"></a></p>\n\n<p>When configuring a standard Tomcat server, we can configure a custom thread pool by specifying the following in our server.xml file: (below is pseudo-code)</p>\n\n<pre><code>&lt;Server&gt;\n  &lt;Service name=\"Catalina\"&gt;\n    &lt;Connector port=\"8080\"/&gt;\n    &lt;Executor name=\"custom-pool\" className=\"my.package.poolImplementation\" /&gt;\n    &lt;Engine name=\"Catalina\" defaultHost=\"localhost\"&gt;  \n      &lt;Here be more elements /&gt;\n    &lt;/Engine&gt;\n  &lt;/Service&gt;\n&lt;/Server&gt;\n</code></pre>\n\n<p>(specifically, the <strong>Executor name=\"custom-pool\" className=\"my.package.poolImplementation\"</strong>)</p>\n\n<p>How do I configure Spring Boot to allow the same behaviour <strong>programmatically</strong> ? <br />\n(WITHOUT using Spring configuration files)<br /></p>\n\n<p>No matter where i searched, or how hard I tried, I couldn't find any answer or example.<br />\nThanks in advance<br /></p>\n"},{"tags":["java","data-structures"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1693108628,"post_id":76985638,"comment_id":135715602,"body_markdown":"Since your operands are all single characters, I suggest using method [indexOf](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#indexOf(int,int)) (in class `java.lang.String`). I also suggest that you [edit] your question and post some sample postfix expressions along with your expected resulting prefix expressions for those postfix expressions.","body":"Since your operands are all single characters, I suggest using method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#indexOf(int,int)\" rel=\"nofollow noreferrer\">indexOf</a> (in class <code>java.lang.String</code>). I also suggest that you <a href=\"https://stackoverflow.com/posts/76985638/edit\">edit</a> your question and post some sample postfix expressions along with your expected resulting prefix expressions for those postfix expressions."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1693109447,"post_id":76985638,"comment_id":135715626,"body_markdown":"Format _Postfix_ before the _StringTokenizer_,  `Postfix = Postfix.replace(&quot;+&quot;, &quot; + &quot;).replaceAll(&quot; +&quot;, &quot; &quot;);`.","body":"Format <i>Postfix</i> before the <i>StringTokenizer</i>,  <code>Postfix = Postfix.replace(&quot;+&quot;, &quot; + &quot;).replaceAll(&quot; +&quot;, &quot; &quot;);</code>."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1693109943,"post_id":76985638,"comment_id":135715647,"body_markdown":"Should the result of converting `AB + CD+*` to prefix be: `*+AB+CD`?","body":"Should the result of converting <code>AB + CD+*</code> to prefix be: <code>*+AB+CD</code>?"},{"owner":{"account_id":23372427,"reputation":21,"user_id":17443029,"display_name":"Aziz Aljuaid"},"score":0,"creation_date":1693118204,"post_id":76985638,"comment_id":135716099,"body_markdown":"Yes, that&#39;s how the result should be","body":"Yes, that&#39;s how the result should be"}],"answers":[{"tags":[],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693314124,"creation_date":1693314124,"answer_id":77000467,"question_id":76985638,"body_markdown":"The problem with your code is that it assumes that every token in the postfix expression is separated by a space. So when you have a postfix expression like `&quot;AB + CD+*&quot;`, the StringTokenizer will tokenize it as `[&quot;AB&quot;, &quot;+&quot;, &quot;CD+*&quot;]` instead of `[&quot;A&quot;, &quot;B&quot;, &quot;+&quot;, &quot;C&quot;, &quot;D&quot;, &quot;+&quot;, &quot;*&quot;]`.\r\n\r\nTo correctly tokenize this expression, you&#39;ll need a different approach. You can scan through each character in the postfix expression string and decide whether it&#39;s an operand or an operator.\r\n\r\nHere&#39;s a modified version of your code:\r\n\r\n \r\n\r\n        \r\n    import java.util.Scanner;\r\n    import java.util.Stack;\r\n    \r\n    class PostfixToPrefix {\r\n        public static void main(String[] args) {\r\n            Scanner sc = new Scanner(System.in);\r\n    \r\n            System.out.println(&quot;Enter a postfix expression (e.g. AB + CD + *):&quot;);\r\n            String postfix = sc.nextLine();\r\n    \r\n            try {\r\n                String prefix = PostfixToPrefix.Postfix_To_Prefix(postfix);\r\n                System.out.println(&quot;The prefix expression is:&quot;);\r\n                System.out.println(prefix);\r\n            } catch (SyntaxError e) {\r\n                System.out.println(&quot;Error: &quot; + e.getMessage());\r\n            }\r\n        }\r\n    \r\n        public static String Postfix_To_Prefix(String Postfix) throws SyntaxError {\r\n    \r\n            // Declare the operand stack\r\n            Stack&lt;String&gt; operand = new Stack&lt;&gt;();\r\n    \r\n            for (int i = 0; i &lt; Postfix.length(); i++) {\r\n                char ch = Postfix.charAt(i);\r\n    \r\n                // Skip spaces\r\n                if (ch == &#39; &#39;) {\r\n                    continue;\r\n                }\r\n    \r\n                // If the character is an operand, push it into the stack\r\n                if (If_Operand(ch)) {\r\n                    operand.push(String.valueOf(ch));\r\n                } else { \r\n                    // If the character is an operator, pop two operands\r\n                    String operand2 = operand.pop();\r\n                    String operand1 = operand.pop();\r\n                    String expression = ch + &quot; &quot; + operand1 + &quot; &quot; + operand2; \r\n                    operand.push(expression);\r\n                }\r\n            }\r\n    \r\n            // Throw syntax error if empty stack is popped\r\n            if (operand.isEmpty()) {\r\n                throw new SyntaxError(&quot;Stack is empty&quot;);\r\n            }\r\n            String Expression = operand.pop(); \r\n    \r\n            // Throw syntax error if the stack is not empty after the conversion is complete\r\n            if (!operand.isEmpty()) {\r\n                throw new SyntaxError(&quot;Stack is not empty&quot;);\r\n            }\r\n    \r\n            return Expression; \r\n        }\r\n    \r\n        // Helper method to decide if the character is an operand\r\n        private static boolean If_Operand(char ch) {\r\n            return ch != &#39;+&#39; &amp;&amp; ch != &#39;-&#39; &amp;&amp; ch != &#39;/&#39; &amp;&amp; ch != &#39;*&#39;;\r\n        }\r\n    \r\n    }\r\n    \r\n    class SyntaxError extends Exception {\r\n        public SyntaxError(String message) {\r\n            super(message);\r\n        }\r\n        \r\n    \r\n    }\r\n\r\nThe output for the `AB + CD+*` would be: \r\n\r\n[![enter image description here][1]][1]\r\n\r\nNote that:\r\n1. The method `If_Operand` now takes a `char` as an argument instead of a `String`.\r\n2. Instead of tokenizing the input string, we loop through each character and process it.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7iLte.png","title":"how to parse through the expression if it has no space?","body":"<p>The problem with your code is that it assumes that every token in the postfix expression is separated by a space. So when you have a postfix expression like <code>&quot;AB + CD+*&quot;</code>, the StringTokenizer will tokenize it as <code>[&quot;AB&quot;, &quot;+&quot;, &quot;CD+*&quot;]</code> instead of <code>[&quot;A&quot;, &quot;B&quot;, &quot;+&quot;, &quot;C&quot;, &quot;D&quot;, &quot;+&quot;, &quot;*&quot;]</code>.</p>\n<p>To correctly tokenize this expression, you'll need a different approach. You can scan through each character in the postfix expression string and decide whether it's an operand or an operator.</p>\n<p>Here's a modified version of your code:</p>\n<pre><code>import java.util.Scanner;\nimport java.util.Stack;\n\nclass PostfixToPrefix {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n\n        System.out.println(&quot;Enter a postfix expression (e.g. AB + CD + *):&quot;);\n        String postfix = sc.nextLine();\n\n        try {\n            String prefix = PostfixToPrefix.Postfix_To_Prefix(postfix);\n            System.out.println(&quot;The prefix expression is:&quot;);\n            System.out.println(prefix);\n        } catch (SyntaxError e) {\n            System.out.println(&quot;Error: &quot; + e.getMessage());\n        }\n    }\n\n    public static String Postfix_To_Prefix(String Postfix) throws SyntaxError {\n\n        // Declare the operand stack\n        Stack&lt;String&gt; operand = new Stack&lt;&gt;();\n\n        for (int i = 0; i &lt; Postfix.length(); i++) {\n            char ch = Postfix.charAt(i);\n\n            // Skip spaces\n            if (ch == ' ') {\n                continue;\n            }\n\n            // If the character is an operand, push it into the stack\n            if (If_Operand(ch)) {\n                operand.push(String.valueOf(ch));\n            } else { \n                // If the character is an operator, pop two operands\n                String operand2 = operand.pop();\n                String operand1 = operand.pop();\n                String expression = ch + &quot; &quot; + operand1 + &quot; &quot; + operand2; \n                operand.push(expression);\n            }\n        }\n\n        // Throw syntax error if empty stack is popped\n        if (operand.isEmpty()) {\n            throw new SyntaxError(&quot;Stack is empty&quot;);\n        }\n        String Expression = operand.pop(); \n\n        // Throw syntax error if the stack is not empty after the conversion is complete\n        if (!operand.isEmpty()) {\n            throw new SyntaxError(&quot;Stack is not empty&quot;);\n        }\n\n        return Expression; \n    }\n\n    // Helper method to decide if the character is an operand\n    private static boolean If_Operand(char ch) {\n        return ch != '+' &amp;&amp; ch != '-' &amp;&amp; ch != '/' &amp;&amp; ch != '*';\n    }\n\n}\n\nclass SyntaxError extends Exception {\n    public SyntaxError(String message) {\n        super(message);\n    }\n    \n\n}\n</code></pre>\n<p>The output for the <code>AB + CD+*</code> would be:</p>\n<p><a href=\"https://i.stack.imgur.com/7iLte.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7iLte.png\" alt=\"enter image description here\" /></a></p>\n<p>Note that:</p>\n<ol>\n<li>The method <code>If_Operand</code> now takes a <code>char</code> as an argument instead of a <code>String</code>.</li>\n<li>Instead of tokenizing the input string, we loop through each character and process it.</li>\n</ol>\n"}],"owner":{"account_id":23372427,"reputation":21,"user_id":17443029,"display_name":"Aziz Aljuaid"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1693314124,"creation_date":1693108031,"question_id":76985638,"body_markdown":"I&#39;m working on a project to convert postfix to prefix. The code works fine if I add spaces between the operands and operators, but it will not if the characters are have no space between. The sample i used is &quot;AB + CD+*&quot;\r\n\r\nhere is my code. \r\n```\r\nclass PostfixToPrefix {\r\n\t\r\n\tpublic static String Postfix_To_Prefix (String Postfix) throws SyntaxError {\r\n\t\t\r\n\t\t// declare the operand stack \r\n\t\tStack&lt;String&gt; operand = new Stack&lt;&gt;(); \r\n\t\t\r\n\t\t// declare the tokenize function \r\n\t\tStringTokenizer tokens = new StringTokenizer (Postfix);\r\n\t\t\r\n\t\t// while loop to get the next token while there are more tokens \r\n\t\twhile (tokens.hasMoreTokens()) {\r\n\t\t\tString token = tokens.nextToken();\r\n\t\t\t\r\n\t\t\t// if the token is an operand push into the stack \r\n\t\t\tif(If_Operand(token)) {\r\n\t\t\t\toperand.push(token);\r\n\t\t\t} \r\n\t\t\telse { // if the token is an operator pop two operands \r\n\t\t\t\tString operand2 = operand.pop();\r\n\t\t\t\tString operand1 = operand.pop(); \r\n\t\t\t\tString experssion = token + &quot; &quot; + operand1 + &quot; &quot; + operand2; // create a string with an operator followed by the two operands\r\n\t\t\t\toperand.push(experssion); \r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// syntax error is thrown if empty stack is popped\r\n\t\t\tif(operand.isEmpty()) {\r\n\t\t\t\tthrow new SyntaxError(&quot;Stack is empty&quot;); \r\n\t\t\t}\r\n\t\t\t \tString Experssion = operand.pop(); // pop the prefix expression into a string \r\n\t\t\t \t \r\n\t\t\t // syntax error is thrown if the stack is not empty after the conversion is complete\r\n\t\t   if(!operand.isEmpty()) {\r\n\t\t\t   throw new SyntaxError(&quot; Stack is not Empty &quot;); \r\n\t\t   }\r\n\t\t     \t\r\n\t\t   \r\n\t\t   return Experssion; //return the prefix expression \r\n\t}\r\n\t\r\n\t// helper method to decide if the token is  an operand\r\n\tprivate static boolean If_Operand(String token) {\r\n\t\treturn !token.equals(&quot;+&quot;) &amp;&amp; !token.equals(&quot;-&quot;) &amp;&amp; !token.equals(&quot;/&quot;) &amp;&amp; !token.equals(&quot;*&quot;); \r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nI tried the split method and it did not work. \r\nI appreciate your feedback. ","title":"how to parse through the expression if it has no space?","body":"<p>I'm working on a project to convert postfix to prefix. The code works fine if I add spaces between the operands and operators, but it will not if the characters are have no space between. The sample i used is &quot;AB + CD+*&quot;</p>\n<p>here is my code.</p>\n<pre><code>class PostfixToPrefix {\n    \n    public static String Postfix_To_Prefix (String Postfix) throws SyntaxError {\n        \n        // declare the operand stack \n        Stack&lt;String&gt; operand = new Stack&lt;&gt;(); \n        \n        // declare the tokenize function \n        StringTokenizer tokens = new StringTokenizer (Postfix);\n        \n        // while loop to get the next token while there are more tokens \n        while (tokens.hasMoreTokens()) {\n            String token = tokens.nextToken();\n            \n            // if the token is an operand push into the stack \n            if(If_Operand(token)) {\n                operand.push(token);\n            } \n            else { // if the token is an operator pop two operands \n                String operand2 = operand.pop();\n                String operand1 = operand.pop(); \n                String experssion = token + &quot; &quot; + operand1 + &quot; &quot; + operand2; // create a string with an operator followed by the two operands\n                operand.push(experssion); \n            }\n        }\n        \n        // syntax error is thrown if empty stack is popped\n            if(operand.isEmpty()) {\n                throw new SyntaxError(&quot;Stack is empty&quot;); \n            }\n                String Experssion = operand.pop(); // pop the prefix expression into a string \n                 \n             // syntax error is thrown if the stack is not empty after the conversion is complete\n           if(!operand.isEmpty()) {\n               throw new SyntaxError(&quot; Stack is not Empty &quot;); \n           }\n                \n           \n           return Experssion; //return the prefix expression \n    }\n    \n    // helper method to decide if the token is  an operand\n    private static boolean If_Operand(String token) {\n        return !token.equals(&quot;+&quot;) &amp;&amp; !token.equals(&quot;-&quot;) &amp;&amp; !token.equals(&quot;/&quot;) &amp;&amp; !token.equals(&quot;*&quot;); \n    }\n\n}\n\n</code></pre>\n<p>I tried the split method and it did not work.\nI appreciate your feedback.</p>\n"},{"tags":["java","nd4j"],"answers":[{"tags":[],"owner":{"account_id":6647858,"reputation":3100,"user_id":5131255,"display_name":"Adam Gibson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693314075,"creation_date":1693314075,"answer_id":77000462,"question_id":76984199,"body_markdown":"Nd4j maintainer here. If you want to read just use a map over a spark data frame, have each step create a row and then combine the final result using Nd4j.concat(..).\r\n\r\n\r\n If you can, consider converting to arrow first and then using the nd4j-arrow converter.It uses the tensor abstraction which didn&#39;t seem to get as much support as I hoped. You can find that here:\r\nhttps://github.com/deeplearning4j/deeplearning4j/blob/master/nd4j/nd4j-serde/nd4j-arrow/src/main/java/org/nd4j/arrow/ArrowSerde.java#L42\r\n\r\n\r\nFeel free to file an issue over on the dl4j repository and I can take a look at other recommendations for you as well.","title":"Create INDArray (ND4J) from csv or spark data frame","body":"<p>Nd4j maintainer here. If you want to read just use a map over a spark data frame, have each step create a row and then combine the final result using Nd4j.concat(..).</p>\n<p>If you can, consider converting to arrow first and then using the nd4j-arrow converter.It uses the tensor abstraction which didn't seem to get as much support as I hoped. You can find that here:\n<a href=\"https://github.com/deeplearning4j/deeplearning4j/blob/master/nd4j/nd4j-serde/nd4j-arrow/src/main/java/org/nd4j/arrow/ArrowSerde.java#L42\" rel=\"nofollow noreferrer\">https://github.com/deeplearning4j/deeplearning4j/blob/master/nd4j/nd4j-serde/nd4j-arrow/src/main/java/org/nd4j/arrow/ArrowSerde.java#L42</a></p>\n<p>Feel free to file an issue over on the dl4j repository and I can take a look at other recommendations for you as well.</p>\n"}],"owner":{"account_id":28023604,"reputation":3,"user_id":21404004,"display_name":"Lukas Tycho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77000462,"answer_count":1,"score":0,"last_activity_date":1693314075,"creation_date":1693072550,"question_id":76984199,"body_markdown":"I want to use ND4J purely as linear algebra library and would like to create an INDArray directly from either a csv file or a spark dataframe without having to create an intermediate Java collection on-heap. I tried to find a solution everywhere but couldn’t find anything. ","title":"Create INDArray (ND4J) from csv or spark data frame","body":"<p>I want to use ND4J purely as linear algebra library and would like to create an INDArray directly from either a csv file or a spark dataframe without having to create an intermediate Java collection on-heap. I tried to find a solution everywhere but couldn’t find anything.</p>\n"},{"tags":["java","android","flutter","flutter-dependencies"],"comments":[{"owner":{"account_id":10387585,"reputation":1596,"user_id":7660084,"display_name":"Mr Special"},"score":0,"creation_date":1578477447,"post_id":59511692,"comment_id":105447925,"body_markdown":"I face the same problem, i comes from code. add ur code the file have GoogleMap widget. Maybe I can help u","body":"I face the same problem, i comes from code. add ur code the file have GoogleMap widget. Maybe I can help u"}],"answers":[{"tags":[],"owner":{"account_id":16165029,"reputation":561,"user_id":11670217,"display_name":"Tasnim"},"comment_count":0,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1579409261,"creation_date":1579409261,"answer_id":59807226,"question_id":59511692,"body_markdown":"I have also got the same error for android but my code works after following these steps:\r\n\r\n 1. Clean App data &amp; Uninstall the current app.\r\n 2. Run flutter clean &amp; flutter build.\r\n 3. Run Your App again","title":"google maps Trying to create a platform view of unregistered type","body":"<p>I have also got the same error for android but my code works after following these steps:</p>\n\n<ol>\n<li>Clean App data &amp; Uninstall the current app.</li>\n<li>Run flutter clean &amp; flutter build.</li>\n<li>Run Your App again</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2247474,"reputation":4806,"user_id":1980510,"accept_rate":64,"display_name":"John Alexander Betts"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1693314006,"creation_date":1593479268,"answer_id":62648855,"question_id":59511692,"body_markdown":"Your `minSdkVersion` must be greater than 20\r\n\r\n    1. flutter clean\r\n    2. flutter run\r\n\r\nSolved my issue","title":"google maps Trying to create a platform view of unregistered type","body":"<p>Your <code>minSdkVersion</code> must be greater than 20</p>\n<pre><code>1. flutter clean\n2. flutter run\n</code></pre>\n<p>Solved my issue</p>\n"},{"tags":[],"owner":{"account_id":20031024,"reputation":11,"user_id":14683792,"display_name":"Nilo Sebastian Vila Zamora"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1606004645,"creation_date":1606001090,"answer_id":64949166,"question_id":59511692,"body_markdown":"Replace in `MainActivity.kt` the next import:  \r\n`import io.flutter.app.FlutterActivity`  \r\nfor:  \r\n`import io.flutter.embedding.android.FlutterActivity`\r\n\r\nThis solve the problem!","title":"google maps Trying to create a platform view of unregistered type","body":"<p>Replace in <code>MainActivity.kt</code> the next import:<br />\n<code>import io.flutter.app.FlutterActivity</code><br />\nfor:<br />\n<code>import io.flutter.embedding.android.FlutterActivity</code></p>\n<p>This solve the problem!</p>\n"}],"owner":{"account_id":6729416,"reputation":1648,"user_id":5186340,"accept_rate":38,"display_name":"Mahmoud Niypoo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13986,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":3,"score":13,"last_activity_date":1693314006,"creation_date":1577542622,"question_id":59511692,"body_markdown":"I have App I&#39;m working on it&#39;s working as good before I Upgrading pre 1.12 Android projects , not it&#39;s give me a error `google maps Trying to create a platform view of unregistered type`\r\n\r\nand map working good in IOS with same google api key that i used in android\r\n\r\nI have did `flutter clean` more than one and uninstall app and use different emulator, the error is same \r\n \r\n\r\n**androidManifest.xml**\r\n  \r\n\r\n      &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        package=&quot;come.example.appid&quot;&gt;\r\n    \r\n        &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n        &lt;!-- Speech To Text configration --&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot;/&gt;\r\n        &lt;!-- Geolocator Configration Start --&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\r\n        &lt;!-- Geolocator Configration end --&gt;\r\n        &lt;!-- Local Notification --&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;/&gt;\r\n        &lt;!-- Local Notification --&gt;\r\n    \r\n        &lt;application\r\n            tools:replace=&quot;android:label&quot;\r\n            android:label=&quot;appname&quot;\r\n            android:icon=&quot;@mipmap/launcher_icon&quot;&gt;\r\n    \r\n            &lt;!-- Google Maps --&gt;\r\n            &lt;meta-data android:name=&quot;com.google.android.geo.API_KEY&quot;\r\n                 android:value=&quot;APIKeyyyyyyyyyyyy-xxxxxxxx&quot;/&gt;\r\n              \r\n            &lt;!-- Google Maps --&gt;\r\n            &lt;meta-data\r\n                android:name=&quot;com.google.firebase.messaging.default_notification_channel_id&quot;\r\n                android:value=&quot;@string/default_notification_channel_id&quot;/&gt;\r\n    \r\n            &lt;!-- Facebook Configration Start --&gt;\r\n            &lt;!-- &lt;meta-data android:name=&quot;com.facebook.sdk.ApplicationId&quot;\r\n                android:value=&quot;@string/facebook_app_id&quot;/&gt; --&gt;\r\n    \r\n    \r\n            &lt;activity android:name=&quot;com.facebook.FacebookActivity&quot;\r\n                android:configChanges=\r\n                        &quot;keyboard|keyboardHidden|screenLayout|screenSize|orientation&quot;\r\n                android:label=&quot;@string/app_name&quot; /&gt;\r\n    \r\n            &lt;activity\r\n                android:name=&quot;com.facebook.CustomTabActivity&quot;\r\n                android:exported=&quot;true&quot;&gt;\r\n                \r\n                &lt;!-- FCM Configration start --&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;FLUTTER_NOTIFICATION_CLICK&quot; /&gt;\r\n                    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n                &lt;!-- FCM Configration end --&gt;\r\n    \r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;\r\n                    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n                    &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;\r\n                    &lt;data android:scheme=&quot;@string/fb_login_protocol_scheme&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n            &lt;!-- Facebook Configration end --&gt;\r\n    \r\n            &lt;!-- Local Notification --&gt;\r\n            &lt;receiver android:name=&quot;com.dexterous.flutterlocalnotifications.ScheduledNotificationReceiver&quot; /&gt;\r\n            &lt;receiver android:name=&quot;com.dexterous.flutterlocalnotifications.ScheduledNotificationBootReceiver&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot;&gt;&lt;/action&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/receiver&gt;\r\n    \r\n    \r\n            &lt;activity\r\n                android:name=&quot;io.flutter.embedding.android.FlutterActivity&quot;\r\n                android:theme=&quot;@style/LaunchTheme&quot;\r\n                android:configChanges=&quot;orientation|keyboardHidden|keyboard|screenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode&quot;\r\n                android:hardwareAccelerated=&quot;true&quot;\r\n                android:windowSoftInputMode=&quot;adjustResize&quot;&gt;\r\n    \r\n                &lt;!-- Specify that the launch screen should continue being displayed --&gt;\r\n                &lt;!-- until Flutter renders its first frame. --&gt;\r\n                &lt;meta-data\r\n                    android:name=&quot;io.flutter.embedding.android.SplashScreenDrawable&quot;\r\n                    android:resource=&quot;@drawable/launch_background&quot; /&gt;\r\n    \r\n                &lt;!-- Theme to apply as soon as Flutter begins rendering frames --&gt;\r\n                &lt;meta-data\r\n                    android:name=&quot;io.flutter.embedding.android.NormalTheme&quot;\r\n                    android:resource=&quot;@style/NormalTheme&quot;\r\n                    /&gt;\r\n    \r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;\r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;/&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n    \r\n    \r\n            &lt;meta-data\r\n                android:name=&quot;flutterEmbedding&quot;\r\n                android:value=&quot;2&quot; /&gt;\r\n    \r\n        &lt;/application&gt;\r\n    &lt;/manifest&gt;\r\n\r\n\r\n\r\n**the error is**\r\n\r\n&gt;    E/flutter ( 8262): [ERROR:flutter/lib/ui/ui_dart_state.cc(157)]\r\n&gt; Unhandled Exception: PlatformException(error,\r\n&gt; java.lang.IllegalStateException: Trying to create a platform view of\r\n&gt; unregistered type: plugins.flutter.io/google_maps E/flutter ( 8262):\r\n&gt; \tat\r\n&gt; io.flutter.plugin.platform.PlatformViewsController$1.createPlatformView(PlatformViewsController.java:91)\r\n&gt; E/flutter ( 8262): \tat\r\n&gt; io.flutter.embedding.engine.systemchannels.PlatformViewsChannel$1.create(PlatformViewsChannel.java:96)\r\n&gt; E/flutter ( 8262): \tat\r\n&gt; io.flutter.embedding.engine.systemchannels.PlatformViewsChannel$1.onMethodCall(PlatformViewsChannel.java:60)\r\n&gt; E/flutter ( 8262): \tat\r\n&gt; io.flutter.plugin.common.MethodChannel$IncomingMethodCallHandler.onMessage(MethodChannel.java:231)\r\n&gt; E/flutter ( 8262):","title":"google maps Trying to create a platform view of unregistered type","body":"<p>I have App I'm working on it's working as good before I Upgrading pre 1.12 Android projects , not it's give me a error <code>google maps Trying to create a platform view of unregistered type</code></p>\n\n<p>and map working good in IOS with same google api key that i used in android</p>\n\n<p>I have did <code>flutter clean</code> more than one and uninstall app and use different emulator, the error is same </p>\n\n<p><strong>androidManifest.xml</strong></p>\n\n<pre><code>  &lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"come.example.appid\"&gt;\n\n    &lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n    &lt;!-- Speech To Text configration --&gt;\n    &lt;uses-permission android:name=\"android.permission.RECORD_AUDIO\"/&gt;\n    &lt;!-- Geolocator Configration Start --&gt;\n    &lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" /&gt;\n    &lt;!-- Geolocator Configration end --&gt;\n    &lt;!-- Local Notification --&gt;\n    &lt;uses-permission android:name=\"android.permission.VIBRATE\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.RECEIVE_BOOT_COMPLETED\"/&gt;\n    &lt;!-- Local Notification --&gt;\n\n    &lt;application\n        tools:replace=\"android:label\"\n        android:label=\"appname\"\n        android:icon=\"@mipmap/launcher_icon\"&gt;\n\n        &lt;!-- Google Maps --&gt;\n        &lt;meta-data android:name=\"com.google.android.geo.API_KEY\"\n             android:value=\"APIKeyyyyyyyyyyyy-xxxxxxxx\"/&gt;\n\n        &lt;!-- Google Maps --&gt;\n        &lt;meta-data\n            android:name=\"com.google.firebase.messaging.default_notification_channel_id\"\n            android:value=\"@string/default_notification_channel_id\"/&gt;\n\n        &lt;!-- Facebook Configration Start --&gt;\n        &lt;!-- &lt;meta-data android:name=\"com.facebook.sdk.ApplicationId\"\n            android:value=\"@string/facebook_app_id\"/&gt; --&gt;\n\n\n        &lt;activity android:name=\"com.facebook.FacebookActivity\"\n            android:configChanges=\n                    \"keyboard|keyboardHidden|screenLayout|screenSize|orientation\"\n            android:label=\"@string/app_name\" /&gt;\n\n        &lt;activity\n            android:name=\"com.facebook.CustomTabActivity\"\n            android:exported=\"true\"&gt;\n\n            &lt;!-- FCM Configration start --&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"FLUTTER_NOTIFICATION_CLICK\" /&gt;\n                &lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;\n            &lt;/intent-filter&gt;\n            &lt;!-- FCM Configration end --&gt;\n\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.VIEW\" /&gt;\n                &lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;\n                &lt;category android:name=\"android.intent.category.BROWSABLE\" /&gt;\n                &lt;data android:scheme=\"@string/fb_login_protocol_scheme\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;!-- Facebook Configration end --&gt;\n\n        &lt;!-- Local Notification --&gt;\n        &lt;receiver android:name=\"com.dexterous.flutterlocalnotifications.ScheduledNotificationReceiver\" /&gt;\n        &lt;receiver android:name=\"com.dexterous.flutterlocalnotifications.ScheduledNotificationBootReceiver\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.BOOT_COMPLETED\"&gt;&lt;/action&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n\n\n        &lt;activity\n            android:name=\"io.flutter.embedding.android.FlutterActivity\"\n            android:theme=\"@style/LaunchTheme\"\n            android:configChanges=\"orientation|keyboardHidden|keyboard|screenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode\"\n            android:hardwareAccelerated=\"true\"\n            android:windowSoftInputMode=\"adjustResize\"&gt;\n\n            &lt;!-- Specify that the launch screen should continue being displayed --&gt;\n            &lt;!-- until Flutter renders its first frame. --&gt;\n            &lt;meta-data\n                android:name=\"io.flutter.embedding.android.SplashScreenDrawable\"\n                android:resource=\"@drawable/launch_background\" /&gt;\n\n            &lt;!-- Theme to apply as soon as Flutter begins rendering frames --&gt;\n            &lt;meta-data\n                android:name=\"io.flutter.embedding.android.NormalTheme\"\n                android:resource=\"@style/NormalTheme\"\n                /&gt;\n\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\"/&gt;\n                &lt;category android:name=\"android.intent.category.LAUNCHER\"/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n\n        &lt;meta-data\n            android:name=\"flutterEmbedding\"\n            android:value=\"2\" /&gt;\n\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n\n<p><strong>the error is</strong></p>\n\n<blockquote>\n  <p>E/flutter ( 8262): [ERROR:flutter/lib/ui/ui_dart_state.cc(157)]\n  Unhandled Exception: PlatformException(error,\n  java.lang.IllegalStateException: Trying to create a platform view of\n  unregistered type: plugins.flutter.io/google_maps E/flutter ( 8262):\n    at\n  io.flutter.plugin.platform.PlatformViewsController$1.createPlatformView(PlatformViewsController.java:91)\n  E/flutter ( 8262):    at\n  io.flutter.embedding.engine.systemchannels.PlatformViewsChannel$1.create(PlatformViewsChannel.java:96)\n  E/flutter ( 8262):    at\n  io.flutter.embedding.engine.systemchannels.PlatformViewsChannel$1.onMethodCall(PlatformViewsChannel.java:60)\n  E/flutter ( 8262):    at\n  io.flutter.plugin.common.MethodChannel$IncomingMethodCallHandler.onMessage(MethodChannel.java:231)\n  E/flutter ( 8262):</p>\n</blockquote>\n"},{"tags":["java","spring","jpa","spring-data-jpa","spring-transactions"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1693312733,"post_id":77000272,"comment_id":135741555,"body_markdown":"Transactions across HTTP is what you want and what doesn&#39;t exists. You need to write logic to do a compensating transaction (i.e. remove the committed stuff).","body":"Transactions across HTTP is what you want and what doesn&#39;t exists. You need to write logic to do a compensating transaction (i.e. remove the committed stuff)."},{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1693312756,"post_id":77000272,"comment_id":135741562,"body_markdown":"You meant SpringBoot 3.1.2? Most of Spring Source libs are at 6 now.","body":"You meant SpringBoot 3.1.2? Most of Spring Source libs are at 6 now."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1693326882,"post_id":77000272,"comment_id":135744823,"body_markdown":"What you want might fall into what is called a distributed transaction, where the XA transaction manager handles the multiple transactions for you. See https://docs.spring.io/spring-boot/docs/2.0.x/reference/html/boot-features-jta.html as a start, and there are demos on the various options. The threads though probably should not be asynchronous - They must be able to all participate in the same transactional scope, and the transaction manager handle splitting it out into multiple XA resources. Though if all schemas on in the same DB, can they not just use the same connection/transaction?","body":"What you want might fall into what is called a distributed transaction, where the XA transaction manager handles the multiple transactions for you. See <a href=\"https://docs.spring.io/spring-boot/docs/2.0.x/reference/html/boot-features-jta.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/2.0.x/reference/html/&hellip;</a> as a start, and there are demos on the various options. The threads though probably should not be asynchronous - They must be able to all participate in the same transactional scope, and the transaction manager handle splitting it out into multiple XA resources. Though if all schemas on in the same DB, can they not just use the same connection/transaction?"}],"owner":{"account_id":29321815,"reputation":1,"user_id":22465237,"display_name":"Errori"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693313143,"creation_date":1693312604,"question_id":77000272,"body_markdown":"(Using Springboot 3.1.2)\r\nI have a service (Foo) that will call 1-3 other services (Bar, Bizz, Buzz) asynchronously. Bar Bizz and Buzz will all commit similar data across 1-3 schemas in a database. I want it so that if a transaction fails in one for any reason, we can rollback the other schemas, and if it succeeds in all 3 we save it in all 3.\r\n\r\nI have tried putting an @Transaction around the main service Foo, however that doesn&#39;t work with mulithreadding. I have made Bar, Bizz, and Buzz all @Transactional but once their main logic ends it will commit the Transaction before the threads are joined in Foo. Is there an easy way in Spring to have parity between different transactions? Or will I have to use a more basic approach with JDBC to handle commits?","title":"Multithreaded Transaction Parity in Spring Using Spring JPA and Transactions","body":"<p>(Using Springboot 3.1.2)\nI have a service (Foo) that will call 1-3 other services (Bar, Bizz, Buzz) asynchronously. Bar Bizz and Buzz will all commit similar data across 1-3 schemas in a database. I want it so that if a transaction fails in one for any reason, we can rollback the other schemas, and if it succeeds in all 3 we save it in all 3.</p>\n<p>I have tried putting an @Transaction around the main service Foo, however that doesn't work with mulithreadding. I have made Bar, Bizz, and Buzz all @Transactional but once their main logic ends it will commit the Transaction before the threads are joined in Foo. Is there an easy way in Spring to have parity between different transactions? Or will I have to use a more basic approach with JDBC to handle commits?</p>\n"},{"tags":["java","json","tibco","tibco-business-works","tibco-designer"],"answers":[{"tags":[],"owner":{"account_id":11149560,"reputation":372,"user_id":8183257,"display_name":"EmmanuelM"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693313008,"creation_date":1693313008,"answer_id":77000323,"question_id":76997195,"body_markdown":"To handle this scenario you need to do the following :\r\n\r\n. Create an XML schema that would match the structure of the target JSON document\r\n. Map the source schema to the target schema using the &#39;For Each / Group-by&#39; option\r\n\r\nUse of the group-by option is explained in BusinessWorks Process Design Guide, in chapter 8 &#39;Mapping and Transformation&#39; and in section Examples of Mappings (See &#39;Converting a List Into a Grouped List&#39;).\r\n\r\n. Finally convert the XML to JSON with the XML to JSON activity\r\n\r\n","title":"JSON to replace element name dynamically with value","body":"<p>To handle this scenario you need to do the following :</p>\n<p>. Create an XML schema that would match the structure of the target JSON document\n. Map the source schema to the target schema using the 'For Each / Group-by' option</p>\n<p>Use of the group-by option is explained in BusinessWorks Process Design Guide, in chapter 8 'Mapping and Transformation' and in section Examples of Mappings (See 'Converting a List Into a Grouped List').</p>\n<p>. Finally convert the XML to JSON with the XML to JSON activity</p>\n"}],"owner":{"account_id":16418974,"reputation":13,"user_id":11860711,"display_name":"abhishek karan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693313008,"creation_date":1693280766,"question_id":76997195,"body_markdown":"TIBCO BW 5.14\r\nI have below input records:\r\n\r\n    \r\n```\r\n&lt;Record&gt;\r\n    \t&lt;TESTID&gt;1&lt;/TESTID&gt;\r\n    \t&lt;SCHEDULEDAY&gt;2023-08-22&lt;/SCHEDULEDAY&gt;\r\n    \t&lt;CUSTID&gt;5&lt;/CUSTID&gt;\r\n    \t&lt;MOBILENUMBER&gt;222222222&lt;/MOBILENUMBER&gt;\r\n    \t&lt;RADIONUM&gt;12345&lt;/RADIONUM&gt;\r\n    &lt;/Record&gt;\r\n    &lt;Record&gt;\r\n    \t&lt;TESTID&gt;2&lt;/TESTID&gt;\r\n    \t&lt;SCHEDULEDAY&gt;2023-08-22&lt;/SCHEDULEDAY&gt;\r\n    \t&lt;CUSTID&gt;5&lt;/CUSTID&gt;\r\n    \t&lt;MOBILENUMBER&gt;222222222&lt;/MOBILENUMBER&gt;\r\n    \t&lt;RADIONUM&gt;12345&lt;/RADIONUM&gt;\r\n    &lt;/Record&gt;\r\n    &lt;Record&gt;\r\n    \t&lt;TESTID&gt;3&lt;/TESTID&gt;\r\n    \t&lt;SCHEDULEDAY&gt;2023-08-26&lt;/SCHEDULEDAY&gt;\r\n    \t&lt;CUSTID&gt;6&lt;/CUSTID&gt;\r\n    \t&lt;MOBILENUMBER&gt;222222222&lt;/MOBILENUMBER&gt;\r\n    \t&lt;RADIONUM&gt;12345&lt;/RADIONUM&gt;\r\n    &lt;/Record&gt;\r\n```\r\nI want to use SCHEDULEDAY from above request and create JSON like this, where SCHEDULEDAY is used as element tag and both records of same SCHEDULEDAY  are combined in jSON output.\r\n\r\nOutput JSON:\r\n    \r\n```\r\n{\r\n      &quot;finalData&quot;: {\r\n\t &quot;2023-08-22&quot;: [\r\n\t\t{\r\n\t\t\t&quot;TESTID&quot;: 1,\r\n\t\t\t&quot;CUSTID&quot;: 5,\r\n\t\t\t&quot;Mobile&quot;: 1232434345,\r\n\t\t\t&quot;radioNum&quot;: 11\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;TESTID&quot;: 3,\r\n\t\t\t&quot;CUSTID&quot;: 5,\r\n\t\t\t&quot;Mobile&quot;: 4545454524,\r\n\t\t\t&quot;radioNum&quot;: 22\r\n\t\t}\r\n\t],\r\n\t &quot;2023-08-26&quot;: [\r\n\t\t{\r\n\t\t\t&quot;TESTID&quot;: 5,\r\n\t\t\t&quot;CUSTID&quot;: 6,\r\n\t\t\t&quot;Mobile&quot;: 4543466759,\r\n\t\t\t&quot;radioNum&quot;: 33\r\n\t\t}\r\n\t]\r\n\t}\r\n}\r\n```\r\n\r\n[enter image description here](https://i.stack.imgur.com/BWePS.png)\r\n\r\nI tried iterating it over the SCHEDULDAY in TIBCO BW and then used parse json to convert the XML to JSON but its not returning the data as not sure how it can be achieved.","title":"JSON to replace element name dynamically with value","body":"<p>TIBCO BW 5.14\nI have below input records:</p>\n<pre><code>&lt;Record&gt;\n        &lt;TESTID&gt;1&lt;/TESTID&gt;\n        &lt;SCHEDULEDAY&gt;2023-08-22&lt;/SCHEDULEDAY&gt;\n        &lt;CUSTID&gt;5&lt;/CUSTID&gt;\n        &lt;MOBILENUMBER&gt;222222222&lt;/MOBILENUMBER&gt;\n        &lt;RADIONUM&gt;12345&lt;/RADIONUM&gt;\n    &lt;/Record&gt;\n    &lt;Record&gt;\n        &lt;TESTID&gt;2&lt;/TESTID&gt;\n        &lt;SCHEDULEDAY&gt;2023-08-22&lt;/SCHEDULEDAY&gt;\n        &lt;CUSTID&gt;5&lt;/CUSTID&gt;\n        &lt;MOBILENUMBER&gt;222222222&lt;/MOBILENUMBER&gt;\n        &lt;RADIONUM&gt;12345&lt;/RADIONUM&gt;\n    &lt;/Record&gt;\n    &lt;Record&gt;\n        &lt;TESTID&gt;3&lt;/TESTID&gt;\n        &lt;SCHEDULEDAY&gt;2023-08-26&lt;/SCHEDULEDAY&gt;\n        &lt;CUSTID&gt;6&lt;/CUSTID&gt;\n        &lt;MOBILENUMBER&gt;222222222&lt;/MOBILENUMBER&gt;\n        &lt;RADIONUM&gt;12345&lt;/RADIONUM&gt;\n    &lt;/Record&gt;\n</code></pre>\n<p>I want to use SCHEDULEDAY from above request and create JSON like this, where SCHEDULEDAY is used as element tag and both records of same SCHEDULEDAY  are combined in jSON output.</p>\n<p>Output JSON:</p>\n<pre><code>{\n      &quot;finalData&quot;: {\n     &quot;2023-08-22&quot;: [\n        {\n            &quot;TESTID&quot;: 1,\n            &quot;CUSTID&quot;: 5,\n            &quot;Mobile&quot;: 1232434345,\n            &quot;radioNum&quot;: 11\n        },\n        {\n            &quot;TESTID&quot;: 3,\n            &quot;CUSTID&quot;: 5,\n            &quot;Mobile&quot;: 4545454524,\n            &quot;radioNum&quot;: 22\n        }\n    ],\n     &quot;2023-08-26&quot;: [\n        {\n            &quot;TESTID&quot;: 5,\n            &quot;CUSTID&quot;: 6,\n            &quot;Mobile&quot;: 4543466759,\n            &quot;radioNum&quot;: 33\n        }\n    ]\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/BWePS.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I tried iterating it over the SCHEDULDAY in TIBCO BW and then used parse json to convert the XML to JSON but its not returning the data as not sure how it can be achieved.</p>\n"},{"tags":["java","tdlib"],"answers":[{"comments":[{"owner":{"account_id":7561019,"reputation":184,"user_id":5738610,"display_name":"Pavel Krizhanovskiy"},"score":0,"creation_date":1688727693,"post_id":76630871,"comment_id":135116001,"body_markdown":"Same result when uncomment these rows:\n//    implementation group: &#39;it.tdlight&#39;, name: &#39;tdlight-natives&#39;, classifier: &#39;linux_amd64_gcc_ssl1&#39;\n//    implementation group: &#39;it.tdlight&#39;, name: &#39;tdlight-natives&#39;, classifier: &#39;linux_amd64_gcc_ssl3&#39;","body":"Same result when uncomment these rows: //    implementation group: &#39;it.tdlight&#39;, name: &#39;tdlight-natives&#39;, classifier: &#39;linux_amd64_gcc_ssl1&#39; //    implementation group: &#39;it.tdlight&#39;, name: &#39;tdlight-natives&#39;, classifier: &#39;linux_amd64_gcc_ssl3&#39;"},{"owner":{"account_id":4338649,"reputation":41,"user_id":3542519,"display_name":"Cavallium"},"score":0,"creation_date":1688865063,"post_id":76630871,"comment_id":135131146,"body_markdown":"You should remove the other line that don&#39;t have &quot;_gcc&quot;, otherwise it will prefer that. Also, you should send the new stacktrace if it still throws an error.","body":"You should remove the other line that don&#39;t have &quot;_gcc&quot;, otherwise it will prefer that. Also, you should send the new stacktrace if it still throws an error."}],"tags":[],"owner":{"account_id":4338649,"reputation":41,"user_id":3542519,"display_name":"Cavallium"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688661062,"creation_date":1688661062,"answer_id":76630871,"question_id":76619973,"body_markdown":"The first stacktrace says that you don&#39;t have libc++ installed: `libc++.so.1: No such file or directory`\r\n\r\nYou are using the following classifiers that require libc++: `linux_amd64_ssl1` and `linux_amd64_ssl3`.\r\n\r\nIf you don&#39;t have libc++ and you don&#39;t want to install it, you should choose the following classifiers instead: `linux_amd64_gcc_ssl1` and `linux_amd64_gcc_ssl3`","title":"Can&#39;t use TDLight (TDLib fork) in Java","body":"<p>The first stacktrace says that you don't have libc++ installed: <code>libc++.so.1: No such file or directory</code></p>\n<p>You are using the following classifiers that require libc++: <code>linux_amd64_ssl1</code> and <code>linux_amd64_ssl3</code>.</p>\n<p>If you don't have libc++ and you don't want to install it, you should choose the following classifiers instead: <code>linux_amd64_gcc_ssl1</code> and <code>linux_amd64_gcc_ssl3</code></p>\n"},{"comments":[{"owner":{"account_id":26062283,"reputation":1,"user_id":20076740,"display_name":"Artem Melikhov"},"score":0,"creation_date":1693312777,"post_id":77000260,"comment_id":135741566,"body_markdown":"Yes, I used a different image, but I hope it doesn&#39;t matter","body":"Yes, I used a different image, but I hope it doesn&#39;t matter"}],"tags":[],"owner":{"account_id":26062283,"reputation":1,"user_id":20076740,"display_name":"Artem Melikhov"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693312541,"creation_date":1693312541,"answer_id":77000260,"question_id":76619973,"body_markdown":"Faced the same problem. The reason may be that your `openjdk:17-alpine` image does not have the required openssl version. Try updating openssl like [here](https://askubuntu.com/a/1102966/683621). It helped me and this [guy](https://github.com/tdlight-team/tdlight-java/issues/10).\r\n\r\n    FROM  openjdk:17-jdk-slim-bullseye\r\n    #Perl is required to install openssl\r\n    RUN apt-get update \\\r\n        &amp;&amp; apt-get install -y ca-certificates wget bash \\\r\n        &amp;&amp; apt-get -qy install perl\r\n\r\n    #Remove current openssl\r\n    RUN apt-get -y remove openssl\r\n\r\n    #This is required to run “tar” command\r\n    RUN apt-get -qy install gcc\r\n\r\n    RUN apt-get -q update &amp;&amp; apt-get -qy install wget make &amp;&amp; \\\r\n        wget https://www.openssl.org/source/openssl-1.1.1g.tar.gz &amp;&amp;  \\\r\n        tar -zxf openssl-1.1.1g.tar.gz &amp;&amp; cd openssl-1.1.1g &amp;&amp; \\\r\n        ./config &amp;&amp; \\\r\n        make install\r\n\r\n    WORKDIR /app\r\n\r\n    ADD build/libs/*.jar /app/libs/\r\n    ADD build/resources/* /app/resources/\r\n\r\n    ENTRYPOINT [&quot;sh&quot;, &quot;-c&quot;, &quot;java ${JAVA_OPTS} -jar /app/libs/example.jar&quot;]","title":"Can&#39;t use TDLight (TDLib fork) in Java","body":"<p>Faced the same problem. The reason may be that your <code>openjdk:17-alpine</code> image does not have the required openssl version. Try updating openssl like <a href=\"https://askubuntu.com/a/1102966/683621\">here</a>. It helped me and this <a href=\"https://github.com/tdlight-team/tdlight-java/issues/10\" rel=\"nofollow noreferrer\">guy</a>.</p>\n<pre><code>FROM  openjdk:17-jdk-slim-bullseye\n#Perl is required to install openssl\nRUN apt-get update \\\n    &amp;&amp; apt-get install -y ca-certificates wget bash \\\n    &amp;&amp; apt-get -qy install perl\n\n#Remove current openssl\nRUN apt-get -y remove openssl\n\n#This is required to run “tar” command\nRUN apt-get -qy install gcc\n\nRUN apt-get -q update &amp;&amp; apt-get -qy install wget make &amp;&amp; \\\n    wget https://www.openssl.org/source/openssl-1.1.1g.tar.gz &amp;&amp;  \\\n    tar -zxf openssl-1.1.1g.tar.gz &amp;&amp; cd openssl-1.1.1g &amp;&amp; \\\n    ./config &amp;&amp; \\\n    make install\n\nWORKDIR /app\n\nADD build/libs/*.jar /app/libs/\nADD build/resources/* /app/resources/\n\nENTRYPOINT [&quot;sh&quot;, &quot;-c&quot;, &quot;java ${JAVA_OPTS} -jar /app/libs/example.jar&quot;]\n</code></pre>\n"}],"owner":{"account_id":7561019,"reputation":184,"user_id":5738610,"display_name":"Pavel Krizhanovskiy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":445,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693312541,"creation_date":1688557380,"question_id":76619973,"body_markdown":"please help. 2 days wasted for this problem :(\r\n\r\nI&#39;m creating Telegram bot in Java using https://github.com/tdlight-team/tdlight.  \r\nI created Gradle project, built jar, and now trying to run it in Docker image `FROM openjdk:17-alpine`\r\n\r\nSome important things from `build.gradle`:\r\n```\r\nbuildscript {\r\n    apply from: &#39;versions.gradle&#39;\r\n    repositories {\r\n        mavenCentral()\r\n        maven { url &quot;https://plugins.gradle.org/m2/&quot; }\r\n        maven { url &quot;https://mvn.mchv.eu/repository/mchv/&quot; }\r\n        jcenter()\r\n    }\r\n    dependencies {\r\n        classpath(&quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;)\r\n        classpath(&quot;org.jetbrains.kotlin:kotlin-stdlib-common:$kotlin_version&quot;)\r\n    }\r\n}\r\nplugins {\r\n    id &#39;org.jetbrains.kotlin.jvm&#39; version &quot;$kotlin_version&quot;\r\n    id &#39;org.jetbrains.kotlin.plugin.serialization&#39; version &quot;$kotlin_version&quot;\r\n    id &quot;com.github.johnrengelman.shadow&quot; version &#39;7.1.2&#39;\r\n}\r\ndependencies {\r\n//    implementation &quot;org.telegram:telegrambots:${versions.telegram}&quot;\r\n    implementation platform(&quot;it.tdlight:tdlight-java-bom:${versions.tdLight}&quot;)\r\n    implementation group: &#39;it.tdlight&#39;, name: &#39;tdlight-java&#39;, classifier: &#39;jdk8&#39; // Java 8 is supported if you use the following dependency classifier: `jdk8`\r\n//    implementation group: &#39;it.tdlight&#39;, name: &#39;tdlight-natives&#39;, classifier: &#39;linux_amd64_gcc_ssl1&#39;\r\n//    implementation group: &#39;it.tdlight&#39;, name: &#39;tdlight-natives&#39;, classifier: &#39;linux_amd64_gcc_ssl3&#39;\r\n    implementation group: &#39;it.tdlight&#39;, name: &#39;tdlight-natives&#39;, classifier: &#39;windows_amd64&#39;\r\n    implementation group: &#39;it.tdlight&#39;, name: &#39;tdlight-natives&#39;, classifier: &#39;linux_amd64_ssl1&#39;\r\n    implementation group: &#39;it.tdlight&#39;, name: &#39;tdlight-natives&#39;, classifier: &#39;linux_amd64_ssl3&#39;\r\n\r\n    implementation &quot;com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:${versions.jackson}&quot;\r\n    implementation &quot;com.fasterxml.jackson.core:jackson-databind:${versions.jackson}&quot;\r\n    implementation &quot;com.sksamuel.hoplite:hoplite-core:${versions.hoplite}&quot; //to read properties\r\n    implementation &quot;com.sksamuel.hoplite:hoplite-yaml:${versions.hoplite}&quot; //to read yaml-properties\r\n\r\n//...\r\n\r\nkotlin {\r\n    jvmToolchain(11)\r\n}\r\n\r\ncompileKotlin {\r\n    kotlinOptions.jvmTarget = &#39;11&#39;\r\n}\r\n\r\ncompileTestKotlin {\r\n    kotlinOptions.jvmTarget = &#39;11&#39;\r\n}\r\n\r\njar {\r\n    manifest {\r\n        attributes &#39;Main-Class&#39;: &#39;name.nepavel.otus.watchbot.MainKt&#39;\r\n    }\r\n}\r\n\r\nshadowJar {\r\n    archiveVersion.set(project.version)\r\n}\r\n\r\n```\r\nAlmost everything is exactly as in TDLight `readme.md`.\r\nThen I connected to Docker container&#39;s shell and run:  \r\n`docker run -v D:\\:/d -it --entrypoint /bin/sh --name open17 norg/openjdk-17`  \r\n```\r\n/ # java -version\r\nopenjdk version &quot;17-ea&quot; 2021-09-14\r\nOpenJDK Runtime Environment (build 17-ea+14)\r\nOpenJDK 64-Bit Server VM (build 17-ea+14, mixed mode, sharing)\r\n```  \r\n`java -jar /d/work/otus/repos/watchbot/build/libs/watchbot-1.0-SNAPSHOT-all.jar`  \r\nAnd got a long stacktrace:\r\n```\r\nException in thread &quot;main&quot; it.tdlight.util.UnsupportedNativeLibraryException: Failed to load TDLight native libraries\r\n        at it.tdlight.util.Native.loadLibrary(Native.java:65)\r\n        at it.tdlight.util.Native.loadNativesInternal(Native.java:37)\r\n        at it.tdlight.Init.init(Init.java:53)\r\n        at name.nepavel.otus.watchbot.MainKt.main(Main.kt:43)\r\n        at name.nepavel.otus.watchbot.MainKt.main(Main.kt)\r\nCaused by: java.lang.IllegalArgumentException: Failed to load any of the given libraries: [tdjni.linux_amd64_ssl1, tdjni.linux_amd64_ssl3, tdjni.linux_amd64_gcc_ssl1, tdjni.linux_amd64_gcc_ssl3]\r\n        at it.tdlight.util.NativeLibraryLoader.loadFirstAvailable(NativeLibraryLoader.java:132)\r\n        at it.tdlight.util.Native.loadLibrary(Native.java:55)\r\n        ... 4 more\r\n        Suppressed: java.lang.UnsatisfiedLinkError: /tmp/tdlight-java-natives15557113517622973995/libtdjni.linux_amd64_ssl16069453053884461735.so: Error loading shared library libc++.so.1: No such file or directory (needed by /tmp/tdlight-java-natives15557113517622973995/libtdjni.linux_amd64_ssl16069453053884461735.so)\r\n                at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\r\n                at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:383)\r\n                at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:227)\r\n                at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:169)\r\n                at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2383)\r\n                at java.base/java.lang.Runtime.load0(Runtime.java:746)\r\n                at java.base/java.lang.System.load(System.java:1857)\r\n                at it.tdlight.util.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:21)\r\n                at it.tdlight.util.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:439)\r\n                at it.tdlight.util.NativeLibraryLoader.load(NativeLibraryLoader.java:236)\r\n                at it.tdlight.util.NativeLibraryLoader.loadFirstAvailable(NativeLibraryLoader.java:123)\r\n                ... 5 more\r\n                Suppressed: java.lang.UnsatisfiedLinkError: /tmp/tdlight-java-natives15557113517622973995/libtdjni.linux_amd64_ssl16069453053884461735.so: Error loading shared library libc++.so.1: No such file or directory (needed by /tmp/tdlight-java-natives15557113517622973995/libtdjni.linux_amd64_ssl16069453053884461735.so)\r\n                        at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\r\n                        at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:383)\r\n                        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:227)\r\n                        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:169)\r\n                        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2383)\r\n                        at java.base/java.lang.Runtime.load0(Runtime.java:746)\r\n                        at java.base/java.lang.System.load(System.java:1857)\r\n                        at it.tdlight.util.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:21)\r\n                        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n                        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\r\n                        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n                        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n                        at it.tdlight.util.NativeLibraryLoader.loadLibraryByHelper(NativeLibraryLoader.java:468)\r\n                        at it.tdlight.util.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:431)\r\n                        ... 7 more\r\n                Suppressed: java.lang.UnsatisfiedLinkError: no tdjni.linux_amd64_ssl1 in java.library.path: /usr/lib:/usr/lib/bin\r\n                        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2423)\r\n                        at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:808)\r\n                        at java.base/java.lang.System.loadLibrary(System.java:1893)\r\n                        at it.tdlight.util.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:23)\r\n                        at it.tdlight.util.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:439)\r\n                        at it.tdlight.util.NativeLibraryLoader.load(NativeLibraryLoader.java:179)\r\n                        ... 6 more\r\n                        Suppressed: java.lang.UnsatisfiedLinkError: no tdjni.linux_amd64_ssl1 in java.library.path: /usr/lib:/usr/lib/bin\r\n                                at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2423)\r\n                                at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:808)\r\n                                at java.base/java.lang.System.loadLibrary(System.java:1893)\r\n                                at it.tdlight.util.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:23)\r\n                                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n                                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\r\n                                at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n                                at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n                                at it.tdlight.util.NativeLibraryLoader.loadLibraryByHelper(NativeLibraryLoader.java:468)\r\n                                at it.tdlight.util.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:431)\r\n                                ... 7 more\r\n\r\n... ... ...\r\n\r\nSuppressed: java.lang.UnsatisfiedLinkError: could not load a native library: tdjni\r\n                at it.tdlight.util.NativeLibraryLoader.load(NativeLibraryLoader.java:257)\r\n                at it.tdlight.util.Native.loadLibrary(Native.java:58)\r\n                ... 4 more\r\n        Caused by: java.io.FileNotFoundException: META-INF/tdlightjni/libtdjni.so\r\n                at it.tdlight.util.NativeLibraryLoader.load(NativeLibraryLoader.java:204)\r\n                ... 5 more\r\n                Suppressed: java.lang.UnsatisfiedLinkError: no tdjni in java.library.path: /usr/lib:/usr/lib/bin\r\n                        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2423)\r\n                        at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:808)\r\n                        at java.base/java.lang.System.loadLibrary(System.java:1893)\r\n                        at it.tdlight.util.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:23)\r\n                        at it.tdlight.util.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:439)\r\n                        at it.tdlight.util.NativeLibraryLoader.load(NativeLibraryLoader.java:179)\r\n                        ... 5 more\r\n                        Suppressed: java.lang.UnsatisfiedLinkError: no tdjni in java.library.path: /usr/lib:/usr/lib/bin\r\n                                at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2423)\r\n                                at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:808)\r\n                                at java.base/java.lang.System.loadLibrary(System.java:1893)\r\n                                at it.tdlight.util.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:23)\r\n                                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n                                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\r\n                                at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n                                at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n                                at it.tdlight.util.NativeLibraryLoader.loadLibraryByHelper(NativeLibraryLoader.java:468)\r\n                                at it.tdlight.util.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:431)\r\n                                ... 6 more\r\n```\r\nThis means that precompiled natives are not accessible in my jar file. Then I decided to build `tdjni` native inside my Docker image. I took the build commands from here: https://tdlight-team.github.io/tdlight/build.html?language=Kotlin  \r\nand created the following Dockerfile:\r\n```\r\nFROM openjdk:17-alpine\r\nARG VER=$VER\r\nENV VER=$VER\r\nENV JAVA_OPTS=-Xmx1g\r\nRUN echo &quot;Version = $VER&quot;\r\nRUN echo &quot;JAVA_HOME = $JAVA_HOME&quot;\r\n\r\nRUN apk update &amp;&amp; \\\r\n    apk upgrade &amp;&amp; \\\r\n    apk add --update alpine-sdk linux-headers git zlib-dev openssl-dev gperf php cmake openjdk8 &amp;&amp; \\\r\n    git clone https://github.com/tdlight-team/tdlight.git &amp;&amp; \\\r\n    cd tdlight &amp;&amp; \\\r\n    rm -rf build &amp;&amp; \\\r\n    mkdir build &amp;&amp; \\\r\n    cd build &amp;&amp; \\\r\n    cmake -DCMAKE_BUILD_TYPE=Release -DJAVA_HOME=/usr/lib/jvm/java-1.8-openjdk/ -DCMAKE_INSTALL_PREFIX:PATH=../example/java/td -DTD_ENABLE_JNI=ON .. &amp;&amp; \\\r\n    cmake --build . --target install &amp;&amp; \\\r\n    cd .. &amp;&amp; \\\r\n    cd example/java &amp;&amp; \\\r\n    rm -rf build &amp;&amp; \\\r\n    mkdir build &amp;&amp; \\\r\n    cd build &amp;&amp; \\\r\n    cmake -DCMAKE_BUILD_TYPE=Release -DJAVA_HOME=/usr/lib/jvm/java-1.8-openjdk/ -DCMAKE_INSTALL_PREFIX:PATH=/usr/local -DTd_DIR:PATH=$(readlink -f ../td/lib/cmake/Td) .. &amp;&amp; \\\r\n    cmake --build . --target install &amp;&amp; \\\r\n    cd ../../.. &amp;&amp; \\\r\n    cd .. &amp;&amp; \\\r\n    ls -l /usr/local\r\n\r\nCMD [&quot;/bin/sh&quot;]\r\n```\r\n**But result remained the same.**  \r\nThen I specified the path to my built `tdjni` when starting jar inside new container:  \r\n`java -Djava.library.path=/usr/local:/usr/local/bin -jar /d/work/otus/repos/watchbot/build/libs/watchbot-1.0-SNAPSHOT-all.jar`  \r\nLibrary was found this time:\r\n```\r\n[ 1][t 0][1688555466.113252401][tl_jni_object.cpp:39]   Can&#39;t find class [org/drinkless/tdlib/Client]\r\nFATAL ERROR in native method: Can&#39;t find class [org/drinkless/tdlib/Client]\r\n        at jdk.internal.loader.NativeLibraries.load(java.base@17-ea/Native Method)\r\n        at jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(java.base@17-ea/NativeLibraries.java:383)\r\n        at jdk.internal.loader.NativeLibraries.loadLibrary(java.base@17-ea/NativeLibraries.java:227)\r\n        - locked &lt;0x0000000083d6d970&gt; (a java.util.HashSet)\r\n        at jdk.internal.loader.NativeLibraries.loadLibrary(java.base@17-ea/NativeLibraries.java:169)\r\n        at jdk.internal.loader.NativeLibraries.findFromPaths(java.base@17-ea/NativeLibraries.java:310)\r\n        at jdk.internal.loader.NativeLibraries.loadLibrary(java.base@17-ea/NativeLibraries.java:282)\r\n        at java.lang.ClassLoader.loadLibrary(java.base@17-ea/ClassLoader.java:2416)\r\n        at java.lang.Runtime.loadLibrary0(java.base@17-ea/Runtime.java:808)\r\n        at java.lang.System.loadLibrary(java.base@17-ea/System.java:1893)\r\n        at it.tdlight.util.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:23)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(java.base@17-ea/Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(java.base@17-ea/NativeMethodAccessorImpl.java:78)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(java.base@17-ea/DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(java.base@17-ea/Method.java:568)\r\n        at it.tdlight.util.NativeLibraryLoader.loadLibraryByHelper(NativeLibraryLoader.java:468)\r\n        at it.tdlight.util.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:431)\r\n        at it.tdlight.util.NativeLibraryLoader.load(NativeLibraryLoader.java:179)\r\n        at it.tdlight.util.Native.loadLibrary(Native.java:58)\r\n        at it.tdlight.util.Native.loadNativesInternal(Native.java:37)\r\n        at it.tdlight.Init.init(Init.java:53)\r\n        at name.nepavel.otus.watchbot.MainKt.main(Main.kt:43)\r\n        at name.nepavel.otus.watchbot.MainKt.main(Main.kt)\r\nAborted\r\n```\r\nWhy it requires `org/drinkless/tdlib/Client` while I&#39;m using TDLight, which should contain TDLib API? I decided to &quot;show him&quot; where the TDLib compiled Java classes are located (they were created by build commands):  \r\n`java -Djava.library.path=/usr/local:/usr/local/bin -cp /d/work/otus/repos/watchbot/build/libs/watchbot-1.0-SNAPSHOT-all.jar:/usr/local/bin name.nepavel.otus.watchbot.MainKt`  \r\nand got:\r\n```\r\n11:12:21.898 [main] ERROR it.tdlight.TDLight - Can&#39;t set verbosity level on startup\r\njava.lang.UnsatisfiedLinkError: &#39;it.tdlight.jni.TdApi$Object it.tdlight.tdnative.NativeClient.nativeClientExecute(it.tdlight.jni.TdApi$Function)&#39;\r\n        at it.tdlight.tdnative.NativeClient.nativeClientExecute(Native Method) ~[watchbot-1.0-SNAPSHOT-all.jar:?]\r\n        at it.tdlight.NativeClientAccess.execute(NativeClientAccess.java:14) ~[watchbot-1.0-SNAPSHOT-all.jar:?]\r\n        at it.tdlight.Init.init(Init.java:56) [watchbot-1.0-SNAPSHOT-all.jar:?]\r\n        at name.nepavel.otus.watchbot.MainKt.main(Main.kt:43) [watchbot-1.0-SNAPSHOT-all.jar:?]\r\n        at name.nepavel.otus.watchbot.MainKt.main(Main.kt) [watchbot-1.0-SNAPSHOT-all.jar:?]\r\nException in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: &#39;int it.tdlight.tdnative.NativeClient.createNativeClient()&#39;\r\n        at it.tdlight.tdnative.NativeClient.createNativeClient(Native Method)\r\n        at it.tdlight.NativeClientAccess.create(NativeClientAccess.java:10)\r\n        at it.tdlight.InternalClient.createAndRegisterClient(InternalClient.java:160)\r\n        at it.tdlight.InternalClient.initialize(InternalClient.java:149)\r\n        at it.tdlight.AutoCleaningTelegramClient.initialize(AutoCleaningTelegramClient.java:46)\r\n        at name.nepavel.otus.watchbot.MainKt.main(Main.kt:48)\r\n        at name.nepavel.otus.watchbot.MainKt.main(Main.kt)\r\n```\r\nNow it looks like TDLight expects another version of TDLib native (as far as I can see). What am I doing wrong? How to make it work?\r\n\r\nI have tried different base images, different JAVA_HOME, different JDK from 11 to 17, \r\ndifferent TDLight dependencies in build.gradle, but nothing changed. I suppose that the mistake is small and stupid, but I can&#39;t find it by myself.","title":"Can&#39;t use TDLight (TDLib fork) in Java","body":"<p>please help. 2 days wasted for this problem :(</p>\n<p>I'm creating Telegram bot in Java using <a href=\"https://github.com/tdlight-team/tdlight\" rel=\"nofollow noreferrer\">https://github.com/tdlight-team/tdlight</a>.<br />\nI created Gradle project, built jar, and now trying to run it in Docker image <code>FROM openjdk:17-alpine</code></p>\n<p>Some important things from <code>build.gradle</code>:</p>\n<pre><code>buildscript {\n    apply from: 'versions.gradle'\n    repositories {\n        mavenCentral()\n        maven { url &quot;https://plugins.gradle.org/m2/&quot; }\n        maven { url &quot;https://mvn.mchv.eu/repository/mchv/&quot; }\n        jcenter()\n    }\n    dependencies {\n        classpath(&quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;)\n        classpath(&quot;org.jetbrains.kotlin:kotlin-stdlib-common:$kotlin_version&quot;)\n    }\n}\nplugins {\n    id 'org.jetbrains.kotlin.jvm' version &quot;$kotlin_version&quot;\n    id 'org.jetbrains.kotlin.plugin.serialization' version &quot;$kotlin_version&quot;\n    id &quot;com.github.johnrengelman.shadow&quot; version '7.1.2'\n}\ndependencies {\n//    implementation &quot;org.telegram:telegrambots:${versions.telegram}&quot;\n    implementation platform(&quot;it.tdlight:tdlight-java-bom:${versions.tdLight}&quot;)\n    implementation group: 'it.tdlight', name: 'tdlight-java', classifier: 'jdk8' // Java 8 is supported if you use the following dependency classifier: `jdk8`\n//    implementation group: 'it.tdlight', name: 'tdlight-natives', classifier: 'linux_amd64_gcc_ssl1'\n//    implementation group: 'it.tdlight', name: 'tdlight-natives', classifier: 'linux_amd64_gcc_ssl3'\n    implementation group: 'it.tdlight', name: 'tdlight-natives', classifier: 'windows_amd64'\n    implementation group: 'it.tdlight', name: 'tdlight-natives', classifier: 'linux_amd64_ssl1'\n    implementation group: 'it.tdlight', name: 'tdlight-natives', classifier: 'linux_amd64_ssl3'\n\n    implementation &quot;com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:${versions.jackson}&quot;\n    implementation &quot;com.fasterxml.jackson.core:jackson-databind:${versions.jackson}&quot;\n    implementation &quot;com.sksamuel.hoplite:hoplite-core:${versions.hoplite}&quot; //to read properties\n    implementation &quot;com.sksamuel.hoplite:hoplite-yaml:${versions.hoplite}&quot; //to read yaml-properties\n\n//...\n\nkotlin {\n    jvmToolchain(11)\n}\n\ncompileKotlin {\n    kotlinOptions.jvmTarget = '11'\n}\n\ncompileTestKotlin {\n    kotlinOptions.jvmTarget = '11'\n}\n\njar {\n    manifest {\n        attributes 'Main-Class': 'name.nepavel.otus.watchbot.MainKt'\n    }\n}\n\nshadowJar {\n    archiveVersion.set(project.version)\n}\n\n</code></pre>\n<p>Almost everything is exactly as in TDLight <code>readme.md</code>.\nThen I connected to Docker container's shell and run:<br />\n<code>docker run -v D:\\:/d -it --entrypoint /bin/sh --name open17 norg/openjdk-17</code></p>\n<pre><code>/ # java -version\nopenjdk version &quot;17-ea&quot; 2021-09-14\nOpenJDK Runtime Environment (build 17-ea+14)\nOpenJDK 64-Bit Server VM (build 17-ea+14, mixed mode, sharing)\n</code></pre>\n<p><code>java -jar /d/work/otus/repos/watchbot/build/libs/watchbot-1.0-SNAPSHOT-all.jar</code><br />\nAnd got a long stacktrace:</p>\n<pre><code>Exception in thread &quot;main&quot; it.tdlight.util.UnsupportedNativeLibraryException: Failed to load TDLight native libraries\n        at it.tdlight.util.Native.loadLibrary(Native.java:65)\n        at it.tdlight.util.Native.loadNativesInternal(Native.java:37)\n        at it.tdlight.Init.init(Init.java:53)\n        at name.nepavel.otus.watchbot.MainKt.main(Main.kt:43)\n        at name.nepavel.otus.watchbot.MainKt.main(Main.kt)\nCaused by: java.lang.IllegalArgumentException: Failed to load any of the given libraries: [tdjni.linux_amd64_ssl1, tdjni.linux_amd64_ssl3, tdjni.linux_amd64_gcc_ssl1, tdjni.linux_amd64_gcc_ssl3]\n        at it.tdlight.util.NativeLibraryLoader.loadFirstAvailable(NativeLibraryLoader.java:132)\n        at it.tdlight.util.Native.loadLibrary(Native.java:55)\n        ... 4 more\n        Suppressed: java.lang.UnsatisfiedLinkError: /tmp/tdlight-java-natives15557113517622973995/libtdjni.linux_amd64_ssl16069453053884461735.so: Error loading shared library libc++.so.1: No such file or directory (needed by /tmp/tdlight-java-natives15557113517622973995/libtdjni.linux_amd64_ssl16069453053884461735.so)\n                at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n                at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:383)\n                at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:227)\n                at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:169)\n                at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2383)\n                at java.base/java.lang.Runtime.load0(Runtime.java:746)\n                at java.base/java.lang.System.load(System.java:1857)\n                at it.tdlight.util.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:21)\n                at it.tdlight.util.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:439)\n                at it.tdlight.util.NativeLibraryLoader.load(NativeLibraryLoader.java:236)\n                at it.tdlight.util.NativeLibraryLoader.loadFirstAvailable(NativeLibraryLoader.java:123)\n                ... 5 more\n                Suppressed: java.lang.UnsatisfiedLinkError: /tmp/tdlight-java-natives15557113517622973995/libtdjni.linux_amd64_ssl16069453053884461735.so: Error loading shared library libc++.so.1: No such file or directory (needed by /tmp/tdlight-java-natives15557113517622973995/libtdjni.linux_amd64_ssl16069453053884461735.so)\n                        at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n                        at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:383)\n                        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:227)\n                        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:169)\n                        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2383)\n                        at java.base/java.lang.Runtime.load0(Runtime.java:746)\n                        at java.base/java.lang.System.load(System.java:1857)\n                        at it.tdlight.util.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:21)\n                        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n                        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\n                        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n                        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n                        at it.tdlight.util.NativeLibraryLoader.loadLibraryByHelper(NativeLibraryLoader.java:468)\n                        at it.tdlight.util.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:431)\n                        ... 7 more\n                Suppressed: java.lang.UnsatisfiedLinkError: no tdjni.linux_amd64_ssl1 in java.library.path: /usr/lib:/usr/lib/bin\n                        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2423)\n                        at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:808)\n                        at java.base/java.lang.System.loadLibrary(System.java:1893)\n                        at it.tdlight.util.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:23)\n                        at it.tdlight.util.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:439)\n                        at it.tdlight.util.NativeLibraryLoader.load(NativeLibraryLoader.java:179)\n                        ... 6 more\n                        Suppressed: java.lang.UnsatisfiedLinkError: no tdjni.linux_amd64_ssl1 in java.library.path: /usr/lib:/usr/lib/bin\n                                at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2423)\n                                at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:808)\n                                at java.base/java.lang.System.loadLibrary(System.java:1893)\n                                at it.tdlight.util.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:23)\n                                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n                                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\n                                at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n                                at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n                                at it.tdlight.util.NativeLibraryLoader.loadLibraryByHelper(NativeLibraryLoader.java:468)\n                                at it.tdlight.util.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:431)\n                                ... 7 more\n\n... ... ...\n\nSuppressed: java.lang.UnsatisfiedLinkError: could not load a native library: tdjni\n                at it.tdlight.util.NativeLibraryLoader.load(NativeLibraryLoader.java:257)\n                at it.tdlight.util.Native.loadLibrary(Native.java:58)\n                ... 4 more\n        Caused by: java.io.FileNotFoundException: META-INF/tdlightjni/libtdjni.so\n                at it.tdlight.util.NativeLibraryLoader.load(NativeLibraryLoader.java:204)\n                ... 5 more\n                Suppressed: java.lang.UnsatisfiedLinkError: no tdjni in java.library.path: /usr/lib:/usr/lib/bin\n                        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2423)\n                        at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:808)\n                        at java.base/java.lang.System.loadLibrary(System.java:1893)\n                        at it.tdlight.util.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:23)\n                        at it.tdlight.util.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:439)\n                        at it.tdlight.util.NativeLibraryLoader.load(NativeLibraryLoader.java:179)\n                        ... 5 more\n                        Suppressed: java.lang.UnsatisfiedLinkError: no tdjni in java.library.path: /usr/lib:/usr/lib/bin\n                                at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2423)\n                                at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:808)\n                                at java.base/java.lang.System.loadLibrary(System.java:1893)\n                                at it.tdlight.util.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:23)\n                                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n                                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\n                                at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n                                at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n                                at it.tdlight.util.NativeLibraryLoader.loadLibraryByHelper(NativeLibraryLoader.java:468)\n                                at it.tdlight.util.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:431)\n                                ... 6 more\n</code></pre>\n<p>This means that precompiled natives are not accessible in my jar file. Then I decided to build <code>tdjni</code> native inside my Docker image. I took the build commands from here: <a href=\"https://tdlight-team.github.io/tdlight/build.html?language=Kotlin\" rel=\"nofollow noreferrer\">https://tdlight-team.github.io/tdlight/build.html?language=Kotlin</a><br />\nand created the following Dockerfile:</p>\n<pre><code>FROM openjdk:17-alpine\nARG VER=$VER\nENV VER=$VER\nENV JAVA_OPTS=-Xmx1g\nRUN echo &quot;Version = $VER&quot;\nRUN echo &quot;JAVA_HOME = $JAVA_HOME&quot;\n\nRUN apk update &amp;&amp; \\\n    apk upgrade &amp;&amp; \\\n    apk add --update alpine-sdk linux-headers git zlib-dev openssl-dev gperf php cmake openjdk8 &amp;&amp; \\\n    git clone https://github.com/tdlight-team/tdlight.git &amp;&amp; \\\n    cd tdlight &amp;&amp; \\\n    rm -rf build &amp;&amp; \\\n    mkdir build &amp;&amp; \\\n    cd build &amp;&amp; \\\n    cmake -DCMAKE_BUILD_TYPE=Release -DJAVA_HOME=/usr/lib/jvm/java-1.8-openjdk/ -DCMAKE_INSTALL_PREFIX:PATH=../example/java/td -DTD_ENABLE_JNI=ON .. &amp;&amp; \\\n    cmake --build . --target install &amp;&amp; \\\n    cd .. &amp;&amp; \\\n    cd example/java &amp;&amp; \\\n    rm -rf build &amp;&amp; \\\n    mkdir build &amp;&amp; \\\n    cd build &amp;&amp; \\\n    cmake -DCMAKE_BUILD_TYPE=Release -DJAVA_HOME=/usr/lib/jvm/java-1.8-openjdk/ -DCMAKE_INSTALL_PREFIX:PATH=/usr/local -DTd_DIR:PATH=$(readlink -f ../td/lib/cmake/Td) .. &amp;&amp; \\\n    cmake --build . --target install &amp;&amp; \\\n    cd ../../.. &amp;&amp; \\\n    cd .. &amp;&amp; \\\n    ls -l /usr/local\n\nCMD [&quot;/bin/sh&quot;]\n</code></pre>\n<p><strong>But result remained the same.</strong><br />\nThen I specified the path to my built <code>tdjni</code> when starting jar inside new container:<br />\n<code>java -Djava.library.path=/usr/local:/usr/local/bin -jar /d/work/otus/repos/watchbot/build/libs/watchbot-1.0-SNAPSHOT-all.jar</code><br />\nLibrary was found this time:</p>\n<pre><code>[ 1][t 0][1688555466.113252401][tl_jni_object.cpp:39]   Can't find class [org/drinkless/tdlib/Client]\nFATAL ERROR in native method: Can't find class [org/drinkless/tdlib/Client]\n        at jdk.internal.loader.NativeLibraries.load(java.base@17-ea/Native Method)\n        at jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(java.base@17-ea/NativeLibraries.java:383)\n        at jdk.internal.loader.NativeLibraries.loadLibrary(java.base@17-ea/NativeLibraries.java:227)\n        - locked &lt;0x0000000083d6d970&gt; (a java.util.HashSet)\n        at jdk.internal.loader.NativeLibraries.loadLibrary(java.base@17-ea/NativeLibraries.java:169)\n        at jdk.internal.loader.NativeLibraries.findFromPaths(java.base@17-ea/NativeLibraries.java:310)\n        at jdk.internal.loader.NativeLibraries.loadLibrary(java.base@17-ea/NativeLibraries.java:282)\n        at java.lang.ClassLoader.loadLibrary(java.base@17-ea/ClassLoader.java:2416)\n        at java.lang.Runtime.loadLibrary0(java.base@17-ea/Runtime.java:808)\n        at java.lang.System.loadLibrary(java.base@17-ea/System.java:1893)\n        at it.tdlight.util.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:23)\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(java.base@17-ea/Native Method)\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(java.base@17-ea/NativeMethodAccessorImpl.java:78)\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(java.base@17-ea/DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(java.base@17-ea/Method.java:568)\n        at it.tdlight.util.NativeLibraryLoader.loadLibraryByHelper(NativeLibraryLoader.java:468)\n        at it.tdlight.util.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:431)\n        at it.tdlight.util.NativeLibraryLoader.load(NativeLibraryLoader.java:179)\n        at it.tdlight.util.Native.loadLibrary(Native.java:58)\n        at it.tdlight.util.Native.loadNativesInternal(Native.java:37)\n        at it.tdlight.Init.init(Init.java:53)\n        at name.nepavel.otus.watchbot.MainKt.main(Main.kt:43)\n        at name.nepavel.otus.watchbot.MainKt.main(Main.kt)\nAborted\n</code></pre>\n<p>Why it requires <code>org/drinkless/tdlib/Client</code> while I'm using TDLight, which should contain TDLib API? I decided to &quot;show him&quot; where the TDLib compiled Java classes are located (they were created by build commands):<br />\n<code>java -Djava.library.path=/usr/local:/usr/local/bin -cp /d/work/otus/repos/watchbot/build/libs/watchbot-1.0-SNAPSHOT-all.jar:/usr/local/bin name.nepavel.otus.watchbot.MainKt</code><br />\nand got:</p>\n<pre><code>11:12:21.898 [main] ERROR it.tdlight.TDLight - Can't set verbosity level on startup\njava.lang.UnsatisfiedLinkError: 'it.tdlight.jni.TdApi$Object it.tdlight.tdnative.NativeClient.nativeClientExecute(it.tdlight.jni.TdApi$Function)'\n        at it.tdlight.tdnative.NativeClient.nativeClientExecute(Native Method) ~[watchbot-1.0-SNAPSHOT-all.jar:?]\n        at it.tdlight.NativeClientAccess.execute(NativeClientAccess.java:14) ~[watchbot-1.0-SNAPSHOT-all.jar:?]\n        at it.tdlight.Init.init(Init.java:56) [watchbot-1.0-SNAPSHOT-all.jar:?]\n        at name.nepavel.otus.watchbot.MainKt.main(Main.kt:43) [watchbot-1.0-SNAPSHOT-all.jar:?]\n        at name.nepavel.otus.watchbot.MainKt.main(Main.kt) [watchbot-1.0-SNAPSHOT-all.jar:?]\nException in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: 'int it.tdlight.tdnative.NativeClient.createNativeClient()'\n        at it.tdlight.tdnative.NativeClient.createNativeClient(Native Method)\n        at it.tdlight.NativeClientAccess.create(NativeClientAccess.java:10)\n        at it.tdlight.InternalClient.createAndRegisterClient(InternalClient.java:160)\n        at it.tdlight.InternalClient.initialize(InternalClient.java:149)\n        at it.tdlight.AutoCleaningTelegramClient.initialize(AutoCleaningTelegramClient.java:46)\n        at name.nepavel.otus.watchbot.MainKt.main(Main.kt:48)\n        at name.nepavel.otus.watchbot.MainKt.main(Main.kt)\n</code></pre>\n<p>Now it looks like TDLight expects another version of TDLib native (as far as I can see). What am I doing wrong? How to make it work?</p>\n<p>I have tried different base images, different JAVA_HOME, different JDK from 11 to 17,\ndifferent TDLight dependencies in build.gradle, but nothing changed. I suppose that the mistake is small and stupid, but I can't find it by myself.</p>\n"},{"tags":["java","android","usb","hid"],"owner":{"account_id":22916246,"reputation":3,"user_id":17052799,"display_name":"Yonatan Shkolsky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693311465,"creation_date":1693311465,"question_id":77000135,"body_markdown":"I am working on a smart home system in Android that controls electronic devices.\r\n For my Android project, I&#39;ve utilized what I believe to be the USB relay board ([USB Relay 2 Channel ][2]) to manage various purifiers. These purifiers are connected to several Android devices, all integrated into my smart home system.\r\nI got help on how to communicate with this board from this post : [POST][1]\r\n\r\nHowever, I&#39;ve come across an unusual issue. Every few days, the relay stops responding to the commands I send. To address this problem, I&#39;ve attempted the following troubleshooting steps:\r\n\r\n1. Closing and reopening the app.\r\n2. Switching to different Android devices.\r\n3. Trying different relay boards. \r\n\r\nUnfortunately, none of these steps have proven effective. The only actions that have resolved the issue are rebooting the Android device or disconnecting and reconnecting the relay board.\r\n\r\nI&#39;m eager to know if anyone else has encountered this particular bug. Is there a restart command for this board that could potentially &quot;wake it up&quot;?\r\n\r\nI&#39;ve included the code snippet below, which I use to set the relay state within my project:\r\n\r\n\r\n    private int setRelay(E_RELAY_NUMBER_TYPES relayChannel, boolean state, int retries) throws IOException {\r\n        int status;\r\n        do {\r\n            byte channelValue = relayChannel == E_RELAY_NUMBER_TYPES.CHANNEL_1 ? (byte) 0x01 : (byte) 0x02;\r\n            if (state) {\r\n                byte[] openRelayBuffer = {(byte) 0xff, channelValue, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00};\r\n                status = deviceConnection.controlTransfer(0x21, 0x09, 0x0300, 0x00, openRelayBuffer, openRelayBuffer.length, 500);\r\n            } else {\r\n                byte[] closeRelayBuffer = {(byte) 0xfd, channelValue, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00};\r\n                status = deviceConnection.controlTransfer(0x21, 0x01, 0x0300, 0x00, closeRelayBuffer, closeRelayBuffer.length, 500);\r\n            }\r\n        } while ((status &lt; 0) &amp;&amp; connect() &amp;&amp; retries++ &lt; 5);\r\n        return status;\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/33364402/control-relay-over-usb-from-android\r\n  [2]: https://www.ebay.com/itm/273207402810?hash=item3f9c6e213a:g:~tkAAOSwojBdbkIm&amp;amdata=enc%3AAQAIAAABIDZkBo4mqYvUWNggICFbC0qqhbVc4GmPhba%2B4kMwFnwL71yn2q%2FkO1JdXIC1Ym4VSBChezwq5RhTCHKbyyxK8dwfrPurF8Z3j0%2Bolx0UMaROxSWvmT9d0%2FYJK5Ync5cciMjmKmJtiCMrnRfvKugOYB33vlffe1WXi8gVz4uWtQPJpaKPryn8LCVASEmuztuIgm0ogceRRW2ov5SiZiGJhoaO6MFIYPs5vIO4H686KP7nZXHb%2BPCUvYbtNaRROT8cTYoKlIqak1mEWYTLG%2BTv6le5onuInGyG%2FApuT2XXuZz3%2FWC9UnChCQxSNik86Yc5DkJDHYCcCKa4P7B6BbDiXXdgBjFh%2BWrtn%2FbQSSvw6cmAoMUvkmFPoLWu%2F69R5lIRKA%3D%3D%7Ctkp%3ABk9SR_qpu4LIYg","title":"Manage relay control through USB within a smart home setup","body":"<p>I am working on a smart home system in Android that controls electronic devices.\nFor my Android project, I've utilized what I believe to be the USB relay board (<a href=\"https://www.ebay.com/itm/273207402810?hash=item3f9c6e213a:g:%7EtkAAOSwojBdbkIm&amp;amdata=enc%3AAQAIAAABIDZkBo4mqYvUWNggICFbC0qqhbVc4GmPhba%2B4kMwFnwL71yn2q%2FkO1JdXIC1Ym4VSBChezwq5RhTCHKbyyxK8dwfrPurF8Z3j0%2Bolx0UMaROxSWvmT9d0%2FYJK5Ync5cciMjmKmJtiCMrnRfvKugOYB33vlffe1WXi8gVz4uWtQPJpaKPryn8LCVASEmuztuIgm0ogceRRW2ov5SiZiGJhoaO6MFIYPs5vIO4H686KP7nZXHb%2BPCUvYbtNaRROT8cTYoKlIqak1mEWYTLG%2BTv6le5onuInGyG%2FApuT2XXuZz3%2FWC9UnChCQxSNik86Yc5DkJDHYCcCKa4P7B6BbDiXXdgBjFh%2BWrtn%2FbQSSvw6cmAoMUvkmFPoLWu%2F69R5lIRKA%3D%3D%7Ctkp%3ABk9SR_qpu4LIYg\" rel=\"nofollow noreferrer\">USB Relay 2 Channel </a>) to manage various purifiers. These purifiers are connected to several Android devices, all integrated into my smart home system.\nI got help on how to communicate with this board from this post : <a href=\"https://stackoverflow.com/questions/33364402/control-relay-over-usb-from-android\">POST</a></p>\n<p>However, I've come across an unusual issue. Every few days, the relay stops responding to the commands I send. To address this problem, I've attempted the following troubleshooting steps:</p>\n<ol>\n<li>Closing and reopening the app.</li>\n<li>Switching to different Android devices.</li>\n<li>Trying different relay boards.</li>\n</ol>\n<p>Unfortunately, none of these steps have proven effective. The only actions that have resolved the issue are rebooting the Android device or disconnecting and reconnecting the relay board.</p>\n<p>I'm eager to know if anyone else has encountered this particular bug. Is there a restart command for this board that could potentially &quot;wake it up&quot;?</p>\n<p>I've included the code snippet below, which I use to set the relay state within my project:</p>\n<pre><code>private int setRelay(E_RELAY_NUMBER_TYPES relayChannel, boolean state, int retries) throws IOException {\n    int status;\n    do {\n        byte channelValue = relayChannel == E_RELAY_NUMBER_TYPES.CHANNEL_1 ? (byte) 0x01 : (byte) 0x02;\n        if (state) {\n            byte[] openRelayBuffer = {(byte) 0xff, channelValue, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00};\n            status = deviceConnection.controlTransfer(0x21, 0x09, 0x0300, 0x00, openRelayBuffer, openRelayBuffer.length, 500);\n        } else {\n            byte[] closeRelayBuffer = {(byte) 0xfd, channelValue, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00};\n            status = deviceConnection.controlTransfer(0x21, 0x01, 0x0300, 0x00, closeRelayBuffer, closeRelayBuffer.length, 500);\n        }\n    } while ((status &lt; 0) &amp;&amp; connect() &amp;&amp; retries++ &lt; 5);\n    return status;\n}\n</code></pre>\n"},{"tags":["java","spring","junit"],"answers":[{"tags":[],"owner":{"account_id":10919701,"reputation":543,"user_id":8026433,"accept_rate":100,"display_name":"Mike K."},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1598057097,"creation_date":1598057097,"answer_id":63531566,"question_id":63530656,"body_markdown":"Just make a new test and have it call springBeanPointcut()","title":"How do you write a JUnit test for an empty function Pointcut","body":"<p>Just make a new test and have it call springBeanPointcut()</p>\n"},{"tags":[],"owner":{"account_id":357773,"reputation":169,"user_id":698151,"accept_rate":42,"display_name":"Saran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693311294,"creation_date":1693311294,"answer_id":77000112,"question_id":63530656,"body_markdown":"Try this\r\n\r\n    @SpringBootTest\r\n    class LoggingTest {\r\n    \r\n        @Autowired\r\n        private Logging log;\r\n        \r\n        @Test\r\n        void springBeanPointcutTest(){\r\n            log.springBeanPointcut();\r\n            assertTrue(true);\r\n        }\r\n    }","title":"How do you write a JUnit test for an empty function Pointcut","body":"<p>Try this</p>\n<pre><code>@SpringBootTest\nclass LoggingTest {\n\n    @Autowired\n    private Logging log;\n    \n    @Test\n    void springBeanPointcutTest(){\n        log.springBeanPointcut();\n        assertTrue(true);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18510598,"reputation":305,"user_id":13485891,"display_name":"Stormy Weather"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":63531566,"answer_count":2,"score":1,"last_activity_date":1693311294,"creation_date":1598047926,"question_id":63530656,"body_markdown":"I am trying to write a JUnit test for this method. I am not familiar with Pointcut. Any advice? \r\n\r\n```\r\n /**\r\n     * Pointcut that matches all repositories, services and Web REST endpoints.\r\n     */\r\n    @Pointcut(&quot;within(@org.springframework.stereotype.Repository *)&quot; +\r\n        &quot; || within(@org.springframework.stereotype.Service *)&quot; +\r\n        &quot; || within(@org.springframework.web.bind.annotation.RestController *)&quot;)\r\n    public void springBeanPointcut() {\r\n        // Method is empty as this is just a Pointcut, the implementations are in the advices.\r\n    }\r\n```","title":"How do you write a JUnit test for an empty function Pointcut","body":"<p>I am trying to write a JUnit test for this method. I am not familiar with Pointcut. Any advice?</p>\n<pre><code> /**\n     * Pointcut that matches all repositories, services and Web REST endpoints.\n     */\n    @Pointcut(&quot;within(@org.springframework.stereotype.Repository *)&quot; +\n        &quot; || within(@org.springframework.stereotype.Service *)&quot; +\n        &quot; || within(@org.springframework.web.bind.annotation.RestController *)&quot;)\n    public void springBeanPointcut() {\n        // Method is empty as this is just a Pointcut, the implementations are in the advices.\n    }\n</code></pre>\n"},{"tags":["java","pojo","jsonschema2pojo"],"owner":{"account_id":16421928,"reputation":1,"user_id":11862917,"display_name":"Gjorgi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693311213,"creation_date":1693310530,"question_id":77000024,"body_markdown":"The folowing json was turned into an enum with version 1.0.2 but not with any version after that.\r\n\r\n```\r\n{\r\n  &quot;title&quot;: &quot;ApiErrorCode&quot;,\r\n  &quot;description&quot;: &quot;&quot;,\r\n  &quot;type&quot;: &quot;integer&quot;,\r\n  &quot;format&quot;: &quot;int32&quot;,\r\n  &quot;existingJavaType&quot;: &quot;java.lang.Integer&quot;,\r\n  &quot;javaType&quot;: &quot;com.hristovski.gjorgi.api.ApiErrorCode&quot;,\r\n  &quot;enum&quot;: [\r\n    400,\r\n    402,\r\n    403,\r\n    404,\r\n    500,\r\n    503\r\n  ],\r\n  &quot;javaEnumNames&quot;: [\r\n    &quot;BAD_REQUEST&quot;,\r\n    &quot;INSUFFICIENT_FUNDS&quot;,\r\n    &quot;FORBIDDEN&quot;,\r\n    &quot;NOT_FOUND&quot;,\r\n    &quot;SERVER_ERROR&quot;,\r\n    &quot;SERVICE_UNAVAILABLE&quot;\r\n  ]\r\n}\r\n```\r\n\r\n\r\nMaven is not building it, online and CLI tools also return empty POJO.\r\nBy checking the code it is stated that javaEnumNames cannot me used with javaEnums and it is not.\r\nI cannot find anything that should stop the code from generationg a class file, but it returns empty.\r\n\r\nIn the cli I included DEBUG logs, and they are also not telling me anything.\r\n\r\nThe expected class is\r\n\r\n\r\n```\r\n\r\npackage com.hristovski.gjorgi.api;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport com.fasterxml.jackson.annotation.JsonCreator;\r\nimport com.fasterxml.jackson.annotation.JsonValue;\r\n\r\n\r\n/**\r\n * ApiErrorCode\r\n * &lt;p&gt;\r\n * \r\n * \r\n */\r\npublic enum ApiErrorCode {\r\n\r\n    BAD_REQUEST(400),\r\n    INSUFFICIENT_FUNDS(402),\r\n    FORBIDDEN(403),\r\n    NOT_FOUND(404),\r\n    SERVER_ERROR(500),\r\n    SERVICE_UNAVAILABLE(503);\r\n    private final Integer value;\r\n    private final static Map&lt;Integer, ApiErrorCode&gt; CONSTANTS = new HashMap&lt;Integer, ApiErrorCode&gt;();\r\n\r\n    static {\r\n        for (ApiErrorCode c: values()) {\r\n            CONSTANTS.put(c.value, c);\r\n        }\r\n    }\r\n\r\n    private ApiErrorCode(Integer value) {\r\n        this.value = value;\r\n    }\r\n\r\n    @JsonValue\r\n    public Integer value() {\r\n        return this.value;\r\n    }\r\n\r\n    @JsonCreator\r\n    public static ApiErrorCode fromValue(Integer value) {\r\n        ApiErrorCode constant = CONSTANTS.get(value);\r\n        if (constant == null) {\r\n            throw new IllegalArgumentException((value +&quot;&quot;));\r\n        } else {\r\n            return constant;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n```\r\nI have more examples of code that has the same issue.","title":"We have bult ENUM with jsonschema2pojo 1.0.2 but the same json is not created now","body":"<p>The folowing json was turned into an enum with version 1.0.2 but not with any version after that.</p>\n<pre><code>{\n  &quot;title&quot;: &quot;ApiErrorCode&quot;,\n  &quot;description&quot;: &quot;&quot;,\n  &quot;type&quot;: &quot;integer&quot;,\n  &quot;format&quot;: &quot;int32&quot;,\n  &quot;existingJavaType&quot;: &quot;java.lang.Integer&quot;,\n  &quot;javaType&quot;: &quot;com.hristovski.gjorgi.api.ApiErrorCode&quot;,\n  &quot;enum&quot;: [\n    400,\n    402,\n    403,\n    404,\n    500,\n    503\n  ],\n  &quot;javaEnumNames&quot;: [\n    &quot;BAD_REQUEST&quot;,\n    &quot;INSUFFICIENT_FUNDS&quot;,\n    &quot;FORBIDDEN&quot;,\n    &quot;NOT_FOUND&quot;,\n    &quot;SERVER_ERROR&quot;,\n    &quot;SERVICE_UNAVAILABLE&quot;\n  ]\n}\n</code></pre>\n<p>Maven is not building it, online and CLI tools also return empty POJO.\nBy checking the code it is stated that javaEnumNames cannot me used with javaEnums and it is not.\nI cannot find anything that should stop the code from generationg a class file, but it returns empty.</p>\n<p>In the cli I included DEBUG logs, and they are also not telling me anything.</p>\n<p>The expected class is</p>\n<pre><code>\npackage com.hristovski.gjorgi.api;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport com.fasterxml.jackson.annotation.JsonCreator;\nimport com.fasterxml.jackson.annotation.JsonValue;\n\n\n/**\n * ApiErrorCode\n * &lt;p&gt;\n * \n * \n */\npublic enum ApiErrorCode {\n\n    BAD_REQUEST(400),\n    INSUFFICIENT_FUNDS(402),\n    FORBIDDEN(403),\n    NOT_FOUND(404),\n    SERVER_ERROR(500),\n    SERVICE_UNAVAILABLE(503);\n    private final Integer value;\n    private final static Map&lt;Integer, ApiErrorCode&gt; CONSTANTS = new HashMap&lt;Integer, ApiErrorCode&gt;();\n\n    static {\n        for (ApiErrorCode c: values()) {\n            CONSTANTS.put(c.value, c);\n        }\n    }\n\n    private ApiErrorCode(Integer value) {\n        this.value = value;\n    }\n\n    @JsonValue\n    public Integer value() {\n        return this.value;\n    }\n\n    @JsonCreator\n    public static ApiErrorCode fromValue(Integer value) {\n        ApiErrorCode constant = CONSTANTS.get(value);\n        if (constant == null) {\n            throw new IllegalArgumentException((value +&quot;&quot;));\n        } else {\n            return constant;\n        }\n    }\n\n}\n\n</code></pre>\n<p>I have more examples of code that has the same issue.</p>\n"},{"tags":["java","github","codeql"],"comments":[{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1693093534,"post_id":76959231,"comment_id":135714840,"body_markdown":"Maven should be [installed by default](https://github.com/actions/runner-images/blob/main/images/linux/Ubuntu2204-Readme.md#project-management) on the GitHub hosted runners. Could you try adding a [setup-java](https://github.com/actions/setup-java) step before running CodeQL and see if that solves the issue?","body":"Maven should be <a href=\"https://github.com/actions/runner-images/blob/main/images/linux/Ubuntu2204-Readme.md#project-management\" rel=\"nofollow noreferrer\">installed by default</a> on the GitHub hosted runners. Could you try adding a <a href=\"https://github.com/actions/setup-java\" rel=\"nofollow noreferrer\">setup-java</a> step before running CodeQL and see if that solves the issue?"},{"owner":{"account_id":13524734,"reputation":66,"user_id":9756856,"display_name":"D&#225;niel Kőcs"},"score":0,"creation_date":1693201047,"post_id":76959231,"comment_id":135723605,"body_markdown":"It is not really clear how this tool would install Maven. I copied this part to the code, it failed as the &#39;mvn&#39; command is not present on the system: &quot;steps:\n- uses: actions/checkout@v3\n- uses: actions/setup-java@v3\n  with:\n    distribution: &#39;temurin&#39;\n    java-version: &#39;17&#39;\n    cache: &#39;maven&#39;\n- name: Build with Maven\n  run: mvn -B package --file pom.xml&quot;. Should I use some other config to install?","body":"It is not really clear how this tool would install Maven. I copied this part to the code, it failed as the &#39;mvn&#39; command is not present on the system: &quot;steps: - uses: actions/checkout@v3 - uses: actions/setup-java@v3   with:     distribution: &#39;temurin&#39;     java-version: &#39;17&#39;     cache: &#39;maven&#39; - name: Build with Maven   run: mvn -B package --file pom.xml&quot;. Should I use some other config to install?"},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1693253946,"post_id":76959231,"comment_id":135733713,"body_markdown":"Sorry it seems you are right; I assumed maybe the exception message is actually about `mvn` failing due to a missing JDK, but it indeed looks like it cannot even find `mvn` in the first place. Is your GitHub repository public, or if not could you please create a small public demo repository showing the issue?","body":"Sorry it seems you are right; I assumed maybe the exception message is actually about <code>mvn</code> failing due to a missing JDK, but it indeed looks like it cannot even find <code>mvn</code> in the first place. Is your GitHub repository public, or if not could you please create a small public demo repository showing the issue?"},{"owner":{"account_id":13524734,"reputation":66,"user_id":9756856,"display_name":"D&#225;niel Kőcs"},"score":0,"creation_date":1693310703,"post_id":76959231,"comment_id":135741115,"body_markdown":"Issue was found. It seems that the runners used for these repos are built by different images, hence maven was needed to be installed manually.","body":"Issue was found. It seems that the runners used for these repos are built by different images, hence maven was needed to be installed manually."}],"answers":[{"tags":[],"owner":{"account_id":13524734,"reputation":66,"user_id":9756856,"display_name":"D&#225;niel Kőcs"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693310922,"creation_date":1693310922,"answer_id":77000070,"question_id":76959231,"body_markdown":"The runners used for this repository and many more were built with minimalistic images. Java and maven needed to be installed manually. For java [https://github.com/actions/setup-java][1] is working and for maven we used `sudo apt-get install -y maven`\r\nAfter these steps Autobuild step and code scan was successful.\r\n\r\n\r\n  [1]: https://github.com/actions/setup-java","title":"Codeql failing to scan github repository storing only java code","body":"<p>The runners used for this repository and many more were built with minimalistic images. Java and maven needed to be installed manually. For java <a href=\"https://github.com/actions/setup-java\" rel=\"nofollow noreferrer\">https://github.com/actions/setup-java</a> is working and for maven we used <code>sudo apt-get install -y maven</code>\nAfter these steps Autobuild step and code scan was successful.</p>\n"}],"owner":{"account_id":13524734,"reputation":66,"user_id":9756856,"display_name":"D&#225;niel Kőcs"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":655,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693310922,"creation_date":1692775923,"question_id":76959231,"body_markdown":"I&#39;m trying to scan java code with codeql.\r\nIn my repo I have some class files:\r\n\r\n```\r\nsrc/com/org/proj/Main.java\r\nsrc/com/org/proj/Task.java\r\n```\r\nIt&#39;s very simple and was built by Eclipse and I only exported the executable *.jar file from it before.\r\n\r\nNow as I&#39;m trying to scan this by codeql, it was trying to autobuild it without success. After investigating it online I understood that only specific type of projects can work with autobuild hence I went back to Eclipes and converted my project to maven.\r\nNow autobuild.sh (the one used by autobuild) is trying to execute a &#39;mvn&#39; command which I would assume should work and code scan should be successful, but it seems that &#39;mvn&#39; is not found on the system (I thought this is included during the initialization step or somewhere else).\r\nI tried to find a solution how to install maven before executing the autobuild step, but didn&#39;t find solution.\r\nThe error looks like this:\r\n\r\n```\r\n  /opt/hostedtoolcache/CodeQL/2.12.6-20230403/x64/codeql/codeql version --format=terse\r\n  2.12.6\r\n  /opt/hostedtoolcache/CodeQL/2.12.6-20230403/x64/codeql/java/tools/autobuild.sh\r\n  Picked up JAVA_TOOL_OPTIONS:  -Dhttp.keepAlive=false -Dmaven.wagon.http.pool=false\r\n  [2023-08-23 07:27:32] Build directory is .\r\n  [2023-08-23 07:27:32] [autobuild] &gt; mvn clean package -f &quot;pom.xml&quot; -B -V -e -Dfindbugs.skip -Dcheckstyle.skip -Dpmd.skip=true -Dspotbugs.skip -Denforcer.skip -Dmaven.javadoc.skip -DskipTests -Dmaven.test.skip.exec -Dlicense.skip=true -Drat.skip=true -Dspotless.check.skip=true \r\n  Error: 8-23 07:27:32] [autobuild] [ERROR] Error executing command mvn clean package -f &quot;pom.xml&quot; -B -V -e -Dfindbugs.skip -Dcheckstyle.skip -Dpmd.skip=true -Dspotbugs.skip -Denforcer.skip -Dmaven.javadoc.skip -DskipTests -Dmaven.test.skip.exec -Dlicense.skip=true -Drat.skip=true -Dspotless.check.skip=true \r\n                                            com.semmle.util.exception.ResourceError: IOException while executing process with args: [mvn, clean, package, -f, pom.xml, -B, -V, -e, -Dfindbugs.skip, -Dcheckstyle.skip, -Dpmd.skip=true, -Dspotbugs.skip, -Denforcer.skip, -Dmaven.javadoc.skip, -DskipTests, -Dmaven.test.skip.exec, -Dlicense.skip=true, -Drat.skip=true, -Dspotless.check.skip=true]\r\n                                            (eventual cause: IOException &quot;error=2, No such file or directory&quot;)\r\n                                            \tat com.semmle.util.process.AbstractProcessBuilder.execute(AbstractProcessBuilder.java:258)\r\n                                            \tat com.semmle.util.process.AbstractProcessBuilder.execute(AbstractProcessBuilder.java:198)\r\n                                            \tat com.semmle.util.data.CommandLine.run(CommandLine.java:274)\r\n                                            \tat com.semmle.autobuild.AutoBuild.deduceAndRunBuildCommands(AutoBuild.java:189)\r\n                                            \tat com.semmle.autobuild.AutoBuild.runApi(AutoBuild.java:147)\r\n                                            \tat com.semmle.util.process.CliCommand.run(CliCommand.java:62)\r\n                                            \tat com.semmle.util.process.CliCommand.safeRun(CliCommand.java:79)\r\n                                            \tat com.semmle.util.process.VerbCliTool.runImpl(VerbCliTool.java:169)\r\n                                            \tat com.semmle.util.process.VerbCliTool.run(VerbCliTool.java:68)\r\n                                            \tat com.semmle.autobuild.Main.mainApi(Main.java:80)\r\n                                            \tat com.semmle.autobuild.Main.main(Main.java:59)\r\n                                            Caused by: java.io.IOException: Cannot run program &quot;mvn&quot; (in directory &quot;.&quot;): error=2, No such file or directory\r\n                                            \tat java.base/java.lang.ProcessBuilder.start(Unknown Source)\r\n                                            \tat java.base/java.lang.ProcessBuilder.start(Unknown Source)\r\n                                            \tat com.semmle.util.process.AbstractProcessBuilder.execute(AbstractProcessBuilder.java:231)\r\n                                            \t... 10 common frames omitted\r\n                                            Caused by: java.io.IOException: error=2, No such file or directory\r\n                                            \tat java.base/java.lang.ProcessImpl.forkAndExec(Native Method)\r\n                                            \tat java.base/java.lang.ProcessImpl.&lt;init&gt;(Unknown Source)\r\n                                            \tat java.base/java.lang.ProcessImpl.start(Unknown Source)\r\n                                            \t... 13 common frames omitted\r\n  Error: We were unable to automatically build your code. Please replace the call to the autobuild action with your custom build steps. Failure invoking /opt/hostedtoolcache/CodeQL/2.12.6-20230403/x64/codeql/java/tools/autobuild.sh with arguments .\r\n  \r\n        Exit code 254 and error was:\r\n  \r\n        Picked up JAVA_TOOL_OPTIONS:  -Dhttp.keepAlive=false -Dmaven.wagon.http.pool=false\r\n  \r\n```\r\n\r\nand my codeql.yml file looks like this (right now):\r\n\r\n```\r\n# For most projects, this workflow file will not need changing; you simply need\r\n# to commit it to your repository.\r\n#\r\n# You may wish to alter this file to override the set of languages analyzed,\r\n# or to provide custom queries or build logic.\r\n#\r\n# ******** NOTE ********\r\n# We have attempted to detect the languages in your repository. Please check\r\n# the `language` matrix defined below to confirm you have the correct set of\r\n# supported CodeQL languages.\r\n#\r\nname: &quot;CodeQL&quot;\r\n\r\non:\r\n  push:\r\n    branches: [ &quot;master&quot; ]\r\n  pull_request:\r\n    # The branches below must be a subset of the branches above\r\n    branches: [ &quot;master&quot; ]\r\n\r\njobs:\r\n  analyze:\r\n    name: Analyze\r\n    runs-on: [ubuntu-latest]\r\n    permissions:\r\n      actions: read\r\n      contents: read\r\n      security-events: write\r\n\r\n    strategy:\r\n      fail-fast: false\r\n      matrix:\r\n        language: [ &#39;java&#39; ]\r\n        # CodeQL supports [ &#39;cpp&#39;, &#39;csharp&#39;, &#39;go&#39;, &#39;java&#39;, &#39;javascript&#39;, &#39;python&#39;, &#39;ruby&#39; ]\r\n        # Use only &#39;java&#39; to analyze code written in Java, Kotlin or both\r\n        # Use only &#39;javascript&#39; to analyze code written in JavaScript, TypeScript or both\r\n        # Learn more about CodeQL language support at https://aka.ms/codeql-docs/language-support\r\n\r\n    steps:\r\n    - name: Checkout repository\r\n      uses: actions/checkout@v3\r\n\r\n    # Initializes the CodeQL tools for scanning.\r\n    - name: Initialize CodeQL\r\n      uses: github/codeql-action/init@v2\r\n      with:\r\n        languages: ${{ matrix.language }}\r\n        # If you wish to specify custom queries, you can do so here or in a config file.\r\n        # By default, queries listed here will override any specified in a config file.\r\n        # Prefix the list here with &quot;+&quot; to use these queries and those in the config file.\r\n\r\n        # Details on CodeQL&#39;s query packs refer to : https://docs.github.com/en/code-security/code-scanning/automatically-scanning-your-code-for-vulnerabilities-and-errors/configuring-code-scanning#using-queries-in-ql-packs\r\n        # queries: security-extended,security-and-quality\r\n\r\n\r\n    # Autobuild attempts to build any compiled languages  (C/C++, C#, Go, or Java).\r\n    # If this step fails, then you should remove it and run the build manually (see below)\r\n    - name: Autobuild\r\n      uses: github/codeql-action/autobuild@v2\r\n\r\n    # ℹ️ Command-line programs to run using the OS shell.\r\n    # &#128218; See https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstepsrun\r\n\r\n    #   If the Autobuild fails above, remove it and uncomment the following three lines.\r\n    #   modify them (or add more) to build your code if your project, please refer to the EXAMPLE below for guidance.\r\n\r\n    #- run: |\r\n    #   echo &quot;Skipping build, it is not needed...&quot;\r\n    #   ls -lR .\r\n    #   sudo apt install maven\r\n    #   mvn clean install\r\n\r\n    - name: Perform CodeQL Analysis\r\n      uses: github/codeql-action/analyze@v2\r\n      with:\r\n        category: &quot;/language:${{matrix.language}}&quot;\r\n\r\n```\r\n\r\n\r\nI tried to skip the autobuild, but in that case the analyse step is just failing with the following error:\r\n\r\n```\r\n  /opt/hostedtoolcache/CodeQL/2.12.6-20230403/x64/codeql/codeql database finalize --finalize-dataset --threads=8 --ram=14984 /runner/_work/_temp/codeql_databases/java\r\n  CodeQL detected code written in Java but could not process any of it. Review our troubleshooting guide at https://docs.github.com/en/code-security/code-scanning/automatically-scanning-your-code-for-vulnerabilities-and-errors/troubleshooting-the-codeql-workflow#no-code-found-during-the-build.\r\n  Error: No code found during the build. Please see:\r\n  https://docs.github.com/en/github/finding-security-vulnerabilities-and-errors-in-your-code/troubleshooting-code-scanning#no-code-found-during-the-build\r\n```\r\nI tried to build it manually, but I was not able to install maven (I guess executing install commands won&#39;t work this way)","title":"Codeql failing to scan github repository storing only java code","body":"<p>I'm trying to scan java code with codeql.\nIn my repo I have some class files:</p>\n<pre><code>src/com/org/proj/Main.java\nsrc/com/org/proj/Task.java\n</code></pre>\n<p>It's very simple and was built by Eclipse and I only exported the executable *.jar file from it before.</p>\n<p>Now as I'm trying to scan this by codeql, it was trying to autobuild it without success. After investigating it online I understood that only specific type of projects can work with autobuild hence I went back to Eclipes and converted my project to maven.\nNow autobuild.sh (the one used by autobuild) is trying to execute a 'mvn' command which I would assume should work and code scan should be successful, but it seems that 'mvn' is not found on the system (I thought this is included during the initialization step or somewhere else).\nI tried to find a solution how to install maven before executing the autobuild step, but didn't find solution.\nThe error looks like this:</p>\n<pre><code>  /opt/hostedtoolcache/CodeQL/2.12.6-20230403/x64/codeql/codeql version --format=terse\n  2.12.6\n  /opt/hostedtoolcache/CodeQL/2.12.6-20230403/x64/codeql/java/tools/autobuild.sh\n  Picked up JAVA_TOOL_OPTIONS:  -Dhttp.keepAlive=false -Dmaven.wagon.http.pool=false\n  [2023-08-23 07:27:32] Build directory is .\n  [2023-08-23 07:27:32] [autobuild] &gt; mvn clean package -f &quot;pom.xml&quot; -B -V -e -Dfindbugs.skip -Dcheckstyle.skip -Dpmd.skip=true -Dspotbugs.skip -Denforcer.skip -Dmaven.javadoc.skip -DskipTests -Dmaven.test.skip.exec -Dlicense.skip=true -Drat.skip=true -Dspotless.check.skip=true \n  Error: 8-23 07:27:32] [autobuild] [ERROR] Error executing command mvn clean package -f &quot;pom.xml&quot; -B -V -e -Dfindbugs.skip -Dcheckstyle.skip -Dpmd.skip=true -Dspotbugs.skip -Denforcer.skip -Dmaven.javadoc.skip -DskipTests -Dmaven.test.skip.exec -Dlicense.skip=true -Drat.skip=true -Dspotless.check.skip=true \n                                            com.semmle.util.exception.ResourceError: IOException while executing process with args: [mvn, clean, package, -f, pom.xml, -B, -V, -e, -Dfindbugs.skip, -Dcheckstyle.skip, -Dpmd.skip=true, -Dspotbugs.skip, -Denforcer.skip, -Dmaven.javadoc.skip, -DskipTests, -Dmaven.test.skip.exec, -Dlicense.skip=true, -Drat.skip=true, -Dspotless.check.skip=true]\n                                            (eventual cause: IOException &quot;error=2, No such file or directory&quot;)\n                                                at com.semmle.util.process.AbstractProcessBuilder.execute(AbstractProcessBuilder.java:258)\n                                                at com.semmle.util.process.AbstractProcessBuilder.execute(AbstractProcessBuilder.java:198)\n                                                at com.semmle.util.data.CommandLine.run(CommandLine.java:274)\n                                                at com.semmle.autobuild.AutoBuild.deduceAndRunBuildCommands(AutoBuild.java:189)\n                                                at com.semmle.autobuild.AutoBuild.runApi(AutoBuild.java:147)\n                                                at com.semmle.util.process.CliCommand.run(CliCommand.java:62)\n                                                at com.semmle.util.process.CliCommand.safeRun(CliCommand.java:79)\n                                                at com.semmle.util.process.VerbCliTool.runImpl(VerbCliTool.java:169)\n                                                at com.semmle.util.process.VerbCliTool.run(VerbCliTool.java:68)\n                                                at com.semmle.autobuild.Main.mainApi(Main.java:80)\n                                                at com.semmle.autobuild.Main.main(Main.java:59)\n                                            Caused by: java.io.IOException: Cannot run program &quot;mvn&quot; (in directory &quot;.&quot;): error=2, No such file or directory\n                                                at java.base/java.lang.ProcessBuilder.start(Unknown Source)\n                                                at java.base/java.lang.ProcessBuilder.start(Unknown Source)\n                                                at com.semmle.util.process.AbstractProcessBuilder.execute(AbstractProcessBuilder.java:231)\n                                                ... 10 common frames omitted\n                                            Caused by: java.io.IOException: error=2, No such file or directory\n                                                at java.base/java.lang.ProcessImpl.forkAndExec(Native Method)\n                                                at java.base/java.lang.ProcessImpl.&lt;init&gt;(Unknown Source)\n                                                at java.base/java.lang.ProcessImpl.start(Unknown Source)\n                                                ... 13 common frames omitted\n  Error: We were unable to automatically build your code. Please replace the call to the autobuild action with your custom build steps. Failure invoking /opt/hostedtoolcache/CodeQL/2.12.6-20230403/x64/codeql/java/tools/autobuild.sh with arguments .\n  \n        Exit code 254 and error was:\n  \n        Picked up JAVA_TOOL_OPTIONS:  -Dhttp.keepAlive=false -Dmaven.wagon.http.pool=false\n  \n</code></pre>\n<p>and my codeql.yml file looks like this (right now):</p>\n<pre><code># For most projects, this workflow file will not need changing; you simply need\n# to commit it to your repository.\n#\n# You may wish to alter this file to override the set of languages analyzed,\n# or to provide custom queries or build logic.\n#\n# ******** NOTE ********\n# We have attempted to detect the languages in your repository. Please check\n# the `language` matrix defined below to confirm you have the correct set of\n# supported CodeQL languages.\n#\nname: &quot;CodeQL&quot;\n\non:\n  push:\n    branches: [ &quot;master&quot; ]\n  pull_request:\n    # The branches below must be a subset of the branches above\n    branches: [ &quot;master&quot; ]\n\njobs:\n  analyze:\n    name: Analyze\n    runs-on: [ubuntu-latest]\n    permissions:\n      actions: read\n      contents: read\n      security-events: write\n\n    strategy:\n      fail-fast: false\n      matrix:\n        language: [ 'java' ]\n        # CodeQL supports [ 'cpp', 'csharp', 'go', 'java', 'javascript', 'python', 'ruby' ]\n        # Use only 'java' to analyze code written in Java, Kotlin or both\n        # Use only 'javascript' to analyze code written in JavaScript, TypeScript or both\n        # Learn more about CodeQL language support at https://aka.ms/codeql-docs/language-support\n\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v3\n\n    # Initializes the CodeQL tools for scanning.\n    - name: Initialize CodeQL\n      uses: github/codeql-action/init@v2\n      with:\n        languages: ${{ matrix.language }}\n        # If you wish to specify custom queries, you can do so here or in a config file.\n        # By default, queries listed here will override any specified in a config file.\n        # Prefix the list here with &quot;+&quot; to use these queries and those in the config file.\n\n        # Details on CodeQL's query packs refer to : https://docs.github.com/en/code-security/code-scanning/automatically-scanning-your-code-for-vulnerabilities-and-errors/configuring-code-scanning#using-queries-in-ql-packs\n        # queries: security-extended,security-and-quality\n\n\n    # Autobuild attempts to build any compiled languages  (C/C++, C#, Go, or Java).\n    # If this step fails, then you should remove it and run the build manually (see below)\n    - name: Autobuild\n      uses: github/codeql-action/autobuild@v2\n\n    # ℹ️ Command-line programs to run using the OS shell.\n    # 📚 See https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstepsrun\n\n    #   If the Autobuild fails above, remove it and uncomment the following three lines.\n    #   modify them (or add more) to build your code if your project, please refer to the EXAMPLE below for guidance.\n\n    #- run: |\n    #   echo &quot;Skipping build, it is not needed...&quot;\n    #   ls -lR .\n    #   sudo apt install maven\n    #   mvn clean install\n\n    - name: Perform CodeQL Analysis\n      uses: github/codeql-action/analyze@v2\n      with:\n        category: &quot;/language:${{matrix.language}}&quot;\n\n</code></pre>\n<p>I tried to skip the autobuild, but in that case the analyse step is just failing with the following error:</p>\n<pre><code>  /opt/hostedtoolcache/CodeQL/2.12.6-20230403/x64/codeql/codeql database finalize --finalize-dataset --threads=8 --ram=14984 /runner/_work/_temp/codeql_databases/java\n  CodeQL detected code written in Java but could not process any of it. Review our troubleshooting guide at https://docs.github.com/en/code-security/code-scanning/automatically-scanning-your-code-for-vulnerabilities-and-errors/troubleshooting-the-codeql-workflow#no-code-found-during-the-build.\n  Error: No code found during the build. Please see:\n  https://docs.github.com/en/github/finding-security-vulnerabilities-and-errors-in-your-code/troubleshooting-code-scanning#no-code-found-during-the-build\n</code></pre>\n<p>I tried to build it manually, but I was not able to install maven (I guess executing install commands won't work this way)</p>\n"},{"tags":["java","spring","certificate","x509"],"comments":[{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1674908099,"post_id":39471044,"comment_id":132816645,"body_markdown":"Does this answer your question? [How to get the certificate into the X509 filter (Spring Security)?](https://stackoverflow.com/questions/1102721/how-to-get-the-certificate-into-the-x509-filter-spring-security)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/1102721/how-to-get-the-certificate-into-the-x509-filter-spring-security\">How to get the certificate into the X509 filter (Spring Security)?</a>"}],"answers":[{"tags":[],"owner":{"account_id":3441831,"reputation":346,"user_id":2883604,"accept_rate":50,"display_name":"djointster"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1473835885,"creation_date":1473772791,"answer_id":39471169,"question_id":39471044,"body_markdown":"You have to get it from the `HttpServletRequest`.\n\nYou can check the answer to this question: [How to get the certificate into the X509 filter (Spring Security)?][1]:\n\n\n&gt; No you can&#39;t get it that way.  You need to grab it from the HttpServletRequest:\n&gt;\n&gt;     X509Certificate[] certs = (X509Certificate[])HttpServletRequest.getAttribute(&quot;javax.servlet.request.X509Certificate&quot;);\n\nThis was the post I was trying to point you to, written by Gandalf.\n\nAnd this was the original &lt;a href=&quot;https://stackoverflow.com/questions/1102721/how-to-get-the-certificate-into-the-x509-filter-spring-security/1104385&quot;&gt;question&lt;/a&gt;\n\n\n  [1]: https://stackoverflow.com/questions/1102721/how-to-get-the-certificate-into-the-x509-filter-spring-security/1104385#1104385","title":"Spring Boot - Reading x509 client certificate from HTTP request","body":"<p>You have to get it from the <code>HttpServletRequest</code>.</p>\n<p>You can check the answer to this question: <a href=\"https://stackoverflow.com/questions/1102721/how-to-get-the-certificate-into-the-x509-filter-spring-security/1104385#1104385\">How to get the certificate into the X509 filter (Spring Security)?</a>:</p>\n<blockquote>\n<p>No you can't get it that way.  You need to grab it from the HttpServletRequest:</p>\n<pre><code>X509Certificate[] certs = (X509Certificate[])HttpServletRequest.getAttribute(&quot;javax.servlet.request.X509Certificate&quot;);\n</code></pre>\n</blockquote>\n<p>This was the post I was trying to point you to, written by Gandalf.</p>\n<p>And this was the original <a href=\"https://stackoverflow.com/questions/1102721/how-to-get-the-certificate-into-the-x509-filter-spring-security/1104385\">question</a></p>\n"},{"tags":[],"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693310326,"creation_date":1693310326,"answer_id":77000005,"question_id":39471044,"body_markdown":"When you upgrade to Spring Boot 3.x the servlet request attribute has been renamed to be consistent with the renamed `javax` to `jakarta` packages. So now it&#39;s:\r\n```java\r\nrequest.getAttribute(&quot;jakarta.servlet.request.X509Certificate&quot;)\r\n```","title":"Spring Boot - Reading x509 client certificate from HTTP request","body":"<p>When you upgrade to Spring Boot 3.x the servlet request attribute has been renamed to be consistent with the renamed <code>javax</code> to <code>jakarta</code> packages. So now it's:</p>\n<pre class=\"lang-java prettyprint-override\"><code>request.getAttribute(&quot;jakarta.servlet.request.X509Certificate&quot;)\n</code></pre>\n"}],"owner":{"account_id":9162309,"reputation":141,"user_id":6813253,"accept_rate":56,"display_name":"MissBonbon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14401,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":39471169,"answer_count":2,"score":5,"last_activity_date":1693310326,"creation_date":1473772418,"question_id":39471044,"body_markdown":"How to receive a x509 certificate from client? I&#39;m using Java&#39;s Spring-Boot-Framework with embedded tomcat. For protyping I configured this with Java SE: \n\n&gt; HttpsExchange httpsExchange = (HttpsExchange) httpReq;\n&gt;\n&gt; name = httpsExchange.getSSLSession().getPeerPrincipal().getName();\n\nA user gave me a reference to do this here (down below)\n\n    \n    @RequestMapping(value = &quot;/grab&quot;)\n    public void grabCert(HttpServletRequest servletRequest) {\n        Certificate[] certs = \n                (Certificate[]) servletRequest.getAttribute(&quot;javax.servlet.request.X509Certificate&quot;);\n    }\n\nBut I&#39;m not able to get some certificate! Maybe because I&#39;m using tomcat, and it is handling all SSL-Connections. So that no certificate is receiving my application. What I have to do, to get the clients certificate? The client certificate is used to get https connection. I need some information from the subject of the certificate. Thanks.\n\n","title":"Spring Boot - Reading x509 client certificate from HTTP request","body":"<p>How to receive a x509 certificate from client? I'm using Java's Spring-Boot-Framework with embedded tomcat. For protyping I configured this with Java SE:</p>\n<blockquote>\n<p>HttpsExchange httpsExchange = (HttpsExchange) httpReq;</p>\n<p>name = httpsExchange.getSSLSession().getPeerPrincipal().getName();</p>\n</blockquote>\n<p>A user gave me a reference to do this here (down below)</p>\n<pre><code>@RequestMapping(value = &quot;/grab&quot;)\npublic void grabCert(HttpServletRequest servletRequest) {\n    Certificate[] certs = \n            (Certificate[]) servletRequest.getAttribute(&quot;javax.servlet.request.X509Certificate&quot;);\n}\n</code></pre>\n<p>But I'm not able to get some certificate! Maybe because I'm using tomcat, and it is handling all SSL-Connections. So that no certificate is receiving my application. What I have to do, to get the clients certificate? The client certificate is used to get https connection. I need some information from the subject of the certificate. Thanks.</p>\n"},{"tags":["java","tomcat","apache-axis","apache-httpclient-4.x","apache-commons-httpclient"],"answers":[{"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1693396241,"post_id":76999972,"comment_id":135754620,"body_markdown":"Please put the corrected code in the answer.","body":"Please put the corrected code in the answer."}],"tags":[],"owner":{"account_id":29220110,"reputation":1,"user_id":22386001,"display_name":"Harsha Vardhan Sai T"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693310079,"creation_date":1693310079,"answer_id":76999972,"question_id":76918353,"body_markdown":"It works by modifying the code while method execution. You can pass a context variable that can help you authenticate when the method executes.","title":"java.net.SocketException: Connection reset by peer (Write failed) after migrating to Http Client 4.x from 4.x","body":"<p>It works by modifying the code while method execution. You can pass a context variable that can help you authenticate when the method executes.</p>\n"}],"owner":{"account_id":29220110,"reputation":1,"user_id":22386001,"display_name":"Harsha Vardhan Sai T"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76999972,"answer_count":1,"score":0,"last_activity_date":1693310079,"creation_date":1692243817,"question_id":76918353,"body_markdown":"Recently I migrated from Apache Commons Http Client 3.x to the new Apache 4.x http client. Everything was replaced like Multithreaded Http Client Connection Manager to PoolingHttpClientManager. Everything works except for uploading large files. It enters a put method that takes path and Input stream and it fails when I try to upload a large file. This is the behavior only when I put my program on cloud it works fine If I create it as exe file and install it &amp; also in eclipse environment it works fine. I am using the webdav functionality of tomcat and in cloud webdav server is placed behind proxy. \r\nThe following is the code of putMethod used for uploading files\r\n\r\n```\r\n    HttpPut method = null;\r\n    try\r\n    {\r\n      method = new HttpPut(this.encodePath(path));\r\n      setProxy(method);\r\n    }\r\n    catch (MalformedURLException | URISyntaxException ex)\r\n    {\r\n      throw new HttpURIException();\r\n    }\r\n\r\n    String contentType = getGetContentType();\r\n    if ((contentType != null) &amp;&amp; (contentType.length() &gt; 0))\r\n    {\r\n      method.setHeader(&quot;Content-Type&quot;, contentType);\r\n    }\r\n    InputStreamEntity ise = new InputStreamEntity(inputStream);\r\n    ise.setChunked(true);\r\n    ise.setContentType(contentType);\r\n    BufferedHttpEntity bhe = new BufferedHttpEntity(ise);\r\n    method.setEntity(bhe);\r\n    try\r\n    {\r\n      HttpResponse response = this.client.execute(method);\r\n      return (response.getStatusLine().getStatusCode() &gt;= 200) &amp;&amp; (response.getStatusLine().getStatusCode() &lt; 300);\r\n    }\r\n    finally\r\n    {\r\n      method.releaseConnection();\r\n    }\r\n  }\r\n\r\n```\r\n\r\nThe following is the stack trace of the error\r\n\r\n```\r\nERROR - FileUploadHandler     - IO Error while file upload. java.net.SocketException: Connection reset by peer (Write failed) at java.net.SocketOutputStream.socketWrite0(Native Method) ~[?:?] at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:110) ~[?:?] at java.net.SocketOutputStream.write(SocketOutputStream.java:150) ~[?:?] at org.apache.http.impl.io.SessionOutputBufferImpl.streamWrite(SessionOutputBufferImpl.java:124) ~[httpcore-4.4.13.jar:4.4.13] at org.apache.http.impl.io.SessionOutputBufferImpl.write(SessionOutputBufferImpl.java:160) ~[httpcore-4.4.13.jar:4.4.13] at org.apache.http.impl.io.ContentLengthOutputStream.write(ContentLengthOutputStream.java:113) ~[httpcore-4.4.13.jar:4.4.13] at org.apache.http.impl.io.ContentLengthOutputStream.write(ContentLengthOutputStream.java:120) ~[httpcore-4.4.13.jar:4.4.13] at org.apache.http.entity.BufferedHttpEntity.writeTo(BufferedHttpEntity.java:105) ~[httpcore-4.4.13.jar:4.4.13] at org.apache.http.impl.DefaultBHttpClientConnection.sendRequestEntity(DefaultBHttpClientConnection.java:156) ~[httpcore-4.4.13.jar:4.4.13] at org.apache.http.protocol.HttpRequestExecutor.doSendRequest(HttpRequestExecutor.java:238) ~[httpcore-4.4.13.jar:4.4.13] at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:123) ~[httpcore-4.4.13.jar:4.4.13] at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272) ~[httpclient-4.5.13.jar:4.5.13] at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) ~[httpclient-4.5.13.jar:4.5.13] at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.13.jar:4.5.13] at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110) ~[httpclient-4.5.13.jar:4.5.13] at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.13.jar:4.5.13] at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) ~[httpclient-4.5.13.jar:4.5.13] at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108) ~[httpclient-4.5.13.jar:4.5.13] at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.13.jar:4.5.13]\r\n```\r\n\r\nIn the latest client I am using the following way to create a new client\r\n\r\n\r\n```\r\n    PoolingHttpClientConnectionManager conManager = new PoolingHttpClientConnectionManager();\r\n    connectionManager.setMaxTotal(40);\r\n    connectionManager.setDefaultMaxPerRoute(20);\r\n    RequestConfig defaultRequestConfig = RequestConfig.custom().setConnectTimeout(CONNECTION_TIMEOUT).build();\r\n\r\n    SocketConfig socketConfig = SocketConfig.custom().setSoTimeout(SO_TIMEOUT).build();\r\n\r\n    HttpRequestRetryHandler retryHandler = new DefaultHttpRequestRetryHandler(HTTPMETHOD_RETRY_COUNT, false);\r\n\r\n    HttpClientBuilder clientBuilder = HttpClients.custom().useSystemProperties().setConnectionManager(conManager).setDefaultRequestConfig(defaultRequestConfig).setDefaultSocketConfig(socketConfig).setRetryHandler(retryHandler);\r\n\r\n      credentials = new UsernamePasswordCredentials(userName, password);\r\n      CredentialsProvider credentialsProvider = new BasicCredentialsProvider();\r\n\r\n      credentialsProvider.setCredentials(getAuthScope(aHttpUrl), credentials);\r\n\r\n      clientBuilder.setDefaultCredentialsProvider(credentialsProvider);\r\n    boolean shouldUseProxy = isProxy(aConfig);\r\n\r\n    String proxyHost = System.getProperty(PROPERTY_PROXY_HOST);\r\n    if (shouldUseProxy)\r\n    {\r\n      String proxyPort = System.getProperty(PROPERTY_PROXY_PORT, &quot;80&quot;);\r\n      HttpHost proxyHosts = new HttpHost(proxyHost, Integer.parseInt(proxyPort));\r\n      RequestConfig config = RequestConfig.copy(defaultRequestConfig).setProxy(proxyHosts).build();\r\n      clientBuilder.setDefaultRequestConfig(config);\r\n    }\r\n```\r\nIs there something I should add or modify?\r\nor should I change some timeout settings for the proxy server?\r\nVia code I set the timeouts to 5000 and retry count to 3.\r\n\r\nWith the same configurations it worked with old http client.\r\n\r\nI tried various ways of modifying the input stream and tried to implement custom input stream too.","title":"java.net.SocketException: Connection reset by peer (Write failed) after migrating to Http Client 4.x from 4.x","body":"<p>Recently I migrated from Apache Commons Http Client 3.x to the new Apache 4.x http client. Everything was replaced like Multithreaded Http Client Connection Manager to PoolingHttpClientManager. Everything works except for uploading large files. It enters a put method that takes path and Input stream and it fails when I try to upload a large file. This is the behavior only when I put my program on cloud it works fine If I create it as exe file and install it &amp; also in eclipse environment it works fine. I am using the webdav functionality of tomcat and in cloud webdav server is placed behind proxy.\nThe following is the code of putMethod used for uploading files</p>\n<pre><code>    HttpPut method = null;\n    try\n    {\n      method = new HttpPut(this.encodePath(path));\n      setProxy(method);\n    }\n    catch (MalformedURLException | URISyntaxException ex)\n    {\n      throw new HttpURIException();\n    }\n\n    String contentType = getGetContentType();\n    if ((contentType != null) &amp;&amp; (contentType.length() &gt; 0))\n    {\n      method.setHeader(&quot;Content-Type&quot;, contentType);\n    }\n    InputStreamEntity ise = new InputStreamEntity(inputStream);\n    ise.setChunked(true);\n    ise.setContentType(contentType);\n    BufferedHttpEntity bhe = new BufferedHttpEntity(ise);\n    method.setEntity(bhe);\n    try\n    {\n      HttpResponse response = this.client.execute(method);\n      return (response.getStatusLine().getStatusCode() &gt;= 200) &amp;&amp; (response.getStatusLine().getStatusCode() &lt; 300);\n    }\n    finally\n    {\n      method.releaseConnection();\n    }\n  }\n\n</code></pre>\n<p>The following is the stack trace of the error</p>\n<pre><code>ERROR - FileUploadHandler     - IO Error while file upload. java.net.SocketException: Connection reset by peer (Write failed) at java.net.SocketOutputStream.socketWrite0(Native Method) ~[?:?] at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:110) ~[?:?] at java.net.SocketOutputStream.write(SocketOutputStream.java:150) ~[?:?] at org.apache.http.impl.io.SessionOutputBufferImpl.streamWrite(SessionOutputBufferImpl.java:124) ~[httpcore-4.4.13.jar:4.4.13] at org.apache.http.impl.io.SessionOutputBufferImpl.write(SessionOutputBufferImpl.java:160) ~[httpcore-4.4.13.jar:4.4.13] at org.apache.http.impl.io.ContentLengthOutputStream.write(ContentLengthOutputStream.java:113) ~[httpcore-4.4.13.jar:4.4.13] at org.apache.http.impl.io.ContentLengthOutputStream.write(ContentLengthOutputStream.java:120) ~[httpcore-4.4.13.jar:4.4.13] at org.apache.http.entity.BufferedHttpEntity.writeTo(BufferedHttpEntity.java:105) ~[httpcore-4.4.13.jar:4.4.13] at org.apache.http.impl.DefaultBHttpClientConnection.sendRequestEntity(DefaultBHttpClientConnection.java:156) ~[httpcore-4.4.13.jar:4.4.13] at org.apache.http.protocol.HttpRequestExecutor.doSendRequest(HttpRequestExecutor.java:238) ~[httpcore-4.4.13.jar:4.4.13] at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:123) ~[httpcore-4.4.13.jar:4.4.13] at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272) ~[httpclient-4.5.13.jar:4.5.13] at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) ~[httpclient-4.5.13.jar:4.5.13] at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.13.jar:4.5.13] at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110) ~[httpclient-4.5.13.jar:4.5.13] at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.13.jar:4.5.13] at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) ~[httpclient-4.5.13.jar:4.5.13] at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108) ~[httpclient-4.5.13.jar:4.5.13] at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.13.jar:4.5.13]\n</code></pre>\n<p>In the latest client I am using the following way to create a new client</p>\n<pre><code>    PoolingHttpClientConnectionManager conManager = new PoolingHttpClientConnectionManager();\n    connectionManager.setMaxTotal(40);\n    connectionManager.setDefaultMaxPerRoute(20);\n    RequestConfig defaultRequestConfig = RequestConfig.custom().setConnectTimeout(CONNECTION_TIMEOUT).build();\n\n    SocketConfig socketConfig = SocketConfig.custom().setSoTimeout(SO_TIMEOUT).build();\n\n    HttpRequestRetryHandler retryHandler = new DefaultHttpRequestRetryHandler(HTTPMETHOD_RETRY_COUNT, false);\n\n    HttpClientBuilder clientBuilder = HttpClients.custom().useSystemProperties().setConnectionManager(conManager).setDefaultRequestConfig(defaultRequestConfig).setDefaultSocketConfig(socketConfig).setRetryHandler(retryHandler);\n\n      credentials = new UsernamePasswordCredentials(userName, password);\n      CredentialsProvider credentialsProvider = new BasicCredentialsProvider();\n\n      credentialsProvider.setCredentials(getAuthScope(aHttpUrl), credentials);\n\n      clientBuilder.setDefaultCredentialsProvider(credentialsProvider);\n    boolean shouldUseProxy = isProxy(aConfig);\n\n    String proxyHost = System.getProperty(PROPERTY_PROXY_HOST);\n    if (shouldUseProxy)\n    {\n      String proxyPort = System.getProperty(PROPERTY_PROXY_PORT, &quot;80&quot;);\n      HttpHost proxyHosts = new HttpHost(proxyHost, Integer.parseInt(proxyPort));\n      RequestConfig config = RequestConfig.copy(defaultRequestConfig).setProxy(proxyHosts).build();\n      clientBuilder.setDefaultRequestConfig(config);\n    }\n</code></pre>\n<p>Is there something I should add or modify?\nor should I change some timeout settings for the proxy server?\nVia code I set the timeouts to 5000 and retry count to 3.</p>\n<p>With the same configurations it worked with old http client.</p>\n<p>I tried various ways of modifying the input stream and tried to implement custom input stream too.</p>\n"},{"tags":["java","spring","jwt","authorization"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693290218,"post_id":76997223,"comment_id":135737284,"body_markdown":"if you will change the authority setter method, somethig like this `authority.setAuthority(&quot;ROLE_&quot; + AuthorityType.ESSENTIAL);`  or `authority.setAuthority(&quot;SCOPE_&quot; + AuthorityType.ESSENTIAL);` , i think it is going to work.","body":"if you will change the authority setter method, somethig like this <code>authority.setAuthority(&quot;ROLE_&quot; + AuthorityType.ESSENTIAL);</code>  or <code>authority.setAuthority(&quot;SCOPE_&quot; + AuthorityType.ESSENTIAL);</code> , i think it is going to work."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1693290661,"post_id":76997223,"comment_id":135737351,"body_markdown":"What is `jwt` here? You aren&#39;t creating it anywhere. You are also creating a user, but where are you adding it to the userservice (or using mocking to return it)? Looks like you think creating some objects randomly will make it work, instead of binding it together.","body":"What is <code>jwt</code> here? You aren&#39;t creating it anywhere. You are also creating a user, but where are you adding it to the userservice (or using mocking to return it)? Looks like you think creating some objects randomly will make it work, instead of binding it together."},{"owner":{"account_id":8567660,"reputation":3,"user_id":6419675,"display_name":"Patrick Kim"},"score":0,"creation_date":1693295441,"post_id":76997223,"comment_id":135738186,"body_markdown":"@M.Deinum Sorry I forgot to add them, I&#39;ve updated the code.","body":"@M.Deinum Sorry I forgot to add them, I&#39;ve updated the code."},{"owner":{"account_id":8567660,"reputation":3,"user_id":6419675,"display_name":"Patrick Kim"},"score":0,"creation_date":1693295567,"post_id":76997223,"comment_id":135738208,"body_markdown":"@AndreiLisa I&#39;ve changed the authority type to String and changed it to set it to `&quot;SCOPE_&quot; + AuthorityType.ESSENTIAL` but it still produced the same error where the Granted Authorities inside JwtAuthenticationToken being empty","body":"@AndreiLisa I&#39;ve changed the authority type to String and changed it to set it to <code>&quot;SCOPE_&quot; + AuthorityType.ESSENTIAL</code> but it still produced the same error where the Granted Authorities inside JwtAuthenticationToken being empty"},{"owner":{"account_id":7427975,"reputation":537,"user_id":9862795,"display_name":"GoranLegenda"},"score":0,"creation_date":1693298088,"post_id":76997223,"comment_id":135738737,"body_markdown":"can you show your AuthorityType Enum as well?","body":"can you show your AuthorityType Enum as well?"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693298108,"post_id":76997223,"comment_id":135738742,"body_markdown":"can you parse your JWT token ?  and see if there are `authorities` that you wait `.hasAnyAuthority(&quot;ESSENTIAL&quot;, &quot;PREMIUM&quot;)` on [jwt](https://jwt.io/) for example","body":"can you parse your JWT token ?  and see if there are <code>authorities</code> that you wait <code>.hasAnyAuthority(&quot;ESSENTIAL&quot;, &quot;PREMIUM&quot;)</code> on <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">jwt</a> for example"},{"owner":{"account_id":8567660,"reputation":3,"user_id":6419675,"display_name":"Patrick Kim"},"score":0,"creation_date":1693298669,"post_id":76997223,"comment_id":135738853,"body_markdown":"@GoranLegenda Okay, added.","body":"@GoranLegenda Okay, added."},{"owner":{"account_id":8567660,"reputation":3,"user_id":6419675,"display_name":"Patrick Kim"},"score":0,"creation_date":1693298723,"post_id":76997223,"comment_id":135738863,"body_markdown":"@AndreiLisa Do you mean the deserialized jwt body? Here&#39;s the payload: ```{\n  &quot;sub&quot;: &quot;honggildong&quot;,\n  &quot;authorities&quot;: [{&quot;authority&quot;: &quot;SCOPE_ESSENTIAL&quot;},{&quot;authority&quot;: &quot;SCOPE_TRIAL&quot;}],\n  &quot;iat&quot;: 1693298585,\n  &quot;exp&quot;: 1693300385\n}```","body":"@AndreiLisa Do you mean the deserialized jwt body? Here&#39;s the payload: <code>{   &quot;sub&quot;: &quot;honggildong&quot;,   &quot;authorities&quot;: [{&quot;authority&quot;: &quot;SCOPE_ESSENTIAL&quot;},{&quot;authority&quot;: &quot;SCOPE_TRIAL&quot;}],   &quot;iat&quot;: 1693298585,   &quot;exp&quot;: 1693300385 }</code>"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693300179,"post_id":76997223,"comment_id":135739119,"body_markdown":"also please provide your `jwtDecoder()`  method for full understanding of your flow.","body":"also please provide your <code>jwtDecoder()</code>  method for full understanding of your flow."},{"owner":{"account_id":8567660,"reputation":3,"user_id":6419675,"display_name":"Patrick Kim"},"score":0,"creation_date":1693300531,"post_id":76997223,"comment_id":135739176,"body_markdown":"@AndreiLisa Yup added","body":"@AndreiLisa Yup added"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693300962,"post_id":76997223,"comment_id":135739252,"body_markdown":"on  method  `loadUserByUsername` change the .`map`  function to `                    .map(authority -&gt; new SimpleGrantedAuthority(&quot;ROLE_&quot; + authority.getAuthority().toString()))\n          .collect(Collectors.toList());`","body":"on  method  <code>loadUserByUsername</code> change the .<code>map</code>  function to `                    .map(authority -&gt; new SimpleGrantedAuthority(&quot;ROLE_&quot; + authority.getAuthority().toString()))           .collect(Collectors.toList());`"},{"owner":{"account_id":8567660,"reputation":3,"user_id":6419675,"display_name":"Patrick Kim"},"score":0,"creation_date":1693302152,"post_id":76997223,"comment_id":135739469,"body_markdown":"@AndreiLisa I did and it&#39;s still the same... I also tried to change the `Authority` entity&#39;s `authority` to hold `String` type but that also produced the same error.","body":"@AndreiLisa I did and it&#39;s still the same... I also tried to change the <code>Authority</code> entity&#39;s <code>authority</code> to hold <code>String</code> type but that also produced the same error."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693305567,"post_id":76997223,"comment_id":135740070,"body_markdown":"ok, i `m going to check this code implementation and after it. I will be able to give a result with an answer to this question.","body":"ok, i `m going to check this code implementation and after it. I will be able to give a result with an answer to this question."}],"answers":[{"comments":[{"owner":{"account_id":8567660,"reputation":3,"user_id":6419675,"display_name":"Patrick Kim"},"score":1,"creation_date":1693311954,"post_id":76999916,"comment_id":135741366,"body_markdown":"Omg Thank you so much this acutally worked! Thank you so much","body":"Omg Thank you so much this acutally worked! Thank you so much"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693313668,"post_id":76999916,"comment_id":135741755,"body_markdown":"you`are welcome )))","body":"you`are welcome )))"}],"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693309625,"creation_date":1693309625,"answer_id":76999916,"question_id":76997223,"body_markdown":"To make your implementation to work, you should also declare/configure an authentication converter.\r\n\r\nSomething like this:\r\n\r\n    @Component\r\n    public class JwtAuthConverter implements Converter&lt;Jwt, AbstractAuthenticationToken&gt; {\r\n    \r\n      private JwtGrantedAuthoritiesConverter jwtGrantedAuthoritiesConverter;\r\n    \r\n      public JwtAuthConverter() {\r\n        this.jwtGrantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\r\n      }\r\n    \r\n      @Override\r\n      public AbstractAuthenticationToken convert(Jwt jwt) {\r\n        Collection&lt;GrantedAuthority&gt; authorities = Stream.concat(\r\n            jwtGrantedAuthoritiesConverter.convert(jwt).stream(),\r\n            extractAuthorities(jwt).stream()).collect(Collectors.toSet());\r\n        return new JwtAuthenticationToken(jwt, authorities, getPrincipalClaimName(jwt));\r\n      }\r\n    \r\n      private String getPrincipalClaimName(Jwt jwt) {\r\n        return jwt.getClaim(JwtClaimNames.SUB);\r\n      }\r\n    \r\n      private Collection&lt;GrantedAuthority&gt; extractAuthorities(Jwt jwt) {\r\n        if (jwt.getClaim(&quot;authorities&quot;) != null) {\r\n          Map&lt;String, Object&gt; realmAccess = jwt.getClaim(&quot;authorities&quot;);\r\n          ObjectMapper mapper = new ObjectMapper();\r\n          List&lt;String&gt; roles = mapper.convertValue(realmAccess.get(&quot;authority&quot;),\r\n              new TypeReference&lt;List&lt;String&gt;&gt;() {\r\n              });\r\n          return roles.stream().map(role -&gt; new SimpleGrantedAuthority(&quot;SCOPE_&quot; + role))\r\n              .collect(Collectors.toList());\r\n        }\r\n        return new ArrayList&lt;&gt;();\r\n      }\r\n    }\r\n\r\nAnd also construct token with the `authorities` field something like this:\r\n\r\n    &quot;authorities&quot;: {\r\n        &quot;authority&quot;: [\r\n            &quot;SCOPE_ESSENTIAL&quot;\r\n              ...\r\n          ]\r\n         }\r\n\r\nAfter all of this changes in  In `SecurityConfig {...}` class add next one field \r\n\r\n     private final JwtAuthConverter jwtAuthConverter;\r\n\r\nAlso in `filterChain` you should add this convertor:\r\n\r\nreplace: \r\n\r\n    .oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; jwt.decoder(jwtDecoder())))\r\n\r\nTO\r\n\r\n    oauth2ResourceServer(oauth2 -&gt;\r\n    \r\n            oauth2.jwt(jwt -&gt; {\r\n    \r\n                jwt.decoder(jwtDecoder());\r\n                jwt.jwtAuthenticationConverter(jwtAuthConverter);\r\n            }));\r\n\r\n \r\n\r\n\r\n\r\n\r\n","title":"Spring JWT authentication with &quot;.hasAuthority()&quot; returning &quot;insufficient scope&quot; error","body":"<p>To make your implementation to work, you should also declare/configure an authentication converter.</p>\n<p>Something like this:</p>\n<pre><code>@Component\npublic class JwtAuthConverter implements Converter&lt;Jwt, AbstractAuthenticationToken&gt; {\n\n  private JwtGrantedAuthoritiesConverter jwtGrantedAuthoritiesConverter;\n\n  public JwtAuthConverter() {\n    this.jwtGrantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\n  }\n\n  @Override\n  public AbstractAuthenticationToken convert(Jwt jwt) {\n    Collection&lt;GrantedAuthority&gt; authorities = Stream.concat(\n        jwtGrantedAuthoritiesConverter.convert(jwt).stream(),\n        extractAuthorities(jwt).stream()).collect(Collectors.toSet());\n    return new JwtAuthenticationToken(jwt, authorities, getPrincipalClaimName(jwt));\n  }\n\n  private String getPrincipalClaimName(Jwt jwt) {\n    return jwt.getClaim(JwtClaimNames.SUB);\n  }\n\n  private Collection&lt;GrantedAuthority&gt; extractAuthorities(Jwt jwt) {\n    if (jwt.getClaim(&quot;authorities&quot;) != null) {\n      Map&lt;String, Object&gt; realmAccess = jwt.getClaim(&quot;authorities&quot;);\n      ObjectMapper mapper = new ObjectMapper();\n      List&lt;String&gt; roles = mapper.convertValue(realmAccess.get(&quot;authority&quot;),\n          new TypeReference&lt;List&lt;String&gt;&gt;() {\n          });\n      return roles.stream().map(role -&gt; new SimpleGrantedAuthority(&quot;SCOPE_&quot; + role))\n          .collect(Collectors.toList());\n    }\n    return new ArrayList&lt;&gt;();\n  }\n}\n</code></pre>\n<p>And also construct token with the <code>authorities</code> field something like this:</p>\n<pre><code>&quot;authorities&quot;: {\n    &quot;authority&quot;: [\n        &quot;SCOPE_ESSENTIAL&quot;\n          ...\n      ]\n     }\n</code></pre>\n<p>After all of this changes in  In <code>SecurityConfig {...}</code> class add next one field</p>\n<pre><code> private final JwtAuthConverter jwtAuthConverter;\n</code></pre>\n<p>Also in <code>filterChain</code> you should add this convertor:</p>\n<p>replace:</p>\n<pre><code>.oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; jwt.decoder(jwtDecoder())))\n</code></pre>\n<p>TO</p>\n<pre><code>oauth2ResourceServer(oauth2 -&gt;\n\n        oauth2.jwt(jwt -&gt; {\n\n            jwt.decoder(jwtDecoder());\n            jwt.jwtAuthenticationConverter(jwtAuthConverter);\n        }));\n</code></pre>\n"}],"owner":{"account_id":8567660,"reputation":3,"user_id":6419675,"display_name":"Patrick Kim"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76999916,"answer_count":1,"score":0,"last_activity_date":1693309625,"creation_date":1693281343,"question_id":76997223,"body_markdown":"I&#39;m using JWT as authentication for Spring right now. I&#39;m also using a custom `AppUser` entity with custom `Authority`. \r\n\r\nHere&#39;s the code for these entities:\r\n\r\n**AppUser entity**\r\n```java\r\n@Entity\r\n@Table(name=&quot;app_user&quot;)\r\npublic class AppUser {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name=&quot;id&quot;)\r\n    private int id;\r\n\r\n    ...\r\n\r\n    @NotNull\r\n    @ManyToMany(cascade = CascadeType.ALL)\r\n    @JoinColumn(name=&quot;authority_id&quot;, columnDefinition = &quot;INT NOT NULL&quot;)\r\n    private Set&lt;Authority&gt; authorities = new HashSet&lt;&gt;();\r\n    ...\r\n}\r\n```\r\n\r\n**Authority entity**\r\n```java\r\n@Entity\r\n@Table(name=&quot;authority&quot;)\r\npublic class Authority {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name=&quot;id&quot;)\r\n    private int id;\r\n\r\n    @NotNull\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name=&quot;authority&quot;, columnDefinition =\r\n            &quot;ENUM(&#39;TRIAL&#39;, &#39;ESSENTIAL&#39;, &#39;PREMIUM&#39;, &#39;ADMIN&#39;) NOT NULL DEFAULT &#39;TRIAL&#39;&quot;)\r\n    private AuthorityType authority = AuthorityType.TRIAL;\r\n\r\n    @JsonBackReference\r\n    @NotNull\r\n    @ManyToOne(cascade = CascadeType.ALL)\r\n    @JoinColumn(name=&quot;app_user_id&quot;, columnDefinition = &quot;INT NOT NULL&quot;)\r\n    private AppUser appUser;\r\n    ...\r\n}\r\n```\r\n\r\nAlso here&#39;s my security config and custom UserDetailsServcie:\r\n\r\n**SecurityConfig**\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n\r\n    private AuthenticationProvider authenticationProvider;\r\n    private JwtSecretProvider jwtSecretProvider;\r\n\r\n    @Autowired\r\n    public SecurityConfig(AuthenticationProvider authenticationProvider, JwtSecretProvider jwtSecretProvider) {\r\n        this.authenticationProvider = authenticationProvider;\r\n        this.jwtSecretProvider = jwtSecretProvider;\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authManager(HttpSecurity http) throws Exception {\r\n        AuthenticationManagerBuilder authenticationManagerBuilder =\r\n                http.getSharedObject(AuthenticationManagerBuilder.class);\r\n        authenticationManagerBuilder.authenticationProvider(authenticationProvider);\r\n        return authenticationManagerBuilder.build();\r\n    }\r\n\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return web -&gt; {\r\n            web.ignoring().requestMatchers(HttpMethod.POST, &quot;/user&quot;, &quot;/user/login&quot;);\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.csrf(AbstractHttpConfigurer::disable)\r\n                .formLogin(AbstractHttpConfigurer::disable)\r\n                .authorizeHttpRequests(auth -&gt; auth\r\n                        .requestMatchers(HttpMethod.POST, &quot;/user&quot;).permitAll()\r\n                        .requestMatchers(&quot;/user/login&quot;).permitAll()\r\n                        .anyRequest().hasAnyAuthority(&quot;ESSENTIAL&quot;, &quot;PREMIUM&quot;)\r\n                )\r\n                .sessionManagement(sess -&gt; sess.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; jwt.decoder(jwtDecoder())))\r\n                .httpBasic(Customizer.withDefaults());\r\n        return http.build();\r\n    }\r\n```\r\n\r\n**CustomUserDetailsService**\r\n```java\r\n@Service\r\npublic class CustomUserDetailsService implements UserDetailsService {\r\n\r\n    private AppUserRepository appUserRepository;\r\n\r\n    @Autowired\r\n    public void setAppUserRepository(AppUserRepository appUserRepository) {\r\n        this.appUserRepository = appUserRepository;\r\n    }\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        Optional&lt;AppUser&gt; optionalAppUser = appUserRepository.findByUsername(username);\r\n        if (optionalAppUser.isEmpty())\r\n            throw new UsernameNotFoundException(&quot;User not found while trying to load user&quot;);\r\n\r\n        AppUser appUser = optionalAppUser.get();\r\n\r\n        List&lt;GrantedAuthority&gt; authorities = appUser.getAuthority()\r\n                .stream()\r\n                .map(authority -&gt; new SimpleGrantedAuthority(authority.getAuthority().name()))\r\n                .collect(Collectors.toList());\r\n\r\n        return User.builder()\r\n                .username(appUser.getUsername())\r\n                .password(appUser.getEncryptedPassword().replace(&quot;{bcrypt}&quot;, &quot;&quot;))\r\n                .authorities(authorities)\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\n\r\nand this is my error response when I call the url with `MockMvc` for `/journals`:\r\n\r\n**API call**\r\n```java\r\n@Test\r\n    void checkIfCreatesJournal() throws Exception {\r\n        appUser = new AppUser();\r\n        appUser.setUsername(&quot;honggildong&quot;);\r\n        appUser.setEmail(&quot;a@a.com&quot;);\r\n        appUser.setEncryptedPassword(&quot;asdfasdfasdf123!&quot;);\r\n        Authority authority = new Authority();\r\n        authority.setAuthority(AuthorityType.ESSENTIAL);\r\n        authority.setAppUser(appUser);\r\n        appUser.setAuthority(new HashSet&lt;&gt;(List.of(authority)));\r\n\r\n        appUserService.createAppUser(appUser);\r\n        jwt = jwtUtil.generateToken(appUser.getUsername());\r\n\r\n        String content = objectMapper.writeValueAsString(journalMap);\r\n\r\n        mockMvc.perform(MockMvcRequestBuilders.post(&quot;/journals&quot;)\r\n                .header(&quot;Authorization&quot;, &quot;Bearer &quot; + jwt)\r\n                .content(content)\r\n                .contentType(MediaType.APPLICATION_JSON))\r\n                .andDo(MockMvcResultHandlers.print())\r\n                .andExpect(MockMvcResultMatchers.status().isOk());\r\n\r\n        assertThat(journalService.getPaginatedJournals(appUser, 0, 1)\r\n                .getContent().get(0).getStockPrice()).isEqualTo(235.38);\r\n    }\r\n```\r\n\r\n**JwtUtil**\r\n```java\r\n@Component\r\npublic class JwtUtil {\r\n\r\n    private final int expirationTime = 50 * 60 * 60 * 10;\r\n    private CustomUserDetailsService customUserDetailsService;\r\n\r\n    @Autowired\r\n    public JwtUtil(CustomUserDetailsService customUserDetailsService) {\r\n        this.customUserDetailsService = customUserDetailsService;\r\n        SignatureAlgorithm signatureAlgorithm = SignatureAlgorithm.HS256;\r\n        secret = Keys.secretKeyFor(signatureAlgorithm).getEncoded();\r\n    }\r\n\r\n    public String generateToken(String username) {\r\n        UserDetails userDetails = customUserDetailsService.loadUserByUsername(username);\r\n        return createToken(userDetails);\r\n    }\r\n\r\n    private String createToken(UserDetails userDetails) {\r\n        return Jwts.builder()\r\n                .setSubject(userDetails.getUsername())\r\n                .claim(&quot;authorities&quot;, userDetails.getAuthorities())\r\n                .setIssuedAt(new Date(System.currentTimeMillis()))\r\n                .setExpiration(new Date(System.currentTimeMillis() + expirationTime))\r\n                .signWith(Keys.hmacShaKeyFor(secret), SignatureAlgorithm.HS256)\r\n                .compact();\r\n    }\r\n\r\n    ...\r\n}\r\n```\r\n\r\n**CustomUserDetailsService**\r\n```java\r\n@Service\r\npublic class CustomUserDetailsService implements UserDetailsService {\r\n\r\n    private AppUserRepository appUserRepository;\r\n\r\n    @Autowired\r\n    public void setAppUserRepository(AppUserRepository appUserRepository) {\r\n        this.appUserRepository = appUserRepository;\r\n    }\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        Optional&lt;AppUser&gt; optionalAppUser = appUserRepository.findByUsername(username);\r\n        if (optionalAppUser.isEmpty())\r\n            throw new UsernameNotFoundException(&quot;User not found while trying to load user&quot;);\r\n\r\n        AppUser appUser = optionalAppUser.get();\r\n\r\n        List&lt;GrantedAuthority&gt; authorities = appUser.getAuthority()\r\n                .stream()\r\n                .map(authority -&gt; new SimpleGrantedAuthority(authority.getAuthority().toString()))\r\n                .collect(Collectors.toList());\r\n\r\n        return User.builder()\r\n                .username(appUser.getUsername())\r\n                .password(appUser.getEncryptedPassword().replace(&quot;{bcrypt}&quot;, &quot;&quot;))\r\n                .authorities(authorities)\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\n**AuthorityType Enum**\r\n```java\r\npublic enum AuthorityType {\r\n    TRIAL,\r\n    ESSENTIAL,\r\n    PREMIUM,\r\n    ADMIN;\r\n}\r\n```\r\n\r\n**JwtDecoder**\r\n```java\r\n@Bean\r\n    public JwtDecoder jwtDecoder() {\r\n        return NimbusJwtDecoder.withSecretKey(\r\n                new SecretKeySpec(jwtSecretProvider.getSecretKey(), SignatureAlgorithm.HS256.getValue())\r\n        ).build();\r\n    }\r\n```\r\n\r\n**JwtSecretProvider**\r\n```java\r\nprivate String secret;\r\n\r\npublic JwtSecretProvider() {\r\n    secret = Keys.secretKeyFor(signatureAlgorithm).getEncoded();\r\n}\r\n@Override\r\n    public byte[] getSecretKey() {\r\n        return secret;\r\n    }\r\n```\r\n\r\nand the error being:\r\n\r\n```\r\nJwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@77bce91c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[]]\r\n\r\n[WWW-Authenticate:&quot;Bearer error=&quot;insufficient_scope&quot;, error_description=&quot;The request requires higher privileges than provided by the access token.&quot;, error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot;&quot;, X-Content-Type-Options:&quot;nosniff&quot;, X-XSS-Protection:&quot;0&quot;, Cache-Control:&quot;no-cache, no-store, max-age=0, must-revalidate&quot;, Pragma:&quot;no-cache&quot;, Expires:&quot;0&quot;, X-Frame-Options:&quot;DENY&quot;]\r\n```","title":"Spring JWT authentication with &quot;.hasAuthority()&quot; returning &quot;insufficient scope&quot; error","body":"<p>I'm using JWT as authentication for Spring right now. I'm also using a custom <code>AppUser</code> entity with custom <code>Authority</code>.</p>\n<p>Here's the code for these entities:</p>\n<p><strong>AppUser entity</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name=&quot;app_user&quot;)\npublic class AppUser {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name=&quot;id&quot;)\n    private int id;\n\n    ...\n\n    @NotNull\n    @ManyToMany(cascade = CascadeType.ALL)\n    @JoinColumn(name=&quot;authority_id&quot;, columnDefinition = &quot;INT NOT NULL&quot;)\n    private Set&lt;Authority&gt; authorities = new HashSet&lt;&gt;();\n    ...\n}\n</code></pre>\n<p><strong>Authority entity</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name=&quot;authority&quot;)\npublic class Authority {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name=&quot;id&quot;)\n    private int id;\n\n    @NotNull\n    @Enumerated(EnumType.STRING)\n    @Column(name=&quot;authority&quot;, columnDefinition =\n            &quot;ENUM('TRIAL', 'ESSENTIAL', 'PREMIUM', 'ADMIN') NOT NULL DEFAULT 'TRIAL'&quot;)\n    private AuthorityType authority = AuthorityType.TRIAL;\n\n    @JsonBackReference\n    @NotNull\n    @ManyToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name=&quot;app_user_id&quot;, columnDefinition = &quot;INT NOT NULL&quot;)\n    private AppUser appUser;\n    ...\n}\n</code></pre>\n<p>Also here's my security config and custom UserDetailsServcie:</p>\n<p><strong>SecurityConfig</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    private AuthenticationProvider authenticationProvider;\n    private JwtSecretProvider jwtSecretProvider;\n\n    @Autowired\n    public SecurityConfig(AuthenticationProvider authenticationProvider, JwtSecretProvider jwtSecretProvider) {\n        this.authenticationProvider = authenticationProvider;\n        this.jwtSecretProvider = jwtSecretProvider;\n    }\n\n    @Bean\n    public AuthenticationManager authManager(HttpSecurity http) throws Exception {\n        AuthenticationManagerBuilder authenticationManagerBuilder =\n                http.getSharedObject(AuthenticationManagerBuilder.class);\n        authenticationManagerBuilder.authenticationProvider(authenticationProvider);\n        return authenticationManagerBuilder.build();\n    }\n\n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer() {\n        return web -&gt; {\n            web.ignoring().requestMatchers(HttpMethod.POST, &quot;/user&quot;, &quot;/user/login&quot;);\n        };\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.csrf(AbstractHttpConfigurer::disable)\n                .formLogin(AbstractHttpConfigurer::disable)\n                .authorizeHttpRequests(auth -&gt; auth\n                        .requestMatchers(HttpMethod.POST, &quot;/user&quot;).permitAll()\n                        .requestMatchers(&quot;/user/login&quot;).permitAll()\n                        .anyRequest().hasAnyAuthority(&quot;ESSENTIAL&quot;, &quot;PREMIUM&quot;)\n                )\n                .sessionManagement(sess -&gt; sess.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; jwt.decoder(jwtDecoder())))\n                .httpBasic(Customizer.withDefaults());\n        return http.build();\n    }\n</code></pre>\n<p><strong>CustomUserDetailsService</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class CustomUserDetailsService implements UserDetailsService {\n\n    private AppUserRepository appUserRepository;\n\n    @Autowired\n    public void setAppUserRepository(AppUserRepository appUserRepository) {\n        this.appUserRepository = appUserRepository;\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        Optional&lt;AppUser&gt; optionalAppUser = appUserRepository.findByUsername(username);\n        if (optionalAppUser.isEmpty())\n            throw new UsernameNotFoundException(&quot;User not found while trying to load user&quot;);\n\n        AppUser appUser = optionalAppUser.get();\n\n        List&lt;GrantedAuthority&gt; authorities = appUser.getAuthority()\n                .stream()\n                .map(authority -&gt; new SimpleGrantedAuthority(authority.getAuthority().name()))\n                .collect(Collectors.toList());\n\n        return User.builder()\n                .username(appUser.getUsername())\n                .password(appUser.getEncryptedPassword().replace(&quot;{bcrypt}&quot;, &quot;&quot;))\n                .authorities(authorities)\n                .build();\n    }\n}\n</code></pre>\n<p>and this is my error response when I call the url with <code>MockMvc</code> for <code>/journals</code>:</p>\n<p><strong>API call</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\n    void checkIfCreatesJournal() throws Exception {\n        appUser = new AppUser();\n        appUser.setUsername(&quot;honggildong&quot;);\n        appUser.setEmail(&quot;a@a.com&quot;);\n        appUser.setEncryptedPassword(&quot;asdfasdfasdf123!&quot;);\n        Authority authority = new Authority();\n        authority.setAuthority(AuthorityType.ESSENTIAL);\n        authority.setAppUser(appUser);\n        appUser.setAuthority(new HashSet&lt;&gt;(List.of(authority)));\n\n        appUserService.createAppUser(appUser);\n        jwt = jwtUtil.generateToken(appUser.getUsername());\n\n        String content = objectMapper.writeValueAsString(journalMap);\n\n        mockMvc.perform(MockMvcRequestBuilders.post(&quot;/journals&quot;)\n                .header(&quot;Authorization&quot;, &quot;Bearer &quot; + jwt)\n                .content(content)\n                .contentType(MediaType.APPLICATION_JSON))\n                .andDo(MockMvcResultHandlers.print())\n                .andExpect(MockMvcResultMatchers.status().isOk());\n\n        assertThat(journalService.getPaginatedJournals(appUser, 0, 1)\n                .getContent().get(0).getStockPrice()).isEqualTo(235.38);\n    }\n</code></pre>\n<p><strong>JwtUtil</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class JwtUtil {\n\n    private final int expirationTime = 50 * 60 * 60 * 10;\n    private CustomUserDetailsService customUserDetailsService;\n\n    @Autowired\n    public JwtUtil(CustomUserDetailsService customUserDetailsService) {\n        this.customUserDetailsService = customUserDetailsService;\n        SignatureAlgorithm signatureAlgorithm = SignatureAlgorithm.HS256;\n        secret = Keys.secretKeyFor(signatureAlgorithm).getEncoded();\n    }\n\n    public String generateToken(String username) {\n        UserDetails userDetails = customUserDetailsService.loadUserByUsername(username);\n        return createToken(userDetails);\n    }\n\n    private String createToken(UserDetails userDetails) {\n        return Jwts.builder()\n                .setSubject(userDetails.getUsername())\n                .claim(&quot;authorities&quot;, userDetails.getAuthorities())\n                .setIssuedAt(new Date(System.currentTimeMillis()))\n                .setExpiration(new Date(System.currentTimeMillis() + expirationTime))\n                .signWith(Keys.hmacShaKeyFor(secret), SignatureAlgorithm.HS256)\n                .compact();\n    }\n\n    ...\n}\n</code></pre>\n<p><strong>CustomUserDetailsService</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class CustomUserDetailsService implements UserDetailsService {\n\n    private AppUserRepository appUserRepository;\n\n    @Autowired\n    public void setAppUserRepository(AppUserRepository appUserRepository) {\n        this.appUserRepository = appUserRepository;\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        Optional&lt;AppUser&gt; optionalAppUser = appUserRepository.findByUsername(username);\n        if (optionalAppUser.isEmpty())\n            throw new UsernameNotFoundException(&quot;User not found while trying to load user&quot;);\n\n        AppUser appUser = optionalAppUser.get();\n\n        List&lt;GrantedAuthority&gt; authorities = appUser.getAuthority()\n                .stream()\n                .map(authority -&gt; new SimpleGrantedAuthority(authority.getAuthority().toString()))\n                .collect(Collectors.toList());\n\n        return User.builder()\n                .username(appUser.getUsername())\n                .password(appUser.getEncryptedPassword().replace(&quot;{bcrypt}&quot;, &quot;&quot;))\n                .authorities(authorities)\n                .build();\n    }\n}\n</code></pre>\n<p><strong>AuthorityType Enum</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum AuthorityType {\n    TRIAL,\n    ESSENTIAL,\n    PREMIUM,\n    ADMIN;\n}\n</code></pre>\n<p><strong>JwtDecoder</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\n    public JwtDecoder jwtDecoder() {\n        return NimbusJwtDecoder.withSecretKey(\n                new SecretKeySpec(jwtSecretProvider.getSecretKey(), SignatureAlgorithm.HS256.getValue())\n        ).build();\n    }\n</code></pre>\n<p><strong>JwtSecretProvider</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>private String secret;\n\npublic JwtSecretProvider() {\n    secret = Keys.secretKeyFor(signatureAlgorithm).getEncoded();\n}\n@Override\n    public byte[] getSecretKey() {\n        return secret;\n    }\n</code></pre>\n<p>and the error being:</p>\n<pre><code>JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@77bce91c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[]]\n\n[WWW-Authenticate:&quot;Bearer error=&quot;insufficient_scope&quot;, error_description=&quot;The request requires higher privileges than provided by the access token.&quot;, error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot;&quot;, X-Content-Type-Options:&quot;nosniff&quot;, X-XSS-Protection:&quot;0&quot;, Cache-Control:&quot;no-cache, no-store, max-age=0, must-revalidate&quot;, Pragma:&quot;no-cache&quot;, Expires:&quot;0&quot;, X-Frame-Options:&quot;DENY&quot;]\n</code></pre>\n"},{"tags":["java","spring-boot","spring-security"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693309770,"post_id":76999905,"comment_id":135740913,"body_markdown":"i think you should to check it [migrating-from-springfox](https://springdoc.org/migrating-from-springfox.html)","body":"i think you should to check it <a href=\"https://springdoc.org/migrating-from-springfox.html\" rel=\"nofollow noreferrer\">migrating-from-springfox</a>"}],"owner":{"account_id":29250764,"reputation":1,"user_id":22410182,"display_name":"Amos00"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693309560,"creation_date":1693309560,"question_id":76999905,"body_markdown":"I updated project from java 12 to 17 and after I updated and migrated whole project, now it&#39;s turn to rewrite configuration for spring security. This is my swagger config and he should be replaced with OpenAPI config.\r\n\r\n```\r\npublic class SwaggerConfig {\r\n\r\n    private final String API_AUTH_SCHEME_NAME = &quot;API Bearer Token&quot;;\r\n    private final String BASIC_AUTH_SCHEME_NAME = &quot;basicAuth&quot;;\r\n\r\n    @Profile(&quot;!security&quot;)\r\n    @Bean\r\n    public Docket api() {\r\n        return basicApi();\r\n    }\r\n\r\n    @Profile(&quot;security&quot;)\r\n    @Bean\r\n    public Docket securedApi() {\r\n        return basicApi()\r\n            .securitySchemes(Arrays.asList(authEndpointScheme(), apiEndpointAuthScheme()))\r\n            .securityContexts(Arrays.asList(authEndpointSecurityContext(), apiEndpointSecurityContext()));\r\n    }\r\n\r\n    private SecurityContext authEndpointSecurityContext() {\r\n        return SecurityContext.builder()\r\n            .securityReferences(Collections.singletonList(authEndpointReference()))\r\n            .forPaths(PathSelectors.ant(&quot;/api/auth/token&quot;))\r\n            .build();\r\n    }\r\n\r\n    private SecurityContext apiEndpointSecurityContext() {\r\n        return SecurityContext.builder()\r\n            .securityReferences(Collections.singletonList(apiAuthEndpointReference()))\r\n            .forPaths(PathSelectors.regex(&quot;/api/(?!auth).*&quot;))\r\n            .build();\r\n    }\r\n\r\n    private SecurityScheme authEndpointScheme() {\r\n        return new BasicAuth(BASIC_AUTH_SCHEME_NAME);\r\n    }\r\n\r\n    private SecurityScheme apiEndpointAuthScheme() {\r\n        return new ApiKey(API_AUTH_SCHEME_NAME, HttpHeaders.AUTHORIZATION, &quot;header&quot;);\r\n    }\r\n\r\n    private SecurityReference authEndpointReference() {\r\n        return new SecurityReference(BASIC_AUTH_SCHEME_NAME, new AuthorizationScope[0]);\r\n    }\r\n\r\n    private SecurityReference apiAuthEndpointReference() {\r\n        return new SecurityReference(API_AUTH_SCHEME_NAME, new AuthorizationScope[0]);\r\n    }\r\n```\r\n\r\nNow I have to replace this config with OpenAPI config with springdoc.\r\nCan someone help me?","title":"Migrating from SpringFox to SpringDoc problem with SwaggerConfig","body":"<p>I updated project from java 12 to 17 and after I updated and migrated whole project, now it's turn to rewrite configuration for spring security. This is my swagger config and he should be replaced with OpenAPI config.</p>\n<pre><code>public class SwaggerConfig {\n\n    private final String API_AUTH_SCHEME_NAME = &quot;API Bearer Token&quot;;\n    private final String BASIC_AUTH_SCHEME_NAME = &quot;basicAuth&quot;;\n\n    @Profile(&quot;!security&quot;)\n    @Bean\n    public Docket api() {\n        return basicApi();\n    }\n\n    @Profile(&quot;security&quot;)\n    @Bean\n    public Docket securedApi() {\n        return basicApi()\n            .securitySchemes(Arrays.asList(authEndpointScheme(), apiEndpointAuthScheme()))\n            .securityContexts(Arrays.asList(authEndpointSecurityContext(), apiEndpointSecurityContext()));\n    }\n\n    private SecurityContext authEndpointSecurityContext() {\n        return SecurityContext.builder()\n            .securityReferences(Collections.singletonList(authEndpointReference()))\n            .forPaths(PathSelectors.ant(&quot;/api/auth/token&quot;))\n            .build();\n    }\n\n    private SecurityContext apiEndpointSecurityContext() {\n        return SecurityContext.builder()\n            .securityReferences(Collections.singletonList(apiAuthEndpointReference()))\n            .forPaths(PathSelectors.regex(&quot;/api/(?!auth).*&quot;))\n            .build();\n    }\n\n    private SecurityScheme authEndpointScheme() {\n        return new BasicAuth(BASIC_AUTH_SCHEME_NAME);\n    }\n\n    private SecurityScheme apiEndpointAuthScheme() {\n        return new ApiKey(API_AUTH_SCHEME_NAME, HttpHeaders.AUTHORIZATION, &quot;header&quot;);\n    }\n\n    private SecurityReference authEndpointReference() {\n        return new SecurityReference(BASIC_AUTH_SCHEME_NAME, new AuthorizationScope[0]);\n    }\n\n    private SecurityReference apiAuthEndpointReference() {\n        return new SecurityReference(API_AUTH_SCHEME_NAME, new AuthorizationScope[0]);\n    }\n</code></pre>\n<p>Now I have to replace this config with OpenAPI config with springdoc.\nCan someone help me?</p>\n"},{"tags":["java","visual-studio-code","jsp","servlets"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":2,"creation_date":1693291064,"post_id":76997856,"comment_id":135737409,"body_markdown":"please put all the relevant file in the question as formatted text, not links to files/external sources","body":"please put all the relevant file in the question as formatted text, not links to files/external sources"},{"owner":{"account_id":27580800,"reputation":11,"user_id":21050055,"display_name":"Shoone"},"score":0,"creation_date":1693291173,"post_id":76997856,"comment_id":135737418,"body_markdown":"Ok, just a moment","body":"Ok, just a moment"}],"answers":[{"tags":[],"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693295828,"creation_date":1693295828,"answer_id":76998371,"question_id":76997856,"body_markdown":"If you want to get hot reloading of `.jsp` files, you can install the [**Deploy**][1] extension and follow the steps below.\r\n\r\n 1. After downloading the extension, add the following configuration in ***settings.json***.\r\n\r\n    ```\r\n        &quot;deploy&quot;: {\r\n            &quot;packages&quot;: [\r\n                {\r\n                    &quot;name&quot;: &quot;frontend&quot;,\r\n                    &quot;description&quot;: &quot;All files in webapp&quot;,\r\n                    &quot;files&quot;: [\r\n                        &quot;src/main/webapp/*&quot;,\r\n                        &quot;src/main/webapp/*/*&quot;,\r\n                        &quot;src/main/webapp/*.*&quot;,\r\n                        &quot;src/main/webapp/*/*.*&quot;,\r\n                        &quot;src/main/webapp/*/*/*.*&quot;,\r\n                        &quot;src/main/webapp/*/*/*/*.*&quot;,\r\n                        &quot;src/main/webapp/*/*/*/*/*.*&quot;,\r\n                        &quot;src/main/webapp/*/*/*/*/*&quot;,\r\n                        &quot;src/main/webapp/*/*/*/*/*/*.*&quot;,\r\n                    ],\r\n                    &quot;exclude&quot;: [\r\n                        &quot;src/main/webapp/test/*&quot;\r\n                    ],\r\n                    &quot;deployOnSave&quot;: true,\r\n                    &quot;useTargetList&quot;: true,\r\n                    &quot;button&quot;: {\r\n                        &quot;text&quot;: &quot;Deploy&quot;,\r\n                        &quot;tooltip&quot;: &quot;Click here to deploy frontend to hotsite&quot;,\r\n                        &quot;targets&quot;: [ &quot;HOTSITE&quot; ]\r\n                    },\r\n                }\r\n            ],\r\n            &quot;targets&quot;: [\r\n                {\r\n                    &quot;type&quot;: &quot;local&quot;,\r\n                    &quot;name&quot;: &quot;HOTSITE&quot;,\r\n                    &quot;description&quot;: &quot;A local folder&quot;,\r\n                    &quot;dir&quot;: &quot;target/DETE/&quot;,\r\n                    &quot;mappings&quot;: [\r\n                        {\r\n                            &quot;source&quot;: &quot;src/main/webapp&quot;,\r\n                            &quot;isRegEx&quot;: false,\r\n                            &quot;target&quot;: &quot;/&quot;\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        }\r\n    ```\r\n\r\n 2. After the addition is complete, click the `Deploy` button that appears in the status bar below.\r\n\r\n    [![enter image description here][2]][2]\r\n\r\n 3. Right-click on the tomcat server and select `Add Deployment`\r\n\r\n    [![enter image description here][3]][3]\r\n\r\n 4. Select `Exploded`\r\n\r\n    [![enter image description here][4]][4]\r\n\r\n 5. Select the **DETE** folder generated by just clicking `Deploy` in the explorer\r\n\r\n    [![enter image description here][5]][5]\r\n\r\n 6. Type `http://localhost:8080/DETE` in the browser address bar and press Enter\r\n\r\n    [![enter image description here][6]][6]\r\n\r\n    *Or right-click on tomcat and select `Server Actions...` --&gt; `Show in Browser...` --&gt; `http://localhost:8080/DETE`*\r\n\r\n 7. Modify `.jsp` to add a line of content\r\n   [![enter image description here][7]][7]\r\n\r\n 8. Refreshing the page shows the changed content.\r\n   [![enter image description here][8]][8]\r\n\r\n\r\n  [1]: https://marketplace.visualstudio.com/items?itemName=mkloubert.vs-deploy\r\n  [2]: https://i.stack.imgur.com/Yelc6.png\r\n  [3]: https://i.stack.imgur.com/MHBjr.png\r\n  [4]: https://i.stack.imgur.com/5okoR.png\r\n  [5]: https://i.stack.imgur.com/c2whq.png\r\n  [6]: https://i.stack.imgur.com/MifGe.png\r\n  [7]: https://i.stack.imgur.com/sfeHL.png\r\n  [8]: https://i.stack.imgur.com/f2Rqw.png\r\n\r\n\r\n\r\n\r\n\r\n","title":"Setting up VS Code for Java web development","body":"<p>If you want to get hot reloading of <code>.jsp</code> files, you can install the <a href=\"https://marketplace.visualstudio.com/items?itemName=mkloubert.vs-deploy\" rel=\"nofollow noreferrer\"><strong>Deploy</strong></a> extension and follow the steps below.</p>\n<ol>\n<li><p>After downloading the extension, add the following configuration in <em><strong>settings.json</strong></em>.</p>\n<pre><code>    &quot;deploy&quot;: {\n        &quot;packages&quot;: [\n            {\n                &quot;name&quot;: &quot;frontend&quot;,\n                &quot;description&quot;: &quot;All files in webapp&quot;,\n                &quot;files&quot;: [\n                    &quot;src/main/webapp/*&quot;,\n                    &quot;src/main/webapp/*/*&quot;,\n                    &quot;src/main/webapp/*.*&quot;,\n                    &quot;src/main/webapp/*/*.*&quot;,\n                    &quot;src/main/webapp/*/*/*.*&quot;,\n                    &quot;src/main/webapp/*/*/*/*.*&quot;,\n                    &quot;src/main/webapp/*/*/*/*/*.*&quot;,\n                    &quot;src/main/webapp/*/*/*/*/*&quot;,\n                    &quot;src/main/webapp/*/*/*/*/*/*.*&quot;,\n                ],\n                &quot;exclude&quot;: [\n                    &quot;src/main/webapp/test/*&quot;\n                ],\n                &quot;deployOnSave&quot;: true,\n                &quot;useTargetList&quot;: true,\n                &quot;button&quot;: {\n                    &quot;text&quot;: &quot;Deploy&quot;,\n                    &quot;tooltip&quot;: &quot;Click here to deploy frontend to hotsite&quot;,\n                    &quot;targets&quot;: [ &quot;HOTSITE&quot; ]\n                },\n            }\n        ],\n        &quot;targets&quot;: [\n            {\n                &quot;type&quot;: &quot;local&quot;,\n                &quot;name&quot;: &quot;HOTSITE&quot;,\n                &quot;description&quot;: &quot;A local folder&quot;,\n                &quot;dir&quot;: &quot;target/DETE/&quot;,\n                &quot;mappings&quot;: [\n                    {\n                        &quot;source&quot;: &quot;src/main/webapp&quot;,\n                        &quot;isRegEx&quot;: false,\n                        &quot;target&quot;: &quot;/&quot;\n                    }\n                ]\n            }\n        ]\n    }\n</code></pre>\n</li>\n<li><p>After the addition is complete, click the <code>Deploy</code> button that appears in the status bar below.</p>\n<p><a href=\"https://i.stack.imgur.com/Yelc6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yelc6.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p>Right-click on the tomcat server and select <code>Add Deployment</code></p>\n<p><a href=\"https://i.stack.imgur.com/MHBjr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MHBjr.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p>Select <code>Exploded</code></p>\n<p><a href=\"https://i.stack.imgur.com/5okoR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5okoR.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p>Select the <strong>DETE</strong> folder generated by just clicking <code>Deploy</code> in the explorer</p>\n<p><a href=\"https://i.stack.imgur.com/c2whq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c2whq.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p>Type <code>http://localhost:8080/DETE</code> in the browser address bar and press Enter</p>\n<p><a href=\"https://i.stack.imgur.com/MifGe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MifGe.png\" alt=\"enter image description here\" /></a></p>\n<p><em>Or right-click on tomcat and select <code>Server Actions...</code> --&gt; <code>Show in Browser...</code> --&gt; <code>http://localhost:8080/DETE</code></em></p>\n</li>\n<li><p>Modify <code>.jsp</code> to add a line of content\n<a href=\"https://i.stack.imgur.com/sfeHL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sfeHL.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p>Refreshing the page shows the changed content.\n<a href=\"https://i.stack.imgur.com/f2Rqw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f2Rqw.png\" alt=\"enter image description here\" /></a></p>\n</li>\n</ol>\n"}],"owner":{"account_id":27580800,"reputation":11,"user_id":21050055,"display_name":"Shoone"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1693309503,"creation_date":1693291016,"question_id":76997856,"body_markdown":"I want to setup my pure Java web project in VS Code. My project directory looks like this:\r\n\r\n![screenshot from VS Code][1]\r\n\r\n    .vscode\r\n    WEB-INF\r\n     ..../classes/com/example/HelloWorldServlet.java\r\n    ..../lib/servlet-api.jar\r\n    ....web.xml\r\n    .classpath\r\n    index.jsp\r\n\r\n\r\nI have added my project to **webapps** folder in tomcat installation folder and when I go to localhost:8080/manager/html I can see /Project_1 as one of the applications: ![tomcat webapp manager][2]\r\n\r\nIf I go to *localhost:8080/Project_1* it shows me the contents of a body on index.jsp file, but when I edit the file it will not update, not even after tomcat restart. What am I missing? Also I have a servlet as you can see as one of my files and I specified a route for it but gives me 404  when I go on *localhost:8080/Project_1/hello*: [web.xml file][3]\r\n\r\nFiles:\r\n- web.xml: \r\n```xml\r\n    &lt;web-app&gt;\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;HelloWorldServlet&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;com.example.HelloWorldServlet&lt;/servlet-class&gt;\r\n    &lt;/servlet&gt;\r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;HelloWorldServlet&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n&lt;/web-app&gt;\r\n```\r\n- .classpath\r\n\r\n```xml\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;classpath&gt;\r\n    &lt;classpathentry kind=&quot;src&quot; path=&quot;src&quot;/&gt;\r\n    &lt;classpathentry kind=&quot;con&quot; path=&quot;org.eclipse.jdt.launching.JRE_CONTAINER&quot;/&gt;\r\n    &lt;classpathentry kind=&quot;lib&quot; path=&quot;lib/servlet-api.jar&quot;/&gt;\r\n    &lt;!-- Any other dependencies you might have --&gt;\r\n&lt;/classpath&gt;\r\n```\r\n\r\n- index.jsp\r\n\r\n```xml\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\r\npageEncoding=&quot;UTF-8&quot; %&gt;\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n  &lt;head&gt;\r\n    &lt;title&gt;Hello JSP&lt;/title&gt;\r\n  &lt;/head&gt;\r\n  &lt;body&gt;\r\n    &lt;h1&gt;Hello World from JSP&lt;/h1&gt;\r\n    &lt;h1&gt;Hello World from JSP&lt;/h1&gt;\r\n    &lt;h1&gt;Hello World from JSP&lt;/h1&gt;\r\n  &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n- HelloWorldServlet.java\r\n```\r\npackage com.example;\r\n\r\nimport javax.servlet.*;\r\nimport javax.servlet.http.*;\r\nimport java.io.*;\r\n\r\npublic class HelloWorldServlet extends HttpServlet {\r\n    public void doGet(HttpServletRequest request, HttpServletResponse response)\r\n            throws ServletException, IOException {\r\n        response.setContentType(&quot;text/html&quot;);\r\n        PrintWriter out = response.getWriter();\r\n        out.println(&quot;&lt;html&gt;&lt;body&gt;&quot;);\r\n        out.println(&quot;&lt;h1&gt;Hello World from Servlet&lt;/h1&gt;&quot;);\r\n        out.println(&quot;&lt;/body&gt;&lt;/html&gt;&quot;);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GK2Xv.png\r\n  [2]: https://i.stack.imgur.com/VYAzh.png\r\n  [3]: https://i.stack.imgur.com/LZOMh.png","title":"Setting up VS Code for Java web development","body":"<p>I want to setup my pure Java web project in VS Code. My project directory looks like this:</p>\n<p><img src=\"https://i.stack.imgur.com/GK2Xv.png\" alt=\"screenshot from VS Code\" /></p>\n<pre><code>.vscode\nWEB-INF\n ..../classes/com/example/HelloWorldServlet.java\n..../lib/servlet-api.jar\n....web.xml\n.classpath\nindex.jsp\n</code></pre>\n<p>I have added my project to <strong>webapps</strong> folder in tomcat installation folder and when I go to localhost:8080/manager/html I can see /Project_1 as one of the applications: <img src=\"https://i.stack.imgur.com/VYAzh.png\" alt=\"tomcat webapp manager\" /></p>\n<p>If I go to <em>localhost:8080/Project_1</em> it shows me the contents of a body on index.jsp file, but when I edit the file it will not update, not even after tomcat restart. What am I missing? Also I have a servlet as you can see as one of my files and I specified a route for it but gives me 404  when I go on <em>localhost:8080/Project_1/hello</em>: <a href=\"https://i.stack.imgur.com/LZOMh.png\" rel=\"nofollow noreferrer\">web.xml file</a></p>\n<p>Files:</p>\n<ul>\n<li>web.xml:</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;web-app&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;HelloWorldServlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;com.example.HelloWorldServlet&lt;/servlet-class&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;HelloWorldServlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n<ul>\n<li>.classpath</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;classpath&gt;\n    &lt;classpathentry kind=&quot;src&quot; path=&quot;src&quot;/&gt;\n    &lt;classpathentry kind=&quot;con&quot; path=&quot;org.eclipse.jdt.launching.JRE_CONTAINER&quot;/&gt;\n    &lt;classpathentry kind=&quot;lib&quot; path=&quot;lib/servlet-api.jar&quot;/&gt;\n    &lt;!-- Any other dependencies you might have --&gt;\n&lt;/classpath&gt;\n</code></pre>\n<ul>\n<li>index.jsp</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\npageEncoding=&quot;UTF-8&quot; %&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Hello JSP&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Hello World from JSP&lt;/h1&gt;\n    &lt;h1&gt;Hello World from JSP&lt;/h1&gt;\n    &lt;h1&gt;Hello World from JSP&lt;/h1&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<ul>\n<li>HelloWorldServlet.java</li>\n</ul>\n<pre><code>package com.example;\n\nimport javax.servlet.*;\nimport javax.servlet.http.*;\nimport java.io.*;\n\npublic class HelloWorldServlet extends HttpServlet {\n    public void doGet(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n        response.setContentType(&quot;text/html&quot;);\n        PrintWriter out = response.getWriter();\n        out.println(&quot;&lt;html&gt;&lt;body&gt;&quot;);\n        out.println(&quot;&lt;h1&gt;Hello World from Servlet&lt;/h1&gt;&quot;);\n        out.println(&quot;&lt;/body&gt;&lt;/html&gt;&quot;);\n    }\n}\n\n</code></pre>\n"},{"tags":["java","spring-boot","spring-batch","large-data"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692215636,"post_id":76916505,"comment_id":135594974,"body_markdown":"*however my table doesn&#39;t have a numeric column to keep track of the row position.* What makes you think you need a *numeric* column?","body":"<i>however my table doesn&#39;t have a numeric column to keep track of the row position.</i> What makes you think you need a <i>numeric</i> column?"},{"owner":{"account_id":29030834,"reputation":1,"user_id":22237801,"display_name":"Avinash B"},"score":0,"creation_date":1692216293,"post_id":76916505,"comment_id":135595076,"body_markdown":"As per [this](https://keyholesoftware.com/2020/08/18/utilizing-spring-batch-for-large-dataset-summarization/) JdbcPagingItemReader uses SqlPagingQueryProviderFoctoryBean which needs a sortKey. The sortKey internally uses &#39;greater than&#39; to start the next iteration of reads.","body":"As per <a href=\"https://keyholesoftware.com/2020/08/18/utilizing-spring-batch-for-large-dataset-summarization/\" rel=\"nofollow noreferrer\">this</a> JdbcPagingItemReader uses SqlPagingQueryProviderFoctoryBean which needs a sortKey. The sortKey internally uses &#39;greater than&#39; to start the next iteration of reads."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692216434,"post_id":76916505,"comment_id":135595106,"body_markdown":"So why would it be unable to sort a date column?","body":"So why would it be unable to sort a date column?"},{"owner":{"account_id":29030834,"reputation":1,"user_id":22237801,"display_name":"Avinash B"},"score":0,"creation_date":1692217251,"post_id":76916505,"comment_id":135595254,"body_markdown":"Yes! You are right. This seems doable. Then what about from a error handling perspective? It will divide the rows as per the pageSize rather than day. And if an error occurs, I&#39;ll have to log the query of each read and then restart the job from that row, correct (Is this a correct approach?) ?","body":"Yes! You are right. This seems doable. Then what about from a error handling perspective? It will divide the rows as per the pageSize rather than day. And if an error occurs, I&#39;ll have to log the query of each read and then restart the job from that row, correct (Is this a correct approach?) ?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692217659,"post_id":76916505,"comment_id":135595334,"body_markdown":"Oops - might have to rethink: [It is important to have a unique key constraint on the sort key to guarantee that no data is lost between executions.](https://medium.com/spring-boot-framework/spring-batch-pagination-with-jdbcpagingitemreader-8226855a53d)","body":"Oops - might have to rethink: <a href=\"https://medium.com/spring-boot-framework/spring-batch-pagination-with-jdbcpagingitemreader-8226855a53d\" rel=\"nofollow noreferrer\">It is important to have a unique key constraint on the sort key to guarantee that no data is lost between executions.</a>"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1692257783,"post_id":76916505,"comment_id":135599431,"body_markdown":"Why not just regular chunk processing? Spring Batch will record the chunk it broke at and you can just continue processing. You could even write a chunk/item listener which writes the wrong/failed records to file or a different table so you can retry/fix those. Your attempt to add splitting by day seems to only complicate what Spring Batch already offers out-of-the-box.","body":"Why not just regular chunk processing? Spring Batch will record the chunk it broke at and you can just continue processing. You could even write a chunk/item listener which writes the wrong/failed records to file or a different table so you can retry/fix those. Your attempt to add splitting by day seems to only complicate what Spring Batch already offers out-of-the-box."}],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693309130,"creation_date":1693309130,"answer_id":76999852,"question_id":76916505,"body_markdown":"A regular fault-tolerant chunk-oriented step should be enough, and restartability will be handled for you by Spring Batch. \r\n\r\nIf your issue is performance, then you can try a multi-threaded step (but you lose restartability). Otherwise, you can use partitioning (just fix your partitioning logic and make sure to have reasonably sized partitions). With partitioning, restarting a failed job will only reprocess failed partitions.","title":"Reading, processing and writing a large number of records (30 million) from a table by splitting the job by days using Spring Batch","body":"<p>A regular fault-tolerant chunk-oriented step should be enough, and restartability will be handled for you by Spring Batch.</p>\n<p>If your issue is performance, then you can try a multi-threaded step (but you lose restartability). Otherwise, you can use partitioning (just fix your partitioning logic and make sure to have reasonably sized partitions). With partitioning, restarting a failed job will only reprocess failed partitions.</p>\n"}],"owner":{"account_id":29030834,"reputation":1,"user_id":22237801,"display_name":"Avinash B"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1693309130,"creation_date":1692213853,"question_id":76916505,"body_markdown":"I have a requirement to read data from table A, process them with some custom business logic and them write the processed data into another table B using Spring Batch.\r\n\r\nThe number of rows that are required to read are around 30 million in table A. So, in order to break this down to manageable parts (error handling, tracking etc), the plan is to read all the rows that belong to a day (Table A has a date column), process them and then batch insert into table B (I pass in start and end date for my job from which I calculate the number of days the table has to be read.). This way any exception occurs in any of the days, I can isolate the issue and restart my job from the non read rows only. Basically the goal is to break them into manageable pieces (split the job as per day), write them day by day and if any error occurs in between, I can restart my job from the day the error has occurred. Now for this reason I&#39;d prefer if the batch writing is sequential.\r\n\r\nSo in Spring Batch, my plan is to implement a calculate the number of days (say x) I need to process, invoke the reader x many times (this can be parallel) (reader returns list of objects of varying size) , process x times (returns list of processed objects) and then hands over the list of processed objects to the writer. The writer is invoked x times and batch writes the processed objects into Table B (this needs to be sequential).\r\n\r\nI&#39;ve searched quite a bit about this but couldn&#39;t find anything that can be usable in my use case. One article suggested JDBPCPagingItemReader (an alternative approach), however my table doesn&#39;t have a numeric column to keep track of the row position.\r\n\r\nI have also considered using a tasklet for this approach, however due to the large size of data, I found it inviable to store the data in stepExecutionContext (the combined size of all stepExecutionContext would be huge). I&#39;d rather want spring batch to handle the data as it is designed to handle large amounts of data.\r\n \r\nDespite my sequential requirement, I was able to get it somewhat working using a Partitioner. I have calculated the number of days between two dates and added them to the executionContext map. The reader is able read x many times, process it x many times but the writer is stuck in an infinite loop (still not viable from a debugging standpoint).\r\n\r\n\r\n\r\n\r\nHere is the job config, partitioner and reader coder:\r\n\r\n\r\n```\r\npublic class DataLoadJobConfig {\r\n    public final JobBuilderFactory jobBuilderFactory;\r\n    public final StepBuilderFactory stepBuilderFactory;\r\n    \r\n    @Bean\r\n    public Job CustomerJob() {\r\n        return jobBuilderFactory\r\n                .get(&quot;customerJob&quot;)\r\n                .flow(partitioningStep())\r\n                .end()\r\n                .build();\r\n    }\r\n    \r\n    @Bean\r\n    public Step partitioningStep() {\r\n        return stepBuilderFactory\r\n                .get(&quot;partitioningStep&quot;)\r\n                .partitioner(&quot;partitioningStep&quot;, partitioner())\r\n                .partitionHandler(partitionHandler())\r\n                .build();\r\n                \r\n    }\r\n\r\n    private Partitioner partitioner() {\r\n        LocalDate startDate = LocalDate.now();\r\n        LocalDate endDate = LocalDate.now();\r\n        DatePartitioner datePartitioner = new DatePartitioner();\r\n        datePartitioner.setStartDate(startDate);\r\n        datePartitioner.setEndDate(endDate);\r\n        return datePartitioner;\r\n    }\r\n\r\n    private PartitionHandler partitionHandler() {\r\n        TaskExecutorPartitionHandler partitionHandler = new TaskExecutorPartitionHandler();\r\n        partitionHandler.setStep(slaveStep());\r\n        return partitionHandler;\r\n    }\r\n\r\n    private Step slaveStep() {\r\n        return stepBuilderFactory\r\n                .get(&quot;slaveStep&quot;)\r\n                .&lt;List&lt;TableAEntity&gt;, List&lt;TableBEntity&gt;&gt;chunk(1) // not sure what the chunk size would be as for each day the result size would be different\r\n                .reader(reader())\r\n                .processor(processor())\r\n                .writer(writer())\r\n                .build();\r\n    }\r\n\r\n    private ItemWriter&lt;? super List&lt;TableBEntity&gt;&gt; writer() {\r\n    }\r\n\r\n    private ItemProcessor&lt;? super List&lt;TableAEntity&gt;,? extends List&lt;TableBEntity&gt;&gt; processor() {\r\n    }\r\n\r\n    private ItemReader&lt;? extends List&lt;TableAEntity&gt;&gt; reader() {\r\n    }\r\n}\r\n```\r\n\r\nCustom Partitioner\r\n```\r\npublic class DatePartitioner implements Partitioner {\r\n    private LocalDate startDate;\r\n    private LocalDate endDate;\r\n\r\n    public void setStartDate(LocalDate startDate) {\r\n        this.startDate = startDate;\r\n    }\r\n\r\n    public void setEndDate(LocalDate endDate) {\r\n        this.endDate = endDate;\r\n    }\r\n\r\n    @Override\r\n    public Map&lt;String, ExecutionContext&gt; partition(int gridSize) {\r\n        Map&lt;String, ExecutionContext&gt; executionContextMap = new HashMap&lt;&gt;();\r\n        LocalDate currentDate = startDate;\r\n        int i = 0;\r\n        while (!currentDate.equals(endDate)) {\r\n            ExecutionContext context = new ExecutionContext();\r\n            context.put(&quot;day&quot;, currentDate);\r\n            executionContextMap.put(&quot;partition_&quot; + i, context);\r\n            currentDate = currentDate.plusDays(1);\r\n            i++;\r\n        }\r\n        return executionContextMap;\r\n    }\r\n}\r\n```\r\n\r\nFrom an architectural point of view is dividing the dataset into day partitions, the correct approach? If it isn&#39;t is there any better way to approach this problem? \r\nOr is this approach even possible in Spring Batch? Does Spring batch support designing your custom data pipeline? (where I can keep readers parallel but writers sequential?).\r\nOr in the tasklet approach, how can I make spring handle the large amounts of data instead of me storing it manually in the stepExecutionContext?\r\nAlso in this case I&#39;m thinking I don&#39;t need chunk size as its dynamic and depends on how many records I&#39;m getting for a day. In this case how do I work around chunk size?\r\n\r\nIf I&#39;m thinking about this from a wrong perspective please educate me. Don&#39;t hesitate to be critical. Thank you!\r\n","title":"Reading, processing and writing a large number of records (30 million) from a table by splitting the job by days using Spring Batch","body":"<p>I have a requirement to read data from table A, process them with some custom business logic and them write the processed data into another table B using Spring Batch.</p>\n<p>The number of rows that are required to read are around 30 million in table A. So, in order to break this down to manageable parts (error handling, tracking etc), the plan is to read all the rows that belong to a day (Table A has a date column), process them and then batch insert into table B (I pass in start and end date for my job from which I calculate the number of days the table has to be read.). This way any exception occurs in any of the days, I can isolate the issue and restart my job from the non read rows only. Basically the goal is to break them into manageable pieces (split the job as per day), write them day by day and if any error occurs in between, I can restart my job from the day the error has occurred. Now for this reason I'd prefer if the batch writing is sequential.</p>\n<p>So in Spring Batch, my plan is to implement a calculate the number of days (say x) I need to process, invoke the reader x many times (this can be parallel) (reader returns list of objects of varying size) , process x times (returns list of processed objects) and then hands over the list of processed objects to the writer. The writer is invoked x times and batch writes the processed objects into Table B (this needs to be sequential).</p>\n<p>I've searched quite a bit about this but couldn't find anything that can be usable in my use case. One article suggested JDBPCPagingItemReader (an alternative approach), however my table doesn't have a numeric column to keep track of the row position.</p>\n<p>I have also considered using a tasklet for this approach, however due to the large size of data, I found it inviable to store the data in stepExecutionContext (the combined size of all stepExecutionContext would be huge). I'd rather want spring batch to handle the data as it is designed to handle large amounts of data.</p>\n<p>Despite my sequential requirement, I was able to get it somewhat working using a Partitioner. I have calculated the number of days between two dates and added them to the executionContext map. The reader is able read x many times, process it x many times but the writer is stuck in an infinite loop (still not viable from a debugging standpoint).</p>\n<p>Here is the job config, partitioner and reader coder:</p>\n<pre><code>public class DataLoadJobConfig {\n    public final JobBuilderFactory jobBuilderFactory;\n    public final StepBuilderFactory stepBuilderFactory;\n    \n    @Bean\n    public Job CustomerJob() {\n        return jobBuilderFactory\n                .get(&quot;customerJob&quot;)\n                .flow(partitioningStep())\n                .end()\n                .build();\n    }\n    \n    @Bean\n    public Step partitioningStep() {\n        return stepBuilderFactory\n                .get(&quot;partitioningStep&quot;)\n                .partitioner(&quot;partitioningStep&quot;, partitioner())\n                .partitionHandler(partitionHandler())\n                .build();\n                \n    }\n\n    private Partitioner partitioner() {\n        LocalDate startDate = LocalDate.now();\n        LocalDate endDate = LocalDate.now();\n        DatePartitioner datePartitioner = new DatePartitioner();\n        datePartitioner.setStartDate(startDate);\n        datePartitioner.setEndDate(endDate);\n        return datePartitioner;\n    }\n\n    private PartitionHandler partitionHandler() {\n        TaskExecutorPartitionHandler partitionHandler = new TaskExecutorPartitionHandler();\n        partitionHandler.setStep(slaveStep());\n        return partitionHandler;\n    }\n\n    private Step slaveStep() {\n        return stepBuilderFactory\n                .get(&quot;slaveStep&quot;)\n                .&lt;List&lt;TableAEntity&gt;, List&lt;TableBEntity&gt;&gt;chunk(1) // not sure what the chunk size would be as for each day the result size would be different\n                .reader(reader())\n                .processor(processor())\n                .writer(writer())\n                .build();\n    }\n\n    private ItemWriter&lt;? super List&lt;TableBEntity&gt;&gt; writer() {\n    }\n\n    private ItemProcessor&lt;? super List&lt;TableAEntity&gt;,? extends List&lt;TableBEntity&gt;&gt; processor() {\n    }\n\n    private ItemReader&lt;? extends List&lt;TableAEntity&gt;&gt; reader() {\n    }\n}\n</code></pre>\n<p>Custom Partitioner</p>\n<pre><code>public class DatePartitioner implements Partitioner {\n    private LocalDate startDate;\n    private LocalDate endDate;\n\n    public void setStartDate(LocalDate startDate) {\n        this.startDate = startDate;\n    }\n\n    public void setEndDate(LocalDate endDate) {\n        this.endDate = endDate;\n    }\n\n    @Override\n    public Map&lt;String, ExecutionContext&gt; partition(int gridSize) {\n        Map&lt;String, ExecutionContext&gt; executionContextMap = new HashMap&lt;&gt;();\n        LocalDate currentDate = startDate;\n        int i = 0;\n        while (!currentDate.equals(endDate)) {\n            ExecutionContext context = new ExecutionContext();\n            context.put(&quot;day&quot;, currentDate);\n            executionContextMap.put(&quot;partition_&quot; + i, context);\n            currentDate = currentDate.plusDays(1);\n            i++;\n        }\n        return executionContextMap;\n    }\n}\n</code></pre>\n<p>From an architectural point of view is dividing the dataset into day partitions, the correct approach? If it isn't is there any better way to approach this problem?\nOr is this approach even possible in Spring Batch? Does Spring batch support designing your custom data pipeline? (where I can keep readers parallel but writers sequential?).\nOr in the tasklet approach, how can I make spring handle the large amounts of data instead of me storing it manually in the stepExecutionContext?\nAlso in this case I'm thinking I don't need chunk size as its dynamic and depends on how many records I'm getting for a day. In this case how do I work around chunk size?</p>\n<p>If I'm thinking about this from a wrong perspective please educate me. Don't hesitate to be critical. Thank you!</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9918,"page":216,"page_size":100}
