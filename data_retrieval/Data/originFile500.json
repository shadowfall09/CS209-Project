{"items":[{"tags":["java","multithreading","keyword","volatile"],"answers":[{"comments":[{"owner":{"account_id":3633980,"reputation":668,"user_id":3029543,"accept_rate":80,"display_name":"ptkato"},"score":23,"creation_date":1431138754,"post_id":106641,"comment_id":48380574,"body_markdown":"Why is there both `volatile` and `synchronized` keywords?","body":"Why is there both <code>volatile</code> and <code>synchronized</code> keywords?"},{"owner":{"account_id":1809510,"reputation":350,"user_id":1645867,"display_name":"bskp"},"score":7,"creation_date":1474633573,"post_id":106641,"comment_id":66623091,"body_markdown":"The Wikipedia article on a Singleton Pattern has changed a lot since and doesn&#39;t feature said `volatile` example any longer. It can be found [in an archived version](https://en.wikipedia.org/w/index.php?title=Singleton_pattern&amp;oldid=214082674#Java_5_solution).","body":"The Wikipedia article on a Singleton Pattern has changed a lot since and doesn&#39;t feature said <code>volatile</code> example any longer. It can be found <a href=\"https://en.wikipedia.org/w/index.php?title=Singleton_pattern&amp;oldid=214082674#Java_5_solution\" rel=\"nofollow noreferrer\">in an archived version</a>."},{"owner":{"account_id":69386,"reputation":5102,"user_id":201891,"accept_rate":85,"display_name":"DavidS"},"score":4,"creation_date":1575400105,"post_id":106641,"comment_id":104551642,"body_markdown":"@ptkato Those two keywords serve completely different purposes, so the question doesn&#39;t make much sense as a comparison, although they are both related to concurrency. It&#39;s like saying &quot;Why are there both `void` and `public` keywords&quot;.","body":"@ptkato Those two keywords serve completely different purposes, so the question doesn&#39;t make much sense as a comparison, although they are both related to concurrency. It&#39;s like saying &quot;Why are there both <code>void</code> and <code>public</code> keywords&quot;."},{"owner":{"account_id":1599384,"reputation":1684,"user_id":1480755,"accept_rate":38,"display_name":"Aruman"},"score":0,"creation_date":1635284800,"post_id":106641,"comment_id":123255498,"body_markdown":"So... in a nutshell, `volatile` is kinda similar with `static` on class ? where multiple instances of a class can share the same variable/property.","body":"So... in a nutshell, <code>volatile</code> is kinda similar with <code>static</code> on class ? where multiple instances of a class can share the same variable/property."},{"owner":{"account_id":1458162,"reputation":848,"user_id":1373232,"accept_rate":53,"display_name":"Nom1fan"},"score":0,"creation_date":1655365431,"post_id":106641,"comment_id":128316613,"body_markdown":"@Aruman I don&#39;t think that&#39;s correct. A `static` variable might *also* have to be `volatile` in case there are multiple threads reading it, the two are unrelated.","body":"@Aruman I don&#39;t think that&#39;s correct. A <code>static</code> variable might <i>also</i> have to be <code>volatile</code> in case there are multiple threads reading it, the two are unrelated."}],"tags":[],"owner":{"account_id":3370,"reputation":7124,"user_id":4857,"accept_rate":96,"display_name":"Ande Turner"},"comment_count":5,"down_vote_count":4,"up_vote_count":224,"is_accepted":false,"score":220,"last_activity_date":1573999782,"creation_date":1221872368,"answer_id":106641,"question_id":106591,"body_markdown":"*“… the volatile modifier guarantees that any thread that reads a field will see the most recently written value.”* **- Josh Bloch**&lt;br&gt;&lt;br&gt;\r\nIf you are thinking about using `volatile`, read up on the package [`java.util.concurrent`][1] which deals with atomic behaviour.&lt;br&gt;&lt;br&gt;\r\nThe Wikipedia post on a [Singleton Pattern][2] shows volatile in use.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/package-summary.html\r\n  [2]: https://en.wikipedia.org/wiki/Singleton_pattern#Lazy_initialization","title":"What is the volatile keyword useful for?","body":"<p><em>“… the volatile modifier guarantees that any thread that reads a field will see the most recently written value.”</em> <strong>- Josh Bloch</strong><br><br>\nIf you are thinking about using <code>volatile</code>, read up on the package <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/package-summary.html\" rel=\"noreferrer\"><code>java.util.concurrent</code></a> which deals with atomic behaviour.<br><br>\nThe Wikipedia post on a <a href=\"https://en.wikipedia.org/wiki/Singleton_pattern#Lazy_initialization\" rel=\"noreferrer\">Singleton Pattern</a> shows volatile in use.</p>\n"},{"tags":[],"owner":{"account_id":5990,"reputation":26373,"user_id":9897,"accept_rate":50,"display_name":"dgvid"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1325860128,"creation_date":1221875975,"answer_id":106771,"question_id":106591,"body_markdown":"Absolutely, yes. (And not just in Java, but also in C#.) There are times when you need to get or set a value that is guaranteed to be an atomic operation on your given platform, an int or boolean, for example, but do not require the overhead of thread locking. The volatile keyword allows you to ensure that when you read the value that you get the _current_ value and not a cached value that was just made obsolete by a write on another thread.","title":"What is the volatile keyword useful for?","body":"<p>Absolutely, yes. (And not just in Java, but also in C#.) There are times when you need to get or set a value that is guaranteed to be an atomic operation on your given platform, an int or boolean, for example, but do not require the overhead of thread locking. The volatile keyword allows you to ensure that when you read the value that you get the <em>current</em> value and not a cached value that was just made obsolete by a write on another thread.</p>\n"},{"comments":[{"owner":{"account_id":1011299,"reputation":26793,"user_id":1023815,"display_name":"Adam Zalcman"},"score":159,"creation_date":1374150773,"post_id":106787,"comment_id":25833444,"body_markdown":"This answer is correct, but incomplete. It omits an important property of `volatile` that came with the new Java Memory Model defined in JSR 133: that when a thread reads a `volatile` variable it sees not only the value last written to it by some other thread, but also all other writes to other variables that were visible in that other thread at the time of the `volatile` write. See [this answer](http://stackoverflow.com/questions/8769570/volatile-piggyback-is-this-enough-for-visiblity/8769692#8769692) and [this reference](http://www.ibm.com/developerworks/library/j-jtp03304/#2.0).","body":"This answer is correct, but incomplete. It omits an important property of <code>volatile</code> that came with the new Java Memory Model defined in JSR 133: that when a thread reads a <code>volatile</code> variable it sees not only the value last written to it by some other thread, but also all other writes to other variables that were visible in that other thread at the time of the <code>volatile</code> write. See <a href=\"http://stackoverflow.com/questions/8769570/volatile-piggyback-is-this-enough-for-visiblity/8769692#8769692\">this answer</a> and <a href=\"http://www.ibm.com/developerworks/library/j-jtp03304/#2.0\" rel=\"nofollow noreferrer\">this reference</a>."},{"owner":{"account_id":3542561,"reputation":1343,"user_id":2959259,"accept_rate":91,"display_name":"Hungry Blue Dev"},"score":56,"creation_date":1393051418,"post_id":106787,"comment_id":33255755,"body_markdown":"For beginners, I&#39;d request you to demonstrate with some code (please?)","body":"For beginners, I&#39;d request you to demonstrate with some code (please?)"},{"owner":{"account_id":7913,"reputation":33220,"user_id":13940,"accept_rate":58,"display_name":"Greg Mattes"},"score":8,"creation_date":1393112233,"post_id":106787,"comment_id":33276231,"body_markdown":"The article linked in the question has code examples.","body":"The article linked in the question has code examples."},{"owner":{"account_id":1336023,"reputation":4615,"user_id":1278769,"accept_rate":42,"display_name":"Kris"},"score":0,"creation_date":1442598992,"post_id":106787,"comment_id":53162768,"body_markdown":"I think the link &#39;Hennessy &amp; Patterson&#39; is broken. And the link to &#39;the Java memory model&#39; actually leads to Oracle&#39;s Java Language Specification &#39;Chapter 17. Threads and Locks&#39;.","body":"I think the link &#39;Hennessy &amp; Patterson&#39; is broken. And the link to &#39;the Java memory model&#39; actually leads to Oracle&#39;s Java Language Specification &#39;Chapter 17. Threads and Locks&#39;."},{"owner":{"account_id":4378893,"reputation":967,"user_id":3571100,"display_name":"jordan"},"score":0,"creation_date":1444405407,"post_id":106787,"comment_id":53905323,"body_markdown":"@GregMattes, from https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html, it seems like volatile is not needed if the value is a reference field and is &quot;bool&quot;. So &quot;volatile&quot; may not even be required in the example you provided.","body":"@GregMattes, from <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency/&hellip;</a>, it seems like volatile is not needed if the value is a reference field and is &quot;bool&quot;. So &quot;volatile&quot; may not even be required in the example you provided."},{"owner":{"account_id":1019866,"reputation":9990,"user_id":1030527,"accept_rate":86,"display_name":"bernie"},"score":0,"creation_date":1473259627,"post_id":106787,"comment_id":66074078,"body_markdown":"@jordan From your link: &quot;However, [atomic read/write of bools] does not eliminate all need to synchronize atomic actions, because memory consistency errors are still possible. Using volatile variables reduces the risk of memory consistency errors, because any write to a volatile variable establishes a happens-before relationship with subsequent reads of that same variable.&quot;","body":"@jordan From your link: &quot;However, [atomic read/write of bools] does not eliminate all need to synchronize atomic actions, because memory consistency errors are still possible. Using volatile variables reduces the risk of memory consistency errors, because any write to a volatile variable establishes a happens-before relationship with subsequent reads of that same variable.&quot;"},{"owner":{"account_id":887284,"reputation":895,"user_id":926412,"accept_rate":60,"display_name":"fefrei"},"score":0,"creation_date":1498135978,"post_id":106787,"comment_id":76382751,"body_markdown":"The JLS does not actually guarantee that a write to a volatile variable immediately becomes visible to other threads. It claims `the Java Memory Model ensures that all threads see a consistent value for the variable` and references a section of the JMM, but this section only promises that `a write to a volatile variable v synchronizes-with all subsequent reads of v by any thread (where &quot;subsequent&quot; is defined according to the synchronization order).` This only guarantees what @AdamZalcman mentioned above.","body":"The JLS does not actually guarantee that a write to a volatile variable immediately becomes visible to other threads. It claims <code>the Java Memory Model ensures that all threads see a consistent value for the variable</code> and references a section of the JMM, but this section only promises that <code>a write to a volatile variable v synchronizes-with all subsequent reads of v by any thread (where &quot;subsequent&quot; is defined according to the synchronization order).</code> This only guarantees what @AdamZalcman mentioned above."},{"owner":{"account_id":1962130,"reputation":1626,"user_id":1763367,"accept_rate":60,"display_name":"monolith"},"score":0,"creation_date":1498505251,"post_id":106787,"comment_id":76515526,"body_markdown":"I read now in &quot;Head first design patterns&quot;, it is commonly used in Singleton design pattern where the unique object is defined as being volatile so multiple threads can see when the value changes. It is also used with double-checking pattern.","body":"I read now in &quot;Head first design patterns&quot;, it is commonly used in Singleton design pattern where the unique object is defined as being volatile so multiple threads can see when the value changes. It is also used with double-checking pattern."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1499240976,"post_id":106787,"comment_id":76815854,"body_markdown":"@wedran: that’s a contradiction in itself. If the value can change, it can’t be a singleton as there are at least two values, tho old and the new.","body":"@wedran: that’s a contradiction in itself. If the value can change, it can’t be a singleton as there are at least two values, tho old and the new."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1499241996,"post_id":106787,"comment_id":76816556,"body_markdown":"@fefrei: “immediately” is a colloquial term. Of course, that can’t be guaranteed when neither, execution timing nor thread scheduling algorithms, are actually specified. The only way for a program to find out whether a volatile read is subsequent to a particular volatile write, is by checking whether the seen value is the expected written one.","body":"@fefrei: “immediately” is a colloquial term. Of course, that can’t be guaranteed when neither, execution timing nor thread scheduling algorithms, are actually specified. The only way for a program to find out whether a volatile read is subsequent to a particular volatile write, is by checking whether the seen value is the expected written one."}],"tags":[],"owner":{"account_id":7913,"reputation":33220,"user_id":13940,"accept_rate":58,"display_name":"Greg Mattes"},"comment_count":10,"down_vote_count":1,"up_vote_count":865,"is_accepted":true,"score":864,"last_activity_date":1494488680,"creation_date":1221876591,"answer_id":106787,"question_id":106591,"body_markdown":"`volatile` has semantics for memory visibility. Basically, the value of a `volatile` field becomes visible to all readers (other threads in particular) after a write operation completes on it. Without `volatile`, readers could see some non-updated value.\r\n\r\nTo answer your question: Yes, I use a `volatile` variable to control whether some code continues a loop. The loop tests the `volatile` value and continues if it is `true`. The condition can be set to `false` by calling a &quot;stop&quot; method. The loop sees `false` and terminates when it tests the value after the stop method completes execution.\r\n\r\nThe book &quot;[Java Concurrency in Practice][1],&quot; which I highly recommend, gives a good explanation of `volatile`. This book is written by the same person who wrote the IBM article that is referenced in the question (in fact, he cites his book at the bottom of that article). My use of `volatile` is what his article calls the &quot;pattern 1 status flag.&quot;\r\n\r\nIf you want to learn more about how [`volatile`][2] works under the hood, read up on [the Java memory model][3]. If you want to go beyond that level, check out a good computer architecture book like [Hennessy &amp;amp; Patterson][4] and read about cache coherence and cache consistency.\r\n\r\n\r\n  [1]: http://jcip.net\r\n  [2]: http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.3.1.4\r\n  [3]: http://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html\r\n  [4]: https://www.elsevier.com/books/computer-architecture/hennessy/978-0-12-383872-8","title":"What is the volatile keyword useful for?","body":"<p><code>volatile</code> has semantics for memory visibility. Basically, the value of a <code>volatile</code> field becomes visible to all readers (other threads in particular) after a write operation completes on it. Without <code>volatile</code>, readers could see some non-updated value.</p>\n\n<p>To answer your question: Yes, I use a <code>volatile</code> variable to control whether some code continues a loop. The loop tests the <code>volatile</code> value and continues if it is <code>true</code>. The condition can be set to <code>false</code> by calling a \"stop\" method. The loop sees <code>false</code> and terminates when it tests the value after the stop method completes execution.</p>\n\n<p>The book \"<a href=\"http://jcip.net\" rel=\"noreferrer\">Java Concurrency in Practice</a>,\" which I highly recommend, gives a good explanation of <code>volatile</code>. This book is written by the same person who wrote the IBM article that is referenced in the question (in fact, he cites his book at the bottom of that article). My use of <code>volatile</code> is what his article calls the \"pattern 1 status flag.\"</p>\n\n<p>If you want to learn more about how <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.3.1.4\" rel=\"noreferrer\"><code>volatile</code></a> works under the hood, read up on <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html\" rel=\"noreferrer\">the Java memory model</a>. If you want to go beyond that level, check out a good computer architecture book like <a href=\"https://www.elsevier.com/books/computer-architecture/hennessy/978-0-12-383872-8\" rel=\"noreferrer\">Hennessy &amp; Patterson</a> and read about cache coherence and cache consistency.</p>\n"},{"tags":[],"owner":{"account_id":2241,"reputation":44197,"user_id":3093,"accept_rate":83,"display_name":"Dave L."},"comment_count":0,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1221883201,"creation_date":1221883201,"answer_id":107040,"question_id":106591,"body_markdown":"One common example for using `volatile` is to use a `volatile boolean` variable as a flag to terminate a thread.  If you&#39;ve started a thread, and you want to be able to safely interrupt it from a different thread, you can have the thread periodically check a flag.  To stop it, set the flag to true.  By making the flag `volatile`, you can ensure that the thread that is checking it will see it has been set the next time it checks it without having to even use a `synchronized` block.","title":"What is the volatile keyword useful for?","body":"<p>One common example for using <code>volatile</code> is to use a <code>volatile boolean</code> variable as a flag to terminate a thread.  If you've started a thread, and you want to be able to safely interrupt it from a different thread, you can have the thread periodically check a flag.  To stop it, set the flag to true.  By making the flag <code>volatile</code>, you can ensure that the thread that is checking it will see it has been set the next time it checks it without having to even use a <code>synchronized</code> block.</p>\n"},{"tags":[],"owner":{"account_id":6055,"reputation":14786,"user_id":10026,"accept_rate":68,"display_name":"ykaganovich"},"comment_count":0,"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1221884790,"creation_date":1221884790,"answer_id":107102,"question_id":106591,"body_markdown":"Yes, volatile must be used whenever you want a mutable variable to be accessed by multiple threads. It is not very common usecase because typically you need to perform more than a single atomic operation (e.g. check the variable state before modifying it), in which case you would use a synchronized block instead.","title":"What is the volatile keyword useful for?","body":"<p>Yes, volatile must be used whenever you want a mutable variable to be accessed by multiple threads. It is not very common usecase because typically you need to perform more than a single atomic operation (e.g. check the variable state before modifying it), in which case you would use a synchronized block instead.</p>\n"},{"tags":[],"owner":{"account_id":9900,"reputation":247,"user_id":18467,"display_name":"Rudi Adianto"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1341943364,"creation_date":1221894852,"answer_id":107490,"question_id":106591,"body_markdown":"You&#39;ll need to use &#39;volatile&#39; keyword, or &#39;synchronized&#39; and any other concurrency control tools and techniques you might have at your disposal if you are developing a multithreaded application. Example of such application is desktop apps.\r\n\r\nIf you are developing an application that would be deployed to application server (Tomcat, JBoss AS, Glassfish, etc) you don&#39;t have to handle concurrency control yourself as it already addressed by the application server. In fact, if I remembered correctly the Java EE standard prohibit any concurrency control in servlets and EJBs, since it is part of the &#39;infrastructure&#39; layer which you supposed to be freed from handling it. You only do concurrency control in such app if you&#39;re implementing singleton objects. This even already addressed if you knit your components using frameworkd like Spring.\r\n\r\nSo, in most cases of Java development where the application is a web application and using IoC framework like Spring or EJB, you wouldn&#39;t need to use &#39;volatile&#39;.\r\n","title":"What is the volatile keyword useful for?","body":"<p>You'll need to use 'volatile' keyword, or 'synchronized' and any other concurrency control tools and techniques you might have at your disposal if you are developing a multithreaded application. Example of such application is desktop apps.</p>\n\n<p>If you are developing an application that would be deployed to application server (Tomcat, JBoss AS, Glassfish, etc) you don't have to handle concurrency control yourself as it already addressed by the application server. In fact, if I remembered correctly the Java EE standard prohibit any concurrency control in servlets and EJBs, since it is part of the 'infrastructure' layer which you supposed to be freed from handling it. You only do concurrency control in such app if you're implementing singleton objects. This even already addressed if you knit your components using frameworkd like Spring.</p>\n\n<p>So, in most cases of Java development where the application is a web application and using IoC framework like Spring or EJB, you wouldn't need to use 'volatile'.</p>\n"},{"tags":[],"owner":{"account_id":7006,"reputation":7395,"user_id":11961,"accept_rate":62,"display_name":"MB."},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1221908868,"creation_date":1221908868,"answer_id":107907,"question_id":106591,"body_markdown":"Yes, I use it quite a lot - it can be very useful for multi-threaded code.  The article you pointed to is a good one.  Though there are two important things to bear in mind:\r\n\r\n 1. You should only use volatile if you\r\n    completely understand what it does\r\n    and how it differs to synchronized. \r\n    In many situations volatile appears,\r\n    on the surface, to be a simpler more\r\n    performant alternative to\r\n    synchronized, when often a better\r\n    understanding of volatile would make\r\n    clear that synchronized is the only\r\n    option that would work.\r\n 2. volatile doesn&#39;t actually work in a\r\n    lot of older JVMs, although\r\n    synchronized does.  I remember seeing a document that referenced the various levels of support in different JVMs but unfortunately I can&#39;t find it now.  Definitely look into it if you&#39;re using Java pre 1.5 or if you don&#39;t have control over the JVMs that your program will be running on.\r\n\r\n","title":"What is the volatile keyword useful for?","body":"<p>Yes, I use it quite a lot - it can be very useful for multi-threaded code.  The article you pointed to is a good one.  Though there are two important things to bear in mind:</p>\n\n<ol>\n<li>You should only use volatile if you\ncompletely understand what it does\nand how it differs to synchronized. \nIn many situations volatile appears,\non the surface, to be a simpler more\nperformant alternative to\nsynchronized, when often a better\nunderstanding of volatile would make\nclear that synchronized is the only\noption that would work.</li>\n<li>volatile doesn't actually work in a\nlot of older JVMs, although\nsynchronized does.  I remember seeing a document that referenced the various levels of support in different JVMs but unfortunately I can't find it now.  Definitely look into it if you're using Java pre 1.5 or if you don't have control over the JVMs that your program will be running on.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":1140757,"reputation":1122,"user_id":1124737,"accept_rate":86,"display_name":"Jori"},"score":2,"creation_date":1370503645,"post_id":130320,"comment_id":24485916,"body_markdown":"I wonder why that is even necessary. Isn&#39;t that only necessary if other threads have to react on the status change of this thread in such a way that the threads synchronization is at danger?","body":"I wonder why that is even necessary. Isn&#39;t that only necessary if other threads have to react on the status change of this thread in such a way that the threads synchronization is at danger?"},{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":34,"creation_date":1370544491,"post_id":130320,"comment_id":24509998,"body_markdown":"@Jori, you need volatile because the thread reading close in the while loop is different from the one that calls close().  Without volatile, the thread running the loop may never see the change to close.","body":"@Jori, you need volatile because the thread reading close in the while loop is different from the one that calls close().  Without volatile, the thread running the loop may never see the change to close."},{"owner":{"account_id":1471958,"reputation":576,"user_id":1383284,"accept_rate":40,"display_name":"Ricardo Belchior"},"score":1,"creation_date":1441290831,"post_id":130320,"comment_id":52627739,"body_markdown":"would you say there is an advantage between stopping a thread like that or using Thread#interrupt() and Thread#isInterrupted() methods ?","body":"would you say there is an advantage between stopping a thread like that or using Thread#interrupt() and Thread#isInterrupted() methods ?"},{"owner":{"account_id":2666377,"reputation":3513,"user_id":2304737,"accept_rate":50,"display_name":"mr5"},"score":0,"creation_date":1447213442,"post_id":130320,"comment_id":55061666,"body_markdown":"Why would you name your variable the same as your function? In my case, it causes a compilation error. Also, extending `Thread` is not the [recommended way](http://stackoverflow.com/questions/541487/implements-runnable-vs-extends-thread) although this is just an example of how `volatile` keyword works.","body":"Why would you name your variable the same as your function? In my case, it causes a compilation error. Also, extending <code>Thread</code> is not the <a href=\"http://stackoverflow.com/questions/541487/implements-runnable-vs-extends-thread\">recommended way</a> although this is just an example of how <code>volatile</code> keyword works."},{"owner":{"account_id":301489,"reputation":54254,"user_id":609251,"accept_rate":82,"display_name":"aroth"},"score":4,"creation_date":1456061302,"post_id":130320,"comment_id":58761985,"body_markdown":"@Pyrolistical - Have you observed the thread _never_ seeing the change in practice?  Or can you extend the example to reliably trigger that issue?  I&#39;m curious because I know I&#39;ve used (and seen others using) code that&#39;s basically identical to the example but without the `volatile` keyword, and it always seems to work fine.","body":"@Pyrolistical - Have you observed the thread <i>never</i> seeing the change in practice?  Or can you extend the example to reliably trigger that issue?  I&#39;m curious because I know I&#39;ve used (and seen others using) code that&#39;s basically identical to the example but without the <code>volatile</code> keyword, and it always seems to work fine."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1476787190,"post_id":130320,"comment_id":67483407,"body_markdown":"@aroth: with today’s JVMs, you can observe that in practice, even with the simplest examples, however, you can’t *reliably* reproduce this behavior. With more complex applications, you sometimes have other actions with memory visibility guarantees within you code which make it happen to work, which is especially dangerous as you don’t know why it works and a simple, apparently unrelated change in your code can break your application…","body":"@aroth: with today’s JVMs, you can observe that in practice, even with the simplest examples, however, you can’t <i>reliably</i> reproduce this behavior. With more complex applications, you sometimes have other actions with memory visibility guarantees within you code which make it happen to work, which is especially dangerous as you don’t know why it works and a simple, apparently unrelated change in your code can break your application…"},{"owner":{"account_id":5776751,"reputation":385,"user_id":4558619,"accept_rate":88,"display_name":"Adrian Liu"},"score":0,"creation_date":1496894102,"post_id":130320,"comment_id":75850766,"body_markdown":"I think this pattern is only good if the work to be done in the loop is not comsumed from other publisher threads.  Other wise to close the publisher as well it is often needed to use locks.  Check the log writer example in the book: java concurrency in practice","body":"I think this pattern is only good if the work to be done in the loop is not comsumed from other publisher threads.  Other wise to close the publisher as well it is often needed to use locks.  Check the log writer example in the book: java concurrency in practice"}],"tags":[],"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"comment_count":7,"down_vote_count":1,"up_vote_count":68,"is_accepted":false,"score":67,"last_activity_date":1583901548,"creation_date":1222295379,"answer_id":130320,"question_id":106591,"body_markdown":"`volatile` is very useful to stop threads.\r\n\r\nNot that you should be writing your own threads, Java 1.6 has a lot of nice thread pools.  But if you are sure you need a thread, you&#39;ll need to know how to stop it.\r\n\r\nThe pattern I use for threads is:\r\n\r\n    public class Foo extends Thread {\r\n\r\n      private volatile boolean close = false;\r\n\r\n      public void run() {\r\n        while(!close) {\r\n          // do work\r\n        }\r\n      }\r\n      public void close() {\r\n        close = true;\r\n        // interrupt here if needed\r\n      }\r\n    }\r\n\r\nIn the above code segment, the thread reading `close` in the while loop is different from the one that calls `close()`. Without volatile, the thread running the loop may never see the change to close.\r\n\r\nNotice how there&#39;s no need for synchronization","title":"What is the volatile keyword useful for?","body":"<p><code>volatile</code> is very useful to stop threads.</p>\n\n<p>Not that you should be writing your own threads, Java 1.6 has a lot of nice thread pools.  But if you are sure you need a thread, you'll need to know how to stop it.</p>\n\n<p>The pattern I use for threads is:</p>\n\n<pre><code>public class Foo extends Thread {\n\n  private volatile boolean close = false;\n\n  public void run() {\n    while(!close) {\n      // do work\n    }\n  }\n  public void close() {\n    close = true;\n    // interrupt here if needed\n  }\n}\n</code></pre>\n\n<p>In the above code segment, the thread reading <code>close</code> in the while loop is different from the one that calls <code>close()</code>. Without volatile, the thread running the loop may never see the change to close.</p>\n\n<p>Notice how there's no need for synchronization</p>\n"},{"tags":[],"owner":{"account_id":2318227,"reputation":959,"user_id":2034733,"accept_rate":69,"display_name":"fatih tekin"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1471532774,"creation_date":1362258463,"answer_id":15179454,"question_id":106591,"body_markdown":"`volatile` only guarantees that all threads, even themselves, are incrementing. For example: a counter sees the same face of the variable at the same time. It is not used instead of synchronized or atomic or other stuff, it completely makes the reads synchronized. Please do not compare it with other java keywords. As the example shows below volatile variable operations are also atomic they fail or succeed at once.\r\n    \r\n    \r\n    package io.netty.example.telnet;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class Main {\r\n    \t\r\n    \tpublic static volatile  int a = 0;\r\n    \tpublic static void main(String args[]) throws InterruptedException{\r\n    \t\t\r\n    \t\tList&lt;Thread&gt; list = new  ArrayList&lt;Thread&gt;();\r\n    \t\tfor(int i = 0 ; i&lt;11 ;i++){\r\n    \t\t\tlist.add(new Pojo());\r\n    \t\t}\r\n    \t\t\r\n    \t\tfor (Thread thread : list) {\r\n    \t\t\tthread.start();\r\n    \t\t}\r\n    \r\n    \t\tThread.sleep(20000);\r\n    \t\tSystem.out.println(a);\r\n    \t}\r\n    }\r\n    class Pojo extends Thread{\r\n    \tint a = 10001;\r\n    \tpublic void run() {\r\n    \t\twhile(a--&gt;0){\r\n    \t\t\ttry {\r\n    \t\t\t\tThread.sleep(1);\r\n    \t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \t\t\tMain.a++;\r\n    \t\t\tSystem.out.println(&quot;a = &quot;+Main.a);\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n   \r\n\r\nEven you put volatile or not results will always differ. But if you use AtomicInteger as below results will be always same. This is same with synchronized also.\r\n    \r\n        package io.netty.example.telnet;\r\n        \r\n        import java.util.ArrayList;\r\n        import java.util.List;\r\n        import java.util.concurrent.atomic.AtomicInteger;\r\n        \r\n        public class Main {\r\n        \t\r\n        \tpublic static volatile  AtomicInteger a = new AtomicInteger(0);\r\n        \tpublic static void main(String args[]) throws InterruptedException{\r\n        \t\t\r\n        \t\tList&lt;Thread&gt; list = new  ArrayList&lt;Thread&gt;();\r\n        \t\tfor(int i = 0 ; i&lt;11 ;i++){\r\n        \t\t\tlist.add(new Pojo());\r\n        \t\t}\r\n        \t\t\r\n        \t\tfor (Thread thread : list) {\r\n        \t\t\tthread.start();\r\n        \t\t}\r\n        \r\n        \t\tThread.sleep(20000);\r\n        \t\tSystem.out.println(a.get());\r\n        \r\n        \t}\r\n        }\r\n        class Pojo extends Thread{\r\n        \tint a = 10001;\r\n        \tpublic void run() {\r\n        \t\twhile(a--&gt;0){\r\n        \t\t\ttry {\r\n        \t\t\t\tThread.sleep(1);\r\n        \t\t\t} catch (InterruptedException e) {\r\n        \t\t\t\te.printStackTrace();\r\n        \t\t\t}\r\n        \t\t\tMain.a.incrementAndGet();\r\n        \t\t\tSystem.out.println(&quot;a = &quot;+Main.a);\r\n        \t\t}\r\n        \t}\r\n        }\r\n\r\n","title":"What is the volatile keyword useful for?","body":"<p><code>volatile</code> only guarantees that all threads, even themselves, are incrementing. For example: a counter sees the same face of the variable at the same time. It is not used instead of synchronized or atomic or other stuff, it completely makes the reads synchronized. Please do not compare it with other java keywords. As the example shows below volatile variable operations are also atomic they fail or succeed at once.</p>\n\n<pre><code>package io.netty.example.telnet;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class Main {\n\n    public static volatile  int a = 0;\n    public static void main(String args[]) throws InterruptedException{\n\n        List&lt;Thread&gt; list = new  ArrayList&lt;Thread&gt;();\n        for(int i = 0 ; i&lt;11 ;i++){\n            list.add(new Pojo());\n        }\n\n        for (Thread thread : list) {\n            thread.start();\n        }\n\n        Thread.sleep(20000);\n        System.out.println(a);\n    }\n}\nclass Pojo extends Thread{\n    int a = 10001;\n    public void run() {\n        while(a--&gt;0){\n            try {\n                Thread.sleep(1);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n            Main.a++;\n            System.out.println(\"a = \"+Main.a);\n        }\n    }\n}\n</code></pre>\n\n<p>Even you put volatile or not results will always differ. But if you use AtomicInteger as below results will be always same. This is same with synchronized also.</p>\n\n<pre><code>    package io.netty.example.telnet;\n\n    import java.util.ArrayList;\n    import java.util.List;\n    import java.util.concurrent.atomic.AtomicInteger;\n\n    public class Main {\n\n        public static volatile  AtomicInteger a = new AtomicInteger(0);\n        public static void main(String args[]) throws InterruptedException{\n\n            List&lt;Thread&gt; list = new  ArrayList&lt;Thread&gt;();\n            for(int i = 0 ; i&lt;11 ;i++){\n                list.add(new Pojo());\n            }\n\n            for (Thread thread : list) {\n                thread.start();\n            }\n\n            Thread.sleep(20000);\n            System.out.println(a.get());\n\n        }\n    }\n    class Pojo extends Thread{\n        int a = 10001;\n        public void run() {\n            while(a--&gt;0){\n                try {\n                    Thread.sleep(1);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                Main.a.incrementAndGet();\n                System.out.println(\"a = \"+Main.a);\n            }\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":0,"creation_date":1572027166,"post_id":22009557,"comment_id":103446000,"body_markdown":"The whole #2 section seems very confused, it is conflating lost notifications, spurious wakeups, and memory visibility issues. Also if all usages of the flag are in synchronized then volatile is redundant. I think i get your point but spurious wakeup is not the correct term. Please clarify.","body":"The whole #2 section seems very confused, it is conflating lost notifications, spurious wakeups, and memory visibility issues. Also if all usages of the flag are in synchronized then volatile is redundant. I think i get your point but spurious wakeup is not the correct term. Please clarify."}],"tags":[],"owner":{"account_id":2784842,"reputation":67281,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"comment_count":1,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1569948351,"creation_date":1393319847,"answer_id":22009557,"question_id":106591,"body_markdown":"In my opinion, two important scenarios other than stopping thread in which volatile keyword is used are:\r\n\r\n 1. [Double-checked locking mechanism][1]. Used often in Singleton design\r\n    pattern. In this the **singleton object needs to be declared volatile**.\r\n 2. [Spurious Wakeups][2]. Thread may sometimes wake up from wait call even if no notify call has been issued. This behavior is called spurious wakeup. This can be countered by using a conditional variable (boolean flag). Put the wait() call in a while loop as long as the flag is true. So if thread wakes up from wait call due to any reasons other than Notify/NotifyAll then it encounters flag is still true and hence calls wait again. Prior to calling notify set this flag to true. In this case the **boolean flag is declared as volatile**.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Double-checked_locking\r\n  [2]: http://tutorials.jenkov.com/java-concurrency/thread-signaling.html#spuriouswakeups","title":"What is the volatile keyword useful for?","body":"<p>In my opinion, two important scenarios other than stopping thread in which volatile keyword is used are:</p>\n\n<ol>\n<li><a href=\"http://en.wikipedia.org/wiki/Double-checked_locking\" rel=\"nofollow noreferrer\">Double-checked locking mechanism</a>. Used often in Singleton design\npattern. In this the <strong>singleton object needs to be declared volatile</strong>.</li>\n<li><a href=\"http://tutorials.jenkov.com/java-concurrency/thread-signaling.html#spuriouswakeups\" rel=\"nofollow noreferrer\">Spurious Wakeups</a>. Thread may sometimes wake up from wait call even if no notify call has been issued. This behavior is called spurious wakeup. This can be countered by using a conditional variable (boolean flag). Put the wait() call in a while loop as long as the flag is true. So if thread wakes up from wait call due to any reasons other than Notify/NotifyAll then it encounters flag is still true and hence calls wait again. Prior to calling notify set this flag to true. In this case the <strong>boolean flag is declared as volatile</strong>.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3779710,"reputation":352,"user_id":3139543,"accept_rate":60,"display_name":"tstuber"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1407774432,"creation_date":1407774432,"answer_id":25247983,"question_id":106591,"body_markdown":"Every thread accessing a volatile field will read its current value before continuing, instead of (potentially) using a cached value.\r\n\r\nOnly member variable can be volatile or transient.","title":"What is the volatile keyword useful for?","body":"<p>Every thread accessing a volatile field will read its current value before continuing, instead of (potentially) using a cached value.</p>\n\n<p>Only member variable can be volatile or transient.</p>\n"},{"comments":[{"owner":{"account_id":6374619,"reputation":3321,"user_id":4946013,"display_name":"Kai Wang"},"score":0,"creation_date":1491228626,"post_id":28457295,"comment_id":73446826,"body_markdown":"To make it even more clearer, there is NO NEED to set a boolean volatile, because the read and write of a boolean IS ALREADY atomic.","body":"To make it even more clearer, there is NO NEED to set a boolean volatile, because the read and write of a boolean IS ALREADY atomic."},{"owner":{"account_id":305757,"reputation":1584,"user_id":5851520,"accept_rate":100,"display_name":"SusanW"},"score":6,"creation_date":1497616046,"post_id":28457295,"comment_id":76166116,"body_markdown":"@KaiWang you don&#39;t need to use volatile on booleans for atomicity purposes. But you certainly might for visibility reasons. Is that what you meant to say?","body":"@KaiWang you don&#39;t need to use volatile on booleans for atomicity purposes. But you certainly might for visibility reasons. Is that what you meant to say?"}],"tags":[],"owner":{"account_id":5000597,"reputation":161,"user_id":4019758,"display_name":"Donatello Boccaforno"},"comment_count":2,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1423666289,"creation_date":1423666289,"answer_id":28457295,"question_id":106591,"body_markdown":"No one has mentioned the treatment of read and write operation for long and double variable type. Reads and writes are atomic operations for reference variables and for most primitive variables, except for long and double variable types, which must use the volatile keyword to be atomic operations. [@link][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.7","title":"What is the volatile keyword useful for?","body":"<p>No one has mentioned the treatment of read and write operation for long and double variable type. Reads and writes are atomic operations for reference variables and for most primitive variables, except for long and double variable types, which must use the volatile keyword to be atomic operations. <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.7\" rel=\"noreferrer\">@link</a></p>\n"},{"comments":[{"owner":{"account_id":1415841,"reputation":4086,"user_id":1341535,"accept_rate":78,"display_name":"Vsevolod Golovanov"},"score":2,"creation_date":1495646148,"post_id":34364511,"comment_id":75346007,"body_markdown":"&quot;The fail-fast iterators are typically implemented using a volatile counter&quot; - no longer the case, too costly: http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6625725","body":"&quot;The fail-fast iterators are typically implemented using a volatile counter&quot; - no longer the case, too costly: <a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6625725\" rel=\"nofollow noreferrer\">bugs.java.com/bugdatabase/view_bug.do?bug_id=6625725</a>"},{"owner":{"account_id":447109,"reputation":2439,"user_id":840546,"accept_rate":66,"display_name":"Dexters"},"score":0,"creation_date":1511644731,"post_id":34364511,"comment_id":81936543,"body_markdown":"are the double checking for _instance safe? i thought they are not safe even with volatile","body":"are the double checking for _instance safe? i thought they are not safe even with volatile"},{"owner":{"account_id":5226191,"reputation":2965,"user_id":4178170,"accept_rate":55,"display_name":"Humoyun Ahmad"},"score":1,"creation_date":1513737053,"post_id":34364511,"comment_id":82762804,"body_markdown":"&quot; which will instruct JVM threads to read value of volatile variable from main memory and don’t cache it locally.&quot; good point","body":"&quot; which will instruct JVM threads to read value of volatile variable from main memory and don’t cache it locally.&quot; good point"},{"owner":{"account_id":3019457,"reputation":3814,"user_id":2560836,"accept_rate":80,"display_name":"Chris311"},"score":2,"creation_date":1519637016,"post_id":34364511,"comment_id":84974658,"body_markdown":"For thread-safety one could go with `private static final Singleton _instance;` as well.","body":"For thread-safety one could go with <code>private static final Singleton _instance;</code> as well."},{"owner":{"account_id":11838786,"reputation":810,"user_id":8663273,"display_name":"Li-Tian"},"score":0,"creation_date":1602945643,"post_id":34364511,"comment_id":113882812,"body_markdown":"@Chris311， sure,  the static final field, it&#39;s thread safe.","body":"@Chris311， sure,  the static final field, it&#39;s thread safe."},{"owner":{"account_id":914346,"reputation":1030,"user_id":947488,"display_name":"Stefan Reich"},"score":0,"creation_date":1626402709,"post_id":34364511,"comment_id":120889136,"body_markdown":"&quot;and just after creation, the CPU corrupts&quot; - I&#39;m sorry, what are you talking about here? One CPU core suddenly &quot;corrupts&quot;? Has that ever happened to you?","body":"&quot;and just after creation, the CPU corrupts&quot; - I&#39;m sorry, what are you talking about here? One CPU core suddenly &quot;corrupts&quot;? Has that ever happened to you?"},{"owner":{"account_id":10595597,"reputation":179,"user_id":7804439,"display_name":"Jw C"},"score":0,"creation_date":1658041990,"post_id":34364511,"comment_id":128949513,"body_markdown":"The figure is out-of-date to some extent. Since Java 7, there is no **working memory** in JVM at all.","body":"The figure is out-of-date to some extent. Since Java 7, there is no <b>working memory</b> in JVM at all."}],"tags":[],"owner":{"account_id":1875874,"reputation":71921,"user_id":1697099,"accept_rate":100,"display_name":"Premraj"},"comment_count":7,"down_vote_count":3,"up_vote_count":195,"is_accepted":false,"score":192,"last_activity_date":1656437932,"creation_date":1450475566,"answer_id":34364511,"question_id":106591,"body_markdown":"**Volatile**(vɒlətʌɪl):  Easily evaporated at normal temperatures   \r\n\r\n**Important point about `volatile`:** \r\n\r\n 1. Synchronization in Java is possible by using Java keywords `synchronized` and `volatile` and locks.\r\n 2. In Java, we can not have `synchronized` variable. Using `synchronized` keyword with a variable is illegal and will result in compilation error. Instead of using the `synchronized` variable in Java, you can use the java `volatile` variable, which will instruct JVM threads to read the value of `volatile` variable from main memory and don’t cache it locally.\r\n 3. If a variable is not shared between multiple threads then there is no need to use the `volatile` keyword.\r\n\r\n[source][1]\r\n\r\n**Example usage of `volatile`:**\r\n\r\n    public class Singleton {\r\n    \tprivate static volatile Singleton _instance; // volatile variable\r\n    \tpublic static Singleton getInstance() {\r\n    \t\tif (_instance == null) {\r\n    \t\t\tsynchronized (Singleton.class) {\r\n    \t\t\t\tif (_instance == null)\r\n    \t\t\t\t\t_instance = new Singleton();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn _instance;\r\n    \t}\r\n    }\r\n\r\nWe are creating instance lazily at the time the first request comes.\r\n\r\nIf we do not make the `_instance` variable `volatile` then the Thread which is creating the instance of `Singleton` is not able to communicate to the other thread. So if Thread A is creating Singleton instance and just after creation, the CPU corrupts etc, all other threads will not be able to see the value of `_instance` as not null and they will believe it is still assigned null.  \r\n\r\nWhy does this happen? Because reader threads are not doing any locking and until the writer thread comes out of a synchronized block, the memory will not be synchronized and value of `_instance` will not be updated in main memory. With the Volatile keyword in Java, this is handled by Java itself and such updates will be visible by all reader threads.  \r\n\r\n&gt;**Conclusion**: `volatile` keyword is also used to communicate the content of memory between threads.  \r\n\r\n**Example usage of without volatile:**\r\n\r\n    public class Singleton {    \r\n        private static Singleton _instance;   //without volatile variable\r\n        public static Singleton getInstance() {   \r\n            if (_instance == null) {  \r\n                synchronized(Singleton.class) {  \r\n                    if (_instance == null) \r\n                        _instance = new Singleton(); \r\n                } \r\n            }\r\n            return _instance;  \r\n        }\r\n    }\r\n\r\nThe code above is not thread-safe. Although it checks the value of instance once again within the synchronized block (for performance reasons), the JIT compiler can rearrange the bytecode in a way that the reference to the instance is set before the constructor has finished its execution. This means the method getInstance() returns an object that may not have been initialized completely. To make the code thread-safe, the keyword volatile can be used since Java 5 for the instance variable. Variables that are marked as volatile get only visible to other threads once the constructor of the object has finished its execution completely.  \r\n[Source][2]\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n**`volatile` usage in Java**:\r\n\r\nThe fail-fast iterators are *typically* implemented using a `volatile` counter on the list object.\r\n\r\n  - When the list is updated, the counter is incremented.  \r\n  - When an `Iterator` is created, the current value of the counter is embedded in the `Iterator` object.\r\n  - When an `Iterator` operation is performed, the method compares the two counter values and throws a `ConcurrentModificationException` if they are different.\r\n\r\nThe implementation of fail-safe iterators is typically light-weight.  They typically rely on properties of the specific list implementation&#39;s data structures.  There is no general pattern.   \r\n\r\n\r\n  [1]: http://javarevisited.blogspot.sg/2011/06/volatile-keyword-java-example-tutorial.html\r\n  [2]: http://www.javacodegeeks.com/2014/11/multithreading-concurrency-interview-questions-answers.html#36\r\n  [3]: http://i.stack.imgur.com/bgHrU.png","title":"What is the volatile keyword useful for?","body":"<p><strong>Volatile</strong>(vɒlətʌɪl):  Easily evaporated at normal temperatures</p>\n<p><strong>Important point about <code>volatile</code>:</strong></p>\n<ol>\n<li>Synchronization in Java is possible by using Java keywords <code>synchronized</code> and <code>volatile</code> and locks.</li>\n<li>In Java, we can not have <code>synchronized</code> variable. Using <code>synchronized</code> keyword with a variable is illegal and will result in compilation error. Instead of using the <code>synchronized</code> variable in Java, you can use the java <code>volatile</code> variable, which will instruct JVM threads to read the value of <code>volatile</code> variable from main memory and don’t cache it locally.</li>\n<li>If a variable is not shared between multiple threads then there is no need to use the <code>volatile</code> keyword.</li>\n</ol>\n<p><a href=\"http://javarevisited.blogspot.sg/2011/06/volatile-keyword-java-example-tutorial.html\" rel=\"noreferrer\">source</a></p>\n<p><strong>Example usage of <code>volatile</code>:</strong></p>\n<pre><code>public class Singleton {\n    private static volatile Singleton _instance; // volatile variable\n    public static Singleton getInstance() {\n        if (_instance == null) {\n            synchronized (Singleton.class) {\n                if (_instance == null)\n                    _instance = new Singleton();\n            }\n        }\n        return _instance;\n    }\n}\n</code></pre>\n<p>We are creating instance lazily at the time the first request comes.</p>\n<p>If we do not make the <code>_instance</code> variable <code>volatile</code> then the Thread which is creating the instance of <code>Singleton</code> is not able to communicate to the other thread. So if Thread A is creating Singleton instance and just after creation, the CPU corrupts etc, all other threads will not be able to see the value of <code>_instance</code> as not null and they will believe it is still assigned null.</p>\n<p>Why does this happen? Because reader threads are not doing any locking and until the writer thread comes out of a synchronized block, the memory will not be synchronized and value of <code>_instance</code> will not be updated in main memory. With the Volatile keyword in Java, this is handled by Java itself and such updates will be visible by all reader threads.</p>\n<blockquote>\n<p><strong>Conclusion</strong>: <code>volatile</code> keyword is also used to communicate the content of memory between threads.</p>\n</blockquote>\n<p><strong>Example usage of without volatile:</strong></p>\n<pre><code>public class Singleton {    \n    private static Singleton _instance;   //without volatile variable\n    public static Singleton getInstance() {   \n        if (_instance == null) {  \n            synchronized(Singleton.class) {  \n                if (_instance == null) \n                    _instance = new Singleton(); \n            } \n        }\n        return _instance;  \n    }\n}\n</code></pre>\n<p>The code above is not thread-safe. Although it checks the value of instance once again within the synchronized block (for performance reasons), the JIT compiler can rearrange the bytecode in a way that the reference to the instance is set before the constructor has finished its execution. This means the method getInstance() returns an object that may not have been initialized completely. To make the code thread-safe, the keyword volatile can be used since Java 5 for the instance variable. Variables that are marked as volatile get only visible to other threads once the constructor of the object has finished its execution completely.<br />\n<a href=\"http://www.javacodegeeks.com/2014/11/multithreading-concurrency-interview-questions-answers.html#36\" rel=\"noreferrer\">Source</a></p>\n<p><a href=\"https://i.stack.imgur.com/bgHrU.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bgHrU.png\" alt=\"enter image description here\" /></a></p>\n<p><strong><code>volatile</code> usage in Java</strong>:</p>\n<p>The fail-fast iterators are <em>typically</em> implemented using a <code>volatile</code> counter on the list object.</p>\n<ul>\n<li>When the list is updated, the counter is incremented.</li>\n<li>When an <code>Iterator</code> is created, the current value of the counter is embedded in the <code>Iterator</code> object.</li>\n<li>When an <code>Iterator</code> operation is performed, the method compares the two counter values and throws a <code>ConcurrentModificationException</code> if they are different.</li>\n</ul>\n<p>The implementation of fail-safe iterators is typically light-weight.  They typically rely on properties of the specific list implementation's data structures.  There is no general pattern.</p>\n"},{"tags":[],"owner":{"account_id":5440121,"reputation":1551,"user_id":4537618,"accept_rate":100,"display_name":"Java Main"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1450975281,"creation_date":1450975281,"answer_id":34455651,"question_id":106591,"body_markdown":"The     volatile key when used with a variable, will make sure that threads reading this variable will see the same value . Now if you have multiple threads reading and writing to a variable, making the variable volatile will not be enough and data will be corrupted . Image threads have read the same value but each one has done some chages (say incremented a counter) , when writing back to the memory, data integrity is violated . That is why it is necessary to make the varible synchronized (diffrent ways are possible)\r\n\r\nIf the changes are done by 1 thread and the others need just to read this value, the volatile will be suitable.","title":"What is the volatile keyword useful for?","body":"<p>The     volatile key when used with a variable, will make sure that threads reading this variable will see the same value . Now if you have multiple threads reading and writing to a variable, making the variable volatile will not be enough and data will be corrupted . Image threads have read the same value but each one has done some chages (say incremented a counter) , when writing back to the memory, data integrity is violated . That is why it is necessary to make the varible synchronized (diffrent ways are possible)</p>\n\n<p>If the changes are done by 1 thread and the others need just to read this value, the volatile will be suitable.</p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1462800274,"creation_date":1462800274,"answer_id":37116960,"question_id":106591,"body_markdown":"From oracle documentation [page][1], the need for volatile variable arises to fix memory consistency issues:\r\n\r\n&gt; Using volatile variables reduces the risk of memory consistency errors, because any write to a volatile variable establishes a happens-before relationship with subsequent reads of that same variable. \r\n\r\nThis means that changes to a `volatile` variable are always visible to other threads. It also means that when a thread reads a volatile variable, it sees not just the latest change to the `volatile`, but also the side effects of the code that led up the change.\r\n\r\nAs explained in `Peter Parker` answer, in absence of `volatile` modifier, each thread&#39;s stack may have their own copy of variable. By making the variable as `volatile`, memory consistency issues have been fixed. \r\n\r\nHave a look at [jenkov][2] tutorial page for better understanding. \r\n\r\nHave a look at related SE question for some more details on volatile &amp; use cases to use volatile:\r\n\r\nhttps://stackoverflow.com/questions/3519664/difference-between-volatile-and-synchronized-in-java/\r\n\r\n\r\nOne practical use case:\r\n\r\nYou have many threads, which need to print current time in a particular format for example : `java.text.SimpleDateFormat(&quot;HH-mm-ss&quot;)`. Yon can have one class, which converts current time into `SimpleDateFormat` and updated the variable for every one second. All other threads can simply use this volatile variable to print current time in log files.  \r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html\r\n  [2]: http://tutorials.jenkov.com/java-concurrency/volatile.html","title":"What is the volatile keyword useful for?","body":"<p>From oracle documentation <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html\" rel=\"nofollow noreferrer\">page</a>, the need for volatile variable arises to fix memory consistency issues:</p>\n\n<blockquote>\n  <p>Using volatile variables reduces the risk of memory consistency errors, because any write to a volatile variable establishes a happens-before relationship with subsequent reads of that same variable. </p>\n</blockquote>\n\n<p>This means that changes to a <code>volatile</code> variable are always visible to other threads. It also means that when a thread reads a volatile variable, it sees not just the latest change to the <code>volatile</code>, but also the side effects of the code that led up the change.</p>\n\n<p>As explained in <code>Peter Parker</code> answer, in absence of <code>volatile</code> modifier, each thread's stack may have their own copy of variable. By making the variable as <code>volatile</code>, memory consistency issues have been fixed. </p>\n\n<p>Have a look at <a href=\"http://tutorials.jenkov.com/java-concurrency/volatile.html\" rel=\"nofollow noreferrer\">jenkov</a> tutorial page for better understanding. </p>\n\n<p>Have a look at related SE question for some more details on volatile &amp; use cases to use volatile:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3519664/difference-between-volatile-and-synchronized-in-java/\">Difference between volatile and synchronized in Java</a></p>\n\n<p>One practical use case:</p>\n\n<p>You have many threads, which need to print current time in a particular format for example : <code>java.text.SimpleDateFormat(\"HH-mm-ss\")</code>. Yon can have one class, which converts current time into <code>SimpleDateFormat</code> and updated the variable for every one second. All other threads can simply use this volatile variable to print current time in log files.  </p>\n"},{"tags":[],"owner":{"account_id":7950684,"reputation":492,"user_id":6001605,"display_name":"Neha Vari"},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1517921826,"creation_date":1467976097,"answer_id":38265184,"question_id":106591,"body_markdown":"Volatile Variables are light-weight synchronization. When visibility of latest data among all threads is requirement and atomicity can be compromised , in such situations Volatile Variables must be preferred. Read on volatile variables always return most recent write done by any thread since they are neither cached in registers nor in caches where other processors can not see. Volatile is Lock-Free. I use volatile, when scenario meets criteria as mentioned above. ","title":"What is the volatile keyword useful for?","body":"<p>Volatile Variables are light-weight synchronization. When visibility of latest data among all threads is requirement and atomicity can be compromised , in such situations Volatile Variables must be preferred. Read on volatile variables always return most recent write done by any thread since they are neither cached in registers nor in caches where other processors can not see. Volatile is Lock-Free. I use volatile, when scenario meets criteria as mentioned above. </p>\n"},{"tags":[],"owner":{"account_id":1468909,"reputation":4795,"user_id":1380968,"display_name":"Mohan"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1488444177,"creation_date":1488444177,"answer_id":42550536,"question_id":106591,"body_markdown":"There are two different uses of volatile keyword.\r\n\r\n 1. Prevents JVM from reading values from register (assume as cache), and forces its value to be read from memory.\r\n 2. Reduces the risk of memory in-consistency errors.\r\n\r\n&gt; Prevents JVM from reading values in register, and forces its\r\n&gt; value to be read from memory.\r\n\r\nA *busy flag* is used to prevent a thread from continuing while the device is busy and the flag is not protected by a lock:\r\n\r\n    while (busy) {\r\n        /* do something else */\r\n    }\r\nThe testing thread will continue when another thread turns off the *busy flag*:\r\n\r\n    busy = 0;\r\nHowever, since busy is accessed frequently in the testing thread, the JVM may optimize the test by placing the value of busy in a register, then test the contents of the register without reading the value of busy in memory before every test. The testing thread would never see busy change and the other thread would only change the value of busy in memory, resulting in deadlock. Declaring the *busy flag* as volatile forces its value to be read before each test.\r\n\r\n\r\n\r\n\r\n&gt; Reduces the risk of memory consistency errors.\r\n\r\nUsing volatile variables reduces the risk of **memory consistency errors**, because any write to a volatile variable establishes a\r\n*&quot;happens-before&quot;* relationship with subsequent reads of that same variable. This means that changes to a volatile variable are always visible to other threads.\r\n\r\nThe technique of reading, writing without memory consistency errors is called **atomic action**.\r\n\r\nAn atomic action is one that effectively happens all at once. An atomic action cannot stop in the middle: it either happens completely, or it doesn&#39;t happen at all. No side effects of an atomic action are visible until the action is complete.\r\n\r\nBelow are actions you can specify that are atomic:\r\n\r\n - Reads and writes are atomic for reference variables and for most\r\n   primitive variables (all types except long and double).\r\n - Reads and writes are atomic for all variables declared **volatile**\r\n   (including long and double variables).\r\n\r\n\r\nCheers!","title":"What is the volatile keyword useful for?","body":"<p>There are two different uses of volatile keyword.</p>\n\n<ol>\n<li>Prevents JVM from reading values from register (assume as cache), and forces its value to be read from memory.</li>\n<li>Reduces the risk of memory in-consistency errors.</li>\n</ol>\n\n<blockquote>\n  <p>Prevents JVM from reading values in register, and forces its\n  value to be read from memory.</p>\n</blockquote>\n\n<p>A <em>busy flag</em> is used to prevent a thread from continuing while the device is busy and the flag is not protected by a lock:</p>\n\n<pre><code>while (busy) {\n    /* do something else */\n}\n</code></pre>\n\n<p>The testing thread will continue when another thread turns off the <em>busy flag</em>:</p>\n\n<pre><code>busy = 0;\n</code></pre>\n\n<p>However, since busy is accessed frequently in the testing thread, the JVM may optimize the test by placing the value of busy in a register, then test the contents of the register without reading the value of busy in memory before every test. The testing thread would never see busy change and the other thread would only change the value of busy in memory, resulting in deadlock. Declaring the <em>busy flag</em> as volatile forces its value to be read before each test.</p>\n\n<blockquote>\n  <p>Reduces the risk of memory consistency errors.</p>\n</blockquote>\n\n<p>Using volatile variables reduces the risk of <strong>memory consistency errors</strong>, because any write to a volatile variable establishes a\n<em>\"happens-before\"</em> relationship with subsequent reads of that same variable. This means that changes to a volatile variable are always visible to other threads.</p>\n\n<p>The technique of reading, writing without memory consistency errors is called <strong>atomic action</strong>.</p>\n\n<p>An atomic action is one that effectively happens all at once. An atomic action cannot stop in the middle: it either happens completely, or it doesn't happen at all. No side effects of an atomic action are visible until the action is complete.</p>\n\n<p>Below are actions you can specify that are atomic:</p>\n\n<ul>\n<li>Reads and writes are atomic for reference variables and for most\nprimitive variables (all types except long and double).</li>\n<li>Reads and writes are atomic for all variables declared <strong>volatile</strong>\n(including long and double variables).</li>\n</ul>\n\n<p>Cheers!</p>\n"},{"comments":[{"owner":{"account_id":1789907,"reputation":9472,"user_id":1809377,"accept_rate":76,"display_name":"ajay"},"score":4,"creation_date":1567663877,"post_id":49098807,"comment_id":102031139,"body_markdown":"This explains the difference between volatile and synchronized.","body":"This explains the difference between volatile and synchronized."},{"owner":{"account_id":170654,"reputation":199,"user_id":397518,"accept_rate":0,"display_name":"sergey_o"},"score":3,"creation_date":1603300801,"post_id":49098807,"comment_id":113996133,"body_markdown":"This is, sadly, incorrect.\n\n&quot;Volatile&quot; does not control cache and does not provide any magic instant global update for memory views of other CPUs.\n\n&quot;Volatile&quot; simply ensures that whenever a reference to the variable is done (either read or write), JVM performs a reference to the assigned address of the variable in virtual memory space, rather than to a value stored in a register or in some other convenient shadow location (such as stack) selected by the optimizer, nor does it skip a reference on the judgement of the optimizer.","body":"This is, sadly, incorrect.  &quot;Volatile&quot; does not control cache and does not provide any magic instant global update for memory views of other CPUs.  &quot;Volatile&quot; simply ensures that whenever a reference to the variable is done (either read or write), JVM performs a reference to the assigned address of the variable in virtual memory space, rather than to a value stored in a register or in some other convenient shadow location (such as stack) selected by the optimizer, nor does it skip a reference on the judgement of the optimizer."},{"owner":{"account_id":170654,"reputation":199,"user_id":397518,"accept_rate":0,"display_name":"sergey_o"},"score":3,"creation_date":1603300833,"post_id":49098807,"comment_id":113996149,"body_markdown":"Without &quot;volatile&quot;, an instruction such as &quot;for (...) {a += b + c;}&quot; may not refer memory locations at all, just keeping &quot;a&quot;, &quot;b&quot; and &quot;c&quot; in registers for the whole duration of the loop.\n\nWhen a value is written by CPU to a virtual memory address (or for that matter, corresponding physical memory address), the update does not become instantly visible to other CPUs, nor is it flushed immediatelly to RAM [*].","body":"Without &quot;volatile&quot;, an instruction such as &quot;for (...) {a += b + c;}&quot; may not refer memory locations at all, just keeping &quot;a&quot;, &quot;b&quot; and &quot;c&quot; in registers for the whole duration of the loop.  When a value is written by CPU to a virtual memory address (or for that matter, corresponding physical memory address), the update does not become instantly visible to other CPUs, nor is it flushed immediatelly to RAM [*]."},{"owner":{"account_id":170654,"reputation":199,"user_id":397518,"accept_rate":0,"display_name":"sergey_o"},"score":2,"creation_date":1603300847,"post_id":49098807,"comment_id":113996158,"body_markdown":"The update is simply put to the cache of the local CPU and then is queued to the inter-CPU interconnect that implements memory coherency protocol (such as MESI), and the protocol message starts travelling to other CPUs, eventually causing their caches to be updated too. This takes short, but non-zero time. In the meanwhile, other CPUs remain unaware that an update has happened.\n\nIf CPU1 updated volatile variable X, and CPU2 read it a jiffy later, CPU2 may find either old value for X or new value for X.","body":"The update is simply put to the cache of the local CPU and then is queued to the inter-CPU interconnect that implements memory coherency protocol (such as MESI), and the protocol message starts travelling to other CPUs, eventually causing their caches to be updated too. This takes short, but non-zero time. In the meanwhile, other CPUs remain unaware that an update has happened.  If CPU1 updated volatile variable X, and CPU2 read it a jiffy later, CPU2 may find either old value for X or new value for X."},{"owner":{"account_id":170654,"reputation":199,"user_id":397518,"accept_rate":0,"display_name":"sergey_o"},"score":2,"creation_date":1603300857,"post_id":49098807,"comment_id":113996162,"body_markdown":"On the write side, the difference between &quot;volatile&quot; and &quot;non-volatile&quot; is that for &quot;volatile&quot; CPU2 will see an update a nanosecond or so later, whereas for &quot;non-volatile&quot; the delay in update is unpredictable and depends on the optimizer.\n\nOn the read side, the difference is that for &quot;volatile&quot; a reference to the variable in the program code forces a reference to the assigned variable location in virtual memory. Whereas for &quot;non-volatile&quot; the optimizer may choose to skip making such a reference.","body":"On the write side, the difference between &quot;volatile&quot; and &quot;non-volatile&quot; is that for &quot;volatile&quot; CPU2 will see an update a nanosecond or so later, whereas for &quot;non-volatile&quot; the delay in update is unpredictable and depends on the optimizer.  On the read side, the difference is that for &quot;volatile&quot; a reference to the variable in the program code forces a reference to the assigned variable location in virtual memory. Whereas for &quot;non-volatile&quot; the optimizer may choose to skip making such a reference."},{"owner":{"account_id":170654,"reputation":199,"user_id":397518,"accept_rate":0,"display_name":"sergey_o"},"score":2,"creation_date":1603300863,"post_id":49098807,"comment_id":113996166,"body_markdown":"The only way to ensure reading &quot;the absolute latest&quot; value of a variable is through an interlocked operation, i.e. either through locking (&quot;synchronized&quot;, ReenterantLock, whaterver) or using interlocked-op classes like AtomicInterger.","body":"The only way to ensure reading &quot;the absolute latest&quot; value of a variable is through an interlocked operation, i.e. either through locking (&quot;synchronized&quot;, ReenterantLock, whaterver) or using interlocked-op classes like AtomicInterger."},{"owner":{"account_id":170654,"reputation":199,"user_id":397518,"accept_rate":0,"display_name":"sergey_o"},"score":2,"creation_date":1603300879,"post_id":49098807,"comment_id":113996179,"body_markdown":"[*] Flusing to RAM does not mean much anyway, since CPUs do not see RAM directly, but only through their local cache systems. And when a cache system is missing a location, it does not necessary fill it in from the RAM: it may know that the location is held in other CPU cache (owned by that CPU) and will accordingly read data not from RAM, but request it from that other CPU&#39;s cache via the interconnect&#39;s cache coherency protocol.","body":"[*] Flusing to RAM does not mean much anyway, since CPUs do not see RAM directly, but only through their local cache systems. And when a cache system is missing a location, it does not necessary fill it in from the RAM: it may know that the location is held in other CPU cache (owned by that CPU) and will accordingly read data not from RAM, but request it from that other CPU&#39;s cache via the interconnect&#39;s cache coherency protocol."}],"tags":[],"owner":{"account_id":7525670,"reputation":12204,"user_id":5715934,"accept_rate":95,"display_name":"Supun Wijerathne"},"comment_count":7,"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1567664740,"creation_date":1520187874,"answer_id":49098807,"question_id":106591,"body_markdown":"A variable declared with `volatile` keyword, has two main qualities which make it special.\r\n\r\n 1. If we have a volatile variable, it cannot be cached into the computer&#39;s(microprocessor) cache memory by any thread. Access always happened from main memory.\r\n\r\n 2. If there is a ***write operation*** going on a volatile variable, and suddenly a ***read operation*** is requested, it is guaranteed that the ***write operation will be finished prior to the read operation***.\r\n \r\nTwo above qualities deduce that\r\n\r\n- All the threads reading a volatile variable will definitely read the latest value. Because no cached value can pollute it. And also the read request will be granted only after the completion of the current write operation.\r\n\r\nAnd on the other hand,\r\n\r\n- If we further investigate the **#2** that I have mentioned, we can see that `volatile` keyword is an ideal way to maintain a shared variable which has ***&#39;n&#39; number of reader threads and only one writer thread*** to access it. Once we add the `volatile` keyword, it is done. No any other overhead about thread safety.\r\n\r\nConversly, \r\n\r\nWe ***can&#39;t*** make use of `volatile` keyword solely, to satisfy a shared variable which has ***more than one writer thread accessing it***.\r\n ","title":"What is the volatile keyword useful for?","body":"<p>A variable declared with <code>volatile</code> keyword, has two main qualities which make it special.</p>\n\n<ol>\n<li><p>If we have a volatile variable, it cannot be cached into the computer's(microprocessor) cache memory by any thread. Access always happened from main memory.</p></li>\n<li><p>If there is a <strong><em>write operation</em></strong> going on a volatile variable, and suddenly a <strong><em>read operation</em></strong> is requested, it is guaranteed that the <strong><em>write operation will be finished prior to the read operation</em></strong>.</p></li>\n</ol>\n\n<p>Two above qualities deduce that</p>\n\n<ul>\n<li>All the threads reading a volatile variable will definitely read the latest value. Because no cached value can pollute it. And also the read request will be granted only after the completion of the current write operation.</li>\n</ul>\n\n<p>And on the other hand,</p>\n\n<ul>\n<li>If we further investigate the <strong>#2</strong> that I have mentioned, we can see that <code>volatile</code> keyword is an ideal way to maintain a shared variable which has <strong><em>'n' number of reader threads and only one writer thread</em></strong> to access it. Once we add the <code>volatile</code> keyword, it is done. No any other overhead about thread safety.</li>\n</ul>\n\n<p>Conversly, </p>\n\n<p>We <strong><em>can't</em></strong> make use of <code>volatile</code> keyword solely, to satisfy a shared variable which has <strong><em>more than one writer thread accessing it</em></strong>.</p>\n"},{"tags":[],"owner":{"account_id":13684630,"reputation":101,"user_id":9874027,"display_name":"sankar banerjee"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1527747823,"creation_date":1527747823,"answer_id":50617902,"question_id":106591,"body_markdown":"Volatile does following.\r\n\r\n1&gt; Read and write of volatile variables by different threads are always from memory, not from thread&#39;s own cache or cpu register. So each thread always deals with the latest value.\r\n2&gt; When 2 different threads work with same instance or static variables in heap, one may see other&#39;s actions as out of order. See jeremy manson&#39;s blog on this. But volatile helps here.\r\n\r\nFollowing fully running code shows how a number of threads can execute in predefined order and print outputs without using synchronized keyword.\r\n\r\n    thread 0 prints 0\r\n    thread 1 prints 1\r\n    thread 2 prints 2\r\n    thread 3 prints 3\r\n    thread 0 prints 0\r\n    thread 1 prints 1\r\n    thread 2 prints 2\r\n    thread 3 prints 3\r\n    thread 0 prints 0\r\n    thread 1 prints 1\r\n    thread 2 prints 2\r\n    thread 3 prints 3\r\n\r\nTo achieve this we may use the following full fledged running code.\r\n\r\n    public class Solution {\r\n        static volatile int counter = 0;\r\n        static int print = 0;\r\n        public static void main(String[] args) {\r\n            // TODO Auto-generated method stub\r\n            Thread[] ths = new Thread[4];\r\n            for (int i = 0; i &lt; ths.length; i++) {\r\n                ths[i] = new Thread(new MyRunnable(i, ths.length));\r\n                ths[i].start();\r\n            }\r\n        }\r\n        static class MyRunnable implements Runnable {\r\n            final int thID;\r\n            final int total;\r\n            public MyRunnable(int id, int total) {\r\n                thID = id;\r\n                this.total = total;\r\n            }\r\n            @Override\r\n            public void run() {\r\n                // TODO Auto-generated method stub\r\n                while (true) {\r\n                    if (thID == counter) {\r\n                        System.out.println(&quot;thread &quot; + thID + &quot; prints &quot; + print);\r\n                        print++;\r\n                        if (print == total)\r\n                            print = 0;\r\n                        counter++;\r\n                        if (counter == total)\r\n                            counter = 0;\r\n                    } else {\r\n                        try {\r\n                            Thread.sleep(30);\r\n                        } catch (InterruptedException e) {\r\n                            // log it\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nThe following github link has a readme, which gives proper explanation.\r\nhttps://github.com/sankar4git/volatile_thread_ordering","title":"What is the volatile keyword useful for?","body":"<p>Volatile does following.</p>\n\n<p>1> Read and write of volatile variables by different threads are always from memory, not from thread's own cache or cpu register. So each thread always deals with the latest value.\n2> When 2 different threads work with same instance or static variables in heap, one may see other's actions as out of order. See jeremy manson's blog on this. But volatile helps here.</p>\n\n<p>Following fully running code shows how a number of threads can execute in predefined order and print outputs without using synchronized keyword.</p>\n\n<pre><code>thread 0 prints 0\nthread 1 prints 1\nthread 2 prints 2\nthread 3 prints 3\nthread 0 prints 0\nthread 1 prints 1\nthread 2 prints 2\nthread 3 prints 3\nthread 0 prints 0\nthread 1 prints 1\nthread 2 prints 2\nthread 3 prints 3\n</code></pre>\n\n<p>To achieve this we may use the following full fledged running code.</p>\n\n<pre><code>public class Solution {\n    static volatile int counter = 0;\n    static int print = 0;\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        Thread[] ths = new Thread[4];\n        for (int i = 0; i &lt; ths.length; i++) {\n            ths[i] = new Thread(new MyRunnable(i, ths.length));\n            ths[i].start();\n        }\n    }\n    static class MyRunnable implements Runnable {\n        final int thID;\n        final int total;\n        public MyRunnable(int id, int total) {\n            thID = id;\n            this.total = total;\n        }\n        @Override\n        public void run() {\n            // TODO Auto-generated method stub\n            while (true) {\n                if (thID == counter) {\n                    System.out.println(\"thread \" + thID + \" prints \" + print);\n                    print++;\n                    if (print == total)\n                        print = 0;\n                    counter++;\n                    if (counter == total)\n                        counter = 0;\n                } else {\n                    try {\n                        Thread.sleep(30);\n                    } catch (InterruptedException e) {\n                        // log it\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The following github link has a readme, which gives proper explanation.\n<a href=\"https://github.com/sankar4git/volatile_thread_ordering\" rel=\"nofollow noreferrer\">https://github.com/sankar4git/volatile_thread_ordering</a></p>\n"},{"comments":[{"owner":{"account_id":136651,"reputation":8180,"user_id":340290,"accept_rate":78,"display_name":"manikanta"},"score":0,"creation_date":1568544946,"post_id":54683948,"comment_id":102300978,"body_markdown":"To downvoter: Care to explain why downvote? If this is not  true, at least I&#39;ll learn whats wrong. I&#39;ve added this same comment twice, but don&#39;t know who is deleting again and again","body":"To downvoter: Care to explain why downvote? If this is not  true, at least I&#39;ll learn whats wrong. I&#39;ve added this same comment twice, but don&#39;t know who is deleting again and again"},{"owner":{"account_id":136651,"reputation":8180,"user_id":340290,"accept_rate":78,"display_name":"manikanta"},"score":0,"creation_date":1574742836,"post_id":54683948,"comment_id":104329453,"body_markdown":"Same is explained here as well: [How can you exit a thread reliably using an external condition variable?](https://www.toptal.com/java#gourmet-java)","body":"Same is explained here as well: <a href=\"https://www.toptal.com/java#gourmet-java\" rel=\"nofollow noreferrer\">How can you exit a thread reliably using an external condition variable?</a>"}],"tags":[],"owner":{"account_id":136651,"reputation":8180,"user_id":340290,"accept_rate":78,"display_name":"manikanta"},"comment_count":2,"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1559626486,"creation_date":1550123285,"answer_id":54683948,"question_id":106591,"body_markdown":"Below is a very simple code to demonstrate the requirement of `volatile` for variable which is used to control the Thread execution from other thread (this is one scenario where `volatile` is required).\r\n\r\n```java\r\n// Code to prove importance of &#39;volatile&#39; when state of one thread is being mutated from another thread.\r\n// Try running this class with and without &#39;volatile&#39; for &#39;state&#39; property of Task class.\r\npublic class VolatileTest {\r\n    public static void main(String[] a) throws Exception {\r\n        Task task = new Task();\r\n        new Thread(task).start();\r\n\r\n        Thread.sleep(500);\r\n        long stoppedOn = System.nanoTime();\r\n\r\n        task.stop(); // -----&gt; do this to stop the thread\r\n\r\n        System.out.println(&quot;Stopping on: &quot; + stoppedOn);\r\n    }\r\n}\r\n\r\nclass Task implements Runnable {\r\n    // Try running with and without &#39;volatile&#39; here\r\n    private volatile boolean state = true;\r\n    private int i = 0;\r\n\r\n    public void stop() {\r\n        state = false;\r\n    } \r\n\r\n    @Override\r\n    public void run() {\r\n        while(state) {\r\n            i++;\r\n        }\r\n        System.out.println(i + &quot;&gt; Stopped on: &quot; + System.nanoTime());\r\n    }\r\n}\r\n\r\n```\r\n**When `volatile` is not used:** you&#39;ll never see &#39;*Stopped on: xxx*&#39; message even after &#39;*Stopping on: xxx*&#39;, and the program continues to run.\r\n```\r\nStopping on: 1895303906650500\r\n```\r\n**When `volatile` used:** you&#39;ll see the &#39;*Stopped on: xxx*&#39; immediately.\r\n```\r\nStopping on: 1895285647980000\r\n324565439&gt; Stopped on: 1895285648087300\r\n```\r\n\r\nDemo: https://repl.it/repls/SilverAgonizingObjectcode","title":"What is the volatile keyword useful for?","body":"<p>Below is a very simple code to demonstrate the requirement of <code>volatile</code> for variable which is used to control the Thread execution from other thread (this is one scenario where <code>volatile</code> is required).</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Code to prove importance of 'volatile' when state of one thread is being mutated from another thread.\n// Try running this class with and without 'volatile' for 'state' property of Task class.\npublic class VolatileTest {\n    public static void main(String[] a) throws Exception {\n        Task task = new Task();\n        new Thread(task).start();\n\n        Thread.sleep(500);\n        long stoppedOn = System.nanoTime();\n\n        task.stop(); // -----&gt; do this to stop the thread\n\n        System.out.println(\"Stopping on: \" + stoppedOn);\n    }\n}\n\nclass Task implements Runnable {\n    // Try running with and without 'volatile' here\n    private volatile boolean state = true;\n    private int i = 0;\n\n    public void stop() {\n        state = false;\n    } \n\n    @Override\n    public void run() {\n        while(state) {\n            i++;\n        }\n        System.out.println(i + \"&gt; Stopped on: \" + System.nanoTime());\n    }\n}\n\n</code></pre>\n\n<p><strong>When <code>volatile</code> is not used:</strong> you'll never see '<em>Stopped on: xxx</em>' message even after '<em>Stopping on: xxx</em>', and the program continues to run.</p>\n\n<pre><code>Stopping on: 1895303906650500\n</code></pre>\n\n<p><strong>When <code>volatile</code> used:</strong> you'll see the '<em>Stopped on: xxx</em>' immediately.</p>\n\n<pre><code>Stopping on: 1895285647980000\n324565439&gt; Stopped on: 1895285648087300\n</code></pre>\n\n<p>Demo: <a href=\"https://repl.it/repls/SilverAgonizingObjectcode\" rel=\"nofollow noreferrer\">https://repl.it/repls/SilverAgonizingObjectcode</a></p>\n"},{"tags":[],"owner":{"account_id":5282761,"reputation":154,"user_id":4517590,"display_name":"Niyaz Ahamad"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1558090818,"creation_date":1558090818,"answer_id":56185079,"question_id":106591,"body_markdown":"volatile variable is basically used for instant update (flush) in main shared cache line once it updated, so that changes reflected to all worker threads immediately.","title":"What is the volatile keyword useful for?","body":"<p>volatile variable is basically used for instant update (flush) in main shared cache line once it updated, so that changes reflected to all worker threads immediately.</p>\n"},{"tags":[],"owner":{"account_id":6115775,"reputation":30435,"user_id":4770877,"display_name":"yoAlex5"},"comment_count":0,"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1681573250,"creation_date":1577438473,"answer_id":59498520,"question_id":106591,"body_markdown":"**Java Volatile**\r\n\r\n`volatile` -&gt; `synchronized`[&lt;sup&gt;\\[About\\]&lt;/sup&gt;][1]\r\n\r\n`volatile` says for a programmer that the value always will be up to date. The problem is that the value can be saved on different types of hardware memory. For example it can be CPU registers, CPU cache, RAM... СPU registers and CPU cache belong to CPU and can not share a data unlike of RAM which is on the rescue in multithreading envirompment \r\n\r\n[![enter image description here][2]][2]\r\n\r\n`volatile` keyword says that a variable will be **read and written** from/to RAM memory **directly**. It has some computation footprint\r\n\r\n`Java 5` extended `volatile` by supporting `happens-before`[&lt;sup&gt;\\[About\\]&lt;/sup&gt;][3]\r\n\r\n&gt;A write to a volatile field happens-before every subsequent read of that field.\r\n\r\n```\r\nRead is after write\r\n```\r\n\r\n`volatile` keyword **does not cure** a `race condition`[&lt;sup&gt;\\[About\\]&lt;/sup&gt;][4] situation to sove it use `synchronized` keyword[&lt;sup&gt;\\[About\\]&lt;/sup&gt;][1]\r\n\r\nAs a result it safety only when **one** thread **writes** and others just read the `volatile` value\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/59500618/4770877\r\n  [2]: https://i.stack.imgur.com/1EPWG.png\r\n  [3]: https://stackoverflow.com/a/59491099/4770877\r\n  [4]: https://stackoverflow.com/a/75134842/4770877","title":"What is the volatile keyword useful for?","body":"<p><strong>Java Volatile</strong></p>\n<p><code>volatile</code> -&gt; <code>synchronized</code><a href=\"https://stackoverflow.com/a/59500618/4770877\"><sup>[About]</sup></a></p>\n<p><code>volatile</code> says for a programmer that the value always will be up to date. The problem is that the value can be saved on different types of hardware memory. For example it can be CPU registers, CPU cache, RAM... СPU registers and CPU cache belong to CPU and can not share a data unlike of RAM which is on the rescue in multithreading envirompment</p>\n<p><a href=\"https://i.stack.imgur.com/1EPWG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1EPWG.png\" alt=\"enter image description here\" /></a></p>\n<p><code>volatile</code> keyword says that a variable will be <strong>read and written</strong> from/to RAM memory <strong>directly</strong>. It has some computation footprint</p>\n<p><code>Java 5</code> extended <code>volatile</code> by supporting <code>happens-before</code><a href=\"https://stackoverflow.com/a/59491099/4770877\"><sup>[About]</sup></a></p>\n<blockquote>\n<p>A write to a volatile field happens-before every subsequent read of that field.</p>\n</blockquote>\n<pre><code>Read is after write\n</code></pre>\n<p><code>volatile</code> keyword <strong>does not cure</strong> a <code>race condition</code><a href=\"https://stackoverflow.com/a/75134842/4770877\"><sup>[About]</sup></a> situation to sove it use <code>synchronized</code> keyword<a href=\"https://stackoverflow.com/a/59500618/4770877\"><sup>[About]</sup></a></p>\n<p>As a result it safety only when <strong>one</strong> thread <strong>writes</strong> and others just read the <code>volatile</code> value</p>\n"},{"comments":[{"owner":{"account_id":8556756,"reputation":595,"user_id":6412004,"display_name":"Regyn"},"score":0,"creation_date":1625584032,"post_id":63754630,"comment_id":120662576,"body_markdown":"Interestingly, the consumer doesn&#39;t cache the value when you print it out before the if statement. Weird","body":"Interestingly, the consumer doesn&#39;t cache the value when you print it out before the if statement. Weird"},{"owner":{"account_id":20376405,"reputation":139,"user_id":14947476,"display_name":"stanley"},"score":0,"creation_date":1643977455,"post_id":63754630,"comment_id":125488368,"body_markdown":"Its a great example!","body":"Its a great example!"},{"owner":{"account_id":10010983,"reputation":83,"user_id":7403850,"display_name":"codingmonk21"},"score":0,"creation_date":1657698495,"post_id":63754630,"comment_id":128869600,"body_markdown":"I understood the point that without volatile keyword in the consumer thread the sCount value is read once and stored locally, and the same value is read throughout the life of the consumer thread. However, we do read the same sCount variable in Producer thread in the while() loop check and how does that the producer thread reads the updated value and not cached value?","body":"I understood the point that without volatile keyword in the consumer thread the sCount value is read once and stored locally, and the same value is read throughout the life of the consumer thread. However, we do read the same sCount variable in Producer thread in the while() loop check and how does that the producer thread reads the updated value and not cached value?"},{"owner":{"account_id":75473,"reputation":1020,"user_id":216479,"accept_rate":50,"display_name":"Sergey"},"score":0,"creation_date":1681024079,"post_id":63754630,"comment_id":133990539,"body_markdown":"@codingmonk21 The producer thread reads the cached value.","body":"@codingmonk21 The producer thread reads the cached value."}],"tags":[],"owner":{"account_id":12279199,"reputation":2595,"user_id":9494420,"display_name":"Abhishek Luthra"},"comment_count":4,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1599316105,"creation_date":1599313743,"answer_id":63754630,"question_id":106591,"body_markdown":"While I see many good Theoretical explanations in the answers mentioned here, I am adding a practical example with an explanation here:\r\n\r\n 1. \r\n\r\n**CODE RUN WITHOUT VOLATILE USE**\r\n\r\n    public class VisibilityDemonstration {\r\n\r\n    private static int sCount = 0;\r\n\r\n    public static void main(String[] args) {\r\n        new Consumer().start();\r\n        try {\r\n            Thread.sleep(100);\r\n        } catch (InterruptedException e) {\r\n            return;\r\n        }\r\n        new Producer().start();\r\n    }\r\n\r\n    static class Consumer extends Thread {\r\n        @Override\r\n        public void run() {\r\n            int localValue = -1;\r\n            while (true) {\r\n                if (localValue != sCount) {\r\n                    System.out.println(&quot;Consumer: detected count change &quot; + sCount);\r\n                    localValue = sCount;\r\n                }\r\n                if (sCount &gt;= 5) {\r\n                    break;\r\n                }\r\n            }\r\n            System.out.println(&quot;Consumer: terminating&quot;);\r\n        }\r\n    }\r\n\r\n    static class Producer extends Thread {\r\n        @Override\r\n        public void run() {\r\n            while (sCount &lt; 5) {\r\n                int localValue = sCount;\r\n                localValue++;\r\n                System.out.println(&quot;Producer: incrementing count to &quot; + localValue);\r\n                sCount = localValue;\r\n                try {\r\n                    Thread.sleep(1000);\r\n                } catch (InterruptedException e) {\r\n                    return;\r\n                }\r\n            }\r\n            System.out.println(&quot;Producer: terminating&quot;);\r\n        }\r\n    }\r\n    }\r\nIn the above code, there are two threads - Producer and Consumer. \r\n\r\nThe producer thread iterates over the loop 5 times (with a sleep of 1000 milliSecond or 1 Sec) in between. In every iteration, the producer thread increases the value of sCount variable by 1. So, the producer changes the value of sCount from 0 to 5 in all iterations\r\n\r\nThe consumer thread is in a constant loop and print whenever the value of sCount changes until the value reaches 5 where it ends. \r\n\r\nBoth the loops are started at the same time. So both the producer and consumer should print the value of sCount 5 times.\r\n\r\n**OUTPUT**\r\n\r\n    Consumer: detected count change 0\r\n    Producer: incrementing count to 1\r\n    Producer: incrementing count to 2\r\n    Producer: incrementing count to 3\r\n    Producer: incrementing count to 4\r\n    Producer: incrementing count to 5\r\n    Producer: terminating\r\n\r\n**ANALYSIS**\r\n\r\nIn the above program, when the producer thread updates the value of sCount, it does update the value of the variable in the main memory(memory from where every thread is going to initially read the value of variable). But the consumer thread reads the value of sCount only the first time from this main memory and then caches the value of that variable inside its own memory. So, even if the value of original sCount in main memory has been updated by the producer thread, the consumer thread is reading from its cached value which is not updated. This is called **VISIBILITY PROBLEM** .\r\n\r\n 2. \r\n     \r\n**CODE RUN WITH VOLATILE USE**\r\n\r\nIn the above code, replace the line of code where sCount is declared by the following :\r\n\r\n    private volatile  static int sCount = 0;\r\n\r\n**OUTPUT**\r\n\r\n    Consumer: detected count change 0\r\n    Producer: incrementing count to 1\r\n    Consumer: detected count change 1\r\n    Producer: incrementing count to 2\r\n    Consumer: detected count change 2\r\n    Producer: incrementing count to 3\r\n    Consumer: detected count change 3\r\n    Producer: incrementing count to 4\r\n    Consumer: detected count change 4\r\n    Producer: incrementing count to 5\r\n    Consumer: detected count change 5\r\n    Consumer: terminating\r\n    Producer: terminating\r\n\r\n**ANALYSIS**\r\n\r\nWhen we declare a variable volatile, it means that all reads and all writes to this variable or from this variable will go directly into the main memory. The values of these variables will never be cached.\r\n\r\nAs the value of the sCount variable is never cached by any thread, the consumer always reads the original value of sCount from the main memory(where it is being updated by producer thread). So, In this case the output is correct where both the threads prints the different values of sCount 5 times.\r\n\r\nIn this way, the volatile keyword solves the **VISIBILITY PROBLEM** .\r\n\r\n\r\n\r\n","title":"What is the volatile keyword useful for?","body":"<p>While I see many good Theoretical explanations in the answers mentioned here, I am adding a practical example with an explanation here:</p>\n<p>1.</p>\n<p><strong>CODE RUN WITHOUT VOLATILE USE</strong></p>\n<pre><code>public class VisibilityDemonstration {\n\nprivate static int sCount = 0;\n\npublic static void main(String[] args) {\n    new Consumer().start();\n    try {\n        Thread.sleep(100);\n    } catch (InterruptedException e) {\n        return;\n    }\n    new Producer().start();\n}\n\nstatic class Consumer extends Thread {\n    @Override\n    public void run() {\n        int localValue = -1;\n        while (true) {\n            if (localValue != sCount) {\n                System.out.println(&quot;Consumer: detected count change &quot; + sCount);\n                localValue = sCount;\n            }\n            if (sCount &gt;= 5) {\n                break;\n            }\n        }\n        System.out.println(&quot;Consumer: terminating&quot;);\n    }\n}\n\nstatic class Producer extends Thread {\n    @Override\n    public void run() {\n        while (sCount &lt; 5) {\n            int localValue = sCount;\n            localValue++;\n            System.out.println(&quot;Producer: incrementing count to &quot; + localValue);\n            sCount = localValue;\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                return;\n            }\n        }\n        System.out.println(&quot;Producer: terminating&quot;);\n    }\n}\n}\n</code></pre>\n<p>In the above code, there are two threads - Producer and Consumer.</p>\n<p>The producer thread iterates over the loop 5 times (with a sleep of 1000 milliSecond or 1 Sec) in between. In every iteration, the producer thread increases the value of sCount variable by 1. So, the producer changes the value of sCount from 0 to 5 in all iterations</p>\n<p>The consumer thread is in a constant loop and print whenever the value of sCount changes until the value reaches 5 where it ends.</p>\n<p>Both the loops are started at the same time. So both the producer and consumer should print the value of sCount 5 times.</p>\n<p><strong>OUTPUT</strong></p>\n<pre><code>Consumer: detected count change 0\nProducer: incrementing count to 1\nProducer: incrementing count to 2\nProducer: incrementing count to 3\nProducer: incrementing count to 4\nProducer: incrementing count to 5\nProducer: terminating\n</code></pre>\n<p><strong>ANALYSIS</strong></p>\n<p>In the above program, when the producer thread updates the value of sCount, it does update the value of the variable in the main memory(memory from where every thread is going to initially read the value of variable). But the consumer thread reads the value of sCount only the first time from this main memory and then caches the value of that variable inside its own memory. So, even if the value of original sCount in main memory has been updated by the producer thread, the consumer thread is reading from its cached value which is not updated. This is called <strong>VISIBILITY PROBLEM</strong> .</p>\n<p>2.</p>\n<p><strong>CODE RUN WITH VOLATILE USE</strong></p>\n<p>In the above code, replace the line of code where sCount is declared by the following :</p>\n<pre><code>private volatile  static int sCount = 0;\n</code></pre>\n<p><strong>OUTPUT</strong></p>\n<pre><code>Consumer: detected count change 0\nProducer: incrementing count to 1\nConsumer: detected count change 1\nProducer: incrementing count to 2\nConsumer: detected count change 2\nProducer: incrementing count to 3\nConsumer: detected count change 3\nProducer: incrementing count to 4\nConsumer: detected count change 4\nProducer: incrementing count to 5\nConsumer: detected count change 5\nConsumer: terminating\nProducer: terminating\n</code></pre>\n<p><strong>ANALYSIS</strong></p>\n<p>When we declare a variable volatile, it means that all reads and all writes to this variable or from this variable will go directly into the main memory. The values of these variables will never be cached.</p>\n<p>As the value of the sCount variable is never cached by any thread, the consumer always reads the original value of sCount from the main memory(where it is being updated by producer thread). So, In this case the output is correct where both the threads prints the different values of sCount 5 times.</p>\n<p>In this way, the volatile keyword solves the <strong>VISIBILITY PROBLEM</strong> .</p>\n"},{"comments":[{"owner":{"account_id":1503466,"reputation":66,"user_id":2386845,"display_name":"Anand Kumar"},"score":0,"creation_date":1647896406,"post_id":65126556,"comment_id":126482353,"body_markdown":"does the main thread (parent thread) in general updates everything in ram directly? Or does the main thread also a cache","body":"does the main thread (parent thread) in general updates everything in ram directly? Or does the main thread also a cache"},{"owner":{"account_id":1503466,"reputation":66,"user_id":2386845,"display_name":"Anand Kumar"},"score":0,"creation_date":1647896461,"post_id":65126556,"comment_id":126482376,"body_markdown":"Also in general (non-multithreading scenarios) in Java, when is the ram updated from Cache?","body":"Also in general (non-multithreading scenarios) in Java, when is the ram updated from Cache?"},{"owner":{"account_id":179957,"reputation":1300,"user_id":412965,"display_name":"raiks"},"score":0,"creation_date":1673956161,"post_id":65126556,"comment_id":132607493,"body_markdown":"@Anand Kumar, A thread is a CPU core executing a certain code at a certain time. Each core has its own private L1 and L2 caches, L3 are usually shared between cores. When a CPU executes a memory write, it goes to the cache first. On x86 the cache is write-back: a cache line it is flushed to RAM at unpredictable time, usually when the cache line is evicted to give way to another one being loaded from RAM. Java has nothing to do with it unless a variable is volatile, in this case I&#39;d expect it to execute a cache line flush instruction.","body":"@Anand Kumar, A thread is a CPU core executing a certain code at a certain time. Each core has its own private L1 and L2 caches, L3 are usually shared between cores. When a CPU executes a memory write, it goes to the cache first. On x86 the cache is write-back: a cache line it is flushed to RAM at unpredictable time, usually when the cache line is evicted to give way to another one being loaded from RAM. Java has nothing to do with it unless a variable is volatile, in this case I&#39;d expect it to execute a cache line flush instruction."}],"tags":[],"owner":{"account_id":13778635,"reputation":615,"user_id":9944300,"display_name":"Amin Soheyli"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1607001718,"creation_date":1607000656,"answer_id":65126556,"question_id":106591,"body_markdown":"Assume that a thread modifies the value of a shared variable, if you didn&#39;t use `volatile` modifier for that variable. When other threads want to read this variable&#39;s value, they don&#39;t see the updated value because they read the variable&#39;s value from the CPU&#39;s cache instead of RAM memory. This problem also known as `Visibility Problem`.\r\n\r\nBy declaring the shared variable `volatile`, all writes to the counter variable will be written back to main memory immediately. Also, all reads of the counter variable will be read directly from main memory.\r\n\r\n    public class SharedObject {\r\n        public volatile int sharedVariable = 0;\r\n    }\r\n\r\nWith non-volatile variables there are no guarantees about when the Java Virtual Machine (JVM) reads data from main memory into CPU caches, or writes data from CPU caches to main memory. This can cause several problems which I will explain in the following sections.\r\n\r\n\r\n----------\r\n\r\n\r\n**Example:** \r\n\r\nImagine a situation in which two or more threads have access to a shared object which contains a counter variable declared like this:\r\n\r\n    public class SharedObject {\r\n        public int counter = 0;\r\n    }\r\n\r\nImagine too, that only Thread 1 increments the counter variable, but both Thread 1 and Thread 2 may read the counter variable from time to time.\r\n\r\nIf the counter variable is not declared volatile there is no guarantee about when the value of the counter variable is written from the CPU cache back to main memory. This means, that the counter variable value in the CPU cache may not be the same as in main memory. This situation is illustrated here:\r\n\r\n[![volatile][1]][1]\r\n\r\nThe problem with threads not seeing the latest value of a variable because it has not yet been written back to main memory by another thread, is called a &quot;visibility&quot; problem. The updates of one thread are not visible to other threads.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/L57nd.png","title":"What is the volatile keyword useful for?","body":"<p>Assume that a thread modifies the value of a shared variable, if you didn't use <code>volatile</code> modifier for that variable. When other threads want to read this variable's value, they don't see the updated value because they read the variable's value from the CPU's cache instead of RAM memory. This problem also known as <code>Visibility Problem</code>.</p>\n<p>By declaring the shared variable <code>volatile</code>, all writes to the counter variable will be written back to main memory immediately. Also, all reads of the counter variable will be read directly from main memory.</p>\n<pre><code>public class SharedObject {\n    public volatile int sharedVariable = 0;\n}\n</code></pre>\n<p>With non-volatile variables there are no guarantees about when the Java Virtual Machine (JVM) reads data from main memory into CPU caches, or writes data from CPU caches to main memory. This can cause several problems which I will explain in the following sections.</p>\n<hr />\n<p><strong>Example:</strong></p>\n<p>Imagine a situation in which two or more threads have access to a shared object which contains a counter variable declared like this:</p>\n<pre><code>public class SharedObject {\n    public int counter = 0;\n}\n</code></pre>\n<p>Imagine too, that only Thread 1 increments the counter variable, but both Thread 1 and Thread 2 may read the counter variable from time to time.</p>\n<p>If the counter variable is not declared volatile there is no guarantee about when the value of the counter variable is written from the CPU cache back to main memory. This means, that the counter variable value in the CPU cache may not be the same as in main memory. This situation is illustrated here:</p>\n<p><a href=\"https://i.stack.imgur.com/L57nd.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/L57nd.png\" alt=\"volatile\" /></a></p>\n<p>The problem with threads not seeing the latest value of a variable because it has not yet been written back to main memory by another thread, is called a &quot;visibility&quot; problem. The updates of one thread are not visible to other threads.</p>\n"},{"tags":[],"owner":{"account_id":14206439,"reputation":38701,"user_id":10262805,"display_name":"Yilmaz"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1662875231,"creation_date":1662875231,"answer_id":73677124,"question_id":106591,"body_markdown":"If you have a multithread system and these multiple threads work on some shared data, those threads will load data in their own cache. If we do not lock the resource, any change made in one thread is NOT gonna be available in another thread. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nWith a locking mechanism, we add read/write access to the data source. If one thread modifies the data source, that data will be stored in the main memory instead of in its cache. When others threads need this data, they will read it from the main memory. This will increase the latency dramatically. \r\n\r\nTo reduce the latency, we declare variables as `volatile`. It means that whenever the value of the variable is modified in any of the processors, the other threads will be forced to read it. It still has some delays but better than reading from the main memory.\r\n\r\n  [1]: https://i.stack.imgur.com/za62k.png","title":"What is the volatile keyword useful for?","body":"<p>If you have a multithread system and these multiple threads work on some shared data, those threads will load data in their own cache. If we do not lock the resource, any change made in one thread is NOT gonna be available in another thread.</p>\n<p><a href=\"https://i.stack.imgur.com/za62k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/za62k.png\" alt=\"enter image description here\" /></a></p>\n<p>With a locking mechanism, we add read/write access to the data source. If one thread modifies the data source, that data will be stored in the main memory instead of in its cache. When others threads need this data, they will read it from the main memory. This will increase the latency dramatically.</p>\n<p>To reduce the latency, we declare variables as <code>volatile</code>. It means that whenever the value of the variable is modified in any of the processors, the other threads will be forced to read it. It still has some delays but better than reading from the main memory.</p>\n"}],"owner":{"account_id":9137,"reputation":10022,"user_id":16759,"accept_rate":70,"display_name":"Richard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":345161,"favorite_count":0,"down_vote_count":2,"up_vote_count":807,"accepted_answer_id":106787,"answer_count":25,"score":805,"last_activity_date":1681573250,"creation_date":1221871262,"question_id":106591,"body_markdown":"At work today, I came across the `volatile` keyword in Java. Not being very familiar with it, I found [this explanation](http://web.archive.org/web/20210221170926/https://www.ibm.com/developerworks/java/library/j-jtp06197/). \r\n\r\nGiven the detail in which that article explains the keyword in question, do you ever use it or could you ever see a case in which you could use this keyword in the correct manner?","title":"What is the volatile keyword useful for?","body":"<p>At work today, I came across the <code>volatile</code> keyword in Java. Not being very familiar with it, I found <a href=\"http://web.archive.org/web/20210221170926/https://www.ibm.com/developerworks/java/library/j-jtp06197/\" rel=\"noreferrer\">this explanation</a>.</p>\n<p>Given the detail in which that article explains the keyword in question, do you ever use it or could you ever see a case in which you could use this keyword in the correct manner?</p>\n"},{"tags":["java","operators"],"answers":[{"comments":[{"owner":{"account_id":204598,"reputation":91,"user_id":452915,"display_name":"user452915"},"score":0,"creation_date":1285153116,"post_id":3768510,"comment_id":3988048,"body_markdown":"If you had to explain this to non-programmer. What it would be?","body":"If you had to explain this to non-programmer. What it would be?"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1285153584,"post_id":3768510,"comment_id":3988111,"body_markdown":"Does the non-programmer know what binary numbers and OR mean?  If no, explain those first.  If yes, then do the bitwise OR on the binary representations of the contents of result and the outcome of calling add(e) and store the answer in the result reference.","body":"Does the non-programmer know what binary numbers and OR mean?  If no, explain those first.  If yes, then do the bitwise OR on the binary representations of the contents of result and the outcome of calling add(e) and store the answer in the result reference."},{"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":3,"creation_date":1285153636,"post_id":3768510,"comment_id":3988121,"body_markdown":"Actually, it&#39;s logical OR because it&#39;s applied to the `boolean` type. Not that the net effect is any different though.","body":"Actually, it&#39;s logical OR because it&#39;s applied to the <code>boolean</code> type. Not that the net effect is any different though."},{"owner":{"account_id":204598,"reputation":91,"user_id":452915,"display_name":"user452915"},"score":0,"creation_date":1285153716,"post_id":3768510,"comment_id":3988131,"body_markdown":"So if result is true and every invocation of add(e) returns true but one does not, final result is false?","body":"So if result is true and every invocation of add(e) returns true but one does not, final result is false?"},{"owner":{"account_id":63571,"reputation":14881,"user_id":188107,"accept_rate":63,"display_name":"musiKk"},"score":0,"creation_date":1285154328,"post_id":3768510,"comment_id":3988203,"body_markdown":"@Donal: That&#39;s wrong. Boolean or (`||`) short circuits, logical or (`|`) does not. So in this case `add(e)` is always evaluated, regardless whether `result` is already true or not.","body":"@Donal: That&#39;s wrong. Boolean or (<code>||</code>) short circuits, logical or (<code>|</code>) does not. So in this case <code>add(e)</code> is always evaluated, regardless whether <code>result</code> is already true or not."},{"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":0,"creation_date":1285156611,"post_id":3768510,"comment_id":3988552,"body_markdown":"@musiKk: It&#39;s logical OR because it is applied to the boolean type, but it&#39;s not a short-circuiting OR. (The short-circuiting type is always boolean, but that&#39;s a one-way implication.)","body":"@musiKk: It&#39;s logical OR because it is applied to the boolean type, but it&#39;s not a short-circuiting OR. (The short-circuiting type is always boolean, but that&#39;s a one-way implication.)"},{"owner":{"account_id":134312,"reputation":11572,"user_id":336355,"display_name":"Ishtar"},"score":0,"creation_date":1285160053,"post_id":3768510,"comment_id":3989089,"body_markdown":"I think the correct name would be **eager logical OR operator**","body":"I think the correct name would be <b>eager logical OR operator</b>"}],"tags":[],"owner":{"account_id":43462,"reputation":60851,"user_id":127059,"accept_rate":90,"display_name":"Femaref"},"comment_count":7,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1285152924,"creation_date":1285152924,"answer_id":3768510,"question_id":3768499,"body_markdown":"It is a shorthand for: \r\n\r\n    result = result | add(e);\r\n\r\nWhere the `|` is the bitwise OR operator.","title":"Java |= operator question","body":"<p>It is a shorthand for: </p>\n\n<pre><code>result = result | add(e);\n</code></pre>\n\n<p>Where the <code>|</code> is the bitwise OR operator.</p>\n"},{"tags":[],"owner":{"account_id":141652,"reputation":1916,"user_id":348852,"accept_rate":82,"display_name":"Sagar V"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1285152981,"creation_date":1285152981,"answer_id":3768518,"question_id":3768499,"body_markdown":"It is a bitwise OR-ing of `result` and `add(e)` and assigning it back to result. Shorthand notation instead of writing `result = result | add(e)`","title":"Java |= operator question","body":"<p>It is a bitwise OR-ing of <code>result</code> and <code>add(e)</code> and assigning it back to result. Shorthand notation instead of writing <code>result = result | add(e)</code></p>\n"},{"tags":[],"owner":{"account_id":170758,"reputation":4261,"user_id":397707,"accept_rate":50,"display_name":"Raoul Duke"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1285152985,"creation_date":1285152985,"answer_id":3768519,"question_id":3768499,"body_markdown":"it&#39;s shorthand for result = result | add(e). The pipe is the [bitwise or][1] operator.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Bitwise_operation#OR","title":"Java |= operator question","body":"<p>it's shorthand for result = result | add(e). The pipe is the <a href=\"http://en.wikipedia.org/wiki/Bitwise_operation#OR\" rel=\"nofollow noreferrer\">bitwise or</a> operator.</p>\n"},{"tags":[],"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1285153904,"creation_date":1285153904,"answer_id":3768622,"question_id":3768499,"body_markdown":"The or-assign operator (`|=`) sets the variable on the LHS to the value it previously contained OR-ed with the result of evaluating the RHS. For boolean types (as in this example) it changes the variable to contain true when the value is true (and otherwise has no net effect). It does *not* short-circuit evaluate.\r\n\r\nThe overall effect of the method is to call the current object&#39;s `add` method for each element of the argument collection, and to return true if any of those calls to `add` return true (i.e., if anything actually got added, under reasonable assumptions about the meaning of the result of `add`…)","title":"Java |= operator question","body":"<p>The or-assign operator (<code>|=</code>) sets the variable on the LHS to the value it previously contained OR-ed with the result of evaluating the RHS. For boolean types (as in this example) it changes the variable to contain true when the value is true (and otherwise has no net effect). It does <em>not</em> short-circuit evaluate.</p>\n\n<p>The overall effect of the method is to call the current object's <code>add</code> method for each element of the argument collection, and to return true if any of those calls to <code>add</code> return true (i.e., if anything actually got added, under reasonable assumptions about the meaning of the result of <code>add</code>…)</p>\n"},{"comments":[{"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":1,"creation_date":1285156721,"post_id":3768734,"comment_id":3988570,"body_markdown":"With a short-circuiting version, you&#39;d expect no further adds to be done after one returns true, which would be surprising given the implied contract of the method name…","body":"With a short-circuiting version, you&#39;d expect no further adds to be done after one returns true, which would be surprising given the implied contract of the method name…"},{"owner":{"account_id":2288,"reputation":191205,"user_id":3171,"accept_rate":92,"display_name":"David Webb"},"score":0,"creation_date":1285157985,"post_id":3768734,"comment_id":3988755,"body_markdown":"@Donal Fellows - good point about the shortcircuiting of `||`.  Have changed the answer to reflect this.","body":"@Donal Fellows - good point about the shortcircuiting of <code>||</code>.  Have changed the answer to reflect this."},{"owner":{"account_id":13205,"reputation":8340,"user_id":26387,"accept_rate":79,"display_name":"Roalt"},"score":0,"creation_date":1285159536,"post_id":3768734,"comment_id":3989010,"body_markdown":"FWIW: I&#39;ve had a professor in University that would kill you if you did anything like: if (add(e)) {\n           result = true;\n        }  :-)","body":"FWIW: I&#39;ve had a professor in University that would kill you if you did anything like: if (add(e)) {            result = true;         }  :-)"}],"tags":[],"owner":{"account_id":2288,"reputation":191205,"user_id":3171,"accept_rate":92,"display_name":"David Webb"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1681573145,"creation_date":1285154881,"answer_id":3768734,"question_id":3768499,"body_markdown":"The code is adding all members of a `Collection` using the `add()` method which returns a `boolean`, indicating if the `add()` succeeded or not. What the `addAll` method does is return `true` if any of the adds succeeded and `false` if all of them failed. (This does seem odd to me, since I&#39;d only return `true` if all the adds were succesful, but I digress.)\r\n\r\nSo you could do it like this:\r\n\r\n    @Override\r\n    public boolean addAll(Collection&lt;? extends E&gt; c) {\r\n        boolean result = false;\r\n        for (E e : c) {\r\n            if (add(e)) {\r\n               result = true;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\nBut that&#39;s a little verbose as you can act on the `result` variable more directly:\r\n\r\n    @Override\r\n    public boolean addAll(Collection&lt;? extends E&gt; c) {\r\n        boolean result = false;\r\n        for (E e : c) {\r\n            result = add(e) || result;\r\n        }\r\n        return result;\r\n    }\r\n\r\nSo we&#39;re logically OR-ing the old value of `result` with the return value of `add` to get the new value. (Note: we want `result` to be on the right hand side of the `||`; this is because `||` &quot;shortcircuits&quot; and doesn&#39;t bother checking the right hand side of an `||` if the left side is `true`). So if `add(e)` and `result` were the other way around, it would not evaluate the right hand side — i.e. not run the `add()` method — once `result` were `true`.) \r\n\r\nWhoever wrote that method decided they wanted to be as terse as possible so they changed:\r\n\r\n    result = add(e) || result;\r\n\r\nto:\r\n\r\n    result |= add(e);\r\n\r\nwhich is the same as:\r\n\r\n    result = result | add(e);\r\n\r\nThe [`|` operator is a bitwise OR][1] which is not the same as a logical OR, except for booleans where the effect is basically the same, the only difference being the `|` not having the shortcircuit behaviour mentioned above.\r\n\r\nThere is no `||=` syntax in Java which is why the bitwise OR is being used, although even if it did, it would probably have the same shortcircuit problem mentioned above.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/tutorial/java/nutsandbolts/op3.html","title":"Java |= operator question","body":"<p>The code is adding all members of a <code>Collection</code> using the <code>add()</code> method which returns a <code>boolean</code>, indicating if the <code>add()</code> succeeded or not. What the <code>addAll</code> method does is return <code>true</code> if any of the adds succeeded and <code>false</code> if all of them failed. (This does seem odd to me, since I'd only return <code>true</code> if all the adds were succesful, but I digress.)</p>\n<p>So you could do it like this:</p>\n<pre><code>@Override\npublic boolean addAll(Collection&lt;? extends E&gt; c) {\n    boolean result = false;\n    for (E e : c) {\n        if (add(e)) {\n           result = true;\n        }\n    }\n    return result;\n}\n</code></pre>\n<p>But that's a little verbose as you can act on the <code>result</code> variable more directly:</p>\n<pre><code>@Override\npublic boolean addAll(Collection&lt;? extends E&gt; c) {\n    boolean result = false;\n    for (E e : c) {\n        result = add(e) || result;\n    }\n    return result;\n}\n</code></pre>\n<p>So we're logically OR-ing the old value of <code>result</code> with the return value of <code>add</code> to get the new value. (Note: we want <code>result</code> to be on the right hand side of the <code>||</code>; this is because <code>||</code> &quot;shortcircuits&quot; and doesn't bother checking the right hand side of an <code>||</code> if the left side is <code>true</code>). So if <code>add(e)</code> and <code>result</code> were the other way around, it would not evaluate the right hand side — i.e. not run the <code>add()</code> method — once <code>result</code> were <code>true</code>.)</p>\n<p>Whoever wrote that method decided they wanted to be as terse as possible so they changed:</p>\n<pre><code>result = add(e) || result;\n</code></pre>\n<p>to:</p>\n<pre><code>result |= add(e);\n</code></pre>\n<p>which is the same as:</p>\n<pre><code>result = result | add(e);\n</code></pre>\n<p>The <a href=\"http://download.oracle.com/javase/tutorial/java/nutsandbolts/op3.html\" rel=\"nofollow noreferrer\"><code>|</code> operator is a bitwise OR</a> which is not the same as a logical OR, except for booleans where the effect is basically the same, the only difference being the <code>|</code> not having the shortcircuit behaviour mentioned above.</p>\n<p>There is no <code>||=</code> syntax in Java which is why the bitwise OR is being used, although even if it did, it would probably have the same shortcircuit problem mentioned above.</p>\n"}],"owner":{"account_id":204598,"reputation":91,"user_id":452915,"display_name":"user452915"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":985,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"closed_date":1451578291,"accepted_answer_id":3768734,"answer_count":5,"score":8,"last_activity_date":1681573145,"creation_date":1285152856,"question_id":3768499,"body_markdown":"I need help about this strange operator `|=`. Can you explain to me what this code does ?\r\n\r\n    @Override\r\n    public boolean addAll(Collection&lt;? extends E&gt; c) {\r\n        boolean result = false;\r\n        for (E e : c) {\r\n            result |= add(e);\r\n        }\r\n        return result;\r\n    }","title":"Java |= operator question","body":"<p>I need help about this strange operator <code>|=</code>. Can you explain to me what this code does ?</p>\n\n<pre><code>@Override\npublic boolean addAll(Collection&lt;? extends E&gt; c) {\n    boolean result = false;\n    for (E e : c) {\n        result |= add(e);\n    }\n    return result;\n}\n</code></pre>\n"},{"tags":["java","if-statement","time-complexity"],"comments":[{"owner":{"account_id":235018,"reputation":364854,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"score":1,"creation_date":1508620803,"post_id":46864182,"comment_id":80683652,"body_markdown":"What gets executed in each of the &quot;do something&quot; or &quot;do something else&quot; blocks? That will influence the time complexity of the code.","body":"What gets executed in each of the &quot;do something&quot; or &quot;do something else&quot; blocks? That will influence the time complexity of the code."}],"answers":[{"comments":[{"owner":{"account_id":5597519,"reputation":699,"user_id":4592525,"display_name":"Constantin Zagorsky"},"score":0,"creation_date":1680369025,"post_id":46873092,"comment_id":133888383,"body_markdown":"Big-O notation is an Upper Bound Limit. For this question&#39;s algorithm, the worst case would be checking all IF statements of &quot;&#39;m&#39; outer&quot; and then checking all IF statements of &quot;&#39;n&#39; inner&quot; the same as two nested loops would work. Meaning complexity would be closer to O(n\\*m) and not O(n+m). So if you just change O(m+n) to O(m\\*n) in your answer that will be less misleading.","body":"Big-O notation is an Upper Bound Limit. For this question&#39;s algorithm, the worst case would be checking all IF statements of &quot;&#39;m&#39; outer&quot; and then checking all IF statements of &quot;&#39;n&#39; inner&quot; the same as two nested loops would work. Meaning complexity would be closer to O(n*m) and not O(n+m). So if you just change O(m+n) to O(m*n) in your answer that will be less misleading."},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1680706322,"post_id":46873092,"comment_id":133944126,"body_markdown":"This (and the above comment) are both incorrect.  Time complexity is in relation to the input.  In this case, the time complexity has _no_ relation to the input.  There aren&#39;t any loops or anything, just a fixed number of if statements.  It&#39;s [constant time](https://stackoverflow.com/a/75940892/208273).","body":"This (and the above comment) are both incorrect.  Time complexity is in relation to the input.  In this case, the time complexity has <i>no</i> relation to the input.  There aren&#39;t any loops or anything, just a fixed number of if statements.  It&#39;s <a href=\"https://stackoverflow.com/a/75940892/208273\">constant time</a>."},{"owner":{"account_id":5597519,"reputation":699,"user_id":4592525,"display_name":"Constantin Zagorsky"},"score":0,"creation_date":1684374319,"post_id":46873092,"comment_id":134510532,"body_markdown":"Consider the example of unlimited nested if statements, where the condition for the outer if statement is met at the last if statement of that definition and condition 2, is met at the last inner if statement of that last outer if statement definition. Will Java runtime instantly iterate over all unlimited if statements checking each condition for outer m and inner n statements and make it O(1)? I bet if you write a code for such an example and try to execute it you will find that it will actually take an unlimited amount of time to finish the code.","body":"Consider the example of unlimited nested if statements, where the condition for the outer if statement is met at the last if statement of that definition and condition 2, is met at the last inner if statement of that last outer if statement definition. Will Java runtime instantly iterate over all unlimited if statements checking each condition for outer m and inner n statements and make it O(1)? I bet if you write a code for such an example and try to execute it you will find that it will actually take an unlimited amount of time to finish the code."}],"tags":[],"owner":{"account_id":2097932,"reputation":905,"user_id":1866301,"display_name":"vaibhav kumar"},"comment_count":3,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1508668628,"creation_date":1508668628,"answer_id":46873092,"question_id":46864182,"body_markdown":"Time complexity (worst case) will be O(m+n). It will check m conditions for outer else ifs and upon finding the true condition, will check n conditions for the inner else ifs.","title":"Time complexity of nested IF statements","body":"<p>Time complexity (worst case) will be O(m+n). It will check m conditions for outer else ifs and upon finding the true condition, will check n conditions for the inner else ifs.</p>\n"},{"tags":[],"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680706109,"creation_date":1680706109,"answer_id":75940892,"question_id":46864182,"body_markdown":"The time complexity is **O(1)** (constant time).\r\n\r\nIn this example, you have *m* * *n* conditionals checked, but those are fixed numbers of conditionals that are hardcoded into the program.  There&#39;s no processing of data with size *m* or *n*, such as a loop.  If the data doubles in size, there will still be the same constant number of if statements.  Thus, the time complexity is constant, or O(1).","title":"Time complexity of nested IF statements","body":"<p>The time complexity is <strong>O(1)</strong> (constant time).</p>\n<p>In this example, you have <em>m</em> * <em>n</em> conditionals checked, but those are fixed numbers of conditionals that are hardcoded into the program.  There's no processing of data with size <em>m</em> or <em>n</em>, such as a loop.  If the data doubles in size, there will still be the same constant number of if statements.  Thus, the time complexity is constant, or O(1).</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681889773,"post_id":76023182,"comment_id":134128002,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/76023182/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":4672576,"reputation":11,"user_id":15238891,"display_name":"boo lean - Go FAT"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681573075,"creation_date":1681572287,"answer_id":76023182,"question_id":46864182,"body_markdown":"\r\n\r\nThe Big-O notation of this is NOT O(m+n).\r\n\r\n(also, you&#39;ve managed to explain a nested loop scenario, but used if statements as your code..)\r\n\r\nIf you&#39;re at an apple orchard and you have to check how many apples are hanging in the orchard, but there was a storm and some of the trees may have fallen over during the night...\r\n\r\nThen, you&#39;d have to first walk around and check if each tree was up. Each time you got to a tree that was standing - you counted its apples. The trees are the outer loop (btw you explained nested loops but wrote if statements) and the apples are the inner loop....\r\n\r\nBig-O analyzes the UPPER BOUND LIMIT of an equation... aka - bigO would be an assessment that assumes every tree is standing and every tree has the maximum amt of apples a tree can possibly hold.\r\n\r\nEven though you wrote half your code in English rather than using loops, the answer to your question is Big-O(N^2)\r\n\r\nIt is NOT (m+n) ... First off - you don&#39;t keep both variables, you just use n. Second, it is NOT the two added together. If there were 20 trees in the orchard, none had fallen, and each tree was full of apples and each one could bear a maximum of 50 apples... (would there be 70 apples in the orchard??? No.) There would be 1000 apples.\r\n\r\n\r\n(The Big-O is not technically constant - ACCORDING TO THE CODE written, yes, it is. However, the paragraph makes for a bit of logic that suggests loops SHOULD be in the code - taking the words &quot;if we have M outer if statements&quot; into account shows it&#39;s n^2. The code that&#39;s written as an example DOESN&#39;T have multiple outer if statements, though).","title":"Time complexity of nested IF statements","body":"<p>The Big-O notation of this is NOT O(m+n).</p>\n<p>(also, you've managed to explain a nested loop scenario, but used if statements as your code..)</p>\n<p>If you're at an apple orchard and you have to check how many apples are hanging in the orchard, but there was a storm and some of the trees may have fallen over during the night...</p>\n<p>Then, you'd have to first walk around and check if each tree was up. Each time you got to a tree that was standing - you counted its apples. The trees are the outer loop (btw you explained nested loops but wrote if statements) and the apples are the inner loop....</p>\n<p>Big-O analyzes the UPPER BOUND LIMIT of an equation... aka - bigO would be an assessment that assumes every tree is standing and every tree has the maximum amt of apples a tree can possibly hold.</p>\n<p>Even though you wrote half your code in English rather than using loops, the answer to your question is Big-O(N^2)</p>\n<p>It is NOT (m+n) ... First off - you don't keep both variables, you just use n. Second, it is NOT the two added together. If there were 20 trees in the orchard, none had fallen, and each tree was full of apples and each one could bear a maximum of 50 apples... (would there be 70 apples in the orchard??? No.) There would be 1000 apples.</p>\n<p>(The Big-O is not technically constant - ACCORDING TO THE CODE written, yes, it is. However, the paragraph makes for a bit of logic that suggests loops SHOULD be in the code - taking the words &quot;if we have M outer if statements&quot; into account shows it's n^2. The code that's written as an example DOESN'T have multiple outer if statements, though).</p>\n"}],"owner":{"account_id":11637464,"reputation":521,"user_id":8523169,"accept_rate":82,"display_name":"Aayush Taneja"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7638,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":46873092,"answer_count":3,"score":0,"last_activity_date":1681573075,"creation_date":1508595386,"question_id":46864182,"body_markdown":"If we have &#39;`m`&#39; outer IF-ELSE statements and **each** outer IF-ELSE statement contains &#39;`n`&#39; IF-ELSE statements, **then what would be the time complexity of the code?**\r\n\r\nFor Example:\r\n\r\n    if(Condition 1){\r\n        if(Condition 2){\r\n            //Do something\r\n        }\r\n        .\r\n        .    //&#39;n&#39; inner IF-ELSE statements\r\n        .    \r\n        else{\r\n            //Do something else\r\n        }\r\n    }\r\n    .\r\n    .  //&#39;m&#39; outer IF-ELSE Statements\r\n    .\r\n    else{\r\n        //Do something else\r\n    }\r\n\r\n\r\n    \r\n","title":"Time complexity of nested IF statements","body":"<p>If we have '<code>m</code>' outer IF-ELSE statements and <strong>each</strong> outer IF-ELSE statement contains '<code>n</code>' IF-ELSE statements, <strong>then what would be the time complexity of the code?</strong></p>\n\n<p>For Example:</p>\n\n<pre><code>if(Condition 1){\n    if(Condition 2){\n        //Do something\n    }\n    .\n    .    //'n' inner IF-ELSE statements\n    .    \n    else{\n        //Do something else\n    }\n}\n.\n.  //'m' outer IF-ELSE Statements\n.\nelse{\n    //Do something else\n}\n</code></pre>\n"},{"tags":["java","android","android-studio","location"],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681573065,"creation_date":1681573065,"answer_id":76023239,"question_id":76023174,"body_markdown":"&gt; How come it does not matter whether I enable or disable the location service?\r\n\r\nThe location service is what supplies data to `LocationManager`, from GPS and so on.\r\n\r\nHowever, the location *permissions* cover not only that, but other technologies that could be used to determine a device&#39;s location, such as scanning for WiFi access points or, reminiscent of your case, detecting BLE beacons.","title":"How can Android APP give location permissions if location service is disabled","body":"<blockquote>\n<p>How come it does not matter whether I enable or disable the location service?</p>\n</blockquote>\n<p>The location service is what supplies data to <code>LocationManager</code>, from GPS and so on.</p>\n<p>However, the location <em>permissions</em> cover not only that, but other technologies that could be used to determine a device's location, such as scanning for WiFi access points or, reminiscent of your case, detecting BLE beacons.</p>\n"}],"owner":{"account_id":21973697,"reputation":336,"user_id":16249829,"display_name":"TheBestPlayer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":540,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681573065,"creation_date":1681572199,"question_id":76023174,"body_markdown":"I am newbie at developing Android apps. My goal is to create a BLE app for my custom device that I have created. In order to create BLE app, I must first learn how to enable location service as BLE needs to have this enabled.\r\n\r\nI have read and followed instructions from:\r\nhttps://developer.android.com/training/location/permissions and\r\nhttps://developer.android.com/training/permissions/requesting#java\r\n\r\n**How I prepare my project:**\r\n\r\n 1. Create brand new Java project Minimum SDK (API 25:Android 7.1.1 (Nougat)\r\n \r\n\r\n 2. Add permissions in AndroidManifest\r\n```\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot; /&gt;\r\n```\r\n\r\n 3. Add libraries in build.gradle (Module:app) as described in (https://developer.android.com/training/permissions/requesting#allow-system-manage-request-code)\r\n\r\n ```\r\n    implementation &quot;androidx.fragment:fragment:1.5.6&quot;\r\n    implementation &quot;androidx.activity:activity:1.7.0&quot;\r\n ```\r\n\r\n 4. Copied the example code provided in https://developer.android.com/training/permissions/requesting#java on how to request and handle request response to my project.\r\n\r\n**Full MainActivity.java code:**\r\n\r\n```\r\npackage com.example.location_test_v2;\r\n\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.activity.result.contract.ActivityResultContracts;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport androidx.core.content.ContextCompat;\r\n\r\n\r\nimport android.content.pm.PackageManager;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        if (ContextCompat.checkSelfPermission(MainActivity.this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {\r\n            Log.e(&quot;INFO&quot;, &quot;PERMISSION ALREADY GRANTED: &quot;);\r\n        }\r\n\r\n        else {\r\n            Log.e(&quot;INFO&quot;, &quot;PERMISSION IS NOT GRANTED: &quot;);\r\n            locationPermissionRequest.launch(new String[] {\r\n                    android.Manifest.permission.ACCESS_FINE_LOCATION,\r\n                    android.Manifest.permission.ACCESS_COARSE_LOCATION\r\n            });\r\n        }\r\n\r\n    }\r\n    \r\n    private ActivityResultLauncher&lt;String[]&gt; locationPermissionRequest =\r\n            registerForActivityResult(new ActivityResultContracts.RequestMultiplePermissions(), result -&gt; {\r\n                        Boolean fineLocationGranted = result.getOrDefault(android.Manifest.permission.ACCESS_FINE_LOCATION, false);\r\n                        Boolean coarseLocationGranted = result.getOrDefault(android.Manifest.permission.ACCESS_COARSE_LOCATION,false);\r\n                        if (fineLocationGranted != null &amp;&amp; fineLocationGranted) {\r\n                            Log.e(&quot;INFO&quot;, &quot;PRECISE LOCATION GRANTED&quot; );\r\n                        } \r\n                        else if (coarseLocationGranted != null &amp;&amp; coarseLocationGranted) {\r\n                            Log.e(&quot;INFO&quot;, &quot;APPROXIMATAE LOCATION GRANTED&quot; );\r\n                        } \r\n                        else {\r\n                            Log.e(&quot;INFO&quot;, &quot;NO LOCATION GRANTED&quot; );\r\n                        }\r\n                    }\r\n            );\r\n    \r\n\r\n}\r\n```\r\n\r\nI have paired my physical device to android studio via WiFi and simulating the app on my Samsung Flip 4.\r\n\r\n\r\nImagine a scenario where I havent previously installed this app on my phone (lets say it is downloaded for the first time), obviously the location permissions will not be given to this app yet. When the app is opened for the first time, I am prompted to enable location sharing as shown in the image below:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAfter choosing the precise or approximate location, everything seems to be fine. I can go to my Settings-&gt;Location-&gt;App Permissions-&gt;Location_test_v2 (my app name) and I can see that the location permissions are given to the app.\r\n\r\n**My question:**\r\n\r\nMy only concern is how is it possible to give location permission to the app if the location service is Off on my phone. How come it does not matter whether I enable or disable the location service?\r\n\r\n\r\n\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tbWIX.png","title":"How can Android APP give location permissions if location service is disabled","body":"<p>I am newbie at developing Android apps. My goal is to create a BLE app for my custom device that I have created. In order to create BLE app, I must first learn how to enable location service as BLE needs to have this enabled.</p>\n<p>I have read and followed instructions from:\n<a href=\"https://developer.android.com/training/location/permissions\" rel=\"nofollow noreferrer\">https://developer.android.com/training/location/permissions</a> and\n<a href=\"https://developer.android.com/training/permissions/requesting#java\" rel=\"nofollow noreferrer\">https://developer.android.com/training/permissions/requesting#java</a></p>\n<p><strong>How I prepare my project:</strong></p>\n<ol>\n<li><p>Create brand new Java project Minimum SDK (API 25:Android 7.1.1 (Nougat)</p>\n</li>\n<li><p>Add permissions in AndroidManifest</p>\n</li>\n</ol>\n<pre><code>    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot; /&gt;\n</code></pre>\n<ol start=\"3\">\n<li>Add libraries in build.gradle (Module:app) as described in (<a href=\"https://developer.android.com/training/permissions/requesting#allow-system-manage-request-code\" rel=\"nofollow noreferrer\">https://developer.android.com/training/permissions/requesting#allow-system-manage-request-code</a>)</li>\n</ol>\n<pre><code>   implementation &quot;androidx.fragment:fragment:1.5.6&quot;\n   implementation &quot;androidx.activity:activity:1.7.0&quot;\n</code></pre>\n<ol start=\"4\">\n<li>Copied the example code provided in <a href=\"https://developer.android.com/training/permissions/requesting#java\" rel=\"nofollow noreferrer\">https://developer.android.com/training/permissions/requesting#java</a> on how to request and handle request response to my project.</li>\n</ol>\n<p><strong>Full MainActivity.java code:</strong></p>\n<pre><code>package com.example.location_test_v2;\n\nimport androidx.activity.result.ActivityResultLauncher;\nimport androidx.activity.result.contract.ActivityResultContracts;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport androidx.core.content.ContextCompat;\n\n\nimport android.content.pm.PackageManager;\nimport android.os.Bundle;\nimport android.util.Log;\n\npublic class MainActivity extends AppCompatActivity {\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        if (ContextCompat.checkSelfPermission(MainActivity.this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {\n            Log.e(&quot;INFO&quot;, &quot;PERMISSION ALREADY GRANTED: &quot;);\n        }\n\n        else {\n            Log.e(&quot;INFO&quot;, &quot;PERMISSION IS NOT GRANTED: &quot;);\n            locationPermissionRequest.launch(new String[] {\n                    android.Manifest.permission.ACCESS_FINE_LOCATION,\n                    android.Manifest.permission.ACCESS_COARSE_LOCATION\n            });\n        }\n\n    }\n    \n    private ActivityResultLauncher&lt;String[]&gt; locationPermissionRequest =\n            registerForActivityResult(new ActivityResultContracts.RequestMultiplePermissions(), result -&gt; {\n                        Boolean fineLocationGranted = result.getOrDefault(android.Manifest.permission.ACCESS_FINE_LOCATION, false);\n                        Boolean coarseLocationGranted = result.getOrDefault(android.Manifest.permission.ACCESS_COARSE_LOCATION,false);\n                        if (fineLocationGranted != null &amp;&amp; fineLocationGranted) {\n                            Log.e(&quot;INFO&quot;, &quot;PRECISE LOCATION GRANTED&quot; );\n                        } \n                        else if (coarseLocationGranted != null &amp;&amp; coarseLocationGranted) {\n                            Log.e(&quot;INFO&quot;, &quot;APPROXIMATAE LOCATION GRANTED&quot; );\n                        } \n                        else {\n                            Log.e(&quot;INFO&quot;, &quot;NO LOCATION GRANTED&quot; );\n                        }\n                    }\n            );\n    \n\n}\n</code></pre>\n<p>I have paired my physical device to android studio via WiFi and simulating the app on my Samsung Flip 4.</p>\n<p>Imagine a scenario where I havent previously installed this app on my phone (lets say it is downloaded for the first time), obviously the location permissions will not be given to this app yet. When the app is opened for the first time, I am prompted to enable location sharing as shown in the image below:</p>\n<p><a href=\"https://i.stack.imgur.com/tbWIX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tbWIX.png\" alt=\"enter image description here\" /></a></p>\n<p>After choosing the precise or approximate location, everything seems to be fine. I can go to my Settings-&gt;Location-&gt;App Permissions-&gt;Location_test_v2 (my app name) and I can see that the location permissions are given to the app.</p>\n<p><strong>My question:</strong></p>\n<p>My only concern is how is it possible to give location permission to the app if the location service is Off on my phone. How come it does not matter whether I enable or disable the location service?</p>\n"},{"tags":["java","spring","spring-mvc","scheduled-tasks","scheduler"],"comments":[{"owner":{"account_id":4171037,"reputation":573,"user_id":3418791,"accept_rate":25,"display_name":"Warrior"},"score":3,"creation_date":1495044862,"post_id":44032059,"comment_id":75090727,"body_markdown":"Are you sure the run() method returns?","body":"Are you sure the run() method returns?"}],"answers":[{"comments":[{"owner":{"account_id":8776200,"reputation":1508,"user_id":6561404,"accept_rate":89,"display_name":"MMAdams"},"score":0,"creation_date":1495046032,"post_id":44032149,"comment_id":75091305,"body_markdown":"When I changed it to just a print statement, it executed multiple times, as it should, so at least I know now that the problem isn&#39;t in the scheduling code!","body":"When I changed it to just a print statement, it executed multiple times, as it should, so at least I know now that the problem isn&#39;t in the scheduling code!"},{"owner":{"account_id":3658649,"reputation":1521,"user_id":3049036,"accept_rate":57,"display_name":"Suresh"},"score":0,"creation_date":1523507578,"post_id":44032149,"comment_id":86591088,"body_markdown":"Hello Basil, What if I want to use the ScheduledExecutorService to run just once? Why I&#39;m asking this coz I have 2 classes out of which one class has to be scheduled and the other class can run just once.","body":"Hello Basil, What if I want to use the ScheduledExecutorService to run just once? Why I&#39;m asking this coz I have 2 classes out of which one class has to be scheduled and the other class can run just once."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1523546723,"post_id":44032149,"comment_id":86615504,"body_markdown":"@mannedear Then use another executor service other than `ScheduledExecutorService`. Study the [Tutorial](https://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html) and search Stack Overflow to learn more.","body":"@mannedear Then use another executor service other than <code>ScheduledExecutorService</code>. Study the <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html\" rel=\"nofollow noreferrer\">Tutorial</a> and search Stack Overflow to learn more."},{"owner":{"account_id":3658649,"reputation":1521,"user_id":3049036,"accept_rate":57,"display_name":"Suresh"},"score":0,"creation_date":1523550173,"post_id":44032149,"comment_id":86617720,"body_markdown":"@BasilBourque I&#39;m planning to use a flag and call the `ScheduledExecutorService` class cancel method. What&#39;s your call on this?","body":"@BasilBourque I&#39;m planning to use a flag and call the <code>ScheduledExecutorService</code> class cancel method. What&#39;s your call on this?"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1523554968,"post_id":44032149,"comment_id":86620263,"body_markdown":"@mannedear You need to post your own Question, and spell out the situation.","body":"@mannedear You need to post your own Question, and spell out the situation."},{"owner":{"account_id":1074771,"reputation":1324,"user_id":1073157,"accept_rate":50,"display_name":"Dan Rayson"},"score":0,"creation_date":1540387895,"post_id":44032149,"comment_id":92846867,"body_markdown":"Very strange, my code is not throwing an exception, yet still I needed to do this!","body":"Very strange, my code is not throwing an exception, yet still I needed to do this!"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1540395120,"post_id":44032149,"comment_id":92852056,"body_markdown":"@DanRayson In your try-catch, did you dump the caught exception to console with `System.out.println`? I’ll bet you are indeed throwing and now catching an exception.","body":"@DanRayson In your try-catch, did you dump the caught exception to console with <code>System.out.println</code>? I’ll bet you are indeed throwing and now catching an exception."},{"owner":{"account_id":1074771,"reputation":1324,"user_id":1073157,"accept_rate":50,"display_name":"Dan Rayson"},"score":0,"creation_date":1540396109,"post_id":44032149,"comment_id":92852680,"body_markdown":"@BasilBourque Yep, I put a breakpoint in the catch to see if it did indeed throw an exception, and my specific code did not.  High strangeness, so I&#39;m not pretending to understand it lol.","body":"@BasilBourque Yep, I put a breakpoint in the catch to see if it did indeed throw an exception, and my specific code did not.  High strangeness, so I&#39;m not pretending to understand it lol."},{"owner":{"account_id":233512,"reputation":1264,"user_id":499059,"accept_rate":33,"display_name":"jack jin"},"score":1,"creation_date":1608912588,"post_id":44032149,"comment_id":115711949,"body_markdown":"&quot;Take baby steps&quot;,this is a very good advice, lead me to sloved my problem,thanks very much","body":"&quot;Take baby steps&quot;,this is a very good advice, lead me to sloved my problem,thanks very much"}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":9,"down_vote_count":0,"up_vote_count":25,"is_accepted":true,"score":25,"last_activity_date":1681572594,"creation_date":1495044942,"answer_id":44032149,"question_id":44032059,"body_markdown":"See this longer [Answer](https://stackoverflow.com/a/24902026/642706) of mine on a similar Question.\r\n\r\n# Wrap `run` code with `try catch`\r\n\r\nJust a guess: An exception is being thrown. A `ScheduledExecutorService` halts silently if it encounters an Exception, with no further scheduled work performed.\r\n\r\nThe `run` method’s code should always be surrounded by a try-catch to handle and absorb any thrown Exception.\r\n\r\nBy the way, the terribly flawed `Date` class has been supplanted by the modern *java.time* classes. Specifically replaced by `Instant`. \r\n\r\n     @Override\r\n     public void run() {\r\n        try {  // Let no Exception reach the ScheduledExecutorService.\r\n            Instant instant = Instant.now() ;\r\n            System.out.println(&quot;Running scheduled update check &quot; + instant );\r\n            updateSubscriberService.checkForUpdates();\r\n        } catch ( Exception e ) {\r\n            System.out.println( &quot;ERROR - unexpected exception&quot; );\r\n        }\r\n    }\r\n\r\n# Stub out `run` method\r\n\r\nTake baby steps. Begin with a `run` method that does nothing but a `System.out.println`.","title":"ScheduledExecutorService only runs once","body":"<p>See this longer <a href=\"https://stackoverflow.com/a/24902026/642706\">Answer</a> of mine on a similar Question.</p>\n<h1>Wrap <code>run</code> code with <code>try catch</code></h1>\n<p>Just a guess: An exception is being thrown. A <code>ScheduledExecutorService</code> halts silently if it encounters an Exception, with no further scheduled work performed.</p>\n<p>The <code>run</code> method’s code should always be surrounded by a try-catch to handle and absorb any thrown Exception.</p>\n<p>By the way, the terribly flawed <code>Date</code> class has been supplanted by the modern <em>java.time</em> classes. Specifically replaced by <code>Instant</code>.</p>\n<pre><code> @Override\n public void run() {\n    try {  // Let no Exception reach the ScheduledExecutorService.\n        Instant instant = Instant.now() ;\n        System.out.println(&quot;Running scheduled update check &quot; + instant );\n        updateSubscriberService.checkForUpdates();\n    } catch ( Exception e ) {\n        System.out.println( &quot;ERROR - unexpected exception&quot; );\n    }\n}\n</code></pre>\n<h1>Stub out <code>run</code> method</h1>\n<p>Take baby steps. Begin with a <code>run</code> method that does nothing but a <code>System.out.println</code>.</p>\n"},{"tags":[],"owner":{"account_id":404833,"reputation":1416,"user_id":773371,"accept_rate":82,"display_name":"gcdev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576164696,"creation_date":1576164696,"answer_id":59308000,"question_id":44032059,"body_markdown":"Just in case you are ever in a position where the code MUST run once every-so-many-seconds even if the last run hasn&#39;t completed yet (which can be very dangerous if not managed properly), you can launch your process inside a different thread inside the timer. Here is sample code.\r\n\r\n    ScheduledExecutorService scheduledExecService = newSingleThreadScheduledExecutor();\r\n    scheduledExecService.scheduleWithFixedDelay(new Runnable()\r\n    {\r\n        @Override\r\n        public void run()\r\n        {\r\n            // This should be in a try-catch because any error here\r\n            // will stop the recurrence\r\n            try\r\n            {\r\n                // The timer will only repeat if the last run is finished. So\r\n                // we put each new process in a different thread than the timer\r\n                // itself, so the last timer call &quot;finishes&quot; as soon as the process\r\n                // leaves the timer&#39;s thread.\r\n                Thread t = new Thread(new Runnable()\r\n                {\r\n                    public void run()\r\n                    {\r\n                        try\r\n                        {\r\n                            android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);\r\n                            MyProcessThatShouldRunEverySoManySecondsNoMatterWhat();\r\n                        }\r\n                        catch (Exception erTimerThread)\r\n                        {\r\n                            Log.e(&quot;Error&quot;, erTimerThread.toString());\r\n                        }\r\n                    }\r\n                });\r\n                t.setPriority(2);\r\n                t.start();\r\n            }\r\n            catch (Exception erTimer)\r\n            {\r\n                Log.e(&quot;Error&quot;, erTimer.toString());\r\n            }\r\n        }\r\n    }, 0, 60, java.util.concurrent.TimeUnit.SECONDS);","title":"ScheduledExecutorService only runs once","body":"<p>Just in case you are ever in a position where the code MUST run once every-so-many-seconds even if the last run hasn't completed yet (which can be very dangerous if not managed properly), you can launch your process inside a different thread inside the timer. Here is sample code.</p>\n\n<pre><code>ScheduledExecutorService scheduledExecService = newSingleThreadScheduledExecutor();\nscheduledExecService.scheduleWithFixedDelay(new Runnable()\n{\n    @Override\n    public void run()\n    {\n        // This should be in a try-catch because any error here\n        // will stop the recurrence\n        try\n        {\n            // The timer will only repeat if the last run is finished. So\n            // we put each new process in a different thread than the timer\n            // itself, so the last timer call \"finishes\" as soon as the process\n            // leaves the timer's thread.\n            Thread t = new Thread(new Runnable()\n            {\n                public void run()\n                {\n                    try\n                    {\n                        android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);\n                        MyProcessThatShouldRunEverySoManySecondsNoMatterWhat();\n                    }\n                    catch (Exception erTimerThread)\n                    {\n                        Log.e(\"Error\", erTimerThread.toString());\n                    }\n                }\n            });\n            t.setPriority(2);\n            t.start();\n        }\n        catch (Exception erTimer)\n        {\n            Log.e(\"Error\", erTimer.toString());\n        }\n    }\n}, 0, 60, java.util.concurrent.TimeUnit.SECONDS);\n</code></pre>\n"}],"owner":{"account_id":8776200,"reputation":1508,"user_id":6561404,"accept_rate":89,"display_name":"MMAdams"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7366,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":44032149,"answer_count":2,"score":11,"last_activity_date":1681572594,"creation_date":1495044632,"question_id":44032059,"body_markdown":"I want a process to run after I start my webservice, and then every 30 minutes or so afterwards, (I&#39;m testing it with a smaller delay for now, just to see if it works), but my process never runs more than once. What am I doing wrong?\r\n\r\nHere is my code:\r\n\r\n    @WebListener\r\n    public class SchedulerService implements ServletContextListener{\r\n\t\r\n\t    @Autowired\r\n\t    UpdateSubscriberService updateSubscriberService;\r\n\t\r\n\t    ScheduledExecutorService scheduledExecService;\r\n\r\n\t\tpublic SchedulerService(){\r\n\t\t\tscheduledExecService = Executors.newSingleThreadScheduledExecutor();\r\n\t\t}\r\n\t\r\n\t    @Override\r\n\t    public void contextDestroyed(ServletContextEvent arg0) {\r\n\t    \tscheduledExecService.shutdown();\r\n\t    }\r\n\r\n    \t@Override\r\n    \tpublic void contextInitialized(ServletContextEvent arg0) {\r\n\t    \tscheduledExecService.scheduleWithFixedDelay(new Runnable(){\r\n\t    \t\t@Override\r\n\t\t    \tpublic void run() {\r\n\t\t\t    \tDate date = new Date(System.currentTimeMillis());\r\n\t\t\t\t    System.out.println(&quot;Running scheduled update check &quot; + date.toString());\r\n\t\t\t\t    updateSubscriberService.checkForUpdates();\r\n\t\t\t    }\r\n\t    \t}, 60, 30, TimeUnit.SECONDS);\r\n\t    }\r\n    }\r\n\r\n","title":"ScheduledExecutorService only runs once","body":"<p>I want a process to run after I start my webservice, and then every 30 minutes or so afterwards, (I'm testing it with a smaller delay for now, just to see if it works), but my process never runs more than once. What am I doing wrong?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>@WebListener\npublic class SchedulerService implements ServletContextListener{\n\n    @Autowired\n    UpdateSubscriberService updateSubscriberService;\n\n    ScheduledExecutorService scheduledExecService;\n\n    public SchedulerService(){\n        scheduledExecService = Executors.newSingleThreadScheduledExecutor();\n    }\n\n    @Override\n    public void contextDestroyed(ServletContextEvent arg0) {\n        scheduledExecService.shutdown();\n    }\n\n    @Override\n    public void contextInitialized(ServletContextEvent arg0) {\n        scheduledExecService.scheduleWithFixedDelay(new Runnable(){\n            @Override\n            public void run() {\n                Date date = new Date(System.currentTimeMillis());\n                System.out.println(\"Running scheduled update check \" + date.toString());\n                updateSubscriberService.checkForUpdates();\n            }\n        }, 60, 30, TimeUnit.SECONDS);\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","spring","hibernate"],"comments":[{"owner":{"account_id":9150413,"reputation":4837,"user_id":6805190,"display_name":"dassum"},"score":0,"creation_date":1583076365,"post_id":60476521,"comment_id":106987012,"body_markdown":"check 3306 port is open or not? try telnet on 3306 or try to connect to the database using some client.","body":"check 3306 port is open or not? try telnet on 3306 or try to connect to the database using some client."}],"answers":[{"tags":[],"owner":{"account_id":16832467,"reputation":7,"user_id":12170088,"display_name":"Mayank karn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1583140334,"creation_date":1583140334,"answer_id":60485603,"question_id":60476521,"body_markdown":"  String url = &quot;jdbc:mysql://localhost:8889/db_name&quot;;\r\n\r\nConnection conn = DriverManager.getConnection(url, dbUsername, dbPassword);","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure in JPA project","body":"<p>String url = \"jdbc:mysql://localhost:8889/db_name\";</p>\n\n<p>Connection conn = DriverManager.getConnection(url, dbUsername, dbPassword);</p>\n"},{"comments":[{"owner":{"account_id":286944,"reputation":600,"user_id":586482,"accept_rate":33,"display_name":"Charles Mosndup"},"score":0,"creation_date":1590421988,"post_id":60491672,"comment_id":109667046,"body_markdown":"This is the answer for accessing remote mysql DB.","body":"This is the answer for accessing remote mysql DB."}],"tags":[],"owner":{"account_id":17735444,"reputation":105,"user_id":12876920,"display_name":"discription"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1583161811,"creation_date":1583161811,"answer_id":60491672,"question_id":60476521,"body_markdown":"I was too obsessed with port permits. This was my big mistake. I was missing mysql setup file.\r\n\r\nMysql&#39;s address was tied locally. I annotated this part and solved the problem.\r\n\r\n**/etc/mysql/mysql.conf.d/mysqld.cnf**\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8AE6d.png","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure in JPA project","body":"<p>I was too obsessed with port permits. This was my big mistake. I was missing mysql setup file.</p>\n\n<p>Mysql's address was tied locally. I annotated this part and solved the problem.</p>\n\n<p><strong>/etc/mysql/mysql.conf.d/mysqld.cnf</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/8AE6d.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":[],"owner":{"account_id":9660877,"reputation":11,"user_id":7169004,"display_name":"Mr.Nestorjava"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655902027,"creation_date":1655902027,"answer_id":72715809,"question_id":60476521,"body_markdown":"For those having this issue on MAC using XAMPP, the problem is that XAMPP is not listening on port 3306 which is the default port of  mysql.\r\n\r\nTo solve this, simply add and enable this port forwarding on XAMPP\r\n\r\n[Add the port forwarding for mysql as shown][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/R7Zl1.png","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure in JPA project","body":"<p>For those having this issue on MAC using XAMPP, the problem is that XAMPP is not listening on port 3306 which is the default port of  mysql.</p>\n<p>To solve this, simply add and enable this port forwarding on XAMPP</p>\n<p><a href=\"https://i.stack.imgur.com/R7Zl1.png\" rel=\"nofollow noreferrer\">Add the port forwarding for mysql as shown</a></p>\n"},{"tags":[],"owner":{"account_id":22938461,"reputation":538,"user_id":17071589,"display_name":"abdella"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663259076,"creation_date":1663259076,"answer_id":73734550,"question_id":60476521,"body_markdown":"If **host**, **port**, **DB name**, **user** and **password** are correct, but failed to connect check Security group rules in your Db instance inbound is allow every IP address for **AWS RDS** for example looks like as:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xkkbw.png","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure in JPA project","body":"<p>If <strong>host</strong>, <strong>port</strong>, <strong>DB name</strong>, <strong>user</strong> and <strong>password</strong> are correct, but failed to connect check Security group rules in your Db instance inbound is allow every IP address for <strong>AWS RDS</strong> for example looks like as:\n<a href=\"https://i.stack.imgur.com/xkkbw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xkkbw.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"owner":{"account_id":18081224,"reputation":1563,"user_id":13143331,"display_name":"Dorian349"},"score":1,"creation_date":1681889905,"post_id":76023187,"comment_id":134128037,"body_markdown":"Not related to the topic.","body":"Not related to the topic."}],"tags":[],"owner":{"account_id":28314182,"reputation":1,"user_id":21651002,"display_name":"Nirodha Sandanuwan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681572432,"creation_date":1681572432,"answer_id":76023187,"question_id":60476521,"body_markdown":"First of all you must need to check your mySql server is running or not . Got to your services and check that .","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure in JPA project","body":"<p>First of all you must need to check your mySql server is running or not . Got to your services and check that .</p>\n"}],"owner":{"account_id":17735444,"reputation":105,"user_id":12876920,"display_name":"discription"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20198,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60491672,"answer_count":5,"score":0,"last_activity_date":1681572432,"creation_date":1583075571,"question_id":60476521,"body_markdown":"I used a DB that was already local, but now I want to connect it to a DB that is on a cloud server. However, the connection fails. What&#39;s the problem?\r\n\r\n**application.yml**\r\n\r\n~~~yml\r\nspring:\r\n  datasource:\r\n      drive-class-name: com.mysql.cj.jdbc.Driver\r\n#      url: jdbc:mysql://localhost:3306/sys?serverTimezone=UTC&amp;characterEncoding=UTF-8\r\n      url: jdbc:mysql://00.00.00.00:3306/sys?serverTimezone=UTC&amp;characterEncoding=UTF-8\r\n      username: root\r\n      password: &quot;thispassword&quot;\r\n  jpa:\r\n    database: mysql\r\n    database-platform: org.hibernate.dialect.MySQL5InnoDBDialect\r\n    general-ddl: true\r\n    show-sql: true\r\n    hibernate:\r\n      format_sql: true\r\n      ddl-auto: create\r\n~~~\r\n\r\nThe db server can access the server through ssh.\r\n\r\n**About IP area settings for my cloud DB server**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nMy Error Log\r\n~~~\r\n\r\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:836) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:456) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:197) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-3.4.2.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:354) ~[HikariCP-3.4.2.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202) ~[HikariCP-3.4.2.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:473) [HikariCP-3.4.2.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:554) [HikariCP-3.4.2.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) [HikariCP-3.4.2.jar:na]\r\n\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) [HikariCP-3.4.2.jar:na]\r\n\tat com.zaxxer.hikari.HikariDataSource$$FastClassBySpringCGLIB$$eeb1ae86.invoke(&lt;generated&gt;) [HikariCP-3.4.2.jar:na]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) [spring-core-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:136) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat com.zaxxer.hikari.HikariDataSource$$EnhancerBySpringCGLIB$$d5afa861.getConnection(&lt;generated&gt;) [HikariCP-3.4.2.jar:na]\r\n\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:152) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:176) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:118) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1202) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1233) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:391) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:378) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1855) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1792) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:595) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1108) ~[spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868) ~[spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550) ~[spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1226) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1215) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\r\n\tat com.springboard.backend.Application.main(Application.java:20) ~[main/:na]\r\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.8.0_241]\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:1.8.0_241]\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:1.8.0_241]\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423) ~[na:1.8.0_241]\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:91) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.NativeSession.connect(NativeSession.java:144) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:956) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:826) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\t... 60 common frames omitted\r\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\r\n\tat java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_241]\r\n\tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_241]\r\n\tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_241]\r\n\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_241]\r\n\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_241]\r\n\tat java.net.Socket.connect(Socket.java:606) ~[na:1.8.0_241]\r\n\tat com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:155) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:65) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\t... 63 common frames omitted\r\n\r\n2020-03-01 22:02:54.281  WARN 2612 --- [           main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : HHH000342: Could not obtain connection to query metadata : Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n2020-03-01 22:02:54.287  INFO 2612 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect\r\nHibernate: alter table user_role drop foreign key FKj345gk1bovqvfame88rcx7yyx\r\n2020-03-01 22:02:54.698  INFO 2612 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2020-03-01 22:02:55.711 ERROR 2612 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.\r\n\r\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n~~~\r\n\r\nAfter I set up the IP of the db server, I added the error information that I saw when I built it.\r\n\r\n&gt; NOTE: The `&#39;00.00.00.00&#39;` in my question is not the address I entered.\r\n&gt; I did not enter the question because it is my private authorized IP.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sVykw.png","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure in JPA project","body":"<p>I used a DB that was already local, but now I want to connect it to a DB that is on a cloud server. However, the connection fails. What's the problem?</p>\n\n<p><strong>application.yml</strong></p>\n\n<pre><code>spring:\n  datasource:\n      drive-class-name: com.mysql.cj.jdbc.Driver\n#      url: jdbc:mysql://localhost:3306/sys?serverTimezone=UTC&amp;characterEncoding=UTF-8\n      url: jdbc:mysql://00.00.00.00:3306/sys?serverTimezone=UTC&amp;characterEncoding=UTF-8\n      username: root\n      password: \"thispassword\"\n  jpa:\n    database: mysql\n    database-platform: org.hibernate.dialect.MySQL5InnoDBDialect\n    general-ddl: true\n    show-sql: true\n    hibernate:\n      format_sql: true\n      ddl-auto: create\n</code></pre>\n\n<p>The db server can access the server through ssh.</p>\n\n<p><strong>About IP area settings for my cloud DB server</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/sVykw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sVykw.png\" alt=\"enter image description here\"></a></p>\n\n<p>My Error Log</p>\n\n<pre><code>\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:836) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:456) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:197) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-3.4.2.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:354) ~[HikariCP-3.4.2.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202) ~[HikariCP-3.4.2.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:473) [HikariCP-3.4.2.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:554) [HikariCP-3.4.2.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) [HikariCP-3.4.2.jar:na]\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) [HikariCP-3.4.2.jar:na]\n    at com.zaxxer.hikari.HikariDataSource$$FastClassBySpringCGLIB$$eeb1ae86.invoke(&lt;generated&gt;) [HikariCP-3.4.2.jar:na]\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) [spring-core-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:136) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at com.zaxxer.hikari.HikariDataSource$$EnhancerBySpringCGLIB$$d5afa861.getConnection(&lt;generated&gt;) [HikariCP-3.4.2.jar:na]\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:152) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:176) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:118) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1202) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1233) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:391) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:378) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1855) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1792) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:595) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1108) ~[spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868) ~[spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550) ~[spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1215) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\n    at com.springboard.backend.Application.main(Application.java:20) ~[main/:na]\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.8.0_241]\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:1.8.0_241]\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:1.8.0_241]\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423) ~[na:1.8.0_241]\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:91) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.NativeSession.connect(NativeSession.java:144) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:956) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:826) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    ... 60 common frames omitted\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\n    at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_241]\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_241]\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_241]\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_241]\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_241]\n    at java.net.Socket.connect(Socket.java:606) ~[na:1.8.0_241]\n    at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:155) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:65) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    ... 63 common frames omitted\n\n2020-03-01 22:02:54.281  WARN 2612 --- [           main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : HHH000342: Could not obtain connection to query metadata : Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n2020-03-01 22:02:54.287  INFO 2612 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect\nHibernate: alter table user_role drop foreign key FKj345gk1bovqvfame88rcx7yyx\n2020-03-01 22:02:54.698  INFO 2612 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2020-03-01 22:02:55.711 ERROR 2612 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.\n\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n</code></pre>\n\n<p>After I set up the IP of the db server, I added the error information that I saw when I built it.</p>\n\n<blockquote>\n  <p>NOTE: The <code>'00.00.00.00'</code> in my question is not the address I entered.\n  I did not enter the question because it is my private authorized IP.</p>\n</blockquote>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3471610,"reputation":15228,"user_id":2905768,"accept_rate":80,"display_name":"PMF"},"score":3,"creation_date":1681570329,"post_id":76022968,"comment_id":134079461,"body_markdown":"Please post the exact error message you get.","body":"Please post the exact error message you get."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":3,"creation_date":1681570340,"post_id":76022968,"comment_id":134079463,"body_markdown":"&quot;*doesn&#39;t compile*&quot; like there is an error, or what? If you got an error, please include the error message in question - helpful information (most often)","body":"&quot;<i>doesn&#39;t compile</i>&quot; like there is an error, or what? If you got an error, please include the error message in question - helpful information (most often)"},{"owner":{"account_id":261035,"reputation":6348,"user_id":544963,"accept_rate":100,"display_name":"fireshadow52"},"score":0,"creation_date":1681570614,"post_id":76022968,"comment_id":134079496,"body_markdown":"Looks like you&#39;re trying to instantiate a `ValueWriter`, which you can&#39;t do because it&#39;s an interface, not a class.","body":"Looks like you&#39;re trying to instantiate a <code>ValueWriter</code>, which you can&#39;t do because it&#39;s an interface, not a class."},{"owner":{"account_id":6014302,"reputation":75,"user_id":4723717,"display_name":"Tanse"},"score":0,"creation_date":1681570862,"post_id":76022968,"comment_id":134079531,"body_markdown":"Edited to add the exact error message","body":"Edited to add the exact error message"},{"owner":{"account_id":17000499,"reputation":48417,"user_id":12299000,"display_name":"kaya3"},"score":0,"creation_date":1681571871,"post_id":76022968,"comment_id":134079688,"body_markdown":"Your type says the writer need only accept some unknown subtype of `Value`, so how do you know that the value you&#39;re giving it is of the subtype it accepts? If you want a `ValueWriter` to accept any type of `Value`, then there is no need for it to be generic.","body":"Your type says the writer need only accept some unknown subtype of <code>Value</code>, so how do you know that the value you&#39;re giving it is of the subtype it accepts? If you want a <code>ValueWriter</code> to accept any type of <code>Value</code>, then there is no need for it to be generic."},{"owner":{"account_id":6014302,"reputation":75,"user_id":4723717,"display_name":"Tanse"},"score":0,"creation_date":1681571973,"post_id":76022968,"comment_id":134079704,"body_markdown":"@kaya3 - What I&#39;m passing is by definition a subtype of `Value`, shouldn&#39;t that be enough?","body":"@kaya3 - What I&#39;m passing is by definition a subtype of <code>Value</code>, shouldn&#39;t that be enough?"},{"owner":{"account_id":17000499,"reputation":48417,"user_id":12299000,"display_name":"kaya3"},"score":0,"creation_date":1681572109,"post_id":76022968,"comment_id":134079726,"body_markdown":"A cat is a kind of animal and so is a dog. A `ValueWriter&lt;Dog&gt;` need not accept anything that isn&#39;t a dog. So what happens when you try to give it a cat?","body":"A cat is a kind of animal and so is a dog. A <code>ValueWriter&lt;Dog&gt;</code> need not accept anything that isn&#39;t a dog. So what happens when you try to give it a cat?"}],"answers":[{"tags":[],"owner":{"account_id":17823878,"reputation":1064,"user_id":12945569,"display_name":"Fr&#233;d&#233;ric LOYER"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1681572204,"creation_date":1681572204,"answer_id":76023176,"question_id":76022968,"body_markdown":"When you write:\r\n\r\n```java\r\nValueWriter&lt;? extends Value&gt; valueWriter = writer.getValue();\r\n```\r\n\r\n`valueWriter` may be a type `ValueWriter&lt;A&gt;` where `A` extends `Value`.\r\n\r\nThen `valueWriter.write` expect something of type `A`... and you give `v` of type `Value`. The compiler can&#39;t assure `v` is a type `A` (depending of the actual `valueWriter` type).\r\n\r\nYou should rewrite the program using something like:\r\n\r\n```java\r\nValueWriter&lt;A&gt; valueWriter = writer.getValue();\r\n```\r\n\r\nWhere `A` extends `Value`, and set `A`as the type of `v`. `A` should be introduced somewhere by the program.\r\n","title":"Why does my use of Java generics extends not work?","body":"<p>When you write:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ValueWriter&lt;? extends Value&gt; valueWriter = writer.getValue();\n</code></pre>\n<p><code>valueWriter</code> may be a type <code>ValueWriter&lt;A&gt;</code> where <code>A</code> extends <code>Value</code>.</p>\n<p>Then <code>valueWriter.write</code> expect something of type <code>A</code>... and you give <code>v</code> of type <code>Value</code>. The compiler can't assure <code>v</code> is a type <code>A</code> (depending of the actual <code>valueWriter</code> type).</p>\n<p>You should rewrite the program using something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ValueWriter&lt;A&gt; valueWriter = writer.getValue();\n</code></pre>\n<p>Where <code>A</code> extends <code>Value</code>, and set <code>A</code>as the type of <code>v</code>. <code>A</code> should be introduced somewhere by the program.</p>\n"}],"owner":{"account_id":6014302,"reputation":75,"user_id":4723717,"display_name":"Tanse"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76023176,"answer_count":1,"score":0,"last_activity_date":1681572204,"creation_date":1681570125,"question_id":76022968,"body_markdown":"This code doesn&#39;t compile and I have a hard time understanding why:\r\n```\r\nprivate final Map&lt;String, ValueWriter&lt;? extends Value&gt;&gt; valueWriters = new HashMap&lt;&gt;();\r\n\r\npublic void write(CompositeValue value) throws IOException {\r\n    for (Entry&lt;String, ValueWriter&lt;? extends Value&gt;&gt; writer : valueWriters.entrySet()) {\r\n        Value v = value.getValue().get(writer.getKey());\r\n        ValueWriter&lt;? extends Value&gt; valueWriter = writer.getValue();\r\n        valueWriter.write(v);\r\n    }\r\n}\r\n```\r\n\r\nThis gives me the following compilation error at `valueWriter.write(v)`: \r\n```\r\nincompatible types: Value cannot be converted to capture#1 of ? extends Value\r\n```\r\n\r\nWhere ValueWriter is implemented as follows:\r\n\r\n```\r\npublic interface ValueWriter&lt;T extends Value&gt; {\r\n    void write(T value) throws IOException;\r\n    void delete(Key key) throws IOException;\r\n}\r\n```\r\n\r\nBasically, I would expect `valueWriter` to accept any class implementing the interface Value. Why doesn&#39;t this work, and how can I implement it so that it does?\r\n\r\n\r\nMinimal reproducible example:\r\n\r\n```\r\npublic class Main {\r\n    private ValueWriter&lt;? extends Value&gt; writer;\r\n\r\n    public void write(Value v) {\r\n        writer.write(v);\r\n    }\r\n    \r\n    interface Value {\r\n        \r\n    }\r\n    interface ValueWriter&lt;T extends Value&gt; {\r\n        void write(T v);\r\n    }\r\n}\r\n```","title":"Why does my use of Java generics extends not work?","body":"<p>This code doesn't compile and I have a hard time understanding why:</p>\n<pre><code>private final Map&lt;String, ValueWriter&lt;? extends Value&gt;&gt; valueWriters = new HashMap&lt;&gt;();\n\npublic void write(CompositeValue value) throws IOException {\n    for (Entry&lt;String, ValueWriter&lt;? extends Value&gt;&gt; writer : valueWriters.entrySet()) {\n        Value v = value.getValue().get(writer.getKey());\n        ValueWriter&lt;? extends Value&gt; valueWriter = writer.getValue();\n        valueWriter.write(v);\n    }\n}\n</code></pre>\n<p>This gives me the following compilation error at <code>valueWriter.write(v)</code>:</p>\n<pre><code>incompatible types: Value cannot be converted to capture#1 of ? extends Value\n</code></pre>\n<p>Where ValueWriter is implemented as follows:</p>\n<pre><code>public interface ValueWriter&lt;T extends Value&gt; {\n    void write(T value) throws IOException;\n    void delete(Key key) throws IOException;\n}\n</code></pre>\n<p>Basically, I would expect <code>valueWriter</code> to accept any class implementing the interface Value. Why doesn't this work, and how can I implement it so that it does?</p>\n<p>Minimal reproducible example:</p>\n<pre><code>public class Main {\n    private ValueWriter&lt;? extends Value&gt; writer;\n\n    public void write(Value v) {\n        writer.write(v);\n    }\n    \n    interface Value {\n        \n    }\n    interface ValueWriter&lt;T extends Value&gt; {\n        void write(T v);\n    }\n}\n</code></pre>\n"},{"tags":["python","java","algorithm","jwt"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1681539249,"post_id":76020607,"comment_id":134075929,"body_markdown":"`secret = &#39;abcdefghijklmnopqrstuvwxyz&#39;;` isn&#39;t valid Java.","body":"<code>secret = &#39;abcdefghijklmnopqrstuvwxyz&#39;;</code> isn&#39;t valid Java."},{"owner":{"account_id":9658840,"reputation":4274,"user_id":7167572,"accept_rate":100,"display_name":"Tatranskymedved"},"score":0,"creation_date":1681541874,"post_id":76020607,"comment_id":134076143,"body_markdown":"There are some more details at this [web about JSON web tokens in python](https://elc.github.io/python-security/chapters/10_JSON_Web_Tokens.html). However, my best shot would be that the encoding for those characters would be different in Python/Java, thus generating different results. I&#39;m not native to either language, so idk exactly how they behave.","body":"There are some more details at this <a href=\"https://elc.github.io/python-security/chapters/10_JSON_Web_Tokens.html\" rel=\"nofollow noreferrer\">web about JSON web tokens in python</a>. However, my best shot would be that the encoding for those characters would be different in Python/Java, thus generating different results. I&#39;m not native to either language, so idk exactly how they behave."},{"owner":{"account_id":27963662,"reputation":71,"user_id":21354950,"display_name":"takaki"},"score":0,"creation_date":1681568437,"post_id":76020607,"comment_id":134079212,"body_markdown":"Thank you for your answer, yes i see what you mean, i just wanted to express that the result is different when the key is the same.","body":"Thank you for your answer, yes i see what you mean, i just wanted to express that the result is different when the key is the same."}],"answers":[{"comments":[{"owner":{"account_id":27963662,"reputation":71,"user_id":21354950,"display_name":"takaki"},"score":0,"creation_date":1681570194,"post_id":76021020,"comment_id":134079439,"body_markdown":"Thank you for your answer, let me understand that this is indeed a key character encoding problem. After adding the secret.getBytes() code to the java code, the same key is really generated, but I still don&#39;t understand how to modify the python code to achieve , sorry I&#39;m just a beginner.","body":"Thank you for your answer, let me understand that this is indeed a key character encoding problem. After adding the secret.getBytes() code to the java code, the same key is really generated, but I still don&#39;t understand how to modify the python code to achieve , sorry I&#39;m just a beginner."}],"tags":[],"owner":{"account_id":5209321,"reputation":116,"user_id":4166251,"display_name":"Stanimir Stamenkov"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681571204,"creation_date":1681545558,"answer_id":76021020,"question_id":76020607,"body_markdown":"Reading the API docs:\r\n\r\n-    [`jwt.encode(payload, key, algorithm=&quot;HS256&quot;, headers=None, json_encoder=None)`](https://pyjwt.readthedocs.io/en/stable/api.html?highlight=jwt#jwt.encode) (Python)\r\n-    [`JwtBuilder.signWith(SignatureAlgorithm alg, String base64EncodedSecretKey)`](https://javadoc.io/static/io.jsonwebtoken/jjwt-api/0.11.5/io/jsonwebtoken/JwtBuilder.html#signWith(io.jsonwebtoken.SignatureAlgorithm,%20java.lang.String)) (Java)\r\n\r\nI&#39;m speculating you need to be using:\r\n\r\n-   [`JwtBuilder.signWith(SignatureAlgorithm alg, byte[] secretKey)`](https://javadoc.io/static/io.jsonwebtoken/jjwt-api/0.11.5/io/jsonwebtoken/JwtBuilder.html#signWith(io.jsonwebtoken.SignatureAlgorithm,%20byte[])) (Java)\r\n\r\n```java\r\n    String secret = &quot;...&quot;; // The same as with Python\r\n    ...\r\n    String jwttoken = Jwts.builder()\r\n            ...\r\n            .signWith(SignatureAlgorithm.HS512, secret.getBytes())\r\n            .compact();\r\n```\r\n\r\nAlternatively, if your Java result is already as intended, you might need to change the Python code like:\r\n\r\n```python\r\nimport base64\r\n...\r\nencoded_jwt = jwt.encode(payload, base64.b64decode(secret), algorithm=&#39;HS512&#39;, headers=headers)\r\n```\r\n\r\n_Disclaimer:_ I don&#39;t have any Python experience.","title":"why Java code and Python code generate different signature of encode_jwt","body":"<p>Reading the API docs:</p>\n<ul>\n<li><a href=\"https://pyjwt.readthedocs.io/en/stable/api.html?highlight=jwt#jwt.encode\" rel=\"nofollow noreferrer\"><code>jwt.encode(payload, key, algorithm=&quot;HS256&quot;, headers=None, json_encoder=None)</code></a> (Python)</li>\n<li><a href=\"https://javadoc.io/static/io.jsonwebtoken/jjwt-api/0.11.5/io/jsonwebtoken/JwtBuilder.html#signWith(io.jsonwebtoken.SignatureAlgorithm,%20java.lang.String)\" rel=\"nofollow noreferrer\"><code>JwtBuilder.signWith(SignatureAlgorithm alg, String base64EncodedSecretKey)</code></a> (Java)</li>\n</ul>\n<p>I'm speculating you need to be using:</p>\n<ul>\n<li><a href=\"https://javadoc.io/static/io.jsonwebtoken/jjwt-api/0.11.5/io/jsonwebtoken/JwtBuilder.html#signWith(io.jsonwebtoken.SignatureAlgorithm,%20byte%5B%5D)\" rel=\"nofollow noreferrer\"><code>JwtBuilder.signWith(SignatureAlgorithm alg, byte[] secretKey)</code></a> (Java)</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>    String secret = &quot;...&quot;; // The same as with Python\n    ...\n    String jwttoken = Jwts.builder()\n            ...\n            .signWith(SignatureAlgorithm.HS512, secret.getBytes())\n            .compact();\n</code></pre>\n<p>Alternatively, if your Java result is already as intended, you might need to change the Python code like:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import base64\n...\nencoded_jwt = jwt.encode(payload, base64.b64decode(secret), algorithm='HS512', headers=headers)\n</code></pre>\n<p><em>Disclaimer:</em> I don't have any Python experience.</p>\n"}],"owner":{"account_id":27963662,"reputation":71,"user_id":21354950,"display_name":"takaki"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1681571204,"creation_date":1681538078,"question_id":76020607,"body_markdown":"#1. python code:\r\n```\r\npayload = {&quot;login_user_key&quot;: &quot;b7c5443c-5395-46b0-b6c1-d940fd686880&quot;}\r\nsecret = &#39;abcdefghijklmnopqrstuvwxyz&#39;\r\nheaders = {&quot;alg&quot;: &quot;HS512&quot;, &quot;typ&quot;: &quot;JWT&quot;}\r\nencoded_jwt = jwt.encode(payload, secret, algorithm=&#39;HS512&#39;, headers=headers)\r\nprint(encoded_jwt)\r\n```\r\n#result:eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJsb2dpbl91c2VyX2tleSI6ImI3YzU0NDNjLTUzOTUtNDZiMC1iNmMxLWQ5NDBmZDY4Njg4MCJ9.fmhdCmM4BJBOASK_UXtRoszP0Q614mDlQ3iDU9_ZFCr--jh--OHG8o5aCG4Zgpcpmsry9NH1LY-4Bd_NN0mmQQ\r\n\r\n\r\n//2. java code:\r\n```\r\n        String secret = &quot;abcdefghijklmnopqrstuvwxyz&quot;;\r\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n        claims.put(&quot;login_user_key&quot;, &quot;b7c5443c-5395-46b0-b6c1-d940fd686880&quot;);\r\n        String jwttoken = Jwts.builder()\r\n                .setHeaderParam(&quot;alg&quot;, &quot;HS512&quot;)\r\n                .setHeaderParam(&quot;typ&quot;, &quot;JWT&quot;)\r\n                .setClaims(claims)\r\n                .signWith(SignatureAlgorithm.HS512, secret).compact();\r\n        System.out.println(jwttoken);\r\n```\r\n//result:eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJsb2dpbl91c2VyX2tleSI6ImI3YzU0NDNjLTUzOTUtNDZiMC1iNmMxLWQ5NDBmZDY4Njg4MCJ9.Gat6BTTXtwC_XWN4pZjqC-x4Bw24xfpNXmLIMSysa3FJaPvpnXcjO0wp6FBlKtrfYyqZRQARQbE4rGwhAOY_eg\r\n\r\n\r\nplease tell me that Java code and Python code generate different signature of encode_jwt ,and modify the python code to make the final generated jwt the same. please....\r\n\r\n\r\nI tried to use chatgpt to give an answer, but it didn&#39;t work, it may not be a problem with key encoding, maybe a problem with json data or string data?","title":"why Java code and Python code generate different signature of encode_jwt","body":"<p>#1. python code:</p>\n<pre><code>payload = {&quot;login_user_key&quot;: &quot;b7c5443c-5395-46b0-b6c1-d940fd686880&quot;}\nsecret = 'abcdefghijklmnopqrstuvwxyz'\nheaders = {&quot;alg&quot;: &quot;HS512&quot;, &quot;typ&quot;: &quot;JWT&quot;}\nencoded_jwt = jwt.encode(payload, secret, algorithm='HS512', headers=headers)\nprint(encoded_jwt)\n</code></pre>\n<p>#result:eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJsb2dpbl91c2VyX2tleSI6ImI3YzU0NDNjLTUzOTUtNDZiMC1iNmMxLWQ5NDBmZDY4Njg4MCJ9.fmhdCmM4BJBOASK_UXtRoszP0Q614mDlQ3iDU9_ZFCr--jh--OHG8o5aCG4Zgpcpmsry9NH1LY-4Bd_NN0mmQQ</p>\n<p>//2. java code:</p>\n<pre><code>        String secret = &quot;abcdefghijklmnopqrstuvwxyz&quot;;\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n        claims.put(&quot;login_user_key&quot;, &quot;b7c5443c-5395-46b0-b6c1-d940fd686880&quot;);\n        String jwttoken = Jwts.builder()\n                .setHeaderParam(&quot;alg&quot;, &quot;HS512&quot;)\n                .setHeaderParam(&quot;typ&quot;, &quot;JWT&quot;)\n                .setClaims(claims)\n                .signWith(SignatureAlgorithm.HS512, secret).compact();\n        System.out.println(jwttoken);\n</code></pre>\n<p>//result:eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJsb2dpbl91c2VyX2tleSI6ImI3YzU0NDNjLTUzOTUtNDZiMC1iNmMxLWQ5NDBmZDY4Njg4MCJ9.Gat6BTTXtwC_XWN4pZjqC-x4Bw24xfpNXmLIMSysa3FJaPvpnXcjO0wp6FBlKtrfYyqZRQARQbE4rGwhAOY_eg</p>\n<p>please tell me that Java code and Python code generate different signature of encode_jwt ,and modify the python code to make the final generated jwt the same. please....</p>\n<p>I tried to use chatgpt to give an answer, but it didn't work, it may not be a problem with key encoding, maybe a problem with json data or string data?</p>\n"},{"tags":["java","itext"],"owner":{"account_id":8760132,"reputation":11,"user_id":6550288,"accept_rate":0,"display_name":"Nitin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":319,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681571138,"creation_date":1681276493,"question_id":75992104,"body_markdown":"Below is Java code, where I try to convert a HTML file into PDF using Java with iText.\r\n\r\n```java\r\npublic static void generatePDFTestThree() {\r\n\ttry {\r\n\t\t String dirPath=&quot;F:\\\\Nitin\\\\ppi\\\\GPR\\\\form_pdf&quot;;\r\n        //Setting destination \r\n        FileInputStream fileInputStream = new FileInputStream(new File(dirPath+&quot;/PagePdf.html&quot;));\r\n        FileOutputStream fileOutputStream = new FileOutputStream(new File(dirPath + &quot;/PageHtmlToPdf.pdf&quot;));\r\n        \r\n        PdfWriter pdfWriter = new PdfWriter(fileOutputStream);\r\n        ConverterProperties converterProperties = new ConverterProperties();\r\n        converterProperties.setLimitOfLayouts(4);\r\n        PdfDocument pdfDocument = new PdfDocument(pdfWriter);\r\n        converterProperties.setBaseUri(&quot;src/resources/images&quot;);\r\n        //For setting the PAGE SIZE\r\n        pdfDocument.setDefaultPageSize(new PageSize(PageSize.LETTER));\r\n        \r\n        Document document = HtmlConverter.convertToDocument(fileInputStream, pdfDocument, converterProperties);\r\n        document.close();\r\n    } \r\n    catch (Exception e) {\r\n         e.printStackTrace();\r\n    }\r\n}\r\n```\r\n\r\nBelow is my HTML file which I try to convert to PDF.\r\n\r\n```html\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;utf-8&quot;/&gt;\r\n&lt;meta name=&quot;generator&quot; content=&quot;pdf2htmlEX&quot;/&gt;\r\n&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot;/&gt;\r\n&lt;style type=&quot;text/css&quot;&gt;\r\n#sidebar{position:absolute;top:0;left:0;bottom:0;width:250px;padding:0;margin:0;overflow:auto}#page-container{position:absolute;top:0;left:0;margin:0;padding:0;border:0}@media screen{#sidebar.opened+#page-container{left:250px}#page-container{bottom:0;right:0;overflow:auto}.loading-indicator{display:none}.loading-indicator.active{display:block;position:absolute;width:64px;height:64px;top:50%;left:50%;margin-top:-32px;margin-left:-32px}.loading-indicator img{position:absolute;top:0;left:0;bottom:0;right:0}}@media print{@page{margin:0}html{margin:0}body{text-align:left;margin:0;-webkit-print-color-adjust:exact}#sidebar{display:none}#page-container{width:auto;height:auto;overflow:visible;background-color:transparent}.d{display:none}}.pf{position:relative;background-color:white;overflow:hidden;margin:0;border:0}.pc{position:absolute;border:0;padding:0;margin:0;top:0;left:0;width:100%;height:100%;overflow:hidden;display:block;transform-origin:0 0;-ms-transform-origin:0 0;-webkit-transform-origin:0 0}.pc.opened{display:block}.bf{position:absolute;border:0;margin:0;top:0;bottom:0;width:100%;height:100%;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;user-select:none}.bi{position:absolute;border:0;margin:0;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;user-select:none}@media print{.pf{margin:0;box-shadow:none;page-break-after:always;page-break-inside:avoid}#fff}.pc{overflow:visible}}}.c{position:absolute;border:0;padding:0;margin:0;overflow:hidden;display:block}.t{position:absolute;white-space:pre;font-size:1px;transform-origin:0 100%;-ms-transform-origin:0 100%;-webkit-transform-origin:0 100%;unicode-bidi:bidi-override;-moz-font-feature-settings:&quot;liga&quot; 0}.t:after{content:&#39;&#39;}.t:before{content:&#39;&#39;}.t span{position:relative;unicode-bidi:bidi-override}._{color:transparent;z-index:-1}::selection{background:rgba(127,255,255,0.4)}::-moz-selection{background:rgba(127,255,255,0.4)}.pi{display:none}.d{position:absolute;transform-origin:0 100%;-ms-transform-origin:0 100%;-webkit-transform-origin:0 100%}.it{border:0;background-color:rgba(255,255,255,0.0)}.ir:hover{cursor:pointer}&lt;/style&gt;\r\n&lt;style type=&quot;text/css&quot;&gt;\r\n/*! \r\n * Fancy styles for pdf2htmlEX\r\n * Copyright 2012,2013 Lu Wang &lt;coolwanglu@gmail.com&gt; \r\n * https://github.com/pdf2htmlEX/pdf2htmlEX/blob/master/share/LICENSE\r\n */@media screen{#sidebar{background-color:#2f3236;background-image:url(&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjNDAzYzNmIj48L3JlY3Q+CjxwYXRoIGQ9Ik0wIDBMNCA0Wk00IDBMMCA0WiIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2U9IiMxZTI5MmQiPjwvcGF0aD4KPC9zdmc+&quot;)}#outline{font-family:Georgia,Times,&quot;Times New Roman&quot;,serif;font-size:13px;margin:2em 1em}#outline ul{padding:0}#outline li{list-style-type:none;margin:1em 0}#outline li&gt;ul{margin-left:1em}#outline a,#outline a:visited,#outline a:hover,#outline a:active{line-height:1.2;color:#e8e8e8;text-overflow:ellipsis;white-space:nowrap;text-decoration:none;display:block;overflow:hidden;outline:0}#outline a:hover{color:#0cf}#page-container{background-color:#9e9e9e;background-image:url(&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1IiBoZWlnaHQ9IjUiPgo8cmVjdCB3aWR0aD0iNSIgaGVpZ2h0PSI1IiBmaWxsPSIjOWU5ZTllIj48L3JlY3Q+CjxwYXRoIGQ9Ik0wIDVMNSAwWk02IDRMNCA2Wk0tMSAxTDEgLTFaIiBzdHJva2U9IiM4ODgiIHN0cm9rZS13aWR0aD0iMSI+PC9wYXRoPgo8L3N2Zz4=&quot;);-webkit-transition:left 500ms;transition:left 500ms}.pf{margin:13px auto;box-shadow:1px 1px 3px 1px #333;border-collapse:separate}.pc.opened{-webkit-animation:fadein 100ms;animation:fadein 100ms}.loading-indicator.active{-webkit-animation:swing 1.5s ease-in-out .01s infinite alternate none;animation:swing 1.5s ease-in-out .01s infinite alternate none}.checked{background:no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3goQDSYgDiGofgAAAslJREFUOMvtlM9LFGEYx7/vvOPM6ywuuyPFihWFBUsdNnA6KLIh+QPx4KWExULdHQ/9A9EfUodYmATDYg/iRewQzklFWxcEBcGgEplDkDtI6sw4PzrIbrOuedBb9MALD7zv+3m+z4/3Bf7bZS2bzQIAcrmcMDExcTeXy10DAFVVAQDksgFUVZ1ljD3yfd+0LOuFpmnvVVW9GHhkZAQcxwkNDQ2FSCQyRMgJxnVdy7KstKZpn7nwha6urqqfTqfPBAJAuVymlNLXoigOhfd5nmeiKL5TVTV+lmIKwAOA7u5u6Lped2BsbOwjY6yf4zgQQkAIAcedaPR9H67r3uYBQFEUFItFtLe332lpaVkUBOHK3t5eRtf1DwAwODiIubk5DA8PM8bYW1EU+wEgCIJqsCAIQAiB7/u253k2BQDDMJBKpa4mEon5eDx+UxAESJL0uK2t7XosFlvSdf0QAEmlUnlRFJ9Waho2Qghc1/U9z3uWz+eX+Wr+lL6SZfleEAQIggA8z6OpqSknimIvYyybSCReMsZ6TislhCAIAti2Dc/zejVNWwCAavN8339j27YbTg0AGGM3WltbP4WhlRWq6Q/btrs1TVsYHx+vNgqKoqBUKn2NRqPFxsbGJzzP05puUlpt0ukyOI6z7zjOwNTU1OLo6CgmJyf/gA3DgKIoWF1d/cIY24/FYgOU0pp0z/Ityzo8Pj5OTk9PbwHA+vp6zWghDC+VSiuRSOQgGo32UErJ38CO42wdHR09LBQK3zKZDDY2NupmFmF4R0cHVlZWlmRZ/iVJUn9FeWWcCCE4ODjYtG27Z2Zm5juAOmgdGAB2d3cBADs7O8uSJN2SZfl+WKlpmpumaT6Yn58vn/fs6XmbhmHMNjc3tzDGFI7jYJrm5vb29sDa2trPC/9aiqJUy5pOp4f6+vqeJ5PJBAB0dnZe/t8NBajx/z37Df5OGX8d13xzAAAAAElFTkSuQmCC)}}&lt;/style&gt;\r\n&lt;style type=&quot;text/css&quot;&gt;\r\n.ff0{font-family:sans-serif;visibility:hidden;}\r\n.ff3{font-family:ff3;line-height:1.037000;font-style:normal;font-weight:normal;visibility:visible;}\r\n.m1{transform:matrix(0.237173,0.000000,-0.079050,0.237173,0,0);-ms-transform:matrix(0.237173,0.000000,-0.079050,0.237173,0,0);-webkit-transform:matrix(0.237173,0.000000,-0.079050,0.237173,0,0);}\r\n.m0{transform:matrix(0.250000,0.000000,0.000000,0.250000,0,0);-ms-transform:matrix(0.250000,0.000000,0.000000,0.250000,0,0);-webkit-transform:matrix(0.250000,0.000000,0.000000,0.250000,0,0);}\r\n.v0{vertical-align:0.000000px;}\r\n.ls2{letter-spacing:0.000000px;}\r\n.ls1{letter-spacing:0.144000px;}\r\n.ls0{letter-spacing:0.376320px;}\r\n.sc_{text-shadow:none;}\r\n.sc1{text-shadow:-0.015em 0 transparent,0 0.015em transparent,0.015em 0 transparent,0 -0.015em  transparent;}\r\n.sc0{text-shadow:-0.015em 0 rgb(36,63,144),0 0.015em rgb(36,63,144),0.015em 0 rgb(36,63,144),0 -0.015em  rgb(36,63,144);}\r\n@media screen and (-webkit-min-device-pixel-ratio:0){\r\n.sc_{-webkit-text-stroke:0px transparent;}\r\n.sc1{-webkit-text-stroke:0.015em transparent;text-shadow:none;}\r\n.sc0{-webkit-text-stroke:0.015em rgb(36,63,144);text-shadow:none;}\r\n}\r\n.ws1{word-spacing:-9.600000px;}\r\n.ws0{word-spacing:-7.968000px;}\r\n.ws2{word-spacing:0.000000px;}\r\n._b{margin-left:-6.208000px;}\r\n._8{margin-left:-4.408000px;}\r\n._3{margin-left:-1.067040px;}\r\n._7{width:1.160000px;}\r\n._c{width:21.224000px;}\r\n._4{width:23.032000px;}\r\n._e{width:32.640000px;}\r\n._9{width:35.432000px;}\r\n._f{width:41.816000px;}\r\n._d{width:47.416000px;}\r\n._11{width:49.784000px;}\r\n._10{width:61.376000px;}\r\n._12{width:104.600000px;}\r\n._6{width:110.936000px;}\r\n._a{width:127.184000px;}\r\n._5{width:134.400000px;}\r\n._0{width:514.392000px;}\r\n._1{width:751.592000px;}\r\n._2{width:1934.320000px;}\r\n.fc3{color:transparent;}\r\n.fc2{color:rgb(30,30,30);}\r\n.fc1{color:rgb(0,0,0);}\r\n.fc0{color:rgb(36,63,144);}\r\n.fs4{font-size:20.160000px;}\r\n.fs1{font-size:32.160000px;}\r\n.fs5{font-size:33.899278px;}\r\n.fs0{font-size:39.840000px;}\r\n.fs2{font-size:48.000000px;}\r\n.fs3{font-size:56.160000px;}\r\n.y0{bottom:-0.500000px;}\r\n.y1{bottom:0.000000px;}\r\n.y4{bottom:40.320000px;}\r\n.y24{bottom:52.320000px;}\r\n.y22{bottom:80.280000px;}\r\n.y21{bottom:104.900000px;}\r\n.y20{bottom:129.500000px;}\r\n.y1f{bottom:154.100000px;}\r\n.y1e{bottom:175.460000px;}\r\n.y1d{bottom:193.100000px;}\r\n.y1c{bottom:214.460000px;}\r\n.y1b{bottom:235.100000px;}\r\n.y1a{bottom:259.700000px;}\r\n.y19{bottom:284.330000px;}\r\n.y18{bottom:308.930000px;}\r\n.y17{bottom:333.530000px;}\r\n.y16{bottom:358.130000px;}\r\n.y15{bottom:382.730000px;}\r\n.y14{bottom:407.330000px;}\r\n.y13{bottom:431.950000px;}\r\n.y12{bottom:456.550000px;}\r\n.y11{bottom:481.150000px;}\r\n.y10{bottom:505.750000px;}\r\n.yf{bottom:530.350000px;}\r\n.ye{bottom:554.950000px;}\r\n.yd{bottom:579.550000px;}\r\n.y23{bottom:595.180000px;}\r\n.yc{bottom:604.180000px;}\r\n.yb{bottom:628.780000px;}\r\n.ya{bottom:653.380000px;}\r\n.y9{bottom:677.980000px;}\r\n.y8{bottom:702.580000px;}\r\n.y7{bottom:721.540000px;}\r\n.y6{bottom:733.420000px;}\r\n.y5{bottom:752.860000px;}\r\n.y3{bottom:773.400000px;}\r\n.y2{bottom:783.480000px;}\r\n.h7{height:16.894080px;}\r\n.h3{height:27.432480px;}\r\n.h8{height:29.390674px;}\r\n.h2{height:33.983520px;}\r\n.h6{height:40.224000px;}\r\n.h4{height:41.616000px;}\r\n.h5{height:47.062080px;}\r\n.h9{height:112.800000px;}\r\n.h0{height:841.920000px;}\r\n.h1{height:842.500000px;}\r\n.w3{width:120.020000px;}\r\n.w2{width:595.319991px;}\r\n.w0{width:595.320000px;}\r\n.w1{width:596.000000px;}\r\n.x0{left:0.000000px;}\r\n.x5{left:17.760000px;}\r\n.x2{left:53.999991px;}\r\n.x1{left:157.459991px;}\r\n.x3{left:212.209991px;}\r\n.x4{left:435.100000px;}\r\n@media print{\r\n.v0{vertical-align:0.000000pt;}\r\n.ls2{letter-spacing:0.000000pt;}\r\n.ls1{letter-spacing:0.192000pt;}\r\n.ls0{letter-spacing:0.501760pt;}\r\n.ws1{word-spacing:-12.800000pt;}\r\n.ws0{word-spacing:-10.624000pt;}\r\n.ws2{word-spacing:0.000000pt;}\r\n._b{margin-left:-8.277333pt;}\r\n._8{margin-left:-5.877333pt;}\r\n._3{margin-left:-1.422720pt;}\r\n._7{width:1.546667pt;}\r\n._c{width:28.298667pt;}\r\n._4{width:30.709333pt;}\r\n._e{width:43.520000pt;}\r\n._9{width:47.242667pt;}\r\n._f{width:55.754667pt;}\r\n._d{width:63.221333pt;}\r\n._11{width:66.378667pt;}\r\n._10{width:81.834667pt;}\r\n._12{width:139.466667pt;}\r\n._6{width:147.914667pt;}\r\n._a{width:169.578667pt;}\r\n._5{width:179.200000pt;}\r\n._0{width:685.856000pt;}\r\n._1{width:1002.122667pt;}\r\n._2{width:2579.093333pt;}\r\n.fs4{font-size:26.880000pt;}\r\n.fs1{font-size:42.880000pt;}\r\n.fs5{font-size:45.199037pt;}\r\n.fs0{font-size:53.120000pt;}\r\n.fs2{font-size:64.000000pt;}\r\n.fs3{font-size:74.880000pt;}\r\n.y0{bottom:-0.666667pt;}\r\n.y1{bottom:0.000000pt;}\r\n.y4{bottom:53.760000pt;}\r\n.y24{bottom:69.760000pt;}\r\n.y22{bottom:107.040000pt;}\r\n.y21{bottom:139.866667pt;}\r\n.y20{bottom:172.666667pt;}\r\n.y1f{bottom:205.466667pt;}\r\n.y1e{bottom:233.946667pt;}\r\n.y1d{bottom:257.466667pt;}\r\n.y1c{bottom:285.946667pt;}\r\n.y1b{bottom:313.466667pt;}\r\n.y1a{bottom:346.266667pt;}\r\n.y19{bottom:379.106667pt;}\r\n.y18{bottom:411.906667pt;}\r\n.y17{bottom:444.706667pt;}\r\n.y16{bottom:477.506667pt;}\r\n.y15{bottom:510.306667pt;}\r\n.y14{bottom:543.106667pt;}\r\n.y13{bottom:575.933333pt;}\r\n.y12{bottom:608.733333pt;}\r\n.y11{bottom:641.533333pt;}\r\n.y10{bottom:674.333333pt;}\r\n.yf{bottom:707.133333pt;}\r\n.ye{bottom:739.933333pt;}\r\n.yd{bottom:772.733333pt;}\r\n.y23{bottom:793.573333pt;}\r\n.yc{bottom:805.573333pt;}\r\n.yb{bottom:838.373333pt;}\r\n.ya{bottom:871.173333pt;}\r\n.y9{bottom:903.973333pt;}\r\n.y8{bottom:936.773333pt;}\r\n.y7{bottom:962.053333pt;}\r\n.y6{bottom:977.893333pt;}\r\n.y5{bottom:1003.813333pt;}\r\n.y3{bottom:1031.200000pt;}\r\n.y2{bottom:1044.640000pt;}\r\n.h7{height:22.525440pt;}\r\n.h3{height:36.576640pt;}\r\n.h8{height:39.187565pt;}\r\n.h2{height:45.311360pt;}\r\n.h6{height:53.632000pt;}\r\n.h4{height:55.488000pt;}\r\n.h5{height:62.749440pt;}\r\n.h9{height:150.400000pt;}\r\n.h0{height:1122.560000pt;}\r\n.h1{height:1123.333333pt;}\r\n.w3{width:160.026667pt;}\r\n.w2{width:793.759988pt;}\r\n.w0{width:793.760000pt;}\r\n.w1{width:794.666667pt;}\r\n.x0{left:0.000000pt;}\r\n.x5{left:23.680000pt;}\r\n.x2{left:71.999988pt;}\r\n.x1{left:209.946655pt;}\r\n.x3{left:282.946655pt;}\r\n.x4{left:580.133333pt;}\r\n}\r\n&lt;/style&gt;\r\n&lt;script&gt;\r\n/*\r\n Copyright 2012 Mozilla Foundation \r\n Copyright 2013 Lu Wang &lt;coolwanglu@gmail.com&gt;\r\n Apachine License Version 2.0 \r\n*/\r\n(function(){function b(a,b,e,f){var c=(a.className||&quot;&quot;).split(/\\s+/g);&quot;&quot;===c[0]&amp;&amp;c.shift();var d=c.indexOf(b);0&gt;d&amp;&amp;e&amp;&amp;c.push(b);0&lt;=d&amp;&amp;f&amp;&amp;c.splice(d,1);a.className=c.join(&quot; &quot;);return 0&lt;=d}if(!(&quot;classList&quot;in document.createElement(&quot;div&quot;))){var e={add:function(a){b(this.element,a,!0,!1)},contains:function(a){return b(this.element,a,!1,!1)},remove:function(a){b(this.element,a,!1,!0)},toggle:function(a){b(this.element,a,!0,!0)}};Object.defineProperty(HTMLElement.prototype,&quot;classList&quot;,{get:function(){if(this._classList)return this._classList;\r\nvar a=Object.create(e,{element:{value:this,writable:!1,enumerable:!0}});Object.defineProperty(this,&quot;_classList&quot;,{value:a,writable:!1,enumerable:!1});return a},enumerable:!0})}})();\r\n&lt;/script&gt;\r\n&lt;script&gt;\r\n(function(){/*\r\n pdf2htmlEX.js: Core UI functions for pdf2htmlEX \r\n Copyright 2012,2013 Lu Wang &lt;coolwanglu@gmail.com&gt; and other contributors \r\n https://github.com/pdf2htmlEX/pdf2htmlEX/blob/master/share/LICENSE \r\n*/\r\n{page_frame:&quot;pf&quot;,page_content_box:&quot;pc&quot;,page_data:&quot;pi&quot;,background_image:&quot;bi&quot;,link:&quot;l&quot;,input_radio:&quot;ir&quot;,__dummy__:&quot;no comma&quot;},DEFAULT_CONFIG={container_id:&quot;page-container&quot;,sidebar_id:&quot;sidebar&quot;,outline_id:&quot;outline&quot;,loading_indicator_cls:&quot;loading-indicator&quot;,preload_pages:3,render_timeout:100,scale_step:0.9,key_handler:!0,hashchange_handler:!0,view_history_handler:!0,__dummy__:&quot;no comma&quot;},EPS=1E-6;\r\nfunction invert(a){var b=a[0]*a[3]-a[1]*a[2];return[a[3]/b,-a[1]/b,-a[2]/b,a[0]/b,(a[2]*a[5]-a[3]*a[4])/b,(a[1]*a[4]-a[0]*a[5])/b]}function transform(a,b){return[a[0]*b[0]+a[2]*b[1]+a[4],a[1]*b[0]+a[3]*b[1]+a[5]]}function get_page_number(a){return parseInt(a.getAttribute(&quot;data-page-no&quot;),16)}function disable_dragstart(a){for(var b=0,c=a.length;b&lt;c;++b)a[b].addEventListener(&quot;dragstart&quot;,function(){return!1},!1)}\r\nfunction clone_and_extend_objs(a){for(var b={},c=0,e=arguments.length;c&lt;e;++c){var h=arguments[c],d;for(d in h)h.hasOwnProperty(d)&amp;&amp;(b[d]=h[d])}return b}\r\nfunction Page(a){if(a){this.shown=this.loaded=!1;this.page=a;this.num=get_page_number(a);this.original_height=a.clientHeight;this.original_width=a.clientWidth;var b=a.getElementsByClassName(CSS_CLASS_NAMES.page_content_box)[0];b&amp;&amp;(this.content_box=b,this.original_scale=this.cur_scale=this.original_height/b.clientHeight,this.page_data=JSON.parse(a.getElementsByClassName(CSS_CLASS_NAMES.page_data)[0].getAttribute(&quot;data-data&quot;)),this.ctm=this.page_data.ctm,this.ictm=invert(this.ctm),this.loaded=!0)}}\r\nPage.prototype={hide:function(){this.loaded&amp;&amp;this.shown&amp;&amp;(this.content_box.classList.remove(&quot;opened&quot;),this.shown=!1)},show:function(){this.loaded&amp;&amp;!this.shown&amp;&amp;(this.content_box.classList.add(&quot;opened&quot;),this.shown=!0)},rescale:function(a){this.cur_scale=0===a?this.original_scale:a;this.loaded&amp;&amp;(a=this.content_box.style,a.msTransform=a.webkitTransform=a.transform=&quot;scale(&quot;+this.cur_scale.toFixed(3)+&quot;)&quot;);a=this.page.style;a.height=this.original_height*this.cur_scale+&quot;px&quot;;a.width=this.original_width*this.cur_scale+\r\n&quot;px&quot;},view_position:function(){var a=this.page,b=a.parentNode;return[b.scrollLeft-a.offsetLeft-a.clientLeft,b.scrollTop-a.offsetTop-a.clientTop]},height:function(){return this.page.clientHeight},width:function(){return this.page.clientWidth}};function Viewer(a){this.config=clone_and_extend_objs(DEFAULT_CONFIG,0&lt;arguments.length?a:{});this.pages_loading=[];this.init_before_loading_content();var b=this;document.addEventListener(&quot;DOMContentLoaded&quot;,function(){b.init_after_loading_content()},!1)}\r\nViewer.prototype={scale:1,cur_page_idx:0,first_page_idx:0,init_before_loading_content:function(){this.pre_hide_pages()},initialize_radio_button:function(){for(var a=document.getElementsByClassName(CSS_CLASS_NAMES.input_radio),b=0;b&lt;a.length;b++)a[b].addEventListener(&quot;click&quot;,function(){this.classList.toggle(&quot;checked&quot;)})},init_after_loading_content:function(){this.sidebar=document.getElementById(this.config.sidebar_id);this.outline=document.getElementById(this.config.outline_id);this.container=document.getElementById(this.config.container_id);\r\nthis.loading_indicator=document.getElementsByClassName(this.config.loading_indicator_cls)[0];for(var a=!0,b=this.outline.childNodes,c=0,e=b.length;c&lt;e;++c)if(&quot;ul&quot;===b[c].nodeName.toLowerCase()){a=!1;break}a||this.sidebar.classList.add(&quot;opened&quot;);this.find_pages();if(0!=this.pages.length){disable_dragstart(document.getElementsByClassName(CSS_CLASS_NAMES.background_image));this.config.key_handler&amp;&amp;this.register_key_handler();var h=this;this.config.hashchange_handler&amp;&amp;window.addEventListener(&quot;hashchange&quot;,\r\nfunction(a){h.navigate_to_dest(document.location.hash.substring(1))},!1);this.config.view_history_handler&amp;&amp;window.addEventListener(&quot;popstate&quot;,function(a){a.state&amp;&amp;h.navigate_to_dest(a.state)},!1);this.container.addEventListener(&quot;scroll&quot;,function(){h.update_page_idx();h.schedule_render(!0)},!1);[this.container,this.outline].forEach(function(a){a.addEventListener(&quot;click&quot;,h.link_handler.bind(h),!1)});this.initialize_radio_button();this.render()}},find_pages:function(){for(var a=[],b={},c=this.container.childNodes,\r\ne=0,h=c.length;e&lt;h;++e){var d=c[e];d.nodeType===Node.ELEMENT_NODE&amp;&amp;d.classList.contains(CSS_CLASS_NAMES.page_frame)&amp;&amp;(d=new Page(d),a.push(d),b[d.num]=a.length-1)}this.pages=a;this.page_map=b},load_page:function(a,b,c){var e=this.pages;if(!(a&gt;=e.length||(e=e[a],e.loaded||this.pages_loading[a]))){var e=e.page,h=e.getAttribute(&quot;data-page-url&quot;);if(h){this.pages_loading[a]=!0;var d=e.getElementsByClassName(this.config.loading_indicator_cls)[0];&quot;undefined&quot;===typeof d&amp;&amp;(d=this.loading_indicator.cloneNode(!0),\r\nd.classList.add(&quot;active&quot;),e.appendChild(d));var f=this,g=new XMLHttpRequest;g.open(&quot;GET&quot;,h,!0);g.onload=function(){if(200===g.status||0===g.status){var b=document.createElement(&quot;div&quot;);b.innerHTML=g.responseText;for(var d=null,b=b.childNodes,e=0,h=b.length;e&lt;h;++e){var p=b[e];if(p.nodeType===Node.ELEMENT_NODE&amp;&amp;p.classList.contains(CSS_CLASS_NAMES.page_frame)){d=p;break}}b=f.pages[a];f.container.replaceChild(d,b.page);b=new Page(d);f.pages[a]=b;b.hide();b.rescale(f.scale);disable_dragstart(d.getElementsByClassName(CSS_CLASS_NAMES.background_image));\r\nf.schedule_render(!1);c&amp;&amp;c(b)}delete f.pages_loading[a]};g.send(null)}void 0===b&amp;&amp;(b=this.config.preload_pages);0&lt;--b&amp;&amp;(f=this,setTimeout(function(){f.load_page(a+1,b)},0))}},pre_hide_pages:function(){var a=&quot;@media screen{.&quot;+CSS_CLASS_NAMES.page_content_box+&quot;{display:none;}}&quot;,b=document.createElement(&quot;style&quot;);b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a));document.head.appendChild(b)},render:function(){for(var a=this.container,b=a.scrollTop,c=a.clientHeight,a=b-c,b=\r\nb+c+c,c=this.pages,e=0,h=c.length;e&lt;h;++e){var d=c[e],f=d.page,g=f.offsetTop+f.clientTop,f=g+f.clientHeight;g&lt;=b&amp;&amp;f&gt;=a?d.loaded?d.show():this.load_page(e):d.hide()}},update_page_idx:function(){var a=this.pages,b=a.length;if(!(2&gt;b)){for(var c=this.container,e=c.scrollTop,c=e+c.clientHeight,h=-1,d=b,f=d-h;1&lt;f;){var g=h+Math.floor(f/2),f=a[g].page;f.offsetTop+f.clientTop+f.clientHeight&gt;=e?d=g:h=g;f=d-h}this.first_page_idx=d;for(var g=h=this.cur_page_idx,k=0;d&lt;b;++d){var f=a[d].page,l=f.offsetTop+f.clientTop,\r\nf=f.clientHeight;if(l&gt;c)break;f=(Math.min(c,l+f)-Math.max(e,l))/f;if(d===h&amp;&amp;Math.abs(f-1)&lt;=EPS){g=h;break}f&gt;k&amp;&amp;(k=f,g=d)}this.cur_page_idx=g}},schedule_render:function(a){if(void 0!==this.render_timer){if(!a)return;clearTimeout(this.render_timer)}var b=this;this.render_timer=setTimeout(function(){delete b.render_timer;b.render()},this.config.render_timeout)},register_key_handler:function(){var a=this;window.addEventListener(&quot;DOMMouseScroll&quot;,function(b){if(b.ctrlKey){b.preventDefault();var c=a.container,\r\ne=c.getBoundingClientRect(),c=[b.clientX-e.left-c.clientLeft,b.clientY-e.top-c.clientTop];a.rescale(Math.pow(a.config.scale_step,b.detail),!0,c)}},!1);window.addEventListener(&quot;keydown&quot;,function(b){var c=!1,e=b.ctrlKey||b.metaKey,h=b.altKey;switch(b.keyCode){case 61:case 107:case 187:e&amp;&amp;(a.rescale(1/a.config.scale_step,!0),c=!0);break;case 173:case 109:case 189:e&amp;&amp;(a.rescale(a.config.scale_step,!0),c=!0);break;case 48:e&amp;&amp;(a.rescale(0,!1),c=!0);break;case 33:h?a.scroll_to(a.cur_page_idx-1):a.container.scrollTop-=\r\na.container.clientHeight;c=!0;break;case 34:h?a.scroll_to(a.cur_page_idx+1):a.container.scrollTop+=a.container.clientHeight;c=!0;break;case 35:a.container.scrollTop=a.container.scrollHeight;c=!0;break;case 36:a.container.scrollTop=0,c=!0}c&amp;&amp;b.preventDefault()},!1)},rescale:function(a,b,c){var e=this.scale;this.scale=a=0===a?1:b?e*a:a;c||(c=[0,0]);b=this.container;c[0]+=b.scrollLeft;c[1]+=b.scrollTop;for(var h=this.pages,d=h.length,f=this.first_page_idx;f&lt;d;++f){var g=h[f].page;if(g.offsetTop+g.clientTop&gt;=\r\nc[1])break}g=f-1;0&gt;g&amp;&amp;(g=0);var g=h[g].page,k=g.clientWidth,f=g.clientHeight,l=g.offsetLeft+g.clientLeft,m=c[0]-l;0&gt;m?m=0:m&gt;k&amp;&amp;(m=k);k=g.offsetTop+g.clientTop;c=c[1]-k;0&gt;c?c=0:c&gt;f&amp;&amp;(c=f);for(f=0;f&lt;d;++f)h[f].rescale(a);b.scrollLeft+=m/e*a+g.offsetLeft+g.clientLeft-m-l;b.scrollTop+=c/e*a+g.offsetTop+g.clientTop-c-k;this.schedule_render(!0)},fit_width:function(){var a=this.cur_page_idx;this.rescale(this.container.clientWidth/this.pages[a].width(),!0);this.scroll_to(a)},fit_height:function(){var a=this.cur_page_idx;\r\nthis.rescale(this.container.clientHeight/this.pages[a].height(),!0);this.scroll_to(a)},get_containing_page:function(a){for(;a;){if(a.nodeType===Node.ELEMENT_NODE&amp;&amp;a.classList.contains(CSS_CLASS_NAMES.page_frame)){a=get_page_number(a);var b=this.page_map;return a in b?this.pages[b[a]]:null}a=a.parentNode}return null},link_handler:function(a){var b=a.target,c=b.getAttribute(&quot;data-dest-detail&quot;);if(c){if(this.config.view_history_handler)try{var e=this.get_current_view_hash();window.history.replaceState(e,\r\n&quot;&quot;,&quot;#&quot;+e);window.history.pushState(c,&quot;&quot;,&quot;#&quot;+c)}catch(h){}this.navigate_to_dest(c,this.get_containing_page(b));a.preventDefault()}},navigate_to_dest:function(a,b){try{var c=JSON.parse(a)}catch(e){return}if(c instanceof Array){var h=c[0],d=this.page_map;if(h in d){for(var f=d[h],h=this.pages[f],d=2,g=c.length;d&lt;g;++d){var k=c[d];if(null!==k&amp;&amp;&quot;number&quot;!==typeof k)return}for(;6&gt;c.length;)c.push(null);var g=b||this.pages[this.cur_page_idx],d=g.view_position(),d=transform(g.ictm,[d[0],g.height()-d[1]]),\r\ng=this.scale,l=[0,0],m=!0,k=!1,n=this.scale;switch(c[1]){case &quot;XYZ&quot;:l=[null===c[2]?d[0]:c[2]*n,null===c[3]?d[1]:c[3]*n];g=c[4];if(null===g||0===g)g=this.scale;k=!0;break;case &quot;Fit&quot;:case &quot;FitB&quot;:l=[0,0];k=!0;break;case &quot;FitH&quot;:case &quot;FitBH&quot;:l=[0,null===c[2]?d[1]:c[2]*n];k=!0;break;case &quot;FitV&quot;:case &quot;FitBV&quot;:l=[null===c[2]?d[0]:c[2]*n,0];k=!0;break;case &quot;FitR&quot;:l=[c[2]*n,c[5]*n],m=!1,k=!0}if(k){this.rescale(g,!1);var p=this,c=function(a){l=transform(a.ctm,l);m&amp;&amp;(l[1]=a.height()-l[1]);p.scroll_to(f,l)};h.loaded?\r\nc(h):(this.load_page(f,void 0,c),this.scroll_to(f))}}}},scroll_to:function(a,b){var c=this.pages;if(!(0&gt;a||a&gt;=c.length)){c=c[a].view_position();void 0===b&amp;&amp;(b=[0,0]);var e=this.container;e.scrollLeft+=b[0]-c[0];e.scrollTop+=b[1]-c[1]}},get_current_view_hash:function(){var a=[],b=this.pages[this.cur_page_idx];a.push(b.num);a.push(&quot;XYZ&quot;);var c=b.view_position(),c=transform(b.ictm,[c[0],b.height()-c[1]]);a.push(c[0]/this.scale);a.push(c[1]/this.scale);a.push(this.scale);return JSON.stringify(a)}};\r\npdf2htmlEX.Viewer=Viewer;})();\r\n&lt;/script&gt;\r\n&lt;script&gt;\r\ntry{\r\npdf2htmlEX.defaultViewer = new pdf2htmlEX.Viewer({});\r\n}catch(e){}\r\n&lt;/script&gt;\r\n&lt;title&gt;&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;div id=&quot;sidebar&quot;&gt;\r\n&lt;div id=&quot;outline&quot;&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;div id=&quot;page-container&quot;&gt;\r\n&lt;div class=&quot;c x0 y1 w2 h0&quot;&gt;&lt;div class=&quot;t m0 x1 h2 y2 ff1 fs0 fc0 sc0 ls2 ws2&quot;&gt; &lt;span class=&quot;_ _0&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;sc1&quot;&gt;Page &lt;/span&gt;&lt;span class=&quot;ls0&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;sc1&quot;&gt; of &lt;/span&gt;&lt;span class=&quot;ws0&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;fs1 sc1&quot;&gt; &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h3 y3 ff1 fs1 fc0 sc1 ls2 ws2&quot;&gt; &lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y4 ff2 fs2 fc1 sc1 ls2 ws2&quot;&gt; &lt;span class=&quot;_ _2&quot;&gt; &lt;/span&gt; &lt;/div&gt;&lt;div class=&quot;t m0 x3 h5 y5 ff3 fs3 fc0 sc1 ls2 ws2&quot;&gt;Customer Applicat&lt;span class=&quot;_ _3&quot;&gt;&lt;/span&gt;ion Form &lt;/div&gt;&lt;div class=&quot;t m0 x2 h6 y6 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt; &lt;/div&gt;&lt;div class=&quot;t m0 x2 h7 y7 ff3 fs4 fc0 sc1 ls2 ws2&quot;&gt; &lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y8 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Product Name*: &lt;span class=&quot;ff2 fc1&quot;&gt;Euronet Gift &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y9 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Application No.*: &lt;span class=&quot;ff2 fc1&quot;&gt;EN0000112233 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 ya ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Customer Reference Number/ID*: &lt;span class=&quot;ff2 fc1&quot;&gt;1234567890 &lt;span class=&quot;_ _4&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fc3 sc1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fc3 sc1&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 yb ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Card Personalization*: &lt;span class=&quot;ff2 fc1&quot;&gt;Personalized &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 yc ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Card Number*: &lt;span class=&quot;ff2 fc1 ws1&quot;&gt;1234-56xx-&lt;span class=&quot;ls1&quot;&gt;xxxx&lt;/span&gt;&lt;span class=&quot;ws2&quot;&gt;-1234 &lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 yd ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Insta Card Reference/Kit Number*: &lt;span class=&quot;ff2 fc1&quot;&gt;INST0000112233 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 ye ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;KYC Status*: &lt;span class=&quot;ff2 fc1&quot;&gt;Full KYC &lt;span class=&quot;_ _6&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 yf ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;KYC Verification Date &amp;amp; Time*&lt;span class=&quot;_ _7&quot;&gt;&lt;/span&gt;: &lt;span class=&quot;ff2 fc1&quot;&gt;31/01/2023 13:00:00 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y10 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Full Name*: &lt;span class=&quot;ff2 fc1&quot;&gt;Mr. Rashid Abdul Khan &lt;span class=&quot;_ _8&quot;&gt;&lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt;&lt;span class=&quot;ff3 fc0&quot;&gt;Date of Birth*: &lt;/span&gt;31/01/1990 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y11 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Mobile Number*: &lt;span class=&quot;ff2 fc1&quot;&gt;+91-9891231231 &lt;span class=&quot;_ _9&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt;&lt;/span&gt;Email ID: &lt;span class=&quot;ff2 fc1&quot;&gt;rakhan90@rediffmail.com &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y12 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Gender*: &lt;span class=&quot;ff2 fc1&quot;&gt;Male \r\n&lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nI&#39;m getting following output PDF with right alignment text, which should be left align.\r\n\r\n[![Below is the pdf output:][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3QGeo.png\r\n\r\nI&#39;m also getting following warning/errors in console:\r\n\r\n```none\r\nUnable to retrieve font:\r\n @font-face {\r\n    font-family: ff1;\r\n    src: url(&#39;data:application/font-woff;base64,d09GRgABAAAAACV8AA8AAAAAWxgAAQ...\r\n\r\n10:22:13.682 [main] ERROR com.itextpdf.html2pdf.attach.impl.DefaultHtmlProcessor - Unable to retrieve font:\r\n @font-face {\r\n    font-family: ff2;\r\n    src: url(&#39;data:application/font-woff;base64,d09GRgABAAAAAEcYAA8AAAAAl9wAAQGY..\r\n\r\n[main] ERROR com.itextpdf.html2pdf.attach.impl.DefaultHtmlProcessor - No worker found for tag script\r\n10:22:13.854 [main] ERROR com.itextpdf.html2pdf.attach.impl.DefaultHtmlProcessor - No worker found for tag script\r\n10:22:13.854 [main] ERROR com.itextpdf.html2pdf.attach.impl.DefaultHtmlProcessor - No worker found for tag script\r\n10:22:14.135 [main] ERROR com.itextpdf.layout.renderer.AbstractRenderer - Occupied area has not been initialized. Absolute positioning might be applied incorrectly.\r\n10:22:14.182 [main] WARN com.itextpdf.layout.renderer.LineRenderer - Inline block element does not fit into parent element and will be clipped\r\n10:22:14.182 [main] WARN com.itextpdf.layout.renderer.LineRenderer - Inline block element does not fit into parent element and will be clipped\r\n10:22:14.198 [main] WARN com.itextpdf.layout.renderer.LineRenderer - Inline block element does not fit into parent element and will be clipped\r\ngeneratePDFTestThree Completed\r\n```\r\n\r\nI tried to set text alignment using below line in Java:\r\n\r\n```java\r\nDocument document = HtmlConverter.convertToDocument(fileInputStream, pdfDocument, converterProperties);\r\ndocument.setTextAlignment(TextAlignment.LEFT);\r\n```\r\n\r\nHowever, this does not change the output. Please suggest the changes required to make this work.","title":"PDF text alignment issue in iText","body":"<p>Below is Java code, where I try to convert a HTML file into PDF using Java with iText.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void generatePDFTestThree() {\n    try {\n         String dirPath=&quot;F:\\\\Nitin\\\\ppi\\\\GPR\\\\form_pdf&quot;;\n        //Setting destination \n        FileInputStream fileInputStream = new FileInputStream(new File(dirPath+&quot;/PagePdf.html&quot;));\n        FileOutputStream fileOutputStream = new FileOutputStream(new File(dirPath + &quot;/PageHtmlToPdf.pdf&quot;));\n        \n        PdfWriter pdfWriter = new PdfWriter(fileOutputStream);\n        ConverterProperties converterProperties = new ConverterProperties();\n        converterProperties.setLimitOfLayouts(4);\n        PdfDocument pdfDocument = new PdfDocument(pdfWriter);\n        converterProperties.setBaseUri(&quot;src/resources/images&quot;);\n        //For setting the PAGE SIZE\n        pdfDocument.setDefaultPageSize(new PageSize(PageSize.LETTER));\n        \n        Document document = HtmlConverter.convertToDocument(fileInputStream, pdfDocument, converterProperties);\n        document.close();\n    } \n    catch (Exception e) {\n         e.printStackTrace();\n    }\n}\n</code></pre>\n<p>Below is my HTML file which I try to convert to PDF.</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;utf-8&quot;/&gt;\n&lt;meta name=&quot;generator&quot; content=&quot;pdf2htmlEX&quot;/&gt;\n&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot;/&gt;\n&lt;style type=&quot;text/css&quot;&gt;\n#sidebar{position:absolute;top:0;left:0;bottom:0;width:250px;padding:0;margin:0;overflow:auto}#page-container{position:absolute;top:0;left:0;margin:0;padding:0;border:0}@media screen{#sidebar.opened+#page-container{left:250px}#page-container{bottom:0;right:0;overflow:auto}.loading-indicator{display:none}.loading-indicator.active{display:block;position:absolute;width:64px;height:64px;top:50%;left:50%;margin-top:-32px;margin-left:-32px}.loading-indicator img{position:absolute;top:0;left:0;bottom:0;right:0}}@media print{@page{margin:0}html{margin:0}body{text-align:left;margin:0;-webkit-print-color-adjust:exact}#sidebar{display:none}#page-container{width:auto;height:auto;overflow:visible;background-color:transparent}.d{display:none}}.pf{position:relative;background-color:white;overflow:hidden;margin:0;border:0}.pc{position:absolute;border:0;padding:0;margin:0;top:0;left:0;width:100%;height:100%;overflow:hidden;display:block;transform-origin:0 0;-ms-transform-origin:0 0;-webkit-transform-origin:0 0}.pc.opened{display:block}.bf{position:absolute;border:0;margin:0;top:0;bottom:0;width:100%;height:100%;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;user-select:none}.bi{position:absolute;border:0;margin:0;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;user-select:none}@media print{.pf{margin:0;box-shadow:none;page-break-after:always;page-break-inside:avoid}#fff}.pc{overflow:visible}}}.c{position:absolute;border:0;padding:0;margin:0;overflow:hidden;display:block}.t{position:absolute;white-space:pre;font-size:1px;transform-origin:0 100%;-ms-transform-origin:0 100%;-webkit-transform-origin:0 100%;unicode-bidi:bidi-override;-moz-font-feature-settings:&quot;liga&quot; 0}.t:after{content:''}.t:before{content:''}.t span{position:relative;unicode-bidi:bidi-override}._{color:transparent;z-index:-1}::selection{background:rgba(127,255,255,0.4)}::-moz-selection{background:rgba(127,255,255,0.4)}.pi{display:none}.d{position:absolute;transform-origin:0 100%;-ms-transform-origin:0 100%;-webkit-transform-origin:0 100%}.it{border:0;background-color:rgba(255,255,255,0.0)}.ir:hover{cursor:pointer}&lt;/style&gt;\n&lt;style type=&quot;text/css&quot;&gt;\n/*! \n * Fancy styles for pdf2htmlEX\n * Copyright 2012,2013 Lu Wang &lt;coolwanglu@gmail.com&gt; \n * https://github.com/pdf2htmlEX/pdf2htmlEX/blob/master/share/LICENSE\n */@media screen{#sidebar{background-color:#2f3236;background-image:url(&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjNDAzYzNmIj48L3JlY3Q+CjxwYXRoIGQ9Ik0wIDBMNCA0Wk00IDBMMCA0WiIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2U9IiMxZTI5MmQiPjwvcGF0aD4KPC9zdmc+&quot;)}#outline{font-family:Georgia,Times,&quot;Times New Roman&quot;,serif;font-size:13px;margin:2em 1em}#outline ul{padding:0}#outline li{list-style-type:none;margin:1em 0}#outline li&gt;ul{margin-left:1em}#outline a,#outline a:visited,#outline a:hover,#outline a:active{line-height:1.2;color:#e8e8e8;text-overflow:ellipsis;white-space:nowrap;text-decoration:none;display:block;overflow:hidden;outline:0}#outline a:hover{color:#0cf}#page-container{background-color:#9e9e9e;background-image:url(&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1IiBoZWlnaHQ9IjUiPgo8cmVjdCB3aWR0aD0iNSIgaGVpZ2h0PSI1IiBmaWxsPSIjOWU5ZTllIj48L3JlY3Q+CjxwYXRoIGQ9Ik0wIDVMNSAwWk02IDRMNCA2Wk0tMSAxTDEgLTFaIiBzdHJva2U9IiM4ODgiIHN0cm9rZS13aWR0aD0iMSI+PC9wYXRoPgo8L3N2Zz4=&quot;);-webkit-transition:left 500ms;transition:left 500ms}.pf{margin:13px auto;box-shadow:1px 1px 3px 1px #333;border-collapse:separate}.pc.opened{-webkit-animation:fadein 100ms;animation:fadein 100ms}.loading-indicator.active{-webkit-animation:swing 1.5s ease-in-out .01s infinite alternate none;animation:swing 1.5s ease-in-out .01s infinite alternate none}.checked{background:no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3goQDSYgDiGofgAAAslJREFUOMvtlM9LFGEYx7/vvOPM6ywuuyPFihWFBUsdNnA6KLIh+QPx4KWExULdHQ/9A9EfUodYmATDYg/iRewQzklFWxcEBcGgEplDkDtI6sw4PzrIbrOuedBb9MALD7zv+3m+z4/3Bf7bZS2bzQIAcrmcMDExcTeXy10DAFVVAQDksgFUVZ1ljD3yfd+0LOuFpmnvVVW9GHhkZAQcxwkNDQ2FSCQyRMgJxnVdy7KstKZpn7nwha6urqqfTqfPBAJAuVymlNLXoigOhfd5nmeiKL5TVTV+lmIKwAOA7u5u6Lped2BsbOwjY6yf4zgQQkAIAcedaPR9H67r3uYBQFEUFItFtLe332lpaVkUBOHK3t5eRtf1DwAwODiIubk5DA8PM8bYW1EU+wEgCIJqsCAIQAiB7/u253k2BQDDMJBKpa4mEon5eDx+UxAESJL0uK2t7XosFlvSdf0QAEmlUnlRFJ9Waho2Qghc1/U9z3uWz+eX+Wr+lL6SZfleEAQIggA8z6OpqSknimIvYyybSCReMsZ6TislhCAIAti2Dc/zejVNWwCAavN8339j27YbTg0AGGM3WltbP4WhlRWq6Q/btrs1TVsYHx+vNgqKoqBUKn2NRqPFxsbGJzzP05puUlpt0ukyOI6z7zjOwNTU1OLo6CgmJyf/gA3DgKIoWF1d/cIY24/FYgOU0pp0z/Ityzo8Pj5OTk9PbwHA+vp6zWghDC+VSiuRSOQgGo32UErJ38CO42wdHR09LBQK3zKZDDY2NupmFmF4R0cHVlZWlmRZ/iVJUn9FeWWcCCE4ODjYtG27Z2Zm5juAOmgdGAB2d3cBADs7O8uSJN2SZfl+WKlpmpumaT6Yn58vn/fs6XmbhmHMNjc3tzDGFI7jYJrm5vb29sDa2trPC/9aiqJUy5pOp4f6+vqeJ5PJBAB0dnZe/t8NBajx/z37Df5OGX8d13xzAAAAAElFTkSuQmCC)}}&lt;/style&gt;\n&lt;style type=&quot;text/css&quot;&gt;\n.ff0{font-family:sans-serif;visibility:hidden;}\n.ff3{font-family:ff3;line-height:1.037000;font-style:normal;font-weight:normal;visibility:visible;}\n.m1{transform:matrix(0.237173,0.000000,-0.079050,0.237173,0,0);-ms-transform:matrix(0.237173,0.000000,-0.079050,0.237173,0,0);-webkit-transform:matrix(0.237173,0.000000,-0.079050,0.237173,0,0);}\n.m0{transform:matrix(0.250000,0.000000,0.000000,0.250000,0,0);-ms-transform:matrix(0.250000,0.000000,0.000000,0.250000,0,0);-webkit-transform:matrix(0.250000,0.000000,0.000000,0.250000,0,0);}\n.v0{vertical-align:0.000000px;}\n.ls2{letter-spacing:0.000000px;}\n.ls1{letter-spacing:0.144000px;}\n.ls0{letter-spacing:0.376320px;}\n.sc_{text-shadow:none;}\n.sc1{text-shadow:-0.015em 0 transparent,0 0.015em transparent,0.015em 0 transparent,0 -0.015em  transparent;}\n.sc0{text-shadow:-0.015em 0 rgb(36,63,144),0 0.015em rgb(36,63,144),0.015em 0 rgb(36,63,144),0 -0.015em  rgb(36,63,144);}\n@media screen and (-webkit-min-device-pixel-ratio:0){\n.sc_{-webkit-text-stroke:0px transparent;}\n.sc1{-webkit-text-stroke:0.015em transparent;text-shadow:none;}\n.sc0{-webkit-text-stroke:0.015em rgb(36,63,144);text-shadow:none;}\n}\n.ws1{word-spacing:-9.600000px;}\n.ws0{word-spacing:-7.968000px;}\n.ws2{word-spacing:0.000000px;}\n._b{margin-left:-6.208000px;}\n._8{margin-left:-4.408000px;}\n._3{margin-left:-1.067040px;}\n._7{width:1.160000px;}\n._c{width:21.224000px;}\n._4{width:23.032000px;}\n._e{width:32.640000px;}\n._9{width:35.432000px;}\n._f{width:41.816000px;}\n._d{width:47.416000px;}\n._11{width:49.784000px;}\n._10{width:61.376000px;}\n._12{width:104.600000px;}\n._6{width:110.936000px;}\n._a{width:127.184000px;}\n._5{width:134.400000px;}\n._0{width:514.392000px;}\n._1{width:751.592000px;}\n._2{width:1934.320000px;}\n.fc3{color:transparent;}\n.fc2{color:rgb(30,30,30);}\n.fc1{color:rgb(0,0,0);}\n.fc0{color:rgb(36,63,144);}\n.fs4{font-size:20.160000px;}\n.fs1{font-size:32.160000px;}\n.fs5{font-size:33.899278px;}\n.fs0{font-size:39.840000px;}\n.fs2{font-size:48.000000px;}\n.fs3{font-size:56.160000px;}\n.y0{bottom:-0.500000px;}\n.y1{bottom:0.000000px;}\n.y4{bottom:40.320000px;}\n.y24{bottom:52.320000px;}\n.y22{bottom:80.280000px;}\n.y21{bottom:104.900000px;}\n.y20{bottom:129.500000px;}\n.y1f{bottom:154.100000px;}\n.y1e{bottom:175.460000px;}\n.y1d{bottom:193.100000px;}\n.y1c{bottom:214.460000px;}\n.y1b{bottom:235.100000px;}\n.y1a{bottom:259.700000px;}\n.y19{bottom:284.330000px;}\n.y18{bottom:308.930000px;}\n.y17{bottom:333.530000px;}\n.y16{bottom:358.130000px;}\n.y15{bottom:382.730000px;}\n.y14{bottom:407.330000px;}\n.y13{bottom:431.950000px;}\n.y12{bottom:456.550000px;}\n.y11{bottom:481.150000px;}\n.y10{bottom:505.750000px;}\n.yf{bottom:530.350000px;}\n.ye{bottom:554.950000px;}\n.yd{bottom:579.550000px;}\n.y23{bottom:595.180000px;}\n.yc{bottom:604.180000px;}\n.yb{bottom:628.780000px;}\n.ya{bottom:653.380000px;}\n.y9{bottom:677.980000px;}\n.y8{bottom:702.580000px;}\n.y7{bottom:721.540000px;}\n.y6{bottom:733.420000px;}\n.y5{bottom:752.860000px;}\n.y3{bottom:773.400000px;}\n.y2{bottom:783.480000px;}\n.h7{height:16.894080px;}\n.h3{height:27.432480px;}\n.h8{height:29.390674px;}\n.h2{height:33.983520px;}\n.h6{height:40.224000px;}\n.h4{height:41.616000px;}\n.h5{height:47.062080px;}\n.h9{height:112.800000px;}\n.h0{height:841.920000px;}\n.h1{height:842.500000px;}\n.w3{width:120.020000px;}\n.w2{width:595.319991px;}\n.w0{width:595.320000px;}\n.w1{width:596.000000px;}\n.x0{left:0.000000px;}\n.x5{left:17.760000px;}\n.x2{left:53.999991px;}\n.x1{left:157.459991px;}\n.x3{left:212.209991px;}\n.x4{left:435.100000px;}\n@media print{\n.v0{vertical-align:0.000000pt;}\n.ls2{letter-spacing:0.000000pt;}\n.ls1{letter-spacing:0.192000pt;}\n.ls0{letter-spacing:0.501760pt;}\n.ws1{word-spacing:-12.800000pt;}\n.ws0{word-spacing:-10.624000pt;}\n.ws2{word-spacing:0.000000pt;}\n._b{margin-left:-8.277333pt;}\n._8{margin-left:-5.877333pt;}\n._3{margin-left:-1.422720pt;}\n._7{width:1.546667pt;}\n._c{width:28.298667pt;}\n._4{width:30.709333pt;}\n._e{width:43.520000pt;}\n._9{width:47.242667pt;}\n._f{width:55.754667pt;}\n._d{width:63.221333pt;}\n._11{width:66.378667pt;}\n._10{width:81.834667pt;}\n._12{width:139.466667pt;}\n._6{width:147.914667pt;}\n._a{width:169.578667pt;}\n._5{width:179.200000pt;}\n._0{width:685.856000pt;}\n._1{width:1002.122667pt;}\n._2{width:2579.093333pt;}\n.fs4{font-size:26.880000pt;}\n.fs1{font-size:42.880000pt;}\n.fs5{font-size:45.199037pt;}\n.fs0{font-size:53.120000pt;}\n.fs2{font-size:64.000000pt;}\n.fs3{font-size:74.880000pt;}\n.y0{bottom:-0.666667pt;}\n.y1{bottom:0.000000pt;}\n.y4{bottom:53.760000pt;}\n.y24{bottom:69.760000pt;}\n.y22{bottom:107.040000pt;}\n.y21{bottom:139.866667pt;}\n.y20{bottom:172.666667pt;}\n.y1f{bottom:205.466667pt;}\n.y1e{bottom:233.946667pt;}\n.y1d{bottom:257.466667pt;}\n.y1c{bottom:285.946667pt;}\n.y1b{bottom:313.466667pt;}\n.y1a{bottom:346.266667pt;}\n.y19{bottom:379.106667pt;}\n.y18{bottom:411.906667pt;}\n.y17{bottom:444.706667pt;}\n.y16{bottom:477.506667pt;}\n.y15{bottom:510.306667pt;}\n.y14{bottom:543.106667pt;}\n.y13{bottom:575.933333pt;}\n.y12{bottom:608.733333pt;}\n.y11{bottom:641.533333pt;}\n.y10{bottom:674.333333pt;}\n.yf{bottom:707.133333pt;}\n.ye{bottom:739.933333pt;}\n.yd{bottom:772.733333pt;}\n.y23{bottom:793.573333pt;}\n.yc{bottom:805.573333pt;}\n.yb{bottom:838.373333pt;}\n.ya{bottom:871.173333pt;}\n.y9{bottom:903.973333pt;}\n.y8{bottom:936.773333pt;}\n.y7{bottom:962.053333pt;}\n.y6{bottom:977.893333pt;}\n.y5{bottom:1003.813333pt;}\n.y3{bottom:1031.200000pt;}\n.y2{bottom:1044.640000pt;}\n.h7{height:22.525440pt;}\n.h3{height:36.576640pt;}\n.h8{height:39.187565pt;}\n.h2{height:45.311360pt;}\n.h6{height:53.632000pt;}\n.h4{height:55.488000pt;}\n.h5{height:62.749440pt;}\n.h9{height:150.400000pt;}\n.h0{height:1122.560000pt;}\n.h1{height:1123.333333pt;}\n.w3{width:160.026667pt;}\n.w2{width:793.759988pt;}\n.w0{width:793.760000pt;}\n.w1{width:794.666667pt;}\n.x0{left:0.000000pt;}\n.x5{left:23.680000pt;}\n.x2{left:71.999988pt;}\n.x1{left:209.946655pt;}\n.x3{left:282.946655pt;}\n.x4{left:580.133333pt;}\n}\n&lt;/style&gt;\n&lt;script&gt;\n/*\n Copyright 2012 Mozilla Foundation \n Copyright 2013 Lu Wang &lt;coolwanglu@gmail.com&gt;\n Apachine License Version 2.0 \n*/\n(function(){function b(a,b,e,f){var c=(a.className||&quot;&quot;).split(/\\s+/g);&quot;&quot;===c[0]&amp;&amp;c.shift();var d=c.indexOf(b);0&gt;d&amp;&amp;e&amp;&amp;c.push(b);0&lt;=d&amp;&amp;f&amp;&amp;c.splice(d,1);a.className=c.join(&quot; &quot;);return 0&lt;=d}if(!(&quot;classList&quot;in document.createElement(&quot;div&quot;))){var e={add:function(a){b(this.element,a,!0,!1)},contains:function(a){return b(this.element,a,!1,!1)},remove:function(a){b(this.element,a,!1,!0)},toggle:function(a){b(this.element,a,!0,!0)}};Object.defineProperty(HTMLElement.prototype,&quot;classList&quot;,{get:function(){if(this._classList)return this._classList;\nvar a=Object.create(e,{element:{value:this,writable:!1,enumerable:!0}});Object.defineProperty(this,&quot;_classList&quot;,{value:a,writable:!1,enumerable:!1});return a},enumerable:!0})}})();\n&lt;/script&gt;\n&lt;script&gt;\n(function(){/*\n pdf2htmlEX.js: Core UI functions for pdf2htmlEX \n Copyright 2012,2013 Lu Wang &lt;coolwanglu@gmail.com&gt; and other contributors \n https://github.com/pdf2htmlEX/pdf2htmlEX/blob/master/share/LICENSE \n*/\n{page_frame:&quot;pf&quot;,page_content_box:&quot;pc&quot;,page_data:&quot;pi&quot;,background_image:&quot;bi&quot;,link:&quot;l&quot;,input_radio:&quot;ir&quot;,__dummy__:&quot;no comma&quot;},DEFAULT_CONFIG={container_id:&quot;page-container&quot;,sidebar_id:&quot;sidebar&quot;,outline_id:&quot;outline&quot;,loading_indicator_cls:&quot;loading-indicator&quot;,preload_pages:3,render_timeout:100,scale_step:0.9,key_handler:!0,hashchange_handler:!0,view_history_handler:!0,__dummy__:&quot;no comma&quot;},EPS=1E-6;\nfunction invert(a){var b=a[0]*a[3]-a[1]*a[2];return[a[3]/b,-a[1]/b,-a[2]/b,a[0]/b,(a[2]*a[5]-a[3]*a[4])/b,(a[1]*a[4]-a[0]*a[5])/b]}function transform(a,b){return[a[0]*b[0]+a[2]*b[1]+a[4],a[1]*b[0]+a[3]*b[1]+a[5]]}function get_page_number(a){return parseInt(a.getAttribute(&quot;data-page-no&quot;),16)}function disable_dragstart(a){for(var b=0,c=a.length;b&lt;c;++b)a[b].addEventListener(&quot;dragstart&quot;,function(){return!1},!1)}\nfunction clone_and_extend_objs(a){for(var b={},c=0,e=arguments.length;c&lt;e;++c){var h=arguments[c],d;for(d in h)h.hasOwnProperty(d)&amp;&amp;(b[d]=h[d])}return b}\nfunction Page(a){if(a){this.shown=this.loaded=!1;this.page=a;this.num=get_page_number(a);this.original_height=a.clientHeight;this.original_width=a.clientWidth;var b=a.getElementsByClassName(CSS_CLASS_NAMES.page_content_box)[0];b&amp;&amp;(this.content_box=b,this.original_scale=this.cur_scale=this.original_height/b.clientHeight,this.page_data=JSON.parse(a.getElementsByClassName(CSS_CLASS_NAMES.page_data)[0].getAttribute(&quot;data-data&quot;)),this.ctm=this.page_data.ctm,this.ictm=invert(this.ctm),this.loaded=!0)}}\nPage.prototype={hide:function(){this.loaded&amp;&amp;this.shown&amp;&amp;(this.content_box.classList.remove(&quot;opened&quot;),this.shown=!1)},show:function(){this.loaded&amp;&amp;!this.shown&amp;&amp;(this.content_box.classList.add(&quot;opened&quot;),this.shown=!0)},rescale:function(a){this.cur_scale=0===a?this.original_scale:a;this.loaded&amp;&amp;(a=this.content_box.style,a.msTransform=a.webkitTransform=a.transform=&quot;scale(&quot;+this.cur_scale.toFixed(3)+&quot;)&quot;);a=this.page.style;a.height=this.original_height*this.cur_scale+&quot;px&quot;;a.width=this.original_width*this.cur_scale+\n&quot;px&quot;},view_position:function(){var a=this.page,b=a.parentNode;return[b.scrollLeft-a.offsetLeft-a.clientLeft,b.scrollTop-a.offsetTop-a.clientTop]},height:function(){return this.page.clientHeight},width:function(){return this.page.clientWidth}};function Viewer(a){this.config=clone_and_extend_objs(DEFAULT_CONFIG,0&lt;arguments.length?a:{});this.pages_loading=[];this.init_before_loading_content();var b=this;document.addEventListener(&quot;DOMContentLoaded&quot;,function(){b.init_after_loading_content()},!1)}\nViewer.prototype={scale:1,cur_page_idx:0,first_page_idx:0,init_before_loading_content:function(){this.pre_hide_pages()},initialize_radio_button:function(){for(var a=document.getElementsByClassName(CSS_CLASS_NAMES.input_radio),b=0;b&lt;a.length;b++)a[b].addEventListener(&quot;click&quot;,function(){this.classList.toggle(&quot;checked&quot;)})},init_after_loading_content:function(){this.sidebar=document.getElementById(this.config.sidebar_id);this.outline=document.getElementById(this.config.outline_id);this.container=document.getElementById(this.config.container_id);\nthis.loading_indicator=document.getElementsByClassName(this.config.loading_indicator_cls)[0];for(var a=!0,b=this.outline.childNodes,c=0,e=b.length;c&lt;e;++c)if(&quot;ul&quot;===b[c].nodeName.toLowerCase()){a=!1;break}a||this.sidebar.classList.add(&quot;opened&quot;);this.find_pages();if(0!=this.pages.length){disable_dragstart(document.getElementsByClassName(CSS_CLASS_NAMES.background_image));this.config.key_handler&amp;&amp;this.register_key_handler();var h=this;this.config.hashchange_handler&amp;&amp;window.addEventListener(&quot;hashchange&quot;,\nfunction(a){h.navigate_to_dest(document.location.hash.substring(1))},!1);this.config.view_history_handler&amp;&amp;window.addEventListener(&quot;popstate&quot;,function(a){a.state&amp;&amp;h.navigate_to_dest(a.state)},!1);this.container.addEventListener(&quot;scroll&quot;,function(){h.update_page_idx();h.schedule_render(!0)},!1);[this.container,this.outline].forEach(function(a){a.addEventListener(&quot;click&quot;,h.link_handler.bind(h),!1)});this.initialize_radio_button();this.render()}},find_pages:function(){for(var a=[],b={},c=this.container.childNodes,\ne=0,h=c.length;e&lt;h;++e){var d=c[e];d.nodeType===Node.ELEMENT_NODE&amp;&amp;d.classList.contains(CSS_CLASS_NAMES.page_frame)&amp;&amp;(d=new Page(d),a.push(d),b[d.num]=a.length-1)}this.pages=a;this.page_map=b},load_page:function(a,b,c){var e=this.pages;if(!(a&gt;=e.length||(e=e[a],e.loaded||this.pages_loading[a]))){var e=e.page,h=e.getAttribute(&quot;data-page-url&quot;);if(h){this.pages_loading[a]=!0;var d=e.getElementsByClassName(this.config.loading_indicator_cls)[0];&quot;undefined&quot;===typeof d&amp;&amp;(d=this.loading_indicator.cloneNode(!0),\nd.classList.add(&quot;active&quot;),e.appendChild(d));var f=this,g=new XMLHttpRequest;g.open(&quot;GET&quot;,h,!0);g.onload=function(){if(200===g.status||0===g.status){var b=document.createElement(&quot;div&quot;);b.innerHTML=g.responseText;for(var d=null,b=b.childNodes,e=0,h=b.length;e&lt;h;++e){var p=b[e];if(p.nodeType===Node.ELEMENT_NODE&amp;&amp;p.classList.contains(CSS_CLASS_NAMES.page_frame)){d=p;break}}b=f.pages[a];f.container.replaceChild(d,b.page);b=new Page(d);f.pages[a]=b;b.hide();b.rescale(f.scale);disable_dragstart(d.getElementsByClassName(CSS_CLASS_NAMES.background_image));\nf.schedule_render(!1);c&amp;&amp;c(b)}delete f.pages_loading[a]};g.send(null)}void 0===b&amp;&amp;(b=this.config.preload_pages);0&lt;--b&amp;&amp;(f=this,setTimeout(function(){f.load_page(a+1,b)},0))}},pre_hide_pages:function(){var a=&quot;@media screen{.&quot;+CSS_CLASS_NAMES.page_content_box+&quot;{display:none;}}&quot;,b=document.createElement(&quot;style&quot;);b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a));document.head.appendChild(b)},render:function(){for(var a=this.container,b=a.scrollTop,c=a.clientHeight,a=b-c,b=\nb+c+c,c=this.pages,e=0,h=c.length;e&lt;h;++e){var d=c[e],f=d.page,g=f.offsetTop+f.clientTop,f=g+f.clientHeight;g&lt;=b&amp;&amp;f&gt;=a?d.loaded?d.show():this.load_page(e):d.hide()}},update_page_idx:function(){var a=this.pages,b=a.length;if(!(2&gt;b)){for(var c=this.container,e=c.scrollTop,c=e+c.clientHeight,h=-1,d=b,f=d-h;1&lt;f;){var g=h+Math.floor(f/2),f=a[g].page;f.offsetTop+f.clientTop+f.clientHeight&gt;=e?d=g:h=g;f=d-h}this.first_page_idx=d;for(var g=h=this.cur_page_idx,k=0;d&lt;b;++d){var f=a[d].page,l=f.offsetTop+f.clientTop,\nf=f.clientHeight;if(l&gt;c)break;f=(Math.min(c,l+f)-Math.max(e,l))/f;if(d===h&amp;&amp;Math.abs(f-1)&lt;=EPS){g=h;break}f&gt;k&amp;&amp;(k=f,g=d)}this.cur_page_idx=g}},schedule_render:function(a){if(void 0!==this.render_timer){if(!a)return;clearTimeout(this.render_timer)}var b=this;this.render_timer=setTimeout(function(){delete b.render_timer;b.render()},this.config.render_timeout)},register_key_handler:function(){var a=this;window.addEventListener(&quot;DOMMouseScroll&quot;,function(b){if(b.ctrlKey){b.preventDefault();var c=a.container,\ne=c.getBoundingClientRect(),c=[b.clientX-e.left-c.clientLeft,b.clientY-e.top-c.clientTop];a.rescale(Math.pow(a.config.scale_step,b.detail),!0,c)}},!1);window.addEventListener(&quot;keydown&quot;,function(b){var c=!1,e=b.ctrlKey||b.metaKey,h=b.altKey;switch(b.keyCode){case 61:case 107:case 187:e&amp;&amp;(a.rescale(1/a.config.scale_step,!0),c=!0);break;case 173:case 109:case 189:e&amp;&amp;(a.rescale(a.config.scale_step,!0),c=!0);break;case 48:e&amp;&amp;(a.rescale(0,!1),c=!0);break;case 33:h?a.scroll_to(a.cur_page_idx-1):a.container.scrollTop-=\na.container.clientHeight;c=!0;break;case 34:h?a.scroll_to(a.cur_page_idx+1):a.container.scrollTop+=a.container.clientHeight;c=!0;break;case 35:a.container.scrollTop=a.container.scrollHeight;c=!0;break;case 36:a.container.scrollTop=0,c=!0}c&amp;&amp;b.preventDefault()},!1)},rescale:function(a,b,c){var e=this.scale;this.scale=a=0===a?1:b?e*a:a;c||(c=[0,0]);b=this.container;c[0]+=b.scrollLeft;c[1]+=b.scrollTop;for(var h=this.pages,d=h.length,f=this.first_page_idx;f&lt;d;++f){var g=h[f].page;if(g.offsetTop+g.clientTop&gt;=\nc[1])break}g=f-1;0&gt;g&amp;&amp;(g=0);var g=h[g].page,k=g.clientWidth,f=g.clientHeight,l=g.offsetLeft+g.clientLeft,m=c[0]-l;0&gt;m?m=0:m&gt;k&amp;&amp;(m=k);k=g.offsetTop+g.clientTop;c=c[1]-k;0&gt;c?c=0:c&gt;f&amp;&amp;(c=f);for(f=0;f&lt;d;++f)h[f].rescale(a);b.scrollLeft+=m/e*a+g.offsetLeft+g.clientLeft-m-l;b.scrollTop+=c/e*a+g.offsetTop+g.clientTop-c-k;this.schedule_render(!0)},fit_width:function(){var a=this.cur_page_idx;this.rescale(this.container.clientWidth/this.pages[a].width(),!0);this.scroll_to(a)},fit_height:function(){var a=this.cur_page_idx;\nthis.rescale(this.container.clientHeight/this.pages[a].height(),!0);this.scroll_to(a)},get_containing_page:function(a){for(;a;){if(a.nodeType===Node.ELEMENT_NODE&amp;&amp;a.classList.contains(CSS_CLASS_NAMES.page_frame)){a=get_page_number(a);var b=this.page_map;return a in b?this.pages[b[a]]:null}a=a.parentNode}return null},link_handler:function(a){var b=a.target,c=b.getAttribute(&quot;data-dest-detail&quot;);if(c){if(this.config.view_history_handler)try{var e=this.get_current_view_hash();window.history.replaceState(e,\n&quot;&quot;,&quot;#&quot;+e);window.history.pushState(c,&quot;&quot;,&quot;#&quot;+c)}catch(h){}this.navigate_to_dest(c,this.get_containing_page(b));a.preventDefault()}},navigate_to_dest:function(a,b){try{var c=JSON.parse(a)}catch(e){return}if(c instanceof Array){var h=c[0],d=this.page_map;if(h in d){for(var f=d[h],h=this.pages[f],d=2,g=c.length;d&lt;g;++d){var k=c[d];if(null!==k&amp;&amp;&quot;number&quot;!==typeof k)return}for(;6&gt;c.length;)c.push(null);var g=b||this.pages[this.cur_page_idx],d=g.view_position(),d=transform(g.ictm,[d[0],g.height()-d[1]]),\ng=this.scale,l=[0,0],m=!0,k=!1,n=this.scale;switch(c[1]){case &quot;XYZ&quot;:l=[null===c[2]?d[0]:c[2]*n,null===c[3]?d[1]:c[3]*n];g=c[4];if(null===g||0===g)g=this.scale;k=!0;break;case &quot;Fit&quot;:case &quot;FitB&quot;:l=[0,0];k=!0;break;case &quot;FitH&quot;:case &quot;FitBH&quot;:l=[0,null===c[2]?d[1]:c[2]*n];k=!0;break;case &quot;FitV&quot;:case &quot;FitBV&quot;:l=[null===c[2]?d[0]:c[2]*n,0];k=!0;break;case &quot;FitR&quot;:l=[c[2]*n,c[5]*n],m=!1,k=!0}if(k){this.rescale(g,!1);var p=this,c=function(a){l=transform(a.ctm,l);m&amp;&amp;(l[1]=a.height()-l[1]);p.scroll_to(f,l)};h.loaded?\nc(h):(this.load_page(f,void 0,c),this.scroll_to(f))}}}},scroll_to:function(a,b){var c=this.pages;if(!(0&gt;a||a&gt;=c.length)){c=c[a].view_position();void 0===b&amp;&amp;(b=[0,0]);var e=this.container;e.scrollLeft+=b[0]-c[0];e.scrollTop+=b[1]-c[1]}},get_current_view_hash:function(){var a=[],b=this.pages[this.cur_page_idx];a.push(b.num);a.push(&quot;XYZ&quot;);var c=b.view_position(),c=transform(b.ictm,[c[0],b.height()-c[1]]);a.push(c[0]/this.scale);a.push(c[1]/this.scale);a.push(this.scale);return JSON.stringify(a)}};\npdf2htmlEX.Viewer=Viewer;})();\n&lt;/script&gt;\n&lt;script&gt;\ntry{\npdf2htmlEX.defaultViewer = new pdf2htmlEX.Viewer({});\n}catch(e){}\n&lt;/script&gt;\n&lt;title&gt;&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div id=&quot;sidebar&quot;&gt;\n&lt;div id=&quot;outline&quot;&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div id=&quot;page-container&quot;&gt;\n&lt;div class=&quot;c x0 y1 w2 h0&quot;&gt;&lt;div class=&quot;t m0 x1 h2 y2 ff1 fs0 fc0 sc0 ls2 ws2&quot;&gt; &lt;span class=&quot;_ _0&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;sc1&quot;&gt;Page &lt;/span&gt;&lt;span class=&quot;ls0&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;sc1&quot;&gt; of &lt;/span&gt;&lt;span class=&quot;ws0&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;fs1 sc1&quot;&gt; &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h3 y3 ff1 fs1 fc0 sc1 ls2 ws2&quot;&gt; &lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y4 ff2 fs2 fc1 sc1 ls2 ws2&quot;&gt; &lt;span class=&quot;_ _2&quot;&gt; &lt;/span&gt; &lt;/div&gt;&lt;div class=&quot;t m0 x3 h5 y5 ff3 fs3 fc0 sc1 ls2 ws2&quot;&gt;Customer Applicat&lt;span class=&quot;_ _3&quot;&gt;&lt;/span&gt;ion Form &lt;/div&gt;&lt;div class=&quot;t m0 x2 h6 y6 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt; &lt;/div&gt;&lt;div class=&quot;t m0 x2 h7 y7 ff3 fs4 fc0 sc1 ls2 ws2&quot;&gt; &lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y8 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Product Name*: &lt;span class=&quot;ff2 fc1&quot;&gt;Euronet Gift &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y9 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Application No.*: &lt;span class=&quot;ff2 fc1&quot;&gt;EN0000112233 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 ya ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Customer Reference Number/ID*: &lt;span class=&quot;ff2 fc1&quot;&gt;1234567890 &lt;span class=&quot;_ _4&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fc3 sc1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fc3 sc1&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 yb ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Card Personalization*: &lt;span class=&quot;ff2 fc1&quot;&gt;Personalized &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 yc ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Card Number*: &lt;span class=&quot;ff2 fc1 ws1&quot;&gt;1234-56xx-&lt;span class=&quot;ls1&quot;&gt;xxxx&lt;/span&gt;&lt;span class=&quot;ws2&quot;&gt;-1234 &lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 yd ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Insta Card Reference/Kit Number*: &lt;span class=&quot;ff2 fc1&quot;&gt;INST0000112233 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 ye ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;KYC Status*: &lt;span class=&quot;ff2 fc1&quot;&gt;Full KYC &lt;span class=&quot;_ _6&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 yf ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;KYC Verification Date &amp;amp; Time*&lt;span class=&quot;_ _7&quot;&gt;&lt;/span&gt;: &lt;span class=&quot;ff2 fc1&quot;&gt;31/01/2023 13:00:00 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y10 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Full Name*: &lt;span class=&quot;ff2 fc1&quot;&gt;Mr. Rashid Abdul Khan &lt;span class=&quot;_ _8&quot;&gt;&lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt;&lt;span class=&quot;ff3 fc0&quot;&gt;Date of Birth*: &lt;/span&gt;31/01/1990 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y11 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Mobile Number*: &lt;span class=&quot;ff2 fc1&quot;&gt;+91-9891231231 &lt;span class=&quot;_ _9&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt;&lt;/span&gt;Email ID: &lt;span class=&quot;ff2 fc1&quot;&gt;rakhan90@rediffmail.com &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y12 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Gender*: &lt;span class=&quot;ff2 fc1&quot;&gt;Male \n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>I'm getting following output PDF with right alignment text, which should be left align.</p>\n<p><a href=\"https://i.stack.imgur.com/3QGeo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3QGeo.png\" alt=\"Below is the pdf output:\" /></a></p>\n<p>I'm also getting following warning/errors in console:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Unable to retrieve font:\n @font-face {\n    font-family: ff1;\n    src: url('data:application/font-woff;base64,d09GRgABAAAAACV8AA8AAAAAWxgAAQ...\n\n10:22:13.682 [main] ERROR com.itextpdf.html2pdf.attach.impl.DefaultHtmlProcessor - Unable to retrieve font:\n @font-face {\n    font-family: ff2;\n    src: url('data:application/font-woff;base64,d09GRgABAAAAAEcYAA8AAAAAl9wAAQGY..\n\n[main] ERROR com.itextpdf.html2pdf.attach.impl.DefaultHtmlProcessor - No worker found for tag script\n10:22:13.854 [main] ERROR com.itextpdf.html2pdf.attach.impl.DefaultHtmlProcessor - No worker found for tag script\n10:22:13.854 [main] ERROR com.itextpdf.html2pdf.attach.impl.DefaultHtmlProcessor - No worker found for tag script\n10:22:14.135 [main] ERROR com.itextpdf.layout.renderer.AbstractRenderer - Occupied area has not been initialized. Absolute positioning might be applied incorrectly.\n10:22:14.182 [main] WARN com.itextpdf.layout.renderer.LineRenderer - Inline block element does not fit into parent element and will be clipped\n10:22:14.182 [main] WARN com.itextpdf.layout.renderer.LineRenderer - Inline block element does not fit into parent element and will be clipped\n10:22:14.198 [main] WARN com.itextpdf.layout.renderer.LineRenderer - Inline block element does not fit into parent element and will be clipped\ngeneratePDFTestThree Completed\n</code></pre>\n<p>I tried to set text alignment using below line in Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Document document = HtmlConverter.convertToDocument(fileInputStream, pdfDocument, converterProperties);\ndocument.setTextAlignment(TextAlignment.LEFT);\n</code></pre>\n<p>However, this does not change the output. Please suggest the changes required to make this work.</p>\n"},{"tags":["java","jquery","spring-mvc"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1681572031,"post_id":76023074,"comment_id":134079712,"body_markdown":"401 is Unauthorized. Do you use athentication?","body":"401 is Unauthorized. Do you use athentication?"}],"owner":{"account_id":22980869,"reputation":33,"user_id":17107814,"display_name":"do hai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":399,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681570980,"creation_date":1681570980,"question_id":76023074,"body_markdown":"i have 1 error when i try to use html in jquery to add product quantity to cart but cant add even though click event is caught.when the click event is done, get the value in the APIController with Id &quot;cart-number&quot;, it cannot be called.when i work with ajax the console shows the error:failed to load resource: the server responded with a status of 401 ()\r\nanyone help?\r\nthis is my js code:\r\n```\r\n$(document).ready(function(){\r\n    $(&quot;.cart-btn&quot;).click(function(){\r\n        var color_id = $(this).closest(&quot;tr&quot;).find(&quot;.color&quot;).attr(&quot;data-color&quot;);\r\n        var color_name = $(this).closest(&quot;tr&quot;).find(&quot;.color&quot;).text();\r\n        var quantity = $(this).closest(&quot;tr&quot;).find(&quot;.quantity&quot;).text();\r\n        \r\n        var product_name = $(&quot;#detail-title&quot;).text();\r\n        var product_id = $(&quot;#detail-title&quot;).attr(&quot;data-Id&quot;);\r\n        var price = $(&quot;#detail-price&quot;).attr(&quot;data-value&quot;);\r\n        \r\n           $.ajax({\r\n            url:&quot;/PhoneAccessories/api/addtocart&quot;,\r\n            type:&quot;GET&quot;,\r\n            data:{\r\n                product_id:product_id,\r\n                color_id:color_id,\r\n                quantity:quantity,\r\n                product_name:product_name,\r\n                price:price,\r\n                color_name:color_name\r\n            },\r\n            success: function(value){\r\n                $(&quot;#cart-number&quot;).html(&quot;&lt;span&gt;&quot;+value+&quot;&lt;/span&gt;&quot;);\r\n            }\r\n        })\r\n    \r\n    });\r\n});\r\n```\r\n\r\n\r\nthis is my APIController\r\n```\r\n@Controller\r\n    @RequestMapping(&quot;api/&quot;)\r\n    @SessionAttributes({&quot;email&quot;,&quot;cart&quot;})\r\n    public class APIController {\r\n        @Autowired\r\n        EmployeeService employeeService;\r\n        \r\n        @GetMapping(&quot;addtocart&quot;)\r\n        public String AddToCart(@RequestParam int product_id,@RequestParam int color_id,@RequestParam int quantity,@RequestParam String product_name,@RequestParam String price,@RequestParam String color_name,HttpSession httpSession) {\r\n            \r\n            if(httpSession.getAttribute(&quot;cart&quot;) == null) {\r\n                List&lt;ProductCart&gt; productCarts = new ArrayList&lt;ProductCart&gt;();\r\n                ProductCart carts = new ProductCart();\r\n                carts.setProduct_id(product_id);\r\n                carts.setColor_id(color_id);\r\n                carts.setQuantity(1);\r\n                carts.setProduct_name(product_name);\r\n                carts.setPrice(price);\r\n                carts.setColor_name(color_name);\r\n                productCarts.add(carts);\r\n                httpSession.setAttribute(&quot;cart&quot;, productCarts);\r\n                List&lt;ProductCart&gt; listCart = (List&lt;ProductCart&gt;) httpSession.getAttribute(&quot;cart&quot;);\r\n                return listCart.size()+ &quot;&quot;;\r\n            }else {\r\n                List&lt;ProductCart&gt; listCart = (List&lt;ProductCart&gt;) httpSession.getAttribute(&quot;cart&quot;);\r\n                int location = CheckProductAlreadyExists(product_id, color_id, httpSession);\r\n                if(location == -1) {\r\n                    \r\n                    ProductCart carts = new ProductCart();\r\n                    carts.setProduct_id(product_id);\r\n                    carts.setColor_id(color_id);\r\n                    carts.setQuantity(1);\r\n                    carts.setProduct_name(product_name);\r\n                    carts.setPrice(price);\r\n                    carts.setColor_name(color_name);\r\n                    listCart.add(carts);\r\n                }else {\r\n                    \r\n                    int newQuantity = listCart.get(location).getQuantity()+1;\r\n                    listCart.get(location).setQuantity(newQuantity);\r\n                }\r\n                return listCart.size() +&quot;&quot;;\r\n                \r\n            }\r\n            \r\n            \r\n        }\r\n        private int CheckProductAlreadyExists(int product_id,int color_id,HttpSession httpSession) {\r\n            List&lt;ProductCart&gt; listCart = (List&lt;ProductCart&gt;) httpSession.getAttribute(&quot;cart&quot;);\r\n            for(int i=0;i&lt;listCart.size();i++) {\r\n                if(listCart.get(i).getProduct_id()== product_id &amp;&amp; listCart.get(i).getColor_id() ==color_id ) {\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n```\r\nthis is the jsp details page:\r\n```\r\n&lt;body&gt;\r\n    &lt;section id=&quot;detail-page&quot;&gt;\r\n\r\n        &lt;nav&gt;\r\n            &lt;div class=&quot;icons&quot;&gt;\r\n                &lt;i class=&quot;fa-solid fa-cart-shopping&quot;&gt;&lt;div id=&quot;cart-number&quot;&gt;&lt;span&gt;${NumberOfProduct}&lt;/span&gt;&lt;/div&gt;&lt;/i&gt; \r\n                &lt;c:choose&gt;\r\n                    &lt;c:when test=&quot;${fc != null}&quot;&gt;\r\n                        &lt;a id=&quot;first-char&quot; href=&quot;login/&quot;&gt; ${fc} &lt;/i&gt;&lt;/a&gt;\r\n                    &lt;/c:when&gt;\r\n                    &lt;c:otherwise&gt;\r\n                        &lt;a href=&quot;/PhoneAccessories/login/&quot;&gt;&lt;i class=&quot;fa-solid fa-user&quot;&gt;&lt;/i&gt;&lt;/a&gt;\r\n                    &lt;/c:otherwise&gt;\r\n                &lt;/c:choose&gt;\r\n\r\n            &lt;/div&gt;\r\n\r\n        &lt;/nav&gt;\r\n\r\n\r\n    &lt;/section&gt;\r\n    \r\n    &lt;!-- Detail Product --&gt;\r\n    \r\n    &lt;div id=&quot;container-detail&quot; class=&quot;container&quot;&gt;\r\n        &lt;div class=&quot;row&quot;&gt;\r\n            &lt;div id=&quot;product-category&quot; class=&quot;col-sm-2 col-md-2&quot;&gt;\r\n            \r\n            &lt;/div&gt;\r\n            \r\n            \r\n            &lt;div class=&quot;col-sm-8 col-md-8&quot;&gt;\r\n                &lt;div class=&quot;row&quot;&gt;\r\n                    &lt;div class=&quot;col-sm-5 col-md-5&quot;&gt;\r\n                        &lt;img id=&quot;image-detail&quot; src=&#39;&lt;c:url value=&quot;/resources/Image/products/${product.getProduct_image()}&quot;/&gt;&#39; /&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;div class=&quot;col-sm-7 col-md-7&quot;&gt;\r\n                        &lt;h4 id=&quot;detail-title&quot; data-Id=&quot;${product.getProduct_id()}&quot; &gt;${product.getProduct_name()}&lt;/h4&gt;\r\n                        &lt;h5 id=&quot;detail-price&quot; data-value=&quot;${product.getProduct_price()}&quot; &gt;${product.getProduct_price()}&lt;/h5&gt;\r\n                        &lt;table class=&quot;table&quot;&gt;\r\n                            &lt;thead&gt;\r\n                                &lt;tr&gt;\r\n                                    &lt;td&gt;Color&lt;/td&gt;\r\n                                    &lt;td&gt;Quantity&lt;/td&gt;\r\n                                &lt;/tr&gt;\r\n                            &lt;/thead&gt;\r\n                            &lt;tbody&gt;\r\n                                &lt;c:forEach var=&quot;detailProduct&quot; items=&quot;${product.getProduct_Details()}&quot;&gt;\r\n                                    &lt;tr&gt;\r\n                                        &lt;td class=&quot;color&quot; data-color=&quot;${detailProduct.getProduct_Color().getColor_id()}&quot; &gt;${detailProduct.getProduct_Color().getColor_name()}&lt;/td&gt;\r\n                                        &lt;td class=&quot;quantity&quot; data-quantity=&quot;${detailProduct.getQuantity()}&quot; &gt;${detailProduct.getQuantity()}&lt;/td&gt;\r\n                                        &lt;td&gt;&lt;button id=&quot;product-button&quot; class=&quot;cart-btn&quot;&gt;shop now&lt;/button&gt;&lt;/td&gt;\r\n                                    &lt;/tr&gt;\r\n                                &lt;/c:forEach&gt;\r\n                                \r\n                            &lt;/tbody&gt;\r\n                        &lt;/table&gt;\r\n                    &lt;/div&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n            &lt;div class=&quot;col-sm-2 col-md-2&quot;&gt;\r\n                &lt;h5&gt;Description&lt;/h5&gt;\r\n                &lt;span&gt;${product.getDescription_product()}&lt;/span&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n    &lt;/div&gt;\r\n\r\n\r\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.6.4.js&quot;&gt;&lt;/script&gt;\r\n    &lt;jsp:include page=&quot;footer.jsp&quot; /&gt;\r\n&lt;/body&gt;\r\n```","title":"to load resource: the server responded with a status of 401 ()","body":"<p>i have 1 error when i try to use html in jquery to add product quantity to cart but cant add even though click event is caught.when the click event is done, get the value in the APIController with Id &quot;cart-number&quot;, it cannot be called.when i work with ajax the console shows the error:failed to load resource: the server responded with a status of 401 ()\nanyone help?\nthis is my js code:</p>\n<pre><code>$(document).ready(function(){\n    $(&quot;.cart-btn&quot;).click(function(){\n        var color_id = $(this).closest(&quot;tr&quot;).find(&quot;.color&quot;).attr(&quot;data-color&quot;);\n        var color_name = $(this).closest(&quot;tr&quot;).find(&quot;.color&quot;).text();\n        var quantity = $(this).closest(&quot;tr&quot;).find(&quot;.quantity&quot;).text();\n        \n        var product_name = $(&quot;#detail-title&quot;).text();\n        var product_id = $(&quot;#detail-title&quot;).attr(&quot;data-Id&quot;);\n        var price = $(&quot;#detail-price&quot;).attr(&quot;data-value&quot;);\n        \n           $.ajax({\n            url:&quot;/PhoneAccessories/api/addtocart&quot;,\n            type:&quot;GET&quot;,\n            data:{\n                product_id:product_id,\n                color_id:color_id,\n                quantity:quantity,\n                product_name:product_name,\n                price:price,\n                color_name:color_name\n            },\n            success: function(value){\n                $(&quot;#cart-number&quot;).html(&quot;&lt;span&gt;&quot;+value+&quot;&lt;/span&gt;&quot;);\n            }\n        })\n    \n    });\n});\n</code></pre>\n<p>this is my APIController</p>\n<pre><code>@Controller\n    @RequestMapping(&quot;api/&quot;)\n    @SessionAttributes({&quot;email&quot;,&quot;cart&quot;})\n    public class APIController {\n        @Autowired\n        EmployeeService employeeService;\n        \n        @GetMapping(&quot;addtocart&quot;)\n        public String AddToCart(@RequestParam int product_id,@RequestParam int color_id,@RequestParam int quantity,@RequestParam String product_name,@RequestParam String price,@RequestParam String color_name,HttpSession httpSession) {\n            \n            if(httpSession.getAttribute(&quot;cart&quot;) == null) {\n                List&lt;ProductCart&gt; productCarts = new ArrayList&lt;ProductCart&gt;();\n                ProductCart carts = new ProductCart();\n                carts.setProduct_id(product_id);\n                carts.setColor_id(color_id);\n                carts.setQuantity(1);\n                carts.setProduct_name(product_name);\n                carts.setPrice(price);\n                carts.setColor_name(color_name);\n                productCarts.add(carts);\n                httpSession.setAttribute(&quot;cart&quot;, productCarts);\n                List&lt;ProductCart&gt; listCart = (List&lt;ProductCart&gt;) httpSession.getAttribute(&quot;cart&quot;);\n                return listCart.size()+ &quot;&quot;;\n            }else {\n                List&lt;ProductCart&gt; listCart = (List&lt;ProductCart&gt;) httpSession.getAttribute(&quot;cart&quot;);\n                int location = CheckProductAlreadyExists(product_id, color_id, httpSession);\n                if(location == -1) {\n                    \n                    ProductCart carts = new ProductCart();\n                    carts.setProduct_id(product_id);\n                    carts.setColor_id(color_id);\n                    carts.setQuantity(1);\n                    carts.setProduct_name(product_name);\n                    carts.setPrice(price);\n                    carts.setColor_name(color_name);\n                    listCart.add(carts);\n                }else {\n                    \n                    int newQuantity = listCart.get(location).getQuantity()+1;\n                    listCart.get(location).setQuantity(newQuantity);\n                }\n                return listCart.size() +&quot;&quot;;\n                \n            }\n            \n            \n        }\n        private int CheckProductAlreadyExists(int product_id,int color_id,HttpSession httpSession) {\n            List&lt;ProductCart&gt; listCart = (List&lt;ProductCart&gt;) httpSession.getAttribute(&quot;cart&quot;);\n            for(int i=0;i&lt;listCart.size();i++) {\n                if(listCart.get(i).getProduct_id()== product_id &amp;&amp; listCart.get(i).getColor_id() ==color_id ) {\n                    return i;\n                }\n            }\n            return -1;\n        }\n</code></pre>\n<p>this is the jsp details page:</p>\n<pre><code>&lt;body&gt;\n    &lt;section id=&quot;detail-page&quot;&gt;\n\n        &lt;nav&gt;\n            &lt;div class=&quot;icons&quot;&gt;\n                &lt;i class=&quot;fa-solid fa-cart-shopping&quot;&gt;&lt;div id=&quot;cart-number&quot;&gt;&lt;span&gt;${NumberOfProduct}&lt;/span&gt;&lt;/div&gt;&lt;/i&gt; \n                &lt;c:choose&gt;\n                    &lt;c:when test=&quot;${fc != null}&quot;&gt;\n                        &lt;a id=&quot;first-char&quot; href=&quot;login/&quot;&gt; ${fc} &lt;/i&gt;&lt;/a&gt;\n                    &lt;/c:when&gt;\n                    &lt;c:otherwise&gt;\n                        &lt;a href=&quot;/PhoneAccessories/login/&quot;&gt;&lt;i class=&quot;fa-solid fa-user&quot;&gt;&lt;/i&gt;&lt;/a&gt;\n                    &lt;/c:otherwise&gt;\n                &lt;/c:choose&gt;\n\n            &lt;/div&gt;\n\n        &lt;/nav&gt;\n\n\n    &lt;/section&gt;\n    \n    &lt;!-- Detail Product --&gt;\n    \n    &lt;div id=&quot;container-detail&quot; class=&quot;container&quot;&gt;\n        &lt;div class=&quot;row&quot;&gt;\n            &lt;div id=&quot;product-category&quot; class=&quot;col-sm-2 col-md-2&quot;&gt;\n            \n            &lt;/div&gt;\n            \n            \n            &lt;div class=&quot;col-sm-8 col-md-8&quot;&gt;\n                &lt;div class=&quot;row&quot;&gt;\n                    &lt;div class=&quot;col-sm-5 col-md-5&quot;&gt;\n                        &lt;img id=&quot;image-detail&quot; src='&lt;c:url value=&quot;/resources/Image/products/${product.getProduct_image()}&quot;/&gt;' /&gt;\n                    &lt;/div&gt;\n                    &lt;div class=&quot;col-sm-7 col-md-7&quot;&gt;\n                        &lt;h4 id=&quot;detail-title&quot; data-Id=&quot;${product.getProduct_id()}&quot; &gt;${product.getProduct_name()}&lt;/h4&gt;\n                        &lt;h5 id=&quot;detail-price&quot; data-value=&quot;${product.getProduct_price()}&quot; &gt;${product.getProduct_price()}&lt;/h5&gt;\n                        &lt;table class=&quot;table&quot;&gt;\n                            &lt;thead&gt;\n                                &lt;tr&gt;\n                                    &lt;td&gt;Color&lt;/td&gt;\n                                    &lt;td&gt;Quantity&lt;/td&gt;\n                                &lt;/tr&gt;\n                            &lt;/thead&gt;\n                            &lt;tbody&gt;\n                                &lt;c:forEach var=&quot;detailProduct&quot; items=&quot;${product.getProduct_Details()}&quot;&gt;\n                                    &lt;tr&gt;\n                                        &lt;td class=&quot;color&quot; data-color=&quot;${detailProduct.getProduct_Color().getColor_id()}&quot; &gt;${detailProduct.getProduct_Color().getColor_name()}&lt;/td&gt;\n                                        &lt;td class=&quot;quantity&quot; data-quantity=&quot;${detailProduct.getQuantity()}&quot; &gt;${detailProduct.getQuantity()}&lt;/td&gt;\n                                        &lt;td&gt;&lt;button id=&quot;product-button&quot; class=&quot;cart-btn&quot;&gt;shop now&lt;/button&gt;&lt;/td&gt;\n                                    &lt;/tr&gt;\n                                &lt;/c:forEach&gt;\n                                \n                            &lt;/tbody&gt;\n                        &lt;/table&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;col-sm-2 col-md-2&quot;&gt;\n                &lt;h5&gt;Description&lt;/h5&gt;\n                &lt;span&gt;${product.getDescription_product()}&lt;/span&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.6.4.js&quot;&gt;&lt;/script&gt;\n    &lt;jsp:include page=&quot;footer.jsp&quot; /&gt;\n&lt;/body&gt;\n</code></pre>\n"},{"tags":["java","android","text-to-speech"],"answers":[{"comments":[{"owner":{"account_id":14454759,"reputation":63,"user_id":10441291,"display_name":"Ivan Goncharov"},"score":0,"creation_date":1554890487,"post_id":55597492,"comment_id":97914049,"body_markdown":"Thanks so much Benjamin, it worked brilliantly in English, like that&#39;s what we&#39;ve been looking for, man! Is there a way to make it work in Russian too maybe?","body":"Thanks so much Benjamin, it worked brilliantly in English, like that&#39;s what we&#39;ve been looking for, man! Is there a way to make it work in Russian too maybe?"},{"owner":{"account_id":14454759,"reputation":63,"user_id":10441291,"display_name":"Ivan Goncharov"},"score":0,"creation_date":1554898119,"post_id":55597492,"comment_id":97918423,"body_markdown":"No worries, man, we figured out how to use it in Russian after your response! You saved our life! Thank you so, so, so much!","body":"No worries, man, we figured out how to use it in Russian after your response! You saved our life! Thank you so, so, so much!"},{"owner":{"account_id":15477225,"reputation":218,"user_id":11165594,"display_name":"Benjamin Hue"},"score":0,"creation_date":1554979740,"post_id":55597492,"comment_id":97952615,"body_markdown":"Always welcome.","body":"Always welcome."},{"owner":{"account_id":975941,"reputation":939,"user_id":997147,"accept_rate":78,"display_name":"Saifur Rahman Mohsin"},"score":0,"creation_date":1564936890,"post_id":55597492,"comment_id":101184514,"body_markdown":"How does this work? Does it work offline consistently for all the android devices above a specific API level or only certain devices?","body":"How does this work? Does it work offline consistently for all the android devices above a specific API level or only certain devices?"}],"tags":[],"owner":{"account_id":15477225,"reputation":218,"user_id":11165594,"display_name":"Benjamin Hue"},"comment_count":4,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1681570489,"creation_date":1554827981,"answer_id":55597492,"question_id":55596618,"body_markdown":"Try this out. Make sure to add a text input box and button in your xml layout\r\n````````````````````````````````````````````````````````````````````````````````````\r\nimport java.util.Locale;\r\nimport android.speech.tts.TextToSpeech;\r\n\r\npublic class TextToSpeech {\r\n\r\n    private EditText write;\r\n    private TextToSpeech t1;\r\n    private Button speakbtn;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_text_to_speech);\r\n\r\n        write = (EditText) findViewById(R.id.editText);\r\n        speakbtn = (Button) findViewById(R.id.board);\r\n\r\n        t1 = new TextToSpeech(getApplicationContext(), new TextToSpeech.OnInitListener() {\r\n            @Override\r\n            public void onInit(int status) {\r\n                if (status != TextToSpeech.ERROR) {\r\n                    t1.setLanguage(Locale.ENGLISH);\r\n                }\r\n            }\r\n        });\r\n        speakbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String toSpeak = write.getText().toString();\r\n                Toast.makeText(getApplicationContext(), toSpeak, Toast.LENGTH_SHORT).show();\r\n                t1.speak(toSpeak, TextToSpeech.QUEUE_FLUSH, null);\r\n            }\r\n        });\r\n    }\r\n    \r\n    @Override\r\n    public void onDestroy() {\r\n        // Dont forget to shut down text to speech\r\n        if (t1 != null) {\r\n            t1.stop();\r\n            t1.shutdown();\r\n        }\r\n        super.onDestroy();\r\n    }\r\n}","title":"Text-To-Speech in Android That Works Offline","body":"<p>Try this out. Make sure to add a text input box and button in your xml layout</p>\n<pre><code>import java.util.Locale;\nimport android.speech.tts.TextToSpeech;\n\npublic class TextToSpeech {\n\n    private EditText write;\n    private TextToSpeech t1;\n    private Button speakbtn;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_text_to_speech);\n\n        write = (EditText) findViewById(R.id.editText);\n        speakbtn = (Button) findViewById(R.id.board);\n\n        t1 = new TextToSpeech(getApplicationContext(), new TextToSpeech.OnInitListener() {\n            @Override\n            public void onInit(int status) {\n                if (status != TextToSpeech.ERROR) {\n                    t1.setLanguage(Locale.ENGLISH);\n                }\n            }\n        });\n        speakbtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                String toSpeak = write.getText().toString();\n                Toast.makeText(getApplicationContext(), toSpeak, Toast.LENGTH_SHORT).show();\n                t1.speak(toSpeak, TextToSpeech.QUEUE_FLUSH, null);\n            }\n        });\n    }\n    \n    @Override\n    public void onDestroy() {\n        // Dont forget to shut down text to speech\n        if (t1 != null) {\n            t1.stop();\n            t1.shutdown();\n        }\n        super.onDestroy();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":14454759,"reputation":63,"user_id":10441291,"display_name":"Ivan Goncharov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4837,"favorite_count":0,"down_vote_count":2,"up_vote_count":6,"closed_date":1554837112,"accepted_answer_id":55597492,"answer_count":1,"score":4,"last_activity_date":1681570489,"creation_date":1554824695,"question_id":55596618,"body_markdown":"My friend and I are developing an app that uses deep learning and neural nets to help visually impaired people. We&#39;re looking for a way to bring the information that the neural nets get via the smartphone&#39;s camera back to the user via voice, thus we need to do TextToSpeech. \r\n\r\nHowever, it&#39;s a HUGE, HUGE deal for the users to have the app work offline and as all the other parts of the app are capable of running with no Internet connection (neural nets etc.) we&#39;re looking for a way to do TextToSpeech offline. The app&#39;s also in Russian, so something that can support multiple languages would be great. \r\n\r\nWe&#39;d be SUPER grateful for any hints on where to start with offline TextToSpeech on Android in Android Studio, thanks!","title":"Text-To-Speech in Android That Works Offline","body":"<p>My friend and I are developing an app that uses deep learning and neural nets to help visually impaired people. We're looking for a way to bring the information that the neural nets get via the smartphone's camera back to the user via voice, thus we need to do TextToSpeech. </p>\n\n<p>However, it's a HUGE, HUGE deal for the users to have the app work offline and as all the other parts of the app are capable of running with no Internet connection (neural nets etc.) we're looking for a way to do TextToSpeech offline. The app's also in Russian, so something that can support multiple languages would be great. </p>\n\n<p>We'd be SUPER grateful for any hints on where to start with offline TextToSpeech on Android in Android Studio, thanks!</p>\n"},{"tags":["java","spring","spring-boot","aspectj","autowired"],"comments":[{"owner":{"account_id":11577219,"reputation":818,"user_id":8482133,"accept_rate":75,"display_name":"Kishor Velayutham"},"score":0,"creation_date":1518965736,"post_id":48852955,"comment_id":84709397,"body_markdown":"Please share your code?","body":"Please share your code?"},{"owner":{"account_id":6894566,"reputation":21,"user_id":5296977,"accept_rate":25,"display_name":"193michalll"},"score":0,"creation_date":1518968561,"post_id":48852955,"comment_id":84710301,"body_markdown":"I can&#39;t share whole code but tommorow I could sent code from this class. In Generally I added two autowired field to this aspect class and it&#39;s work but not when i run test for this class. This fields are null then. I don&#39;t even know how i can fix that in theory.","body":"I can&#39;t share whole code but tommorow I could sent code from this class. In Generally I added two autowired field to this aspect class and it&#39;s work but not when i run test for this class. This fields are null then. I don&#39;t even know how i can fix that in theory."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":2,"creation_date":1519001181,"post_id":48852955,"comment_id":84719855,"body_markdown":"You have already received 4 downvotes and 3 close votes, only 2 shy of the question being closed altogether. So please edit your question to be an [MCVE](http://stackoverflow.com/help/mcve). Extract a small, executeable sample from your code base, reproducing the problem, including configuration. This is how StackOverflow works. It is about concrete programming problems and their solutions. People around here tend to be programmers like you, not mediums. With the kind of info you provide only a medium could find out what might be your problem. Sorry, man.","body":"You have already received 4 downvotes and 3 close votes, only 2 shy of the question being closed altogether. So please edit your question to be an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>. Extract a small, executeable sample from your code base, reproducing the problem, including configuration. This is how StackOverflow works. It is about concrete programming problems and their solutions. People around here tend to be programmers like you, not mediums. With the kind of info you provide only a medium could find out what might be your problem. Sorry, man."}],"answers":[{"tags":[],"owner":{"account_id":229930,"reputation":1278,"user_id":493216,"accept_rate":50,"display_name":"BigGinDaHouse"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1519025355,"creation_date":1519025355,"answer_id":48861322,"question_id":48852955,"body_markdown":"well, having in mind the fact that your question is not clear at all, here are some options that you could potentially miss in your test code:\r\n\r\n1. You are not mocking them or mocking them but not injecting\r\n2. You are not using injections in your test code at all\r\n\r\n\r\n**P.S. please read and understand more about dependency injection (@Autowired) of Spring Boot applications**","title":"Autowired fields in aspect class are null in test mode","body":"<p>well, having in mind the fact that your question is not clear at all, here are some options that you could potentially miss in your test code:</p>\n\n<ol>\n<li>You are not mocking them or mocking them but not injecting</li>\n<li>You are not using injections in your test code at all</li>\n</ol>\n\n<p><strong>P.S. please read and understand more about dependency injection (@Autowired) of Spring Boot applications</strong></p>\n"}],"owner":{"account_id":6894566,"reputation":21,"user_id":5296977,"accept_rate":25,"display_name":"193michalll"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"answer_count":1,"score":-3,"last_activity_date":1681570437,"creation_date":1518965349,"question_id":48852955,"body_markdown":"I use Spring boot and in my aspect class I have two fields which have @Autowired annotation. When I run code then it works fine, but when I run test for this class then these two autowired fields are null.\r\n\r\nCan someone tell what I need to do to fix that? I&#39;m sorry for lack of code but today I don&#39;t have access to this.\r\n\r\n---------------------\r\n\r\nexample (from another [SO question][1]):\r\n\r\nUnit test:\r\n\r\n \r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class CompanyServiceImplTest {\r\n        @Test\r\n        public void createCampaignTest() throws Exception {\r\n            when(companyDaoMock.saveCompany(any(Campaign.class))).thenReturn(77L);\r\n    \r\n            Long campaignId = companyService.createCampaign(campaignMock);\r\n    \r\n            assertEquals(Long.valueOf(77L), Long.valueOf(campaignId));\r\n        }\r\n    }\r\n\r\nService method:\r\n\r\n    @Override\r\n    @Transactional\r\n    @EventJournal(type = EventType.CAMPAIGN_CREATE, owner = EventOwner.TERMINAL_USER)\r\n    public Long createCampaign(Campaign campaign) {\r\n        return companyDao.saveCompany(campaign);\r\n    }\r\n\r\nAspect:\r\n\r\n    @Aspect\r\n    public class EventJournalAspect {\r\n    \r\n        @Autowired\r\n        private EventJournalService eventJournalService;\r\n    \r\n        @Pointcut(value=&quot;execution(public * *(..))&quot;)\r\n        public void anyPublicMethod() {}\r\n    \r\n        @Pointcut(&quot;within(com.terminal.service..*)&quot;)\r\n        private void inService() {}\r\n    \r\n    \t@AfterReturning(pointcut = &quot;anyPublicMethod() &amp;&amp; inService() &amp;&amp; @annotation(eventJournal) &amp;&amp; args(entity,..)&quot;, returning = &quot;id&quot;)\r\n    \tpublic void process(Object id, EventJournal eventJournal, AbstractDomainEntity entity)\r\n    \t\t\tthrows Throwable {\r\n    \t\tif (eventJournal.type() != EventType.CAMPAIGN_PAYMENT || id != null) {\r\n    \t\t\tsaveEvent(eventJournal, EventStatus.SUCCESS, entity, (Long) id);\r\n    \t\t}\r\n    \t}\r\n    \r\n        @AfterThrowing(pointcut = &quot;anyPublicMethod() &amp;&amp; inService() &amp;&amp; @annotation(eventJournal) &amp;&amp; args(entity,..)&quot;, throwing=&quot;ex&quot;)\r\n        public void processException(EventJournal eventJournal, AbstractDomainEntity entity, Exception ex) throws Throwable {\r\n            saveEvent(eventJournal, EventStatus.FAILURE, entity, null);\r\n        }\r\n    \r\n        private void saveEvent(EventJournal eventJournal, EventStatus status, AbstractDomainEntity entity, Long persistentId)   {\r\n            EventType type = eventJournal.type();\r\n            EventOwner owner = eventJournal.owner();\r\n            eventJournalService.saveEvent(type, owner, EventStatus.SUCCESS, entity, persistentId);\r\n        }\r\n    \r\n    }\r\n\r\n\r\nWhen test executes - `eventJournalService` is null. Thus I see `NullPointerException`\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/7433658/disabling-certain-aspects-during-unit-test-runs","title":"Autowired fields in aspect class are null in test mode","body":"<p>I use Spring boot and in my aspect class I have two fields which have @Autowired annotation. When I run code then it works fine, but when I run test for this class then these two autowired fields are null.</p>\n<p>Can someone tell what I need to do to fix that? I'm sorry for lack of code but today I don't have access to this.</p>\n<hr />\n<p>example (from another <a href=\"https://stackoverflow.com/questions/7433658/disabling-certain-aspects-during-unit-test-runs\">SO question</a>):</p>\n<p>Unit test:</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class CompanyServiceImplTest {\n    @Test\n    public void createCampaignTest() throws Exception {\n        when(companyDaoMock.saveCompany(any(Campaign.class))).thenReturn(77L);\n\n        Long campaignId = companyService.createCampaign(campaignMock);\n\n        assertEquals(Long.valueOf(77L), Long.valueOf(campaignId));\n    }\n}\n</code></pre>\n<p>Service method:</p>\n<pre><code>@Override\n@Transactional\n@EventJournal(type = EventType.CAMPAIGN_CREATE, owner = EventOwner.TERMINAL_USER)\npublic Long createCampaign(Campaign campaign) {\n    return companyDao.saveCompany(campaign);\n}\n</code></pre>\n<p>Aspect:</p>\n<pre><code>@Aspect\npublic class EventJournalAspect {\n\n    @Autowired\n    private EventJournalService eventJournalService;\n\n    @Pointcut(value=&quot;execution(public * *(..))&quot;)\n    public void anyPublicMethod() {}\n\n    @Pointcut(&quot;within(com.terminal.service..*)&quot;)\n    private void inService() {}\n\n    @AfterReturning(pointcut = &quot;anyPublicMethod() &amp;&amp; inService() &amp;&amp; @annotation(eventJournal) &amp;&amp; args(entity,..)&quot;, returning = &quot;id&quot;)\n    public void process(Object id, EventJournal eventJournal, AbstractDomainEntity entity)\n            throws Throwable {\n        if (eventJournal.type() != EventType.CAMPAIGN_PAYMENT || id != null) {\n            saveEvent(eventJournal, EventStatus.SUCCESS, entity, (Long) id);\n        }\n    }\n\n    @AfterThrowing(pointcut = &quot;anyPublicMethod() &amp;&amp; inService() &amp;&amp; @annotation(eventJournal) &amp;&amp; args(entity,..)&quot;, throwing=&quot;ex&quot;)\n    public void processException(EventJournal eventJournal, AbstractDomainEntity entity, Exception ex) throws Throwable {\n        saveEvent(eventJournal, EventStatus.FAILURE, entity, null);\n    }\n\n    private void saveEvent(EventJournal eventJournal, EventStatus status, AbstractDomainEntity entity, Long persistentId)   {\n        EventType type = eventJournal.type();\n        EventOwner owner = eventJournal.owner();\n        eventJournalService.saveEvent(type, owner, EventStatus.SUCCESS, entity, persistentId);\n    }\n\n}\n</code></pre>\n<p>When test executes - <code>eventJournalService</code> is null. Thus I see <code>NullPointerException</code></p>\n"},{"tags":["java","spring","repository"],"comments":[{"owner":{"account_id":2311235,"reputation":2373,"user_id":2029323,"accept_rate":88,"display_name":"veinhorn"},"score":0,"creation_date":1555190911,"post_id":24074150,"comment_id":98026298,"body_markdown":"you can also check https://github.com/VEINHORN/spring-data-sqlfile library if you want load SQL queries from resources.","body":"you can also check <a href=\"https://github.com/VEINHORN/spring-data-sqlfile\" rel=\"nofollow noreferrer\">github.com/VEINHORN/spring-data-sqlfile</a> library if you want load SQL queries from resources."}],"answers":[{"comments":[{"owner":{"account_id":150404,"reputation":42109,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"score":0,"creation_date":1402030646,"post_id":24074282,"comment_id":37125277,"body_markdown":"Exactly what I was looking for and even simpler !","body":"Exactly what I was looking for and even simpler !"}],"tags":[],"owner":{"account_id":4328396,"reputation":699,"user_id":3534522,"display_name":"Fernando Rincon"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1681570384,"creation_date":1402029624,"answer_id":24074282,"question_id":24074150,"body_markdown":"You can use JPA Named Query. You need to put the query in the orm.xml file like this:\r\n\r\n\r\n     &lt;named-query name=&quot;User.findByLastname&quot;&gt;\r\n        &lt;query&gt;select u from User u where u.lastname = ?1&lt;/query&gt;\r\n     &lt;/named-query&gt;\r\n\r\nFor example and then you just need to declare the method findByLastname in your repository class:\r\n\r\n    public interface UserRepository extends JpaRepository&lt;User, Long&gt; {\r\n      List&lt;User&gt; findByLastname(String lastname);   \r\n    }\r\n\r\nYou can see the documentation in [Spring Data Documentation][1] or for 2023 version of dependency have a look at [Spring Data JPA 3.0.3 Documentation][2].\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-data/jpa/docs/1.6.0.RELEASE/reference/html/jpa.repositories.html#jpa.query-methods.named-queries\r\n  [2]: https://docs.spring.io/spring-data/jpa/docs/3.0.3/reference/html/#jpa.query-methods.named-queries","title":"How to read a query from a resource with Spring?","body":"<p>You can use JPA Named Query. You need to put the query in the orm.xml file like this:</p>\n<pre><code> &lt;named-query name=&quot;User.findByLastname&quot;&gt;\n    &lt;query&gt;select u from User u where u.lastname = ?1&lt;/query&gt;\n &lt;/named-query&gt;\n</code></pre>\n<p>For example and then you just need to declare the method findByLastname in your repository class:</p>\n<pre><code>public interface UserRepository extends JpaRepository&lt;User, Long&gt; {\n  List&lt;User&gt; findByLastname(String lastname);   \n}\n</code></pre>\n<p>You can see the documentation in <a href=\"http://docs.spring.io/spring-data/jpa/docs/1.6.0.RELEASE/reference/html/jpa.repositories.html#jpa.query-methods.named-queries\" rel=\"nofollow noreferrer\">Spring Data Documentation</a> or for 2023 version of dependency have a look at <a href=\"https://docs.spring.io/spring-data/jpa/docs/3.0.3/reference/html/#jpa.query-methods.named-queries\" rel=\"nofollow noreferrer\">Spring Data JPA 3.0.3 Documentation</a>.</p>\n"}],"owner":{"account_id":150404,"reputation":42109,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1306,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":24074282,"answer_count":1,"score":3,"last_activity_date":1681570384,"creation_date":1402028846,"question_id":24074150,"body_markdown":"Here is my repository:\r\n\r\n    public interface MyObjectRepository extends CrudRepository&lt;MyObject, Long&gt; {\r\n\r\n        @Query(&quot;&lt;a-complex-query&gt;&quot;)\r\n        List&lt;MyObject&gt; doBusinessSpecificComplexQuery();\r\n\r\n    }\r\n\r\nI can type directly my complex query in the `@Query` annotation but the code loose its readability.\r\n\r\nI would like to do something like below instead:\r\n\r\n    public interface MyObjectRepository extends CrudRepository&lt;MyObject, Long&gt; {\r\n\r\n        @Query(load(&quot;classpath:my-complex-query.sql&quot;))\r\n        List&lt;MyObject&gt; doBusinessSpecificComplexQuery();\r\n\r\n    }\r\n\r\nThis won&#39;t work since `@Query` value parameter expects a constant value.\r\n\r\nHow can I read my complex query from a resource ?","title":"How to read a query from a resource with Spring?","body":"<p>Here is my repository:</p>\n\n<pre><code>public interface MyObjectRepository extends CrudRepository&lt;MyObject, Long&gt; {\n\n    @Query(\"&lt;a-complex-query&gt;\")\n    List&lt;MyObject&gt; doBusinessSpecificComplexQuery();\n\n}\n</code></pre>\n\n<p>I can type directly my complex query in the <code>@Query</code> annotation but the code loose its readability.</p>\n\n<p>I would like to do something like below instead:</p>\n\n<pre><code>public interface MyObjectRepository extends CrudRepository&lt;MyObject, Long&gt; {\n\n    @Query(load(\"classpath:my-complex-query.sql\"))\n    List&lt;MyObject&gt; doBusinessSpecificComplexQuery();\n\n}\n</code></pre>\n\n<p>This won't work since <code>@Query</code> value parameter expects a constant value.</p>\n\n<p>How can I read my complex query from a resource ?</p>\n"},{"tags":["java","jvm"],"answers":[{"comments":[{"owner":{"account_id":5201756,"reputation":1971,"user_id":4160889,"accept_rate":74,"display_name":"ForeverLearner"},"score":0,"creation_date":1523340062,"post_id":49745810,"comment_id":86506968,"body_markdown":"Thank your help @Ivan. I am going through the link and it is really very helpful.","body":"Thank your help @Ivan. I am going through the link and it is really very helpful."}],"tags":[],"owner":{"account_id":1429320,"reputation":2884,"user_id":1352098,"display_name":"Ivan Mamontov"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1523590545,"creation_date":1523337389,"answer_id":49745810,"question_id":49744966,"body_markdown":"You can use JVM output(via `-XX:+PrintFlagsFinal`) in order to check oop compression \r\n\r\n    java -Xmx32766m -XX:+PrintFlagsFinal 2&gt; /dev/null | grep UseCompressedOops\r\n         bool UseCompressedOops                        := true                                {lp64_product} \r\n\r\nfor heaps larger than `32767m` JVM disables compressed oops:\r\n\r\n    java -Xmx32767m -XX:+PrintFlagsFinal 2&gt; /dev/null | grep UseCompressedOops\r\n         bool UseCompressedOops                         = false                               {lp64_product}\r\n\r\nAnother option is to use diagostic vm options:\r\n\r\n    java -XX:+UnlockDiagnosticVMOptions -XX:+PrintCompressedOopsMode -version\r\n\r\nwhich returns detailed information about oops mode:\r\n\r\n    heap address: 0x0000000082600000, size: 2010 MB, Compressed Oops mode: 32-bit\r\n    Narrow klass base: 0x0000000000000000, Narrow klass shift: 3\r\n    Compressed class space size: 1073741824 Address: 0x0000000100000000 Req Addr: 0x0000000100000000\r\n\r\nAnd the most advanced way is to use [HotSpot Serviceability Agent][1] which allows to check more information about JVM internals:\r\n\r\n    import sun.jvm.hotspot.runtime.VM;\r\n    import sun.jvm.hotspot.tools.Tool;\r\n    \r\n    public class OopsChecker extends Tool {\r\n    \r\n        @Override\r\n        public void run() {\r\n            VM vm = VM.getVM();\r\n            System.out.println(&quot;CompressedOops = &quot; + vm.isCompressedOopsEnabled());\r\n            System.out.println(&quot;CompressedClassPointers = &quot; + vm.isCompressedKlassPointersEnabled());\r\n            System.out.println(&quot;OOP base = 0x&quot; + Long.toHexString(vm.getDebugger().getNarrowOopBase()));\r\n            System.out.println(&quot;OOP shift = &quot; + vm.getDebugger().getNarrowOopShift());\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            new OopsChecker().execute(args);\r\n        }\r\n    }\r\n\r\nYou can play with heap size parameters and check output. The Java classes for SA are placed in `jdk/lib/sa-jdi.jar` so you have to add this jar into your classpath.\r\n\r\n  [1]: http://openjdk.java.net/groups/hotspot/docs/Serviceability.html","title":"Can i find out if the ordinary object pointer is compressed in my current jdk","body":"<p>You can use JVM output(via <code>-XX:+PrintFlagsFinal</code>) in order to check oop compression </p>\n\n<pre><code>java -Xmx32766m -XX:+PrintFlagsFinal 2&gt; /dev/null | grep UseCompressedOops\n     bool UseCompressedOops                        := true                                {lp64_product} \n</code></pre>\n\n<p>for heaps larger than <code>32767m</code> JVM disables compressed oops:</p>\n\n<pre><code>java -Xmx32767m -XX:+PrintFlagsFinal 2&gt; /dev/null | grep UseCompressedOops\n     bool UseCompressedOops                         = false                               {lp64_product}\n</code></pre>\n\n<p>Another option is to use diagostic vm options:</p>\n\n<pre><code>java -XX:+UnlockDiagnosticVMOptions -XX:+PrintCompressedOopsMode -version\n</code></pre>\n\n<p>which returns detailed information about oops mode:</p>\n\n<pre><code>heap address: 0x0000000082600000, size: 2010 MB, Compressed Oops mode: 32-bit\nNarrow klass base: 0x0000000000000000, Narrow klass shift: 3\nCompressed class space size: 1073741824 Address: 0x0000000100000000 Req Addr: 0x0000000100000000\n</code></pre>\n\n<p>And the most advanced way is to use <a href=\"http://openjdk.java.net/groups/hotspot/docs/Serviceability.html\" rel=\"nofollow noreferrer\">HotSpot Serviceability Agent</a> which allows to check more information about JVM internals:</p>\n\n<pre><code>import sun.jvm.hotspot.runtime.VM;\nimport sun.jvm.hotspot.tools.Tool;\n\npublic class OopsChecker extends Tool {\n\n    @Override\n    public void run() {\n        VM vm = VM.getVM();\n        System.out.println(\"CompressedOops = \" + vm.isCompressedOopsEnabled());\n        System.out.println(\"CompressedClassPointers = \" + vm.isCompressedKlassPointersEnabled());\n        System.out.println(\"OOP base = 0x\" + Long.toHexString(vm.getDebugger().getNarrowOopBase()));\n        System.out.println(\"OOP shift = \" + vm.getDebugger().getNarrowOopShift());\n    }\n\n    public static void main(String[] args) {\n        new OopsChecker().execute(args);\n    }\n}\n</code></pre>\n\n<p>You can play with heap size parameters and check output. The Java classes for SA are placed in <code>jdk/lib/sa-jdi.jar</code> so you have to add this jar into your classpath.</p>\n"}],"owner":{"account_id":5201756,"reputation":1971,"user_id":4160889,"accept_rate":74,"display_name":"ForeverLearner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":413,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49745810,"answer_count":1,"score":1,"last_activity_date":1681569532,"creation_date":1523331970,"question_id":49744966,"body_markdown":"I have the below version of jdk currently running:\r\n\r\n    openjdk version &quot;1.8.0_144&quot;\r\n    OpenJDK Runtime Environment (build 1.8.0_144-b01)\r\n    OpenJDK 64-Bit Server VM (build 25.144-b01, mixed mode)\r\n\r\nIs there way to verify if oop compression is supported by this jdk? I am still learning, so please excuse if this sounds very basic.","title":"Can i find out if the ordinary object pointer is compressed in my current jdk","body":"<p>I have the below version of jdk currently running:</p>\n\n<pre><code>openjdk version \"1.8.0_144\"\nOpenJDK Runtime Environment (build 1.8.0_144-b01)\nOpenJDK 64-Bit Server VM (build 25.144-b01, mixed mode)\n</code></pre>\n\n<p>Is there way to verify if oop compression is supported by this jdk? I am still learning, so please excuse if this sounds very basic.</p>\n"},{"tags":["java","elasticsearch","garbage-collection","jvm","heap-memory"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1507281831,"post_id":46597668,"comment_id":80156720,"body_markdown":"Note that the heap doesn’t start at zero in both cases. But in the first case, the sum of start address and heap size is below the 32GiB threshold, which allows zero based addressing. But why is this question tagged with “garbage-collection”?","body":"Note that the heap doesn’t start at zero in both cases. But in the first case, the sum of start address and heap size is below the 32GiB threshold, which allows zero based addressing. But why is this question tagged with “garbage-collection”?"},{"owner":{"account_id":1429320,"reputation":2884,"user_id":1352098,"display_name":"Ivan Mamontov"},"score":0,"creation_date":1507347916,"post_id":46597668,"comment_id":80184578,"body_markdown":"Please provide information about your OS and ES version, if my answer did not help you.","body":"Please provide information about your OS and ES version, if my answer did not help you."},{"owner":{"account_id":1267331,"reputation":2620,"user_id":1224363,"accept_rate":87,"display_name":"Chris Bedford"},"score":0,"creation_date":1507410351,"post_id":46597668,"comment_id":80200691,"body_markdown":"Wow.. great answers. I will review and try out the suggestions tomorrow.  In response to  @Holger - reason for the tag garbage collection is cause we are trying to optimize the setting of our heap size in addition to other garbage collection related tweaks.. thought this topic is relevant for any one else tuning GC.  /thnx","body":"Wow.. great answers. I will review and try out the suggestions tomorrow.  In response to  @Holger - reason for the tag garbage collection is cause we are trying to optimize the setting of our heap size in addition to other garbage collection related tweaks.. thought this topic is relevant for any one else tuning GC.  /thnx"}],"answers":[{"tags":[],"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1507274398,"creation_date":1507274398,"answer_id":46600331,"question_id":46597668,"body_markdown":"[HotSpot Serviceability Agent](http://www.javamagazine.mozaicreader.com/JanFeb2017#&amp;pageSet=31&amp;page=0&amp;contentItem=0) can show this on a running JVM process even with no extra command-line flags required.\r\n\r\nRun the following program with the target Java process ID as an argument.\r\n\r\n    import sun.jvm.hotspot.runtime.VM;\r\n    import sun.jvm.hotspot.tools.Tool;\r\n    \r\n    public class CompressedOopsInfo extends Tool {\r\n    \r\n        @Override\r\n        public void run() {\r\n            VM vm = VM.getVM();\r\n            System.out.println(&quot;CompressedOops = &quot; + vm.isCompressedOopsEnabled());\r\n            System.out.println(&quot;CompressedClassPointers = &quot; + vm.isCompressedKlassPointersEnabled());\r\n            System.out.println(&quot;OOP base = 0x&quot; + Long.toHexString(vm.getDebugger().getNarrowOopBase()));\r\n            System.out.println(&quot;OOP shift = &quot; + vm.getDebugger().getNarrowOopShift());\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            new CompressedOopsInfo().execute(args);\r\n        }\r\n    }\r\n\r\nPrior to JDK 9 this requires including `${JDK_HOME}/lib/sa-jdi.jar` in the classpath. The program needs to run under the same JVM version as used to run the target process.","title":"how to determine if Java heap is using compressed pointers and whether or not resides at address 0 in memory?","body":"<p><a href=\"http://www.javamagazine.mozaicreader.com/JanFeb2017#&amp;pageSet=31&amp;page=0&amp;contentItem=0\" rel=\"nofollow noreferrer\">HotSpot Serviceability Agent</a> can show this on a running JVM process even with no extra command-line flags required.</p>\n\n<p>Run the following program with the target Java process ID as an argument.</p>\n\n<pre><code>import sun.jvm.hotspot.runtime.VM;\nimport sun.jvm.hotspot.tools.Tool;\n\npublic class CompressedOopsInfo extends Tool {\n\n    @Override\n    public void run() {\n        VM vm = VM.getVM();\n        System.out.println(\"CompressedOops = \" + vm.isCompressedOopsEnabled());\n        System.out.println(\"CompressedClassPointers = \" + vm.isCompressedKlassPointersEnabled());\n        System.out.println(\"OOP base = 0x\" + Long.toHexString(vm.getDebugger().getNarrowOopBase()));\n        System.out.println(\"OOP shift = \" + vm.getDebugger().getNarrowOopShift());\n    }\n\n    public static void main(String[] args) {\n        new CompressedOopsInfo().execute(args);\n    }\n}\n</code></pre>\n\n<p>Prior to JDK 9 this requires including <code>${JDK_HOME}/lib/sa-jdi.jar</code> in the classpath. The program needs to run under the same JVM version as used to run the target process.</p>\n"},{"tags":[],"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1507314067,"creation_date":1507314067,"answer_id":46611774,"question_id":46597668,"body_markdown":"&gt; However, when I tried those options and grep&#39;d through my application&#39;s (Elastic Search&#39;s) log directory I could find no such messages.\r\n\r\nProbably because it only logs application messages to that directory. You need to log JVM output to a file too or inspect stdout or stderr for those messages.","title":"how to determine if Java heap is using compressed pointers and whether or not resides at address 0 in memory?","body":"<blockquote>\n  <p>However, when I tried those options and grep'd through my application's (Elastic Search's) log directory I could find no such messages.</p>\n</blockquote>\n\n<p>Probably because it only logs application messages to that directory. You need to log JVM output to a file too or inspect stdout or stderr for those messages.</p>\n"},{"tags":[],"owner":{"account_id":1429320,"reputation":2884,"user_id":1352098,"display_name":"Ivan Mamontov"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1507432972,"creation_date":1507347178,"answer_id":46616407,"question_id":46597668,"body_markdown":"Assume you are using Linux and ES with version 5.x and higher.\r\n\r\nThe most efficient way to gather information across the whole cluster is to use [the nodes info API][1]:\r\n\r\n&gt; curl -XGET\r\n&gt; &quot;http://localhost:9200/_nodes/jvm?filter_path=nodes.*.jvm.using_compressed_ordinary_object_pointers&quot;\r\n&gt; \r\n&gt; {&quot;nodes&quot;:{&quot;-jYDCxbpT2SBKc4dTfOYsA&quot;:{&quot;jvm&quot;:{&quot;using_compressed_ordinary_object_pointers&quot;:&quot;true&quot;}}}}\r\n\r\nThe same information is logged into the main log - /var/log/elasticsearch/elasticsearch.log\r\n\r\n&gt; [2017-10-06T23:03:15,223][INFO ][o.e.e.NodeEnvironment    ] [-jYDCxb]\r\n&gt; heap size [1.9gb], compressed ordinary object pointers [true]\r\n\r\nIf you are interested in the real JVM output then you have to know that by default JVM writes it&#39;s messages into standard output and on Linux distributions this output by default is configured to redirect to journalctl. So you have two choices. The first one is to read the journalctl:\r\n\r\n&gt; sudo journalctl -u elasticsearch.service \r\n&gt;\r\n&gt; Narrow klass base: 0x0000000000000000, Narrow klass shift: 3\r\n&gt; Compressed class space size: 1073741824 Address: 0x0000000100000000 Req Addr: 0x0000000100000000\r\n\r\nBut sometimes journalctl disabled by default and you have to change this setting in the daemon config `/usr/lib/systemd/system/elasticsearch.service` by removing `--quite` parameter from ES command line parameters. The second approach is the simplest and cross platform - redirect JVM message to particular GC log output:\r\n\r\n&gt; -XX:+UnlockDiagnosticVMOptions -XX:+PrintCompressedOopsMode -Xloggc:/tmp/vm.log\r\n\r\nNow you can see all GC related output in `/tmp/vm.log`\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-info.html","title":"how to determine if Java heap is using compressed pointers and whether or not resides at address 0 in memory?","body":"<p>Assume you are using Linux and ES with version 5.x and higher.</p>\n\n<p>The most efficient way to gather information across the whole cluster is to use <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-info.html\" rel=\"noreferrer\">the nodes info API</a>:</p>\n\n<blockquote>\n  <p>curl -XGET\n  \"<a href=\"http://localhost:9200/_nodes/jvm?filter_path=nodes\" rel=\"noreferrer\">http://localhost:9200/_nodes/jvm?filter_path=nodes</a>.*.jvm.using_compressed_ordinary_object_pointers\"</p>\n  \n  <p>{\"nodes\":{\"-jYDCxbpT2SBKc4dTfOYsA\":{\"jvm\":{\"using_compressed_ordinary_object_pointers\":\"true\"}}}}</p>\n</blockquote>\n\n<p>The same information is logged into the main log - /var/log/elasticsearch/elasticsearch.log</p>\n\n<blockquote>\n  <p>[2017-10-06T23:03:15,223][INFO ][o.e.e.NodeEnvironment    ] [-jYDCxb]\n  heap size [1.9gb], compressed ordinary object pointers [true]</p>\n</blockquote>\n\n<p>If you are interested in the real JVM output then you have to know that by default JVM writes it's messages into standard output and on Linux distributions this output by default is configured to redirect to journalctl. So you have two choices. The first one is to read the journalctl:</p>\n\n<blockquote>\n  <p>sudo journalctl -u elasticsearch.service </p>\n  \n  <p>Narrow klass base: 0x0000000000000000, Narrow klass shift: 3\n  Compressed class space size: 1073741824 Address: 0x0000000100000000 Req Addr: 0x0000000100000000</p>\n</blockquote>\n\n<p>But sometimes journalctl disabled by default and you have to change this setting in the daemon config <code>/usr/lib/systemd/system/elasticsearch.service</code> by removing <code>--quite</code> parameter from ES command line parameters. The second approach is the simplest and cross platform - redirect JVM message to particular GC log output:</p>\n\n<blockquote>\n  <p>-XX:+UnlockDiagnosticVMOptions -XX:+PrintCompressedOopsMode -Xloggc:/tmp/vm.log</p>\n</blockquote>\n\n<p>Now you can see all GC related output in <code>/tmp/vm.log</code></p>\n"},{"tags":[],"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681569484,"creation_date":1681569484,"answer_id":76022907,"question_id":46597668,"body_markdown":"    boolean compressedOopsEnabled = Boolean.parseBoolean(java.lang.management.ManagementFactory\r\n\t\t.getPlatformMXBean(com.sun.management.HotSpotDiagnosticMXBean.class)\r\n\t\t.getVMOption(&quot;UseCompressedOops&quot;).getValue());","title":"how to determine if Java heap is using compressed pointers and whether or not resides at address 0 in memory?","body":"<pre><code>boolean compressedOopsEnabled = Boolean.parseBoolean(java.lang.management.ManagementFactory\n    .getPlatformMXBean(com.sun.management.HotSpotDiagnosticMXBean.class)\n    .getVMOption(&quot;UseCompressedOops&quot;).getValue());\n</code></pre>\n"}],"owner":{"account_id":1267331,"reputation":2620,"user_id":1224363,"accept_rate":87,"display_name":"Chris Bedford"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2676,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":46600331,"answer_count":4,"score":5,"last_activity_date":1681569484,"creation_date":1507259125,"question_id":46597668,"body_markdown":"I am trying to follow up on some tips in this blog https://www.elastic.co/blog/a-heap-of-trouble#ref5 which discusses the benefits of sizing one&#39;s Java heap so that (a) compressed pointers can be used (for heaps under 32GB) and (b) so that the heap resides at address 0 in memory.  The article details how compressed pointers allow more efficient  use of heap space, and explains that when the heap lives at address zero this  reduces the amount of arithmetic necessary to resolve pointer addresses.    Finally, the article says that if I use JVM options `-XX:+UnlockDiagnosticVMOptions` -`XX:+PrintCompressedOopsMode` I will see log output either like this:  \r\n\r\n` heap address: 0x000000011be00000, size: 27648 MB, zero based Compressed Oops  \r\n`\r\n\r\n which indicates zero-based compressed oops are enabled, or output like this\r\n\r\n`heap address: 0x0000000118400000, size: 28672 MB, Compressed Oops with base: 0x00000001183ff000\r\n`\r\n\r\n Which indicates that the heap begins at an address other than zero, therefore requiring the aforementioned increase amount of arithmetic processing.  \r\n\r\nHowever, when I tried those options and grep&#39;d through my application&#39;s (Elastic Search&#39;s) log directory I could find no such messages. If anyone could advise me on how I can force details of zero-based (or not zero based) compressed pointers to be logged I&#39;d be very grateful.\r\n\r\n\r\nRESOLUTION: \r\n\r\ngreat answers !.. I accepted @apangin&#39;s and I wrapped the java program he provided in a shell script that can run as long as you have java.. which you should if you are looking at Java heap!  here is the script: https://github.com/buildlackey/scripts/blob/master/verify_compressed_pointers_from_zero_offset.sh\r\n","title":"how to determine if Java heap is using compressed pointers and whether or not resides at address 0 in memory?","body":"<p>I am trying to follow up on some tips in this blog <a href=\"https://www.elastic.co/blog/a-heap-of-trouble#ref5\" rel=\"nofollow noreferrer\">https://www.elastic.co/blog/a-heap-of-trouble#ref5</a> which discusses the benefits of sizing one's Java heap so that (a) compressed pointers can be used (for heaps under 32GB) and (b) so that the heap resides at address 0 in memory.  The article details how compressed pointers allow more efficient  use of heap space, and explains that when the heap lives at address zero this  reduces the amount of arithmetic necessary to resolve pointer addresses.    Finally, the article says that if I use JVM options <code>-XX:+UnlockDiagnosticVMOptions</code> -<code>XX:+PrintCompressedOopsMode</code> I will see log output either like this:  </p>\n\n<p><code>heap address: 0x000000011be00000, size: 27648 MB, zero based Compressed Oops\n</code></p>\n\n<p>which indicates zero-based compressed oops are enabled, or output like this</p>\n\n<p><code>heap address: 0x0000000118400000, size: 28672 MB, Compressed Oops with base: 0x00000001183ff000\n</code></p>\n\n<p>Which indicates that the heap begins at an address other than zero, therefore requiring the aforementioned increase amount of arithmetic processing.  </p>\n\n<p>However, when I tried those options and grep'd through my application's (Elastic Search's) log directory I could find no such messages. If anyone could advise me on how I can force details of zero-based (or not zero based) compressed pointers to be logged I'd be very grateful.</p>\n\n<p>RESOLUTION: </p>\n\n<p>great answers !.. I accepted @apangin's and I wrapped the java program he provided in a shell script that can run as long as you have java.. which you should if you are looking at Java heap!  here is the script: <a href=\"https://github.com/buildlackey/scripts/blob/master/verify_compressed_pointers_from_zero_offset.sh\" rel=\"nofollow noreferrer\">https://github.com/buildlackey/scripts/blob/master/verify_compressed_pointers_from_zero_offset.sh</a></p>\n"},{"tags":["java","jpa","eclipselink"],"comments":[{"owner":{"account_id":2005516,"reputation":17831,"user_id":1795530,"accept_rate":100,"display_name":"dic19"},"score":3,"creation_date":1411739015,"post_id":26060940,"comment_id":40829144,"body_markdown":"Are both table records being inserted? OTOH if I was persist an instance of a subclass then I&#39;d expect the `@PrePersist` method of this subclass be called but not the superclass&#39;. After all the subclass is a full entity that will be persisted into two tables but still a single object.","body":"Are both table records being inserted? OTOH if I was persist an instance of a subclass then I&#39;d expect the <code>@PrePersist</code> method of this subclass be called but not the superclass&#39;. After all the subclass is a full entity that will be persisted into two tables but still a single object."},{"owner":{"account_id":2277593,"reputation":484,"user_id":2003481,"accept_rate":69,"display_name":"kraken"},"score":0,"creation_date":1411747702,"post_id":26060940,"comment_id":40834588,"body_markdown":"I have a date field in my parent class, and i want set current time on create a new record in database","body":"I have a date field in my parent class, and i want set current time on create a new record in database"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1412000271,"post_id":26060940,"comment_id":40904276,"body_markdown":"Does it work if you use joined inheritance instead?","body":"Does it work if you use joined inheritance instead?"},{"owner":{"account_id":2277593,"reputation":484,"user_id":2003481,"accept_rate":69,"display_name":"kraken"},"score":0,"creation_date":1412055621,"post_id":26060940,"comment_id":40924970,"body_markdown":"Yes. It works when i use joined inheritance type. I&#39;ve created a test repo https://github.com/SunPj/eclipselink-h2-jpa/tree/master","body":"Yes. It works when i use joined inheritance type. I&#39;ve created a test repo <a href=\"https://github.com/SunPj/eclipselink-h2-jpa/tree/master\" rel=\"nofollow noreferrer\">github.com/SunPj/eclipselink-h2-jpa/tree/master</a>"}],"answers":[{"comments":[{"owner":{"account_id":2277593,"reputation":484,"user_id":2003481,"accept_rate":69,"display_name":"kraken"},"score":0,"creation_date":1411747593,"post_id":26063003,"comment_id":40834525,"body_markdown":"It isn&#39;t than me need. I need only one callback in my parent class, but it doesn&#39;t work (even if i remove callback from child class).","body":"It isn&#39;t than me need. I need only one callback in my parent class, but it doesn&#39;t work (even if i remove callback from child class)."},{"owner":{"account_id":2277593,"reputation":484,"user_id":2003481,"accept_rate":69,"display_name":"kraken"},"score":0,"creation_date":1411893976,"post_id":26063003,"comment_id":40870079,"body_markdown":"The first one isn&#39;t work that i expect. Method onCreateOne() hasn&#39;t  executed. I&#39;ve only seen &quot;Executed onCreate2&quot;","body":"The first one isn&#39;t work that i expect. Method onCreateOne() hasn&#39;t  executed. I&#39;ve only seen &quot;Executed onCreate2&quot;"},{"owner":{"account_id":2277593,"reputation":484,"user_id":2003481,"accept_rate":69,"display_name":"kraken"},"score":0,"creation_date":1411899325,"post_id":26063003,"comment_id":40871199,"body_markdown":"I&#39;ve made test project to show that PreCreate doesn&#39;t work.\nhttps://github.com/SunPj/eclipselink-h2-jpa/tree/master","body":"I&#39;ve made test project to show that PreCreate doesn&#39;t work. <a href=\"https://github.com/SunPj/eclipselink-h2-jpa/tree/master\" rel=\"nofollow noreferrer\">github.com/SunPj/eclipselink-h2-jpa/tree/master</a>"},{"owner":{"account_id":2277593,"reputation":484,"user_id":2003481,"accept_rate":69,"display_name":"kraken"},"score":0,"creation_date":1411902765,"post_id":26063003,"comment_id":40871956,"body_markdown":"When i changed eclipselink to hibernate all work fine. I think it&#39;s a bug","body":"When i changed eclipselink to hibernate all work fine. I think it&#39;s a bug"}],"tags":[],"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"comment_count":4,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1411754850,"creation_date":1411745009,"answer_id":26063003,"question_id":26060940,"body_markdown":"The Book Mastering the Java persistence API notes the following:\r\n\r\n&gt; Inheriting Callback Methods\r\n&gt; \r\n&gt; Callback methods may occur on any entity or mapped superclass, be it\r\n&gt; abstract or concrete. The rule is fairly simple. **It is that every\r\n&gt; callback method for a given event type will be invoked in the order\r\naccording to its place in the hierarchy, most general classes first.**\r\n&gt; Thus, if in our Employee hierarchy that we saw in Figure 10-10 the\r\n&gt; Employee class contains a PrePersist callback method named\r\n&gt; checkName(), and FullTimeEmployee also contains a PrePersist callback\r\n&gt; method named verifyPension(), when the PrePersist event occurs, the\r\n&gt; checkName() method will get invoked, followed by the verifyPension()\r\n&gt; method.\r\n\r\nTherefore if everything else in your original code was correct you should expect to see both onCreateOne() and onCreateTwo() called and in that order.\r\n\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    public class SiteMessage implements Identifiable{\r\n        @PrePersist\r\n        public void onCreateOne(){\r\n            System.out.println(&quot;Executed onCreate1&quot;); //executes first\r\n        }\r\n    }\r\n    \r\n    @Entity\r\n    @Table(name = &quot;feedback&quot;)\r\n    public class Feedback extends SiteMessage {\r\n        @PrePersist\r\n        public void onCreateTwo(){\r\n            System.out.println(&quot;Executed onCreate2&quot;); //executes second\r\n        }\r\n    }\r\n\r\n\r\nIt goes on to note the following so you should be able to set things up exactly as required.\r\n\r\n&gt; We could also have a method on the CompanyEmployee mapped superclass\r\n&gt; that we want to apply to all the entities that subclassed it. If we\r\n&gt; add a PrePersist method named checkVacation() that verifies that the\r\n&gt; vacation carryover is less than a certain amount, it will be executed\r\n&gt; after checkName() and before verifyPension(). It gets more interesting\r\n&gt; if we define a checkVacation() method on the PartTimeEmployee class\r\n&gt; because part-time employees don’t get as much vacation. **Annotating the\r\n&gt; overridden method with PrePersist would cause the\r\n&gt; PartTimeEmployee.checkVacation() method to be invoked instead of the\r\n&gt; one in CompanyEmployee**\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    public class SiteMessage implements Identifiable{\r\n        @PrePersist\r\n        public void onCreate(){\r\n            System.out.println(&quot;Executed onCreate1&quot;); //will not execute\r\n        }\r\n    }\r\n    \r\n    @Entity\r\n    @Table(name = &quot;feedback&quot;)\r\n    public class Feedback extends SiteMessage {\r\n        @PrePersist\r\n        public void onCreate(){\r\n            System.out.println(&quot;Executed onCreate2&quot;); //will execute\r\n        }\r\n    }\r\n\r\n","title":"Jpa prepersist callback not called on parent","body":"<p>The Book Mastering the Java persistence API notes the following:</p>\n\n<blockquote>\n  <p>Inheriting Callback Methods</p>\n  \n  <p>Callback methods may occur on any entity or mapped superclass, be it\n  abstract or concrete. The rule is fairly simple. <strong>It is that every\n  callback method for a given event type will be invoked in the order\n  according to its place in the hierarchy, most general classes first.</strong>\n  Thus, if in our Employee hierarchy that we saw in Figure 10-10 the\n  Employee class contains a PrePersist callback method named\n  checkName(), and FullTimeEmployee also contains a PrePersist callback\n  method named verifyPension(), when the PrePersist event occurs, the\n  checkName() method will get invoked, followed by the verifyPension()\n  method.</p>\n</blockquote>\n\n<p>Therefore if everything else in your original code was correct you should expect to see both onCreateOne() and onCreateTwo() called and in that order.</p>\n\n<pre><code>@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\npublic class SiteMessage implements Identifiable{\n    @PrePersist\n    public void onCreateOne(){\n        System.out.println(\"Executed onCreate1\"); //executes first\n    }\n}\n\n@Entity\n@Table(name = \"feedback\")\npublic class Feedback extends SiteMessage {\n    @PrePersist\n    public void onCreateTwo(){\n        System.out.println(\"Executed onCreate2\"); //executes second\n    }\n}\n</code></pre>\n\n<p>It goes on to note the following so you should be able to set things up exactly as required.</p>\n\n<blockquote>\n  <p>We could also have a method on the CompanyEmployee mapped superclass\n  that we want to apply to all the entities that subclassed it. If we\n  add a PrePersist method named checkVacation() that verifies that the\n  vacation carryover is less than a certain amount, it will be executed\n  after checkName() and before verifyPension(). It gets more interesting\n  if we define a checkVacation() method on the PartTimeEmployee class\n  because part-time employees don’t get as much vacation. <strong>Annotating the\n  overridden method with PrePersist would cause the\n  PartTimeEmployee.checkVacation() method to be invoked instead of the\n  one in CompanyEmployee</strong></p>\n</blockquote>\n\n<pre><code>@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\npublic class SiteMessage implements Identifiable{\n    @PrePersist\n    public void onCreate(){\n        System.out.println(\"Executed onCreate1\"); //will not execute\n    }\n}\n\n@Entity\n@Table(name = \"feedback\")\npublic class Feedback extends SiteMessage {\n    @PrePersist\n    public void onCreate(){\n        System.out.println(\"Executed onCreate2\"); //will execute\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":290821,"reputation":742,"user_id":592593,"display_name":"Dante"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592833206,"creation_date":1592833206,"answer_id":62515807,"question_id":26060940,"body_markdown":"You can use the Annotation &quot;@MappedSuperClass&quot; on the Base entity (Parent).\r\nAs I can show:\r\n\r\n    @MappedSuperclass\r\n    public class Base implements Serializable {\r\n    \r\n        @Id\r\n        private UUID id;\r\n    \r\n        @PastOrPresent\r\n        private OffsetDateTime createdAt;\r\n    \r\n        @PastOrPresent\r\n        private OffsetDateTime updatedAt;\r\n    \r\n        //get/set here\r\n    \r\n        @PrePersist\r\n        public void prePersist() {\r\n            createdAt = OffsetDateTime.now();\r\n            updatedAt = OffsetDateTime.now();\r\n        }\r\n    \r\n    }\r\n\r\nInner class:\r\n\r\n    @Entity\r\n    @HasExtendedValidator\r\n    public class Settings extends Base implements Serializable  {\r\n    ..\r\n    }\r\n\r\nWork like a charm!","title":"Jpa prepersist callback not called on parent","body":"<p>You can use the Annotation &quot;@MappedSuperClass&quot; on the Base entity (Parent).\nAs I can show:</p>\n<pre><code>@MappedSuperclass\npublic class Base implements Serializable {\n\n    @Id\n    private UUID id;\n\n    @PastOrPresent\n    private OffsetDateTime createdAt;\n\n    @PastOrPresent\n    private OffsetDateTime updatedAt;\n\n    //get/set here\n\n    @PrePersist\n    public void prePersist() {\n        createdAt = OffsetDateTime.now();\n        updatedAt = OffsetDateTime.now();\n    }\n\n}\n</code></pre>\n<p>Inner class:</p>\n<pre><code>@Entity\n@HasExtendedValidator\npublic class Settings extends Base implements Serializable  {\n..\n}\n</code></pre>\n<p>Work like a charm!</p>\n"},{"tags":[],"owner":{"account_id":211037,"reputation":1635,"user_id":462982,"accept_rate":62,"display_name":"user462982"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681569237,"creation_date":1681569237,"answer_id":76022884,"question_id":26060940,"body_markdown":"According to the answers of @Alan Hay and @Dante, it seems to work if the parent class is annotated with @MappedSuperclass. I did not verify this by myself, however.\r\n\r\nIn my case, I could not use @MappedSuperclass as I still wanted to use the superclass as an @Entity and the @Entity annotation does not work together with @MappedSuperclass.\r\n\r\nAt least with the current Hibernate Version, superclasses of the parent class without @MappedSuperclass do not get registered for callbacks in Hibernate&#39;s internal event callbackRegistry so that&#39;s why it is not working in this case.\r\nThere is another option that works:\r\n\r\nRegister @EntityListeners on the parent @Entity class and it will get triggered for all subclasses too. E.g:\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    @EntityListeners(MyListener.class)\r\n    public class SiteMessage implements Identifiable{\r\n       \r\n    }\r\n    \r\n    @Entity\r\n    @Table(name = &quot;feedback&quot;)\r\n    public class Feedback extends SiteMessage {\r\n       \r\n    }\r\n\r\n    class MyListener{\r\n    \r\n        @PrePersist\r\n        public void onCreate(SiteMessage o) {\r\n            System.out.println(&quot;Executed onCreate&quot;)\r\n        }\r\n    }\r\n\r\nIf you can&#39;t make MyListener generic enough to support all your subclasses, create specific Listeners (e.g. MyListener2 ) for those too and register them on the subclasses. Listeners are additive unless sublasses are annotated with @ExcludeSuperclassListeners\r\n","title":"Jpa prepersist callback not called on parent","body":"<p>According to the answers of @Alan Hay and @Dante, it seems to work if the parent class is annotated with @MappedSuperclass. I did not verify this by myself, however.</p>\n<p>In my case, I could not use @MappedSuperclass as I still wanted to use the superclass as an @Entity and the @Entity annotation does not work together with @MappedSuperclass.</p>\n<p>At least with the current Hibernate Version, superclasses of the parent class without @MappedSuperclass do not get registered for callbacks in Hibernate's internal event callbackRegistry so that's why it is not working in this case.\nThere is another option that works:</p>\n<p>Register @EntityListeners on the parent @Entity class and it will get triggered for all subclasses too. E.g:</p>\n<pre><code>@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\n@EntityListeners(MyListener.class)\npublic class SiteMessage implements Identifiable{\n   \n}\n\n@Entity\n@Table(name = &quot;feedback&quot;)\npublic class Feedback extends SiteMessage {\n   \n}\n\nclass MyListener{\n\n    @PrePersist\n    public void onCreate(SiteMessage o) {\n        System.out.println(&quot;Executed onCreate&quot;)\n    }\n}\n</code></pre>\n<p>If you can't make MyListener generic enough to support all your subclasses, create specific Listeners (e.g. MyListener2 ) for those too and register them on the subclasses. Listeners are additive unless sublasses are annotated with @ExcludeSuperclassListeners</p>\n"}],"owner":{"account_id":2277593,"reputation":484,"user_id":2003481,"accept_rate":69,"display_name":"kraken"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5908,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1681569237,"creation_date":1411738586,"question_id":26060940,"body_markdown":"My code\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    public class SiteMessage implements Identifiable{\r\n        @PrePersist\r\n        public void onCreate1(){\r\n            System.out.println(&quot;Executed onCreate1&quot;);\r\n        }\r\n    }\r\n    \r\n    @Entity\r\n    @Table(name = &quot;feedback&quot;)\r\n    public class Feedback extends SiteMessage {\r\n        @PrePersist\r\n        public void onCreate2(){\r\n            System.out.println(&quot;Executed onCreate2&quot;);\r\n        }\r\n    }\r\n\r\nWhen i save Feedback entity i expect that i will see: Executed onCreate1 and Executed onCreate2, but i&#39;ve seen only Executed onCreate2\r\n\r\nI use eclipselink v2.5.2","title":"Jpa prepersist callback not called on parent","body":"<p>My code</p>\n\n<pre><code>@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\npublic class SiteMessage implements Identifiable{\n    @PrePersist\n    public void onCreate1(){\n        System.out.println(\"Executed onCreate1\");\n    }\n}\n\n@Entity\n@Table(name = \"feedback\")\npublic class Feedback extends SiteMessage {\n    @PrePersist\n    public void onCreate2(){\n        System.out.println(\"Executed onCreate2\");\n    }\n}\n</code></pre>\n\n<p>When i save Feedback entity i expect that i will see: Executed onCreate1 and Executed onCreate2, but i've seen only Executed onCreate2</p>\n\n<p>I use eclipselink v2.5.2</p>\n"},{"tags":["javascript","java","jsp","servlets","fetch"],"answers":[{"comments":[{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1693937287,"post_id":76022744,"comment_id":135824601,"body_markdown":"If this answer helped you then you should mark it as accepted. The checkbox I&#39;d on the left of the answer. Also it&#39;s worth to vote up the answer that helped you the same to help others to choose the correct answer.","body":"If this answer helped you then you should mark it as accepted. The checkbox I&#39;d on the left of the answer. Also it&#39;s worth to vote up the answer that helped you the same to help others to choose the correct answer."}],"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681568352,"creation_date":1681567643,"answer_id":76022744,"question_id":76020374,"body_markdown":"Since you are using [Fetch API][1], the first parameter it uses an [URL][2] object which you have to build yourself.\r\n\r\n```\r\nlet base_url = &#39;http://localhost:8080/projectname&#39;;\r\nfetch(base_url+&#39;/UserServlet&#39;, {\r\n        method: &#39;POST&#39;,\r\n        headers: {\r\n            &#39;Content-Type&#39;: &#39;application/json&#39;\r\n        },\r\n        body: registrationDataJSON\r\n    }\r\n```\r\n\r\nIf you don&#39;t want to hardcode the base URL, then you can get it either from server or from the [`Window`][3] object property. The `window.location.origin` may be used for the base URL.\r\n\r\n  [1]: https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\r\n  [2]: https://developer.mozilla.org/en-US/docs/Web/API/URL\r\n  [3]: https://developer.mozilla.org/en-US/docs/Web/API/Window","title":"Why is my javascript file not recognizing servlet like jsp does?","body":"<p>Since you are using <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\" rel=\"nofollow noreferrer\">Fetch API</a>, the first parameter it uses an <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/URL\" rel=\"nofollow noreferrer\">URL</a> object which you have to build yourself.</p>\n<pre><code>let base_url = 'http://localhost:8080/projectname';\nfetch(base_url+'/UserServlet', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: registrationDataJSON\n    }\n</code></pre>\n<p>If you don't want to hardcode the base URL, then you can get it either from server or from the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window\" rel=\"nofollow noreferrer\"><code>Window</code></a> object property. The <code>window.location.origin</code> may be used for the base URL.</p>\n"}],"owner":{"account_id":24524757,"reputation":11,"user_id":18437338,"display_name":"ctrlCat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681568807,"creation_date":1681533591,"question_id":76020374,"body_markdown":"I have a servlet named like \r\n\r\n`@WebServlet(&quot;/UserServlet&quot;)`, and when I use `action=&quot;UserServlet&quot;` on JSP, it recognizes it, but the JavaScript file does not.\r\nFile Path Info:\r\nServlet is located at `src/main/java/com.name.controller/UserServlet`.\r\nJSPs located at `webapp/view/`\r\nJavaScript file lcoated at `webapp/js/`\r\n\r\nWhen I do this:\r\n\r\n```\r\n    fetch(&#39;/UserServlet&#39;, {\r\n        method: &#39;POST&#39;,\r\n        headers: {\r\n            &#39;Content-Type&#39;: &#39;application/json&#39;\r\n        },\r\n        body: registrationDataJSON\r\n    })\r\n        .then(response =&gt; response.json())\r\n        .then(data =&gt; {\r\n            // handle success or error response\r\n            if (data.status === &#39;success&#39;) {\r\n                // redirect to home page or display success message\r\n            } else {\r\n                // display error message\r\n                alert(data.message);\r\n            }\r\n        })\r\n        .catch(error =&gt; {\r\n            // handle network or server error\r\n            console.error(error);\r\n        });\r\n    return true;\r\n};\r\n```\r\n\r\nThis redirects to `localhost:8080/UserServlet` instead of `localhost:8080/ProjectName/UserServlet`.\r\n\r\nBut when I mention full path to servlet like this:\r\n\r\n```\r\nfetch(&#39;http://localhost:8080/projectname/UserServlet&#39;, {\r\n        method: &#39;POST&#39;,\r\n        headers: {\r\n            &#39;Content-Type&#39;: &#39;application/json&#39;\r\n        },\r\n        body: registrationDataJSON\r\n    }\r\n```\r\n\r\nThen it works, Is there no way I can make it work simply using the Servlet Name and not full path?\r\n","title":"Why is my javascript file not recognizing servlet like jsp does?","body":"<p>I have a servlet named like</p>\n<p><code>@WebServlet(&quot;/UserServlet&quot;)</code>, and when I use <code>action=&quot;UserServlet&quot;</code> on JSP, it recognizes it, but the JavaScript file does not.\nFile Path Info:\nServlet is located at <code>src/main/java/com.name.controller/UserServlet</code>.\nJSPs located at <code>webapp/view/</code>\nJavaScript file lcoated at <code>webapp/js/</code></p>\n<p>When I do this:</p>\n<pre><code>    fetch('/UserServlet', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: registrationDataJSON\n    })\n        .then(response =&gt; response.json())\n        .then(data =&gt; {\n            // handle success or error response\n            if (data.status === 'success') {\n                // redirect to home page or display success message\n            } else {\n                // display error message\n                alert(data.message);\n            }\n        })\n        .catch(error =&gt; {\n            // handle network or server error\n            console.error(error);\n        });\n    return true;\n};\n</code></pre>\n<p>This redirects to <code>localhost:8080/UserServlet</code> instead of <code>localhost:8080/ProjectName/UserServlet</code>.</p>\n<p>But when I mention full path to servlet like this:</p>\n<pre><code>fetch('http://localhost:8080/projectname/UserServlet', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: registrationDataJSON\n    }\n</code></pre>\n<p>Then it works, Is there no way I can make it work simply using the Servlet Name and not full path?</p>\n"},{"tags":["java","node.js","angular","spring-boot","angular-cli"],"comments":[{"owner":{"account_id":8723294,"reputation":16216,"user_id":6525724,"display_name":"Nick"},"score":0,"creation_date":1670360818,"post_id":74709018,"comment_id":131858058,"body_markdown":"Not sure you can. I don&#39;t think they&#39;d add that warning for giggles, they probably truly require a newer version of node.","body":"Not sure you can. I don&#39;t think they&#39;d add that warning for giggles, they probably truly require a newer version of node."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1670360993,"post_id":74709018,"comment_id":131858128,"body_markdown":"Note that even *security* support ended for Node.js v8 at the end of December 2019. Would you *really* want to use that? (And v14 is out of active support and only has 4 months and 3 weeks left of security support...)","body":"Note that even <i>security</i> support ended for Node.js v8 at the end of December 2019. Would you <i>really</i> want to use that? (And v14 is out of active support and only has 4 months and 3 weeks left of security support...)"},{"owner":{"account_id":2019434,"reputation":1508,"user_id":1805974,"accept_rate":73,"display_name":"Henrik B&#248;gelund Lavstsen"},"score":0,"creation_date":1670378732,"post_id":74709018,"comment_id":131861658,"body_markdown":"You probably have a bunch of old packages that needs to be updated as well. Hopefully you dont have too many abandoned old packages. But if you want to run multiple versions of Node to try stuff out. I would suggest getting nvm, then you can switch between versions with commandline.","body":"You probably have a bunch of old packages that needs to be updated as well. Hopefully you dont have too many abandoned old packages. But if you want to run multiple versions of Node to try stuff out. I would suggest getting nvm, then you can switch between versions with commandline."}],"answers":[{"tags":[],"owner":{"account_id":19856060,"reputation":23,"user_id":15786519,"display_name":"CamiCode"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672162076,"creation_date":1672158910,"answer_id":74931847,"question_id":74709018,"body_markdown":"Just try to run the command `npm install -g` on your angular project, that may could help","title":"How we can use node js with old version","body":"<p>Just try to run the command <code>npm install -g</code> on your angular project, that may could help</p>\n"},{"comments":[{"owner":{"account_id":7788702,"reputation":836,"user_id":5892518,"display_name":"Harsh"},"score":1,"creation_date":1681880752,"post_id":76022840,"comment_id":134126311,"body_markdown":"Edit the command and folder names for better visibility","body":"Edit the command and folder names for better visibility"}],"tags":[],"owner":{"account_id":6354433,"reputation":43,"user_id":4932292,"display_name":"Dang Anh"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681568782,"creation_date":1681568782,"answer_id":76022840,"question_id":74709018,"body_markdown":"The problem occurred because of node-sass was still in old version. So I decided to run the command below \r\n\r\nnpm uninstall -g node-sass &amp;&amp; npm install -g node-sass\r\n\r\nAnd Check node modules in node-sass and only hold 3 folders\r\n\r\nansi-styles\r\nchalk\r\nsupports-color\r\n\r\nAfter deployment, the system is running fine :)","title":"How we can use node js with old version","body":"<p>The problem occurred because of node-sass was still in old version. So I decided to run the command below</p>\n<p>npm uninstall -g node-sass &amp;&amp; npm install -g node-sass</p>\n<p>And Check node modules in node-sass and only hold 3 folders</p>\n<p>ansi-styles\nchalk\nsupports-color</p>\n<p>After deployment, the system is running fine :)</p>\n"}],"owner":{"account_id":6354433,"reputation":43,"user_id":4932292,"display_name":"Dang Anh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":233,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681568782,"creation_date":1670360642,"question_id":74709018,"body_markdown":"I already updated nodejs to v14.20.1 that work with Angular CLI but it is not complied with my project (lot of issues).\r\n\r\nSo I decide to use v8.10.0 and how we can keep that version and execute Angular CLI without the note below.\r\n\r\n&quot;Node.js version v8.10.0 detected.\r\nThe Angular CLI requires a minimum Node.js version of either v14.20, v16.13 or v18.10.&quot;\r\n\r\nThank you","title":"How we can use node js with old version","body":"<p>I already updated nodejs to v14.20.1 that work with Angular CLI but it is not complied with my project (lot of issues).</p>\n<p>So I decide to use v8.10.0 and how we can keep that version and execute Angular CLI without the note below.</p>\n<p>&quot;Node.js version v8.10.0 detected.\nThe Angular CLI requires a minimum Node.js version of either v14.20, v16.13 or v18.10.&quot;</p>\n<p>Thank you</p>\n"},{"tags":["java","android","firebase-storage","uri","android-glide"],"owner":{"account_id":28256757,"reputation":11,"user_id":21602108,"display_name":"Yoav Hofstein"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681568399,"creation_date":1681544834,"question_id":76020980,"body_markdown":"i&#39;m trying to get all the urls of a specific folder to an arraylist of urls, and then update them all into a grid view.\r\n\r\n\r\nthis is the code i tried\r\n\r\n```\r\nFirebaseStorage storage = FirebaseStorage.getInstance();\r\n\r\n    StorageReference storageRef = storage.getReference();\r\n    StorageReference storageReference=storage.getReference().child(groupCode);\r\n    \r\n\r\n    storageReference.listAll().addOnSuccessListener(new OnSuccessListener&lt;ListResult&gt;() {\r\n       @Override\r\n       public void onSuccess(ListResult listResult) {\r\n           for(StorageReference fileRef:listResult.getItems()){\r\n               fileRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\r\n                   @Override\r\n                   public void onSuccess(Uri uri) {\r\n                       galleryArrayList.add(new PictureClass(uri));\r\n                       Log.d(&quot;item&quot;, uri.toString());\r\n                   }\r\n               }).addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\r\n                   @Override\r\n                   public void onSuccess(Uri uri) {\r\n                       adaptor=new ImageAdaptor(requireContext(),galleryArrayList);\r\n\r\n                   }\r\n               });\r\n           }\r\n       }\r\n   });\r\n   gridView.setAdapter(adaptor);\r\n}\r\n```\r\n\r\nhowever it has collapsed\r\n\r\n\r\ni also know there are libaries such as glide and picasso, however i dont know how to work with them and i dont want to change ,my image adaptor. what can i do?","title":"getting all the url&#39;s to an arraylist from firebase storage","body":"<p>i'm trying to get all the urls of a specific folder to an arraylist of urls, and then update them all into a grid view.</p>\n<p>this is the code i tried</p>\n<pre><code>FirebaseStorage storage = FirebaseStorage.getInstance();\n\n    StorageReference storageRef = storage.getReference();\n    StorageReference storageReference=storage.getReference().child(groupCode);\n    \n\n    storageReference.listAll().addOnSuccessListener(new OnSuccessListener&lt;ListResult&gt;() {\n       @Override\n       public void onSuccess(ListResult listResult) {\n           for(StorageReference fileRef:listResult.getItems()){\n               fileRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\n                   @Override\n                   public void onSuccess(Uri uri) {\n                       galleryArrayList.add(new PictureClass(uri));\n                       Log.d(&quot;item&quot;, uri.toString());\n                   }\n               }).addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\n                   @Override\n                   public void onSuccess(Uri uri) {\n                       adaptor=new ImageAdaptor(requireContext(),galleryArrayList);\n\n                   }\n               });\n           }\n       }\n   });\n   gridView.setAdapter(adaptor);\n}\n</code></pre>\n<p>however it has collapsed</p>\n<p>i also know there are libaries such as glide and picasso, however i dont know how to work with them and i dont want to change ,my image adaptor. what can i do?</p>\n"},{"tags":["java","android","firebase","firebase-cloud-messaging","android-notifications"],"owner":{"account_id":19321582,"reputation":1,"user_id":14125162,"display_name":"simran inamdar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681568322,"creation_date":1681552049,"question_id":76021485,"body_markdown":"When we generate notification in our app using firebase, android 11 notification content has different data and android 13 notification content different data.\r\n\r\n    public void onMessageReceived(RemoteMessage remoteMessage) {\r\n\t  Map&lt;String, String&gt; body = Collections.emptyMap();\r\n\r\n        // Check if message contains a data payload.\r\n        if (remoteMessage.getData().size() &gt; 0) {\r\n            body = remoteMessage.getData();\r\n            Log.d(TAG, &quot;Message data payload: &quot; + body);\r\n            //messageBody = body.toString();\r\n        }\r\n\r\n      sendNotification(body);\r\n    }\r\n\r\n    \r\n    private void sendNotification(Map&lt;String, String&gt; messageBody) {\r\n        Intent intent = null;\r\n\r\n        notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O){\r\n            createChannel(notificationManager);\r\n        }\r\n\r\n\r\n       String notificationType = messageBody.get(&quot;notificationType&quot;);\r\n        String typeOfPatient = messageBody.get(&quot;&quot;);\r\n\r\n        if ((notificationType != null ) &amp;&amp; (notificationType.equalsIgnoreCase(&quot;chatmessage&quot;))){\r\n            intent = new Intent(this, SplashScreenActivity.class);\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n            intent.putExtra(&quot;notify&quot;, true);\r\n        }\r\n\r\n\r\n        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0  /*Request code*/ , intent,\r\n                PendingIntent.FLAG_IMMUTABLE);\r\n\r\n        String title = &quot;Patient Name &quot; + messageBody.get(&quot;name&quot;);\r\n        String message;\r\n        /*if (messageBody.get(&quot;notificationType&quot;).equalsIgnoreCase(&quot;episode&quot;))\r\n            message = messageBody.get(&quot;message&quot;);\r\n        else\r\n            message = &quot;Lab Date is &quot; + messageBody.get(&quot;labDate&quot;);*/\r\n\r\n\r\n         NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this,getResources().getString(R.string.notification_channel))\r\n                .setSmallIcon(R.mipmap.ic_doctor_logo)\r\n                .setContentTitle(title)\r\n                .setContentInfo(&quot;message&quot;)\r\n                .setAutoCancel(true)\r\n                .setSound(defaultSoundUri)\r\n                .setContentIntent(pendingIntent);\r\n\r\n        NotificationCompat.BigTextStyle bigTextStyle = new NotificationCompat.BigTextStyle();\r\n        bigTextStyle.setBigContentTitle(title);\r\n        bigTextStyle.bigText(&quot;message&quot;);\r\n\r\n        notificationBuilder.setStyle(bigTextStyle);\r\n\r\n        NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\r\n        notificationManager.notify(0, notificationBuilder.build());\r\n\r\n\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.O)\r\n    private void createChannel(NotificationManager notificationManager) {\r\n        String name = getResources().getString(R.string.notification_channel);\r\n        String description = getResources().getString(R.string.description);\r\n        int importance = NotificationManager.IMPORTANCE_HIGH;\r\n\r\n        NotificationChannel mChannel = new NotificationChannel(name, name, importance);\r\n        mChannel.setDescription(description);\r\n        mChannel.enableLights(true);\r\n        mChannel.setLightColor(Color.BLUE);\r\n        notificationManager.createNotificationChannel(mChannel);\r\n    }\r\n\r\n![enter image description here](https://i.stack.imgur.com/bvmBk.jpg)\r\n\r\n![enter image description here](https://i.stack.imgur.com/hkcYz.jpg)\r\n\r\n\r\n\r\n\r\n","title":"when generating notification on android 11 then notification content format is different and on android 13 notification content format is different","body":"<p>When we generate notification in our app using firebase, android 11 notification content has different data and android 13 notification content different data.</p>\n<pre><code>public void onMessageReceived(RemoteMessage remoteMessage) {\n  Map&lt;String, String&gt; body = Collections.emptyMap();\n\n    // Check if message contains a data payload.\n    if (remoteMessage.getData().size() &gt; 0) {\n        body = remoteMessage.getData();\n        Log.d(TAG, &quot;Message data payload: &quot; + body);\n        //messageBody = body.toString();\n    }\n\n  sendNotification(body);\n}\n\n\nprivate void sendNotification(Map&lt;String, String&gt; messageBody) {\n    Intent intent = null;\n\n    notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O){\n        createChannel(notificationManager);\n    }\n\n\n   String notificationType = messageBody.get(&quot;notificationType&quot;);\n    String typeOfPatient = messageBody.get(&quot;&quot;);\n\n    if ((notificationType != null ) &amp;&amp; (notificationType.equalsIgnoreCase(&quot;chatmessage&quot;))){\n        intent = new Intent(this, SplashScreenActivity.class);\n        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n        intent.putExtra(&quot;notify&quot;, true);\n    }\n\n\n    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0  /*Request code*/ , intent,\n            PendingIntent.FLAG_IMMUTABLE);\n\n    String title = &quot;Patient Name &quot; + messageBody.get(&quot;name&quot;);\n    String message;\n    /*if (messageBody.get(&quot;notificationType&quot;).equalsIgnoreCase(&quot;episode&quot;))\n        message = messageBody.get(&quot;message&quot;);\n    else\n        message = &quot;Lab Date is &quot; + messageBody.get(&quot;labDate&quot;);*/\n\n\n     NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this,getResources().getString(R.string.notification_channel))\n            .setSmallIcon(R.mipmap.ic_doctor_logo)\n            .setContentTitle(title)\n            .setContentInfo(&quot;message&quot;)\n            .setAutoCancel(true)\n            .setSound(defaultSoundUri)\n            .setContentIntent(pendingIntent);\n\n    NotificationCompat.BigTextStyle bigTextStyle = new NotificationCompat.BigTextStyle();\n    bigTextStyle.setBigContentTitle(title);\n    bigTextStyle.bigText(&quot;message&quot;);\n\n    notificationBuilder.setStyle(bigTextStyle);\n\n    NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n    notificationManager.notify(0, notificationBuilder.build());\n\n\n}\n\n@RequiresApi(api = Build.VERSION_CODES.O)\nprivate void createChannel(NotificationManager notificationManager) {\n    String name = getResources().getString(R.string.notification_channel);\n    String description = getResources().getString(R.string.description);\n    int importance = NotificationManager.IMPORTANCE_HIGH;\n\n    NotificationChannel mChannel = new NotificationChannel(name, name, importance);\n    mChannel.setDescription(description);\n    mChannel.enableLights(true);\n    mChannel.setLightColor(Color.BLUE);\n    notificationManager.createNotificationChannel(mChannel);\n}\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/bvmBk.jpg\" alt=\"enter image description here\" /></p>\n<p><img src=\"https://i.stack.imgur.com/hkcYz.jpg\" alt=\"enter image description here\" /></p>\n"},{"tags":["java","crc","iso","transmission"],"answers":[{"tags":[],"owner":{"account_id":1136690,"reputation":104411,"user_id":1180620,"accept_rate":83,"display_name":"Mark Adler"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681495638,"creation_date":1681495638,"answer_id":76017859,"question_id":76013338,"body_markdown":"There are rules in the document about what the CRC (they call it a BCS) is calculated over, and about getting rid of DLE bytes before doing that. As a result, the CRC for the example message starts after the leading `1002` and goes up to the `03` before the CRC, _but_ the DLE (`10`) before the `03` is deleted.\r\n\r\nSo the CRC is calculated over:\r\n\r\n```\r\n220017e11201040c9ebce8003201028149d3d904808d1403\r\n```\r\n\r\nThen the forward CRC with polynomial `0x1021`, zero initial value, and zero final exclusive-or gives the result `0x939c`. You may find that particular 16-bit CRC referred to as [CRC-16/XMODEM][1]. The calculation is:\r\n\r\n```java\r\n    static private int crc16xmodem(byte[] message) {\r\n    \tint crc = 0;\r\n        for (byte octet : message) {\r\n            crc ^= (int)octet &lt;&lt; 8;\r\n            for (int k = 0; k &lt; 8; k++)\r\n                crc = (crc &amp; 0x8000) != 0 ? (crc &lt;&lt; 1) ^ 0x1021 : crc &lt;&lt; 1;\r\n        }\r\n        return crc &amp; 0xffff;\r\n    }\r\n```\r\n\r\nRead the DLE rules. A case that doesn&#39;t occur in your example is: DLE DLE in the message becomes DLE, since that first DLE is an escape so that the second DLE can be transmitted as part of the message.\r\n\r\n  [1]: https://reveng.sourceforge.io/crc-catalogue/16.htm#crc.cat.crc-16-xmodem","title":"Implementing CRC in Java for a hex string","body":"<p>There are rules in the document about what the CRC (they call it a BCS) is calculated over, and about getting rid of DLE bytes before doing that. As a result, the CRC for the example message starts after the leading <code>1002</code> and goes up to the <code>03</code> before the CRC, <em>but</em> the DLE (<code>10</code>) before the <code>03</code> is deleted.</p>\n<p>So the CRC is calculated over:</p>\n<pre><code>220017e11201040c9ebce8003201028149d3d904808d1403\n</code></pre>\n<p>Then the forward CRC with polynomial <code>0x1021</code>, zero initial value, and zero final exclusive-or gives the result <code>0x939c</code>. You may find that particular 16-bit CRC referred to as <a href=\"https://reveng.sourceforge.io/crc-catalogue/16.htm#crc.cat.crc-16-xmodem\" rel=\"nofollow noreferrer\">CRC-16/XMODEM</a>. The calculation is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static private int crc16xmodem(byte[] message) {\n        int crc = 0;\n        for (byte octet : message) {\n            crc ^= (int)octet &lt;&lt; 8;\n            for (int k = 0; k &lt; 8; k++)\n                crc = (crc &amp; 0x8000) != 0 ? (crc &lt;&lt; 1) ^ 0x1021 : crc &lt;&lt; 1;\n        }\n        return crc &amp; 0xffff;\n    }\n</code></pre>\n<p>Read the DLE rules. A case that doesn't occur in your example is: DLE DLE in the message becomes DLE, since that first DLE is an escape so that the second DLE can be transmitted as part of the message.</p>\n"}],"owner":{"account_id":23385689,"reputation":3,"user_id":17451097,"display_name":"AliasDan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76017859,"answer_count":1,"score":0,"last_activity_date":1681568124,"creation_date":1681463021,"question_id":76013338,"body_markdown":"I have been tasked with implementing a CRC using Java. I wasn&#39;t given a specs to follow, but I am following this PDF:\r\n\r\nhttps://cdn.standards.iteh.ai/samples/6904/2c02d323a7ae41838de8b8b806cf3725/ISO-2111-1985.pdf\r\n\r\nI was given two sample strings to compare:\r\n\r\nByte Stream (Hex): `220017e11201040c9ebce8003201028149d3d904808d14`\r\n\r\nByte Stream with ISO2111 (Hex): `1002220017e11201040c9ebce8003201028149d3d904808d141003939c`\r\n\r\nThe first string is the raw data that I have received and the second string is how it should look after ISO2111 has been applied (according to the person that made the request).\r\n\r\nAdding the DLEs (1002 at start, 1003 at end) was trivial, but I cannot reproduce the checksum at the end of the transmission (939c).\r\n\r\nI first transform the string into an array of bytes and then pass it in to the below function.\r\n\r\nThe java code I was using to calculate the CRC16 is:\r\n\r\n\r\n```\r\npublic static String calculateCRC16(final byte[] bytes) {\r\n        int CRC = 0xFFFF; // initial CRC value : 0xFFFF -&gt; max value of 65535\r\n        int POLYNOMIAL = 0x1021; // 0x1021 = x^16 + x^12 + x^5 + 1\r\n        for (byte b : bytes) {\r\n            for (int i = 0; i &lt; 8; i++) {\r\n                boolean bit = ((b &gt;&gt; (7 - i) &amp; 1) == 1);\r\n                boolean c15 = ((CRC &gt;&gt; 15 &amp; 1) == 1);\r\n                CRC &lt;&lt;= 1;\r\n                if (c15 ^ bit) {\r\n                    CRC ^= POLYNOMIAL;\r\n                }\r\n            }\r\n        }\r\n\r\n        CRC &amp;= 0xffff;\r\n        return Integer.toHexString(CRC);\r\n    }\r\n```\r\n\r\n\r\nThe problem is that, for the given string, it outputs d806, not 939c. The value d806 seems to be correct according to some online CRC calculators. Am I missing something? Is the data they sent just made up? Have I misinterpreted section 8 in the PDF? This is what it says:\r\n\r\n&gt; 8 Block check sequence (BCS) \r\n&gt; The BCS shall conform to the following rules : \r\n&gt; 8.1 It shall be a 16 bit sequence (two octets). \r\n&gt; \r\n&gt; 8.2 The sequence of information bits contained in the data block to be protected may be represented by a polynomial L(x)  (GF 2): The BCS is the remainder after the division of the polynomial Lfxi IGF2), multiplied by x&lt;sup&gt;16&lt;/sup&gt;, by the generating polynomial p(x) = x&lt;sup&gt;16&lt;/sup&gt; + x&lt;sup&gt;12&lt;/sup&gt; + x&lt;sup&gt;5&lt;/sup&gt; + 1 (GF2). GF2 means that these polynomials have their coefficients in a two element Galois field.\r\n&gt; \r\n&gt; 8.3 The BCS shall be transmitted to the line commencing with the coefficient of the highest term.\r\n&gt; \r\n&gt; 8.4 At the receiver, the serial incoming protected data and the BCS when divided by the generating polynomial results in a zero remainder in the absence of transmission errors.&quot;\r\n\r\nThere is no other info about this anywhere else online as far as I can see.\r\n","title":"Implementing CRC in Java for a hex string","body":"<p>I have been tasked with implementing a CRC using Java. I wasn't given a specs to follow, but I am following this PDF:</p>\n<p><a href=\"https://cdn.standards.iteh.ai/samples/6904/2c02d323a7ae41838de8b8b806cf3725/ISO-2111-1985.pdf\" rel=\"nofollow noreferrer\">https://cdn.standards.iteh.ai/samples/6904/2c02d323a7ae41838de8b8b806cf3725/ISO-2111-1985.pdf</a></p>\n<p>I was given two sample strings to compare:</p>\n<p>Byte Stream (Hex): <code>220017e11201040c9ebce8003201028149d3d904808d14</code></p>\n<p>Byte Stream with ISO2111 (Hex): <code>1002220017e11201040c9ebce8003201028149d3d904808d141003939c</code></p>\n<p>The first string is the raw data that I have received and the second string is how it should look after ISO2111 has been applied (according to the person that made the request).</p>\n<p>Adding the DLEs (1002 at start, 1003 at end) was trivial, but I cannot reproduce the checksum at the end of the transmission (939c).</p>\n<p>I first transform the string into an array of bytes and then pass it in to the below function.</p>\n<p>The java code I was using to calculate the CRC16 is:</p>\n<pre><code>public static String calculateCRC16(final byte[] bytes) {\n        int CRC = 0xFFFF; // initial CRC value : 0xFFFF -&gt; max value of 65535\n        int POLYNOMIAL = 0x1021; // 0x1021 = x^16 + x^12 + x^5 + 1\n        for (byte b : bytes) {\n            for (int i = 0; i &lt; 8; i++) {\n                boolean bit = ((b &gt;&gt; (7 - i) &amp; 1) == 1);\n                boolean c15 = ((CRC &gt;&gt; 15 &amp; 1) == 1);\n                CRC &lt;&lt;= 1;\n                if (c15 ^ bit) {\n                    CRC ^= POLYNOMIAL;\n                }\n            }\n        }\n\n        CRC &amp;= 0xffff;\n        return Integer.toHexString(CRC);\n    }\n</code></pre>\n<p>The problem is that, for the given string, it outputs d806, not 939c. The value d806 seems to be correct according to some online CRC calculators. Am I missing something? Is the data they sent just made up? Have I misinterpreted section 8 in the PDF? This is what it says:</p>\n<blockquote>\n<p>8 Block check sequence (BCS)\nThe BCS shall conform to the following rules :\n8.1 It shall be a 16 bit sequence (two octets).</p>\n<p>8.2 The sequence of information bits contained in the data block to be protected may be represented by a polynomial L(x)  (GF 2): The BCS is the remainder after the division of the polynomial Lfxi IGF2), multiplied by x<sup>16</sup>, by the generating polynomial p(x) = x<sup>16</sup> + x<sup>12</sup> + x<sup>5</sup> + 1 (GF2). GF2 means that these polynomials have their coefficients in a two element Galois field.</p>\n<p>8.3 The BCS shall be transmitted to the line commencing with the coefficient of the highest term.</p>\n<p>8.4 At the receiver, the serial incoming protected data and the BCS when divided by the generating polynomial results in a zero remainder in the absence of transmission errors.&quot;</p>\n</blockquote>\n<p>There is no other info about this anywhere else online as far as I can see.</p>\n"},{"tags":["java","android","firebase","google-cloud-firestore","firebase-security"],"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1681634003,"post_id":76022649,"comment_id":134085452,"body_markdown":"Where is this error message coming from? As inside onFailure I only see &quot;Error adding user&quot;.","body":"Where is this error message coming from? As inside onFailure I only see &quot;Error adding user&quot;."},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1681634022,"post_id":76022649,"comment_id":134085457,"body_markdown":"Besides that, I think that this [resource](https://medium.com/firebase-tips-tricks/how-to-fix-firestore-error-permission-denied-missing-or-insufficient-permissions-777d591f404) will help. If you understand Kotlin, I think that this [resource](https://medium.com/firebase-developers/how-to-authenticate-to-firebase-using-email-and-password-in-jetpack-compose-bd70ca56ea91) will help. Here is the corresponding [repo](https://github.com/alexmamo/FirebaseSignInWithEmailAndPassword).","body":"Besides that, I think that this <a href=\"https://medium.com/firebase-tips-tricks/how-to-fix-firestore-error-permission-denied-missing-or-insufficient-permissions-777d591f404\" rel=\"nofollow noreferrer\">resource</a> will help. If you understand Kotlin, I think that this <a href=\"https://medium.com/firebase-developers/how-to-authenticate-to-firebase-using-email-and-password-in-jetpack-compose-bd70ca56ea91\" rel=\"nofollow noreferrer\">resource</a> will help. Here is the corresponding <a href=\"https://github.com/alexmamo/FirebaseSignInWithEmailAndPassword\" rel=\"nofollow noreferrer\">repo</a>."}],"owner":{"account_id":28313514,"reputation":11,"user_id":21650426,"display_name":"Casian Eugen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681567530,"creation_date":1681566602,"question_id":76022649,"body_markdown":"I want to register a new user. The user data consists of a password and a password hint. I want to save the hint in the Firestore document, but any rule I write in the Firestore gives an error:\r\n \r\n&gt; W/Firestore: (24.4.5) [WriteStream]: (4e2f22c) Stream closed with status: Status{code=PERMISSION_DENIED, description=Missing or insufficient permissions., cause=null}.\r\n\r\nThis is my code\r\n\r\n```\r\nFirebaseAuth mAuth = FirebaseAuth.getInstance();\r\nFirebaseFirestore db1 = FirebaseFirestore.getInstance();\r\n\r\nmAuth.createUserWithEmailAndPassword(email, password)\r\n    .addOnCompleteListener(this, task -&gt; {\r\n        if (task.isSuccessful()) {\r\n            FirebaseUser user = mAuth.getCurrentUser();\r\n            Map&lt;String, Object&gt; userMap = new HashMap&lt;&gt;();\r\n            userMap.put(&quot;password_hint&quot;, hint);\r\n            if (user != null) {\r\n                db1.collection(&quot;users&quot;).document(user.getUid())\r\n                        .set(userMap)\r\n                        .addOnSuccessListener(aVoid -&gt; {\r\n                            Intent intent = new Intent(RegisterActivityPass.this, BiometricActivity.class);\r\n                            startActivity(intent);\r\n                            finish();\r\n                        })\r\n                        .addOnFailureListener(e -&gt; Toast.makeText(this, &quot;Error adding user&quot;, Toast.LENGTH_SHORT).show());\r\n            } else {\r\n                Toast.makeText(this, &quot;User is not logged in&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    });\r\n```\r\nThis is my Firestore rule\r\n\r\n```\r\nrules_version = &#39;2&#39;;\r\nservice cloud.firestore {\r\n  match /databases/{database}/documents {\r\n  \r\n    // Only authenticated users can access the &#39;users&#39; collection\r\n    match /users/{userId} {\r\n      allow read, write: if request.auth != null &amp;&amp; request.auth.uid == userId;\r\n    }\r\n  }\r\n}\r\n\r\n```\r\n\r\n\r\nNo matter what rule i set, the error will appear in any case. ","title":"Firestore PERMISSION_DENIED error in all cases of rules","body":"<p>I want to register a new user. The user data consists of a password and a password hint. I want to save the hint in the Firestore document, but any rule I write in the Firestore gives an error:</p>\n<blockquote>\n<p>W/Firestore: (24.4.5) [WriteStream]: (4e2f22c) Stream closed with status: Status{code=PERMISSION_DENIED, description=Missing or insufficient permissions., cause=null}.</p>\n</blockquote>\n<p>This is my code</p>\n<pre><code>FirebaseAuth mAuth = FirebaseAuth.getInstance();\nFirebaseFirestore db1 = FirebaseFirestore.getInstance();\n\nmAuth.createUserWithEmailAndPassword(email, password)\n    .addOnCompleteListener(this, task -&gt; {\n        if (task.isSuccessful()) {\n            FirebaseUser user = mAuth.getCurrentUser();\n            Map&lt;String, Object&gt; userMap = new HashMap&lt;&gt;();\n            userMap.put(&quot;password_hint&quot;, hint);\n            if (user != null) {\n                db1.collection(&quot;users&quot;).document(user.getUid())\n                        .set(userMap)\n                        .addOnSuccessListener(aVoid -&gt; {\n                            Intent intent = new Intent(RegisterActivityPass.this, BiometricActivity.class);\n                            startActivity(intent);\n                            finish();\n                        })\n                        .addOnFailureListener(e -&gt; Toast.makeText(this, &quot;Error adding user&quot;, Toast.LENGTH_SHORT).show());\n            } else {\n                Toast.makeText(this, &quot;User is not logged in&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    });\n</code></pre>\n<p>This is my Firestore rule</p>\n<pre><code>rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n  \n    // Only authenticated users can access the 'users' collection\n    match /users/{userId} {\n      allow read, write: if request.auth != null &amp;&amp; request.auth.uid == userId;\n    }\n  }\n}\n\n</code></pre>\n<p>No matter what rule i set, the error will appear in any case.</p>\n"},{"tags":["java","mysql","hibernate"],"answers":[{"tags":[],"owner":{"account_id":8172423,"reputation":17307,"user_id":6152400,"display_name":"P.Salmon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1474009636,"creation_date":1474009636,"answer_id":39525628,"question_id":39525480,"body_markdown":"Nearly there try use sum (case when\r\n\r\n    select count(*) as allCount, \r\n    sum(case when t.status=&#39;Approved&#39; then 1 else 0 end) as approvedCount, \r\n    sum(case when t.status=&#39;Overdue&#39;  then 1 else 0 end) as overdueCount, \r\n    sum(case when t.status=&#39;Rejected&#39; then 1 else 0 end) as rejectedCount, \r\n    sum(case when t.status=&#39;Awaiting Approval&#39; then 1 else 0 end) as awaitingApprovalCount,\r\n    sum(case when t.status=&#39;Not Submitted&#39; then 1 else 0 end) as notSubmittedCount\r\n    from timesheet as t where t.empl_id=2;","title":"Query doesn&#39;t excecute for a select count of a particular column value","body":"<p>Nearly there try use sum (case when</p>\n\n<pre><code>select count(*) as allCount, \nsum(case when t.status='Approved' then 1 else 0 end) as approvedCount, \nsum(case when t.status='Overdue'  then 1 else 0 end) as overdueCount, \nsum(case when t.status='Rejected' then 1 else 0 end) as rejectedCount, \nsum(case when t.status='Awaiting Approval' then 1 else 0 end) as awaitingApprovalCount,\nsum(case when t.status='Not Submitted' then 1 else 0 end) as notSubmittedCount\nfrom timesheet as t where t.empl_id=2;\n</code></pre>\n"}],"owner":{"account_id":7596673,"reputation":27,"user_id":5762662,"accept_rate":0,"display_name":"Ramish Raja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681567473,"creation_date":1474009129,"question_id":39525480,"body_markdown":"    select \r\n        count(*) as allCount, \r\n        sum(t.status=&#39;Approved&#39;) as approvedCount, \r\n        sum(t.status=&#39;Overdue&#39;) as overdueCount, \r\n    \tsum(t.status=&#39;Rejected&#39;) as rejectedCount, \r\n        sum(t.status=&#39;Awaiting Approval&#39;) as awaitingApprovalCount,\r\n    \tsum(t.status=&#39;Not Submitted&#39;) as notSubmittedCount\r\n    from \r\n        timesheet as t \r\n    where \r\n        t.empl_id = 2;\r\n\r\nIn this query it shows a run time exception as \r\n\r\n&gt; org.hibernate.hql.internal.ast.querySyntax.Exception:expecting CLOSE ,found &quot;=&quot; nearline 1,sum(t.status=&quot;Approved&quot;)\r\n\r\n","title":"Query doesn&#39;t excecute for a select count of a particular column value","body":"<pre><code>select \n    count(*) as allCount, \n    sum(t.status='Approved') as approvedCount, \n    sum(t.status='Overdue') as overdueCount, \n    sum(t.status='Rejected') as rejectedCount, \n    sum(t.status='Awaiting Approval') as awaitingApprovalCount,\n    sum(t.status='Not Submitted') as notSubmittedCount\nfrom \n    timesheet as t \nwhere \n    t.empl_id = 2;\n</code></pre>\n<p>In this query it shows a run time exception as</p>\n<blockquote>\n<p>org.hibernate.hql.internal.ast.querySyntax.Exception:expecting CLOSE ,found &quot;=&quot; nearline 1,sum(t.status=&quot;Approved&quot;)</p>\n</blockquote>\n"},{"tags":["java","spring-boot","graalvm","springdoc","spring-native"],"answers":[{"comments":[{"owner":{"account_id":4018287,"reputation":482,"user_id":3309578,"display_name":"Sim"},"score":1,"creation_date":1671604164,"post_id":74754372,"comment_id":132132171,"body_markdown":"Based on your comment and the working example, I was able to get it working. See my detailed answer for details. I cannot undo my downvote, just yet, but will do so and add an upvote as soon as I can","body":"Based on your comment and the working example, I was able to get it working. See my detailed answer for details. I cannot undo my downvote, just yet, but will do so and add an upvote as soon as I can"},{"owner":{"account_id":4018287,"reputation":482,"user_id":3309578,"display_name":"Sim"},"score":0,"creation_date":1671632180,"post_id":74754372,"comment_id":132140493,"body_markdown":"After a lot of trial and error, I managed to get it working. Here&#39;s what I found out:\n\nWhitout setting any extra properties, the Swagger UI can be accessed by visiting http://localhost:8080/swagger-ui/4.15.5/index.html\n\nhttp://localhost:8080/swagger-ui gives a 404 http://localhost:8080/v3/api-docs works\n\nSetting springdoc.enable-native-support=true =&gt; Same result\n\nSetting springdoc.swagger-ui.path=/swagger-ui =&gt; Same result\n\nBy setting both properties, I get a different behaviour.\n\nVisiting http://localhost:8080/swagger-ui/index.html still gives 404.","body":"After a lot of trial and error, I managed to get it working. Here&#39;s what I found out:  Whitout setting any extra properties, the Swagger UI can be accessed by visiting <a href=\"http://localhost:8080/swagger-ui/4.15.5/index.html\" rel=\"nofollow noreferrer\">localhost:8080/swagger-ui/4.15.5/index.html</a>  <a href=\"http://localhost:8080/swagger-ui\" rel=\"nofollow noreferrer\">localhost:8080/swagger-ui</a> gives a 404 <a href=\"http://localhost:8080/v3/api-docs\" rel=\"nofollow noreferrer\">localhost:8080/v3/api-docs</a> works  Setting springdoc.enable-native-support=true =&gt; Same result  Setting springdoc.swagger-ui.path=/swagger-ui =&gt; Same result  By setting both properties, I get a different behaviour.  Visiting <a href=\"http://localhost:8080/swagger-ui/index.html\" rel=\"nofollow noreferrer\">localhost:8080/swagger-ui/index.html</a> still gives 404."},{"owner":{"account_id":4018287,"reputation":482,"user_id":3309578,"display_name":"Sim"},"score":0,"creation_date":1671632187,"post_id":74754372,"comment_id":132140496,"body_markdown":"Visiting http://localhost:8080/swagger-ui I get redirected to http://localhost:8080/swagger-ui/4.15.5/index.html and am finally able to see the Swagger UI\n\nAnd where does 4.15.5 come from? This is the swagger-ui version currently used by springdoc-openapi: https://github.com/springdoc/springdoc-openapi/blob/master/pom.xml#L72","body":"Visiting <a href=\"http://localhost:8080/swagger-ui\" rel=\"nofollow noreferrer\">localhost:8080/swagger-ui</a> I get redirected to <a href=\"http://localhost:8080/swagger-ui/4.15.5/index.html\" rel=\"nofollow noreferrer\">localhost:8080/swagger-ui/4.15.5/index.html</a> and am finally able to see the Swagger UI  And where does 4.15.5 come from? This is the swagger-ui version currently used by springdoc-openapi: <a href=\"https://github.com/springdoc/springdoc-openapi/blob/master/pom.xml#L72\" rel=\"nofollow noreferrer\">github.com/springdoc/springdoc-openapi/blob/master/pom.xml#L&zwnj;&#8203;72</a>"},{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1671691067,"post_id":74754372,"comment_id":132153784,"body_markdown":"if you check **mvn:dependency:tree** you will see  **org.webjars:swagger-ui:jar:4.15.5:compile**, probably that is where 4.15.5 is coming from.","body":"if you check <b>mvn:dependency:tree</b> you will see  <b>org.webjars:swagger-ui:jar:4.15.5:compile</b>, probably that is where 4.15.5 is coming from."},{"owner":{"account_id":4018287,"reputation":482,"user_id":3309578,"display_name":"Sim"},"score":0,"creation_date":1671710721,"post_id":74754372,"comment_id":132159158,"body_markdown":"yes, that is also what I found from the pom.xml file: https://github.com/springdoc/springdoc-openapi/blob/master/pom.xml#L72","body":"yes, that is also what I found from the pom.xml file: <a href=\"https://github.com/springdoc/springdoc-openapi/blob/master/pom.xml#L72\" rel=\"nofollow noreferrer\">github.com/springdoc/springdoc-openapi/blob/master/pom.xml#L&zwnj;&#8203;72</a>"}],"tags":[],"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"comment_count":5,"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1681567436,"creation_date":1670687321,"answer_id":74754372,"question_id":74712624,"body_markdown":"You are using correct dependency\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n    &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n    &lt;version&gt;2.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nbut missing the property below \r\n```properties\r\nspringdoc.enable-native-support=true\r\nspringdoc.swagger-ui.path=/swagger-ui\r\n```\r\n[here](https://github.com/ozkanpakdil/spring-examples/tree/master/swagger-boot3-graalvm) the working example. After build you can see swagger ui working at [http://localhost:8080/swagger-ui](http://localhost:8080/swagger-ui) which will redirect to http://localhost:8080/swagger-ui/4.15.5/index.html","title":"Using Springdoc with Spring Boot 3 Native","body":"<p>You are using correct dependency</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n    &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>but missing the property below</p>\n<pre><code>springdoc.enable-native-support=true\nspringdoc.swagger-ui.path=/swagger-ui\n</code></pre>\n<p><a href=\"https://github.com/ozkanpakdil/spring-examples/tree/master/swagger-boot3-graalvm\" rel=\"nofollow noreferrer\">here</a> the working example. After build you can see swagger ui working at <a href=\"http://localhost:8080/swagger-ui\" rel=\"nofollow noreferrer\">http://localhost:8080/swagger-ui</a> which will redirect to http://localhost:8080/swagger-ui/4.15.5/index.html</p>\n"},{"tags":[],"owner":{"account_id":27799897,"reputation":1,"user_id":21224525,"display_name":"mark"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1676940053,"creation_date":1676529471,"answer_id":75468639,"question_id":74712624,"body_markdown":"I test your project (swagger-boot3-graalvm) , it can be compile and genrate a single executable (by `mvn clean package -Pnative native:compile`), but when I ran the executable, the doc is 404. Then I tested it by:\r\n```lang-none\r\njava -Dspring.aot.enabled=true -jar ./target/demo-1.0-SNAPSHOT.jar\r\n```\r\nthe document is OK. Then I tried to run:\r\n```lang-none\r\njava -agentlib:native-image-agent=config-output-dir=src/main/resources/META-INF/native-image -jar ./target/demo-1.0-SNAPSHOT.jar\r\n```\r\nand package (`mvn clean package -Pnative native:compile`) again. \r\nBut compile error with `Error: Detected a ZipFile object in the image heap.`. \r\nMy Compilation environment list：\r\n```lang-none\r\nApache Maven 3.9.0 (9b58d2bad23a66be161c4664ef21ce219c2c8584)\r\nMaven home: /root/apache-maven-3.9.0\r\nJava version: 17.0.6, vendor: GraalVM Community, runtime: /root/graalvm-ce-java17-22.3.1\r\nDefault locale: en_US, platform encoding: UTF-8\r\nOS name: &quot;linux&quot;, version: &quot;3.10.0-1160.el7.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;\r\n```","title":"Using Springdoc with Spring Boot 3 Native","body":"<p>I test your project (swagger-boot3-graalvm) , it can be compile and genrate a single executable (by <code>mvn clean package -Pnative native:compile</code>), but when I ran the executable, the doc is 404. Then I tested it by:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java -Dspring.aot.enabled=true -jar ./target/demo-1.0-SNAPSHOT.jar\n</code></pre>\n<p>the document is OK. Then I tried to run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java -agentlib:native-image-agent=config-output-dir=src/main/resources/META-INF/native-image -jar ./target/demo-1.0-SNAPSHOT.jar\n</code></pre>\n<p>and package (<code>mvn clean package -Pnative native:compile</code>) again.\nBut compile error with <code>Error: Detected a ZipFile object in the image heap.</code>.\nMy Compilation environment list：</p>\n<pre class=\"lang-none prettyprint-override\"><code>Apache Maven 3.9.0 (9b58d2bad23a66be161c4664ef21ce219c2c8584)\nMaven home: /root/apache-maven-3.9.0\nJava version: 17.0.6, vendor: GraalVM Community, runtime: /root/graalvm-ce-java17-22.3.1\nDefault locale: en_US, platform encoding: UTF-8\nOS name: &quot;linux&quot;, version: &quot;3.10.0-1160.el7.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;\n</code></pre>\n"}],"owner":{"account_id":4018287,"reputation":482,"user_id":3309578,"display_name":"Sim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4053,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":74754372,"answer_count":2,"score":4,"last_activity_date":1681567436,"creation_date":1670394869,"question_id":74712624,"body_markdown":"I am trying to use Springdoc v2 with Spring Boot 3. It works fine when running it with the JVM, but not when running the native binary.\r\n\r\nThe Spring boot project is created like this: https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=3.0.0&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=native,web,lombok\r\n\r\nI&#39;ve added the Springdoc dependency:\r\n```\r\n&lt;dependency&gt;\r\n   &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n   &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n   &lt;version&gt;2.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nStarting the jar file, I can browse http://localhost:8080/swagger-ui/index.html, but when I run the native binary, I get a 404.\r\n\r\nAccording to the documentation, it seems to support it out of the box: https://springdoc.org/v2/","title":"Using Springdoc with Spring Boot 3 Native","body":"<p>I am trying to use Springdoc v2 with Spring Boot 3. It works fine when running it with the JVM, but not when running the native binary.</p>\n<p>The Spring boot project is created like this: <a href=\"https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=3.0.0&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=native,web,lombok\" rel=\"nofollow noreferrer\">https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=3.0.0&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=native,web,lombok</a></p>\n<p>I've added the Springdoc dependency:</p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n   &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n   &lt;version&gt;2.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Starting the jar file, I can browse http://localhost:8080/swagger-ui/index.html, but when I run the native binary, I get a 404.</p>\n<p>According to the documentation, it seems to support it out of the box: <a href=\"https://springdoc.org/v2/\" rel=\"nofollow noreferrer\">https://springdoc.org/v2/</a></p>\n"},{"tags":["java","sftp"],"answers":[{"comments":[{"owner":{"account_id":23933181,"reputation":71,"user_id":17927333,"display_name":"Stuepfnick"},"score":0,"creation_date":1683883462,"post_id":76022714,"comment_id":134437930,"body_markdown":"Hi, I got it working with your solution. What happens exactly? Does it throw an exception or maybe just freeze? If freeze, it took 2-3 minutes here, until I added this:\n`builder.setDisableDetectExecChannel(fsOptions, true);`\nWithout it tried to access that channel, which is not enabled by the server.","body":"Hi, I got it working with your solution. What happens exactly? Does it throw an exception or maybe just freeze? If freeze, it took 2-3 minutes here, until I added this: <code>builder.setDisableDetectExecChannel(fsOptions, true);</code> Without it tried to access that channel, which is not enabled by the server."}],"tags":[],"owner":{"account_id":3179090,"reputation":1,"user_id":2686251,"display_name":"user2686251"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681567356,"creation_date":1681567356,"answer_id":76022714,"question_id":75445828,"body_markdown":"As I understand it, the use of the IdentifyInfo requires supplying a private key. Assuming your private key is located in &lt;home&gt;/.ssh/id_rsa then:\r\n\r\n    File keyFile = new File(System.getProperty(&quot;user.home&quot;) + &quot;/.ssh/id_rsa&quot;);\r\n    IdentityProvider identityInfo = new IdentityInfo(keyFile);\r\n    builder.setIdentityProvider(opts, identityInfo);\r\n\r\nHowever, whilst I have got this working by specifying authentication with user account name and password, I have not been able to get this method using ssh key to work.","title":"How to use SftpFileSystemConfigBuilder.getInstance().setIdentityProvider()","body":"<p>As I understand it, the use of the IdentifyInfo requires supplying a private key. Assuming your private key is located in /.ssh/id_rsa then:</p>\n<pre><code>File keyFile = new File(System.getProperty(&quot;user.home&quot;) + &quot;/.ssh/id_rsa&quot;);\nIdentityProvider identityInfo = new IdentityInfo(keyFile);\nbuilder.setIdentityProvider(opts, identityInfo);\n</code></pre>\n<p>However, whilst I have got this working by specifying authentication with user account name and password, I have not been able to get this method using ssh key to work.</p>\n"}],"owner":{"account_id":23458279,"reputation":1,"user_id":17513448,"display_name":"Ryan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":257,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681567356,"creation_date":1676367059,"question_id":75445828,"body_markdown":"I use Apache vfs2 to connect to SFTP server, but the setIdentities() method is deprecated, so I would like to change to use setIdentities() method, but i got the NullPointerException, how to change my code to fix it? thank you.\r\n\r\n```\r\npublic SFtpUtil(String hostName, String portNo, String userId, String userPwd) {\r\n\t\tsftpUri = getSftpUri(hostName, portNo, userId, userPwd);\r\n\t\tlog.info(&quot;sftpUri=&quot; + sftpUri);\r\n\t\tFileSystemOptions opts = new FileSystemOptions();\r\ntry {\r\n\t\t\t\t\t\t\r\n\tSftpFileSystemConfigBuilder.getInstance().setStrictHostKeyChecking(opts, &quot;no&quot;);\r\n\tSftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, true);\r\n\tSftpFileSystemConfigBuilder.getInstance().setConnectTimeout(opts, Duration.ofSeconds(10000));\r\n\r\n// User setIdentities() method, it works, but deprecated\r\n// SftpFileSystemConfigBuilder.getInstance().setIdentities(opts, new File[0]);\r\n\t\t\t\r\n// I follow the suggestion to use setIdentityProvider()\r\nSftpFileSystemConfigBuilder.getInstance().setIdentityProvider(opts, new IdentityInfo(null));\r\n\t\t\tlog.info(&quot;setting SftpFileSystemConfigBuilder finished.&quot;);\r\n\r\n```\r\n\r\n \r\n```\r\nINFO | setting SftpFileSystemConfigBuilder finished.\r\n INFO | create manager\r\n INFO | manager init.\r\norg.apache.commons.vfs2.FileSystemException: Could not connect to SFTP server at &quot;sftp://xxxxxxxxxxxxx...../&quot;.\r\n\tat org.apache.commons.vfs2.provider.sftp.SftpFileProvider.createSession(SftpFileProvider.java:72)\r\n\tat org.apache.commons.vfs2.provider.sftp.SftpFileProvider.doCreateFileSystem(SftpFileProvider.java:92)\r\n\tat org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.getFileSystem(AbstractOriginatingFileProvider.java:92)\r\n\tat org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:71)\r\n\tat org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:55)\r\n\tat org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:788)\r\n\tat org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:835)\r\n\tat lab.tmp.RunSftp.main(RunSftp.java:19)\r\nCaused by: java.lang.NullPointerException\r\n\tat com.jcraft.jsch.Util.checkTilde(Util.java:489)\r\n\tat com.jcraft.jsch.Util.fromFile(Util.java:506)\r\n\tat com.jcraft.jsch.KeyPair.load(KeyPair.java:540)\r\n\tat com.jcraft.jsch.IdentityFile.newInstance(IdentityFile.java:40)\r\n\tat com.jcraft.jsch.JSch.addIdentity(JSch.java:423)\r\n\tat org.apache.commons.vfs2.provider.sftp.IdentityInfo.addIdentity(IdentityInfo.java:87)\r\n\tat org.apache.commons.vfs2.provider.sftp.SftpClientFactory.addIdentity(SftpClientFactory.java:117)\r\n\tat org.apache.commons.vfs2.provider.sftp.SftpClientFactory.addIdentities(SftpClientFactory.java:104)\r\n\tat org.apache.commons.vfs2.provider.sftp.SftpClientFactory.createConnection(SftpClientFactory.java:154)\r\n\tat org.apache.commons.vfs2.provider.sftp.SftpFileProvider.createSession(SftpFileProvider.java:65)\r\n\t... 8 more\r\n```\r\n\r\n\r\nsomeone can help me to fix or tell me how to change my code.","title":"How to use SftpFileSystemConfigBuilder.getInstance().setIdentityProvider()","body":"<p>I use Apache vfs2 to connect to SFTP server, but the setIdentities() method is deprecated, so I would like to change to use setIdentities() method, but i got the NullPointerException, how to change my code to fix it? thank you.</p>\n<pre><code>public SFtpUtil(String hostName, String portNo, String userId, String userPwd) {\n        sftpUri = getSftpUri(hostName, portNo, userId, userPwd);\n        log.info(&quot;sftpUri=&quot; + sftpUri);\n        FileSystemOptions opts = new FileSystemOptions();\ntry {\n                        \n    SftpFileSystemConfigBuilder.getInstance().setStrictHostKeyChecking(opts, &quot;no&quot;);\n    SftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, true);\n    SftpFileSystemConfigBuilder.getInstance().setConnectTimeout(opts, Duration.ofSeconds(10000));\n\n// User setIdentities() method, it works, but deprecated\n// SftpFileSystemConfigBuilder.getInstance().setIdentities(opts, new File[0]);\n            \n// I follow the suggestion to use setIdentityProvider()\nSftpFileSystemConfigBuilder.getInstance().setIdentityProvider(opts, new IdentityInfo(null));\n            log.info(&quot;setting SftpFileSystemConfigBuilder finished.&quot;);\n\n</code></pre>\n<pre><code>INFO | setting SftpFileSystemConfigBuilder finished.\n INFO | create manager\n INFO | manager init.\norg.apache.commons.vfs2.FileSystemException: Could not connect to SFTP server at &quot;sftp://xxxxxxxxxxxxx...../&quot;.\n    at org.apache.commons.vfs2.provider.sftp.SftpFileProvider.createSession(SftpFileProvider.java:72)\n    at org.apache.commons.vfs2.provider.sftp.SftpFileProvider.doCreateFileSystem(SftpFileProvider.java:92)\n    at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.getFileSystem(AbstractOriginatingFileProvider.java:92)\n    at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:71)\n    at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:55)\n    at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:788)\n    at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:835)\n    at lab.tmp.RunSftp.main(RunSftp.java:19)\nCaused by: java.lang.NullPointerException\n    at com.jcraft.jsch.Util.checkTilde(Util.java:489)\n    at com.jcraft.jsch.Util.fromFile(Util.java:506)\n    at com.jcraft.jsch.KeyPair.load(KeyPair.java:540)\n    at com.jcraft.jsch.IdentityFile.newInstance(IdentityFile.java:40)\n    at com.jcraft.jsch.JSch.addIdentity(JSch.java:423)\n    at org.apache.commons.vfs2.provider.sftp.IdentityInfo.addIdentity(IdentityInfo.java:87)\n    at org.apache.commons.vfs2.provider.sftp.SftpClientFactory.addIdentity(SftpClientFactory.java:117)\n    at org.apache.commons.vfs2.provider.sftp.SftpClientFactory.addIdentities(SftpClientFactory.java:104)\n    at org.apache.commons.vfs2.provider.sftp.SftpClientFactory.createConnection(SftpClientFactory.java:154)\n    at org.apache.commons.vfs2.provider.sftp.SftpFileProvider.createSession(SftpFileProvider.java:65)\n    ... 8 more\n</code></pre>\n<p>someone can help me to fix or tell me how to change my code.</p>\n"},{"tags":["java","junit","selenium-webdriver"],"comments":[{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":0,"creation_date":1413323843,"post_id":26371032,"comment_id":41399241,"body_markdown":"Why not simply `assertTrue(orderNumber != ... || orderDate != ...);`?  (Or whatever the logic is.)","body":"Why not simply <code>assertTrue(orderNumber != ... || orderDate != ...);</code>?  (Or whatever the logic is.)"},{"owner":{"account_id":333463,"reputation":6290,"user_id":659354,"accept_rate":81,"display_name":"Raystorm"},"score":0,"creation_date":1413328528,"post_id":26371032,"comment_id":41400709,"body_markdown":"At one point I was doing something like the `assertTrue()` you suggest.  I was just hoping some enterprising individual had created `assertOr(assert, assert)` or `assertOr(object, matcher, object, matcher)` (or something similar) basically I don&#39;t like non-descriptive &quot;AssertionError&quot; granted `assertTrue(&quot;didn&#39;t change&quot;, /* logic here */);` would work, I just prefer matcher errors that include the actual details.","body":"At one point I was doing something like the <code>assertTrue()</code> you suggest.  I was just hoping some enterprising individual had created <code>assertOr(assert, assert)</code> or <code>assertOr(object, matcher, object, matcher)</code> (or something similar) basically I don&#39;t like non-descriptive &quot;AssertionError&quot; granted <code>assertTrue(&quot;didn&#39;t change&quot;, &#47;* logic here *&#47;);</code> would work, I just prefer matcher errors that include the actual details."}],"answers":[{"tags":[],"owner":{"account_id":4878731,"reputation":20470,"user_id":3933089,"accept_rate":67,"display_name":"chiastic-security"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1413324785,"creation_date":1413324785,"answer_id":26371278,"question_id":26371032,"body_markdown":"You can&#39;t do this in a hamcrest style without severe contortions that make it much less readable than falling back to `assertTrue`.\r\n\r\nJust do\r\n\r\n    assertTrue(orderNumber.equals(...) || orderDate.equals(...));\r\n\r\nThe new `assertThat` requires matching against a single object, so you&#39;d have to put them into an array or something in order to get it through.","title":"How can I assert that assertion A or assertion B passes with Junit 4?","body":"<p>You can't do this in a hamcrest style without severe contortions that make it much less readable than falling back to <code>assertTrue</code>.</p>\n\n<p>Just do</p>\n\n<pre><code>assertTrue(orderNumber.equals(...) || orderDate.equals(...));\n</code></pre>\n\n<p>The new <code>assertThat</code> requires matching against a single object, so you'd have to put them into an array or something in order to get it through.</p>\n"},{"tags":[],"owner":{"account_id":333463,"reputation":6290,"user_id":659354,"accept_rate":81,"display_name":"Raystorm"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1414706774,"creation_date":1414704678,"answer_id":26663679,"question_id":26371032,"body_markdown":"The answer/comment suggesting `assertTrue(orderNumber.equals(...) || orderDate.equals(...));` is indeed the simplest and most direct solution.  However, I also wanted better error messages than just **AssertionError**\r\n\r\nIn order to do that was not trivial.  I&#39;m working with Selenium WebDriver so the actual data being checked belongs to a `WebDriver` object.\r\n\r\nI found my answer thanks to this: http://www.planetgeek.ch/2012/03/07/create-your-own-matcher/ blog post.\r\n\r\nIt turns out that Hamcrest has a `CombinableMatcher` class and a `CombinableEitherMatcher`\r\n\r\nI ended up copying `CombinableEitherMatcher`&#39;s logic to create my own class `Neither`\r\n\r\n    public class Neither&lt;X&gt; \r\n    {\r\n      /**\r\n       * Creates a matcher that matches when neither of the specified matchers \r\n       * match the examined object.\r\n       * &lt;p/&gt;\r\n       * For example:\r\n       * &lt;pre&gt;\r\n       * assertThat(&quot;fan&quot;, neither(containsString(&quot;a&quot;)).nor(containsString(&quot;b&quot;)))\r\n       * &lt;/pre&gt;\r\n       */\r\n      public static &lt;LHS&gt; Neither&lt;LHS&gt; neither(Matcher&lt;LHS&gt; matcher)\r\n      { return new Neither&lt;LHS&gt;(matcher); }\r\n    \r\n      private final Matcher&lt;X&gt; first;\r\n    \r\n      public Neither(Matcher&lt;X&gt; matcher) { this.first = not(matcher); }\r\n    \r\n      public CombinableMatcher&lt;X&gt; nor(Matcher&lt;X&gt; other)\r\n      { return new CombinableMatcher&lt;X&gt;(first).or(not(other)); }\r\n    \r\n      /**\r\n       *  Helper class to do the heavy lifting and provide a usable error\r\n       *  from: http://www.planetgeek.ch/2012/03/07/create-your-own-matcher/\r\n       */\r\n      private class WebElementCombinableMatcher extends BaseMatcher&lt;WebElement&gt;\r\n      {\r\n         private final List&lt;Matcher&lt;WebElement&gt;&gt; matchers = new ArrayList&lt;Matcher&lt;WebElement&gt;&gt;();\r\n         private final List&lt;Matcher&lt;WebElement&gt;&gt; failed = new ArrayList&lt;Matcher&lt;WebElement&gt;&gt;();\r\n    \r\n         private WebElementCombinableMatcher(final Matcher matcher)\r\n         { matchers.add(matcher); }\r\n    \r\n         public WebElementCombinableMatcher and(final Matcher matcher) \r\n         {\r\n            matchers.add(matcher);\r\n            return this;\r\n         }\r\n    \r\n         @Override\r\n         public boolean matches(final Object item)\r\n         {\r\n            for (final Matcher&lt;WebElement&gt; matcher : matchers)\r\n            {\r\n               if (!matcher.matches(item))\r\n               {\r\n                  failed.add(matcher);\r\n                  return false;\r\n               }\r\n            }\r\n            return true;\r\n         }\r\n    \r\n         @Override\r\n         public void describeTo(final Description description)\r\n         { description.appendList(&quot;(&quot;, &quot; &quot; + &quot;and&quot; + &quot; &quot;, &quot;)&quot;, matchers); }\r\n    \r\n         @Override\r\n         public void describeMismatch(final Object item, final Description description)\r\n         {\r\n            for (final Matcher&lt;WebElement&gt; matcher : failed)\r\n            {\r\n               description.appendDescriptionOf(matcher).appendText(&quot; but &quot;);\r\n               matcher.describeMismatch(item, description);\r\n            }\r\n         }    \r\n       \r\n      }\r\n    \r\n    }\r\n\r\nwhich lets me call \r\n`assertThat(driver, niether(matcher(x)).nor(matcher(y));`  \r\n\r\nSince I&#39;m trying to compare specific WebElements obtainable from driver I had to create matchers that I could use inside of *niether/nor*\r\n\r\nFor Example:  \r\n\r\n    public class WebElementValueMatcher extends FeatureMatcher&lt;WebDriver, String&gt;\r\n    {\r\n       public static Matcher&lt;WebDriver&gt; elementHasValue(final By locator,\r\n                                                        String elementValue)\r\n       { return new WebElementValueMatcher(equalTo(elementValue), locator); }\r\n    \r\n       public static Matcher&lt;WebDriver&gt; elementHasValue(final By locator,\r\n                                                        Matcher&lt;String&gt; matcher)\r\n       { return new WebElementValueMatcher(matcher, locator); }\r\n    \r\n       By locator;\r\n    \r\n       public WebElementValueMatcher(Matcher&lt;String&gt; subMatcher, By locator)\r\n       {\r\n          super(subMatcher, locator.toString(), locator.toString());\r\n          this.locator = locator;\r\n       }\r\n    \r\n       public WebElementValueMatcher(Matcher&lt;String&gt; subMatcher,\r\n                                     String featureDescription, String featureName)\r\n       { super(subMatcher, featureDescription, featureName); }\r\n    \r\n       @Override\r\n       protected String featureValueOf(WebDriver actual)\r\n       { return actual.findElement(locator).getAttribute(&quot;value&quot;); }\r\n    \r\n    }\r\n\r\nI have another very similar one that calls `actual.findElement(locator).getText();` in *featureValueOf*\r\n\r\n\r\nHowever now I can simply call  \r\n\r\n    assertThat(driver, \r\n               niether(elementHasValue(By.id(&quot;foo&quot;),&quot;foo&quot;))\r\n                  .nor(elementHasValue(By.id(&quot;bar&quot;),&quot;bar&quot;)));` \r\n\r\nand get clean syntax in my tests and a usable error message.","title":"How can I assert that assertion A or assertion B passes with Junit 4?","body":"<p>The answer/comment suggesting <code>assertTrue(orderNumber.equals(...) || orderDate.equals(...));</code> is indeed the simplest and most direct solution.  However, I also wanted better error messages than just <strong>AssertionError</strong></p>\n\n<p>In order to do that was not trivial.  I'm working with Selenium WebDriver so the actual data being checked belongs to a <code>WebDriver</code> object.</p>\n\n<p>I found my answer thanks to this: <a href=\"http://www.planetgeek.ch/2012/03/07/create-your-own-matcher/\" rel=\"nofollow\">http://www.planetgeek.ch/2012/03/07/create-your-own-matcher/</a> blog post.</p>\n\n<p>It turns out that Hamcrest has a <code>CombinableMatcher</code> class and a <code>CombinableEitherMatcher</code></p>\n\n<p>I ended up copying <code>CombinableEitherMatcher</code>'s logic to create my own class <code>Neither</code></p>\n\n<pre><code>public class Neither&lt;X&gt; \n{\n  /**\n   * Creates a matcher that matches when neither of the specified matchers \n   * match the examined object.\n   * &lt;p/&gt;\n   * For example:\n   * &lt;pre&gt;\n   * assertThat(\"fan\", neither(containsString(\"a\")).nor(containsString(\"b\")))\n   * &lt;/pre&gt;\n   */\n  public static &lt;LHS&gt; Neither&lt;LHS&gt; neither(Matcher&lt;LHS&gt; matcher)\n  { return new Neither&lt;LHS&gt;(matcher); }\n\n  private final Matcher&lt;X&gt; first;\n\n  public Neither(Matcher&lt;X&gt; matcher) { this.first = not(matcher); }\n\n  public CombinableMatcher&lt;X&gt; nor(Matcher&lt;X&gt; other)\n  { return new CombinableMatcher&lt;X&gt;(first).or(not(other)); }\n\n  /**\n   *  Helper class to do the heavy lifting and provide a usable error\n   *  from: http://www.planetgeek.ch/2012/03/07/create-your-own-matcher/\n   */\n  private class WebElementCombinableMatcher extends BaseMatcher&lt;WebElement&gt;\n  {\n     private final List&lt;Matcher&lt;WebElement&gt;&gt; matchers = new ArrayList&lt;Matcher&lt;WebElement&gt;&gt;();\n     private final List&lt;Matcher&lt;WebElement&gt;&gt; failed = new ArrayList&lt;Matcher&lt;WebElement&gt;&gt;();\n\n     private WebElementCombinableMatcher(final Matcher matcher)\n     { matchers.add(matcher); }\n\n     public WebElementCombinableMatcher and(final Matcher matcher) \n     {\n        matchers.add(matcher);\n        return this;\n     }\n\n     @Override\n     public boolean matches(final Object item)\n     {\n        for (final Matcher&lt;WebElement&gt; matcher : matchers)\n        {\n           if (!matcher.matches(item))\n           {\n              failed.add(matcher);\n              return false;\n           }\n        }\n        return true;\n     }\n\n     @Override\n     public void describeTo(final Description description)\n     { description.appendList(\"(\", \" \" + \"and\" + \" \", \")\", matchers); }\n\n     @Override\n     public void describeMismatch(final Object item, final Description description)\n     {\n        for (final Matcher&lt;WebElement&gt; matcher : failed)\n        {\n           description.appendDescriptionOf(matcher).appendText(\" but \");\n           matcher.describeMismatch(item, description);\n        }\n     }    \n\n  }\n\n}\n</code></pre>\n\n<p>which lets me call \n<code>assertThat(driver, niether(matcher(x)).nor(matcher(y));</code>  </p>\n\n<p>Since I'm trying to compare specific WebElements obtainable from driver I had to create matchers that I could use inside of <em>niether/nor</em></p>\n\n<p>For Example:  </p>\n\n<pre><code>public class WebElementValueMatcher extends FeatureMatcher&lt;WebDriver, String&gt;\n{\n   public static Matcher&lt;WebDriver&gt; elementHasValue(final By locator,\n                                                    String elementValue)\n   { return new WebElementValueMatcher(equalTo(elementValue), locator); }\n\n   public static Matcher&lt;WebDriver&gt; elementHasValue(final By locator,\n                                                    Matcher&lt;String&gt; matcher)\n   { return new WebElementValueMatcher(matcher, locator); }\n\n   By locator;\n\n   public WebElementValueMatcher(Matcher&lt;String&gt; subMatcher, By locator)\n   {\n      super(subMatcher, locator.toString(), locator.toString());\n      this.locator = locator;\n   }\n\n   public WebElementValueMatcher(Matcher&lt;String&gt; subMatcher,\n                                 String featureDescription, String featureName)\n   { super(subMatcher, featureDescription, featureName); }\n\n   @Override\n   protected String featureValueOf(WebDriver actual)\n   { return actual.findElement(locator).getAttribute(\"value\"); }\n\n}\n</code></pre>\n\n<p>I have another very similar one that calls <code>actual.findElement(locator).getText();</code> in <em>featureValueOf</em></p>\n\n<p>However now I can simply call  </p>\n\n<pre><code>assertThat(driver, \n           niether(elementHasValue(By.id(\"foo\"),\"foo\"))\n              .nor(elementHasValue(By.id(\"bar\"),\"bar\")));` \n</code></pre>\n\n<p>and get clean syntax in my tests and a usable error message.</p>\n"},{"tags":[],"owner":{"account_id":9691730,"reputation":1318,"user_id":7189597,"display_name":"Sobhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681566858,"creation_date":1681566858,"answer_id":76022668,"question_id":26371032,"body_markdown":"The approved answer is complete but I think it is outdated and you need to code a lot. for anyone that is looking for a more simpler solution, you can achieve the same functionality as below:\r\n\r\n1)\r\n\r\n    \r\n    \r\n    assertThat(actual).isIn(expected1, expected2);\r\n\r\n2)\r\n\r\n    assertThat(actual, anyOf(is(expected1), is(expected2)));\r\n\r\n3)\r\n\r\n    assertThat(actual, isOneOf(expected1, expected2));\r\n\r\n4)\r\n\r\n    String expectedTitles[] = {&quot;expected1&quot;,&quot;expected2&quot;};\r\n    List&lt;String&gt; expectedTitlesList = Arrays.asList(expectedTitles);\r\n    \r\n    assertTrue(expectedTitlesList.contains((actual)));","title":"How can I assert that assertion A or assertion B passes with Junit 4?","body":"<p>The approved answer is complete but I think it is outdated and you need to code a lot. for anyone that is looking for a more simpler solution, you can achieve the same functionality as below:</p>\n<p>1)</p>\n<pre><code>assertThat(actual).isIn(expected1, expected2);\n</code></pre>\n<ol start=\"2\">\n<li></li>\n</ol>\n<pre><code>assertThat(actual, anyOf(is(expected1), is(expected2)));\n</code></pre>\n<ol start=\"3\">\n<li></li>\n</ol>\n<pre><code>assertThat(actual, isOneOf(expected1, expected2));\n</code></pre>\n<ol start=\"4\">\n<li></li>\n</ol>\n<pre><code>String expectedTitles[] = {&quot;expected1&quot;,&quot;expected2&quot;};\nList&lt;String&gt; expectedTitlesList = Arrays.asList(expectedTitles);\n\nassertTrue(expectedTitlesList.contains((actual)));\n</code></pre>\n"}],"owner":{"account_id":333463,"reputation":6290,"user_id":659354,"accept_rate":81,"display_name":"Raystorm"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2551,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":26663679,"answer_count":3,"score":0,"last_activity_date":1681566858,"creation_date":1413323644,"question_id":26371032,"body_markdown":"I&#39;m using Junit 4 w/ Selenium WebDriver for some automated testing.  I have a test that records some values on a page, clicks a button on the page to load the next page and then compares the recorded value to make sure they changed.\r\n\r\nThe problem is it&#39;s a *PAIR* of values and only one of them has to change, not both.\r\n\r\nFor testing it I&#39;ve currently implemented the following code: \r\n\r\n    boolean orderNumberChanged = true;\r\n    try\r\n    {\r\n      assertThat(orderNumber,\r\n                 is(not(getValueForElement(By.name(&quot;updateForm:j_id35&quot;)))));\r\n\r\n    }\r\n    catch (AssertionError ae) { orderNumberChanged = false; }\r\n    try\r\n    {\r\n      assertThat(orderDate,\r\n                 is(not(getValueForElement(By.name(&quot;updateForm:j_id37&quot;)))));\r\n\r\n    }\r\n    catch (AssertionError ae)\r\n    {\r\n      if ( !orderNumberChanged )\r\n      { fail(&quot;OrderNumber and OrderDate didn&#39;t change.&quot;); }\r\n    }\r\n\r\nWhile it should work perfectly fine it just *looks* ugly to me and it seams like there should be some way to assert something like this.\r\n\r\nFor the record `getValueForElement()` is a method I wrote to wrap  \r\n`driver.findElement(locator).getAttribute(&quot;value&quot;);`  ","title":"How can I assert that assertion A or assertion B passes with Junit 4?","body":"<p>I'm using Junit 4 w/ Selenium WebDriver for some automated testing.  I have a test that records some values on a page, clicks a button on the page to load the next page and then compares the recorded value to make sure they changed.</p>\n\n<p>The problem is it's a <em>PAIR</em> of values and only one of them has to change, not both.</p>\n\n<p>For testing it I've currently implemented the following code: </p>\n\n<pre><code>boolean orderNumberChanged = true;\ntry\n{\n  assertThat(orderNumber,\n             is(not(getValueForElement(By.name(\"updateForm:j_id35\")))));\n\n}\ncatch (AssertionError ae) { orderNumberChanged = false; }\ntry\n{\n  assertThat(orderDate,\n             is(not(getValueForElement(By.name(\"updateForm:j_id37\")))));\n\n}\ncatch (AssertionError ae)\n{\n  if ( !orderNumberChanged )\n  { fail(\"OrderNumber and OrderDate didn't change.\"); }\n}\n</code></pre>\n\n<p>While it should work perfectly fine it just <em>looks</em> ugly to me and it seams like there should be some way to assert something like this.</p>\n\n<p>For the record <code>getValueForElement()</code> is a method I wrote to wrap<br>\n<code>driver.findElement(locator).getAttribute(\"value\");</code>  </p>\n"},{"tags":["java","google-maps","javafx","routes"],"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1681567061,"post_id":76022664,"comment_id":134079053,"body_markdown":"The last time I tried google maps in WebView, or gmapsfx (which relies on google maps in WebView), it did not work.  Google does not support using google maps in WebView.  Once it may have worked, even if unsupported.  Now WebVIew does not provide the functionality required for the current versions of Google Maps to function correctly.","body":"The last time I tried google maps in WebView, or gmapsfx (which relies on google maps in WebView), it did not work.  Google does not support using google maps in WebView.  Once it may have worked, even if unsupported.  Now WebVIew does not provide the functionality required for the current versions of Google Maps to function correctly."},{"owner":{"account_id":21686239,"reputation":19,"user_id":16001648,"display_name":"Kacper Bielak"},"score":0,"creation_date":1682060652,"post_id":76022664,"comment_id":134159254,"body_markdown":"oh, i understand. If so, can you recommend any other library that I can use in JavaFX to display the map? Where will I be able to display markers and define a route between points?","body":"oh, i understand. If so, can you recommend any other library that I can use in JavaFX to display the map? Where will I be able to display markers and define a route between points?"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1682073272,"post_id":76022664,"comment_id":134161914,"body_markdown":"No.  Mapping isn&#39;t really my field and recommendations aren&#39;t on topic for StackOverflow.  There are numerous mapping solutions, you can consider.  For instance, perhaps Bing Maps or some other HTML-based mapping would work in WebView where Google Maps currently doesn&#39;t.  Or a Swing-based mapping solution based on OpenStreetMap, like [JMapViewer](https://wiki.openstreetmap.org/wiki/JMapViewer) or maybe something from [ArcGIS](https://developers.arcgis.com/java/sample-code/openstreetmap-layer/), or something else (you would need to search and evaluate).","body":"No.  Mapping isn&#39;t really my field and recommendations aren&#39;t on topic for StackOverflow.  There are numerous mapping solutions, you can consider.  For instance, perhaps Bing Maps or some other HTML-based mapping would work in WebView where Google Maps currently doesn&#39;t.  Or a Swing-based mapping solution based on OpenStreetMap, like <a href=\"https://wiki.openstreetmap.org/wiki/JMapViewer\" rel=\"nofollow noreferrer\">JMapViewer</a> or maybe something from <a href=\"https://developers.arcgis.com/java/sample-code/openstreetmap-layer/\" rel=\"nofollow noreferrer\">ArcGIS</a>, or something else (you would need to search and evaluate)."}],"owner":{"account_id":21686239,"reputation":19,"user_id":16001648,"display_name":"Kacper Bielak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681566802,"creation_date":1681566802,"question_id":76022664,"body_markdown":"how to plot a route between several markers on a map in GMapsFX? I have an application written in Java using JavaFX. There is already implemented map with marked markers. During operation, more markers will be added and it can be generated automatically or, for example, by clicking the button at the end. I&#39;ve been looking for info on this but couldn&#39;t find anything specific. Below is the function that initializes my map.\r\n\r\n     @Override\r\n     public void mapInitialized() {\r\n      MapOptions mapOptions = new MapOptions();\r\n      mapOptions.mapType(MapTypeIdEnum.ROADMAP).zoom(16).keyboardShortcuts(false);\r\n      map = mapView.createMap(mapOptions);\r\n      LatLong latLong = new LatLong(50.0650887,19.9245536);\r\n      MarkerOptions markerOptions=new MarkerOptions();\r\n      marker = new Marker(markerOptions);\r\n      marker.setPosition(latLong);\r\n      map.addMarker(marker);\r\n      map.setCenter(latLong);\r\n     }","title":"How to route between several markers in gmapsfx / JavaFX?","body":"<p>how to plot a route between several markers on a map in GMapsFX? I have an application written in Java using JavaFX. There is already implemented map with marked markers. During operation, more markers will be added and it can be generated automatically or, for example, by clicking the button at the end. I've been looking for info on this but couldn't find anything specific. Below is the function that initializes my map.</p>\n<pre><code> @Override\n public void mapInitialized() {\n  MapOptions mapOptions = new MapOptions();\n  mapOptions.mapType(MapTypeIdEnum.ROADMAP).zoom(16).keyboardShortcuts(false);\n  map = mapView.createMap(mapOptions);\n  LatLong latLong = new LatLong(50.0650887,19.9245536);\n  MarkerOptions markerOptions=new MarkerOptions();\n  marker = new Marker(markerOptions);\n  marker.setPosition(latLong);\n  map.addMarker(marker);\n  map.setCenter(latLong);\n }\n</code></pre>\n"},{"tags":["java","frame","jdialog"],"answers":[{"comments":[{"owner":{"account_id":1092093,"reputation":4806,"user_id":1086511,"accept_rate":73,"display_name":"Rodrigo"},"score":0,"creation_date":1402430172,"post_id":11455446,"comment_id":37267712,"body_markdown":"I have done this to remove the decoration from a JDialog, but all my windows are undecorated now! I&#39;m using Ubuntu 12.04. Anyone have seen this bug?","body":"I have done this to remove the decoration from a JDialog, but all my windows are undecorated now! I&#39;m using Ubuntu 12.04. Anyone have seen this bug?"}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681565949,"creation_date":1342107524,"answer_id":11455446,"question_id":11454687,"body_markdown":"I found this blog entry on the topic: [Making a Custom Frameless Window][1]\r\n\r\nThe key thing is to call `JDialog::setUndecorated(true)` to suppress the frame and titlebar.  You can do the same thing on a `JFrame`.\r\n\r\nThe call should be made when the dialog or frame&#39;s window is not displayed.\r\n\r\n\r\n  [1]: https://web.archive.org/web/20170510191837/http://www.stupidjavatricks.com/2005/09/making-a-custom-frameless-window/","title":"how to make a JDialog frameless?","body":"<p>I found this blog entry on the topic: <a href=\"https://web.archive.org/web/20170510191837/http://www.stupidjavatricks.com/2005/09/making-a-custom-frameless-window/\" rel=\"nofollow noreferrer\">Making a Custom Frameless Window</a></p>\n<p>The key thing is to call <code>JDialog::setUndecorated(true)</code> to suppress the frame and titlebar.  You can do the same thing on a <code>JFrame</code>.</p>\n<p>The call should be made when the dialog or frame's window is not displayed.</p>\n"}],"owner":{"account_id":1555897,"reputation":1193,"user_id":1447011,"accept_rate":14,"display_name":"user1447011"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4060,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681565949,"creation_date":1342105168,"question_id":11454687,"body_markdown":"my dialog example as following:\r\n\r\n\r\n    public class DialogNotify extends JDialog{\r\n       public DialogNotify() {\r\n          setModal(true);\r\n          setSize(200, 100);\r\n          setVisible(true);\r\n       }\r\n    }\r\n\r\nhow to make it shown frameless ? by frameless, I mean with &quot;close&quot; button on top right or menu bar on top left.","title":"how to make a JDialog frameless?","body":"<p>my dialog example as following:</p>\n\n<pre><code>public class DialogNotify extends JDialog{\n   public DialogNotify() {\n      setModal(true);\n      setSize(200, 100);\n      setVisible(true);\n   }\n}\n</code></pre>\n\n<p>how to make it shown frameless ? by frameless, I mean with \"close\" button on top right or menu bar on top left.</p>\n"},{"tags":["java","plugins","server","minecraft","ram"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1681565651,"post_id":76022575,"comment_id":134078883,"body_markdown":"Why do you need to do this while it’s running?","body":"Why do you need to do this while it’s running?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681566212,"post_id":76022575,"comment_id":134078950,"body_markdown":"You can&#39;t change the max heap size while a JVM is running.  It is not possible.","body":"You can&#39;t change the max heap size while a JVM is running.  It is not possible."}],"owner":{"account_id":28313369,"reputation":1,"user_id":21650305,"display_name":"Micha Andre"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681566305,"answer_count":0,"score":0,"last_activity_date":1681565584,"creation_date":1681565584,"question_id":76022575,"body_markdown":"I can&#39;t use the java plugin to set the maximum allocated RAM to the server while it is running, but I need to make the RAM increase or decrease on the server depending on the number of players.\r\n\r\nI tried several ways, via java.args and via runtime. Both methods do not work, it gives a big error to the console.","title":"How to set the maximum allocated RAM for the java server, without stopping the server? (-Xmx)","body":"<p>I can't use the java plugin to set the maximum allocated RAM to the server while it is running, but I need to make the RAM increase or decrease on the server depending on the number of players.</p>\n<p>I tried several ways, via java.args and via runtime. Both methods do not work, it gives a big error to the console.</p>\n"},{"tags":["java","user-interface","javafx","desktop-application"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1628103102,"post_id":68654297,"comment_id":121334565,"body_markdown":"That `JRE System Library [J2SE-1.5]` line is likely the problem.  Java 1.5 does not know what a module descriptor is.  Remove that library from your project.","body":"That <code>JRE System Library [J2SE-1.5]</code> line is likely the problem.  Java 1.5 does not know what a module descriptor is.  Remove that library from your project."},{"owner":{"account_id":19929279,"reputation":35,"user_id":14603176,"display_name":"Ali"},"score":0,"creation_date":1628109509,"post_id":68654297,"comment_id":121336693,"body_markdown":"Finally, it is working, Thanks a lot.","body":"Finally, it is working, Thanks a lot."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1628110469,"post_id":68654297,"comment_id":121336990,"body_markdown":"&quot;_and I can not even delete it_&quot; – I find that strange, given having a module descriptor is not a requirement, even for JavaFX applications.","body":"&quot;<i>and I can not even delete it</i>&quot; – I find that strange, given having a module descriptor is not a requirement, even for JavaFX applications."},{"owner":{"account_id":19929279,"reputation":35,"user_id":14603176,"display_name":"Ali"},"score":0,"creation_date":1628119964,"post_id":68654297,"comment_id":121338948,"body_markdown":"I worked with javaFX for some time, and I never used a module file before. that is the first time I see it","body":"I worked with javaFX for some time, and I never used a module file before. that is the first time I see it"}],"answers":[{"comments":[{"owner":{"account_id":19929279,"reputation":35,"user_id":14603176,"display_name":"Ali"},"score":0,"creation_date":1628102419,"post_id":68656439,"comment_id":121334345,"body_markdown":"I tried to relocate it in the same package (Application), directly under (src) folder, and even just in the proj0 file with the application package, but unfortunately nothing changed and the errors are still there","body":"I tried to relocate it in the same package (Application), directly under (src) folder, and even just in the proj0 file with the application package, but unfortunately nothing changed and the errors are still there"},{"owner":{"account_id":19929279,"reputation":35,"user_id":14603176,"display_name":"Ali"},"score":0,"creation_date":1628102463,"post_id":68656439,"comment_id":121334359,"body_markdown":"also I was using JFX for some time befor, and I have never scene the module-info file before \\!!","body":"also I was using JFX for some time befor, and I have never scene the module-info file before \\!!"},{"owner":{"account_id":424804,"reputation":7765,"user_id":805007,"accept_rate":83,"display_name":"Phil Freihofner"},"score":0,"creation_date":1628107065,"post_id":68656439,"comment_id":121335854,"body_markdown":"Actually, I just noticed that you are using Java 1.5. Can that be true? You need to have at least Java 9 in order to properly make use of the modules.","body":"Actually, I just noticed that you are using Java 1.5. Can that be true? You need to have at least Java 9 in order to properly make use of the modules."},{"owner":{"account_id":19929279,"reputation":35,"user_id":14603176,"display_name":"Ali"},"score":0,"creation_date":1628109486,"post_id":68656439,"comment_id":121336687,"body_markdown":"I tried that and it worked, Thank you so much","body":"I tried that and it worked, Thank you so much"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1628110290,"post_id":68656439,"comment_id":121336941,"body_markdown":"Eclipse (I think this is Eclipse) likely just labels anything directly under `src` as being in the &quot;default package&quot;, as that&#39;s where said default package is &quot;located&quot;. But yes, the module descriptor belongs under the root of the source directory (here `src`, using Maven/Gradle it&#39;d be under `src/main/java`).","body":"Eclipse (I think this is Eclipse) likely just labels anything directly under <code>src</code> as being in the &quot;default package&quot;, as that&#39;s where said default package is &quot;located&quot;. But yes, the module descriptor belongs under the root of the source directory (here <code>src</code>, using Maven/Gradle it&#39;d be under <code>src&#47;main&#47;java</code>)."},{"owner":{"account_id":424804,"reputation":7765,"user_id":805007,"accept_rate":83,"display_name":"Phil Freihofner"},"score":0,"creation_date":1628112783,"post_id":68656439,"comment_id":121337553,"body_markdown":"It would probably be good to mark this question solved. IDK that the answer is clear, though, since it is hidden in a comment (about Java 1.5 not being modular). Should I add that to the main answer as an edit to make it more clear to people who might use this as a reference? I think the intended mission of StackOverflow is to function as a helpful reference guide, first and foremost.","body":"It would probably be good to mark this question solved. IDK that the answer is clear, though, since it is hidden in a comment (about Java 1.5 not being modular). Should I add that to the main answer as an edit to make it more clear to people who might use this as a reference? I think the intended mission of StackOverflow is to function as a helpful reference guide, first and foremost."},{"owner":{"account_id":19929279,"reputation":35,"user_id":14603176,"display_name":"Ali"},"score":0,"creation_date":1628175083,"post_id":68656439,"comment_id":121355695,"body_markdown":"Thanks for adding that, the question is marked as solved","body":"Thanks for adding that, the question is marked as solved"}],"tags":[],"owner":{"account_id":424804,"reputation":7765,"user_id":805007,"accept_rate":83,"display_name":"Phil Freihofner"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1628112874,"creation_date":1628102098,"answer_id":68656439,"question_id":68654297,"body_markdown":"The module-info.java file looks pretty typical for modular Java projects (Java 9+). It is usual to require the javafx.controls, and to open your application (here, actually named &quot;application&quot;) to javafx. I think this latter statement pertains to the javafx module needing to be able to look into the module that has the entry point for the program.\r\n\r\nBut the location of the file seems suspect to me. I&#39;m not up on all the complexities, but I do think the file would be better located directly under the /src directory rather than in a default package. Usually the module-info.java file is the top file folder level and the source code for the program is a child folder.\r\n\r\nIn other words, the module-info.java file and the /application package file should be in the same folder. At least, that is how things are set up on my javafx programs and modular java programs.\r\n\r\nEDIT: I noticed that your Build Path is listing Java 1.5! This Java doesn&#39;t support modules. Modules were introduced in Java 9.","title":"error in module-info.java file in javafx project","body":"<p>The module-info.java file looks pretty typical for modular Java projects (Java 9+). It is usual to require the javafx.controls, and to open your application (here, actually named &quot;application&quot;) to javafx. I think this latter statement pertains to the javafx module needing to be able to look into the module that has the entry point for the program.</p>\n<p>But the location of the file seems suspect to me. I'm not up on all the complexities, but I do think the file would be better located directly under the /src directory rather than in a default package. Usually the module-info.java file is the top file folder level and the source code for the program is a child folder.</p>\n<p>In other words, the module-info.java file and the /application package file should be in the same folder. At least, that is how things are set up on my javafx programs and modular java programs.</p>\n<p>EDIT: I noticed that your Build Path is listing Java 1.5! This Java doesn't support modules. Modules were introduced in Java 9.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681902783,"post_id":76021737,"comment_id":134130931,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/76021737/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":13404313,"reputation":1,"user_id":9672794,"display_name":"shen55"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681565352,"creation_date":1681555275,"answer_id":76021737,"question_id":68654297,"body_markdown":"You have to add the JavaFX library under **Modulepath** as a **user Library**. so the problem will go away. [ see this screenshot][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vt1nI.png","title":"error in module-info.java file in javafx project","body":"<p>You have to add the JavaFX library under <strong>Modulepath</strong> as a <strong>user Library</strong>. so the problem will go away. <a href=\"https://i.stack.imgur.com/vt1nI.png\" rel=\"nofollow noreferrer\"> see this screenshot</a></p>\n"}],"owner":{"account_id":19929279,"reputation":35,"user_id":14603176,"display_name":"Ali"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2577,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":68656439,"answer_count":2,"score":-1,"last_activity_date":1681565352,"creation_date":1628091939,"question_id":68654297,"body_markdown":"I have been using javaFX for a while now, but a day ago when I crated a new project I noticed that there is a new file created automatically with the name (module-info.java) in the default package, and I can not even delete it!!. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nthe following code is written there:\r\n```\r\nmodule prog0 {\r\n\trequires javafx.controls;\r\n\t\r\n\topens application to javafx.graphics, javafx.fxml;\r\n}\r\n```\r\nunfortunatily all lines has errors \r\n\r\n1ST line : **Syntax error on token &quot;module&quot;, interface expected**\r\n\r\n2nd line : **Syntax error on token &quot;.&quot;, , expected**\r\n\r\n3rd line : **Multiple markers at this line\r\n\r\n\t- Syntax error on token &quot;to&quot;, = \r\n\t expected\r\n\r\n\t- Syntax error on token &quot;.&quot;, , \r\n\t expected\r\n\r\n\t- Syntax error on token &quot;to&quot;, = \r\n\t expected\r\n\r\n\t- Syntax error on token &quot;.&quot;, , \r\n\t expected**\r\n\r\n\r\nLibraries used:\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lcJKD.png\r\n  [2]: https://i.stack.imgur.com/1fdZd.png","title":"error in module-info.java file in javafx project","body":"<p>I have been using javaFX for a while now, but a day ago when I crated a new project I noticed that there is a new file created automatically with the name (module-info.java) in the default package, and I can not even delete it!!.</p>\n<p><a href=\"https://i.stack.imgur.com/lcJKD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lcJKD.png\" alt=\"enter image description here\" /></a></p>\n<p>the following code is written there:</p>\n<pre><code>module prog0 {\n    requires javafx.controls;\n    \n    opens application to javafx.graphics, javafx.fxml;\n}\n</code></pre>\n<p>unfortunatily all lines has errors</p>\n<p>1ST line : <strong>Syntax error on token &quot;module&quot;, interface expected</strong></p>\n<p>2nd line : <strong>Syntax error on token &quot;.&quot;, , expected</strong></p>\n<p>3rd line : **Multiple markers at this line</p>\n<pre><code>- Syntax error on token &quot;to&quot;, = \n expected\n\n- Syntax error on token &quot;.&quot;, , \n expected\n\n- Syntax error on token &quot;to&quot;, = \n expected\n\n- Syntax error on token &quot;.&quot;, , \n expected**\n</code></pre>\n<p>Libraries used:\n<a href=\"https://i.stack.imgur.com/1fdZd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1fdZd.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","kotlin","intellij-idea"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":2,"creation_date":1681551376,"post_id":76021432,"comment_id":134077128,"body_markdown":"You need to show us some code and error messages.","body":"You need to show us some code and error messages."},{"owner":{"account_id":5299598,"reputation":1176,"user_id":4229716,"accept_rate":12,"display_name":"JITHIN_PATHROSE"},"score":0,"creation_date":1681551764,"post_id":76021432,"comment_id":134077153,"body_markdown":"updated the question with the code. I hope this helps. Thanks","body":"updated the question with the code. I hope this helps. Thanks"},{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":1,"creation_date":1681551991,"post_id":76021432,"comment_id":134077176,"body_markdown":"And please include some error messages.","body":"And please include some error messages."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1681552530,"post_id":76021432,"comment_id":134077228,"body_markdown":"The code block after &quot;and I have used this in my java class&quot; does not show that you used the `ListConverter` written in Kotlin. Did you mean to write `public class AConverter extends ListConverter&lt;A&gt;`?","body":"The code block after &quot;and I have used this in my java class&quot; does not show that you used the <code>ListConverter</code> written in Kotlin. Did you mean to write <code>public class AConverter extends ListConverter&lt;A&gt;</code>?"},{"owner":{"account_id":5299598,"reputation":1176,"user_id":4229716,"accept_rate":12,"display_name":"JITHIN_PATHROSE"},"score":0,"creation_date":1681552801,"post_id":76021432,"comment_id":134077259,"body_markdown":"@Sweeper yes, also I have called a method from the super class.","body":"@Sweeper yes, also I have called a method from the super class."},{"owner":{"account_id":13722742,"reputation":16988,"user_id":10134209,"display_name":"gidds"},"score":1,"creation_date":1681554319,"post_id":76021432,"comment_id":134077422,"body_markdown":"Note that the Java-to-Kotlin converter is a bit rough-and-ready; its output usually needs some manual clean-up, and may not even compile. (That doesn&#39;t prevent it being a very useful too, however.)","body":"Note that the Java-to-Kotlin converter is a bit rough-and-ready; its output usually needs some manual clean-up, and may not even compile. (That doesn&#39;t prevent it being a very useful too, however.)"},{"owner":{"account_id":17327133,"reputation":855,"user_id":12551115,"display_name":"vanyochek"},"score":0,"creation_date":1682326671,"post_id":76021432,"comment_id":134191741,"body_markdown":"Can you attach a link to a sample project?","body":"Can you attach a link to a sample project?"}],"owner":{"account_id":5299598,"reputation":1176,"user_id":4229716,"accept_rate":12,"display_name":"JITHIN_PATHROSE"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681564042,"creation_date":1681551302,"question_id":76021432,"body_markdown":"I am using a mix of Java and Kotlin code in my project. I converted some of my new Java classes to Kotlin using the _&quot;convert Java file to Kotlin file&quot;_ option in IntelliJ IDEA.\r\n\r\nWhen I try to Maven build my project, I am getting _&quot;cannot find symbol&quot;_ everywhere I use the new converted files.\r\n\r\nThis is my class converted to Kotlin\r\n\r\n```kotlin\r\nopen class ListConverter&lt;AnyTypeList&gt; {\r\n\r\n    private val objectMapper = ObjectMapper()\r\n        .disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS) // ISODate\r\n        .disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\r\n        .registerModule(JavaTimeModule())\r\n        .registerModule(ParameterNamesModule())\r\n        .registerModule(Jdk8Module())\r\n        .registerModule(KotlinModule())\r\n\r\n    fun transformToType(attributeValue: AttributeValue): List&lt;AnyTypeList&gt; {\r\n        try {\r\n            val json = attributeValue.s()\r\n            return objectMapper.readValue(json, object : TypeReference&lt;List&lt;AnyTypeList&gt;&gt;() {})\r\n        } catch (e: JsonProcessingException) {\r\n            throw RuntimeException(&quot;Failed to convert AttributeValue to list &quot;, e)\r\n        }\r\n    }\r\n\r\n    fun transformFromType(inputs: List&lt;AnyTypeList&gt;?): AttributeValue {\r\n        return if (inputs == null) {\r\n            AttributeValue.builder().nul(true).build()\r\n        } else try {\r\n            val json = objectMapper.writeValueAsString(inputs)\r\n            AttributeValue.builder().s(json).build()\r\n        } catch (e: JsonProcessingException) {\r\n            throw RuntimeException(&quot;Failed to convert list to AttributeValue&quot;, e)\r\n        }\r\n    } \r\n}\r\n```\r\nI have used this in my Java class\r\n\r\n```java\r\npublic class AConverter extends AnyTypeListConverter&lt;A&gt; {\r\n    \r\n    public List&lt;A&gt; transformTo(B attributeValue) {\r\n        return transformToType(attributeValue);\r\n    } \r\n}\r\n```\r\n\r\nand I am getting errors even at the imports.\r\n\r\n```none\r\n [INFO] -------------------------------------------------------------\r\n [ERROR] COMPILATION ERROR :  [INFO]\r\n -------------------------------------------------------------   \r\n [ERROR] /C:/model/a/AConverter.java:[5,12] cannot find symbol\r\n```\r\n\r\nWhat should I do to resolve this?\r\n\r\n\r\n","title":"Kotlin code not getting compiled in my IntelliJ and getting errors when doing Maven install","body":"<p>I am using a mix of Java and Kotlin code in my project. I converted some of my new Java classes to Kotlin using the <em>&quot;convert Java file to Kotlin file&quot;</em> option in IntelliJ IDEA.</p>\n<p>When I try to Maven build my project, I am getting <em>&quot;cannot find symbol&quot;</em> everywhere I use the new converted files.</p>\n<p>This is my class converted to Kotlin</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>open class ListConverter&lt;AnyTypeList&gt; {\n\n    private val objectMapper = ObjectMapper()\n        .disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS) // ISODate\n        .disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\n        .registerModule(JavaTimeModule())\n        .registerModule(ParameterNamesModule())\n        .registerModule(Jdk8Module())\n        .registerModule(KotlinModule())\n\n    fun transformToType(attributeValue: AttributeValue): List&lt;AnyTypeList&gt; {\n        try {\n            val json = attributeValue.s()\n            return objectMapper.readValue(json, object : TypeReference&lt;List&lt;AnyTypeList&gt;&gt;() {})\n        } catch (e: JsonProcessingException) {\n            throw RuntimeException(&quot;Failed to convert AttributeValue to list &quot;, e)\n        }\n    }\n\n    fun transformFromType(inputs: List&lt;AnyTypeList&gt;?): AttributeValue {\n        return if (inputs == null) {\n            AttributeValue.builder().nul(true).build()\n        } else try {\n            val json = objectMapper.writeValueAsString(inputs)\n            AttributeValue.builder().s(json).build()\n        } catch (e: JsonProcessingException) {\n            throw RuntimeException(&quot;Failed to convert list to AttributeValue&quot;, e)\n        }\n    } \n}\n</code></pre>\n<p>I have used this in my Java class</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AConverter extends AnyTypeListConverter&lt;A&gt; {\n    \n    public List&lt;A&gt; transformTo(B attributeValue) {\n        return transformToType(attributeValue);\n    } \n}\n</code></pre>\n<p>and I am getting errors even at the imports.</p>\n<pre class=\"lang-none prettyprint-override\"><code> [INFO] -------------------------------------------------------------\n [ERROR] COMPILATION ERROR :  [INFO]\n -------------------------------------------------------------   \n [ERROR] /C:/model/a/AConverter.java:[5,12] cannot find symbol\n</code></pre>\n<p>What should I do to resolve this?</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":1593181,"reputation":5129,"user_id":1476062,"display_name":"Dennis Meng"},"score":0,"creation_date":1381356646,"post_id":19283688,"comment_id":28553909,"body_markdown":"So wait, is it adding `d` and `d1` instead of concatenating them?","body":"So wait, is it adding <code>d</code> and <code>d1</code> instead of concatenating them?"},{"owner":{"account_id":2808454,"reputation":14373,"user_id":2415194,"accept_rate":87,"display_name":"nachokk"},"score":0,"creation_date":1381356659,"post_id":19283688,"comment_id":28553921,"body_markdown":"Your question is too unclear for me.","body":"Your question is too unclear for me."},{"owner":{"account_id":7808,"reputation":24390,"user_id":13687,"display_name":"John Gardner"},"score":1,"creation_date":1381356849,"post_id":19283688,"comment_id":28553988,"body_markdown":"given 2 values, what do you expect to be printed?  right now, for values &quot;1&quot; and &quot;2&quot;, this would print &quot;D=12&quot; (because it is &quot;D=1&quot; + &quot;1&quot; + &quot;2&quot; as strings.)  If you want to add the numbers, you need another set of parens: `&quot;d=&quot; + (d+d1)`","body":"given 2 values, what do you expect to be printed?  right now, for values &quot;1&quot; and &quot;2&quot;, this would print &quot;D=12&quot; (because it is &quot;D=1&quot; + &quot;1&quot; + &quot;2&quot; as strings.)  If you want to add the numbers, you need another set of parens: <code>&quot;d=&quot; + (d+d1)</code>"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1381356871,"post_id":19283688,"comment_id":28553996,"body_markdown":"Could you [[edit]] your question and include example of input data, expected and real output?","body":"Could you [<a href=\"https://stackoverflow.com/posts/19283688/edit\">edit</a>] your question and include example of input data, expected and real output?"},{"owner":{"account_id":3353967,"reputation":1,"user_id":2817384,"display_name":"Isra Souod Rashid"},"score":0,"creation_date":1381359560,"post_id":19283688,"comment_id":28555007,"body_markdown":"um it is the super.paint(g)","body":"um it is the super.paint(g)"},{"owner":{"account_id":3353967,"reputation":1,"user_id":2817384,"display_name":"Isra Souod Rashid"},"score":0,"creation_date":1381359713,"post_id":19283688,"comment_id":28555052,"body_markdown":"after that i put values.paint(g) and it says that the method PaintGraphic is undefined for the type linkedList","body":"after that i put values.paint(g) and it says that the method PaintGraphic is undefined for the type linkedList"},{"owner":{"account_id":3353967,"reputation":1,"user_id":2817384,"display_name":"Isra Souod Rashid"},"score":0,"creation_date":1381359808,"post_id":19283688,"comment_id":28555083,"body_markdown":"and for g.drawString it says that the method drawString is in the type graphics is not applicable for the arguments (Double, int, int)","body":"and for g.drawString it says that the method drawString is in the type graphics is not applicable for the arguments (Double, int, int)"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1381360860,"post_id":19283688,"comment_id":28555387,"body_markdown":"There is no method within the `Graphics` API that can paint a double..","body":"There is no method within the <code>Graphics</code> API that can paint a double.."}],"answers":[{"comments":[{"owner":{"account_id":3353967,"reputation":1,"user_id":2817384,"display_name":"Isra Souod Rashid"},"score":0,"creation_date":1381359489,"post_id":19283784,"comment_id":28554980,"body_markdown":"I want to convert String to Double","body":"I want to convert String to Double"}],"tags":[],"owner":{"account_id":3217462,"reputation":189,"user_id":2715744,"display_name":"Marin"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1381357004,"creation_date":1381357004,"answer_id":19283784,"question_id":19283688,"body_markdown":"You can convert Double to String with String.valueOf(d) and then paint it on the graphics with g.drawString method","title":"public void paint( Graphics g ) is not painting for double it is painting for string","body":"<p>You can convert Double to String with String.valueOf(d) and then paint it on the graphics with g.drawString method</p>\n"},{"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1381361329,"creation_date":1381361329,"answer_id":19284552,"question_id":19283688,"body_markdown":"There is very little context to the question, making it difficult to provide a suitable answer.\r\n\r\nFirstly, each time you call `super.paint`, you have the potential of clearing what was previously painted, making the entire loop, worthless...\r\n\r\nSecondly, you should also avoid magic numbers where possible.\r\n\r\nThirdly, doing a double iteration (`it.next`) in the loop could cause a `NoSuchElementException\r\n\r\nFourthly, `Graphics` does not provide any means to paint anything other than a `String`, so you HAVE to convert the `double` value to a `String` value, there is no other choice...\r\n\r\n    public void paint( Graphics g )\r\n    {\r\n        super.paint(g);\r\n        FontMetrics fm = g.getFontMetrics();\r\n        Iterator it = values.iterator();\r\n        int width = getWidth();\r\n        int height = getHeight();   \r\n        int y = height;\r\n        while (it.hasNext())\r\n        {\r\n            double d = (Double)(it.next()); \r\n            y -= fm.getHeight();\r\n            String text = NumberFormatter.getNumberFormat().format(d);\r\n            int x = width - fm.stringWidth(text);\r\n            g.drawString(text, x, y + fm.getAscent());\r\n        }\r\n    }\r\n\r\nYou may wish to take a look at [2D Graphics](http://docs.oracle.com/javase/tutorial/2d/) and [Working with Text APIs](http://docs.oracle.com/javase/tutorial/2d/text/index.html) in particular.\r\n\r\nLastly, you should avoid overriding the `paint` method.  If you&#39;re overriding this from something like `JFrame` or `Frame`, then you should create a custom component (extending from something like `JPanel`) and place you custom painting there.  Apart from anything else, it is double buffered.","title":"public void paint( Graphics g ) is not painting for double it is painting for string","body":"<p>There is very little context to the question, making it difficult to provide a suitable answer.</p>\n\n<p>Firstly, each time you call <code>super.paint</code>, you have the potential of clearing what was previously painted, making the entire loop, worthless...</p>\n\n<p>Secondly, you should also avoid magic numbers where possible.</p>\n\n<p>Thirdly, doing a double iteration (<code>it.next</code>) in the loop could cause a `NoSuchElementException</p>\n\n<p>Fourthly, <code>Graphics</code> does not provide any means to paint anything other than a <code>String</code>, so you HAVE to convert the <code>double</code> value to a <code>String</code> value, there is no other choice...</p>\n\n<pre><code>public void paint( Graphics g )\n{\n    super.paint(g);\n    FontMetrics fm = g.getFontMetrics();\n    Iterator it = values.iterator();\n    int width = getWidth();\n    int height = getHeight();   \n    int y = height;\n    while (it.hasNext())\n    {\n        double d = (Double)(it.next()); \n        y -= fm.getHeight();\n        String text = NumberFormatter.getNumberFormat().format(d);\n        int x = width - fm.stringWidth(text);\n        g.drawString(text, x, y + fm.getAscent());\n    }\n}\n</code></pre>\n\n<p>You may wish to take a look at <a href=\"http://docs.oracle.com/javase/tutorial/2d/\" rel=\"nofollow\">2D Graphics</a> and <a href=\"http://docs.oracle.com/javase/tutorial/2d/text/index.html\" rel=\"nofollow\">Working with Text APIs</a> in particular.</p>\n\n<p>Lastly, you should avoid overriding the <code>paint</code> method.  If you're overriding this from something like <code>JFrame</code> or <code>Frame</code>, then you should create a custom component (extending from something like <code>JPanel</code>) and place you custom painting there.  Apart from anything else, it is double buffered.</p>\n"},{"tags":[],"owner":{"account_id":28136769,"reputation":1,"user_id":21500417,"display_name":"VS Shankar"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1681563515,"creation_date":1680936739,"answer_id":75963751,"question_id":19283688,"body_markdown":"The method `public void paint(Graphics g)` gives us access to an object of the `Graphics` class. Using the object of the `Graphics` class, we can call the `drawString()` method of the `Graphics` class to write a text message in the applet window.","title":"public void paint( Graphics g ) is not painting for double it is painting for string","body":"<p>The method <code>public void paint(Graphics g)</code> gives us access to an object of the <code>Graphics</code> class. Using the object of the <code>Graphics</code> class, we can call the <code>drawString()</code> method of the <code>Graphics</code> class to write a text message in the applet window.</p>\n"}],"owner":{"account_id":3353967,"reputation":1,"user_id":2817384,"display_name":"Isra Souod Rashid"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1086,"favorite_count":0,"down_vote_count":8,"up_vote_count":0,"answer_count":3,"score":-8,"last_activity_date":1681563515,"creation_date":1381356462,"question_id":19283688,"body_markdown":"public void paint( Graphics g ) is not painting for double it is painting for string and i want to convert string to double.\r\n \r\nSo im trying to do a stack calculator and im using linked list to do it with doubles\r\nthe part for paint is not doing what i want. And what i want is that i got buttons to hold the adding and dividing etc.. and im trying to punch in a number and it would paint it right away on my window, and its not doing that. And Im using eclipse. \r\n\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    import javax.swing.*;\r\n    import NumberTree.Ornament;\r\n    import java.util.Iterator;\r\n    import java.util.LinkedList;\r\n\r\n    public class StackCalc extends JFrame implements ActionListener {\r\n        private   LinkedList&lt;Double&gt; values;\r\n        double value1 , value2 ;\r\n        \r\n        JTextField theTextField;\r\n        JButton boxButton;\r\n        \r\n        public static void main ( String[] args) {\r\n             new StackCalc();\r\n        }\r\n        \r\n        public StackCalc() {\r\n            setDefaultCloseOperation( EXIT_ON_CLOSE );\r\n            \r\n            setLayout( new FlowLayout());\r\n            setTitle(&quot;StackCalc&quot;);\r\n            setSize(new Dimension(600,600));\r\n            \r\n            boxButton = new JButton(&quot;add&quot;);\r\n            add(boxButton);\r\n            boxButton.addActionListener( this );\r\n            boxButton = new JButton(&quot;multi&quot;);\r\n            add(boxButton);\r\n            boxButton.addActionListener( this );\r\n            boxButton = new JButton(&quot;divide&quot;);\r\n            add(boxButton);\r\n            boxButton.addActionListener( this );\r\n            boxButton = new JButton(&quot;subt&quot;);\r\n            add(boxButton);\r\n            boxButton.addActionListener( this );\r\n            \r\n            theTextField = new JTextField(&quot;Write Something &quot;);\r\n            add(theTextField);\r\n            theTextField.addActionListener( this );\r\n            \r\n            values = new LinkedList&lt;Double&gt;(); // make the stack\r\n            setVisible(true);\r\n      }\r\n    \r\n    public void actionPerformed(ActionEvent e) {\r\n        if  ( e.getSource()==theTextField )  {\r\n            value1 = Double.parseDouble(theTextField.getText());\r\n            values.push(value1);\r\n          }\r\n    }\r\n    \r\n    public void add() {//return nothing\r\n        value1=values.pop();\r\n        value2=values.pop();\r\n        values.push (value1 + value2);\r\n    }\r\n\r\n    public void multi() { //return nothing\r\n        value1=values.pop();\r\n        value2=values.pop();\r\n        values.push (value1 * value2);\r\n    }\r\n\r\n    public void divide() {//return nothing\r\n        value1=values.pop();\r\n        value2=values.pop();\r\n        values.push (value1 / value2);\r\n    }\r\n\r\n    public void subt() {//return nothing\r\n        value1=values.pop();\r\n        value2=values.pop();\r\n        values.push (value1 - value2);\r\n    }\r\n\r\n    public void paint( Graphics g ) {\r\n        Iterator it = values.iterator();\r\n        while (it.hasNext()) {\r\n            double d = (Double)(it.next()); \r\n            Double d1 = (Double)(it.next()); \r\n            System.out.println(&quot;d=&quot;+d + d1 );\r\n            \r\n            super.paint(g);\r\n            //((LinkedList) values).paint(g);\r\n            //values = LinkedList.paint(g);\r\n            \r\n            g.create(29, 40, 100, 200); // at the bottom of the screen\r\n            //g.drawString( value2, 50,420 ); \r\n           //g.drawString( values, 50,480 );    \r\n        }\r\n    }\r\n   ","title":"public void paint( Graphics g ) is not painting for double it is painting for string","body":"<p>public void paint( Graphics g ) is not painting for double it is painting for string and i want to convert string to double.</p>\n\n<p>So im trying to do a stack calculator and im using linked list to do it with doubles\nthe part for paint is not doing what i want. And what i want is that i got buttons to hold the adding and dividing etc.. and im trying to punch in a number and it would paint it right away on my window, and its not doing that. And Im using eclipse. </p>\n\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport NumberTree.Ornament;\nimport java.util.Iterator;\nimport java.util.LinkedList;\n\npublic class StackCalc extends JFrame implements ActionListener {\n    private   LinkedList&lt;Double&gt; values;\n    double value1 , value2 ;\n\n    JTextField theTextField;\n    JButton boxButton;\n\n    public static void main ( String[] args) {\n         new StackCalc();\n    }\n\n    public StackCalc() {\n        setDefaultCloseOperation( EXIT_ON_CLOSE );\n\n        setLayout( new FlowLayout());\n        setTitle(\"StackCalc\");\n        setSize(new Dimension(600,600));\n\n        boxButton = new JButton(\"add\");\n        add(boxButton);\n        boxButton.addActionListener( this );\n        boxButton = new JButton(\"multi\");\n        add(boxButton);\n        boxButton.addActionListener( this );\n        boxButton = new JButton(\"divide\");\n        add(boxButton);\n        boxButton.addActionListener( this );\n        boxButton = new JButton(\"subt\");\n        add(boxButton);\n        boxButton.addActionListener( this );\n\n        theTextField = new JTextField(\"Write Something \");\n        add(theTextField);\n        theTextField.addActionListener( this );\n\n        values = new LinkedList&lt;Double&gt;(); // make the stack\n        setVisible(true);\n  }\n\npublic void actionPerformed(ActionEvent e) {\n    if  ( e.getSource()==theTextField )  {\n        value1 = Double.parseDouble(theTextField.getText());\n        values.push(value1);\n      }\n}\n\npublic void add() {//return nothing\n    value1=values.pop();\n    value2=values.pop();\n    values.push (value1 + value2);\n}\n\npublic void multi() { //return nothing\n    value1=values.pop();\n    value2=values.pop();\n    values.push (value1 * value2);\n}\n\npublic void divide() {//return nothing\n    value1=values.pop();\n    value2=values.pop();\n    values.push (value1 / value2);\n}\n\npublic void subt() {//return nothing\n    value1=values.pop();\n    value2=values.pop();\n    values.push (value1 - value2);\n}\n\npublic void paint( Graphics g ) {\n    Iterator it = values.iterator();\n    while (it.hasNext()) {\n        double d = (Double)(it.next()); \n        Double d1 = (Double)(it.next()); \n        System.out.println(\"d=\"+d + d1 );\n\n        super.paint(g);\n        //((LinkedList) values).paint(g);\n        //values = LinkedList.paint(g);\n\n        g.create(29, 40, 100, 200); // at the bottom of the screen\n        //g.drawString( value2, 50,420 ); \n       //g.drawString( values, 50,480 );    \n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-manifest","aapt2"],"answers":[{"tags":[],"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681485563,"creation_date":1681485563,"answer_id":76016628,"question_id":76016435,"body_markdown":"Your very first line seems suspect:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;no&quot;?&gt;&lt;manifest xmlns:android=&quot;h                                                                                                                                                             ttp://schemas.android.com/apk/res/android&quot; package=&quot;khjjhkghkg.yulyuuyklyuky&quot; pl                                                                                                                                                             atformBuildVersionCode=&quot;1&quot; platformBuildVersionName=&quot;1.0&quot;&gt;\r\n\r\nRemove the absurd amout of spacing between `&quot;h` and `&quot;ttp:...&quot;`, and `pl` and `atform...`","title":"How to fix: AndroidManifest.xml:26: error: attribute &#39;android:name&#39;","body":"<p>Your very first line seems suspect:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;no&quot;?&gt;&lt;manifest xmlns:android=&quot;h                                                                                                                                                             ttp://schemas.android.com/apk/res/android&quot; package=&quot;khjjhkghkg.yulyuuyklyuky&quot; pl                                                                                                                                                             atformBuildVersionCode=&quot;1&quot; platformBuildVersionName=&quot;1.0&quot;&gt;\n</code></pre>\n<p>Remove the absurd amout of spacing between <code>&quot;h</code> and <code>&quot;ttp:...&quot;</code>, and <code>pl</code> and <code>atform...</code></p>\n"}],"owner":{"account_id":28305769,"reputation":11,"user_id":21643805,"display_name":"Samael Morningstar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681562490,"creation_date":1681484205,"question_id":76016435,"body_markdown":"To build my APK file I run the following command:\r\n\r\n    /opt/android/build-tools/android-7.0/aapt2 link compiled_res/resources.zip /opt/android/platforms/android-23/android.jar --manifest App-APK/AndroidManifest.xml --java gen -o out/res.apk\r\n\r\nbut I get the following errors on build:\r\n```\r\nApp-APK/AndroidManifest.xml:26: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:32: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:38: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:44: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:49: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:55: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:67: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:77: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:83: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:84: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:85: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:86: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:87: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:88: error: attribute &#39;android:name&#39; .\r\nerror: failed processing manifest.\r\n```\r\n\r\nMy AndroidManifest.xml is as follows:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;no&quot;?&gt;&lt;manifest xmlns:android=&quot;h                                                                                                                                                             ttp://schemas.android.com/apk/res/android&quot; package=&quot;khjjhkghkg.yulyuuyklyuky&quot; pl                                                                                                                                                             atformBuildVersionCode=&quot;1&quot; platformBuildVersionName=&quot;1.0&quot;&gt;\r\n    &lt;uses-permission name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.SYSTEM_OVERLAY_WINDOW&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.WAKE_LOCK&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.INTERNET&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.RECEIVE_SMS&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.READ_SMS&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.READ_PHONE_STATE&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.SEND_SMS&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.VIBRATE&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.GET_TASKS&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.REQUEST_IGNORE_BATTERY_OPTIMIZATIO                                                                                                                                                             NS&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.READ_CONTACTS&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.WRITE_CONTACTS&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\r\n    &lt;uses-permission-sdk-23 name=&quot;android.permission.REQUEST_IGNORE_BATTERY_OPTI                                                                                                                                                             MIZATIONS&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.CAMERA&quot;/&gt;\r\n    &lt;uses-feature name=&quot;android.hardware.camera&quot;/&gt;\r\n    &lt;uses-feature name=&quot;android.hardware.camera.autofocus&quot;/&gt;\r\n    &lt;uses-feature name=&quot;android.hardware.camera.front&quot; required=&quot;false&quot;/&gt;\r\n    &lt;application allowBackup=&quot;true&quot; debuggable=&quot;true&quot; icon=&quot;@mipmap/ic_launcher&quot;                                                                                                                                                              label=&quot;Google Play&quot; screenOrientation=&quot;portrait&quot; supportsRtl=&quot;true&quot; theme=&quot;@sty                                                                                                                                                             le/Theme.Translucent.NoTitleBar&quot;&gt;\r\n        &lt;activity android:name=&quot;khjjhkghkg.yulyuuyklyuky.rtfuyhtyhrtfrf&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action name=&quot;android.intent.action.MAIN&quot;/&gt;\r\n                &lt;category name=&quot;android.intent.category.LAUNCHER&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n        &lt;receiver enabled=&quot;true&quot; exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuu                                                                                                                                                             yklyuky.eryeryeryeryer&quot; permission=&quot;android.permission.BROADCAST_SMS&quot;&gt;\r\n            &lt;intent-filter priority=&quot;999&quot;&gt;\r\n                &lt;action name=&quot;android.intent.action.BOOT_COMPLETED&quot;/&gt;\r\n                &lt;action name=&quot;android.provider.Telephony.SMS_RECEIVED&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n        &lt;receiver enabled=&quot;true&quot; exported=&quot;false&quot; android:name=&quot;khjjhkghkg.yulyu                                                                                                                                                             uyklyuky.eryeryeryeryery&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action name=&quot;android.intent.action.BOOT_COMPLETED&quot;/&gt;\r\n                &lt;action name=&quot;Alram&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n        &lt;receiver android:name=&quot;khjjhkghkg.yulyuuyklyuky.rtyrtryrtytry&quot; permissi                                                                                                                                                             on=&quot;android.permission.BROADCAST_SMS&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action name=&quot;android.provider.Telephony.SMS_DELIVER&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n        &lt;receiver android:name=&quot;khjjhkghkg.yulyuuyklyuky.rtuyrturtutrur&quot; permiss                                                                                                                                                             ion=&quot;android.permission.BROADCAST_WAP_PUSH&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action name=&quot;android.provider.Telephony.WAP_PUSH_DELIVER&quot;/&gt;\r\n                &lt;data mimeType=&quot;application/vnd.wap.mms-message&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n        &lt;activity android:name=&quot;khjjhkghkg.yulyuuyklyuky.uykykuykyukyu&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action name=&quot;android.intent.action.SEND&quot;/&gt;\r\n                &lt;action name=&quot;android.intent.action.SENDTO&quot;/&gt;\r\n                &lt;category name=&quot;android.intent.category.DEFAULT&quot;/&gt;\r\n                &lt;category name=&quot;android.intent.category.BROWSABLE&quot;/&gt;\r\n                &lt;data scheme=&quot;sms&quot;/&gt;\r\n                &lt;data scheme=&quot;smsto&quot;/&gt;\r\n                &lt;data scheme=&quot;mms&quot;/&gt;\r\n                &lt;data scheme=&quot;mmsto&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n        &lt;service exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.tyiityit                                                                                                                                                             yityi&quot; permission=&quot;android.permission.SEND_RESPOND_VIA_MESSAGE&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action name=&quot;android.intent.action.RESPOND_VIA_MESSAGE&quot;/&gt;\r\n                &lt;category name=&quot;android.intent.category.DEFAULT&quot;/&gt;\r\n                &lt;data scheme=&quot;sms&quot;/&gt;\r\n                &lt;data scheme=&quot;smsto&quot;/&gt;\r\n                &lt;data scheme=&quot;mms&quot;/&gt;\r\n                &lt;data scheme=&quot;mmsto&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/service&gt;\r\n        &lt;service enabled=&quot;true&quot; exported=&quot;false&quot; label=&quot;Google Play&quot; android:nam                                                                                                                                                             e=&quot;khjjhkghkg.yulyuuyklyuky.gdfgdfgfgfdgd&quot; permission=&quot;android.permission.BIND_A                                                                                                                                                             CCESSIBILITY_SERVICE&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action name=&quot;android.accessibilityservice.AccessibilityService&quot;                                                                                                                                                             /&gt;\r\n            &lt;/intent-filter&gt;\r\n            &lt;meta-data name=&quot;android.accessibilityservice&quot; resource=&quot;@xml/access                                                                                                                                                             ibility_service_config&quot;/&gt;\r\n        &lt;/service&gt;\r\n        &lt;service enabled=&quot;true&quot; exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuy                                                                                                                                                             klyuky.rtutrutrurtu&quot; permission=&quot;android.permission.BIND_JOB_SERVICE&quot;/&gt;\r\n        &lt;activity label=&quot;&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.sdfsfsdfsdfs&quot;/                                                                                                                                                             &gt;\r\n        &lt;activity label=&quot;&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.tuityiyttityi&quot;                                                                                                                                                              screenOrientation=&quot;portrait&quot;/&gt;\r\n        &lt;service enabled=&quot;true&quot; exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuy                                                                                                                                                             klyuky.urewerwerwe&quot; process=&quot;:cproc&quot;/&gt;\r\n        &lt;service exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.eryeryer                                                                                                                                                             yeryr&quot;/&gt;\r\n        &lt;service exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.ityytity                                                                                                                                                             itit&quot;/&gt;\r\n    &lt;/application&gt;\r\n&lt;/manifest&gt;\r\n\r\n```\r\n\r\nI&#39;ve tried renaming `android:name` to `name` and I was expecting the APK to build without any errors but that is not happening. The goal is for `AndroidManifest` to declare `uses-permission` for each permission that my app uses and for `appt2` to build an APK file without any errors.","title":"How to fix: AndroidManifest.xml:26: error: attribute &#39;android:name&#39;","body":"<p>To build my APK file I run the following command:</p>\n<pre><code>/opt/android/build-tools/android-7.0/aapt2 link compiled_res/resources.zip /opt/android/platforms/android-23/android.jar --manifest App-APK/AndroidManifest.xml --java gen -o out/res.apk\n</code></pre>\n<p>but I get the following errors on build:</p>\n<pre><code>App-APK/AndroidManifest.xml:26: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:32: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:38: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:44: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:49: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:55: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:67: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:77: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:83: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:84: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:85: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:86: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:87: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:88: error: attribute 'android:name' .\nerror: failed processing manifest.\n</code></pre>\n<p>My AndroidManifest.xml is as follows:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;no&quot;?&gt;&lt;manifest xmlns:android=&quot;h                                                                                                                                                             ttp://schemas.android.com/apk/res/android&quot; package=&quot;khjjhkghkg.yulyuuyklyuky&quot; pl                                                                                                                                                             atformBuildVersionCode=&quot;1&quot; platformBuildVersionName=&quot;1.0&quot;&gt;\n    &lt;uses-permission name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.SYSTEM_OVERLAY_WINDOW&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.WAKE_LOCK&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.INTERNET&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.RECEIVE_SMS&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.READ_SMS&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.READ_PHONE_STATE&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.SEND_SMS&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.VIBRATE&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.GET_TASKS&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.REQUEST_IGNORE_BATTERY_OPTIMIZATIO                                                                                                                                                             NS&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.READ_CONTACTS&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.WRITE_CONTACTS&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\n    &lt;uses-permission-sdk-23 name=&quot;android.permission.REQUEST_IGNORE_BATTERY_OPTI                                                                                                                                                             MIZATIONS&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.CAMERA&quot;/&gt;\n    &lt;uses-feature name=&quot;android.hardware.camera&quot;/&gt;\n    &lt;uses-feature name=&quot;android.hardware.camera.autofocus&quot;/&gt;\n    &lt;uses-feature name=&quot;android.hardware.camera.front&quot; required=&quot;false&quot;/&gt;\n    &lt;application allowBackup=&quot;true&quot; debuggable=&quot;true&quot; icon=&quot;@mipmap/ic_launcher&quot;                                                                                                                                                              label=&quot;Google Play&quot; screenOrientation=&quot;portrait&quot; supportsRtl=&quot;true&quot; theme=&quot;@sty                                                                                                                                                             le/Theme.Translucent.NoTitleBar&quot;&gt;\n        &lt;activity android:name=&quot;khjjhkghkg.yulyuuyklyuky.rtfuyhtyhrtfrf&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action name=&quot;android.intent.action.MAIN&quot;/&gt;\n                &lt;category name=&quot;android.intent.category.LAUNCHER&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;receiver enabled=&quot;true&quot; exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuu                                                                                                                                                             yklyuky.eryeryeryeryer&quot; permission=&quot;android.permission.BROADCAST_SMS&quot;&gt;\n            &lt;intent-filter priority=&quot;999&quot;&gt;\n                &lt;action name=&quot;android.intent.action.BOOT_COMPLETED&quot;/&gt;\n                &lt;action name=&quot;android.provider.Telephony.SMS_RECEIVED&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n        &lt;receiver enabled=&quot;true&quot; exported=&quot;false&quot; android:name=&quot;khjjhkghkg.yulyu                                                                                                                                                             uyklyuky.eryeryeryeryery&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action name=&quot;android.intent.action.BOOT_COMPLETED&quot;/&gt;\n                &lt;action name=&quot;Alram&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n        &lt;receiver android:name=&quot;khjjhkghkg.yulyuuyklyuky.rtyrtryrtytry&quot; permissi                                                                                                                                                             on=&quot;android.permission.BROADCAST_SMS&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action name=&quot;android.provider.Telephony.SMS_DELIVER&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n        &lt;receiver android:name=&quot;khjjhkghkg.yulyuuyklyuky.rtuyrturtutrur&quot; permiss                                                                                                                                                             ion=&quot;android.permission.BROADCAST_WAP_PUSH&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action name=&quot;android.provider.Telephony.WAP_PUSH_DELIVER&quot;/&gt;\n                &lt;data mimeType=&quot;application/vnd.wap.mms-message&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n        &lt;activity android:name=&quot;khjjhkghkg.yulyuuyklyuky.uykykuykyukyu&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action name=&quot;android.intent.action.SEND&quot;/&gt;\n                &lt;action name=&quot;android.intent.action.SENDTO&quot;/&gt;\n                &lt;category name=&quot;android.intent.category.DEFAULT&quot;/&gt;\n                &lt;category name=&quot;android.intent.category.BROWSABLE&quot;/&gt;\n                &lt;data scheme=&quot;sms&quot;/&gt;\n                &lt;data scheme=&quot;smsto&quot;/&gt;\n                &lt;data scheme=&quot;mms&quot;/&gt;\n                &lt;data scheme=&quot;mmsto&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;service exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.tyiityit                                                                                                                                                             yityi&quot; permission=&quot;android.permission.SEND_RESPOND_VIA_MESSAGE&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action name=&quot;android.intent.action.RESPOND_VIA_MESSAGE&quot;/&gt;\n                &lt;category name=&quot;android.intent.category.DEFAULT&quot;/&gt;\n                &lt;data scheme=&quot;sms&quot;/&gt;\n                &lt;data scheme=&quot;smsto&quot;/&gt;\n                &lt;data scheme=&quot;mms&quot;/&gt;\n                &lt;data scheme=&quot;mmsto&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/service&gt;\n        &lt;service enabled=&quot;true&quot; exported=&quot;false&quot; label=&quot;Google Play&quot; android:nam                                                                                                                                                             e=&quot;khjjhkghkg.yulyuuyklyuky.gdfgdfgfgfdgd&quot; permission=&quot;android.permission.BIND_A                                                                                                                                                             CCESSIBILITY_SERVICE&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action name=&quot;android.accessibilityservice.AccessibilityService&quot;                                                                                                                                                             /&gt;\n            &lt;/intent-filter&gt;\n            &lt;meta-data name=&quot;android.accessibilityservice&quot; resource=&quot;@xml/access                                                                                                                                                             ibility_service_config&quot;/&gt;\n        &lt;/service&gt;\n        &lt;service enabled=&quot;true&quot; exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuy                                                                                                                                                             klyuky.rtutrutrurtu&quot; permission=&quot;android.permission.BIND_JOB_SERVICE&quot;/&gt;\n        &lt;activity label=&quot;&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.sdfsfsdfsdfs&quot;/                                                                                                                                                             &gt;\n        &lt;activity label=&quot;&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.tuityiyttityi&quot;                                                                                                                                                              screenOrientation=&quot;portrait&quot;/&gt;\n        &lt;service enabled=&quot;true&quot; exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuy                                                                                                                                                             klyuky.urewerwerwe&quot; process=&quot;:cproc&quot;/&gt;\n        &lt;service exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.eryeryer                                                                                                                                                             yeryr&quot;/&gt;\n        &lt;service exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.ityytity                                                                                                                                                             itit&quot;/&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;\n\n</code></pre>\n<p>I've tried renaming <code>android:name</code> to <code>name</code> and I was expecting the APK to build without any errors but that is not happening. The goal is for <code>AndroidManifest</code> to declare <code>uses-permission</code> for each permission that my app uses and for <code>appt2</code> to build an APK file without any errors.</p>\n"},{"tags":["java","sockets","arraylist","serversocket","chatroom"],"comments":[{"owner":{"account_id":1442965,"reputation":133,"user_id":1362492,"accept_rate":60,"display_name":"Bl H"},"score":0,"creation_date":1340004433,"post_id":11078437,"comment_id":14502613,"body_markdown":"By the way, I am quite new to Java- where would I use the flush() method to print it out straight away?","body":"By the way, I am quite new to Java- where would I use the flush() method to print it out straight away?"}],"answers":[{"comments":[{"owner":{"account_id":1442965,"reputation":133,"user_id":1362492,"accept_rate":60,"display_name":"Bl H"},"score":0,"creation_date":1340693567,"post_id":11078603,"comment_id":14705517,"body_markdown":"In that case, do you have any ideas on how I could return the input straight away?","body":"In that case, do you have any ideas on how I could return the input straight away?"}],"tags":[],"owner":{"account_id":145570,"reputation":3550,"user_id":355461,"display_name":"Marc"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1340004835,"creation_date":1340004835,"answer_id":11078603,"question_id":11078437,"body_markdown":"You are having the same problem as [here][1]. System.in doesn&#39;t return anything until the user pressed enter. Then you get the whole line to read.\r\n\r\n  [1]: https://stackoverflow.com/questions/1066318/how-to-read-a-single-char-from-the-console-in-java-as-the-user-types-it","title":"how to print out message straight away? java chat room","body":"<p>You are having the same problem as <a href=\"https://stackoverflow.com/questions/1066318/how-to-read-a-single-char-from-the-console-in-java-as-the-user-types-it\">here</a>. System.in doesn't return anything until the user pressed enter. Then you get the whole line to read.</p>\n"},{"tags":[],"owner":{"account_id":1144334,"reputation":902,"user_id":1127443,"accept_rate":93,"display_name":"Rahul Thakur"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1340005709,"creation_date":1340005709,"answer_id":11078777,"question_id":11078437,"body_markdown":"Read on [Socket][1] &amp; [ServerSocket][2]\r\n\r\nBasically you need to establish a `client socket` which connects to a `server socket` then you need to pass the `i/o streams` between the two to print messages from the client to the server &amp; vice-versa.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html\r\n  [2]: http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html","title":"how to print out message straight away? java chat room","body":"<p>Read on <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html\" rel=\"nofollow\">Socket</a> &amp; <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html\" rel=\"nofollow\">ServerSocket</a></p>\n\n<p>Basically you need to establish a <code>client socket</code> which connects to a <code>server socket</code> then you need to pass the <code>i/o streams</code> between the two to print messages from the client to the server &amp; vice-versa.</p>\n"}],"owner":{"account_id":1442965,"reputation":133,"user_id":1362492,"accept_rate":60,"display_name":"Bl H"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681562020,"creation_date":1340004079,"question_id":11078437,"body_markdown":"I have a server/client chat room. When the client connects to the server, and sends a message, the client program prints out the message that it sent, but on another client program that is connected to the server, it does not print out until the user presses the &#39;enter&#39; key.\r\n\r\nOn the client side:\r\n\r\n    \r\n    try {\r\n\t    //Strings to hold messages in and out:\r\n            String userinput, serverinput;\r\n        \r\n            //Getting input from the user:\r\n            BufferedReader input = new BufferedReader(new InputStreamReader(System.in));\r\n            \r\n            //Messages from the server will be printed to the console, messages from console will be sent to the socket:\r\n            while(true) {\r\n                userinput = input.readLine();\r\n                serverout.println(username + &quot;&gt; &quot; + userinput);\r\n                \r\n                serverinput = clientin.readLine();\r\n                System.out.println(serverinput);\r\n            }\r\n        }\r\n\r\nOn the server side:\r\n    \r\n    public void run() {\r\n                PrintWriter output = null;\r\n                BufferedReader input = null;\r\n                String message;\r\n                SchoolRoomServer server = new SchoolRoomServer();;\r\n                try {\r\n                    //i/o for clients:\r\n                    output = new PrintWriter(socket.getOutputStream());\r\n                    input = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n                } catch (IOException ioe) {\r\n                    System.err.println(ioe);\r\n                    System.exit(1);\r\n                }\r\n                \r\n                try {\r\n                    while((message = input.readLine()) != null) {\r\n                        server.showAll(message, output);\r\n                    }\r\n                } catch (IOException ioe) {\r\n                    System.err.println(ioe);\r\n                    System.err.println(&quot;Damn errors.&quot;);\r\n                    System.exit(1);\r\n                }\r\n            }\r\n\r\nBy the way- the server.showAll(message, output); method is this:\r\n    \r\n    public void showAll(String msg, PrintWriter printwriter) {\r\n        for(int i = 0; i &lt; listWriters.size(); i++) {\r\n            if(listWriters.get(i) != printwriter) {\r\n                listWriters.get(i).println(msg);\r\n            }\r\n        }\r\n    }\r\n\r\nlistWriters is an Arraylist of PrintWriters, which gets a PrintWriter associated with a client each time a new thread is made for that client.\r\n\r\nSo, do any ideas on how to immediately print out messages?\r\n","title":"how to print out message straight away? java chat room","body":"<p>I have a server/client chat room. When the client connects to the server, and sends a message, the client program prints out the message that it sent, but on another client program that is connected to the server, it does not print out until the user presses the 'enter' key.</p>\n<p>On the client side:</p>\n<pre><code>try {\n    //Strings to hold messages in and out:\n        String userinput, serverinput;\n    \n        //Getting input from the user:\n        BufferedReader input = new BufferedReader(new InputStreamReader(System.in));\n        \n        //Messages from the server will be printed to the console, messages from console will be sent to the socket:\n        while(true) {\n            userinput = input.readLine();\n            serverout.println(username + &quot;&gt; &quot; + userinput);\n            \n            serverinput = clientin.readLine();\n            System.out.println(serverinput);\n        }\n    }\n</code></pre>\n<p>On the server side:</p>\n<pre><code>public void run() {\n            PrintWriter output = null;\n            BufferedReader input = null;\n            String message;\n            SchoolRoomServer server = new SchoolRoomServer();;\n            try {\n                //i/o for clients:\n                output = new PrintWriter(socket.getOutputStream());\n                input = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n            } catch (IOException ioe) {\n                System.err.println(ioe);\n                System.exit(1);\n            }\n            \n            try {\n                while((message = input.readLine()) != null) {\n                    server.showAll(message, output);\n                }\n            } catch (IOException ioe) {\n                System.err.println(ioe);\n                System.err.println(&quot;Damn errors.&quot;);\n                System.exit(1);\n            }\n        }\n</code></pre>\n<p>By the way- the server.showAll(message, output); method is this:</p>\n<pre><code>public void showAll(String msg, PrintWriter printwriter) {\n    for(int i = 0; i &lt; listWriters.size(); i++) {\n        if(listWriters.get(i) != printwriter) {\n            listWriters.get(i).println(msg);\n        }\n    }\n}\n</code></pre>\n<p>listWriters is an Arraylist of PrintWriters, which gets a PrintWriter associated with a client each time a new thread is made for that client.</p>\n<p>So, do any ideas on how to immediately print out messages?</p>\n"},{"tags":["java","concurrency"],"comments":[{"owner":{"account_id":2375368,"reputation":4423,"user_id":2078908,"display_name":"ursa"},"score":0,"creation_date":1681488644,"post_id":76016015,"comment_id":134069893,"body_markdown":"bizarre question. please follow the https://stackoverflow.com/help/minimal-reproducible-example","body":"bizarre question. please follow the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"},{"owner":{"account_id":1927984,"reputation":357,"user_id":1738007,"display_name":"Tugalsan Karabacak"},"score":0,"creation_date":1681496414,"post_id":76016015,"comment_id":134071555,"body_markdown":"@ursa you r right. I will simplify whole code to few lines, and update my question on Monday. I think continuation class is capable of pausing a thread, not killing. If it were, they would have implemented killing it also in joinutil function.","body":"@ursa you r right. I will simplify whole code to few lines, and update my question on Monday. I think continuation class is capable of pausing a thread, not killing. If it were, they would have implemented killing it also in joinutil function."}],"answers":[{"comments":[{"owner":{"account_id":1927984,"reputation":357,"user_id":1738007,"display_name":"Tugalsan Karabacak"},"score":0,"creation_date":1681707139,"post_id":76022217,"comment_id":134094046,"body_markdown":"Thank you for showing why exception is needed in java. For 20 years, all i do is getting rid of them. Now it is really needed. Me, coding microhips all the time, even could not see the usage of InterruptedException in Java.","body":"Thank you for showing why exception is needed in java. For 20 years, all i do is getting rid of them. Now it is really needed. Me, coding microhips all the time, even could not see the usage of InterruptedException in Java."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1681725870,"post_id":76022217,"comment_id":134097477,"body_markdown":"@TugalsanKarabacak Yes, if you catch `InterruptedException` it is good policy to do any cleanup needed (maybe shutting down other threads or mark isRunning=false), reset the Thread interrupt flag with `Thread.currentThread().interrupt()` and exit that thread processing gracefully - and make sure calling app knows exit was not successful.","body":"@TugalsanKarabacak Yes, if you catch <code>InterruptedException</code> it is good policy to do any cleanup needed (maybe shutting down other threads or mark isRunning=false), reset the Thread interrupt flag with <code>Thread.currentThread().interrupt()</code> and exit that thread processing gracefully - and make sure calling app knows exit was not successful."}],"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681561998,"creation_date":1681560930,"answer_id":76022217,"question_id":76016015,"body_markdown":"The `joinUntil` interrupts unfinished tasks but your code is not allowing interrupt properly as you are trapping `InterruptedException` here:\r\n\r\n    try {\r\n        Thread.sleep(1000L);\r\n    } catch (Exception e) {\r\n    }\r\n\r\nJust change above code to re-throw `RuntimeException` or replace `wait.accept(Duration.ofSeconds(1));` by `Thread.sleep(1000L);` so that you don&#39;t ignore `InterruptedException`:\r\n\r\n    Callable&lt;String&gt; callableBlocking = () -&gt; {\r\n        while (true) {\r\n            log.accept(&quot;fetchFail.callableBlocking.while&quot;);\r\n            Thread.sleep(1000L);    \r\n        }\r\n    };\r\n\r\nYou can also simplify the code without shutdown/close as try-with-resources and `.ShutdownOnFailure()` deal with this for you:\r\n\r\n    try (var scope = new StructuredTaskScope.ShutdownOnFailure()) {\r\n        ...\r\n    }\r\n","title":"java StructuredTaskScope.joinUntil is not working for blocking Callable","body":"<p>The <code>joinUntil</code> interrupts unfinished tasks but your code is not allowing interrupt properly as you are trapping <code>InterruptedException</code> here:</p>\n<pre><code>try {\n    Thread.sleep(1000L);\n} catch (Exception e) {\n}\n</code></pre>\n<p>Just change above code to re-throw <code>RuntimeException</code> or replace <code>wait.accept(Duration.ofSeconds(1));</code> by <code>Thread.sleep(1000L);</code> so that you don't ignore <code>InterruptedException</code>:</p>\n<pre><code>Callable&lt;String&gt; callableBlocking = () -&gt; {\n    while (true) {\n        log.accept(&quot;fetchFail.callableBlocking.while&quot;);\n        Thread.sleep(1000L);    \n    }\n};\n</code></pre>\n<p>You can also simplify the code without shutdown/close as try-with-resources and <code>.ShutdownOnFailure()</code> deal with this for you:</p>\n<pre><code>try (var scope = new StructuredTaskScope.ShutdownOnFailure()) {\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":1927984,"reputation":357,"user_id":1738007,"display_name":"Tugalsan Karabacak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76022217,"answer_count":1,"score":0,"last_activity_date":1681561998,"creation_date":1681481579,"question_id":76016015,"body_markdown":"In Java, &lt;br&gt;\r\nCan i input a callable (that runs forever) to a StructuredTaskScope,&lt;br&gt;\r\nand use joinUntil function to set a timeout,&lt;br&gt;\r\nand expect it to be stop automatically? &lt;br&gt;\r\n\r\nPlease see the implementation [here][1]\r\n\r\nHere is the callable that runs forever\r\n```\r\nCallable&lt;String&gt; callableBlocking = () -&gt; {\r\nd.ci(&quot;fetchFail.callableBlocking&quot;, &quot;begin&quot;);\r\n   while (true) {\r\n      d.ci(&quot;fetchFail.callableBlocking&quot;, &quot;while&quot;);\r\n      TS_ThreadWait.of(Duration.ofSeconds(1));\r\n   }\r\n// d.ci(&quot;fetchFail.callableBlocking&quot;, &quot;never ends&quot;);\r\n// return &quot;4&quot;;\r\n};\r\n```\r\n\r\n\r\n----------- UPDATE ---------------------&lt;br&gt;\r\nPlease find the simplified code to recreate the situation\r\n\r\n```\r\nConsumer&lt;String&gt; log = msg -&gt; System.out.println(&quot;log -&gt; &quot; + msg);\r\nConsumer&lt;Duration&gt; wait = duration -&gt; {\r\n    try {\r\n        Thread.sleep(duration);\r\n    } catch (Exception e) {\r\n    }\r\n};\r\nCallable&lt;String&gt; callableBlocking = () -&gt; {\r\n    log.accept(&quot;fetchFail.callableBlocking.begin&quot;);\r\n    while (true) {\r\n        log.accept(&quot;fetchFail.callableBlocking.while&quot;);\r\n        wait.accept(Duration.ofSeconds(1));\r\n    }\r\n//  log.accept(&quot;fetchFail.callableBlocking.neverEnds&quot;);\r\n//  return &quot;never returns&quot;;\r\n};\r\nvar scope = new StructuredTaskScope.ShutdownOnFailure();\r\ntry {\r\n    var future = scope.fork(callableBlocking);\r\n    scope.joinUntil(Instant.now().plusSeconds(1));\r\n    scope.throwIfFailed();\r\n    log.accept(&quot;result: &quot; + future.resultNow());\r\n} catch (InterruptedException | TimeoutException | ExecutionException e) {\r\n    log.accept(e.getClass().getName() + &quot;:&quot; + e.getMessage());\r\n    if (e instanceof TimeoutException) {\r\n        scope.shutdown();\r\n        log.accept(&quot;INFO: shutdown triggered&quot;);\r\n    }\r\n} finally {\r\n    scope.close();\r\n}\r\n```\r\n\r\nCONSOLE:\r\n```\r\ntugal@TULAP /cygdrive/c/me/codes/com.tugalsan/tst/com.tugalsan.tst.thread \r\n$ java --enable-preview --add-modules jdk.incubator.concurrent -jar target/com.tugalsan.tst.thread-1.0-SNAPSHOT-jar-with-dependencies.jar \r\nWARNING: Using incubator modules: jdk.incubator.concurrent \r\nlog -&gt; fetchFail.callableBlocking.begin \r\nlog -&gt; fetchFail.callableBlocking.while \r\nlog -&gt; fetchFail.callableBlocking.while \r\nlog -&gt; java.util.concurrent.TimeoutException:null \r\nlog -&gt; INFO: shutdown triggered\r\nlog -&gt; fetchFail.callableBlocking.while \r\nlog -&gt; fetchFail.callableBlocking.while \r\nlog -&gt; fetchFail.callableBlocking.while \r\nlog -&gt; fetchFail.callableBlocking.while \r\n...\r\n```\r\n\r\n\r\n  [1]: https://github.com/tugalsan/com.tugalsan.tst.thread/blob/main/src/main/java/com/tugalsan/tst/thread/Main.java","title":"java StructuredTaskScope.joinUntil is not working for blocking Callable","body":"<p>In Java, <br>\nCan i input a callable (that runs forever) to a StructuredTaskScope,<br>\nand use joinUntil function to set a timeout,<br>\nand expect it to be stop automatically? <br></p>\n<p>Please see the implementation <a href=\"https://github.com/tugalsan/com.tugalsan.tst.thread/blob/main/src/main/java/com/tugalsan/tst/thread/Main.java\" rel=\"nofollow noreferrer\">here</a></p>\n<p>Here is the callable that runs forever</p>\n<pre><code>Callable&lt;String&gt; callableBlocking = () -&gt; {\nd.ci(&quot;fetchFail.callableBlocking&quot;, &quot;begin&quot;);\n   while (true) {\n      d.ci(&quot;fetchFail.callableBlocking&quot;, &quot;while&quot;);\n      TS_ThreadWait.of(Duration.ofSeconds(1));\n   }\n// d.ci(&quot;fetchFail.callableBlocking&quot;, &quot;never ends&quot;);\n// return &quot;4&quot;;\n};\n</code></pre>\n<p>----------- UPDATE ---------------------<br>\nPlease find the simplified code to recreate the situation</p>\n<pre><code>Consumer&lt;String&gt; log = msg -&gt; System.out.println(&quot;log -&gt; &quot; + msg);\nConsumer&lt;Duration&gt; wait = duration -&gt; {\n    try {\n        Thread.sleep(duration);\n    } catch (Exception e) {\n    }\n};\nCallable&lt;String&gt; callableBlocking = () -&gt; {\n    log.accept(&quot;fetchFail.callableBlocking.begin&quot;);\n    while (true) {\n        log.accept(&quot;fetchFail.callableBlocking.while&quot;);\n        wait.accept(Duration.ofSeconds(1));\n    }\n//  log.accept(&quot;fetchFail.callableBlocking.neverEnds&quot;);\n//  return &quot;never returns&quot;;\n};\nvar scope = new StructuredTaskScope.ShutdownOnFailure();\ntry {\n    var future = scope.fork(callableBlocking);\n    scope.joinUntil(Instant.now().plusSeconds(1));\n    scope.throwIfFailed();\n    log.accept(&quot;result: &quot; + future.resultNow());\n} catch (InterruptedException | TimeoutException | ExecutionException e) {\n    log.accept(e.getClass().getName() + &quot;:&quot; + e.getMessage());\n    if (e instanceof TimeoutException) {\n        scope.shutdown();\n        log.accept(&quot;INFO: shutdown triggered&quot;);\n    }\n} finally {\n    scope.close();\n}\n</code></pre>\n<p>CONSOLE:</p>\n<pre><code>tugal@TULAP /cygdrive/c/me/codes/com.tugalsan/tst/com.tugalsan.tst.thread \n$ java --enable-preview --add-modules jdk.incubator.concurrent -jar target/com.tugalsan.tst.thread-1.0-SNAPSHOT-jar-with-dependencies.jar \nWARNING: Using incubator modules: jdk.incubator.concurrent \nlog -&gt; fetchFail.callableBlocking.begin \nlog -&gt; fetchFail.callableBlocking.while \nlog -&gt; fetchFail.callableBlocking.while \nlog -&gt; java.util.concurrent.TimeoutException:null \nlog -&gt; INFO: shutdown triggered\nlog -&gt; fetchFail.callableBlocking.while \nlog -&gt; fetchFail.callableBlocking.while \nlog -&gt; fetchFail.callableBlocking.while \nlog -&gt; fetchFail.callableBlocking.while \n...\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc","itext"],"answers":[{"tags":[],"owner":{"account_id":16768626,"reputation":11,"user_id":12121665,"display_name":"Raul Vitor L"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678223948,"creation_date":1678223879,"answer_id":75667254,"question_id":75666987,"body_markdown":"In that way you just render the byte array in the client side\r\nThe current code works for me, you dont need to put anything in the controller \r\n\r\n        File file = new File(&quot;MYPDFFILE.PDF&quot;);\r\n       \r\n        final myByte[] data = FileUtils.readFileToByteArray(file);\r\n\r\n        final ByteArrayResource resource = new ByteArrayResource(myByte);\r\n        return ResponseEntity\r\n                .ok()\r\n                .contentLength(data.length)\r\n                .header(&quot;Content-type&quot;, &quot;application/octet-stream&quot;)\r\n                .header(&quot;Content-disposition&quot;, &quot;attachment; filename=\\&quot;&quot; + file.getName() + &quot;\\&quot;&quot;)\r\n                .body(resource);\r\n","title":"I can&#39;t download the pdf I created with Java (Springboot). How can I download?","body":"<p>In that way you just render the byte array in the client side\nThe current code works for me, you dont need to put anything in the controller</p>\n<pre><code>    File file = new File(&quot;MYPDFFILE.PDF&quot;);\n   \n    final myByte[] data = FileUtils.readFileToByteArray(file);\n\n    final ByteArrayResource resource = new ByteArrayResource(myByte);\n    return ResponseEntity\n            .ok()\n            .contentLength(data.length)\n            .header(&quot;Content-type&quot;, &quot;application/octet-stream&quot;)\n            .header(&quot;Content-disposition&quot;, &quot;attachment; filename=\\&quot;&quot; + file.getName() + &quot;\\&quot;&quot;)\n            .body(resource);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":139494,"reputation":804,"user_id":345130,"accept_rate":40,"display_name":"ILya Cyclone"},"score":1,"creation_date":1678225467,"post_id":75667256,"comment_id":133491549,"body_markdown":"Doesn&#39;t &quot;produces&quot; set content-type header by itself?","body":"Doesn&#39;t &quot;produces&quot; set content-type header by itself?"},{"owner":{"account_id":266915,"reputation":2035,"user_id":554760,"display_name":"Magnus"},"score":0,"creation_date":1681451435,"post_id":75667256,"comment_id":134061297,"body_markdown":"One might think so, but in my experience across various versions of spring is that if you start messing with the ResponseEntity you are better safe than sorry to make sure it is all set. The above code &quot;works for me&quot; - but I haven&#39;t tested to remove the Content-type","body":"One might think so, but in my experience across various versions of spring is that if you start messing with the ResponseEntity you are better safe than sorry to make sure it is all set. The above code &quot;works for me&quot; - but I haven&#39;t tested to remove the Content-type"}],"tags":[],"owner":{"account_id":266915,"reputation":2035,"user_id":554760,"display_name":"Magnus"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678223897,"creation_date":1678223897,"answer_id":75667256,"question_id":75666987,"body_markdown":"Even thou you added the &quot;produces = &quot;application/pdf&quot; you need to set the content-type in the header:\r\n\r\nheaders.add(&quot;Content-type&quot;, &quot;application/pdf&quot;);\r\n\r\nThe produces directive controllers &quot;the mapped handler&quot; for your content, but your code writes raw data, please see: https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-responseentity\r\n\r\n\r\n\r\n    @PostMapping(value = &quot;/download/generateReport/{id}&quot;, produces = &quot;application/pdf&quot;)\r\n    public ResponseEntity&lt;InputStreamResource&gt; generateFavoriteReport(@PathVariable String id) throws Exception {\r\n        ReportRequest reportRequest= this.reportService.findByRequestWithId(id);                    \r\n        ByteArrayInputStream in =  this.reportService.generateFavoriteReport(reportRequest);            \r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=FavoriteReport.pdf&quot;);\r\n        headers.add(&quot;Access-Control-Expose-Headers&quot;, &quot;*&quot;);\r\n        headers.add(&quot;Content-type&quot;, &quot;application/pdf&quot;);  \r\n       \r\n        return ResponseEntity.ok().headers(headers).body(new InputStreamResource(in));\r\n    }","title":"I can&#39;t download the pdf I created with Java (Springboot). How can I download?","body":"<p>Even thou you added the &quot;produces = &quot;application/pdf&quot; you need to set the content-type in the header:</p>\n<p>headers.add(&quot;Content-type&quot;, &quot;application/pdf&quot;);</p>\n<p>The produces directive controllers &quot;the mapped handler&quot; for your content, but your code writes raw data, please see: <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-responseentity\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-responseentity</a></p>\n<pre><code>@PostMapping(value = &quot;/download/generateReport/{id}&quot;, produces = &quot;application/pdf&quot;)\npublic ResponseEntity&lt;InputStreamResource&gt; generateFavoriteReport(@PathVariable String id) throws Exception {\n    ReportRequest reportRequest= this.reportService.findByRequestWithId(id);                    \n    ByteArrayInputStream in =  this.reportService.generateFavoriteReport(reportRequest);            \n    HttpHeaders headers = new HttpHeaders();\n    headers.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=FavoriteReport.pdf&quot;);\n    headers.add(&quot;Access-Control-Expose-Headers&quot;, &quot;*&quot;);\n    headers.add(&quot;Content-type&quot;, &quot;application/pdf&quot;);  \n   \n    return ResponseEntity.ok().headers(headers).body(new InputStreamResource(in));\n}\n</code></pre>\n"}],"owner":{"account_id":27956448,"reputation":11,"user_id":21349173,"display_name":"likepickle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1681561993,"creation_date":1678221798,"question_id":75666987,"body_markdown":"When users click the download report button from the front end, I expect the report creation and download section in the backend to work, but it does not download the report even though it generates it.\r\n\r\n    @PostMapping(value = &quot;/download/generateReport/{id}&quot;, produces = &quot;application/pdf&quot;)\r\n    \tpublic ResponseEntity&lt;InputStreamResource&gt; generateFavoriteReport(@PathVariable String id) throws Exception {\r\n    \t\tReportRequest reportRequest= this.reportService.findByRequestWithId(id); \t\t\t\t\t\r\n    \t\tByteArrayInputStream in =  this.reportService.generateFavoriteReport(reportRequest);\t\t\t\r\n    \t\tHttpHeaders headers = new HttpHeaders();\r\n    \t\theaders.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=FavoriteReport.pdf&quot;);\r\n    \t\theaders.add(&quot;Access-Control-Expose-Headers&quot;, &quot;*&quot;);\r\n    \t\treturn ResponseEntity.ok().headers(headers).body(new InputStreamResource(in));\r\n    }\r\n\r\nWhen I try from Postman, I can see the report as output, but when I try it from Chrome or any browser, it appears like this and does not download. How can I download it? I don&#39;t know what I&#39;m missing or doing wrong but I&#39;m about to get fired so I can&#39;t complete this please help :(\r\n\r\nChrome Result : \r\nResponse: 200 OK\r\n\r\n%PDF-1.4\r\n%����\r\n1 0 obj\r\n&lt;&lt;/Type/XObject/Subtype/Image/Width 480/Height 160/Length 15631/ColorSpace/DeviceGray/BitsPerComponent 8/Filter/FlateDecode&gt;&gt;stream\r\nx��]`�֞�%���ʏt &gt;�(*�&quot;X@��`ED��l؟�X��������+*\r\n&quot;����2s���MB����)�|�93�wWJ)tq�:2➒��[�/ށ�*�O�X��pVw�&gt;�CI�W���;��%�*dR������\r\n?k9i{��jE����nHIT+C���U��ZE��$�~�x\r\n�J\r\nI(�B���0�H���@��2Z\r\n�� 5bo&amp;���^�\r\nAIE #&#374068;��١�$���K�q4\r\n�t��2��/x�%���/�ȁV�f&amp;�pJO��%���%Q��@�x&quot;U���t�8،A)�n�Ț`���%]���0�Y5S��BR��67j�q��/��tCb��)�z�a1��]�[�*�lp�&#39;���4��J��$L�֔�����Y/���������Q�F��&#39;�TS�p\t��(|&amp;��3I3�g�[]�\r\n1�c��&#39;�;1X�/��b�����k!#\r\n�w�o@t[��i��\r\n�WH%���.=��n�K.�s����l#�a�-�wؤ���j�իWϮ�������#HM&#39;}���f�$|�F3� D奋*��&quot;�*�#EI2�`4Z@ǗzB�h����Y�� F���E3j�:��U��:}ֻ���{�g&lt;�Ȅ�{��͌��p�&lt;�K�&gt;T��T�����ի����XA���u� �G5�DL(��A�&amp;�Kae���!qpip&amp;Dr�v���̼�Vo�+,.�R\\��c��_����uS�!pT�I�+Y\r\n�n�\t\r\n\r\n\r\n\r\n    headers.add(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=FavoriteReport.pdf&quot;);\r\n    headers.add(&quot;Cache-Control&quot;, &quot;no-cache, no-store, must-revalidate&quot;);\r\n    headers.add(&quot;Pragma&quot;, &quot;no-cache&quot;);\r\n    headers.add(&quot;Expires&quot;, &quot;0&quot;);\r\n\r\n\r\nI also added different methods of headers but it didn&#39;t make any difference.","title":"I can&#39;t download the pdf I created with Java (Springboot). How can I download?","body":"<p>When users click the download report button from the front end, I expect the report creation and download section in the backend to work, but it does not download the report even though it generates it.</p>\n<pre><code>@PostMapping(value = &quot;/download/generateReport/{id}&quot;, produces = &quot;application/pdf&quot;)\n    public ResponseEntity&lt;InputStreamResource&gt; generateFavoriteReport(@PathVariable String id) throws Exception {\n        ReportRequest reportRequest= this.reportService.findByRequestWithId(id);                    \n        ByteArrayInputStream in =  this.reportService.generateFavoriteReport(reportRequest);            \n        HttpHeaders headers = new HttpHeaders();\n        headers.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=FavoriteReport.pdf&quot;);\n        headers.add(&quot;Access-Control-Expose-Headers&quot;, &quot;*&quot;);\n        return ResponseEntity.ok().headers(headers).body(new InputStreamResource(in));\n}\n</code></pre>\n<p>When I try from Postman, I can see the report as output, but when I try it from Chrome or any browser, it appears like this and does not download. How can I download it? I don't know what I'm missing or doing wrong but I'm about to get fired so I can't complete this please help :(</p>\n<p>Chrome Result :\nResponse: 200 OK</p>\n<p>%PDF-1.4\n%����\n1 0 obj\n&lt;&lt;/Type/XObject/Subtype/Image/Width 480/Height 160/Length 15631/ColorSpace/DeviceGray/BitsPerComponent 8/Filter/FlateDecode&gt;&gt;stream\nx��]<code>�֞�%���ʏt &gt;�(*�&quot;X@��</code>ED��l؟�X��������+*\n&quot;����2s���MB����)�|�93�wWJ)tq�:2➒��[�/ށ�<em>�O�X��pVw�&gt;�CI�W���;��%�</em>dR������\n?k9i{��jE����nHIT+C���U��ZE��$�~�x\n�J\nI(�B���0�H���@��2Z\n�� 5bo&amp;���^�\nAIE #񛔴��١�$���K�q4\n�t��2��/x�%���/�ȁV�f&amp;�pJO��%���%Q��@�x&quot;U���t�8،A)�n�Ț<code>���%]���0�Y5S��BR��67j�q��/��tCb��)�z�a1��]�[�*�lp�'���4��J��$L�֔�����Y/���������Q�F��'�TS�p ��(|&amp;��3I3�g�[]� 1�c��'�;1X�/��b�����k!# �w�o@t[��i�� �WH%���.=��n�K.�s����l#�a�-�wؤ���j�իWϮ�������#HM'}���f�$|�F3� D奋*��&quot;�*�#EI2�</code>4Z@ǗzB�h����Y�� F���E3j�:��U��:}ֻ���{�g&lt;�Ȅ�{��͌��p�&lt;�K�&gt;T��T�����ի����XA���u� �G5�DL(��A�&amp;�Kae���!qpip&amp;Dr�v���̼�Vo�+,.�R\\��c��_����uS�!pT�I�+Y\n�n�</p>\n<pre><code>headers.add(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=FavoriteReport.pdf&quot;);\nheaders.add(&quot;Cache-Control&quot;, &quot;no-cache, no-store, must-revalidate&quot;);\nheaders.add(&quot;Pragma&quot;, &quot;no-cache&quot;);\nheaders.add(&quot;Expires&quot;, &quot;0&quot;);\n</code></pre>\n<p>I also added different methods of headers but it didn't make any difference.</p>\n"},{"tags":["java","dependencies","wix","noclassdeffounderror","jpackage"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1681571772,"post_id":76019952,"comment_id":134079671,"body_markdown":"this is not WiX Question. Just Execute Jar.`How to Create an Executable JAR with Maven`(https://www.baeldung.com/executable-jar-with-maven)","body":"this is not WiX Question. Just Execute Jar.<code>How to Create an Executable JAR with Maven</code>(<a href=\"https://www.baeldung.com/executable-jar-with-maven\" rel=\"nofollow noreferrer\">baeldung.com/executable-jar-with-maven</a>)"},{"owner":{"account_id":9158700,"reputation":33,"user_id":6810838,"display_name":"Rodrigo Oliveira"},"score":0,"creation_date":1681844549,"post_id":76019952,"comment_id":134121602,"body_markdown":"Yes, life888888, this works. Thank you! Ididn&#39;t want to use maven before, but I surrender.","body":"Yes, life888888, this works. Thank you! Ididn&#39;t want to use maven before, but I surrender."}],"owner":{"account_id":9158700,"reputation":33,"user_id":6810838,"display_name":"Rodrigo Oliveira"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681844569,"answer_count":0,"score":0,"last_activity_date":1681561975,"creation_date":1681522097,"question_id":76019952,"body_markdown":"I&#39;m working on a project using Flatlaf look and feel.\r\nI&#39;m using NetBeans.\r\nIt runs ok in NetBeans.\r\nI want to build a standalone application for Windows.\r\n\r\nI used WiX to build a standalone application for Windows. WiX builds the msi installer using the command:\r\n\r\n`jpackage --input . --win-console --name MyProj --main-jar myProj-1.0.jar --main-class myname.myproj.MyProj --type msi`\r\n\r\nAfter installed, running the application I read the error:\r\n\r\n`Error: Unable to initialize main class myname.myproj.MyProj\r\nCaused by: java.lang.NoClassDefFoundError: com/formdev/flatlaf/FlatDarkLaf\r\nChild process exited with code 1\r\n`\r\nHere is the simplified code MyProj.java:\r\n\r\n```\r\npackage myname.myproj;\r\n\r\nimport javax.swing.JFrame;\r\nimport javax.swing.UIManager;\r\nimport javax.swing.UnsupportedLookAndFeelException;\r\n\r\npublic class MyProj {\r\n\r\n    public static void main(String[] args) throws UnsupportedLookAndFeelException {\r\n        UIManager.setLookAndFeel(new com.formdev.flatlaf.FlatDarkLaf());\r\n        JFrame myFrame = new JFrame(&quot;Frame&quot;);\r\n        myFrame.setSize(333, 333);\r\n        myFrame.setVisible(true);\r\n    }\r\n}\r\n\r\n```\r\n\r\nAnd here is the pom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;MyName&lt;/groupId&gt;\r\n    &lt;artifactId&gt;myProj&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.formdev&lt;/groupId&gt;\r\n            &lt;artifactId&gt;flatlaf&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.2&lt;/version&gt;\r\n            &lt;type&gt;jar&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.source&gt;18&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;18&lt;/maven.compiler.target&gt;\r\n        &lt;exec.mainClass&gt;myname.myproj.MyProj&lt;/exec.mainClass&gt;\r\n    &lt;/properties&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nEDIT:\r\nIt doesn&#39;t need to be standalone, but I can&#39;t make it work compiling to jar. If someone has a solution about compiling to jar, it will be helpful.","title":"Java - Building executable using WiX won&#39;t load dependencies","body":"<p>I'm working on a project using Flatlaf look and feel.\nI'm using NetBeans.\nIt runs ok in NetBeans.\nI want to build a standalone application for Windows.</p>\n<p>I used WiX to build a standalone application for Windows. WiX builds the msi installer using the command:</p>\n<p><code>jpackage --input . --win-console --name MyProj --main-jar myProj-1.0.jar --main-class myname.myproj.MyProj --type msi</code></p>\n<p>After installed, running the application I read the error:</p>\n<p><code>Error: Unable to initialize main class myname.myproj.MyProj Caused by: java.lang.NoClassDefFoundError: com/formdev/flatlaf/FlatDarkLaf Child process exited with code 1 </code>\nHere is the simplified code MyProj.java:</p>\n<pre><code>package myname.myproj;\n\nimport javax.swing.JFrame;\nimport javax.swing.UIManager;\nimport javax.swing.UnsupportedLookAndFeelException;\n\npublic class MyProj {\n\n    public static void main(String[] args) throws UnsupportedLookAndFeelException {\n        UIManager.setLookAndFeel(new com.formdev.flatlaf.FlatDarkLaf());\n        JFrame myFrame = new JFrame(&quot;Frame&quot;);\n        myFrame.setSize(333, 333);\n        myFrame.setVisible(true);\n    }\n}\n\n</code></pre>\n<p>And here is the pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;MyName&lt;/groupId&gt;\n    &lt;artifactId&gt;myProj&lt;/artifactId&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.formdev&lt;/groupId&gt;\n            &lt;artifactId&gt;flatlaf&lt;/artifactId&gt;\n            &lt;version&gt;2.0.2&lt;/version&gt;\n            &lt;type&gt;jar&lt;/type&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;18&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;18&lt;/maven.compiler.target&gt;\n        &lt;exec.mainClass&gt;myname.myproj.MyProj&lt;/exec.mainClass&gt;\n    &lt;/properties&gt;\n&lt;/project&gt;\n</code></pre>\n<p>EDIT:\nIt doesn't need to be standalone, but I can't make it work compiling to jar. If someone has a solution about compiling to jar, it will be helpful.</p>\n"},{"tags":["java","android","memory"],"comments":[{"owner":{"account_id":2157109,"reputation":3274,"user_id":1912077,"accept_rate":62,"display_name":"Renjith"},"score":1,"creation_date":1681569286,"post_id":76022071,"comment_id":134079333,"body_markdown":"Just create a map/list and keep adding strings to it in a big loop. Eventually, you will run out of memory depending on loop size.","body":"Just create a map/list and keep adding strings to it in a big loop. Eventually, you will run out of memory depending on loop size."}],"owner":{"account_id":445732,"reputation":5762,"user_id":838355,"accept_rate":54,"display_name":"ir2pid"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1681561403,"creation_date":1681559400,"question_id":76022071,"body_markdown":"I want to make my app use up a lot of memory to experiment with onTrimMemory and garbage collection. What would be an easy way to do this?","title":"What is an effective way to trigger high memory consumption in an app?","body":"<p>I want to make my app use up a lot of memory to experiment with onTrimMemory and garbage collection. What would be an easy way to do this?</p>\n"},{"tags":["java","sql","postgresql","hierarchical-data","recursive-query"],"comments":[{"owner":{"account_id":27974006,"reputation":10316,"user_id":21363224,"display_name":"markalex"},"score":0,"creation_date":1680889619,"post_id":75960638,"comment_id":133976848,"body_markdown":"`FROM` of both part of union should be your table, not cte.","body":"<code>FROM</code> of both part of union should be your table, not cte."}],"answers":[{"tags":[],"owner":{"account_id":14783924,"reputation":217619,"user_id":10676716,"display_name":"GMB"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1680890055,"creation_date":1680890055,"answer_id":75960881,"question_id":75960638,"body_markdown":"The problem is that your recursive CTE has the same name as your table (`referral`) - and the database cannot resolve the ambiguity.\r\n\r\nI would recommend using a different alias to the CTE, as in:\r\n\r\n```\r\nWITH RECURSIVE cte AS (\r\n    SELECT * FROM referral WHERE refer_by =:referByUserId\r\n    UNION ALL\r\n    SELECT r.* \r\n    FROM cte c\r\n    INNER JOIN referral r ON r.refer_by = c.refer_to\r\n)\r\nSELECT refer_by, refer_to FROM cte\r\n```","title":"How to get chain information from database?","body":"<p>The problem is that your recursive CTE has the same name as your table (<code>referral</code>) - and the database cannot resolve the ambiguity.</p>\n<p>I would recommend using a different alias to the CTE, as in:</p>\n<pre><code>WITH RECURSIVE cte AS (\n    SELECT * FROM referral WHERE refer_by =:referByUserId\n    UNION ALL\n    SELECT r.* \n    FROM cte c\n    INNER JOIN referral r ON r.refer_by = c.refer_to\n)\nSELECT refer_by, refer_to FROM cte\n</code></pre>\n"}],"owner":{"account_id":448756,"reputation":574,"user_id":7369265,"accept_rate":40,"display_name":"Ranjit Soni"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681560398,"creation_date":1680887946,"question_id":75960638,"body_markdown":"I have a table named &quot;referral&quot; and it contains two columns named &quot;refer_by&quot; and &quot;refer_to&quot;. &quot;refer_by&quot; column stores the id of the user, who refer someone, and &quot;refer_to&quot; store the id of the user, who was referred by &quot;refer_by&quot; user.\r\n\r\nFollowing is the stored info.\r\n\r\n| A header | Another header |\r\n| -------- | -------------- |\r\n| 1| 2|\r\n| 1   | 5|\r\n| 2| 6|\r\n| 5   | 7|\r\n| 7| 8|\r\n| 8   | 9|\r\n| 9   | 10|\r\n| 15| 16|\r\n| 18   | 20|\r\n\r\nI want to get all the referral list where refer_by=1. For Example refer_by=1 refer 2 and 5, 2 refer 6, 5 refer7 and so on.\r\n\r\nI am using following query but it is failing with reason &quot;ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ERROR: recursive reference to query &quot;referral&quot; must not appear within its non-recursive term&quot;.\r\n\r\n```\r\n@Query(value = &quot;WITH RECURSIVE referral AS &quot; +\r\n\t\t\t&quot;( &quot; +\r\n\t\t\t\t&quot;SELECT ref1.* FROM referral ref1 WHERE ref1.refer_by =:referByUserId &quot; +\r\n\t\t\t\t\t&quot;UNION ALL &quot; +\r\n\t\t\t\t&quot;SELECT ref2.* FROM referral ref2 &quot; +\r\n\t\t\t\t\t&quot;INNER JOIN &quot; +\r\n\t\t\t\t&quot;referral ref3 ON ref2.refer_by = ref3.refer_to &quot; +\r\n\t\t\t&quot;) &quot; +\r\n\t\t\t&quot;SELECT reff.refer_by, reff.refer_to FROM referral reff&quot;, nativeQuery = true)\r\n\tList&lt;Object[]&gt; testt(final Long referByUserId);\r\n```\r\n\r\nPlease help me.\r\nThanks\r\n","title":"How to get chain information from database?","body":"<p>I have a table named &quot;referral&quot; and it contains two columns named &quot;refer_by&quot; and &quot;refer_to&quot;. &quot;refer_by&quot; column stores the id of the user, who refer someone, and &quot;refer_to&quot; store the id of the user, who was referred by &quot;refer_by&quot; user.</p>\n<p>Following is the stored info.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>A header</th>\n<th>Another header</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>2</td>\n</tr>\n<tr>\n<td>1</td>\n<td>5</td>\n</tr>\n<tr>\n<td>2</td>\n<td>6</td>\n</tr>\n<tr>\n<td>5</td>\n<td>7</td>\n</tr>\n<tr>\n<td>7</td>\n<td>8</td>\n</tr>\n<tr>\n<td>8</td>\n<td>9</td>\n</tr>\n<tr>\n<td>9</td>\n<td>10</td>\n</tr>\n<tr>\n<td>15</td>\n<td>16</td>\n</tr>\n<tr>\n<td>18</td>\n<td>20</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>I want to get all the referral list where refer_by=1. For Example refer_by=1 refer 2 and 5, 2 refer 6, 5 refer7 and so on.</p>\n<p>I am using following query but it is failing with reason &quot;ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ERROR: recursive reference to query &quot;referral&quot; must not appear within its non-recursive term&quot;.</p>\n<pre><code>@Query(value = &quot;WITH RECURSIVE referral AS &quot; +\n            &quot;( &quot; +\n                &quot;SELECT ref1.* FROM referral ref1 WHERE ref1.refer_by =:referByUserId &quot; +\n                    &quot;UNION ALL &quot; +\n                &quot;SELECT ref2.* FROM referral ref2 &quot; +\n                    &quot;INNER JOIN &quot; +\n                &quot;referral ref3 ON ref2.refer_by = ref3.refer_to &quot; +\n            &quot;) &quot; +\n            &quot;SELECT reff.refer_by, reff.refer_to FROM referral reff&quot;, nativeQuery = true)\n    List&lt;Object[]&gt; testt(final Long referByUserId);\n</code></pre>\n<p>Please help me.\nThanks</p>\n"},{"tags":["java","sql","apache-calcite"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1680713372,"post_id":75941028,"comment_id":133946219,"body_markdown":"This sounds like a bug you should report to the Apache Calcite project.","body":"This sounds like a bug you should report to the Apache Calcite project."}],"answers":[{"tags":[],"owner":{"account_id":28166776,"reputation":1,"user_id":21525867,"display_name":"Kirill Kim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681560088,"creation_date":1681204685,"answer_id":75984253,"question_id":75941028,"body_markdown":"I found problem in my code, I created `RelDataType` and had set it to not nullable.\r\n\r\nTherefore, I added to `org.apache.calcite.schema.Table#getRowType` when describing `RelDataType` for column next code:\r\n```\r\nRelDataType sqlType = relDataTypeFactory.createTypeWithNullability(relDataTypeFactory.createSqlType(sqlTypeName), true); \r\n```\r\n\r\nAnd now all works fine, thanks.","title":"Calcite order by nullpointer exception","body":"<p>I found problem in my code, I created <code>RelDataType</code> and had set it to not nullable.</p>\n<p>Therefore, I added to <code>org.apache.calcite.schema.Table#getRowType</code> when describing <code>RelDataType</code> for column next code:</p>\n<pre><code>RelDataType sqlType = relDataTypeFactory.createTypeWithNullability(relDataTypeFactory.createSqlType(sqlTypeName), true); \n</code></pre>\n<p>And now all works fine, thanks.</p>\n"}],"owner":{"account_id":28166776,"reputation":1,"user_id":21525867,"display_name":"Kirill Kim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75984253,"answer_count":1,"score":0,"last_activity_date":1681560088,"creation_date":1680706948,"question_id":75941028,"body_markdown":"I try to perform query over over some table data in Java using Calcite. I try to execute query:\r\n\r\n```sql\r\nselect\r\n    distinct tbl.col1 ,\r\n    tbl.col2  \r\nfrom\r\n    infoset.SUBEKT tbl   \r\norder by\r\n    col1 asc nulls last ,\r\n    col2 asc nulls last\r\n```\r\nAnd the following exception occurs\r\n```none\r\njava.lang.NullPointerException\r\n\tat org.apache.calcite.runtime.Utilities.compare(Utilities.java:202)\r\n\tat Baz$2.compare(ANONYMOUS.java:15)\r\n\tat Baz$2.compare(ANONYMOUS.java:27)\r\n\tat java.util.TreeMap.getEntryUsingComparator(TreeMap.java:376)\r\n\tat java.util.TreeMap.getEntry(TreeMap.java:345)\r\n\tat java.util.TreeMap.get(TreeMap.java:278)\r\n\tat org.apache.calcite.linq4j.EnumerableDefaults.toLookup_(EnumerableDefaults.java:3608)\r\n\tat org.apache.calcite.linq4j.EnumerableDefaults$14.enumerator(EnumerableDefaults.java:2660)\r\n\tat org.apache.calcite.linq4j.AbstractEnumerable.iterator(AbstractEnumerable.java:33)\r\n\tat org.apache.calcite.avatica.MetaImpl.createCursor(MetaImpl.java:90)\r\n\tat org.apache.calcite.avatica.AvaticaResultSet.execute(AvaticaResultSet.java:186)\r\n\tat org.apache.calcite.jdbc.CalciteResultSet.execute(CalciteResultSet.java:64)\r\n\tat org.apache.calcite.jdbc.CalciteResultSet.execute(CalciteResultSet.java:43)\r\n\tat org.apache.calcite.avatica.AvaticaConnection$1.execute(AvaticaConnection.java:669)\r\n\tat org.apache.calcite.jdbc.CalciteMetaImpl.prepareAndExecute(CalciteMetaImpl.java:636)\r\n\tat org.apache.calcite.avatica.AvaticaConnection.prepareAndExecuteInternal(AvaticaConnection.java:677)\r\n\tat org.apache.calcite.avatica.AvaticaStatement.executeInternal(AvaticaStatement.java:157)\r\n\tat org.apache.calcite.avatica.AvaticaStatement.executeQuery(AvaticaStatement.java:228)\r\n\tat ru.spi2.modules.infosetquery.InfosetQueryPlugin.executeQuery(InfosetQueryPlugin.java:101)\r\n```\r\nThe error occurs because col1 has some rows with null values. If I order only by col1 or col2, all works well.\r\n","title":"Calcite order by nullpointer exception","body":"<p>I try to perform query over over some table data in Java using Calcite. I try to execute query:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>select\n    distinct tbl.col1 ,\n    tbl.col2  \nfrom\n    infoset.SUBEKT tbl   \norder by\n    col1 asc nulls last ,\n    col2 asc nulls last\n</code></pre>\n<p>And the following exception occurs</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.NullPointerException\n    at org.apache.calcite.runtime.Utilities.compare(Utilities.java:202)\n    at Baz$2.compare(ANONYMOUS.java:15)\n    at Baz$2.compare(ANONYMOUS.java:27)\n    at java.util.TreeMap.getEntryUsingComparator(TreeMap.java:376)\n    at java.util.TreeMap.getEntry(TreeMap.java:345)\n    at java.util.TreeMap.get(TreeMap.java:278)\n    at org.apache.calcite.linq4j.EnumerableDefaults.toLookup_(EnumerableDefaults.java:3608)\n    at org.apache.calcite.linq4j.EnumerableDefaults$14.enumerator(EnumerableDefaults.java:2660)\n    at org.apache.calcite.linq4j.AbstractEnumerable.iterator(AbstractEnumerable.java:33)\n    at org.apache.calcite.avatica.MetaImpl.createCursor(MetaImpl.java:90)\n    at org.apache.calcite.avatica.AvaticaResultSet.execute(AvaticaResultSet.java:186)\n    at org.apache.calcite.jdbc.CalciteResultSet.execute(CalciteResultSet.java:64)\n    at org.apache.calcite.jdbc.CalciteResultSet.execute(CalciteResultSet.java:43)\n    at org.apache.calcite.avatica.AvaticaConnection$1.execute(AvaticaConnection.java:669)\n    at org.apache.calcite.jdbc.CalciteMetaImpl.prepareAndExecute(CalciteMetaImpl.java:636)\n    at org.apache.calcite.avatica.AvaticaConnection.prepareAndExecuteInternal(AvaticaConnection.java:677)\n    at org.apache.calcite.avatica.AvaticaStatement.executeInternal(AvaticaStatement.java:157)\n    at org.apache.calcite.avatica.AvaticaStatement.executeQuery(AvaticaStatement.java:228)\n    at ru.spi2.modules.infosetquery.InfosetQueryPlugin.executeQuery(InfosetQueryPlugin.java:101)\n</code></pre>\n<p>The error occurs because col1 has some rows with null values. If I order only by col1 or col2, all works well.</p>\n"},{"tags":["java","xml","postgresql","spring-boot","liquibase"],"comments":[{"owner":{"account_id":5209321,"reputation":116,"user_id":4166251,"display_name":"Stanimir Stamenkov"},"score":0,"creation_date":1681549176,"post_id":76020977,"comment_id":134076895,"body_markdown":"Try setting the [`liquibase.sql.logLevel`](https://docs.liquibase.com/parameters/sql-log-level.html) to `INFO` to see the generated SQL statements.","body":"Try setting the <a href=\"https://docs.liquibase.com/parameters/sql-log-level.html\" rel=\"nofollow noreferrer\"><code>liquibase.sql.logLevel</code></a> to <code>INFO</code> to see the generated SQL statements."}],"answers":[{"comments":[{"owner":{"account_id":5209321,"reputation":116,"user_id":4166251,"display_name":"Stanimir Stamenkov"},"score":0,"creation_date":1681547072,"post_id":76020999,"comment_id":134076668,"body_markdown":"Maybe it needs to be specified with a [`defaultValueComputed`](https://docs.liquibase.com/change-types/nested-tags/column.html) attribute, instead.","body":"Maybe it needs to be specified with a <a href=\"https://docs.liquibase.com/change-types/nested-tags/column.html\" rel=\"nofollow noreferrer\"><code>defaultValueComputed</code></a> attribute, instead."}],"tags":[],"owner":{"account_id":101001,"reputation":119808,"user_id":271959,"display_name":"Frank Heikens"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681559741,"creation_date":1681545121,"answer_id":76020999,"question_id":76020977,"body_markdown":"The correct syntax is either\r\n\r\n    CURRENT_TIMESTAMP\r\nor\r\n\r\n    CURRENT_TIMESTAMP(&lt;precision&gt;)\r\n\r\nFor example `CURRENT_TIMESTAMP(5)` for 5 fractional digits in the seconds field.","title":"liquibase.exception.DatabaseException: ERROR: syntax error at or near &quot;)&quot;","body":"<p>The correct syntax is either</p>\n<pre><code>CURRENT_TIMESTAMP\n</code></pre>\n<p>or</p>\n<pre><code>CURRENT_TIMESTAMP(&lt;precision&gt;)\n</code></pre>\n<p>For example <code>CURRENT_TIMESTAMP(5)</code> for 5 fractional digits in the seconds field.</p>\n"}],"owner":{"account_id":18328343,"reputation":11,"user_id":16968310,"display_name":"Bohdan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":439,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681559741,"creation_date":1681544769,"question_id":76020977,"body_markdown":" org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;liquibase&#39; defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.MigrationFailedException: Migration failed for changeset liquibase/db.changelog-1.0.xml::1.0.0::bohdan.taran:\r\n     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near &quot;)&quot;\r\n\r\n\r\n```\r\n&lt;changeSet id=&quot;1.0.0&quot; author=&quot;bohdan.taran&quot;&gt;\r\n        &lt;createTable tableName=&quot;users&quot;&gt;\r\n            &lt;column name=&quot;id&quot; type=&quot;BIGINT&quot; autoIncrement=&quot;true&quot;&gt;\r\n                &lt;constraints primaryKey=&quot;true&quot; nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;username&quot; type=&quot;VARCHAR(100)&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot; unique=&quot;true&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;email&quot; type=&quot;VARCHAR(255)&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot; unique=&quot;true&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;first_name&quot; type=&quot;VARCHAR(100)&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;last_name&quot; type=&quot;VARCHAR(100)&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;password&quot; type=&quot;VARCHAR(255)&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;created&quot; type=&quot;TIMESTAMP&quot; defaultValue=&quot;CURRENT_TIMESTAMP()&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;updated&quot; type=&quot;TIMESTAMP&quot; defaultValue=&quot;CURRENT_TIMESTAMP()&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;status&quot; type=&quot;VARCHAR(25)&quot; defaultValue=&quot;ACTIVE&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n        &lt;/createTable&gt;\r\n    &lt;/changeSet&gt;\r\n```\r\n\r\nI can&#39;t find this problem in my code","title":"liquibase.exception.DatabaseException: ERROR: syntax error at or near &quot;)&quot;","body":"<p>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.MigrationFailedException: Migration failed for changeset liquibase/db.changelog-1.0.xml::1.0.0::bohdan.taran:\nReason: liquibase.exception.DatabaseException: ERROR: syntax error at or near &quot;)&quot;</p>\n<pre><code>&lt;changeSet id=&quot;1.0.0&quot; author=&quot;bohdan.taran&quot;&gt;\n        &lt;createTable tableName=&quot;users&quot;&gt;\n            &lt;column name=&quot;id&quot; type=&quot;BIGINT&quot; autoIncrement=&quot;true&quot;&gt;\n                &lt;constraints primaryKey=&quot;true&quot; nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=&quot;username&quot; type=&quot;VARCHAR(100)&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot; unique=&quot;true&quot;/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=&quot;email&quot; type=&quot;VARCHAR(255)&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot; unique=&quot;true&quot;/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=&quot;first_name&quot; type=&quot;VARCHAR(100)&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=&quot;last_name&quot; type=&quot;VARCHAR(100)&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=&quot;password&quot; type=&quot;VARCHAR(255)&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=&quot;created&quot; type=&quot;TIMESTAMP&quot; defaultValue=&quot;CURRENT_TIMESTAMP()&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=&quot;updated&quot; type=&quot;TIMESTAMP&quot; defaultValue=&quot;CURRENT_TIMESTAMP()&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=&quot;status&quot; type=&quot;VARCHAR(25)&quot; defaultValue=&quot;ACTIVE&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n\n        &lt;/createTable&gt;\n    &lt;/changeSet&gt;\n</code></pre>\n<p>I can't find this problem in my code</p>\n"},{"tags":["java","java-8","concurrentlinkedqueue"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1681369108,"post_id":76002435,"comment_id":134045740,"body_markdown":"Well, `queue.add(new Object());` will add an object that your code would never remove so `queue.remove(object);` would always have to look for the the object you just added. When you remove that line then `object` will be at the head of a 1-element queue which makes it way easier to remove.","body":"Well, <code>queue.add(new Object());</code> will add an object that your code would never remove so <code>queue.remove(object);</code> would always have to look for the the object you just added. When you remove that line then <code>object</code> will be at the head of a 1-element queue which makes it way easier to remove."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1681369201,"post_id":76002435,"comment_id":134045764,"body_markdown":"Btw, note that times taken like you did are not directly comparable as there may be many factors influencing the JVM. For such micro benchmarks you should use JMH.","body":"Btw, note that times taken like you did are not directly comparable as there may be many factors influencing the JVM. For such micro benchmarks you should use JMH."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1681369529,"post_id":76002435,"comment_id":134045824,"body_markdown":"On the term &quot;memory leak&quot;: I&#39;d not consider this a real memory leak but in general `remove(Object o)` will use `equals()` to find the object to be removed - and the basic implementation of `Object.equals(...)` will use instance identity. Thus, calling `add(new Object())` will add an instance whose identity you don&#39;t have (as you have no reference to it) so you can&#39;t directly use `remove()` to remove it - you&#39;d need to get the instance from the queue first.","body":"On the term &quot;memory leak&quot;: I&#39;d not consider this a real memory leak but in general <code>remove(Object o)</code> will use <code>equals()</code> to find the object to be removed - and the basic implementation of <code>Object.equals(...)</code> will use instance identity. Thus, calling <code>add(new Object())</code> will add an instance whose identity you don&#39;t have (as you have no reference to it) so you can&#39;t directly use <code>remove()</code> to remove it - you&#39;d need to get the instance from the queue first."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1681370107,"post_id":76002435,"comment_id":134045933,"body_markdown":"IMHO not really a memory leak: there is exactly one element that is added to the queue and stays there. And you could retrieve (and remove) that element anytime you want by calling `queue.poll()`","body":"IMHO not really a memory leak: there is exactly one element that is added to the queue and stays there. And you could retrieve (and remove) that element anytime you want by calling <code>queue.poll()</code>"},{"owner":{"account_id":321401,"reputation":18500,"user_id":640205,"accept_rate":94,"display_name":"JustBeingHelpful"},"score":0,"creation_date":1681374526,"post_id":76002435,"comment_id":134046861,"body_markdown":"What book was it?","body":"What book was it?"},{"owner":{"account_id":1677301,"reputation":2224,"user_id":1542523,"accept_rate":66,"display_name":"flower"},"score":0,"creation_date":1681376293,"post_id":76002435,"comment_id":134047278,"body_markdown":"@MacGyver，ISBN: 9787111657705","body":"@MacGyver，ISBN: 9787111657705"},{"owner":{"account_id":321401,"reputation":18500,"user_id":640205,"accept_rate":94,"display_name":"JustBeingHelpful"},"score":0,"creation_date":1681402016,"post_id":76002435,"comment_id":134054061,"body_markdown":"Not necessarily.  Depending on how concurrency is implemented, dealing with memory on a CPU is often a concern, and that is the focus of improving performance.  Look up the term &quot;context switching&quot;.  That is how multiple processes can share a single CPU.","body":"Not necessarily.  Depending on how concurrency is implemented, dealing with memory on a CPU is often a concern, and that is the focus of improving performance.  Look up the term &quot;context switching&quot;.  That is how multiple processes can share a single CPU."}],"answers":[{"tags":[],"owner":{"account_id":5749769,"reputation":2331,"user_id":4539838,"display_name":"Amit kumar"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1681530381,"creation_date":1681530381,"answer_id":76020248,"question_id":76002435,"body_markdown":"Yes. This will cause memory leak issue.\r\n\r\n**Explanation** :  \r\n 1. `queue.add(new Object())` adds a new object to the `ConcurrentLinkedQueue`, which means queue will hold the reference to that object until it is removed. \r\n 2. But in the code snippet same object is getting added and removed\r\n    repeatedly, via queue.remove(object) in the while loop. \r\n\r\nThis might cause the `ConcurrentLinkedQueue` to keep the reference to the object indefinitely, even when the object is no longer needed, causing memory leak.\r\n\r\n&gt; To fix the memory leak issue, remove the line `queue.add(new\r\n&gt; Object())` and only add the object instance to the queue, which is\r\n&gt; being used in the while loop.\r\n\r\n  \r\n\r\n**Note** : Make sure that the object is removed from the queue after it is no longer needed.","title":"Will the use of ConcurrentLinkedQueue cause memory leak?","body":"<p>Yes. This will cause memory leak issue.</p>\n<p><strong>Explanation</strong> :</p>\n<ol>\n<li><code>queue.add(new Object())</code> adds a new object to the <code>ConcurrentLinkedQueue</code>, which means queue will hold the reference to that object until it is removed.</li>\n<li>But in the code snippet same object is getting added and removed\nrepeatedly, via queue.remove(object) in the while loop.</li>\n</ol>\n<p>This might cause the <code>ConcurrentLinkedQueue</code> to keep the reference to the object indefinitely, even when the object is no longer needed, causing memory leak.</p>\n<blockquote>\n<p>To fix the memory leak issue, remove the line <code>queue.add(new Object())</code> and only add the object instance to the queue, which is\nbeing used in the while loop.</p>\n</blockquote>\n<p><strong>Note</strong> : Make sure that the object is removed from the queue after it is no longer needed.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681559738,"creation_date":1681536542,"answer_id":76020516,"question_id":76002435,"body_markdown":"The problem presented in that the book is actually caused by an OpenJDK Bug:  https://bugs.openjdk.org/browse/JDK-8054446.  \r\n\r\nKudos to @MacGyver for finding this!!\r\n\r\nAccording to the analysis on the bug report:\r\n\r\n&gt; &quot;Reporter is correct - `remove(Object)` will never unlink dead Nodes *if only ever the element at the tail is removed&lt;sup&gt;1&lt;/sup&gt;.*&quot;\r\n\r\n(Emphasis added)\r\n\r\nThe bug report shows that the issue was initially raised against Java 8 in 2014, and was fixed in Java 9 in 2019.  The fix was subsequently backported to Java 8 and Java 7.  \r\n\r\nNote that Java 7 is EOL.  To get a Java 7 release with the fix, I think you will either need an Oracle support contract, or you will need to use a 3rd-party Java 7 release.\r\n\r\n-----------------------------\r\n\r\nSo to you answer your question:\r\n\r\n&gt; Will the use of `ConcurrentLinkedQueue` cause memory leak?\r\n\r\nIf you are using an out-of-date version of Java AND you are repeatedly removing the last element of the queue, then Yes.  Otherwise No.\r\n\r\nSolution: use an up-to-date version of Java 7, 8 or later.\r\n\r\nI should also point out that using `remove(E)` on a `Queue` / `Deque` is kind of a bad idea anyway.  It is an `O(N)` operation compared with `O(1)` for `add(E)`, `offer(E)`, `remove()`, `poll()`, `element()` and `peek()` (and the equivalent `Deque` operations).\r\n\r\n-------------------\r\n\r\n&lt;sup&gt;1 - I didn&#39;t look at the original source code to see if the leak could occur in other circumstances, but I am prepared to take the official analysis at face value.&lt;/sup&gt; ","title":"Will the use of ConcurrentLinkedQueue cause memory leak?","body":"<p>The problem presented in that the book is actually caused by an OpenJDK Bug:  <a href=\"https://bugs.openjdk.org/browse/JDK-8054446\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8054446</a>.</p>\n<p>Kudos to @MacGyver for finding this!!</p>\n<p>According to the analysis on the bug report:</p>\n<blockquote>\n<p>&quot;Reporter is correct - <code>remove(Object)</code> will never unlink dead Nodes <em>if only ever the element at the tail is removed<sup>1</sup>.</em>&quot;</p>\n</blockquote>\n<p>(Emphasis added)</p>\n<p>The bug report shows that the issue was initially raised against Java 8 in 2014, and was fixed in Java 9 in 2019.  The fix was subsequently backported to Java 8 and Java 7.</p>\n<p>Note that Java 7 is EOL.  To get a Java 7 release with the fix, I think you will either need an Oracle support contract, or you will need to use a 3rd-party Java 7 release.</p>\n<hr />\n<p>So to you answer your question:</p>\n<blockquote>\n<p>Will the use of <code>ConcurrentLinkedQueue</code> cause memory leak?</p>\n</blockquote>\n<p>If you are using an out-of-date version of Java AND you are repeatedly removing the last element of the queue, then Yes.  Otherwise No.</p>\n<p>Solution: use an up-to-date version of Java 7, 8 or later.</p>\n<p>I should also point out that using <code>remove(E)</code> on a <code>Queue</code> / <code>Deque</code> is kind of a bad idea anyway.  It is an <code>O(N)</code> operation compared with <code>O(1)</code> for <code>add(E)</code>, <code>offer(E)</code>, <code>remove()</code>, <code>poll()</code>, <code>element()</code> and <code>peek()</code> (and the equivalent <code>Deque</code> operations).</p>\n<hr />\n<p><sup>1 - I didn't look at the original source code to see if the leak could occur in other circumstances, but I am prepared to take the official analysis at face value.</sup></p>\n"}],"owner":{"account_id":1677301,"reputation":2224,"user_id":1542523,"accept_rate":66,"display_name":"flower"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1681559738,"creation_date":1681368578,"question_id":76002435,"body_markdown":"I read from a book that the following code will cause memory leak,and the book tells that we should remove the code `queue.add(new Object());` and it will not cause memory leak. but I don&#39;t know why. Why?\r\n\r\n \r\n\r\n    import com.google.common.base.Stopwatch;\r\n    import java.util.concurrent.ConcurrentLinkedQueue;\r\n    import java.util.concurrent.TimeUnit;\r\n\r\n    public class ConcurrentLinkedQueueMemLeak\r\n     {\r\n    public static void main(String[] args) throws InterruptedException\r\n    {\r\n        ConcurrentLinkedQueue&lt;Object&gt; queue =\r\n                        new ConcurrentLinkedQueue&lt;&gt;();\r\n        queue.add(new Object()); // ① 这一行代码会导致内存泄漏\r\n        Object object = new Object();\r\n\r\n        int loops = 0;\r\n\r\n        // 休眠10秒，方便打开JDK诊断工具，监控执行前后的内存变化\r\n        TimeUnit.SECONDS.sleep(10);\r\n\r\n        Stopwatch watch = Stopwatch.createStarted();\r\n        while (true)\r\n        {\r\n            // 每执行10000次进行一次耗时统计，并且输出\r\n            if (loops % 10000 == 0 &amp;&amp; loops != 0)\r\n            {\r\n                long elapsedMs = watch.stop()\r\n                    .elapsed(TimeUnit.MILLISECONDS);\r\n                System.out.printf(&quot;loops=%d duration=%d MS%n&quot;, loops, elapsedMs);\r\n                watch.reset().start();\r\n            }\r\n            queue.add(object);\r\n            // ② remove方法删除object\r\n            queue.remove(object);\r\n            ++loops;\r\n        }\r\n    }\r\n    }\r\n\r\nbefore remove the code queue.add(new Object()):\r\n\r\n    loops=10000 duration=588 MS\r\n    loops=20000 duration=1881 MS\r\n    loops=30000 duration=3175 MS\r\n    loops=40000 duration=3452 MS\r\n    loops=50000 duration=3784 MS\r\n    loops=60000 duration=4424 MS\r\n    loops=70000 duration=4761 MS\r\n    loops=80000 duration=5733 MS\r\n\r\nafter remove the code queue.add(new Object()):\r\n\r\n    loops=363590000 duration=0 MS\r\n    loops=363600000 duration=0 MS\r\n    loops=363610000 duration=0 MS\r\n    loops=363620000 duration=0 MS\r\n    loops=363630000 duration=1 MS","title":"Will the use of ConcurrentLinkedQueue cause memory leak?","body":"<p>I read from a book that the following code will cause memory leak,and the book tells that we should remove the code <code>queue.add(new Object());</code> and it will not cause memory leak. but I don't know why. Why?</p>\n<pre><code>import com.google.common.base.Stopwatch;\nimport java.util.concurrent.ConcurrentLinkedQueue;\nimport java.util.concurrent.TimeUnit;\n\npublic class ConcurrentLinkedQueueMemLeak\n {\npublic static void main(String[] args) throws InterruptedException\n{\n    ConcurrentLinkedQueue&lt;Object&gt; queue =\n                    new ConcurrentLinkedQueue&lt;&gt;();\n    queue.add(new Object()); // ① 这一行代码会导致内存泄漏\n    Object object = new Object();\n\n    int loops = 0;\n\n    // 休眠10秒，方便打开JDK诊断工具，监控执行前后的内存变化\n    TimeUnit.SECONDS.sleep(10);\n\n    Stopwatch watch = Stopwatch.createStarted();\n    while (true)\n    {\n        // 每执行10000次进行一次耗时统计，并且输出\n        if (loops % 10000 == 0 &amp;&amp; loops != 0)\n        {\n            long elapsedMs = watch.stop()\n                .elapsed(TimeUnit.MILLISECONDS);\n            System.out.printf(&quot;loops=%d duration=%d MS%n&quot;, loops, elapsedMs);\n            watch.reset().start();\n        }\n        queue.add(object);\n        // ② remove方法删除object\n        queue.remove(object);\n        ++loops;\n    }\n}\n}\n</code></pre>\n<p>before remove the code queue.add(new Object()):</p>\n<pre><code>loops=10000 duration=588 MS\nloops=20000 duration=1881 MS\nloops=30000 duration=3175 MS\nloops=40000 duration=3452 MS\nloops=50000 duration=3784 MS\nloops=60000 duration=4424 MS\nloops=70000 duration=4761 MS\nloops=80000 duration=5733 MS\n</code></pre>\n<p>after remove the code queue.add(new Object()):</p>\n<pre><code>loops=363590000 duration=0 MS\nloops=363600000 duration=0 MS\nloops=363610000 duration=0 MS\nloops=363620000 duration=0 MS\nloops=363630000 duration=1 MS\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":4739783,"reputation":612632,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1441973907,"post_id":32523130,"comment_id":52904216,"body_markdown":"These look like belonging to `\\p{Lo}` category.","body":"These look like belonging to <code>\\p{Lo}</code> category."},{"owner":{"account_id":5356655,"reputation":5914,"user_id":4269149,"display_name":"Sarthak Mittal"},"score":0,"creation_date":1441974139,"post_id":32523130,"comment_id":52904376,"body_markdown":"@stribizhev it&#39;s working, but the definition of \\p{Lo} from http://www.regular-expressions.info/unicode.html seems to be saying that it might match characters other than numbers?","body":"@stribizhev it&#39;s working, but the definition of \\p{Lo} from <a href=\"http://www.regular-expressions.info/unicode.html\" rel=\"nofollow noreferrer\">regular-expressions.info/unicode.html</a> seems to be saying that it might match characters other than numbers?"},{"owner":{"display_name":"user319799"},"score":0,"creation_date":1441974386,"post_id":32523130,"comment_id":52904536,"body_markdown":"Is there any (easily automatable) way to tell if this characters are used as digits? Can they be used as non-numeric part of words/text?","body":"Is there any (easily automatable) way to tell if this characters are used as digits? Can they be used as non-numeric part of words/text?"},{"owner":{"account_id":4739783,"reputation":612632,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1441974810,"post_id":32523130,"comment_id":52904810,"body_markdown":"No idea, the only solution that I can think of is just add them all into the character class. Like `&quot;(?U)[\\\\p{N}一二三四五六七八九十百千万萬億亿兆零]+&quot;`.","body":"No idea, the only solution that I can think of is just add them all into the character class. Like <code>&quot;(?U)[\\\\p{N}一二三四五六七八九十百千万萬億亿兆零]+&quot;</code>."},{"owner":{"account_id":5356655,"reputation":5914,"user_id":4269149,"display_name":"Sarthak Mittal"},"score":0,"creation_date":1441974967,"post_id":32523130,"comment_id":52904915,"body_markdown":"@stribizhev but this solution would only be able to help support Chinese, how will i be able to do this for all the unsupported languages?\ndo you know of any character which falls under \\\\p{Lo} but isn&#39;t a number?","body":"@stribizhev but this solution would only be able to help support Chinese, how will i be able to do this for all the unsupported languages? do you know of any character which falls under \\\\p{Lo} but isn&#39;t a number?"},{"owner":{"account_id":4739783,"reputation":612632,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1441975126,"post_id":32523130,"comment_id":52905011,"body_markdown":"No, I am afraid that is something I cannot be sure of.","body":"No, I am afraid that is something I cannot be sure of."},{"owner":{"account_id":5356655,"reputation":5914,"user_id":4269149,"display_name":"Sarthak Mittal"},"score":0,"creation_date":1441975317,"post_id":32523130,"comment_id":52905138,"body_markdown":"@stribizhev ok, thank you very much for your support :)","body":"@stribizhev ok, thank you very much for your support :)"},{"owner":{"account_id":155533,"reputation":90025,"user_id":372239,"accept_rate":80,"display_name":"Toto"},"score":1,"creation_date":1441975558,"post_id":32523130,"comment_id":52905267,"body_markdown":"I don&#39;t know anything on chinese characters, but are you sure these characters `三十萬零二百五十` are numbers and not literals like `one two three ...`","body":"I don&#39;t know anything on chinese characters, but are you sure these characters <code>三十萬零二百五十</code> are numbers and not literals like <code>one two three ...</code>"},{"owner":{"account_id":5356655,"reputation":5914,"user_id":4269149,"display_name":"Sarthak Mittal"},"score":0,"creation_date":1441975687,"post_id":32523130,"comment_id":52905339,"body_markdown":"@Toto i also don&#39;t know Chinese :), but i referred dozens of links, some of them being:\n\nhttp://www.mandarintools.com/numbers.html\nhttps://en.wikibooks.org/wiki/Chinese_%28Mandarin%29/Numbers","body":"@Toto i also don&#39;t know Chinese :), but i referred dozens of links, some of them being:  <a href=\"http://www.mandarintools.com/numbers.html\" rel=\"nofollow noreferrer\">mandarintools.com/numbers.html</a> <a href=\"https://en.wikibooks.org/wiki/Chinese_%28Mandarin%29/Numbers\" rel=\"nofollow noreferrer\">en.wikibooks.org/wiki/Chinese_%28Mandarin%29/Numbers</a>"},{"owner":{"account_id":155533,"reputation":90025,"user_id":372239,"accept_rate":80,"display_name":"Toto"},"score":0,"creation_date":1441976016,"post_id":32523130,"comment_id":52905531,"body_markdown":"I&#39;ve just tried google traduction from english to chinese, for `1` it gives `1`, for `one` it gives `一` same for `3` =&gt; `3` and `three` =&gt; `三`","body":"I&#39;ve just tried google traduction from english to chinese, for <code>1</code> it gives <code>1</code>, for <code>one</code> it gives <code>一</code> same for <code>3</code> =&gt; <code>3</code> and <code>three</code> =&gt; <code>三</code>"},{"owner":{"account_id":5356655,"reputation":5914,"user_id":4269149,"display_name":"Sarthak Mittal"},"score":0,"creation_date":1441976112,"post_id":32523130,"comment_id":52905592,"body_markdown":"@Toto yes i have already tried that too, google can&#39;t always be right ;)","body":"@Toto yes i have already tried that too, google can&#39;t always be right ;)"},{"owner":{"account_id":155533,"reputation":90025,"user_id":372239,"accept_rate":80,"display_name":"Toto"},"score":0,"creation_date":1441976202,"post_id":32523130,"comment_id":52905657,"body_markdown":"Sure :) ; waiting for a chinese people that can answer.","body":"Sure :) ; waiting for a chinese people that can answer."},{"owner":{"account_id":4739783,"reputation":612632,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":4,"creation_date":1441978756,"post_id":32523130,"comment_id":52907493,"body_markdown":"If that is only a Chinese issue, you can use the approach I suggested. Also, here is [a nice resource on Chinese numbers](http://www.mandarintools.com/numbers.html). Acc. to that page, the Chinese numbers can be matched with `[\\\\p{N}零一二三四五六七八九十百千萬億万亿壹貳叄肆伍陸柒捌玖拾佰仟贰叁陆]`.","body":"If that is only a Chinese issue, you can use the approach I suggested. Also, here is <a href=\"http://www.mandarintools.com/numbers.html\" rel=\"nofollow noreferrer\">a nice resource on Chinese numbers</a>. Acc. to that page, the Chinese numbers can be matched with <code>[\\\\p{N}零一二三四五六七八九十百千萬億万亿壹貳叄肆伍陸柒捌玖拾佰仟贰叁陆]</code>."},{"owner":{"account_id":6942679,"reputation":10835,"user_id":5328417,"accept_rate":65,"display_name":"Arsen"},"score":0,"creation_date":1442404500,"post_id":32523130,"comment_id":53066596,"body_markdown":"@SarthakMittal can you give more examples? I have written solution below and I want to text it","body":"@SarthakMittal can you give more examples? I have written solution below and I want to text it"},{"owner":{"account_id":6457401,"reputation":583,"user_id":5002324,"display_name":"Christoph S."},"score":0,"creation_date":1666268792,"post_id":32523130,"comment_id":130899322,"body_markdown":"Since when Chinese use Chinese characters for there phone numbers instead of typing arabic numbers? Did you ever write **your** phone number as a word like &quot;onemilliontwohundredthirtyfourthousandfivehundredsixtyseven&quot;? Doesn&#39;t make sense at all. Why should Chinese do so?","body":"Since when Chinese use Chinese characters for there phone numbers instead of typing arabic numbers? Did you ever write <b>your</b> phone number as a word like &quot;onemilliontwohundredthirtyfourthousandfivehundredsixtyseven&zwnj;&#8203;&quot;? Doesn&#39;t make sense at all. Why should Chinese do so?"},{"owner":{"account_id":6457401,"reputation":583,"user_id":5002324,"display_name":"Christoph S."},"score":0,"creation_date":1666268928,"post_id":32523130,"comment_id":130899370,"body_markdown":"`三十萬零二百五十` is normally written as `三十萬零二百五`. By the way: `二百五` (250) means &quot;idiot&quot; in Chinese language.","body":"<code>三十萬零二百五十</code> is normally written as <code>三十萬零二百五</code>. By the way: <code>二百五</code> (250) means &quot;idiot&quot; in Chinese language."}],"answers":[{"tags":[],"owner":{"account_id":2505165,"reputation":827,"user_id":2179112,"display_name":"Heinrich supports Monica"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1442682812,"creation_date":1442682812,"answer_id":32671039,"question_id":32523130,"body_markdown":"as some have already pointed out in the comments, these are the words used for numbers, i.e. &quot;one&quot;, &quot;two&quot;, &quot;three&quot; etc.\r\nChina introduced the indo-arabic numbers in the 19th century, so `\\p{N}` should also match Chinese numbers. If you also want the literals, you should include them, as stribizhev suggested.","title":"Regex for matching multilingual numbers not detecting Chinese numbers","body":"<p>as some have already pointed out in the comments, these are the words used for numbers, i.e. \"one\", \"two\", \"three\" etc.\nChina introduced the indo-arabic numbers in the 19th century, so <code>\\p{N}</code> should also match Chinese numbers. If you also want the literals, you should include them, as stribizhev suggested.</p>\n"},{"comments":[{"owner":{"account_id":270956,"reputation":563,"user_id":561236,"accept_rate":87,"display_name":"liminal18"},"score":0,"creation_date":1693582782,"post_id":76022018,"comment_id":135784743,"body_markdown":"This is returning [&#39;12&#39;] for me and not including the Chinese numbers.","body":"This is returning [&#39;12&#39;] for me and not including the Chinese numbers."}],"tags":[],"owner":{"account_id":9911496,"reputation":121,"user_id":7338045,"display_name":"Rahul Brahmbhatt"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681558707,"creation_date":1681558707,"answer_id":76022018,"question_id":32523130,"body_markdown":"If you try with javascript it will work with This regex Pattern\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    const stringNumber = &quot;三十萬零二百五十12&quot;;\r\n    const regex = /\\d+/g; \r\n\r\n    const numbers = stringNumber.match(regex);\r\n\r\n    console.log(numbers);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Regex for matching multilingual numbers not detecting Chinese numbers","body":"<p>If you try with javascript it will work with This regex Pattern</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const stringNumber = \"三十萬零二百五十12\";\nconst regex = /\\d+/g; \n\nconst numbers = stringNumber.match(regex);\n\nconsole.log(numbers);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":5356655,"reputation":5914,"user_id":4269149,"display_name":"Sarthak Mittal"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1716,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1681558707,"creation_date":1441973140,"question_id":32523130,"body_markdown":"I have a method which detects whether a String is a number:\r\n\r\n    public static boolean isNumber(String num)\r\n    {\r\n    \treturn num.matches(&quot;(\\\\p{N})+&quot;);\r\n    }\r\n    \r\nThe above method is successfully matching English, Hindi, Arabic numbers but fails to match Chinese numbers:\r\n\r\n三十萬零二百五十 etc.\r\n\r\nIs it possible to create a regex which can match a number from any language(or major languages)? \r\n\r\nedit: the number won&#39;t be a decimal, it will be used to validate a phone number.","title":"Regex for matching multilingual numbers not detecting Chinese numbers","body":"<p>I have a method which detects whether a String is a number:</p>\n\n<pre><code>public static boolean isNumber(String num)\n{\n    return num.matches(\"(\\\\p{N})+\");\n}\n</code></pre>\n\n<p>The above method is successfully matching English, Hindi, Arabic numbers but fails to match Chinese numbers:</p>\n\n<p>三十萬零二百五十 etc.</p>\n\n<p>Is it possible to create a regex which can match a number from any language(or major languages)? </p>\n\n<p>edit: the number won't be a decimal, it will be used to validate a phone number.</p>\n"},{"tags":["java","exception","executorservice","scheduledexecutorservice"],"answers":[{"comments":[{"owner":{"account_id":4211959,"reputation":89,"user_id":3449390,"display_name":"BountyHunter"},"score":0,"creation_date":1680872341,"post_id":75958147,"comment_id":133973225,"body_markdown":"Is there a way to achieve it without using blocking get call?","body":"Is there a way to achieve it without using blocking get call?"},{"owner":{"account_id":19136733,"reputation":67,"user_id":16967432,"display_name":"Peter"},"score":0,"creation_date":1680964381,"post_id":75958147,"comment_id":133984774,"body_markdown":"How about using callback like `Consumer&lt;Throwable&gt; callback` and if exeption throws, use `callback.accept(e);` and in main method `restart((t) -&gt; System.out.println(&quot;Exception occurred: &quot; + t.getMessage()));`?","body":"How about using callback like <code>Consumer&lt;Throwable&gt; callback</code> and if exeption throws, use <code>callback.accept(e);</code> and in main method <code>restart((t) -&gt; System.out.println(&quot;Exception occurred: &quot; + t.getMessage()));</code>?"},{"owner":{"account_id":4211959,"reputation":89,"user_id":3449390,"display_name":"BountyHunter"},"score":0,"creation_date":1681135242,"post_id":75958147,"comment_id":134003810,"body_markdown":"Can you please share the code snippet for that?","body":"Can you please share the code snippet for that?"}],"tags":[],"owner":{"account_id":19136733,"reputation":67,"user_id":16967432,"display_name":"Peter"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681558475,"creation_date":1680868284,"answer_id":75958147,"question_id":75957232,"body_markdown":"This worked for me:\r\n```\r\npublic void restart() throws Exception {\r\n    CompletableFuture&lt;?&gt; delayed = new CompletableFuture&lt;&gt;();\r\n    ScheduledExecutorService executorService = Executors.newSingleThreadScheduledExecutor();\r\n    executorService.scheduleWithFixedDelay(() -&gt; {\r\n        try {\r\n            throw new RuntimeException(&quot;My exception.&quot;);\r\n        } catch(Exception e) {\r\n            delayed.completeExceptionally(e);\r\n        }\r\n    }, 1000L, 150L, TimeUnit.MILLISECONDS);\r\n\r\n    try {\r\n        delayed.get();\r\n    } catch (ExecutionException e) {\r\n        throw (Exception) e.getCause();\r\n    }\r\n}\r\n```\r\n\r\nIn this modified code, we are calling the ``get()`` method on the delayed ``CompletableFuture``, which blocks until the ``CompletableFuture`` is completed. If the ``CompletableFuture`` is completed exceptionally, ``get()`` throws an ``ExecutionException`` with the original exception as its cause. We then extract the cause and rethrow it as an ``Exception``. This way, the exception is bubbled up to the ``restart()`` method and can be handled appropriately.\r\n\r\nBut if we want to achieve it without using blocking get call, we can use callback `Consumer&lt;Throwable&gt; callback` and if exeption throws, use `callback.accept(e);` like in this snippet:\r\n\r\n```\r\n    public static void main(String[] args) {\r\n        restart((t) -&gt; System.out.println(&quot;Exception occurred: &quot; + t.getMessage()));\r\n    }\r\n\r\n    public static void restart(Consumer&lt;Throwable&gt; callback) {\r\n        CompletableFuture.runAsync(() -&gt; {\r\n            try {\r\n                // Code that may throw an exception goes here\r\n                throw new RuntimeException(&quot;My exception.&quot;);\r\n            } catch (Exception e) {\r\n                callback.accept(e);\r\n            }\r\n        });\r\n    }\r\n\r\n```","title":"How to throw new exception in ScheduledExecutorService?","body":"<p>This worked for me:</p>\n<pre><code>public void restart() throws Exception {\n    CompletableFuture&lt;?&gt; delayed = new CompletableFuture&lt;&gt;();\n    ScheduledExecutorService executorService = Executors.newSingleThreadScheduledExecutor();\n    executorService.scheduleWithFixedDelay(() -&gt; {\n        try {\n            throw new RuntimeException(&quot;My exception.&quot;);\n        } catch(Exception e) {\n            delayed.completeExceptionally(e);\n        }\n    }, 1000L, 150L, TimeUnit.MILLISECONDS);\n\n    try {\n        delayed.get();\n    } catch (ExecutionException e) {\n        throw (Exception) e.getCause();\n    }\n}\n</code></pre>\n<p>In this modified code, we are calling the <code>get()</code> method on the delayed <code>CompletableFuture</code>, which blocks until the <code>CompletableFuture</code> is completed. If the <code>CompletableFuture</code> is completed exceptionally, <code>get()</code> throws an <code>ExecutionException</code> with the original exception as its cause. We then extract the cause and rethrow it as an <code>Exception</code>. This way, the exception is bubbled up to the <code>restart()</code> method and can be handled appropriately.</p>\n<p>But if we want to achieve it without using blocking get call, we can use callback <code>Consumer&lt;Throwable&gt; callback</code> and if exeption throws, use <code>callback.accept(e);</code> like in this snippet:</p>\n<pre><code>    public static void main(String[] args) {\n        restart((t) -&gt; System.out.println(&quot;Exception occurred: &quot; + t.getMessage()));\n    }\n\n    public static void restart(Consumer&lt;Throwable&gt; callback) {\n        CompletableFuture.runAsync(() -&gt; {\n            try {\n                // Code that may throw an exception goes here\n                throw new RuntimeException(&quot;My exception.&quot;);\n            } catch (Exception e) {\n                callback.accept(e);\n            }\n        });\n    }\n\n</code></pre>\n"}],"owner":{"account_id":4211959,"reputation":89,"user_id":3449390,"display_name":"BountyHunter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75958147,"answer_count":1,"score":1,"last_activity_date":1681558475,"creation_date":1680860044,"question_id":75957232,"body_markdown":"I have the following code:\r\n\r\n```\r\npublic void restart() throws Exception\r\n{\r\n   CompletableFuture&lt;?&gt; delayed = new CompletableFuture&lt;&gt;(); \r\n   ScheduledExecutorService executorService = \r\n   Executors.newSingleThreadScheduledExecutor();\r\n   executorService.scheduleWithFixedDelay(() -&gt; \r\n   {\r\n      try\r\n      {\r\n         throw new RuntimeException(&quot;My exception.&quot;);\r\n      }\r\n      catch(Exception e)\r\n      {\r\n         delayed.completeExceptionally(e);\r\n      }\r\n   }, 1000L, 150L, TimeUnit.MILLISECONDS));\r\n\r\n   delayed.whenCompleteAsync((r, t) -&gt; {\r\n      if (t != null)\r\n      {\r\n         throw new RuntimeException(t);\r\n      }\r\n   });\r\n}\r\n\r\n```\r\n\r\nI&#39;m trying to bubble up the exception which I&#39;ll catch in my `executorService`. But what happens instead is that the exception is thrown in the try block which is caught and `CompletableFuture` is `completedExceptionally`. Which then rethrows the exception. I was hoping that this way I&#39;d be able to bubble up the exception. \r\n\r\nBut unfortunately, that&#39;s not what&#39;s happening. The `delayed` throws the exception but it doesn&#39;t bubble up. On top of that for some reason, the exception loop starts right after this. Which is try keeps throwing exception and catch keeps catching but of course `completableFuture` has already been completed so it doesn&#39;t come to that.\r\n\r\nThe question is how can we handle and bubble up the exception?","title":"How to throw new exception in ScheduledExecutorService?","body":"<p>I have the following code:</p>\n<pre><code>public void restart() throws Exception\n{\n   CompletableFuture&lt;?&gt; delayed = new CompletableFuture&lt;&gt;(); \n   ScheduledExecutorService executorService = \n   Executors.newSingleThreadScheduledExecutor();\n   executorService.scheduleWithFixedDelay(() -&gt; \n   {\n      try\n      {\n         throw new RuntimeException(&quot;My exception.&quot;);\n      }\n      catch(Exception e)\n      {\n         delayed.completeExceptionally(e);\n      }\n   }, 1000L, 150L, TimeUnit.MILLISECONDS));\n\n   delayed.whenCompleteAsync((r, t) -&gt; {\n      if (t != null)\n      {\n         throw new RuntimeException(t);\n      }\n   });\n}\n\n</code></pre>\n<p>I'm trying to bubble up the exception which I'll catch in my <code>executorService</code>. But what happens instead is that the exception is thrown in the try block which is caught and <code>CompletableFuture</code> is <code>completedExceptionally</code>. Which then rethrows the exception. I was hoping that this way I'd be able to bubble up the exception.</p>\n<p>But unfortunately, that's not what's happening. The <code>delayed</code> throws the exception but it doesn't bubble up. On top of that for some reason, the exception loop starts right after this. Which is try keeps throwing exception and catch keeps catching but of course <code>completableFuture</code> has already been completed so it doesn't come to that.</p>\n<p>The question is how can we handle and bubble up the exception?</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1681581211,"post_id":76021964,"comment_id":134080943,"body_markdown":"so what&#39;s your question?","body":"so what&#39;s your question?"}],"owner":{"account_id":28312618,"reputation":1,"user_id":21649656,"display_name":"user21649656"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681558219,"creation_date":1681558033,"question_id":76021964,"body_markdown":"Error \r\npr 15, 2023 4:46:57 PM org.apache.coyote.http11.Http11Processor service\r\nSEVERE: Error processing request\r\n\r\n\r\n\r\njava.io.UncheckedIOException: Cannot delete C:\\Users\\TANMAY\\Desktop\\TT EE\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp1\\work\\Catalina\\localhost\\Micro\\upload_93202c4e_25ff_4345_a09c_59717f93cba9_00000007.tmp\r\n\tat org.apache.tomcat.util.http.fileupload.disk.DiskFileItem.delete(DiskFileItem.java:431)\r\n\tat org.apache.catalina.core.ApplicationPart.delete(ApplicationPart.java:53)\r\n\tat org.apache.catalina.connector.Request.recycle(Request.java:474)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1623)\r\nCaused by: java.io.IOException: Cannot delete C:\\Users\\TANMAY\\Desktop\\TT EE\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp1\\work\\Catalina\\localhost\\Micro\\upload_93202c4e_25ff_4345_a09c_59717f93cba9_00000007.tmp\r\n\t... 13 more\r\n\r\n\r\n\r\n","title":"IOException SEVERE: Error processing request","body":"<p>Error\npr 15, 2023 4:46:57 PM org.apache.coyote.http11.Http11Processor service\nSEVERE: Error processing request</p>\n<p>java.io.UncheckedIOException: Cannot delete C:\\Users\\TANMAY\\Desktop\\TT EE.metadata.plugins\\org.eclipse.wst.server.core\\tmp1\\work\\Catalina\\localhost\\Micro\\upload_93202c4e_25ff_4345_a09c_59717f93cba9_00000007.tmp\nat org.apache.tomcat.util.http.fileupload.disk.DiskFileItem.delete(DiskFileItem.java:431)\nat org.apache.catalina.core.ApplicationPart.delete(ApplicationPart.java:53)\nat org.apache.catalina.connector.Request.recycle(Request.java:474)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389)\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\nat java.base/java.lang.Thread.run(Thread.java:1623)\nCaused by: java.io.IOException: Cannot delete C:\\Users\\TANMAY\\Desktop\\TT EE.metadata.plugins\\org.eclipse.wst.server.core\\tmp1\\work\\Catalina\\localhost\\Micro\\upload_93202c4e_25ff_4345_a09c_59717f93cba9_00000007.tmp\n... 13 more</p>\n"},{"tags":["java","filter","java-stream"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1681458066,"post_id":76012604,"comment_id":134062470,"body_markdown":"i m not sure about efficient, but you could probably prettify it by using some sort of chain of responsibility pattern. If the list is not empty, pass it on to next handler until last handler then throw an exception if needed, but it would probably just create more boiler plate code than its worth","body":"i m not sure about efficient, but you could probably prettify it by using some sort of chain of responsibility pattern. If the list is not empty, pass it on to next handler until last handler then throw an exception if needed, but it would probably just create more boiler plate code than its worth"}],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681461028,"creation_date":1681460127,"answer_id":76012947,"question_id":76012604,"body_markdown":"This needs a recursive style implementation.\r\n\r\n```java\r\npublic Object lastRemaining(List&lt;Object&gt; listOfObjects, List&lt; Predicate&lt;Object&gt; &gt; filters, int depth) {\r\n    List&lt;Object&gt; filteredObjects = \r\n        emptyIfNull(listOfObjects).stream()\r\n            .filter(filters.get(depth) // may get index out of bounds if not enough filters\r\n            .collect(Collectors.toList());\r\n\r\n    if (filteredObjects.size() == 1) {\r\n        return filteredObjects.get(0);\r\n    } else if (filteredObjects.isEmpty()) {\r\n        throw new Exception();\r\n    } else {\r\n        return lastRemaining(filteredObjects, filters, ++depth);\r\n    }\r\n}\r\n```\r\n\r\nAnd call it like this:\r\n\r\n```java\r\nPredicate&lt;Object&gt; filter1 = o -&gt; o.hashCode() &gt; 5;\r\nPredicate&lt;Object&gt; filter2 = o -&gt; o.hashCode() &lt; 10;\r\n    \r\nfilters.add(filter1);\r\nfilters.add(filter2);\r\nlastRemaining(getAllObjects(), filters, 0);\r\n```\r\n\r\n\r\n\r\n","title":"How to keep filtering a java stream until there&#39;s only one match?","body":"<p>This needs a recursive style implementation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Object lastRemaining(List&lt;Object&gt; listOfObjects, List&lt; Predicate&lt;Object&gt; &gt; filters, int depth) {\n    List&lt;Object&gt; filteredObjects = \n        emptyIfNull(listOfObjects).stream()\n            .filter(filters.get(depth) // may get index out of bounds if not enough filters\n            .collect(Collectors.toList());\n\n    if (filteredObjects.size() == 1) {\n        return filteredObjects.get(0);\n    } else if (filteredObjects.isEmpty()) {\n        throw new Exception();\n    } else {\n        return lastRemaining(filteredObjects, filters, ++depth);\n    }\n}\n</code></pre>\n<p>And call it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Predicate&lt;Object&gt; filter1 = o -&gt; o.hashCode() &gt; 5;\nPredicate&lt;Object&gt; filter2 = o -&gt; o.hashCode() &lt; 10;\n    \nfilters.add(filter1);\nfilters.add(filter2);\nlastRemaining(getAllObjects(), filters, 0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681558129,"creation_date":1681558129,"answer_id":76021972,"question_id":76012604,"body_markdown":"You can simplify your code by not checking for `size() == 0` and have a loop over the filters. A simple method call like this:\r\n\r\n    static Object findOne(List&lt;Object&gt; listOfObjects, Predicate&lt;Object&gt; ... filters) {\r\n        // Ideally use:  Objects.requireNonNull(listOfObjects);\r\n        listOfObjects = emptyIfNull(listOfObjects);\r\n        for (Predicate&lt;Object&gt; filter : filters) {\r\n            listOfObjects = listOfObjects.stream().filter(filter)\r\n                        .collect(Collectors.toList()); // later JDKs: .toList()\r\n            if (listOfObjects.size() == 1) {\r\n                return listOfObjects.get(0);\r\n            }\r\n        }\r\n        throw new RuntimeException(&quot;Not found match&quot;);\r\n    }\r\n    \r\nCall with:\r\n\r\n    Object match = findOne(getAllObjects(), filter1(), filter2(), filter3() /** , ETC */);\r\n\r\n","title":"How to keep filtering a java stream until there&#39;s only one match?","body":"<p>You can simplify your code by not checking for <code>size() == 0</code> and have a loop over the filters. A simple method call like this:</p>\n<pre><code>static Object findOne(List&lt;Object&gt; listOfObjects, Predicate&lt;Object&gt; ... filters) {\n    // Ideally use:  Objects.requireNonNull(listOfObjects);\n    listOfObjects = emptyIfNull(listOfObjects);\n    for (Predicate&lt;Object&gt; filter : filters) {\n        listOfObjects = listOfObjects.stream().filter(filter)\n                    .collect(Collectors.toList()); // later JDKs: .toList()\n        if (listOfObjects.size() == 1) {\n            return listOfObjects.get(0);\n        }\n    }\n    throw new RuntimeException(&quot;Not found match&quot;);\n}\n</code></pre>\n<p>Call with:</p>\n<pre><code>Object match = findOne(getAllObjects(), filter1(), filter2(), filter3() /** , ETC */);\n</code></pre>\n"}],"owner":{"account_id":14968254,"reputation":120,"user_id":10805890,"display_name":"Link"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":477,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1681558129,"creation_date":1681457609,"question_id":76012604,"body_markdown":"I have a list of objects and I need to choose the one that matches on most conditions. This means that I need to keep filtering until there&#39;s only one element left or until there&#39;s no elements left - in which case I throw.\r\nI only have 3 levels of filtering as of now, so if by the last filter there&#39;s 0 or more than one matches, I throw too. And yes, the order of the filtering matters.\r\n\r\nI wrote something that works but I wonder if there&#39;s any way of making it prettier or more efficient. Any help appreciated!\r\n\r\n```java\r\nList&lt;Object&gt; listOfObjects = getAllObjects();\r\n\r\nList&lt;Object&gt; filteredObjects1 =\r\n    emptyIfNull(listOfObjects).stream()\r\n        .filter(filter1())\r\n        .collect(Collectors.toList());\r\n\r\nif (filteredObjects1.size() == 1) {\r\n    return filteredObjects1.get(0);\r\n}\r\n\r\nif (filteredObjects1.size() == 0) {\r\n    throw new Exception();\r\n}\r\n\r\nList&lt;Object&gt; filteredObjects2 =\r\n    emptyIfNull(filteredObjects1).stream()\r\n        .filter(filter2())\r\n        .collect(Collectors.toList());\r\n\r\nif (filteredObjects2.size() == 1) {\r\n    return filteredObjects2.get(0);\r\n}\r\n\r\nif (filteredObjects2.size() == 0) {\r\n    throw new Exception();\r\n}\r\n\r\nList&lt;Object&gt; filteredObjects3 =\r\n    emptyIfNull(filteredObjects1).stream()\r\n        .filter(filter3())\r\n        .collect(Collectors.toList());\r\n\r\nif (filteredObjects3.size() == 1) {\r\n    return filteredObjects3.get(0);\r\n} \r\n\r\nthrow new Exception();\r\n```","title":"How to keep filtering a java stream until there&#39;s only one match?","body":"<p>I have a list of objects and I need to choose the one that matches on most conditions. This means that I need to keep filtering until there's only one element left or until there's no elements left - in which case I throw.\nI only have 3 levels of filtering as of now, so if by the last filter there's 0 or more than one matches, I throw too. And yes, the order of the filtering matters.</p>\n<p>I wrote something that works but I wonder if there's any way of making it prettier or more efficient. Any help appreciated!</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Object&gt; listOfObjects = getAllObjects();\n\nList&lt;Object&gt; filteredObjects1 =\n    emptyIfNull(listOfObjects).stream()\n        .filter(filter1())\n        .collect(Collectors.toList());\n\nif (filteredObjects1.size() == 1) {\n    return filteredObjects1.get(0);\n}\n\nif (filteredObjects1.size() == 0) {\n    throw new Exception();\n}\n\nList&lt;Object&gt; filteredObjects2 =\n    emptyIfNull(filteredObjects1).stream()\n        .filter(filter2())\n        .collect(Collectors.toList());\n\nif (filteredObjects2.size() == 1) {\n    return filteredObjects2.get(0);\n}\n\nif (filteredObjects2.size() == 0) {\n    throw new Exception();\n}\n\nList&lt;Object&gt; filteredObjects3 =\n    emptyIfNull(filteredObjects1).stream()\n        .filter(filter3())\n        .collect(Collectors.toList());\n\nif (filteredObjects3.size() == 1) {\n    return filteredObjects3.get(0);\n} \n\nthrow new Exception();\n</code></pre>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1681557918,"post_id":76021919,"comment_id":134077849,"body_markdown":"`Scanner.Sc` would try to reference a nested/inner class called `Sc` inside of `Scanner`. Such a class does not exist. You *probably* meant to write `Scanner Sc` (which would define a variable named `Sc` of type `Scanner`). Also (and that&#39;s not a cause for a problem, but just a good suggestion): the naming convention in Java says that variables should start with a lower case letter, so `Scanner sc` is the more common/widely understood way.","body":"<code>Scanner.Sc</code> would try to reference a nested/inner class called <code>Sc</code> inside of <code>Scanner</code>. Such a class does not exist. You <i>probably</i> meant to write <code>Scanner Sc</code> (which would define a variable named <code>Sc</code> of type <code>Scanner</code>). Also (and that&#39;s not a cause for a problem, but just a good suggestion): the naming convention in Java says that variables should start with a lower case letter, so <code>Scanner sc</code> is the more common/widely understood way."}],"owner":{"account_id":24912938,"reputation":9,"user_id":18782262,"display_name":"Pallavi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1681557836,"answer_count":0,"score":0,"last_activity_date":1681557815,"creation_date":1681557535,"question_id":76021919,"body_markdown":"```\r\nimport java.util.*;\r\npublic class add {\r\n\r\n    public static void main (String args[]){\r\n\r\n        Scanner.Sc = new Scanner(System.in);\r\n        int a = Sc.nextInt();\r\n        int b =  Sc.nextInt();\r\n        int sum=  a+b;\r\n\r\n        System.out.println(sum);\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n    \r\n}\r\n```\r\n\r\nProblem:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems: \r\n        Sc cannot be resolved or is not a field\r\n        Sc cannot be resolved\r\n        Sc cannot be resolved\r\n\r\n        at add.main(add.java:6)\r\n\r\n\r\n\r\nException in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems: \r\n        Sc cannot be resolved or is not a field\r\n        Sc cannot be resolved\r\n        Sc cannot be resolved\r\n\r\n        at add.main(add.java:6)\r\n```","title":"Scanner class &#39;SC&#39; Sc cannot be resolved or is not a field","body":"<pre><code>import java.util.*;\npublic class add {\n\n    public static void main (String args[]){\n\n        Scanner.Sc = new Scanner(System.in);\n        int a = Sc.nextInt();\n        int b =  Sc.nextInt();\n        int sum=  a+b;\n\n        System.out.println(sum);\n\n\n\n\n\n    }\n    \n}\n</code></pre>\n<p>Problem:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems: \n        Sc cannot be resolved or is not a field\n        Sc cannot be resolved\n        Sc cannot be resolved\n\n        at add.main(add.java:6)\n\n\n\nException in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems: \n        Sc cannot be resolved or is not a field\n        Sc cannot be resolved\n        Sc cannot be resolved\n\n        at add.main(add.java:6)\n</code></pre>\n"},{"tags":["java","lambda","java-8","java-stream"],"comments":[{"owner":{"account_id":2347441,"reputation":67550,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"score":0,"creation_date":1396115333,"post_id":22725537,"comment_id":34649902,"body_markdown":"After coding a bit with your example, I actually find the explicit version more readable than the one concerning, if it had existed `.flatMap(Optional::toStream)`, with your version you actually see what is going on.","body":"After coding a bit with your example, I actually find the explicit version more readable than the one concerning, if it had existed <code>.flatMap(Optional::toStream)</code>, with your version you actually see what is going on."},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":21,"creation_date":1424903449,"post_id":22725537,"comment_id":45747994,"body_markdown":"@skiwi Well, `Optional.stream` exists in JDK 9 now....","body":"@skiwi Well, <code>Optional.stream</code> exists in JDK 9 now...."},{"owner":{"account_id":937438,"reputation":8861,"user_id":966104,"accept_rate":70,"display_name":"Yona Appletree"},"score":0,"creation_date":1425257783,"post_id":22725537,"comment_id":45876182,"body_markdown":"I&#39;m curious where this is documented, and what the process for getting it in was. There are some other methods that really seem like they should exist, and I&#39;m curious where discussion for API changes is taking place.","body":"I&#39;m curious where this is documented, and what the process for getting it in was. There are some other methods that really seem like they should exist, and I&#39;m curious where discussion for API changes is taking place."},{"owner":{"account_id":83010,"reputation":27402,"user_id":233014,"display_name":"Christoffer Hammarstr&#246;m"},"score":3,"creation_date":1426168670,"post_id":22725537,"comment_id":46268463,"body_markdown":"https://bugs.openjdk.java.net/browse/JDK-8050820","body":"<a href=\"https://bugs.openjdk.java.net/browse/JDK-8050820\" rel=\"nofollow noreferrer\">bugs.openjdk.java.net/browse/JDK-8050820</a>"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":12,"creation_date":1435850943,"post_id":22725537,"comment_id":50382510,"body_markdown":"The funny thing is that JDK-8050820 actually refers to this question in its description!","body":"The funny thing is that JDK-8050820 actually refers to this question in its description!"},{"owner":{"account_id":2105809,"reputation":3833,"user_id":1872168,"accept_rate":64,"display_name":"Crystark"},"score":0,"creation_date":1447171703,"post_id":22725537,"comment_id":55042383,"body_markdown":"In a pure performance perspective, I think what you did is just fine. I&#39;m not sure how Java 8 implements `flatMap` but this usually introduces a merge which doesn&#39;t scale as well as some simple `.filter().map()`.","body":"In a pure performance perspective, I think what you did is just fine. I&#39;m not sure how Java 8 implements <code>flatMap</code> but this usually introduces a merge which doesn&#39;t scale as well as some simple <code>.filter().map()</code>."},{"owner":{"account_id":4250230,"reputation":1766,"user_id":3477539,"accept_rate":83,"display_name":"Rostislav V"},"score":0,"creation_date":1570515234,"post_id":22725537,"comment_id":102927632,"body_markdown":"I hope my answer may help you: https://stackoverflow.com/a/58281000/3477539","body":"I hope my answer may help you: <a href=\"https://stackoverflow.com/a/58281000/3477539\">stackoverflow.com/a/58281000/3477539</a>"}],"answers":[{"comments":[{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":7,"creation_date":1396066696,"post_id":22725767,"comment_id":34636587,"body_markdown":"I think the OP&#39;s resolve() method returning Optional&lt;Other&gt; is a perfectly sensible use of Optional. I can&#39;t speak to the OP&#39;s problem domain, of course, but it could be that the way to determine whether something is resolvable is to attempt to resolve it. If so, Optional fuses a boolean result of &quot;was this resolvable&quot; with the result of the resolution, if successful, into a single API call.","body":"I think the OP&#39;s resolve() method returning Optional&lt;Other&gt; is a perfectly sensible use of Optional. I can&#39;t speak to the OP&#39;s problem domain, of course, but it could be that the way to determine whether something is resolvable is to attempt to resolve it. If so, Optional fuses a boolean result of &quot;was this resolvable&quot; with the result of the resolution, if successful, into a single API call."},{"owner":{"account_id":937438,"reputation":8861,"user_id":966104,"accept_rate":70,"display_name":"Yona Appletree"},"score":2,"creation_date":1396291393,"post_id":22725767,"comment_id":34712933,"body_markdown":"Stuart is basically correct. I have a set of search terms in order of desirability, and I&#39;m looking to find the result of the first one that returns anything. So basically `Optional&lt;Result&gt; searchFor(Term t)`. That seems to fit the intention of Optional. Also, stream()s should be lazily evaluated, so no extra work resolving terms past the first matching one should occur.","body":"Stuart is basically correct. I have a set of search terms in order of desirability, and I&#39;m looking to find the result of the first one that returns anything. So basically <code>Optional&lt;Result&gt; searchFor(Term t)</code>. That seems to fit the intention of Optional. Also, stream()s should be lazily evaluated, so no extra work resolving terms past the first matching one should occur."},{"owner":{"account_id":126114,"reputation":729,"user_id":322383,"accept_rate":100,"display_name":"dzs"},"score":0,"creation_date":1459408917,"post_id":22725767,"comment_id":60275865,"body_markdown":"The question is perfectly sensible and using flatMap with Optional is often practiced in other, similar programming languages, such as Scala.","body":"The question is perfectly sensible and using flatMap with Optional is often practiced in other, similar programming languages, such as Scala."}],"tags":[],"owner":{"account_id":1285,"reputation":8351,"user_id":1712,"accept_rate":84,"display_name":"Roland Tepp"},"comment_count":3,"down_vote_count":8,"up_vote_count":3,"is_accepted":false,"score":-5,"last_activity_date":1396055720,"creation_date":1396055720,"answer_id":22725767,"question_id":22725537,"body_markdown":"Most likely You are doing it wrong.\r\n\r\nJava 8 Optional is not meant to be used in this manner. It is usually only reserved for terminal stream operations that may or may not return a value, like find for example.\r\n\r\nIn your case it might be better to first try to find a cheap way to filter out those items that are resolvable and then get the first item as an optional and resolve it as a last operation. Better yet - instead of filtering, find the first resolvable item and resolve it.\r\n\r\n    things.filter(Thing::isResolvable)\r\n          .findFirst()\r\n          .flatMap(this::resolve)\r\n          .get();\r\n\r\nRule of thumb is that you should strive to reduce number of items in the stream before you transform them to something else. YMMV of course.","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>Most likely You are doing it wrong.</p>\n\n<p>Java 8 Optional is not meant to be used in this manner. It is usually only reserved for terminal stream operations that may or may not return a value, like find for example.</p>\n\n<p>In your case it might be better to first try to find a cheap way to filter out those items that are resolvable and then get the first item as an optional and resolve it as a last operation. Better yet - instead of filtering, find the first resolvable item and resolve it.</p>\n\n<pre><code>things.filter(Thing::isResolvable)\n      .findFirst()\n      .flatMap(this::resolve)\n      .get();\n</code></pre>\n\n<p>Rule of thumb is that you should strive to reduce number of items in the stream before you transform them to something else. YMMV of course.</p>\n"},{"comments":[{"owner":{"account_id":2347441,"reputation":67550,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"score":1,"creation_date":1396092271,"post_id":22726869,"comment_id":34642563,"body_markdown":"There was a suggested edit on this post showing that the `streamopt` helper can be done much more concise, with the `orElse` method, however I had to deny the edit as it would have been a radical change, you could still apply it to your post though.","body":"There was a suggested edit on this post showing that the <code>streamopt</code> helper can be done much more concise, with the <code>orElse</code> method, however I had to deny the edit as it would have been a radical change, you could still apply it to your post though."},{"owner":{"account_id":2347441,"reputation":67550,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"score":1,"creation_date":1396092342,"post_id":22726869,"comment_id":34642584,"body_markdown":"Is there any chance that, if you say it is a small loophole, a method as `Optional.toStream()` (returning either empty or one-element stream) will be added to the JDK? Will it possibly be added in an update to Java 8, or are functional updates never done in an already released version?","body":"Is there any chance that, if you say it is a small loophole, a method as <code>Optional.toStream()</code> (returning either empty or one-element stream) will be added to the JDK? Will it possibly be added in an update to Java 8, or are functional updates never done in an already released version?"},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":2,"creation_date":1396093365,"post_id":22726869,"comment_id":34642893,"body_markdown":"I don&#39;t think the api can change until Java 9 now.","body":"I don&#39;t think the api can change until Java 9 now."},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":1,"creation_date":1396108939,"post_id":22726869,"comment_id":34647776,"body_markdown":"@skiwi Re proposed edits, I saw those, and they&#39;re more concise but also more obscure. I&#39;d suggest that anyone who wants to can post the alternative in his/her own answer.","body":"@skiwi Re proposed edits, I saw those, and they&#39;re more concise but also more obscure. I&#39;d suggest that anyone who wants to can post the alternative in his/her own answer."},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":1,"creation_date":1396109101,"post_id":22726869,"comment_id":34647826,"body_markdown":"@assylias, skiwi, yes, API changes will have to wait until Java 9.","body":"@assylias, skiwi, yes, API changes will have to wait until Java 9."},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":1,"creation_date":1396204449,"post_id":22726869,"comment_id":34673935,"body_markdown":"@srborlongan I&#39;d encourage you to post your own answer to this question instead of proposing edits to my answer. Yours is a valid comment but it should be under your own name.","body":"@srborlongan I&#39;d encourage you to post your own answer to this question instead of proposing edits to my answer. Yours is a valid comment but it should be under your own name."},{"owner":{"account_id":937438,"reputation":8861,"user_id":966104,"accept_rate":70,"display_name":"Yona Appletree"},"score":0,"creation_date":1396291839,"post_id":22726869,"comment_id":34713192,"body_markdown":"I&#39;m going to accept this, though I think that that .filter().map() is probably what I&#39;ll use since I try to avoid little easily-forgotten helper methods that others&#39; in the code base won&#39;t likely discover. I would love to see a stream() or similar method in Java 9, though.","body":"I&#39;m going to accept this, though I think that that .filter().map() is probably what I&#39;ll use since I try to avoid little easily-forgotten helper methods that others&#39; in the code base won&#39;t likely discover. I would love to see a stream() or similar method in Java 9, though."},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":6,"creation_date":1396314022,"post_id":22726869,"comment_id":34722749,"body_markdown":"@Hypher Thanks. The .filter().map() technique isn&#39;t too bad and avoids dependencies on helper methods. &#39;Twould be nice if there were a more concise way though. I&#39;ll investigate getting Optional.stream() added.","body":"@Hypher Thanks. The .filter().map() technique isn&#39;t too bad and avoids dependencies on helper methods. &#39;Twould be nice if there were a more concise way though. I&#39;ll investigate getting Optional.stream() added."},{"owner":{"account_id":156402,"reputation":5673,"user_id":373671,"display_name":"kubek2k"},"score":49,"creation_date":1424902215,"post_id":22726869,"comment_id":45747425,"body_markdown":"I prefer: `static &lt;T&gt; Stream&lt;T&gt; streamopt(Optional&lt;T&gt; opt) {\n          return opt.map(Stream::of).orElse(Stream.empty());\n    }`","body":"I prefer: <code>static &lt;T&gt; Stream&lt;T&gt; streamopt(Optional&lt;T&gt; opt) {           return opt.map(Stream::of).orElse(Stream.empty());     }</code>"},{"owner":{"account_id":3977767,"reputation":22190,"user_id":3280538,"accept_rate":74,"display_name":"flakes"},"score":6,"creation_date":1476977327,"post_id":22726869,"comment_id":67586095,"body_markdown":"I wish they would just add an `Optional` overload to `Stream#flatMap`... that way you could just write `stream().flatMap(this::resolve)`","body":"I wish they would just add an <code>Optional</code> overload to <code>Stream#flatMap</code>... that way you could just write <code>stream().flatMap(this::resolve)</code>"},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":4,"creation_date":1476986451,"post_id":22726869,"comment_id":67591666,"body_markdown":"@flkes Yeah we&#39;ve kicked around this idea, but it doesn&#39;t seem to add all that much value now that (in JDK 9) there is `Optional.stream()`.","body":"@flkes Yeah we&#39;ve kicked around this idea, but it doesn&#39;t seem to add all that much value now that (in JDK 9) there is <code>Optional.stream()</code>."},{"owner":{"account_id":3977767,"reputation":22190,"user_id":3280538,"accept_rate":74,"display_name":"flakes"},"score":0,"creation_date":1476988839,"post_id":22726869,"comment_id":67593117,"body_markdown":"@StuartMarks I suppose it also keeps code more readable, knowing at a glance whether `resolve` returns a `Stream` or an `Optional`.","body":"@StuartMarks I suppose it also keeps code more readable, knowing at a glance whether <code>resolve</code> returns a <code>Stream</code> or an <code>Optional</code>."},{"owner":{"account_id":667308,"reputation":46349,"user_id":1161878,"accept_rate":81,"display_name":"Gene"},"score":0,"creation_date":1575956365,"post_id":22726869,"comment_id":104730370,"body_markdown":"Note  if you&#39;re stuck with Java 8, you can get the equivalent of Java 9&#39;s optional-to-stream method with `optionalFoo.map(Stream::of).orElseGet(Stream::of)` (for use with `flatMap`). Hurts my head a little, but it works.","body":"Note  if you&#39;re stuck with Java 8, you can get the equivalent of Java 9&#39;s optional-to-stream method with <code>optionalFoo.map(Stream::of).orElseGet(Stream::of)</code> (for use with <code>flatMap</code>). Hurts my head a little, but it works."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":1,"creation_date":1580990543,"post_id":22726869,"comment_id":106284281,"body_markdown":"@kubek2k Better yet, `opt.map(Stream::of).orElseGet(Stream::empty)` — because for some reason the result of `Stream.empty()` isn’t cached, so your code always re-creates a somewhat costly empty stream, even if there’s no need.","body":"@kubek2k Better yet, <code>opt.map(Stream::of).orElseGet(Stream::empty)</code> — because for some reason the result of <code>Stream.empty()</code> isn’t cached, so your code always re-creates a somewhat costly empty stream, even if there’s no need."}],"tags":[],"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"comment_count":14,"down_vote_count":1,"up_vote_count":359,"is_accepted":true,"score":358,"last_activity_date":1593073696,"creation_date":1396066205,"answer_id":22726869,"question_id":22725537,"body_markdown":"&lt;h2&gt;Java 9&lt;/h2&gt;\r\n\r\n[`Optional.stream`](https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#stream--) has been added to JDK 9. This enables you to do the following, without the need of any helper method:\r\n\r\n    Optional&lt;Other&gt; result =\r\n        things.stream()\r\n              .map(this::resolve)\r\n              .flatMap(Optional::stream)\r\n              .findFirst();\r\n\r\n&lt;h2&gt;Java 8&lt;/h2&gt;\r\n\r\nYes, this was a small hole in the API, in that it&#39;s somewhat inconvenient to turn an `Optional&lt;T&gt;` into a zero-or-one length `Stream&lt;T&gt;`. You could do this:\r\n\r\n    Optional&lt;Other&gt; result =\r\n        things.stream()\r\n              .map(this::resolve)\r\n              .flatMap(o -&gt; o.isPresent() ? Stream.of(o.get()) : Stream.empty())\r\n              .findFirst();\r\n\r\nHaving the ternary operator inside the `flatMap` is a bit cumbersome, though, so it might be better to write a little helper function to do this:\r\n\r\n    /**\r\n     * Turns an Optional&lt;T&gt; into a Stream&lt;T&gt; of length zero or one depending upon\r\n     * whether a value is present.\r\n     */\r\n    static &lt;T&gt; Stream&lt;T&gt; streamopt(Optional&lt;T&gt; opt) {\r\n        if (opt.isPresent())\r\n            return Stream.of(opt.get());\r\n        else\r\n            return Stream.empty();\r\n    }\r\n\r\n    Optional&lt;Other&gt; result =\r\n        things.stream()\r\n              .flatMap(t -&gt; streamopt(resolve(t)))\r\n              .findFirst();\r\n\r\nHere, I&#39;ve inlined the call to `resolve()` instead of having a separate `map()` operation, but this is a matter of taste.","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<h2>Java 9</h2>\n<p><a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#stream--\" rel=\"noreferrer\"><code>Optional.stream</code></a> has been added to JDK 9. This enables you to do the following, without the need of any helper method:</p>\n<pre><code>Optional&lt;Other&gt; result =\n    things.stream()\n          .map(this::resolve)\n          .flatMap(Optional::stream)\n          .findFirst();\n</code></pre>\n<h2>Java 8</h2>\n<p>Yes, this was a small hole in the API, in that it's somewhat inconvenient to turn an <code>Optional&lt;T&gt;</code> into a zero-or-one length <code>Stream&lt;T&gt;</code>. You could do this:</p>\n<pre><code>Optional&lt;Other&gt; result =\n    things.stream()\n          .map(this::resolve)\n          .flatMap(o -&gt; o.isPresent() ? Stream.of(o.get()) : Stream.empty())\n          .findFirst();\n</code></pre>\n<p>Having the ternary operator inside the <code>flatMap</code> is a bit cumbersome, though, so it might be better to write a little helper function to do this:</p>\n<pre><code>/**\n * Turns an Optional&lt;T&gt; into a Stream&lt;T&gt; of length zero or one depending upon\n * whether a value is present.\n */\nstatic &lt;T&gt; Stream&lt;T&gt; streamopt(Optional&lt;T&gt; opt) {\n    if (opt.isPresent())\n        return Stream.of(opt.get());\n    else\n        return Stream.empty();\n}\n\nOptional&lt;Other&gt; result =\n    things.stream()\n          .flatMap(t -&gt; streamopt(resolve(t)))\n          .findFirst();\n</code></pre>\n<p>Here, I've inlined the call to <code>resolve()</code> instead of having a separate <code>map()</code> operation, but this is a matter of taste.</p>\n"},{"tags":[],"owner":{"account_id":2347441,"reputation":67550,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"comment_count":0,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1396118156,"creation_date":1396118156,"answer_id":22735184,"question_id":22725537,"body_markdown":"You cannot do it more concise as you are already doing.\n\nYou claim that you do not want `.filter(Optional::isPresent)` *and* `.map(Optional::get)`.\n\nThis has been resolved by the method @StuartMarks describes, however as a result you now map it to an `Optional&lt;T&gt;`, so now you need to use `.flatMap(this::streamopt)` and a `get()` in the end.\n\nSo it still consists of two statements and you can now get exceptions with the new method! Because, what if every optional is empty? Then the `findFirst()` will return an empty optional and your `get()` will fail!\n\nSo what you have:\n\n    things.stream()\n        .map(this::resolve)\n        .filter(Optional::isPresent)\n        .map(Optional::get)\n        .findFirst();\n\n**is** actually the best way to accomplish what you want, and that is you want to save the result as a `T`, not as an `Optional&lt;T&gt;`.\n\nI took the liberty of creating a `CustomOptional&lt;T&gt;` class that wraps the `Optional&lt;T&gt;` and provides an extra method, `flatStream()`. Note that you cannot extend `Optional&lt;T&gt;`:\n\n    class CustomOptional&lt;T&gt; {\n        private final Optional&lt;T&gt; optional;\n\n        private CustomOptional() {\n            this.optional = Optional.empty();\n        }\n\n        private CustomOptional(final T value) {\n            this.optional = Optional.of(value);\n        }\n\n        private CustomOptional(final Optional&lt;T&gt; optional) {\n            this.optional = optional;\n        }\n\n        public Optional&lt;T&gt; getOptional() {\n            return optional;\n        }\n\n        public static &lt;T&gt; CustomOptional&lt;T&gt; empty() {\n            return new CustomOptional&lt;&gt;();\n        }\n\n        public static &lt;T&gt; CustomOptional&lt;T&gt; of(final T value) {\n            return new CustomOptional&lt;&gt;(value);\n        }\n\n        public static &lt;T&gt; CustomOptional&lt;T&gt; ofNullable(final T value) {\n            return (value == null) ? empty() : of(value);\n        }\n\n        public T get() {\n            return optional.get();\n        }\n\n        public boolean isPresent() {\n            return optional.isPresent();\n        }\n\n        public void ifPresent(final Consumer&lt;? super T&gt; consumer) {\n            optional.ifPresent(consumer);\n        }\n\n        public CustomOptional&lt;T&gt; filter(final Predicate&lt;? super T&gt; predicate) {\n            return new CustomOptional&lt;&gt;(optional.filter(predicate));\n        }\n\n        public &lt;U&gt; CustomOptional&lt;U&gt; map(final Function&lt;? super T, ? extends U&gt; mapper) {\n            return new CustomOptional&lt;&gt;(optional.map(mapper));\n        }\n\n        public &lt;U&gt; CustomOptional&lt;U&gt; flatMap(final Function&lt;? super T, ? extends CustomOptional&lt;U&gt;&gt; mapper) {\n            return new CustomOptional&lt;&gt;(optional.flatMap(mapper.andThen(cu -&gt; cu.getOptional())));\n        }\n\n        public T orElse(final T other) {\n            return optional.orElse(other);\n        }\n\n        public T orElseGet(final Supplier&lt;? extends T&gt; other) {\n            return optional.orElseGet(other);\n        }\n\n        public &lt;X extends Throwable&gt; T orElseThrow(final Supplier&lt;? extends X&gt; exceptionSuppier) throws X {\n            return optional.orElseThrow(exceptionSuppier);\n        }\n\n        public Stream&lt;T&gt; flatStream() {\n            if (!optional.isPresent()) {\n                return Stream.empty();\n            }\n            return Stream.of(get());\n        }\n\n        public T getTOrNull() {\n            if (!optional.isPresent()) {\n                return null;\n            }\n            return get();\n        }\n\n        @Override\n        public boolean equals(final Object obj) {\n            return optional.equals(obj);\n        }\n\n        @Override\n        public int hashCode() {\n            return optional.hashCode();\n        }\n\n        @Override\n        public String toString() {\n            return optional.toString();\n        }\n    }\n\nYou will see that I added `flatStream()`, as here:\n\n    public Stream&lt;T&gt; flatStream() {\n        if (!optional.isPresent()) {\n            return Stream.empty();\n        }\n        return Stream.of(get());\n    }\n\nUsed as:\n\n    String result = Stream.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;de&quot;, &quot;fg&quot;, &quot;hij&quot;)\n            .map(this::resolve)\n            .flatMap(CustomOptional::flatStream)\n            .findFirst()\n            .get();\n\nYou *still* will need to return a `Stream&lt;T&gt;` here, as you cannot return `T`, because if `!optional.isPresent()`, then `T == null` if you declare it such, but then your `.flatMap(CustomOptional::flatStream)` would attempt to add `null` to a stream and that is not possible.\n\nAs example:\n\n    public T getTOrNull() {\n        if (!optional.isPresent()) {\n            return null;\n        }\n        return get();\n    }\n\nUsed as:\n\n    String result = Stream.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;de&quot;, &quot;fg&quot;, &quot;hij&quot;)\n            .map(this::resolve)\n            .map(CustomOptional::getTOrNull)\n            .findFirst()\n            .get();\n\nWill now throw a `NullPointerException` inside the stream operations.\n\n# Conclusion\n\nThe method you used, is actually the best method.","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>You cannot do it more concise as you are already doing.</p>\n<p>You claim that you do not want <code>.filter(Optional::isPresent)</code> <em>and</em> <code>.map(Optional::get)</code>.</p>\n<p>This has been resolved by the method @StuartMarks describes, however as a result you now map it to an <code>Optional&lt;T&gt;</code>, so now you need to use <code>.flatMap(this::streamopt)</code> and a <code>get()</code> in the end.</p>\n<p>So it still consists of two statements and you can now get exceptions with the new method! Because, what if every optional is empty? Then the <code>findFirst()</code> will return an empty optional and your <code>get()</code> will fail!</p>\n<p>So what you have:</p>\n<pre><code>things.stream()\n    .map(this::resolve)\n    .filter(Optional::isPresent)\n    .map(Optional::get)\n    .findFirst();\n</code></pre>\n<p><strong>is</strong> actually the best way to accomplish what you want, and that is you want to save the result as a <code>T</code>, not as an <code>Optional&lt;T&gt;</code>.</p>\n<p>I took the liberty of creating a <code>CustomOptional&lt;T&gt;</code> class that wraps the <code>Optional&lt;T&gt;</code> and provides an extra method, <code>flatStream()</code>. Note that you cannot extend <code>Optional&lt;T&gt;</code>:</p>\n<pre><code>class CustomOptional&lt;T&gt; {\n    private final Optional&lt;T&gt; optional;\n\n    private CustomOptional() {\n        this.optional = Optional.empty();\n    }\n\n    private CustomOptional(final T value) {\n        this.optional = Optional.of(value);\n    }\n\n    private CustomOptional(final Optional&lt;T&gt; optional) {\n        this.optional = optional;\n    }\n\n    public Optional&lt;T&gt; getOptional() {\n        return optional;\n    }\n\n    public static &lt;T&gt; CustomOptional&lt;T&gt; empty() {\n        return new CustomOptional&lt;&gt;();\n    }\n\n    public static &lt;T&gt; CustomOptional&lt;T&gt; of(final T value) {\n        return new CustomOptional&lt;&gt;(value);\n    }\n\n    public static &lt;T&gt; CustomOptional&lt;T&gt; ofNullable(final T value) {\n        return (value == null) ? empty() : of(value);\n    }\n\n    public T get() {\n        return optional.get();\n    }\n\n    public boolean isPresent() {\n        return optional.isPresent();\n    }\n\n    public void ifPresent(final Consumer&lt;? super T&gt; consumer) {\n        optional.ifPresent(consumer);\n    }\n\n    public CustomOptional&lt;T&gt; filter(final Predicate&lt;? super T&gt; predicate) {\n        return new CustomOptional&lt;&gt;(optional.filter(predicate));\n    }\n\n    public &lt;U&gt; CustomOptional&lt;U&gt; map(final Function&lt;? super T, ? extends U&gt; mapper) {\n        return new CustomOptional&lt;&gt;(optional.map(mapper));\n    }\n\n    public &lt;U&gt; CustomOptional&lt;U&gt; flatMap(final Function&lt;? super T, ? extends CustomOptional&lt;U&gt;&gt; mapper) {\n        return new CustomOptional&lt;&gt;(optional.flatMap(mapper.andThen(cu -&gt; cu.getOptional())));\n    }\n\n    public T orElse(final T other) {\n        return optional.orElse(other);\n    }\n\n    public T orElseGet(final Supplier&lt;? extends T&gt; other) {\n        return optional.orElseGet(other);\n    }\n\n    public &lt;X extends Throwable&gt; T orElseThrow(final Supplier&lt;? extends X&gt; exceptionSuppier) throws X {\n        return optional.orElseThrow(exceptionSuppier);\n    }\n\n    public Stream&lt;T&gt; flatStream() {\n        if (!optional.isPresent()) {\n            return Stream.empty();\n        }\n        return Stream.of(get());\n    }\n\n    public T getTOrNull() {\n        if (!optional.isPresent()) {\n            return null;\n        }\n        return get();\n    }\n\n    @Override\n    public boolean equals(final Object obj) {\n        return optional.equals(obj);\n    }\n\n    @Override\n    public int hashCode() {\n        return optional.hashCode();\n    }\n\n    @Override\n    public String toString() {\n        return optional.toString();\n    }\n}\n</code></pre>\n<p>You will see that I added <code>flatStream()</code>, as here:</p>\n<pre><code>public Stream&lt;T&gt; flatStream() {\n    if (!optional.isPresent()) {\n        return Stream.empty();\n    }\n    return Stream.of(get());\n}\n</code></pre>\n<p>Used as:</p>\n<pre><code>String result = Stream.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;de&quot;, &quot;fg&quot;, &quot;hij&quot;)\n        .map(this::resolve)\n        .flatMap(CustomOptional::flatStream)\n        .findFirst()\n        .get();\n</code></pre>\n<p>You <em>still</em> will need to return a <code>Stream&lt;T&gt;</code> here, as you cannot return <code>T</code>, because if <code>!optional.isPresent()</code>, then <code>T == null</code> if you declare it such, but then your <code>.flatMap(CustomOptional::flatStream)</code> would attempt to add <code>null</code> to a stream and that is not possible.</p>\n<p>As example:</p>\n<pre><code>public T getTOrNull() {\n    if (!optional.isPresent()) {\n        return null;\n    }\n    return get();\n}\n</code></pre>\n<p>Used as:</p>\n<pre><code>String result = Stream.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;de&quot;, &quot;fg&quot;, &quot;hij&quot;)\n        .map(this::resolve)\n        .map(CustomOptional::getTOrNull)\n        .findFirst()\n        .get();\n</code></pre>\n<p>Will now throw a <code>NullPointerException</code> inside the stream operations.</p>\n<h1>Conclusion</h1>\n<p>The method you used, is actually the best method.</p>\n"},{"tags":[],"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"comment_count":0,"down_vote_count":0,"up_vote_count":71,"is_accepted":false,"score":71,"last_activity_date":1424903374,"creation_date":1396471276,"answer_id":22822592,"question_id":22725537,"body_markdown":"I&#39;m adding this second answer based on a proposed edit by user [srborlongan][1] to [my other answer][2]. I think the technique proposed was interesting, but it wasn&#39;t really suitable as an edit to my answer. Others agreed and the proposed edit was voted down. (I wasn&#39;t one of the voters.) The technique has merit, though. It would have been best if srborlongan had posted his/her own answer. This hasn&#39;t happened yet, and I didn&#39;t want the technique to be lost in the mists of the StackOverflow rejected edit history, so I decided to surface it as a separate answer myself.\r\n\r\nBasically the technique is to use some of the `Optional` methods in a clever way to avoid having to use a ternary operator (`? :`) or an if/else statement.\r\n\r\nMy inline example would be rewritten this way:\r\n\r\n    Optional&lt;Other&gt; result =\r\n        things.stream()\r\n              .map(this::resolve)\r\n              .flatMap(o -&gt; o.map(Stream::of).orElseGet(Stream::empty))\r\n              .findFirst();\r\n\r\nAn my example that uses a helper method would be rewritten this way:\r\n\r\n    /**\r\n     * Turns an Optional&lt;T&gt; into a Stream&lt;T&gt; of length zero or one depending upon\r\n     * whether a value is present.\r\n     */\r\n    static &lt;T&gt; Stream&lt;T&gt; streamopt(Optional&lt;T&gt; opt) {\r\n        return opt.map(Stream::of)\r\n                  .orElseGet(Stream::empty);\r\n    }\r\n\r\n    Optional&lt;Other&gt; result =\r\n        things.stream()\r\n              .flatMap(t -&gt; streamopt(resolve(t)))\r\n              .findFirst();\r\n\r\n**COMMENTARY**\r\n\r\nLet&#39;s compare the original vs modified versions directly:\r\n\r\n    // original\r\n    .flatMap(o -&gt; o.isPresent() ? Stream.of(o.get()) : Stream.empty())\r\n\r\n    // modified\r\n    .flatMap(o -&gt; o.map(Stream::of).orElseGet(Stream::empty))\r\n\r\nThe original is a straightforward if workmanlike approach: we get an `Optional&lt;Other&gt;`; if it has a value, we return a stream containing that value, and if it has no value, we return an empty stream. Pretty simple and easy to explain.\r\n\r\nThe modification is clever and has the advantage that it avoids conditionals. (I know that some people dislike the ternary operator. If misused it can indeed make code hard to understand.) However, sometimes things can be too clever. The modified code also starts off with an `Optional&lt;Other&gt;`. Then it calls `Optional.map` which is defined as follows:\r\n\r\n&gt; If a value is present, apply the provided mapping function to it, and if the result is non-null, return an Optional describing the result. Otherwise return an empty Optional.\r\n\r\nThe `map(Stream::of)` call returns an `Optional&lt;Stream&lt;Other&gt;&gt;`. If a value was present in the input Optional, the returned Optional contains a Stream that contains the single Other result. But if the value was not present, the result is an empty Optional.\r\n\r\nNext, the call to `orElseGet(Stream::empty)` returns a value of type `Stream&lt;Other&gt;`. If its input value is present, it gets the value, which is the single-element `Stream&lt;Other&gt;`. Otherwise (if the input value is absent) it returns an empty `Stream&lt;Other&gt;`. So the result is correct, the same as the original conditional code.\r\n\r\nIn the comments discussing on my answer, regarding the rejected edit, I had described this technique as &quot;more concise but also more obscure&quot;. I stand by this. It took me a while to figure out what it was doing, and it also took me a while to write up the above description of what it was doing. The key subtlety is the transformation from `Optional&lt;Other&gt;` to `Optional&lt;Stream&lt;Other&gt;&gt;`. Once you grok this it makes sense, but it wasn&#39;t obvious to me.\r\n\r\nI&#39;ll acknowledge, though, that things that are initially obscure can become idiomatic over time. It might be that this technique ends up being the best way in practice, at least until `Optional.stream` gets added (if it ever does).\r\n\r\n**UPDATE:** `Optional.stream` has been added to JDK 9.\r\n\r\n  [1]: https://stackoverflow.com/users/3475600/srborlongan\r\n  [2]: https://stackoverflow.com/a/22726869/1441122","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>I'm adding this second answer based on a proposed edit by user <a href=\"https://stackoverflow.com/users/3475600/srborlongan\">srborlongan</a> to <a href=\"https://stackoverflow.com/a/22726869/1441122\">my other answer</a>. I think the technique proposed was interesting, but it wasn't really suitable as an edit to my answer. Others agreed and the proposed edit was voted down. (I wasn't one of the voters.) The technique has merit, though. It would have been best if srborlongan had posted his/her own answer. This hasn't happened yet, and I didn't want the technique to be lost in the mists of the StackOverflow rejected edit history, so I decided to surface it as a separate answer myself.</p>\n\n<p>Basically the technique is to use some of the <code>Optional</code> methods in a clever way to avoid having to use a ternary operator (<code>? :</code>) or an if/else statement.</p>\n\n<p>My inline example would be rewritten this way:</p>\n\n<pre><code>Optional&lt;Other&gt; result =\n    things.stream()\n          .map(this::resolve)\n          .flatMap(o -&gt; o.map(Stream::of).orElseGet(Stream::empty))\n          .findFirst();\n</code></pre>\n\n<p>An my example that uses a helper method would be rewritten this way:</p>\n\n<pre><code>/**\n * Turns an Optional&lt;T&gt; into a Stream&lt;T&gt; of length zero or one depending upon\n * whether a value is present.\n */\nstatic &lt;T&gt; Stream&lt;T&gt; streamopt(Optional&lt;T&gt; opt) {\n    return opt.map(Stream::of)\n              .orElseGet(Stream::empty);\n}\n\nOptional&lt;Other&gt; result =\n    things.stream()\n          .flatMap(t -&gt; streamopt(resolve(t)))\n          .findFirst();\n</code></pre>\n\n<p><strong>COMMENTARY</strong></p>\n\n<p>Let's compare the original vs modified versions directly:</p>\n\n<pre><code>// original\n.flatMap(o -&gt; o.isPresent() ? Stream.of(o.get()) : Stream.empty())\n\n// modified\n.flatMap(o -&gt; o.map(Stream::of).orElseGet(Stream::empty))\n</code></pre>\n\n<p>The original is a straightforward if workmanlike approach: we get an <code>Optional&lt;Other&gt;</code>; if it has a value, we return a stream containing that value, and if it has no value, we return an empty stream. Pretty simple and easy to explain.</p>\n\n<p>The modification is clever and has the advantage that it avoids conditionals. (I know that some people dislike the ternary operator. If misused it can indeed make code hard to understand.) However, sometimes things can be too clever. The modified code also starts off with an <code>Optional&lt;Other&gt;</code>. Then it calls <code>Optional.map</code> which is defined as follows:</p>\n\n<blockquote>\n  <p>If a value is present, apply the provided mapping function to it, and if the result is non-null, return an Optional describing the result. Otherwise return an empty Optional.</p>\n</blockquote>\n\n<p>The <code>map(Stream::of)</code> call returns an <code>Optional&lt;Stream&lt;Other&gt;&gt;</code>. If a value was present in the input Optional, the returned Optional contains a Stream that contains the single Other result. But if the value was not present, the result is an empty Optional.</p>\n\n<p>Next, the call to <code>orElseGet(Stream::empty)</code> returns a value of type <code>Stream&lt;Other&gt;</code>. If its input value is present, it gets the value, which is the single-element <code>Stream&lt;Other&gt;</code>. Otherwise (if the input value is absent) it returns an empty <code>Stream&lt;Other&gt;</code>. So the result is correct, the same as the original conditional code.</p>\n\n<p>In the comments discussing on my answer, regarding the rejected edit, I had described this technique as \"more concise but also more obscure\". I stand by this. It took me a while to figure out what it was doing, and it also took me a while to write up the above description of what it was doing. The key subtlety is the transformation from <code>Optional&lt;Other&gt;</code> to <code>Optional&lt;Stream&lt;Other&gt;&gt;</code>. Once you grok this it makes sense, but it wasn't obvious to me.</p>\n\n<p>I'll acknowledge, though, that things that are initially obscure can become idiomatic over time. It might be that this technique ends up being the best way in practice, at least until <code>Optional.stream</code> gets added (if it ever does).</p>\n\n<p><strong>UPDATE:</strong> <code>Optional.stream</code> has been added to JDK 9.</p>\n"},{"comments":[{"owner":{"account_id":34570,"reputation":17845,"user_id":97777,"accept_rate":82,"display_name":"Duncan McGregor"},"score":7,"creation_date":1417623881,"post_id":27215810,"comment_id":43022236,"body_markdown":"I like this, but it&#39;s worth pointing out that this will evaluate every item in the Stream, whereas findFirst() will evaluate only until it finds a present item.","body":"I like this, but it&#39;s worth pointing out that this will evaluate every item in the Stream, whereas findFirst() will evaluate only until it finds a present item."},{"owner":{"account_id":937438,"reputation":8861,"user_id":966104,"accept_rate":70,"display_name":"Yona Appletree"},"score":1,"creation_date":1424990632,"post_id":27215810,"comment_id":45790117,"body_markdown":"And unfortunately, executing each resolve is a deal-breaker. But it is clever.","body":"And unfortunately, executing each resolve is a deal-breaker. But it is clever."}],"tags":[],"owner":{"account_id":1212298,"reputation":27085,"user_id":1180621,"accept_rate":100,"display_name":"Andrejs"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1417623756,"creation_date":1417367042,"answer_id":27215810,"question_id":22725537,"body_markdown":"A slightly shorter version using `reduce`:\r\n\r\n    things.stream()\r\n      .map(this::resolve)\r\n      .reduce(Optional.empty(), (a, b) -&gt; a.isPresent() ? a : b );\r\n\r\nYou could also move the reduce function to a static utility method and then it becomes:\r\n\r\n      .reduce(Optional.empty(), Util::firstPresent );\r\n\r\n","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>A slightly shorter version using <code>reduce</code>:</p>\n\n<pre><code>things.stream()\n  .map(this::resolve)\n  .reduce(Optional.empty(), (a, b) -&gt; a.isPresent() ? a : b );\n</code></pre>\n\n<p>You could also move the reduce function to a static utility method and then it becomes:</p>\n\n<pre><code>  .reduce(Optional.empty(), Util::firstPresent );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1122893,"reputation":2272,"user_id":1110815,"display_name":"Daniel Dietrich"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1454436065,"creation_date":1454435483,"answer_id":35160464,"question_id":22725537,"body_markdown":"If you don&#39;t mind to use a third party library you may use [Javaslang][1]. It is like Scala, but implemented in Java.\r\n\r\nIt comes with a complete immutable collection library that is very similar to that known from Scala. These collections replace Java&#39;s collections and Java 8&#39;s Stream. It also has its own implementation of Option.\r\n\r\n    import javaslang.collection.Stream;\r\n    import javaslang.control.Option;\r\n    \r\n    Stream&lt;Option&lt;String&gt;&gt; options = Stream.of(Option.some(&quot;foo&quot;), Option.none(), Option.some(&quot;bar&quot;));\r\n    \r\n    // = Stream(&quot;foo&quot;, &quot;bar&quot;)\r\n    Stream&lt;String&gt; strings = options.flatMap(o -&gt; o);\r\n\r\nHere is a solution for the example of the initial question:\r\n\r\n    import javaslang.collection.Stream;\r\n    import javaslang.control.Option;\r\n    \r\n    public class Test {\r\n        \r\n        void run() {\r\n    \r\n            // = Stream(Thing(1), Thing(2), Thing(3))\r\n            Stream&lt;Thing&gt; things = Stream.of(new Thing(1), new Thing(2), new Thing(3));\r\n    \r\n            // = Some(Other(2))\r\n            Option&lt;Other&gt; others = things.flatMap(this::resolve).headOption();\r\n        }\r\n    \r\n        Option&lt;Other&gt; resolve(Thing thing) {\r\n            Other other = (thing.i % 2 == 0) ? new Other(i + &quot;&quot;) : null;\r\n            return Option.of(other);\r\n        }\r\n    \r\n    }\r\n    \r\n    class Thing {\r\n        final int i;\r\n        Thing(int i) { this.i = i; }\r\n        public String toString() { return &quot;Thing(&quot; + i + &quot;)&quot;; }\r\n    }\r\n    \r\n    class Other {\r\n        final String s;\r\n        Other(String s) { this.s = s; }\r\n        public String toString() { return &quot;Other(&quot; + s + &quot;)&quot;; }\r\n    }\r\n\r\nDisclaimer: I&#39;m the creator of Javaslang.\r\n\r\n  [1]: http://javaslang.com","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>If you don't mind to use a third party library you may use <a href=\"http://javaslang.com\" rel=\"nofollow\">Javaslang</a>. It is like Scala, but implemented in Java.</p>\n\n<p>It comes with a complete immutable collection library that is very similar to that known from Scala. These collections replace Java's collections and Java 8's Stream. It also has its own implementation of Option.</p>\n\n<pre><code>import javaslang.collection.Stream;\nimport javaslang.control.Option;\n\nStream&lt;Option&lt;String&gt;&gt; options = Stream.of(Option.some(\"foo\"), Option.none(), Option.some(\"bar\"));\n\n// = Stream(\"foo\", \"bar\")\nStream&lt;String&gt; strings = options.flatMap(o -&gt; o);\n</code></pre>\n\n<p>Here is a solution for the example of the initial question:</p>\n\n<pre><code>import javaslang.collection.Stream;\nimport javaslang.control.Option;\n\npublic class Test {\n\n    void run() {\n\n        // = Stream(Thing(1), Thing(2), Thing(3))\n        Stream&lt;Thing&gt; things = Stream.of(new Thing(1), new Thing(2), new Thing(3));\n\n        // = Some(Other(2))\n        Option&lt;Other&gt; others = things.flatMap(this::resolve).headOption();\n    }\n\n    Option&lt;Other&gt; resolve(Thing thing) {\n        Other other = (thing.i % 2 == 0) ? new Other(i + \"\") : null;\n        return Option.of(other);\n    }\n\n}\n\nclass Thing {\n    final int i;\n    Thing(int i) { this.i = i; }\n    public String toString() { return \"Thing(\" + i + \")\"; }\n}\n\nclass Other {\n    final String s;\n    Other(String s) { this.s = s; }\n    public String toString() { return \"Other(\" + s + \")\"; }\n}\n</code></pre>\n\n<p>Disclaimer: I'm the creator of Javaslang.</p>\n"},{"comments":[{"owner":{"account_id":1434821,"reputation":598,"user_id":1356467,"accept_rate":89,"display_name":"Young Hyun Yoo"},"score":0,"creation_date":1560669525,"post_id":36334855,"comment_id":99807586,"body_markdown":"I think same as Roland Tepp. Why would someone make stream&lt;stream&lt;?&gt;&gt; and flat when you can just flat with one optional&lt;optional&lt;?&gt;&gt;","body":"I think same as Roland Tepp. Why would someone make stream&lt;stream&lt;?&gt;&gt; and flat when you can just flat with one optional&lt;optional&lt;?&gt;&gt;"}],"tags":[],"owner":{"account_id":1285,"reputation":8351,"user_id":1712,"accept_rate":84,"display_name":"Roland Tepp"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1459935506,"creation_date":1459430813,"answer_id":36334855,"question_id":22725537,"body_markdown":"As my [previous answer](https://stackoverflow.com/a/22725767/1712) appeared not to be very popular, I will give this another go.\r\n\r\nA short answer:\r\n---------------\r\n\r\nYou are mostly on a right track. The shortest code to get to your desired output I could come up with is this:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    things.stream()\r\n          .map(this::resolve)\r\n          .filter(Optional::isPresent)\r\n          .findFirst()\r\n          .flatMap( Function.identity() );\r\n\r\nThis will fit all your requirements: \r\n\r\n1. It will find first response that resolves to a nonempty `Optional&lt;Result&gt;`\r\n2. It calls `this::resolve` lazily as needed\r\n3. `this::resolve` will not be called after first non-empty result\r\n4. It will return `Optional&lt;Result&gt;`\r\n\r\nLonger answer\r\n-------------\r\n\r\nThe only modification compared to OP initial version was that I removed `.map(Optional::get)` before call to `.findFirst()` and added `.flatMap(o -&gt; o)` as the last call in the chain.\r\n\r\nThis has a nice effect of getting rid of the double-Optional, whenever stream finds an actual result.\r\n\r\nYou can&#39;t really go any shorter than this in Java. \r\n\r\nThe alternative snippet of code using the more conventional `for` loop technique is going to be about same number of lines of code and have more or less same order and number of operations you need to perform:\r\n\r\n1. Calling `this.resolve`, \r\n2. filtering based on `Optional.isPresent` \r\n3. returning the result and\r\n4. some way of dealing with negative result (when nothing was found)\r\n\r\n\r\nJust to prove that my solution works as advertised, I wrote a small test program:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class StackOverflow {\r\n\r\n        public static void main( String... args ) {\r\n            try {\r\n                final int integer = Stream.of( args )\r\n                        .peek( s -&gt; System.out.println( &quot;Looking at &quot; + s ) )\r\n                        .map( StackOverflow::resolve )\r\n                        .filter( Optional::isPresent )\r\n                        .findFirst()\r\n                        .flatMap( o -&gt; o )\r\n                        .orElseThrow( NoSuchElementException::new )\r\n                        .intValue();\r\n\r\n                System.out.println( &quot;First integer found is &quot; + integer );\r\n            }\r\n            catch ( NoSuchElementException e ) {\r\n                System.out.println( &quot;No integers provided!&quot; );\r\n            }\r\n        }\r\n\r\n        private static Optional&lt;Integer&gt; resolve( String string ) {\r\n            try {\r\n                return Optional.of( Integer.valueOf( string ) );\r\n            }\r\n            catch ( NumberFormatException e )\r\n            {\r\n                System.out.println( &#39;&quot;&#39; + string + &#39;&quot;&#39; + &quot; is not an integer&quot;);\r\n                return Optional.empty();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n(It does have few extra lines for debugging and verifying that only as many calls to resolve as needed...)\r\n\r\nExecuting this on a command line, I got the following results:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    $ java StackOferflow a b 3 c 4\r\n    Looking at a\r\n    &quot;a&quot; is not an integer\r\n    Looking at b\r\n    &quot;b&quot; is not an integer\r\n    Looking at 3\r\n    First integer found is 3\r\n\r\n","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>As my <a href=\"https://stackoverflow.com/a/22725767/1712\">previous answer</a> appeared not to be very popular, I will give this another go.</p>\n\n<h2>A short answer:</h2>\n\n<p>You are mostly on a right track. The shortest code to get to your desired output I could come up with is this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>things.stream()\n      .map(this::resolve)\n      .filter(Optional::isPresent)\n      .findFirst()\n      .flatMap( Function.identity() );\n</code></pre>\n\n<p>This will fit all your requirements: </p>\n\n<ol>\n<li>It will find first response that resolves to a nonempty <code>Optional&lt;Result&gt;</code></li>\n<li>It calls <code>this::resolve</code> lazily as needed</li>\n<li><code>this::resolve</code> will not be called after first non-empty result</li>\n<li>It will return <code>Optional&lt;Result&gt;</code></li>\n</ol>\n\n<h2>Longer answer</h2>\n\n<p>The only modification compared to OP initial version was that I removed <code>.map(Optional::get)</code> before call to <code>.findFirst()</code> and added <code>.flatMap(o -&gt; o)</code> as the last call in the chain.</p>\n\n<p>This has a nice effect of getting rid of the double-Optional, whenever stream finds an actual result.</p>\n\n<p>You can't really go any shorter than this in Java. </p>\n\n<p>The alternative snippet of code using the more conventional <code>for</code> loop technique is going to be about same number of lines of code and have more or less same order and number of operations you need to perform:</p>\n\n<ol>\n<li>Calling <code>this.resolve</code>, </li>\n<li>filtering based on <code>Optional.isPresent</code> </li>\n<li>returning the result and</li>\n<li>some way of dealing with negative result (when nothing was found)</li>\n</ol>\n\n<p>Just to prove that my solution works as advertised, I wrote a small test program:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class StackOverflow {\n\n    public static void main( String... args ) {\n        try {\n            final int integer = Stream.of( args )\n                    .peek( s -&gt; System.out.println( \"Looking at \" + s ) )\n                    .map( StackOverflow::resolve )\n                    .filter( Optional::isPresent )\n                    .findFirst()\n                    .flatMap( o -&gt; o )\n                    .orElseThrow( NoSuchElementException::new )\n                    .intValue();\n\n            System.out.println( \"First integer found is \" + integer );\n        }\n        catch ( NoSuchElementException e ) {\n            System.out.println( \"No integers provided!\" );\n        }\n    }\n\n    private static Optional&lt;Integer&gt; resolve( String string ) {\n        try {\n            return Optional.of( Integer.valueOf( string ) );\n        }\n        catch ( NumberFormatException e )\n        {\n            System.out.println( '\"' + string + '\"' + \" is not an integer\");\n            return Optional.empty();\n        }\n    }\n\n}\n</code></pre>\n\n<p>(It does have few extra lines for debugging and verifying that only as many calls to resolve as needed...)</p>\n\n<p>Executing this on a command line, I got the following results:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ java StackOferflow a b 3 c 4\nLooking at a\n\"a\" is not an integer\nLooking at b\n\"b\" is not an integer\nLooking at 3\nFirst integer found is 3\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1673587155,"creation_date":1480608530,"answer_id":40915317,"question_id":22725537,"body_markdown":"Null is supported by the Stream provided My library [abacus-common][1]. Here is code:\r\n    \r\n    Stream.of(things).map(e -&gt; resolve(e).orNull()).skipNull().first();\r\n\r\n  [1]: https://github.com/landawn/abacus-common","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>Null is supported by the Stream provided My library <a href=\"https://github.com/landawn/abacus-common\" rel=\"nofollow noreferrer\">abacus-common</a>. Here is code:</p>\n<pre><code>Stream.of(things).map(e -&gt; resolve(e).orNull()).skipNull().first();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11818014,"reputation":51,"user_id":8647812,"display_name":"Ljubopytnov"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1539693509,"creation_date":1505987667,"answer_id":46340850,"question_id":22725537,"body_markdown":"Late to the party, but what about\r\n\r\n    things.stream()\r\n        .map(this::resolve)\r\n        .filter(Optional::isPresent)\r\n        .findFirst().get();\r\n\r\nYou can get rid of the last get() if you create a util method to convert optional to stream manually:\r\n\r\n    things.stream()\r\n        .map(this::resolve)\r\n        .flatMap(Util::optionalToStream)\r\n        .findFirst();\r\n\r\nIf you return stream right away from your resolve function, you save one more line.","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>Late to the party, but what about</p>\n\n<pre><code>things.stream()\n    .map(this::resolve)\n    .filter(Optional::isPresent)\n    .findFirst().get();\n</code></pre>\n\n<p>You can get rid of the last get() if you create a util method to convert optional to stream manually:</p>\n\n<pre><code>things.stream()\n    .map(this::resolve)\n    .flatMap(Util::optionalToStream)\n    .findFirst();\n</code></pre>\n\n<p>If you return stream right away from your resolve function, you save one more line.</p>\n"},{"tags":[],"owner":{"account_id":1135767,"reputation":1478,"user_id":1120854,"display_name":"charlie"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1540904264,"creation_date":1540903899,"answer_id":53064733,"question_id":22725537,"body_markdown":"I&#39;d like to promote **factory methods** for creating helpers for functional APIs:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    Optional&lt;R&gt; result = things.stream()\r\n            .flatMap(streamopt(this::resolve))\r\n            .findFirst();\r\n\r\nThe factory method:\r\n\r\n    &lt;T, R&gt; Function&lt;T, Stream&lt;R&gt;&gt; streamopt(Function&lt;T, Optional&lt;R&gt;&gt; f) {\r\n        return f.andThen(Optional::stream); // or the J8 alternative:\r\n        // return t -&gt; f.apply(t).map(Stream::of).orElseGet(Stream::empty);\r\n    }\r\n\r\nReasoning:\r\n\r\n - As with method references in general, compared to lambda expressions, you can&#39;t accidentaly capture a variable from the accessible scope, like:\r\n\r\n `t -&gt; streamopt(resolve(o))`\r\n\r\n - It&#39;s composable, you can e.g. call `Function::andThen` on the factory method result:\r\n\r\n `streamopt(this::resolve).andThen(...)`\r\n\r\n  Whereas in the case of a lambda, you&#39;d need to cast it first:\r\n\r\n `((Function&lt;T, Stream&lt;R&gt;&gt;) t -&gt; streamopt(resolve(t))).andThen(...)`\r\n","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>I'd like to promote <strong>factory methods</strong> for creating helpers for functional APIs:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Optional&lt;R&gt; result = things.stream()\n        .flatMap(streamopt(this::resolve))\n        .findFirst();\n</code></pre>\n\n<p>The factory method:</p>\n\n<pre><code>&lt;T, R&gt; Function&lt;T, Stream&lt;R&gt;&gt; streamopt(Function&lt;T, Optional&lt;R&gt;&gt; f) {\n    return f.andThen(Optional::stream); // or the J8 alternative:\n    // return t -&gt; f.apply(t).map(Stream::of).orElseGet(Stream::empty);\n}\n</code></pre>\n\n<p>Reasoning:</p>\n\n<ul>\n<li><p>As with method references in general, compared to lambda expressions, you can't accidentaly capture a variable from the accessible scope, like:</p>\n\n<p><code>t -&gt; streamopt(resolve(o))</code></p></li>\n<li><p>It's composable, you can e.g. call <code>Function::andThen</code> on the factory method result:</p>\n\n<p><code>streamopt(this::resolve).andThen(...)</code></p>\n\n<p>Whereas in the case of a lambda, you'd need to cast it first:</p>\n\n<p><code>((Function&lt;T, Stream&lt;R&gt;&gt;) t -&gt; streamopt(resolve(t))).andThen(...)</code></p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":226741,"reputation":14882,"user_id":487946,"accept_rate":100,"display_name":"Nicolas Payette"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1567010772,"creation_date":1567010772,"answer_id":57696853,"question_id":22725537,"body_markdown":"If you&#39;re stuck with Java 8 but have access to Guava 21.0 or newer, you can use [`Streams.stream`](https://guava.dev/releases/23.0/api/docs/com/google/common/collect/Streams.html#stream-com.google.common.base.Optional-) to convert an optional into a stream.\r\n\r\nThus, given\r\n\r\n    import com.google.common.collect.Streams;\r\n\r\nyou can write\r\n\r\n    Optional&lt;Other&gt; result =\r\n        things.stream()\r\n            .map(this::resolve)\r\n            .flatMap(Streams::stream)\r\n            .findFirst();\r\n","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>If you're stuck with Java 8 but have access to Guava 21.0 or newer, you can use <a href=\"https://guava.dev/releases/23.0/api/docs/com/google/common/collect/Streams.html#stream-com.google.common.base.Optional-\" rel=\"nofollow noreferrer\"><code>Streams.stream</code></a> to convert an optional into a stream.</p>\n\n<p>Thus, given</p>\n\n<pre><code>import com.google.common.collect.Streams;\n</code></pre>\n\n<p>you can write</p>\n\n<pre><code>Optional&lt;Other&gt; result =\n    things.stream()\n        .map(this::resolve)\n        .flatMap(Streams::stream)\n        .findFirst();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1582181718,"post_id":58281027,"comment_id":106690604,"body_markdown":"Why do this when you can stream and collect?","body":"Why do this when you can stream and collect?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1582214361,"post_id":58281027,"comment_id":106708183,"body_markdown":"`return list.stream().filter(Optional::isPresent).map(Optional::get).collect(Collectors.toList()))`, just like the question (and your linked answer) has...","body":"<code>return list.stream().filter(Optional::isPresent).map(Optional::get)&zwnj;&#8203;.collect(Collectors.&zwnj;&#8203;toList()))</code>, just like the question (and your linked answer) has..."},{"owner":{"account_id":4250230,"reputation":1766,"user_id":3477539,"accept_rate":83,"display_name":"Rostislav V"},"score":1,"creation_date":1582214580,"post_id":58281027,"comment_id":106708337,"body_markdown":"I may be wrong, but I consider using isPresent() and then get() is not a good practice. So I try to get away from that.","body":"I may be wrong, but I consider using isPresent() and then get() is not a good practice. So I try to get away from that."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1582227922,"post_id":58281027,"comment_id":106714831,"body_markdown":"If you use `.get()` **without** `isPresent()`, then you get a warning in IntelliJ","body":"If you use <code>.get()</code> <b>without</b> <code>isPresent()</code>, then you get a warning in IntelliJ"}],"tags":[],"owner":{"account_id":4250230,"reputation":1766,"user_id":3477539,"accept_rate":83,"display_name":"Rostislav V"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570515349,"creation_date":1570515349,"answer_id":58281027,"question_id":22725537,"body_markdown":"What about that?\r\n\r\n    private static List&lt;String&gt; extractString(List&lt;Optional&lt;String&gt;&gt; list) {\r\n        List&lt;String&gt; result = new ArrayList&lt;&gt;();\r\n        list.forEach(element -&gt; element.ifPresent(result::add));\r\n        return result;\r\n    }\r\n\r\nhttps://stackoverflow.com/a/58281000/3477539","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>What about that?</p>\n\n<pre><code>private static List&lt;String&gt; extractString(List&lt;Optional&lt;String&gt;&gt; list) {\n    List&lt;String&gt; result = new ArrayList&lt;&gt;();\n    list.forEach(element -&gt; element.ifPresent(result::add));\n    return result;\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/58281000/3477539\">https://stackoverflow.com/a/58281000/3477539</a></p>\n"}],"owner":{"account_id":937438,"reputation":8861,"user_id":966104,"accept_rate":70,"display_name":"Yona Appletree"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255711,"favorite_count":0,"down_vote_count":0,"up_vote_count":309,"accepted_answer_id":22726869,"answer_count":12,"score":309,"last_activity_date":1681557520,"creation_date":1396053721,"question_id":22725537,"body_markdown":"The new Java 8 stream framework and friends make for some very concise Java code, but I have come across a seemingly-simple situation that is tricky to do concisely.\r\n\r\nConsider a `List&lt;Thing&gt; things` and method `Optional&lt;Other&gt; resolve(Thing thing)`. I want to map the `Thing`s to `Optional&lt;Other&gt;`s and get the first `Other`.\r\n\r\nThe obvious solution would be to use `things.stream().flatMap(this::resolve).findFirst()`, but `flatMap` requires that you return a stream, and `Optional` doesn&#39;t have a `stream()` method (or is it a `Collection` or provide a method to convert it to or view it as a `Collection`).\r\n\r\nThe best I can come up with is this:\r\n\r\n    things.stream()\r\n        .map(this::resolve)\r\n        .filter(Optional::isPresent)\r\n        .map(Optional::get)\r\n        .findFirst();\r\n\r\nBut that seems awfully long-winded for what seems like a very common case. \r\n\r\nAnyone have a better idea?","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>The new Java 8 stream framework and friends make for some very concise Java code, but I have come across a seemingly-simple situation that is tricky to do concisely.</p>\n<p>Consider a <code>List&lt;Thing&gt; things</code> and method <code>Optional&lt;Other&gt; resolve(Thing thing)</code>. I want to map the <code>Thing</code>s to <code>Optional&lt;Other&gt;</code>s and get the first <code>Other</code>.</p>\n<p>The obvious solution would be to use <code>things.stream().flatMap(this::resolve).findFirst()</code>, but <code>flatMap</code> requires that you return a stream, and <code>Optional</code> doesn't have a <code>stream()</code> method (or is it a <code>Collection</code> or provide a method to convert it to or view it as a <code>Collection</code>).</p>\n<p>The best I can come up with is this:</p>\n<pre><code>things.stream()\n    .map(this::resolve)\n    .filter(Optional::isPresent)\n    .map(Optional::get)\n    .findFirst();\n</code></pre>\n<p>But that seems awfully long-winded for what seems like a very common case.</p>\n<p>Anyone have a better idea?</p>\n"},{"tags":["java","string","performance","character","substring"],"answers":[{"comments":[{"owner":{"account_id":881311,"reputation":135,"user_id":198578,"display_name":"estacado"},"score":0,"creation_date":1257324545,"post_id":1672430,"comment_id":1545802,"body_markdown":"newFunction really needs to take a string. Apart from single characters, newFunction also handles longer strings as well. And it handles them the same way. I don&#39;t want to overload newFunction to take in a char because it does the same thing in both cases.","body":"newFunction really needs to take a string. Apart from single characters, newFunction also handles longer strings as well. And it handles them the same way. I don&#39;t want to overload newFunction to take in a char because it does the same thing in both cases."},{"owner":{"account_id":21819,"reputation":84238,"user_id":53341,"accept_rate":93,"display_name":"MatBailie"},"score":1,"creation_date":1257325053,"post_id":1672430,"comment_id":1545830,"body_markdown":"I agree completely that micro-optimisation should be avoided in development until it is found to be necessary.  I also think that, as a learning excercise, learning about memory allocations and other &#39;hidden behaviour&#39; is very important.  I&#39;m personally tired of niaive programmers knocking out short code in the belief that short = performant, and unwittingly using highly inefficient algorithms. People who don&#39;t learn this = lazy. People who are fixated by this = slow. There&#39;s a balance to be struck. In my opinion :)","body":"I agree completely that micro-optimisation should be avoided in development until it is found to be necessary.  I also think that, as a learning excercise, learning about memory allocations and other &#39;hidden behaviour&#39; is very important.  I&#39;m personally tired of niaive programmers knocking out short code in the belief that short = performant, and unwittingly using highly inefficient algorithms. People who don&#39;t learn this = lazy. People who are fixated by this = slow. There&#39;s a balance to be struck. In my opinion :)"},{"owner":{"account_id":21819,"reputation":84238,"user_id":53341,"accept_rate":93,"display_name":"MatBailie"},"score":0,"creation_date":1257325231,"post_id":1672430,"comment_id":1545845,"body_markdown":"@estacado: If performance is you driver (as implied by your post) optimise in the right places.  Overloading the new function to avoid String overheads -may- be the sensible option depending on what the [char] based version would look like. Contorting your code around the function may be more timeconsuming, less effective, and less maintainable.","body":"@estacado: If performance is you driver (as implied by your post) optimise in the right places.  Overloading the new function to avoid String overheads -may- be the sensible option depending on what the [char] based version would look like. Contorting your code around the function may be more timeconsuming, less effective, and less maintainable."}],"tags":[],"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1257324203,"creation_date":1257324203,"answer_id":1672430,"question_id":1672415,"body_markdown":"Does `newFunction` really need to take a `String`? It would be better if you could make `newFunction` take a `char` and call it like this:\r\n\r\n    newFunction(s.charAt(i));\r\n\r\nThat way, you avoid creating a temporary String object.\r\n\r\nTo answer your question: It&#39;s hard to say which one is more efficient. In both examples, a `String` object has to be created which contains only one character. Which is more efficient depends on how exactly `String.substring(...)` and `Character.toString(...)` are implemented on your particular Java implementation. The only way to find it out is running your program through a profiler and seeing which version uses more CPU and/or more memory. Normally, you shouldn&#39;t worry about micro-optimizations like this - only spend time on this when you&#39;ve discovered that this is the cause of a performance and/or memory problem.\r\n","title":"Java charAt() or substring? Which is faster?","body":"<p>Does <code>newFunction</code> really need to take a <code>String</code>? It would be better if you could make <code>newFunction</code> take a <code>char</code> and call it like this:</p>\n\n<pre><code>newFunction(s.charAt(i));\n</code></pre>\n\n<p>That way, you avoid creating a temporary String object.</p>\n\n<p>To answer your question: It's hard to say which one is more efficient. In both examples, a <code>String</code> object has to be created which contains only one character. Which is more efficient depends on how exactly <code>String.substring(...)</code> and <code>Character.toString(...)</code> are implemented on your particular Java implementation. The only way to find it out is running your program through a profiler and seeing which version uses more CPU and/or more memory. Normally, you shouldn't worry about micro-optimizations like this - only spend time on this when you've discovered that this is the cause of a performance and/or memory problem.</p>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1518051376,"post_id":1672443,"comment_id":84350064,"body_markdown":"Profile in what way? For memory usage?","body":"Profile in what way? For memory usage?"}],"tags":[],"owner":{"account_id":8670,"reputation":74291,"user_id":15721,"accept_rate":74,"display_name":"Will"},"comment_count":1,"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1518051357,"creation_date":1257324451,"answer_id":1672443,"question_id":1672415,"body_markdown":"The answer is: [it doesn&#39;t matter][1].\r\n\r\nProfile your code. Is this your bottleneck?\r\n\r\n  [1]: http://www.codinghorror.com/blog/archives/000061.html\r\n","title":"Java charAt() or substring? Which is faster?","body":"<p>The answer is: <a href=\"http://www.codinghorror.com/blog/archives/000061.html\" rel=\"nofollow noreferrer\">it doesn't matter</a>.</p>\n\n<p>Profile your code. Is this your bottleneck?</p>\n"},{"comments":[{"owner":{"account_id":21819,"reputation":84238,"user_id":53341,"accept_rate":93,"display_name":"MatBailie"},"score":0,"creation_date":1257325509,"post_id":1672454,"comment_id":1545860,"body_markdown":"String.charAt(i) does that lookup as far as I am aware. Copying the string to a new array (which is what I understand String.toCharArray() to do) introduces a new and different overhead. Is repeatedly passing a string reference to charAt() slower than converting to a native array first? I suspect it depends on the length of the string...","body":"String.charAt(i) does that lookup as far as I am aware. Copying the string to a new array (which is what I understand String.toCharArray() to do) introduces a new and different overhead. Is repeatedly passing a string reference to charAt() slower than converting to a native array first? I suspect it depends on the length of the string..."},{"owner":{"display_name":"Cadet Pirx"},"score":0,"creation_date":1257336187,"post_id":1672454,"comment_id":1546698,"body_markdown":"There are always trade-offs :) Only the OP can really tell what is more efficient.","body":"There are always trade-offs :) Only the OP can really tell what is more efficient."}],"tags":[],"owner":{"display_name":"Cadet Pirx"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1257324588,"creation_date":1257324588,"answer_id":1672454,"question_id":1672415,"body_markdown":"I would first obtain the underlying char[] from the source String using String.toCharArray() and then proceed to call newFunction.\r\n\r\nBut I do agree with Jesper that it would be best if you could just deal with characters and avoid all the String functions...","title":"Java charAt() or substring? Which is faster?","body":"<p>I would first obtain the underlying char[] from the source String using String.toCharArray() and then proceed to call newFunction.</p>\n\n<p>But I do agree with Jesper that it would be best if you could just deal with characters and avoid all the String functions...</p>\n"},{"comments":[{"owner":{"account_id":6090,"reputation":31973,"user_id":10098,"accept_rate":80,"display_name":"wds"},"score":0,"creation_date":1257338440,"post_id":1672510,"comment_id":1546903,"body_markdown":"`substring` in the current jvm actually uses the original character array as a backing store, while you&#39;re initiating a copy. So my gut feeling says substring will actually be faster, as a memcpy will likely be more expensive (depending on how large the string is, larger is better).","body":"<code>substring</code> in the current jvm actually uses the original character array as a backing store, while you&#39;re initiating a copy. So my gut feeling says substring will actually be faster, as a memcpy will likely be more expensive (depending on how large the string is, larger is better)."}],"tags":[],"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1257325388,"creation_date":1257325388,"answer_id":1672510,"question_id":1672415,"body_markdown":"Of the two snippets you&#39;ve posted, I wouldn&#39;t want to say.  I&#39;d agree with Will that it almost certainly is irrelevant in the overall performance of your code - and if it&#39;s not, you can just make the change and determine for yourself which is fastest for your data with your JVM on your hardware.\r\n\r\nThat said, it&#39;s likely that the second snippet would be better if you converted the String into a char array first, and then performed your iterations over the array.  Doing it this way would perform the String overhead once only (converting to the array) instead of every call.  Additionally, you could then pass the array directly to the String constructor with some indices, which is more efficient than taking a char *out* of an array to pass it individually (which then gets turned into a one character array):\r\n\r\n    String s = &quot;abcdefg&quot;;\r\n    char[] chars = s.toCharArray();\r\n    for(int i = 0; i &lt; chars.length; i++) {\r\n        newFunction(String.valueOf(chars, i, 1));\r\n    }\r\n\r\nBut to reinforce my first point, when you look at what you&#39;re actually avoiding on each call of `String.charAt()` - it&#39;s two bounds checks, a (lazy) boolean OR, and an addition.  This is not going to make any noticeable difference.  Neither is the difference in the String constructors.\r\n\r\nEssentially, both idioms are fine in terms of performance (neither is immediately obviously inefficient) so you should not spend any more time working on them unless a profiler shows that this takes up a large amount of your application&#39;s runtime.  And even then you could almost certainly get more performance gains by restructuring your supporting code in this area (e.g. have `newFunction` take the whole string itself); java.lang.String is pretty well optimised by this point.","title":"Java charAt() or substring? Which is faster?","body":"<p>Of the two snippets you've posted, I wouldn't want to say.  I'd agree with Will that it almost certainly is irrelevant in the overall performance of your code - and if it's not, you can just make the change and determine for yourself which is fastest for your data with your JVM on your hardware.</p>\n\n<p>That said, it's likely that the second snippet would be better if you converted the String into a char array first, and then performed your iterations over the array.  Doing it this way would perform the String overhead once only (converting to the array) instead of every call.  Additionally, you could then pass the array directly to the String constructor with some indices, which is more efficient than taking a char <em>out</em> of an array to pass it individually (which then gets turned into a one character array):</p>\n\n<pre><code>String s = \"abcdefg\";\nchar[] chars = s.toCharArray();\nfor(int i = 0; i &lt; chars.length; i++) {\n    newFunction(String.valueOf(chars, i, 1));\n}\n</code></pre>\n\n<p>But to reinforce my first point, when you look at what you're actually avoiding on each call of <code>String.charAt()</code> - it's two bounds checks, a (lazy) boolean OR, and an addition.  This is not going to make any noticeable difference.  Neither is the difference in the String constructors.</p>\n\n<p>Essentially, both idioms are fine in terms of performance (neither is immediately obviously inefficient) so you should not spend any more time working on them unless a profiler shows that this takes up a large amount of your application's runtime.  And even then you could almost certainly get more performance gains by restructuring your supporting code in this area (e.g. have <code>newFunction</code> take the whole string itself); java.lang.String is pretty well optimised by this point.</p>\n"},{"comments":[{"owner":{"account_id":21819,"reputation":84238,"user_id":53341,"accept_rate":93,"display_name":"MatBailie"},"score":0,"creation_date":1257326170,"post_id":1672524,"comment_id":1545912,"body_markdown":"As this wil be passed a string you need to change your testing slightly in the first test. {char[] s = &quot;abcdefg&quot;.toCharArray();} should be Inside the loop, or even better (to prevent clever optimisation by the JVM, put the whole loop and the .toCharArray(), inside a seperate function). It&#39;s important to measure all the initial overheads as well as the loops costs.  Especially as performance could realistically tip from one to the other based on string length.  So testing various lengths of stings is also important.","body":"As this wil be passed a string you need to change your testing slightly in the first test. {char[] s = &quot;abcdefg&quot;.toCharArray();} should be Inside the loop, or even better (to prevent clever optimisation by the JVM, put the whole loop and the .toCharArray(), inside a seperate function). It&#39;s important to measure all the initial overheads as well as the loops costs.  Especially as performance could realistically tip from one to the other based on string length.  So testing various lengths of stings is also important."},{"owner":{"account_id":28208,"reputation":14132,"user_id":75126,"accept_rate":100,"display_name":"mhaller"},"score":0,"creation_date":1257363608,"post_id":1672524,"comment_id":1549854,"body_markdown":"Moved &quot;s&quot; inside the loop and added an assert() to prevent JVM optimization of newFunction(). Of course it&#39;s slower now, but the relative measurements still are the same. My point is merely that there are possibilities for optimization if the problem is known exactly. The point is not to change which function to use for a certain operation, but to see the operation on a higher level to gain improvements, e.g. by caching","body":"Moved &quot;s&quot; inside the loop and added an assert() to prevent JVM optimization of newFunction(). Of course it&#39;s slower now, but the relative measurements still are the same. My point is merely that there are possibilities for optimization if the problem is known exactly. The point is not to change which function to use for a certain operation, but to see the operation on a higher level to gain improvements, e.g. by caching"},{"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":1,"creation_date":1386341329,"post_id":1672524,"comment_id":30510164,"body_markdown":"Note that since Java 7u6 substring became copying. See http://stackoverflow.com/questions/14161050/java-string-susbtring-method-potential-memory-leak","body":"Note that since Java 7u6 substring became copying. See <a href=\"http://stackoverflow.com/questions/14161050/java-string-susbtring-method-potential-memory-leak\" title=\"java string susbtring method potential memory leak\">stackoverflow.com/questions/14161050/&hellip;</a>"}],"tags":[],"owner":{"account_id":28208,"reputation":14132,"user_id":75126,"accept_rate":100,"display_name":"mhaller"},"comment_count":3,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1284365978,"creation_date":1257325567,"answer_id":1672524,"question_id":1672415,"body_markdown":"As usual: it doesn&#39;t matter but if you insist on spending time on micro-optimization or if you really like to optimize for your very special use case, try this:\r\n\r\n\timport org.junit.Assert;\r\n\timport org.junit.Test;\r\n\t\r\n\tpublic class StringCharTest {\r\n\t\r\n\t\t// Times:\r\n\t\t// 1. Initialization of &quot;s&quot; outside the loop\r\n\t\t// 2. Init of &quot;s&quot; inside the loop\r\n\t\t// 3. newFunction() actually checks the string length,\r\n\t\t// so the function will not be optimized away by the hotstop compiler\r\n\t\r\n\t\t@Test\r\n\t\t// Fastest: 237ms / 562ms / 2434ms\r\n\t\tpublic void testCacheStrings() throws Exception {\r\n\t\t\t// Cache all possible Char strings\r\n\t\t\tString[] char2string = new String[Character.MAX_VALUE];\r\n\t\t\tfor (char i = Character.MIN_VALUE; i &lt; Character.MAX_VALUE; i++) {\r\n\t\t\t\tchar2string[i] = Character.toString(i);\r\n\t\t\t}\r\n\t\r\n\t\t\tfor (int x = 0; x &lt; 10000000; x++) {\r\n\t\t\t\tchar[] s = &quot;abcdefg&quot;.toCharArray();\r\n\t\t\t\tfor (int i = 0; i &lt; s.length; i++) {\r\n\t\t\t\t\tnewFunction(char2string[s[i]]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t@Test\r\n\t\t// Fast: 1687ms / 1725ms / 3382ms\r\n\t\tpublic void testCharToString() throws Exception {\r\n\t\t\tfor (int x = 0; x &lt; 10000000; x++) {\r\n\t\t\t\tString s = &quot;abcdefg&quot;;\r\n\t\t\t\tfor (int i = 0; i &lt; s.length(); i++) {\r\n\t\t\t\t\t// Fast: Creates new String objects, but does not copy an array\r\n\t\t\t\t\tnewFunction(Character.toString(s.charAt(i)));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t@Test\r\n\t\t// Very fast: 1331 ms/ 1414ms / 3190ms\r\n\t\tpublic void testSubstring() throws Exception {\r\n\t\t\tfor (int x = 0; x &lt; 10000000; x++) {\r\n\t\t\t\tString s = &quot;abcdefg&quot;;\r\n\t\t\t\tfor (int i = 0; i &lt; s.length(); i++) {\r\n\t\t\t\t\t// The fastest! Reuses the internal char array\r\n\t\t\t\t\tnewFunction(s.substring(i, i + 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t@Test\r\n\t\t// Slowest: 2525ms / 2961ms / 4703ms\r\n\t\tpublic void testNewString() throws Exception {\r\n\t\t\tchar[] value = new char[1];\r\n\t\t\tfor (int x = 0; x &lt; 10000000; x++) {\r\n\t\t\t\tchar[] s = &quot;abcdefg&quot;.toCharArray();\r\n\t\t\t\tfor (int i = 0; i &lt; s.length; i++) {\r\n\t\t\t\t\tvalue[0] = s[i];\r\n\t\t\t\t\t// Slow! Copies the array\r\n\t\t\t\t\tnewFunction(new String(value));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tprivate void newFunction(String string) {\r\n\t\t\t// Do something with the one-character string\r\n\t\t\tAssert.assertEquals(1, string.length());\r\n\t\t}\r\n\t\r\n\t}\r\n","title":"Java charAt() or substring? Which is faster?","body":"<p>As usual: it doesn't matter but if you insist on spending time on micro-optimization or if you really like to optimize for your very special use case, try this:</p>\n\n<pre><code>import org.junit.Assert;\nimport org.junit.Test;\n\npublic class StringCharTest {\n\n    // Times:\n    // 1. Initialization of \"s\" outside the loop\n    // 2. Init of \"s\" inside the loop\n    // 3. newFunction() actually checks the string length,\n    // so the function will not be optimized away by the hotstop compiler\n\n    @Test\n    // Fastest: 237ms / 562ms / 2434ms\n    public void testCacheStrings() throws Exception {\n        // Cache all possible Char strings\n        String[] char2string = new String[Character.MAX_VALUE];\n        for (char i = Character.MIN_VALUE; i &lt; Character.MAX_VALUE; i++) {\n            char2string[i] = Character.toString(i);\n        }\n\n        for (int x = 0; x &lt; 10000000; x++) {\n            char[] s = \"abcdefg\".toCharArray();\n            for (int i = 0; i &lt; s.length; i++) {\n                newFunction(char2string[s[i]]);\n            }\n        }\n    }\n\n    @Test\n    // Fast: 1687ms / 1725ms / 3382ms\n    public void testCharToString() throws Exception {\n        for (int x = 0; x &lt; 10000000; x++) {\n            String s = \"abcdefg\";\n            for (int i = 0; i &lt; s.length(); i++) {\n                // Fast: Creates new String objects, but does not copy an array\n                newFunction(Character.toString(s.charAt(i)));\n            }\n        }\n    }\n\n    @Test\n    // Very fast: 1331 ms/ 1414ms / 3190ms\n    public void testSubstring() throws Exception {\n        for (int x = 0; x &lt; 10000000; x++) {\n            String s = \"abcdefg\";\n            for (int i = 0; i &lt; s.length(); i++) {\n                // The fastest! Reuses the internal char array\n                newFunction(s.substring(i, i + 1));\n            }\n        }\n    }\n\n    @Test\n    // Slowest: 2525ms / 2961ms / 4703ms\n    public void testNewString() throws Exception {\n        char[] value = new char[1];\n        for (int x = 0; x &lt; 10000000; x++) {\n            char[] s = \"abcdefg\".toCharArray();\n            for (int i = 0; i &lt; s.length; i++) {\n                value[0] = s[i];\n                // Slow! Copies the array\n                newFunction(new String(value));\n            }\n        }\n    }\n\n    private void newFunction(String string) {\n        // Do something with the one-character string\n        Assert.assertEquals(1, string.length());\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15788396,"reputation":55,"user_id":11392406,"display_name":"DimitrisMel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569266181,"creation_date":1569266181,"answer_id":58068813,"question_id":1672415,"body_markdown":"Leetcode seems to prefer the substring option [here][1].\r\n\r\nThis is how I solved that problem:\r\n\r\n    class Solution {\r\n    public int strStr(String haystack, String needle) {\r\n        if(needle.length() == 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t\r\n\t\tif(haystack.length() == 0) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\t\r\n\t\tfor(int i=0; i&lt;=haystack.length()-needle.length(); i++) {\r\n\t\t\tint count = 0;\r\n\t\t\tfor(int j=0; j&lt;needle.length(); j++) {\r\n\t\t\t\tif(haystack.charAt(i+j) == needle.charAt(j)) {\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(count == needle.length()) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n    }\r\n}\r\n\r\nAnd this is the optimal solution they give:\r\n\r\n    class Solution {\r\n    public int strStr(String haystack, String needle) {\r\n        int length;\r\n        int n=needle.length();\r\n        int h=haystack.length();\r\n        if(n==0)\r\n            return 0;\r\n        // if(n==h)\r\n        //     length = h;\r\n        // else\r\n            length = h-n;\r\n        if(h==n &amp;&amp; haystack.charAt(0)!=needle.charAt(0))\r\n                return -1;\r\n        for(int i=0; i&lt;=length; i++){\r\n            if(haystack.substring(i, i+needle.length()).equals(needle))\r\n                return i;\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\nHonestly, I can&#39;t figure out why it would matter.\r\n\r\n\r\n  [1]: https://leetcode.com/problems/implement-strstr/","title":"Java charAt() or substring? Which is faster?","body":"<p>Leetcode seems to prefer the substring option <a href=\"https://leetcode.com/problems/implement-strstr/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>This is how I solved that problem:</p>\n\n<pre><code>class Solution {\npublic int strStr(String haystack, String needle) {\n    if(needle.length() == 0) {\n        return 0;\n    }\n\n    if(haystack.length() == 0) {\n        return -1;\n    }\n\n    for(int i=0; i&lt;=haystack.length()-needle.length(); i++) {\n        int count = 0;\n        for(int j=0; j&lt;needle.length(); j++) {\n            if(haystack.charAt(i+j) == needle.charAt(j)) {\n                count++;\n            }\n        }\n        if(count == needle.length()) {\n            return i;\n        }\n    }\n    return -1;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>And this is the optimal solution they give:</p>\n\n<pre><code>class Solution {\npublic int strStr(String haystack, String needle) {\n    int length;\n    int n=needle.length();\n    int h=haystack.length();\n    if(n==0)\n        return 0;\n    // if(n==h)\n    //     length = h;\n    // else\n        length = h-n;\n    if(h==n &amp;&amp; haystack.charAt(0)!=needle.charAt(0))\n            return -1;\n    for(int i=0; i&lt;=length; i++){\n        if(haystack.substring(i, i+needle.length()).equals(needle))\n            return i;\n    }\n    return -1;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Honestly, I can't figure out why it would matter.</p>\n"}],"owner":{"account_id":881311,"reputation":135,"user_id":198578,"display_name":"estacado"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37451,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":1672524,"answer_count":6,"score":13,"last_activity_date":1681557054,"creation_date":1257323954,"question_id":1672415,"body_markdown":"I want to go through each character in a String and pass each character of the String as a String to another function. \r\n\r\n    String s = &quot;abcdefg&quot;;\r\n    for(int i = 0; i &lt; s.length(); i++){\r\n        newFunction(s.substring(i, i+1));}\r\n\r\nor\r\n\r\n    String s = &quot;abcdefg&quot;;\r\n    for(int i = 0; i &lt; s.length(); i++){\r\n        newFunction(Character.toString(s.charAt(i)));}\r\n\r\nThe final result needs to be a String.  \r\nSo any idea which will be faster or more efficient?","title":"Java charAt() or substring? Which is faster?","body":"<p>I want to go through each character in a String and pass each character of the String as a String to another function.</p>\n<pre><code>String s = &quot;abcdefg&quot;;\nfor(int i = 0; i &lt; s.length(); i++){\n    newFunction(s.substring(i, i+1));}\n</code></pre>\n<p>or</p>\n<pre><code>String s = &quot;abcdefg&quot;;\nfor(int i = 0; i &lt; s.length(); i++){\n    newFunction(Character.toString(s.charAt(i)));}\n</code></pre>\n<p>The final result needs to be a String.<br />\nSo any idea which will be faster or more efficient?</p>\n"},{"tags":["java","json","api","http","httpresponse"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1681394541,"post_id":76006320,"comment_id":134051915,"body_markdown":"Please read https://stackoverflow.com/editing-help and edit your post, using the preview to make sure it&#39;s readable before posting.","body":"Please read <a href=\"https://stackoverflow.com/editing-help\">stackoverflow.com/editing-help</a> and edit your post, using the preview to make sure it&#39;s readable before posting."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1681394594,"post_id":76006320,"comment_id":134051925,"body_markdown":"(I&#39;d also strongly recommend reducing this to a [mcve] - I&#39;d be very surprised if you really need to include fetching from HTTP *and* parsing JSON *and* writing data to a CSV file for a single error.)","body":"(I&#39;d also strongly recommend reducing this to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> - I&#39;d be very surprised if you really need to include fetching from HTTP <i>and</i> parsing JSON <i>and</i> writing data to a CSV file for a single error.)"}],"answers":[{"comments":[{"owner":{"account_id":28211049,"reputation":21,"user_id":21563306,"display_name":"Sonika Kushwaha"},"score":0,"creation_date":1681450699,"post_id":76007783,"comment_id":134061195,"body_markdown":"Hi, Thank you this helps. But now I have another problem. Data is not getting written into excel file.","body":"Hi, Thank you this helps. But now I have another problem. Data is not getting written into excel file."},{"owner":{"account_id":16500982,"reputation":84,"user_id":13749786,"display_name":"Watermelon"},"score":0,"creation_date":1681461990,"post_id":76007783,"comment_id":134063459,"body_markdown":"i have edited the answer and added the code to write in csv file.","body":"i have edited the answer and added the code to write in csv file."}],"tags":[],"owner":{"account_id":16500982,"reputation":84,"user_id":13749786,"display_name":"Watermelon"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1681461969,"creation_date":1681403310,"answer_id":76007783,"question_id":76006320,"body_markdown":"okay let&#39;s make it bit simpler. Once you have the jsonString, you can do something like this - \r\n\r\n``` java\r\nList&lt;String&gt; employeeIds = new ArrayList&lt;&gt;();\r\nJSONObject obj = new JSONObject(jsonString);\r\nif (obj.has(&quot;userdetails&quot;)) {\r\n// get the userDetails array object\r\n JSONArray userDetails = obj.getJSONArray(&quot;userdetails&quot;);\r\n\r\n// loop over\r\n for (int i = 0; i &lt; userDetails.length(); i++) {\r\n    JSONObject object = (JSONObject) userDetails.get(i);\r\n    employeeIds.add(object.getString(&quot;employeeid&quot;))\r\n\r\n  }\r\n\r\n}\r\n```\r\n\r\nLater you can write the employeeIds list in any file you want\r\n\r\n**EDITED**\r\n\r\nhere is the code to write in csv file \r\n```java\r\n\r\npublic static void writeInCsv(List&lt;String&gt; employeeIds, String directoryLocation) {\r\n        String fileName = directoryLocation + &quot;/empoyeeIds.csv&quot; ;\r\n        try (BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(fileName), StandardCharsets.UTF_8))) {\r\n            String header = &quot;Employee Ids&quot;;\r\n            bw.write(header);\r\n            bw.newLine();\r\n            for (String id : employeeIds) {\r\n                bw.write(id);\r\n                bw.newLine();\r\n            }\r\n        } catch (UnsupportedEncodingException e) {\r\n            LOG.error(&quot;Unsupported encoding format&quot;, e);\r\n        } catch (FileNotFoundException e) {\r\n            LOG.error(&quot;Error creating the file &quot;, e);\r\n        } catch (IOException e) {\r\n            LOG.error(&quot;Error creating csv file&quot;, e);\r\n        }\r\n    }\r\n\r\n```","title":"Exception in main java.lang.ClassCastException:class java.lang.String can&#39;t be cast to class","body":"<p>okay let's make it bit simpler. Once you have the jsonString, you can do something like this -</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; employeeIds = new ArrayList&lt;&gt;();\nJSONObject obj = new JSONObject(jsonString);\nif (obj.has(&quot;userdetails&quot;)) {\n// get the userDetails array object\n JSONArray userDetails = obj.getJSONArray(&quot;userdetails&quot;);\n\n// loop over\n for (int i = 0; i &lt; userDetails.length(); i++) {\n    JSONObject object = (JSONObject) userDetails.get(i);\n    employeeIds.add(object.getString(&quot;employeeid&quot;))\n\n  }\n\n}\n</code></pre>\n<p>Later you can write the employeeIds list in any file you want</p>\n<p><strong>EDITED</strong></p>\n<p>here is the code to write in csv file</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic static void writeInCsv(List&lt;String&gt; employeeIds, String directoryLocation) {\n        String fileName = directoryLocation + &quot;/empoyeeIds.csv&quot; ;\n        try (BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(fileName), StandardCharsets.UTF_8))) {\n            String header = &quot;Employee Ids&quot;;\n            bw.write(header);\n            bw.newLine();\n            for (String id : employeeIds) {\n                bw.write(id);\n                bw.newLine();\n            }\n        } catch (UnsupportedEncodingException e) {\n            LOG.error(&quot;Unsupported encoding format&quot;, e);\n        } catch (FileNotFoundException e) {\n            LOG.error(&quot;Error creating the file &quot;, e);\n        } catch (IOException e) {\n            LOG.error(&quot;Error creating csv file&quot;, e);\n        }\n    }\n\n</code></pre>\n"}],"owner":{"account_id":28211049,"reputation":21,"user_id":21563306,"display_name":"Sonika Kushwaha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":159,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":76007783,"answer_count":1,"score":0,"last_activity_date":1681556884,"creation_date":1681394265,"question_id":76006320,"body_markdown":"I am getting the clasCastException while processing the json data. \r\n\r\nI want to get &quot;employeeid&quot; from a JSON response and want to write later the employee IDs in a new Excel file. However, I am getting the class cast exception - String can not be cast into an Object. \r\n\r\nI have pasted my code below as I am new to this so your help will be really appreciated.\r\n\r\nhere is my JSON Response:\r\n```json\r\n\r\n{\r\n    &quot;msg&quot;: &quot;Successful&quot;,\r\n    &quot;displaycount&quot;: &quot;50&quot;,\r\n    &quot;totalcount&quot;: &quot;1294&quot;,\r\n    &quot;userdetails&quot;: [\r\n        {\r\n            &quot;employeeid&quot;: &quot;132421&quot;,\r\n            &quot;userKey&quot;: 17\r\n        },\r\n        {\r\n            &quot;employeeid&quot;: &quot;112342&quot;,\r\n            &quot;userKey&quot;: 18\r\n        },\r\n        {\r\n            &quot;employeeid&quot;: &quot;112341&quot;,\r\n            &quot;userKey&quot;: 19\r\n        },\r\n        {\r\n            &quot;employeeid&quot;: &quot;112343&quot;,\r\n            &quot;userKey&quot;: 20\r\n        },\r\n        {\r\n            &quot;employeeid&quot;: &quot;99954&quot;,\r\n            &quot;userKey&quot;: 21\r\n        },\r\n    ],\r\n    &quot;errorCode&quot;: &quot;0&quot;\r\n}\r\n\r\n```\r\nCode:\r\n\r\n```java \r\npackage api.src;\r\n\r\nimport java.io.FileOutputStream;\r\nimport java.io.FileReader;\r\nimport java.io.FileWriter;\r\nimport java.io.IOException;\r\nimport java.io.PrintWriter;\r\nimport java.net.URI;\r\nimport java.net.URISyntaxException;\r\nimport java.net.http.HttpClient;\r\nimport java.net.http.HttpRequest;\r\nimport java.net.http.HttpResponse;\r\nimport com.opencsv.CSVWriter;\r\nimport java.io.*;\r\n\r\nimport org.json.simple.JSONArray;\r\nimport org.json.simple.JSONObject;\r\nimport org.json.simple.parser.JSONParser;\r\nimport org.json.simple.parser.ParseException;\r\n\r\npublic class callAPI {\r\n\r\n\t static String[] finalResult;\r\n\t public static void main(String[] args) throws URISyntaxException, IOException, InterruptedException, ParseException {\r\n\r\n\t\tHttpRequest request = HttpRequest.newBuilder()\r\n\t\t\t.uri(URI.create(&quot;*****&quot;))\r\n\t\t\t.header(&quot;X-RapidAPI-Host&quot;, &quot;***********&quot;)\r\n\t\t\t.header(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n\t\t\t.header(&quot;Authorization&quot;,**********)\r\n\t\t\t.method(&quot;POST&quot;, HttpRequest.BodyPublishers.noBody())\r\n\t\t\t.build();\r\n\r\n\tSystem.out.println(&quot;Connected &quot;+request);\r\n\r\n\ttry {\r\n\t\tString path = &quot;D:/Sonika/JARs/httpresponse.json&quot;;\r\n\r\n\t\tHttpResponse&lt;String&gt; response = null;\r\n\t\tresponse = HttpClient.newHttpClient().send(request, \r\n        HttpResponse.BodyHandlers.ofString());\r\n\t\tint statusCode = response.statusCode();\r\n\t\tSystem.out.println(statusCode);\r\n\r\n\t\tSystem.out.println(response.body());\r\n\t\ttry (PrintWriter out = new PrintWriter(new FileWriter(path))) {\r\n\t\t\tout.write(response.body().toString());\r\n\t\t}\r\n\r\n        JSONParser parse = new JSONParser();\r\n\t\tJSONObject jobj = (JSONObject) parse.parse(new FileReader(path));\r\n\t\tJSONArray jsonarr_1 = (JSONArray) jobj.get(&quot;userdetails&quot;);\r\n\r\n\t\t//Get data for userdetails array\r\n\t\tfor (Object element : jsonarr_1) {\r\n\t\t//Store the JSON objects in an array\r\n\t\t//Get the index of the JSON object and print the values as per the index\r\n\t\tJSONObject jsonobj_1 = (JSONObject)element;\r\n\t\tfinalResult =  (String[]) jsonobj_1.get(&quot;employeeid&quot;);\r\n\t\tSystem.out.println(&quot;\\nEmployee ID: &quot;+finalResult);\r\n\r\n\t\t}\t\r\n\t}\r\n\t\r\n\tcatch(IOException e) {\r\n\t    // handle not expected exception\r\n\t    e.printStackTrace();\r\n\t}\r\n\t}\r\n\tpublic void writingCSVFile(){\r\n\t\ttry {\r\n\t\t\tCSVWriter  file = new CSVWriter(new FileWriter(new File(&quot;D:/Sonika/JARs/OutputExcelfile.xlsx&quot;)));\r\n\t\t\tString[] colName = { &quot;Employee ID&quot;};\r\n\t\t\tfile.writeNext(colName);\r\n\t\t\tfile.writeNext(finalResult);\r\n\t\t\tfile.close();\r\n\t\t} \r\n\t\tcatch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\t\r\n}\r\n\r\n```\r\n\r\n","title":"Exception in main java.lang.ClassCastException:class java.lang.String can&#39;t be cast to class","body":"<p>I am getting the clasCastException while processing the json data.</p>\n<p>I want to get &quot;employeeid&quot; from a JSON response and want to write later the employee IDs in a new Excel file. However, I am getting the class cast exception - String can not be cast into an Object.</p>\n<p>I have pasted my code below as I am new to this so your help will be really appreciated.</p>\n<p>here is my JSON Response:</p>\n<pre class=\"lang-json prettyprint-override\"><code>\n{\n    &quot;msg&quot;: &quot;Successful&quot;,\n    &quot;displaycount&quot;: &quot;50&quot;,\n    &quot;totalcount&quot;: &quot;1294&quot;,\n    &quot;userdetails&quot;: [\n        {\n            &quot;employeeid&quot;: &quot;132421&quot;,\n            &quot;userKey&quot;: 17\n        },\n        {\n            &quot;employeeid&quot;: &quot;112342&quot;,\n            &quot;userKey&quot;: 18\n        },\n        {\n            &quot;employeeid&quot;: &quot;112341&quot;,\n            &quot;userKey&quot;: 19\n        },\n        {\n            &quot;employeeid&quot;: &quot;112343&quot;,\n            &quot;userKey&quot;: 20\n        },\n        {\n            &quot;employeeid&quot;: &quot;99954&quot;,\n            &quot;userKey&quot;: 21\n        },\n    ],\n    &quot;errorCode&quot;: &quot;0&quot;\n}\n\n</code></pre>\n<p>Code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package api.src;\n\nimport java.io.FileOutputStream;\nimport java.io.FileReader;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport java.net.URI;\nimport java.net.URISyntaxException;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpResponse;\nimport com.opencsv.CSVWriter;\nimport java.io.*;\n\nimport org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.json.simple.parser.JSONParser;\nimport org.json.simple.parser.ParseException;\n\npublic class callAPI {\n\n     static String[] finalResult;\n     public static void main(String[] args) throws URISyntaxException, IOException, InterruptedException, ParseException {\n\n        HttpRequest request = HttpRequest.newBuilder()\n            .uri(URI.create(&quot;*****&quot;))\n            .header(&quot;X-RapidAPI-Host&quot;, &quot;***********&quot;)\n            .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n            .header(&quot;Authorization&quot;,**********)\n            .method(&quot;POST&quot;, HttpRequest.BodyPublishers.noBody())\n            .build();\n\n    System.out.println(&quot;Connected &quot;+request);\n\n    try {\n        String path = &quot;D:/Sonika/JARs/httpresponse.json&quot;;\n\n        HttpResponse&lt;String&gt; response = null;\n        response = HttpClient.newHttpClient().send(request, \n        HttpResponse.BodyHandlers.ofString());\n        int statusCode = response.statusCode();\n        System.out.println(statusCode);\n\n        System.out.println(response.body());\n        try (PrintWriter out = new PrintWriter(new FileWriter(path))) {\n            out.write(response.body().toString());\n        }\n\n        JSONParser parse = new JSONParser();\n        JSONObject jobj = (JSONObject) parse.parse(new FileReader(path));\n        JSONArray jsonarr_1 = (JSONArray) jobj.get(&quot;userdetails&quot;);\n\n        //Get data for userdetails array\n        for (Object element : jsonarr_1) {\n        //Store the JSON objects in an array\n        //Get the index of the JSON object and print the values as per the index\n        JSONObject jsonobj_1 = (JSONObject)element;\n        finalResult =  (String[]) jsonobj_1.get(&quot;employeeid&quot;);\n        System.out.println(&quot;\\nEmployee ID: &quot;+finalResult);\n\n        }   \n    }\n    \n    catch(IOException e) {\n        // handle not expected exception\n        e.printStackTrace();\n    }\n    }\n    public void writingCSVFile(){\n        try {\n            CSVWriter  file = new CSVWriter(new FileWriter(new File(&quot;D:/Sonika/JARs/OutputExcelfile.xlsx&quot;)));\n            String[] colName = { &quot;Employee ID&quot;};\n            file.writeNext(colName);\n            file.writeNext(finalResult);\n            file.close();\n        } \n        catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n    \n}\n\n</code></pre>\n"},{"tags":["java","collections","entitymanager"],"comments":[{"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1680266054,"post_id":75898542,"comment_id":133873333,"body_markdown":"You should define entity classes for the user and email, and use a standard HQL approach.","body":"You should define entity classes for the user and email, and use a standard HQL approach."}],"answers":[{"tags":[],"owner":{"account_id":14549481,"reputation":1,"user_id":10508824,"display_name":"Anck8"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681488490,"creation_date":1681488490,"answer_id":76017023,"question_id":75898542,"body_markdown":"I got a solution thanks to [this][1] post from awhile back!\r\n\r\nSo, simply put... a Tuple structure can work really well or such queries, and the return object is really easy to manage.\r\n\r\nThen its just a matter of filtering out the values and the key they&#39;re associated with, adding the values to the Map their key is in it already, and adding the key to the list if its not.\r\n\r\nThe code:\r\n\r\n\r\n       List&lt;Tuple&gt; result = query.getResultList();\r\n       Map&lt;Integer, List&lt;String&gt;&gt; finalObject = new HashMap&lt;&gt;();\r\n       List&lt;String&gt; emailsValue;\r\n       BigInteger codeKey;\r\n    \r\n       for (Tuple t : result) {\r\n           if (t.get(&quot;id&quot;, BigInteger.class) != null) {\r\n               codeKey = t.get(&quot;id&quot;, BigInteger.class);\r\n               if (finalObject.containsKey(codeKey.intValue())) {\r\n                   emailsValue = finalObject.get(codeKey.intValue());\r\n                   emailsValue.add(t.get(&quot;email&quot;, String.class));\r\n           } else {\r\n               emailsValue = new ArrayList&lt;&gt;();\r\n               emailsValue.add(t.get(&quot;email&quot;, String.class));\r\n               finalObject.put(codeKey.intValue(), emailsValue);\r\n           }\r\n       }\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/29717234/java-adding-another-string-value-to-existing-hashmap-key-without-overwriting\r\n","title":"Populating Map values with multiple parameters from nativeQuery","body":"<p>I got a solution thanks to <a href=\"https://stackoverflow.com/questions/29717234/java-adding-another-string-value-to-existing-hashmap-key-without-overwriting\">this</a> post from awhile back!</p>\n<p>So, simply put... a Tuple structure can work really well or such queries, and the return object is really easy to manage.</p>\n<p>Then its just a matter of filtering out the values and the key they're associated with, adding the values to the Map their key is in it already, and adding the key to the list if its not.</p>\n<p>The code:</p>\n<pre><code>   List&lt;Tuple&gt; result = query.getResultList();\n   Map&lt;Integer, List&lt;String&gt;&gt; finalObject = new HashMap&lt;&gt;();\n   List&lt;String&gt; emailsValue;\n   BigInteger codeKey;\n\n   for (Tuple t : result) {\n       if (t.get(&quot;id&quot;, BigInteger.class) != null) {\n           codeKey = t.get(&quot;id&quot;, BigInteger.class);\n           if (finalObject.containsKey(codeKey.intValue())) {\n               emailsValue = finalObject.get(codeKey.intValue());\n               emailsValue.add(t.get(&quot;email&quot;, String.class));\n       } else {\n           emailsValue = new ArrayList&lt;&gt;();\n           emailsValue.add(t.get(&quot;email&quot;, String.class));\n           finalObject.put(codeKey.intValue(), emailsValue);\n       }\n   }\n</code></pre>\n"}],"owner":{"account_id":14549481,"reputation":1,"user_id":10508824,"display_name":"Anck8"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681556786,"creation_date":1680265787,"question_id":75898542,"body_markdown":"Out of curiosity, I was wondering if it would be possible to populate a ` Map&lt;Integer, ArrayList&lt;String&gt;&gt; ` with my query&#39;s result...\r\n\r\nI have the following query:\r\n\r\n``` sql\r\n SELECT DISTINCT code, email FROM user;\r\n```\r\n\r\nThat results on multiple email records for the same code, as such:\r\n\r\n```\r\n| CODE     | EMAIL                     |\r\n| -------- | --------                  |\r\n| 1        | person@email.com          |\r\n| 1        | otherPerson@email.com     |\r\n| 2        | someOtherPerson@email.com |\r\n```\r\n\r\nAnd the method (that should return something):\r\n\r\n\r\n``` java\r\n    @Override\r\n    public Map&lt;Integer, ArrayList&lt;String&gt;&gt; returnCodeEmail() {\r\n        StringBuilder sql = &quot;SELECT DISTINCT code, email FROM user&quot;;\r\n        return new HashMap();\r\n    }\r\n```\r\n\r\n\r\nI tried:\r\n\r\n``` java\r\n return (Map&lt;Integer, ArrayList&lt;String&gt;&gt;) entityManager\r\n       .createNativeQuery(sql.toString())\r\n       .getResultList()\r\n       .stream()\r\n       .collect(Collectors.toMap(\r\n             t -&gt; ((Tuple) t).get(0), \r\n             t -&gt; ((Tuple) t).get(1)\r\n        ));\r\n```\r\n\r\nBut it doesn&#39;t seem to be able to populate the list as intended...\r\n\r\nHow can I make sure my map has a Key that is the ` code ` and a value list of ` emails` as in the table?\r\n\r\nThanks in advance :)","title":"Populating Map values with multiple parameters from nativeQuery","body":"<p>Out of curiosity, I was wondering if it would be possible to populate a <code>Map&lt;Integer, ArrayList&lt;String&gt;&gt;</code> with my query's result...</p>\n<p>I have the following query:</p>\n<pre class=\"lang-sql prettyprint-override\"><code> SELECT DISTINCT code, email FROM user;\n</code></pre>\n<p>That results on multiple email records for the same code, as such:</p>\n<pre><code>| CODE     | EMAIL                     |\n| -------- | --------                  |\n| 1        | person@email.com          |\n| 1        | otherPerson@email.com     |\n| 2        | someOtherPerson@email.com |\n</code></pre>\n<p>And the method (that should return something):</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    public Map&lt;Integer, ArrayList&lt;String&gt;&gt; returnCodeEmail() {\n        StringBuilder sql = &quot;SELECT DISTINCT code, email FROM user&quot;;\n        return new HashMap();\n    }\n</code></pre>\n<p>I tried:</p>\n<pre class=\"lang-java prettyprint-override\"><code> return (Map&lt;Integer, ArrayList&lt;String&gt;&gt;) entityManager\n       .createNativeQuery(sql.toString())\n       .getResultList()\n       .stream()\n       .collect(Collectors.toMap(\n             t -&gt; ((Tuple) t).get(0), \n             t -&gt; ((Tuple) t).get(1)\n        ));\n</code></pre>\n<p>But it doesn't seem to be able to populate the list as intended...</p>\n<p>How can I make sure my map has a Key that is the <code>code</code> and a value list of <code> emails</code> as in the table?</p>\n<p>Thanks in advance :)</p>\n"},{"tags":["java","linux","eclipse","gradle"],"answers":[{"tags":[],"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455746228,"creation_date":1455746228,"answer_id":35468600,"question_id":35468200,"body_markdown":"Remember:  **packages are folders.**\r\n\r\nIf you have your project broken out into components in that fashion, and you have different packages for each of them, then there at least *should* be a valid reason for that.\r\n\r\nWhile there may be a valid argument to be made on refactoring your components (which I can neither approve of or disapprove of since I don&#39;t know how these components should interact with one another), you should not look to flatten the folder structure simply because one or two developers do not wish to use tools to help them navigate it simpler.\r\n\r\nThe simplest thing to do at this point is to standardize everyone&#39;s development environment.  IDEs may not be to everyone&#39;s liking, but they specifically help mitigate against pain points like this.","title":"Is there a workaround for long folder paths in Eclipse Java projects?","body":"<p>Remember:  <strong>packages are folders.</strong></p>\n\n<p>If you have your project broken out into components in that fashion, and you have different packages for each of them, then there at least <em>should</em> be a valid reason for that.</p>\n\n<p>While there may be a valid argument to be made on refactoring your components (which I can neither approve of or disapprove of since I don't know how these components should interact with one another), you should not look to flatten the folder structure simply because one or two developers do not wish to use tools to help them navigate it simpler.</p>\n\n<p>The simplest thing to do at this point is to standardize everyone's development environment.  IDEs may not be to everyone's liking, but they specifically help mitigate against pain points like this.</p>\n"},{"tags":[],"owner":{"account_id":559428,"reputation":3077,"user_id":921739,"accept_rate":92,"display_name":"Logical Fallacy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1455839085,"creation_date":1455839085,"answer_id":35494735,"question_id":35468200,"body_markdown":"I&#39;ve confirmed that Eclipse only supports source paths that match the package names; alternatives have been [requested](https://bugs.eclipse.org/bugs/show_bug.cgi?id=16209) and marked as &quot;Won&#39;t Fix.&quot;\r\n\r\nI think I&#39;ve [found a suitable workaround](https://sampsonlchen.wordpress.com/2012/09/18/three-shortcuts-to-quickly-change-directories-in-linux/) for Linux developers wishing to do their work from the command line. In your `~/.bashrc` file, add something like this:\r\n\r\n&lt;pre&gt;\r\n\r\n    # Project shortcuts\r\n    export repo=&quot;/path/to/repository/&quot;\r\n    alias repo_root=&quot;cd $repo&quot;\r\n    alias repo_core=&quot;cd $repo/core/src/main/java/com/company/product/component/&quot;\r\n    alias repo_sub1=&quot;cd $repo/sub1/src/main/java/com/company/product/component/subcomponent1&quot;\r\n    alias repo_sub2=&quot;cd $repo/sub2/src/main/java/com/company/product/component/subcomponent2&quot;\r\n\r\n&lt;/pre&gt;\r\n\r\nOnce you have the paths set, start a new terminal instance, and run it like this:\r\n\r\n&lt;pre&gt;\r\n\r\n    bash-4.1$ repo_root\r\n    bash-4.1$ pwd\r\n    /path/to/repository\r\n    bash-4.1$ repo_sub1\r\n    bash-4.1$ pwd\r\n    /path/to/repository/sub1/src/main/java/com/company/product/component/subcomponent1\r\n\r\n&lt;/pre&gt;\r\n\r\nAlternatively, you could use `export` for each of them instead of aliases. Whatever cans your peaches. The point is that you can quickly traverse those paths much faster and do so from anywhere.","title":"Is there a workaround for long folder paths in Eclipse Java projects?","body":"<p>I've confirmed that Eclipse only supports source paths that match the package names; alternatives have been <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=16209\" rel=\"nofollow\">requested</a> and marked as \"Won't Fix.\"</p>\n\n<p>I think I've <a href=\"https://sampsonlchen.wordpress.com/2012/09/18/three-shortcuts-to-quickly-change-directories-in-linux/\" rel=\"nofollow\">found a suitable workaround</a> for Linux developers wishing to do their work from the command line. In your <code>~/.bashrc</code> file, add something like this:</p>\n\n<pre>\n\n    # Project shortcuts\n    export repo=\"/path/to/repository/\"\n    alias repo_root=\"cd $repo\"\n    alias repo_core=\"cd $repo/core/src/main/java/com/company/product/component/\"\n    alias repo_sub1=\"cd $repo/sub1/src/main/java/com/company/product/component/subcomponent1\"\n    alias repo_sub2=\"cd $repo/sub2/src/main/java/com/company/product/component/subcomponent2\"\n\n</pre>\n\n<p>Once you have the paths set, start a new terminal instance, and run it like this:</p>\n\n<pre>\n\n    bash-4.1$ repo_root\n    bash-4.1$ pwd\n    /path/to/repository\n    bash-4.1$ repo_sub1\n    bash-4.1$ pwd\n    /path/to/repository/sub1/src/main/java/com/company/product/component/subcomponent1\n\n</pre>\n\n<p>Alternatively, you could use <code>export</code> for each of them instead of aliases. Whatever cans your peaches. The point is that you can quickly traverse those paths much faster and do so from anywhere.</p>\n"},{"tags":[],"owner":{"account_id":16918448,"reputation":1,"user_id":12235830,"display_name":"Junaid Rahman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681556605,"creation_date":1681188721,"answer_id":75982496,"question_id":35468200,"body_markdown":"not the perfect answer but it might help. In Eclipse, create a &quot;keyboard shortcut&quot; (Preferences -&gt; General -&gt; Keys) for New (Folder) (e.g. Ctrl + Shift + f) . and it opens new folder dialog instantly. \r\n\r\nIn Eclipse, create a &quot;keyboard shortcut&quot; (Preferences -&gt; General -&gt; Keys) for New (Folder):\r\n[![Eclipse][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ztrsU.png","title":"Is there a workaround for long folder paths in Eclipse Java projects?","body":"<p>not the perfect answer but it might help. In Eclipse, create a &quot;keyboard shortcut&quot; (Preferences -&gt; General -&gt; Keys) for New (Folder) (e.g. Ctrl + Shift + f) . and it opens new folder dialog instantly.</p>\n<p>In Eclipse, create a &quot;keyboard shortcut&quot; (Preferences -&gt; General -&gt; Keys) for New (Folder):\n<a href=\"https://i.stack.imgur.com/ztrsU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ztrsU.png\" alt=\"Eclipse\" /></a></p>\n"}],"owner":{"account_id":559428,"reputation":3077,"user_id":921739,"accept_rate":92,"display_name":"Logical Fallacy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":35494735,"answer_count":3,"score":0,"last_activity_date":1681556605,"creation_date":1455744752,"question_id":35468200,"body_markdown":"I have an multi-project Gradle build based on Java code. It&#39;s organized into several projects in order to preserve third party dependencies while still allowing for shared code. (There are main() functions in each subcomponent.) Here&#39;s my project folder structure on disk, which I believe follows all the Gradle and Java best-practices:\r\n\r\n&lt;pre&gt;\r\n\r\n    +---repository_for_component\r\n        +---component\r\n        |   +---src\r\n        |       +---main\r\n        |           +---java\r\n        |                +---com\r\n        |                    +---company\r\n        |                        +---product\r\n        |                            +---component\r\n        |                                +---SharedSource.java\r\n        +---subcomponent1\r\n        |   +---src\r\n        |       +---main\r\n        |           +---java\r\n        |                +---com\r\n        |                    +---company\r\n        |                        +---product\r\n        |                            +---component\r\n        |                                +---subcomponent1\r\n        |                                    +---Source1.java\r\n        +---subcomponent2\r\n        |   +---src\r\n        |       +---main\r\n        |           +---java\r\n        |                +---com\r\n        |                    +---company\r\n        |                        +---product\r\n        |                            +---component\r\n        |                                +---subcomponent2\r\n        |                                    +---Source2.java\r\n        +---build.gradle\r\n        +---settings.gradle\r\n        ...\r\n\r\n&lt;/pre&gt;\r\n\r\nOne of our devs prefers not to use an IDE (terminal only), and this is understandably a huge pain for him to navigate. It&#39;s painful for me too when I have to do anything from the command line or use a file browser.\r\n\r\nBecause this repository is only for the &quot;component&quot; in question, much of the paths are redundant. In particular, this eliminates 4 redundant folders:\r\n\r\n&lt;pre&gt;\r\n\r\n    +---repository_for_component\r\n        +---subcomponent1\r\n        |   +---src\r\n        |       +---main\r\n        |           +---java\r\n        |               +---com.company.product.component.subcomponent1\r\n        |                   +---SharedSource.java\r\n    ...\r\n\r\n&lt;/pre&gt;\r\n\r\nIt&#39;s still a marginal improvement, but it&#39;s something. I&#39;d press my luck farther, but while Gradle builds this project just fine, Eclipse gives the error:\r\n\r\n&gt; The declared package &quot;com.company.product.component.subcomponent&quot; does not match the expected package &quot;&quot;\r\n\r\nAre there any workarounds I can use within Eclipse? Or other suggestions for ways to make this less painful for everyone?","title":"Is there a workaround for long folder paths in Eclipse Java projects?","body":"<p>I have an multi-project Gradle build based on Java code. It's organized into several projects in order to preserve third party dependencies while still allowing for shared code. (There are main() functions in each subcomponent.) Here's my project folder structure on disk, which I believe follows all the Gradle and Java best-practices:</p>\n\n<pre>\n\n    +---repository_for_component\n        +---component\n        |   +---src\n        |       +---main\n        |           +---java\n        |                +---com\n        |                    +---company\n        |                        +---product\n        |                            +---component\n        |                                +---SharedSource.java\n        +---subcomponent1\n        |   +---src\n        |       +---main\n        |           +---java\n        |                +---com\n        |                    +---company\n        |                        +---product\n        |                            +---component\n        |                                +---subcomponent1\n        |                                    +---Source1.java\n        +---subcomponent2\n        |   +---src\n        |       +---main\n        |           +---java\n        |                +---com\n        |                    +---company\n        |                        +---product\n        |                            +---component\n        |                                +---subcomponent2\n        |                                    +---Source2.java\n        +---build.gradle\n        +---settings.gradle\n        ...\n\n</pre>\n\n<p>One of our devs prefers not to use an IDE (terminal only), and this is understandably a huge pain for him to navigate. It's painful for me too when I have to do anything from the command line or use a file browser.</p>\n\n<p>Because this repository is only for the \"component\" in question, much of the paths are redundant. In particular, this eliminates 4 redundant folders:</p>\n\n<pre>\n\n    +---repository_for_component\n        +---subcomponent1\n        |   +---src\n        |       +---main\n        |           +---java\n        |               +---com.company.product.component.subcomponent1\n        |                   +---SharedSource.java\n    ...\n\n</pre>\n\n<p>It's still a marginal improvement, but it's something. I'd press my luck farther, but while Gradle builds this project just fine, Eclipse gives the error:</p>\n\n<blockquote>\n  <p>The declared package \"com.company.product.component.subcomponent\" does not match the expected package \"\"</p>\n</blockquote>\n\n<p>Are there any workarounds I can use within Eclipse? Or other suggestions for ways to make this less painful for everyone?</p>\n"},{"tags":["java","rabbitmq","quarkus","health-check","smallrye-reactive-messaging"],"comments":[{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1681666652,"post_id":75745888,"comment_id":134089783,"body_markdown":"if invoyceTypeRequestEmitter is not throwing any exception it means it is working, what error do you get ? or can you explain your problem more clearly ?","body":"if invoyceTypeRequestEmitter is not throwing any exception it means it is working, what error do you get ? or can you explain your problem more clearly ?"}],"owner":{"account_id":17193035,"reputation":1,"user_id":12446463,"display_name":"Lucas Pl&#225;cido"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681556493,"creation_date":1678889425,"question_id":75745888,"body_markdown":"I&#39;m using smallrye healthcheck to check the liveness and readiness of the rabbitmq container.\r\n\r\n```\r\nhttp://localhost:8080/q/health/live\r\n\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n  &lt;artifactId&gt;quarkus-smallrye-health&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n\r\n```\r\n\r\nThe health check does not identify that the container has stopped or when it only identifies after 2 hours. I tried to do a custom health check but it doesn&#39;t pop an error when using the emitter for the specified channel.\r\n\r\n```\r\npackage com.globalcards.adapter.driver.config;\r\n\r\nimport org.eclipse.microprofile.health.HealthCheck;\r\nimport org.eclipse.microprofile.health.HealthCheckResponse;\r\nimport org.eclipse.microprofile.health.Liveness;\r\nimport org.eclipse.microprofile.reactive.messaging.Channel;\r\nimport org.eclipse.microprofile.reactive.messaging.Emitter;\r\nimport org.eclipse.microprofile.reactive.messaging.Message;\r\nimport org.eclipse.microprofile.reactive.messaging.Outgoing;\r\n\r\nimport javax.enterprise.context.ApplicationScoped;\r\n\r\n\r\n@ApplicationScoped\r\n@Liveness\r\npublic class CustomHealthLivenessRabbitMq implements HealthCheck {\r\n     @Channel(&quot;sends&quot;)\r\n     Emitter&lt;String&gt; invoyceTypeRequestEmitter;\r\n    \r\n     @Override\r\n      public HealthCheckResponse call() {\r\n         try {\r\n             invoyceTypeRequestEmitter.send(&quot;healthcheck&quot;);\r\n             return HealthCheckResponse.builder().up().name(&quot;RabbitMQ container is ready &quot;).build();\r\n         } catch (Exception exception) {\r\n               return HealthCheckResponse.builder().down().name(&quot;RabbitMQ container is not readyds&quot;).build();\r\n         }\r\n     }\r\n    \r\n     @Outgoing(&quot;sends&quot;)\r\n     public String outgoing() {\r\n         return &quot;healthcheck&quot;;\r\n     }\r\n}\r\n\r\n```\r\n\r\nCan anyone help me or have you been through this?","title":"How can I make smallrye message health check work for rabbitmq?","body":"<p>I'm using smallrye healthcheck to check the liveness and readiness of the rabbitmq container.</p>\n<pre><code>http://localhost:8080/q/health/live\n\n&lt;dependency&gt;\n  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n  &lt;artifactId&gt;quarkus-smallrye-health&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n<p>The health check does not identify that the container has stopped or when it only identifies after 2 hours. I tried to do a custom health check but it doesn't pop an error when using the emitter for the specified channel.</p>\n<pre><code>package com.globalcards.adapter.driver.config;\n\nimport org.eclipse.microprofile.health.HealthCheck;\nimport org.eclipse.microprofile.health.HealthCheckResponse;\nimport org.eclipse.microprofile.health.Liveness;\nimport org.eclipse.microprofile.reactive.messaging.Channel;\nimport org.eclipse.microprofile.reactive.messaging.Emitter;\nimport org.eclipse.microprofile.reactive.messaging.Message;\nimport org.eclipse.microprofile.reactive.messaging.Outgoing;\n\nimport javax.enterprise.context.ApplicationScoped;\n\n\n@ApplicationScoped\n@Liveness\npublic class CustomHealthLivenessRabbitMq implements HealthCheck {\n     @Channel(&quot;sends&quot;)\n     Emitter&lt;String&gt; invoyceTypeRequestEmitter;\n    \n     @Override\n      public HealthCheckResponse call() {\n         try {\n             invoyceTypeRequestEmitter.send(&quot;healthcheck&quot;);\n             return HealthCheckResponse.builder().up().name(&quot;RabbitMQ container is ready &quot;).build();\n         } catch (Exception exception) {\n               return HealthCheckResponse.builder().down().name(&quot;RabbitMQ container is not readyds&quot;).build();\n         }\n     }\n    \n     @Outgoing(&quot;sends&quot;)\n     public String outgoing() {\n         return &quot;healthcheck&quot;;\n     }\n}\n\n</code></pre>\n<p>Can anyone help me or have you been through this?</p>\n"},{"tags":["java","intellij-idea","scenebuilder"],"answers":[{"tags":[],"owner":{"account_id":28244335,"reputation":1,"user_id":21591637,"display_name":"Evonix"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681556376,"creation_date":1680915374,"answer_id":75962800,"question_id":75961595,"body_markdown":"After lots of troubleshooting, I believe I have figured out the answer to my own question. This is the solution in case there are others who struggle with this.\r\n\r\nYou must set both the padding and the label padding to 0 of the button. Then you must adjust the size of the image in the button after you have made these changes. This is what worked for me.\r\n\r\n\r\n![settings of the button][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4IVYz.png","title":"Scenebuilder: ImageView inside Button is adding extra unwanted width to the button","body":"<p>After lots of troubleshooting, I believe I have figured out the answer to my own question. This is the solution in case there are others who struggle with this.</p>\n<p>You must set both the padding and the label padding to 0 of the button. Then you must adjust the size of the image in the button after you have made these changes. This is what worked for me.</p>\n<p><img src=\"https://i.stack.imgur.com/4IVYz.png\" alt=\"settings of the button\" /></p>\n"}],"owner":{"account_id":28244335,"reputation":1,"user_id":21591637,"display_name":"Evonix"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681556376,"creation_date":1680897736,"question_id":75961595,"body_markdown":"Hope you all have been having a nice day. During the development of a chess game in IntelliJ and Scenebuilder, I encountered an issue where an ImageView in a button is causing th button to be stretched out. I am unable to change the width of the button whether it be by dragging the edges or changing the values in the Layout menu.\r\n\r\n(https://i.stack.imgur.com/1EIUn.png)[Button with image]\r\n(https://i.stack.imgur.com/XSoDl.png)[Button dimensions]\r\n\r\n\r\n\r\nI have tried dragging the corners of the button to change the width, but nothing happened. I have tried editing the dimensions in the Layout menu but it did nothing. I have expermented by changing the width using code, but I was unable to find a successful method. ","title":"Scenebuilder: ImageView inside Button is adding extra unwanted width to the button","body":"<p>Hope you all have been having a nice day. During the development of a chess game in IntelliJ and Scenebuilder, I encountered an issue where an ImageView in a button is causing th button to be stretched out. I am unable to change the width of the button whether it be by dragging the edges or changing the values in the Layout menu.</p>\n<p>(<a href=\"https://i.stack.imgur.com/1EIUn.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/1EIUn.png</a>)[Button with image]\n(<a href=\"https://i.stack.imgur.com/XSoDl.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/XSoDl.png</a>)[Button dimensions]</p>\n<p>I have tried dragging the corners of the button to change the width, but nothing happened. I have tried editing the dimensions in the Layout menu but it did nothing. I have expermented by changing the width using code, but I was unable to find a successful method.</p>\n"},{"tags":["java","multithreading","concurrency","java.util.concurrent","concurrenthashmap"],"comments":[{"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":0,"creation_date":1681220300,"post_id":75986151,"comment_id":134018742,"body_markdown":"I confirm that the code as posted exhibits the observed behavior.  `Map&lt;K,V&gt;` has a naive default implementation of `computeIfAbsent()` which could cause this behavior, but it is irrelevant, because `ConcurrentHashMap` provides its own implementation. According to the documentation of `ConcurrentHashMap`, (or at any rate according to my interpretation of that documentation,) the OP should be receiving what he expects, and not what he observes. The implementation of `ConcurrentHashMap.computeIfAbsent()` is waaaay too complex for me to tell whether it is working as intended.","body":"I confirm that the code as posted exhibits the observed behavior.  <code>Map&lt;K,V&gt;</code> has a naive default implementation of <code>computeIfAbsent()</code> which could cause this behavior, but it is irrelevant, because <code>ConcurrentHashMap</code> provides its own implementation. According to the documentation of <code>ConcurrentHashMap</code>, (or at any rate according to my interpretation of that documentation,) the OP should be receiving what he expects, and not what he observes. The implementation of <code>ConcurrentHashMap.computeIfAbsent()</code> is waaaay too complex for me to tell whether it is working as intended."},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1681228611,"post_id":75986151,"comment_id":134021227,"body_markdown":"If anyone is interested at taking a look, [here&#39;s the source code for OpenJDK](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1691).","body":"If anyone is interested at taking a look, <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1691\" rel=\"nofollow noreferrer\">here&#39;s the source code for OpenJDK</a>."}],"answers":[{"comments":[{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1681219637,"post_id":75986298,"comment_id":134018513,"body_markdown":"@MikeNatis The javadoc says &quot;may be blocked&quot; which implies that &quot;some may not be blocked&quot;. Therefore other attempted computeIfAbsent operations on this map may not be blocked while another is running.","body":"@MikeNatis The javadoc says &quot;may be blocked&quot; which implies that &quot;some may not be blocked&quot;. Therefore other attempted computeIfAbsent operations on this map may not be blocked while another is running."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1681219847,"post_id":75986298,"comment_id":134018605,"body_markdown":"Concurrent access with a key not held in same sub-section of the map will be blocked.","body":"Concurrent access with a key not held in same sub-section of the map will be blocked."},{"owner":{"account_id":18610249,"reputation":21,"user_id":13562867,"display_name":"Ahmad Darwich"},"score":0,"creation_date":1681220009,"post_id":75986298,"comment_id":134018659,"body_markdown":"I don&#39;t have same keys in my example, why size is not updated atomically with the insert in map?","body":"I don&#39;t have same keys in my example, why size is not updated atomically with the insert in map?"},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1681220591,"post_id":75986298,"comment_id":134018832,"body_markdown":"The atomic insert applies to use of same key. But you have different keys so some of them may run concurrently. If you increase number of threads I&#39;d expect to see more where &quot;size()&quot; is 0","body":"The atomic insert applies to use of same key. But you have different keys so some of them may run concurrently. If you increase number of threads I&#39;d expect to see more where &quot;size()&quot; is 0"},{"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":1,"creation_date":1681220736,"post_id":75986298,"comment_id":134018877,"body_markdown":"^^^ Okay, that&#39;s it.","body":"^^^ Okay, that&#39;s it."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1683622199,"post_id":75986298,"comment_id":134390891,"body_markdown":"Also worth citing: [“*Bear in mind that the results of aggregate status methods including `size`, `isEmpty`, and `containsValue` are typically useful only when a map is not undergoing concurrent updates in other threads.*”](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html#:~:text=Bear%20in%20mind,%20other%20threads.)","body":"Also worth citing: <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html#:~:text=Bear%20in%20mind,%20other%20threads.\" rel=\"nofollow noreferrer\">“<i>Bear in mind that the results of aggregate status methods including <code>size</code>, <code>isEmpty</code>, and <code>containsValue</code> are typically useful only when a map is not undergoing concurrent updates in other threads.</i>”</a>"}],"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":6,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1681555331,"creation_date":1681218753,"answer_id":75986298,"question_id":75986151,"body_markdown":"Your assumption is wrong, as many different threads could be executing the same mapping function concurrently for different keys.\r\n\r\n`ConcurrentHashMap` is thread-safe but permits concurrent updates to the map. Some callers which are accessing similar parts of the underlying mapping tables may block while waiting for another thread to finish. \r\n\r\nYou won&#39;t find that `computeIfAbsent(someKey,mapFunc)` runs the mapping function for the same key twice, because it is an atomic operation for that key. So second or concurrent caller would see the value of the first call. However another `computeIfAbsent(anotherKey,mapFunc)` could be running at exactly the same time which is why your mapping function may evaluate `size()` to be same value for multiple keys.\r\n\r\nThe javadoc states:\r\n\r\n&gt; The supplied function is invoked exactly once per invocation of this method if the key is absent, else not at all.\r\n\r\n&gt; Some attempted update operations on this map by other threads may be blocked while computation is in progress, so the computation should be short and simple.\r\n\r\nIf you wish to have unique values you could use `AtomicInteger` counter.\r\n\r\n","title":"ComputeIfAbsent wrong map size","body":"<p>Your assumption is wrong, as many different threads could be executing the same mapping function concurrently for different keys.</p>\n<p><code>ConcurrentHashMap</code> is thread-safe but permits concurrent updates to the map. Some callers which are accessing similar parts of the underlying mapping tables may block while waiting for another thread to finish.</p>\n<p>You won't find that <code>computeIfAbsent(someKey,mapFunc)</code> runs the mapping function for the same key twice, because it is an atomic operation for that key. So second or concurrent caller would see the value of the first call. However another <code>computeIfAbsent(anotherKey,mapFunc)</code> could be running at exactly the same time which is why your mapping function may evaluate <code>size()</code> to be same value for multiple keys.</p>\n<p>The javadoc states:</p>\n<blockquote>\n<p>The supplied function is invoked exactly once per invocation of this method if the key is absent, else not at all.</p>\n</blockquote>\n<blockquote>\n<p>Some attempted update operations on this map by other threads may be blocked while computation is in progress, so the computation should be short and simple.</p>\n</blockquote>\n<p>If you wish to have unique values you could use <code>AtomicInteger</code> counter.</p>\n"},{"comments":[{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1681226263,"post_id":75986826,"comment_id":134020600,"body_markdown":"The important bit is line after `synchronized(r)` - the `if (casTabAt(tab, i, null, r)` means only one thread adds its version of `r` to the table and computes the first value, all other threads go around loop again and are stuck on another synchronized(r or f) or see the new computed value.","body":"The important bit is line after <code>synchronized(r)</code> - the <code>if (casTabAt(tab, i, null, r)</code> means only one thread adds its version of <code>r</code> to the table and computes the first value, all other threads go around loop again and are stuck on another synchronized(r or f) or see the new computed value."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1681227187,"post_id":75986826,"comment_id":134020879,"body_markdown":"That explains the synchronization aspect around `ReservationNode`, but I believe it would still hold that another thread could enter the `synchronized` and compute the mapping function before the first thread reaches that `addCount`.","body":"That explains the synchronization aspect around <code>ReservationNode</code>, but I believe it would still hold that another thread could enter the <code>synchronized</code> and compute the mapping function before the first thread reaches that <code>addCount</code>."},{"owner":{"account_id":18610249,"reputation":21,"user_id":13562867,"display_name":"Ahmad Darwich"},"score":0,"creation_date":1681287247,"post_id":75986826,"comment_id":134030531,"body_markdown":"and why using integer instead of short works? :)","body":"and why using integer instead of short works? :)"}],"tags":[],"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681221926,"creation_date":1681221926,"answer_id":75986826,"question_id":75986151,"body_markdown":"Something to note with ConcurrentHashMap is how the size of the map is calculated:\r\n\r\n    public int size() {\r\n        long n = sumCount();\r\n        return ((n &lt; 0L) ? 0 :\r\n                (n &gt; (long)Integer.MAX_VALUE) ? Integer.MAX_VALUE :\r\n                (int)n);\r\n    }\r\n\r\n    final long sumCount() {\r\n        CounterCell[] cs = counterCells;\r\n        long sum = baseCount;\r\n        if (cs != null) {\r\n            for (CounterCell c : cs)\r\n                if (c != null)\r\n                    sum += c.value;\r\n        }\r\n        return sum;\r\n    }\r\n\r\nThese &quot;counter cells&quot; are updated upon a call to `addCount` internally. [At the end](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1775) of the `#computeIfAbsent` method we have:\r\n\r\n    if (val != null)\r\n        addCount(1L, binCount);\r\n    return val;\r\n\r\nHowever, before this code is reached, the lambda expression you are passing will have already been evaluated earlier on in the method. For instance, when we are first adding values, they will synchronize on a `ReservationNode`:\r\n\r\n    Node&lt;K,V&gt; r = new ReservationNode&lt;K,V&gt;();\r\n    synchronized (r) {\r\n        if (casTabAt(tab, i, null, r)) { //compare-and-swap\r\n            binCount = 1;\r\n            Node&lt;K,V&gt; node = null;\r\n            try {\r\n                if ((val = mappingFunction.apply(key)) != null) //runs the mapping function\r\n                    node = new Node&lt;K,V&gt;(h, key, val);\r\n                } finally {\r\n                    setTabAt(tab, i, node);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nsrc: [ConcurrentHashMap#computeIfAbsent](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1701-L1717)\r\n\r\nThe above code is quite suspect to me, and leaves me thinking that nothing would be truly blocked/synchronized on the creation phase here. Later on in the method (once the table entry exists), you&#39;ll see it doing `synchronized(f)` (the hash bucket) in order to compute/put the new values, which then causes the sequential insertion you see above.\r\n\r\nSo, those concurrent updates at the start (when we are first initializing the map) are not only capable of running in parallel, but even with proper synchronization in place could potentially retrieve a `0` for the Map&#39;s size before the end of the `#computeIfAbsent` call.","title":"ComputeIfAbsent wrong map size","body":"<p>Something to note with ConcurrentHashMap is how the size of the map is calculated:</p>\n<pre><code>public int size() {\n    long n = sumCount();\n    return ((n &lt; 0L) ? 0 :\n            (n &gt; (long)Integer.MAX_VALUE) ? Integer.MAX_VALUE :\n            (int)n);\n}\n\nfinal long sumCount() {\n    CounterCell[] cs = counterCells;\n    long sum = baseCount;\n    if (cs != null) {\n        for (CounterCell c : cs)\n            if (c != null)\n                sum += c.value;\n    }\n    return sum;\n}\n</code></pre>\n<p>These &quot;counter cells&quot; are updated upon a call to <code>addCount</code> internally. <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1775\" rel=\"nofollow noreferrer\">At the end</a> of the <code>#computeIfAbsent</code> method we have:</p>\n<pre><code>if (val != null)\n    addCount(1L, binCount);\nreturn val;\n</code></pre>\n<p>However, before this code is reached, the lambda expression you are passing will have already been evaluated earlier on in the method. For instance, when we are first adding values, they will synchronize on a <code>ReservationNode</code>:</p>\n<pre><code>Node&lt;K,V&gt; r = new ReservationNode&lt;K,V&gt;();\nsynchronized (r) {\n    if (casTabAt(tab, i, null, r)) { //compare-and-swap\n        binCount = 1;\n        Node&lt;K,V&gt; node = null;\n        try {\n            if ((val = mappingFunction.apply(key)) != null) //runs the mapping function\n                node = new Node&lt;K,V&gt;(h, key, val);\n            } finally {\n                setTabAt(tab, i, node);\n            }\n        }\n    }\n}\n</code></pre>\n<p>src: <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1701-L1717\" rel=\"nofollow noreferrer\">ConcurrentHashMap#computeIfAbsent</a></p>\n<p>The above code is quite suspect to me, and leaves me thinking that nothing would be truly blocked/synchronized on the creation phase here. Later on in the method (once the table entry exists), you'll see it doing <code>synchronized(f)</code> (the hash bucket) in order to compute/put the new values, which then causes the sequential insertion you see above.</p>\n<p>So, those concurrent updates at the start (when we are first initializing the map) are not only capable of running in parallel, but even with proper synchronization in place could potentially retrieve a <code>0</code> for the Map's size before the end of the <code>#computeIfAbsent</code> call.</p>\n"}],"owner":{"account_id":18610249,"reputation":21,"user_id":13562867,"display_name":"Ahmad Darwich"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1681555331,"creation_date":1681217739,"question_id":75986151,"body_markdown":"I have tried below code in order to have a unique id for each jj.\r\n\r\nAs far as I know, computeIfAbsent is thread-safe but:\r\n\r\n\r\n```\r\n    public static void main(String[] args) throws InterruptedException {\r\n        ExecutorService executorService =\r\n                Executors.newFixedThreadPool(4);\r\n\r\n        final Map&lt;String, ConcurrentHashMap&lt;String, Short&gt;&gt; threadSafeMap = new ConcurrentHashMap&lt;&gt;();\r\n        threadSafeMap.put(&quot;0&quot;, new ConcurrentHashMap&lt;&gt;());\r\n        threadSafeMap.put(&quot;1&quot;, new ConcurrentHashMap&lt;&gt;());\r\n\r\n        for (int i = 1; i &lt;= 10; i++) {\r\n            final int jj = i;\r\n            executorService.submit(() -&gt; {\r\n                int                                key              = jj % 2;\r\n                final ConcurrentMap&lt;String, Short&gt; idByName = threadSafeMap.get(String.valueOf(key));\r\n                return idByName.computeIfAbsent(String.valueOf(jj), x -&gt; (short) idByName.size());\r\n            });\r\n        }\r\n        executorService.shutdown();\r\n        executorService.awaitTermination(5, TimeUnit.SECONDS);\r\n        System.out.println(threadSafeMap);\r\n    }\r\n```\r\n\r\n\r\n\r\nActual value:\r\n{0={2=0, 4=0, 6=2, 8=3, 10=4}, 1={1=0, 3=0, 5=2, 7=3, 9=4}}\r\n\r\nExpected value for example (due to concurrency):\r\n{0={2=0, 4=1, 6=2, 8=3, 10=4}, 1={1=1, 3=0, 5=2, 7=3, 9=4}}\r\n\r\nThe problem is that I have with 2=0 and 4=0, which is wrong values should be unique!\r\n\r\nbtw using interger instead of short solve the issue!\r\nCould you please help?","title":"ComputeIfAbsent wrong map size","body":"<p>I have tried below code in order to have a unique id for each jj.</p>\n<p>As far as I know, computeIfAbsent is thread-safe but:</p>\n<pre><code>    public static void main(String[] args) throws InterruptedException {\n        ExecutorService executorService =\n                Executors.newFixedThreadPool(4);\n\n        final Map&lt;String, ConcurrentHashMap&lt;String, Short&gt;&gt; threadSafeMap = new ConcurrentHashMap&lt;&gt;();\n        threadSafeMap.put(&quot;0&quot;, new ConcurrentHashMap&lt;&gt;());\n        threadSafeMap.put(&quot;1&quot;, new ConcurrentHashMap&lt;&gt;());\n\n        for (int i = 1; i &lt;= 10; i++) {\n            final int jj = i;\n            executorService.submit(() -&gt; {\n                int                                key              = jj % 2;\n                final ConcurrentMap&lt;String, Short&gt; idByName = threadSafeMap.get(String.valueOf(key));\n                return idByName.computeIfAbsent(String.valueOf(jj), x -&gt; (short) idByName.size());\n            });\n        }\n        executorService.shutdown();\n        executorService.awaitTermination(5, TimeUnit.SECONDS);\n        System.out.println(threadSafeMap);\n    }\n</code></pre>\n<p>Actual value:\n{0={2=0, 4=0, 6=2, 8=3, 10=4}, 1={1=0, 3=0, 5=2, 7=3, 9=4}}</p>\n<p>Expected value for example (due to concurrency):\n{0={2=0, 4=1, 6=2, 8=3, 10=4}, 1={1=1, 3=0, 5=2, 7=3, 9=4}}</p>\n<p>The problem is that I have with 2=0 and 4=0, which is wrong values should be unique!</p>\n<p>btw using interger instead of short solve the issue!\nCould you please help?</p>\n"},{"tags":["java","unit-testing","asynchronous","junit"],"comments":[{"owner":{"account_id":1189183,"reputation":367,"user_id":1162452,"display_name":"cs0lar"},"score":0,"creation_date":1358608826,"post_id":631598,"comment_id":20756757,"body_markdown":"You could try JAT (Java Asynchronous Test): https://bitbucket.org/csolar/jat","body":"You could try JAT (Java Asynchronous Test): <a href=\"https://bitbucket.org/csolar/jat\" rel=\"nofollow noreferrer\">bitbucket.org/csolar/jat</a>"},{"owner":{"account_id":176459,"reputation":18762,"user_id":407170,"accept_rate":88,"display_name":"Les Hazlewood"},"score":2,"creation_date":1409775283,"post_id":631598,"comment_id":40085017,"body_markdown":"JAT has 1 watcher and hasn&#39;t been updated in 1.5 years.  Awaitility was  updated just 1 month ago and is on version 1.6 at the time of this writing.  I&#39;m not affiliated with either project, but if I was going to invest in an addition to my project, I&#39;d give more credence to Awaitility at this time.","body":"JAT has 1 watcher and hasn&#39;t been updated in 1.5 years.  Awaitility was  updated just 1 month ago and is on version 1.6 at the time of this writing.  I&#39;m not affiliated with either project, but if I was going to invest in an addition to my project, I&#39;d give more credence to Awaitility at this time."},{"owner":{"account_id":85409,"reputation":89783,"user_id":238134,"accept_rate":73,"display_name":"deamon"},"score":0,"creation_date":1508228752,"post_id":631598,"comment_id":80517607,"body_markdown":"JAT has still no updates: &quot;Last updated 2013-01-19&quot;. Just save the time to follow the link.","body":"JAT has still no updates: &quot;Last updated 2013-01-19&quot;. Just save the time to follow the link."},{"owner":{"account_id":1933692,"reputation":260,"user_id":1742529,"display_name":"user1742529"},"score":1,"creation_date":1565080596,"post_id":631598,"comment_id":101229009,"body_markdown":"@LesHazlewood, one watcher is bad for JAT, but about no updates for years... Just one example. How often do you update low-level TCP stack of your OS, if it just works? Alternative to JAT is answered below https://stackoverflow.com/questions/631598/how-to-use-junit-to-test-asynchronous-processes/3303638#3303638 .","body":"@LesHazlewood, one watcher is bad for JAT, but about no updates for years... Just one example. How often do you update low-level TCP stack of your OS, if it just works? Alternative to JAT is answered below <a href=\"https://stackoverflow.com/questions/631598/how-to-use-junit-to-test-asynchronous-processes/3303638#3303638\" title=\"how to use junit to test asynchronous processes\">stackoverflow.com/questions/631598/&hellip;</a> ."}],"answers":[{"comments":[{"owner":{"account_id":2915411,"reputation":13804,"user_id":2498729,"accept_rate":69,"display_name":"But I&#39;m Not A Wrapper Class"},"score":0,"creation_date":1699379262,"post_id":631606,"comment_id":136523315,"body_markdown":"For those wondering, just use the `get()` [method](https://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html#get()).","body":"For those wondering, just use the <code>get()</code> <a href=\"https://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html#get()\" rel=\"nofollow noreferrer\">method</a>."}],"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"comment_count":1,"down_vote_count":2,"up_vote_count":27,"is_accepted":false,"score":25,"last_activity_date":1236708769,"creation_date":1236708769,"answer_id":631606,"question_id":631598,"body_markdown":"Start the process off and wait for the result using a [`Future`][1].\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/concurrent/Future.html","title":"How to use JUnit to test asynchronous processes","body":"<p>Start the process off and wait for the result using a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/concurrent/Future.html\" rel=\"noreferrer\"><code>Future</code></a>.</p>\n"},{"comments":[{"owner":{"account_id":1924,"reputation":5480,"user_id":2652,"accept_rate":74,"display_name":"lacker"},"score":171,"creation_date":1308789913,"post_id":631754,"comment_id":7571522,"body_markdown":"Sure. But sometimes you need to test code that is specifically supposed to manage threads.","body":"Sure. But sometimes you need to test code that is specifically supposed to manage threads."},{"owner":{"account_id":229776,"reputation":2576,"user_id":589302,"accept_rate":83,"display_name":"Andras Bal&#225;zs Lajtha"},"score":0,"creation_date":1353568034,"post_id":631754,"comment_id":18488004,"body_markdown":"I&#39;m writing a messaging framework, it three layers, an application layer, a data access layer and the transport layer. Application layer handles the state of the signaling, data access layer handles addressing. These are independent of network technology, so I have my unit tests for them. I also have integration tests for the whole thing running on a memory based transport layer.\nHow can I test the network based transport layer? I can run it on loopback, having only milliseconds of latency, but that still is async.","body":"I&#39;m writing a messaging framework, it three layers, an application layer, a data access layer and the transport layer. Application layer handles the state of the signaling, data access layer handles addressing. These are independent of network technology, so I have my unit tests for them. I also have integration tests for the whole thing running on a memory based transport layer. How can I test the network based transport layer? I can run it on loopback, having only milliseconds of latency, but that still is async."},{"owner":{"account_id":176459,"reputation":18762,"user_id":407170,"accept_rate":88,"display_name":"Les Hazlewood"},"score":88,"creation_date":1409774947,"post_id":631754,"comment_id":40084869,"body_markdown":"For those of us that use Junit or TestNG to do integration testing (and not just unit testing), or user acceptance testing (e.g. w/ Cucumber), waiting for an async completion and verifying the result is absolutely necessary.","body":"For those of us that use Junit or TestNG to do integration testing (and not just unit testing), or user acceptance testing (e.g. w/ Cucumber), waiting for an async completion and verifying the result is absolutely necessary."},{"owner":{"account_id":2306835,"reputation":1104,"user_id":2025948,"display_name":"Charles"},"score":48,"creation_date":1423930276,"post_id":631754,"comment_id":45352100,"body_markdown":"Asynchronous processes are some of the most complicated code to get right and you say you should not use unit testing for them and only test with a single thread? That&#39;s a very bad idea.","body":"Asynchronous processes are some of the most complicated code to get right and you say you should not use unit testing for them and only test with a single thread? That&#39;s a very bad idea."},{"owner":{"account_id":1849412,"reputation":2631,"user_id":1676293,"accept_rate":55,"display_name":"Scott Boring"},"score":23,"creation_date":1449681403,"post_id":631754,"comment_id":56116122,"body_markdown":"Mock tests often fail to prove that functionality works end to end. Async functionality needs to be tested in an asynchronous manner to insure it works. Call it an integration test if you prefer, but it&#39;s a test that is still needed.","body":"Mock tests often fail to prove that functionality works end to end. Async functionality needs to be tested in an asynchronous manner to insure it works. Call it an integration test if you prefer, but it&#39;s a test that is still needed."},{"owner":{"account_id":2069826,"reputation":646,"user_id":1844551,"display_name":"Nils Rommelfanger"},"score":0,"creation_date":1472455659,"post_id":631754,"comment_id":65741066,"body_markdown":"I don&#180;t agree that asynchronous code has to be tested in an asynchronous manner. For testing the logic and error cases it is totally fine to have the code run synchronous.\n\nIn my tests I mock all the asynchronous functions with a synchronous result. Like that I can test the functionality without having to care about asynchronous behaviour.","body":"I don&#180;t agree that asynchronous code has to be tested in an asynchronous manner. For testing the logic and error cases it is totally fine to have the code run synchronous.  In my tests I mock all the asynchronous functions with a synchronous result. Like that I can test the functionality without having to care about asynchronous behaviour."},{"owner":{"account_id":1781171,"reputation":1393,"user_id":1623885,"display_name":"George Aristy"},"score":1,"creation_date":1523479554,"post_id":631754,"comment_id":86583791,"body_markdown":"There are techniques that minimize &quot;waiting for other threads&quot;, pretty much negating your view that this is a bad practice. An even worst practice is not testing this code. See Martin&#39;s answer for an example.","body":"There are techniques that minimize &quot;waiting for other threads&quot;, pretty much negating your view that this is a bad practice. An even worst practice is not testing this code. See Martin&#39;s answer for an example."},{"owner":{"account_id":316740,"reputation":488,"user_id":633062,"accept_rate":50,"display_name":"Jeremiah Adams"},"score":10,"creation_date":1529426809,"post_id":631754,"comment_id":88865177,"body_markdown":"This should not be the accepted answer. Testing goes beyond unit testing. The OP calls it out as more of an Integration Test than a Unit Test.","body":"This should not be the accepted answer. Testing goes beyond unit testing. The OP calls it out as more of an Integration Test than a Unit Test."},{"owner":{"account_id":4458527,"reputation":414,"user_id":3628073,"accept_rate":67,"display_name":"cbn"},"score":5,"creation_date":1553601691,"post_id":631754,"comment_id":97436845,"body_markdown":"This should not be the accepted answer - especially given its now 10 year age. See the other answers below for the correct solution.","body":"This should not be the accepted answer - especially given its now 10 year age. See the other answers below for the correct solution."}],"tags":[],"owner":{"account_id":2239,"reputation":7171,"user_id":3087,"display_name":"Cem Catikkas"},"comment_count":9,"down_vote_count":50,"up_vote_count":101,"is_accepted":true,"score":51,"last_activity_date":1236711210,"creation_date":1236711210,"answer_id":631754,"question_id":631598,"body_markdown":"IMHO it&#39;s bad practice to have unit tests create or wait on threads, etc. You&#39;d like these tests to run in split seconds. That&#39;s why I&#39;d like to propose a 2-step approach to testing async processes.\r\n\r\n 1. Test that your async process is submitted properly. You can mock the object that accepts your async requests and make sure that the submitted job has correct properties, etc.\r\n 2. Test that your async callbacks are doing the right things. Here you can mock out the originally submitted job and assume it&#39;s initialized properly and verify that your callbacks are correct.","title":"How to use JUnit to test asynchronous processes","body":"<p>IMHO it's bad practice to have unit tests create or wait on threads, etc. You'd like these tests to run in split seconds. That's why I'd like to propose a 2-step approach to testing async processes.</p>\n\n<ol>\n<li>Test that your async process is submitted properly. You can mock the object that accepts your async requests and make sure that the submitted job has correct properties, etc.</li>\n<li>Test that your async callbacks are doing the right things. Here you can mock out the originally submitted job and assume it's initialized properly and verify that your callbacks are correct.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":63320,"reputation":7119,"user_id":187492,"accept_rate":86,"display_name":"Martin"},"score":0,"creation_date":1407347929,"post_id":1829949,"comment_id":39183232,"body_markdown":"Nice decription of CountDownLatch @Raz","body":"Nice decription of CountDownLatch @Raz"},{"owner":{"account_id":260182,"reputation":868,"user_id":543585,"accept_rate":100,"display_name":"Gilbert"},"score":7,"creation_date":1410941683,"post_id":1829949,"comment_id":40510992,"body_markdown":"If you&#39;re verifying that onSuccess was called, you should assert that lock.await returns true.","body":"If you&#39;re verifying that onSuccess was called, you should assert that lock.await returns true."},{"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"score":1,"creation_date":1491915884,"post_id":1829949,"comment_id":73756647,"body_markdown":"I don&#39;t think this answer really resolve his problem. This answer It&#39;s an alternative if the developer can pass a CountDownLatch as parameter to another thread make the countDown(), what is not always possible.","body":"I don&#39;t think this answer really resolve his problem. This answer It&#39;s an alternative if the developer can pass a CountDownLatch as parameter to another thread make the countDown(), what is not always possible."},{"owner":{"account_id":1781171,"reputation":1393,"user_id":1623885,"display_name":"George Aristy"},"score":0,"creation_date":1523460467,"post_id":1829949,"comment_id":86573339,"body_markdown":"I would remove the timeout from the `await()` call. Using `CountDownLatch` should guarantee that you&#39;ll get the result &quot;as soon as possible&quot;, rendering it unecessary.","body":"I would remove the timeout from the <code>await()</code> call. Using <code>CountDownLatch</code> should guarantee that you&#39;ll get the result &quot;as soon as possible&quot;, rendering it unecessary."},{"owner":{"account_id":63320,"reputation":7119,"user_id":187492,"accept_rate":86,"display_name":"Martin"},"score":0,"creation_date":1523460574,"post_id":1829949,"comment_id":86573430,"body_markdown":"@GeorgeAristy I think I put it there in case your lock.countDown didn&#39;t run. Without it you could potentially have a hung test.","body":"@GeorgeAristy I think I put it there in case your lock.countDown didn&#39;t run. Without it you could potentially have a hung test."},{"owner":{"account_id":1781171,"reputation":1393,"user_id":1623885,"display_name":"George Aristy"},"score":1,"creation_date":1523467879,"post_id":1829949,"comment_id":86577751,"body_markdown":"@Martin that would be correct, but it would mean you have a different problem that needs to be fixed.","body":"@Martin that would be correct, but it would mean you have a different problem that needs to be fixed."},{"owner":{"account_id":7134726,"reputation":3847,"user_id":5454794,"display_name":"beatrice"},"score":0,"creation_date":1670580867,"post_id":1829949,"comment_id":131911984,"body_markdown":"the problem is that it will wait for the last line of the method to be reached and not for the method to exit. This is a huge difference. For example if the method has some annotations on it like transactional then it is possible that the test will finish the await but the transaction havent finished at all.","body":"the problem is that it will wait for the last line of the method to be reached and not for the method to exit. This is a huge difference. For example if the method has some annotations on it like transactional then it is possible that the test will finish the await but the transaction havent finished at all."}],"tags":[],"owner":{"account_id":63320,"reputation":7119,"user_id":187492,"accept_rate":86,"display_name":"Martin"},"comment_count":7,"down_vote_count":0,"up_vote_count":230,"is_accepted":false,"score":230,"last_activity_date":1653540300,"creation_date":1259713892,"answer_id":1829949,"question_id":631598,"body_markdown":"**TL;DR;** Unfortunately, there is no built-in solution **yet** (at time of writting, 2022), hence you are free to use and/or implement whatever fits your situation.\r\n\r\n## Example\r\n\r\nAn alternative is to use the [CountDownLatch][1] class. \r\n\r\n    public class DatabaseTest {\r\n    \r\n        /**\r\n         * Data limit\r\n         */\r\n        private static final int DATA_LIMIT = 5;\r\n    \r\n        /**\r\n         * Countdown latch\r\n         */\r\n        private CountDownLatch lock = new CountDownLatch(1);\r\n    \r\n        /**\r\n         * Received data\r\n         */\r\n        private List&lt;Data&gt; receiveddata;\r\n    \r\n        @Test\r\n        public void testDataRetrieval() throws Exception {\r\n            Database db = new MockDatabaseImpl();\r\n            db.getData(DATA_LIMIT, new DataCallback() {\r\n                @Override\r\n                public void onSuccess(List&lt;Data&gt; data) {\r\n                    receiveddata = data;\r\n                    lock.countDown();\r\n                }\r\n            });\r\n    \r\n            lock.await(2000, TimeUnit.MILLISECONDS);\r\n    \r\n            assertNotNull(receiveddata);\r\n            assertEquals(DATA_LIMIT, receiveddata.size());\r\n        }\r\n    }\r\n\r\n**NOTE** you can&#39;t just used **syncronized** with a regular object as a lock, as fast callbacks can release the lock before the lock&#39;s wait method is called. See [this][2] blog post by Joe Walnes.\r\n\r\n**EDIT** Removed syncronized blocks around CountDownLatch thanks to comments from @jtahlborn and @Ring\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html\r\n  [2]: http://joe.truemesh.com/blog/000279.html","title":"How to use JUnit to test asynchronous processes","body":"<p><strong>TL;DR;</strong> Unfortunately, there is no built-in solution <strong>yet</strong> (at time of writting, 2022), hence you are free to use and/or implement whatever fits your situation.</p>\n<h2>Example</h2>\n<p>An alternative is to use the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"noreferrer\">CountDownLatch</a> class.</p>\n<pre><code>public class DatabaseTest {\n\n    /**\n     * Data limit\n     */\n    private static final int DATA_LIMIT = 5;\n\n    /**\n     * Countdown latch\n     */\n    private CountDownLatch lock = new CountDownLatch(1);\n\n    /**\n     * Received data\n     */\n    private List&lt;Data&gt; receiveddata;\n\n    @Test\n    public void testDataRetrieval() throws Exception {\n        Database db = new MockDatabaseImpl();\n        db.getData(DATA_LIMIT, new DataCallback() {\n            @Override\n            public void onSuccess(List&lt;Data&gt; data) {\n                receiveddata = data;\n                lock.countDown();\n            }\n        });\n\n        lock.await(2000, TimeUnit.MILLISECONDS);\n\n        assertNotNull(receiveddata);\n        assertEquals(DATA_LIMIT, receiveddata.size());\n    }\n}\n</code></pre>\n<p><strong>NOTE</strong> you can't just used <strong>syncronized</strong> with a regular object as a lock, as fast callbacks can release the lock before the lock's wait method is called. See <a href=\"http://joe.truemesh.com/blog/000279.html\" rel=\"noreferrer\">this</a> blog post by Joe Walnes.</p>\n<p><strong>EDIT</strong> Removed syncronized blocks around CountDownLatch thanks to comments from @jtahlborn and @Ring</p>\n"},{"comments":[{"owner":{"account_id":276449,"reputation":10406,"user_id":569885,"accept_rate":100,"display_name":"dbm"},"score":37,"creation_date":1503043481,"post_id":3303638,"comment_id":78460212,"body_markdown":"A friendly disclaimer: Johan is the main contributor to the project.","body":"A friendly disclaimer: Johan is the main contributor to the project."},{"owner":{"account_id":1781171,"reputation":1393,"user_id":1623885,"display_name":"George Aristy"},"score":3,"creation_date":1523460306,"post_id":3303638,"comment_id":86573227,"body_markdown":"Suffers from the fundamental problem of having to *wait* (unit tests need to run *fast*). Ideally you really don&#39;t want to wait a millisecond longer than needed, so I think using `CountDownLatch` (see answer by @Martin) is better in this regard.","body":"Suffers from the fundamental problem of having to <i>wait</i> (unit tests need to run <i>fast</i>). Ideally you really don&#39;t want to wait a millisecond longer than needed, so I think using <code>CountDownLatch</code> (see answer by @Martin) is better in this regard."},{"owner":{"account_id":2289270,"reputation":562,"user_id":2012594,"accept_rate":86,"display_name":"Tanvir"},"score":0,"creation_date":1568849522,"post_id":3303638,"comment_id":102409373,"body_markdown":"This is the perfect library that fulfills my async process integration test requirements. Really awesome. The library seems to be well maintained and has features extending from basic to advanced that I believe are sufficient to cater for most scenarios. Thanks for the awesome reference!","body":"This is the perfect library that fulfills my async process integration test requirements. Really awesome. The library seems to be well maintained and has features extending from basic to advanced that I believe are sufficient to cater for most scenarios. Thanks for the awesome reference!"}],"tags":[],"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"comment_count":3,"down_vote_count":1,"up_vote_count":96,"is_accepted":false,"score":95,"last_activity_date":1553175216,"creation_date":1279744852,"answer_id":3303638,"question_id":631598,"body_markdown":"You can try using the [Awaitility](https://github.com/awaitility/awaitility) library. It makes it easy to test the systems you&#39;re talking about.","title":"How to use JUnit to test asynchronous processes","body":"<p>You can try using the <a href=\"https://github.com/awaitility/awaitility\" rel=\"noreferrer\">Awaitility</a> library. It makes it easy to test the systems you're talking about.</p>\n"},{"comments":[{"owner":{"account_id":225930,"reputation":5037,"user_id":486688,"accept_rate":67,"display_name":"Jonathan"},"score":1,"creation_date":1437715118,"post_id":13379486,"comment_id":51156148,"body_markdown":"The problem with the wait/notify/interrupt approach is that the code you&#39;re testing can potentially interfere with the waiting threads (I&#39;ve seen it happen). This is why [ConcurrentUnit](https://github.com/jhalterman/concurrentunit) uses a private [circuit](https://github.com/jhalterman/concurrentunit/blob/master/src/main/java/net/jodah/concurrentunit/Waiter.java#L18) that threads can wait on, which cannot be inadvertently interfered with by interrupts to the main test thread.","body":"The problem with the wait/notify/interrupt approach is that the code you&#39;re testing can potentially interfere with the waiting threads (I&#39;ve seen it happen). This is why <a href=\"https://github.com/jhalterman/concurrentunit\" rel=\"nofollow noreferrer\">ConcurrentUnit</a> uses a private <a href=\"https://github.com/jhalterman/concurrentunit/blob/master/src/main/java/net/jodah/concurrentunit/Waiter.java#L18\" rel=\"nofollow noreferrer\">circuit</a> that threads can wait on, which cannot be inadvertently interfered with by interrupts to the main test thread."}],"tags":[],"owner":{"account_id":84769,"reputation":18303,"user_id":236743,"accept_rate":69,"display_name":"Dori"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1363263295,"creation_date":1352898765,"answer_id":13379486,"question_id":631598,"body_markdown":"How about calling `SomeObject.wait` and `notifyAll` as described [here][1] OR using **Robotiums** `Solo.waitForCondition(...)` method OR use a [class i wrote][2] to do this (see comments and test class for how to use)\r\n\r\n\r\n  [1]: http://my.safaribooksonline.com/book/programming/java/0596003870/junit/jextprockbk-chp-4-sect-15\r\n  [2]: https://github.com/doridori/AndroidUtilDump/blob/master/android/AndroidUtilDump/src/couk/doridori/android/lib/testing/FutureAsyncTester.java","title":"How to use JUnit to test asynchronous processes","body":"<p>How about calling <code>SomeObject.wait</code> and <code>notifyAll</code> as described <a href=\"http://my.safaribooksonline.com/book/programming/java/0596003870/junit/jextprockbk-chp-4-sect-15\" rel=\"nofollow\">here</a> OR using <strong>Robotiums</strong> <code>Solo.waitForCondition(...)</code> method OR use a <a href=\"https://github.com/doridori/AndroidUtilDump/blob/master/android/AndroidUtilDump/src/couk/doridori/android/lib/testing/FutureAsyncTester.java\" rel=\"nofollow\">class i wrote</a> to do this (see comments and test class for how to use)</p>\n"},{"comments":[{"owner":{"account_id":108117,"reputation":9982,"user_id":287138,"accept_rate":82,"display_name":"Stefan Haberl"},"score":0,"creation_date":1584014235,"post_id":21099588,"comment_id":107309130,"body_markdown":"Doesn&#39;t work if I want to integration test something that involves an asynchronous library call like Spring&#39;s `WebClient`","body":"Doesn&#39;t work if I want to integration test something that involves an asynchronous library call like Spring&#39;s <code>WebClient</code>"}],"tags":[],"owner":{"account_id":44022,"reputation":6396,"user_id":128948,"accept_rate":76,"display_name":"Matthew"},"comment_count":1,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1389641517,"creation_date":1389640921,"answer_id":21099588,"question_id":631598,"body_markdown":"One method I&#39;ve found pretty useful for testing asynchronous methods is injecting an `Executor` instance in the object-to-test&#39;s constructor. In production, the executor instance is configured to run asynchronously while in test it can be mocked to run synchronously.\r\n\r\nSo suppose I&#39;m trying to test the asynchronous method `Foo#doAsync(Callback c)`, \r\n\r\n    class Foo {\r\n      private final Executor executor;\r\n      public Foo(Executor executor) {\r\n        this.executor = executor;\r\n      }\r\n\r\n      public void doAsync(Callback c) {\r\n        executor.execute(new Runnable() {\r\n          @Override public void run() {\r\n            // Do stuff here\r\n            c.onComplete(data);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\nIn production, I would construct `Foo` with an `Executors.newSingleThreadExecutor()` Executor instance  while in test I would probably construct it with a synchronous executor that does the following --\r\n\r\n    class SynchronousExecutor implements Executor {\r\n      @Override public void execute(Runnable r) {\r\n        r.run();\r\n      }\r\n    }\r\n\r\nNow my JUnit test of the asynchronous method is pretty clean --\r\n    \r\n    @Test public void testDoAsync() {\r\n      Executor executor = new SynchronousExecutor();\r\n      Foo objectToTest = new Foo(executor);\r\n\r\n      Callback callback = mock(Callback.class);\r\n      objectToTest.doAsync(callback);\r\n\r\n      // Verify that Callback#onComplete was called using Mockito.\r\n      verify(callback).onComplete(any(Data.class));\r\n\r\n      // Assert that we got back the data that we expected.\r\n      assertEquals(expectedData, callback.getData());\r\n    }","title":"How to use JUnit to test asynchronous processes","body":"<p>One method I've found pretty useful for testing asynchronous methods is injecting an <code>Executor</code> instance in the object-to-test's constructor. In production, the executor instance is configured to run asynchronously while in test it can be mocked to run synchronously.</p>\n\n<p>So suppose I'm trying to test the asynchronous method <code>Foo#doAsync(Callback c)</code>, </p>\n\n<pre><code>class Foo {\n  private final Executor executor;\n  public Foo(Executor executor) {\n    this.executor = executor;\n  }\n\n  public void doAsync(Callback c) {\n    executor.execute(new Runnable() {\n      @Override public void run() {\n        // Do stuff here\n        c.onComplete(data);\n      }\n    });\n  }\n}\n</code></pre>\n\n<p>In production, I would construct <code>Foo</code> with an <code>Executors.newSingleThreadExecutor()</code> Executor instance  while in test I would probably construct it with a synchronous executor that does the following --</p>\n\n<pre><code>class SynchronousExecutor implements Executor {\n  @Override public void execute(Runnable r) {\n    r.run();\n  }\n}\n</code></pre>\n\n<p>Now my JUnit test of the asynchronous method is pretty clean --</p>\n\n<pre><code>@Test public void testDoAsync() {\n  Executor executor = new SynchronousExecutor();\n  Foo objectToTest = new Foo(executor);\n\n  Callback callback = mock(Callback.class);\n  objectToTest.doAsync(callback);\n\n  // Verify that Callback#onComplete was called using Mockito.\n  verify(callback).onComplete(any(Data.class));\n\n  // Assert that we got back the data that we expected.\n  assertEquals(expectedData, callback.getData());\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":792188,"reputation":1564,"user_id":800001,"display_name":"Markus T"},"score":4,"creation_date":1405802641,"post_id":23809378,"comment_id":38576822,"body_markdown":"... and if you&#39;re stuck with java-less-than-eight try guavas [SettableFuture](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/SettableFuture.html) which does pretty much the same thing","body":"... and if you&#39;re stuck with java-less-than-eight try guavas <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/SettableFuture.html\" rel=\"nofollow noreferrer\">SettableFuture</a> which does pretty much the same thing"}],"tags":[],"owner":{"account_id":168070,"reputation":1771,"user_id":393274,"display_name":"Matt Sgarlata"},"comment_count":1,"down_vote_count":0,"up_vote_count":90,"is_accepted":false,"score":90,"last_activity_date":1651906216,"creation_date":1400768066,"answer_id":23809378,"question_id":631598,"body_markdown":"If you use a [CompletableFuture][1] (introduced in Java 8) or a [SettableFuture][2] (from [Google Guava][3]), you can make your test finish as soon as it&#39;s done, rather than waiting a pre-set amount of time.  Your test would look something like this:\r\n\r\n    CompletableFuture&lt;String&gt; future = new CompletableFuture&lt;&gt;();\r\n    executorService.submit(new Runnable() {\t\t\t\r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tfuture.complete(&quot;Hello World!&quot;);\t\t\t\t\r\n    \t}\r\n    });\r\n    assertEquals(&quot;Hello World!&quot;, future.get());\r\n\r\n&gt;**Note** that there is a library which Provides `CompletableFuture` for pre Java-8, which even uses the same names (and provides all related Java-8 classes), like:\r\n&gt;```\r\n&gt;net.sourceforge.streamsupport:streamsupport-minifuture:1.7.4\r\n&gt;```\r\n&gt;This is useful for Android development, where even if we build with JDK-v11, we want to keep codes compatible with pre Android-7 devices.\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\r\n  [2]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/util/concurrent/SettableFuture.html\r\n[3]: https://code.google.com/p/guava-libraries/","title":"How to use JUnit to test asynchronous processes","body":"<p>If you use a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"noreferrer\">CompletableFuture</a> (introduced in Java 8) or a <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/util/concurrent/SettableFuture.html\" rel=\"noreferrer\">SettableFuture</a> (from <a href=\"https://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">Google Guava</a>), you can make your test finish as soon as it's done, rather than waiting a pre-set amount of time.  Your test would look something like this:</p>\n<pre><code>CompletableFuture&lt;String&gt; future = new CompletableFuture&lt;&gt;();\nexecutorService.submit(new Runnable() {         \n    @Override\n    public void run() {\n        future.complete(&quot;Hello World!&quot;);                \n    }\n});\nassertEquals(&quot;Hello World!&quot;, future.get());\n</code></pre>\n<blockquote>\n<p><strong>Note</strong> that there is a library which Provides <code>CompletableFuture</code> for pre Java-8, which even uses the same names (and provides all related Java-8 classes), like:</p>\n<pre><code>net.sourceforge.streamsupport:streamsupport-minifuture:1.7.4\n</code></pre>\n<p>This is useful for Android development, where even if we build with JDK-v11, we want to keep codes compatible with pre Android-7 devices.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":225930,"reputation":5037,"user_id":486688,"accept_rate":67,"display_name":"Jonathan"},"score":1,"creation_date":1450399314,"post_id":34026037,"comment_id":56435347,"body_markdown":"If your assertion fails, the main test thread won&#39;t know about it.","body":"If your assertion fails, the main test thread won&#39;t know about it."},{"owner":{"account_id":7114322,"reputation":1007,"user_id":5477130,"display_name":"Nazar Sakharenko"},"score":0,"creation_date":1472831097,"post_id":34026037,"comment_id":65926241,"body_markdown":"Thanks for solution, helps me to debug code with websocket connection.","body":"Thanks for solution, helps me to debug code with websocket connection."},{"owner":{"account_id":2445948,"reputation":2966,"user_id":2133335,"accept_rate":82,"display_name":"Paulo"},"score":0,"creation_date":1476025270,"post_id":34026037,"comment_id":67170256,"body_markdown":"@Jonathan, I updated the code to catch any assertion and exception and inform it to the main test thread.","body":"@Jonathan, I updated the code to catch any assertion and exception and inform it to the main test thread."}],"tags":[],"owner":{"account_id":2445948,"reputation":2966,"user_id":2133335,"accept_rate":82,"display_name":"Paulo"},"comment_count":3,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1476025166,"creation_date":1448989859,"answer_id":34026037,"question_id":631598,"body_markdown":"I prefer use wait and notify. It is simple and clear.\r\n\r\n    @Test\r\n    public void test() throws Throwable {\r\n        final boolean[] asyncExecuted = {false};\r\n        final Throwable[] asyncThrowable= {null};\r\n\r\n        // do anything async\r\n        new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    // Put your test here.\r\n                    fail(); \r\n                }\r\n                // lets inform the test thread that there is an error.\r\n                catch (Throwable throwable){\r\n                    asyncThrowable[0] = throwable;\r\n                }\r\n                // ensure to release asyncExecuted in case of error.\r\n                finally {\r\n                    synchronized (asyncExecuted){\r\n                        asyncExecuted[0] = true;\r\n                        asyncExecuted.notify();\r\n                    }\r\n                }\r\n            }\r\n        }).start();\r\n\r\n        // Waiting for the test is complete\r\n        synchronized (asyncExecuted){\r\n            while(!asyncExecuted[0]){\r\n                asyncExecuted.wait();\r\n            }\r\n        }\r\n\r\n        // get any async error, including exceptions and assertationErrors\r\n        if(asyncThrowable[0] != null){\r\n            throw asyncThrowable[0];\r\n        }\r\n    }\r\n\r\nBasically, we need to create a final Array reference, to be used inside of anonymous inner class. I would rather create a boolean[], because I can put a value to control if we need to wait(). When everything is done, we just release the asyncExecuted.","title":"How to use JUnit to test asynchronous processes","body":"<p>I prefer use wait and notify. It is simple and clear.</p>\n\n<pre><code>@Test\npublic void test() throws Throwable {\n    final boolean[] asyncExecuted = {false};\n    final Throwable[] asyncThrowable= {null};\n\n    // do anything async\n    new Thread(new Runnable() {\n        @Override\n        public void run() {\n            try {\n                // Put your test here.\n                fail(); \n            }\n            // lets inform the test thread that there is an error.\n            catch (Throwable throwable){\n                asyncThrowable[0] = throwable;\n            }\n            // ensure to release asyncExecuted in case of error.\n            finally {\n                synchronized (asyncExecuted){\n                    asyncExecuted[0] = true;\n                    asyncExecuted.notify();\n                }\n            }\n        }\n    }).start();\n\n    // Waiting for the test is complete\n    synchronized (asyncExecuted){\n        while(!asyncExecuted[0]){\n            asyncExecuted.wait();\n        }\n    }\n\n    // get any async error, including exceptions and assertationErrors\n    if(asyncThrowable[0] != null){\n        throw asyncThrowable[0];\n    }\n}\n</code></pre>\n\n<p>Basically, we need to create a final Array reference, to be used inside of anonymous inner class. I would rather create a boolean[], because I can put a value to control if we need to wait(). When everything is done, we just release the asyncExecuted.</p>\n"},{"tags":[],"owner":{"account_id":2069826,"reputation":646,"user_id":1844551,"display_name":"Nils Rommelfanger"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1472458709,"creation_date":1472458709,"answer_id":39201557,"question_id":631598,"body_markdown":"If you want to test the logic just don&#180;t test it asynchronously.\r\n\r\nFor example to test this code which works on results of an asynchronous method.\r\n\r\n    public class Example {\r\n        private Dependency dependency;\r\n        \r\n        public Example(Dependency dependency) {\r\n            this.dependency = dependency;            \r\n        }\r\n        \r\n        public CompletableFuture&lt;String&gt; someAsyncMethod(){\r\n            return dependency.asyncMethod()\r\n                    .handle((r,ex) -&gt; {\r\n                        if(ex != null) {\r\n                            return &quot;got exception&quot;;\r\n                        } else {\r\n                            return r.toString();\r\n                        }\r\n                    });\r\n        }\r\n    }\r\n\r\n    public class Dependency {\r\n        public CompletableFuture&lt;Integer&gt; asyncMethod() {\r\n            // do some async stuff       \r\n        }\r\n    }\r\n\r\nIn the test mock the dependency with synchronous implementation. The unit test is completely synchronous and runs in 150ms.\r\n\r\n    public class DependencyTest {\r\n        private Example sut;\r\n        private Dependency dependency;\r\n        \r\n        public void setup() {\r\n            dependency = Mockito.mock(Dependency.class);;\r\n            sut = new Example(dependency);\r\n        }\r\n        \r\n        @Test public void success() throws InterruptedException, ExecutionException {\r\n            when(dependency.asyncMethod()).thenReturn(CompletableFuture.completedFuture(5));\r\n            \r\n            // When\r\n            CompletableFuture&lt;String&gt; result = sut.someAsyncMethod();\r\n            \r\n            // Then\r\n            assertThat(result.isCompletedExceptionally(), is(equalTo(false)));\r\n            String value = result.get();\r\n            assertThat(value, is(equalTo(&quot;5&quot;)));\r\n        }\r\n    \r\n        @Test public void failed() throws InterruptedException, ExecutionException {\r\n            // Given\r\n            CompletableFuture&lt;Integer&gt; c = new CompletableFuture&lt;Integer&gt;();\r\n            c.completeExceptionally(new RuntimeException(&quot;failed&quot;));\r\n            when(dependency.asyncMethod()).thenReturn(c);\r\n            \r\n            // When\r\n            CompletableFuture&lt;String&gt; result = sut.someAsyncMethod();\r\n            \r\n            // Then\r\n            assertThat(result.isCompletedExceptionally(), is(equalTo(false)));\r\n            String value = result.get();\r\n            assertThat(value, is(equalTo(&quot;got exception&quot;)));\r\n        }\r\n    }\r\n\r\nYou don&#180;t test the async behaviour but you can test if the logic is correct.","title":"How to use JUnit to test asynchronous processes","body":"<p>If you want to test the logic just don´t test it asynchronously.</p>\n\n<p>For example to test this code which works on results of an asynchronous method.</p>\n\n<pre><code>public class Example {\n    private Dependency dependency;\n\n    public Example(Dependency dependency) {\n        this.dependency = dependency;            \n    }\n\n    public CompletableFuture&lt;String&gt; someAsyncMethod(){\n        return dependency.asyncMethod()\n                .handle((r,ex) -&gt; {\n                    if(ex != null) {\n                        return \"got exception\";\n                    } else {\n                        return r.toString();\n                    }\n                });\n    }\n}\n\npublic class Dependency {\n    public CompletableFuture&lt;Integer&gt; asyncMethod() {\n        // do some async stuff       \n    }\n}\n</code></pre>\n\n<p>In the test mock the dependency with synchronous implementation. The unit test is completely synchronous and runs in 150ms.</p>\n\n<pre><code>public class DependencyTest {\n    private Example sut;\n    private Dependency dependency;\n\n    public void setup() {\n        dependency = Mockito.mock(Dependency.class);;\n        sut = new Example(dependency);\n    }\n\n    @Test public void success() throws InterruptedException, ExecutionException {\n        when(dependency.asyncMethod()).thenReturn(CompletableFuture.completedFuture(5));\n\n        // When\n        CompletableFuture&lt;String&gt; result = sut.someAsyncMethod();\n\n        // Then\n        assertThat(result.isCompletedExceptionally(), is(equalTo(false)));\n        String value = result.get();\n        assertThat(value, is(equalTo(\"5\")));\n    }\n\n    @Test public void failed() throws InterruptedException, ExecutionException {\n        // Given\n        CompletableFuture&lt;Integer&gt; c = new CompletableFuture&lt;Integer&gt;();\n        c.completeExceptionally(new RuntimeException(\"failed\"));\n        when(dependency.asyncMethod()).thenReturn(c);\n\n        // When\n        CompletableFuture&lt;String&gt; result = sut.someAsyncMethod();\n\n        // Then\n        assertThat(result.isCompletedExceptionally(), is(equalTo(false)));\n        String value = result.get();\n        assertThat(value, is(equalTo(\"got exception\")));\n    }\n}\n</code></pre>\n\n<p>You don´t test the async behaviour but you can test if the logic is correct.</p>\n"},{"tags":[],"owner":{"account_id":270764,"reputation":4103,"user_id":560902,"accept_rate":80,"display_name":"Jochen Bedersdorfer"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1482975338,"creation_date":1482975338,"answer_id":41372052,"question_id":631598,"body_markdown":"This is what I&#39;m using nowadays if the test result is produced asynchronously.\r\n\r\n    public class TestUtil {\r\n    \r\n        public static &lt;R&gt; R await(Consumer&lt;CompletableFuture&lt;R&gt;&gt; completer) {\r\n            return await(20, TimeUnit.SECONDS, completer);\r\n        }\r\n    \r\n        public static &lt;R&gt; R await(int time, TimeUnit unit, Consumer&lt;CompletableFuture&lt;R&gt;&gt; completer) {\r\n            CompletableFuture&lt;R&gt; f = new CompletableFuture&lt;&gt;();\r\n            completer.accept(f);\r\n            try {\r\n                return f.get(time, unit);\r\n            } catch (InterruptedException | TimeoutException e) {\r\n                throw new RuntimeException(&quot;Future timed out&quot;, e);\r\n            } catch (ExecutionException e) {\r\n                throw new RuntimeException(&quot;Future failed&quot;, e.getCause());\r\n            }\r\n        }\r\n    }\r\n\r\nUsing static imports, the test reads kinda nice.\r\n(note, in this example I&#39;m starting a thread to illustrate the idea)\r\n\r\n        @Test\r\n        public void testAsync() {\r\n            String result = await(f -&gt; {\r\n                new Thread(() -&gt; f.complete(&quot;My Result&quot;)).start();\r\n            });\r\n            assertEquals(&quot;My Result&quot;, result);\r\n        }\r\n\r\nIf `f.complete` isn&#39;t called, the test will fail after a timeout. You can also use `f.completeExceptionally` to fail early.\r\n\r\n","title":"How to use JUnit to test asynchronous processes","body":"<p>This is what I'm using nowadays if the test result is produced asynchronously.</p>\n\n<pre><code>public class TestUtil {\n\n    public static &lt;R&gt; R await(Consumer&lt;CompletableFuture&lt;R&gt;&gt; completer) {\n        return await(20, TimeUnit.SECONDS, completer);\n    }\n\n    public static &lt;R&gt; R await(int time, TimeUnit unit, Consumer&lt;CompletableFuture&lt;R&gt;&gt; completer) {\n        CompletableFuture&lt;R&gt; f = new CompletableFuture&lt;&gt;();\n        completer.accept(f);\n        try {\n            return f.get(time, unit);\n        } catch (InterruptedException | TimeoutException e) {\n            throw new RuntimeException(\"Future timed out\", e);\n        } catch (ExecutionException e) {\n            throw new RuntimeException(\"Future failed\", e.getCause());\n        }\n    }\n}\n</code></pre>\n\n<p>Using static imports, the test reads kinda nice.\n(note, in this example I'm starting a thread to illustrate the idea)</p>\n\n<pre><code>    @Test\n    public void testAsync() {\n        String result = await(f -&gt; {\n            new Thread(() -&gt; f.complete(\"My Result\")).start();\n        });\n        assertEquals(\"My Result\", result);\n    }\n</code></pre>\n\n<p>If <code>f.complete</code> isn't called, the test will fail after a timeout. You can also use <code>f.completeExceptionally</code> to fail early.</p>\n"},{"tags":[],"owner":{"account_id":36915,"reputation":3723,"user_id":105408,"accept_rate":75,"display_name":"markthegrea"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1501100077,"creation_date":1488574372,"answer_id":42588241,"question_id":631598,"body_markdown":"There are many answers here but a simple one is to just create a completed CompletableFuture and use it:\r\n\r\n    CompletableFuture.completedFuture(&quot;donzo&quot;)\r\n\r\nSo in my test:\r\n\r\n    this.exactly(2).of(mockEventHubClientWrapper).sendASync(with(any(LinkedList.class)));\r\n    this.will(returnValue(new CompletableFuture&lt;&gt;().completedFuture(&quot;donzo&quot;)));\r\n\r\nI am just making sure all of this stuff gets called anyway.  This technique works if you are using this code:\r\n\r\n    CompletableFuture.allOf(calls.toArray(new CompletableFuture[0])).join();\r\n\r\nIt will zip right through it as all the CompletableFutures are finished!","title":"How to use JUnit to test asynchronous processes","body":"<p>There are many answers here but a simple one is to just create a completed CompletableFuture and use it:</p>\n\n<pre><code>CompletableFuture.completedFuture(\"donzo\")\n</code></pre>\n\n<p>So in my test:</p>\n\n<pre><code>this.exactly(2).of(mockEventHubClientWrapper).sendASync(with(any(LinkedList.class)));\nthis.will(returnValue(new CompletableFuture&lt;&gt;().completedFuture(\"donzo\")));\n</code></pre>\n\n<p>I am just making sure all of this stuff gets called anyway.  This technique works if you are using this code:</p>\n\n<pre><code>CompletableFuture.allOf(calls.toArray(new CompletableFuture[0])).join();\n</code></pre>\n\n<p>It will zip right through it as all the CompletableFutures are finished!</p>\n"},{"comments":[{"owner":{"account_id":1791757,"reputation":22226,"user_id":1631967,"display_name":"aminography"},"score":1,"creation_date":1590993751,"post_id":43444508,"comment_id":109878886,"body_markdown":"Awesome approach!","body":"Awesome approach!"}],"tags":[],"owner":{"account_id":3897974,"reputation":6126,"user_id":3226466,"display_name":"Fantasy Fang"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1492397748,"creation_date":1492397748,"answer_id":43444508,"question_id":631598,"body_markdown":"I find an library [socket.io][1] to test asynchronous logic. It looks simple and brief way using [LinkedBlockingQueue][2]. Here is [example][3]:\r\n\r\n        @Test(timeout = TIMEOUT)\r\n    public void message() throws URISyntaxException, InterruptedException {\r\n        final BlockingQueue&lt;Object&gt; values = new LinkedBlockingQueue&lt;Object&gt;();\r\n\r\n        socket = client();\r\n        socket.on(Socket.EVENT_CONNECT, new Emitter.Listener() {\r\n            @Override\r\n            public void call(Object... objects) {\r\n                socket.send(&quot;foo&quot;, &quot;bar&quot;);\r\n            }\r\n        }).on(Socket.EVENT_MESSAGE, new Emitter.Listener() {\r\n            @Override\r\n            public void call(Object... args) {\r\n                values.offer(args);\r\n            }\r\n        });\r\n        socket.connect();\r\n\r\n        assertThat((Object[])values.take(), is(new Object[] {&quot;hello client&quot;}));\r\n        assertThat((Object[])values.take(), is(new Object[] {&quot;foo&quot;, &quot;bar&quot;}));\r\n        socket.disconnect();\r\n    }\r\nUsing LinkedBlockingQueue take API to block until to get result just like synchronous way. And set timeout to avoid assuming too much time to wait the result. \r\n\r\n  [1]: https://github.com/socketio/socket.io-client-java\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedBlockingQueue.html\r\n  [3]: https://github.com/socketio/socket.io-client-java/blob/master/src/test/java/io/socket/client/ServerConnectionTest.java","title":"How to use JUnit to test asynchronous processes","body":"<p>I find an library <a href=\"https://github.com/socketio/socket.io-client-java\" rel=\"nofollow noreferrer\">socket.io</a> to test asynchronous logic. It looks simple and brief way using <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedBlockingQueue.html\" rel=\"nofollow noreferrer\">LinkedBlockingQueue</a>. Here is <a href=\"https://github.com/socketio/socket.io-client-java/blob/master/src/test/java/io/socket/client/ServerConnectionTest.java\" rel=\"nofollow noreferrer\">example</a>:</p>\n\n<pre><code>    @Test(timeout = TIMEOUT)\npublic void message() throws URISyntaxException, InterruptedException {\n    final BlockingQueue&lt;Object&gt; values = new LinkedBlockingQueue&lt;Object&gt;();\n\n    socket = client();\n    socket.on(Socket.EVENT_CONNECT, new Emitter.Listener() {\n        @Override\n        public void call(Object... objects) {\n            socket.send(\"foo\", \"bar\");\n        }\n    }).on(Socket.EVENT_MESSAGE, new Emitter.Listener() {\n        @Override\n        public void call(Object... args) {\n            values.offer(args);\n        }\n    });\n    socket.connect();\n\n    assertThat((Object[])values.take(), is(new Object[] {\"hello client\"}));\n    assertThat((Object[])values.take(), is(new Object[] {\"foo\", \"bar\"}));\n    socket.disconnect();\n}\n</code></pre>\n\n<p>Using LinkedBlockingQueue take API to block until to get result just like synchronous way. And set timeout to avoid assuming too much time to wait the result. </p>\n"},{"comments":[{"owner":{"account_id":4332107,"reputation":1621,"user_id":3537339,"display_name":"Bruno Ferreira"},"score":2,"creation_date":1582059083,"post_id":46890812,"comment_id":106644347,"body_markdown":"Which approach is that? Could you give an example?","body":"Which approach is that? Could you give an example?"}],"tags":[],"owner":{"account_id":420454,"reputation":6809,"user_id":798165,"accept_rate":57,"display_name":"eleven"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1508765964,"creation_date":1508765964,"answer_id":46890812,"question_id":631598,"body_markdown":"It&#39;s worth mentioning that there is very useful chapter `Testing Concurrent Programs` in [Concurrency in Practice][1] which describes some unit testing approaches and gives solutions for issues.\r\n\r\n\r\n  [1]: https://www.amazon.com/Java-Concurrency-Practice-Tim-Peierls-ebook/dp/B004V9OA84/","title":"How to use JUnit to test asynchronous processes","body":"<p>It's worth mentioning that there is very useful chapter <code>Testing Concurrent Programs</code> in <a href=\"https://rads.stackoverflow.com/amzn/click/com/B004V9OA84\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Concurrency in Practice</a> which describes some unit testing approaches and gives solutions for issues.</p>\n"},{"comments":[{"owner":{"account_id":181832,"reputation":1454,"user_id":416104,"accept_rate":61,"display_name":"Cristiano"},"score":0,"creation_date":1544820305,"post_id":47669002,"comment_id":94424838,"body_markdown":"Hey @tkruse, perhaps do you have a public git repo with a test using this technique ?","body":"Hey @tkruse, perhaps do you have a public git repo with a test using this technique ?"},{"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"score":0,"creation_date":1544877364,"post_id":47669002,"comment_id":94435648,"body_markdown":"@Christiano: that would be against SO philosophy. Instead, I changed the methods to compile without any additional code (all imports are java8+ or junit) when you paste them into an empty junit test class. Feel free to upvote.","body":"@Christiano: that would be against SO philosophy. Instead, I changed the methods to compile without any additional code (all imports are java8+ or junit) when you paste them into an empty junit test class. Feel free to upvote."},{"owner":{"account_id":181832,"reputation":1454,"user_id":416104,"accept_rate":61,"display_name":"Cristiano"},"score":0,"creation_date":1545305413,"post_id":47669002,"comment_id":94582646,"body_markdown":"I understood now. thanks. My problem now is to test when the methods returns CompletableFuture but do accept other objects as parameters other than a CompletableFuture.","body":"I understood now. thanks. My problem now is to test when the methods returns CompletableFuture but do accept other objects as parameters other than a CompletableFuture."},{"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"score":0,"creation_date":1545360637,"post_id":47669002,"comment_id":94604353,"body_markdown":"In your case, who creates the CompletableFuture that the method returns? If it is another service, that can be mocked and my technique still applies. If the method itself creates a CompletableFuture the situation changes very much so you could ask a new question about it. It then depends on what thread will complete the future that your method returns.","body":"In your case, who creates the CompletableFuture that the method returns? If it is another service, that can be mocked and my technique still applies. If the method itself creates a CompletableFuture the situation changes very much so you could ask a new question about it. It then depends on what thread will complete the future that your method returns."}],"tags":[],"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1544877283,"creation_date":1512545236,"answer_id":47669002,"question_id":631598,"body_markdown":"Avoid testing with parallel threads whenever you can (which is most of the time). This will only make your tests flaky (sometimes pass, sometimes fail).\r\n\r\nOnly when you need to call some other library / system, you might have to wait on other threads, in that case always use the [Awaitility](http://code.google.com/p/awaitility/) library instead of `Thread.sleep()`.\r\n\r\nNever just call `get()` or `join()` in your tests, else your tests might run forever on your CI server in case the future never completes. Always assert `isDone()` first in your tests before calling `get()`. For CompletionStage, that is `.toCompletableFuture().isDone()`.\r\n\r\nWhen you test a non-blocking method like this:\r\n\r\n    public static CompletionStage&lt;String&gt; createGreeting(CompletableFuture&lt;String&gt; future) {\r\n        return future.thenApply(result -&gt; &quot;Hello &quot; + result);\r\n    }\r\n\r\n\r\nthen you should not just test the result by passing a completed Future in the test, you should also make sure that your method `doSomething()` does not block by calling `join()` or `get()`. This is important in particular if you use a non-blocking framework.\r\n\r\nTo do that, test with a non-completed future that you set to completed manually:\r\n\r\n    @Test\r\n    public void testDoSomething() throws Exception {\r\n        CompletableFuture&lt;String&gt; innerFuture = new CompletableFuture&lt;&gt;();\r\n        CompletableFuture&lt;String&gt; futureResult = createGreeting(innerFuture).toCompletableFuture();\r\n        assertFalse(futureResult.isDone());\r\n\r\n        // this triggers the future to complete\r\n        innerFuture.complete(&quot;world&quot;);\r\n        assertTrue(futureResult.isDone());\r\n\r\n        // futher asserts about fooResult here\r\n        assertEquals(futureResult.get(), &quot;Hello world&quot;);\r\n    }\r\n\r\n\r\nThat way, if you add `future.join()` to doSomething(), the test will fail.\r\n\r\nIf your Service uses an ExecutorService such as in `thenApplyAsync(..., executorService)`, then in your tests inject a single-threaded ExecutorService, such as the one from guava:\r\n\r\n    ExecutorService executorService = Executors.newSingleThreadExecutor();\r\n\r\nIf your code uses the forkJoinPool such as `thenApplyAsync(...)`, rewrite the code to use an ExecutorService (there are many good reasons), or use Awaitility.\r\n\r\nTo shorten the example, I made BarService a method argument implemented as a Java8 lambda in the test, typically it would be an injected reference that you would mock.","title":"How to use JUnit to test asynchronous processes","body":"<p>Avoid testing with parallel threads whenever you can (which is most of the time). This will only make your tests flaky (sometimes pass, sometimes fail).</p>\n\n<p>Only when you need to call some other library / system, you might have to wait on other threads, in that case always use the <a href=\"http://code.google.com/p/awaitility/\" rel=\"nofollow noreferrer\">Awaitility</a> library instead of <code>Thread.sleep()</code>.</p>\n\n<p>Never just call <code>get()</code> or <code>join()</code> in your tests, else your tests might run forever on your CI server in case the future never completes. Always assert <code>isDone()</code> first in your tests before calling <code>get()</code>. For CompletionStage, that is <code>.toCompletableFuture().isDone()</code>.</p>\n\n<p>When you test a non-blocking method like this:</p>\n\n<pre><code>public static CompletionStage&lt;String&gt; createGreeting(CompletableFuture&lt;String&gt; future) {\n    return future.thenApply(result -&gt; \"Hello \" + result);\n}\n</code></pre>\n\n<p>then you should not just test the result by passing a completed Future in the test, you should also make sure that your method <code>doSomething()</code> does not block by calling <code>join()</code> or <code>get()</code>. This is important in particular if you use a non-blocking framework.</p>\n\n<p>To do that, test with a non-completed future that you set to completed manually:</p>\n\n<pre><code>@Test\npublic void testDoSomething() throws Exception {\n    CompletableFuture&lt;String&gt; innerFuture = new CompletableFuture&lt;&gt;();\n    CompletableFuture&lt;String&gt; futureResult = createGreeting(innerFuture).toCompletableFuture();\n    assertFalse(futureResult.isDone());\n\n    // this triggers the future to complete\n    innerFuture.complete(\"world\");\n    assertTrue(futureResult.isDone());\n\n    // futher asserts about fooResult here\n    assertEquals(futureResult.get(), \"Hello world\");\n}\n</code></pre>\n\n<p>That way, if you add <code>future.join()</code> to doSomething(), the test will fail.</p>\n\n<p>If your Service uses an ExecutorService such as in <code>thenApplyAsync(..., executorService)</code>, then in your tests inject a single-threaded ExecutorService, such as the one from guava:</p>\n\n<pre><code>ExecutorService executorService = Executors.newSingleThreadExecutor();\n</code></pre>\n\n<p>If your code uses the forkJoinPool such as <code>thenApplyAsync(...)</code>, rewrite the code to use an ExecutorService (there are many good reasons), or use Awaitility.</p>\n\n<p>To shorten the example, I made BarService a method argument implemented as a Java8 lambda in the test, typically it would be an injected reference that you would mock.</p>\n"},{"tags":[],"owner":{"account_id":108117,"reputation":9982,"user_id":287138,"accept_rate":82,"display_name":"Stefan Haberl"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1585174260,"creation_date":1585173832,"answer_id":60858020,"question_id":631598,"body_markdown":"For all Spring users out there, this is how I usually do my integration tests nowadays, where async behaviour is involved:\r\n\r\nFire an application event in production code, when an async task (such as an I/O call) has finished. Most of the time this event is necessary anyway to handle the response of the async operation in production.\r\n\r\nWith this event in place, you can then use the following strategy in your test case:\r\n\r\n1. Execute the system under test\r\n3. Listen for the event and make sure that the event has fired\r\n3. Do your assertions\r\n\r\nTo break this down, you&#39;ll first need some kind of domain event to fire. I&#39;m using a UUID here to identify the task that has completed, but you&#39;re of course free to use something else as long as it&#39;s unique.\r\n\r\n(Note, that the following code snippets also use [Lombok][1] annotations to get rid of boiler plate code)\r\n\r\n\r\n    @RequiredArgsConstructor\r\n    class TaskCompletedEvent() {\r\n      private final UUID taskId;\r\n      // add more fields containing the result of the task if required\r\n    }\r\n\r\nThe production code itself then typically looks like this:\r\n\r\n    @Component\r\n    @RequiredArgsConstructor\r\n    class Production {\r\n\r\n      private final ApplicationEventPublisher eventPublisher;\r\n\r\n      void doSomeTask(UUID taskId) {\r\n        // do something like calling a REST endpoint asynchronously\r\n        eventPublisher.publishEvent(new TaskCompletedEvent(taskId));\r\n      }\r\n\r\n    }\r\n\r\nI can then use a Spring `@EventListener` to catch the published event in test code. The event listener is a little bit more involved, because it has to handle two cases in a thread safe manner:\r\n\r\n1. Production code is faster than the test case and the event has already fired before the test case checks for the event, or\r\n2. Test case is faster than production code and the test case has to wait for the event.\r\n\r\nA `CountDownLatch` is used for the second case as mentioned in other answers here. Also note, that the `@Order` annotation on the event handler method makes sure, that this event handler method gets called after any other event listeners used in production.\r\n\r\n    @Component\r\n    class TaskCompletionEventListener {\r\n\r\n      private Map&lt;UUID, CountDownLatch&gt; waitLatches = new ConcurrentHashMap&lt;&gt;();\r\n      private List&lt;UUID&gt; eventsReceived = new ArrayList&lt;&gt;();\r\n\r\n      void waitForCompletion(UUID taskId) {\r\n        synchronized (this) {\r\n          if (eventAlreadyReceived(taskId)) {\r\n            return;\r\n          }\r\n          checkNobodyIsWaiting(taskId);\r\n          createLatch(taskId);\r\n        }\r\n        waitForEvent(taskId);\r\n      }\r\n\r\n      private void checkNobodyIsWaiting(UUID taskId) {\r\n        if (waitLatches.containsKey(taskId)) {\r\n          throw new IllegalArgumentException(&quot;Only one waiting test per task ID supported, but another test is already waiting for &quot; + taskId + &quot; to complete.&quot;);\r\n        }\r\n      }\r\n\r\n      private boolean eventAlreadyReceived(UUID taskId) {\r\n        return eventsReceived.remove(taskId);\r\n      }\r\n\r\n      private void createLatch(UUID taskId) {\r\n        waitLatches.put(taskId, new CountDownLatch(1));\r\n      }\r\n\r\n      @SneakyThrows\r\n      private void waitForEvent(UUID taskId) {\r\n        var latch = waitLatches.get(taskId);\r\n        latch.await();\r\n      }\r\n\r\n      @EventListener\r\n      @Order\r\n      void eventReceived(TaskCompletedEvent event) {\r\n        var taskId = event.getTaskId();\r\n        synchronized (this) {\r\n          if (isSomebodyWaiting(taskId)) {\r\n            notifyWaitingTest(taskId);\r\n          } else {\r\n            eventsReceived.add(taskId);\r\n          }\r\n        }\r\n      }\r\n\r\n      private boolean isSomebodyWaiting(UUID taskId) {\r\n        return waitLatches.containsKey(taskId);\r\n      }\r\n\r\n      private void notifyWaitingTest(UUID taskId) {\r\n        var latch = waitLatches.remove(taskId);\r\n        latch.countDown();\r\n      }\r\n\r\n    }\r\n\r\n\r\nLast step is to execute the system under test in a test case. I&#39;m using a SpringBoot test with JUnit 5 here, but this should work the same for all tests using a Spring context.\r\n\r\n    @SpringBootTest\r\n    class ProductionIntegrationTest {\r\n     \r\n      @Autowired\r\n      private Production sut;\r\n\r\n      @Autowired\r\n      private TaskCompletionEventListener listener;\r\n\r\n      @Test\r\n      void thatTaskCompletesSuccessfully() {\r\n        var taskId = UUID.randomUUID();\r\n        sut.doSomeTask(taskId);\r\n        listener.waitForCompletion(taskId);\r\n        // do some assertions like looking into the DB if value was stored successfully\r\n      }\r\n\r\n    }\r\n\r\nNote, that in contrast to other answers here, this solution will also work if you execute your tests in parallel and multiple threads exercise the async code at the same time.\r\n\r\n  [1]: https://projectlombok.org","title":"How to use JUnit to test asynchronous processes","body":"<p>For all Spring users out there, this is how I usually do my integration tests nowadays, where async behaviour is involved:</p>\n\n<p>Fire an application event in production code, when an async task (such as an I/O call) has finished. Most of the time this event is necessary anyway to handle the response of the async operation in production.</p>\n\n<p>With this event in place, you can then use the following strategy in your test case:</p>\n\n<ol>\n<li>Execute the system under test</li>\n<li>Listen for the event and make sure that the event has fired</li>\n<li>Do your assertions</li>\n</ol>\n\n<p>To break this down, you'll first need some kind of domain event to fire. I'm using a UUID here to identify the task that has completed, but you're of course free to use something else as long as it's unique.</p>\n\n<p>(Note, that the following code snippets also use <a href=\"https://projectlombok.org\" rel=\"nofollow noreferrer\">Lombok</a> annotations to get rid of boiler plate code)</p>\n\n<pre><code>@RequiredArgsConstructor\nclass TaskCompletedEvent() {\n  private final UUID taskId;\n  // add more fields containing the result of the task if required\n}\n</code></pre>\n\n<p>The production code itself then typically looks like this:</p>\n\n<pre><code>@Component\n@RequiredArgsConstructor\nclass Production {\n\n  private final ApplicationEventPublisher eventPublisher;\n\n  void doSomeTask(UUID taskId) {\n    // do something like calling a REST endpoint asynchronously\n    eventPublisher.publishEvent(new TaskCompletedEvent(taskId));\n  }\n\n}\n</code></pre>\n\n<p>I can then use a Spring <code>@EventListener</code> to catch the published event in test code. The event listener is a little bit more involved, because it has to handle two cases in a thread safe manner:</p>\n\n<ol>\n<li>Production code is faster than the test case and the event has already fired before the test case checks for the event, or</li>\n<li>Test case is faster than production code and the test case has to wait for the event.</li>\n</ol>\n\n<p>A <code>CountDownLatch</code> is used for the second case as mentioned in other answers here. Also note, that the <code>@Order</code> annotation on the event handler method makes sure, that this event handler method gets called after any other event listeners used in production.</p>\n\n<pre><code>@Component\nclass TaskCompletionEventListener {\n\n  private Map&lt;UUID, CountDownLatch&gt; waitLatches = new ConcurrentHashMap&lt;&gt;();\n  private List&lt;UUID&gt; eventsReceived = new ArrayList&lt;&gt;();\n\n  void waitForCompletion(UUID taskId) {\n    synchronized (this) {\n      if (eventAlreadyReceived(taskId)) {\n        return;\n      }\n      checkNobodyIsWaiting(taskId);\n      createLatch(taskId);\n    }\n    waitForEvent(taskId);\n  }\n\n  private void checkNobodyIsWaiting(UUID taskId) {\n    if (waitLatches.containsKey(taskId)) {\n      throw new IllegalArgumentException(\"Only one waiting test per task ID supported, but another test is already waiting for \" + taskId + \" to complete.\");\n    }\n  }\n\n  private boolean eventAlreadyReceived(UUID taskId) {\n    return eventsReceived.remove(taskId);\n  }\n\n  private void createLatch(UUID taskId) {\n    waitLatches.put(taskId, new CountDownLatch(1));\n  }\n\n  @SneakyThrows\n  private void waitForEvent(UUID taskId) {\n    var latch = waitLatches.get(taskId);\n    latch.await();\n  }\n\n  @EventListener\n  @Order\n  void eventReceived(TaskCompletedEvent event) {\n    var taskId = event.getTaskId();\n    synchronized (this) {\n      if (isSomebodyWaiting(taskId)) {\n        notifyWaitingTest(taskId);\n      } else {\n        eventsReceived.add(taskId);\n      }\n    }\n  }\n\n  private boolean isSomebodyWaiting(UUID taskId) {\n    return waitLatches.containsKey(taskId);\n  }\n\n  private void notifyWaitingTest(UUID taskId) {\n    var latch = waitLatches.remove(taskId);\n    latch.countDown();\n  }\n\n}\n</code></pre>\n\n<p>Last step is to execute the system under test in a test case. I'm using a SpringBoot test with JUnit 5 here, but this should work the same for all tests using a Spring context.</p>\n\n<pre><code>@SpringBootTest\nclass ProductionIntegrationTest {\n\n  @Autowired\n  private Production sut;\n\n  @Autowired\n  private TaskCompletionEventListener listener;\n\n  @Test\n  void thatTaskCompletesSuccessfully() {\n    var taskId = UUID.randomUUID();\n    sut.doSomeTask(taskId);\n    listener.waitForCompletion(taskId);\n    // do some assertions like looking into the DB if value was stored successfully\n  }\n\n}\n</code></pre>\n\n<p>Note, that in contrast to other answers here, this solution will also work if you execute your tests in parallel and multiple threads exercise the async code at the same time.</p>\n"},{"comments":[{"owner":{"account_id":1435623,"reputation":119,"user_id":1454720,"display_name":"kugo2006"},"score":3,"creation_date":1601006417,"post_id":63728861,"comment_id":113275110,"body_markdown":"This solution is better if `subMethod` is extracted to another class, and thus can be tested without powermock/reflection","body":"This solution is better if <code>subMethod</code> is extracted to another class, and thus can be tested without powermock/reflection"}],"tags":[],"owner":{"account_id":4250230,"reputation":1766,"user_id":3477539,"accept_rate":83,"display_name":"Rostislav V"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1599154269,"creation_date":1599154269,"answer_id":63728861,"question_id":631598,"body_markdown":"Let&#39;s say you have this code:\r\n\r\n    public void method() {\r\n            CompletableFuture.runAsync(() -&gt; {\r\n                //logic\r\n                //logic\r\n                //logic\r\n                //logic\r\n            });\r\n        }\r\n\r\nTry to refactor it to something like this:\r\n\r\n    public void refactoredMethod() {\r\n        CompletableFuture.runAsync(this::subMethod);\r\n    }\r\n    \r\n    private void subMethod() {\r\n        //logic\r\n        //logic\r\n        //logic\r\n        //logic\r\n    }\r\n\r\nAfter that, test the subMethod this way:\r\n\r\n    org.powermock.reflect.Whitebox.invokeMethod(classInstance, &quot;subMethod&quot;); \r\n\r\nThis isn&#39;t a perfect solution, but it tests all the logic inside your async execution.\r\n","title":"How to use JUnit to test asynchronous processes","body":"<p>Let's say you have this code:</p>\n<pre><code>public void method() {\n        CompletableFuture.runAsync(() -&gt; {\n            //logic\n            //logic\n            //logic\n            //logic\n        });\n    }\n</code></pre>\n<p>Try to refactor it to something like this:</p>\n<pre><code>public void refactoredMethod() {\n    CompletableFuture.runAsync(this::subMethod);\n}\n\nprivate void subMethod() {\n    //logic\n    //logic\n    //logic\n    //logic\n}\n</code></pre>\n<p>After that, test the subMethod this way:</p>\n<pre><code>org.powermock.reflect.Whitebox.invokeMethod(classInstance, &quot;subMethod&quot;); \n</code></pre>\n<p>This isn't a perfect solution, but it tests all the logic inside your async execution.</p>\n"},{"tags":[],"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1603274179,"creation_date":1603273554,"answer_id":64460897,"question_id":631598,"body_markdown":"JUnit 5 has `Assertions.assertTimeout(Duration, Executable)`/`assertTimeoutPreemptively()`(please read Javadoc of each to understand the difference) and Mockito has `verify(mock, timeout(millisecs).times(x))`. \r\n\r\n    Assertions.assertTimeout(Duration.ofMillis(1000), () -&gt; \r\n        myReactiveService.doSth().subscribe()\r\n    );\r\n\r\nAnd: \r\n\r\n    Mockito.verify(myReactiveService, \r\n        timeout(1000).times(0)).doSth(); // cannot use never() here\r\n\r\nTimeout may be nondeterministic/fragile in pipelines. So be careful. ","title":"How to use JUnit to test asynchronous processes","body":"<p>JUnit 5 has <code>Assertions.assertTimeout(Duration, Executable)</code>/<code>assertTimeoutPreemptively()</code>(please read Javadoc of each to understand the difference) and Mockito has <code>verify(mock, timeout(millisecs).times(x))</code>.</p>\n<pre><code>Assertions.assertTimeout(Duration.ofMillis(1000), () -&gt; \n    myReactiveService.doSth().subscribe()\n);\n</code></pre>\n<p>And:</p>\n<pre><code>Mockito.verify(myReactiveService, \n    timeout(1000).times(0)).doSth(); // cannot use never() here\n</code></pre>\n<p>Timeout may be nondeterministic/fragile in pipelines. So be careful.</p>\n"},{"tags":[],"owner":{"account_id":1848338,"reputation":1157,"user_id":1675502,"accept_rate":42,"display_name":"V&#237;ctor Herraiz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681555037,"creation_date":1681555037,"answer_id":76021715,"question_id":631598,"body_markdown":"The following solution is explained in the code, there are two different approaches depending on your needs.\r\n\r\n```java\r\npackage es.victorherraiz.learningjava;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.extension.*;\r\n\r\nimport java.util.concurrent.CountDownLatch;\r\nimport java.util.concurrent.TimeoutException;\r\nimport java.util.concurrent.atomic.AtomicLong;\r\n\r\nimport static java.util.concurrent.CompletableFuture.delayedExecutor;\r\nimport static java.util.concurrent.TimeUnit.MILLISECONDS;\r\nimport static org.mockito.BDDMockito.then;\r\nimport static org.mockito.Mockito.mock;\r\nimport static org.mockito.Mockito.timeout;\r\n\r\n@ExtendWith(AsyncTest.AsyncExtension.class)\r\npublic class AsyncTest {\r\n\r\n\r\n    /**\r\n     * This first test uses a custom extension, the code is down there.\r\n     * It is useful when there are plenty of async tests\r\n     * @param cb The callback\r\n     */\r\n    @Test\r\n    void test1(AsyncCallback cb) {\r\n        cb.setTimeout(5000);\r\n        delayedExecutor(2000, MILLISECONDS)\r\n            .execute(cb::success);\r\n    }\r\n\r\n    /**\r\n     * This test uses mockito, it is slower to detect signal.\r\n     * Use this when there are only a few async tests.\r\n     */\r\n    @Test\r\n    void test2() {\r\n        var mock = mock(Runnable.class);\r\n        delayedExecutor(2000, MILLISECONDS)\r\n            .execute(mock);\r\n        then(mock).should(timeout(5000)).run();\r\n    }\r\n\r\n    public static final class AsyncCallback {\r\n        private final CountDownLatch latch = new CountDownLatch(1);\r\n        private final AtomicLong timeout = new AtomicLong(5000);\r\n        private Exception exception;\r\n\r\n        private void setTimeout(long timeout) {\r\n            this.timeout.set(timeout);\r\n        }\r\n\r\n        private long getTimeout() {\r\n            return this.timeout.get();\r\n        };\r\n\r\n\r\n        boolean await() throws InterruptedException {\r\n            return latch.await(timeout.get(), MILLISECONDS);\r\n        }\r\n\r\n        Exception getFailure() {\r\n            return exception;\r\n        }\r\n\r\n        public void done(Exception exception) {\r\n            this.exception = exception;\r\n            latch.countDown();\r\n        }\r\n\r\n        public void success() {\r\n            done(null);\r\n        }\r\n\r\n        public void failure(Exception exception) {\r\n            done(exception);\r\n        }\r\n    }\r\n\r\n    // Extract this class to any common package\r\n    public static class AsyncExtension implements ParameterResolver, AfterTestExecutionCallback {\r\n        private static final ExtensionContext.Namespace NAMESPACE =\r\n            ExtensionContext.Namespace.create(AsyncExtension.class);\r\n\r\n        @Override\r\n        public boolean supportsParameter(ParameterContext parameterContext, ExtensionContext extensionContext) {\r\n            return parameterContext.getParameter().getType().equals(AsyncCallback.class);\r\n        }\r\n\r\n        @Override\r\n        public Object resolveParameter(ParameterContext parameterContext, ExtensionContext extensionContext) {\r\n            return extensionContext.getStore(NAMESPACE).getOrComputeIfAbsent(AsyncCallback.class);\r\n        }\r\n\r\n        @Override\r\n        public void afterTestExecution(ExtensionContext extensionContext) throws Exception {\r\n            var callback = (AsyncCallback) extensionContext.getStore(NAMESPACE).get(AsyncCallback.class);\r\n            if (callback != null) {\r\n                if (!callback.await()) {\r\n                    throw new TimeoutException(&quot;Timeout: there was not signal for &quot; + callback.getTimeout() + &quot;ms&quot;);\r\n                }\r\n                var failure = callback.getFailure();\r\n                if (failure != null) {\r\n                    throw failure;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n```","title":"How to use JUnit to test asynchronous processes","body":"<p>The following solution is explained in the code, there are two different approaches depending on your needs.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package es.victorherraiz.learningjava;\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.*;\n\nimport java.util.concurrent.CountDownLatch;\nimport java.util.concurrent.TimeoutException;\nimport java.util.concurrent.atomic.AtomicLong;\n\nimport static java.util.concurrent.CompletableFuture.delayedExecutor;\nimport static java.util.concurrent.TimeUnit.MILLISECONDS;\nimport static org.mockito.BDDMockito.then;\nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.timeout;\n\n@ExtendWith(AsyncTest.AsyncExtension.class)\npublic class AsyncTest {\n\n\n    /**\n     * This first test uses a custom extension, the code is down there.\n     * It is useful when there are plenty of async tests\n     * @param cb The callback\n     */\n    @Test\n    void test1(AsyncCallback cb) {\n        cb.setTimeout(5000);\n        delayedExecutor(2000, MILLISECONDS)\n            .execute(cb::success);\n    }\n\n    /**\n     * This test uses mockito, it is slower to detect signal.\n     * Use this when there are only a few async tests.\n     */\n    @Test\n    void test2() {\n        var mock = mock(Runnable.class);\n        delayedExecutor(2000, MILLISECONDS)\n            .execute(mock);\n        then(mock).should(timeout(5000)).run();\n    }\n\n    public static final class AsyncCallback {\n        private final CountDownLatch latch = new CountDownLatch(1);\n        private final AtomicLong timeout = new AtomicLong(5000);\n        private Exception exception;\n\n        private void setTimeout(long timeout) {\n            this.timeout.set(timeout);\n        }\n\n        private long getTimeout() {\n            return this.timeout.get();\n        };\n\n\n        boolean await() throws InterruptedException {\n            return latch.await(timeout.get(), MILLISECONDS);\n        }\n\n        Exception getFailure() {\n            return exception;\n        }\n\n        public void done(Exception exception) {\n            this.exception = exception;\n            latch.countDown();\n        }\n\n        public void success() {\n            done(null);\n        }\n\n        public void failure(Exception exception) {\n            done(exception);\n        }\n    }\n\n    // Extract this class to any common package\n    public static class AsyncExtension implements ParameterResolver, AfterTestExecutionCallback {\n        private static final ExtensionContext.Namespace NAMESPACE =\n            ExtensionContext.Namespace.create(AsyncExtension.class);\n\n        @Override\n        public boolean supportsParameter(ParameterContext parameterContext, ExtensionContext extensionContext) {\n            return parameterContext.getParameter().getType().equals(AsyncCallback.class);\n        }\n\n        @Override\n        public Object resolveParameter(ParameterContext parameterContext, ExtensionContext extensionContext) {\n            return extensionContext.getStore(NAMESPACE).getOrComputeIfAbsent(AsyncCallback.class);\n        }\n\n        @Override\n        public void afterTestExecution(ExtensionContext extensionContext) throws Exception {\n            var callback = (AsyncCallback) extensionContext.getStore(NAMESPACE).get(AsyncCallback.class);\n            if (callback != null) {\n                if (!callback.await()) {\n                    throw new TimeoutException(&quot;Timeout: there was not signal for &quot; + callback.getTimeout() + &quot;ms&quot;);\n                }\n                var failure = callback.getFailure();\n                if (failure != null) {\n                    throw failure;\n                }\n            }\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":20392,"reputation":6497,"user_id":48721,"accept_rate":77,"display_name":"Sam"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":241710,"favorite_count":0,"down_vote_count":0,"up_vote_count":271,"accepted_answer_id":631754,"answer_count":18,"score":271,"last_activity_date":1681555037,"creation_date":1236708571,"question_id":631598,"body_markdown":"How do you test methods that fire asynchronous processes with JUnit?\r\n\r\nI don&#39;t know how to make my test wait for the process to end (it is not exactly a unit test, it is more like an integration test as it involves several classes and not just one).","title":"How to use JUnit to test asynchronous processes","body":"<p>How do you test methods that fire asynchronous processes with JUnit?</p>\n\n<p>I don't know how to make my test wait for the process to end (it is not exactly a unit test, it is more like an integration test as it involves several classes and not just one).</p>\n"},{"tags":["java","data-structures","depth-first-search","breadth-first-search"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681554979,"post_id":76021700,"comment_id":134077491,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":10759610,"reputation":12648,"user_id":7916438,"display_name":"tevemadar"},"score":0,"creation_date":1681556002,"post_id":76021700,"comment_id":134077618,"body_markdown":"You can do how it suggests and it will tell. It wants `adjacency = new LinkedList[v];` to be `adjacency = new LinkedList&lt;Integer&gt;[v];`. But then it won&#39;t work out of the box, see https://stackoverflow.com/questions/529085/how-to-create-a-generic-array-in-java for details. Actually it looks very suspicious that you have a `static` field of an array of linked lists, it may not be what you really want.","body":"You can do how it suggests and it will tell. It wants <code>adjacency = new LinkedList[v];</code> to be <code>adjacency = new LinkedList&lt;Integer&gt;[v];</code>. But then it won&#39;t work out of the box, see <a href=\"https://stackoverflow.com/questions/529085/how-to-create-a-generic-array-in-java\" title=\"how to create a generic array in java\">stackoverflow.com/questions/529085/&hellip;</a> for details. Actually it looks very suspicious that you have a <code>static</code> field of an array of linked lists, it may not be what you really want."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1681556551,"post_id":76021700,"comment_id":134077690,"body_markdown":"That is only a warning? Did .class file get updated? Usually adding some well placed ‘&lt;&gt;’ will fix. Sometimes difficult to fix. Ignore.","body":"That is only a warning? Did .class file get updated? Usually adding some well placed ‘&lt;&gt;’ will fix. Sometimes difficult to fix. Ignore."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681564612,"post_id":76021700,"comment_id":134078732,"body_markdown":"It says: &quot;`Recompile with -Xlint:unchecked for details`&quot;.  Do that!","body":"It says: &quot;<code>Recompile with -Xlint:unchecked for details</code>&quot;.  Do that!"}],"owner":{"account_id":28312255,"reputation":11,"user_id":21649344,"display_name":"Dabhoya Kishan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1681564649,"answer_count":0,"score":1,"last_activity_date":1681554951,"creation_date":1681554851,"question_id":76021700,"body_markdown":"    import java.util.*;\r\n    \r\n    public class q48 {\r\n            public static LinkedList&lt;Integer&gt; adjacency[];\r\n            public q48(int v)\r\n            {\r\n                adjacency = new LinkedList[v];\r\n                for(int i=0; i&lt;v; i++)\r\n                {\r\n                    adjacency[i]=new LinkedList&lt;Integer&gt;();\r\n                }\r\n            }\r\n            public static void implementgraph(int s,int d)\r\n            {\r\n                adjacency[s].add(d);\r\n                adjacency[d].add(s);\r\n            }\r\n            public static void bfs(int source)\r\n            {\r\n                boolean visited_nodes[] = new boolean[adjacency.length];\r\n                int parent_nodes[] =  new int[adjacency.length];\r\n                Queue&lt;Integer&gt; q= new LinkedList&lt;&gt;();\r\n                q.add(source);\r\n                visited_nodes[source]=true;\r\n                parent_nodes[source]=-1;\r\n                while(!q.isEmpty())\r\n                {\r\n                    int p = q.poll();\r\n                    System.out.println(p);\r\n                    for(int i:adjacency[p])\r\n                    {\r\n                        if(visited_nodes[i] != true)\r\n                        {\r\n                            visited_nodes[i] = true;\r\n                            q.add(i);\r\n                            parent_nodes[i]=p;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        public static void main(String[] args) {\r\n            Scanner sc = new Scanner(System.in);\r\n            System.out.println(&quot;Enter vertice and edges : &quot;);\r\n            int v = sc.nextInt();\r\n            int e = sc.nextInt();\r\n            q48 g= new q48(v);\r\n            System.out.println(&quot;Enter the edges : &quot;);\r\n            for(int i=0; i&lt;e; i++)\r\n            {\r\n                int s = sc.nextInt();\r\n                int d = sc.nextInt();\r\n                implementgraph(s,d);\r\n            }\r\n            System.out.println(&quot;Enter source node : &quot;);\r\n            int source = sc.nextInt();\r\n            bfs(source);\r\n        }\r\n    }\r\n\r\nwhen I compile same code in VSCode then its working perfectly but when I compile this code with Command prompt gave error\r\n\r\n\r\n","title":"Why I got this error q48.java uses unchecked or unsafe operations. Note: Recompile with -Xlint:unchecked for details","body":"<pre><code>import java.util.*;\n\npublic class q48 {\n        public static LinkedList&lt;Integer&gt; adjacency[];\n        public q48(int v)\n        {\n            adjacency = new LinkedList[v];\n            for(int i=0; i&lt;v; i++)\n            {\n                adjacency[i]=new LinkedList&lt;Integer&gt;();\n            }\n        }\n        public static void implementgraph(int s,int d)\n        {\n            adjacency[s].add(d);\n            adjacency[d].add(s);\n        }\n        public static void bfs(int source)\n        {\n            boolean visited_nodes[] = new boolean[adjacency.length];\n            int parent_nodes[] =  new int[adjacency.length];\n            Queue&lt;Integer&gt; q= new LinkedList&lt;&gt;();\n            q.add(source);\n            visited_nodes[source]=true;\n            parent_nodes[source]=-1;\n            while(!q.isEmpty())\n            {\n                int p = q.poll();\n                System.out.println(p);\n                for(int i:adjacency[p])\n                {\n                    if(visited_nodes[i] != true)\n                    {\n                        visited_nodes[i] = true;\n                        q.add(i);\n                        parent_nodes[i]=p;\n                    }\n                }\n            }\n        }\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.println(&quot;Enter vertice and edges : &quot;);\n        int v = sc.nextInt();\n        int e = sc.nextInt();\n        q48 g= new q48(v);\n        System.out.println(&quot;Enter the edges : &quot;);\n        for(int i=0; i&lt;e; i++)\n        {\n            int s = sc.nextInt();\n            int d = sc.nextInt();\n            implementgraph(s,d);\n        }\n        System.out.println(&quot;Enter source node : &quot;);\n        int source = sc.nextInt();\n        bfs(source);\n    }\n}\n</code></pre>\n<p>when I compile same code in VSCode then its working perfectly but when I compile this code with Command prompt gave error</p>\n"},{"tags":["java","libgdx"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1681499557,"post_id":75998931,"comment_id":134072081,"body_markdown":"It&#39;s unclear what your problem is. The above should work if you&#39;ve set up your batch with the right blend mode and enabled blending on the batch.","body":"It&#39;s unclear what your problem is. The above should work if you&#39;ve set up your batch with the right blend mode and enabled blending on the batch."}],"answers":[{"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1681499488,"post_id":76008834,"comment_id":134072066,"body_markdown":"This won&#39;t work. SprtieBatch manages GL state on its own, and if you modify it between `batch.begin()`/`end()`, it will have unexpected results.","body":"This won&#39;t work. SprtieBatch manages GL state on its own, and if you modify it between <code>batch.begin()</code>/<code>end()</code>, it will have unexpected results."}],"tags":[],"owner":{"account_id":4018270,"reputation":35,"user_id":3309567,"display_name":"NoUserNoName"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681554895,"creation_date":1681411487,"answer_id":76008834,"question_id":75998931,"body_markdown":"    public void setUpTransparent(float alpha){\r\n        Gdx.gl.glEnable(GL20.GL_BLEND);\r\n        Gdx.gl.glBlendFunc(GL20.GL_SRC_ALPHA, GL20.GL_ONE_MINUS_SRC_ALPHA);\r\n        batch.begin();\r\n    \r\n        up++;\r\n        rgbBatch = batch.getColor();\r\n        if (up &gt; 100){\r\n            batch.setColor(rgbBatch.r, rgbBatch.g, rgbBatch.b, alpha);\r\n            batch.draw(textureIcon, rectangleIcon.x, rectangleIcon.y);\r\n        }\r\n        batch.end();\r\n        Gdx.gl.glDisable(GL20.GL_BLEND);\r\n    }\r\n\r\n","title":"How do i make the texture transparent?","body":"<pre><code>public void setUpTransparent(float alpha){\n    Gdx.gl.glEnable(GL20.GL_BLEND);\n    Gdx.gl.glBlendFunc(GL20.GL_SRC_ALPHA, GL20.GL_ONE_MINUS_SRC_ALPHA);\n    batch.begin();\n\n    up++;\n    rgbBatch = batch.getColor();\n    if (up &gt; 100){\n        batch.setColor(rgbBatch.r, rgbBatch.g, rgbBatch.b, alpha);\n        batch.draw(textureIcon, rectangleIcon.x, rectangleIcon.y);\n    }\n    batch.end();\n    Gdx.gl.glDisable(GL20.GL_BLEND);\n}\n</code></pre>\n"}],"owner":{"account_id":27617232,"reputation":1,"user_id":21457902,"display_name":"Outsider"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681554895,"creation_date":1681325980,"question_id":75998931,"body_markdown":"I have the method which increase transparent texture, alpha = 0.3f.\r\n\r\n\r\n```\r\n public void setUpTransparent(float alpha){\r\n        up += 1;\r\n        rgbBatch = batch.getColor();\r\n        if (up &gt; 100){\r\n            batch.setColor(rgbBatch.r, rgbBatch.g, rgbBatch.b, alpha);\r\n            batch.draw(textureIcon, rectangleIcon.x, rectangleIcon.y);\r\n        }\r\n    }\r\n```\r\n\r\nI need do dicrease transparent for texture. How do this ?\r\n\r\n\r\n","title":"How do i make the texture transparent?","body":"<p>I have the method which increase transparent texture, alpha = 0.3f.</p>\n<pre><code> public void setUpTransparent(float alpha){\n        up += 1;\n        rgbBatch = batch.getColor();\n        if (up &gt; 100){\n            batch.setColor(rgbBatch.r, rgbBatch.g, rgbBatch.b, alpha);\n            batch.draw(textureIcon, rectangleIcon.x, rectangleIcon.y);\n        }\n    }\n</code></pre>\n<p>I need do dicrease transparent for texture. How do this ?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1681496432,"post_id":76017651,"comment_id":134071559,"body_markdown":"Since the same key appears in the list, the map might be smaller than the list, right? So that for `[a, b, c, a]`, your `getValues(List)` function returns `[&lt;a, aVal&gt;,&lt;b, bVal&gt;,&lt;c, cVal&gt;]`, since `Map#put` will update on duplicate keys. I&#39;m guessing you try to cache because you might call `getValue(String)` for the same key more than once. Is it correct?","body":"Since the same key appears in the list, the map might be smaller than the list, right? So that for <code>[a, b, c, a]</code>, your <code>getValues(List)</code> function returns <code>[&lt;a, aVal&gt;,&lt;b, bVal&gt;,&lt;c, cVal&gt;]</code>, since <code>Map#put</code> will update on duplicate keys. I&#39;m guessing you try to cache because you might call <code>getValue(String)</code> for the same key more than once. Is it correct?"},{"owner":{"account_id":10572708,"reputation":167,"user_id":7788900,"display_name":"pradhyo"},"score":0,"creation_date":1681497747,"post_id":76017651,"comment_id":134071775,"body_markdown":"sorry - I just updated the sample code to focus more on the problem. Yes, I am trying to cache because `getValue` will be called for the same key more than once.","body":"sorry - I just updated the sample code to focus more on the problem. Yes, I am trying to cache because <code>getValue</code> will be called for the same key more than once."},{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1681498460,"post_id":76017651,"comment_id":134071896,"body_markdown":"Ok, if that&#39;s the case, couldn&#39;t you remove the duplicate keys before mapping? That way `getValue` will be called only once per unique key.","body":"Ok, if that&#39;s the case, couldn&#39;t you remove the duplicate keys before mapping? That way <code>getValue</code> will be called only once per unique key."},{"owner":{"account_id":10572708,"reputation":167,"user_id":7788900,"display_name":"pradhyo"},"score":0,"creation_date":1681503923,"post_id":76017651,"comment_id":134072817,"body_markdown":"its more like this dummy code so can&#39;t eliminate duplicates like that\n```java\nMap.of(\n  &quot;key1&quot;, (getValue(&quot;k1&quot;) + getValue(&quot;k2&quot;) + getValue(&quot;k3&quot;)),\n  &quot;key2&quot;, (getValue(&quot;k2&quot;) + getValue(&quot;k1&quot;) + getValue(&quot;k3&quot;)),\n  &quot;key3&quot;, (getValue(&quot;k3&quot;) + getValue(&quot;k2&quot;) + getValue(&quot;k1&quot;))\n);\n```","body":"its more like this dummy code so can&#39;t eliminate duplicates like that <code>java Map.of(   &quot;key1&quot;, (getValue(&quot;k1&quot;) + getValue(&quot;k2&quot;) + getValue(&quot;k3&quot;)),   &quot;key2&quot;, (getValue(&quot;k2&quot;) + getValue(&quot;k1&quot;) + getValue(&quot;k3&quot;)),   &quot;key3&quot;, (getValue(&quot;k3&quot;) + getValue(&quot;k2&quot;) + getValue(&quot;k1&quot;)) ); </code>"},{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1681505185,"post_id":76017651,"comment_id":134073026,"body_markdown":"You should definitely add that to your question. I would expect that for every key, a single result is retrieved. I was hoping to help you solve this without a caching mechanism, but with those k&#39;s I no longer see how the relation works. Adding that (What are those k&#39;s and where do they come from) will also be helpful.","body":"You should definitely add that to your question. I would expect that for every key, a single result is retrieved. I was hoping to help you solve this without a caching mechanism, but with those k&#39;s I no longer see how the relation works. Adding that (What are those k&#39;s and where do they come from) will also be helpful."}],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681554648,"creation_date":1681554648,"answer_id":76021676,"question_id":76017651,"body_markdown":"Include the GUID generated in the Controller in the cache key.\r\n\r\n\r\n      @PostMapping(&quot;/logic&quot;)\r\n      public Map&lt;String, String&gt; getValues(\r\n          @RequestBody LogicRequest logicRequest\r\n      ) {\r\n        String uuid = UUID.randomUUID().toString();\r\n        return logicService.getValues(uuid);\r\n      } \r\n\r\n \r\n\r\n\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    @Slf4j\r\n    public class LogicService {\r\n    \r\n      Map&lt;String, String&gt; getValues(String uuid) {\r\n        // call getValue hundreds of times to generate output \r\n        // with a lot of calls having the same input\r\n      }\r\n    \r\n      @Cacheable(cacheManager = &quot;requestCacheManager&quot;, cacheNames = &quot;values&quot;)\r\n      String getValue(String uuid, String key) {\r\n        // expensive function\r\n      }\r\n    }\r\n\r\nOn a separate note, the @Cacheable mechanism will not work for your code in the question. The method getValue(String key) must be called from outside the LogicService because java needs to proxy the call.\r\n\r\n","title":"Caching a function (in a singleton service) within a single request to the controller in Java Spring Boot","body":"<p>Include the GUID generated in the Controller in the cache key.</p>\n<pre><code>  @PostMapping(&quot;/logic&quot;)\n  public Map&lt;String, String&gt; getValues(\n      @RequestBody LogicRequest logicRequest\n  ) {\n    String uuid = UUID.randomUUID().toString();\n    return logicService.getValues(uuid);\n  } \n\n\n\n\n@Service\n@RequiredArgsConstructor\n@Slf4j\npublic class LogicService {\n\n  Map&lt;String, String&gt; getValues(String uuid) {\n    // call getValue hundreds of times to generate output \n    // with a lot of calls having the same input\n  }\n\n  @Cacheable(cacheManager = &quot;requestCacheManager&quot;, cacheNames = &quot;values&quot;)\n  String getValue(String uuid, String key) {\n    // expensive function\n  }\n}\n</code></pre>\n<p>On a separate note, the @Cacheable mechanism will not work for your code in the question. The method getValue(String key) must be called from outside the LogicService because java needs to proxy the call.</p>\n"}],"owner":{"account_id":10572708,"reputation":167,"user_id":7788900,"display_name":"pradhyo"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":266,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681554648,"creation_date":1681493643,"question_id":76017651,"body_markdown":"For each call to the endpoint below, I have to fetch values for multiple keys from external services so I would like to cache the results of `getValue` but only within each request. `getValue` will be called multiple times for the same input multiple times within a request. The results for the same key will vary across multiple requests.\r\n\r\nSimplified version of my code is provided below.\r\n\r\nI tried using a `CacheManager` with `@Scope(&quot;prototype&quot;)` but its caching the values across requests.\r\nI tried using `@RequestScope(proxyMode = ScopedProxyMode.INTERFACES)` but I get `Scope &#39;request&#39; is not active for the current thread` and the application wouldn&#39;t run.\r\nI&#39;d prefer just creating an empty `HashMap` for each request and cache the values there myself but unsure how to handle that since `LogicService` is a singleton. \r\n\r\n\r\n```java\r\n@RestController\r\n@RequiredArgsConstructor\r\n@Slf4j\r\npublic class LogicController {\r\n  private final LogicService logicService;\r\n\r\n  @PostMapping(&quot;/logic&quot;)\r\n  public Map&lt;String, String&gt; getValues(\r\n      @RequestBody LogicRequest logicRequest\r\n  ) {\r\n    return logicService.getValues();\r\n  }  \r\n}\r\n```\r\n\r\n\r\n```java\r\n@Service\r\n@RequiredArgsConstructor\r\n@Slf4j\r\npublic class LogicService {\r\n\r\n  Map&lt;String, String&gt; getValues() {\r\n    // call getValue hundreds of times to generate output \r\n    // with a lot of calls having the same input\r\n  }\r\n\r\n  // how do I cache the results of this function just within one API call to /logic?\r\n  @Cacheable(cacheManager = &quot;requestCacheManager&quot;, cacheNames = &quot;values&quot;, key = &quot;#key&quot;)\r\n  String getValue(String key) {\r\n    // expensive function\r\n  }\r\n}\r\n```\r\n\r\n```java\r\n@SpringBootConfiguration\r\n@EnableCaching\r\npublic class CacheManagerConfiguration {\r\n  @Bean\r\n  @Scope(&quot;prototype&quot;)\r\n  public CacheManager requestCacheManager() {\r\n    return new ConcurrentMapCacheManager(&quot;values&quot;);\r\n  }\r\n}\r\n```\r\n","title":"Caching a function (in a singleton service) within a single request to the controller in Java Spring Boot","body":"<p>For each call to the endpoint below, I have to fetch values for multiple keys from external services so I would like to cache the results of <code>getValue</code> but only within each request. <code>getValue</code> will be called multiple times for the same input multiple times within a request. The results for the same key will vary across multiple requests.</p>\n<p>Simplified version of my code is provided below.</p>\n<p>I tried using a <code>CacheManager</code> with <code>@Scope(&quot;prototype&quot;)</code> but its caching the values across requests.\nI tried using <code>@RequestScope(proxyMode = ScopedProxyMode.INTERFACES)</code> but I get <code>Scope 'request' is not active for the current thread</code> and the application wouldn't run.\nI'd prefer just creating an empty <code>HashMap</code> for each request and cache the values there myself but unsure how to handle that since <code>LogicService</code> is a singleton.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequiredArgsConstructor\n@Slf4j\npublic class LogicController {\n  private final LogicService logicService;\n\n  @PostMapping(&quot;/logic&quot;)\n  public Map&lt;String, String&gt; getValues(\n      @RequestBody LogicRequest logicRequest\n  ) {\n    return logicService.getValues();\n  }  \n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@RequiredArgsConstructor\n@Slf4j\npublic class LogicService {\n\n  Map&lt;String, String&gt; getValues() {\n    // call getValue hundreds of times to generate output \n    // with a lot of calls having the same input\n  }\n\n  // how do I cache the results of this function just within one API call to /logic?\n  @Cacheable(cacheManager = &quot;requestCacheManager&quot;, cacheNames = &quot;values&quot;, key = &quot;#key&quot;)\n  String getValue(String key) {\n    // expensive function\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootConfiguration\n@EnableCaching\npublic class CacheManagerConfiguration {\n  @Bean\n  @Scope(&quot;prototype&quot;)\n  public CacheManager requestCacheManager() {\n    return new ConcurrentMapCacheManager(&quot;values&quot;);\n  }\n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"owner":{"account_id":28252123,"reputation":1,"user_id":21598191,"display_name":"saket chauhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":432,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681554253,"creation_date":1680986443,"question_id":75967580,"body_markdown":"I am trying to launch Chrome with a URL, the browser launches but it does nothing after that.\r\n\r\nSeeing below error in my Eclipse console:\r\n```none\r\nStarting ChromeDriver 112.0.5615.49 (bd2a7bcb881c11e8cfe3078709382934e3916914-refs/branch-heads/5615@{#936}) on port 24598\r\nOnly local connections are allowed.\r\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\nChromeDriver was started successfully.\r\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: unknown error: Chrome failed to start: exited normally.\r\n  (unknown error: DevToolsActivePort file doesn&#39;t exist)\r\n  (The process started from chrome location C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe is no longer running, so ChromeDriver is assuming that Chrome has crashed.) \r\nHost info: host: &#39;ITCHAUNOTE&#39;, ip: &#39;192.168.1.15&#39;\r\nBuild info: version: &#39;4.8.3&#39;, revision: &#39;e5e76298c3&#39;\r\nSystem info: **os.name: &#39;Windows 10&#39;**, os.arch: &#39;amd64&#39;, **os.version: &#39;10.0&#39;, java.version: &#39;17.0.6&#39;**\r\nDriver info: org.openqa.selenium.chrome.ChromeDriver\r\nCommand: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [--remote-allow-origins=*], extensions: []}}], desiredCapabilities=Capabilities {browserName: chrome, goog:chromeOptions: {args: [--remote-allow-origins=*], extensions: []}}}]\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:148)\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:106)\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:67)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:165)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:183)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:158)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:543)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:229)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:157)\r\n\tat org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:101)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:88)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:84)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:73)\r\n\tat ChromeTest.main(ChromeTest.java:13)\r\n```\r\nSelenium Code:\r\n```java\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.chrome.ChromeOptions;\r\n\r\npublic class ChromeTest {\r\n\r\n\tpublic static void main(String[] args) throws InterruptedException{\r\n\t\r\n\t\tChromeOptions options = new ChromeOptions();\r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Selenium\\\\chromedriver_win32\\\\chromedriver.exe&quot;);\r\n\t\t\r\n\t\tWebDriver driver = new ChromeDriver(options);\r\n\t\t\r\n\t\tdriver.get(&quot;https://www.google.com/travel/flights&quot;);\r\n\t\tThread.sleep(2000);\r\n\t\tdriver.quit();\r\n\r\n\t}\r\n\r\n}\r\n````\r\n\r\nMy configuration:\r\n\r\n- Chrome browser Version: 112.0.5615.49 (Official Build) (64-bit)   \r\n- Chrome Driver: ChromeDriver 112.0.5615.49\r\n- Selenium-Java version: 4.8.3\r\n\r\nNote: Code works fine in other browsers Edge, Firefox but not in Chrome\r\n\r\n- OS: Microsoft Windows 10 Enterprise\r\n- System Type: x64-based PC\r\n\r\nSolution tried so far:\r\n\r\n1. Works fine when using code with setting Chrome options as shown below. But it runs in chomeheadless mode which I don&#39;t want. I want to run my tests only in Chrome browser.\r\n  ```java\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Selenium\\\\chromedriver_win32\\\\chromedriver.exe&quot;);\t\t\r\n    \t    // WebDriverManager.chromedriver().setup();\r\n    \r\n        ChromeOptions options = new ChromeOptions();\r\n        options.addArguments(&quot;--no-sandbox&quot;); // Bypass OS security model\r\n        options.addArguments(&quot;--headless&quot;);\r\n        options.addArguments(&quot;start-maximized&quot;); // open Browser in maximized mode \r\n        options.addArguments(&quot;disable-infobars&quot;); // disabling infobars\r\n        options.addArguments(&quot;--disable-extensions&quot;); // disabling extensions \r\n        options.addArguments(&quot;--disable-gpu&quot;); // applicable to windows os only \r\n        options.addArguments(&quot;--disable-dev-shm-usage&quot;); // overcome limited resource problems\r\n        options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n        driver = new ChromeDriver(options);\t\t \r\n        driver.get(&quot;https://www.google.com/travel/flights&quot;); \r\n        Thread.sleep(5000); \r\n        driver.quit();\r\n    ```\r\n\r\n2. Have tried older versions of Chrome browser, Chrome driver, and Selenium jar but no luck.","title":"Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: (DevToolsActivePort file doesn&#39;t exist)","body":"<p>I am trying to launch Chrome with a URL, the browser launches but it does nothing after that.</p>\n<p>Seeing below error in my Eclipse console:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Starting ChromeDriver 112.0.5615.49 (bd2a7bcb881c11e8cfe3078709382934e3916914-refs/branch-heads/5615@{#936}) on port 24598\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\nChromeDriver was started successfully.\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: unknown error: Chrome failed to start: exited normally.\n  (unknown error: DevToolsActivePort file doesn't exist)\n  (The process started from chrome location C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe is no longer running, so ChromeDriver is assuming that Chrome has crashed.) \nHost info: host: 'ITCHAUNOTE', ip: '192.168.1.15'\nBuild info: version: '4.8.3', revision: 'e5e76298c3'\nSystem info: **os.name: 'Windows 10'**, os.arch: 'amd64', **os.version: '10.0', java.version: '17.0.6'**\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCommand: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [--remote-allow-origins=*], extensions: []}}], desiredCapabilities=Capabilities {browserName: chrome, goog:chromeOptions: {args: [--remote-allow-origins=*], extensions: []}}}]\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:148)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:106)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:67)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:165)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:183)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:158)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:543)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:229)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:157)\n    at org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:101)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:88)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:84)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:73)\n    at ChromeTest.main(ChromeTest.java:13)\n</code></pre>\n<p>Selenium Code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.chrome.ChromeOptions;\n\npublic class ChromeTest {\n\n    public static void main(String[] args) throws InterruptedException{\n    \n        ChromeOptions options = new ChromeOptions();\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Selenium\\\\chromedriver_win32\\\\chromedriver.exe&quot;);\n        \n        WebDriver driver = new ChromeDriver(options);\n        \n        driver.get(&quot;https://www.google.com/travel/flights&quot;);\n        Thread.sleep(2000);\n        driver.quit();\n\n    }\n\n}\n</code></pre>\n<p>My configuration:</p>\n<ul>\n<li>Chrome browser Version: 112.0.5615.49 (Official Build) (64-bit)</li>\n<li>Chrome Driver: ChromeDriver 112.0.5615.49</li>\n<li>Selenium-Java version: 4.8.3</li>\n</ul>\n<p>Note: Code works fine in other browsers Edge, Firefox but not in Chrome</p>\n<ul>\n<li>OS: Microsoft Windows 10 Enterprise</li>\n<li>System Type: x64-based PC</li>\n</ul>\n<p>Solution tried so far:</p>\n<ol>\n<li>Works fine when using code with setting Chrome options as shown below. But it runs in chomeheadless mode which I don't want. I want to run my tests only in Chrome browser.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>  System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Selenium\\\\chromedriver_win32\\\\chromedriver.exe&quot;);        \n          // WebDriverManager.chromedriver().setup();\n  \n      ChromeOptions options = new ChromeOptions();\n      options.addArguments(&quot;--no-sandbox&quot;); // Bypass OS security model\n      options.addArguments(&quot;--headless&quot;);\n      options.addArguments(&quot;start-maximized&quot;); // open Browser in maximized mode \n      options.addArguments(&quot;disable-infobars&quot;); // disabling infobars\n      options.addArguments(&quot;--disable-extensions&quot;); // disabling extensions \n      options.addArguments(&quot;--disable-gpu&quot;); // applicable to windows os only \n      options.addArguments(&quot;--disable-dev-shm-usage&quot;); // overcome limited resource problems\n      options.addArguments(&quot;--remote-allow-origins=*&quot;);\n      driver = new ChromeDriver(options);      \n      driver.get(&quot;https://www.google.com/travel/flights&quot;); \n      Thread.sleep(5000); \n      driver.quit();\n  ```\n\n2. Have tried older versions of Chrome browser, Chrome driver, and Selenium jar but no luck.\n</code></pre>\n"},{"tags":["java","android","android-mediasession"],"answers":[{"tags":[],"owner":{"account_id":28159606,"reputation":31,"user_id":21519777,"display_name":"AllahinAskeri"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681553853,"creation_date":1680981561,"answer_id":75967238,"question_id":75892486,"body_markdown":"I solved my problem by adding `metadata.putLong(MediaMetadata.METADATA_KEY_DURATION, duration);`. `duration` variable should be `long` and it should always get updated.\r\n\r\n","title":"Android media notification large icon doesn&#39;t change","body":"<p>I solved my problem by adding <code>metadata.putLong(MediaMetadata.METADATA_KEY_DURATION, duration);</code>. <code>duration</code> variable should be <code>long</code> and it should always get updated.</p>\n"}],"owner":{"account_id":28159606,"reputation":31,"user_id":21519777,"display_name":"AllahinAskeri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":317,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75967238,"answer_count":1,"score":2,"last_activity_date":1681553853,"creation_date":1680206383,"question_id":75892486,"body_markdown":"I have a media notification and a large icon, my code successfully loads the image first time, but image doesn&#39;t changes second time. My code was working in Android 8.1.0, currently I&#39;m using Android 12 and it doesn&#39;t work.\r\n\r\n```\r\n    mediaSession.setMetadata(new MediaMetadataCompat.Builder()\r\n            .putBitmap(MediaMetadata.METADATA_KEY_ALBUM_ART, image)\r\n            .putBitmap(MediaMetadata.METADATA_KEY_ART, image)\r\n            .putLong(MediaMetadata.METADATA_KEY_DURATION, -1L)\r\n            .putString(MediaMetadata.METADATA_KEY_TITLE,BASLIK)\r\n            .putString(MediaMetadata.METADATA_KEY_ARTIST,ISIM)\r\n            .build());\r\n\r\n    stateBuilder = new PlaybackStateCompat.Builder();\r\n    stateBuilder.setActions(PlaybackStateCompat.ACTION_PLAY_PAUSE | PlaybackStateCompat.ACT\r\n    stateBuilder.setState(PlaybackStateCompat.STATE_PLAYING, 0, 1.0f);\r\n    mediaSession.setPlaybackState(stateBuilder.build());\r\n\r\n    notification = new NotificationCompat.Builder(context, CHANNEL_ID)\r\n            .setContentTitle(BASLIK)\r\n            .setContentText(ISIM)\r\n            .setLargeIcon(image)\r\n            .setSmallIcon(R.drawable.ic_launcher_foreground)\r\n            .addAction(R.drawable.ic_previous, &quot;Previous&quot;, prevPendingIntent)\r\n            .addAction(icon, &quot;Play&quot;, playPendingIntent)\r\n            .addAction(R.drawable.ic_next, &quot;Next&quot;, nextPendingIntent)\r\n            .setOnlyAlertOnce(true)\r\n            .setPriority(Notification.PRIORITY_LOW)\r\n            .setOngoing(true)\r\n            .setShowWhen(false)\r\n            .setVisibility(NotificationCompat.VISIBILITY_PUBLIC)\r\n            .setStyle(new androidx.media.app.NotificationCompat.MediaStyle()\r\n                    .setShowActionsInCompactView(0, 1, 2)\r\n                    .setMediaSession(mediaSession.getSessionToken()));\r\n            \r\n    notificationManager.notify(Integer.parseInt(CHANNEL_ID), notification.build());\r\n```\r\n\r\nI tried removing MediaStyle and it worked, images successfully changed each time but I need to use MediaStyle. I&#39;m sure about updating the notification, title and song name changes but image doesn&#39;t.\r\n","title":"Android media notification large icon doesn&#39;t change","body":"<p>I have a media notification and a large icon, my code successfully loads the image first time, but image doesn't changes second time. My code was working in Android 8.1.0, currently I'm using Android 12 and it doesn't work.</p>\n<pre><code>    mediaSession.setMetadata(new MediaMetadataCompat.Builder()\n            .putBitmap(MediaMetadata.METADATA_KEY_ALBUM_ART, image)\n            .putBitmap(MediaMetadata.METADATA_KEY_ART, image)\n            .putLong(MediaMetadata.METADATA_KEY_DURATION, -1L)\n            .putString(MediaMetadata.METADATA_KEY_TITLE,BASLIK)\n            .putString(MediaMetadata.METADATA_KEY_ARTIST,ISIM)\n            .build());\n\n    stateBuilder = new PlaybackStateCompat.Builder();\n    stateBuilder.setActions(PlaybackStateCompat.ACTION_PLAY_PAUSE | PlaybackStateCompat.ACT\n    stateBuilder.setState(PlaybackStateCompat.STATE_PLAYING, 0, 1.0f);\n    mediaSession.setPlaybackState(stateBuilder.build());\n\n    notification = new NotificationCompat.Builder(context, CHANNEL_ID)\n            .setContentTitle(BASLIK)\n            .setContentText(ISIM)\n            .setLargeIcon(image)\n            .setSmallIcon(R.drawable.ic_launcher_foreground)\n            .addAction(R.drawable.ic_previous, &quot;Previous&quot;, prevPendingIntent)\n            .addAction(icon, &quot;Play&quot;, playPendingIntent)\n            .addAction(R.drawable.ic_next, &quot;Next&quot;, nextPendingIntent)\n            .setOnlyAlertOnce(true)\n            .setPriority(Notification.PRIORITY_LOW)\n            .setOngoing(true)\n            .setShowWhen(false)\n            .setVisibility(NotificationCompat.VISIBILITY_PUBLIC)\n            .setStyle(new androidx.media.app.NotificationCompat.MediaStyle()\n                    .setShowActionsInCompactView(0, 1, 2)\n                    .setMediaSession(mediaSession.getSessionToken()));\n            \n    notificationManager.notify(Integer.parseInt(CHANNEL_ID), notification.build());\n</code></pre>\n<p>I tried removing MediaStyle and it worked, images successfully changed each time but I need to use MediaStyle. I'm sure about updating the notification, title and song name changes but image doesn't.</p>\n"},{"tags":["java","json","spring-boot","jackson","deserialization"],"comments":[{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":0,"creation_date":1681515410,"post_id":76018158,"comment_id":134074332,"body_markdown":"try `@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = As.PROPERTY, property = &quot;type&quot;)` - as per https://www.tutorialspoint.com/jackson_annotations/jackson_annotations_jsonsubtypes.htm","body":"try <code>@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = As.PROPERTY, property = &quot;type&quot;)</code> - as per <a href=\"https://www.tutorialspoint.com/jackson_annotations/jackson_annotations_jsonsubtypes.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/jackson_annotations/&hellip;</a>"},{"owner":{"account_id":426260,"reputation":489,"user_id":807367,"display_name":"ustad"},"score":0,"creation_date":1681536295,"post_id":76018158,"comment_id":134075719,"body_markdown":"Thanks @PJFanning, I tried that along with other variations of the include... all still returning null for the type property","body":"Thanks @PJFanning, I tried that along with other variations of the include... all still returning null for the type property"}],"answers":[{"comments":[{"owner":{"account_id":426260,"reputation":489,"user_id":807367,"display_name":"ustad"},"score":0,"creation_date":1681601653,"post_id":76021609,"comment_id":134083244,"body_markdown":"Can I also ask you, if I change the type from a String to an enum it seems to deserialize to null, what additionally would I need to do to deserialize it to the enum value properly?","body":"Can I also ask you, if I change the type from a String to an enum it seems to deserialize to null, what additionally would I need to do to deserialize it to the enum value properly?"},{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":1,"creation_date":1681633918,"post_id":76021609,"comment_id":134085439,"body_markdown":"@ustad Glad to have helped, on my machine I tried `public enum TypeEnum {\n    childClass1\n}` and  `TypeEnum type` and it works fine.","body":"@ustad Glad to have helped, on my machine I tried <code>public enum TypeEnum {     childClass1 }</code> and  <code>TypeEnum type</code> and it works fine."}],"tags":[],"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681553723,"creation_date":1681553723,"answer_id":76021609,"question_id":76018158,"body_markdown":"You were close to the solution that can be obtained with adding two properties in your existing annotation:\r\nthe [`JsonTypeInfo.As#EXISTING_PROPERTY`](https://fasterxml.github.io/jackson-annotations/javadoc/2.14/com/fasterxml/jackson/annotation/JsonTypeInfo.As.html#EXISTING_PROPERTY) property and also the [`JsonTypeInfo#visible`](https://fasterxml.github.io/jackson-annotations/javadoc/2.14/com/fasterxml/jackson/annotation/JsonTypeInfo.html#visible--) property that both have to be included in your  [`JsonTypeInfo`](https://fasterxml.github.io/jackson-annotations/javadoc/2.4/com/fasterxml/jackson/annotation/JsonTypeInfo.html) annotation you are using like below:\r\n\r\n~~~\r\n@Data\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = As.EXISTING_PROPERTY, \r\nproperty = &quot;type&quot;, visible = true)\r\n@JsonSubTypes({\r\n        @JsonSubTypes.Type(value = ChildClass1.class, name = &quot;childClass1&quot;)\r\n})\r\npublic class ParentClass {\r\n    protected String type;\r\n}\r\n\r\n@Getter\r\n@Setter\r\npublic class ChildClass1 extends ParentClass {\r\n    private String childClass1Field;\r\n    \r\n    @Override\r\n    public String toString() {\r\n        return &quot;ChildClass1 [childClass1Field=&quot; + childClass1Field + &quot;, type=&quot; + type + &quot;]&quot;;\r\n    }\r\n}\r\n~~~\r\n\r\nThen you can deserialize your json obtaining the expected result:\r\n\r\n~~~\r\nString json = &quot;&quot;&quot;\r\n                 {\r\n                   &quot;type&quot;: &quot;childClass1&quot;,\r\n                   &quot;childClass1Field&quot;: &quot;my child class 1 field value&quot;\r\n                 }\r\n              &quot;&quot;&quot;;\r\nParentClass parentClass = mapper.readValue(json, ParentClass.class);\r\n//it prints ChildClass1 [childClass1Field=my child class 1 field value, type=childClass1]\r\nSystem.out.println(parentClass);\r\n~~~","title":"Spring Boot Jackson Not Deserializing Parent Fields When Using JsonSubTypes","body":"<p>You were close to the solution that can be obtained with adding two properties in your existing annotation:\nthe <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.14/com/fasterxml/jackson/annotation/JsonTypeInfo.As.html#EXISTING_PROPERTY\" rel=\"nofollow noreferrer\"><code>JsonTypeInfo.As#EXISTING_PROPERTY</code></a> property and also the <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.14/com/fasterxml/jackson/annotation/JsonTypeInfo.html#visible--\" rel=\"nofollow noreferrer\"><code>JsonTypeInfo#visible</code></a> property that both have to be included in your  <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.4/com/fasterxml/jackson/annotation/JsonTypeInfo.html\" rel=\"nofollow noreferrer\"><code>JsonTypeInfo</code></a> annotation you are using like below:</p>\n<pre><code>@Data\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = As.EXISTING_PROPERTY, \nproperty = &quot;type&quot;, visible = true)\n@JsonSubTypes({\n        @JsonSubTypes.Type(value = ChildClass1.class, name = &quot;childClass1&quot;)\n})\npublic class ParentClass {\n    protected String type;\n}\n\n@Getter\n@Setter\npublic class ChildClass1 extends ParentClass {\n    private String childClass1Field;\n    \n    @Override\n    public String toString() {\n        return &quot;ChildClass1 [childClass1Field=&quot; + childClass1Field + &quot;, type=&quot; + type + &quot;]&quot;;\n    }\n}\n</code></pre>\n<p>Then you can deserialize your json obtaining the expected result:</p>\n<pre><code>String json = &quot;&quot;&quot;\n                 {\n                   &quot;type&quot;: &quot;childClass1&quot;,\n                   &quot;childClass1Field&quot;: &quot;my child class 1 field value&quot;\n                 }\n              &quot;&quot;&quot;;\nParentClass parentClass = mapper.readValue(json, ParentClass.class);\n//it prints ChildClass1 [childClass1Field=my child class 1 field value, type=childClass1]\nSystem.out.println(parentClass);\n</code></pre>\n"}],"owner":{"account_id":426260,"reputation":489,"user_id":807367,"display_name":"ustad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":469,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76021609,"answer_count":1,"score":1,"last_activity_date":1681553723,"creation_date":1681498528,"question_id":76018158,"body_markdown":"I have the following classes:\r\n\r\n    public class TestClass {\r\n    \r\n    \tpublic ParentClass parentClass;\r\n    \r\n    \tpublic ParentClass getParentClass() {\r\n    \t\treturn parentClass;\r\n    \t}\r\n    \r\n    \tpublic void setParentClass(ParentClass parentClass) {\r\n    \t\tthis.parentClass = parentClass;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;TestClass [parentClass=&quot; + parentClass + &quot;]&quot;;\r\n    \t}\r\n    \r\n    }\r\n    \r\n    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, property = &quot;type&quot;)\r\n    @JsonSubTypes({\r\n            @JsonSubTypes.Type(value = ChildClass1.class, name = &quot;childClass1&quot;),\r\n            @JsonSubTypes.Type(value = ChildClass2.class, name = &quot;childClass2&quot;)\r\n    })\r\n    public class ParentClass {\r\n    \r\n    \t@JsonProperty\r\n    \tpublic String type;\r\n    \r\n    \tpublic String getType() {\r\n    \t\treturn type;\r\n    \t}\r\n    \r\n    \tpublic void setType(String type) {\r\n    \t\tthis.type = type;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;ParentClass [type=&quot; + type + &quot;]&quot;;\r\n    \t}\r\n    \r\n    }\r\n    \r\n    public class ChildClass1 extends ParentClass {\r\n    \tpublic String childClass1Field;\r\n    \r\n    \tpublic String getChildClass1Field() {\r\n    \t\treturn childClass1Field;\r\n    \t}\r\n    \r\n    \tpublic void setChildClass1Field(String childClass1Field) {\r\n    \t\tthis.childClass1Field = childClass1Field;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;ChildClass1 [childClass1Field=&quot; + childClass1Field + &quot;, type=&quot; + type + &quot;]&quot;;\r\n    \t}\r\n    \r\n    \r\n    }\r\n    \r\n    public class ChildClass2 extends ParentClass {\r\n    \tpublic String childClass2Field;\r\n    \r\n    \tpublic String getChildClass2Field() {\r\n    \t\treturn childClass2Field;\r\n    \t}\r\n    \r\n    \tpublic void setChildClass2Field(String childClass2Field) {\r\n    \t\tthis.childClass2Field = childClass2Field;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;ChildClass2 [childClass2Field=&quot; + childClass2Field + &quot;, type=&quot; + type + &quot;]&quot;;\r\n    \t}\r\n    \r\n    \r\n    }\r\n\r\nwhen I have the following payload:\r\n\r\n    [{\r\n      &quot;parentClass&quot;: {\r\n          &quot;type&quot;: &quot;childClass1&quot;,\r\n          &quot;childClass1Field&quot;: &quot;my child class 1 field value&quot;\r\n      }\r\n    }]\r\n\r\nIt de-serializes to the following (print out of the deserialized object):\r\n\r\n[TestClass [parentClass=ChildClass1 [childClass1Field=my child class 1 field value, type=null]]]\r\n\r\n\r\nPolymorphism works correctly as it is instantiating the correct child class (ChildClass1) but notice the type field from the parentclass is not de-serialized properly and is returned back as &#39;null&#39; instead of the expected value of &#39;childClass1&#39;\r\n\r\nI&#39;ve tried everything under the sun but all to no avail. Any help would be appreciated!\r\n\r\n\r\n\r\n\r\n","title":"Spring Boot Jackson Not Deserializing Parent Fields When Using JsonSubTypes","body":"<p>I have the following classes:</p>\n<pre><code>public class TestClass {\n\n    public ParentClass parentClass;\n\n    public ParentClass getParentClass() {\n        return parentClass;\n    }\n\n    public void setParentClass(ParentClass parentClass) {\n        this.parentClass = parentClass;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;TestClass [parentClass=&quot; + parentClass + &quot;]&quot;;\n    }\n\n}\n\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, property = &quot;type&quot;)\n@JsonSubTypes({\n        @JsonSubTypes.Type(value = ChildClass1.class, name = &quot;childClass1&quot;),\n        @JsonSubTypes.Type(value = ChildClass2.class, name = &quot;childClass2&quot;)\n})\npublic class ParentClass {\n\n    @JsonProperty\n    public String type;\n\n    public String getType() {\n        return type;\n    }\n\n    public void setType(String type) {\n        this.type = type;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;ParentClass [type=&quot; + type + &quot;]&quot;;\n    }\n\n}\n\npublic class ChildClass1 extends ParentClass {\n    public String childClass1Field;\n\n    public String getChildClass1Field() {\n        return childClass1Field;\n    }\n\n    public void setChildClass1Field(String childClass1Field) {\n        this.childClass1Field = childClass1Field;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;ChildClass1 [childClass1Field=&quot; + childClass1Field + &quot;, type=&quot; + type + &quot;]&quot;;\n    }\n\n\n}\n\npublic class ChildClass2 extends ParentClass {\n    public String childClass2Field;\n\n    public String getChildClass2Field() {\n        return childClass2Field;\n    }\n\n    public void setChildClass2Field(String childClass2Field) {\n        this.childClass2Field = childClass2Field;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;ChildClass2 [childClass2Field=&quot; + childClass2Field + &quot;, type=&quot; + type + &quot;]&quot;;\n    }\n\n\n}\n</code></pre>\n<p>when I have the following payload:</p>\n<pre><code>[{\n  &quot;parentClass&quot;: {\n      &quot;type&quot;: &quot;childClass1&quot;,\n      &quot;childClass1Field&quot;: &quot;my child class 1 field value&quot;\n  }\n}]\n</code></pre>\n<p>It de-serializes to the following (print out of the deserialized object):</p>\n<p>[TestClass [parentClass=ChildClass1 [childClass1Field=my child class 1 field value, type=null]]]</p>\n<p>Polymorphism works correctly as it is instantiating the correct child class (ChildClass1) but notice the type field from the parentclass is not de-serialized properly and is returned back as 'null' instead of the expected value of 'childClass1'</p>\n<p>I've tried everything under the sun but all to no avail. Any help would be appreciated!</p>\n"},{"tags":["java","linux","intellij-idea","z3"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1681463392,"post_id":76012286,"comment_id":134063764,"body_markdown":"Please show output of `java -XshowSettings:properties  -version 2&gt;&amp;1 | grep  library`","body":"Please show output of <code>java -XshowSettings:properties  -version 2&gt;&amp;1 | grep  library</code>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1681465337,"post_id":76012286,"comment_id":134064255,"body_markdown":"`java -Djava.library.path=/usr/lib -jar your.jar` should work as a command with your symlinks. If you&#39;re running in the IDE, make sure the same system property is set for the JVM","body":"<code>java -Djava.library.path=&#47;usr&#47;lib -jar your.jar</code> should work as a command with your symlinks. If you&#39;re running in the IDE, make sure the same system property is set for the JVM"},{"owner":{"account_id":27744065,"reputation":309,"user_id":21179924,"display_name":"Dhanunjay Mamidi"},"score":0,"creation_date":1699462537,"post_id":76012286,"comment_id":136535579,"body_markdown":"@ggggxm is this resolved. Please help with solution. I&#39;m facing exactly same issue on mac","body":"@ggggxm is this resolved. Please help with solution. I&#39;m facing exactly same issue on mac"}],"owner":{"account_id":27272270,"reputation":1,"user_id":20793417,"display_name":"ggggxm"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":208,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681552827,"creation_date":1681454904,"question_id":76012286,"body_markdown":"I created a *scala* project in the *Linux IDEA* integrated environment, which requires the use of *z3solver*.\r\nI tried compiling and installing *Z3soler* using *source code*, and also tried installing the *release version* to make sure z3solver was correctly installed.\r\n\r\nHowever, when loading `libz3java.so`, the error `Exception in thread&#39; main &#39;java. lang. UnsatisfiedLinkError: no libz3java in java. library. path` occured.\r\n\r\nFirstly, I confirmed LD_LIBRARY_PATH. `libz3java` was in the path`/home/xiangmin/z3/build`\r\n```\r\n(base) xiangmin@xiangmin-HP-ZHAN-66-Pro-14-G2:~/cgra/pillarsv2/pillars$ echo $LD_LIBRARY_PATH \r\n:/opt/gurobi1000/linux64//lib:/home/xiangmin/z3/build\r\n```\r\nbut it didn&#39;t work.\r\n\r\nThen I copied libz3java to the `/usr/lib` directory, using the command\r\n\r\n`ln -s /path/to/libz3java /usr/lib` and `sudo ldconfig` ,but the error still existed.\r\n\r\nAlso,I tried `System.load(&quot;libz3java&quot;)` ,and the IDE suggested `can&#39;t load library`\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: Can&#39;t load library: /usr/lib/libz3java\r\n\tat java.lang.ClassLoader.loadLibrary(ClassLoader.java:1823)\r\n\tat java.lang.Runtime.load0(Runtime.java:782)\r\n\tat java.lang.System.load(System.java:1098)\r\n\tat tetriski.pillars.mapping.Mapping$.main(Mapping.scala:39)\r\n\tat tetriski.pillars.mapping.Mapping.main(Mapping.scala)\r\n```\r\nHere is the output of `java -XshowSettings:properties  -version 2&gt;&amp;1 | grep  library`\r\n``` \r\n    java.library.path = \r\n    sun.boot.library.path = /usr/local/java/jdk1.8.0_351/jre/lib/amd64\r\n```\r\nBut without `|grep library`,the output contains:\r\n```\r\n java.library.path = \r\n        /opt/gurobi1000/linux64//lib\r\n        /home/xiangmin/z3/build\r\n        /usr/java/packages/lib/amd64\r\n        /usr/lib64\r\n        /lib64\r\n        /lib\r\n        /usr/lib\r\n```\r\nThanks a lot for your attention!","title":"libz3java in java.library.path,but still reporting no libz3java in java.library.path","body":"<p>I created a <em>scala</em> project in the <em>Linux IDEA</em> integrated environment, which requires the use of <em>z3solver</em>.\nI tried compiling and installing <em>Z3soler</em> using <em>source code</em>, and also tried installing the <em>release version</em> to make sure z3solver was correctly installed.</p>\n<p>However, when loading <code>libz3java.so</code>, the error <code>Exception in thread' main 'java. lang. UnsatisfiedLinkError: no libz3java in java. library. path</code> occured.</p>\n<p>Firstly, I confirmed LD_LIBRARY_PATH. <code>libz3java</code> was in the path<code>/home/xiangmin/z3/build</code></p>\n<pre><code>(base) xiangmin@xiangmin-HP-ZHAN-66-Pro-14-G2:~/cgra/pillarsv2/pillars$ echo $LD_LIBRARY_PATH \n:/opt/gurobi1000/linux64//lib:/home/xiangmin/z3/build\n</code></pre>\n<p>but it didn't work.</p>\n<p>Then I copied libz3java to the <code>/usr/lib</code> directory, using the command</p>\n<p><code>ln -s /path/to/libz3java /usr/lib</code> and <code>sudo ldconfig</code> ,but the error still existed.</p>\n<p>Also,I tried <code>System.load(&quot;libz3java&quot;)</code> ,and the IDE suggested <code>can't load library</code></p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: Can't load library: /usr/lib/libz3java\n    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1823)\n    at java.lang.Runtime.load0(Runtime.java:782)\n    at java.lang.System.load(System.java:1098)\n    at tetriski.pillars.mapping.Mapping$.main(Mapping.scala:39)\n    at tetriski.pillars.mapping.Mapping.main(Mapping.scala)\n</code></pre>\n<p>Here is the output of <code>java -XshowSettings:properties  -version 2&gt;&amp;1 | grep  library</code></p>\n<pre><code>    java.library.path = \n    sun.boot.library.path = /usr/local/java/jdk1.8.0_351/jre/lib/amd64\n</code></pre>\n<p>But without <code>|grep library</code>,the output contains:</p>\n<pre><code> java.library.path = \n        /opt/gurobi1000/linux64//lib\n        /home/xiangmin/z3/build\n        /usr/java/packages/lib/amd64\n        /usr/lib64\n        /lib64\n        /lib\n        /usr/lib\n</code></pre>\n<p>Thanks a lot for your attention!</p>\n"},{"tags":["java","garbage-collection","heap-memory","heap-dump"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1681543583,"post_id":76020864,"comment_id":134076293,"body_markdown":"What&#39;s a &quot;NACACK error&quot;? 1. Yes, 2. No 3. See https://stackoverflow.com/questions/1393486/error-java-lang-outofmemoryerror-gc-overhead-limit-exceeded","body":"What&#39;s a &quot;NACACK error&quot;? 1. Yes, 2. No 3. See <a href=\"https://stackoverflow.com/questions/1393486/error-java-lang-outofmemoryerror-gc-overhead-limit-exceeded\" title=\"error java lang outofmemoryerror gc overhead limit exceeded\">stackoverflow.com/questions/1393486/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681552243,"creation_date":1681548815,"answer_id":76021257,"question_id":76020864,"body_markdown":"&gt; 1) Whether the reboot of the server with the presence of heap.dump file will clear the heap memory area entirely?\r\n\r\nThe heap will always be empty when the JVM starts / restarts.\r\n\r\nThe heap dump file is not read when a JVM starts.  Its presence or absence is not relevant.\r\n\r\n&gt; 2) Did the new error is because of the non-clearance of the previous heap.dump file?\r\n\r\nNo.  See above.\r\n\r\nThe message says that the JVM OOME&#39;d again but that the JVM wasn&#39;t willing (or able) to overwrite the existing dump file.  So you didn&#39;t get a *new* heap dump.\r\n\r\n&gt; 3) What are the possibilities to get the above error so quickly?\r\n\r\nIn general, bugs (probably in your application) or the heap is too small.  Or both.  Causes include the following:\r\n\r\n  - A buggy (or poorly designed) application can create in-memory data structures that are excessively large / use to much memory.\r\n\r\n  - A buggy application can have memory leaks, meaning that the GC is unable to reclaim objects that are no longer needed.  If your application runs for a few weeks before crashing, a memory leak should be the prime suspect.\r\n\r\n  - If you set the heap size too small for the *problem* that the application is solving, you will get OOMEs.\r\n\r\n  - If too much *time* is being spent garbage collecting you will get the &quot;GC overhead limit exceeded&quot; flavor of OOME.  This is typically a sign that the heap is *nearly* full ... and the GC is running repeatedly in a last-ditch attempt to keep the application going.  (A &quot;garbage collection death spiral&quot;.)\r\n\r\n    The *root cause* of this will most likely be one of the previous.\r\n\r\n  - Edge cases:\r\n\r\n    - If the application makes excessive or inappropriate use of finalizers, cleaners, `Reference` objects and the like, the GC&#39;s reference processing threads may not be able to keep up leading to an OOME.\r\n\r\n    - With some GC&#39;s, allocating an extremely large array can OOME because there isn&#39;t sufficient *contiguous* free space after the GC has run.\r\n\r\n    - It is possible that the heap size is too large for the host computer to handle; i.e. there is insufficient RAM and / or swap space.\r\n\r\nIt is not possible to be more specific without examining your application in detail, and looking at the heap dump and the stacktrace from the OOME.\r\n\r\nThis Q&amp;A may help, but I don&#39;t think it answers your question:\r\n\r\n  - https://stackoverflow.com/questions/1393486\r\n","title":"Whether the reboot of server with the presence of heap.dump file clears heap memory area entirely?","body":"<blockquote>\n<ol>\n<li>Whether the reboot of the server with the presence of heap.dump file will clear the heap memory area entirely?</li>\n</ol>\n</blockquote>\n<p>The heap will always be empty when the JVM starts / restarts.</p>\n<p>The heap dump file is not read when a JVM starts.  Its presence or absence is not relevant.</p>\n<blockquote>\n<ol start=\"2\">\n<li>Did the new error is because of the non-clearance of the previous heap.dump file?</li>\n</ol>\n</blockquote>\n<p>No.  See above.</p>\n<p>The message says that the JVM OOME'd again but that the JVM wasn't willing (or able) to overwrite the existing dump file.  So you didn't get a <em>new</em> heap dump.</p>\n<blockquote>\n<ol start=\"3\">\n<li>What are the possibilities to get the above error so quickly?</li>\n</ol>\n</blockquote>\n<p>In general, bugs (probably in your application) or the heap is too small.  Or both.  Causes include the following:</p>\n<ul>\n<li><p>A buggy (or poorly designed) application can create in-memory data structures that are excessively large / use to much memory.</p>\n</li>\n<li><p>A buggy application can have memory leaks, meaning that the GC is unable to reclaim objects that are no longer needed.  If your application runs for a few weeks before crashing, a memory leak should be the prime suspect.</p>\n</li>\n<li><p>If you set the heap size too small for the <em>problem</em> that the application is solving, you will get OOMEs.</p>\n</li>\n<li><p>If too much <em>time</em> is being spent garbage collecting you will get the &quot;GC overhead limit exceeded&quot; flavor of OOME.  This is typically a sign that the heap is <em>nearly</em> full ... and the GC is running repeatedly in a last-ditch attempt to keep the application going.  (A &quot;garbage collection death spiral&quot;.)</p>\n<p>The <em>root cause</em> of this will most likely be one of the previous.</p>\n</li>\n<li><p>Edge cases:</p>\n<ul>\n<li><p>If the application makes excessive or inappropriate use of finalizers, cleaners, <code>Reference</code> objects and the like, the GC's reference processing threads may not be able to keep up leading to an OOME.</p>\n</li>\n<li><p>With some GC's, allocating an extremely large array can OOME because there isn't sufficient <em>contiguous</em> free space after the GC has run.</p>\n</li>\n<li><p>It is possible that the heap size is too large for the host computer to handle; i.e. there is insufficient RAM and / or swap space.</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>It is not possible to be more specific without examining your application in detail, and looking at the heap dump and the stacktrace from the OOME.</p>\n<p>This Q&amp;A may help, but I don't think it answers your question:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1393486\">Error java.lang.OutOfMemoryError: GC overhead limit exceeded</a></li>\n</ul>\n"}],"owner":{"account_id":19469961,"reputation":91,"user_id":14242535,"display_name":"Learner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681552243,"creation_date":1681543014,"question_id":76020864,"body_markdown":"Our Java Application is working fine on RHEL 8.5 OS platform. In our application, we have provided enough heap space which is &quot;*2048m*&quot;. Even though, we encountered a heap.dump file on Jan 2023. We analyzed the heap.dump file and found that it was a NACACK error. \r\n\r\nPost that, without deleting the heap.dump file, we just rebooted the server and our application starts to work fine. Within a few weeks, we ended up with another problem, \r\n\r\n```\r\njava.lang.OutOfMemoryError: GC overhead limit exceeded\r\nDumping heap to /XYZ/jboss/server/log/heap.dump ...\r\nUnable to create /XYZ/jboss/server/log/heap.dump: File exists.\r\n```\r\n\r\n\r\nPlease find the below queries,\r\n\r\n1) Whether the reboot of the server with the presence of heap.dump file will clear the heap memory area entirely?\r\n2) Did the new error is because of the non-clearance of the previous heap.dump file?\r\n3) What are the possibilities to get the above error so quickly?\r\n\r\n\r\nThanks.","title":"Whether the reboot of server with the presence of heap.dump file clears heap memory area entirely?","body":"<p>Our Java Application is working fine on RHEL 8.5 OS platform. In our application, we have provided enough heap space which is &quot;<em>2048m</em>&quot;. Even though, we encountered a heap.dump file on Jan 2023. We analyzed the heap.dump file and found that it was a NACACK error.</p>\n<p>Post that, without deleting the heap.dump file, we just rebooted the server and our application starts to work fine. Within a few weeks, we ended up with another problem,</p>\n<pre><code>java.lang.OutOfMemoryError: GC overhead limit exceeded\nDumping heap to /XYZ/jboss/server/log/heap.dump ...\nUnable to create /XYZ/jboss/server/log/heap.dump: File exists.\n</code></pre>\n<p>Please find the below queries,</p>\n<ol>\n<li>Whether the reboot of the server with the presence of heap.dump file will clear the heap memory area entirely?</li>\n<li>Did the new error is because of the non-clearance of the previous heap.dump file?</li>\n<li>What are the possibilities to get the above error so quickly?</li>\n</ol>\n<p>Thanks.</p>\n"},{"tags":["java","properties","sections"],"comments":[{"owner":{"account_id":1387,"reputation":32183,"user_id":1853,"accept_rate":94,"display_name":"serg10"},"score":0,"creation_date":1253893807,"post_id":1478091,"comment_id":1328240,"body_markdown":"If you have the properties file loaded as a string, could you use a regex?  Or am I missing something?","body":"If you have the properties file loaded as a string, could you use a regex?  Or am I missing something?"},{"owner":{"account_id":30670,"reputation":18662,"user_id":83741,"accept_rate":67,"display_name":"Alexander Torstling"},"score":0,"creation_date":1253893818,"post_id":1478091,"comment_id":1328241,"body_markdown":"You don&#39;t specify how you parse the file, are you using Properties.load() or are you parsing it yourself?","body":"You don&#39;t specify how you parse the file, are you using Properties.load() or are you parsing it yourself?"},{"owner":{"account_id":9921,"reputation":107684,"user_id":18511,"accept_rate":92,"display_name":"Kip"},"score":0,"creation_date":1253893832,"post_id":1478091,"comment_id":1328245,"body_markdown":"you&#39;re not parsing the properties file yourself are you?","body":"you&#39;re not parsing the properties file yourself are you?"}],"answers":[{"tags":[],"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1253893789,"creation_date":1253893789,"answer_id":1478116,"question_id":1478091,"body_markdown":"Does [`Properties.getProperty(String key)`][1] not do what you want?\r\n\r\nAre you trying to retrieve all values whose key starts with a given string?\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Properties.html#getProperty(java.lang.String)","title":"How to jump to a section in a Java properties file?","body":"<p>Does <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Properties.html#getProperty(java.lang.String)\" rel=\"nofollow noreferrer\"><code>Properties.getProperty(String key)</code></a> not do what you want?</p>\n\n<p>Are you trying to retrieve all values whose key starts with a given string?</p>\n"},{"tags":[],"owner":{"account_id":8537,"reputation":40691,"user_id":15459,"accept_rate":70,"display_name":"PhiLho"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1253894222,"creation_date":1253893849,"answer_id":1478124,"question_id":1478091,"body_markdown":"No.\r\n\r\nMmm, I need at least 15 chars to post... So let&#39;s expand on the answer.\r\n\r\nI don&#39;t see the problem. Java has no magical way to guess where your information is. And unless the file is weighting several megabytes, loading it whole (as Properties does, or so I think), and perhaps eliminating data you don&#39;t need (from the generated hash table), shouldn&#39;t take that much time. At worse, if memory is an issue, parse it manually line per line, shouldn&#39;t be hard and should be still quite fast.\r\n\r\nIf memory isn&#39;t the problem, looping with the enumeration provided by propertyNames() and checking that the keys startWith() the given string shouldn&#39;t take much time either.","title":"How to jump to a section in a Java properties file?","body":"<p>No.</p>\n\n<p>Mmm, I need at least 15 chars to post... So let's expand on the answer.</p>\n\n<p>I don't see the problem. Java has no magical way to guess where your information is. And unless the file is weighting several megabytes, loading it whole (as Properties does, or so I think), and perhaps eliminating data you don't need (from the generated hash table), shouldn't take that much time. At worse, if memory is an issue, parse it manually line per line, shouldn't be hard and should be still quite fast.</p>\n\n<p>If memory isn't the problem, looping with the enumeration provided by propertyNames() and checking that the keys startWith() the given string shouldn't take much time either.</p>\n"},{"tags":[],"owner":{"account_id":48455,"reputation":57218,"user_id":143972,"accept_rate":100,"display_name":"Zed"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1510121273,"creation_date":1253893882,"answer_id":1478127,"question_id":1478091,"body_markdown":"You should load the properties, and then you can get the value by its key:\r\n\r\n    Properties props = new Properties();\r\n    props.load(new FileInputStream(&quot;my.properties&quot;));\r\n    \r\n    props.getProperty(&quot;ui.outputtype.snapshot&quot;);","title":"How to jump to a section in a Java properties file?","body":"<p>You should load the properties, and then you can get the value by its key:</p>\n\n<pre><code>Properties props = new Properties();\nprops.load(new FileInputStream(\"my.properties\"));\n\nprops.getProperty(\"ui.outputtype.snapshot\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9320,"reputation":159784,"user_id":17172,"display_name":"coobird"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1253895964,"creation_date":1253894285,"answer_id":1478165,"question_id":1478091,"body_markdown":"Since there is no concept of a *section* in the [`Properties`][1] class, one would have to come up with some way to find the *section* of the property file which is wanted.\r\n\r\nOne possible approach would be to obtain the [`Set`][2] of keys, and find the ones which contains the prefix which is wanted.\r\n\r\nThis would be like applying a filter on the keys of the property and picking out the keys which are desired. In this case, we can think of the *prefix* as being the dot-separated entry in the property file.\r\n\r\nHere&#39;s a little sample code to demonstrate the overall idea:\r\n\r\n    Properties p = new Properties();\r\n    p.put(&quot;hello.world&quot;, &quot;42&quot;);\r\n    p.put(&quot;hello.earth&quot;, &quot;1&quot;);\r\n    p.put(&quot;abc.def&quot;, &quot;3&quot;);\r\n    p.put(&quot;def.ghi&quot;, &quot;5&quot;);\r\n    \r\n    // Go through the keys in the property.\r\n    for (Object propKey : p.keySet()) {\r\n      String key = (String)propKey;\r\n\r\n      // Select the keys with the prefix &quot;hello.&quot;\r\n      if (key.startsWith(&quot;hello.&quot;)) {\r\n        System.out.println(key + &quot;, &quot; + p.getProperty(key));\r\n      }\r\n    }\r\n\r\n(The code is not very pleasant because `Properies` is not genericized.)\r\n\r\nOutput:\r\n\r\n    hello.world, 42\r\n    hello.earth, 1\r\n\r\nIn the example above, the one did not load the entries from the an external properties file, but that can be achieved trivially using the [`Properties.load`][3] method, as previously mentioned in the other answers.\r\n\r\n----\r\n\r\nA little bit of a different approach, where the keys are filtered by the desired prefix, then the information can be read through a simple `for` loop.\r\n\r\nHere&#39;s an example using the [`Collections2.filter`][4] method from the [Google Collections][5], which can filter a [`Collection`][6] by a certain [`Predicate`][7]. The filtered result (keys which have the desired prefix) is given to the `for` loop in order to obtain the key and value pair:\r\n\r\n    Properties p = new Properties();\r\n    p.put(&quot;hello.world&quot;, &quot;42&quot;);\r\n    p.put(&quot;hello.earth&quot;, &quot;1&quot;);\r\n    p.put(&quot;abc.def&quot;, &quot;3&quot;);\r\n    p.put(&quot;def.ghi&quot;, &quot;5&quot;);\r\n    \r\n    for (Object propKey : Collections2.filter(p.keySet(), new Predicate&lt;Object&gt;() {\r\n      public boolean apply(Object o) {\r\n        return ((String)o).startsWith(&quot;hello.&quot;);\r\n      }\r\n    }))\r\n    {\r\n      String key = (String) propKey;\r\n      System.out.println(key + &quot;, &quot; + p.getProperty(key));\r\n    }\r\n\r\nThis may be a little bit overkill, but it&#39;s another approach to implementing a filter to narrow down the properties with the desired keys.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Properties.html\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/util/Set.html\r\n  [3]: http://java.sun.com/javase/6/docs/api/java/util/Properties.html#load(java.io.InputStream)\r\n  [4]: http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Collections2.html#filter(java.util.Collection,%20com.google.common.base.Predicate)\r\n  [5]: http://code.google.com/p/google-collections/\r\n  [6]: http://java.sun.com/javase/6/docs/api/java/util/Collection.html?is-external=true\r\n  [7]: http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/base/Predicate.html","title":"How to jump to a section in a Java properties file?","body":"<p>Since there is no concept of a <em>section</em> in the <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Properties.html\" rel=\"nofollow noreferrer\"><code>Properties</code></a> class, one would have to come up with some way to find the <em>section</em> of the property file which is wanted.</p>\n\n<p>One possible approach would be to obtain the <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Set.html\" rel=\"nofollow noreferrer\"><code>Set</code></a> of keys, and find the ones which contains the prefix which is wanted.</p>\n\n<p>This would be like applying a filter on the keys of the property and picking out the keys which are desired. In this case, we can think of the <em>prefix</em> as being the dot-separated entry in the property file.</p>\n\n<p>Here's a little sample code to demonstrate the overall idea:</p>\n\n<pre><code>Properties p = new Properties();\np.put(\"hello.world\", \"42\");\np.put(\"hello.earth\", \"1\");\np.put(\"abc.def\", \"3\");\np.put(\"def.ghi\", \"5\");\n\n// Go through the keys in the property.\nfor (Object propKey : p.keySet()) {\n  String key = (String)propKey;\n\n  // Select the keys with the prefix \"hello.\"\n  if (key.startsWith(\"hello.\")) {\n    System.out.println(key + \", \" + p.getProperty(key));\n  }\n}\n</code></pre>\n\n<p>(The code is not very pleasant because <code>Properies</code> is not genericized.)</p>\n\n<p>Output:</p>\n\n<pre><code>hello.world, 42\nhello.earth, 1\n</code></pre>\n\n<p>In the example above, the one did not load the entries from the an external properties file, but that can be achieved trivially using the <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Properties.html#load(java.io.InputStream)\" rel=\"nofollow noreferrer\"><code>Properties.load</code></a> method, as previously mentioned in the other answers.</p>\n\n<hr>\n\n<p>A little bit of a different approach, where the keys are filtered by the desired prefix, then the information can be read through a simple <code>for</code> loop.</p>\n\n<p>Here's an example using the <a href=\"http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Collections2.html#filter(java.util.Collection,%20com.google.common.base.Predicate)\" rel=\"nofollow noreferrer\"><code>Collections2.filter</code></a> method from the <a href=\"http://code.google.com/p/google-collections/\" rel=\"nofollow noreferrer\">Google Collections</a>, which can filter a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Collection.html?is-external=true\" rel=\"nofollow noreferrer\"><code>Collection</code></a> by a certain <a href=\"http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/base/Predicate.html\" rel=\"nofollow noreferrer\"><code>Predicate</code></a>. The filtered result (keys which have the desired prefix) is given to the <code>for</code> loop in order to obtain the key and value pair:</p>\n\n<pre><code>Properties p = new Properties();\np.put(\"hello.world\", \"42\");\np.put(\"hello.earth\", \"1\");\np.put(\"abc.def\", \"3\");\np.put(\"def.ghi\", \"5\");\n\nfor (Object propKey : Collections2.filter(p.keySet(), new Predicate&lt;Object&gt;() {\n  public boolean apply(Object o) {\n    return ((String)o).startsWith(\"hello.\");\n  }\n}))\n{\n  String key = (String) propKey;\n  System.out.println(key + \", \" + p.getProperty(key));\n}\n</code></pre>\n\n<p>This may be a little bit overkill, but it's another approach to implementing a filter to narrow down the properties with the desired keys.</p>\n"},{"tags":[],"owner":{"account_id":38490,"reputation":8552,"user_id":110478,"accept_rate":63,"display_name":"Pablojim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1253911749,"creation_date":1253911749,"answer_id":1479510,"question_id":1478091,"body_markdown":"This is a strange requirement. If you are worried about performance then do this before when packaging not at runtime. \r\n\r\nA simple:\r\n\r\n    cat settings.properties | grep ui.outputtype &gt; mysmaller.properties\r\n\r\nshould suffice!","title":"How to jump to a section in a Java properties file?","body":"<p>This is a strange requirement. If you are worried about performance then do this before when packaging not at runtime. </p>\n\n<p>A simple:</p>\n\n<pre><code>cat settings.properties | grep ui.outputtype &gt; mysmaller.properties\n</code></pre>\n\n<p>should suffice!</p>\n"},{"tags":[],"owner":{"account_id":879724,"reputation":101,"user_id":175385,"display_name":"nathj07"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681552062,"creation_date":1254298317,"answer_id":1496735,"question_id":1478091,"body_markdown":"Basically I have &#39;sections&#39; in my properties file which was developed by a colleague, I was thinking of one file per &#39;section&#39;.  \r\n\r\nAnyway, my understanding of how this all works is growing nicely and the solution I came up with was:\r\n\r\n    for (String key : props.stringPropertyNames()) {\r\n\t\t// Jump to the relevant section of a properties file\r\n\t\tif (key.contains(&quot;datamode&quot;)) {\r\n\t\t\tOptionItem oi = new OptionItem(key, props.getProperty(key));\r\n\t\t\t// String value = props.getProperty(key);\r\n\t\t\tthis.cbo_mode.add(oi);\r\n\t\t}\r\n\t}","title":"How to jump to a section in a Java properties file?","body":"<p>Basically I have 'sections' in my properties file which was developed by a colleague, I was thinking of one file per 'section'.</p>\n<p>Anyway, my understanding of how this all works is growing nicely and the solution I came up with was:</p>\n<pre><code>for (String key : props.stringPropertyNames()) {\n    // Jump to the relevant section of a properties file\n    if (key.contains(&quot;datamode&quot;)) {\n        OptionItem oi = new OptionItem(key, props.getProperty(key));\n        // String value = props.getProperty(key);\n        this.cbo_mode.add(oi);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":431307,"reputation":21,"user_id":815273,"display_name":"dmn"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1366717289,"creation_date":1309002448,"answer_id":6477527,"question_id":1478091,"body_markdown":"You can override Java Properties class to achieve section handling in properties file:\r\n\r\n    @Override\r\n    public synchronized Object put(Object key, Object value) {\r\n        String sKey = key.toString();\r\n        if (sKey.startsWith(&quot;[&quot;) &amp;&amp; sKey.endsWith(&quot;]&quot;))\r\n\r\nFull example is here: &lt;a href=&quot;http://devsite.pl/blog.2011-06-25.java_ini_sections.html&quot;&gt;http://devsite.pl/blog.2011-06-25.java_ini_sections.html&lt;/a&gt;","title":"How to jump to a section in a Java properties file?","body":"<p>You can override Java Properties class to achieve section handling in properties file:</p>\n\n<pre><code>@Override\npublic synchronized Object put(Object key, Object value) {\n    String sKey = key.toString();\n    if (sKey.startsWith(\"[\") &amp;&amp; sKey.endsWith(\"]\"))\n</code></pre>\n\n<p>Full example is here: <a href=\"http://devsite.pl/blog.2011-06-25.java_ini_sections.html\" rel=\"nofollow\"><a href=\"http://devsite.pl/blog.2011-06-25.java_ini_sections.html\" rel=\"nofollow\">http://devsite.pl/blog.2011-06-25.java_ini_sections.html</a></a></p>\n"}],"owner":{"account_id":879724,"reputation":101,"user_id":175385,"display_name":"nathj07"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9975,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":7,"score":2,"last_activity_date":1681552062,"creation_date":1253893533,"question_id":1478091,"body_markdown":"I have a Java properties file that has lots of different properties in it for different things:\r\n\r\n    ui.datasource.st.name=MyTest\r\n    ui.datasource.st.port=111\r\n    ui.datasource.st.ip=1.1.1.1\r\n    ui.outputtype.snapshot=Snapshot\r\n    ui.outputtype.spreadsheet=Spreadsheet - xls\r\n\r\nThe file is a lot bigger than this.\r\n\r\nI want to jump to the **ui.outputtype** section without looping through the file and checking the key value.\r\n\r\nIs there a way to do this?","title":"How to jump to a section in a Java properties file?","body":"<p>I have a Java properties file that has lots of different properties in it for different things:</p>\n<pre><code>ui.datasource.st.name=MyTest\nui.datasource.st.port=111\nui.datasource.st.ip=1.1.1.1\nui.outputtype.snapshot=Snapshot\nui.outputtype.spreadsheet=Spreadsheet - xls\n</code></pre>\n<p>The file is a lot bigger than this.</p>\n<p>I want to jump to the <strong>ui.outputtype</strong> section without looping through the file and checking the key value.</p>\n<p>Is there a way to do this?</p>\n"},{"tags":["java","spring","dto"],"answers":[{"comments":[{"owner":{"account_id":12643497,"reputation":72,"user_id":9190107,"display_name":"Lecram"},"score":1,"creation_date":1681548788,"post_id":76021210,"comment_id":134076854,"body_markdown":"I&#39;ve already created a dummy object that implements the interface `ConditionDto` so it can be instantiated. Looks like that would be a solution that works.","body":"I&#39;ve already created a dummy object that implements the interface <code>ConditionDto</code> so it can be instantiated. Looks like that would be a solution that works."}],"tags":[],"owner":{"account_id":6528825,"reputation":21455,"user_id":5050667,"accept_rate":91,"display_name":"Yassin Hajaj"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681551850,"creation_date":1681548232,"answer_id":76021210,"question_id":76021125,"body_markdown":"What you can do is write your own [HttpMessageConverter][1] and create new anonymous instances of your interface in there (basically deserializing the JSON manually and putting the corresponding fields in the getters). But I wouldn&#39;t recommend it.\r\n\r\nInstead, ask yourself : why is this Dto an interface ? In the case of a projection it makes sense, but projections are meant to be **_read_**, not written.\r\n\r\nSo it seems you have two solutions\r\n\r\n* Either create a new object, which wouldn&#39;t be a projection but an actual object used for write (HTTP POST) purposes. Using the right semantics wouldn&#39;t be difficult here.\r\n* Extend your interface with a dummy object which would be used only for deserialization purposes of write (HTTP POST) queries.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#rest-message-conversion","title":"Spring DTO: Cannot construct instance of &lt;DTO interface&gt;","body":"<p>What you can do is write your own <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#rest-message-conversion\" rel=\"nofollow noreferrer\">HttpMessageConverter</a> and create new anonymous instances of your interface in there (basically deserializing the JSON manually and putting the corresponding fields in the getters). But I wouldn't recommend it.</p>\n<p>Instead, ask yourself : why is this Dto an interface ? In the case of a projection it makes sense, but projections are meant to be <strong><em>read</em></strong>, not written.</p>\n<p>So it seems you have two solutions</p>\n<ul>\n<li>Either create a new object, which wouldn't be a projection but an actual object used for write (HTTP POST) purposes. Using the right semantics wouldn't be difficult here.</li>\n<li>Extend your interface with a dummy object which would be used only for deserialization purposes of write (HTTP POST) queries.</li>\n</ul>\n"}],"owner":{"account_id":12643497,"reputation":72,"user_id":9190107,"display_name":"Lecram"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":543,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76021210,"answer_count":1,"score":1,"last_activity_date":1681551850,"creation_date":1681547129,"question_id":76021125,"body_markdown":"I&#39;m working with DTOs in Spring and facing an issue with the use of an [interface-based projection DTO][1] while deserialization in the @RequestBody of a method of the `Controller` class.\r\n\r\nIt looks like that the use of projection based DTOs only works in one direction. Getting a DTO from the repository is pretty easy and handy:\r\n\r\n&lt;!-- language: java --&gt;\r\n    public interface ConditionRepository extends JpaRepository&lt;Condition, Long&gt; {\r\n\r\n        @Query(&quot;SELECT c FROM Condition c WHERE c.controller.id = ?1&quot;)\r\n        List&lt;ConditionDto&gt; findAllByControllerId(Long controllerId);\r\n\r\n    }\r\n\r\nBut if Spring tries to deserialize the same projection based DTO `ConditionDto` in the Controller class\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @RequestMapping(value = &quot;/{id}/conditions&quot;, produces = MediaType.APPLICATION_JSON_VALUE, method = RequestMethod.PUT)\r\n    public ResponseEntity&lt;List&lt;ConditionResult&gt;&gt; putConditions(@RequestBody List&lt;ConditionDto&gt; conditionList, @PathVariable(&quot;id&quot;) Long controllerId) {\r\n\t\tSystem.out.print(&quot;conditionList: &quot;);\r\n\t\tSystem.out.println(conditionList);\r\n\t\treturn null;\r\n\t}\r\n\r\nit throws an error:\r\n\r\n&lt;!-- language: log4j --&gt;\r\n\r\n    Type definition error: [simple type, class dev.smarthome.weatherstation.condition.dto.ConditionDto];\r\n    nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException:\r\n    Cannot construct instance of `dev.smarthome.weatherstation.condition.dto.ConditionDto` \r\n    (no Creators, like default constructor, exist): abstract types either need to be mapped to concrete types,\r\n    have custom deserializer, or contain additional type information\r\n\r\nThe error makes sense in that way that the DTO is an interface so Spring can not instantiate it.\r\n\r\nWhat would be a good solution? Do I have to convert my implementation from projection based DTO to a class DTO so it can instantiate the DTO? Or did I forget something?\r\n\r\nThanks in advance for your help!\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-data-jpa-projections#interface-based-projections","title":"Spring DTO: Cannot construct instance of &lt;DTO interface&gt;","body":"<p>I'm working with DTOs in Spring and facing an issue with the use of an <a href=\"https://www.baeldung.com/spring-data-jpa-projections#interface-based-projections\" rel=\"nofollow noreferrer\">interface-based projection DTO</a> while deserialization in the @RequestBody of a method of the <code>Controller</code> class.</p>\n<p>It looks like that the use of projection based DTOs only works in one direction. Getting a DTO from the repository is pretty easy and handy:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface ConditionRepository extends JpaRepository&lt;Condition, Long&gt; {\n\n    @Query(&quot;SELECT c FROM Condition c WHERE c.controller.id = ?1&quot;)\n    List&lt;ConditionDto&gt; findAllByControllerId(Long controllerId);\n\n}\n</code></pre>\n<p>But if Spring tries to deserialize the same projection based DTO <code>ConditionDto</code> in the Controller class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value = &quot;/{id}/conditions&quot;, produces = MediaType.APPLICATION_JSON_VALUE, method = RequestMethod.PUT)\npublic ResponseEntity&lt;List&lt;ConditionResult&gt;&gt; putConditions(@RequestBody List&lt;ConditionDto&gt; conditionList, @PathVariable(&quot;id&quot;) Long controllerId) {\n    System.out.print(&quot;conditionList: &quot;);\n    System.out.println(conditionList);\n    return null;\n}\n</code></pre>\n<p>it throws an error:</p>\n<pre><code>Type definition error: [simple type, class dev.smarthome.weatherstation.condition.dto.ConditionDto];\nnested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException:\nCannot construct instance of `dev.smarthome.weatherstation.condition.dto.ConditionDto` \n(no Creators, like default constructor, exist): abstract types either need to be mapped to concrete types,\nhave custom deserializer, or contain additional type information\n</code></pre>\n<p>The error makes sense in that way that the DTO is an interface so Spring can not instantiate it.</p>\n<p>What would be a good solution? Do I have to convert my implementation from projection based DTO to a class DTO so it can instantiate the DTO? Or did I forget something?</p>\n<p>Thanks in advance for your help!</p>\n"},{"tags":["java","spring","spring-boot","exception"],"comments":[{"owner":{"account_id":17813818,"reputation":1473,"user_id":12937828,"display_name":"Aman Singh Rajpoot"},"score":0,"creation_date":1649843352,"post_id":71855296,"comment_id":126976417,"body_markdown":"Maybe this could help https://stackoverflow.com/questions/21193380/get-requestbody-and-responsebody-at-handlerinterceptor","body":"Maybe this could help <a href=\"https://stackoverflow.com/questions/21193380/get-requestbody-and-responsebody-at-handlerinterceptor\" title=\"get requestbody and responsebody at handlerinterceptor\">stackoverflow.com/questions/21193380/&hellip;</a>"},{"owner":{"display_name":"user16156784"},"score":0,"creation_date":1649844183,"post_id":71855296,"comment_id":126976752,"body_markdown":"This link can help you out with this I guess https://stackoverflow.com/a/46046430/16156784","body":"This link can help you out with this I guess <a href=\"https://stackoverflow.com/a/46046430/16156784\">stackoverflow.com/a/46046430/16156784</a>"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649849867,"post_id":71855296,"comment_id":126978950,"body_markdown":"A request body can only be consumed once, if you want to read it multiple times, you need to think about that. You need a filter that will map the request with a request that allows the body to be read multiple times (like the `ContentCachingRequestWrapper` in Spring). If you have that, you can just add the `HttpServletRequest` and read the body again. Ifyou don&#39;t, you won&#39;t have a way of reading it again.","body":"A request body can only be consumed once, if you want to read it multiple times, you need to think about that. You need a filter that will map the request with a request that allows the body to be read multiple times (like the <code>ContentCachingRequestWrapper</code> in Spring). If you have that, you can just add the <code>HttpServletRequest</code> and read the body again. Ifyou don&#39;t, you won&#39;t have a way of reading it again."},{"owner":{"account_id":14226631,"reputation":23,"user_id":10277144,"display_name":"Diego Victor"},"score":0,"creation_date":1649858250,"post_id":71855296,"comment_id":126982444,"body_markdown":"@M.Deinum thank you. I tried to use ContentCachingRequestWrapper, But I could not have acess to body content. The method contentCachingRequestWrapper.getContentAsByteArray() returns null.","body":"@M.Deinum thank you. I tried to use ContentCachingRequestWrapper, But I could not have acess to body content. The method contentCachingRequestWrapper.getContentAsByteArray() returns null."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649859336,"post_id":71855296,"comment_id":126982954,"body_markdown":"Ofcourse it returns `null` at that position as nothing has been read yet. It will only have content **after** things have been read through the inputstream.","body":"Ofcourse it returns <code>null</code> at that position as nothing has been read yet. It will only have content <b>after</b> things have been read through the inputstream."},{"owner":{"account_id":14226631,"reputation":23,"user_id":10277144,"display_name":"Diego Victor"},"score":0,"creation_date":1649860117,"post_id":71855296,"comment_id":126983340,"body_markdown":"@M.Deinum how can I guarantee that things have been read in that part in order to log body data?","body":"@M.Deinum how can I guarantee that things have been read in that part in order to log body data?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649860829,"post_id":71855296,"comment_id":126983646,"body_markdown":"You just need to get the inputstream and read it. Also where did I say you need to write/log it in the filter. You need to wrap it so you can read it again in your exception handler, that is what you were trying to achieve.","body":"You just need to get the inputstream and read it. Also where did I say you need to write/log it in the filter. You need to wrap it so you can read it again in your exception handler, that is what you were trying to achieve."},{"owner":{"account_id":14226631,"reputation":23,"user_id":10277144,"display_name":"Diego Victor"},"score":0,"creation_date":1649862602,"post_id":71855296,"comment_id":126984413,"body_markdown":"Yeah. I will get the data I want and store them in a LogginContext. In the exception handler, I will get the values in LogginContext. So, to get  the body data, I just need to do: httpRequest.getInputStream() ?","body":"Yeah. I will get the data I want and store them in a LogginContext. In the exception handler, I will get the values in LogginContext. So, to get  the body data, I just need to do: httpRequest.getInputStream() ?"},{"owner":{"account_id":13239720,"reputation":112,"user_id":9560693,"display_name":"Yehouda"},"score":0,"creation_date":1671195299,"post_id":71855296,"comment_id":132052252,"body_markdown":"I solved this problem with this answer [https://stackoverflow.com/a/74705186/9560693]","body":"I solved this problem with this answer [<a href=\"https://stackoverflow.com/a/74705186/9560693]\">stackoverflow.com/a/74705186/9560693]</a>"}],"answers":[{"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649849793,"post_id":71856700,"comment_id":126978921,"body_markdown":"That doesn&#39;t get you the body, that gets you the resulting object, which in case of an error might not even exist... So that solution won&#39;t work.","body":"That doesn&#39;t get you the body, that gets you the resulting object, which in case of an error might not even exist... So that solution won&#39;t work."},{"owner":{"account_id":14226631,"reputation":23,"user_id":10277144,"display_name":"Diego Victor"},"score":0,"creation_date":1649855589,"post_id":71856700,"comment_id":126981218,"body_markdown":"That&#39;s true. In case of a MethodArgumentNotValidException, the request body object would not be constructed. In this scenario, you will not be able to have the object annotated with @RequestBody","body":"That&#39;s true. In case of a MethodArgumentNotValidException, the request body object would not be constructed. In this scenario, you will not be able to have the object annotated with @RequestBody"}],"tags":[],"owner":{"account_id":24300372,"reputation":11,"user_id":18243955,"display_name":"Imagica"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649849147,"creation_date":1649849147,"answer_id":71856700,"question_id":71855296,"body_markdown":"RequestBody and ResponseBody can be read-only once so other ways to achieve the body in the exception handler \r\n[ Visit here](https://stackoverflow.com/a/46046430/18243955)\r\n","title":"How can I get a body data from the request in an ExceptionHandler in Spring Boot?","body":"<p>RequestBody and ResponseBody can be read-only once so other ways to achieve the body in the exception handler\n<a href=\"https://stackoverflow.com/a/46046430/18243955\"> Visit here</a></p>\n"},{"comments":[{"owner":{"account_id":14226631,"reputation":23,"user_id":10277144,"display_name":"Diego Victor"},"score":0,"creation_date":1650290986,"post_id":71861915,"comment_id":127074317,"body_markdown":"Thank you! It is what I was looking for","body":"Thank you! It is what I was looking for"}],"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1649872505,"creation_date":1649872505,"answer_id":71861915,"question_id":71855296,"body_markdown":"The comments regarding using the `ContentCachingRequestWrapper` are accurate, this is the implementation using your controller advice that should work.\r\n\r\n    @Component\r\n    public class MyFilter implements Filter {\r\n      @Override\r\n      public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)\r\n      throws IOException, ServletException {\r\n         ContentCachingRequestWrapper contentCachingRequestWrapper = new ContentCachingRequestWrapper(\r\n        (HttpServletRequest) servletRequest);\r\n\r\n         filterChain.doFilter(contentCachingRequestWrapper, servletResponse);\r\n      }\r\n    }\r\n\r\nThe advice\r\n\r\n    @RestControllerAdvice\r\n    public class CustomExceptionHandler extends ResponseEntityExceptionHandler {\r\n\r\n      @Override\r\n      protected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex, HttpHeaders headers,\r\n      HttpStatus status, WebRequest request) {\r\n\r\n        ContentCachingRequestWrapper nativeRequest = (ContentCachingRequestWrapper) ((ServletWebRequest) request).getNativeRequest();\r\n        String requestEntityAsString = new String(nativeRequest.getContentAsByteArray());\r\n\r\n        log.debug(requestEntityAsString);\r\n\r\n        return super.handleMethodArgumentNotValid(ex, headers, status, request);\r\n      }\r\n    }\r\n","title":"How can I get a body data from the request in an ExceptionHandler in Spring Boot?","body":"<p>The comments regarding using the <code>ContentCachingRequestWrapper</code> are accurate, this is the implementation using your controller advice that should work.</p>\n<pre><code>@Component\npublic class MyFilter implements Filter {\n  @Override\n  public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)\n  throws IOException, ServletException {\n     ContentCachingRequestWrapper contentCachingRequestWrapper = new ContentCachingRequestWrapper(\n    (HttpServletRequest) servletRequest);\n\n     filterChain.doFilter(contentCachingRequestWrapper, servletResponse);\n  }\n}\n</code></pre>\n<p>The advice</p>\n<pre><code>@RestControllerAdvice\npublic class CustomExceptionHandler extends ResponseEntityExceptionHandler {\n\n  @Override\n  protected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex, HttpHeaders headers,\n  HttpStatus status, WebRequest request) {\n\n    ContentCachingRequestWrapper nativeRequest = (ContentCachingRequestWrapper) ((ServletWebRequest) request).getNativeRequest();\n    String requestEntityAsString = new String(nativeRequest.getContentAsByteArray());\n\n    log.debug(requestEntityAsString);\n\n    return super.handleMethodArgumentNotValid(ex, headers, status, request);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19136672,"reputation":31,"user_id":13977526,"display_name":"Asror"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681551445,"creation_date":1681551445,"answer_id":76021440,"question_id":71855296,"body_markdown":"Try this code:\r\n\r\n\r\n\r\n\r\n\r\n\r\n \r\n\r\n    @RestControllerAdvice\r\n    @Component\r\n    public class CustomExceptionHandler {\r\n    \r\n        @ExceptionHandler(HttpMessageNotReadableException.class)\r\n        @ResponseBody\r\n        @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n        public Object handleRequestBodyException(HttpMessageNotReadableException ex, HttpServletRequest request) {\r\n            Map&lt;String, Object&gt; responseBody = new LinkedHashMap&lt;&gt;();\r\n            responseBody.put(&quot;timestamp&quot;, new Date());\r\n            responseBody.put(&quot;status&quot;, HttpStatus.BAD_REQUEST.value());\r\n            responseBody.put(&quot;error&quot;, ex.getMessage());\r\n            responseBody.put(&quot;path&quot;, request.getServletPath());\r\n            return responseBody;\r\n        }\r\n    }","title":"How can I get a body data from the request in an ExceptionHandler in Spring Boot?","body":"<p>Try this code:</p>\n<pre><code>@RestControllerAdvice\n@Component\npublic class CustomExceptionHandler {\n\n    @ExceptionHandler(HttpMessageNotReadableException.class)\n    @ResponseBody\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\n    public Object handleRequestBodyException(HttpMessageNotReadableException ex, HttpServletRequest request) {\n        Map&lt;String, Object&gt; responseBody = new LinkedHashMap&lt;&gt;();\n        responseBody.put(&quot;timestamp&quot;, new Date());\n        responseBody.put(&quot;status&quot;, HttpStatus.BAD_REQUEST.value());\n        responseBody.put(&quot;error&quot;, ex.getMessage());\n        responseBody.put(&quot;path&quot;, request.getServletPath());\n        return responseBody;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":14226631,"reputation":23,"user_id":10277144,"display_name":"Diego Victor"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9033,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71861915,"answer_count":3,"score":1,"last_activity_date":1681551445,"creation_date":1649843024,"question_id":71855296,"body_markdown":"I have a @RestControllerAdvice where I handle an Exception in Spring Boot. I would like to log an information that is sent through request body. How can I get this information from a spring WebRequest?\r\n\r\nThis is my sample exception handler.\r\n\r\n    @RestControllerAdvice\r\n    public class CustomExceptionHandler extends ResponseEntityExceptionHandler {\r\n\r\n    @Override\r\n    protected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex,\r\n            HttpHeaders headers, HttpStatus status, WebRequest request) {\r\n\r\n        // I want to add something here that I could log an info that is in the request body.\r\n        return super.handleMethodArgumentNotValid(ex, headers, status, request);\r\n    }\r\n}\r\n\r\n@M.Deinum I tried to use ContentCachingRequestWrapper, But I could not have acess to body content. The method contentCachingRequestWrapper.getContentAsByteArray() returns null. \r\n\r\n    @Override\r\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\r\n          throws IOException, ServletException {\r\n\r\n        try {\r\n            ContentCachingRequestWrapper wrappedRequest = new ContentCachingRequestWrapper((HttpServletRequest) request);\r\n            wrappedRequest.getContentAsByteArray();\r\n            wrappedRequest.getInputStream();\r\n            chain.doFilter(wrappedRequest, response);\r\n        } finally {\r\n            LoggingContext.clear();\r\n        }\r\n","title":"How can I get a body data from the request in an ExceptionHandler in Spring Boot?","body":"<p>I have a @RestControllerAdvice where I handle an Exception in Spring Boot. I would like to log an information that is sent through request body. How can I get this information from a spring WebRequest?</p>\n<p>This is my sample exception handler.</p>\n<pre><code>@RestControllerAdvice\npublic class CustomExceptionHandler extends ResponseEntityExceptionHandler {\n\n@Override\nprotected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex,\n        HttpHeaders headers, HttpStatus status, WebRequest request) {\n\n    // I want to add something here that I could log an info that is in the request body.\n    return super.handleMethodArgumentNotValid(ex, headers, status, request);\n}\n</code></pre>\n<p>}</p>\n<p>@M.Deinum I tried to use ContentCachingRequestWrapper, But I could not have acess to body content. The method contentCachingRequestWrapper.getContentAsByteArray() returns null.</p>\n<pre><code>@Override\npublic void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n      throws IOException, ServletException {\n\n    try {\n        ContentCachingRequestWrapper wrappedRequest = new ContentCachingRequestWrapper((HttpServletRequest) request);\n        wrappedRequest.getContentAsByteArray();\n        wrappedRequest.getInputStream();\n        chain.doFilter(wrappedRequest, response);\n    } finally {\n        LoggingContext.clear();\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":15518456,"reputation":11,"user_id":18679326,"display_name":"alnvalnnn"},"score":0,"creation_date":1681552296,"post_id":76021420,"comment_id":134077201,"body_markdown":"&lt;th scope=&quot;row&quot; th:text=&quot;${order.id}&quot;&gt;&lt;/th&gt;\n\n&lt;td th:text=&quot;${order.orderDate}&quot;&gt;&lt;/td&gt;\n\n&lt;td th:text=&quot;${order.orderStatus}&quot;&gt;&lt;/td&gt;\nare displayed correctly if i comment out order.orderDetailList and order.customer.address","body":"&lt;th scope=&quot;row&quot; th:text=&quot;${order.id}&quot;&gt;&lt;/th&gt;  &lt;td th:text=&quot;${order.orderDate}&quot;&gt;&lt;/td&gt;  &lt;td th:text=&quot;${order.orderStatus}&quot;&gt;&lt;/td&gt; are displayed correctly if i comment out order.orderDetailList and order.customer.address"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":1,"creation_date":1681552811,"post_id":76021420,"comment_id":134077261,"body_markdown":"Order and OrderDetail are referencing each other. While that&#39;s valid scenario in java, it causes stackoverflow errors in serialization. The solution is to not send entities in the model, but to use [DTOs](https://www.baeldung.com/java-dto-pattern) for this purpose.","body":"Order and OrderDetail are referencing each other. While that&#39;s valid scenario in java, it causes stackoverflow errors in serialization. The solution is to not send entities in the model, but to use <a href=\"https://www.baeldung.com/java-dto-pattern\" rel=\"nofollow noreferrer\">DTOs</a> for this purpose."},{"owner":{"account_id":15518456,"reputation":11,"user_id":18679326,"display_name":"alnvalnnn"},"score":0,"creation_date":1681554715,"post_id":76021420,"comment_id":134077468,"body_markdown":"could you please tell what attribute i would need for storing products and their quantities (like smartphone - 2 pc, headphone - 1pc) in my OrderDto? Or do i need separate Dto for OrderDetails?","body":"could you please tell what attribute i would need for storing products and their quantities (like smartphone - 2 pc, headphone - 1pc) in my OrderDto? Or do i need separate Dto for OrderDetails?"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1681555182,"post_id":76021420,"comment_id":134077515,"body_markdown":"Yes, separate dto for details.","body":"Yes, separate dto for details."}],"owner":{"account_id":15518456,"reputation":11,"user_id":18679326,"display_name":"alnvalnnn"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681551436,"creation_date":1681551123,"question_id":76021420,"body_markdown":"I have a class Order, that i pass with model.addAttribute to an html page. I want to display attribute order.customer.address and order.orderDetails.product.name , order.orderDetails.quanitity. But I get an error:\r\n[error](https://i.stack.imgur.com/FWiIb.png).\r\n\r\n\r\n```\r\n@GetMapping(&quot;/orders&quot;)\r\n    public String orders(Model model, Principal principal){\r\n        if(principal == null){\r\n            return &quot;redirect:/login&quot;;\r\n        }\r\n        List&lt;Order&gt; orders = orderService.getAllOrders();\r\n        model.addAttribute(&quot;orders&quot;, orders);\r\n}\r\n```\r\n\r\n```\r\npublic class Order {\r\n   \r\n    private Long id;\r\n...\r\n    private String orderStatus;\r\n    @ManyToOne(fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;customer_id&quot;, referencedColumnName = &quot;customer_id&quot;)\r\n    private Customer customer;\r\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;order&quot;)  \r\n    private List&lt;OrderDetail&gt; orderDetailList;\r\n}\r\n```\r\n\r\n```\r\n\r\npublic class OrderDetail {\r\n    private Long id;\r\n    private int quantity;\r\n    private double totalPrice;\r\n    private double unitPrice;\r\n    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;order_id&quot;, referencedColumnName = &quot;order_id&quot;)\r\n    private Order order;\r\n\r\n    @OneToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;product_id&quot;, referencedColumnName = &quot;product_id&quot;)\r\n    private Product product;\r\n}\r\n```\r\n```\r\n&lt;table class=&quot;table table-bordered&quot; th:if=&quot;${size &gt; 0}&quot;&gt;\r\n                        &lt;thead&gt;\r\n                        &lt;tr&gt;\r\n                            &lt;th scope=&quot;col&quot;&gt;Order Index&lt;/th&gt;\r\n                            &lt;th scope=&quot;col&quot;&gt;Order Date&lt;/th&gt;\r\n                            &lt;th scope=&quot;col&quot;&gt;Order Items&lt;/th&gt;\r\n                            &lt;th scope=&quot;col&quot;&gt;Delivery address&lt;/th&gt;\r\n                            &lt;th scope=&quot;col&quot;&gt;Order Status&lt;/th&gt;\r\n                        &lt;/tr&gt;\r\n                        &lt;/thead&gt;\r\n                        &lt;tbody&gt;\r\n                        &lt;tr th:each=&quot;order : ${orders}&quot;&gt;\r\n                            &lt;th scope=&quot;row&quot; th:text=&quot;${order.id}&quot;&gt;&lt;/th&gt;\r\n                            &lt;td th:text=&quot;${order.orderDate}&quot;&gt;&lt;/td&gt;\r\n                            &lt;td th:text=&quot;${order.orderDetailList}&quot;&gt;&lt;/td&gt;\r\n                            &lt;td th:text=&quot;${order.customer.address}&quot;&gt;&lt;/td&gt;\r\n                            &lt;td th:text=&quot;${order.orderStatus}&quot;&gt;&lt;/td&gt;\r\n                        &lt;/tr&gt;\r\n                        &lt;/tbody&gt;\r\n                    &lt;/table&gt;\r\n```\r\n\r\n","title":"How to pass a class as a model attribute?","body":"<p>I have a class Order, that i pass with model.addAttribute to an html page. I want to display attribute order.customer.address and order.orderDetails.product.name , order.orderDetails.quanitity. But I get an error:\n<a href=\"https://i.stack.imgur.com/FWiIb.png\" rel=\"nofollow noreferrer\">error</a>.</p>\n<pre><code>@GetMapping(&quot;/orders&quot;)\n    public String orders(Model model, Principal principal){\n        if(principal == null){\n            return &quot;redirect:/login&quot;;\n        }\n        List&lt;Order&gt; orders = orderService.getAllOrders();\n        model.addAttribute(&quot;orders&quot;, orders);\n}\n</code></pre>\n<pre><code>public class Order {\n   \n    private Long id;\n...\n    private String orderStatus;\n    @ManyToOne(fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;customer_id&quot;, referencedColumnName = &quot;customer_id&quot;)\n    private Customer customer;\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;order&quot;)  \n    private List&lt;OrderDetail&gt; orderDetailList;\n}\n</code></pre>\n<pre><code>\npublic class OrderDetail {\n    private Long id;\n    private int quantity;\n    private double totalPrice;\n    private double unitPrice;\n    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;order_id&quot;, referencedColumnName = &quot;order_id&quot;)\n    private Order order;\n\n    @OneToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;product_id&quot;, referencedColumnName = &quot;product_id&quot;)\n    private Product product;\n}\n</code></pre>\n<pre><code>&lt;table class=&quot;table table-bordered&quot; th:if=&quot;${size &gt; 0}&quot;&gt;\n                        &lt;thead&gt;\n                        &lt;tr&gt;\n                            &lt;th scope=&quot;col&quot;&gt;Order Index&lt;/th&gt;\n                            &lt;th scope=&quot;col&quot;&gt;Order Date&lt;/th&gt;\n                            &lt;th scope=&quot;col&quot;&gt;Order Items&lt;/th&gt;\n                            &lt;th scope=&quot;col&quot;&gt;Delivery address&lt;/th&gt;\n                            &lt;th scope=&quot;col&quot;&gt;Order Status&lt;/th&gt;\n                        &lt;/tr&gt;\n                        &lt;/thead&gt;\n                        &lt;tbody&gt;\n                        &lt;tr th:each=&quot;order : ${orders}&quot;&gt;\n                            &lt;th scope=&quot;row&quot; th:text=&quot;${order.id}&quot;&gt;&lt;/th&gt;\n                            &lt;td th:text=&quot;${order.orderDate}&quot;&gt;&lt;/td&gt;\n                            &lt;td th:text=&quot;${order.orderDetailList}&quot;&gt;&lt;/td&gt;\n                            &lt;td th:text=&quot;${order.customer.address}&quot;&gt;&lt;/td&gt;\n                            &lt;td th:text=&quot;${order.orderStatus}&quot;&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                        &lt;/tbody&gt;\n                    &lt;/table&gt;\n</code></pre>\n"},{"tags":["java","multithreading","java-threads","thread-synchronization"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1677541755,"post_id":75586559,"comment_id":133354899,"body_markdown":"[Guarded Blocks](https://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html); [Lock Objects](https://docs.oracle.com/javase/tutorial/essential/concurrency/newlocks.html)","body":"<a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html\" rel=\"nofollow noreferrer\">Guarded Blocks</a>; <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/newlocks.html\" rel=\"nofollow noreferrer\">Lock Objects</a>"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":5,"creation_date":1677542136,"post_id":75586559,"comment_id":133354960,"body_markdown":"I might recommend using a `BlockingQueue` or the like; `wait` and `notify` are almost certainly too low-level.  Just have a queue of messages.","body":"I might recommend using a <code>BlockingQueue</code> or the like; <code>wait</code> and <code>notify</code> are almost certainly too low-level.  Just have a queue of messages."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":3,"creation_date":1677542320,"post_id":75586559,"comment_id":133354990,"body_markdown":"A queue of some type would have been my recommendation also.  I think one of the methods to poll the queue allows you to pass in a timeout value.","body":"A queue of some type would have been my recommendation also.  I think one of the methods to poll the queue allows you to pass in a timeout value."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1677569410,"post_id":75586559,"comment_id":133358750,"body_markdown":"Are you only receiving a single message once? You use the plural &quot;messages&quot; in your first sentence. But your code shows a singe effort to wait until a singe message appears.","body":"Are you only receiving a single message once? You use the plural &quot;messages&quot; in your first sentence. But your code shows a singe effort to wait until a singe message appears."},{"owner":{"account_id":956792,"reputation":742,"user_id":981953,"accept_rate":68,"display_name":"Tejas jain"},"score":0,"creation_date":1677604507,"post_id":75586559,"comment_id":133369425,"body_markdown":"I will be receiving messages of different type.","body":"I will be receiving messages of different type."}],"answers":[{"tags":[],"owner":{"account_id":20399566,"reputation":306,"user_id":14965614,"display_name":"Andrea"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677564949,"creation_date":1677564949,"answer_id":75588446,"question_id":75586559,"body_markdown":"This is an exampre with wait / notify\r\n\r\npublic class SignalReceiver{\r\n    String message;\r\n\r\n    public static void main(String[] args) {\r\n    \tfinal SignalReceiver sr=new SignalReceiver();\r\n    \t\r\n    \tnew Thread(() -&gt; {\r\n    \t\ttry {\r\n\t\t\t\tThread.sleep(2000L);\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t}\r\n       \t\tSystem.out.println(&quot;message sent&quot;);\r\n       \t    sr.receive(&quot;hello&quot;);\r\n    \t}).start();;\r\n    \t\r\n    \tSystem.out.println(&quot;waiting...&quot;);\r\n    \tString mess=sr.waitTillMessageReceived(5000L);\r\n    \t\r\n    \tSystem.out.println(&quot;message: &quot;+mess);\r\n    }\r\n    \r\n    public synchronized  void receive(String message){\r\n        this.message = message;\r\n        notify();\r\n    }\r\n\r\n    public synchronized String waitTillMessageReceived(long timeout){\r\n       try {\r\n    \t   wait(timeout);\r\n       }\r\n       catch (InterruptedException e) {\r\n    \t  \r\n       }\r\n       return message;\r\n    }\r\n}\r\n\r\nThe example presents some problems. For example it does not handle properly the arrival of many simultaneous messages.\r\nAs suggested in comments, it is better to use proper synchronised classes like java.util.concurrent.LinkedBlockingDeque.","title":"Wait till I receive signal in Java multi thread","body":"<p>This is an exampre with wait / notify</p>\n<p>public class SignalReceiver{\nString message;</p>\n<pre><code>public static void main(String[] args) {\n    final SignalReceiver sr=new SignalReceiver();\n    \n    new Thread(() -&gt; {\n        try {\n            Thread.sleep(2000L);\n        } catch (InterruptedException e) {\n        }\n        System.out.println(&quot;message sent&quot;);\n        sr.receive(&quot;hello&quot;);\n    }).start();;\n    \n    System.out.println(&quot;waiting...&quot;);\n    String mess=sr.waitTillMessageReceived(5000L);\n    \n    System.out.println(&quot;message: &quot;+mess);\n}\n\npublic synchronized  void receive(String message){\n    this.message = message;\n    notify();\n}\n\npublic synchronized String waitTillMessageReceived(long timeout){\n   try {\n       wait(timeout);\n   }\n   catch (InterruptedException e) {\n      \n   }\n   return message;\n}\n</code></pre>\n<p>}</p>\n<p>The example presents some problems. For example it does not handle properly the arrival of many simultaneous messages.\nAs suggested in comments, it is better to use proper synchronised classes like java.util.concurrent.LinkedBlockingDeque.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677569071,"creation_date":1677569071,"answer_id":75588961,"question_id":75586559,"body_markdown":"# `BlockingQueue`\r\n\r\nI followed the lead provided [by Louis Wasserman][1] and [by markspace][2], suggesting the use of a queue.\r\n\r\nI went with a [`BlockingQueue`][3] which is (a) thread-safe, and (b) can block when adding &amp; removing elements. I started with the example code given on the Javadoc for that interface.\r\n\r\nFor an implementation of the `BlockingQueue` interface, I chose [`ArrayBlockingQueue`][4].\r\n\r\nI created a pair of producer-consumer classes. They produce and consume a randomly-generated [UUID][5] value via the [`UUID`][6] class. \r\n\r\nHere is the producer class. In an endless loop, the `run` method attempts to add a UUID object to the queue. The attempt to add blocks if the queue is currently busy, continuing when the queue becomes available. If interrupted, such as by the closure of the executor service, this `run` method completes, thereby ending the submitted task.\r\n\r\n```java\r\npackage work.basil.example.async;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\nimport java.util.UUID;\r\nimport java.util.concurrent.BlockingQueue;\r\nimport java.util.concurrent.ThreadLocalRandom;\r\n\r\npublic class Producer implements Runnable\r\n{\r\n    // Member fields.\r\n    private final BlockingQueue &lt; UUID &gt; queue;\r\n\r\n    // Constructor.\r\n    Producer ( BlockingQueue &lt; UUID &gt; q ) { queue = q; }\r\n\r\n    public void run ( )\r\n    {\r\n        System.out.println( &quot;`Producer` object is starting its `run` method. &quot; + Instant.now() );\r\n        try\r\n        {\r\n            while ( true )\r\n            {\r\n                // Sleep, to simulate some lengthy work.\r\n                Duration timeToSleep = Duration.ofMillis( ThreadLocalRandom.current().nextInt( 1_000 , 3_000 ) );\r\n                try { Thread.sleep( timeToSleep ); } catch ( InterruptedException e ) { break; }\r\n                queue.put( produce() );  // Post a new value to our BlockingQueue.\r\n            }\r\n        }\r\n        catch ( InterruptedException e )\r\n        {\r\n            // Could be interrupted by an executor service closing, or other reasons.\r\n            // Simply let this `Runnable` object end its `run` method.\r\n            // No code needed here.\r\n        }\r\n        System.out.println( &quot;`Producer` object is ending its `run` method, after being interrupted. &quot; + Instant.now() );\r\n    }\r\n\r\n    // Logic\r\n    UUID produce ( )\r\n    {\r\n        UUID uuid = UUID.randomUUID();\r\n        System.out.println( &quot;Producing UUID = &quot; + uuid + &quot; at &quot; + Instant.now() );\r\n        return uuid;\r\n    }\r\n}\r\n```\r\n\r\nAnd the consumer class. The `run` method asks for the next available element from the queue. The call blocks until an element becomes available. While waiting, if an interrupt happens such as when the executor service closes, the `run` method completes, thereby ending the submitted task.\r\n\r\n```java\r\npackage work.basil.example.async;\r\n\r\nimport java.time.Instant;\r\nimport java.util.UUID;\r\nimport java.util.concurrent.BlockingQueue;\r\n\r\npublic class Consumer implements Runnable\r\n{\r\n    private final BlockingQueue &lt; UUID &gt; queue;\r\n\r\n    Consumer ( BlockingQueue &lt; UUID &gt; q ) { queue = q; }\r\n\r\n    public void run ( )\r\n    {\r\n        System.out.println( &quot;`Consumer` object is starting its `run` method. &quot; + Instant.now() );\r\n        try\r\n        {\r\n            while ( true ) { consume( queue.take() ); }\r\n        }\r\n        catch ( InterruptedException e )\r\n        {\r\n            // Could be interrupted by an executor service closing, or other reasons.\r\n            // Simply let this `Runnable` object end its `run` method.\r\n            // No code needed here.\r\n        }\r\n        System.out.println( &quot;`Consumer` object is ending its `run` method, after being interrupted. &quot; + Instant.now() );\r\n    }\r\n\r\n    void consume ( UUID uuid )\r\n    {\r\n        System.out.println( &quot;Consuming UUID: &quot; + uuid + &quot; at &quot; + Instant.now() );\r\n    }\r\n}\r\n```\r\n\r\nAnd an app class to demonstrate the queue in action.\r\n\r\nBe aware that you are responsible for gracefully closing your executor service at some point, at least by the end of your app’s execution. Otherwise the backing pool of threads may run indefinitely, like a zombie &#129503;‍♂️.\r\n\r\n```java\r\npackage work.basil.example.async;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\nimport java.util.concurrent.*;\r\n\r\npublic class App\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        System.out.println( &quot;INFO - Demo start. &quot; + Instant.now() );\r\n\r\n        BlockingQueue q = new ArrayBlockingQueue( 10 , true );\r\n        Consumer c = new Consumer( q );\r\n        Producer p = new Producer( q );\r\n\r\n        ExecutorService executorService = Executors.newFixedThreadPool( 2 );\r\n        executorService.submit( c );\r\n        executorService.submit( p );\r\n\r\n        // Let the background threads do their work for a while.\r\n        try { Thread.sleep( Duration.ofSeconds( 8 ) ); } catch ( InterruptedException e ) { throw new RuntimeException( e ); }\r\n        System.out.println( &quot;INFO - Main thread is interrupting tasks run by executor service.&quot; );\r\n        executorService.shutdownNow();\r\n        try\r\n        {\r\n            if ( ! executorService.awaitTermination( 30 , TimeUnit.SECONDS ) )\r\n            {\r\n                System.err.println( &quot;Executor service failed to terminate. &quot; + Instant.now() );\r\n            }\r\n        }\r\n        catch ( InterruptedException e ) { throw new RuntimeException( e ); }\r\n\r\n        System.out.println( &quot;INFO - Demo end. &quot; + Instant.now() );\r\n    }\r\n}\r\n```\r\n\r\nThis seems to be working. \r\n\r\n```none\r\nINFO - Demo start. 2023-02-28T07:24:03.603169Z\r\n`Consumer` object is starting its `run` method. 2023-02-28T07:24:03.614092Z\r\n`Producer` object is starting its `run` method. 2023-02-28T07:24:03.614092Z\r\nProducing UUID = 5fe7dd8a-9cc1-47b8-93aa-87bc031c2534 at 2023-02-28T07:24:04.855110Z\r\nConsuming UUID: 5fe7dd8a-9cc1-47b8-93aa-87bc031c2534 at 2023-02-28T07:24:04.863520Z\r\nProducing UUID = 97a31391-8c5c-4430-9737-b967a8c63987 at 2023-02-28T07:24:06.678767Z\r\nConsuming UUID: 97a31391-8c5c-4430-9737-b967a8c63987 at 2023-02-28T07:24:06.679680Z\r\nProducing UUID = af485e45-5dd5-4b68-82c8-41e1443c4566 at 2023-02-28T07:24:08.337011Z\r\nConsuming UUID: af485e45-5dd5-4b68-82c8-41e1443c4566 at 2023-02-28T07:24:08.337917Z\r\nProducing UUID = 4853a43c-feb6-41ec-91b0-1520c9f67347 at 2023-02-28T07:24:10.927173Z\r\nConsuming UUID: 4853a43c-feb6-41ec-91b0-1520c9f67347 at 2023-02-28T07:24:10.928794Z\r\nINFO - Main thread is interrupting tasks run by executor service.\r\n`Consumer` object is ending its `run` method, after being interrupted. 2023-02-28T07:24:11.619844Z\r\n`Producer` object is ending its `run` method, after being interrupted. 2023-02-28T07:24:11.619725Z\r\nINFO - Demo end. 2023-02-28T07:24:11.621988Z\r\n```\r\n\r\n\r\n**Caveat:** I am no expert on concurrency matters. Use at your own risk.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/75586559/wait-till-i-receive-signal-in-java-multi-thread#comment133354960_75586559\r\n  [2]: https://stackoverflow.com/questions/75586559/wait-till-i-receive-signal-in-java-multi-thread#comment133354990_75586559\r\n  [3]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/BlockingQueue.html\r\n  [4]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/ArrayBlockingQueue.html\r\n  [5]: https://en.wikipedia.org/wiki/Universally_unique_identifier\r\n  [6]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/UUID.html","title":"Wait till I receive signal in Java multi thread","body":"<h1><code>BlockingQueue</code></h1>\n<p>I followed the lead provided <a href=\"https://stackoverflow.com/questions/75586559/wait-till-i-receive-signal-in-java-multi-thread#comment133354960_75586559\">by Louis Wasserman</a> and <a href=\"https://stackoverflow.com/questions/75586559/wait-till-i-receive-signal-in-java-multi-thread#comment133354990_75586559\">by markspace</a>, suggesting the use of a queue.</p>\n<p>I went with a <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/BlockingQueue.html\" rel=\"nofollow noreferrer\"><code>BlockingQueue</code></a> which is (a) thread-safe, and (b) can block when adding &amp; removing elements. I started with the example code given on the Javadoc for that interface.</p>\n<p>For an implementation of the <code>BlockingQueue</code> interface, I chose <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/ArrayBlockingQueue.html\" rel=\"nofollow noreferrer\"><code>ArrayBlockingQueue</code></a>.</p>\n<p>I created a pair of producer-consumer classes. They produce and consume a randomly-generated <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier\" rel=\"nofollow noreferrer\">UUID</a> value via the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/UUID.html\" rel=\"nofollow noreferrer\"><code>UUID</code></a> class.</p>\n<p>Here is the producer class. In an endless loop, the <code>run</code> method attempts to add a UUID object to the queue. The attempt to add blocks if the queue is currently busy, continuing when the queue becomes available. If interrupted, such as by the closure of the executor service, this <code>run</code> method completes, thereby ending the submitted task.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.async;\n\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.UUID;\nimport java.util.concurrent.BlockingQueue;\nimport java.util.concurrent.ThreadLocalRandom;\n\npublic class Producer implements Runnable\n{\n    // Member fields.\n    private final BlockingQueue &lt; UUID &gt; queue;\n\n    // Constructor.\n    Producer ( BlockingQueue &lt; UUID &gt; q ) { queue = q; }\n\n    public void run ( )\n    {\n        System.out.println( &quot;`Producer` object is starting its `run` method. &quot; + Instant.now() );\n        try\n        {\n            while ( true )\n            {\n                // Sleep, to simulate some lengthy work.\n                Duration timeToSleep = Duration.ofMillis( ThreadLocalRandom.current().nextInt( 1_000 , 3_000 ) );\n                try { Thread.sleep( timeToSleep ); } catch ( InterruptedException e ) { break; }\n                queue.put( produce() );  // Post a new value to our BlockingQueue.\n            }\n        }\n        catch ( InterruptedException e )\n        {\n            // Could be interrupted by an executor service closing, or other reasons.\n            // Simply let this `Runnable` object end its `run` method.\n            // No code needed here.\n        }\n        System.out.println( &quot;`Producer` object is ending its `run` method, after being interrupted. &quot; + Instant.now() );\n    }\n\n    // Logic\n    UUID produce ( )\n    {\n        UUID uuid = UUID.randomUUID();\n        System.out.println( &quot;Producing UUID = &quot; + uuid + &quot; at &quot; + Instant.now() );\n        return uuid;\n    }\n}\n</code></pre>\n<p>And the consumer class. The <code>run</code> method asks for the next available element from the queue. The call blocks until an element becomes available. While waiting, if an interrupt happens such as when the executor service closes, the <code>run</code> method completes, thereby ending the submitted task.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.async;\n\nimport java.time.Instant;\nimport java.util.UUID;\nimport java.util.concurrent.BlockingQueue;\n\npublic class Consumer implements Runnable\n{\n    private final BlockingQueue &lt; UUID &gt; queue;\n\n    Consumer ( BlockingQueue &lt; UUID &gt; q ) { queue = q; }\n\n    public void run ( )\n    {\n        System.out.println( &quot;`Consumer` object is starting its `run` method. &quot; + Instant.now() );\n        try\n        {\n            while ( true ) { consume( queue.take() ); }\n        }\n        catch ( InterruptedException e )\n        {\n            // Could be interrupted by an executor service closing, or other reasons.\n            // Simply let this `Runnable` object end its `run` method.\n            // No code needed here.\n        }\n        System.out.println( &quot;`Consumer` object is ending its `run` method, after being interrupted. &quot; + Instant.now() );\n    }\n\n    void consume ( UUID uuid )\n    {\n        System.out.println( &quot;Consuming UUID: &quot; + uuid + &quot; at &quot; + Instant.now() );\n    }\n}\n</code></pre>\n<p>And an app class to demonstrate the queue in action.</p>\n<p>Be aware that you are responsible for gracefully closing your executor service at some point, at least by the end of your app’s execution. Otherwise the backing pool of threads may run indefinitely, like a zombie 🧟‍♂️.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.async;\n\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.concurrent.*;\n\npublic class App\n{\n    public static void main ( String[] args )\n    {\n        System.out.println( &quot;INFO - Demo start. &quot; + Instant.now() );\n\n        BlockingQueue q = new ArrayBlockingQueue( 10 , true );\n        Consumer c = new Consumer( q );\n        Producer p = new Producer( q );\n\n        ExecutorService executorService = Executors.newFixedThreadPool( 2 );\n        executorService.submit( c );\n        executorService.submit( p );\n\n        // Let the background threads do their work for a while.\n        try { Thread.sleep( Duration.ofSeconds( 8 ) ); } catch ( InterruptedException e ) { throw new RuntimeException( e ); }\n        System.out.println( &quot;INFO - Main thread is interrupting tasks run by executor service.&quot; );\n        executorService.shutdownNow();\n        try\n        {\n            if ( ! executorService.awaitTermination( 30 , TimeUnit.SECONDS ) )\n            {\n                System.err.println( &quot;Executor service failed to terminate. &quot; + Instant.now() );\n            }\n        }\n        catch ( InterruptedException e ) { throw new RuntimeException( e ); }\n\n        System.out.println( &quot;INFO - Demo end. &quot; + Instant.now() );\n    }\n}\n</code></pre>\n<p>This seems to be working.</p>\n<pre class=\"lang-none prettyprint-override\"><code>INFO - Demo start. 2023-02-28T07:24:03.603169Z\n`Consumer` object is starting its `run` method. 2023-02-28T07:24:03.614092Z\n`Producer` object is starting its `run` method. 2023-02-28T07:24:03.614092Z\nProducing UUID = 5fe7dd8a-9cc1-47b8-93aa-87bc031c2534 at 2023-02-28T07:24:04.855110Z\nConsuming UUID: 5fe7dd8a-9cc1-47b8-93aa-87bc031c2534 at 2023-02-28T07:24:04.863520Z\nProducing UUID = 97a31391-8c5c-4430-9737-b967a8c63987 at 2023-02-28T07:24:06.678767Z\nConsuming UUID: 97a31391-8c5c-4430-9737-b967a8c63987 at 2023-02-28T07:24:06.679680Z\nProducing UUID = af485e45-5dd5-4b68-82c8-41e1443c4566 at 2023-02-28T07:24:08.337011Z\nConsuming UUID: af485e45-5dd5-4b68-82c8-41e1443c4566 at 2023-02-28T07:24:08.337917Z\nProducing UUID = 4853a43c-feb6-41ec-91b0-1520c9f67347 at 2023-02-28T07:24:10.927173Z\nConsuming UUID: 4853a43c-feb6-41ec-91b0-1520c9f67347 at 2023-02-28T07:24:10.928794Z\nINFO - Main thread is interrupting tasks run by executor service.\n`Consumer` object is ending its `run` method, after being interrupted. 2023-02-28T07:24:11.619844Z\n`Producer` object is ending its `run` method, after being interrupted. 2023-02-28T07:24:11.619725Z\nINFO - Demo end. 2023-02-28T07:24:11.621988Z\n</code></pre>\n<p><strong>Caveat:</strong> I am no expert on concurrency matters. Use at your own risk.</p>\n"},{"tags":[],"owner":{"account_id":1628535,"reputation":5864,"user_id":1503538,"accept_rate":100,"display_name":"snovelli"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681549670,"creation_date":1681549670,"answer_id":76021315,"question_id":75586559,"body_markdown":"## `BlockingQueue` is the probably the easiest way to implement it\r\n\r\n\r\n\r\n    import java.util.concurrent.*;\r\n\r\n    class SignalReceiver {\r\n        private final BlockingQueue&lt;String&gt; queue = new LinkedBlockingQueue&lt;&gt;();\r\n\r\n        public void receive(String message) {\r\n            queue.offer(message);\r\n        }\r\n \r\n        public String waitTillMessageReceived() throws InterruptedException {\r\n            return queue.take();\r\n        }\r\n    }\r\n","title":"Wait till I receive signal in Java multi thread","body":"<h2><code>BlockingQueue</code> is the probably the easiest way to implement it</h2>\n<pre><code>import java.util.concurrent.*;\n\nclass SignalReceiver {\n    private final BlockingQueue&lt;String&gt; queue = new LinkedBlockingQueue&lt;&gt;();\n\n    public void receive(String message) {\n        queue.offer(message);\n    }\n\n    public String waitTillMessageReceived() throws InterruptedException {\n        return queue.take();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":956792,"reputation":742,"user_id":981953,"accept_rate":68,"display_name":"Tejas jain"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1681549670,"creation_date":1677540961,"question_id":75586559,"body_markdown":"I have a multi threaded application which receives asynchronous messages. How to wait till message is received (or timeout)?Is there a better way to do this with wait() and notify()? \r\n\r\nI tried to do this with raw thread sleep with atomic references. \r\n\r\n    class SignalReceiver{\r\n        String message;\r\n        Boolean messageReceived; // used AtomicBoolean\r\n\r\n        void receive(String message){\r\n            this.message = message;\r\n            messageReceived = true; // set message flag\r\n        }\r\n\r\n        void waitTillMessageReceived(long timeout){\r\n           if(!messageReceived){ // message could be received before \r\n              while(!messageReceived){\r\n                  Thread.sleep(100);\r\n                  // wait only till timeout\r\n              }\r\n           }\r\n           messageReceived = false; // reset message flag\r\n        }\r\n    }","title":"Wait till I receive signal in Java multi thread","body":"<p>I have a multi threaded application which receives asynchronous messages. How to wait till message is received (or timeout)?Is there a better way to do this with wait() and notify()?</p>\n<p>I tried to do this with raw thread sleep with atomic references.</p>\n<pre><code>class SignalReceiver{\n    String message;\n    Boolean messageReceived; // used AtomicBoolean\n\n    void receive(String message){\n        this.message = message;\n        messageReceived = true; // set message flag\n    }\n\n    void waitTillMessageReceived(long timeout){\n       if(!messageReceived){ // message could be received before \n          while(!messageReceived){\n              Thread.sleep(100);\n              // wait only till timeout\n          }\n       }\n       messageReceived = false; // reset message flag\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","gradle"],"answers":[{"tags":[],"owner":{"account_id":13513450,"reputation":196,"user_id":9748912,"display_name":"Hoang Dinh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681549492,"creation_date":1681549492,"answer_id":76021306,"question_id":74007608,"body_markdown":"You can try this by adding a new Gradle custom task:\r\n\r\n    task startIntegrationApp(type: JavaExec) {\r\n      group = &#39;integration test&#39;\r\n      classpath = sourceSets.test.runtimeClasspath\r\n      mainClass.set(&quot;com.example.demo.test.UnderTest&quot;)\r\n    }\r\n\r\n*If you want the integration app runs parallel with the main Spring Boot app, you must combine 2 tasks as below (Make sure the Integration app runs on a different port with the Main app):*\r\n\r\n    task startIntegrationApp(type: JavaExec) {\r\n      group = &#39;integration test&#39;\r\n      classpath = sourceSets.test.runtimeClasspath\r\n      mainClass.set(&quot;com.example.demo.test.UnderTest&quot;)\r\n    }\r\n\r\n    Process process\r\n    task startIntegrationAppParallel() {\r\n      group = &#39;integration test&#39;\r\n      doLast {\r\n        def builder = new ProcessBuilder(&quot;CMD&quot;, &quot;/C&quot;, &quot;gradlew&quot;, &quot;startIntegrationApp&quot;)\r\n        stubProcess = builder.start()\r\n        stubProcess.waitFor(10, TimeUnit.SECONDS) // Wait for the IntegrationApp to be ready\r\n\r\n        println &quot;Started UnderTest app&quot;\r\n      }\r\n    }","title":"Run Spring Boot Application in Test Folder using Gradle Spring Boot Plugin","body":"<p>You can try this by adding a new Gradle custom task:</p>\n<pre><code>task startIntegrationApp(type: JavaExec) {\n  group = 'integration test'\n  classpath = sourceSets.test.runtimeClasspath\n  mainClass.set(&quot;com.example.demo.test.UnderTest&quot;)\n}\n</code></pre>\n<p><em>If you want the integration app runs parallel with the main Spring Boot app, you must combine 2 tasks as below (Make sure the Integration app runs on a different port with the Main app):</em></p>\n<pre><code>task startIntegrationApp(type: JavaExec) {\n  group = 'integration test'\n  classpath = sourceSets.test.runtimeClasspath\n  mainClass.set(&quot;com.example.demo.test.UnderTest&quot;)\n}\n\nProcess process\ntask startIntegrationAppParallel() {\n  group = 'integration test'\n  doLast {\n    def builder = new ProcessBuilder(&quot;CMD&quot;, &quot;/C&quot;, &quot;gradlew&quot;, &quot;startIntegrationApp&quot;)\n    stubProcess = builder.start()\n    stubProcess.waitFor(10, TimeUnit.SECONDS) // Wait for the IntegrationApp to be ready\n\n    println &quot;Started UnderTest app&quot;\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":2379900,"reputation":4402,"user_id":2194119,"accept_rate":76,"display_name":"Rad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":264,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681549492,"creation_date":1665341666,"question_id":74007608,"body_markdown":"I&#39;ve got a simple Spring Boot application. When I run `gradle bootRun` it runs the application (presumably finds the main class and runs it). I also know how to configure the `bootRun` task with an explicit `mainClass`:\r\n```kotlin\r\ntasks.getByName&lt;BootRun&gt;(&quot;bootRun&quot;) {\r\n    mainClass.set(&quot;com.example.demo.Application&quot;)\r\n}\r\n```\r\nNow, one more simple extra requirement; how can I run a Spring Boot application for which the main class is in the test folder? The best that I could come up with is:\r\n```kotlin\r\ntasks.getByName&lt;BootRun&gt;(&quot;bootRun&quot;) {\r\n    mainClass.set(&quot;com.example.demo.test.UnderTest&quot;)\r\n    doFirst {\r\n        classpath += java.sourceSets[&quot;test&quot;].runtimeClasspath\r\n    }\r\n}\r\n```\r\nBut it doesn&#39;t feel right to me. What is the correct way to add the `test` source sets stuff to the classpath?\r\nI also tried to copy the implementation of `bootRun` (in `org.springframework.boot.gradle.plugin.JavaPluginAction#configureBootRunTask`) but couldn&#39;t get it working.\r\n\r\nA bit more context: The Spring Boot application in `test` folder is kinda the main application but configured to be the subject of integration tests.\r\nPlease note, I&#39;m aware of `SpringBootTest` and features of Spring Test. I&#39;m looking for a different approach for a specific requirement: Keep the Spring application running while executing *one single* test using Gradle&#39;s continues build feature in which Spring test context caching doesn&#39;t makes sense. &#128591;","title":"Run Spring Boot Application in Test Folder using Gradle Spring Boot Plugin","body":"<p>I've got a simple Spring Boot application. When I run <code>gradle bootRun</code> it runs the application (presumably finds the main class and runs it). I also know how to configure the <code>bootRun</code> task with an explicit <code>mainClass</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>tasks.getByName&lt;BootRun&gt;(&quot;bootRun&quot;) {\n    mainClass.set(&quot;com.example.demo.Application&quot;)\n}\n</code></pre>\n<p>Now, one more simple extra requirement; how can I run a Spring Boot application for which the main class is in the test folder? The best that I could come up with is:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>tasks.getByName&lt;BootRun&gt;(&quot;bootRun&quot;) {\n    mainClass.set(&quot;com.example.demo.test.UnderTest&quot;)\n    doFirst {\n        classpath += java.sourceSets[&quot;test&quot;].runtimeClasspath\n    }\n}\n</code></pre>\n<p>But it doesn't feel right to me. What is the correct way to add the <code>test</code> source sets stuff to the classpath?\nI also tried to copy the implementation of <code>bootRun</code> (in <code>org.springframework.boot.gradle.plugin.JavaPluginAction#configureBootRunTask</code>) but couldn't get it working.</p>\n<p>A bit more context: The Spring Boot application in <code>test</code> folder is kinda the main application but configured to be the subject of integration tests.\nPlease note, I'm aware of <code>SpringBootTest</code> and features of Spring Test. I'm looking for a different approach for a specific requirement: Keep the Spring application running while executing <em>one single</em> test using Gradle's continues build feature in which Spring test context caching doesn't makes sense. 🙏</p>\n"},{"tags":["java","spring","spring-boot","rest","microservices"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":3,"creation_date":1680590275,"post_id":75925377,"comment_id":133919411,"body_markdown":"Title is vague. Rewrite to summarize your specific technical issue.","body":"Title is vague. Rewrite to summarize your specific technical issue."},{"owner":{"account_id":2739549,"reputation":594,"user_id":2361379,"display_name":"fauzimh"},"score":6,"creation_date":1680591250,"post_id":75925377,"comment_id":133919607,"body_markdown":"You are not ready for microservices. With that limitations, I suggest to still use monolithic but implement it in modules so that it is somehow compartmentalized i.e. you know where to update when there is enhancement required. Make it as intuitive as possible.\n\nDo not follow microservice just because it is the latest trend.","body":"You are not ready for microservices. With that limitations, I suggest to still use monolithic but implement it in modules so that it is somehow compartmentalized i.e. you know where to update when there is enhancement required. Make it as intuitive as possible.  Do not follow microservice just because it is the latest trend."},{"owner":{"account_id":5253184,"reputation":532,"user_id":4196759,"display_name":"Anthony G."},"score":3,"creation_date":1680619584,"post_id":75925377,"comment_id":133926725,"body_markdown":"Implementing micro services comes with complexity. Having a single database (point of failure) negates any perceived API benefits. Having to manage databases, multiple API&#39;s, authorization between everything, not to mention ops and deployments isn&#39;t free. If you are doing micro services because you were told to, and not because of a current business need it is not going to solve any problems but introduce more headaches. It is not a silver bullet, it solves scaling, availability and sometimes dev headaches with large teams all trampling in the same repo.","body":"Implementing micro services comes with complexity. Having a single database (point of failure) negates any perceived API benefits. Having to manage databases, multiple API&#39;s, authorization between everything, not to mention ops and deployments isn&#39;t free. If you are doing micro services because you were told to, and not because of a current business need it is not going to solve any problems but introduce more headaches. It is not a silver bullet, it solves scaling, availability and sometimes dev headaches with large teams all trampling in the same repo."},{"owner":{"account_id":14353975,"reputation":1297,"user_id":10368507,"display_name":"Priyak Dey"},"score":3,"creation_date":1680961607,"post_id":75925377,"comment_id":133984415,"body_markdown":"Seems like senior managers who just care about the buzz word and showcasing working for the sake of it designed this. Common Service is usually a LB or maybe a cross cutting auth server/authorization service using some other auth service, something like that. Why have a service called Common Service create the record and then go to some domain specific service to update the record. What happens if the call fails in MGMt service ? How do you rollback the record ? Does look microservice design for calling it a microservice and cloud ready application !","body":"Seems like senior managers who just care about the buzz word and showcasing working for the sake of it designed this. Common Service is usually a LB or maybe a cross cutting auth server/authorization service using some other auth service, something like that. Why have a service called Common Service create the record and then go to some domain specific service to update the record. What happens if the call fails in MGMt service ? How do you rollback the record ? Does look microservice design for calling it a microservice and cloud ready application !"},{"owner":{"account_id":14353975,"reputation":1297,"user_id":10368507,"display_name":"Priyak Dey"},"score":2,"creation_date":1680961884,"post_id":75925377,"comment_id":133984461,"body_markdown":"Also, I am not against a single DB pattern - everything has its own pros and cons - it&#39;s a trade-off and sometimes policies ! If I were to design this - just for the sake of moving to &quot;cloud native architecture&quot; acc to company policy - I would have 3 domain services - mgmt/hr/sales , one LB, one discovery service maybe, and a single DB. If the whole point of Common Service is to share models across without duplicate code - I would write a shared lib to make others happy (personally disagree that this is way - sometimes DRY is not the asnwer)! A simple design and your seniors happy !","body":"Also, I am not against a single DB pattern - everything has its own pros and cons - it&#39;s a trade-off and sometimes policies ! If I were to design this - just for the sake of moving to &quot;cloud native architecture&quot; acc to company policy - I would have 3 domain services - mgmt/hr/sales , one LB, one discovery service maybe, and a single DB. If the whole point of Common Service is to share models across without duplicate code - I would write a shared lib to make others happy (personally disagree that this is way - sometimes DRY is not the asnwer)! A simple design and your seniors happy !"},{"owner":{"account_id":14353975,"reputation":1297,"user_id":10368507,"display_name":"Priyak Dey"},"score":1,"creation_date":1680962025,"post_id":75925377,"comment_id":133984481,"body_markdown":"Also, there is no need to DB Service layer (assume this is a separate service) - again don&#39;t want duplicate code, create a lib to abstract the data jpa/hib things with your own interface, and use that - but if you see carefully you still are duplicating stuff even after shared libs !! So this is probably satisfying your managers if that is what is required. if not, 3 services, 1 DB, 1 LB(entrypoint), 1 discovery service and probably a common service for authorization/auth abstraction.","body":"Also, there is no need to DB Service layer (assume this is a separate service) - again don&#39;t want duplicate code, create a lib to abstract the data jpa/hib things with your own interface, and use that - but if you see carefully you still are duplicating stuff even after shared libs !! So this is probably satisfying your managers if that is what is required. if not, 3 services, 1 DB, 1 LB(entrypoint), 1 discovery service and probably a common service for authorization/auth abstraction."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":1,"creation_date":1681014089,"post_id":75925377,"comment_id":133989849,"body_markdown":"You are asking eight questions within your post. That is a  red flag that your question lacks focus. Also, your question is inviting opinions, and not really on topic for SO. See [What topics can I ask about here?](https://stackoverflow.com/help/on-topic) for clarification. Consider posting  on [Software Engineering](https://softwareengineering.stackexchange.com/) instead, ensuring that you [meet their guidelines](https://softwareengineering.stackexchange.com/tour).","body":"You are asking eight questions within your post. That is a  red flag that your question lacks focus. Also, your question is inviting opinions, and not really on topic for SO. See <a href=\"https://stackoverflow.com/help/on-topic\">What topics can I ask about here?</a> for clarification. Consider posting  on <a href=\"https://softwareengineering.stackexchange.com/\">Software Engineering</a> instead, ensuring that you <a href=\"https://softwareengineering.stackexchange.com/tour\">meet their guidelines</a>."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":1,"creation_date":1683300907,"post_id":75925377,"comment_id":134350831,"body_markdown":"@Shrutisharma Do not tell people not to downvote. There is nothing wrong with downvoting poor questions, and your question does not follow SO guidelines in several respects. See [How do I ask a good question?](https://stackoverflow.com/help/how-to-ask) for advice on improving your question. And you are still asking eight questions within your post. That means that your question lacks focus.","body":"@Shrutisharma Do not tell people not to downvote. There is nothing wrong with downvoting poor questions, and your question does not follow SO guidelines in several respects. See <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a> for advice on improving your question. And you are still asking eight questions within your post. That means that your question lacks focus."}],"answers":[{"comments":[{"owner":{"account_id":14353975,"reputation":1297,"user_id":10368507,"display_name":"Priyak Dey"},"score":1,"creation_date":1680962120,"post_id":75926144,"comment_id":133984491,"body_markdown":"We have scalable and HA DBs too. I dont see how this answer fits the question, of trying to move away from DB to a message queue. With a bad design of &quot;microservices&quot;, this answer just adds some more complications(tx management) and components to the issue !","body":"We have scalable and HA DBs too. I dont see how this answer fits the question, of trying to move away from DB to a message queue. With a bad design of &quot;microservices&quot;, this answer just adds some more complications(tx management) and components to the issue !"},{"owner":{"account_id":4542495,"reputation":724,"user_id":3689942,"accept_rate":20,"display_name":"Payal Bansal"},"score":1,"creation_date":1681294099,"post_id":75926144,"comment_id":134032121,"body_markdown":"@PriyakDey So u r saying making rest api calls/ synchronous communication is better than using queues coz it is adding to complexity?","body":"@PriyakDey So u r saying making rest api calls/ synchronous communication is better than using queues coz it is adding to complexity?"},{"owner":{"account_id":14353975,"reputation":1297,"user_id":10368507,"display_name":"Priyak Dey"},"score":1,"creation_date":1681622561,"post_id":75926144,"comment_id":134084480,"body_markdown":"1. I don&#39;t think its about complexity and good/bad when it comes to sync/async ops. It is about the use case and how to solve it with efficiency and less complexity. With this bad design, a queue does not save the day.\n2. There is no point in having a DB service layer at all. Again depends on the use case. After saving models - do I return them immediately - yeah we need a rest-blocking call. It can very simple as - 3 services which takes of mgmt/sales and HR model with a single DB, a Service Reg and LB to start with.","body":"1. I don&#39;t think its about complexity and good/bad when it comes to sync/async ops. It is about the use case and how to solve it with efficiency and less complexity. With this bad design, a queue does not save the day. 2. There is no point in having a DB service layer at all. Again depends on the use case. After saving models - do I return them immediately - yeah we need a rest-blocking call. It can very simple as - 3 services which takes of mgmt/sales and HR model with a single DB, a Service Reg and LB to start with."},{"owner":{"account_id":14353975,"reputation":1297,"user_id":10368507,"display_name":"Priyak Dey"},"score":1,"creation_date":1681623423,"post_id":75926144,"comment_id":134084549,"body_markdown":"Check out this [video](https://www.youtube.com/watch?v=j6ow-UemzBc&amp;t=577s) on Microservice Architecture Design. Good watch","body":"Check out this <a href=\"https://www.youtube.com/watch?v=j6ow-UemzBc&amp;t=577s\" rel=\"nofollow noreferrer\">video</a> on Microservice Architecture Design. Good watch"}],"tags":[],"owner":{"account_id":4542495,"reputation":724,"user_id":3689942,"accept_rate":20,"display_name":"Payal Bansal"},"comment_count":4,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1680589958,"creation_date":1680589958,"answer_id":75926144,"question_id":75925377,"body_markdown":"Calling dbservice via rest api, won&#39;t it be like tight coupling and add latency? Can we not do this operation using messaging api? Such that even if dbservice goes down, message can still be processed, once it&#39;s up.\r\n","title":"Design problem in Microservice architecture","body":"<p>Calling dbservice via rest api, won't it be like tight coupling and add latency? Can we not do this operation using messaging api? Such that even if dbservice goes down, message can still be processed, once it's up.</p>\n"},{"comments":[{"owner":{"account_id":13711427,"reputation":41,"user_id":9893677,"display_name":"Shruti sharma"},"score":0,"creation_date":1683282078,"post_id":75968723,"comment_id":134346300,"body_markdown":"actually we have all 3 types of customers. some of them use all the services, some use exactly one. so to onboard customers we are using commonservice.","body":"actually we have all 3 types of customers. some of them use all the services, some use exactly one. so to onboard customers we are using commonservice."}],"tags":[],"owner":{"account_id":10761390,"reputation":97,"user_id":7917687,"display_name":"Ashad0203"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1681013006,"creation_date":1681013006,"answer_id":75968723,"question_id":75925377,"body_markdown":"Introducing a DBservice as an intermediary between microservices and the database can follow microservice principles. \r\nHowever, there are aspects to consider.\r\n\r\n Private table per service or schema as a service can both work, depending on specific needs. Coordination between services is necessary to avoid conflicts and ensure data consistency.\r\n Using a single database for multiple microservices can cause performance issues.\r\n Database-per-service approach can improve scalability, isolation, and data consistency.\r\n Introducing a DBservice can affect performance due to additional network hops. Caching or optimizing database queries can reduce latency. A load balancer or replicated database cluster can ensure high availability. \r\nRedesigning microservices architecture can improve scalability, and data consistency, and reduce contention. \r\n\r\nEvent-driven architectures and asynchronous messaging can decouple microservices and improve scalability and fault tolerance.\r\n Containerization and orchestration technologies can simplify the deployment and management of microservices.\r\n\r\nActually considering your scenario specifically, I can think of two other possible solutions for you:\r\n\r\n\r\n1. Either create Common service as a jar  and import it into your Management, Sales, and HR service and use it from there only\r\n\r\n2. Normalization of a table in such a way that Common Service and Management Service etc work on different tables. I am just thinking to divide a table into two parts","title":"Design problem in Microservice architecture","body":"<p>Introducing a DBservice as an intermediary between microservices and the database can follow microservice principles.\nHowever, there are aspects to consider.</p>\n<p>Private table per service or schema as a service can both work, depending on specific needs. Coordination between services is necessary to avoid conflicts and ensure data consistency.\nUsing a single database for multiple microservices can cause performance issues.\nDatabase-per-service approach can improve scalability, isolation, and data consistency.\nIntroducing a DBservice can affect performance due to additional network hops. Caching or optimizing database queries can reduce latency. A load balancer or replicated database cluster can ensure high availability.\nRedesigning microservices architecture can improve scalability, and data consistency, and reduce contention.</p>\n<p>Event-driven architectures and asynchronous messaging can decouple microservices and improve scalability and fault tolerance.\nContainerization and orchestration technologies can simplify the deployment and management of microservices.</p>\n<p>Actually considering your scenario specifically, I can think of two other possible solutions for you:</p>\n<ol>\n<li><p>Either create Common service as a jar  and import it into your Management, Sales, and HR service and use it from there only</p>\n</li>\n<li><p>Normalization of a table in such a way that Common Service and Management Service etc work on different tables. I am just thinking to divide a table into two parts</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6853432,"reputation":29,"user_id":5269864,"display_name":"Kaustubh Yadav"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681137611,"creation_date":1681137519,"answer_id":75978038,"question_id":75925377,"body_markdown":"So below are the points to keep in mind.\r\n\r\n - First, decide how are you segregating your functionalities into services.\r\n - You can segregate based on domain, e.g. customer service, product service etc. Each of this service would have it&#39;s own db, and whenever another service needs to deal with anything in this DB, it will go through this microservice.\r\n - You can then build usecase specific services on top of the domain specific services.\r\n - It is really difficult to justify microservice architecture with your DB as a single point of failure.\r\n\r\nPlease refer to this website for more detailed information on microservices. Since you seem to be just getting started, this is a good starting point.\r\nhttps://microservices.io/\r\n\r\n","title":"Design problem in Microservice architecture","body":"<p>So below are the points to keep in mind.</p>\n<ul>\n<li>First, decide how are you segregating your functionalities into services.</li>\n<li>You can segregate based on domain, e.g. customer service, product service etc. Each of this service would have it's own db, and whenever another service needs to deal with anything in this DB, it will go through this microservice.</li>\n<li>You can then build usecase specific services on top of the domain specific services.</li>\n<li>It is really difficult to justify microservice architecture with your DB as a single point of failure.</li>\n</ul>\n<p>Please refer to this website for more detailed information on microservices. Since you seem to be just getting started, this is a good starting point.\n<a href=\"https://microservices.io/\" rel=\"nofollow noreferrer\">https://microservices.io/</a></p>\n"},{"tags":[],"owner":{"account_id":9978708,"reputation":267,"user_id":7382342,"display_name":"Hardik Uchdadiya"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681298602,"creation_date":1681298602,"answer_id":75994894,"question_id":75925377,"body_markdown":"The solution to your problem is not simple and straightforward, because there are many parameters involved while breaking a service into microservices. From what I see, you are having multiple services which are communicating with each other frequently but still are having different code bases and on top of that they do access the same database (I am assuming the same schema when you say the same database). Now when you say that you can not do it from scratch then there are very few possible solutions to this problem\r\n\r\n 1. Instead of updating and hitting the DB every time for the calls in the initial service, why don&#39;t you just pass the information to downstream services and let that service do the update if possible (this is still not an ideal solution but it reduces the latency by reducing one DB call)\r\n```\r\nCommon--&gt;Pass-Data--Management--&gt;DB(Common_MGMT)\r\nCommon--&gt;Pass-Data--Sales--&gt;DB(Common_Sales)\r\nCommon--&gt;Pass-Data--HR--&gt;DB\r\n```\r\n 2. Do the reverse, instead of landing your API call in Common, why don&#39;t you land your API calls in actual services first and then inject Common as a dependency in your services and let that part process other data? (this is still not from scratch but I believe will need considerable amount of work, but still better solution than 1).","title":"Design problem in Microservice architecture","body":"<p>The solution to your problem is not simple and straightforward, because there are many parameters involved while breaking a service into microservices. From what I see, you are having multiple services which are communicating with each other frequently but still are having different code bases and on top of that they do access the same database (I am assuming the same schema when you say the same database). Now when you say that you can not do it from scratch then there are very few possible solutions to this problem</p>\n<ol>\n<li>Instead of updating and hitting the DB every time for the calls in the initial service, why don't you just pass the information to downstream services and let that service do the update if possible (this is still not an ideal solution but it reduces the latency by reducing one DB call)</li>\n</ol>\n<pre><code>Common--&gt;Pass-Data--Management--&gt;DB(Common_MGMT)\nCommon--&gt;Pass-Data--Sales--&gt;DB(Common_Sales)\nCommon--&gt;Pass-Data--HR--&gt;DB\n</code></pre>\n<ol start=\"2\">\n<li>Do the reverse, instead of landing your API call in Common, why don't you land your API calls in actual services first and then inject Common as a dependency in your services and let that part process other data? (this is still not from scratch but I believe will need considerable amount of work, but still better solution than 1).</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3412746,"reputation":2578,"user_id":2862341,"display_name":"Ravindra HV"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681548746,"creation_date":1681547384,"answer_id":76021149,"question_id":75925377,"body_markdown":"One way to approach it would be to split the monolith in terms of functional modules with an interface and implementation and then move those modules into standalone services. \r\n\r\nThe idea is that if one functional module changes, others don&#39;t have to be validated as rigorously.\r\n\r\nUpdate#1 -\r\n\r\n 1. If you want to improve your understanding try this link - https://microservices.io/\r\n 2. I have answered in a generic way (was trying to get within the bounty window but now it looks like there is a 1 day grace!). Never the less believe they still hold. \r\n\r\n    If you have a single database and that is your primary concern (which makes sense) then backups are your only friend. So you can first think of a replication db before you start thinking about monolith vs microservices. It would be no fun to tell your customers you lost their data because the db server crashed. \r\n\r\n    Additionally to improve speed, using RDBMS you can consider sharding concepts (where rows are distributed across multiple servers) in addition to replication. You should ideally be able to manage this within the scope of your definition of &#39;redesign-from-scratch&#39; limitation.","title":"Design problem in Microservice architecture","body":"<p>One way to approach it would be to split the monolith in terms of functional modules with an interface and implementation and then move those modules into standalone services.</p>\n<p>The idea is that if one functional module changes, others don't have to be validated as rigorously.</p>\n<p>Update#1 -</p>\n<ol>\n<li><p>If you want to improve your understanding try this link - <a href=\"https://microservices.io/\" rel=\"nofollow noreferrer\">https://microservices.io/</a></p>\n</li>\n<li><p>I have answered in a generic way (was trying to get within the bounty window but now it looks like there is a 1 day grace!). Never the less believe they still hold.</p>\n<p>If you have a single database and that is your primary concern (which makes sense) then backups are your only friend. So you can first think of a replication db before you start thinking about monolith vs microservices. It would be no fun to tell your customers you lost their data because the db server crashed.</p>\n<p>Additionally to improve speed, using RDBMS you can consider sharding concepts (where rows are distributed across multiple servers) in addition to replication. You should ideally be able to manage this within the scope of your definition of 'redesign-from-scratch' limitation.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":26983848,"reputation":33,"user_id":20547817,"display_name":"Rashmi Sharma"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":529,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"answer_count":5,"score":-3,"last_activity_date":1681548746,"creation_date":1680580183,"question_id":75925377,"body_markdown":"In my company we are using `microservices` but till now we were not following `microservice principles`. so in architect review we have been told to replace the same.\r\n\r\nWe have one service called `CommonService`,so any request comes by client hits this service. This request hits the `database` and create the record and then forward the request to `ManagementService`. Management Service access the same DB and table and update the record created by `CommonService`.(Here Common and Management Both API hitting the same table in database.)\r\nsame we have for other 2 services.\r\n\r\n    Common--&gt;DB(Common_MGMT)--Management--&gt;DB(Common_MGMT)\r\n    Common--&gt;DB(Common_Sales)--Sales--&gt;DB(Common_Sales)\r\n    Common--&gt;DB--HR--&gt;DB \r\n\r\nSo `Common_MGMT` table hit by first 2 service, `Common_Sales` table hit by Common and Sales API ,same for third.\r\nA particular customer will access only one service where it is `Management` , `Sales` or `HR` but he will come through `commonservice`.\r\n[![enter image description here][1]][1]\r\n\r\nNow We have to follow microservice principle and due to management reasons we can not follow `Database as a service` and also we don&#39;t have option to redesign from scratch.\r\n\r\nSo we have thought to introduce one  `DBservice` which will hit the `database`,so that it is like when new request will come to `Commonservice` then it will access `DBservice` through `REST` and `DB service` will create record in `database`. Then `Management` Service will access `DBservice` and `DBService` will update the same record in `database`. likewise for `sales service` and `HR service`.\r\n\r\n\r\nNow still I am using same `table` in Database but this time only `DBservice` accessing. AM I following the microservice principle here? \r\n\r\n1. Here which approach will be better `Private table per service` or `Schema as a service`? or both will work and I can use either of them?\r\n\r\n2. There will be huge `latency` in this approach, can the solution be improved?\r\n3. If `DBService` will fail then it will be single point of failure? can we do something other than creating multiple instances?\r\n\r\nOverall can you suggest the solution for original problem? Is the solution we are proposing correct or is there better option?\r\n\r\nAny other suggestion most welcome.\r\n\r\n[![enter image description here][2]][2] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/agu6w.png\r\n  [2]: https://i.stack.imgur.com/aQL70.png","title":"Design problem in Microservice architecture","body":"<p>In my company we are using <code>microservices</code> but till now we were not following <code>microservice principles</code>. so in architect review we have been told to replace the same.</p>\n<p>We have one service called <code>CommonService</code>,so any request comes by client hits this service. This request hits the <code>database</code> and create the record and then forward the request to <code>ManagementService</code>. Management Service access the same DB and table and update the record created by <code>CommonService</code>.(Here Common and Management Both API hitting the same table in database.)\nsame we have for other 2 services.</p>\n<pre><code>Common--&gt;DB(Common_MGMT)--Management--&gt;DB(Common_MGMT)\nCommon--&gt;DB(Common_Sales)--Sales--&gt;DB(Common_Sales)\nCommon--&gt;DB--HR--&gt;DB \n</code></pre>\n<p>So <code>Common_MGMT</code> table hit by first 2 service, <code>Common_Sales</code> table hit by Common and Sales API ,same for third.\nA particular customer will access only one service where it is <code>Management</code> , <code>Sales</code> or <code>HR</code> but he will come through <code>commonservice</code>.\n<a href=\"https://i.stack.imgur.com/agu6w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/agu6w.png\" alt=\"enter image description here\" /></a></p>\n<p>Now We have to follow microservice principle and due to management reasons we can not follow <code>Database as a service</code> and also we don't have option to redesign from scratch.</p>\n<p>So we have thought to introduce one  <code>DBservice</code> which will hit the <code>database</code>,so that it is like when new request will come to <code>Commonservice</code> then it will access <code>DBservice</code> through <code>REST</code> and <code>DB service</code> will create record in <code>database</code>. Then <code>Management</code> Service will access <code>DBservice</code> and <code>DBService</code> will update the same record in <code>database</code>. likewise for <code>sales service</code> and <code>HR service</code>.</p>\n<p>Now still I am using same <code>table</code> in Database but this time only <code>DBservice</code> accessing. AM I following the microservice principle here?</p>\n<ol>\n<li><p>Here which approach will be better <code>Private table per service</code> or <code>Schema as a service</code>? or both will work and I can use either of them?</p>\n</li>\n<li><p>There will be huge <code>latency</code> in this approach, can the solution be improved?</p>\n</li>\n<li><p>If <code>DBService</code> will fail then it will be single point of failure? can we do something other than creating multiple instances?</p>\n</li>\n</ol>\n<p>Overall can you suggest the solution for original problem? Is the solution we are proposing correct or is there better option?</p>\n<p>Any other suggestion most welcome.</p>\n<p><a href=\"https://i.stack.imgur.com/aQL70.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aQL70.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":12531802,"reputation":13,"user_id":9119824,"display_name":"Nika Kvantaliani"},"score":0,"creation_date":1622807191,"post_id":67836609,"comment_id":119903714,"body_markdown":"{5} {5,5} throws NumberFormatException :) wtf","body":"{5} {5,5} throws NumberFormatException :) wtf"},{"owner":{"account_id":12531802,"reputation":13,"user_id":9119824,"display_name":"Nika Kvantaliani"},"score":0,"creation_date":1622808538,"post_id":67836609,"comment_id":119904303,"body_markdown":"thanks a lot dude :)   &quot;if(resList.isEmpty()) return result;&quot;","body":"thanks a lot dude :)   &quot;if(resList.isEmpty()) return result;&quot;"}],"tags":[],"owner":{"account_id":19955535,"reputation":1594,"user_id":14624235,"display_name":"Vlad L"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1622806867,"creation_date":1622806867,"answer_id":67836609,"question_id":67836354,"body_markdown":"Try input array {5} or {5, 5} for instance","title":"foobar.withgoogle.com task Please Pass the Coded Messages java","body":"<p>Try input array {5} or {5, 5} for instance</p>\n"}],"owner":{"account_id":12531802,"reputation":13,"user_id":9119824,"display_name":"Nika Kvantaliani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":594,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":67836609,"answer_count":1,"score":0,"last_activity_date":1681548742,"creation_date":1622805709,"question_id":67836354,"body_markdown":"I&#39;m working on foobar.withgoogle task &quot;Please Pass the Coded Messages&quot;, I got correct calculations on my computer for every possible number, but foobar prints &quot;Test 5 failed [Hidden]&quot; what means this Hidden test? could you please help me?\r\n\r\nmy result:\r\n\r\nVerifying solution...\r\n\r\nTest 1 passed!\r\n\r\nTest 2 passed!\r\n\r\nTest 3 passed! [Hidden]\r\n\r\nTest 4 passed! [Hidden]\r\n\r\nTest 5 failed  [Hidden]\r\n\r\nPlease Pass the Coded Messages\r\n==============================\r\n\r\nYou need to pass a message to the bunny workers, but to avoid detection, the code you agreed to use is... obscure, to say the least. The bunnies are given food on standard-issue plates that are stamped with the numbers 0-9 for easier sorting, and you need to combine sets of plates to create the numbers in the code. The signal that a number is part of the code is that it is divisible by 3. You can do smaller numbers like 15 and 45 easily, but bigger numbers like 144 and 414 are a little trickier. Write a program to help yourself quickly create large numbers for use in the code, given a limited number of plates to work with.\r\n\r\nYou have L, a list containing some digits (0 to 9). Write a function solution(L) which finds the largest number that can be made from some or all of these digits and is divisible by 3. If it is not possible to make such a number, return 0 as the solution. L will contain anywhere from 1 to 9 digits.  The same digit may appear multiple times in the list, but each element in the list may only be used once.\r\n\r\nLanguages\r\n=========\r\n\r\nTo provide a Java solution, edit Solution.java\r\nTo provide a Python solution, edit solution.py\r\n\r\nTest cases\r\n==========\r\nYour code should pass the following test cases.\r\nNote that it may also be run against hidden test cases not shown here.\r\n\r\n-- Java cases --\r\nInput:\r\nSolution.solution({3, 1, 4, 1})\r\nOutput:\r\n    4311\r\n\r\nInput:\r\nSolution.solution({3, 1, 4, 1, 5, 9})\r\nOutput:\r\n    94311\r\n\r\n-- Python cases --\r\nInput:\r\nsolution.solution([3, 1, 4, 1])\r\nOutput:\r\n    4311\r\n\r\nInput:\r\nsolution.solution([3, 1, 4, 1, 5, 9])\r\nOutput:\r\n    94311\r\n\r\nUse verify [file] to test your solution and see how it does. When you are finished editing your code, use submit [file] to submit your answer. If your solution passes the test cases, it will be removed from your home folder.\r\n\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    import java.util.LinkedList;\r\n    import java.util.List;\r\n    import java.util.Queue;\r\n    \r\n    public class Solution {\r\n       public static int solution(int[] l) {\r\n            List&lt;Integer&gt; initList = new ArrayList&lt;&gt;();\r\n            List&lt;Integer&gt; resList = new ArrayList&lt;&gt;();\r\n    \r\n            Queue&lt;Integer&gt; rem0queue = new LinkedList&lt;&gt;();\r\n            Queue&lt;Integer&gt; rem1queue = new LinkedList&lt;&gt;();\r\n            Queue&lt;Integer&gt; rem2queue = new LinkedList&lt;&gt;();\r\n    \r\n            StringBuilder sbResult = new StringBuilder();\r\n            int result = 0, sum = 0, rem;\r\n    \r\n            for(int x: l){\r\n                if(x &lt; 0) return result;\r\n                initList.add(x);\r\n            }\r\n    \r\n            Collections.sort(initList);\r\n            //System.out.println(initList);\r\n    \r\n            for(int y: initList) {\r\n                sum += y;\r\n                if((y % 3) == 0) rem0queue.add(y);\r\n                else if((y % 3) == 1) rem1queue.add(y);\r\n                else rem2queue.add(y);\r\n            }\r\n    \r\n            if(sum == 0) return result;\r\n            rem = sum % 3;\r\n    \r\n    \r\n    \r\n            switch (rem) {\r\n                case 0:\r\n                    resList.addAll(rem0queue);\r\n                    resList.addAll(rem1queue);\r\n                    resList.addAll(rem2queue);\r\n                    resList.sort(Collections.reverseOrder());\r\n    \r\n                    for(int x: resList) sbResult.append(x);\r\n                    result = Integer.parseInt(sbResult.toString());\r\n                    break;\r\n    \r\n                case 1:\r\n                    if(!rem1queue.isEmpty()) rem1queue.remove();\r\n                    else {\r\n                        if(!rem2queue.isEmpty()) rem2queue.remove();\r\n                        if(!rem2queue.isEmpty()) rem2queue.remove();\r\n                    }\r\n                    resList.addAll(rem1queue);\r\n                    resList.addAll(rem2queue);\r\n                    resList.addAll(rem0queue);\r\n                    resList.sort(Collections.reverseOrder());\r\n    \r\n                    for(int x: resList) sbResult.append(x);\r\n                    //if((Integer.parseInt(sbResult.toString())) % 3 != 0) return result;\r\n                    result = Integer.parseInt(sbResult.toString());\r\n                    break;\r\n    \r\n                case 2:\r\n                    if(!rem2queue.isEmpty()) rem2queue.remove();\r\n                    else {\r\n                        if(!rem1queue.isEmpty()) rem1queue.remove();\r\n                        if(!rem1queue.isEmpty()) rem1queue.remove();\r\n                    }\r\n                    resList.addAll(rem2queue);\r\n                    resList.addAll(rem1queue);\r\n                    resList.addAll(rem0queue);\r\n                    resList.sort(Collections.reverseOrder());\r\n    \r\n                    for(int x: resList) sbResult.append(x);\r\n                    //if((Integer.parseInt(sbResult.toString())) % 3 != 0) return result;\r\n                    result = Integer.parseInt(sbResult.toString());\r\n                    break;\r\n            }\r\n    \r\n    \r\n            //System.out.println(&quot;Sum of digits &quot; + sum + &quot;\\n&quot; + &quot;Rem num &quot; + rem + &quot;\\n&quot;+ &quot;Result num &quot; + sbResult);\r\n    \r\n            return result;\r\n        }\r\n    }\r\n        \r\n\r\n","title":"foobar.withgoogle.com task Please Pass the Coded Messages java","body":"<p>I'm working on foobar.withgoogle task &quot;Please Pass the Coded Messages&quot;, I got correct calculations on my computer for every possible number, but foobar prints &quot;Test 5 failed [Hidden]&quot; what means this Hidden test? could you please help me?</p>\n<p>my result:</p>\n<p>Verifying solution...</p>\n<p>Test 1 passed!</p>\n<p>Test 2 passed!</p>\n<p>Test 3 passed! [Hidden]</p>\n<p>Test 4 passed! [Hidden]</p>\n<p>Test 5 failed  [Hidden]</p>\n<h1>Please Pass the Coded Messages</h1>\n<p>You need to pass a message to the bunny workers, but to avoid detection, the code you agreed to use is... obscure, to say the least. The bunnies are given food on standard-issue plates that are stamped with the numbers 0-9 for easier sorting, and you need to combine sets of plates to create the numbers in the code. The signal that a number is part of the code is that it is divisible by 3. You can do smaller numbers like 15 and 45 easily, but bigger numbers like 144 and 414 are a little trickier. Write a program to help yourself quickly create large numbers for use in the code, given a limited number of plates to work with.</p>\n<p>You have L, a list containing some digits (0 to 9). Write a function solution(L) which finds the largest number that can be made from some or all of these digits and is divisible by 3. If it is not possible to make such a number, return 0 as the solution. L will contain anywhere from 1 to 9 digits.  The same digit may appear multiple times in the list, but each element in the list may only be used once.</p>\n<h1>Languages</h1>\n<p>To provide a Java solution, edit Solution.java\nTo provide a Python solution, edit solution.py</p>\n<h1>Test cases</h1>\n<p>Your code should pass the following test cases.\nNote that it may also be run against hidden test cases not shown here.</p>\n<p>-- Java cases --\nInput:\nSolution.solution({3, 1, 4, 1})\nOutput:\n4311</p>\n<p>Input:\nSolution.solution({3, 1, 4, 1, 5, 9})\nOutput:\n94311</p>\n<p>-- Python cases --\nInput:\nsolution.solution([3, 1, 4, 1])\nOutput:\n4311</p>\n<p>Input:\nsolution.solution([3, 1, 4, 1, 5, 9])\nOutput:\n94311</p>\n<p>Use verify [file] to test your solution and see how it does. When you are finished editing your code, use submit [file] to submit your answer. If your solution passes the test cases, it will be removed from your home folder.</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.LinkedList;\nimport java.util.List;\nimport java.util.Queue;\n\npublic class Solution {\n   public static int solution(int[] l) {\n        List&lt;Integer&gt; initList = new ArrayList&lt;&gt;();\n        List&lt;Integer&gt; resList = new ArrayList&lt;&gt;();\n\n        Queue&lt;Integer&gt; rem0queue = new LinkedList&lt;&gt;();\n        Queue&lt;Integer&gt; rem1queue = new LinkedList&lt;&gt;();\n        Queue&lt;Integer&gt; rem2queue = new LinkedList&lt;&gt;();\n\n        StringBuilder sbResult = new StringBuilder();\n        int result = 0, sum = 0, rem;\n\n        for(int x: l){\n            if(x &lt; 0) return result;\n            initList.add(x);\n        }\n\n        Collections.sort(initList);\n        //System.out.println(initList);\n\n        for(int y: initList) {\n            sum += y;\n            if((y % 3) == 0) rem0queue.add(y);\n            else if((y % 3) == 1) rem1queue.add(y);\n            else rem2queue.add(y);\n        }\n\n        if(sum == 0) return result;\n        rem = sum % 3;\n\n\n\n        switch (rem) {\n            case 0:\n                resList.addAll(rem0queue);\n                resList.addAll(rem1queue);\n                resList.addAll(rem2queue);\n                resList.sort(Collections.reverseOrder());\n\n                for(int x: resList) sbResult.append(x);\n                result = Integer.parseInt(sbResult.toString());\n                break;\n\n            case 1:\n                if(!rem1queue.isEmpty()) rem1queue.remove();\n                else {\n                    if(!rem2queue.isEmpty()) rem2queue.remove();\n                    if(!rem2queue.isEmpty()) rem2queue.remove();\n                }\n                resList.addAll(rem1queue);\n                resList.addAll(rem2queue);\n                resList.addAll(rem0queue);\n                resList.sort(Collections.reverseOrder());\n\n                for(int x: resList) sbResult.append(x);\n                //if((Integer.parseInt(sbResult.toString())) % 3 != 0) return result;\n                result = Integer.parseInt(sbResult.toString());\n                break;\n\n            case 2:\n                if(!rem2queue.isEmpty()) rem2queue.remove();\n                else {\n                    if(!rem1queue.isEmpty()) rem1queue.remove();\n                    if(!rem1queue.isEmpty()) rem1queue.remove();\n                }\n                resList.addAll(rem2queue);\n                resList.addAll(rem1queue);\n                resList.addAll(rem0queue);\n                resList.sort(Collections.reverseOrder());\n\n                for(int x: resList) sbResult.append(x);\n                //if((Integer.parseInt(sbResult.toString())) % 3 != 0) return result;\n                result = Integer.parseInt(sbResult.toString());\n                break;\n        }\n\n\n        //System.out.println(&quot;Sum of digits &quot; + sum + &quot;\\n&quot; + &quot;Rem num &quot; + rem + &quot;\\n&quot;+ &quot;Result num &quot; + sbResult);\n\n        return result;\n    }\n}\n    \n</code></pre>\n"},{"tags":["java","unit-testing","mockito","dependencies"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1681535618,"post_id":76020415,"comment_id":134075677,"body_markdown":"What are you trying to test, exactly? Also, note this is a good argument for dependency injection (which is just a fancy way to say give the constructors parameters, or create constructor overloads with the parameters, so that you can pass &quot;mock&quot; objects at test time but &quot;real&quot; objects in deployment).","body":"What are you trying to test, exactly? Also, note this is a good argument for dependency injection (which is just a fancy way to say give the constructors parameters, or create constructor overloads with the parameters, so that you can pass &quot;mock&quot; objects at test time but &quot;real&quot; objects in deployment)."},{"owner":{"account_id":25451734,"reputation":23,"user_id":19253008,"display_name":"Yihan Duan"},"score":0,"creation_date":1681543777,"post_id":76020415,"comment_id":134076315,"body_markdown":"@Slaw `A` is actually a `Messagehandler`, which is used to execute messages from kafka. `D` is `LocalJsonContractDescriptionProvider` for loading blockchain contract description file `contract.json`. I want to test my `A` methods work as expected.\n\nFor constructor, `A` does not have a constructor to pass `D` into `A`.","body":"@Slaw <code>A</code> is actually a <code>Messagehandler</code>, which is used to execute messages from kafka. <code>D</code> is <code>LocalJsonContractDescriptionProvider</code> for loading blockchain contract description file <code>contract.json</code>. I want to test my <code>A</code> methods work as expected.  For constructor, <code>A</code> does not have a constructor to pass <code>D</code> into <code>A</code>."}],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681548687,"creation_date":1681548687,"answer_id":76021244,"question_id":76020415,"body_markdown":"The first option would be to declare `D` as a constructor argument. This is also called dependency injection and can be useful for testing. Additionally, you can still have a constructor without any arguments:\r\n\r\n    public class A {\r\n        public A (D d) throws FileNotFoundException {\r\n    \t\tthis.d = d;\r\n    \t}\r\n        public A () throws FileNotFoundException {\r\n    \t\tthis(new D());\r\n    \t}\r\n    \r\n        private final D d;\r\n    } \r\n\r\n    @Test\r\n    void test() {\r\n        D mock = mock(D.class);\r\n        A tested = new A(mock);\r\n        // ...\r\n    }\r\n\r\n\r\nAlternatively, you can test this code even more elegantly, without any mocks. To do so, we need to apply the same technique to `D` and use dependency injection for passing a `Reader`:\r\n\r\n    public class D { \r\n        public D () throws FileNotFoundException {\r\n            this(new InputStreamReader(new FileInputStream(&quot;filePath&quot;)));\r\n        }\r\n        public D (Reader reader) throws FileNotFoundException {\r\n            // other code...\r\n        }\r\n    }\r\n\r\nSince `Reader` is an interface, we can use different implementations for it, inside the test. For instance, we can use a `StringReader`: \r\n\r\n    @Test\r\n    void test() {\r\n        D d = new D(new StringReader(&quot;my test file content&quot;));\r\n        A tested = new A(d);\r\n        // ...\r\n    }\r\n    \r\n\r\n\r\n","title":"Java Unit Test Mock, target class new() method requires depencies mock","body":"<p>The first option would be to declare <code>D</code> as a constructor argument. This is also called dependency injection and can be useful for testing. Additionally, you can still have a constructor without any arguments:</p>\n<pre><code>public class A {\n    public A (D d) throws FileNotFoundException {\n        this.d = d;\n    }\n    public A () throws FileNotFoundException {\n        this(new D());\n    }\n\n    private final D d;\n} \n\n@Test\nvoid test() {\n    D mock = mock(D.class);\n    A tested = new A(mock);\n    // ...\n}\n</code></pre>\n<p>Alternatively, you can test this code even more elegantly, without any mocks. To do so, we need to apply the same technique to <code>D</code> and use dependency injection for passing a <code>Reader</code>:</p>\n<pre><code>public class D { \n    public D () throws FileNotFoundException {\n        this(new InputStreamReader(new FileInputStream(&quot;filePath&quot;)));\n    }\n    public D (Reader reader) throws FileNotFoundException {\n        // other code...\n    }\n}\n</code></pre>\n<p>Since <code>Reader</code> is an interface, we can use different implementations for it, inside the test. For instance, we can use a <code>StringReader</code>:</p>\n<pre><code>@Test\nvoid test() {\n    D d = new D(new StringReader(&quot;my test file content&quot;));\n    A tested = new A(d);\n    // ...\n}\n</code></pre>\n"}],"owner":{"account_id":25451734,"reputation":23,"user_id":19253008,"display_name":"Yihan Duan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76021244,"answer_count":1,"score":0,"last_activity_date":1681548687,"creation_date":1681534466,"question_id":76020415,"body_markdown":"I want to test `A` class. \r\n\r\nIn A class constructor method, a private final dependency `d` is created. I want to mock `d`. Here is the code\r\n\r\n```java\r\n\r\n\r\npublic class A {\r\n    public A () throws FileNotFoundException {}\r\n    private final D d = new D();\r\n}\r\n\r\npublic class D { \r\n    public D () throws FileNotFoundException {\r\n        Reader reader = new InputStreamReader(new FileInputStream(&quot;filePath&quot;));\r\n        // other code...\r\n    }\r\n}\r\n\r\n```\r\n\r\nSince the filePath is a special path fitting in the docker config, me and my mentor decided to use MOCK to return a `d` to test `A` class. \r\n\r\nI did not know how to mock this situation.  Previously, I did use `FieldSetter` in `Mockito` to solve simple cases.","title":"Java Unit Test Mock, target class new() method requires depencies mock","body":"<p>I want to test <code>A</code> class.</p>\n<p>In A class constructor method, a private final dependency <code>d</code> is created. I want to mock <code>d</code>. Here is the code</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n\npublic class A {\n    public A () throws FileNotFoundException {}\n    private final D d = new D();\n}\n\npublic class D { \n    public D () throws FileNotFoundException {\n        Reader reader = new InputStreamReader(new FileInputStream(&quot;filePath&quot;));\n        // other code...\n    }\n}\n\n</code></pre>\n<p>Since the filePath is a special path fitting in the docker config, me and my mentor decided to use MOCK to return a <code>d</code> to test <code>A</code> class.</p>\n<p>I did not know how to mock this situation.  Previously, I did use <code>FieldSetter</code> in <code>Mockito</code> to solve simple cases.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1681548819,"post_id":76021241,"comment_id":134076862,"body_markdown":"Do you have a pom.xml for each module? Then you can include the modules you want exactly where  you need it without unnecessary modules.","body":"Do you have a pom.xml for each module? Then you can include the modules you want exactly where  you need it without unnecessary modules."},{"owner":{"account_id":17400576,"reputation":35,"user_id":12609542,"display_name":"David Blbulyan"},"score":0,"creation_date":1681548922,"post_id":76021241,"comment_id":134076867,"body_markdown":"I don&#39;t want to do another project for oeadl-annotations, because this module is the part of my library. And i want to change it, only if I change all my library or if I add new functions","body":"I don&#39;t want to do another project for oeadl-annotations, because this module is the part of my library. And i want to change it, only if I change all my library or if I add new functions"},{"owner":{"account_id":17400576,"reputation":35,"user_id":12609542,"display_name":"David Blbulyan"},"score":0,"creation_date":1681548945,"post_id":76021241,"comment_id":134076871,"body_markdown":"@JustanotherJavaprogrammer yes, I have","body":"@JustanotherJavaprogrammer yes, I have"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1681550311,"post_id":76021241,"comment_id":134077000,"body_markdown":"What do you mean by `import` ? Do you mean to use that module (jar file)?","body":"What do you mean by <code>import</code> ? Do you mean to use that module (jar file)?"},{"owner":{"account_id":17400576,"reputation":35,"user_id":12609542,"display_name":"David Blbulyan"},"score":0,"creation_date":1681551968,"post_id":76021241,"comment_id":134077171,"body_markdown":"@khmarbaise I mean for exmple, add dependency in project, where the part of this library will be used(OEADL-ANNOTATIONS or OEADL-SWING)","body":"@khmarbaise I mean for exmple, add dependency in project, where the part of this library will be used(OEADL-ANNOTATIONS or OEADL-SWING)"},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1681554786,"post_id":76021241,"comment_id":134077476,"body_markdown":"Create a Maven multi-module project. Each module lies in its own directory and is compiled to a JAR. Then you can define a dependency on whichever JAR you want. You cannot define dependencies on parts of JARs.","body":"Create a Maven multi-module project. Each module lies in its own directory and is compiled to a JAR. Then you can define a dependency on whichever JAR you want. You cannot define dependencies on parts of JARs."}],"owner":{"account_id":17400576,"reputation":35,"user_id":12609542,"display_name":"David Blbulyan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681548657,"creation_date":1681548657,"question_id":76021241,"body_markdown":"I have a question. I have a library for displaying and editing objects, this library contains mudules:\r\n* OEADL-EXCEPTIONS - this module contains exceptions for my library\r\n* OEADL-ANNOTATIONS - this module contains necessary annotations for classes to markup to be handled by my library\r\n* OEADL-SWING - this module using for displaying and editing objects(this module imports OEADL-EXCEPTION, OEADL-ANNOTATIONS)\r\n\r\nAll these modules are submodules of the my library. And I want to use, for example, only module OEADL-ANNOTATIONS on server side, OEADL-SWING - on client side\r\nHow can I do it ? Is there an opportunity for using \r\nBecause I don&#39;t know how to import only submodule from module in Maven. ","title":"How to import submodule from maven module?","body":"<p>I have a question. I have a library for displaying and editing objects, this library contains mudules:</p>\n<ul>\n<li>OEADL-EXCEPTIONS - this module contains exceptions for my library</li>\n<li>OEADL-ANNOTATIONS - this module contains necessary annotations for classes to markup to be handled by my library</li>\n<li>OEADL-SWING - this module using for displaying and editing objects(this module imports OEADL-EXCEPTION, OEADL-ANNOTATIONS)</li>\n</ul>\n<p>All these modules are submodules of the my library. And I want to use, for example, only module OEADL-ANNOTATIONS on server side, OEADL-SWING - on client side\nHow can I do it ? Is there an opportunity for using\nBecause I don't know how to import only submodule from module in Maven.</p>\n"},{"tags":["java","asp.net","azure"],"comments":[{"owner":{"account_id":3463354,"reputation":5501,"user_id":2899711,"display_name":"Simon W"},"score":0,"creation_date":1391605474,"post_id":21558437,"comment_id":32594387,"body_markdown":"Don&#39;t you need to deploy the core Java Class Libraries as well?","body":"Don&#39;t you need to deploy the core Java Class Libraries as well?"},{"owner":{"account_id":1363337,"reputation":2125,"user_id":1300288,"display_name":"Kazaag"},"score":0,"creation_date":1392223542,"post_id":21558437,"comment_id":32869436,"body_markdown":"you probably need to make sure the JDK/JRE is install on the instance (and java.exe is in the PATH)","body":"you probably need to make sure the JDK/JRE is install on the instance (and java.exe is in the PATH)"}],"owner":{"account_id":274000,"reputation":52189,"user_id":565968,"accept_rate":98,"display_name":"frenchie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681548425,"creation_date":1391532571,"question_id":21558437,"body_markdown":"I have an asp.net app that will eventually be deployed on Azure. At some point, the app runs a Java process, somewhat like this:\r\n\r\n    System.Diagnostics.Process clientProcess = new System.Diagnostics.Process();\r\n    clientProcess.StartInfo.FileName = &quot;java.exe&quot;;\r\n    clientProcess.StartInfo.CreateNoWindow = true;\r\n    clientProcess.StartInfo.UseShellExecute = false;\r\n    clientProcess.StartInfo.WorkingDirectory = HttpRuntime.AppDomainAppPath;\r\n    clientProcess.StartInfo.Arguments = &quot;-jar GCC/compiler.jar --js GCC/JSTest/hello.js --js_output_file GCC/JSTest/hello-compiled.js&quot;;\r\n    clientProcess.Start();\r\n    clientProcess.WaitForExit();\r\n\r\nI have included the `java.exe` file and the `compiler.jar` file in the directories of the app and everything works. My question is this: will this code also work in Azure as-is or do I need to make some modifications?\r\n","title":"Running Java process in Azure","body":"<p>I have an asp.net app that will eventually be deployed on Azure. At some point, the app runs a Java process, somewhat like this:</p>\n<pre><code>System.Diagnostics.Process clientProcess = new System.Diagnostics.Process();\nclientProcess.StartInfo.FileName = &quot;java.exe&quot;;\nclientProcess.StartInfo.CreateNoWindow = true;\nclientProcess.StartInfo.UseShellExecute = false;\nclientProcess.StartInfo.WorkingDirectory = HttpRuntime.AppDomainAppPath;\nclientProcess.StartInfo.Arguments = &quot;-jar GCC/compiler.jar --js GCC/JSTest/hello.js --js_output_file GCC/JSTest/hello-compiled.js&quot;;\nclientProcess.Start();\nclientProcess.WaitForExit();\n</code></pre>\n<p>I have included the <code>java.exe</code> file and the <code>compiler.jar</code> file in the directories of the app and everything works. My question is this: will this code also work in Azure as-is or do I need to make some modifications?</p>\n"},{"tags":["java","regex","regex-group"],"comments":[{"owner":{"account_id":27974006,"reputation":10316,"user_id":21363224,"display_name":"markalex"},"score":5,"creation_date":1681503878,"post_id":76018678,"comment_id":134072806,"body_markdown":"Your regex already allows spaces. It &quot;disallows&quot; listed sequences: `^` means negation when first in class.","body":"Your regex already allows spaces. It &quot;disallows&quot; listed sequences: <code>^</code> means negation when first in class."},{"owner":{"account_id":4869339,"reputation":430,"user_id":3926428,"accept_rate":71,"display_name":"ylima"},"score":0,"creation_date":1681504729,"post_id":76018678,"comment_id":134072942,"body_markdown":"Does `&quot;[^a-zA-Z0-9-_ ]&quot;` work for you?","body":"Does <code>&quot;[^a-zA-Z0-9-_ ]&quot;</code> work for you?"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":2,"creation_date":1681517676,"post_id":76018678,"comment_id":134074525,"body_markdown":"Minor note (very minor): &quot;regex expression&quot; is equivalent to &quot;**reg**ular **ex**pression expression&quot;. Like saying &quot;PIN number&quot; or &quot;ATM machine&quot;... This message was brought to you by the Department of Redundancy Department.","body":"Minor note (very minor): &quot;regex expression&quot; is equivalent to &quot;<b>reg</b>ular <b>ex</b>pression expression&quot;. Like saying &quot;PIN number&quot; or &quot;ATM machine&quot;... This message was brought to you by the Department of Redundancy Department."}],"owner":{"account_id":25266683,"reputation":55,"user_id":19096722,"display_name":"William Johnson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":0,"score":1,"last_activity_date":1681548024,"creation_date":1681503753,"question_id":76018678,"body_markdown":"I have an existing regex expression: `&quot;[^a-zA-Z0-9-_]&quot;` for a parameter. I need to add to it so that I can allow spaces in a string expression when I validate. \r\n\r\nHow would I add to this expression to allow spaces? Would it be: `&quot;[^a-zA-Z0-9-_- ]&quot;`? \r\n\r\nThanks. ","title":"Regex Expression To Accept Spaces in String","body":"<p>I have an existing regex expression: <code>&quot;[^a-zA-Z0-9-_]&quot;</code> for a parameter. I need to add to it so that I can allow spaces in a string expression when I validate.</p>\n<p>How would I add to this expression to allow spaces? Would it be: <code>&quot;[^a-zA-Z0-9-_- ]&quot;</code>?</p>\n<p>Thanks.</p>\n"},{"tags":["java","json","parsing","gson"],"comments":[{"owner":{"account_id":2247970,"reputation":7110,"user_id":1980909,"accept_rate":100,"display_name":"Adrian Leonhard"},"score":4,"creation_date":1423513630,"post_id":28418662,"comment_id":45170552,"body_markdown":"Post the JSON string returned by your  post request.","body":"Post the JSON string returned by your  post request."},{"owner":{"account_id":3013735,"reputation":13241,"user_id":2556520,"display_name":"bhspencer"},"score":0,"creation_date":1423514018,"post_id":28418662,"comment_id":45170758,"body_markdown":"Post your JSON string","body":"Post your JSON string"}],"answers":[{"comments":[{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":1,"creation_date":1423514489,"post_id":28418787,"comment_id":45171015,"body_markdown":"And the very name of the method suggests why. `parseStringToObject` suggests that it expects a JSON object, which always starts with `{`.","body":"And the very name of the method suggests why. <code>parseStringToObject</code> suggests that it expects a JSON object, which always starts with <code>{</code>."},{"owner":{"account_id":3013735,"reputation":13241,"user_id":2556520,"display_name":"bhspencer"},"score":19,"creation_date":1479301732,"post_id":28418787,"comment_id":68498282,"body_markdown":"&#39;[&#39; would indicate the start of a Json Array not  a Json object.","body":"&#39;[&#39; would indicate the start of a Json Array not  a Json object."},{"owner":{"account_id":8294291,"reputation":951,"user_id":6234961,"accept_rate":0,"display_name":"Ajay Mistry"},"score":6,"creation_date":1504002833,"post_id":28418787,"comment_id":78831469,"body_markdown":"i knew that.. but what we have to do for parse that??","body":"i knew that.. but what we have to do for parse that??"},{"owner":{"account_id":3013735,"reputation":13241,"user_id":2556520,"display_name":"bhspencer"},"score":0,"creation_date":1504017628,"post_id":28418787,"comment_id":78842203,"body_markdown":"@AjayMistry It is not clear what you are asking without more detail. I suggest posting your specific problem in a new question with an example of the JSON you are trying to parse.","body":"@AjayMistry It is not clear what you are asking without more detail. I suggest posting your specific problem in a new question with an example of the JSON you are trying to parse."},{"owner":{"account_id":6806648,"reputation":1563,"user_id":5332629,"accept_rate":56,"display_name":"Hosein Aqajani"},"score":2,"creation_date":1522658312,"post_id":28418787,"comment_id":86222485,"body_markdown":"Dear @bhspencer I am using retrofit in android apk to get a simple json like `{&quot;ip&quot;:&quot;192.167.1.15&quot;}` from `Restful EJB web service with jboss EAP 7.1` in the backend. However I get “Expected BEGIN_OBJECT but was STRING at line 1 column 1”\nPlease help me...\nThis is my web service: @Stateless\n@Path(&quot;/getflashcard&quot;)\npublic class GetFlashcard {\n    @Interceptors(Validator.class)\n    @GET\n    @Produces(MediaType.APPLICATION_JSON)\n    public String getFlashcard() {\n        String jsonString = new JSONObject().put(&quot;ip&quot;, &quot;192.167.1.15&quot;).toString();\n        return jsonString;\n    }\n}","body":"Dear @bhspencer I am using retrofit in android apk to get a simple json like <code>{&quot;ip&quot;:&quot;192.167.1.15&quot;}</code> from <code>Restful EJB web service with jboss EAP 7.1</code> in the backend. However I get “Expected BEGIN_OBJECT but was STRING at line 1 column 1” Please help me... This is my web service: @Stateless @Path(&quot;/getflashcard&quot;) public class GetFlashcard {     @Interceptors(Validator.class)     @GET     @Produces(MediaType.APPLICATION_JSON)     public String getFlashcard() {         String jsonString = new JSONObject().put(&quot;ip&quot;, &quot;192.167.1.15&quot;).toString();         return jsonString;     } }"},{"owner":{"account_id":3013735,"reputation":13241,"user_id":2556520,"display_name":"bhspencer"},"score":0,"creation_date":1522678914,"post_id":28418787,"comment_id":86232553,"body_markdown":"@H.Aqjn if you GET your response using a tool such as curl what does the response look like. I imagine what you get is &quot;{&quot;ip&quot;:&quot;192.167.1.15&quot;}&quot; rather than {&quot;ip&quot;:&quot;192.167.1.15&quot;}","body":"@H.Aqjn if you GET your response using a tool such as curl what does the response look like. I imagine what you get is &quot;{&quot;ip&quot;:&quot;192.167.1.15&quot;}&quot; rather than {&quot;ip&quot;:&quot;192.167.1.15&quot;}"},{"owner":{"account_id":1626128,"reputation":3775,"user_id":1501661,"accept_rate":90,"display_name":"Iwo Kucharski"},"score":0,"creation_date":1618487510,"post_id":28418787,"comment_id":118619041,"body_markdown":"In my case for example the error was even easier - I&#39;ve put wrong path to the json file to be read. So if you read json from a file make sure there is no typo in path ;)","body":"In my case for example the error was even easier - I&#39;ve put wrong path to the json file to be read. So if you read json from a file make sure there is no typo in path ;)"},{"owner":{"account_id":24318897,"reputation":183,"user_id":18259638,"display_name":"Uncle Roger"},"score":0,"creation_date":1650531579,"post_id":28418787,"comment_id":127141504,"body_markdown":"Can you help me out? Check [here](https://stackoverflow.com/questions/71949471/having-issue-in-volley)","body":"Can you help me out? Check <a href=\"https://stackoverflow.com/questions/71949471/having-issue-in-volley\">here</a>"}],"tags":[],"owner":{"account_id":3013735,"reputation":13241,"user_id":2556520,"display_name":"bhspencer"},"comment_count":8,"down_vote_count":5,"up_vote_count":234,"is_accepted":true,"score":229,"last_activity_date":1510072308,"creation_date":1423513915,"answer_id":28418787,"question_id":28418662,"body_markdown":"Even without seeing your JSON string you can tell from the error message that it is not the correct structure to be parsed into an instance of your class.\r\n\r\nGson is expecting your JSON string to begin with an object opening brace. e.g. \r\n\r\n    {\r\n\r\nBut the string you have passed to it starts with an open quotes\r\n\r\n    &quot;","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>Even without seeing your JSON string you can tell from the error message that it is not the correct structure to be parsed into an instance of your class.</p>\n\n<p>Gson is expecting your JSON string to begin with an object opening brace. e.g. </p>\n\n<pre><code>{\n</code></pre>\n\n<p>But the string you have passed to it starts with an open quotes</p>\n\n<pre><code>\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2022172,"reputation":281,"user_id":1808071,"display_name":"BrantYu"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1443424453,"creation_date":1429497887,"answer_id":29738531,"question_id":28418662,"body_markdown":"Maybe your `JSON Object` is right,but the response that you received is not your valid data.Just like when you connect the invalid `WiFi`,you may received a strange response `&lt; html&gt;.....&lt; /html&gt;` that `GSON` can not parse.\r\n\r\nyou may need to do some `try..catch..` for this strange response to avoid crash.","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>Maybe your <code>JSON Object</code> is right,but the response that you received is not your valid data.Just like when you connect the invalid <code>WiFi</code>,you may received a strange response <code>&lt; html&gt;.....&lt; /html&gt;</code> that <code>GSON</code> can not parse.</p>\n\n<p>you may need to do some <code>try..catch..</code> for this strange response to avoid crash.</p>\n"},{"comments":[{"owner":{"account_id":4431983,"reputation":578,"user_id":4280577,"display_name":"Jessica Pennell"},"score":0,"creation_date":1575201555,"post_id":33905845,"comment_id":104479113,"body_markdown":"I want to add since this is getting views that I used a boolean for simplicity; in the &quot;real world&quot; you&#39;ll likely want to test for the presence of a string where you stored exception data you collected inside individual try/catch blocks, essentially replaying the history of the transaction to yourself so you can make intelligent decisions as to whether to retry, and send useful output when you eventually decide to fail.","body":"I want to add since this is getting views that I used a boolean for simplicity; in the &quot;real world&quot; you&#39;ll likely want to test for the presence of a string where you stored exception data you collected inside individual try/catch blocks, essentially replaying the history of the transaction to yourself so you can make intelligent decisions as to whether to retry, and send useful output when you eventually decide to fail."}],"tags":[],"owner":{"account_id":4431983,"reputation":578,"user_id":4280577,"display_name":"Jessica Pennell"},"comment_count":1,"down_vote_count":1,"up_vote_count":29,"is_accepted":false,"score":28,"last_activity_date":1448408740,"creation_date":1448407829,"answer_id":33905845,"question_id":28418662,"body_markdown":"Invalid JSON from the server should always be an expected use case. A million things can go wrong during transmission. Gson is a bit tricky, because its error output will give you one problem, and the actual exception you catch will be of a different type.\r\n\r\nWith all that in mind, the proper fix on the client side is\r\n\r\n    try\r\n    {\r\n      gson.fromJSON(ad, Ad.class);\r\n      //...\r\n    }\r\n    catch (IllegalStateException | JsonSyntaxException exception)\r\n    {\r\n      //...\r\n\r\nIf you want to know why the JSON you received from the server is wrong, you can look inside your catch block at the exception. But even if it is your problem, it&#39;s not the client&#39;s responsibility to fix JSON it is receiving from the internet.\r\n\r\nEither way, it is the client&#39;s responsibility to decide what to do when it gets bad JSON. Two possibilities are rejecting the JSON and doing nothing, and trying again.\r\n\r\nIf you are going to try again, I highly recommend setting a flag inside the try / catch block and then responding to that flag outside the try / catch block. Nested try / catch is likely how Gson got us into this mess with our stack trace and exceptions not matching up.\r\n\r\nIn other words, even though I&#39;ll admit it doesn&#39;t look very elegant, I would recommend\r\n\r\n    boolean failed = false;\r\n\r\n    try\r\n    {\r\n      gson.fromJSON(ad, Ad.class);\r\n      //...\r\n    }\r\n    catch (IllegalStateException | JsonSyntaxException exception)\r\n    {\r\n      failed = true;\r\n      //...\r\n    }\r\n\r\n    if (failed)\r\n    {\r\n      //...","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>Invalid JSON from the server should always be an expected use case. A million things can go wrong during transmission. Gson is a bit tricky, because its error output will give you one problem, and the actual exception you catch will be of a different type.</p>\n\n<p>With all that in mind, the proper fix on the client side is</p>\n\n<pre><code>try\n{\n  gson.fromJSON(ad, Ad.class);\n  //...\n}\ncatch (IllegalStateException | JsonSyntaxException exception)\n{\n  //...\n</code></pre>\n\n<p>If you want to know why the JSON you received from the server is wrong, you can look inside your catch block at the exception. But even if it is your problem, it's not the client's responsibility to fix JSON it is receiving from the internet.</p>\n\n<p>Either way, it is the client's responsibility to decide what to do when it gets bad JSON. Two possibilities are rejecting the JSON and doing nothing, and trying again.</p>\n\n<p>If you are going to try again, I highly recommend setting a flag inside the try / catch block and then responding to that flag outside the try / catch block. Nested try / catch is likely how Gson got us into this mess with our stack trace and exceptions not matching up.</p>\n\n<p>In other words, even though I'll admit it doesn't look very elegant, I would recommend</p>\n\n<pre><code>boolean failed = false;\n\ntry\n{\n  gson.fromJSON(ad, Ad.class);\n  //...\n}\ncatch (IllegalStateException | JsonSyntaxException exception)\n{\n  failed = true;\n  //...\n}\n\nif (failed)\n{\n  //...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1327328,"reputation":3529,"user_id":1271891,"accept_rate":0,"display_name":"Raj008"},"comment_count":0,"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1555756751,"creation_date":1512124102,"answer_id":47591373,"question_id":28418662,"body_markdown":"In Retrofit2, When you want to send your parameters in raw you must use Scalars.\r\n\r\nfirst add this in your gradle:\r\n \r\n\r\n        compile &#39;com.squareup.retrofit2:retrofit:2.3.0&#39;\r\n        compile &#39;com.squareup.retrofit2:converter-gson:2.3.0&#39;\r\n        compile &#39;com.squareup.retrofit2:converter-scalars:2.3.0&#39;\r\n    \r\n        public interface ApiInterface {\r\n    \r\n        String URL_BASE = &quot;http://10.157.102.22/rest/&quot;;\r\n    \r\n        @Headers(&quot;Content-Type: application/json&quot;)\r\n        @POST(&quot;login&quot;)\r\n        Call&lt;User&gt; getUser(@Body String body);\r\n    \r\n    }\r\n\r\n\r\nmy SampleActivity :\r\n\r\n \r\n\r\n       public class SampleActivity extends AppCompatActivity implements Callback&lt;User&gt; {\r\n    \r\n        @Override\r\n        protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_sample);\r\n    \r\n            Retrofit retrofit = new Retrofit.Builder()\r\n                    .baseUrl(ApiInterface.URL_BASE)\r\n                    .addConverterFactory(ScalarsConverterFactory.create())\r\n                    .addConverterFactory(GsonConverterFactory.create())\r\n                    .build();\r\n    \r\n            ApiInterface apiInterface = retrofit.create(ApiInterface.class);\r\n    \r\n    \r\n            // prepare call in Retrofit 2.0\r\n            try {\r\n                JSONObject paramObject = new JSONObject();\r\n                paramObject.put(&quot;email&quot;, &quot;sample@gmail.com&quot;);\r\n                paramObject.put(&quot;pass&quot;, &quot;4384984938943&quot;);\r\n    \r\n                Call&lt;User&gt; userCall = apiInterface.getUser(paramObject.toString());\r\n                userCall.enqueue(this);\r\n            } catch (JSONException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public void onResponse(Call&lt;User&gt; call, Response&lt;User&gt; response) {\r\n        }\r\n    \r\n        @Override\r\n        public void onFailure(Call&lt;User&gt; call, Throwable t) {\r\n        }\r\n    }\r\n\r\n\r\nReference: [https://stackoverflow.com/questions/21398598/how-to-post-raw-whole-json-in-the-body-of-a-retrofit-request][1]\r\n\r\n\r\n","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>In Retrofit2, When you want to send your parameters in raw you must use Scalars.</p>\n\n<p>first add this in your gradle:</p>\n\n<pre><code>    compile 'com.squareup.retrofit2:retrofit:2.3.0'\n    compile 'com.squareup.retrofit2:converter-gson:2.3.0'\n    compile 'com.squareup.retrofit2:converter-scalars:2.3.0'\n\n    public interface ApiInterface {\n\n    String URL_BASE = \"http://10.157.102.22/rest/\";\n\n    @Headers(\"Content-Type: application/json\")\n    @POST(\"login\")\n    Call&lt;User&gt; getUser(@Body String body);\n\n}\n</code></pre>\n\n<p>my SampleActivity :</p>\n\n<pre><code>   public class SampleActivity extends AppCompatActivity implements Callback&lt;User&gt; {\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_sample);\n\n        Retrofit retrofit = new Retrofit.Builder()\n                .baseUrl(ApiInterface.URL_BASE)\n                .addConverterFactory(ScalarsConverterFactory.create())\n                .addConverterFactory(GsonConverterFactory.create())\n                .build();\n\n        ApiInterface apiInterface = retrofit.create(ApiInterface.class);\n\n\n        // prepare call in Retrofit 2.0\n        try {\n            JSONObject paramObject = new JSONObject();\n            paramObject.put(\"email\", \"sample@gmail.com\");\n            paramObject.put(\"pass\", \"4384984938943\");\n\n            Call&lt;User&gt; userCall = apiInterface.getUser(paramObject.toString());\n            userCall.enqueue(this);\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n    }\n\n\n    @Override\n    public void onResponse(Call&lt;User&gt; call, Response&lt;User&gt; response) {\n    }\n\n    @Override\n    public void onFailure(Call&lt;User&gt; call, Throwable t) {\n    }\n}\n</code></pre>\n\n<p>Reference: [<a href=\"https://stackoverflow.com/questions/21398598/how-to-post-raw-whole-json-in-the-body-of-a-retrofit-request][1]\">How to POST raw whole JSON in the body of a Retrofit request?</a></p>\n"},{"comments":[{"owner":{"account_id":15076433,"reputation":129,"user_id":15635042,"display_name":"Siddharth Aadarsh"},"score":0,"creation_date":1686753912,"post_id":49683597,"comment_id":134843072,"body_markdown":"This worked like a charm","body":"This worked like a charm"}],"tags":[],"owner":{"account_id":10137735,"reputation":157,"user_id":7488541,"display_name":"Solomon Fissehaye"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1522976530,"creation_date":1522975382,"answer_id":49683597,"question_id":28418662,"body_markdown":"Don&#39;t use `jsonObject.toString` on a JSON object.","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>Don't use <code>jsonObject.toString</code> on a JSON object.</p>\n"},{"comments":[{"owner":{"account_id":3670584,"reputation":1569,"user_id":3057900,"accept_rate":65,"display_name":"ratzip"},"score":0,"creation_date":1536237764,"post_id":52039301,"comment_id":91357825,"body_markdown":"SERIALIZED before sending?","body":"SERIALIZED before sending?"},{"owner":{"account_id":3140590,"reputation":1145,"user_id":2656117,"display_name":"Ravi Wadje"},"score":0,"creation_date":1536578093,"post_id":52039301,"comment_id":91460327,"body_markdown":"@ratzip Sorry, I meant we should add a deserializer(logic) for the objects like DATE | DATETIME. I was facing this issue when I wanted to map a JsonObject to a JAVA object.","body":"@ratzip Sorry, I meant we should add a deserializer(logic) for the objects like DATE | DATETIME. I was facing this issue when I wanted to map a JsonObject to a JAVA object."}],"tags":[],"owner":{"account_id":3140590,"reputation":1145,"user_id":2656117,"display_name":"Ravi Wadje"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1536577997,"creation_date":1535372609,"answer_id":52039301,"question_id":28418662,"body_markdown":"Make sure you have DESERIALIZED objects like DATE/DATETIME etc. If you are directly sending JSON without deserializing it then it can cause this problem.","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>Make sure you have DESERIALIZED objects like DATE/DATETIME etc. If you are directly sending JSON without deserializing it then it can cause this problem.</p>\n"},{"tags":[],"owner":{"account_id":9016562,"reputation":331,"user_id":6719201,"display_name":"Wallace Roberto"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1535773573,"creation_date":1535773573,"answer_id":52124691,"question_id":28418662,"body_markdown":"I have come to share an solution. The error happened to me after forcing the notbook to hang up. possible solution `clean preject`.","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>I have come to share an solution. The error happened to me after forcing the notbook to hang up. possible solution <code>clean preject</code>.</p>\n"},{"tags":[],"owner":{"account_id":7564658,"reputation":1570,"user_id":5740760,"accept_rate":43,"display_name":"RAJESH KUMAR ARUMUGAM"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1535792131,"creation_date":1535792131,"answer_id":52126550,"question_id":28418662,"body_markdown":"In my case, I am Returning JSON Object as \r\n\r\n&gt; {&quot;data&quot;:&quot;&quot;,&quot;message&quot;:&quot;Attendance Saved\r\n&gt; Successfully..!!!&quot;,&quot;status&quot;:&quot;success&quot;}\r\n\r\nResolved by changing it as \r\n\r\n&gt; {&quot;data&quot;:{},&quot;message&quot;:&quot;Attendance Saved\r\n&gt; Successfully..!!!&quot;,&quot;status&quot;:&quot;success&quot;}\r\n\r\nHere data is a sub JsonObject and it should starts from { not &quot;&quot;  ","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>In my case, I am Returning JSON Object as </p>\n\n<blockquote>\n  <p>{\"data\":\"\",\"message\":\"Attendance Saved\n  Successfully..!!!\",\"status\":\"success\"}</p>\n</blockquote>\n\n<p>Resolved by changing it as </p>\n\n<blockquote>\n  <p>{\"data\":{},\"message\":\"Attendance Saved\n  Successfully..!!!\",\"status\":\"success\"}</p>\n</blockquote>\n\n<p>Here data is a sub JsonObject and it should starts from { not \"\"  </p>\n"},{"tags":[],"owner":{"account_id":14190956,"reputation":228,"user_id":10251626,"display_name":"Shabbir Ahmed"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1541764651,"creation_date":1541764651,"answer_id":53225311,"question_id":28418662,"body_markdown":"if your json format and variables are okay then check your database queries...even if data is saved  in db correctly the actual problem might be in there...recheck your queries and try again.. Hope it helps","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>if your json format and variables are okay then check your database queries...even if data is saved  in db correctly the actual problem might be in there...recheck your queries and try again.. Hope it helps</p>\n"},{"tags":[],"owner":{"account_id":9263666,"reputation":409,"user_id":6879769,"display_name":"Yazid"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1581401716,"creation_date":1581401716,"answer_id":60162969,"question_id":28418662,"body_markdown":"In my situation, I have a &quot;model&quot;, consist of several String parameters, with the exception of one: it is byte array `byte[]`.\r\nSome code snippet:\r\n\r\n    String response = args[0].toString();\r\n    Gson gson = new Gson();\r\n    BaseModel responseModel = gson.fromJson(response, BaseModel.class);\r\n\r\nThe last line above is when the\r\n\r\n    java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column\r\n\r\nis triggered. Searching through the SO, I realised I need to have some form of `Adapter` to convert my `BaseModel` to and fro a JsonObject. Having mixed of `String` and `byte[]` in a model does complicate thing. Apparently, `Gson` don&#39;t really like the situation.\r\n\r\nI end up making an `Adapter` to ensure `byte[]` is converted to `Base64` format. Here is my `Adapter` class:\r\n\r\n    public class ByteArrayToBase64Adapter implements JsonSerializer&lt;byte[]&gt;, JsonDeserializer&lt;byte[]&gt; {\r\n\r\n        @Override\r\n        public byte[] deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\r\n            return Base64.decode(json.getAsString(), Base64.NO_WRAP);\r\n        }\r\n\r\n        @Override\r\n        public JsonElement serialize(byte[] src, Type typeOfSrc, JsonSerializationContext context) {\r\n            return new JsonPrimitive(Base64.encodeToString(src, Base64.NO_WRAP));\r\n        }\r\n    }\r\n\r\nTo convert JSONObject to model, I used the following:\r\n\r\n    Gson customGson = new GsonBuilder().registerTypeHierarchyAdapter(byte[].class, new ByteArrayToBase64Adapter()).create();\r\n    BaseModel responseModel = customGson.fromJson(response, BaseModel.class);\r\n\r\nSimilarly, to convert the model to JSONObject, I used the following:\r\n\r\n    Gson customGson = new GsonBuilder().registerTypeHierarchyAdapter(byte[].class, new ByteArrayToBase64Adapter()).create();\r\n    String responseJSon = customGson.toJson(response);\r\n\r\nWhat the code is doing is basically to push the intended `class/object` (in this case, `byte[]` class) through the `Adapter` whenever it is encountered during the convertion to/fro JSONObject.","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>In my situation, I have a \"model\", consist of several String parameters, with the exception of one: it is byte array <code>byte[]</code>.\nSome code snippet:</p>\n\n<pre><code>String response = args[0].toString();\nGson gson = new Gson();\nBaseModel responseModel = gson.fromJson(response, BaseModel.class);\n</code></pre>\n\n<p>The last line above is when the</p>\n\n<pre><code>java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column\n</code></pre>\n\n<p>is triggered. Searching through the SO, I realised I need to have some form of <code>Adapter</code> to convert my <code>BaseModel</code> to and fro a JsonObject. Having mixed of <code>String</code> and <code>byte[]</code> in a model does complicate thing. Apparently, <code>Gson</code> don't really like the situation.</p>\n\n<p>I end up making an <code>Adapter</code> to ensure <code>byte[]</code> is converted to <code>Base64</code> format. Here is my <code>Adapter</code> class:</p>\n\n<pre><code>public class ByteArrayToBase64Adapter implements JsonSerializer&lt;byte[]&gt;, JsonDeserializer&lt;byte[]&gt; {\n\n    @Override\n    public byte[] deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\n        return Base64.decode(json.getAsString(), Base64.NO_WRAP);\n    }\n\n    @Override\n    public JsonElement serialize(byte[] src, Type typeOfSrc, JsonSerializationContext context) {\n        return new JsonPrimitive(Base64.encodeToString(src, Base64.NO_WRAP));\n    }\n}\n</code></pre>\n\n<p>To convert JSONObject to model, I used the following:</p>\n\n<pre><code>Gson customGson = new GsonBuilder().registerTypeHierarchyAdapter(byte[].class, new ByteArrayToBase64Adapter()).create();\nBaseModel responseModel = customGson.fromJson(response, BaseModel.class);\n</code></pre>\n\n<p>Similarly, to convert the model to JSONObject, I used the following:</p>\n\n<pre><code>Gson customGson = new GsonBuilder().registerTypeHierarchyAdapter(byte[].class, new ByteArrayToBase64Adapter()).create();\nString responseJSon = customGson.toJson(response);\n</code></pre>\n\n<p>What the code is doing is basically to push the intended <code>class/object</code> (in this case, <code>byte[]</code> class) through the <code>Adapter</code> whenever it is encountered during the convertion to/fro JSONObject.</p>\n"},{"tags":[],"owner":{"account_id":8635281,"reputation":796,"user_id":6465703,"display_name":"dave o grady"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1584592599,"creation_date":1584592599,"answer_id":60750988,"question_id":28418662,"body_markdown":"Don&#39;t forget to convert your object into Json first using Gson()\r\n\r\n      val fromUserJson = Gson().toJson(notificationRequest.fromUser)\r\n\r\nThen you can easily convert it back into an object using this awesome library\r\n\r\n          val fromUser = Gson().fromJson(fromUserJson, User::class.java)","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>Don't forget to convert your object into Json first using Gson()</p>\n\n<pre><code>  val fromUserJson = Gson().toJson(notificationRequest.fromUser)\n</code></pre>\n\n<p>Then you can easily convert it back into an object using this awesome library</p>\n\n<pre><code>      val fromUser = Gson().fromJson(fromUserJson, User::class.java)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2543653,"reputation":1780,"user_id":2208909,"display_name":"Feng Zhang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596821963,"creation_date":1596739455,"answer_id":63289889,"question_id":28418662,"body_markdown":"I had a case where I read from a handwritten json file. The json is perfect. However, this error occurred. So I write from a java object to json file, then read from that json file. things are fine. I could not see any difference between the handwritten json and the one from java object. Tried beyondCompare it sees no difference. \r\nI finally noticed the two file sizes are slightly different, and I used winHex tool and detected extra stuff.\r\nSo the solution for my situation is, make copy of the good json file, paste content into it and use.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bvchJ.png\r\n\r\n","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>I had a case where I read from a handwritten json file. The json is perfect. However, this error occurred. So I write from a java object to json file, then read from that json file. things are fine. I could not see any difference between the handwritten json and the one from java object. Tried beyondCompare it sees no difference.\nI finally noticed the two file sizes are slightly different, and I used winHex tool and detected extra stuff.\nSo the solution for my situation is, make copy of the good json file, paste content into it and use.</p>\n<p><a href=\"https://i.stack.imgur.com/bvchJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bvchJ.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"owner":{"account_id":17067803,"reputation":453,"user_id":12743240,"display_name":"gcr"},"score":0,"creation_date":1617073067,"post_id":63760393,"comment_id":118194139,"body_markdown":"That was it for me. I sent it out as Gson serialized, yet I couldn&#39;t deserialize the same instance. Ergo it was changed in transit. Were you by any chance using PubNub or is this format of escaping a common pattern?","body":"That was it for me. I sent it out as Gson serialized, yet I couldn&#39;t deserialize the same instance. Ergo it was changed in transit. Were you by any chance using PubNub or is this format of escaping a common pattern?"},{"owner":{"account_id":7802772,"reputation":191,"user_id":5901559,"display_name":"Keiv"},"score":1,"creation_date":1617160219,"post_id":63760393,"comment_id":118223680,"body_markdown":"@gcr maybe not very common, but I&#39;ve been using this approach for a while now and haven&#39;t seen any issues.","body":"@gcr maybe not very common, but I&#39;ve been using this approach for a while now and haven&#39;t seen any issues."}],"tags":[],"owner":{"account_id":7802772,"reputation":191,"user_id":5901559,"display_name":"Keiv"},"comment_count":2,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1599362553,"creation_date":1599362160,"answer_id":63760393,"question_id":28418662,"body_markdown":"I had a similar problem recently and found an interesting solution. Basically I needed to deserialize following nested JSON String into my POJO:\r\n\r\n    &quot;{\\&quot;restaurant\\&quot;:{\\&quot;id\\&quot;:\\&quot;abc-012\\&quot;,\\&quot;name\\&quot;:\\&quot;good restaurant\\&quot;,\\&quot;foodType\\&quot;:\\&quot;American\\&quot;,\\&quot;phoneNumber\\&quot;:\\&quot;123-456-7890\\&quot;,\\&quot;currency\\&quot;:\\&quot;USD\\&quot;,\\&quot;website\\&quot;:\\&quot;website.com\\&quot;,\\&quot;location\\&quot;:{\\&quot;address\\&quot;:{\\&quot;street\\&quot;:\\&quot; Good Street\\&quot;,\\&quot;city\\&quot;:\\&quot;Good City\\&quot;,\\&quot;state\\&quot;:\\&quot;CA\\&quot;,\\&quot;country\\&quot;:\\&quot;USA\\&quot;,\\&quot;postalCode\\&quot;:\\&quot;12345\\&quot;},\\&quot;coordinates\\&quot;:{\\&quot;latitude\\&quot;:\\&quot;00.7904692\\&quot;,\\&quot;longitude\\&quot;:\\&quot;-000.4047208\\&quot;}},\\&quot;restaurantUser\\&quot;:{\\&quot;firstName\\&quot;:\\&quot;test\\&quot;,\\&quot;lastName\\&quot;:\\&quot;test\\&quot;,\\&quot;email\\&quot;:\\&quot;test@test.com\\&quot;,\\&quot;title\\&quot;:\\&quot;server\\&quot;,\\&quot;phone\\&quot;:\\&quot;0000000000\\&quot;}}}&quot;\r\n\r\n\r\nI ended up using regex to remove the open quotes from beginning and the end of JSON and then used *apache.commons* *unescapeJava()* method  to unescape it. Basically passed the unclean JSON into following method to get back a cleansed one:\r\n\r\n    private String removeQuotesAndUnescape(String uncleanJson) {\r\n        String noQuotes = uncleanJson.replaceAll(&quot;^\\&quot;|\\&quot;$&quot;, &quot;&quot;);\r\n    \r\n        return StringEscapeUtils.unescapeJava(noQuotes);\r\n    }\r\n\r\nthen used Google GSON to parse it into my own Object:\r\n\r\n    MyObject myObject = new.Gson().fromJson(this.removeQuotesAndUnescape(uncleanJson));","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>I had a similar problem recently and found an interesting solution. Basically I needed to deserialize following nested JSON String into my POJO:</p>\n<pre><code>&quot;{\\&quot;restaurant\\&quot;:{\\&quot;id\\&quot;:\\&quot;abc-012\\&quot;,\\&quot;name\\&quot;:\\&quot;good restaurant\\&quot;,\\&quot;foodType\\&quot;:\\&quot;American\\&quot;,\\&quot;phoneNumber\\&quot;:\\&quot;123-456-7890\\&quot;,\\&quot;currency\\&quot;:\\&quot;USD\\&quot;,\\&quot;website\\&quot;:\\&quot;website.com\\&quot;,\\&quot;location\\&quot;:{\\&quot;address\\&quot;:{\\&quot;street\\&quot;:\\&quot; Good Street\\&quot;,\\&quot;city\\&quot;:\\&quot;Good City\\&quot;,\\&quot;state\\&quot;:\\&quot;CA\\&quot;,\\&quot;country\\&quot;:\\&quot;USA\\&quot;,\\&quot;postalCode\\&quot;:\\&quot;12345\\&quot;},\\&quot;coordinates\\&quot;:{\\&quot;latitude\\&quot;:\\&quot;00.7904692\\&quot;,\\&quot;longitude\\&quot;:\\&quot;-000.4047208\\&quot;}},\\&quot;restaurantUser\\&quot;:{\\&quot;firstName\\&quot;:\\&quot;test\\&quot;,\\&quot;lastName\\&quot;:\\&quot;test\\&quot;,\\&quot;email\\&quot;:\\&quot;test@test.com\\&quot;,\\&quot;title\\&quot;:\\&quot;server\\&quot;,\\&quot;phone\\&quot;:\\&quot;0000000000\\&quot;}}}&quot;\n</code></pre>\n<p>I ended up using regex to remove the open quotes from beginning and the end of JSON and then used <em>apache.commons</em> <em>unescapeJava()</em> method  to unescape it. Basically passed the unclean JSON into following method to get back a cleansed one:</p>\n<pre><code>private String removeQuotesAndUnescape(String uncleanJson) {\n    String noQuotes = uncleanJson.replaceAll(&quot;^\\&quot;|\\&quot;$&quot;, &quot;&quot;);\n\n    return StringEscapeUtils.unescapeJava(noQuotes);\n}\n</code></pre>\n<p>then used Google GSON to parse it into my own Object:</p>\n<pre><code>MyObject myObject = new.Gson().fromJson(this.removeQuotesAndUnescape(uncleanJson));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":535767,"reputation":1664,"user_id":905089,"accept_rate":71,"display_name":"elliptic1"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600289340,"creation_date":1600289340,"answer_id":63927720,"question_id":28418662,"body_markdown":"In my case, my custom http-client didn&#39;t support the gzip encoding. I was sending the &quot;Accept-Encoding: gzip&quot; header, and so the response was sent back as a gzip string and couldn&#39;t be decoded.\r\n\r\nThe solution was to not send that header.","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>In my case, my custom http-client didn't support the gzip encoding. I was sending the &quot;Accept-Encoding: gzip&quot; header, and so the response was sent back as a gzip string and couldn't be decoded.</p>\n<p>The solution was to not send that header.</p>\n"},{"tags":[],"owner":{"account_id":7510682,"reputation":1003,"user_id":5705721,"display_name":"Makarand"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616048924,"creation_date":1616048924,"answer_id":66685836,"question_id":28418662,"body_markdown":"I was making a POST request with some parameters using **Retrofit** in **Android**\r\n\r\n**WHAT I FACED:**\r\n\r\nThe error I was getting in Android Studio logcat:\r\n\r\n&gt;  java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING\r\n&gt; at line 2 column 1 path $\r\n\r\n[but it was working fine with VOLLY library]\r\n\r\nwhen I googled it...\r\nyou know[ Obviously json is expecting a OBJECT but...]\r\n\r\nBUT when I changed my service to return a simple string [ like print_r(&quot;don&#39;t lose hope&quot;) ] or \r\nNoting at all\r\n\r\nIt was getting printed fine in Postman \r\nbut in Android studio logcat, it was still SAME ERROR [\r\n\r\n&gt; java.lang.IllegalStateException:  Expected BEGIN_OBJECT but was STRING\r\n&gt; at line 2 column 1 path $\r\n\r\n]\r\n\r\nHold up now, I am sending a simple message or not sending anything in response and still studio is\r\ntelling me &quot;...Expected BEGIN_OBJECT but was STRING...&quot;\r\nSOMETHING IS WRONG\r\n\r\nOn 4th day:\r\nI finally stopped for looking &quot;QUICK SOLUTIONS&quot; and REALLY READ some stack overflow questions \r\nand articles carefully.\r\n\r\n**WHAT I GOT:**\r\n\r\n[Logging interceptor][1]  \r\n\r\nIt will show you whatever data comes from your server[even eco messages] which are not shown in \r\nAndorid studios logcat, \r\nthat way you can FIND THE PROBLEM.\r\n\r\nWhat I found is I was sending data with @Body like-\r\n\r\n    @Headers(&quot;Content-Type: application/json&quot;)\r\n    @POST(&quot;CreateNewPost&quot;)\r\n    Call&lt;Resp&gt; createNewPost(@Body ParaModel paraModel);\r\n\r\nbut no parameter was reaching to server, everything was null [I found using Logging interceptor]\r\n\r\nthen I simply searched an article &quot;how to make POST request using Retrofit&quot;\r\n[here&#39;s one][2] \r\n\r\n\r\n**SOLUTION:**\r\n\r\nfrom here I changed my method to:\r\n\r\n    @POST(&quot;CreateNewPost&quot;)\r\n    @FormUrlEncoded\r\n    Call&lt;Resp&gt; createNewPost(\r\n        @Field(&quot;user_id&quot;) Integer user_id,\r\n        @Field(&quot;user_name&quot;) String user_name, \r\n        @Field(&quot;description&quot;) String description,\r\n        @Field(&quot;tags&quot;) String tags);\r\n\r\nand everything was fine.\r\n\r\n**CONCLUSION:**\r\n\r\nI don&#39;t understand why Retrofit gave this error \r\n\r\n&gt; java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING\r\n&gt; at line 2 column 1 path $\r\n\r\nit doesn&#39;t make any sense at all.\r\n\r\nSo ALWAYS DEBUG in detail then find WHERE THINGS ARE LEAKING and then FIX.\r\n\r\n\r\n  [1]: https://github.com/square/okhttp/tree/master/okhttp-logging-interceptor\r\n  [2]: https://code.tutsplus.com/tutorials/sending-data-with-retrofit-2-http-client-for-android--cms-27845","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>I was making a POST request with some parameters using <strong>Retrofit</strong> in <strong>Android</strong></p>\n<p><strong>WHAT I FACED:</strong></p>\n<p>The error I was getting in Android Studio logcat:</p>\n<blockquote>\n<p>java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING\nat line 2 column 1 path $</p>\n</blockquote>\n<p>[but it was working fine with VOLLY library]</p>\n<p>when I googled it...\nyou know[ Obviously json is expecting a OBJECT but...]</p>\n<p>BUT when I changed my service to return a simple string [ like print_r(&quot;don't lose hope&quot;) ] or\nNoting at all</p>\n<p>It was getting printed fine in Postman\nbut in Android studio logcat, it was still SAME ERROR [</p>\n<blockquote>\n<p>java.lang.IllegalStateException:  Expected BEGIN_OBJECT but was STRING\nat line 2 column 1 path $</p>\n</blockquote>\n<p>]</p>\n<p>Hold up now, I am sending a simple message or not sending anything in response and still studio is\ntelling me &quot;...Expected BEGIN_OBJECT but was STRING...&quot;\nSOMETHING IS WRONG</p>\n<p>On 4th day:\nI finally stopped for looking &quot;QUICK SOLUTIONS&quot; and REALLY READ some stack overflow questions\nand articles carefully.</p>\n<p><strong>WHAT I GOT:</strong></p>\n<p><a href=\"https://github.com/square/okhttp/tree/master/okhttp-logging-interceptor\" rel=\"nofollow noreferrer\">Logging interceptor</a></p>\n<p>It will show you whatever data comes from your server[even eco messages] which are not shown in\nAndorid studios logcat,\nthat way you can FIND THE PROBLEM.</p>\n<p>What I found is I was sending data with @Body like-</p>\n<pre><code>@Headers(&quot;Content-Type: application/json&quot;)\n@POST(&quot;CreateNewPost&quot;)\nCall&lt;Resp&gt; createNewPost(@Body ParaModel paraModel);\n</code></pre>\n<p>but no parameter was reaching to server, everything was null [I found using Logging interceptor]</p>\n<p>then I simply searched an article &quot;how to make POST request using Retrofit&quot;\n<a href=\"https://code.tutsplus.com/tutorials/sending-data-with-retrofit-2-http-client-for-android--cms-27845\" rel=\"nofollow noreferrer\">here's one</a></p>\n<p><strong>SOLUTION:</strong></p>\n<p>from here I changed my method to:</p>\n<pre><code>@POST(&quot;CreateNewPost&quot;)\n@FormUrlEncoded\nCall&lt;Resp&gt; createNewPost(\n    @Field(&quot;user_id&quot;) Integer user_id,\n    @Field(&quot;user_name&quot;) String user_name, \n    @Field(&quot;description&quot;) String description,\n    @Field(&quot;tags&quot;) String tags);\n</code></pre>\n<p>and everything was fine.</p>\n<p><strong>CONCLUSION:</strong></p>\n<p>I don't understand why Retrofit gave this error</p>\n<blockquote>\n<p>java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING\nat line 2 column 1 path $</p>\n</blockquote>\n<p>it doesn't make any sense at all.</p>\n<p>So ALWAYS DEBUG in detail then find WHERE THINGS ARE LEAKING and then FIX.</p>\n"},{"tags":[],"owner":{"account_id":16585000,"reputation":338,"user_id":11984655,"display_name":"Sachidanand Pandit"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677609041,"creation_date":1623838555,"answer_id":68000737,"question_id":28418662,"body_markdown":"This error solved for by replacing .toString method to .string on the response\r\n    \r\n    toString =&gt; string (add in try{...code..}catche(IOException e))\r\n    \r\nbelow code is working for me \r\n    \r\n    try {\r\n         MainModelResponse model;\r\n         Gson gson = new GsonBuilder().create();\r\n         if (response.code() == ConstantValues.SUCCESS_OK) {\r\n             model = gson.fromJson(response.body().string(), MainModelResponse.class);\r\n         } else {\r\n           model = gson.fromJson(response.errorBody().string(), MainModelResponse.class);\r\n                        }\r\n                        moduleData.postValue(model);\r\n                    }catch (IllegalStateException | JsonSyntaxException | IOException exception){\r\n                        exception.printStackTrace();\r\n                    }\r\n}","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>This error solved for by replacing .toString method to .string on the response</p>\n<pre><code>toString =&gt; string (add in try{...code..}catche(IOException e))\n</code></pre>\n<p>below code is working for me</p>\n<pre><code>try {\n     MainModelResponse model;\n     Gson gson = new GsonBuilder().create();\n     if (response.code() == ConstantValues.SUCCESS_OK) {\n         model = gson.fromJson(response.body().string(), MainModelResponse.class);\n     } else {\n       model = gson.fromJson(response.errorBody().string(), MainModelResponse.class);\n                    }\n                    moduleData.postValue(model);\n                }catch (IllegalStateException | JsonSyntaxException | IOException exception){\n                    exception.printStackTrace();\n                }\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":6633990,"reputation":350,"user_id":5121698,"display_name":"B.Kingsun"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1623985124,"creation_date":1623985124,"answer_id":68028762,"question_id":28418662,"body_markdown":"use a string **begin &amp; end** with {}.\r\n\r\nsuch as\r\n\r\n` final String jsStr = &quot;{\\&quot;metric\\&quot;:\\&quot;opentsdb_metric\\&quot;,\\&quot;tags\\&quot;:{\\&quot;testtag\\&quot;:\\&quot;sunbotest\\&quot;},\\&quot;aggregateTags\\&quot;:[],\\&quot;dps\\&quot;:{\\&quot;1483399261\\&quot;:18}}&quot;;`\r\n\r\n`DataPoint dataPoint = new Gson().fromJson(jsStr, DataPoint.class);`\r\n\r\nthis works for me.","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>use a string <strong>begin &amp; end</strong> with {}.</p>\n<p>such as</p>\n<p><code> final String jsStr = &quot;{\\&quot;metric\\&quot;:\\&quot;opentsdb_metric\\&quot;,\\&quot;tags\\&quot;:{\\&quot;testtag\\&quot;:\\&quot;sunbotest\\&quot;},\\&quot;aggregateTags\\&quot;:[],\\&quot;dps\\&quot;:{\\&quot;1483399261\\&quot;:18}}&quot;;</code></p>\n<p><code>DataPoint dataPoint = new Gson().fromJson(jsStr, DataPoint.class);</code></p>\n<p>this works for me.</p>\n"},{"tags":[],"owner":{"account_id":11170080,"reputation":1139,"user_id":8663316,"display_name":"Faizan Haidar Khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627232919,"creation_date":1627232919,"answer_id":68520846,"question_id":28418662,"body_markdown":"In my case the object was all fine even the [Json Validator][1] was giving it a valid resposne but I was using Interface like this\r\n\r\n    @POST(NetworkConstants.REGISTER_USER)\r\n    Call&lt;UserResponse&gt; registerUser(\r\n            @Query(&quot;name&quot;) String name,\r\n            @Query(&quot;email&quot;) String email,\r\n            @Query(&quot;password&quot;) String password,\r\n            @Query(&quot;created_date&quot;) Long creationDate\r\n    );\r\n\r\nThen I changed the code to\r\n\r\n    @FormUrlEncoded\r\n    @POST(NetworkConstants.REGISTER_USER)\r\n    Call&lt;UserResponse&gt; registerUser(\r\n            @Field(&quot;name&quot;) String name,\r\n            @Field(&quot;email&quot;) String email,\r\n            @Field(&quot;password&quot;) String password,\r\n            @Field(&quot;created_date&quot;) Long creationDate\r\n    );\r\n \r\nAnd everything was resolved.\r\n\r\n  [1]: https://jsonlint.com/","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>In my case the object was all fine even the <a href=\"https://jsonlint.com/\" rel=\"nofollow noreferrer\">Json Validator</a> was giving it a valid resposne but I was using Interface like this</p>\n<pre><code>@POST(NetworkConstants.REGISTER_USER)\nCall&lt;UserResponse&gt; registerUser(\n        @Query(&quot;name&quot;) String name,\n        @Query(&quot;email&quot;) String email,\n        @Query(&quot;password&quot;) String password,\n        @Query(&quot;created_date&quot;) Long creationDate\n);\n</code></pre>\n<p>Then I changed the code to</p>\n<pre><code>@FormUrlEncoded\n@POST(NetworkConstants.REGISTER_USER)\nCall&lt;UserResponse&gt; registerUser(\n        @Field(&quot;name&quot;) String name,\n        @Field(&quot;email&quot;) String email,\n        @Field(&quot;password&quot;) String password,\n        @Field(&quot;created_date&quot;) Long creationDate\n);\n</code></pre>\n<p>And everything was resolved.</p>\n"},{"tags":[],"owner":{"account_id":3976458,"reputation":107,"user_id":3279535,"display_name":"amir.ashrafi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631197696,"creation_date":1631197696,"answer_id":69120037,"question_id":28418662,"body_markdown":"my problem not related to my codes \r\n\r\nafter copy some files from an other project got this issue\r\n\r\nin the stack pointed to Gson library\r\n\r\nin android studio 4.2.1 this problem not solved when I try  file-&gt; invalidate and restart \r\n\r\nand\r\n\r\nafter restart in first time build got same error but in second build this problem solved \r\n\r\nI don&#39;t understand why this happened","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>my problem not related to my codes</p>\n<p>after copy some files from an other project got this issue</p>\n<p>in the stack pointed to Gson library</p>\n<p>in android studio 4.2.1 this problem not solved when I try  file-&gt; invalidate and restart</p>\n<p>and</p>\n<p>after restart in first time build got same error but in second build this problem solved</p>\n<p>I don't understand why this happened</p>\n"},{"tags":[],"owner":{"account_id":11279088,"reputation":369,"user_id":8272212,"display_name":"ali sampson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632334575,"creation_date":1632334575,"answer_id":69289371,"question_id":28418662,"body_markdown":"I was using an old version of retrofit library. So what I had to do was to change my code from this after upgrading it to `com.squareup.retrofit2:retrofit:2.9.0`:\r\n\r\n    @POST(AppConstants.UPLOAD_TRANSACTION_DETAIL)\r\n    fun postPremiumAppTransactionDetail(\r\n       @Query(&quot;name&quot;) planName:String,\r\n       @Query(&quot;amount&quot;) amount:String,\r\n       @Query(&quot;user_id&quot;) userId: String,\r\n       @Query(&quot;sub_id&quot;) planId: String,\r\n       @Query(&quot;folder&quot;) description:String,\r\n       @Query(&quot;payment_type&quot;) paymentType:String):\r\n    Call&lt;TransactionResponseModel&gt;\r\n\r\nTo this:\r\n\r\n    @FormUrlEncoded\r\n    @POST(AppConstants.UPLOAD_TRANSACTION_DETAIL)\r\n    fun postPremiumAppTransactionDetail(\r\n       @Field(&quot;name&quot;) planName:String,\r\n       @Field(&quot;amount&quot;) amount:String,\r\n       @Field(&quot;user_id&quot;) userId: String,\r\n       @Field(&quot;sub_id&quot;) planId: String,\r\n       @Field(&quot;folder&quot;) description:String,\r\n       @Field(&quot;payment_type&quot;) paymentType:String):\r\n    Call&lt;TransactionResponseModel&gt;","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>I was using an old version of retrofit library. So what I had to do was to change my code from this after upgrading it to <code>com.squareup.retrofit2:retrofit:2.9.0</code>:</p>\n<pre><code>@POST(AppConstants.UPLOAD_TRANSACTION_DETAIL)\nfun postPremiumAppTransactionDetail(\n   @Query(&quot;name&quot;) planName:String,\n   @Query(&quot;amount&quot;) amount:String,\n   @Query(&quot;user_id&quot;) userId: String,\n   @Query(&quot;sub_id&quot;) planId: String,\n   @Query(&quot;folder&quot;) description:String,\n   @Query(&quot;payment_type&quot;) paymentType:String):\nCall&lt;TransactionResponseModel&gt;\n</code></pre>\n<p>To this:</p>\n<pre><code>@FormUrlEncoded\n@POST(AppConstants.UPLOAD_TRANSACTION_DETAIL)\nfun postPremiumAppTransactionDetail(\n   @Field(&quot;name&quot;) planName:String,\n   @Field(&quot;amount&quot;) amount:String,\n   @Field(&quot;user_id&quot;) userId: String,\n   @Field(&quot;sub_id&quot;) planId: String,\n   @Field(&quot;folder&quot;) description:String,\n   @Field(&quot;payment_type&quot;) paymentType:String):\nCall&lt;TransactionResponseModel&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":270905,"reputation":1480,"user_id":561139,"accept_rate":65,"display_name":"Bj&#248;rn Stenfeldt"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676293705,"creation_date":1676293705,"answer_id":75436305,"question_id":28418662,"body_markdown":"For me it turned out that I was trying to deserialize to an object that used `java.time.ZonedDateTime` for one of the properties. It worked as soon as I changed it to a `java.util.Date` instead.","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>For me it turned out that I was trying to deserialize to an object that used <code>java.time.ZonedDateTime</code> for one of the properties. It worked as soon as I changed it to a <code>java.util.Date</code> instead.</p>\n"},{"tags":[],"owner":{"account_id":19199392,"reputation":21,"user_id":14027625,"display_name":"Saqib Hussain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681548016,"creation_date":1681548016,"answer_id":76021191,"question_id":28418662,"body_markdown":"I&#39;ve contected the fortify support. It seems a problem in the RELEASE. the only possible solution was delete the release and create a new one.","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>I've contected the fortify support. It seems a problem in the RELEASE. the only possible solution was delete the release and create a new one.</p>\n"}],"owner":{"account_id":5761647,"reputation":2251,"user_id":4547869,"accept_rate":67,"display_name":"Crapo Wolf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":585432,"favorite_count":0,"down_vote_count":0,"up_vote_count":194,"accepted_answer_id":28418787,"answer_count":22,"score":194,"last_activity_date":1681548016,"creation_date":1423513495,"question_id":28418662,"body_markdown":"I have this method:\r\n\r\n    public static Object parseStringToObject(String json) {\r\n        String Object = json;\r\n        Gson gson = new Gson();\r\n        Object objects = gson.fromJson(object, Object.class);\r\n        parseConfigFromObjectToString(object);\r\n        return objects;\r\n    }\r\n    \r\n\r\nAnd I want to parse a JSON with:\r\n\r\n    public static void addObject(String IP, Object addObject) {\r\n        try {\r\n            String json = sendPostRequest(&quot;http://&quot; + IP + &quot;:3000/config/add_Object&quot;, ConfigJSONParser.parseConfigFromObjectToString(addObject));\r\n            addObject = ConfigJSONParser.parseStringToObject(json);\r\n        } catch (Exception ex) {\r\n            ex.printStackTrace();\r\n        }\r\n    }\r\n\r\nBut I get an error message:\r\n\r\n&gt; com.google.gson.JsonSyntaxException: java.lang.IllegalStateException:\r\n&gt; Expected BEGIN_OBJECT but was STRING at line 1 column 1","title":"&quot;Expected BEGIN_OBJECT but was STRING at line 1 column 1&quot;","body":"<p>I have this method:</p>\n\n<pre><code>public static Object parseStringToObject(String json) {\n    String Object = json;\n    Gson gson = new Gson();\n    Object objects = gson.fromJson(object, Object.class);\n    parseConfigFromObjectToString(object);\n    return objects;\n}\n</code></pre>\n\n<p>And I want to parse a JSON with:</p>\n\n<pre><code>public static void addObject(String IP, Object addObject) {\n    try {\n        String json = sendPostRequest(\"http://\" + IP + \":3000/config/add_Object\", ConfigJSONParser.parseConfigFromObjectToString(addObject));\n        addObject = ConfigJSONParser.parseStringToObject(json);\n    } catch (Exception ex) {\n        ex.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>But I get an error message:</p>\n\n<blockquote>\n  <p>com.google.gson.JsonSyntaxException: java.lang.IllegalStateException:\n  Expected BEGIN_OBJECT but was STRING at line 1 column 1</p>\n</blockquote>\n"},{"tags":["java","swing","graphics","awt"],"comments":[{"owner":{"account_id":9059972,"reputation":3080,"user_id":6746785,"display_name":"gthanop"},"score":0,"creation_date":1681405119,"post_id":76007980,"comment_id":134054750,"body_markdown":"Does this answer your question? [Active Rendering using Only Swing](https://stackoverflow.com/questions/28986963/active-rendering-using-only-swing)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/28986963/active-rendering-using-only-swing\">Active Rendering using Only Swing</a>"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":3,"creation_date":1681425394,"post_id":76007980,"comment_id":134058701,"body_markdown":"the Implementation shouldn&#39;t and doesn&#39;t matter - code against its public API and be happy :) it&#39;s beyond your control anyways ..","body":"the Implementation shouldn&#39;t and doesn&#39;t matter - code against its public API and be happy :) it&#39;s beyond your control anyways .."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681547970,"creation_date":1681415259,"answer_id":76009302,"question_id":76007980,"body_markdown":"Indeed looking at the API the [JComponent.paint()][1] method requires one parameter: [Graphics][2], a class that is abstract.\r\n\r\nBut that is just the API and it means at runtime some concise implementation needs to be passed. If you read the API documentation there are two known subclasses: [DebugGraphics][3] (which is not abstract) and [Graphics2D][4] which is abstract again.\r\n\r\nWhen you run some Swing application you will see that the components receive implementations of Graphics2D. In my java-11-openjdk-amd64 the class sun.java2d.SunGraphics2D is the concise class.\r\n\r\nYou can find out by subclassing any JComponent and overriding the paint() method with\r\n\r\n    public void paint(Graphics g) {\r\n        System.out.println(g.getClass().getName());\r\n        super.paint(g);\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/swing/JComponent.html#paint(java.awt.Graphics)\r\n  [2]: https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/java/awt/Graphics.html\r\n  [3]: https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/swing/DebugGraphics.html\r\n  [4]: https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/java/awt/Graphics2D.html","title":"Where can I find the implemented abstract Graphic class?","body":"<p>Indeed looking at the API the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/swing/JComponent.html#paint(java.awt.Graphics)\" rel=\"nofollow noreferrer\">JComponent.paint()</a> method requires one parameter: <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/java/awt/Graphics.html\" rel=\"nofollow noreferrer\">Graphics</a>, a class that is abstract.</p>\n<p>But that is just the API and it means at runtime some concise implementation needs to be passed. If you read the API documentation there are two known subclasses: <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/swing/DebugGraphics.html\" rel=\"nofollow noreferrer\">DebugGraphics</a> (which is not abstract) and <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/java/awt/Graphics2D.html\" rel=\"nofollow noreferrer\">Graphics2D</a> which is abstract again.</p>\n<p>When you run some Swing application you will see that the components receive implementations of Graphics2D. In my java-11-openjdk-amd64 the class sun.java2d.SunGraphics2D is the concise class.</p>\n<p>You can find out by subclassing any JComponent and overriding the paint() method with</p>\n<pre><code>public void paint(Graphics g) {\n    System.out.println(g.getClass().getName());\n    super.paint(g);\n}\n</code></pre>\n"}],"owner":{"account_id":22824258,"reputation":35,"user_id":16973742,"display_name":"De Loris"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1681547970,"creation_date":1681404676,"question_id":76007980,"body_markdown":"An abstract class is passed into paintComponent , and functions can be performed on it . Anyway , it sounds not real. So there must be a definition of concrete Graphics . I&#39;m chewing on if I can refer to that concrete class and whether it&#39;s possible to skip over re-defining paintComponent process to directly draw things . ","title":"Where can I find the implemented abstract Graphic class?","body":"<p>An abstract class is passed into paintComponent , and functions can be performed on it . Anyway , it sounds not real. So there must be a definition of concrete Graphics . I'm chewing on if I can refer to that concrete class and whether it's possible to skip over re-defining paintComponent process to directly draw things .</p>\n"},{"tags":["java","quarkus","resteasy","multipart","http-status-code-413"],"answers":[{"comments":[{"owner":{"account_id":20260580,"reputation":135,"user_id":14859042,"display_name":"codeforHarman"},"score":0,"creation_date":1700542810,"post_id":73263891,"comment_id":136664378,"body_markdown":"what is the default value ?","body":"what is the default value ?"}],"tags":[],"owner":{"account_id":17940452,"reputation":383,"user_id":16946039,"display_name":"Hugo Vinhal"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1659828254,"creation_date":1659828254,"answer_id":73263891,"question_id":73263890,"body_markdown":"After digging the [Quarkus documentation][1], the property you really need to configure is this: \r\n\r\n    quarkus.http.limits.max-form-attribute-size\r\n\r\nI have set this to 4M (4 megabytes), like this, on my application.yaml file, but of course you can configure it for any value you may want:\r\n\r\n    quarkus:\r\n        http:\r\n            limits:\r\n                max-form-attribute-size: 4M\r\n\r\nKeep in mind that if you are using an application.properties file instead, you should do it like this:\r\n\r\n    quarkus.http.limits.max-form-attribute-size=4M\r\n\r\n\r\n  [1]: https://quarkus.io/guides/http-reference","title":"Quarkus - 413 Request Entity Too Large","body":"<p>After digging the <a href=\"https://quarkus.io/guides/http-reference\" rel=\"nofollow noreferrer\">Quarkus documentation</a>, the property you really need to configure is this:</p>\n<pre><code>quarkus.http.limits.max-form-attribute-size\n</code></pre>\n<p>I have set this to 4M (4 megabytes), like this, on my application.yaml file, but of course you can configure it for any value you may want:</p>\n<pre><code>quarkus:\n    http:\n        limits:\n            max-form-attribute-size: 4M\n</code></pre>\n<p>Keep in mind that if you are using an application.properties file instead, you should do it like this:</p>\n<pre><code>quarkus.http.limits.max-form-attribute-size=4M\n</code></pre>\n"},{"comments":[{"owner":{"account_id":17940452,"reputation":383,"user_id":16946039,"display_name":"Hugo Vinhal"},"score":1,"creation_date":1683643990,"post_id":76021117,"comment_id":134396276,"body_markdown":"I would say that property works when you have an endpoint that receives a JSON as the body. For the scenario of this question we are receiving a multipart/form-data so the max-form-attribute-size should be used","body":"I would say that property works when you have an endpoint that receives a JSON as the body. For the scenario of this question we are receiving a multipart/form-data so the max-form-attribute-size should be used"}],"tags":[],"owner":{"account_id":5319768,"reputation":530,"user_id":4243558,"display_name":"khesam109"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681546978,"creation_date":1681546978,"answer_id":76021117,"question_id":73263890,"body_markdown":"My very same problem does not solve by @hugo solution. I fixed it using property `quarkus.http.limits.max-body-size`\r\n","title":"Quarkus - 413 Request Entity Too Large","body":"<p>My very same problem does not solve by @hugo solution. I fixed it using property <code>quarkus.http.limits.max-body-size</code></p>\n"}],"owner":{"account_id":17940452,"reputation":383,"user_id":16946039,"display_name":"Hugo Vinhal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2117,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73263891,"answer_count":2,"score":2,"last_activity_date":1681546978,"creation_date":1659828254,"question_id":73263890,"body_markdown":"I am developing a Quarkus application and using RESTEasy Reactive. One of the endpoints receives a multipart/form-data mime type object but when I try to use it sometimes the &quot;413 - Request Entity too Large&quot; error occurs.","title":"Quarkus - 413 Request Entity Too Large","body":"<p>I am developing a Quarkus application and using RESTEasy Reactive. One of the endpoints receives a multipart/form-data mime type object but when I try to use it sometimes the &quot;413 - Request Entity too Large&quot; error occurs.</p>\n"},{"tags":["java","hibernate","orm","spring-data"],"answers":[{"tags":[],"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1444649191,"creation_date":1444649191,"answer_id":33079937,"question_id":33079769,"body_markdown":"Yes. [`Save()`][1] method do create new record if and only if your Object don&#39;t have an generated identifier\r\n\r\n\r\n&gt;Persist the given transient instance, first assigning a generated identifier. (**Or using the current value of the identifier property if the assigned generator is used.**)\r\n\r\nIf you have already a generated identifier associated with your Object, it just saves to that row.\r\n\r\n\r\n  [1]: http://grepcode.com/file/repo1.maven.org/maven2/org.hibernate/hibernate-core/4.3.3.Final/org/hibernate/Session.java#Session.save%28java.lang.Object%29","title":"Some clarification on the Hibernate save() method. Why correctly update an existing record?","body":"<p>Yes. <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/org.hibernate/hibernate-core/4.3.3.Final/org/hibernate/Session.java#Session.save%28java.lang.Object%29\" rel=\"nofollow\"><code>Save()</code></a> method do create new record if and only if your Object don't have an generated identifier</p>\n\n<blockquote>\n  <p>Persist the given transient instance, first assigning a generated identifier. (<strong>Or using the current value of the identifier property if the assigned generator is used.</strong>)</p>\n</blockquote>\n\n<p>If you have already a generated identifier associated with your Object, it just saves to that row.</p>\n"}],"owner":{"account_id":2056257,"reputation":41415,"user_id":1833945,"accept_rate":65,"display_name":"AndreaNobili"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":33079937,"answer_count":1,"score":0,"last_activity_date":1681546923,"creation_date":1444648635,"question_id":33079769,"body_markdown":"I am pretty new in Hibernate and I have the following doubt.\r\n\r\nInto a database table named **TWP1007_PROGETTO** I have this row (but the content is not important at this time):\r\n\r\n    PRG_PRO\tCOD_MEC_ATT\tDAT_ANN_SCO_ATT\tCOD_MEC_INI_PRO\tCOD_PRO\tIMP_FIN\tCOD_TIP_STA\tFLG_TIP_PRG\tPRG_GRA_WIF\tPRG_GRA_PNS\tFLG_PRE_FIR_DIR\tFLG_PRE_FIR_REV\tDAT_INS_REN\tDESC_NOM_FIL_REN\tOGG_FIL_REN\tDAT_VAL\tDES_NOT_VAL\tDAT_TRA_UFF_LIQ\tIMP_TOT_SPE\tIMP_SAL\tDES_NOM_UTE_VAL\tDES_NOM_DIR_REN\tDAT_ORA_ULT_MOV\tCOD_PGM_ULT_MOV\tCOD_UTE_ULT_MOV\r\n    2\tAGIS018009\t201516\tAGIS018009\tProgetto Wifi\t7980,00\t4\tW\t2\t\t\t\t\t\t\t\tnull\t\t\t\t\t12/10/2015 00:00:00\tRimesso in lavorazione\tuser.name\r\n\r\nThen, into a Spring MVC **service** class, I have create this method to **update** a record of this table:\r\n\r\n\tpublic void rimettiInLavorazioneProgetto(Twp1007Progetto progetto) {\r\n\t\tprogettoRepo.save(progetto);\r\n\t}\r\n\r\nWhere (**Twp1007Progetto progetto** is the object that map the **TWP1007_PROGETTO** table).\r\n\r\nSo as you can see in the previous method I use the `save()` hibernate method.\r\n\r\nIt works and the record is correctly updated but it seems strange because from what I have understand the `save()` method have to create a new record whereas the `update()` method have to update an existing record.\r\n\r\nSo why it works? Why it correctly update an existing record?\r\n","title":"Some clarification on the Hibernate save() method. Why correctly update an existing record?","body":"<p>I am pretty new in Hibernate and I have the following doubt.</p>\n<p>Into a database table named <strong>TWP1007_PROGETTO</strong> I have this row (but the content is not important at this time):</p>\n<pre><code>PRG_PRO COD_MEC_ATT DAT_ANN_SCO_ATT COD_MEC_INI_PRO COD_PRO IMP_FIN COD_TIP_STA FLG_TIP_PRG PRG_GRA_WIF PRG_GRA_PNS FLG_PRE_FIR_DIR FLG_PRE_FIR_REV DAT_INS_REN DESC_NOM_FIL_REN    OGG_FIL_REN DAT_VAL DES_NOT_VAL DAT_TRA_UFF_LIQ IMP_TOT_SPE IMP_SAL DES_NOM_UTE_VAL DES_NOM_DIR_REN DAT_ORA_ULT_MOV COD_PGM_ULT_MOV COD_UTE_ULT_MOV\n2   AGIS018009  201516  AGIS018009  Progetto Wifi   7980,00 4   W   2                               null                    12/10/2015 00:00:00 Rimesso in lavorazione  user.name\n</code></pre>\n<p>Then, into a Spring MVC <strong>service</strong> class, I have create this method to <strong>update</strong> a record of this table:</p>\n<pre><code>public void rimettiInLavorazioneProgetto(Twp1007Progetto progetto) {\n    progettoRepo.save(progetto);\n}\n</code></pre>\n<p>Where (<strong>Twp1007Progetto progetto</strong> is the object that map the <strong>TWP1007_PROGETTO</strong> table).</p>\n<p>So as you can see in the previous method I use the <code>save()</code> hibernate method.</p>\n<p>It works and the record is correctly updated but it seems strange because from what I have understand the <code>save()</code> method have to create a new record whereas the <code>update()</code> method have to update an existing record.</p>\n<p>So why it works? Why it correctly update an existing record?</p>\n"},{"tags":["java","main-method"],"comments":[{"owner":{"account_id":8295956,"reputation":169,"user_id":6236211,"accept_rate":20,"display_name":"Saurabh Oza"},"score":3,"creation_date":1540818936,"post_id":53046284,"comment_id":92992024,"body_markdown":"Can you elaborate more in question ? which controller do you mean here ?","body":"Can you elaborate more in question ? which controller do you mean here ?"},{"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"score":2,"creation_date":1540819148,"post_id":53046284,"comment_id":92992136,"body_markdown":"Can you provide some more context? Where is the term &quot;controller class&quot; mentioned?","body":"Can you provide some more context? Where is the term &quot;controller class&quot; mentioned?"},{"owner":{"account_id":5018541,"reputation":12090,"user_id":4032703,"accept_rate":100,"display_name":"EJoshuaS - Stand with Ukraine"},"score":0,"creation_date":1540820948,"post_id":53046284,"comment_id":92993329,"body_markdown":"Are you sure that you&#39;re not mixing this up with the MVC design pattern commonly used in Web Development?","body":"Are you sure that you&#39;re not mixing this up with the MVC design pattern commonly used in Web Development?"}],"answers":[{"tags":[],"owner":{"account_id":4463059,"reputation":162,"user_id":3631344,"accept_rate":17,"display_name":"Rabbit"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1540819455,"creation_date":1540819167,"answer_id":53046376,"question_id":53046284,"body_markdown":"A controller class is normally a class part of the Model View Controller (MVC) pattern. \r\nA controller basically controls the flow of the data.\r\n\r\n&gt;It controls the data flow into model object and updates the view whenever data changes.\r\n\r\nI suggest you read about it:\r\n\r\n- [Tutorials point documentation on MVC][1]\r\n- [MDN Web docs on MVC ][2]\r\n\r\n\r\n  [1]: https://www.tutorialspoint.com/design_pattern/mvc_pattern.htm\r\n  [2]: https://developer.mozilla.org/en-US/docs/Web/Apps/Fundamentals/Modern_web_app_architecture/MVC_architecture","title":"What is a controller class in Java SE ?","body":"<p>A controller class is normally a class part of the Model View Controller (MVC) pattern. \nA controller basically controls the flow of the data.</p>\n\n<blockquote>\n  <p>It controls the data flow into model object and updates the view whenever data changes.</p>\n</blockquote>\n\n<p>I suggest you read about it:</p>\n\n<ul>\n<li><a href=\"https://www.tutorialspoint.com/design_pattern/mvc_pattern.htm\" rel=\"noreferrer\">Tutorials point documentation on MVC</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/Apps/Fundamentals/Modern_web_app_architecture/MVC_architecture\" rel=\"noreferrer\">MDN Web docs on MVC </a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":28311473,"reputation":1,"user_id":21648651,"display_name":"Rudra Narayan Mohanty"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681546507,"creation_date":1681546507,"answer_id":76021091,"question_id":53046284,"body_markdown":"The java class which is responsible to handle request and response.\r\nit will return Model  and view Object to DispatcherServlet.\r\nModel: Represents Data in Key Value format.\r\nView: Logical file name.\r\nControllers: it is loosely coupled with Presentation technology.","title":"What is a controller class in Java SE ?","body":"<p>The java class which is responsible to handle request and response.\nit will return Model  and view Object to DispatcherServlet.\nModel: Represents Data in Key Value format.\nView: Logical file name.\nControllers: it is loosely coupled with Presentation technology.</p>\n"}],"owner":{"display_name":"user10436512"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25801,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"answer_count":2,"score":2,"last_activity_date":1681546507,"creation_date":1540818832,"question_id":53046284,"body_markdown":"Can someone explain the meaning and the position of a controller class in Java ? Why do we need to put the main method there ? ","title":"What is a controller class in Java SE ?","body":"<p>Can someone explain the meaning and the position of a controller class in Java ? Why do we need to put the main method there ? </p>\n"},{"tags":["java","junit","mockito","integration-testing","aspectj"],"comments":[{"owner":{"account_id":9535534,"reputation":783,"user_id":7085841,"accept_rate":64,"display_name":"karthik"},"score":0,"creation_date":1483456622,"post_id":41446622,"comment_id":70099508,"body_markdown":"@kriegaex could you help me with this...","body":"@kriegaex could you help me with this..."},{"owner":{"account_id":2417156,"reputation":997,"user_id":2110961,"accept_rate":33,"display_name":"Frank M."},"score":0,"creation_date":1483458255,"post_id":41446622,"comment_id":70100521,"body_markdown":"I think you should to define count variable as static.","body":"I think you should to define count variable as static."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1483459635,"post_id":41446622,"comment_id":70101485,"body_markdown":"I am a bit busy at the moment, but I will answer later, @karthik. Just quickly: The sample aspect has a singleton instatiation model, so it is a rather philosophical question whether the member should be static or not. But no matter what, it is not a good idea to do that because it inflicts a runtime penalty on the aspect, especially when applied broadly. BTW, it is not thread-safe either. Furthermore you should not pollute your production code with testing stuff. I am going to present a (hopefully better) solution later. :-)","body":"I am a bit busy at the moment, but I will answer later, @karthik. Just quickly: The sample aspect has a singleton instatiation model, so it is a rather philosophical question whether the member should be static or not. But no matter what, it is not a good idea to do that because it inflicts a runtime penalty on the aspect, especially when applied broadly. BTW, it is not thread-safe either. Furthermore you should not pollute your production code with testing stuff. I am going to present a (hopefully better) solution later. :-)"}],"answers":[{"comments":[{"owner":{"account_id":1516166,"reputation":646,"user_id":1417125,"accept_rate":100,"display_name":"Paolo Biavati"},"score":0,"creation_date":1655214695,"post_id":41453156,"comment_id":128275744,"body_markdown":"if my aspect don&#39;t call System.out.println ? Do you suggest to add a line to print something and check in the IT as you did? Are there any other way to verify it?\nMockito.verify want a mock as 1st param, but if I mock the joinpoint and not the aspect, the mockedJoinPoint is never called, if I mock the aspect the real aspect will not fire...","body":"if my aspect don&#39;t call System.out.println ? Do you suggest to add a line to print something and check in the IT as you did? Are there any other way to verify it? Mockito.verify want a mock as 1st param, but if I mock the joinpoint and not the aspect, the mockedJoinPoint is never called, if I mock the aspect the real aspect will not fire..."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1655319015,"post_id":41453156,"comment_id":128307107,"body_markdown":"I am not sure I understand the question. Your test verifies whatever result the aspect-enhanced code under test yields or whatever other side-effect the aspect is supposed to cause. Verifying logging is one of the trickiest things to verify, most other effects of AOP should be much easier to test. There is not much difference to testing other types of Java code, the principles of testing remain the same. If you want a more detailed answer, please ask a new question and provide a complete [MCVE](https://stackoverflow.com/help/mcve).","body":"I am not sure I understand the question. Your test verifies whatever result the aspect-enhanced code under test yields or whatever other side-effect the aspect is supposed to cause. Verifying logging is one of the trickiest things to verify, most other effects of AOP should be much easier to test. There is not much difference to testing other types of Java code, the principles of testing remain the same. If you want a more detailed answer, please ask a new question and provide a complete <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>."}],"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1681545842,"creation_date":1483481215,"answer_id":41453156,"question_id":41446622,"body_markdown":"Let us use the same sample code as in [my answer to the related AspectJ unit testing question](https://stackoverflow.com/a/41407336/1082681):\r\n\r\n**Java class to be targeted by aspect:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    public class Application {\r\n        public void doSomething(int number) {\r\n            System.out.println(&quot;Doing something with number &quot; + number);\r\n        }\r\n    }\r\n\r\n**Aspect under test:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.aspect;\r\n    \r\n    import org.aspectj.lang.ProceedingJoinPoint;\r\n    import org.aspectj.lang.annotation.Around;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    \r\n    @Aspect\r\n    public class SampleAspect {\r\n        @Around(&quot;execution(* doSomething(int)) &amp;&amp; args(number)&quot;)\r\n        public Object intercept(final ProceedingJoinPoint thisJoinPoint, int number) throws Throwable {\r\n            System.out.println(thisJoinPoint + &quot; -&gt; &quot; + number);\r\n            if (number &lt; 0)\r\n                return thisJoinPoint.proceed(new Object[] { -number });\r\n            if (number &gt; 99)\r\n                throw new RuntimeException(&quot;oops&quot;);\r\n            return thisJoinPoint.proceed();\r\n        }\r\n    }\r\n\r\nYou have several options, depending on what exactly you want to test:\r\n\r\n1. You can run the AspectJ compiler and verify its console output (with weaving info enabled) in order to make sure that the expected joinpoints are actually woven and others are not. But this would rather be a test for your AspectJ configuration and the build process as such than a real integration test.\r\n2. Similarly, you can create a new weaving classloader, load the aspect and then a few classes (load-time weaving, LTW) in order to dynamically check what gets woven and what does not. In this case you are testing if your pointcuts are correct rather than the integrated application consisting of core + aspect code.\r\n3. Last, but not least, you can perform a normal integration test, assuming how the application should behave after core + aspect code have been woven correctly. How to do this, depends on you concrete situation, specifically on what kind of side effect your aspect adds to the core code.\r\n\r\nSubsequently I will describe option no. 3. Looking at the sample code above, we see the following side effects:\r\n\r\n* For small positive numbers, the aspect passes through the **_original_** parameter value to the intercepted method, the only side effect being additional log output.\r\n* For negative numbers, the aspect passes through the **_negated_** parameter value (e.g. turning -22 into 22) to the intercepted method, which is nicely testable.\r\n* For larger positive numbers, the aspect throws an **_exception_**, effectively stopping the original method from being executed at all.\r\n\r\n**Integration test for aspect:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.aspect;\r\n    \r\n    import static org.junit.Assert.assertEquals;\r\n    import static org.mockito.ArgumentMatchers.matches;\r\n    import static org.mockito.Mockito.times;\r\n    import static org.mockito.Mockito.verify;\r\n    \r\n    import java.io.PrintStream;\r\n    \r\n    import org.junit.*;\r\n    import org.junit.Before;\r\n    import org.junit.Rule;\r\n    import org.junit.Test;\r\n    import org.mockito.Mock;\r\n    import org.mockito.junit.MockitoJUnit;\r\n    import org.mockito.junit.MockitoRule;\r\n    \r\n    import de.scrum_master.app.Application;\r\n    \r\n    public class SampleAspectIT {\r\n        @Rule public MockitoRule mockitoRule = MockitoJUnit.rule();\r\n    \r\n        private Application application = new Application();\r\n    \r\n        private PrintStream originalSystemOut;\r\n        @Mock private PrintStream fakeSystemOut;\r\n    \r\n        @Before\r\n        public void setUp() throws Exception {\r\n            originalSystemOut = System.out;\r\n            System.setOut(fakeSystemOut);\r\n        }\r\n    \r\n        @After\r\n        public void tearDown() throws Exception {\r\n            System.setOut(originalSystemOut);\r\n        }\r\n    \r\n        @Test\r\n        public void testPositiveSmallNumber() throws Throwable {\r\n            application.doSomething(11);\r\n            verify(System.out, times(1)).println(matches(&quot;execution.*doSomething.* 11&quot;));\r\n            verify(System.out, times(1)).println(matches(&quot;Doing something with number 11&quot;));\r\n        }\r\n    \r\n        @Test\r\n        public void testNegativeNumber() throws Throwable {\r\n            application.doSomething(-22);\r\n            verify(System.out, times(1)).println(matches(&quot;execution.*doSomething.* -22&quot;));\r\n            verify(System.out, times(1)).println(matches(&quot;Doing something with number 22&quot;));\r\n        }\r\n    \r\n        @Test(expected = RuntimeException.class)\r\n        public void testPositiveLargeNumber() throws Throwable {\r\n            try {\r\n                application.doSomething(333);\r\n            }\r\n            catch (Exception e) {\r\n                verify(System.out, times(1)).println(matches(&quot;execution.*doSomething.* 333&quot;));\r\n                verify(System.out, times(0)).println(matches(&quot;Doing something with number&quot;));\r\n                assertEquals(&quot;oops&quot;, e.getMessage());\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n\r\nEt voil&#224;, we are testing exactly the three types of side effects our sample aspect has by inspecting log output to a mock instance of `System.out` and by making sure that the expected exception is thrown for larger positive numbers.","title":"Integration tests for AspectJ","body":"<p>Let us use the same sample code as in <a href=\"https://stackoverflow.com/a/41407336/1082681\">my answer to the related AspectJ unit testing question</a>:</p>\n<p><strong>Java class to be targeted by aspect:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class Application {\n    public void doSomething(int number) {\n        System.out.println(&quot;Doing something with number &quot; + number);\n    }\n}\n</code></pre>\n<p><strong>Aspect under test:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\n\n@Aspect\npublic class SampleAspect {\n    @Around(&quot;execution(* doSomething(int)) &amp;&amp; args(number)&quot;)\n    public Object intercept(final ProceedingJoinPoint thisJoinPoint, int number) throws Throwable {\n        System.out.println(thisJoinPoint + &quot; -&gt; &quot; + number);\n        if (number &lt; 0)\n            return thisJoinPoint.proceed(new Object[] { -number });\n        if (number &gt; 99)\n            throw new RuntimeException(&quot;oops&quot;);\n        return thisJoinPoint.proceed();\n    }\n}\n</code></pre>\n<p>You have several options, depending on what exactly you want to test:</p>\n<ol>\n<li>You can run the AspectJ compiler and verify its console output (with weaving info enabled) in order to make sure that the expected joinpoints are actually woven and others are not. But this would rather be a test for your AspectJ configuration and the build process as such than a real integration test.</li>\n<li>Similarly, you can create a new weaving classloader, load the aspect and then a few classes (load-time weaving, LTW) in order to dynamically check what gets woven and what does not. In this case you are testing if your pointcuts are correct rather than the integrated application consisting of core + aspect code.</li>\n<li>Last, but not least, you can perform a normal integration test, assuming how the application should behave after core + aspect code have been woven correctly. How to do this, depends on you concrete situation, specifically on what kind of side effect your aspect adds to the core code.</li>\n</ol>\n<p>Subsequently I will describe option no. 3. Looking at the sample code above, we see the following side effects:</p>\n<ul>\n<li>For small positive numbers, the aspect passes through the <strong><em>original</em></strong> parameter value to the intercepted method, the only side effect being additional log output.</li>\n<li>For negative numbers, the aspect passes through the <strong><em>negated</em></strong> parameter value (e.g. turning -22 into 22) to the intercepted method, which is nicely testable.</li>\n<li>For larger positive numbers, the aspect throws an <strong><em>exception</em></strong>, effectively stopping the original method from being executed at all.</li>\n</ul>\n<p><strong>Integration test for aspect:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport static org.junit.Assert.assertEquals;\nimport static org.mockito.ArgumentMatchers.matches;\nimport static org.mockito.Mockito.times;\nimport static org.mockito.Mockito.verify;\n\nimport java.io.PrintStream;\n\nimport org.junit.*;\nimport org.junit.Before;\nimport org.junit.Rule;\nimport org.junit.Test;\nimport org.mockito.Mock;\nimport org.mockito.junit.MockitoJUnit;\nimport org.mockito.junit.MockitoRule;\n\nimport de.scrum_master.app.Application;\n\npublic class SampleAspectIT {\n    @Rule public MockitoRule mockitoRule = MockitoJUnit.rule();\n\n    private Application application = new Application();\n\n    private PrintStream originalSystemOut;\n    @Mock private PrintStream fakeSystemOut;\n\n    @Before\n    public void setUp() throws Exception {\n        originalSystemOut = System.out;\n        System.setOut(fakeSystemOut);\n    }\n\n    @After\n    public void tearDown() throws Exception {\n        System.setOut(originalSystemOut);\n    }\n\n    @Test\n    public void testPositiveSmallNumber() throws Throwable {\n        application.doSomething(11);\n        verify(System.out, times(1)).println(matches(&quot;execution.*doSomething.* 11&quot;));\n        verify(System.out, times(1)).println(matches(&quot;Doing something with number 11&quot;));\n    }\n\n    @Test\n    public void testNegativeNumber() throws Throwable {\n        application.doSomething(-22);\n        verify(System.out, times(1)).println(matches(&quot;execution.*doSomething.* -22&quot;));\n        verify(System.out, times(1)).println(matches(&quot;Doing something with number 22&quot;));\n    }\n\n    @Test(expected = RuntimeException.class)\n    public void testPositiveLargeNumber() throws Throwable {\n        try {\n            application.doSomething(333);\n        }\n        catch (Exception e) {\n            verify(System.out, times(1)).println(matches(&quot;execution.*doSomething.* 333&quot;));\n            verify(System.out, times(0)).println(matches(&quot;Doing something with number&quot;));\n            assertEquals(&quot;oops&quot;, e.getMessage());\n            throw e;\n        }\n    }\n}\n</code></pre>\n<p>Et voilà, we are testing exactly the three types of side effects our sample aspect has by inspecting log output to a mock instance of <code>System.out</code> and by making sure that the expected exception is thrown for larger positive numbers.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1647995580,"post_id":71578419,"comment_id":126510639,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/71578419/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":6262549,"reputation":7,"user_id":4869247,"display_name":"DKS"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1647980258,"creation_date":1647980258,"answer_id":71578419,"question_id":41446622,"body_markdown":"@kriegaex What should be the test case implementation for below code\r\n```\r\n@Aspect\r\n@Component\r\n@Slf4j\r\npublic class SampleAspect {\r\n\r\n    @Value(&quot;${timeout:10}&quot;)\r\n    private long timeout;\r\n\r\n    @Around(&quot;@annotation(com.packagename.TrackExecutionTime)&quot;)\r\n    public Object intercept( ProceedingJoinPoint point) throws Throwable {\r\n\r\n        long startTime = System.currentTimeMillis();\r\n\r\n        Object obj = point.proceed();\r\n\r\n        long endTime  = System.currentTimeMillis();\r\n\r\n        long timeOut = endTime-startTime;\r\n\r\n        if(timeOut &gt; timeout) \r\n         {\r\n          log.error(&quot;Error occured&quot;);\r\n        }\r\n          return obj;\r\n    }\r\n}\r\n```\r\n\r\nlink:https://stackoverflow.com/questions/71577906/junit-integration-test-for-aop-spring","title":"Integration tests for AspectJ","body":"<p>@kriegaex What should be the test case implementation for below code</p>\n<pre><code>@Aspect\n@Component\n@Slf4j\npublic class SampleAspect {\n\n    @Value(&quot;${timeout:10}&quot;)\n    private long timeout;\n\n    @Around(&quot;@annotation(com.packagename.TrackExecutionTime)&quot;)\n    public Object intercept( ProceedingJoinPoint point) throws Throwable {\n\n        long startTime = System.currentTimeMillis();\n\n        Object obj = point.proceed();\n\n        long endTime  = System.currentTimeMillis();\n\n        long timeOut = endTime-startTime;\n\n        if(timeOut &gt; timeout) \n         {\n          log.error(&quot;Error occured&quot;);\n        }\n          return obj;\n    }\n}\n</code></pre>\n<p>link:<a href=\"https://stackoverflow.com/questions/71577906/junit-integration-test-for-aop-spring\">Junit-integration test for AOP Spring</a></p>\n"}],"owner":{"account_id":9535534,"reputation":783,"user_id":7085841,"accept_rate":64,"display_name":"karthik"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8498,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":41453156,"answer_count":2,"score":7,"last_activity_date":1681545842,"creation_date":1483456577,"question_id":41446622,"body_markdown":"I am trying to write Integratation  tests for Custom Aspect. Here is the Aspect Class Snippet.\r\n\r\n    @Aspect\r\n    @Component\r\n    public class SampleAspect {\r\n    \r\n        private static Logger log = LoggerFactory.getLogger(SampleAspect.class);\r\n    \r\n       private int count;\r\n    \r\n       public int getCount(){\r\n          return count;\r\n       }\r\n       \r\n        public void setCount(){\r\n          this.count= count;\r\n        }\r\n    \r\n    \r\n        @Around(&quot;execution(* org.springframework.data.mongodb.core.MongoOperations.*(..)) || execution(* org.springframework.web.client.RestOperations.*(..))&quot;)\r\n        public Object intercept(final ProceedingJoinPoint point) throws Throwable {\r\n            logger.info(&quot;invoked Cutom aspect&quot;);\r\n             setCount(1);\r\n             return point.proceed();\r\n    \r\n        }\r\n    \r\n    }\r\n\r\nSo the above aspect intercepts whenever jointpoint matches the pointcut. Its working fine. But my question is how to perform Integration test.\r\n\r\nWhat I have done is I created the attribute  &quot;count&quot; in Aspect for tracking and asserted it in my Junit. I am not sure if this is good or is there a better way of doing integration testing on aspects.\r\n\r\n\r\nHere is the snippet of Junit what I have done. I presented in bad way but I hope its undestandable of what I have done for Integration testing.\r\n\r\n    @Test\r\n    public void testSamepleAspect(){\r\n       sampleAspect.intercept(mockJointPoint);\r\n       Assert.assertEquals(simpleAspect.getCount(),1);\r\n    }\r\n","title":"Integration tests for AspectJ","body":"<p>I am trying to write Integratation  tests for Custom Aspect. Here is the Aspect Class Snippet.</p>\n\n<pre><code>@Aspect\n@Component\npublic class SampleAspect {\n\n    private static Logger log = LoggerFactory.getLogger(SampleAspect.class);\n\n   private int count;\n\n   public int getCount(){\n      return count;\n   }\n\n    public void setCount(){\n      this.count= count;\n    }\n\n\n    @Around(\"execution(* org.springframework.data.mongodb.core.MongoOperations.*(..)) || execution(* org.springframework.web.client.RestOperations.*(..))\")\n    public Object intercept(final ProceedingJoinPoint point) throws Throwable {\n        logger.info(\"invoked Cutom aspect\");\n         setCount(1);\n         return point.proceed();\n\n    }\n\n}\n</code></pre>\n\n<p>So the above aspect intercepts whenever jointpoint matches the pointcut. Its working fine. But my question is how to perform Integration test.</p>\n\n<p>What I have done is I created the attribute  \"count\" in Aspect for tracking and asserted it in my Junit. I am not sure if this is good or is there a better way of doing integration testing on aspects.</p>\n\n<p>Here is the snippet of Junit what I have done. I presented in bad way but I hope its undestandable of what I have done for Integration testing.</p>\n\n<pre><code>@Test\npublic void testSamepleAspect(){\n   sampleAspect.intercept(mockJointPoint);\n   Assert.assertEquals(simpleAspect.getCount(),1);\n}\n</code></pre>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":12440997,"reputation":11,"user_id":9059219,"display_name":"Archimedes"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681544217,"creation_date":1681544217,"answer_id":76020945,"question_id":75816005,"body_markdown":"I have a class annotated with `@Embeddable` and used as `@Embedded` in fields in many classes or in many fields of the same class. I want to prefix it when mapping with a custom annotation.\r\nBut in some specific cases, I may also use `@Convert` mapping. Therefore, even if I follow some agreed naming rules, I cannot simply perform related logic processing through the column name.\r\nDuring this process, I encountered the same trouble as you: how to obtain the metadata of the Entity class and related fields in the implementation of `ImplicitNamingStrategy` or `PhysicalNamingStrategy`.\r\nThrough debugging, I found that the parameters in the interface in the source code implementation, such as `ImplicitBasicColumnNameSource`, are passed in as instances of anonymous classes, so I used the following method to obtain data other than [closure].\r\n\r\n```java\r\n    @SneakyThrows\r\n    private AnnotatedColumn getAnnotatedColumn(ImplicitBasicColumnNameSource source) {\r\n        val field = source.getClass().getDeclaredField(&quot;this$0&quot;);\r\n        field.setAccessible(true);\r\n        return (AnnotatedColumn) field.get(source);\r\n    }\r\n```\r\nAfter getting the `AnnotatedColumn`, things are simple.\r\nThe following is a screenshot of a simple usage fragment\r\n[enter image description here][1]\r\n\r\nIt should be noted that different jpa implementations or different versions of specific implementations may obtain different objects. Class like what I got in hibernate5.6 is `Ejb3Column`\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Cs1Te.png","title":"choice based on current entity in ImplicitNamingStrategy.determineBasicColumnName","body":"<p>I have a class annotated with <code>@Embeddable</code> and used as <code>@Embedded</code> in fields in many classes or in many fields of the same class. I want to prefix it when mapping with a custom annotation.\nBut in some specific cases, I may also use <code>@Convert</code> mapping. Therefore, even if I follow some agreed naming rules, I cannot simply perform related logic processing through the column name.\nDuring this process, I encountered the same trouble as you: how to obtain the metadata of the Entity class and related fields in the implementation of <code>ImplicitNamingStrategy</code> or <code>PhysicalNamingStrategy</code>.\nThrough debugging, I found that the parameters in the interface in the source code implementation, such as <code>ImplicitBasicColumnNameSource</code>, are passed in as instances of anonymous classes, so I used the following method to obtain data other than [closure].</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @SneakyThrows\n    private AnnotatedColumn getAnnotatedColumn(ImplicitBasicColumnNameSource source) {\n        val field = source.getClass().getDeclaredField(&quot;this$0&quot;);\n        field.setAccessible(true);\n        return (AnnotatedColumn) field.get(source);\n    }\n</code></pre>\n<p>After getting the <code>AnnotatedColumn</code>, things are simple.\nThe following is a screenshot of a simple usage fragment\n<a href=\"https://i.stack.imgur.com/Cs1Te.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>It should be noted that different jpa implementations or different versions of specific implementations may obtain different objects. Class like what I got in hibernate5.6 is <code>Ejb3Column</code></p>\n"}],"owner":{"account_id":201208,"reputation":3985,"user_id":447503,"accept_rate":61,"display_name":"basin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681544217,"creation_date":1679509553,"question_id":75816005,"body_markdown":"I know a logical schema of a 3rd-party readonly DB and I want to access it with Hibernate 6. I used the schema to generate `@Entity` beans for it, but there&#39;s one problem:\r\n\r\nDifferent entities may have identical logical attribute names, but the physical column names are mapped in a special registry table in the same DB and they may differ among entities and even for the same entity in different environments. For instance, on one environment the column is called &quot;name&quot; and on another it&#39;s &quot;name2&quot;.\r\n\r\nTo solve this I&#39;m trying to implement one of these two methods:\r\n\r\n* `org.hibernate.boot.model.naming.ImplicitNamingStrategy.determineBasicColumnName(ImplicitBasicColumnNameSource)`\r\n* `org.hibernate.boot.model.naming.PhysicalNamingStrategy.toPhysicalColumnName(Identifier, JdbcEnvironment)`\r\n\r\nThey are supposed to access the registry table and convert the property accordingly.\r\n\r\nHowever, the caller does not pass the current entity name to the callbacks and I don&#39;t know for which entity to retrieve the physical column name!\r\n\r\nIs there a workaround better than prefixing all like this? `@Column(&quot;MyEntiy$MyProperty&quot;)`","title":"choice based on current entity in ImplicitNamingStrategy.determineBasicColumnName","body":"<p>I know a logical schema of a 3rd-party readonly DB and I want to access it with Hibernate 6. I used the schema to generate <code>@Entity</code> beans for it, but there's one problem:</p>\n<p>Different entities may have identical logical attribute names, but the physical column names are mapped in a special registry table in the same DB and they may differ among entities and even for the same entity in different environments. For instance, on one environment the column is called &quot;name&quot; and on another it's &quot;name2&quot;.</p>\n<p>To solve this I'm trying to implement one of these two methods:</p>\n<ul>\n<li><code>org.hibernate.boot.model.naming.ImplicitNamingStrategy.determineBasicColumnName(ImplicitBasicColumnNameSource)</code></li>\n<li><code>org.hibernate.boot.model.naming.PhysicalNamingStrategy.toPhysicalColumnName(Identifier, JdbcEnvironment)</code></li>\n</ul>\n<p>They are supposed to access the registry table and convert the property accordingly.</p>\n<p>However, the caller does not pass the current entity name to the callbacks and I don't know for which entity to retrieve the physical column name!</p>\n<p>Is there a workaround better than prefixing all like this? <code>@Column(&quot;MyEntiy$MyProperty&quot;)</code></p>\n"},{"tags":["java","arrays","templates","arraylist","frameworks"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681544480,"post_id":76020943,"comment_id":134076386,"body_markdown":"At the point you called `size()` the list hasn&#39;t had any elements added to it.  So its size is zero.  And therefore `0 &lt; size` is `false` and the loop body doesn&#39;t execute.  Note that `new ArrayList&lt;&gt;(20)` is NOT setting the size to 20.  It is setting the *capacity* to 20.  Read the javadocs for a better explanation.  Or the duplink answers.","body":"At the point you called <code>size()</code> the list hasn&#39;t had any elements added to it.  So its size is zero.  And therefore <code>0 &lt; size</code> is <code>false</code> and the loop body doesn&#39;t execute.  Note that <code>new ArrayList&lt;&gt;(20)</code> is NOT setting the size to 20.  It is setting the <i>capacity</i> to 20.  Read the javadocs for a better explanation.  Or the duplink answers."}],"owner":{"account_id":28311143,"reputation":1,"user_id":21648366,"display_name":"Atharva Narkhede"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681544664,"answer_count":0,"score":0,"last_activity_date":1681544176,"creation_date":1681544176,"question_id":76020943,"body_markdown":"package SRM;\r\n\r\nimport java.util.*;\r\n\r\npublic class Coding {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tArrayList&lt;Integer&gt; arr = new ArrayList&lt;&gt;(20);\r\n\t\tSystem.out.println(&quot;Enter the elements in the array: &quot;);\r\n\t\tfor (int i = 0; i &lt; arr.size(); i++) {\r\n\t\t\tint a = sc.nextInt();\r\n\t\t\tarr.add(a);\r\n\t\t}\r\n\r\n\t\tfor (Iterator&lt;Integer&gt; it = arr.iterator(); it.hasNext();) {\r\n\t\t\tSystem.out.println(it.next());\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nFor loop not executing.\r\nit prints &quot;Enter the elements in the array: &quot; and then terminates the program instead going getting input.\r\nHelp me solve the issue","title":"why the program doesnt enter for loop to get elements in java arraylist","body":"<p>package SRM;</p>\n<p>import java.util.*;</p>\n<p>public class Coding {</p>\n<pre><code>public static void main(String[] args) {\n    Scanner sc = new Scanner(System.in);\n    ArrayList&lt;Integer&gt; arr = new ArrayList&lt;&gt;(20);\n    System.out.println(&quot;Enter the elements in the array: &quot;);\n    for (int i = 0; i &lt; arr.size(); i++) {\n        int a = sc.nextInt();\n        arr.add(a);\n    }\n\n    for (Iterator&lt;Integer&gt; it = arr.iterator(); it.hasNext();) {\n        System.out.println(it.next());\n    }\n\n}\n</code></pre>\n<p>}</p>\n<p>For loop not executing.\nit prints &quot;Enter the elements in the array: &quot; and then terminates the program instead going getting input.\nHelp me solve the issue</p>\n"},{"tags":["java","spring","aop"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1681454898,"post_id":76009894,"comment_id":134061874,"body_markdown":"And why would it intercept the exception? I don&#39;t really understand the problem. You do something before, call proceed, and in the finally part you cleanup (or whatever you do). You don&#39;t need to do anything with the exception.","body":"And why would it intercept the exception? I don&#39;t really understand the problem. You do something before, call proceed, and in the finally part you cleanup (or whatever you do). You don&#39;t need to do anything with the exception."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1681466106,"post_id":76009894,"comment_id":134064432,"body_markdown":"Please learn [how to ask a question on SO](https://stackoverflow.com/help/how-to-ask) and provide a [minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve). Thank you.","body":"Please learn <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question on SO</a> and provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. Thank you."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681543238,"creation_date":1681466858,"answer_id":76013943,"question_id":76009894,"body_markdown":"You can, depending on your needs, either ignore the exception or log and re-throw it, whatever. Here are two possible variants to give you an idea:\r\n\r\n```java\r\npackage de.scrum_master.aspect;\r\n\r\nimport org.aspectj.lang.ProceedingJoinPoint;\r\nimport org.aspectj.lang.annotation.Around;\r\nimport org.aspectj.lang.annotation.Aspect;\r\n\r\n@Aspect\r\npublic class ErrorIgnoringAspect {\r\n  @Around(&quot;execution(* org.acme..*(..))&quot;)\r\n  public Object advice1(ProceedingJoinPoint joinPoint) throws Throwable {\r\n    System.out.println(&quot;&gt;&gt; &quot; + joinPoint);\r\n    try {\r\n      return joinPoint.proceed();\r\n    }\r\n    finally {\r\n      System.out.println(&quot;&lt;&lt; &quot; + joinPoint);\r\n    }\r\n  }\r\n\r\n  @Around(&quot;execution(* org.acme..*(..))&quot;)\r\n  public Object advice2(ProceedingJoinPoint joinPoint) throws Throwable {\r\n    System.out.println(&quot;&gt;&gt; &quot; + joinPoint);\r\n    try {\r\n      Object result = joinPoint.proceed();\r\n      System.out.println(&quot;&lt;&lt; &quot; + joinPoint + &quot; -&gt; result = &quot; + result);\r\n      return result;\r\n    }\r\n    catch (Throwable t) {\r\n      System.out.println(&quot;&lt;&lt; &quot; + joinPoint + &quot; -&gt; error = &quot; + t);\r\n      throw t;\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nIf you just want to log the result or exception, and there is no need for exception handling, method parameter or result modification, of course you can also use a combination of `@Before`, `@AfterThrowing` (log exception) and `@AfterReturning` (log result), doing away with the need to use try-catch-finally or to proceed to the joinpoint.","title":"Can I keep @Around advice from interception exceptions in methods?","body":"<p>You can, depending on your needs, either ignore the exception or log and re-throw it, whatever. Here are two possible variants to give you an idea:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\n\n@Aspect\npublic class ErrorIgnoringAspect {\n  @Around(&quot;execution(* org.acme..*(..))&quot;)\n  public Object advice1(ProceedingJoinPoint joinPoint) throws Throwable {\n    System.out.println(&quot;&gt;&gt; &quot; + joinPoint);\n    try {\n      return joinPoint.proceed();\n    }\n    finally {\n      System.out.println(&quot;&lt;&lt; &quot; + joinPoint);\n    }\n  }\n\n  @Around(&quot;execution(* org.acme..*(..))&quot;)\n  public Object advice2(ProceedingJoinPoint joinPoint) throws Throwable {\n    System.out.println(&quot;&gt;&gt; &quot; + joinPoint);\n    try {\n      Object result = joinPoint.proceed();\n      System.out.println(&quot;&lt;&lt; &quot; + joinPoint + &quot; -&gt; result = &quot; + result);\n      return result;\n    }\n    catch (Throwable t) {\n      System.out.println(&quot;&lt;&lt; &quot; + joinPoint + &quot; -&gt; error = &quot; + t);\n      throw t;\n    }\n  }\n}\n</code></pre>\n<p>If you just want to log the result or exception, and there is no need for exception handling, method parameter or result modification, of course you can also use a combination of <code>@Before</code>, <code>@AfterThrowing</code> (log exception) and <code>@AfterReturning</code> (log result), doing away with the need to use try-catch-finally or to proceed to the joinpoint.</p>\n"}],"owner":{"account_id":5079558,"reputation":383,"user_id":4076057,"accept_rate":100,"display_name":"Enigma"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76013943,"answer_count":1,"score":0,"last_activity_date":1681543238,"creation_date":1681420627,"question_id":76009894,"body_markdown":"I want to use an advice in a java spring project to set some contexts before and after certain methods for database transactions, but if there&#39;s an exception I don&#39;t want the around advice to intercept this exception. However, I still need the finally/after part of the advice to execute to do some final things. \r\n\r\nShould I switch to just using the @Before and @After advice, or is there a possible workaround with the @Around advice?","title":"Can I keep @Around advice from interception exceptions in methods?","body":"<p>I want to use an advice in a java spring project to set some contexts before and after certain methods for database transactions, but if there's an exception I don't want the around advice to intercept this exception. However, I still need the finally/after part of the advice to execute to do some final things.</p>\n<p>Should I switch to just using the @Before and @After advice, or is there a possible workaround with the @Around advice?</p>\n"},{"tags":["java","jar","anylogic","executable-jar"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1681542979,"post_id":76020780,"comment_id":134076243,"body_markdown":"I assume the _&quot;[..] export my model as a standalone Java application&quot;_ is exactly that feature... So, I guess you can&#39;t.","body":"I assume the <i>&quot;[..] export my model as a standalone Java application&quot;</i> is exactly that feature... So, I guess you can&#39;t."}],"answers":[{"tags":[],"owner":{"account_id":2486375,"reputation":11083,"user_id":2164728,"accept_rate":62,"display_name":"Benjamin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681543073,"creation_date":1681543073,"answer_id":76020867,"question_id":76020780,"body_markdown":"To get the jar files, you need to export it to a Java app. Which you can only do with the Professional version.\r\n\r\nMaybe contact support@anylogic.com and ask them if they can provide one for you...","title":"Anylogic build does not produce JAR files","body":"<p>To get the jar files, you need to export it to a Java app. Which you can only do with the Professional version.</p>\n<p>Maybe contact support@anylogic.com and ask them if they can provide one for you...</p>\n"}],"owner":{"account_id":23826464,"reputation":87,"user_id":17833439,"display_name":"Saman KHATAEI"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76020867,"answer_count":1,"score":0,"last_activity_date":1681543073,"creation_date":1681541406,"question_id":76020780,"body_markdown":"I need JAR files of an empty simulation environment. I tried to build my project, and expected to have a compiled version of my project. But I cannot find it anywhere in the project path. I do not use the professional edition of Anylogic and cannot export my model as a standalone Java application. Do you have any ideas? Can you provide me with an exported Java JAR file(s) of an empty simulation?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JJ8QZ.png","title":"Anylogic build does not produce JAR files","body":"<p>I need JAR files of an empty simulation environment. I tried to build my project, and expected to have a compiled version of my project. But I cannot find it anywhere in the project path. I do not use the professional edition of Anylogic and cannot export my model as a standalone Java application. Do you have any ideas? Can you provide me with an exported Java JAR file(s) of an empty simulation?</p>\n<p><a href=\"https://i.stack.imgur.com/JJ8QZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JJ8QZ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["python","java","open-source"],"answers":[{"tags":[],"owner":{"account_id":2274076,"reputation":261,"user_id":2000811,"accept_rate":0,"display_name":"user2000811"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1358869271,"creation_date":1358869271,"answer_id":14462330,"question_id":14462268,"body_markdown":"Why don&#39;t ask at your campus? At mine there are plenty of projects from and for students. That&#39;s the first step to go. Some projects also use opensource projects and manipulate them. So you only learn a bit of the opensource project. And for the next step many students contribute to the opensource projects that were used in the students projects.","title":"Recommendations for introductory open source projects for a second-year computer science student proficient in Python and Java","body":"<p>Why don't ask at your campus? At mine there are plenty of projects from and for students. That's the first step to go. Some projects also use opensource projects and manipulate them. So you only learn a bit of the opensource project. And for the next step many students contribute to the opensource projects that were used in the students projects.</p>\n"},{"tags":[],"owner":{"account_id":2183673,"reputation":12897,"user_id":1932588,"display_name":"Lee Meador"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1358869486,"creation_date":1358869486,"answer_id":14462411,"question_id":14462268,"body_markdown":"Most open source projects need better documentation. You could pick one that you like and work on improving the documentation as you learn about the project. If you learn to write good documentation, that&#39;s a good career skill. And as you write it, you begin to learn enough about that project to work on the code before long.","title":"Recommendations for introductory open source projects for a second-year computer science student proficient in Python and Java","body":"<p>Most open source projects need better documentation. You could pick one that you like and work on improving the documentation as you learn about the project. If you learn to write good documentation, that's a good career skill. And as you write it, you begin to learn enough about that project to work on the code before long.</p>\n"},{"tags":[],"owner":{"account_id":2055435,"reputation":1525,"user_id":1833460,"accept_rate":100,"display_name":"happy coder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1359538810,"creation_date":1358869617,"answer_id":14462453,"question_id":14462268,"body_markdown":"Check out some projects that interest you ... to get an idea of what kind of projects to get involved in.\r\n\r\nHere are some broad suggestions:\r\n1) Have you heard of [Google Summer of Code][1]? \r\n2) You could set up your own project in [SourceForge][2], or some other repository. \r\n3) You could check out what others are doing and get involved in their projects. Check out projects in SF, [Freecode][3], or [Google Code][4]. \r\n\r\nDon&#39;t put your coding ability down, put it to use. Projects can always use people for doing documentation as well. CHEERS, and happy coding to you!\r\n\r\nHere&#39;s [one more link][5] that I saw today, and it reminded me of your question. The link suggests ten things you can do to be involved in open source.\r\n\r\n\r\n  [1]: https://code.google.com/soc/\r\n  [2]: https://sourceforge.net/account/login.php?return_to=/account/\r\n  [3]: http://freecode.com/\r\n  [4]: https://code.google.com/\r\n  [5]: http://opensource.com/life/13/1/10-ways-get-started-open-source","title":"Recommendations for introductory open source projects for a second-year computer science student proficient in Python and Java","body":"<p>Check out some projects that interest you ... to get an idea of what kind of projects to get involved in.</p>\n\n<p>Here are some broad suggestions:\n1) Have you heard of <a href=\"https://code.google.com/soc/\" rel=\"nofollow\">Google Summer of Code</a>? \n2) You could set up your own project in <a href=\"https://sourceforge.net/account/login.php?return_to=/account/\" rel=\"nofollow\">SourceForge</a>, or some other repository. \n3) You could check out what others are doing and get involved in their projects. Check out projects in SF, <a href=\"http://freecode.com/\" rel=\"nofollow\">Freecode</a>, or <a href=\"https://code.google.com/\" rel=\"nofollow\">Google Code</a>. </p>\n\n<p>Don't put your coding ability down, put it to use. Projects can always use people for doing documentation as well. CHEERS, and happy coding to you!</p>\n\n<p>Here's <a href=\"http://opensource.com/life/13/1/10-ways-get-started-open-source\" rel=\"nofollow\">one more link</a> that I saw today, and it reminded me of your question. The link suggests ten things you can do to be involved in open source.</p>\n"},{"tags":[],"owner":{"account_id":346628,"reputation":63,"user_id":1607038,"display_name":"priya"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1400781816,"creation_date":1400781816,"answer_id":23814163,"question_id":14462268,"body_markdown":"If you are interested in contributing to Python , you can submit documentation and testing related patches in the beginning. Here are the steps on how to contribute. https://openhatch.org/wiki/Contributing_to_Python.   \r\n\r\nIt can also help you in applying for Google Summer of Code and other Python projects.","title":"Recommendations for introductory open source projects for a second-year computer science student proficient in Python and Java","body":"<p>If you are interested in contributing to Python , you can submit documentation and testing related patches in the beginning. Here are the steps on how to contribute. <a href=\"https://openhatch.org/wiki/Contributing_to_Python\" rel=\"nofollow\">https://openhatch.org/wiki/Contributing_to_Python</a>.   </p>\n\n<p>It can also help you in applying for Google Summer of Code and other Python projects.</p>\n"}],"owner":{"account_id":1537606,"reputation":183,"user_id":1433153,"accept_rate":71,"display_name":"user1433153"},"comment_count":0,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2058,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"closed_date":1401154109,"answer_count":4,"score":-1,"last_activity_date":1681542314,"creation_date":1358869063,"question_id":14462268,"body_markdown":"I am a second-year computer science major looking to contribute to open source projects. I have some proficiency in Python and Java and have researched various sites such as SourceForge and Apache, but I find the project listings on those sites to have a steep learning curve.\r\n\r\nCan anyone recommend some introductory open source projects that would be suitable for my level of programming skills and could potentially lead to contributions to bigger projects? I am open to any recommendations on this topic and would greatly appreciate any advice or insights.\r\n\r\nThank you for your time and help.","title":"Recommendations for introductory open source projects for a second-year computer science student proficient in Python and Java","body":"<p>I am a second-year computer science major looking to contribute to open source projects. I have some proficiency in Python and Java and have researched various sites such as SourceForge and Apache, but I find the project listings on those sites to have a steep learning curve.</p>\n<p>Can anyone recommend some introductory open source projects that would be suitable for my level of programming skills and could potentially lead to contributions to bigger projects? I am open to any recommendations on this topic and would greatly appreciate any advice or insights.</p>\n<p>Thank you for your time and help.</p>\n"},{"tags":["java","postgresql","string-parsing"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1632175561,"post_id":69261027,"comment_id":122417842,"body_markdown":"Would you like to share the Java code you&#39;ve tried so far?","body":"Would you like to share the Java code you&#39;ve tried so far?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1632176916,"post_id":69261027,"comment_id":122418106,"body_markdown":"Note: You generally shouldn&#39;t store passwords or any credentials within code. Therefore, &quot;parsing&quot; this string seems like a bad idea compared to having the credentials be injected into this URI from somewhere else (where your credentials would already be variables on their own)","body":"Note: You generally shouldn&#39;t store passwords or any credentials within code. Therefore, &quot;parsing&quot; this string seems like a bad idea compared to having the credentials be injected into this URI from somewhere else (where your credentials would already be variables on their own)"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1632194084,"post_id":69261027,"comment_id":122420608,"body_markdown":"By the way, I suggest learning about [`DataSource`](https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html) interface for holding database credentials ([Oracle tutorial](https://docs.oracle.com/javase/tutorial/jdbc/basics/sqldatasources.html)), the [`PGSimpleDataSource`](https://jdbc.postgresql.org/documentation/publicapi/org/postgresql/ds/PGSimpleDataSource.html) implementation, [directory service](https://en.wikipedia.org/wiki/Directory_service), and [Java Naming and Directory Interface](https://en.wikipedia.org/wiki/Java_Naming_and_Directory_Interface).","body":"By the way, I suggest learning about <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html\" rel=\"nofollow noreferrer\"><code>DataSource</code></a> interface for holding database credentials (<a href=\"https://docs.oracle.com/javase/tutorial/jdbc/basics/sqldatasources.html\" rel=\"nofollow noreferrer\">Oracle tutorial</a>), the <a href=\"https://jdbc.postgresql.org/documentation/publicapi/org/postgresql/ds/PGSimpleDataSource.html\" rel=\"nofollow noreferrer\"><code>PGSimpleDataSource</code></a> implementation, <a href=\"https://en.wikipedia.org/wiki/Directory_service\" rel=\"nofollow noreferrer\">directory service</a>, and <a href=\"https://en.wikipedia.org/wiki/Java_Naming_and_Directory_Interface\" rel=\"nofollow noreferrer\">Java Naming and Directory Interface</a>."}],"answers":[{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1632175485,"post_id":69261196,"comment_id":122417832,"body_markdown":"I suggest using an actual URI parser rather than split and substring or regex (URI&#39;s follow a defined spec)","body":"I suggest using an actual URI parser rather than split and substring or regex (URI&#39;s follow a defined spec)"},{"owner":{"account_id":5270185,"reputation":31,"user_id":4208693,"display_name":"Shavaiz Safdar"},"score":0,"creation_date":1632252928,"post_id":69261196,"comment_id":122441245,"body_markdown":"I tried using the URI parser but didn&#39;t get it to work for some reason and then I noticed that I was storing credentials in a String, I changed that to String Array and then did .split(&quot;:&quot;) but since not all components of the String are NOT separated by colon(:), therefore had to apply regex to extract the values to suit my need.","body":"I tried using the URI parser but didn&#39;t get it to work for some reason and then I noticed that I was storing credentials in a String, I changed that to String Array and then did .split(&quot;:&quot;) but since not all components of the String are NOT separated by colon(:), therefore had to apply regex to extract the values to suit my need."}],"tags":[],"owner":{"account_id":19870082,"reputation":489,"user_id":14556461,"display_name":"Pawel Woroniecki"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632178684,"creation_date":1632174475,"answer_id":69261196,"question_id":69261027,"body_markdown":"As suggested in the comment by @OneCricketeer - you can use URI parser to do this kind of things and it seems also to me like a best possible solution. You can implement it this way:\r\n\r\n```\r\ntry {\r\n    URI uri = new URI(&quot;postgres://username:password@host.com:123/databasename&quot;);\r\n    String[] userAndPassword = uri.getUserInfo().split(&quot;:&quot;);\r\n    String user = userAndPassword[0];\r\n    String password = userAndPassword[1];\r\n    String host = uri.getHost();\r\n    int port = uri.getPort();\r\n    String database = uri.getPath().substring(1);\r\n} catch (URISyntaxException e) {\r\n    e.printStackTrace(); // handle invalid JDBC URL syntax\r\n}\r\n```\r\n\r\nAlso think about your JDBC URL - maybe you have some possibilities to keep those parameters separately in some config and create JDBC URL as a concatentation from these parameters? It would make things easier - this way you wouldn&#39;t need any extraction of the parameters from URL.\r\n\r\n---------\r\nMy old answer below (which is worse than usage of URI parser but I&#39;m leaving it just for comparison with the above solution):\r\n\r\nI would go with regex which would be not that hard in this case and it would be then easy to extract parts of data you need.\r\n\r\nHowever, you can also use `split` method of String to get parts of the String you need, something like:\r\n\r\n```\r\nString url = &quot;postgres://username:password@hostaddress:port/databasename&quot;;\r\nString[] urlSplitByColon = url.split(&quot;:&quot;);\r\nString[] passwordAndHost = urlSplitByColon[2].split(&quot;@&quot;);\r\nString[] portAndDatabaseName = urlSplitByColon[3].split(&quot;/&quot;);\r\n\r\nString username = urlSplitByColon[1].substring(2); // substring to cut out double slash at the beginning of username\r\nString password = passwordAndHost[0];\r\nString host = passwordAndHost[1];\r\nString port = portAndDatabaseName[0];\r\nString databaseName = portAndDatabaseName[1];\r\n```\r\n\r\nbut I would really advice usage of regexp.","title":"Parse postgres URL","body":"<p>As suggested in the comment by @OneCricketeer - you can use URI parser to do this kind of things and it seems also to me like a best possible solution. You can implement it this way:</p>\n<pre><code>try {\n    URI uri = new URI(&quot;postgres://username:password@host.com:123/databasename&quot;);\n    String[] userAndPassword = uri.getUserInfo().split(&quot;:&quot;);\n    String user = userAndPassword[0];\n    String password = userAndPassword[1];\n    String host = uri.getHost();\n    int port = uri.getPort();\n    String database = uri.getPath().substring(1);\n} catch (URISyntaxException e) {\n    e.printStackTrace(); // handle invalid JDBC URL syntax\n}\n</code></pre>\n<p>Also think about your JDBC URL - maybe you have some possibilities to keep those parameters separately in some config and create JDBC URL as a concatentation from these parameters? It would make things easier - this way you wouldn't need any extraction of the parameters from URL.</p>\n<hr />\n<p>My old answer below (which is worse than usage of URI parser but I'm leaving it just for comparison with the above solution):</p>\n<p>I would go with regex which would be not that hard in this case and it would be then easy to extract parts of data you need.</p>\n<p>However, you can also use <code>split</code> method of String to get parts of the String you need, something like:</p>\n<pre><code>String url = &quot;postgres://username:password@hostaddress:port/databasename&quot;;\nString[] urlSplitByColon = url.split(&quot;:&quot;);\nString[] passwordAndHost = urlSplitByColon[2].split(&quot;@&quot;);\nString[] portAndDatabaseName = urlSplitByColon[3].split(&quot;/&quot;);\n\nString username = urlSplitByColon[1].substring(2); // substring to cut out double slash at the beginning of username\nString password = passwordAndHost[0];\nString host = passwordAndHost[1];\nString port = portAndDatabaseName[0];\nString databaseName = portAndDatabaseName[1];\n</code></pre>\n<p>but I would really advice usage of regexp.</p>\n"},{"tags":[],"owner":{"account_id":25253586,"reputation":1,"user_id":19085706,"display_name":"BruDalPer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652189310,"creation_date":1652187439,"answer_id":72186750,"question_id":69261027,"body_markdown":"In Node JS, the code below is working for me to connect to Heroku Postgres:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n      // Using URL to parse database URL parameters\r\n      const { URL } = require(&#39;url&#39;);\r\n      const myURL =\r\n      new URL(process.env.DATABASE_URL);\r\n     \r\n      // establishing a database connection\r\n      var { Client } = require(&#39;pg&#39;);\r\n      var client = new Client({\r\n        user: myURL.username, //local: postgres\r\n        host: myURL.hostname, //local: localhost\r\n        database: myURL.pathname.substring(1), //local: postgres\r\n        password: myURL.password, // local: admin\r\n        port: myURL.port,\r\n        connectionString: process.env.DATABASE_URL,\r\n        ssl: {\r\n          rejectUnauthorized: false\r\n        }\r\n      });\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nHad to use &#39;substring&#39; to remove the &#39;/&#39; from the pathname in order to extract the database string.\r\n\r\nRunning Node v16.14.2\r\n\r\n","title":"Parse postgres URL","body":"<p>In Node JS, the code below is working for me to connect to Heroku Postgres:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>  // Using URL to parse database URL parameters\n  const { URL } = require('url');\n  const myURL =\n  new URL(process.env.DATABASE_URL);\n \n  // establishing a database connection\n  var { Client } = require('pg');\n  var client = new Client({\n    user: myURL.username, //local: postgres\n    host: myURL.hostname, //local: localhost\n    database: myURL.pathname.substring(1), //local: postgres\n    password: myURL.password, // local: admin\n    port: myURL.port,\n    connectionString: process.env.DATABASE_URL,\n    ssl: {\n      rejectUnauthorized: false\n    }\n  });</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Had to use 'substring' to remove the '/' from the pathname in order to extract the database string.</p>\n<p>Running Node v16.14.2</p>\n"},{"tags":[],"owner":{"account_id":6202518,"reputation":937,"user_id":4831778,"accept_rate":67,"display_name":"M2E67"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681540959,"creation_date":1681540959,"answer_id":76020748,"question_id":69261027,"body_markdown":"    import java.sql.*;\r\n    import org.postgresql.Driver;\r\n    import org.postgresql.util.PGProperty;\r\n    \r\n    public class ParsePostgreConnectionString {\r\n       public static void main(String[] args) throws SQLException {\r\n    \r\n          // Sample PostgreSQL connection string\r\n          String connectionString = &quot;jdbc:postgresql://localhost:5432/mydb?user=myusername&amp;password=mypassword&quot;;\r\n    \r\n          // Register the PostgreSQL JDBC driver\r\n          DriverManager.registerDriver(new Driver());\r\n    \r\n          // Create a Properties object and set the connection properties\r\n          Properties props = new Properties();\r\n          PGProperty.parseConnectionString(connectionString, props);\r\n    \r\n          // Get the individual connection properties\r\n          String host = props.getProperty(&quot;host&quot;);\r\n          String port = props.getProperty(&quot;port&quot;);\r\n          String databaseName = props.getProperty(&quot;databaseName&quot;);\r\n          String user = props.getProperty(&quot;user&quot;);\r\n          String password = props.getProperty(&quot;password&quot;);\r\n    \r\n          // Print out the parsed connection properties\r\n          System.out.println(&quot;Host: &quot; + host);\r\n          System.out.println(&quot;Port: &quot; + port);\r\n          System.out.println(&quot;Database name: &quot; + databaseName);\r\n          System.out.println(&quot;User: &quot; + user);\r\n          System.out.println(&quot;Password: &quot; + password);\r\n    \r\n          // Establish a connection to the database using the parsed connection properties\r\n          Connection conn = DriverManager.getConnection(connectionString, props);\r\n    \r\n          // Use the connection to interact with the database as needed\r\n          // ...\r\n    \r\n          // Close the connection when finished\r\n          conn.close();\r\n       }\r\n    }\r\n\r\n","title":"Parse postgres URL","body":"<pre><code>import java.sql.*;\nimport org.postgresql.Driver;\nimport org.postgresql.util.PGProperty;\n\npublic class ParsePostgreConnectionString {\n   public static void main(String[] args) throws SQLException {\n\n      // Sample PostgreSQL connection string\n      String connectionString = &quot;jdbc:postgresql://localhost:5432/mydb?user=myusername&amp;password=mypassword&quot;;\n\n      // Register the PostgreSQL JDBC driver\n      DriverManager.registerDriver(new Driver());\n\n      // Create a Properties object and set the connection properties\n      Properties props = new Properties();\n      PGProperty.parseConnectionString(connectionString, props);\n\n      // Get the individual connection properties\n      String host = props.getProperty(&quot;host&quot;);\n      String port = props.getProperty(&quot;port&quot;);\n      String databaseName = props.getProperty(&quot;databaseName&quot;);\n      String user = props.getProperty(&quot;user&quot;);\n      String password = props.getProperty(&quot;password&quot;);\n\n      // Print out the parsed connection properties\n      System.out.println(&quot;Host: &quot; + host);\n      System.out.println(&quot;Port: &quot; + port);\n      System.out.println(&quot;Database name: &quot; + databaseName);\n      System.out.println(&quot;User: &quot; + user);\n      System.out.println(&quot;Password: &quot; + password);\n\n      // Establish a connection to the database using the parsed connection properties\n      Connection conn = DriverManager.getConnection(connectionString, props);\n\n      // Use the connection to interact with the database as needed\n      // ...\n\n      // Close the connection when finished\n      conn.close();\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":5270185,"reputation":31,"user_id":4208693,"display_name":"Shavaiz Safdar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1398,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1681540959,"creation_date":1632173239,"question_id":69261027,"body_markdown":"I&#39;m trying to parse postgres db credentials, the format is as follows:\r\n\r\npostgres://usernname:password@hostaddress:port/databasename\r\n\r\nI&#39;m  calling a method which returns these credentials in the form of a String in one line and trying to figure out if there is a simple way of parsing them out by username,password port etc instead of using regex.\r\n  ","title":"Parse postgres URL","body":"<p>I'm trying to parse postgres db credentials, the format is as follows:</p>\n<p>postgres://usernname:password@hostaddress:port/databasename</p>\n<p>I'm  calling a method which returns these credentials in the form of a String in one line and trying to figure out if there is a simple way of parsing them out by username,password port etc instead of using regex.</p>\n"},{"tags":["java","eclipse","unicode"],"comments":[{"owner":{"account_id":78518,"reputation":40077,"user_id":223424,"accept_rate":74,"display_name":"9000"},"score":1,"creation_date":1384785881,"post_id":20050309,"comment_id":29862752,"body_markdown":"Can Eclipse&#39;s console output font be customized? If yes, have you tried selecting a different font?","body":"Can Eclipse&#39;s console output font be customized? If yes, have you tried selecting a different font?"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":1,"creation_date":1384790111,"post_id":20050309,"comment_id":29865782,"body_markdown":"Check this out http://paranoid-engineering.blogspot.com/2008/05/getting-unicode-output-in-eclipse.html","body":"Check this out <a href=\"http://paranoid-engineering.blogspot.com/2008/05/getting-unicode-output-in-eclipse.html\" rel=\"nofollow noreferrer\">paranoid-engineering.blogspot.com/2008/05/&hellip;</a>"},{"owner":{"account_id":1880317,"reputation":345,"user_id":1700680,"accept_rate":54,"display_name":"Benjamin"},"score":0,"creation_date":1384793434,"post_id":20050309,"comment_id":29867909,"body_markdown":"I&#39;ve already changed the console font and added -Dfile.encoding=UTF-8 to eclipse.ini and I still get the same output.","body":"I&#39;ve already changed the console font and added -Dfile.encoding=UTF-8 to eclipse.ini and I still get the same output."}],"answers":[{"comments":[{"owner":{"account_id":1880317,"reputation":345,"user_id":1700680,"accept_rate":54,"display_name":"Benjamin"},"score":0,"creation_date":1389133711,"post_id":20053054,"comment_id":31528451,"body_markdown":"I ended up using different UTF-8 symbols to create my boxes and left the settings the way they were. The font didn&#39;t like the characters I was using so I used comparable but different characters, which fixed the problem.","body":"I ended up using different UTF-8 symbols to create my boxes and left the settings the way they were. The font didn&#39;t like the characters I was using so I used comparable but different characters, which fixed the problem."}],"tags":[],"owner":{"account_id":15903,"reputation":323453,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1384792973,"creation_date":1384792973,"answer_id":20053054,"question_id":20050309,"body_markdown":"The small box means that the current font doesn&#39;t have those symbols.\r\n\r\nYou will have to find a font which supports them and configure the console font (search the preferences for &quot;console&quot;) to use it.\r\n\r\nIf it still doesn&#39;t work, make sure you have configured the Java application that you&#39;re running (i.e. which prints to the console) to emit UTF-8. In Eclipse, you can do that by opening the launch config and setting &quot;Console Encoding&quot; to UTF-8 ([see this blog post][1] or [here][2])\r\n\r\n\r\n  [1]: http://decoding.wordpress.com/2010/03/18/eclipse-how-to-change-the-console-output-encoding/\r\n  [2]: http://eclipsesource.com/blogs/2013/02/21/pro-tip-unicode-characters-in-the-eclipse-console/","title":"How do I display unicode characters in the Eclipse console window?","body":"<p>The small box means that the current font doesn't have those symbols.</p>\n\n<p>You will have to find a font which supports them and configure the console font (search the preferences for \"console\") to use it.</p>\n\n<p>If it still doesn't work, make sure you have configured the Java application that you're running (i.e. which prints to the console) to emit UTF-8. In Eclipse, you can do that by opening the launch config and setting \"Console Encoding\" to UTF-8 (<a href=\"http://decoding.wordpress.com/2010/03/18/eclipse-how-to-change-the-console-output-encoding/\" rel=\"noreferrer\">see this blog post</a> or <a href=\"http://eclipsesource.com/blogs/2013/02/21/pro-tip-unicode-characters-in-the-eclipse-console/\" rel=\"noreferrer\">here</a>)</p>\n"},{"comments":[{"owner":{"account_id":2294271,"reputation":1873,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"score":2,"creation_date":1592999986,"post_id":62420435,"comment_id":110624907,"body_markdown":"This works too. You can find the exact setting under (Eclipse 2018-12): `Window - Preferences - General - Workspace - Text file encoding` (bottom left of the window).","body":"This works too. You can find the exact setting under (Eclipse 2018-12): <code>Window - Preferences - General - Workspace - Text file encoding</code> (bottom left of the window)."},{"owner":{"account_id":16979652,"reputation":185,"user_id":12281984,"display_name":"Vasilije Bursac"},"score":0,"creation_date":1623163209,"post_id":62420435,"comment_id":119996180,"body_markdown":"And use the search option if you cant find the `Workspace` section.","body":"And use the search option if you cant find the <code>Workspace</code> section."},{"owner":{"account_id":2294271,"reputation":1873,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"score":0,"creation_date":1625646912,"post_id":62420435,"comment_id":120679506,"body_markdown":"I just came across this post again: So far writing e.g. .xml files has been working fine with Eclipse&#39;s (2020-06) `UTF-8` setting but yesterday a .txt file was missing a bunch of symbols and even the console didn&#39;t print them properly. I tried using `StandardCharsets.UTF_8` with the `OutputStreamWriter` but it only started writing correctly when I switched Eclipse&#39;s encoding back to default (yes, still with the charset). It looks like it depends on what the encoding of your source (file) is.","body":"I just came across this post again: So far writing e.g. .xml files has been working fine with Eclipse&#39;s (2020-06) <code>UTF-8</code> setting but yesterday a .txt file was missing a bunch of symbols and even the console didn&#39;t print them properly. I tried using <code>StandardCharsets.UTF_8</code> with the <code>OutputStreamWriter</code> but it only started writing correctly when I switched Eclipse&#39;s encoding back to default (yes, still with the charset). It looks like it depends on what the encoding of your source (file) is."}],"tags":[],"owner":{"account_id":294084,"reputation":977,"user_id":597767,"accept_rate":75,"display_name":"Doradus"},"comment_count":3,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1592360255,"creation_date":1592360255,"answer_id":62420435,"question_id":20050309,"body_markdown":"What worked for me was to go to Preferences, under Workspace, and change &quot;Text file encoding&quot; to UTF-8.","title":"How do I display unicode characters in the Eclipse console window?","body":"<p>What worked for me was to go to Preferences, under Workspace, and change \"Text file encoding\" to UTF-8.</p>\n"},{"comments":[{"owner":{"account_id":2085929,"reputation":3331,"user_id":1856928,"accept_rate":100,"display_name":"Acemad"},"score":0,"creation_date":1692281180,"post_id":76020744,"comment_id":135604263,"body_markdown":"This is the only solution that worked for me. Using a similar JDK as yours, I wonder if this is specific to that JDK, or is it a deeper problem?","body":"This is the only solution that worked for me. Using a similar JDK as yours, I wonder if this is specific to that JDK, or is it a deeper problem?"}],"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1681540899,"creation_date":1681540899,"answer_id":76020744,"question_id":20050309,"body_markdown":"All the solutions I found referred to configuring Eclipse to use UTF-8 including Workspace preferences and text file encoding. I already had all those configuration settings set correctly. Yet I still saw only several lines of question mark characters, i.e. `?`, when I ran the code in the question.\r\n\r\nWhile not changing any of those configuration settings, what worked for me was explicitly setting the [System] property `stdout.encoding`.  \r\n(Note that I am using Eclipse 2023-03 and [Oracle&#39;s] JDK 20.)\r\n\r\nMy [Eclipse] *Run Configuration* window:\r\n\r\n[![Eclipse run configuration][1]][1]\r\n\r\nHere is output appearing in Eclipse console (as text) when I run the (unaltered) code in the question:\r\n```none\r\nEnter the number of columns: 4\r\nEnter the width of the columns: 4\r\nEnter the number of rows: 4\r\nEnter the width of the rows: 4\r\n┏━━━━┳━━━━┳━━━━┳━━━━┓\r\n┃    ┃    ┃    ┃    ┃    \r\n┃    ┃    ┃    ┃    ┃    \r\n┃    ┃    ┃    ┃    ┃    \r\n┃    ┃    ┃    ┃    ┃    \r\n┣━━━━╋━━━━╋━━━━╋━━━━┫\r\n┃    ┃    ┃    ┃    ┃    \r\n┃    ┃    ┃    ┃    ┃    \r\n┃    ┃    ┃    ┃    ┃    \r\n┃    ┃    ┃    ┃    ┃    \r\n┣━━━━╋━━━━╋━━━━╋━━━━┫\r\n┃    ┃    ┃    ┃    ┃    \r\n┃    ┃    ┃    ┃    ┃    \r\n┃    ┃    ┃    ┃    ┃    \r\n┃    ┃    ┃    ┃    ┃    \r\n┣━━━━╋━━━━╋━━━━╋━━━━┫\r\n┃    ┃    ┃    ┃    ┃    \r\n┃    ┃    ┃    ┃    ┃    \r\n┃    ┃    ┃    ┃    ┃    \r\n┃    ┃    ┃    ┃    ┃    \r\n┗━━━━┻━━━━┻━━━━┻━━━━┛\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UTd5i.png","title":"How do I display unicode characters in the Eclipse console window?","body":"<p>All the solutions I found referred to configuring Eclipse to use UTF-8 including Workspace preferences and text file encoding. I already had all those configuration settings set correctly. Yet I still saw only several lines of question mark characters, i.e. <code>?</code>, when I ran the code in the question.</p>\n<p>While not changing any of those configuration settings, what worked for me was explicitly setting the [System] property <code>stdout.encoding</code>.<br />\n(Note that I am using Eclipse 2023-03 and [Oracle's] JDK 20.)</p>\n<p>My [Eclipse] <em>Run Configuration</em> window:</p>\n<p><a href=\"https://i.stack.imgur.com/UTd5i.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UTd5i.png\" alt=\"Eclipse run configuration\" /></a></p>\n<p>Here is output appearing in Eclipse console (as text) when I run the (unaltered) code in the question:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Enter the number of columns: 4\nEnter the width of the columns: 4\nEnter the number of rows: 4\nEnter the width of the rows: 4\n┏━━━━┳━━━━┳━━━━┳━━━━┓\n┃    ┃    ┃    ┃    ┃    \n┃    ┃    ┃    ┃    ┃    \n┃    ┃    ┃    ┃    ┃    \n┃    ┃    ┃    ┃    ┃    \n┣━━━━╋━━━━╋━━━━╋━━━━┫\n┃    ┃    ┃    ┃    ┃    \n┃    ┃    ┃    ┃    ┃    \n┃    ┃    ┃    ┃    ┃    \n┃    ┃    ┃    ┃    ┃    \n┣━━━━╋━━━━╋━━━━╋━━━━┫\n┃    ┃    ┃    ┃    ┃    \n┃    ┃    ┃    ┃    ┃    \n┃    ┃    ┃    ┃    ┃    \n┃    ┃    ┃    ┃    ┃    \n┣━━━━╋━━━━╋━━━━╋━━━━┫\n┃    ┃    ┃    ┃    ┃    \n┃    ┃    ┃    ┃    ┃    \n┃    ┃    ┃    ┃    ┃    \n┃    ┃    ┃    ┃    ┃    \n┗━━━━┻━━━━┻━━━━┻━━━━┛\n</code></pre>\n"}],"owner":{"account_id":1880317,"reputation":345,"user_id":1700680,"accept_rate":54,"display_name":"Benjamin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16729,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":3,"score":14,"last_activity_date":1681540899,"creation_date":1384785248,"question_id":20050309,"body_markdown":"I am creating a small Java application that uses Unicode characters to create rows and columns of boxes in the console window in Eclipse Keplar. My code works completely fine but the output of each Unicode character I print is a small box instead of the Unicode character I want to print.\r\n\r\nMy code is as follows. I have two classes.\r\n\r\nMy main class:\r\n\r\n    package assign03;\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class Assign03 {\r\n\r\n\tprivate static int columns;\r\n\tprivate static int cWidth;\r\n\tprivate static int rows;\r\n\tprivate static int rHeight;\r\n\tprivate static Table table;\r\n\r\n\tpublic static void main(String[] args) {\r\n            table = new Table();\r\n            Scanner input = new Scanner(System.in);\r\n\r\n            System.out.print(&quot;Enter the number of columns: &quot;);\r\n            columns = input.nextInt();\r\n\r\n            System.out.print(&quot;Enter the width of the columns: &quot;);\r\n            cWidth = input.nextInt();\r\n\r\n            System.out.print(&quot;Enter the number of rows: &quot;);\r\n            rows = input.nextInt();\r\n\r\n            System.out.print(&quot;Enter the width of the rows: &quot;);\r\n            rHeight = input.nextInt();\r\n\r\n            table.printFirstLine(columns, cWidth);\r\n\r\n            for (int r = 0; r &lt; rows; r++) {\r\n                for (int rh = 0; rh &lt; rHeight; rh++) {\r\n                    table.printVerticalLine(columns, cWidth);\r\n                }\r\n                if (r &lt; (rows - 1)\r\n                    table.printInternalLine(columns, cWidth);\r\n            }\r\n\r\n            table.printLastLine(columns, cWidth);\r\n            input.close();\r\n        }\r\n    }\r\n\r\nAnd my Table.java class:\r\n\r\n    package assign03;\r\n\r\n    public class Table {\r\n\r\n        private char firstLine[] = { &#39;\\u2501&#39;, &#39;\\u250F&#39;, &#39;\\u2533&#39;, &#39;\\u2513&#39; };\r\n        private char internalLine[] = { &#39;\\u2501&#39;, &#39;\\u2523&#39;, &#39;\\u254B&#39;, &#39;\\u252B&#39; };\r\n        private char lastLine[] = { &#39;\\u2501&#39;, &#39;\\u2517&#39;, &#39;\\u253B&#39;, &#39;\\u251B&#39; };\r\n        private char verticalLine[] = { &#39;\\u2503&#39; };\r\n        private char whiteSpace[] = { &#39;\\u2003&#39; };\r\n\r\n        public void printFirstLine(int columns, int cWidth) {\r\n\r\n            System.out.print(firstLine[1]);\r\n\r\n            for (int c = 0; c &lt; columns; c++) {\r\n                for (int cw = 0; cw &lt; cWidth; cw++) {\r\n                    System.out.print(firstLine[0]);\r\n                }\r\n                if (c &lt; (columns - 1))\r\n                    System.out.print(firstLine[2]);\r\n            }\r\n\r\n            System.out.println(firstLine[3]);\r\n        }\r\n\r\n        public void printVerticalLine(int columns, int cWidth) {\r\n            for (int c = 0; c &lt;= columns; c++) {\r\n                System.out.print(verticalLine[0]);\r\n                for (int cw = 0; cw &lt; cWidth; cw++) {\r\n                    System.out.print(whiteSpace[0]);\r\n                }\r\n            }\r\n            System.out.println();\r\n        }\r\n\r\n        public void printInternalLine(int columns, int cWidth) {\r\n            System.out.print(internalLine[1]);\r\n\r\n            for (int c = 0; c &lt; columns; c++) {\r\n                for (int w = 0; w &lt; cWidth; w++) {\r\n                    System.out.print(internalLine[0]);\r\n                }\r\n                if (c &lt; (columns - 1))\r\n                    System.out.print(internalLine[2]);\r\n            }\r\n\r\n            System.out.println(internalLine[3]);\r\n        }\r\n\r\n        public void printLastLine(int columns, int cWidth) {\r\n\r\n            System.out.print(lastLine[1]);\r\n\r\n            for (int c = 0; c &lt; columns; c++) {\r\n                for (int w = 0; w &lt; cWidth; w++) {\r\n                    System.out.print(lastLine[0]);\r\n                }\r\n                if (c &lt; (columns - 1))\r\n                    System.out.print(lastLine[2]);\r\n            }\r\n\r\n            System.out.println(lastLine[3]);\r\n        }\r\n    }\r\n\r\nWhen the application runs, the output is as follows. I use inputs of 4 for columns, rows, column width, and row width.\r\n\r\n![Console Output](http://i.stack.imgur.com/U8WHX.png)\r\n\r\nAny reason why my console output looks like that? Can anybody help me get the Unicode to display properly? Thanks.","title":"How do I display unicode characters in the Eclipse console window?","body":"<p>I am creating a small Java application that uses Unicode characters to create rows and columns of boxes in the console window in Eclipse Keplar. My code works completely fine but the output of each Unicode character I print is a small box instead of the Unicode character I want to print.</p>\n\n<p>My code is as follows. I have two classes.</p>\n\n<p>My main class:</p>\n\n<pre><code>package assign03;\n\nimport java.util.Scanner;\n\npublic class Assign03 {\n\nprivate static int columns;\nprivate static int cWidth;\nprivate static int rows;\nprivate static int rHeight;\nprivate static Table table;\n\npublic static void main(String[] args) {\n        table = new Table();\n        Scanner input = new Scanner(System.in);\n\n        System.out.print(\"Enter the number of columns: \");\n        columns = input.nextInt();\n\n        System.out.print(\"Enter the width of the columns: \");\n        cWidth = input.nextInt();\n\n        System.out.print(\"Enter the number of rows: \");\n        rows = input.nextInt();\n\n        System.out.print(\"Enter the width of the rows: \");\n        rHeight = input.nextInt();\n\n        table.printFirstLine(columns, cWidth);\n\n        for (int r = 0; r &lt; rows; r++) {\n            for (int rh = 0; rh &lt; rHeight; rh++) {\n                table.printVerticalLine(columns, cWidth);\n            }\n            if (r &lt; (rows - 1)\n                table.printInternalLine(columns, cWidth);\n        }\n\n        table.printLastLine(columns, cWidth);\n        input.close();\n    }\n}\n</code></pre>\n\n<p>And my Table.java class:</p>\n\n<pre><code>package assign03;\n\npublic class Table {\n\n    private char firstLine[] = { '\\u2501', '\\u250F', '\\u2533', '\\u2513' };\n    private char internalLine[] = { '\\u2501', '\\u2523', '\\u254B', '\\u252B' };\n    private char lastLine[] = { '\\u2501', '\\u2517', '\\u253B', '\\u251B' };\n    private char verticalLine[] = { '\\u2503' };\n    private char whiteSpace[] = { '\\u2003' };\n\n    public void printFirstLine(int columns, int cWidth) {\n\n        System.out.print(firstLine[1]);\n\n        for (int c = 0; c &lt; columns; c++) {\n            for (int cw = 0; cw &lt; cWidth; cw++) {\n                System.out.print(firstLine[0]);\n            }\n            if (c &lt; (columns - 1))\n                System.out.print(firstLine[2]);\n        }\n\n        System.out.println(firstLine[3]);\n    }\n\n    public void printVerticalLine(int columns, int cWidth) {\n        for (int c = 0; c &lt;= columns; c++) {\n            System.out.print(verticalLine[0]);\n            for (int cw = 0; cw &lt; cWidth; cw++) {\n                System.out.print(whiteSpace[0]);\n            }\n        }\n        System.out.println();\n    }\n\n    public void printInternalLine(int columns, int cWidth) {\n        System.out.print(internalLine[1]);\n\n        for (int c = 0; c &lt; columns; c++) {\n            for (int w = 0; w &lt; cWidth; w++) {\n                System.out.print(internalLine[0]);\n            }\n            if (c &lt; (columns - 1))\n                System.out.print(internalLine[2]);\n        }\n\n        System.out.println(internalLine[3]);\n    }\n\n    public void printLastLine(int columns, int cWidth) {\n\n        System.out.print(lastLine[1]);\n\n        for (int c = 0; c &lt; columns; c++) {\n            for (int w = 0; w &lt; cWidth; w++) {\n                System.out.print(lastLine[0]);\n            }\n            if (c &lt; (columns - 1))\n                System.out.print(lastLine[2]);\n        }\n\n        System.out.println(lastLine[3]);\n    }\n}\n</code></pre>\n\n<p>When the application runs, the output is as follows. I use inputs of 4 for columns, rows, column width, and row width.</p>\n\n<p><img src=\"https://i.stack.imgur.com/U8WHX.png\" alt=\"Console Output\"></p>\n\n<p>Any reason why my console output looks like that? Can anybody help me get the Unicode to display properly? Thanks.</p>\n"},{"tags":["java","windows","console-application","jpackage"],"answers":[{"tags":[],"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680137704,"creation_date":1680137704,"answer_id":75883309,"question_id":75883199,"body_markdown":"&gt; Am I supposed to be able to use jpackage to create a native binary that executes like a console application under Windows?\r\n\r\nYes, but not as a single self-contained executable.\r\n\r\nBy default `jpacakge` generates an installer (a .exe file on Windows). You can use `--type msi` to generate a .msi installer, or `--type app-image` to create an application image that can instead be zipped up and distributed. The application image contains the native binary.\r\n\r\nFor instance, if I use the following jpackage command:\r\n\r\n    jpackage --win-console --module mymodule --module-path mymodule.jar --type app-image --name myapp\r\n\r\n`jpackage` creates a `myapp` folder, which contains a `myapp.exe` which can run as a console application:\r\n\r\n    &gt; .\\myapp\\myapp.exe\r\n    Hello world!","title":"Unable to generate console application using jpackage","body":"<blockquote>\n<p>Am I supposed to be able to use jpackage to create a native binary that executes like a console application under Windows?</p>\n</blockquote>\n<p>Yes, but not as a single self-contained executable.</p>\n<p>By default <code>jpacakge</code> generates an installer (a .exe file on Windows). You can use <code>--type msi</code> to generate a .msi installer, or <code>--type app-image</code> to create an application image that can instead be zipped up and distributed. The application image contains the native binary.</p>\n<p>For instance, if I use the following jpackage command:</p>\n<pre><code>jpackage --win-console --module mymodule --module-path mymodule.jar --type app-image --name myapp\n</code></pre>\n<p><code>jpackage</code> creates a <code>myapp</code> folder, which contains a <code>myapp.exe</code> which can run as a console application:</p>\n<pre><code>&gt; .\\myapp\\myapp.exe\nHello world!\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681880689,"post_id":76020677,"comment_id":134126301,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76020677/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":9158700,"reputation":33,"user_id":6810838,"display_name":"Rodrigo Oliveira"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681539562,"creation_date":1681539562,"answer_id":76020677,"question_id":75883199,"body_markdown":"--win-console means that when you run your application it opens a terminal. You can use it to run the executable from the cmd and check the output for debugging. Once the application is fine, you can remove that option and build it again, so it no longer opens the terminal, but only opens your app.","title":"Unable to generate console application using jpackage","body":"<p>--win-console means that when you run your application it opens a terminal. You can use it to run the executable from the cmd and check the output for debugging. Once the application is fine, you can remove that option and build it again, so it no longer opens the terminal, but only opens your app.</p>\n"}],"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681539562,"creation_date":1680135877,"question_id":75883199,"body_markdown":"When I run the following command under Windows 10 I end up with an EXE file:\r\n\r\n`jpackage --win-console --module mymodule --module-path main.jar --module-path other-dependencies/ --app-version 1.0.0`\r\n\r\nI am expecting to be able to run the EXE as a command-line application but instead running the EXE seems to install the application in the Start Menu and it seems to execute as a GUI application (exiting immediately, never outputting to stdout).\r\n\r\nAm I supposed to be able to use `jpackage` to create a native binary that executes like a console application under Windows? Or did I misunderstand what `--win-console` is all about?\r\n\r\nThe only discussion I found is on [JDK-8253461](https://bugs.openjdk.org/browse/JDK-8253461?focusedCommentId=14369983&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-14369983) but I don&#39;t understand what Andy Herrick meant. Why would a non-console application need access to stdin/stdout?","title":"Unable to generate console application using jpackage","body":"<p>When I run the following command under Windows 10 I end up with an EXE file:</p>\n<p><code>jpackage --win-console --module mymodule --module-path main.jar --module-path other-dependencies/ --app-version 1.0.0</code></p>\n<p>I am expecting to be able to run the EXE as a command-line application but instead running the EXE seems to install the application in the Start Menu and it seems to execute as a GUI application (exiting immediately, never outputting to stdout).</p>\n<p>Am I supposed to be able to use <code>jpackage</code> to create a native binary that executes like a console application under Windows? Or did I misunderstand what <code>--win-console</code> is all about?</p>\n<p>The only discussion I found is on <a href=\"https://bugs.openjdk.org/browse/JDK-8253461?focusedCommentId=14369983&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-14369983\" rel=\"nofollow noreferrer\">JDK-8253461</a> but I don't understand what Andy Herrick meant. Why would a non-console application need access to stdin/stdout?</p>\n"},{"tags":["java","c++","java-native-interface"],"comments":[{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1681385225,"post_id":75986656,"comment_id":134049402,"body_markdown":"No output in the Android logcat? Did you attach a breakpoint to the native method?","body":"No output in the Android logcat? Did you attach a breakpoint to the native method?"}],"answers":[{"tags":[],"owner":{"account_id":28033958,"reputation":1,"user_id":21412686,"display_name":"Zaitsev Ilya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681539116,"creation_date":1681539116,"answer_id":76020649,"question_id":75986656,"body_markdown":"Problem is solved.\r\n\r\nI add the following code in the Gradle file:\r\n\r\n    sourceSets {\r\n        main {\r\n            jniLibs.srcDirs = [&#39;src/main/jniLibs&#39;]\r\n        }\r\n    }\r\n\r\nAnd also I copy my .so files into &#39;src/main/jniLibs/[platform]/&#39; directories.\r\n\r\nPlatforms: arm64-v8a, armeabi-v7a, x64, x86.","title":"How to register natives and use its function with JNI","body":"<p>Problem is solved.</p>\n<p>I add the following code in the Gradle file:</p>\n<pre><code>sourceSets {\n    main {\n        jniLibs.srcDirs = ['src/main/jniLibs']\n    }\n}\n</code></pre>\n<p>And also I copy my .so files into 'src/main/jniLibs/[platform]/' directories.</p>\n<p>Platforms: arm64-v8a, armeabi-v7a, x64, x86.</p>\n"}],"owner":{"account_id":28033958,"reputation":1,"user_id":21412686,"display_name":"Zaitsev Ilya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681539116,"creation_date":1681220916,"question_id":75986656,"body_markdown":"I tried to realize callback mechanism from Java into C++.\r\n\r\nAt first, im starting an Android-activity with intent from C++ with the following code:\r\n\r\n``` \r\njclass class_intent = env-&gt;FindClass(&quot;android/content/Intent&quot;);\r\njmethodID newIntent = env-&gt;GetMethodID(class_intent, &quot;&lt;init&gt;&quot;, &quot;()V&quot;);\r\njobject intent = env-&gt;NewObject(class_intent, newIntent);\r\njstring actionString = env-&gt;NewStringUTF(&quot;GET_VERSION&quot;);\r\njmethodID setAction = env-&gt;GetMethodID(class_intent, &quot;setAction&quot;, &quot;(Ljava/lang/String;)Landroid/content/Intent;&quot;);\r\nenv-&gt;CallObjectMethod(intent, setAction, actionString);\r\njmethodID startActivityMethod = env-&gt;GetMethodID(ccloc, &quot;startActivity&quot;, &quot;(Landroid/content/Intent;)V&quot;);\r\nenv-&gt;CallVoidMethod(activity, startActivityMethod, intent);\r\n```\r\n\r\nActivity has started successfully. But result of activity is not returned. So, it need to realize callback mechanism.\r\n\r\nI tried to create a new function:\r\n```\r\nvoid myFunc(JNIEnv* env, jobject obj) {\r\n    Logger::Instance().LogInfo(L&quot;&gt;&gt;&gt; AddInNative.myFunc&quot;);\r\n}\r\n```\r\n\r\nThis function can help to take result of the started activity. I register this function as native using JNI:\r\n```\r\nstatic JNINativeMethod native_methods[] =\r\n{\r\n    { &quot;myFunc&quot;, &quot;()V&quot;,  (void*)&amp;myFunc}\r\n};\r\njint res = env-&gt;RegisterNatives(ccloc, native_methods, 1);\r\n```\r\n\r\nSo, in this example, res equals to 0 (registered successfully). Also I checked correctness of the registration with help of:\r\n```\r\njmethodID check = env-&gt;GetMethodID(ccloc, &quot;myFunc&quot;, &quot;()V&quot;);\r\n```\r\n\r\nSo, the method &quot;Check&quot; has found. Therefore, the registration of the method was successful.\r\n\r\nAnd now I&#39;m trying to call this function in my Java-activity:\r\n```\r\npublic native void myFunc();\r\npublic void FinishActivity(boolean success, Intent intent) {\r\n    Log(&quot;FinishActivity&quot;);\r\n    setResult(success ? RESULT_OK : RESULT_CANCELED, intent);\r\n    if (mService != null)\r\n        mService.stopSelf();\r\n    Log(&quot;Callbacking...&quot;);\r\n    try {\r\n        myFunc();\r\n        Log(&quot;Callbacked.&quot;);\r\n    }catch(Exception e){\r\n        Log(&quot;Exception of callback&quot;);\r\n    }\r\n    finish();\r\n}\r\n```\r\n\r\nThe program is stoped at the myFunc calling position. It is logged &quot;Callbacking...&quot;, but not logged &quot;Callbacked.&quot; or &quot;Exception of callback&quot;.\r\n\r\nPlease, help. Why is myFunc not called? (mb called, but crashed at this moment...)","title":"How to register natives and use its function with JNI","body":"<p>I tried to realize callback mechanism from Java into C++.</p>\n<p>At first, im starting an Android-activity with intent from C++ with the following code:</p>\n<pre><code>jclass class_intent = env-&gt;FindClass(&quot;android/content/Intent&quot;);\njmethodID newIntent = env-&gt;GetMethodID(class_intent, &quot;&lt;init&gt;&quot;, &quot;()V&quot;);\njobject intent = env-&gt;NewObject(class_intent, newIntent);\njstring actionString = env-&gt;NewStringUTF(&quot;GET_VERSION&quot;);\njmethodID setAction = env-&gt;GetMethodID(class_intent, &quot;setAction&quot;, &quot;(Ljava/lang/String;)Landroid/content/Intent;&quot;);\nenv-&gt;CallObjectMethod(intent, setAction, actionString);\njmethodID startActivityMethod = env-&gt;GetMethodID(ccloc, &quot;startActivity&quot;, &quot;(Landroid/content/Intent;)V&quot;);\nenv-&gt;CallVoidMethod(activity, startActivityMethod, intent);\n</code></pre>\n<p>Activity has started successfully. But result of activity is not returned. So, it need to realize callback mechanism.</p>\n<p>I tried to create a new function:</p>\n<pre><code>void myFunc(JNIEnv* env, jobject obj) {\n    Logger::Instance().LogInfo(L&quot;&gt;&gt;&gt; AddInNative.myFunc&quot;);\n}\n</code></pre>\n<p>This function can help to take result of the started activity. I register this function as native using JNI:</p>\n<pre><code>static JNINativeMethod native_methods[] =\n{\n    { &quot;myFunc&quot;, &quot;()V&quot;,  (void*)&amp;myFunc}\n};\njint res = env-&gt;RegisterNatives(ccloc, native_methods, 1);\n</code></pre>\n<p>So, in this example, res equals to 0 (registered successfully). Also I checked correctness of the registration with help of:</p>\n<pre><code>jmethodID check = env-&gt;GetMethodID(ccloc, &quot;myFunc&quot;, &quot;()V&quot;);\n</code></pre>\n<p>So, the method &quot;Check&quot; has found. Therefore, the registration of the method was successful.</p>\n<p>And now I'm trying to call this function in my Java-activity:</p>\n<pre><code>public native void myFunc();\npublic void FinishActivity(boolean success, Intent intent) {\n    Log(&quot;FinishActivity&quot;);\n    setResult(success ? RESULT_OK : RESULT_CANCELED, intent);\n    if (mService != null)\n        mService.stopSelf();\n    Log(&quot;Callbacking...&quot;);\n    try {\n        myFunc();\n        Log(&quot;Callbacked.&quot;);\n    }catch(Exception e){\n        Log(&quot;Exception of callback&quot;);\n    }\n    finish();\n}\n</code></pre>\n<p>The program is stoped at the myFunc calling position. It is logged &quot;Callbacking...&quot;, but not logged &quot;Callbacked.&quot; or &quot;Exception of callback&quot;.</p>\n<p>Please, help. Why is myFunc not called? (mb called, but crashed at this moment...)</p>\n"},{"tags":["java","activex"],"owner":{"account_id":28309379,"reputation":1,"user_id":21646870,"display_name":"TAIMING KAN"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681538604,"creation_date":1681520950,"question_id":76019900,"body_markdown":"I am using com to call ActiveX to enable Java to print labels using Bartender. If the label paper to be printed is single-column, then the printing effect is normal. However, if the template page is set to multi-column mode with one row and two or more columns in the Bartender software, the actual effect of the following code is that only the left label has content and the right label has no content. How can I modify the code to make both the left and right labels have data?\r\n\r\n```\r\n//open Templete\r\n                btFormat = Dispatch.call(btFormats,&quot;Open&quot;,filePatch,false,&quot;&quot;).toDispatch();\r\n                Dispatch printSetup = Dispatch.get(btFormat,&quot;PrintSetup&quot;).toDispatch();\r\n                Dispatch.put(printSetup,&quot;Printer&quot;,&quot;TSC TE244&quot;);\r\n                    int size=printDatas.size();\r\n                    for(int i=0;i&lt;size;i++){\r\n                        Map&lt;String,String&gt;printMap=printDatas.get(i);\r\n                        if(printMap!=null){\r\n                            for(Map.Entry&lt;String,String&gt;entry:printMap.entrySet()){\r\n\r\n                                try{\r\n                                    //Replace variables in templates\r\n                                    Dispatch.call(btFormat,&quot;SetNamedSubStringValue&quot;,entry.getKey(),entry.getValue());\r\n                                }catch (Exception e){\r\n\r\n                                }\r\n                            }\r\n                        }\r\n                        Dispatch.call(btFormat,&quot;PrintOut&quot;,false,false);\r\n```\r\n\r\nActual printing\r\n\r\n\r\nI tried to set the parameter IdenticalCopiesOfLabel to 2, and it can print two columns, but the content of the two columns is the same, which does not meet the expected effect. In addition, I also tried to set the parameter NumberSerializedLabels , but the printed content is still a single column","title":"How can I use Java code to set up a one-line multi-column label for the Bartender template?","body":"<p>I am using com to call ActiveX to enable Java to print labels using Bartender. If the label paper to be printed is single-column, then the printing effect is normal. However, if the template page is set to multi-column mode with one row and two or more columns in the Bartender software, the actual effect of the following code is that only the left label has content and the right label has no content. How can I modify the code to make both the left and right labels have data?</p>\n<pre><code>//open Templete\n                btFormat = Dispatch.call(btFormats,&quot;Open&quot;,filePatch,false,&quot;&quot;).toDispatch();\n                Dispatch printSetup = Dispatch.get(btFormat,&quot;PrintSetup&quot;).toDispatch();\n                Dispatch.put(printSetup,&quot;Printer&quot;,&quot;TSC TE244&quot;);\n                    int size=printDatas.size();\n                    for(int i=0;i&lt;size;i++){\n                        Map&lt;String,String&gt;printMap=printDatas.get(i);\n                        if(printMap!=null){\n                            for(Map.Entry&lt;String,String&gt;entry:printMap.entrySet()){\n\n                                try{\n                                    //Replace variables in templates\n                                    Dispatch.call(btFormat,&quot;SetNamedSubStringValue&quot;,entry.getKey(),entry.getValue());\n                                }catch (Exception e){\n\n                                }\n                            }\n                        }\n                        Dispatch.call(btFormat,&quot;PrintOut&quot;,false,false);\n</code></pre>\n<p>Actual printing</p>\n<p>I tried to set the parameter IdenticalCopiesOfLabel to 2, and it can print two columns, but the content of the two columns is the same, which does not meet the expected effect. In addition, I also tried to set the parameter NumberSerializedLabels , but the printed content is still a single column</p>\n"},{"tags":["java","spring-boot","port","keystore"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1681537632,"post_id":76020551,"comment_id":134075815,"body_markdown":"&quot;saying there was an error&quot; -- what error?","body":"&quot;saying there was an error&quot; -- what error?"},{"owner":{"account_id":16352113,"reputation":1,"user_id":11810331,"display_name":"Sonador_Fool_1951"},"score":0,"creation_date":1681538123,"post_id":76020551,"comment_id":134075852,"body_markdown":"It says that it started SslServerAppplication but then stops saying there was an error parsing HTTP request header because invalid character found in method name.","body":"It says that it started SslServerAppplication but then stops saying there was an error parsing HTTP request header because invalid character found in method name."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1681538606,"post_id":76020551,"comment_id":134075886,"body_markdown":"Please add the full text of the error message and any stack trace to your question.","body":"Please add the full text of the error message and any stack trace to your question."},{"owner":{"account_id":16352113,"reputation":1,"user_id":11810331,"display_name":"Sonador_Fool_1951"},"score":0,"creation_date":1681539669,"post_id":76020551,"comment_id":134075959,"body_markdown":"I finally got it to work. I think it&#39;s on Chromes end or something. If I type in localhost:8443/hash it pops up without error. If I type in https://localhost:8443/hash then the error pops up: java.lang.IllegalArgumentException: Invalid character found in method name. HTTP method names must be tokens","body":"I finally got it to work. I think it&#39;s on Chromes end or something. If I type in localhost:8443/hash it pops up without error. If I type in <a href=\"https://localhost:8443/hash\" rel=\"nofollow noreferrer\">localhost:8443/hash</a> then the error pops up: java.lang.IllegalArgumentException: Invalid character found in method name. HTTP method names must be tokens"}],"owner":{"account_id":16352113,"reputation":1,"user_id":11810331,"display_name":"Sonador_Fool_1951"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681537139,"creation_date":1681537139,"question_id":76020551,"body_markdown":"I&#39;m really at my wits end. I&#39;ve been working on this project trying to get the keystore path correct so I can generate a selfsigned certificate in my program files instead of in the Java/bin, finally got that fixed. I generated the PKCS12 and certificate, I got it all working on the required port 8443. \r\nThen I had trouble converting it from HTTP to a secure HTTPS. That was a royal pain in the @! I thought I finally figured it all out and I finally have a secure port with no security warning on Chrome EXCEPT it only works on the default port 8080 and not 8443.\r\nIf I try to force it to use port 8443 the program shuts down after a second saying there was an error.\r\nI&#39;m supposed to input https://localhost:8443/hash and have a secure connection.\r\nWhat am I doing wrong?\r\nI still have more of this project to work on and I&#39;m just worn out already.\r\n\r\n\r\nIf I use the provided layout:\r\n```\r\nserver.port=8443\r\nserver.ssl.key-alias=tomcat\r\nserver.ssl.key-store-password=password\r\nserver.ssl.key-store=classpath:keystore.p12\r\nserver.ssl.key-store-provider=SUN\r\nserver.ssl.key-store-type=pkcs12\r\n```\r\nPort 8443 will work however it won&#39;t be secure.\r\nIf I use this layout:\r\n\r\n```\r\nserver:\r\n\tssl:\r\n\t\tkey-store:classpath:keystore.p12\r\n\t\tkey-store-password: password\r\n\t\tkey-store-type: pkcs12\r\n\t\tkey-store-alias: tomcat\r\n\t\tkey-password: password\r\n\tport=8443\r\n```\r\nThen it will finally have a secure connection, however, only on the default port 8080","title":"HTTP to HTTPS Server Port","body":"<p>I'm really at my wits end. I've been working on this project trying to get the keystore path correct so I can generate a selfsigned certificate in my program files instead of in the Java/bin, finally got that fixed. I generated the PKCS12 and certificate, I got it all working on the required port 8443.\nThen I had trouble converting it from HTTP to a secure HTTPS. That was a royal pain in the @! I thought I finally figured it all out and I finally have a secure port with no security warning on Chrome EXCEPT it only works on the default port 8080 and not 8443.\nIf I try to force it to use port 8443 the program shuts down after a second saying there was an error.\nI'm supposed to input https://localhost:8443/hash and have a secure connection.\nWhat am I doing wrong?\nI still have more of this project to work on and I'm just worn out already.</p>\n<p>If I use the provided layout:</p>\n<pre><code>server.port=8443\nserver.ssl.key-alias=tomcat\nserver.ssl.key-store-password=password\nserver.ssl.key-store=classpath:keystore.p12\nserver.ssl.key-store-provider=SUN\nserver.ssl.key-store-type=pkcs12\n</code></pre>\n<p>Port 8443 will work however it won't be secure.\nIf I use this layout:</p>\n<pre><code>server:\n    ssl:\n        key-store:classpath:keystore.p12\n        key-store-password: password\n        key-store-type: pkcs12\n        key-store-alias: tomcat\n        key-password: password\n    port=8443\n</code></pre>\n<p>Then it will finally have a secure connection, however, only on the default port 8080</p>\n"},{"tags":["java","string","split"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1680995462,"post_id":75968047,"comment_id":133988601,"body_markdown":"The error is because you wrote `\\\\x` where you might have just meant `x`.  But fixing that won&#39;t give you a solution. The point about `split` is that it actually removes the portion of the text that matches the regular expression; then puts whatever pieces are left behind into an array.  I don&#39;t think that&#39;s what you want to do.","body":"The error is because you wrote <code>\\\\x</code> where you might have just meant <code>x</code>.  But fixing that won&#39;t give you a solution. The point about <code>split</code> is that it actually removes the portion of the text that matches the regular expression; then puts whatever pieces are left behind into an array.  I don&#39;t think that&#39;s what you want to do."},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1680995704,"post_id":75968047,"comment_id":133988626,"body_markdown":"You could try a double split foirst on + and then on ^ but it would be better to explore [capturing groups](https://stackoverflow.com/questions/17969436/java-regex-capturing-groups). `x\\\\^(\\\\d+)\\\\+`","body":"You could try a double split foirst on + and then on ^ but it would be better to explore <a href=\"https://stackoverflow.com/questions/17969436/java-regex-capturing-groups\">capturing groups</a>. <code>x\\\\^(\\\\d+)\\\\+</code>"},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":2,"creation_date":1680996723,"post_id":75968047,"comment_id":133988715,"body_markdown":"&quot;I recently saw how to solve a problem of mine using java regex and the split method&quot; What problem? What you trying to _actually_ do here, irrespective of whether you use regexp or not?","body":"&quot;I recently saw how to solve a problem of mine using java regex and the split method&quot; What problem? What you trying to <i>actually</i> do here, irrespective of whether you use regexp or not?"},{"owner":{"account_id":27864736,"reputation":57,"user_id":21276461,"display_name":"userr554"},"score":0,"creation_date":1680997035,"post_id":75968047,"comment_id":133988742,"body_markdown":"Re. Mike The problem was essentially just the same problem im facing but with the coefficients instead of anything after the ^ but I found the coefficients answer online, so I didn&#39;t know what was going on inside the parentheses. Now I want to learn how to use split and Regex in order to parse anything after ^ but before the + into its own array","body":"Re. Mike The problem was essentially just the same problem im facing but with the coefficients instead of anything after the ^ but I found the coefficients answer online, so I didn&#39;t know what was going on inside the parentheses. Now I want to learn how to use split and Regex in order to parse anything after ^ but before the + into its own array"},{"owner":{"account_id":7089168,"reputation":157141,"user_id":5424988,"display_name":"The fourth bird"},"score":2,"creation_date":1681057156,"post_id":75968047,"comment_id":133994292,"body_markdown":"What is the desired result after the split?","body":"What is the desired result after the split?"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1681444785,"post_id":75968047,"comment_id":134060583,"body_markdown":"Wouldn&#39;t splitting into its parts be the goal? eg `-2x^2+3x^1+6` split into the coefficients and numerals `[-2, 2, 3, 1, 6]`? If so, try splitting on `&quot;[^\\\\d-]+&quot;`","body":"Wouldn&#39;t splitting into its parts be the goal? eg <code>-2x^2+3x^1+6</code> split into the coefficients and numerals <code>[-2, 2, 3, 1, 6]</code>? If so, try splitting on <code>&quot;[^\\\\d-]+&quot;</code>"},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1681445614,"post_id":75968047,"comment_id":134060683,"body_markdown":"@Mscarb if you have a solution, remember to post an answer, or delete your post if you think no one else would benefit from learning what you leanred. Don&#39;t update the post to say &quot;there is an answer&quot; and then not show that answer (and _definitely_ don&#39;t put the answer in the post itself =)","body":"@Mscarb if you have a solution, remember to post an answer, or delete your post if you think no one else would benefit from learning what you leanred. Don&#39;t update the post to say &quot;there is an answer&quot; and then not show that answer (and <i>definitely</i> don&#39;t put the answer in the post itself =)"}],"answers":[{"tags":[],"owner":{"account_id":27864736,"reputation":57,"user_id":21276461,"display_name":"userr554"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681536982,"creation_date":1681536957,"answer_id":76020540,"question_id":75968047,"body_markdown":"There Are several answers to my question one would be to split the function by the + and therefore have the args split up instead of exclusively the coefficients i.e `polynomial.split(&quot;+&quot;)`\r\n\r\nAlternatively: this `&quot;[^\\\\d-]+&quot;` will also work if you are looking for an answer utilizing java regex than this might be what your looking for \r\n-- Answer provided by: Bohemian ♦\r\n\r\n\r\n","title":"Is There An Order To Java Regex Expressions?","body":"<p>There Are several answers to my question one would be to split the function by the + and therefore have the args split up instead of exclusively the coefficients i.e <code>polynomial.split(&quot;+&quot;)</code></p>\n<p>Alternatively: this <code>&quot;[^\\\\d-]+&quot;</code> will also work if you are looking for an answer utilizing java regex than this might be what your looking for\n-- Answer provided by: Bohemian ♦</p>\n"}],"owner":{"account_id":27864736,"reputation":57,"user_id":21276461,"display_name":"userr554"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76020540,"answer_count":1,"score":0,"last_activity_date":1681536982,"creation_date":1680994424,"question_id":75968047,"body_markdown":"I recently saw how to solve a problem of mine using java regex and the split method, so i wanted to learn regex I watched a few 20-30 min videos, and I thought I understood it, but in reality, those videos are only covering the basics I assume. Because there seems to be an order that expressions go, in order to split. for instance, this code splits the coefficients up but based off the knowledge from those videos this would actually split the x and the ^ char and ANY occurrence of a digit as well as any occurrence of a &quot;+&quot; But instead it splits the function so just the coefficients are left, Why?\r\n\r\n \r\ncode:\r\n\r\n\r\n```\r\nString polynomial = &quot;-2x^2+3x^1+6&quot;\r\n\r\nString[] parts = polynomial.split(&quot;x\\\\^\\\\d+\\\\+?&quot;)\r\nfor (i = 0; i &lt; part.length; i++){\r\nSystem.out.println(parts[i])\r\n}\r\n```\r\n \r\n\r\nI tried to write a split function that splits any num after the ^ char but before the + symbol of each &quot;part&quot; by doing `\\\\d+\\\\x\\\\+` which just gave me an error.\r\n","title":"Is There An Order To Java Regex Expressions?","body":"<p>I recently saw how to solve a problem of mine using java regex and the split method, so i wanted to learn regex I watched a few 20-30 min videos, and I thought I understood it, but in reality, those videos are only covering the basics I assume. Because there seems to be an order that expressions go, in order to split. for instance, this code splits the coefficients up but based off the knowledge from those videos this would actually split the x and the ^ char and ANY occurrence of a digit as well as any occurrence of a &quot;+&quot; But instead it splits the function so just the coefficients are left, Why?</p>\n<p>code:</p>\n<pre><code>String polynomial = &quot;-2x^2+3x^1+6&quot;\n\nString[] parts = polynomial.split(&quot;x\\\\^\\\\d+\\\\+?&quot;)\nfor (i = 0; i &lt; part.length; i++){\nSystem.out.println(parts[i])\n}\n</code></pre>\n<p>I tried to write a split function that splits any num after the ^ char but before the + symbol of each &quot;part&quot; by doing <code>\\\\d+\\\\x\\\\+</code> which just gave me an error.</p>\n"},{"tags":["java","android-studio","opencv","image-processing"],"owner":{"account_id":27882245,"reputation":11,"user_id":21290464,"display_name":"UncannyHarmony"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681536305,"creation_date":1681536305,"question_id":76020501,"body_markdown":"I need to display the output of b* channel(I have performed inverse Thresholding on b* channel). I am new to the OpenCv so I&#39;m having hard time to figure out the method to do this, as if I directly used the Mat to Bitmap conversion on imgLab Mat, I face error... and I&#39;m not sure how to copy the outputs of b* channel on oriImage Mat. Please help.\r\n\r\n\r\n```\r\npublic void imageProcessingAlgorithm (){\r\n        new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                long tStart = System.currentTimeMillis();\r\n                countWBC = 0;\r\n                countRBC = 0;\r\n\r\n                //Convert the Bitmap image to Mat\r\n                //Utils.bitmapToMat converts an Android Bitmap to an OpenCV Mat.\r\n                Mat oriImage = new Mat();\r\n                Utils.bitmapToMat(processBitmap, oriImage);\r\n                //Imgproc.cvtColor(oriImage, oriImage, Imgproc.COLOR_RGBA2RGB);\r\n\r\n                //Grayscale image\r\n                Mat grayscale = new Mat();\r\n                Imgproc.cvtColor(oriImage,grayscale, Imgproc.COLOR_RGB2GRAY);\r\n\r\n                //Otsu Thresholding (Binary Image)\r\n                Mat otsuThreshold = new Mat();\r\n                Imgproc.threshold(grayscale, otsuThreshold ,0,255, Imgproc.THRESH_OTSU);\r\n\r\n                //Contour finding\r\n                List&lt;MatOfPoint&gt; contours = new ArrayList&lt;MatOfPoint&gt;(); //list for contours\r\n                Imgproc.findContours(otsuThreshold, contours, new Mat(), Imgproc.RETR_LIST, Imgproc.CHAIN_APPROX_NONE);\r\n                //Mat drawing = new Mat(otsuThreshold.size(), CvType.CV_8UC3);\r\n\r\n                Mat hierarchy = new Mat();\r\n                Rect rect = new Rect();\r\n                int xBound =0;\r\n                int yBound =0;\r\n                int xWidth =0;\r\n                int yHeight =0;\r\n                int radius = 0;\r\n\r\n                for (int idx = 0; idx &lt; contours.size(); idx++) {\r\n                    Mat contour = contours.get(idx);\r\n                    List&lt;Double&gt; areasList = new ArrayList&lt;Double&gt;(); //list for area\r\n                    double contourarea = Imgproc.contourArea(contour);\r\n                    areasList.add(contourarea);\r\n                    //Point2f means 2D coordinates\r\n                    MatOfPoint2f approxCurve = new MatOfPoint2f();\r\n                    MatOfPoint2f contour2f = new MatOfPoint2f(contours.get(idx).toArray());\r\n                    double approxDistance = Imgproc.arcLength(contour2f, true) * 0.02;\r\n                    Imgproc.approxPolyDP(contour2f, approxCurve, approxDistance, true);\r\n                    MatOfPoint points = new MatOfPoint(approxCurve.toArray());\r\n                    rect = Imgproc.boundingRect(points);\r\n\r\n                    //if the image is in the form of circular microscopic region, thus we need to crop it with ROI. if image contour&gt;100000 it means the sample is already in square, so no need to crop\r\n                    if (contourarea &gt; 100000) {\r\n\r\n                        //Contour Drawing + Bounding Box\r\n                        xBound = rect.x;\r\n                        yBound = rect.y;\r\n                        xWidth = rect.width;\r\n                        yHeight = rect.height;\r\n                        //to Draw contour(colour is in Yellow (red+green))\r\n                        Imgproc.drawContours(oriImage, contours, idx, new Scalar(255, 255, 0), 2, 8, hierarchy, 0, new Point());\r\n                        //to Draw Outer Bounding rectangle(colour is in Green)\r\n                        Imgproc.rectangle(oriImage, new Point(rect.x, rect.y),\r\n                                new Point(rect.x + rect.width, rect.y + rect.height), new Scalar(0, 255, 0), 3);\r\n\r\n                        // this if-else block is to get correct Length of the square, i.e smaller length is chosen as length to get perfect square fitting in the circle\r\n                        if (rect.height &gt; rect.width)\r\n                            radius = rect.width/2;\r\n                        else\r\n                            radius = rect.height/2;\r\n                    }\r\n                }\r\n\r\n                //To find internal boundary to crop image\r\n                radius = (int)(radius*0.70711);\r\n                int xPos = xBound+(xWidth/2)-radius;\r\n                int yPos = yBound+(yHeight/2)-radius;\r\n                Rect reg_info = new Rect(xPos,yPos,radius*2,radius*2);\r\n                Mat region = oriImage.submat(reg_info);\r\n                //to Draw Inner Bounding rectangle(colour is in Yellow (red+green))\r\n                Imgproc.rectangle(oriImage, new Point(xBound+(xWidth/2)-radius, yBound+(yHeight/2)-radius),\r\n                        new Point(xBound+(xWidth/2)-radius + radius*2, yBound+(yHeight/2)-radius + radius*2), new Scalar(255, 255, 0), 3);\r\n\r\n\r\n                //Transform RGB to L*a*b* (CIELab)\r\n                Mat imgLab = new Mat();\r\n                Imgproc.cvtColor(region, imgLab, Imgproc.COLOR_RGB2Lab);\r\n                //Split L*a*b* to individual channels\r\n                List&lt;Mat&gt; lLab = new ArrayList&lt;Mat&gt;(3);\r\n                Core.split(imgLab, lLab);\r\n                Mat mLabL = lLab.get(0);   //L channel\r\n                Mat mLaba = lLab.get(1);   //a* channel\r\n                Mat mLabb = lLab.get(2);   //b* channel\r\n\r\n                //Image Otsu from Labb channel image\r\n                //(Binary Thresholding for WBC)\r\n                Mat imgWBC = new Mat();\r\n                Imgproc.threshold(mLabb, imgWBC, 110, 255, Imgproc.THRESH_BINARY_INV);\r\n\r\n                Mat imgWBCnew = imgWBC.clone();\r\n\r\n                long tEnd = System.currentTimeMillis();\r\n            long tDelta = tEnd - tStart;\r\n            elapsedSeconds = tDelta/1000.0 ;\r\n\r\n            //To convert the Mat object back to Bitmap\r\n            Utils.matToBitmap(oriImage,processBitmap);\r\n\r\n\r\n          runOnUiThread(new Runnable() {\r\n\r\n              @Override\r\n              public void run() {\r\n                  invalidateOptionsMenu();\r\n                  PhotoView myImage = (PhotoView) findViewById(R.id.resultImage);\r\n                  myImage.setImageBitmap(processBitmap);\r\n                  db.updateResult(new SampleViewList(fileName,folderName,countRBC,countWBC,String.valueOf(elapsedSeconds),getDate()));\r\n                  getImage = db.getImgView(fileName);\r\n                  showResult();\r\n                  try{\r\n                      FileOutputStream fOut = new FileOutputStream(resultImagedir);\r\n                      processBitmap.compress(Bitmap.CompressFormat.JPEG, 100, fOut);\r\n                      try{\r\n                          fOut.flush();\r\n                          fOut.close();\r\n                      } catch (IOException E){\r\n                          E.printStackTrace();\r\n                      }\r\n                  } catch (FileNotFoundException e){\r\n                      e.printStackTrace();\r\n                  }\r\n\r\n    }\r\n\r\n    });\r\n            }\r\n  }).start();\r\n    }\r\n\r\n```\r\n\r\n","title":"How to display results of 1 channel in CIELab","body":"<p>I need to display the output of b* channel(I have performed inverse Thresholding on b* channel). I am new to the OpenCv so I'm having hard time to figure out the method to do this, as if I directly used the Mat to Bitmap conversion on imgLab Mat, I face error... and I'm not sure how to copy the outputs of b* channel on oriImage Mat. Please help.</p>\n<pre><code>public void imageProcessingAlgorithm (){\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                long tStart = System.currentTimeMillis();\n                countWBC = 0;\n                countRBC = 0;\n\n                //Convert the Bitmap image to Mat\n                //Utils.bitmapToMat converts an Android Bitmap to an OpenCV Mat.\n                Mat oriImage = new Mat();\n                Utils.bitmapToMat(processBitmap, oriImage);\n                //Imgproc.cvtColor(oriImage, oriImage, Imgproc.COLOR_RGBA2RGB);\n\n                //Grayscale image\n                Mat grayscale = new Mat();\n                Imgproc.cvtColor(oriImage,grayscale, Imgproc.COLOR_RGB2GRAY);\n\n                //Otsu Thresholding (Binary Image)\n                Mat otsuThreshold = new Mat();\n                Imgproc.threshold(grayscale, otsuThreshold ,0,255, Imgproc.THRESH_OTSU);\n\n                //Contour finding\n                List&lt;MatOfPoint&gt; contours = new ArrayList&lt;MatOfPoint&gt;(); //list for contours\n                Imgproc.findContours(otsuThreshold, contours, new Mat(), Imgproc.RETR_LIST, Imgproc.CHAIN_APPROX_NONE);\n                //Mat drawing = new Mat(otsuThreshold.size(), CvType.CV_8UC3);\n\n                Mat hierarchy = new Mat();\n                Rect rect = new Rect();\n                int xBound =0;\n                int yBound =0;\n                int xWidth =0;\n                int yHeight =0;\n                int radius = 0;\n\n                for (int idx = 0; idx &lt; contours.size(); idx++) {\n                    Mat contour = contours.get(idx);\n                    List&lt;Double&gt; areasList = new ArrayList&lt;Double&gt;(); //list for area\n                    double contourarea = Imgproc.contourArea(contour);\n                    areasList.add(contourarea);\n                    //Point2f means 2D coordinates\n                    MatOfPoint2f approxCurve = new MatOfPoint2f();\n                    MatOfPoint2f contour2f = new MatOfPoint2f(contours.get(idx).toArray());\n                    double approxDistance = Imgproc.arcLength(contour2f, true) * 0.02;\n                    Imgproc.approxPolyDP(contour2f, approxCurve, approxDistance, true);\n                    MatOfPoint points = new MatOfPoint(approxCurve.toArray());\n                    rect = Imgproc.boundingRect(points);\n\n                    //if the image is in the form of circular microscopic region, thus we need to crop it with ROI. if image contour&gt;100000 it means the sample is already in square, so no need to crop\n                    if (contourarea &gt; 100000) {\n\n                        //Contour Drawing + Bounding Box\n                        xBound = rect.x;\n                        yBound = rect.y;\n                        xWidth = rect.width;\n                        yHeight = rect.height;\n                        //to Draw contour(colour is in Yellow (red+green))\n                        Imgproc.drawContours(oriImage, contours, idx, new Scalar(255, 255, 0), 2, 8, hierarchy, 0, new Point());\n                        //to Draw Outer Bounding rectangle(colour is in Green)\n                        Imgproc.rectangle(oriImage, new Point(rect.x, rect.y),\n                                new Point(rect.x + rect.width, rect.y + rect.height), new Scalar(0, 255, 0), 3);\n\n                        // this if-else block is to get correct Length of the square, i.e smaller length is chosen as length to get perfect square fitting in the circle\n                        if (rect.height &gt; rect.width)\n                            radius = rect.width/2;\n                        else\n                            radius = rect.height/2;\n                    }\n                }\n\n                //To find internal boundary to crop image\n                radius = (int)(radius*0.70711);\n                int xPos = xBound+(xWidth/2)-radius;\n                int yPos = yBound+(yHeight/2)-radius;\n                Rect reg_info = new Rect(xPos,yPos,radius*2,radius*2);\n                Mat region = oriImage.submat(reg_info);\n                //to Draw Inner Bounding rectangle(colour is in Yellow (red+green))\n                Imgproc.rectangle(oriImage, new Point(xBound+(xWidth/2)-radius, yBound+(yHeight/2)-radius),\n                        new Point(xBound+(xWidth/2)-radius + radius*2, yBound+(yHeight/2)-radius + radius*2), new Scalar(255, 255, 0), 3);\n\n\n                //Transform RGB to L*a*b* (CIELab)\n                Mat imgLab = new Mat();\n                Imgproc.cvtColor(region, imgLab, Imgproc.COLOR_RGB2Lab);\n                //Split L*a*b* to individual channels\n                List&lt;Mat&gt; lLab = new ArrayList&lt;Mat&gt;(3);\n                Core.split(imgLab, lLab);\n                Mat mLabL = lLab.get(0);   //L channel\n                Mat mLaba = lLab.get(1);   //a* channel\n                Mat mLabb = lLab.get(2);   //b* channel\n\n                //Image Otsu from Labb channel image\n                //(Binary Thresholding for WBC)\n                Mat imgWBC = new Mat();\n                Imgproc.threshold(mLabb, imgWBC, 110, 255, Imgproc.THRESH_BINARY_INV);\n\n                Mat imgWBCnew = imgWBC.clone();\n\n                long tEnd = System.currentTimeMillis();\n            long tDelta = tEnd - tStart;\n            elapsedSeconds = tDelta/1000.0 ;\n\n            //To convert the Mat object back to Bitmap\n            Utils.matToBitmap(oriImage,processBitmap);\n\n\n          runOnUiThread(new Runnable() {\n\n              @Override\n              public void run() {\n                  invalidateOptionsMenu();\n                  PhotoView myImage = (PhotoView) findViewById(R.id.resultImage);\n                  myImage.setImageBitmap(processBitmap);\n                  db.updateResult(new SampleViewList(fileName,folderName,countRBC,countWBC,String.valueOf(elapsedSeconds),getDate()));\n                  getImage = db.getImgView(fileName);\n                  showResult();\n                  try{\n                      FileOutputStream fOut = new FileOutputStream(resultImagedir);\n                      processBitmap.compress(Bitmap.CompressFormat.JPEG, 100, fOut);\n                      try{\n                          fOut.flush();\n                          fOut.close();\n                      } catch (IOException E){\n                          E.printStackTrace();\n                      }\n                  } catch (FileNotFoundException e){\n                      e.printStackTrace();\n                  }\n\n    }\n\n    });\n            }\n  }).start();\n    }\n\n</code></pre>\n"},{"tags":["java","struct","unpack"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1680740295,"post_id":75944653,"comment_id":133951164,"body_markdown":"Something like a `ByteBuffer` or a `FloatBuffer` seems possible here, depending on your requirements.","body":"Something like a <code>ByteBuffer</code> or a <code>FloatBuffer</code> seems possible here, depending on your requirements."}],"answers":[{"comments":[{"owner":{"account_id":23669032,"reputation":51,"user_id":17696091,"display_name":"newbie5050"},"score":0,"creation_date":1680791178,"post_id":75945149,"comment_id":133960258,"body_markdown":"I ran the above code and got different results from Python. I would expect to get these results like (18.477258682250977, 18.461912155151367, 18.826318740844727, 18.76152801513672,...) but I got these results from Java code: \n(8.107548E27, NaN, 3.28386592E8, -5.015591E-22, -5.2745868E-12, 2.7122066E24, 997716.06,...)","body":"I ran the above code and got different results from Python. I would expect to get these results like (18.477258682250977, 18.461912155151367, 18.826318740844727, 18.76152801513672,...) but I got these results from Java code:  (8.107548E27, NaN, 3.28386592E8, -5.015591E-22, -5.2745868E-12, 2.7122066E24, 997716.06,...)"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1680792027,"post_id":75945149,"comment_id":133960516,"body_markdown":"@newbie5050 Could it be because of the endianness? What endianness does your python code use? Specify that using the `order` method I showed.","body":"@newbie5050 Could it be because of the endianness? What endianness does your python code use? Specify that using the <code>order</code> method I showed."},{"owner":{"account_id":23669032,"reputation":51,"user_id":17696091,"display_name":"newbie5050"},"score":0,"creation_date":1680799635,"post_id":75945149,"comment_id":133962487,"body_markdown":"It worked after I took your advice using. order(ByteOrder.LITTLE_ENDIAN). Appreciated!","body":"It worked after I took your advice using. order(ByteOrder.LITTLE_ENDIAN). Appreciated!"},{"owner":{"account_id":23669032,"reputation":51,"user_id":17696091,"display_name":"newbie5050"},"score":0,"creation_date":1680802279,"post_id":75945149,"comment_id":133963082,"body_markdown":"I am trying to modify the above code into Double (for higher precision):         var doubles = ByteBuffer.wrap(bytes)\n//  optionally, specify the byte order here \n  .order(ByteOrder.LITTLE_ENDIAN).asDoubleBuffer();\n        var doubleArray = new double[128 * 128];\n        doubles.get(doubleArray); but I got the error. Do you have an idea how to modify the code for double?","body":"I am trying to modify the above code into Double (for higher precision):         var doubles = ByteBuffer.wrap(bytes) //  optionally, specify the byte order here    .order(ByteOrder.LITTLE_ENDIAN).asDoubleBuffer();         var doubleArray = new double[128 * 128];         doubles.get(doubleArray); but I got the error. Do you have an idea how to modify the code for double?"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1680822569,"post_id":75945149,"comment_id":133966772,"body_markdown":"@newbie5050 are you still reading 4*128*128 bytes? That will be 128*64 doubles, not 128*12&amp;. Doubles take up twice as much space.","body":"@newbie5050 are you still reading 4*128*128 bytes? That will be 128*64 doubles, not 128*12&amp;. Doubles take up twice as much space."}],"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680744598,"creation_date":1680744598,"answer_id":75945149,"question_id":75944653,"body_markdown":"You can wrap the bytes you read from the file in a [`FloatBuffer`][1].\r\n\r\n```\r\nvar fis = new FileInputStream(&quot;/path/to/file&quot;);\r\nvar bytes = fis.readNBytes(4 * 128 * 128);\r\nvar floats = ByteBuffer.wrap(bytes)\r\n//  optionally, specify the byte order here\r\n//  .order(ByteOrder.LITTLE_ENDIAN)\r\n    .asFloatBuffer();\r\n```\r\n\r\nThen, you can use `floats.get(n)` to get the float at index `n`, or `floats.put(n, f)` to write the float `f` into index `n`, just like you can with a `float[]`.\r\n\r\nIf you want a `float[]` for some reason, you need to allocate a new one and read the contents of `floats` into it:\r\n\r\n```\r\nvar floatArray = new float[128 * 128];\r\nfloats.get(floatArray);\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/FloatBuffer.html","title":"How to implement struct.unpack in Java with float type?","body":"<p>You can wrap the bytes you read from the file in a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/FloatBuffer.html\" rel=\"nofollow noreferrer\"><code>FloatBuffer</code></a>.</p>\n<pre><code>var fis = new FileInputStream(&quot;/path/to/file&quot;);\nvar bytes = fis.readNBytes(4 * 128 * 128);\nvar floats = ByteBuffer.wrap(bytes)\n//  optionally, specify the byte order here\n//  .order(ByteOrder.LITTLE_ENDIAN)\n    .asFloatBuffer();\n</code></pre>\n<p>Then, you can use <code>floats.get(n)</code> to get the float at index <code>n</code>, or <code>floats.put(n, f)</code> to write the float <code>f</code> into index <code>n</code>, just like you can with a <code>float[]</code>.</p>\n<p>If you want a <code>float[]</code> for some reason, you need to allocate a new one and read the contents of <code>floats</code> into it:</p>\n<pre><code>var floatArray = new float[128 * 128];\nfloats.get(floatArray);\n</code></pre>\n"}],"owner":{"account_id":23669032,"reputation":51,"user_id":17696091,"display_name":"newbie5050"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1681535645,"creation_date":1680736482,"question_id":75944653,"body_markdown":"I have a Python code that works fine but I will need to convert it into Java:\r\n\r\n```\r\n    file_path = ...\r\n    with open(file_path, &quot;rb&quot;) as file:\r\n        in = file.read(4 * 128 * 128)\r\n        numbers = struct.unpack(&#39;f&#39; * 128 * 128, in)\r\n```\r\n\r\nI found [the implementation for other types here](https://stackoverflow.com/questions/29879009/how-to-convert-python-struct-unpack-to-java) but I am looking for the implementation of the struct.unpack in Java for [float type(C Type = f)](https://docs.python.org/3/library/struct.html).","title":"How to implement struct.unpack in Java with float type?","body":"<p>I have a Python code that works fine but I will need to convert it into Java:</p>\n<pre><code>    file_path = ...\n    with open(file_path, &quot;rb&quot;) as file:\n        in = file.read(4 * 128 * 128)\n        numbers = struct.unpack('f' * 128 * 128, in)\n</code></pre>\n<p>I found <a href=\"https://stackoverflow.com/questions/29879009/how-to-convert-python-struct-unpack-to-java\">the implementation for other types here</a> but I am looking for the implementation of the struct.unpack in Java for <a href=\"https://docs.python.org/3/library/struct.html\" rel=\"nofollow noreferrer\">float type(C Type = f)</a>.</p>\n"},{"tags":["java","arraylist","stream"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1681543628,"post_id":76020332,"comment_id":134076299,"body_markdown":"You should add prose to describe what you are trying to accomplish with the code.","body":"You should add prose to describe what you are trying to accomplish with the code."}],"answers":[{"tags":[],"owner":{"account_id":20261613,"reputation":323,"user_id":14859844,"display_name":"Shahab Ranjbary"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681535374,"creation_date":1681534724,"answer_id":76020428,"question_id":76020332,"body_markdown":"There are two ways to do that.\r\n\r\n### 1. Use a Map ###\r\n\r\n    Map&lt;Integer, Person&gt; map = new HashMap&lt;&gt;();\r\n    for (Person person : list) {\r\n        int id = person.getId();\r\n        if (!map.containsKey(id)) {\r\n            map.put(id, person);\r\n        } else {\r\n            Person existingPerson = map.get(id);\r\n            List&lt;position&gt; positions = existingPerson.getPosition();\r\n            positions.addAll(person.getPosition());\r\n            existingPerson.setPosition(positions);\r\n        }\r\n    }\r\n    List&lt;Person&gt; mergedList = new ArrayList&lt;&gt;(map.values());\r\n    System.out.println(mergedList);\r\n\r\n\r\n### 2. Use a **Stream** and `Collectors.groupingBy()` ###\r\n\r\n    List&lt;Person&gt; mergedList = list.stream()\r\n                .collect(Collectors.groupingBy(Person::getId))\r\n                .values().stream()\r\n                .map(group -&gt; {\r\n                    int id = group.get(0).getId();\r\n                    int contract = group.get(0).getContract();\r\n                    List&lt;Position&gt; positions = group.stream()\r\n                            .flatMap(person -&gt; person.getPositions().stream())\r\n                            .collect(Collectors.toList());\r\n                    return new Person(id, contract, positions);\r\n                })\r\n                .collect(Collectors.toList());\r\n    System.out.println(mergedList);\r\n\r\n","title":"Java - from ArrayList of object merge their data when the id is the same and inline with object by id","body":"<p>There are two ways to do that.</p>\n<h3>1. Use a Map</h3>\n<pre><code>Map&lt;Integer, Person&gt; map = new HashMap&lt;&gt;();\nfor (Person person : list) {\n    int id = person.getId();\n    if (!map.containsKey(id)) {\n        map.put(id, person);\n    } else {\n        Person existingPerson = map.get(id);\n        List&lt;position&gt; positions = existingPerson.getPosition();\n        positions.addAll(person.getPosition());\n        existingPerson.setPosition(positions);\n    }\n}\nList&lt;Person&gt; mergedList = new ArrayList&lt;&gt;(map.values());\nSystem.out.println(mergedList);\n</code></pre>\n<h3>2. Use a <strong>Stream</strong> and <code>Collectors.groupingBy()</code></h3>\n<pre><code>List&lt;Person&gt; mergedList = list.stream()\n            .collect(Collectors.groupingBy(Person::getId))\n            .values().stream()\n            .map(group -&gt; {\n                int id = group.get(0).getId();\n                int contract = group.get(0).getContract();\n                List&lt;Position&gt; positions = group.stream()\n                        .flatMap(person -&gt; person.getPositions().stream())\n                        .collect(Collectors.toList());\n                return new Person(id, contract, positions);\n            })\n            .collect(Collectors.toList());\nSystem.out.println(mergedList);\n</code></pre>\n"}],"owner":{"account_id":21956360,"reputation":5,"user_id":16234870,"display_name":"ark"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76020428,"answer_count":1,"score":-2,"last_activity_date":1681535374,"creation_date":1681532345,"question_id":76020332,"body_markdown":"I am working in a problem with a list in java and need to merge info of two object from this.\r\n\r\nThis is my code\r\n```\r\nPerson person1 = new Person(1, 470, new ArrayList&lt;&gt;(Arrays.asList(new position(45, LocalDate.now()), new position(42, LocalDate.now()) )) );\r\nPerson person2 = new Person(1, 320, new ArrayList&lt;&gt;(Arrays.asList(new position(35, LocalDate.now()) )) );\r\nList&lt;Person&gt; list = new ArrayList&lt;&gt;();\r\nlist.add(person1);\r\nlist.add(person2);\r\n\r\n        for(Person person:list){\r\n            int id= person.getId();;\r\n            List&lt;position&gt; aux = new ArrayList&lt;&gt;();\r\n            list.stream().forEach(x -&gt; {\r\n                if(x.getId()==id){\r\n                    aux.addAll( x.getPosition());\r\n                    \r\n                }\r\n            });\r\n            person.setPosition(aux);\r\n        }\r\n```\r\nthis is my print\r\n\r\n```\r\n[person{id=1, contrac=470, position=[position{id=45, bd=2023-04-14}, position{id=42, bd=2023-04-14}, position{id=35, bd=2023-04-14}]}, person{id=1, contrac=320, position=[position{id=45, bd=2023-04-14}, position{id=42, bd=2023-04-14}, position{id=35, bd=2023-04-14}, position{id=35, bd=2023-04-14}]}]\r\n```\r\ni have at the end two object and y need only one\r\nany suggestion to get only one or to improve the code\r\n\r\ni tried to get only one an object by id with the info of positions of all the object with the same id","title":"Java - from ArrayList of object merge their data when the id is the same and inline with object by id","body":"<p>I am working in a problem with a list in java and need to merge info of two object from this.</p>\n<p>This is my code</p>\n<pre><code>Person person1 = new Person(1, 470, new ArrayList&lt;&gt;(Arrays.asList(new position(45, LocalDate.now()), new position(42, LocalDate.now()) )) );\nPerson person2 = new Person(1, 320, new ArrayList&lt;&gt;(Arrays.asList(new position(35, LocalDate.now()) )) );\nList&lt;Person&gt; list = new ArrayList&lt;&gt;();\nlist.add(person1);\nlist.add(person2);\n\n        for(Person person:list){\n            int id= person.getId();;\n            List&lt;position&gt; aux = new ArrayList&lt;&gt;();\n            list.stream().forEach(x -&gt; {\n                if(x.getId()==id){\n                    aux.addAll( x.getPosition());\n                    \n                }\n            });\n            person.setPosition(aux);\n        }\n</code></pre>\n<p>this is my print</p>\n<pre><code>[person{id=1, contrac=470, position=[position{id=45, bd=2023-04-14}, position{id=42, bd=2023-04-14}, position{id=35, bd=2023-04-14}]}, person{id=1, contrac=320, position=[position{id=45, bd=2023-04-14}, position{id=42, bd=2023-04-14}, position{id=35, bd=2023-04-14}, position{id=35, bd=2023-04-14}]}]\n</code></pre>\n<p>i have at the end two object and y need only one\nany suggestion to get only one or to improve the code</p>\n<p>i tried to get only one an object by id with the info of positions of all the object with the same id</p>\n"},{"tags":["java","apache-spark","elasticsearch","apache-spark-sql"],"comments":[{"owner":{"account_id":543600,"reputation":1014,"user_id":2125723,"accept_rate":80,"display_name":"ryanwebjackson"},"score":0,"creation_date":1681426573,"post_id":76004732,"comment_id":134058867,"body_markdown":"Can you add the snippet of what you tried?","body":"Can you add the snippet of what you tried?"},{"owner":{"account_id":27418729,"reputation":1,"user_id":20917525,"display_name":"Shreelakshmi Joshi"},"score":1,"creation_date":1681533072,"post_id":76004732,"comment_id":134075495,"body_markdown":"@ryanwebjackson, sure... I&#39;ve edited it to add code snippets","body":"@ryanwebjackson, sure... I&#39;ve edited it to add code snippets"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1681534200,"post_id":76004732,"comment_id":134075565,"body_markdown":"Spark has an Elasticsearch client already. Why use native Java client?","body":"Spark has an Elasticsearch client already. Why use native Java client?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1681534268,"post_id":76004732,"comment_id":134075569,"body_markdown":"In any case, the problem with this code `sparksession.read().load()` accepts a **file path**, not a string variable in-memory","body":"In any case, the problem with this code <code>sparksession.read().load()</code> accepts a <b>file path</b>, not a string variable in-memory"},{"owner":{"account_id":27418729,"reputation":1,"user_id":20917525,"display_name":"Shreelakshmi Joshi"},"score":0,"creation_date":1681709076,"post_id":76004732,"comment_id":134094260,"body_markdown":"Oh okay, @OneCricketeer you&#39;re right... I was looking at Spark support in Elasticsearch (https://www.elastic.co/guide/en/elasticsearch/hadoop/current/spark.html). Are there any other places where I could learn more about it as I feel the Java implementation for Spark is kinda vague?","body":"Oh okay, @OneCricketeer you&#39;re right... I was looking at Spark support in Elasticsearch (<a href=\"https://www.elastic.co/guide/en/elasticsearch/hadoop/current/spark.html\" rel=\"nofollow noreferrer\">elastic.co/guide/en/elasticsearch/hadoop/current/spark.html</a>&zwnj;&#8203;). Are there any other places where I could learn more about it as I feel the Java implementation for Spark is kinda vague?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1681733745,"post_id":76004732,"comment_id":134099339,"body_markdown":"More about what? That is the official documentation. Scala/Java/Python can all access the same classes in Spark. That page tells you how to create a dataframe and see its schema - https://www.elastic.co/guide/en/elasticsearch/hadoop/current/spark.html#spark-sql-read-java","body":"More about what? That is the official documentation. Scala/Java/Python can all access the same classes in Spark. That page tells you how to create a dataframe and see its schema - <a href=\"https://www.elastic.co/guide/en/elasticsearch/hadoop/current/spark.html#spark-sql-read-java\" rel=\"nofollow noreferrer\">elastic.co/guide/en/elasticsearch/hadoop/current/&hellip;</a>"},{"owner":{"account_id":27418729,"reputation":1,"user_id":20917525,"display_name":"Shreelakshmi Joshi"},"score":0,"creation_date":1681805422,"post_id":76004732,"comment_id":134111722,"body_markdown":"I meant more about writing the ElasticSearch response into a parquet file and if there are some methods that could allow me to add the schema dynamically","body":"I meant more about writing the ElasticSearch response into a parquet file and if there are some methods that could allow me to add the schema dynamically"}],"owner":{"account_id":27418729,"reputation":1,"user_id":20917525,"display_name":"Shreelakshmi Joshi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":211,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681534212,"creation_date":1681384198,"question_id":76004732,"body_markdown":"I wanted to convert the response from ElasticSearch `co.elastic.clients.elasticsearch.core.SearchResponse&lt;ObjectNode&gt; response` to a parquet file by generating the schema dynamically...\r\n\r\nI tried using Spark to create the parquet file dynamically, but it takes up a lot of heap space and is not memory efficient which resulted in a Memory out-of-bound exception as it exceeded the heap space while reading the JSON file and creating the data frame.\r\n\r\nI was looking to convert the Elastic response to a parquet file directly where the schema could be generated dynamically...\r\n\r\nI also saw that the schema is being generated dynamically by reading the first line of the record, but I&#39;m not sure if this might work when the JSON response or elastic response has a hierarchy or nested structure.\r\n\r\nHere&#39;s a code block for generating the schema of the parquet file dynamically through Spark.\r\n\r\n     \r\n\r\n    public static void main(String[] args) throws AnalysisException {\r\n        System.out.println(&quot;Hello world!&quot;);\r\n\r\n        SparkSession sparkSession = SparkSession\r\n                .builder()\r\n                .appName(&quot;Java Spark SQL basic example&quot;)\r\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\r\n                .getOrCreate();\r\n\r\n\r\n        // create a data from the source\r\n        Dataset&lt;Row&gt; dataframe =\r\n                sparkSession\r\n                        .read()\r\n                        .json(&quot;async.json&quot;);\r\n\r\n     //sparkSession.read().format(&quot;co.elastic.clients.elasticsearch.core.SearchResponse&lt;ObjectNode&gt;&quot;).load(response);\r\n\r\n\r\n        // save the json as a parquet file, maintaining the schema information\r\n        dataframe\r\n                .write()\r\n                .parquet(&quot;async.parquet&quot;);\r\n\r\n        // after the parquet file is created\r\n        // read the parquet file\r\n        // parquet file is self-describing so the schema is preserved\r\n        // the result of loading a parquet file is a also a Dataframe\r\n        Dataset&lt;Row&gt; parquetFileDataFrame = sparkSession\r\n                .read()\r\n                .parquet(&quot;async.parquet&quot;);\r\n\r\n        // parquet files are used to create temporary view and then used in SQL statements\r\n        parquetFileDataFrame.createTempView(&quot;parquetFile&quot;);\r\n\r\n        Dataset&lt;Row&gt; namesDataFrame = sparkSession\r\n                .sql(&quot;SELECT * FROM parquetFile&quot;);\r\n        namesDataFrame.show();\r\n    }\r\n\r\nHere&#39;s the code block where I want to convert the response from ElasticSearch async scroll&#39;s response to a parquet file where the schema could be generated dynamically...\r\n\r\n    public Future&lt;JsonObject&gt; asyncScroll(File file, String index, Query query, String[] source,\r\n      String searchId, ProgressListener progressListener) {\r\n    Promise&lt;JsonObject&gt; promise = Promise.promise();\r\n\r\n    SearchRequest searchRequest = SearchRequest\r\n        .of(e -&gt; e.index(index).query(query).size(10000).scroll(scr -&gt; scr.time(&quot;5m&quot;)));\r\n    asyncClient.search(searchRequest, ObjectNode.class).whenCompleteAsync((response, ex) -&gt; {\r\n      if (ex != null) {\r\n\r\n      }\r\n      String scrollId=null;\r\n      try {\r\n        // LOGGER.info(&quot;response : {}&quot;,response.toString());\r\n        scrollId = response.scrollId();\r\n\r\n        Dataset&lt;Row&gt; dataframe =\r\n              sparkSession\r\n                .read()\r\n                .format(&quot;String&quot;)\r\n                .load(response.toString());\r\n                \r\n        dataframe\r\n                .write()\r\n                .parquet(&quot;async.parquet&quot;);\r\n\r\n        Dataset&lt;Row&gt;  parquetFileDataFrame = sparkSession\r\n                .read()\r\n                .parquet(&quot;async.parquet&quot;);\r\n\r\n        // parquet files are used to create temporay view and then used in SQL statements\r\n        parquetFileDataFrame\r\n                .createTempView(&quot;parquetFile&quot;);\r\n\r\n        Dataset&lt;Row&gt;  namesDataFrame = sparkSession\r\n                .sql(&quot;SELECT * FROM parquetFile&quot;);\r\n        namesDataFrame.show();\r\n\r\n\r\nAny help is much appreciated!","title":"How to convert the ElasticSearch result into a parquet file?","body":"<p>I wanted to convert the response from ElasticSearch <code>co.elastic.clients.elasticsearch.core.SearchResponse&lt;ObjectNode&gt; response</code> to a parquet file by generating the schema dynamically...</p>\n<p>I tried using Spark to create the parquet file dynamically, but it takes up a lot of heap space and is not memory efficient which resulted in a Memory out-of-bound exception as it exceeded the heap space while reading the JSON file and creating the data frame.</p>\n<p>I was looking to convert the Elastic response to a parquet file directly where the schema could be generated dynamically...</p>\n<p>I also saw that the schema is being generated dynamically by reading the first line of the record, but I'm not sure if this might work when the JSON response or elastic response has a hierarchy or nested structure.</p>\n<p>Here's a code block for generating the schema of the parquet file dynamically through Spark.</p>\n<pre><code>public static void main(String[] args) throws AnalysisException {\n    System.out.println(&quot;Hello world!&quot;);\n\n    SparkSession sparkSession = SparkSession\n            .builder()\n            .appName(&quot;Java Spark SQL basic example&quot;)\n            .config(&quot;spark.master&quot;, &quot;local&quot;)\n            .getOrCreate();\n\n\n    // create a data from the source\n    Dataset&lt;Row&gt; dataframe =\n            sparkSession\n                    .read()\n                    .json(&quot;async.json&quot;);\n\n //sparkSession.read().format(&quot;co.elastic.clients.elasticsearch.core.SearchResponse&lt;ObjectNode&gt;&quot;).load(response);\n\n\n    // save the json as a parquet file, maintaining the schema information\n    dataframe\n            .write()\n            .parquet(&quot;async.parquet&quot;);\n\n    // after the parquet file is created\n    // read the parquet file\n    // parquet file is self-describing so the schema is preserved\n    // the result of loading a parquet file is a also a Dataframe\n    Dataset&lt;Row&gt; parquetFileDataFrame = sparkSession\n            .read()\n            .parquet(&quot;async.parquet&quot;);\n\n    // parquet files are used to create temporary view and then used in SQL statements\n    parquetFileDataFrame.createTempView(&quot;parquetFile&quot;);\n\n    Dataset&lt;Row&gt; namesDataFrame = sparkSession\n            .sql(&quot;SELECT * FROM parquetFile&quot;);\n    namesDataFrame.show();\n}\n</code></pre>\n<p>Here's the code block where I want to convert the response from ElasticSearch async scroll's response to a parquet file where the schema could be generated dynamically...</p>\n<pre><code>public Future&lt;JsonObject&gt; asyncScroll(File file, String index, Query query, String[] source,\n  String searchId, ProgressListener progressListener) {\nPromise&lt;JsonObject&gt; promise = Promise.promise();\n\nSearchRequest searchRequest = SearchRequest\n    .of(e -&gt; e.index(index).query(query).size(10000).scroll(scr -&gt; scr.time(&quot;5m&quot;)));\nasyncClient.search(searchRequest, ObjectNode.class).whenCompleteAsync((response, ex) -&gt; {\n  if (ex != null) {\n\n  }\n  String scrollId=null;\n  try {\n    // LOGGER.info(&quot;response : {}&quot;,response.toString());\n    scrollId = response.scrollId();\n\n    Dataset&lt;Row&gt; dataframe =\n          sparkSession\n            .read()\n            .format(&quot;String&quot;)\n            .load(response.toString());\n            \n    dataframe\n            .write()\n            .parquet(&quot;async.parquet&quot;);\n\n    Dataset&lt;Row&gt;  parquetFileDataFrame = sparkSession\n            .read()\n            .parquet(&quot;async.parquet&quot;);\n\n    // parquet files are used to create temporay view and then used in SQL statements\n    parquetFileDataFrame\n            .createTempView(&quot;parquetFile&quot;);\n\n    Dataset&lt;Row&gt;  namesDataFrame = sparkSession\n            .sql(&quot;SELECT * FROM parquetFile&quot;);\n    namesDataFrame.show();\n</code></pre>\n<p>Any help is much appreciated!</p>\n"},{"tags":["java","spring","hibernate"],"owner":{"account_id":18385675,"reputation":67,"user_id":13392777,"display_name":"iducam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681533539,"creation_date":1681533209,"question_id":76020366,"body_markdown":"I&#39;m trying to persist the following objects:\r\n\r\n```\r\n@Entity\r\n@DynamicUpdate\r\npublic class Item {\r\n    ...\r\n\r\n    @ManyToMany(fetch = FetchType.LAZY, cascade = {CascadeType.MERGE, CascadeType.PERSIST})\r\n    @JoinTable(\r\n            name = &quot;item_tag&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;item_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;tag_name&quot;)\r\n    )\r\n    private Set&lt;Tag&gt; tags = new HashSet&lt;&gt;();\r\n\r\n    ...\r\n}\r\n```\r\n\r\nand \r\n\r\n```\r\n@Entity\r\npublic class Tag {\r\n    ...\r\n\r\n    @ManyToMany(mappedBy = &quot;tags&quot;, fetch = FetchType.LAZY, cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n    @JsonIgnore\r\n    private Set&lt;Item&gt; items = new HashSet&lt;&gt;();\r\n\r\n    ...\r\n}\r\n```\r\n\r\nThe behaviour I expect is that when saving a new Item that has a new Tag, the Item will cascade the persist operation to the new Tag and insert them into their respective tables as well as the corresponding entry in the join table. However, the transaction fails because Hibernate tries inserting into the Item table, followed immediately by the join table which has a foreign key constraint on the not-yet-inserted Tag. The strange thing is that when I update the `CascadeType` of my Item to `CascadeType.ALL`, it inserts the Item, the Tag, and updates the join table in the manner I desire. This is not the case even if I include all `CascadeType`s except for `CascadeType.REMOVE`.\r\n\r\nObviously this is not a realistic solution for me as I do not want Tags deleted when I remove an Item, so 1) why does `CascadeType.ALL` produce such (unexpected) behaviour, and 2) is the correct design to first persist my Tags and then the Item?","title":"How can I simultaneously persist new entries on both sides of a ManyToMany relationship in Hibernate?","body":"<p>I'm trying to persist the following objects:</p>\n<pre><code>@Entity\n@DynamicUpdate\npublic class Item {\n    ...\n\n    @ManyToMany(fetch = FetchType.LAZY, cascade = {CascadeType.MERGE, CascadeType.PERSIST})\n    @JoinTable(\n            name = &quot;item_tag&quot;,\n            joinColumns = @JoinColumn(name = &quot;item_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;tag_name&quot;)\n    )\n    private Set&lt;Tag&gt; tags = new HashSet&lt;&gt;();\n\n    ...\n}\n</code></pre>\n<p>and</p>\n<pre><code>@Entity\npublic class Tag {\n    ...\n\n    @ManyToMany(mappedBy = &quot;tags&quot;, fetch = FetchType.LAZY, cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n    @JsonIgnore\n    private Set&lt;Item&gt; items = new HashSet&lt;&gt;();\n\n    ...\n}\n</code></pre>\n<p>The behaviour I expect is that when saving a new Item that has a new Tag, the Item will cascade the persist operation to the new Tag and insert them into their respective tables as well as the corresponding entry in the join table. However, the transaction fails because Hibernate tries inserting into the Item table, followed immediately by the join table which has a foreign key constraint on the not-yet-inserted Tag. The strange thing is that when I update the <code>CascadeType</code> of my Item to <code>CascadeType.ALL</code>, it inserts the Item, the Tag, and updates the join table in the manner I desire. This is not the case even if I include all <code>CascadeType</code>s except for <code>CascadeType.REMOVE</code>.</p>\n<p>Obviously this is not a realistic solution for me as I do not want Tags deleted when I remove an Item, so 1) why does <code>CascadeType.ALL</code> produce such (unexpected) behaviour, and 2) is the correct design to first persist my Tags and then the Item?</p>\n"},{"tags":["java","class","constructor","initialization"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1681519495,"post_id":76018876,"comment_id":134074661,"body_markdown":"One Team (singular grammar) has a group (plural) of players. Team does not play itself , so , Teams (plural) is a group of Team multiple sets of.   So that really should be &quot;public class Teams extends ArrayList&lt;Team&gt;   and    &quot;public class Players extends ArrayList&lt;Player&gt;&quot;.  I don&#39;t use it much &quot;public class Teams&lt;Team&gt; extends ArrayList&quot; forgot which, compiler  will shows error., Teams&lt;Team&gt; or Players&lt;Player&gt; is how the variable type would be written in a class for those classes. Reasonably sure the latter because to sensibly declare &quot;Players&lt;Player&gt; pls = new Players&lt;&gt;();&quot;","body":"One Team (singular grammar) has a group (plural) of players. Team does not play itself , so , Teams (plural) is a group of Team multiple sets of.   So that really should be &quot;public class Teams extends ArrayList&lt;Team&gt;   and    &quot;public class Players extends ArrayList&lt;Player&gt;&quot;.  I don&#39;t use it much &quot;public class Teams&lt;Team&gt; extends ArrayList&quot; forgot which, compiler  will shows error., Teams&lt;Team&gt; or Players&lt;Player&gt; is how the variable type would be written in a class for those classes. Reasonably sure the latter because to sensibly declare &quot;Players&lt;Player&gt; pls = new Players&lt;&gt;();&quot;"}],"answers":[{"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1681527750,"post_id":76020105,"comment_id":134075197,"body_markdown":"made a minor blunder for a moment, fixed team (singular)","body":"made a minor blunder for a moment, fixed team (singular)"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1681539196,"post_id":76020105,"comment_id":134075924,"body_markdown":"no, collection classes are for using (_not_ extending)","body":"no, collection classes are for using (<i>not</i> extending)"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1681579195,"post_id":76020105,"comment_id":134080698,"body_markdown":"No extending it allows less classes required in source code, particularly with something like team done as a nested subclass. Each to their own.","body":"No extending it allows less classes required in source code, particularly with something like team done as a nested subclass. Each to their own."}],"tags":[],"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1681530162,"creation_date":1681526541,"answer_id":76020105,"question_id":76018876,"body_markdown":"A Rudimentary attempt without a compiler to check.   Most reputable tutorials show what would be ... extends ArrayList-Team-\r\n\r\n\r\n\r\n     // Seems ok from some sources -  public class Teams&lt;Team&gt; extends ArrayList\r\n    \r\n     public class Teams extends ArrayList&lt;Team&gt;{\r\n        \r\n        Team temp;\r\n        Players&lt;Player&gt; pls; // extends ArrayList\r\n        \r\n        public Teams(){\r\n        \r\n        pls = new Players&lt;&gt;();\r\n        pls.add(new Player(&quot;Ruhollah Khomeini&quot;,0.0000,17,88));\r\n        pls.add(new Player(&quot;Margaret Thatcher&quot;,0.0000,101,16));\r\n        pls.add(new Player(&quot;Joe Biden&quot;,-0.0000,3,45));\r\n        pls.add(new Player(&quot;Idi Amin&quot;,0.0000,25,44));\r\n        \r\n        temp = new Team(pls);\r\n       \r\n        \r\n        add(temp);\r\n        \r\n        }//end constuctor\r\n        \r\n        }//end class\r\n\r\n\r\n\r\n","title":"How do i initialize fields in constructor in multiple java classes","body":"<p>A Rudimentary attempt without a compiler to check.   Most reputable tutorials show what would be ... extends ArrayList-Team-</p>\n<pre><code> // Seems ok from some sources -  public class Teams&lt;Team&gt; extends ArrayList\n\n public class Teams extends ArrayList&lt;Team&gt;{\n    \n    Team temp;\n    Players&lt;Player&gt; pls; // extends ArrayList\n    \n    public Teams(){\n    \n    pls = new Players&lt;&gt;();\n    pls.add(new Player(&quot;Ruhollah Khomeini&quot;,0.0000,17,88));\n    pls.add(new Player(&quot;Margaret Thatcher&quot;,0.0000,101,16));\n    pls.add(new Player(&quot;Joe Biden&quot;,-0.0000,3,45));\n    pls.add(new Player(&quot;Idi Amin&quot;,0.0000,25,44));\n    \n    temp = new Team(pls);\n   \n    \n    add(temp);\n    \n    }//end constuctor\n    \n    }//end class\n</code></pre>\n"},{"comments":[{"owner":{"account_id":26751596,"reputation":61,"user_id":20350866,"display_name":"vishalpd"},"score":0,"creation_date":1681758424,"post_id":76020327,"comment_id":134105643,"body_markdown":"thanks a lot mate, there are some restrictions for me when modifying these codes. But this helped me, I used some from here and have posted on my new post.","body":"thanks a lot mate, there are some restrictions for me when modifying these codes. But this helped me, I used some from here and have posted on my new post."},{"owner":{"account_id":1490931,"reputation":410,"user_id":1398030,"display_name":"Madhawa Gunasekara"},"score":0,"creation_date":1681908683,"post_id":76020327,"comment_id":134132492,"body_markdown":"You are welcome :) ya i saw your other post which i already replied","body":"You are welcome :) ya i saw your other post which i already replied"}],"tags":[],"owner":{"account_id":1490931,"reputation":410,"user_id":1398030,"display_name":"Madhawa Gunasekara"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681532708,"creation_date":1681532188,"answer_id":76020327,"question_id":76018876,"body_markdown":"I think this is more of a design question where we have players with their attributes who is belonging to players.\r\nThen the players are assigned to one team, where we could have multiple teams. \r\n\r\n@vishalpd, Please check the below class implementation done by me with the basic information you have given. \r\nAlso please note additional validations should be added, this is just a skeleton.\r\n\r\nI have used different constructors in the classes to instantiate objects differently.\r\n\r\nMost importantly java var args constructor is also created for a more elegant way of adding players and teams one by one.\r\n\r\nAlso `List&lt;Team&gt; teams` and `List&lt;Player&gt; players` lists have been used internally in the Teams and Players classes to keep each player and team.\r\n    \r\n**Player class**\r\n    \r\n    public class Player {\r\n            public Player(String name, Double credit, String level, Integer age, String team, Integer no) {\r\n                this.name = name;\r\n                this.credit = credit;\r\n                this.level = level;\r\n                this.age = age;\r\n                this.team = team;\r\n                this.no = no;\r\n            }\r\n        \r\n            public Player() {\r\n            }\r\n        \r\n            private String name;\r\n            private Double credit;\r\n            private String level;\r\n            private Integer age;\r\n            private String team;\r\n            private Integer no;\r\n        \r\n            public String getName() {\r\n                return name;\r\n            }\r\n        \r\n            public void setName(String name) {\r\n                this.name = name;\r\n            }\r\n        \r\n            public Double getCredit() {\r\n                return credit;\r\n            }\r\n        \r\n            public void setCredit(Double credit) {\r\n                this.credit = credit;\r\n            }\r\n        \r\n            public String getLevel() {\r\n                return level;\r\n            }\r\n        \r\n            public void setLevel(String level) {\r\n                this.level = level;\r\n            }\r\n        \r\n            public Integer getAge() {\r\n                return age;\r\n            }\r\n        \r\n            public void setAge(Integer age) {\r\n                this.age = age;\r\n            }\r\n        \r\n            public String getTeam() {\r\n                return team;\r\n            }\r\n        \r\n            public void setTeam(String team) {\r\n                this.team = team;\r\n            }\r\n        \r\n            public Integer getNo() {\r\n                return no;\r\n            }\r\n        \r\n            public void setNo(Integer no) {\r\n                this.no = no;\r\n            }\r\n        \r\n            @Override\r\n            public String toString() {\r\n                return &quot;Player{&quot; +\r\n                        &quot;name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                        &quot;, credit=&quot; + credit +\r\n                        &quot;, level=&#39;&quot; + level + &#39;\\&#39;&#39; +\r\n                        &quot;, age=&quot; + age +\r\n                        &quot;, team=&#39;&quot; + team + &#39;\\&#39;&#39; +\r\n                        &quot;, no=&quot; + no +\r\n                        &#39;}&#39;;\r\n            }\r\n        \r\n        }\r\n\r\n**Players class**\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n        \r\n    public class Players {\r\n        private List&lt;Player&gt; players;\r\n    \r\n        public Players(Player... players) {\r\n            this.players = new ArrayList&lt;&gt;();\r\n            Arrays.stream(players).forEach(player -&gt; this.players.add(player));\r\n        }\r\n    \r\n        public Players(List&lt;Player&gt; players) {\r\n            this.players = players;\r\n        }\r\n    \r\n        public Players() {\r\n            this.players = new ArrayList&lt;&gt;();\r\n        }\r\n    \r\n        public List&lt;Player&gt; getPlayers() {\r\n            return players;\r\n        }\r\n    \r\n        public void setPlayers(List&lt;Player&gt; players) {\r\n            this.players = players;\r\n        }\r\n    \r\n        public void addSinglePlayer(Player player) {\r\n            if (player != null) {\r\n                this.players.add(player);\r\n            }\r\n        }\r\n    \r\n        public void addGroupOfPlayers(List&lt;Player&gt; players) {\r\n            if (!players.isEmpty()) {\r\n                players.forEach(player -&gt; this.players.add(player)); //Java 8 style\r\n            }\r\n        }\r\n    }\r\n\r\n**Team Class**\r\n\r\npublic class Team {\r\n\r\n    private int id;\r\n    private String name;\r\n    private Players players;\r\n\r\n    public Team( int id, String name, Players players) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.players = players;\r\n    }\r\n\r\n    public Players getPlayers() {\r\n        return players;\r\n    }\r\n\r\n    public void setPlayers(Players players) {\r\n        this.players = players;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n}\r\n\r\n\r\n**Teams Class**\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    public class Teams {\r\n        private List&lt;Team&gt; teams;\r\n    \r\n        public Teams(Team... teams) {\r\n            this.teams = new ArrayList&lt;&gt;();\r\n            Arrays.stream(teams).forEach(team -&gt; this.teams.add(team));\r\n        }\r\n    \r\n    \r\n        public Teams(List&lt;Team&gt; teams) {\r\n            this.teams = teams;\r\n        }\r\n    \r\n        public Teams() {\r\n            this.teams =  new ArrayList&lt;&gt;();\r\n        }\r\n    \r\n        public List&lt;Team&gt; getTeams() {\r\n            return teams;\r\n        }\r\n    \r\n        public void setTeams(List&lt;Team&gt; teams) {\r\n            this.teams = teams;\r\n        }\r\n    \r\n    \r\n        public void addSingleTeam(Team team) {\r\n            if (team != null) {\r\n                this.teams.add(team);\r\n            }\r\n        }\r\n    \r\n        public void addGroupOfTeams(List&lt;Team&gt; teams) {\r\n            if (!teams.isEmpty()) {\r\n                teams.forEach(team -&gt; this.teams.add(team)); //Java 8 style\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nDriver Code to Test the functionality **Main Class**\r\n\r\n    import java.util.List;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            Player player1 = new Player(&quot;jhon&quot;, 23.0d, &quot;expert&quot;, 34, &quot;super hero&quot;, 123);\r\n            Player player2 = new Player(&quot;Rohan&quot;, 22.0d, &quot;beginner&quot;, 28, &quot;super hero&quot;, 124);\r\n            Player player3 = new Player(&quot;Arnold&quot;, 16.0d, &quot;beginner&quot;, 36, &quot;super hero&quot;, 125);\r\n    \r\n            Player player4 = new Player(&quot;Mary&quot;, 18.0d, &quot;beginner&quot;, 23, &quot;gladiator&quot;, 807);\r\n            Player player5 = new Player(&quot;Kevin&quot;, 21.0d, &quot;beginner&quot;, 27, &quot;gladiator&quot;, 808);\r\n            Player player6 = new Player(&quot;Jemmy&quot;, 19.0d, &quot;beginner&quot;, 33, &quot;gladiator&quot;, 809);\r\n    \r\n            Players playersTeam1 =  new Players(player1, player2, player3);\r\n            Players playersTeam2 =  new Players(player4, player5, player6);\r\n            Team team1 =  new Team(1, &quot;super hero&quot;, playersTeam1);\r\n            Team team2 =  new Team(2, &quot;gladiator&quot;, playersTeam2);\r\n    \r\n            Teams teams =  new Teams(team1, team2);\r\n            //Print Team 1\r\n            System.out.println(&quot;TEAM 1&quot;);\r\n            teams.getTeams().stream().filter(team -&gt; team.getId() == 1).forEach(team -&gt; {\r\n                team.getPlayers().getPlayers()\r\n                        .stream()\r\n                        .forEach(player -&gt; System.out.println(player.toString()));\r\n            });\r\n    \r\n            System.out.println();\r\n    \r\n            //Print Team 1\r\n            System.out.println(&quot;TEAM 2&quot;);\r\n            teams.getTeams().stream().filter(team -&gt; team.getId() == 2).forEach(team -&gt; {\r\n                team.getPlayers().getPlayers()\r\n                        .stream()\r\n                        .forEach(player -&gt; System.out.println(player.toString()));\r\n            });\r\n        }\r\n    }\r\n\r\n**Result Output**\r\n\r\n    TEAM 1\r\n    Player{name=&#39;jhon&#39;, credit=23.0, level=&#39;expert&#39;, age=34, team=&#39;super hero&#39;, no=123}\r\n    Player{name=&#39;Rohan&#39;, credit=22.0, level=&#39;beginner&#39;, age=28, team=&#39;super hero&#39;, no=124}\r\n    Player{name=&#39;Arnold&#39;, credit=16.0, level=&#39;beginner&#39;, age=36, team=&#39;super hero&#39;, no=125}\r\n    \r\n    TEAM 2\r\n    Player{name=&#39;Mary&#39;, credit=18.0, level=&#39;beginner&#39;, age=23, team=&#39;gladiator&#39;, no=807}\r\n    Player{name=&#39;Kevin&#39;, credit=21.0, level=&#39;beginner&#39;, age=27, team=&#39;gladiator&#39;, no=808}\r\n    Player{name=&#39;Jemmy&#39;, credit=19.0, level=&#39;beginner&#39;, age=33, team=&#39;gladiator&#39;, no=809}\r\n\r\n\r\n\r\n","title":"How do i initialize fields in constructor in multiple java classes","body":"<p>I think this is more of a design question where we have players with their attributes who is belonging to players.\nThen the players are assigned to one team, where we could have multiple teams.</p>\n<p>@vishalpd, Please check the below class implementation done by me with the basic information you have given.\nAlso please note additional validations should be added, this is just a skeleton.</p>\n<p>I have used different constructors in the classes to instantiate objects differently.</p>\n<p>Most importantly java var args constructor is also created for a more elegant way of adding players and teams one by one.</p>\n<p>Also <code>List&lt;Team&gt; teams</code> and <code>List&lt;Player&gt; players</code> lists have been used internally in the Teams and Players classes to keep each player and team.</p>\n<p><strong>Player class</strong></p>\n<pre><code>public class Player {\n        public Player(String name, Double credit, String level, Integer age, String team, Integer no) {\n            this.name = name;\n            this.credit = credit;\n            this.level = level;\n            this.age = age;\n            this.team = team;\n            this.no = no;\n        }\n    \n        public Player() {\n        }\n    \n        private String name;\n        private Double credit;\n        private String level;\n        private Integer age;\n        private String team;\n        private Integer no;\n    \n        public String getName() {\n            return name;\n        }\n    \n        public void setName(String name) {\n            this.name = name;\n        }\n    \n        public Double getCredit() {\n            return credit;\n        }\n    \n        public void setCredit(Double credit) {\n            this.credit = credit;\n        }\n    \n        public String getLevel() {\n            return level;\n        }\n    \n        public void setLevel(String level) {\n            this.level = level;\n        }\n    \n        public Integer getAge() {\n            return age;\n        }\n    \n        public void setAge(Integer age) {\n            this.age = age;\n        }\n    \n        public String getTeam() {\n            return team;\n        }\n    \n        public void setTeam(String team) {\n            this.team = team;\n        }\n    \n        public Integer getNo() {\n            return no;\n        }\n    \n        public void setNo(Integer no) {\n            this.no = no;\n        }\n    \n        @Override\n        public String toString() {\n            return &quot;Player{&quot; +\n                    &quot;name='&quot; + name + '\\'' +\n                    &quot;, credit=&quot; + credit +\n                    &quot;, level='&quot; + level + '\\'' +\n                    &quot;, age=&quot; + age +\n                    &quot;, team='&quot; + team + '\\'' +\n                    &quot;, no=&quot; + no +\n                    '}';\n        }\n    \n    }\n</code></pre>\n<p><strong>Players class</strong></p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n    \npublic class Players {\n    private List&lt;Player&gt; players;\n\n    public Players(Player... players) {\n        this.players = new ArrayList&lt;&gt;();\n        Arrays.stream(players).forEach(player -&gt; this.players.add(player));\n    }\n\n    public Players(List&lt;Player&gt; players) {\n        this.players = players;\n    }\n\n    public Players() {\n        this.players = new ArrayList&lt;&gt;();\n    }\n\n    public List&lt;Player&gt; getPlayers() {\n        return players;\n    }\n\n    public void setPlayers(List&lt;Player&gt; players) {\n        this.players = players;\n    }\n\n    public void addSinglePlayer(Player player) {\n        if (player != null) {\n            this.players.add(player);\n        }\n    }\n\n    public void addGroupOfPlayers(List&lt;Player&gt; players) {\n        if (!players.isEmpty()) {\n            players.forEach(player -&gt; this.players.add(player)); //Java 8 style\n        }\n    }\n}\n</code></pre>\n<p><strong>Team Class</strong></p>\n<p>public class Team {</p>\n<pre><code>private int id;\nprivate String name;\nprivate Players players;\n\npublic Team( int id, String name, Players players) {\n    this.id = id;\n    this.name = name;\n    this.players = players;\n}\n\npublic Players getPlayers() {\n    return players;\n}\n\npublic void setPlayers(Players players) {\n    this.players = players;\n}\n\npublic int getId() {\n    return id;\n}\n\npublic void setId(int id) {\n    this.id = id;\n}\n\npublic String getName() {\n    return name;\n}\n\npublic void setName(String name) {\n    this.name = name;\n}\n</code></pre>\n<p>}</p>\n<p><strong>Teams Class</strong></p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\npublic class Teams {\n    private List&lt;Team&gt; teams;\n\n    public Teams(Team... teams) {\n        this.teams = new ArrayList&lt;&gt;();\n        Arrays.stream(teams).forEach(team -&gt; this.teams.add(team));\n    }\n\n\n    public Teams(List&lt;Team&gt; teams) {\n        this.teams = teams;\n    }\n\n    public Teams() {\n        this.teams =  new ArrayList&lt;&gt;();\n    }\n\n    public List&lt;Team&gt; getTeams() {\n        return teams;\n    }\n\n    public void setTeams(List&lt;Team&gt; teams) {\n        this.teams = teams;\n    }\n\n\n    public void addSingleTeam(Team team) {\n        if (team != null) {\n            this.teams.add(team);\n        }\n    }\n\n    public void addGroupOfTeams(List&lt;Team&gt; teams) {\n        if (!teams.isEmpty()) {\n            teams.forEach(team -&gt; this.teams.add(team)); //Java 8 style\n        }\n    }\n}\n</code></pre>\n<p>Driver Code to Test the functionality <strong>Main Class</strong></p>\n<pre><code>import java.util.List;\n\npublic class Main {\n    public static void main(String[] args) {\n        Player player1 = new Player(&quot;jhon&quot;, 23.0d, &quot;expert&quot;, 34, &quot;super hero&quot;, 123);\n        Player player2 = new Player(&quot;Rohan&quot;, 22.0d, &quot;beginner&quot;, 28, &quot;super hero&quot;, 124);\n        Player player3 = new Player(&quot;Arnold&quot;, 16.0d, &quot;beginner&quot;, 36, &quot;super hero&quot;, 125);\n\n        Player player4 = new Player(&quot;Mary&quot;, 18.0d, &quot;beginner&quot;, 23, &quot;gladiator&quot;, 807);\n        Player player5 = new Player(&quot;Kevin&quot;, 21.0d, &quot;beginner&quot;, 27, &quot;gladiator&quot;, 808);\n        Player player6 = new Player(&quot;Jemmy&quot;, 19.0d, &quot;beginner&quot;, 33, &quot;gladiator&quot;, 809);\n\n        Players playersTeam1 =  new Players(player1, player2, player3);\n        Players playersTeam2 =  new Players(player4, player5, player6);\n        Team team1 =  new Team(1, &quot;super hero&quot;, playersTeam1);\n        Team team2 =  new Team(2, &quot;gladiator&quot;, playersTeam2);\n\n        Teams teams =  new Teams(team1, team2);\n        //Print Team 1\n        System.out.println(&quot;TEAM 1&quot;);\n        teams.getTeams().stream().filter(team -&gt; team.getId() == 1).forEach(team -&gt; {\n            team.getPlayers().getPlayers()\n                    .stream()\n                    .forEach(player -&gt; System.out.println(player.toString()));\n        });\n\n        System.out.println();\n\n        //Print Team 1\n        System.out.println(&quot;TEAM 2&quot;);\n        teams.getTeams().stream().filter(team -&gt; team.getId() == 2).forEach(team -&gt; {\n            team.getPlayers().getPlayers()\n                    .stream()\n                    .forEach(player -&gt; System.out.println(player.toString()));\n        });\n    }\n}\n</code></pre>\n<p><strong>Result Output</strong></p>\n<pre><code>TEAM 1\nPlayer{name='jhon', credit=23.0, level='expert', age=34, team='super hero', no=123}\nPlayer{name='Rohan', credit=22.0, level='beginner', age=28, team='super hero', no=124}\nPlayer{name='Arnold', credit=16.0, level='beginner', age=36, team='super hero', no=125}\n\nTEAM 2\nPlayer{name='Mary', credit=18.0, level='beginner', age=23, team='gladiator', no=807}\nPlayer{name='Kevin', credit=21.0, level='beginner', age=27, team='gladiator', no=808}\nPlayer{name='Jemmy', credit=19.0, level='beginner', age=33, team='gladiator', no=809}\n</code></pre>\n"}],"owner":{"account_id":26751596,"reputation":61,"user_id":20350866,"display_name":"vishalpd"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76020327,"answer_count":2,"score":0,"last_activity_date":1681532708,"creation_date":1681505673,"question_id":76018876,"body_markdown":"I have been given 4 java classes \r\n``` java\r\nTeams.java\r\nTeam.java\r\nPlayers.java\r\nPlayer.java\r\n```\r\n\r\nI need to be able to create some players and teams. And add players to the team. I am just confused as to how am I gonna add the players to the teams? Which class i should use and how to add them?\r\n\r\n``` java\r\npublic class Teams {\r\n    public ArrayList&lt;Team&gt; teams;\r\n    public Teams(){         //take no parameters\r\n\r\n    }\r\n\r\npublic class Team {\r\n    private String name;\r\n    private Players players;\r\n    public Team(String name){\r\n//takes one parameter, the name, corresponding to the fields identically named. Other fields require no parameters but the constructor methods\r\n\r\n    }\r\n\r\npublic class Players {\r\n    private ArrayList&lt;Player&gt; Players;\r\n    public Players(){   //takes no parameters\r\n\r\n    }\r\n\r\npublic class Player {\r\n    private String name;\r\n    private Double credit;\r\n    private String level;\r\n    private Integer age;\r\n    private String team;\r\n    private Integer No;\r\n    \r\n    public Player(String name, Double credit, Integer age, Integer No){\r\n        this.name = name;\r\n        this.credit = credit;\r\n        this.age = age;\r\n        this.No = No;\r\n        this.level = CalculateLvl(credit);\r\n    }\r\n````\r\n\r\ni have tried adding some players to the Players list in the Players class like this\r\n\r\n``` java\r\npublic Players(){   //no parameters\r\n        Players.add(new Player(&quot;Kevin Hart&quot;, 1300.0, 20, 7));\r\n    }`\r\n```\r\n\r\nand some teams to the Teams list in the Teams class\r\n\r\n```` java\r\npublic Teams(){     //take no parameters\r\n        teams.add(new Team(&quot;Knicks&quot;));\r\n    }\r\n````\r\n\r\nBut i am not sure what I am doing or if this is the right way.\r\nI can&#39;t get my head around as to how I am going to link these players to their respective team.\r\n\r\n[here is the snippet of class diagram][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KHUcK.png","title":"How do i initialize fields in constructor in multiple java classes","body":"<p>I have been given 4 java classes</p>\n<pre class=\"lang-java prettyprint-override\"><code>Teams.java\nTeam.java\nPlayers.java\nPlayer.java\n</code></pre>\n<p>I need to be able to create some players and teams. And add players to the team. I am just confused as to how am I gonna add the players to the teams? Which class i should use and how to add them?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Teams {\n    public ArrayList&lt;Team&gt; teams;\n    public Teams(){         //take no parameters\n\n    }\n\npublic class Team {\n    private String name;\n    private Players players;\n    public Team(String name){\n//takes one parameter, the name, corresponding to the fields identically named. Other fields require no parameters but the constructor methods\n\n    }\n\npublic class Players {\n    private ArrayList&lt;Player&gt; Players;\n    public Players(){   //takes no parameters\n\n    }\n\npublic class Player {\n    private String name;\n    private Double credit;\n    private String level;\n    private Integer age;\n    private String team;\n    private Integer No;\n    \n    public Player(String name, Double credit, Integer age, Integer No){\n        this.name = name;\n        this.credit = credit;\n        this.age = age;\n        this.No = No;\n        this.level = CalculateLvl(credit);\n    }\n</code></pre>\n<p>i have tried adding some players to the Players list in the Players class like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Players(){   //no parameters\n        Players.add(new Player(&quot;Kevin Hart&quot;, 1300.0, 20, 7));\n    }`\n</code></pre>\n<p>and some teams to the Teams list in the Teams class</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Teams(){     //take no parameters\n        teams.add(new Team(&quot;Knicks&quot;));\n    }\n</code></pre>\n<p>But i am not sure what I am doing or if this is the right way.\nI can't get my head around as to how I am going to link these players to their respective team.</p>\n<p><a href=\"https://i.stack.imgur.com/KHUcK.png\" rel=\"nofollow noreferrer\">here is the snippet of class diagram</a></p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9725,"page":500,"page_size":100}
