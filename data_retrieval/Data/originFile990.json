{"items":[{"tags":["java","database","cassandra","selenium-chromedriver","dbconnection"],"comments":[{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":3,"creation_date":1664876382,"post_id":73945733,"comment_id":130565199,"body_markdown":"This most likely happens because you are *running* your code with a different version of Google Guava than what you *compiled* it with, or because you are using a version of Google Guava that is incompatible with some other library (such as the Datastax driver). Make sure you use the correct version of Google Guava.","body":"This most likely happens because you are <i>running</i> your code with a different version of Google Guava than what you <i>compiled</i> it with, or because you are using a version of Google Guava that is incompatible with some other library (such as the Datastax driver). Make sure you use the correct version of Google Guava."}],"owner":{"account_id":24924440,"reputation":11,"user_id":18792391,"display_name":"Madhuri_2022"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1664899526,"creation_date":1664875441,"question_id":73945733,"body_markdown":"I am getting the below error:\r\n    \r\n    java.lang.NoSuchMethodError:\r\n    com.google.common.base.Objects.firstNonNull(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;\r\n    \tat com.datastax.driver.core.policies.Policies$Builder.build(Policies.java:285)\r\n    \tat com.datastax.driver.core.Cluster$Builder.getConfiguration(Cluster.java:1246)\r\n    \r\nThis is happening while trying to connect to Cassandra from java code.  I am able to connect in a different repo with some set of drivers.  But in an automation code base of Selenium I am getting this exception.\r\n\r\nPlease can you suggest if something else is missng which is causing this issue.\r\n    \r\nIts failing at this step:\r\n    \r\n    cluster = Cluster.builder().addContactPoint(&quot;connection_Details&quot;).withPort(9042)\r\n              .withCredentials(&quot;username&quot;, &quot;password&quot;).withSSL().withSocketOptions(new SocketOptions().setConnectTimeoutMillis(2000)).build();\r\n\r\nBelow is my Ivy file:\r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt; &lt;ivy-module\r\n    version=&quot;2.0&quot; \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:noNamespaceSchemaLocation=&quot;http://ant.apache.org/ivy/schemas/ivy.xsd&quot;&gt;\r\n    \t&lt;info organisation=&quot;com.jcp.transformer&quot; module=&quot;Transformer&quot;\r\n    status=&quot;integration&quot;&gt; \t&lt;/info&gt;\r\n    \r\n    \t&lt;dependencies&gt; \t\t&lt;!--&lt;dependency org=&quot;io.appium&quot; name=&quot;java-client&quot;\r\n    rev=&quot;4.1.2&quot; /&gt;--&gt; \t\t&lt;dependency org=&quot;io.appium&quot; name=&quot;java-client&quot;\r\n    rev=&quot;6.1.0&quot;&gt; \t\t\t&lt;artifact name=&quot;java-client&quot; type=&quot;jar&quot;&gt;&lt;/artifact&gt;\r\n    \t\t\t&lt;exclude org=&quot;org.slf4j&quot; module=&quot;slf4j-jdk14&quot;/&gt;\r\n    \t\t \t&lt;exclude org=&quot;org.slf4j&quot; module=&quot;slf4j-log4j12&quot;/&gt;\r\n    \t\t \t&lt;exclude org=&quot;ch.qos.logback&quot; module=&quot;logback-classic&quot;/&gt; \t\t&lt;/dependency&gt; \t\t&lt;!--\r\n    https://mvnrepository.com/artifact/com.google.guava/guava --&gt;\r\n    &lt;dependency org=&quot;com.google.guava&quot; name=&quot;guava&quot; rev=&quot;19.0&quot;/&gt;\r\n    \r\n    \t\t&lt;dependency org=&quot;org.aspectj&quot; name=&quot;aspectjtools&quot; rev=&quot;1.9.1&quot;&gt;\r\n    \t\t\t&lt;artifact name=&quot;aspectjtools&quot; type=&quot;jar&quot;&gt;&lt;/artifact&gt;\r\n    \t\t&lt;/dependency&gt;  \t\t&lt;dependency org=&quot;org.aspectj&quot;\r\n    name=&quot;aspectjweaver&quot; rev=&quot;1.9.1&quot; /&gt; \t\t&lt;dependency\r\n    org=&quot;org.seleniumhq.selenium&quot; name=&quot;selenium-remote-driver&quot;\r\n    \t\t\trev=&quot;3.7.1&quot; /&gt; \t\t&lt;dependency org=&quot;org.seleniumhq.selenium&quot;\r\n    name=&quot;selenium-java&quot; \t\t\trev=&quot;3.7.1&quot; /&gt; \t\t&lt;dependency\r\n    org=&quot;org.seleniumhq.selenium&quot; name=&quot;selenium-support&quot; rev=&quot;3.0.0&quot;\r\n    force=&quot;true&quot;/&gt; \t\t&lt;dependency org=&quot;com.google.guava&quot; name=&quot;guava&quot;\r\n    rev=&quot;19.0&quot; /&gt; \t\t&lt;dependency org=&quot;org.imgscalr&quot; name=&quot;imgscalr-lib&quot;\r\n    rev=&quot;4.2&quot; /&gt; \t\t&lt;dependency org=&quot;com.madgag&quot; name=&quot;animated-gif-lib&quot;\r\n    rev=&quot;1.2&quot; /&gt; \t\t&lt;dependency org=&quot;com.github.fge&quot;\r\n    name=&quot;json-schema-validator&quot; \t\t\trev=&quot;2.2.6&quot; /&gt; \t\t&lt;dependency\r\n    org=&quot;com.jayway.restassured&quot; name=&quot;rest-assured&quot; \t\t\trev=&quot;2.4.1&quot; /&gt;\r\n    \t\t&lt;dependency org=&quot;com.jayway.restassured&quot;\r\n    name=&quot;json-schema-validator&quot; \t\t\trev=&quot;2.1.0&quot; /&gt; \t\t&lt;dependency\r\n    org=&quot;ant-contrib&quot; name=&quot;ant-contrib&quot; rev=&quot;1.0b3&quot;/&gt; \t\t&lt;dependency\r\n    org=&quot;javax.mail&quot; name=&quot;mail&quot; rev=&quot;1.4.7&quot;/&gt; \t\t&lt;dependency\r\n    org=&quot;net.sourceforge.htmlunit&quot; name=&quot;htmlunit&quot; rev=&quot;2.12&quot;/&gt;\r\n    \t\t&lt;dependency org=&quot;com.jayway.jsonpath&quot; name=&quot;json-path&quot; rev=&quot;1.1.0&quot;\r\n    /&gt; \t\t&lt;dependency org=&quot;com.jayway.jsonpath&quot; name=&quot;json-path-assert&quot;\r\n    \t\t\trev=&quot;1.1.0&quot; /&gt; \t\t&lt;dependency org=&quot;com.saucelabs&quot; name=&quot;saucerest&quot;\r\n    rev=&quot;1.0.35&quot;/&gt; \t\t&lt;dependency org=&quot;com.tibco&quot; name=&quot;tibjms&quot;\r\n    rev=&quot;6.0.1&quot; force=&quot;true&quot; changing=&quot;true&quot;&gt;\r\n    \t\t  &lt;artifact name=&quot;tibjms&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt; \t\t&lt;/dependency&gt; \t\t&lt;dependency org=&quot;com.jcpenney&quot; name=&quot;transformer&quot; rev=&quot;3.1.5&quot;&gt;\r\n    \t\t  &lt;artifact name=&quot;transformer&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt;\r\n    \t\t  &lt;/dependency&gt;  \t\t&lt;dependency org=&quot;com.sun.jersey&quot; name=&quot;jersey-client&quot; rev=&quot;1.11&quot;  /&gt; \t\t&lt;dependency\r\n    org=&quot;com.sun.jersey&quot; name=&quot;jersey-core&quot; rev=&quot;1.11&quot;&gt; \t\t\t&lt;exclude\r\n    name=&quot;mail&quot; type=&quot;jar&quot; /&gt; \t\t&lt;/dependency&gt; \t\t\t&lt;dependency\r\n    org=&quot;com.datastax.cassandra&quot; name=&quot;cassandra-driver-core&quot;\r\n    rev=&quot;3.0.0&quot;/&gt; \t\t&lt;dependency org=&quot;com.datastax.cassandra&quot;\r\n    name=&quot;cassandra-driver-mapping&quot; rev=&quot;3.0.0&quot;/&gt; \t\t&lt;dependency\r\n    org=&quot;com.sun.jersey.contribs&quot; name=&quot;jersey-apache-client&quot;\r\n    \t\t\trev=&quot;1.17.1&quot;/&gt;\r\n              &lt;dependency org=&quot;org.testng&quot; name=&quot;testng&quot; rev=&quot;6.9.10&quot;&gt; \t\t\t&lt;artifact name=&quot;testng&quot; type=&quot;jar&quot;&gt;&lt;/artifact&gt; \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency org=&quot;net.sourceforge.jexcelapi&quot; name=&quot;jxl&quot;\r\n    rev=&quot;2.6.12&quot; &gt; \t\t\t&lt;artifact name=&quot;jxl&quot; type=&quot;jar&quot;&gt;&lt;/artifact&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t \t\t&lt;dependency org=&quot;commons-codec&quot; name=&quot;commons-codec&quot; rev=&quot;1.8&quot; /&gt; \t\t&lt;dependency org=&quot;commons-configuration&quot;\r\n    name=&quot;commons-configuration&quot; \t\t\trev=&quot;1.7&quot; /&gt; \t\t\t&lt;dependency\r\n    org=&quot;commons-io&quot; name=&quot;commons-io&quot; rev=&quot;2.5&quot;/&gt; \t\t&lt;dependency\r\n    org=&quot;com.jayway.jsonpath&quot; name=&quot;json-path&quot; rev=&quot;0.8.1&quot; /&gt; \r\n    \t\t&lt;dependency org=&quot;com.jayway.jsonpath&quot; name=&quot;json-path-assert&quot;\r\n    \t\t\trev=&quot;0.8.1&quot; /&gt;\r\n    \t\t\t \t\t\t&lt;dependency org=&quot;org.json&quot; name=&quot;json&quot; rev=&quot;20160810&quot;/&gt; \t\t&lt;dependency org=&quot;sshtools&quot; name=&quot;j2ssh-core&quot; rev=&quot;0.2.9&quot; /&gt;\r\n    \t\t&lt;dependency org=&quot;org.apache.activemq&quot; name=&quot;activemq-all&quot;\r\n    rev=&quot;5.14.2&quot; force=&quot;true&quot; changing=&quot;true&quot;&gt;\r\n    \t\t  &lt;artifact name=&quot;activemq-all&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt;\t\t \t\t&lt;/dependency&gt;  \t\t&lt;dependency org=&quot;com.google.code.gson&quot;\r\n    name=&quot;gson&quot; rev=&quot;2.1&quot;&gt; \t\t\t&lt;artifact name=&quot;gson&quot;\r\n    type=&quot;jar&quot;&gt;&lt;/artifact&gt; \t\t&lt;/dependency&gt;\r\n    \t\t\t\t&lt;dependency org=&quot;org.skyscreamer&quot; name=&quot;jsonassert&quot; rev=&quot;1.4.0&quot;/&gt; \t\t&lt;dependency org=&quot;com.jayway.jsonpath&quot;\r\n    name=&quot;json-path&quot; rev=&quot;2.2.0&quot;/&gt; \t\t&lt;dependency org=&quot;net.lightbody.bmp&quot;\r\n    name=&quot;browsermob-proxy&quot; rev=&quot;2.0.0&quot;/&gt; \t\t&lt;dependency\r\n    org=&quot;io.rest-assured&quot; name=&quot;rest-assured&quot; rev=&quot;3.0.0&quot;/&gt;\r\n    \t\t&lt;dependency org=&quot;io.rest-assured&quot; name=&quot;json-path&quot; rev=&quot;3.0.0&quot;/&gt;\r\n    \t\t&lt;dependency org=&quot;io.rest-assured&quot; name=&quot;json-schema-validator&quot;\r\n    rev=&quot;3.0.0&quot;/&gt; \t\t&lt;dependency org=&quot;oracle&quot; name=&quot;ojdbc7&quot; force=&quot;true&quot;\r\n    rev=&quot;&quot; changing=&quot;true&quot;&gt;\r\n    \t\t  &lt;artifact name=&quot;ojdbc7&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt; \t\t&lt;/dependency&gt; \t\t&lt;dependency org=&quot;com.mysql.jdbc&quot; name=&quot;jdbc&quot; force=&quot;true&quot; rev=&quot;&quot;\r\n    changing=&quot;true&quot;&gt;\r\n    \t\t  &lt;artifact name=&quot;jdbc&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt; \t\t&lt;/dependency&gt; \t\t&lt;dependency org=&quot;com.microsoft.sqlserver&quot; name=&quot;mssql-jdbc&quot;\r\n    rev=&#39;7.0.0.jre8&#39;/&gt; \t\t&lt;dependency org=&quot;oracle.xdb&quot; name=&quot;oracle.xdb&quot;\r\n    force=&quot;true&quot; rev=&quot;&quot; changing=&quot;true&quot;&gt;\r\n    \t\t  &lt;artifact name=&quot;oracle.xdb_12.1.0&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt; \t\t&lt;/dependency&gt; \t\t&lt;dependency org=&quot;org.projectlombok&quot; name=&quot;lombok&quot;\r\n    rev=&quot;1.18.2&quot;/&gt; \t\t&lt;dependency org=&quot;io.netty&quot; name=&quot;netty-tcnative&quot;\r\n    rev=&quot;2.0.0.Final&quot;/&gt; \t\t&lt;dependency org=&quot;org.postgresql&quot;\r\n    name=&quot;postgresql&quot; rev=&quot;42.2.2&quot;/&gt; \t\t &lt;dependency\r\n    org=&quot;com.teradata.jdbc&quot; name=&quot;terajdbc4&quot; rev=&quot;14.00.00.21&quot;/&gt; \t\t\r\n    &lt;dependency org=&quot;com.teradata.jdbc&quot; name=&quot;tdgssconfig&quot;\r\n    rev=&quot;14.00.00.21&quot;/&gt; \t&lt;/dependencies&gt; &lt;/ivy-module&gt;\r\n","title":"java.lang.NoSuchMethodError when connecting to Cassandra with Selenium","body":"<p>I am getting the below error:</p>\n<pre><code>java.lang.NoSuchMethodError:\ncom.google.common.base.Objects.firstNonNull(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;\n    at com.datastax.driver.core.policies.Policies$Builder.build(Policies.java:285)\n    at com.datastax.driver.core.Cluster$Builder.getConfiguration(Cluster.java:1246)\n</code></pre>\n<p>This is happening while trying to connect to Cassandra from java code.  I am able to connect in a different repo with some set of drivers.  But in an automation code base of Selenium I am getting this exception.</p>\n<p>Please can you suggest if something else is missng which is causing this issue.</p>\n<p>Its failing at this step:</p>\n<pre><code>cluster = Cluster.builder().addContactPoint(&quot;connection_Details&quot;).withPort(9042)\n          .withCredentials(&quot;username&quot;, &quot;password&quot;).withSSL().withSocketOptions(new SocketOptions().setConnectTimeoutMillis(2000)).build();\n</code></pre>\n<p>Below is my Ivy file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt; &lt;ivy-module\nversion=&quot;2.0&quot;   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:noNamespaceSchemaLocation=&quot;http://ant.apache.org/ivy/schemas/ivy.xsd&quot;&gt;\n    &lt;info organisation=&quot;com.jcp.transformer&quot; module=&quot;Transformer&quot;\nstatus=&quot;integration&quot;&gt;   &lt;/info&gt;\n\n    &lt;dependencies&gt;      &lt;!--&lt;dependency org=&quot;io.appium&quot; name=&quot;java-client&quot;\nrev=&quot;4.1.2&quot; /&gt;--&gt;       &lt;dependency org=&quot;io.appium&quot; name=&quot;java-client&quot;\nrev=&quot;6.1.0&quot;&gt;            &lt;artifact name=&quot;java-client&quot; type=&quot;jar&quot;&gt;&lt;/artifact&gt;\n            &lt;exclude org=&quot;org.slf4j&quot; module=&quot;slf4j-jdk14&quot;/&gt;\n            &lt;exclude org=&quot;org.slf4j&quot; module=&quot;slf4j-log4j12&quot;/&gt;\n            &lt;exclude org=&quot;ch.qos.logback&quot; module=&quot;logback-classic&quot;/&gt;        &lt;/dependency&gt;       &lt;!--\nhttps://mvnrepository.com/artifact/com.google.guava/guava --&gt;\n&lt;dependency org=&quot;com.google.guava&quot; name=&quot;guava&quot; rev=&quot;19.0&quot;/&gt;\n\n        &lt;dependency org=&quot;org.aspectj&quot; name=&quot;aspectjtools&quot; rev=&quot;1.9.1&quot;&gt;\n            &lt;artifact name=&quot;aspectjtools&quot; type=&quot;jar&quot;&gt;&lt;/artifact&gt;\n        &lt;/dependency&gt;       &lt;dependency org=&quot;org.aspectj&quot;\nname=&quot;aspectjweaver&quot; rev=&quot;1.9.1&quot; /&gt;         &lt;dependency\norg=&quot;org.seleniumhq.selenium&quot; name=&quot;selenium-remote-driver&quot;\n            rev=&quot;3.7.1&quot; /&gt;      &lt;dependency org=&quot;org.seleniumhq.selenium&quot;\nname=&quot;selenium-java&quot;            rev=&quot;3.7.1&quot; /&gt;      &lt;dependency\norg=&quot;org.seleniumhq.selenium&quot; name=&quot;selenium-support&quot; rev=&quot;3.0.0&quot;\nforce=&quot;true&quot;/&gt;      &lt;dependency org=&quot;com.google.guava&quot; name=&quot;guava&quot;\nrev=&quot;19.0&quot; /&gt;       &lt;dependency org=&quot;org.imgscalr&quot; name=&quot;imgscalr-lib&quot;\nrev=&quot;4.2&quot; /&gt;        &lt;dependency org=&quot;com.madgag&quot; name=&quot;animated-gif-lib&quot;\nrev=&quot;1.2&quot; /&gt;        &lt;dependency org=&quot;com.github.fge&quot;\nname=&quot;json-schema-validator&quot;            rev=&quot;2.2.6&quot; /&gt;      &lt;dependency\norg=&quot;com.jayway.restassured&quot; name=&quot;rest-assured&quot;            rev=&quot;2.4.1&quot; /&gt;\n        &lt;dependency org=&quot;com.jayway.restassured&quot;\nname=&quot;json-schema-validator&quot;            rev=&quot;2.1.0&quot; /&gt;      &lt;dependency\norg=&quot;ant-contrib&quot; name=&quot;ant-contrib&quot; rev=&quot;1.0b3&quot;/&gt;      &lt;dependency\norg=&quot;javax.mail&quot; name=&quot;mail&quot; rev=&quot;1.4.7&quot;/&gt;      &lt;dependency\norg=&quot;net.sourceforge.htmlunit&quot; name=&quot;htmlunit&quot; rev=&quot;2.12&quot;/&gt;\n        &lt;dependency org=&quot;com.jayway.jsonpath&quot; name=&quot;json-path&quot; rev=&quot;1.1.0&quot;\n/&gt;      &lt;dependency org=&quot;com.jayway.jsonpath&quot; name=&quot;json-path-assert&quot;\n            rev=&quot;1.1.0&quot; /&gt;      &lt;dependency org=&quot;com.saucelabs&quot; name=&quot;saucerest&quot;\nrev=&quot;1.0.35&quot;/&gt;      &lt;dependency org=&quot;com.tibco&quot; name=&quot;tibjms&quot;\nrev=&quot;6.0.1&quot; force=&quot;true&quot; changing=&quot;true&quot;&gt;\n          &lt;artifact name=&quot;tibjms&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt;       &lt;/dependency&gt;       &lt;dependency org=&quot;com.jcpenney&quot; name=&quot;transformer&quot; rev=&quot;3.1.5&quot;&gt;\n          &lt;artifact name=&quot;transformer&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt;\n          &lt;/dependency&gt;         &lt;dependency org=&quot;com.sun.jersey&quot; name=&quot;jersey-client&quot; rev=&quot;1.11&quot;  /&gt;        &lt;dependency\norg=&quot;com.sun.jersey&quot; name=&quot;jersey-core&quot; rev=&quot;1.11&quot;&gt;             &lt;exclude\nname=&quot;mail&quot; type=&quot;jar&quot; /&gt;       &lt;/dependency&gt;           &lt;dependency\norg=&quot;com.datastax.cassandra&quot; name=&quot;cassandra-driver-core&quot;\nrev=&quot;3.0.0&quot;/&gt;       &lt;dependency org=&quot;com.datastax.cassandra&quot;\nname=&quot;cassandra-driver-mapping&quot; rev=&quot;3.0.0&quot;/&gt;       &lt;dependency\norg=&quot;com.sun.jersey.contribs&quot; name=&quot;jersey-apache-client&quot;\n            rev=&quot;1.17.1&quot;/&gt;\n          &lt;dependency org=&quot;org.testng&quot; name=&quot;testng&quot; rev=&quot;6.9.10&quot;&gt;          &lt;artifact name=&quot;testng&quot; type=&quot;jar&quot;&gt;&lt;/artifact&gt;      &lt;/dependency&gt;\n        &lt;dependency org=&quot;net.sourceforge.jexcelapi&quot; name=&quot;jxl&quot;\nrev=&quot;2.6.12&quot; &gt;          &lt;artifact name=&quot;jxl&quot; type=&quot;jar&quot;&gt;&lt;/artifact&gt;\n        &lt;/dependency&gt;\n                &lt;dependency org=&quot;commons-codec&quot; name=&quot;commons-codec&quot; rev=&quot;1.8&quot; /&gt;       &lt;dependency org=&quot;commons-configuration&quot;\nname=&quot;commons-configuration&quot;            rev=&quot;1.7&quot; /&gt;            &lt;dependency\norg=&quot;commons-io&quot; name=&quot;commons-io&quot; rev=&quot;2.5&quot;/&gt;      &lt;dependency\norg=&quot;com.jayway.jsonpath&quot; name=&quot;json-path&quot; rev=&quot;0.8.1&quot; /&gt; \n        &lt;dependency org=&quot;com.jayway.jsonpath&quot; name=&quot;json-path-assert&quot;\n            rev=&quot;0.8.1&quot; /&gt;\n                        &lt;dependency org=&quot;org.json&quot; name=&quot;json&quot; rev=&quot;20160810&quot;/&gt;         &lt;dependency org=&quot;sshtools&quot; name=&quot;j2ssh-core&quot; rev=&quot;0.2.9&quot; /&gt;\n        &lt;dependency org=&quot;org.apache.activemq&quot; name=&quot;activemq-all&quot;\nrev=&quot;5.14.2&quot; force=&quot;true&quot; changing=&quot;true&quot;&gt;\n          &lt;artifact name=&quot;activemq-all&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt;             &lt;/dependency&gt;       &lt;dependency org=&quot;com.google.code.gson&quot;\nname=&quot;gson&quot; rev=&quot;2.1&quot;&gt;          &lt;artifact name=&quot;gson&quot;\ntype=&quot;jar&quot;&gt;&lt;/artifact&gt;      &lt;/dependency&gt;\n                &lt;dependency org=&quot;org.skyscreamer&quot; name=&quot;jsonassert&quot; rev=&quot;1.4.0&quot;/&gt;       &lt;dependency org=&quot;com.jayway.jsonpath&quot;\nname=&quot;json-path&quot; rev=&quot;2.2.0&quot;/&gt;      &lt;dependency org=&quot;net.lightbody.bmp&quot;\nname=&quot;browsermob-proxy&quot; rev=&quot;2.0.0&quot;/&gt;       &lt;dependency\norg=&quot;io.rest-assured&quot; name=&quot;rest-assured&quot; rev=&quot;3.0.0&quot;/&gt;\n        &lt;dependency org=&quot;io.rest-assured&quot; name=&quot;json-path&quot; rev=&quot;3.0.0&quot;/&gt;\n        &lt;dependency org=&quot;io.rest-assured&quot; name=&quot;json-schema-validator&quot;\nrev=&quot;3.0.0&quot;/&gt;       &lt;dependency org=&quot;oracle&quot; name=&quot;ojdbc7&quot; force=&quot;true&quot;\nrev=&quot;&quot; changing=&quot;true&quot;&gt;\n          &lt;artifact name=&quot;ojdbc7&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt;       &lt;/dependency&gt;       &lt;dependency org=&quot;com.mysql.jdbc&quot; name=&quot;jdbc&quot; force=&quot;true&quot; rev=&quot;&quot;\nchanging=&quot;true&quot;&gt;\n          &lt;artifact name=&quot;jdbc&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt;         &lt;/dependency&gt;       &lt;dependency org=&quot;com.microsoft.sqlserver&quot; name=&quot;mssql-jdbc&quot;\nrev='7.0.0.jre8'/&gt;      &lt;dependency org=&quot;oracle.xdb&quot; name=&quot;oracle.xdb&quot;\nforce=&quot;true&quot; rev=&quot;&quot; changing=&quot;true&quot;&gt;\n          &lt;artifact name=&quot;oracle.xdb_12.1.0&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt;        &lt;/dependency&gt;       &lt;dependency org=&quot;org.projectlombok&quot; name=&quot;lombok&quot;\nrev=&quot;1.18.2&quot;/&gt;      &lt;dependency org=&quot;io.netty&quot; name=&quot;netty-tcnative&quot;\nrev=&quot;2.0.0.Final&quot;/&gt;         &lt;dependency org=&quot;org.postgresql&quot;\nname=&quot;postgresql&quot; rev=&quot;42.2.2&quot;/&gt;         &lt;dependency\norg=&quot;com.teradata.jdbc&quot; name=&quot;terajdbc4&quot; rev=&quot;14.00.00.21&quot;/&gt;        \n&lt;dependency org=&quot;com.teradata.jdbc&quot; name=&quot;tdgssconfig&quot;\nrev=&quot;14.00.00.21&quot;/&gt;     &lt;/dependencies&gt; &lt;/ivy-module&gt;\n</code></pre>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":295883,"reputation":744,"user_id":600517,"accept_rate":71,"display_name":"Chip McCormick"},"score":2,"creation_date":1323663723,"post_id":8469882,"comment_id":10475576,"body_markdown":"Yes, that is a valid approach. I&#39;m not aware of a better way to do that. It would be more usable I think if you used nextString() and read them all in as a single line and parsed them","body":"Yes, that is a valid approach. I&#39;m not aware of a better way to do that. It would be more usable I think if you used nextString() and read them all in as a single line and parsed them"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":6,"creation_date":1323664015,"post_id":8469882,"comment_id":10475623,"body_markdown":"The main &quot;gotcha&quot; that I have to warn you about when using Scanner is that you have to be careful handling the End Of Line (EOL) token. The `nextInt()` method does not deal with the EOL token, while `nextLine()` does. There may be some times when you&#39;ll need to call `nextLine()` without saving the input just to handle the EOL token. It&#39;s not an issue in your current code, and there&#39;s no need to change it just yet.","body":"The main &quot;gotcha&quot; that I have to warn you about when using Scanner is that you have to be careful handling the End Of Line (EOL) token. The <code>nextInt()</code> method does not deal with the EOL token, while <code>nextLine()</code> does. There may be some times when you&#39;ll need to call <code>nextLine()</code> without saving the input just to handle the EOL token. It&#39;s not an issue in your current code, and there&#39;s no need to change it just yet."}],"answers":[{"comments":[{"owner":{"account_id":991870,"reputation":381,"user_id":1008918,"accept_rate":96,"display_name":"John"},"score":0,"creation_date":1323663904,"post_id":8469902,"comment_id":10475604,"body_markdown":"well the questions are not right i just used them to show what im doing they are all different just wondering do i have to make a new scanner for each input or can i just make one scanner and give each input a different variable","body":"well the questions are not right i just used them to show what im doing they are all different just wondering do i have to make a new scanner for each input or can i just make one scanner and give each input a different variable"},{"owner":{"account_id":295168,"reputation":12465,"user_id":599436,"accept_rate":100,"display_name":"Jon Egeland"},"score":2,"creation_date":1323664036,"post_id":8469902,"comment_id":10475625,"body_markdown":"No, `Scanner` is a `Stream`. In other words, it takes all input from a source and sends the earliest information available when you call it. So `in.nextInt()` waits for system input (the keyboard), and then returns the next available data, as an `int`.","body":"No, <code>Scanner</code> is a <code>Stream</code>. In other words, it takes all input from a source and sends the earliest information available when you call it. So <code>in.nextInt()</code> waits for system input (the keyboard), and then returns the next available data, as an <code>int</code>."},{"owner":{"account_id":991870,"reputation":381,"user_id":1008918,"accept_rate":96,"display_name":"John"},"score":0,"creation_date":1323664086,"post_id":8469902,"comment_id":10475635,"body_markdown":"What I am doing is practicing building object classes and im making a back account object the starts an account with a starting balance and name and then a deposit and withdraw method so i kinda need the different variables for the different inputs","body":"What I am doing is practicing building object classes and im making a back account object the starts an account with a starting balance and name and then a deposit and withdraw method so i kinda need the different variables for the different inputs"},{"owner":{"account_id":991870,"reputation":381,"user_id":1008918,"accept_rate":96,"display_name":"John"},"score":0,"creation_date":1323664177,"post_id":8469902,"comment_id":10475641,"body_markdown":"well do you have a suggestion of how to go about this im in school for computer science but I am not in any programming classes yet so i have no teacher to ask but i still am trying to dable into java","body":"well do you have a suggestion of how to go about this im in school for computer science but I am not in any programming classes yet so i have no teacher to ask but i still am trying to dable into java"},{"owner":{"account_id":295168,"reputation":12465,"user_id":599436,"accept_rate":100,"display_name":"Jon Egeland"},"score":0,"creation_date":1323664241,"post_id":8469902,"comment_id":10475649,"body_markdown":"Then you had it right originally. That would be the best way to do this, but obviously with different messages to the user.","body":"Then you had it right originally. That would be the best way to do this, but obviously with different messages to the user."}],"tags":[],"owner":{"account_id":295168,"reputation":12465,"user_id":599436,"accept_rate":100,"display_name":"Jon Egeland"},"comment_count":5,"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1323663759,"creation_date":1323663759,"answer_id":8469902,"question_id":8469882,"body_markdown":"If every input asks the same question, you should use a `for` loop and an array of inputs:\r\n\r\n    Scanner dd = new Scanner(System.in);\r\n    int[] vars = new int[3];\r\n\r\n    for(int i = 0; i &lt; vars.length; i++) {\r\n      System.out.println(&quot;Enter next var: &quot;);\r\n      vars[i] = dd.nextInt();\r\n    }\r\n\r\nOr as Chip suggested, you can parse the input from one line:\r\n\r\n    Scanner in = new Scanner(System.in);\r\n    int[] vars = new int[3];\r\n\r\n    System.out.println(&quot;Enter &quot;+vars.length+&quot; vars: &quot;);\r\n    for(int i = 0; i &lt; vars.length; i++)\r\n      vars[i] = in.nextInt();\r\n\r\nYou were on the right track, and what you did works. This is just a nicer and more flexible way of doing things.","title":"Assigning multiple inputs to multiple variables using Scanner","body":"<p>If every input asks the same question, you should use a <code>for</code> loop and an array of inputs:</p>\n\n<pre><code>Scanner dd = new Scanner(System.in);\nint[] vars = new int[3];\n\nfor(int i = 0; i &lt; vars.length; i++) {\n  System.out.println(\"Enter next var: \");\n  vars[i] = dd.nextInt();\n}\n</code></pre>\n\n<p>Or as Chip suggested, you can parse the input from one line:</p>\n\n<pre><code>Scanner in = new Scanner(System.in);\nint[] vars = new int[3];\n\nSystem.out.println(\"Enter \"+vars.length+\" vars: \");\nfor(int i = 0; i &lt; vars.length; i++)\n  vars[i] = in.nextInt();\n</code></pre>\n\n<p>You were on the right track, and what you did works. This is just a nicer and more flexible way of doing things.</p>\n"}],"owner":{"account_id":991870,"reputation":381,"user_id":1008918,"accept_rate":96,"display_name":"John"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":185457,"favorite_count":0,"down_vote_count":1,"up_vote_count":11,"accepted_answer_id":8469902,"answer_count":1,"score":10,"last_activity_date":1664899485,"creation_date":1323663541,"question_id":8469882,"body_markdown":"What I am trying to do is have multiple inputs that all have different variables. Each variable will be part of different equations. I am looking for a way to do this, and I think I have an idea. I just want to know if this would be legal, and if there is a better way to do this.\r\n\r\n    import java.util.*;\r\n\r\n    public class Example{\r\n\t\r\n\tpublic static void main(String args[]){\r\n\t\t\r\n\t\tScanner dd = new Scanner(System.in);\r\n\t\t\r\n\t\tSystem.out.println(&quot;Enter number.&quot;);\r\n\t\tint a = dd.nextInt();\r\n\t\tSystem.out.println(&quot;Enter number.&quot;);\r\n\t\tint b = dd.nextInt();\r\n\t\tSystem.out.println(&quot;Enter number.&quot;);\r\n\t\tint c = dd.nextInt();\r\n\t  }\r\n    }\r\n","title":"Assigning multiple inputs to multiple variables using Scanner","body":"<p>What I am trying to do is have multiple inputs that all have different variables. Each variable will be part of different equations. I am looking for a way to do this, and I think I have an idea. I just want to know if this would be legal, and if there is a better way to do this.</p>\n<pre><code>import java.util.*;\n\npublic class Example{\n\npublic static void main(String args[]){\n    \n    Scanner dd = new Scanner(System.in);\n    \n    System.out.println(&quot;Enter number.&quot;);\n    int a = dd.nextInt();\n    System.out.println(&quot;Enter number.&quot;);\n    int b = dd.nextInt();\n    System.out.println(&quot;Enter number.&quot;);\n    int c = dd.nextInt();\n  }\n}\n</code></pre>\n"},{"tags":["java","oop","inheritance","polymorphism","instanceof"],"comments":[{"owner":{"account_id":1357786,"reputation":433,"user_id":1295826,"display_name":"Marco"},"score":0,"creation_date":1663865540,"post_id":6304056,"comment_id":130345559,"body_markdown":"By just compiling and executing your code you would have got the answer, at least to the first question.","body":"By just compiling and executing your code you would have got the answer, at least to the first question."},{"owner":{"account_id":221256,"reputation":1854,"user_id":479129,"accept_rate":97,"display_name":"ikbal"},"score":0,"creation_date":1664898981,"post_id":6304056,"comment_id":130573215,"body_markdown":"Of course. I think it was a rhetorical question as I was trying to make sense of type hierarchy in Java long time ago. I also wanted to invoke a good answer that could help the community.While it&#39;s obvious that Child is a subtype of Parent, it was questionable for me why it would also be an instance of it. To me it was only logical this to return true when it was the exact type. I would also expect a more explicit operator such as subtypeOf in that time","body":"Of course. I think it was a rhetorical question as I was trying to make sense of type hierarchy in Java long time ago. I also wanted to invoke a good answer that could help the community.While it&#39;s obvious that Child is a subtype of Parent, it was questionable for me why it would also be an instance of it. To me it was only logical this to return true when it was the exact type. I would also expect a more explicit operator such as subtypeOf in that time"}],"answers":[{"comments":[{"owner":{"account_id":221256,"reputation":1854,"user_id":479129,"accept_rate":97,"display_name":"ikbal"},"score":0,"creation_date":1307697174,"post_id":6304115,"comment_id":7365348,"body_markdown":"but I determine the object type in runtime and I need to define a parent reference to hold all types of childs. how can I do that in the other way?","body":"but I determine the object type in runtime and I need to define a parent reference to hold all types of childs. how can I do that in the other way?"},{"owner":{"account_id":151367,"reputation":13401,"user_id":365188,"accept_rate":94,"display_name":"Ozair Kafray"},"score":0,"creation_date":1307699304,"post_id":6304115,"comment_id":7365884,"body_markdown":"@user479129: You can hold a reference to any of a parent&#39;s child(s) in a reference of type parent. That is if there is a `class Parent {}` and `class ChildA extends Parent` and `class ChildB extends Parent` then you can use `Parent p` to refer an object of type `ChildA` or `ChildB`, but I don&#39;t get what you mean by other way round.","body":"@user479129: You can hold a reference to any of a parent&#39;s child(s) in a reference of type parent. That is if there is a <code>class Parent {}</code> and <code>class ChildA extends Parent</code> and <code>class ChildB extends Parent</code> then you can use <code>Parent p</code> to refer an object of type <code>ChildA</code> or <code>ChildB</code>, but I don&#39;t get what you mean by other way round."},{"owner":{"account_id":221256,"reputation":1854,"user_id":479129,"accept_rate":97,"display_name":"ikbal"},"score":0,"creation_date":1307705798,"post_id":6304115,"comment_id":7367464,"body_markdown":"I need to control that object p is a type of its child, not the parent. in some cases it can be the parent type so I need to check that it is exactly the type I want. that is what I want. I hope it s clear","body":"I need to control that object p is a type of its child, not the parent. in some cases it can be the parent type so I need to check that it is exactly the type I want. that is what I want. I hope it s clear"},{"owner":{"account_id":273159,"reputation":407,"user_id":564588,"display_name":"Jason K."},"score":1,"creation_date":1487751533,"post_id":6304115,"comment_id":71920328,"body_markdown":"I would like an improved answer as well, this would be useful for working with Frame.getComponents() instead of handling each one individually.","body":"I would like an improved answer as well, this would be useful for working with Frame.getComponents() instead of handling each one individually."},{"owner":{"account_id":151367,"reputation":13401,"user_id":365188,"accept_rate":94,"display_name":"Ozair Kafray"},"score":0,"creation_date":1487828568,"post_id":6304115,"comment_id":71962393,"body_markdown":"@JasonK. Do you mean a better example?","body":"@JasonK. Do you mean a better example?"},{"owner":{"account_id":2215099,"reputation":3255,"user_id":1955934,"accept_rate":17,"display_name":"user1955934"},"score":0,"creation_date":1584875269,"post_id":6304115,"comment_id":107567895,"body_markdown":"what about checking for exception class?","body":"what about checking for exception class?"}],"tags":[],"owner":{"account_id":151367,"reputation":13401,"user_id":365188,"accept_rate":94,"display_name":"Ozair Kafray"},"comment_count":6,"down_vote_count":0,"up_vote_count":74,"is_accepted":true,"score":74,"last_activity_date":1645787872,"creation_date":1307696131,"answer_id":6304115,"question_id":6304056,"body_markdown":"[Yes][1], it would. And why should it not?\r\n\r\nBecause child is in fact an instance of Parent. If, you want to perform an operation only for a child you should check \r\n\r\n    if (child instanceof Child){\r\n    }\r\n\r\nHowever you should remember the following statement from Effective C++, by Scott Meyers :\r\n\r\n&gt; &quot;Anytime you find yourself writing\r\n&gt; code of the form &quot;if the object is of\r\n&gt; type T1, then do something, but if\r\n&gt; it&#39;s of type T2, then do something\r\n&gt; else,&quot; slap yourself.\r\n\r\nwhich I think applies in this case too. If you want to *doSomething* based on what type of class the referenced object belongs to, the following code structure should help you with it. \r\n\r\n**NOTE:** I have not compiled it. \r\n\r\n    class Parent {\r\n        public void doSomething() {\r\n            System.out.println(&quot;I am the Parent, and I do as I like&quot;);\r\n        }\r\n    }\r\n     \r\n    class ChildA extends Parent {\r\n        public void doSomething() {\r\n            System.out.println(&quot;I am a child named A, but I have my own ways, different from Parent&quot;);\r\n        }\r\n    }\r\n     \r\n    class ChildB extends Parent {\r\n        public void doSomething() {\r\n            System.out.println(&quot;I am a child named B, but I have my own ways, different from my Parent and my siblings&quot;);\r\n        }\r\n    }\r\n     \r\n    public class Polymorphism101 {\r\n     \r\n        public static void main(String[] args) {\r\n     \r\n            Parent p = new Parent();\r\n            p.doSomething();\r\n     \r\n            p = new ChildA();\r\n            p.doSomething();\r\n     \r\n            p = new ChildB();\r\n            p.doSomething();\r\n     \r\n        }\r\n     \r\n    }\r\n\r\n**EDIT: A better example**\r\n\r\nYou could be developing a *drawing* application. An application that draws shapes of any kind. In that case, you should have an *abstract* type `Shape`. \r\n\r\nFor purpose(s) like; drawing all shapes; list all shapes; find a shape or delete a shape, you need to have a *list* of Shapes. Since the list is of a parent type, it can store any shapes.\r\n\r\nThe `Shape` *interface/abstract class/virtual class* should have an *abstract/pure virtual* function `Draw()`. So, in your DrawToDeviceLoop, you just call `Draw()` for each shape, you never need to check what shape it is.\r\n\r\nThe `Shape` interface can have an *abstract* implementation `AbstractShape`, which can have shape name or id as data members and GetName, Cleanup and other functions with functionality common to all shapes.\r\n\r\nRemember an abstract type **cannot** be instantiated, so `Shape` itself cannot be instantiated, as it cannot be drawn either.\r\n\r\n**EDIT 2: Polymorphism and Exception Handling** - [user1955934][2] asked &quot;What about checking for exception class&quot; For exception handling the best practices with respect to polymorphism are:\r\n 1. Prefer (to throw) specific exception - For example throw a NumberFormatException instead of IllegalArgumentException\r\n 2. Catch the most specific exception first - For example, if you catch an IllegalArgumentException first, you will never reach the catch block that should handle the more specific NumberFormatException because it’s a subclass of the IllegalArgumentException.\r\n\r\nSo, its principally the same, if an exception needs to be handled differently, a child/specific class should be defined, and the specific exception should be *caught* (not checked instanceof)\r\n\r\nTo know more best practices on exception handling. See [9 Best practices to handle exception in Java][3] and [Best practices for exceptions (C#)][4]\r\n\r\n**EDIT 3: I admit to an exception in this rule**\r\n\r\nSo, I am working with a legacy code (written in C++), which has mostly been written about 15 years ago, where they always check for the child class to perform certain actions. I was asked to add some code with the same logic, and I told my manager (he is a Dev too) I cannot do this, pointing to this answer, and then we discussed and accepted to this exception to the rule. In our case, this parent class has had just 2 children since the year 2000, and we do not see any child being added in the near future, with the core code limited for growth, we decided that with no addition to child classes and current number being just 2, it is more efficient to check for type, especially when that is how the code has been written, since ever. \r\n\r\nThere aren&#39;t many instances of this check too though, the parent implements the complicated functionalities mostly and it exists more for sharing code then specializing/differentiating them.\r\n\r\n  [1]: http://www.java2s.com/Tutorial/Java/0060__Operators/TheinstanceofKeyword.htm\r\n  [2]: https://stackoverflow.com/users/1955934\r\n  [3]: https://dzone.com/articles/9-best-practices-to-handle-exceptions-in-java\r\n  [4]: https://learn.microsoft.com/en-us/dotnet/standard/exceptions/best-practices-for-exceptions","title":"Does instanceof return true if instance of a parent?","body":"<p><a href=\"http://www.java2s.com/Tutorial/Java/0060__Operators/TheinstanceofKeyword.htm\" rel=\"noreferrer\">Yes</a>, it would. And why should it not?</p>\n<p>Because child is in fact an instance of Parent. If, you want to perform an operation only for a child you should check</p>\n<pre><code>if (child instanceof Child){\n}\n</code></pre>\n<p>However you should remember the following statement from Effective C++, by Scott Meyers :</p>\n<blockquote>\n<p>&quot;Anytime you find yourself writing\ncode of the form &quot;if the object is of\ntype T1, then do something, but if\nit's of type T2, then do something\nelse,&quot; slap yourself.</p>\n</blockquote>\n<p>which I think applies in this case too. If you want to <em>doSomething</em> based on what type of class the referenced object belongs to, the following code structure should help you with it.</p>\n<p><strong>NOTE:</strong> I have not compiled it.</p>\n<pre><code>class Parent {\n    public void doSomething() {\n        System.out.println(&quot;I am the Parent, and I do as I like&quot;);\n    }\n}\n \nclass ChildA extends Parent {\n    public void doSomething() {\n        System.out.println(&quot;I am a child named A, but I have my own ways, different from Parent&quot;);\n    }\n}\n \nclass ChildB extends Parent {\n    public void doSomething() {\n        System.out.println(&quot;I am a child named B, but I have my own ways, different from my Parent and my siblings&quot;);\n    }\n}\n \npublic class Polymorphism101 {\n \n    public static void main(String[] args) {\n \n        Parent p = new Parent();\n        p.doSomething();\n \n        p = new ChildA();\n        p.doSomething();\n \n        p = new ChildB();\n        p.doSomething();\n \n    }\n \n}\n</code></pre>\n<p><strong>EDIT: A better example</strong></p>\n<p>You could be developing a <em>drawing</em> application. An application that draws shapes of any kind. In that case, you should have an <em>abstract</em> type <code>Shape</code>.</p>\n<p>For purpose(s) like; drawing all shapes; list all shapes; find a shape or delete a shape, you need to have a <em>list</em> of Shapes. Since the list is of a parent type, it can store any shapes.</p>\n<p>The <code>Shape</code> <em>interface/abstract class/virtual class</em> should have an <em>abstract/pure virtual</em> function <code>Draw()</code>. So, in your DrawToDeviceLoop, you just call <code>Draw()</code> for each shape, you never need to check what shape it is.</p>\n<p>The <code>Shape</code> interface can have an <em>abstract</em> implementation <code>AbstractShape</code>, which can have shape name or id as data members and GetName, Cleanup and other functions with functionality common to all shapes.</p>\n<p>Remember an abstract type <strong>cannot</strong> be instantiated, so <code>Shape</code> itself cannot be instantiated, as it cannot be drawn either.</p>\n<p><strong>EDIT 2: Polymorphism and Exception Handling</strong> - <a href=\"https://stackoverflow.com/users/1955934\">user1955934</a> asked &quot;What about checking for exception class&quot; For exception handling the best practices with respect to polymorphism are:</p>\n<ol>\n<li>Prefer (to throw) specific exception - For example throw a NumberFormatException instead of IllegalArgumentException</li>\n<li>Catch the most specific exception first - For example, if you catch an IllegalArgumentException first, you will never reach the catch block that should handle the more specific NumberFormatException because it’s a subclass of the IllegalArgumentException.</li>\n</ol>\n<p>So, its principally the same, if an exception needs to be handled differently, a child/specific class should be defined, and the specific exception should be <em>caught</em> (not checked instanceof)</p>\n<p>To know more best practices on exception handling. See <a href=\"https://dzone.com/articles/9-best-practices-to-handle-exceptions-in-java\" rel=\"noreferrer\">9 Best practices to handle exception in Java</a> and <a href=\"https://learn.microsoft.com/en-us/dotnet/standard/exceptions/best-practices-for-exceptions\" rel=\"noreferrer\">Best practices for exceptions (C#)</a></p>\n<p><strong>EDIT 3: I admit to an exception in this rule</strong></p>\n<p>So, I am working with a legacy code (written in C++), which has mostly been written about 15 years ago, where they always check for the child class to perform certain actions. I was asked to add some code with the same logic, and I told my manager (he is a Dev too) I cannot do this, pointing to this answer, and then we discussed and accepted to this exception to the rule. In our case, this parent class has had just 2 children since the year 2000, and we do not see any child being added in the near future, with the core code limited for growth, we decided that with no addition to child classes and current number being just 2, it is more efficient to check for type, especially when that is how the code has been written, since ever.</p>\n<p>There aren't many instances of this check too though, the parent implements the complicated functionalities mostly and it exists more for sharing code then specializing/differentiating them.</p>\n"},{"comments":[{"owner":{"account_id":14192811,"reputation":348,"user_id":10252907,"display_name":"Nguy&#234;n Ng&#244; Duy"},"score":0,"creation_date":1598511973,"post_id":6304128,"comment_id":112483809,"body_markdown":"And now, this question is always true. Thank","body":"And now, this question is always true. Thank"}],"tags":[],"owner":{"account_id":255796,"reputation":48503,"user_id":536086,"accept_rate":90,"display_name":"Yochai Timmer"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1307696176,"creation_date":1307696176,"answer_id":6304128,"question_id":6304056,"body_markdown":"**instanceof** will return true if it&#39;s a subclass...\r\n\r\n[**instanceof Documentation**][1] \r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/jvms/second_edition/html/Instructions2.doc6.html#instanceof","title":"Does instanceof return true if instance of a parent?","body":"<p><strong>instanceof</strong> will return true if it's a subclass...</p>\n\n<p><a href=\"http://java.sun.com/docs/books/jvms/second_edition/html/Instructions2.doc6.html#instanceof\" rel=\"noreferrer\"><strong>instanceof Documentation</strong></a> </p>\n"},{"comments":[{"owner":{"account_id":14192811,"reputation":348,"user_id":10252907,"display_name":"Nguy&#234;n Ng&#244; Duy"},"score":0,"creation_date":1598511924,"post_id":6304196,"comment_id":112483784,"body_markdown":"Yes, java any return true if child is instance of the parent (or implement).","body":"Yes, java any return true if child is instance of the parent (or implement)."}],"tags":[],"owner":{"account_id":246709,"reputation":1175,"user_id":520989,"accept_rate":83,"display_name":"yahh"},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1307696514,"creation_date":1307696514,"answer_id":6304196,"question_id":6304056,"body_markdown":"ofcourse it returns true because child is an instance of the parent","title":"Does instanceof return true if instance of a parent?","body":"<p>ofcourse it returns true because child is an instance of the parent</p>\n"},{"tags":[],"owner":{"account_id":222360,"reputation":7615,"user_id":480894,"accept_rate":72,"display_name":"Roland"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1506405266,"creation_date":1502262062,"answer_id":45583689,"question_id":6304056,"body_markdown":"**Yes**. `instanceof` will be true whenever the reference(left side of the `instanceof` expression) can be cast to the *ReferenceType*(the type on the right side of the `instanceof` expression). This will be true for subclasses in relation to their parent:\n\n    Child child = new Child();\n    Parent parent = (Parent) child; //works!\n    assert child instanceof Parent; //true\n\nFrom [The Java Language Specification, Java SE 9 Edition](https://docs.oracle.com/javase/specs/jls/se9/html/index.html):\n\n&gt;[**15.20. Relational Operators**](https://docs.oracle.com/javase/specs/jls/se9/html/jls-15.html#jls-15.20)  \n&gt;...  \n&gt;*RelationalExpression* instanceof *ReferenceType*\n&gt;\n&gt;[**15.20.2. Type Comparison Operator instanceof**](https://docs.oracle.com/javase/specs/jls/se9/html/jls-15.html#jls-15.20.2)  \n&gt;...  \n&gt;At run time, the result of the `instanceof` operator is `true` if the value of the *RelationalExpression* is not `null` and the reference could be cast to the *ReferenceType* without raising a `ClassCastException`. Otherwise the result is `false`. \n","title":"Does instanceof return true if instance of a parent?","body":"<p><strong>Yes</strong>. <code>instanceof</code> will be true whenever the reference(left side of the <code>instanceof</code> expression) can be cast to the <em>ReferenceType</em>(the type on the right side of the <code>instanceof</code> expression). This will be true for subclasses in relation to their parent:</p>\n<pre><code>Child child = new Child();\nParent parent = (Parent) child; //works!\nassert child instanceof Parent; //true\n</code></pre>\n<p>From <a href=\"https://docs.oracle.com/javase/specs/jls/se9/html/index.html\" rel=\"nofollow noreferrer\">The Java Language Specification, Java SE 9 Edition</a>:</p>\n<blockquote>\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se9/html/jls-15.html#jls-15.20\" rel=\"nofollow noreferrer\"><strong>15.20. Relational Operators</strong></a><br />\n...<br />\n<em>RelationalExpression</em> instanceof <em>ReferenceType</em></p>\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se9/html/jls-15.html#jls-15.20.2\" rel=\"nofollow noreferrer\"><strong>15.20.2. Type Comparison Operator instanceof</strong></a><br />\n...<br />\nAt run time, the result of the <code>instanceof</code> operator is <code>true</code> if the value of the <em>RelationalExpression</em> is not <code>null</code> and the reference could be cast to the <em>ReferenceType</em> without raising a <code>ClassCastException</code>. Otherwise the result is <code>false</code>.</p>\n</blockquote>\n"}],"owner":{"account_id":221256,"reputation":1854,"user_id":479129,"accept_rate":97,"display_name":"ikbal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69799,"favorite_count":0,"down_vote_count":1,"up_vote_count":63,"accepted_answer_id":6304115,"answer_count":4,"score":62,"last_activity_date":1664899258,"creation_date":1307695792,"question_id":6304056,"body_markdown":"I have a class `Child` that extends `Parent`.\r\n\r\n    Parent child = new Child();\r\n    \r\n    if (child instanceof Parent){\r\n        // Do something\r\n    }\r\n\r\nDoes this return true or false, and why?\r\n","title":"Does instanceof return true if instance of a parent?","body":"<p>I have a class <code>Child</code> that extends <code>Parent</code>.</p>\n<pre><code>Parent child = new Child();\n\nif (child instanceof Parent){\n    // Do something\n}\n</code></pre>\n<p>Does this return true or false, and why?</p>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664898900,"creation_date":1664898900,"answer_id":73950516,"question_id":73926687,"body_markdown":"You could try something like this, but I really wouldn&#39;t recommend you to do this as it is not very efficient.\r\n\r\n```\r\n@DiscriminatorFormula(&quot;case (select bikeLot.BikeTypeId from BikeLots bikeLot where bikeLot.BikeLotId = BikeLotId) when 1 then &#39;Dock&#39; when 2 then &#39;Dockless&#39; else null end&quot;)\r\n```","title":"Discriminator value is from another table","body":"<p>You could try something like this, but I really wouldn't recommend you to do this as it is not very efficient.</p>\n<pre><code>@DiscriminatorFormula(&quot;case (select bikeLot.BikeTypeId from BikeLots bikeLot where bikeLot.BikeLotId = BikeLotId) when 1 then 'Dock' when 2 then 'Dockless' else null end&quot;)\n</code></pre>\n"}],"owner":{"account_id":26507781,"reputation":1,"user_id":20143652,"display_name":"Sander Verheyen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664898900,"creation_date":1664721464,"question_id":73926687,"body_markdown":"So I&#39;m very new to hibernate and wanted to know if it was possible to have a discriminator value be of another table so I have 3 tables named Vehicles, BikeLots and BikeTypes. I want to map Vehicle based on the BikeType with my tables looking like this:\r\n\r\nVehicles (VehicleId, SerialNumber, BikeLotId, Point)\r\n\r\nBikeLots( BikeLotId, DeliveryDate,  BikeTypeId)\r\n\r\nBikeTypes( BikeTypeId, BikeTypeDescription )\r\n \r\nis it possible to map a vehicle to being Dock or Dockless based on the BikeTypeId ? \r\ncurrently my classes look like this\r\n\r\n```\r\n@Entity(name = &quot;Vehicles&quot;)\r\n@Inheritance(strategy = InheritanceType.SINGLE_TABLE)\r\n@DiscriminatorFormula(&quot;CASE ?&quot;)\r\npublic abstract class Vehicle {\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  @Getter\r\n  @Setter\r\n  private short vehicleId;\r\n\r\n  @Column(columnDefinition = &quot;nvarchar(50)&quot;)\r\n  @Getter\r\n  @Setter\r\n  private String serialNumber;\r\n\r\n  private Point point;\r\n\r\n  @ManyToOne\r\n  @JoinColumn(name = &quot;BikeLotId&quot;)\r\n  private Bikelot bikeLot;\r\n}\r\n```\r\n```\r\n@Entity\r\n@DiscriminatorValue(&quot;Dockless&quot;)\r\npublic class DocklessVehicle extends Vehicle{\r\n// valid code\r\n}\r\n```\r\n```\r\n@Entity\r\n@DiscriminatorValue(&quot;Dock&quot;)\r\npublic class DockVehicle extends Vehicle {\r\n}\r\n```\r\nIf there is anything more I need to provide or clarify let me know since this is the first question I&#39;m asking here.","title":"Discriminator value is from another table","body":"<p>So I'm very new to hibernate and wanted to know if it was possible to have a discriminator value be of another table so I have 3 tables named Vehicles, BikeLots and BikeTypes. I want to map Vehicle based on the BikeType with my tables looking like this:</p>\n<p>Vehicles (VehicleId, SerialNumber, BikeLotId, Point)</p>\n<p>BikeLots( BikeLotId, DeliveryDate,  BikeTypeId)</p>\n<p>BikeTypes( BikeTypeId, BikeTypeDescription )</p>\n<p>is it possible to map a vehicle to being Dock or Dockless based on the BikeTypeId ?\ncurrently my classes look like this</p>\n<pre><code>@Entity(name = &quot;Vehicles&quot;)\n@Inheritance(strategy = InheritanceType.SINGLE_TABLE)\n@DiscriminatorFormula(&quot;CASE ?&quot;)\npublic abstract class Vehicle {\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  @Getter\n  @Setter\n  private short vehicleId;\n\n  @Column(columnDefinition = &quot;nvarchar(50)&quot;)\n  @Getter\n  @Setter\n  private String serialNumber;\n\n  private Point point;\n\n  @ManyToOne\n  @JoinColumn(name = &quot;BikeLotId&quot;)\n  private Bikelot bikeLot;\n}\n</code></pre>\n<pre><code>@Entity\n@DiscriminatorValue(&quot;Dockless&quot;)\npublic class DocklessVehicle extends Vehicle{\n// valid code\n}\n</code></pre>\n<pre><code>@Entity\n@DiscriminatorValue(&quot;Dock&quot;)\npublic class DockVehicle extends Vehicle {\n}\n</code></pre>\n<p>If there is anything more I need to provide or clarify let me know since this is the first question I'm asking here.</p>\n"},{"tags":["java","postgresql","jpa","querydsl"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1664899363,"post_id":73950482,"comment_id":130573328,"body_markdown":"**(1)** `exists (select * from bar where bar.id = foo.id ...` was advocated to be better optimizable as opposed to `foo.id in (select`. **(2)** Should `join` not be a `where bar.field = alpha.field`? This join query looks explosive.","body":"<b>(1)</b> <code>exists (select * from bar where bar.id = foo.id ...</code> was advocated to be better optimizable as opposed to <code>foo.id in (select</code>. <b>(2)</b> Should <code>join</code> not be a <code>where bar.field = alpha.field</code>? This join query looks explosive."},{"owner":{"account_id":10142453,"reputation":29,"user_id":7491739,"display_name":"Wiz"},"score":0,"creation_date":1664900329,"post_id":73950482,"comment_id":130573665,"body_markdown":"I&#39;m not a sql expert by any means. But isn&#39;t the join needed to reference an equality statement between entities?","body":"I&#39;m not a sql expert by any means. But isn&#39;t the join needed to reference an equality statement between entities?"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1664955972,"post_id":73950482,"comment_id":130584583,"body_markdown":"No, if you got a headers table and a 1:N lines table, you _join_ them on the header ID. In effect multiplying every header record by its lines. That is the effect you saw. A _join_ is like a `from table1, table2 where table2.id = table1.table2_id`. Do some SQL tutorials, will be helpful, also with JPA.","body":"No, if you got a headers table and a 1:N lines table, you <i>join</i> them on the header ID. In effect multiplying every header record by its lines. That is the effect you saw. A <i>join</i> is like a <code>from table1, table2 where table2.id = table1.table2_id</code>. Do some SQL tutorials, will be helpful, also with JPA."}],"owner":{"account_id":10142453,"reputation":29,"user_id":7491739,"display_name":"Wiz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":169,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664898719,"creation_date":1664898719,"question_id":73950482,"body_markdown":"We&#39;re using spring and querying via querydsl/jpaexpressions. I noticed when using a subquery with joins, it duplicates the joins resulting in perf issues. For example,\r\n\r\n    select\r\n    \t*\r\n    from\r\n    \tfoo\r\n    where\r\n    \tfoo.id in (\r\n    \tselect\r\n    \t\tbar.id\r\n    \tfrom\r\n    \t\tbar\r\n    \tjoin alpha on\r\n    \t\tbar.field = alpha.field)\r\n\r\nwas resulting in\r\n\r\n    select\r\n    \t*\r\n    from\r\n    \tfoo\r\n    where\r\n    \tfoo.id in (\r\n    \tselect\r\n    \t\tbar.id\r\n    \tfrom\r\n    \t\tbar b,\r\n    \t\talpha a,\r\n    \t\tbar b1,\r\n    \t\talpha a1)\r\n\r\n\r\nHas anyone experienced issues with this? I&#39;m using JPAexpressions to generate my subquery\r\n\r\n    JPAExpressions.select(....)","title":"QueryDSL/JPAExpressions causing duplicate join statements in subquery","body":"<p>We're using spring and querying via querydsl/jpaexpressions. I noticed when using a subquery with joins, it duplicates the joins resulting in perf issues. For example,</p>\n<pre><code>select\n    *\nfrom\n    foo\nwhere\n    foo.id in (\n    select\n        bar.id\n    from\n        bar\n    join alpha on\n        bar.field = alpha.field)\n</code></pre>\n<p>was resulting in</p>\n<pre><code>select\n    *\nfrom\n    foo\nwhere\n    foo.id in (\n    select\n        bar.id\n    from\n        bar b,\n        alpha a,\n        bar b1,\n        alpha a1)\n</code></pre>\n<p>Has anyone experienced issues with this? I'm using JPAexpressions to generate my subquery</p>\n<pre><code>JPAExpressions.select(....)\n</code></pre>\n"},{"tags":["java","exception","null","nullpointerexception","illegalargumentexception"],"answers":[{"comments":[{"owner":{"account_id":155935,"reputation":5731,"user_id":372926,"accept_rate":75,"display_name":"SamStephens"},"score":35,"creation_date":1391728157,"post_id":3886,"comment_id":32661870,"body_markdown":"The following answers to this question make persuasive arguments that NullPointerException is the correct exception: http://stackoverflow.com/a/8160/372926 ; http://stackoverflow.com/a/8196334/372926 ; and http://stackoverflow.com/a/6358/372926.","body":"The following answers to this question make persuasive arguments that NullPointerException is the correct exception: <a href=\"http://stackoverflow.com/a/8160/372926\">stackoverflow.com/a/8160/372926</a> ; <a href=\"http://stackoverflow.com/a/8196334/372926\">stackoverflow.com/a/8196334/372926</a> ; and <a href=\"http://stackoverflow.com/a/6358/372926\">stackoverflow.com/a/6358/372926</a>."},{"owner":{"account_id":5565947,"reputation":2509,"user_id":4413257,"accept_rate":68,"display_name":"matoni"},"score":4,"creation_date":1532269976,"post_id":3886,"comment_id":89900644,"body_markdown":"`IllegalArgumentException` is in contradiction with Java&#39;s [Objects.requireNonNull(T)](https://docs.oracle.com/javase/8/docs/api/java/util/Objects.html#requireNonNull-T-) and Guava&#39;s [Preconditions.checkNotNull(T)](https://google.github.io/guava/releases/21.0/api/docs/com/google/common/base/Preconditions.html#checkNotNull-T-) which throws a `NullPointerException`. However, **the right answer is definitelly** `IllegalArgumentException` as explained in [Jason Cohen&#39;s excelent answer and it&#39;s comment section](https://stackoverflow.com/a/47710/4413257).","body":"<code>IllegalArgumentException</code> is in contradiction with Java&#39;s <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Objects.html#requireNonNull-T-\" rel=\"nofollow noreferrer\">Objects.requireNonNull(T)</a> and Guava&#39;s <a href=\"https://google.github.io/guava/releases/21.0/api/docs/com/google/common/base/Preconditions.html#checkNotNull-T-\" rel=\"nofollow noreferrer\">Preconditions.checkNotNull(T)</a> which throws a <code>NullPointerException</code>. However, <b>the right answer is definitelly</b> <code>IllegalArgumentException</code> as explained in <a href=\"https://stackoverflow.com/a/47710/4413257\">Jason Cohen&#39;s excelent answer and it&#39;s comment section</a>."}],"tags":[],"owner":{"account_id":26,"reputation":17674,"user_id":35,"accept_rate":90,"display_name":"Greg Hurlman"},"comment_count":2,"down_vote_count":30,"up_vote_count":343,"is_accepted":true,"score":313,"last_activity_date":1494762366,"creation_date":1218050964,"answer_id":3886,"question_id":3881,"body_markdown":"It seems like an `IllegalArgumentException` is called for if you don&#39;t want `null` to be an allowed value, and the `NullPointerException` would be thrown if you were trying to *use* a variable that turns out to be `null`.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>It seems like an <code>IllegalArgumentException</code> is called for if you don't want <code>null</code> to be an allowed value, and the <code>NullPointerException</code> would be thrown if you were trying to <em>use</em> a variable that turns out to be <code>null</code>.</p>\n"},{"tags":[],"owner":{"account_id":437,"reputation":4455,"user_id":560,"accept_rate":100,"display_name":"Jeremy Privett"},"comment_count":0,"down_vote_count":2,"up_vote_count":20,"is_accepted":false,"score":18,"last_activity_date":1472551863,"creation_date":1218051071,"answer_id":3890,"question_id":3881,"body_markdown":"If it&#39;s a `setter` method and `null` is being passed to it, I think it would make more sense to throw an `IllegalArgumentException`. A `NullPointerException` seems to make more sense in the case where you&#39;re attempting to actually use the `null`.\r\n\r\nSo, if you&#39;re using it and it&#39;s `null`, `NullPointer`. If it&#39;s being passed in and it&#39;s `null`, `IllegalArgument`.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>If it's a <code>setter</code> method and <code>null</code> is being passed to it, I think it would make more sense to throw an <code>IllegalArgumentException</code>. A <code>NullPointerException</code> seems to make more sense in the case where you're attempting to actually use the <code>null</code>.</p>\n\n<p>So, if you're using it and it's <code>null</code>, <code>NullPointer</code>. If it's being passed in and it's <code>null</code>, <code>IllegalArgument</code>.</p>\n"},{"comments":[{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":3,"creation_date":1293653470,"post_id":6358,"comment_id":4997539,"body_markdown":"Food for thought: Maybe the reason that NullPointerException doesn&#39;t extend IllegalArgumentException is that the former can occur in cases not involving method arguments.","body":"Food for thought: Maybe the reason that NullPointerException doesn&#39;t extend IllegalArgumentException is that the former can occur in cases not involving method arguments."},{"owner":{"account_id":118410,"reputation":62929,"user_id":309412,"accept_rate":74,"display_name":"Lie Ryan"},"score":2,"creation_date":1362148167,"post_id":6358,"comment_id":21347381,"body_markdown":"@Gili: maybe this problem exists in the first place because Java does not support multiple inheritance. If Java supports MI, you&#39;d be able to throw an exception that inherits from both IllegalArgumentException and NullPointerException.","body":"@Gili: maybe this problem exists in the first place because Java does not support multiple inheritance. If Java supports MI, you&#39;d be able to throw an exception that inherits from both IllegalArgumentException and NullPointerException."},{"owner":{"account_id":8537,"reputation":40691,"user_id":15459,"accept_rate":70,"display_name":"PhiLho"},"score":7,"creation_date":1374506463,"post_id":6358,"comment_id":25953647,"body_markdown":"The message needs not to include the argument, since it would be always null, giving: &quot;null must not be null&quot;, not very useful. :-) Otherwise, I agree, you can make a &quot;rich&quot; NPE, with a meaningful message.","body":"The message needs not to include the argument, since it would be always null, giving: &quot;null must not be null&quot;, not very useful. :-) Otherwise, I agree, you can make a &quot;rich&quot; NPE, with a meaningful message."},{"owner":{"account_id":1326635,"reputation":700,"user_id":1271317,"display_name":"flamming_python"},"score":5,"creation_date":1404150508,"post_id":6358,"comment_id":37920918,"body_markdown":"I have to agree - follow the standard API when in doubt. Not everything in the API is optimal mind you, but still it&#39;s maintained and iterated by hundreds of developers, and used by millions of programmers. Now in Java 7 we have another example of the NPE being used in this way; the Objects.requireNonNull(T obj) method - clearly specified for checking that object references are non-null, clearly specified for doing parameter validation in methods/constructors, and clearly specified to throw an NPE if the object is null. End of","body":"I have to agree - follow the standard API when in doubt. Not everything in the API is optimal mind you, but still it&#39;s maintained and iterated by hundreds of developers, and used by millions of programmers. Now in Java 7 we have another example of the NPE being used in this way; the Objects.requireNonNull(T obj) method - clearly specified for checking that object references are non-null, clearly specified for doing parameter validation in methods/constructors, and clearly specified to throw an NPE if the object is null. End of"}],"tags":[],"owner":{"account_id":589,"reputation":30827,"user_id":758,"accept_rate":77,"display_name":"Mark Renouf"},"comment_count":4,"down_vote_count":3,"up_vote_count":78,"is_accepted":false,"score":75,"last_activity_date":1446586775,"creation_date":1218227704,"answer_id":6358,"question_id":3881,"body_markdown":"I tend to follow the design of JDK libraries, especially Collections and Concurrency (Joshua Bloch, Doug Lea, those guys know how to design solid APIs). Anyway, many APIs in the JDK pro-actively throws `NullPointerException`. \r\n\r\nFor example, the Javadoc for `Map.containsKey` states:\r\n&gt; @throws NullPointerException if the key is &lt;tt&gt;null&lt;/tt&gt; and this map\r\n&gt;   does not permit &lt;tt&gt;null&lt;/tt&gt; keys (optional).\r\n\r\nIt&#39;s perfectly valid to throw your own NPE. The convention is to include the parameter name which was null in the message of the exception. \r\n\r\nThe pattern goes:\r\n\r\n\tpublic void someMethod(Object mustNotBeNull) {  \r\n\t\tif (mustNotBeNull == null) {  \r\n\t\t\tthrow new NullPointerException(&quot;mustNotBeNull must not be null&quot;);  \r\n\t\t}  \r\n\t}\r\n\r\nWhatever you do, don&#39;t allow a bad value to get set and throw an exception later when other code attempts to use it. That makes debugging a nightmare. You should always the follow the &quot;fail-fast&quot; principle.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>I tend to follow the design of JDK libraries, especially Collections and Concurrency (Joshua Bloch, Doug Lea, those guys know how to design solid APIs). Anyway, many APIs in the JDK pro-actively throws <code>NullPointerException</code>. </p>\n\n<p>For example, the Javadoc for <code>Map.containsKey</code> states:</p>\n\n<blockquote>\n  <p>@throws NullPointerException if the key is null and this map\n    does not permit null keys (optional).</p>\n</blockquote>\n\n<p>It's perfectly valid to throw your own NPE. The convention is to include the parameter name which was null in the message of the exception. </p>\n\n<p>The pattern goes:</p>\n\n<pre><code>public void someMethod(Object mustNotBeNull) {  \n    if (mustNotBeNull == null) {  \n        throw new NullPointerException(\"mustNotBeNull must not be null\");  \n    }  \n}\n</code></pre>\n\n<p>Whatever you do, don't allow a bad value to get set and throw an exception later when other code attempts to use it. That makes debugging a nightmare. You should always the follow the \"fail-fast\" principle.</p>\n"},{"comments":[{"owner":{"account_id":22774,"reputation":18102,"user_id":56524,"accept_rate":45,"display_name":"mP."},"score":0,"creation_date":1333184587,"post_id":7770,"comment_id":12712381,"body_markdown":"The run time wont include a meaningful msg.","body":"The run time wont include a meaningful msg."},{"owner":{"account_id":130873,"reputation":20683,"user_id":330457,"accept_rate":82,"display_name":"Jin Kwon"},"score":0,"creation_date":1342146130,"post_id":7770,"comment_id":15132695,"body_markdown":"Actually this comment could derive some other opinion. Let the VM speak in `NPE` yet the programmers speak in `IAE` before the VM if they want to.","body":"Actually this comment could derive some other opinion. Let the VM speak in <code>NPE</code> yet the programmers speak in <code>IAE</code> before the VM if they want to."},{"owner":{"account_id":8537,"reputation":40691,"user_id":15459,"accept_rate":70,"display_name":"PhiLho"},"score":1,"creation_date":1374506764,"post_id":7770,"comment_id":25953826,"body_markdown":"Expensive? I don&#39;t think that == null is that expensive... Beside, the null argument can be just stored for latter use, and will throw an exception long after the method call, making the error harder to track. Or you can create an expensive object before using the null argument, and so on. Early detection seems to be a good option.","body":"Expensive? I don&#39;t think that == null is that expensive... Beside, the null argument can be just stored for latter use, and will throw an exception long after the method call, making the error harder to track. Or you can create an expensive object before using the null argument, and so on. Early detection seems to be a good option."},{"owner":{"account_id":1396489,"reputation":554,"user_id":1326149,"display_name":"digital_infinity"},"score":1,"creation_date":1502440268,"post_id":7770,"comment_id":78220013,"body_markdown":"down voting of this answer is misunderstanding of the hardware behind. Certainly the hardware checks (that CPU does) are cheaper that explicit checking. Dereferencing of null is a SegmentationFault (SegV) special case (access to a page not owned by the process) which CPU/OS checks and JRE handles as a special case throwing NullPointerException.","body":"down voting of this answer is misunderstanding of the hardware behind. Certainly the hardware checks (that CPU does) are cheaper that explicit checking. Dereferencing of null is a SegmentationFault (SegV) special case (access to a page not owned by the process) which CPU/OS checks and JRE handles as a special case throwing NullPointerException."}],"tags":[],"owner":{"account_id":776,"reputation":4705,"user_id":1009,"accept_rate":83,"display_name":"jassuncao"},"comment_count":4,"down_vote_count":7,"up_vote_count":2,"is_accepted":false,"score":-5,"last_activity_date":1218460839,"creation_date":1218460839,"answer_id":7770,"question_id":3881,"body_markdown":"If you choose to throw a NPE and you are using the argument in your method, it might be redundant and expensive to explicitly check for a null. I think the VM already does that for you.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>If you choose to throw a NPE and you are using the argument in your method, it might be redundant and expensive to explicitly check for a null. I think the VM already does that for you.</p>\n"},{"tags":[],"owner":{"account_id":197,"reputation":41504,"user_id":244,"accept_rate":50,"display_name":"Claude Houle"},"comment_count":0,"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1218483829,"creation_date":1218483829,"answer_id":8132,"question_id":3881,"body_markdown":"The accepted practice if to use the *IllegalArgumentException( String message )* to declare a parameter to be invalid and give as much detail as possible... So to say that a parameters was found to be null while exception non-null, you would do something like this:\r\n\r\n    if( variable == null )\r\n        throw new IllegalArgumentException(&quot;The object &#39;variable&#39; cannot be null&quot;);\r\n\r\nYou have virtually no reason to implicitly use the &quot;NullPointerException&quot;. The NullPointerException is an exception thrown by the Java Virtual Machine when you try to execute code on null reference (Like *toString()*).","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>The accepted practice if to use the <em>IllegalArgumentException( String message )</em> to declare a parameter to be invalid and give as much detail as possible... So to say that a parameters was found to be null while exception non-null, you would do something like this:</p>\n\n<pre><code>if( variable == null )\n    throw new IllegalArgumentException(\"The object 'variable' cannot be null\");\n</code></pre>\n\n<p>You have virtually no reason to implicitly use the \"NullPointerException\". The NullPointerException is an exception thrown by the Java Virtual Machine when you try to execute code on null reference (Like <em>toString()</em>).</p>\n"},{"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":102,"creation_date":1243630315,"post_id":8160,"comment_id":736023,"body_markdown":"I strongly disagree. NullPointerExceptions should only be thrown if the JVM accidentially follows a null reference.   That is the difference that helps you when called in to look at code at 3 in the morning.","body":"I strongly disagree. NullPointerExceptions should only be thrown if the JVM accidentially follows a null reference.   That is the difference that helps you when called in to look at code at 3 in the morning."},{"owner":{"account_id":793,"reputation":24042,"user_id":1035,"accept_rate":92,"display_name":"GaryF"},"score":27,"creation_date":1244456904,"post_id":8160,"comment_id":772837,"body_markdown":"I don&#39;t necessarily agree with the standard (I could actually go either way on the issue), but that IS what the standard usage throughout the JDK is, hence Effective Java making the case for it. I think this is a case of choosing whether or not to follow the standard, or do the thing you feel is right. Unless you have a very good reason (and this certainly may qualify), it&#39;s best to follow standard practice.","body":"I don&#39;t necessarily agree with the standard (I could actually go either way on the issue), but that IS what the standard usage throughout the JDK is, hence Effective Java making the case for it. I think this is a case of choosing whether or not to follow the standard, or do the thing you feel is right. Unless you have a very good reason (and this certainly may qualify), it&#39;s best to follow standard practice."},{"owner":{"account_id":24045,"reputation":5432,"user_id":60871,"display_name":"Christopher Smith"},"score":2,"creation_date":1260337752,"post_id":8160,"comment_id":1769904,"body_markdown":"Actually, the NullPointerException is supposed to be thrown for &quot;illegal uses of the null reference&quot;. Indeed, encapsulation means you should *know* whether it was caused by the JVM  actually dereferencing a bad pointer or the app just rejecting it.","body":"Actually, the NullPointerException is supposed to be thrown for &quot;illegal uses of the null reference&quot;. Indeed, encapsulation means you should <i>know</i> whether it was caused by the JVM  actually dereferencing a bad pointer or the app just rejecting it."},{"owner":{"account_id":27608,"reputation":1806,"user_id":73008,"accept_rate":83,"display_name":"bjornl"},"score":1,"creation_date":1289224545,"post_id":8160,"comment_id":4444162,"body_markdown":"Agree with Thorbjorn, do yourself a favor and avoid debugging hell.","body":"Agree with Thorbjorn, do yourself a favor and avoid debugging hell."},{"owner":{"account_id":260780,"reputation":16208,"user_id":544557,"display_name":"Jim Balter"},"score":22,"creation_date":1359675258,"post_id":8160,"comment_id":20447800,"body_markdown":"The exception trace shows the point of the exception, so if the difference in the type of the exception causes hell for you or is &quot;the difference that helps you&quot;, you are doing something very wrong.","body":"The exception trace shows the point of the exception, so if the difference in the type of the exception causes hell for you or is &quot;the difference that helps you&quot;, you are doing something very wrong."},{"owner":{"account_id":1413944,"reputation":59688,"user_id":1339987,"accept_rate":54,"display_name":"djechlin"},"score":2,"creation_date":1404699342,"post_id":8160,"comment_id":38119020,"body_markdown":"@Thorbj&#248;rnRavnAndersen the stack trace will point you at the exact same spot anyway? certainly doesn&#39;t make *that* much of a difference","body":"@Thorbj&#248;rnRavnAndersen the stack trace will point you at the exact same spot anyway? certainly doesn&#39;t make <i>that</i> much of a difference"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1404699810,"post_id":8160,"comment_id":38119134,"body_markdown":"@djechlin it allows you or others to triage the problem early without having to wake a programmer to look at the precise source first.","body":"@djechlin it allows you or others to triage the problem early without having to wake a programmer to look at the precise source first."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":2,"creation_date":1404762964,"post_id":8160,"comment_id":38151124,"body_markdown":"@JimBalter If nullpointerexceptions are never thrown by _your_ code but only by the JVM when resolving a `.` or an array index, you can immediately say whether this is bad data caught by your code, or this is unforeseen data resulting in a code malfunction, without having to look at the source first.  In a production failure where downtime may be expensive this may allow the initial investigator to react correctly without having to wake up a vendor programmer first.","body":"@JimBalter If nullpointerexceptions are never thrown by <i>your</i> code but only by the JVM when resolving a <code>.</code> or an array index, you can immediately say whether this is bad data caught by your code, or this is unforeseen data resulting in a code malfunction, without having to look at the source first.  In a production failure where downtime may be expensive this may allow the initial investigator to react correctly without having to wake up a vendor programmer first."},{"owner":{"account_id":260780,"reputation":16208,"user_id":544557,"display_name":"Jim Balter"},"score":9,"creation_date":1404769067,"post_id":8160,"comment_id":38154222,"body_markdown":"Fantasies and sophistry. Just below, MB writes &quot;Note that the arguments about hard debugging are bogus because you can of course provide a message to NullPointerException saying what was null and why it shouldn&#39;t be null. Just like with IllegalArgumentException.&quot;","body":"Fantasies and sophistry. Just below, MB writes &quot;Note that the arguments about hard debugging are bogus because you can of course provide a message to NullPointerException saying what was null and why it shouldn&#39;t be null. Just like with IllegalArgumentException.&quot;"},{"owner":{"account_id":260780,"reputation":16208,"user_id":544557,"display_name":"Jim Balter"},"score":1,"creation_date":1404770364,"post_id":8160,"comment_id":38154796,"body_markdown":"Also, these points were covered by Christopher Smith , among others, 4 1/2 years ago ... continuing to bring up bogus points is trolling.","body":"Also, these points were covered by Christopher Smith , among others, 4 1/2 years ago ... continuing to bring up bogus points is trolling."},{"owner":{"account_id":793,"reputation":24042,"user_id":1035,"accept_rate":92,"display_name":"GaryF"},"score":13,"creation_date":1404808685,"post_id":8160,"comment_id":38167150,"body_markdown":"As the original answerer here, let me say it just doesn&#39;t matter that much. It certainly doesn&#39;t warrant 6 years of conversation. Pick one, whichever you like, and be consistent. The standard, as I pointed out, is NPE. If you prefer IAE for whatever reasons, go for it. Just be consistent.","body":"As the original answerer here, let me say it just doesn&#39;t matter that much. It certainly doesn&#39;t warrant 6 years of conversation. Pick one, whichever you like, and be consistent. The standard, as I pointed out, is NPE. If you prefer IAE for whatever reasons, go for it. Just be consistent."},{"owner":{"account_id":30014,"reputation":20532,"user_id":81520,"accept_rate":84,"display_name":"Peter Perh&#225;č"},"score":0,"creation_date":1444994226,"post_id":8160,"comment_id":54145921,"body_markdown":"it is this quote that brought me here, as i disagree... i guess i won&#39;t really find an answer here. i will keep on throwing IAEs rather than NPEs, though I have seen NPE thrown from the java.sql.DriverManager.registerDriver(Driver) method, if Driver is null, NPE is thrown explicitly. I wondered WHY.","body":"it is this quote that brought me here, as i disagree... i guess i won&#39;t really find an answer here. i will keep on throwing IAEs rather than NPEs, though I have seen NPE thrown from the java.sql.DriverManager.registerDriver(Driver) method, if Driver is null, NPE is thrown explicitly. I wondered WHY."},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1534844582,"post_id":8160,"comment_id":90841036,"body_markdown":"NullPointerException could be thrown not only by null parameters, but also by null variables inside the method.","body":"NullPointerException could be thrown not only by null parameters, but also by null variables inside the method."}],"tags":[],"owner":{"account_id":793,"reputation":24042,"user_id":1035,"accept_rate":92,"display_name":"GaryF"},"comment_count":13,"down_vote_count":17,"up_vote_count":188,"is_accepted":false,"score":171,"last_activity_date":1539078486,"creation_date":1218485118,"answer_id":8160,"question_id":3881,"body_markdown":"The standard is to throw the `NullPointerException`. The generally infallible &quot;Effective Java&quot; discusses this briefly in Item 42 (first edition), Item 60 (second edition), or Item 72 (third edition) &quot;Favor the use of standard exceptions&quot;:\r\n\r\n&gt; &quot;Arguably, all erroneous method\r\n&gt; invocations boil down to an illegal\r\n&gt; argument or illegal state, but other\r\n&gt; exceptions are standardly used for\r\n&gt; certain kinds of illegal arguments and\r\n&gt; states. If a caller passes null in\r\n&gt; some parameter for which null values\r\n&gt; are prohibited, convention dictates\r\n&gt; that NullPointerException be thrown\r\n&gt; rather than IllegalArgumentException.&quot;","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>The standard is to throw the <code>NullPointerException</code>. The generally infallible \"Effective Java\" discusses this briefly in Item 42 (first edition), Item 60 (second edition), or Item 72 (third edition) \"Favor the use of standard exceptions\":</p>\n\n<blockquote>\n  <p>\"Arguably, all erroneous method\n  invocations boil down to an illegal\n  argument or illegal state, but other\n  exceptions are standardly used for\n  certain kinds of illegal arguments and\n  states. If a caller passes null in\n  some parameter for which null values\n  are prohibited, convention dictates\n  that NullPointerException be thrown\n  rather than IllegalArgumentException.\"</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":24045,"reputation":5432,"user_id":60871,"display_name":"Christopher Smith"},"score":1,"creation_date":1260339164,"post_id":13262,"comment_id":1769993,"body_markdown":"The salient bit is that it is the *application* that is using null, not the runtime. So there is a fairly large overlap between &quot;when a method has been passed an illegal or inappropriate argument&quot; and &quot;when an application is using null&quot;. In theory, if an app passes a null for a field that requires non-null, both criteria are being met.","body":"The salient bit is that it is the <i>application</i> that is using null, not the runtime. So there is a fairly large overlap between &quot;when a method has been passed an illegal or inappropriate argument&quot; and &quot;when an application is using null&quot;. In theory, if an app passes a null for a field that requires non-null, both criteria are being met."}],"tags":[],"owner":{"account_id":1020,"reputation":2478,"user_id":1353,"display_name":"martinatime"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1218910400,"creation_date":1218910400,"answer_id":13262,"question_id":3881,"body_markdown":"The definitions from the links to the two exceptions above are\r\nIllegalArgumentException: Thrown to indicate that a method has been passed an illegal or inappropriate argument. \r\nNullPointerException: Thrown when an application attempts to use null in a case where an object is required.\r\n\r\nThe big difference here is the IllegalArgumentException is supposed to be used when checking that an argument to a method is valid. NullPointerException is supposed to be used whenever an object being &quot;used&quot; when it is null.\r\n\r\nI hope that helps put the two in perspective.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>The definitions from the links to the two exceptions above are\nIllegalArgumentException: Thrown to indicate that a method has been passed an illegal or inappropriate argument. \nNullPointerException: Thrown when an application attempts to use null in a case where an object is required.</p>\n\n<p>The big difference here is the IllegalArgumentException is supposed to be used when checking that an argument to a method is valid. NullPointerException is supposed to be used whenever an object being \"used\" when it is null.</p>\n\n<p>I hope that helps put the two in perspective.</p>\n"},{"tags":[],"owner":{"account_id":1781,"reputation":91962,"user_id":2443,"accept_rate":82,"display_name":"Allain Lalonde"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1219403495,"creation_date":1219403495,"answer_id":22074,"question_id":3881,"body_markdown":"Couldn&#39;t agree more with what&#39;s being said.  Fail early, fail fast.  Pretty good Exception mantra. \r\n\r\nThe question about which Exception to throw is mostly a matter of personal taste.  In my mind IllegalArgumentException seems more specific than using a NPE since it&#39;s telling me that the problem was with an argument I passed to the method and not with a value that may have been generated while performing the method.\r\n\r\nMy 2 Cents","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>Couldn't agree more with what's being said.  Fail early, fail fast.  Pretty good Exception mantra. </p>\n\n<p>The question about which Exception to throw is mostly a matter of personal taste.  In my mind IllegalArgumentException seems more specific than using a NPE since it's telling me that the problem was with an argument I passed to the method and not with a value that may have been generated while performing the method.</p>\n\n<p>My 2 Cents</p>\n"},{"tags":[],"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1219946599,"creation_date":1219946599,"answer_id":32940,"question_id":3881,"body_markdown":"If it&#39;s a &quot;setter&quot;, or somewhere I&#39;m getting a member to use later, I tend to use IllegalArgumentException.\r\n\r\nIf it&#39;s something I&#39;m going to use (dereference) right now in the method, I throw a NullPointerException proactively. I like this better than letting the runtime do it, because I can provide a helpful message (seems like the runtime could do this too, but that&#39;s a rant for another day).\r\n\r\nIf I&#39;m overriding a method, I use whatever the overridden method uses.\r\n","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>If it's a \"setter\", or somewhere I'm getting a member to use later, I tend to use IllegalArgumentException.</p>\n\n<p>If it's something I'm going to use (dereference) right now in the method, I throw a NullPointerException proactively. I like this better than letting the runtime do it, because I can provide a helpful message (seems like the runtime could do this too, but that's a rant for another day).</p>\n\n<p>If I'm overriding a method, I use whatever the overridden method uses.</p>\n"},{"comments":[{"owner":{"account_id":208839,"reputation":1399,"user_id":459572,"accept_rate":23,"display_name":"Donz"},"score":9,"creation_date":1289293005,"post_id":45518,"comment_id":4454255,"body_markdown":"JavaDoc on NPE has another opinion: &quot;Applications should throw instances of this class to indicate other illegal uses of the null object.&quot;. Don&#39;t be so categorical","body":"JavaDoc on NPE has another opinion: &quot;Applications should throw instances of this class to indicate other illegal uses of the null object.&quot;. Don&#39;t be so categorical"}],"tags":[],"owner":{"display_name":"Martin OConnor"},"comment_count":1,"down_vote_count":5,"up_vote_count":10,"is_accepted":false,"score":5,"last_activity_date":1220610845,"creation_date":1220610845,"answer_id":45518,"question_id":3881,"body_markdown":"In general, a developer should **never** throw a NullPointerException. This exception is thrown by the runtime when code attempts to dereference a variable who&#39;s value is null. Therefore, if your method wants to explicitly disallow null, as opposed to just happening to have a null value raise a NullPointerException, you should throw an IllegalArgumentException.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>In general, a developer should <strong>never</strong> throw a NullPointerException. This exception is thrown by the runtime when code attempts to dereference a variable who's value is null. Therefore, if your method wants to explicitly disallow null, as opposed to just happening to have a null value raise a NullPointerException, you should throw an IllegalArgumentException.</p>\n"},{"comments":[{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":135,"creation_date":1293653730,"post_id":47710,"comment_id":4997590,"body_markdown":"Effective Java 2nd Edition, Item 60: &quot;Arguably, all erroneous method invocations boil down to an illegal argument or illegal state, but other exceptions are standardly used for certain kinds of illegal arguments and states. If a caller passes null in some parameter for which null values are prohibited, convention dictates that NullPointerException be thrown rather than IllegalArgumentException. Similarly, if a caller passes an out-of-range value in a parameter representing an index into a sequence, IndexOutOfBoundsException should be thrown rather than IllegalArgumentException.&quot;","body":"Effective Java 2nd Edition, Item 60: &quot;Arguably, all erroneous method invocations boil down to an illegal argument or illegal state, but other exceptions are standardly used for certain kinds of illegal arguments and states. If a caller passes null in some parameter for which null values are prohibited, convention dictates that NullPointerException be thrown rather than IllegalArgumentException. Similarly, if a caller passes an out-of-range value in a parameter representing an index into a sequence, IndexOutOfBoundsException should be thrown rather than IllegalArgumentException.&quot;"},{"owner":{"account_id":19779,"reputation":229365,"user_id":46642,"accept_rate":88,"display_name":"R. Martinho Fernandes"},"score":35,"creation_date":1295972705,"post_id":47710,"comment_id":5313799,"body_markdown":"The JavaDoc for NPE also states the following: &quot;Applications should throw instances of this class to indicate other illegal uses of the null object.&quot; This one could be more clear :(","body":"The JavaDoc for NPE also states the following: &quot;Applications should throw instances of this class to indicate other illegal uses of the null object.&quot; This one could be more clear :("},{"owner":{"account_id":15903,"reputation":323453,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":13,"creation_date":1350315816,"post_id":47710,"comment_id":17471195,"body_markdown":"Unfortunately, the validation methods `Validate.notNull` (commons lang) and `Preconditions.checkNotNull` (guava) both throw NPE :-(","body":"Unfortunately, the validation methods <code>Validate.notNull</code> (commons lang) and <code>Preconditions.checkNotNull</code> (guava) both throw NPE :-("},{"owner":{"account_id":198768,"reputation":1124,"user_id":443633,"display_name":"michaelok"},"score":2,"creation_date":1387238554,"post_id":47710,"comment_id":30866612,"body_markdown":"Although Guava also has Preconditions.checkArgument() throws IllegalArgumentException ...","body":"Although Guava also has Preconditions.checkArgument() throws IllegalArgumentException ..."},{"owner":{"account_id":260780,"reputation":16208,"user_id":544557,"display_name":"Jim Balter"},"score":1,"creation_date":1404769923,"post_id":47710,"comment_id":38154614,"body_markdown":"&quot;When you see IAE, you assume the caller of the method at the top of the stack passed in an illegal value. Again, the latter assumption is true, the former is misleading.&quot; -- It&#39;s not at all misleading, quite the contrary. Had you not explicitly checked for a null argument value, you would have gotten an NPE when you used it. The check is just to make the details of the logic error explicit. There is no *logical* difference between a program that throws an NPE upon derefing null and a program that throws an exception in lieu of derefing null. The exception message should make the cause clear.","body":"&quot;When you see IAE, you assume the caller of the method at the top of the stack passed in an illegal value. Again, the latter assumption is true, the former is misleading.&quot; -- It&#39;s not at all misleading, quite the contrary. Had you not explicitly checked for a null argument value, you would have gotten an NPE when you used it. The check is just to make the details of the logic error explicit. There is no <i>logical</i> difference between a program that throws an NPE upon derefing null and a program that throws an exception in lieu of derefing null. The exception message should make the cause clear."},{"owner":{"account_id":260780,"reputation":16208,"user_id":544557,"display_name":"Jim Balter"},"score":0,"creation_date":1404770110,"post_id":47710,"comment_id":38154695,"body_markdown":"&quot;Although Guava also has Preconditions.checkArgument() throws IllegalArgumentException&quot; -- yes, so? That takes a boolean condition; it isn&#39;t for use with null arguments.","body":"&quot;Although Guava also has Preconditions.checkArgument() throws IllegalArgumentException&quot; -- yes, so? That takes a boolean condition; it isn&#39;t for use with null arguments."},{"owner":{"account_id":125254,"reputation":2585,"user_id":320911,"display_name":"Arto Bendiken"},"score":17,"creation_date":1414537636,"post_id":47710,"comment_id":41850932,"body_markdown":"@AaronDigulla, from the Guava docs:\n\n&quot;We realize there are many valid arguments in favor of throwing IAE on a null argument. In fact, if we had a time machine to go back &gt;15 years, we might even try to push things in that direction. However, we have decided to stick with the JDK and Effective Java preference of NullPointerException. If you&#39;re steadfast in your belief that IAE is right, you still have `checkArgument(arg != null)`, just without the convenience of it returning arg, or you can create a local utility to your project.&quot;\n\nhttp://code.google.com/p/guava-libraries/wiki/IdeaGraveyard","body":"@AaronDigulla, from the Guava docs:  &quot;We realize there are many valid arguments in favor of throwing IAE on a null argument. In fact, if we had a time machine to go back &gt;15 years, we might even try to push things in that direction. However, we have decided to stick with the JDK and Effective Java preference of NullPointerException. If you&#39;re steadfast in your belief that IAE is right, you still have <code>checkArgument(arg != null)</code>, just without the convenience of it returning arg, or you can create a local utility to your project.&quot;  <a href=\"http://code.google.com/p/guava-libraries/wiki/IdeaGraveyard\" rel=\"nofollow noreferrer\">code.google.com/p/guava-libraries/wiki/IdeaGraveyard</a>"},{"owner":{"account_id":233198,"reputation":712,"user_id":498531,"accept_rate":62,"display_name":"jpangamarca"},"score":0,"creation_date":1461165506,"post_id":47710,"comment_id":61077298,"body_markdown":"I second this answer. I guess &quot;Wisdom, not rules&quot; (http://javapractices.com/topic/TopicAction.do?Id=259) applies here.","body":"I second this answer. I guess &quot;Wisdom, not rules&quot; (<a href=\"http://javapractices.com/topic/TopicAction.do?Id=259\" rel=\"nofollow noreferrer\">javapractices.com/topic/TopicAction.do?Id=259</a>) applies here."},{"owner":{"account_id":158376,"reputation":1589,"user_id":376960,"accept_rate":76,"display_name":"Igor"},"score":0,"creation_date":1472035751,"post_id":47710,"comment_id":65588046,"body_markdown":"I am using IllegalArgumentException if an argument is given, yet &quot;illegal&quot; in terms of being wrong (as it is unknown to my application - possibly misspelled). I am uncertain about what to throw if no argument is passed - since my application expects at least two arguments...","body":"I am using IllegalArgumentException if an argument is given, yet &quot;illegal&quot; in terms of being wrong (as it is unknown to my application - possibly misspelled). I am uncertain about what to throw if no argument is passed - since my application expects at least two arguments..."},{"owner":{"account_id":5680318,"reputation":2790,"user_id":4491768,"accept_rate":50,"display_name":"Wouter"},"score":0,"creation_date":1491939137,"post_id":47710,"comment_id":73772526,"body_markdown":"NPE: &quot;Applications should throw instances of this class to indicate other illegal uses of the null object.&quot;\nIAE: &quot;Thrown to indicate that a method has been passed an illegal or inappropriate argument.&quot;","body":"NPE: &quot;Applications should throw instances of this class to indicate other illegal uses of the null object.&quot; IAE: &quot;Thrown to indicate that a method has been passed an illegal or inappropriate argument.&quot;"},{"owner":{"account_id":556948,"reputation":1608,"user_id":919248,"accept_rate":78,"display_name":"Pedro Borges"},"score":0,"creation_date":1531827900,"post_id":47710,"comment_id":89732661,"body_markdown":"If you want to be specific, check and throw IAE, if not just let the NPE happen naturally. It is a matter of choice to be explicit (IAE) or implicit (NPE) both are fine, as long as you never throw an NPE explicitly in code :)","body":"If you want to be specific, check and throw IAE, if not just let the NPE happen naturally. It is a matter of choice to be explicit (IAE) or implicit (NPE) both are fine, as long as you never throw an NPE explicitly in code :)"},{"owner":{"account_id":5565947,"reputation":2509,"user_id":4413257,"accept_rate":68,"display_name":"matoni"},"score":0,"creation_date":1605956298,"post_id":47710,"comment_id":114815436,"body_markdown":"Also from test-case perspective, IAE is more suitable, since NPE can be any line of code with &quot;null.callMethod()&quot;, while IAE immediatelly identifies invalid argument scenario.","body":"Also from test-case perspective, IAE is more suitable, since NPE can be any line of code with &quot;null.callMethod()&quot;, while IAE immediatelly identifies invalid argument scenario."},{"owner":{"account_id":6678507,"reputation":334,"user_id":5152432,"display_name":"Marco Carlo Moriggi"},"score":0,"creation_date":1694504748,"post_id":47710,"comment_id":135895759,"body_markdown":"aaaand there is [java.util.Objects.requireNonNull](https://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#requireNonNull(T)), fromJava 7 till now, just to simplify throwing NPE ;-)\nI know there are also Guava&#39;s Preconditions and apache commons&#39; Validate, but simply looking at the latter&#39;s [documentation](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/Validate.html#notNull-T-): it is deprecated, and it tells that&#39;s better to use Objects.requireNonNull.","body":"aaaand there is <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#requireNonNull(T)\" rel=\"nofollow noreferrer\">java.util.Objects.requireNonNull</a>, fromJava 7 till now, just to simplify throwing NPE ;-) I know there are also Guava&#39;s Preconditions and apache commons&#39; Validate, but simply looking at the latter&#39;s <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/Validate.html#notNull-T-\" rel=\"nofollow noreferrer\">documentation</a>: it is deprecated, and it tells that&#39;s better to use Objects.requireNonNull."}],"tags":[],"owner":{"account_id":3416,"reputation":81767,"user_id":4926,"accept_rate":85,"display_name":"Jason Cohen"},"comment_count":13,"down_vote_count":22,"up_vote_count":466,"is_accepted":false,"score":444,"last_activity_date":1473927073,"creation_date":1220725747,"answer_id":47710,"question_id":3881,"body_markdown":"You should be using `IllegalArgumentException` (IAE), not `NullPointerException` (NPE) for the following reasons:\r\n\r\nFirst, the [NPE JavaDoc][1] explicitly lists the cases where NPE is appropriate.  Notice that all of them are thrown *by the runtime* when `null` is used inappropriately.  In contrast, the [IAE JavaDoc][2] couldn&#39;t be more clear: &quot;Thrown to indicate that a method has been passed an illegal or inappropriate argument.&quot;  Yup, that&#39;s you!\r\n\r\nSecond, when you see an NPE in a stack trace, what do you assume?  Probably that someone dereferenced a `null`.  When you see IAE, you assume the caller of the method at the top of the stack passed in an illegal value.  Again, the latter assumption is true, the former is misleading.\r\n\r\nThird, since IAE is clearly designed for validating parameters, you have to assume it as the default choice of exception, so why would you choose NPE instead?  Certainly not for different behavior -- do you really expect calling code to catch NPE&#39;s separately from IAE and do something different as a result?  Are you trying to communicate a more specific error message?  But you can do that in the exception message text anyway, as you should for all other incorrect parameters.\r\n\r\nFourth, all other incorrect parameter data will be IAE, so why not be consistent?  Why is it that an illegal `null` is so special that it deserves a separate exception from all other types of illegal arguments?\r\n\r\nFinally, I accept the argument given by other answers that parts of the Java API use NPE in this manner.  However, the Java API is inconsistent with everything from exception types to naming conventions, so I think just blindly copying (your favorite part of) the Java API isn&#39;t a good enough argument to trump these other considerations.\r\n\r\n  [1]: http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NullPointerException.html\r\n  [2]: http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/IllegalArgumentException.html","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>You should be using <code>IllegalArgumentException</code> (IAE), not <code>NullPointerException</code> (NPE) for the following reasons:</p>\n\n<p>First, the <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NullPointerException.html\" rel=\"noreferrer\">NPE JavaDoc</a> explicitly lists the cases where NPE is appropriate.  Notice that all of them are thrown <em>by the runtime</em> when <code>null</code> is used inappropriately.  In contrast, the <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/IllegalArgumentException.html\" rel=\"noreferrer\">IAE JavaDoc</a> couldn't be more clear: \"Thrown to indicate that a method has been passed an illegal or inappropriate argument.\"  Yup, that's you!</p>\n\n<p>Second, when you see an NPE in a stack trace, what do you assume?  Probably that someone dereferenced a <code>null</code>.  When you see IAE, you assume the caller of the method at the top of the stack passed in an illegal value.  Again, the latter assumption is true, the former is misleading.</p>\n\n<p>Third, since IAE is clearly designed for validating parameters, you have to assume it as the default choice of exception, so why would you choose NPE instead?  Certainly not for different behavior -- do you really expect calling code to catch NPE's separately from IAE and do something different as a result?  Are you trying to communicate a more specific error message?  But you can do that in the exception message text anyway, as you should for all other incorrect parameters.</p>\n\n<p>Fourth, all other incorrect parameter data will be IAE, so why not be consistent?  Why is it that an illegal <code>null</code> is so special that it deserves a separate exception from all other types of illegal arguments?</p>\n\n<p>Finally, I accept the argument given by other answers that parts of the Java API use NPE in this manner.  However, the Java API is inconsistent with everything from exception types to naming conventions, so I think just blindly copying (your favorite part of) the Java API isn't a good enough argument to trump these other considerations.</p>\n"},{"comments":[{"owner":{"account_id":24045,"reputation":5432,"user_id":60871,"display_name":"Christopher Smith"},"score":4,"creation_date":1260338974,"post_id":51213,"comment_id":1769975,"body_markdown":"Sorry, if a programmer looks around &quot;randomly&quot; upon getting any kind of exception... changing the name of an exception isn&#39;t going to help much.","body":"Sorry, if a programmer looks around &quot;randomly&quot; upon getting any kind of exception... changing the name of an exception isn&#39;t going to help much."}],"tags":[],"owner":{"account_id":3643,"reputation":4356,"user_id":5266,"display_name":"Will Sargent"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1220933585,"creation_date":1220933585,"answer_id":51213,"question_id":3881,"body_markdown":"You should throw an IllegalArgumentException, as it will make it obvious to the programmer that he has done something invalid.  Developers are so used to seeing NPE thrown by the VM, that any programmer would not immediately realize his error, and would start looking around randomly, or worse, blame your code for being &#39;buggy&#39;.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>You should throw an IllegalArgumentException, as it will make it obvious to the programmer that he has done something invalid.  Developers are so used to seeing NPE thrown by the VM, that any programmer would not immediately realize his error, and would start looking around randomly, or worse, blame your code for being 'buggy'.</p>\n"},{"comments":[{"owner":{"account_id":4409801,"reputation":4386,"user_id":3593084,"accept_rate":40,"display_name":"Mr.Q"},"score":0,"creation_date":1551010804,"post_id":212119,"comment_id":96475498,"body_markdown":"No, There is just one right answer to this question and that is to use throw IllegalArgument exception when the input to the method is incorrect. Also in dev environment, you can use assertions to check input validity and throw proper exception ;)","body":"No, There is just one right answer to this question and that is to use throw IllegalArgument exception when the input to the method is incorrect. Also in dev environment, you can use assertions to check input validity and throw proper exception ;)"},{"owner":{"account_id":7121054,"reputation":5814,"user_id":5445670,"display_name":"Solomon Ucko"},"score":0,"creation_date":1563827296,"post_id":212119,"comment_id":100821666,"body_markdown":"@Mr.Q And I think that `NullPointerException` should be thrown: it&#39;s the convention that the JDK uses, and requires for interfaces, it&#39;s more specific (just like `IndexOutOfBoundsException`, etc.), etc.","body":"@Mr.Q And I think that <code>NullPointerException</code> should be thrown: it&#39;s the convention that the JDK uses, and requires for interfaces, it&#39;s more specific (just like <code>IndexOutOfBoundsException</code>, etc.), etc."},{"owner":{"account_id":1532595,"reputation":4652,"user_id":1429432,"accept_rate":68,"display_name":"Yousha Aleayoub"},"score":0,"creation_date":1574681709,"post_id":212119,"comment_id":104305563,"body_markdown":"kekekekkek... :D","body":"kekekekkek... :D"}],"tags":[],"owner":{"account_id":2146,"reputation":51871,"user_id":2959,"accept_rate":67,"display_name":"Steve McLeod"},"comment_count":3,"down_vote_count":3,"up_vote_count":25,"is_accepted":false,"score":22,"last_activity_date":1224250305,"creation_date":1224250305,"answer_id":212119,"question_id":3881,"body_markdown":"It&#39;s a &quot;Holy War&quot; style question. In others words, both alternatives are good, but people will have their preferences which they will defend to the death.\r\n","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>It's a \"Holy War\" style question. In others words, both alternatives are good, but people will have their preferences which they will defend to the death.</p>\n"},{"tags":[],"owner":{},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1225297226,"creation_date":1225297226,"answer_id":247447,"question_id":3881,"body_markdown":"In this case, IllegalArgumentException conveys clear information to the user using your API that the &quot;&lt;argument&gt; should not be null&quot;. As other forum users pointed out you could use NPE if you want to as long as you convey the right information to the user using your API. \r\n\r\nGaryF and tweakt dropped &quot;Effective Java&quot; (which I swear by) references which recommends using NPE. And looking at how other good APIs are constructed is the best way to see how to construct your API.\r\n\r\nAnother good example is to look at the Spring APIs. For example, org.springframework.beans.BeanUtils.instantiateClass(Constructor ctor, Object[] args) has a Assert.notNull(ctor, &quot;Constructor must not be null&quot;) line. org.springframework.util.Assert.notNull(Object object, String message) method checks to see if the argument (object) passed in is null and if it is it throws a new IllegalArgumentException(message) which is then caught in the org.springframework.beans.BeanUtils.instantiateClass(...) method.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>In this case, IllegalArgumentException conveys clear information to the user using your API that the \" should not be null\". As other forum users pointed out you could use NPE if you want to as long as you convey the right information to the user using your API. </p>\n\n<p>GaryF and tweakt dropped \"Effective Java\" (which I swear by) references which recommends using NPE. And looking at how other good APIs are constructed is the best way to see how to construct your API.</p>\n\n<p>Another good example is to look at the Spring APIs. For example, org.springframework.beans.BeanUtils.instantiateClass(Constructor ctor, Object[] args) has a Assert.notNull(ctor, \"Constructor must not be null\") line. org.springframework.util.Assert.notNull(Object object, String message) method checks to see if the argument (object) passed in is null and if it is it throws a new IllegalArgumentException(message) which is then caught in the org.springframework.beans.BeanUtils.instantiateClass(...) method.</p>\n"},{"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1243631155,"post_id":452516,"comment_id":736116,"body_markdown":"I have adopted the &quot;throw new IllegalArgumentException(&quot;foo == null&quot;)&quot; approach.  You need to log the variable name anyway (to be certain that you are looking at the right sttatement etc)","body":"I have adopted the &quot;throw new IllegalArgumentException(&quot;foo == null&quot;)&quot; approach.  You need to log the variable name anyway (to be certain that you are looking at the right sttatement etc)"}],"tags":[],"owner":{"account_id":22642,"reputation":1471,"user_id":56038,"display_name":"Jason Fritcher"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1232151196,"creation_date":1232151196,"answer_id":452516,"question_id":3881,"body_markdown":"I wanted to single out Null arguments from other illegal arguments, so I derived an exception from IAE named NullArgumentException. Without even needing to read the exception message, I know that a null argument was passed into a method and by reading the message, I find out which argument was null. I still catch the NullArgumentException with an IAE handler, but in my logs is where I can see the difference quickly.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>I wanted to single out Null arguments from other illegal arguments, so I derived an exception from IAE named NullArgumentException. Without even needing to read the exception message, I know that a null argument was passed into a method and by reading the message, I find out which argument was null. I still catch the NullArgumentException with an IAE handler, but in my logs is where I can see the difference quickly.</p>\n"},{"comments":[{"owner":{"account_id":40221,"reputation":32100,"user_id":116509,"accept_rate":100,"display_name":"artbristol"},"score":8,"creation_date":1379501246,"post_id":1072549,"comment_id":27846881,"body_markdown":"Note they removed it from commons-lang3: http://apache-commons.680414.n4.nabble.com/commons-lang3-NullArgumentException-missing-td4222254.html","body":"Note they removed it from commons-lang3: <a href=\"http://apache-commons.680414.n4.nabble.com/commons-lang3-NullArgumentException-missing-td4222254.html\" rel=\"nofollow noreferrer\">apache-commons.680414.n4.nabble.com/&hellip;</a>"}],"tags":[],"owner":{"account_id":44642,"reputation":187,"user_id":131137,"display_name":"Brian T. Grant"},"comment_count":1,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1246510034,"creation_date":1246510034,"answer_id":1072549,"question_id":3881,"body_markdown":"Apache Commons Lang has a [NullArgumentException][1] that does a number of the things discussed here: it extends IllegalArgumentException and its sole constructor takes the name of the argument which should have been non-null.\r\n\r\nWhile I feel that throwing something like a NullArgumentException or IllegalArgumentException more accurately describes the exceptional circumstances, my colleagues and I have chosen to defer to Bloch&#39;s advice on the subject.\r\n\r\n\r\n  [1]: http://commons.apache.org/lang/apidocs/org/apache/commons/lang/NullArgumentException.html","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>Apache Commons Lang has a <a href=\"http://commons.apache.org/lang/apidocs/org/apache/commons/lang/NullArgumentException.html\" rel=\"noreferrer\">NullArgumentException</a> that does a number of the things discussed here: it extends IllegalArgumentException and its sole constructor takes the name of the argument which should have been non-null.</p>\n\n<p>While I feel that throwing something like a NullArgumentException or IllegalArgumentException more accurately describes the exceptional circumstances, my colleagues and I have chosen to defer to Bloch's advice on the subject.</p>\n"},{"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1404700404,"post_id":1871889,"comment_id":38119293,"body_markdown":"The difference between most unchecked exceptions is just the name.","body":"The difference between most unchecked exceptions is just the name."}],"tags":[],"owner":{"account_id":24045,"reputation":5432,"user_id":60871,"display_name":"Christopher Smith"},"comment_count":1,"down_vote_count":1,"up_vote_count":50,"is_accepted":false,"score":49,"last_activity_date":1342014802,"creation_date":1260338872,"answer_id":1871889,"question_id":3881,"body_markdown":"Voted up Jason Cohen&#39;s argument because it was well presented. Let me dismember it step by step. ;-)\r\n\r\n- The [NPE JavaDoc][1] explicitly says, *&quot;other illegal uses of the null object&quot;*. If it was just limited to situations where the runtime encounters a null when it shouldn&#39;t, all such cases could be defined far more succinctly.\r\n\r\n- Can&#39;t help it if you assume the wrong thing, but assuming encapsulation is applied properly, you really shouldn&#39;t care or notice whether a null was dereferenced inappropriately vs. whether a method detected an inappropriate null and fired an exception off.\r\n\r\n- I&#39;d choose [NPE][2] over [IAE][3] for multiple reasons\r\n   * It is more specific about the nature of the illegal operation\r\n   * Logic that mistakenly allows nulls tends to be very different from logic that mistakenly allows illegal values. For example, if I&#39;m validating data entered by a user, if I get value that is unacceptable, the source of that error is with the end user of the application. If I get a null, that&#39;s programmer error.\r\n   * Invalid values can cause things like stack overflows, out of memory errors, parsing exceptions, etc. Indeed, most errors generally present, at some point, as an invalid value in some method call. For this reason I see IAE as actually the *MOST GENERAL* of all exceptions under RuntimeException.\r\n\r\n- Actually, other invalid arguments can result in all kinds of other exceptions. [UnknownHostException][4], [FileNotFoundException][5], a variety of syntax error exceptions, [IndexOutOfBoundsException][6], authentication failures, etc., etc.\r\n\r\nIn general, I feel NPE is much maligned because traditionally has been associated with code that fails to follow the [fail fast principle][7]. That, plus the JDK&#39;s failure to populate NPE&#39;s with a message string really has created a strong negative sentiment that isn&#39;t well founded. Indeed, the difference between NPE and IAE from a runtime perspective is strictly the name. From that perspective, the more precise you are with the name, the more clarity you give to the caller.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/\r\n  [3]: http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html\r\n  [4]: http://docs.oracle.com/javase/7/docs/api/java/net/UnknownHostException.html\r\n  [5]: http://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html\r\n  [6]: http://docs.oracle.com/javase/7/docs/api/java/lang/IndexOutOfBoundsException.html\r\n  [7]: http://www.martinfowler.com/ieeeSoftware/failFast.pdf","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>Voted up Jason Cohen's argument because it was well presented. Let me dismember it step by step. ;-)</p>\n\n<ul>\n<li><p>The <a href=\"http://docs.oracle.com/javase/7/docs/api/\" rel=\"noreferrer\">NPE JavaDoc</a> explicitly says, <em>\"other illegal uses of the null object\"</em>. If it was just limited to situations where the runtime encounters a null when it shouldn't, all such cases could be defined far more succinctly.</p></li>\n<li><p>Can't help it if you assume the wrong thing, but assuming encapsulation is applied properly, you really shouldn't care or notice whether a null was dereferenced inappropriately vs. whether a method detected an inappropriate null and fired an exception off.</p></li>\n<li><p>I'd choose <a href=\"http://docs.oracle.com/javase/7/docs/api/\" rel=\"noreferrer\">NPE</a> over <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html\" rel=\"noreferrer\">IAE</a> for multiple reasons</p>\n\n<ul>\n<li>It is more specific about the nature of the illegal operation</li>\n<li>Logic that mistakenly allows nulls tends to be very different from logic that mistakenly allows illegal values. For example, if I'm validating data entered by a user, if I get value that is unacceptable, the source of that error is with the end user of the application. If I get a null, that's programmer error.</li>\n<li>Invalid values can cause things like stack overflows, out of memory errors, parsing exceptions, etc. Indeed, most errors generally present, at some point, as an invalid value in some method call. For this reason I see IAE as actually the <em>MOST GENERAL</em> of all exceptions under RuntimeException.</li>\n</ul></li>\n<li><p>Actually, other invalid arguments can result in all kinds of other exceptions. <a href=\"http://docs.oracle.com/javase/7/docs/api/java/net/UnknownHostException.html\" rel=\"noreferrer\">UnknownHostException</a>, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html\" rel=\"noreferrer\">FileNotFoundException</a>, a variety of syntax error exceptions, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/IndexOutOfBoundsException.html\" rel=\"noreferrer\">IndexOutOfBoundsException</a>, authentication failures, etc., etc.</p></li>\n</ul>\n\n<p>In general, I feel NPE is much maligned because traditionally has been associated with code that fails to follow the <a href=\"http://www.martinfowler.com/ieeeSoftware/failFast.pdf\" rel=\"noreferrer\">fail fast principle</a>. That, plus the JDK's failure to populate NPE's with a message string really has created a strong negative sentiment that isn't well founded. Indeed, the difference between NPE and IAE from a runtime perspective is strictly the name. From that perspective, the more precise you are with the name, the more clarity you give to the caller.</p>\n"},{"comments":[{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":17,"creation_date":1350233758,"post_id":8196334,"comment_id":17445973,"body_markdown":"Guava `Preconditions.checkNotNull(arg)` also throws NPE.","body":"Guava <code>Preconditions.checkNotNull(arg)</code> also throws NPE."},{"owner":{"account_id":186752,"reputation":8053,"user_id":424353,"accept_rate":88,"display_name":"Bogdan Calmac"},"score":16,"creation_date":1362767879,"post_id":8196334,"comment_id":21595046,"body_markdown":"This isn&#39;t really adding more weight to NullPointerException for illegal null ARGUMENTS. Both the JDK requireNonNull() and Guava checkNotNull() can be called anywhere in the code, with any object. You could call them inside a loop for example. requireNotNull() and checkNotNull() could not possibly assume to be invoked with some method arguments and throw IllegalArgumentException. Note that Guava also has Preconditions.checkArgument() which does throw IllegalArgumentException.","body":"This isn&#39;t really adding more weight to NullPointerException for illegal null ARGUMENTS. Both the JDK requireNonNull() and Guava checkNotNull() can be called anywhere in the code, with any object. You could call them inside a loop for example. requireNotNull() and checkNotNull() could not possibly assume to be invoked with some method arguments and throw IllegalArgumentException. Note that Guava also has Preconditions.checkArgument() which does throw IllegalArgumentException."},{"owner":{"account_id":7006,"reputation":7395,"user_id":11961,"accept_rate":62,"display_name":"MB."},"score":2,"creation_date":1375972867,"post_id":8196334,"comment_id":26546553,"body_markdown":"A fair point by Bogdan, though I suspect the typical (and generally intended) use of requireNonNull is for argument checking.  If you needed to check that something wasn&#39;t null in a loop I&#39;d have thought an assertion would be the typical way.","body":"A fair point by Bogdan, though I suspect the typical (and generally intended) use of requireNonNull is for argument checking.  If you needed to check that something wasn&#39;t null in a loop I&#39;d have thought an assertion would be the typical way."},{"owner":{"account_id":571170,"reputation":634,"user_id":1473417,"display_name":"Richard Zschech"},"score":21,"creation_date":1422888161,"post_id":8196334,"comment_id":44914367,"body_markdown":"I think the JavaDoc of Object.requireNonNull() adds weight to the argument: &quot;This method is designed primarily for doing parameter validation in methods and constructors&quot;","body":"I think the JavaDoc of Object.requireNonNull() adds weight to the argument: &quot;This method is designed primarily for doing parameter validation in methods and constructors&quot;"},{"owner":{"account_id":50030,"reputation":61455,"user_id":149138,"accept_rate":56,"display_name":"BeeOnRope"},"score":0,"creation_date":1478128625,"post_id":8196334,"comment_id":68034429,"body_markdown":"Keep in mind that the performance argument in favor of implicit null checks is often invalid. The JIT is able to recognize user null checks and elide the following implied null check, and/or use the same set of optimizations on either type of null check. See [this wiki](https://wiki.openjdk.java.net/display/HotSpot/PerformanceTechniques) for more info, in particular: _User-written null checks are in most cases functionally identical to those inserted by the JVM._ Of course, if you are doing something fancier in your null like custom messages, this optimization  may not apply.","body":"Keep in mind that the performance argument in favor of implicit null checks is often invalid. The JIT is able to recognize user null checks and elide the following implied null check, and/or use the same set of optimizations on either type of null check. See <a href=\"https://wiki.openjdk.java.net/display/HotSpot/PerformanceTechniques\" rel=\"nofollow noreferrer\">this wiki</a> for more info, in particular: <i>User-written null checks are in most cases functionally identical to those inserted by the JVM.</i> Of course, if you are doing something fancier in your null like custom messages, this optimization  may not apply."}],"tags":[],"owner":{"account_id":7006,"reputation":7395,"user_id":11961,"accept_rate":62,"display_name":"MB."},"comment_count":5,"down_vote_count":2,"up_vote_count":154,"is_accepted":false,"score":152,"last_activity_date":1352552234,"creation_date":1321728133,"answer_id":8196334,"question_id":3881,"body_markdown":"I was all in favour of throwing `IllegalArgumentException` for null parameters, until today, when I noticed the `java.util.Objects.requireNonNull` method in Java 7.  With that method, instead of doing:\r\n\r\n    if (param == null) {\r\n        throw new IllegalArgumentException(&quot;param cannot be null.&quot;);\r\n    }\r\n\r\nyou can do:\r\n\r\n    Objects.requireNonNull(param);\r\n\r\nand it will throw a `NullPointerException` if the parameter you pass it is `null`.\r\n\r\nGiven that that method is right bang in the middle of `java.util` I take its existence to be a pretty strong indication that throwing `NullPointerException` is &quot;the Java way of doing things&quot;.\r\n\r\nI think I&#39;m decided at any rate.\r\n\r\nNote that the arguments about hard debugging are bogus because you can of course provide a message to `NullPointerException` saying what was null and why it shouldn&#39;t be null.  Just like with `IllegalArgumentException`.\r\n\r\nOne added advantage of `NullPointerException` is that, in highly performance critical code, you could dispense with an explicit check for null (and a `NullPointerException` with a friendly error message), and just rely on the `NullPointerException` you&#39;ll get automatically when you call a method on the null parameter.  Provided you call a method quickly (i.e. fail fast), then you have essentially the same effect, just not quite as user friendly for the developer.  Most times it&#39;s probably better to check explicitly and throw with a useful message to indicate which parameter was null, but it&#39;s nice to have the option of changing that if performance dictates without breaking the published contract of the method/constructor.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>I was all in favour of throwing <code>IllegalArgumentException</code> for null parameters, until today, when I noticed the <code>java.util.Objects.requireNonNull</code> method in Java 7.  With that method, instead of doing:</p>\n\n<pre><code>if (param == null) {\n    throw new IllegalArgumentException(\"param cannot be null.\");\n}\n</code></pre>\n\n<p>you can do:</p>\n\n<pre><code>Objects.requireNonNull(param);\n</code></pre>\n\n<p>and it will throw a <code>NullPointerException</code> if the parameter you pass it is <code>null</code>.</p>\n\n<p>Given that that method is right bang in the middle of <code>java.util</code> I take its existence to be a pretty strong indication that throwing <code>NullPointerException</code> is \"the Java way of doing things\".</p>\n\n<p>I think I'm decided at any rate.</p>\n\n<p>Note that the arguments about hard debugging are bogus because you can of course provide a message to <code>NullPointerException</code> saying what was null and why it shouldn't be null.  Just like with <code>IllegalArgumentException</code>.</p>\n\n<p>One added advantage of <code>NullPointerException</code> is that, in highly performance critical code, you could dispense with an explicit check for null (and a <code>NullPointerException</code> with a friendly error message), and just rely on the <code>NullPointerException</code> you'll get automatically when you call a method on the null parameter.  Provided you call a method quickly (i.e. fail fast), then you have essentially the same effect, just not quite as user friendly for the developer.  Most times it's probably better to check explicitly and throw with a useful message to indicate which parameter was null, but it's nice to have the option of changing that if performance dictates without breaking the published contract of the method/constructor.</p>\n"},{"comments":[{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":1,"creation_date":1391081519,"post_id":10195862,"comment_id":32376470,"body_markdown":"This would double the overhead for exception creation and wouldn&#39;t really help as catching `NullPointerException` would do nothing. The only thing which could help is `IllegalNullPointerArgumentException extends IllegalArgumentException, NullPointerException`, but we have no multiple inheritance.","body":"This would double the overhead for exception creation and wouldn&#39;t really help as catching <code>NullPointerException</code> would do nothing. The only thing which could help is <code>IllegalNullPointerArgumentException extends IllegalArgumentException, NullPointerException</code>, but we have no multiple inheritance."},{"owner":{"account_id":8732367,"reputation":156,"user_id":6531984,"display_name":"Sgene9"},"score":0,"creation_date":1516985205,"post_id":10195862,"comment_id":83924968,"body_markdown":"I believe that more specific exceptions should be wrapped by more general exceptions. NPE is for an expression while IAE is for a method. Since methods contain statements that contain expressions, IAE is more general.","body":"I believe that more specific exceptions should be wrapped by more general exceptions. NPE is for an expression while IAE is for a method. Since methods contain statements that contain expressions, IAE is more general."},{"owner":{"account_id":8732367,"reputation":156,"user_id":6531984,"display_name":"Sgene9"},"score":0,"creation_date":1516985608,"post_id":10195862,"comment_id":83925205,"body_markdown":"Regarding the overhead, I have no idea. But since the stacktraces would basically be identical except that the name of the exception changed in the middle, I think there shouldn&#39;t be too much overhead for double exceptions. If one is worried about the overhead, he can use &quot;if&quot; statements to return a null or -1 instead of throwing an exception.","body":"Regarding the overhead, I have no idea. But since the stacktraces would basically be identical except that the name of the exception changed in the middle, I think there shouldn&#39;t be too much overhead for double exceptions. If one is worried about the overhead, he can use &quot;if&quot; statements to return a null or -1 instead of throwing an exception."}],"tags":[],"owner":{"account_id":1413157,"reputation":97,"user_id":1339367,"display_name":"Luis Daniel Mesa Velasquez"},"comment_count":3,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1336868096,"creation_date":1334682909,"answer_id":10195862,"question_id":3881,"body_markdown":"the dichotomy... Are they non-overlapping? Only non-overlapping parts of a whole can make a dichotomy. As i see it:\r\n\r\n    throw new IllegalArgumentException(new NullPointerException(NULL_ARGUMENT_IN_METHOD_BAD_BOY_BAD));","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>the dichotomy... Are they non-overlapping? Only non-overlapping parts of a whole can make a dichotomy. As i see it:</p>\n\n<pre><code>throw new IllegalArgumentException(new NullPointerException(NULL_ARGUMENT_IN_METHOD_BAD_BOY_BAD));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1254459,"reputation":581,"user_id":1214236,"display_name":"Alowaniak"},"score":0,"creation_date":1467980854,"post_id":13311822,"comment_id":63952681,"body_markdown":"I don&#39;t see how the contains throws a NPE depending on an element inside the collection. Only reason a NPE is thrown (afaict) is if the collection itself is null (in which case the NPE is thrown because it tries to access it&#39;s iterator). This does however raise the question if null input should be checked for or if it should propagate through until it&#39;s tried to access.","body":"I don&#39;t see how the contains throws a NPE depending on an element inside the collection. Only reason a NPE is thrown (afaict) is if the collection itself is null (in which case the NPE is thrown because it tries to access it&#39;s iterator). This does however raise the question if null input should be checked for or if it should propagate through until it&#39;s tried to access."},{"owner":{"account_id":14008,"reputation":3782,"user_id":28465,"display_name":"Chris Povirk"},"score":2,"creation_date":1467987235,"post_id":13311822,"comment_id":63957138,"body_markdown":"`new TreeSet&lt;&gt;().containsAll(Arrays.asList((Object) null));` throws `NPE` because the `List` contains `null`.","body":"<code>new TreeSet&lt;&gt;().containsAll(Arrays.asList((Object) null));</code> throws <code>NPE</code> because the <code>List</code> contains <code>null</code>."},{"owner":{"account_id":1254459,"reputation":581,"user_id":1214236,"display_name":"Alowaniak"},"score":1,"creation_date":1468336582,"post_id":13311822,"comment_id":64080192,"body_markdown":"Ah indeed, TreeSet#contains throws NPE &quot;if the specified element is null and this set uses natural ordering, or its comparator does not permit null elements&quot;. Only looked at AbstractSet which does allow null, my bad.\nPersonally I find it weird it doesn&#39;t just return false though, since in that case there can&#39;t possibly be a null added.","body":"Ah indeed, TreeSet#contains throws NPE &quot;if the specified element is null and this set uses natural ordering, or its comparator does not permit null elements&quot;. Only looked at AbstractSet which does allow null, my bad. Personally I find it weird it doesn&#39;t just return false though, since in that case there can&#39;t possibly be a null added."}],"tags":[],"owner":{"account_id":14008,"reputation":3782,"user_id":28465,"display_name":"Chris Povirk"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1664898465,"creation_date":1352477918,"answer_id":13311822,"question_id":3881,"body_markdown":"Some collections assume that `null` is rejected using `NullPointerException` rather than `IllegalArgumentException`. For example, if you compare a set containing `null` to a set that rejects `null`, the first set will call `containsAll` on the other and catch its `NullPointerException` -- but not `IllegalArgumentException`. (I&#39;m looking at the implementation of `AbstractSet.equals`.)\r\n\r\nYou could reasonably argue that using unchecked exceptions in this way is an antipattern, that comparing collections that contain `null` to collections that can&#39;t contain `null` is a likely bug that really _should_ produce an exception, or that putting `null` in a collection at all is a bad idea. Nevertheless, unless you&#39;re willing to say that `equals` should throw an exception in such a case, you&#39;re stuck remembering that `NullPointerException` is required in certain circumstances but not in others. (&quot;IAE before NPE except after &#39;c&#39;...&quot;)\r\n\r\nSomewhat similarly, build tools may insert null checks _automatically_. Notably, Kotlin&#39;s compiler [does this](https://kotlinlang.org/docs/java-interop.html#null-safety-and-platform-types) when passing a possibly null value to a Java API. And when a check fails, the result is a `NullPointerException`. So, to give consistent behavior to any Kotlin users and Java users that you have, you&#39;d need to use `NullPointerException`.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>Some collections assume that <code>null</code> is rejected using <code>NullPointerException</code> rather than <code>IllegalArgumentException</code>. For example, if you compare a set containing <code>null</code> to a set that rejects <code>null</code>, the first set will call <code>containsAll</code> on the other and catch its <code>NullPointerException</code> -- but not <code>IllegalArgumentException</code>. (I'm looking at the implementation of <code>AbstractSet.equals</code>.)</p>\n<p>You could reasonably argue that using unchecked exceptions in this way is an antipattern, that comparing collections that contain <code>null</code> to collections that can't contain <code>null</code> is a likely bug that really <em>should</em> produce an exception, or that putting <code>null</code> in a collection at all is a bad idea. Nevertheless, unless you're willing to say that <code>equals</code> should throw an exception in such a case, you're stuck remembering that <code>NullPointerException</code> is required in certain circumstances but not in others. (&quot;IAE before NPE except after 'c'...&quot;)</p>\n<p>Somewhat similarly, build tools may insert null checks <em>automatically</em>. Notably, Kotlin's compiler <a href=\"https://kotlinlang.org/docs/java-interop.html#null-safety-and-platform-types\" rel=\"nofollow noreferrer\">does this</a> when passing a possibly null value to a Java API. And when a check fails, the result is a <code>NullPointerException</code>. So, to give consistent behavior to any Kotlin users and Java users that you have, you'd need to use <code>NullPointerException</code>.</p>\n"},{"tags":[],"owner":{"account_id":14008,"reputation":3782,"user_id":28465,"display_name":"Chris Povirk"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1352478607,"creation_date":1352478607,"answer_id":13312050,"question_id":3881,"body_markdown":"Throwing an exception that&#39;s exclusive to `null` arguments (whether `NullPointerException` or a custom type) makes automated `null` testing more reliable. This automated testing can be done with reflection and a set of default values, as in [Guava][1]&#39;s [`NullPointerTester`][2]. For example, `NullPointerTester` would attempt to call the following method...\r\n\r\n    Foo(String string, List&lt;?&gt; list) {\r\n      checkArgument(string.length() &gt; 0);\r\n      // missing null check for list!\r\n      this.string = string;\r\n      this.list = list;\r\n    }\r\n\r\n...with two lists of arguments: `&quot;&quot;, null` and `null, ImmutableList.of()`. It would test that each of these calls throws the expected `NullPointerException`. For this implementation, passing a `null` list does _not_ produce `NullPointerException`. It does, however, happen to produce an `IllegalArgumentException` because `NullPointerTester` happens to use a default string of `&quot;&quot;`. If `NullPointerTester` expects only `NullPointerException` for `null` values, it catches the bug. If it expects `IllegalArgumentException`, it misses it.\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/\r\n  [2]: http://code.google.com/p/guava-libraries/source/browse/guava-testlib/src/com/google/common/testing/NullPointerTester.java","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>Throwing an exception that's exclusive to <code>null</code> arguments (whether <code>NullPointerException</code> or a custom type) makes automated <code>null</code> testing more reliable. This automated testing can be done with reflection and a set of default values, as in <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">Guava</a>'s <a href=\"http://code.google.com/p/guava-libraries/source/browse/guava-testlib/src/com/google/common/testing/NullPointerTester.java\" rel=\"noreferrer\"><code>NullPointerTester</code></a>. For example, <code>NullPointerTester</code> would attempt to call the following method...</p>\n\n<pre><code>Foo(String string, List&lt;?&gt; list) {\n  checkArgument(string.length() &gt; 0);\n  // missing null check for list!\n  this.string = string;\n  this.list = list;\n}\n</code></pre>\n\n<p>...with two lists of arguments: <code>\"\", null</code> and <code>null, ImmutableList.of()</code>. It would test that each of these calls throws the expected <code>NullPointerException</code>. For this implementation, passing a <code>null</code> list does <em>not</em> produce <code>NullPointerException</code>. It does, however, happen to produce an <code>IllegalArgumentException</code> because <code>NullPointerTester</code> happens to use a default string of <code>\"\"</code>. If <code>NullPointerTester</code> expects only <code>NullPointerException</code> for <code>null</code> values, it catches the bug. If it expects <code>IllegalArgumentException</code>, it misses it.</p>\n"},{"tags":[],"owner":{"account_id":2193760,"reputation":372,"user_id":1940048,"display_name":"Sascha Baumeister"},"comment_count":0,"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1356975897,"creation_date":1356975897,"answer_id":14104551,"question_id":3881,"body_markdown":"Actually, the question of throwing IllegalArgumentException or NullPointerException is in my humble view only a &quot;holy war&quot; for a minority with an incomlete understanding of exception handling in Java. In general, the rules are simple, and as follows:\r\n\r\n- argument constraint violations must be indicated as fast as possible (-&gt; fast fail), in order to avoid illegal states which are much harder to debug\r\n- in case of an invalid null pointer for whatever reason, throw NullPointerException\r\n- in case of an illegal array/collection index, throw ArrayIndexOutOfBounds\r\n- in case of a negative array/collection size, throw NegativeArraySizeException\r\n- in case of an illegal argument that is not covered by the above, and for which you don&#39;t have another more specific exception type, throw IllegalArgumentException as a wastebasket\r\n- on the other hand, in case of a constraint violation WITHIN A FIELD that could not be avoided by fast fail for some valid reason, catch and rethrow as IllegalStateException or a more specific checked exception. Never let pass the original NullPointerException, ArrayIndexOutOfBounds, etc in this case!\r\n\r\nThere are at least three very good reasons against the case of mapping all kinds of argument constraint violations to IllegalArgumentException, with the third probably being so severe as to mark the practice bad style:\r\n\r\n(1) A programmer cannot a safely assume that all cases of argument constraint violations result in IllegalArgumentException, because the large majority of standard classes use this exception rather as a wastebasket if there is no more specific kind of exception available. Trying to map all cases of argument constraint violations to IllegalArgumentException in your API only leads to programmer frustration using your classes, as the standard libraries mostly follow different rules that violate yours, and most of your API users will use them as well!\r\n\r\n(2) Mapping the exceptions actually results in a different kind of anomaly, caused by single inheritance: All Java exceptions are classes, and therefore support single inheritance only. Therefore, there is no way to create an exception that is truly say both a NullPointerException and an IllegalArgumentException, as subclasses can only inherit from one or the other. Throwing an IllegalArgumentException in case of a null argument therefore makes it harder for API users to distinguish between problems whenever a program tries to programmatically correct the problem, for example by feeding default values into a call repeat!\r\n\r\n(3) Mapping actually creates the danger of bug masking: In order to map argument constraint violations into IllegalArgumentException, you&#39;ll need to code an outer try-catch within every method that has any constrained arguments. However, simply catching RuntimeException in this catch block is out of the question, because that risks mapping documented RuntimeExceptions thrown by libery methods used within yours into IllegalArgumentException, even if they are no caused by argument constraint violations. So you need to be very specific, but even that effort doesn&#39;t protect you from the case that you accidentally map an undocumented runtime exception of another API (i.e. a bug) into an IllegalArgumentException of your API. Even the most careful mapping therefore risks masking programming errors of other library makers as argument constraint violations of your method&#39;s users, which is simply hillareous behavior!\r\n\r\nWith the standard practice on the other hand, the rules stay simple, and exception causes stay unmasked and specific. For the method caller, the rules are easy as well:\r\n- if you encounter a documented runtime exception of any kind because you passed an illegal value, either repeat the call with a default (for this specific exceptions are neccessary), or correct your code\r\n- if on the other hand you enccounter a runtime exception that is not documented to happen for a given set of arguments, file a bug report to the method&#39;s makers to ensure that either their code or their documentation is fixed.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>Actually, the question of throwing IllegalArgumentException or NullPointerException is in my humble view only a \"holy war\" for a minority with an incomlete understanding of exception handling in Java. In general, the rules are simple, and as follows:</p>\n\n<ul>\n<li>argument constraint violations must be indicated as fast as possible (-> fast fail), in order to avoid illegal states which are much harder to debug</li>\n<li>in case of an invalid null pointer for whatever reason, throw NullPointerException</li>\n<li>in case of an illegal array/collection index, throw ArrayIndexOutOfBounds</li>\n<li>in case of a negative array/collection size, throw NegativeArraySizeException</li>\n<li>in case of an illegal argument that is not covered by the above, and for which you don't have another more specific exception type, throw IllegalArgumentException as a wastebasket</li>\n<li>on the other hand, in case of a constraint violation WITHIN A FIELD that could not be avoided by fast fail for some valid reason, catch and rethrow as IllegalStateException or a more specific checked exception. Never let pass the original NullPointerException, ArrayIndexOutOfBounds, etc in this case!</li>\n</ul>\n\n<p>There are at least three very good reasons against the case of mapping all kinds of argument constraint violations to IllegalArgumentException, with the third probably being so severe as to mark the practice bad style:</p>\n\n<p>(1) A programmer cannot a safely assume that all cases of argument constraint violations result in IllegalArgumentException, because the large majority of standard classes use this exception rather as a wastebasket if there is no more specific kind of exception available. Trying to map all cases of argument constraint violations to IllegalArgumentException in your API only leads to programmer frustration using your classes, as the standard libraries mostly follow different rules that violate yours, and most of your API users will use them as well!</p>\n\n<p>(2) Mapping the exceptions actually results in a different kind of anomaly, caused by single inheritance: All Java exceptions are classes, and therefore support single inheritance only. Therefore, there is no way to create an exception that is truly say both a NullPointerException and an IllegalArgumentException, as subclasses can only inherit from one or the other. Throwing an IllegalArgumentException in case of a null argument therefore makes it harder for API users to distinguish between problems whenever a program tries to programmatically correct the problem, for example by feeding default values into a call repeat!</p>\n\n<p>(3) Mapping actually creates the danger of bug masking: In order to map argument constraint violations into IllegalArgumentException, you'll need to code an outer try-catch within every method that has any constrained arguments. However, simply catching RuntimeException in this catch block is out of the question, because that risks mapping documented RuntimeExceptions thrown by libery methods used within yours into IllegalArgumentException, even if they are no caused by argument constraint violations. So you need to be very specific, but even that effort doesn't protect you from the case that you accidentally map an undocumented runtime exception of another API (i.e. a bug) into an IllegalArgumentException of your API. Even the most careful mapping therefore risks masking programming errors of other library makers as argument constraint violations of your method's users, which is simply hillareous behavior!</p>\n\n<p>With the standard practice on the other hand, the rules stay simple, and exception causes stay unmasked and specific. For the method caller, the rules are easy as well:\n- if you encounter a documented runtime exception of any kind because you passed an illegal value, either repeat the call with a default (for this specific exceptions are neccessary), or correct your code\n- if on the other hand you enccounter a runtime exception that is not documented to happen for a given set of arguments, file a bug report to the method's makers to ensure that either their code or their documentation is fixed.</p>\n"},{"tags":[],"owner":{"account_id":4774187,"reputation":71,"user_id":4586938,"display_name":"leo"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1433508380,"creation_date":1433497393,"answer_id":30663317,"question_id":3881,"body_markdown":"According to your scenario, `IllegalArgumentException` is the best pick, because `null` is not a valid value for your property.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>According to your scenario, <code>IllegalArgumentException</code> is the best pick, because <code>null</code> is not a valid value for your property.</p>\n"},{"tags":[],"owner":{"account_id":6512317,"reputation":582,"user_id":5039151,"display_name":"Nitesh Soomani"},"comment_count":0,"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1574681909,"creation_date":1435067481,"answer_id":31004679,"question_id":3881,"body_markdown":"`NullPointerException` thrown when attempting to access an object with a reference variable whose current value is `null`.\r\n\r\n`IllegalArgumentException` thrown when a method receives an argument formatted differently than the method expects.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p><code>NullPointerException</code> thrown when attempting to access an object with a reference variable whose current value is <code>null</code>.</p>\n\n<p><code>IllegalArgumentException</code> thrown when a method receives an argument formatted differently than the method expects.</p>\n"},{"tags":[],"owner":{"account_id":9032469,"reputation":17,"user_id":6729598,"display_name":"vijay"},"comment_count":0,"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1471509606,"creation_date":1471509606,"answer_id":39013552,"question_id":3881,"body_markdown":"Ideally runtime exceptions should not be thrown. A checked exception(business exception) should be created for your scenario. Because if either of these exception is thrown and logged, it misguides the developer while going through the logs. Instead business exceptions do not create that panic and usually ignored while troubleshooting logs.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>Ideally runtime exceptions should not be thrown. A checked exception(business exception) should be created for your scenario. Because if either of these exception is thrown and logged, it misguides the developer while going through the logs. Instead business exceptions do not create that panic and usually ignored while troubleshooting logs.</p>\n"},{"tags":[],"owner":{"account_id":6955110,"reputation":493,"user_id":5336361,"display_name":"Ben Seidel"},"comment_count":0,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1532531205,"creation_date":1474625232,"answer_id":39658107,"question_id":3881,"body_markdown":"As a subjective question this should be closed, but as it&#39;s still open:\r\n\r\nThis is part of the internal policy used at my previous place of employment and it worked really well. This is all from memory so I can&#39;t remember the exact wording. It&#39;s worth noting that they did not use checked exceptions, but that is beyond the scope of the question. The unchecked exceptions they did use fell into 3 main categories.\r\n\r\nNullPointerException: Do not throw intentionally. NPEs are to be thrown only by the VM when dereferencing a null reference. All possible effort is to be made to ensure that these are never thrown. @Nullable and @NotNull should be used in conjunction with code analysis tools to find these errors.\r\n\r\nIllegalArgumentException: Thrown when an argument to a function does not conform to the public documentation, such that the error can be identified and described in terms of the arguments passed in. The OP&#39;s situation would fall into this category.\r\n\r\nIllegalStateException: Thrown when a function is called and its arguments are either unexpected at the time they are passed or incompatible with the state of the object the method is a member of.\r\n\r\nFor example, there were two internal versions of the IndexOutOfBoundsException used in things that had a length. One a sub-class of IllegalStateException, used if the index was larger than the length. The other a subclass of IllegalArgumentException, used if the index was negative. This was because you could add more items to the object and the argument would be valid, while a negative number is never valid.\r\n\r\nAs I said, this system works really well, and it took someone to explain why the distinction is there: &quot;Depending on the type of error it is quite straightforward for you to figure out what to do. Even if you can&#39;t actually figure out what went wrong you can figure out where to catch that error and create additional debugging information.&quot;\r\n\r\nNullPointerException: Handle the Null case or put in an assertion so that the NPE is not thrown. If you put in an assertion is just one of the other two types. If possible, continue debugging as if the assertion was there in the first place.\r\n\r\nIllegalArgumentException: you have something wrong at your call site. If the values being passed in are from another function, find out why you are receiving an incorrect value. If you are passing in one of your arguments propagate the error checks up the call stack until you find the function that is not returning what you expect.\r\n\r\nIllegalStateException: You have not called your functions in the correct order. If you are using one of your arguments, check them and throw an IllegalArgumentException describing the issue. You can then propagate the cheeks up against the stack until you find the issue.\r\n\r\nAnyway, his point was that you can only copy the IllegalArgumentAssertions up the stack. There is no way for you to propagate the IllegalStateExceptions or NullPointerExceptions up the stack because they had something to do with your function.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>As a subjective question this should be closed, but as it's still open:</p>\n\n<p>This is part of the internal policy used at my previous place of employment and it worked really well. This is all from memory so I can't remember the exact wording. It's worth noting that they did not use checked exceptions, but that is beyond the scope of the question. The unchecked exceptions they did use fell into 3 main categories.</p>\n\n<p>NullPointerException: Do not throw intentionally. NPEs are to be thrown only by the VM when dereferencing a null reference. All possible effort is to be made to ensure that these are never thrown. @Nullable and @NotNull should be used in conjunction with code analysis tools to find these errors.</p>\n\n<p>IllegalArgumentException: Thrown when an argument to a function does not conform to the public documentation, such that the error can be identified and described in terms of the arguments passed in. The OP's situation would fall into this category.</p>\n\n<p>IllegalStateException: Thrown when a function is called and its arguments are either unexpected at the time they are passed or incompatible with the state of the object the method is a member of.</p>\n\n<p>For example, there were two internal versions of the IndexOutOfBoundsException used in things that had a length. One a sub-class of IllegalStateException, used if the index was larger than the length. The other a subclass of IllegalArgumentException, used if the index was negative. This was because you could add more items to the object and the argument would be valid, while a negative number is never valid.</p>\n\n<p>As I said, this system works really well, and it took someone to explain why the distinction is there: \"Depending on the type of error it is quite straightforward for you to figure out what to do. Even if you can't actually figure out what went wrong you can figure out where to catch that error and create additional debugging information.\"</p>\n\n<p>NullPointerException: Handle the Null case or put in an assertion so that the NPE is not thrown. If you put in an assertion is just one of the other two types. If possible, continue debugging as if the assertion was there in the first place.</p>\n\n<p>IllegalArgumentException: you have something wrong at your call site. If the values being passed in are from another function, find out why you are receiving an incorrect value. If you are passing in one of your arguments propagate the error checks up the call stack until you find the function that is not returning what you expect.</p>\n\n<p>IllegalStateException: You have not called your functions in the correct order. If you are using one of your arguments, check them and throw an IllegalArgumentException describing the issue. You can then propagate the cheeks up against the stack until you find the issue.</p>\n\n<p>Anyway, his point was that you can only copy the IllegalArgumentAssertions up the stack. There is no way for you to propagate the IllegalStateExceptions or NullPointerExceptions up the stack because they had something to do with your function.</p>\n"}],"owner":{"account_id":103,"reputation":44354,"user_id":122,"accept_rate":79,"display_name":"Mike Stone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202059,"favorite_count":0,"down_vote_count":3,"up_vote_count":577,"closed_date":1474637671,"accepted_answer_id":3886,"answer_count":26,"score":574,"last_activity_date":1664898465,"creation_date":1218050790,"question_id":3881,"body_markdown":"I have a simple setter method for a property and `null` is not appropriate for this particular property. I have always been torn in this situation: should I throw an [`IllegalArgumentException`][1], or a [`NullPointerException`][2]? From the javadocs, both seem appropriate. Is there some kind of an understood standard?  Or is this just one of those things that you should do whatever you prefer and both are really correct?\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>I have a simple setter method for a property and <code>null</code> is not appropriate for this particular property. I have always been torn in this situation: should I throw an <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html\" rel=\"noreferrer\"><code>IllegalArgumentException</code></a>, or a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html\" rel=\"noreferrer\"><code>NullPointerException</code></a>? From the javadocs, both seem appropriate. Is there some kind of an understood standard?  Or is this just one of those things that you should do whatever you prefer and both are really correct?</p>\n"},{"tags":["java","python","json","csv"],"comments":[{"owner":{"account_id":2580320,"reputation":1090,"user_id":2237151,"display_name":"Pietro"},"score":0,"creation_date":1616664220,"post_id":66796180,"comment_id":118075174,"body_markdown":"Do you know the structure of the object you want to build or do you need to extract that from the headers? In any case I don&#39;t think there is a library for it, but it should be easy to build each object parsing the file line by line.","body":"Do you know the structure of the object you want to build or do you need to extract that from the headers? In any case I don&#39;t think there is a library for it, but it should be easy to build each object parsing the file line by line."}],"answers":[{"comments":[{"owner":{"account_id":4974350,"reputation":3936,"user_id":4001177,"display_name":"Golden Lion"},"score":0,"creation_date":1616691463,"post_id":66796489,"comment_id":118089053,"body_markdown":"#in python   myDct={ &quot;attrib1&quot;:{ &quot;x&quot;:1, &quot;y&quot;:2, &quot;z&quot;:[{&quot;p&quot;:100,&quot;c&quot;:200},{&quot;p&quot;:500,&quot;c&quot;:600}] }, &quot;attrib2&quot;:{&quot;R&quot;:222,&quot;K&quot;:320}, &quot;attrib3&quot;:&quot;hello&quot; }\nfor key,value in myDct.items():\n    print(key,value)","body":"#in python   myDct={ &quot;attrib1&quot;:{ &quot;x&quot;:1, &quot;y&quot;:2, &quot;z&quot;:[{&quot;p&quot;:100,&quot;c&quot;:200},{&quot;p&quot;:500,&quot;c&quot;:600}] }, &quot;attrib2&quot;:{&quot;R&quot;:222,&quot;K&quot;:320}, &quot;attrib3&quot;:&quot;hello&quot; } for key,value in myDct.items():     print(key,value)"}],"tags":[],"owner":{"account_id":17914743,"reputation":11,"user_id":13015971,"display_name":"Tarun Kumar"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616708396,"creation_date":1616664379,"answer_id":66796489,"question_id":66796180,"body_markdown":"    JSONObject jsonObject = new JSONObject(&quot;{\r\n    &quot;attrib1&quot;:{\r\n               &quot;x&quot;:1,\r\n               &quot;y&quot;:2,\r\n               &quot;z&quot;:[{&quot;p&quot;:100,&quot;c&quot;:200},{&quot;p&quot;:500,&quot;c&quot;:600}]\r\n              },\r\n    &quot;attrib2&quot;:{&quot;R&quot;:222,&quot;K&quot;:320},\r\n    &quot;attrib3&quot;:&quot;hello&quot;\r\n    }&quot;);\r\n\r\nJust try and out.\r\nIt may help","title":"how to convert a CSV into JSON using Python Or Java. The csv is representation of a nested JSON (Containing array of json objects and nested objects)","body":"<pre><code>JSONObject jsonObject = new JSONObject(&quot;{\n&quot;attrib1&quot;:{\n           &quot;x&quot;:1,\n           &quot;y&quot;:2,\n           &quot;z&quot;:[{&quot;p&quot;:100,&quot;c&quot;:200},{&quot;p&quot;:500,&quot;c&quot;:600}]\n          },\n&quot;attrib2&quot;:{&quot;R&quot;:222,&quot;K&quot;:320},\n&quot;attrib3&quot;:&quot;hello&quot;\n}&quot;);\n</code></pre>\n<p>Just try and out.\nIt may help</p>\n"},{"tags":[],"owner":{"account_id":11597557,"reputation":469,"user_id":8495832,"display_name":"SYED MUSTAFA HUSSAIN"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616665873,"creation_date":1616665873,"answer_id":66796902,"question_id":66796180,"body_markdown":"First you iterate the `key` Then similarly iterate `value` and save into csv\r\n\r\n\r\n      String eol = System.getProperty(&quot;line.separator&quot;);\r\n                    try(Writer writer = new FileWriter(&quot;C:\\\\Users\\\\m.hussain\\\\Desktop\\\\CSV\\\\testing.csv&quot;))\r\n                    {\r\n                        for (Map&lt;String, Object&gt; map : objectRecords)\r\n                        {\r\n                            for (Map.Entry&lt;String, Object&gt; entry : map.entrySet())\r\n                            {\r\n                                writer.append(entry.getKey())\r\n                                        .append(&#39;,&#39;);\r\n                            }\r\n                            break;\r\n                        }\r\n                        writer.append(eol);\r\n                        for (Map&lt;String, Object&gt; map : objectRecords)\r\n                        {\r\n                            for (Map.Entry&lt;String, Object&gt; entry : map.entrySet())\r\n                            {\r\n                                JSONObject jsonObject;\r\n                                try\r\n                                {\r\n                                    jsonObject = new JSONObject(String.valueOf(entry.getValue()));\r\n                                    writer.append(jsonObject.getString(&quot;value&quot;));\r\n                                }\r\n                                catch (Exception e)\r\n                                {\r\n                                    writer.append(String.valueOf(entry.getValue()));\r\n                                }\r\n                                writer.append(&#39;,&#39;);\r\n                            }\r\n                            writer.append(eol);\r\n                        }","title":"how to convert a CSV into JSON using Python Or Java. The csv is representation of a nested JSON (Containing array of json objects and nested objects)","body":"<p>First you iterate the <code>key</code> Then similarly iterate <code>value</code> and save into csv</p>\n<pre><code>  String eol = System.getProperty(&quot;line.separator&quot;);\n                try(Writer writer = new FileWriter(&quot;C:\\\\Users\\\\m.hussain\\\\Desktop\\\\CSV\\\\testing.csv&quot;))\n                {\n                    for (Map&lt;String, Object&gt; map : objectRecords)\n                    {\n                        for (Map.Entry&lt;String, Object&gt; entry : map.entrySet())\n                        {\n                            writer.append(entry.getKey())\n                                    .append(',');\n                        }\n                        break;\n                    }\n                    writer.append(eol);\n                    for (Map&lt;String, Object&gt; map : objectRecords)\n                    {\n                        for (Map.Entry&lt;String, Object&gt; entry : map.entrySet())\n                        {\n                            JSONObject jsonObject;\n                            try\n                            {\n                                jsonObject = new JSONObject(String.valueOf(entry.getValue()));\n                                writer.append(jsonObject.getString(&quot;value&quot;));\n                            }\n                            catch (Exception e)\n                            {\n                                writer.append(String.valueOf(entry.getValue()));\n                            }\n                            writer.append(',');\n                        }\n                        writer.append(eol);\n                    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25095701,"reputation":11,"user_id":18946901,"display_name":"LeoTaylor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651914526,"creation_date":1651914526,"answer_id":72151056,"question_id":66796180,"body_markdown":"The first row of your CSV contains field names (which uses the underline to show the hierarchical relationship) and detail data starts from the second line, and you need to transform the CSV to JSON format. Here the difficulty is dynamic parsing. It will involve grouping, recursion, loop, conditional judgment and string concatenation. The code will be rather lengthy if you try to do this in Java.\r\n\r\nTry using SPL, the open-source Java package, to do this. It is easy and five lines of code are enough:\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/i2inE.png\r\nSPL offers JDBC driver to be invoked by Java. Just store the above SPL script as recurse.splx and invoke it in a Java application as you call a stored procedure:\r\n```\r\n…\r\nClass.forName(&quot;com.esproc.jdbc.InternalDriver&quot;);\r\ncon= DriverManager.getConnection(&quot;jdbc:esproc:local://&quot;);\r\nst = con.prepareCall(&quot;call recurse()&quot;);\r\nst.execute();\r\n…\r\n```","title":"how to convert a CSV into JSON using Python Or Java. The csv is representation of a nested JSON (Containing array of json objects and nested objects)","body":"<p>The first row of your CSV contains field names (which uses the underline to show the hierarchical relationship) and detail data starts from the second line, and you need to transform the CSV to JSON format. Here the difficulty is dynamic parsing. It will involve grouping, recursion, loop, conditional judgment and string concatenation. The code will be rather lengthy if you try to do this in Java.</p>\n<p>Try using SPL, the open-source Java package, to do this. It is easy and five lines of code are enough:\n<a href=\"https://i.stack.imgur.com/i2inE.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>SPL offers JDBC driver to be invoked by Java. Just store the above SPL script as recurse.splx and invoke it in a Java application as you call a stored procedure:</p>\n<pre><code>…\nClass.forName(&quot;com.esproc.jdbc.InternalDriver&quot;);\ncon= DriverManager.getConnection(&quot;jdbc:esproc:local://&quot;);\nst = con.prepareCall(&quot;call recurse()&quot;);\nst.execute();\n…\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664898274,"creation_date":1664898274,"answer_id":73950403,"question_id":66796180,"body_markdown":"Use library _Josson_ to build the JSON structure.\r\n\r\nFirst, split the csv file header and content, and build a Map. Then use function `unflatten()` to do transformation.\r\n\r\n    LinkedHashMap&lt;String, Object&gt; csv = new LinkedHashMap&lt;&gt;();\r\n    csv.put(&quot;attrib1_x&quot;, 1);\r\n    csv.put(&quot;attrib1_y&quot;, 2);\r\n    csv.put(&quot;attrib1_z_0_p&quot;, 100);\r\n    csv.put(&quot;attrib1_z_0_c&quot;, 200);\r\n    csv.put(&quot;attrib1_z_1_p&quot;, 500);\r\n    csv.put(&quot;attrib1_z_1_c&quot;, 600);\r\n    csv.put(&quot;attrib2_R&quot;, 222);\r\n    csv.put(&quot;attrib2_K&quot;, 320);\r\n    csv.put(&quot;attrib3&quot;, &quot;hello&quot;);\r\n\r\n    Josson josson = Josson.from(csv);\r\n    System.out.println(josson.getNode().toPrettyString()); // before unflatten\r\n\r\n    JsonNode node = josson.getNode(&quot;unflatten(&#39;_&#39;)&quot;);\r\n    System.out.println(node.toPrettyString()); // after unflatten\r\n\r\nOutput: before unflatten\r\n\r\n    {\r\n      &quot;attrib1_x&quot; : 1,\r\n      &quot;attrib1_y&quot; : 2,\r\n      &quot;attrib1_z_0_p&quot; : 100,\r\n      &quot;attrib1_z_0_c&quot; : 200,\r\n      &quot;attrib1_z_1_p&quot; : 500,\r\n      &quot;attrib1_z_1_c&quot; : 600,\r\n      &quot;attrib2_R&quot; : 222,\r\n      &quot;attrib2_K&quot; : 320,\r\n      &quot;attrib3&quot; : &quot;hello&quot;\r\n    }\r\n    \r\nOutput: after unflatten\r\n\r\n    {\r\n      &quot;attrib1&quot; : {\r\n        &quot;x&quot; : 1,\r\n        &quot;y&quot; : 2,\r\n        &quot;z&quot; : [ {\r\n          &quot;p&quot; : 100,\r\n          &quot;c&quot; : 200\r\n        }, {\r\n          &quot;p&quot; : 500,\r\n          &quot;c&quot; : 600\r\n        } ]\r\n      },\r\n      &quot;attrib2&quot; : {\r\n        &quot;R&quot; : 222,\r\n        &quot;K&quot; : 320\r\n      },\r\n      &quot;attrib3&quot; : &quot;hello&quot;\r\n    }","title":"how to convert a CSV into JSON using Python Or Java. The csv is representation of a nested JSON (Containing array of json objects and nested objects)","body":"<p>Use library <em>Josson</em> to build the JSON structure.</p>\n<p>First, split the csv file header and content, and build a Map. Then use function <code>unflatten()</code> to do transformation.</p>\n<pre><code>LinkedHashMap&lt;String, Object&gt; csv = new LinkedHashMap&lt;&gt;();\ncsv.put(&quot;attrib1_x&quot;, 1);\ncsv.put(&quot;attrib1_y&quot;, 2);\ncsv.put(&quot;attrib1_z_0_p&quot;, 100);\ncsv.put(&quot;attrib1_z_0_c&quot;, 200);\ncsv.put(&quot;attrib1_z_1_p&quot;, 500);\ncsv.put(&quot;attrib1_z_1_c&quot;, 600);\ncsv.put(&quot;attrib2_R&quot;, 222);\ncsv.put(&quot;attrib2_K&quot;, 320);\ncsv.put(&quot;attrib3&quot;, &quot;hello&quot;);\n\nJosson josson = Josson.from(csv);\nSystem.out.println(josson.getNode().toPrettyString()); // before unflatten\n\nJsonNode node = josson.getNode(&quot;unflatten('_')&quot;);\nSystem.out.println(node.toPrettyString()); // after unflatten\n</code></pre>\n<p>Output: before unflatten</p>\n<pre><code>{\n  &quot;attrib1_x&quot; : 1,\n  &quot;attrib1_y&quot; : 2,\n  &quot;attrib1_z_0_p&quot; : 100,\n  &quot;attrib1_z_0_c&quot; : 200,\n  &quot;attrib1_z_1_p&quot; : 500,\n  &quot;attrib1_z_1_c&quot; : 600,\n  &quot;attrib2_R&quot; : 222,\n  &quot;attrib2_K&quot; : 320,\n  &quot;attrib3&quot; : &quot;hello&quot;\n}\n</code></pre>\n<p>Output: after unflatten</p>\n<pre><code>{\n  &quot;attrib1&quot; : {\n    &quot;x&quot; : 1,\n    &quot;y&quot; : 2,\n    &quot;z&quot; : [ {\n      &quot;p&quot; : 100,\n      &quot;c&quot; : 200\n    }, {\n      &quot;p&quot; : 500,\n      &quot;c&quot; : 600\n    } ]\n  },\n  &quot;attrib2&quot; : {\n    &quot;R&quot; : 222,\n    &quot;K&quot; : 320\n  },\n  &quot;attrib3&quot; : &quot;hello&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":20716598,"reputation":11,"user_id":15211865,"display_name":"rr1_Infinity"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":4,"score":0,"last_activity_date":1664898274,"creation_date":1616663180,"question_id":66796180,"body_markdown":"I get a csv file like :\r\n\r\n\r\nattrib1_x , attrib1_y , attrib1_z_0_p , attrib1_z_0_c , attrib1_z_1_p , attrib1_z_1_c , attrib2_R , attrib2_K , attrib3\r\n\r\n1 , 2 , 100 , 200 , 500 , 600 , 222 , 320 ,hello\r\n\r\n-------------------------------------------------------------\r\n\r\n\r\nThe csv represents a json like below.\r\n\r\n - ---------\r\n\r\n    {\r\n    &quot;attrib1&quot;:{\r\n               &quot;x&quot;:1,\r\n               &quot;y&quot;:2,\r\n               &quot;z&quot;:[{&quot;p&quot;:100,&quot;c&quot;:200},{&quot;p&quot;:500,&quot;c&quot;:600}]\r\n              },\r\n    &quot;attrib2&quot;:{&quot;R&quot;:222,&quot;K&quot;:320},\r\n    &quot;attrib3&quot;:&quot;hello&quot;\r\n    }\r\n\r\n------------------------------------------------------------------------\r\n\r\nSo basically here I get the above CSV, and need to convert it to the JSON structure shown\r\n------------------------------------------------------------------------\r\n\r\n. Not sure how to do it. is there any library(Python/Java) which can help me with this.\r\n\r\nIf any solution/suggestion with different csv header available that will also work. i can ask the team to provide me the csv with different header names to represent the nested / arrays.\r\n\r\n","title":"how to convert a CSV into JSON using Python Or Java. The csv is representation of a nested JSON (Containing array of json objects and nested objects)","body":"<p>I get a csv file like :</p>\n<p>attrib1_x , attrib1_y , attrib1_z_0_p , attrib1_z_0_c , attrib1_z_1_p , attrib1_z_1_c , attrib2_R , attrib2_K , attrib3</p>\n<p>1 , 2 , 100 , 200 , 500 , 600 , 222 , 320 ,hello</p>\n<hr />\n<p>The csv represents a json like below.</p>\n<hr />\n<pre><code>{\n&quot;attrib1&quot;:{\n           &quot;x&quot;:1,\n           &quot;y&quot;:2,\n           &quot;z&quot;:[{&quot;p&quot;:100,&quot;c&quot;:200},{&quot;p&quot;:500,&quot;c&quot;:600}]\n          },\n&quot;attrib2&quot;:{&quot;R&quot;:222,&quot;K&quot;:320},\n&quot;attrib3&quot;:&quot;hello&quot;\n}\n</code></pre>\n<hr />\n<h2>So basically here I get the above CSV, and need to convert it to the JSON structure shown</h2>\n<p>. Not sure how to do it. is there any library(Python/Java) which can help me with this.</p>\n<p>If any solution/suggestion with different csv header available that will also work. i can ask the team to provide me the csv with different header names to represent the nested / arrays.</p>\n"},{"tags":["java","nio","nio2","jimfs"],"comments":[{"owner":{"account_id":6528825,"reputation":21455,"user_id":5050667,"accept_rate":91,"display_name":"Yassin Hajaj"},"score":0,"creation_date":1469367798,"post_id":38552650,"comment_id":64496073,"body_markdown":"Use `ZipFile(String)` instead?","body":"Use <code>ZipFile(String)</code> instead?"},{"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"score":1,"creation_date":1469368331,"post_id":38552650,"comment_id":64496231,"body_markdown":"@Yassin Hajaj I get `FileNotFoundException` because it finds the file on default file system, but not on virtual one.","body":"@Yassin Hajaj I get <code>FileNotFoundException</code> because it finds the file on default file system, but not on virtual one."}],"answers":[{"tags":[],"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1651131064,"creation_date":1469377497,"answer_id":38554195,"question_id":38552650,"body_markdown":"The `ZipFile` class is limited to files in the file-system.\r\n\r\nAn alternative would be to use `ZipInputStream` instead. Create an `InputStream` from your `Path` using \r\n\r\n    Path path = ...\r\n    InputStream in = Files.newInputStream(path, openOptions)\r\n\r\nand the use the `InputStream` to create an `ZipInputStream`. This way should work as expected:\r\n\r\n    ZipInputStream zin = new ZipInputStream(in)\r\n\r\nSo the recommended way to use it is:\r\n\r\n    try (ZipInputStream zin = new ZipInputStream(Files.newInputStream(path))) {\r\n        // do something with the ZipInputStream\r\n    }\r\n\r\nNote that decompressing certain ZIP files using `ZipInputStream` [will fail because of their ZIP structure][1]. This is a technical limitation of the ZIP format and can&#39;t be solved. In such cases you have to create a temporary file in file-system or memory and use a different ZIP class like `ZipFile`.\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/47208272/150978","title":"Java: ZipFile using Path","body":"<p>The <code>ZipFile</code> class is limited to files in the file-system.</p>\n<p>An alternative would be to use <code>ZipInputStream</code> instead. Create an <code>InputStream</code> from your <code>Path</code> using</p>\n<pre><code>Path path = ...\nInputStream in = Files.newInputStream(path, openOptions)\n</code></pre>\n<p>and the use the <code>InputStream</code> to create an <code>ZipInputStream</code>. This way should work as expected:</p>\n<pre><code>ZipInputStream zin = new ZipInputStream(in)\n</code></pre>\n<p>So the recommended way to use it is:</p>\n<pre><code>try (ZipInputStream zin = new ZipInputStream(Files.newInputStream(path))) {\n    // do something with the ZipInputStream\n}\n</code></pre>\n<p>Note that decompressing certain ZIP files using <code>ZipInputStream</code> <a href=\"https://stackoverflow.com/q/47208272/150978\">will fail because of their ZIP structure</a>. This is a technical limitation of the ZIP format and can't be solved. In such cases you have to create a temporary file in file-system or memory and use a different ZIP class like <code>ZipFile</code>.</p>\n"},{"tags":[],"owner":{"account_id":29934,"reputation":3390,"user_id":81252,"accept_rate":90,"display_name":"Alexey Sviridov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664897839,"creation_date":1664897839,"answer_id":73950318,"question_id":38552650,"body_markdown":"I just solved exactly the same problem (I need to unpack zip file stored on JimFS filesystem)\r\n\r\nThere is a problem with Robert&#39;s response. `ZipFile` and `ZipInputStream` similar, but not equal. One of big disadvantage of ZipInputStream - it&#39;s doesn&#39;t fail in case of wrong or damaged zip file. It just return null on first `nextEntry` call. For example following test will pass without errors\r\n```kotlin\r\n    @Test\r\n    fun testZip() {\r\n        val randomBytes = Random.nextBytes(1000)\r\n\r\n        ZipInputStream(ByteArrayInputStream(randomBytes)).use { zis -&gt;\r\n            var zipEntry = zis.nextEntry\r\n            while (zipEntry != null) {\r\n                println(zipEntry.name)\r\n                zipEntry = zis.nextEntry\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n\r\nSo, if in case of zip files obtained from user input or by unstable network, there isn&#39;t any chance to check zip using `ZipInputStream`. The only option here - to use Java&#39;s `FileSystems`. The following test will fail with error `zip END header not found`. With correct zip file newFileSystem works fine, of course.\r\n\r\n```\r\n    @Test\r\n    fun testZipFS() {\r\n        val randomBytes = Random.nextBytes(1000)\r\n\r\n        val tmpFile = Files.createTempFile(Path.of(&quot;/tmp&quot;), &quot;tmp&quot;, &quot;.zip&quot;)\r\n        Files.write(tmpFile, randomBytes)\r\n\r\n        val zipFs = FileSystems.newFileSystem(srcZip, null)\r\n\r\n        val zipRoot = zipFs.rootDirectories.single()\r\n        Files.walk(zipRoot).forEach { p -&gt;\r\n            println(p.absolutePathString())\r\n        }\r\n    }\r\n\r\n```\r\n","title":"Java: ZipFile using Path","body":"<p>I just solved exactly the same problem (I need to unpack zip file stored on JimFS filesystem)</p>\n<p>There is a problem with Robert's response. <code>ZipFile</code> and <code>ZipInputStream</code> similar, but not equal. One of big disadvantage of ZipInputStream - it's doesn't fail in case of wrong or damaged zip file. It just return null on first <code>nextEntry</code> call. For example following test will pass without errors</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>    @Test\n    fun testZip() {\n        val randomBytes = Random.nextBytes(1000)\n\n        ZipInputStream(ByteArrayInputStream(randomBytes)).use { zis -&gt;\n            var zipEntry = zis.nextEntry\n            while (zipEntry != null) {\n                println(zipEntry.name)\n                zipEntry = zis.nextEntry\n            }\n        }\n    }\n</code></pre>\n<p>So, if in case of zip files obtained from user input or by unstable network, there isn't any chance to check zip using <code>ZipInputStream</code>. The only option here - to use Java's <code>FileSystems</code>. The following test will fail with error <code>zip END header not found</code>. With correct zip file newFileSystem works fine, of course.</p>\n<pre><code>    @Test\n    fun testZipFS() {\n        val randomBytes = Random.nextBytes(1000)\n\n        val tmpFile = Files.createTempFile(Path.of(&quot;/tmp&quot;), &quot;tmp&quot;, &quot;.zip&quot;)\n        Files.write(tmpFile, randomBytes)\n\n        val zipFs = FileSystems.newFileSystem(srcZip, null)\n\n        val zipRoot = zipFs.rootDirectories.single()\n        Files.walk(zipRoot).forEach { p -&gt;\n            println(p.absolutePathString())\n        }\n    }\n\n</code></pre>\n"}],"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3781,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":38554195,"answer_count":2,"score":3,"last_activity_date":1664897839,"creation_date":1469367664,"question_id":38552650,"body_markdown":"I have a `Path` to zip file on virtual filesystem (jimfs) and I need to open this zip file using `ZipFile`. \r\n\r\nBut there is no constructor in `ZipFile` to get `Path` as argument, only `File`.\r\n\r\nHowever, I can&#39;t create from my `Path` a `File` (path.toFile()) because I get `UnsupportedOperationException`. How can I open my zip file with `ZipFile`? Or maybe there are other ways of working with zip files which are not on default filesystem?\r\n","title":"Java: ZipFile using Path","body":"<p>I have a <code>Path</code> to zip file on virtual filesystem (jimfs) and I need to open this zip file using <code>ZipFile</code>. </p>\n\n<p>But there is no constructor in <code>ZipFile</code> to get <code>Path</code> as argument, only <code>File</code>.</p>\n\n<p>However, I can't create from my <code>Path</code> a <code>File</code> (path.toFile()) because I get <code>UnsupportedOperationException</code>. How can I open my zip file with <code>ZipFile</code>? Or maybe there are other ways of working with zip files which are not on default filesystem?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":3308824,"reputation":859,"user_id":2782785,"accept_rate":86,"display_name":"Markus Yrj&#246;l&#228;"},"score":0,"creation_date":1664899272,"post_id":73950195,"comment_id":130573309,"body_markdown":"Okay, good to know that this path is viable. Apparently I still need to fiddle with the conditions, though, as `@ConditionalOnBean` doesn&#39;t seem to work here as expected. Other beans that depend on `FooService` are causing an `NoSuchBeanDefinitionException`, probably due to invalid bean initialization order. Maybe I&#39;ll have to create my own condition annotation as you suggested. Thanks for the tips!","body":"Okay, good to know that this path is viable. Apparently I still need to fiddle with the conditions, though, as <code>@ConditionalOnBean</code> doesn&#39;t seem to work here as expected. Other beans that depend on <code>FooService</code> are causing an <code>NoSuchBeanDefinitionException</code>, probably due to invalid bean initialization order. Maybe I&#39;ll have to create my own condition annotation as you suggested. Thanks for the tips!"}],"tags":[],"owner":{"account_id":61566,"reputation":68934,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664897221,"creation_date":1664897221,"answer_id":73950195,"question_id":73949829,"body_markdown":"`@Conditional...` bean definitions are indeed the typical approach for this, and your approach sounds reasonable. If you&#39;re concerned that it might be hard to find which components depend on the configuration bean, you could:\r\n\r\n* declare your own `@Conditional` annotation, allowing you to find all matching components by scanning for the uses of that annotation, or\r\n* move all bean definitions sharing a condition into a configuration class with that condition, declaring the services using java based configuration. The disadvantage is that java based configuration makes constructor injection a bit verbose.\r\n* or you could move these into separate packages, and use conditional component scanning to only pick up the beans you want. However, that is only easy if the conditional packages are outside your normal package root, which is overkill in most cases.","title":"Conditionally enabling an external system integration in Spring Boot","body":"<p><code>@Conditional...</code> bean definitions are indeed the typical approach for this, and your approach sounds reasonable. If you're concerned that it might be hard to find which components depend on the configuration bean, you could:</p>\n<ul>\n<li>declare your own <code>@Conditional</code> annotation, allowing you to find all matching components by scanning for the uses of that annotation, or</li>\n<li>move all bean definitions sharing a condition into a configuration class with that condition, declaring the services using java based configuration. The disadvantage is that java based configuration makes constructor injection a bit verbose.</li>\n<li>or you could move these into separate packages, and use conditional component scanning to only pick up the beans you want. However, that is only easy if the conditional packages are outside your normal package root, which is overkill in most cases.</li>\n</ul>\n"}],"owner":{"account_id":3308824,"reputation":859,"user_id":2782785,"accept_rate":86,"display_name":"Markus Yrj&#246;l&#228;"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73950195,"answer_count":1,"score":1,"last_activity_date":1664897221,"creation_date":1664895351,"question_id":73949829,"body_markdown":"I&#39;m trying to implement support for several **alternative** integrations to external systems in a Spring Boot app. The idea is that a specific environment variable defines which integration is in use (there can only be one enabled at a time), and Spring Boot only initializes the components (`@Configuration`, `@Service`, `@RestController` etc.) specific to that integration. Is there a best practice approach for doing this?\r\n\r\nCurrently I&#39;m thinking of something like this:\r\n- Create one `@Configuration` class per integration, annotate it with `@ConditionalOnProperty`. Read all relevant environment variables during app initialization, validate them, and prevent the app from starting if the configurations are invalid.\r\n- Annotate all other components related to that particular integration with `@ConditionalOnBean`, and make them dependent on the configuration bean being initialized.\r\n\r\nSimplified example:\r\n\r\n```java\r\n@Configuration\r\n@ConditionalOnProperty(prefix = &quot;integration&quot;, name = &quot;name&quot;, havingValue = &quot;FOO&quot;)\r\nclass FooConfig {\r\n    // Read environment variables etc.\r\n}\r\n\r\n@Service\r\n@ConditionalOnBean(FooConfig.class)\r\nclass FooService implements ExternalSystemIntegration {\r\n\r\n    @Inject\r\n    // Inject the configuration to get access to the relevant environment variables\r\n    public FooService(FooConfig config, ...) { ... }\r\n\r\n    @Override\r\n    public void doIt() { ... }\r\n}\r\n```\r\n\r\nDoes this approach seem reasonable, or can you see some problems with it? One (small) downside is that it&#39;s not immediately clear which components are related to a specific integration (you need to find out which components depend on the configuration bean).\r\n\r\nOne alternative solution would be to create only one configuration class with a bunch of `@Bean` methods that would use the various `@Conditional*` annotations to control which components should be initialized. However, this would require manually feeding the dependencies to the created beans (as we use constructor injection), which I&#39;d very much like to avoid. And I&#39;m not sure if there&#39;s a good way to control which environment variables to read and validate during app bootstrapping with this solution.","title":"Conditionally enabling an external system integration in Spring Boot","body":"<p>I'm trying to implement support for several <strong>alternative</strong> integrations to external systems in a Spring Boot app. The idea is that a specific environment variable defines which integration is in use (there can only be one enabled at a time), and Spring Boot only initializes the components (<code>@Configuration</code>, <code>@Service</code>, <code>@RestController</code> etc.) specific to that integration. Is there a best practice approach for doing this?</p>\n<p>Currently I'm thinking of something like this:</p>\n<ul>\n<li>Create one <code>@Configuration</code> class per integration, annotate it with <code>@ConditionalOnProperty</code>. Read all relevant environment variables during app initialization, validate them, and prevent the app from starting if the configurations are invalid.</li>\n<li>Annotate all other components related to that particular integration with <code>@ConditionalOnBean</code>, and make them dependent on the configuration bean being initialized.</li>\n</ul>\n<p>Simplified example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@ConditionalOnProperty(prefix = &quot;integration&quot;, name = &quot;name&quot;, havingValue = &quot;FOO&quot;)\nclass FooConfig {\n    // Read environment variables etc.\n}\n\n@Service\n@ConditionalOnBean(FooConfig.class)\nclass FooService implements ExternalSystemIntegration {\n\n    @Inject\n    // Inject the configuration to get access to the relevant environment variables\n    public FooService(FooConfig config, ...) { ... }\n\n    @Override\n    public void doIt() { ... }\n}\n</code></pre>\n<p>Does this approach seem reasonable, or can you see some problems with it? One (small) downside is that it's not immediately clear which components are related to a specific integration (you need to find out which components depend on the configuration bean).</p>\n<p>One alternative solution would be to create only one configuration class with a bunch of <code>@Bean</code> methods that would use the various <code>@Conditional*</code> annotations to control which components should be initialized. However, this would require manually feeding the dependencies to the created beans (as we use constructor injection), which I'd very much like to avoid. And I'm not sure if there's a good way to control which environment variables to read and validate during app bootstrapping with this solution.</p>\n"},{"tags":["python","java","windows","frame"],"answers":[{"tags":[],"owner":{"account_id":277416,"reputation":681888,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1319218541,"creation_date":1319217302,"answer_id":7852896,"question_id":7852853,"body_markdown":"This can be done setting your `LayoutManager` to `null`, but it&#39;s highly discouraged precisely because it annihilates the goal of layouts, which is to be able to have good-looking frames, regardless of the look and feel, screen resolution, etc.\r\n\r\nYou&#39;d better [learn how to use layout managers][1], because that&#39;s the good way to design a GUI. \r\n\r\n\r\n  [1]: http://download.oracle.com/javase/tutorial/uiswing/layout/using.html","title":"How do I convert the .place() method in python to java?","body":"<p>This can be done setting your <code>LayoutManager</code> to <code>null</code>, but it's highly discouraged precisely because it annihilates the goal of layouts, which is to be able to have good-looking frames, regardless of the look and feel, screen resolution, etc.</p>\n\n<p>You'd better <a href=\"http://download.oracle.com/javase/tutorial/uiswing/layout/using.html\" rel=\"nofollow\">learn how to use layout managers</a>, because that's the good way to design a GUI. </p>\n"},{"tags":[],"owner":{"account_id":18250,"reputation":39312,"user_id":41655,"accept_rate":76,"display_name":"millimoose"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1319232878,"creation_date":1319232878,"answer_id":7855539,"question_id":7852853,"body_markdown":"There&#39;s a [Swing tutorial][1] that gives a concise example on positioning widgets absolutely.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/tutorial/uiswing/layout/none.html","title":"How do I convert the .place() method in python to java?","body":"<p>There's a <a href=\"http://download.oracle.com/javase/tutorial/uiswing/layout/none.html\" rel=\"nofollow\">Swing tutorial</a> that gives a concise example on positioning widgets absolutely.</p>\n"},{"tags":[],"owner":{"account_id":51881,"reputation":38016,"user_id":155020,"accept_rate":80,"display_name":"chubbsondubs"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1319233593,"creation_date":1319233593,"answer_id":7855645,"question_id":7852853,"body_markdown":"If you do start using LayoutManagers I recommend using TableLayout because it far easier and more powerful than GridBagLayout.\r\n\r\nhttp://java.sun.com/products/jfc/tsc/articles/tablelayout/\r\n\r\nHopefully your need to do absolute positioning is relatively small because it&#39;s not flexible should the user resize the window, and your components need to change their size.  If you are trying to build a component that renders to X,Y to draw graphics you can subclass JComponent and override paint().","title":"How do I convert the .place() method in python to java?","body":"<p>If you do start using LayoutManagers I recommend using TableLayout because it far easier and more powerful than GridBagLayout.</p>\n\n<p><a href=\"http://java.sun.com/products/jfc/tsc/articles/tablelayout/\" rel=\"nofollow\">http://java.sun.com/products/jfc/tsc/articles/tablelayout/</a></p>\n\n<p>Hopefully your need to do absolute positioning is relatively small because it's not flexible should the user resize the window, and your components need to change their size.  If you are trying to build a component that renders to X,Y to draw graphics you can subclass JComponent and override paint().</p>\n"}],"owner":{"account_id":964479,"reputation":2299,"user_id":988172,"accept_rate":74,"display_name":"Josh Menzel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":7855539,"answer_count":3,"score":4,"last_activity_date":1664897113,"creation_date":1319216990,"question_id":7852853,"body_markdown":"I am trying to convert my Python Code to Java. I need a GUI that is similar to python where I can use `widgetname.place(x,y)` to place objects anywhere I want in the window. I want to be able to specify where the object is placed in the window. I have tried `GridLayout`, `GridBagLayout`, `BoxLayout` and `FlowLayout`. None of those are allowing me to secify x and y coordinates to place my objects(text fields, labels, buttons) where ever I want. I need to be able to specify where the object goes on the screen using x and y coordinates.\r\n\r\nAnyone have any ideas?","title":"How do I convert the .place() method in python to java?","body":"<p>I am trying to convert my Python Code to Java. I need a GUI that is similar to python where I can use <code>widgetname.place(x,y)</code> to place objects anywhere I want in the window. I want to be able to specify where the object is placed in the window. I have tried <code>GridLayout</code>, <code>GridBagLayout</code>, <code>BoxLayout</code> and <code>FlowLayout</code>. None of those are allowing me to secify x and y coordinates to place my objects(text fields, labels, buttons) where ever I want. I need to be able to specify where the object goes on the screen using x and y coordinates.</p>\n\n<p>Anyone have any ideas?</p>\n"},{"tags":["java","string","jexl"],"answers":[{"tags":[],"owner":{"account_id":11845668,"reputation":187,"user_id":8668250,"display_name":"henrib"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664896721,"creation_date":1664896721,"answer_id":73950091,"question_id":73914307,"body_markdown":"JEXL offers many ways to achieve a tight integration but it requires some  code to do so.\r\n\r\nNot sure if JEXLs integration in your library allows this but JEXL misses some information to achieve what you seek. For JEXL to filter streams, it needs the definition of how to to do that.\r\n\r\nThe example below (running on JEXL 3.3 SNAPSHOT) does illustrate  one way of doing so by extending the JexlContext (could also be done by extending the JexlArithmetic).\r\n    \r\n    /**\r\n     * Mock driver.\r\n     */\r\n    public static class Driver0930 {\r\n        private String name;\r\n        Driver0930(String n) {\r\n            name = n;\r\n        }\r\n        public String getAttributeName() {\r\n            return name;\r\n        }\r\n    }\r\n\r\n    public static class Context0930 extends MapContext {\r\n        /**\r\n         * This allows using a JEXL lambda as a filter.\r\n         * @param stream the stream\r\n         * @param filter the lambda to use as filter\r\n         * @return the filtered stream\r\n         */\r\n        public Stream&lt;?&gt; filter(Stream&lt;?&gt; stream, JexlScript filter) {\r\n            return stream.filter(x -&gt; Boolean.TRUE.equals(filter.execute(this, x)));\r\n        }\r\n    }\r\n\r\n    @Test\r\n    public void testStackOvflw20220930() {\r\n        // fill some drivers in a list\r\n        List&lt;Driver0930&gt; values = new ArrayList&lt;&gt;();\r\n        for(int i = 0; i &lt; 8; ++i) {\r\n            values.add(new Driver0930(&quot;drvr&quot; + Integer.toOctalString(i)));\r\n        }\r\n        for(int i = 0; i &lt; 4; ++i) {\r\n            values.add(new Driver0930(&quot;favorite&quot; + Integer.toOctalString(i)));\r\n        }\r\n        // Use a context that can filter and that exposes Collectors\r\n        JexlEngine jexl = new JexlBuilder().safe(false).create();\r\n        JexlContext context = new Context0930();\r\n        context.set(&quot;values&quot;, values);\r\n        context.set(&quot;Collectors&quot;, Collectors.class);\r\n        // The script with a JEXL 3.2 (lambda function) and 3.3 syntax (lambda expression)\r\n        String src32 = &quot;values.stream().filter((driver) -&gt;{ driver.attributeName =^ &#39;favorite&#39; }).collect(Collectors.toList())&quot;;\r\n        String src33 = &quot;values.stream().filter(driver -&gt; driver.attributeName =^ &#39;favorite&#39;).collect(Collectors.toList())&quot;;\r\n        for(String src : Arrays.asList(src32, src33)) {\r\n            JexlExpression s = jexl.createExpression(src);\r\n            Assert.assertNotNull(s);\r\n\r\n            Object r = s.evaluate(context);\r\n            Assert.assertNotNull(r);\r\n            // got a filtered list of 4 drivers whose attribute name starts with &#39;favorite&#39;\r\n            List&lt;Driver0930&gt; l = (List&lt;Driver0930&gt;) r;\r\n            Assert.assertEquals(4, l.size());\r\n            for (Driver0930 d : l) {\r\n                Assert.assertTrue(d.getAttributeName().startsWith(&quot;favorite&quot;));\r\n            }\r\n        }\r\n    }","title":"Jexl expression string with stream, map and collect is throwing org.apache.commons.jexl3.JexlException$Parsing Exception","body":"<p>JEXL offers many ways to achieve a tight integration but it requires some  code to do so.</p>\n<p>Not sure if JEXLs integration in your library allows this but JEXL misses some information to achieve what you seek. For JEXL to filter streams, it needs the definition of how to to do that.</p>\n<p>The example below (running on JEXL 3.3 SNAPSHOT) does illustrate  one way of doing so by extending the JexlContext (could also be done by extending the JexlArithmetic).</p>\n<pre><code>/**\n * Mock driver.\n */\npublic static class Driver0930 {\n    private String name;\n    Driver0930(String n) {\n        name = n;\n    }\n    public String getAttributeName() {\n        return name;\n    }\n}\n\npublic static class Context0930 extends MapContext {\n    /**\n     * This allows using a JEXL lambda as a filter.\n     * @param stream the stream\n     * @param filter the lambda to use as filter\n     * @return the filtered stream\n     */\n    public Stream&lt;?&gt; filter(Stream&lt;?&gt; stream, JexlScript filter) {\n        return stream.filter(x -&gt; Boolean.TRUE.equals(filter.execute(this, x)));\n    }\n}\n\n@Test\npublic void testStackOvflw20220930() {\n    // fill some drivers in a list\n    List&lt;Driver0930&gt; values = new ArrayList&lt;&gt;();\n    for(int i = 0; i &lt; 8; ++i) {\n        values.add(new Driver0930(&quot;drvr&quot; + Integer.toOctalString(i)));\n    }\n    for(int i = 0; i &lt; 4; ++i) {\n        values.add(new Driver0930(&quot;favorite&quot; + Integer.toOctalString(i)));\n    }\n    // Use a context that can filter and that exposes Collectors\n    JexlEngine jexl = new JexlBuilder().safe(false).create();\n    JexlContext context = new Context0930();\n    context.set(&quot;values&quot;, values);\n    context.set(&quot;Collectors&quot;, Collectors.class);\n    // The script with a JEXL 3.2 (lambda function) and 3.3 syntax (lambda expression)\n    String src32 = &quot;values.stream().filter((driver) -&gt;{ driver.attributeName =^ 'favorite' }).collect(Collectors.toList())&quot;;\n    String src33 = &quot;values.stream().filter(driver -&gt; driver.attributeName =^ 'favorite').collect(Collectors.toList())&quot;;\n    for(String src : Arrays.asList(src32, src33)) {\n        JexlExpression s = jexl.createExpression(src);\n        Assert.assertNotNull(s);\n\n        Object r = s.evaluate(context);\n        Assert.assertNotNull(r);\n        // got a filtered list of 4 drivers whose attribute name starts with 'favorite'\n        List&lt;Driver0930&gt; l = (List&lt;Driver0930&gt;) r;\n        Assert.assertEquals(4, l.size());\n        for (Driver0930 d : l) {\n            Assert.assertTrue(d.getAttributeName().startsWith(&quot;favorite&quot;));\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5033898,"reputation":99,"user_id":4043317,"accept_rate":20,"display_name":"Gowtham Kesa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":744,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664896721,"creation_date":1664575045,"question_id":73914307,"body_markdown":"I have a method `evaluateExpression` present in a different library and that library is using Jexl3 for evaluating `expressionString` passed to `evaluateExpression` method. &lt;br&gt;\r\n`inputMap` contains the object that is used for evaluating the expressionString on. This is the second parameter to that function.\r\n\r\n`expressionString` is `record.getDriversMap().values().stream().filter(myDriver -&gt; &#39;Fav_Driver&#39;.equals(vtd.getAttributeName())).collect(Collectors.toList())`\r\n\r\n`record` is a class which contains `driversMap` whose values are of type `MyDriver` class and it has an `attributeName` field. I have added a filter condition and tried to collect the list. Doing this I was getting an exception `org.apache.commons.jexl3.JexlException$Parsing` with message `(` \r\nwhich is unclear. Does anyone know how to resolve this issue.\r\n\r\nIt would be great if someone provides examples of jexl expression with stream, map and collect ?\r\nBelow is the method present in the library.\r\n  \r\n\r\n    Object evaluateExpression(String expressionString, Map&lt;String, Object&gt; inputMap) {\r\n            MapContext mapContext = new MapContext(inputMap);\r\n            JexlExpression jexlExpression = this.jexlEngine.createExpression(expressionString);\r\n            return jexlExpression.evaluate(mapContext);\r\n        }\r\n","title":"Jexl expression string with stream, map and collect is throwing org.apache.commons.jexl3.JexlException$Parsing Exception","body":"<p>I have a method <code>evaluateExpression</code> present in a different library and that library is using Jexl3 for evaluating <code>expressionString</code> passed to <code>evaluateExpression</code> method. <br>\n<code>inputMap</code> contains the object that is used for evaluating the expressionString on. This is the second parameter to that function.</p>\n<p><code>expressionString</code> is <code>record.getDriversMap().values().stream().filter(myDriver -&gt; 'Fav_Driver'.equals(vtd.getAttributeName())).collect(Collectors.toList())</code></p>\n<p><code>record</code> is a class which contains <code>driversMap</code> whose values are of type <code>MyDriver</code> class and it has an <code>attributeName</code> field. I have added a filter condition and tried to collect the list. Doing this I was getting an exception <code>org.apache.commons.jexl3.JexlException$Parsing</code> with message <code>(</code>\nwhich is unclear. Does anyone know how to resolve this issue.</p>\n<p>It would be great if someone provides examples of jexl expression with stream, map and collect ?\nBelow is the method present in the library.</p>\n<pre><code>Object evaluateExpression(String expressionString, Map&lt;String, Object&gt; inputMap) {\n        MapContext mapContext = new MapContext(inputMap);\n        JexlExpression jexlExpression = this.jexlEngine.createExpression(expressionString);\n        return jexlExpression.evaluate(mapContext);\n    }\n</code></pre>\n"},{"tags":["java","string","eclipse","utf-8","special-characters"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1664735793,"post_id":73927898,"comment_id":130535018,"body_markdown":"Your native encoding is not a unicode one. Why would you like it to be?","body":"Your native encoding is not a unicode one. Why would you like it to be?"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1664802328,"post_id":73927898,"comment_id":130547899,"body_markdown":"Is the same font used in both places?","body":"Is the same font used in both places?"},{"owner":{"account_id":4198672,"reputation":28840,"user_id":3439404,"display_name":"JosefZ"},"score":0,"creation_date":1664828185,"post_id":73927898,"comment_id":130556097,"body_markdown":"Please [edit] your question to enhance your [mcve]. Show us **1st** how do you use the `tester` class, and **2nd** output in the terminal using _all_ problematic characters (at least, `String s = &quot;&#246;&#228;&#252;&#241;&quot;;`).","body":"Please <a href=\"https://stackoverflow.com/posts/73927898/edit\">edit</a> your question to enhance your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Show us <b>1st</b> how do you use the <code>tester</code> class, and <b>2nd</b> output in the terminal using <i>all</i> problematic characters (at least, <code>String s = &quot;&#246;&#228;&#252;&#241;&quot;;</code>)."},{"owner":{"account_id":23602515,"reputation":1,"user_id":17638780,"display_name":"TheArtificalAI"},"score":0,"creation_date":1664861496,"post_id":73927898,"comment_id":130561179,"body_markdown":"@g00se I want it to use UFT-8, to get it to display characters like &#246;&#228;&#252;&#241;.","body":"@g00se I want it to use UFT-8, to get it to display characters like &#246;&#228;&#252;&#241;."},{"owner":{"account_id":23602515,"reputation":1,"user_id":17638780,"display_name":"TheArtificalAI"},"score":0,"creation_date":1664861536,"post_id":73927898,"comment_id":130561188,"body_markdown":"@nitind where can I look up the font?","body":"@nitind where can I look up the font?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1664871882,"post_id":73927898,"comment_id":130563838,"body_markdown":"*@g00se I want it to use UFT-8, to get it to display characters like &#246;&#228;&#252;&#241;* You already can:  `System.out.println(&quot;\\xf6\\xe4\\xfc\\xf1&quot;);`","body":"<i>@g00se I want it to use UFT-8, to get it to display characters like &#246;&#228;&#252;&#241;</i> You already can:  <code>System.out.println(&quot;\\xf6\\xe4\\xfc\\xf1&quot;);</code>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1664876922,"post_id":73927898,"comment_id":130565369,"body_markdown":"*@g00se I want it to use UFT-8, to get it to display characters like &#246;&#228;&#252;&#241;* You already can: `System.out.println(&quot;\\u00f6\\u00e4\\u00fc\\u00f1&quot;);` Apologies for the previous comment - it seems hex escape sequences are no longer supported - I don&#39;t know when that happened!","body":"<i>@g00se I want it to use UFT-8, to get it to display characters like &#246;&#228;&#252;&#241;</i> You already can: <code>System.out.println(&quot;\\u00f6\\u00e4\\u00fc\\u00f1&quot;);</code> Apologies for the previous comment - it seems hex escape sequences are no longer supported - I don&#39;t know when that happened!"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1664877565,"post_id":73927898,"comment_id":130565581,"body_markdown":"Interestingly, octal escape sequences (impractical) still work: `System.out.println(&quot;\\366\\344\\374\\361&quot;);`","body":"Interestingly, octal escape sequences (impractical) still work: <code>System.out.println(&quot;\\366\\344\\374\\361&quot;);</code>"},{"owner":{"account_id":23602515,"reputation":1,"user_id":17638780,"display_name":"TheArtificalAI"},"score":0,"creation_date":1664896423,"post_id":73927898,"comment_id":130572286,"body_markdown":"Interestingly, octal escape sequences (impractical) still work: System.out.println(&quot;\\366\\344\\374\\361&quot;); Sorry, but not at my PC it displays: ����","body":"Interestingly, octal escape sequences (impractical) still work: System.out.println(&quot;\\366\\344\\374\\361&quot;); Sorry, but not at my PC it displays: ����"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1664897577,"post_id":73927898,"comment_id":130572715,"body_markdown":"Could you make that the *only* line of main please and precede it with ```System.out.println(System.getProperty(&quot;file.encoding&quot;));```  and tell us what you get?","body":"Could you make that the <i>only</i> line of main please and precede it with <code>System.out.println(System.getProperty(&quot;file.encoding&quot;));</code>  and tell us what you get?"}],"owner":{"account_id":23602515,"reputation":1,"user_id":17638780,"display_name":"TheArtificalAI"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664896257,"creation_date":1664731553,"question_id":73927898,"body_markdown":"When I am running this program (I got most of it here: https://stackoverflow.com/questions/46361826/utf-8-encoding-is-not-working-in-java-build):\r\n\r\n```\r\nimport java.io.Console;\r\nimport java.io.IOException;\r\nimport java.io.OutputStreamWriter;\r\nimport java.io.PrintWriter;\r\n\r\npublic class tester {\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        String s = &quot;&#191;Hola &#246;&#228;&#252;&#241; how geht&#39;s t&#250;?&quot;;\r\n        write(s);\r\n    }\r\n\r\n    private static void write(String s) throws IOException {\r\n        String encoding = new OutputStreamWriter(System.out).getEncoding();\r\n        Console console = System.console();\r\n        if (console != null) {\r\n            // if there is a console attached to the jvm, use it.\r\n            System.out.println(&quot;Using encoding &quot; + encoding + &quot; (Console)&quot;);\r\n            try (PrintWriter writer = console.writer()) {\r\n                writer.write(s);\r\n                writer.flush();\r\n            }\r\n        } else {\r\n            // fall back to &quot;normal&quot; system out\r\n            System.out.println(&quot;Using encoding &quot; + encoding + &quot; (System out)&quot;);\r\n            System.out.print(s);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nIt displays:\r\n\r\n    Using encoding Cp1252 (System out)\r\n    �Hola ���� how geht&#39;s t�?\r\n\r\nIn the terminal, whereas I want it to dispaly:\r\n\r\n    Using encoding UTF-8(or sth. else that works properly...) (System out)\r\n    &#191;Hola &#246;&#228;&#252;&#241; how geht&#39;s t&#250;?\r\n\r\nBut it doesn&#39;t.\r\n\r\nI have activated utf-8 in the Project settings, the General settings and under Run configurations &gt; common. And it still is not working. Any clue what I could try next?\r\n\r\nOther examples with slightly awkward outcomes:\r\n\r\nLine 9:\r\n\r\n    String s = &quot;&#246;&#228;&#252;&#241;&quot;;\r\n\r\nTerminal:\r\n\r\n    Using encoding Cp1252 (System out)\r\n    ���\r\n\r\nTheir literary the &#39;&#241;&#39; isn&#39;t even a �...?\r\nAs well here:\r\n\r\nLine 9:\r\n\r\n    String s = &quot;&#241;&quot;;\r\n\r\nTerminal:\r\n\r\n    Using encoding Cp1252 (System out)\r\n\r\nBut:\r\n\r\nLine 9:\r\n\r\n    String s = &quot;how &#241; wow&quot;;\r\n\r\nTerminal:\r\n\r\n    Using encoding Cp1252 (System out)\r\n    how � wow\r\n\r\nAnd if that could give you a better understanding\r\nthis part of code:\r\n\r\n    String str = &quot;&#191;Hola &#246;&#228;&#252;&#241; how geht&#39;s t&#250;?&quot;;  \r\n        \t//invokes the getBytes() method and stores an array of bytes into array[]  \r\n        \tbyte array[] = str.getBytes(&quot;UTF8&quot;);  \r\n        \tSystem.out.println(&quot;Encoded String: &quot;);  \r\n        \t//enhanced for loop that iterates over the array  \r\n        \tfor (byte x: array)   \r\n        \t{  \r\n        \t//prints the sequence of bytes      \r\n        \tSystem.out.print(x+&quot; &quot;); \r\n        \t}\r\n\r\nGives that output in the Terminal:\r\n\r\n    Encoded String: \r\n    -62 -65 72 111 108 97 32 -61 -74 -61 -92 -61 -68 -61 -79 32 104 111 119 32 103 101 104 116 39 115 32 116 -61 -70 63 \r\n\r\n","title":"Java string output in Eclipse does not set to utf-8 and does not display &#246;&#252;&#228;&#241;","body":"<p>When I am running this program (I got most of it here: <a href=\"https://stackoverflow.com/questions/46361826/utf-8-encoding-is-not-working-in-java-build\">“UTF-8” encoding is not working in java build</a>):</p>\n<pre><code>import java.io.Console;\nimport java.io.IOException;\nimport java.io.OutputStreamWriter;\nimport java.io.PrintWriter;\n\npublic class tester {\n\n    public static void main(String[] args) throws IOException {\n        String s = &quot;¿Hola öäüñ how geht's tú?&quot;;\n        write(s);\n    }\n\n    private static void write(String s) throws IOException {\n        String encoding = new OutputStreamWriter(System.out).getEncoding();\n        Console console = System.console();\n        if (console != null) {\n            // if there is a console attached to the jvm, use it.\n            System.out.println(&quot;Using encoding &quot; + encoding + &quot; (Console)&quot;);\n            try (PrintWriter writer = console.writer()) {\n                writer.write(s);\n                writer.flush();\n            }\n        } else {\n            // fall back to &quot;normal&quot; system out\n            System.out.println(&quot;Using encoding &quot; + encoding + &quot; (System out)&quot;);\n            System.out.print(s);\n        }\n    }\n\n}\n</code></pre>\n<p>It displays:</p>\n<pre><code>Using encoding Cp1252 (System out)\n�Hola ���� how geht's t�?\n</code></pre>\n<p>In the terminal, whereas I want it to dispaly:</p>\n<pre><code>Using encoding UTF-8(or sth. else that works properly...) (System out)\n¿Hola öäüñ how geht's tú?\n</code></pre>\n<p>But it doesn't.</p>\n<p>I have activated utf-8 in the Project settings, the General settings and under Run configurations &gt; common. And it still is not working. Any clue what I could try next?</p>\n<p>Other examples with slightly awkward outcomes:</p>\n<p>Line 9:</p>\n<pre><code>String s = &quot;öäüñ&quot;;\n</code></pre>\n<p>Terminal:</p>\n<pre><code>Using encoding Cp1252 (System out)\n���\n</code></pre>\n<p>Their literary the 'ñ' isn't even a �...?\nAs well here:</p>\n<p>Line 9:</p>\n<pre><code>String s = &quot;ñ&quot;;\n</code></pre>\n<p>Terminal:</p>\n<pre><code>Using encoding Cp1252 (System out)\n</code></pre>\n<p>But:</p>\n<p>Line 9:</p>\n<pre><code>String s = &quot;how ñ wow&quot;;\n</code></pre>\n<p>Terminal:</p>\n<pre><code>Using encoding Cp1252 (System out)\nhow � wow\n</code></pre>\n<p>And if that could give you a better understanding\nthis part of code:</p>\n<pre><code>String str = &quot;¿Hola öäüñ how geht's tú?&quot;;  \n        //invokes the getBytes() method and stores an array of bytes into array[]  \n        byte array[] = str.getBytes(&quot;UTF8&quot;);  \n        System.out.println(&quot;Encoded String: &quot;);  \n        //enhanced for loop that iterates over the array  \n        for (byte x: array)   \n        {  \n        //prints the sequence of bytes      \n        System.out.print(x+&quot; &quot;); \n        }\n</code></pre>\n<p>Gives that output in the Terminal:</p>\n<pre><code>Encoded String: \n-62 -65 72 111 108 97 32 -61 -74 -61 -92 -61 -68 -61 -79 32 104 111 119 32 103 101 104 116 39 115 32 116 -61 -70 63 \n</code></pre>\n"},{"tags":["java","android","android-mediaplayer"],"answers":[{"comments":[{"owner":{"account_id":26525527,"reputation":3,"user_id":20158589,"display_name":"nat34"},"score":0,"creation_date":1664896337,"post_id":73949981,"comment_id":130572258,"body_markdown":"I&#39;ve had it there from the beginning, sadly it still doesn&#39;t work","body":"I&#39;ve had it there from the beginning, sadly it still doesn&#39;t work"},{"owner":{"account_id":26518299,"reputation":26,"user_id":20152445,"display_name":"Ilya Pechuro"},"score":0,"creation_date":1664896629,"post_id":73949981,"comment_id":130572362,"body_markdown":"Can you share a media link or file that is not working?","body":"Can you share a media link or file that is not working?"},{"owner":{"account_id":26525527,"reputation":3,"user_id":20158589,"display_name":"nat34"},"score":0,"creation_date":1664896760,"post_id":73949981,"comment_id":130572413,"body_markdown":"this is the link I&#39;m using : &quot;http://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3&quot;\nI am doing as follows, in mainActivity:\n\n```\nstrLink = &quot;http://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3&quot;;\n        serviceIntent.putExtra(&quot;mp3Link&quot;, strLink);\n        startService(serviceIntent);\n        Toast.makeText(this, &quot;Starting audio...&quot;, Toast.LENGTH_LONG).show();\n```\n\nIm not sure how to make it readable so sorry,,,","body":"this is the link I&#39;m using : &quot;<a href=\"http://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3\" rel=\"nofollow noreferrer\">soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3</a>&quot; I am doing as follows, in mainActivity:  ``` strLink = &quot;<a href=\"http://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3\" rel=\"nofollow noreferrer\">soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3</a>&quot;;         serviceIntent.putExtra(&quot;mp3Link&quot;, strLink);         startService(serviceIntent);         Toast.makeText(this, &quot;Starting audio...&quot;, Toast.LENGTH_LONG).show(); ```  Im not sure how to make it readable so sorry,,,"},{"owner":{"account_id":26518299,"reputation":26,"user_id":20152445,"display_name":"Ilya Pechuro"},"score":0,"creation_date":1664903746,"post_id":73949981,"comment_id":130574812,"body_markdown":"The problem is that you missed `https://` prefix.\nThe correct link will be `strLink = &quot;https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3&quot;`\n`mediaPlayerMp3.setDataSource(strMp3Link)` use `Uri.parse(String)` method under the hood, which accepts RFC 2396-compliant, encoded URI. \n[See more](https://www.ietf.org/rfc/rfc2396.txt)","body":"The problem is that you missed <code>https:&#47;&#47;</code> prefix. The correct link will be <code>strLink = &quot;https:&#47;&#47;www.soundhelix.com&#47;examples&#47;mp3&#47;SoundHelix-Song-8.m&zwnj;&#8203;p3&quot;</code> <code>mediaPlayerMp3.setDataSource(strMp3Link)</code> use <code>Uri.parse(String)</code> method under the hood, which accepts RFC 2396-compliant, encoded URI.  <a href=\"https://www.ietf.org/rfc/rfc2396.txt\" rel=\"nofollow noreferrer\">See more</a>"},{"owner":{"account_id":26525527,"reputation":3,"user_id":20158589,"display_name":"nat34"},"score":0,"creation_date":1664968606,"post_id":73949981,"comment_id":130588524,"body_markdown":"it still doesn&#39;t work... I did what you said, when I run it, it just doesn&#39;t reach the onPrepared() method. I have no idea why.","body":"it still doesn&#39;t work... I did what you said, when I run it, it just doesn&#39;t reach the onPrepared() method. I have no idea why."}],"tags":[],"owner":{"account_id":26518299,"reputation":26,"user_id":20152445,"display_name":"Ilya Pechuro"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664896102,"creation_date":1664896102,"answer_id":73949981,"question_id":73948428,"body_markdown":"If strMp3Link is a network URL of the audio stream, you also need to specify internet permission. Add the following to your application manifest\r\n\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    ...\r\n","title":"MediaPlayer method. PrepareAsync() does not call the onPrepared method","body":"<p>If strMp3Link is a network URL of the audio stream, you also need to specify internet permission. Add the following to your application manifest</p>\n<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n...\n</code></pre>\n"}],"owner":{"account_id":26525527,"reputation":3,"user_id":20158589,"display_name":"nat34"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664896102,"creation_date":1664889106,"question_id":73948428,"body_markdown":"I&#39;ve been trying to build a simple service for listening to music in the background.\r\nIn the function onCommandStart I call Prepare async on the Mediaplayer object.\r\nFor some reason, the function OnPrepared, where I start the audio, doesn&#39;t get called...\r\n\r\nHere is my service class:\r\n```\r\npublic class playService extends Service implements MediaPlayer.OnCompletionListener,MediaPlayer.OnPreparedListener\r\n        ,MediaPlayer.OnSeekCompleteListener,MediaPlayer.OnInfoListener,\r\n        MediaPlayer.OnBufferingUpdateListener,MediaPlayer.OnErrorListener\r\n{\r\n    public playService()\r\n    {\r\n    }\r\n    MediaPlayer mediaPlayerMp3 = new MediaPlayer();\r\n    @Override\r\n    public void onCreate() {\r\n        mediaPlayerMp3.setOnCompletionListener(this);\r\n        mediaPlayerMp3.setOnCompletionListener(this);\r\n        mediaPlayerMp3.setOnBufferingUpdateListener(this);\r\n        mediaPlayerMp3.setOnSeekCompleteListener(this);\r\n        mediaPlayerMp3.setOnInfoListener(this);\r\n        mediaPlayerMp3.setOnPreparedListener(this);\r\n        super.onCreate();\r\n    }\r\n    @Override\r\n    public int onStartCommand(Intent intent, int flags, int startId)\r\n    {\r\n        String strMp3Link = intent.getExtras().getString(&quot;mp3Link&quot;);\r\n        if(!mediaPlayerMp3.isPlaying())\r\n        {\r\n            try\r\n            {\r\n                mediaPlayerMp3.setDataSource(strMp3Link);\r\n                mediaPlayerMp3.prepareAsync();\r\n            }\r\n            catch (IOException e)\r\n            {\r\n                Toast.makeText(this, e.toString(), Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n        return START_STICKY;\r\n    }\r\n    @Override\r\n    public void onPrepared(MediaPlayer mediaPlayer)\r\n    {\r\n        if(!mediaPlayerMp3.isPlaying())\r\n        {\r\n            mediaPlayerMp3.start();\r\n        }\r\n    }\r\n    ....\r\n}\r\n```\r\n\r\n(I have all the other methods I implemented as well, they are just not relevant now.)\r\n\r\nSo I have a button, I press it, start the Intent (in MainActivity, it works fine) the function onStartCommand gets called. But when it reaches prepareAsync(), nothing happens. Audio isn&#39;t being played. How do I deal with that?","title":"MediaPlayer method. PrepareAsync() does not call the onPrepared method","body":"<p>I've been trying to build a simple service for listening to music in the background.\nIn the function onCommandStart I call Prepare async on the Mediaplayer object.\nFor some reason, the function OnPrepared, where I start the audio, doesn't get called...</p>\n<p>Here is my service class:</p>\n<pre><code>public class playService extends Service implements MediaPlayer.OnCompletionListener,MediaPlayer.OnPreparedListener\n        ,MediaPlayer.OnSeekCompleteListener,MediaPlayer.OnInfoListener,\n        MediaPlayer.OnBufferingUpdateListener,MediaPlayer.OnErrorListener\n{\n    public playService()\n    {\n    }\n    MediaPlayer mediaPlayerMp3 = new MediaPlayer();\n    @Override\n    public void onCreate() {\n        mediaPlayerMp3.setOnCompletionListener(this);\n        mediaPlayerMp3.setOnCompletionListener(this);\n        mediaPlayerMp3.setOnBufferingUpdateListener(this);\n        mediaPlayerMp3.setOnSeekCompleteListener(this);\n        mediaPlayerMp3.setOnInfoListener(this);\n        mediaPlayerMp3.setOnPreparedListener(this);\n        super.onCreate();\n    }\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId)\n    {\n        String strMp3Link = intent.getExtras().getString(&quot;mp3Link&quot;);\n        if(!mediaPlayerMp3.isPlaying())\n        {\n            try\n            {\n                mediaPlayerMp3.setDataSource(strMp3Link);\n                mediaPlayerMp3.prepareAsync();\n            }\n            catch (IOException e)\n            {\n                Toast.makeText(this, e.toString(), Toast.LENGTH_LONG).show();\n            }\n        }\n        return START_STICKY;\n    }\n    @Override\n    public void onPrepared(MediaPlayer mediaPlayer)\n    {\n        if(!mediaPlayerMp3.isPlaying())\n        {\n            mediaPlayerMp3.start();\n        }\n    }\n    ....\n}\n</code></pre>\n<p>(I have all the other methods I implemented as well, they are just not relevant now.)</p>\n<p>So I have a button, I press it, start the Intent (in MainActivity, it works fine) the function onStartCommand gets called. But when it reaches prepareAsync(), nothing happens. Audio isn't being played. How do I deal with that?</p>\n"},{"tags":["java","angular","oauth"],"answers":[{"comments":[{"owner":{"account_id":17330298,"reputation":127,"user_id":12553583,"display_name":"Jack Boch"},"score":0,"creation_date":1664282567,"post_id":73860827,"comment_id":130431556,"body_markdown":"in front seed i alredy  use &quot;angular-oauth2-oidc&quot; and I hadn&#39;t seen that there was already an interceror","body":"in front seed i alredy  use &quot;angular-oauth2-oidc&quot; and I hadn&#39;t seen that there was already an interceror"},{"owner":{"account_id":17330298,"reputation":127,"user_id":12553583,"display_name":"Jack Boch"},"score":0,"creation_date":1664282742,"post_id":73860827,"comment_id":130431634,"body_markdown":"After changing lib to server and jwt I still don&#39;t see any call in log with nav or postman","body":"After changing lib to server and jwt I still don&#39;t see any call in log with nav or postman"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1664296434,"post_id":73860827,"comment_id":130437229,"body_markdown":"[angular-oauth2-oidc](https://github.com/manfredsteyer/angular-oauth2-oidc) is not the same as [angular-auth-oidc-client](https://github.com/damienbod/angular-auth-oidc-client), and I have a clear preference for the 2nd. Have you solely opened [the doc](https://angular-auth-oidc-client.com/)? Because my Angular apps do send bearer tokens (and I can see it both in the browser and on the server). If using Postman, you have to go to Authorization tab of your request (or collection), setup OAuth2 and aquire a token before sending your request.","body":"<a href=\"https://github.com/manfredsteyer/angular-oauth2-oidc\" rel=\"nofollow noreferrer\">angular-oauth2-oidc</a> is not the same as <a href=\"https://github.com/damienbod/angular-auth-oidc-client\" rel=\"nofollow noreferrer\">angular-auth-oidc-client</a>, and I have a clear preference for the 2nd. Have you solely opened <a href=\"https://angular-auth-oidc-client.com/\" rel=\"nofollow noreferrer\">the doc</a>? Because my Angular apps do send bearer tokens (and I can see it both in the browser and on the server). If using Postman, you have to go to Authorization tab of your request (or collection), setup OAuth2 and aquire a token before sending your request."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1664296773,"post_id":73860827,"comment_id":130437350,"body_markdown":"Last, you should read a bit more about OAuth2 and its OpenID extension (starting with [the article](https://dzone.com/articles/spring-oauth2-resource-servers) I already linked), I&#39;m not sure you master the subject enough. Also your conf still references oauth2Login. The preceding article has a complete resource-server sample and it doesn&#39;t. Follow links before commenting on an answer.","body":"Last, you should read a bit more about OAuth2 and its OpenID extension (starting with <a href=\"https://dzone.com/articles/spring-oauth2-resource-servers\" rel=\"nofollow noreferrer\">the article</a> I already linked), I&#39;m not sure you master the subject enough. Also your conf still references oauth2Login. The preceding article has a complete resource-server sample and it doesn&#39;t. Follow links before commenting on an answer."},{"owner":{"account_id":17330298,"reputation":127,"user_id":12553583,"display_name":"Jack Boch"},"score":1,"creation_date":1664896245,"post_id":73860827,"comment_id":130572225,"body_markdown":"your link is dead, how to test?","body":"your link is dead, how to test?"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1664902248,"post_id":73860827,"comment_id":130574289,"body_markdown":"Here is another one https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials","body":"Here is another one <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">github.com/ch4mpy/spring-addons/tree/master/samples/tutorial&zwnj;&#8203;s</a>"}],"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664241728,"creation_date":1664233853,"answer_id":73860827,"question_id":73851253,"body_markdown":"First, do not try to decode nor interpret access-tokens client side (in you Angular app). Just forward it in authorization header. If you need authenticated user data on the client, use ID-token (or query authorization-server user end-point)\r\n\r\nSecond, don&#39;t write OAuth2 logic yourself in your Angular app. Use a lib like [angular-auth-oidc-client][1] instead. It provides with interceptor (as the one you wrote), route guards, access-tokens refreshing (before it expires), and more.\r\n\r\nLast, you should urgently read [this article][2]. In OAuth2 wording, a Spring API is a &quot;resource-server&quot;, not a &quot;client&quot;. Configure it as follow (details in the article): \r\n- use `spring-boot-starter-oauth2-resource-server` instead of `spring-boot-starter-oauth2-client`\r\n- use `http.oauth2ResourceServer().jwt()` (or `http.oauth2ResourceServer().opaqueToken()` if access-tokens are not JWTs) instead of `http.oauth2Login(...)`\r\n\r\n\r\n  [1]: https://github.com/damienbod/angular-auth-oidc-client\r\n  [2]: https://dzone.com/articles/spring-oauth2-resource-servers","title":"How to secure my front Angular application with an OAuth and a BAck java?","body":"<p>First, do not try to decode nor interpret access-tokens client side (in you Angular app). Just forward it in authorization header. If you need authenticated user data on the client, use ID-token (or query authorization-server user end-point)</p>\n<p>Second, don't write OAuth2 logic yourself in your Angular app. Use a lib like <a href=\"https://github.com/damienbod/angular-auth-oidc-client\" rel=\"nofollow noreferrer\">angular-auth-oidc-client</a> instead. It provides with interceptor (as the one you wrote), route guards, access-tokens refreshing (before it expires), and more.</p>\n<p>Last, you should urgently read <a href=\"https://dzone.com/articles/spring-oauth2-resource-servers\" rel=\"nofollow noreferrer\">this article</a>. In OAuth2 wording, a Spring API is a &quot;resource-server&quot;, not a &quot;client&quot;. Configure it as follow (details in the article):</p>\n<ul>\n<li>use <code>spring-boot-starter-oauth2-resource-server</code> instead of <code>spring-boot-starter-oauth2-client</code></li>\n<li>use <code>http.oauth2ResourceServer().jwt()</code> (or <code>http.oauth2ResourceServer().opaqueToken()</code> if access-tokens are not JWTs) instead of <code>http.oauth2Login(...)</code></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1664904751,"post_id":73949975,"comment_id":130575141,"body_markdown":"For unit and integration tests with mocked Authorization: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_jwtauthenticationtoken","body":"For unit and integration tests with mocked Authorization: <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_jwtauthenticationtoken\" rel=\"nofollow noreferrer\">github.com/ch4mpy/spring-addons/tree/master/samples/tutorial&zwnj;&#8203;s/&hellip;</a>"}],"tags":[],"owner":{"account_id":17330298,"reputation":127,"user_id":12553583,"display_name":"Jack Boch"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664896081,"creation_date":1664896081,"answer_id":73949975,"question_id":73851253,"body_markdown":"I use this  and work\r\n``````java\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class OAuth2SecurityConfig {\r\n\r\n    @Bean\r\n    public SecurityFilterChain configure(final HttpSecurity http) throws Exception {\r\n\r\n        http.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\r\n                .authorizeRequests().anyRequest().authenticated().and()\r\n.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and().cors().and().csrf().disable();\r\n        return http.build();\r\n    }\r\n}\r\n``````\r\nBut I can&#39;t do the integration tests on my APIs and on the connection","title":"How to secure my front Angular application with an OAuth and a BAck java?","body":"<p>I use this  and work</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class OAuth2SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain configure(final HttpSecurity http) throws Exception {\n\n        http.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\n                .authorizeRequests().anyRequest().authenticated().and()\n.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and().cors().and().csrf().disable();\n        return http.build();\n    }\n}\n</code></pre>\n<p>But I can't do the integration tests on my APIs and on the connection</p>\n"}],"owner":{"account_id":17330298,"reputation":127,"user_id":12553583,"display_name":"Jack Boch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":585,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1664896081,"creation_date":1664179898,"question_id":73851253,"body_markdown":"I have a Java11 springboot Angular13 application with lib angular-oauth2-oidc, and I have open id connect authentication.\r\n\r\nSo, in front, I have the token and I add it my requests, and in Back I have security the application, but I don&#39;t have a log while I&#39;m in level TRACE, but I don&#39;t have no log on front calls.\r\n\r\nSo I don&#39;t know what is blocking the communication between the front and the java backend.\r\n\r\nCommunication back-OAuth ok, and front-OAuth ok\r\n\r\nOAuth2 mode is  \r\n\r\n\r\nrequest front Implicit Grant.\r\n``````\r\nRequest URL: http://localhost:8080/api/domains/sync\r\nReferrer Policy: strict-origin-when-cross-origin\r\nProvisional headers are shown\r\nLearn more\r\nAccept: application/json, text/plain, */*\r\nAuthorization: Bearer [object Object]\r\nContent-Type: application/json\r\nReferer: http://localhost:4200/\r\nsec-ch-ua: &quot;Google Chrome&quot;;v=&quot;105&quot;, &quot;Not)A;Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;105&quot;\r\nsec-ch-ua-mobile: ?0\r\nsec-ch-ua-platform: &quot;Windows&quot;\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36\r\n\r\n\r\nRequest URL: http://localhost:8080/api/domains/sync\r\nReferrer Policy: strict-origin-when-cross-origin\r\nAccept: */*\r\nAccept-Encoding: gzip, deflate, br\r\nAccept-Language: fr-FR,fr;q=0.9\r\nAccess-Control-Request-Headers: authorization,content-type\r\nAccess-Control-Request-Method: POST\r\nConnection: keep-alive\r\nHost: localhost:8080\r\nOrigin: XXX\r\nReferer: http://localhost:4200/\r\nSec-Fetch-Dest: empty\r\nSec-Fetch-Mode: cors\r\nSec-Fetch-Site: same-site\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36\r\n``````\r\nAngular\r\n``````js\r\n@Injectable({\r\n  providedIn: &#39;root&#39;,\r\n})\r\nexport class TokenInterceptorService implements HttpInterceptor {\r\n  constructor(private authService: InitialAuthService) {}\r\n  intercept(\r\n    request: HttpRequest&lt;any&gt;,\r\n    next: HttpHandler\r\n  ): Observable&lt;HttpEvent&lt;any&gt;&gt; {\r\n    const  token = this.authService.decodedAccessToken? this.authService.decodedAccessToken:null;\r\n    if (typeof token != &#39;undefined&#39; &amp;&amp; token) {\r\n      request = request.clone({\r\n        setHeaders: {\r\n          Authorization: `Bearer ` + token,\r\n        },\r\n      });\r\n      console.debug(&quot;new request =&gt;&quot;);\r\n      console.debug(request);\r\n    }\r\n    return next.handle(request).pipe(\r\n      catchError((err) =&gt; {\r\n        console.error(err);\r\n        if (err.status === 401) {\r\n        }\r\n        const error = err.error.message || err.statusText;\r\n        return throwError(error);\r\n      })\r\n    );\r\n  }\r\n}\r\n``````\r\nJava\r\n``````java\r\n@Configuration\r\npublic class OAuth2SecurityConfig {\r\n    @Bean\r\n    SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\r\n        http\r\n                .authorizeExchange(exchanges -&gt;\r\n                        exchanges\r\n                                .pathMatchers(&quot;/&quot;, &quot;/error&quot;).permitAll()\r\n                                .anyExchange().authenticated()\r\n                );\r\n        return http.build();\r\n    }\r\n}\r\n@Controller\r\npublic class UserController {\r\n    @GetMapping(&quot;/&quot;)\r\n    public String index() {\r\n        return &quot;index&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/user&quot;)\r\n    public String user(Model model,\r\n                       @AuthenticationPrincipal OidcUser oidcUser) {\r\n        model.addAttribute(&quot;userName&quot;, oidcUser.getName());\r\n        model.addAttribute(&quot;audience&quot;, oidcUser.getAudience());\r\n        return &quot;user&quot;;\r\n    }\r\n}\r\n``````\r\npom.xml\r\n``````xml\r\n&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n``````\r\n\r\nafter change\r\n\r\nangular\r\n`````js\r\nimports: [OAuthModule.forRoot({\r\n    resourceServer: {\r\n        allowedUrls: [environment.url],\r\n        sendAccessToken: true\r\n    }\r\n})],\r\n``````\r\nJava\r\n``````java\r\n@Bean\r\n    SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\r\n        http.oauth2ResourceServer().jwt();\r\n        http\r\n                .authorizeExchange(exchanges -&gt;\r\n                        exchanges\r\n                                .pathMatchers(&quot;/&quot;, &quot;/error&quot;).permitAll()\r\n                                .anyExchange().authenticated()\r\n                );\r\n        return http.build();\r\n``````\r\n``````\r\nAccept: application/json, text/plain, */*\r\nAccept-Encoding: gzip, deflate, br\r\nAccept-Language: fr,fr-FR;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\r\nAuthorization: Bearer 4NzAsImNsaWVudF9pZCI6Ijg1OTE1NGRkZmFlNzQyMDdiN2ZmODc0ODc5ZjVhYTNjLU1TU0FkbWl...\r\nConnection: keep-alive\r\nHost: localhost:8080\r\nOrigin: http://localhost:4200\r\nReferer: http://localhost:4200/\r\nsec-ch-ua: &quot;Microsoft Edge&quot;;v=&quot;105&quot;, &quot;Not)A;Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;105&quot;\r\nsec-ch-ua-mobile: ?0\r\nsec-ch-ua-platform: &quot;Windows&quot;\r\nSec-Fetch-Dest: empty\r\nSec-Fetch-Mode: cors\r\nSec-Fetch-Site: same-site\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36 Edg/105.0.1343.50\r\n``````\r\n\r\nI have no role, scope: &quot;openid&quot;\r\n\r\nI just want my services to be authenticated.\r\n\r\nI added the following options\r\n\r\nI have no control over the oauth2 server, because i just consume it and many other application use it\r\n\r\nI get this nothing happens level log debug i try example and example and my car\r\n\r\n`@EnableWebSecurity(debug = true)\r\n@EnableGlobalMethodSecurity(securedEnabled=true, jsr250Enabled=true, prePostEnabled=true)`\r\n\r\n\r\n``````\r\n************************************************************\r\n\r\nRequest received for OPTIONS &#39;/api/domains/&#39;:\r\n\r\norg.apache.catalina.connector.RequestFacade@18b486f4\r\n\r\nservletPath:/api/domains/\r\npathInfo:null\r\nheaders: \r\nhost: localhost:8080\r\nconnection: keep-alive\r\npragma: no-cache\r\ncache-control: no-cache\r\naccept: */*\r\naccess-control-request-method: POST\r\naccess-control-request-headers: authorization,content-type\r\norigin: XXX\r\nuser-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36\r\nsec-fetch-mode: cors\r\nsec-fetch-site: same-site\r\nsec-fetch-dest: empty\r\nreferer: http://localhost:4200/\r\naccept-encoding: gzip, deflate, br\r\naccept-language: fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7\r\n\r\n\r\nSecurity filter chain: [\r\n  DisableEncodeUrlFilter\r\n  ChannelProcessingFilter\r\n  WebAsyncManagerIntegrationFilter\r\n  SecurityContextPersistenceFilter\r\n  HeaderWriterFilter\r\n  CorsFilter\r\n  CsrfFilter\r\n  LogoutFilter\r\n  BearerTokenAuthenticationFilter\r\n  RequestCacheAwareFilter\r\n  SecurityContextHolderAwareRequestFilter\r\n  AnonymousAuthenticationFilter\r\n  SessionManagementFilter\r\n  ExceptionTranslationFilter\r\n  FilterSecurityInterceptor\r\n]\r\n\r\n\r\n************************************************************\r\n\r\n``````","title":"How to secure my front Angular application with an OAuth and a BAck java?","body":"<p>I have a Java11 springboot Angular13 application with lib angular-oauth2-oidc, and I have open id connect authentication.</p>\n<p>So, in front, I have the token and I add it my requests, and in Back I have security the application, but I don't have a log while I'm in level TRACE, but I don't have no log on front calls.</p>\n<p>So I don't know what is blocking the communication between the front and the java backend.</p>\n<p>Communication back-OAuth ok, and front-OAuth ok</p>\n<p>OAuth2 mode is</p>\n<p>request front Implicit Grant.</p>\n<pre><code>Request URL: http://localhost:8080/api/domains/sync\nReferrer Policy: strict-origin-when-cross-origin\nProvisional headers are shown\nLearn more\nAccept: application/json, text/plain, */*\nAuthorization: Bearer [object Object]\nContent-Type: application/json\nReferer: http://localhost:4200/\nsec-ch-ua: &quot;Google Chrome&quot;;v=&quot;105&quot;, &quot;Not)A;Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;105&quot;\nsec-ch-ua-mobile: ?0\nsec-ch-ua-platform: &quot;Windows&quot;\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36\n\n\nRequest URL: http://localhost:8080/api/domains/sync\nReferrer Policy: strict-origin-when-cross-origin\nAccept: */*\nAccept-Encoding: gzip, deflate, br\nAccept-Language: fr-FR,fr;q=0.9\nAccess-Control-Request-Headers: authorization,content-type\nAccess-Control-Request-Method: POST\nConnection: keep-alive\nHost: localhost:8080\nOrigin: XXX\nReferer: http://localhost:4200/\nSec-Fetch-Dest: empty\nSec-Fetch-Mode: cors\nSec-Fetch-Site: same-site\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36\n</code></pre>\n<p>Angular</p>\n<pre class=\"lang-js prettyprint-override\"><code>@Injectable({\n  providedIn: 'root',\n})\nexport class TokenInterceptorService implements HttpInterceptor {\n  constructor(private authService: InitialAuthService) {}\n  intercept(\n    request: HttpRequest&lt;any&gt;,\n    next: HttpHandler\n  ): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n    const  token = this.authService.decodedAccessToken? this.authService.decodedAccessToken:null;\n    if (typeof token != 'undefined' &amp;&amp; token) {\n      request = request.clone({\n        setHeaders: {\n          Authorization: `Bearer ` + token,\n        },\n      });\n      console.debug(&quot;new request =&gt;&quot;);\n      console.debug(request);\n    }\n    return next.handle(request).pipe(\n      catchError((err) =&gt; {\n        console.error(err);\n        if (err.status === 401) {\n        }\n        const error = err.error.message || err.statusText;\n        return throwError(error);\n      })\n    );\n  }\n}\n</code></pre>\n<p>Java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class OAuth2SecurityConfig {\n    @Bean\n    SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\n        http\n                .authorizeExchange(exchanges -&gt;\n                        exchanges\n                                .pathMatchers(&quot;/&quot;, &quot;/error&quot;).permitAll()\n                                .anyExchange().authenticated()\n                );\n        return http.build();\n    }\n}\n@Controller\npublic class UserController {\n    @GetMapping(&quot;/&quot;)\n    public String index() {\n        return &quot;index&quot;;\n    }\n\n    @GetMapping(&quot;/user&quot;)\n    public String user(Model model,\n                       @AuthenticationPrincipal OidcUser oidcUser) {\n        model.addAttribute(&quot;userName&quot;, oidcUser.getName());\n        model.addAttribute(&quot;audience&quot;, oidcUser.getAudience());\n        return &quot;user&quot;;\n    }\n}\n</code></pre>\n<p>pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>after change</p>\n<p>angular</p>\n<pre class=\"lang-js prettyprint-override\"><code>imports: [OAuthModule.forRoot({\n    resourceServer: {\n        allowedUrls: [environment.url],\n        sendAccessToken: true\n    }\n})],\n</code></pre>\n<p>Java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\n    SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\n        http.oauth2ResourceServer().jwt();\n        http\n                .authorizeExchange(exchanges -&gt;\n                        exchanges\n                                .pathMatchers(&quot;/&quot;, &quot;/error&quot;).permitAll()\n                                .anyExchange().authenticated()\n                );\n        return http.build();\n</code></pre>\n<pre><code>Accept: application/json, text/plain, */*\nAccept-Encoding: gzip, deflate, br\nAccept-Language: fr,fr-FR;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\nAuthorization: Bearer 4NzAsImNsaWVudF9pZCI6Ijg1OTE1NGRkZmFlNzQyMDdiN2ZmODc0ODc5ZjVhYTNjLU1TU0FkbWl...\nConnection: keep-alive\nHost: localhost:8080\nOrigin: http://localhost:4200\nReferer: http://localhost:4200/\nsec-ch-ua: &quot;Microsoft Edge&quot;;v=&quot;105&quot;, &quot;Not)A;Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;105&quot;\nsec-ch-ua-mobile: ?0\nsec-ch-ua-platform: &quot;Windows&quot;\nSec-Fetch-Dest: empty\nSec-Fetch-Mode: cors\nSec-Fetch-Site: same-site\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36 Edg/105.0.1343.50\n</code></pre>\n<p>I have no role, scope: &quot;openid&quot;</p>\n<p>I just want my services to be authenticated.</p>\n<p>I added the following options</p>\n<p>I have no control over the oauth2 server, because i just consume it and many other application use it</p>\n<p>I get this nothing happens level log debug i try example and example and my car</p>\n<p><code>@EnableWebSecurity(debug = true) @EnableGlobalMethodSecurity(securedEnabled=true, jsr250Enabled=true, prePostEnabled=true)</code></p>\n<pre><code>************************************************************\n\nRequest received for OPTIONS '/api/domains/':\n\norg.apache.catalina.connector.RequestFacade@18b486f4\n\nservletPath:/api/domains/\npathInfo:null\nheaders: \nhost: localhost:8080\nconnection: keep-alive\npragma: no-cache\ncache-control: no-cache\naccept: */*\naccess-control-request-method: POST\naccess-control-request-headers: authorization,content-type\norigin: XXX\nuser-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36\nsec-fetch-mode: cors\nsec-fetch-site: same-site\nsec-fetch-dest: empty\nreferer: http://localhost:4200/\naccept-encoding: gzip, deflate, br\naccept-language: fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7\n\n\nSecurity filter chain: [\n  DisableEncodeUrlFilter\n  ChannelProcessingFilter\n  WebAsyncManagerIntegrationFilter\n  SecurityContextPersistenceFilter\n  HeaderWriterFilter\n  CorsFilter\n  CsrfFilter\n  LogoutFilter\n  BearerTokenAuthenticationFilter\n  RequestCacheAwareFilter\n  SecurityContextHolderAwareRequestFilter\n  AnonymousAuthenticationFilter\n  SessionManagementFilter\n  ExceptionTranslationFilter\n  FilterSecurityInterceptor\n]\n\n\n************************************************************\n\n</code></pre>\n"},{"tags":["java","apache-kafka"],"answers":[{"tags":[],"owner":{"account_id":16791300,"reputation":83,"user_id":12138892,"display_name":"Mykyta Piddubskiy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1664895817,"creation_date":1664796878,"answer_id":73934832,"question_id":73909501,"body_markdown":"As I found out if set log level to trace (not debug) then I see the reason:\r\n\r\n    About to close the idle connection from 2147482646 due to being idle for 540005 millis\r\n    Node 2147482646 disconnected.\r\n\r\nBecause:\r\n\r\n    connections.max.idle.ms 600000 (10mins) is default for server\r\n    connections.max.idle.ms 540000 (9mins) is default for consumers\r\n\r\nBut I still cant get why a connection is idle. Opened another question related to it. \r\nhttps://stackoverflow.com/questions/73947132/when-kafka-connection-is-idle","title":"Kafka group coordinator disconnects by uknown reason each 10 minis","body":"<p>As I found out if set log level to trace (not debug) then I see the reason:</p>\n<pre><code>About to close the idle connection from 2147482646 due to being idle for 540005 millis\nNode 2147482646 disconnected.\n</code></pre>\n<p>Because:</p>\n<pre><code>connections.max.idle.ms 600000 (10mins) is default for server\nconnections.max.idle.ms 540000 (9mins) is default for consumers\n</code></pre>\n<p>But I still cant get why a connection is idle. Opened another question related to it.\n<a href=\"https://stackoverflow.com/questions/73947132/when-kafka-connection-is-idle\">When Kafka connection is idle?</a></p>\n"}],"owner":{"account_id":16791300,"reputation":83,"user_id":12138892,"display_name":"Mykyta Piddubskiy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2920,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73934832,"answer_count":1,"score":1,"last_activity_date":1664895817,"creation_date":1664544410,"question_id":73909501,"body_markdown":"I faced an issue that my Kafka does rebalancing almost each 5-10 min for an unknown reason. I use Kafka and apache storm. A typical situation that logs before Backpressure (Strom stuff) repeating but after some time I see Node 2147482646 disconnected and other logs with  &quot;coordinator unavailable.isDisconnected: true&quot; and after this everything is rebalancing and as for me it&#39;s not a healthy situation despite the fact that Kafka works fine.\r\n\r\nAlmost all my topics have 3 replicas and 10 partitions and I have 10 Spouts (10 consumers)\r\n\r\nIve read that such configs as:\r\n\r\n    heartbeat.interval.ms\r\n    session.timeout.ms\r\n    rebalance.timeout.ms\r\ncan affect this. My set up was:\r\n\r\n    heartbeat.interval.ms: 5000\r\n    session.timeout.ms: 30000\r\n    rebalance.timeout.ms: 60000\r\nAnd I thought that maybe due to some connection issues 4-5 heartbeat messages are not enough and tried heartbeat.interval.ms: 2000 but it did not help.\r\n\r\nAs I understood from searching kafka lib is that it happens in NetworkClient in poll() method and later there handleDisconnections(responses, updatedNow) and there selector is already disconnected.\r\n\r\nWhat else can cause such kind of issue?\r\n```\r\n2022-09-30 10:59:54.599 o.a.s.k.s.KafkaSpout Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Polled [0] records from Kafka\r\n2022-09-30 10:59:54.599 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Resuming partitions []\r\n2022-09-30 10:59:54.601 o.a.s.k.s.KafkaSpoutRetryExponentialBackoff Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Topic partitions with entries ready to be retried [{}] \r\n2022-09-30 10:59:54.601 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Pausing partitions []\r\n2022-09-30 10:59:54.614 o.a.s.g.LoadAwareShuffleGrouping refresh-load-timer [DEBUG] targetTask 1 is in LocalityScope RACK_LOCAL\r\n2022-09-30 10:59:54.615 o.a.s.g.LoadAwareShuffleGrouping refresh-load-timer [DEBUG] targetTask 2 is in LocalityScope WORKER_LOCAL\r\n2022-09-30 10:59:54.615 o.a.s.g.LoadAwareShuffleGrouping refresh-load-timer [DEBUG] targetTask 3 is in LocalityScope RACK_LOCAL\r\n2022-09-30 10:59:54.615 o.a.s.g.LoadAwareShuffleGrouping refresh-load-timer [DEBUG] targetTask 4 is in LocalityScope WORKER_LOCAL\r\n2022-09-30 10:59:54.630 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:54.630 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:54.680 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:54.680 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:54.731 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:54.731 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:54.781 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:54.781 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:54.801 o.a.s.k.s.KafkaSpout Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Polled [0] records from Kafka\r\n2022-09-30 10:59:54.801 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Resuming partitions []\r\n2022-09-30 10:59:54.802 o.a.s.k.s.KafkaSpoutRetryExponentialBackoff Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Topic partitions with entries ready to be retried [{}] \r\n2022-09-30 10:59:54.803 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Pausing partitions []\r\n2022-09-30 10:59:54.831 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:54.832 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:54.882 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:54.882 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:54.933 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:54.933 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:54.983 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:54.983 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:54.995 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Received FETCH response from node 1003 for request with header RequestHeader(apiKey=FETCH, apiVersion=11, clientId=consumer-segmentation.check.groupid-1, correlationId=2202): FetchResponseData(throttleTimeMs=0, errorCode=0, sessionId=808668183, responses=[])\r\n2022-09-30 10:59:54.995 o.a.k.c.FetchSessionHandler Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Node 1003 sent an incremental fetch response with throttleTimeMs = 0 for session 808668183 with 0 response partition(s), 1 implied partition(s)\r\n2022-09-30 10:59:54.996 o.a.k.c.c.i.Fetcher Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Added READ_UNCOMMITTED fetch request for partition segmentation.check.queue-1 at position FetchPosition{offset=1136153, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[kafka-broker2:9092 (id: 1003 rack: /rack2)], epoch=4}} to node kafka-broker2:9092 (id: 1003 rack: /rack2)\r\n2022-09-30 10:59:54.996 o.a.k.c.FetchSessionHandler Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Built incremental fetch (sessionId=808668183, epoch=2152) for node 1003. Added 0 partition(s), altered 0 partition(s), removed 0 partition(s), replaced 0 partition(s) out of 1 partition(s)\r\n2022-09-30 10:59:54.996 o.a.k.c.c.i.Fetcher Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending READ_UNCOMMITTED IncrementalFetchRequest(toSend=(), toForget=(), toReplace=(), implied=(segmentation.check.queue-1), canUseTopicIds=False) to broker kafka-broker2:9092 (id: 1003 rack: /rack2)\r\n2022-09-30 10:59:54.996 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending FETCH request with header RequestHeader(apiKey=FETCH, apiVersion=11, clientId=consumer-segmentation.check.groupid-1, correlationId=2203) and timeout 60000 to node 1003: FetchRequestData(clusterId=null, replicaId=-1, maxWaitMs=500, minBytes=1, maxBytes=52428800, isolationLevel=0, sessionId=808668183, sessionEpoch=2152, topics=[], forgottenTopicsData=[], rackId=&#39;&#39;)\r\n2022-09-30 10:59:55.003 o.a.s.k.s.KafkaSpout Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Polled [0] records from Kafka\r\n2022-09-30 10:59:55.003 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Resuming partitions []\r\n2022-09-30 10:59:55.005 o.a.s.k.s.KafkaSpoutRetryExponentialBackoff Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Topic partitions with entries ready to be retried [{}] \r\n2022-09-30 10:59:55.005 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Pausing partitions []\r\n2022-09-30 10:59:55.033 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:55.034 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:55.084 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:55.084 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:55.134 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:55.134 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:55.185 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:55.185 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:55.206 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Node 2147482646 disconnected.\r\n2022-09-30 10:59:55.206 o.a.s.k.s.KafkaSpout Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Polled [0] records from Kafka\r\n2022-09-30 10:59:55.206 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Resuming partitions []\r\n2022-09-30 10:59:55.208 o.a.s.k.s.KafkaSpoutRetryExponentialBackoff Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Topic partitions with entries ready to be retried [{}] \r\n2022-09-30 10:59:55.208 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Pausing partitions []\r\n2022-09-30 10:59:55.208 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Group coordinator kafka-broker0:9092 (id: 2147482646 rack: null) is unavailable or invalid due to cause: coordinator unavailable.isDisconnected: true. Rediscovery will be attempted.\r\n2022-09-30 10:59:55.208 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending FindCoordinator request to broker kafka-broker0:9092 (id: 1001 rack: /rack0)\r\n2022-09-30 10:59:55.209 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending metadata request MetadataRequestData(topics=[MetadataRequestTopic(topicId=AAAAAAAAAAAAAAAAAAAAAA, name=&#39;segmentation.check.queue&#39;)], allowAutoTopicCreation=true, includeClusterAuthorizedOperations=false, includeTopicAuthorizedOperations=false) to node kafka-broker0:9092 (id: 1001 rack: /rack0)\r\n2022-09-30 10:59:55.209 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending METADATA request with header RequestHeader(apiKey=METADATA, apiVersion=9, clientId=consumer-segmentation.check.groupid-1, correlationId=2205) and timeout 60000 to node 1001: MetadataRequestData(topics=[MetadataRequestTopic(topicId=AAAAAAAAAAAAAAAAAAAAAA, name=&#39;segmentation.check.queue&#39;)], allowAutoTopicCreation=true, includeClusterAuthorizedOperations=false, includeTopicAuthorizedOperations=false)\r\n2022-09-30 10:59:55.210 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending FIND_COORDINATOR request with header RequestHeader(apiKey=FIND_COORDINATOR, apiVersion=3, clientId=consumer-segmentation.check.groupid-1, correlationId=2204) and timeout 60000 to node 1001: FindCoordinatorRequestData(key=&#39;segmentation.check.groupid&#39;, keyType=0, coordinatorKeys=[])\r\n2022-09-30 10:59:55.212 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Received METADATA response from node 1001 for request with header RequestHeader(apiKey=METADATA, apiVersion=9, clientId=consumer-segmentation.check.groupid-1, correlationId=2205): MetadataResponseData(throttleTimeMs=0, brokers=[MetadataResponseBroker(nodeId=1001, host=&#39;kafka-broker0&#39;, port=9092, rack=&#39;/rack0&#39;), MetadataResponseBroker(nodeId=1003, host=&#39;kafka-broker2&#39;, port=9092, rack=&#39;/rack2&#39;), MetadataResponseBroker(nodeId=1002, host=&#39;kafka-broker1&#39;, port=9092, rack=&#39;/rack1&#39;)], clusterId=&#39;fzb0hRraRb6mSwlmiWGOvA&#39;, controllerId=1001, topics=[MetadataResponseTopic(errorCode=0, name=&#39;segmentation.check.queue&#39;, topicId=AAAAAAAAAAAAAAAAAAAAAA, isInternal=false, partitions=[MetadataResponsePartition(errorCode=0, partitionIndex=0, leaderId=1002, leaderEpoch=3, replicaNodes=[1002, 1003, 1001], isrNodes=[1001, 1002, 1003], offlineReplicas=[]), MetadataResponsePartition(errorCode=0, partitionIndex=2, leaderId=1001, leaderEpoch=1, replicaNodes=[1001, 1002, 1003], isrNodes=[1001, 1002, 1003], offlineReplicas=[]), MetadataResponsePartition(errorCode=0, partitionIndex=1, leaderId=1003, leaderEpoch=4, replicaNodes=[1003, 1001, 1002], isrNodes=[1001, 1002, 1003], offlineReplicas=[])], topicAuthorizedOperations=0)], clusterAuthorizedOperations=0)\r\n2022-09-30 10:59:55.212 o.a.k.c.Metadata Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Updating last seen epoch for partition segmentation.check.queue-0 from 3 to epoch 3 from new metadata\r\n2022-09-30 10:59:55.212 o.a.k.c.Metadata Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Updating last seen epoch for partition segmentation.check.queue-2 from 1 to epoch 1 from new metadata\r\n2022-09-30 10:59:55.212 o.a.k.c.Metadata Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Updating last seen epoch for partition segmentation.check.queue-1 from 4 to epoch 4 from new metadata\r\n2022-09-30 10:59:55.213 o.a.k.c.Metadata Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Updated cluster metadata updateVersion 7 to MetadataCache{clusterId=&#39;fzb0hRraRb6mSwlmiWGOvA&#39;, nodes={1001=kafka-broker0:9092 (id: 1001 rack: /rack0), 1002=kafka-broker1:9092 (id: 1002 rack: /rack1), 1003=kafka-broker2:9092 (id: 1003 rack: /rack2)}, partitions=[PartitionMetadata(error=NONE, partition=segmentation.check.queue-0, leader=Optional[1002], leaderEpoch=Optional[3], replicas=1002,1003,1001, isr=1001,1002,1003, offlineReplicas=), PartitionMetadata(error=NONE, partition=segmentation.check.queue-2, leader=Optional[1001], leaderEpoch=Optional[1], replicas=1001,1002,1003, isr=1001,1002,1003, offlineReplicas=), PartitionMetadata(error=NONE, partition=segmentation.check.queue-1, leader=Optional[1003], leaderEpoch=Optional[4], replicas=1003,1001,1002, isr=1001,1002,1003, offlineReplicas=)], controller=kafka-broker0:9092 (id: 1001 rack: /rack0)}\r\n2022-09-30 10:59:55.213 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Received FIND_COORDINATOR response from node 1001 for request with header RequestHeader(apiKey=FIND_COORDINATOR, apiVersion=3, clientId=consumer-segmentation.check.groupid-1, correlationId=2204): FindCoordinatorResponseData(throttleTimeMs=0, errorCode=0, errorMessage=&#39;NONE&#39;, nodeId=1001, host=&#39;kafka-broker0&#39;, port=9092, coordinators=[])\r\n2022-09-30 10:59:55.214 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Received FindCoordinator response ClientResponse(receivedTimeMs=1664535595213, latencyMs=5, disconnected=false, requestHeader=RequestHeader(apiKey=FIND_COORDINATOR, apiVersion=3, clientId=consumer-segmentation.check.groupid-1, correlationId=2204), responseBody=FindCoordinatorResponseData(throttleTimeMs=0, errorCode=0, errorMessage=&#39;NONE&#39;, nodeId=1001, host=&#39;kafka-broker0&#39;, port=9092, coordinators=[]))\r\n2022-09-30 10:59:55.214 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Discovered group coordinator kafka-broker0:9092 (id: 2147482646 rack: null)\r\n2022-09-30 10:59:55.214 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Group coordinator kafka-broker0:9092 (id: 2147482646 rack: null) is unavailable or invalid due to cause: coordinator unavailable.isDisconnected: false. Rediscovery will be attempted.\r\n2022-09-30 10:59:55.214 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Requesting disconnect from last known coordinator kafka-broker0:9092 (id: 2147482646 rack: null)\r\n```","title":"Kafka group coordinator disconnects by uknown reason each 10 minis","body":"<p>I faced an issue that my Kafka does rebalancing almost each 5-10 min for an unknown reason. I use Kafka and apache storm. A typical situation that logs before Backpressure (Strom stuff) repeating but after some time I see Node 2147482646 disconnected and other logs with  &quot;coordinator unavailable.isDisconnected: true&quot; and after this everything is rebalancing and as for me it's not a healthy situation despite the fact that Kafka works fine.</p>\n<p>Almost all my topics have 3 replicas and 10 partitions and I have 10 Spouts (10 consumers)</p>\n<p>Ive read that such configs as:</p>\n<pre><code>heartbeat.interval.ms\nsession.timeout.ms\nrebalance.timeout.ms\n</code></pre>\n<p>can affect this. My set up was:</p>\n<pre><code>heartbeat.interval.ms: 5000\nsession.timeout.ms: 30000\nrebalance.timeout.ms: 60000\n</code></pre>\n<p>And I thought that maybe due to some connection issues 4-5 heartbeat messages are not enough and tried heartbeat.interval.ms: 2000 but it did not help.</p>\n<p>As I understood from searching kafka lib is that it happens in NetworkClient in poll() method and later there handleDisconnections(responses, updatedNow) and there selector is already disconnected.</p>\n<p>What else can cause such kind of issue?</p>\n<pre><code>2022-09-30 10:59:54.599 o.a.s.k.s.KafkaSpout Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Polled [0] records from Kafka\n2022-09-30 10:59:54.599 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Resuming partitions []\n2022-09-30 10:59:54.601 o.a.s.k.s.KafkaSpoutRetryExponentialBackoff Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Topic partitions with entries ready to be retried [{}] \n2022-09-30 10:59:54.601 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Pausing partitions []\n2022-09-30 10:59:54.614 o.a.s.g.LoadAwareShuffleGrouping refresh-load-timer [DEBUG] targetTask 1 is in LocalityScope RACK_LOCAL\n2022-09-30 10:59:54.615 o.a.s.g.LoadAwareShuffleGrouping refresh-load-timer [DEBUG] targetTask 2 is in LocalityScope WORKER_LOCAL\n2022-09-30 10:59:54.615 o.a.s.g.LoadAwareShuffleGrouping refresh-load-timer [DEBUG] targetTask 3 is in LocalityScope RACK_LOCAL\n2022-09-30 10:59:54.615 o.a.s.g.LoadAwareShuffleGrouping refresh-load-timer [DEBUG] targetTask 4 is in LocalityScope WORKER_LOCAL\n2022-09-30 10:59:54.630 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:54.630 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:54.680 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:54.680 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:54.731 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:54.731 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:54.781 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:54.781 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:54.801 o.a.s.k.s.KafkaSpout Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Polled [0] records from Kafka\n2022-09-30 10:59:54.801 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Resuming partitions []\n2022-09-30 10:59:54.802 o.a.s.k.s.KafkaSpoutRetryExponentialBackoff Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Topic partitions with entries ready to be retried [{}] \n2022-09-30 10:59:54.803 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Pausing partitions []\n2022-09-30 10:59:54.831 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:54.832 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:54.882 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:54.882 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:54.933 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:54.933 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:54.983 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:54.983 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:54.995 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Received FETCH response from node 1003 for request with header RequestHeader(apiKey=FETCH, apiVersion=11, clientId=consumer-segmentation.check.groupid-1, correlationId=2202): FetchResponseData(throttleTimeMs=0, errorCode=0, sessionId=808668183, responses=[])\n2022-09-30 10:59:54.995 o.a.k.c.FetchSessionHandler Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Node 1003 sent an incremental fetch response with throttleTimeMs = 0 for session 808668183 with 0 response partition(s), 1 implied partition(s)\n2022-09-30 10:59:54.996 o.a.k.c.c.i.Fetcher Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Added READ_UNCOMMITTED fetch request for partition segmentation.check.queue-1 at position FetchPosition{offset=1136153, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[kafka-broker2:9092 (id: 1003 rack: /rack2)], epoch=4}} to node kafka-broker2:9092 (id: 1003 rack: /rack2)\n2022-09-30 10:59:54.996 o.a.k.c.FetchSessionHandler Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Built incremental fetch (sessionId=808668183, epoch=2152) for node 1003. Added 0 partition(s), altered 0 partition(s), removed 0 partition(s), replaced 0 partition(s) out of 1 partition(s)\n2022-09-30 10:59:54.996 o.a.k.c.c.i.Fetcher Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending READ_UNCOMMITTED IncrementalFetchRequest(toSend=(), toForget=(), toReplace=(), implied=(segmentation.check.queue-1), canUseTopicIds=False) to broker kafka-broker2:9092 (id: 1003 rack: /rack2)\n2022-09-30 10:59:54.996 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending FETCH request with header RequestHeader(apiKey=FETCH, apiVersion=11, clientId=consumer-segmentation.check.groupid-1, correlationId=2203) and timeout 60000 to node 1003: FetchRequestData(clusterId=null, replicaId=-1, maxWaitMs=500, minBytes=1, maxBytes=52428800, isolationLevel=0, sessionId=808668183, sessionEpoch=2152, topics=[], forgottenTopicsData=[], rackId='')\n2022-09-30 10:59:55.003 o.a.s.k.s.KafkaSpout Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Polled [0] records from Kafka\n2022-09-30 10:59:55.003 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Resuming partitions []\n2022-09-30 10:59:55.005 o.a.s.k.s.KafkaSpoutRetryExponentialBackoff Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Topic partitions with entries ready to be retried [{}] \n2022-09-30 10:59:55.005 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Pausing partitions []\n2022-09-30 10:59:55.033 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:55.034 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:55.084 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:55.084 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:55.134 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:55.134 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:55.185 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:55.185 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:55.206 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Node 2147482646 disconnected.\n2022-09-30 10:59:55.206 o.a.s.k.s.KafkaSpout Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Polled [0] records from Kafka\n2022-09-30 10:59:55.206 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Resuming partitions []\n2022-09-30 10:59:55.208 o.a.s.k.s.KafkaSpoutRetryExponentialBackoff Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Topic partitions with entries ready to be retried [{}] \n2022-09-30 10:59:55.208 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Pausing partitions []\n2022-09-30 10:59:55.208 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Group coordinator kafka-broker0:9092 (id: 2147482646 rack: null) is unavailable or invalid due to cause: coordinator unavailable.isDisconnected: true. Rediscovery will be attempted.\n2022-09-30 10:59:55.208 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending FindCoordinator request to broker kafka-broker0:9092 (id: 1001 rack: /rack0)\n2022-09-30 10:59:55.209 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending metadata request MetadataRequestData(topics=[MetadataRequestTopic(topicId=AAAAAAAAAAAAAAAAAAAAAA, name='segmentation.check.queue')], allowAutoTopicCreation=true, includeClusterAuthorizedOperations=false, includeTopicAuthorizedOperations=false) to node kafka-broker0:9092 (id: 1001 rack: /rack0)\n2022-09-30 10:59:55.209 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending METADATA request with header RequestHeader(apiKey=METADATA, apiVersion=9, clientId=consumer-segmentation.check.groupid-1, correlationId=2205) and timeout 60000 to node 1001: MetadataRequestData(topics=[MetadataRequestTopic(topicId=AAAAAAAAAAAAAAAAAAAAAA, name='segmentation.check.queue')], allowAutoTopicCreation=true, includeClusterAuthorizedOperations=false, includeTopicAuthorizedOperations=false)\n2022-09-30 10:59:55.210 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending FIND_COORDINATOR request with header RequestHeader(apiKey=FIND_COORDINATOR, apiVersion=3, clientId=consumer-segmentation.check.groupid-1, correlationId=2204) and timeout 60000 to node 1001: FindCoordinatorRequestData(key='segmentation.check.groupid', keyType=0, coordinatorKeys=[])\n2022-09-30 10:59:55.212 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Received METADATA response from node 1001 for request with header RequestHeader(apiKey=METADATA, apiVersion=9, clientId=consumer-segmentation.check.groupid-1, correlationId=2205): MetadataResponseData(throttleTimeMs=0, brokers=[MetadataResponseBroker(nodeId=1001, host='kafka-broker0', port=9092, rack='/rack0'), MetadataResponseBroker(nodeId=1003, host='kafka-broker2', port=9092, rack='/rack2'), MetadataResponseBroker(nodeId=1002, host='kafka-broker1', port=9092, rack='/rack1')], clusterId='fzb0hRraRb6mSwlmiWGOvA', controllerId=1001, topics=[MetadataResponseTopic(errorCode=0, name='segmentation.check.queue', topicId=AAAAAAAAAAAAAAAAAAAAAA, isInternal=false, partitions=[MetadataResponsePartition(errorCode=0, partitionIndex=0, leaderId=1002, leaderEpoch=3, replicaNodes=[1002, 1003, 1001], isrNodes=[1001, 1002, 1003], offlineReplicas=[]), MetadataResponsePartition(errorCode=0, partitionIndex=2, leaderId=1001, leaderEpoch=1, replicaNodes=[1001, 1002, 1003], isrNodes=[1001, 1002, 1003], offlineReplicas=[]), MetadataResponsePartition(errorCode=0, partitionIndex=1, leaderId=1003, leaderEpoch=4, replicaNodes=[1003, 1001, 1002], isrNodes=[1001, 1002, 1003], offlineReplicas=[])], topicAuthorizedOperations=0)], clusterAuthorizedOperations=0)\n2022-09-30 10:59:55.212 o.a.k.c.Metadata Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Updating last seen epoch for partition segmentation.check.queue-0 from 3 to epoch 3 from new metadata\n2022-09-30 10:59:55.212 o.a.k.c.Metadata Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Updating last seen epoch for partition segmentation.check.queue-2 from 1 to epoch 1 from new metadata\n2022-09-30 10:59:55.212 o.a.k.c.Metadata Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Updating last seen epoch for partition segmentation.check.queue-1 from 4 to epoch 4 from new metadata\n2022-09-30 10:59:55.213 o.a.k.c.Metadata Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Updated cluster metadata updateVersion 7 to MetadataCache{clusterId='fzb0hRraRb6mSwlmiWGOvA', nodes={1001=kafka-broker0:9092 (id: 1001 rack: /rack0), 1002=kafka-broker1:9092 (id: 1002 rack: /rack1), 1003=kafka-broker2:9092 (id: 1003 rack: /rack2)}, partitions=[PartitionMetadata(error=NONE, partition=segmentation.check.queue-0, leader=Optional[1002], leaderEpoch=Optional[3], replicas=1002,1003,1001, isr=1001,1002,1003, offlineReplicas=), PartitionMetadata(error=NONE, partition=segmentation.check.queue-2, leader=Optional[1001], leaderEpoch=Optional[1], replicas=1001,1002,1003, isr=1001,1002,1003, offlineReplicas=), PartitionMetadata(error=NONE, partition=segmentation.check.queue-1, leader=Optional[1003], leaderEpoch=Optional[4], replicas=1003,1001,1002, isr=1001,1002,1003, offlineReplicas=)], controller=kafka-broker0:9092 (id: 1001 rack: /rack0)}\n2022-09-30 10:59:55.213 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Received FIND_COORDINATOR response from node 1001 for request with header RequestHeader(apiKey=FIND_COORDINATOR, apiVersion=3, clientId=consumer-segmentation.check.groupid-1, correlationId=2204): FindCoordinatorResponseData(throttleTimeMs=0, errorCode=0, errorMessage='NONE', nodeId=1001, host='kafka-broker0', port=9092, coordinators=[])\n2022-09-30 10:59:55.214 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Received FindCoordinator response ClientResponse(receivedTimeMs=1664535595213, latencyMs=5, disconnected=false, requestHeader=RequestHeader(apiKey=FIND_COORDINATOR, apiVersion=3, clientId=consumer-segmentation.check.groupid-1, correlationId=2204), responseBody=FindCoordinatorResponseData(throttleTimeMs=0, errorCode=0, errorMessage='NONE', nodeId=1001, host='kafka-broker0', port=9092, coordinators=[]))\n2022-09-30 10:59:55.214 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Discovered group coordinator kafka-broker0:9092 (id: 2147482646 rack: null)\n2022-09-30 10:59:55.214 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Group coordinator kafka-broker0:9092 (id: 2147482646 rack: null) is unavailable or invalid due to cause: coordinator unavailable.isDisconnected: false. Rediscovery will be attempted.\n2022-09-30 10:59:55.214 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Requesting disconnect from last known coordinator kafka-broker0:9092 (id: 2147482646 rack: null)\n</code></pre>\n"},{"tags":["java","json","tree","jolt"],"answers":[{"comments":[{"owner":{"account_id":16696811,"reputation":111,"user_id":12067782,"display_name":"Michal"},"score":0,"creation_date":1662446334,"post_id":73610316,"comment_id":130000480,"body_markdown":"HI @barbaros-&#214;zhan, thanks a lot!!, little Q plz: there is any way to choose which fields I want to map, not to map all the fields and then remove the unnecessary? in my example: map the details.place and details.status and not all the details object and then remove the details.reason and the same for the fields in the type object?","body":"HI @barbaros-&#214;zhan, thanks a lot!!, little Q plz: there is any way to choose which fields I want to map, not to map all the fields and then remove the unnecessary? in my example: map the details.place and details.status and not all the details object and then remove the details.reason and the same for the fields in the type object?"},{"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"score":0,"creation_date":1662446938,"post_id":73610316,"comment_id":130000647,"body_markdown":"Hi @Michal , it&#39;s also possible no to use a **remove** spec. , but I think using **remove** is practical in this case. As an example; you need to individually write one by one `&quot;id&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot;, &quot;typeName&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot;` in order to replace the line `&quot;*&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot;` nested within the `type` object. It goes on like that for all the desired attributes to filter out.","body":"Hi @Michal , it&#39;s also possible no to use a <b>remove</b> spec. , but I think using <b>remove</b> is practical in this case. As an example; you need to individually write one by one <code>&quot;id&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot;, &quot;typeName&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot;</code> in order to replace the line <code>&quot;*&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot;</code> nested within the <code>type</code> object. It goes on like that for all the desired attributes to filter out."}],"tags":[],"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662385269,"creation_date":1662385269,"answer_id":73610316,"question_id":73609108,"body_markdown":"You can use the following explained spec\r\n```json\r\n[\r\n  {\r\n    // Determine all key-value pairs partitioned under the main value and type.typeValue combinations \r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;item&quot;: {\r\n        &quot;*&quot;: {\r\n          &quot;item&quot;: {\r\n            &quot;*&quot;: {\r\n              &quot;item&quot;: {\r\n                &quot;*&quot;: {\r\n                  &quot;type&quot;: {\r\n                    &quot;@(1,id)&quot;: &quot;@(2,id).@(1,typeName).id&quot;, //traverse } character twice in order to reach the main id of the object\r\n                    &quot;@(1,action)&quot;: &quot;@(2,id).@(1,typeName).action&quot;,\r\n                    &quot;*&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot; // &amp;1 replicates &quot;type&quot; key, &amp; does the leaf value\r\n                  },\r\n                  &quot;*&quot;: &quot;@(1,id).@(1,type.typeName).&amp;&quot;\r\n                }\r\n              },\r\n              &quot;type&quot;: {\r\n                &quot;@(1,id)&quot;: &quot;@(2,id).@(1,typeName).id&quot;,\r\n                &quot;@(1,action)&quot;: &quot;@(2,id).@(1,typeName).action&quot;,\r\n                &quot;*&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot;\r\n              },\r\n              &quot;*&quot;: &quot;@(1,id).@(1,type.typeName).&amp;&quot;\r\n            }\r\n          },\r\n          &quot;type&quot;: {\r\n            &quot;@(1,id)&quot;: &quot;@(2,id).@(1,typeName).id&quot;,\r\n            &quot;@(1,action)&quot;: &quot;@(2,id).@(1,typeName).action&quot;,\r\n            &quot;*&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot;\r\n          },\r\n          &quot;*&quot;: &quot;@(1,id).@(1,type.typeName).&amp;&quot;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  {\r\n    // Filter out by the desired value(in this case it&#39;s &quot;xx&quot;) \r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;xx&quot;: &quot;&quot;\r\n      }\r\n    }\r\n  },\r\n  {\r\n    // Get rid of same repeating components of id and action arrays\r\n    &quot;operation&quot;: &quot;cardinality&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;id&quot;: &quot;ONE&quot;,\r\n        &quot;action&quot;: &quot;ONE&quot;\r\n      }\r\n    }\r\n  },\r\n  {\r\n    // Get rid of undesired attributes\r\n    &quot;operation&quot;: &quot;remove&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;type&quot;: {\r\n          &quot;typeGroup&quot;: &quot;&quot;,\r\n          &quot;typeValue&quot;: &quot;&quot;\r\n        },\r\n        &quot;det*&quot;: {\r\n          &quot;reason&quot;: &quot;&quot;\r\n        }\r\n      }\r\n    }\r\n  }\r\n]\r\n```","title":"JOLT shift transformation: filter by inner value of a property (not the name) - only some properties","body":"<p>You can use the following explained spec</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    // Determine all key-value pairs partitioned under the main value and type.typeValue combinations \n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;item&quot;: {\n        &quot;*&quot;: {\n          &quot;item&quot;: {\n            &quot;*&quot;: {\n              &quot;item&quot;: {\n                &quot;*&quot;: {\n                  &quot;type&quot;: {\n                    &quot;@(1,id)&quot;: &quot;@(2,id).@(1,typeName).id&quot;, //traverse } character twice in order to reach the main id of the object\n                    &quot;@(1,action)&quot;: &quot;@(2,id).@(1,typeName).action&quot;,\n                    &quot;*&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot; // &amp;1 replicates &quot;type&quot; key, &amp; does the leaf value\n                  },\n                  &quot;*&quot;: &quot;@(1,id).@(1,type.typeName).&amp;&quot;\n                }\n              },\n              &quot;type&quot;: {\n                &quot;@(1,id)&quot;: &quot;@(2,id).@(1,typeName).id&quot;,\n                &quot;@(1,action)&quot;: &quot;@(2,id).@(1,typeName).action&quot;,\n                &quot;*&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot;\n              },\n              &quot;*&quot;: &quot;@(1,id).@(1,type.typeName).&amp;&quot;\n            }\n          },\n          &quot;type&quot;: {\n            &quot;@(1,id)&quot;: &quot;@(2,id).@(1,typeName).id&quot;,\n            &quot;@(1,action)&quot;: &quot;@(2,id).@(1,typeName).action&quot;,\n            &quot;*&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot;\n          },\n          &quot;*&quot;: &quot;@(1,id).@(1,type.typeName).&amp;&quot;\n        }\n      }\n    }\n  },\n  {\n    // Filter out by the desired value(in this case it's &quot;xx&quot;) \n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;xx&quot;: &quot;&quot;\n      }\n    }\n  },\n  {\n    // Get rid of same repeating components of id and action arrays\n    &quot;operation&quot;: &quot;cardinality&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;id&quot;: &quot;ONE&quot;,\n        &quot;action&quot;: &quot;ONE&quot;\n      }\n    }\n  },\n  {\n    // Get rid of undesired attributes\n    &quot;operation&quot;: &quot;remove&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;type&quot;: {\n          &quot;typeGroup&quot;: &quot;&quot;,\n          &quot;typeValue&quot;: &quot;&quot;\n        },\n        &quot;det*&quot;: {\n          &quot;reason&quot;: &quot;&quot;\n        }\n      }\n    }\n  }\n]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664894410,"creation_date":1664894410,"answer_id":73949609,"question_id":73609108,"body_markdown":"You may try library _Josson_. Function `map()` build a new ObjectNode. Function `field()` modify the current ObjectNode and can be used to remove fields. The transformation statement is short and easy to understand.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n    Josson josson = Josson.fromJsonString(inputJSON);\r\n    JsonNode node = josson.getNode(\r\n        &quot;cumulateCollect(&quot; +\r\n        &quot;    [type.typeName=&#39;xx&#39;]&quot; +              // filter\r\n        &quot;        .field(type.map(id, typeName)&quot; + // need &quot;type.id&quot; and &quot;type.typeName&quot;\r\n        &quot;              ,details.field(reason:)&quot; + // remove &quot;details.reason&quot;\r\n        &quot;              ,item:)&quot; +                 // remove &quot;item&quot;\r\n        &quot;   ,item)&quot;);                             // next round\r\n    System.out.println(node.toPrettyString());\r\n","title":"JOLT shift transformation: filter by inner value of a property (not the name) - only some properties","body":"<p>You may try library <em>Josson</em>. Function <code>map()</code> build a new ObjectNode. Function <code>field()</code> modify the current ObjectNode and can be used to remove fields. The transformation statement is short and easy to understand.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson josson = Josson.fromJsonString(inputJSON);\nJsonNode node = josson.getNode(\n    &quot;cumulateCollect(&quot; +\n    &quot;    [type.typeName='xx']&quot; +              // filter\n    &quot;        .field(type.map(id, typeName)&quot; + // need &quot;type.id&quot; and &quot;type.typeName&quot;\n    &quot;              ,details.field(reason:)&quot; + // remove &quot;details.reason&quot;\n    &quot;              ,item:)&quot; +                 // remove &quot;item&quot;\n    &quot;   ,item)&quot;);                             // next round\nSystem.out.println(node.toPrettyString());\n</code></pre>\n"}],"owner":{"account_id":16696811,"reputation":111,"user_id":12067782,"display_name":"Michal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73610316,"answer_count":2,"score":0,"last_activity_date":1664894410,"creation_date":1662379551,"question_id":73609108,"body_markdown":"I am trying to transform a JSON using Jolt transformation looking for some input here.\r\nI am trying to filter by the inner value of the attribute.\r\n\r\n**My goal is to get an array that contains only the items with the typeName &#39;xx&#39;. But not all the item object, only some of the fields**\r\n\r\n```json\r\n{\r\n  &quot;id&quot;: &quot;11_1&quot;,\r\n  &quot;action&quot;: &quot;add&quot;,\r\n  &quot;payment&quot;: {\r\n    &quot;paied&quot;: true,\r\n    &quot;coin&quot;: &quot;dollar&quot;\r\n  },\r\n  &quot;type&quot;: {\r\n    &quot;id&quot;: &quot;11_1_xx&quot;,\r\n    &quot;typeName&quot;: &quot;xx&quot;\r\n  },\r\n  &quot;details&quot;: {\r\n    &quot;place&quot;: {\r\n      &quot;id&quot;: &quot;123&quot;,\r\n      &quot;name&quot;: &quot;xx&quot;\r\n    },\r\n    &quot;status&quot;: {\r\n      &quot;id&quot;: &quot;123&quot;,\r\n      &quot;name&quot;: &quot;xx&quot;\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nHere is my input and expected output:\r\n\r\n*Input*:\r\n\r\n```json\r\n{\r\n  &quot;id&quot;: 11,\r\n  &quot;item&quot;: [\r\n    {\r\n      &quot;id&quot;: &quot;11_1&quot;,\r\n      &quot;action&quot;: &quot;add&quot;,\r\n      &quot;payment&quot;: {\r\n        &quot;paied&quot;: true,\r\n        &quot;coin&quot;: &quot;dollar&quot;\r\n      },\r\n      &quot;type&quot;: {\r\n        &quot;id&quot;: &quot;11_1_xx&quot;,\r\n        &quot;typeName&quot;: &quot;xx&quot;,\r\n        &quot;typeGroup&quot;: &quot;xx&quot;,\r\n        &quot;typeValue&quot;: &quot;xx&quot;\r\n      },\r\n      &quot;details&quot;: {\r\n        &quot;place&quot;: {\r\n          &quot;id&quot;: &quot;123&quot;,\r\n          &quot;name&quot;: &quot;xx&quot;\r\n        },\r\n        &quot;status&quot;: {\r\n          &quot;id&quot;: &quot;123&quot;,\r\n          &quot;name&quot;: &quot;xx&quot;\r\n        },\r\n        &quot;reason&quot;: {\r\n          &quot;id&quot;: &quot;123&quot;,\r\n          &quot;name&quot;: &quot;xx&quot;\r\n        }\r\n      },\r\n      &quot;item&quot;: [\r\n        {\r\n          &quot;id&quot;: &quot;11_1_1&quot;,\r\n          &quot;action&quot;: &quot;add&quot;,\r\n          &quot;payment&quot;: {\r\n            &quot;paied&quot;: true,\r\n            &quot;coin&quot;: &quot;dollar&quot;\r\n          },\r\n          &quot;type&quot;: {\r\n            &quot;id&quot;: &quot;11_1_1_zz&quot;,\r\n            &quot;typeName&quot;: &quot;zz&quot;,\r\n            &quot;typeGroup&quot;: &quot;zz&quot;,\r\n            &quot;typeValue&quot;: &quot;zz&quot;\r\n          },\r\n          &quot;details&quot;: {\r\n            &quot;place&quot;: {\r\n              &quot;id&quot;: &quot;123&quot;,\r\n              &quot;name&quot;: &quot;xx&quot;\r\n            },\r\n            &quot;status&quot;: {\r\n              &quot;id&quot;: &quot;123&quot;,\r\n              &quot;name&quot;: &quot;xx&quot;\r\n            },\r\n            &quot;reason&quot;: {\r\n              &quot;id&quot;: &quot;123&quot;,\r\n              &quot;name&quot;: &quot;xx&quot;\r\n            }\r\n          },\r\n          &quot;item&quot;: [\r\n            {\r\n              &quot;id&quot;: &quot;11_1_1_1&quot;,\r\n              &quot;action&quot;: &quot;add&quot;,\r\n              &quot;payment&quot;: {\r\n                &quot;paied&quot;: true,\r\n                &quot;coin&quot;: &quot;NIS&quot;\r\n              },\r\n              &quot;type&quot;: {\r\n                &quot;id&quot;: &quot;11_1_1_1_xx&quot;,\r\n                &quot;typeName&quot;: &quot;xx&quot;,\r\n                &quot;typeGroup&quot;: &quot;xx&quot;,\r\n                &quot;typeValue&quot;: &quot;xx&quot;\r\n              },\r\n              &quot;details&quot;: {\r\n                &quot;place&quot;: {\r\n                  &quot;id&quot;: &quot;123&quot;,\r\n                  &quot;name&quot;: &quot;xx&quot;\r\n                },\r\n                &quot;status&quot;: {\r\n                  &quot;id&quot;: &quot;123&quot;,\r\n                  &quot;name&quot;: &quot;xx&quot;\r\n                },\r\n                &quot;reason&quot;: {\r\n                  &quot;id&quot;: &quot;123&quot;,\r\n                  &quot;name&quot;: &quot;xx&quot;\r\n                }\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          &quot;id&quot;: &quot;11_1_2&quot;,\r\n          &quot;action&quot;: &quot;add&quot;,\r\n          &quot;payment&quot;: {\r\n            &quot;paied&quot;: false,\r\n            &quot;coin&quot;: &quot;dollar&quot;\r\n          },\r\n          &quot;type&quot;: {\r\n            &quot;id&quot;: &quot;11_1_2_xx&quot;,\r\n            &quot;typeName&quot;: &quot;xx&quot;,\r\n            &quot;typeGroup&quot;: &quot;xx&quot;,\r\n            &quot;typeValue&quot;: &quot;xx&quot;\r\n          },\r\n          &quot;details&quot;: {\r\n            &quot;place&quot;: {\r\n              &quot;id&quot;: &quot;123&quot;,\r\n              &quot;name&quot;: &quot;xx&quot;\r\n            },\r\n            &quot;status&quot;: {\r\n              &quot;id&quot;: &quot;123&quot;,\r\n              &quot;name&quot;: &quot;xx&quot;\r\n            },\r\n            &quot;reason&quot;: {\r\n              &quot;id&quot;: &quot;123&quot;,\r\n              &quot;name&quot;: &quot;xx&quot;\r\n            }\r\n          },\r\n          &quot;item&quot;: [\r\n            {\r\n              &quot;id&quot;: &quot;11_1_2_1&quot;,\r\n              &quot;action&quot;: &quot;add&quot;,\r\n              &quot;payment&quot;: {\r\n                &quot;paied&quot;: false,\r\n                &quot;coin&quot;: &quot;NIS&quot;\r\n              },\r\n              &quot;type&quot;: {\r\n                &quot;id&quot;: &quot;11_1_2_1_zz&quot;,\r\n                &quot;typeName&quot;: &quot;zz&quot;,\r\n                &quot;typeGroup&quot;: &quot;zz&quot;,\r\n                &quot;typeValue&quot;: &quot;zz&quot;\r\n              },\r\n              &quot;details&quot;: {\r\n                &quot;place&quot;: {\r\n                  &quot;id&quot;: &quot;123&quot;,\r\n                  &quot;name&quot;: &quot;xx&quot;\r\n                },\r\n                &quot;status&quot;: {\r\n                  &quot;id&quot;: &quot;123&quot;,\r\n                  &quot;name&quot;: &quot;xx&quot;\r\n                },\r\n                &quot;reason&quot;: {\r\n                  &quot;id&quot;: &quot;123&quot;,\r\n                  &quot;name&quot;: &quot;xx&quot;\r\n                }\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n\r\n```\r\n\r\n*Expected output*:\r\n\r\n```json\r\n[\r\n  {\r\n    &quot;id&quot;: &quot;11_1&quot;,\r\n    &quot;action&quot;: &quot;add&quot;,\r\n    &quot;payment&quot;: {\r\n      &quot;paied&quot;: true,\r\n      &quot;coin&quot;: &quot;dollar&quot;\r\n    },\r\n    &quot;type&quot;: {\r\n      &quot;id&quot;: &quot;11_1_xx&quot;,\r\n      &quot;typeName&quot;: &quot;xx&quot;\r\n    },\r\n    &quot;details&quot;: {\r\n      &quot;place&quot;: {\r\n        &quot;id&quot;: &quot;123&quot;,\r\n        &quot;name&quot;: &quot;xx&quot;\r\n      },\r\n      &quot;status&quot;: {\r\n        &quot;id&quot;: &quot;123&quot;,\r\n        &quot;name&quot;: &quot;xx&quot;\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;id&quot;: &quot;11_1_1_1&quot;,\r\n    &quot;action&quot;: &quot;add&quot;,\r\n    &quot;payment&quot;: {\r\n      &quot;paied&quot;: true,\r\n      &quot;coin&quot;: &quot;NIS&quot;\r\n    },\r\n    &quot;type&quot;: {\r\n      &quot;id&quot;: &quot;11_1_1_1_xx&quot;,\r\n      &quot;typeName&quot;: &quot;xx&quot;\r\n    },\r\n    &quot;details&quot;: {\r\n      &quot;place&quot;: {\r\n        &quot;id&quot;: &quot;123&quot;,\r\n        &quot;name&quot;: &quot;xx&quot;\r\n      },\r\n      &quot;status&quot;: {\r\n        &quot;id&quot;: &quot;123&quot;,\r\n        &quot;name&quot;: &quot;xx&quot;\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;id&quot;: &quot;11_1_2&quot;,\r\n    &quot;action&quot;: &quot;add&quot;,\r\n    &quot;payment&quot;: {\r\n      &quot;paied&quot;: false,\r\n      &quot;coin&quot;: &quot;dollar&quot;\r\n    },\r\n    &quot;type&quot;: {\r\n      &quot;id&quot;: &quot;11_1_2_xx&quot;,\r\n      &quot;typeName&quot;: &quot;xx&quot;\r\n    },\r\n    &quot;details&quot;: {\r\n      &quot;place&quot;: {\r\n        &quot;id&quot;: &quot;123&quot;,\r\n        &quot;name&quot;: &quot;xx&quot;\r\n      },\r\n      &quot;status&quot;: {\r\n        &quot;id&quot;: &quot;123&quot;,\r\n        &quot;name&quot;: &quot;xx&quot;\r\n      }\r\n    }\r\n  }\r\n]\r\n\r\n```\r\n\r\nCan you please help me to write a simple spec that will do this?","title":"JOLT shift transformation: filter by inner value of a property (not the name) - only some properties","body":"<p>I am trying to transform a JSON using Jolt transformation looking for some input here.\nI am trying to filter by the inner value of the attribute.</p>\n<p><strong>My goal is to get an array that contains only the items with the typeName 'xx'. But not all the item object, only some of the fields</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;id&quot;: &quot;11_1&quot;,\n  &quot;action&quot;: &quot;add&quot;,\n  &quot;payment&quot;: {\n    &quot;paied&quot;: true,\n    &quot;coin&quot;: &quot;dollar&quot;\n  },\n  &quot;type&quot;: {\n    &quot;id&quot;: &quot;11_1_xx&quot;,\n    &quot;typeName&quot;: &quot;xx&quot;\n  },\n  &quot;details&quot;: {\n    &quot;place&quot;: {\n      &quot;id&quot;: &quot;123&quot;,\n      &quot;name&quot;: &quot;xx&quot;\n    },\n    &quot;status&quot;: {\n      &quot;id&quot;: &quot;123&quot;,\n      &quot;name&quot;: &quot;xx&quot;\n    }\n  }\n}\n</code></pre>\n<p>Here is my input and expected output:</p>\n<p><em>Input</em>:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;id&quot;: 11,\n  &quot;item&quot;: [\n    {\n      &quot;id&quot;: &quot;11_1&quot;,\n      &quot;action&quot;: &quot;add&quot;,\n      &quot;payment&quot;: {\n        &quot;paied&quot;: true,\n        &quot;coin&quot;: &quot;dollar&quot;\n      },\n      &quot;type&quot;: {\n        &quot;id&quot;: &quot;11_1_xx&quot;,\n        &quot;typeName&quot;: &quot;xx&quot;,\n        &quot;typeGroup&quot;: &quot;xx&quot;,\n        &quot;typeValue&quot;: &quot;xx&quot;\n      },\n      &quot;details&quot;: {\n        &quot;place&quot;: {\n          &quot;id&quot;: &quot;123&quot;,\n          &quot;name&quot;: &quot;xx&quot;\n        },\n        &quot;status&quot;: {\n          &quot;id&quot;: &quot;123&quot;,\n          &quot;name&quot;: &quot;xx&quot;\n        },\n        &quot;reason&quot;: {\n          &quot;id&quot;: &quot;123&quot;,\n          &quot;name&quot;: &quot;xx&quot;\n        }\n      },\n      &quot;item&quot;: [\n        {\n          &quot;id&quot;: &quot;11_1_1&quot;,\n          &quot;action&quot;: &quot;add&quot;,\n          &quot;payment&quot;: {\n            &quot;paied&quot;: true,\n            &quot;coin&quot;: &quot;dollar&quot;\n          },\n          &quot;type&quot;: {\n            &quot;id&quot;: &quot;11_1_1_zz&quot;,\n            &quot;typeName&quot;: &quot;zz&quot;,\n            &quot;typeGroup&quot;: &quot;zz&quot;,\n            &quot;typeValue&quot;: &quot;zz&quot;\n          },\n          &quot;details&quot;: {\n            &quot;place&quot;: {\n              &quot;id&quot;: &quot;123&quot;,\n              &quot;name&quot;: &quot;xx&quot;\n            },\n            &quot;status&quot;: {\n              &quot;id&quot;: &quot;123&quot;,\n              &quot;name&quot;: &quot;xx&quot;\n            },\n            &quot;reason&quot;: {\n              &quot;id&quot;: &quot;123&quot;,\n              &quot;name&quot;: &quot;xx&quot;\n            }\n          },\n          &quot;item&quot;: [\n            {\n              &quot;id&quot;: &quot;11_1_1_1&quot;,\n              &quot;action&quot;: &quot;add&quot;,\n              &quot;payment&quot;: {\n                &quot;paied&quot;: true,\n                &quot;coin&quot;: &quot;NIS&quot;\n              },\n              &quot;type&quot;: {\n                &quot;id&quot;: &quot;11_1_1_1_xx&quot;,\n                &quot;typeName&quot;: &quot;xx&quot;,\n                &quot;typeGroup&quot;: &quot;xx&quot;,\n                &quot;typeValue&quot;: &quot;xx&quot;\n              },\n              &quot;details&quot;: {\n                &quot;place&quot;: {\n                  &quot;id&quot;: &quot;123&quot;,\n                  &quot;name&quot;: &quot;xx&quot;\n                },\n                &quot;status&quot;: {\n                  &quot;id&quot;: &quot;123&quot;,\n                  &quot;name&quot;: &quot;xx&quot;\n                },\n                &quot;reason&quot;: {\n                  &quot;id&quot;: &quot;123&quot;,\n                  &quot;name&quot;: &quot;xx&quot;\n                }\n              }\n            }\n          ]\n        },\n        {\n          &quot;id&quot;: &quot;11_1_2&quot;,\n          &quot;action&quot;: &quot;add&quot;,\n          &quot;payment&quot;: {\n            &quot;paied&quot;: false,\n            &quot;coin&quot;: &quot;dollar&quot;\n          },\n          &quot;type&quot;: {\n            &quot;id&quot;: &quot;11_1_2_xx&quot;,\n            &quot;typeName&quot;: &quot;xx&quot;,\n            &quot;typeGroup&quot;: &quot;xx&quot;,\n            &quot;typeValue&quot;: &quot;xx&quot;\n          },\n          &quot;details&quot;: {\n            &quot;place&quot;: {\n              &quot;id&quot;: &quot;123&quot;,\n              &quot;name&quot;: &quot;xx&quot;\n            },\n            &quot;status&quot;: {\n              &quot;id&quot;: &quot;123&quot;,\n              &quot;name&quot;: &quot;xx&quot;\n            },\n            &quot;reason&quot;: {\n              &quot;id&quot;: &quot;123&quot;,\n              &quot;name&quot;: &quot;xx&quot;\n            }\n          },\n          &quot;item&quot;: [\n            {\n              &quot;id&quot;: &quot;11_1_2_1&quot;,\n              &quot;action&quot;: &quot;add&quot;,\n              &quot;payment&quot;: {\n                &quot;paied&quot;: false,\n                &quot;coin&quot;: &quot;NIS&quot;\n              },\n              &quot;type&quot;: {\n                &quot;id&quot;: &quot;11_1_2_1_zz&quot;,\n                &quot;typeName&quot;: &quot;zz&quot;,\n                &quot;typeGroup&quot;: &quot;zz&quot;,\n                &quot;typeValue&quot;: &quot;zz&quot;\n              },\n              &quot;details&quot;: {\n                &quot;place&quot;: {\n                  &quot;id&quot;: &quot;123&quot;,\n                  &quot;name&quot;: &quot;xx&quot;\n                },\n                &quot;status&quot;: {\n                  &quot;id&quot;: &quot;123&quot;,\n                  &quot;name&quot;: &quot;xx&quot;\n                },\n                &quot;reason&quot;: {\n                  &quot;id&quot;: &quot;123&quot;,\n                  &quot;name&quot;: &quot;xx&quot;\n                }\n              }\n            }\n          ]\n        }\n      ]\n    }\n  ]\n}\n\n</code></pre>\n<p><em>Expected output</em>:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;id&quot;: &quot;11_1&quot;,\n    &quot;action&quot;: &quot;add&quot;,\n    &quot;payment&quot;: {\n      &quot;paied&quot;: true,\n      &quot;coin&quot;: &quot;dollar&quot;\n    },\n    &quot;type&quot;: {\n      &quot;id&quot;: &quot;11_1_xx&quot;,\n      &quot;typeName&quot;: &quot;xx&quot;\n    },\n    &quot;details&quot;: {\n      &quot;place&quot;: {\n        &quot;id&quot;: &quot;123&quot;,\n        &quot;name&quot;: &quot;xx&quot;\n      },\n      &quot;status&quot;: {\n        &quot;id&quot;: &quot;123&quot;,\n        &quot;name&quot;: &quot;xx&quot;\n      }\n    }\n  },\n  {\n    &quot;id&quot;: &quot;11_1_1_1&quot;,\n    &quot;action&quot;: &quot;add&quot;,\n    &quot;payment&quot;: {\n      &quot;paied&quot;: true,\n      &quot;coin&quot;: &quot;NIS&quot;\n    },\n    &quot;type&quot;: {\n      &quot;id&quot;: &quot;11_1_1_1_xx&quot;,\n      &quot;typeName&quot;: &quot;xx&quot;\n    },\n    &quot;details&quot;: {\n      &quot;place&quot;: {\n        &quot;id&quot;: &quot;123&quot;,\n        &quot;name&quot;: &quot;xx&quot;\n      },\n      &quot;status&quot;: {\n        &quot;id&quot;: &quot;123&quot;,\n        &quot;name&quot;: &quot;xx&quot;\n      }\n    }\n  },\n  {\n    &quot;id&quot;: &quot;11_1_2&quot;,\n    &quot;action&quot;: &quot;add&quot;,\n    &quot;payment&quot;: {\n      &quot;paied&quot;: false,\n      &quot;coin&quot;: &quot;dollar&quot;\n    },\n    &quot;type&quot;: {\n      &quot;id&quot;: &quot;11_1_2_xx&quot;,\n      &quot;typeName&quot;: &quot;xx&quot;\n    },\n    &quot;details&quot;: {\n      &quot;place&quot;: {\n        &quot;id&quot;: &quot;123&quot;,\n        &quot;name&quot;: &quot;xx&quot;\n      },\n      &quot;status&quot;: {\n        &quot;id&quot;: &quot;123&quot;,\n        &quot;name&quot;: &quot;xx&quot;\n      }\n    }\n  }\n]\n\n</code></pre>\n<p>Can you please help me to write a simple spec that will do this?</p>\n"},{"tags":["java","flutter","dart","objectbox","flutter-objectbox"],"answers":[{"comments":[{"owner":{"account_id":20983655,"reputation":13,"user_id":15417961,"display_name":"Ali Haidar"},"score":1,"creation_date":1661387568,"post_id":73453717,"comment_id":129762768,"body_markdown":"Thank you so much, my friend! My problem is solved :)","body":"Thank you so much, my friend! My problem is solved :)"}],"tags":[],"owner":{"account_id":12639111,"reputation":1042,"user_id":9187282,"display_name":"Uwe - ObjectBox"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664894078,"creation_date":1661233824,"answer_id":73453717,"question_id":73393697,"body_markdown":"ObjectBox just supports storing [some base types by default][1]. For custom types you have to either [map them to a supported type][2], or I assume what you are looking for in this case [create a relation][3] to an `@Entity` class:\r\n\r\n    @Entity()\r\n    class Set {\r\n      int? id;\r\n      final exercise = ToOne&lt;Exercise&gt;();\r\n      final int? repetitions;\r\n    }\r\n\r\n    // To change the ToOne target:\r\n    set.exercise.target = Exercise();\r\n\r\n\r\n  [1]: https://docs.objectbox.io/advanced/custom-types\r\n  [2]: https://docs.objectbox.io/advanced/custom-types#convert-annotation-and-property-converter\r\n  [3]: https://docs.objectbox.io/relations","title":"Flutter ObjectBox - Can&#39;t generate DB model with custom class","body":"<p>ObjectBox just supports storing <a href=\"https://docs.objectbox.io/advanced/custom-types\" rel=\"nofollow noreferrer\">some base types by default</a>. For custom types you have to either <a href=\"https://docs.objectbox.io/advanced/custom-types#convert-annotation-and-property-converter\" rel=\"nofollow noreferrer\">map them to a supported type</a>, or I assume what you are looking for in this case <a href=\"https://docs.objectbox.io/relations\" rel=\"nofollow noreferrer\">create a relation</a> to an <code>@Entity</code> class:</p>\n<pre><code>@Entity()\nclass Set {\n  int? id;\n  final exercise = ToOne&lt;Exercise&gt;();\n  final int? repetitions;\n}\n\n// To change the ToOne target:\nset.exercise.target = Exercise();\n</code></pre>\n"}],"owner":{"account_id":20983655,"reputation":13,"user_id":15417961,"display_name":"Ali Haidar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":748,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664894078,"creation_date":1660762893,"question_id":73393697,"body_markdown":"Following the [NoSQL Database Storage | Flutter ObjectBox (vs Sqlite, Sqflite, Hive)][1], I am trying to setup an ObjectBox database with multiple classes. I currently have the following classes,  \r\n\r\n**Exercise.dart**  \r\n```\r\nimport &#39;package:objectbox/objectbox.dart&#39;;\r\n\r\n@Entity()\r\n@Sync()\r\nclass Exercise {\r\n  int? id;\r\n  final String? name;\r\n  final String? target;\r\n  final String? bodyPart;\r\n  final String? equipment;\r\n  final String? gifUrl;\r\n\r\n   Exercise({\r\n    this.id = 0,\r\n    required this.name,\r\n    required this.target,\r\n    required this.bodyPart,\r\n    required this.equipment,\r\n    required this.gifUrl,\r\n  });\r\n\r\n  factory Exercise.fromJson(Map&lt;String, dynamic&gt; json) {\r\n    return Exercise(\r\n        id: int.tryParse(json[&#39;id&#39;].toString()),\r\n        name: json[&quot;name&quot;].toString(),\r\n        target: json[&quot;target&quot;].toString(),\r\n        bodyPart: json[&quot;bodyPart&quot;].toString(),\r\n        equipment: json[&quot;equipment&quot;].toString(),\r\n        gifUrl: json[&quot;gifUrl&quot;].toString());\r\n  }\r\n}\r\n```  \r\nand  \r\n**Set.dart**\r\n```\r\nimport &#39;package:objectbox/objectbox.dart&#39;;\r\nimport &#39;package:pump_that_iron/models/exercise.dart&#39;;\r\n\r\n@Entity()\r\n@Sync()\r\nclass Set {\r\n  int? id;\r\n  final Exercise? exercise;\r\n  final int? repetitions;\r\n\r\n  Set({\r\n    this.id = 0,\r\n    required this.exercise,\r\n    required this.repetitions,\r\n  });\r\n}\r\n```\r\n\r\nFrom these classes I am trying to build a model class using ObjectBox and the `flutter pub run build_runner build` command. However, whenever that command is run, I get the following error,  \r\n&gt; Cannot use the default constructor of &#39;Set&#39;: don&#39;t know how to initialize param exercise - no such property.  \r\n\r\nas well as\r\n\r\n&gt; [WARNING] objectbox_generator:resolver on lib/models/set.dart: skipping property &#39;exercise&#39; in entity &#39;Set&#39;, as it has an unsupported type: &#39;Exercise?&#39;\r\n\r\nInitially, when running the build command with the `Exercise.dart` being the only present class, it is successful. However, as soon as I add the `Set.dart` file **containing the Exercise class as a variable**, I am no longer able to build. Another thing to note, is that when the Exercice variable is omitted from the Set class, it runs successfully.  \r\n\r\nI found the following [How initialize Objectbox entity with custom type?][2] SO thread with a similar problem and tried to replicate the steps by,  \r\n1. Adding a getExercise getter in the `Set.dart` class and adding it to the constructor  \r\n```\r\nSet({\r\n    this.id = 0,\r\n    this.exercise = getExercise,\r\n    required this.repetitions,\r\n  });\r\n\r\n  get getExercise =&gt; Exercise(\r\n      name: &quot;name&quot;,\r\n      target: &quot;target&quot;,\r\n      bodyPart: &quot;bodyPart&quot;,\r\n      equipment: &quot;equipment&quot;,\r\n      gifUrl: &quot;gifUrl&quot;);\r\n```\r\n2. This required me to make the `Exercise.dart` constructor constant, and making the following changes  \r\n```\r\nclass Exercise {\r\n  @Id(assignable: true)\r\n  final int? id;\r\n  ...\r\n\r\n  const Exercise({\r\n    this.id = 0,\r\n    ...\r\n  });\r\n```\r\n\r\nThis is now giving me a `The default value of an optional parameter must be constant.` error when trying to set the exercise variable at `this.exercise = getExercise`. I tried following the instructions from another SO thread [https://stackoverflow.com/questions/51907159/default-values-of-an-optional-parameter-must-be-constant][3], but I am still having issues.  \r\n\r\nI was wondering if anybody could help me set up my database and explain what is going wrong. Any help is appreciated.\r\n\r\nThank you.\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=BBlr8F8m9lo\r\n  [2]: https://stackoverflow.com/questions/70838139/how-initialize-objectbox-entity-with-custom-type\r\n  [3]: https://stackoverflow.com/questions/51907159/default-values-of-an-optional-parameter-must-be-constant","title":"Flutter ObjectBox - Can&#39;t generate DB model with custom class","body":"<p>Following the <a href=\"https://www.youtube.com/watch?v=BBlr8F8m9lo\" rel=\"nofollow noreferrer\">NoSQL Database Storage | Flutter ObjectBox (vs Sqlite, Sqflite, Hive)</a>, I am trying to setup an ObjectBox database with multiple classes. I currently have the following classes,</p>\n<p><strong>Exercise.dart</strong></p>\n<pre><code>import 'package:objectbox/objectbox.dart';\n\n@Entity()\n@Sync()\nclass Exercise {\n  int? id;\n  final String? name;\n  final String? target;\n  final String? bodyPart;\n  final String? equipment;\n  final String? gifUrl;\n\n   Exercise({\n    this.id = 0,\n    required this.name,\n    required this.target,\n    required this.bodyPart,\n    required this.equipment,\n    required this.gifUrl,\n  });\n\n  factory Exercise.fromJson(Map&lt;String, dynamic&gt; json) {\n    return Exercise(\n        id: int.tryParse(json['id'].toString()),\n        name: json[&quot;name&quot;].toString(),\n        target: json[&quot;target&quot;].toString(),\n        bodyPart: json[&quot;bodyPart&quot;].toString(),\n        equipment: json[&quot;equipment&quot;].toString(),\n        gifUrl: json[&quot;gifUrl&quot;].toString());\n  }\n}\n</code></pre>\n<p>and<br />\n<strong>Set.dart</strong></p>\n<pre><code>import 'package:objectbox/objectbox.dart';\nimport 'package:pump_that_iron/models/exercise.dart';\n\n@Entity()\n@Sync()\nclass Set {\n  int? id;\n  final Exercise? exercise;\n  final int? repetitions;\n\n  Set({\n    this.id = 0,\n    required this.exercise,\n    required this.repetitions,\n  });\n}\n</code></pre>\n<p>From these classes I am trying to build a model class using ObjectBox and the <code>flutter pub run build_runner build</code> command. However, whenever that command is run, I get the following error,</p>\n<blockquote>\n<p>Cannot use the default constructor of 'Set': don't know how to initialize param exercise - no such property.</p>\n</blockquote>\n<p>as well as</p>\n<blockquote>\n<p>[WARNING] objectbox_generator:resolver on lib/models/set.dart: skipping property 'exercise' in entity 'Set', as it has an unsupported type: 'Exercise?'</p>\n</blockquote>\n<p>Initially, when running the build command with the <code>Exercise.dart</code> being the only present class, it is successful. However, as soon as I add the <code>Set.dart</code> file <strong>containing the Exercise class as a variable</strong>, I am no longer able to build. Another thing to note, is that when the Exercice variable is omitted from the Set class, it runs successfully.</p>\n<p>I found the following <a href=\"https://stackoverflow.com/questions/70838139/how-initialize-objectbox-entity-with-custom-type\">How initialize Objectbox entity with custom type?</a> SO thread with a similar problem and tried to replicate the steps by,</p>\n<ol>\n<li>Adding a getExercise getter in the <code>Set.dart</code> class and adding it to the constructor</li>\n</ol>\n<pre><code>Set({\n    this.id = 0,\n    this.exercise = getExercise,\n    required this.repetitions,\n  });\n\n  get getExercise =&gt; Exercise(\n      name: &quot;name&quot;,\n      target: &quot;target&quot;,\n      bodyPart: &quot;bodyPart&quot;,\n      equipment: &quot;equipment&quot;,\n      gifUrl: &quot;gifUrl&quot;);\n</code></pre>\n<ol start=\"2\">\n<li>This required me to make the <code>Exercise.dart</code> constructor constant, and making the following changes</li>\n</ol>\n<pre><code>class Exercise {\n  @Id(assignable: true)\n  final int? id;\n  ...\n\n  const Exercise({\n    this.id = 0,\n    ...\n  });\n</code></pre>\n<p>This is now giving me a <code>The default value of an optional parameter must be constant.</code> error when trying to set the exercise variable at <code>this.exercise = getExercise</code>. I tried following the instructions from another SO thread <a href=\"https://stackoverflow.com/questions/51907159/default-values-of-an-optional-parameter-must-be-constant\">Default values of an optional parameter must be constant</a>, but I am still having issues.</p>\n<p>I was wondering if anybody could help me set up my database and explain what is going wrong. Any help is appreciated.</p>\n<p>Thank you.</p>\n"},{"tags":["java","dictionary","key-value"],"comments":[{"owner":{"account_id":7808,"reputation":24390,"user_id":13687,"display_name":"John Gardner"},"score":1,"creation_date":1238020021,"post_id":683518,"comment_id":497184,"body_markdown":"You don&#39;t need to use entryset/map.entry.  you can iterate over keys and values by using hashtable.keys as an enumeration or by using hashtable.keyset.iterator.","body":"You don&#39;t need to use entryset/map.entry.  you can iterate over keys and values by using hashtable.keys as an enumeration or by using hashtable.keyset.iterator."},{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":5,"creation_date":1238022061,"post_id":683518,"comment_id":497278,"body_markdown":"I took the liberty to change the title, since not using hashes is not actually the problem, but keeping the insertion order.","body":"I took the liberty to change the title, since not using hashes is not actually the problem, but keeping the insertion order."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1577581658,"post_id":683518,"comment_id":105203819,"body_markdown":"Similar Question, [*Java Ordered Map*](https://stackoverflow.com/q/663374/642706)","body":"Similar Question, <a href=\"https://stackoverflow.com/q/663374/642706\"><i>Java Ordered Map</i></a>"}],"answers":[{"comments":[{"owner":{"account_id":476048,"reputation":7235,"user_id":886749,"accept_rate":77,"display_name":"Cory Kendall"},"score":2,"creation_date":1328424767,"post_id":683524,"comment_id":11501087,"body_markdown":"This won&#39;t work for me because, as per javadocs, this only gives ordered values (through the values() call).  Is there a way to get ordered Map.Entry instances?","body":"This won&#39;t work for me because, as per javadocs, this only gives ordered values (through the values() call).  Is there a way to get ordered Map.Entry instances?"},{"owner":{"account_id":7745,"reputation":189765,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":1,"creation_date":1328434940,"post_id":683524,"comment_id":11502108,"body_markdown":"@CoryKendall: Does TreeMap not work? It is supposed to be sorted by keys, not by values.","body":"@CoryKendall: Does TreeMap not work? It is supposed to be sorted by keys, not by values."},{"owner":{"account_id":476048,"reputation":7235,"user_id":886749,"accept_rate":77,"display_name":"Cory Kendall"},"score":1,"creation_date":1328643745,"post_id":683524,"comment_id":11553624,"body_markdown":"My mistake, I thought Sets were unsorted.","body":"My mistake, I thought Sets were unsorted."},{"owner":{"account_id":7745,"reputation":189765,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":0,"creation_date":1328644281,"post_id":683524,"comment_id":11553819,"body_markdown":"@CoryKendall: They can be, but [aren&#39;t always](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html).","body":"@CoryKendall: They can be, but <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html\" rel=\"nofollow noreferrer\">aren&#39;t always</a>."},{"owner":{"account_id":1194617,"reputation":703,"user_id":1166599,"display_name":"Muundruul"},"score":79,"creation_date":1380197563,"post_id":683524,"comment_id":28115777,"body_markdown":"Please note: The sorting of a TreeMap is based on the natural order of the keys: &quot;The map is sorted according to the natural ordering of its keys&quot;. The LinkedHashMap is sorted bij insert order. Big difference!","body":"Please note: The sorting of a TreeMap is based on the natural order of the keys: &quot;The map is sorted according to the natural ordering of its keys&quot;. The LinkedHashMap is sorted bij insert order. Big difference!"},{"owner":{"account_id":3787945,"reputation":466,"user_id":3145261,"accept_rate":71,"display_name":"navkast"},"score":8,"creation_date":1489451452,"post_id":683524,"comment_id":72666784,"body_markdown":"I believe `LinkedHashMap` does not implement `NavigableMap` or `SortedMap`.","body":"I believe <code>LinkedHashMap</code> does not implement <code>NavigableMap</code> or <code>SortedMap</code>."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1543828273,"post_id":683524,"comment_id":94044091,"body_markdown":"A LinkedHashMap keeps the keys in the order they were LAST ACCESSED, not &quot;inserted&quot;. Very annoying when that&#39;s not what you want.","body":"A LinkedHashMap keeps the keys in the order they were LAST ACCESSED, not &quot;inserted&quot;. Very annoying when that&#39;s not what you want."},{"owner":{"account_id":7745,"reputation":189765,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":5,"creation_date":1543853488,"post_id":683524,"comment_id":94057724,"body_markdown":"@AlexR: That is only true if the LinkedHashMap was created using the [special constructor](https://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashMap.html#LinkedHashMap-int-float-boolean-) which is provided for that purpose. By default, iteration is in insertion order.","body":"@AlexR: That is only true if the LinkedHashMap was created using the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashMap.html#LinkedHashMap-int-float-boolean-\" rel=\"nofollow noreferrer\">special constructor</a> which is provided for that purpose. By default, iteration is in insertion order."}],"tags":[],"owner":{"account_id":7745,"reputation":189765,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"comment_count":8,"down_vote_count":0,"up_vote_count":911,"is_accepted":true,"score":911,"last_activity_date":1664894035,"creation_date":1238016192,"answer_id":683524,"question_id":683518,"body_markdown":"I suggest a [`LinkedHashMap`][1] or a [`TreeMap`][2]. A `LinkedHashMap` keeps the keys in the order they were inserted, while a `TreeMap` is kept sorted via a `Comparator` or the natural `Comparable` ordering of the keys.\r\n\r\nSince it doesn&#39;t have to keep the elements sorted, `LinkedHashMap` should be faster for most cases; `TreeMap` has `O(log n)` performance for `containsKey`, `get`, `put`, and `remove`, according to the Javadocs, while `LinkedHashMap` is `O(1)` for each.\r\n\r\nIf your API that only expects a predictable sort order, as opposed to a specific sort order, consider using the interfaces these two classes implement, [`NavigableMap`][3] or [`SortedMap`][4]. This will allow you not to leak specific implementations into your API and switch to either of those specific classes or a completely different implementation at will afterwards.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html\r\n  [3]: http://docs.oracle.com/javase/7/docs/api/java/util/NavigableMap.html\r\n  [4]: http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html","title":"Java Class that implements Map and keeps insertion order?","body":"<p>I suggest a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html\" rel=\"noreferrer\"><code>LinkedHashMap</code></a> or a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html\" rel=\"noreferrer\"><code>TreeMap</code></a>. A <code>LinkedHashMap</code> keeps the keys in the order they were inserted, while a <code>TreeMap</code> is kept sorted via a <code>Comparator</code> or the natural <code>Comparable</code> ordering of the keys.</p>\n<p>Since it doesn't have to keep the elements sorted, <code>LinkedHashMap</code> should be faster for most cases; <code>TreeMap</code> has <code>O(log n)</code> performance for <code>containsKey</code>, <code>get</code>, <code>put</code>, and <code>remove</code>, according to the Javadocs, while <code>LinkedHashMap</code> is <code>O(1)</code> for each.</p>\n<p>If your API that only expects a predictable sort order, as opposed to a specific sort order, consider using the interfaces these two classes implement, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/NavigableMap.html\" rel=\"noreferrer\"><code>NavigableMap</code></a> or <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html\" rel=\"noreferrer\"><code>SortedMap</code></a>. This will allow you not to leak specific implementations into your API and switch to either of those specific classes or a completely different implementation at will afterwards.</p>\n"},{"tags":[],"owner":{"account_id":21356,"reputation":47248,"user_id":51831,"accept_rate":56,"display_name":"jpalecek"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1238016585,"creation_date":1238016585,"answer_id":683548,"question_id":683518,"body_markdown":"I don&#39;t know if it is opensource, but after a little googling, I found [this implementation of Map using ArrayList][1]. It seems to be pre-1.5 Java, so you might want to genericize it, which should be easy. Note that this implementation has O(N) access, but this shouldn&#39;t be a problem if you don&#39;t add hundreds of widgets to your JPanel, which you shouldn&#39;t anyway.\r\n\r\n\r\n  [1]: http://www.java2s.com/Code/Java/Collections-Data-Structure/ArrayMapextendsAbstractMap.htm","title":"Java Class that implements Map and keeps insertion order?","body":"<p>I don't know if it is opensource, but after a little googling, I found <a href=\"http://www.java2s.com/Code/Java/Collections-Data-Structure/ArrayMapextendsAbstractMap.htm\" rel=\"nofollow noreferrer\">this implementation of Map using ArrayList</a>. It seems to be pre-1.5 Java, so you might want to genericize it, which should be easy. Note that this implementation has O(N) access, but this shouldn't be a problem if you don't add hundreds of widgets to your JPanel, which you shouldn't anyway.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1470002553,"creation_date":1238101485,"answer_id":687543,"question_id":683518,"body_markdown":"You can maintain a `Map` (for fast lookup) and `List` (for order) but a `LinkedHashMap` may be the simplest. You can also try a `SortedMap` e.g. `TreeMap`, which an have any order you specify.","title":"Java Class that implements Map and keeps insertion order?","body":"<p>You can maintain a <code>Map</code> (for fast lookup) and <code>List</code> (for order) but a <code>LinkedHashMap</code> may be the simplest. You can also try a <code>SortedMap</code> e.g. <code>TreeMap</code>, which an have any order you specify.</p>\n"},{"tags":[],"owner":{"account_id":177253,"reputation":1677,"user_id":408465,"display_name":"jvdneste"},"comment_count":0,"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1504517375,"creation_date":1282924204,"answer_id":3585920,"question_id":683518,"body_markdown":"**If an immutable map fits your needs** then there is a library by google called [guava][1] (see also [guava questions][2]) \r\n\r\n[Guava][3] provides an [ImmutableMap][4] with reliable user-specified iteration order. This [ImmutableMap][4] has O(1) performance for containsKey, get. Obviously put and remove are not supported. \r\n\r\n[ImmutableMap][4] objects are constructed by using either the elegant static convenience methods [of()][5] and [copyOf()][6] or a [Builder][7] object.\r\n\r\n\r\n  [1]: https://github.com/google/guava\r\n  [2]: https://stackoverflow.com/questions/tagged/guava\r\n  [3]: https://github.com/google/guava\r\n  [4]: http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html\r\n  [5]: http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html#of--\r\n  [6]: http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html#copyOf-java.util.Map-\r\n  [7]: http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html#builder--","title":"Java Class that implements Map and keeps insertion order?","body":"<p><strong>If an immutable map fits your needs</strong> then there is a library by google called <a href=\"https://github.com/google/guava\" rel=\"noreferrer\">guava</a> (see also <a href=\"https://stackoverflow.com/questions/tagged/guava\">guava questions</a>) </p>\n\n<p><a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a> provides an <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html\" rel=\"noreferrer\">ImmutableMap</a> with reliable user-specified iteration order. This <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html\" rel=\"noreferrer\">ImmutableMap</a> has O(1) performance for containsKey, get. Obviously put and remove are not supported. </p>\n\n<p><a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html\" rel=\"noreferrer\">ImmutableMap</a> objects are constructed by using either the elegant static convenience methods <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html#of--\" rel=\"noreferrer\">of()</a> and <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html#copyOf-java.util.Map-\" rel=\"noreferrer\">copyOf()</a> or a <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html#builder--\" rel=\"noreferrer\">Builder</a> object.</p>\n"},{"tags":[],"owner":{"account_id":3171071,"reputation":2453,"user_id":2680024,"accept_rate":20,"display_name":"Praveen Kishor"},"comment_count":0,"down_vote_count":0,"up_vote_count":59,"is_accepted":false,"score":59,"last_activity_date":1494278801,"creation_date":1494278801,"answer_id":43857540,"question_id":683518,"body_markdown":"LinkedHashMap will return the elements in the order they were inserted into the map when you iterate over the keySet(), entrySet() or values() of the map. \r\n\r\n    Map&lt;String, String&gt; map = new LinkedHashMap&lt;String, String&gt;();\r\n     \r\n    map.put(&quot;id&quot;, &quot;1&quot;);\r\n    map.put(&quot;name&quot;, &quot;rohan&quot;);\r\n    map.put(&quot;age&quot;, &quot;26&quot;);\r\n     \r\n    for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {\r\n        System.out.println(entry.getKey() + &quot; = &quot; + entry.getValue());\r\n    }\r\n\r\n\r\nThis will print the elements in the order they were put into the map: \r\n\r\n    id = 1\r\n    name = rohan \r\n    age = 26 \r\n\r\n","title":"Java Class that implements Map and keeps insertion order?","body":"<p>LinkedHashMap will return the elements in the order they were inserted into the map when you iterate over the keySet(), entrySet() or values() of the map. </p>\n\n<pre><code>Map&lt;String, String&gt; map = new LinkedHashMap&lt;String, String&gt;();\n\nmap.put(\"id\", \"1\");\nmap.put(\"name\", \"rohan\");\nmap.put(\"age\", \"26\");\n\nfor (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {\n    System.out.println(entry.getKey() + \" = \" + entry.getValue());\n}\n</code></pre>\n\n<p>This will print the elements in the order they were put into the map: </p>\n\n<pre><code>id = 1\nname = rohan \nage = 26 \n</code></pre>\n"},{"tags":[],"owner":{"account_id":444211,"reputation":61229,"user_id":835883,"accept_rate":81,"display_name":"j2emanue"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510216592,"creation_date":1510216592,"answer_id":47197281,"question_id":683518,"body_markdown":"Whenever i need to maintain the natural order of things that are known ahead of time, i use a [EnumMap][1]\r\n\r\n\r\nthe keys will be enums and you can insert in any order you want but when you iterate it will iterate in the enum order (the natural order).  \r\n\r\nAlso when using EnumMap there should be no collisions which can be more efficient.  \r\n\r\nI really find that using enumMap makes for clean readable code. \r\nHere is an [example][2]\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/EnumMap.html\r\n  [2]: http://javarevisited.blogspot.com/2012/09/what-is-enummap-in-java-example-tutorial.html","title":"Java Class that implements Map and keeps insertion order?","body":"<p>Whenever i need to maintain the natural order of things that are known ahead of time, i use a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/EnumMap.html\" rel=\"nofollow noreferrer\">EnumMap</a></p>\n\n<p>the keys will be enums and you can insert in any order you want but when you iterate it will iterate in the enum order (the natural order).  </p>\n\n<p>Also when using EnumMap there should be no collisions which can be more efficient.  </p>\n\n<p>I really find that using enumMap makes for clean readable code. \nHere is an <a href=\"http://javarevisited.blogspot.com/2012/09/what-is-enummap-in-java-example-tutorial.html\" rel=\"nofollow noreferrer\">example</a></p>\n"},{"comments":[{"owner":{"account_id":1193459,"reputation":3989,"user_id":1165724,"display_name":"swpalmer"},"score":0,"creation_date":1664893849,"post_id":50127647,"comment_id":130571308,"body_markdown":"&quot;It contains only unique elements&quot; is misleading - you can have the same value object in the map associated with different keys.  It is the keys that must be unique.","body":"&quot;It contains only unique elements&quot; is misleading - you can have the same value object in the map associated with different keys.  It is the keys that must be unique."}],"tags":[],"owner":{"account_id":6689932,"reputation":81,"user_id":5159723,"display_name":"Pankaj Goyal"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1649107715,"creation_date":1525238940,"answer_id":50127647,"question_id":683518,"body_markdown":"You can use **LinkedHashMap** to main insertion order in Map \r\n\r\nThe important points about Java LinkedHashMap class are:\r\n\r\n 1. It contains only unique elements.\r\n 2. A LinkedHashMap contains values based on the key.\r\n 3. It may have one null key and multiple null values.\r\n 4. It is same as HashMap instead maintains insertion order\r\n\r\n        public class LinkedHashMap&lt;K,V&gt; extends HashMap&lt;K,V&gt; implements Map&lt;K,V&gt; \r\n\r\n\r\nBut if you want sort values in map using User-defined object or any primitive data type key then you should use **TreeMap** For more information, refer [this link][1]\r\n\r\n\r\n  [1]: https://theweblearn.blogspot.in/2018/05/sort-values-by-user-defined-object-in.html","title":"Java Class that implements Map and keeps insertion order?","body":"<p>You can use <strong>LinkedHashMap</strong> to main insertion order in Map</p>\n<p>The important points about Java LinkedHashMap class are:</p>\n<ol>\n<li><p>It contains only unique elements.</p>\n</li>\n<li><p>A LinkedHashMap contains values based on the key.</p>\n</li>\n<li><p>It may have one null key and multiple null values.</p>\n</li>\n<li><p>It is same as HashMap instead maintains insertion order</p>\n<pre><code>public class LinkedHashMap&lt;K,V&gt; extends HashMap&lt;K,V&gt; implements Map&lt;K,V&gt; \n</code></pre>\n</li>\n</ol>\n<p>But if you want sort values in map using User-defined object or any primitive data type key then you should use <strong>TreeMap</strong> For more information, refer <a href=\"https://theweblearn.blogspot.in/2018/05/sort-values-by-user-defined-object-in.html\" rel=\"noreferrer\">this link</a></p>\n"},{"tags":[],"owner":{"account_id":6575754,"reputation":9298,"user_id":5081877,"accept_rate":92,"display_name":"Yash"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1572432745,"creation_date":1572432745,"answer_id":58623768,"question_id":683518,"body_markdown":"Either You can use **`LinkedHashMap&lt;K, V&gt;`** or you can implement you own **CustomMap** which maintains insertion order.\r\n\r\nYou can use the Following **`CustomHashMap`** with the following features:\r\n\r\n * Insertion order is maintained, by using LinkedHashMap internally.\r\n * Keys with `null` or empty strings are not allowed.\r\n * Once key with value is created, we are not overriding its value.\r\n\r\n[`HashMap`](https://stackoverflow.com/a/48094803) vs `LinkedHashMap` vs `CustomHashMap`\r\n```lang-java\r\ninterface CustomMap&lt;K, V&gt; extends Map&lt;K, V&gt; {\r\n\tpublic boolean insertionRule(K key, V value);\r\n}\r\n\r\n@SuppressWarnings({ &quot;rawtypes&quot;, &quot;unchecked&quot; })\r\npublic class CustomHashMap&lt;K, V&gt; implements CustomMap&lt;K, V&gt; {\r\n\tprivate Map&lt;K, V&gt; entryMap;\r\n\t// SET: Adds the specified element to this set if it is not already present.\r\n\tprivate Set&lt;K&gt; entrySet;\r\n\r\n\tpublic CustomHashMap() {\r\n\t\tsuper();\r\n\t\tentryMap = new LinkedHashMap&lt;K, V&gt;();\r\n\t\tentrySet = new HashSet();\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic boolean insertionRule(K key, V value) {\r\n\t\t// KEY as null and EMPTY String is not allowed.\r\n\t\tif (key == null || (key instanceof String &amp;&amp; ((String) key).trim().equals(&quot;&quot;) ) ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// If key already available then, we are not overriding its value.\r\n\t\tif (entrySet.contains(key)) { // Then override its value, but we are not allowing\r\n\t\t\treturn false;\r\n\t\t} else { // Add the entry\r\n\t\t\tentrySet.add(key);\r\n\t\t\tentryMap.put(key, value);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\tpublic V put(K key, V value) {\r\n\t\tV oldValue = entryMap.get(key);\r\n\t\tinsertionRule(key, value);\r\n\t\treturn oldValue;\r\n\t}\r\n\tpublic void putAll(Map&lt;? extends K, ? extends V&gt; t) {\r\n\t\tfor (Iterator i = t.keySet().iterator(); i.hasNext();) {\r\n\t\t\tK key = (K) i.next();\r\n\t\t\tinsertionRule(key, t.get(key));\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void clear() {\r\n\t\tentryMap.clear();\r\n\t\tentrySet.clear();\r\n\t}\r\n\tpublic boolean containsKey(Object key) {\r\n\t\treturn entryMap.containsKey(key);\r\n\t}\r\n\tpublic boolean containsValue(Object value) {\r\n\t\treturn entryMap.containsValue(value);\r\n\t}\r\n\tpublic Set entrySet() {\r\n\t\treturn entryMap.entrySet();\r\n\t}\r\n\tpublic boolean equals(Object o) {\r\n\t\treturn entryMap.equals(o);\r\n\t}\r\n\tpublic V get(Object key) {\r\n\t\treturn entryMap.get(key);\r\n\t}\r\n\tpublic int hashCode() {\r\n\t\treturn entryMap.hashCode();\r\n\t}\r\n\tpublic boolean isEmpty() {\r\n\t\treturn entryMap.isEmpty();\r\n\t}\r\n\tpublic Set keySet() {\r\n\t\treturn entrySet;\r\n\t}\r\n\tpublic V remove(Object key) {\r\n\t\tentrySet.remove(key);\r\n\t\treturn entryMap.remove(key);\r\n\t}\r\n\tpublic int size() {\r\n\t\treturn entryMap.size();\r\n\t}\r\n\tpublic Collection values() {\r\n\t\treturn entryMap.values();\r\n\t}\r\n}\r\n```\r\n\r\nUsage of `CustomHashMap`:\r\n\r\n```lang-java\r\npublic static void main(String[] args) {\r\n\tSystem.out.println(&quot;== LinkedHashMap ==&quot;);\r\n\tMap&lt;Object, String&gt; map2 = new LinkedHashMap&lt;Object, String&gt;();\r\n\taddData(map2);\r\n\t\r\n\tSystem.out.println(&quot;== CustomHashMap ==&quot;);\r\n\tMap&lt;Object, String&gt; map = new CustomHashMap&lt;Object, String&gt;();\r\n\taddData(map);\r\n}\r\npublic static void addData(Map&lt;Object, String&gt; map) {\r\n\tmap.put(null, &quot;1&quot;);\r\n\tmap.put(&quot;name&quot;, &quot;Yash&quot;);\r\n\tmap.put(&quot;1&quot;, &quot;1 - Str&quot;);\r\n\tmap.put(&quot;1&quot;, &quot;2 - Str&quot;); // Overriding value\r\n\tmap.put(&quot;&quot;, &quot;1&quot;); // Empty String\r\n\tmap.put(&quot; &quot;, &quot;1&quot;); // Empty String\r\n\tmap.put(1, &quot;Int&quot;);\r\n\tmap.put(null, &quot;2&quot;); // Null\r\n\t\r\n\tfor (Map.Entry&lt;Object, String&gt; entry : map.entrySet()) {\r\n\t\tSystem.out.println(entry.getKey() + &quot; = &quot; + entry.getValue());\r\n\t}\r\n}\r\n```\r\n\r\nO/P:\r\n```\r\n== LinkedHashMap == | == CustomHashMap ==\r\nnull = 2            | name = Yash\r\nname = Yash         | 1 = 1 - Str\r\n1 = 2 - Str         | 1 = Int\r\n = 1                |\r\n  = 1               |\r\n1 = Int             |\r\n```\r\n\r\n---\r\n\r\nIf you know the KEY&#39;s are fixed then you can use EnumMap. Get the values form Properties/XML files\r\n\r\nEX:\r\n```lang-java\r\nenum ORACLE {\r\n\tIP, URL, USER_NAME, PASSWORD, DB_Name;\r\n}\r\n\r\nEnumMap&lt;ORACLE, String&gt; props = new EnumMap&lt;ORACLE, String&gt;(ORACLE.class);\r\nprops.put(ORACLE.IP, &quot;127.0.0.1&quot;);\r\nprops.put(ORACLE.URL, &quot;...&quot;);\r\nprops.put(ORACLE.USER_NAME, &quot;Scott&quot;);\r\nprops.put(ORACLE.PASSWORD, &quot;Tiget&quot;);\r\nprops.put(ORACLE.DB_Name, &quot;MyDB&quot;);\r\n```\r\n\r\n","title":"Java Class that implements Map and keeps insertion order?","body":"<p>Either You can use <strong><code>LinkedHashMap&lt;K, V&gt;</code></strong> or you can implement you own <strong>CustomMap</strong> which maintains insertion order.</p>\n\n<p>You can use the Following <strong><code>CustomHashMap</code></strong> with the following features:</p>\n\n<ul>\n<li>Insertion order is maintained, by using LinkedHashMap internally.</li>\n<li>Keys with <code>null</code> or empty strings are not allowed.</li>\n<li>Once key with value is created, we are not overriding its value.</li>\n</ul>\n\n<p><a href=\"https://stackoverflow.com/a/48094803\"><code>HashMap</code></a> vs <code>LinkedHashMap</code> vs <code>CustomHashMap</code></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>interface CustomMap&lt;K, V&gt; extends Map&lt;K, V&gt; {\n    public boolean insertionRule(K key, V value);\n}\n\n@SuppressWarnings({ \"rawtypes\", \"unchecked\" })\npublic class CustomHashMap&lt;K, V&gt; implements CustomMap&lt;K, V&gt; {\n    private Map&lt;K, V&gt; entryMap;\n    // SET: Adds the specified element to this set if it is not already present.\n    private Set&lt;K&gt; entrySet;\n\n    public CustomHashMap() {\n        super();\n        entryMap = new LinkedHashMap&lt;K, V&gt;();\n        entrySet = new HashSet();\n    }\n\n    @Override\n    public boolean insertionRule(K key, V value) {\n        // KEY as null and EMPTY String is not allowed.\n        if (key == null || (key instanceof String &amp;&amp; ((String) key).trim().equals(\"\") ) ) {\n            return false;\n        }\n\n        // If key already available then, we are not overriding its value.\n        if (entrySet.contains(key)) { // Then override its value, but we are not allowing\n            return false;\n        } else { // Add the entry\n            entrySet.add(key);\n            entryMap.put(key, value);\n            return true;\n        }\n    }\n    public V put(K key, V value) {\n        V oldValue = entryMap.get(key);\n        insertionRule(key, value);\n        return oldValue;\n    }\n    public void putAll(Map&lt;? extends K, ? extends V&gt; t) {\n        for (Iterator i = t.keySet().iterator(); i.hasNext();) {\n            K key = (K) i.next();\n            insertionRule(key, t.get(key));\n        }\n    }\n\n    public void clear() {\n        entryMap.clear();\n        entrySet.clear();\n    }\n    public boolean containsKey(Object key) {\n        return entryMap.containsKey(key);\n    }\n    public boolean containsValue(Object value) {\n        return entryMap.containsValue(value);\n    }\n    public Set entrySet() {\n        return entryMap.entrySet();\n    }\n    public boolean equals(Object o) {\n        return entryMap.equals(o);\n    }\n    public V get(Object key) {\n        return entryMap.get(key);\n    }\n    public int hashCode() {\n        return entryMap.hashCode();\n    }\n    public boolean isEmpty() {\n        return entryMap.isEmpty();\n    }\n    public Set keySet() {\n        return entrySet;\n    }\n    public V remove(Object key) {\n        entrySet.remove(key);\n        return entryMap.remove(key);\n    }\n    public int size() {\n        return entryMap.size();\n    }\n    public Collection values() {\n        return entryMap.values();\n    }\n}\n</code></pre>\n\n<p>Usage of <code>CustomHashMap</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    System.out.println(\"== LinkedHashMap ==\");\n    Map&lt;Object, String&gt; map2 = new LinkedHashMap&lt;Object, String&gt;();\n    addData(map2);\n\n    System.out.println(\"== CustomHashMap ==\");\n    Map&lt;Object, String&gt; map = new CustomHashMap&lt;Object, String&gt;();\n    addData(map);\n}\npublic static void addData(Map&lt;Object, String&gt; map) {\n    map.put(null, \"1\");\n    map.put(\"name\", \"Yash\");\n    map.put(\"1\", \"1 - Str\");\n    map.put(\"1\", \"2 - Str\"); // Overriding value\n    map.put(\"\", \"1\"); // Empty String\n    map.put(\" \", \"1\"); // Empty String\n    map.put(1, \"Int\");\n    map.put(null, \"2\"); // Null\n\n    for (Map.Entry&lt;Object, String&gt; entry : map.entrySet()) {\n        System.out.println(entry.getKey() + \" = \" + entry.getValue());\n    }\n}\n</code></pre>\n\n<p>O/P:</p>\n\n<pre><code>== LinkedHashMap == | == CustomHashMap ==\nnull = 2            | name = Yash\nname = Yash         | 1 = 1 - Str\n1 = 2 - Str         | 1 = Int\n = 1                |\n  = 1               |\n1 = Int             |\n</code></pre>\n\n<hr>\n\n<p>If you know the KEY's are fixed then you can use EnumMap. Get the values form Properties/XML files</p>\n\n<p>EX:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>enum ORACLE {\n    IP, URL, USER_NAME, PASSWORD, DB_Name;\n}\n\nEnumMap&lt;ORACLE, String&gt; props = new EnumMap&lt;ORACLE, String&gt;(ORACLE.class);\nprops.put(ORACLE.IP, \"127.0.0.1\");\nprops.put(ORACLE.URL, \"...\");\nprops.put(ORACLE.USER_NAME, \"Scott\");\nprops.put(ORACLE.PASSWORD, \"Tiget\");\nprops.put(ORACLE.DB_Name, \"MyDB\");\n</code></pre>\n"}],"owner":{"account_id":15783,"reputation":6135,"user_id":33725,"display_name":"Shane"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":405795,"favorite_count":0,"down_vote_count":0,"up_vote_count":605,"accepted_answer_id":683524,"answer_count":8,"score":605,"last_activity_date":1664894035,"creation_date":1238016124,"question_id":683518,"body_markdown":"I&#39;m looking for a class in java that has key-value association, but without using hashes.  Here is what I&#39;m currently doing:\r\n\r\n1. Add values to a `Hashtable`.\r\n2. Get an iterator for the `Hashtable.entrySet()`.\r\n3. Iterate through all values and:\r\n   1. Get a `Map.Entry` for the iterator.\r\n   2. Create an object of type `Module` (a custom class) based on the value.\r\n   3. Add the class to a JPanel.\r\n4. Show the panel.\r\n\r\nThe problem with this is that I do not have control over the order that I get the values back, so I cannot display the values in the a given order (without hard-coding the order).\r\n\r\nI would use an `ArrayList` or `Vector` for this, but later in the code I need to grab the `Module` object for a given Key, which I can&#39;t do with an `ArrayList` or `Vector`.\r\n\r\nDoes anyone know of a free/open-source Java class that will do this, or a way to get values out of a `Hashtable` based on when they were added?\r\n\r\nThanks!","title":"Java Class that implements Map and keeps insertion order?","body":"<p>I'm looking for a class in java that has key-value association, but without using hashes.  Here is what I'm currently doing:</p>\n\n<ol>\n<li>Add values to a <code>Hashtable</code>.</li>\n<li>Get an iterator for the <code>Hashtable.entrySet()</code>.</li>\n<li>Iterate through all values and:\n\n<ol>\n<li>Get a <code>Map.Entry</code> for the iterator.</li>\n<li>Create an object of type <code>Module</code> (a custom class) based on the value.</li>\n<li>Add the class to a JPanel.</li>\n</ol></li>\n<li>Show the panel.</li>\n</ol>\n\n<p>The problem with this is that I do not have control over the order that I get the values back, so I cannot display the values in the a given order (without hard-coding the order).</p>\n\n<p>I would use an <code>ArrayList</code> or <code>Vector</code> for this, but later in the code I need to grab the <code>Module</code> object for a given Key, which I can't do with an <code>ArrayList</code> or <code>Vector</code>.</p>\n\n<p>Does anyone know of a free/open-source Java class that will do this, or a way to get values out of a <code>Hashtable</code> based on when they were added?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","android","xml","data-binding"],"owner":{"account_id":11916869,"reputation":81,"user_id":8720567,"display_name":"Claudio P"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1664894033,"creation_date":1664894033,"question_id":73949523,"body_markdown":"i&#39;m facing a problem trying to use data binding in my android app.\r\nLong story short, I&#39;ve created a custom view WPLView as follow:\r\n\r\n```\r\npublic class WPLView extends LinearLayout {\r\n\r\n    private String text;\r\n    private int number;\r\n    private Drawable drawable;\r\n\r\n    public WPLView(Context context, @Nullable AttributeSet attrs) {\r\n        super(context, attrs);\r\n\r\n        inflate(context, R.layout.wplview_layout, this);\r\n\r\n        TypedArray a = context.getTheme().obtainStyledAttributes(\r\n                attrs,\r\n                R.styleable.WPLView,\r\n                0, 0);\r\n\r\n        try {\r\n            text = a.getString(R.styleable.WPLView_wplv_text);\r\n            number = a.getInteger(R.styleable.WPLView_wplv_number, -1);\r\n            drawable = a.getDrawable(R.styleable.WPLView_wplv_drawable);\r\n\r\n            TextView tvText = findViewById(R.id.tv_text);\r\n            tvText.setText(text);\r\n\r\n            TextView tvNumber = findViewById(R.id.tv_number);\r\n            tvNumber.setText(String.valueOf(number));\r\n\r\n            tvNumber.setCompoundDrawablesWithIntrinsicBounds(drawable, null, null, null);\r\n        } finally {\r\n            a.recycle();\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nwith its own stylable attributes:\r\n\r\n```\r\n&lt;resources&gt;\r\n\r\n    &lt;declare-styleable name=&quot;WPLView&quot;&gt;\r\n        &lt;attr name=&quot;wplv_text&quot; format=&quot;string&quot; /&gt;\r\n        &lt;attr name=&quot;wplv_number&quot; format=&quot;integer&quot; /&gt;\r\n        &lt;attr name=&quot;wplv_drawable&quot; format=&quot;reference&quot; /&gt;\r\n    &lt;/declare-styleable&gt;\r\n\r\n&lt;/resources&gt;\r\n```\r\n\r\nI&#39;ve created an utility object for data binding like this:\r\n\r\n```\r\npublic class MyObject{\r\n\t\r\n\tpublic int number;\r\n\t\r\n\tpublic MyObject(int number) {\r\n\t\tthis.number = number;\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\nand trying to use databinding like this:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;layout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;data&gt;\r\n        &lt;import type=&quot;android.view.View&quot; /&gt;\r\n        &lt;variable name=&quot;obj&quot; type=&quot;MyObject&quot;/&gt;\r\n    &lt;/data&gt;\r\n\r\n    &lt;ScrollView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:fillViewport=&quot;false&quot; &gt;\r\n\r\n        ...\r\n\t\t\r\n\t\t&lt;WPLView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    app:wplv_text=&quot;Losses&quot;\r\n                    app:wplv_drawable=&quot;@drawable/loss&quot;\r\n                    app:wplv_number=&quot;@{obj.number}&quot;&gt;&lt;/WPLView&gt;\r\n\t\t\r\n\t\t...\r\n\r\n    &lt;/ScrollView&gt;\r\n&lt;/layout&gt;\r\n```\r\n\r\n\r\nbut when i build my project I have this error:\r\n\r\nAAPT: error: &#39;@{obj.number}&#39; is incompatible with attribute wplv_number (attr) integer.\r\n\r\n\r\n\r\nWhat&#39;s the reason about it? I looked for it on web but I don&#39;t find a solution, I see always databinding for string attribute (like android:text) or similar but apparently nothing abount my case. Can you help me?","title":"Android data binding error with int attribute - &lt;value&gt;is incompatible with attribute &lt;attribute_name&gt; (attr) integer","body":"<p>i'm facing a problem trying to use data binding in my android app.\nLong story short, I've created a custom view WPLView as follow:</p>\n<pre><code>public class WPLView extends LinearLayout {\n\n    private String text;\n    private int number;\n    private Drawable drawable;\n\n    public WPLView(Context context, @Nullable AttributeSet attrs) {\n        super(context, attrs);\n\n        inflate(context, R.layout.wplview_layout, this);\n\n        TypedArray a = context.getTheme().obtainStyledAttributes(\n                attrs,\n                R.styleable.WPLView,\n                0, 0);\n\n        try {\n            text = a.getString(R.styleable.WPLView_wplv_text);\n            number = a.getInteger(R.styleable.WPLView_wplv_number, -1);\n            drawable = a.getDrawable(R.styleable.WPLView_wplv_drawable);\n\n            TextView tvText = findViewById(R.id.tv_text);\n            tvText.setText(text);\n\n            TextView tvNumber = findViewById(R.id.tv_number);\n            tvNumber.setText(String.valueOf(number));\n\n            tvNumber.setCompoundDrawablesWithIntrinsicBounds(drawable, null, null, null);\n        } finally {\n            a.recycle();\n        }\n    }\n\n}\n</code></pre>\n<p>with its own stylable attributes:</p>\n<pre><code>&lt;resources&gt;\n\n    &lt;declare-styleable name=&quot;WPLView&quot;&gt;\n        &lt;attr name=&quot;wplv_text&quot; format=&quot;string&quot; /&gt;\n        &lt;attr name=&quot;wplv_number&quot; format=&quot;integer&quot; /&gt;\n        &lt;attr name=&quot;wplv_drawable&quot; format=&quot;reference&quot; /&gt;\n    &lt;/declare-styleable&gt;\n\n&lt;/resources&gt;\n</code></pre>\n<p>I've created an utility object for data binding like this:</p>\n<pre><code>public class MyObject{\n    \n    public int number;\n    \n    public MyObject(int number) {\n        this.number = number;\n    }\n    \n}\n</code></pre>\n<p>and trying to use databinding like this:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;layout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;data&gt;\n        &lt;import type=&quot;android.view.View&quot; /&gt;\n        &lt;variable name=&quot;obj&quot; type=&quot;MyObject&quot;/&gt;\n    &lt;/data&gt;\n\n    &lt;ScrollView\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:orientation=&quot;vertical&quot;\n        android:fillViewport=&quot;false&quot; &gt;\n\n        ...\n        \n        &lt;WPLView\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    app:wplv_text=&quot;Losses&quot;\n                    app:wplv_drawable=&quot;@drawable/loss&quot;\n                    app:wplv_number=&quot;@{obj.number}&quot;&gt;&lt;/WPLView&gt;\n        \n        ...\n\n    &lt;/ScrollView&gt;\n&lt;/layout&gt;\n</code></pre>\n<p>but when i build my project I have this error:</p>\n<p>AAPT: error: '@{obj.number}' is incompatible with attribute wplv_number (attr) integer.</p>\n<p>What's the reason about it? I looked for it on web but I don't find a solution, I see always databinding for string attribute (like android:text) or similar but apparently nothing abount my case. Can you help me?</p>\n"},{"tags":["java","spring","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664893842,"creation_date":1664893842,"answer_id":73949486,"question_id":73945974,"body_markdown":"I don&#39;t understand your issue exactly, or more, I don&#39;t understand why you think a OneToMany is the solution. Your session has duplicate java instances for the same row data without having the OneToMany - persist cascading will not help you or change that. If you have multiple As referencing the same b1 row, they need to use the same b1 instance as well. The allInformationDTO.b(); is returning an instance that represents a row in the B table, say b1, and creating a new b1&#39; instance likely every time it is called.\r\n\r\nThe solution depends on what you need to do with the Bs and Cs in this set of allInformationDTO. If you care about changes to the B and C data, something like:\r\n\r\n        for (AllInformationDTO allInformationDTO : allInformationDTOS) {\r\n\r\n            BDTO bDTO = allInformationDTO.b();\r\n            CDTO cDTO = allInformationDTO.c();\r\n            ADTO aDTO = allInformationDTO.a();\r\n\r\n            B b = bClassRepository.save(convert(bDTO));//mapping from dto\r\n            C c = cClassRepository.save(convert(cDTO));//mapping from dto\r\n            A a = convert(aDTO));//mapping from dto\r\n\r\n            a.setB(b);\r\n            a.setC(c);\r\n\r\n            aClassRepository.save(a);\r\n        }\r\n\r\nNote though that every redefinition of B and C in your allInformationDTOS will overwrite what was previously there. \r\n\r\nYour provider should be able to batch up these save requests and issue them only when needed (when the transaction commits), but it depends on your configuration.","title":"How to persist Parent from Child in unidirectional @ManyToOne relation?","body":"<p>I don't understand your issue exactly, or more, I don't understand why you think a OneToMany is the solution. Your session has duplicate java instances for the same row data without having the OneToMany - persist cascading will not help you or change that. If you have multiple As referencing the same b1 row, they need to use the same b1 instance as well. The allInformationDTO.b(); is returning an instance that represents a row in the B table, say b1, and creating a new b1' instance likely every time it is called.</p>\n<p>The solution depends on what you need to do with the Bs and Cs in this set of allInformationDTO. If you care about changes to the B and C data, something like:</p>\n<pre><code>    for (AllInformationDTO allInformationDTO : allInformationDTOS) {\n\n        BDTO bDTO = allInformationDTO.b();\n        CDTO cDTO = allInformationDTO.c();\n        ADTO aDTO = allInformationDTO.a();\n\n        B b = bClassRepository.save(convert(bDTO));//mapping from dto\n        C c = cClassRepository.save(convert(cDTO));//mapping from dto\n        A a = convert(aDTO));//mapping from dto\n\n        a.setB(b);\n        a.setC(c);\n\n        aClassRepository.save(a);\n    }\n</code></pre>\n<p>Note though that every redefinition of B and C in your allInformationDTOS will overwrite what was previously there.</p>\n<p>Your provider should be able to batch up these save requests and issue them only when needed (when the transaction commits), but it depends on your configuration.</p>\n"}],"owner":{"account_id":14963595,"reputation":728,"user_id":10802597,"display_name":"MrFisherman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":338,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1664893842,"creation_date":1664876464,"question_id":73945974,"body_markdown":"I have a case where in my Entity I have 2 unidirectional @ManyToOne relations like this:\r\n\r\n    @Entity\r\n    public class A {\r\n    \r\n    @Id\r\n    private Long apiId;\r\n    \r\n    //other fields\r\n    \r\n    @ManyToOne(fetch = FetchType.LAZY, cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n    @JoinColumn(name = &quot;classBid&quot;, foreignKey = @ForeignKey(name = &quot;FK_classA_classB&quot;))\r\n    private B b;\r\n    \r\n    @ManyToOne(fetch = FetchType.LAZY, cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n    @JoinColumn(name = &quot;classCid&quot;, foreignKey = @ForeignKey(name = &quot;FK_classA_classC&quot;))\r\n    private C C;\r\n    \r\n    //equals and hashcode\r\n    }\r\n\r\nThis class represents main domain object which comes from outside (by external api). Both B and C parents are equally important.\r\n\r\nNow I want to save incoming data:\r\n\r\n        @Override\r\n        @Transactional\r\n        public void updateAllInformation() {\r\n            Set&lt;AllInformationDTO&gt; allInformationDTOS = apiService.getAllInformation();\r\n    \r\n            Set&lt;A&gt; aClassToSaveOrUpdate = new HashSet&lt;&gt;();\r\n            for (AllInformationDTO allInformationDTO : allInformationDTOS) {\r\n    \r\n                BDTO bDTO = allInformationDTO.b();\r\n                CDTO cDTO = allInformationDTO.c();\r\n                ADTO aDTO = allInformationDTO.a();\r\n    \r\n                B b = //mapping from dto\r\n                C c = //mapping from dto\r\n                A a = //mapping from dto\r\n    \r\n                a.setB(b);\r\n                a.setC(c);\r\n    \r\n                aClassToSaveOrUpdate.add(a);\r\n            }\r\n    \r\n            aClassRepository.saveAll(aClassToSaveOrUpdate);\r\n        }\r\n\r\nBut there is a problem when same Parent is in incoming data: `DataIntegrityViolationException exception: A different object with the same identifier value was already associated with the session : B#78`\r\n\r\nHow to cascade persist parent entities from child side of @ManyToOne relation?\r\nShould I change it to bidirectional and persist child from parent? But which one (B or C) should I choose to persist from if they are equally important?\r\n\r\nI didn&#39;t want to make it @OneToMany based on this quote from Vlad&#39;s blog: [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/J6AqI.png","title":"How to persist Parent from Child in unidirectional @ManyToOne relation?","body":"<p>I have a case where in my Entity I have 2 unidirectional @ManyToOne relations like this:</p>\n<pre><code>@Entity\npublic class A {\n\n@Id\nprivate Long apiId;\n\n//other fields\n\n@ManyToOne(fetch = FetchType.LAZY, cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n@JoinColumn(name = &quot;classBid&quot;, foreignKey = @ForeignKey(name = &quot;FK_classA_classB&quot;))\nprivate B b;\n\n@ManyToOne(fetch = FetchType.LAZY, cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n@JoinColumn(name = &quot;classCid&quot;, foreignKey = @ForeignKey(name = &quot;FK_classA_classC&quot;))\nprivate C C;\n\n//equals and hashcode\n}\n</code></pre>\n<p>This class represents main domain object which comes from outside (by external api). Both B and C parents are equally important.</p>\n<p>Now I want to save incoming data:</p>\n<pre><code>    @Override\n    @Transactional\n    public void updateAllInformation() {\n        Set&lt;AllInformationDTO&gt; allInformationDTOS = apiService.getAllInformation();\n\n        Set&lt;A&gt; aClassToSaveOrUpdate = new HashSet&lt;&gt;();\n        for (AllInformationDTO allInformationDTO : allInformationDTOS) {\n\n            BDTO bDTO = allInformationDTO.b();\n            CDTO cDTO = allInformationDTO.c();\n            ADTO aDTO = allInformationDTO.a();\n\n            B b = //mapping from dto\n            C c = //mapping from dto\n            A a = //mapping from dto\n\n            a.setB(b);\n            a.setC(c);\n\n            aClassToSaveOrUpdate.add(a);\n        }\n\n        aClassRepository.saveAll(aClassToSaveOrUpdate);\n    }\n</code></pre>\n<p>But there is a problem when same Parent is in incoming data: <code>DataIntegrityViolationException exception: A different object with the same identifier value was already associated with the session : B#78</code></p>\n<p>How to cascade persist parent entities from child side of @ManyToOne relation?\nShould I change it to bidirectional and persist child from parent? But which one (B or C) should I choose to persist from if they are equally important?</p>\n<p>I didn't want to make it @OneToMany based on this quote from Vlad's blog: <a href=\"https://i.stack.imgur.com/J6AqI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J6AqI.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","selenium","selenium-webdriver","xpath","drop-down-menu"],"comments":[{"owner":{"account_id":10404380,"reputation":2588,"user_id":7671727,"display_name":"AbiSaran"},"score":0,"creation_date":1664893082,"post_id":73949276,"comment_id":130570986,"body_markdown":"Can you post the URL?","body":"Can you post the URL?"},{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":0,"creation_date":1664893155,"post_id":73949276,"comment_id":130571024,"body_markdown":"Hey pal. it&#39;s not public at all, it&#39;s hidden","body":"Hey pal. it&#39;s not public at all, it&#39;s hidden"},{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":0,"creation_date":1664893247,"post_id":73949276,"comment_id":130571064,"body_markdown":"@AbiSaran i don&#39;t understand how to select an option from a select2 dropdown, tried a lot of different things","body":"@AbiSaran i don&#39;t understand how to select an option from a select2 dropdown, tried a lot of different things"}],"answers":[{"comments":[{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":0,"creation_date":1664893420,"post_id":73949380,"comment_id":130571139,"body_markdown":"Hey, thnks for replying!. No, it is not working. It is not getting selected.","body":"Hey, thnks for replying!. No, it is not working. It is not getting selected."},{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":0,"creation_date":1664894622,"post_id":73949380,"comment_id":130571573,"body_markdown":"No, i don&#39;t know why but it is not working at all. The XPATH from option Company 2 is: //*[@id=&quot;select2-OperativeUnit_Id-result-spkb-408&quot;]","body":"No, i don&#39;t know why but it is not working at all. The XPATH from option Company 2 is: //*[@id=&quot;select2-OperativeUnit_Id-result-spkb-408&quot;]"},{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":0,"creation_date":1664895457,"post_id":73949380,"comment_id":130571913,"body_markdown":"Hey pal, i solved this by using this: driver.findElement(By.xpath(&quot;//li[@class=&#39;select2-results__option&#39; and contains(.,&#39;Company2&#39;)]&quot;)).click(); from Prophet. Why his method worked but different methods dont? why?","body":"Hey pal, i solved this by using this: driver.findElement(By.xpath(&quot;//li[@class=&#39;select2-results__o&zwnj;&#8203;ption&#39; and contains(.,&#39;Company2&#39;)]&quot;)).click(); from Prophet. Why his method worked but different methods dont? why?"}],"tags":[],"owner":{"account_id":17698173,"reputation":15901,"user_id":12848411,"display_name":"Md. Fazlul Hoque"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664893648,"creation_date":1664893272,"answer_id":73949380,"question_id":73949276,"body_markdown":"Try:\r\n\r\n    driver.findElement(By.xpath(&quot;//*[@id=\\&quot;select2-OperativeUnit_Id-container\\&quot;]/li[2]&quot;).click()\r\n\r\n\r\n#OR\r\n\r\n\r\n    driver.findElement(By.xpath(&quot;//li[contains(text(),&#39;Company2&#39;)]&quot;)).click()","title":"Dropdown options are not getting selected (select 2) using SELENIUM and JAVA","body":"<p>Try:</p>\n<pre><code>driver.findElement(By.xpath(&quot;//*[@id=\\&quot;select2-OperativeUnit_Id-container\\&quot;]/li[2]&quot;).click()\n</code></pre>\n<p>#OR</p>\n<pre><code>driver.findElement(By.xpath(&quot;//li[contains(text(),'Company2')]&quot;)).click()\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":1,"creation_date":1664893662,"post_id":73949392,"comment_id":130571226,"body_markdown":"Hey pal, i&#39;m checking it out. It seems to be selecting it but the option selected vanish","body":"Hey pal, i&#39;m checking it out. It seems to be selecting it but the option selected vanish"},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1664893874,"post_id":73949392,"comment_id":130571316,"body_markdown":"You didn&#39;t (can&#39;t) share the link and all your code so I&#39;m not sure we can ques why the option get disappearing","body":"You didn&#39;t (can&#39;t) share the link and all your code so I&#39;m not sure we can ques why the option get disappearing"},{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":0,"creation_date":1664894260,"post_id":73949392,"comment_id":130571453,"body_markdown":"No, it is not getting selected it is like &quot;refreshing&quot; the page","body":"No, it is not getting selected it is like &quot;refreshing&quot; the page"},{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":0,"creation_date":1664894590,"post_id":73949392,"comment_id":130571561,"body_markdown":"The XPATH from option Company 2 is: //*[@id=&quot;select2-OperativeUnit_Id-result-spkb-408&quot;]","body":"The XPATH from option Company 2 is: //*[@id=&quot;select2-OperativeUnit_Id-result-spkb-408&quot;]"},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1664894858,"post_id":73949392,"comment_id":130571664,"body_markdown":"Xpath can be determined by any combination of attributes. Based on what you shared xpath I gave you is unique while id attribute seems to contain some dynamic suffix.","body":"Xpath can be determined by any combination of attributes. Based on what you shared xpath I gave you is unique while id attribute seems to contain some dynamic suffix."},{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":0,"creation_date":1664895158,"post_id":73949392,"comment_id":130571790,"body_markdown":"I don&#39;t understand because by using your code it seems to be doing &quot;something&quot; but after executing your code it is like the page itself refresh","body":"I don&#39;t understand because by using your code it seems to be doing &quot;something&quot; but after executing your code it is like the page itself refresh"},{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":0,"creation_date":1664895354,"post_id":73949392,"comment_id":130571867,"body_markdown":"I re-tried this: driver.findElement(By.xpath(&quot;//li[@class=&#39;select2-results__option&#39; and contains(.,&#39;Company2&#39;)]&quot;)).click(); and now it worked. Could you please explain to me why sometimes driver.findElement(By.xpath(&quot;//li[contains(.,&#39;Company2&#39;)]&quot;)).click(); works but in this case this one was the indicated: driver.findElement(By.xpath(&quot;//li[@class=&#39;select2-results__option&#39; and contains(.,&#39;Company2&#39;)]&quot;)).click();","body":"I re-tried this: driver.findElement(By.xpath(&quot;//li[@class=&#39;select2-results__o&zwnj;&#8203;ption&#39; and contains(.,&#39;Company2&#39;)]&quot;)).click(); and now it worked. Could you please explain to me why sometimes driver.findElement(By.xpath(&quot;//li[contains(.,&#39;Company2&#39;)]&quot;))&zwnj;&#8203;.click(); works but in this case this one was the indicated: driver.findElement(By.xpath(&quot;//li[@class=&#39;select2-results__o&zwnj;&#8203;ption&#39; and contains(.,&#39;Company2&#39;)]&quot;)).click();"},{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":0,"creation_date":1664895387,"post_id":73949392,"comment_id":130571894,"body_markdown":"What&#39;s behind that? Why sometimes work and sometimes doesnt?","body":"What&#39;s behind that? Why sometimes work and sometimes doesnt?"},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1664896173,"post_id":73949392,"comment_id":130572197,"body_markdown":"The first locator not precise enough, it can match some other element. I don&#39;t know. Need to debug but I can&#39;t ...","body":"The first locator not precise enough, it can match some other element. I don&#39;t know. Need to debug but I can&#39;t ..."},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":1,"creation_date":1664896238,"post_id":73949392,"comment_id":130572221,"body_markdown":"The second locator contains class attribute making the locator more unique and stable","body":"The second locator contains class attribute making the locator more unique and stable"},{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":0,"creation_date":1664896301,"post_id":73949392,"comment_id":130572250,"body_markdown":"Pal, take a look at this: &lt;input id=&quot;AccountNumber_1&quot; type=&quot;text&quot; data-index=&quot;1&quot; data-name=&quot;AccountNumber&quot; class=&quot;form-control&quot; placeholder=&quot;Account Number&quot;&gt;\nI did this but it seems not to be inserting the data. Am i missing some other value to specifiy:\ndriver.findElement(By.id(&quot;AccountNumber_1&quot;)).sendKeys(&quot;001712&quot;);","body":"Pal, take a look at this: &lt;input id=&quot;AccountNumber_1&quot; type=&quot;text&quot; data-index=&quot;1&quot; data-name=&quot;AccountNumber&quot; class=&quot;form-control&quot; placeholder=&quot;Account Number&quot;&gt; I did this but it seems not to be inserting the data. Am i missing some other value to specifiy: driver.findElement(By.id(&quot;AccountNumber_1&quot;)).sendKeys(&quot;00171&zwnj;&#8203;2&quot;);"},{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":1,"creation_date":1664896886,"post_id":73949392,"comment_id":130572463,"body_markdown":"It worked by doing this: driver.findElement(By.xpath(&quot;//*[@id=\\&quot;AccountNumber_1\\&quot;]&quot;)).sendKeys(&quot;001712&quot;);","body":"It worked by doing this: driver.findElement(By.xpath(&quot;//*[@id=\\&quot;AccountNumber_1\\&quot;]&quot;))&zwnj;&#8203;.sendKeys(&quot;001712&quot;);"}],"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"comment_count":12,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664893747,"creation_date":1664893322,"answer_id":73949392,"question_id":73949276,"body_markdown":"Instead of\r\n```java\r\ndriver.findElement(By.xpath(&quot;//*[@id=\\&quot;select2-OperativeUnit_Id-container\\&quot;]&quot;)).click();\r\n```\r\nTry\r\n```java\r\ndriver.findElement(By.xpath(&quot;//li[contains(.,&#39;Company2&#39;)]&quot;)).click();\r\n```\r\nYou can make the locator more precise with this:\r\n```java\r\ndriver.findElement(By.xpath(&quot;//li[@class=&#39;select2-results__option&#39; and contains(.,&#39;Company2&#39;)]&quot;)).click();\r\n```\r\n","title":"Dropdown options are not getting selected (select 2) using SELENIUM and JAVA","body":"<p>Instead of</p>\n<pre class=\"lang-java prettyprint-override\"><code>driver.findElement(By.xpath(&quot;//*[@id=\\&quot;select2-OperativeUnit_Id-container\\&quot;]&quot;)).click();\n</code></pre>\n<p>Try</p>\n<pre class=\"lang-java prettyprint-override\"><code>driver.findElement(By.xpath(&quot;//li[contains(.,'Company2')]&quot;)).click();\n</code></pre>\n<p>You can make the locator more precise with this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>driver.findElement(By.xpath(&quot;//li[@class='select2-results__option' and contains(.,'Company2')]&quot;)).click();\n</code></pre>\n"}],"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":553,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73949392,"answer_count":2,"score":1,"last_activity_date":1664893747,"creation_date":1664892800,"question_id":73949276,"body_markdown":"I&#39;ve been trying without success to select an option from a dropdown select 2 class.\r\n\r\n\r\n    &lt;span class=&quot;select2-selection__rendered&quot; id=&quot;select2-OperativeUnit_Id-container&quot; title=&quot;Newsan&quot;&gt;Newsan&lt;/span&gt;\r\n\r\nI did this then in Selenium and the dropdown is selected:\r\n\r\n    driver.findElement(By.xpath(&quot;//*[@id=\\&quot;select2-OperativeUnit_Id-container\\&quot;]&quot;)).click();\r\n\r\n\r\nThe problem is that i can select no option at all. The dropdown has this:\r\n\r\n    &lt;ul class=&quot;select2-results__options&quot; role=&quot;tree&quot; id=&quot;select2-OperativeUnit_Id-results&quot; aria-expanded=&quot;true&quot; aria-hidden=&quot;false&quot;&gt;\r\n    &lt;li class=&quot;select2-results__option select2-results__option--highlighted&quot; id=&quot;select2-OperativeUnit_Id-result-1jq8-81&quot; role=&quot;treeitem&quot; aria-selected=&quot;true&quot;&gt;Company1&lt;/li&gt;\r\n    &lt;li class=&quot;select2-results__option&quot; id=&quot;select2-OperativeUnit_Id-result-fjep-281&quot; role=&quot;treeitem&quot; aria-selected=&quot;false&quot;&gt;Company2&lt;/li&gt;\r\n    &lt;li class=&quot;select2-results__option&quot; id=&quot;select2-OperativeUnit_Id-result-e8a1-408&quot; role=&quot;treeitem&quot; aria-selected=&quot;false&quot;&gt;Company3&lt;/li&gt;\r\n    &lt;/ul&gt;\r\n\r\nWhat should i do to select the option &quot;Company2&quot;?\r\n\r\n","title":"Dropdown options are not getting selected (select 2) using SELENIUM and JAVA","body":"<p>I've been trying without success to select an option from a dropdown select 2 class.</p>\n<pre><code>&lt;span class=&quot;select2-selection__rendered&quot; id=&quot;select2-OperativeUnit_Id-container&quot; title=&quot;Newsan&quot;&gt;Newsan&lt;/span&gt;\n</code></pre>\n<p>I did this then in Selenium and the dropdown is selected:</p>\n<pre><code>driver.findElement(By.xpath(&quot;//*[@id=\\&quot;select2-OperativeUnit_Id-container\\&quot;]&quot;)).click();\n</code></pre>\n<p>The problem is that i can select no option at all. The dropdown has this:</p>\n<pre><code>&lt;ul class=&quot;select2-results__options&quot; role=&quot;tree&quot; id=&quot;select2-OperativeUnit_Id-results&quot; aria-expanded=&quot;true&quot; aria-hidden=&quot;false&quot;&gt;\n&lt;li class=&quot;select2-results__option select2-results__option--highlighted&quot; id=&quot;select2-OperativeUnit_Id-result-1jq8-81&quot; role=&quot;treeitem&quot; aria-selected=&quot;true&quot;&gt;Company1&lt;/li&gt;\n&lt;li class=&quot;select2-results__option&quot; id=&quot;select2-OperativeUnit_Id-result-fjep-281&quot; role=&quot;treeitem&quot; aria-selected=&quot;false&quot;&gt;Company2&lt;/li&gt;\n&lt;li class=&quot;select2-results__option&quot; id=&quot;select2-OperativeUnit_Id-result-e8a1-408&quot; role=&quot;treeitem&quot; aria-selected=&quot;false&quot;&gt;Company3&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n<p>What should i do to select the option &quot;Company2&quot;?</p>\n"},{"tags":["java","apache-kafka","avro","confluent-schema-registry"],"comments":[{"owner":{"account_id":466002,"reputation":20226,"user_id":870483,"accept_rate":81,"display_name":"Nishu Tayal"},"score":0,"creation_date":1547564371,"post_id":54195813,"comment_id":95229697,"body_markdown":"May be the link can help you : http://www.bigendiandata.com/2016-12-05-Data-Types-Compared/","body":"May be the link can help you : <a href=\"http://www.bigendiandata.com/2016-12-05-Data-Types-Compared/\" rel=\"nofollow noreferrer\">bigendiandata.com/2016-12-05-Data-Types-Compared</a>"}],"answers":[{"comments":[{"owner":{"account_id":7874551,"reputation":6285,"user_id":5950751,"display_name":"Bartosz Wardziński"},"score":1,"creation_date":1547558317,"post_id":54196006,"comment_id":95225905,"body_markdown":"Is there any option to use *pure* POJO, with schema registry, without autogeneration the class?","body":"Is there any option to use <i>pure</i> POJO, with schema registry, without autogeneration the class?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1547613085,"post_id":54196006,"comment_id":95246955,"body_markdown":"@wardziniak There is the `ReflectData` class of Avro for making Avro from POJO&#39;s. Note that Java types don&#39;t map perfectly to Avro types. E.g. TreeMap and LinkedLists don&#39;t link exactly to Avro maps and lists, and there is no Set support in Avro","body":"@wardziniak There is the <code>ReflectData</code> class of Avro for making Avro from POJO&#39;s. Note that Java types don&#39;t map perfectly to Avro types. E.g. TreeMap and LinkedLists don&#39;t link exactly to Avro maps and lists, and there is no Set support in Avro"},{"owner":{"account_id":10930114,"reputation":794,"user_id":8033562,"display_name":"Geoff Langenderfer"},"score":0,"creation_date":1666600624,"post_id":54196006,"comment_id":130967120,"body_markdown":"@BartoszWardziński check out [spark to_avro](https://spark.apache.org/docs/latest/sql-data-sources-avro.html)","body":"@BartoszWardziński check out <a href=\"https://spark.apache.org/docs/latest/sql-data-sources-avro.html\" rel=\"nofollow noreferrer\">spark to_avro</a>"}],"tags":[],"owner":{"account_id":9605621,"reputation":37117,"user_id":7131757,"accept_rate":77,"display_name":"Giorgos Myrianthous"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1547545873,"creation_date":1547544545,"answer_id":54196006,"question_id":54195813,"body_markdown":"It is a matter of speed and storage. When serializing data, you often need to transmit the actual schema and therefore, this cause an increase of payload size. \r\n\r\n                                Total Payload Size\r\n    +-----------------+--------------------------------------------------+\r\n    |     Schema      |                 Serialised Data                  |\r\n    +-----------------+--------------------------------------------------+\r\n\r\nSchema Registry provides a centralized repository for schemas and metadata so that all schemas are registered in a central system. This centralized system enables producers to only include the ID of the schema instead of the full schema itself (in text format).  \r\n\r\n                          Total Payload Size\r\n    +----+--------------------------------------------------+\r\n    | ID |                 Serialised Data                  |\r\n    +----+--------------------------------------------------+\r\nTherefore, the serialisation becomes faster.\r\n\r\nFurthermore, schema registry versioning enables the enforcement of data policies that might help to prevent newer schemas to break compatibility with existing versions that could potentially cause downtime or any other significant issues in your pipeline.\r\n\r\n\r\n&lt;br&gt;\r\nSome more benefits of Schema Registry are thoroughly explained in [this article by Confluent][1]. \r\n\r\n\r\n  [1]: https://www.confluent.io/blog/schema-registry-kafka-stream-processing-yes-virginia-you-really-need-one/","title":"Why use Avro with Kafka - How to handle POJOs","body":"<p>It is a matter of speed and storage. When serializing data, you often need to transmit the actual schema and therefore, this cause an increase of payload size. </p>\n\n<pre><code>                            Total Payload Size\n+-----------------+--------------------------------------------------+\n|     Schema      |                 Serialised Data                  |\n+-----------------+--------------------------------------------------+\n</code></pre>\n\n<p>Schema Registry provides a centralized repository for schemas and metadata so that all schemas are registered in a central system. This centralized system enables producers to only include the ID of the schema instead of the full schema itself (in text format).  </p>\n\n<pre><code>                      Total Payload Size\n+----+--------------------------------------------------+\n| ID |                 Serialised Data                  |\n+----+--------------------------------------------------+\n</code></pre>\n\n<p>Therefore, the serialisation becomes faster.</p>\n\n<p>Furthermore, schema registry versioning enables the enforcement of data policies that might help to prevent newer schemas to break compatibility with existing versions that could potentially cause downtime or any other significant issues in your pipeline.</p>\n\n<p><br>\nSome more benefits of Schema Registry are thoroughly explained in <a href=\"https://www.confluent.io/blog/schema-registry-kafka-stream-processing-yes-virginia-you-really-need-one/\" rel=\"nofollow noreferrer\">this article by Confluent</a>. </p>\n"},{"tags":[],"owner":{"account_id":1439802,"reputation":610,"user_id":1360276,"accept_rate":44,"display_name":"saabeilin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1547600217,"creation_date":1547600217,"answer_id":54208985,"question_id":54195813,"body_markdown":"First of all - Kafka has no idea about the key/value content. It operates bytes and it&#39;s client (producer/consumer) responsibility to cake care of de/serialization.\r\n\r\nThe most common options so far seem to be JSON, protobuf and Avro.\r\n\r\nWhat I personally like with Avro and why I usually use it and recommend to others:\r\n\r\n1) It&#39;s a enough compact binary serialization, with a schema and _logical types_ (which help distinguish just a regular `long` from `timestamp in long millis`)\r\n\r\n2) the Avro schemas are very descriptive and perfectly documented\r\n\r\n3) wide support among most of widely-used programming languages is a must!\r\n\r\n4) Confluent (and others) provide a repository for schemas, a so-called &quot;schema registry&quot;, to have a centralized storage for your schemas. In Avro, the message contains just the schema version ID, not the schema itself.\r\n\r\n5) If you are using Java, you can have great benefits from using the POJO base class generation from the schema.\r\n\r\nSure you can have parts of these with other options. You should try and compare all the options that suite your use-case. \r\n\r\n_P.S. My very personal opinionated advice is: if it&#39;s not a `String`, go for Avro. Applies both for keys and values._\r\n\r\n\r\n","title":"Why use Avro with Kafka - How to handle POJOs","body":"<p>First of all - Kafka has no idea about the key/value content. It operates bytes and it's client (producer/consumer) responsibility to cake care of de/serialization.</p>\n\n<p>The most common options so far seem to be JSON, protobuf and Avro.</p>\n\n<p>What I personally like with Avro and why I usually use it and recommend to others:</p>\n\n<p>1) It's a enough compact binary serialization, with a schema and <em>logical types</em> (which help distinguish just a regular <code>long</code> from <code>timestamp in long millis</code>)</p>\n\n<p>2) the Avro schemas are very descriptive and perfectly documented</p>\n\n<p>3) wide support among most of widely-used programming languages is a must!</p>\n\n<p>4) Confluent (and others) provide a repository for schemas, a so-called \"schema registry\", to have a centralized storage for your schemas. In Avro, the message contains just the schema version ID, not the schema itself.</p>\n\n<p>5) If you are using Java, you can have great benefits from using the POJO base class generation from the schema.</p>\n\n<p>Sure you can have parts of these with other options. You should try and compare all the options that suite your use-case. </p>\n\n<p><em>P.S. My very personal opinionated advice is: if it's not a <code>String</code>, go for Avro. Applies both for keys and values.</em></p>\n"},{"comments":[{"owner":{"account_id":10930114,"reputation":794,"user_id":8033562,"display_name":"Geoff Langenderfer"},"score":0,"creation_date":1666600302,"post_id":54210771,"comment_id":130967005,"body_markdown":"why not use pojo + [spark to_avro](https://spark.apache.org/docs/latest/sql-data-sources-avro.html)? Pojo will have type and nullability info","body":"why not use pojo + <a href=\"https://spark.apache.org/docs/latest/sql-data-sources-avro.html\" rel=\"nofollow noreferrer\">spark to_avro</a>? Pojo will have type and nullability info"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1666631455,"post_id":54210771,"comment_id":130978068,"body_markdown":"Question was not asking about Spark. Avro/JSON/Protobuf also support null fields, and generate POJOs with them,  so I don&#39;t understand your question","body":"Question was not asking about Spark. Avro/JSON/Protobuf also support null fields, and generate POJOs with them,  so I don&#39;t understand your question"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1664892832,"creation_date":1547615430,"answer_id":54210771,"question_id":54195813,"body_markdown":"You don&#39;t need AVSC, [you can use an AVDL file](https://avro.apache.org/docs/1.8.1/idl.html), which basically looks the same as a POJO with only the fields\r\n\r\n    @namespace(&quot;com.example.mycode.avro&quot;)\r\n    protocol ExampleProtocol {\r\n       record User {\r\n         long id;\r\n         string name;\r\n       }\r\n    }\r\n\r\nWhich, when using the `idl-protocol` goal of the Maven plugin, will create this AVSC for you, rather than you writing it yourself. \r\n\r\n    {\r\n      &quot;type&quot; : &quot;record&quot;,\r\n      &quot;name&quot; : &quot;User&quot;,\r\n      &quot;namespace&quot; : &quot;com.example.mycode.avro&quot;,\r\n      &quot;fields&quot; : [ {\r\n        &quot;name&quot; : &quot;id&quot;,\r\n        &quot;type&quot; : &quot;long&quot;\r\n      }, {\r\n        &quot;name&quot; : &quot;name&quot;,\r\n        &quot;type&quot; : &quot;string&quot;\r\n      } ]\r\n    }\r\n\r\nAnd it&#39;ll also place a `SpecificData` POJO `User.java` on your classpath for using in your code.\r\n\r\n---\r\n\r\nIf you already had a POJO, you don&#39;t need to use AVSC or AVDL files. There are libraries to convert POJOs. For example, you [**can use**  Jackson](https://github.com/FasterXML/jackson-dataformats-binary/tree/master/avro#generating-avro-schema-from-pojo-definition), which is not only for JSON, you would just need to likely create a `JacksonAvroSerializer` for Kafka, for example, or find if one exists. \r\n\r\nAvro also has [built-in library based on reflection](https://blog.jeffli.me/blog/2014/04/05/avro-cookbook-part-ii/#parse-schema-from-existing-java-class/). \r\n\r\nConfluent Schema Registry serializers have a setting for using reflect based models. \r\n\r\n---\r\n\r\nSo to the question - *why Avro (for Kafka)?*\r\n\r\nWell, having a schema is a *good thing*. Think about RDBMS tables, you can explain the table, and you see all the columns. Move to NoSQL document databases, and they can contain literally anything, and this is the JSON world of Kafka.  \r\n\r\nLet&#39;s assume you have consumers in your Kafka cluster that have no idea what is in the topic, they have to know exactly who/what has been produced into a topic. They can try the console consumer, and if it were a plaintext like JSON, then they have to figure out some fields they are interested in, then perform flaky HashMap-like `.get(&quot;name&quot;)` operations again and again, only to run into an NPE when a field doesn&#39;t exist. With Avro, you **clearly define** defaults and nullable fields.  \r\n\r\nYou aren&#39;t *required* to use a Schema Registry, but it provides that type of `explain topic` semantics for the RDBMS analogy. It also saves you from needing to send the schema along with every message, and the expense of extra bandwidth on the Kafka topic. The registry is not only useful for Kafka, though, as it could be used for Spark, Flink, Hive, etc for all Data Science analysis surrounding streaming data ingest. \r\n\r\n---\r\n\r\nAssuming you did want to use JSON, then [try using MsgPack instead](https://msgpack.org/) and you&#39;ll likely see an increase in your Kafka throughput and save disk space on the brokers\r\n\r\n---\r\n\r\nYou can also use other formats like Protobuf or Thrift, [as Uber has compared \r\n](https://eng.uber.com/trip-data-squeeze/)\r\n","title":"Why use Avro with Kafka - How to handle POJOs","body":"<p>You don't need AVSC, <a href=\"https://avro.apache.org/docs/1.8.1/idl.html\" rel=\"nofollow noreferrer\">you can use an AVDL file</a>, which basically looks the same as a POJO with only the fields</p>\n<pre><code>@namespace(&quot;com.example.mycode.avro&quot;)\nprotocol ExampleProtocol {\n   record User {\n     long id;\n     string name;\n   }\n}\n</code></pre>\n<p>Which, when using the <code>idl-protocol</code> goal of the Maven plugin, will create this AVSC for you, rather than you writing it yourself.</p>\n<pre><code>{\n  &quot;type&quot; : &quot;record&quot;,\n  &quot;name&quot; : &quot;User&quot;,\n  &quot;namespace&quot; : &quot;com.example.mycode.avro&quot;,\n  &quot;fields&quot; : [ {\n    &quot;name&quot; : &quot;id&quot;,\n    &quot;type&quot; : &quot;long&quot;\n  }, {\n    &quot;name&quot; : &quot;name&quot;,\n    &quot;type&quot; : &quot;string&quot;\n  } ]\n}\n</code></pre>\n<p>And it'll also place a <code>SpecificData</code> POJO <code>User.java</code> on your classpath for using in your code.</p>\n<hr />\n<p>If you already had a POJO, you don't need to use AVSC or AVDL files. There are libraries to convert POJOs. For example, you <a href=\"https://github.com/FasterXML/jackson-dataformats-binary/tree/master/avro#generating-avro-schema-from-pojo-definition\" rel=\"nofollow noreferrer\"><strong>can use</strong>  Jackson</a>, which is not only for JSON, you would just need to likely create a <code>JacksonAvroSerializer</code> for Kafka, for example, or find if one exists.</p>\n<p>Avro also has <a href=\"https://blog.jeffli.me/blog/2014/04/05/avro-cookbook-part-ii/#parse-schema-from-existing-java-class/\" rel=\"nofollow noreferrer\">built-in library based on reflection</a>.</p>\n<p>Confluent Schema Registry serializers have a setting for using reflect based models.</p>\n<hr />\n<p>So to the question - <em>why Avro (for Kafka)?</em></p>\n<p>Well, having a schema is a <em>good thing</em>. Think about RDBMS tables, you can explain the table, and you see all the columns. Move to NoSQL document databases, and they can contain literally anything, and this is the JSON world of Kafka.</p>\n<p>Let's assume you have consumers in your Kafka cluster that have no idea what is in the topic, they have to know exactly who/what has been produced into a topic. They can try the console consumer, and if it were a plaintext like JSON, then they have to figure out some fields they are interested in, then perform flaky HashMap-like <code>.get(&quot;name&quot;)</code> operations again and again, only to run into an NPE when a field doesn't exist. With Avro, you <strong>clearly define</strong> defaults and nullable fields.</p>\n<p>You aren't <em>required</em> to use a Schema Registry, but it provides that type of <code>explain topic</code> semantics for the RDBMS analogy. It also saves you from needing to send the schema along with every message, and the expense of extra bandwidth on the Kafka topic. The registry is not only useful for Kafka, though, as it could be used for Spark, Flink, Hive, etc for all Data Science analysis surrounding streaming data ingest.</p>\n<hr />\n<p>Assuming you did want to use JSON, then <a href=\"https://msgpack.org/\" rel=\"nofollow noreferrer\">try using MsgPack instead</a> and you'll likely see an increase in your Kafka throughput and save disk space on the brokers</p>\n<hr />\n<p>You can also use other formats like Protobuf or Thrift, <a href=\"https://eng.uber.com/trip-data-squeeze/\" rel=\"nofollow noreferrer\">as Uber has compared\n</a></p>\n"}],"owner":{"account_id":7326908,"reputation":209,"user_id":5581051,"display_name":"adpap"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5927,"favorite_count":0,"down_vote_count":1,"up_vote_count":13,"accepted_answer_id":54210771,"answer_count":3,"score":12,"last_activity_date":1664892832,"creation_date":1547543880,"question_id":54195813,"body_markdown":"I have a spring application that is my kafka producer and I was wondering why avro is the best way to go. \r\nI read about it and all it has to offer, but why can&#39;t I just serialize my POJO that I created myself with jackson for example and send it to kafka?\r\n\r\nI&#39;m saying this because the POJO generation from avro is not so straight forward. \r\nOn top of it, it requires the maven plugin and an .avsc file.\r\n\r\nSo for example I have a POJO on my kafka producer created myself called User:\r\n\r\n    public class User {\r\n    \r\n    \tprivate long\tuserId;\r\n    \r\n    \tprivate String\tname;\r\n    \r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \tpublic long getUserId() {\r\n    \t\treturn userId;\r\n    \t}\r\n    \r\n    \tpublic void setUserId(long userId) {\r\n    \t\tthis.userId = userId;\r\n    \t}\r\n    \r\n    }\r\n\r\nI serialize it and send it to my user topic in kafka. Then I have a consumer that itself has a POJO User and deserialize the message. \r\nIs it a matter of space? Is it also not faster to serialize and deserialize this way? Not to mention that there is an overhead of maintaining a schema-registry.","title":"Why use Avro with Kafka - How to handle POJOs","body":"<p>I have a spring application that is my kafka producer and I was wondering why avro is the best way to go. \nI read about it and all it has to offer, but why can't I just serialize my POJO that I created myself with jackson for example and send it to kafka?</p>\n\n<p>I'm saying this because the POJO generation from avro is not so straight forward. \nOn top of it, it requires the maven plugin and an .avsc file.</p>\n\n<p>So for example I have a POJO on my kafka producer created myself called User:</p>\n\n<pre><code>public class User {\n\n    private long    userId;\n\n    private String  name;\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public long getUserId() {\n        return userId;\n    }\n\n    public void setUserId(long userId) {\n        this.userId = userId;\n    }\n\n}\n</code></pre>\n\n<p>I serialize it and send it to my user topic in kafka. Then I have a consumer that itself has a POJO User and deserialize the message. \nIs it a matter of space? Is it also not faster to serialize and deserialize this way? Not to mention that there is an overhead of maintaining a schema-registry.</p>\n"},{"tags":["java","sorting","collections","linked-list"],"comments":[{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":1,"creation_date":1664808591,"post_id":73937174,"comment_id":130550216,"body_markdown":"Is this your own singly linked list class?","body":"Is this your own singly linked list class?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1664809087,"post_id":73937174,"comment_id":130550376,"body_markdown":"This is **your** homework not our. Try to solve it by yourself and come back if you have a specific problem.","body":"This is <b>your</b> homework not our. Try to solve it by yourself and come back if you have a specific problem."},{"owner":{"account_id":25242983,"reputation":1,"user_id":19076619,"display_name":"Shubham Shekhar Das"},"score":0,"creation_date":1664814026,"post_id":73937174,"comment_id":130551968,"body_markdown":"Sorry to say but this isn&#39;t my homework I was solving a leetcode question where I have to merge a list of LinkedList and then have to sort the linked list. I have merged the List of Linked List in a Linked List but couldn&#39;t able to sort it directly therefore asked a doubt whether it can be sort directly or not. But I think you misunderstood my question don&#39;t know why you replied like this.","body":"Sorry to say but this isn&#39;t my homework I was solving a leetcode question where I have to merge a list of LinkedList and then have to sort the linked list. I have merged the List of Linked List in a Linked List but couldn&#39;t able to sort it directly therefore asked a doubt whether it can be sort directly or not. But I think you misunderstood my question don&#39;t know why you replied like this."}],"answers":[{"comments":[{"owner":{"account_id":25242983,"reputation":1,"user_id":19076619,"display_name":"Shubham Shekhar Das"},"score":0,"creation_date":1664812732,"post_id":73937378,"comment_id":130551570,"body_markdown":"Thank you for the answer, I was also thinking the same but I thought there might be some method in Collections framework through which we can achieve this. But your answer clarified my doubt.","body":"Thank you for the answer, I was also thinking the same but I thought there might be some method in Collections framework through which we can achieve this. But your answer clarified my doubt."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664852038,"creation_date":1664809619,"answer_id":73937378,"question_id":73937174,"body_markdown":"If the (hypothetical) singly linked list implements the `java.util.List` interface, then you can sort it using `Collections.sort`.  Otherwise, it cannot be done using the (standard) Java collections framework.\r\n\r\nYou could ... of course ... copy the (hypothetical) linked list elements to (say) an `ArrayList`, sort that using `Collections.sort`, then copy the elements of the sorted `ArrayList` back replacing the linked list elements.\r\n\r\n--------------------\r\n\r\n&gt; Please try to answer the question in Java.\r\n\r\nEnglish is sufficiently expressive in this case.\r\n\r\n","title":"Sorting an Single Singly Linked list","body":"<p>If the (hypothetical) singly linked list implements the <code>java.util.List</code> interface, then you can sort it using <code>Collections.sort</code>.  Otherwise, it cannot be done using the (standard) Java collections framework.</p>\n<p>You could ... of course ... copy the (hypothetical) linked list elements to (say) an <code>ArrayList</code>, sort that using <code>Collections.sort</code>, then copy the elements of the sorted <code>ArrayList</code> back replacing the linked list elements.</p>\n<hr />\n<blockquote>\n<p>Please try to answer the question in Java.</p>\n</blockquote>\n<p>English is sufficiently expressive in this case.</p>\n"},{"tags":[],"owner":{"account_id":13017241,"reputation":85,"user_id":9407974,"display_name":"UmHeyThere"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664810039,"creation_date":1664810039,"answer_id":73937463,"question_id":73937174,"body_markdown":"The `java.util.Collections` contains the `Collections.sort();` function. Within that the `Collections.reverseOrder()` can be utilised.\r\n\r\nFor example:\r\n\r\n    import java.util.Arrays;  \r\n    import java.util.Collections;  //import Collections\r\n    import java.util.List;  \r\n    public class TestList  \r\n    {  \r\n    public static void main(String args[])   \r\n        {  \r\n            List&lt;Integer&gt; testList = Arrays.asList(5,4,3,2,1);  \r\n            Collections.sort(testList, Collections.reverseOrder()); //use Collections to reverse the list order\r\n            System.out.println(testList);  \r\n        }  \r\n    }  \r\n\r\nThe resultant console output would be `[1, 2, 3, 4, 5]`\r\n","title":"Sorting an Single Singly Linked list","body":"<p>The <code>java.util.Collections</code> contains the <code>Collections.sort();</code> function. Within that the <code>Collections.reverseOrder()</code> can be utilised.</p>\n<p>For example:</p>\n<pre><code>import java.util.Arrays;  \nimport java.util.Collections;  //import Collections\nimport java.util.List;  \npublic class TestList  \n{  \npublic static void main(String args[])   \n    {  \n        List&lt;Integer&gt; testList = Arrays.asList(5,4,3,2,1);  \n        Collections.sort(testList, Collections.reverseOrder()); //use Collections to reverse the list order\n        System.out.println(testList);  \n    }  \n}  \n</code></pre>\n<p>The resultant console output would be <code>[1, 2, 3, 4, 5]</code></p>\n"}],"owner":{"account_id":25242983,"reputation":1,"user_id":19076619,"display_name":"Shubham Shekhar Das"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1664862073,"accepted_answer_id":73937378,"answer_count":2,"score":-3,"last_activity_date":1664892611,"creation_date":1664808511,"question_id":73937174,"body_markdown":"Is there any way or method in java Collection framework through which we can sort a singly Linked list directly as we do with lists. ex Collections.sort(lists);\r\n\r\n\r\n","title":"Sorting an Single Singly Linked list","body":"<p>Is there any way or method in java Collection framework through which we can sort a singly Linked list directly as we do with lists. ex Collections.sort(lists);</p>\n"},{"tags":["java","debugging","plugins","rundeck"],"answers":[{"comments":[{"owner":{"account_id":199946,"reputation":2432,"user_id":445548,"accept_rate":64,"display_name":"Shatazone"},"score":0,"creation_date":1664888971,"post_id":73947789,"comment_id":130569305,"body_markdown":"I was able to achieve that by launching Rundeck as follows:\njava -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005 -jar rundeck-4.6.1-20220914.war","body":"I was able to achieve that by launching Rundeck as follows: java -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,addres&zwnj;&#8203;s=5005 -jar rundeck-4.6.1-20220914.war"},{"owner":{"account_id":14433269,"reputation":3831,"user_id":10426011,"display_name":"MegaDrive68k"},"score":0,"creation_date":1664892288,"post_id":73947789,"comment_id":130570642,"body_markdown":"Great, yes, that is the way :)","body":"Great, yes, that is the way :)"}],"tags":[],"owner":{"account_id":14433269,"reputation":3831,"user_id":10426011,"display_name":"MegaDrive68k"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664892602,"creation_date":1664886130,"answer_id":73947789,"question_id":73947179,"body_markdown":"Yes, with this flag it works (without the asterisk and colon):\r\n\r\n```java\r\n-agentlib:jdwp=transport=dt_socket,address=&lt;debug_port_to_listen&gt;,server=y,suspend=n\r\n```\r\n\r\ne.g (Rundeck WAR based instance):\r\n\r\n```\r\njava -agentlib:jdwp=transport=dt_socket,address=&lt;debug_port_to_listen&gt;,server=y,suspend=n -jar rundeck.war\r\n```","title":"How can I attach a remote java debugger for debugging a rundeck plugin?","body":"<p>Yes, with this flag it works (without the asterisk and colon):</p>\n<pre class=\"lang-java prettyprint-override\"><code>-agentlib:jdwp=transport=dt_socket,address=&lt;debug_port_to_listen&gt;,server=y,suspend=n\n</code></pre>\n<p>e.g (Rundeck WAR based instance):</p>\n<pre><code>java -agentlib:jdwp=transport=dt_socket,address=&lt;debug_port_to_listen&gt;,server=y,suspend=n -jar rundeck.war\n</code></pre>\n"}],"owner":{"account_id":199946,"reputation":2432,"user_id":445548,"accept_rate":64,"display_name":"Shatazone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73947789,"answer_count":1,"score":0,"last_activity_date":1664892602,"creation_date":1664882740,"question_id":73947179,"body_markdown":"I am currently developing a custom java plugin for Rundeck.\r\nIs it possible attach a remote debugger on the java process to better understand and debug throughout the process?\r\n\r\nSomething like adding this flag to rundeck jvm:\r\n\r\n    -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005\r\n\r\n","title":"How can I attach a remote java debugger for debugging a rundeck plugin?","body":"<p>I am currently developing a custom java plugin for Rundeck.\nIs it possible attach a remote debugger on the java process to better understand and debug throughout the process?</p>\n<p>Something like adding this flag to rundeck jvm:</p>\n<pre><code>-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005\n</code></pre>\n"},{"tags":["java","android","flutter","dart","visual-studio-code"],"comments":[{"owner":{"account_id":8726421,"reputation":821,"user_id":15119028,"display_name":"Junaid Khalid"},"score":0,"creation_date":1649445739,"post_id":71799767,"comment_id":126886423,"body_markdown":"Please follow official guidelines I do not think you have your environment variables set","body":"Please follow official guidelines I do not think you have your environment variables set"}],"answers":[{"tags":[],"owner":{"account_id":15981524,"reputation":11,"user_id":11533101,"display_name":"Şerif &#199;i&#231;ek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664892521,"creation_date":1664892521,"answer_id":73949212,"question_id":71799767,"body_markdown":"please check your definitions in environment variables.\r\n.net 3.5 framework path or other variable path may not be defined.","title":"The system cannot find message text for message number 0x2350 in the message file for Application visual studio code","body":"<p>please check your definitions in environment variables.\n.net 3.5 framework path or other variable path may not be defined.</p>\n"}],"owner":{"account_id":24874179,"reputation":21,"user_id":18748288,"display_name":"Rizal Surya Gunawan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":757,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1664892521,"creation_date":1649432301,"question_id":71799767,"body_markdown":"Somebody please help me\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Fh4Kc.png\r\n\r\ncan&#39;t create flutter project,can&#39;t run flutter doctor in visual code.look picture &quot;The system cannot find message text for message number 0x2350 in the message file for Application.&quot;","title":"The system cannot find message text for message number 0x2350 in the message file for Application visual studio code","body":"<p>Somebody please help me\n<a href=\"https://i.stack.imgur.com/Fh4Kc.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>can't create flutter project,can't run flutter doctor in visual code.look picture &quot;The system cannot find message text for message number 0x2350 in the message file for Application.&quot;</p>\n"},{"tags":["java","spring","spring-mvc","configuration","web.xml"],"comments":[{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":1,"creation_date":1664792370,"post_id":73925625,"comment_id":130544905,"body_markdown":"pure spring project or spring-boot project ?","body":"pure spring project or spring-boot project ?"},{"owner":{"account_id":1993154,"reputation":585,"user_id":1786699,"accept_rate":100,"display_name":"PapaAtHome"},"score":1,"creation_date":1664878283,"post_id":73925625,"comment_id":130565821,"body_markdown":"What have you tried and what were the results?","body":"What have you tried and what were the results?"},{"owner":{"account_id":21806266,"reputation":50,"user_id":16104419,"display_name":"Богдан Иманкулов"},"score":0,"creation_date":1664892243,"post_id":73925625,"comment_id":130570619,"body_markdown":"pure spring mvc, no boot or something","body":"pure spring mvc, no boot or something"},{"owner":{"account_id":21806266,"reputation":50,"user_id":16104419,"display_name":"Богдан Иманкулов"},"score":0,"creation_date":1664892333,"post_id":73925625,"comment_id":130570666,"body_markdown":"i didn&#39;t try anyting cause i had no idea how to solve this","body":"i didn&#39;t try anyting cause i had no idea how to solve this"}],"owner":{"account_id":21806266,"reputation":50,"user_id":16104419,"display_name":"Богдан Иманкулов"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664892404,"creation_date":1664711969,"question_id":73925625,"body_markdown":"i want to convert this:\r\n```\r\n&lt;filter&gt;\r\n    &lt;filter-name&gt;SassCompiler&lt;/filter-name&gt;\r\n    &lt;filter-class&gt;com.darrinholst.sass_java.SassCompilingFilter&lt;/filter-class&gt;\r\n&lt;/filter&gt;\r\n\r\n&lt;filter-mapping&gt;\r\n    &lt;filter-name&gt;SassCompiler&lt;/filter-name&gt;\r\n    &lt;url-pattern&gt;*.css&lt;/url-pattern&gt;\r\n&lt;/filter-mapping&gt; \r\n```\r\nin web.xml into **exactly the same** thing in Java configuration, what should i do?\r\n\r\nIt&#39;s pure spring mvc project, no boot or something","title":"How to convert this part of web.xml to Java configuration","body":"<p>i want to convert this:</p>\n<pre><code>&lt;filter&gt;\n    &lt;filter-name&gt;SassCompiler&lt;/filter-name&gt;\n    &lt;filter-class&gt;com.darrinholst.sass_java.SassCompilingFilter&lt;/filter-class&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;SassCompiler&lt;/filter-name&gt;\n    &lt;url-pattern&gt;*.css&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt; \n</code></pre>\n<p>in web.xml into <strong>exactly the same</strong> thing in Java configuration, what should i do?</p>\n<p>It's pure spring mvc project, no boot or something</p>\n"},{"tags":["java","asynchronous","exception","completable-future"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1664882102,"post_id":73944922,"comment_id":130567002,"body_markdown":"Is changing `getName()` an option?","body":"Is changing <code>getName()</code> an option?"},{"owner":{"account_id":11102083,"reputation":1171,"user_id":9914653,"display_name":"hitchhiker"},"score":0,"creation_date":1664882466,"post_id":73944922,"comment_id":130567119,"body_markdown":"@Holger it depends what did you have in mind?","body":"@Holger it depends what did you have in mind?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1664882799,"post_id":73944922,"comment_id":130567225,"body_markdown":"The simplest solution is to put `throwWithoutCompletionStage();` in a `try … catch …` block, as returning a future but doing the actual work (including potentially throwing an exception) outside it, looks like a flawed design. If you return an already completed future in the successful case, you should return an already (exceptionally) completed future in the failed case. Of course, you could also create a new method fixing the issue by wrapping the `getName()` call, but this shouldn’t be necessary for a `private` method.","body":"The simplest solution is to put <code>throwWithoutCompletionStage();</code> in a <code>try … catch …</code> block, as returning a future but doing the actual work (including potentially throwing an exception) outside it, looks like a flawed design. If you return an already completed future in the successful case, you should return an already (exceptionally) completed future in the failed case. Of course, you could also create a new method fixing the issue by wrapping the <code>getName()</code> call, but this shouldn’t be necessary for a <code>private</code> method."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1664892260,"creation_date":1664892260,"answer_id":73949155,"question_id":73944922,"body_markdown":"If you don’t want to change the behavior of the `getName()` method, you have to use something like\r\n\r\n```java\r\npublic CompletableFuture&lt;String&gt; process() {\r\n  return CompletableFuture.supplyAsync(this::getName, Runnable::run)\r\n      .thenCompose(Function.identity())\r\n      .thenApplyAsync(result -&gt; {\r\n        // do something\r\n        return result;\r\n      })\r\n      .handleAsync((result, exception) -&gt; {\r\n        if (exception != null) {\r\n          return result;\r\n        } else {\r\n          return null;\r\n        }\r\n      });\r\n}\r\n```\r\n\r\nBy using `Runnable::run` as `Executor` you ensure that the “async” operation is executed immediately in the caller thread, just like the direct invocation of `getName()` would do. Using `.thenCompose(Function.identity())`, you get a `CompletableFuture&lt;String&gt;` out of the `CompletableFuture&lt;CompletableFuture&lt;String&gt;&gt;`.\r\n\r\nHowever, if `getName()` returns a completed future in the successful case, it should also return a future in the exceptional case. This may look like\r\n\r\n```java\r\nprivate CompletableFuture&lt;String&gt; getName() {\r\n  try {\r\n    throwWithoutCompletionStage();\r\n    return CompletableFuture.completedFuture(&quot;name&quot;);\r\n  } catch(Throwable t) {\r\n    return CompletableFuture.failedFuture(t);\r\n  }\r\n}\r\n```\r\n\r\n[`failedFuture`] has been introduced in Java&#160;9. If you need a Java&#160;8 compatible solution, you have to add such a factory method to your code base\r\n\r\n```java\r\npublic static &lt;U&gt; CompletableFuture&lt;U&gt; failedFuture(Throwable ex) {\r\n  CompletableFuture&lt;U&gt; f = new CompletableFuture&lt;&gt;();\r\n  f.completeExceptionally(ex);\r\n  return f;\r\n}\r\n```\r\n\r\nOr you integrate this logic into the `getName()` method:\r\n\r\n```java\r\nprivate CompletableFuture&lt;String&gt; getName() {\r\n  CompletableFuture&lt;String&gt; result = new CompletableFuture&lt;&gt;();\r\n  try {\r\n    throwWithoutCompletionStage();\r\n    result.complete(&quot;name&quot;);\r\n  } catch(Throwable t) {\r\n    result.completeExceptionally(t);\r\n  }\r\n  return result;\r\n}\r\n```\r\n\r\n[`failedFuture`]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html#failedFuture(java.lang.Throwable)","title":"How to use only `handleAsync` to handle non-async exceptions as well?","body":"<p>If you don’t want to change the behavior of the <code>getName()</code> method, you have to use something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>public CompletableFuture&lt;String&gt; process() {\n  return CompletableFuture.supplyAsync(this::getName, Runnable::run)\n      .thenCompose(Function.identity())\n      .thenApplyAsync(result -&gt; {\n        // do something\n        return result;\n      })\n      .handleAsync((result, exception) -&gt; {\n        if (exception != null) {\n          return result;\n        } else {\n          return null;\n        }\n      });\n}\n</code></pre>\n<p>By using <code>Runnable::run</code> as <code>Executor</code> you ensure that the “async” operation is executed immediately in the caller thread, just like the direct invocation of <code>getName()</code> would do. Using <code>.thenCompose(Function.identity())</code>, you get a <code>CompletableFuture&lt;String&gt;</code> out of the <code>CompletableFuture&lt;CompletableFuture&lt;String&gt;&gt;</code>.</p>\n<p>However, if <code>getName()</code> returns a completed future in the successful case, it should also return a future in the exceptional case. This may look like</p>\n<pre class=\"lang-java prettyprint-override\"><code>private CompletableFuture&lt;String&gt; getName() {\n  try {\n    throwWithoutCompletionStage();\n    return CompletableFuture.completedFuture(&quot;name&quot;);\n  } catch(Throwable t) {\n    return CompletableFuture.failedFuture(t);\n  }\n}\n</code></pre>\n<p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html#failedFuture(java.lang.Throwable)\" rel=\"nofollow noreferrer\"><code>failedFuture</code></a> has been introduced in Java 9. If you need a Java 8 compatible solution, you have to add such a factory method to your code base</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;U&gt; CompletableFuture&lt;U&gt; failedFuture(Throwable ex) {\n  CompletableFuture&lt;U&gt; f = new CompletableFuture&lt;&gt;();\n  f.completeExceptionally(ex);\n  return f;\n}\n</code></pre>\n<p>Or you integrate this logic into the <code>getName()</code> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private CompletableFuture&lt;String&gt; getName() {\n  CompletableFuture&lt;String&gt; result = new CompletableFuture&lt;&gt;();\n  try {\n    throwWithoutCompletionStage();\n    result.complete(&quot;name&quot;);\n  } catch(Throwable t) {\n    result.completeExceptionally(t);\n  }\n  return result;\n}\n</code></pre>\n"}],"owner":{"account_id":11102083,"reputation":1171,"user_id":9914653,"display_name":"hitchhiker"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1523,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73949155,"answer_count":1,"score":0,"last_activity_date":1664892260,"creation_date":1664871387,"question_id":73944922,"body_markdown":"Java&#39;s `handleAsync` will not handle exceptions which don&#39;t come from a completion stage, for example:\r\n```java\r\npackage my.package;\r\n\r\nimport java.util.concurrent.CompletableFuture;\r\n\r\npublic class Test {\r\n\r\n  private CompletableFuture&lt;String&gt; throwWithoutCompletionStage() {\r\n    throw new RuntimeException(&quot;error&quot;);\r\n  }\r\n\r\n  private CompletableFuture&lt;String&gt; getName() {\r\n    // calls external API, does some work then throws\r\n    throwWithoutCompletionStage();\r\n    return CompletableFuture.completedFuture(&quot;name&quot;);\r\n  }\r\n\r\n  public CompletableFuture&lt;String&gt; process() {\r\n    return getName()\r\n        .thenApplyAsync(result -&gt; {\r\n          // do something\r\n          return result;\r\n        })\r\n        .handleAsync((result, exception) -&gt; {\r\n          if (exception != null) {\r\n            return result;\r\n          } else {\r\n            return null;\r\n          }\r\n        });\r\n  }\r\n}\r\n```\r\n\r\nWhen `process` is called `handleAsync` will not be executed but rather the exception will be propagated to `process`&#39;s caller which is a bit confusing because one would think that `handleAsync` would catch the exception. So in this case I would also need to wrap `process` in try/catch to really catch all exceptions which looks weird in my opinion and is also error-prone: we need to always remember to wrap methods which return `CompletableFuture` in both `handleAsync` and try/catch.\r\n\r\nIs there a best practice to prevent this double exception catching? One solution I thought of is to call `supplyAsync` which would create a completion stage and then use `handleAsync` on it:\r\n```java\r\n  public CompletableFuture&lt;CompletableFuture&lt;String&gt;&gt; process() {\r\n     return CompletableFuture.supplyAsync(() -&gt; getName())\r\n        .handleAsync((result, exception) -&gt; {\r\n          if (exception != null) {\r\n            return null;\r\n          } else {\r\n            return result;\r\n          }\r\n        });\r\n  }\r\n```\r\nThe problem with this code is that now `process` return type is `CompletableFuture&lt;CompletableFuture&lt;String&gt;&gt;` but also this seems redundant to wrap code in `supplyAsync` solely in order to have `handleAsync` catch all exceptions.","title":"How to use only `handleAsync` to handle non-async exceptions as well?","body":"<p>Java's <code>handleAsync</code> will not handle exceptions which don't come from a completion stage, for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package my.package;\n\nimport java.util.concurrent.CompletableFuture;\n\npublic class Test {\n\n  private CompletableFuture&lt;String&gt; throwWithoutCompletionStage() {\n    throw new RuntimeException(&quot;error&quot;);\n  }\n\n  private CompletableFuture&lt;String&gt; getName() {\n    // calls external API, does some work then throws\n    throwWithoutCompletionStage();\n    return CompletableFuture.completedFuture(&quot;name&quot;);\n  }\n\n  public CompletableFuture&lt;String&gt; process() {\n    return getName()\n        .thenApplyAsync(result -&gt; {\n          // do something\n          return result;\n        })\n        .handleAsync((result, exception) -&gt; {\n          if (exception != null) {\n            return result;\n          } else {\n            return null;\n          }\n        });\n  }\n}\n</code></pre>\n<p>When <code>process</code> is called <code>handleAsync</code> will not be executed but rather the exception will be propagated to <code>process</code>'s caller which is a bit confusing because one would think that <code>handleAsync</code> would catch the exception. So in this case I would also need to wrap <code>process</code> in try/catch to really catch all exceptions which looks weird in my opinion and is also error-prone: we need to always remember to wrap methods which return <code>CompletableFuture</code> in both <code>handleAsync</code> and try/catch.</p>\n<p>Is there a best practice to prevent this double exception catching? One solution I thought of is to call <code>supplyAsync</code> which would create a completion stage and then use <code>handleAsync</code> on it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public CompletableFuture&lt;CompletableFuture&lt;String&gt;&gt; process() {\n     return CompletableFuture.supplyAsync(() -&gt; getName())\n        .handleAsync((result, exception) -&gt; {\n          if (exception != null) {\n            return null;\n          } else {\n            return result;\n          }\n        });\n  }\n</code></pre>\n<p>The problem with this code is that now <code>process</code> return type is <code>CompletableFuture&lt;CompletableFuture&lt;String&gt;&gt;</code> but also this seems redundant to wrap code in <code>supplyAsync</code> solely in order to have <code>handleAsync</code> catch all exceptions.</p>\n"},{"tags":["java","spring","spring-integration"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1664888482,"post_id":73947643,"comment_id":130569117,"body_markdown":"And it should becuase? Your `alarmHandler` doesn&#39;t return anything so there is nothing to process.","body":"And it should becuase? Your <code>alarmHandler</code> doesn&#39;t return anything so there is nothing to process."},{"owner":{"account_id":26521337,"reputation":15,"user_id":20154968,"display_name":"Jekshenov Chingiz"},"score":0,"creation_date":1664957806,"post_id":73947643,"comment_id":130585173,"body_markdown":"@M.Deinum you are right, thank you! It is better choice to use handlers as part of POJO rather than Configuration where possible for clear understanding  EIP pipe-filter principles.","body":"@M.Deinum you are right, thank you! It is better choice to use handlers as part of POJO rather than Configuration where possible for clear understanding  EIP pipe-filter principles."}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664892221,"creation_date":1664892221,"answer_id":73949148,"question_id":73947643,"body_markdown":"The `MessageHandler` you use in your `alarmHandler()` bean definition has a contract like this:\r\n\r\n    void handleMessage(Message&lt;?&gt; message) throws MessagingException;\r\n\r\nIndeed it does not produce anything to the `outputChannel` since its return type is `void`. \r\n\r\nNot sure what is your expectations since you definitely placed yourself to that corner.\r\n\r\nTop make it send to the `testOutput` you must change your method signature like this, for example:\r\n\r\n    @ServiceActivator(inputChannel = CHANNEL_ALARM, requiresReply = &quot;true&quot;, outputChannel = &quot;testOutput&quot;)\r\n    public Strung alarmHandler(Message&lt;?&gt; message) {\r\n            System.out.println(CHANNEL_ALARM);\r\n            System.out.println(message.getHeaders());\r\n          return &quot;foo&quot;;\r\n    }","title":"Spring Integration @ServiceActivator Message Handler doesn&#39;t work","body":"<p>The <code>MessageHandler</code> you use in your <code>alarmHandler()</code> bean definition has a contract like this:</p>\n<pre><code>void handleMessage(Message&lt;?&gt; message) throws MessagingException;\n</code></pre>\n<p>Indeed it does not produce anything to the <code>outputChannel</code> since its return type is <code>void</code>.</p>\n<p>Not sure what is your expectations since you definitely placed yourself to that corner.</p>\n<p>Top make it send to the <code>testOutput</code> you must change your method signature like this, for example:</p>\n<pre><code>@ServiceActivator(inputChannel = CHANNEL_ALARM, requiresReply = &quot;true&quot;, outputChannel = &quot;testOutput&quot;)\npublic Strung alarmHandler(Message&lt;?&gt; message) {\n        System.out.println(CHANNEL_ALARM);\n        System.out.println(message.getHeaders());\n      return &quot;foo&quot;;\n}\n</code></pre>\n"}],"owner":{"account_id":26521337,"reputation":15,"user_id":20154968,"display_name":"Jekshenov Chingiz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":426,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73949148,"answer_count":1,"score":0,"last_activity_date":1664892221,"creation_date":1664885308,"question_id":73947643,"body_markdown":"Why testOutputHandler() doesn&#39;t print anything? It seems that alarmHandler() doesn&#39;t push message to outputChannel = &quot;testOutput&quot;\r\n    \r\n    @Bean\r\n    @ServiceActivator(inputChannel = CHANNEL_ALARM, requiresReply = &quot;true&quot;, outputChannel = &quot;testOutput&quot;)\r\n    public MessageHandler alarmHandler(SessionFactory&lt;FTPFile&gt; sessionFactory) {\r\n        return message -&gt; {\r\n            System.out.println(CHANNEL_ALARM);\r\n            System.out.println(message.getHeaders());\r\n            };\r\n    }\r\n\r\n    @Bean\r\n    @ServiceActivator(inputChannel = &quot;testOutput&quot; )\r\n    public MessageHandler testOutputHandler() {\r\n        return message -&gt; {\r\n            System.out.println(&quot;test&quot;);\r\n            System.out.println(message.getHeaders());\r\n        };\r\n    }\r\nHere is console output, we can see that alarmHandler does its work, but testOutput doesn&#39;t\r\n &lt;pre&gt; 2022-10-04 17:56:53.710  INFO 26092 --- [           main] o.s.b.a.b.JobLauncherApplicationRunner   : Running default command line with: []\r\nalarm\r\n{file_remoteHostPort=192.168.1.44:21, file_remoteFileInfo={&quot;directory&quot;:false,&quot;filename&quot;:&quot;Alarm_Logs_12.9.2022_0.41.csv&quot;,&quot;link&quot;:false,&quot;modified&quot;:1664782140000,&quot;permissions&quot;:&quot;----------&quot;,&quot;remoteDirectory&quot;:&quot;for_it&quot;,&quot;size&quot;:88804}, file_remoteDirectory=for_it, channel=alarm, id=67d21ff6-e0ef-1992-2b32-ab759a8c1076, closeableResource=org.springframework.integration.file.remote.session.CachingSessionFactory$CachedSession@4b9ffb22, file_remoteFile=Alarm_Logs_12.9.2022_0.41.csv, timestamp=1664884618273}&lt;/pre&gt;","title":"Spring Integration @ServiceActivator Message Handler doesn&#39;t work","body":"<p>Why testOutputHandler() doesn't print anything? It seems that alarmHandler() doesn't push message to outputChannel = &quot;testOutput&quot;</p>\n<pre><code>@Bean\n@ServiceActivator(inputChannel = CHANNEL_ALARM, requiresReply = &quot;true&quot;, outputChannel = &quot;testOutput&quot;)\npublic MessageHandler alarmHandler(SessionFactory&lt;FTPFile&gt; sessionFactory) {\n    return message -&gt; {\n        System.out.println(CHANNEL_ALARM);\n        System.out.println(message.getHeaders());\n        };\n}\n\n@Bean\n@ServiceActivator(inputChannel = &quot;testOutput&quot; )\npublic MessageHandler testOutputHandler() {\n    return message -&gt; {\n        System.out.println(&quot;test&quot;);\n        System.out.println(message.getHeaders());\n    };\n}\n</code></pre>\n<p>Here is console output, we can see that alarmHandler does its work, but testOutput doesn't</p>\n <pre> 2022-10-04 17:56:53.710  INFO 26092 --- [           main] o.s.b.a.b.JobLauncherApplicationRunner   : Running default command line with: []\nalarm\n{file_remoteHostPort=192.168.1.44:21, file_remoteFileInfo={\"directory\":false,\"filename\":\"Alarm_Logs_12.9.2022_0.41.csv\",\"link\":false,\"modified\":1664782140000,\"permissions\":\"----------\",\"remoteDirectory\":\"for_it\",\"size\":88804}, file_remoteDirectory=for_it, channel=alarm, id=67d21ff6-e0ef-1992-2b32-ab759a8c1076, closeableResource=org.springframework.integration.file.remote.session.CachingSessionFactory$CachedSession@4b9ffb22, file_remoteFile=Alarm_Logs_12.9.2022_0.41.csv, timestamp=1664884618273}</pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":113294,"reputation":54886,"user_id":298455,"accept_rate":100,"display_name":"Nishant"},"score":0,"creation_date":1349787651,"post_id":12800588,"comment_id":17308928,"body_markdown":"I afraid you will have to download the file at least once to get exact size. (you may want to store for future, but if files changes on the server the data will be stale)","body":"I afraid you will have to download the file at least once to get exact size. (you may want to store for future, but if files changes on the server the data will be stale)"},{"owner":{"account_id":354298,"reputation":5638,"user_id":692560,"accept_rate":86,"display_name":"Vala"},"score":1,"creation_date":1349787816,"post_id":12800588,"comment_id":17309013,"body_markdown":"@Nishant That&#39;s not true. An `HTTP HEAD` request returns information about what you would get if you did an `HTTP GET` request, which should include size of the returned request. You could certainly do a `HEAD` request and parse the response.","body":"@Nishant That&#39;s not true. An <code>HTTP HEAD</code> request returns information about what you would get if you did an <code>HTTP GET</code> request, which should include size of the returned request. You could certainly do a <code>HEAD</code> request and parse the response."},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":1,"creation_date":1462241529,"post_id":12800588,"comment_id":61542906,"body_markdown":"but the `content-length` is optional and may not be present","body":"but the <code>content-length</code> is optional and may not be present"}],"answers":[{"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1349787756,"creation_date":1349787756,"answer_id":12800656,"question_id":12800588,"body_markdown":"Try to use HTTP HEAD method. It returns the HTTP headers only. The header `Content-Length` should contain information you need.","title":"How to calculate a file size from URL in java","body":"<p>Try to use HTTP HEAD method. It returns the HTTP headers only. The header <code>Content-Length</code> should contain information you need.</p>\n"},{"tags":[],"owner":{"account_id":448219,"reputation":2998,"user_id":842302,"accept_rate":56,"display_name":"Christopher Will"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1349787904,"creation_date":1349787904,"answer_id":12800710,"question_id":12800588,"body_markdown":"Did you try already to use [getContentLength](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#getContentLength()) on the URL connection?\r\nIn case the server responses a valid header you should get the size of the document.\r\n\r\nBut be aware of the fact that the webserver might also return the file in chunks. In this case IIRC the content length method will return either the size of one chunk (&lt;=1.4) or -1 (&gt;1.4).","title":"How to calculate a file size from URL in java","body":"<p>Did you try already to use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#getContentLength%28%29\" rel=\"nofollow\">getContentLength</a> on the URL connection?\nIn case the server responses a valid header you should get the size of the document.</p>\n\n<p>But be aware of the fact that the webserver might also return the file in chunks. In this case IIRC the content length method will return either the size of one chunk (&lt;=1.4) or -1 (>1.4).</p>\n"},{"comments":[{"owner":{"account_id":403508,"reputation":6422,"user_id":771318,"accept_rate":62,"display_name":"javaMan"},"score":0,"creation_date":1349789180,"post_id":12800801,"comment_id":17309734,"body_markdown":"I got the below exception: java.io.IOException: Server returned HTTP response code: 405 for URL. I am ablo to open the pdf link in browser. Does it mean this url wont allow head request?","body":"I got the below exception: java.io.IOException: Server returned HTTP response code: 405 for URL. I am ablo to open the pdf link in browser. Does it mean this url wont allow head request?"},{"owner":{"display_name":"user1723178"},"score":1,"creation_date":1349789316,"post_id":12800801,"comment_id":17309817,"body_markdown":"Can you share your request URL?","body":"Can you share your request URL?"},{"owner":{"account_id":403508,"reputation":6422,"user_id":771318,"accept_rate":62,"display_name":"javaMan"},"score":0,"creation_date":1349790306,"post_id":12800801,"comment_id":17310454,"body_markdown":"I am sorry... Url needs my credentials. I cannot share it. :(","body":"I am sorry... Url needs my credentials. I cannot share it. :("},{"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"score":1,"creation_date":1349805340,"post_id":12800801,"comment_id":17317575,"body_markdown":"@ravi if 405, use &quot;GET&quot; instead of &quot;HEAD&quot;.","body":"@ravi if 405, use &quot;GET&quot; instead of &quot;HEAD&quot;."},{"owner":{"account_id":403508,"reputation":6422,"user_id":771318,"accept_rate":62,"display_name":"javaMan"},"score":2,"creation_date":1349806093,"post_id":12800801,"comment_id":17317894,"body_markdown":"It returned -1. when i run in debug mode and look into conn object i am seeing many fields as null or false or -1","body":"It returned -1. when i run in debug mode and look into conn object i am seeing many fields as null or false or -1"},{"owner":{"account_id":242136,"reputation":3005,"user_id":513451,"accept_rate":61,"display_name":"Michel Jung"},"score":0,"creation_date":1477919872,"post_id":12800801,"comment_id":67940084,"body_markdown":"This throws an NPE at `conn.disconnect()` if the URL can&#39;t be opened","body":"This throws an NPE at <code>conn.disconnect()</code> if the URL can&#39;t be opened"}],"tags":[],"owner":{"display_name":"user1723178"},"comment_count":6,"down_vote_count":1,"up_vote_count":47,"is_accepted":true,"score":46,"last_activity_date":1512728038,"creation_date":1349788186,"answer_id":12800801,"question_id":12800588,"body_markdown":"Using a HEAD request, you can do something like this:\r\n\r\n    private static int getFileSize(URL url) {\r\n        URLConnection conn = null;\r\n        try {\r\n            conn = url.openConnection();\r\n            if(conn instanceof HttpURLConnection) {\r\n                ((HttpURLConnection)conn).setRequestMethod(&quot;HEAD&quot;);\r\n            }\r\n            conn.getInputStream();\r\n            return conn.getContentLength();\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        } finally {\r\n            if(conn instanceof HttpURLConnection) {\r\n                ((HttpURLConnection)conn).disconnect();\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"How to calculate a file size from URL in java","body":"<p>Using a HEAD request, you can do something like this:</p>\n\n<pre><code>private static int getFileSize(URL url) {\n    URLConnection conn = null;\n    try {\n        conn = url.openConnection();\n        if(conn instanceof HttpURLConnection) {\n            ((HttpURLConnection)conn).setRequestMethod(\"HEAD\");\n        }\n        conn.getInputStream();\n        return conn.getContentLength();\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    } finally {\n        if(conn instanceof HttpURLConnection) {\n            ((HttpURLConnection)conn).disconnect();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user1723813"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1349788957,"creation_date":1349788957,"answer_id":12801048,"question_id":12800588,"body_markdown":"The HTTP response has a Content-Length header, so you could query the URLConnection object for this value.\r\n\r\nOnce the URL connection has been opened, you can try something like this:\r\n\r\n    List values = urlConnection.getHeaderFields().get(&quot;content-Length&quot;)\r\n    if (values != null &amp;&amp; !values.isEmpty()) {\r\n    \r\n        // getHeaderFields() returns a Map with key=(String) header \r\n        // name, value = List of String values for that header field. \r\n        // just use the first value here.\r\n        String sLength = (String) values.get(0);\r\n    \r\n        if (sLength != null) {\r\n           //parse the length into an integer...\r\n           ...\r\n        }\r\n    }","title":"How to calculate a file size from URL in java","body":"<p>The HTTP response has a Content-Length header, so you could query the URLConnection object for this value.</p>\n\n<p>Once the URL connection has been opened, you can try something like this:</p>\n\n<pre><code>List values = urlConnection.getHeaderFields().get(\"content-Length\")\nif (values != null &amp;&amp; !values.isEmpty()) {\n\n    // getHeaderFields() returns a Map with key=(String) header \n    // name, value = List of String values for that header field. \n    // just use the first value here.\n    String sLength = (String) values.get(0);\n\n    if (sLength != null) {\n       //parse the length into an integer...\n       ...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7231313,"reputation":2321,"user_id":5518027,"display_name":"Arpan Sarkar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1462241357,"creation_date":1462241357,"answer_id":36994474,"question_id":12800588,"body_markdown":"You can try this..\r\n\r\n    private long getContentLength(HttpURLConnection conn) {\r\n\t\tString transferEncoding = conn.getHeaderField(&quot;Transfer-Encoding&quot;);\r\n\t\tif (transferEncoding == null || transferEncoding.equalsIgnoreCase(&quot;chunked&quot;)) {\r\n\t\t\treturn conn.getHeaderFieldInt(&quot;Content-Length&quot;, -1);\r\n\t\t} else {\r\n\t\t\treturn -1;\r\n\t\t}","title":"How to calculate a file size from URL in java","body":"<p>You can try this..</p>\n\n<pre><code>private long getContentLength(HttpURLConnection conn) {\n    String transferEncoding = conn.getHeaderField(\"Transfer-Encoding\");\n    if (transferEncoding == null || transferEncoding.equalsIgnoreCase(\"chunked\")) {\n        return conn.getHeaderFieldInt(\"Content-Length\", -1);\n    } else {\n        return -1;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":242136,"reputation":3005,"user_id":513451,"accept_rate":61,"display_name":"Michel Jung"},"comment_count":0,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1664792382,"creation_date":1477919791,"answer_id":40342982,"question_id":12800588,"body_markdown":"The accepted answer is prone to `NullPointerException`, doesn&#39;t work for files &gt; 2GiB and contains an unnecessary call to `getInputStream()`. Here&#39;s the fixed code:\r\n\r\n    public long getFileSize(URL url) {\r\n      HttpURLConnection conn = null;\r\n      try {\r\n        conn = (HttpURLConnection) url.openConnection();\r\n        conn.setRequestMethod(&quot;HEAD&quot;);\r\n        return conn.getContentLengthLong();\r\n      } catch (IOException e) {\r\n        throw new RuntimeException(e);\r\n      } finally {\r\n        if (conn != null) {\r\n          conn.disconnect();\r\n        }\r\n      }\r\n    }\r\n\r\n**Update:** The accepted was updated but still has issues.","title":"How to calculate a file size from URL in java","body":"<p>The accepted answer is prone to <code>NullPointerException</code>, doesn't work for files &gt; 2GiB and contains an unnecessary call to <code>getInputStream()</code>. Here's the fixed code:</p>\n<pre><code>public long getFileSize(URL url) {\n  HttpURLConnection conn = null;\n  try {\n    conn = (HttpURLConnection) url.openConnection();\n    conn.setRequestMethod(&quot;HEAD&quot;);\n    return conn.getContentLengthLong();\n  } catch (IOException e) {\n    throw new RuntimeException(e);\n  } finally {\n    if (conn != null) {\n      conn.disconnect();\n    }\n  }\n}\n</code></pre>\n<p><strong>Update:</strong> The accepted was updated but still has issues.</p>\n"},{"comments":[{"owner":{"account_id":1142417,"reputation":314,"user_id":1125942,"display_name":"golchha21"},"score":0,"creation_date":1564063636,"post_id":54921990,"comment_id":100915111,"body_markdown":"I have tried all the possible ways but it always returns -1. Also bellow attached is the header data:","body":"I have tried all the possible ways but it always returns -1. Also bellow attached is the header data:"},{"owner":{"account_id":1142417,"reputation":314,"user_id":1125942,"display_name":"golchha21"},"score":0,"creation_date":1564063653,"post_id":54921990,"comment_id":100915117,"body_markdown":"{null=[HTTP/1.1 200 OK], Accept-Ranges=[bytes], Cache-Control=[max-age=2592000], Connection=[keep-alive, Keep-Alive], Content-Type=[application/vnd.android.package-archive], Date=[Thu, 25 Jul 2019 14:01:44 GMT], ETag=[&quot;3f416f-58e6adf532900-gzip&quot;], Expires=[Sat, 24 Aug 2019 14:01:44 GMT], Keep-Alive=[timeout=3, max=75], Last-Modified=[Wed, 24 Jul 2019 10:35:48 GMT], Server=[Apache/2.4.39 (cPanel) OpenSSL/1.0.2r mod_bwlimited/1.4 Phusion_Passenger/5.3.7], Transfer-Encoding=[chunked],","body":"{null=[HTTP/1.1 200 OK], Accept-Ranges=[bytes], Cache-Control=[max-age=2592000], Connection=[keep-alive, Keep-Alive], Content-Type=[application/vnd.android.package-archive], Date=[Thu, 25 Jul 2019 14:01:44 GMT], ETag=[&quot;3f416f-58e6adf532900-gzip&quot;], Expires=[Sat, 24 Aug 2019 14:01:44 GMT], Keep-Alive=[timeout=3, max=75], Last-Modified=[Wed, 24 Jul 2019 10:35:48 GMT], Server=[Apache/2.4.39 (cPanel) OpenSSL/1.0.2r mod_bwlimited/1.4 Phusion_Passenger/5.3.7], Transfer-Encoding=[chunked],"},{"owner":{"account_id":1142417,"reputation":314,"user_id":1125942,"display_name":"golchha21"},"score":0,"creation_date":1564063659,"post_id":54921990,"comment_id":100915118,"body_markdown":"Upgrade=[h2,h2c], Vary=[Accept-Encoding,User-Agent], X-Android-Received-Millis=[1564063303579], X-Android-Response-Source=[NETWORK 200], X-Android-Selected-Protocol=[http/1.1], X-Android-Sent-Millis=[1564063302765]}","body":"Upgrade=[h2,h2c], Vary=[Accept-Encoding,User-Agent], X-Android-Received-Millis=[1564063303579], X-Android-Response-Source=[NETWORK 200], X-Android-Selected-Protocol=[http/1.1], X-Android-Sent-Millis=[1564063302765]}"},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1564065793,"post_id":54921990,"comment_id":100916415,"body_markdown":"@golchha21 What is this?","body":"@golchha21 What is this?"},{"owner":{"account_id":1142417,"reputation":314,"user_id":1125942,"display_name":"golchha21"},"score":0,"creation_date":1564067750,"post_id":54921990,"comment_id":100917494,"body_markdown":"This is the data that is returned when I used urlConnection.headerFields","body":"This is the data that is returned when I used urlConnection.headerFields"},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1564082679,"post_id":54921990,"comment_id":100924276,"body_markdown":"@golchha21 Well, if the server doesn&#39;t return it to you, it means the function I&#39;ve made should return -1 as a fallback, because the size is unknown.","body":"@golchha21 Well, if the server doesn&#39;t return it to you, it means the function I&#39;ve made should return -1 as a fallback, because the size is unknown."},{"owner":{"account_id":1142417,"reputation":314,"user_id":1125942,"display_name":"golchha21"},"score":0,"creation_date":1564082883,"post_id":54921990,"comment_id":100924358,"body_markdown":"That I understand but when I checked the header data with another tool via a browser the Content-Length was visible there.","body":"That I understand but when I checked the header data with another tool via a browser the Content-Length was visible there."},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1564083792,"post_id":54921990,"comment_id":100924716,"body_markdown":"I suggest to create a new question here. It might be related to the server itself. What is the server and what is the tool you&#39;ve used? Write it down on the new question thread","body":"I suggest to create a new question here. It might be related to the server itself. What is the server and what is the tool you&#39;ve used? Write it down on the new question thread"}],"tags":[],"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"comment_count":8,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1551346988,"creation_date":1551345077,"answer_id":54921990,"question_id":12800588,"body_markdown":"In case you are on Android, here&#39;s a solution in Java:\r\n\r\n    /**@return the file size of the given file url , or -1L if there was any kind of error while doing so*/\r\n    @WorkerThread\r\n    public static long getUrlFileLength(String url) {\r\n        try {\r\n            final HttpURLConnection urlConnection = (HttpURLConnection) new URL(url).openConnection();\r\n            urlConnection.setRequestMethod(&quot;HEAD&quot;);\r\n            final String lengthHeaderField = urlConnection.getHeaderField(&quot;content-length&quot;);\r\n            Long result = lengthHeaderField == null ? null : Long.parseLong(lengthHeaderField);\r\n            return result == null || result &lt; 0L ? -1L : result;\r\n        } catch (Exception ignored) {\r\n        }\r\n        return -1L;\r\n    }\r\n\r\nAnd in Kotlin:\r\n\r\n    /**@return the file size of the given file url , or -1L if there was any kind of error while doing so*/\r\n    @WorkerThread\r\n    fun getUrlFileLength(url: String): Long {\r\n        return try {\r\n            val urlConnection = URL(url).openConnection() as HttpURLConnection\r\n            urlConnection.requestMethod = &quot;HEAD&quot;\r\n            urlConnection.getHeaderField(&quot;content-length&quot;)?.toLongOrNull()?.coerceAtLeast(-1L)\r\n                    ?: -1L\r\n        } catch (ignored: Exception) {\r\n            -1L\r\n        }\r\n    }\r\n\r\nIf your app is from Android N, you can use this instead:\r\n\r\n    /**@return the file size of the given file url , or -1L if there was any kind of error while doing so*/\r\n    @WorkerThread\r\n    fun getUrlFileLength(url: String): Long {\r\n        return try {\r\n            val urlConnection = URL(url).openConnection() as HttpURLConnection\r\n            urlConnection.requestMethod = &quot;HEAD&quot;\r\n            urlConnection.contentLengthLong.coerceAtLeast(-1L)\r\n        } catch (ignored: Exception) {\r\n            -1L\r\n        }\r\n    }\r\n","title":"How to calculate a file size from URL in java","body":"<p>In case you are on Android, here's a solution in Java:</p>\n\n<pre><code>/**@return the file size of the given file url , or -1L if there was any kind of error while doing so*/\n@WorkerThread\npublic static long getUrlFileLength(String url) {\n    try {\n        final HttpURLConnection urlConnection = (HttpURLConnection) new URL(url).openConnection();\n        urlConnection.setRequestMethod(\"HEAD\");\n        final String lengthHeaderField = urlConnection.getHeaderField(\"content-length\");\n        Long result = lengthHeaderField == null ? null : Long.parseLong(lengthHeaderField);\n        return result == null || result &lt; 0L ? -1L : result;\n    } catch (Exception ignored) {\n    }\n    return -1L;\n}\n</code></pre>\n\n<p>And in Kotlin:</p>\n\n<pre><code>/**@return the file size of the given file url , or -1L if there was any kind of error while doing so*/\n@WorkerThread\nfun getUrlFileLength(url: String): Long {\n    return try {\n        val urlConnection = URL(url).openConnection() as HttpURLConnection\n        urlConnection.requestMethod = \"HEAD\"\n        urlConnection.getHeaderField(\"content-length\")?.toLongOrNull()?.coerceAtLeast(-1L)\n                ?: -1L\n    } catch (ignored: Exception) {\n        -1L\n    }\n}\n</code></pre>\n\n<p>If your app is from Android N, you can use this instead:</p>\n\n<pre><code>/**@return the file size of the given file url , or -1L if there was any kind of error while doing so*/\n@WorkerThread\nfun getUrlFileLength(url: String): Long {\n    return try {\n        val urlConnection = URL(url).openConnection() as HttpURLConnection\n        urlConnection.requestMethod = \"HEAD\"\n        urlConnection.contentLengthLong.coerceAtLeast(-1L)\n    } catch (ignored: Exception) {\n        -1L\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":403508,"reputation":6422,"user_id":771318,"accept_rate":62,"display_name":"javaMan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36114,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":12800801,"answer_count":7,"score":25,"last_activity_date":1664891923,"creation_date":1349787539,"question_id":12800588,"body_markdown":"I&#39;m attempting to get a bunch of pdf links from a web service and I want to give the user the file size of each link.\r\n\r\nIs there a way to accomplish this task?\r\n\r\nThanks","title":"How to calculate a file size from URL in java","body":"<p>I'm attempting to get a bunch of pdf links from a web service and I want to give the user the file size of each link.</p>\n\n<p>Is there a way to accomplish this task?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","spring","spring-integration"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1664869080,"post_id":73943031,"comment_id":130562957,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":26521337,"reputation":15,"user_id":20154968,"display_name":"Jekshenov Chingiz"},"score":0,"creation_date":1664876869,"post_id":73943031,"comment_id":130565353,"body_markdown":"I added custom transformer that puts channel names depending on file name to the message headers through IntegrationMessageHeaderAccessor &amp; MessageBuilder and then I use HeaderValueRouter","body":"I added custom transformer that puts channel names depending on file name to the message headers through IntegrationMessageHeaderAccessor &amp; MessageBuilder and then I use HeaderValueRouter"}],"answers":[{"comments":[{"owner":{"account_id":26521337,"reputation":15,"user_id":20154968,"display_name":"Jekshenov Chingiz"},"score":0,"creation_date":1664902695,"post_id":73948873,"comment_id":130574446,"body_markdown":"Concise and beautiful, thank you!","body":"Concise and beautiful, thank you!"}],"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664891151,"creation_date":1664891151,"answer_id":73948873,"question_id":73943031,"body_markdown":"Well, you have already that `file_remoteFile` with all the info you need for routing.\r\n\r\nUse a `@Router` instead and plain POJO method:\r\n\r\n    @Router(inputChannel = CHANNEL_STREAMED_DATA)\r\n    String routeByRemoteFile(@Header(FileHeaders.REMOTE_FILE) String remoteFile) {\r\n        ...\r\n    }\r\n\r\nAnd return a respective channel name according your file name matching logic.\r\n\r\nSee more info in docs: https://docs.spring.io/spring-integration/docs/current/reference/html/message-routing.html#router-annotation","title":"How to filter file by filename and route to corresponding channel in Spring Integration?","body":"<p>Well, you have already that <code>file_remoteFile</code> with all the info you need for routing.</p>\n<p>Use a <code>@Router</code> instead and plain POJO method:</p>\n<pre><code>@Router(inputChannel = CHANNEL_STREAMED_DATA)\nString routeByRemoteFile(@Header(FileHeaders.REMOTE_FILE) String remoteFile) {\n    ...\n}\n</code></pre>\n<p>And return a respective channel name according your file name matching logic.</p>\n<p>See more info in docs: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/message-routing.html#router-annotation\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/message-routing.html#router-annotation</a></p>\n"}],"owner":{"account_id":26521337,"reputation":15,"user_id":20154968,"display_name":"Jekshenov Chingiz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73948873,"answer_count":1,"score":1,"last_activity_date":1664891151,"creation_date":1664856362,"question_id":73943031,"body_markdown":"I have remote FTP server to which I have mounted FtpStreamingMessageSource Inbound Channel Adapter and now I need to filter files by filename using regex and route to corresponding channels to launch batch job. The official documentation has PayloadTypeRouter, HeaderValueRouter but they are not suitable for this task. I can play with filters, but then I have to write several Inbound Channel Adapters for each file with specific filter. Is this normal approach or is  there a better solution?\r\n\r\nFor example: I have A.csv, B.csv, C.csv, D.csv files on FTP. After reading I need to route A.csv to chanell A, B.csv to channel B and so on.\r\n\r\nBelow is the **current working solution**, feel free to comment and correct\r\n\r\n     @Override\r\n    protected Object doTransform(Message&lt;?&gt; message) {\r\n        IntegrationMessageHeaderAccessor accessor = new IntegrationMessageHeaderAccessor(message);\r\n        MessageBuilder messageBuilder  = MessageBuilder.fromMessage(message);\r\n        String fileName = accessor.getHeader(&quot;file_remoteFile&quot;).toString();\r\n        if(fileName.contains(&quot;file_name1&quot;)){\r\n            messageBuilder.setHeader(&quot;channel&quot;, &quot;channel1&quot;);\r\n        } else if (fileName.contains(&quot;file_name2&quot;)){\r\n            messageBuilder.setHeader(&quot;channel&quot;, &quot;channel2&quot;);\r\n        } else if(fileName.contains(&quot;file_name3&quot;)) {\r\n            messageBuilder.setHeader(&quot;channel&quot;, &quot;channel3&quot;);\r\n        } else if (fileName.contains(&quot;file_name4&quot;)){\r\n            messageBuilder.setHeader(&quot;channel&quot;, &quot;channel4&quot;);\r\n        }\r\n        return messageBuilder.build();\r\n    }\r\n\r\nAnd here is Routing\r\n\r\n    @Bean\r\n    @org.springframework.integration.annotation.Transformer(inputChannel = CHANNEL_STREAMED_DATA, outputChannel = CHANNEL_DATA)\r\n    public CustomTransformer customTransformer() {\r\n        return new CustomTransformer();\r\n    }\r\n\r\n    @ServiceActivator(inputChannel = CHANNEL_DATA)\r\n    @Bean\r\n    public HeaderValueRouter router() {\r\n        HeaderValueRouter router = new HeaderValueRouter(&quot;channel&quot;);\r\n        router.setChannelMapping(&quot;channel1&quot;, &quot;channelA&quot;);\r\n        router.setChannelMapping(&quot;channel2&quot;, &quot;channelB&quot;);\r\n        return router;\r\n    }    ","title":"How to filter file by filename and route to corresponding channel in Spring Integration?","body":"<p>I have remote FTP server to which I have mounted FtpStreamingMessageSource Inbound Channel Adapter and now I need to filter files by filename using regex and route to corresponding channels to launch batch job. The official documentation has PayloadTypeRouter, HeaderValueRouter but they are not suitable for this task. I can play with filters, but then I have to write several Inbound Channel Adapters for each file with specific filter. Is this normal approach or is  there a better solution?</p>\n<p>For example: I have A.csv, B.csv, C.csv, D.csv files on FTP. After reading I need to route A.csv to chanell A, B.csv to channel B and so on.</p>\n<p>Below is the <strong>current working solution</strong>, feel free to comment and correct</p>\n<pre><code> @Override\nprotected Object doTransform(Message&lt;?&gt; message) {\n    IntegrationMessageHeaderAccessor accessor = new IntegrationMessageHeaderAccessor(message);\n    MessageBuilder messageBuilder  = MessageBuilder.fromMessage(message);\n    String fileName = accessor.getHeader(&quot;file_remoteFile&quot;).toString();\n    if(fileName.contains(&quot;file_name1&quot;)){\n        messageBuilder.setHeader(&quot;channel&quot;, &quot;channel1&quot;);\n    } else if (fileName.contains(&quot;file_name2&quot;)){\n        messageBuilder.setHeader(&quot;channel&quot;, &quot;channel2&quot;);\n    } else if(fileName.contains(&quot;file_name3&quot;)) {\n        messageBuilder.setHeader(&quot;channel&quot;, &quot;channel3&quot;);\n    } else if (fileName.contains(&quot;file_name4&quot;)){\n        messageBuilder.setHeader(&quot;channel&quot;, &quot;channel4&quot;);\n    }\n    return messageBuilder.build();\n}\n</code></pre>\n<p>And here is Routing</p>\n<pre><code>@Bean\n@org.springframework.integration.annotation.Transformer(inputChannel = CHANNEL_STREAMED_DATA, outputChannel = CHANNEL_DATA)\npublic CustomTransformer customTransformer() {\n    return new CustomTransformer();\n}\n\n@ServiceActivator(inputChannel = CHANNEL_DATA)\n@Bean\npublic HeaderValueRouter router() {\n    HeaderValueRouter router = new HeaderValueRouter(&quot;channel&quot;);\n    router.setChannelMapping(&quot;channel1&quot;, &quot;channelA&quot;);\n    router.setChannelMapping(&quot;channel2&quot;, &quot;channelB&quot;);\n    return router;\n}    \n</code></pre>\n"},{"tags":["java","math","rgb","cmyk","coursera-api"],"comments":[{"owner":{"account_id":3832981,"reputation":3332,"user_id":3178068,"display_name":"TiiJ7"},"score":0,"creation_date":1664889657,"post_id":73948396,"comment_id":130569574,"body_markdown":"Could you clarify what the problem is? Does it give the wrong output? Maybe you need to divide yellow by 100 like the other values?","body":"Could you clarify what the problem is? Does it give the wrong output? Maybe you need to divide yellow by 100 like the other values?"},{"owner":{"account_id":3277167,"reputation":8773,"user_id":2758823,"display_name":"Giacomo Catenazzi"},"score":0,"creation_date":1664889867,"post_id":73948396,"comment_id":130569661,"body_markdown":"I do not know your online source, but check Wikipedia, usually it has good explanation of initial data (which it is often a problem). In your case, you need densities (0 to 100) for CMYK, and it gives you RGB data 0-255. Note: I&#39;m not an expert in Java, but I would add some `.` on the numbers, to force them to be floats and not integers","body":"I do not know your online source, but check Wikipedia, usually it has good explanation of initial data (which it is often a problem). In your case, you need densities (0 to 100) for CMYK, and it gives you RGB data 0-255. Note: I&#39;m not an expert in Java, but I would add some <code>.</code> on the numbers, to force them to be floats and not integers"},{"owner":{"account_id":23959597,"reputation":11,"user_id":17949890,"display_name":"Dindy Ba"},"score":0,"creation_date":1664891132,"post_id":73948396,"comment_id":130570140,"body_markdown":"@TiiJ7 , ok I edited the post, I changed the formula and now I made it so that doesnt divide by 100 anymore. It works thanks","body":"@TiiJ7 , ok I edited the post, I changed the formula and now I made it so that doesnt divide by 100 anymore. It works thanks"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1664891791,"post_id":73948396,"comment_id":130570419,"body_markdown":"https://stackoverflow.com/a/12132630/984823 CMYK touches color profiles, so it is not simply math. By the way it might be that CMYK components are not in the range 0 - 100, but 0 - 1, so remove /100. Would explain the result.","body":"<a href=\"https://stackoverflow.com/a/12132630/984823\">stackoverflow.com/a/12132630/984823</a> CMYK touches color profiles, so it is not simply math. By the way it might be that CMYK components are not in the range 0 - 100, but 0 - 1, so remove /100. Would explain the result."},{"owner":{"account_id":23959597,"reputation":11,"user_id":17949890,"display_name":"Dindy Ba"},"score":0,"creation_date":1664983932,"post_id":73948396,"comment_id":130594427,"body_markdown":"@JoopEggen yea I removed  /100 as I said in the comment before and it works now, thanks","body":"@JoopEggen yea I removed  /100 as I said in the comment before and it works now, thanks"}],"owner":{"account_id":23959597,"reputation":11,"user_id":17949890,"display_name":"Dindy Ba"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":260,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664890969,"creation_date":1664888986,"question_id":73948396,"body_markdown":"Im trying to  make a java script to convert from cmyk to rgb, but im having problems with re results, I found the formula online but I dont know whats wrong with my script. The problem is that the outpur is wrong, e.g. Magenta should come out as red:255 green:0 blue:255 instead of my output which is :red:255 green:252 blue:255.\r\n```\r\npublic class CMYKtoRGB {\r\npublic static void main(String[] args) {\r\n     double cyan = Double.parseDouble(args[0]);\r\n     double magenta = Double.parseDouble(args[1]);\r\n     double yellow = Double.parseDouble(args[2]);\r\n     double black = Double.parseDouble(args[3]);        \r\n\r\n     int red = (int) Math.round(255 * ( 1 - cyan/100) * (1 - black/100 ));\r\n     int green = (int) Math.round(255 * (1 - magenta/100) * (1 - black/100));\r\n     int blue =(int)Math.round(255*(1-yellow)*(1-black/100));\t\t\r\n\r\n     System.out.println(red);\r\n     System.out.println(green);\r\n     System.out.println(blue);\r\n}\r\n}```","title":"How to convert from CMYK to RGB java","body":"<p>Im trying to  make a java script to convert from cmyk to rgb, but im having problems with re results, I found the formula online but I dont know whats wrong with my script. The problem is that the outpur is wrong, e.g. Magenta should come out as red:255 green:0 blue:255 instead of my output which is :red:255 green:252 blue:255.</p>\n<pre><code>public class CMYKtoRGB {\npublic static void main(String[] args) {\n     double cyan = Double.parseDouble(args[0]);\n     double magenta = Double.parseDouble(args[1]);\n     double yellow = Double.parseDouble(args[2]);\n     double black = Double.parseDouble(args[3]);        \n\n     int red = (int) Math.round(255 * ( 1 - cyan/100) * (1 - black/100 ));\n     int green = (int) Math.round(255 * (1 - magenta/100) * (1 - black/100));\n     int blue =(int)Math.round(255*(1-yellow)*(1-black/100));       \n\n     System.out.println(red);\n     System.out.println(green);\n     System.out.println(blue);\n}\n}```\n</code></pre>\n"},{"tags":["java","clipboard","event-listener","clipboarddata","clipboard-interaction"],"answers":[{"tags":[],"owner":{"account_id":19827165,"reputation":1,"user_id":14522542,"display_name":"David Norero"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664890926,"creation_date":1664890926,"answer_id":73948823,"question_id":53042779,"body_markdown":"one way to capture when things are pasted into composites is to add a Listener &quot;addKeyListener&quot;.\r\n## Java 8 ##\r\n\r\n        KeyAdapter keyAdapter = new KeyAdapter()\r\n\t\t{\r\n\t\t\t@Override\r\n\t\t\tpublic void keyPressed(KeyEvent keyEvent)\r\n\t\t\t{\r\n\t\t\t\tif(((keyEvent.getModifiers() &amp; InputEvent.CTRL_MASK) != 0) &amp;&amp; (keyEvent.getKeyCode() == KeyEvent.VK_V))\r\n\t\t\t\t{\r\n\t\t\t\t\tString text = null;\r\n\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext = (String) Toolkit.getDefaultToolkit().getSystemClipboard().getData(DataFlavor.stringFlavor);\r\n\t\t\t\t\t\tSystem.out.println(text);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch(Exception e)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tkeyEvent.consume();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tstringTF.addKeyListener(keyAdapter);\r\n\r\nfor java over version 9 you can use the following condition\r\n\r\n\r\n    \t\t\tif(((keyEvent.getModifiersEx() &amp; InputEvent.CTRL_DOWN_MASK) != 0) &amp;&amp; (keyEvent.getKeyCode() == KeyEvent.VK_V))\r\n\t\t\t\t{\r\n\t\t\t\t\t// Code ....\r\n\t\t\t\t}\r\n\r\n","title":"Java - Listen for copy and paste from clipboard","body":"<p>one way to capture when things are pasted into composites is to add a Listener &quot;addKeyListener&quot;.</p>\n<h2>Java 8</h2>\n<pre><code>    KeyAdapter keyAdapter = new KeyAdapter()\n    {\n        @Override\n        public void keyPressed(KeyEvent keyEvent)\n        {\n            if(((keyEvent.getModifiers() &amp; InputEvent.CTRL_MASK) != 0) &amp;&amp; (keyEvent.getKeyCode() == KeyEvent.VK_V))\n            {\n                String text = null;\n\n                try\n                {\n                    text = (String) Toolkit.getDefaultToolkit().getSystemClipboard().getData(DataFlavor.stringFlavor);\n                    System.out.println(text);\n                }\n                catch(Exception e)\n                {\n                    e.printStackTrace();\n                }\n                keyEvent.consume();\n            }\n        }\n\n    };\n\n    stringTF.addKeyListener(keyAdapter);\n</code></pre>\n<p>for java over version 9 you can use the following condition</p>\n<pre><code>            if(((keyEvent.getModifiersEx() &amp; InputEvent.CTRL_DOWN_MASK) != 0) &amp;&amp; (keyEvent.getKeyCode() == KeyEvent.VK_V))\n            {\n                // Code ....\n            }\n</code></pre>\n"}],"owner":{"account_id":10642572,"reputation":339,"user_id":7837105,"accept_rate":86,"display_name":"German Vekhorev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":685,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1664890926,"creation_date":1540806603,"question_id":53042779,"body_markdown":"**( 1 )** Is there a way to listen for **any** clipboard updates (including Ctrl+C/X, PrtSc (screenshot) and changes made by other programs) in Java? I have tried this:\r\n\r\n        Toolkit.getDefaultToolkit().getSystemClipboard().addFlavorListener(new FlavorListener() {\r\n            @Override\r\n            public void flavorsChanged(FlavorEvent e) {\r\n                System.out.println(&quot;Copy detected&quot;);\r\n            }\r\n        });\r\n\r\nThis handles Ctrl+C changes well but doesn&#39;t notice changes which are not made *by user manually*, e.g. by screenshotting software or PrtSc button.\r\n\r\n**( 2 )** Is there a way to listen for **paste** actions (Ctrl+V, &quot;paste&quot; button, etc.)? I want something like that (or just with similar functionality):\r\n\r\n    // ...\r\n        @Override \r\n        public void prePaste(PasteEvent e) {\r\n            System.out.println(&quot;Paste detected&quot;);\r\n            e.cancel(); // reject the paste (so that user&#39;s Ctrl+V pastes nothing)\r\n        }\r\n    // ...","title":"Java - Listen for copy and paste from clipboard","body":"<p><strong>( 1 )</strong> Is there a way to listen for <strong>any</strong> clipboard updates (including Ctrl+C/X, PrtSc (screenshot) and changes made by other programs) in Java? I have tried this:</p>\n\n<pre><code>    Toolkit.getDefaultToolkit().getSystemClipboard().addFlavorListener(new FlavorListener() {\n        @Override\n        public void flavorsChanged(FlavorEvent e) {\n            System.out.println(\"Copy detected\");\n        }\n    });\n</code></pre>\n\n<p>This handles Ctrl+C changes well but doesn't notice changes which are not made <em>by user manually</em>, e.g. by screenshotting software or PrtSc button.</p>\n\n<p><strong>( 2 )</strong> Is there a way to listen for <strong>paste</strong> actions (Ctrl+V, \"paste\" button, etc.)? I want something like that (or just with similar functionality):</p>\n\n<pre><code>// ...\n    @Override \n    public void prePaste(PasteEvent e) {\n        System.out.println(\"Paste detected\");\n        e.cancel(); // reject the paste (so that user's Ctrl+V pastes nothing)\n    }\n// ...\n</code></pre>\n"},{"tags":["java","double","classcastexception","bigdecimal","jspinner"],"comments":[{"owner":{"account_id":942839,"reputation":8948,"user_id":970616,"accept_rate":93,"display_name":"Xavjer"},"score":0,"creation_date":1420465120,"post_id":27780642,"comment_id":43971281,"body_markdown":"JSpinner.getValue() returns an object, which you try to cast to Double (Which does not seem to be possible as it&#39;s current class is BigDecimal) as You require BigDecimal, try setBigDecimal(position,(BigDecimal) priceSpinner.getValue());","body":"JSpinner.getValue() returns an object, which you try to cast to Double (Which does not seem to be possible as it&#39;s current class is BigDecimal) as You require BigDecimal, try setBigDecimal(position,(BigDecimal) priceSpinner.getValue());"},{"owner":{"account_id":5179087,"reputation":3769,"user_id":4145291,"accept_rate":40,"display_name":"BarrySW19"},"score":0,"creation_date":1420465608,"post_id":27780642,"comment_id":43971579,"body_markdown":"Can you post the full stack trace - which line of your code is actually causing the exception?","body":"Can you post the full stack trace - which line of your code is actually causing the exception?"},{"owner":{"account_id":1371910,"reputation":1169,"user_id":1306811,"accept_rate":86,"display_name":"Gorbles"},"score":0,"creation_date":1420467865,"post_id":27780642,"comment_id":43972831,"body_markdown":"Important note: try not to instantiate BigDecimal objects with a double parameter. Always pass a String argument. There&#39;s a good piece on this, but I can&#39;t find the link for the life of me.","body":"Important note: try not to instantiate BigDecimal objects with a double parameter. Always pass a String argument. There&#39;s a good piece on this, but I can&#39;t find the link for the life of me."},{"owner":{"account_id":5544318,"reputation":829,"user_id":4399627,"accept_rate":58,"display_name":"abdou amer"},"score":0,"creation_date":1420468569,"post_id":27780642,"comment_id":43973253,"body_markdown":"when the priceSpinner is not filled (default value is zero) i got this error Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.ClassCastException: java.math.BigDecimal cannot be cast to java.lang.Double","body":"when the priceSpinner is not filled (default value is zero) i got this error Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.ClassCastException: java.math.BigDecimal cannot be cast to java.lang.Double"}],"answers":[{"comments":[{"owner":{"account_id":5544318,"reputation":829,"user_id":4399627,"accept_rate":58,"display_name":"abdou amer"},"score":0,"creation_date":1420465362,"post_id":27780673,"comment_id":43971418,"body_markdown":"incompatible type object cannot be converted to bigdecimal","body":"incompatible type object cannot be converted to bigdecimal"},{"owner":{"account_id":5544318,"reputation":829,"user_id":4399627,"accept_rate":58,"display_name":"abdou amer"},"score":0,"creation_date":1420465409,"post_id":27780673,"comment_id":43971458,"body_markdown":"priceSpinner.getValue() returns an Object not BigDecimal","body":"priceSpinner.getValue() returns an Object not BigDecimal"},{"owner":{"account_id":5179087,"reputation":3769,"user_id":4145291,"accept_rate":40,"display_name":"BarrySW19"},"score":0,"creation_date":1420465570,"post_id":27780673,"comment_id":43971560,"body_markdown":"With a model constructed from Doubles the spinner will be returning a Double.","body":"With a model constructed from Doubles the spinner will be returning a Double."},{"owner":{"account_id":984212,"reputation":62352,"user_id":1003142,"display_name":"Konstantin Yovkov"},"score":0,"creation_date":1420465619,"post_id":27780673,"comment_id":43971587,"body_markdown":"Yes, but there&#39;s still a need of explicit cast, because the compiler won&#39;t be aware of how the spinner is constructed.","body":"Yes, but there&#39;s still a need of explicit cast, because the compiler won&#39;t be aware of how the spinner is constructed."},{"owner":{"account_id":5179087,"reputation":3769,"user_id":4145291,"accept_rate":40,"display_name":"BarrySW19"},"score":0,"creation_date":1420465805,"post_id":27780673,"comment_id":43971696,"body_markdown":"Yes, but you can&#39;t cast Double to BigDecimal - did you actually try your code?","body":"Yes, but you can&#39;t cast Double to BigDecimal - did you actually try your code?"},{"owner":{"account_id":5544318,"reputation":829,"user_id":4399627,"accept_rate":58,"display_name":"abdou amer"},"score":0,"creation_date":1420466111,"post_id":27780673,"comment_id":43971856,"body_markdown":"Yes, i can&#39;t cast Double to BigDecimal. I got this error : Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.ClassCastException: java.math.BigDecimal cannot be cast to java.lang.Double","body":"Yes, i can&#39;t cast Double to BigDecimal. I got this error : Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.ClassCastException: java.math.BigDecimal cannot be cast to java.lang.Double"},{"owner":{"account_id":5179087,"reputation":3769,"user_id":4145291,"accept_rate":40,"display_name":"BarrySW19"},"score":0,"creation_date":1420466294,"post_id":27780673,"comment_id":43971967,"body_markdown":"Yeah, I don&#39;t see how the line identified in the question could generate the error given, thus the full stacktrace is needed.","body":"Yeah, I don&#39;t see how the line identified in the question could generate the error given, thus the full stacktrace is needed."},{"owner":{"account_id":5544318,"reputation":829,"user_id":4399627,"accept_rate":58,"display_name":"abdou amer"},"score":0,"creation_date":1420467101,"post_id":27780673,"comment_id":43972408,"body_markdown":"Yes it is in this same line","body":"Yes it is in this same line"},{"owner":{"account_id":5544318,"reputation":829,"user_id":4399627,"accept_rate":58,"display_name":"abdou amer"},"score":0,"creation_date":1420467370,"post_id":27780673,"comment_id":43972533,"body_markdown":"I just simulate the problem, because it&#39;s an inventory application where i have form to get product information, when the user click O.K button i send those informations to my database.","body":"I just simulate the problem, because it&#39;s an inventory application where i have form to get product information, when the user click O.K button i send those informations to my database."}],"tags":[],"owner":{"account_id":984212,"reputation":62352,"user_id":1003142,"display_name":"Konstantin Yovkov"},"comment_count":9,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1420465499,"creation_date":1420464898,"answer_id":27780673,"question_id":27780642,"body_markdown":"Obviously `priceSpinner.getValue()` returns `BigDecimal` and you&#39;re trying to convert it to `double` and then back to `BigDecimal`.\r\n\r\nWhy don&#39;t you just do?\r\n\r\n    insertStmt.setBigDecimal(position, (BigDecimal) priceSpinner.getValue());","title":"Can&#39;t put Double number in BigDecimal variable","body":"<p>Obviously <code>priceSpinner.getValue()</code> returns <code>BigDecimal</code> and you're trying to convert it to <code>double</code> and then back to <code>BigDecimal</code>.</p>\n\n<p>Why don't you just do?</p>\n\n<pre><code>insertStmt.setBigDecimal(position, (BigDecimal) priceSpinner.getValue());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2009857,"reputation":25959,"user_id":1798593,"display_name":"Patricia Shanahan"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1420466841,"creation_date":1420466841,"answer_id":27781227,"question_id":27780642,"body_markdown":"This program illustrates conversion in both directions between Double and BigDecimal:\r\n\r\n    import java.math.BigDecimal;\r\n    \r\n    public class Test {\r\n      public static void main(String[] args) {\r\n        Double d1 = 1.3;\r\n        BigDecimal bd1 = BigDecimal.valueOf(d1.doubleValue());\r\n        Double d2 = bd1.doubleValue();\r\n        System.out.println(d2);\r\n      }\r\n    }\r\n\r\nNote that the conversion to Double may not be exact.\r\n","title":"Can&#39;t put Double number in BigDecimal variable","body":"<p>This program illustrates conversion in both directions between Double and BigDecimal:</p>\n\n<pre><code>import java.math.BigDecimal;\n\npublic class Test {\n  public static void main(String[] args) {\n    Double d1 = 1.3;\n    BigDecimal bd1 = BigDecimal.valueOf(d1.doubleValue());\n    Double d2 = bd1.doubleValue();\n    System.out.println(d2);\n  }\n}\n</code></pre>\n\n<p>Note that the conversion to Double may not be exact.</p>\n"}],"owner":{"account_id":5544318,"reputation":829,"user_id":4399627,"accept_rate":58,"display_name":"abdou amer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36299,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":27781227,"answer_count":2,"score":1,"last_activity_date":1664890836,"creation_date":1420464766,"question_id":27780642,"body_markdown":"I&#39;m using a Double variable which holds the Item price. That variable is stored in postgresql database under a column of money type. I use  setBigDecimal(position,value) SQL function.In other part, i&#39;m using a JSpinner as input.\r\n\r\n    Double current = 0.0;\r\n    Double min = (double) Integer.MIN_VALUE;\r\n    Double max = (double) Integer.MAX_VALUE;\r\n    Double step = 0.1;\r\n    \r\n    JSpinner priceSpinner = new JSpinner(new SpinnerNumberModel(current, min, max, step));\r\n\r\nWhen the user clicks on a button, I get the value entred by the user and put it in the database via SQL query.\r\n\r\n\r\n     insertStmt.setBigDecimal(position,BigDecimal.valueOf((double) priceSpinner.getValue()));\r\n\r\n But, i got this little error,\r\n\r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.ClassCastException: java.math.BigDecimal cannot be cast to java.lang.Double\r\n\r\n\r\n\t\t","title":"Can&#39;t put Double number in BigDecimal variable","body":"<p>I'm using a Double variable which holds the Item price. That variable is stored in postgresql database under a column of money type. I use  setBigDecimal(position,value) SQL function.In other part, i'm using a JSpinner as input.</p>\n\n<pre><code>Double current = 0.0;\nDouble min = (double) Integer.MIN_VALUE;\nDouble max = (double) Integer.MAX_VALUE;\nDouble step = 0.1;\n\nJSpinner priceSpinner = new JSpinner(new SpinnerNumberModel(current, min, max, step));\n</code></pre>\n\n<p>When the user clicks on a button, I get the value entred by the user and put it in the database via SQL query.</p>\n\n<pre><code> insertStmt.setBigDecimal(position,BigDecimal.valueOf((double) priceSpinner.getValue()));\n</code></pre>\n\n<p>But, i got this little error,</p>\n\n<pre><code>Exception in thread \"AWT-EventQueue-0\" java.lang.ClassCastException: java.math.BigDecimal cannot be cast to java.lang.Double\n</code></pre>\n"},{"tags":["java","string","pattern-matching","wildcard"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1664810103,"post_id":73936901,"comment_id":130550668,"body_markdown":"You&#39;re really reinventing regexes. You should be *using* them with ```String.matches```","body":"You&#39;re really reinventing regexes. You should be <i>using</i> them with <code>String.matches</code>"},{"owner":{"account_id":26514958,"reputation":1,"user_id":20149644,"display_name":"JustDave"},"score":0,"creation_date":1664813711,"post_id":73936901,"comment_id":130551858,"body_markdown":"In other cases I&#39;d do that, but now I have to do it with character matching.","body":"In other cases I&#39;d do that, but now I have to do it with character matching."},{"owner":{"account_id":14608568,"reputation":625,"user_id":10550655,"display_name":"Michael Katt"},"score":0,"creation_date":1664822937,"post_id":73936901,"comment_id":130554631,"body_markdown":"Some of your examples do not fit your pattern rules, e.g. `&quot;a*cd&quot; &lt;- &quot;a\\\\*d&quot; result: true` the pattern does not contain any wildcard, that is why the result should be false because of the &quot;c&quot; in your string. Please correct your examples.","body":"Some of your examples do not fit your pattern rules, e.g. <code>&quot;a*cd&quot; &lt;- &quot;a\\\\*d&quot; result: true</code> the pattern does not contain any wildcard, that is why the result should be false because of the &quot;c&quot; in your string. Please correct your examples."},{"owner":{"account_id":26514958,"reputation":1,"user_id":20149644,"display_name":"JustDave"},"score":0,"creation_date":1664823237,"post_id":73936901,"comment_id":130554725,"body_markdown":"You are right @MichaelKatt, I&#39;ve fixed them.","body":"You are right @MichaelKatt, I&#39;ve fixed them."}],"answers":[{"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1664848162,"post_id":73941827,"comment_id":130559521,"body_markdown":"Are we sure a backslash cannot itself be escaped?  What should `\\\\\\\\*` match?","body":"Are we sure a backslash cannot itself be escaped?  What should <code>\\\\\\\\*</code> match?"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1664890787,"post_id":73941827,"comment_id":130570023,"body_markdown":"Good point. I Modified the method. `&quot;\\\\\\\\*&quot;` would be a match to something like `&quot;\\\\whatever is here&quot;` and `&quot;*\\\\\\\\&quot;` would be a match to something like `&quot;what the\\\\&quot;`. Thank you.","body":"Good point. I Modified the method. <code>&quot;\\\\\\\\*&quot;</code> would be a match to something like <code>&quot;\\\\whatever is here&quot;</code> and <code>&quot;*\\\\\\\\&quot;</code> would be a match to something like <code>&quot;what the\\\\&quot;</code>. Thank you."}],"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664890496,"creation_date":1664840730,"answer_id":73941827,"question_id":73936901,"body_markdown":"I&#39;m more familiar with two specific wildcards, the asterisk (*) and the question mark (?). The asterisk is for any number of arbitrary characters and the question mark for any single character.\r\n\r\nYou can possible use the following method to carry out the task. It utilizes the [String#matches()](https://www.tutorialspoint.com/java/java_string_matches.htm) method by manipulating the supplied criteria:\r\n\r\n    /**\r\n     * Returns either true or false if a string contains a WildCard match. \r\n     * Asterisks (*) are used for an arbitrary number of characters pattern \r\n     * matching and the question mark character (?) is used* for exactly one \r\n     * character pattern matching.\r\n     * \r\n     * &lt;b&gt;Simple Example Usage:&lt;/b&gt;&lt;pre&gt;\r\n     * \r\n     *     boolean tf1 = wildCardWordMatch(&quot;this&quot;, &quot;th*&quot;);  // true\r\n     *     boolean tf2 = wildCardWordMatch(&quot;this&quot;, &quot;toa*&quot;); // false&lt;/pre&gt;\r\n     *\r\n     * @param StringWord (String) String to test.&lt;br&gt;\r\n     * \r\n     * @param criteria   (String) The wildcard pattern to test.&lt;br&gt;\r\n     *\r\n     * @return (boolean) True if the string matches the criteria wildcard pattern \r\n     * and False if not.\r\n     */\r\n    public static boolean wildCardWordMatch(String stringWord, String criteria) {\r\n        if (stringWord == null || criteria == null) {\r\n            return false;\r\n        }\r\n        if (criteria.isEmpty()) {\r\n            return true;\r\n        }\r\n\r\n        // Check for escaped wildcard characters.\r\n        boolean hasEscape = false;\r\n        if (criteria.contains(&quot;\\\\\\\\&quot;)) { \r\n            criteria = criteria.replace(&quot;\\\\\\\\&quot;, &quot;~ee~&quot;);\r\n            hasEscape = true;\r\n        }\r\n        if (criteria.contains(&quot;\\\\*&quot;) || criteria.contains(&quot;\\\\?&quot;)) {\r\n            hasEscape = true;\r\n            criteria = criteria.replace(&quot;\\\\*&quot;, &quot;~||~&quot;);\r\n            criteria = criteria.replace(&quot;\\\\?&quot;, &quot;~!!~&quot;);\r\n        }\r\n        \r\n        criteria = criteria.replace(&quot;?&quot;, &quot;.{1}&quot;).replace(&quot;*&quot;, (criteria.endsWith(&quot;*&quot;) ? &quot;.*&quot; : &quot;.*?&quot;));\r\n        \r\n        if (hasEscape) {\r\n            criteria = criteria.replace(&quot;~||~&quot;, &quot;\\\\*&quot;);\r\n            criteria = criteria.replace(&quot;~!!~&quot;, &quot;\\\\?*&quot;);\r\n            criteria = criteria.replace(&quot;~ee~&quot;, &quot;\\\\\\\\&quot;);\r\n        }\r\n        \r\n        boolean res = false;\r\n        try {\r\n            res = stringWord.matches(criteria);\r\n        } catch (Exception ex) {\r\n            throw new IllegalArgumentException(System.lineSeparator() + \r\n                    &quot;wildCardWordMatch() Method Error! Invalid Criteria &quot; +\r\n                    &quot;supplied! (&quot; + criteria + &quot;)&quot; + System.lineSeparator());\r\n        }\r\n        return res;\r\n    }\r\n\r\nThe following tests were done:\r\n\r\n```\r\nJava String   Criteria              Result\r\n========================================== \r\n&quot;abc&quot;         &quot;&quot;                    true\r\n&quot;abcd&quot;        &quot;a*d&quot;                 true\r\n&quot;a*cd&quot;        &quot;a\\\\*cd&quot;              true\r\n&quot;abc&quot;         &quot;A&quot;                   false (not enough characters and wrong case)\r\n&quot;&quot;            &quot;*&quot;                   true\r\n&quot;abcd&quot;        &quot;**a**b****c***d***&quot;  true  (Works but is pointless with so many *&#39;s)\r\n&quot;abcd&quot;        &quot;*a*b*c*d*&quot;           true  (Works and is same as above)\r\n&quot;abcd&quot;        a??d                  true\r\n&quot;abcd         &quot;a???d&quot;               false (too many ?&#39;s)\r\n&quot;\\\\&quot;          &quot;\\\\\\\\&quot;                true\r\n&quot;***&quot;         &quot;*\\\\**\\\\*\\\\*&quot;         true\r\n&quot;abcd*abcde&quot;  &quot;a*\\\\*abcd&quot;           false (No &#39;e&#39; in criteria)\r\n&quot;abcd*abcde&quot;  &quot;a*\\\\*abcde&quot;          true\r\n&quot;abcd&quot;        &quot;????&quot;                true  \r\n&quot;abcd&quot;        &quot;???&quot;                 false (Not enough ?&#39;s)\r\n&quot;\\\\\\\\abc&quot;     &quot;\\\\\\\\\\\\\\\\*&quot;           true\r\n&quot;\\\\\\\\abc&quot;     &quot;\\\\\\\\\\\\\\\\???&quot;         true\r\n&quot;abc\\\\\\\\&quot;     &quot;??\\\\\\\\\\\\\\\\&quot;          false (Not enough ?&#39;s)\r\n&quot;abc\\\\\\\\&quot;     &quot;???\\\\\\\\\\\\\\\\&quot;         true\r\n&quot;abc\\\\\\\\&quot;     &quot;a?c\\\\\\\\\\\\\\\\&quot;         true\r\n&quot;abc\\\\\\\\&quot;     &quot;a??c\\\\\\\\\\\\\\\\&quot;        false (too many ?&#39;s)\r\n&quot;abc\\\\\\\\&quot;     &quot;a*c\\\\\\\\\\\\\\\\&quot;         true\r\n&quot;abc\\\\\\\\&quot;     &quot;*\\\\\\\\\\\\\\\\&quot;           true\r\n&quot;abc\\\\&quot;       &quot;*\\\\\\\\&quot;               true\r\n&quot;\\\\abc&quot;       &quot;\\\\\\\\*&quot;               true\r\n&quot;\\\\abc\\\\&quot;     &quot;\\\\\\\\*\\\\\\\\&quot;           true\r\n&quot;\\\\abc\\\\&quot;     &quot;\\\\\\\\ac\\\\\\\\&quot;          false (Missing the character &#39;b&#39;)\r\n&quot;\\\\abc\\\\&quot;     &quot;\\\\\\\\abc\\\\\\\\&quot;         true\r\n&quot;\\\\abc\\\\&quot;     &quot;\\\\\\\\???\\\\\\\\&quot;         true\r\n```\r\n\r\n**On a side:** In the examples you placed in your post, your last one is wrong. It should never be true since there is no &#39;e&#39; or wildcard at the end of the criteria.","title":"String contains with wildcard detection without indexOf method","body":"<p>I'm more familiar with two specific wildcards, the asterisk (*) and the question mark (?). The asterisk is for any number of arbitrary characters and the question mark for any single character.</p>\n<p>You can possible use the following method to carry out the task. It utilizes the <a href=\"https://www.tutorialspoint.com/java/java_string_matches.htm\" rel=\"nofollow noreferrer\">String#matches()</a> method by manipulating the supplied criteria:</p>\n<pre><code>/**\n * Returns either true or false if a string contains a WildCard match. \n * Asterisks (*) are used for an arbitrary number of characters pattern \n * matching and the question mark character (?) is used* for exactly one \n * character pattern matching.\n * \n * &lt;b&gt;Simple Example Usage:&lt;/b&gt;&lt;pre&gt;\n * \n *     boolean tf1 = wildCardWordMatch(&quot;this&quot;, &quot;th*&quot;);  // true\n *     boolean tf2 = wildCardWordMatch(&quot;this&quot;, &quot;toa*&quot;); // false&lt;/pre&gt;\n *\n * @param StringWord (String) String to test.&lt;br&gt;\n * \n * @param criteria   (String) The wildcard pattern to test.&lt;br&gt;\n *\n * @return (boolean) True if the string matches the criteria wildcard pattern \n * and False if not.\n */\npublic static boolean wildCardWordMatch(String stringWord, String criteria) {\n    if (stringWord == null || criteria == null) {\n        return false;\n    }\n    if (criteria.isEmpty()) {\n        return true;\n    }\n\n    // Check for escaped wildcard characters.\n    boolean hasEscape = false;\n    if (criteria.contains(&quot;\\\\\\\\&quot;)) { \n        criteria = criteria.replace(&quot;\\\\\\\\&quot;, &quot;~ee~&quot;);\n        hasEscape = true;\n    }\n    if (criteria.contains(&quot;\\\\*&quot;) || criteria.contains(&quot;\\\\?&quot;)) {\n        hasEscape = true;\n        criteria = criteria.replace(&quot;\\\\*&quot;, &quot;~||~&quot;);\n        criteria = criteria.replace(&quot;\\\\?&quot;, &quot;~!!~&quot;);\n    }\n    \n    criteria = criteria.replace(&quot;?&quot;, &quot;.{1}&quot;).replace(&quot;*&quot;, (criteria.endsWith(&quot;*&quot;) ? &quot;.*&quot; : &quot;.*?&quot;));\n    \n    if (hasEscape) {\n        criteria = criteria.replace(&quot;~||~&quot;, &quot;\\\\*&quot;);\n        criteria = criteria.replace(&quot;~!!~&quot;, &quot;\\\\?*&quot;);\n        criteria = criteria.replace(&quot;~ee~&quot;, &quot;\\\\\\\\&quot;);\n    }\n    \n    boolean res = false;\n    try {\n        res = stringWord.matches(criteria);\n    } catch (Exception ex) {\n        throw new IllegalArgumentException(System.lineSeparator() + \n                &quot;wildCardWordMatch() Method Error! Invalid Criteria &quot; +\n                &quot;supplied! (&quot; + criteria + &quot;)&quot; + System.lineSeparator());\n    }\n    return res;\n}\n</code></pre>\n<p>The following tests were done:</p>\n<pre><code>Java String   Criteria              Result\n========================================== \n&quot;abc&quot;         &quot;&quot;                    true\n&quot;abcd&quot;        &quot;a*d&quot;                 true\n&quot;a*cd&quot;        &quot;a\\\\*cd&quot;              true\n&quot;abc&quot;         &quot;A&quot;                   false (not enough characters and wrong case)\n&quot;&quot;            &quot;*&quot;                   true\n&quot;abcd&quot;        &quot;**a**b****c***d***&quot;  true  (Works but is pointless with so many *'s)\n&quot;abcd&quot;        &quot;*a*b*c*d*&quot;           true  (Works and is same as above)\n&quot;abcd&quot;        a??d                  true\n&quot;abcd         &quot;a???d&quot;               false (too many ?'s)\n&quot;\\\\&quot;          &quot;\\\\\\\\&quot;                true\n&quot;***&quot;         &quot;*\\\\**\\\\*\\\\*&quot;         true\n&quot;abcd*abcde&quot;  &quot;a*\\\\*abcd&quot;           false (No 'e' in criteria)\n&quot;abcd*abcde&quot;  &quot;a*\\\\*abcde&quot;          true\n&quot;abcd&quot;        &quot;????&quot;                true  \n&quot;abcd&quot;        &quot;???&quot;                 false (Not enough ?'s)\n&quot;\\\\\\\\abc&quot;     &quot;\\\\\\\\\\\\\\\\*&quot;           true\n&quot;\\\\\\\\abc&quot;     &quot;\\\\\\\\\\\\\\\\???&quot;         true\n&quot;abc\\\\\\\\&quot;     &quot;??\\\\\\\\\\\\\\\\&quot;          false (Not enough ?'s)\n&quot;abc\\\\\\\\&quot;     &quot;???\\\\\\\\\\\\\\\\&quot;         true\n&quot;abc\\\\\\\\&quot;     &quot;a?c\\\\\\\\\\\\\\\\&quot;         true\n&quot;abc\\\\\\\\&quot;     &quot;a??c\\\\\\\\\\\\\\\\&quot;        false (too many ?'s)\n&quot;abc\\\\\\\\&quot;     &quot;a*c\\\\\\\\\\\\\\\\&quot;         true\n&quot;abc\\\\\\\\&quot;     &quot;*\\\\\\\\\\\\\\\\&quot;           true\n&quot;abc\\\\&quot;       &quot;*\\\\\\\\&quot;               true\n&quot;\\\\abc&quot;       &quot;\\\\\\\\*&quot;               true\n&quot;\\\\abc\\\\&quot;     &quot;\\\\\\\\*\\\\\\\\&quot;           true\n&quot;\\\\abc\\\\&quot;     &quot;\\\\\\\\ac\\\\\\\\&quot;          false (Missing the character 'b')\n&quot;\\\\abc\\\\&quot;     &quot;\\\\\\\\abc\\\\\\\\&quot;         true\n&quot;\\\\abc\\\\&quot;     &quot;\\\\\\\\???\\\\\\\\&quot;         true\n</code></pre>\n<p><strong>On a side:</strong> In the examples you placed in your post, your last one is wrong. It should never be true since there is no 'e' or wildcard at the end of the criteria.</p>\n"}],"owner":{"account_id":26514958,"reputation":1,"user_id":20149644,"display_name":"JustDave"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":425,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1664890496,"creation_date":1664807164,"question_id":73936901,"body_markdown":"I want to check whether a String contains a pattern similar to what String.contains() does but with wildcard (*) detection as well.\r\n\r\nA pattern can have none, single or multiple wildcards and each occurrence can match for zero or more characters.\r\n\r\nIf * is preceded by a \\ character, then the * should be considered as a regular character.\r\n\r\nExamples:\r\n\r\n    &quot;abc&quot; &lt;- &quot;&quot; result: true\r\n    &quot;abcd&quot; &lt;- &quot;a*d&quot; result: true\r\n    &quot;a*cd&quot; &lt;- &quot;a\\\\*cd&quot; result: true\r\n    &quot;abc&quot; &lt;- &quot;A&quot; result: false\r\n    &quot;&quot; &lt;- &quot;*&quot; result: true\r\n    &quot;abcd&quot; &lt;- &quot;**a**b****c***d***&quot; result: true\r\n    &quot;\\\\&quot; &lt;- &quot;\\\\&quot; result: true\r\n    &quot;***&quot; &lt;- &quot;*\\\\**\\\\*\\\\*&quot; result: true\r\n    &quot;abcd*abcde&quot; &lt;- &quot;a*\\\\*abcd&quot; result: true\r\n\r\nI&#39;ve found this code snippet that somewhat works. Added null and empty string/pattern check and most of the cases work. Except for the wildcard cases.\r\n```java\r\npublic static void stringMatch(String text, String pattern)\r\n    {\r\n  \r\n        int len_t = text.length();\r\n        int len_p = pattern.length();\r\n  \r\n        int k = 0, i = 0, j = 0;\r\n  \r\n        // loop to find out the position Of searched pattern\r\n        for (i = 0; i &lt;= (len_t - len_p); i++) {\r\n  \r\n            for (j = 0; j &lt; len_p; j++)\r\n            {\r\n                if (text.charAt(i + j) != pattern.charAt(j))\r\n                    break;\r\n            }\r\n            \r\n            if (j == len_p)\r\n            {\r\n                k++;\r\n                System.out.println(&quot;Pattern Found at Position: &quot; + i);\r\n            }\r\n        }\r\n        \r\n        if (k == 0)\r\n            System.out.println(&quot;No Match Found!&quot;);\r\n        else\r\n            System.out.println(&quot;Total Instances Found = &quot; + k);\r\n    }\r\n```","title":"String contains with wildcard detection without indexOf method","body":"<p>I want to check whether a String contains a pattern similar to what String.contains() does but with wildcard (*) detection as well.</p>\n<p>A pattern can have none, single or multiple wildcards and each occurrence can match for zero or more characters.</p>\n<p>If * is preceded by a \\ character, then the * should be considered as a regular character.</p>\n<p>Examples:</p>\n<pre><code>&quot;abc&quot; &lt;- &quot;&quot; result: true\n&quot;abcd&quot; &lt;- &quot;a*d&quot; result: true\n&quot;a*cd&quot; &lt;- &quot;a\\\\*cd&quot; result: true\n&quot;abc&quot; &lt;- &quot;A&quot; result: false\n&quot;&quot; &lt;- &quot;*&quot; result: true\n&quot;abcd&quot; &lt;- &quot;**a**b****c***d***&quot; result: true\n&quot;\\\\&quot; &lt;- &quot;\\\\&quot; result: true\n&quot;***&quot; &lt;- &quot;*\\\\**\\\\*\\\\*&quot; result: true\n&quot;abcd*abcde&quot; &lt;- &quot;a*\\\\*abcd&quot; result: true\n</code></pre>\n<p>I've found this code snippet that somewhat works. Added null and empty string/pattern check and most of the cases work. Except for the wildcard cases.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void stringMatch(String text, String pattern)\n    {\n  \n        int len_t = text.length();\n        int len_p = pattern.length();\n  \n        int k = 0, i = 0, j = 0;\n  \n        // loop to find out the position Of searched pattern\n        for (i = 0; i &lt;= (len_t - len_p); i++) {\n  \n            for (j = 0; j &lt; len_p; j++)\n            {\n                if (text.charAt(i + j) != pattern.charAt(j))\n                    break;\n            }\n            \n            if (j == len_p)\n            {\n                k++;\n                System.out.println(&quot;Pattern Found at Position: &quot; + i);\n            }\n        }\n        \n        if (k == 0)\n            System.out.println(&quot;No Match Found!&quot;);\n        else\n            System.out.println(&quot;Total Instances Found = &quot; + k);\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","tomcat","spring-boot-test"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1664887042,"post_id":73947706,"comment_id":130568596,"body_markdown":"I would suggest to remove that line and figure out a way using a `TomcatCustomizer` instead. That way it works regardless of your environment.","body":"I would suggest to remove that line and figure out a way using a <code>TomcatCustomizer</code> instead. That way it works regardless of your environment."},{"owner":{"account_id":6809556,"reputation":165,"user_id":5539129,"accept_rate":100,"display_name":"Dartz"},"score":0,"creation_date":1664890104,"post_id":73947706,"comment_id":130569745,"body_markdown":"`TomcatCustomizer ` doesn&#39;t seem to exist in spring-boot 2.5.5. I found a [WebServerFactoryCustomizer](https://www.baeldung.com/embeddedservletcontainercustomizer-configurableembeddedservletcontainer-spring-boot) but even after setting the property with it, it is still null (corresponding code has been added to the original question)","body":"<code>TomcatCustomizer </code> doesn&#39;t seem to exist in spring-boot 2.5.5. I found a <a href=\"https://www.baeldung.com/embeddedservletcontainercustomizer-configurableembeddedservletcontainer-spring-boot\" rel=\"nofollow noreferrer\">WebServerFactoryCustomizer</a> but even after setting the property with it, it is still null (corresponding code has been added to the original question)"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1664892061,"post_id":73947706,"comment_id":130570530,"body_markdown":"You should call `setEncodedSolidusHandling` on the connector and set it to `decode`. The system property you are setting is actually deprecated (and used as a migration path).","body":"You should call <code>setEncodedSolidusHandling</code> on the connector and set it to <code>decode</code>. The system property you are setting is actually deprecated (and used as a migration path)."},{"owner":{"account_id":6809556,"reputation":165,"user_id":5539129,"accept_rate":100,"display_name":"Dartz"},"score":0,"creation_date":1664896433,"post_id":73947706,"comment_id":130572290,"body_markdown":"@M.Deinum oh you&#39;re right ! I didn&#39;t know there were a _real_ programatic way to enable the slash decoding without the property. Thanks !","body":"@M.Deinum oh you&#39;re right ! I didn&#39;t know there were a <i>real</i> programatic way to enable the slash decoding without the property. Thanks !"}],"answers":[{"comments":[{"owner":{"account_id":1360112,"reputation":9949,"user_id":1297641,"accept_rate":76,"display_name":"Ahmet Karakaya"},"score":0,"creation_date":1678571009,"post_id":73948510,"comment_id":133560527,"body_markdown":"this answer is a like diamond which I came across while walking on the pavement","body":"this answer is a like diamond which I came across while walking on the pavement"}],"tags":[],"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1664889502,"creation_date":1664889502,"answer_id":73948510,"question_id":73947706,"body_markdown":"Referring to [How to set environment variable or system property in spring tests?][1]\r\n\r\n## The simplest way \r\nFollow [add static initializer in the class][2]\r\n```java\r\n...\r\nclass GlobalFullTest {\r\n    static {\r\n        System.setProperty(&quot;org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH&quot;, &quot;true&quot;);\r\n    }\r\n...\r\n}\r\ndown side is we need to copy that for every test.\r\n```\r\n\r\n## Clean way \r\n[create ApplicationContextInitializer][3], which can be reused [in the Spring application][4] and any other test.\r\n\r\n```java\r\npublic class CustomApplicationContextInitializer implements ApplicationContextInitializer&lt;ConfigurableApplicationContext&gt;\r\n{\r\n    @Override\r\n    public void initialize(ConfigurableApplicationContext applicationContext)\r\n    {\r\nSystem.setProperty(&quot;org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH&quot;, &quot;true&quot;);\r\n    }\r\n}\r\n\r\n...\r\n@ContextConfiguration(initializers = CustomApplicationContextInitializer.class,...)\r\nclass GlobalFullTest {\r\n...\r\n\r\n```\r\n\r\n  [1]: https://stackoverflow.com/questions/11306951/how-to-set-environment-variable-or-system-property-in-spring-tests\r\n  [2]: https://stackoverflow.com/a/12144312/7928721\r\n  [3]: https://stackoverflow.com/a/41305482/7928721\r\n  [4]: https://stackoverflow.com/a/35217768/7928721","title":"Defining tomcat property in a test running with @SpringBootTest","body":"<p>Referring to <a href=\"https://stackoverflow.com/questions/11306951/how-to-set-environment-variable-or-system-property-in-spring-tests\">How to set environment variable or system property in spring tests?</a></p>\n<h2>The simplest way</h2>\n<p>Follow <a href=\"https://stackoverflow.com/a/12144312/7928721\">add static initializer in the class</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>...\nclass GlobalFullTest {\n    static {\n        System.setProperty(&quot;org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH&quot;, &quot;true&quot;);\n    }\n...\n}\ndown side is we need to copy that for every test.\n</code></pre>\n<h2>Clean way</h2>\n<p><a href=\"https://stackoverflow.com/a/41305482/7928721\">create ApplicationContextInitializer</a>, which can be reused <a href=\"https://stackoverflow.com/a/35217768/7928721\">in the Spring application</a> and any other test.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomApplicationContextInitializer implements ApplicationContextInitializer&lt;ConfigurableApplicationContext&gt;\n{\n    @Override\n    public void initialize(ConfigurableApplicationContext applicationContext)\n    {\nSystem.setProperty(&quot;org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH&quot;, &quot;true&quot;);\n    }\n}\n\n...\n@ContextConfiguration(initializers = CustomApplicationContextInitializer.class,...)\nclass GlobalFullTest {\n...\n\n</code></pre>\n"}],"owner":{"account_id":6809556,"reputation":165,"user_id":5539129,"accept_rate":100,"display_name":"Dartz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":404,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73948510,"answer_count":1,"score":2,"last_activity_date":1664890153,"creation_date":1664885665,"question_id":73947706,"body_markdown":"My application uses spring-boot 2.5.5. \r\n\r\nI set a property for Tomcat at application startup to [allow encoded slash in `@PathVariable`](https://stackoverflow.com/a/45058887/5539129) : \r\n\r\n```java\r\n@SpringBootApplication\r\npublic class App {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.setProperty(&quot;org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH&quot;, &quot;true&quot;);\r\n\t\tSpringApplication.run(App.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nEverything works fine when I start the app, except in my integration tests :\r\n\r\n```java\r\n@ActiveProfiles(&quot;test-connected&quot;)\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n@TestInstance(TestInstance.Lifecycle.PER_CLASS)\r\n@ExtendWith(SpringExtension.class)\r\nclass GlobalFullTest {\r\n```\r\n\r\nWhen I debug the `org.apache.tomcat.util.buf.UDecoder` class : I see that the property `org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH` is `null` when class is loaded, so a default value `false` is set.\r\n\r\nI tried the following : \r\n- Adding `System.setProperty(&quot;org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH&quot;, &quot;true&quot;);` in the `@BeforeAll` method of my test\r\n- Adding `properties = { &quot;org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true&quot; }` in the `@SpringBootTest` annotation.\r\n- Adding `org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH: true` in my `application-test-connected.yaml`\r\n- Using `WebServerFactoryCustomizer` : \r\n```java\r\n@Configuration\r\npublic class WebServerConfiguration {\r\n\r\n\t@Bean\r\n\tpublic WebServerFactoryCustomizer&lt;TomcatServletWebServerFactory&gt; customizer() {\r\n\t\treturn factory -&gt; factory.addConnectorCustomizers(connector -&gt; connector.setProperty(&quot;org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH&quot;, &quot;true&quot;));\r\n\t}\r\n\r\n}\r\n```\r\n\r\nBut none of these worked : when the property is retrieved by `org.apache.tomcat.util.buf.UDecoder`  class, its value is always `null`.\r\n\r\nHow could I set the property before the `org.apache.tomcat.util.buf.UDecoder` class is loaded ?","title":"Defining tomcat property in a test running with @SpringBootTest","body":"<p>My application uses spring-boot 2.5.5.</p>\n<p>I set a property for Tomcat at application startup to <a href=\"https://stackoverflow.com/a/45058887/5539129\">allow encoded slash in <code>@PathVariable</code></a> :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class App {\n\n    public static void main(String[] args) {\n        System.setProperty(&quot;org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH&quot;, &quot;true&quot;);\n        SpringApplication.run(App.class, args);\n    }\n\n}\n</code></pre>\n<p>Everything works fine when I start the app, except in my integration tests :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ActiveProfiles(&quot;test-connected&quot;)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@TestInstance(TestInstance.Lifecycle.PER_CLASS)\n@ExtendWith(SpringExtension.class)\nclass GlobalFullTest {\n</code></pre>\n<p>When I debug the <code>org.apache.tomcat.util.buf.UDecoder</code> class : I see that the property <code>org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH</code> is <code>null</code> when class is loaded, so a default value <code>false</code> is set.</p>\n<p>I tried the following :</p>\n<ul>\n<li>Adding <code>System.setProperty(&quot;org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH&quot;, &quot;true&quot;);</code> in the <code>@BeforeAll</code> method of my test</li>\n<li>Adding <code>properties = { &quot;org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true&quot; }</code> in the <code>@SpringBootTest</code> annotation.</li>\n<li>Adding <code>org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH: true</code> in my <code>application-test-connected.yaml</code></li>\n<li>Using <code>WebServerFactoryCustomizer</code> :</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class WebServerConfiguration {\n\n    @Bean\n    public WebServerFactoryCustomizer&lt;TomcatServletWebServerFactory&gt; customizer() {\n        return factory -&gt; factory.addConnectorCustomizers(connector -&gt; connector.setProperty(&quot;org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH&quot;, &quot;true&quot;));\n    }\n\n}\n</code></pre>\n<p>But none of these worked : when the property is retrieved by <code>org.apache.tomcat.util.buf.UDecoder</code>  class, its value is always <code>null</code>.</p>\n<p>How could I set the property before the <code>org.apache.tomcat.util.buf.UDecoder</code> class is loaded ?</p>\n"},{"tags":["java","generics","linked-list","nodes","functional-interface"],"answers":[{"comments":[{"owner":{"account_id":22938034,"reputation":37,"user_id":17071203,"display_name":"Patryk Szymańczyk"},"score":0,"creation_date":1664804343,"post_id":73929892,"comment_id":130548602,"body_markdown":"You are right, i want to print the object, but program takes the node.","body":"You are right, i want to print the object, but program takes the node."},{"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"score":1,"creation_date":1664804720,"post_id":73929892,"comment_id":130548757,"body_markdown":"Your code prints the node by `System.out.println(tnode)`, I changed it to `System.out.pritnln(tnode.object)` to print the object of tnode.","body":"Your code prints the node by <code>System.out.println(tnode)</code>, I changed it to <code>System.out.pritnln(tnode.object)</code> to print the object of tnode."},{"owner":{"account_id":22938034,"reputation":37,"user_id":17071203,"display_name":"Patryk Szymańczyk"},"score":0,"creation_date":1664913479,"post_id":73929892,"comment_id":130577535,"body_markdown":"And maybe you know, how could I implements methods removeIf and getWithFilter from main","body":"And maybe you know, how could I implements methods removeIf and getWithFilter from main"},{"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"score":0,"creation_date":1664918227,"post_id":73929892,"comment_id":130578860,"body_markdown":"The signature of those methods depend on whether you want to use the predicate that was given to the constructor. If not, e. g. the signature of method removeIf looks like `void removeIf(Predicate&lt;T&gt; predicate)`. You pass the predicate in the same way you pass it to the constructor.","body":"The signature of those methods depend on whether you want to use the predicate that was given to the constructor. If not, e. g. the signature of method removeIf looks like <code>void removeIf(Predicate&lt;T&gt; predicate)</code>. You pass the predicate in the same way you pass it to the constructor."},{"owner":{"account_id":22938034,"reputation":37,"user_id":17071203,"display_name":"Patryk Szymańczyk"},"score":0,"creation_date":1664969807,"post_id":73929892,"comment_id":130588876,"body_markdown":"okay, so method should be like\npublic void removeIf(Predicate&lt;T&gt; predicate){\n&quot;deleting nodes&quot; ???","body":"okay, so method should be like public void removeIf(Predicate&lt;T&gt; predicate){ &quot;deleting nodes&quot; ???"},{"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"score":0,"creation_date":1664971380,"post_id":73929892,"comment_id":130589397,"body_markdown":"Yes. Have you tried it?","body":"Yes. Have you tried it?"},{"owner":{"account_id":22938034,"reputation":37,"user_id":17071203,"display_name":"Patryk Szymańczyk"},"score":0,"creation_date":1664987904,"post_id":73929892,"comment_id":130595804,"body_markdown":"if (predicate.test((T) key)) {\n            Node temp = head, prev = null;\n            if (temp != null &amp;&amp; temp.object == key) {\n                head = temp.next;\n                return;\n            }\n            while (temp != null &amp;&amp; temp.object != key) {\n                prev = temp;\n                temp = temp.next;\n            }\n            if (temp == null)\n                return;\n\n            prev.next = temp.next;\n        }\n    }\nMade something like this and still doesnt work, can i text priv to you ?","body":"if (predicate.test((T) key)) {             Node temp = head, prev = null;             if (temp != null &amp;&amp; temp.object == key) {                 head = temp.next;                 return;             }             while (temp != null &amp;&amp; temp.object != key) {                 prev = temp;                 temp = temp.next;             }             if (temp == null)                 return;              prev.next = temp.next;         }     } Made something like this and still doesnt work, can i text priv to you ?"},{"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"score":0,"creation_date":1664991369,"post_id":73929892,"comment_id":130596937,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/248576/discussion-between-mihe-and-patryk-szymanczyk).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/248576/discussion-between-mihe-and-patryk-szymanczyk\">continue this discussion in chat</a>."}],"tags":[],"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664751285,"creation_date":1664751285,"answer_id":73929892,"question_id":73929756,"body_markdown":"Probably you don&#39;t want to print the node, but the object contained within. Also, you want to print the first object, too. That is\r\n\r\n```\r\npublic void printList() {\r\n    Node tnode = head;\r\n    while (tnode != null) {\r\n        System.out.println(tnode.object);\r\n        tnode = tnode.next;\r\n    }\r\n}\r\n```\r\n","title":"Problem with printing own Linked List and implementing 2 methods","body":"<p>Probably you don't want to print the node, but the object contained within. Also, you want to print the first object, too. That is</p>\n<pre><code>public void printList() {\n    Node tnode = head;\n    while (tnode != null) {\n        System.out.println(tnode.object);\n        tnode = tnode.next;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":22938034,"reputation":37,"user_id":17071203,"display_name":"Patryk Szymańczyk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":234,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73929892,"answer_count":1,"score":-1,"last_activity_date":1664889619,"creation_date":1664749544,"question_id":73929756,"body_markdown":"I created my own Linked List using nodes, and I have few methods to do.\r\n\r\nMethods in main:\r\n\r\n```\r\n//List&lt;Person&gt; females = peopleFromWarsaw.getWithFilter(p -&gt; p.getName().endsWith(&quot;a&quot;));\r\n// Dont know how to implements this methods.\r\n\r\n//        ObjectContainer.removeIf(p -&gt; p.getAge() &gt; 50);\r\n//        peopleFromWarsaw.storeToFile(&quot;youngPeopleFromWarsaw.txt&quot;,\r\n//                p -&gt; p.getAge() &lt; 30, p -&gt; p.getName() + &quot;;&quot; + p.getAge() + &quot;;&quot; + p.getCity());\r\n```\r\n\r\nAt the begging i made a linked list and tried to print elements from list but doesnt work.\r\nAt first it looks like it doesn&#39;t have a method toString but class Person has toString. I guess the program takes the node but I want to print object.\r\nMaybe u can see what is the problem with code, basically nodes and methods in Object Container are fine.\r\n\r\nSecondly i have a problem with implementing methods in main (getWithFilter,removeIf and storeToFile)\r\nNo matter how I write method in ObjectContainer, always intelij tells me that cannot use lambda and underline p.getName (p -&gt; p.getName().endsWith(&quot;a&quot;));\r\nIn class Person i have getters and setters with fields name,age.\r\n\r\n\r\nMaybe someone could explain how properly write this methods ?\r\n\r\n\r\n```\r\npublic class ObjectContainer&lt;T&gt; {\r\n\r\n    private Node head;\r\n    private Node tail;\r\n    private final Predicate&lt;T&gt; predicate;\r\n\r\n    public ObjectContainer(Predicate&lt;T&gt; predicate) {\r\n        this.predicate = predicate;\r\n    }\r\n\r\n    static class Node {\r\n\r\n        private Object object;\r\n        private Node next;\r\n\r\n        Node(Object object) {\r\n            this.object = object;\r\n        }\r\n    }\r\n\r\n    public void add(T object) {\r\n        if (!predicate.test(object)) {\r\n            throw new IllegalArgumentException(&quot;Element can not be added&quot;);\r\n        }\r\n        Node newNode = new Node(object);\r\n        if (head == null) {\r\n            head = newNode;\r\n            tail = newNode;\r\n        } else {\r\n            tail.next = newNode;\r\n            tail = newNode;\r\n        }\r\n    }\r\n\r\n    public int size() {\r\n        int count = 0;\r\n        Node current = head;\r\n\r\n        while (current != null) {\r\n            count++;\r\n            current = current.next;\r\n        }\r\n        return count;\r\n    }\r\n\r\n    public void push(T new_data) {\r\n        Node new_node = new Node(new_data);\r\n        new_node.next = head;\r\n        head = new_node;\r\n    }\r\n\r\n    public void insertAfter(Node prev_node, T new_data) {\r\n        if (prev_node == null) {\r\n            System.out.println(&quot;The given previous node cannot be null&quot;);\r\n            return;\r\n        }\r\n        Node new_node = new Node(new_data);\r\n        new_node.next = prev_node.next;\r\n        prev_node.next = new_node;\r\n    }\r\n\r\n    public void append(T new_data) {\r\n        Node new_node = new Node(new_data);\r\n        if (head == null) {\r\n            head = new Node(new_data);\r\n            return;\r\n        }\r\n        new_node.next = null;\r\n\r\n        Node last = head;\r\n        while (last.next != null)\r\n            last = last.next;\r\n\r\n        last.next = new_node;\r\n        return;\r\n    }\r\n\r\n    public void printList() {\r\n        Node tnode = head;\r\n        while (tnode != null) {\r\n            tnode = tnode.next;\r\n            System.out.println(tnode);\r\n        }\r\n    }\r\n}\r\n```","title":"Problem with printing own Linked List and implementing 2 methods","body":"<p>I created my own Linked List using nodes, and I have few methods to do.</p>\n<p>Methods in main:</p>\n<pre><code>//List&lt;Person&gt; females = peopleFromWarsaw.getWithFilter(p -&gt; p.getName().endsWith(&quot;a&quot;));\n// Dont know how to implements this methods.\n\n//        ObjectContainer.removeIf(p -&gt; p.getAge() &gt; 50);\n//        peopleFromWarsaw.storeToFile(&quot;youngPeopleFromWarsaw.txt&quot;,\n//                p -&gt; p.getAge() &lt; 30, p -&gt; p.getName() + &quot;;&quot; + p.getAge() + &quot;;&quot; + p.getCity());\n</code></pre>\n<p>At the begging i made a linked list and tried to print elements from list but doesnt work.\nAt first it looks like it doesn't have a method toString but class Person has toString. I guess the program takes the node but I want to print object.\nMaybe u can see what is the problem with code, basically nodes and methods in Object Container are fine.</p>\n<p>Secondly i have a problem with implementing methods in main (getWithFilter,removeIf and storeToFile)\nNo matter how I write method in ObjectContainer, always intelij tells me that cannot use lambda and underline p.getName (p -&gt; p.getName().endsWith(&quot;a&quot;));\nIn class Person i have getters and setters with fields name,age.</p>\n<p>Maybe someone could explain how properly write this methods ?</p>\n<pre><code>public class ObjectContainer&lt;T&gt; {\n\n    private Node head;\n    private Node tail;\n    private final Predicate&lt;T&gt; predicate;\n\n    public ObjectContainer(Predicate&lt;T&gt; predicate) {\n        this.predicate = predicate;\n    }\n\n    static class Node {\n\n        private Object object;\n        private Node next;\n\n        Node(Object object) {\n            this.object = object;\n        }\n    }\n\n    public void add(T object) {\n        if (!predicate.test(object)) {\n            throw new IllegalArgumentException(&quot;Element can not be added&quot;);\n        }\n        Node newNode = new Node(object);\n        if (head == null) {\n            head = newNode;\n            tail = newNode;\n        } else {\n            tail.next = newNode;\n            tail = newNode;\n        }\n    }\n\n    public int size() {\n        int count = 0;\n        Node current = head;\n\n        while (current != null) {\n            count++;\n            current = current.next;\n        }\n        return count;\n    }\n\n    public void push(T new_data) {\n        Node new_node = new Node(new_data);\n        new_node.next = head;\n        head = new_node;\n    }\n\n    public void insertAfter(Node prev_node, T new_data) {\n        if (prev_node == null) {\n            System.out.println(&quot;The given previous node cannot be null&quot;);\n            return;\n        }\n        Node new_node = new Node(new_data);\n        new_node.next = prev_node.next;\n        prev_node.next = new_node;\n    }\n\n    public void append(T new_data) {\n        Node new_node = new Node(new_data);\n        if (head == null) {\n            head = new Node(new_data);\n            return;\n        }\n        new_node.next = null;\n\n        Node last = head;\n        while (last.next != null)\n            last = last.next;\n\n        last.next = new_node;\n        return;\n    }\n\n    public void printList() {\n        Node tnode = head;\n        while (tnode != null) {\n            tnode = tnode.next;\n            System.out.println(tnode);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","caching","redis","spring-session"],"answers":[{"tags":[],"owner":{"account_id":5336230,"reputation":5228,"user_id":4255107,"accept_rate":50,"display_name":"sonus21"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664889517,"creation_date":1664889517,"answer_id":73948513,"question_id":73934858,"body_markdown":"Implement Your cache as this, in this you&#39;ve to track when this key was used. \r\n\r\n\r\n    public class SmartCache {\r\n        private RedisTemplate&lt;String, Object&gt; template;\r\n        private String lastUsedTracker = &quot;__inactive-duration::&quot;;\r\n    \r\n        public SmartCache(RedisTemplate&lt;String, Object&gt; template) {\r\n            this.template = template;\r\n        }\r\n    \r\n        private String lastUsedKey(String key) {\r\n            return lastUsedTracker + key;\r\n        }\r\n    \r\n        public void put(String key, Object val, long maxRetentionTime, long maxInactiveDuration) {\r\n            template.opsForValue().set(key, val, maxRetentionTime, TimeUnit.MILLISECONDS);\r\n            template.opsForValue().set(lastUsedKey(key), maxInactiveDuration, maxInactiveDuration, TimeUnit.MILLISECONDS);\r\n        }\r\n    \r\n        public Object get(String key) {\r\n            // ttl has expired\r\n            Object val = template.opsForValue().get(key);\r\n            if (val == null) {\r\n                return null;\r\n            }\r\n    \r\n            // if key was inactive then nothing to be done\r\n            Object inactiveDuration = template.opsForValue().get(lastUsedKey(key));\r\n            if (inactiveDuration == null) {\r\n                return null;\r\n            }\r\n            \r\n            // reset ttl of inactive key as its used\r\n            Long ttl = (Long) inactiveDuration;\r\n            template.opsForValue().set(lastUsedKey(key), ttl, ttl, TimeUnit.MILLISECONDS);\r\n            return val;\r\n        }\r\n    \r\n    }","title":"Implement maxIdle timout session using Redis","body":"<p>Implement Your cache as this, in this you've to track when this key was used.</p>\n<pre><code>public class SmartCache {\n    private RedisTemplate&lt;String, Object&gt; template;\n    private String lastUsedTracker = &quot;__inactive-duration::&quot;;\n\n    public SmartCache(RedisTemplate&lt;String, Object&gt; template) {\n        this.template = template;\n    }\n\n    private String lastUsedKey(String key) {\n        return lastUsedTracker + key;\n    }\n\n    public void put(String key, Object val, long maxRetentionTime, long maxInactiveDuration) {\n        template.opsForValue().set(key, val, maxRetentionTime, TimeUnit.MILLISECONDS);\n        template.opsForValue().set(lastUsedKey(key), maxInactiveDuration, maxInactiveDuration, TimeUnit.MILLISECONDS);\n    }\n\n    public Object get(String key) {\n        // ttl has expired\n        Object val = template.opsForValue().get(key);\n        if (val == null) {\n            return null;\n        }\n\n        // if key was inactive then nothing to be done\n        Object inactiveDuration = template.opsForValue().get(lastUsedKey(key));\n        if (inactiveDuration == null) {\n            return null;\n        }\n        \n        // reset ttl of inactive key as its used\n        Long ttl = (Long) inactiveDuration;\n        template.opsForValue().set(lastUsedKey(key), ttl, ttl, TimeUnit.MILLISECONDS);\n        return val;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":13292597,"reputation":466,"user_id":13353721,"display_name":"rahul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":191,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664889517,"creation_date":1664796988,"question_id":73934858,"body_markdown":"Like Spring Session with Redis persistence, how to achieve max idle timeout using Redis as cache? I need to have both global timeout and max inactive timeout. The global timeout can be achieved using `EXPIRE` command in Redis, but for max inactive time how Spring Session with Redis is implemented and is there any optimal solution using Redis to implement max inactive time?","title":"Implement maxIdle timout session using Redis","body":"<p>Like Spring Session with Redis persistence, how to achieve max idle timeout using Redis as cache? I need to have both global timeout and max inactive timeout. The global timeout can be achieved using <code>EXPIRE</code> command in Redis, but for max inactive time how Spring Session with Redis is implemented and is there any optimal solution using Redis to implement max inactive time?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":8761405,"reputation":1504,"user_id":6551263,"display_name":"Chetan Ahirrao"},"score":0,"creation_date":1664860415,"post_id":73943286,"comment_id":130561030,"body_markdown":"Hey Yogesh. I am not sure what your question is. As you know, it is not possible to run multiple applications simultaneously on the same port. So, please clarify what do you want to achieve","body":"Hey Yogesh. I am not sure what your question is. As you know, it is not possible to run multiple applications simultaneously on the same port. So, please clarify what do you want to achieve"},{"owner":{"account_id":5862834,"reputation":3736,"user_id":6066470,"display_name":"Nick"},"score":0,"creation_date":1664870172,"post_id":73943286,"comment_id":130563315,"body_markdown":"By default spring boot starts embedded tomcat. But you can start tomcat first and then run all your projects inside it\n\nTry this tutorial https://www.baeldung.com/spring-boot-war-tomcat-deploy","body":"By default spring boot starts embedded tomcat. But you can start tomcat first and then run all your projects inside it  Try this tutorial <a href=\"https://www.baeldung.com/spring-boot-war-tomcat-deploy\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-war-tomcat-deploy</a>"}],"answers":[{"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664889297,"creation_date":1664889297,"answer_id":73948472,"question_id":73943286,"body_markdown":"You can change the packaging to war and then run the wars in an app server like Tomcat.\r\n\r\n1. Change packaging from jar to war\r\n2. extend SpringBootServletInitializer \r\n3. Mark tomcat dependency as provided\r\n\r\n\r\nPlease find the official documentation here:\r\nhttps://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.traditional-deployment","title":"How to run multiple microservices in one jvm","body":"<p>You can change the packaging to war and then run the wars in an app server like Tomcat.</p>\n<ol>\n<li>Change packaging from jar to war</li>\n<li>extend SpringBootServletInitializer</li>\n<li>Mark tomcat dependency as provided</li>\n</ol>\n<p>Please find the official documentation here:\n<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.traditional-deployment\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.traditional-deployment</a></p>\n"}],"owner":{"account_id":26521710,"reputation":11,"user_id":20155282,"display_name":"Yogesh A"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":486,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1664889297,"creation_date":1664859625,"question_id":73943286,"body_markdown":"**I have around 10 microservices which are spring boot applications, how to run those microservices in one jvm in a single port.** ","title":"How to run multiple microservices in one jvm","body":"<p><strong>I have around 10 microservices which are spring boot applications, how to run those microservices in one jvm in a single port.</strong></p>\n"},{"tags":["java","algorithm","caching","concurrency","lru"],"answers":[{"tags":[],"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664888963,"creation_date":1664888963,"answer_id":73948389,"question_id":73946389,"body_markdown":"ConcurrentHashMap already takes a lot of memory.  Your linked list would add to that, and is difficult to make lock-free.\r\n\r\nHowever much memory you want to devote to this cache, you can make better use of it by using an *approximately* LRU cache with a more efficient representation.\r\n\r\nHere are a couple ways you can do this:\r\n\r\nSharded Cache\r\n-------------\r\n\r\nLet&#39;s say you want your cache to support N items.  Pick a prime P around sqrt(N), and then divide your cache into P LRU caches, each of which support N/P items.\r\n\r\nEach shard would be a fully synchronized LRU cache based on `LinkedHashMap`.  Your get procedure would first use `((key.hashCode() * SOME_ODD_NUMBER) &amp; Integer.MAX_VALUE) % P` to choose the shard for the key, and then use the cache in that shard.\r\n\r\nN-Way Cache\r\n-----------\r\n\r\nLet&#39;s say you want your cache to support N items.  Instead of using a hashmap and list, just allocate a table of size N.\r\n\r\nEvery time you allocate a new item, give it a &quot;timestamp&quot; using, say, `AtomicLong.getAndIncrement()&#39;.\r\n\r\nTo perform a get, hash the full key hash code into 4 different slots.  Check each slot, and if you don&#39;t find your key, then put a new entry one of those slots -- either an empty one or the one with the smallest timestamp.\r\n\r\nNote that unless you&#39;re careful, duplicate entries will appear in your cache with low frequency.  If that&#39;s not harmless, then you have to be careful to prevent it.","title":"Concurrent LRU cache using a linked list","body":"<p>ConcurrentHashMap already takes a lot of memory.  Your linked list would add to that, and is difficult to make lock-free.</p>\n<p>However much memory you want to devote to this cache, you can make better use of it by using an <em>approximately</em> LRU cache with a more efficient representation.</p>\n<p>Here are a couple ways you can do this:</p>\n<h2>Sharded Cache</h2>\n<p>Let's say you want your cache to support N items.  Pick a prime P around sqrt(N), and then divide your cache into P LRU caches, each of which support N/P items.</p>\n<p>Each shard would be a fully synchronized LRU cache based on <code>LinkedHashMap</code>.  Your get procedure would first use <code>((key.hashCode() * SOME_ODD_NUMBER) &amp; Integer.MAX_VALUE) % P</code> to choose the shard for the key, and then use the cache in that shard.</p>\n<h2>N-Way Cache</h2>\n<p>Let's say you want your cache to support N items.  Instead of using a hashmap and list, just allocate a table of size N.</p>\n<p>Every time you allocate a new item, give it a &quot;timestamp&quot; using, say, `AtomicLong.getAndIncrement()'.</p>\n<p>To perform a get, hash the full key hash code into 4 different slots.  Check each slot, and if you don't find your key, then put a new entry one of those slots -- either an empty one or the one with the smallest timestamp.</p>\n<p>Note that unless you're careful, duplicate entries will appear in your cache with low frequency.  If that's not harmless, then you have to be careful to prevent it.</p>\n"}],"owner":{"account_id":5839568,"reputation":2586,"user_id":4601598,"accept_rate":69,"display_name":"super.t"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664888963,"creation_date":1664878669,"question_id":73946389,"body_markdown":"Suppose I have a concurrent cache that looks like this:\r\n\r\n```\r\npublic class ConcurrentCache {\r\n        private final DAO dao;\r\n        private final Map&lt;Integer, CompletableFuture&lt;Account&gt;&gt; cache = new ConcurrentHashMap&lt;&gt;();\r\n        \r\n        ConcurrentCache(DAO dao) {\r\n            this.dao = dao;\r\n        }\r\n\r\n        Account get(int id) throws ExecutionException, InterruptedException {\r\n            CompletableFuture&lt;Account&gt; f = cache.putIfAbsent(id, new CompletableFuture&lt;&gt;());\r\n\r\n            if (f == null) {\r\n                Account a = dao.get(id);\r\n                if (a == null)\r\n                    a = new Account(-1);\r\n                cache.get(id).complete(a);\r\n            }\r\n            \r\n            Account a = cache.get(id).get();\r\n\r\n            return a.id == -1 ? null : a;\r\n        }\r\n\r\n        interface DAO {\r\n            Account get(int id);\r\n        }\r\n\r\n        static class Account {\r\n            final int id;\r\n\r\n            Account(int id) {\r\n                this.id = id;\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nSeveral threads can call `ConcurrentCache#get` concurrently without interfering with each other, given that they&#39;re requesting different accounts.\r\n\r\nNow suppose I want to implement a LRU eviction policy in this cache using a linked list. This means that in every `ConcurrentCache#get` call I need to modify the linked list moving the requested account&#39;s node to the front of the linked list. Surely I need to synchronise this modification compromising the concurrency - one thread modifying the list will cause the others to block regardless the account id they&#39;re querying:\r\n\r\n```\r\nAccount a = cache.get(id).get();\r\n\r\n//move the account&#39;s node to the front\r\n\r\nsynchronized (this) {\r\n unlink(node);\r\n insert(node);\r\n}\r\n\r\nreturn a.id == -1 ? null : a;\r\n```\r\n\r\nIt&#39;s not as bad it could have been had I synchronised the entire method. Is it as good as I can do?\r\n\r\nAnother question, how do I actually evict least recently used accounts? Suppose I did it in my synchronized block:\r\n\r\n```\r\nsynchronized (this) {\r\n unlink(n);\r\n insert(n);\r\n if (cache.size() &gt; limit) {\r\n  cache.remove(tail.prev.id);\r\n  unlink(tail.prev);\r\n }\r\n}\r\n```\r\n\r\nThe problem is that `cache.size()` can be larger than `limit` by more than 1. I can imagine removing the difference `cache.size() - limit` from the map in a loop but then there can be brief periods when the cache grows without bounds. A way to avoid such spikes is using a semaphore with `limit` number of permits, but again it might compromise the concurrency when the cache is full and the clients keep querying accounts which are not in the cache. What alternatives approaches can be used here?","title":"Concurrent LRU cache using a linked list","body":"<p>Suppose I have a concurrent cache that looks like this:</p>\n<pre><code>public class ConcurrentCache {\n        private final DAO dao;\n        private final Map&lt;Integer, CompletableFuture&lt;Account&gt;&gt; cache = new ConcurrentHashMap&lt;&gt;();\n        \n        ConcurrentCache(DAO dao) {\n            this.dao = dao;\n        }\n\n        Account get(int id) throws ExecutionException, InterruptedException {\n            CompletableFuture&lt;Account&gt; f = cache.putIfAbsent(id, new CompletableFuture&lt;&gt;());\n\n            if (f == null) {\n                Account a = dao.get(id);\n                if (a == null)\n                    a = new Account(-1);\n                cache.get(id).complete(a);\n            }\n            \n            Account a = cache.get(id).get();\n\n            return a.id == -1 ? null : a;\n        }\n\n        interface DAO {\n            Account get(int id);\n        }\n\n        static class Account {\n            final int id;\n\n            Account(int id) {\n                this.id = id;\n            }\n        }\n    }\n</code></pre>\n<p>Several threads can call <code>ConcurrentCache#get</code> concurrently without interfering with each other, given that they're requesting different accounts.</p>\n<p>Now suppose I want to implement a LRU eviction policy in this cache using a linked list. This means that in every <code>ConcurrentCache#get</code> call I need to modify the linked list moving the requested account's node to the front of the linked list. Surely I need to synchronise this modification compromising the concurrency - one thread modifying the list will cause the others to block regardless the account id they're querying:</p>\n<pre><code>Account a = cache.get(id).get();\n\n//move the account's node to the front\n\nsynchronized (this) {\n unlink(node);\n insert(node);\n}\n\nreturn a.id == -1 ? null : a;\n</code></pre>\n<p>It's not as bad it could have been had I synchronised the entire method. Is it as good as I can do?</p>\n<p>Another question, how do I actually evict least recently used accounts? Suppose I did it in my synchronized block:</p>\n<pre><code>synchronized (this) {\n unlink(n);\n insert(n);\n if (cache.size() &gt; limit) {\n  cache.remove(tail.prev.id);\n  unlink(tail.prev);\n }\n}\n</code></pre>\n<p>The problem is that <code>cache.size()</code> can be larger than <code>limit</code> by more than 1. I can imagine removing the difference <code>cache.size() - limit</code> from the map in a loop but then there can be brief periods when the cache grows without bounds. A way to avoid such spikes is using a semaphore with <code>limit</code> number of permits, but again it might compromise the concurrency when the cache is full and the clients keep querying accounts which are not in the cache. What alternatives approaches can be used here?</p>\n"},{"tags":["java","function","nodes","doubly-linked-list","sentinel"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1664870942,"post_id":73944804,"comment_id":130563545,"body_markdown":"For generics make `SLList` generic too and use the type for the nodes, e.g. `SLList&lt;T&gt;` + `Node&lt;T&gt; firstsen` etc.. Note that I changed `IntNode` to `Node` because your node only takes an `int` instead of the generic type `T`. For `Node&lt;T&gt;` also use `private T data`.","body":"For generics make <code>SLList</code> generic too and use the type for the nodes, e.g. <code>SLList&lt;T&gt;</code> + <code>Node&lt;T&gt; firstsen</code> etc.. Note that I changed <code>IntNode</code> to <code>Node</code> because your node only takes an <code>int</code> instead of the generic type <code>T</code>. For <code>Node&lt;T&gt;</code> also use <code>private T data</code>."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1664871076,"post_id":73944804,"comment_id":130563590,"body_markdown":"For adding a node at the start think about how a doubly linked list works: `firstsen` refers to the first node, `lastsen` to the last. Assuming the list is empty just point both to the new node. If there already is a node then you need to do the following: 1) make a temporary reference to the first node in your method, 2) replace `firstsen` with the new node, 3) change the new node&#39;s `next` to refer to the &quot;old first&quot; node using the reference from step 1. 4) change the &quot;old first&quot; node&#39;s `previous` to refer to the new node.","body":"For adding a node at the start think about how a doubly linked list works: <code>firstsen</code> refers to the first node, <code>lastsen</code> to the last. Assuming the list is empty just point both to the new node. If there already is a node then you need to do the following: 1) make a temporary reference to the first node in your method, 2) replace <code>firstsen</code> with the new node, 3) change the new node&#39;s <code>next</code> to refer to the &quot;old first&quot; node using the reference from step 1. 4) change the &quot;old first&quot; node&#39;s <code>previous</code> to refer to the new node."},{"owner":{"account_id":22999051,"reputation":285,"user_id":17123296,"display_name":"Nutnicha"},"score":0,"creation_date":1664872200,"post_id":73944804,"comment_id":130563932,"body_markdown":"I think the problem I have is implementing the code. I&#39;m not sure what to put in for sentinels. My guess would be firstsen.next = data; firstsen.previous = T.  I doubt that I&#39;m correct so, can you please explain how to implement it? Thank you","body":"I think the problem I have is implementing the code. I&#39;m not sure what to put in for sentinels. My guess would be firstsen.next = data; firstsen.previous = T.  I doubt that I&#39;m correct so, can you please explain how to implement it? Thank you"},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":1,"creation_date":1664873386,"post_id":73944804,"comment_id":130564267,"body_markdown":"*&quot;I&#39;m trying to add a new node&quot;*: I don&#39;t see any trace of an attempt, yet there are so many Q&amp;A on this site (let alone on the internet) about adding nodes to linked lists, that it feels like you should first look at those and start writing code accordingly...","body":"<i>&quot;I&#39;m trying to add a new node&quot;</i>: I don&#39;t see any trace of an attempt, yet there are so many Q&amp;A on this site (let alone on the internet) about adding nodes to linked lists, that it feels like you should first look at those and start writing code accordingly..."}],"answers":[{"comments":[{"owner":{"account_id":22999051,"reputation":285,"user_id":17123296,"display_name":"Nutnicha"},"score":0,"creation_date":1664878370,"post_id":73945811,"comment_id":130565844,"body_markdown":"can you please explain the purpose of the self referencing nodes and also how did you declare node in sentinel.next = node?","body":"can you please explain the purpose of the self referencing nodes and also how did you declare node in sentinel.next = node?"},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1664883891,"post_id":73945811,"comment_id":130567557,"body_markdown":"Because this uses just one sentinel, the node *after* that sentinel is the sentinel itself (the list is empty). So it needs to be self-referencing. In `addFirst`, the variable `node` is declared on the line just above `sentinel.next = node`. It is a node instance that holds the data that you want to insert.","body":"Because this uses just one sentinel, the node <i>after</i> that sentinel is the sentinel itself (the list is empty). So it needs to be self-referencing. In <code>addFirst</code>, the variable <code>node</code> is declared on the line just above <code>sentinel.next = node</code>. It is a node instance that holds the data that you want to insert."},{"owner":{"account_id":22999051,"reputation":285,"user_id":17123296,"display_name":"Nutnicha"},"score":0,"creation_date":1664888322,"post_id":73945811,"comment_id":130569059,"body_markdown":"so if I want to create another function, for instance addLast, where I will add to the end of the list, do I have to create another self referencing node?","body":"so if I want to create another function, for instance addLast, where I will add to the end of the list, do I have to create another self referencing node?"},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1664888386,"post_id":73945811,"comment_id":130569084,"body_markdown":"No, you use the same sentinel node, but then insert the node *before* the sentinel instead of *after* it. I added the code for it to my answer.","body":"No, you use the same sentinel node, but then insert the node <i>before</i> the sentinel instead of <i>after</i> it. I added the code for it to my answer."},{"owner":{"account_id":22999051,"reputation":285,"user_id":17123296,"display_name":"Nutnicha"},"score":0,"creation_date":1664888595,"post_id":73945811,"comment_id":130569160,"body_markdown":"Actually, can u pls explain what this does, so that I can be able to do this myself later on                                                                                                           \nsentinel.previous = node;\nnode.previous.next = node;","body":"Actually, can u pls explain what this does, so that I can be able to do this myself later on                                                                                                            sentinel.previous = node; node.previous.next = node;"},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":1,"creation_date":1664891780,"post_id":73945811,"comment_id":130570412,"body_markdown":"It establishes the two links from the two neighbors towards the new node. The new node is inserted between `sentinel.previous`  and `sentinel` (see the arguments passed to the `IntNode` constructor), so the neighbor *after* the new node is `sentinel`. So `sentinel` needs its `previous` reference to refer to the new node, so `sentinel.previous = node`. A similar reasoning (but for the other neighbor) explains the other assignment.","body":"It establishes the two links from the two neighbors towards the new node. The new node is inserted between <code>sentinel.previous</code>  and <code>sentinel</code> (see the arguments passed to the <code>IntNode</code> constructor), so the neighbor <i>after</i> the new node is <code>sentinel</code>. So <code>sentinel</code> needs its <code>previous</code> reference to refer to the new node, so <code>sentinel.previous = node</code>. A similar reasoning (but for the other neighbor) explains the other assignment."}],"tags":[],"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664888444,"creation_date":1664875755,"answer_id":73945811,"question_id":73944804,"body_markdown":"Make `SLList` generic as `SLList&lt;T&gt;`, and replace any occurrence of `int` with `T`. \r\n\r\nWhen using the sentinel pattern in a doubly linked list, realise that you only need *one* sentinel node, which will serve for marking both the end end the beginning of the list. It starts out as a self-referencing node. For this purpose it would be elegant to provide a constructor without arguments.\r\n\r\nIn `addFirst` you obviously create a node instance. In total 4 node references need to get initialised when inserting a new node. Two of those are set by the `IntNode` constructor (these are references *from* the new node to its neighbors), and two more references need to be set in already existing nodes (these are references *to* the new node from its neighbors).\r\n\r\nThe new node reference thus gets assigned to `sentinel.next` and to `node.next.previous` (where `node` is the new instance).\r\n\r\nHere is how that would look:\r\n\r\n```\r\npublic class SLList&lt;T&gt;{ // Add Generics here\r\n    private class IntNode {\r\n        private T data;\r\n        private IntNode previous;\r\n        private IntNode next;\r\n\r\n        public IntNode (T data, IntNode previous, IntNode next) {\r\n            this.data = data;\r\n            this.previous = previous;\r\n            this.next = next;\r\n        }\r\n        \r\n        public IntNode () { // Self-referencing node\r\n            next = previous = this;\r\n        }\r\n    }\r\n    \r\n    IntNode sentinel; // One sentinel can serve both purposes\r\n\r\n    public SLList(){\r\n        sentinel = new IntNode(); // Self referencing previous/next\r\n    }\r\n\r\n    public void addFirst(T data) {\r\n        IntNode node = new IntNode(data, sentinel, sentinel.next);\r\n        sentinel.next = node;\r\n        node.next.previous = node;\r\n    }\r\n\r\n    public void addLast(T data) {\r\n        IntNode node = new IntNode(data, sentinel.previous, sentinel);\r\n        sentinel.previous = node;\r\n        node.previous.next = node;\r\n    }\r\n}\r\n```","title":"How to add a new node at the start of a doubly linked list?","body":"<p>Make <code>SLList</code> generic as <code>SLList&lt;T&gt;</code>, and replace any occurrence of <code>int</code> with <code>T</code>.</p>\n<p>When using the sentinel pattern in a doubly linked list, realise that you only need <em>one</em> sentinel node, which will serve for marking both the end end the beginning of the list. It starts out as a self-referencing node. For this purpose it would be elegant to provide a constructor without arguments.</p>\n<p>In <code>addFirst</code> you obviously create a node instance. In total 4 node references need to get initialised when inserting a new node. Two of those are set by the <code>IntNode</code> constructor (these are references <em>from</em> the new node to its neighbors), and two more references need to be set in already existing nodes (these are references <em>to</em> the new node from its neighbors).</p>\n<p>The new node reference thus gets assigned to <code>sentinel.next</code> and to <code>node.next.previous</code> (where <code>node</code> is the new instance).</p>\n<p>Here is how that would look:</p>\n<pre><code>public class SLList&lt;T&gt;{ // Add Generics here\n    private class IntNode {\n        private T data;\n        private IntNode previous;\n        private IntNode next;\n\n        public IntNode (T data, IntNode previous, IntNode next) {\n            this.data = data;\n            this.previous = previous;\n            this.next = next;\n        }\n        \n        public IntNode () { // Self-referencing node\n            next = previous = this;\n        }\n    }\n    \n    IntNode sentinel; // One sentinel can serve both purposes\n\n    public SLList(){\n        sentinel = new IntNode(); // Self referencing previous/next\n    }\n\n    public void addFirst(T data) {\n        IntNode node = new IntNode(data, sentinel, sentinel.next);\n        sentinel.next = node;\n        node.next.previous = node;\n    }\n\n    public void addLast(T data) {\n        IntNode node = new IntNode(data, sentinel.previous, sentinel);\n        sentinel.previous = node;\n        node.previous.next = node;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":22999051,"reputation":285,"user_id":17123296,"display_name":"Nutnicha"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":392,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73945811,"answer_count":1,"score":0,"last_activity_date":1664888444,"creation_date":1664870729,"question_id":73944804,"body_markdown":"I have created a class SLList where I&#39;m going to take a doubly linked list `SLlist` and I&#39;m trying to find how to add a new node **of any type** to the start of that doubly linked list.\r\n\r\nIn order to do this, I have made some sentinels `firstsen` and `lastsen` since I was told that this approach would be a lot better to do.\r\n\r\nNow, as said earlier, I&#39;m trying to add a new node to the start of that doubly linked list using a function `public void addFirst(T) {}`.\r\n\r\nHere is my code so far...\r\n\r\n    public class SLList{\r\n        private class IntNode&lt;T&gt; {\r\n            private int data;\r\n            private IntNode previous;\r\n            private IntNode next;\r\n    \r\n            public IntNode (int data, IntNode previous, IntNode next) {\r\n                this.data = data;\r\n                this.previous = previous;\r\n                this.next = next;\r\n    \r\n            }\r\n        }\r\n        IntNode firstsen;\r\n        IntNode Lastsen;\r\n        public SLList(){\r\n            firstsen = new IntNode(0,null,null );\r\n            Lastsen = new IntNode(0, firstsen, null);\r\n            firstsen.next = Lastsen;\r\n    \r\n    \r\n        }\r\n        public void addFirst(T) {}\r\n    \r\n    \r\n    }\r\n\r\nHowever, I&#39;m stumped on what I have to do next because I&#39;m new to object oriented programming, so if anyone would be willing to help, that would be really helpful. \r\n\r\nFurthermore, I would also appreciate if anyone could explain how to edit my code to accept **any generic type**\r\n\r\nThank you,\r\nDave","title":"How to add a new node at the start of a doubly linked list?","body":"<p>I have created a class SLList where I'm going to take a doubly linked list <code>SLlist</code> and I'm trying to find how to add a new node <strong>of any type</strong> to the start of that doubly linked list.</p>\n<p>In order to do this, I have made some sentinels <code>firstsen</code> and <code>lastsen</code> since I was told that this approach would be a lot better to do.</p>\n<p>Now, as said earlier, I'm trying to add a new node to the start of that doubly linked list using a function <code>public void addFirst(T) {}</code>.</p>\n<p>Here is my code so far...</p>\n<pre><code>public class SLList{\n    private class IntNode&lt;T&gt; {\n        private int data;\n        private IntNode previous;\n        private IntNode next;\n\n        public IntNode (int data, IntNode previous, IntNode next) {\n            this.data = data;\n            this.previous = previous;\n            this.next = next;\n\n        }\n    }\n    IntNode firstsen;\n    IntNode Lastsen;\n    public SLList(){\n        firstsen = new IntNode(0,null,null );\n        Lastsen = new IntNode(0, firstsen, null);\n        firstsen.next = Lastsen;\n\n\n    }\n    public void addFirst(T) {}\n\n\n}\n</code></pre>\n<p>However, I'm stumped on what I have to do next because I'm new to object oriented programming, so if anyone would be willing to help, that would be really helpful.</p>\n<p>Furthermore, I would also appreciate if anyone could explain how to edit my code to accept <strong>any generic type</strong></p>\n<p>Thank you,\nDave</p>\n"},{"tags":["java","cpu"],"comments":[{"owner":{"account_id":3948167,"reputation":755,"user_id":3259789,"display_name":"rAndom69"},"score":0,"creation_date":1557941269,"post_id":56154598,"comment_id":98938728,"body_markdown":"Are these your servers which get pegged or customer(s)? For some time we had similar issues and as temporary (half-a-year) workaround customer had recommened nightly restart lol. (around 10m endpoints this specific shit has). If they are yours it&#39;s even simplier to ignore issue noone can really solve but JVM (from my pow)","body":"Are these your servers which get pegged or customer(s)? For some time we had similar issues and as temporary (half-a-year) workaround customer had recommened nightly restart lol. (around 10m endpoints this specific shit has). If they are yours it&#39;s even simplier to ignore issue noone can really solve but JVM (from my pow)"},{"owner":{"account_id":52375,"reputation":6473,"user_id":156522,"accept_rate":83,"display_name":"vsingh"},"score":0,"creation_date":1560778630,"post_id":56154598,"comment_id":99836828,"body_markdown":"Added an update on what was discovered recently. Still could not figure why that leads to CPU getting stuck.","body":"Added an update on what was discovered recently. Still could not figure why that leads to CPU getting stuck."},{"owner":{"account_id":72205,"reputation":2651,"user_id":208576,"accept_rate":100,"display_name":"AdrianRM"},"score":0,"creation_date":1597937907,"post_id":56154598,"comment_id":112301910,"body_markdown":"We are facing this problem when we try to generate Zip files which are being written in the OutputStream of the HttpServletResponse.\nDoes anybody know if this is still an issue in Java 11? The bug JDK-8193682 only lists the versions 8, 9 and 10.","body":"We are facing this problem when we try to generate Zip files which are being written in the OutputStream of the HttpServletResponse. Does anybody know if this is still an issue in Java 11? The bug JDK-8193682 only lists the versions 8, 9 and 10."},{"owner":{"account_id":72205,"reputation":2651,"user_id":208576,"accept_rate":100,"display_name":"AdrianRM"},"score":0,"creation_date":1598262375,"post_id":56154598,"comment_id":112390540,"body_markdown":"I can answer myself: The problem still exists in Java 11","body":"I can answer myself: The problem still exists in Java 11"}],"answers":[{"tags":[],"owner":{"account_id":52375,"reputation":6473,"user_id":156522,"accept_rate":83,"display_name":"vsingh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1588250395,"creation_date":1588250395,"answer_id":61523603,"question_id":56154598,"body_markdown":"I want to post an update to this problem that has bugged us for years. We had an inititiave to migrate static content to CDN underway. After CDN was implemented and all static resources was served from a different server, the ZipStream problem was resolved. Although the research showed that the problem was more for dynamic content and not static, I am not sure how the problem got solved. Maybe someone who is reading this answer can explain me how this has got fixed. ","title":"CPU gets pegged - Problem with java.util.zip.ZStreamRef","body":"<p>I want to post an update to this problem that has bugged us for years. We had an inititiave to migrate static content to CDN underway. After CDN was implemented and all static resources was served from a different server, the ZipStream problem was resolved. Although the research showed that the problem was more for dynamic content and not static, I am not sure how the problem got solved. Maybe someone who is reading this answer can explain me how this has got fixed. </p>\n"},{"comments":[{"owner":{"account_id":52375,"reputation":6473,"user_id":156522,"accept_rate":83,"display_name":"vsingh"},"score":0,"creation_date":1598374230,"post_id":63509677,"comment_id":112436085,"body_markdown":"Do you think that this defect is still open? But I could not find why it happens randomly.","body":"Do you think that this defect is still open? But I could not find why it happens randomly."},{"owner":{"account_id":72205,"reputation":2651,"user_id":208576,"accept_rate":100,"display_name":"AdrianRM"},"score":0,"creation_date":1598457601,"post_id":63509677,"comment_id":112467492,"body_markdown":"I think so. The bug JDK-8193682 is still open, and I don&#39;t see any meaningful changes in the source code:\nhttps://github.com/openjdk/jdk/commits/master/src/java.base/share/native/libzip/Deflater.c\nhttps://github.com/openjdk/jdk/commits/master/src/java.base/share/classes/java/util/zip/Deflater.java\nhttps://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/zip/DeflaterOutputStream.java","body":"I think so. The bug JDK-8193682 is still open, and I don&#39;t see any meaningful changes in the source code: <a href=\"https://github.com/openjdk/jdk/commits/master/src/java.base/share/native/libzip/Deflater.c\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk/commits/master/src/java.base/share/&hellip;</a> <a href=\"https://github.com/openjdk/jdk/commits/master/src/java.base/share/classes/java/util/zip/Deflater.java\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk/commits/master/src/java.base/share/&hellip;</a> <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/zip/DeflaterOutputStream.java\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk/blob/master/src/java.base/share/class&zwnj;&#8203;es/&hellip;</a>"}],"tags":[],"owner":{"account_id":72205,"reputation":2651,"user_id":208576,"accept_rate":100,"display_name":"AdrianRM"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1664888444,"creation_date":1597941973,"answer_id":63509677,"question_id":56154598,"body_markdown":"**EDIT  4 Oct 2022**\r\n\r\nIt seems that the problem has been fixed and applied to OpenJDK 11 and 17: https://bugs.openjdk.org/browse/JDK-8193682\r\n\r\n**Original answer**\r\n\r\nAs I said in a comment before, we are facing this problem when we try to generate Zip files which are being written in the `OutputStream` of the `HttpServletResponse` through a `ZipOutputStream`.\r\n\r\nThe reason for the cores running at 100% is because of three (under certain conditions)infinite loops in ZipOutputStream(`closeEntry()`) and DeflaterOutputStream(`write()` and `finish()`).\r\nThese infinite loops look like this:\r\n\r\n    while (!def.finished()) {\r\n        deflate();\r\n    }\r\nWhere `def` is a `java.util.zip.Deflater`.\r\n\r\nIf I understand right, this is the problem in [JDK-8193682][1]. There is a workaround class there which overwrites the `deflate` method of `ZipOutputStream`.\r\n\r\nI am going to try to use a class based on that workaround, which accepts a timeout to be checked in the `deflate` method. I hope not to produce resource leaks with this approach.\r\n\r\nRelated question: https://stackoverflow.com/questions/6584765/thread-locking-when-flushing-jsp-file\r\n\r\n\r\n  [1]: https://bugs.openjdk.java.net/browse/JDK-8193682","title":"CPU gets pegged - Problem with java.util.zip.ZStreamRef","body":"<p><strong>EDIT  4 Oct 2022</strong></p>\n<p>It seems that the problem has been fixed and applied to OpenJDK 11 and 17: <a href=\"https://bugs.openjdk.org/browse/JDK-8193682\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8193682</a></p>\n<p><strong>Original answer</strong></p>\n<p>As I said in a comment before, we are facing this problem when we try to generate Zip files which are being written in the <code>OutputStream</code> of the <code>HttpServletResponse</code> through a <code>ZipOutputStream</code>.</p>\n<p>The reason for the cores running at 100% is because of three (under certain conditions)infinite loops in ZipOutputStream(<code>closeEntry()</code>) and DeflaterOutputStream(<code>write()</code> and <code>finish()</code>).\nThese infinite loops look like this:</p>\n<pre><code>while (!def.finished()) {\n    deflate();\n}\n</code></pre>\n<p>Where <code>def</code> is a <code>java.util.zip.Deflater</code>.</p>\n<p>If I understand right, this is the problem in <a href=\"https://bugs.openjdk.java.net/browse/JDK-8193682\" rel=\"nofollow noreferrer\">JDK-8193682</a>. There is a workaround class there which overwrites the <code>deflate</code> method of <code>ZipOutputStream</code>.</p>\n<p>I am going to try to use a class based on that workaround, which accepts a timeout to be checked in the <code>deflate</code> method. I hope not to produce resource leaks with this approach.</p>\n<p>Related question: <a href=\"https://stackoverflow.com/questions/6584765/thread-locking-when-flushing-jsp-file\">Thread locking when flushing jsp file</a></p>\n"}],"owner":{"account_id":52375,"reputation":6473,"user_id":156522,"accept_rate":83,"display_name":"vsingh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1234,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1664888444,"creation_date":1557940692,"question_id":56154598,"body_markdown":"We are seeing this intermittent issue in production. The CPU gets pegged at 50% (2 core CPU) randomly and it never comes back. Only option is to restart the server. \r\nThis is how CPU appears from Dynatrace\r\n\r\n[![enter image description here][1]][1]\r\nThis is how the thread dump looks when we analyzed through dynatrace.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n[![Apache tomcat thread stuck][3]][3]\r\n\r\nThrough my research, it appears there was a jdk defect\r\n\r\n    Calling &#39;java.util.zip.Deflater.finish()&#39; prematurely hangs the application. \r\n    The application is spinning consuming one cpu\r\n\r\nhttps://bugs.openjdk.java.net/browse/JDK-8060193\r\n\r\nOnly happens randomly when for some multiple filters are involved.\r\n\r\nI was able to reproduce this using test class in above jira on CentOs vm which has JDK &quot;1.8.0_201&quot; \r\nThat was surprising because as per the docs and ticket, this has been fixed.\r\n\r\nOn further research, find similar defect opened again in jdk.\r\n\r\nhttps://bugs.openjdk.java.net/browse/JDK-8193682\r\n\r\nNow the team is not willing to work on it unless someone could reproduce it.\r\nSince it is happening randomly in production, I am not sure how to reproduce it. The test class from https://bugs.openjdk.java.net/browse/JDK-8060193 still has issues. IS this even a valid test case?\r\nIf this is valid then there will be problems every time we send compressed data.\r\n\r\n - Our run time JRE is Jdk 1.8  \r\n - Compression is at tomcat, not at load balancer.\r\n\r\nAny pointers as to why is this happening and how we can solve this?\r\n\r\nUpdate:\r\nIn one of the libraries we are using, it was throwing an exception\r\n*Malformed UTF-8 character (unexpected non-continuation byte 0x00, immediately after start byte 0xfd)*\r\n\r\nLastName, First’Name\r\nAs we can see, this is not a regular apostrophe.We can have this by copy pasting from word which auto corrects a regular apostrophe to this funky character. \r\n\r\nOur reproducer did threw an error but CPU was not getting stuck. I think it happens under high volume and traffic.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7zxZW.png\r\n  [2]: https://i.stack.imgur.com/6mTk1.png\r\n  [3]: https://i.stack.imgur.com/6YOm1.png","title":"CPU gets pegged - Problem with java.util.zip.ZStreamRef","body":"<p>We are seeing this intermittent issue in production. The CPU gets pegged at 50% (2 core CPU) randomly and it never comes back. Only option is to restart the server. \nThis is how CPU appears from Dynatrace</p>\n\n<p><a href=\"https://i.stack.imgur.com/7zxZW.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/7zxZW.png\" alt=\"enter image description here\"></a>\nThis is how the thread dump looks when we analyzed through dynatrace.</p>\n\n<p><a href=\"https://i.stack.imgur.com/6mTk1.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/6mTk1.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/6YOm1.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/6YOm1.png\" alt=\"Apache tomcat thread stuck\"></a></p>\n\n<p>Through my research, it appears there was a jdk defect</p>\n\n<pre><code>Calling 'java.util.zip.Deflater.finish()' prematurely hangs the application. \nThe application is spinning consuming one cpu\n</code></pre>\n\n<p><a href=\"https://bugs.openjdk.java.net/browse/JDK-8060193\" rel=\"noreferrer\">https://bugs.openjdk.java.net/browse/JDK-8060193</a></p>\n\n<p>Only happens randomly when for some multiple filters are involved.</p>\n\n<p>I was able to reproduce this using test class in above jira on CentOs vm which has JDK \"1.8.0_201\" \nThat was surprising because as per the docs and ticket, this has been fixed.</p>\n\n<p>On further research, find similar defect opened again in jdk.</p>\n\n<p><a href=\"https://bugs.openjdk.java.net/browse/JDK-8193682\" rel=\"noreferrer\">https://bugs.openjdk.java.net/browse/JDK-8193682</a></p>\n\n<p>Now the team is not willing to work on it unless someone could reproduce it.\nSince it is happening randomly in production, I am not sure how to reproduce it. The test class from <a href=\"https://bugs.openjdk.java.net/browse/JDK-8060193\" rel=\"noreferrer\">https://bugs.openjdk.java.net/browse/JDK-8060193</a> still has issues. IS this even a valid test case?\nIf this is valid then there will be problems every time we send compressed data.</p>\n\n<ul>\n<li>Our run time JRE is Jdk 1.8  </li>\n<li>Compression is at tomcat, not at load balancer.</li>\n</ul>\n\n<p>Any pointers as to why is this happening and how we can solve this?</p>\n\n<p>Update:\nIn one of the libraries we are using, it was throwing an exception\n<em>Malformed UTF-8 character (unexpected non-continuation byte 0x00, immediately after start byte 0xfd)</em></p>\n\n<p>LastName, First’Name\nAs we can see, this is not a regular apostrophe.We can have this by copy pasting from word which auto corrects a regular apostrophe to this funky character. </p>\n\n<p>Our reproducer did threw an error but CPU was not getting stuck. I think it happens under high volume and traffic.</p>\n"},{"tags":["java","spring-boot","jenkins","testcontainers","localstack"],"comments":[{"owner":{"account_id":1488715,"reputation":1432,"user_id":1396362,"display_name":"Kevin Wittek"},"score":0,"creation_date":1664441741,"post_id":73881179,"comment_id":130474174,"body_markdown":"I see you created it as an issue in the repository as well. I&#39;ll continue interacting there :)","body":"I see you created it as an issue in the repository as well. I&#39;ll continue interacting there :)"},{"owner":{"account_id":2066878,"reputation":729,"user_id":1842240,"accept_rate":50,"display_name":"tiefenauer"},"score":0,"creation_date":1664459173,"post_id":73881179,"comment_id":130480583,"body_markdown":"That&#39;s right, out of despair I cross-posted this as an issue to the repository :): https://github.com/testcontainers/testcontainers-java/issues/5869","body":"That&#39;s right, out of despair I cross-posted this as an issue to the repository :): <a href=\"https://github.com/testcontainers/testcontainers-java/issues/5869\" rel=\"nofollow noreferrer\">github.com/testcontainers/testcontainers-java/issues/5869</a>"}],"answers":[{"comments":[{"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"score":0,"creation_date":1686252312,"post_id":73948160,"comment_id":134777317,"body_markdown":"I also faced same issue and now after adding proxy I am getting 403 forbidden with S3. I think this is coming because of proxy. Do you know how to fix this?","body":"I also faced same issue and now after adding proxy I am getting 403 forbidden with S3. I think this is coming because of proxy. Do you know how to fix this?"}],"tags":[],"owner":{"account_id":2066878,"reputation":729,"user_id":1842240,"accept_rate":50,"display_name":"tiefenauer"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1664887985,"creation_date":1664887985,"answer_id":73948160,"question_id":73881179,"body_markdown":"Turns out it was an issue with the company proxy after all. For some reason, LocalStack needs to download dependencies at runtime:\r\n\r\nFrom https://docs.localstack.cloud/localstack/configuration/:\r\n\r\n&gt; OUTBOUND_HTTP_PROXY: HTTP Proxy used for downloads of runtime dependencies and connections outside LocalStack itself\r\n\r\nSince our Jenkins is behind a corporate proxy, I had to set the following environment variables: `SKIP_SSL_CERT_DOWNLOAD`, `OUTBOUND_HTTP_PROXY`, `OUTBOUND_HTTPS_PROXY`. On top of that I had to hardcode the version to `1.1.0` instead of using the `latest` tag.\r\n\r\nSo my code now looks like this:\r\n\r\n```kotlin\r\n    LocalStackContainer(DockerImageName.parse(&quot;localstack/localstack:1.1.0&quot;))\r\n      .withServices(LocalStackContainer.Service.S3)\r\n      .withEnv(&quot;SKIP_SSL_CERT_DOWNLOAD&quot;, &quot;true&quot;)\r\n      .withEnv(&quot;OUTBOUND_HTTP_PROXY&quot;, &quot;http://{proxy}:{port}&quot;)\r\n      .withEnv(&quot;OUTBOUND_HTTPS_PROXY&quot;, &quot;http://{proxy}:{port}&quot;)\r\n      .apply { start() }\r\n```\r\n\r\n","title":"Integration testing with Testcontainers/Localstack and Spring Boot: Set directory for temporary files","body":"<p>Turns out it was an issue with the company proxy after all. For some reason, LocalStack needs to download dependencies at runtime:</p>\n<p>From <a href=\"https://docs.localstack.cloud/localstack/configuration/\" rel=\"nofollow noreferrer\">https://docs.localstack.cloud/localstack/configuration/</a>:</p>\n<blockquote>\n<p>OUTBOUND_HTTP_PROXY: HTTP Proxy used for downloads of runtime dependencies and connections outside LocalStack itself</p>\n</blockquote>\n<p>Since our Jenkins is behind a corporate proxy, I had to set the following environment variables: <code>SKIP_SSL_CERT_DOWNLOAD</code>, <code>OUTBOUND_HTTP_PROXY</code>, <code>OUTBOUND_HTTPS_PROXY</code>. On top of that I had to hardcode the version to <code>1.1.0</code> instead of using the <code>latest</code> tag.</p>\n<p>So my code now looks like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>    LocalStackContainer(DockerImageName.parse(&quot;localstack/localstack:1.1.0&quot;))\n      .withServices(LocalStackContainer.Service.S3)\n      .withEnv(&quot;SKIP_SSL_CERT_DOWNLOAD&quot;, &quot;true&quot;)\n      .withEnv(&quot;OUTBOUND_HTTP_PROXY&quot;, &quot;http://{proxy}:{port}&quot;)\n      .withEnv(&quot;OUTBOUND_HTTPS_PROXY&quot;, &quot;http://{proxy}:{port}&quot;)\n      .apply { start() }\n</code></pre>\n"}],"owner":{"account_id":2066878,"reputation":729,"user_id":1842240,"accept_rate":50,"display_name":"tiefenauer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3570,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73948160,"answer_count":1,"score":2,"last_activity_date":1664887985,"creation_date":1664367039,"question_id":73881179,"body_markdown":"I am using Testcontainers&#39; (Localstack Module)[https://www.testcontainers.org/modules/localstack/] for advanced integration testing with Spring Boot, replacing the AmazonS3 client with the one from Localstack. I have set up my integration test roughly as follows (only relevant parts):\r\n\r\n```kotlin\r\n// FurnitureDetailsControllerIT.kt\r\n\r\n@Testcontainers\r\n@SpringBootTest\r\n@ExtendWith(SpringExtension::class)\r\n@AutoConfigureMockMvc\r\n@DirtiesContext\r\nclass FurnitureDetailsControllerIT {\r\n\r\n  @Autowired\r\n  private val amazonS3: AmazonS3? = null\r\n\r\n  \r\n  companion object {\r\n    @Container\r\n    var localStack: LocalStackContainer =\r\n      LocalStackContainer(DockerImageName.parse(&quot;localstack/localstack:latest&quot;)).withServices(LocalStackContainer.Service.S3)\r\n\r\n    @JvmStatic\r\n    @DynamicPropertySource\r\n    fun properties(registry: DynamicPropertyRegistry) {\r\n      registry.add(&quot;cloud.aws.s3.endpoint&quot;) { localStack.getEndpointOverride(LocalStackContainer.Service.S3) }\r\n      registry.add(&quot;cloud.aws.credentials.access-key&quot;) { localStack.accessKey }\r\n      registry.add(&quot;cloud.aws.credentials.secret-key&quot;) { localStack.secretKey }\r\n    }\r\n  }\r\n(...)\r\n}\r\n```\r\n\r\nEverything runs fine when running the integration test locally (from my IDE or command line using Maven), meaning I can see the localstack container spinning up in the logs:\r\n\r\n```\r\n13:54:16.360 [main] INFO &#128051; [remote-docker.artifactory.mycompany.com/localstack/localstack:0.13.0] - Container remote-docker.artifactory.mycompany.com/localstack/localstack:0.13.0 started in PT4.6099665S\r\n\r\n```\r\n\r\nHowever, when running on Jenkins, the build fails because of an error message.\r\n\r\n```\r\n\r\n2022-09-28 14:27:19.971  INFO 1185 --- [           main] ?.a.s.com/localstack/localstack:latest]  : Container remote-docker.artifactory.mycompany.com/localstack/localstack:latest is starting: ec383bda85f2636c3bef3f6b3938ac169636e4542244e3067b5184b6b03a6e35\r\n\r\n2022-09-28 14:28:20.612 ERROR 1185 --- [           main] ?.a.s.com/localstack/localstack:latest]  : Could not start container\r\n\r\norg.testcontainers.containers.ContainerLaunchException: Timed out waiting for log output matching &#39;.*Ready\\.\r\n```\r\n\r\nI guess it has to do with the temporary directory needed by Localstack. When running on my Windows machine I have to manually click on &quot;Share It&quot; before the test resumes:\r\n\r\n[![Docker Desktop notification for file sharing (Windows)][1]][1]\r\n\r\nI suppose since the test is failing on Jenkins (because I cannot click on &quot;Share It&quot; there) starting the container will eventually time out and the test will fail.\r\n\r\nI read that you can configure the directory using the `TMPDIR` environment variable as described in https://docs.localstack.cloud/localstack/configuration/. But using that variable is deprecated. What is the best way to set the temp directory to Jenkins working directory without having to explicitly conset to sharing that directory?\r\n\r\nNote: I am already using Testcontainers&#39; [MongoBD module](https://www.testcontainers.org/modules/databases/mongodb/) successfully, which starts a dockerized MongoDB instance. That works flawlessly, so I am not sure if it&#39;s an issue with Testcontainers or Localstack.\r\n\r\n  [1]: https://i.stack.imgur.com/O4Akk.png","title":"Integration testing with Testcontainers/Localstack and Spring Boot: Set directory for temporary files","body":"<p>I am using Testcontainers' (Localstack Module)[https://www.testcontainers.org/modules/localstack/] for advanced integration testing with Spring Boot, replacing the AmazonS3 client with the one from Localstack. I have set up my integration test roughly as follows (only relevant parts):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// FurnitureDetailsControllerIT.kt\n\n@Testcontainers\n@SpringBootTest\n@ExtendWith(SpringExtension::class)\n@AutoConfigureMockMvc\n@DirtiesContext\nclass FurnitureDetailsControllerIT {\n\n  @Autowired\n  private val amazonS3: AmazonS3? = null\n\n  \n  companion object {\n    @Container\n    var localStack: LocalStackContainer =\n      LocalStackContainer(DockerImageName.parse(&quot;localstack/localstack:latest&quot;)).withServices(LocalStackContainer.Service.S3)\n\n    @JvmStatic\n    @DynamicPropertySource\n    fun properties(registry: DynamicPropertyRegistry) {\n      registry.add(&quot;cloud.aws.s3.endpoint&quot;) { localStack.getEndpointOverride(LocalStackContainer.Service.S3) }\n      registry.add(&quot;cloud.aws.credentials.access-key&quot;) { localStack.accessKey }\n      registry.add(&quot;cloud.aws.credentials.secret-key&quot;) { localStack.secretKey }\n    }\n  }\n(...)\n}\n</code></pre>\n<p>Everything runs fine when running the integration test locally (from my IDE or command line using Maven), meaning I can see the localstack container spinning up in the logs:</p>\n<pre><code>13:54:16.360 [main] INFO 🐳 [remote-docker.artifactory.mycompany.com/localstack/localstack:0.13.0] - Container remote-docker.artifactory.mycompany.com/localstack/localstack:0.13.0 started in PT4.6099665S\n\n</code></pre>\n<p>However, when running on Jenkins, the build fails because of an error message.</p>\n<pre><code>\n2022-09-28 14:27:19.971  INFO 1185 --- [           main] ?.a.s.com/localstack/localstack:latest]  : Container remote-docker.artifactory.mycompany.com/localstack/localstack:latest is starting: ec383bda85f2636c3bef3f6b3938ac169636e4542244e3067b5184b6b03a6e35\n\n2022-09-28 14:28:20.612 ERROR 1185 --- [           main] ?.a.s.com/localstack/localstack:latest]  : Could not start container\n\norg.testcontainers.containers.ContainerLaunchException: Timed out waiting for log output matching '.*Ready\\.\n</code></pre>\n<p>I guess it has to do with the temporary directory needed by Localstack. When running on my Windows machine I have to manually click on &quot;Share It&quot; before the test resumes:</p>\n<p><a href=\"https://i.stack.imgur.com/O4Akk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O4Akk.png\" alt=\"Docker Desktop notification for file sharing (Windows)\" /></a></p>\n<p>I suppose since the test is failing on Jenkins (because I cannot click on &quot;Share It&quot; there) starting the container will eventually time out and the test will fail.</p>\n<p>I read that you can configure the directory using the <code>TMPDIR</code> environment variable as described in <a href=\"https://docs.localstack.cloud/localstack/configuration/\" rel=\"nofollow noreferrer\">https://docs.localstack.cloud/localstack/configuration/</a>. But using that variable is deprecated. What is the best way to set the temp directory to Jenkins working directory without having to explicitly conset to sharing that directory?</p>\n<p>Note: I am already using Testcontainers' <a href=\"https://www.testcontainers.org/modules/databases/mongodb/\" rel=\"nofollow noreferrer\">MongoBD module</a> successfully, which starts a dockerized MongoDB instance. That works flawlessly, so I am not sure if it's an issue with Testcontainers or Localstack.</p>\n"},{"tags":["java","kotlin","rabbitmq","spring-cloud-stream"],"comments":[{"owner":{"account_id":445335,"reputation":5970,"user_id":837717,"display_name":"Oleg Zhurakousky"},"score":0,"creation_date":1664896676,"post_id":73948134,"comment_id":130572380,"body_markdown":"What version of s-c-stream you are using?","body":"What version of s-c-stream you are using?"},{"owner":{"account_id":26525235,"reputation":1,"user_id":20158333,"display_name":"Dmitriy"},"score":0,"creation_date":1664897606,"post_id":73948134,"comment_id":130572719,"body_markdown":"spring-cloud-dependencies 2021.0.1","body":"spring-cloud-dependencies 2021.0.1"},{"owner":{"account_id":445335,"reputation":5970,"user_id":837717,"display_name":"Oleg Zhurakousky"},"score":0,"creation_date":1664972316,"post_id":73948134,"comment_id":130589692,"body_markdown":"It&#39;s an issue that I am addressing as we speak - https://github.com/spring-cloud/spring-cloud-stream/issues/2522. I will also attempt to back-port  it to 3.2.x","body":"It&#39;s an issue that I am addressing as we speak - <a href=\"https://github.com/spring-cloud/spring-cloud-stream/issues/2522\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-stream/issues/2522</a>. I will also attempt to back-port  it to 3.2.x"},{"owner":{"account_id":445335,"reputation":5970,"user_id":837717,"display_name":"Oleg Zhurakousky"},"score":0,"creation_date":1664995197,"post_id":73948134,"comment_id":130598099,"body_markdown":"So the issue has been addressed and you can try it with 3.2.6-SNAPSHOT or 4.0.0-SNAPSHOT. We&#39;ll be releasing 3.2.6 (2021.0.5 of spring-cloud) at the end of the month","body":"So the issue has been addressed and you can try it with 3.2.6-SNAPSHOT or 4.0.0-SNAPSHOT. We&#39;ll be releasing 3.2.6 (2021.0.5 of spring-cloud) at the end of the month"}],"owner":{"account_id":26525235,"reputation":1,"user_id":20158333,"display_name":"Dmitriy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664887872,"creation_date":1664887872,"question_id":73948134,"body_markdown":"I want to create two rabbit binder, both use autintefication with TLS.\r\n\r\n\r\n```  \r\n  @Bean\r\n    fun connectionFactoryCustomizer(rabbitProperties: RabbitProperties): ConnectionFactoryCustomizer {\r\n        return if (rabbitProperties.ssl.enabled == true) {\r\n            ConnectionFactoryCustomizer { connectionFactory: ConnectionFactory -&gt;\r\n                connectionFactory.saslConfig = EXTERNAL\r\n            }\r\n        } else {\r\n            ConnectionFactoryCustomizer { connectionFactory: ConnectionFactory -&gt;\r\n                connectionFactory.saslConfig = PLAIN\r\n            }\r\n        }\r\n    }\r\n```\r\napplication.yml\r\n```\r\nrabbitmq:\r\n    ssl:\r\n      enabled: true\r\ncloud:\r\n    stream:\r\n      binders:\r\n        rabbit1:\r\n          type: rabbit\r\n          environment:\r\n            spring:\r\n              rabbitmq:\r\n                host: localhost\r\n                port: 5671\r\n                virtual-host: /\r\n                ssl:\r\n                  enabled: true\r\n                  algorithm: algorithm\r\n                  verify-hostname: true\r\n                  key-store: file:/rabbit\r\n                  key-store-password: keystorepassword\r\n                  trust-store: file:/rabbit\r\n                  trust-store-password: truststorepassword\r\n        rabbit2:\r\n          type: rabbit\r\n          environment:\r\n            spring:\r\n              rabbitmq:\r\n                host: localhost\r\n                port: 5672\r\n                virtual-host: /\r\n                ssl:\r\n                  enabled: true\r\n                  algorithm: algorithm\r\n                  verify-hostname: true\r\n                  key-store: file:/rabbit\r\n                  key-store-password: keystorepassword\r\n                  trust-store: file:/rabbit\r\n                  trust-store-password: truststorepassword\r\n```\r\n\r\nBut I&#39;m getting the error &quot;Login was refused using authentification mechanism PLAIN.&quot;. How to set up multiplier binding with TLS?","title":"ConnectionFactoryCustomizer don&#39;t work with multiple rabbit binder","body":"<p>I want to create two rabbit binder, both use autintefication with TLS.</p>\n<pre><code>  @Bean\n    fun connectionFactoryCustomizer(rabbitProperties: RabbitProperties): ConnectionFactoryCustomizer {\n        return if (rabbitProperties.ssl.enabled == true) {\n            ConnectionFactoryCustomizer { connectionFactory: ConnectionFactory -&gt;\n                connectionFactory.saslConfig = EXTERNAL\n            }\n        } else {\n            ConnectionFactoryCustomizer { connectionFactory: ConnectionFactory -&gt;\n                connectionFactory.saslConfig = PLAIN\n            }\n        }\n    }\n</code></pre>\n<p>application.yml</p>\n<pre><code>rabbitmq:\n    ssl:\n      enabled: true\ncloud:\n    stream:\n      binders:\n        rabbit1:\n          type: rabbit\n          environment:\n            spring:\n              rabbitmq:\n                host: localhost\n                port: 5671\n                virtual-host: /\n                ssl:\n                  enabled: true\n                  algorithm: algorithm\n                  verify-hostname: true\n                  key-store: file:/rabbit\n                  key-store-password: keystorepassword\n                  trust-store: file:/rabbit\n                  trust-store-password: truststorepassword\n        rabbit2:\n          type: rabbit\n          environment:\n            spring:\n              rabbitmq:\n                host: localhost\n                port: 5672\n                virtual-host: /\n                ssl:\n                  enabled: true\n                  algorithm: algorithm\n                  verify-hostname: true\n                  key-store: file:/rabbit\n                  key-store-password: keystorepassword\n                  trust-store: file:/rabbit\n                  trust-store-password: truststorepassword\n</code></pre>\n<p>But I'm getting the error &quot;Login was refused using authentification mechanism PLAIN.&quot;. How to set up multiplier binding with TLS?</p>\n"},{"tags":["java","spring-boot","prometheus","grafana","spring-boot-actuator"],"comments":[{"owner":{"account_id":6158766,"reputation":166,"user_id":4801010,"display_name":"Jodee"},"score":0,"creation_date":1664529927,"post_id":73745786,"comment_id":130497693,"body_markdown":"I know this doesnt answer your question, but I solved this using Aspect to wrap all my RestControllers. Then, I added a counter.increment() (to a dedicated prometheus metric that I created) everytime a call occured. This way I had full control over my metric, so I just initiated all like: my_super_metric { endpoint =&quot;/foo/bar&quot; } with 1. After a while you can query the metric and check the least used (or the ones that have a value of 1 indicating no usage at all).","body":"I know this doesnt answer your question, but I solved this using Aspect to wrap all my RestControllers. Then, I added a counter.increment() (to a dedicated prometheus metric that I created) everytime a call occured. This way I had full control over my metric, so I just initiated all like: my_super_metric { endpoint =&quot;/foo/bar&quot; } with 1. After a while you can query the metric and check the least used (or the ones that have a value of 1 indicating no usage at all)."},{"owner":{"account_id":4756794,"reputation":3150,"user_id":3845362,"accept_rate":62,"display_name":"Edito"},"score":0,"creation_date":1664796297,"post_id":73745786,"comment_id":130545988,"body_markdown":"@Jodee You can add this as a standalone answer with added code examples if you&#39;d like. I considered doing something similar by calling each existing endpoint listed under `/mappings` once. during app startup Then you could treat every endpoint having value `1.0` as never been used. Problem is that we must now treat a `1.0` as some sort of false-positive, we can never tell for sure if the endpoint has been actually called once or if it was part the initial call.","body":"@Jodee You can add this as a standalone answer with added code examples if you&#39;d like. I considered doing something similar by calling each existing endpoint listed under <code>&#47;mappings</code> once. during app startup Then you could treat every endpoint having value <code>1.0</code> as never been used. Problem is that we must now treat a <code>1.0</code> as some sort of false-positive, we can never tell for sure if the endpoint has been actually called once or if it was part the initial call."},{"owner":{"account_id":6158766,"reputation":166,"user_id":4801010,"display_name":"Jodee"},"score":0,"creation_date":1664887144,"post_id":73745786,"comment_id":130568637,"body_markdown":"Maybe a Gauge metric would be more suitable for that, I went with the Counter solution","body":"Maybe a Gauge metric would be more suitable for that, I went with the Counter solution"}],"answers":[{"tags":[],"owner":{"account_id":6158766,"reputation":166,"user_id":4801010,"display_name":"Jodee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664887767,"creation_date":1664887767,"answer_id":73948115,"question_id":73745786,"body_markdown":"I managed to solve this by using an Aspect class that is incrementing a Prometheus counter every time a call is made to one of my GetMapping/PostMapping/PutMapping/DeleteMapping/RequestMapping methods. \r\n\r\n\r\nI used *org.reflections* library to find all my annotated methods \r\n\r\n    @PostConstruct //after bean initialization I initialize the Prometheus counter for each annotated method\r\n    public void postConstruct(){\r\n        for (Method method : getAnnotatedMethods()) {\r\n            Counter.builder(METER_NAME)\r\n                    .tag(&quot;package&quot;, method.getDeclaringClass().getPackageName())\r\n                    .tag(&quot;name&quot; , method.getName())\r\n                    .register(meterRegistry);\r\n        }\r\n    }\r\n\r\n    //used to find all methods with the given annotations\r\n    private HashSet&lt;Method&gt; getAnnotatedMethods(){\r\n        Reflections reflections = new Reflections(&quot;my.super.package&quot;, Scanners.MethodsAnnotated);\r\n        HashSet&lt;Method&gt; methods = new HashSet&lt;&gt;();\r\n        methods.addAll(reflections.getMethodsAnnotatedWith(GetMapping.class));\r\n        methods.addAll(reflections.getMethodsAnnotatedWith(PostMapping.class));\r\n        methods.addAll(reflections.getMethodsAnnotatedWith(PutMapping.class));\r\n        methods.addAll(reflections.getMethodsAnnotatedWith(PatchMapping.class));\r\n        methods.addAll(reflections.getMethodsAnnotatedWith(DeleteMapping.class));\r\n        methods.addAll(reflections.getMethodsAnnotatedWith(RequestMapping.class));\r\n        return methods;\r\n    }\r\n\r\nAnd then I wrapped all the listed annotations with a Pointcut aspect as described here https://stackoverflow.com/questions/42642681/spring-aspectj-before-all-rest-method[enter link description here][1]\r\n\r\n    @Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.RequestMapping) &quot; +\r\n            &quot;|| @annotation(org.springframework.web.bind.annotation.GetMapping)&quot; +\r\n            &quot;|| @annotation(org.springframework.web.bind.annotation.PostMapping)&quot; +\r\n            &quot;|| @annotation(org.springframework.web.bind.annotation.PatchMapping)&quot; +\r\n            &quot;|| @annotation(org.springframework.web.bind.annotation.PutMapping)&quot; +\r\n            &quot;|| @annotation(org.springframework.web.bind.annotation.DeleteMapping)&quot;\r\n    )\r\n    public void mappingAnnotations() {}\r\n\r\n    @AfterReturning(&quot;mappingAnnotations()&quot;)\r\n    public void onExecute(JoinPoint jp) {\r\n        addMetric(jp.getSignature().getDeclaringType().getPackageName(), jp.getSignature().getName());\r\n    }\r\n\r\n\r\n    private void addMetric(String packageName, String methodName){\r\n        LOGGER.trace(&quot;Incrementing [{}] with [{}] and [{}]&quot;, METER_NAME, packageName, methodName);\r\n        Counter.builder(METER_NAME)\r\n                .tag(&quot;package&quot;, packageName)\r\n                .tag(&quot;name&quot; , methodName)\r\n                .register(meterRegistry).increment();\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/42642681/spring-aspectj-before-all-rest-method\r\n\r\nI am not a Prometheus expert so I guess there will be more sophisticated ways/counter types to use is such scenario. This implementation was more than enough for what I wanted so I sticked with it.","title":"How to list unused endpoints under Prometheus (w/ Spring Boot)?","body":"<p>I managed to solve this by using an Aspect class that is incrementing a Prometheus counter every time a call is made to one of my GetMapping/PostMapping/PutMapping/DeleteMapping/RequestMapping methods.</p>\n<p>I used <em>org.reflections</em> library to find all my annotated methods</p>\n<pre><code>@PostConstruct //after bean initialization I initialize the Prometheus counter for each annotated method\npublic void postConstruct(){\n    for (Method method : getAnnotatedMethods()) {\n        Counter.builder(METER_NAME)\n                .tag(&quot;package&quot;, method.getDeclaringClass().getPackageName())\n                .tag(&quot;name&quot; , method.getName())\n                .register(meterRegistry);\n    }\n}\n\n//used to find all methods with the given annotations\nprivate HashSet&lt;Method&gt; getAnnotatedMethods(){\n    Reflections reflections = new Reflections(&quot;my.super.package&quot;, Scanners.MethodsAnnotated);\n    HashSet&lt;Method&gt; methods = new HashSet&lt;&gt;();\n    methods.addAll(reflections.getMethodsAnnotatedWith(GetMapping.class));\n    methods.addAll(reflections.getMethodsAnnotatedWith(PostMapping.class));\n    methods.addAll(reflections.getMethodsAnnotatedWith(PutMapping.class));\n    methods.addAll(reflections.getMethodsAnnotatedWith(PatchMapping.class));\n    methods.addAll(reflections.getMethodsAnnotatedWith(DeleteMapping.class));\n    methods.addAll(reflections.getMethodsAnnotatedWith(RequestMapping.class));\n    return methods;\n}\n</code></pre>\n<p>And then I wrapped all the listed annotations with a Pointcut aspect as described here <a href=\"https://stackoverflow.com/questions/42642681/spring-aspectj-before-all-rest-method%5Benter\">https://stackoverflow.com/questions/42642681/spring-aspectj-before-all-rest-method[enter</a> link description here]<a href=\"https://stackoverflow.com/questions/42642681/spring-aspectj-before-all-rest-method\">1</a></p>\n<pre><code>@Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.RequestMapping) &quot; +\n        &quot;|| @annotation(org.springframework.web.bind.annotation.GetMapping)&quot; +\n        &quot;|| @annotation(org.springframework.web.bind.annotation.PostMapping)&quot; +\n        &quot;|| @annotation(org.springframework.web.bind.annotation.PatchMapping)&quot; +\n        &quot;|| @annotation(org.springframework.web.bind.annotation.PutMapping)&quot; +\n        &quot;|| @annotation(org.springframework.web.bind.annotation.DeleteMapping)&quot;\n)\npublic void mappingAnnotations() {}\n\n@AfterReturning(&quot;mappingAnnotations()&quot;)\npublic void onExecute(JoinPoint jp) {\n    addMetric(jp.getSignature().getDeclaringType().getPackageName(), jp.getSignature().getName());\n}\n\n\nprivate void addMetric(String packageName, String methodName){\n    LOGGER.trace(&quot;Incrementing [{}] with [{}] and [{}]&quot;, METER_NAME, packageName, methodName);\n    Counter.builder(METER_NAME)\n            .tag(&quot;package&quot;, packageName)\n            .tag(&quot;name&quot; , methodName)\n            .register(meterRegistry).increment();\n}\n</code></pre>\n<p>I am not a Prometheus expert so I guess there will be more sophisticated ways/counter types to use is such scenario. This implementation was more than enough for what I wanted so I sticked with it.</p>\n"}],"owner":{"account_id":4756794,"reputation":3150,"user_id":3845362,"accept_rate":62,"display_name":"Edito"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":475,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1664887767,"creation_date":1663336076,"question_id":73745786,"body_markdown":"I&#39;m working on a huge legacy project with tons of legacy and new endpoints.\r\n\r\nWe are planning on deleting old endpoints that are unused. We use Grafana to graph counts on how much an endpoint is being used. \r\n\r\nProblem is Prometheus only lists endpoints that have at least been called once. Therefore the unused ones are not being shown in Grafana.\r\n```\r\n# HELP http_server_requests_seconds  \r\n# TYPE http_server_requests_seconds summary\r\nhttp_server_requests_seconds_count{application=&quot;foo&quot;,...,uri=&quot;/api/internal/v5/foos/{..}/...&quot;,} 822.0\r\nhttp_server_requests_seconds_sum{application=&quot;foo&quot;,...,uri=&quot;/api/internal/v5/foos/{..}/...&quot;,} 13.827411282\r\nhttp_server_requests_seconds_count{application=&quot;foo&quot;,...,uri=&quot;/api/internal/v4/foos/...&quot;,} 475.0\r\nhttp_server_requests_seconds_sum{application=&quot;foo&quot;,...,uri=&quot;/api/internal/v4/foos/...&quot;,} 4.885103028\r\nhttp_server_requests_seconds_count{application=&quot;foo&quot;,...,uri=&quot;/api/ui/...&quot;,} 1496.0\r\nhttp_server_requests_seconds_sum{application=&quot;foo&quot;,...,uri=&quot;/api/ui/...&quot;,} 1.638166633\r\nhttp_server_requests_seconds_count{application=&quot;foo&quot;,...,uri=&quot;/...&quot;,} 30589.0\r\nhttp_server_requests_seconds_sum{application=&quot;foo&quot;,...,uri=&quot;/...&quot;,} 23.555870127\r\nhttp_server_requests_seconds_count{application=&quot;foo&quot;,...,uri=&quot;/api/internal/v5/foos/{..}/...&quot;,} 4.0\r\nhttp_server_requests_seconds_sum{application=&quot;foo&quot;,...,uri=&quot;/api/internal/v5/foos/{..}/...&quot;,} 2.474261611\r\nhttp_server_requests_seconds_count{application=&quot;foo&quot;,...,uri=&quot;/prometheus&quot;,} 165998.0\r\nhttp_server_requests_seconds_sum{application=&quot;foo&quot;,...,uri=&quot;/prometheus&quot;,} 1652.047452397\r\n```\r\n\r\nIs there a way I can include unused endpoints, so that they are shown as:\r\n```\r\nhttp_server_requests_seconds_count{application=&quot;foo&quot;,...,uri=&quot;/api/internal/v5/foos/{..}/...&quot;,} 0.0\r\nhttp_server_requests_seconds_count{application=&quot;foo&quot;,...,uri=&quot;/api/internal/v4/foos/...&quot;,} 0.0\r\n```\r\n\r\nEvery endpoint would have been called once in it&#39;s history, but we only added prometheus metrics recently, so we can&#39;t go back to the beginnings of time.\r\n\r\nThanks in advance!","title":"How to list unused endpoints under Prometheus (w/ Spring Boot)?","body":"<p>I'm working on a huge legacy project with tons of legacy and new endpoints.</p>\n<p>We are planning on deleting old endpoints that are unused. We use Grafana to graph counts on how much an endpoint is being used.</p>\n<p>Problem is Prometheus only lists endpoints that have at least been called once. Therefore the unused ones are not being shown in Grafana.</p>\n<pre><code># HELP http_server_requests_seconds  \n# TYPE http_server_requests_seconds summary\nhttp_server_requests_seconds_count{application=&quot;foo&quot;,...,uri=&quot;/api/internal/v5/foos/{..}/...&quot;,} 822.0\nhttp_server_requests_seconds_sum{application=&quot;foo&quot;,...,uri=&quot;/api/internal/v5/foos/{..}/...&quot;,} 13.827411282\nhttp_server_requests_seconds_count{application=&quot;foo&quot;,...,uri=&quot;/api/internal/v4/foos/...&quot;,} 475.0\nhttp_server_requests_seconds_sum{application=&quot;foo&quot;,...,uri=&quot;/api/internal/v4/foos/...&quot;,} 4.885103028\nhttp_server_requests_seconds_count{application=&quot;foo&quot;,...,uri=&quot;/api/ui/...&quot;,} 1496.0\nhttp_server_requests_seconds_sum{application=&quot;foo&quot;,...,uri=&quot;/api/ui/...&quot;,} 1.638166633\nhttp_server_requests_seconds_count{application=&quot;foo&quot;,...,uri=&quot;/...&quot;,} 30589.0\nhttp_server_requests_seconds_sum{application=&quot;foo&quot;,...,uri=&quot;/...&quot;,} 23.555870127\nhttp_server_requests_seconds_count{application=&quot;foo&quot;,...,uri=&quot;/api/internal/v5/foos/{..}/...&quot;,} 4.0\nhttp_server_requests_seconds_sum{application=&quot;foo&quot;,...,uri=&quot;/api/internal/v5/foos/{..}/...&quot;,} 2.474261611\nhttp_server_requests_seconds_count{application=&quot;foo&quot;,...,uri=&quot;/prometheus&quot;,} 165998.0\nhttp_server_requests_seconds_sum{application=&quot;foo&quot;,...,uri=&quot;/prometheus&quot;,} 1652.047452397\n</code></pre>\n<p>Is there a way I can include unused endpoints, so that they are shown as:</p>\n<pre><code>http_server_requests_seconds_count{application=&quot;foo&quot;,...,uri=&quot;/api/internal/v5/foos/{..}/...&quot;,} 0.0\nhttp_server_requests_seconds_count{application=&quot;foo&quot;,...,uri=&quot;/api/internal/v4/foos/...&quot;,} 0.0\n</code></pre>\n<p>Every endpoint would have been called once in it's history, but we only added prometheus metrics recently, so we can't go back to the beginnings of time.</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"score":0,"creation_date":1664888459,"post_id":73947930,"comment_id":130569111,"body_markdown":"Do you have any custom preprocessing or filters which could remove new line character? By default it should stay. Which version of `Jackson` do you use?","body":"Do you have any custom preprocessing or filters which could remove new line character? By default it should stay. Which version of <code>Jackson</code> do you use?"},{"owner":{"account_id":17122673,"reputation":137,"user_id":12390562,"display_name":"Broshet"},"score":0,"creation_date":1664888921,"post_id":73947930,"comment_id":130569283,"body_markdown":"In our configuration we have &quot;jackson: serialization.indent_output: true&quot; and we have also XSS protection in spring boot for prevent from injection ...","body":"In our configuration we have &quot;jackson: serialization.indent_output: true&quot; and we have also XSS protection in spring boot for prevent from injection ..."},{"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"score":0,"creation_date":1664889365,"post_id":73947930,"comment_id":130569470,"body_markdown":"`indent_output` is used only during serialisation process. I would set a breakpoint in &quot;XSS protection&quot; module and debug it, maybe there is a logic which removes new lines. You can always create a demo project using `Spring` and `Jackson` in versions you use in your real project and try to test out this behaviour. If in demo new lines are preserved it means in your business project there is a customisation which removes them.","body":"<code>indent_output</code> is used only during serialisation process. I would set a breakpoint in &quot;XSS protection&quot; module and debug it, maybe there is a logic which removes new lines. You can always create a demo project using <code>Spring</code> and <code>Jackson</code> in versions you use in your real project and try to test out this behaviour. If in demo new lines are preserved it means in your business project there is a customisation which removes them."}],"owner":{"account_id":17122673,"reputation":137,"user_id":12390562,"display_name":"Broshet"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":277,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664887446,"creation_date":1664886849,"question_id":73947930,"body_markdown":"We have a front call api with a json containing a String with carriage return &quot;\\n&quot;.\r\n\r\nBut, when the java spring application get it after deserialization, all \\n has disappeared.\r\n\r\nCan you help me pls ?\r\n\r\nThe JSON Send :\r\n  \r\n\r\n    {\r\n    ...\r\n        description: &quot;Line \\nNewLine1\\n\\nNewLine2&quot;\r\n    ...\r\n    }\r\n\r\nThe API\r\n\r\n    enter code here\r\n        @PutMapping(&quot;/v1/myapi&quot;)\r\n    public MyDTO save(@RequestBody MyDTO myDTO) {\r\n        return this.myService.save(myDTO);\r\n    }\r\n\r\nThe DTO : \r\n\r\n    @ApiModel(description = &quot;DTO &quot;)\r\n    public class MyDTO implements Serializable {\r\n\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    @ApiModelProperty(value = &quot;L&#39;id&quot;)\r\n    private Long id;\r\n\r\n\r\n    @Size(max = 4000)\r\n    @ApiModelProperty(value = &quot;La description&quot;)\r\n    private String description;\r\n\r\nThe DTO content after deserialization\r\n\r\n\r\n    description = &quot;Line NewLine1 NewLine2&quot;\r\n\r\n","title":"Jackson Deserialize String remove \\n","body":"<p>We have a front call api with a json containing a String with carriage return &quot;\\n&quot;.</p>\n<p>But, when the java spring application get it after deserialization, all \\n has disappeared.</p>\n<p>Can you help me pls ?</p>\n<p>The JSON Send :</p>\n<pre><code>{\n...\n    description: &quot;Line \\nNewLine1\\n\\nNewLine2&quot;\n...\n}\n</code></pre>\n<p>The API</p>\n<pre><code>enter code here\n    @PutMapping(&quot;/v1/myapi&quot;)\npublic MyDTO save(@RequestBody MyDTO myDTO) {\n    return this.myService.save(myDTO);\n}\n</code></pre>\n<p>The DTO :</p>\n<pre><code>@ApiModel(description = &quot;DTO &quot;)\npublic class MyDTO implements Serializable {\n\nprivate static final long serialVersionUID = 1L;\n\n@ApiModelProperty(value = &quot;L'id&quot;)\nprivate Long id;\n\n\n@Size(max = 4000)\n@ApiModelProperty(value = &quot;La description&quot;)\nprivate String description;\n</code></pre>\n<p>The DTO content after deserialization</p>\n<pre><code>description = &quot;Line NewLine1 NewLine2&quot;\n</code></pre>\n"},{"tags":["java","json","jackson","jackson-databind","jackson2"],"answers":[{"tags":[],"owner":{"account_id":1726806,"reputation":13951,"user_id":4790924,"accept_rate":67,"display_name":"Sharon Ben Asher"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664881101,"creation_date":1664880700,"answer_id":73946783,"question_id":73946598,"body_markdown":"Jackson is able to parse any json into a map where value is any object. you can then inquire on the type of the map value\r\n\r\n    Map&lt;String, Object&gt; map = new ObjectMapper().readValue(jsonInput, Map.class);\r\n\tObject value = map.get(&quot;simple&quot;);\r\n\tif (value instanceof Collection) { // will return false for null\r\n\t\tCollection&lt;Simple&gt; simples = (Collection&lt;Simple&gt;)value;\r\n\t}\r\n\telse if (value instanceof Simple) {\r\n\t\tSimple simple = (Simple)value;\r\n\t}\r\n\telse {\r\n\t\tSystem.err.println(&quot;unrecognized&quot;);\r\n\t}\r\n\r\n\r\n","title":"how to make java class behave like a normal object and list-of-object at runtime and as per need?","body":"<p>Jackson is able to parse any json into a map where value is any object. you can then inquire on the type of the map value</p>\n<pre><code>Map&lt;String, Object&gt; map = new ObjectMapper().readValue(jsonInput, Map.class);\nObject value = map.get(&quot;simple&quot;);\nif (value instanceof Collection) { // will return false for null\n    Collection&lt;Simple&gt; simples = (Collection&lt;Simple&gt;)value;\n}\nelse if (value instanceof Simple) {\n    Simple simple = (Simple)value;\n}\nelse {\n    System.err.println(&quot;unrecognized&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664884010,"creation_date":1664881621,"answer_id":73946971,"question_id":73946598,"body_markdown":"You can use [`JsonNode.isArray()`](https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/JsonNode.html#isArray()) (or `JsonNode.isObject()`) to perform this check.\r\n\r\nThen you can parse the node into a list with [`ObjectReader.readValue()`](https://fasterxml.github.io/jackson-databind/javadoc/2.8/com/fasterxml/jackson/databind/ObjectReader.html#readValue(com.fasterxml.jackson.databind.JsonNode)) or into a POJO using [`ObjectMapper.treeToValue()`](https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html#treeToValue(com.fasterxml.jackson.core.TreeNode,%20java.lang.Class)).\r\n\r\n```\r\nString myJson = &quot;&quot;&quot;\r\n    {&quot;simple&quot; : {&quot;name&quot;:&quot;c&quot;, &quot;email&quot; : &quot;c@z.com&quot;} }\r\n&quot;&quot;&quot;;\r\n    \r\nObjectMapper mapper = new ObjectMapper();\r\nJsonNode node = mapper.readTree(myJson);\r\n\r\nif (node.isArray()) {\r\n    ObjectReader reader = mapper.readerFor(new TypeReference&lt;List&lt;Simple&gt;&gt;() {});\r\n    List&lt;Simple&gt; list = reader.readValue(node);\r\n\r\n    // do something with a list\r\n} else {\r\n    Simple pojo = mapper.treeToValue(node, Simple.class);\r\n\r\n    // do something else with a single object\r\n}\r\n```","title":"how to make java class behave like a normal object and list-of-object at runtime and as per need?","body":"<p>You can use <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/JsonNode.html#isArray()\" rel=\"nofollow noreferrer\"><code>JsonNode.isArray()</code></a> (or <code>JsonNode.isObject()</code>) to perform this check.</p>\n<p>Then you can parse the node into a list with <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.8/com/fasterxml/jackson/databind/ObjectReader.html#readValue(com.fasterxml.jackson.databind.JsonNode)\" rel=\"nofollow noreferrer\"><code>ObjectReader.readValue()</code></a> or into a POJO using <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html#treeToValue(com.fasterxml.jackson.core.TreeNode,%20java.lang.Class)\" rel=\"nofollow noreferrer\"><code>ObjectMapper.treeToValue()</code></a>.</p>\n<pre><code>String myJson = &quot;&quot;&quot;\n    {&quot;simple&quot; : {&quot;name&quot;:&quot;c&quot;, &quot;email&quot; : &quot;c@z.com&quot;} }\n&quot;&quot;&quot;;\n    \nObjectMapper mapper = new ObjectMapper();\nJsonNode node = mapper.readTree(myJson);\n\nif (node.isArray()) {\n    ObjectReader reader = mapper.readerFor(new TypeReference&lt;List&lt;Simple&gt;&gt;() {});\n    List&lt;Simple&gt; list = reader.readValue(node);\n\n    // do something with a list\n} else {\n    Simple pojo = mapper.treeToValue(node, Simple.class);\n\n    // do something else with a single object\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14783499,"reputation":178,"user_id":10676421,"display_name":"Marius Danciu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664886594,"creation_date":1664881820,"answer_id":73947013,"question_id":73946598,"body_markdown":"You only need to read the first node, `simple` and check if it is an array - using `isArray()` method.\r\n\r\n```java\r\npublic class Main{\r\n    public static void main(String args[]) {\r\n        \r\n        //String inputString = [your input];\r\n        \r\n        ObjectMapper mapper = new ObjectMapper();\r\n    \r\n        JsonNode root = mapper.readTree(inputString);\r\n    \r\n        JsonNode simpleNode = root.findPath(&quot;simple&quot;);\r\n    \r\n        if(simpleNode.isArray()) {\r\n    \r\n           //you have an array\r\n\r\n        } else {\r\n    \r\n        // you have an element\r\n    \r\n        }\r\n\r\n    }\r\n}\r\n```","title":"how to make java class behave like a normal object and list-of-object at runtime and as per need?","body":"<p>You only need to read the first node, <code>simple</code> and check if it is an array - using <code>isArray()</code> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main{\n    public static void main(String args[]) {\n        \n        //String inputString = [your input];\n        \n        ObjectMapper mapper = new ObjectMapper();\n    \n        JsonNode root = mapper.readTree(inputString);\n    \n        JsonNode simpleNode = root.findPath(&quot;simple&quot;);\n    \n        if(simpleNode.isArray()) {\n    \n           //you have an array\n\n        } else {\n    \n        // you have an element\n    \n        }\n\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4397192,"reputation":5374,"user_id":3583824,"accept_rate":75,"display_name":"axnet"},"score":1,"creation_date":1665031150,"post_id":73947851,"comment_id":130604891,"body_markdown":"Thanks Michal for simplicity in solution, this is nearest to what i am thinking for handling this.","body":"Thanks Michal for simplicity in solution, this is nearest to what i am thinking for handling this."}],"tags":[],"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664886445,"creation_date":1664886445,"answer_id":73947851,"question_id":73946598,"body_markdown":"To avoid any `Jackson` customisation I would create wrapper class with an `Object simple` property. We can add two extra checking methods and two extra casting methods. It will allow `Jackson` to do it&#39;s logic and in runtime we can check what actually we have:\r\n```java\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.SerializationFeature;\r\nimport com.fasterxml.jackson.databind.json.JsonMapper;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\npublic class DateApp {\r\n\tprivate final static JsonMapper JSON_MAPPER = JsonMapper.builder().enable(SerializationFeature.INDENT_OUTPUT).build();\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\tSimple object = new Simple(&quot;John&quot;, &quot;john@doe.com&quot;);\r\n\t\tSimpleWrapper wrapper = new SimpleWrapper();\r\n\t\twrapper.setSimple(object);\r\n\r\n\t\tserializeAndDeserialize(wrapper);\r\n\r\n\t\twrapper.setSimple(Collections.singletonList(object));\r\n\t\tserializeAndDeserialize(wrapper);\r\n\t}\r\n\r\n\tprivate static void serializeAndDeserialize(SimpleWrapper wrapper) throws JsonProcessingException {\r\n\t\tString json = JSON_MAPPER.writeValueAsString(wrapper);\r\n\t\tSystem.out.println(&quot;JSON:&quot;);\r\n\t\tSystem.out.println(json);\r\n\r\n\t\twrapper = JSON_MAPPER.readValue(json, SimpleWrapper.class);\r\n\t\tSystem.out.println(&quot;Wrapper:&quot;);\r\n\t\tSystem.out.println(wrapper);\r\n\t}\r\n}\r\n\r\n@Data\r\nclass SimpleWrapper {\r\n\tprivate Object simple;\r\n\r\n\t@JsonIgnore\r\n\tpublic boolean isSimpleObject() {\r\n\t\treturn simple instanceof Simple;\r\n\t}\r\n\r\n\t@JsonIgnore\r\n\tpublic boolean isSimpleList() {\r\n\t\treturn simple instanceof List;\r\n\t}\r\n\r\n\t@JsonIgnore\r\n\tpublic Simple getSimpleAsObject() {\r\n\t\treturn (Simple) simple;\r\n\t}\r\n\r\n\t@JsonIgnore\r\n\tpublic List&lt;Simple&gt; getSimpleAsList() {\r\n\t\treturn (List&lt;Simple&gt;) simple;\r\n\t}\r\n}\r\n\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\nclass Simple {\r\n\tprivate String name;\r\n\tprivate String email;\r\n}\r\n```\r\n\r\nAbove code prints:\r\n```logs\r\nJSON:\r\n{\r\n  &quot;simple&quot; : {\r\n    &quot;name&quot; : &quot;John&quot;,\r\n    &quot;email&quot; : &quot;john@doe.com&quot;\r\n  }\r\n}\r\nWrapper:\r\nSimpleWrapper(simple={name=John, email=john@doe.com})\r\n\r\nJSON:\r\n{\r\n  &quot;simple&quot; : [ {\r\n    &quot;name&quot; : &quot;John&quot;,\r\n    &quot;email&quot; : &quot;john@doe.com&quot;\r\n  } ]\r\n}\r\nWrapper:\r\nSimpleWrapper(simple=[{name=John, email=john@doe.com}])\r\n```","title":"how to make java class behave like a normal object and list-of-object at runtime and as per need?","body":"<p>To avoid any <code>Jackson</code> customisation I would create wrapper class with an <code>Object simple</code> property. We can add two extra checking methods and two extra casting methods. It will allow <code>Jackson</code> to do it's logic and in runtime we can check what actually we have:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.annotation.JsonIgnore;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.SerializationFeature;\nimport com.fasterxml.jackson.databind.json.JsonMapper;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.util.Collections;\nimport java.util.List;\n\npublic class DateApp {\n    private final static JsonMapper JSON_MAPPER = JsonMapper.builder().enable(SerializationFeature.INDENT_OUTPUT).build();\n\n    public static void main(String[] args) throws Exception {\n        Simple object = new Simple(&quot;John&quot;, &quot;john@doe.com&quot;);\n        SimpleWrapper wrapper = new SimpleWrapper();\n        wrapper.setSimple(object);\n\n        serializeAndDeserialize(wrapper);\n\n        wrapper.setSimple(Collections.singletonList(object));\n        serializeAndDeserialize(wrapper);\n    }\n\n    private static void serializeAndDeserialize(SimpleWrapper wrapper) throws JsonProcessingException {\n        String json = JSON_MAPPER.writeValueAsString(wrapper);\n        System.out.println(&quot;JSON:&quot;);\n        System.out.println(json);\n\n        wrapper = JSON_MAPPER.readValue(json, SimpleWrapper.class);\n        System.out.println(&quot;Wrapper:&quot;);\n        System.out.println(wrapper);\n    }\n}\n\n@Data\nclass SimpleWrapper {\n    private Object simple;\n\n    @JsonIgnore\n    public boolean isSimpleObject() {\n        return simple instanceof Simple;\n    }\n\n    @JsonIgnore\n    public boolean isSimpleList() {\n        return simple instanceof List;\n    }\n\n    @JsonIgnore\n    public Simple getSimpleAsObject() {\n        return (Simple) simple;\n    }\n\n    @JsonIgnore\n    public List&lt;Simple&gt; getSimpleAsList() {\n        return (List&lt;Simple&gt;) simple;\n    }\n}\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\nclass Simple {\n    private String name;\n    private String email;\n}\n</code></pre>\n<p>Above code prints:</p>\n<pre><code>JSON:\n{\n  &quot;simple&quot; : {\n    &quot;name&quot; : &quot;John&quot;,\n    &quot;email&quot; : &quot;john@doe.com&quot;\n  }\n}\nWrapper:\nSimpleWrapper(simple={name=John, email=john@doe.com})\n\nJSON:\n{\n  &quot;simple&quot; : [ {\n    &quot;name&quot; : &quot;John&quot;,\n    &quot;email&quot; : &quot;john@doe.com&quot;\n  } ]\n}\nWrapper:\nSimpleWrapper(simple=[{name=John, email=john@doe.com}])\n</code></pre>\n"}],"owner":{"account_id":4397192,"reputation":5374,"user_id":3583824,"accept_rate":75,"display_name":"axnet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73947851,"answer_count":4,"score":2,"last_activity_date":1664886691,"creation_date":1664879757,"question_id":73946598,"body_markdown":"I have a simple class in java like below:\r\n\r\n    class Simple {\r\n       private String name;\r\n       private String email;\r\n    }\r\n\r\nI want to have behaviour of `java.util.List&lt;Simple&gt;` and `Simple` both according to input data that my program receives.\r\n\r\ni.e.\r\n\r\nCase 1::\r\nif my program receives below kind of json-array input\r\n\r\n    {&quot;simple&quot; : [ {&quot;name&quot;:&quot;a&quot;, &quot;email&quot; : &quot;a@z.com&quot;}, {&quot;name&quot;:&quot;b&quot;, &quot;email&quot; : &quot;b@z.com&quot;} ]}\r\n\r\nI need to parse it using **List\\&lt;Simple\\&gt;**\r\n\r\n\r\n\r\n\r\n\r\nCase 2::\r\nif my program receives below kind of json-object input\r\n\r\n    {&quot;simple&quot; : {&quot;name&quot;:&quot;c&quot;, &quot;email&quot; : &quot;c@z.com&quot;} }\r\n\r\nI need to parse it using **Simple**\r\n\r\n\r\nNote: I have tried using `JsonFormat.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY`, but the problem is it is basically converting single value also into json-array at the time of writing json.\r\nI need to persist json as it is, is there any other way to achieve this?\r\n ","title":"how to make java class behave like a normal object and list-of-object at runtime and as per need?","body":"<p>I have a simple class in java like below:</p>\n<pre><code>class Simple {\n   private String name;\n   private String email;\n}\n</code></pre>\n<p>I want to have behaviour of <code>java.util.List&lt;Simple&gt;</code> and <code>Simple</code> both according to input data that my program receives.</p>\n<p>i.e.</p>\n<p>Case 1::\nif my program receives below kind of json-array input</p>\n<pre><code>{&quot;simple&quot; : [ {&quot;name&quot;:&quot;a&quot;, &quot;email&quot; : &quot;a@z.com&quot;}, {&quot;name&quot;:&quot;b&quot;, &quot;email&quot; : &quot;b@z.com&quot;} ]}\n</code></pre>\n<p>I need to parse it using <strong>List&lt;Simple&gt;</strong></p>\n<p>Case 2::\nif my program receives below kind of json-object input</p>\n<pre><code>{&quot;simple&quot; : {&quot;name&quot;:&quot;c&quot;, &quot;email&quot; : &quot;c@z.com&quot;} }\n</code></pre>\n<p>I need to parse it using <strong>Simple</strong></p>\n<p>Note: I have tried using <code>JsonFormat.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY</code>, but the problem is it is basically converting single value also into json-array at the time of writing json.\nI need to persist json as it is, is there any other way to achieve this?</p>\n"},{"tags":["java","arrays","integer-division"],"comments":[{"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"score":0,"creation_date":1645616322,"post_id":71235944,"comment_id":125917976,"body_markdown":"You should include your attempt and describe the problem you are having.  See [ask].","body":"You should include your attempt and describe the problem you are having.  See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}],"answers":[{"comments":[{"owner":{"account_id":22938034,"reputation":37,"user_id":17071203,"display_name":"Patryk Szymańczyk"},"score":0,"creation_date":1645619019,"post_id":71236311,"comment_id":125919109,"body_markdown":"thank u, but for ex. i have array [ 5, 22, 21,8,10] and it prints me the same numbers like before, i think its really great method ( if i good understand) it takes array[0] and checks how many divisors it have, than second loop takes array[1] and if array [1] has more divisors than goes to int currentMaxDivisor right ?","body":"thank u, but for ex. i have array [ 5, 22, 21,8,10] and it prints me the same numbers like before, i think its really great method ( if i good understand) it takes array[0] and checks how many divisors it have, than second loop takes array[1] and if array [1] has more divisors than goes to int currentMaxDivisor right ?"},{"owner":{"account_id":2332280,"reputation":2091,"user_id":2140633,"accept_rate":75,"display_name":"Udith Gunaratna"},"score":0,"creation_date":1645620203,"post_id":71236311,"comment_id":125919557,"body_markdown":"Sorry, I didn&#39;t quite get your question. Can you elaborate?","body":"Sorry, I didn&#39;t quite get your question. Can you elaborate?"},{"owner":{"account_id":22938034,"reputation":37,"user_id":17071203,"display_name":"Patryk Szymańczyk"},"score":0,"creation_date":1645620998,"post_id":71236311,"comment_id":125919903,"body_markdown":"okay, so for ex.\ni have array [ 1, 2 , 3, 7, 20] (number with most divisor will be 20-1,2,4,5 etc.)\nand i want to get 20 because it&#39;s the number with most divisor.","body":"okay, so for ex. i have array [ 1, 2 , 3, 7, 20] (number with most divisor will be 20-1,2,4,5 etc.) and i want to get 20 because it&#39;s the number with most divisor."},{"owner":{"account_id":2332280,"reputation":2091,"user_id":2140633,"accept_rate":75,"display_name":"Udith Gunaratna"},"score":0,"creation_date":1645681020,"post_id":71236311,"comment_id":125938198,"body_markdown":"The above `getNumWithMaxDivisors` method will get you `20` for that array. Anyway I have removed the unnecessary print statements as you may have got confused by them. Please check now.","body":"The above <code>getNumWithMaxDivisors</code> method will get you <code>20</code> for that array. Anyway I have removed the unnecessary print statements as you may have got confused by them. Please check now."}],"tags":[],"owner":{"account_id":2332280,"reputation":2091,"user_id":2140633,"accept_rate":75,"display_name":"Udith Gunaratna"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646120676,"creation_date":1645616592,"answer_id":71236311,"question_id":71235944,"body_markdown":"First of all, you only need to check values between `1` and `n/2` to find the divisors of `n`. You won&#39;t find a divisor between `n/2` and `n` (except for `n` itself). This will effectively reduce your execution time by half.\r\n\r\nSo your divisor finding method can be improved like below to count the number of divisors of a given number.\r\n```\r\nstatic int getNumDivisors(int n) {\r\n    int noOfDivisors = 0;\r\n    for (int i = 1; i &lt;= n / 2; i++) {\r\n        if (n % i == 0) {\r\n            noOfDivisors++;\r\n        }\r\n    }\r\n    if (n &gt; 1) {\r\n        noOfDivisors++; // n itself is a divisor of n\r\n    }\r\n    return noOfDivisors;\r\n}\r\n```\r\nThen you need to iterate through the `numbers` array given by user and find the number of divisors for each number. \r\n\r\nWhile iterating you need 2 variables \r\n* `currentMaxDivisors` - to store the max no of divisors you have found so far \r\n* `numWithMaxDivisors` - which number had the above number of divisors \r\n\r\nIf you happen to find a new number with more divisors, you update these variables with the new values. At the end, `numWithMaxDivisors` variable will contain the number with maximum divisors.\r\n\r\n```\r\nstatic int getNumDivisors(int n) {\r\n    int noOfDivisors = 0;\r\n    for (int i = 1; i &lt;= n / 2; i++) {\r\n        if (n % i == 0) {\r\n            System.out.print(i + &quot; &quot;);\r\n            noOfDivisors++;\r\n        }\r\n    }\r\n    if (n &gt; 1) {\r\n        noOfDivisors++; // n itself is a divisor of n\r\n    }\r\n    return noOfDivisors;\r\n}\r\n\r\nstatic int getNumWithMaxDivisors(int[] numbers) {\r\n    // Assuming numbers array has at least one element\r\n    int currentMaxDivisors = 0;\r\n    int numWithMaxDivisors = numbers[0];\r\n    for (int i = 0; i &lt; numbers.length; i++) {\r\n        int numDivisors = getNumDivisors(numbers[i]);\r\n        if (numDivisors &gt; currentMaxDivisors) {\r\n            numWithMaxDivisors = numbers[i];\r\n        }\r\n    }\r\n    return numWithMaxDivisors;\r\n}\r\n\r\npublic static void main(String[] args) {\r\n    int[] numbers = new int[]{100, 55, 67, 2003, 12};\r\n    int numWithMaxDivisors = getNumWithMaxDivisors(numbers);\r\n    System.out.println(numWithMaxDivisors);\r\n}\r\n```","title":"How to find Number with most divisor from array","body":"<p>First of all, you only need to check values between <code>1</code> and <code>n/2</code> to find the divisors of <code>n</code>. You won't find a divisor between <code>n/2</code> and <code>n</code> (except for <code>n</code> itself). This will effectively reduce your execution time by half.</p>\n<p>So your divisor finding method can be improved like below to count the number of divisors of a given number.</p>\n<pre><code>static int getNumDivisors(int n) {\n    int noOfDivisors = 0;\n    for (int i = 1; i &lt;= n / 2; i++) {\n        if (n % i == 0) {\n            noOfDivisors++;\n        }\n    }\n    if (n &gt; 1) {\n        noOfDivisors++; // n itself is a divisor of n\n    }\n    return noOfDivisors;\n}\n</code></pre>\n<p>Then you need to iterate through the <code>numbers</code> array given by user and find the number of divisors for each number.</p>\n<p>While iterating you need 2 variables</p>\n<ul>\n<li><code>currentMaxDivisors</code> - to store the max no of divisors you have found so far</li>\n<li><code>numWithMaxDivisors</code> - which number had the above number of divisors</li>\n</ul>\n<p>If you happen to find a new number with more divisors, you update these variables with the new values. At the end, <code>numWithMaxDivisors</code> variable will contain the number with maximum divisors.</p>\n<pre><code>static int getNumDivisors(int n) {\n    int noOfDivisors = 0;\n    for (int i = 1; i &lt;= n / 2; i++) {\n        if (n % i == 0) {\n            System.out.print(i + &quot; &quot;);\n            noOfDivisors++;\n        }\n    }\n    if (n &gt; 1) {\n        noOfDivisors++; // n itself is a divisor of n\n    }\n    return noOfDivisors;\n}\n\nstatic int getNumWithMaxDivisors(int[] numbers) {\n    // Assuming numbers array has at least one element\n    int currentMaxDivisors = 0;\n    int numWithMaxDivisors = numbers[0];\n    for (int i = 0; i &lt; numbers.length; i++) {\n        int numDivisors = getNumDivisors(numbers[i]);\n        if (numDivisors &gt; currentMaxDivisors) {\n            numWithMaxDivisors = numbers[i];\n        }\n    }\n    return numWithMaxDivisors;\n}\n\npublic static void main(String[] args) {\n    int[] numbers = new int[]{100, 55, 67, 2003, 12};\n    int numWithMaxDivisors = getNumWithMaxDivisors(numbers);\n    System.out.println(numWithMaxDivisors);\n}\n</code></pre>\n"}],"owner":{"account_id":22938034,"reputation":37,"user_id":17071203,"display_name":"Patryk Szymańczyk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":382,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71236311,"answer_count":1,"score":0,"last_activity_date":1664886686,"creation_date":1645615111,"question_id":71235944,"body_markdown":"I have an array and i want to find number with most divisor. The problem is that i can find the number but i cant print how many divisor it is.\r\n\r\n\r\n    static void printDivisors(int n)\r\n    {\r\n        for (int i=1;i&lt;=n;i++)\r\n            if (n%i==0)\r\n                System.out.print(i+&quot; &quot;);\r\n    }\r\n \r\n   \r\n    public static void main(String args[])\r\n    {\r\n        System.out.println(&quot;The divisors of 100 are: &quot;);\r\n        printDivisors(100);;\r\n    }\r\n}","title":"How to find Number with most divisor from array","body":"<p>I have an array and i want to find number with most divisor. The problem is that i can find the number but i cant print how many divisor it is.</p>\n<pre><code>static void printDivisors(int n)\n{\n    for (int i=1;i&lt;=n;i++)\n        if (n%i==0)\n            System.out.print(i+&quot; &quot;);\n}\n\n\npublic static void main(String args[])\n{\n    System.out.println(&quot;The divisors of 100 are: &quot;);\n    printDivisors(100);;\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","for-loop"],"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":2,"creation_date":1664884914,"post_id":73947433,"comment_id":130567875,"body_markdown":"I think you&#39;ll need *two* `for` loops, one to iterate the lines, and another one to iterate characters per line.","body":"I think you&#39;ll need <i>two</i> <code>for</code> loops, one to iterate the lines, and another one to iterate characters per line."}],"answers":[{"comments":[{"owner":{"account_id":26229495,"reputation":5,"user_id":19905693,"display_name":"Klord"},"score":1,"creation_date":1664989690,"post_id":73947618,"comment_id":130596363,"body_markdown":"Yes. This seem to be the only way to do it with a single System.out.print(&quot;* &quot;); command. I was thinking it would be possible to get rid of the second print command with \\n. Looks like not possible.","body":"Yes. This seem to be the only way to do it with a single System.out.print(&quot;* &quot;); command. I was thinking it would be possible to get rid of the second print command with \\n. Looks like not possible."}],"tags":[],"owner":{"account_id":26301533,"reputation":1119,"user_id":19966820,"display_name":"YJR"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664886337,"creation_date":1664885205,"answer_id":73947618,"question_id":73947433,"body_markdown":"    class Example{\r\n       public static void main(String[] args) {\r\n          for (int a=0; a&lt;6; a++) {\r\n              for (int b=0; b&lt;a; b++) {\r\n                        System.out.print(&quot;* &quot;);\r\n              }\r\n              System.out.print(&quot;\\n&quot;);\r\n          }\r\n       }\r\n    }\r\n\r\nYou can do this without using println but you have to use print(&quot;\\n&quot;) instead to indicate line break.","title":"How do you print X number of characters in X number of lines?","body":"<pre><code>class Example{\n   public static void main(String[] args) {\n      for (int a=0; a&lt;6; a++) {\n          for (int b=0; b&lt;a; b++) {\n                    System.out.print(&quot;* &quot;);\n          }\n          System.out.print(&quot;\\n&quot;);\n      }\n   }\n}\n</code></pre>\n<p>You can do this without using println but you have to use print(&quot;\\n&quot;) instead to indicate line break.</p>\n"},{"tags":[],"owner":{"account_id":12221317,"reputation":569,"user_id":8920328,"display_name":"Melron"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664885942,"creation_date":1664885942,"answer_id":73947755,"question_id":73947433,"body_markdown":"You can use the print method instead of print**ln** but you have somehow to add an escape sequence (\\n). In case that you can&#39;t add the new line character at the same print, you can use one of the following examples:\r\n\r\nUsing 2 for loops:\r\n\r\n    for (int i = 1; i &lt;= 5; ++i) {\r\n\t\tfor (int j = 1; j &lt;= i; ++j)\r\n\t\t\tSystem.out.print(&quot;* &quot;);\r\n\r\n\t\tSystem.out.print(&quot;\\n&quot;);\r\n\t}\r\n\r\nUsing 1 for loop with the String#repeat as a helper:\r\n\r\n    for (int i = 1; i &lt;= 5; i++) {\r\n\t\tSystem.out.print(&quot;* &quot;.repeat(i));\r\n\t\tSystem.out.print(&quot;\\n&quot;);\r\n\t}\r\n\r\nAnd the last one, using IntStream with the repeat as above (which i don&#39;t recommend it)\r\n\r\n    IntStream.rangeClosed(1, 5).forEach(c -&gt; {\r\n\t\tSystem.out.print(&quot;* &quot;.repeat(c));\r\n\t\tSystem.out.print(&quot;\\n&quot;);\r\n\t});","title":"How do you print X number of characters in X number of lines?","body":"<p>You can use the print method instead of print<strong>ln</strong> but you have somehow to add an escape sequence (\\n). In case that you can't add the new line character at the same print, you can use one of the following examples:</p>\n<p>Using 2 for loops:</p>\n<pre><code>for (int i = 1; i &lt;= 5; ++i) {\n    for (int j = 1; j &lt;= i; ++j)\n        System.out.print(&quot;* &quot;);\n\n    System.out.print(&quot;\\n&quot;);\n}\n</code></pre>\n<p>Using 1 for loop with the String#repeat as a helper:</p>\n<pre><code>for (int i = 1; i &lt;= 5; i++) {\n    System.out.print(&quot;* &quot;.repeat(i));\n    System.out.print(&quot;\\n&quot;);\n}\n</code></pre>\n<p>And the last one, using IntStream with the repeat as above (which i don't recommend it)</p>\n<pre><code>IntStream.rangeClosed(1, 5).forEach(c -&gt; {\n    System.out.print(&quot;* &quot;.repeat(c));\n    System.out.print(&quot;\\n&quot;);\n});\n</code></pre>\n"}],"owner":{"account_id":26229495,"reputation":5,"user_id":19905693,"display_name":"Klord"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":237,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73947755,"answer_count":2,"score":0,"last_activity_date":1664886337,"creation_date":1664884131,"question_id":73947433,"body_markdown":"This is a question I got in an assignment of my Java class.\r\n\r\nQ: Write a java program to print the following output using single **System.out.print(“*”)**\r\n\r\n[stars][1]\r\n\r\n\r\nI achieved above using a single printline command.\r\n\r\n    class Example{\r\n       public static void main(String[] args) {\r\n          String star = &quot;*&quot;;\r\n          for (int a=0; a&lt;5; a++) {\r\n             System.out.println(star);\r\n             star = star + &quot; *&quot;;\r\n          }\r\n       }\r\n    }\r\n\r\nBut my proffesor wants to strictly follow the instructions in the question, hence can only use a **single** System.out.print(“*”). Thanks in advance. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4q9MP.png","title":"How do you print X number of characters in X number of lines?","body":"<p>This is a question I got in an assignment of my Java class.</p>\n<p>Q: Write a java program to print the following output using single <strong>System.out.print(“*”)</strong></p>\n<p><a href=\"https://i.stack.imgur.com/4q9MP.png\" rel=\"nofollow noreferrer\">stars</a></p>\n<p>I achieved above using a single printline command.</p>\n<pre><code>class Example{\n   public static void main(String[] args) {\n      String star = &quot;*&quot;;\n      for (int a=0; a&lt;5; a++) {\n         System.out.println(star);\n         star = star + &quot; *&quot;;\n      }\n   }\n}\n</code></pre>\n<p>But my proffesor wants to strictly follow the instructions in the question, hence can only use a <strong>single</strong> System.out.print(“*”). Thanks in advance.</p>\n"},{"tags":["java","zip","inputstream","zipinputstream"],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664879960,"creation_date":1664879960,"answer_id":73946636,"question_id":73946535,"body_markdown":"Inside the while loop you just need one line call to transfer the current entry to target file:\r\n\r\n    Files.copy(zipInputStream, outputFile.toPath(), StandardCopyOption.REPLACE_EXISTING);\r\n\r\nThis will copy the current entry contents but won&#39;t close `zipInputStream`, then your loop may continue to the next entry.","title":"Extract a Single File From ZipInputStream","body":"<p>Inside the while loop you just need one line call to transfer the current entry to target file:</p>\n<pre><code>Files.copy(zipInputStream, outputFile.toPath(), StandardCopyOption.REPLACE_EXISTING);\n</code></pre>\n<p>This will copy the current entry contents but won't close <code>zipInputStream</code>, then your loop may continue to the next entry.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664886335,"creation_date":1664886335,"answer_id":73947830,"question_id":73946535,"body_markdown":"The answer is: The `ZipInputStream` _itself_. It&#39;s an `InputStream`. You can call `read()` on it.\r\n\r\nZipInputStream is a bit of  weird fellow. It has additional methods on top of the usual (`.read()`, mostly), such as `getNextEntry()`.\r\n\r\n`getNextEntry()` doesn&#39;t just get you a ZipEntry object - it also forwards the inputstream itself &#39;past&#39; the file you were on so that it is now at the start of the new file. This also means ZipInputStreams bounce between states. You can have a ZIS that is currently at end of file (i.e. `read()` would return `-1`), then you call `.getNextEntry()` and poof you can read from it again.\r\n\r\nYou end up with something like:\r\n\r\n```java\r\nwhile ((temp = zipInputStream.getNextEntry()) != null) {\r\n  File outputFile = new File(temp.getName());\r\n  try (FileOutputStream outputStream = new FileOutputStream(outputFile)) {\r\n    System.out.println(temp.getName());\r\n    zipInputStream.transferTo(outputStream);\r\n}\r\n```\r\n\r\n`transferTo` is a default method that does what you usually want to do: Allocate a buffer, then read from the buffer, then write as many bytes as were read to the target, and keep doing that over and over until the read calls return `-1` (indicating we&#39;re at the end).\r\n","title":"Extract a Single File From ZipInputStream","body":"<p>The answer is: The <code>ZipInputStream</code> <em>itself</em>. It's an <code>InputStream</code>. You can call <code>read()</code> on it.</p>\n<p>ZipInputStream is a bit of  weird fellow. It has additional methods on top of the usual (<code>.read()</code>, mostly), such as <code>getNextEntry()</code>.</p>\n<p><code>getNextEntry()</code> doesn't just get you a ZipEntry object - it also forwards the inputstream itself 'past' the file you were on so that it is now at the start of the new file. This also means ZipInputStreams bounce between states. You can have a ZIS that is currently at end of file (i.e. <code>read()</code> would return <code>-1</code>), then you call <code>.getNextEntry()</code> and poof you can read from it again.</p>\n<p>You end up with something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>while ((temp = zipInputStream.getNextEntry()) != null) {\n  File outputFile = new File(temp.getName());\n  try (FileOutputStream outputStream = new FileOutputStream(outputFile)) {\n    System.out.println(temp.getName());\n    zipInputStream.transferTo(outputStream);\n}\n</code></pre>\n<p><code>transferTo</code> is a default method that does what you usually want to do: Allocate a buffer, then read from the buffer, then write as many bytes as were read to the target, and keep doing that over and over until the read calls return <code>-1</code> (indicating we're at the end).</p>\n"}],"owner":{"account_id":25640544,"reputation":24,"user_id":19409530,"display_name":"Ftoy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":802,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73946636,"answer_count":2,"score":0,"last_activity_date":1664886335,"creation_date":1664879417,"question_id":73946535,"body_markdown":"I have an ZipInputStream made from a byte array , I can iterate through the zipInputStream ZipEntrys but I cant find a method to get the data from the ZipEntry (ZipENtry.getExtras() is null on every entry) how would i go to extract all the files one by one each one to a specific location on my disk ?\r\n\r\n            try {\r\n            ZipInputStream zipInputStream = new ZipInputStream(zip.getBody().getInputStream());\r\n            ZipEntry temp;\r\n            while((temp = zipInputStream.getNextEntry()) != null){\r\n                File outputFile = new File(temp.getName());\r\n                try (FileOutputStream outputStream = new FileOutputStream(outputFile)) {\r\n                    System.out.println(temp.getName());\r\n                    \r\n                }\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }","title":"Extract a Single File From ZipInputStream","body":"<p>I have an ZipInputStream made from a byte array , I can iterate through the zipInputStream ZipEntrys but I cant find a method to get the data from the ZipEntry (ZipENtry.getExtras() is null on every entry) how would i go to extract all the files one by one each one to a specific location on my disk ?</p>\n<pre><code>        try {\n        ZipInputStream zipInputStream = new ZipInputStream(zip.getBody().getInputStream());\n        ZipEntry temp;\n        while((temp = zipInputStream.getNextEntry()) != null){\n            File outputFile = new File(temp.getName());\n            try (FileOutputStream outputStream = new FileOutputStream(outputFile)) {\n                System.out.println(temp.getName());\n                \n            }\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n"},{"tags":["java","json","spring-boot","enums","controller"],"comments":[{"owner":{"account_id":357454,"reputation":77335,"user_id":697630,"accept_rate":84,"display_name":"Edwin Dalorzo"},"score":1,"creation_date":1664885236,"post_id":73947081,"comment_id":130567989,"body_markdown":"You have two different fields annotated with `@JsonValue`. Shouldn’t you have only one defined as such to ensure that one becomes your enum value when de/serialized? That’s what the error message seems to indicate.","body":"You have two different fields annotated with <code>@JsonValue</code>. Shouldn’t you have only one defined as such to ensure that one becomes your enum value when de/serialized? That’s what the error message seems to indicate."}],"answers":[{"tags":[],"owner":{"account_id":15650323,"reputation":835,"user_id":11291844,"display_name":"happy songs"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1664885674,"creation_date":1664885329,"answer_id":73947648,"question_id":73947081,"body_markdown":"The [JsonValue documentation][1] says that only one method may be annotated with `@JsonValue`.\r\n\r\n&gt; At most one method of a Class can be annotated with this annotation; if more than one is found, an exception may be thrown.\r\n\r\nYou can try to serialize both `key` and `value` in a `toString()` method (annotate `toString()` with `@JsonValue`).\r\n\r\nAnother option might be to use [@JsonProperty][2] on your enum instances:\r\n```\r\n@JsonProperty(&quot;associated&quot;)\r\nASSOCIATED (&quot;A&quot;, &quot;Associated&quot;), \r\n@JsonProperty(&quot;disassociated&quot;)\r\nDISASSOCIATED (&quot;D&quot;, &quot;Disassociated&quot;);\r\n```\r\n\r\n\r\n  [1]: https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonValue.html\r\n  [2]: https://fasterxml.github.io/jackson-annotations/javadoc/2.8/com/fasterxml/jackson/annotation/JsonProperty.html","title":"Enum class doesn&#39;t return values I need","body":"<p>The <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonValue.html\" rel=\"nofollow noreferrer\">JsonValue documentation</a> says that only one method may be annotated with <code>@JsonValue</code>.</p>\n<blockquote>\n<p>At most one method of a Class can be annotated with this annotation; if more than one is found, an exception may be thrown.</p>\n</blockquote>\n<p>You can try to serialize both <code>key</code> and <code>value</code> in a <code>toString()</code> method (annotate <code>toString()</code> with <code>@JsonValue</code>).</p>\n<p>Another option might be to use <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.8/com/fasterxml/jackson/annotation/JsonProperty.html\" rel=\"nofollow noreferrer\">@JsonProperty</a> on your enum instances:</p>\n<pre><code>@JsonProperty(&quot;associated&quot;)\nASSOCIATED (&quot;A&quot;, &quot;Associated&quot;), \n@JsonProperty(&quot;disassociated&quot;)\nDISASSOCIATED (&quot;D&quot;, &quot;Disassociated&quot;);\n</code></pre>\n"}],"owner":{"account_id":24183247,"reputation":472,"user_id":18570428,"display_name":"Talenel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":529,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73947648,"answer_count":1,"score":2,"last_activity_date":1664885674,"creation_date":1664882275,"question_id":73947081,"body_markdown":"I have created an `enumerated` class that contains 2 values. What I want is to create a `controller` that returns the enumerations that exist along with their values.\r\n\r\nThis is my Enum Class:\r\n\r\n    @Getter\r\n    public enum ModesEnum {\r\n\r\n\t   ASSOCIATED (&quot;A&quot;, &quot;Associated&quot;), DISASSOCIATED (&quot;D&quot;, &quot;Disassociated&quot;);\r\n\r\n\t   private String key;\r\n\t   private String value;\r\n\r\n\t   private ModesEnum(String key, String value) {\r\n\t\t   this.key = key;\r\n\t\t   this.value = value;\r\n\t   }\r\n\r\n\t   @JsonValue\r\n\t   public String getValor() {\r\n\t\t   return value;\r\n\t   }\r\n\t\r\n\t   @JsonValue\r\n\t   public String getKey() {\r\n\t\t   return key;\r\n\t   }\r\n\t\r\n       private static final Map&lt;String, String&gt; mapClassEnum;\r\n\r\n\t   static {\r\n\t\t   mapClassEnum = new HashMap&lt;&gt;();\r\n\t\t   Arrays.stream(values()).forEach(elem -&gt; {\r\n\t\t\t   mapClassEnum.put(elem.getValue(), elem.getKey());\r\n\t\t\t   mapClassEnum.put(elem.getValue(), elem.getValor());\r\n       });\r\n\t}\r\n\r\nMy Controller class:\r\n\r\n    @GetMapping(value = &quot;/modesEnum&quot;)\r\n    \tpublic ResponseEntity&lt;ModesEnum[]&gt; getAll(){\r\n    \t\treturn new ResponseEntity&lt;&gt;(ModesEnum.values(), null, HttpStatus.OK);\r\n    \t}\r\n\r\nhowever when executing the controller it gives me the following error:\r\n\r\n     Problem with definition of AnnotedClass ModesEnum Multiple &#39;as-value&#39; properties defined ModesEnum #getKey() vs ModesEnum [0]\r\n\r\nHow can I return in my `controller` something like this `JSON`?:\r\n\r\n    {\r\n       { key: &quot;A&quot;, value : &quot;Associated&quot;},\r\n       { key: &quot;D&quot;, value : &quot;Disassociated&quot;}\r\n    }","title":"Enum class doesn&#39;t return values I need","body":"<p>I have created an <code>enumerated</code> class that contains 2 values. What I want is to create a <code>controller</code> that returns the enumerations that exist along with their values.</p>\n<p>This is my Enum Class:</p>\n<pre><code>@Getter\npublic enum ModesEnum {\n\n   ASSOCIATED (&quot;A&quot;, &quot;Associated&quot;), DISASSOCIATED (&quot;D&quot;, &quot;Disassociated&quot;);\n\n   private String key;\n   private String value;\n\n   private ModesEnum(String key, String value) {\n       this.key = key;\n       this.value = value;\n   }\n\n   @JsonValue\n   public String getValor() {\n       return value;\n   }\n\n   @JsonValue\n   public String getKey() {\n       return key;\n   }\n\n   private static final Map&lt;String, String&gt; mapClassEnum;\n\n   static {\n       mapClassEnum = new HashMap&lt;&gt;();\n       Arrays.stream(values()).forEach(elem -&gt; {\n           mapClassEnum.put(elem.getValue(), elem.getKey());\n           mapClassEnum.put(elem.getValue(), elem.getValor());\n   });\n}\n</code></pre>\n<p>My Controller class:</p>\n<pre><code>@GetMapping(value = &quot;/modesEnum&quot;)\n    public ResponseEntity&lt;ModesEnum[]&gt; getAll(){\n        return new ResponseEntity&lt;&gt;(ModesEnum.values(), null, HttpStatus.OK);\n    }\n</code></pre>\n<p>however when executing the controller it gives me the following error:</p>\n<pre><code> Problem with definition of AnnotedClass ModesEnum Multiple 'as-value' properties defined ModesEnum #getKey() vs ModesEnum [0]\n</code></pre>\n<p>How can I return in my <code>controller</code> something like this <code>JSON</code>?:</p>\n<pre><code>{\n   { key: &quot;A&quot;, value : &quot;Associated&quot;},\n   { key: &quot;D&quot;, value : &quot;Disassociated&quot;}\n}\n</code></pre>\n"},{"tags":["java","elasticsearch","elasticsearch-plugin"],"comments":[{"owner":{"account_id":7187902,"reputation":5118,"user_id":5489276,"accept_rate":20,"display_name":"Sagar Patel"},"score":0,"creation_date":1664882051,"post_id":73946073,"comment_id":130566986,"body_markdown":"What is version of Elasticsearch. are you using Java highlevel client or new Java client ?","body":"What is version of Elasticsearch. are you using Java highlevel client or new Java client ?"}],"answers":[{"tags":[],"owner":{"account_id":7187902,"reputation":5118,"user_id":5489276,"accept_rate":20,"display_name":"Sagar Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664883494,"creation_date":1664882567,"answer_id":73947140,"question_id":73946073,"body_markdown":"First things is that, You need to use `IDs` type of query as you are search on `_id` field.\r\n\r\nIf you are using **Java high level client** then you can use below code:\r\n\r\n```java\r\nQueryBuilder query = QueryBuilders.boolQuery().filter(new RangeQueryBuilder(&quot;age&quot;).from(57))\r\n\t\t\t\t.filter(new IdsQueryBuilder().addIds(&quot;1212yas1&quot;, &quot;sdfsfs1&quot;))\r\n\t\t\t\t.should(new QueryStringQueryBuilder(&quot;(football) OR (Cricket)&quot;).defaultField(&quot;hobbies.hobby&quot;));\r\n\r\nSearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder();\r\nsearchSourceBuilder.query(query);\r\nsearchRequest.source(searchSourceBuilder);\r\nSearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);\r\n```\r\n\r\nIf you are using **new Java client** then you can use below code:\r\n```java\r\nQuery query = Query.of(\r\n\t\t\t\tq -&gt; q.bool(BoolQuery.of(bq -&gt; bq.filter(f -&gt; f.range(RangeQuery.of(rq -&gt; rq.field(&quot;age&quot;).from(&quot;57&quot;))))\r\n\t\t\t\t\t\t.filter(f -&gt; f.ids(IdsQuery.of(iq -&gt; iq.values(&quot;1212yas1&quot;, &quot;sdfsfs1&quot;))))\r\n\t\t\t\t\t\t.should(s -&gt; s.queryString(QueryStringQuery\r\n\t\t\t\t\t\t\t\t.of(qs -&gt; qs.query(&quot;(football) OR (Cricket)&quot;).defaultField(&quot;hobbies.hobby&quot;)))))));\r\n```","title":"How do I combine multiple filter query and should of Elastic Search using Java Library (QueryBuilder)","body":"<p>First things is that, You need to use <code>IDs</code> type of query as you are search on <code>_id</code> field.</p>\n<p>If you are using <strong>Java high level client</strong> then you can use below code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>QueryBuilder query = QueryBuilders.boolQuery().filter(new RangeQueryBuilder(&quot;age&quot;).from(57))\n                .filter(new IdsQueryBuilder().addIds(&quot;1212yas1&quot;, &quot;sdfsfs1&quot;))\n                .should(new QueryStringQueryBuilder(&quot;(football) OR (Cricket)&quot;).defaultField(&quot;hobbies.hobby&quot;));\n\nSearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder();\nsearchSourceBuilder.query(query);\nsearchRequest.source(searchSourceBuilder);\nSearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);\n</code></pre>\n<p>If you are using <strong>new Java client</strong> then you can use below code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Query query = Query.of(\n                q -&gt; q.bool(BoolQuery.of(bq -&gt; bq.filter(f -&gt; f.range(RangeQuery.of(rq -&gt; rq.field(&quot;age&quot;).from(&quot;57&quot;))))\n                        .filter(f -&gt; f.ids(IdsQuery.of(iq -&gt; iq.values(&quot;1212yas1&quot;, &quot;sdfsfs1&quot;))))\n                        .should(s -&gt; s.queryString(QueryStringQuery\n                                .of(qs -&gt; qs.query(&quot;(football) OR (Cricket)&quot;).defaultField(&quot;hobbies.hobby&quot;)))))));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7187902,"reputation":5118,"user_id":5489276,"accept_rate":20,"display_name":"Sagar Patel"},"score":1,"creation_date":1664883531,"post_id":73947170,"comment_id":130567450,"body_markdown":"it will be better to use `ids` query insted of `terms` query for `_id` field.","body":"it will be better to use <code>ids</code> query insted of <code>terms</code> query for <code>_id</code> field."}],"tags":[],"owner":{"account_id":24908380,"reputation":3091,"user_id":18778181,"display_name":"rabbitbr"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664885571,"creation_date":1664882704,"answer_id":73947170,"question_id":73946073,"body_markdown":"If you are using new Java Client Api, try the code bellow:\r\n\r\n    var query = Query.of(q -&gt; q.bool(BoolQuery.of(bq -&gt; bq\r\n        .filter(f -&gt; f\r\n            .range(RangeQuery.of(rq -&gt; rq.field(&quot;age&quot;).from(&quot;57&quot;))))\r\n        .filter(f -&gt; f\r\n            .ids(IdsQuery.of(ids -&gt; ids.values(List.of(&quot;1212yas1&quot;, &quot;sdfsfs1&quot;)))))\r\n        .should(s -&gt; s.queryString(\r\n            QueryStringQuery.of(qs -&gt; qs.query(&quot;(football) OR (Cricket)&quot;).defaultField(&quot;hobbies.hobby&quot;))))\r\n    )));\r\n    \r\n    var response = client.search(SearchRequest.of(sr -&gt; sr\r\n        .index(&quot;idx_name&quot;)\r\n        .size(10)\r\n        .query(query)\r\n    ), Entity.class);","title":"How do I combine multiple filter query and should of Elastic Search using Java Library (QueryBuilder)","body":"<p>If you are using new Java Client Api, try the code bellow:</p>\n<pre><code>var query = Query.of(q -&gt; q.bool(BoolQuery.of(bq -&gt; bq\n    .filter(f -&gt; f\n        .range(RangeQuery.of(rq -&gt; rq.field(&quot;age&quot;).from(&quot;57&quot;))))\n    .filter(f -&gt; f\n        .ids(IdsQuery.of(ids -&gt; ids.values(List.of(&quot;1212yas1&quot;, &quot;sdfsfs1&quot;)))))\n    .should(s -&gt; s.queryString(\n        QueryStringQuery.of(qs -&gt; qs.query(&quot;(football) OR (Cricket)&quot;).defaultField(&quot;hobbies.hobby&quot;))))\n)));\n\nvar response = client.search(SearchRequest.of(sr -&gt; sr\n    .index(&quot;idx_name&quot;)\n    .size(10)\n    .query(query)\n), Entity.class);\n</code></pre>\n"}],"owner":{"account_id":25678430,"reputation":21,"user_id":19441528,"display_name":"Pradip"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":782,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1664885571,"creation_date":1664876980,"question_id":73946073,"body_markdown":"I have a query like below : \r\n\r\n    {\r\n    &quot;query&quot;: {\r\n        &quot;bool&quot;: {\r\n            &quot;filter&quot;: [\r\n                {\r\n                    &quot;range&quot;: {\r\n                        &quot;age&quot;: {\r\n                            &quot;from&quot;: 57,\r\n                            &quot;to&quot;: null,\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    &quot;terms&quot;: {\r\n                        &quot;_id&quot;: [\r\n                            &quot;1212yas1&quot;,\r\n                            &quot;sdfsfs1&quot;\r\n                        ]\r\n                    }\r\n                }\r\n            ],\r\n            &quot;should&quot;: [\r\n                {\r\n                    &quot;query_string&quot;: {\r\n                     &quot;query&quot;: &quot;(football) OR (Cricket)&quot;,\r\n                    &quot;default_field&quot;: &quot;hobbies.hobby&quot;\r\n          }\r\n                }\r\n            ]\r\n        }\r\n    }\r\n}\r\n\r\nI am very new to Elastic Search, I want to implement above query using Java library of Elastic Search how can I do this?\r\n\r\nhobbies is nested object, age is long.","title":"How do I combine multiple filter query and should of Elastic Search using Java Library (QueryBuilder)","body":"<p>I have a query like below :</p>\n<pre><code>{\n&quot;query&quot;: {\n    &quot;bool&quot;: {\n        &quot;filter&quot;: [\n            {\n                &quot;range&quot;: {\n                    &quot;age&quot;: {\n                        &quot;from&quot;: 57,\n                        &quot;to&quot;: null,\n                    }\n                }\n            },\n            {\n                &quot;terms&quot;: {\n                    &quot;_id&quot;: [\n                        &quot;1212yas1&quot;,\n                        &quot;sdfsfs1&quot;\n                    ]\n                }\n            }\n        ],\n        &quot;should&quot;: [\n            {\n                &quot;query_string&quot;: {\n                 &quot;query&quot;: &quot;(football) OR (Cricket)&quot;,\n                &quot;default_field&quot;: &quot;hobbies.hobby&quot;\n      }\n            }\n        ]\n    }\n}\n</code></pre>\n<p>}</p>\n<p>I am very new to Elastic Search, I want to implement above query using Java library of Elastic Search how can I do this?</p>\n<p>hobbies is nested object, age is long.</p>\n"},{"tags":["java","algorithm","graph-algorithm","a-star"],"comments":[{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":2,"creation_date":1559652952,"post_id":56444216,"comment_id":99482198,"body_markdown":"*I am not getting the performance as expected,* -&gt; Please tell us why the performance doesn&#39;t match up with your expectations. Be as clear as possible, e.g. *When I use [an input] I get [some output] and it takes about [X] seconds*","body":"<i>I am not getting the performance as expected,</i> -&gt; Please tell us why the performance doesn&#39;t match up with your expectations. Be as clear as possible, e.g. <i>When I use [an input] I get [some output] and it takes about [X] seconds</i>"},{"owner":{"account_id":3672956,"reputation":3,"user_id":3059665,"display_name":"garvit"},"score":0,"creation_date":1559653286,"post_id":56444216,"comment_id":99482404,"body_markdown":"When I am using A*star implementation -\nRoute length - 68 miles\nNodes explored - 202957\nTime to calculate route - 1.6 seconds\n\nWhen using bi-directional dijkstra \nRoute length - 67.2 miles\nNodes Explored - 647784\nTime to calculate route - 0.9 seconds\n\nAs you can clearly see here though the number of nodes decreased significantly while using a* still the time in which route is calculated is larger than dijkstra.","body":"When I am using A<i>star implementation - Route length - 68 miles Nodes explored - 202957 Time to calculate route - 1.6 seconds  When using bi-directional dijkstra  Route length - 67.2 miles Nodes Explored - 647784 Time to calculate route - 0.9 seconds  As you can clearly see here though the number of nodes decreased significantly while using a</i> still the time in which route is calculated is larger than dijkstra."},{"owner":{"account_id":14612183,"reputation":4799,"user_id":10553341,"display_name":"Damien"},"score":0,"creation_date":1559658956,"post_id":56444216,"comment_id":99485634,"body_markdown":"You have to evaluate which operationsare performed for each node. Don&#39;t forget that memory allocations, memory copies are sometimes predominant in the time spent for this kind of algorithms. You can try using a tool like gprof. Note that I didn&#39;t have time to analyse your code","body":"You have to evaluate which operationsare performed for each node. Don&#39;t forget that memory allocations, memory copies are sometimes predominant in the time spent for this kind of algorithms. You can try using a tool like gprof. Note that I didn&#39;t have time to analyse your code"}],"answers":[{"comments":[{"owner":{"account_id":3672956,"reputation":3,"user_id":3059665,"display_name":"garvit"},"score":0,"creation_date":1560129112,"post_id":56445153,"comment_id":99624054,"body_markdown":"I try playing around with the heuristic function and you are right, making certain changes does improve the performance but did drastically impacts the accuracy.","body":"I try playing around with the heuristic function and you are right, making certain changes does improve the performance but did drastically impacts the accuracy."},{"owner":{"account_id":3672956,"reputation":3,"user_id":3059665,"display_name":"garvit"},"score":0,"creation_date":1560129347,"post_id":56445153,"comment_id":99624088,"body_markdown":"I think because of the presence of a large number of entries in the priority queue is what impacting the performance, I have to see how I can get over it. the heuristic function for a node is based on the road distance traveled + the aerial distance to the destination node.","body":"I think because of the presence of a large number of entries in the priority queue is what impacting the performance, I have to see how I can get over it. the heuristic function for a node is based on the road distance traveled + the aerial distance to the destination node."}],"tags":[],"owner":{"account_id":2168743,"reputation":10044,"user_id":1921273,"display_name":"MrSmith42"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1664885231,"creation_date":1559655646,"answer_id":56445153,"question_id":56444216,"body_markdown":"You should check how many nodes are explored before you find the solution. \r\n\r\nYou can than try to improve your overestimation-function (heuristic) for the cost of the remaining path to reduce the number of explored nodes. \r\n\r\nIn general the performance of a A*-Algorithm mainly depends on the heuristic you use not really on the optimization of the code. So try to put as much domain knowledge into your heuristic as possible to reduce the number of explored nodes.","title":"How can i improve performance of the A-Star algorithm?","body":"<p>You should check how many nodes are explored before you find the solution.</p>\n<p>You can than try to improve your overestimation-function (heuristic) for the cost of the remaining path to reduce the number of explored nodes.</p>\n<p>In general the performance of a A*-Algorithm mainly depends on the heuristic you use not really on the optimization of the code. So try to put as much domain knowledge into your heuristic as possible to reduce the number of explored nodes.</p>\n"}],"owner":{"account_id":3672956,"reputation":3,"user_id":3059665,"display_name":"garvit"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1922,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1559656157,"accepted_answer_id":56445153,"answer_count":1,"score":-1,"last_activity_date":1664885231,"creation_date":1559652435,"question_id":56444216,"body_markdown":"I have implemented the A-Star algorithm and I am not getting the performance as expected, How can I improve the performance of the algorithm.\r\n\r\nBelow is the main function which is called in a while loop till the destination node is reached, This is a single direction AStar implementation. \r\n\r\n    public void step(boolean useQueueOnly) {\r\n\t\t\tcount ++;\r\n            m_fixedNodeId = m_nextNodeId;\r\n            m_fixedCost = m_nextCost;\r\n            int fromNodeId = m_current.getPrevNodeId();\r\n            \r\n            int arcId = m_network.getFirstArc(m_fixedNodeId);\r\n            while (arcId != Integer.MIN_VALUE) {\r\n                int nextNodeId = m_network.getBegNodeId(arcId);\r\n                if (nextNodeId == m_fixedNodeId) {\r\n                    nextNodeId = m_network.getEndNodeId(arcId);\r\n                }\r\n                int arcCost;\r\n                if (m_forwardDirection) {\r\n                    arcCost = m_network.getCost(arcId, m_fixedNodeId, fromNodeId);\r\n                } else {\r\n                    arcCost = m_network.getCost(arcId, nextNodeId, fromNodeId);\r\n                }\r\n                \r\n                arcCost = Math.max(MIN_COST_ALLOWED, arcCost);\r\n\r\n                if (arcCost != Integer.MAX_VALUE) {\r\n                    int newNodeCost = (int) Math.min((long) m_fixedCost + arcCost,\r\n                            Integer.MAX_VALUE);\r\n\r\n                    int nodePrevCost  = fromMap.get(nextNodeId) != null ? fromMap.get(nextNodeId).getCost() : Integer.MAX_VALUE;\r\n                    \r\n                    double approxCost = newNodeCost + m_approximator.approximate(nextNodeId);\r\n                    \r\n                    AStarEntry ase = new AStarEntry(nextNodeId, approxCost, arcId, m_current, m_fixedNodeId, newNodeCost);\r\n                    \r\n                    if ((nodePrevCost == Integer.MAX_VALUE) &amp;&amp;\r\n                    \t\t(newNodeCost != Integer.MAX_VALUE)) {\r\n                    \t//haven&#39;t yet reached this node.\r\n                    \tif(fromMap.get(nextNodeId) == null){\r\n                    \t\tfromMap.put(nextNodeId, ase);\r\n                    \t\tm_priorityNodeQueue.add(ase);\r\n                    \t}\r\n\r\n                    } else if (newNodeCost &lt; nodePrevCost) {\r\n                    \t//already reached this node.\r\n                    \tm_priorityNodeQueue.remove(ase);\r\n\r\n                    }\r\n\t\t\t\t}\r\n\t\t\t\tarcId = m_network.getNextArc(m_fixedNodeId, arcId);\r\n            }\r\n            \r\n            m_current = m_priorityNodeQueue.poll();\r\n            m_nextNodeId = m_current.getNodeId();\r\n            m_nextCost = m_current.getCost();\r\n        \r\n    }\r\n\r\nThis is the class I am using in the priority queue.\r\n\r\n    class AStarEntry implements Cloneable, Comparable&lt;AStarEntry&gt;{\r\n\r\n    \tpublic double m_weight;\r\n    \tpublic int m_nodeId;\r\n    \tpublic int m_arcId;\r\n    \tpublic int m_prevNodeId;\r\n    \tpublic int m_cost;\r\n\r\n\t\tpublic AStarEntry m_parent;\r\n    \t\r\n    \tpublic AStarEntry(int nodeId, double weight, int arcId, AStarEntry parent, int prevNodeId, int cost) {\r\n\t\t\tm_nodeId = nodeId;\r\n\t\t\tm_weight = weight;\r\n\t\t\tm_arcId = arcId;\r\n\t\t\tm_parent = parent;\r\n\t\t\tm_prevNodeId = prevNodeId;\r\n\t\t\tm_cost = cost;\r\n\t\t}\r\n    \t\r\n\t\t@Override\r\n\t\tpublic int compareTo(AStarEntry o) {\r\n\r\n\t        // assumption no NaN and no -0        \r\n\t        return m_weight &gt; o.m_weight ? +1 : m_weight &lt; o.m_weight ? -1 : 0;\r\n\t\t}\r\n\r\n\t\tpublic double getWeight() {\r\n\t\t\treturn m_weight;\r\n\t\t}\r\n\r\n\t\tpublic int getNodeId() {\r\n\t\t\treturn m_nodeId;\r\n\t\t}\r\n    \t\r\n\t\tpublic int getArcId() {\r\n\t\t\treturn m_arcId;\r\n\t\t}\r\n\r\n\t\tpublic AStarEntry getParent() {\r\n\t\t\treturn m_parent;\r\n\t\t}\r\n\r\n\t\tpublic int getPrevNodeId() {\r\n\t\t\treturn m_prevNodeId;\r\n\t\t}\r\n\r\n\t\tpublic int getCost() {\r\n\t\t\treturn m_cost;\r\n\t\t}\r\n    \t\r\n\t\t@Override\r\n\t\tpublic String toString() {\r\n\t\t\t\r\n\t\t\treturn m_nodeId + &quot; (&quot; + m_arcId + &quot;) weight: &quot; + m_weight;\r\n\t\t}\r\n    }\r\n\r\nI am not able to figure out the reason for bad performance, please help me identify one.","title":"How can i improve performance of the A-Star algorithm?","body":"<p>I have implemented the A-Star algorithm and I am not getting the performance as expected, How can I improve the performance of the algorithm.</p>\n\n<p>Below is the main function which is called in a while loop till the destination node is reached, This is a single direction AStar implementation. </p>\n\n<pre><code>public void step(boolean useQueueOnly) {\n        count ++;\n        m_fixedNodeId = m_nextNodeId;\n        m_fixedCost = m_nextCost;\n        int fromNodeId = m_current.getPrevNodeId();\n\n        int arcId = m_network.getFirstArc(m_fixedNodeId);\n        while (arcId != Integer.MIN_VALUE) {\n            int nextNodeId = m_network.getBegNodeId(arcId);\n            if (nextNodeId == m_fixedNodeId) {\n                nextNodeId = m_network.getEndNodeId(arcId);\n            }\n            int arcCost;\n            if (m_forwardDirection) {\n                arcCost = m_network.getCost(arcId, m_fixedNodeId, fromNodeId);\n            } else {\n                arcCost = m_network.getCost(arcId, nextNodeId, fromNodeId);\n            }\n\n            arcCost = Math.max(MIN_COST_ALLOWED, arcCost);\n\n            if (arcCost != Integer.MAX_VALUE) {\n                int newNodeCost = (int) Math.min((long) m_fixedCost + arcCost,\n                        Integer.MAX_VALUE);\n\n                int nodePrevCost  = fromMap.get(nextNodeId) != null ? fromMap.get(nextNodeId).getCost() : Integer.MAX_VALUE;\n\n                double approxCost = newNodeCost + m_approximator.approximate(nextNodeId);\n\n                AStarEntry ase = new AStarEntry(nextNodeId, approxCost, arcId, m_current, m_fixedNodeId, newNodeCost);\n\n                if ((nodePrevCost == Integer.MAX_VALUE) &amp;&amp;\n                        (newNodeCost != Integer.MAX_VALUE)) {\n                    //haven't yet reached this node.\n                    if(fromMap.get(nextNodeId) == null){\n                        fromMap.put(nextNodeId, ase);\n                        m_priorityNodeQueue.add(ase);\n                    }\n\n                } else if (newNodeCost &lt; nodePrevCost) {\n                    //already reached this node.\n                    m_priorityNodeQueue.remove(ase);\n\n                }\n            }\n            arcId = m_network.getNextArc(m_fixedNodeId, arcId);\n        }\n\n        m_current = m_priorityNodeQueue.poll();\n        m_nextNodeId = m_current.getNodeId();\n        m_nextCost = m_current.getCost();\n\n}\n</code></pre>\n\n<p>This is the class I am using in the priority queue.</p>\n\n<pre><code>class AStarEntry implements Cloneable, Comparable&lt;AStarEntry&gt;{\n\n    public double m_weight;\n    public int m_nodeId;\n    public int m_arcId;\n    public int m_prevNodeId;\n    public int m_cost;\n\n    public AStarEntry m_parent;\n\n    public AStarEntry(int nodeId, double weight, int arcId, AStarEntry parent, int prevNodeId, int cost) {\n        m_nodeId = nodeId;\n        m_weight = weight;\n        m_arcId = arcId;\n        m_parent = parent;\n        m_prevNodeId = prevNodeId;\n        m_cost = cost;\n    }\n\n    @Override\n    public int compareTo(AStarEntry o) {\n\n        // assumption no NaN and no -0        \n        return m_weight &gt; o.m_weight ? +1 : m_weight &lt; o.m_weight ? -1 : 0;\n    }\n\n    public double getWeight() {\n        return m_weight;\n    }\n\n    public int getNodeId() {\n        return m_nodeId;\n    }\n\n    public int getArcId() {\n        return m_arcId;\n    }\n\n    public AStarEntry getParent() {\n        return m_parent;\n    }\n\n    public int getPrevNodeId() {\n        return m_prevNodeId;\n    }\n\n    public int getCost() {\n        return m_cost;\n    }\n\n    @Override\n    public String toString() {\n\n        return m_nodeId + \" (\" + m_arcId + \") weight: \" + m_weight;\n    }\n}\n</code></pre>\n\n<p>I am not able to figure out the reason for bad performance, please help me identify one.</p>\n"},{"tags":["java","php","architecture","memcached"],"comments":[{"owner":{"account_id":81202,"reputation":12119,"user_id":229106,"accept_rate":76,"display_name":"ankitjaininfo"},"score":0,"creation_date":1280298750,"post_id":3350231,"comment_id":91164107,"body_markdown":"[PHP/Java Bridge](http://php-java-bridge.sourceforge.net/pjb/)","body":"<a href=\"http://php-java-bridge.sourceforge.net/pjb/\" rel=\"nofollow noreferrer\">PHP/Java Bridge</a>"},{"owner":{"account_id":624970,"reputation":821,"user_id":364074,"accept_rate":58,"display_name":"Sambo"},"score":0,"creation_date":1280304721,"post_id":3350231,"comment_id":91164108,"body_markdown":"This looks like a headache.","body":"This looks like a headache."}],"answers":[{"comments":[{"owner":{"account_id":624970,"reputation":821,"user_id":364074,"accept_rate":58,"display_name":"Sambo"},"score":0,"creation_date":1280304834,"post_id":3350328,"comment_id":3478679,"body_markdown":"Thanks for the input!  I opted to go with plain &#39;ol SocketServer which cuts down on the overhead of using WebServices.  It&#39;s a good point that using WebServices would allow other applications to connect to it, but that&#39;s unnecessary at the moment.","body":"Thanks for the input!  I opted to go with plain &#39;ol SocketServer which cuts down on the overhead of using WebServices.  It&#39;s a good point that using WebServices would allow other applications to connect to it, but that&#39;s unnecessary at the moment."},{"owner":{"account_id":161338,"reputation":9628,"user_id":382011,"accept_rate":97,"display_name":"Łukasz W."},"score":0,"creation_date":1280305279,"post_id":3350328,"comment_id":3478730,"body_markdown":"Nice, writing your own servlet will be just fine. If you satisfied with my answer anyway, please tag it as answered ;)","body":"Nice, writing your own servlet will be just fine. If you satisfied with my answer anyway, please tag it as answered ;)"}],"tags":[],"owner":{"account_id":161338,"reputation":9628,"user_id":382011,"accept_rate":97,"display_name":"Łukasz W."},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1280297495,"creation_date":1280297495,"answer_id":3350328,"question_id":3350231,"body_markdown":"My suggestion is to use WebServices... Write and run webservice in Java, and then request it in php by using f.e. NuSOAP. This solution have one more advantage - your webservice can be used easily in other applications like f.e. .NET ones...\r\n\r\nAnother option which might be easier if you have small number of methods is to build Servlet in Java which will take the parameters as GET request.\r\n\r\nBoth those solutions are strictly web-based, and both of them are working on separate threads so they guarantee you good performance.","title":"How can I communicate between PHP and a Java program?","body":"<p>My suggestion is to use WebServices... Write and run webservice in Java, and then request it in php by using f.e. NuSOAP. This solution have one more advantage - your webservice can be used easily in other applications like f.e. .NET ones...</p>\n\n<p>Another option which might be easier if you have small number of methods is to build Servlet in Java which will take the parameters as GET request.</p>\n\n<p>Both those solutions are strictly web-based, and both of them are working on separate threads so they guarantee you good performance.</p>\n"},{"comments":[{"owner":{"account_id":14373258,"reputation":121,"user_id":10382407,"display_name":"LeanKhan"},"score":0,"creation_date":1611906966,"post_id":3351001,"comment_id":116605539,"body_markdown":"11 years later but how did you achieve this?","body":"11 years later but how did you achieve this?"}],"tags":[],"owner":{"account_id":624970,"reputation":821,"user_id":364074,"accept_rate":58,"display_name":"Sambo"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1280304688,"creation_date":1280304688,"answer_id":3351001,"question_id":3350231,"body_markdown":"I&#39;m using socket server on the Java end, and PHP sockets on the PHP end.  Works great.\r\n\r\nThere&#39;s no need to overcomplicate things with PHP/Java bridge, and no need for overhead of creating a web server.\r\n\r\nSockets work great, and I&#39;m actually a bit ashamed I even asked the question to begin work.","title":"How can I communicate between PHP and a Java program?","body":"<p>I'm using socket server on the Java end, and PHP sockets on the PHP end.  Works great.</p>\n\n<p>There's no need to overcomplicate things with PHP/Java bridge, and no need for overhead of creating a web server.</p>\n\n<p>Sockets work great, and I'm actually a bit ashamed I even asked the question to begin work.</p>\n"}],"owner":{"account_id":624970,"reputation":821,"user_id":364074,"accept_rate":58,"display_name":"Sambo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10870,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1664885063,"creation_date":1280296301,"question_id":3350231,"body_markdown":"I&#39;m working on a web application that frequently requires a calculation intense query to be run, the results of which are stored in a separate table.  Using MySQL, this query takes about **500ms** (as optimized as possible, believe me).  To eliminate this bottleneck, I&#39;ve created a Java program that loads the relevant DB data into memory and performs the query itself; it takes about **8ms** (something I&#39;m a little bit proud of).  I&#39;d like to use this Java program to get the results, and if it fails or is unavailable, failover to having PHP run a MySQL query.\r\n\r\nSince loading the data into the Java application takes some time, it&#39;s going to load it once and remain running as a background process.  **Now, the question is how do I communicate with this Java application via PHP?**\r\n\r\nKeep in mind:\r\n\r\n* Multiple instances of PHP may need to communicate with this Java process simultaneously.\r\n* If the Java instance cannot be found (eg: it crashes for some reason) PHP should progress by using the older and slower MySQL method.\r\n* An intermediary process, such as Memcache, is acceptable.\r\n* Ideally, the solution would withstand race conditions.\r\n* I would preferably not like to use MySQL as the intermediary.\r\n\r\nI was going to use Memcache, where PHP would write to a known key and poll until that key changed to &quot;completed&quot;, meanwhile Java would poll that key and once it found something perform the job and set it to &quot;completed&quot;.  However, this wouldn&#39;t work for two reasons.  First, both PHP and Java read/write to Memcache using serialized objects, and there&#39;s no way to change that, and I don&#39;t want Java to unserialize PHP objects and vice/versa -- it&#39;s too messy.  Second, this is not ACID compliant -- if a queue built up there would be race conditions.\r\n\r\nFor now, I&#39;m stuck with polling MySQL &quot;selects&quot; to see if a job is off the queue or not, which is far from an optimal solution because the poll time will need to be slower so MySQL doesn&#39;t get pinged too frequently.  I need a better solution!\r\n\r\nThanks.\r\n\r\n**Edit:  Duh.  It looks like I will be using some sort of SocketServer in Java, which I&#39;m unfamiliar with.  An example might help :)**","title":"How can I communicate between PHP and a Java program?","body":"<p>I'm working on a web application that frequently requires a calculation intense query to be run, the results of which are stored in a separate table.  Using MySQL, this query takes about <strong>500ms</strong> (as optimized as possible, believe me).  To eliminate this bottleneck, I've created a Java program that loads the relevant DB data into memory and performs the query itself; it takes about <strong>8ms</strong> (something I'm a little bit proud of).  I'd like to use this Java program to get the results, and if it fails or is unavailable, failover to having PHP run a MySQL query.</p>\n\n<p>Since loading the data into the Java application takes some time, it's going to load it once and remain running as a background process.  <strong>Now, the question is how do I communicate with this Java application via PHP?</strong></p>\n\n<p>Keep in mind:</p>\n\n<ul>\n<li>Multiple instances of PHP may need to communicate with this Java process simultaneously.</li>\n<li>If the Java instance cannot be found (eg: it crashes for some reason) PHP should progress by using the older and slower MySQL method.</li>\n<li>An intermediary process, such as Memcache, is acceptable.</li>\n<li>Ideally, the solution would withstand race conditions.</li>\n<li>I would preferably not like to use MySQL as the intermediary.</li>\n</ul>\n\n<p>I was going to use Memcache, where PHP would write to a known key and poll until that key changed to \"completed\", meanwhile Java would poll that key and once it found something perform the job and set it to \"completed\".  However, this wouldn't work for two reasons.  First, both PHP and Java read/write to Memcache using serialized objects, and there's no way to change that, and I don't want Java to unserialize PHP objects and vice/versa -- it's too messy.  Second, this is not ACID compliant -- if a queue built up there would be race conditions.</p>\n\n<p>For now, I'm stuck with polling MySQL \"selects\" to see if a job is off the queue or not, which is far from an optimal solution because the poll time will need to be slower so MySQL doesn't get pinged too frequently.  I need a better solution!</p>\n\n<p>Thanks.</p>\n\n<p><strong>Edit:  Duh.  It looks like I will be using some sort of SocketServer in Java, which I'm unfamiliar with.  An example might help :)</strong></p>\n"},{"tags":["java","spring-boot","printing","awt","pdfbox"],"answers":[{"comments":[{"owner":{"display_name":"user16514999"},"score":0,"creation_date":1665054421,"post_id":73947491,"comment_id":130611802,"body_markdown":"I want the status to be captured automatically.","body":"I want the status to be captured automatically."},{"owner":{"display_name":"user16514999"},"score":0,"creation_date":1665054950,"post_id":73947491,"comment_id":130612000,"body_markdown":"From PrintJobListener, by overriding the methods,                                                                        \tpublic void printDataTransferCompleted(PrintJobEvent pje) {\n\t}\n\tpublic void printJobCompleted(PrintJobEvent pje) {\n\t}\n\tpublic void printJobFailed(PrintJobEvent pje) {\n\t}\n\tpublic void printJobCanceled(PrintJobEvent pje) {\n\t}\n\tpublic void printJobNoMoreEvents(PrintJobEvent pje) {\n\t}\n\tpublic void printJobRequiresAttention(PrintJobEvent pje) {\n\t}","body":"From PrintJobListener, by overriding the methods,                                                                        \tpublic void printDataTransferCompleted(PrintJobEvent pje) { \t} \tpublic void printJobCompleted(PrintJobEvent pje) { \t} \tpublic void printJobFailed(PrintJobEvent pje) { \t} \tpublic void printJobCanceled(PrintJobEvent pje) { \t} \tpublic void printJobNoMoreEvents(PrintJobEvent pje) { \t} \tpublic void printJobRequiresAttention(PrintJobEvent pje) { \t}"}],"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664884471,"creation_date":1664884471,"answer_id":73947491,"question_id":73946195,"body_markdown":"Very likely, after your code has run as expected the correct result has been delivered. On the contrary your code would not execute correctly but abort when - for whatever reason - an exception is thrown. So to report this status you could use a try-catch block:\r\n\r\n    try {\r\n        // place here your logic from your question\r\n\r\n        // check if the job was cancelled by user\r\n        if (job.isCancelled()) {\r\n            log.info(&quot;job cancelled by user&quot;);\r\n            return printJobCancelled;\r\n        }\r\n\r\n        return printDataTransferCompleted; // mark success\r\n    } catch (Exception e} {        // bad pattern to catch Exception. Get more concise if you can\r\n        log.error(&quot;Could not print&quot;, e); // at least log what happened. If necessary, throw some exception\r\n        return printJobFailed;    // mark failure\r\n    }","title":"how to get print status in java?","body":"<p>Very likely, after your code has run as expected the correct result has been delivered. On the contrary your code would not execute correctly but abort when - for whatever reason - an exception is thrown. So to report this status you could use a try-catch block:</p>\n<pre><code>try {\n    // place here your logic from your question\n\n    // check if the job was cancelled by user\n    if (job.isCancelled()) {\n        log.info(&quot;job cancelled by user&quot;);\n        return printJobCancelled;\n    }\n\n    return printDataTransferCompleted; // mark success\n} catch (Exception e} {        // bad pattern to catch Exception. Get more concise if you can\n    log.error(&quot;Could not print&quot;, e); // at least log what happened. If necessary, throw some exception\n    return printJobFailed;    // mark failure\n}\n</code></pre>\n"}],"owner":{"display_name":"user16514999"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":319,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1664884471,"creation_date":1664877575,"question_id":73946195,"body_markdown":"I am using the below java code to print the pdf file with print status, but the print status(**printDataTransferCompleted,printJobCompleted,printJobFailed,printJobCanceled,etc,.**) is not returning.\r\n\r\nBelow is the Java code,\r\n```\r\n\tPDDocument document = PDDocument.load(new File(&quot;D:\\\\Rose\\\\Work\\\\17.pdf&quot;));\r\n\r\n        PrintService myPrintService = findPrintService(&quot;Champ RP Series&quot;);\r\n\r\n        PrinterJob job = PrinterJob.getPrinterJob();\r\n        job.setPageable(new PDFPageable(document));\r\n        job.setPrintService(myPrintService);\r\n        job.print();\r\n        if(job.isCancelled() == true) {\r\n        \tSystem.out.println(&quot;cancelled&quot;+ job.isCancelled());\r\n        \t\r\n        }else {\r\n        \tSystem.out.println(&quot;progress&quot;+ job.isCancelled());\r\n        }\r\n       \r\n        DocPrintJob docPrint = myPrintService.createPrintJob();\r\n\t\tSystem.out.println(docPrint.getPrintService());\r\n\t\tdocPrint.addPrintJobListener(new PrintJobListenerSample());\r\n```\r\nHow do I return the print status(printDataTransferCompleted,printJobCompleted,printJobFailed,printJobCanceled,etc,.)?\r\n\r\nThank you","title":"how to get print status in java?","body":"<p>I am using the below java code to print the pdf file with print status, but the print status(<strong>printDataTransferCompleted,printJobCompleted,printJobFailed,printJobCanceled,etc,.</strong>) is not returning.</p>\n<p>Below is the Java code,</p>\n<pre><code>    PDDocument document = PDDocument.load(new File(&quot;D:\\\\Rose\\\\Work\\\\17.pdf&quot;));\n\n        PrintService myPrintService = findPrintService(&quot;Champ RP Series&quot;);\n\n        PrinterJob job = PrinterJob.getPrinterJob();\n        job.setPageable(new PDFPageable(document));\n        job.setPrintService(myPrintService);\n        job.print();\n        if(job.isCancelled() == true) {\n            System.out.println(&quot;cancelled&quot;+ job.isCancelled());\n            \n        }else {\n            System.out.println(&quot;progress&quot;+ job.isCancelled());\n        }\n       \n        DocPrintJob docPrint = myPrintService.createPrintJob();\n        System.out.println(docPrint.getPrintService());\n        docPrint.addPrintJobListener(new PrintJobListenerSample());\n</code></pre>\n<p>How do I return the print status(printDataTransferCompleted,printJobCompleted,printJobFailed,printJobCanceled,etc,.)?</p>\n<p>Thank you</p>\n"},{"tags":["java","android","google-maps","fusedlocationproviderclient"],"answers":[{"comments":[{"owner":{"account_id":24841617,"reputation":3,"user_id":18719552,"display_name":"sern"},"score":0,"creation_date":1664880776,"post_id":73946673,"comment_id":130566567,"body_markdown":"Dear sir, this not work for me. It just gets old data, because `getCurrentLocation()` is skipped for some unknown reason.","body":"Dear sir, this not work for me. It just gets old data, because <code>getCurrentLocation()</code> is skipped for some unknown reason."},{"owner":{"account_id":17945478,"reputation":1363,"user_id":16177121,"display_name":"Sidharth Mudgil"},"score":0,"creation_date":1664880933,"post_id":73946673,"comment_id":130566634,"body_markdown":"Did you try changing your device location? And where I&#39;ve used `getCurrentLocation`?","body":"Did you try changing your device location? And where I&#39;ve used <code>getCurrentLocation</code>?"},{"owner":{"account_id":24841617,"reputation":3,"user_id":18719552,"display_name":"sern"},"score":0,"creation_date":1664881989,"post_id":73946673,"comment_id":130566967,"body_markdown":"In case of I&#39;m using emulator, I have changed the location from &quot;Extended Control&quot;-&gt;&quot;Location&quot;-&gt;&quot;Single Point&quot;, but `getLastLocation()` do not work for this change, while it gets an old location before change. As you can see the line under `getCurrentLocation()` in my code, I have  tried it.","body":"In case of I&#39;m using emulator, I have changed the location from &quot;Extended Control&quot;-&gt;&quot;Location&quot;-&gt;&quot;Single Point&quot;, but <code>getLastLocation()</code> do not work for this change, while it gets an old location before change. As you can see the line under <code>getCurrentLocation()</code> in my code, I have  tried it."},{"owner":{"account_id":17945478,"reputation":1363,"user_id":16177121,"display_name":"Sidharth Mudgil"},"score":0,"creation_date":1664883242,"post_id":73946673,"comment_id":130567368,"body_markdown":"is the code inside MapFragment?","body":"is the code inside MapFragment?"},{"owner":{"account_id":24841617,"reputation":3,"user_id":18719552,"display_name":"sern"},"score":0,"creation_date":1664883402,"post_id":73946673,"comment_id":130567413,"body_markdown":"I just want to show the location in textview rather than a map. Do I have to implement MapFragment in this case.","body":"I just want to show the location in textview rather than a map. Do I have to implement MapFragment in this case."},{"owner":{"account_id":24841617,"reputation":3,"user_id":18719552,"display_name":"sern"},"score":0,"creation_date":1664883575,"post_id":73946673,"comment_id":130567459,"body_markdown":"By the way, I have found that the my onCompleteListener is seemed to be skipped. When I debugging and force the code inside the listener runs, it works perfectly.","body":"By the way, I have found that the my onCompleteListener is seemed to be skipped. When I debugging and force the code inside the listener runs, it works perfectly."},{"owner":{"account_id":17945478,"reputation":1363,"user_id":16177121,"display_name":"Sidharth Mudgil"},"score":0,"creation_date":1664884252,"post_id":73946673,"comment_id":130567670,"body_markdown":"I updated the answer, try using location manager","body":"I updated the answer, try using location manager"},{"owner":{"account_id":17945478,"reputation":1363,"user_id":16177121,"display_name":"Sidharth Mudgil"},"score":0,"creation_date":1664990452,"post_id":73946673,"comment_id":130596596,"body_markdown":"@sern if it&#39;s the answer for your question, you can accept this answer","body":"@sern if it&#39;s the answer for your question, you can accept this answer"},{"owner":{"account_id":24841617,"reputation":3,"user_id":18719552,"display_name":"sern"},"score":0,"creation_date":1665288484,"post_id":73946673,"comment_id":130663100,"body_markdown":"Sorry for replying late! I have tried `LocationManager` but still not work. However, I have found that my code`Task&lt;Location&gt; locationResult =                   mFusedLocationProviderClient.getCurrentLocation(Priority.PRIORITY_HIGH_ACCURACY, cancellationTokenSource.getToken());`  running successfully in another project, but in this this project, I can only apply `getLastLocation()`.","body":"Sorry for replying late! I have tried <code>LocationManager</code> but still not work. However, I have found that my code<code>Task&lt;Location&gt; locationResult =                   mFusedLocationProviderClient.getCurrentLocation(Priority.PRI&zwnj;&#8203;ORITY_HIGH_ACCURACY, cancellationTokenSource.getToken());</code>  running successfully in another project, but in this this project, I can only apply <code>getLastLocation()</code>."},{"owner":{"account_id":24841617,"reputation":3,"user_id":18719552,"display_name":"sern"},"score":0,"creation_date":1665288501,"post_id":73946673,"comment_id":130663101,"body_markdown":"Therefore, I have double checked my setting (manifest, API and gradle), but still have no idea. Do you have any ideas about this situation. If so, could you please tell me or post in your answer, I will accept it immidiately.","body":"Therefore, I have double checked my setting (manifest, API and gradle), but still have no idea. Do you have any ideas about this situation. If so, could you please tell me or post in your answer, I will accept it immidiately."}],"tags":[],"owner":{"account_id":17945478,"reputation":1363,"user_id":16177121,"display_name":"Sidharth Mudgil"},"comment_count":10,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664884198,"creation_date":1664880186,"answer_id":73946673,"question_id":73946530,"body_markdown":"You can get your last known location using the code below\r\n\r\n``` java\r\nFusedLocationProviderClient fusedLocationClient = LocationServices.getFusedLocationProviderClient(getContext());\r\nfusedLocationClient.getLastLocation().addOnSuccessListener(location -&gt; {\r\n    if (location != null) {\r\n        // your last known location is stored in `location`\r\n    }\r\n});\r\n```\r\n\r\nrefer: [https://developer.android.com/training/location/retrieve-current][1]\r\n\r\n\r\n----------\r\n\r\n\r\n**Using `Location Manager`**\r\n```\r\nLocationManager manager = (LocationManager) this.getSystemService(LOCATION_SERVICE);\r\nLocationListener listener = new LocationListener() {\r\n    @Override\r\n    public void onLocationChanged(@NonNull Location location) {\r\n        mMap.clear();\r\n        LatLng userLocation = new LatLng(location.getLatitude(), location.getLongitude());\r\n        mMap.addMarker(new MarkerOptions().position(userLocation).title(&quot;Me&quot;));\r\n        mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(userLocation, 15));\r\n    }\r\n\r\n    @Override\r\n    public void onProviderEnabled(@NonNull String provider) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onProviderDisabled(@NonNull String provider) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onStatusChanged(String provider, int status, Bundle extras) {\r\n\r\n    }\r\n};\r\n\r\nmanager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);\r\n```\r\n\r\n\r\n  [1]: https://developer.android.com/training/location/retrieve-current","title":"How to use getCurrentLocation of fused location provider client?","body":"<p>You can get your last known location using the code below</p>\n<pre class=\"lang-java prettyprint-override\"><code>FusedLocationProviderClient fusedLocationClient = LocationServices.getFusedLocationProviderClient(getContext());\nfusedLocationClient.getLastLocation().addOnSuccessListener(location -&gt; {\n    if (location != null) {\n        // your last known location is stored in `location`\n    }\n});\n</code></pre>\n<p>refer: <a href=\"https://developer.android.com/training/location/retrieve-current\" rel=\"nofollow noreferrer\">https://developer.android.com/training/location/retrieve-current</a></p>\n<hr />\n<p><strong>Using <code>Location Manager</code></strong></p>\n<pre><code>LocationManager manager = (LocationManager) this.getSystemService(LOCATION_SERVICE);\nLocationListener listener = new LocationListener() {\n    @Override\n    public void onLocationChanged(@NonNull Location location) {\n        mMap.clear();\n        LatLng userLocation = new LatLng(location.getLatitude(), location.getLongitude());\n        mMap.addMarker(new MarkerOptions().position(userLocation).title(&quot;Me&quot;));\n        mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(userLocation, 15));\n    }\n\n    @Override\n    public void onProviderEnabled(@NonNull String provider) {\n\n    }\n\n    @Override\n    public void onProviderDisabled(@NonNull String provider) {\n\n    }\n\n    @Override\n    public void onStatusChanged(String provider, int status, Bundle extras) {\n\n    }\n};\n\nmanager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);\n</code></pre>\n"}],"owner":{"account_id":24841617,"reputation":3,"user_id":18719552,"display_name":"sern"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":703,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73946673,"answer_count":1,"score":0,"last_activity_date":1664884198,"creation_date":1664879389,"question_id":73946530,"body_markdown":"I am new for Android coding, and have writen a code to get location of Android Device but failed. Nothing changed (e.g. `mLastKnownLocation` or `cityName`) after runing, and no expception. I have already checked permission and build.gradle. Could you give me advices to implement it?\r\n\r\n    private void getDeviceLocation() {\r\n            try {\r\n                if (mLocationPermissionGranted) {\r\n    \r\n                    Task&lt;Location&gt; locationResult = mFusedLocationProviderClient.getCurrentLocation(Priority.PRIORITY_HIGH_ACCURACY,cancellationToken);\r\n                    //Task&lt;Location&gt; locationResult = mFusedLocationProviderClient.getLastLocation();\r\n    \r\n                    locationResult.addOnCompleteListener(this, new OnCompleteListener&lt;Location&gt;(){\r\n                        @Override\r\n                        public void onComplete(@NonNull Task&lt;Location&gt; task) {\r\n                            if (task.isSuccessful()) {\r\n                                // Obtain the current location of the device\r\n                                mLastKnownLocation = task.getResult();\r\n                                String currentOrDefault = &quot;Current&quot;;\r\n    \r\n                                if (mLastKnownLocation != null) {\r\n                                    Log.d(TAG, &quot;Get current location&quot;);\r\n                                } else {\r\n                                    Log.d(TAG, &quot;Current location is null. Using defaults.&quot;);\r\n                                    currentOrDefault = &quot;Default&quot;;\r\n    \r\n                                    // Set current location to the default location\r\n                                    mLastKnownLocation = new Location(&quot;&quot;);\r\n                                    mLastKnownLocation.setLatitude(mDefaultLocation.latitude);\r\n                                    mLastKnownLocation.setLongitude(mDefaultLocation.longitude);\r\n                                }\r\n    \r\n                                String city = &quot;CorrectCity&quot;;\r\n                                try {\r\n                                    List&lt;Address&gt; address =\r\n                                            geocoder.getFromLocation(mLastKnownLocation.getLatitude(),\r\n                                            mLastKnownLocation.getLongitude(), 1);\r\n                                    if(address.isEmpty())\r\n                                        city = &quot;No_city&quot;;\r\n                                    else{\r\n                                    Address target = address.get(0);\r\n    \r\n                                    if(target.getLocality()!=null)\r\n                                        city = target.getLocality();\r\n                                    else\r\n                                        city = target.getAdminArea();}\r\n                                } catch (IOException e) {\r\n                                    Log.e(&quot;Exception: %s&quot;, e.getMessage());\r\n                                }\r\n    \r\n                                cityName = city;\r\n                                // Show location details on the location TextView\r\n                                String msg = currentOrDefault + &quot; Location: &quot; +\r\n                                        Double.toString(mLastKnownLocation.getLatitude()) + &quot;, &quot; +\r\n                                        Double.toString(mLastKnownLocation.getLongitude())+ &quot;  &quot; +\r\n                                        cityName;\r\n                                locationTextView.setText(msg);\r\n    \r\n                            } else {\r\n                                Log.d(TAG, &quot;Current location is null. Using defaults.&quot;);\r\n                                Log.e(TAG, &quot;Exception: %s&quot;, task.getException());\r\n                                /*mMap.moveCamera(CameraUpdateFactory\r\n                                        .newLatLngZoom(mDefaultLocation, DEFAULT_ZOOM));\r\n                                mMap.getUiSettings().setMyLocationButtonEnabled(false);*/\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            } catch (SecurityException e)  {\r\n                Log.e(&quot;Exception: %s&quot;, e.getMessage());\r\n                cityName = &quot;ErrorCity&quot;;\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"How to use getCurrentLocation of fused location provider client?","body":"<p>I am new for Android coding, and have writen a code to get location of Android Device but failed. Nothing changed (e.g. <code>mLastKnownLocation</code> or <code>cityName</code>) after runing, and no expception. I have already checked permission and build.gradle. Could you give me advices to implement it?</p>\n<pre><code>private void getDeviceLocation() {\n        try {\n            if (mLocationPermissionGranted) {\n\n                Task&lt;Location&gt; locationResult = mFusedLocationProviderClient.getCurrentLocation(Priority.PRIORITY_HIGH_ACCURACY,cancellationToken);\n                //Task&lt;Location&gt; locationResult = mFusedLocationProviderClient.getLastLocation();\n\n                locationResult.addOnCompleteListener(this, new OnCompleteListener&lt;Location&gt;(){\n                    @Override\n                    public void onComplete(@NonNull Task&lt;Location&gt; task) {\n                        if (task.isSuccessful()) {\n                            // Obtain the current location of the device\n                            mLastKnownLocation = task.getResult();\n                            String currentOrDefault = &quot;Current&quot;;\n\n                            if (mLastKnownLocation != null) {\n                                Log.d(TAG, &quot;Get current location&quot;);\n                            } else {\n                                Log.d(TAG, &quot;Current location is null. Using defaults.&quot;);\n                                currentOrDefault = &quot;Default&quot;;\n\n                                // Set current location to the default location\n                                mLastKnownLocation = new Location(&quot;&quot;);\n                                mLastKnownLocation.setLatitude(mDefaultLocation.latitude);\n                                mLastKnownLocation.setLongitude(mDefaultLocation.longitude);\n                            }\n\n                            String city = &quot;CorrectCity&quot;;\n                            try {\n                                List&lt;Address&gt; address =\n                                        geocoder.getFromLocation(mLastKnownLocation.getLatitude(),\n                                        mLastKnownLocation.getLongitude(), 1);\n                                if(address.isEmpty())\n                                    city = &quot;No_city&quot;;\n                                else{\n                                Address target = address.get(0);\n\n                                if(target.getLocality()!=null)\n                                    city = target.getLocality();\n                                else\n                                    city = target.getAdminArea();}\n                            } catch (IOException e) {\n                                Log.e(&quot;Exception: %s&quot;, e.getMessage());\n                            }\n\n                            cityName = city;\n                            // Show location details on the location TextView\n                            String msg = currentOrDefault + &quot; Location: &quot; +\n                                    Double.toString(mLastKnownLocation.getLatitude()) + &quot;, &quot; +\n                                    Double.toString(mLastKnownLocation.getLongitude())+ &quot;  &quot; +\n                                    cityName;\n                            locationTextView.setText(msg);\n\n                        } else {\n                            Log.d(TAG, &quot;Current location is null. Using defaults.&quot;);\n                            Log.e(TAG, &quot;Exception: %s&quot;, task.getException());\n                            /*mMap.moveCamera(CameraUpdateFactory\n                                    .newLatLngZoom(mDefaultLocation, DEFAULT_ZOOM));\n                            mMap.getUiSettings().setMyLocationButtonEnabled(false);*/\n                        }\n                    }\n                });\n            }\n        } catch (SecurityException e)  {\n            Log.e(&quot;Exception: %s&quot;, e.getMessage());\n            cityName = &quot;ErrorCity&quot;;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","arrays","postgresql","jdbc"],"answers":[{"comments":[{"owner":{"account_id":1037707,"reputation":147,"user_id":1044484,"display_name":"Ben"},"score":0,"creation_date":1536355670,"post_id":52223160,"comment_id":91409289,"body_markdown":"Thanks. &quot;my_data is not any array. It&#39;s a string that happens to look like an array&quot; - This seems extremely obvious now that you point it out; oops. Maybe I was tricked by the call to rs.getArray() working correctly, which I would not intuitively expect. Do you know why that is?","body":"Thanks. &quot;my_data is not any array. It&#39;s a string that happens to look like an array&quot; - This seems extremely obvious now that you point it out; oops. Maybe I was tricked by the call to rs.getArray() working correctly, which I would not intuitively expect. Do you know why that is?"},{"owner":{"account_id":1037707,"reputation":147,"user_id":1044484,"display_name":"Ben"},"score":0,"creation_date":1536355964,"post_id":52223160,"comment_id":91409366,"body_markdown":"I had suspected `anyarray` may cause an issue, which was the reason I wanted to build a simpler MWE first as an experiment. I&#39;m surprised I didn&#39;t try one of the single-typed array fields from `pg_data` first, but I guess I must have skipped that step. If I convert everything to strings, I can always pull the SQL type from `pg_data` as well to help with the decoding on the Java side.","body":"I had suspected <code>anyarray</code> may cause an issue, which was the reason I wanted to build a simpler MWE first as an experiment. I&#39;m surprised I didn&#39;t try one of the single-typed array fields from <code>pg_data</code> first, but I guess I must have skipped that step. If I convert everything to strings, I can always pull the SQL type from <code>pg_data</code> as well to help with the decoding on the Java side."}],"tags":[],"owner":{"display_name":"user330315"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1536326940,"creation_date":1536325333,"answer_id":52223160,"question_id":52189147,"body_markdown":"In the query `SELECT &#39;{1, 2, 3}&#39; AS my_data` the column `my_data` is **not** any array. It&#39;s a string that happens to _look_ like an array - but the single quotes denote a `text` (or `varchar`) value.\r\n\r\nAnd because the column&#39;s data type is not an array, calling `getArray()` throws an exception. \r\n\r\nIf you want an array, you need to cast the text value to an array:\r\n\r\n\r\n    SELECT &#39;{1, 2, 3}&#39;::int[] AS my_data;\r\n\r\nor better: use an explicit array constructor:\r\n\r\n    SELECT array[1, 2, 3] AS my_data;\r\n\r\n---\r\n\r\n`pg_stats.histogram_bounds` is defined as `anyarray` - it&#39;s not a typed array as it contains different data types for each column (which means in each row, as that table contains one row per table column). \r\n\r\nApparently the JDBC driver can&#39;t work with `anyarray` properly. \r\n\r\nTo deal with the values from Java code, I think the easiest way is to convert it to a string which then can be converted back to a text array (as the string representation is correct). \r\n\r\nSo if you use the following query: \r\n\r\n    select schemaname, tablename, attname, histogram_bounds::text::text[] as histogram_bounds, ..\r\n    from pg_stats\r\n    where ...\r\n\r\nYou should be able to retrieve the content of the `histogram_bounds` column (but you get everything as strings, rather than a data type matching the column&#39;s data type).\r\n\r\n\r\n","title":"Loading a non-materialised array from Postgres in Java","body":"<p>In the query <code>SELECT '{1, 2, 3}' AS my_data</code> the column <code>my_data</code> is <strong>not</strong> any array. It's a string that happens to <em>look</em> like an array - but the single quotes denote a <code>text</code> (or <code>varchar</code>) value.</p>\n\n<p>And because the column's data type is not an array, calling <code>getArray()</code> throws an exception. </p>\n\n<p>If you want an array, you need to cast the text value to an array:</p>\n\n<pre><code>SELECT '{1, 2, 3}'::int[] AS my_data;\n</code></pre>\n\n<p>or better: use an explicit array constructor:</p>\n\n<pre><code>SELECT array[1, 2, 3] AS my_data;\n</code></pre>\n\n<hr>\n\n<p><code>pg_stats.histogram_bounds</code> is defined as <code>anyarray</code> - it's not a typed array as it contains different data types for each column (which means in each row, as that table contains one row per table column). </p>\n\n<p>Apparently the JDBC driver can't work with <code>anyarray</code> properly. </p>\n\n<p>To deal with the values from Java code, I think the easiest way is to convert it to a string which then can be converted back to a text array (as the string representation is correct). </p>\n\n<p>So if you use the following query: </p>\n\n<pre><code>select schemaname, tablename, attname, histogram_bounds::text::text[] as histogram_bounds, ..\nfrom pg_stats\nwhere ...\n</code></pre>\n\n<p>You should be able to retrieve the content of the <code>histogram_bounds</code> column (but you get everything as strings, rather than a data type matching the column's data type).</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1636252780,"post_id":69868971,"comment_id":123506306,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/69868971/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":20459968,"reputation":11,"user_id":15012833,"display_name":"Furkan Uyanik"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664884197,"creation_date":1636245477,"answer_id":69868971,"question_id":52189147,"body_markdown":"I got the same error too. There was a int8[] type of column in my table. \r\n\r\nI moved my table to another schema with the DataGrip program. When the program moved my table to another schema, I saw that it changed its type of column to &quot;text&quot;. \r\n\r\nWhen I changed to int8[] type, resolved my problem.","title":"Loading a non-materialised array from Postgres in Java","body":"<p>I got the same error too. There was a int8[] type of column in my table.</p>\n<p>I moved my table to another schema with the DataGrip program. When the program moved my table to another schema, I saw that it changed its type of column to &quot;text&quot;.</p>\n<p>When I changed to int8[] type, resolved my problem.</p>\n"}],"owner":{"account_id":1037707,"reputation":147,"user_id":1044484,"display_name":"Ben"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":565,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":52223160,"answer_count":2,"score":2,"last_activity_date":1664884197,"creation_date":1536162675,"question_id":52189147,"body_markdown":"**The setting:**\r\nI am connecting to a Postgres database with Java, and trying to load the `pg_stats.histogram_bounds` statistic, which is an array in Postgres. I can extract the field as a `sql.Array` object with `Array histogramBounds = rs.getArray(&quot;histogram_bounds&quot;);`. This object can be printed with `toString()`, but I can&#39;t otherwise access any of the data (e.g. calls to `histogramBounds.getArray()`, `getBaseType`, etc.) all generate `PSQLException: No results were returned by the query.`.\r\n\r\nThe [documentation](https://docs.oracle.com/javase/tutorial/jdbc/basics/array.html), as well as various tutorials and SE questions suggest this should be valid.\r\n\r\nApparently `sql.Array` objects do not hold the array data directly, but point to it on the server. From my experiments I have the following MWE which shows the difference between an array value stored in a table in Postgres, and one which is somehow ephemeral or non-materialised (as I suspect `pg_stats` may be, being a view onto other internal tables).\r\n\r\n**The MWE:**\r\nI have two queries, one which selects data form a table and works, and one which selects data directly from the query, and does not work. I can&#39;t see any reason in the documentation they should not both work, and I would like to get the second version working to get the Java array `[1, 2, 3]`.\r\nConfusingly, `toString` still displays the data correctly in the second case, so it must be loaded successfully at some point.\r\n\r\n    import java.sql.Array;\r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    import java.sql.Statement;\r\n    \r\n    public class PostgresStatsExperiments {\r\n        public static void main(String[] args) throws SQLException {\r\n            Connection conn = DriverManager.getConnection(&quot;jdbc:postgresql://localhost/tmp&quot;, &quot;admin&quot;, &quot;admin&quot;);\r\n            Statement stmt = conn.createStatement();\r\n        \r\n            ResultSet rs = stmt.executeQuery(&quot;SELECT name, my_data from array_test;&quot;); // This one works\r\n            //ResultSet rs = stmt.executeQuery(&quot;SELECT &#39;{1, 2, 3}&#39; AS my_data;&quot;); // This one does not work.\r\n        \r\n            while (rs.next()) {\r\n                Array myData = rs.getArray(&quot;my_data&quot;);\r\n                System.out.println(myData);\r\n                System.out.println(myData.getArray()); // PSQLException here in the second case\r\n            }\r\n        \r\n            stmt.close();\r\n            rs.close();\r\n            conn.close();\r\n        }\r\n    }\r\n\r\nThe table `array_test` looks like this:\r\n\r\n    create table array_test ( name varchar, my_data integer ARRAY[3] );\r\n    insert into array_test values (&#39;Alice&#39;, &#39;{1, 2, 3}&#39;);\r\n    insert into array_test values (&#39;Bob&#39;, &#39;{4, 5, 6}&#39;);\r\n\r\nIn the second case, I get the following output:\r\n\r\n    {1, 2, 3}\r\n    Exception in thread &quot;main&quot; org.postgresql.util.PSQLException: No results were returned by the query.\r\n    \tat org.postgresql.jdbc2.TypeInfoCache.getPGArrayElement(TypeInfoCache.java:425)\r\n    \tat org.postgresql.jdbc2.AbstractJdbc2Array.buildArray(AbstractJdbc2Array.java:540)\r\n    \tat org.postgresql.jdbc2.AbstractJdbc2Array.getArrayImpl(AbstractJdbc2Array.java:171)\r\n    \tat org.postgresql.jdbc2.AbstractJdbc2Array.getArray(AbstractJdbc2Array.java:128)\r\n    \tat tmp.PostgresStatsExperiments.main(PostgresStatsExperiments.java:21)\r\n\r\n\r\nI am using `postgresql-9.3-1102-jdbc41.jar` from Maven, and the problem is also the same with the latest `42.2.4.jre7`.","title":"Loading a non-materialised array from Postgres in Java","body":"<p><strong>The setting:</strong>\nI am connecting to a Postgres database with Java, and trying to load the <code>pg_stats.histogram_bounds</code> statistic, which is an array in Postgres. I can extract the field as a <code>sql.Array</code> object with <code>Array histogramBounds = rs.getArray(\"histogram_bounds\");</code>. This object can be printed with <code>toString()</code>, but I can't otherwise access any of the data (e.g. calls to <code>histogramBounds.getArray()</code>, <code>getBaseType</code>, etc.) all generate <code>PSQLException: No results were returned by the query.</code>.</p>\n\n<p>The <a href=\"https://docs.oracle.com/javase/tutorial/jdbc/basics/array.html\" rel=\"nofollow noreferrer\">documentation</a>, as well as various tutorials and SE questions suggest this should be valid.</p>\n\n<p>Apparently <code>sql.Array</code> objects do not hold the array data directly, but point to it on the server. From my experiments I have the following MWE which shows the difference between an array value stored in a table in Postgres, and one which is somehow ephemeral or non-materialised (as I suspect <code>pg_stats</code> may be, being a view onto other internal tables).</p>\n\n<p><strong>The MWE:</strong>\nI have two queries, one which selects data form a table and works, and one which selects data directly from the query, and does not work. I can't see any reason in the documentation they should not both work, and I would like to get the second version working to get the Java array <code>[1, 2, 3]</code>.\nConfusingly, <code>toString</code> still displays the data correctly in the second case, so it must be loaded successfully at some point.</p>\n\n<pre><code>import java.sql.Array;\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Statement;\n\npublic class PostgresStatsExperiments {\n    public static void main(String[] args) throws SQLException {\n        Connection conn = DriverManager.getConnection(\"jdbc:postgresql://localhost/tmp\", \"admin\", \"admin\");\n        Statement stmt = conn.createStatement();\n\n        ResultSet rs = stmt.executeQuery(\"SELECT name, my_data from array_test;\"); // This one works\n        //ResultSet rs = stmt.executeQuery(\"SELECT '{1, 2, 3}' AS my_data;\"); // This one does not work.\n\n        while (rs.next()) {\n            Array myData = rs.getArray(\"my_data\");\n            System.out.println(myData);\n            System.out.println(myData.getArray()); // PSQLException here in the second case\n        }\n\n        stmt.close();\n        rs.close();\n        conn.close();\n    }\n}\n</code></pre>\n\n<p>The table <code>array_test</code> looks like this:</p>\n\n<pre><code>create table array_test ( name varchar, my_data integer ARRAY[3] );\ninsert into array_test values ('Alice', '{1, 2, 3}');\ninsert into array_test values ('Bob', '{4, 5, 6}');\n</code></pre>\n\n<p>In the second case, I get the following output:</p>\n\n<pre><code>{1, 2, 3}\nException in thread \"main\" org.postgresql.util.PSQLException: No results were returned by the query.\n    at org.postgresql.jdbc2.TypeInfoCache.getPGArrayElement(TypeInfoCache.java:425)\n    at org.postgresql.jdbc2.AbstractJdbc2Array.buildArray(AbstractJdbc2Array.java:540)\n    at org.postgresql.jdbc2.AbstractJdbc2Array.getArrayImpl(AbstractJdbc2Array.java:171)\n    at org.postgresql.jdbc2.AbstractJdbc2Array.getArray(AbstractJdbc2Array.java:128)\n    at tmp.PostgresStatsExperiments.main(PostgresStatsExperiments.java:21)\n</code></pre>\n\n<p>I am using <code>postgresql-9.3-1102-jdbc41.jar</code> from Maven, and the problem is also the same with the latest <code>42.2.4.jre7</code>.</p>\n"},{"tags":["java","spring","unit-testing","spring-boot","component-scan"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":1,"creation_date":1400262838,"post_id":23701616,"comment_id":36421231,"body_markdown":"What does `HelloWorlsRs` look like?","body":"What does <code>HelloWorlsRs</code> look like?"},{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1400266339,"post_id":23701616,"comment_id":36423216,"body_markdown":"Your test case isn&#39;t a configuration, and all of those commented things are irrelevant on it.","body":"Your test case isn&#39;t a configuration, and all of those commented things are irrelevant on it."},{"owner":{"account_id":3243454,"reputation":1405,"user_id":2735802,"accept_rate":71,"display_name":"Geyser14"},"score":0,"creation_date":1400540188,"post_id":23701616,"comment_id":36510942,"body_markdown":"see updated post for HelloWorldRs, etc.","body":"see updated post for HelloWorldRs, etc."},{"owner":{"account_id":21425,"reputation":10691,"user_id":52070,"accept_rate":67,"display_name":"David Newcomb"},"score":1,"creation_date":1441621391,"post_id":23701616,"comment_id":52737155,"body_markdown":"What happened? Did you fix you problem? How?","body":"What happened? Did you fix you problem? How?"},{"owner":{"account_id":1674439,"reputation":2685,"user_id":1540271,"display_name":"Marwin"},"score":0,"creation_date":1508830504,"post_id":23701616,"comment_id":80756061,"body_markdown":"From the `@EnableAutoConfiguration` I see that you are using spring-boot - which is certainly a good thing. Do you have a `@SpringBootApplication` in your project? Can you try to annotate your test as `@SpringBootTest`?","body":"From the <code>@EnableAutoConfiguration</code> I see that you are using spring-boot - which is certainly a good thing. Do you have a <code>@SpringBootApplication</code> in your project? Can you try to annotate your test as <code>@SpringBootTest</code>?"},{"owner":{"account_id":1311122,"reputation":56893,"user_id":1259109,"display_name":"Dave Syer"},"score":0,"creation_date":1508955589,"post_id":23701616,"comment_id":80826055,"body_markdown":"`HelloWorldConfiguration` is not a `@SpringBootApplication` so spring Boot will not be used to start the context.","body":"<code>HelloWorldConfiguration</code> is not a <code>@SpringBootApplication</code> so spring Boot will not be used to start the context."},{"owner":{"account_id":1311122,"reputation":56893,"user_id":1259109,"display_name":"Dave Syer"},"score":0,"creation_date":1509101646,"post_id":23701616,"comment_id":80894058,"body_markdown":"Is there a reason you don’t want to use `@SpringBootApplication`? If not I would use it. Otherwise your main config class is missing `@Configuration`.","body":"Is there a reason you don’t want to use <code>@SpringBootApplication</code>? If not I would use it. Otherwise your main config class is missing <code>@Configuration</code>."},{"owner":{"account_id":3243454,"reputation":1405,"user_id":2735802,"accept_rate":71,"display_name":"Geyser14"},"score":0,"creation_date":1509123426,"post_id":23701616,"comment_id":80907474,"body_markdown":"No, I see I&#39;m missing that. This was an older post and as soon as I get a moment I&#39;m going get the code setup and test it again and update this post. (I&#39;m optimistic). A very boneheaded thing to miss but I&#39;ll own up to it if I need to!","body":"No, I see I&#39;m missing that. This was an older post and as soon as I get a moment I&#39;m going get the code setup and test it again and update this post. (I&#39;m optimistic). A very boneheaded thing to miss but I&#39;ll own up to it if I need to!"}],"answers":[{"comments":[{"owner":{"account_id":3243454,"reputation":1405,"user_id":2735802,"accept_rate":71,"display_name":"Geyser14"},"score":0,"creation_date":1508883022,"post_id":23708025,"comment_id":80789156,"body_markdown":"point taken - just trying to get the components to load therefore the attempt to load from src/main/java to make sure nothing was missed","body":"point taken - just trying to get the components to load therefore the attempt to load from src/main/java to make sure nothing was missed"}],"tags":[],"owner":{"account_id":1311122,"reputation":56893,"user_id":1259109,"display_name":"Dave Syer"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1400305501,"creation_date":1400305501,"answer_id":23708025,"question_id":23701616,"body_markdown":"I don&#39;t know if this will turn out to be the solution, but don&#39;t use the default package (i.e. don&#39;t put *.java in &quot;src/main/java&quot; directly), and definitely don&#39;t use a `@ComponentScan` or `@EnableAutoConfiguration` in the default package. You will end up killing your application on startup as it tries to scan everything on the classpath (including all the Spring libraries).","title":"@ComponentScan not working in test with spring-boot-starter-test","body":"<p>I don't know if this will turn out to be the solution, but don't use the default package (i.e. don't put *.java in \"src/main/java\" directly), and definitely don't use a <code>@ComponentScan</code> or <code>@EnableAutoConfiguration</code> in the default package. You will end up killing your application on startup as it tries to scan everything on the classpath (including all the Spring libraries).</p>\n"},{"comments":[{"owner":{"account_id":135086,"reputation":709,"user_id":337666,"display_name":"Shrikant Prabhu"},"score":0,"creation_date":1642099446,"post_id":46904962,"comment_id":124988216,"body_markdown":"`@SpringBootTest` was recognizing the bean but was facing issue at run time. Adding `@EnableAutoConfiguration` helped bean instantiation issue, bean was in different package which I had to specify using `@ComponentScan`","body":"<code>@SpringBootTest</code> was recognizing the bean but was facing issue at run time. Adding <code>@EnableAutoConfiguration</code> helped bean instantiation issue, bean was in different package which I had to specify using <code>@ComponentScan</code>"}],"tags":[],"owner":{"account_id":1674439,"reputation":2685,"user_id":1540271,"display_name":"Marwin"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1508831317,"creation_date":1508831317,"answer_id":46904962,"question_id":23701616,"body_markdown":"First, I&#39;d recommend to use a newer `@RunWith(SpringRunner.class)` but that makes no difference, it is just shorter (and recommended).\r\n\r\nSecond, from the `@EnableAutoConfiguration` I see that you are using spring boot - which is certainly a good thing. There are some good reasons why &lt;em&gt;not&lt;/em&gt; to use `@ComponentScan` directly. Can you try the following?\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n    @ContextConfiguration(classes=YourApplication_or_other_Configuration.class)\r\n    public class HelloWorldTest {\r\n    ... etc.\r\n\r\n\r\n\r\n","title":"@ComponentScan not working in test with spring-boot-starter-test","body":"<p>First, I'd recommend to use a newer <code>@RunWith(SpringRunner.class)</code> but that makes no difference, it is just shorter (and recommended).</p>\n\n<p>Second, from the <code>@EnableAutoConfiguration</code> I see that you are using spring boot - which is certainly a good thing. There are some good reasons why <em>not</em> to use <code>@ComponentScan</code> directly. Can you try the following?</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\n@ContextConfiguration(classes=YourApplication_or_other_Configuration.class)\npublic class HelloWorldTest {\n... etc.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4401188,"reputation":4398,"user_id":3586851,"accept_rate":50,"display_name":"Heri"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664884003,"creation_date":1664884003,"answer_id":73947402,"question_id":23701616,"body_markdown":"SpringBoot 2.7.3, JUnit 5.8.2\r\n\r\nIf you want to have full control about the spring&#39;s configuration (and not rely on the hidden magic of auto configuration) I suggest to create an explicit configuration class:\r\n\r\n    @ComponentScan(basePackages = { &quot;my.package.to.scan&quot; })\r\n    public class MySpringTestConfig\r\n    {\r\n        // just for spring configuration annotations\r\n    }\r\n\r\nand reference it in your test class:\r\n\r\n    @ContextConfiguration(classes = { MySpringTestConfig.class })\r\n    @ExtendWith({ SpringExtension.class })\r\n    class MySpringTest\r\n    {\r\n        ...\r\n    }\r\n\r\n\r\n","title":"@ComponentScan not working in test with spring-boot-starter-test","body":"<p>SpringBoot 2.7.3, JUnit 5.8.2</p>\n<p>If you want to have full control about the spring's configuration (and not rely on the hidden magic of auto configuration) I suggest to create an explicit configuration class:</p>\n<pre><code>@ComponentScan(basePackages = { &quot;my.package.to.scan&quot; })\npublic class MySpringTestConfig\n{\n    // just for spring configuration annotations\n}\n</code></pre>\n<p>and reference it in your test class:</p>\n<pre><code>@ContextConfiguration(classes = { MySpringTestConfig.class })\n@ExtendWith({ SpringExtension.class })\nclass MySpringTest\n{\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":3243454,"reputation":1405,"user_id":2735802,"accept_rate":71,"display_name":"Geyser14"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20260,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1664884003,"creation_date":1400262568,"question_id":23701616,"body_markdown":"I am attempting to test my `@Service` and `@Repository` classes in my project with spring-boot-starter-test and `@Autowired` is not working for the classes I&#39;m testing. \r\n\r\nUnit test:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n    @ContextConfiguration(classes = HelloWorldConfiguration.class\r\n    //@SpringApplicationConfiguration(classes = HelloWorldRs.class)\r\n    //@ComponentScan(basePackages = {&quot;com.me.sbworkshop&quot;, &quot;com.me.sbworkshop.service&quot;})\r\n    //@ConfigurationProperties(&quot;helloworld&quot;)\r\n    //@EnableAutoConfiguration\r\n    //@ActiveProfiles(&quot;test&quot;)\r\n    // THIS CLASS IS IN src/test/java/ AND BUILDS INTO target/test-classes\r\n    public class HelloWorldTest {\r\n    \r\n        @Autowired\r\n        HelloWorldMessageService helloWorldMessageService;\r\n    \r\n        public static final String EXPECTED = &quot;je pense donc je suis-TESTING123&quot;;\r\n    \r\n        @Test\r\n        public void testGetMessage() {\r\n            String result = helloWorldMessageService.getMessage();\r\n            Assert.assertEquals(EXPECTED, result);\r\n        }\r\n    }\r\n\r\nService:\r\n\r\n    @Service\r\n    @ConfigurationProperties(&quot;helloworld&quot;)\r\n    // THIS CLASS IS IN /src/main/java AND BUILDS INTO target/classes\r\n    public class HelloWorldMessageService {\r\n    \r\n        private String message;\r\n    \r\n        public String getMessage() {\r\n            return message;\r\n        }\r\n    \r\n        public void setMessage(String  message) {\r\n            this.message=message;\r\n        }\r\n    \r\n    }\r\n\r\nThe commented class annotations on the unit test represent the various things I&#39;ve tried to get this working. The test and the project packages are in the same package paths and the `@ComponentScan` works fine from my entry point (`@RestController` class with main method). The service `@ComponentScan`&#39;s and `@Autowire`&#39;s fine in my `@RestController` class in the src/main/java side, but does not in the test. I am required to add it again as a `@Bean` in my `@Configuration` class in order for `@Autowired` to work. The class is otherwise in scope just fine and I can reference and instantiate it just fine from the test. The problem appears to be that `@ComponentScan` does not appear to correctly traverse multiple entries in my test runner classpath, in this case /target/test-classes and /target/classes.\r\n\r\nThe IDE I am using is IntelliJ IDEA 13.\r\n\r\n**UPDATE** - here are HelloWorldRs and its config:\r\n\r\n    @RestController\r\n    @EnableAutoConfiguration\r\n    @ComponentScan\r\n    public class HelloWorldRs {\r\n    \r\n        //    SPRING BOOT ENTRY POINT - main() method\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(HelloWorldRs.class);\r\n        }\r\n    \r\n        @Autowired\r\n        HelloWorldMessageService helloWorldMessageService;\r\n    \r\n        @RequestMapping(&quot;/helloWorld&quot;)\r\n        public String helloWorld() {\r\n            return helloWorldMessageService.getMessage();\r\n        }\r\n    \r\n    }\r\n\r\n...\r\n\r\n    @Configuration\r\n    public class HelloWorldConfiguration {\r\n    \r\n        @Bean\r\n        public Map&lt;String, String&gt; map() {\r\n            return new HashMap&lt;&gt;();\r\n        }\r\n    \r\n        // This bean was manually added as a workaround to the @ComponentScan problem\r\n        @Bean\r\n        public HelloWorldMessageService helloWorldMessageService() {\r\n            return new HelloWorldMessageService();\r\n        }\r\n    \r\n        // This bean was manually added as a workaround to the @ComponentScan problem\r\n        @Bean\r\n        public HelloWorldRs helloWorldRs() {\r\n            return new HelloWorldRs();\r\n        }\r\n    }\r\n\r\n","title":"@ComponentScan not working in test with spring-boot-starter-test","body":"<p>I am attempting to test my <code>@Service</code> and <code>@Repository</code> classes in my project with spring-boot-starter-test and <code>@Autowired</code> is not working for the classes I'm testing. </p>\n\n<p>Unit test:</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\n@ContextConfiguration(classes = HelloWorldConfiguration.class\n//@SpringApplicationConfiguration(classes = HelloWorldRs.class)\n//@ComponentScan(basePackages = {\"com.me.sbworkshop\", \"com.me.sbworkshop.service\"})\n//@ConfigurationProperties(\"helloworld\")\n//@EnableAutoConfiguration\n//@ActiveProfiles(\"test\")\n// THIS CLASS IS IN src/test/java/ AND BUILDS INTO target/test-classes\npublic class HelloWorldTest {\n\n    @Autowired\n    HelloWorldMessageService helloWorldMessageService;\n\n    public static final String EXPECTED = \"je pense donc je suis-TESTING123\";\n\n    @Test\n    public void testGetMessage() {\n        String result = helloWorldMessageService.getMessage();\n        Assert.assertEquals(EXPECTED, result);\n    }\n}\n</code></pre>\n\n<p>Service:</p>\n\n<pre><code>@Service\n@ConfigurationProperties(\"helloworld\")\n// THIS CLASS IS IN /src/main/java AND BUILDS INTO target/classes\npublic class HelloWorldMessageService {\n\n    private String message;\n\n    public String getMessage() {\n        return message;\n    }\n\n    public void setMessage(String  message) {\n        this.message=message;\n    }\n\n}\n</code></pre>\n\n<p>The commented class annotations on the unit test represent the various things I've tried to get this working. The test and the project packages are in the same package paths and the <code>@ComponentScan</code> works fine from my entry point (<code>@RestController</code> class with main method). The service <code>@ComponentScan</code>'s and <code>@Autowire</code>'s fine in my <code>@RestController</code> class in the src/main/java side, but does not in the test. I am required to add it again as a <code>@Bean</code> in my <code>@Configuration</code> class in order for <code>@Autowired</code> to work. The class is otherwise in scope just fine and I can reference and instantiate it just fine from the test. The problem appears to be that <code>@ComponentScan</code> does not appear to correctly traverse multiple entries in my test runner classpath, in this case /target/test-classes and /target/classes.</p>\n\n<p>The IDE I am using is IntelliJ IDEA 13.</p>\n\n<p><strong>UPDATE</strong> - here are HelloWorldRs and its config:</p>\n\n<pre><code>@RestController\n@EnableAutoConfiguration\n@ComponentScan\npublic class HelloWorldRs {\n\n    //    SPRING BOOT ENTRY POINT - main() method\n    public static void main(String[] args) {\n        SpringApplication.run(HelloWorldRs.class);\n    }\n\n    @Autowired\n    HelloWorldMessageService helloWorldMessageService;\n\n    @RequestMapping(\"/helloWorld\")\n    public String helloWorld() {\n        return helloWorldMessageService.getMessage();\n    }\n\n}\n</code></pre>\n\n<p>...</p>\n\n<pre><code>@Configuration\npublic class HelloWorldConfiguration {\n\n    @Bean\n    public Map&lt;String, String&gt; map() {\n        return new HashMap&lt;&gt;();\n    }\n\n    // This bean was manually added as a workaround to the @ComponentScan problem\n    @Bean\n    public HelloWorldMessageService helloWorldMessageService() {\n        return new HelloWorldMessageService();\n    }\n\n    // This bean was manually added as a workaround to the @ComponentScan problem\n    @Bean\n    public HelloWorldRs helloWorldRs() {\n        return new HelloWorldRs();\n    }\n}\n</code></pre>\n"},{"tags":["java","macos","ssl","certificate","truststore"],"answers":[{"comments":[{"owner":{"account_id":6235501,"reputation":3140,"user_id":4850949,"accept_rate":57,"display_name":"not2savvy"},"score":1,"creation_date":1664963433,"post_id":71614725,"comment_id":130586860,"body_markdown":"This seems like a bug in either the Apple JCE provider or macOS itself.","body":"This seems like a bug in either the Apple JCE provider or macOS itself."},{"owner":{"account_id":2882320,"reputation":684,"user_id":2472905,"display_name":"Robert Dean"},"score":0,"creation_date":1694693257,"post_id":71614725,"comment_id":135926509,"body_markdown":"This is indeed a bug, and fixes for the &quot;LTS&quot; versions of Java have been delivered recently. https://bugs.openjdk.org/browse/JDK-8303465","body":"This is indeed a bug, and fixes for the &quot;LTS&quot; versions of Java have been delivered recently. <a href=\"https://bugs.openjdk.org/browse/JDK-8303465\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8303465</a>"},{"owner":{"account_id":2882320,"reputation":684,"user_id":2472905,"display_name":"Robert Dean"},"score":0,"creation_date":1694693529,"post_id":71614725,"comment_id":135926571,"body_markdown":"Another bug you might run into is that the provider assumes each certificate has a unique common name.  I had 3 certificates with the same common name, different thumbprint, and the provider only returns one of these (and not the one I needed it to return).","body":"Another bug you might run into is that the provider assumes each certificate has a unique common name.  I had 3 certificates with the same common name, different thumbprint, and the provider only returns one of these (and not the one I needed it to return)."}],"tags":[],"owner":{"account_id":2042386,"reputation":212,"user_id":1823236,"display_name":"cptcactus"},"comment_count":3,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1648200633,"creation_date":1648200633,"answer_id":71614725,"question_id":62147943,"body_markdown":"`KeychainStore` only gives you access to the current user&#39;s keychain. This does not include the root certs installed on the machine like `Windows-ROOT` would on a Windows machine. As far as I can tell there is no easy way to solve this. You could implement your own `KeyStore` that extracts the certs via native code or a command. See https://stackoverflow.com/questions/46986355/java-programmatically-access-ssl-certificates-under-system-roots-on-mac-os-x","title":"KeychainStore doesn&#39;t provide certificates to Java on Mac OS X","body":"<p><code>KeychainStore</code> only gives you access to the current user's keychain. This does not include the root certs installed on the machine like <code>Windows-ROOT</code> would on a Windows machine. As far as I can tell there is no easy way to solve this. You could implement your own <code>KeyStore</code> that extracts the certs via native code or a command. See <a href=\"https://stackoverflow.com/questions/46986355/java-programmatically-access-ssl-certificates-under-system-roots-on-mac-os-x\">(Java) Programmatically access SSL certificates under &quot;System Roots&quot; on Mac OS X</a></p>\n"}],"owner":{"account_id":2918574,"reputation":136,"user_id":2501301,"display_name":"Tomasz Klosinski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2003,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":1,"score":9,"last_activity_date":1664883547,"creation_date":1591086768,"question_id":62147943,"body_markdown":"While researching a problem [related to Jib][1], I found that `java -Djavax.net.ssl.trustStoreType=KeychainStore` doesn&#39;t provide certificates to my Java process on Mac OS X and it can&#39;t validate TLS/SSL for any public website (and my private website with a self-signed certificate too). \r\n\r\nHere&#39;s the example how I tested it:\r\n```\r\n$ cat &lt;&lt;EOF &gt; A.java\r\npublic class A {\r\n  public static void main(String[] args) throws Exception {\r\n    new java.net.URL(&quot;https://google.com/&quot;).openStream().close();\r\n  }\r\n}\r\nEOF\r\n```\r\n\r\nAnd here&#39;s the result:\r\n```\r\n$ java -Djavax.net.ssl.trustStoreType=KeychainStore A.java\r\nException in thread &quot;main&quot; javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:326)\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:269)\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:264)\r\n\tat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:645)\r\n\tat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:464)\r\n\tat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:360)\r\n\tat java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392)\r\n\tat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:444)\r\n\tat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:422)\r\n\tat java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:183)\r\n\tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:164)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1144)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1055)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:395)\r\n\tat java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:567)\r\n\tat java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1587)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1515)\r\n\tat java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\r\n\tat java.base/java.net.URL.openStream(URL.java:1140)\r\n\tat A.main(A.java:3)\r\nCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\tat java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439)\r\n\tat java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306)\r\n\tat java.base/sun.security.validator.Validator.validate(Validator.java:264)\r\n\tat java.base/sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:313)\r\n\tat java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:222)\r\n\tat java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:129)\r\n\tat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:629)\r\n\tat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:464)\r\n\tat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:360)\r\n\tat java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392)\r\n\tat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:444)\r\n\tat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:422)\r\n\tat java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:183)\r\n\tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:164)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1144)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1055)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:395)\r\n\tat java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:567)\r\n\tat java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1587)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1515)\r\n\tat java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\r\n\tat java.base/java.net.URL.openStream(URL.java:1140)\r\n\tat A.main(A.java:3)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat jdk.compiler/com.sun.tools.javac.launcher.Main.execute(Main.java:404)\r\n\tat jdk.compiler/com.sun.tools.javac.launcher.Main.run(Main.java:179)\r\n\tat jdk.compiler/com.sun.tools.javac.launcher.Main.main(Main.java:119)\r\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\tat java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141)\r\n\tat java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126)\r\n\tat java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297)\r\n\tat java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434)\r\n\t... 30 more\r\n```\r\n\r\nAny clue why this doesn&#39;t work? Did I miss something? \r\n\r\nPS. Some information about my environment (I&#39;ve tried also Java 11):\r\n```\r\n$ echo $JAVA_HOME\r\n/Library/Java/JavaVirtualMachines/adoptopenjdk-14.0.1.jdk/Contents/Home\r\n\r\n$ java -version\r\nopenjdk version &quot;14.0.1&quot; 2020-04-14\r\nOpenJDK Runtime Environment AdoptOpenJDK (build 14.0.1+7)\r\nOpenJDK 64-Bit Server VM AdoptOpenJDK (build 14.0.1+7, mixed mode, sharing)\r\n```\r\n\r\n  [1]: https://github.com/GoogleContainerTools/jib/issues/2482","title":"KeychainStore doesn&#39;t provide certificates to Java on Mac OS X","body":"<p>While researching a problem <a href=\"https://github.com/GoogleContainerTools/jib/issues/2482\" rel=\"nofollow noreferrer\">related to Jib</a>, I found that <code>java -Djavax.net.ssl.trustStoreType=KeychainStore</code> doesn't provide certificates to my Java process on Mac OS X and it can't validate TLS/SSL for any public website (and my private website with a self-signed certificate too).</p>\n<p>Here's the example how I tested it:</p>\n<pre><code>$ cat &lt;&lt;EOF &gt; A.java\npublic class A {\n  public static void main(String[] args) throws Exception {\n    new java.net.URL(&quot;https://google.com/&quot;).openStream().close();\n  }\n}\nEOF\n</code></pre>\n<p>And here's the result:</p>\n<pre><code>$ java -Djavax.net.ssl.trustStoreType=KeychainStore A.java\nException in thread &quot;main&quot; javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:326)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:269)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:264)\n    at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:645)\n    at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:464)\n    at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:360)\n    at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392)\n    at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:444)\n    at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:422)\n    at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:183)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:164)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1144)\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1055)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:395)\n    at java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:567)\n    at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1587)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1515)\n    at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\n    at java.base/java.net.URL.openStream(URL.java:1140)\n    at A.main(A.java:3)\nCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n    at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439)\n    at java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306)\n    at java.base/sun.security.validator.Validator.validate(Validator.java:264)\n    at java.base/sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:313)\n    at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:222)\n    at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:129)\n    at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:629)\n    at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:464)\n    at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:360)\n    at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392)\n    at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:444)\n    at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:422)\n    at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:183)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:164)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1144)\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1055)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:395)\n    at java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:567)\n    at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1587)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1515)\n    at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\n    at java.base/java.net.URL.openStream(URL.java:1140)\n    at A.main(A.java:3)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at jdk.compiler/com.sun.tools.javac.launcher.Main.execute(Main.java:404)\n    at jdk.compiler/com.sun.tools.javac.launcher.Main.run(Main.java:179)\n    at jdk.compiler/com.sun.tools.javac.launcher.Main.main(Main.java:119)\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n    at java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141)\n    at java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126)\n    at java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297)\n    at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434)\n    ... 30 more\n</code></pre>\n<p>Any clue why this doesn't work? Did I miss something?</p>\n<p>PS. Some information about my environment (I've tried also Java 11):</p>\n<pre><code>$ echo $JAVA_HOME\n/Library/Java/JavaVirtualMachines/adoptopenjdk-14.0.1.jdk/Contents/Home\n\n$ java -version\nopenjdk version &quot;14.0.1&quot; 2020-04-14\nOpenJDK Runtime Environment AdoptOpenJDK (build 14.0.1+7)\nOpenJDK 64-Bit Server VM AdoptOpenJDK (build 14.0.1+7, mixed mode, sharing)\n</code></pre>\n"},{"tags":["java","spring-boot","authentication","spring-security","netflix-dgs"],"answers":[{"comments":[{"owner":{"account_id":9781391,"reputation":358,"user_id":7249306,"display_name":"Denis Abakumov"},"score":0,"creation_date":1664761787,"post_id":73873234,"comment_id":130538730,"body_markdown":"Brilliant! I tested this approach in my service - and it works! Thank you.","body":"Brilliant! I tested this approach in my service - and it works! Thank you."},{"owner":{"account_id":8102564,"reputation":285,"user_id":6105177,"display_name":"Henry Hargreaves"},"score":0,"creation_date":1684871145,"post_id":73873234,"comment_id":134579976,"body_markdown":"Hi, I tried adding that code block, but getting a cast exception at `(DgsWebMvcRequestData) context.getRequestData();`, I think the issue may be because I am using the webflux version of the DGS library so tried going down the         `ReactiveDgsContext.from(dataFetchingEnvironment);` route but have no idea how to get the NativeWebRequest object - do you have any idea how one could adapt your code block to work in a reactive context?","body":"Hi, I tried adding that code block, but getting a cast exception at <code>(DgsWebMvcRequestData) context.getRequestData();</code>, I think the issue may be because I am using the webflux version of the DGS library so tried going down the         <code>ReactiveDgsContext.from(dataFetchingEnvironment);</code> route but have no idea how to get the NativeWebRequest object - do you have any idea how one could adapt your code block to work in a reactive context?"}],"tags":[],"owner":{"account_id":3725757,"reputation":3130,"user_id":3099704,"accept_rate":70,"display_name":"Sedat Gokcen"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664883449,"creation_date":1664308979,"answer_id":73873234,"question_id":73055108,"body_markdown":"Even though Spring Security&#39;s [`AuthenticationPrincipalArgumentResolver`][1] is in the application context, it&#39;s not picked up by DGS by default. You can achieve this by implementing DGS&#39; own [`ArgumentResolver`][2] and delegating its work to Spring&#39;s `AuthenticationPrincipalArgumentResolver`.\r\n\r\nSo all you need to create is this: \r\n\r\n[Kotlin]\r\n\r\n```\r\n@Component\r\nclass DgsAuthenticationPrincipalArgumentResolver : ArgumentResolver {\r\n    private val delegate = AuthenticationPrincipalArgumentResolver()\r\n\r\n    override fun supportsParameter(parameter: MethodParameter): Boolean {\r\n        return delegate.supportsParameter(parameter)\r\n    }\r\n\r\n    override fun resolveArgument(parameter: MethodParameter, dfe: DataFetchingEnvironment): Any? {\r\n        val request = (DgsDataFetchingEnvironment(dfe).getDgsContext().requestData as DgsWebMvcRequestData).webRequest as NativeWebRequest\r\n        return delegate.resolveArgument(parameter, null, request, null)\r\n    }\r\n}\r\n```\r\n\r\n[Java]\r\n```\r\n@Component\r\npublic class DgsAuthenticationPrincipalArgumentResolver implements ArgumentResolver {\r\n\r\n\tprivate final AuthenticationPrincipalArgumentResolver delegate = new AuthenticationPrincipalArgumentResolver();\r\n\r\n\t@Nullable\r\n\t@Override\r\n\tpublic Object resolveArgument(@NotNull MethodParameter parameter, @NotNull DataFetchingEnvironment dfe)\t{\r\n\t\tDgsContext context = ((DataFetchingEnvironmentImpl) dfe).getContext();\r\n\t\tDgsWebMvcRequestData requestData = (DgsWebMvcRequestData) context.getRequestData();\r\n\t\tNativeWebRequest request = requestData == null ? null : (NativeWebRequest) requestData.getWebRequest();\r\n\t\treturn delegate.resolveArgument(parameter, null, request, null);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean supportsParameter(@NotNull MethodParameter parameter) {\r\n\t\treturn delegate.supportsParameter(parameter);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nPassing `null`s on 2n and 4th parameters is OK because they have no usage within delegated `resolveArgument` as you can check [here][3].\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/method/annotation/AuthenticationPrincipalArgumentResolver.html\r\n  [2]: https://github.com/Netflix/dgs-framework/blob/v5.2.4/graphql-dgs/src/main/kotlin/com/netflix/graphql/dgs/internal/method/ArgumentResolver.kt\r\n  [3]: https://github.com/spring-projects/spring-security/blob/5.6.7/web/src/main/java/org/springframework/security/web/method/annotation/AuthenticationPrincipalArgumentResolver.java#L103","title":"How to enable @AuthenticationPrincipal argument in a DGS query","body":"<p>Even though Spring Security's <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/method/annotation/AuthenticationPrincipalArgumentResolver.html\" rel=\"nofollow noreferrer\"><code>AuthenticationPrincipalArgumentResolver</code></a> is in the application context, it's not picked up by DGS by default. You can achieve this by implementing DGS' own <a href=\"https://github.com/Netflix/dgs-framework/blob/v5.2.4/graphql-dgs/src/main/kotlin/com/netflix/graphql/dgs/internal/method/ArgumentResolver.kt\" rel=\"nofollow noreferrer\"><code>ArgumentResolver</code></a> and delegating its work to Spring's <code>AuthenticationPrincipalArgumentResolver</code>.</p>\n<p>So all you need to create is this:</p>\n<p>[Kotlin]</p>\n<pre><code>@Component\nclass DgsAuthenticationPrincipalArgumentResolver : ArgumentResolver {\n    private val delegate = AuthenticationPrincipalArgumentResolver()\n\n    override fun supportsParameter(parameter: MethodParameter): Boolean {\n        return delegate.supportsParameter(parameter)\n    }\n\n    override fun resolveArgument(parameter: MethodParameter, dfe: DataFetchingEnvironment): Any? {\n        val request = (DgsDataFetchingEnvironment(dfe).getDgsContext().requestData as DgsWebMvcRequestData).webRequest as NativeWebRequest\n        return delegate.resolveArgument(parameter, null, request, null)\n    }\n}\n</code></pre>\n<p>[Java]</p>\n<pre><code>@Component\npublic class DgsAuthenticationPrincipalArgumentResolver implements ArgumentResolver {\n\n    private final AuthenticationPrincipalArgumentResolver delegate = new AuthenticationPrincipalArgumentResolver();\n\n    @Nullable\n    @Override\n    public Object resolveArgument(@NotNull MethodParameter parameter, @NotNull DataFetchingEnvironment dfe) {\n        DgsContext context = ((DataFetchingEnvironmentImpl) dfe).getContext();\n        DgsWebMvcRequestData requestData = (DgsWebMvcRequestData) context.getRequestData();\n        NativeWebRequest request = requestData == null ? null : (NativeWebRequest) requestData.getWebRequest();\n        return delegate.resolveArgument(parameter, null, request, null);\n    }\n\n    @Override\n    public boolean supportsParameter(@NotNull MethodParameter parameter) {\n        return delegate.supportsParameter(parameter);\n    }\n\n}\n</code></pre>\n<p>Passing <code>null</code>s on 2n and 4th parameters is OK because they have no usage within delegated <code>resolveArgument</code> as you can check <a href=\"https://github.com/spring-projects/spring-security/blob/5.6.7/web/src/main/java/org/springframework/security/web/method/annotation/AuthenticationPrincipalArgumentResolver.java#L103\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":9781391,"reputation":358,"user_id":7249306,"display_name":"Denis Abakumov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":969,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73873234,"answer_count":1,"score":1,"last_activity_date":1664883449,"creation_date":1658334239,"question_id":73055108,"body_markdown":"I&#39;m working on a Spring Boot service that has both a REST controller and a [Netflix DGS][1] GraphQL component. REST methods are protected with Spring Security, and whenever the current username is required, I add a method argument using the ```@AuthenticationPrincipal``` annotation, which gives me access to the authenticated user info:\r\n\r\n    import org.springframework.security.core.annotation.AuthenticationPrincipal;\r\n    import org.springframework.security.core.userdetails.UserDetails; \r\n\r\n    @RestController\r\n    public class ActionController {\r\n\r\n        @GetMapping(&quot;/getActions&quot;)\r\n        public List&lt;ActionResponse&gt; getActions(@AuthenticationPrincipal UserDetails userDetails) {\r\n            return actionService.getActions(userDetails.getUsername());\r\n        }\r\n\r\n    }\r\n\r\nNow I want the same functionality for GraphQL methods implemented through [Netflix DGS][1]. But when I try to use the ```@AuthenticationPrincipal``` argument (like in the first example) it always equals ```null```. The workaround I found is to manually assign the userDetails from the SecurityContextHolder:\r\n    \r\n    import com.netflix.graphql.dgs.DgsComponent;\r\n    import com.netflix.graphql.dgs.DgsQuery;\r\n    import org.springframework.security.core.annotation.AuthenticationPrincipal;\r\n    import org.springframework.security.core.userdetails.UserDetails; \r\n\r\n    @DgsComponent\r\n    public class ActionDatafetcher {\r\n\r\n        @DgsQuery\r\n\t    public List&lt;Map&lt;String, Object&gt;&gt; actions(@AuthenticationPrincipal UserDetails userDetails) {\r\n            // The following line works well:\r\n            // userDetails = (UserDetails) SecurityContextHolder.getContext().getAuthentication().getPrincipal();\r\n            \r\n            String username = userDetails.getUsername();   // ===&gt;  NullPointerException here\r\n\t\t    return actionService.getActionsMap(username);\r\n\t    }\r\n\r\n    }\r\n\r\nHow can I get @AuthenticationPrincipal to work in a DgsComponent?\r\n\r\n\r\n  [1]: https://netflix.github.io/dgs/","title":"How to enable @AuthenticationPrincipal argument in a DGS query","body":"<p>I'm working on a Spring Boot service that has both a REST controller and a <a href=\"https://netflix.github.io/dgs/\" rel=\"nofollow noreferrer\">Netflix DGS</a> GraphQL component. REST methods are protected with Spring Security, and whenever the current username is required, I add a method argument using the <code>@AuthenticationPrincipal</code> annotation, which gives me access to the authenticated user info:</p>\n<pre><code>import org.springframework.security.core.annotation.AuthenticationPrincipal;\nimport org.springframework.security.core.userdetails.UserDetails; \n\n@RestController\npublic class ActionController {\n\n    @GetMapping(&quot;/getActions&quot;)\n    public List&lt;ActionResponse&gt; getActions(@AuthenticationPrincipal UserDetails userDetails) {\n        return actionService.getActions(userDetails.getUsername());\n    }\n\n}\n</code></pre>\n<p>Now I want the same functionality for GraphQL methods implemented through <a href=\"https://netflix.github.io/dgs/\" rel=\"nofollow noreferrer\">Netflix DGS</a>. But when I try to use the <code>@AuthenticationPrincipal</code> argument (like in the first example) it always equals <code>null</code>. The workaround I found is to manually assign the userDetails from the SecurityContextHolder:</p>\n<pre><code>import com.netflix.graphql.dgs.DgsComponent;\nimport com.netflix.graphql.dgs.DgsQuery;\nimport org.springframework.security.core.annotation.AuthenticationPrincipal;\nimport org.springframework.security.core.userdetails.UserDetails; \n\n@DgsComponent\npublic class ActionDatafetcher {\n\n    @DgsQuery\n    public List&lt;Map&lt;String, Object&gt;&gt; actions(@AuthenticationPrincipal UserDetails userDetails) {\n        // The following line works well:\n        // userDetails = (UserDetails) SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n        \n        String username = userDetails.getUsername();   // ===&gt;  NullPointerException here\n        return actionService.getActionsMap(username);\n    }\n\n}\n</code></pre>\n<p>How can I get @AuthenticationPrincipal to work in a DgsComponent?</p>\n"},{"tags":["java","swing","user-interface","jbutton","calculator"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1664725878,"post_id":73926952,"comment_id":130532917,"body_markdown":"The biggest problem is that you&#39;re using `setSize` and `setLocation` methods.  Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [Laying Out Components Within a Container](https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html) section.","body":"The biggest problem is that you&#39;re using <code>setSize</code> and <code>setLocation</code> methods.  Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">Laying Out Components Within a Container</a> section."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1664727647,"post_id":73926952,"comment_id":130533318,"body_markdown":"Simple example to get you started: https://stackoverflow.com/questions/23375276/attaching-a-single-action-listener-to-all-buttons/23375436#23375436 (after reading the tutorial links from above).","body":"Simple example to get you started: <a href=\"https://stackoverflow.com/questions/23375276/attaching-a-single-action-listener-to-all-buttons/23375436#23375436\" title=\"attaching a single action listener to all buttons\">stackoverflow.com/questions/23375276/&hellip;</a> (after reading the tutorial links from above)."}],"answers":[{"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1664731222,"post_id":73927480,"comment_id":130534098,"body_markdown":"1) all the setLocation(...) statements should be removed. It is the job of the layout manger to set the size/location of components. 2) the setSize(...) statement should be removed. The `pack()` statement should be added before the setVisible(...) statement.  3) don&#39;t use static variables. 4) GUI should be created on the Event Dispatch Thread. 5) Again, read the tutorial links for more complete examples and explanations","body":"1) all the setLocation(...) statements should be removed. It is the job of the layout manger to set the size/location of components. 2) the setSize(...) statement should be removed. The <code>pack()</code> statement should be added before the setVisible(...) statement.  3) don&#39;t use static variables. 4) GUI should be created on the Event Dispatch Thread. 5) Again, read the tutorial links for more complete examples and explanations"},{"owner":{"account_id":964056,"reputation":313,"user_id":987829,"display_name":"Vijay"},"score":0,"creation_date":1664793520,"post_id":73927480,"comment_id":130545194,"body_markdown":"why vote down? This answer may not be complete but Is there any thing incorrect in this?","body":"why vote down? This answer may not be complete but Is there any thing incorrect in this?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1664804941,"post_id":73927480,"comment_id":130548844,"body_markdown":"I didn&#39;t down vote, but just because there is nothing incorrect with the statements does not make it a good answer. By reading this the OP might think all they have to do is remove the lines of code as suggested. However, this will still lead to poorly designed class with incorrect usage of Swing. These types of suggestions should be left as comments. The OP is better off to start over and learn how to use Swing properly. The tutorial examples will help with this.","body":"I didn&#39;t down vote, but just because there is nothing incorrect with the statements does not make it a good answer. By reading this the OP might think all they have to do is remove the lines of code as suggested. However, this will still lead to poorly designed class with incorrect usage of Swing. These types of suggestions should be left as comments. The OP is better off to start over and learn how to use Swing properly. The tutorial examples will help with this."}],"tags":[],"owner":{"account_id":964056,"reputation":313,"user_id":987829,"display_name":"Vijay"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1664727843,"creation_date":1664727843,"answer_id":73927480,"question_id":73926952,"body_markdown":"    import java.awt.*;\r\n    import javax.swing.*;\r\n    \r\n    public class hello {\r\n        public static JFrame window;\r\n        public static JPanel panel;\r\n        public static JButton zero;\r\n        public static JButton one;\r\n    \r\n        public static void main(String[] args) {\r\n            window = new JFrame(&quot;idk&quot;);  \r\n            window.setSize(400, 200);\r\n            //window.setLocationRelativeTo(null);\r\n            //window.setVisible(true);\r\n    \r\n            panel = new JPanel();\r\n            //panel.setLayout(null);\r\n            \r\n            JLabel label = new JLabel(&quot;0&quot;);\r\n            label.setSize(399, 35);\r\n            label.setLocation(0, 0);\r\n            label.setBackground(Color.black);\r\n            label.setForeground(Color.white);\r\n            label.setHorizontalAlignment(SwingConstants.RIGHT);\r\n           // label.setOpaque(true);\r\n            //label.setVisible(true);\r\n    \r\n            panel.add(label);\r\n            //panel.setVisible(true);\r\n    \r\n            window.add(panel);\r\n            //window.setVisible(true);\r\n    \r\n      \r\n            zero = new JButton(&quot;0&quot;);\r\n            zero.setSize(64,64);\r\n            zero.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 24));\r\n            zero.setFocusPainted(false);\r\n            zero.setLocation(150,299);\r\n            zero.setBackground(Color.black);\r\n            zero.setForeground(Color.orange);\r\n           // zero.setVisible(true);\r\n            //window.setVisible(true);\r\n    \r\n            panel.add(zero);\r\n           // panel.setVisible(true);\r\n    \r\n           // window.add(zero);\r\n           // window.setVisible(true);\r\n    \r\n            one = new JButton(&quot;1&quot;);\r\n            one.setSize(64,64);\r\n            one.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 24));\r\n            one.setFocusPainted(false);\r\n            one.setLocation(150,299);\r\n            one.setBackground(Color.black);\r\n            one.setForeground(Color.orange);\r\n            //one.setVisible(true);\r\n            window.setVisible(true);\r\n    \r\n            panel.add(one);\r\n           // panel.setVisible(true);\r\n    \r\n            //window.add(one);\r\n            window.setVisible(true);\r\n    \r\n        }\r\n    }\r\nyou need to understand the concept of layout managers esp BorderLayout and FlowLayout. Layout managers are responsible for managing the placement of the comnponent on to the containers. BorderLayout is the drfault layout manager of JFrame. if you add multiple components to the JFrame you will see the last component as it will occupy the whole space of the JFrame.  FlowLayout is the default layout manager of JPanel.It places the components side by side. One point is that we do not need to set the visiblility of each of the individual components usually , It means when you add components to the container and if the container is visible then the added components will also become visible automatically. Another point is that usually we add components to the container once and the container to the other container if there is such need. so here JPanel instance is the container which are being added to the container Jframe   instance","title":"how to add multiple buttons to a calculator in java","body":"<pre><code>import java.awt.*;\nimport javax.swing.*;\n\npublic class hello {\n    public static JFrame window;\n    public static JPanel panel;\n    public static JButton zero;\n    public static JButton one;\n\n    public static void main(String[] args) {\n        window = new JFrame(&quot;idk&quot;);  \n        window.setSize(400, 200);\n        //window.setLocationRelativeTo(null);\n        //window.setVisible(true);\n\n        panel = new JPanel();\n        //panel.setLayout(null);\n        \n        JLabel label = new JLabel(&quot;0&quot;);\n        label.setSize(399, 35);\n        label.setLocation(0, 0);\n        label.setBackground(Color.black);\n        label.setForeground(Color.white);\n        label.setHorizontalAlignment(SwingConstants.RIGHT);\n       // label.setOpaque(true);\n        //label.setVisible(true);\n\n        panel.add(label);\n        //panel.setVisible(true);\n\n        window.add(panel);\n        //window.setVisible(true);\n\n  \n        zero = new JButton(&quot;0&quot;);\n        zero.setSize(64,64);\n        zero.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 24));\n        zero.setFocusPainted(false);\n        zero.setLocation(150,299);\n        zero.setBackground(Color.black);\n        zero.setForeground(Color.orange);\n       // zero.setVisible(true);\n        //window.setVisible(true);\n\n        panel.add(zero);\n       // panel.setVisible(true);\n\n       // window.add(zero);\n       // window.setVisible(true);\n\n        one = new JButton(&quot;1&quot;);\n        one.setSize(64,64);\n        one.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 24));\n        one.setFocusPainted(false);\n        one.setLocation(150,299);\n        one.setBackground(Color.black);\n        one.setForeground(Color.orange);\n        //one.setVisible(true);\n        window.setVisible(true);\n\n        panel.add(one);\n       // panel.setVisible(true);\n\n        //window.add(one);\n        window.setVisible(true);\n\n    }\n}\n</code></pre>\n<p>you need to understand the concept of layout managers esp BorderLayout and FlowLayout. Layout managers are responsible for managing the placement of the comnponent on to the containers. BorderLayout is the drfault layout manager of JFrame. if you add multiple components to the JFrame you will see the last component as it will occupy the whole space of the JFrame.  FlowLayout is the default layout manager of JPanel.It places the components side by side. One point is that we do not need to set the visiblility of each of the individual components usually , It means when you add components to the container and if the container is visible then the added components will also become visible automatically. Another point is that usually we add components to the container once and the container to the other container if there is such need. so here JPanel instance is the container which are being added to the container Jframe   instance</p>\n"},{"comments":[{"owner":{"account_id":26507932,"reputation":1,"user_id":20143769,"display_name":"Gameboy V"},"score":0,"creation_date":1664955975,"post_id":73947295,"comment_id":130584585,"body_markdown":"how should i add more buttons","body":"how should i add more buttons"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1664956235,"post_id":73947295,"comment_id":130584637,"body_markdown":"@GameboyV just create them by calling method `createButton` and add them to `buttonsPanel` (in method `createButtons()`) as I have done. Did you read the links in my question?","body":"@GameboyV just create them by calling method <code>createButton</code> and add them to <code>buttonsPanel</code> (in method <code>createButtons()</code>) as I have done. Did you read the links in my question?"},{"owner":{"account_id":26507932,"reputation":1,"user_id":20143769,"display_name":"Gameboy V"},"score":0,"creation_date":1665085001,"post_id":73947295,"comment_id":130623116,"body_markdown":"i dont quite understand do you have discord by any chance","body":"i dont quite understand do you have discord by any chance"},{"owner":{"account_id":26507932,"reputation":1,"user_id":20143769,"display_name":"Gameboy V"},"score":0,"creation_date":1665326519,"post_id":73947295,"comment_id":130669074,"body_markdown":"hello? you got discord?","body":"hello? you got discord?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1665328478,"post_id":73947295,"comment_id":130669488,"body_markdown":"@GameboyV I don&#39;t know what _discord_ is. It appears that you have a new question. So I suggest that you post a new question.","body":"@GameboyV I don&#39;t know what <i>discord</i> is. It appears that you have a new question. So I suggest that you post a new question."}],"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664883309,"creation_date":1664883309,"answer_id":73947295,"question_id":73926952,"body_markdown":"You don&#39;t need to explicitly call `setVisible(true)` since this is the default for most [Component](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Component.html)s &amp;ndash; one exception being `JFrame` where you do need to explicitly call `setVisible(true)`. However, you should call it only once and only after you have added all the components to it. You should also explicitly call [setDefaultCloseOperation](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JFrame.html#setDefaultCloseOperation(int)).\r\n\r\nThe default [layout manager](https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html) for [the [content pane](https://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html) of] `JFrame` is [BorderLayout](https://docs.oracle.com/javase/tutorial/uiswing/layout/border.html) and when you add a component to a container using `BorderLayout`, without a [constraint](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Container.html#add(java.awt.Component,java.lang.Object)), it gets added to the [CENTER](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/BorderLayout.html#CENTER) and the CENTER takes up as much space as it can. Since you are only adding a single `JPanel` to the `JFrame`, it takes up the whole window.\r\n\r\n&gt; I think the problem is that the button `one` is under button `zero`.\r\n\r\nCorrect, since you give both buttons the exact same size and the exact same location.\r\n\r\nI suggest using [GridLayout](https://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html) for the calculator buttons.\r\n\r\nNext, you need to add [ActionListener](https://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)s to the buttons. Since Java 8, this can be done using [method references](https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html)\r\n\r\nComponents that you need to manipulate in `ActionListener`s should usually be [instance] members, i.e. non-static members, of the class.\r\n\r\nBelow is a sample calculator application. It assumes that the user enters a number, followed by one of the arithmetic operators, followed by another number after which the user presses the `=` button. It is not production-ready, it is simply intended to help get you started.\r\n\r\n(More notes after the code.)\r\n```java\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Color;\r\nimport java.awt.EventQueue;\r\nimport java.awt.Font;\r\nimport java.awt.GridLayout;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.awt.event.KeyEvent;\r\n\r\nimport javax.swing.BorderFactory;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.JMenu;\r\nimport javax.swing.JMenuBar;\r\nimport javax.swing.JMenuItem;\r\nimport javax.swing.JOptionPane;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.SwingConstants;\r\n\r\npublic class Hello {\r\n    enum Operator {\r\n        ADD(&quot;\\u002B&quot;), DIVIDE(&quot;\\u00F7&quot;), MULTIPLY(&quot;\\u00D7&quot;), SUBTRACT(&quot;\\u2212&quot;);\r\n\r\n        private String symbol;\r\n\r\n        private Operator(String sign) {\r\n            symbol = sign;\r\n        }\r\n\r\n        public String getSymbol() {\r\n            return symbol;\r\n        }\r\n    }\r\n\r\n    private static final String BLANK = &quot;                          &quot;;\r\n\r\n    private boolean solution;\r\n    private Integer operand1;\r\n    private Integer operand2;\r\n    private JFrame frame;\r\n    private JLabel label;\r\n    private Operator operator;\r\n\r\n    private void add(ActionEvent event) {\r\n        operator = Operator.ADD;\r\n        addSymbol();\r\n    }\r\n\r\n    private void addSymbol() {\r\n        if (operand1 == null) {\r\n            JOptionPane.showMessageDialog(frame,\r\n                                          &quot;Enter first number.&quot;,\r\n                                          &quot;ERROR&quot;,\r\n                                          JOptionPane.ERROR_MESSAGE);\r\n        }\r\n        else {\r\n            String text = label.getText() + operator.getSymbol();\r\n            label.setText(text);\r\n        }\r\n    }\r\n\r\n    private void buildAndDisplayGui() {\r\n        frame = new JFrame(&quot;idk&quot;);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.add(createDisplay(), BorderLayout.PAGE_START);\r\n        frame.add(createButtons(), BorderLayout.CENTER);\r\n        frame.setJMenuBar(createMenuBar());\r\n        frame.pack();\r\n        frame.setLocationRelativeTo(null);\r\n        frame.setVisible(true);\r\n    }\r\n\r\n    private void clear() {\r\n        solution = false;\r\n        clear2();\r\n        label.setText(BLANK);\r\n    }\r\n\r\n    public void clear2() {\r\n        operator = null;\r\n        operand1 = null;\r\n        operand2 = null;\r\n    }\r\n\r\n    private JButton createButton(String text, int mnemonic, String tooltip, ActionListener listener) {\r\n        JButton button = new JButton(text);\r\n        if (mnemonic &gt; 0) {\r\n            button.setMnemonic(mnemonic);\r\n        }\r\n        if (tooltip != null) {\r\n            button.setToolTipText(tooltip);\r\n        }\r\n        button.addActionListener(listener);\r\n        button.setFocusPainted(false);\r\n        button.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 24));\r\n        button.setBackground(Color.black);\r\n        button.setForeground(Color.orange);\r\n        return button;\r\n    }\r\n\r\n    private JPanel createButtons() {\r\n        JPanel buttonsPanel = new JPanel(new GridLayout(0, 4));\r\n        buttonsPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\r\n        buttonsPanel.add(createButton(&quot;7&quot;, KeyEvent.VK_7, null, this::showOperand));\r\n        buttonsPanel.add(createButton(&quot;8&quot;, KeyEvent.VK_8, null, this::showOperand));\r\n        buttonsPanel.add(createButton(&quot;9&quot;, KeyEvent.VK_9, null, this::showOperand));\r\n        buttonsPanel.add(createButton(Operator.DIVIDE.getSymbol(), KeyEvent.VK_SLASH, &quot;Divide&quot;, this::divide));\r\n        buttonsPanel.add(createButton(&quot;4&quot;, KeyEvent.VK_4, null, this::showOperand));\r\n        buttonsPanel.add(createButton(&quot;5&quot;, KeyEvent.VK_5, null, this::showOperand));\r\n        buttonsPanel.add(createButton(&quot;6&quot;, KeyEvent.VK_6, null, this::showOperand));\r\n        buttonsPanel.add(createButton(Operator.MULTIPLY.getSymbol(), KeyEvent.VK_X, &quot;Multiply&quot;, this::multiply));\r\n        buttonsPanel.add(createButton(&quot;1&quot;, KeyEvent.VK_4, null, this::showOperand));\r\n        buttonsPanel.add(createButton(&quot;2&quot;, KeyEvent.VK_5, null, this::showOperand));\r\n        buttonsPanel.add(createButton(&quot;3&quot;, KeyEvent.VK_6, null, this::showOperand));\r\n        buttonsPanel.add(createButton(Operator.SUBTRACT.getSymbol(), KeyEvent.VK_X, &quot;Subtract&quot;, this::subtract));\r\n        buttonsPanel.add(createButton(&quot;\\u232B&quot;, KeyEvent.VK_BACK_SPACE, &quot;Erase&quot;, this::erase));\r\n        buttonsPanel.add(createButton(&quot;0&quot;, KeyEvent.VK_0, null, this::showOperand));\r\n        buttonsPanel.add(createButton(&quot;=&quot;, KeyEvent.VK_EQUALS, null, this::performCalculation));\r\n        buttonsPanel.add(createButton(Operator.ADD.getSymbol(), KeyEvent.VK_PLUS, &quot;Add&quot;, this::add));\r\n        return buttonsPanel;\r\n    }\r\n\r\n    private JLabel createDisplay() {\r\n        label = new JLabel(BLANK);\r\n        label.setBackground(Color.black);\r\n        label.setForeground(Color.white);\r\n        label.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 24));\r\n        label.setHorizontalAlignment(SwingConstants.TRAILING);\r\n        label.setOpaque(true);\r\n        return label;\r\n    }\r\n\r\n    private JMenuBar createMenuBar() {\r\n        JMenuBar menuBar = new JMenuBar();\r\n        JMenu menu = new JMenu(&quot;Actions&quot;);\r\n        JMenuItem item = new JMenuItem(&quot;New&quot;);\r\n        item.addActionListener(e -&gt; clear());\r\n        menu.add(item);\r\n        menuBar.add(menu);\r\n        return menuBar;\r\n    }\r\n    \r\n    private void divide(ActionEvent event) {\r\n        operator = Operator.DIVIDE;\r\n        addSymbol();\r\n    }\r\n\r\n    private void erase(ActionEvent event) {\r\n        String text = label.getText().trim();\r\n        int len = text.length();\r\n        String newText;\r\n        if (len &gt; 1) {\r\n            newText = text.substring(0, len - 1);\r\n            if (newText.endsWith(&quot; &quot;)) {\r\n                newText = newText.substring(0, newText.length() - 1);\r\n            }\r\n        }\r\n        else {\r\n            newText = BLANK;\r\n        }\r\n        label.setText(newText);\r\n    }\r\n\r\n    private void multiply(ActionEvent event) {\r\n        operator = Operator.MULTIPLY;\r\n        addSymbol();\r\n    }\r\n\r\n    private void performCalculation(ActionEvent event) {\r\n        Double op1 = Double.valueOf(operand1.doubleValue());\r\n        Double op2 = Double.valueOf(operand2.doubleValue());\r\n        Double result;\r\n        switch (operator) {\r\n            case ADD:\r\n                result = op1 + op2;\r\n                break;\r\n            case DIVIDE:\r\n                result = op1 / op2;\r\n                break;\r\n            case MULTIPLY:\r\n                result = op1 * op2;\r\n                break;\r\n            case SUBTRACT:\r\n                result = op1 - op2;\r\n                break;\r\n            default:\r\n                result = null;\r\n                JOptionPane.showMessageDialog(frame,\r\n                                              &quot;Unhandled operator: &quot; + operator,\r\n                                              &quot;WARNING&quot;,\r\n                                              JOptionPane.WARNING_MESSAGE);\r\n        }\r\n        if (result != null) {\r\n            label.setText(result.toString());\r\n        }\r\n        solution = true;\r\n        clear2();\r\n    }\r\n\r\n    private void showOperand(ActionEvent event) {\r\n        if (solution) {\r\n            label.setText(&quot;&quot;);\r\n            solution = false;\r\n        }\r\n        String digit = event.getActionCommand();\r\n        String number = label.getText();\r\n        if (number.isBlank()) {\r\n            number = number.trim();\r\n        }\r\n        String text = number + digit;\r\n        if (operator == null) {\r\n            operand1 = Integer.parseInt(text);\r\n        }\r\n        else {\r\n            int ndx = number.indexOf(operator.getSymbol());\r\n            int len = number.length();\r\n            if (len &gt; ndx + 1) {\r\n                operand2 = Integer.parseInt(text.substring(ndx + 1));\r\n            }\r\n            else {\r\n                operand2 = Integer.parseInt(digit);\r\n            }\r\n        }\r\n        label.setText(text);\r\n    }\r\n\r\n    private void subtract(ActionEvent event) {\r\n        operator = Operator.SUBTRACT;\r\n        addSymbol();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        EventQueue.invokeLater(() -&gt; new Hello().buildAndDisplayGui());\r\n    }\r\n}\r\n```\r\n- It is recommended to adhere to [Java naming conventions](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html), hence I named the class `Hello` (rather than `hello`).\r\n- I explicitly launch the [Event Dispatch Thread](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html) (EDT). Although not required, it is recommended.\r\n- The argument to method `invokeLater` is a [lambda expression](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html)\r\n- I created an [enum](https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html) for the [arithmetic] operators.\r\n- I used *Dialog* [font](https://docs.oracle.com/javase/tutorial/2d/text/fonts.html) since *Arial* didn&#39;t display the [Unicode] [erase](https://unicode-table.com/en/232B/) symbol.\r\n- The operands are `int` so they can&#39;t be larger than around two billion.\r\n- Rather than adding more buttons that are usually found on a [calculator](https://www.online-calculator.com/), I added a [menu](https://docs.oracle.com/javase/tutorial/uiswing/components/menu.html).\r\n- Whenever I set the text of `label` to an empty string, it is not displayed. Hence the use of constant `BLANK`.","title":"how to add multiple buttons to a calculator in java","body":"<p>You don't need to explicitly call <code>setVisible(true)</code> since this is the default for most <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Component.html\" rel=\"nofollow noreferrer\">Component</a>s – one exception being <code>JFrame</code> where you do need to explicitly call <code>setVisible(true)</code>. However, you should call it only once and only after you have added all the components to it. You should also explicitly call <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JFrame.html#setDefaultCloseOperation(int)\" rel=\"nofollow noreferrer\">setDefaultCloseOperation</a>.</p>\n<p>The default <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">layout manager</a> for [the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html\" rel=\"nofollow noreferrer\">content pane</a> of] <code>JFrame</code> is <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/border.html\" rel=\"nofollow noreferrer\">BorderLayout</a> and when you add a component to a container using <code>BorderLayout</code>, without a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Container.html#add(java.awt.Component,java.lang.Object)\" rel=\"nofollow noreferrer\">constraint</a>, it gets added to the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/BorderLayout.html#CENTER\" rel=\"nofollow noreferrer\">CENTER</a> and the CENTER takes up as much space as it can. Since you are only adding a single <code>JPanel</code> to the <code>JFrame</code>, it takes up the whole window.</p>\n<blockquote>\n<p>I think the problem is that the button <code>one</code> is under button <code>zero</code>.</p>\n</blockquote>\n<p>Correct, since you give both buttons the exact same size and the exact same location.</p>\n<p>I suggest using <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html\" rel=\"nofollow noreferrer\">GridLayout</a> for the calculator buttons.</p>\n<p>Next, you need to add <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html\" rel=\"nofollow noreferrer\">ActionListener</a>s to the buttons. Since Java 8, this can be done using <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">method references</a></p>\n<p>Components that you need to manipulate in <code>ActionListener</code>s should usually be [instance] members, i.e. non-static members, of the class.</p>\n<p>Below is a sample calculator application. It assumes that the user enters a number, followed by one of the arithmetic operators, followed by another number after which the user presses the <code>=</code> button. It is not production-ready, it is simply intended to help get you started.</p>\n<p>(More notes after the code.)</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.EventQueue;\nimport java.awt.Font;\nimport java.awt.GridLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.KeyEvent;\n\nimport javax.swing.BorderFactory;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JMenu;\nimport javax.swing.JMenuBar;\nimport javax.swing.JMenuItem;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.SwingConstants;\n\npublic class Hello {\n    enum Operator {\n        ADD(&quot;\\u002B&quot;), DIVIDE(&quot;\\u00F7&quot;), MULTIPLY(&quot;\\u00D7&quot;), SUBTRACT(&quot;\\u2212&quot;);\n\n        private String symbol;\n\n        private Operator(String sign) {\n            symbol = sign;\n        }\n\n        public String getSymbol() {\n            return symbol;\n        }\n    }\n\n    private static final String BLANK = &quot;                          &quot;;\n\n    private boolean solution;\n    private Integer operand1;\n    private Integer operand2;\n    private JFrame frame;\n    private JLabel label;\n    private Operator operator;\n\n    private void add(ActionEvent event) {\n        operator = Operator.ADD;\n        addSymbol();\n    }\n\n    private void addSymbol() {\n        if (operand1 == null) {\n            JOptionPane.showMessageDialog(frame,\n                                          &quot;Enter first number.&quot;,\n                                          &quot;ERROR&quot;,\n                                          JOptionPane.ERROR_MESSAGE);\n        }\n        else {\n            String text = label.getText() + operator.getSymbol();\n            label.setText(text);\n        }\n    }\n\n    private void buildAndDisplayGui() {\n        frame = new JFrame(&quot;idk&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.add(createDisplay(), BorderLayout.PAGE_START);\n        frame.add(createButtons(), BorderLayout.CENTER);\n        frame.setJMenuBar(createMenuBar());\n        frame.pack();\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n    }\n\n    private void clear() {\n        solution = false;\n        clear2();\n        label.setText(BLANK);\n    }\n\n    public void clear2() {\n        operator = null;\n        operand1 = null;\n        operand2 = null;\n    }\n\n    private JButton createButton(String text, int mnemonic, String tooltip, ActionListener listener) {\n        JButton button = new JButton(text);\n        if (mnemonic &gt; 0) {\n            button.setMnemonic(mnemonic);\n        }\n        if (tooltip != null) {\n            button.setToolTipText(tooltip);\n        }\n        button.addActionListener(listener);\n        button.setFocusPainted(false);\n        button.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 24));\n        button.setBackground(Color.black);\n        button.setForeground(Color.orange);\n        return button;\n    }\n\n    private JPanel createButtons() {\n        JPanel buttonsPanel = new JPanel(new GridLayout(0, 4));\n        buttonsPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n        buttonsPanel.add(createButton(&quot;7&quot;, KeyEvent.VK_7, null, this::showOperand));\n        buttonsPanel.add(createButton(&quot;8&quot;, KeyEvent.VK_8, null, this::showOperand));\n        buttonsPanel.add(createButton(&quot;9&quot;, KeyEvent.VK_9, null, this::showOperand));\n        buttonsPanel.add(createButton(Operator.DIVIDE.getSymbol(), KeyEvent.VK_SLASH, &quot;Divide&quot;, this::divide));\n        buttonsPanel.add(createButton(&quot;4&quot;, KeyEvent.VK_4, null, this::showOperand));\n        buttonsPanel.add(createButton(&quot;5&quot;, KeyEvent.VK_5, null, this::showOperand));\n        buttonsPanel.add(createButton(&quot;6&quot;, KeyEvent.VK_6, null, this::showOperand));\n        buttonsPanel.add(createButton(Operator.MULTIPLY.getSymbol(), KeyEvent.VK_X, &quot;Multiply&quot;, this::multiply));\n        buttonsPanel.add(createButton(&quot;1&quot;, KeyEvent.VK_4, null, this::showOperand));\n        buttonsPanel.add(createButton(&quot;2&quot;, KeyEvent.VK_5, null, this::showOperand));\n        buttonsPanel.add(createButton(&quot;3&quot;, KeyEvent.VK_6, null, this::showOperand));\n        buttonsPanel.add(createButton(Operator.SUBTRACT.getSymbol(), KeyEvent.VK_X, &quot;Subtract&quot;, this::subtract));\n        buttonsPanel.add(createButton(&quot;\\u232B&quot;, KeyEvent.VK_BACK_SPACE, &quot;Erase&quot;, this::erase));\n        buttonsPanel.add(createButton(&quot;0&quot;, KeyEvent.VK_0, null, this::showOperand));\n        buttonsPanel.add(createButton(&quot;=&quot;, KeyEvent.VK_EQUALS, null, this::performCalculation));\n        buttonsPanel.add(createButton(Operator.ADD.getSymbol(), KeyEvent.VK_PLUS, &quot;Add&quot;, this::add));\n        return buttonsPanel;\n    }\n\n    private JLabel createDisplay() {\n        label = new JLabel(BLANK);\n        label.setBackground(Color.black);\n        label.setForeground(Color.white);\n        label.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 24));\n        label.setHorizontalAlignment(SwingConstants.TRAILING);\n        label.setOpaque(true);\n        return label;\n    }\n\n    private JMenuBar createMenuBar() {\n        JMenuBar menuBar = new JMenuBar();\n        JMenu menu = new JMenu(&quot;Actions&quot;);\n        JMenuItem item = new JMenuItem(&quot;New&quot;);\n        item.addActionListener(e -&gt; clear());\n        menu.add(item);\n        menuBar.add(menu);\n        return menuBar;\n    }\n    \n    private void divide(ActionEvent event) {\n        operator = Operator.DIVIDE;\n        addSymbol();\n    }\n\n    private void erase(ActionEvent event) {\n        String text = label.getText().trim();\n        int len = text.length();\n        String newText;\n        if (len &gt; 1) {\n            newText = text.substring(0, len - 1);\n            if (newText.endsWith(&quot; &quot;)) {\n                newText = newText.substring(0, newText.length() - 1);\n            }\n        }\n        else {\n            newText = BLANK;\n        }\n        label.setText(newText);\n    }\n\n    private void multiply(ActionEvent event) {\n        operator = Operator.MULTIPLY;\n        addSymbol();\n    }\n\n    private void performCalculation(ActionEvent event) {\n        Double op1 = Double.valueOf(operand1.doubleValue());\n        Double op2 = Double.valueOf(operand2.doubleValue());\n        Double result;\n        switch (operator) {\n            case ADD:\n                result = op1 + op2;\n                break;\n            case DIVIDE:\n                result = op1 / op2;\n                break;\n            case MULTIPLY:\n                result = op1 * op2;\n                break;\n            case SUBTRACT:\n                result = op1 - op2;\n                break;\n            default:\n                result = null;\n                JOptionPane.showMessageDialog(frame,\n                                              &quot;Unhandled operator: &quot; + operator,\n                                              &quot;WARNING&quot;,\n                                              JOptionPane.WARNING_MESSAGE);\n        }\n        if (result != null) {\n            label.setText(result.toString());\n        }\n        solution = true;\n        clear2();\n    }\n\n    private void showOperand(ActionEvent event) {\n        if (solution) {\n            label.setText(&quot;&quot;);\n            solution = false;\n        }\n        String digit = event.getActionCommand();\n        String number = label.getText();\n        if (number.isBlank()) {\n            number = number.trim();\n        }\n        String text = number + digit;\n        if (operator == null) {\n            operand1 = Integer.parseInt(text);\n        }\n        else {\n            int ndx = number.indexOf(operator.getSymbol());\n            int len = number.length();\n            if (len &gt; ndx + 1) {\n                operand2 = Integer.parseInt(text.substring(ndx + 1));\n            }\n            else {\n                operand2 = Integer.parseInt(digit);\n            }\n        }\n        label.setText(text);\n    }\n\n    private void subtract(ActionEvent event) {\n        operator = Operator.SUBTRACT;\n        addSymbol();\n    }\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(() -&gt; new Hello().buildAndDisplayGui());\n    }\n}\n</code></pre>\n<ul>\n<li>It is recommended to adhere to <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">Java naming conventions</a>, hence I named the class <code>Hello</code> (rather than <code>hello</code>).</li>\n<li>I explicitly launch the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html\" rel=\"nofollow noreferrer\">Event Dispatch Thread</a> (EDT). Although not required, it is recommended.</li>\n<li>The argument to method <code>invokeLater</code> is a <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"nofollow noreferrer\">lambda expression</a></li>\n<li>I created an <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\" rel=\"nofollow noreferrer\">enum</a> for the [arithmetic] operators.</li>\n<li>I used <em>Dialog</em> <a href=\"https://docs.oracle.com/javase/tutorial/2d/text/fonts.html\" rel=\"nofollow noreferrer\">font</a> since <em>Arial</em> didn't display the [Unicode] <a href=\"https://unicode-table.com/en/232B/\" rel=\"nofollow noreferrer\">erase</a> symbol.</li>\n<li>The operands are <code>int</code> so they can't be larger than around two billion.</li>\n<li>Rather than adding more buttons that are usually found on a <a href=\"https://www.online-calculator.com/\" rel=\"nofollow noreferrer\">calculator</a>, I added a <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/menu.html\" rel=\"nofollow noreferrer\">menu</a>.</li>\n<li>Whenever I set the text of <code>label</code> to an empty string, it is not displayed. Hence the use of constant <code>BLANK</code>.</li>\n</ul>\n"}],"owner":{"account_id":26507932,"reputation":1,"user_id":20143769,"display_name":"Gameboy V"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":460,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1664883309,"creation_date":1664723512,"question_id":73926952,"body_markdown":"When I run my code it only shows button `zero` and not button `one` and button `zero` is as big as the window. I&#39;m trying to have 9 buttons in the end and after that a few more for buttons like +, -, and x. In the end I want it to be a calculator. Thanks for helping. I&#39;ve already tried making loops. I&#39;m expecting a finished calculator by next month. I think the problem is that the button `one` is under button `zero`.\r\n```java\r\npublic class hello {\r\n    public static JFrame window;\r\n    public static JPanel panel;\r\n    public static JButton zero;\r\n    public static JButton one;\r\n\r\n    public static void main(String[] args) {\r\n        window = new JFrame(&quot;idk&quot;);\r\n        window.setSize(400, 200);\r\n        window.setLocationRelativeTo(null);\r\n        window.setVisible(true);\r\n\r\n        panel = new JPanel();\r\n        panel.setLayout(null);\r\n        \r\n        JLabel label = new JLabel(&quot;0&quot;);\r\n        label.setSize(399, 35);\r\n        label.setLocation(0, 0);\r\n        label.setBackground(Color.black);\r\n        label.setForeground(Color.white);\r\n        label.setHorizontalAlignment(SwingConstants.RIGHT);\r\n        label.setOpaque(true);\r\n        label.setVisible(true);\r\n\r\n        panel.add(label);\r\n        panel.setVisible(true);\r\n\r\n        window.add(panel);\r\n        window.setVisible(true);\r\n\r\n        zero = new JButton(&quot;0&quot;);\r\n        zero.setSize(64,64);\r\n        zero.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 24));\r\n        zero.setFocusPainted(false);\r\n        zero.setLocation(150,299);\r\n        zero.setBackground(Color.black);\r\n        zero.setForeground(Color.orange);\r\n        zero.setVisible(true);\r\n        window.setVisible(true);\r\n\r\n        panel.add(zero);\r\n        panel.setVisible(true);\r\n\r\n        window.add(zero);\r\n        window.setVisible(true);\r\n\r\n        one = new JButton(&quot;1&quot;);\r\n        one.setSize(64,64);\r\n        one.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 24));\r\n        one.setFocusPainted(false);\r\n        one.setLocation(150,299);\r\n        one.setBackground(Color.black);\r\n        one.setForeground(Color.orange);\r\n        one.setVisible(true);\r\n        window.setVisible(true);\r\n\r\n        panel.add(one);\r\n        panel.setVisible(true);\r\n\r\n        window.add(one);\r\n        window.setVisible(true);\r\n    }\r\n}\r\n``` ","title":"how to add multiple buttons to a calculator in java","body":"<p>When I run my code it only shows button <code>zero</code> and not button <code>one</code> and button <code>zero</code> is as big as the window. I'm trying to have 9 buttons in the end and after that a few more for buttons like +, -, and x. In the end I want it to be a calculator. Thanks for helping. I've already tried making loops. I'm expecting a finished calculator by next month. I think the problem is that the button <code>one</code> is under button <code>zero</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class hello {\n    public static JFrame window;\n    public static JPanel panel;\n    public static JButton zero;\n    public static JButton one;\n\n    public static void main(String[] args) {\n        window = new JFrame(&quot;idk&quot;);\n        window.setSize(400, 200);\n        window.setLocationRelativeTo(null);\n        window.setVisible(true);\n\n        panel = new JPanel();\n        panel.setLayout(null);\n        \n        JLabel label = new JLabel(&quot;0&quot;);\n        label.setSize(399, 35);\n        label.setLocation(0, 0);\n        label.setBackground(Color.black);\n        label.setForeground(Color.white);\n        label.setHorizontalAlignment(SwingConstants.RIGHT);\n        label.setOpaque(true);\n        label.setVisible(true);\n\n        panel.add(label);\n        panel.setVisible(true);\n\n        window.add(panel);\n        window.setVisible(true);\n\n        zero = new JButton(&quot;0&quot;);\n        zero.setSize(64,64);\n        zero.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 24));\n        zero.setFocusPainted(false);\n        zero.setLocation(150,299);\n        zero.setBackground(Color.black);\n        zero.setForeground(Color.orange);\n        zero.setVisible(true);\n        window.setVisible(true);\n\n        panel.add(zero);\n        panel.setVisible(true);\n\n        window.add(zero);\n        window.setVisible(true);\n\n        one = new JButton(&quot;1&quot;);\n        one.setSize(64,64);\n        one.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 24));\n        one.setFocusPainted(false);\n        one.setLocation(150,299);\n        one.setBackground(Color.black);\n        one.setForeground(Color.orange);\n        one.setVisible(true);\n        window.setVisible(true);\n\n        panel.add(one);\n        panel.setVisible(true);\n\n        window.add(one);\n        window.setVisible(true);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","kubernetes","datadog"],"answers":[{"tags":[],"owner":{"account_id":7000699,"reputation":162,"user_id":5366828,"display_name":"ambergupta09"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664879189,"creation_date":1664879189,"answer_id":73946486,"question_id":73945870,"body_markdown":"Kubernetes Datadog Agent and Cluster Agent will give you specifics about the nodes and pods. Documentation: https://docs.datadoghq.com/infrastructure/livecontainers/configuration/?tab=helm\r\n\r\nFor specific app metrics, Spring boot metrics can be exported using netflix spectator api. see implementation https://docs.spring.io/spring-metrics/docs/current/public/datadog\r\n\r\nIf you are using dropwizard, see also: https://stackoverflow.com/questions/34398692/spring-boot-metrics-datadog\r\n","title":"Datadog java agent and autodiscovery","body":"<p>Kubernetes Datadog Agent and Cluster Agent will give you specifics about the nodes and pods. Documentation: <a href=\"https://docs.datadoghq.com/infrastructure/livecontainers/configuration/?tab=helm\" rel=\"nofollow noreferrer\">https://docs.datadoghq.com/infrastructure/livecontainers/configuration/?tab=helm</a></p>\n<p>For specific app metrics, Spring boot metrics can be exported using netflix spectator api. see implementation <a href=\"https://docs.spring.io/spring-metrics/docs/current/public/datadog\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-metrics/docs/current/public/datadog</a></p>\n<p>If you are using dropwizard, see also: <a href=\"https://stackoverflow.com/questions/34398692/spring-boot-metrics-datadog\">Spring boot metrics + datadog</a></p>\n"},{"tags":[],"owner":{"account_id":5204361,"reputation":605,"user_id":4162799,"accept_rate":50,"display_name":"Fares"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664880869,"creation_date":1664880869,"answer_id":73946816,"question_id":73945870,"body_markdown":"&gt; do I have to install both the datadog agent on the nodes + the datadog agent on the pods to reach springboot \r\n\r\nIn order to get logs and metrics shipped to datadog, the daemonset datadog agent pods are sufficient to scrape the spring boot pods. With the `openmetrics` integration for instance, just expose the metrics through a `/metrics` path. \r\n\r\nIn order to get traces, you need [to use the datadog java tracing library][1] and configure it, you can start by simply set this env var to `true` for the apps containers `DD_TRACE_ENABLED`  \r\n\r\nHope this helps\r\n\r\n  [1]: https://docs.datadoghq.com/tracing/trace_collection/library_config/java","title":"Datadog java agent and autodiscovery","body":"<blockquote>\n<p>do I have to install both the datadog agent on the nodes + the datadog agent on the pods to reach springboot</p>\n</blockquote>\n<p>In order to get logs and metrics shipped to datadog, the daemonset datadog agent pods are sufficient to scrape the spring boot pods. With the <code>openmetrics</code> integration for instance, just expose the metrics through a <code>/metrics</code> path.</p>\n<p>In order to get traces, you need <a href=\"https://docs.datadoghq.com/tracing/trace_collection/library_config/java\" rel=\"nofollow noreferrer\">to use the datadog java tracing library</a> and configure it, you can start by simply set this env var to <code>true</code> for the apps containers <code>DD_TRACE_ENABLED</code></p>\n<p>Hope this helps</p>\n"},{"comments":[{"owner":{"account_id":8705451,"reputation":479,"user_id":6513656,"display_name":"Matthew"},"score":0,"creation_date":1665045787,"post_id":73947174,"comment_id":130608590,"body_markdown":"Thank you ! I think I understand now, but what exactly check_names is supposed to do ? Is it only mean to be a tag ? \n\nOnly to be sure, for example I want to get the JMX metrics so I suppose I have to install a cluster agent with version &quot;latest-jmx&quot; and configure some annotations on the pod and it&#39;s good, did I understood correctly ? (\n\nhttps://docs.datadoghq.com/integrations/java/?tab=docker )","body":"Thank you ! I think I understand now, but what exactly check_names is supposed to do ? Is it only mean to be a tag ?   Only to be sure, for example I want to get the JMX metrics so I suppose I have to install a cluster agent with version &quot;latest-jmx&quot; and configure some annotations on the pod and it&#39;s good, did I understood correctly ? (  <a href=\"https://docs.datadoghq.com/integrations/java/?tab=docker\" rel=\"nofollow noreferrer\">docs.datadoghq.com/integrations/java/?tab=docker</a> )"},{"owner":{"account_id":3989434,"reputation":55901,"user_id":3288890,"accept_rate":43,"display_name":"Adiii"},"score":1,"creation_date":1665057807,"post_id":73947174,"comment_id":130613016,"body_markdown":"no, that&#39;s for docker, if you have auto-discovery this would enough `ad.datadoghq.com/&lt;CONTAINER_IDENTIFIER&gt;.init_configs: &#39;[{&quot;is_jmx&quot;: true, &quot;collect_default_metrics&quot;: true}]&#39;\n        ad.datadoghq.com/&lt;CONTAINER_IDENTIFIER&gt;.instances: &#39;[{&quot;host&quot;: &quot;%%host%%&quot;,&quot;port&quot;:&quot;&lt;JMX_PORT&gt;&quot;}]&#39;`https://docs.datadoghq.com/agent/guide/autodiscovery-with-jmx/?tab=containeragent","body":"no, that&#39;s for docker, if you have auto-discovery this would enough <code>ad.datadoghq.com&#47;&lt;CONTAINER_IDENTIFIER&gt;.init_configs: &#39;[{&quot;is_jmx&quot;: true, &quot;collect_default_metrics&quot;: true}]&#39;         ad.datadoghq.com&#47;&lt;CONTAINER_IDENTIFIER&gt;.instances: &#39;[{&quot;host&quot;: &quot;%%host%%&quot;,&quot;port&quot;:&quot;&lt;JMX_PORT&gt;&quot;}]&#39;</code><a href=\"https://docs.datadoghq.com/agent/guide/autodiscovery-with-jmx/?tab=containeragent\" rel=\"nofollow noreferrer\">docs.datadoghq.com/agent/gu&zwnj;&#8203;ide/autodiscovery-wi&zwnj;&#8203;th-jmx/&hellip;</a>"}],"tags":[],"owner":{"account_id":3989434,"reputation":55901,"user_id":3288890,"accept_rate":43,"display_name":"Adiii"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1664883100,"creation_date":1664882723,"answer_id":73947174,"question_id":73945870,"body_markdown":"Datadog come with deployment and daemonset\r\n\r\n- cluster agent (for Kubernetes metrics) deployment\r\n- daemonset (for traching and logs) daemonset\r\n\r\n```\r\nhelm repo add datadog https://helm.datadoghq.com\r\nhelm repo update\r\nhelm install &lt;RELEASE_NAME&gt; -f values.yaml  --set datadog.apiKey=&lt;DATADOG_API_KEY&gt; datadog/datadog --set targetSystem=&lt;TARGET_SYSTEM&gt;\r\n```\r\n&gt;This chart adds the Datadog Agent to all nodes in your cluster with a **DaemonSet**. It also optionally deploys the kube-state-metrics chart and uses it as an additional source of metrics about the cluster. A few minutes after installation, Datadog begins to report hosts and metrics.\r\n\r\n**Logs:**\r\nFor logs and APM you need some extra config\r\n\r\n```\r\ndatadog:\r\n  logs:\r\n    enabled: true\r\n    containerCollectAll: true\r\n```\r\n\r\n[data-k8-logs-collection][1]\r\n\r\nOnce everything is done, then its time to add auto-discovery\r\nagain no need to install anything for auto-discovery, until you need [APM][2] (profiling)\r\n\r\nAll you need to add\r\n\r\n```\r\n        ad.datadoghq.com/CONTAINER_NAME_TO_MONITOR.check_names: |\r\n          [&quot;openmetrics&quot;]\r\nad.datadoghq.com/CONTAINER_NAME_TO_MONITOR.init_configs: |\r\n          [{}]\r\nad.datadoghq.com/CONTAINER_NAME_TO_MONITOR.instances: |\r\n          [\r\n           {\r\n              &quot;prometheus_url&quot;: &quot;http://%%host%%:5000/internal/metrics&quot;,\r\n              &quot;namespace&quot;: &quot;my_springboot_app&quot;,\r\n              &quot;metrics&quot;: [ &quot;*&quot; ]\r\n            }\r\n          ] \r\n```\r\n\r\nreplace `5000` with the port of the container listening. again this is required to push Prometheus/openmetrics to datadog.\r\n\r\nIf you just need logs, no need for any extra fancy stuff, just `containerCollectAll: true` this is enough for logs collection.\r\n\r\n**APM**\r\n\r\nYou need add JAVA agent, add this in the dockerfile\r\n```\r\nRUN wget --no-check-certificate -O /app/dd-java-agent.jar https://dtdg.co/latest-java-tracer\r\n```\r\nand then you need to update `CMD` to let the agent collect tracing/apm/profiling\r\n\r\n```\r\njava -javaagent:/app/dd-java-agent.jar -Ddd.profiling.enabled=$DD_PROFILING_ENABLED -XX:FlightRecorderOptions=stackdepth=256 -Ddd.logs.injection=$DD_LOGS_INJECTION -Ddd.trace.sample.rate=$DD_TRACE_SAMPLE_RATE -Ddd.service=$DD_SERVICE -Ddd.env=$DD_ENV -J-server -Dhttp.port=5000 -jar sfdc-core.jar\r\n\r\n```\r\n\r\n[trace_collection_java][3]\r\n\r\n\r\n  [1]: https://docs.datadoghq.com/containers/kubernetes/log/?tab=helm\r\n  [2]: https://docs.datadoghq.com/containers/kubernetes/apm/?tab=helm\r\n  [3]: https://docs.datadoghq.com/tracing/trace_collection/dd_libraries/java/?tab=containers","title":"Datadog java agent and autodiscovery","body":"<p>Datadog come with deployment and daemonset</p>\n<ul>\n<li>cluster agent (for Kubernetes metrics) deployment</li>\n<li>daemonset (for traching and logs) daemonset</li>\n</ul>\n<pre><code>helm repo add datadog https://helm.datadoghq.com\nhelm repo update\nhelm install &lt;RELEASE_NAME&gt; -f values.yaml  --set datadog.apiKey=&lt;DATADOG_API_KEY&gt; datadog/datadog --set targetSystem=&lt;TARGET_SYSTEM&gt;\n</code></pre>\n<blockquote>\n<p>This chart adds the Datadog Agent to all nodes in your cluster with a <strong>DaemonSet</strong>. It also optionally deploys the kube-state-metrics chart and uses it as an additional source of metrics about the cluster. A few minutes after installation, Datadog begins to report hosts and metrics.</p>\n</blockquote>\n<p><strong>Logs:</strong>\nFor logs and APM you need some extra config</p>\n<pre><code>datadog:\n  logs:\n    enabled: true\n    containerCollectAll: true\n</code></pre>\n<p><a href=\"https://docs.datadoghq.com/containers/kubernetes/log/?tab=helm\" rel=\"nofollow noreferrer\">data-k8-logs-collection</a></p>\n<p>Once everything is done, then its time to add auto-discovery\nagain no need to install anything for auto-discovery, until you need <a href=\"https://docs.datadoghq.com/containers/kubernetes/apm/?tab=helm\" rel=\"nofollow noreferrer\">APM</a> (profiling)</p>\n<p>All you need to add</p>\n<pre><code>        ad.datadoghq.com/CONTAINER_NAME_TO_MONITOR.check_names: |\n          [&quot;openmetrics&quot;]\nad.datadoghq.com/CONTAINER_NAME_TO_MONITOR.init_configs: |\n          [{}]\nad.datadoghq.com/CONTAINER_NAME_TO_MONITOR.instances: |\n          [\n           {\n              &quot;prometheus_url&quot;: &quot;http://%%host%%:5000/internal/metrics&quot;,\n              &quot;namespace&quot;: &quot;my_springboot_app&quot;,\n              &quot;metrics&quot;: [ &quot;*&quot; ]\n            }\n          ] \n</code></pre>\n<p>replace <code>5000</code> with the port of the container listening. again this is required to push Prometheus/openmetrics to datadog.</p>\n<p>If you just need logs, no need for any extra fancy stuff, just <code>containerCollectAll: true</code> this is enough for logs collection.</p>\n<p><strong>APM</strong></p>\n<p>You need add JAVA agent, add this in the dockerfile</p>\n<pre><code>RUN wget --no-check-certificate -O /app/dd-java-agent.jar https://dtdg.co/latest-java-tracer\n</code></pre>\n<p>and then you need to update <code>CMD</code> to let the agent collect tracing/apm/profiling</p>\n<pre><code>java -javaagent:/app/dd-java-agent.jar -Ddd.profiling.enabled=$DD_PROFILING_ENABLED -XX:FlightRecorderOptions=stackdepth=256 -Ddd.logs.injection=$DD_LOGS_INJECTION -Ddd.trace.sample.rate=$DD_TRACE_SAMPLE_RATE -Ddd.service=$DD_SERVICE -Ddd.env=$DD_ENV -J-server -Dhttp.port=5000 -jar sfdc-core.jar\n\n</code></pre>\n<p><a href=\"https://docs.datadoghq.com/tracing/trace_collection/dd_libraries/java/?tab=containers\" rel=\"nofollow noreferrer\">trace_collection_java</a></p>\n"}],"owner":{"account_id":8705451,"reputation":479,"user_id":6513656,"display_name":"Matthew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1488,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73947174,"answer_count":3,"score":1,"last_activity_date":1664883100,"creation_date":1664875974,"question_id":73945870,"body_markdown":"I&#39;ll need to monitor java springboot containers on kubernetes.\r\n\r\nI&#39;ll probably use the [installation process using helm][1] to deploy the agent on the nodes.\r\n\r\nI&#39;ll probably use the [annotations on pods][2] to avoid configuration file managements\r\n\r\nI saw in the documentation that there was a jar client that you can add to each pod to monitor the containers.\r\n\r\nIf I need to monitor a springboot application, do I have to install both the datadog agent on the nodes + the datadog agent on the pods to reach springboot\r\nOR will the datadog agent on the nodes be allowed to monitor a springboot agent turning into a pod using only annotations and environnement variables ?\r\n\r\n  [1]: https://docs.datadoghq.com/fr/containers/kubernetes/installation/?tab=helm\r\n  [2]: https://docs.datadoghq.com/getting_started/containers/autodiscovery/","title":"Datadog java agent and autodiscovery","body":"<p>I'll need to monitor java springboot containers on kubernetes.</p>\n<p>I'll probably use the <a href=\"https://docs.datadoghq.com/fr/containers/kubernetes/installation/?tab=helm\" rel=\"nofollow noreferrer\">installation process using helm</a> to deploy the agent on the nodes.</p>\n<p>I'll probably use the <a href=\"https://docs.datadoghq.com/getting_started/containers/autodiscovery/\" rel=\"nofollow noreferrer\">annotations on pods</a> to avoid configuration file managements</p>\n<p>I saw in the documentation that there was a jar client that you can add to each pod to monitor the containers.</p>\n<p>If I need to monitor a springboot application, do I have to install both the datadog agent on the nodes + the datadog agent on the pods to reach springboot\nOR will the datadog agent on the nodes be allowed to monitor a springboot agent turning into a pod using only annotations and environnement variables ?</p>\n"},{"tags":["java","log4j","weblogic","weblogic12c"],"answers":[{"tags":[],"owner":{"account_id":441141,"reputation":277,"user_id":831081,"accept_rate":65,"display_name":"wassim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664882776,"creation_date":1664882776,"answer_id":73947183,"question_id":73878666,"body_markdown":"So the issue got solved by updating the weblogic.xml file under the war file to specify the &quot;prefer-application-packages&quot; of log4j.properties as below\r\n\r\n\t&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;\r\n\t&lt;weblogic-web-app xmlns=&quot;http://xmlns.oracle.com/weblogic/weblogic-web-app&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.3/weblogic-web-app.xsd&quot;&gt;\r\n\t\t&lt;session-descriptor/&gt;\r\n\t\t&lt;jsp-descriptor/&gt;\r\n\t\t&lt;container-descriptor&gt;\r\n\t\t\t&lt;prefer-application-packages&gt;\r\n\t\t\t\t&lt;package-name&gt;org.apache.commons.*&lt;/package-name&gt;\r\n\t\t\t\t&lt;package-name&gt;org.slf4j.*&lt;/package-name&gt;\r\n\t\t\t&lt;/prefer-application-packages&gt;\r\n\t\t&lt;/container-descriptor&gt;\r\n\t\t&lt;context-root&gt;test-context-root&lt;/context-root&gt;\r\n\t&lt;/weblogic-web-app&gt;","title":"log4j.properties loaded but not used Weblogic 12c","body":"<p>So the issue got solved by updating the weblogic.xml file under the war file to specify the &quot;prefer-application-packages&quot; of log4j.properties as below</p>\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;weblogic-web-app xmlns=&quot;http://xmlns.oracle.com/weblogic/weblogic-web-app&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.3/weblogic-web-app.xsd&quot;&gt;\n    &lt;session-descriptor/&gt;\n    &lt;jsp-descriptor/&gt;\n    &lt;container-descriptor&gt;\n        &lt;prefer-application-packages&gt;\n            &lt;package-name&gt;org.apache.commons.*&lt;/package-name&gt;\n            &lt;package-name&gt;org.slf4j.*&lt;/package-name&gt;\n        &lt;/prefer-application-packages&gt;\n    &lt;/container-descriptor&gt;\n    &lt;context-root&gt;test-context-root&lt;/context-root&gt;\n&lt;/weblogic-web-app&gt;\n</code></pre>\n"}],"owner":{"account_id":441141,"reputation":277,"user_id":831081,"accept_rate":65,"display_name":"wassim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73947183,"answer_count":1,"score":0,"last_activity_date":1664882776,"creation_date":1664355096,"question_id":73878666,"body_markdown":"I have a war file (web-services) deployed on weblogic 12c that reads the log4j.properties file but doesn&#39;t use it. Below is the debug of log4j on application startup showing the parsing of the file and the setting but the logs are not being written to the log file specified and the ones in stdout do not match the pattern specified and the levels configured.\r\n\r\n\r\n\tlog4j: Reading configuration from URL file:////weblogic/apps/config/ws/log4j.properties\r\n\tlog4j: Parsing for [root] with value=[WARN, stdout, wslogfile].\r\n\tlog4j: Level token is [WARN].\r\n\tlog4j: Category root set to WARN\r\n\tlog4j: Parsing appender named &quot;stdout&quot;.\r\n\tlog4j: Parsing layout options for &quot;stdout&quot;.\r\n\tlog4j: Setting property [conversionPattern] to [%d %6.6p [%30.30c{1}][%10.10t] %m%n].\r\n\tlog4j: End of parsing for &quot;stdout&quot;.\r\n\tlog4j: Parsed &quot;stdout&quot; options.\r\n\tlog4j: Parsing appender named &quot;wslogfile&quot;.\r\n\tlog4j: Parsing layout options for &quot;wslogfile&quot;.\r\n\tlog4j: Setting property [conversionPattern] to [%d %6.6p [%30.30c{1}][%10.10t] %m%n].\r\n\tlog4j: End of parsing for &quot;wslogfile&quot;.\r\n\tlog4j: Setting property [file] to [/weblogic/apps/logs/ws.log].\r\n\tlog4j: Setting property [datePattern] to [&#39;.&#39;yyyy-MM-dd].\r\n\tlog4j: setFile called: /weblogic/apps/logs/ws.log, true\r\n\tlog4j: setFile ended\r\n\tlog4j: Appender [wslogfile] to be rolled at midnight.\r\n\tlog4j: Parsed &quot;wslogfile&quot; options.\r\n\tlog4j: Parsing for [com.app] with value=[DEBUG, stdout, wslogfile].\r\n\tlog4j: Level token is [DEBUG].\r\n\tlog4j: Category com.app set to DEBUG\r\n\tlog4j: Parsing appender named &quot;stdout&quot;.\r\n\tlog4j: Appender &quot;stdout&quot; was already parsed.\r\n\tlog4j: Parsing appender named &quot;wslogfile&quot;.\r\n\tlog4j: Appender &quot;wslogfile&quot; was already parsed.\r\n\tlog4j: Handling log4j.additivity.com.app=[false]\r\n\tlog4j: Setting additivity for &quot;com.app&quot; to false\r\n\tlog4j: Parsing for [com.comp] with value=[DEBUG, stdout, wslogfile].\r\n\tlog4j: Level token is [DEBUG].\r\n\tlog4j: Category com.comp set to DEBUG\r\n\tlog4j: Parsing appender named &quot;stdout&quot;.\r\n\tlog4j: Appender &quot;stdout&quot; was already parsed.\r\n\tlog4j: Parsing appender named &quot;wslogfile&quot;.\r\n\tlog4j: Appender &quot;wslogfile&quot; was already parsed.\r\n\tlog4j: Handling log4j.additivity.com.comp=[false]\r\n\tlog4j: Setting additivity for &quot;com.comp&quot; to false\r\n\tlog4j: Parsing for [org.springframework.ws.server.MessageTracing.received] with value=[TRACE, stdout, wslogfile].\r\n\tlog4j: Level token is [TRACE].\r\n\tlog4j: Category org.springframework.ws.server.MessageTracing.received set to TRACE\r\n\tlog4j: Parsing appender named &quot;stdout&quot;.\r\n\tlog4j: Appender &quot;stdout&quot; was already parsed.\r\n\tlog4j: Parsing appender named &quot;wslogfile&quot;.\r\n\tlog4j: Appender &quot;wslogfile&quot; was already parsed.\r\n\tlog4j: Handling log4j.additivity.org.springframework.ws.server.MessageTracing.received=[false]\r\n\tlog4j: Setting additivity for &quot;org.springframework.ws.server.MessageTracing.received&quot; to false\r\n\tlog4j: Finished configuring.\r\n\r\nMy log4j.properties is as below\r\n\tlog4j.rootLogger=WARN, stdout, wslogfile\r\n\t\r\n\tlog4j.logger.com.app=DEBUG, stdout, wslogfile\r\n\tlog4j.additivity.com.app=false\r\n\t\r\n\tlog4j.logger.com.comp=DEBUG, stdout, wslogfile\r\n\tlog4j.additivity.com.comp=false\r\n\t\r\n\tlog4j.logger.org.springframework.ws.server.MessageTracing.received=TRACE, stdout, wslogfile\r\n\tlog4j.additivity.org.springframework.ws.server.MessageTracing.received=false\r\n\t\r\n\tlog4j.appender.wslogfile=org.apache.log4j.DailyRollingFileAppender\r\n\tlog4j.appender.wslogfile.File=/weblogic/apps/logs/ws.log\r\n\tlog4j.appender.wslogfile.DatePattern=&#39;.&#39;yyyy-MM-dd\r\n\tlog4j.appender.wslogfile.layout=org.apache.log4j.PatternLayout\r\n\tlog4j.appender.wslogfile.layout.ConversionPattern=%d %6.6p [%30.30c{1}][%10.10t] %m%n\r\n\t\r\n\tlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\r\n\tlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\r\n\tlog4j.appender.stdout.layout.ConversionPattern=%d %6.6p [%30.30c{1}][%10.10t] %m%n\r\n\r\nSample output of the logs (only showing in stdout)\r\n\r\n\tSep 28, 2022 11:42:17 AM org.springframework.web.servlet.FrameworkServlet initServletBean\r\n\tINFO: FrameworkServlet &#39;spring-ws&#39;: initialization started\r\n\tSep 28, 2022 11:42:17 AM org.springframework.context.support.AbstractApplicationContext prepareRefresh\r\n\tINFO: Refreshing WebApplicationContext for namespace &#39;spring-ws-servlet&#39;: startup date [Wed Sep 28 11:42:17 AST 2022]; root of context hierarchy\r\n\tSep 28, 2022 11:42:17 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions\r\n\tINFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/spring-ws-servlet.xml]\r\n\tSep 28, 2022 11:42:17 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions\r\n\tINFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/service-context.xml]\r\n\tSep 28, 2022 11:42:18 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions\r\n\tINFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/stmt-client-context.xml]\r\n\r\nMy pom.xml is as below\r\n\r\n\t\t&lt;!-- Logging with SLF4J &amp; LogBack --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.12&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.12&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.12&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2.14&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;","title":"log4j.properties loaded but not used Weblogic 12c","body":"<p>I have a war file (web-services) deployed on weblogic 12c that reads the log4j.properties file but doesn't use it. Below is the debug of log4j on application startup showing the parsing of the file and the setting but the logs are not being written to the log file specified and the ones in stdout do not match the pattern specified and the levels configured.</p>\n<pre><code>log4j: Reading configuration from URL file:////weblogic/apps/config/ws/log4j.properties\nlog4j: Parsing for [root] with value=[WARN, stdout, wslogfile].\nlog4j: Level token is [WARN].\nlog4j: Category root set to WARN\nlog4j: Parsing appender named &quot;stdout&quot;.\nlog4j: Parsing layout options for &quot;stdout&quot;.\nlog4j: Setting property [conversionPattern] to [%d %6.6p [%30.30c{1}][%10.10t] %m%n].\nlog4j: End of parsing for &quot;stdout&quot;.\nlog4j: Parsed &quot;stdout&quot; options.\nlog4j: Parsing appender named &quot;wslogfile&quot;.\nlog4j: Parsing layout options for &quot;wslogfile&quot;.\nlog4j: Setting property [conversionPattern] to [%d %6.6p [%30.30c{1}][%10.10t] %m%n].\nlog4j: End of parsing for &quot;wslogfile&quot;.\nlog4j: Setting property [file] to [/weblogic/apps/logs/ws.log].\nlog4j: Setting property [datePattern] to ['.'yyyy-MM-dd].\nlog4j: setFile called: /weblogic/apps/logs/ws.log, true\nlog4j: setFile ended\nlog4j: Appender [wslogfile] to be rolled at midnight.\nlog4j: Parsed &quot;wslogfile&quot; options.\nlog4j: Parsing for [com.app] with value=[DEBUG, stdout, wslogfile].\nlog4j: Level token is [DEBUG].\nlog4j: Category com.app set to DEBUG\nlog4j: Parsing appender named &quot;stdout&quot;.\nlog4j: Appender &quot;stdout&quot; was already parsed.\nlog4j: Parsing appender named &quot;wslogfile&quot;.\nlog4j: Appender &quot;wslogfile&quot; was already parsed.\nlog4j: Handling log4j.additivity.com.app=[false]\nlog4j: Setting additivity for &quot;com.app&quot; to false\nlog4j: Parsing for [com.comp] with value=[DEBUG, stdout, wslogfile].\nlog4j: Level token is [DEBUG].\nlog4j: Category com.comp set to DEBUG\nlog4j: Parsing appender named &quot;stdout&quot;.\nlog4j: Appender &quot;stdout&quot; was already parsed.\nlog4j: Parsing appender named &quot;wslogfile&quot;.\nlog4j: Appender &quot;wslogfile&quot; was already parsed.\nlog4j: Handling log4j.additivity.com.comp=[false]\nlog4j: Setting additivity for &quot;com.comp&quot; to false\nlog4j: Parsing for [org.springframework.ws.server.MessageTracing.received] with value=[TRACE, stdout, wslogfile].\nlog4j: Level token is [TRACE].\nlog4j: Category org.springframework.ws.server.MessageTracing.received set to TRACE\nlog4j: Parsing appender named &quot;stdout&quot;.\nlog4j: Appender &quot;stdout&quot; was already parsed.\nlog4j: Parsing appender named &quot;wslogfile&quot;.\nlog4j: Appender &quot;wslogfile&quot; was already parsed.\nlog4j: Handling log4j.additivity.org.springframework.ws.server.MessageTracing.received=[false]\nlog4j: Setting additivity for &quot;org.springframework.ws.server.MessageTracing.received&quot; to false\nlog4j: Finished configuring.\n</code></pre>\n<p>My log4j.properties is as below\nlog4j.rootLogger=WARN, stdout, wslogfile</p>\n<pre><code>log4j.logger.com.app=DEBUG, stdout, wslogfile\nlog4j.additivity.com.app=false\n\nlog4j.logger.com.comp=DEBUG, stdout, wslogfile\nlog4j.additivity.com.comp=false\n\nlog4j.logger.org.springframework.ws.server.MessageTracing.received=TRACE, stdout, wslogfile\nlog4j.additivity.org.springframework.ws.server.MessageTracing.received=false\n\nlog4j.appender.wslogfile=org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.wslogfile.File=/weblogic/apps/logs/ws.log\nlog4j.appender.wslogfile.DatePattern='.'yyyy-MM-dd\nlog4j.appender.wslogfile.layout=org.apache.log4j.PatternLayout\nlog4j.appender.wslogfile.layout.ConversionPattern=%d %6.6p [%30.30c{1}][%10.10t] %m%n\n\nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\nlog4j.appender.stdout.layout.ConversionPattern=%d %6.6p [%30.30c{1}][%10.10t] %m%n\n</code></pre>\n<p>Sample output of the logs (only showing in stdout)</p>\n<pre><code>Sep 28, 2022 11:42:17 AM org.springframework.web.servlet.FrameworkServlet initServletBean\nINFO: FrameworkServlet 'spring-ws': initialization started\nSep 28, 2022 11:42:17 AM org.springframework.context.support.AbstractApplicationContext prepareRefresh\nINFO: Refreshing WebApplicationContext for namespace 'spring-ws-servlet': startup date [Wed Sep 28 11:42:17 AST 2022]; root of context hierarchy\nSep 28, 2022 11:42:17 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions\nINFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/spring-ws-servlet.xml]\nSep 28, 2022 11:42:17 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions\nINFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/service-context.xml]\nSep 28, 2022 11:42:18 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions\nINFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/stmt-client-context.xml]\n</code></pre>\n<p>My pom.xml is as below</p>\n<pre><code>    &lt;!-- Logging with SLF4J &amp; LogBack --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;version&gt;1.7.12&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\n        &lt;version&gt;1.7.12&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n        &lt;version&gt;1.7.12&lt;/version&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n        &lt;version&gt;1.2.14&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","security","keystore","jks"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1371738925,"post_id":17216477,"comment_id":24940097,"body_markdown":"Well it sounds like your key store file is too short...","body":"Well it sounds like your key store file is too short..."},{"owner":{"account_id":2894650,"reputation":63,"user_id":2482709,"display_name":"amin"},"score":0,"creation_date":1371739114,"post_id":17216477,"comment_id":24940224,"body_markdown":"hi jon thanks for your response, what do you mean by &quot;my keystore file is too short ??&quot;","body":"hi jon thanks for your response, what do you mean by &quot;my keystore file is too short ??&quot;"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1371739547,"post_id":17216477,"comment_id":24940500,"body_markdown":"Exactly what I say. You&#39;re opening a file as your keystore. It appears not to be a valid, complete keystore file. I&#39;m not sure what else I can say...","body":"Exactly what I say. You&#39;re opening a file as your keystore. It appears not to be a valid, complete keystore file. I&#39;m not sure what else I can say..."},{"owner":{"account_id":2894650,"reputation":63,"user_id":2482709,"display_name":"amin"},"score":1,"creation_date":1371742610,"post_id":17216477,"comment_id":24942451,"body_markdown":"ok i understand what you say, do you have any idea how to resolve it ??","body":"ok i understand what you say, do you have any idea how to resolve it ??"}],"answers":[{"tags":[],"owner":{"account_id":18063421,"reputation":393,"user_id":13129983,"display_name":"kikicoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664882738,"creation_date":1664882738,"answer_id":73947177,"question_id":17216477,"body_markdown":"I just want to post my answer for the future,\r\nI faced the same issue and found the solution ,\r\nthat path you pass for the fileInputStream must be the path of keyStore inside java in my case I was on ubuntu 20.04 and java 11 the path was the following: &quot;/usr/lib/jvm/java-11-openjdk-amd64/lib/security/cacerts&quot;\r\nin case you are on windows the path will be: &quot;C:/Program Files/Java/jre1.8.0_101/lib/security/cacerts&quot; \r\n\r\nmake sure also that the password will usually be the default and it is like the following word: &quot;changeit&quot; \r\n","title":"error when creating a keystore =&gt; Exception in thread &quot;main&quot; java.io.EOFException at java.io.DataInputStream.readInt(Unknown Source)","body":"<p>I just want to post my answer for the future,\nI faced the same issue and found the solution ,\nthat path you pass for the fileInputStream must be the path of keyStore inside java in my case I was on ubuntu 20.04 and java 11 the path was the following: &quot;/usr/lib/jvm/java-11-openjdk-amd64/lib/security/cacerts&quot;\nin case you are on windows the path will be: &quot;C:/Program Files/Java/jre1.8.0_101/lib/security/cacerts&quot;</p>\n<p>make sure also that the password will usually be the default and it is like the following word: &quot;changeit&quot;</p>\n"}],"owner":{"account_id":2894650,"reputation":63,"user_id":2482709,"display_name":"amin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2584,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1664882738,"creation_date":1371738857,"question_id":17216477,"body_markdown":"the source code that I followed to create a keystore, \r\n\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.security.KeyStore;\r\n    import java.security.cert.Certificate;\r\n    \r\n    public class MainClass {\r\n    \r\n    public static void main(String args[]) throws Exception {\r\n    String pass = &quot;wshr.ut&quot;;\r\n    String alias = &quot;mytest&quot;;\r\n    String name = &quot;mykeystore&quot;;\r\n    \r\n    FileInputStream in = new FileInputStream(name);\r\n    KeyStore ks = KeyStore.getInstance(&quot;JKS&quot;);\r\n    ks.load(in, pass.toCharArray());\r\n    \r\n    Certificate c = ks.getCertificate(alias);\r\n    in.close();\r\n    System.out.println(c);\r\n    \r\n    }\r\n    }\r\nerror when running:\r\n\r\n    Exception in thread &quot;main&quot; java.io.EOFException\r\n\tat java.io.DataInputStream.readInt(Unknown Source)\r\n\tat sun.security.provider.JavaKeyStore.engineLoad(Unknown Source)\r\n\tat sun.security.provider.JavaKeyStore$JKS.engineLoad(Unknown Source)\r\n\tat java.security.KeyStore.load(Unknown Source)\r\n\tat MainClass.main(MainClass.java:17)\r\n\r\ncan you plz give me any ideas or solutions to reslove this problem ?","title":"error when creating a keystore =&gt; Exception in thread &quot;main&quot; java.io.EOFException at java.io.DataInputStream.readInt(Unknown Source)","body":"<p>the source code that I followed to create a keystore, </p>\n\n<pre><code>import java.io.File;\nimport java.io.FileInputStream;\nimport java.security.KeyStore;\nimport java.security.cert.Certificate;\n\npublic class MainClass {\n\npublic static void main(String args[]) throws Exception {\nString pass = \"wshr.ut\";\nString alias = \"mytest\";\nString name = \"mykeystore\";\n\nFileInputStream in = new FileInputStream(name);\nKeyStore ks = KeyStore.getInstance(\"JKS\");\nks.load(in, pass.toCharArray());\n\nCertificate c = ks.getCertificate(alias);\nin.close();\nSystem.out.println(c);\n\n}\n}\n</code></pre>\n\n<p>error when running:</p>\n\n<pre><code>Exception in thread \"main\" java.io.EOFException\nat java.io.DataInputStream.readInt(Unknown Source)\nat sun.security.provider.JavaKeyStore.engineLoad(Unknown Source)\nat sun.security.provider.JavaKeyStore$JKS.engineLoad(Unknown Source)\nat java.security.KeyStore.load(Unknown Source)\nat MainClass.main(MainClass.java:17)\n</code></pre>\n\n<p>can you plz give me any ideas or solutions to reslove this problem ?</p>\n"},{"tags":["java","spring-boot","ssl","https","pkcs#12"],"comments":[{"owner":{"account_id":9072254,"reputation":1014,"user_id":6754986,"display_name":"LinFelix"},"score":0,"creation_date":1664884576,"post_id":73947136,"comment_id":130567772,"body_markdown":"Are you asking for a tutorial? What have you tried so far? What hasn&#39;t been working the way you expect?","body":"Are you asking for a tutorial? What have you tried so far? What hasn&#39;t been working the way you expect?"},{"owner":{"account_id":26524602,"reputation":1,"user_id":20157786,"display_name":"nishchith rao"},"score":0,"creation_date":1665143179,"post_id":73947136,"comment_id":130636275,"body_markdown":"I am looking for a tutorial. Most of the tutorial is self signed and not between a real server and client. Kindly help if you have some reference tutorial.","body":"I am looking for a tutorial. Most of the tutorial is self signed and not between a real server and client. Kindly help if you have some reference tutorial."}],"owner":{"account_id":26524602,"reputation":1,"user_id":20157786,"display_name":"nishchith rao"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":265,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664882553,"creation_date":1664882553,"question_id":73947136,"body_markdown":"We have received crt, pfx and key file from our server team which is a Spring boot application. These are not self signed certificates.\r\n\r\nNow, we are requested to use the certificates and change our code to our server application via HTTPs.\r\n\r\nCan some one please advice how to load these certificates and establish the connection with Java server application.","title":"How to use pfx, crt and key files to connect to Java Spring boot server","body":"<p>We have received crt, pfx and key file from our server team which is a Spring boot application. These are not self signed certificates.</p>\n<p>Now, we are requested to use the certificates and change our code to our server application via HTTPs.</p>\n<p>Can some one please advice how to load these certificates and establish the connection with Java server application.</p>\n"},{"tags":["java","spring","spring-boot","maven","intellij-idea"],"comments":[{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":0,"creation_date":1664892802,"post_id":73946979,"comment_id":130570889,"body_markdown":"Spring boot profile is not the same as Maven profile. How exactly do you plan to use the Maven profile in Spring profile? See https://docs.spring.io/spring-boot/docs/1.2.0.M1/reference/html/boot-features-profiles.html and https://www.baeldung.com/spring-profiles to lear about Spring profiles.","body":"Spring boot profile is not the same as Maven profile. How exactly do you plan to use the Maven profile in Spring profile? See <a href=\"https://docs.spring.io/spring-boot/docs/1.2.0.M1/reference/html/boot-features-profiles.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/1.2.0.M1/reference/html/&hellip;</a> and <a href=\"https://www.baeldung.com/spring-profiles\" rel=\"nofollow noreferrer\">baeldung.com/spring-profiles</a> to lear about Spring profiles."},{"owner":{"account_id":16634092,"reputation":798,"user_id":12804925,"display_name":"Jakub Znamen&#225;ček"},"score":0,"creation_date":1664916424,"post_id":73946979,"comment_id":130578378,"body_markdown":"Hi Andrey, basically what I want to do is, that when I select profile in IntelliJ, it will be trigger correct profile in maven profiles. (I would like to have profile1 using some maven configuration and profile2 using another) these configurations are also connected with different spring profiles. Hopefully it makes sense.","body":"Hi Andrey, basically what I want to do is, that when I select profile in IntelliJ, it will be trigger correct profile in maven profiles. (I would like to have profile1 using some maven configuration and profile2 using another) these configurations are also connected with different spring profiles. Hopefully it makes sense."}],"owner":{"account_id":16634092,"reputation":798,"user_id":12804925,"display_name":"Jakub Znamen&#225;ček"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664881655,"creation_date":1664881655,"question_id":73946979,"body_markdown":"I would like to activate maven profile based on the IntelliJ profile I select. I need to use different dependency when running the app locally and when deploying it to server.\r\n\r\nI have these two profiles which select correct version of TimesTen, I would like to use &quot;local&quot; profile when testing the app locally in IntelliJ and the &quot;server&quot; profile when building the app.\r\n\r\n```xml\r\n&lt;profiles&gt;\r\n\t\t&lt;profile&gt;\r\n\t\t\t&lt;id&gt;local&lt;/id&gt;\r\n\t\t\t&lt;activation&gt;\r\n\t\t\t\t&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n\t\t\t&lt;/activation&gt;\r\n\t\t\t&lt;properties&gt;\r\n\t\t\t\t&lt;org.timesten.version&gt;6&lt;/org.timesten.version&gt;\r\n\t\t\t&lt;/properties&gt;\r\n\t\t&lt;/profile&gt;\r\n\t\t&lt;profile&gt;\r\n\t\t\t&lt;id&gt;server&lt;/id&gt;\r\n\t\t\t&lt;properties&gt;\r\n\t\t\t\t&lt;org.timesten.version&gt;11&lt;/org.timesten.version&gt;\r\n\t\t\t&lt;/properties&gt;\r\n\t\t&lt;/profile&gt;\r\n\t&lt;/profiles&gt;\r\n```\r\n\r\nThese are my IntelliJ profiles:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QCRad.png","title":"How to use maven profile based on the IntelliJ profile?","body":"<p>I would like to activate maven profile based on the IntelliJ profile I select. I need to use different dependency when running the app locally and when deploying it to server.</p>\n<p>I have these two profiles which select correct version of TimesTen, I would like to use &quot;local&quot; profile when testing the app locally in IntelliJ and the &quot;server&quot; profile when building the app.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;local&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n            &lt;/activation&gt;\n            &lt;properties&gt;\n                &lt;org.timesten.version&gt;6&lt;/org.timesten.version&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n        &lt;profile&gt;\n            &lt;id&gt;server&lt;/id&gt;\n            &lt;properties&gt;\n                &lt;org.timesten.version&gt;11&lt;/org.timesten.version&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n</code></pre>\n<p>These are my IntelliJ profiles:\n<a href=\"https://i.stack.imgur.com/QCRad.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QCRad.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","xml","android-studio","android-11"],"comments":[{"owner":{"account_id":6316309,"reputation":2040,"user_id":4906130,"display_name":"Bhavnik"},"score":1,"creation_date":1664879727,"post_id":73946538,"comment_id":130566227,"body_markdown":"Remove AdView from the scroll view and wrap scroll view and AdView in the Constraint layout.","body":"Remove AdView from the scroll view and wrap scroll view and AdView in the Constraint layout."}],"answers":[{"tags":[],"owner":{"account_id":23733633,"reputation":742,"user_id":17752564,"display_name":"ninhnau19"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664880221,"creation_date":1664880221,"answer_id":73946678,"question_id":73946538,"body_markdown":"This is my suggestion: Put scrollview inside constrainLayout, like this:\r\n```\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot; ...&gt;\r\n\r\n     &lt;ScrollView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        app:layout_constraintBottom_toTopOf=&quot;@+id/view&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\r\n\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot; ...&gt;\r\n\r\n        //main layout here\r\n\r\n        &lt;/LinearLayout&gt;\r\n    &lt;/ScrollView&gt;\r\n\r\n    &lt;AdView\r\n        android:id=&quot;@+id/view&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```","title":"How do I add adView outside of scrollview in android studio?","body":"<p>This is my suggestion: Put scrollview inside constrainLayout, like this:</p>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot; ...&gt;\n\n     &lt;ScrollView\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;0dp&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@+id/view&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot; ...&gt;\n\n        //main layout here\n\n        &lt;/LinearLayout&gt;\n    &lt;/ScrollView&gt;\n\n    &lt;AdView\n        android:id=&quot;@+id/view&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22858744,"reputation":153,"user_id":19369820,"display_name":"Elazar Halperin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664881333,"creation_date":1664881333,"answer_id":73946910,"question_id":73946538,"body_markdown":"Make your parent layout to LinearLayout, add the AdView to be on the top (width to match the parent and the height to wrap content), add your scrollView (width and height to match parent)\r\n\r\nThe xml will look like this\r\n\r\n```\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;AdView\r\n        android:id=&quot;@+id/view&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\r\n\r\n    &lt;ScrollView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        app:layout_constraintBottom_toTopOf=&quot;@+id/view&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\r\n\r\n        // your layout.\r\n\r\n    &lt;/ScrollView&gt;\r\n&lt;/LinearLayout&gt;\r\n```","title":"How do I add adView outside of scrollview in android studio?","body":"<p>Make your parent layout to LinearLayout, add the AdView to be on the top (width to match the parent and the height to wrap content), add your scrollView (width and height to match parent)</p>\n<p>The xml will look like this</p>\n<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;AdView\n        android:id=&quot;@+id/view&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\n\n    &lt;ScrollView\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@+id/view&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\n\n        // your layout.\n\n    &lt;/ScrollView&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n"}],"owner":{"account_id":26402143,"reputation":1,"user_id":20052443,"display_name":"Gavin123"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1664881333,"creation_date":1664879444,"question_id":73946538,"body_markdown":"I am trying to add a banner add at the bottom of my app but I don&#39;t know how to put it so that it is not affected by the scrollview. I want it to sit at the bottom of my screen without it being \r\naffected by the scroll effect how do I do this, when I try putting the AdView code outside the ScrollView it doesn&#39;t work.\r\nThis is how my activity_main.xml looks like\r\n\r\n   \r\n\r\n    &lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:background=&quot;@color/grey&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:orientation=&quot;vertical&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;&gt;\r\n\r\n        &lt;androidx.cardview.widget.CardView\r\n            android:layout_margin=&quot;16dp&quot;\r\n            app:cardCornerRadius=&quot;8dp&quot;\r\n            app:cardElevation=&quot;8dp&quot;\r\n            app:cardBackgroundColor=&quot;@color/blue&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n            &lt;androidx.appcompat.widget.SearchView\r\n                android:id=&quot;@+id/search_view&quot;\r\n                app:defaultQueryHint=&quot;Search...&quot;\r\n                app:iconifiedByDefault=&quot;false&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;?attr/actionBarSize&quot;/&gt;\r\n        &lt;/androidx.cardview.widget.CardView&gt;\r\n\r\n            &lt;LinearLayout\r\n            android:layout_margin=&quot;16dp&quot;\r\n            android:orientation=&quot;vertical&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;&gt;\r\n                &lt;TextView\r\n                android:id=&quot;@+id/textView_a&quot;\r\n                android:textSize=&quot;24sp&quot;\r\n                android:text=&quot;A&quot;\r\n                android:textColor=&quot;@color/blue&quot;\r\n                android:textAlignment=&quot;center&quot;\r\n                android:padding=&quot;8dp&quot;\r\n                android:textStyle=&quot;italic&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;/&gt;\r\n                &lt;androidx.recyclerview.widget.RecyclerView\r\n                android:id=&quot;@+id/recycler_a&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;/&gt;\r\n                &lt;TextView\r\n                android:textSize=&quot;24sp&quot;\r\n                android:text=&quot;B&quot;\r\n                android:textColor=&quot;@color/blue&quot;\r\n                android:textAlignment=&quot;center&quot;\r\n                android:padding=&quot;8dp&quot;\r\n                android:textStyle=&quot;italic&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;/&gt;\r\n                &lt;androidx.recyclerview.widget.RecyclerView\r\n                android:id=&quot;@+id/recycler_b&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;/&gt;\r\n            &lt;/LinearLayout&gt;\r\n        \r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:gravity=&quot;center_horizontal&quot;\r\n            android:orientation=&quot;vertical&quot;&gt;\r\n\r\n            &lt;com.google.android.gms.ads.AdView xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n                android:id=&quot;@+id/adView&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                ads:adSize=&quot;SMART_BANNER&quot;\r\n                ads:adUnitId=&quot;ca-app-pub-3940256099942544/6300978111&quot;&gt;\r\n            &lt;/com.google.android.gms.ads.AdView&gt;\r\n        &lt;/LinearLayout&gt;\r\n    &lt;/LinearLayout&gt;\r\n&lt;/ScrollView&gt;","title":"How do I add adView outside of scrollview in android studio?","body":"<p>I am trying to add a banner add at the bottom of my app but I don't know how to put it so that it is not affected by the scrollview. I want it to sit at the bottom of my screen without it being\naffected by the scroll effect how do I do this, when I try putting the AdView code outside the ScrollView it doesn't work.\nThis is how my activity_main.xml looks like</p>\n<pre><code>&lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\nandroid:background=&quot;@color/grey&quot;\ntools:context=&quot;.MainActivity&quot;&gt;\n\n&lt;LinearLayout\n    android:orientation=&quot;vertical&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;&gt;\n\n    &lt;androidx.cardview.widget.CardView\n        android:layout_margin=&quot;16dp&quot;\n        app:cardCornerRadius=&quot;8dp&quot;\n        app:cardElevation=&quot;8dp&quot;\n        app:cardBackgroundColor=&quot;@color/blue&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;androidx.appcompat.widget.SearchView\n            android:id=&quot;@+id/search_view&quot;\n            app:defaultQueryHint=&quot;Search...&quot;\n            app:iconifiedByDefault=&quot;false&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;?attr/actionBarSize&quot;/&gt;\n    &lt;/androidx.cardview.widget.CardView&gt;\n\n        &lt;LinearLayout\n        android:layout_margin=&quot;16dp&quot;\n        android:orientation=&quot;vertical&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;&gt;\n            &lt;TextView\n            android:id=&quot;@+id/textView_a&quot;\n            android:textSize=&quot;24sp&quot;\n            android:text=&quot;A&quot;\n            android:textColor=&quot;@color/blue&quot;\n            android:textAlignment=&quot;center&quot;\n            android:padding=&quot;8dp&quot;\n            android:textStyle=&quot;italic&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;/&gt;\n            &lt;androidx.recyclerview.widget.RecyclerView\n            android:id=&quot;@+id/recycler_a&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;/&gt;\n            &lt;TextView\n            android:textSize=&quot;24sp&quot;\n            android:text=&quot;B&quot;\n            android:textColor=&quot;@color/blue&quot;\n            android:textAlignment=&quot;center&quot;\n            android:padding=&quot;8dp&quot;\n            android:textStyle=&quot;italic&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;/&gt;\n            &lt;androidx.recyclerview.widget.RecyclerView\n            android:id=&quot;@+id/recycler_b&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;/&gt;\n        &lt;/LinearLayout&gt;\n    \n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:gravity=&quot;center_horizontal&quot;\n        android:orientation=&quot;vertical&quot;&gt;\n\n        &lt;com.google.android.gms.ads.AdView xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\n            android:id=&quot;@+id/adView&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            ads:adSize=&quot;SMART_BANNER&quot;\n            ads:adUnitId=&quot;ca-app-pub-3940256099942544/6300978111&quot;&gt;\n        &lt;/com.google.android.gms.ads.AdView&gt;\n    &lt;/LinearLayout&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n"},{"tags":["java","docker"],"comments":[{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":1,"creation_date":1609689429,"post_id":65551215,"comment_id":115895330,"body_markdown":"Modern JVMs already know how to set the heap size based on the cgroup memory limits, so this should reduce to the more portable problem of figuring out the current Java heap utilization.","body":"Modern JVMs already know how to set the heap size based on the cgroup memory limits, so this should reduce to the more portable problem of figuring out the current Java heap utilization."}],"answers":[{"comments":[{"owner":{"account_id":15067872,"reputation":1284,"user_id":10874380,"display_name":"Pegasis"},"score":0,"creation_date":1609789948,"post_id":65554131,"comment_id":115927491,"body_markdown":"I believe memory.usage_in_bytes includes memory used by disk cache? Is there a way to get memory without disk cache? (What about total_rss in memory.stat?)","body":"I believe memory.usage_in_bytes includes memory used by disk cache? Is there a way to get memory without disk cache? (What about total_rss in memory.stat?)"},{"owner":{"account_id":35261,"reputation":163480,"user_id":99834,"accept_rate":46,"display_name":"sorin"},"score":0,"creation_date":1695143489,"post_id":65554131,"comment_id":135983545,"body_markdown":"2023: Not sure if with current versions of podman and docker, the correct place to look into seems to be `/sys/fs/cgroup/cpu.max` as the other ones are not visible.","body":"2023: Not sure if with current versions of podman and docker, the correct place to look into seems to be <code>&#47;sys&#47;fs&#47;cgroup&#47;cpu.max</code> as the other ones are not visible."}],"tags":[],"owner":{"account_id":293130,"reputation":238948,"user_id":596285,"accept_rate":100,"display_name":"BMitch"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1609702704,"creation_date":1609702704,"answer_id":65554131,"question_id":65551215,"body_markdown":"This is all controlled by cgroups. So you can check the cgroup limits and utilization:\r\n\r\n    $ docker run -it --rm --cpus 1.5 --memory 1g busybox /bin/sh\r\n    / # cat /sys/fs/cgroup/memory/memory.usage_in_bytes\r\n    3043328\r\n    / # cat /sys/fs/cgroup/memory/memory.limit_in_bytes\r\n    1073741824\r\n    / # cat /sys/fs/cgroup/cpu/cpu.cfs_quota_us\r\n    150000\r\n    / # cat /sys/fs/cgroup/cpu/cpu.cfs_period_us\r\n    100000\r\n    / # cat /sys/fs/cgroup/cpu/cpuacct.usage\r\n    97206588\r\n\r\nThe memory usage and limit are fairly straight forward to monitor. This is more accurate than monitoring the Java heap usage since heap is only one portion of memory used by Java.\r\n\r\nThe CPU quota over the period gives you the number of fractional CPU&#39;s allocated, 150000/100000 = 1.5. You could monitor the cpuacct.usage over time to calculate when it exceeds the limit and is throttling your process.\r\n","title":"Get docker cpu/memory limit inside container","body":"<p>This is all controlled by cgroups. So you can check the cgroup limits and utilization:</p>\n<pre><code>$ docker run -it --rm --cpus 1.5 --memory 1g busybox /bin/sh\n/ # cat /sys/fs/cgroup/memory/memory.usage_in_bytes\n3043328\n/ # cat /sys/fs/cgroup/memory/memory.limit_in_bytes\n1073741824\n/ # cat /sys/fs/cgroup/cpu/cpu.cfs_quota_us\n150000\n/ # cat /sys/fs/cgroup/cpu/cpu.cfs_period_us\n100000\n/ # cat /sys/fs/cgroup/cpu/cpuacct.usage\n97206588\n</code></pre>\n<p>The memory usage and limit are fairly straight forward to monitor. This is more accurate than monitoring the Java heap usage since heap is only one portion of memory used by Java.</p>\n<p>The CPU quota over the period gives you the number of fractional CPU's allocated, 150000/100000 = 1.5. You could monitor the cpuacct.usage over time to calculate when it exceeds the limit and is throttling your process.</p>\n"},{"tags":[],"owner":{"account_id":8855308,"reputation":128,"user_id":6613259,"display_name":"sebi88"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1664881083,"creation_date":1664881083,"answer_id":73946866,"question_id":65551215,"body_markdown":"For cgroup2:\r\n\r\n    / # cat /sys/fs/cgroup/memory.current\r\n    503808\r\n\r\n    / # cat /sys/fs/cgroup/memory.max\r\n    1073741824\r\n\r\n    / # cat /sys/fs/cgroup/cpu.stat\r\n    usage_usec 58384\r\n    user_usec 23602\r\n    system_usec 34782\r\n    nr_periods 37\r\n    nr_throttled 0\r\n    throttled_usec 0\r\n\r\n    / # cat /sys/fs/cgroup/cpu.max\r\n    150000 100000\r\n\r\nsee: https://facebookmicrosites.github.io/cgroup2/docs/cpu-controller.html\r\n\r\nsee2: https://facebookmicrosites.github.io/cgroup2/docs/memory-controller.html","title":"Get docker cpu/memory limit inside container","body":"<p>For cgroup2:</p>\n<pre><code>/ # cat /sys/fs/cgroup/memory.current\n503808\n\n/ # cat /sys/fs/cgroup/memory.max\n1073741824\n\n/ # cat /sys/fs/cgroup/cpu.stat\nusage_usec 58384\nuser_usec 23602\nsystem_usec 34782\nnr_periods 37\nnr_throttled 0\nthrottled_usec 0\n\n/ # cat /sys/fs/cgroup/cpu.max\n150000 100000\n</code></pre>\n<p>see: <a href=\"https://facebookmicrosites.github.io/cgroup2/docs/cpu-controller.html\" rel=\"nofollow noreferrer\">https://facebookmicrosites.github.io/cgroup2/docs/cpu-controller.html</a></p>\n<p>see2: <a href=\"https://facebookmicrosites.github.io/cgroup2/docs/memory-controller.html\" rel=\"nofollow noreferrer\">https://facebookmicrosites.github.io/cgroup2/docs/memory-controller.html</a></p>\n"}],"owner":{"account_id":15067872,"reputation":1284,"user_id":10874380,"display_name":"Pegasis"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4926,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1664881083,"creation_date":1609685858,"question_id":65551215,"body_markdown":"I&#39;m implementing a feature in my dockerized server where it will ignore some of the requests when cpu and memory utilization is too high.\r\n\r\nI already found out how to get memory and cpu time used by the process inside container [here](https://stackoverflow.com/questions/51248144/getting-cpu-and-memory-usage-of-a-docker-container-from-within-the-dockerized-ap), but I also need a way to get cpu limit and memory limit (set by [Runtime Options](https://docs.docker.com/config/containers/resource_constraints/#cpu)) to calculate the percentage.\r\n\r\nAlso, I can read the load for the host system from `/proc/loadavg`, is there a &quot;per-container load&quot; somewhere I can read?\r\n\r\nI&#39;m using Java/Kotlin on openjdk 14.\r\n\r\n**Update**: I found out I can get memory limit from `/sys/fs/cgroup/memory/memory.limit_in_bytes`","title":"Get docker cpu/memory limit inside container","body":"<p>I'm implementing a feature in my dockerized server where it will ignore some of the requests when cpu and memory utilization is too high.</p>\n<p>I already found out how to get memory and cpu time used by the process inside container <a href=\"https://stackoverflow.com/questions/51248144/getting-cpu-and-memory-usage-of-a-docker-container-from-within-the-dockerized-ap\">here</a>, but I also need a way to get cpu limit and memory limit (set by <a href=\"https://docs.docker.com/config/containers/resource_constraints/#cpu\" rel=\"nofollow noreferrer\">Runtime Options</a>) to calculate the percentage.</p>\n<p>Also, I can read the load for the host system from <code>/proc/loadavg</code>, is there a &quot;per-container load&quot; somewhere I can read?</p>\n<p>I'm using Java/Kotlin on openjdk 14.</p>\n<p><strong>Update</strong>: I found out I can get memory limit from <code>/sys/fs/cgroup/memory/memory.limit_in_bytes</code></p>\n"},{"tags":["java","spring","h2","liquibase","spring-data-r2dbc"],"answers":[{"tags":[],"owner":{"account_id":8016474,"reputation":3619,"user_id":10210069,"display_name":"eeqk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664881057,"creation_date":1664881057,"answer_id":73946857,"question_id":73946856,"body_markdown":"The problem was caused by the URL, R2DBC requires it to look like this:\r\n```yaml\r\n  r2dbc:\r\n    url: r2dbc:h2:file:///./.testdb\r\n```\r\n\r\nBut then if you try to copy it over to Liquibase part, the error appears. To fix that, remove forward slashes from Liquibase URL:\r\n```yaml\r\nspring:\r\n  liquibase:\r\n    change-log: classpath:liquibase/db.changelog.xml\r\n    contexts: production\r\n    url: jdbc:h2:file:./.testdb;MODE=MySQL\r\n```\r\n\r\n\r\n----------\r\n\r\n\r\nFinal version:\r\n\r\n```yaml\r\nspring:\r\n  liquibase:\r\n    change-log: classpath:liquibase/db.changelog.xml\r\n    contexts: production\r\n    url: jdbc:h2:file:./.testdb;MODE=MySQL\r\n\r\n  r2dbc:\r\n    url: r2dbc:h2:file:///./.testdb\r\n  h2:\r\n    console:\r\n      enabled: false\r\n```","title":"Spring, H2, R2DBC and Liquibase: /.testdb.trace.db: Read-only file system","body":"<p>The problem was caused by the URL, R2DBC requires it to look like this:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>  r2dbc:\n    url: r2dbc:h2:file:///./.testdb\n</code></pre>\n<p>But then if you try to copy it over to Liquibase part, the error appears. To fix that, remove forward slashes from Liquibase URL:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  liquibase:\n    change-log: classpath:liquibase/db.changelog.xml\n    contexts: production\n    url: jdbc:h2:file:./.testdb;MODE=MySQL\n</code></pre>\n<hr />\n<p>Final version:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  liquibase:\n    change-log: classpath:liquibase/db.changelog.xml\n    contexts: production\n    url: jdbc:h2:file:./.testdb;MODE=MySQL\n\n  r2dbc:\n    url: r2dbc:h2:file:///./.testdb\n  h2:\n    console:\n      enabled: false\n</code></pre>\n"}],"owner":{"account_id":8016474,"reputation":3619,"user_id":10210069,"display_name":"eeqk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":480,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664881057,"creation_date":1664881057,"question_id":73946856,"body_markdown":"When trying to start a Spring Boot application for tests (with H2 database) with R2DBC and Liquibase configured, I get the following error:\r\n\r\n```\r\n2022-10-04 12:50:18.893  INFO 57774 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 67 ms. Found 2 R2DBC repository interfaces.\r\norg.h2.message.DbException: Log file error: &quot;/.testdb.trace.db&quot;, cause: &quot;java.nio.file.FileSystemException: /.testdb.trace.db: Read-only file system&quot; [90034-214]\r\n```\r\n\r\nHere&#39;s my config:\r\n```\r\nspring:\r\n  liquibase:\r\n    change-log: classpath:liquibase/db.changelog.xml\r\n    contexts: production\r\n    url: jdbc:h2:file:///./.testdb;MODE=MySQL\r\n    \r\n  r2dbc:\r\n    url: r2dbc:h2:file:///./.testdb\r\n\r\n  h2:\r\n    console:\r\n      enabled: false\r\n```\r\n\r\nIs there anything I can do to fix that error?","title":"Spring, H2, R2DBC and Liquibase: /.testdb.trace.db: Read-only file system","body":"<p>When trying to start a Spring Boot application for tests (with H2 database) with R2DBC and Liquibase configured, I get the following error:</p>\n<pre><code>2022-10-04 12:50:18.893  INFO 57774 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 67 ms. Found 2 R2DBC repository interfaces.\norg.h2.message.DbException: Log file error: &quot;/.testdb.trace.db&quot;, cause: &quot;java.nio.file.FileSystemException: /.testdb.trace.db: Read-only file system&quot; [90034-214]\n</code></pre>\n<p>Here's my config:</p>\n<pre><code>spring:\n  liquibase:\n    change-log: classpath:liquibase/db.changelog.xml\n    contexts: production\n    url: jdbc:h2:file:///./.testdb;MODE=MySQL\n    \n  r2dbc:\n    url: r2dbc:h2:file:///./.testdb\n\n  h2:\n    console:\n      enabled: false\n</code></pre>\n<p>Is there anything I can do to fix that error?</p>\n"},{"tags":["javascript","java","selenium","hashmap","mapping"],"comments":[{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":0,"creation_date":1664880985,"post_id":73946565,"comment_id":130566646,"body_markdown":"Since you are adding items to a HashMap where int_product_price is your key, the implementation overwrites the value for that entry if you happen to have similar keys. Instead of writing the elements to a map, you might want to use a list instead.","body":"Since you are adding items to a HashMap where int_product_price is your key, the implementation overwrites the value for that entry if you happen to have similar keys. Instead of writing the elements to a map, you might want to use a list instead."}],"answers":[{"tags":[],"owner":{"account_id":10001672,"reputation":511,"user_id":7397403,"display_name":"ketanvj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664881033,"creation_date":1664881033,"answer_id":73946851,"question_id":73946565,"body_markdown":"@Peter Santa, you should have product Name as your key instead of Price. So you can reverse the location. But this will not print the same product with the same or different price. Which I feel should be ok assuming, the same product will not have different prices on the same website.","title":"How to get all elements even if they have the same data","body":"<p>@Peter Santa, you should have product Name as your key instead of Price. So you can reverse the location. But this will not print the same product with the same or different price. Which I feel should be ok assuming, the same product will not have different prices on the same website.</p>\n"}],"owner":{"account_id":19388506,"reputation":31,"user_id":14177746,"display_name":"P&#233;ter S&#225;nta"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1664881033,"creation_date":1664879596,"question_id":73946565,"body_markdown":"I have a project where I would like to gather in all **brandname** and **price** from a site.\r\nfor that reason I have the following code: \r\n\r\n    List&lt;WebElement&gt; list_of_products = driver.findElements(By.xpath(loc.getProperty(&quot;brandName&quot;)));\r\n\t\tList&lt;WebElement&gt; list_of_products_price = driver.findElements(By.xpath(loc.getProperty(&quot;finalPrice&quot;)));\r\n\r\n\r\n\t\t//System.out.println(&quot;ezek a term&#233;kek&quot;+ list_of_products);\r\n\t\t// Use of HashMaop to store Products and Their prices(after conversion to\r\n\t\t// Integer)\r\n\t\tString product_name;\r\n\t\tString product_price;\r\n\t\tint int_product_price;\r\n\t\tHashMap&lt;Integer, String&gt; map_final_products = new HashMap&lt;&gt;();\r\n\t\t{\r\n\r\n\t\t\tfor (int i = 0; i &lt; list_of_products.size(); i++) {\r\n\r\n\t\t\t\tproduct_name = list_of_products.get(i).getText();// Iterate and fetch product name\r\n\t\t\t\tproduct_price = list_of_products_price.get(i).getText();// Iterate and fetch product price\r\n\t\t\t\tproduct_price = product_price.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);// Replace anything will space other than numbers\r\n\t\t\t\tint_product_price = Integer.parseInt(product_price);// Convert to Integer\r\n\t\t\t\tmap_final_products.put(int_product_price, product_name);// Add product and price in HashMap\r\n\t\t\t}\r\n\r\n\t\t\t// write out all the products we found\r\n\t\t\t Reporter.log(&quot;All the prices and products we found: &quot; +\r\n\t\t\t map_final_products.toString()+ &quot;\\n&quot;, true);\r\n\r\n\t\t\t// Get all the keys from Hash Map\r\n\t\t\tSet&lt;Integer&gt; allkeys = map_final_products.keySet();\r\n\t\t\tArrayList&lt;Integer&gt; array_list_values_product_prices = new ArrayList&lt;Integer&gt;(allkeys);\r\n\r\n\t\t\t// this will sort in ascending order lowest at the top and highest at the bottom\r\n\t\t\tCollections.sort(array_list_values_product_prices);\r\n\r\nAs it is on console: \r\n*XYs are the actual brandnames*\r\n\r\n&gt; All the prices and products we found: {20720=XY,\r\n&gt; 11490=XY, 13490=XY, 15490=XY,\r\n&gt; 19490=XY, 21990=XY, 16490=XY, 18490=XY\r\n&gt; 20490=XY, 18990=XY, 20990=XY}\r\n\r\nAs I think my **code just does not write out** or collect **when the price is the same** with other brands(or with the same brands too). For example: \r\nAt the website there are more products for 13490.. and lots of for 18490.\r\n\r\nHow can I modify my code in order to get all the pairs even if they have same prices?","title":"How to get all elements even if they have the same data","body":"<p>I have a project where I would like to gather in all <strong>brandname</strong> and <strong>price</strong> from a site.\nfor that reason I have the following code:</p>\n<pre><code>List&lt;WebElement&gt; list_of_products = driver.findElements(By.xpath(loc.getProperty(&quot;brandName&quot;)));\n    List&lt;WebElement&gt; list_of_products_price = driver.findElements(By.xpath(loc.getProperty(&quot;finalPrice&quot;)));\n\n\n    //System.out.println(&quot;ezek a termékek&quot;+ list_of_products);\n    // Use of HashMaop to store Products and Their prices(after conversion to\n    // Integer)\n    String product_name;\n    String product_price;\n    int int_product_price;\n    HashMap&lt;Integer, String&gt; map_final_products = new HashMap&lt;&gt;();\n    {\n\n        for (int i = 0; i &lt; list_of_products.size(); i++) {\n\n            product_name = list_of_products.get(i).getText();// Iterate and fetch product name\n            product_price = list_of_products_price.get(i).getText();// Iterate and fetch product price\n            product_price = product_price.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);// Replace anything will space other than numbers\n            int_product_price = Integer.parseInt(product_price);// Convert to Integer\n            map_final_products.put(int_product_price, product_name);// Add product and price in HashMap\n        }\n\n        // write out all the products we found\n         Reporter.log(&quot;All the prices and products we found: &quot; +\n         map_final_products.toString()+ &quot;\\n&quot;, true);\n\n        // Get all the keys from Hash Map\n        Set&lt;Integer&gt; allkeys = map_final_products.keySet();\n        ArrayList&lt;Integer&gt; array_list_values_product_prices = new ArrayList&lt;Integer&gt;(allkeys);\n\n        // this will sort in ascending order lowest at the top and highest at the bottom\n        Collections.sort(array_list_values_product_prices);\n</code></pre>\n<p>As it is on console:\n<em>XYs are the actual brandnames</em></p>\n<blockquote>\n<p>All the prices and products we found: {20720=XY,\n11490=XY, 13490=XY, 15490=XY,\n19490=XY, 21990=XY, 16490=XY, 18490=XY\n20490=XY, 18990=XY, 20990=XY}</p>\n</blockquote>\n<p>As I think my <strong>code just does not write out</strong> or collect <strong>when the price is the same</strong> with other brands(or with the same brands too). For example:\nAt the website there are more products for 13490.. and lots of for 18490.</p>\n<p>How can I modify my code in order to get all the pairs even if they have same prices?</p>\n"},{"tags":["java","avro"],"comments":[{"owner":{"account_id":7968168,"reputation":1956,"user_id":6013799,"display_name":"rmcv"},"score":1,"creation_date":1656040898,"post_id":72410314,"comment_id":128479893,"body_markdown":"There is one constructor you can pass in both writer and reader schema:   `DatumReader&lt;GenericRecord&gt; reader = new GenericDatumReader&lt;&gt;(recordFromFile.getSchema(), readerSchema);`.   Seems to works fine if both reader and writer are in the same namespace.","body":"There is one constructor you can pass in both writer and reader schema:   <code>DatumReader&lt;GenericRecord&gt; reader = new GenericDatumReader&lt;&gt;(recordFromFile.getSchema(), readerSchema);</code>.   Seems to works fine if both reader and writer are in the same namespace."}],"answers":[{"tags":[],"owner":{"account_id":2169094,"reputation":87,"user_id":2377645,"display_name":"Ivan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664880516,"creation_date":1664880516,"answer_id":73946737,"question_id":72410314,"body_markdown":"I&#39;ve received an answer on Avro [mailing list][1]:\r\n\r\n...writer schema can be adjusted after creation. This is what the DataFileReader does.\r\n\r\nSo after the DataFileReader is initialised, the underlying GenericDatumReader uses the the schema in the file as write schema (to understand the data), and the schema you provided as read schema (to give data to you via dataFileReader.next(user)).\r\n\r\n\r\n  [1]: https://lists.apache.org/thread/f3nkm8xtng6zlf9fmycbw6tyswzsr5z1","title":"Avro&#39;s GenericDatumReader writer&#39;s schema","body":"<p>I've received an answer on Avro <a href=\"https://lists.apache.org/thread/f3nkm8xtng6zlf9fmycbw6tyswzsr5z1\" rel=\"nofollow noreferrer\">mailing list</a>:</p>\n<p>...writer schema can be adjusted after creation. This is what the DataFileReader does.</p>\n<p>So after the DataFileReader is initialised, the underlying GenericDatumReader uses the the schema in the file as write schema (to understand the data), and the schema you provided as read schema (to give data to you via dataFileReader.next(user)).</p>\n"}],"owner":{"account_id":2169094,"reputation":87,"user_id":2377645,"display_name":"Ivan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":619,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664880516,"creation_date":1653680263,"question_id":72410314,"body_markdown":"As stated in Avro [Getting Started][1] about deserialization without code generation: &quot;The data will be read using the writer&#39;s schema included in the file, and the reader&#39;s schema provided to the GenericDatumReader&quot;. Here is how GenericDatumReader is created in the example\r\n\r\n```DatumReader&lt;GenericRecord&gt; datumReader = new GenericDatumReader&lt;GenericRecord&gt;(schema);```\r\n\r\nBut when you look at this GenericDatumReader constructor Javadoc it states &quot;Construct where the writer&#39;s and reader&#39;s schemas are the same.&quot; (and actual code corresponds to this).\r\n\r\nSo the writer&#39;s schema isn’t taken from a serialized file but from a constructor parameter? If yes, how to read data using written schema like described on the page?\r\n\r\n  [1]: https://avro.apache.org/docs/current/gettingstartedjava.html#Deserializing","title":"Avro&#39;s GenericDatumReader writer&#39;s schema","body":"<p>As stated in Avro <a href=\"https://avro.apache.org/docs/current/gettingstartedjava.html#Deserializing\" rel=\"nofollow noreferrer\">Getting Started</a> about deserialization without code generation: &quot;The data will be read using the writer's schema included in the file, and the reader's schema provided to the GenericDatumReader&quot;. Here is how GenericDatumReader is created in the example</p>\n<p><code>DatumReader&lt;GenericRecord&gt; datumReader = new GenericDatumReader&lt;GenericRecord&gt;(schema);</code></p>\n<p>But when you look at this GenericDatumReader constructor Javadoc it states &quot;Construct where the writer's and reader's schemas are the same.&quot; (and actual code corresponds to this).</p>\n<p>So the writer's schema isn’t taken from a serialized file but from a constructor parameter? If yes, how to read data using written schema like described on the page?</p>\n"},{"tags":["java","spring-boot","deprecated"],"comments":[{"owner":{"account_id":2894772,"reputation":354,"user_id":2482803,"accept_rate":44,"display_name":"Quang Nguyen"},"score":0,"creation_date":1592421118,"post_id":62436379,"comment_id":110423058,"body_markdown":"Maybe you should take a look at `BasicErrorController`","body":"Maybe you should take a look at <code>BasicErrorController</code>"},{"owner":{"account_id":1290949,"reputation":3762,"user_id":1243068,"accept_rate":64,"display_name":"e-info128"},"score":0,"creation_date":1592421461,"post_id":62436379,"comment_id":110423185,"body_markdown":"Thanks. Any documentation on its use? I have googled and in forums on examples of use but I have not found anything practical, only ambiguities.","body":"Thanks. Any documentation on its use? I have googled and in forums on examples of use but I have not found anything practical, only ambiguities."}],"answers":[{"comments":[{"owner":{"account_id":1290949,"reputation":3762,"user_id":1243068,"accept_rate":64,"display_name":"e-info128"},"score":0,"creation_date":1592429068,"post_id":62437683,"comment_id":110426352,"body_markdown":"Thanks, but does not work. `Error resolving template [error], template might not exist or might not be accessible by any of the configured Template Resolvers`, but need return the custom view for each error type, by example `fragments/errors/404`.","body":"Thanks, but does not work. <code>Error resolving template [error], template might not exist or might not be accessible by any of the configured Template Resolvers</code>, but need return the custom view for each error type, by example <code>fragments&#47;errors&#47;404</code>."}],"tags":[],"owner":{"account_id":6101034,"reputation":1349,"user_id":4760059,"accept_rate":45,"display_name":"Oleh Kurpiak"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592425144,"creation_date":1592425144,"answer_id":62437683,"question_id":62436379,"body_markdown":"there is an `@ControllerAdvice` annotation\r\n\r\n```\r\n@ControllerAdvice\r\npublic class MyErrorController {\r\n\r\n\r\n   @ExceptionHandler(RuntimeException.class)\r\n   public String|ResponseEntity|AnyOtherType handler(final RuntimeException e) {\r\n     .. do handle ..\r\n   }\r\n\r\n   @ExceptionHandler({ Exception1.class, Exception2.class })\r\n   public String multipleHandler(final Exception e) {\r\n   \r\n   }\r\n\r\n}\r\n```","title":"How to replace ErrorController deprecated function on Spring Boot?","body":"<p>there is an <code>@ControllerAdvice</code> annotation</p>\n\n<pre><code>@ControllerAdvice\npublic class MyErrorController {\n\n\n   @ExceptionHandler(RuntimeException.class)\n   public String|ResponseEntity|AnyOtherType handler(final RuntimeException e) {\n     .. do handle ..\n   }\n\n   @ExceptionHandler({ Exception1.class, Exception2.class })\n   public String multipleHandler(final Exception e) {\n\n   }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":263115,"reputation":16960,"user_id":548473,"display_name":"Grigory Kislin"},"score":1,"creation_date":1626190665,"post_id":62438367,"comment_id":120824506,"body_markdown":"it doesn&#39;t catch low level exceptions.. e.g. errors in thymleaf templates","body":"it doesn&#39;t catch low level exceptions.. e.g. errors in thymleaf templates"}],"tags":[],"owner":{"account_id":5768782,"reputation":2885,"user_id":4552842,"display_name":"Guru Cse"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592428903,"creation_date":1592427957,"answer_id":62438367,"question_id":62436379,"body_markdown":" 1. To handle errors, There is no need to define a controller class\r\n    implementing an error controller.\r\n 2. To handle errors in your entire application instead of writing  \r\n\r\n        @Controller\r\n         public class CustomErrorController implements ErrorController{\r\n          @RequestMapping(&quot;/error&quot;)\r\n          public String handleError(HttpServletRequest request)\r\n            {\r\n            ...\r\n            }\r\n          }\r\n\r\nuse the below class \r\n\r\n    @ControllerAdvice\r\n     public class myExceptionHandler extends ResponseEntityExceptionHandler {\r\n\t\r\n\t  @ExceptionHandler(Exception.class)\r\n\t  public final ResponseEntity&lt;YourResponseClass&gt; handleAllExceptions(Exception ex, WebRequest request) {\r\n\t    YourResponseClassexceptionResponse = new YourResponseClass(new Date(), ex.getMessage());// Its an example you can define a class with your own structure\r\n\t    return new ResponseEntity&lt;&gt;(exceptionResponse, HttpStatus.INTERNAL_SERVER_ERROR);\r\n\t  }\r\n\r\n\t  @ExceptionHandler(CustomException.class)\r\n\t  public final ResponseEntity&lt;YourResponseClass&gt; handleAllExceptions(Exception ex, WebRequest request) {\r\n\t    YourResponseClass exceptionResponse = new YourResponseClass(new Date(), ex.getMessage()); // For reference \r\n\t    return new ResponseEntity&lt;YourResponseClass&gt;(exceptionResponse, HttpStatus.INTERNAL_SERVER_ERROR);\r\n\t  }\r\n\r\n       @ExceptionHandler(BadCredentialsException.class)\r\n\t  public final ResponseEntity&lt;YourResponseClass&gt; handleBadCredentialsException(BadCredentialsException ex, WebRequest request){\r\n\t\t    YourResponseClass exceptionResponse = new YourResponseClass(new Date(), ex.getMessage());// For refernece \r\n\t\t\t    return new ResponseEntity&lt;&gt;(exceptionResponse, HttpStatus.UNAUTHORIZED);\t\t  \r\n\t  }  \r\n  }\r\n\r\n 3. The class above annoted with @ControllerAdvice acts as custom exception handler and it handles all the expecptions thrown by ur application. In above code sample only three exceptions are showed for understanding. It can handle many exceptions\r\n\r\n 4. In your application if there&#39;s any exception thrown it will come to this class and send the response back. You can have a customized message and structure as per ur needs.\r\n","title":"How to replace ErrorController deprecated function on Spring Boot?","body":"<ol>\n<li>To handle errors, There is no need to define a controller class\nimplementing an error controller.</li>\n<li><p>To handle errors in your entire application instead of writing  </p>\n\n<pre><code>@Controller\n public class CustomErrorController implements ErrorController{\n  @RequestMapping(\"/error\")\n  public String handleError(HttpServletRequest request)\n    {\n    ...\n    }\n  }\n</code></pre></li>\n</ol>\n\n<p>use the below class </p>\n\n<pre><code>@ControllerAdvice\n public class myExceptionHandler extends ResponseEntityExceptionHandler {\n\n  @ExceptionHandler(Exception.class)\n  public final ResponseEntity&lt;YourResponseClass&gt; handleAllExceptions(Exception ex, WebRequest request) {\n    YourResponseClassexceptionResponse = new YourResponseClass(new Date(), ex.getMessage());// Its an example you can define a class with your own structure\n    return new ResponseEntity&lt;&gt;(exceptionResponse, HttpStatus.INTERNAL_SERVER_ERROR);\n  }\n\n  @ExceptionHandler(CustomException.class)\n  public final ResponseEntity&lt;YourResponseClass&gt; handleAllExceptions(Exception ex, WebRequest request) {\n    YourResponseClass exceptionResponse = new YourResponseClass(new Date(), ex.getMessage()); // For reference \n    return new ResponseEntity&lt;YourResponseClass&gt;(exceptionResponse, HttpStatus.INTERNAL_SERVER_ERROR);\n  }\n\n   @ExceptionHandler(BadCredentialsException.class)\n  public final ResponseEntity&lt;YourResponseClass&gt; handleBadCredentialsException(BadCredentialsException ex, WebRequest request){\n        YourResponseClass exceptionResponse = new YourResponseClass(new Date(), ex.getMessage());// For refernece \n            return new ResponseEntity&lt;&gt;(exceptionResponse, HttpStatus.UNAUTHORIZED);          \n  }  \n</code></pre>\n\n<p>}</p>\n\n<ol start=\"3\">\n<li><p>The class above annoted with @ControllerAdvice acts as custom exception handler and it handles all the expecptions thrown by ur application. In above code sample only three exceptions are showed for understanding. It can handle many exceptions</p></li>\n<li><p>In your application if there's any exception thrown it will come to this class and send the response back. You can have a customized message and structure as per ur needs.</p></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":2464641,"reputation":113,"user_id":2148019,"display_name":"BenHT"},"score":0,"creation_date":1602688508,"post_id":63506347,"comment_id":113801094,"body_markdown":"I&#39;ve marked mine @ Override and @ Deprecated to get the best of both worlds, fixes the compiler error now and the compiler error later will remind me to delete it when possible.","body":"I&#39;ve marked mine @ Override and @ Deprecated to get the best of both worlds, fixes the compiler error now and the compiler error later will remind me to delete it when possible."},{"owner":{"account_id":169547,"reputation":2331,"user_id":395693,"accept_rate":85,"display_name":"HellishHeat"},"score":0,"creation_date":1644849706,"post_id":63506347,"comment_id":125707734,"body_markdown":"this should be the accepted answer.","body":"this should be the accepted answer."}],"tags":[],"owner":{"account_id":424395,"reputation":971,"user_id":804376,"accept_rate":42,"display_name":"TuaimiAA"},"comment_count":2,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1597930736,"creation_date":1597930736,"answer_id":63506347,"question_id":62436379,"body_markdown":"Starting version 2.3.x, Spring boot has deprecated this method. Just return null as it is anyway going to be ignored. Do not use @Override annotation if you want to prevent future compilation error when the method is totally removed. You can also suppress the deprecation warning if you want, however, the warning (also the @Override annotation) is helpful to remind you to cleanup/fix your code when the method is removed.\r\n\r\n    @Controller\r\n    @RequestMapping(&quot;/error&quot;)\r\n    @SuppressWarnings(&quot;deprecation&quot;)\r\n    public class CustomErrorController implements ErrorController {\r\n\r\n         public String error() {\r\n            // handle error\r\n            // ..\r\n         }\r\n\r\n         public String getErrorPath() {\r\n             return null;\r\n         }\r\n    }\r\n","title":"How to replace ErrorController deprecated function on Spring Boot?","body":"<p>Starting version 2.3.x, Spring boot has deprecated this method. Just return null as it is anyway going to be ignored. Do not use @Override annotation if you want to prevent future compilation error when the method is totally removed. You can also suppress the deprecation warning if you want, however, the warning (also the @Override annotation) is helpful to remind you to cleanup/fix your code when the method is removed.</p>\n<pre><code>@Controller\n@RequestMapping(&quot;/error&quot;)\n@SuppressWarnings(&quot;deprecation&quot;)\npublic class CustomErrorController implements ErrorController {\n\n     public String error() {\n        // handle error\n        // ..\n     }\n\n     public String getErrorPath() {\n         return null;\n     }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":18455101,"reputation":101,"user_id":13444099,"display_name":"Lime莉茉"},"score":0,"creation_date":1630412743,"post_id":68998582,"comment_id":121944529,"body_markdown":"In 2021, some other solutions are outdated, this is what worked for me today.","body":"In 2021, some other solutions are outdated, this is what worked for me today."}],"tags":[],"owner":{"account_id":18455101,"reputation":101,"user_id":13444099,"display_name":"Lime莉茉"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1630412454,"creation_date":1630412454,"answer_id":68998582,"question_id":62436379,"body_markdown":"    @Controller\r\n    public class CustomErrorController implements ErrorController {\r\n\r\n        @RequestMapping(&quot;/error&quot;)\r\n        public ModelAndView handleError(HttpServletResponse response) {\r\n            int status = response.getStatus();\r\n            if ( status == HttpStatus.NOT_FOUND.value()) {\r\n                System.out.println(&quot;Error with code &quot; + status + &quot; Happened!&quot;);\r\n                return new ModelAndView(&quot;error-404&quot;);\r\n            } else if (status == HttpStatus.INTERNAL_SERVER_ERROR.value()) {\r\n                System.out.println(&quot;Error with code &quot; + status + &quot; Happened!&quot;);\r\n                return new ModelAndView(&quot;error-500&quot;);\r\n            }\r\n            System.out.println(status);\r\n            return new ModelAndView(&quot;error&quot;);\r\n        }\r\n    }\r\n\r\n","title":"How to replace ErrorController deprecated function on Spring Boot?","body":"<pre><code>@Controller\npublic class CustomErrorController implements ErrorController {\n\n    @RequestMapping(&quot;/error&quot;)\n    public ModelAndView handleError(HttpServletResponse response) {\n        int status = response.getStatus();\n        if ( status == HttpStatus.NOT_FOUND.value()) {\n            System.out.println(&quot;Error with code &quot; + status + &quot; Happened!&quot;);\n            return new ModelAndView(&quot;error-404&quot;);\n        } else if (status == HttpStatus.INTERNAL_SERVER_ERROR.value()) {\n            System.out.println(&quot;Error with code &quot; + status + &quot; Happened!&quot;);\n            return new ModelAndView(&quot;error-500&quot;);\n        }\n        System.out.println(status);\n        return new ModelAndView(&quot;error&quot;);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1665066024,"post_id":73934447,"comment_id":130616392,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/73934447/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":2978984,"reputation":159,"user_id":2529416,"accept_rate":26,"display_name":"Yrol"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664879984,"creation_date":1664794726,"answer_id":73934447,"question_id":62436379,"body_markdown":"    @Controller\r\n    public class AppErrorController implements ErrorController {\r\n    \r\n        @RequestMapping(&quot;/error&quot;)\r\n        public String handleError(HttpServletRequest request) {\r\n            Object status = request.getAttribute(RequestDispatcher.ERROR_STATUS_CODE);\r\n    \r\n            if(status != null) {\r\n                int statusCode = Integer.valueOf(status.toString());\r\n    \r\n                if (statusCode == HttpStatus.FORBIDDEN.value()) {\r\n                    return &quot;errorpages/error-403&quot;;\r\n                } else if (statusCode == HttpStatus.NOT_FOUND.value()) {\r\n                    return &quot;errorpages/error-404&quot;;\r\n                } else if (statusCode == HttpStatus.INTERNAL_SERVER_ERROR.value()) {\r\n                    return &quot;errorpages/error-500&quot;;\r\n                }\r\n            }\r\n            return &quot;errorpages/error&quot;;\r\n        }\r\n    }","title":"How to replace ErrorController deprecated function on Spring Boot?","body":"<pre><code>@Controller\npublic class AppErrorController implements ErrorController {\n\n    @RequestMapping(&quot;/error&quot;)\n    public String handleError(HttpServletRequest request) {\n        Object status = request.getAttribute(RequestDispatcher.ERROR_STATUS_CODE);\n\n        if(status != null) {\n            int statusCode = Integer.valueOf(status.toString());\n\n            if (statusCode == HttpStatus.FORBIDDEN.value()) {\n                return &quot;errorpages/error-403&quot;;\n            } else if (statusCode == HttpStatus.NOT_FOUND.value()) {\n                return &quot;errorpages/error-404&quot;;\n            } else if (statusCode == HttpStatus.INTERNAL_SERVER_ERROR.value()) {\n                return &quot;errorpages/error-500&quot;;\n            }\n        }\n        return &quot;errorpages/error&quot;;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1290949,"reputation":3762,"user_id":1243068,"accept_rate":64,"display_name":"e-info128"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17800,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":5,"score":14,"last_activity_date":1664879984,"creation_date":1592420180,"question_id":62436379,"body_markdown":"Have a custom error controller on Spring boot:\r\n\r\n```java\r\npackage com.example.controllers;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.boot.web.servlet.error.ErrorController;\r\nimport javax.servlet.http.HttpServletRequest;\r\n\r\n\r\n@Controller\r\npublic class CustomErrorController implements ErrorController\r\n{\r\n    @RequestMapping(&quot;/error&quot;)\r\n    public String handleError(HttpServletRequest request)\r\n    {\r\n        ...\r\n    }\r\n \r\n    @Override\r\n    public String getErrorPath()\r\n    {\r\n        return &quot;/error&quot;;\r\n    }\r\n}\r\n```\r\n\r\nBut, when compile says: `getErrorPath() in ErrorController has been deprecated`. Ok, i found information: use `server.error.path` property. Ok, add this in `application.properties` and delete the function, but now says: `CustomErrorController is not abstract and does not override abstract method getErrorPath() in ErrorController`, &#191;need a deprecated function?.\r\n\r\nHow to made the custom error controller?, the `ErrorController` requires `getErrorPath` but it is deprecated, what is the correct alternative?.","title":"How to replace ErrorController deprecated function on Spring Boot?","body":"<p>Have a custom error controller on Spring boot:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.controllers;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.boot.web.servlet.error.ErrorController;\nimport javax.servlet.http.HttpServletRequest;\n\n\n@Controller\npublic class CustomErrorController implements ErrorController\n{\n    @RequestMapping(\"/error\")\n    public String handleError(HttpServletRequest request)\n    {\n        ...\n    }\n\n    @Override\n    public String getErrorPath()\n    {\n        return \"/error\";\n    }\n}\n</code></pre>\n\n<p>But, when compile says: <code>getErrorPath() in ErrorController has been deprecated</code>. Ok, i found information: use <code>server.error.path</code> property. Ok, add this in <code>application.properties</code> and delete the function, but now says: <code>CustomErrorController is not abstract and does not override abstract method getErrorPath() in ErrorController</code>, ¿need a deprecated function?.</p>\n\n<p>How to made the custom error controller?, the <code>ErrorController</code> requires <code>getErrorPath</code> but it is deprecated, what is the correct alternative?.</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1664872042,"post_id":73944934,"comment_id":130563880,"body_markdown":"I don&#39;t understand the overall objective of your project.  Are you constructing a GUI builder?  Why can&#39;t you separate the construction of the GUI from adding values to the Swing components?","body":"I don&#39;t understand the overall objective of your project.  Are you constructing a GUI builder?  Why can&#39;t you separate the construction of the GUI from adding values to the Swing components?"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1664872103,"post_id":73944934,"comment_id":130563900,"body_markdown":"Reflection will not make the code cleaner. As you want to `extend` the functionality of an existing class, the cleanest way in my opinion is to create sub-classes which then implement your desired functionality","body":"Reflection will not make the code cleaner. As you want to <code>extend</code> the functionality of an existing class, the cleanest way in my opinion is to create sub-classes which then implement your desired functionality"},{"owner":{"account_id":2788141,"reputation":524,"user_id":2398993,"accept_rate":55,"display_name":"lvr123"},"score":0,"creation_date":1664875560,"post_id":73944934,"comment_id":130564943,"body_markdown":"@Holger : corrected. In the remaining of the code, the InfoAction a provided by an external class.","body":"@Holger : corrected. In the remaining of the code, the InfoAction a provided by an external class."},{"owner":{"account_id":2788141,"reputation":524,"user_id":2398993,"accept_rate":55,"display_name":"lvr123"},"score":0,"creation_date":1664875876,"post_id":73944934,"comment_id":130565042,"body_markdown":"@GilbertLeBlanc I&#39;m constructing a fat-client software. Where there are several ways to reach the same action. I want the define the action once. With its code, its label, its icon. Each ways to activate the action has to provide to the action some context (e.g. if the Action is &quot;Move Files&quot;, which files in this context must be moved). So I&#39;m trying to add to each Swing object a way to provide that context, by injecting into it that &#204;nfoProvider` interface.","body":"@GilbertLeBlanc I&#39;m constructing a fat-client software. Where there are several ways to reach the same action. I want the define the action once. With its code, its label, its icon. Each ways to activate the action has to provide to the action some context (e.g. if the Action is &quot;Move Files&quot;, which files in this context must be moved). So I&#39;m trying to add to each Swing object a way to provide that context, by injecting into it that &#204;nfoProvider` interface."},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1664890906,"post_id":73944934,"comment_id":130570061,"body_markdown":"Okay, using your comment example, you create a `MoveFilesAction` class extending `AbstractAction`.  You can instantiate this class from several Swing components.  Your application model would hold the file names or `File` class instances that your `MoveFilesAction` class needs.  Your Swing components have nothing to do with the action.","body":"Okay, using your comment example, you create a <code>MoveFilesAction</code> class extending <code>AbstractAction</code>.  You can instantiate this class from several Swing components.  Your application model would hold the file names or <code>File</code> class instances that your <code>MoveFilesAction</code> class needs.  Your Swing components have nothing to do with the action."}],"answers":[{"tags":[],"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664876354,"creation_date":1664876354,"answer_id":73945944,"question_id":73944934,"body_markdown":"There is something you can use with Swing:\r\n\r\n- [JComponent.putClientProperty](https://docs.oracle.com/javase/8/docs/api/javax/swing/JComponent.html#putClientProperty-java.lang.Object-java.lang.Object-)\r\n- [JComponent.getClientProperty](https://docs.oracle.com/javase/8/docs/api/javax/swing/JComponent.html#getClientProperty-java.lang.Object-)\r\n\r\nWhen you build your object, you can configure it:\r\n\r\n    class ComponentFactory {\r\n      public static &lt;T extends JComponent&gt; T configure(T component) {\r\n        // the MyGui.this won&#39;t compile here, but it is only to explain\r\n        // what you can do with your current code.\r\n        component.putClientProperty(InfoProvider.class, MyGui.this);\r\n      }\r\n    }\r\n\r\nAnd build object as in:\r\n\r\n    ComponentFactory.configure(new JButton(infoAction));\r\n\r\nOr create a static method for it in `ComponentFactory`:\r\n\r\n    ComponentFactory.createButton(infoAction);\r\n\r\nIn your action, you can then read the property:\r\n\r\n    public void actionPerformed(ActionEvent e) {\r\n      Object src = e.getSource();\r\n      if (src instanceof JComponent) {\r\n        JComponent c = (JComponent) src;\r\n        \r\n        Info info = (Info) c.getClientProperty(InfoProvider.class);\r\n        ...\r\n      }\r\n    \r\n    }\r\n\r\n**Notes:**\r\n\r\nSince it is Swing, there is a some chance it requires to be `Serializable` - which I don&#39;t think is a problem in 2022.\r\n\r\nAnd that the doc for `putClientProperty` says:\r\n\r\n&gt; The clientProperty dictionary **is not intended** to support large scale extensions to JComponent nor should be it considered an alternative to subclassing when designing a new component.\r\n\r\nIt should be fine for one property, otherwise you would have to use subclassing and implements InfoProvider for each such component.\r\n\r\n\r\n\r\n\r\n","title":"Injecting an Interface implementation in Swing objects","body":"<p>There is something you can use with Swing:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/JComponent.html#putClientProperty-java.lang.Object-java.lang.Object-\" rel=\"nofollow noreferrer\">JComponent.putClientProperty</a></li>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/JComponent.html#getClientProperty-java.lang.Object-\" rel=\"nofollow noreferrer\">JComponent.getClientProperty</a></li>\n</ul>\n<p>When you build your object, you can configure it:</p>\n<pre><code>class ComponentFactory {\n  public static &lt;T extends JComponent&gt; T configure(T component) {\n    // the MyGui.this won't compile here, but it is only to explain\n    // what you can do with your current code.\n    component.putClientProperty(InfoProvider.class, MyGui.this);\n  }\n}\n</code></pre>\n<p>And build object as in:</p>\n<pre><code>ComponentFactory.configure(new JButton(infoAction));\n</code></pre>\n<p>Or create a static method for it in <code>ComponentFactory</code>:</p>\n<pre><code>ComponentFactory.createButton(infoAction);\n</code></pre>\n<p>In your action, you can then read the property:</p>\n<pre><code>public void actionPerformed(ActionEvent e) {\n  Object src = e.getSource();\n  if (src instanceof JComponent) {\n    JComponent c = (JComponent) src;\n    \n    Info info = (Info) c.getClientProperty(InfoProvider.class);\n    ...\n  }\n\n}\n</code></pre>\n<p><strong>Notes:</strong></p>\n<p>Since it is Swing, there is a some chance it requires to be <code>Serializable</code> - which I don't think is a problem in 2022.</p>\n<p>And that the doc for <code>putClientProperty</code> says:</p>\n<blockquote>\n<p>The clientProperty dictionary <strong>is not intended</strong> to support large scale extensions to JComponent nor should be it considered an alternative to subclassing when designing a new component.</p>\n</blockquote>\n<p>It should be fine for one property, otherwise you would have to use subclassing and implements InfoProvider for each such component.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1664879747,"creation_date":1664879747,"answer_id":73946596,"question_id":73944934,"body_markdown":"You don’t need to specialize every component supporting actions (or timer or other sources of action events). Instead, create one specialized `Action` implementation to mediate between the component/event source and the actual action. E.g.\r\n\r\n```java\r\npublic class InfoProviderAction implements Action, InfoProvider {\r\n    final PropertyChangeSupport listeners = new PropertyChangeSupport(this);\r\n    final PropertyChangeListener relay = ev -&gt; listeners.firePropertyChange(\r\n                        ev.getPropertyName(), ev.getOldValue(), ev.getNewValue());\r\n    final Action target;\r\n    final InfoProvider actualProvider;\r\n\r\n    public InfoProviderAction(Action target, InfoProvider actualProvider) {\r\n        this.target = target;\r\n        this.actualProvider = actualProvider;\r\n    }\r\n\r\n    @Override\r\n    public void actionPerformed(ActionEvent e) {\r\n        target.actionPerformed(new ActionEvent(\r\n            this, e.getID(), e.getActionCommand(), e.getWhen(), e.getModifiers()));\r\n    }\r\n\r\n    @Override\r\n    public Info getInfo() {\r\n        return actualProvider.getInfo();\r\n    }\r\n\r\n    @Override\r\n    public void addPropertyChangeListener(PropertyChangeListener listener) {\r\n        boolean hadListeners = listeners.hasListeners(null);\r\n        listeners.addPropertyChangeListener(listener);\r\n        if(!hadListeners) target.addPropertyChangeListener(relay);\r\n    }\r\n\r\n    @Override\r\n    public void removePropertyChangeListener(PropertyChangeListener listener) {\r\n        boolean hadListeners = listeners.hasListeners(null);\r\n        listeners.removePropertyChangeListener(listener);\r\n        if(hadListeners &amp;&amp; !listeners.hasListeners(null))\r\n            target.removePropertyChangeListener(relay);\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return target.isEnabled();\r\n    }\r\n\r\n    @Override\r\n    public void setEnabled(boolean b) {\r\n        target.setEnabled(b);\r\n    }\r\n\r\n    @Override\r\n    public Object getValue(String key) {\r\n        return target.getValue(key);\r\n    }\r\n\r\n    @Override\r\n    public void putValue(String key, Object value) {\r\n        target.putValue(key, value);\r\n    }\r\n}\r\n```\r\n\r\nThen, your `MyGui` class can use it like\r\n\r\n```java\r\nInfoAction infoAction = MyApp.getInstance().getAction(MyApp.RENAME_ACTION);\r\ninfoAction = new InfoProviderAction(infoAction, this::getInfo);// inject the InfoProvider\r\nJButton button = new JButton(infoAction);\r\nJMenuItem menuItem = new JMenuItem(infoAction);\r\n```\r\n\r\nThe component will see the `InfoProviderAction` as its action, which will exhibit the same properties and behavior as the wrapped action. Whereas the actual action will see the `InfoProviderAction` as the even source, implementing the `InfoProvider` interface as expected.\r\n\r\nProblems could arise if the action expects the source to be a component. But actions should not assume this, as it would cause problems with `Timer` or global key bindings as event sources.\r\n","title":"Injecting an Interface implementation in Swing objects","body":"<p>You don’t need to specialize every component supporting actions (or timer or other sources of action events). Instead, create one specialized <code>Action</code> implementation to mediate between the component/event source and the actual action. E.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class InfoProviderAction implements Action, InfoProvider {\n    final PropertyChangeSupport listeners = new PropertyChangeSupport(this);\n    final PropertyChangeListener relay = ev -&gt; listeners.firePropertyChange(\n                        ev.getPropertyName(), ev.getOldValue(), ev.getNewValue());\n    final Action target;\n    final InfoProvider actualProvider;\n\n    public InfoProviderAction(Action target, InfoProvider actualProvider) {\n        this.target = target;\n        this.actualProvider = actualProvider;\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        target.actionPerformed(new ActionEvent(\n            this, e.getID(), e.getActionCommand(), e.getWhen(), e.getModifiers()));\n    }\n\n    @Override\n    public Info getInfo() {\n        return actualProvider.getInfo();\n    }\n\n    @Override\n    public void addPropertyChangeListener(PropertyChangeListener listener) {\n        boolean hadListeners = listeners.hasListeners(null);\n        listeners.addPropertyChangeListener(listener);\n        if(!hadListeners) target.addPropertyChangeListener(relay);\n    }\n\n    @Override\n    public void removePropertyChangeListener(PropertyChangeListener listener) {\n        boolean hadListeners = listeners.hasListeners(null);\n        listeners.removePropertyChangeListener(listener);\n        if(hadListeners &amp;&amp; !listeners.hasListeners(null))\n            target.removePropertyChangeListener(relay);\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return target.isEnabled();\n    }\n\n    @Override\n    public void setEnabled(boolean b) {\n        target.setEnabled(b);\n    }\n\n    @Override\n    public Object getValue(String key) {\n        return target.getValue(key);\n    }\n\n    @Override\n    public void putValue(String key, Object value) {\n        target.putValue(key, value);\n    }\n}\n</code></pre>\n<p>Then, your <code>MyGui</code> class can use it like</p>\n<pre class=\"lang-java prettyprint-override\"><code>InfoAction infoAction = MyApp.getInstance().getAction(MyApp.RENAME_ACTION);\ninfoAction = new InfoProviderAction(infoAction, this::getInfo);// inject the InfoProvider\nJButton button = new JButton(infoAction);\nJMenuItem menuItem = new JMenuItem(infoAction);\n</code></pre>\n<p>The component will see the <code>InfoProviderAction</code> as its action, which will exhibit the same properties and behavior as the wrapped action. Whereas the actual action will see the <code>InfoProviderAction</code> as the even source, implementing the <code>InfoProvider</code> interface as expected.</p>\n<p>Problems could arise if the action expects the source to be a component. But actions should not assume this, as it would cause problems with <code>Timer</code> or global key bindings as event sources.</p>\n"}],"owner":{"account_id":2788141,"reputation":524,"user_id":2398993,"accept_rate":55,"display_name":"lvr123"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73946596,"answer_count":2,"score":1,"last_activity_date":1664879747,"creation_date":1664871465,"question_id":73944934,"body_markdown":"I have defined a `class InfoAction implements java.swing.Action` that needs to retrieve some information from its calling context in order to execute itself. For this I have defined an interface for providing those information:\r\n```\r\npublic interface InfoProvider {\r\n    Info getInfo();\r\n}\r\n```\r\nThe `actionPerformed` in the InfoAction class looks like\r\n```\r\npublic void actionPerformed(ActionEvent e) {\r\n    Info info=e.getSource().getInfo();\r\n    // ... treat Info ...\r\n}\r\n```\r\nThen I want to create various Swing objects using these actions, every Swing object providing its own context to the action.\r\n\r\n```\r\nInfoAction infoAction = MyApp.getInstance().getAction(MyApp.RENAME_ACTION); // Retrieving one action\r\nJButton button = new JButton(infoAction); // TODO: inject the InfoProvider interface\r\nJMenuItem menuItem = new JMenuItem(infoAction); // TODO: inject the InfoProvider interface\r\n```\r\n\r\nI&#39;m stuck at how to add to those swing objects the InfoProvider interface.\r\n\r\nNaively I tried to write\r\n```\r\nInfoAction infoAction = MyApp.getInstance().getAction(MyApp.RENAME_ACTION);\r\nJButton button = new JButton(infoAction) implements InfoProvider {\r\n    Info getInfo() {\r\n        return MyGui.this.getInfo();\r\n        }\r\n    };\r\nJMenuItem menuItem = new JMenuItem(infoAction)  implements InfoProvider {\r\n    Info getInfo() {\r\n        return MyGui.this.getInfo();\r\n        }\r\n    };\r\n```\r\nBut this is not a valid code.\r\n\r\nI&#39;d like to avoid creating sub-classes of all the Swing pieces such as \r\n`private class InfoButton extends JButton implements InfoProvider {...}`, `private class InfoMenuItem extends JMenuItem implements InfoProvider {...}`.\r\n\r\nSo I wonder what are the other options to do this while keeping a clean code ?  \r\nWould working with reflection a good option ? Getting rid of the interface and testing if the actionEvent.getSource() has a getInfo() method ? \r\n\r\nPS: I&#39;m working with Java8","title":"Injecting an Interface implementation in Swing objects","body":"<p>I have defined a <code>class InfoAction implements java.swing.Action</code> that needs to retrieve some information from its calling context in order to execute itself. For this I have defined an interface for providing those information:</p>\n<pre><code>public interface InfoProvider {\n    Info getInfo();\n}\n</code></pre>\n<p>The <code>actionPerformed</code> in the InfoAction class looks like</p>\n<pre><code>public void actionPerformed(ActionEvent e) {\n    Info info=e.getSource().getInfo();\n    // ... treat Info ...\n}\n</code></pre>\n<p>Then I want to create various Swing objects using these actions, every Swing object providing its own context to the action.</p>\n<pre><code>InfoAction infoAction = MyApp.getInstance().getAction(MyApp.RENAME_ACTION); // Retrieving one action\nJButton button = new JButton(infoAction); // TODO: inject the InfoProvider interface\nJMenuItem menuItem = new JMenuItem(infoAction); // TODO: inject the InfoProvider interface\n</code></pre>\n<p>I'm stuck at how to add to those swing objects the InfoProvider interface.</p>\n<p>Naively I tried to write</p>\n<pre><code>InfoAction infoAction = MyApp.getInstance().getAction(MyApp.RENAME_ACTION);\nJButton button = new JButton(infoAction) implements InfoProvider {\n    Info getInfo() {\n        return MyGui.this.getInfo();\n        }\n    };\nJMenuItem menuItem = new JMenuItem(infoAction)  implements InfoProvider {\n    Info getInfo() {\n        return MyGui.this.getInfo();\n        }\n    };\n</code></pre>\n<p>But this is not a valid code.</p>\n<p>I'd like to avoid creating sub-classes of all the Swing pieces such as\n<code>private class InfoButton extends JButton implements InfoProvider {...}</code>, <code>private class InfoMenuItem extends JMenuItem implements InfoProvider {...}</code>.</p>\n<p>So I wonder what are the other options to do this while keeping a clean code ?<br />\nWould working with reflection a good option ? Getting rid of the interface and testing if the actionEvent.getSource() has a getInfo() method ?</p>\n<p>PS: I'm working with Java8</p>\n"},{"tags":["java","json","spring-boot","spring-restcontroller","content-disposition"],"answers":[{"tags":[],"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662388128,"creation_date":1662388128,"answer_id":73610929,"question_id":73610861,"body_markdown":"You can&#39;t. HTTP doesn&#39;t allow you to defined multiple content-types on 1 request/response. That being said, you could send the byte array base64 encoded as part of a json response but would need to handle it in the front-end (if you have any) as it would not trigger the file download process of the browser.","title":"How to return both JSON response and Byte Array of file in Springboot RestController Response while downloading a file","body":"<p>You can't. HTTP doesn't allow you to defined multiple content-types on 1 request/response. That being said, you could send the byte array base64 encoded as part of a json response but would need to handle it in the front-end (if you have any) as it would not trigger the file download process of the browser.</p>\n"},{"comments":[{"owner":{"account_id":10685095,"reputation":283,"user_id":7865867,"accept_rate":100,"display_name":"New2Java"},"score":0,"creation_date":1662429788,"post_id":73612749,"comment_id":129997885,"body_markdown":"I tried it. It didn&#39;t work.","body":"I tried it. It didn&#39;t work."},{"owner":{"account_id":7473996,"reputation":310,"user_id":5680977,"display_name":"Dhiraj Surve"},"score":0,"creation_date":1662431799,"post_id":73612749,"comment_id":129998152,"body_markdown":"then you can add this message into header like below \n                      String msg=&quot;Report downloaded Successfully&quot;;\n\t\t\theaders.setContentType(MediaType.APPLICATION_OCTET_STREAM);\n\t\t\theaders.put(&quot;message&quot;, Collections.singletonList(msg));","body":"then you can add this message into header like below                        String msg=&quot;Report downloaded Successfully&quot;; \t\t\theaders.setContentType(MediaType.APPLICATION_OCTET_STREAM&zwnj;&#8203;); \t\t\theaders.put(&quot;message&quot;, Collections.singletonList(msg));"},{"owner":{"account_id":10685095,"reputation":283,"user_id":7865867,"accept_rate":100,"display_name":"New2Java"},"score":0,"creation_date":1662438197,"post_id":73612749,"comment_id":129998965,"body_markdown":"Hi Dhiraj, while I try the solution of putting headers.put(&quot;message&quot;, Collections.singletonList(msg)); could you please see the update to my question about the exception I am getting. Any idea on how to solve that issue?","body":"Hi Dhiraj, while I try the solution of putting headers.put(&quot;message&quot;, Collections.singletonList(msg)); could you please see the update to my question about the exception I am getting. Any idea on how to solve that issue?"},{"owner":{"account_id":7473996,"reputation":310,"user_id":5680977,"display_name":"Dhiraj Surve"},"score":0,"creation_date":1662644686,"post_id":73612749,"comment_id":130057443,"body_markdown":"Another way todo is you can store the message into file and return that file in the response . So response will have 2 files .","body":"Another way todo is you can store the message into file and return that file in the response . So response will have 2 files ."}],"tags":[],"owner":{"account_id":7473996,"reputation":310,"user_id":5680977,"display_name":"Dhiraj Surve"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662398025,"creation_date":1662398025,"answer_id":73612749,"question_id":73610861,"body_markdown":"You can define custom class which hold your current content and message . So you can return that class in the response \r\n\r\n    ResponseClass\r\n    {\r\n    byte[] contents;\r\n    String message;\r\n    }","title":"How to return both JSON response and Byte Array of file in Springboot RestController Response while downloading a file","body":"<p>You can define custom class which hold your current content and message . So you can return that class in the response</p>\n<pre><code>ResponseClass\n{\nbyte[] contents;\nString message;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13239720,"reputation":112,"user_id":9560693,"display_name":"Yehouda"},"score":0,"creation_date":1664878966,"post_id":73946415,"comment_id":130566001,"body_markdown":"here an example how to download it in JS [Gist Github](https://gist.github.com/yehoudaB/8745e1409c280eaf24962667d1a06e01)","body":"here an example how to download it in JS <a href=\"https://gist.github.com/yehoudaB/8745e1409c280eaf24962667d1a06e01\" rel=\"nofollow noreferrer\">Gist Github</a>"}],"tags":[],"owner":{"account_id":13239720,"reputation":112,"user_id":9560693,"display_name":"Yehouda"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664878849,"creation_date":1664878849,"answer_id":73946415,"question_id":73610861,"body_markdown":"You can send a json object that contain the message and the file as encoded64 string. \r\n\r\nAnd in the client side you decode it and download it. \r\n\r\n    public record MyRecord(String message, String encodedStringBase64, String filename) {}\r\n  \r\n  \r\n    ...\r\n\r\n    try {\r\n            \r\n            File file = new File(&quot;path_to_.DOCX file_I_have_created&quot;);\r\n            byte[] contents = Files.readAllBytes(Paths.get(file.getAbsolutePath()));\r\n            String encodedString = Base64.getEncoder().encodeToString(contents);\r\n         \r\n            MyRecord record = new MyRecord(&quot;Report downloaded Successfully&quot;, encodedString, file.getName());\r\n\r\n            return log.traceExit(ResponseEntity.ok().headers(headers)\r\n                    .contentType(MediaType.valueOf(&quot;application/json&quot;)).body(record));\r\n    } ...\r\n\r\n\r\n\r\n\r\n","title":"How to return both JSON response and Byte Array of file in Springboot RestController Response while downloading a file","body":"<p>You can send a json object that contain the message and the file as encoded64 string.</p>\n<p>And in the client side you decode it and download it.</p>\n<pre><code>public record MyRecord(String message, String encodedStringBase64, String filename) {}\n\n\n...\n\ntry {\n        \n        File file = new File(&quot;path_to_.DOCX file_I_have_created&quot;);\n        byte[] contents = Files.readAllBytes(Paths.get(file.getAbsolutePath()));\n        String encodedString = Base64.getEncoder().encodeToString(contents);\n     \n        MyRecord record = new MyRecord(&quot;Report downloaded Successfully&quot;, encodedString, file.getName());\n\n        return log.traceExit(ResponseEntity.ok().headers(headers)\n                .contentType(MediaType.valueOf(&quot;application/json&quot;)).body(record));\n} ...\n</code></pre>\n"}],"owner":{"account_id":10685095,"reputation":283,"user_id":7865867,"accept_rate":100,"display_name":"New2Java"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2953,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1664878849,"creation_date":1662387793,"question_id":73610861,"body_markdown":"I am developing a rest controller to download a .docx file into the client system. My code is working fine as the file is getting downloaded. Now I want to enhance the response. My requirement is to also send a JSON payload in the response along with the .docx file content, something like\r\n\r\n    {&quot;message&quot;:&quot;Report downloaded Successfully&quot;}\r\n\r\nincase of successful download or with a different message incase of failure. \r\n\r\nBelow is my restcontroller code:\r\n\r\n\r\n    @RestController\r\n    public class DownloadController {\r\n    \t\r\n    \t\r\n    \t@PostMapping(value=&quot;/download&quot;,\r\n    \t\t\tconsumes = {&quot;multipart/form-data&quot;},\r\n    \t\t\tproduces = {&quot;application/octet-stream&quot;})\r\n    \tpublic ResponseEntity&lt;?&gt; downloadFile(@RequestParam(&quot;file&quot;) MultipartFile uploadFile){\r\n    \t\t\r\n    \t\t//business logic to create the attachment file\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\t\r\n    \t\t\tFile file = new File(&quot;path_to_.DOCX file_I_have_created&quot;);\r\n    \t\t\tbyte[] contents = Files.readAllBytes(Paths.get(file.getAbsolutePath()));\r\n    \t\t\t\r\n    \t\t\tHttpHeaders headers = new HttpHeaders();\r\n    \t\t\theaders.setContentType(MediaType.APPLICATION_OCTET_STREAM);\r\n    \t\t\theaders.setContentDisposition(ContentDisposition.attachment().filename(&quot;survey.docx&quot;).build());\r\n    \t\t\t\r\n    \t\t\treturn new ResponseEntity&lt;&gt;(contents, headers, HttpStatus.OK);\r\n    \t\t} catch (Exception e){\r\n    \t\t\treturn new ResponseEntity&lt;&gt;(HttpStatus.INTERNAL_SERVER_ERROR);\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\nHow do I modify my response code to send both the JSON message and the byte[] contents so that the file gets downloaded and I can see the JSON message in the response preview tab in the chrome or response body in postman?\r\n\r\nUPDATE: I tried to define a response class like below\r\n\r\n    public class Downloadresponse {\r\n    \r\n    private byte[] content;\r\n    private String message;\r\n    \r\n    //getter,setters\r\n    \r\n    }\r\n\r\nWith this change in place, I am getting below exception:\r\n\r\n    Resolved [ HttpMessageNotWritableException: No converter for [class ...Downloadresponse] with preset content-type &quot;application/octet-stream”]\r\n\r\n\r\n","title":"How to return both JSON response and Byte Array of file in Springboot RestController Response while downloading a file","body":"<p>I am developing a rest controller to download a .docx file into the client system. My code is working fine as the file is getting downloaded. Now I want to enhance the response. My requirement is to also send a JSON payload in the response along with the .docx file content, something like</p>\n<pre><code>{&quot;message&quot;:&quot;Report downloaded Successfully&quot;}\n</code></pre>\n<p>incase of successful download or with a different message incase of failure.</p>\n<p>Below is my restcontroller code:</p>\n<pre><code>@RestController\npublic class DownloadController {\n    \n    \n    @PostMapping(value=&quot;/download&quot;,\n            consumes = {&quot;multipart/form-data&quot;},\n            produces = {&quot;application/octet-stream&quot;})\n    public ResponseEntity&lt;?&gt; downloadFile(@RequestParam(&quot;file&quot;) MultipartFile uploadFile){\n        \n        //business logic to create the attachment file\n        \n        try {\n            \n            File file = new File(&quot;path_to_.DOCX file_I_have_created&quot;);\n            byte[] contents = Files.readAllBytes(Paths.get(file.getAbsolutePath()));\n            \n            HttpHeaders headers = new HttpHeaders();\n            headers.setContentType(MediaType.APPLICATION_OCTET_STREAM);\n            headers.setContentDisposition(ContentDisposition.attachment().filename(&quot;survey.docx&quot;).build());\n            \n            return new ResponseEntity&lt;&gt;(contents, headers, HttpStatus.OK);\n        } catch (Exception e){\n            return new ResponseEntity&lt;&gt;(HttpStatus.INTERNAL_SERVER_ERROR);\n        }\n    }\n\n}\n</code></pre>\n<p>How do I modify my response code to send both the JSON message and the byte[] contents so that the file gets downloaded and I can see the JSON message in the response preview tab in the chrome or response body in postman?</p>\n<p>UPDATE: I tried to define a response class like below</p>\n<pre><code>public class Downloadresponse {\n\nprivate byte[] content;\nprivate String message;\n\n//getter,setters\n\n}\n</code></pre>\n<p>With this change in place, I am getting below exception:</p>\n<pre><code>Resolved [ HttpMessageNotWritableException: No converter for [class ...Downloadresponse] with preset content-type &quot;application/octet-stream”]\n</code></pre>\n"},{"tags":["java","windows","batch-file"],"comments":[{"owner":{"account_id":9045527,"reputation":37191,"user_id":6738015,"display_name":"Compo"},"score":0,"creation_date":1664879407,"post_id":73944710,"comment_id":130566124,"body_markdown":"What&#39;s wrong with just ```@start &quot;&quot; &quot;example.exe&quot; -c config &gt;nul 2&gt;&amp;1``` as your entire batch file content?","body":"What&#39;s wrong with just <code>@start &quot;&quot; &quot;example.exe&quot; -c config &gt;nul 2&gt;&amp;1</code> as your entire batch file content?"},{"owner":{"account_id":9045527,"reputation":37191,"user_id":6738015,"display_name":"Compo"},"score":0,"creation_date":1664882899,"post_id":73944710,"comment_id":130567261,"body_markdown":"I supppose I should also question why you&#39;re sending all output to the NUL davice, but have code which &#39;prints&#39; output?","body":"I supppose I should also question why you&#39;re sending all output to the NUL davice, but have code which &#39;prints&#39; output?"},{"owner":{"account_id":21065460,"reputation":23,"user_id":15482839,"display_name":"seth"},"score":0,"creation_date":1664887134,"post_id":73944710,"comment_id":130568632,"body_markdown":"@Compo that is example,  i tried output &gt; example.log  no change","body":"@Compo that is example,  i tried output &gt; example.log  no change"}],"owner":{"account_id":21065460,"reputation":23,"user_id":15482839,"display_name":"seth"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664878650,"creation_date":1664870190,"question_id":73944710,"body_markdown":"How does java run a batch file in the background? \r\n\r\nI have a batch file with the following content\r\n\r\n```none\r\n@echo off\r\n\r\n:start\r\nstart /b cmd /c example.exe -c config &gt;nul 2&gt;&amp;1\r\ngoto :eof\r\n```\r\n\r\nIn fact, I run this code under the command line, it can run in the background, but it seems that the &quot;execution&quot; of the java call will hang on the console on the idea, I am a java novice and I don&#39;t know the principle.\r\n\r\njava code:\r\n\r\n```java\r\npackage com.example;\r\nimport org.apache.commons.exec.CommandLine;\r\nimport org.apache.commons.exec.DefaultExecutor;\r\n\r\npublic class Example {\r\n    public static void main(String[] args) throws Exception{\r\n        System.out.println(&quot;Hello World&quot;);\r\n        System.out.println(&quot;Started.&quot;);\r\n        String script_path = &quot;&quot;;\r\n        boolean isWindows = System.getProperty(&quot;os.name&quot;).toLowerCase().startsWith(&quot;windows&quot;);\r\n        System.out.println(isWindows);\r\n        if (isWindows) {\r\n            System.out.println(&quot;it&#39;s Windows&quot;);\r\n            script_path = &quot;c:/users/test-running/desktop/example.bat&quot;;\r\n            CommandLine cmdLine = new CommandLine(&quot;cmd&quot;);\r\n            cmdLine.addArgument(script_path);\r\n            cmdLine.addArgument(&quot;start&quot;).addArgument(&quot;server&quot;);\r\n            DefaultExecutor executor = new DefaultExecutor();\r\n            executor.execute(cmdLine);\r\n            System.out.println(&quot;Finished.&quot;);\r\n\r\n        } else {\r\n            System.out.println(&quot;it&#39;s Linux&quot;);\r\n            script_path = &quot;/Users/seth/Downloads/example.sh&quot;;\r\n            CommandLine cmdLine = new CommandLine(&quot;/bin/bash&quot;);\r\n            cmdLine.addArgument(script_path);\r\n            cmdLine.addArgument(&quot;start&quot;).addArgument(&quot;server&quot;);\r\n            DefaultExecutor executor = new DefaultExecutor();\r\n            executor.execute(cmdLine);\r\n            System.out.println(&quot;Finished.&quot;);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nSo does anyone know what java is doing? Or is the syntax of the batch file wrong?","title":"How does java run batch file in the background","body":"<p>How does java run a batch file in the background?</p>\n<p>I have a batch file with the following content</p>\n<pre class=\"lang-none prettyprint-override\"><code>@echo off\n\n:start\nstart /b cmd /c example.exe -c config &gt;nul 2&gt;&amp;1\ngoto :eof\n</code></pre>\n<p>In fact, I run this code under the command line, it can run in the background, but it seems that the &quot;execution&quot; of the java call will hang on the console on the idea, I am a java novice and I don't know the principle.</p>\n<p>java code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\nimport org.apache.commons.exec.CommandLine;\nimport org.apache.commons.exec.DefaultExecutor;\n\npublic class Example {\n    public static void main(String[] args) throws Exception{\n        System.out.println(&quot;Hello World&quot;);\n        System.out.println(&quot;Started.&quot;);\n        String script_path = &quot;&quot;;\n        boolean isWindows = System.getProperty(&quot;os.name&quot;).toLowerCase().startsWith(&quot;windows&quot;);\n        System.out.println(isWindows);\n        if (isWindows) {\n            System.out.println(&quot;it's Windows&quot;);\n            script_path = &quot;c:/users/test-running/desktop/example.bat&quot;;\n            CommandLine cmdLine = new CommandLine(&quot;cmd&quot;);\n            cmdLine.addArgument(script_path);\n            cmdLine.addArgument(&quot;start&quot;).addArgument(&quot;server&quot;);\n            DefaultExecutor executor = new DefaultExecutor();\n            executor.execute(cmdLine);\n            System.out.println(&quot;Finished.&quot;);\n\n        } else {\n            System.out.println(&quot;it's Linux&quot;);\n            script_path = &quot;/Users/seth/Downloads/example.sh&quot;;\n            CommandLine cmdLine = new CommandLine(&quot;/bin/bash&quot;);\n            cmdLine.addArgument(script_path);\n            cmdLine.addArgument(&quot;start&quot;).addArgument(&quot;server&quot;);\n            DefaultExecutor executor = new DefaultExecutor();\n            executor.execute(cmdLine);\n            System.out.println(&quot;Finished.&quot;);\n        }\n    }\n}\n\n</code></pre>\n<p>So does anyone know what java is doing? Or is the syntax of the batch file wrong?</p>\n"},{"tags":["java","spring","testing","spring-mvc","junit"],"answers":[{"tags":[],"owner":{"account_id":2155152,"reputation":3994,"user_id":1910582,"accept_rate":88,"display_name":"Bond - Java Bond"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1368793075,"creation_date":1368793075,"answer_id":16608840,"question_id":16605811,"body_markdown":"You can try something as below -\r\n\r\n1. Create a custom matcher\r\n\r\n        public class CustomExceptionMatcher extends\r\n\t\tTypeSafeMatcher&lt;CustomException&gt; {\r\n\r\n\t    private String actual;\r\n\t    private String expected;\r\n\r\n\t    private CustomExceptionMatcher (String expected) {\r\n\t\t    this.expected = expected;\r\n\t    }\r\n\r\n\t    public static CustomExceptionMatcher assertSomeThing(String expected) {\r\n\t\t    return new CustomExceptionMatcher (expected);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    protected boolean matchesSafely(CustomException exception) {\r\n\t\t    actual = exception.getSomeInformation();\r\n\t\t    return actual.equals(expected);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public void describeTo(Description desc) {\r\n\t\t    desc.appendText(&quot;Actual =&quot;).appendValue(actual)\r\n\t\t\t\t.appendText(&quot; Expected =&quot;).appendValue(\r\n\t\t\t\t\t\texpected);\r\n\r\n\t    }\r\n        }\r\n\r\n2. Declare a `@Rule` in JUnit class as below - \r\n\r\n        @Rule\r\n\t    public ExpectedException exception = ExpectedException.none();\r\n\r\n3. Use the Custom matcher in test case as -\r\n\r\n        exception.expect(CustomException.class);\r\n\t\texception.expect(CustomException\r\n\t\t\t\t.assertSomeThing(&quot;Some assertion text&quot;));\r\n        this.mockMvc.perform(post(&quot;/account&quot;)\r\n            .contentType(MediaType.APPLICATION_JSON)\r\n            .content(requestString))\r\n            .andExpect(status().isInternalServerError());\r\n\r\n**P.S.:** I have provided a generic pseudo code which you can customize as per your requirement.","title":"MockMVC how to test exception and response code in the same test case","body":"<p>You can try something as below -</p>\n\n<ol>\n<li><p>Create a custom matcher</p>\n\n<pre><code>public class CustomExceptionMatcher extends\nTypeSafeMatcher&lt;CustomException&gt; {\n\nprivate String actual;\nprivate String expected;\n\nprivate CustomExceptionMatcher (String expected) {\n    this.expected = expected;\n}\n\npublic static CustomExceptionMatcher assertSomeThing(String expected) {\n    return new CustomExceptionMatcher (expected);\n}\n\n@Override\nprotected boolean matchesSafely(CustomException exception) {\n    actual = exception.getSomeInformation();\n    return actual.equals(expected);\n}\n\n@Override\npublic void describeTo(Description desc) {\n    desc.appendText(\"Actual =\").appendValue(actual)\n        .appendText(\" Expected =\").appendValue(\n                expected);\n\n}\n}\n</code></pre></li>\n<li><p>Declare a <code>@Rule</code> in JUnit class as below - </p>\n\n<pre><code>@Rule\npublic ExpectedException exception = ExpectedException.none();\n</code></pre></li>\n<li><p>Use the Custom matcher in test case as -</p>\n\n<pre><code>exception.expect(CustomException.class);\nexception.expect(CustomException\n        .assertSomeThing(\"Some assertion text\"));\nthis.mockMvc.perform(post(\"/account\")\n    .contentType(MediaType.APPLICATION_JSON)\n    .content(requestString))\n    .andExpect(status().isInternalServerError());\n</code></pre></li>\n</ol>\n\n<p><strong>P.S.:</strong> I have provided a generic pseudo code which you can customize as per your requirement.</p>\n"},{"comments":[{"owner":{"account_id":478661,"reputation":9645,"user_id":890890,"accept_rate":60,"display_name":"fabriciorissetto"},"score":7,"creation_date":1534278090,"post_id":50564141,"comment_id":90651631,"body_markdown":"This way the test will always pass regardless the status code or response","body":"This way the test will always pass regardless the status code or response"},{"owner":{"display_name":"user3460409"},"score":0,"creation_date":1649193120,"post_id":50564141,"comment_id":126813115,"body_markdown":"One of the best practise in Java is to never throw an Exception. You should create a specific one.","body":"One of the best practise in Java is to never throw an Exception. You should create a specific one."}],"tags":[],"owner":{"account_id":287912,"reputation":346,"user_id":588018,"display_name":"Erick Audet"},"comment_count":2,"down_vote_count":10,"up_vote_count":3,"is_accepted":false,"score":-7,"last_activity_date":1527502758,"creation_date":1527502758,"answer_id":50564141,"question_id":16605811,"body_markdown":"In your controller:\r\n\r\n    throw new Exception(&quot;Athlete with same username already exists...&quot;);\r\n\r\nIn your test:\r\n\r\n        try {\r\n            mockMvc.perform(post(&quot;/api/athlete&quot;).contentType(contentType).\r\n                    content(TestUtil.convertObjectToJsonBytes(wAthleteFTP)))\r\n                    .andExpect(status().isInternalServerError())\r\n                    .andExpect(content().string(&quot;Athlete with same username already exists...&quot;))\r\n                    .andDo(print());\r\n        } catch (Exception e){\r\n            //sink it\r\n        }","title":"MockMVC how to test exception and response code in the same test case","body":"<p>In your controller:</p>\n\n<pre><code>throw new Exception(\"Athlete with same username already exists...\");\n</code></pre>\n\n<p>In your test:</p>\n\n<pre><code>    try {\n        mockMvc.perform(post(\"/api/athlete\").contentType(contentType).\n                content(TestUtil.convertObjectToJsonBytes(wAthleteFTP)))\n                .andExpect(status().isInternalServerError())\n                .andExpect(content().string(\"Athlete with same username already exists...\"))\n                .andDo(print());\n    } catch (Exception e){\n        //sink it\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1655275,"reputation":456,"user_id":1524997,"display_name":"Paulo Mateus"},"score":1,"creation_date":1593617244,"post_id":56855838,"comment_id":110845379,"body_markdown":"If you expect the exception in the test, you can just use `assertTrue(result.getResolvedException() instanceof SomeException)`","body":"If you expect the exception in the test, you can just use <code>assertTrue(result.getResolvedException() instanceof SomeException)</code>"},{"owner":{"account_id":15396038,"reputation":161,"user_id":11107128,"display_name":"syydi"},"score":1,"creation_date":1650535813,"post_id":56855838,"comment_id":127143245,"body_markdown":"This seems very confusing. You expect an exception, but use `Optional.ifPresent()`. This would at first glance suggest that `someException` could be missing, and the assertions would just be ignored.","body":"This seems very confusing. You expect an exception, but use <code>Optional.ifPresent()</code>. This would at first glance suggest that <code>someException</code> could be missing, and the assertions would just be ignored."},{"owner":{"account_id":257480,"reputation":5081,"user_id":538921,"accept_rate":91,"display_name":"Edward J Beckett"},"score":0,"creation_date":1670754179,"post_id":56855838,"comment_id":131942316,"body_markdown":"Both valid points.... I was working with Optional&lt;?&gt; a lot back then so it may have swayed my design style a bit","body":"Both valid points.... I was working with Optional&lt;?&gt; a lot back then so it may have swayed my design style a bit"}],"tags":[],"owner":{"account_id":257480,"reputation":5081,"user_id":538921,"accept_rate":91,"display_name":"Edward J Beckett"},"comment_count":3,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1586812538,"creation_date":1562081664,"answer_id":56855838,"question_id":16605811,"body_markdown":"You can get a reference to the [MvcResult][1] and the possibly resolved exception and check with general JUnit assertions... \r\n\r\n    MvcResult result = this.mvc.perform(\r\n            post(&quot;/api/some/endpoint&quot;)\r\n                    .contentType(TestUtil.APPLICATION_JSON_UTF8)\r\n                    .content(TestUtil.convertObjectToJsonBytes(someObject)))\r\n            .andDo(print())\r\n            .andExpect(status().is4xxClientError())\r\n            .andReturn();\r\n\r\n    Optional&lt;SomeException&gt; someException = Optional.ofNullable((SomeException) result.getResolvedException());\r\n\r\n    someException.ifPresent( (se) -&gt; assertThat(se, is(notNullValue())));\r\n    someException.ifPresent( (se) -&gt; assertThat(se, is(instanceOf(SomeException.class))));\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/web/servlet/MvcResult.html\r\n","title":"MockMVC how to test exception and response code in the same test case","body":"<p>You can get a reference to the <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/web/servlet/MvcResult.html\" rel=\"noreferrer\">MvcResult</a> and the possibly resolved exception and check with general JUnit assertions... </p>\n\n<pre><code>MvcResult result = this.mvc.perform(\n        post(\"/api/some/endpoint\")\n                .contentType(TestUtil.APPLICATION_JSON_UTF8)\n                .content(TestUtil.convertObjectToJsonBytes(someObject)))\n        .andDo(print())\n        .andExpect(status().is4xxClientError())\n        .andReturn();\n\nOptional&lt;SomeException&gt; someException = Optional.ofNullable((SomeException) result.getResolvedException());\n\nsomeException.ifPresent( (se) -&gt; assertThat(se, is(notNullValue())));\nsomeException.ifPresent( (se) -&gt; assertThat(se, is(instanceOf(SomeException.class))));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6996271,"reputation":303,"user_id":5363858,"display_name":"PlickPlick"},"score":1,"creation_date":1594231161,"post_id":61016827,"comment_id":111056883,"body_markdown":"Really nice one!! Really clean and neat! Saved me a lifetime of trouble :)","body":"Really nice one!! Really clean and neat! Saved me a lifetime of trouble :)"},{"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"score":6,"creation_date":1594800142,"post_id":61016827,"comment_id":111249755,"body_markdown":"To be more specific in order to use `MvcResult.perform(...).andExpect()` where there is an exception in `@Controller` you need to inject `@ExceptionHandler` into your Spring Test Context or it throws exception right in `.perform()` just before `.andExpect()` )) Thx mate!","body":"To be more specific in order to use <code>MvcResult.perform(...).andExpect()</code> where there is an exception in <code>@Controller</code> you need to inject <code>@ExceptionHandler</code> into your Spring Test Context or it throws exception right in <code>.perform()</code> just before <code>.andExpect()</code> )) Thx mate!"},{"owner":{"account_id":37524,"reputation":7056,"user_id":107301,"accept_rate":96,"display_name":"Dark Star1"},"score":0,"creation_date":1668430315,"post_id":61016827,"comment_id":131395571,"body_markdown":"@gavenkoa can you explain what you mean by _or it throws exception right in .perform() just before .andExpect() )_ ?\nI have a void method stubbed and  wherein the service is annotated with @ MockBean and it is meant to throw and error but everycall to the api endpoint results in 200 instead of the exception return.","body":"@gavenkoa can you explain what you mean by <i>or it throws exception right in .perform() just before .andExpect() )</i> ? I have a void method stubbed and  wherein the service is annotated with @ MockBean and it is meant to throw and error but everycall to the api endpoint results in 200 instead of the exception return."}],"tags":[],"owner":{"account_id":12893909,"reputation":417,"user_id":9324939,"display_name":"Oluwatobiloba"},"comment_count":3,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1664878346,"creation_date":1585933131,"answer_id":61016827,"question_id":16605811,"body_markdown":"If you have an **exception handler** and you want to test for a specific exception, you could also assert that the instance is valid in the resolved exception.\r\n\r\n```\r\n.andExpect(result -&gt; assertTrue(result.getResolvedException() instanceof WhateverException))\r\n```\r\n\r\n**UPDATE** (gavenkoa) Don&#39;t forget to inject `@ExceptionHandler` annotated methods to the test context or exception will occur at `.perform()` instead of capturing it with `.andExpect()`, basically register:\r\n\r\n```java\r\n@ControllerAdvice\r\npublic class MyExceptionHandlers {\r\n    @ExceptionHandler(BindException.class)\r\n    public ResponseEntity&lt;?&gt; handle(BindException ex) { ... }\r\n}\r\n```\r\n\r\nwith `@Import(value=...)` or `@ContextConfiguration(classes=...)` or by other means.","title":"MockMVC how to test exception and response code in the same test case","body":"<p>If you have an <strong>exception handler</strong> and you want to test for a specific exception, you could also assert that the instance is valid in the resolved exception.</p>\n<pre><code>.andExpect(result -&gt; assertTrue(result.getResolvedException() instanceof WhateverException))\n</code></pre>\n<p><strong>UPDATE</strong> (gavenkoa) Don't forget to inject <code>@ExceptionHandler</code> annotated methods to the test context or exception will occur at <code>.perform()</code> instead of capturing it with <code>.andExpect()</code>, basically register:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ControllerAdvice\npublic class MyExceptionHandlers {\n    @ExceptionHandler(BindException.class)\n    public ResponseEntity&lt;?&gt; handle(BindException ex) { ... }\n}\n</code></pre>\n<p>with <code>@Import(value=...)</code> or <code>@ContextConfiguration(classes=...)</code> or by other means.</p>\n"},{"tags":[],"owner":{"account_id":1403129,"reputation":4459,"user_id":1331539,"accept_rate":94,"display_name":"jmhostalet"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602075800,"creation_date":1602075800,"answer_id":64244594,"question_id":16605811,"body_markdown":"I recently encountered the same error, and instead of using MockMVC I created an integration test as follows:\r\n\r\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n    @ContextConfiguration(classes = { MyTestConfiguration.class })\r\n    public class MyTest {\r\n    \t\r\n    \t@Autowired\r\n        private TestRestTemplate testRestTemplate;\r\n    \t\r\n    \t@Test\r\n    \tpublic void myTest() throws Exception {\r\n    \t\t\r\n    \t\tResponseEntity&lt;String&gt; response = testRestTemplate.getForEntity(&quot;/test&quot;, String.class);\r\n    \t\t\r\n    \t\tassertEquals(HttpStatus.INTERNAL_SERVER_ERROR, response.getStatusCode(), &quot;unexpected status code&quot;);\r\n    \t\t\r\n    \t}\t\r\n    }\r\n\r\nand \r\n\r\n    @Configuration\r\n    @EnableAutoConfiguration(exclude = NotDesiredConfiguration.class)\r\n    public class MyTestConfiguration {\r\n    \t\r\n    \t@RestController\r\n    \tpublic class TestController {\r\n    \t\t\r\n    \t\t@GetMapping(&quot;/test&quot;)\r\n    \t\tpublic ResponseEntity&lt;String&gt; get() throws Exception{\r\n    \t\t\tthrow new Exception(&quot;not nice&quot;);\r\n    \t\t}\t\t\t\r\n    \t}\t\r\n    }\r\n\r\nthis post was very helpful: https://github.com/spring-projects/spring-boot/issues/7321","title":"MockMVC how to test exception and response code in the same test case","body":"<p>I recently encountered the same error, and instead of using MockMVC I created an integration test as follows:</p>\n<pre><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@ContextConfiguration(classes = { MyTestConfiguration.class })\npublic class MyTest {\n    \n    @Autowired\n    private TestRestTemplate testRestTemplate;\n    \n    @Test\n    public void myTest() throws Exception {\n        \n        ResponseEntity&lt;String&gt; response = testRestTemplate.getForEntity(&quot;/test&quot;, String.class);\n        \n        assertEquals(HttpStatus.INTERNAL_SERVER_ERROR, response.getStatusCode(), &quot;unexpected status code&quot;);\n        \n    }   \n}\n</code></pre>\n<p>and</p>\n<pre><code>@Configuration\n@EnableAutoConfiguration(exclude = NotDesiredConfiguration.class)\npublic class MyTestConfiguration {\n    \n    @RestController\n    public class TestController {\n        \n        @GetMapping(&quot;/test&quot;)\n        public ResponseEntity&lt;String&gt; get() throws Exception{\n            throw new Exception(&quot;not nice&quot;);\n        }           \n    }   \n}\n</code></pre>\n<p>this post was very helpful: <a href=\"https://github.com/spring-projects/spring-boot/issues/7321\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/issues/7321</a></p>\n"}],"owner":{"display_name":"user425367"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81749,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"answer_count":5,"score":34,"last_activity_date":1664878346,"creation_date":1368783181,"question_id":16605811,"body_markdown":"I want to assert that an exception is raised and that the server returns an 500 internal server error.\r\n\r\nTo highlight the intent a code snippet is provided:\r\n\r\n    thrown.expect(NestedServletException.class);\r\n    this.mockMvc.perform(post(&quot;/account&quot;)\r\n                .contentType(MediaType.APPLICATION_JSON)\r\n                .content(requestString))\r\n                .andExpect(status().isInternalServerError());\r\n\r\nOf course it dosen&#39;t matter if I write `isInternalServerError` or `isOk`.\r\nThe test will pass regardless if an exception is thrown below the `throw.except` statement.\r\n\r\nHow would you go about to solve this?\r\n\r\n","title":"MockMVC how to test exception and response code in the same test case","body":"<p>I want to assert that an exception is raised and that the server returns an 500 internal server error.</p>\n\n<p>To highlight the intent a code snippet is provided:</p>\n\n<pre><code>thrown.expect(NestedServletException.class);\nthis.mockMvc.perform(post(\"/account\")\n            .contentType(MediaType.APPLICATION_JSON)\n            .content(requestString))\n            .andExpect(status().isInternalServerError());\n</code></pre>\n\n<p>Of course it dosen't matter if I write <code>isInternalServerError</code> or <code>isOk</code>.\nThe test will pass regardless if an exception is thrown below the <code>throw.except</code> statement.</p>\n\n<p>How would you go about to solve this?</p>\n"},{"tags":["java","eclipse","generics"],"comments":[{"owner":{"account_id":44736,"reputation":98412,"user_id":131433,"accept_rate":76,"display_name":"bmargulies"},"score":3,"creation_date":1664815904,"post_id":73938491,"comment_id":130552561,"body_markdown":"Are you sure you have the eclipse settings pointed at the right java language level?","body":"Are you sure you have the eclipse settings pointed at the right java language level?"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":2,"creation_date":1664815992,"post_id":73938491,"comment_id":130552586,"body_markdown":"Seems very likely that you are using two versions of javac","body":"Seems very likely that you are using two versions of javac"},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":4,"creation_date":1664816451,"post_id":73938491,"comment_id":130552701,"body_markdown":"Eclipse uses its own compiler (&quot;ecj&quot;) rather than javac so there are ocassionally differences from javac in what it thinks is valid.","body":"Eclipse uses its own compiler (&quot;ecj&quot;) rather than javac so there are ocassionally differences from javac in what it thinks is valid."},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1664830793,"post_id":73938491,"comment_id":130556739,"body_markdown":"Note: It doesn&#39;t matter what Installed JREs you tell Eclipse about, the compiler is always the internal ecj compiler - which can compile for any compliance level. This looks like it is a bug in either ecj or javac.","body":"Note: It doesn&#39;t matter what Installed JREs you tell Eclipse about, the compiler is always the internal ecj compiler - which can compile for any compliance level. This looks like it is a bug in either ecj or javac."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1664883542,"post_id":73938491,"comment_id":130567455,"body_markdown":"i can reproduce..looks like an ecj issue. A workaround: `public abstract class AbstractForEachValidatorBuilder&lt;T, V, X&gt; extends ValidatorBuilder&lt;V&gt; {\n\n    private List&lt;ValidatorGroupBuilder&lt;T, X&gt;&gt; validatorGroupBuilders = new ArrayList&lt;ValidatorGroupBuilder&lt;T, X&gt;&gt;();\n\n    protected List&lt;ValidatorGroup&lt;T,X&gt;&gt; initGroups() {\n        return initAndBuildList(this.validatorGroupBuilders);\n    } // as before` ?? (introducing type parameter `X` and replacing it (with first 3) occurrences of `?`)","body":"i can reproduce..looks like an ecj issue. A workaround: <code>public abstract class AbstractForEachValidatorBuilder&lt;T, V, X&gt; extends ValidatorBuilder&lt;V&gt; {      private List&lt;ValidatorGroupBuilder&lt;T, X&gt;&gt; validatorGroupBuilders = new ArrayList&lt;ValidatorGroupBuilder&lt;T, X&gt;&gt;();      protected List&lt;ValidatorGroup&lt;T,X&gt;&gt; initGroups() {         return initAndBuildList(this.validatorGroupBuilders);     } &#47;&#47; as before</code> ?? (introducing type parameter <code>X</code> and replacing it (with first 3) occurrences of <code>?</code>)"},{"owner":{"account_id":3158846,"reputation":3608,"user_id":2670571,"accept_rate":52,"display_name":"John"},"score":1,"creation_date":1664891029,"post_id":73938491,"comment_id":130570104,"body_markdown":"@xerx593, Thanks! Your workaround saves the day... but doesn&#39;t explain why it compiles using mvn at the command line but does not compile in Eclipse. I&#39;ve opened a bug in Eclipse&#39;s bugzilla for this.  I&#39;ll post here when I hear back from them.","body":"@xerx593, Thanks! Your workaround saves the day... but doesn&#39;t explain why it compiles using mvn at the command line but does not compile in Eclipse. I&#39;ve opened a bug in Eclipse&#39;s bugzilla for this.  I&#39;ll post here when I hear back from them."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1664891670,"post_id":73938491,"comment_id":130570367,"body_markdown":"&quot;reproduce&quot; doesn&#39;t mean understand :) ..but, very welcome! ..please transfer savings to .... xDxDxD, thank You for opening that issue! My &quot;workaround&quot; (of course) is a heavy intervention in your code! ...","body":"&quot;reproduce&quot; doesn&#39;t mean understand :) ..but, very welcome! ..please transfer savings to .... xDxDxD, thank You for opening that issue! My &quot;workaround&quot; (of course) is a heavy intervention in your code! ..."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1664891771,"post_id":73938491,"comment_id":130570407,"body_markdown":"But since there isn&#39;t even javadoc, ..and helped me (and apparently ecj) to &quot;better structure the problem&quot;..why not!? ;p","body":"But since there isn&#39;t even javadoc, ..and helped me (and apparently ecj) to &quot;better structure the problem&quot;..why not!? ;p"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1664892837,"post_id":73938491,"comment_id":130570899,"body_markdown":"An important setting I missed in your screenshots is &quot;Project&gt;Build Automatically&quot; (but it doesn&#39;t help much with the original issue...for this you&#39;d had to prevent all &quot;eclipse builds&quot;, but only use (maven)  &quot;run configurations&quot;... ;(","body":"An important setting I missed in your screenshots is &quot;Project&gt;Build Automatically&quot; (but it doesn&#39;t help much with the original issue...for this you&#39;d had to prevent all &quot;eclipse builds&quot;, but only use (maven)  &quot;run configurations&quot;... ;("}],"owner":{"account_id":3158846,"reputation":3608,"user_id":2670571,"accept_rate":52,"display_name":"John"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1664878032,"creation_date":1664815799,"question_id":73938491,"body_markdown":"I have some open source code I&#39;m looking at.  The project compiles at the command line using mvn clean install.  \r\n\r\nThe project gives the errors shown below when opened in Eclipse.  \r\n\r\nI&#39;m thinking I have not set the Java compiler version correctly and Eclipse is using a different version of Java than I think it is.  \r\n\r\nIs this type of use of generics allowed in some versions of java but not in others?\r\n\r\nThe second call below compiles.  \r\n\r\nThe first call below gives the compiler error below, but only in Eclipse, not when compiled using mvn clean install at the command line.  \r\n\r\n    Type mismatch: cannot convert from List&lt;ValidatorGroup&lt;T,?&gt;&gt; to List&lt;ValidatorGroup&lt;T,?&gt;&gt;\tAbstractForEachValidatorBuilder.java\t/WebAPI/src/main/java/org/ohdsi/webapi/check/builder\tline 44\tJava Problem\r\n\r\nNote the change in return types from &amp;lt;U&amp;gt; List&amp;lt;U&amp;gt; to List&amp;lt;ValidatorGroup&amp;lt;T,?&amp;gt;&amp;gt;. \r\n\r\n \r\n\r\n    private List&lt;ValidatorGroupBuilder&lt;T, ?&gt;&gt; validatorGroupBuilders = new ArrayList&lt;&gt;();\r\n    private List&lt;ValidatorBuilder&lt;T&gt;&gt; validatorBuilders = new ArrayList&lt;&gt;();\r\n\r\n\r\n    protected List&lt;ValidatorGroup&lt;T,?&gt;&gt; initGroups() {\r\n        return initAndBuildList(this.validatorGroupBuilders);\r\n    }\r\n\r\n    protected List&lt;Validator&lt;T&gt;&gt; initValidators() {\r\n        return initAndBuildList(this.validatorBuilders);\r\n    }\r\n\r\n    private &lt;U&gt; List&lt;U&gt; initAndBuildList(List&lt;? extends ValidatorBaseBuilder&lt;T, U, ?&gt;&gt; builders) {\r\n\r\n        //...do stuff\r\n    }\r\n\r\n\r\n\r\n**The ValidatorBuild class**\r\n\r\n    public abstract class ValidatorBuilder&lt;T&gt; extends ValidatorBaseBuilder&lt;T, Validator&lt;T&gt;, ValidatorBuilder&lt;T&gt;&gt; {\r\n    \r\n        public abstract Validator&lt;T&gt; build();\r\n    \r\n    }\r\n\r\n**The ValidatorGroupBuilder class**\r\n\r\n    public class ValidatorGroupBuilder&lt;T, V&gt; extends ValidatorBaseBuilder&lt;T, ValidatorGroup&lt;T, V&gt;, ValidatorGroupBuilder&lt;T, V&gt;&gt; {\r\n\r\nFull project is here: https://github.com/OHDSI/WebAPI \r\n\r\n**--- EDIT ---------------------------**\r\n\r\n**Here are the places where I&#39;ve set the Java version to 1.8**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n[![enter image description here][3]][3]\r\n\r\n[![enter image description here][4]][4]\r\n\r\n[![enter image description here][5]][5]\r\n\r\n**From the pom.xml file**\r\n\r\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n\r\n**From the pom.xml file**\r\n\r\n\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1&lt;/version&gt;\r\n        &lt;inherited&gt;true&lt;/inherited&gt;\r\n        &lt;configuration&gt;\r\n\t\t  &lt;source&gt;1.8&lt;/source&gt;\r\n\t\t  &lt;target&gt;1.8&lt;/target&gt;\r\n          &lt;compilerArgs&gt;\r\n            &lt;!-- Prevents recompilation due to missing package-info.class, see MCOMPILER-205 --&gt;\r\n            &lt;arg&gt;-Xpkginfo:always&lt;/arg&gt;\r\n          &lt;/compilerArgs&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n\r\n\r\n**--- SECOND EDIT --------------------------------------**\r\n\r\nBoth the MVN build and the Eclipse build generate classes with major version of 52 (Java 8).  \r\n\r\n[![enter image description here][6]][6]\r\n\r\nWhen I create a JUnit test and run it in my Eclipse environment it indicates a JRE of 1.8.0_261.  \r\n\r\n**--- THIRD EDIT -------------------------------------------**\r\n\r\nA complete minimum example that gives this error is provided here:\r\nhttps://github.com/NACHC-CAD/eclipse-compile-error-example\r\n\r\nThis project compiles with MVN\r\n\r\n[![enter image description here][7]][7]\r\n\r\n\r\nThis project does not compile in Eclipse\r\n\r\n[![enter image description here][8]][8]\r\n\r\nThis is the version of Eclipse I&#39;m using\r\n\r\n[![enter image description here][9]][9]\r\n\r\nThe issue is also seen in this version of Eclipse:\r\n\r\n[![enter image description here][10]][10]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6anZq.png\r\n  [2]: https://i.stack.imgur.com/wMC0p.png\r\n  [3]: https://i.stack.imgur.com/ADuPb.png\r\n  [4]: https://i.stack.imgur.com/0N0HW.png\r\n  [5]: https://i.stack.imgur.com/I7Ga4.png\r\n  [6]: https://i.stack.imgur.com/IBtc7.png\r\n  [7]: https://i.stack.imgur.com/lJS5Q.png\r\n  [8]: https://i.stack.imgur.com/KbWsJ.png\r\n  [9]: https://i.stack.imgur.com/af9XH.png\r\n  [10]: https://i.stack.imgur.com/1mSrH.png","title":"Clever use of generics seems to compile in one Java version but does not in Eclipse","body":"<p>I have some open source code I'm looking at.  The project compiles at the command line using mvn clean install.</p>\n<p>The project gives the errors shown below when opened in Eclipse.</p>\n<p>I'm thinking I have not set the Java compiler version correctly and Eclipse is using a different version of Java than I think it is.</p>\n<p>Is this type of use of generics allowed in some versions of java but not in others?</p>\n<p>The second call below compiles.</p>\n<p>The first call below gives the compiler error below, but only in Eclipse, not when compiled using mvn clean install at the command line.</p>\n<pre><code>Type mismatch: cannot convert from List&lt;ValidatorGroup&lt;T,?&gt;&gt; to List&lt;ValidatorGroup&lt;T,?&gt;&gt;   AbstractForEachValidatorBuilder.java    /WebAPI/src/main/java/org/ohdsi/webapi/check/builder    line 44 Java Problem\n</code></pre>\n<p>Note the change in return types from &lt;U&gt; List&lt;U&gt; to List&lt;ValidatorGroup&lt;T,?&gt;&gt;.</p>\n<pre><code>private List&lt;ValidatorGroupBuilder&lt;T, ?&gt;&gt; validatorGroupBuilders = new ArrayList&lt;&gt;();\nprivate List&lt;ValidatorBuilder&lt;T&gt;&gt; validatorBuilders = new ArrayList&lt;&gt;();\n\n\nprotected List&lt;ValidatorGroup&lt;T,?&gt;&gt; initGroups() {\n    return initAndBuildList(this.validatorGroupBuilders);\n}\n\nprotected List&lt;Validator&lt;T&gt;&gt; initValidators() {\n    return initAndBuildList(this.validatorBuilders);\n}\n\nprivate &lt;U&gt; List&lt;U&gt; initAndBuildList(List&lt;? extends ValidatorBaseBuilder&lt;T, U, ?&gt;&gt; builders) {\n\n    //...do stuff\n}\n</code></pre>\n<p><strong>The ValidatorBuild class</strong></p>\n<pre><code>public abstract class ValidatorBuilder&lt;T&gt; extends ValidatorBaseBuilder&lt;T, Validator&lt;T&gt;, ValidatorBuilder&lt;T&gt;&gt; {\n\n    public abstract Validator&lt;T&gt; build();\n\n}\n</code></pre>\n<p><strong>The ValidatorGroupBuilder class</strong></p>\n<pre><code>public class ValidatorGroupBuilder&lt;T, V&gt; extends ValidatorBaseBuilder&lt;T, ValidatorGroup&lt;T, V&gt;, ValidatorGroupBuilder&lt;T, V&gt;&gt; {\n</code></pre>\n<p>Full project is here: <a href=\"https://github.com/OHDSI/WebAPI\" rel=\"nofollow noreferrer\">https://github.com/OHDSI/WebAPI</a></p>\n<p><strong>--- EDIT ---------------------------</strong></p>\n<p><strong>Here are the places where I've set the Java version to 1.8</strong></p>\n<p><a href=\"https://i.stack.imgur.com/6anZq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6anZq.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/wMC0p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wMC0p.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/ADuPb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ADuPb.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/0N0HW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0N0HW.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/I7Ga4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I7Ga4.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>From the pom.xml file</strong></p>\n<pre><code>&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n</code></pre>\n<p><strong>From the pom.xml file</strong></p>\n<pre><code>  &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.1&lt;/version&gt;\n    &lt;inherited&gt;true&lt;/inherited&gt;\n    &lt;configuration&gt;\n      &lt;source&gt;1.8&lt;/source&gt;\n      &lt;target&gt;1.8&lt;/target&gt;\n      &lt;compilerArgs&gt;\n        &lt;!-- Prevents recompilation due to missing package-info.class, see MCOMPILER-205 --&gt;\n        &lt;arg&gt;-Xpkginfo:always&lt;/arg&gt;\n      &lt;/compilerArgs&gt;\n    &lt;/configuration&gt;\n  &lt;/plugin&gt;\n</code></pre>\n<p><strong>--- SECOND EDIT --------------------------------------</strong></p>\n<p>Both the MVN build and the Eclipse build generate classes with major version of 52 (Java 8).</p>\n<p><a href=\"https://i.stack.imgur.com/IBtc7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IBtc7.png\" alt=\"enter image description here\" /></a></p>\n<p>When I create a JUnit test and run it in my Eclipse environment it indicates a JRE of 1.8.0_261.</p>\n<p><strong>--- THIRD EDIT -------------------------------------------</strong></p>\n<p>A complete minimum example that gives this error is provided here:\n<a href=\"https://github.com/NACHC-CAD/eclipse-compile-error-example\" rel=\"nofollow noreferrer\">https://github.com/NACHC-CAD/eclipse-compile-error-example</a></p>\n<p>This project compiles with MVN</p>\n<p><a href=\"https://i.stack.imgur.com/lJS5Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lJS5Q.png\" alt=\"enter image description here\" /></a></p>\n<p>This project does not compile in Eclipse</p>\n<p><a href=\"https://i.stack.imgur.com/KbWsJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KbWsJ.png\" alt=\"enter image description here\" /></a></p>\n<p>This is the version of Eclipse I'm using</p>\n<p><a href=\"https://i.stack.imgur.com/af9XH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/af9XH.png\" alt=\"enter image description here\" /></a></p>\n<p>The issue is also seen in this version of Eclipse:</p>\n<p><a href=\"https://i.stack.imgur.com/1mSrH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1mSrH.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","maven","jdk6"],"comments":[{"owner":{"account_id":1335201,"reputation":1177,"user_id":1278129,"accept_rate":71,"display_name":"Augustas"},"score":0,"creation_date":1664874940,"post_id":73944929,"comment_id":130564757,"body_markdown":"you are probably right, that JDK version is too low. Just try lowering plugin version to 1.6 or 2.* and see if it goes.","body":"you are probably right, that JDK version is too low. Just try lowering plugin version to 1.6 or 2.* and see if it goes."},{"owner":{"account_id":25896687,"reputation":31,"user_id":19623162,"display_name":"smxh"},"score":0,"creation_date":1664876712,"post_id":73944929,"comment_id":130565301,"body_markdown":"so I should lower maven-help-plugin plugin right? the maven uses `mvn help:evaluate` command, so I should lower it in pom.xml or in the command? I still get confused about it","body":"so I should lower maven-help-plugin plugin right? the maven uses <code>mvn help:evaluate</code> command, so I should lower it in pom.xml or in the command? I still get confused about it"},{"owner":{"account_id":25896687,"reputation":31,"user_id":19623162,"display_name":"smxh"},"score":0,"creation_date":1664877880,"post_id":73944929,"comment_id":130565676,"body_markdown":"tried to use full path to help plugin in command line, and it worked :)","body":"tried to use full path to help plugin in command line, and it worked :)"}],"answers":[{"tags":[],"owner":{"account_id":25896687,"reputation":31,"user_id":19623162,"display_name":"smxh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664877960,"creation_date":1664877960,"answer_id":73946278,"question_id":73944929,"body_markdown":"indeed problem was in too high version of help plugin, I lower it to 2.2 and its fine\r\n\r\nadding direct path to selected version of help plugin worked for me:\r\n`$MVN_CMD org.apache.maven.plugins:maven-help-plugin:2.2:evaluate`","title":"Error while running building maven project - plugins, API incompatibility","body":"<p>indeed problem was in too high version of help plugin, I lower it to 2.2 and its fine</p>\n<p>adding direct path to selected version of help plugin worked for me:\n<code>$MVN_CMD org.apache.maven.plugins:maven-help-plugin:2.2:evaluate</code></p>\n"}],"owner":{"account_id":25896687,"reputation":31,"user_id":19623162,"display_name":"smxh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":283,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73946278,"answer_count":1,"score":0,"last_activity_date":1664877960,"creation_date":1664871431,"question_id":73944929,"body_markdown":"I am facing problem while trying to run maven build with JDK6. I am running build inside docker container with JDK6 and Maven.\r\n\r\nDo I get it right, that the plugins are not compatibile with JDK6 version and I should use lower version of **help** plugin? I cannot change JDK version to higher, I ran into this problem while trying to enable bulding project with JDK6, so I want to solve this problem.\r\n\r\nerror message from Maven:\r\n```\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-help-plugin:3.2.0:evaluate (default-cli) on project security-component: Execution default-cli of goal org.apache.maven.plugins:maven-help-plugin:3.2.0:evaluate failed: Unable to load the mojo &#39;evaluate&#39; in the plugin &#39;org.apache.maven.plugins:maven-help-plugin:3.2.0&#39; due to an API incompatibility: org.codehaus.plexus.component.repository.exception.ComponentLookupException: org/apache/maven/plugins/help/EvaluateMojo : Unsupported major.minor version 51.0\r\n[ERROR] -----------------------------------------------------\r\n[ERROR] realm =    plugin&gt;org.apache.maven.plugins:maven-help-plugin:3.2.0\r\n```\r\n\r\n\r\n`mvn -version` output:\r\n```Apache Maven 3.0.5\r\nMaven home: /usr/share/maven\r\nJava version: 1.6.0_41, vendor: Sun Microsystems Inc.\r\nJava home: /usr/lib/jvm/java-6-openjdk-amd64/jre\r\n```\r\n","title":"Error while running building maven project - plugins, API incompatibility","body":"<p>I am facing problem while trying to run maven build with JDK6. I am running build inside docker container with JDK6 and Maven.</p>\n<p>Do I get it right, that the plugins are not compatibile with JDK6 version and I should use lower version of <strong>help</strong> plugin? I cannot change JDK version to higher, I ran into this problem while trying to enable bulding project with JDK6, so I want to solve this problem.</p>\n<p>error message from Maven:</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-help-plugin:3.2.0:evaluate (default-cli) on project security-component: Execution default-cli of goal org.apache.maven.plugins:maven-help-plugin:3.2.0:evaluate failed: Unable to load the mojo 'evaluate' in the plugin 'org.apache.maven.plugins:maven-help-plugin:3.2.0' due to an API incompatibility: org.codehaus.plexus.component.repository.exception.ComponentLookupException: org/apache/maven/plugins/help/EvaluateMojo : Unsupported major.minor version 51.0\n[ERROR] -----------------------------------------------------\n[ERROR] realm =    plugin&gt;org.apache.maven.plugins:maven-help-plugin:3.2.0\n</code></pre>\n<p><code>mvn -version</code> output:</p>\n<pre><code>Maven home: /usr/share/maven\nJava version: 1.6.0_41, vendor: Sun Microsystems Inc.\nJava home: /usr/lib/jvm/java-6-openjdk-amd64/jre\n</code></pre>\n"},{"tags":["java","servlets"],"comments":[{"owner":{"account_id":1726806,"reputation":13951,"user_id":4790924,"accept_rate":67,"display_name":"Sharon Ben Asher"},"score":0,"creation_date":1664813724,"post_id":73937995,"comment_id":130551865,"body_markdown":"this is not how you run a web application with tomcat","body":"this is not how you run a web application with tomcat"},{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":0,"creation_date":1664868266,"post_id":73937995,"comment_id":130562704,"body_markdown":"@SharonBenAsher the opener is not trying to run the application, rather *compile* it, as clearly stated in the title.","body":"@SharonBenAsher the opener is not trying to run the application, rather <i>compile</i> it, as clearly stated in the title."}],"answers":[{"tags":[],"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664868359,"creation_date":1664868359,"answer_id":73944376,"question_id":73937995,"body_markdown":"Tomcat 10 is using the new `jakarta.*` namespace for the servlet packages. You are importing the old `javax.servlet.*`. Just replace `javax.servlet.` with `jakarta.servlet.` and compilation should work.","title":"Faild compilation standard servlet example","body":"<p>Tomcat 10 is using the new <code>jakarta.*</code> namespace for the servlet packages. You are importing the old <code>javax.servlet.*</code>. Just replace <code>javax.servlet.</code> with <code>jakarta.servlet.</code> and compilation should work.</p>\n"}],"owner":{"account_id":26516950,"reputation":11,"user_id":20151314,"display_name":"Denys Garbuz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1664877875,"accepted_answer_id":73944376,"answer_count":1,"score":0,"last_activity_date":1664877881,"creation_date":1664813017,"question_id":73937995,"body_markdown":"    G:\\demo3\\src\\main\\java\\com\\example\\demo3&gt;javac HelloServlet.java -classpath &quot;C:\\Program Files\\Apache Software Foundation\\Tomcat 10.0\\lib\\servlet-api.jar&quot;\r\n    HelloServlet.java:8: error: cannot find symbol\r\n    public class HelloServlet extends GenericServlet{\r\n                                      ^\r\n      symbol: class GenericServlet\r\n    HelloServlet.java:10: error: cannot find symbol\r\n        public void service(ServletRequest servletRequest, ServletResponse servletResponse)\r\n                            ^\r\n      symbol:   class ServletRequest\r\n      location: class HelloServlet\r\n    HelloServlet.java:10: error: cannot find symbol\r\n        public void service(ServletRequest servletRequest, ServletResponse servletResponse)\r\n                                                           ^\r\n      symbol:   class ServletResponse\r\n      location: class HelloServlet\r\n    HelloServlet.java:11: error: cannot find symbol\r\n                throws ServletException, IOException {\r\n                       ^\r\n      symbol:   class ServletException\r\n      location: class HelloServlet\r\n    HelloServlet.java:3: error: package javax.servlet does not exist\r\n    import javax.servlet.*;\r\n    ^\r\n    HelloServlet.java:9: error: method does not override or implement a method from a supertype\r\n        @Override\r\n        ^\r\n    6 errors\r\n\r\nwhat iam doing wrong? CLASSPATH created to servlet-api.jar file btw\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7hWkA.jpg\r\n\r\n","title":"Faild compilation standard servlet example","body":"<pre><code>G:\\demo3\\src\\main\\java\\com\\example\\demo3&gt;javac HelloServlet.java -classpath &quot;C:\\Program Files\\Apache Software Foundation\\Tomcat 10.0\\lib\\servlet-api.jar&quot;\nHelloServlet.java:8: error: cannot find symbol\npublic class HelloServlet extends GenericServlet{\n                                  ^\n  symbol: class GenericServlet\nHelloServlet.java:10: error: cannot find symbol\n    public void service(ServletRequest servletRequest, ServletResponse servletResponse)\n                        ^\n  symbol:   class ServletRequest\n  location: class HelloServlet\nHelloServlet.java:10: error: cannot find symbol\n    public void service(ServletRequest servletRequest, ServletResponse servletResponse)\n                                                       ^\n  symbol:   class ServletResponse\n  location: class HelloServlet\nHelloServlet.java:11: error: cannot find symbol\n            throws ServletException, IOException {\n                   ^\n  symbol:   class ServletException\n  location: class HelloServlet\nHelloServlet.java:3: error: package javax.servlet does not exist\nimport javax.servlet.*;\n^\nHelloServlet.java:9: error: method does not override or implement a method from a supertype\n    @Override\n    ^\n6 errors\n</code></pre>\n<p>what iam doing wrong? CLASSPATH created to servlet-api.jar file btw\n<a href=\"https://i.stack.imgur.com/7hWkA.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","javafx","webview"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1664889896,"post_id":73946247,"comment_id":130569672,"body_markdown":"[mcve] please ..","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please .."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1664926638,"post_id":73946247,"comment_id":130580284,"body_markdown":"I’m voting to close this question because I don&#39;t know any reason why somebody would help you write a program that guesses captchas here.","body":"I’m voting to close this question because I don&#39;t know any reason why somebody would help you write a program that guesses captchas here."}],"owner":{"account_id":18266068,"reputation":21,"user_id":13297767,"display_name":"autosync"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664877824,"creation_date":1664877824,"question_id":73946247,"body_markdown":"I want to create a captcha typing software for multiple accounts with the website https://kolotibablo.com/\r\n\r\nI have problem when captcha appear [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cjXRe.png\r\nif for a few seconds I don&#39;t enter a character in the input box.It will disappear.I am using javafx&#39;s webview.I use the code to enter a few random characters.\r\n\r\n    webView.getWebEngine().executeScript(&quot;document.getElementById(\\&quot;guesstext\\&quot;).value = \\&quot;RANDOM\\&quot;&quot;);\r\n\r\n I want to keep the process checked before I go back to typing it.Please help me\r\n\r\n","title":"Eliminate time checking when entering captcha when creating multi-account software on kolotibablo","body":"<p>I want to create a captcha typing software for multiple accounts with the website <a href=\"https://kolotibablo.com/\" rel=\"nofollow noreferrer\">https://kolotibablo.com/</a></p>\n<p>I have problem when captcha appear <a href=\"https://i.stack.imgur.com/cjXRe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cjXRe.png\" alt=\"enter image description here\" /></a></p>\n<p>if for a few seconds I don't enter a character in the input box.It will disappear.I am using javafx's webview.I use the code to enter a few random characters.</p>\n<pre><code>webView.getWebEngine().executeScript(&quot;document.getElementById(\\&quot;guesstext\\&quot;).value = \\&quot;RANDOM\\&quot;&quot;);\n</code></pre>\n<p>I want to keep the process checked before I go back to typing it.Please help me</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":26521942,"reputation":54,"user_id":20155481,"display_name":"James Gyps"},"score":0,"creation_date":1664865474,"post_id":73943505,"comment_id":130561975,"body_markdown":"Important to mention, also setTitle does not work on the BottomNav. yet setBackground works.","body":"Important to mention, also setTitle does not work on the BottomNav. yet setBackground works."}],"answers":[{"comments":[{"owner":{"account_id":26521942,"reputation":54,"user_id":20155481,"display_name":"James Gyps"},"score":0,"creation_date":1664866228,"post_id":73943978,"comment_id":130562148,"body_markdown":"Actually found the issue,         setContentView(R.layout.activity_main) fixed the issue. I&#39;ve edited the question","body":"Actually found the issue,         setContentView(R.layout.activity_main) fixed the issue. I&#39;ve edited the question"},{"owner":{"account_id":26521942,"reputation":54,"user_id":20155481,"display_name":"James Gyps"},"score":0,"creation_date":1664877756,"post_id":73943978,"comment_id":130565640,"body_markdown":"A Still didn&#39;t work, updated my question","body":"A Still didn&#39;t work, updated my question"}],"tags":[],"owner":{"account_id":16010862,"reputation":2281,"user_id":11555065,"display_name":"DHAVAL A."},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664866712,"creation_date":1664865747,"answer_id":73943978,"question_id":73943505,"body_markdown":"I&#39;m not sure if `onPrepareOptionsMenu` invoked for bottom navigation bar.\r\n\r\nYou should have to update navigation menu icon from `onCreate` method of that Activity.\r\n\r\nRefer below code,\r\n```\r\nval menu = navigation.menu\r\nval menuItem = menu.findItem(R.id.navigation_notifications) // find particular menu-item using its ID.\r\nmenuItem?.icon = this.bitmap_pic\r\n```\r\n\r\nSolution for Gray icon tint, \r\nadd below line.\r\n```\r\nMenuItemCompat.setIconTintMode(menuItem, PorterDuff.Mode.DST)\r\n```","title":"ActionBar in Android overrides the BottomNavigation","body":"<p>I'm not sure if <code>onPrepareOptionsMenu</code> invoked for bottom navigation bar.</p>\n<p>You should have to update navigation menu icon from <code>onCreate</code> method of that Activity.</p>\n<p>Refer below code,</p>\n<pre><code>val menu = navigation.menu\nval menuItem = menu.findItem(R.id.navigation_notifications) // find particular menu-item using its ID.\nmenuItem?.icon = this.bitmap_pic\n</code></pre>\n<p>Solution for Gray icon tint,\nadd below line.</p>\n<pre><code>MenuItemCompat.setIconTintMode(menuItem, PorterDuff.Mode.DST)\n</code></pre>\n"}],"owner":{"account_id":26521942,"reputation":54,"user_id":20155481,"display_name":"James Gyps"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73943978,"answer_count":1,"score":2,"last_activity_date":1664877740,"creation_date":1664862064,"question_id":73943505,"body_markdown":"When trying to change an icon to a downloaded drawable (or actually changing to any other icon during runtime), the icon changes once on the ActionBar.\r\n\r\nI actually want to remove the ActionBar and leave only the bottomnav (tabs) for navigation, yet whatever i&#39;m doing the icon changes only on the ActionBar.\r\n\r\n\r\nThe item inside bottom_nav_menu.xml:\r\n\r\n        &lt;item\r\n        android:id=&quot;@+id/navigation_notifications&quot;\r\n        android:icon=&quot;@drawable/ic_dashboard_black_24dp&quot;\r\n        android:title=&quot;@string/title_notifications&quot;\r\n        app:showAsAction=&quot;ifRoom&quot;/&gt;\r\n\r\nThe code that changes the icon:\r\n\r\n    @Override\r\n    public boolean onPrepareOptionsMenu (Menu menu){\r\n        menu.clear();\r\n        getMenuInflater().inflate(R.menu.bottom_nav_menu, menu);\r\n        menu.getItem(2).setIcon(this.bitmap_pic);\r\n    \r\n        Log.e(TAG, &quot;Icon Changed&quot;);\r\n        return super.onPrepareOptionsMenu(menu);\r\n    }\r\n\r\n\r\nThe result - Icon stays blank on BottomNav but appears on the ActionBar.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nExpected result: BottomNav icon will be the image that shown on the top right.\r\n\r\nThanks\r\n\r\n\r\n**EDIT!**\r\n\r\nIssue was fixed after inflating the main_activity layout that contains the BottomNavView\r\n\r\nNow the problem the picture isn&#39;t showing properly, attached a screenshot (Image is grey instead of showing the icon like in the ActionBar in the first picture):\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n**Edit 2**\r\n\r\nIcon is still grey instead of showing the bitmap picture.\r\nAdded:\r\n\r\n    MenuItemCompat.setIconTintMode(bottomNavigationView.getMenu().getItem(2), PorterDuff.Mode.CLEAR);\r\n\r\nBut it still shows up like in the picture below\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2mB2m.png\r\n  [2]: https://i.stack.imgur.com/5DQj1.png\r\n  [3]: https://i.stack.imgur.com/xo74Y.png\r\n\r\n**Edit 3**\r\n\r\nFixed the issue using:\r\n\r\n            bottomNavigationView.setItemIconTintList(null);\r\n","title":"ActionBar in Android overrides the BottomNavigation","body":"<p>When trying to change an icon to a downloaded drawable (or actually changing to any other icon during runtime), the icon changes once on the ActionBar.</p>\n<p>I actually want to remove the ActionBar and leave only the bottomnav (tabs) for navigation, yet whatever i'm doing the icon changes only on the ActionBar.</p>\n<p>The item inside bottom_nav_menu.xml:</p>\n<pre><code>    &lt;item\n    android:id=&quot;@+id/navigation_notifications&quot;\n    android:icon=&quot;@drawable/ic_dashboard_black_24dp&quot;\n    android:title=&quot;@string/title_notifications&quot;\n    app:showAsAction=&quot;ifRoom&quot;/&gt;\n</code></pre>\n<p>The code that changes the icon:</p>\n<pre><code>@Override\npublic boolean onPrepareOptionsMenu (Menu menu){\n    menu.clear();\n    getMenuInflater().inflate(R.menu.bottom_nav_menu, menu);\n    menu.getItem(2).setIcon(this.bitmap_pic);\n\n    Log.e(TAG, &quot;Icon Changed&quot;);\n    return super.onPrepareOptionsMenu(menu);\n}\n</code></pre>\n<p>The result - Icon stays blank on BottomNav but appears on the ActionBar.</p>\n<p><a href=\"https://i.stack.imgur.com/2mB2m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2mB2m.png\" alt=\"enter image description here\" /></a></p>\n<p>Expected result: BottomNav icon will be the image that shown on the top right.</p>\n<p>Thanks</p>\n<p><strong>EDIT!</strong></p>\n<p>Issue was fixed after inflating the main_activity layout that contains the BottomNavView</p>\n<p>Now the problem the picture isn't showing properly, attached a screenshot (Image is grey instead of showing the icon like in the ActionBar in the first picture):</p>\n<p><a href=\"https://i.stack.imgur.com/5DQj1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5DQj1.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Edit 2</strong></p>\n<p>Icon is still grey instead of showing the bitmap picture.\nAdded:</p>\n<pre><code>MenuItemCompat.setIconTintMode(bottomNavigationView.getMenu().getItem(2), PorterDuff.Mode.CLEAR);\n</code></pre>\n<p>But it still shows up like in the picture below</p>\n<p><a href=\"https://i.stack.imgur.com/xo74Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xo74Y.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Edit 3</strong></p>\n<p>Fixed the issue using:</p>\n<pre><code>        bottomNavigationView.setItemIconTintList(null);\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":17945478,"reputation":1363,"user_id":16177121,"display_name":"Sidharth Mudgil"},"score":0,"creation_date":1664880464,"post_id":73945284,"comment_id":130566460,"body_markdown":"The indentation causing this error, Removing `tab spaces` will solve this problem","body":"The indentation causing this error, Removing <code>tab spaces</code> will solve this problem"}],"answers":[{"tags":[],"owner":{"account_id":19559913,"reputation":181,"user_id":14313338,"display_name":"Jurgen Rutten"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664874848,"creation_date":1664874848,"answer_id":73945604,"question_id":73945284,"body_markdown":"Remove the tabs when parsing (&quot;\\t&quot;) I think. ","title":"line breaks in string resource","body":"<p>Remove the tabs when parsing (&quot;\\t&quot;) I think.</p>\n"},{"tags":[],"owner":{"account_id":23733633,"reputation":742,"user_id":17752564,"display_name":"ninhnau19"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664874849,"creation_date":1664874849,"answer_id":73945605,"question_id":73945284,"body_markdown":"one simple way is use &quot;&quot; in your text string, such as like this:\r\n```\r\n    &lt;string name=&quot;text&quot;&gt;\r\n&quot;This is the first line\r\nThis is the second line&quot;\r\n    &lt;/string&gt;\r\n```","title":"line breaks in string resource","body":"<p>one simple way is use &quot;&quot; in your text string, such as like this:</p>\n<pre><code>    &lt;string name=&quot;text&quot;&gt;\n&quot;This is the first line\nThis is the second line&quot;\n    &lt;/string&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4861747,"reputation":527,"user_id":3921158,"accept_rate":13,"display_name":"Ginso"},"score":0,"creation_date":1664877397,"post_id":73945889,"comment_id":130565522,"body_markdown":"the br tags are completly ignored","body":"the br tags are completly ignored"},{"owner":{"account_id":26184382,"reputation":9,"user_id":19867158,"display_name":"Nader"},"score":0,"creation_date":1664877846,"post_id":73945889,"comment_id":130565661,"body_markdown":"Oh, thanks. Yes then you don&#39;t have to use them.","body":"Oh, thanks. Yes then you don&#39;t have to use them."},{"owner":{"account_id":26184382,"reputation":9,"user_id":19867158,"display_name":"Nader"},"score":0,"creation_date":1664878357,"post_id":73945889,"comment_id":130565839,"body_markdown":"here you can find more information about adding new line in xml files \nhttps://stackoverflow.com/a/35505248/19867158","body":"here you can find more information about adding new line in xml files  <a href=\"https://stackoverflow.com/a/35505248/19867158\">stackoverflow.com/a/35505248/19867158</a>"}],"tags":[],"owner":{"account_id":26184382,"reputation":9,"user_id":19867158,"display_name":"Nader"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664876060,"creation_date":1664876060,"answer_id":73945889,"question_id":73945284,"body_markdown":"I use usually something like this below:\r\n\r\n[![Image][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BGP8w.jpg\r\n\r\nYou can use this also for long texts. You have to write this without tabs or spaces, just from the begin of the line like the photo.\r\n\r\nEdited: \r\n&quot;br tag&quot; is used for new line","title":"line breaks in string resource","body":"<p>I use usually something like this below:</p>\n<p><a href=\"https://i.stack.imgur.com/BGP8w.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BGP8w.jpg\" alt=\"Image\" /></a></p>\n<p>You can use this also for long texts. You have to write this without tabs or spaces, just from the begin of the line like the photo.</p>\n<p>Edited:\n&quot;br tag&quot; is used for new line</p>\n"}],"owner":{"account_id":4861747,"reputation":527,"user_id":3921158,"accept_rate":13,"display_name":"Ginso"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1664877458,"creation_date":1664873380,"question_id":73945284,"body_markdown":"I have a long text in my string resources containing multiple line breaks.\r\nobviously i don&#39;t want to write it all in one line like `&lt;string name=&quot;text&quot;&gt;This is the first line\\nThis is the second line\\n...&lt;/string&gt;`\r\nBut when i do it like this:\r\n\r\n    &lt;string name=&quot;text&quot;&gt;\r\n        This is the first line\\n\r\n        This is the second line\\n\r\n        ...\r\n    &lt;/string&gt;\r\n\r\nThe start of the lines are indented a bit. How can i prevent this?\r\n\r\n\r\n    This is the first line\r\n      This is the second line\r\n\r\ni set the text &#180;directly in xml with `android:text=&quot;@string/text&quot;`","title":"line breaks in string resource","body":"<p>I have a long text in my string resources containing multiple line breaks.\nobviously i don't want to write it all in one line like <code>&lt;string name=&quot;text&quot;&gt;This is the first line\\nThis is the second line\\n...&lt;/string&gt;</code>\nBut when i do it like this:</p>\n<pre><code>&lt;string name=&quot;text&quot;&gt;\n    This is the first line\\n\n    This is the second line\\n\n    ...\n&lt;/string&gt;\n</code></pre>\n<p>The start of the lines are indented a bit. How can i prevent this?</p>\n<pre><code>This is the first line\n  This is the second line\n</code></pre>\n<p>i set the text ´directly in xml with <code>android:text=&quot;@string/text&quot;</code></p>\n"},{"tags":["java","utf-8","character-encoding"],"comments":[{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":1,"creation_date":1357740244,"post_id":14236923,"comment_id":19752371,"body_markdown":"What is the source here? Did you push the original data to said source? At a first glance I&#39;d say you tried and pushed cp-1252 apostrophes to it without them being converted to proper UTF-8 equivalents...","body":"What is the source here? Did you push the original data to said source? At a first glance I&#39;d say you tried and pushed cp-1252 apostrophes to it without them being converted to proper UTF-8 equivalents..."},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1357740666,"post_id":14236923,"comment_id":19752624,"body_markdown":"You need to show how you&#39;re reading the particular data from the data set and how you&#39;re presenting the particular data to the enduser/yourself. For example, are you using `FileReader` to read it and `System.out.println()` to present it? You have to tell one or both of them to use UTF-8 instead of the platform default charset which is recognizable as CP1252.","body":"You need to show how you&#39;re reading the particular data from the data set and how you&#39;re presenting the particular data to the enduser/yourself. For example, are you using <code>FileReader</code> to read it and <code>System.out.println()</code> to present it? You have to tell one or both of them to use UTF-8 instead of the platform default charset which is recognizable as CP1252."},{"owner":{"account_id":246,"reputation":107913,"user_id":304,"accept_rate":40,"display_name":"McDowell"},"score":0,"creation_date":1357740691,"post_id":14236923,"comment_id":19752641,"body_markdown":"This looks like a UTF-8 data source (with U+2019 `’` encoded correctly as  the octets `e2 80 99`) decoded using the single-byte windows-1252 encoding (where they are interpreted as the code points U+00e2 U+20ac U+2122 - `&#226;€™`.","body":"This looks like a UTF-8 data source (with U+2019 <code>’</code> encoded correctly as  the octets <code>e2 80 99</code>) decoded using the single-byte windows-1252 encoding (where they are interpreted as the code points U+00e2 U+20ac U+2122 - <code>&#226;€™</code>."},{"owner":{"account_id":285796,"reputation":13049,"user_id":584674,"accept_rate":86,"display_name":"james.garriss"},"score":0,"creation_date":1443796858,"post_id":14236923,"comment_id":53647403,"body_markdown":"Possible duplicate of [Check if a String is valid UTF-8 encoded in Java](http://stackoverflow.com/questions/6622226/check-if-a-string-is-valid-utf-8-encoded-in-java)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/6622226/check-if-a-string-is-valid-utf-8-encoded-in-java\">Check if a String is valid UTF-8 encoded in Java</a>"}],"answers":[{"comments":[{"owner":{"account_id":26776,"reputation":5358,"user_id":69966,"accept_rate":86,"display_name":"Chepech"},"score":0,"creation_date":1381353250,"post_id":14236992,"comment_id":28552259,"body_markdown":"This is by far the simplest solution I&#39;ve found so far. Thanks!","body":"This is by far the simplest solution I&#39;ve found so far. Thanks!"}],"tags":[],"owner":{"account_id":973998,"reputation":138710,"user_id":995876,"display_name":"Esailija"},"comment_count":1,"down_vote_count":0,"up_vote_count":39,"is_accepted":true,"score":39,"last_activity_date":1357741079,"creation_date":1357740245,"answer_id":14236992,"question_id":14236923,"body_markdown":"You cannot do that once you have the string, you have to do it while you still have the raw input. Once you have the string, there is no way to automatically tell whether `&#226;€™` was actually intended input without some seriously fragile tests. For example:\r\n\r\n\tpublic static boolean isUTF8MisInterpreted( String input ) {\r\n              //convenience overload for the most common UTF-8 misinterpretation\r\n              //which is also the case in your question\r\n\t      return isUTF8MisInterpreted( input, &quot;Windows-1252&quot;);\t\r\n\t}\r\n\t\r\n\tpublic static boolean isUTF8MisInterpreted( String input, String encoding) {\r\n\t\t\r\n\t\tCharsetDecoder decoder = Charset.forName(&quot;UTF-8&quot;).newDecoder();\r\n\t\tCharsetEncoder encoder = Charset.forName(encoding).newEncoder();\r\n\t\tByteBuffer tmp;\r\n\t\ttry {\r\n\t\t\ttmp = encoder.encode(CharBuffer.wrap(input));\r\n\t\t}\r\n\t\t\r\n\t\tcatch(CharacterCodingException e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\ttry {\r\n\t\t\tdecoder.decode(tmp);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tcatch(CharacterCodingException e){\r\n\t\t\treturn false;\r\n\t\t}\t\t\r\n\t}\r\n\t\r\n\tpublic static void main(String args[]) {\r\n\t\tString test = &quot;guide (but, yeah, it&#226;€™s okay to share it with &#226;€˜em).&quot;;\r\n\t\tString test2 = &quot;guide (but, yeah, it’s okay to share it with ‘em).&quot;;\r\n\t\tSystem.out.println( isUTF8MisInterpreted(test)); //true\r\n\t\tSystem.out.println( isUTF8MisInterpreted(test2)); //false\r\n\t\t\r\n\t}\r\nIf you still have access to raw input, you can see if a byte array amounts to fully valid utf-8 byte sequences with this:\r\n\r\n\tpublic static boolean isValidUTF8( byte[] input ) {\r\n\t\t\r\n\t\tCharsetDecoder cs = Charset.forName(&quot;UTF-8&quot;).newDecoder();\r\n\t\t\r\n\t\ttry {\r\n\t\t\tcs.decode(ByteBuffer.wrap(input));\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tcatch(CharacterCodingException e){\r\n\t\t\treturn false;\r\n\t\t}\t\t\r\n\t}\r\n\r\nYou can also use the CharsetDecoder with streams, by default it throws exception as soon as it sees invalid bytes in the given encoding.","title":"How to validate if a UTF-8 string contains mal-encoded characters","body":"<p>You cannot do that once you have the string, you have to do it while you still have the raw input. Once you have the string, there is no way to automatically tell whether <code>â€™</code> was actually intended input without some seriously fragile tests. For example:</p>\n\n<pre><code>public static boolean isUTF8MisInterpreted( String input ) {\n          //convenience overload for the most common UTF-8 misinterpretation\n          //which is also the case in your question\n      return isUTF8MisInterpreted( input, \"Windows-1252\");  \n}\n\npublic static boolean isUTF8MisInterpreted( String input, String encoding) {\n\n    CharsetDecoder decoder = Charset.forName(\"UTF-8\").newDecoder();\n    CharsetEncoder encoder = Charset.forName(encoding).newEncoder();\n    ByteBuffer tmp;\n    try {\n        tmp = encoder.encode(CharBuffer.wrap(input));\n    }\n\n    catch(CharacterCodingException e) {\n        return false;\n    }\n\n    try {\n        decoder.decode(tmp);\n        return true;\n    }\n    catch(CharacterCodingException e){\n        return false;\n    }       \n}\n\npublic static void main(String args[]) {\n    String test = \"guide (but, yeah, itâ€™s okay to share it with â€˜em).\";\n    String test2 = \"guide (but, yeah, it’s okay to share it with ‘em).\";\n    System.out.println( isUTF8MisInterpreted(test)); //true\n    System.out.println( isUTF8MisInterpreted(test2)); //false\n\n}\n</code></pre>\n\n<p>If you still have access to raw input, you can see if a byte array amounts to fully valid utf-8 byte sequences with this:</p>\n\n<pre><code>public static boolean isValidUTF8( byte[] input ) {\n\n    CharsetDecoder cs = Charset.forName(\"UTF-8\").newDecoder();\n\n    try {\n        cs.decode(ByteBuffer.wrap(input));\n        return true;\n    }\n    catch(CharacterCodingException e){\n        return false;\n    }       \n}\n</code></pre>\n\n<p>You can also use the CharsetDecoder with streams, by default it throws exception as soon as it sees invalid bytes in the given encoding.</p>\n"},{"tags":[],"owner":{"account_id":1795598,"reputation":1602,"user_id":1635049,"accept_rate":0,"display_name":"Tabish"},"comment_count":0,"down_vote_count":6,"up_vote_count":1,"is_accepted":false,"score":-5,"last_activity_date":1450159089,"creation_date":1450159089,"answer_id":34282073,"question_id":14236923,"body_markdown":"If you are using HTML5 then just add the \r\n`&lt;meta charset=&quot;UTF-8&quot;&gt;` inside the `&lt;head&gt;`\r\n\r\nfor HTML4 `&lt;meta http-equiv=&quot;Content-type&quot; content=&quot;text/html;charset=UTF-8&quot;&gt;`","title":"How to validate if a UTF-8 string contains mal-encoded characters","body":"<p>If you are using HTML5 then just add the \n<code>&lt;meta charset=\"UTF-8\"&gt;</code> inside the <code>&lt;head&gt;</code></p>\n\n<p>for HTML4 <code>&lt;meta http-equiv=\"Content-type\" content=\"text/html;charset=UTF-8\"&gt;</code></p>\n"}],"owner":{"account_id":189428,"reputation":30867,"user_id":4790871,"accept_rate":99,"display_name":"David Parks"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34632,"favorite_count":0,"down_vote_count":1,"up_vote_count":20,"accepted_answer_id":14236992,"answer_count":2,"score":19,"last_activity_date":1664877000,"creation_date":1357740025,"question_id":14236923,"body_markdown":"In a large data set I have some data that looks like this:\r\n\r\n    &quot;guide (but, yeah, it&#226;€™s okay to share it with &#226;€˜em).&quot;\r\n\r\nI&#39;ve opened the file in a hex editor and run the raw byte data through a character encoding detection algorithm ([http://code.google.com/p/juniversalchardet/][1]) and it&#39;s positively detected as UTF-8.\r\n\r\nIt appears to me that the source of the data mis-interpreted the original character set and wrote valid UTF-8 as the output that I have received.\r\n\r\nI&#39;d like to validate the data to the best I can. Are there any heuristics/algorithms out there that might help me take a stab at validation?\r\n\r\n\r\n  [1]: http://code.google.com/p/juniversalchardet/","title":"How to validate if a UTF-8 string contains mal-encoded characters","body":"<p>In a large data set I have some data that looks like this:</p>\n\n<pre><code>\"guide (but, yeah, itâ€™s okay to share it with â€˜em).\"\n</code></pre>\n\n<p>I've opened the file in a hex editor and run the raw byte data through a character encoding detection algorithm (<a href=\"http://code.google.com/p/juniversalchardet/\">http://code.google.com/p/juniversalchardet/</a>) and it's positively detected as UTF-8.</p>\n\n<p>It appears to me that the source of the data mis-interpreted the original character set and wrote valid UTF-8 as the output that I have received.</p>\n\n<p>I'd like to validate the data to the best I can. Are there any heuristics/algorithms out there that might help me take a stab at validation?</p>\n"},{"tags":["java","eclipse","inner-classes","lombok"],"comments":[{"owner":{"account_id":22216254,"reputation":19,"user_id":16454665,"display_name":"jojo"},"score":0,"creation_date":1626420441,"post_id":68405061,"comment_id":120903634,"body_markdown":"Did you check if:\n- you have the same java version selected\n- the same language level selected These are the two most common issue with lombok.","body":"Did you check if: - you have the same java version selected - the same language level selected These are the two most common issue with lombok."},{"owner":{"account_id":1387645,"reputation":7926,"user_id":1319284,"accept_rate":69,"display_name":"kutschkem"},"score":0,"creation_date":1626422400,"post_id":68405061,"comment_id":120893508,"body_markdown":"Have you tried making the inner class static? I know the annotation is already supposed to do that, but maybe there is an ordering issue or something? Please try making A and B static, and see if there is still a problem with C and D afterwards.","body":"Have you tried making the inner class static? I know the annotation is already supposed to do that, but maybe there is an ordering issue or something? Please try making A and B static, and see if there is still a problem with C and D afterwards."}],"answers":[{"tags":[],"owner":{"account_id":10595663,"reputation":4835,"user_id":7804477,"display_name":"Gautham M"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1626426895,"creation_date":1626426895,"answer_id":68406497,"question_id":68405061,"body_markdown":"Looks like a bug if it is not working in eclipse and working in Intellij.\r\n\r\nThe doc for `@UtilityClass` states that all methods, inner classes and fields in the class would be marked as `static`, if we use this annotation. Going by that, class `B` should become `static`.\r\n\r\nNow looking at the code (`lombok.javac.JavacNode`) from where the error mentioned in question is thrown, the code comment says that:\r\n```\r\n// It might be an inner class. This is okay, but only if it is / can be a\r\n// static inner class. Thus, all of its parents have to be static inner classes\r\n// until the top-level.\r\n```\r\nSo if `@UtilityClass` annotation is used on class `C` then class `B` should be `static` for it to work.\r\n\r\nSince class `A` is annotated with `@UtilityClass`, class `B` should have become `static`, but may be, it is not recognized as `static` during the above mentioned validation.\r\n\r\nTo fix this, you need to manually add `static` to class `B`. (Project build might also be required).\r\n\r\n(You may also log a bug in the lombok github page)\r\n","title":"How to use @UtilityClass lombok annotation on inner class in Eclipse IDE","body":"<p>Looks like a bug if it is not working in eclipse and working in Intellij.</p>\n<p>The doc for <code>@UtilityClass</code> states that all methods, inner classes and fields in the class would be marked as <code>static</code>, if we use this annotation. Going by that, class <code>B</code> should become <code>static</code>.</p>\n<p>Now looking at the code (<code>lombok.javac.JavacNode</code>) from where the error mentioned in question is thrown, the code comment says that:</p>\n<pre><code>// It might be an inner class. This is okay, but only if it is / can be a\n// static inner class. Thus, all of its parents have to be static inner classes\n// until the top-level.\n</code></pre>\n<p>So if <code>@UtilityClass</code> annotation is used on class <code>C</code> then class <code>B</code> should be <code>static</code> for it to work.</p>\n<p>Since class <code>A</code> is annotated with <code>@UtilityClass</code>, class <code>B</code> should have become <code>static</code>, but may be, it is not recognized as <code>static</code> during the above mentioned validation.</p>\n<p>To fix this, you need to manually add <code>static</code> to class <code>B</code>. (Project build might also be required).</p>\n<p>(You may also log a bug in the lombok github page)</p>\n"},{"comments":[{"owner":{"account_id":1659433,"reputation":419,"user_id":1527997,"display_name":"Aprian Diaz Novandi"},"score":1,"creation_date":1659074182,"post_id":70879026,"comment_id":129212991,"body_markdown":"Lombok 1.18.24 contains the fix https://github.com/projectlombok/lombok/issues/3097#issuecomment-1103976866","body":"Lombok 1.18.24 contains the fix <a href=\"https://github.com/projectlombok/lombok/issues/3097#issuecomment-1103976866\" rel=\"nofollow noreferrer\">github.com/projectlombok/lombok/issues/&hellip;</a>"}],"tags":[],"owner":{"account_id":19979093,"reputation":91,"user_id":14642689,"display_name":"Никулин Данил"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664876539,"creation_date":1643288531,"answer_id":70879026,"question_id":68405061,"body_markdown":"Make sure your JDK version isn&#39;t above version 8(1.8), cause looks like there is a [bug][1] in lombok, that @UtilityClass doesn&#39;t make inner classes static when JDK 9 or higher\r\n\r\nhttps://kotlinlang.org/docs/whatsnew1720.html#support-for-kotlin-k2-compiler-plugins\r\n\r\n\r\n  [1]: https://github.com/projectlombok/lombok/issues/3097","title":"How to use @UtilityClass lombok annotation on inner class in Eclipse IDE","body":"<p>Make sure your JDK version isn't above version 8(1.8), cause looks like there is a <a href=\"https://github.com/projectlombok/lombok/issues/3097\" rel=\"nofollow noreferrer\">bug</a> in lombok, that @UtilityClass doesn't make inner classes static when JDK 9 or higher</p>\n<p><a href=\"https://kotlinlang.org/docs/whatsnew1720.html#support-for-kotlin-k2-compiler-plugins\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/whatsnew1720.html#support-for-kotlin-k2-compiler-plugins</a></p>\n"}],"owner":{"account_id":7741045,"reputation":69,"user_id":10306187,"display_name":"Manish Pareek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7511,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1664876539,"creation_date":1626420252,"question_id":68405061,"body_markdown":"I have a class where `@UtilityClass` annotation on class C and class D gives error in eclipse IDE but works fine with IntelliJ    \r\n\r\n\r\n&gt; @UtilityClass automatically makes the class static, however, this\r\n&gt; class cannot be made static.\r\n\r\n\r\nNot able to use @UtilityClass annotation on class C and class D. `Lombok v1.18.20 &quot;Envious Ferret&quot;` is installed.\r\n  \r\n\r\n     @UtilityClass\r\n        public class A {\r\n        \r\n        \t@UtilityClass\r\n        \tpublic class B {\r\n        \r\n        \t\tpublic final String name = &quot;name&quot;;\r\n        \t\tpublic final String id = &quot;id&quot;;\r\n        \r\n        \t\t@UtilityClass\r\n        \t\tpublic class C {\r\n        \r\n        \t\t\tpublic final String OVER = &quot;over.draft&quot;;\r\n        \t\t\tpublic final String ADD = &quot;add.draft&quot;;\r\n        \t\t}\r\n        \r\n        \t\t@UtilityClass\r\n        \t\tpublic class D {\r\n        \r\n        \t\t\tpublic final String OVER = &quot;over.published&quot;;\r\n        \t\t\tpublic final String ADD = &quot;add.published&quot;;\r\n        \t\t}\r\n        \t}\r\n        }","title":"How to use @UtilityClass lombok annotation on inner class in Eclipse IDE","body":"<p>I have a class where <code>@UtilityClass</code> annotation on class C and class D gives error in eclipse IDE but works fine with IntelliJ</p>\n<blockquote>\n<p>@UtilityClass automatically makes the class static, however, this\nclass cannot be made static.</p>\n</blockquote>\n<p>Not able to use @UtilityClass annotation on class C and class D. <code>Lombok v1.18.20 &quot;Envious Ferret&quot;</code> is installed.</p>\n<pre><code> @UtilityClass\n    public class A {\n    \n        @UtilityClass\n        public class B {\n    \n            public final String name = &quot;name&quot;;\n            public final String id = &quot;id&quot;;\n    \n            @UtilityClass\n            public class C {\n    \n                public final String OVER = &quot;over.draft&quot;;\n                public final String ADD = &quot;add.draft&quot;;\n            }\n    \n            @UtilityClass\n            public class D {\n    \n                public final String OVER = &quot;over.published&quot;;\n                public final String ADD = &quot;add.published&quot;;\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":4739783,"reputation":612632,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1626252239,"post_id":68374787,"comment_id":120840389,"body_markdown":"Replace `([^/\\s]+)` with `([^/\\s?#]+)`. Also, escape the literal dots in the pattern.","body":"Replace <code>([^&#47;\\s]+)</code> with <code>([^&#47;\\s?#]+)</code>. Also, escape the literal dots in the pattern."},{"owner":{"account_id":2366187,"reputation":60172,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":2,"creation_date":1626252349,"post_id":68374787,"comment_id":120840446,"body_markdown":"Why not use `URL` to parse your URL…?!","body":"Why not use <code>URL</code> to parse your URL…?!"},{"owner":{"display_name":"user15613889"},"score":0,"creation_date":1626252442,"post_id":68374787,"comment_id":120840494,"body_markdown":"Thank you Wiktor :) I have not used regex alot so alot of this is learning and playing around","body":"Thank you Wiktor :) I have not used regex alot so alot of this is learning and playing around"}],"answers":[{"tags":[],"owner":{"account_id":4739783,"reputation":612632,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1626253369,"creation_date":1626253369,"answer_id":68375080,"question_id":68374787,"body_markdown":"You can use\r\n```java\r\n^(?:https?://)?(?:www\\.)?(?:website\\.com)?/?([^/\\s?#]+)\r\n```\r\nSee the [regex demo][1]. *Details*:\r\n\r\n - `^` - start of string\r\n - `(?:https?://)?` - an optional occurrence of `http://` or `https://`\r\n - `(?:www\\.)?` - an optional occurrence of `www.` (note that the literal dot must be escaped)\r\n - `(?:website\\.com)?` - an optional occurrence of `website.com`\r\n - `/?` - an optional `/` char\r\n - `([^/\\s?#]+)` - Group 1: one or more chars other than `/`, whitespace, `?` and `#` chars.\r\n\r\n  [1]: https://regex101.com/r/TjbfUz/1/","title":"Extract username from url with regex","body":"<p>You can use</p>\n<pre class=\"lang-java prettyprint-override\"><code>^(?:https?://)?(?:www\\.)?(?:website\\.com)?/?([^/\\s?#]+)\n</code></pre>\n<p>See the <a href=\"https://regex101.com/r/TjbfUz/1/\" rel=\"nofollow noreferrer\">regex demo</a>. <em>Details</em>:</p>\n<ul>\n<li><code>^</code> - start of string</li>\n<li><code>(?:https?://)?</code> - an optional occurrence of <code>http://</code> or <code>https://</code></li>\n<li><code>(?:www\\.)?</code> - an optional occurrence of <code>www.</code> (note that the literal dot must be escaped)</li>\n<li><code>(?:website\\.com)?</code> - an optional occurrence of <code>website.com</code></li>\n<li><code>/?</code> - an optional <code>/</code> char</li>\n<li><code>([^/\\s?#]+)</code> - Group 1: one or more chars other than <code>/</code>, whitespace, <code>?</code> and <code>#</code> chars.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":25810178,"reputation":33,"user_id":19551084,"display_name":"RenatoL"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664876477,"creation_date":1664876477,"answer_id":73945976,"question_id":68374787,"body_markdown":"For anyone who is looking for this, you can use:\r\n\r\n    ^(?:(?:https?)?(?:\\:\\/\\/)?)?(?:\\w*\\.)?(?:\\w+)?.(?:\\w+)\\/(\\w+)$\r\n\r\nit will match subdomains as well:\r\n\r\n    https://website.com/username\r\n    http://website.com/username\r\n    https://www.website.com/username\r\n    http://website.com/username\r\n    www.website.com/username","title":"Extract username from url with regex","body":"<p>For anyone who is looking for this, you can use:</p>\n<pre><code>^(?:(?:https?)?(?:\\:\\/\\/)?)?(?:\\w*\\.)?(?:\\w+)?.(?:\\w+)\\/(\\w+)$\n</code></pre>\n<p>it will match subdomains as well:</p>\n<pre><code>https://website.com/username\nhttp://website.com/username\nhttps://www.website.com/username\nhttp://website.com/username\nwww.website.com/username\n</code></pre>\n"}],"owner":{"display_name":"user15613889"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":442,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":68375080,"answer_count":2,"score":0,"last_activity_date":1664876477,"creation_date":1626252152,"question_id":68374787,"body_markdown":"I am extracting usernames from urls using `^(?:https?://)?(?:www.)?(?:website.com)?/?([^/\\s]+)`. This method will return &quot;username?lang=en&quot;. How can i remove the &quot;?lang=en&quot; from the end ? ","title":"Extract username from url with regex","body":"<p>I am extracting usernames from urls using <code>^(?:https?://)?(?:www.)?(?:website.com)?/?([^/\\s]+)</code>. This method will return &quot;username?lang=en&quot;. How can i remove the &quot;?lang=en&quot; from the end ?</p>\n"},{"tags":["java","android","android-studio","kotlin","lombok"],"answers":[{"tags":[],"owner":{"account_id":19979093,"reputation":91,"user_id":14642689,"display_name":"Никулин Данил"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664876345,"creation_date":1644482665,"answer_id":71062098,"question_id":70955999,"body_markdown":"**EDIT:**\r\n\r\nfrom kotlin 1.7.20 with K2 compiler it is possible.\r\n\r\nhttps://kotlinlang.org/docs/whatsnew1720.html#support-for-kotlin-k2-compiler-plugins\r\n\r\n**OLD:**\r\n\r\nOk, I guess my problem somewhat solved. My project have mixed Kotlin\\Java code, I found this closed issue in project lombok: https://github.com/projectlombok/lombok/issues/1169\r\n\r\nCorresponding to this lombok cant work in Kotlin\\Java code normal way cause reasons... and there is two solutions:\r\n\r\n 1. Multi module project where all Java code with lobmok separated from Kotlin code and java module should using only java compiler.\r\n 2. Use special plugin from Kotlin which in part solving issue https://kotlinlang.org/docs/lombok.html\r\n\r\nAnother dum-dum solution: drop lombok annotation on java class and then using some instruments delombok it.This way no javac will be required.\r\n\r\n","title":"@Data from lombok in Android Studio doesn&#39;t work","body":"<p><strong>EDIT:</strong></p>\n<p>from kotlin 1.7.20 with K2 compiler it is possible.</p>\n<p><a href=\"https://kotlinlang.org/docs/whatsnew1720.html#support-for-kotlin-k2-compiler-plugins\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/whatsnew1720.html#support-for-kotlin-k2-compiler-plugins</a></p>\n<p><strong>OLD:</strong></p>\n<p>Ok, I guess my problem somewhat solved. My project have mixed Kotlin\\Java code, I found this closed issue in project lombok: <a href=\"https://github.com/projectlombok/lombok/issues/1169\" rel=\"nofollow noreferrer\">https://github.com/projectlombok/lombok/issues/1169</a></p>\n<p>Corresponding to this lombok cant work in Kotlin\\Java code normal way cause reasons... and there is two solutions:</p>\n<ol>\n<li>Multi module project where all Java code with lobmok separated from Kotlin code and java module should using only java compiler.</li>\n<li>Use special plugin from Kotlin which in part solving issue <a href=\"https://kotlinlang.org/docs/lombok.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/lombok.html</a></li>\n</ol>\n<p>Another dum-dum solution: drop lombok annotation on java class and then using some instruments delombok it.This way no javac will be required.</p>\n"}],"owner":{"account_id":19979093,"reputation":91,"user_id":14642689,"display_name":"Никулин Данил"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":489,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71062098,"answer_count":1,"score":0,"last_activity_date":1664876345,"creation_date":1643806493,"question_id":70955999,"body_markdown":"I have proper [dependencies][1]\r\n\r\n\r\nAnd lombok plugin was installed, so Android Studio know where generation was applied but i still got an [error][2]\r\n\r\nPlease can anyone give me idea what is happening?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mJx2X.png\r\n  [2]: https://i.stack.imgur.com/3DeNP.png","title":"@Data from lombok in Android Studio doesn&#39;t work","body":"<p>I have proper <a href=\"https://i.stack.imgur.com/mJx2X.png\" rel=\"nofollow noreferrer\">dependencies</a></p>\n<p>And lombok plugin was installed, so Android Studio know where generation was applied but i still got an <a href=\"https://i.stack.imgur.com/3DeNP.png\" rel=\"nofollow noreferrer\">error</a></p>\n<p>Please can anyone give me idea what is happening?</p>\n"},{"tags":["java","spring","spring-data-jpa","entitymanager","hibernate-entitymanager"],"answers":[{"tags":[],"owner":{"account_id":243084,"reputation":31440,"user_id":515034,"accept_rate":59,"display_name":"Abimaran Kugathasan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664876277,"creation_date":1664876277,"answer_id":73945931,"question_id":69378448,"body_markdown":"Let&#39;s say, you have a persistence-unit with the name `myData`\r\n\r\n    private EntityManager getEntityManager()    {\r\n        EntityManagerFactory emf = null;\r\n    \r\n        try {\r\n            emf = Persistence.createEntityManagerFactory(&quot;myData&quot;);\r\n        } catch (Exception e)   {\r\n            log.warn(&quot;An Error has occurred while creating persistence layer&quot;, e);\r\n        }\r\n    \r\n        if (emf != null) {\r\n            return emf.createEntityManager();\r\n        } else {\r\n            log.warn(&quot;An error has occurred while retrieving Entity Manager from Persistence factory&quot;);\r\n            return null;\r\n        }\r\n    }\r\n\r\nAnd use like below\r\n\r\n        final EntityManager em = getEntityManager();\r\n        assert em != null;\r\n        EntityTransaction entityTransaction = em.getTransaction();\r\n\r\n        try {\r\n            entityTransaction.begin();\r\n            userList.stream().forEach(user -&gt; {\r\n                em.merge(RestUtil.convertToDBUser(user));\r\n            });\r\n            entityTransaction.commit();\r\n            log.info(&quot;Completed data persistence &quot;);\r\n        } catch (RuntimeException e)    {\r\n            if (entityTransaction.isActive()) {\r\n                entityTransaction.rollback();\r\n            }\r\n            log.warn(&quot;An error has occurred while committing JDBC transaction. &quot;, e);\r\n            throw e;\r\n        } finally {\r\n            em.close();\r\n        }","title":"How to create Spring JPA Entity Manager manually that contains all the default JPA properties","body":"<p>Let's say, you have a persistence-unit with the name <code>myData</code></p>\n<pre><code>private EntityManager getEntityManager()    {\n    EntityManagerFactory emf = null;\n\n    try {\n        emf = Persistence.createEntityManagerFactory(&quot;myData&quot;);\n    } catch (Exception e)   {\n        log.warn(&quot;An Error has occurred while creating persistence layer&quot;, e);\n    }\n\n    if (emf != null) {\n        return emf.createEntityManager();\n    } else {\n        log.warn(&quot;An error has occurred while retrieving Entity Manager from Persistence factory&quot;);\n        return null;\n    }\n}\n</code></pre>\n<p>And use like below</p>\n<pre><code>    final EntityManager em = getEntityManager();\n    assert em != null;\n    EntityTransaction entityTransaction = em.getTransaction();\n\n    try {\n        entityTransaction.begin();\n        userList.stream().forEach(user -&gt; {\n            em.merge(RestUtil.convertToDBUser(user));\n        });\n        entityTransaction.commit();\n        log.info(&quot;Completed data persistence &quot;);\n    } catch (RuntimeException e)    {\n        if (entityTransaction.isActive()) {\n            entityTransaction.rollback();\n        }\n        log.warn(&quot;An error has occurred while committing JDBC transaction. &quot;, e);\n        throw e;\n    } finally {\n        em.close();\n    }\n</code></pre>\n"}],"owner":{"account_id":26448,"reputation":5911,"user_id":68759,"accept_rate":79,"display_name":"His"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":837,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1664876277,"creation_date":1632926055,"question_id":69378448,"body_markdown":"I need to create an Entity Manager manually to support having multiple datasources.  I&#39;ve realised that by creating it manually (instead of autowiring it as when you have only one single datasource), I actually do need to set all the JPA properties manually too, including what are usually set with default values by Spring.  This means all the JPA parameters I specified in `application.yaml` and what Spring normally set default values for have now to be loaded and set manually.\r\n\r\nIs there anyway to create an Entity Manager manually but have it automatically use all the JPA properties in `application.yaml`?\r\n\r\nHere&#39;s my code\r\n```\r\npublic LocalContainerEntityManagerFactoryBean entityManager(EntityManagerFactoryBuilder builder, DataSource secondDataSource) {\r\n    Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n\r\n    // Is there a way to not do this one by one for all of the default JPA properties and what I specified in application.yaml?\r\n    props.put(&quot;hibernate.physical_naming_strategy&quot;, &quot;org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy&quot;);\r\n    // props.put(&quot;prop1&quot;, &quot;propvalue1&quot;);\r\n    // ...\r\n\r\n\r\n    return builder.dataSource(secondDataSource).packages(MyEntity.class).properties(props).build();\r\n}\r\n```","title":"How to create Spring JPA Entity Manager manually that contains all the default JPA properties","body":"<p>I need to create an Entity Manager manually to support having multiple datasources.  I've realised that by creating it manually (instead of autowiring it as when you have only one single datasource), I actually do need to set all the JPA properties manually too, including what are usually set with default values by Spring.  This means all the JPA parameters I specified in <code>application.yaml</code> and what Spring normally set default values for have now to be loaded and set manually.</p>\n<p>Is there anyway to create an Entity Manager manually but have it automatically use all the JPA properties in <code>application.yaml</code>?</p>\n<p>Here's my code</p>\n<pre><code>public LocalContainerEntityManagerFactoryBean entityManager(EntityManagerFactoryBuilder builder, DataSource secondDataSource) {\n    Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n\n    // Is there a way to not do this one by one for all of the default JPA properties and what I specified in application.yaml?\n    props.put(&quot;hibernate.physical_naming_strategy&quot;, &quot;org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy&quot;);\n    // props.put(&quot;prop1&quot;, &quot;propvalue1&quot;);\n    // ...\n\n\n    return builder.dataSource(secondDataSource).packages(MyEntity.class).properties(props).build();\n}\n</code></pre>\n"},{"tags":["java","string"],"answers":[{"tags":[],"owner":{"account_id":1023013,"reputation":16655,"user_id":1032890,"accept_rate":100,"display_name":"GeertPt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664876186,"creation_date":1664876186,"answer_id":73945907,"question_id":73945428,"body_markdown":"Space complexity are the same for both.\r\n\r\nIn the second approach, you have the removeSpace array, which seems like it duplicates the whole string, but internally it just contains substrings of the original string, which does not duplicate anything.\r\n\r\nFor time complexity, it depends on the compiler. Appending characters one at a time to strings (in approach 2) can be expensive, since it could allocate new String objects everytime. The compiler may be smart enough in this case to optimize that.\r\n\r\nBetter to use StringBuilder in approach 2, then the time complexity will be the same for both, I think.\r\n\r\nSee also https://stackoverflow.com/questions/7766386/how-many-string-additions-do-you-need-for-a-stringbuilder-to-be-more-efficient","title":"What is the best approach for time &amp; space complexity for string word reversal","body":"<p>Space complexity are the same for both.</p>\n<p>In the second approach, you have the removeSpace array, which seems like it duplicates the whole string, but internally it just contains substrings of the original string, which does not duplicate anything.</p>\n<p>For time complexity, it depends on the compiler. Appending characters one at a time to strings (in approach 2) can be expensive, since it could allocate new String objects everytime. The compiler may be smart enough in this case to optimize that.</p>\n<p>Better to use StringBuilder in approach 2, then the time complexity will be the same for both, I think.</p>\n<p>See also <a href=\"https://stackoverflow.com/questions/7766386/how-many-string-additions-do-you-need-for-a-stringbuilder-to-be-more-efficient\">How many string additions do you need for a StringBuilder to be more efficient?</a></p>\n"}],"owner":{"account_id":26523446,"reputation":11,"user_id":20156778,"display_name":"Akshay Hukire"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":73945907,"answer_count":1,"score":-2,"last_activity_date":1664876186,"creation_date":1664874029,"question_id":73945428,"body_markdown":"What should be the best approach when it comes to time &amp; space complexity? Approach 1 or 2?\r\n\r\nApproach 1: \r\n\r\n    Stack&lt;Character&gt; st = new Stack&lt;Character&gt;();\r\n    for (int i = 0; i &lt; str.length(); ++i) {\r\n    \tif (str.charAt(i) != &#39; &#39;)\r\n   \t    \tst.push(str.charAt(i));\r\n\t\telse {\r\n\t\t\twhile (st.empty() == false) {\r\n\t\t\t\tSystem.out.print(st.pop());\r\n    \t\t}\r\n\t\t\tSystem.out.print(&quot; &quot;);\r\n\t\t}\r\n\t}\r\n\twhile (st.empty() == false) {\r\n\t\tSystem.out.print(st.pop());\r\n\t}\r\n\r\nApproach 2:\r\n\r\n    String welcomeString = &quot;Welcome to Zscaler&quot;;\r\n\tString removeSpace[] = welcomeString.split(&quot; &quot;);\r\n\tString reversedString = &quot;&quot;;\r\n\tfor (int i = 0; i &lt; removeSpace.length; i++) {\r\n\t\tString getString = removeSpace[i];\r\n\t\treversedString = &quot;&quot;;\r\n\t\tfor (int j = getString.length() - 1; j &gt;= 0; j--) {\r\n\t\t\treversedString = reversedString + getString.charAt(j);\r\n\t\t}\r\n\t\tSystem.out.print(reversedString + &quot; &quot;);\r\n\t}\r\n\r\n","title":"What is the best approach for time &amp; space complexity for string word reversal","body":"<p>What should be the best approach when it comes to time &amp; space complexity? Approach 1 or 2?</p>\n<p>Approach 1:</p>\n<pre><code>Stack&lt;Character&gt; st = new Stack&lt;Character&gt;();\nfor (int i = 0; i &lt; str.length(); ++i) {\n    if (str.charAt(i) != ' ')\n        st.push(str.charAt(i));\n    else {\n        while (st.empty() == false) {\n            System.out.print(st.pop());\n        }\n        System.out.print(&quot; &quot;);\n    }\n}\nwhile (st.empty() == false) {\n    System.out.print(st.pop());\n}\n</code></pre>\n<p>Approach 2:</p>\n<pre><code>String welcomeString = &quot;Welcome to Zscaler&quot;;\nString removeSpace[] = welcomeString.split(&quot; &quot;);\nString reversedString = &quot;&quot;;\nfor (int i = 0; i &lt; removeSpace.length; i++) {\n    String getString = removeSpace[i];\n    reversedString = &quot;&quot;;\n    for (int j = getString.length() - 1; j &gt;= 0; j--) {\n        reversedString = reversedString + getString.charAt(j);\n    }\n    System.out.print(reversedString + &quot; &quot;);\n}\n</code></pre>\n"},{"tags":["java","localization","clipboard"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1662992811,"post_id":73687411,"comment_id":130128398,"body_markdown":"Are you sure that error is due to the use of a Japanese locale?  It looks like an issue with the way the application was packaged.  Does the exact same application work properly on the same machine if the locale is set to English?","body":"Are you sure that error is due to the use of a Japanese locale?  It looks like an issue with the way the application was packaged.  Does the exact same application work properly on the same machine if the locale is set to English?"},{"owner":{"account_id":23418359,"reputation":13,"user_id":17478980,"display_name":"stojelenov"},"score":0,"creation_date":1663050372,"post_id":73687411,"comment_id":130141327,"body_markdown":"@VGR, thanks for your comment. I am sure, screenshot is created and I get no error if locale is set to English. Both: path and locale have to be Japan, then I get the error.","body":"@VGR, thanks for your comment. I am sure, screenshot is created and I get no error if locale is set to English. Both: path and locale have to be Japan, then I get the error."}],"owner":{"account_id":23418359,"reputation":13,"user_id":17478980,"display_name":"stojelenov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664876155,"creation_date":1662976255,"question_id":73687411,"body_markdown":"I do have got a button in my app to create snapshot from 3D scene. However, if my app runs from Japanese **path**, e.g. `F:\\テスト\\myApp\\bin`, and **system locale** is set to Japan, clipboard is not created. While calling `java.awt.datatransfer.Clipboard.setContents`, I have got:\r\n\r\n    Exception in thread &quot;main-FPSAWTAnimator-Timer0&quot; java.lang.UnsatisfiedLinkError: \r\n    F:\\テスト\\myApp\\bin\\jre\\bin\\jpeg.dll: Can&#39;t find dependent libraries\r\n            at java.lang.ClassLoader$NativeLibrary.load(Native Method)\r\n            at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1941)\r\n            at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1845)\r\n            at java.lang.Runtime.loadLibrary0(Runtime.java:870)\r\n            at java.lang.System.loadLibrary(System.java:1122)\r\n            at com.sun.imageio.plugins.jpeg.JPEGImageWriter$1.run(JPEGImageWriter.java:180)\r\n            at com.sun.imageio.plugins.jpeg.JPEGImageWriter$1.run(JPEGImageWriter.java:178)\r\n            at java.security.AccessController.doPrivileged(Native Method)\r\n            at com.sun.imageio.plugins.jpeg.JPEGImageWriter.&lt;clinit&gt;(JPEGImageWriter.java:177)\r\n            at com.sun.imageio.plugins.jpeg.JPEGImageWriterSpi.createWriterInstance(JPEGImageWriterSpi.java:96)\r\n            at javax.imageio.spi.ImageWriterSpi.createWriterInstance(ImageWriterSpi.java:351)\r\n            at javax.imageio.ImageIO$ImageWriterIterator.next(ImageIO.java:843)\r\n            at javax.imageio.ImageIO$ImageWriterIterator.next(ImageIO.java:827)\r\n            at sun.awt.datatransfer.DataTransferer.imageToStandardBytesImpl(DataTransferer.java:2203)\r\n            at sun.awt.datatransfer.DataTransferer.imageToStandardBytes(DataTransferer.java:2145)\r\n            at sun.awt.windows.WDataTransferer.imageToPlatformBytes(WDataTransferer.java:352)\r\n            at sun.awt.datatransfer.DataTransferer.translateTransferable(DataTransferer.java:1223)\r\n            at sun.awt.windows.WDataTransferer.translateTransferable(WDataTransferer.java:219)\r\n            at sun.awt.windows.WClipboard.setContentsNative(WClipboard.java:83)\r\n            at sun.awt.datatransfer.SunClipboard.setContents(SunClipboard.java:106)\r\n            at myApp.javabase.utils.c.&lt;init&gt;(Unknown Source)\r\n\r\nI tried `System.setProperty(&quot;sybase.allow.native.lib&quot;, &quot;true&quot;)`, this works for debug and local build, but not for release build. \r\nIn release, there are compiled dlls (39) in `bin` folder. If I delete at least one of them (any of them; tested 4 dlls) or all of them, I get no error - this is strange.\r\n\r\nAnother workaround is to install Java on path without Japanese characters and add this path to environment variables, but this is not what I need. Not all users have application installed locally.\r\n\r\n\r\nCode:\r\n\r\n    package myApp.javabase.utils;\r\n\r\n    import java.awt.Image;\r\n    import java.awt.Toolkit;\r\n    import java.awt.datatransfer.Clipboard;\r\n    import java.awt.datatransfer.ClipboardOwner;\r\n    import java.awt.datatransfer.DataFlavor;\r\n    import java.awt.datatransfer.Transferable;\r\n    import java.awt.datatransfer.UnsupportedFlavorException;\r\n    import java.io.IOException;\r\n    \r\n    public class ClipboardImage implements ClipboardOwner\r\n    {\r\n      public ClipboardImage( Image img )\r\n      {\r\n        TransferableImage trImg = new TransferableImage( img );\r\n        Clipboard cb = Toolkit.getDefaultToolkit().getSystemClipboard();\r\n        \r\n        // allow native library -&gt; java.lang.ClassLoader.loadLibrary0\r\n        //System.setProperty(&quot;sybase.allow.native.lib&quot;, &quot;true&quot;);\r\n        cb.setContents( trImg, this ); // here is the problem\r\n      }\r\n      // another code\r\n    }\r\n\r\nI did find [this][1], `System.load(File)` to load the library, but is it necessary? Might be there other solution?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2937406/how-to-bundle-a-native-library-and-a-jni-library-inside-a-jar","title":"java.awt.datatransfer.Clipboard.setContents does not work from Japanese path","body":"<p>I do have got a button in my app to create snapshot from 3D scene. However, if my app runs from Japanese <strong>path</strong>, e.g. <code>F:\\テスト\\myApp\\bin</code>, and <strong>system locale</strong> is set to Japan, clipboard is not created. While calling <code>java.awt.datatransfer.Clipboard.setContents</code>, I have got:</p>\n<pre><code>Exception in thread &quot;main-FPSAWTAnimator-Timer0&quot; java.lang.UnsatisfiedLinkError: \nF:\\テスト\\myApp\\bin\\jre\\bin\\jpeg.dll: Can't find dependent libraries\n        at java.lang.ClassLoader$NativeLibrary.load(Native Method)\n        at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1941)\n        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1845)\n        at java.lang.Runtime.loadLibrary0(Runtime.java:870)\n        at java.lang.System.loadLibrary(System.java:1122)\n        at com.sun.imageio.plugins.jpeg.JPEGImageWriter$1.run(JPEGImageWriter.java:180)\n        at com.sun.imageio.plugins.jpeg.JPEGImageWriter$1.run(JPEGImageWriter.java:178)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at com.sun.imageio.plugins.jpeg.JPEGImageWriter.&lt;clinit&gt;(JPEGImageWriter.java:177)\n        at com.sun.imageio.plugins.jpeg.JPEGImageWriterSpi.createWriterInstance(JPEGImageWriterSpi.java:96)\n        at javax.imageio.spi.ImageWriterSpi.createWriterInstance(ImageWriterSpi.java:351)\n        at javax.imageio.ImageIO$ImageWriterIterator.next(ImageIO.java:843)\n        at javax.imageio.ImageIO$ImageWriterIterator.next(ImageIO.java:827)\n        at sun.awt.datatransfer.DataTransferer.imageToStandardBytesImpl(DataTransferer.java:2203)\n        at sun.awt.datatransfer.DataTransferer.imageToStandardBytes(DataTransferer.java:2145)\n        at sun.awt.windows.WDataTransferer.imageToPlatformBytes(WDataTransferer.java:352)\n        at sun.awt.datatransfer.DataTransferer.translateTransferable(DataTransferer.java:1223)\n        at sun.awt.windows.WDataTransferer.translateTransferable(WDataTransferer.java:219)\n        at sun.awt.windows.WClipboard.setContentsNative(WClipboard.java:83)\n        at sun.awt.datatransfer.SunClipboard.setContents(SunClipboard.java:106)\n        at myApp.javabase.utils.c.&lt;init&gt;(Unknown Source)\n</code></pre>\n<p>I tried <code>System.setProperty(&quot;sybase.allow.native.lib&quot;, &quot;true&quot;)</code>, this works for debug and local build, but not for release build.\nIn release, there are compiled dlls (39) in <code>bin</code> folder. If I delete at least one of them (any of them; tested 4 dlls) or all of them, I get no error - this is strange.</p>\n<p>Another workaround is to install Java on path without Japanese characters and add this path to environment variables, but this is not what I need. Not all users have application installed locally.</p>\n<p>Code:</p>\n<pre><code>package myApp.javabase.utils;\n\nimport java.awt.Image;\nimport java.awt.Toolkit;\nimport java.awt.datatransfer.Clipboard;\nimport java.awt.datatransfer.ClipboardOwner;\nimport java.awt.datatransfer.DataFlavor;\nimport java.awt.datatransfer.Transferable;\nimport java.awt.datatransfer.UnsupportedFlavorException;\nimport java.io.IOException;\n\npublic class ClipboardImage implements ClipboardOwner\n{\n  public ClipboardImage( Image img )\n  {\n    TransferableImage trImg = new TransferableImage( img );\n    Clipboard cb = Toolkit.getDefaultToolkit().getSystemClipboard();\n    \n    // allow native library -&gt; java.lang.ClassLoader.loadLibrary0\n    //System.setProperty(&quot;sybase.allow.native.lib&quot;, &quot;true&quot;);\n    cb.setContents( trImg, this ); // here is the problem\n  }\n  // another code\n}\n</code></pre>\n<p>I did find <a href=\"https://stackoverflow.com/questions/2937406/how-to-bundle-a-native-library-and-a-jni-library-inside-a-jar\">this</a>, <code>System.load(File)</code> to load the library, but is it necessary? Might be there other solution?</p>\n"},{"tags":["java","oop","inheritance","design-patterns","visitor-pattern"],"answers":[{"comments":[{"owner":{"account_id":13816660,"reputation":139,"user_id":9973101,"display_name":"Gopikrishna K S"},"score":0,"creation_date":1664789247,"post_id":73932925,"comment_id":130543975,"body_markdown":"Thanks for the answer, could you please tell why you think it is overkill, you mean it is okay to use instanceOf if the number of if conditions are small in number and this visitor pattern is only required when there are many if conditions?","body":"Thanks for the answer, could you please tell why you think it is overkill, you mean it is okay to use instanceOf if the number of if conditions are small in number and this visitor pattern is only required when there are many if conditions?"},{"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"score":0,"creation_date":1664812531,"post_id":73932925,"comment_id":130551508,"body_markdown":"No I don&#39;t think you should use instanceOf to solve this - that&#39;s a bad code smell. But I don&#39;t know which problem you are exactly trying to solve. If the domain is simple and the number of cases is small it might be possible to achieve what you want with less code constructs. To know that, I would need some more background information.","body":"No I don&#39;t think you should use instanceOf to solve this - that&#39;s a bad code smell. But I don&#39;t know which problem you are exactly trying to solve. If the domain is simple and the number of cases is small it might be possible to achieve what you want with less code constructs. To know that, I would need some more background information."},{"owner":{"account_id":13816660,"reputation":139,"user_id":9973101,"display_name":"Gopikrishna K S"},"score":0,"creation_date":1664813447,"post_id":73932925,"comment_id":130551776,"body_markdown":"Thanks, could you please tell what more information exactly you need? I thought I added the information needed in the question which is to iterate over a list of interface objects and call a function for each, but this function is only possible for some of the implementations not all.","body":"Thanks, could you please tell what more information exactly you need? I thought I added the information needed in the question which is to iterate over a list of interface objects and call a function for each, but this function is only possible for some of the implementations not all."},{"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"score":0,"creation_date":1664873757,"post_id":73932925,"comment_id":130564381,"body_markdown":"Your question is very broad: &quot;Is there any issue with this approach?&quot;. To know if the approach is good, we need to know which problem we are solving. You didn&#39;t present us with the problem, but only with the solution you came up with. So how many restriction types are there? What do they do? How different are they? Why is the first round validation completely general but the second round specific per restriction type? Is the process of first round/second round still up for debate, or is that fixed? Could the concerns of injecting/calling dependencies and validation maybe better be extracted?","body":"Your question is very broad: &quot;Is there any issue with this approach?&quot;. To know if the approach is good, we need to know which problem we are solving. You didn&#39;t present us with the problem, but only with the solution you came up with. So how many restriction types are there? What do they do? How different are they? Why is the first round validation completely general but the second round specific per restriction type? Is the process of first round/second round still up for debate, or is that fixed? Could the concerns of injecting/calling dependencies and validation maybe better be extracted?"}],"tags":[],"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664875768,"creation_date":1664786153,"answer_id":73932925,"question_id":73931739,"body_markdown":"Pattern-wise I don&#39;t think there is a problem. visitRestrictionBasic is only empty because apparently you don&#39;t have second round validation for basic restrictions. This is a business rule, not a flaw of the design. If you later decide that you DO want second round validation for basic restrictions, you know where you can add it.\r\n\r\nApart from that, the whole set up might be overkill. It&#39;s usually good to start off simple. But I don&#39;t know your complete domain and use case, so cannot judge if this is the case here.\r\n\r\nEDIT: To evaluate your approach we should get more context and take a step back to understand the problem. So far what I understand is there are several restriction types which have the following characteristics:\r\n\r\n* each restriction has a fixed groups of dependencies\r\n* a restriction extracts values from these dependencies into its fields\r\n* each restriction performs two rounds of validation on these fields\r\n* the first round validation is implemented in each restriction type\r\n* the second round validation is also specific per restriction type, but implemented in the form of a separate visitor\r\n\r\nThe fundamental difference between the first round and second round validation is not clear to me. Both of them have specific validation code for each restriction type if I understand it correctly. If not, and the basic validator is only used in the first round, and the advanced validator only in the second round, then the model could probably be simplified. In that case first round = basic and second round = advanced...","title":"How to avoid empty visit functions in visitor pattern?","body":"<p>Pattern-wise I don't think there is a problem. visitRestrictionBasic is only empty because apparently you don't have second round validation for basic restrictions. This is a business rule, not a flaw of the design. If you later decide that you DO want second round validation for basic restrictions, you know where you can add it.</p>\n<p>Apart from that, the whole set up might be overkill. It's usually good to start off simple. But I don't know your complete domain and use case, so cannot judge if this is the case here.</p>\n<p>EDIT: To evaluate your approach we should get more context and take a step back to understand the problem. So far what I understand is there are several restriction types which have the following characteristics:</p>\n<ul>\n<li>each restriction has a fixed groups of dependencies</li>\n<li>a restriction extracts values from these dependencies into its fields</li>\n<li>each restriction performs two rounds of validation on these fields</li>\n<li>the first round validation is implemented in each restriction type</li>\n<li>the second round validation is also specific per restriction type, but implemented in the form of a separate visitor</li>\n</ul>\n<p>The fundamental difference between the first round and second round validation is not clear to me. Both of them have specific validation code for each restriction type if I understand it correctly. If not, and the basic validator is only used in the first round, and the advanced validator only in the second round, then the model could probably be simplified. In that case first round = basic and second round = advanced...</p>\n"},{"comments":[{"owner":{"account_id":13816660,"reputation":139,"user_id":9973101,"display_name":"Gopikrishna K S"},"score":0,"creation_date":1664799285,"post_id":73934964,"comment_id":130546803,"body_markdown":"Sorry I don&#39;t get it. I have already given this only or the following in my question right?\n\n```\ninterface ValidationVisitor {\n    void visitRestrictionBasic(RestrictionBasic restrictionBasic);\n    void visitRestrictionAdvanced(RestrictionAdvanced restrictionAdvanced);\n}\n```","body":"Sorry I don&#39;t get it. I have already given this only or the following in my question right?  ``` interface ValidationVisitor {     void visitRestrictionBasic(RestrictionBasic restrictionBasic);     void visitRestrictionAdvanced(RestrictionAdvanced restrictionAdvanced); } ```"},{"owner":{"account_id":13816660,"reputation":139,"user_id":9973101,"display_name":"Gopikrishna K S"},"score":0,"creation_date":1664801122,"post_id":73934964,"comment_id":130547486,"body_markdown":"Oh sry got it, I missed using same overloading the function and instead used separate function. Thanks for catching, could you please tell if there is some other issue in the approach overall and some other approach is better?","body":"Oh sry got it, I missed using same overloading the function and instead used separate function. Thanks for catching, could you please tell if there is some other issue in the approach overall and some other approach is better?"},{"owner":{"account_id":13816660,"reputation":139,"user_id":9973101,"display_name":"Gopikrishna K S"},"score":0,"creation_date":1664806994,"post_id":73934964,"comment_id":130549630,"body_markdown":"Empty function is required to add `accept(SecondRoundValidationVisitor secondRoundValidationVisitor)` in the interface right? And this is required for iterating and calling specific functions not there in some classes without using instanceOf.","body":"Empty function is required to add <code>accept(SecondRoundValidationVisitor secondRoundValidationVisitor)</code> in the interface right? And this is required for iterating and calling specific functions not there in some classes without using instanceOf."},{"owner":{"account_id":1809965,"reputation":36736,"user_id":1646240,"accept_rate":91,"display_name":"StepUp"},"score":0,"creation_date":1664811640,"post_id":73934964,"comment_id":130551185,"body_markdown":"@GopikrishnaKS  so I have just one improvement. Please, see my updated answer. Thanks!","body":"@GopikrishnaKS  so I have just one improvement. Please, see my updated answer. Thanks!"}],"tags":[],"owner":{"account_id":1809965,"reputation":36736,"user_id":1646240,"accept_rate":91,"display_name":"StepUp"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664811583,"creation_date":1664797541,"answer_id":73934964,"question_id":73931739,"body_markdown":"Visitor pattern uses overloading of methods to choose appropriate implementation. It can be seen in a [wiki example][1]:\r\n\r\n\tinterface CarElementVisitor {\r\n\t\tvoid visit(Body body);\r\n\t\tvoid visit(Car car);\r\n\t\tvoid visit(Engine engine);\r\n\t\tvoid visit(Wheel wheel);\r\n\t}\r\n\r\n\r\nSo I would edit interface `ValidationVisitor`:\r\n\r\n    interface ValidationVisitor {\r\n        void visitRestrictionBasic(RestrictionBasic restrictionBasic);\r\n        void visitRestrictionAdvanced(RestrictionAdvanced restrictionAdvanced);\r\n    }\r\n\r\nto this:\r\n\r\n\r\n\tpublic interface ValidationVisitor\r\n\t{\r\n\t\tvoid VisitRestriction(RestrictionBasic restrictionBasic);\r\n\t\t\r\n\t\tvoid VisitRestriction(RestrictionAdvanced restrictionAdvanced);\r\n\t}\r\n\r\nSo we have created `VisitRestriction()` with different overloads.\r\n\r\nWhy? If you don&#39;t know the type of the object? You probably would need to find out the real type of `Restriction` and then call `VisitRestrictionBasic` or `VisitRestrictionAdvanced`. I highly recommend you to read this very nice answer about *[What&#39;s the point of the `accept` method][2]*?\r\n\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Visitor_pattern\r\n  [2]: https://softwareengineering.stackexchange.com/a/412367/202970\r\n","title":"How to avoid empty visit functions in visitor pattern?","body":"<p>Visitor pattern uses overloading of methods to choose appropriate implementation. It can be seen in a <a href=\"https://en.wikipedia.org/wiki/Visitor_pattern\" rel=\"nofollow noreferrer\">wiki example</a>:</p>\n<pre><code>interface CarElementVisitor {\n    void visit(Body body);\n    void visit(Car car);\n    void visit(Engine engine);\n    void visit(Wheel wheel);\n}\n</code></pre>\n<p>So I would edit interface <code>ValidationVisitor</code>:</p>\n<pre><code>interface ValidationVisitor {\n    void visitRestrictionBasic(RestrictionBasic restrictionBasic);\n    void visitRestrictionAdvanced(RestrictionAdvanced restrictionAdvanced);\n}\n</code></pre>\n<p>to this:</p>\n<pre><code>public interface ValidationVisitor\n{\n    void VisitRestriction(RestrictionBasic restrictionBasic);\n    \n    void VisitRestriction(RestrictionAdvanced restrictionAdvanced);\n}\n</code></pre>\n<p>So we have created <code>VisitRestriction()</code> with different overloads.</p>\n<p>Why? If you don't know the type of the object? You probably would need to find out the real type of <code>Restriction</code> and then call <code>VisitRestrictionBasic</code> or <code>VisitRestrictionAdvanced</code>. I highly recommend you to read this very nice answer about <em><a href=\"https://softwareengineering.stackexchange.com/a/412367/202970\">What's the point of the <code>accept</code> method</a></em>?</p>\n"}],"owner":{"account_id":13816660,"reputation":139,"user_id":9973101,"display_name":"Gopikrishna K S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":223,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1664875768,"creation_date":1664778045,"question_id":73931739,"body_markdown":"I have the following use case. I have a restriction interface that needs to fill its members from dependencies, do the validations. These methods are applicable for all implementations and hence it is fine till now. Some restrictions require some other validation later. In the main function, I want to loop over each of the restriction and call the methods in a general way instead of using instanceOf and then calling. I think this might be a use case of visitor pattern as mentioned [here](https://refactoring.guru/design-patterns/visitor#:~:text=Use%20the%20pattern%20when%20a%20behavior%20makes%20sense%20only%20in%20some%20classes%20of%20a%20class%20hierarchy%2C%20but%20not%20in%20others.). Now I have the following classes.\r\n\r\n```\r\ninterface Restriction() {\r\n    void fillFields();\r\n    void firstRoundValidation();\r\n    void accept(SecondRoundValidationVisitor secondRoundValidationVisitor);\r\n}\r\n```\r\n\r\n```\r\nclass RestrictionBasic implements Restriction {\r\n    Field field;\r\n\r\n    // Inject dependencies\r\n\r\n    @Override\r\n    void fillFields() {\r\n        // Get field from dependencies\r\n    }\r\n\r\n    void firstRoundValidation() {\r\n        // Implement\r\n    }\r\n\r\n    @void accept(SecondRoundValidationVisitor secondRoundValidationVisitor) {\r\n        secondRoundValidationVisitor.visitRestrictionBasic(this);\r\n    }\r\n}\r\n```\r\n\r\n```\r\nclass RestrictionAdvanced implements Restriction {\r\n\r\n    // Same as above except below function.\r\n\r\n    @void accept(SecondRoundValidationVisitor secondRoundValidationVisitor) {\r\n        secondRoundValidationVisitor.visitRestrictionAdvanced(this);\r\n    }\r\n}\r\n```\r\n\r\n```\r\ninterface ValidationVisitor {\r\n    void visitRestriction(RestrictionBasic restrictionBasic);\r\n    void visitRestriction(RestrictionAdvanced restrictionAdvanced);\r\n}\r\n```\r\n\r\n```\r\nclass SecondRoundValidationVisitor implements ValidationVisitor {\r\n    @Override\r\n    void visitRestriction(RestrictionBasic restrictionBasic) {\r\n        // Empty function\r\n    }\r\n\r\n    @Override\r\n    void visitRestriction(RestrictionAdvanced restrictionAdvanced) {\r\n        // Perform second level of validation\r\n    }\r\n}\r\n```\r\n\r\n```\r\nclass Main() {\r\n    List&lt;Restriction&gt; restrictionList = new ArrayList();\r\n    ValidationVisitor validationVisitor = new SecondRoundValidationVisitor();\r\n    for (restriction : restrictionList) {\r\n        restriction.accept(validationVisitor)\r\n    }\r\n}\r\n```\r\nCould you please tell if there is any issue with this approach? There is also another approach where getSecondValidationNeeded() could be added to the interface and based on that, call secondValidation with default value of empty body. But this is not following interface segregation principle. My doubt is how does visitor pattern solve this issue? Even in visitor pattern, there is only one interface and accept is being added in base interface even when only some visitors have non empty visit functions.","title":"How to avoid empty visit functions in visitor pattern?","body":"<p>I have the following use case. I have a restriction interface that needs to fill its members from dependencies, do the validations. These methods are applicable for all implementations and hence it is fine till now. Some restrictions require some other validation later. In the main function, I want to loop over each of the restriction and call the methods in a general way instead of using instanceOf and then calling. I think this might be a use case of visitor pattern as mentioned <a href=\"https://refactoring.guru/design-patterns/visitor#:%7E:text=Use%20the%20pattern%20when%20a%20behavior%20makes%20sense%20only%20in%20some%20classes%20of%20a%20class%20hierarchy%2C%20but%20not%20in%20others.\" rel=\"nofollow noreferrer\">here</a>. Now I have the following classes.</p>\n<pre><code>interface Restriction() {\n    void fillFields();\n    void firstRoundValidation();\n    void accept(SecondRoundValidationVisitor secondRoundValidationVisitor);\n}\n</code></pre>\n<pre><code>class RestrictionBasic implements Restriction {\n    Field field;\n\n    // Inject dependencies\n\n    @Override\n    void fillFields() {\n        // Get field from dependencies\n    }\n\n    void firstRoundValidation() {\n        // Implement\n    }\n\n    @void accept(SecondRoundValidationVisitor secondRoundValidationVisitor) {\n        secondRoundValidationVisitor.visitRestrictionBasic(this);\n    }\n}\n</code></pre>\n<pre><code>class RestrictionAdvanced implements Restriction {\n\n    // Same as above except below function.\n\n    @void accept(SecondRoundValidationVisitor secondRoundValidationVisitor) {\n        secondRoundValidationVisitor.visitRestrictionAdvanced(this);\n    }\n}\n</code></pre>\n<pre><code>interface ValidationVisitor {\n    void visitRestriction(RestrictionBasic restrictionBasic);\n    void visitRestriction(RestrictionAdvanced restrictionAdvanced);\n}\n</code></pre>\n<pre><code>class SecondRoundValidationVisitor implements ValidationVisitor {\n    @Override\n    void visitRestriction(RestrictionBasic restrictionBasic) {\n        // Empty function\n    }\n\n    @Override\n    void visitRestriction(RestrictionAdvanced restrictionAdvanced) {\n        // Perform second level of validation\n    }\n}\n</code></pre>\n<pre><code>class Main() {\n    List&lt;Restriction&gt; restrictionList = new ArrayList();\n    ValidationVisitor validationVisitor = new SecondRoundValidationVisitor();\n    for (restriction : restrictionList) {\n        restriction.accept(validationVisitor)\n    }\n}\n</code></pre>\n<p>Could you please tell if there is any issue with this approach? There is also another approach where getSecondValidationNeeded() could be added to the interface and based on that, call secondValidation with default value of empty body. But this is not following interface segregation principle. My doubt is how does visitor pattern solve this issue? Even in visitor pattern, there is only one interface and accept is being added in base interface even when only some visitors have non empty visit functions.</p>\n"},{"tags":["java","gradle","build.gradle","multi-module"],"comments":[{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1664875828,"post_id":73945664,"comment_id":130565029,"body_markdown":"You say &quot;while upgrading&quot;: **what exactly** did you change between the last successful build and when this error message first showed up? You mention upgrading both Gradle *and* Java, which I&#39;d discourage: pick and order and update one after the other, verifying that everything still works in between.","body":"You say &quot;while upgrading&quot;: <b>what exactly</b> did you change between the last successful build and when this error message first showed up? You mention upgrading both Gradle <i>and</i> Java, which I&#39;d discourage: pick and order and update one after the other, verifying that everything still works in between."},{"owner":{"account_id":10315992,"reputation":394,"user_id":7610305,"accept_rate":50,"display_name":"Shubham kapoor"},"score":0,"creation_date":1664876742,"post_id":73945664,"comment_id":130565312,"body_markdown":"I just changed the gradle and java version while building the code. Also earlier I was using old eclipse and now I have moved to the new one which support java 11, so when I imported my project into recent eclipse it was not showing project in the correct format hence i used the eclipse plugin in allprojects{} to import it in correct way. \n\nAs you suggested I moved back my java to 8 and try to build code with gradle 5 and java8 and got the same error.","body":"I just changed the gradle and java version while building the code. Also earlier I was using old eclipse and now I have moved to the new one which support java 11, so when I imported my project into recent eclipse it was not showing project in the correct format hence i used the eclipse plugin in allprojects{} to import it in correct way.   As you suggested I moved back my java to 8 and try to build code with gradle 5 and java8 and got the same error."}],"owner":{"account_id":10315992,"reputation":394,"user_id":7610305,"accept_rate":50,"display_name":"Shubham kapoor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":660,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1664875742,"creation_date":1664875152,"question_id":73945664,"body_markdown":"I am trying to upgrade gradle from 4.5 to gradle 5.0 and java8 to java11. I have multimodule project(backend and frontend) and root project gradle looks like below\r\n\r\n\r\n\r\n        apply plugin: &#39;maven-publish&#39;\r\n        apply plugin: &#39;java&#39;\r\n         \r\n        def mavenArtifactId = &#39;root-project-name&#39;\r\n        group = &#39;com.root.project&#39;\r\n        \r\n        allprojects {\r\n        \tapply plugin: &#39;eclipse&#39;\r\n        \tversion = &#39;14.5.0-SNAPSHOT&#39;;\r\n    \text {\r\n    \t\tbuildDate = new Date();\r\n    \t\tproductName = &#39;xyz&#39;\r\n    \t\tproductDescription = &#39;xyz&#39;\r\n    \t\tgitVersion = getGitVersion();\r\n    \t}\r\n    \t\r\n    \tif( project.hasProperty(&#39;mvn_username&#39;)) {\r\n    \t\tmvn_user = mvn_username\r\n    \t}\r\n    \tif(project.hasProperty(&#39;mvn_password&#39;)) {\r\n    \t\tmvn_pass = mvn_password\r\n    \t}\r\n    \r\n    \trepositories {\r\n    \t\tmaven { url releaseRepo }\r\n    \t\tmaven { url snapshotRepo }\r\n    \t\tmaven { url publicRepo }\r\n    \t}\r\n    }\r\n    \r\n    println &quot;Version: &quot; + version;\r\n    \r\n    def currentJvm = org.gradle.internal.jvm.Jvm.current()\r\n    println &quot;Building with java &quot; + currentJvm\r\n    \r\n    // Define git version\r\n    def getGitVersion() {\r\n        def describeStdOut = new ByteArrayOutputStream()\r\n        \r\n        try {\r\n    \t\texec {\r\n    \t\t    commandLine &#39;git&#39;, &#39;describe&#39;, &#39;--tags&#39;, &#39;--always&#39;, &#39;--dirty&#39;\r\n    \t\t    standardOutput = describeStdOut\r\n    \t\t    ignoreExitValue true\r\n    \t\t}\r\n        \tdescribeStdOut.toString().trim()\r\n        }\r\n        catch(Exception e ) {\r\n    \t\t&quot;n/a&quot;\r\n        }\r\n    }\r\n    \r\n    publish.dependsOn(&#39;:backend:test&#39;)\r\n    \r\n    \r\n    publishing {\r\n    \trepositories {\r\n    \t\tmaven {\r\n    \t\t\tcredentials {\r\n    \t\t\t\tusername=mvn_user\r\n    \t\t\t\tpassword=mvn_pass\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tif (version.endsWith(&quot;-SNAPSHOT&quot;)) {\r\n    \t\t\t\turl snapshotRepo\r\n    \t\t\t}\r\n    \t\t\telse {\r\n    \t\t\t\turl releaseRepo\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublications {\r\n    \t\tmavenJava(MavenPublication) {\r\n    \t\t\tartifactId = mavenArtifactId \r\n    \t\r\n    \t\t\tfrom project(&#39;:backend&#39;).components.java\r\n    \t\t\t\r\n    \t\t\tartifact project(&#39;:backend&#39;).javadocJar\r\n    \t\t\tartifact project(&#39;:backend&#39;).sourceJar\r\n    \t\t\tartifact examplePropertiesArtifact\r\n    \t\t\tartifact exampleLog4jFileArtifact\r\n    \t\t\tartifact windowsScriptFile\r\n    \t\t\tartifact linuxScriptArtifact\r\n    \t\t\tartifact aixScriptArtifact\r\n    \r\n    \t\t\tpom.withXml {\r\n    \t\t\t\tasNode().appendNode(&#39;name&#39;, productName)\r\n    \t\t\t\tasNode().appendNode(&#39;description&#39;, productDescription)\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n    //wrapper {\r\n    //\tgradleVersion = &#39;5.0&#39;\r\n    //}\r\n\r\n\r\nWhile upgrading I am getting the error \r\n```none\r\nCould not get unknown property &#39;java&#39; for SoftwareComponentInternal set of type org.gradle.api.internal.component.DefaultSoftwareComponentContainer.\r\n```\r\n\r\nPlease note my subproject &quot;backend&quot; already has java plugin in build.gradle. Similar question have found on gradle forum with no answer\r\n\r\nhttps://discuss.gradle.org/t/java-11-could-not-get-unknown-property-java-for-softwarecomponentinternal/31625","title":"Could not get unknown property &#39;java&#39; for SoftwareComponentInternal while upgrading gradle 4.5 to 5.0 and java 8 to java 11","body":"<p>I am trying to upgrade gradle from 4.5 to gradle 5.0 and java8 to java11. I have multimodule project(backend and frontend) and root project gradle looks like below</p>\n<pre><code>    apply plugin: 'maven-publish'\n    apply plugin: 'java'\n     \n    def mavenArtifactId = 'root-project-name'\n    group = 'com.root.project'\n    \n    allprojects {\n        apply plugin: 'eclipse'\n        version = '14.5.0-SNAPSHOT';\n    ext {\n        buildDate = new Date();\n        productName = 'xyz'\n        productDescription = 'xyz'\n        gitVersion = getGitVersion();\n    }\n    \n    if( project.hasProperty('mvn_username')) {\n        mvn_user = mvn_username\n    }\n    if(project.hasProperty('mvn_password')) {\n        mvn_pass = mvn_password\n    }\n\n    repositories {\n        maven { url releaseRepo }\n        maven { url snapshotRepo }\n        maven { url publicRepo }\n    }\n}\n\nprintln &quot;Version: &quot; + version;\n\ndef currentJvm = org.gradle.internal.jvm.Jvm.current()\nprintln &quot;Building with java &quot; + currentJvm\n\n// Define git version\ndef getGitVersion() {\n    def describeStdOut = new ByteArrayOutputStream()\n    \n    try {\n        exec {\n            commandLine 'git', 'describe', '--tags', '--always', '--dirty'\n            standardOutput = describeStdOut\n            ignoreExitValue true\n        }\n        describeStdOut.toString().trim()\n    }\n    catch(Exception e ) {\n        &quot;n/a&quot;\n    }\n}\n\npublish.dependsOn(':backend:test')\n\n\npublishing {\n    repositories {\n        maven {\n            credentials {\n                username=mvn_user\n                password=mvn_pass\n            }\n            \n            if (version.endsWith(&quot;-SNAPSHOT&quot;)) {\n                url snapshotRepo\n            }\n            else {\n                url releaseRepo\n            }\n        }\n    }\n    \n    publications {\n        mavenJava(MavenPublication) {\n            artifactId = mavenArtifactId \n    \n            from project(':backend').components.java\n            \n            artifact project(':backend').javadocJar\n            artifact project(':backend').sourceJar\n            artifact examplePropertiesArtifact\n            artifact exampleLog4jFileArtifact\n            artifact windowsScriptFile\n            artifact linuxScriptArtifact\n            artifact aixScriptArtifact\n\n            pom.withXml {\n                asNode().appendNode('name', productName)\n                asNode().appendNode('description', productDescription)\n            }\n        }\n    }\n}\n\n//wrapper {\n//  gradleVersion = '5.0'\n//}\n</code></pre>\n<p>While upgrading I am getting the error</p>\n<pre class=\"lang-none prettyprint-override\"><code>Could not get unknown property 'java' for SoftwareComponentInternal set of type org.gradle.api.internal.component.DefaultSoftwareComponentContainer.\n</code></pre>\n<p>Please note my subproject &quot;backend&quot; already has java plugin in build.gradle. Similar question have found on gradle forum with no answer</p>\n<p><a href=\"https://discuss.gradle.org/t/java-11-could-not-get-unknown-property-java-for-softwarecomponentinternal/31625\" rel=\"nofollow noreferrer\">https://discuss.gradle.org/t/java-11-could-not-get-unknown-property-java-for-softwarecomponentinternal/31625</a></p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664875198,"creation_date":1664875198,"answer_id":73945678,"question_id":73945586,"body_markdown":"According to [the docs of `AutocompleteTextView`](https://developer.android.com/reference/android/widget/AutoCompleteTextView) its `setAdapter` method takes a `&lt;T extends ListAdapter &amp; Filterable&gt;`, meaning the adapter must both extend `ListAdapter` and implement `Filterable`.\r\n\r\n`ListAdapter` itself does not implement `Filterable`, but some subclasses such as [`ArrayAdapter`][1] do.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/widget/ArrayAdapter","title":"setAdapter(T) cannot be applied to (android.widget.ListAdapter) when using fragment","body":"<p>According to <a href=\"https://developer.android.com/reference/android/widget/AutoCompleteTextView\" rel=\"nofollow noreferrer\">the docs of <code>AutocompleteTextView</code></a> its <code>setAdapter</code> method takes a <code>&lt;T extends ListAdapter &amp; Filterable&gt;</code>, meaning the adapter must both extend <code>ListAdapter</code> and implement <code>Filterable</code>.</p>\n<p><code>ListAdapter</code> itself does not implement <code>Filterable</code>, but some subclasses such as <a href=\"https://developer.android.com/reference/android/widget/ArrayAdapter\" rel=\"nofollow noreferrer\"><code>ArrayAdapter</code></a> do.</p>\n"}],"owner":{"account_id":19110497,"reputation":3,"user_id":13956603,"display_name":"Chinmay Teni"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73945678,"answer_count":1,"score":0,"last_activity_date":1664875198,"creation_date":1664874762,"question_id":73945586,"body_markdown":"I am getting an error at autoCompleteTextView it says `setAdapter(T) cannot be applied to (android.widget.ListAdapter)`\r\n\r\n```\r\npublic class HomeFragmnet extends Fragment {\r\n\r\n    TextInputLayout textInputLayout;\r\n    AutoCompleteTextView autoCompleteTextView;\r\n    ListView listView;\r\n    ListAdapter listAdapter;\r\n    \r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstancesState){\r\n        View v =inflater.inflate(R.layout.fragment_home, null);\r\n\r\n        textInputLayout = (TextInputLayout) v.findViewById(R.id.menu_dropdown);\r\n        autoCompleteTextView = (AutoCompleteTextView) v.findViewById(R.id.drop_items);\r\n        String [] items={&quot;Pune&quot;, &quot;Mumbai&quot;, &quot;Nashik&quot;};\r\n\r\n        listAdapter = new ArrayAdapter&lt;String&gt;(getActivity() , R.layout.items_list, items );\r\n        autoCompleteTextView.setAdapter( listAdapter );\r\n\r\n\r\n        return v;\r\n    }\r\n\r\n}\r\n```","title":"setAdapter(T) cannot be applied to (android.widget.ListAdapter) when using fragment","body":"<p>I am getting an error at autoCompleteTextView it says <code>setAdapter(T) cannot be applied to (android.widget.ListAdapter)</code></p>\n<pre><code>public class HomeFragmnet extends Fragment {\n\n    TextInputLayout textInputLayout;\n    AutoCompleteTextView autoCompleteTextView;\n    ListView listView;\n    ListAdapter listAdapter;\n    \n\n    @Nullable\n    @Override\n    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstancesState){\n        View v =inflater.inflate(R.layout.fragment_home, null);\n\n        textInputLayout = (TextInputLayout) v.findViewById(R.id.menu_dropdown);\n        autoCompleteTextView = (AutoCompleteTextView) v.findViewById(R.id.drop_items);\n        String [] items={&quot;Pune&quot;, &quot;Mumbai&quot;, &quot;Nashik&quot;};\n\n        listAdapter = new ArrayAdapter&lt;String&gt;(getActivity() , R.layout.items_list, items );\n        autoCompleteTextView.setAdapter( listAdapter );\n\n\n        return v;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","amazon-s3","apache-flink","parquet","flink-streaming"],"answers":[{"comments":[{"owner":{"account_id":26521278,"reputation":3,"user_id":20154913,"display_name":"DANG BUI HUU"},"score":0,"creation_date":1664879688,"post_id":73945655,"comment_id":130566210,"body_markdown":"Thank your answer. What is Event package belong to?","body":"Thank your answer. What is Event package belong to?"},{"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1664885873,"post_id":73945655,"comment_id":130568200,"body_markdown":"Event is just an example. Replace Event with whatever data type you are sending to the sink. And then in getBucketId return whatever you want to have included in the bucket&#39;s filenames.","body":"Event is just an example. Replace Event with whatever data type you are sending to the sink. And then in getBucketId return whatever you want to have included in the bucket&#39;s filenames."}],"tags":[],"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664875100,"creation_date":1664875100,"answer_id":73945655,"question_id":73944364,"body_markdown":"You can do this by implementing a `BucketAssigner`. \r\n\r\nSomething along these lines:\r\n\r\n```java\r\npublic static final class KeyBucketAssigner\r\n        implements BucketAssigner&lt;Event, String&gt; {\r\n\r\n    private static final long serialVersionUID = 987325769970523326L;\r\n\r\n    @Override\r\n    public String getBucketId(final Event element, final Context context) {\r\n        return String.valueOf(Event.key);\r\n    }\r\n\r\n    @Override\r\n    public SimpleVersionedSerializer&lt;String&gt; getSerializer() {\r\n        return SimpleVersionedStringSerializer.INSTANCE;\r\n    }\r\n}\r\n```\r\n\r\n[documentation](https://nightlies.apache.org/flink/flink-docs-release-1.15/api/java/org/apache/flink/streaming/api/functions/sink/filesystem/BucketAssigner.html)  \r\n[javadocs](https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/connectors/datastream/filesystem/#bucket-assignment)  \r\n","title":"How to use sinkTo in Flink to write multi file in AWS S3","body":"<p>You can do this by implementing a <code>BucketAssigner</code>.</p>\n<p>Something along these lines:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static final class KeyBucketAssigner\n        implements BucketAssigner&lt;Event, String&gt; {\n\n    private static final long serialVersionUID = 987325769970523326L;\n\n    @Override\n    public String getBucketId(final Event element, final Context context) {\n        return String.valueOf(Event.key);\n    }\n\n    @Override\n    public SimpleVersionedSerializer&lt;String&gt; getSerializer() {\n        return SimpleVersionedStringSerializer.INSTANCE;\n    }\n}\n</code></pre>\n<p><a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.15/api/java/org/apache/flink/streaming/api/functions/sink/filesystem/BucketAssigner.html\" rel=\"nofollow noreferrer\">documentation</a><br />\n<a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/connectors/datastream/filesystem/#bucket-assignment\" rel=\"nofollow noreferrer\">javadocs</a></p>\n"}],"owner":{"account_id":26521278,"reputation":3,"user_id":20154913,"display_name":"DANG BUI HUU"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":446,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73945655,"answer_count":1,"score":0,"last_activity_date":1664875100,"creation_date":1664868288,"question_id":73944364,"body_markdown":"i want to save data of many customers in different files.\r\n\r\nNow, data is being stored in DataStream variable. How to use sinkTo to write multi file in AWS S3. Each file contains the data of a customer and the file name is the customer name. \r\n\r\n\r\n\r\n\r\n    public static void writeMultiFile(DataStream&lt;Tuple5&lt;String, Long, Double, String, String&gt;&gt; data) throws Exception {\r\n        String currentDir = System.getProperty(&quot;user.dir&quot;);\r\n        Path pathNew = new Path(currentDir + &quot;/output/&quot;);\r\n\r\n        OutputFileConfig config = OutputFileConfig\r\n                .builder()\r\n                .withPartPrefix(&quot;namefile&quot;)\r\n                .withPartSuffix(&quot;.parquet&quot;)\r\n                .build();\r\n\r\n        final FileSink&lt;GenericRecord&gt; sink = FileSink\r\n                .forBulkFormat(pathNew, AvroParquetWriters.forGenericRecord(schema))\r\n                .withOutputFileConfig(config)\r\n                .build();\r\n\r\n        data.keyBy(value-&gt;value.f0).map(new convertGenericRecord()).sinkTo(sink);\r\n    }\r\n\r\n \r\nI need the file names to change by key. The code above can&#39;t do that, filename must be predefined, it cannot be changed dynamically by key. \r\n\r\nPlease help me!","title":"How to use sinkTo in Flink to write multi file in AWS S3","body":"<p>i want to save data of many customers in different files.</p>\n<p>Now, data is being stored in DataStream variable. How to use sinkTo to write multi file in AWS S3. Each file contains the data of a customer and the file name is the customer name.</p>\n<pre><code>public static void writeMultiFile(DataStream&lt;Tuple5&lt;String, Long, Double, String, String&gt;&gt; data) throws Exception {\n    String currentDir = System.getProperty(&quot;user.dir&quot;);\n    Path pathNew = new Path(currentDir + &quot;/output/&quot;);\n\n    OutputFileConfig config = OutputFileConfig\n            .builder()\n            .withPartPrefix(&quot;namefile&quot;)\n            .withPartSuffix(&quot;.parquet&quot;)\n            .build();\n\n    final FileSink&lt;GenericRecord&gt; sink = FileSink\n            .forBulkFormat(pathNew, AvroParquetWriters.forGenericRecord(schema))\n            .withOutputFileConfig(config)\n            .build();\n\n    data.keyBy(value-&gt;value.f0).map(new convertGenericRecord()).sinkTo(sink);\n}\n</code></pre>\n<p>I need the file names to change by key. The code above can't do that, filename must be predefined, it cannot be changed dynamically by key.</p>\n<p>Please help me!</p>\n"},{"tags":["java","many-to-one","spring-data-jdbc"],"comments":[{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1664875685,"post_id":73945561,"comment_id":130564984,"body_markdown":"You are asking about Spring Data JDBC but then you show JPA entity classes. Are you really using JDBC or are you using Spring Data JPA instead? You could use `@ManyToOne` to configure a many-to-one relation with JPA, and then there wouldn&#39;t be a need to manually define a query with `@Query`.","body":"You are asking about Spring Data JDBC but then you show JPA entity classes. Are you really using JDBC or are you using Spring Data JPA instead? You could use <code>@ManyToOne</code> to configure a many-to-one relation with JPA, and then there wouldn&#39;t be a need to manually define a query with <code>@Query</code>."},{"owner":{"account_id":1022944,"reputation":55,"user_id":1032836,"display_name":"user1032836"},"score":0,"creation_date":1664894352,"post_id":73945561,"comment_id":130571473,"body_markdown":"@Jesper, its not JPA entity classes. `@Table` and `@Column` are from spring-data-relational, i use them because in real app the table and column names do not match spring data naming conventions. `@Id` is from commons. Those annotations are commonly used in every second spring data jdbc example ;)","body":"@Jesper, its not JPA entity classes. <code>@Table</code> and <code>@Column</code> are from spring-data-relational, i use them because in real app the table and column names do not match spring data naming conventions. <code>@Id</code> is from commons. Those annotations are commonly used in every second spring data jdbc example ;)"}],"owner":{"account_id":1022944,"reputation":55,"user_id":1032836,"display_name":"user1032836"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1665045421,"answer_count":0,"score":0,"last_activity_date":1664874671,"creation_date":1664874671,"question_id":73945561,"body_markdown":"Its quite easy to use spring data jdbc dealing with CUD actions for entities with many-to-one refs, but the R(eading) is not so straightforward. Although i could use AggregateReference for querying data with ids only, but frontend asks for full data filled.\r\nI.e. i have smth like that:\r\n\r\n```\r\nCREATE TABLE TYPE (\r\n   ID   SERIAL NOT NULL,\r\n   NAME VARCHAR NOT NULL,\r\n   PRIMARY KEY (ID)\r\n);\r\n\r\nCREATE TABLE RECORD (   \r\n   ID   SERIAL NOT NULL,\r\n   NAME VARCHAR NOT NULL,\r\n   TYPE_ID INTEGER REFERENCES TYPE(ID),\r\n   PRIMARY KEY (ID)\r\n);\r\n\r\n```\r\nAnd corresponding objects:\r\n```\r\n@Table\r\nclass Type {\r\n    @Id\r\n    Long id;\r\n    String name;\r\n}\r\n\r\n@Table\r\nclass Record {\r\n    @Id\r\n    Long id;\r\n    String name;\r\n    @Column(&quot;type_id&quot;)\r\n    AggregateReference&lt;Type, Long&gt; type;\r\n}\r\n```\r\nI need to provide pageable service for frontend returning records with filled in type id and type name.\r\nSmth like this:\r\n```\r\n[{&quot;id&quot;:1,&quot;name&quot;:&quot;record1&quot;,&quot;type&quot;:{&quot;id&quot;:1,&quot;name&quot;:&quot;type1&quot;}},...]\r\n```\r\nPreferably with paging info provided by Page object (total count, page number and so on).\r\nWith spring data jdbc repositories all i can get out of box is\r\n```\r\n[{&quot;id&quot;:1,&quot;name&quot;:&quot;record1&quot;,&quot;type&quot;:{&quot;id&quot;:1}},...]\r\n```\r\nI could try to write query by hand with @Query in corresponding method within Repository, but i lose paging services.\r\nThe same goes if i use JDBCTemplate and rowmapper.\r\n\r\nI can also try to use mapstruct to map Record to some RecordDTO with type name included, but this requires querying for Type object for every row which seems to be quite ineffective. \r\nWhat is the best way to solve this?","title":"Spring Data JDBC and effective work with many-to-one refs","body":"<p>Its quite easy to use spring data jdbc dealing with CUD actions for entities with many-to-one refs, but the R(eading) is not so straightforward. Although i could use AggregateReference for querying data with ids only, but frontend asks for full data filled.\nI.e. i have smth like that:</p>\n<pre><code>CREATE TABLE TYPE (\n   ID   SERIAL NOT NULL,\n   NAME VARCHAR NOT NULL,\n   PRIMARY KEY (ID)\n);\n\nCREATE TABLE RECORD (   \n   ID   SERIAL NOT NULL,\n   NAME VARCHAR NOT NULL,\n   TYPE_ID INTEGER REFERENCES TYPE(ID),\n   PRIMARY KEY (ID)\n);\n\n</code></pre>\n<p>And corresponding objects:</p>\n<pre><code>@Table\nclass Type {\n    @Id\n    Long id;\n    String name;\n}\n\n@Table\nclass Record {\n    @Id\n    Long id;\n    String name;\n    @Column(&quot;type_id&quot;)\n    AggregateReference&lt;Type, Long&gt; type;\n}\n</code></pre>\n<p>I need to provide pageable service for frontend returning records with filled in type id and type name.\nSmth like this:</p>\n<pre><code>[{&quot;id&quot;:1,&quot;name&quot;:&quot;record1&quot;,&quot;type&quot;:{&quot;id&quot;:1,&quot;name&quot;:&quot;type1&quot;}},...]\n</code></pre>\n<p>Preferably with paging info provided by Page object (total count, page number and so on).\nWith spring data jdbc repositories all i can get out of box is</p>\n<pre><code>[{&quot;id&quot;:1,&quot;name&quot;:&quot;record1&quot;,&quot;type&quot;:{&quot;id&quot;:1}},...]\n</code></pre>\n<p>I could try to write query by hand with @Query in corresponding method within Repository, but i lose paging services.\nThe same goes if i use JDBCTemplate and rowmapper.</p>\n<p>I can also try to use mapstruct to map Record to some RecordDTO with type name included, but this requires querying for Type object for every row which seems to be quite ineffective.\nWhat is the best way to solve this?</p>\n"},{"tags":["java","eclipse"],"answers":[{"tags":[],"owner":{"account_id":10512603,"reputation":538,"user_id":7747799,"display_name":"I&#241;igo Moreno"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664874269,"creation_date":1664874269,"answer_id":73945482,"question_id":73911949,"body_markdown":"Not completely sure I understand your question, but I think you want to do something like\r\n```java\r\npublic double calculatePay( int hours, double HourlyWage )\r\n{\r\n    double NetPay = hours * HourlyWage\r\n    if ( hours &gt; STANDARD_WORKING_HOURS ) \r\n    { \r\n        int Overtime = (hours - STANDARD_WORKING_HOURS);\r\n        NetPay = NetPay + ( Overtime * HourlyWage * 0.5);\r\n    }\r\n    double GrossPay = NetPay * (1-Federal_and_State_Tax);\r\n    return GrossPay;\r\n}\r\n\r\n```","title":"How do I get the &quot;Netpay&quot; to subtract the &quot;Federal and State Tax&quot; from the gross pay? (The Federal and State Tax&quot; is supposed to be 15%)","body":"<p>Not completely sure I understand your question, but I think you want to do something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>public double calculatePay( int hours, double HourlyWage )\n{\n    double NetPay = hours * HourlyWage\n    if ( hours &gt; STANDARD_WORKING_HOURS ) \n    { \n        int Overtime = (hours - STANDARD_WORKING_HOURS);\n        NetPay = NetPay + ( Overtime * HourlyWage * 0.5);\n    }\n    double GrossPay = NetPay * (1-Federal_and_State_Tax);\n    return GrossPay;\n}\n\n</code></pre>\n"}],"owner":{"account_id":26483237,"reputation":1,"user_id":20122184,"display_name":"Credits"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1664874269,"creation_date":1664557604,"question_id":73911949,"body_markdown":"Need this to be 15%\r\n    \t  \r\n    public double calculatePay( int hours, double HourlyWage )\r\n    {\r\n    \tdouble Federal_and_State_Tax = (0.15); \r\n\r\nStandard working hours = 40\r\n\r\n        if ( hours &gt; STANDARD_WORKING_HOURS ) \r\n        { \r\n            int Overtime = (hours - STANDARD_WORKING_HOURS);\r\n            GrossPay = ( STANDARD_WORKING_HOURS * HourlyWage ) + ( Overtime * HourlyWage) * 1.5;\r\n\r\nNeed to statement to say: (Hours over 40 * hourlywage * 150%) - 15%\r\n\r\n            NetPay = ( STANDARD_WORKING_HOURS * HourlyWage ) + ( Overtime * HourlyWage * 1.5) - Federal_and_State_Tax;\r\n        }\r\n        else GrossPay = hours * HourlyWage;\r\n        \t NetPay = (hours * HourlyWage) - Federal_and_State_Tax;\r\n      \r\n\r\n        return GrossPay;\r\n     \r\n    }","title":"How do I get the &quot;Netpay&quot; to subtract the &quot;Federal and State Tax&quot; from the gross pay? (The Federal and State Tax&quot; is supposed to be 15%)","body":"<p>Need this to be 15%</p>\n<pre><code>public double calculatePay( int hours, double HourlyWage )\n{\n    double Federal_and_State_Tax = (0.15); \n</code></pre>\n<p>Standard working hours = 40</p>\n<pre><code>    if ( hours &gt; STANDARD_WORKING_HOURS ) \n    { \n        int Overtime = (hours - STANDARD_WORKING_HOURS);\n        GrossPay = ( STANDARD_WORKING_HOURS * HourlyWage ) + ( Overtime * HourlyWage) * 1.5;\n</code></pre>\n<p>Need to statement to say: (Hours over 40 * hourlywage * 150%) - 15%</p>\n<pre><code>        NetPay = ( STANDARD_WORKING_HOURS * HourlyWage ) + ( Overtime * HourlyWage * 1.5) - Federal_and_State_Tax;\n    }\n    else GrossPay = hours * HourlyWage;\n         NetPay = (hours * HourlyWage) - Federal_and_State_Tax;\n  \n\n    return GrossPay;\n \n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1107169,"reputation":6727,"user_id":1098361,"accept_rate":86,"display_name":"Zack Macomber"},"score":0,"creation_date":1614089298,"post_id":66333964,"comment_id":117273787,"body_markdown":"Possibly related - https://stackoverflow.com/q/60872965/1098361","body":"Possibly related - <a href=\"https://stackoverflow.com/q/60872965/1098361\">stackoverflow.com/q/60872965/1098361</a>"},{"owner":{"account_id":1328024,"reputation":83,"user_id":1272455,"display_name":"Tim McGinnis"},"score":0,"creation_date":1614105973,"post_id":66333964,"comment_id":117282093,"body_markdown":"After reviewing the possibly related post It seems to me that the AESCipher$General comes from java.base classloader and it is finding javax.crypto.CipherSpi in the powermock.core classloader.  If I understand it correctly.   I have looked in the powermock dependencies (actually all my dependencies) and I cannot find one that contains javax.crypto.CipherSpi.","body":"After reviewing the possibly related post It seems to me that the AESCipher$General comes from java.base classloader and it is finding javax.crypto.CipherSpi in the powermock.core classloader.  If I understand it correctly.   I have looked in the powermock dependencies (actually all my dependencies) and I cannot find one that contains javax.crypto.CipherSpi."},{"owner":{"account_id":1107169,"reputation":6727,"user_id":1098361,"accept_rate":86,"display_name":"Zack Macomber"},"score":0,"creation_date":1614107540,"post_id":66333964,"comment_id":117282731,"body_markdown":"Have you tried a simple test where you cast `AESCipher$General` to `CipherSpi` all by itself? Breaking things down as small as you can can help resolve issues.","body":"Have you tried a simple test where you cast <code>AESCipher$General</code> to <code>CipherSpi</code> all by itself? Breaking things down as small as you can can help resolve issues."},{"owner":{"account_id":1328024,"reputation":83,"user_id":1272455,"display_name":"Tim McGinnis"},"score":0,"creation_date":1614174381,"post_id":66333964,"comment_id":117304727,"body_markdown":"When I try to create the class it says the com.sun.crypto.provider package does not exist.","body":"When I try to create the class it says the com.sun.crypto.provider package does not exist."},{"owner":{"account_id":1328024,"reputation":83,"user_id":1272455,"display_name":"Tim McGinnis"},"score":0,"creation_date":1614174492,"post_id":66333964,"comment_id":117304786,"body_markdown":"I am assuming that is because java.base does not export that package.","body":"I am assuming that is because java.base does not export that package."},{"owner":{"account_id":1328024,"reputation":83,"user_id":1272455,"display_name":"Tim McGinnis"},"score":1,"creation_date":1614195744,"post_id":66333964,"comment_id":117314849,"body_markdown":"I re-configured my test case and have identified the issue as being a problem when using the @RunWIth(PowerMockRunner.class) annotation.  If I do not use this annotation the test runs.  If I add the annotation it throws the error listed above.","body":"I re-configured my test case and have identified the issue as being a problem when using the @RunWIth(PowerMockRunner.class) annotation.  If I do not use this annotation the test runs.  If I add the annotation it throws the error listed above."},{"owner":{"account_id":1107169,"reputation":6727,"user_id":1098361,"accept_rate":86,"display_name":"Zack Macomber"},"score":0,"creation_date":1614200487,"post_id":66333964,"comment_id":117316693,"body_markdown":"Good troubleshooting and thanks for letting the SO community know! May help others or yourself in the future!","body":"Good troubleshooting and thanks for letting the SO community know! May help others or yourself in the future!"}],"answers":[{"tags":[],"owner":{"account_id":1328024,"reputation":83,"user_id":1272455,"display_name":"Tim McGinnis"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614196585,"creation_date":1614196585,"answer_id":66358010,"question_id":66333964,"body_markdown":"After some helpful direction I was able to track the issue down to happening only when the @RunWith(PowerMockRunner.class) was used.  To resolve the issue I added the @PowerMockIgnore({&quot;javax.crypto.*&quot;}) annotation.  This resolved all the errors and the test now works as expected.","title":"Classcast Exception for javax.crypto.CipherSpi due to different modules","body":"<p>After some helpful direction I was able to track the issue down to happening only when the @RunWith(PowerMockRunner.class) was used.  To resolve the issue I added the @PowerMockIgnore({&quot;javax.crypto.*&quot;}) annotation.  This resolved all the errors and the test now works as expected.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1665221522,"post_id":73945457,"comment_id":130652445,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/73945457/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":26523496,"reputation":11,"user_id":20156821,"display_name":"Sumit Phalke"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664874148,"creation_date":1664874148,"answer_id":73945457,"question_id":66333964,"body_markdown":"This helped, mockito was trying to mock some these objects which was leading to failure. Adding @PowerMockIgnore does help.","title":"Classcast Exception for javax.crypto.CipherSpi due to different modules","body":"<p>This helped, mockito was trying to mock some these objects which was leading to failure. Adding @PowerMockIgnore does help.</p>\n"}],"owner":{"account_id":1328024,"reputation":83,"user_id":1272455,"display_name":"Tim McGinnis"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":653,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1664874148,"creation_date":1614086514,"question_id":66333964,"body_markdown":"I am moving a app to Java 11 which uses encryption.  When I try to run the tests I get the following error.\r\n\r\n    java.lang.ClassCastException: \r\n    class com.sun.crypto.provider.AESCipher$General \r\n    cannot be cast to class javax.crypto.CipherSpi \r\n    (com.sun.crypto.provider.AESCipher$General is in module \r\n    java.base of loader &#39;bootstrap&#39;; \r\n    javax.crypto.CipherSpi is in unnamed module of loader\r\n    org.powermock.core.classloader.javassist.JavassistMockClassLoader@4c1d9d4b)\r\n\r\nI don&#39;t understand what it means or how to resolve it.\r\n","title":"Classcast Exception for javax.crypto.CipherSpi due to different modules","body":"<p>I am moving a app to Java 11 which uses encryption.  When I try to run the tests I get the following error.</p>\n<pre><code>java.lang.ClassCastException: \nclass com.sun.crypto.provider.AESCipher$General \ncannot be cast to class javax.crypto.CipherSpi \n(com.sun.crypto.provider.AESCipher$General is in module \njava.base of loader 'bootstrap'; \njavax.crypto.CipherSpi is in unnamed module of loader\norg.powermock.core.classloader.javassist.JavassistMockClassLoader@4c1d9d4b)\n</code></pre>\n<p>I don't understand what it means or how to resolve it.</p>\n"},{"tags":["java","arrays","foreach","maps"],"comments":[{"owner":{"account_id":26261950,"reputation":98,"user_id":19950902,"display_name":"CR130"},"score":1,"creation_date":1663368472,"post_id":73750892,"comment_id":130231354,"body_markdown":"I would love to help you, but I can only help you if there is a question to answer. Please make sure to ask a question whenever you make a post so others can know where to help you","body":"I would love to help you, but I can only help you if there is a question to answer. Please make sure to ask a question whenever you make a post so others can know where to help you"},{"owner":{"account_id":26359540,"reputation":11,"user_id":20015976,"display_name":"Coocoociki"},"score":0,"creation_date":1663368878,"post_id":73750892,"comment_id":130231414,"body_markdown":"A part of code with arr[0].entrySet() won&#39;t work while another part with pupils.entrySet() work well!","body":"A part of code with arr[0].entrySet() won&#39;t work while another part with pupils.entrySet() work well!"},{"owner":{"account_id":14148561,"reputation":150,"user_id":13052285,"display_name":"James Wagstaff"},"score":0,"creation_date":1663371760,"post_id":73750892,"comment_id":130231799,"body_markdown":"Map&lt;String, Integer&gt;[]arr = new Map[2]; this should fix the problem, Java is a strongly typed language, try to use types when you know what they are.","body":"Map&lt;String, Integer&gt;[]arr = new Map[2]; this should fix the problem, Java is a strongly typed language, try to use types when you know what they are."}],"owner":{"account_id":26359540,"reputation":11,"user_id":20015976,"display_name":"Coocoociki"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1664873121,"creation_date":1663368210,"question_id":73750892,"body_markdown":"How come arr[0] which contains variable `pupils` won&#39;t work with entrySet()?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n```\r\nMap&lt;String, Integer&gt; pupils = new HashMap&lt;&gt;();\r\nMap&lt;String, Integer&gt; teachers = new HashMap&lt;&gt;();\r\n\r\npupils.put(&quot;Alex&quot;, 12);\r\npupils.put(&quot;Joe&quot;, 11);\r\nteachers.put(&quot;Helen&quot;, 28);\r\nteachers.put(&quot;Michael&quot;, 29);\r\n\r\nMap[] arr = new Map[2];\r\n\r\narr[0] = pupils;\r\narr[1] = teachers;\r\n\r\n//why this code won&#39;t work?\r\nfor (Map.Entry&lt;?, ?&gt; me : arr[0].entrySet()){\r\nSystem.out.println(me.getKey() + &quot; - &quot; + me.getValue());}\r\n\r\n//while this code works well\r\nfor (Map.Entry&lt;?, ?&gt; me : pupils.entrySet()){ \r\nSystem.out.println(me.getKey() + &quot; - &quot; + me.getValue());}\r\n\r\n// and this returns (prints) true! \r\nSystem.out.println(pupils.entrySet() == arr[0].entrySet());\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/VDj0P.jpg\r\n","title":"Java Strange Object: variable VS arr[0] = variable","body":"<p>How come arr[0] which contains variable <code>pupils</code> won't work with entrySet()?</p>\n<p><a href=\"https://i.stack.imgur.com/VDj0P.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VDj0P.jpg\" alt=\"enter image description here\" /></a></p>\n<pre><code>Map&lt;String, Integer&gt; pupils = new HashMap&lt;&gt;();\nMap&lt;String, Integer&gt; teachers = new HashMap&lt;&gt;();\n\npupils.put(&quot;Alex&quot;, 12);\npupils.put(&quot;Joe&quot;, 11);\nteachers.put(&quot;Helen&quot;, 28);\nteachers.put(&quot;Michael&quot;, 29);\n\nMap[] arr = new Map[2];\n\narr[0] = pupils;\narr[1] = teachers;\n\n//why this code won't work?\nfor (Map.Entry&lt;?, ?&gt; me : arr[0].entrySet()){\nSystem.out.println(me.getKey() + &quot; - &quot; + me.getValue());}\n\n//while this code works well\nfor (Map.Entry&lt;?, ?&gt; me : pupils.entrySet()){ \nSystem.out.println(me.getKey() + &quot; - &quot; + me.getValue());}\n\n// and this returns (prints) true! \nSystem.out.println(pupils.entrySet() == arr[0].entrySet());\n</code></pre>\n"},{"tags":["java","sql","intellij-idea","dialect"],"comments":[{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":4,"creation_date":1664868418,"post_id":73944290,"comment_id":130562754,"body_markdown":"You should be using `PreparedStatement` for doing SQL queries with parameters instead of concatenating strings to create an SQL statement, otherwise your code will likely be vulnerable to [SQL injection](https://owasp.org/www-community/attacks/SQL_Injection).","body":"You should be using <code>PreparedStatement</code> for doing SQL queries with parameters instead of concatenating strings to create an SQL statement, otherwise your code will likely be vulnerable to <a href=\"https://owasp.org/www-community/attacks/SQL_Injection\" rel=\"nofollow noreferrer\">SQL injection</a>."},{"owner":{"account_id":4947846,"reputation":9433,"user_id":3982755,"accept_rate":79,"display_name":"Bentaye"},"score":0,"creation_date":1664873228,"post_id":73944290,"comment_id":130564226,"body_markdown":"It is a Java file, there is no reason IntelliJ should recognize SQL in it. `select`, `from` and `where` could as well be java variables.","body":"It is a Java file, there is no reason IntelliJ should recognize SQL in it. <code>select</code>, <code>from</code> and <code>where</code> could as well be java variables."},{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1664873994,"post_id":73944290,"comment_id":130564461,"body_markdown":"@Bentaye IntelliJ has many features that go beyond just parsing Java code. Normally it recognises SQL in strings and also syntax-highlights it. In this case it probably doesn&#39;t work because the SQL is not in a single string literal, but because Takhir is creating it by concatenating parts.","body":"@Bentaye IntelliJ has many features that go beyond just parsing Java code. Normally it recognises SQL in strings and also syntax-highlights it. In this case it probably doesn&#39;t work because the SQL is not in a single string literal, but because Takhir is creating it by concatenating parts."}],"answers":[{"tags":[],"owner":{"account_id":23720736,"reputation":36,"user_id":17741327,"display_name":"Bloody160"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664872995,"creation_date":1664872995,"answer_id":73945211,"question_id":73944290,"body_markdown":"I agree with Jesper, you should try using preparedStatements, not only would your Statements get more secure, also the problem which you are currently having should be solved by it.","title":"IntelliJ IDEA not recognizing SQL dialect","body":"<p>I agree with Jesper, you should try using preparedStatements, not only would your Statements get more secure, also the problem which you are currently having should be solved by it.</p>\n"}],"owner":{"account_id":6148598,"reputation":159,"user_id":4793760,"display_name":"Takhir Atamuratov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":473,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664872995,"creation_date":1664867834,"question_id":73944290,"body_markdown":"We use IntelliJ IDEA actively and we have our wrappers for work with DB (PostgreSQL). The thing is that when we use placeholders, SQL is stopped being highlighted.\r\n\r\n&quot;select * from &quot; + schema + &quot;.users where id = &quot; + id + &quot;;&quot;;\r\n\r\nThis code is not recognised as SQL, so highlighting doesn&#39;t work.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9cS2Y.png","title":"IntelliJ IDEA not recognizing SQL dialect","body":"<p>We use IntelliJ IDEA actively and we have our wrappers for work with DB (PostgreSQL). The thing is that when we use placeholders, SQL is stopped being highlighted.</p>\n<p>&quot;select * from &quot; + schema + &quot;.users where id = &quot; + id + &quot;;&quot;;</p>\n<p>This code is not recognised as SQL, so highlighting doesn't work.</p>\n<p><a href=\"https://i.stack.imgur.com/9cS2Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9cS2Y.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-boot","unit-testing"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1664873409,"post_id":73945076,"comment_id":130564271,"body_markdown":"If you want to test that `System.out.println` is called, and inspects its contents, you can use https://junit-pioneer.org/docs/standard-input-output/","body":"If you want to test that <code>System.out.println</code> is called, and inspects its contents, you can use <a href=\"https://junit-pioneer.org/docs/standard-input-output/\" rel=\"nofollow noreferrer\">junit-pioneer.org/docs/standard-input-output</a>"}],"answers":[{"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1664873457,"post_id":73945192,"comment_id":130564287,"body_markdown":"That will only be possible if the `objectMapper` and its result are available outside this method.","body":"That will only be possible if the <code>objectMapper</code> and its result are available outside this method."},{"owner":{"account_id":23269246,"reputation":81,"user_id":17354320,"display_name":"Jsef bch"},"score":0,"creation_date":1664875752,"post_id":73945192,"comment_id":130565005,"body_markdown":"@RobSpoor im mapping the string to a Dto class. What do you mean exactly by your statement? And why do you think this approach will not work. Thanks a lot","body":"@RobSpoor im mapping the string to a Dto class. What do you mean exactly by your statement? And why do you think this approach will not work. Thanks a lot"},{"owner":{"account_id":26317294,"reputation":210,"user_id":19979867,"display_name":"Leonardo Emmanuel de Azevedo"},"score":1,"creation_date":1664875843,"post_id":73945192,"comment_id":130565034,"body_markdown":"In this case `objectMapper` is outside of the scope of this method. The answer will work even if `objectMapper` and the output is in the scope of the method,","body":"In this case <code>objectMapper</code> is outside of the scope of this method. The answer will work even if <code>objectMapper</code> and the output is in the scope of the method,"}],"tags":[],"owner":{"account_id":26317294,"reputation":210,"user_id":19979867,"display_name":"Leonardo Emmanuel de Azevedo"},"comment_count":3,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1664872895,"creation_date":1664872895,"answer_id":73945192,"question_id":73945076,"body_markdown":"Using JUnit5:\r\n\r\nI would start by checking that ```objectMapper.readValue``` doesn&#39;t throw any exception:\r\n```Java\r\nassertDoesNotThrow(() -&gt; objectMapper.readValue(line, LeadTimeDTO.class));\r\n```\r\nThen, check mapped object is not null:\r\n```Java\r\nassertThat(leadTimeDTO).isNotNul();\r\n```\r\n\r\nAfter that, you can check the fields are being populated correctly by using\r\n```Java\r\nassertThat(leadTimeDTO.getName()).isEqualTo(&quot;Some name&quot;);\r\n```","title":"Unit testing object mapper method","body":"<p>Using JUnit5:</p>\n<p>I would start by checking that <code>objectMapper.readValue</code> doesn't throw any exception:</p>\n<pre><code>assertDoesNotThrow(() -&gt; objectMapper.readValue(line, LeadTimeDTO.class));\n</code></pre>\n<p>Then, check mapped object is not null:</p>\n<pre><code>assertThat(leadTimeDTO).isNotNul();\n</code></pre>\n<p>After that, you can check the fields are being populated correctly by using</p>\n<pre><code>assertThat(leadTimeDTO.getName()).isEqualTo(&quot;Some name&quot;);\n</code></pre>\n"}],"owner":{"account_id":23269246,"reputation":81,"user_id":17354320,"display_name":"Jsef bch"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":548,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73945192,"answer_count":1,"score":0,"last_activity_date":1664872895,"creation_date":1664872239,"question_id":73945076,"body_markdown":"I was told that I should unit test this method but I&#39;m not sure how? How would I unit test a method that only maps a JSON string to a DTO. The String line I will get from a Kafka topic through a Kafkalistener.\r\n\r\n        public void Mapper(String line) {\r\n\r\n        try {\r\n            LeadTimeDTO leadTimeDTO = objectMapper.readValue(line, LeadTimeDTO.class);\r\n            \r\n            System.out.println(&quot;leadTimeDTO:&quot; + leadTimeDTO);\r\n        } catch (JsonProcessingException e) {\r\n            throw new IllegalArgumentException(&quot;Error parsing to DTO&quot;);\r\n\r\n        }\r\n\r\n    }","title":"Unit testing object mapper method","body":"<p>I was told that I should unit test this method but I'm not sure how? How would I unit test a method that only maps a JSON string to a DTO. The String line I will get from a Kafka topic through a Kafkalistener.</p>\n<pre><code>    public void Mapper(String line) {\n\n    try {\n        LeadTimeDTO leadTimeDTO = objectMapper.readValue(line, LeadTimeDTO.class);\n        \n        System.out.println(&quot;leadTimeDTO:&quot; + leadTimeDTO);\n    } catch (JsonProcessingException e) {\n        throw new IllegalArgumentException(&quot;Error parsing to DTO&quot;);\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","logback","slf4j","logback-classic"],"comments":[{"owner":{"account_id":4905682,"reputation":839,"user_id":3952494,"display_name":"Klapsa2503"},"score":0,"creation_date":1664915907,"post_id":73731900,"comment_id":130578229,"body_markdown":"Do you always get the same number of nulls in between the logs? Also diagnose a bit more. Remove `&lt;logger&gt;` leave only `&lt;root&gt;` with level `INFO` and only one appender in and let me know about the results in different scenarios","body":"Do you always get the same number of nulls in between the logs? Also diagnose a bit more. Remove <code>&lt;logger&gt;</code> leave only <code>&lt;root&gt;</code> with level <code>INFO</code> and only one appender in and let me know about the results in different scenarios"},{"owner":{"account_id":11419336,"reputation":411,"user_id":8371320,"display_name":"Deepak Singh"},"score":0,"creation_date":1665026013,"post_id":73731900,"comment_id":130604138,"body_markdown":"Thank you. Okay, I will check and get back on this.","body":"Thank you. Okay, I will check and get back on this."}],"owner":{"account_id":11419336,"reputation":411,"user_id":8371320,"display_name":"Deepak Singh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664872882,"creation_date":1663247997,"question_id":73731900,"body_markdown":"I have added a Filter class which extends OncePerRequestFilter and whenever API&#39;s get called along with normal log statements I see **null** statements.\r\n\r\nSharing **logback.xml** configuration and Request Filter code is straight forward which logs collect some informations and log the statements.\r\n\r\nWhy this happens any help will be appreciated.\r\n\r\n\r\n    {&quot;@timestamp&quot;:&quot;2022-09-15T18:21:19.295+05:30&quot;,&quot;@version&quot;:&quot;1&quot;,&quot;message&quot;:&quot;Started Application in 20.694 seconds (JVM running for 21.915)&quot;,&quot;logger_name&quot;:&quot;logger-name&quot;,&quot;thread_name&quot;:&quot;main&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;level_value&quot;:20000,&quot;app&quot;:&quot;app-name&quot;}\r\n    null\r\n    null\r\n    null\r\n    null\r\n    null\r\n    null\r\n    null\r\n    null\r\n    null\r\n    null\r\n    null\r\n    {&quot;@timestamp&quot;:&quot;2022-09-15T18:21:31.655+05:30&quot;,&quot;@version&quot;:&quot;1&quot;,&quot;message&quot;:&quot;Received request from app swagger-ui&quot;,&quot;logger_name&quot;:&quot;logger_name&quot;,&quot;thread_name&quot;:&quot;http-nio-8080-exec-1&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;level_value&quot;:20000,&quot;clientIp&quot;:&quot;0:0:0:0:0:0:0:1&quot;,&quot;serviceName&quot;:&quot;client-name&quot;,&quot;transactionId&quot;:&quot;CBC76C0E4A8B4C4798599AEC3C91DD3B&quot;,&quot;app&quot;:&quot;app-name&quot;}\r\n\r\n**Logback xml file**\r\n\r\n    &lt;configuration&gt;\r\n\r\n    &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder class=&quot;net.logstash.logback.encoder.LogstashEncoder&quot;&gt;\r\n            &lt;customFields&gt;{&quot;app&quot;:&quot;app-name&quot;}&lt;/customFields&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;appender name=&quot;appLogAppender&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\r\n            &lt;providers&gt;\r\n                &lt;timestamp/&gt;\r\n                &lt;threadName/&gt;\r\n                &lt;provider class=&quot;net.logstash.logback.composite.loggingevent.ArgumentsJsonProvider&quot;/&gt;\r\n            &lt;/providers&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;logger name=&quot;console-logger&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;\r\n        &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\r\n    &lt;/logger&gt;\r\n\r\n    &lt;logger name=&quot;applicationLog&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;\r\n        &lt;appender-ref ref=&quot;appLogAppender&quot;/&gt;\r\n    &lt;/logger&gt;\r\n\r\n    &lt;root level=&quot;ERROR&quot;&gt;\r\n        &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\r\n        &lt;appender-ref ref=&quot;appLogAppender&quot;/&gt;\r\n    &lt;/root&gt;\r\n\r\n&lt;/configuration&gt;","title":"Why I see &quot;null&quot; statements in between logs (With Filter class extended from OncePerRequestFilter)","body":"<p>I have added a Filter class which extends OncePerRequestFilter and whenever API's get called along with normal log statements I see <strong>null</strong> statements.</p>\n<p>Sharing <strong>logback.xml</strong> configuration and Request Filter code is straight forward which logs collect some informations and log the statements.</p>\n<p>Why this happens any help will be appreciated.</p>\n<pre><code>{&quot;@timestamp&quot;:&quot;2022-09-15T18:21:19.295+05:30&quot;,&quot;@version&quot;:&quot;1&quot;,&quot;message&quot;:&quot;Started Application in 20.694 seconds (JVM running for 21.915)&quot;,&quot;logger_name&quot;:&quot;logger-name&quot;,&quot;thread_name&quot;:&quot;main&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;level_value&quot;:20000,&quot;app&quot;:&quot;app-name&quot;}\nnull\nnull\nnull\nnull\nnull\nnull\nnull\nnull\nnull\nnull\nnull\n{&quot;@timestamp&quot;:&quot;2022-09-15T18:21:31.655+05:30&quot;,&quot;@version&quot;:&quot;1&quot;,&quot;message&quot;:&quot;Received request from app swagger-ui&quot;,&quot;logger_name&quot;:&quot;logger_name&quot;,&quot;thread_name&quot;:&quot;http-nio-8080-exec-1&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;level_value&quot;:20000,&quot;clientIp&quot;:&quot;0:0:0:0:0:0:0:1&quot;,&quot;serviceName&quot;:&quot;client-name&quot;,&quot;transactionId&quot;:&quot;CBC76C0E4A8B4C4798599AEC3C91DD3B&quot;,&quot;app&quot;:&quot;app-name&quot;}\n</code></pre>\n<p><strong>Logback xml file</strong></p>\n<pre><code>&lt;configuration&gt;\n\n&lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n    &lt;encoder class=&quot;net.logstash.logback.encoder.LogstashEncoder&quot;&gt;\n        &lt;customFields&gt;{&quot;app&quot;:&quot;app-name&quot;}&lt;/customFields&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n\n&lt;appender name=&quot;appLogAppender&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n    &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\n        &lt;providers&gt;\n            &lt;timestamp/&gt;\n            &lt;threadName/&gt;\n            &lt;provider class=&quot;net.logstash.logback.composite.loggingevent.ArgumentsJsonProvider&quot;/&gt;\n        &lt;/providers&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n\n&lt;logger name=&quot;console-logger&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;\n    &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\n&lt;/logger&gt;\n\n&lt;logger name=&quot;applicationLog&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;\n    &lt;appender-ref ref=&quot;appLogAppender&quot;/&gt;\n&lt;/logger&gt;\n\n&lt;root level=&quot;ERROR&quot;&gt;\n    &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\n    &lt;appender-ref ref=&quot;appLogAppender&quot;/&gt;\n&lt;/root&gt;\n</code></pre>\n\n"},{"tags":["java","jar","executable-jar"],"comments":[{"owner":{"account_id":12685,"reputation":35096,"user_id":25122,"accept_rate":75,"display_name":"RealHowTo"},"score":2,"creation_date":1230391062,"post_id":394616,"comment_id":37989905,"body_markdown":"Follow the steps described here : [Executing a Jar on Vista with a double click](http://stackoverflow.com/questions/354664/executing-a-jar-on-vista-with-a-double-click)","body":"Follow the steps described here : <a href=\"http://stackoverflow.com/questions/354664/executing-a-jar-on-vista-with-a-double-click\">Executing a Jar on Vista with a double click</a>"}],"answers":[{"tags":[],"owner":{"account_id":16216,"reputation":110786,"user_id":35092,"accept_rate":83,"display_name":"Charlie Martin"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1230348361,"creation_date":1230348361,"answer_id":394620,"question_id":394616,"body_markdown":"You want to check a couple of things; if this is your own jar file, make sure you have defined a Main-class in the manifest.  Since we know you can run it from the command line, the other thing to do is create a windows shortcut, and modify the properties (you&#39;ll have to look around, I don&#39;t have a Windows machine to look at) so that the command it executes on open is the java -jar command you mentioned.  \r\n\r\nThe other thing: if something isn&#39;t confused, it should work anyway; check and make sure you have java associated with the .jar extension.","title":"Running JAR file on Windows","body":"<p>You want to check a couple of things; if this is your own jar file, make sure you have defined a Main-class in the manifest.  Since we know you can run it from the command line, the other thing to do is create a windows shortcut, and modify the properties (you'll have to look around, I don't have a Windows machine to look at) so that the command it executes on open is the java -jar command you mentioned.  </p>\n\n<p>The other thing: if something isn't confused, it should work anyway; check and make sure you have java associated with the .jar extension.</p>\n"},{"comments":[{"owner":{"account_id":458142,"reputation":1481,"user_id":857865,"accept_rate":87,"display_name":"Kassem"},"score":17,"creation_date":1351787856,"post_id":394628,"comment_id":17939793,"body_markdown":"i think the easy way is to right click any ,jar file &gt; open with and chose &quot;Java runtime environment&quot;.  :)","body":"i think the easy way is to right click any ,jar file &gt; open with and chose &quot;Java runtime environment&quot;.  :)"},{"owner":{"account_id":1891849,"reputation":1857,"user_id":1709718,"accept_rate":48,"display_name":"Faizan"},"score":1,"creation_date":1362490366,"post_id":394628,"comment_id":21461568,"body_markdown":"doing so , always gives this error to me &quot; Java platform SE binary has stopped working &quot; ... Can anyone help, what could be the issue?","body":"doing so , always gives this error to me &quot; Java platform SE binary has stopped working &quot; ... Can anyone help, what could be the issue?"},{"owner":{"account_id":5199,"reputation":5564,"user_id":8252,"accept_rate":80,"display_name":"Brian Kelly"},"score":1,"creation_date":1362501854,"post_id":394628,"comment_id":21469337,"body_markdown":"@Faizan - Your issue sounds like a separate problem. I see a few SO and Google results for &quot;Java platform SE binary has stopped working&quot;. I would check those out.","body":"@Faizan - Your issue sounds like a separate problem. I see a few SO and Google results for &quot;Java platform SE binary has stopped working&quot;. I would check those out."},{"owner":{"account_id":244548,"reputation":4557,"user_id":517450,"display_name":"Radu Simionescu"},"score":29,"creation_date":1385988259,"post_id":394628,"comment_id":30338756,"body_markdown":"there is no File Types tab in Folder options in win 7","body":"there is no File Types tab in Folder options in win 7"},{"owner":{"account_id":3612588,"reputation":1387,"user_id":4598449,"display_name":"Nick J"},"score":5,"creation_date":1608406043,"post_id":394628,"comment_id":115576455,"body_markdown":"same with Win 10.  did this get moved somewhere with the same functionality? the Windows 10 system &#39;default app by file type&#39; page seems to not let you edit the execution command to add a &#39;jar parameter","body":"same with Win 10.  did this get moved somewhere with the same functionality? the Windows 10 system &#39;default app by file type&#39; page seems to not let you edit the execution command to add a &#39;jar parameter"}],"tags":[],"owner":{"account_id":5199,"reputation":5564,"user_id":8252,"accept_rate":80,"display_name":"Brian Kelly"},"comment_count":5,"down_vote_count":4,"up_vote_count":154,"is_accepted":true,"score":150,"last_activity_date":1310420197,"creation_date":1230348829,"answer_id":394628,"question_id":394616,"body_markdown":"Easiest route is probably upgrading or re-installing the Java Runtime Environment (JRE).\r\n\r\nOr this:\r\n\r\n* Open the Windows Explorer, from the Tools select &#39;Folder Options...&#39;\r\n* Click the File Types tab, scroll down and select JAR File type.\r\n* Press the Advanced button.\r\n* In the Edit File Type dialog box, select open in Actions box and click Edit...\r\n* Press the Browse button and navigate to the location the Java interpreter javaw.exe.\r\n* In the Application used to perform action field, needs to display something similar to `C:\\Program Files\\Java\\j2re1.4.2_04\\bin\\javaw.exe&quot; -jar &quot;%1&quot; %` (Note: the part starting with &#39;javaw&#39; must be exactly like that; the other part of the path name can vary depending on which version of Java you&#39;re using) then press the OK buttons until all the dialogs are closed.\r\n\r\nWhich was stolen from here: [http://windowstipoftheday.blogspot.com/2005/10/setting-jar-file-association.html][1]\r\n\r\n  [1]: http://windowstipoftheday.blogspot.com/2005/10/setting-jar-file-association.html","title":"Running JAR file on Windows","body":"<p>Easiest route is probably upgrading or re-installing the Java Runtime Environment (JRE).</p>\n\n<p>Or this:</p>\n\n<ul>\n<li>Open the Windows Explorer, from the Tools select 'Folder Options...'</li>\n<li>Click the File Types tab, scroll down and select JAR File type.</li>\n<li>Press the Advanced button.</li>\n<li>In the Edit File Type dialog box, select open in Actions box and click Edit...</li>\n<li>Press the Browse button and navigate to the location the Java interpreter javaw.exe.</li>\n<li>In the Application used to perform action field, needs to display something similar to <code>C:\\Program Files\\Java\\j2re1.4.2_04\\bin\\javaw.exe\" -jar \"%1\" %</code> (Note: the part starting with 'javaw' must be exactly like that; the other part of the path name can vary depending on which version of Java you're using) then press the OK buttons until all the dialogs are closed.</li>\n</ul>\n\n<p>Which was stolen from here: <a href=\"http://windowstipoftheday.blogspot.com/2005/10/setting-jar-file-association.html\" rel=\"noreferrer\">http://windowstipoftheday.blogspot.com/2005/10/setting-jar-file-association.html</a></p>\n"},{"tags":[],"owner":{"display_name":"Stephen Gilbert"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1230414986,"creation_date":1230414986,"answer_id":395470,"question_id":394616,"body_markdown":"Besides all of the other suggestions, there is one other thing you need to consider. Is your helloworld.jar a console program? If it is, then I don&#39;t believe you&#39;ll be able to make it into a double-clickable jar file. Console programs use the regular cmd.exe shell window for their input and output. Usually the jar &quot;launcher&quot; is bound to javaw.exe which doesn&#39;t create a command-shell window.","title":"Running JAR file on Windows","body":"<p>Besides all of the other suggestions, there is one other thing you need to consider. Is your helloworld.jar a console program? If it is, then I don't believe you'll be able to make it into a double-clickable jar file. Console programs use the regular cmd.exe shell window for their input and output. Usually the jar \"launcher\" is bound to javaw.exe which doesn't create a command-shell window.</p>\n"},{"tags":[],"owner":{"account_id":880408,"reputation":898,"user_id":177055,"display_name":"Bob"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1553572439,"creation_date":1253614368,"answer_id":1459206,"question_id":394616,"body_markdown":"An interesting side effect of this causes a problem when starting runnable jar files in the command prompt.\r\n\r\nIf you try (in a command prompt):\r\n\r\n    jarfile.jar parameter\r\n\r\nNo joy, because this is being translated to the following (which doesn&#39;t work):\r\n\r\n    javaw.exe -jar jarfile.jar parameter\r\n\r\nHowever, the following command does work:\r\n\r\n    java.exe -jar jarfile.jar parameter\r\n\r\nIf you change the association in file manager as described above to:\r\n\r\n    &quot;C:\\Program Files\\Java\\j2re1.4.2_04\\bin\\java.exe&quot; -jar &quot;%1&quot; %*\r\n\r\nThen you can type:\r\n\r\n    jarfile.jar parameter\r\n\r\nin the command prompt and it will now work! \r\n\r\nEDIT:(However you then get a black console window when you run a form based (non console) Java app, so this is not an ideal solution)\r\n\r\nIf you run these jar files by double clicking them in windows, no parameters will be passed so your Java code needs to handle the stack overflow exception and include a &quot;press a key&quot; function at the end or the window will just disappear.\r\n\r\nIn order to pass a parameter in windows you have to create a shortcut to the jar file, which includes the parameter in the target line (right click on the shortcut and select properties) you can not add parameters to the jar file icon itself in this way.\r\n\r\nThere isn&#39;t a single, consistent solution here, but you would have the same problem with any other console application. \r\n\r\nThere is a windows freeware application called &quot;bat to exe&quot; which you can use to create an exe file from a .bat file with the apropriate command line in it. you can also embed the jar file in the exe with this application, and make it clean it up when it has finished running, so this may be a more elegant solution.","title":"Running JAR file on Windows","body":"<p>An interesting side effect of this causes a problem when starting runnable jar files in the command prompt.</p>\n\n<p>If you try (in a command prompt):</p>\n\n<pre><code>jarfile.jar parameter\n</code></pre>\n\n<p>No joy, because this is being translated to the following (which doesn't work):</p>\n\n<pre><code>javaw.exe -jar jarfile.jar parameter\n</code></pre>\n\n<p>However, the following command does work:</p>\n\n<pre><code>java.exe -jar jarfile.jar parameter\n</code></pre>\n\n<p>If you change the association in file manager as described above to:</p>\n\n<pre><code>\"C:\\Program Files\\Java\\j2re1.4.2_04\\bin\\java.exe\" -jar \"%1\" %*\n</code></pre>\n\n<p>Then you can type:</p>\n\n<pre><code>jarfile.jar parameter\n</code></pre>\n\n<p>in the command prompt and it will now work! </p>\n\n<p>EDIT:(However you then get a black console window when you run a form based (non console) Java app, so this is not an ideal solution)</p>\n\n<p>If you run these jar files by double clicking them in windows, no parameters will be passed so your Java code needs to handle the stack overflow exception and include a \"press a key\" function at the end or the window will just disappear.</p>\n\n<p>In order to pass a parameter in windows you have to create a shortcut to the jar file, which includes the parameter in the target line (right click on the shortcut and select properties) you can not add parameters to the jar file icon itself in this way.</p>\n\n<p>There isn't a single, consistent solution here, but you would have the same problem with any other console application. </p>\n\n<p>There is a windows freeware application called \"bat to exe\" which you can use to create an exe file from a .bat file with the apropriate command line in it. you can also embed the jar file in the exe with this application, and make it clean it up when it has finished running, so this may be a more elegant solution.</p>\n"},{"comments":[{"owner":{"account_id":3612588,"reputation":1387,"user_id":4598449,"display_name":"Nick J"},"score":5,"creation_date":1608406145,"post_id":2022161,"comment_id":115576477,"body_markdown":"it would be great if someone somewhere could detail the changes this executable makes so that someone could choose to repeat it manually without exetuting some random strangers compiled code.","body":"it would be great if someone somewhere could detail the changes this executable makes so that someone could choose to repeat it manually without exetuting some random strangers compiled code."}],"tags":[],"owner":{"account_id":42068,"reputation":20631,"user_id":122441,"accept_rate":70,"display_name":"Hendy Irawan"},"comment_count":1,"down_vote_count":2,"up_vote_count":87,"is_accepted":false,"score":85,"last_activity_date":1343384744,"creation_date":1262884482,"answer_id":2022161,"question_id":394616,"body_markdown":"In Windows Vista or Windows 7, the [manual file association editor][1] has been removed.\r\n\r\nThe easiest way is to run [Jarfix][2], a tiny but powerful freeware tool. Just run it and your Java apps is back... double-clickable again.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/394616/running-jar-file-in-windows/394628#394628\r\n  [2]: http://johann.loefflmann.net/en/software/jarfix/index.html","title":"Running JAR file on Windows","body":"<p>In Windows Vista or Windows 7, the <a href=\"https://stackoverflow.com/questions/394616/running-jar-file-in-windows/394628#394628\">manual file association editor</a> has been removed.</p>\n\n<p>The easiest way is to run <a href=\"http://johann.loefflmann.net/en/software/jarfix/index.html\" rel=\"noreferrer\">Jarfix</a>, a tiny but powerful freeware tool. Just run it and your Java apps is back... double-clickable again.</p>\n"},{"comments":[{"owner":{"account_id":5894,"reputation":19311,"user_id":9702,"accept_rate":91,"display_name":"Jeremy Stein"},"score":1,"creation_date":1340631529,"post_id":2022372,"comment_id":14686389,"body_markdown":"An anonymous user tested this with Windows 7 (JRE 7).  They say it works if you run cmd as admin.","body":"An anonymous user tested this with Windows 7 (JRE 7).  They say it works if you run cmd as admin."},{"owner":{"account_id":1936925,"reputation":163,"user_id":1744160,"display_name":"SixDoubleFiveTreeTwoOne"},"score":0,"creation_date":1512031675,"post_id":2022372,"comment_id":82095815,"body_markdown":"Best solution in my eyes. Works up to Windows 10. The commands ftype and assoc should run in a command prompt windows with admin privileges.","body":"Best solution in my eyes. Works up to Windows 10. The commands ftype and assoc should run in a command prompt windows with admin privileges."}],"tags":[],"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1262886461,"creation_date":1262886461,"answer_id":2022372,"question_id":394616,"body_markdown":"In Windows XP &lt;sup&gt;*&lt;/sup&gt; you need just 2 *shell* commands:\r\n\r\n       C:\\&gt;ftype myjarfile=&quot;C:\\JRE1.6\\bin\\javaw.exe&quot; -jar &quot;%1&quot; %* \r\n       C:\\&gt;assoc .jar=myjarfile  \r\n\r\nobviously using the correct path for the JRE and any name you want instead of `myjarfile`.\r\n\r\nTo just check the current settings:\r\n\r\n       C:\\&gt;assoc .jar  \r\n       C:\\&gt;ftype jarfile  \r\n\r\nthis time using the value returned by the first command, if any, instead of `jarfile`.\r\n\r\n&lt;sup&gt;*&lt;/sup&gt; *not tested with Windows 7*","title":"Running JAR file on Windows","body":"<p>In Windows XP <sup>*</sup> you need just 2 <em>shell</em> commands:</p>\n\n<pre><code>   C:\\&gt;ftype myjarfile=\"C:\\JRE1.6\\bin\\javaw.exe\" -jar \"%1\" %* \n   C:\\&gt;assoc .jar=myjarfile  \n</code></pre>\n\n<p>obviously using the correct path for the JRE and any name you want instead of <code>myjarfile</code>.</p>\n\n<p>To just check the current settings:</p>\n\n<pre><code>   C:\\&gt;assoc .jar  \n   C:\\&gt;ftype jarfile  \n</code></pre>\n\n<p>this time using the value returned by the first command, if any, instead of <code>jarfile</code>.</p>\n\n<p><sup>*</sup> <em>not tested with Windows 7</em></p>\n"},{"comments":[{"owner":{"account_id":4705607,"reputation":8431,"user_id":3807861,"accept_rate":92,"display_name":"Joe"},"score":1,"creation_date":1460483821,"post_id":2879843,"comment_id":60760385,"body_markdown":"Great way to run a jar on Windows!  It also doesn&#39;t hide the command line input, so I was able to see why my jar wasn&#39;t running like I thought it should.  Thank you.","body":"Great way to run a jar on Windows!  It also doesn&#39;t hide the command line input, so I was able to see why my jar wasn&#39;t running like I thought it should.  Thank you."}],"tags":[],"owner":{"account_id":617570,"reputation":367,"user_id":346795,"display_name":"Pusu"},"comment_count":1,"down_vote_count":2,"up_vote_count":37,"is_accepted":false,"score":35,"last_activity_date":1454082367,"creation_date":1274421387,"answer_id":2879843,"question_id":394616,"body_markdown":"If you have a jar file called Example.jar, follow these rules:\r\n\r\n 1. Open a `notepad.exe`\r\n 2. Write : `java -jar Example.jar`\r\n 3. Save it with the extension `.bat`\r\n 4. Copy it to the directory which has the `.jar` file\r\n 5. Double click it to run your `.jar` file","title":"Running JAR file on Windows","body":"<p>If you have a jar file called Example.jar, follow these rules:</p>\n\n<ol>\n<li>Open a <code>notepad.exe</code></li>\n<li>Write : <code>java -jar Example.jar</code></li>\n<li>Save it with the extension <code>.bat</code></li>\n<li>Copy it to the directory which has the <code>.jar</code> file</li>\n<li>Double click it to run your <code>.jar</code> file</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"score":0,"creation_date":1499477249,"post_id":7470683,"comment_id":76938536,"body_markdown":"But how is the .bat executed? Would this be the same strategy to get the Java application to open up a command-line session as well?","body":"But how is the .bat executed? Would this be the same strategy to get the Java application to open up a command-line session as well?"},{"owner":{"display_name":"user9016207"},"score":1,"creation_date":1517084699,"post_id":7470683,"comment_id":83953310,"body_markdown":"Well no, you would just open the bat file. I&#39;m not sure I understand your question.","body":"Well no, you would just open the bat file. I&#39;m not sure I understand your question."}],"tags":[],"owner":{"account_id":920877,"reputation":877,"user_id":952609,"display_name":"Demorf"},"comment_count":2,"down_vote_count":2,"up_vote_count":78,"is_accepted":false,"score":76,"last_activity_date":1488578254,"creation_date":1316434114,"answer_id":7470683,"question_id":394616,"body_markdown":"If you need to distribute your .jar file and make it runnable at other people&#39;s Windows computers,\r\nyou can make a simple .bat file like this in the command prompt:\r\n\r\n    java -jar MyJavaTool.jar\r\n\r\nand place the .bat file in the same directory as your .jar file.","title":"Running JAR file on Windows","body":"<p>If you need to distribute your .jar file and make it runnable at other people's Windows computers,\nyou can make a simple .bat file like this in the command prompt:</p>\n\n<pre><code>java -jar MyJavaTool.jar\n</code></pre>\n\n<p>and place the .bat file in the same directory as your .jar file.</p>\n"},{"tags":[],"owner":{"account_id":442078,"reputation":76,"user_id":832521,"display_name":"lawid"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1326837835,"creation_date":1326837835,"answer_id":8902372,"question_id":394616,"body_markdown":"I&#180;m running Windows 7 x64 and was unable to use any of these fixes.\r\n\r\nThis one worked for me afterall:\r\n\r\n[http://thepanz.netsons.org/post/windows7-jar-file-association-broken-with-nokia-ovi][1]\r\n\r\n\r\n  [1]: http://thepanz.netsons.org/post/windows7-jar-file-association-broken-with-nokia-ovi\r\n\r\nThere is an archive which you can download containing a .bat file to run, but check the path of the actual javaw.exe!!!!","title":"Running JAR file on Windows","body":"<p>I´m running Windows 7 x64 and was unable to use any of these fixes.</p>\n\n<p>This one worked for me afterall:</p>\n\n<p><a href=\"http://thepanz.netsons.org/post/windows7-jar-file-association-broken-with-nokia-ovi\">http://thepanz.netsons.org/post/windows7-jar-file-association-broken-with-nokia-ovi</a></p>\n\n<p>There is an archive which you can download containing a .bat file to run, but check the path of the actual javaw.exe!!!!</p>\n"},{"tags":[],"owner":{"account_id":2000883,"reputation":117,"user_id":1791970,"display_name":"suraj"},"comment_count":0,"down_vote_count":2,"up_vote_count":12,"is_accepted":false,"score":10,"last_activity_date":1351788882,"creation_date":1351787599,"answer_id":13181501,"question_id":394616,"body_markdown":"First set path on cmd(command prompt):\r\n\r\n    set path=&quot;C:\\Program Files\\Java\\jre6\\bin&quot;\r\n\r\nthen type\r\n\r\n    java -jar yourProgramname.jar \r\n","title":"Running JAR file on Windows","body":"<p>First set path on cmd(command prompt):</p>\n\n<pre><code>set path=\"C:\\Program Files\\Java\\jre6\\bin\"\n</code></pre>\n\n<p>then type</p>\n\n<pre><code>java -jar yourProgramname.jar \n</code></pre>\n"},{"comments":[{"owner":{"account_id":1935451,"reputation":8118,"user_id":1743811,"display_name":"doubleDown"},"score":0,"creation_date":1376351242,"post_id":18198189,"comment_id":26670630,"body_markdown":"Doesn&#39;t seem to be guaranteed to work though, according to this [question](http://stackoverflow.com/q/4881136/1743811)","body":"Doesn&#39;t seem to be guaranteed to work though, according to this <a href=\"http://stackoverflow.com/q/4881136/1743811\">question</a>"}],"tags":[],"owner":{"display_name":"user2675678"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1376349455,"creation_date":1376349455,"answer_id":18198189,"question_id":394616,"body_markdown":"If you use eclipse for making your java files, you can choose to export it as a runnable jar file. I did this with my programs and I can just click on the jar and it will run just like that. This will work on both windows, as well as os x.","title":"Running JAR file on Windows","body":"<p>If you use eclipse for making your java files, you can choose to export it as a runnable jar file. I did this with my programs and I can just click on the jar and it will run just like that. This will work on both windows, as well as os x.</p>\n"},{"tags":[],"owner":{"account_id":1297652,"reputation":805,"user_id":1248294,"accept_rate":100,"display_name":"dario111cro"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1377611942,"creation_date":1377611942,"answer_id":18467548,"question_id":394616,"body_markdown":"There is way without requiring user to do changes on his PC. Runtime.getRuntime.exec() allows us to start cmd.exe and execute commands inside of it. So, it&#39;s possible for java program to run itself in command prompt when user clicks .jar file.\r\n\r\n    public static void main(String[] args) throws IOException {\r\n\t\tif(args.length == 0) {\r\n\t\t\tProcess p = Runtime.getRuntime().exec(&quot;cmd.exe /c start java -jar &quot; + (new File(NameOfClass.class.getProtectionDomain().getCodeSource().getLocation().getPath())).getAbsolutePath() + &quot; cmd&quot;);\r\n\t\t} else {\r\n\t\t\t//code to be executed\r\n\t\t}\r\n\t}","title":"Running JAR file on Windows","body":"<p>There is way without requiring user to do changes on his PC. Runtime.getRuntime.exec() allows us to start cmd.exe and execute commands inside of it. So, it's possible for java program to run itself in command prompt when user clicks .jar file.</p>\n\n<pre><code>public static void main(String[] args) throws IOException {\n    if(args.length == 0) {\n        Process p = Runtime.getRuntime().exec(\"cmd.exe /c start java -jar \" + (new File(NameOfClass.class.getProtectionDomain().getCodeSource().getLocation().getPath())).getAbsolutePath() + \" cmd\");\n    } else {\n        //code to be executed\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3801209,"reputation":283,"user_id":3154817,"accept_rate":50,"display_name":"raedma"},"score":0,"creation_date":1493300043,"post_id":19593238,"comment_id":74365938,"body_markdown":"This was it. Thanks. All the other things did not help.","body":"This was it. Thanks. All the other things did not help."},{"owner":{"account_id":56357,"reputation":358,"user_id":168798,"display_name":"beermann"},"score":0,"creation_date":1620985489,"post_id":19593238,"comment_id":119364891,"body_markdown":"4 years later AdoptOpenJDK Java 11 - One and only solution that worked. Thank You.","body":"4 years later AdoptOpenJDK Java 11 - One and only solution that worked. Thank You."},{"owner":{"account_id":3045621,"reputation":2479,"user_id":2581372,"display_name":"jirimertin"},"score":0,"creation_date":1662582441,"post_id":19593238,"comment_id":130042064,"body_markdown":"Shame, I cannot bookmark this answer. Works!","body":"Shame, I cannot bookmark this answer. Works!"}],"tags":[],"owner":{"account_id":2737536,"reputation":3891,"user_id":2359883,"display_name":"grwww"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1493129610,"creation_date":1382713025,"answer_id":19593238,"question_id":394616,"body_markdown":"In regedit, open `HKEY_CLASSES_ROOT\\Applications\\java.exe\\shell\\open\\command`\r\n\r\nDouble click on default on the left and add -jar between the `java.exe` path and the &quot;`%1`&quot; argument.","title":"Running JAR file on Windows","body":"<p>In regedit, open <code>HKEY_CLASSES_ROOT\\Applications\\java.exe\\shell\\open\\command</code></p>\n\n<p>Double click on default on the left and add -jar between the <code>java.exe</code> path and the \"<code>%1</code>\" argument.</p>\n"},{"tags":[],"owner":{"account_id":5192587,"reputation":1,"user_id":4155065,"display_name":"freeloaderzful"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1413576668,"creation_date":1413576668,"answer_id":26432758,"question_id":394616,"body_markdown":"Making a start.bat was the only thing that worked for me.\r\n\r\nopen a text document and enter. java -jar ***whatever yours is called*** .jar\r\n\r\nsave as start.bat in the same folder as the .jar file you want to execute.  and then run the. bat","title":"Running JAR file on Windows","body":"<p>Making a start.bat was the only thing that worked for me.</p>\n\n<p>open a text document and enter. java -jar <strong><em>whatever yours is called</em></strong> .jar</p>\n\n<p>save as start.bat in the same folder as the .jar file you want to execute.  and then run the. bat</p>\n"},{"comments":[{"owner":{"account_id":1301184,"reputation":707,"user_id":1251057,"display_name":"r590"},"score":0,"creation_date":1629303466,"post_id":26803522,"comment_id":121653130,"body_markdown":"Direct registry editing worked for me because jarfix no longer detects JRE 11.","body":"Direct registry editing worked for me because jarfix no longer detects JRE 11."}],"tags":[],"owner":{"account_id":469736,"reputation":19073,"user_id":876497,"accept_rate":64,"display_name":"DejanLekic"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1415371643,"creation_date":1415370752,"answer_id":26803522,"question_id":394616,"body_markdown":"Unfortunatelly, it is not so easy as Microsoft has removed advanced file association dialog in recent Windows editions. - With newer Windows versions you may only specify the application that is going to be used to open .jar file.\r\n\r\nFixing .jar file opening on Windows requires two steps.\r\n\r\n 1. Open the Control Panel, and chose &quot;Default Programs -&gt; Set Associations&quot;. Find .jar extension (*Executable JAR file*) there, and pick Java as default program to open this extension. It will probably be listed as &quot;*Java Platform(SE)*&quot;. A faster alternative perhaps is straightforward right-click on a .jar file, and then change associated program by clicking on the &quot;Change...&quot; button.\r\n\r\n 2. Now open the regedit, and open the `HKEY_CLASSES_ROOT\\jarfile\\shell\\open\\command` key. Luckilly for us, we may specify parameters there for the `(Default)` value. On my Windows system it looks like: `C:\\app\\32\\jre7\\bin\\javaw.exe&quot; -jar &quot;%1&quot; %*` but in most cases it is the following string: `C:\\Program Files\\Java\\jre7\\bin\\javaw.exe&quot; -jar &quot;%1&quot; %*`\r\n\r\nNOTES: \r\n\r\n - Do not use `java.exe` there as it will open the shell window.\r\n - The *jarfix* tool mentioned in this thread most likely does nothing more than the registry modification for you. I prefer manual registry change method, as that implies that system administrator can &quot;push&quot; the registry change to all workstations in the network.","title":"Running JAR file on Windows","body":"<p>Unfortunatelly, it is not so easy as Microsoft has removed advanced file association dialog in recent Windows editions. - With newer Windows versions you may only specify the application that is going to be used to open .jar file.</p>\n\n<p>Fixing .jar file opening on Windows requires two steps.</p>\n\n<ol>\n<li><p>Open the Control Panel, and chose \"Default Programs -> Set Associations\". Find .jar extension (<em>Executable JAR file</em>) there, and pick Java as default program to open this extension. It will probably be listed as \"<em>Java Platform(SE)</em>\". A faster alternative perhaps is straightforward right-click on a .jar file, and then change associated program by clicking on the \"Change...\" button.</p></li>\n<li><p>Now open the regedit, and open the <code>HKEY_CLASSES_ROOT\\jarfile\\shell\\open\\command</code> key. Luckilly for us, we may specify parameters there for the <code>(Default)</code> value. On my Windows system it looks like: <code>C:\\app\\32\\jre7\\bin\\javaw.exe\" -jar \"%1\" %*</code> but in most cases it is the following string: <code>C:\\Program Files\\Java\\jre7\\bin\\javaw.exe\" -jar \"%1\" %*</code></p></li>\n</ol>\n\n<p>NOTES: </p>\n\n<ul>\n<li>Do not use <code>java.exe</code> there as it will open the shell window.</li>\n<li>The <em>jarfix</em> tool mentioned in this thread most likely does nothing more than the registry modification for you. I prefer manual registry change method, as that implies that system administrator can \"push\" the registry change to all workstations in the network.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5461674,"reputation":11,"user_id":4343596,"display_name":"user4343596"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1493134221,"creation_date":1418168432,"answer_id":27390927,"question_id":394616,"body_markdown":" Another way to run jar files with a click/double-click, is to prepend &quot;-jar &quot; to the\r\nfile&#39;s name. For example, you would rename the file **`MyJar.jar`** to **`-jar MyJar.jar`**.\r\n\r\nYou must have the `.class` files associated with `java.exe`, of course. This might not work in all cases, but it has worked most times for me.","title":"Running JAR file on Windows","body":"<p>Another way to run jar files with a click/double-click, is to prepend \"-jar \" to the\nfile's name. For example, you would rename the file <strong><code>MyJar.jar</code></strong> to <strong><code>-jar MyJar.jar</code></strong>.</p>\n\n<p>You must have the <code>.class</code> files associated with <code>java.exe</code>, of course. This might not work in all cases, but it has worked most times for me.</p>\n"},{"tags":[],"owner":{"account_id":3177881,"reputation":1649,"user_id":2685304,"accept_rate":68,"display_name":"Nomesh DeSilva"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1431054407,"creation_date":1431054407,"answer_id":30115096,"question_id":394616,"body_markdown":"If you need to run the jar file by double clicking on it, you have to create it as a &quot;**Runnable JAR**&quot;. you can do it simply with your IDE.\r\n\r\nIf you&#39;re using eclipse, follow these steps :\r\n\r\n        To create a new runnable JAR file in the workbench:\r\n    \r\n    1.From the menu bar&#39;s File menu, select Export.\r\n    2.Expand the Java node and select Runnable JAR file. Click Next.\r\n    3.In the  Opens the Runnable JAR export wizard Runnable JAR File Specification page, select a &#39;Java Application&#39; launch configuration to use to create a runnable JAR.\r\n    4.In the Export destination field, either type or click Browse to select a location for the JAR file.\r\n    5.Select an appropriate library handling strategy.\r\n    Optionally, you can also create an ANT script to quickly regenerate a previously created runnable JAR file.\r\n\r\nmore information can be found on Eclipse help Page: [LINK][1]\r\n\r\n\r\n  [1]: http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftasks-37.htm","title":"Running JAR file on Windows","body":"<p>If you need to run the jar file by double clicking on it, you have to create it as a \"<strong>Runnable JAR</strong>\". you can do it simply with your IDE.</p>\n\n<p>If you're using eclipse, follow these steps :</p>\n\n<pre><code>    To create a new runnable JAR file in the workbench:\n\n1.From the menu bar's File menu, select Export.\n2.Expand the Java node and select Runnable JAR file. Click Next.\n3.In the  Opens the Runnable JAR export wizard Runnable JAR File Specification page, select a 'Java Application' launch configuration to use to create a runnable JAR.\n4.In the Export destination field, either type or click Browse to select a location for the JAR file.\n5.Select an appropriate library handling strategy.\nOptionally, you can also create an ANT script to quickly regenerate a previously created runnable JAR file.\n</code></pre>\n\n<p>more information can be found on Eclipse help Page: <a href=\"http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftasks-37.htm\" rel=\"nofollow\">LINK</a></p>\n"},{"comments":[{"owner":{"account_id":393659,"reputation":1189,"user_id":755640,"accept_rate":76,"display_name":"wilkas"},"score":0,"creation_date":1612258119,"post_id":41423675,"comment_id":116703778,"body_markdown":"Does not work on my Win10. Also there is no Java/JDK, only Java/JRE folders","body":"Does not work on my Win10. Also there is no Java/JDK, only Java/JRE folders"}],"tags":[],"owner":{"account_id":7068236,"reputation":409,"user_id":5410830,"display_name":"skaveesh"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1483346804,"creation_date":1483346804,"answer_id":41423675,"question_id":394616,"body_markdown":"I had the same problem in Windows 10. I fixed it using **righ-click** on the &quot;**helloworld.jar**&quot; and go to **properties** and click on **change** button under &quot;Opens with:&quot; and select &quot;**Look for another app on this PC**&quot;. In the &quot;**Open with...**&quot; dialog box, go to your Java folder location on your PC and open corresponding jdk folder and then open the **bin** folder and select &quot;**javaw.exe**&quot; from there. Then next time your &quot;**helloworld.jar**&quot; will open the normal way.\r\n\r\nUsual java location example : &quot;**C:\\Program Files (x86)\\Java\\jdk1.8.0_111\\bin**&quot;.","title":"Running JAR file on Windows","body":"<p>I had the same problem in Windows 10. I fixed it using <strong>righ-click</strong> on the \"<strong>helloworld.jar</strong>\" and go to <strong>properties</strong> and click on <strong>change</strong> button under \"Opens with:\" and select \"<strong>Look for another app on this PC</strong>\". In the \"<strong>Open with...</strong>\" dialog box, go to your Java folder location on your PC and open corresponding jdk folder and then open the <strong>bin</strong> folder and select \"<strong>javaw.exe</strong>\" from there. Then next time your \"<strong>helloworld.jar</strong>\" will open the normal way.</p>\n\n<p>Usual java location example : \"<strong>C:\\Program Files (x86)\\Java\\jdk1.8.0_111\\bin</strong>\".</p>\n"},{"tags":[],"owner":{"account_id":12068596,"reputation":1,"user_id":9050285,"display_name":"irisrei08"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1512391242,"creation_date":1512382967,"answer_id":47631159,"question_id":394616,"body_markdown":"There are many [methods][1] for running .jar file on windows. One of them is using the command prompt. \r\n\r\nSteps :\r\n\r\n1. Open command prompt(Run as administrator)\r\n2. Now write &quot;cd\\&quot; command for root directory\r\n3. Type &quot;java jar filename.jar&quot;\r\nNote: you can also use any third party apps like WinRAR, jarfix, etc.\r\n\r\n\r\n  [1]: http://www.internetgeeks.org/tech/computer/how-to-open-jar-files-windows/","title":"Running JAR file on Windows","body":"<p>There are many <a href=\"http://www.internetgeeks.org/tech/computer/how-to-open-jar-files-windows/\" rel=\"nofollow noreferrer\">methods</a> for running .jar file on windows. One of them is using the command prompt. </p>\n\n<p>Steps :</p>\n\n<ol>\n<li>Open command prompt(Run as administrator)</li>\n<li>Now write \"cd\\\" command for root directory</li>\n<li>Type \"java jar filename.jar\"\nNote: you can also use any third party apps like WinRAR, jarfix, etc.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":10250039,"reputation":1867,"user_id":7564593,"display_name":"Bandham Manikanta"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1604923889,"creation_date":1513190929,"answer_id":47800168,"question_id":394616,"body_markdown":"&gt; use `.bat` file:\r\n\r\nPut your command in a .bat file. here, your command will be `java -jar path\\yourJarName.jar`. \r\n`Something like: java -jar C:\\workspace\\myApplication.jar`\r\n\r\nSave it and double click on bat file to run your jar.","title":"Running JAR file on Windows","body":"<blockquote>\n<p>use <code>.bat</code> file:</p>\n</blockquote>\n<p>Put your command in a .bat file. here, your command will be <code>java -jar path\\yourJarName.jar</code>.\n<code>Something like: java -jar C:\\workspace\\myApplication.jar</code></p>\n<p>Save it and double click on bat file to run your jar.</p>\n"},{"tags":[],"owner":{"account_id":12706678,"reputation":429,"user_id":9231718,"display_name":"Manthan_Admane"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1537463321,"creation_date":1537382314,"answer_id":52412281,"question_id":394616,"body_markdown":"**PreScript**: If your prompt appears and disappears immediately, the reason it does so is that your program gets executed and auto shut. Try putting a scanner in the end to terminate and it&#39;ll keep your prompt waiting for input before terminating. (Or use delay maybe)\r\n\r\nWas in the very same situation, where running .jar from cmd was working fine, but double clicking did nothing.\r\n\r\nSolution:\r\nOpen any text editor and write the command line:\r\n java -jar Example.jar\r\nSave the file as a .bat file.\r\nRun this bat file to get the needed output.\r\n\r\nTaking it one step forward, you can convert this bat file to exe file using a simple GUI tool like Bat To Exe Converter.\r\n\r\nNow you can share your .jar as a distribution in .exe file which anyone can use just make sure you keep all the files together. (Especially the .jar and .bat file cause .bat is only a cmd prompt)(How it feels logical)\r\n\r\nI am fairly new to development and learning a lot. Please excuse for any mistakes if committed. Suggestions are welcome.","title":"Running JAR file on Windows","body":"<p><strong>PreScript</strong>: If your prompt appears and disappears immediately, the reason it does so is that your program gets executed and auto shut. Try putting a scanner in the end to terminate and it'll keep your prompt waiting for input before terminating. (Or use delay maybe)</p>\n\n<p>Was in the very same situation, where running .jar from cmd was working fine, but double clicking did nothing.</p>\n\n<p>Solution:\nOpen any text editor and write the command line:\n java -jar Example.jar\nSave the file as a .bat file.\nRun this bat file to get the needed output.</p>\n\n<p>Taking it one step forward, you can convert this bat file to exe file using a simple GUI tool like Bat To Exe Converter.</p>\n\n<p>Now you can share your .jar as a distribution in .exe file which anyone can use just make sure you keep all the files together. (Especially the .jar and .bat file cause .bat is only a cmd prompt)(How it feels logical)</p>\n\n<p>I am fairly new to development and learning a lot. Please excuse for any mistakes if committed. Suggestions are welcome.</p>\n"},{"comments":[{"owner":{"account_id":1003933,"reputation":3792,"user_id":1018154,"display_name":"CodeToLife"},"score":1,"creation_date":1604905119,"post_id":53321138,"comment_id":114478632,"body_markdown":"This is the only right answer to launch the jar by click for java 11. But you need to do **once** a bit more  :  **uninstall lower jdks(optionally), right click a jar file-&gt;open with-&gt; choose another app-&gt;check &#39;always use...&#39; checkbox-&gt;apps on this comp(or such this)-&gt;navigate to the bat-&gt;launch**","body":"This is the only right answer to launch the jar by click for java 11. But you need to do <b>once</b> a bit more  :  <b>uninstall lower jdks(optionally), right click a jar file-&gt;open with-&gt; choose another app-&gt;check &#39;always use...&#39; checkbox-&gt;apps on this comp(or such this)-&gt;navigate to the bat-&gt;launch</b>"}],"tags":[],"owner":{"account_id":8317671,"reputation":4009,"user_id":6250402,"display_name":"hong4rc"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1542290444,"creation_date":1542290444,"answer_id":53321138,"question_id":394616,"body_markdown":"Create `.bat` file:\r\n\r\n    start javaw -jar %*\r\n\r\nAnd choose app default to open `.jar` with this `.bat` file.\r\n\r\nIt will close `cmd` when start your `.jar` file.\r\n","title":"Running JAR file on Windows","body":"<p>Create <code>.bat</code> file:</p>\n\n<pre><code>start javaw -jar %*\n</code></pre>\n\n<p>And choose app default to open <code>.jar</code> with this <code>.bat</code> file.</p>\n\n<p>It will close <code>cmd</code> when start your <code>.jar</code> file.</p>\n"},{"tags":[],"owner":{"account_id":14277658,"reputation":51,"user_id":10313224,"display_name":"anil kumar meena"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557153238,"creation_date":1557138369,"answer_id":56003292,"question_id":394616,"body_markdown":"For compiling: \r\n\r\n    javac  -cp &quot;.;./mysql-connector-java-5.0.8.jar;mybatis-3.0.1.jar;ibatis-2.3.0.677.jar&quot; MainStart.java\r\n\r\nFor running: \r\n\r\n    java  -cp &quot;.;./mysql-connector-java-5.0.8.jar;mybatis-3.0.1.jar;ibatis-2.3.0.677.jar&quot; MainStart","title":"Running JAR file on Windows","body":"<p>For compiling: </p>\n\n<pre><code>javac  -cp \".;./mysql-connector-java-5.0.8.jar;mybatis-3.0.1.jar;ibatis-2.3.0.677.jar\" MainStart.java\n</code></pre>\n\n<p>For running: </p>\n\n<pre><code>java  -cp \".;./mysql-connector-java-5.0.8.jar;mybatis-3.0.1.jar;ibatis-2.3.0.677.jar\" MainStart\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14379342,"reputation":644,"user_id":10387008,"display_name":"Eboubaker"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664872836,"creation_date":1559412305,"answer_id":56409204,"question_id":394616,"body_markdown":"Actually, I faced this problem too. I got around it by making a .bat runner for my jar file.\r\n\r\nHere is the code:\r\n\r\n    class FileHandler{\r\n\t   public static File create_CMD_Rnner(){\r\n\t      int exitCode = -1625348952;\r\n\t      try{\r\n\t           File runner = new File(Main.batName);\r\n\t           PrintWriter printer = new PrintWriter(runner);\r\n\t           printer.println(&quot;@echo off&quot;);\r\n\t           printer.println(&quot;title &quot; + Main.applicationTitle);\r\n\t           printer.println(&quot;java -jar &quot; + Main.jarName + &quot; &quot; + Main.startCode );\r\n\t           printer.println(&quot;PAUSE&quot;);\r\n\t           printer.flush();\r\n\t           printer.close();\r\n\t           return runner;\r\n\t       }catch(Exception e){\r\n\t           System.err.println(&quot;Coudln&#39;t create a runner bat \\n exit code: &quot; + exitCode);\r\n\t           System.exit(exitCode);\r\n\t           return null;\r\n\t       }\r\n\t   }\r\n\t}\r\n\r\nThen in Your Main application class do this:\r\n\r\n    public class Main{\r\n\t    static String jarName = &quot;application.jar&quot;;\r\n\t    static String applicationTitle = &quot;java Application&quot;;\r\n\t    static String startCode = &quot;javaIsTheBest&quot;;\r\n\t    static String batName = &quot;_.bat&quot;;\r\n\t\r\n\t\r\n\t    public static void main(String args[]) throws Exception{\r\n\t        if(args.length == 0 || !args[0].equals(startCode)) {\r\n\t            Desktop.getDesktop().open(FilesHandler.create_CMD_Rnner());\r\n\t            System.exit(0);\r\n\t        }else{\r\n\t            //just in case you wanted to hide the bat\r\n\t            deleteRunner();\r\n\t            // Congratulations now you are running in a cmd window ... do whatever you want\r\n\t            //......\r\n\t            System.out.println(&quot;i Am Running in CMD&quot;);\r\n\t            //......\r\n\t            Thread.sleep(84600);\r\n\t        }\r\n\t    }\r\n\t\r\n\t\r\n\t    public static void deleteRunner(){\r\n\t        File batRunner = new File(batName);\r\n\t        if(batRunner.exists()) batRunner.delete();\r\n\t    }\r\n\t}\r\n\r\n\r\n## Please Note that  ##\r\n&gt; 1. this code (my code) works only with a jar file, not a class file.\r\n&gt;\r\n&gt; 2. the jar file must have the same name as the String &quot;jarName&quot; is the Main class","title":"Running JAR file on Windows","body":"<p>Actually, I faced this problem too. I got around it by making a .bat runner for my jar file.</p>\n<p>Here is the code:</p>\n<pre><code>class FileHandler{\n   public static File create_CMD_Rnner(){\n      int exitCode = -1625348952;\n      try{\n           File runner = new File(Main.batName);\n           PrintWriter printer = new PrintWriter(runner);\n           printer.println(&quot;@echo off&quot;);\n           printer.println(&quot;title &quot; + Main.applicationTitle);\n           printer.println(&quot;java -jar &quot; + Main.jarName + &quot; &quot; + Main.startCode );\n           printer.println(&quot;PAUSE&quot;);\n           printer.flush();\n           printer.close();\n           return runner;\n       }catch(Exception e){\n           System.err.println(&quot;Coudln't create a runner bat \\n exit code: &quot; + exitCode);\n           System.exit(exitCode);\n           return null;\n       }\n   }\n}\n</code></pre>\n<p>Then in Your Main application class do this:</p>\n<pre><code>public class Main{\n    static String jarName = &quot;application.jar&quot;;\n    static String applicationTitle = &quot;java Application&quot;;\n    static String startCode = &quot;javaIsTheBest&quot;;\n    static String batName = &quot;_.bat&quot;;\n\n\n    public static void main(String args[]) throws Exception{\n        if(args.length == 0 || !args[0].equals(startCode)) {\n            Desktop.getDesktop().open(FilesHandler.create_CMD_Rnner());\n            System.exit(0);\n        }else{\n            //just in case you wanted to hide the bat\n            deleteRunner();\n            // Congratulations now you are running in a cmd window ... do whatever you want\n            //......\n            System.out.println(&quot;i Am Running in CMD&quot;);\n            //......\n            Thread.sleep(84600);\n        }\n    }\n\n\n    public static void deleteRunner(){\n        File batRunner = new File(batName);\n        if(batRunner.exists()) batRunner.delete();\n    }\n}\n</code></pre>\n<h2>Please Note that</h2>\n<blockquote>\n<ol>\n<li><p>this code (my code) works only with a jar file, not a class file.</p>\n</li>\n<li><p>the jar file must have the same name as the String &quot;jarName&quot; is the Main class</p>\n</li>\n</ol>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":17215809,"reputation":31,"user_id":12463889,"display_name":"kak7"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1620686687,"creation_date":1620686687,"answer_id":67478471,"question_id":394616,"body_markdown":"Got the same problem, on Windows 10\\\r\n**The solution:**\r\n1) Check your JAVA_HOME and JAVA_PATH.\\\r\n&lt;https://javatutorial.net/set-java-home-windows-10&gt;\r\n2) Use Jarfix to restore the assiciation between `.jar` and `javaw.exe`\\\r\n&lt;https://johann.loefflmann.net/en/software/jarfix/index.html&gt;","title":"Running JAR file on Windows","body":"<p>Got the same problem, on Windows 10<br />\n<strong>The solution:</strong></p>\n<ol>\n<li>Check your JAVA_HOME and JAVA_PATH.<br />\n<a href=\"https://javatutorial.net/set-java-home-windows-10\" rel=\"nofollow noreferrer\">https://javatutorial.net/set-java-home-windows-10</a></li>\n<li>Use Jarfix to restore the assiciation between <code>.jar</code> and <code>javaw.exe</code><br />\n<a href=\"https://johann.loefflmann.net/en/software/jarfix/index.html\" rel=\"nofollow noreferrer\">https://johann.loefflmann.net/en/software/jarfix/index.html</a></li>\n</ol>\n"}],"owner":{"account_id":18032,"reputation":16113,"user_id":40945,"accept_rate":78,"display_name":"DonX"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1561846,"favorite_count":0,"down_vote_count":0,"up_vote_count":297,"accepted_answer_id":394628,"answer_count":25,"score":297,"last_activity_date":1664872836,"creation_date":1230347977,"question_id":394616,"body_markdown":"I have a JAR file named *helloworld.jar*.\r\nIn order to run it, I&#39;m executing the following command in a command-line window:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    java -jar helloworld.jar\r\n\r\nThis works fine, but how do I execute it with double-click instead?\r\nDo I need to install any software?","title":"Running JAR file on Windows","body":"<p>I have a JAR file named <em>helloworld.jar</em>.\nIn order to run it, I'm executing the following command in a command-line window:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>java -jar helloworld.jar\n</code></pre>\n\n<p>This works fine, but how do I execute it with double-click instead?\nDo I need to install any software?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9233,"page":990,"page_size":100}
