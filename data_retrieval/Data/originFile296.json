{"items":[{"tags":["java","javafx","game-development","fxgl"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1690050636,"post_id":76739396,"comment_id":135300213,"body_markdown":"See also [_Game Development Stack Exchange_](https://gamedev.stackexchange.com), which may offer insight on arbitrarily large models.","body":"See also <a href=\"https://gamedev.stackexchange.com\"><i>Game Development Stack Exchange</i></a>, which may offer insight on arbitrarily large models."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1690054309,"post_id":76739396,"comment_id":135300578,"body_markdown":"You could use a [tile engine](https://www.javacodegeeks.com/2013/01/writing-a-tile-engine-in-javafx.html), (careful the link has a lot of advertising spam I cannot control but is the only available link because the original blog post no longer exists). The link outlines the concept and provides snippets of example code for an implementation, but not a complete implementation. FXGL may have a similar concept built-in, so I suggest investigating that before trying to build your own (non-trivial) or searching for a [3rd party solution](https://github.com/Kogs/JavaFXTileMap).","body":"You could use a <a href=\"https://www.javacodegeeks.com/2013/01/writing-a-tile-engine-in-javafx.html\" rel=\"nofollow noreferrer\">tile engine</a>, (careful the link has a lot of advertising spam I cannot control but is the only available link because the original blog post no longer exists). The link outlines the concept and provides snippets of example code for an implementation, but not a complete implementation. FXGL may have a similar concept built-in, so I suggest investigating that before trying to build your own (non-trivial) or searching for a <a href=\"https://github.com/Kogs/JavaFXTileMap\" rel=\"nofollow noreferrer\">3rd party solution</a>."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1690054420,"post_id":76739396,"comment_id":135300589,"body_markdown":"I did a quick search on FXGL and tile map, and [the first link that turned up was [Building Levels Using Tiled Map Editor (FXGL 11)](https://github.com/AlmasB/FXGL/wiki/Building-Levels-Using-Tiled-Map-Editor-(FXGL-11))","body":"I did a quick search on FXGL and tile map, and <a href=\"https://github.com/AlmasB/FXGL/wiki/Building-Levels-Using-Tiled-Map-Editor-(FXGL-11)\" rel=\"nofollow noreferrer\">the first link that turned up was [Building Levels Using Tiled Map Editor (FXGL 11)</a>"}],"owner":{"account_id":29064992,"reputation":1,"user_id":22264802,"display_name":"Pourya Aliannejadi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689954113,"creation_date":1689954113,"question_id":76739396,"body_markdown":"I am trying to recreate a game like Splix.io using FXGL, I have implemented the logic of the game for one player and it works.\r\nAnd for my game window I am using a 800*800 window. My problem is my game should be &quot;unbounded&quot; which means that the player should be able to move till infinity if it desires it and I have been trying different stuff to make this happen but none of them work.\r\n\r\nAs you know Splix.io has a gird like board so to create this grid I created Light Gray cells of 20 pixels like this:\r\n\r\n```\r\n@Spawns(&quot;cell&quot;)\r\npublic Entity newCell(SpawnData data) {\r\n    return FXGL.entityBuilder(data)\r\n            .view(new Rectangle(BLOCK_SIZE,BLOCK_SIZE, Color.LIGHTGRAY))\r\n            .with(new CellComponent())\r\n            .build();\r\n}\r\n\r\n@Spawns(&quot;player&quot;)\r\npublic Entity newPlayer(SpawnData data) {\r\n    return FXGL.entityBuilder(data)\r\n            .view(&quot;steve.png&quot;)\r\n            .zIndex(100)\r\n            .build();\r\n}\r\n```\r\n\r\nand this is how I initialize the game board at the start:\r\n\r\n```\r\n    cells = new Entity[40][40];\r\n\r\n    player = spawn(&quot;player&quot;, 400, 400);\r\n    for (int y = 0; y &lt; 40; y++) {\r\n        for (int x = 0; x &lt; 40; x++) {\r\n            cells[x][y] = spawn(&quot;cell&quot;, x * BLOCK_SIZE, y * BLOCK_SIZE);\r\n        }\r\n    }\r\n```\r\n\r\nCan someone tell me how I can make this fixed size game unbounded?\r\nOne idea that I had was to check if the player comes close to any side of the window and if they get close I make the game window bigger and move the board but I don&#39;t know if this is the right way or not and even if it is, I don&#39;t know how to properly implement it.","title":"Having trouble creating an unbound game using FXGL","body":"<p>I am trying to recreate a game like Splix.io using FXGL, I have implemented the logic of the game for one player and it works.\nAnd for my game window I am using a 800*800 window. My problem is my game should be &quot;unbounded&quot; which means that the player should be able to move till infinity if it desires it and I have been trying different stuff to make this happen but none of them work.</p>\n<p>As you know Splix.io has a gird like board so to create this grid I created Light Gray cells of 20 pixels like this:</p>\n<pre><code>@Spawns(&quot;cell&quot;)\npublic Entity newCell(SpawnData data) {\n    return FXGL.entityBuilder(data)\n            .view(new Rectangle(BLOCK_SIZE,BLOCK_SIZE, Color.LIGHTGRAY))\n            .with(new CellComponent())\n            .build();\n}\n\n@Spawns(&quot;player&quot;)\npublic Entity newPlayer(SpawnData data) {\n    return FXGL.entityBuilder(data)\n            .view(&quot;steve.png&quot;)\n            .zIndex(100)\n            .build();\n}\n</code></pre>\n<p>and this is how I initialize the game board at the start:</p>\n<pre><code>    cells = new Entity[40][40];\n\n    player = spawn(&quot;player&quot;, 400, 400);\n    for (int y = 0; y &lt; 40; y++) {\n        for (int x = 0; x &lt; 40; x++) {\n            cells[x][y] = spawn(&quot;cell&quot;, x * BLOCK_SIZE, y * BLOCK_SIZE);\n        }\n    }\n</code></pre>\n<p>Can someone tell me how I can make this fixed size game unbounded?\nOne idea that I had was to check if the player comes close to any side of the window and if they get close I make the game window bigger and move the board but I don't know if this is the right way or not and even if it is, I don't know how to properly implement it.</p>\n"},{"tags":["java","hamcrest"],"comments":[{"owner":{"account_id":1688935,"reputation":2244,"user_id":1551685,"display_name":"Steve Smith"},"score":0,"creation_date":1485261070,"post_id":41828198,"comment_id":70843333,"body_markdown":"You will need to tell us what you have tried.","body":"You will need to tell us what you have tried."}],"answers":[{"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1485261627,"post_id":41828389,"comment_id":70843652,"body_markdown":"This is good. I realize now that I had made an incorrect inference and my answer was wrong. Well done.","body":"This is good. I realize now that I had made an incorrect inference and my answer was wrong. Well done."}],"tags":[],"owner":{"account_id":8869342,"reputation":638,"user_id":6623474,"display_name":"Florian Link"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1535023260,"creation_date":1485261361,"answer_id":41828389,"question_id":41828198,"body_markdown":"# Update\r\n\r\nAfter checking this old answer, I found that you can use a better combination of built-in matchers making both the assertion and the error messages more readable:\r\n\r\n    expectedStrings.forEach(expectedString -&gt; \r\n        assertThat(strings, hasItem(containsString(expectedString))));\r\n\r\n---\r\n# Original answer for reference\r\n\r\nYou can do it quite easily with streams:\r\n\r\n    assertThat(expectedStrings.stream().allMatch(\r\n        expectedString -&gt; strings.stream()\r\n                                 .anyMatch(string -&gt; string.contains(expectedString))),\r\n        is(true));\r\n\r\n`allMatch` will make sure all of the `expectedStrings` will be checked, and with using `anyMatch` on `strings` you can efficiently check if any of the strings contains the expected string.","title":"Assert that one of string in array contains substring","body":"<h1>Update</h1>\n\n<p>After checking this old answer, I found that you can use a better combination of built-in matchers making both the assertion and the error messages more readable:</p>\n\n<pre><code>expectedStrings.forEach(expectedString -&gt; \n    assertThat(strings, hasItem(containsString(expectedString))));\n</code></pre>\n\n<hr>\n\n<h1>Original answer for reference</h1>\n\n<p>You can do it quite easily with streams:</p>\n\n<pre><code>assertThat(expectedStrings.stream().allMatch(\n    expectedString -&gt; strings.stream()\n                             .anyMatch(string -&gt; string.contains(expectedString))),\n    is(true));\n</code></pre>\n\n<p><code>allMatch</code> will make sure all of the <code>expectedStrings</code> will be checked, and with using <code>anyMatch</code> on <code>strings</code> you can efficiently check if any of the strings contains the expected string.</p>\n"},{"tags":[],"owner":{"account_id":6087813,"reputation":15135,"user_id":4751165,"accept_rate":96,"display_name":"Pau"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1495016705,"creation_date":1495016705,"answer_id":44022215,"question_id":41828198,"body_markdown":"At the moment there isn&#39;t any matcher in hamcrest with this requeriment, despite you can combine multiple this is not possible yet.\r\n\r\nSo, in cases like yours the best solution in my opinion is to **create your own matcher** Why? \r\n\r\n - It can be reused\r\n - Is maintainable \r\n - Is more readable\r\n\r\n----\r\n\r\nSo in your case you need to match the first list contains any string of the second one, you can create a Matcher like next:\r\n\r\n\r\n    public class ContainsStringsOf extends BaseMatcher&lt;List&lt;String&gt;&gt; {\r\n    \r\n        private final List&lt;String&gt; valuesToCompare;\r\n    \r\n        public ContainsStringsOf(List&lt;String&gt; valuesToCompare) {\r\n            this.valuesToCompare = valuesToCompare;\r\n        }\r\n    \r\n        @Override\r\n        public void describeTo(Description description) {\r\n            description.appendText(&quot;doesn&#39;t contains all of &quot; + valuesToCompare.toString() + &quot; text&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public boolean matches(Object o) {\r\n            List&lt;String&gt; values = (List&lt;String&gt;) o;\r\n            for (String valueToCompare : valuesToCompare) {\r\n                boolean containsText = false;\r\n                for (String value : values) {\r\n                    if (value.contains(valueToCompare)) {\r\n                        containsText = true;\r\n                    }\r\n                }\r\n                if (!containsText) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n           //note: you can replace this impl with java-8 @florian answer comparison\r\n           //return valuesToCompare.stream().allMatch(exp -&gt; strings.stream().anyMatch(st-&gt; st.contains(exp)))\r\n        }\r\n    \r\n        @Factory\r\n        public static Matcher&lt;List&lt;String&gt;&gt; containsStringsOf(List&lt;String&gt; collection) {\r\n            return new ContainsStringsOf(collection);\r\n        }\r\n    }\r\n\r\nThen you can use it is just as hamcrest matcher is used:\r\n\r\n    List&lt;String&gt; expectedStrings = Arrays.asList(&quot;link1&quot;, &quot;link2&quot;);\r\n    List&lt;String&gt; strings = Arrays.asList(&quot;lalala link1 lalalla&quot;, &quot;lalalal link2 lalalla&quot;);\r\n    Assert.assertThat(strings , containsStringsOf(expectedStrings));\r\n\r\n","title":"Assert that one of string in array contains substring","body":"<p>At the moment there isn't any matcher in hamcrest with this requeriment, despite you can combine multiple this is not possible yet.</p>\n\n<p>So, in cases like yours the best solution in my opinion is to <strong>create your own matcher</strong> Why? </p>\n\n<ul>\n<li>It can be reused</li>\n<li>Is maintainable </li>\n<li>Is more readable</li>\n</ul>\n\n<hr>\n\n<p>So in your case you need to match the first list contains any string of the second one, you can create a Matcher like next:</p>\n\n<pre><code>public class ContainsStringsOf extends BaseMatcher&lt;List&lt;String&gt;&gt; {\n\n    private final List&lt;String&gt; valuesToCompare;\n\n    public ContainsStringsOf(List&lt;String&gt; valuesToCompare) {\n        this.valuesToCompare = valuesToCompare;\n    }\n\n    @Override\n    public void describeTo(Description description) {\n        description.appendText(\"doesn't contains all of \" + valuesToCompare.toString() + \" text\");\n    }\n\n    @Override\n    public boolean matches(Object o) {\n        List&lt;String&gt; values = (List&lt;String&gt;) o;\n        for (String valueToCompare : valuesToCompare) {\n            boolean containsText = false;\n            for (String value : values) {\n                if (value.contains(valueToCompare)) {\n                    containsText = true;\n                }\n            }\n            if (!containsText) {\n                return false;\n            }\n        }\n        return true;\n       //note: you can replace this impl with java-8 @florian answer comparison\n       //return valuesToCompare.stream().allMatch(exp -&gt; strings.stream().anyMatch(st-&gt; st.contains(exp)))\n    }\n\n    @Factory\n    public static Matcher&lt;List&lt;String&gt;&gt; containsStringsOf(List&lt;String&gt; collection) {\n        return new ContainsStringsOf(collection);\n    }\n}\n</code></pre>\n\n<p>Then you can use it is just as hamcrest matcher is used:</p>\n\n<pre><code>List&lt;String&gt; expectedStrings = Arrays.asList(\"link1\", \"link2\");\nList&lt;String&gt; strings = Arrays.asList(\"lalala link1 lalalla\", \"lalalal link2 lalalla\");\nAssert.assertThat(strings , containsStringsOf(expectedStrings));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6667122,"reputation":11,"user_id":5144453,"display_name":"Stephen Gissendaner"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689953812,"creation_date":1689953177,"answer_id":76739290,"question_id":41828198,"body_markdown":"I like the idea of a custom matcher. You could use the streams mechanism as the core of that. Here is a simple (inefficient) example:\r\n\r\n     assertThat( infoLogs.stream().filter(logItem -&gt; logItem.contains(&quot;writing out group&quot;)).collect(Collectors.toList()).size()).isNotZero();","title":"Assert that one of string in array contains substring","body":"<p>I like the idea of a custom matcher. You could use the streams mechanism as the core of that. Here is a simple (inefficient) example:</p>\n<pre><code> assertThat( infoLogs.stream().filter(logItem -&gt; logItem.contains(&quot;writing out group&quot;)).collect(Collectors.toList()).size()).isNotZero();\n</code></pre>\n"}],"owner":{"account_id":10097795,"reputation":129,"user_id":7462612,"display_name":"Hamster"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8764,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":41828389,"answer_count":3,"score":7,"last_activity_date":1689953812,"creation_date":1485260651,"question_id":41828198,"body_markdown":"    List&lt;String&gt; expectedStrings = Arrays.asList(&quot;link1&quot;, &quot;link2&quot;);\r\n    List&lt;String&gt; strings = Arrays.asList(&quot;lalala link1 lalalla&quot;, &quot;lalalal link2 lalalla&quot;);\r\n\r\nFor each expectedString, I need assert that any of string in the &#39;strings&#39; contains expectedString.\r\nHow I may assert this with Hamcrest?\r\nThanks for your attention.","title":"Assert that one of string in array contains substring","body":"<pre><code>List&lt;String&gt; expectedStrings = Arrays.asList(\"link1\", \"link2\");\nList&lt;String&gt; strings = Arrays.asList(\"lalala link1 lalalla\", \"lalalal link2 lalalla\");\n</code></pre>\n\n<p>For each expectedString, I need assert that any of string in the 'strings' contains expectedString.\nHow I may assert this with Hamcrest?\nThanks for your attention.</p>\n"},{"tags":["java","junit","mockito","powermockito","pmd"],"comments":[{"owner":{"account_id":886614,"reputation":29561,"user_id":925913,"accept_rate":82,"display_name":"Andrew Cheong"},"score":0,"creation_date":1690453611,"post_id":66115120,"comment_id":135357364,"body_markdown":"I came across this question when I was trying to figure out how to mock the response of the send / sendAsync method on HttpClient. For an answer to that, see https://stackoverflow.com/a/76778792/925913.","body":"I came across this question when I was trying to figure out how to mock the response of the send / sendAsync method on HttpClient. For an answer to that, see <a href=\"https://stackoverflow.com/a/76778792/925913\">stackoverflow.com/a/76778792/925913</a>."}],"answers":[{"comments":[{"owner":{"account_id":8085618,"reputation":422,"user_id":6093274,"accept_rate":33,"display_name":"priyanka"},"score":0,"creation_date":1612860129,"post_id":66115353,"comment_id":116891456,"body_markdown":"I don&#39;t want to use PowerMock. Is there a way to suppress this PMD warning Private field &#39;httpClient&#39; could be made final; it is only initialized in the declaration or constructor","body":"I don&#39;t want to use PowerMock. Is there a way to suppress this PMD warning Private field &#39;httpClient&#39; could be made final; it is only initialized in the declaration or constructor"},{"owner":{"account_id":12259853,"reputation":53,"user_id":8947900,"display_name":"Shubham Anand"},"score":0,"creation_date":1612860717,"post_id":66115353,"comment_id":116891681,"body_markdown":"I am suggesting to use wiremock which is a different library from powermock. But I get your point. You want to remove final. But then you are being shown it as a issue because it is an issue. I guess you are using PMD for analyzing your code. Why complain when its doing what it is supposed to.! Anyways, if thats what you want,You can add exceptions for files to not report issues on certain files in your source code analyzer. This might be helpful.\nhttps://stackoverflow.com/questions/32272138/suppressing-violations-in-pmd","body":"I am suggesting to use wiremock which is a different library from powermock. But I get your point. You want to remove final. But then you are being shown it as a issue because it is an issue. I guess you are using PMD for analyzing your code. Why complain when its doing what it is supposed to.! Anyways, if thats what you want,You can add exceptions for files to not report issues on certain files in your source code analyzer. This might be helpful. <a href=\"https://stackoverflow.com/questions/32272138/suppressing-violations-in-pmd\" title=\"suppressing violations in pmd\">stackoverflow.com/questions/32272138/&hellip;</a>"},{"owner":{"account_id":8085618,"reputation":422,"user_id":6093274,"accept_rate":33,"display_name":"priyanka"},"score":0,"creation_date":1612861141,"post_id":66115353,"comment_id":116891845,"body_markdown":"I can do this way  @SuppressWarnings(&quot;PMD&quot;) But instead of PMD i am looking for specific Code related to this error..... This  @SuppressWarnings(&quot;PMD&quot;) works but i want specific code.","body":"I can do this way  @SuppressWarnings(&quot;PMD&quot;) But instead of PMD i am looking for specific Code related to this error..... This  @SuppressWarnings(&quot;PMD&quot;) works but i want specific code."},{"owner":{"account_id":12259853,"reputation":53,"user_id":8947900,"display_name":"Shubham Anand"},"score":0,"creation_date":1612861501,"post_id":66115353,"comment_id":116891987,"body_markdown":"Well Looks like we are missing the context as to what exactly you are looking for. Please  try updating the question with more details.","body":"Well Looks like we are missing the context as to what exactly you are looking for. Please  try updating the question with more details."},{"owner":{"account_id":5240687,"reputation":1727,"user_id":4187837,"accept_rate":86,"display_name":"Gavin"},"score":0,"creation_date":1612864098,"post_id":66115353,"comment_id":116893035,"body_markdown":"So PMD is issuing you a warning saying that the field _could_ be final.  It is up to you as a developer if in this instance PMD is correct.  I would argue that in this instance PMD is correct that your real issue is you are attempting to mock something you shouldnt be mocking (HTTPClient), as Shubham says try using something like WireMock that is a much better way to test a  class that makes calls on the network, means you will have better structured code and the PMD warning will go away because the field is final.  Everything solved.","body":"So PMD is issuing you a warning saying that the field <i>could</i> be final.  It is up to you as a developer if in this instance PMD is correct.  I would argue that in this instance PMD is correct that your real issue is you are attempting to mock something you shouldnt be mocking (HTTPClient), as Shubham says try using something like WireMock that is a much better way to test a  class that makes calls on the network, means you will have better structured code and the PMD warning will go away because the field is final.  Everything solved."}],"tags":[],"owner":{"account_id":12259853,"reputation":53,"user_id":8947900,"display_name":"Shubham Anand"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1612859260,"creation_date":1612859260,"answer_id":66115353,"question_id":66115120,"body_markdown":"One of the ways to test a HTTP client code would be to not mock your HTTPClient object, but to create mock responses for the http calls and then let your HPPTClient make calls to those URLs.\r\nTake a look at Wiremock. [http://wiremock.org/docs/][1]\r\nIt helps you create a simple mock server and you can stub responses for your URLs.\r\nThen invoke your URLs using your client for the test.\r\n\r\n\r\n  [1]: http://wiremock.org/docs/","title":"How to mock HttpClient using Mockito","body":"<p>One of the ways to test a HTTP client code would be to not mock your HTTPClient object, but to create mock responses for the http calls and then let your HPPTClient make calls to those URLs.\nTake a look at Wiremock. <a href=\"http://wiremock.org/docs/\" rel=\"nofollow noreferrer\">http://wiremock.org/docs/</a>\nIt helps you create a simple mock server and you can stub responses for your URLs.\nThen invoke your URLs using your client for the test.</p>\n"},{"comments":[{"owner":{"account_id":8085618,"reputation":422,"user_id":6093274,"accept_rate":33,"display_name":"priyanka"},"score":0,"creation_date":1612860119,"post_id":66115370,"comment_id":116891451,"body_markdown":"I don&#39;t want to use PowerMock. Is there a way to suppress this PMD warning Private field &#39;httpClient&#39; could be made final; it is only initialized in the declaration or constructor","body":"I don&#39;t want to use PowerMock. Is there a way to suppress this PMD warning Private field &#39;httpClient&#39; could be made final; it is only initialized in the declaration or constructor"},{"owner":{"account_id":84846,"reputation":5030,"user_id":236936,"accept_rate":67,"display_name":"TrueDub"},"score":0,"creation_date":1612860594,"post_id":66115370,"comment_id":116891621,"body_markdown":"To suppress a PMD warning, use an annotation - see https://pmd.github.io/latest/pmd_userdocs_suppressing_warnings.html.","body":"To suppress a PMD warning, use an annotation - see <a href=\"https://pmd.github.io/latest/pmd_userdocs_suppressing_warnings.html\" rel=\"nofollow noreferrer\">pmd.github.io/latest/pmd_userdocs_suppressing_warnings.html</a>."},{"owner":{"account_id":5240687,"reputation":1727,"user_id":4187837,"accept_rate":86,"display_name":"Gavin"},"score":0,"creation_date":1612864297,"post_id":66115370,"comment_id":116893115,"body_markdown":"PowerMock is a hack, in this instance at least.  The approach to testing is the issue, `HTTPClient` shouldnt be being mocked at all, an alternative approach is what is required.","body":"PowerMock is a hack, in this instance at least.  The approach to testing is the issue, <code>HTTPClient</code> shouldnt be being mocked at all, an alternative approach is what is required."}],"tags":[],"owner":{"account_id":84846,"reputation":5030,"user_id":236936,"accept_rate":67,"display_name":"TrueDub"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1612859333,"creation_date":1612859333,"answer_id":66115370,"question_id":66115120,"body_markdown":"You can&#39;t mock a final instance using plain mocking. You need something like [PowerMock][1].\r\n\r\nSee the answer to [this question][2]for implementation.\r\n\r\n\r\n  [1]: https://github.com/powermock/powermock\r\n  [2]: https://stackoverflow.com/questions/45034464/powermock-static-final-method-in-final-class","title":"How to mock HttpClient using Mockito","body":"<p>You can't mock a final instance using plain mocking. You need something like <a href=\"https://github.com/powermock/powermock\" rel=\"nofollow noreferrer\">PowerMock</a>.</p>\n<p>See the answer to <a href=\"https://stackoverflow.com/questions/45034464/powermock-static-final-method-in-final-class\">this question</a>for implementation.</p>\n"},{"tags":[],"owner":{"account_id":3732234,"reputation":672,"user_id":3104218,"display_name":"Acanda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612988132,"creation_date":1612988132,"answer_id":66144358,"question_id":66115120,"body_markdown":"A simple way to use a mocked HttpClient for your tests is to add a second constructor that takes a HttpClient.\r\n\r\n```java\r\npublic class KMSHttpClientImpl implements KMSHttpClient\r\n{\r\n\r\n  private final HttpClient httpClient;\r\n\r\n  public KMSHttpClientImpl ()\r\n  {\r\n    final PoolingHttpClientConnectionManager connectionManager =\r\n            kmsHttpConnectionManager.getConnectionManager();\r\n    httpClient = HttpClients.custom()\r\n            .setConnectionManager(connectionManager)\r\n            .build();\r\n  }\r\n\r\n  // This constructor is package private instead\r\n  // of public so it is not accidentally used by\r\n  // classes outside of this package. If your test\r\n  // class is not in the same package, then you\r\n  // need to make this a public constructor.\r\n  KMSHttpClientImpl (final HttpClient httpClient)\r\n  {\r\n    this.httpClient = httpClient;\r\n  }\r\n\r\n}\r\n```\r\n\r\nYou then inject your mocked HttpClient using this constructor and will need neither `@InjectMocks` nor `@Mock` in your tests.\r\n\r\n```java\r\n@Test\r\npublic void testPostRequest () throws KMSClientException\r\n{\r\n  final HttpClient httpClient = Mockito.mock(HttpClient.class);\r\n  final HttpResponse response = prepareResponse(HttpStatus.SC_OK);\r\n  Mockito.when(httpClient.execute(Mockito.any())).thenReturn(response);\r\n  final KMSHttpClientImpl kmsHttpClientImpl = new KMSHttpClientImpl(httpClient);\r\n\r\n  // run your test...\r\n}\r\n```","title":"How to mock HttpClient using Mockito","body":"<p>A simple way to use a mocked HttpClient for your tests is to add a second constructor that takes a HttpClient.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class KMSHttpClientImpl implements KMSHttpClient\n{\n\n  private final HttpClient httpClient;\n\n  public KMSHttpClientImpl ()\n  {\n    final PoolingHttpClientConnectionManager connectionManager =\n            kmsHttpConnectionManager.getConnectionManager();\n    httpClient = HttpClients.custom()\n            .setConnectionManager(connectionManager)\n            .build();\n  }\n\n  // This constructor is package private instead\n  // of public so it is not accidentally used by\n  // classes outside of this package. If your test\n  // class is not in the same package, then you\n  // need to make this a public constructor.\n  KMSHttpClientImpl (final HttpClient httpClient)\n  {\n    this.httpClient = httpClient;\n  }\n\n}\n</code></pre>\n<p>You then inject your mocked HttpClient using this constructor and will need neither <code>@InjectMocks</code> nor <code>@Mock</code> in your tests.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void testPostRequest () throws KMSClientException\n{\n  final HttpClient httpClient = Mockito.mock(HttpClient.class);\n  final HttpResponse response = prepareResponse(HttpStatus.SC_OK);\n  Mockito.when(httpClient.execute(Mockito.any())).thenReturn(response);\n  final KMSHttpClientImpl kmsHttpClientImpl = new KMSHttpClientImpl(httpClient);\n\n  // run your test...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689953681,"creation_date":1689953681,"answer_id":76739352,"question_id":66115120,"body_markdown":"Apache HTTP client 5 deprecates the single argument `HttpClient.execute()` method in favour of the methods that take a `ResponseHandler` so that the library can ensure that the request is cleaned up.\r\n\r\nTo mock those calls, do this:\r\n```java\r\n// mock the http client\r\nCloseableHttpClient httpClient = mock(CloseableHttpClient.class);\r\n\r\n// mock the response object\r\nCloseableHttpResponse response = mock(CloseableHttpResponse.class);\r\nwhen(response.getCode()).thenReturn(200);\r\n// [...] add other mocks, e.g. response headers and body entity\r\n\r\n// provide the mock response object when your mock HttpClient is executed\r\n// replace any() with more specific matchers if you need to\r\n\r\nwhen(httpClient.execute(any(ClassicHttpRequest.class), any(HttpClientResponseHandler.class))).thenAnswer(invocation -&gt;\r\n  invocation.getArgument(1, HttpClientResponseHandler.class).handleResponse(response));\r\n```","title":"How to mock HttpClient using Mockito","body":"<p>Apache HTTP client 5 deprecates the single argument <code>HttpClient.execute()</code> method in favour of the methods that take a <code>ResponseHandler</code> so that the library can ensure that the request is cleaned up.</p>\n<p>To mock those calls, do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// mock the http client\nCloseableHttpClient httpClient = mock(CloseableHttpClient.class);\n\n// mock the response object\nCloseableHttpResponse response = mock(CloseableHttpResponse.class);\nwhen(response.getCode()).thenReturn(200);\n// [...] add other mocks, e.g. response headers and body entity\n\n// provide the mock response object when your mock HttpClient is executed\n// replace any() with more specific matchers if you need to\n\nwhen(httpClient.execute(any(ClassicHttpRequest.class), any(HttpClientResponseHandler.class))).thenAnswer(invocation -&gt;\n  invocation.getArgument(1, HttpClientResponseHandler.class).handleResponse(response));\n</code></pre>\n"}],"owner":{"account_id":8085618,"reputation":422,"user_id":6093274,"accept_rate":33,"display_name":"priyanka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4624,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1689953681,"creation_date":1612858065,"question_id":66115120,"body_markdown":"This is my Actual class for which i am writing junit. I have HtpClient as private and final.\r\n\r\n     public class KMSHttpClientImpl implements KMSHttpClient\r\n     {\r\n    /**\r\n     * ObjectMapper Instance.\r\n     */\r\n    private final ObjectMapper objectMapper = new ObjectMapper ();\r\n\r\n    /**\r\n     * KMS ConnectionManager Instance.\r\n     */\r\n    private final KMSHttpConnectionManager kmsHttpConnectionManager =\r\n            new KMSHttpConnectionManagerImpl ();\r\n\r\n    /**\r\n     * HttpClient object.\r\n     */\r\n   \r\n    private final HttpClient httpClient;\r\n\r\n    /**\r\n     * KMSHttpClient constructor.\r\n     */\r\n    public KMSHttpClientImpl ()\r\n    {\r\n        // TODO PoolingHttpClientConnectionManager object should be closed after use.\r\n        // TODO This needs to be either singleton or should be kept in static block\r\n        final PoolingHttpClientConnectionManager connectionManager =\r\n                kmsHttpConnectionManager.getConnectionManager();\r\n        httpClient = HttpClients.custom()\r\n                .setConnectionManager(connectionManager)\r\n                .build();\r\n    }\r\n\r\n    @Override\r\n    public &lt;T&gt; T invokeGETRequest (final String url, final Class&lt;T&gt; clazz)\r\n            throws KMSClientException\r\n    {\r\n        final HttpGet httpGet = new HttpGet(url);\r\n        try {\r\n            final HttpResponse response = httpClient.execute(httpGet);\r\n            return objectMapper.readValue(\r\n                    response.getEntity().getContent(), clazz);\r\n        } catch (IOException e) {\r\n            throw new KMSClientException(&quot;Unable to get the result&quot;, e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public &lt;T&gt; T invokePOSTRequest (final String url, final Object object, final Class&lt;T&gt; clazz)\r\n            throws KMSClientException\r\n    {\r\n        final HttpPost httpPost = new HttpPost(url);\r\n        try {\r\n            final HttpResponse response = httpClient.execute(httpPost);\r\n            return objectMapper.readValue(\r\n                    response.getEntity().getContent(), clazz);\r\n        } catch (IOException e) {\r\n            throw new KMSClientException(&quot;Unable to create the request&quot;, e);\r\n        }\r\n    }\r\n     }\r\n\r\nThis is my testclass. I am trying to Mock HttpClient but as it is final i cant mock it. And if i remove final from HttpClient in my KMSHttpClientImpl.java class. I am getting PMd issue saying\r\nPrivate field &#39;httpClient&#39; could be made final; it is only initialized in the declaration or constructor. What can i do to fix this issue?\r\n\r\n    public class KMSHttpClientImplTest\r\n    {\r\n\r\n    /**\r\n     * Injecting mocks KMSHttpClientImpl.\r\n     */\r\n    @InjectMocks\r\n    private KMSHttpClientImpl kmsHttpClientImpl;\r\n\r\n    /**\r\n     * Mock HttpClient.\r\n     */\r\n    @Mock\r\n    private HttpClient httpClient;\r\n\r\n\r\n    /**\r\n     * Initial SetUp Method.\r\n     */\r\n    @Before\r\n    public void setUp ()\r\n    {\r\n        initMocks(this);\r\n    }\r\n\r\n    /**\r\n     * Method to test postRequest Method.\r\n     * @throws KMSClientException\r\n     */\r\n    @Test\r\n    public void testPostRequest () throws KMSClientException\r\n    {\r\n        final OrganizationRequest request = getOrganizationRequest();\r\n        final HttpResponse response = prepareResponse(HttpStatus.SC_OK);\r\n        try {\r\n            Mockito.when(httpClient.execute(Mockito.any())).thenReturn(response);\r\n            final OrganizationResponse organizationResponse = kmsHttpClientImpl.invokePOSTRequest(\r\n                    ORG_TEST_URL, request, OrganizationResponse.class);\r\n            assertEquals(&quot;Id should match&quot;, ORG_ID, organizationResponse.getId());\r\n        } catch (IOException e) {\r\n            throw new KMSClientException(&quot;Unable to create the request&quot;, e);\r\n        }\r\n          }\r\n\r\n    /**\r\n     * Method to test getRequest Method.\r\n     * @throws KMSClientException\r\n     */\r\n    @Test\r\n    public void testGetRequest () throws KMSClientException\r\n    {\r\n        try {\r\n            final HttpResponse response = prepareResponse(HttpStatus.SC_OK);\r\n            Mockito.when(httpClient.execute(Mockito.any())).thenReturn(response);\r\n            final OrganizationResponse organizationResponse = kmsHttpClientImpl.invokeGETRequest\r\n                    (ORG_TEST_URL, OrganizationResponse.class);\r\n            assertEquals(&quot;Id should match&quot;, ORG_ID, organizationResponse.getId());\r\n        }  catch (IOException e) {\r\n            throw new KMSClientException(&quot;Unable to create the request&quot;, e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Method to organizationRequest Object.\r\n     * @return OrganizationRequest object\r\n     */\r\n    public OrganizationRequest getOrganizationRequest ()\r\n    {\r\n        return OrganizationRequest.builder().id(&quot;test&quot;).build();\r\n    }\r\n\r\n    /**\r\n     * Method to getOrganizationResponse String.\r\n     * @return String Object\r\n     */\r\n    public String getOrganizationResponse ()\r\n    {\r\n        final Map obj=new HashMap();\r\n        obj.put(&quot;id&quot;, ORG_ID);\r\n        obj.put(&quot;uuid&quot;, ORG_UUID);\r\n        obj.put(&quot;orgKeyId&quot;, ORG_KEYID);\r\n        return JSONValue.toJSONString(obj);\r\n    }\r\n\r\n    /**\r\n     * Method to prepare Response.\r\n     * @param expectedResponseStatus\r\n     * @return HttpResponse\r\n     */\r\n    private HttpResponse prepareResponse (final int expectedResponseStatus)\r\n    {\r\n        final HttpResponse response = new BasicHttpResponse(new BasicStatusLine(\r\n                new ProtocolVersion(&quot;HTTP&quot;, 1, 1),\r\n                expectedResponseStatus, &quot;&quot;));\r\n        response.setStatusCode(expectedResponseStatus);\r\n        final HttpEntity httpEntity = new StringEntity(getOrganizationResponse(),\r\n                ContentType.APPLICATION_JSON);\r\n        response.setEntity(httpEntity);\r\n        return response;\r\n         }\r\n        }\r\n","title":"How to mock HttpClient using Mockito","body":"<p>This is my Actual class for which i am writing junit. I have HtpClient as private and final.</p>\n<pre><code> public class KMSHttpClientImpl implements KMSHttpClient\n {\n/**\n * ObjectMapper Instance.\n */\nprivate final ObjectMapper objectMapper = new ObjectMapper ();\n\n/**\n * KMS ConnectionManager Instance.\n */\nprivate final KMSHttpConnectionManager kmsHttpConnectionManager =\n        new KMSHttpConnectionManagerImpl ();\n\n/**\n * HttpClient object.\n */\n\nprivate final HttpClient httpClient;\n\n/**\n * KMSHttpClient constructor.\n */\npublic KMSHttpClientImpl ()\n{\n    // TODO PoolingHttpClientConnectionManager object should be closed after use.\n    // TODO This needs to be either singleton or should be kept in static block\n    final PoolingHttpClientConnectionManager connectionManager =\n            kmsHttpConnectionManager.getConnectionManager();\n    httpClient = HttpClients.custom()\n            .setConnectionManager(connectionManager)\n            .build();\n}\n\n@Override\npublic &lt;T&gt; T invokeGETRequest (final String url, final Class&lt;T&gt; clazz)\n        throws KMSClientException\n{\n    final HttpGet httpGet = new HttpGet(url);\n    try {\n        final HttpResponse response = httpClient.execute(httpGet);\n        return objectMapper.readValue(\n                response.getEntity().getContent(), clazz);\n    } catch (IOException e) {\n        throw new KMSClientException(&quot;Unable to get the result&quot;, e);\n    }\n}\n\n@Override\npublic &lt;T&gt; T invokePOSTRequest (final String url, final Object object, final Class&lt;T&gt; clazz)\n        throws KMSClientException\n{\n    final HttpPost httpPost = new HttpPost(url);\n    try {\n        final HttpResponse response = httpClient.execute(httpPost);\n        return objectMapper.readValue(\n                response.getEntity().getContent(), clazz);\n    } catch (IOException e) {\n        throw new KMSClientException(&quot;Unable to create the request&quot;, e);\n    }\n}\n }\n</code></pre>\n<p>This is my testclass. I am trying to Mock HttpClient but as it is final i cant mock it. And if i remove final from HttpClient in my KMSHttpClientImpl.java class. I am getting PMd issue saying\nPrivate field 'httpClient' could be made final; it is only initialized in the declaration or constructor. What can i do to fix this issue?</p>\n<pre><code>public class KMSHttpClientImplTest\n{\n\n/**\n * Injecting mocks KMSHttpClientImpl.\n */\n@InjectMocks\nprivate KMSHttpClientImpl kmsHttpClientImpl;\n\n/**\n * Mock HttpClient.\n */\n@Mock\nprivate HttpClient httpClient;\n\n\n/**\n * Initial SetUp Method.\n */\n@Before\npublic void setUp ()\n{\n    initMocks(this);\n}\n\n/**\n * Method to test postRequest Method.\n * @throws KMSClientException\n */\n@Test\npublic void testPostRequest () throws KMSClientException\n{\n    final OrganizationRequest request = getOrganizationRequest();\n    final HttpResponse response = prepareResponse(HttpStatus.SC_OK);\n    try {\n        Mockito.when(httpClient.execute(Mockito.any())).thenReturn(response);\n        final OrganizationResponse organizationResponse = kmsHttpClientImpl.invokePOSTRequest(\n                ORG_TEST_URL, request, OrganizationResponse.class);\n        assertEquals(&quot;Id should match&quot;, ORG_ID, organizationResponse.getId());\n    } catch (IOException e) {\n        throw new KMSClientException(&quot;Unable to create the request&quot;, e);\n    }\n      }\n\n/**\n * Method to test getRequest Method.\n * @throws KMSClientException\n */\n@Test\npublic void testGetRequest () throws KMSClientException\n{\n    try {\n        final HttpResponse response = prepareResponse(HttpStatus.SC_OK);\n        Mockito.when(httpClient.execute(Mockito.any())).thenReturn(response);\n        final OrganizationResponse organizationResponse = kmsHttpClientImpl.invokeGETRequest\n                (ORG_TEST_URL, OrganizationResponse.class);\n        assertEquals(&quot;Id should match&quot;, ORG_ID, organizationResponse.getId());\n    }  catch (IOException e) {\n        throw new KMSClientException(&quot;Unable to create the request&quot;, e);\n    }\n}\n\n/**\n * Method to organizationRequest Object.\n * @return OrganizationRequest object\n */\npublic OrganizationRequest getOrganizationRequest ()\n{\n    return OrganizationRequest.builder().id(&quot;test&quot;).build();\n}\n\n/**\n * Method to getOrganizationResponse String.\n * @return String Object\n */\npublic String getOrganizationResponse ()\n{\n    final Map obj=new HashMap();\n    obj.put(&quot;id&quot;, ORG_ID);\n    obj.put(&quot;uuid&quot;, ORG_UUID);\n    obj.put(&quot;orgKeyId&quot;, ORG_KEYID);\n    return JSONValue.toJSONString(obj);\n}\n\n/**\n * Method to prepare Response.\n * @param expectedResponseStatus\n * @return HttpResponse\n */\nprivate HttpResponse prepareResponse (final int expectedResponseStatus)\n{\n    final HttpResponse response = new BasicHttpResponse(new BasicStatusLine(\n            new ProtocolVersion(&quot;HTTP&quot;, 1, 1),\n            expectedResponseStatus, &quot;&quot;));\n    response.setStatusCode(expectedResponseStatus);\n    final HttpEntity httpEntity = new StringEntity(getOrganizationResponse(),\n            ContentType.APPLICATION_JSON);\n    response.setEntity(httpEntity);\n    return response;\n     }\n    }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"display_name":"user6073886"},"score":2,"creation_date":1689951107,"post_id":76739007,"comment_id":135289932,"body_markdown":"There are literally infinite possible Runtime Exceptions that can happen in java. So I&#39;m afraid unless you can provide us with more information about what that Runtime Error is that is happening, the chances of anyone figuring out what is wrong are rather small.","body":"There are literally infinite possible Runtime Exceptions that can happen in java. So I&#39;m afraid unless you can provide us with more information about what that Runtime Error is that is happening, the chances of anyone figuring out what is wrong are rather small."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1689951145,"post_id":76739007,"comment_id":135289941,"body_markdown":"Please [edit] the code and add the full stack trace of the exception. Please also highlight the line of code where the exception is thrown.","body":"Please <a href=\"https://stackoverflow.com/posts/76739007/edit\">edit</a> the code and add the full stack trace of the exception. Please also highlight the line of code where the exception is thrown."}],"answers":[{"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1689953715,"post_id":76739053,"comment_id":135290412,"body_markdown":"They are using _nextLine_ also, instead of _next_.","body":"They are using <i>nextLine</i> also, instead of <i>next</i>."}],"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689951546,"creation_date":1689951130,"answer_id":76739053,"question_id":76739007,"body_markdown":" - `for(int i = 0; i &lt;= 3; i++)` - you should iterate **exactly 3 times**. The correct is `for(int i = 0; i &lt; 3; i++)`.\r\n - Another big problem, you **shoule not close** the scanner `user.close();`. It is not an external resource, this is build-in java `System.in`. You close the scanner, i.e. you close this stream and anyone cannot use it anymore. But HackerRank framework you is afterwards.\r\n\r\n**P.S.** By the way. Let me show you more elegant and efficient solution. You can use `String.format()` to build required string.\r\n\r\n```java\r\npublic static void main(String... args) {\r\n    Scanner sc = new Scanner(System.in);\r\n    System.out.println(&quot;================================&quot;);\r\n    for (int i = 0; i &lt; 3; i++) {\r\n        String s1 = sc.next();\r\n        int x = sc.nextInt();\r\n        System.out.println(String.format(&quot;%-15s%03d&quot;, s1, x));\r\n    }\r\n    System.out.println(&quot;================================&quot;);\r\n}\r\n```","title":"How can I solve the runtime error problem in hacker rank while the same code runs successfully in VScode?","body":"<ul>\n<li><code>for(int i = 0; i &lt;= 3; i++)</code> - you should iterate <strong>exactly 3 times</strong>. The correct is <code>for(int i = 0; i &lt; 3; i++)</code>.</li>\n<li>Another big problem, you <strong>shoule not close</strong> the scanner <code>user.close();</code>. It is not an external resource, this is build-in java <code>System.in</code>. You close the scanner, i.e. you close this stream and anyone cannot use it anymore. But HackerRank framework you is afterwards.</li>\n</ul>\n<p><strong>P.S.</strong> By the way. Let me show you more elegant and efficient solution. You can use <code>String.format()</code> to build required string.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String... args) {\n    Scanner sc = new Scanner(System.in);\n    System.out.println(&quot;================================&quot;);\n    for (int i = 0; i &lt; 3; i++) {\n        String s1 = sc.next();\n        int x = sc.nextInt();\n        System.out.println(String.format(&quot;%-15s%03d&quot;, s1, x));\n    }\n    System.out.println(&quot;================================&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689953572,"creation_date":1689953263,"answer_id":76739297,"question_id":76739007,"body_markdown":"Firstly, the format would be,\r\n\r\n```java\r\nSystem.out.printf(&quot;%-15s%03d%n&quot;, s1, x);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n================================\r\njava           100\r\ncpp            065\r\npython         050\r\n================================\r\n```\r\n\r\nThe full list of _printf_ format specifiers can be found on the _[Formatter](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Formatter.html)_ class _JavaDoc_.\r\n\r\nIf you&#39;re not familiar, the _[printf](https://en.wikipedia.org/wiki/Printf)_ syntax is mostly inherited from the _[C](https://en.wikipedia.org/wiki/C_(programming_language))_ _printf_ format.\r\n\r\nHere is a relevant excerpt from the _JavaDoc_.\r\n\r\n&gt; _&quot;... Formatted printing for the Java language is heavily inspired by C&#39;s printf. Although the format strings are similar to C, some customizations have been made to accommodate the Java language and exploit some of its features. ...&quot;_\r\n\r\nIt&#39;s very simple to use, a specifier is denoted by a `%`, followed by a letter.  \r\nAn `s` represents a _String_, a `d` represents an integer value, and an `f` represents a floating-point value.  \r\nThere are additional specifiers as well.\r\n\r\nYou can modify the specifier with width, padding, and justification attributes.\r\n\r\n&gt; _&quot;... The format specifiers for general, character, and numeric types have the following syntax: ...&quot;_\r\n\r\n```none\r\n%[argument_index$][flags][width]_[.precision]conversion\r\n```\r\n\r\nAlthough, to answer your question specifically, as to why it is erroring.\r\n\r\nThe error is an _[InputMismatchException](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/InputMismatchException.html)_, which is caused by the following line.\r\n\r\n```java\r\nint x=user.nextInt();\r\n```\r\n\r\nThis is because your preceding _Scanner_ capture uses the _[nextLine](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html#nextLine())_ method, instead of the _[next](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html#next())_ method.  \r\nIn the original _HackerRank_ example, they are using _next_.\r\n\r\n```java\r\nString s1=user.nextLine();\r\n```\r\n\r\nThe difference between the two is that the _nextLine_ method will return the entire line,\r\n\r\n```none\r\njava 100\r\n```\r\n\r\nAnd, the _next_ method will return just the token; in this case _&quot;java&quot;_.  \r\nThe default delimiter is a white-space character.\r\n\r\n_[Scanner (Java SE 20 &amp;amp; JDK 20)](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html)_.\r\n\r\n&gt; _&quot;... A Scanner breaks its input into tokens using a delimiter pattern, which by default matches whitespace. The resulting tokens may then be converted into values of different types using the various next methods. ...&quot;_\r\n\r\nThus, calling _nextInt_ will attempt to return _&quot;cpp&quot;_ as an _int_, which doesn&#39;t parse.\r\n\r\nSubsequently, you are making another call to _nextLine_ after this; which will cause it to error further.","title":"How can I solve the runtime error problem in hacker rank while the same code runs successfully in VScode?","body":"<p>Firstly, the format would be,</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.printf(&quot;%-15s%03d%n&quot;, s1, x);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>================================\njava           100\ncpp            065\npython         050\n================================\n</code></pre>\n<p>The full list of <em>printf</em> format specifiers can be found on the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Formatter.html\" rel=\"nofollow noreferrer\">Formatter</a></em> class <em>JavaDoc</em>.</p>\n<p>If you're not familiar, the <em><a href=\"https://en.wikipedia.org/wiki/Printf\" rel=\"nofollow noreferrer\">printf</a></em> syntax is mostly inherited from the <em><a href=\"https://en.wikipedia.org/wiki/C_(programming_language)\" rel=\"nofollow noreferrer\">C</a></em> <em>printf</em> format.</p>\n<p>Here is a relevant excerpt from the <em>JavaDoc</em>.</p>\n<blockquote>\n<p><em>&quot;... Formatted printing for the Java language is heavily inspired by C's printf. Although the format strings are similar to C, some customizations have been made to accommodate the Java language and exploit some of its features. ...&quot;</em></p>\n</blockquote>\n<p>It's very simple to use, a specifier is denoted by a <code>%</code>, followed by a letter.<br />\nAn <code>s</code> represents a <em>String</em>, a <code>d</code> represents an integer value, and an <code>f</code> represents a floating-point value.<br />\nThere are additional specifiers as well.</p>\n<p>You can modify the specifier with width, padding, and justification attributes.</p>\n<blockquote>\n<p><em>&quot;... The format specifiers for general, character, and numeric types have the following syntax: ...&quot;</em></p>\n</blockquote>\n<pre class=\"lang-none prettyprint-override\"><code>%[argument_index$][flags][width]_[.precision]conversion\n</code></pre>\n<p>Although, to answer your question specifically, as to why it is erroring.</p>\n<p>The error is an <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/InputMismatchException.html\" rel=\"nofollow noreferrer\">InputMismatchException</a></em>, which is caused by the following line.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int x=user.nextInt();\n</code></pre>\n<p>This is because your preceding <em>Scanner</em> capture uses the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html#nextLine()\" rel=\"nofollow noreferrer\">nextLine</a></em> method, instead of the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html#next()\" rel=\"nofollow noreferrer\">next</a></em> method.<br />\nIn the original <em>HackerRank</em> example, they are using <em>next</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String s1=user.nextLine();\n</code></pre>\n<p>The difference between the two is that the <em>nextLine</em> method will return the entire line,</p>\n<pre class=\"lang-none prettyprint-override\"><code>java 100\n</code></pre>\n<p>And, the <em>next</em> method will return just the token; in this case <em>&quot;java&quot;</em>.<br />\nThe default delimiter is a white-space character.</p>\n<p><em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html\" rel=\"nofollow noreferrer\">Scanner (Java SE 20 &amp; JDK 20)</a></em>.</p>\n<blockquote>\n<p><em>&quot;... A Scanner breaks its input into tokens using a delimiter pattern, which by default matches whitespace. The resulting tokens may then be converted into values of different types using the various next methods. ...&quot;</em></p>\n</blockquote>\n<p>Thus, calling <em>nextInt</em> will attempt to return <em>&quot;cpp&quot;</em> as an <em>int</em>, which doesn't parse.</p>\n<p>Subsequently, you are making another call to <em>nextLine</em> after this; which will cause it to error further.</p>\n"}],"owner":{"account_id":24710538,"reputation":25,"user_id":18600791,"display_name":"Ebram Shereen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1689954059,"accepted_answer_id":76739053,"answer_count":2,"score":2,"last_activity_date":1689953572,"creation_date":1689950786,"question_id":76739007,"body_markdown":"```\r\n\r\n\r\nimport java.util.*;\r\npublic class App {\r\n    public static void main(String[] args){\r\n        Scanner user=new Scanner(System.in);\r\n        int i,j;\r\n        for(i=0;i&lt;=3;i++){\r\n            String s1=user.nextLine();\r\n            int x=user.nextInt();\r\n            user.nextLine();\r\n            String space =&quot; &quot;;\r\n            for(j=0;j&lt;=15-s1.length();j++){\r\n                space =space+&quot; &quot;;\r\n            }\r\n            if(x&lt;100){\r\n                System.out.println(&quot;================================\\n&quot;);\r\n                String.valueOf(x);\r\n                String new_x=&quot;0&quot;+x;\r\n                System.out.println(s1+space+new_x+&quot;\\n&quot;);\r\n                System.out.println(&quot;================================\\n&quot;);\r\n            }\r\n            else if(x&lt;10){\r\n                System.out.println(&quot;================================\\n&quot;);\r\n                String.valueOf(x);\r\n                String new_x=&quot;00&quot;+x;\r\n                System.out.println(s1+space+new_x+&quot;\\n&quot;);\r\n                System.out.println(&quot;================================\\n&quot;);\r\n            }\r\n            else{\r\n                System.out.println(&quot;================================\\n&quot;);\r\n                System.out.println(s1+space+x+&quot;\\n&quot;);\r\n                System.out.println(&quot;================================\\n&quot;);\r\n            }\r\n        }\r\n        user.close();\r\n        }\r\n}\r\n```\r\n\r\nThe problem in hacker rank talked about writing strings and integers in input and making space between strings and integers.\r\n\r\nSpace + String must equal 15 index, and I put the link to the hacker rank question under the code.\r\n\r\nThis is Hacker rank link:&lt;https://www.hackerrank.com/challenges/java-output-formatting/problem?isFullScreen=true&gt;\r\n\r\nI tried to solve a HackerRank question on their website using Java, and it ran successfully in VS Code.\r\n\r\nHowever, when I attempted to run the same code on HackerRank, I encountered a runtime error.\r\n\r\nWhen I deleted all the for loops in the code, it gave me the wrong answer, not a runtime error.","title":"How can I solve the runtime error problem in hacker rank while the same code runs successfully in VScode?","body":"<pre><code>\n\nimport java.util.*;\npublic class App {\n    public static void main(String[] args){\n        Scanner user=new Scanner(System.in);\n        int i,j;\n        for(i=0;i&lt;=3;i++){\n            String s1=user.nextLine();\n            int x=user.nextInt();\n            user.nextLine();\n            String space =&quot; &quot;;\n            for(j=0;j&lt;=15-s1.length();j++){\n                space =space+&quot; &quot;;\n            }\n            if(x&lt;100){\n                System.out.println(&quot;================================\\n&quot;);\n                String.valueOf(x);\n                String new_x=&quot;0&quot;+x;\n                System.out.println(s1+space+new_x+&quot;\\n&quot;);\n                System.out.println(&quot;================================\\n&quot;);\n            }\n            else if(x&lt;10){\n                System.out.println(&quot;================================\\n&quot;);\n                String.valueOf(x);\n                String new_x=&quot;00&quot;+x;\n                System.out.println(s1+space+new_x+&quot;\\n&quot;);\n                System.out.println(&quot;================================\\n&quot;);\n            }\n            else{\n                System.out.println(&quot;================================\\n&quot;);\n                System.out.println(s1+space+x+&quot;\\n&quot;);\n                System.out.println(&quot;================================\\n&quot;);\n            }\n        }\n        user.close();\n        }\n}\n</code></pre>\n<p>The problem in hacker rank talked about writing strings and integers in input and making space between strings and integers.</p>\n<p>Space + String must equal 15 index, and I put the link to the hacker rank question under the code.</p>\n<p>This is Hacker rank link:<a href=\"https://www.hackerrank.com/challenges/java-output-formatting/problem?isFullScreen=true\" rel=\"nofollow noreferrer\">https://www.hackerrank.com/challenges/java-output-formatting/problem?isFullScreen=true</a></p>\n<p>I tried to solve a HackerRank question on their website using Java, and it ran successfully in VS Code.</p>\n<p>However, when I attempted to run the same code on HackerRank, I encountered a runtime error.</p>\n<p>When I deleted all the for loops in the code, it gave me the wrong answer, not a runtime error.</p>\n"},{"tags":["java","apache-kafka","jvm","apache-kafka-connect"],"comments":[{"owner":{"account_id":309588,"reputation":1743,"user_id":622121,"accept_rate":100,"display_name":"Kenji Noguchi"},"score":0,"creation_date":1486064286,"post_id":41964676,"comment_id":71197211,"body_markdown":"The &quot;default size&quot; seems to be [determined at run time](http://stackoverflow.com/questions/4667483/how-is-the-default-java-heap-size-determined).  It appears to be large enough in my machine (8G).  I still get the OOM error.  Besides, there are all sorts of other exceptions in the connector log, and the server stalls.  Very frustrating.","body":"The &quot;default size&quot; seems to be <a href=\"http://stackoverflow.com/questions/4667483/how-is-the-default-java-heap-size-determined\">determined at run time</a>.  It appears to be large enough in my machine (8G).  I still get the OOM error.  Besides, there are all sorts of other exceptions in the connector log, and the server stalls.  Very frustrating."},{"owner":{"account_id":294141,"reputation":7274,"user_id":1589422,"accept_rate":100,"display_name":"Robin Daugherty"},"score":1,"creation_date":1486158481,"post_id":41964676,"comment_id":71241598,"body_markdown":"From what I found, it&#39;s hard-coded to 256M: https://github.com/apache/kafka/blob/trunk/bin/kafka-run-class.sh#L209","body":"From what I found, it&#39;s hard-coded to 256M: <a href=\"https://github.com/apache/kafka/blob/trunk/bin/kafka-run-class.sh#L209\" rel=\"nofollow noreferrer\">github.com/apache/kafka/blob/trunk/bin/kafka-run-class.sh#L2&zwnj;&#8203;09</a>"},{"owner":{"account_id":309588,"reputation":1743,"user_id":622121,"accept_rate":100,"display_name":"Kenji Noguchi"},"score":0,"creation_date":1486170557,"post_id":41964676,"comment_id":71245106,"body_markdown":"ohhh! thank you.  That explains.","body":"ohhh! thank you.  That explains."}],"answers":[{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":2,"creation_date":1547623734,"post_id":41964677,"comment_id":95250300,"body_markdown":"As of Kafka 1.1.0, the new default for Connect is `-Xmx2g`, and it is set before `kafka-run-class` - https://github.com/apache/kafka/commit/cfa6a78c7c2529839d2f3cb1129098f2e552fd72","body":"As of Kafka 1.1.0, the new default for Connect is <code>-Xmx2g</code>, and it is set before <code>kafka-run-class</code> - <a href=\"https://github.com/apache/kafka/commit/cfa6a78c7c2529839d2f3cb1129098f2e552fd72\" rel=\"nofollow noreferrer\">github.com/apache/kafka/commit/&hellip;</a>"},{"owner":{"account_id":8226593,"reputation":772,"user_id":6188720,"accept_rate":75,"display_name":"c0degeas"},"score":0,"creation_date":1552572113,"post_id":41964677,"comment_id":97068041,"body_markdown":"Any other way to achieve the same?","body":"Any other way to achieve the same?"},{"owner":{"account_id":294141,"reputation":7274,"user_id":1589422,"accept_rate":100,"display_name":"Robin Daugherty"},"score":2,"creation_date":1552885004,"post_id":41964677,"comment_id":97164873,"body_markdown":"The method in my answer is the same, only the default value changed.","body":"The method in my answer is the same, only the default value changed."}],"tags":[],"owner":{"account_id":294141,"reputation":7274,"user_id":1589422,"accept_rate":100,"display_name":"Robin Daugherty"},"comment_count":3,"down_vote_count":2,"up_vote_count":59,"is_accepted":true,"score":57,"last_activity_date":1547739908,"creation_date":1485886548,"answer_id":41964677,"question_id":41964676,"body_markdown":"You can control the max and initial heap size by setting the `KAFKA_HEAP_OPTS` environment variable.\r\n\r\nThe following example sets a starting size of 512 MB and a maximum size of 1 GB:\r\n\r\n    KAFKA_HEAP_OPTS=&quot;-Xms512m -Xmx1g&quot; connect-standalone connect-worker.properties connect-s3-sink.properties\r\n\r\nWhen running a Kafka command such as `connect-standalone`, the `kafka-run-class` script is invoked, which [sets a default heap size of 256 MB](https://github.com/apache/kafka/blob/trunk/bin/kafka-run-class.sh#L233) in the `KAFKA_HEAP_OPTS` environment variable if it is not already set.","title":"Kafka Connect running out of heap space","body":"<p>You can control the max and initial heap size by setting the <code>KAFKA_HEAP_OPTS</code> environment variable.</p>\n\n<p>The following example sets a starting size of 512 MB and a maximum size of 1 GB:</p>\n\n<pre><code>KAFKA_HEAP_OPTS=\"-Xms512m -Xmx1g\" connect-standalone connect-worker.properties connect-s3-sink.properties\n</code></pre>\n\n<p>When running a Kafka command such as <code>connect-standalone</code>, the <code>kafka-run-class</code> script is invoked, which <a href=\"https://github.com/apache/kafka/blob/trunk/bin/kafka-run-class.sh#L233\" rel=\"noreferrer\">sets a default heap size of 256 MB</a> in the <code>KAFKA_HEAP_OPTS</code> environment variable if it is not already set.</p>\n"},{"comments":[{"owner":{"account_id":294141,"reputation":7274,"user_id":1589422,"accept_rate":100,"display_name":"Robin Daugherty"},"score":1,"creation_date":1528501964,"post_id":50732745,"comment_id":88546805,"body_markdown":"Sorry that my answer wasn&#39;t more clear. `KAFKA_HEAP_OPTS` is an environment variable and should be set at the command line or in the service that starts the Kafka job. You should not modify the scripts that are part of the Kafka distribution, as they&#39;ll be wiped out when you update Kafka.","body":"Sorry that my answer wasn&#39;t more clear. <code>KAFKA_HEAP_OPTS</code> is an environment variable and should be set at the command line or in the service that starts the Kafka job. You should not modify the scripts that are part of the Kafka distribution, as they&#39;ll be wiped out when you update Kafka."}],"tags":[],"owner":{"account_id":7965404,"reputation":65,"user_id":6011762,"display_name":"Sagarmatha"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1528345527,"creation_date":1528343931,"answer_id":50732745,"question_id":41964676,"body_markdown":"Even I was facing the issue could not start my producer and consumer for a given topic. Also deleted all unnecessary log files and topics.Even though that&#39;s not related to the issue.\r\n\r\nChanging the `kafka-run-class.sh` did not work for me. I changed the below files \r\n\r\n&gt; kafka-console-consumer.sh\r\n&gt; \r\n&gt; kafka-console-producer.sh\r\n\r\nand stopped getting OOM error. Both consumer and producer worked fine after this.\r\n\r\nIncreased the size to `KAFKA_HEAP_OPTS=&quot;-Xmx1G&quot;` was 512m earlier.\r\n","title":"Kafka Connect running out of heap space","body":"<p>Even I was facing the issue could not start my producer and consumer for a given topic. Also deleted all unnecessary log files and topics.Even though that's not related to the issue.</p>\n\n<p>Changing the <code>kafka-run-class.sh</code> did not work for me. I changed the below files </p>\n\n<blockquote>\n  <p>kafka-console-consumer.sh</p>\n  \n  <p>kafka-console-producer.sh</p>\n</blockquote>\n\n<p>and stopped getting OOM error. Both consumer and producer worked fine after this.</p>\n\n<p>Increased the size to <code>KAFKA_HEAP_OPTS=\"-Xmx1G\"</code> was 512m earlier.</p>\n"},{"comments":[{"owner":{"account_id":7852,"reputation":14436,"user_id":13800,"accept_rate":89,"display_name":"Randy L"},"score":1,"creation_date":1597250024,"post_id":61362427,"comment_id":112073782,"body_markdown":"for my case, it does appear to be a bogus error message, hiding the actual issue","body":"for my case, it does appear to be a bogus error message, hiding the actual issue"},{"owner":{"account_id":9224124,"reputation":474,"user_id":6852455,"display_name":"Pawel"},"score":0,"creation_date":1609260805,"post_id":61362427,"comment_id":115793801,"body_markdown":"Wow. This helped! I only  had `producer: ssl: key-store-location: and password:` configured in application.yaml. And I was getting out of memory in testing environment. I think somewhere in the error log there was also *Topic not present in metadata after 60000 ms*. Adding `spring.kafka.producer.security.protocol: SSL` helped. Thank you.","body":"Wow. This helped! I only  had <code>producer: ssl: key-store-location: and password:</code> configured in application.yaml. And I was getting out of memory in testing environment. I think somewhere in the error log there was also <i>Topic not present in metadata after 60000 ms</i>. Adding <code>spring.kafka.producer.security.protocol: SSL</code> helped. Thank you."},{"owner":{"account_id":9507708,"reputation":2869,"user_id":7066647,"display_name":"dbaltor"},"score":2,"creation_date":1661335831,"post_id":61362427,"comment_id":129745894,"body_markdown":"You&#39;re spot on! Thank you very much indeed. \nTwo years on and this is still happening with **Spring Boot 2.7.2** and **Kafka 2.8**.","body":"You&#39;re spot on! Thank you very much indeed.  Two years on and this is still happening with <b>Spring Boot 2.7.2</b> and <b>Kafka 2.8</b>."},{"owner":{"account_id":18283524,"reputation":353,"user_id":13311923,"display_name":"MBA"},"score":0,"creation_date":1671134461,"post_id":61362427,"comment_id":132039071,"body_markdown":"Hi, a bit late, but I am facing the same issue even with SSL enabled! any hint? im setting kafkaheapsize to -Xms3G -Xmx3G which is, I suppose, enough for my case.","body":"Hi, a bit late, but I am facing the same issue even with SSL enabled! any hint? im setting kafkaheapsize to -Xms3G -Xmx3G which is, I suppose, enough for my case."},{"owner":{"account_id":8843969,"reputation":169,"user_id":6605452,"display_name":"Sourabh Roy"},"score":0,"creation_date":1677541618,"post_id":61362427,"comment_id":133354878,"body_markdown":"I am also getting the below error when I am attempting to start kafka on my mac ERROR Processor got uncaught exception. (kafka.network.Processor)\njava.lang.OutOfMemoryError: Java heap space","body":"I am also getting the below error when I am attempting to start kafka on my mac ERROR Processor got uncaught exception. (kafka.network.Processor) java.lang.OutOfMemoryError: Java heap space"},{"owner":{"account_id":1250616,"reputation":686,"user_id":1211095,"display_name":"MrJames"},"score":0,"creation_date":1683823650,"post_id":61362427,"comment_id":134429205,"body_markdown":"same here when playing with kafka tools connecting to an AWS MSK cluster... for me was that kafka-topics.sh was not called with &quot;--command-config client.properties&quot; where security.protocol=SASL_SSL","body":"same here when playing with kafka tools connecting to an AWS MSK cluster... for me was that kafka-topics.sh was not called with &quot;--command-config client.properties&quot; where security.protocol=SASL_SSL"}],"tags":[],"owner":{"account_id":1555104,"reputation":3384,"user_id":1446479,"accept_rate":45,"display_name":"peedee"},"comment_count":6,"down_vote_count":0,"up_vote_count":112,"is_accepted":false,"score":112,"last_activity_date":1587648771,"creation_date":1587550127,"answer_id":61362427,"question_id":41964676,"body_markdown":"When you have Kafka problems with \r\n\r\n    java.lang.OutOfMemoryError: Java heap space\r\n\r\nit doesn&#39;t necessarily mean that it&#39;s a memory problem. Several Kafka admin tools like `kafka-topics.sh` will mask the true error with this when trying to connect to an SSL PORT. The true (masked) error is `SSL handshake failed` !\r\n\r\nSee this issue: https://issues.apache.org/jira/browse/KAFKA-4090\r\n\r\nThe solution is to include a properties file in your command (for `kafka-topics.sh` this would be `--command-config`) and to absolutely include this line:\r\n\r\n    security.protocol=SSL","title":"Kafka Connect running out of heap space","body":"<p>When you have Kafka problems with </p>\n\n<pre><code>java.lang.OutOfMemoryError: Java heap space\n</code></pre>\n\n<p>it doesn't necessarily mean that it's a memory problem. Several Kafka admin tools like <code>kafka-topics.sh</code> will mask the true error with this when trying to connect to an SSL PORT. The true (masked) error is <code>SSL handshake failed</code> !</p>\n\n<p>See this issue: <a href=\"https://issues.apache.org/jira/browse/KAFKA-4090\" rel=\"noreferrer\">https://issues.apache.org/jira/browse/KAFKA-4090</a></p>\n\n<p>The solution is to include a properties file in your command (for <code>kafka-topics.sh</code> this would be <code>--command-config</code>) and to absolutely include this line:</p>\n\n<pre><code>security.protocol=SSL\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4816134,"reputation":321,"user_id":3888182,"accept_rate":40,"display_name":"Rajashekhar Meesala"},"score":0,"creation_date":1663162217,"post_id":68535319,"comment_id":130174121,"body_markdown":"Yes, after adding sasl client security protocols using --command-config it got worked.","body":"Yes, after adding sasl client security protocols using --command-config it got worked."}],"tags":[],"owner":{"account_id":1419566,"reputation":694,"user_id":1344481,"accept_rate":79,"display_name":"Alex N."},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1627326858,"creation_date":1627326858,"answer_id":68535319,"question_id":41964676,"body_markdown":"I found another cause of this issue this morning.  I was seeing this same exception except that I&#39;m not using SSL and my messages are very small.  The issue in my case turned out to be a misconfigured `bootstrap-servers` url.  If you configure that URL to be a server and port that is open but incorrect, you can cause this same exception.  The Kafka folks are aware of the general issue and are tracking it here: https://cwiki.apache.org/confluence/display/KAFKA/KIP-498%3A+Add+client-side+configuration+for+maximum+response+size+to+protect+against+OOM","title":"Kafka Connect running out of heap space","body":"<p>I found another cause of this issue this morning.  I was seeing this same exception except that I'm not using SSL and my messages are very small.  The issue in my case turned out to be a misconfigured <code>bootstrap-servers</code> url.  If you configure that URL to be a server and port that is open but incorrect, you can cause this same exception.  The Kafka folks are aware of the general issue and are tracking it here: <a href=\"https://cwiki.apache.org/confluence/display/KAFKA/KIP-498%3A+Add+client-side+configuration+for+maximum+response+size+to+protect+against+OOM\" rel=\"noreferrer\">https://cwiki.apache.org/confluence/display/KAFKA/KIP-498%3A+Add+client-side+configuration+for+maximum+response+size+to+protect+against+OOM</a></p>\n"},{"tags":[],"owner":{"account_id":133310,"reputation":6104,"user_id":334569,"accept_rate":73,"display_name":"Marco Lackovic"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674655823,"creation_date":1674653900,"answer_id":75234814,"question_id":41964676,"body_markdown":"In my case, using a **Spring Boot 2.7.8** application leveraging Spring Boot **Kafka auto-configuration** (no configuration in Java code), the problem was caused by the security protocol not being set (apparently the default value is `PLAINTEXT`). Other errors I got together with `java.lang.OutOfMemoryError: Java heap space` are:\r\n\r\n```\r\nStopping container due to an Error\r\nError while stopping the container: \r\nUncaught exception in thread &#39;kafka-producer-network-thread | producer-&#39;:\r\n```\r\n\r\nThe solution was to add the following lines to my `application.properties`:\r\n\r\n```\r\nspring.kafka.consumer.security.protocol=SSL\r\nspring.kafka.producer.security.protocol=SSL\r\n```\r\n\r\nMy attempt to fix it with just:\r\n\r\n```\r\nspring.kafka.security.protocol=SSL \r\n```\r\n\r\ndid not work.","title":"Kafka Connect running out of heap space","body":"<p>In my case, using a <strong>Spring Boot 2.7.8</strong> application leveraging Spring Boot <strong>Kafka auto-configuration</strong> (no configuration in Java code), the problem was caused by the security protocol not being set (apparently the default value is <code>PLAINTEXT</code>). Other errors I got together with <code>java.lang.OutOfMemoryError: Java heap space</code> are:</p>\n<pre><code>Stopping container due to an Error\nError while stopping the container: \nUncaught exception in thread 'kafka-producer-network-thread | producer-':\n</code></pre>\n<p>The solution was to add the following lines to my <code>application.properties</code>:</p>\n<pre><code>spring.kafka.consumer.security.protocol=SSL\nspring.kafka.producer.security.protocol=SSL\n</code></pre>\n<p>My attempt to fix it with just:</p>\n<pre><code>spring.kafka.security.protocol=SSL \n</code></pre>\n<p>did not work.</p>\n"}],"owner":{"account_id":294141,"reputation":7274,"user_id":1589422,"accept_rate":100,"display_name":"Robin Daugherty"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109750,"favorite_count":0,"down_vote_count":0,"up_vote_count":60,"accepted_answer_id":41964677,"answer_count":5,"score":60,"last_activity_date":1689953274,"creation_date":1485886548,"question_id":41964676,"body_markdown":"After starting Kafka Connect (`connect-standalone`), my task fails immediately after starting with:\r\n\r\n    java.lang.OutOfMemoryError: Java heap space\r\n    \tat java.nio.HeapByteBuffer.&lt;init&gt;(HeapByteBuffer.java:57)\r\n    \tat java.nio.ByteBuffer.allocate(ByteBuffer.java:335)\r\n    \tat org.apache.kafka.common.network.NetworkReceive.readFromReadableChannel(NetworkReceive.java:93)\r\n    \tat org.apache.kafka.common.network.NetworkReceive.readFrom(NetworkReceive.java:71)\r\n    \tat org.apache.kafka.common.network.KafkaChannel.receive(KafkaChannel.java:154)\r\n    \tat org.apache.kafka.common.network.KafkaChannel.read(KafkaChannel.java:135)\r\n    \tat org.apache.kafka.common.network.Selector.pollSelectionKeys(Selector.java:343)\r\n    \tat org.apache.kafka.common.network.Selector.poll(Selector.java:291)\r\n    \tat org.apache.kafka.clients.NetworkClient.poll(NetworkClient.java:260)\r\n    \tat org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:232)\r\n    \tat org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:180)\r\n    \tat org.apache.kafka.clients.consumer.internals.AbstractCoordinator.ensureCoordinatorReady(AbstractCoordinator.java:193)\r\n    \tat org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.poll(ConsumerCoordinator.java:248)\r\n    \tat org.apache.kafka.clients.consumer.KafkaConsumer.pollOnce(KafkaConsumer.java:1013)\r\n    \tat org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:979)\r\n    \tat org.apache.kafka.connect.runtime.WorkerSinkTask.pollConsumer(WorkerSinkTask.java:316)\r\n    \tat org.apache.kafka.connect.runtime.WorkerSinkTask.poll(WorkerSinkTask.java:222)\r\n    \tat org.apache.kafka.connect.runtime.WorkerSinkTask.iteration(WorkerSinkTask.java:170)\r\n    \tat org.apache.kafka.connect.runtime.WorkerSinkTask.execute(WorkerSinkTask.java:142)\r\n    \tat org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:140)\r\n    \tat org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:175)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n\r\nThere&#39;s a mention of heap space in some Kafka documentation, telling you to try it with &quot;the default&quot; and only modifying it if there are problems, but there are no instructions to modify the heap space.","title":"Kafka Connect running out of heap space","body":"<p>After starting Kafka Connect (<code>connect-standalone</code>), my task fails immediately after starting with:</p>\n\n<pre><code>java.lang.OutOfMemoryError: Java heap space\n    at java.nio.HeapByteBuffer.&lt;init&gt;(HeapByteBuffer.java:57)\n    at java.nio.ByteBuffer.allocate(ByteBuffer.java:335)\n    at org.apache.kafka.common.network.NetworkReceive.readFromReadableChannel(NetworkReceive.java:93)\n    at org.apache.kafka.common.network.NetworkReceive.readFrom(NetworkReceive.java:71)\n    at org.apache.kafka.common.network.KafkaChannel.receive(KafkaChannel.java:154)\n    at org.apache.kafka.common.network.KafkaChannel.read(KafkaChannel.java:135)\n    at org.apache.kafka.common.network.Selector.pollSelectionKeys(Selector.java:343)\n    at org.apache.kafka.common.network.Selector.poll(Selector.java:291)\n    at org.apache.kafka.clients.NetworkClient.poll(NetworkClient.java:260)\n    at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:232)\n    at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:180)\n    at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.ensureCoordinatorReady(AbstractCoordinator.java:193)\n    at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.poll(ConsumerCoordinator.java:248)\n    at org.apache.kafka.clients.consumer.KafkaConsumer.pollOnce(KafkaConsumer.java:1013)\n    at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:979)\n    at org.apache.kafka.connect.runtime.WorkerSinkTask.pollConsumer(WorkerSinkTask.java:316)\n    at org.apache.kafka.connect.runtime.WorkerSinkTask.poll(WorkerSinkTask.java:222)\n    at org.apache.kafka.connect.runtime.WorkerSinkTask.iteration(WorkerSinkTask.java:170)\n    at org.apache.kafka.connect.runtime.WorkerSinkTask.execute(WorkerSinkTask.java:142)\n    at org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:140)\n    at org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:175)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>There's a mention of heap space in some Kafka documentation, telling you to try it with \"the default\" and only modifying it if there are problems, but there are no instructions to modify the heap space.</p>\n"},{"tags":["java","spring-boot","apache-camel","bindy"],"answers":[{"comments":[{"owner":{"account_id":5072657,"reputation":3288,"user_id":4071001,"display_name":"lcnicolau"},"score":0,"creation_date":1689872223,"post_id":76729649,"comment_id":135278192,"body_markdown":"Thanks, but how can I do it? I tried to create a regular bean in Spring and it has no effect (I updated the question with the details).","body":"Thanks, but how can I do it? I tried to create a regular bean in Spring and it has no effect (I updated the question with the details)."},{"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"score":0,"creation_date":1689878511,"post_id":76729649,"comment_id":135279439,"body_markdown":"Do you use the `camel-bindy-starter` dependency (and not the `camel-bindy`) ?","body":"Do you use the <code>camel-bindy-starter</code> dependency (and not the <code>camel-bindy</code>) ?"},{"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"score":0,"creation_date":1689878621,"post_id":76729649,"comment_id":135279455,"body_markdown":"By using it, Spring will auto load the beans specified in https://github.com/apache/camel-spring-boot/blob/main/components-starter/camel-bindy-starter/src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports","body":"By using it, Spring will auto load the beans specified in <a href=\"https://github.com/apache/camel-spring-boot/blob/main/components-starter/camel-bindy-starter/src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports\" rel=\"nofollow noreferrer\">github.com/apache/camel-spring-boot/blob/main/&hellip;</a>"},{"owner":{"account_id":5072657,"reputation":3288,"user_id":4071001,"display_name":"lcnicolau"},"score":0,"creation_date":1689953390,"post_id":76729649,"comment_id":135290353,"body_markdown":"I have the correct dependency in `pom.xml` with Apache Camel version `3.20.5`","body":"I have the correct dependency in <code>pom.xml</code> with Apache Camel version <code>3.20.5</code>"}],"tags":[],"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689854521,"creation_date":1689854521,"answer_id":76729649,"question_id":76725803,"body_markdown":"Have a look at the two following classes:\r\n\r\nhttps://github.com/apache/camel-spring-boot/tree/main/components-starter/camel-bindy-starter/src/main/java/org/apache/camel/dataformat/bindy/csv/springboot\r\n\r\nAs you will see, Camel will &quot;auto-mount&quot; several Bindy-oriented classes, so that they will be auto-wired when Spring(Boot) is going to instantiate the bindy component. \r\n\r\nAnd that case, you should of course NOT create your beans using the vanilla constructor (eg `new BindyCsvDataFormat`)","title":"Spring Boot auto-configuration not working for Apache Camel Bindy","body":"<p>Have a look at the two following classes:</p>\n<p><a href=\"https://github.com/apache/camel-spring-boot/tree/main/components-starter/camel-bindy-starter/src/main/java/org/apache/camel/dataformat/bindy/csv/springboot\" rel=\"nofollow noreferrer\">https://github.com/apache/camel-spring-boot/tree/main/components-starter/camel-bindy-starter/src/main/java/org/apache/camel/dataformat/bindy/csv/springboot</a></p>\n<p>As you will see, Camel will &quot;auto-mount&quot; several Bindy-oriented classes, so that they will be auto-wired when Spring(Boot) is going to instantiate the bindy component.</p>\n<p>And that case, you should of course NOT create your beans using the vanilla constructor (eg <code>new BindyCsvDataFormat</code>)</p>\n"}],"owner":{"account_id":5072657,"reputation":3288,"user_id":4071001,"display_name":"lcnicolau"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689953134,"creation_date":1689809679,"question_id":76725803,"body_markdown":"As described [here][1], and in the official documentation itself: the [`unwrapSingleInstance`][2] property allows us to establish *&quot;when unmarshalling should a single instance be unwrapped and returned instead of wrapped in a java.util.List&quot;*.\r\n\r\nHowever, the [`camel.dataformat.bindy-csv.unwrap-single-instance`][3] auto-configuration property of Spring Boot has no effect on the documentation example:\r\n\r\n    BindyCsvDataFormat bindy = new BindyCsvDataFormat(com.acme.model.MyModel.class);\r\n\r\n    from(&quot;file://inbox&quot;)\r\n      .unmarshal(bindy)\r\n      .to(&quot;direct:handleOrders&quot;);\r\n\r\nThe above example only works by setting the property this way, directly in the code:\r\n\r\n    bindy.setUnwrapSingleInstance(false);\r\n\r\nI guess this is because the `new BindyCsvDataFormat` object is not managed by Spring, so how can I get Spring to create and manage it for auto-configuration to take effect in Apache Camel?\r\n\r\n\r\n----------\r\n\r\n\r\nI tried to create a regular bean in Spring and set the reference in `unmarshal`, and auto-configuration has no effect either:\r\n\r\n    @Bean\r\n    public DataFormat bindyCsvDataFormat() {\r\n        return new BindyCsvDataFormat(com.acme.model.MyModel.class);\r\n    }\r\n\r\n    from(&quot;file://inbox&quot;)\r\n      .unmarshal(&quot;bindyCsvDataFormat&quot;)\r\n      .to(&quot;direct:handleOrders&quot;);\r\n\r\n----------\r\n\r\nI have this dependency in `pom.xml` with Apache Camel version `3.20.5`:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;camel-bindy-starter&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  [1]: https://stackoverflow.com/a/49108296/4071001\r\n  [2]: https://camel.apache.org/components/3.20.x/dataformats/bindy-dataformat.html#_dataformat_option_unwrapSingleInstance\r\n  [3]: https://camel.apache.org/components/3.20.x/dataformats/bindy-dataformat.html#_sb_option_camel_dataformat_bindy-csv_unwrap-single-instance","title":"Spring Boot auto-configuration not working for Apache Camel Bindy","body":"<p>As described <a href=\"https://stackoverflow.com/a/49108296/4071001\">here</a>, and in the official documentation itself: the <a href=\"https://camel.apache.org/components/3.20.x/dataformats/bindy-dataformat.html#_dataformat_option_unwrapSingleInstance\" rel=\"nofollow noreferrer\"><code>unwrapSingleInstance</code></a> property allows us to establish <em>&quot;when unmarshalling should a single instance be unwrapped and returned instead of wrapped in a java.util.List&quot;</em>.</p>\n<p>However, the <a href=\"https://camel.apache.org/components/3.20.x/dataformats/bindy-dataformat.html#_sb_option_camel_dataformat_bindy-csv_unwrap-single-instance\" rel=\"nofollow noreferrer\"><code>camel.dataformat.bindy-csv.unwrap-single-instance</code></a> auto-configuration property of Spring Boot has no effect on the documentation example:</p>\n<pre><code>BindyCsvDataFormat bindy = new BindyCsvDataFormat(com.acme.model.MyModel.class);\n\nfrom(&quot;file://inbox&quot;)\n  .unmarshal(bindy)\n  .to(&quot;direct:handleOrders&quot;);\n</code></pre>\n<p>The above example only works by setting the property this way, directly in the code:</p>\n<pre><code>bindy.setUnwrapSingleInstance(false);\n</code></pre>\n<p>I guess this is because the <code>new BindyCsvDataFormat</code> object is not managed by Spring, so how can I get Spring to create and manage it for auto-configuration to take effect in Apache Camel?</p>\n<hr />\n<p>I tried to create a regular bean in Spring and set the reference in <code>unmarshal</code>, and auto-configuration has no effect either:</p>\n<pre><code>@Bean\npublic DataFormat bindyCsvDataFormat() {\n    return new BindyCsvDataFormat(com.acme.model.MyModel.class);\n}\n\nfrom(&quot;file://inbox&quot;)\n  .unmarshal(&quot;bindyCsvDataFormat&quot;)\n  .to(&quot;direct:handleOrders&quot;);\n</code></pre>\n<hr />\n<p>I have this dependency in <code>pom.xml</code> with Apache Camel version <code>3.20.5</code>:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n    &lt;artifactId&gt;camel-bindy-starter&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","security","encryption","bouncycastle","pgp"],"owner":{"account_id":23669507,"reputation":5,"user_id":17696490,"display_name":"Semih"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":212,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689953085,"creation_date":1689953085,"question_id":76739276,"body_markdown":"I have an encrypted csv type file that I created via [pgptool][1] and I want to decrypt this file in my java application using the [Bouncy Castle][2] library, but I get the error &quot;Encrypted message contains a signed message not literal data&quot;, what could be the reason for this? \r\n\r\nWhen I debug my code, it enters the following if block &quot;if (message instanceof PGPOnePassSignatureList)&quot; but I don&#39;t understand why it enters, I expect the type of my message to be &quot;PGPLiteralData&quot;?\r\n\r\nThis is my pgp message I want to decrypt:\r\n\r\n&gt; -----BEGIN PGP MESSAGE-----\r\n&gt;\r\n&gt; Version: Keybase OpenPGP v2.0.76 \r\n&gt; \r\n&gt; Comment: https://keybase.io/crypto\r\n&gt; \r\n&gt; wYwDLAyGLP4eR3cBA/43VKG4RcqQCFaJcy60+B0C/ZuyDtbgyYvU2DMA5h0F1wMY\r\n&gt; 2zT+XtBMp7ZFt8M9KuPiGzFKR/DvAtWgaTYKpJWqjlQmZVeRkEDauDnEn7ZIICBK\r\n&gt; rWgalv/pN8Odl6WHfGZ0qL4aPNDGfUiqkNmMhTZSj1oaMOgv/GZHItNX4iBGMtLA\r\n&gt; 9wGcGj9iyMK8LfV/wX2n0Bz7h21O64MO+ob7VhQej96xjpAS1NIU55o6ipI0YDam\r\n&gt; 8mxVZJPMMAAIVaXuzRygmMkhWyWX2tfTqSm1A9f6t7hvomw9SAdgc0Lvb7Qd8/aT\r\n&gt; 1UaGAIZgSX9AiWa+WuTVDO3uFszH2VD/ZhjhDDUhJFZNjdfikkQv1FMF6ysRuGkd\r\n&gt; 2PpzezqU4f5uwhgxK/qMRAtJEVkNtZfcRDQdSM/miuOF6ooQRtD7LJT7JzsFIAMW\r\n&gt; +nEkht9g6RT0LHbQMylGl5aJY9pAskmWbPO3mlL56XAWj7Owi2b8RKIrb92UoteS JkbzRoLBGzvyLaJ9RoE9i/bZqMxTvWVJrFQWEnAms0r/ZGP8gC8i4NtPROH6RdTk\r\n&gt; XJrUrg+zy+sizUemMcCiHQ0O+tVlV2biQ67DpAQJa6GHcvrryHygjPzaIPg+lJkS\r\n&gt; XHyCwafXedPY5eWhi1jdYyGOgvRZRrztTEb5QprDHBvONQv1cZcS55/DkC/iNT1y\r\n&gt; IHFoqgj20TsYcI47RR1Ejm6ey1DzZ2dOlHJrcdkhJOHYM7VVLDHR1cPBXDewP8t+\r\n&gt; \r\n&gt; 72Irzz2+SSE=\r\n&gt; \r\n&gt; =+pp7\r\n&gt; \r\n&gt; -----END PGP MESSAGE-----\r\n\r\nThese are my decryption codes:\r\n\r\n&gt; I.\r\n\r\n        public String decrypt(String encryptedData) {\r\n        try {\r\n            PgpDecryptionUtil pgpDecryptionUtil = new PgpDecryptionUtil(PRIVATE_KEY, PRIVATE_KEY_PASSWORD);\r\n            byte[] encryptedBytes = encryptedData.getBytes();\r\n            byte[] decryptedBytes = pgpDecryptionUtil.decrypt(encryptedBytes);\r\n            return new String(decryptedBytes, Charset.defaultCharset());\r\n        } catch (IOException | PGPException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n\r\n&gt; II.\r\n\r\n        public byte[] decrypt(byte[] encryptedBytes) throws PGPException, IOException {\r\n        ByteArrayInputStream encryptedIn = new ByteArrayInputStream(encryptedBytes);\r\n        ByteArrayOutputStream clearOut = new ByteArrayOutputStream();\r\n        decrypt(encryptedIn, clearOut);\r\n        return clearOut.toByteArray();\r\n    }\r\n\r\n&gt; III.\r\n\r\n        public void decrypt(InputStream encryptedIn, OutputStream clearOut)\r\n            throws PGPException, IOException {\r\n        // Removing armour and returning the underlying binary encrypted stream\r\n        encryptedIn = PGPUtil.getDecoderStream(encryptedIn);\r\n        JcaPGPObjectFactory pgpObjectFactory = new JcaPGPObjectFactory(encryptedIn);\r\n\r\n        Object obj = pgpObjectFactory.nextObject();\r\n        //The first object might be a marker packet\r\n        PGPEncryptedDataList pgpEncryptedDataList = (obj instanceof PGPEncryptedDataList)\r\n                ? (PGPEncryptedDataList) obj : (PGPEncryptedDataList) pgpObjectFactory.nextObject();\r\n\r\n        PGPPrivateKey pgpPrivateKey = null;\r\n        PGPPublicKeyEncryptedData publicKeyEncryptedData = null;\r\n\r\n        Iterator&lt;PGPEncryptedData&gt; encryptedDataItr = pgpEncryptedDataList.getEncryptedDataObjects();\r\n        while (pgpPrivateKey == null &amp;&amp; encryptedDataItr.hasNext()) {\r\n            publicKeyEncryptedData = (PGPPublicKeyEncryptedData) encryptedDataItr.next();\r\n            pgpPrivateKey = findSecretKey(publicKeyEncryptedData.getKeyID());\r\n        }\r\n\r\n        if (Objects.isNull(publicKeyEncryptedData)) {\r\n            throw new PGPException(&quot;Could not generate PGPPublicKeyEncryptedData object&quot;);\r\n        }\r\n\r\n        if (pgpPrivateKey == null) {\r\n            throw new PGPException(&quot;Could Not Extract private key&quot;);\r\n        }\r\n        CommonUtils.decrypt(clearOut, pgpPrivateKey, publicKeyEncryptedData);\r\n    }\r\n\r\n&gt; IV.\r\n\r\n        public static void decrypt(OutputStream clearOut, PGPPrivateKey pgpPrivateKey, PGPPublicKeyEncryptedData publicKeyEncryptedData) throws IOException, PGPException {\r\n        PublicKeyDataDecryptorFactory decryptorFactory = new JcePublicKeyDataDecryptorFactoryBuilder()\r\n                .setProvider(BouncyCastleProvider.PROVIDER_NAME).build(pgpPrivateKey);\r\n        InputStream decryptedCompressedIn = publicKeyEncryptedData.getDataStream(decryptorFactory);\r\n\r\n        JcaPGPObjectFactory decCompObjFac = new JcaPGPObjectFactory(decryptedCompressedIn);\r\n        PGPCompressedData pgpCompressedData = (PGPCompressedData) decCompObjFac.nextObject();\r\n\r\n        InputStream compressedDataStream = new BufferedInputStream(pgpCompressedData.getDataStream());\r\n        JcaPGPObjectFactory pgpCompObjFac = new JcaPGPObjectFactory(compressedDataStream);\r\n\r\n        Object message = pgpCompObjFac.nextObject();\r\n\r\n        if (message instanceof PGPLiteralData) {\r\n            PGPLiteralData pgpLiteralData = (PGPLiteralData) message;\r\n            InputStream decDataStream = pgpLiteralData.getInputStream();\r\n            IOUtils.copy(decDataStream, clearOut);\r\n            clearOut.close();\r\n        } else if (message instanceof PGPOnePassSignatureList) {\r\n            throw new PGPException(&quot;Encrypted message contains a signed message not literal data&quot;);\r\n        } else {\r\n            throw new PGPException(&quot;Message is not a simple encrypted file - Type Unknown&quot;);\r\n        }\r\n        // Performing Integrity check\r\n        if (publicKeyEncryptedData.isIntegrityProtected()) {\r\n            if (!publicKeyEncryptedData.verify()) {\r\n                throw new PGPException(&quot;Message failed integrity check&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://pgptool.org/\r\n  [2]: https://www.bouncycastle.org/\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"org.bouncycastle.openpgp.PGPException: Encrypted message contains a signed message not literal data","body":"<p>I have an encrypted csv type file that I created via <a href=\"https://pgptool.org/\" rel=\"nofollow noreferrer\">pgptool</a> and I want to decrypt this file in my java application using the <a href=\"https://www.bouncycastle.org/\" rel=\"nofollow noreferrer\">Bouncy Castle</a> library, but I get the error &quot;Encrypted message contains a signed message not literal data&quot;, what could be the reason for this?</p>\n<p>When I debug my code, it enters the following if block &quot;if (message instanceof PGPOnePassSignatureList)&quot; but I don't understand why it enters, I expect the type of my message to be &quot;PGPLiteralData&quot;?</p>\n<p>This is my pgp message I want to decrypt:</p>\n<blockquote>\n<p>-----BEGIN PGP MESSAGE-----</p>\n<p>Version: Keybase OpenPGP v2.0.76</p>\n<p>Comment: <a href=\"https://keybase.io/crypto\" rel=\"nofollow noreferrer\">https://keybase.io/crypto</a></p>\n<p>wYwDLAyGLP4eR3cBA/43VKG4RcqQCFaJcy60+B0C/ZuyDtbgyYvU2DMA5h0F1wMY\n2zT+XtBMp7ZFt8M9KuPiGzFKR/DvAtWgaTYKpJWqjlQmZVeRkEDauDnEn7ZIICBK\nrWgalv/pN8Odl6WHfGZ0qL4aPNDGfUiqkNmMhTZSj1oaMOgv/GZHItNX4iBGMtLA\n9wGcGj9iyMK8LfV/wX2n0Bz7h21O64MO+ob7VhQej96xjpAS1NIU55o6ipI0YDam\n8mxVZJPMMAAIVaXuzRygmMkhWyWX2tfTqSm1A9f6t7hvomw9SAdgc0Lvb7Qd8/aT\n1UaGAIZgSX9AiWa+WuTVDO3uFszH2VD/ZhjhDDUhJFZNjdfikkQv1FMF6ysRuGkd\n2PpzezqU4f5uwhgxK/qMRAtJEVkNtZfcRDQdSM/miuOF6ooQRtD7LJT7JzsFIAMW\n+nEkht9g6RT0LHbQMylGl5aJY9pAskmWbPO3mlL56XAWj7Owi2b8RKIrb92UoteS JkbzRoLBGzvyLaJ9RoE9i/bZqMxTvWVJrFQWEnAms0r/ZGP8gC8i4NtPROH6RdTk\nXJrUrg+zy+sizUemMcCiHQ0O+tVlV2biQ67DpAQJa6GHcvrryHygjPzaIPg+lJkS\nXHyCwafXedPY5eWhi1jdYyGOgvRZRrztTEb5QprDHBvONQv1cZcS55/DkC/iNT1y\nIHFoqgj20TsYcI47RR1Ejm6ey1DzZ2dOlHJrcdkhJOHYM7VVLDHR1cPBXDewP8t+</p>\n<p>72Irzz2+SSE=</p>\n<p>=+pp7</p>\n<p>-----END PGP MESSAGE-----</p>\n</blockquote>\n<p>These are my decryption codes:</p>\n<blockquote>\n<p>I.</p>\n</blockquote>\n<pre><code>    public String decrypt(String encryptedData) {\n    try {\n        PgpDecryptionUtil pgpDecryptionUtil = new PgpDecryptionUtil(PRIVATE_KEY, PRIVATE_KEY_PASSWORD);\n        byte[] encryptedBytes = encryptedData.getBytes();\n        byte[] decryptedBytes = pgpDecryptionUtil.decrypt(encryptedBytes);\n        return new String(decryptedBytes, Charset.defaultCharset());\n    } catch (IOException | PGPException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<blockquote>\n<p>II.</p>\n</blockquote>\n<pre><code>    public byte[] decrypt(byte[] encryptedBytes) throws PGPException, IOException {\n    ByteArrayInputStream encryptedIn = new ByteArrayInputStream(encryptedBytes);\n    ByteArrayOutputStream clearOut = new ByteArrayOutputStream();\n    decrypt(encryptedIn, clearOut);\n    return clearOut.toByteArray();\n}\n</code></pre>\n<blockquote>\n<p>III.</p>\n</blockquote>\n<pre><code>    public void decrypt(InputStream encryptedIn, OutputStream clearOut)\n        throws PGPException, IOException {\n    // Removing armour and returning the underlying binary encrypted stream\n    encryptedIn = PGPUtil.getDecoderStream(encryptedIn);\n    JcaPGPObjectFactory pgpObjectFactory = new JcaPGPObjectFactory(encryptedIn);\n\n    Object obj = pgpObjectFactory.nextObject();\n    //The first object might be a marker packet\n    PGPEncryptedDataList pgpEncryptedDataList = (obj instanceof PGPEncryptedDataList)\n            ? (PGPEncryptedDataList) obj : (PGPEncryptedDataList) pgpObjectFactory.nextObject();\n\n    PGPPrivateKey pgpPrivateKey = null;\n    PGPPublicKeyEncryptedData publicKeyEncryptedData = null;\n\n    Iterator&lt;PGPEncryptedData&gt; encryptedDataItr = pgpEncryptedDataList.getEncryptedDataObjects();\n    while (pgpPrivateKey == null &amp;&amp; encryptedDataItr.hasNext()) {\n        publicKeyEncryptedData = (PGPPublicKeyEncryptedData) encryptedDataItr.next();\n        pgpPrivateKey = findSecretKey(publicKeyEncryptedData.getKeyID());\n    }\n\n    if (Objects.isNull(publicKeyEncryptedData)) {\n        throw new PGPException(&quot;Could not generate PGPPublicKeyEncryptedData object&quot;);\n    }\n\n    if (pgpPrivateKey == null) {\n        throw new PGPException(&quot;Could Not Extract private key&quot;);\n    }\n    CommonUtils.decrypt(clearOut, pgpPrivateKey, publicKeyEncryptedData);\n}\n</code></pre>\n<blockquote>\n<p>IV.</p>\n</blockquote>\n<pre><code>    public static void decrypt(OutputStream clearOut, PGPPrivateKey pgpPrivateKey, PGPPublicKeyEncryptedData publicKeyEncryptedData) throws IOException, PGPException {\n    PublicKeyDataDecryptorFactory decryptorFactory = new JcePublicKeyDataDecryptorFactoryBuilder()\n            .setProvider(BouncyCastleProvider.PROVIDER_NAME).build(pgpPrivateKey);\n    InputStream decryptedCompressedIn = publicKeyEncryptedData.getDataStream(decryptorFactory);\n\n    JcaPGPObjectFactory decCompObjFac = new JcaPGPObjectFactory(decryptedCompressedIn);\n    PGPCompressedData pgpCompressedData = (PGPCompressedData) decCompObjFac.nextObject();\n\n    InputStream compressedDataStream = new BufferedInputStream(pgpCompressedData.getDataStream());\n    JcaPGPObjectFactory pgpCompObjFac = new JcaPGPObjectFactory(compressedDataStream);\n\n    Object message = pgpCompObjFac.nextObject();\n\n    if (message instanceof PGPLiteralData) {\n        PGPLiteralData pgpLiteralData = (PGPLiteralData) message;\n        InputStream decDataStream = pgpLiteralData.getInputStream();\n        IOUtils.copy(decDataStream, clearOut);\n        clearOut.close();\n    } else if (message instanceof PGPOnePassSignatureList) {\n        throw new PGPException(&quot;Encrypted message contains a signed message not literal data&quot;);\n    } else {\n        throw new PGPException(&quot;Message is not a simple encrypted file - Type Unknown&quot;);\n    }\n    // Performing Integrity check\n    if (publicKeyEncryptedData.isIntegrityProtected()) {\n        if (!publicKeyEncryptedData.verify()) {\n            throw new PGPException(&quot;Message failed integrity check&quot;);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","time","localization","java-17","datetimeformatter"],"comments":[{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1648135714,"post_id":71604798,"comment_id":126552779,"body_markdown":"Are you sure that worked with java 11 without a custom formater? I don&#39;t think so. You have probably used a `DateTimeFormatterBuilder` and appended a custom `ChronoField.AMPM_OF_DAY` to it. I would be surprised if it worked since it is not usual to format dates having `vorm.` and `nachm.`  as a subtitute for `am/pm`. Besides `HH` is for 24 hour format; it should be `hh:mm ....`","body":"Are you sure that worked with java 11 without a custom formater? I don&#39;t think so. You have probably used a <code>DateTimeFormatterBuilder</code> and appended a custom <code>ChronoField.AMPM_OF_DAY</code> to it. I would be surprised if it worked since it is not usual to format dates having <code>vorm.</code> and <code>nachm.</code>  as a subtitute for <code>am&#47;pm</code>. Besides <code>HH</code> is for 24 hour format; it should be <code>hh:mm ....</code>"},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1648136631,"post_id":71604798,"comment_id":126553200,"body_markdown":"https://stackoverflow.com/questions/44411475/how-to-change-am-pm-symbol-to-my-own-alphabet-when-using-java-8-date-time-api","body":"<a href=\"https://stackoverflow.com/questions/44411475/how-to-change-am-pm-symbol-to-my-own-alphabet-when-using-java-8-date-time-api\" title=\"how to change am pm symbol to my own alphabet when using java 8 date time api\">stackoverflow.com/questions/44411475/&hellip;</a>"},{"owner":{"account_id":4262172,"reputation":23,"user_id":3486252,"display_name":"domkol"},"score":0,"creation_date":1648140714,"post_id":71604798,"comment_id":126554941,"body_markdown":"@Eritrean Yes, I&#39;m sure that it worked under Java 11 without any custom formatter because the code has not been changed and it really is as mentioned in the question. No, the code is not using `DateTimeFormatterBuilder` but I have now looked into that method `ofPattern` and that is using the builder: `return new DateTimeFormatterBuilder().appendPattern(pattern).toFormatter(locale);` I agree that localised substitutes are rare but it&#39;s a requirement. You&#39;re right about the pattern but I didn&#39;t define mine.","body":"@Eritrean Yes, I&#39;m sure that it worked under Java 11 without any custom formatter because the code has not been changed and it really is as mentioned in the question. No, the code is not using <code>DateTimeFormatterBuilder</code> but I have now looked into that method <code>ofPattern</code> and that is using the builder: <code>return new DateTimeFormatterBuilder().appendPattern(pattern).toFormatte&zwnj;&#8203;r(locale);</code> I agree that localised substitutes are rare but it&#39;s a requirement. You&#39;re right about the pattern but I didn&#39;t define mine."},{"owner":{"account_id":4262172,"reputation":23,"user_id":3486252,"display_name":"domkol"},"score":0,"creation_date":1648140895,"post_id":71604798,"comment_id":126555021,"body_markdown":"Just in case of someone asking: Replacing the pattern `HH:mm:ss a` to `hh:mm:ss a` did not change the output in this case.","body":"Just in case of someone asking: Replacing the pattern <code>HH:mm:ss a</code> to <code>hh:mm:ss a</code> did not change the output in this case."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1648236392,"post_id":71604798,"comment_id":126582023,"body_markdown":"It’s probably the locale data bundled with Java 17 being different, not the formatter class itself.","body":"It’s probably the locale data bundled with Java 17 being different, not the formatter class itself."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1648237066,"post_id":71604798,"comment_id":126582204,"body_markdown":"I can only partially reproduce your observations in my Java 17.  While for locales `Locale.GERMAN` and `Locale.GERMANY` I do get `PM`, for many other locales I do not. Including locales of language codes he, lv, yi, cs, el, af, sa, fa, lb and no.","body":"I can only partially reproduce your observations in my Java 17.  While for locales <code>Locale.GERMAN</code> and <code>Locale.GERMANY</code> I do get <code>PM</code>, for many other locales I do not. Including locales of language codes he, lv, yi, cs, el, af, sa, fa, lb and no."},{"owner":{"account_id":185127,"reputation":2955,"user_id":2471311,"display_name":"Klara"},"score":0,"creation_date":1669209823,"post_id":71604798,"comment_id":131592210,"body_markdown":"It seems the locale data is the same - for example https://github.com/openjdk/jdk11/blob/master/src/jdk.localedata/share/classes/sun/text/resources/ext/JavaTimeSupplementary_de.java#L84 vs https://github.com/openjdk/jdk17/blob/master/src/jdk.localedata/share/classes/sun/text/resources/ext/JavaTimeSupplementary_de.java#L84 is both nachm. for German","body":"It seems the locale data is the same - for example <a href=\"https://github.com/openjdk/jdk11/blob/master/src/jdk.localedata/share/classes/sun/text/resources/ext/JavaTimeSupplementary_de.java#L84\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk11/blob/master/src/jdk.localedata/shar&zwnj;&#8203;e/&hellip;</a> vs <a href=\"https://github.com/openjdk/jdk17/blob/master/src/jdk.localedata/share/classes/sun/text/resources/ext/JavaTimeSupplementary_de.java#L84\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk17/blob/master/src/jdk.localedata/shar&zwnj;&#8203;e/&hellip;</a> is both nachm. for German"}],"answers":[{"tags":[],"owner":{"account_id":9047217,"reputation":31,"user_id":6738996,"display_name":"Prateek Vyas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689952848,"creation_date":1688979956,"answer_id":76652262,"question_id":71604798,"body_markdown":"Creating proper datetime format with correct `Chronology` and `Locale` will give am/pm in desired locale. For Germany and Chinese, I was able to get correct data, but for Hindi and Italy it’s not giving expected output. May be this is how data is showed in their respective region.\r\n\r\n    final String pattern = DateTimeFormatterBuilder.getLocalizedDateTimePattern(FormatStyle.FULL, FormatStyle.FULL, Chronology.ofLocale(Locale.GERMAN),Locale.GERMAN);\r\n    final DateTimeFormatter targetFormat = DateTimeFormatter.ofPattern(pattern).withLocale(Locale.GERMAN);\r\n    final String value = ZonedDateTime.now().format(targetFormat);","title":"Java 17: DateTimeFormatter not localising AM/PM marker","body":"<p>Creating proper datetime format with correct <code>Chronology</code> and <code>Locale</code> will give am/pm in desired locale. For Germany and Chinese, I was able to get correct data, but for Hindi and Italy it’s not giving expected output. May be this is how data is showed in their respective region.</p>\n<pre><code>final String pattern = DateTimeFormatterBuilder.getLocalizedDateTimePattern(FormatStyle.FULL, FormatStyle.FULL, Chronology.ofLocale(Locale.GERMAN),Locale.GERMAN);\nfinal DateTimeFormatter targetFormat = DateTimeFormatter.ofPattern(pattern).withLocale(Locale.GERMAN);\nfinal String value = ZonedDateTime.now().format(targetFormat);\n</code></pre>\n"}],"owner":{"account_id":4262172,"reputation":23,"user_id":3486252,"display_name":"domkol"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":867,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689952848,"creation_date":1648133937,"question_id":71604798,"body_markdown":"I currently am migrating a piece of software from Java 11 to Java 17 and noticed that `DateTimeFormatter` has changed its behaviour when formatting time that contains the AM/PM marker. Earlier, that marker would have been localised (e.g. `vorm.` for AM in German) and now, it stays AM. This is not a locale-specific issue, because I already have tried this with other locales. The pattern that is being tried here is `HH:mm:ss a`, where `a` is the place holder of the marker. How can the previous behaviour be restored?\r\n\r\nThe `DateTimeFormatter` is being called using the `ofPattern` method as follows:\r\n`ofPattern(&quot;HH:mm:ss a&quot;, Locale.GERMANY).format(now)`.\r\nThe variable `now` is a LocalDateTime object.","title":"Java 17: DateTimeFormatter not localising AM/PM marker","body":"<p>I currently am migrating a piece of software from Java 11 to Java 17 and noticed that <code>DateTimeFormatter</code> has changed its behaviour when formatting time that contains the AM/PM marker. Earlier, that marker would have been localised (e.g. <code>vorm.</code> for AM in German) and now, it stays AM. This is not a locale-specific issue, because I already have tried this with other locales. The pattern that is being tried here is <code>HH:mm:ss a</code>, where <code>a</code> is the place holder of the marker. How can the previous behaviour be restored?</p>\n<p>The <code>DateTimeFormatter</code> is being called using the <code>ofPattern</code> method as follows:\n<code>ofPattern(&quot;HH:mm:ss a&quot;, Locale.GERMANY).format(now)</code>.\nThe variable <code>now</code> is a LocalDateTime object.</p>\n"},{"tags":["java","apache-poi","mapi"],"answers":[{"tags":[],"owner":{"account_id":131793,"reputation":64015,"user_id":332059,"accept_rate":57,"display_name":"Dmitry Streblechenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689952574,"creation_date":1689952574,"answer_id":76739220,"question_id":76737743,"body_markdown":"The error is very specific - you are feeding the converter class a text file as if it were MSG. `6465766965636552` is `&quot;devieceR&quot;`, so yes, it is definitely not an MSG file. \r\n\r\nOpen it in Notepad to see what kind of data you have.","title":"How to convert .eml to .msg in java for free","body":"<p>The error is very specific - you are feeding the converter class a text file as if it were MSG. <code>6465766965636552</code> is <code>&quot;devieceR&quot;</code>, so yes, it is definitely not an MSG file.</p>\n<p>Open it in Notepad to see what kind of data you have.</p>\n"}],"owner":{"account_id":22875455,"reputation":1,"user_id":17017862,"display_name":"preet leelaramani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1690300101,"answer_count":1,"score":0,"last_activity_date":1689952574,"creation_date":1689940305,"question_id":76737743,"body_markdown":"Requirement\r\nWe are calling API..The API need .msg file in request.\r\n\r\nLogic\r\nI have .eml file in my local diskspace, I want to convert into .msg in java for free.\r\nCode Snippet :\r\n\r\nString msg_file_path=&quot;C:\\\\temp\\\\msg_email.msg&quot;;\r\n\r\nFileOutputStream msg_file = new FileOutputStream(msg_file_path);\r\n\r\ntry {\r\n\r\nMAPIMessage msgObj = new MAPIMessage(&quot;C:\\\\temp\\\\_emai.eml&quot;);\r\n\r\nmsgObj.write(msg_file);\r\n\r\nSystem.out.println(&quot;EML file converted to MSG: &quot; + msg_file);\r\n\r\n}\r\n\r\ncatch (Exception e) {\r\n\r\ne.printStackTrace();\r\n\r\n}\r\n\r\nGetting below error:\r\n\r\nrg.apache.poi.poifs.filesystem.NotOLE2FileException: Invalid header signature; read 0x6465766965636552, expected 0xE11AB1A1E011CFD0 - Your file appears not to be a valid OLE2 document\r\n","title":"How to convert .eml to .msg in java for free","body":"<p>Requirement\nWe are calling API..The API need .msg file in request.</p>\n<p>Logic\nI have .eml file in my local diskspace, I want to convert into .msg in java for free.\nCode Snippet :</p>\n<p>String msg_file_path=&quot;C:\\temp\\msg_email.msg&quot;;</p>\n<p>FileOutputStream msg_file = new FileOutputStream(msg_file_path);</p>\n<p>try {</p>\n<p>MAPIMessage msgObj = new MAPIMessage(&quot;C:\\temp\\_emai.eml&quot;);</p>\n<p>msgObj.write(msg_file);</p>\n<p>System.out.println(&quot;EML file converted to MSG: &quot; + msg_file);</p>\n<p>}</p>\n<p>catch (Exception e) {</p>\n<p>e.printStackTrace();</p>\n<p>}</p>\n<p>Getting below error:</p>\n<p>rg.apache.poi.poifs.filesystem.NotOLE2FileException: Invalid header signature; read 0x6465766965636552, expected 0xE11AB1A1E011CFD0 - Your file appears not to be a valid OLE2 document</p>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1665653890,"post_id":74053211,"comment_id":130752155,"body_markdown":"Is it actually a problem? To me it just looks like a debug or informational message from Mockito. Do you get an exception or error in the first case?","body":"Is it actually a problem? To me it just looks like a debug or informational message from Mockito. Do you get an exception or error in the first case?"},{"owner":{"account_id":18068865,"reputation":23,"user_id":13133976,"display_name":"climy007"},"score":0,"creation_date":1665716301,"post_id":74053211,"comment_id":130768600,"body_markdown":"I didn&#39;t get any exception in the first case. But the method is called 2 times, and the test case should be passed, while it just told me that `Condition not satisfied`. When I change the `times(2)` to `times(1)`, the error message is just like the second case.","body":"I didn&#39;t get any exception in the first case. But the method is called 2 times, and the test case should be passed, while it just told me that <code>Condition not satisfied</code>. When I change the <code>times(2)</code> to <code>times(1)</code>, the error message is just like the second case."},{"owner":{"account_id":18068865,"reputation":23,"user_id":13133976,"display_name":"climy007"},"score":0,"creation_date":1665999710,"post_id":74053211,"comment_id":130822854,"body_markdown":"No, I didn&#39;t Mock the native/system class.","body":"No, I didn&#39;t Mock the native/system class."}],"answers":[{"tags":[],"owner":{"account_id":1534622,"reputation":1593,"user_id":1430991,"display_name":"gce"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689952311,"creation_date":1689952311,"answer_id":76739188,"question_id":74053211,"body_markdown":"Adding `|| true` helped me resolve similar issue:\r\n\r\n    verify(mock, times(2)).methodName(captor.capture()) || true","title":"When using Mockito verify method `times` got null","body":"<p>Adding <code>|| true</code> helped me resolve similar issue:</p>\n<pre><code>verify(mock, times(2)).methodName(captor.capture()) || true\n</code></pre>\n"}],"owner":{"account_id":18068865,"reputation":23,"user_id":13133976,"display_name":"climy007"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689952311,"creation_date":1665652197,"question_id":74053211,"body_markdown":"When I trying to use Mockito verify to test extral call times of testMethod(indeed this method is just execute 2 times), but I got following message.\r\n```\r\nverify(XXXXXXX, times(2)).testMethod(any(XXXXXX.class))\r\n|      |          |         |        |        |\r\n|      |          |         null    null      class XXXXXX\r\n|      |          Wanted invocations count: 2\r\n|      Mock for XXXXXXX, hashCode: 292294397\r\nMock for XXXXXXX, hashCode: 292294397\r\n```\r\nIf I change the times to 1, and the error message is:\r\n```\r\nverify(XXXXXXX, times(1)).testMethod(any(XXXXXX.class))\r\n|      |          |         |     |         |\r\n|      |          |         |     null      class XXX\r\n|      |          |         org.mockito.exceptions.verification.TooManyActualInvocations: \r\n|      |          |         XXX.XXXX(\r\n|      |          |             &lt;any XXX&gt;\r\n|      |          |         );\r\n|      |          |         Wanted 1 time:\r\n|      |          |         -&gt; at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n|      |          |         But was 2 times:\r\n|      |          |         -&gt; at XXXX.XXX(XXX.java:129)\r\n|      |          |         -&gt; at XXXXX.XXX(XXX.java:129)\r\n|      |          |          \r\n|      |          |         \r\n|      |          Wanted invocations count: 1\r\n```\r\nDoes anybody have met this problem before?","title":"When using Mockito verify method `times` got null","body":"<p>When I trying to use Mockito verify to test extral call times of testMethod(indeed this method is just execute 2 times), but I got following message.</p>\n<pre><code>verify(XXXXXXX, times(2)).testMethod(any(XXXXXX.class))\n|      |          |         |        |        |\n|      |          |         null    null      class XXXXXX\n|      |          Wanted invocations count: 2\n|      Mock for XXXXXXX, hashCode: 292294397\nMock for XXXXXXX, hashCode: 292294397\n</code></pre>\n<p>If I change the times to 1, and the error message is:</p>\n<pre><code>verify(XXXXXXX, times(1)).testMethod(any(XXXXXX.class))\n|      |          |         |     |         |\n|      |          |         |     null      class XXX\n|      |          |         org.mockito.exceptions.verification.TooManyActualInvocations: \n|      |          |         XXX.XXXX(\n|      |          |             &lt;any XXX&gt;\n|      |          |         );\n|      |          |         Wanted 1 time:\n|      |          |         -&gt; at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n|      |          |         But was 2 times:\n|      |          |         -&gt; at XXXX.XXX(XXX.java:129)\n|      |          |         -&gt; at XXXXX.XXX(XXX.java:129)\n|      |          |          \n|      |          |         \n|      |          Wanted invocations count: 1\n</code></pre>\n<p>Does anybody have met this problem before?</p>\n"},{"tags":["java","string","concatenation","string.format"],"comments":[{"owner":{"account_id":1612962,"reputation":2478,"user_id":1491414,"accept_rate":56,"display_name":"Ganesa Vijayakumar"},"score":0,"creation_date":1559214673,"post_id":925423,"comment_id":99354853,"body_markdown":"I think we can go with MessageFormat.format. Please see the answer https://stackoverflow.com/a/56377112/1491414 for more info.","body":"I think we can go with MessageFormat.format. Please see the answer <a href=\"https://stackoverflow.com/a/56377112/1491414\">stackoverflow.com/a/56377112/1491414</a> for more info."}],"answers":[{"comments":[{"owner":{"account_id":32984,"reputation":4331,"user_id":91933,"accept_rate":65,"display_name":"markvgti"},"score":2,"creation_date":1313825334,"post_id":925444,"comment_id":8547189,"body_markdown":"Can you point me to some documentation that talks about how to work with argument positions/order in Java (i.e., how to reference arguments by their position)? Thanks.","body":"Can you point me to some documentation that talks about how to work with argument positions/order in Java (i.e., how to reference arguments by their position)? Thanks."},{"owner":{"account_id":73834,"reputation":533,"user_id":212412,"display_name":"Aksel"},"score":16,"creation_date":1326830029,"post_id":925444,"comment_id":11131454,"body_markdown":"Better late than never, random Java version: http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax","body":"Better late than never, random Java version: <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/1.5.0/docs/api/java/util/&hellip;</a>"}],"tags":[],"owner":{"account_id":8817,"reputation":25201,"user_id":16035,"accept_rate":100,"display_name":"workmad3"},"comment_count":2,"down_vote_count":5,"up_vote_count":288,"is_accepted":true,"score":283,"last_activity_date":1413221237,"creation_date":1243594594,"answer_id":925444,"question_id":925423,"body_markdown":"I&#39;d suggest that it is better practice to use `String.format()`. The main reason is that `String.format()` can be more easily localised with text loaded from resource files whereas concatenation can&#39;t be localised without producing a new executable with different code for each language.\r\n\r\nIf you plan on your app being localisable you should also get into the habit of specifying argument positions for your format tokens as well:\r\n\r\n    &quot;Hello %1$s the time is %2$t&quot;\r\n\r\nThis can then be localised and have the name and time tokens swapped without requiring a recompile of the executable to account for the different ordering. With argument positions you can also re-use the same argument without passing it into the function twice:\r\n\r\n    String.format(&quot;Hello %1$s, your name is %1$s and the time is %2$t&quot;, name, time)\r\n\r\n","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<p>I'd suggest that it is better practice to use <code>String.format()</code>. The main reason is that <code>String.format()</code> can be more easily localised with text loaded from resource files whereas concatenation can't be localised without producing a new executable with different code for each language.</p>\n\n<p>If you plan on your app being localisable you should also get into the habit of specifying argument positions for your format tokens as well:</p>\n\n<pre><code>\"Hello %1$s the time is %2$t\"\n</code></pre>\n\n<p>This can then be localised and have the name and time tokens swapped without requiring a recompile of the executable to account for the different ordering. With argument positions you can also re-use the same argument without passing it into the function twice:</p>\n\n<pre><code>String.format(\"Hello %1$s, your name is %1$s and the time is %2$t\", name, time)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22705,"reputation":80417,"user_id":56285,"accept_rate":81,"display_name":"Jonik"},"score":4,"creation_date":1243594912,"post_id":925445,"comment_id":733352,"body_markdown":"I agree. Thinking about performance differences here is mainly just premature optimisation - in the unlikely event that profiling shows there&#39;s a problem here, then worry about it.","body":"I agree. Thinking about performance differences here is mainly just premature optimisation - in the unlikely event that profiling shows there&#39;s a problem here, then worry about it."},{"owner":{"account_id":8817,"reputation":25201,"user_id":16035,"accept_rate":100,"display_name":"workmad3"},"score":3,"creation_date":1243595235,"post_id":925445,"comment_id":733368,"body_markdown":"It&#39;s only really a matter of personal taste if the project is small and never intended to be internationalised in any meaningful sense. Otherwise String.format wins out over concatenation in every way.","body":"It&#39;s only really a matter of personal taste if the project is small and never intended to be internationalised in any meaningful sense. Otherwise String.format wins out over concatenation in every way."},{"owner":{"account_id":22705,"reputation":80417,"user_id":56285,"accept_rate":81,"display_name":"Jonik"},"score":9,"creation_date":1243595593,"post_id":925445,"comment_id":733385,"body_markdown":"I disagree. No matter how large the project is, you&#39;re hardly going to localise every string that&#39;s ever constructed within it. In other words, it depends on the situation (what are the strings used for).","body":"I disagree. No matter how large the project is, you&#39;re hardly going to localise every string that&#39;s ever constructed within it. In other words, it depends on the situation (what are the strings used for)."},{"owner":{"account_id":3794269,"reputation":1346,"user_id":3149905,"accept_rate":80,"display_name":"BobDoolittle"},"score":1,"creation_date":1496187631,"post_id":925445,"comment_id":75554677,"body_markdown":"I can&#39;t imagine how anybody would ever consider &#39;String.format(&quot;%s%s&quot;, a, b)&#39; to be more readable than &#39;a+b&#39;, and given the order-of-magnitude difference in speed that answer seems clear to me (in situations which will not require localization such as debug or most logging statements).","body":"I can&#39;t imagine how anybody would ever consider &#39;String.format(&quot;%s%s&quot;, a, b)&#39; to be more readable than &#39;a+b&#39;, and given the order-of-magnitude difference in speed that answer seems clear to me (in situations which will not require localization such as debug or most logging statements)."}],"tags":[],"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"comment_count":4,"down_vote_count":2,"up_vote_count":26,"is_accepted":false,"score":24,"last_activity_date":1243594609,"creation_date":1243594609,"answer_id":925445,"question_id":925423,"body_markdown":"&gt; Which one is more readable depends on how your head works. \r\n\r\nYou got your answer right there. \r\n\r\nIt&#39;s a matter of personal taste.\r\n\r\nString concatenation is marginally faster, I suppose, but that should be negligible.","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<blockquote>\n  <p>Which one is more readable depends on how your head works. </p>\n</blockquote>\n\n<p>You got your answer right there. </p>\n\n<p>It's a matter of personal taste.</p>\n\n<p>String concatenation is marginally faster, I suppose, but that should be negligible.</p>\n"},{"tags":[],"owner":{"account_id":38309,"reputation":19501,"user_id":109880,"accept_rate":76,"display_name":"Fortega"},"comment_count":0,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1651614336,"creation_date":1243594879,"answer_id":925457,"question_id":925423,"body_markdown":"`String.format()` is more than just concatenating strings. For example, you can display numbers in a specific locale using `String.format()`.\r\n\r\nHowever, if you don&#39;t care about localisation, there is no functional difference.\r\nMaybe the concatenation is faster than the other but, in most cases, it will be negligible.","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<p><code>String.format()</code> is more than just concatenating strings. For example, you can display numbers in a specific locale using <code>String.format()</code>.</p>\n<p>However, if you don't care about localisation, there is no functional difference.\nMaybe the concatenation is faster than the other but, in most cases, it will be negligible.</p>\n"},{"tags":[],"owner":{"account_id":39617,"reputation":6179,"user_id":114340,"display_name":"AngerClown"},"comment_count":0,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1243608943,"creation_date":1243608943,"answer_id":926420,"question_id":925423,"body_markdown":"I haven&#39;t done any specific benchmarks, but I would think that concatenation may be faster. String.format() creates a new Formatter which, in turn, creates a new StringBuilder (with a size of only 16 chars). That&#39;s a fair amount of overhead especially if you are formatting a longer string and StringBuilder keeps having to resize.\r\n\r\nHowever, concatenation is less useful and harder to read. As always, it&#39;s worth doing a benchmark on your code to see which is better. The differences may be negligible in server app after your resource bundles, locales, etc are loaded in memory and the code is JITted.\r\n\r\nMaybe as a best practice, it would be a good idea to create your own Formatter with a properly sized StringBuilder (Appendable) and Locale and use that if you have a lot of formatting to do.","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<p>I haven't done any specific benchmarks, but I would think that concatenation may be faster. String.format() creates a new Formatter which, in turn, creates a new StringBuilder (with a size of only 16 chars). That's a fair amount of overhead especially if you are formatting a longer string and StringBuilder keeps having to resize.</p>\n\n<p>However, concatenation is less useful and harder to read. As always, it's worth doing a benchmark on your code to see which is better. The differences may be negligible in server app after your resource bundles, locales, etc are loaded in memory and the code is JITted.</p>\n\n<p>Maybe as a best practice, it would be a good idea to create your own Formatter with a properly sized StringBuilder (Appendable) and Locale and use that if you have a lot of formatting to do.</p>\n"},{"comments":[{"owner":{"account_id":183607,"reputation":33842,"user_id":419075,"accept_rate":96,"display_name":"Amir Raminfar"},"score":21,"creation_date":1313080661,"post_id":2087703,"comment_id":8398025,"body_markdown":"They are all bad practice. Use StringBuilder.","body":"They are all bad practice. Use StringBuilder."},{"owner":{"account_id":36667,"reputation":2637,"user_id":104653,"display_name":"Icaro"},"score":16,"creation_date":1325501217,"post_id":2087703,"comment_id":10823676,"body_markdown":"StringBuilder is out of scope here (the OP question was about comparing String.format over string Concatenation) but have you performace data about String Builder?","body":"StringBuilder is out of scope here (the OP question was about comparing String.format over string Concatenation) but have you performace data about String Builder?"},{"owner":{"account_id":435063,"reputation":4304,"user_id":821436,"accept_rate":79,"display_name":"Martin Schr&#246;der"},"score":148,"creation_date":1330008649,"post_id":2087703,"comment_id":11899978,"body_markdown":"@AmirRaminar: The compiler converts &quot;+&quot; to calls to StringBuilder automatically.","body":"@AmirRaminar: The compiler converts &quot;+&quot; to calls to StringBuilder automatically."},{"owner":{"account_id":64856,"reputation":29696,"user_id":191246,"accept_rate":77,"display_name":"ccpizza"},"score":53,"creation_date":1416563859,"post_id":2087703,"comment_id":42632065,"body_markdown":"@MartinSchr&#246;der: If you run `javap -c StringTest.class` you&#39;ll see that the compiler converts &quot;+&quot; to StringBuilder automatically *only* if you are not in a loop. If the concatenation is all done on a single line it&#39;s the same as using &#39;+&#39;, but if you use `myString += &quot;morechars&quot;;` or `myString += anotherString;` on multiple lines you&#39;ll notice that more than one StringBuilder might be created, so using &quot;+&quot; is not always as efficient as StringBuilder.","body":"@MartinSchr&#246;der: If you run <code>javap -c StringTest.class</code> you&#39;ll see that the compiler converts &quot;+&quot; to StringBuilder automatically <i>only</i> if you are not in a loop. If the concatenation is all done on a single line it&#39;s the same as using &#39;+&#39;, but if you use <code>myString += &quot;morechars&quot;;</code> or <code>myString += anotherString;</code> on multiple lines you&#39;ll notice that more than one StringBuilder might be created, so using &quot;+&quot; is not always as efficient as StringBuilder."},{"owner":{"account_id":1675086,"reputation":33930,"user_id":1540818,"accept_rate":82,"display_name":"Joffrey"},"score":1,"creation_date":1490006436,"post_id":2087703,"comment_id":72902480,"body_markdown":"@ccpizza I agree with all that follows your first statement. But your first statement is wrong: the compiler does *always* convert `+` to `StringBuilder`, even in loops. That&#39;s precisely what you said later on.","body":"@ccpizza I agree with all that follows your first statement. But your first statement is wrong: the compiler does <i>always</i> convert <code>+</code> to <code>StringBuilder</code>, even in loops. That&#39;s precisely what you said later on."},{"owner":{"account_id":64856,"reputation":29696,"user_id":191246,"accept_rate":77,"display_name":"ccpizza"},"score":7,"creation_date":1490006961,"post_id":2087703,"comment_id":72902824,"body_markdown":"@Joffrey: what I meant was that for loops `+` does not get converted to `StringBuilder.append()` but instead a `new StringBuilder()` happens on each iteration.","body":"@Joffrey: what I meant was that for loops <code>+</code> does not get converted to <code>StringBuilder.append()</code> but instead a <code>new StringBuilder()</code> happens on each iteration."},{"owner":{"account_id":1612962,"reputation":2478,"user_id":1491414,"accept_rate":56,"display_name":"Ganesa Vijayakumar"},"score":0,"creation_date":1559214712,"post_id":2087703,"comment_id":99354865,"body_markdown":"I think we can go with MessageFormat.format. Please see the answer https://stackoverflow.com/a/56377112/1491414 for more info.","body":"I think we can go with MessageFormat.format. Please see the answer <a href=\"https://stackoverflow.com/a/56377112/1491414\">stackoverflow.com/a/56377112/1491414</a> for more info."},{"owner":{"account_id":333131,"reputation":2273,"user_id":658826,"display_name":"virgo47"},"score":0,"creation_date":1559811510,"post_id":2087703,"comment_id":99538741,"body_markdown":"When comparing `String.format` with concatenation, then only on `StringBuilder` is used, there is no loop. For loops, definitely use explicit `StringBuilder`, but that&#39;s completely different use case than `String.format`-like work.","body":"When comparing <code>String.format</code> with concatenation, then only on <code>StringBuilder</code> is used, there is no loop. For loops, definitely use explicit <code>StringBuilder</code>, but that&#39;s completely different use case than <code>String.format</code>-like work."}],"tags":[],"owner":{"account_id":36667,"reputation":2637,"user_id":104653,"display_name":"Icaro"},"comment_count":8,"down_vote_count":1,"up_vote_count":242,"is_accepted":false,"score":241,"last_activity_date":1534980300,"creation_date":1263833886,"answer_id":2087703,"question_id":925423,"body_markdown":"About performance:\r\n\r\n    public static void main(String[] args) throws Exception {      \r\n      long start = System.currentTimeMillis();\r\n      for(int i = 0; i &lt; 1000000; i++){\r\n        String s = &quot;Hi &quot; + i + &quot;; Hi to you &quot; + i*2;\r\n      }\r\n      long end = System.currentTimeMillis();\r\n      System.out.println(&quot;Concatenation = &quot; + ((end - start)) + &quot; millisecond&quot;) ;\r\n    \r\n      start = System.currentTimeMillis();\r\n      for(int i = 0; i &lt; 1000000; i++){\r\n        String s = String.format(&quot;Hi %s; Hi to you %s&quot;,i, + i*2);\r\n      }\r\n      end = System.currentTimeMillis();\r\n      System.out.println(&quot;Format = &quot; + ((end - start)) + &quot; millisecond&quot;);\r\n    }\r\n\r\nThe timing results are as follows:\r\n\r\n - Concatenation = 265 millisecond\r\n - Format = 4141 millisecond\r\n\r\nTherefore, concatenation is much faster than String.format.\r\n","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<p>About performance:</p>\n\n<pre><code>public static void main(String[] args) throws Exception {      \n  long start = System.currentTimeMillis();\n  for(int i = 0; i &lt; 1000000; i++){\n    String s = \"Hi \" + i + \"; Hi to you \" + i*2;\n  }\n  long end = System.currentTimeMillis();\n  System.out.println(\"Concatenation = \" + ((end - start)) + \" millisecond\") ;\n\n  start = System.currentTimeMillis();\n  for(int i = 0; i &lt; 1000000; i++){\n    String s = String.format(\"Hi %s; Hi to you %s\",i, + i*2);\n  }\n  end = System.currentTimeMillis();\n  System.out.println(\"Format = \" + ((end - start)) + \" millisecond\");\n}\n</code></pre>\n\n<p>The timing results are as follows:</p>\n\n<ul>\n<li>Concatenation = 265 millisecond</li>\n<li>Format = 4141 millisecond</li>\n</ul>\n\n<p>Therefore, concatenation is much faster than String.format.</p>\n"},{"comments":[{"owner":{"account_id":36667,"reputation":2637,"user_id":104653,"display_name":"Icaro"},"score":3,"creation_date":1320861554,"post_id":7578413,"comment_id":9886802,"body_markdown":"have you tried your code? Concatenation is always ten time faster","body":"have you tried your code? Concatenation is always ten time faster"},{"owner":{"account_id":1361495,"reputation":568,"user_id":1298773,"accept_rate":40,"display_name":"Rohit Rehan"},"score":0,"creation_date":1520503932,"post_id":7578413,"comment_id":85346103,"body_markdown":"what about the millis taken to execute this &quot;System.currentTimeMillis()&quot; :P.","body":"what about the millis taken to execute this &quot;System.currentTimeMillis()&quot; :P."}],"tags":[],"owner":{"account_id":940135,"reputation":23,"user_id":968348,"display_name":"DotNetUser"},"comment_count":2,"down_vote_count":4,"up_vote_count":3,"is_accepted":false,"score":-1,"last_activity_date":1411965455,"creation_date":1317185086,"answer_id":7578413,"question_id":925423,"body_markdown":"You cannot compare String Concatenation and String.Format by the program above.\r\n\r\nYou may try this also be interchanging the position of using your String.Format and Concatenation in your code block like the below\r\n\r\n    public static void main(String[] args) throws Exception {      \r\n      long start = System.currentTimeMillis();\r\n\r\n      for( int i=0;i&lt;1000000; i++){\r\n        String s = String.format( &quot;Hi %s; Hi to you %s&quot;,i, + i*2);\r\n      }\r\n\r\n      long end = System.currentTimeMillis();\r\n      System.out.println(&quot;Format = &quot; + ((end - start)) + &quot; millisecond&quot;);\r\n      start = System.currentTimeMillis();\r\n    \r\n      for( int i=0;i&lt;1000000; i++){\r\n        String s = &quot;Hi &quot; + i + &quot;; Hi to you &quot; + i*2;\r\n      }\r\n\r\n      end = System.currentTimeMillis();\r\n      System.out.println(&quot;Concatenation = &quot; + ((end - start)) + &quot; millisecond&quot;) ;\r\n    }\r\n\r\nYou will be surprised to see that Format works faster here. This is since the intial objects created might not be released and there can be an issue with memory allocation and thereby the performance.\r\n","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<p>You cannot compare String Concatenation and String.Format by the program above.</p>\n\n<p>You may try this also be interchanging the position of using your String.Format and Concatenation in your code block like the below</p>\n\n<pre><code>public static void main(String[] args) throws Exception {      \n  long start = System.currentTimeMillis();\n\n  for( int i=0;i&lt;1000000; i++){\n    String s = String.format( \"Hi %s; Hi to you %s\",i, + i*2);\n  }\n\n  long end = System.currentTimeMillis();\n  System.out.println(\"Format = \" + ((end - start)) + \" millisecond\");\n  start = System.currentTimeMillis();\n\n  for( int i=0;i&lt;1000000; i++){\n    String s = \"Hi \" + i + \"; Hi to you \" + i*2;\n  }\n\n  end = System.currentTimeMillis();\n  System.out.println(\"Concatenation = \" + ((end - start)) + \" millisecond\") ;\n}\n</code></pre>\n\n<p>You will be surprised to see that Format works faster here. This is since the intial objects created might not be released and there can be an issue with memory allocation and thereby the performance.</p>\n"},{"tags":[],"owner":{"account_id":953817,"reputation":493,"user_id":979478,"display_name":"Pawel Zieminski"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1352535595,"creation_date":1317772716,"answer_id":7655335,"question_id":925423,"body_markdown":"There could be a perceptible difference. \r\n\r\n`String.format` is quite complex and uses a regular expression underneath, so don&#39;t make it a habit to use it everywhere, but only where you need it. \r\n\r\n`StringBuilder` would be an order of magnitude faster (as someone here already pointed out).","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<p>There could be a perceptible difference. </p>\n\n<p><code>String.format</code> is quite complex and uses a regular expression underneath, so don't make it a habit to use it everywhere, but only where you need it. </p>\n\n<p><code>StringBuilder</code> would be an order of magnitude faster (as someone here already pointed out).</p>\n"},{"comments":[{"owner":{"account_id":1401537,"reputation":8371,"user_id":1787206,"accept_rate":80,"display_name":"Jamey Sharp"},"score":28,"creation_date":1351650832,"post_id":8827854,"comment_id":17889553,"body_markdown":"The StringBuilder test doesn&#39;t call toString(), so it isn&#39;t a fair comparison. I suspect you&#39;ll find it&#39;s within measurement error of the performance of concatenation if you fix that bug.","body":"The StringBuilder test doesn&#39;t call toString(), so it isn&#39;t a fair comparison. I suspect you&#39;ll find it&#39;s within measurement error of the performance of concatenation if you fix that bug."},{"owner":{"account_id":1165974,"reputation":4349,"user_id":1144275,"display_name":"TechTrip"},"score":0,"creation_date":1384454867,"post_id":8827854,"comment_id":29753738,"body_markdown":"Hi Jamey, I&#39;m afraid I&#39;m not following you here, can you please elaborate? I don&#39;t think any of the tests explicitly call toString() so I&#39;m not sure why I should add that for comparions sake; I think I am missing something here. - Trip","body":"Hi Jamey, I&#39;m afraid I&#39;m not following you here, can you please elaborate? I don&#39;t think any of the tests explicitly call toString() so I&#39;m not sure why I should add that for comparions sake; I think I am missing something here. - Trip"},{"owner":{"account_id":1401537,"reputation":8371,"user_id":1787206,"accept_rate":80,"display_name":"Jamey Sharp"},"score":18,"creation_date":1385002059,"post_id":8827854,"comment_id":29968393,"body_markdown":"In the concatenation and format tests, you asked for a `String`. The StringBuilder test, to be fair, needs a final step that turns the StringBuilder&#39;s contents into a String. You do that by calling `bldString.toString()`. I hope that explains it?","body":"In the concatenation and format tests, you asked for a <code>String</code>. The StringBuilder test, to be fair, needs a final step that turns the StringBuilder&#39;s contents into a String. You do that by calling <code>bldString.toString()</code>. I hope that explains it?"},{"owner":{"account_id":209914,"reputation":12741,"user_id":461237,"display_name":"Akos Cz"},"score":4,"creation_date":1386101906,"post_id":8827854,"comment_id":30395857,"body_markdown":"Jamey Sharp is exactly right.  Invoking bldString.toString() is about the same if not slower than string concatenation.","body":"Jamey Sharp is exactly right.  Invoking bldString.toString() is about the same if not slower than string concatenation."},{"owner":{"account_id":336865,"reputation":714,"user_id":664776,"display_name":"MrCeeJ"},"score":0,"creation_date":1396342110,"post_id":8827854,"comment_id":34733127,"body_markdown":"It is still pretty fast (see below for test with .toString() added, and this is only for 3 concatenations. I am pretty sure that for 4 or more the string builder would be considerably faster, after all that is what it was designed for :)","body":"It is still pretty fast (see below for test with .toString() added, and this is only for 3 concatenations. I am pretty sure that for 4 or more the string builder would be considerably faster, after all that is what it was designed for :)"},{"owner":{"account_id":1165974,"reputation":4349,"user_id":1144275,"display_name":"TechTrip"},"score":3,"creation_date":1396395838,"post_id":8827854,"comment_id":34765985,"body_markdown":"`String s = bldString.toString();`\n\nThe timings were with concatenation and stringbuilder almost on par with each other:\n\n`Format = 1520 millisecond` , `Concatenation = 167 millisecond`, `String Builder = 173 millisecond`\n\nI ran them in a loop and averaged each out to get a good rep: (pre-jvm optimization, will try a 10000+ loop when I get time)","body":"<code>String s = bldString.toString();</code>  The timings were with concatenation and stringbuilder almost on par with each other:  <code>Format = 1520 millisecond</code> , <code>Concatenation = 167 millisecond</code>, <code>String Builder = 173 millisecond</code>  I ran them in a loop and averaged each out to get a good rep: (pre-jvm optimization, will try a 10000+ loop when I get time)"},{"owner":{"account_id":1165974,"reputation":4349,"user_id":1144275,"display_name":"TechTrip"},"score":0,"creation_date":1396396477,"post_id":8827854,"comment_id":34766225,"body_markdown":"I added the assignment of the toString() at the bottom of the loop.","body":"I added the assignment of the toString() at the bottom of the loop."},{"owner":{"account_id":1675086,"reputation":33930,"user_id":1540818,"accept_rate":82,"display_name":"Joffrey"},"score":0,"creation_date":1490006760,"post_id":8827854,"comment_id":72902684,"body_markdown":"@MrCeeJ I suggest you read the byte code of the `StringBuilder` and `+` version. You&#39;ll realize your mistake: they produce the same bytecode. `+` concatenations are converted to `StringBuilder` concatenations by the compiler. So there can&#39;t be any performance difference, since the JVM is literally executing the same thing. The only difference you will find is when you reuse the same StringBuilder manually in multiple concatenations (e.g. using 1 StringBuilder for a loop containing a concatenation, instead of `+=`), but that is not the case in this benchmark.","body":"@MrCeeJ I suggest you read the byte code of the <code>StringBuilder</code> and <code>+</code> version. You&#39;ll realize your mistake: they produce the same bytecode. <code>+</code> concatenations are converted to <code>StringBuilder</code> concatenations by the compiler. So there can&#39;t be any performance difference, since the JVM is literally executing the same thing. The only difference you will find is when you reuse the same StringBuilder manually in multiple concatenations (e.g. using 1 StringBuilder for a loop containing a concatenation, instead of <code>+=</code>), but that is not the case in this benchmark."},{"owner":{"account_id":1675086,"reputation":33930,"user_id":1540818,"accept_rate":82,"display_name":"Joffrey"},"score":0,"creation_date":1490006974,"post_id":8827854,"comment_id":72902832,"body_markdown":"That being said, `+` could in fact *become* faster in the future. If the Java language provides a new way of concatenating that is faster than `StringBuilder`, then the compilers could be updated to convert `+` differently and improve its performance, while any code using `StringBuilder` directly won&#39;t benefit from it. This is precisely what happened when `StringBuilder` appeared and replaced the slower `StringBuffer`.","body":"That being said, <code>+</code> could in fact <i>become</i> faster in the future. If the Java language provides a new way of concatenating that is faster than <code>StringBuilder</code>, then the compilers could be updated to convert <code>+</code> differently and improve its performance, while any code using <code>StringBuilder</code> directly won&#39;t benefit from it. This is precisely what happened when <code>StringBuilder</code> appeared and replaced the slower <code>StringBuffer</code>."},{"owner":{"account_id":336865,"reputation":714,"user_id":664776,"display_name":"MrCeeJ"},"score":0,"creation_date":1492684223,"post_id":8827854,"comment_id":74086896,"body_markdown":"@Joffrey Thanks, I didn&#39;t realise they were now effectively the same, very interesting :)","body":"@Joffrey Thanks, I didn&#39;t realise they were now effectively the same, very interesting :)"},{"owner":{"account_id":4788875,"reputation":1284,"user_id":3868605,"accept_rate":62,"display_name":"alobodzk"},"score":8,"creation_date":1494851111,"post_id":8827854,"comment_id":74987941,"body_markdown":"How do you guys even know wether the code is executed at all? The variables are never read or used, you can&#39;t be sure that JIT doesn&#39;t remove this code in a first place.","body":"How do you guys even know wether the code is executed at all? The variables are never read or used, you can&#39;t be sure that JIT doesn&#39;t remove this code in a first place."}],"tags":[],"owner":{"account_id":1165974,"reputation":4349,"user_id":1144275,"display_name":"TechTrip"},"comment_count":11,"down_vote_count":2,"up_vote_count":49,"is_accepted":false,"score":47,"last_activity_date":1326322022,"creation_date":1326322022,"answer_id":8827854,"question_id":925423,"body_markdown":"Since there is discussion about performance I figured I&#39;d add in a comparison that included StringBuilder. It is in fact faster than the concat and, naturally the String.format option. \r\n\r\nTo make this a sort of apples to apples comparison I instantiate a new StringBuilder in the loop rather than outside (this is actually faster than doing just one instantiation most likely due to the overhead of re-allocating space for the looping append at the end of one builder).\r\n\r\n\t\tString formatString = &quot;Hi %s; Hi to you %s&quot;;\r\n\r\n\t\tlong start = System.currentTimeMillis();\r\n\t\tfor (int i = 0; i &lt; 1000000; i++) {\r\n\t\t\tString s = String.format(formatString, i, +i * 2);\r\n\t\t}\r\n\r\n\t\tlong end = System.currentTimeMillis();\r\n\t\tlog.info(&quot;Format = &quot; + ((end - start)) + &quot; millisecond&quot;);\r\n\r\n\t\tstart = System.currentTimeMillis();\r\n\r\n\t\tfor (int i = 0; i &lt; 1000000; i++) {\r\n\t\t\tString s = &quot;Hi &quot; + i + &quot;; Hi to you &quot; + i * 2;\r\n\t\t}\r\n\r\n\t\tend = System.currentTimeMillis();\r\n\r\n\t\tlog.info(&quot;Concatenation = &quot; + ((end - start)) + &quot; millisecond&quot;);\r\n\r\n\t\tstart = System.currentTimeMillis();\r\n\r\n\t\tfor (int i = 0; i &lt; 1000000; i++) {\r\n\t\t\tStringBuilder bldString = new StringBuilder(&quot;Hi &quot;);\r\n\t\t\tbldString.append(i).append(&quot;; Hi to you &quot;).append(i * 2);\r\n\t\t}\r\n\r\n\t\tend = System.currentTimeMillis();\r\n\r\n\t\tlog.info(&quot;String Builder = &quot; + ((end - start)) + &quot; millisecond&quot;);\r\n\r\n - 2012-01-11 16:30:46,058 INFO [TestMain] - Format = 1416 millisecond\r\n - 2012-01-11 16:30:46,190 INFO [TestMain] - Concatenation = 134 millisecond\r\n - 2012-01-11 16:30:46,313 INFO [TestMain] - String Builder = 117 millisecond\r\n","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<p>Since there is discussion about performance I figured I'd add in a comparison that included StringBuilder. It is in fact faster than the concat and, naturally the String.format option. </p>\n\n<p>To make this a sort of apples to apples comparison I instantiate a new StringBuilder in the loop rather than outside (this is actually faster than doing just one instantiation most likely due to the overhead of re-allocating space for the looping append at the end of one builder).</p>\n\n<pre><code>    String formatString = \"Hi %s; Hi to you %s\";\n\n    long start = System.currentTimeMillis();\n    for (int i = 0; i &lt; 1000000; i++) {\n        String s = String.format(formatString, i, +i * 2);\n    }\n\n    long end = System.currentTimeMillis();\n    log.info(\"Format = \" + ((end - start)) + \" millisecond\");\n\n    start = System.currentTimeMillis();\n\n    for (int i = 0; i &lt; 1000000; i++) {\n        String s = \"Hi \" + i + \"; Hi to you \" + i * 2;\n    }\n\n    end = System.currentTimeMillis();\n\n    log.info(\"Concatenation = \" + ((end - start)) + \" millisecond\");\n\n    start = System.currentTimeMillis();\n\n    for (int i = 0; i &lt; 1000000; i++) {\n        StringBuilder bldString = new StringBuilder(\"Hi \");\n        bldString.append(i).append(\"; Hi to you \").append(i * 2);\n    }\n\n    end = System.currentTimeMillis();\n\n    log.info(\"String Builder = \" + ((end - start)) + \" millisecond\");\n</code></pre>\n\n<ul>\n<li>2012-01-11 16:30:46,058 INFO [TestMain] - Format = 1416 millisecond</li>\n<li>2012-01-11 16:30:46,190 INFO [TestMain] - Concatenation = 134 millisecond</li>\n<li>2012-01-11 16:30:46,313 INFO [TestMain] - String Builder = 117 millisecond</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":9583,"reputation":9226,"user_id":17772,"accept_rate":82,"display_name":"Ron Klein"},"score":28,"creation_date":1429188112,"post_id":9415430,"comment_id":47487670,"body_markdown":"just for the record, modern IDEs (e.g. IntelliJ) assist in arguments count and type matching","body":"just for the record, modern IDEs (e.g. IntelliJ) assist in arguments count and type matching"},{"owner":{"account_id":332245,"reputation":16487,"user_id":657427,"accept_rate":67,"display_name":"Christophe Roussy"},"score":3,"creation_date":1471510992,"post_id":9415430,"comment_id":65378742,"body_markdown":"Good point about  compilation, I recommend you do these checks via FindBugs (which can run in the IDE or via Maven during the build), note that this will also check formatting in all of your logging ! This works regardless of the users IDE","body":"Good point about  compilation, I recommend you do these checks via FindBugs (which can run in the IDE or via Maven during the build), note that this will also check formatting in all of your logging ! This works regardless of the users IDE"}],"tags":[],"owner":{"account_id":435063,"reputation":4304,"user_id":821436,"accept_rate":79,"display_name":"Martin Schr&#246;der"},"comment_count":2,"down_vote_count":0,"up_vote_count":61,"is_accepted":false,"score":61,"last_activity_date":1583776964,"creation_date":1330008990,"answer_id":9415430,"question_id":925423,"body_markdown":"One problem with `.format` is that you lose static type safety. You can have too few arguments for your format, and you can have the wrong types for the format specifiers - both leading to an `IllegalFormatException` *at runtime*, so you might end up with logging code that breaks production.\r\n\r\nIn contrast, the arguments to `+` can be tested by the compiler.\r\n\r\nThe [security history][1] of [tag:printf] (on which the `format` function is modeled) is long and frightening.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Printf_format_string#Vulnerabilities","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<p>One problem with <code>.format</code> is that you lose static type safety. You can have too few arguments for your format, and you can have the wrong types for the format specifiers - both leading to an <code>IllegalFormatException</code> <em>at runtime</em>, so you might end up with logging code that breaks production.</p>\n\n<p>In contrast, the arguments to <code>+</code> can be tested by the compiler.</p>\n\n<p>The <a href=\"https://en.wikipedia.org/wiki/Printf_format_string#Vulnerabilities\" rel=\"noreferrer\">security history</a> of <a href=\"/questions/tagged/printf\" class=\"post-tag\" title=\"show questions tagged &#39;printf&#39;\" rel=\"tag\">printf</a> (on which the <code>format</code> function is modeled) is long and frightening.</p>\n"},{"tags":[],"owner":{"account_id":209914,"reputation":12741,"user_id":461237,"display_name":"Akos Cz"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1386106173,"creation_date":1386106173,"answer_id":20362065,"question_id":925423,"body_markdown":"Here&#39;s the same test as above with the modification of calling the ***toString()*** method on the *StringBuilder*.  The results below show that the StringBuilder approach is just a bit slower than String concatenation using the **+** operator.\r\n\r\n***file: StringTest.java***\r\n\r\n    class StringTest {\r\n    \r\n      public static void main(String[] args) {\r\n       \r\n        String formatString = &quot;Hi %s; Hi to you %s&quot;;\r\n    \r\n        long start = System.currentTimeMillis();\r\n        for (int i = 0; i &lt; 1000000; i++) {\r\n            String s = String.format(formatString, i, +i * 2);\r\n        }\r\n    \r\n        long end = System.currentTimeMillis();\r\n        System.out.println(&quot;Format = &quot; + ((end - start)) + &quot; millisecond&quot;);\r\n    \r\n        start = System.currentTimeMillis();\r\n    \r\n        for (int i = 0; i &lt; 1000000; i++) {\r\n            String s = &quot;Hi &quot; + i + &quot;; Hi to you &quot; + i * 2;\r\n        }\r\n    \r\n        end = System.currentTimeMillis();\r\n    \r\n        System.out.println(&quot;Concatenation = &quot; + ((end - start)) + &quot; millisecond&quot;);\r\n    \r\n        start = System.currentTimeMillis();\r\n    \r\n        for (int i = 0; i &lt; 1000000; i++) {\r\n            StringBuilder bldString = new StringBuilder(&quot;Hi &quot;);\r\n            bldString.append(i).append(&quot;Hi to you &quot;).append(i * 2).toString();\r\n        }\r\n    \r\n        end = System.currentTimeMillis();\r\n    \r\n        System.out.println(&quot;String Builder = &quot; + ((end - start)) + &quot; millisecond&quot;);\r\n    \r\n      }\r\n    }\r\n\r\n\r\n\r\n***Shell Commands : (compile and run StringTest 5 times)***\r\n\r\n    &gt; javac StringTest.java\r\n    &gt; sh -c &quot;for i in \\$(seq 1 5); do echo \\&quot;Run \\${i}\\&quot;; java StringTest; done&quot;\r\n\r\n***Results :***\r\n\r\n    Run 1\r\n    Format = 1290 millisecond\r\n    Concatenation = 115 millisecond\r\n    String Builder = 130 millisecond\r\n\r\n    Run 2\r\n    Format = 1265 millisecond\r\n    Concatenation = 114 millisecond\r\n    String Builder = 126 millisecond\r\n\r\n    Run 3\r\n    Format = 1303 millisecond\r\n    Concatenation = 114 millisecond\r\n    String Builder = 127 millisecond\r\n\r\n    Run 4\r\n    Format = 1297 millisecond\r\n    Concatenation = 114 millisecond\r\n    String Builder = 127 millisecond\r\n\r\n    Run 5\r\n    Format = 1270 millisecond\r\n    Concatenation = 114 millisecond\r\n    String Builder = 126 millisecond","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<p>Here's the same test as above with the modification of calling the <strong><em>toString()</em></strong> method on the <em>StringBuilder</em>.  The results below show that the StringBuilder approach is just a bit slower than String concatenation using the <strong>+</strong> operator.</p>\n\n<p><em><strong>file: StringTest.java</em></strong></p>\n\n<pre><code>class StringTest {\n\n  public static void main(String[] args) {\n\n    String formatString = \"Hi %s; Hi to you %s\";\n\n    long start = System.currentTimeMillis();\n    for (int i = 0; i &lt; 1000000; i++) {\n        String s = String.format(formatString, i, +i * 2);\n    }\n\n    long end = System.currentTimeMillis();\n    System.out.println(\"Format = \" + ((end - start)) + \" millisecond\");\n\n    start = System.currentTimeMillis();\n\n    for (int i = 0; i &lt; 1000000; i++) {\n        String s = \"Hi \" + i + \"; Hi to you \" + i * 2;\n    }\n\n    end = System.currentTimeMillis();\n\n    System.out.println(\"Concatenation = \" + ((end - start)) + \" millisecond\");\n\n    start = System.currentTimeMillis();\n\n    for (int i = 0; i &lt; 1000000; i++) {\n        StringBuilder bldString = new StringBuilder(\"Hi \");\n        bldString.append(i).append(\"Hi to you \").append(i * 2).toString();\n    }\n\n    end = System.currentTimeMillis();\n\n    System.out.println(\"String Builder = \" + ((end - start)) + \" millisecond\");\n\n  }\n}\n</code></pre>\n\n<p><em><strong>Shell Commands : (compile and run StringTest 5 times)</em></strong></p>\n\n<pre><code>&gt; javac StringTest.java\n&gt; sh -c \"for i in \\$(seq 1 5); do echo \\\"Run \\${i}\\\"; java StringTest; done\"\n</code></pre>\n\n<p><em><strong>Results :</em></strong></p>\n\n<pre><code>Run 1\nFormat = 1290 millisecond\nConcatenation = 115 millisecond\nString Builder = 130 millisecond\n\nRun 2\nFormat = 1265 millisecond\nConcatenation = 114 millisecond\nString Builder = 126 millisecond\n\nRun 3\nFormat = 1303 millisecond\nConcatenation = 114 millisecond\nString Builder = 127 millisecond\n\nRun 4\nFormat = 1297 millisecond\nConcatenation = 114 millisecond\nString Builder = 127 millisecond\n\nRun 5\nFormat = 1270 millisecond\nConcatenation = 114 millisecond\nString Builder = 126 millisecond\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6623376,"reputation":694,"user_id":5114322,"display_name":"Carlos Hoyos"},"score":2,"creation_date":1481645387,"post_id":26502023,"comment_id":69454989,"body_markdown":"StringBuilder is absolutely the fastest method when you are appending characters in a loop, for example, when you want to create a string with one thousand 1&#39;s by adding them one by one. Here is more info: http://www.pellegrino.link/2015/08/22/string-concatenation-with-java-8.html","body":"StringBuilder is absolutely the fastest method when you are appending characters in a loop, for example, when you want to create a string with one thousand 1&#39;s by adding them one by one. Here is more info: <a href=\"http://www.pellegrino.link/2015/08/22/string-concatenation-with-java-8.html\" rel=\"nofollow noreferrer\">pellegrino.link/2015/08/22/&hellip;</a>"},{"owner":{"account_id":195680,"reputation":2749,"user_id":438727,"accept_rate":89,"display_name":"mohamnag"},"score":0,"creation_date":1537521882,"post_id":26502023,"comment_id":91823898,"body_markdown":"I like it how you always use String.format for output :D so there is an advantage. and to be honest if we are not talking about millions of itterations, I prefer string.format for readability as your code shows the obvious advantage!","body":"I like it how you always use String.format for output :D so there is an advantage. and to be honest if we are not talking about millions of itterations, I prefer string.format for readability as your code shows the obvious advantage!"}],"tags":[],"owner":{"account_id":3135278,"reputation":2495,"user_id":2651894,"accept_rate":17,"display_name":"Derek Ziemba"},"comment_count":2,"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1413961601,"creation_date":1413961601,"answer_id":26502023,"question_id":925423,"body_markdown":"Here&#39;s a test with multiple sample sizes in milliseconds.  \r\n\r\n    public class Time {\r\n\t\r\n\tpublic static String sysFile = &quot;/sys/class/camera/rear/rear_flash&quot;;\r\n\tpublic static String cmdString = &quot;echo %s &gt; &quot; + sysFile;\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t  int i = 1;\r\n\t  for(int run=1; run &lt;= 12; run++){\r\n\t\t  for(int test =1; test &lt;= 2 ; test++){\r\n\t\t\tSystem.out.println(\r\n\t\t\t\t\tString.format(&quot;\\nTEST: %s, RUN: %s, Iterations: %s&quot;,run,test,i));\r\n\t\t    test(run, i);\r\n\t\t  }\r\n\t\t  System.out.println(&quot;\\n____________________________&quot;);\r\n\t\t  i = i*3;\r\n\t  }\r\n\t}\r\n\t\t\r\n\tpublic static void test(int run, int iterations){\r\n\t\t  \r\n\t\t  long start = System.nanoTime();\r\n\t\t  for( int i=0;i&lt;iterations; i++){\r\n\t\t      String s = &quot;echo &quot; + i + &quot; &gt; &quot;+ sysFile;\r\n\t\t  }\r\n\t\t  long t = System.nanoTime() - start;\t\r\n\t\t  String r = String.format(&quot;  %-13s =%10d %s&quot;, &quot;Concatenation&quot;,t,&quot;nanosecond&quot;);\r\n\t\t  System.out.println(r) ;\r\n\r\n\t\t  \r\n\t\t start = System.nanoTime();\t\t  \r\n\t\t for( int i=0;i&lt;iterations; i++){\r\n\t\t     String s =  String.format(cmdString, i);\r\n\t\t }\r\n\t\t t = System.nanoTime() - start;\t\r\n\t\t r = String.format(&quot;  %-13s =%10d %s&quot;, &quot;Format&quot;,t,&quot;nanosecond&quot;);\r\n\t\t System.out.println(r);\r\n\t\t\t\t\t\t\t  \r\n\t\t  start = System.nanoTime();\t\t  \r\n\t\t  for( int i=0;i&lt;iterations; i++){\r\n\t\t\t  StringBuilder b = new StringBuilder(&quot;echo &quot;);\r\n\t\t\t  b.append(i).append(&quot; &gt; &quot;).append(sysFile);\r\n\t\t      String s = b.toString();\r\n\t\t  }\r\n\t\t t = System.nanoTime() - start;\t\r\n\t\t r = String.format(&quot;  %-13s =%10d %s&quot;, &quot;StringBuilder&quot;,t,&quot;nanosecond&quot;);\r\n\t\t System.out.println(r);\r\n\t}\r\n}\r\n\r\n\r\n\r\n    TEST: 1, RUN: 1, Iterations: 1\r\n      Concatenation =     14911 nanosecond\r\n      Format        =     45026 nanosecond\r\n      StringBuilder =      3509 nanosecond\r\n    \r\n    TEST: 1, RUN: 2, Iterations: 1\r\n      Concatenation =      3509 nanosecond\r\n      Format        =     38594 nanosecond\r\n      StringBuilder =      3509 nanosecond\r\n    \r\n    ____________________________\r\n    \r\n    TEST: 2, RUN: 1, Iterations: 3\r\n      Concatenation =      8479 nanosecond\r\n      Format        =     94438 nanosecond\r\n      StringBuilder =      5263 nanosecond\r\n    \r\n    TEST: 2, RUN: 2, Iterations: 3\r\n      Concatenation =      4970 nanosecond\r\n      Format        =     92976 nanosecond\r\n      StringBuilder =      5848 nanosecond\r\n    \r\n    ____________________________\r\n    \r\n    TEST: 3, RUN: 1, Iterations: 9\r\n      Concatenation =     11403 nanosecond\r\n      Format        =    287115 nanosecond\r\n      StringBuilder =     14326 nanosecond\r\n    \r\n    TEST: 3, RUN: 2, Iterations: 9\r\n      Concatenation =     12280 nanosecond\r\n      Format        =    209051 nanosecond\r\n      StringBuilder =     11818 nanosecond\r\n    \r\n    ____________________________\r\n    \r\n    TEST: 5, RUN: 1, Iterations: 81\r\n      Concatenation =     54383 nanosecond\r\n      Format        =   1503113 nanosecond\r\n      StringBuilder =     40056 nanosecond\r\n    \r\n    TEST: 5, RUN: 2, Iterations: 81\r\n      Concatenation =     44149 nanosecond\r\n      Format        =   1264241 nanosecond\r\n      StringBuilder =     34208 nanosecond\r\n    \r\n    ____________________________\r\n    \r\n    TEST: 6, RUN: 1, Iterations: 243\r\n      Concatenation =     76018 nanosecond\r\n      Format        =   3210891 nanosecond\r\n      StringBuilder =     76603 nanosecond\r\n    \r\n    TEST: 6, RUN: 2, Iterations: 243\r\n      Concatenation =     91222 nanosecond\r\n      Format        =   2716773 nanosecond\r\n      StringBuilder =     73972 nanosecond\r\n    \r\n    ____________________________\r\n    \r\n    TEST: 8, RUN: 1, Iterations: 2187\r\n      Concatenation =    527450 nanosecond\r\n      Format        =  10291108 nanosecond\r\n      StringBuilder =    885027 nanosecond\r\n    \r\n    TEST: 8, RUN: 2, Iterations: 2187\r\n      Concatenation =    526865 nanosecond\r\n      Format        =   6294307 nanosecond\r\n      StringBuilder =    591773 nanosecond\r\n    \r\n    ____________________________\r\n    \r\n    TEST: 10, RUN: 1, Iterations: 19683\r\n      Concatenation =   4592961 nanosecond\r\n      Format        =  60114307 nanosecond\r\n      StringBuilder =   2129387 nanosecond\r\n    \r\n    TEST: 10, RUN: 2, Iterations: 19683\r\n      Concatenation =   1850166 nanosecond\r\n      Format        =  35940524 nanosecond\r\n      StringBuilder =   1885544 nanosecond\r\n      \r\n      ____________________________\r\n    \r\n    TEST: 12, RUN: 1, Iterations: 177147\r\n      Concatenation =  26847286 nanosecond\r\n      Format        = 126332877 nanosecond\r\n      StringBuilder =  17578914 nanosecond\r\n    \r\n    TEST: 12, RUN: 2, Iterations: 177147\r\n      Concatenation =  24405056 nanosecond\r\n      Format        = 129707207 nanosecond\r\n      StringBuilder =  12253840 nanosecond","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<p>Here's a test with multiple sample sizes in milliseconds.  </p>\n\n<pre><code>public class Time {\n\npublic static String sysFile = \"/sys/class/camera/rear/rear_flash\";\npublic static String cmdString = \"echo %s &gt; \" + sysFile;\n\npublic static void main(String[] args) {\n\n  int i = 1;\n  for(int run=1; run &lt;= 12; run++){\n      for(int test =1; test &lt;= 2 ; test++){\n        System.out.println(\n                String.format(\"\\nTEST: %s, RUN: %s, Iterations: %s\",run,test,i));\n        test(run, i);\n      }\n      System.out.println(\"\\n____________________________\");\n      i = i*3;\n  }\n}\n\npublic static void test(int run, int iterations){\n\n      long start = System.nanoTime();\n      for( int i=0;i&lt;iterations; i++){\n          String s = \"echo \" + i + \" &gt; \"+ sysFile;\n      }\n      long t = System.nanoTime() - start;   \n      String r = String.format(\"  %-13s =%10d %s\", \"Concatenation\",t,\"nanosecond\");\n      System.out.println(r) ;\n\n\n     start = System.nanoTime();       \n     for( int i=0;i&lt;iterations; i++){\n         String s =  String.format(cmdString, i);\n     }\n     t = System.nanoTime() - start; \n     r = String.format(\"  %-13s =%10d %s\", \"Format\",t,\"nanosecond\");\n     System.out.println(r);\n\n      start = System.nanoTime();          \n      for( int i=0;i&lt;iterations; i++){\n          StringBuilder b = new StringBuilder(\"echo \");\n          b.append(i).append(\" &gt; \").append(sysFile);\n          String s = b.toString();\n      }\n     t = System.nanoTime() - start; \n     r = String.format(\"  %-13s =%10d %s\", \"StringBuilder\",t,\"nanosecond\");\n     System.out.println(r);\n}\n</code></pre>\n\n<p>}</p>\n\n<pre><code>TEST: 1, RUN: 1, Iterations: 1\n  Concatenation =     14911 nanosecond\n  Format        =     45026 nanosecond\n  StringBuilder =      3509 nanosecond\n\nTEST: 1, RUN: 2, Iterations: 1\n  Concatenation =      3509 nanosecond\n  Format        =     38594 nanosecond\n  StringBuilder =      3509 nanosecond\n\n____________________________\n\nTEST: 2, RUN: 1, Iterations: 3\n  Concatenation =      8479 nanosecond\n  Format        =     94438 nanosecond\n  StringBuilder =      5263 nanosecond\n\nTEST: 2, RUN: 2, Iterations: 3\n  Concatenation =      4970 nanosecond\n  Format        =     92976 nanosecond\n  StringBuilder =      5848 nanosecond\n\n____________________________\n\nTEST: 3, RUN: 1, Iterations: 9\n  Concatenation =     11403 nanosecond\n  Format        =    287115 nanosecond\n  StringBuilder =     14326 nanosecond\n\nTEST: 3, RUN: 2, Iterations: 9\n  Concatenation =     12280 nanosecond\n  Format        =    209051 nanosecond\n  StringBuilder =     11818 nanosecond\n\n____________________________\n\nTEST: 5, RUN: 1, Iterations: 81\n  Concatenation =     54383 nanosecond\n  Format        =   1503113 nanosecond\n  StringBuilder =     40056 nanosecond\n\nTEST: 5, RUN: 2, Iterations: 81\n  Concatenation =     44149 nanosecond\n  Format        =   1264241 nanosecond\n  StringBuilder =     34208 nanosecond\n\n____________________________\n\nTEST: 6, RUN: 1, Iterations: 243\n  Concatenation =     76018 nanosecond\n  Format        =   3210891 nanosecond\n  StringBuilder =     76603 nanosecond\n\nTEST: 6, RUN: 2, Iterations: 243\n  Concatenation =     91222 nanosecond\n  Format        =   2716773 nanosecond\n  StringBuilder =     73972 nanosecond\n\n____________________________\n\nTEST: 8, RUN: 1, Iterations: 2187\n  Concatenation =    527450 nanosecond\n  Format        =  10291108 nanosecond\n  StringBuilder =    885027 nanosecond\n\nTEST: 8, RUN: 2, Iterations: 2187\n  Concatenation =    526865 nanosecond\n  Format        =   6294307 nanosecond\n  StringBuilder =    591773 nanosecond\n\n____________________________\n\nTEST: 10, RUN: 1, Iterations: 19683\n  Concatenation =   4592961 nanosecond\n  Format        =  60114307 nanosecond\n  StringBuilder =   2129387 nanosecond\n\nTEST: 10, RUN: 2, Iterations: 19683\n  Concatenation =   1850166 nanosecond\n  Format        =  35940524 nanosecond\n  StringBuilder =   1885544 nanosecond\n\n  ____________________________\n\nTEST: 12, RUN: 1, Iterations: 177147\n  Concatenation =  26847286 nanosecond\n  Format        = 126332877 nanosecond\n  StringBuilder =  17578914 nanosecond\n\nTEST: 12, RUN: 2, Iterations: 177147\n  Concatenation =  24405056 nanosecond\n  Format        = 129707207 nanosecond\n  StringBuilder =  12253840 nanosecond\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2443149,"reputation":750,"user_id":3623290,"accept_rate":100,"display_name":"Stephane Bersier"},"comment_count":0,"down_vote_count":3,"up_vote_count":9,"is_accepted":false,"score":6,"last_activity_date":1451742072,"creation_date":1451742072,"answer_id":34566522,"question_id":925423,"body_markdown":"Generally, string concatenation should be prefered over `String.format`. The latter has two main disadvantages:\r\n\r\n 1. It does not encode the string to be built in a local manner.\r\n 2. The building process is encoded in a string.\r\n\r\nBy point 1, I mean that it is not possible to understand what a `String.format()` call is doing in a single sequential pass. One is forced to go back and forth between the format string and the arguments, while counting the position of the arguments. For short concatenations, this is not much of an issue. In these cases however, string concatenation is less verbose.\r\n\r\nBy point 2, I mean that the important part of the building process is encoded in the *format string* (using a DSL). Using strings to represent code has many disadvantages. It is not inherently type-safe, and complicates syntax-highlighting, code analysis, optimization, etc.\r\n\r\nOf course, when using tools or frameworks external to the Java language, new factors can come into play.","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<p>Generally, string concatenation should be prefered over <code>String.format</code>. The latter has two main disadvantages:</p>\n\n<ol>\n<li>It does not encode the string to be built in a local manner.</li>\n<li>The building process is encoded in a string.</li>\n</ol>\n\n<p>By point 1, I mean that it is not possible to understand what a <code>String.format()</code> call is doing in a single sequential pass. One is forced to go back and forth between the format string and the arguments, while counting the position of the arguments. For short concatenations, this is not much of an issue. In these cases however, string concatenation is less verbose.</p>\n\n<p>By point 2, I mean that the important part of the building process is encoded in the <em>format string</em> (using a DSL). Using strings to represent code has many disadvantages. It is not inherently type-safe, and complicates syntax-highlighting, code analysis, optimization, etc.</p>\n\n<p>Of course, when using tools or frameworks external to the Java language, new factors can come into play.</p>\n"},{"tags":[],"owner":{"account_id":337034,"reputation":56,"user_id":665056,"display_name":"CalisNight"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557503773,"creation_date":1557503773,"answer_id":56081086,"question_id":925423,"body_markdown":"It takes a little time to get used to String.Format, but it&#39;s worth it in most cases. In the world of NRA (never repeat anything) it&#39;s extremely useful to keep your tokenized messages (logging or user) in a Constant library (I prefer what amounts to a static class) and call them as necessary with String.Format regardless of whether you are localizing or not. Trying to use such a library with a concatenation method is harder to read, troubleshoot, proofread, and manage with any any approach that requires concatenation. Replacement is an option, but I doubt it&#39;s performant. After years of use, my biggest problem with String.Format is the length of the call is inconveniently long when I&#39;m passing it into another function (like Msg), but that&#39;s easy to get around with a custom function to serve as an alias.","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<p>It takes a little time to get used to String.Format, but it's worth it in most cases. In the world of NRA (never repeat anything) it's extremely useful to keep your tokenized messages (logging or user) in a Constant library (I prefer what amounts to a static class) and call them as necessary with String.Format regardless of whether you are localizing or not. Trying to use such a library with a concatenation method is harder to read, troubleshoot, proofread, and manage with any any approach that requires concatenation. Replacement is an option, but I doubt it's performant. After years of use, my biggest problem with String.Format is the length of the call is inconveniently long when I'm passing it into another function (like Msg), but that's easy to get around with a custom function to serve as an alias.</p>\n"},{"comments":[{"owner":{"account_id":1024933,"reputation":703,"user_id":1034461,"display_name":"horvoje"},"score":2,"creation_date":1594907603,"post_id":56377112,"comment_id":111296303,"body_markdown":"This is not a way you should write any test because the result is unpredictable. There are tons of rules you broke with this code i.e. you&#39;re not warming it up, you ignore Java optimizer etc.","body":"This is not a way you should write any test because the result is unpredictable. There are tons of rules you broke with this code i.e. you&#39;re not warming it up, you ignore Java optimizer etc."}],"tags":[],"owner":{"account_id":1612962,"reputation":2478,"user_id":1491414,"accept_rate":56,"display_name":"Ganesa Vijayakumar"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1572442547,"creation_date":1559214564,"answer_id":56377112,"question_id":925423,"body_markdown":"I think we can go with `MessageFormat.format` as it should be good at both readability and also performance aspects.\r\n\r\nI used the same program which one used by *Icaro* in his above answer and I enhanced it with appending code for using `MessageFormat` to explain the performance numbers.\r\n\r\n      public static void main(String[] args) {\r\n        long start = System.currentTimeMillis();\r\n        for (int i = 0; i &lt; 1000000; i++) {\r\n          String s = &quot;Hi &quot; + i + &quot;; Hi to you &quot; + i * 2;\r\n        }\r\n        long end = System.currentTimeMillis();\r\n        System.out.println(&quot;Concatenation = &quot; + ((end - start)) + &quot; millisecond&quot;);\r\n    \r\n        start = System.currentTimeMillis();\r\n        for (int i = 0; i &lt; 1000000; i++) {\r\n          String s = String.format(&quot;Hi %s; Hi to you %s&quot;, i, +i * 2);\r\n        }\r\n        end = System.currentTimeMillis();\r\n        System.out.println(&quot;Format = &quot; + ((end - start)) + &quot; millisecond&quot;);\r\n    \r\n        start = System.currentTimeMillis();\r\n        for (int i = 0; i &lt; 1000000; i++) {\r\n          String s = MessageFormat.format(&quot;Hi %s; Hi to you %s&quot;, i, +i * 2);\r\n        }\r\n        end = System.currentTimeMillis();\r\n        System.out.println(&quot;MessageFormat = &quot; + ((end - start)) + &quot; millisecond&quot;);\r\n      }\r\n\r\n&gt; Concatenation = 69 millisecond\r\n&gt; \r\n&gt; Format = 1435 millisecond\r\n&gt; \r\n&gt; MessageFormat = 200 millisecond\r\n\r\n\r\n**UPDATES:** \r\n\r\nAs per SonarLint Report, Printf-style format strings should be used correctly (squid:S3457)\r\n\r\nBecause `printf-style` format strings are interpreted at runtime, rather than validated by the compiler, they can contain errors that result in the wrong strings being created. This rule statically validates the correlation of `printf-style` format strings to their arguments when calling the format(...) methods of `java.util.Formatter`, `java.lang.String`, `java.io.PrintStream`, `MessageFormat`, and `java.io.PrintWriter` classes and the `printf(...)` methods of `java.io.PrintStream` or `java.io.PrintWriter` classes. \r\n\r\nI replace the printf-style with the curly-brackets and I got something interesting results as below.\r\n\r\n&gt; Concatenation = 69 millisecond&lt;br&gt; Format = 1107 millisecond&lt;br&gt;\r\n&gt; **Format:curly-brackets = 416 millisecond**&lt;br&gt; MessageFormat = 215\r\n&gt; millisecond&lt;br&gt; MessageFormat:curly-brackets = 2517 millisecond&lt;br&gt;\r\n\r\n**My Conclusion:**&lt;br&gt;\r\nAs I highlighted above, using String.format with curly-brackets should be a good choice to get benefits of good readability and also performance.\r\n","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<p>I think we can go with <code>MessageFormat.format</code> as it should be good at both readability and also performance aspects.</p>\n\n<p>I used the same program which one used by <em>Icaro</em> in his above answer and I enhanced it with appending code for using <code>MessageFormat</code> to explain the performance numbers.</p>\n\n<pre><code>  public static void main(String[] args) {\n    long start = System.currentTimeMillis();\n    for (int i = 0; i &lt; 1000000; i++) {\n      String s = \"Hi \" + i + \"; Hi to you \" + i * 2;\n    }\n    long end = System.currentTimeMillis();\n    System.out.println(\"Concatenation = \" + ((end - start)) + \" millisecond\");\n\n    start = System.currentTimeMillis();\n    for (int i = 0; i &lt; 1000000; i++) {\n      String s = String.format(\"Hi %s; Hi to you %s\", i, +i * 2);\n    }\n    end = System.currentTimeMillis();\n    System.out.println(\"Format = \" + ((end - start)) + \" millisecond\");\n\n    start = System.currentTimeMillis();\n    for (int i = 0; i &lt; 1000000; i++) {\n      String s = MessageFormat.format(\"Hi %s; Hi to you %s\", i, +i * 2);\n    }\n    end = System.currentTimeMillis();\n    System.out.println(\"MessageFormat = \" + ((end - start)) + \" millisecond\");\n  }\n</code></pre>\n\n<blockquote>\n  <p>Concatenation = 69 millisecond</p>\n  \n  <p>Format = 1435 millisecond</p>\n  \n  <p>MessageFormat = 200 millisecond</p>\n</blockquote>\n\n<p><strong>UPDATES:</strong> </p>\n\n<p>As per SonarLint Report, Printf-style format strings should be used correctly (squid:S3457)</p>\n\n<p>Because <code>printf-style</code> format strings are interpreted at runtime, rather than validated by the compiler, they can contain errors that result in the wrong strings being created. This rule statically validates the correlation of <code>printf-style</code> format strings to their arguments when calling the format(...) methods of <code>java.util.Formatter</code>, <code>java.lang.String</code>, <code>java.io.PrintStream</code>, <code>MessageFormat</code>, and <code>java.io.PrintWriter</code> classes and the <code>printf(...)</code> methods of <code>java.io.PrintStream</code> or <code>java.io.PrintWriter</code> classes. </p>\n\n<p>I replace the printf-style with the curly-brackets and I got something interesting results as below.</p>\n\n<blockquote>\n  <p>Concatenation = 69 millisecond<br> Format = 1107 millisecond<br>\n  <strong>Format:curly-brackets = 416 millisecond</strong><br> MessageFormat = 215\n  millisecond<br> MessageFormat:curly-brackets = 2517 millisecond<br></p>\n</blockquote>\n\n<p><strong>My Conclusion:</strong><br>\nAs I highlighted above, using String.format with curly-brackets should be a good choice to get benefits of good readability and also performance.</p>\n"},{"tags":[],"owner":{"account_id":3663387,"reputation":3549,"user_id":3058581,"display_name":"Adam111p"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1649417575,"creation_date":1649417575,"answer_id":71796284,"question_id":925423,"body_markdown":"**Wrong test repeated many times**\r\nYou should use {} no %s .\r\n\r\n    public static void main(String[] args) throws Exception {\r\n    long start = System.currentTimeMillis();\r\n    for (int i = 0; i &lt; 1000000; i++) {\r\n      String s = &quot;Hi &quot; + i + &quot;; Hi to you &quot; + i * 2;\r\n    }\r\n    long end = System.currentTimeMillis();\r\n    System.out.println(&quot;Concatenation = &quot; + ((end - start)) + &quot; millisecond&quot;);\r\n\r\n    start = System.currentTimeMillis();\r\n    for (int i = 0; i &lt; 1000000; i++) {\r\n      String s = String.format(&quot;Hi %s; Hi to you %s&quot;, i, +i * 2);\r\n    }\r\n    end = System.currentTimeMillis();\r\n    System.out.println(&quot;Wrong use of the message format  = &quot; + ((end - start)) + &quot; millisecond&quot;);\r\n\r\n    start = System.currentTimeMillis();\r\n    for (int i = 0; i &lt; 1000000; i++) {\r\n      String s = String.format(&quot;Hi {0}; Hi to you {1}&quot;, i, +i * 2);\r\n    }\r\n    end = System.currentTimeMillis();\r\n    System.out.println(&quot;Good use of the message format = &quot; + ((end - start)) + &quot; millisecond&quot;);\r\n  }\r\n\r\n    Concatenation = 88 millisecond\r\n    Wrong use of the message format  = 1075 millisecond \r\n    Good use of the message format = 376 millisecond","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<p><strong>Wrong test repeated many times</strong>\nYou should use {} no %s .</p>\n<pre><code>public static void main(String[] args) throws Exception {\nlong start = System.currentTimeMillis();\nfor (int i = 0; i &lt; 1000000; i++) {\n  String s = &quot;Hi &quot; + i + &quot;; Hi to you &quot; + i * 2;\n}\nlong end = System.currentTimeMillis();\nSystem.out.println(&quot;Concatenation = &quot; + ((end - start)) + &quot; millisecond&quot;);\n\nstart = System.currentTimeMillis();\nfor (int i = 0; i &lt; 1000000; i++) {\n  String s = String.format(&quot;Hi %s; Hi to you %s&quot;, i, +i * 2);\n}\nend = System.currentTimeMillis();\nSystem.out.println(&quot;Wrong use of the message format  = &quot; + ((end - start)) + &quot; millisecond&quot;);\n\nstart = System.currentTimeMillis();\nfor (int i = 0; i &lt; 1000000; i++) {\n  String s = String.format(&quot;Hi {0}; Hi to you {1}&quot;, i, +i * 2);\n}\nend = System.currentTimeMillis();\nSystem.out.println(&quot;Good use of the message format = &quot; + ((end - start)) + &quot; millisecond&quot;);\n</code></pre>\n<p>}</p>\n<pre><code>Concatenation = 88 millisecond\nWrong use of the message format  = 1075 millisecond \nGood use of the message format = 376 millisecond\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1690287153,"post_id":76739176,"comment_id":135329462,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/76739176/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":8947578,"reputation":1,"user_id":6674434,"display_name":"Cesar Estrada"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689952210,"creation_date":1689952210,"answer_id":76739176,"question_id":925423,"body_markdown":"Format = 1508 millisecond\r\nConcatenation = 31 millisecond\r\n\r\nProcess finished with exit code 0\r\n\r\nConcat is much better than format.","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<p>Format = 1508 millisecond\nConcatenation = 31 millisecond</p>\n<p>Process finished with exit code 0</p>\n<p>Concat is much better than format.</p>\n"}],"owner":{"account_id":10732,"reputation":54830,"user_id":20400,"accept_rate":72,"display_name":"Omar Kooheji"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":260827,"favorite_count":0,"down_vote_count":0,"up_vote_count":346,"accepted_answer_id":925444,"answer_count":16,"score":346,"last_activity_date":1689952210,"creation_date":1243594281,"question_id":925423,"body_markdown":"Is there a perceptible difference between using `String.format` and String concatenation in Java?\r\n\r\nI tend to use `String.format` but occasionally will slip and use a concatenation. I was wondering if one was better than the other.\r\n\r\nThe way I see it, `String.format` gives you more power in &quot;formatting&quot; the string; and concatenation means you don&#39;t have to worry about accidentally putting in an extra %s or missing one out.\r\n\r\n`String.format` is also shorter.\r\n\r\nWhich one is more readable depends on how your head works.","title":"Is it better practice to use String.format over string Concatenation in Java?","body":"<p>Is there a perceptible difference between using <code>String.format</code> and String concatenation in Java?</p>\n\n<p>I tend to use <code>String.format</code> but occasionally will slip and use a concatenation. I was wondering if one was better than the other.</p>\n\n<p>The way I see it, <code>String.format</code> gives you more power in \"formatting\" the string; and concatenation means you don't have to worry about accidentally putting in an extra %s or missing one out.</p>\n\n<p><code>String.format</code> is also shorter.</p>\n\n<p>Which one is more readable depends on how your head works.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1689940530,"post_id":76737596,"comment_id":135287665,"body_markdown":"&quot;but fails for android 12/13&quot; -- what *exactly* does &quot;fails&quot; mean? For example, are you crashing? If so, [use Logcat to examine the stack trace associated with the crash](https://commonsware.com/Jetpack/pages/chap-debug-001.html).","body":"&quot;but fails for android 12/13&quot; -- what <i>exactly</i> does &quot;fails&quot; mean? For example, are you crashing? If so, <a href=\"https://commonsware.com/Jetpack/pages/chap-debug-001.html\" rel=\"nofollow noreferrer\">use Logcat to examine the stack trace associated with the crash</a>."},{"owner":{"account_id":16291299,"reputation":89,"user_id":11764718,"display_name":"Rameswar Tarai"},"score":0,"creation_date":1689941836,"post_id":76737596,"comment_id":135287931,"body_markdown":"not able to get the video that I just recorded using the intent. The URI that i get using &quot;data.getData();&quot; is of a empty file. (len = inputStream.read(buffer)) != -1 is false.","body":"not able to get the video that I just recorded using the intent. The URI that i get using &quot;data.getData();&quot; is of a empty file. (len = inputStream.read(buffer)) != -1 is false."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1689944346,"post_id":76737596,"comment_id":135288489,"body_markdown":"Tell the value of your file uri. You use a wrong uri we think. Post the code that generates the uri too.","body":"Tell the value of your file uri. You use a wrong uri we think. Post the code that generates the uri too."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1689944661,"post_id":76737596,"comment_id":135288544,"body_markdown":"`To do so, I have created a video file` You should not already create an empty file. You only need a File instance for your file. The File instance has the same path of the -now not- created file.","body":"<code>To do so, I have created a video file</code> You should not already create an empty file. You only need a File instance for your file. The File instance has the same path of the -now not- created file."},{"owner":{"account_id":16291299,"reputation":89,"user_id":11764718,"display_name":"Rameswar Tarai"},"score":0,"creation_date":1689947081,"post_id":76737596,"comment_id":135289039,"body_markdown":"The same code works fine in Android 9 (Redmi 6). What could be wrong in Android 12 or Android 13?","body":"The same code works fine in Android 9 (Redmi 6). What could be wrong in Android 12 or Android 13?"}],"answers":[{"comments":[{"owner":{"account_id":16291299,"reputation":89,"user_id":11764718,"display_name":"Rameswar Tarai"},"score":0,"creation_date":1690030834,"post_id":76739155,"comment_id":135297729,"body_markdown":"Thanks for your advice. removing intent.putExtra(MediaStore.EXTRA_OUTPUT, getFileUri(&quot;&quot; + System.currentTimeMillis())); did the trick","body":"Thanks for your advice. removing intent.putExtra(MediaStore.EXTRA_OUTPUT, getFileUri(&quot;&quot; + System.currentTimeMillis())); did the trick"}],"tags":[],"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689951998,"creation_date":1689951998,"answer_id":76739155,"question_id":76737596,"body_markdown":"&gt; The same code works fine in Android 9 (Redmi 6)\r\n\r\nNo, it works fine on one device with one video recorder app, out of tens of thousands of devices and hundreds of video recorder apps. That app is being generous and is returning a `Uri` to you. [The app does not have to do that if you provide `EXTRA_OUTPUT` on the `Intent`](https://developer.android.com/reference/kotlin/android/provider/MediaStore?hl=en#action_video_capture), as you are doing.\r\n\r\nPlus, these video recorder apps have bugs.\r\n\r\nIf you fail to get a usable `Uri` back, try looking in the location that you provided in `EXTRA_OUTPUT` and see if the video is there. If it is, use it.","title":"not able to fetch video from the URI that I have sent in new Intent(MediaStore.ACTION_VIDEO_CAPTURE); in android 12/13","body":"<blockquote>\n<p>The same code works fine in Android 9 (Redmi 6)</p>\n</blockquote>\n<p>No, it works fine on one device with one video recorder app, out of tens of thousands of devices and hundreds of video recorder apps. That app is being generous and is returning a <code>Uri</code> to you. <a href=\"https://developer.android.com/reference/kotlin/android/provider/MediaStore?hl=en#action_video_capture\" rel=\"nofollow noreferrer\">The app does not have to do that if you provide <code>EXTRA_OUTPUT</code> on the <code>Intent</code></a>, as you are doing.</p>\n<p>Plus, these video recorder apps have bugs.</p>\n<p>If you fail to get a usable <code>Uri</code> back, try looking in the location that you provided in <code>EXTRA_OUTPUT</code> and see if the video is there. If it is, use it.</p>\n"}],"owner":{"account_id":16291299,"reputation":89,"user_id":11764718,"display_name":"Rameswar Tarai"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76739155,"answer_count":1,"score":1,"last_activity_date":1689951998,"creation_date":1689939200,"question_id":76737596,"body_markdown":"I want to capture video for 60 sec using Intent.\r\nTo do so, I have created a video file and sent it&#39;s URI in the Intent object.\r\nThe bellow code works fine in android 9 but fails for android 12/13.\r\n\r\nIntent object and its parameters:-\r\n\r\n```\r\nIntent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);\r\n                intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);\r\n                intent.putExtra(MediaStore.EXTRA_DURATION_LIMIT, 60);\r\n                intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 0);\r\n                intent.putExtra(MediaStore.EXTRA_OUTPUT, getFileUri(&quot;&quot; + System.currentTimeMillis())); // set the video file\r\n\r\n\r\n                if (intent.resolveActivity(getPackageManager()) != null) {\r\n                    videoCaptureResultLauncher.launch(intent);\r\n                }\r\n```\r\n\r\n\r\n\r\nActivityResultLauncher code:-\r\n\r\n```\r\n        ActivityResultLauncher&lt;Intent&gt; videoCaptureResultLauncher = registerForActivityResult(\r\n                new ActivityResultContracts.StartActivityForResult(),\r\n                new ActivityResultCallback&lt;ActivityResult&gt;() {\r\n                    @Override\r\n                    public void onActivityResult(ActivityResult result) {\r\n                        try {\r\n                            if (result.getResultCode() == Activity.RESULT_OK) {\r\n                                // There are no request codes\r\n                                Intent data = result.getData();\r\n                                videoCaptureResponse(data);//intent result response is sent here\r\n                            }\r\n                        } catch (Exception e) {\r\n                            e.printStackTrace();\r\n                            FirebaseCrashlytics.getInstance().recordException(e);\r\n                        }\r\n                    }\r\n                });\r\n\r\n    private void videoCaptureResponse(Intent data) throws IOException {\r\n        Uri selectedVideoUri = data.getData();\r\n        InputStream inputStream = getContentResolver().openInputStream(selectedVideoUri);\r\n        \r\n        ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();\r\n        int bufferSize = 1024;\r\n        byte[] buffer = new byte[bufferSize];\r\n        int len = 0;\r\n        while ((len = inputStream.read(buffer)) != -1) {\r\n            byteBuffer.write(buffer, 0, len);\r\n        }\r\n        byte[] arr = byteBuffer.toByteArray();\r\n        int sizeOfInputStram = arr.length;\r\n\r\n        stringEncoded = android.util.Base64.encodeToString(arr, android.util.Base64.DEFAULT);\r\n        \r\n        MediaMetadataRetriever mMMR = new MediaMetadataRetriever();\r\n        mMMR.setDataSource(WitnessCRPCActivity.this, selectedVideoUri);\r\n        Bitmap bmp = mMMR.getFrameAtTime();\r\n        filecamera.setImageBitmap(bmp);\r\n    }\r\n```\r\n\r\n\r\nI expect the to read the video URI having video data in it in android OS 12/13. I tried by giving read/write access to URI using flag `intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);` but it did not work.","title":"not able to fetch video from the URI that I have sent in new Intent(MediaStore.ACTION_VIDEO_CAPTURE); in android 12/13","body":"<p>I want to capture video for 60 sec using Intent.\nTo do so, I have created a video file and sent it's URI in the Intent object.\nThe bellow code works fine in android 9 but fails for android 12/13.</p>\n<p>Intent object and its parameters:-</p>\n<pre><code>Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);\n                intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);\n                intent.putExtra(MediaStore.EXTRA_DURATION_LIMIT, 60);\n                intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 0);\n                intent.putExtra(MediaStore.EXTRA_OUTPUT, getFileUri(&quot;&quot; + System.currentTimeMillis())); // set the video file\n\n\n                if (intent.resolveActivity(getPackageManager()) != null) {\n                    videoCaptureResultLauncher.launch(intent);\n                }\n</code></pre>\n<p>ActivityResultLauncher code:-</p>\n<pre><code>        ActivityResultLauncher&lt;Intent&gt; videoCaptureResultLauncher = registerForActivityResult(\n                new ActivityResultContracts.StartActivityForResult(),\n                new ActivityResultCallback&lt;ActivityResult&gt;() {\n                    @Override\n                    public void onActivityResult(ActivityResult result) {\n                        try {\n                            if (result.getResultCode() == Activity.RESULT_OK) {\n                                // There are no request codes\n                                Intent data = result.getData();\n                                videoCaptureResponse(data);//intent result response is sent here\n                            }\n                        } catch (Exception e) {\n                            e.printStackTrace();\n                            FirebaseCrashlytics.getInstance().recordException(e);\n                        }\n                    }\n                });\n\n    private void videoCaptureResponse(Intent data) throws IOException {\n        Uri selectedVideoUri = data.getData();\n        InputStream inputStream = getContentResolver().openInputStream(selectedVideoUri);\n        \n        ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();\n        int bufferSize = 1024;\n        byte[] buffer = new byte[bufferSize];\n        int len = 0;\n        while ((len = inputStream.read(buffer)) != -1) {\n            byteBuffer.write(buffer, 0, len);\n        }\n        byte[] arr = byteBuffer.toByteArray();\n        int sizeOfInputStram = arr.length;\n\n        stringEncoded = android.util.Base64.encodeToString(arr, android.util.Base64.DEFAULT);\n        \n        MediaMetadataRetriever mMMR = new MediaMetadataRetriever();\n        mMMR.setDataSource(WitnessCRPCActivity.this, selectedVideoUri);\n        Bitmap bmp = mMMR.getFrameAtTime();\n        filecamera.setImageBitmap(bmp);\n    }\n</code></pre>\n<p>I expect the to read the video URI having video data in it in android OS 12/13. I tried by giving read/write access to URI using flag <code>intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);</code> but it did not work.</p>\n"},{"tags":["java","enums"],"comments":[{"owner":{"account_id":7247195,"reputation":742,"user_id":5528725,"accept_rate":60,"display_name":"Thomas W."},"score":0,"creation_date":1689943227,"post_id":76737957,"comment_id":135288238,"body_markdown":"Do I get your code right, you want the fromErrorPatternt to return the Enum value depending on the filter and not a &#39;dynamic&#39; enum?","body":"Do I get your code right, you want the fromErrorPatternt to return the Enum value depending on the filter and not a &#39;dynamic&#39; enum?"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1689943488,"post_id":76737957,"comment_id":135288291,"body_markdown":"You want an `if` statement? What is `ErrorConstants`?","body":"You want an <code>if</code> statement? What is <code>ErrorConstants</code>?"},{"owner":{"account_id":28334748,"reputation":11,"user_id":21668464,"display_name":"Mohammed Muntazim"},"score":0,"creation_date":1689943756,"post_id":76737957,"comment_id":135288360,"body_markdown":"@ThomasW.  yes you are correct.","body":"@ThomasW.  yes you are correct."},{"owner":{"account_id":28334748,"reputation":11,"user_id":21668464,"display_name":"Mohammed Muntazim"},"score":0,"creation_date":1689943815,"post_id":76737957,"comment_id":135288370,"body_markdown":"@Dave Newton Sorry its ErrorDemo the enum class name.","body":"@Dave Newton Sorry its ErrorDemo the enum class name."},{"owner":{"account_id":7247195,"reputation":742,"user_id":5528725,"accept_rate":60,"display_name":"Thomas W."},"score":0,"creation_date":1690180114,"post_id":76737957,"comment_id":135311718,"body_markdown":"The answer of MC Emperor with the lambda looks really good...thumbs up...as an alternative you could store the enums in a map. Key could be a combination of the pattern and source. Retrieving the enum is then easily possible with a get on the map. If you are interested, just let me know and I will provide a sample code for that","body":"The answer of MC Emperor with the lambda looks really good...thumbs up...as an alternative you could store the enums in a map. Key could be a combination of the pattern and source. Retrieving the enum is then easily possible with a get on the map. If you are interested, just let me know and I will provide a sample code for that"}],"answers":[{"comments":[{"owner":{"account_id":28334748,"reputation":11,"user_id":21668464,"display_name":"Mohammed Muntazim"},"score":0,"creation_date":1689949225,"post_id":76738097,"comment_id":135289497,"body_markdown":"The above code worked fine ##Help is much appreciated.","body":"The above code worked fine ##Help is much appreciated."},{"owner":{"account_id":7247195,"reputation":742,"user_id":5528725,"accept_rate":60,"display_name":"Thomas W."},"score":0,"creation_date":1690179998,"post_id":76738097,"comment_id":135311705,"body_markdown":"If the answer works out for you, give it an upvote and mark the question as solved ;)","body":"If the answer works out for you, give it an upvote and mark the question as solved ;)"}],"tags":[],"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689943567,"creation_date":1689943191,"answer_id":76738097,"question_id":76737957,"body_markdown":"Well, you could walk over all enum values, and then match them with the given values:\r\n\r\n```java\r\nreturn Arrays.stream(ErrorConstants.values())\r\n    .filter(ec -&gt; Objects.equals(errorPattern, ec.getErrorMessagePattern()) &amp;&amp; Objects.equals(errorSource, ec.getSystemErrorSource()))\r\n    .findFirst()\r\n    .orElseThrow();\r\n```\r\n\r\nRegarding `findFirst` — it could be that multiple enums match. `findFirst()` is just returning the first one. If it is desired to have just a single element matching the errorPattern-errorSource combination, then you have to manually ensure that.\r\n\r\nIf nothing matches, then it throws a `NoSuchElementException`.\r\n\r\n---\r\n\r\nA classic (enhanced) for loop would look like this:\r\n\r\n```java\r\nfor (var ec : ErrorConstants.values()) {\r\n    if (Objects.equals(errorPattern, ec.getErrorMessagePattern()) &amp;&amp; Objects.equals(errorSource, ec.getSystemErrorSource())) {\r\n        return ec;\r\n    }\r\n}\r\nthrow new NoSuchElementException();\r\n```\r\n\r\n---\r\n\r\n&lt;sup&gt;Note: Your question mentions both `ErrorDemo` and `ErrorConstants`. I assume this is a mistake and they refer to the same thing.&lt;/sup&gt;","title":"Dynamic enum return based on condition","body":"<p>Well, you could walk over all enum values, and then match them with the given values:</p>\n<pre class=\"lang-java prettyprint-override\"><code>return Arrays.stream(ErrorConstants.values())\n    .filter(ec -&gt; Objects.equals(errorPattern, ec.getErrorMessagePattern()) &amp;&amp; Objects.equals(errorSource, ec.getSystemErrorSource()))\n    .findFirst()\n    .orElseThrow();\n</code></pre>\n<p>Regarding <code>findFirst</code> — it could be that multiple enums match. <code>findFirst()</code> is just returning the first one. If it is desired to have just a single element matching the errorPattern-errorSource combination, then you have to manually ensure that.</p>\n<p>If nothing matches, then it throws a <code>NoSuchElementException</code>.</p>\n<hr />\n<p>A classic (enhanced) for loop would look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (var ec : ErrorConstants.values()) {\n    if (Objects.equals(errorPattern, ec.getErrorMessagePattern()) &amp;&amp; Objects.equals(errorSource, ec.getSystemErrorSource())) {\n        return ec;\n    }\n}\nthrow new NoSuchElementException();\n</code></pre>\n<hr />\n<p><sup>Note: Your question mentions both <code>ErrorDemo</code> and <code>ErrorConstants</code>. I assume this is a mistake and they refer to the same thing.</sup></p>\n"}],"owner":{"account_id":28334748,"reputation":11,"user_id":21668464,"display_name":"Mohammed Muntazim"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76738097,"answer_count":1,"score":0,"last_activity_date":1689951845,"creation_date":1689942043,"question_id":76737957,"body_markdown":"```java\r\n@Getter\r\n@RequiredArgsConstructor(access = AccessLevel.PACKAGE)\r\npublic enum ErrorDemo {\r\n\r\n    PCAT_DEMO(&quot;PC01&quot;, &quot;this demo&quot;, &quot;BAD_AUTH&quot;, &quot;TMN&quot;),\r\n    PCAT_DEMO1(&quot;PC03&quot;, &quot;this demo1&quot;, &quot;NOT FOUND&quot;, &quot;TOP&quot;),\r\n    PCAT_DEMO(&quot;PC02&quot;, &quot;this demo&quot;, &quot;NOT AVAILABLE&quot;, &quot;TMN&quot;);\r\n\r\n    private final String errorCode;\r\n    private final String errorMessage;\r\n    private final String errorMessagePattern;\r\n    private final String systemErrorSource;\r\n\r\n    // This method will return specific enum which field is matching with the passed arguments\r\n    public static ErrorConstants fromErrorPatternt(String errorPattern, String errorSource) {\r\n        ...\r\n    }\r\n}\r\n```\r\n\r\ncalling from here\r\nErrorConstants err = ErrorConstants.fromErrorPatternt(errorMsg, &quot;TMN&quot;);\r\n\r\nwhere the errorMsg to be matched errorMessagePattern  and &quot;TMN&quot; to be matched with systemErrorSource, then it will return the specific enum","title":"Dynamic enum return based on condition","body":"<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@RequiredArgsConstructor(access = AccessLevel.PACKAGE)\npublic enum ErrorDemo {\n\n    PCAT_DEMO(&quot;PC01&quot;, &quot;this demo&quot;, &quot;BAD_AUTH&quot;, &quot;TMN&quot;),\n    PCAT_DEMO1(&quot;PC03&quot;, &quot;this demo1&quot;, &quot;NOT FOUND&quot;, &quot;TOP&quot;),\n    PCAT_DEMO(&quot;PC02&quot;, &quot;this demo&quot;, &quot;NOT AVAILABLE&quot;, &quot;TMN&quot;);\n\n    private final String errorCode;\n    private final String errorMessage;\n    private final String errorMessagePattern;\n    private final String systemErrorSource;\n\n    // This method will return specific enum which field is matching with the passed arguments\n    public static ErrorConstants fromErrorPatternt(String errorPattern, String errorSource) {\n        ...\n    }\n}\n</code></pre>\n<p>calling from here\nErrorConstants err = ErrorConstants.fromErrorPatternt(errorMsg, &quot;TMN&quot;);</p>\n<p>where the errorMsg to be matched errorMessagePattern  and &quot;TMN&quot; to be matched with systemErrorSource, then it will return the specific enum</p>\n"},{"tags":["java","hibernate","pojo","primitive-types"],"comments":[{"owner":{"account_id":200821,"reputation":4765,"user_id":446885,"accept_rate":93,"display_name":"Shahzeb"},"score":1,"creation_date":1316643529,"post_id":7506802,"comment_id":9091119,"body_markdown":"You can do all of that with hibernate without using JSR303.While being great and a right stepforward JSR303 has limitations but hibernate is there to sort that out.If you use Wrappers you will have so many issues and code will look dirty at the end when you will have so many getIntValue and Parse etc statments.Do not use wrappers.","body":"You can do all of that with hibernate without using JSR303.While being great and a right stepforward JSR303 has limitations but hibernate is there to sort that out.If you use Wrappers you will have so many issues and code will look dirty at the end when you will have so many getIntValue and Parse etc statments.Do not use wrappers."}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1316640239,"creation_date":1316640239,"answer_id":7506846,"question_id":7506802,"body_markdown":"The [Hibernate documentation][1] (just the first version I happened to find) states:\n\n&gt;  The property might have been called anything, and its type might have been any primitive type, any primitive &quot;wrapper&quot; type, java.lang.String or java.util.Date.\n&gt;\n&gt; ...\n&gt;\n&gt; We recommend that you declare consistently-named identifier properties on persistent classes and that you use a nullable (i.e., non-primitive) type.\n\nSo the &quot;expert&#39;s voice&quot; suggests using `Integer` / `Long`... but it&#39;s not described *why* this is the case.\n\nI wonder whether it&#39;s so that an object which hasn&#39;t been persisted yet can be created *without* an identifier (i.e. with a property value of `null`), distinguishing it from persisted entities.\n\n  [1]: http://docs.jboss.org/hibernate/core/3.3/reference/en/html/persistent-classes.html#persistent-classes-pojo-identifier","title":"Using wrapper Integer class or int primitive in hibernate mapping","body":"<p>The <a href=\"http://docs.jboss.org/hibernate/core/3.3/reference/en/html/persistent-classes.html#persistent-classes-pojo-identifier\" rel=\"noreferrer\">Hibernate documentation</a> (just the first version I happened to find) states:</p>\n<blockquote>\n<p>The property might have been called anything, and its type might have been any primitive type, any primitive &quot;wrapper&quot; type, java.lang.String or java.util.Date.</p>\n<p>...</p>\n<p>We recommend that you declare consistently-named identifier properties on persistent classes and that you use a nullable (i.e., non-primitive) type.</p>\n</blockquote>\n<p>So the &quot;expert's voice&quot; suggests using <code>Integer</code> / <code>Long</code>... but it's not described <em>why</em> this is the case.</p>\n<p>I wonder whether it's so that an object which hasn't been persisted yet can be created <em>without</em> an identifier (i.e. with a property value of <code>null</code>), distinguishing it from persisted entities.</p>\n"},{"comments":[{"owner":{"account_id":200821,"reputation":4765,"user_id":446885,"accept_rate":93,"display_name":"Shahzeb"},"score":0,"creation_date":1316643603,"post_id":7506904,"comment_id":9091138,"body_markdown":"+1 for &#39;should be enforcing nullability in the database anyway&#39; but I would say wrapper make like complicated not simple.","body":"+1 for &#39;should be enforcing nullability in the database anyway&#39; but I would say wrapper make like complicated not simple."}],"tags":[],"owner":{"account_id":1376,"reputation":61117,"user_id":1836,"accept_rate":90,"display_name":"Matthew Farwell"},"comment_count":1,"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1316640590,"creation_date":1316640590,"answer_id":7506904,"question_id":7506802,"body_markdown":"Use wrappers, make your life simple.\r\n\r\nYour data model should dictate this. You should be enforcing nullability in the database anyway.\r\n\r\nIf they are nullable in the database, then use wrappers. If they are not nullable, and you use wrappers, then you&#39;ll get an exception if you try and insert a null into the database.\r\n\r\nIf your data model doesn&#39;t dictate it, then go for a convention, use wrappers all of the time. That way people don&#39;t have to think, or decide that a value of 0 means null.\r\n\r\nI would also query your assertion that it would less performant. Have you measured this? I mean really measured it? When you&#39;re talking to a database, there are a lot more considerations than the difference between 16 bits and 32 bits.\r\n\r\nJust use the simple, consistent solution. Use wrappers everywhere, unless somebody gives you a *very* good reason (with accurate measured statistics) to do otherwise.","title":"Using wrapper Integer class or int primitive in hibernate mapping","body":"<p>Use wrappers, make your life simple.</p>\n\n<p>Your data model should dictate this. You should be enforcing nullability in the database anyway.</p>\n\n<p>If they are nullable in the database, then use wrappers. If they are not nullable, and you use wrappers, then you'll get an exception if you try and insert a null into the database.</p>\n\n<p>If your data model doesn't dictate it, then go for a convention, use wrappers all of the time. That way people don't have to think, or decide that a value of 0 means null.</p>\n\n<p>I would also query your assertion that it would less performant. Have you measured this? I mean really measured it? When you're talking to a database, there are a lot more considerations than the difference between 16 bits and 32 bits.</p>\n\n<p>Just use the simple, consistent solution. Use wrappers everywhere, unless somebody gives you a <em>very</em> good reason (with accurate measured statistics) to do otherwise.</p>\n"},{"comments":[{"owner":{"account_id":305493,"reputation":4238,"user_id":615686,"display_name":"Night Owl"},"score":0,"creation_date":1458676983,"post_id":8029152,"comment_id":59965371,"body_markdown":"This is still the recommendation as of Hibernate 5.1 but it is now in section &quot;2.5.5. Provide identifier attribute(s)&quot;","body":"This is still the recommendation as of Hibernate 5.1 but it is now in section &quot;2.5.5. Provide identifier attribute(s)&quot;"}],"tags":[],"owner":{"account_id":952653,"reputation":9035,"user_id":978502,"accept_rate":67,"display_name":"yair"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1320672455,"creation_date":1320602731,"answer_id":8029152,"question_id":7506802,"body_markdown":"Thought it should be mentioned:\r\n\r\nHibernate recommendation (section 4.1.2) using non-primitive properties in persistent classes actually refers - as titled - to **identifier properties**:\r\n&gt; ## 4.1.2. Provide an identifier property ##\r\nCat has a property called id. This property maps to the primary key column(s) of a database table. The property might have been called anything, and its type might have been any primitive type, any primitive &quot;wrapper&quot; type, java.lang.String or java.util.Date.\r\n\r\n&gt; ...\r\n\r\n&gt; We recommend that you declare consistently-named identifier properties on persistent classes and that you use a nullable (i.e., non-primitive) type.\r\n\r\nNonetheless, the advantages of primitives aren&#39;t strong:\r\n\r\n1. Having an inconsistent non-null value in a property is worse than NullPointerException, as the lurking bug is harder to track: more time will pass since the code is written until a problem is detected and it may show up in a totally different code context than its source.\r\n2. Regarding performance: before testing the code - it is generally a premature consideration. Safety should come first.\r\n\r\n","title":"Using wrapper Integer class or int primitive in hibernate mapping","body":"<p>Thought it should be mentioned:</p>\n\n<p>Hibernate recommendation (section 4.1.2) using non-primitive properties in persistent classes actually refers - as titled - to <strong>identifier properties</strong>:</p>\n\n<blockquote>\n  <h2>4.1.2. Provide an identifier property</h2>\n  \n  <p>Cat has a property called id. This property maps to the primary key column(s) of a database table. The property might have been called anything, and its type might have been any primitive type, any primitive \"wrapper\" type, java.lang.String or java.util.Date.</p>\n  \n  <p>...</p>\n  \n  <p>We recommend that you declare consistently-named identifier properties on persistent classes and that you use a nullable (i.e., non-primitive) type.</p>\n</blockquote>\n\n<p>Nonetheless, the advantages of primitives aren't strong:</p>\n\n<ol>\n<li>Having an inconsistent non-null value in a property is worse than NullPointerException, as the lurking bug is harder to track: more time will pass since the code is written until a problem is detected and it may show up in a totally different code context than its source.</li>\n<li>Regarding performance: before testing the code - it is generally a premature consideration. Safety should come first.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6898784,"reputation":518,"user_id":5299082,"accept_rate":0,"display_name":"Krusty the Clown"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689951185,"creation_date":1689951185,"answer_id":76739069,"question_id":7506802,"body_markdown":"I&#39;m gonna go out on a limb and disagree with all of the other answers here. If the field is nullable in the database, use a wrapper. If it can&#39;t be null, use a primitive. Now you get the performance benefits, AND it&#39;s much easier to distinguish between fields that can and can&#39;t be null in your code. ","title":"Using wrapper Integer class or int primitive in hibernate mapping","body":"<p>I'm gonna go out on a limb and disagree with all of the other answers here. If the field is nullable in the database, use a wrapper. If it can't be null, use a primitive. Now you get the performance benefits, AND it's much easier to distinguish between fields that can and can't be null in your code.</p>\n"},{"tags":[],"owner":{"account_id":8022626,"reputation":112,"user_id":6050814,"display_name":"Pritam Rajput"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689951681,"creation_date":1689951681,"answer_id":76739121,"question_id":7506802,"body_markdown":"If you are using a database like **mongo db**, OR the data has meaning when its **null** go with **Wrapper**,\r\n\r\n**Tip**: If you are doing calculations just create an extraNullChecked getter and use that to avoid null checks all over the codebase.\r\n\r\nIf the Data point **has to have a value all the time** and can&#39;t be null, **use primitive**.","title":"Using wrapper Integer class or int primitive in hibernate mapping","body":"<p>If you are using a database like <strong>mongo db</strong>, OR the data has meaning when its <strong>null</strong> go with <strong>Wrapper</strong>,</p>\n<p><strong>Tip</strong>: If you are doing calculations just create an extraNullChecked getter and use that to avoid null checks all over the codebase.</p>\n<p>If the Data point <strong>has to have a value all the time</strong> and can't be null, <strong>use primitive</strong>.</p>\n"}],"owner":{"account_id":482678,"reputation":959,"user_id":897225,"accept_rate":17,"display_name":"vanvasquez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27272,"favorite_count":0,"down_vote_count":0,"up_vote_count":50,"answer_count":5,"score":50,"last_activity_date":1689951681,"creation_date":1316639977,"question_id":7506802,"body_markdown":"In the company that I work for we have this major discussion on whether it should be better to use wrapping classes for primitives (java.lang.Integer, java.lang.Long) or whether to use the primitive types directly in the POJOs that map Entities to Tables in Hibernate.\r\n \r\nThe idea is that we want these values to not be null in the database.\r\n\r\n**The arguments in favor of using primitives:**\r\n\r\n - Handling these values as int means that they can never be null, in\r\n   this way making it impossible to inadvertently get a null reference\r\n   on the field. \r\n - int=32/64 bits of memory.  Integer = 16 bytes of memory\r\n   and is also slower\r\n\r\n**The arguments in favor of using wrapper objects:**\r\n\r\n - We can add a constraint at the database level to always prevent null\r\n   values from getting there \r\n - We can end up with misleading data, we can\r\n   have 0&#39;s instead of nulls in the database whenever the user doesn&#39;t\r\n   set a value and buggy data is a tough catch. \r\n - Objects have more expressive power than primitives.  We have null values and also\r\n   integer values, so we can validate them easier using  annotations for\r\n   example (javax.validation.constraints.NotNull).\r\n\r\n   ","title":"Using wrapper Integer class or int primitive in hibernate mapping","body":"<p>In the company that I work for we have this major discussion on whether it should be better to use wrapping classes for primitives (java.lang.Integer, java.lang.Long) or whether to use the primitive types directly in the POJOs that map Entities to Tables in Hibernate.</p>\n\n<p>The idea is that we want these values to not be null in the database.</p>\n\n<p><strong>The arguments in favor of using primitives:</strong></p>\n\n<ul>\n<li>Handling these values as int means that they can never be null, in\nthis way making it impossible to inadvertently get a null reference\non the field. </li>\n<li>int=32/64 bits of memory.  Integer = 16 bytes of memory\nand is also slower</li>\n</ul>\n\n<p><strong>The arguments in favor of using wrapper objects:</strong></p>\n\n<ul>\n<li>We can add a constraint at the database level to always prevent null\nvalues from getting there </li>\n<li>We can end up with misleading data, we can\nhave 0's instead of nulls in the database whenever the user doesn't\nset a value and buggy data is a tough catch. </li>\n<li>Objects have more expressive power than primitives.  We have null values and also\ninteger values, so we can validate them easier using  annotations for\nexample (javax.validation.constraints.NotNull).</li>\n</ul>\n"},{"tags":["java","amazon-web-services","amazon-s3"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689867801,"post_id":76728465,"comment_id":135277338,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":303420,"reputation":10129,"user_id":2378643,"display_name":"Anon Coward"},"score":1,"creation_date":1689870868,"post_id":76728465,"comment_id":135277983,"body_markdown":"Why is a key that starts with `/` invalid?  Also, S3 is not eventually consistent.","body":"Why is a key that starts with <code>&#47;</code> invalid?  Also, S3 is not eventually consistent."},{"owner":{"account_id":29055596,"reputation":1,"user_id":22257445,"display_name":"fifan"},"score":0,"creation_date":1689926738,"post_id":76728465,"comment_id":135285122,"body_markdown":"My probleme is that doesObjectExist returns true even if the object does not exists in S3.","body":"My probleme is that doesObjectExist returns true even if the object does not exists in S3."},{"owner":{"account_id":100740,"reputation":73227,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1689943669,"post_id":76728465,"comment_id":135288333,"body_markdown":"@fifan I think you&#39;re mistaken. The object *does* exist.","body":"@fifan I think you&#39;re mistaken. The object <i>does</i> exist."},{"owner":{"account_id":29055596,"reputation":1,"user_id":22257445,"display_name":"fifan"},"score":0,"creation_date":1689945739,"post_id":76728465,"comment_id":135288757,"body_markdown":"I&#39;ve verified on S3 browser, that does not existe , and I know why , that&#39;s because the key starts with &#39;/&#39;.","body":"I&#39;ve verified on S3 browser, that does not existe , and I know why , that&#39;s because the key starts with &#39;/&#39;."},{"owner":{"account_id":100740,"reputation":73227,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1689949765,"post_id":76728465,"comment_id":135289621,"body_markdown":"I think you are mis-reading the situation. I don&#39;t use S3Browser, and it&#39;s not an authoritative source, but it might show an unnamed top-level folder or one simply named `/`. If so, click on it to see your object. Or, as mentioned, use the awscli to authoritatively verify the object&#39;s existence","body":"I think you are mis-reading the situation. I don&#39;t use S3Browser, and it&#39;s not an authoritative source, but it might show an unnamed top-level folder or one simply named <code>&#47;</code>. If so, click on it to see your object. Or, as mentioned, use the awscli to authoritatively verify the object&#39;s existence"}],"answers":[{"tags":[],"owner":{"account_id":100740,"reputation":73227,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689951070,"creation_date":1689898396,"answer_id":76734386,"question_id":76728465,"body_markdown":"Your code is working correctly.\r\n\r\nWhen you upload to a key such as `/dog.png`, you do indeed get an S3 object with the key `/dog.png`. You can see this if you run `aws s3 ls s3://mybucket//` (with extra trailing slash) instead of `aws s3 ls s3://mybucket/`. You can also verify this by issuing a HeadObject request for the key `/dog.png`, which is effectively what the `doesObjectExist()` method does.\r\n\r\nTo verify the object exists using the awscli, run:\r\n\r\n    aws s3api head-object --bucket mybucket --key /dog.png\r\n\r\nSo the upload succeeds and `doesObjectExist()` correctly returns true.\r\n\r\nAs a general rule, you probably want to avoid leading slash because it is confusing for people.","title":"check existance of object after uploading it to S3","body":"<p>Your code is working correctly.</p>\n<p>When you upload to a key such as <code>/dog.png</code>, you do indeed get an S3 object with the key <code>/dog.png</code>. You can see this if you run <code>aws s3 ls s3://mybucket//</code> (with extra trailing slash) instead of <code>aws s3 ls s3://mybucket/</code>. You can also verify this by issuing a HeadObject request for the key <code>/dog.png</code>, which is effectively what the <code>doesObjectExist()</code> method does.</p>\n<p>To verify the object exists using the awscli, run:</p>\n<pre><code>aws s3api head-object --bucket mybucket --key /dog.png\n</code></pre>\n<p>So the upload succeeds and <code>doesObjectExist()</code> correctly returns true.</p>\n<p>As a general rule, you probably want to avoid leading slash because it is confusing for people.</p>\n"}],"owner":{"account_id":29055596,"reputation":1,"user_id":22257445,"display_name":"fifan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689951070,"creation_date":1689845247,"question_id":76728465,"body_markdown":"I want to check if an object us successfuly uploaded to S3 just after uploading it.\r\n\r\n```\r\nPutObjectRequest putObjReq = new PutObjectRequest(bucketName, s3Key, tmpArchivePath.toFile());\r\nUpload upload = transferManager.upload(putObjReq);\r\nupload.waitForCompletion();\r\nboolean fileExistsAfter = s3Client.doesObjectExist(bucketName, s3Key);\r\n```\r\n\r\nthat returns always true ,even if the object is not successfully uploaded. I think that is because of the Eventual Consistency,\r\nexample:\r\nwhen the s3Key starts with / , it is not a valid key ,so the object will not be uploaded however it returns true\r\n","title":"check existance of object after uploading it to S3","body":"<p>I want to check if an object us successfuly uploaded to S3 just after uploading it.</p>\n<pre><code>PutObjectRequest putObjReq = new PutObjectRequest(bucketName, s3Key, tmpArchivePath.toFile());\nUpload upload = transferManager.upload(putObjReq);\nupload.waitForCompletion();\nboolean fileExistsAfter = s3Client.doesObjectExist(bucketName, s3Key);\n</code></pre>\n<p>that returns always true ,even if the object is not successfully uploaded. I think that is because of the Eventual Consistency,\nexample:\nwhen the s3Key starts with / , it is not a valid key ,so the object will not be uploaded however it returns true</p>\n"},{"tags":["java","eclipse","gradle","jar"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689950978,"post_id":76739023,"comment_id":135289901,"body_markdown":"Is 4.3 the Gradle version declared in your app? What does `./gradlew --version` print on the command line?","body":"Is 4.3 the Gradle version declared in your app? What does <code>.&#47;gradlew --version</code> print on the command line?"},{"owner":{"account_id":18888609,"reputation":33,"user_id":13779404,"display_name":"Mandar Remane"},"score":0,"creation_date":1689951173,"post_id":76739023,"comment_id":135289946,"body_markdown":"gradle --version on cmd prints 6.8.3, and yes in build.gradle in dependencies it is written &quot;classpath &quot;some-website:build-info-extractor-gradle:4.31.8&quot;","body":"gradle --version on cmd prints 6.8.3, and yes in build.gradle in dependencies it is written &quot;classpath &quot;some-website:build-info-extractor-gradle:4.31.8&quot;"}],"owner":{"account_id":18888609,"reputation":33,"user_id":13779404,"display_name":"Mandar Remane"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689950902,"creation_date":1689950902,"question_id":76739023,"body_markdown":"I am trying to add Gradle Nature into my Eclipse Project.\r\nGradle build is successfully running from my command prompt, but giving following error when tried to add Gradle Nature through Eclipse.\r\n\r\nError : \r\n&gt; Synchronize Gradle projects with workspace failed due to an error in the referenced Gradle build.\r\n&gt; Could not run build action using Gradle distribution &#39;https://services.gradle.org/distributions/gradle-4.3-bin.zip&#39;.\r\n\r\nNote - \r\n1. I am running Eclipse as admin.\r\n2. from eclipse -&gt; properties -&gt; I am not able to see gradle option to change the &quot;Specific Gradle Version&quot; \r\n\r\nTried deleting the gradle-4.3-bin from C:/Users/name/.gradle/wrapper/dists","title":"Could not run build action using Gradle distribution - Eclipse","body":"<p>I am trying to add Gradle Nature into my Eclipse Project.\nGradle build is successfully running from my command prompt, but giving following error when tried to add Gradle Nature through Eclipse.</p>\n<p>Error :</p>\n<blockquote>\n<p>Synchronize Gradle projects with workspace failed due to an error in the referenced Gradle build.\nCould not run build action using Gradle distribution 'https://services.gradle.org/distributions/gradle-4.3-bin.zip'.</p>\n</blockquote>\n<p>Note -</p>\n<ol>\n<li>I am running Eclipse as admin.</li>\n<li>from eclipse -&gt; properties -&gt; I am not able to see gradle option to change the &quot;Specific Gradle Version&quot;</li>\n</ol>\n<p>Tried deleting the gradle-4.3-bin from C:/Users/name/.gradle/wrapper/dists</p>\n"},{"tags":["java","quicksort","swap","partition"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1689949155,"post_id":76738704,"comment_id":135289485,"body_markdown":"Well, have you tried it? Either on paper, or with a debugger? Take one example, go through it, and look at the state of the array after the while loop has finished.","body":"Well, have you tried it? Either on paper, or with a debugger? Take one example, go through it, and look at the state of the array after the while loop has finished."},{"owner":{"account_id":14673420,"reputation":13,"user_id":10597289,"display_name":"user10597289"},"score":0,"creation_date":1689949814,"post_id":76738704,"comment_id":135289634,"body_markdown":"Thank you. Yes i tried it but i dont have clue now. I will try it on Monday again.","body":"Thank you. Yes i tried it but i dont have clue now. I will try it on Monday again."}],"answers":[{"tags":[],"owner":{"account_id":27668746,"reputation":233,"user_id":21120027,"display_name":"Dulan Jayawickrama"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689950315,"creation_date":1689950315,"answer_id":76738949,"question_id":76738704,"body_markdown":"The second swap in the partition function is there to place the pivot element in its correct sorted position in the array.\r\n\r\nOnce the loop in the partition function finishes, it means that i and j have crossed each other, and the elements to the left of j are less than or equal to the pivot, while the elements to the right of j are greater than the pivot.\r\n\r\nHowever, the pivot element is still at array[links]. To place the pivot in its correct sorted position, you need to swap it with the element at index j. After this swap, the pivot element is at its correct position, and all elements to the left of it are smaller or equal, and all elements to the right are greater.","title":"I implemented a quicksort in Java and it works properly but i dont understand the second swap in the partition function?","body":"<p>The second swap in the partition function is there to place the pivot element in its correct sorted position in the array.</p>\n<p>Once the loop in the partition function finishes, it means that i and j have crossed each other, and the elements to the left of j are less than or equal to the pivot, while the elements to the right of j are greater than the pivot.</p>\n<p>However, the pivot element is still at array[links]. To place the pivot in its correct sorted position, you need to swap it with the element at index j. After this swap, the pivot element is at its correct position, and all elements to the left of it are smaller or equal, and all elements to the right are greater.</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689950871,"creation_date":1689950401,"answer_id":76738955,"question_id":76738704,"body_markdown":"Yes have to do the last `swap()`, because you return `j` - is the first element of the second half (which is higher than pivot element). The pivot element is the first one `arr[0]`, so you shoul move it to the end of the first path.\r\n\r\n```java\r\nprivate static int partition(int[] arr, int lo, int hi) {\r\n    // A\r\n    int i = lo, j = hi;\r\n    int v = arr[lo];\r\n\r\n    while (i &lt;= j) {\r\n        if (arr[i] &lt;= v) i++;\r\n        else if (arr[j] &gt; v) j--;\r\n        else swap(arr, ++i, --j);\r\n    }\r\n    \r\n    // B\r\n    swap(arr, lo, j);\r\n    \r\n    // C\r\n    return j;\r\n}\r\n\r\npublic static void swap(int[] arr, int i, int j) {\r\n    int tmp = arr[i];\r\n    arr[i] = arr[j];\r\n    arr[j] = tmp;\r\n}\r\n```\r\n\r\n`step A: [7, 6, 1, 3, 5, 10, 15, 11, 1, 2, 18, 11, 4, 5, 17, 20, 25, 3, 8, 16]`, the pivot elemnt is `arr[0] = 7`, so we have to move all elements `&lt;= 7` to the left part, and `&gt; 7` -  to the right. And return the index of the first element of the right part.\r\n\r\n`step B: [7, 6, 1, 3, 5, 10, 25, 4, 1, 2, 18, 11, 11, 5, 17, 20, 15, 3, 8, 16]`, the `j = 9 =&gt; arr[9] = 2`. So you either should do `j++`, but this is dangerout, in case `j = arr.length -1`. Or do not change it and `swap(arr, 0, 9)`.\r\n\r\n`step C: [2, 6, 1, 3, 5, 10, 25, 4, 1, 7, 18, 11, 11, 5, 17, 20, 15, 3, 8, 16]`\r\n\r\n","title":"I implemented a quicksort in Java and it works properly but i dont understand the second swap in the partition function?","body":"<p>Yes have to do the last <code>swap()</code>, because you return <code>j</code> - is the first element of the second half (which is higher than pivot element). The pivot element is the first one <code>arr[0]</code>, so you shoul move it to the end of the first path.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static int partition(int[] arr, int lo, int hi) {\n    // A\n    int i = lo, j = hi;\n    int v = arr[lo];\n\n    while (i &lt;= j) {\n        if (arr[i] &lt;= v) i++;\n        else if (arr[j] &gt; v) j--;\n        else swap(arr, ++i, --j);\n    }\n    \n    // B\n    swap(arr, lo, j);\n    \n    // C\n    return j;\n}\n\npublic static void swap(int[] arr, int i, int j) {\n    int tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n</code></pre>\n<p><code>step A: [7, 6, 1, 3, 5, 10, 15, 11, 1, 2, 18, 11, 4, 5, 17, 20, 25, 3, 8, 16]</code>, the pivot elemnt is <code>arr[0] = 7</code>, so we have to move all elements <code>&lt;= 7</code> to the left part, and <code>&gt; 7</code> -  to the right. And return the index of the first element of the right part.</p>\n<p><code>step B: [7, 6, 1, 3, 5, 10, 25, 4, 1, 2, 18, 11, 11, 5, 17, 20, 15, 3, 8, 16]</code>, the <code>j = 9 =&gt; arr[9] = 2</code>. So you either should do <code>j++</code>, but this is dangerout, in case <code>j = arr.length -1</code>. Or do not change it and <code>swap(arr, 0, 9)</code>.</p>\n<p><code>step C: [2, 6, 1, 3, 5, 10, 25, 4, 1, 7, 18, 11, 11, 5, 17, 20, 15, 3, 8, 16]</code></p>\n"}],"owner":{"account_id":14673420,"reputation":13,"user_id":10597289,"display_name":"user10597289"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76738949,"answer_count":2,"score":1,"last_activity_date":1689950871,"creation_date":1689948387,"question_id":76738704,"body_markdown":"```\r\n    private static int partition(int[] array,int links, int rechts) \r\n    {\r\n        int pivotelement = array[links];  //pivotelement on the left\r\n        int i = links;                    // links means leftside\r\n        int j = rechts;                   // rechts means rightside\r\n                                         \r\n        while (i &lt;= j) \r\n        {\r\n            if (array[i] &lt;= pivotelement) \r\n            {\r\n                i++;\r\n            }\r\n            else if (array[j] &gt; pivotelement)\r\n            {\r\n                j--;\r\n            }\r\n            else\r\n            {\r\n            \tswap(array,i,j);   **//first swap makes sense to me**\r\n                i++;\r\n                j--;\r\n            }\r\n        }\r\n        swap(array,links,j);    **//Here is the second swap. Im not sure about that but it works**.\r\n        return j;\r\n   \t}\r\n    \r\n    public static void swap(int[] array, int i, int j) {\r\n        int temp = array[i];\r\n        array[i] = array[j];\r\n        array[j] = temp;\r\n    }\r\n```\r\n\r\n# **Im expecting a explanation of the second swap. Why is it necessary?** \r\n\r\nI found out that in a sorted list i dont need the second swap. Sorry thats my first Question in Stack Overflow. When you need more Information just ask for it. \r\n\r\nThese are the  arrays i try it with and it works.\r\n\r\n\t\tint[] array = {1,2,3,4,5,6,7,8,9,10};\r\n\t\tint[] array = {4,7,4,6,8,2,3,4,6,2};\r\n\t\tint[] array = {8,4,6,3,7,1,0,9,5,22};\r\n\t\tint[] array = {1};                                                                             ","title":"I implemented a quicksort in Java and it works properly but i dont understand the second swap in the partition function?","body":"<pre><code>    private static int partition(int[] array,int links, int rechts) \n    {\n        int pivotelement = array[links];  //pivotelement on the left\n        int i = links;                    // links means leftside\n        int j = rechts;                   // rechts means rightside\n                                         \n        while (i &lt;= j) \n        {\n            if (array[i] &lt;= pivotelement) \n            {\n                i++;\n            }\n            else if (array[j] &gt; pivotelement)\n            {\n                j--;\n            }\n            else\n            {\n                swap(array,i,j);   **//first swap makes sense to me**\n                i++;\n                j--;\n            }\n        }\n        swap(array,links,j);    **//Here is the second swap. Im not sure about that but it works**.\n        return j;\n    }\n    \n    public static void swap(int[] array, int i, int j) {\n        int temp = array[i];\n        array[i] = array[j];\n        array[j] = temp;\n    }\n</code></pre>\n<h1><strong>Im expecting a explanation of the second swap. Why is it necessary?</strong></h1>\n<p>I found out that in a sorted list i dont need the second swap. Sorry thats my first Question in Stack Overflow. When you need more Information just ask for it.</p>\n<p>These are the  arrays i try it with and it works.</p>\n<pre><code>    int[] array = {1,2,3,4,5,6,7,8,9,10};\n    int[] array = {4,7,4,6,8,2,3,4,6,2};\n    int[] array = {8,4,6,3,7,1,0,9,5,22};\n    int[] array = {1};                                                                             \n</code></pre>\n"},{"tags":["java","kotlin","apache-kafka","kafka-consumer-api","apache-kafka-streams"],"owner":{"account_id":7209594,"reputation":1,"user_id":5504151,"display_name":"Antoine Michaud"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689950865,"creation_date":1686134586,"question_id":76422441,"body_markdown":"# Context:\r\n\r\nWe have currently a stateful kafka streams application in a kubernetes environment and aws msk cluster. We are joining a total of 7 topics, creating a 13 sub-topologies topology, with 21 internal topics (excluding changelogs), and 36 stores. Each input topic have tens of millions of events (compacted topics), where we are receiving from 60 events/s to 2k events/s. Everything on 12 instances.\r\n\r\n# Problem:\r\n\r\nEven if we have a big cpu, a lot of memory, a performant disk or a big msk cluster, we are not able to maximize the consumption:\r\n- we are far from 100% of cpu\r\n- the GC is not bursting\r\n- the disk is far from maximum use\r\n- the msk cluster is sleeping regarding network, disk and cpu uses\r\n\r\nWhen we reconsume all the topics at the same time, we are well using the maximum resources and be able to consume 100k+ events/s, use the disk at 100% iops or burst the cpu or memory of the msk cluster, but only temporary, where at 10% of the reconsumption, we are near to 30% cpu and 30% of disk iops.\r\n\r\nWhen we reset the offset of a 1 partition input topic, it&#39;s obvious: we are consuming like 2k events/s where the only instance consuming this topic is sleeping (30% cpu, network at less than 1MB/s, disk at 5%) and the msk cluster also sleeping.\r\n\r\nWhen we restore 1 partition only, it seems the same problems: We can see bumps every 30-40 seconds of thousand events per second consumed (and between bumps, we restore nothing), so the restore process is always very, very long.\r\n\r\n# Configurations\r\nCurrent configurations on pastebin (consumer, restore consumer, streams &amp; rocksdb) to not pollute the message, but stack overflow don&#39;t want to accept my link... Here it is as code: `pastebin.com/Z8kcX6YG`\r\n\r\n# What we did\r\nWe discovered that when we increase the number of streams threads from 1 to more (tested with 3 and 5 threads), we can go to 100% of disk and cpu usage during reconsumptions and restores, but still with the same issue when we are consumption big amount of events in 1 partition only: not at maximum regarding network, cpu, disk and msk cluster.\r\n\r\nWe also analysed with JFR, but it seems no throttling point, except the big amount of time spent for socket selector.\r\n\r\nRegarding all of that, we are not able to scale properly, so each reconsumption is a pain because we need hours and days to finish the process.\r\n\r\n# Question\r\nHow can we improve the consumption performances to be able to scale up ?","title":"Throttling on kafka-streams consumption, how to improve it?","body":"<h1>Context:</h1>\n<p>We have currently a stateful kafka streams application in a kubernetes environment and aws msk cluster. We are joining a total of 7 topics, creating a 13 sub-topologies topology, with 21 internal topics (excluding changelogs), and 36 stores. Each input topic have tens of millions of events (compacted topics), where we are receiving from 60 events/s to 2k events/s. Everything on 12 instances.</p>\n<h1>Problem:</h1>\n<p>Even if we have a big cpu, a lot of memory, a performant disk or a big msk cluster, we are not able to maximize the consumption:</p>\n<ul>\n<li>we are far from 100% of cpu</li>\n<li>the GC is not bursting</li>\n<li>the disk is far from maximum use</li>\n<li>the msk cluster is sleeping regarding network, disk and cpu uses</li>\n</ul>\n<p>When we reconsume all the topics at the same time, we are well using the maximum resources and be able to consume 100k+ events/s, use the disk at 100% iops or burst the cpu or memory of the msk cluster, but only temporary, where at 10% of the reconsumption, we are near to 30% cpu and 30% of disk iops.</p>\n<p>When we reset the offset of a 1 partition input topic, it's obvious: we are consuming like 2k events/s where the only instance consuming this topic is sleeping (30% cpu, network at less than 1MB/s, disk at 5%) and the msk cluster also sleeping.</p>\n<p>When we restore 1 partition only, it seems the same problems: We can see bumps every 30-40 seconds of thousand events per second consumed (and between bumps, we restore nothing), so the restore process is always very, very long.</p>\n<h1>Configurations</h1>\n<p>Current configurations on pastebin (consumer, restore consumer, streams &amp; rocksdb) to not pollute the message, but stack overflow don't want to accept my link... Here it is as code: <code>pastebin.com/Z8kcX6YG</code></p>\n<h1>What we did</h1>\n<p>We discovered that when we increase the number of streams threads from 1 to more (tested with 3 and 5 threads), we can go to 100% of disk and cpu usage during reconsumptions and restores, but still with the same issue when we are consumption big amount of events in 1 partition only: not at maximum regarding network, cpu, disk and msk cluster.</p>\n<p>We also analysed with JFR, but it seems no throttling point, except the big amount of time spent for socket selector.</p>\n<p>Regarding all of that, we are not able to scale properly, so each reconsumption is a pain because we need hours and days to finish the process.</p>\n<h1>Question</h1>\n<p>How can we improve the consumption performances to be able to scale up ?</p>\n"},{"tags":["java","tomcat7","java-websocket","cometd"],"answers":[{"tags":[],"owner":{"account_id":1255537,"reputation":17242,"user_id":1215076,"display_name":"sbordet"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689950052,"creation_date":1689950052,"answer_id":76738918,"question_id":76732744,"body_markdown":"CometD does not support streaming of message content, as messages are formatted in JSON following the Bayeux protocol.\r\n\r\nThe typical case of wanting to stream content is for large contents, to reduce memory footprint.\r\n\r\nUsing messaging for large uploads/downloads is not really the use case for CometD: it would be far better to exchange an upload/download URI, and use HTTP (or even WebSocket, but with a different protocol than Bayeux) for the upload/download of large content.\r\n\r\nIf you specify what is exactly your use case, the answer could be more precise. ","title":"Does CometD support partial websocket messaging","body":"<p>CometD does not support streaming of message content, as messages are formatted in JSON following the Bayeux protocol.</p>\n<p>The typical case of wanting to stream content is for large contents, to reduce memory footprint.</p>\n<p>Using messaging for large uploads/downloads is not really the use case for CometD: it would be far better to exchange an upload/download URI, and use HTTP (or even WebSocket, but with a different protocol than Bayeux) for the upload/download of large content.</p>\n<p>If you specify what is exactly your use case, the answer could be more precise.</p>\n"}],"owner":{"account_id":6301107,"reputation":1,"user_id":4895735,"display_name":"kavish jain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689950052,"creation_date":1689877463,"question_id":76732744,"body_markdown":"I have application using CometD version 5 that does not support partial messages over websocket. Is it supported in newer version or else do i need to do it in my application. Any java libraries that provide partial messaging OOB with CometD\r\n\r\nNo support in CometD version 5. \r\nMay consider upgrading the version 7 if it is supported or if third library exists","title":"Does CometD support partial websocket messaging","body":"<p>I have application using CometD version 5 that does not support partial messages over websocket. Is it supported in newer version or else do i need to do it in my application. Any java libraries that provide partial messaging OOB with CometD</p>\n<p>No support in CometD version 5.\nMay consider upgrading the version 7 if it is supported or if third library exists</p>\n"},{"tags":["java","linux"],"comments":[{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":1,"creation_date":1494566431,"post_id":43929744,"comment_id":74892442,"body_markdown":"I don&#39;t get it: getResource() returns a URL, why would you use it if you already have an URL?","body":"I don&#39;t get it: getResource() returns a URL, why would you use it if you already have an URL?"},{"owner":{"account_id":3468356,"reputation":4510,"user_id":2903371,"accept_rate":92,"display_name":"patrik"},"score":0,"creation_date":1494566565,"post_id":43929744,"comment_id":74892495,"body_markdown":"@MauricePerry Yes agreed! The URLs have some complicated sorting since there are dependencies between the resources. The function which reads the resources and sorts them takes a string input. The reason for this is that it is allowed to add resources as strings as well in this function. This is not my choice, but I have to comply with it. Also, I prefer to not rewrite another library just to make my implmentation work.","body":"@MauricePerry Yes agreed! The URLs have some complicated sorting since there are dependencies between the resources. The function which reads the resources and sorts them takes a string input. The reason for this is that it is allowed to add resources as strings as well in this function. This is not my choice, but I have to comply with it. Also, I prefer to not rewrite another library just to make my implmentation work."}],"owner":{"account_id":3468356,"reputation":4510,"user_id":2903371,"accept_rate":92,"display_name":"patrik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689949931,"creation_date":1494566033,"question_id":43929744,"body_markdown":"I need to get a resource from within a jar file using `getClass().getResource()`. The problem is that I have a URL as input and there seems to be some compatibility issues between URL and getResource()\r\n\r\nSo what I do currently is,\r\n\r\n    getClass().getResource(url.getPath());\r\n\r\nThis does however not work (and neither does getResourceAsStream()) since the output from `url.getPath()` looks something like this,\r\n\r\n    file:/mavenPath/repository/myJar.jar!/path/to/resource/myResource.ext\r\n\r\nHowever the path\r\n\r\n    /path/to/resource/myResource.ext\r\n\r\nwould work. I also noted that\r\n\r\n    url.toURI()\r\n\r\nworks but,\r\n\r\n    url.toURI().getPath()\r\n\r\nreturns null (I am not sure if this is related). So the problem seems to be this first path,\r\n\r\n    file:/mavenPath/repository/myJar.jar!\r\n\r\nWhich causes problems with the classloader.\r\n\r\nDoes anyone have a solution to this? I doubt I am to be the first one with the problem so there should be some solution I hope. The problem is that this notation probably differs from Windows to Linux I am afraid to cause compatibility between windows and linux if I manually modify the path.\r\n\r\nIt might be worth noting that I use Linux and the resources is included in the classpath, but not inside the same jar file as the method where I have problems.\r\n\r\n**EDIT**\r\n\r\nSomeone pointed out that getResource() returns a URL. The problem is that I have multiple URLs with dependencies (actually they are MIBs). The function reading the URLs is located in another library and takes a String input. It also includes some IANA and IETF standard MIBs.","title":"Compatibility problems with using getResource() together with URL","body":"<p>I need to get a resource from within a jar file using <code>getClass().getResource()</code>. The problem is that I have a URL as input and there seems to be some compatibility issues between URL and getResource()</p>\n\n<p>So what I do currently is,</p>\n\n<pre><code>getClass().getResource(url.getPath());\n</code></pre>\n\n<p>This does however not work (and neither does getResourceAsStream()) since the output from <code>url.getPath()</code> looks something like this,</p>\n\n<pre><code>file:/mavenPath/repository/myJar.jar!/path/to/resource/myResource.ext\n</code></pre>\n\n<p>However the path</p>\n\n<pre><code>/path/to/resource/myResource.ext\n</code></pre>\n\n<p>would work. I also noted that</p>\n\n<pre><code>url.toURI()\n</code></pre>\n\n<p>works but,</p>\n\n<pre><code>url.toURI().getPath()\n</code></pre>\n\n<p>returns null (I am not sure if this is related). So the problem seems to be this first path,</p>\n\n<pre><code>file:/mavenPath/repository/myJar.jar!\n</code></pre>\n\n<p>Which causes problems with the classloader.</p>\n\n<p>Does anyone have a solution to this? I doubt I am to be the first one with the problem so there should be some solution I hope. The problem is that this notation probably differs from Windows to Linux I am afraid to cause compatibility between windows and linux if I manually modify the path.</p>\n\n<p>It might be worth noting that I use Linux and the resources is included in the classpath, but not inside the same jar file as the method where I have problems.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Someone pointed out that getResource() returns a URL. The problem is that I have multiple URLs with dependencies (actually they are MIBs). The function reading the URLs is located in another library and takes a String input. It also includes some IANA and IETF standard MIBs.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1689949712,"post_id":76738855,"comment_id":135289613,"body_markdown":"Does this answer your question? [Non-static variable cannot be referenced from a static context](https://stackoverflow.com/questions/2559527/non-static-variable-cannot-be-referenced-from-a-static-context)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2559527/non-static-variable-cannot-be-referenced-from-a-static-context\">Non-static variable cannot be referenced from a static context</a>"},{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1689949741,"post_id":76738855,"comment_id":135289615,"body_markdown":"`Complex cAdd=Complex.add(c1,c2);` &lt;- this is simply not how you call instance methods on objects. I strongly recommend going back and reading a basic tutorial about how instance methods are called in java: https://docs.oracle.com/javase/tutorial/java/javaOO/usingobject.html and also reading up about [what static means in java](https://stackoverflow.com/questions/413898/what-does-the-static-keyword-do-in-a-class)","body":"<code>Complex cAdd=Complex.add(c1,c2);</code> &lt;- this is simply not how you call instance methods on objects. I strongly recommend going back and reading a basic tutorial about how instance methods are called in java: <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/usingobject.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/javaOO/usingobject.html</a> and also reading up about <a href=\"https://stackoverflow.com/questions/413898/what-does-the-static-keyword-do-in-a-class\">what static means in java</a>"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1689949796,"post_id":76738855,"comment_id":135289630,"body_markdown":"You are mixing two options. Either declare `static Complex add(Complex c1, Complex c2)` or `Complex add(Complex other)`.","body":"You are mixing two options. Either declare <code>static Complex add(Complex c1, Complex c2)</code> or <code>Complex add(Complex other)</code>."},{"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"score":0,"creation_date":1689950112,"post_id":76738855,"comment_id":135289715,"body_markdown":"Add `static` to your `add` method: `static Complex add(Complex a, Complex b) { ...`","body":"Add <code>static</code> to your <code>add</code> method: <code>static Complex add(Complex a, Complex b) { ...</code>"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1689950800,"post_id":76738855,"comment_id":135289844,"body_markdown":"When making a method that takes 2 complex, you don&#39;t need the &#39;context&#39; of a complex number. This isn&#39;t OO and isn&#39;t proper java style. What would be much better is `public Complex plus(Complex other) { return new Complex(this.real + other.real, this.imag + other.imag); }` - instead of &quot;A function that is given 2 complex numbers that makes a new one&quot;, you now have: &quot;A function you can call _on an instance of Complex_, you pass another instance of Complex, and as a result the instance of Complex adds the other number to itself and returns that.","body":"When making a method that takes 2 complex, you don&#39;t need the &#39;context&#39; of a complex number. This isn&#39;t OO and isn&#39;t proper java style. What would be much better is <code>public Complex plus(Complex other) { return new Complex(this.real + other.real, this.imag + other.imag); }</code> - instead of &quot;A function that is given 2 complex numbers that makes a new one&quot;, you now have: &quot;A function you can call <i>on an instance of Complex</i>, you pass another instance of Complex, and as a result the instance of Complex adds the other number to itself and returns that."}],"owner":{"account_id":29064453,"reputation":1,"user_id":22264386,"display_name":"VaccinalShip"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1689949697,"answer_count":0,"score":0,"last_activity_date":1689949587,"creation_date":1689949587,"question_id":76738855,"body_markdown":"I created a class Complex to do Complex operators. Inside the Complex class I made a method add which uses two Complex class parameters. But when I create two instances in main() and then try to add them.\r\n```\r\npublic class ComplexNo {\r\n    public static void main(String[] args){\r\n        Complex c1=new Complex(1,1);\r\n        Complex c2=new Complex(2,3);\r\n        Complex cAdd=Complex.add(c1,c2);\r\n    }\r\n}\r\nclass Complex{\r\n    float real; float imag;\r\n    Complex(float a, float b){\r\n        real = a;\r\n        imag = b;\r\n    }\r\n    Complex add(Complex a, Complex b){\r\n        return new Complex(a.real+b.real, a.imag+b.imag);\r\n    }\r\n}\r\n```\r\nIt shows the error &quot;Non-static method &#39;add(Complex, Complex)&#39; cannot be referenced from a static context&quot;. It is corrected by adding static keyword. How does it help?","title":"Use of static keyword for methods to call them in main()","body":"<p>I created a class Complex to do Complex operators. Inside the Complex class I made a method add which uses two Complex class parameters. But when I create two instances in main() and then try to add them.</p>\n<pre><code>public class ComplexNo {\n    public static void main(String[] args){\n        Complex c1=new Complex(1,1);\n        Complex c2=new Complex(2,3);\n        Complex cAdd=Complex.add(c1,c2);\n    }\n}\nclass Complex{\n    float real; float imag;\n    Complex(float a, float b){\n        real = a;\n        imag = b;\n    }\n    Complex add(Complex a, Complex b){\n        return new Complex(a.real+b.real, a.imag+b.imag);\n    }\n}\n</code></pre>\n<p>It shows the error &quot;Non-static method 'add(Complex, Complex)' cannot be referenced from a static context&quot;. It is corrected by adding static keyword. How does it help?</p>\n"},{"tags":["java","dropwizard"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686642327,"post_id":76462671,"comment_id":134823182,"body_markdown":"Dropwizard uses Jackson, right? You should be able to add a custom deserializer: https://stackoverflow.com/a/19167145/8681","body":"Dropwizard uses Jackson, right? You should be able to add a custom deserializer: <a href=\"https://stackoverflow.com/a/19167145/8681\">stackoverflow.com/a/19167145/8681</a>"},{"owner":{"account_id":10543957,"reputation":21,"user_id":7768885,"display_name":"Hani"},"score":0,"creation_date":1686677016,"post_id":76462671,"comment_id":134831004,"body_markdown":"that&#39;s a good start, but the problem is that MyObject is a class in a library i dont own","body":"that&#39;s a good start, but the problem is that MyObject is a class in a library i dont own"}],"answers":[{"tags":[],"owner":{"account_id":29064427,"reputation":11,"user_id":22264366,"display_name":"snowy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689949437,"creation_date":1689949437,"answer_id":76738841,"question_id":76462671,"body_markdown":"There are a couple of different ways you might want to consider when approaching:\r\n\r\n(1) Use an enumeration in the configuration and then provide a mapping to the `MyObject` class which controls the instantiation of the fields driven by the country. This will make it clear which countries are supported (and for which you have mappings).\r\n\r\n```\r\npublic class MyConfig extends Configuration {\r\n\r\n    enum Country {\r\n        USA;\r\n\r\n        MyObject toObject() {\r\n            switch (this) {\r\n                case USA:\r\n                    return new MyObject(&quot;+1&quot;, &quot;North America&quot;...);\r\n            }\r\n            ...\r\n        }\r\n    }\r\n    \r\n    public Country country;\r\n}\r\n```\r\n\r\n\r\n(2) Register a custom deserialiser. Even if you don&#39;t own the `MyObject` class you will still be able to register a custom deserialiser either directly on the `ObjectMapper` or by using the `JsonDeserializer(using = MyObjectDeserializer)` annotation on the field in your application configuration (rather than on the `MyObject` class declaration which as you say - is not editable by you) - example:\r\n  \r\n```\r\npublic class MyConfig extends Configuration {\r\n\r\n    @JsonDeserialize(using = MyObjectDeserializer.class)\r\n    public MyObject country;\r\n}\r\n  ```\r\n\r\n\r\n","title":"Dropwizard conf file automatically convert value to custom object","body":"<p>There are a couple of different ways you might want to consider when approaching:</p>\n<p>(1) Use an enumeration in the configuration and then provide a mapping to the <code>MyObject</code> class which controls the instantiation of the fields driven by the country. This will make it clear which countries are supported (and for which you have mappings).</p>\n<pre><code>public class MyConfig extends Configuration {\n\n    enum Country {\n        USA;\n\n        MyObject toObject() {\n            switch (this) {\n                case USA:\n                    return new MyObject(&quot;+1&quot;, &quot;North America&quot;...);\n            }\n            ...\n        }\n    }\n    \n    public Country country;\n}\n</code></pre>\n<p>(2) Register a custom deserialiser. Even if you don't own the <code>MyObject</code> class you will still be able to register a custom deserialiser either directly on the <code>ObjectMapper</code> or by using the <code>JsonDeserializer(using = MyObjectDeserializer)</code> annotation on the field in your application configuration (rather than on the <code>MyObject</code> class declaration which as you say - is not editable by you) - example:</p>\n<pre><code>public class MyConfig extends Configuration {\n\n    @JsonDeserialize(using = MyObjectDeserializer.class)\n    public MyObject country;\n}\n</code></pre>\n"}],"owner":{"account_id":10543957,"reputation":21,"user_id":7768885,"display_name":"Hani"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689949437,"creation_date":1686642070,"question_id":76462671,"body_markdown":"I have a dropwizard application that parses conf files to construct the application&#39;s configuration.\r\n\r\nbase.conf file has:\r\n\r\n    country: USA\r\n\r\nin the configuration java file:\r\n\r\n    @NotNull\r\n    private MyObject country;\r\n\r\nMyObject is not an enum in this case. It is a regular object.\r\n\r\nHow can I configure it to have dropwizard automatically convert the parsed string value to MyObject based on some logic I define, like:\r\n\r\n    MyObject convertStringToMyObject(String value) {\r\n        if (value.equals(&quot;USA&quot;) {\r\n            return new MyObject(&quot;+1&quot;, &quot;North America&quot;, &quot;USA&quot;);\r\n        }\r\n    }\r\n\r\nThis is obviously just the simplest dumb sample I could think of for what I&#39;m trying to achieve.","title":"Dropwizard conf file automatically convert value to custom object","body":"<p>I have a dropwizard application that parses conf files to construct the application's configuration.</p>\n<p>base.conf file has:</p>\n<pre><code>country: USA\n</code></pre>\n<p>in the configuration java file:</p>\n<pre><code>@NotNull\nprivate MyObject country;\n</code></pre>\n<p>MyObject is not an enum in this case. It is a regular object.</p>\n<p>How can I configure it to have dropwizard automatically convert the parsed string value to MyObject based on some logic I define, like:</p>\n<pre><code>MyObject convertStringToMyObject(String value) {\n    if (value.equals(&quot;USA&quot;) {\n        return new MyObject(&quot;+1&quot;, &quot;North America&quot;, &quot;USA&quot;);\n    }\n}\n</code></pre>\n<p>This is obviously just the simplest dumb sample I could think of for what I'm trying to achieve.</p>\n"},{"tags":["java","rabbitmq","messagebroker","rabbitmq-exchange"],"comments":[{"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"score":0,"creation_date":1673886560,"post_id":75112978,"comment_id":132592104,"body_markdown":"Version 4.x.x of the Java client is out-of-date and no longer supported. The current version supports automatic consumer recovery.","body":"Version 4.x.x of the Java client is out-of-date and no longer supported. The current version supports automatic consumer recovery."},{"owner":{"account_id":24136324,"reputation":23,"user_id":18103179,"display_name":"fa gsc"},"score":0,"creation_date":1673886889,"post_id":75112978,"comment_id":132592226,"body_markdown":"Automatic recovery isn&#39;t triggered in all cases though? Also, this should be 5.5.3. Its only the api link that happens to be 4.x.x","body":"Automatic recovery isn&#39;t triggered in all cases though? Also, this should be 5.5.3. Its only the api link that happens to be 4.x.x"},{"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"score":0,"creation_date":1673969792,"post_id":75112978,"comment_id":132612407,"body_markdown":"Thanks for clarifying. I can ask the maintainer of the Java client to assist us if you ask your question [here](https://github.com/rabbitmq/rabbitmq-java-client/discussions). Please provide as much code as possible, ideally something we can compile and run.","body":"Thanks for clarifying. I can ask the maintainer of the Java client to assist us if you ask your question <a href=\"https://github.com/rabbitmq/rabbitmq-java-client/discussions\" rel=\"nofollow noreferrer\">here</a>. Please provide as much code as possible, ideally something we can compile and run."}],"answers":[{"tags":[],"owner":{"account_id":4898046,"reputation":1463,"user_id":3946976,"accept_rate":90,"display_name":"Erick Boshoff"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689949299,"creation_date":1689949299,"answer_id":76738828,"question_id":75112978,"body_markdown":"I know this might be a late answer, but I&#39;ve found an easy way is to keep the consumer connected to the rabbitmq broker and just drop my internet connection manually for a few seconds and reconnect.\r\n\r\nAfter that the `shudown handler` is triggered. ","title":"How to trigger rabbit mq shutdown signal for testing?","body":"<p>I know this might be a late answer, but I've found an easy way is to keep the consumer connected to the rabbitmq broker and just drop my internet connection manually for a few seconds and reconnect.</p>\n<p>After that the <code>shudown handler</code> is triggered.</p>\n"}],"owner":{"account_id":24136324,"reputation":23,"user_id":18103179,"display_name":"fa gsc"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689949299,"creation_date":1673633329,"question_id":75112978,"body_markdown":"Faced an issue on prod system where 1 message was left unacked for 30 mins which lead to consumer being shutdown. Now I have added shutdownlisteners as described in rabbit mq docs -\r\nhttps://rabbitmq.github.io/rabbitmq-java-client/api/4.x.x/com/rabbitmq/client/ShutdownListener.html\r\n\r\n```channel.addShutdownListener(cause -&gt; {\r\n                if (cause.isHardError()) {\r\n                    log.error(&quot;Connection error with cause : {}&quot;, cause);\r\n                    Connection conn = (Connection) cause.getReference();\r\n                    if (!cause.isInitiatedByApplication()) {\r\n                        Method reason = cause.getReason();\r\n                        log.error(&quot;Rabbit Mq Consumer Connection Shutdown : {} {}&quot;, reason, cause);\r\n                    }\r\n                } else{\r\n                    Channel ch = (Channel)cause.getReference();\r\n                    log.error(&quot;Channel error details : {}&quot;, ch);\r\n                }\r\n            });\r\n```\r\nThe issue is it&#39;s not getting invoked at all in testing. I tried triggering it through 2 ways-\r\n1) Through unacked delivery timeout. Basically threw a general excption and never acked it(these were the original conditions of the bug). However, this didn&#39;t work.\r\n2) I used channel.close() to shutdown the consumer but still didn&#39;t receive an event.\r\n\r\nLooking for any way to replicate the issue I faced and test/trigger the shutdownlisteners. Thanks","title":"How to trigger rabbit mq shutdown signal for testing?","body":"<p>Faced an issue on prod system where 1 message was left unacked for 30 mins which lead to consumer being shutdown. Now I have added shutdownlisteners as described in rabbit mq docs -\n<a href=\"https://rabbitmq.github.io/rabbitmq-java-client/api/4.x.x/com/rabbitmq/client/ShutdownListener.html\" rel=\"nofollow noreferrer\">https://rabbitmq.github.io/rabbitmq-java-client/api/4.x.x/com/rabbitmq/client/ShutdownListener.html</a></p>\n<pre><code>                if (cause.isHardError()) {\n                    log.error(&quot;Connection error with cause : {}&quot;, cause);\n                    Connection conn = (Connection) cause.getReference();\n                    if (!cause.isInitiatedByApplication()) {\n                        Method reason = cause.getReason();\n                        log.error(&quot;Rabbit Mq Consumer Connection Shutdown : {} {}&quot;, reason, cause);\n                    }\n                } else{\n                    Channel ch = (Channel)cause.getReference();\n                    log.error(&quot;Channel error details : {}&quot;, ch);\n                }\n            });\n</code></pre>\n<p>The issue is it's not getting invoked at all in testing. I tried triggering it through 2 ways-</p>\n<ol>\n<li>Through unacked delivery timeout. Basically threw a general excption and never acked it(these were the original conditions of the bug). However, this didn't work.</li>\n<li>I used channel.close() to shutdown the consumer but still didn't receive an event.</li>\n</ol>\n<p>Looking for any way to replicate the issue I faced and test/trigger the shutdownlisteners. Thanks</p>\n"},{"tags":["java","exception","ssh","io","jsch"],"answers":[{"comments":[{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1689710766,"post_id":76710675,"comment_id":135251608,"body_markdown":"It would be better for future googlers to have an example","body":"It would be better for future googlers to have an example"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1689859820,"post_id":76710675,"comment_id":135275232,"body_markdown":"BTW in your second example in case if `session.disconnect();` throws exception then `channel.disconnect();` won&#39;t be called","body":"BTW in your second example in case if <code>session.disconnect();</code> throws exception then <code>channel.disconnect();</code> won&#39;t be called"}],"tags":[],"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689948996,"creation_date":1689667471,"answer_id":76710675,"question_id":76622161,"body_markdown":"##### 1. You can separate a channel from a session, so it&#39;s safer to explicit close the channel\r\n\r\n```\r\nSession session = null;\r\nChannelExec channel = null;\r\nSession session2 = null;\r\nChannelExec2 channel = null;\r\n\r\ntry {\r\n  session = new JSch().getSession(username, host, port);\r\n  ...\r\n  channel = (ChannelExec) session.openChannel(&quot;exec&quot;);\r\n  ...\r\n  session2 = new JSch().getSession(username, host, port);\r\n  channel.setSession(session2);\r\n  ...\r\n} finally {\r\n  if (session != null) {\r\n\tsession.disconnect();\r\n  }\r\n  if (channel != null) {\r\n\tchannel.disconnect();\r\n  }\r\n}\r\ntry {\r\n  channel2 = (ChannelExec) session.openChannel(&quot;exec&quot;);\r\n  ...\r\n} finally {\r\n  if (session2 != null) {\r\n\tsession2.disconnect();\r\n  }\r\n  if (channel2 != null) {\r\n\tchannel2.disconnect();\r\n  }\r\n}\r\n```\r\n##### 2. `disconnect` calls [close][1], which may throw an `IOException`.  \r\nSo to be safe, you should handle this case.\r\n\r\n```\r\nSession session = null;\r\nChannelExec channel = null;\r\ntry {\r\n  session = new JSch().getSession(username, host, port);\r\n  ...\r\n  channel = (ChannelExec) session.openChannel(&quot;exec&quot;);\r\n  ...\r\n} catch(Exception ex) {\r\n  ex.printStacktrace();\r\n} finally {\r\n  try {\r\n    if (session != null) {\r\n      session.disconnect();\r\n    }\r\n  } catch(Exception e1) {\r\n    e1.printStackTrace();\r\n  }\r\n  try {\r\n    if (channel != null) {\r\n     channel.disconnect();\r\n    }\r\n  } catch(Exception e2) {\r\n    e2.printStacktrace();\r\n  }\r\n}\r\n```\r\n##### 3. Examples are often simplified to focus on a use case. So don&#39;t take everything in them as gospel.\r\n\r\n\r\n  [1]: https://github.com/rtyley/jsch/blob/master/src/com/jcraft/jsch/Channel.java#L341","title":"How to handle resources in JSCH exec correctly?","body":"<h5>1. You can separate a channel from a session, so it's safer to explicit close the channel</h5>\n<pre><code>Session session = null;\nChannelExec channel = null;\nSession session2 = null;\nChannelExec2 channel = null;\n\ntry {\n  session = new JSch().getSession(username, host, port);\n  ...\n  channel = (ChannelExec) session.openChannel(&quot;exec&quot;);\n  ...\n  session2 = new JSch().getSession(username, host, port);\n  channel.setSession(session2);\n  ...\n} finally {\n  if (session != null) {\n    session.disconnect();\n  }\n  if (channel != null) {\n    channel.disconnect();\n  }\n}\ntry {\n  channel2 = (ChannelExec) session.openChannel(&quot;exec&quot;);\n  ...\n} finally {\n  if (session2 != null) {\n    session2.disconnect();\n  }\n  if (channel2 != null) {\n    channel2.disconnect();\n  }\n}\n</code></pre>\n<h5>2. <code>disconnect</code> calls <a href=\"https://github.com/rtyley/jsch/blob/master/src/com/jcraft/jsch/Channel.java#L341\" rel=\"nofollow noreferrer\">close</a>, which may throw an <code>IOException</code>.</h5>\n<p>So to be safe, you should handle this case.</p>\n<pre><code>Session session = null;\nChannelExec channel = null;\ntry {\n  session = new JSch().getSession(username, host, port);\n  ...\n  channel = (ChannelExec) session.openChannel(&quot;exec&quot;);\n  ...\n} catch(Exception ex) {\n  ex.printStacktrace();\n} finally {\n  try {\n    if (session != null) {\n      session.disconnect();\n    }\n  } catch(Exception e1) {\n    e1.printStackTrace();\n  }\n  try {\n    if (channel != null) {\n     channel.disconnect();\n    }\n  } catch(Exception e2) {\n    e2.printStacktrace();\n  }\n}\n</code></pre>\n<h5>3. Examples are often simplified to focus on a use case. So don't take everything in them as gospel.</h5>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689948996,"creation_date":1688573390,"question_id":76622161,"body_markdown":"\r\nI&#39;ve found [example][1] of ssh connection:\r\n\r\n     public static void listFolderStructure(String username, String password, \r\n          String host, int port, String command) throws Exception {\r\n            \r\n            Session session = null;\r\n            ChannelExec channel = null;\r\n            \r\n            try {\r\n                session = new JSch().getSession(username, host, port);\r\n                session.setPassword(password);\r\n                session.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\r\n                session.connect();\r\n                \r\n                channel = (ChannelExec) session.openChannel(&quot;exec&quot;);\r\n                channel.setCommand(command);\r\n                ByteArrayOutputStream responseStream = new ByteArrayOutputStream();\r\n                channel.setOutputStream(responseStream);\r\n                channel.connect();\r\n                \r\n                while (channel.isConnected()) {\r\n                    Thread.sleep(100);\r\n                }\r\n                \r\n                String responseString = new String(responseStream.toByteArray());\r\n                System.out.println(responseString);\r\n            } finally {\r\n                if (session != null) {\r\n                    session.disconnect();\r\n                }\r\n                if (channel != null) {\r\n                    channel.disconnect();\r\n                }\r\n            }\r\n        }\r\n\r\nI have couple of questions about the code:\r\n\r\n 1. Is there any reason to call `disconnect` on a channel after seesion is disconnected ?\r\n looks like [this line][2] will disconnect all channels \r\n\r\n\r\n```\r\n    public void disconnect(){\r\n        if(!isConnected) return;\r\n    \r\n        ...\r\n        Channel.disconnect(this);\r\n    \r\n        ...\r\n    \r\n ```\r\n\r\n 2. Should `session.disconnect()` throw any Runtime Exception ? Should I handle this case ?\r\n\r\n\r\n 3. Example in lib repo also have both(session and channel close) and even not in finally block. Is it correct ?\r\n\r\n https://github.com/rtyley/jsch/blob/master/examples/Exec.java#L77\r\n\r\n  [1]: https://www.baeldung.com/java-ssh-connection#1-implementation\r\n  [2]: https://github.com/rtyley/jsch/blob/master/src/com/jcraft/jsch/Session.java#L1564","title":"How to handle resources in JSCH exec correctly?","body":"<p>I've found <a href=\"https://www.baeldung.com/java-ssh-connection#1-implementation\" rel=\"nofollow noreferrer\">example</a> of ssh connection:</p>\n<pre><code> public static void listFolderStructure(String username, String password, \n      String host, int port, String command) throws Exception {\n        \n        Session session = null;\n        ChannelExec channel = null;\n        \n        try {\n            session = new JSch().getSession(username, host, port);\n            session.setPassword(password);\n            session.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\n            session.connect();\n            \n            channel = (ChannelExec) session.openChannel(&quot;exec&quot;);\n            channel.setCommand(command);\n            ByteArrayOutputStream responseStream = new ByteArrayOutputStream();\n            channel.setOutputStream(responseStream);\n            channel.connect();\n            \n            while (channel.isConnected()) {\n                Thread.sleep(100);\n            }\n            \n            String responseString = new String(responseStream.toByteArray());\n            System.out.println(responseString);\n        } finally {\n            if (session != null) {\n                session.disconnect();\n            }\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n</code></pre>\n<p>I have couple of questions about the code:</p>\n<ol>\n<li>Is there any reason to call <code>disconnect</code> on a channel after seesion is disconnected ?\nlooks like <a href=\"https://github.com/rtyley/jsch/blob/master/src/com/jcraft/jsch/Session.java#L1564\" rel=\"nofollow noreferrer\">this line</a> will disconnect all channels</li>\n</ol>\n<pre><code>    public void disconnect(){\n        if(!isConnected) return;\n    \n        ...\n        Channel.disconnect(this);\n    \n        ...\n    \n</code></pre>\n<ol start=\"2\">\n<li><p>Should <code>session.disconnect()</code> throw any Runtime Exception ? Should I handle this case ?</p>\n</li>\n<li><p>Example in lib repo also have both(session and channel close) and even not in finally block. Is it correct ?</p>\n</li>\n</ol>\n<p><a href=\"https://github.com/rtyley/jsch/blob/master/examples/Exec.java#L77\" rel=\"nofollow noreferrer\">https://github.com/rtyley/jsch/blob/master/examples/Exec.java#L77</a></p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":3,"creation_date":1689944638,"post_id":76738264,"comment_id":135288537,"body_markdown":"Use a for loop.","body":"Use a for loop."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1689948194,"post_id":76738264,"comment_id":135289284,"body_markdown":"`consumers.forEach(c -&gt; c.accept(myvalue));` would do it. No streams, loop is tucked away.","body":"<code>consumers.forEach(c -&gt; c.accept(myvalue));</code> would do it. No streams, loop is tucked away."}],"answers":[{"tags":[],"owner":{"account_id":27668746,"reputation":233,"user_id":21120027,"display_name":"Dulan Jayawickrama"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689948962,"creation_date":1689944935,"answer_id":76738305,"question_id":76738264,"body_markdown":"Loop through the list and apply each consumer to myValue.\r\n\r\n```java\r\nfor (Consumer&lt;MyObject&gt; consumer : consumerList) {\r\n    consumer.accept(myValue);\r\n}\r\n```","title":"Execute Consumers in a row","body":"<p>Loop through the list and apply each consumer to myValue.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (Consumer&lt;MyObject&gt; consumer : consumerList) {\n    consumer.accept(myValue);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1689948447,"post_id":76738515,"comment_id":135289332,"body_markdown":"Note the composition here only guarantees that they are executed in-sequence, accepting the value one after the other. Realistically not seeing a benefit over a simple loop for immediate execution, but I do see benefit if you&#39;re trying to pass that `Consumer` along to something else. In which case, `.orElse(() -&gt; () -&gt; {});` (a little nutty, but an empty consumer decl) in order to pass it along.","body":"Note the composition here only guarantees that they are executed in-sequence, accepting the value one after the other. Realistically not seeing a benefit over a simple loop for immediate execution, but I do see benefit if you&#39;re trying to pass that <code>Consumer</code> along to something else. In which case, <code>.orElse(() -&gt; () -&gt; {});</code> (a little nutty, but an empty consumer decl) in order to pass it along."}],"tags":[],"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689946786,"creation_date":1689946786,"answer_id":76738515,"question_id":76738264,"body_markdown":"You could also use `Stream::reduce` to build a composed `Consumer`:\r\n\r\n```java\r\nconsumerList.stream()\r\n    .reduce(Consumer::andThen)\r\n    .ifPresent(consumer -&gt; consumer.accept(myValue));\r\n```\r\n","title":"Execute Consumers in a row","body":"<p>You could also use <code>Stream::reduce</code> to build a composed <code>Consumer</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>consumerList.stream()\n    .reduce(Consumer::andThen)\n    .ifPresent(consumer -&gt; consumer.accept(myValue));\n</code></pre>\n"}],"owner":{"account_id":9213198,"reputation":97,"user_id":15110545,"display_name":"user15110545"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76738305,"answer_count":2,"score":0,"last_activity_date":1689948962,"creation_date":1689944598,"question_id":76738264,"body_markdown":"I have a couple of `Consumer&lt;MyObject&gt;` classes I want to execute in sequence. I know I can do this with `myConsumer1.andThen(myConsumer2).accept(myvalue)`. How can I do this if I have a `List&lt;Consumer&lt;MyObject&gt;&gt;` and the number of consumers is unknown?\r\n\r\nHere is a for-loop solution that I think is not concise:\r\n\r\n```java\r\nConsumer&lt;MyObject&gt; result;\r\nfor (Consumer&lt;MyObject&gt; consumer : consumers) {\r\n    if(result == null) {\r\n        result = consumer;\r\n    } else {\r\n        result.andThen(consumer);\r\n    }\r\n}\r\nresult.apply(myvalue);\r\n```","title":"Execute Consumers in a row","body":"<p>I have a couple of <code>Consumer&lt;MyObject&gt;</code> classes I want to execute in sequence. I know I can do this with <code>myConsumer1.andThen(myConsumer2).accept(myvalue)</code>. How can I do this if I have a <code>List&lt;Consumer&lt;MyObject&gt;&gt;</code> and the number of consumers is unknown?</p>\n<p>Here is a for-loop solution that I think is not concise:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Consumer&lt;MyObject&gt; result;\nfor (Consumer&lt;MyObject&gt; consumer : consumers) {\n    if(result == null) {\n        result = consumer;\n    } else {\n        result.andThen(consumer);\n    }\n}\nresult.apply(myvalue);\n</code></pre>\n"},{"tags":["java","unit-testing","jmockit"],"owner":{"account_id":3686002,"reputation":531,"user_id":3069750,"accept_rate":64,"display_name":"Neuromante"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689948902,"creation_date":1689948564,"question_id":76738737,"body_markdown":"I have this setup:\r\n\r\n    @Tested\r\n    private ClassUnderTest classUnderTest;\r\n\r\n    @Mocked\r\n    private MockedType1 mockedType1;\r\n\r\n    @Mocked\r\n    private MockedType2 mockedType2;\r\n\r\n    public class CustomExpectations extends Expectations {\r\n    \r\n        public CustomExpectations() {\r\n            mockedType1.function1();\r\n            result = result1;\r\n            \r\n            result1.function2();\r\n            result = mockedType2;\r\n\r\n            mockedType2.functionMockedType2();\r\n            result = result2;\r\n        }\r\n    }\r\n\r\nThen, I have some tests that use this CustomExpectations class to do some setup, and then a more generic inline expectation with the rest of the code covered. The issue I&#39;m finding is that, when the expectation \r\n\r\n            mockedType2.functionMockedType2();\r\n            result = result2;\r\n\r\nis on the CustomExpectations class, the function call always returns null. If I move that expectation to the inline expectation, it works fine.\r\n\r\nIt is possible to do what I&#39;m trying to do? I&#39;ve tried to pass mockedType2 as a parameters to the CustomExpectations, but it still returns null.","title":"JMockit: Special cases for reusing expectations","body":"<p>I have this setup:</p>\n<pre><code>@Tested\nprivate ClassUnderTest classUnderTest;\n\n@Mocked\nprivate MockedType1 mockedType1;\n\n@Mocked\nprivate MockedType2 mockedType2;\n\npublic class CustomExpectations extends Expectations {\n\n    public CustomExpectations() {\n        mockedType1.function1();\n        result = result1;\n        \n        result1.function2();\n        result = mockedType2;\n\n        mockedType2.functionMockedType2();\n        result = result2;\n    }\n}\n</code></pre>\n<p>Then, I have some tests that use this CustomExpectations class to do some setup, and then a more generic inline expectation with the rest of the code covered. The issue I'm finding is that, when the expectation</p>\n<pre><code>        mockedType2.functionMockedType2();\n        result = result2;\n</code></pre>\n<p>is on the CustomExpectations class, the function call always returns null. If I move that expectation to the inline expectation, it works fine.</p>\n<p>It is possible to do what I'm trying to do? I've tried to pass mockedType2 as a parameters to the CustomExpectations, but it still returns null.</p>\n"},{"tags":["java","spring-boot","graalvm"],"comments":[{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1681666027,"post_id":76026874,"comment_id":134089684,"body_markdown":"delete maven-jar-plugin which is not required for spring nor graalvm.","body":"delete maven-jar-plugin which is not required for spring nor graalvm."}],"answers":[{"tags":[],"owner":{"account_id":14446626,"reputation":2578,"user_id":10435528,"display_name":"devatherock"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689948686,"creation_date":1689948686,"answer_id":76738750,"question_id":76026874,"body_markdown":"The error you are seeing is due to the fact that the executable fat jar generated by the `spring-boot` maven plugin doesn&#39;t have the main class in the path `com/example/Main`. The class ends up being located inside `BOOT-INF/classes/com/example/Main` which gets loaded using spring-boot&#39;s own main class `org.springframework.boot.loader.JarLauncher`. Instead of using the spring boot plugin to generate the fat jar, you can use the `maven-shade` plugin in which case the main class would be present in the expected path.\r\n\r\n**Shade plugin usage:**\r\n\r\n```xml\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.5.0&lt;/version&gt;\r\n        &lt;executions&gt;\r\n            &lt;execution&gt;\r\n                &lt;phase&gt;package&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;shade&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n```\r\n\r\nAfter using the shade plugin, instead of the spring-boot plugin, I didn&#39;t get this error and I was able to generate the native image successfully with a command like below:\r\n\r\n```\r\nnative-image --no-fallback -J-Xmx3072m -H:Name=springbootdemo -cp target/spring-boot-demo-0.0.1-SNAPSHOT.jar io.github.devatherock.Application\r\n```\r\n\r\nThe generated native image did run into an exception when executing, but that is probably related to missing reflection config. You can find the sample application on [github](https://github.com/devatherock/spring-boot-demo/tree/maven-graal)","title":"GraalVM Error: Main entry point class &#39;org.example.Main&#39; neither found on the classpath","body":"<p>The error you are seeing is due to the fact that the executable fat jar generated by the <code>spring-boot</code> maven plugin doesn't have the main class in the path <code>com/example/Main</code>. The class ends up being located inside <code>BOOT-INF/classes/com/example/Main</code> which gets loaded using spring-boot's own main class <code>org.springframework.boot.loader.JarLauncher</code>. Instead of using the spring boot plugin to generate the fat jar, you can use the <code>maven-shade</code> plugin in which case the main class would be present in the expected path.</p>\n<p><strong>Shade plugin usage:</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.5.0&lt;/version&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;phase&gt;package&lt;/phase&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;shade&lt;/goal&gt;\n                &lt;/goals&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;\n    &lt;/plugin&gt;\n</code></pre>\n<p>After using the shade plugin, instead of the spring-boot plugin, I didn't get this error and I was able to generate the native image successfully with a command like below:</p>\n<pre><code>native-image --no-fallback -J-Xmx3072m -H:Name=springbootdemo -cp target/spring-boot-demo-0.0.1-SNAPSHOT.jar io.github.devatherock.Application\n</code></pre>\n<p>The generated native image did run into an exception when executing, but that is probably related to missing reflection config. You can find the sample application on <a href=\"https://github.com/devatherock/spring-boot-demo/tree/maven-graal\" rel=\"nofollow noreferrer\">github</a></p>\n"}],"owner":{"account_id":28287609,"reputation":21,"user_id":21628283,"display_name":"Andrey Picasso"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1560,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689948686,"creation_date":1681636738,"question_id":76026874,"body_markdown":"I have a problem. I want to build a native -image Jar file, for this I write this command\r\n```\r\nnative-image --no-server -cp C:\\Users\\Andrey\\IdeaProjects\\example\\target\\example-0.0.1-SNAPSHOT.jar org.example.Main\r\n```\r\nI am writing all this in the program &quot;x64 NATIVE Tools Command Prompt for VS 2022&quot;. It is running on behalf of my administrator. After entering the command, I get the error:\r\n```\r\n========================================================================================================================\r\nGraalVM Native Image: Generating &#39;org.example.main&#39; (executable)...\r\n========================================================================================================================\r\n[1/7] Initializing...                                                                                    (0,0s @ 0,13GB)\r\nError: Main entry point class &#39;org.example.Main&#39; neither found on the classpath nor on the modulepath.\r\nclasspath: &#39;C:\\Users\\Andrey\\IdeaProjects\\example\\target\\example-0.0.1-SNAPSHOT.jar&#39;\r\nmodulepath: &#39;C:\\Program Files (x86)\\graalvm-ce-java17-22.3.1\\lib\\svm\\library-support.jar&#39;\r\nError: Use -H:+ReportExceptionStackTraces to print stacktrace of underlying exception\r\nError: Image build request failed with exit status 1\r\n```\r\nBut my directories look like this:\r\n[enter image description here](https://i.stack.imgur.com/QavbI.png)\r\n\r\nHelp me please. Ordinary non-SPRING applications are quietly building\r\nMy pom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.5&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;org&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;example&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;example&lt;/name&gt;\r\n\t&lt;description&gt;example&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;start-class&gt;org.example.Main&lt;/start-class&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.2.0&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;archive&gt;\r\n\t\t\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t\t\t&lt;mainClass&gt;org.example.Main&lt;/mainClass&gt;\r\n\t\t\t\t\t\t&lt;/manifest&gt;\r\n\t\t\t\t\t&lt;/archive&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\njava - version:\r\n```\r\nopenjdk version &quot;17.0.6&quot; 2023-01-17\r\nOpenJDK Runtime Environment GraalVM CE 22.3.1 (build 17.0.6+10-jvmci-22.3-b13)\r\nOpenJDK 64-Bit Server VM GraalVM CE 22.3.1 (build 17.0.6+10-jvmci-22.3-b13, mixed mode, sharing)\r\n```\r\n\r\n\r\n","title":"GraalVM Error: Main entry point class &#39;org.example.Main&#39; neither found on the classpath","body":"<p>I have a problem. I want to build a native -image Jar file, for this I write this command</p>\n<pre><code>native-image --no-server -cp C:\\Users\\Andrey\\IdeaProjects\\example\\target\\example-0.0.1-SNAPSHOT.jar org.example.Main\n</code></pre>\n<p>I am writing all this in the program &quot;x64 NATIVE Tools Command Prompt for VS 2022&quot;. It is running on behalf of my administrator. After entering the command, I get the error:</p>\n<pre><code>========================================================================================================================\nGraalVM Native Image: Generating 'org.example.main' (executable)...\n========================================================================================================================\n[1/7] Initializing...                                                                                    (0,0s @ 0,13GB)\nError: Main entry point class 'org.example.Main' neither found on the classpath nor on the modulepath.\nclasspath: 'C:\\Users\\Andrey\\IdeaProjects\\example\\target\\example-0.0.1-SNAPSHOT.jar'\nmodulepath: 'C:\\Program Files (x86)\\graalvm-ce-java17-22.3.1\\lib\\svm\\library-support.jar'\nError: Use -H:+ReportExceptionStackTraces to print stacktrace of underlying exception\nError: Image build request failed with exit status 1\n</code></pre>\n<p>But my directories look like this:\n<a href=\"https://i.stack.imgur.com/QavbI.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Help me please. Ordinary non-SPRING applications are quietly building\nMy pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.5&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;org&lt;/groupId&gt;\n    &lt;artifactId&gt;example&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;example&lt;/name&gt;\n    &lt;description&gt;example&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;start-class&gt;org.example.Main&lt;/start-class&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n                &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;mainClass&gt;org.example.Main&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>java - version:</p>\n<pre><code>openjdk version &quot;17.0.6&quot; 2023-01-17\nOpenJDK Runtime Environment GraalVM CE 22.3.1 (build 17.0.6+10-jvmci-22.3-b13)\nOpenJDK 64-Bit Server VM GraalVM CE 22.3.1 (build 17.0.6+10-jvmci-22.3-b13, mixed mode, sharing)\n</code></pre>\n"},{"tags":["java","google-cloud-platform","google-bigquery"],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1689900675,"post_id":76734095,"comment_id":135282210,"body_markdown":"In other words pagination doesn&#39;t work?","body":"In other words pagination doesn&#39;t work?"},{"owner":{"account_id":16845,"reputation":5501,"user_id":37134,"accept_rate":80,"display_name":"Sophie Gage"},"score":0,"creation_date":1689948702,"post_id":76734095,"comment_id":135289399,"body_markdown":"That&#39;s about what I thought was happening, but I couldn&#39;t find docs on this. Can you point me to them please?","body":"That&#39;s about what I thought was happening, but I couldn&#39;t find docs on this. Can you point me to them please?"}],"tags":[],"owner":{"account_id":25595958,"reputation":1,"user_id":19371728,"display_name":"Poala Astrid"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689892357,"creation_date":1689892357,"answer_id":76734095,"question_id":76677737,"body_markdown":"The issue you are encountering with duplicate and missing rows when reading data from BigQuery using TableResult.iterateAll() is likely related to the way pagination is handled and how the query results are ordered. As you mentioned that you get the correct total number of rows, it indicates that the issue is not with the query itself but likely with the pagination.\n\n`TableResult.iterateAll()` internally handles pagination to retrieve all the rows from the query results. When the result set is large, BigQuery may split the results into **multiple pages**. As you iterate through these pages, it&#39;s possible for some rows to appear more than once or be skipped altogether if there are overlapping pages or if the pagination mechanism encounters any issues.\n\nYou can also modify your query to include an `ORDER BY` clause based on a unique identifier or a stable column in your dataset. This will ensure consistent ordering of the results and may help eliminate the issue of duplicates. Using explicit ordering in your query should provide a more consistent and reliable result.\n","title":"BigQuery Java read reliability for larger queries","body":"<p>The issue you are encountering with duplicate and missing rows when reading data from BigQuery using TableResult.iterateAll() is likely related to the way pagination is handled and how the query results are ordered. As you mentioned that you get the correct total number of rows, it indicates that the issue is not with the query itself but likely with the pagination.</p>\n<p><code>TableResult.iterateAll()</code> internally handles pagination to retrieve all the rows from the query results. When the result set is large, BigQuery may split the results into <strong>multiple pages</strong>. As you iterate through these pages, it's possible for some rows to appear more than once or be skipped altogether if there are overlapping pages or if the pagination mechanism encounters any issues.</p>\n<p>You can also modify your query to include an <code>ORDER BY</code> clause based on a unique identifier or a stable column in your dataset. This will ensure consistent ordering of the results and may help eliminate the issue of duplicates. Using explicit ordering in your query should provide a more consistent and reliable result.</p>\n"}],"owner":{"account_id":16845,"reputation":5501,"user_id":37134,"accept_rate":80,"display_name":"Sophie Gage"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76734095,"answer_count":1,"score":2,"last_activity_date":1689948657,"creation_date":1689239579,"question_id":76677737,"body_markdown":"I am reading 20,000+ rows of data from BigQuery in Java and using `TableResult.iterateAll()` to iterate through these. I am finding that a handful of the rows are returned twice and some are not returned at all by the iterator. I get the correct total number of rows.\r\n\r\nThe input rows include two arrays of STRUCTs so I wonder if I am hitting a size constraint. How can I verify this, or if not, why is this happening?\r\n\r\nWhen I order my input query, the problem goes away, leading me to suspect that BQ is repeating the query internally after it hits some limit and getting the rows back in a slightly different order, unless the query is explicitly ordered.\r\n\r\n```java\r\nQueryJobConfiguration queryConfig = QueryJobConfiguration.newBuilder(query).setUseLegacySql(false).build();\r\nJobId jobId = JobId.of(UUID.randomUUID().toString());\r\nJob queryJob = bigQueryService.create(JobInfo.newBuilder(queryConfig).setJobId(jobId).build());\r\nTableResult queryResults = queryJob.getQueryResults();\r\n\r\nfor (FieldValueList row : queryResult.iterateAll()) {\r\n    // Process row\r\n}\r\n```","title":"BigQuery Java read reliability for larger queries","body":"<p>I am reading 20,000+ rows of data from BigQuery in Java and using <code>TableResult.iterateAll()</code> to iterate through these. I am finding that a handful of the rows are returned twice and some are not returned at all by the iterator. I get the correct total number of rows.</p>\n<p>The input rows include two arrays of STRUCTs so I wonder if I am hitting a size constraint. How can I verify this, or if not, why is this happening?</p>\n<p>When I order my input query, the problem goes away, leading me to suspect that BQ is repeating the query internally after it hits some limit and getting the rows back in a slightly different order, unless the query is explicitly ordered.</p>\n<pre class=\"lang-java prettyprint-override\"><code>QueryJobConfiguration queryConfig = QueryJobConfiguration.newBuilder(query).setUseLegacySql(false).build();\nJobId jobId = JobId.of(UUID.randomUUID().toString());\nJob queryJob = bigQueryService.create(JobInfo.newBuilder(queryConfig).setJobId(jobId).build());\nTableResult queryResults = queryJob.getQueryResults();\n\nfor (FieldValueList row : queryResult.iterateAll()) {\n    // Process row\n}\n</code></pre>\n"},{"tags":["java","xml","fortify"],"answers":[{"tags":[],"owner":{"account_id":1898627,"reputation":547,"user_id":1715003,"accept_rate":63,"display_name":"Jack Parker"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689948433,"creation_date":1689948433,"answer_id":76738713,"question_id":76680788,"body_markdown":"This is how I resolved it.\r\n\r\n     &lt;http auto-config=&quot;true&quot; request-matcher=&quot;mvc&quot;&gt;\r\n     &lt;intercept-url pattern=&quot;/fubar.jsp&quot;  /&gt;\r\n     &lt;/http&gt;\r\n\r\nIt did leave me with an application context error that I had to go about resolving later on.","title":"How to Convert Ant Matcher to Spring MVC Matchers?","body":"<p>This is how I resolved it.</p>\n<pre><code> &lt;http auto-config=&quot;true&quot; request-matcher=&quot;mvc&quot;&gt;\n &lt;intercept-url pattern=&quot;/fubar.jsp&quot;  /&gt;\n &lt;/http&gt;\n</code></pre>\n<p>It did leave me with an application context error that I had to go about resolving later on.</p>\n"}],"owner":{"account_id":1898627,"reputation":547,"user_id":1715003,"accept_rate":63,"display_name":"Jack Parker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76738713,"answer_count":1,"score":0,"last_activity_date":1689948433,"creation_date":1689260023,"question_id":76680788,"body_markdown":"I am working with Fortify on my latest project, and have a recommendation to update my pattern matcher from an Ant Matcher for Spring MVC endpoints to MVC request matchers. The actual text of the recommendation is this...\r\n\r\nFortify Recommendation:\r\n\r\nTo protect Spring MVC endpoints, use the MVC request matcher instead of the Ant matcher.\r\n\r\nEvery example of the use of MVC matchers is in a Java context, and this file is an XML file, and the lines that Fortify is specifically calling out are formatted like this. I am  not sure what to update or do to get rid of this recommendation and would take any suggestions.\r\n\r\n    &lt;http pattern=&quot;/fu.jsp&quot; sfuecurity=&quot;none&quot; /&gt;\r\n\t&lt;http pattern=&quot;/bar/**&quot; security=&quot;none&quot; /&gt;\r\n\t&lt;intercept-url pattern=&quot;/fubarLogins&quot; access=&quot;allAccess&quot; /&gt;","title":"How to Convert Ant Matcher to Spring MVC Matchers?","body":"<p>I am working with Fortify on my latest project, and have a recommendation to update my pattern matcher from an Ant Matcher for Spring MVC endpoints to MVC request matchers. The actual text of the recommendation is this...</p>\n<p>Fortify Recommendation:</p>\n<p>To protect Spring MVC endpoints, use the MVC request matcher instead of the Ant matcher.</p>\n<p>Every example of the use of MVC matchers is in a Java context, and this file is an XML file, and the lines that Fortify is specifically calling out are formatted like this. I am  not sure what to update or do to get rid of this recommendation and would take any suggestions.</p>\n<pre><code>&lt;http pattern=&quot;/fu.jsp&quot; sfuecurity=&quot;none&quot; /&gt;\n&lt;http pattern=&quot;/bar/**&quot; security=&quot;none&quot; /&gt;\n&lt;intercept-url pattern=&quot;/fubarLogins&quot; access=&quot;allAccess&quot; /&gt;\n</code></pre>\n"},{"tags":["java","hex","decimal","number-systems"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1689800811,"post_id":76725182,"comment_id":135266760,"body_markdown":"`String.valueOf(n)` Um, if `n` is your input, it already is &quot;decimal.&quot;  Just use it.","body":"<code>String.valueOf(n)</code> Um, if <code>n</code> is your input, it already is &quot;decimal.&quot;  Just use it."},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":0,"creation_date":1689800887,"post_id":76725182,"comment_id":135266770,"body_markdown":"those 2 things don&#39;t do the same thing. In fact, I&#39;m not sure your second function does anything at all?","body":"those 2 things don&#39;t do the same thing. In fact, I&#39;m not sure your second function does anything at all?"},{"owner":{"account_id":28919003,"reputation":11,"user_id":22150393,"display_name":"user22150393"},"score":0,"creation_date":1689800977,"post_id":76725182,"comment_id":135266789,"body_markdown":"@markspace changed the post","body":"@markspace changed the post"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1689801004,"post_id":76725182,"comment_id":135266794,"body_markdown":"It&#39;s still decimal.  The `0x` part does the conversion for you.  In other words if you print that value it&#39;ll print &quot;16&quot;.","body":"It&#39;s still decimal.  The <code>0x</code> part does the conversion for you.  In other words if you print that value it&#39;ll print &quot;16&quot;."},{"owner":{"account_id":28919003,"reputation":11,"user_id":22150393,"display_name":"user22150393"},"score":0,"creation_date":1689801094,"post_id":76725182,"comment_id":135266810,"body_markdown":"@markspace I know, but I don&#39;t specify the number in advance, I don&#39;t know it","body":"@markspace I know, but I don&#39;t specify the number in advance, I don&#39;t know it"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1689801157,"post_id":76725182,"comment_id":135266818,"body_markdown":"You&#39;re not making any sense.  I think you&#39;ll most likely need to clarify what your input is, but if it&#39;s a &quot;number&quot; then it&#39;s just a number and decimal or hex doesn&#39;t matter until you choose to print it.  Numbers internally are all the same.","body":"You&#39;re not making any sense.  I think you&#39;ll most likely need to clarify what your input is, but if it&#39;s a &quot;number&quot; then it&#39;s just a number and decimal or hex doesn&#39;t matter until you choose to print it.  Numbers internally are all the same."},{"owner":{"account_id":23428052,"reputation":6895,"user_id":17487348,"display_name":"Mushroomator"},"score":7,"creation_date":1689801186,"post_id":76725182,"comment_id":135266826,"body_markdown":"Hexadecimal and decimal as well as binary are just different representations of the same number. You cannot convert from an *hexadecimal int* to a *decimal int* because there is no such thing as a *hexadecimal int* or *decimal int*. There is only one `int` datatype which will be stored in binary, the rest is just how it&#39;s represented as a String.","body":"Hexadecimal and decimal as well as binary are just different representations of the same number. You cannot convert from an <i>hexadecimal int</i> to a <i>decimal int</i> because there is no such thing as a <i>hexadecimal int</i> or <i>decimal int</i>. There is only one <code>int</code> datatype which will be stored in binary, the rest is just how it&#39;s represented as a String."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1689801611,"post_id":76725182,"comment_id":135266890,"body_markdown":"Here is a 100% correct line of code that will take `int hex = 0x10` and properly give you the value of that in hexadecimal.  This line of code is _absolutely correct_ and will be correct for all inputs.  Here it is: `int decimal = hex;`  I can even guarantee that it&#39;ll be extremely efficient, and a proper benchmark will show you that it takes zero nanoseconds.","body":"Here is a 100% correct line of code that will take <code>int hex = 0x10</code> and properly give you the value of that in hexadecimal.  This line of code is <i>absolutely correct</i> and will be correct for all inputs.  Here it is: <code>int decimal = hex;</code>  I can even guarantee that it&#39;ll be extremely efficient, and a proper benchmark will show you that it takes zero nanoseconds."},{"owner":{"account_id":20470,"reputation":21695,"user_id":48933,"accept_rate":90,"display_name":"Neil Coffey"},"score":0,"creation_date":1689801760,"post_id":76725182,"comment_id":135266916,"body_markdown":"Have you determined that Integer.parseInt(x, 16) is actually using &quot;too many resources&quot; for your intended purpose (and identified what said &quot;resources&quot; actually are...?).","body":"Have you determined that Integer.parseInt(x, 16) is actually using &quot;too many resources&quot; for your intended purpose (and identified what said &quot;resources&quot; actually are...?)."},{"owner":{"account_id":28919003,"reputation":11,"user_id":22150393,"display_name":"user22150393"},"score":0,"creation_date":1689801862,"post_id":76725182,"comment_id":135266933,"body_markdown":"@NeilCoffey In my case, this will be a load on the garbage collector, since the conversion to String requires the creation of an array","body":"@NeilCoffey In my case, this will be a load on the garbage collector, since the conversion to String requires the creation of an array"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1689801910,"post_id":76725182,"comment_id":135266940,"body_markdown":"&quot;convert from hexadecimal to decimal java&quot; makes sense if your input is in character format, and you want the output to be in character format.  But, your example code doesn&#39;t show or otherwise indicate that is the case. Note I deleted both occurrences of &quot;integer&quot; in the quote.","body":"&quot;convert from hexadecimal to decimal java&quot; makes sense if your input is in character format, and you want the output to be in character format.  But, your example code doesn&#39;t show or otherwise indicate that is the case. Note I deleted both occurrences of &quot;integer&quot; in the quote."},{"owner":{"account_id":28919003,"reputation":11,"user_id":22150393,"display_name":"user22150393"},"score":0,"creation_date":1689802209,"post_id":76725182,"comment_id":135266976,"body_markdown":"@OldDogProgrammer This is the point that the Integer value is in the hexadecimal system in advance, and I need to convert to the decimal system","body":"@OldDogProgrammer This is the point that the Integer value is in the hexadecimal system in advance, and I need to convert to the decimal system"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1689802355,"post_id":76725182,"comment_id":135266990,"body_markdown":"If we are confused, it is because you are not telling us enough about what it is you are trying to do, or what problem you are actually trying to solve.","body":"If we are confused, it is because you are not telling us enough about what it is you are trying to do, or what problem you are actually trying to solve."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1689802671,"post_id":76725182,"comment_id":135267022,"body_markdown":"With your update, how would it convert a hexValue of 10?","body":"With your update, how would it convert a hexValue of 10?"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1689803449,"post_id":76725182,"comment_id":135267121,"body_markdown":"`int hex = 0x10;`, `int hex = 020;`, `int hex = 0b10000`, and `int hex = 16;` all do *exactly* the same thing.","body":"<code>int hex = 0x10;</code>, <code>int hex = 020;</code>, <code>int hex = 0b10000</code>, and <code>int hex = 16;</code> all do <i>exactly</i> the same thing."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1689803645,"post_id":76725182,"comment_id":135267147,"body_markdown":"I guess they want to convert `0x10` to `10`, `0x16` to `16`, etc. for some reason, but it’s unclear how to handle hexadecimal digits greater than 9.","body":"I guess they want to convert <code>0x10</code> to <code>10</code>, <code>0x16</code> to <code>16</code>, etc. for some reason, but it’s unclear how to handle hexadecimal digits greater than 9."},{"owner":{"account_id":28919003,"reputation":11,"user_id":22150393,"display_name":"user22150393"},"score":0,"creation_date":1689803856,"post_id":76725182,"comment_id":135267168,"body_markdown":"@TimMoore It&#39;s true. I&#39;m already confused myself, but that&#39;s what I wanted","body":"@TimMoore It&#39;s true. I&#39;m already confused myself, but that&#39;s what I wanted"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1689804318,"post_id":76725182,"comment_id":135267230,"body_markdown":"Suggested reading: [How to Ask a Good Queston](https://stackoverflow.com/help/how-to-ask) and [Complete, Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example)  . The example you have given is sub-minimal and incomplete.","body":"Suggested reading: <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask a Good Queston</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Complete, Minimal, Reproducible Example</a>  . The example you have given is sub-minimal and incomplete."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1689805601,"post_id":76725182,"comment_id":135267365,"body_markdown":"I don’t know what “ a full-fledged index for the array” means. What array? Why are its indices specified in this way? What should happen if the number provided can’t be converted this way?","body":"I don’t know what “ a full-fledged index for the array” means. What array? Why are its indices specified in this way? What should happen if the number provided can’t be converted this way?"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":3,"creation_date":1689805853,"post_id":76725182,"comment_id":135267399,"body_markdown":"I suspect this is an [XY Problem](https://en.wikipedia.org/wiki/XY_problem).   The explanations need to be expanded. The examples need to be expanded. We need more explanation of what is trying to be done. Where do the numbers come from?  If they are from a file, show code that reads the file. Show an example of the contents of the file. Show code for the array that needs to be indexed.","body":"I suspect this is an <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">XY Problem</a>.   The explanations need to be expanded. The examples need to be expanded. We need more explanation of what is trying to be done. Where do the numbers come from?  If they are from a file, show code that reads the file. Show an example of the contents of the file. Show code for the array that needs to be indexed."},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":1,"creation_date":1689822608,"post_id":76725182,"comment_id":135268777,"body_markdown":"When you say you want to get the value &#39;10&#39; from `int hex = 16`, what value do you mean?  Do you want the value we call &#39;ten&#39; or the value we call &#39;sixteen&#39;, both of which can represented by the sequence of characters &#39;digit one followed by digit zero&#39;.  As others have said, you are confusing the actual number, which is fixed at sixteen, with some sequence of characters, which sequence depends on how you decide to convert the number to characters.","body":"When you say you want to get the value &#39;10&#39; from <code>int hex = 16</code>, what value do you mean?  Do you want the value we call &#39;ten&#39; or the value we call &#39;sixteen&#39;, both of which can represented by the sequence of characters &#39;digit one followed by digit zero&#39;.  As others have said, you are confusing the actual number, which is fixed at sixteen, with some sequence of characters, which sequence depends on how you decide to convert the number to characters."},{"owner":{"account_id":6128339,"reputation":4087,"user_id":4779472,"accept_rate":89,"display_name":"Rohit Gupta"},"score":0,"creation_date":1690262397,"post_id":76725182,"comment_id":135324751,"body_markdown":"Why have you removed your code ?","body":"Why have you removed your code ?"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1690303623,"post_id":76725182,"comment_id":135333454,"body_markdown":"Do you still want help with this? If so, you need to edit the question again. Go back, start at the beginning. Tell us where these numbers come from. Explain the problem you have with indexing the array with these numbers.","body":"Do you still want help with this? If so, you need to edit the question again. Go back, start at the beginning. Tell us where these numbers come from. Explain the problem you have with indexing the array with these numbers."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1690351420,"post_id":76725182,"comment_id":135339373,"body_markdown":"Your revision does not explain why you think you need the number `10` to index your array, or even what you think the number `10` is. Please show much more of your code: where the number comes from, and what you do with it.","body":"Your revision does not explain why you think you need the number <code>10</code> to index your array, or even what you think the number <code>10</code> is. Please show much more of your code: where the number comes from, and what you do with it."}],"answers":[{"comments":[{"owner":{"account_id":28919003,"reputation":11,"user_id":22150393,"display_name":"user22150393"},"score":0,"creation_date":1689801313,"post_id":76725233,"comment_id":135266845,"body_markdown":"I want to convert a hexadecimal integer to decimal to use it as an index to an array","body":"I want to convert a hexadecimal integer to decimal to use it as an index to an array"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":3,"creation_date":1689801399,"post_id":76725233,"comment_id":135266864,"body_markdown":"There is no such thing as a &quot;hexadecimal integer&quot;.  It&#39;s all just integers.  Just try using the number without conversion, tell us the result.  It&#39;ll probably be correct.","body":"There is no such thing as a &quot;hexadecimal integer&quot;.  It&#39;s all just integers.  Just try using the number without conversion, tell us the result.  It&#39;ll probably be correct."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":3,"creation_date":1689801411,"post_id":76725233,"comment_id":135266866,"body_markdown":"As I said, there is no such thing as hexadecimal integer.  It is just an integer and is best described as a binary value.  However, math operations treat it as decimal by default.","body":"As I said, there is no such thing as hexadecimal integer.  It is just an integer and is best described as a binary value.  However, math operations treat it as decimal by default."},{"owner":{"account_id":28919003,"reputation":11,"user_id":22150393,"display_name":"user22150393"},"score":0,"creation_date":1689801700,"post_id":76725233,"comment_id":135266906,"body_markdown":"I need to convert a hexadecimal number to decimal like in the first example, but without using the String conversion. I know in advance that it is in the hexadecimal system, but I do not know the original number in decimal","body":"I need to convert a hexadecimal number to decimal like in the first example, but without using the String conversion. I know in advance that it is in the hexadecimal system, but I do not know the original number in decimal"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1689803639,"post_id":76725233,"comment_id":135267146,"body_markdown":"@user22150393 &quot;_I know in advance that it is in the hexadecimal system_&quot; – What does this mean? Where are you getting this number? If it&#39;s already an `int`, then **there&#39;s no conversion necessary**. In fact, in that context, converting the base has no meaning. If you have e.g., `int d = 255;` (decimal), `int h = 0xFF;` (hex), `int o = 0377;` (octal), and `int b = 0b11111111;` (binary) then all four are the **same number** already. You could substitute any of the four variables with another in a mathematical expression and get the same answer.","body":"@user22150393 &quot;<i>I know in advance that it is in the hexadecimal system</i>&quot; – What does this mean? Where are you getting this number? If it&#39;s already an <code>int</code>, then <b>there&#39;s no conversion necessary</b>. In fact, in that context, converting the base has no meaning. If you have e.g., <code>int d = 255;</code> (decimal), <code>int h = 0xFF;</code> (hex), <code>int o = 0377;</code> (octal), and <code>int b = 0b11111111;</code> (binary) then all four are the <b>same number</b> already. You could substitute any of the four variables with another in a mathematical expression and get the same answer."}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689948297,"creation_date":1689801213,"answer_id":76725233,"question_id":76725182,"body_markdown":"Hex, binary, octal, etc are all visual presentations of a number in a specific base. Any `int` is already in &quot;binary.&quot;  It could be +5 (1) and ground (0) if you want to go that deep into it.\r\n\r\nSo converting an `int` to another base does not make sense unless it is for display purposes.\r\n\r\nOr given a string in a particular base and converting that to an `int` so it can be used in mathematical expressions or data structures is also an option.\r\n\r\nPer your comment I still believe you are somewhat confused about numeric representation.  But here is how to convert a `hex string` to an `int`. This does not handle signed values.\r\n```\r\nString hexString = &quot;2A4&quot;;\r\n \r\nString hexDigits = &quot;0123456789ABCDEF&quot;;\r\nint result = 0;\r\nfor (char c : hexString.toCharArray()) {\r\n     result = result * 16 + hexDigits.indexOf(c);\r\n}\r\nSystem.out.println(result);\r\n```\r\nprints\r\n```\r\n676\r\n```\r\nAnd let me repeat that it does not make sense to try and convert any `int` from one base to an `int` in another base, as int&#39;s are not really in any base at all.  `ints` are treated as `decimal` by the compiler and we talk about them as though they are `binary` because it provides a common and accepted way to describe them.\r\n\r\n**Updated**\r\n\r\nYou may want to check out [Integer.decode](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Integer.html#decode(java.lang.String)). If you are reading in encoded strings with prefixes of `x,X, and #` for hex ,`0` for octal, and a non-zero digit for decimal, you can do the following.\r\n```\r\nString [] codes = {&quot;0x11&quot;, &quot;021&quot;, &quot;#11&quot;, &quot;17&quot;};\r\n \r\nfor (String code : codes) {\r\n     System.out.println(Integer.decode(code));\r\n}\r\n```\r\nprints\r\n``` \r\n17\r\n17\r\n17\r\n17\r\n \r\n","title":"Convert from hexadecimal integer to decimal java","body":"<p>Hex, binary, octal, etc are all visual presentations of a number in a specific base. Any <code>int</code> is already in &quot;binary.&quot;  It could be +5 (1) and ground (0) if you want to go that deep into it.</p>\n<p>So converting an <code>int</code> to another base does not make sense unless it is for display purposes.</p>\n<p>Or given a string in a particular base and converting that to an <code>int</code> so it can be used in mathematical expressions or data structures is also an option.</p>\n<p>Per your comment I still believe you are somewhat confused about numeric representation.  But here is how to convert a <code>hex string</code> to an <code>int</code>. This does not handle signed values.</p>\n<pre><code>String hexString = &quot;2A4&quot;;\n \nString hexDigits = &quot;0123456789ABCDEF&quot;;\nint result = 0;\nfor (char c : hexString.toCharArray()) {\n     result = result * 16 + hexDigits.indexOf(c);\n}\nSystem.out.println(result);\n</code></pre>\n<p>prints</p>\n<pre><code>676\n</code></pre>\n<p>And let me repeat that it does not make sense to try and convert any <code>int</code> from one base to an <code>int</code> in another base, as int's are not really in any base at all.  <code>ints</code> are treated as <code>decimal</code> by the compiler and we talk about them as though they are <code>binary</code> because it provides a common and accepted way to describe them.</p>\n<p><strong>Updated</strong></p>\n<p>You may want to check out <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Integer.html#decode(java.lang.String)\" rel=\"nofollow noreferrer\">Integer.decode</a>. If you are reading in encoded strings with prefixes of <code>x,X, and #</code> for hex ,<code>0</code> for octal, and a non-zero digit for decimal, you can do the following.</p>\n<pre><code>String [] codes = {&quot;0x11&quot;, &quot;021&quot;, &quot;#11&quot;, &quot;17&quot;};\n \nfor (String code : codes) {\n     System.out.println(Integer.decode(code));\n}\n</code></pre>\n<p>prints</p>\n<pre><code>17\n17\n17\n17\n \n</code></pre>\n"}],"owner":{"account_id":28919003,"reputation":11,"user_id":22150393,"display_name":"user22150393"},"comment_count":24,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1689801781,"answer_count":1,"score":-3,"last_activity_date":1689948297,"creation_date":1689800541,"question_id":76725182,"body_markdown":"There are pre-translated numbers from hexadecimal to decimal. For example, 0x01, 0x10 and so on. I need to extract from it everything that is after x, so that I get a number that could fit as an index to the array.\r\n\r\nThe difficulty lies in the fact that the hex value is an Integer (NOT AS a String), that is, it is in this format:\r\n\r\n```\r\nint hexValue = 16; // 0x10 \r\n```\r\nAnd I need to get the answer 10.\r\n\r\nWhy is this necessary? I need the hexadecimal value to be a full-fledged index for the array","title":"Convert from hexadecimal integer to decimal java","body":"<p>There are pre-translated numbers from hexadecimal to decimal. For example, 0x01, 0x10 and so on. I need to extract from it everything that is after x, so that I get a number that could fit as an index to the array.</p>\n<p>The difficulty lies in the fact that the hex value is an Integer (NOT AS a String), that is, it is in this format:</p>\n<pre><code>int hexValue = 16; // 0x10 \n</code></pre>\n<p>And I need to get the answer 10.</p>\n<p>Why is this necessary? I need the hexadecimal value to be a full-fledged index for the array</p>\n"},{"tags":["java","vert.x"],"comments":[{"owner":{"account_id":10496592,"reputation":3058,"user_id":7736617,"display_name":"Arnaud Claudel"},"score":0,"creation_date":1689882733,"post_id":76732807,"comment_id":135280214,"body_markdown":"Does this answer your question? [Using Jackson ObjectMapper with Java 8 Optional values](https://stackoverflow.com/questions/25693309/using-jackson-objectmapper-with-java-8-optional-values)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/25693309/using-jackson-objectmapper-with-java-8-optional-values\">Using Jackson ObjectMapper with Java 8 Optional values</a>"},{"owner":{"account_id":2270024,"reputation":1657,"user_id":1997707,"accept_rate":80,"display_name":"John Mercier"},"score":0,"creation_date":1689945406,"post_id":76732807,"comment_id":135288689,"body_markdown":"@ArnaudClaudel partially. This is the right direction but how do I get the jdk8 module to work with vertx JsonObject?","body":"@ArnaudClaudel partially. This is the right direction but how do I get the jdk8 module to work with vertx JsonObject?"}],"answers":[{"tags":[],"owner":{"account_id":2270024,"reputation":1657,"user_id":1997707,"accept_rate":80,"display_name":"John Mercier"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689947936,"creation_date":1689947936,"answer_id":76738656,"question_id":76732807,"body_markdown":"Add support for Optional to the mapper used by vertx. This has to be done in the application and before running tests. As an example, it can be added to an `@Before` method in these tests.\r\n\r\n```\r\n    @Before\r\n    public void setup() {\r\n        DatabindCodec.mapper()\r\n            .registerModule(new ParameterNamesModule())\r\n            .registerModule(new Jdk8Module())\r\n            .registerModule(new JavaTimeModule());\r\n    }\r\n```","title":"How to test vertx serialization/deserialization","body":"<p>Add support for Optional to the mapper used by vertx. This has to be done in the application and before running tests. As an example, it can be added to an <code>@Before</code> method in these tests.</p>\n<pre><code>    @Before\n    public void setup() {\n        DatabindCodec.mapper()\n            .registerModule(new ParameterNamesModule())\n            .registerModule(new Jdk8Module())\n            .registerModule(new JavaTimeModule());\n    }\n</code></pre>\n"}],"owner":{"account_id":2270024,"reputation":1657,"user_id":1997707,"accept_rate":80,"display_name":"John Mercier"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76738656,"answer_count":1,"score":0,"last_activity_date":1689947936,"creation_date":1689878013,"question_id":76732807,"body_markdown":"I&#39;m trying to test vertx mapping between JsonObject and a pojo. I added methods `fromJson` and `toJson` which will be added to json-mappers.properties. for use in vertx. The class is immutable and using lombok `@Value` and `@Builder`.\r\n\r\n```\r\n@Value\r\n@Jacksonized\r\n@Builder\r\npublic class AdSystem {\r\n    String version;\r\n    String system;\r\n\r\n    public Optional&lt;String&gt; getVersion() {\r\n        return Optional.ofNullable(version);\r\n    }\r\n\r\n    public Optional&lt;String&gt; getSystem() {\r\n        return Optional.ofNullable(system);\r\n    }\r\n\r\n    public JsonObject toJson() {\r\n        return JsonObject.mapFrom(this);\r\n    }\r\n\r\n    public static AdSystem fromJson(JsonObject jsonObject) {\r\n        return jsonObject.mapTo(AdSystem.class);\r\n    }\r\n}\r\n```\r\n\r\nWhen I test this deserialization works but serialization does not.\r\n\r\n```\r\n    @Test\r\n    public void toJson_passes() {\r\n        var system = new AdSystem(&quot;1&quot;, &quot;iabtechlab&quot;);\r\n        var json = system.toJson();\r\n        assertThat(json).isEqualTo(new JsonObject().put(&quot;version&quot;, &quot;1&quot;).put(&quot;system&quot;, &quot;iabtechlab&quot;));\r\n    }\r\n\r\n    @Test\r\n    public void fromJson_passes() {\r\n        var json = new JsonObject().put(&quot;version&quot;, &quot;1&quot;).put(&quot;system&quot;, &quot;iabtechlab&quot;);\r\n        var system = AdSystem.fromJson(json);\r\n        assertThat(system).isEqualTo(new AdSystem(&quot;1&quot;, &quot;iabtechlab&quot;));\r\n    }\r\n```\r\n\r\n`toJson` fails and this is the result.\r\n\r\n```\r\norg.junit.ComparisonFailure: \r\nExpected :{&quot;version&quot;:&quot;1&quot;,&quot;system&quot;:&quot;iabtechlab&quot;}\r\nActual   :{&quot;version&quot;:{&quot;empty&quot;:false,&quot;present&quot;:true},&quot;system&quot;:{&quot;empty&quot;:false,&quot;present&quot;:true}}\r\n```\r\n\r\nWhat am I doing wrong?","title":"How to test vertx serialization/deserialization","body":"<p>I'm trying to test vertx mapping between JsonObject and a pojo. I added methods <code>fromJson</code> and <code>toJson</code> which will be added to json-mappers.properties. for use in vertx. The class is immutable and using lombok <code>@Value</code> and <code>@Builder</code>.</p>\n<pre><code>@Value\n@Jacksonized\n@Builder\npublic class AdSystem {\n    String version;\n    String system;\n\n    public Optional&lt;String&gt; getVersion() {\n        return Optional.ofNullable(version);\n    }\n\n    public Optional&lt;String&gt; getSystem() {\n        return Optional.ofNullable(system);\n    }\n\n    public JsonObject toJson() {\n        return JsonObject.mapFrom(this);\n    }\n\n    public static AdSystem fromJson(JsonObject jsonObject) {\n        return jsonObject.mapTo(AdSystem.class);\n    }\n}\n</code></pre>\n<p>When I test this deserialization works but serialization does not.</p>\n<pre><code>    @Test\n    public void toJson_passes() {\n        var system = new AdSystem(&quot;1&quot;, &quot;iabtechlab&quot;);\n        var json = system.toJson();\n        assertThat(json).isEqualTo(new JsonObject().put(&quot;version&quot;, &quot;1&quot;).put(&quot;system&quot;, &quot;iabtechlab&quot;));\n    }\n\n    @Test\n    public void fromJson_passes() {\n        var json = new JsonObject().put(&quot;version&quot;, &quot;1&quot;).put(&quot;system&quot;, &quot;iabtechlab&quot;);\n        var system = AdSystem.fromJson(json);\n        assertThat(system).isEqualTo(new AdSystem(&quot;1&quot;, &quot;iabtechlab&quot;));\n    }\n</code></pre>\n<p><code>toJson</code> fails and this is the result.</p>\n<pre><code>org.junit.ComparisonFailure: \nExpected :{&quot;version&quot;:&quot;1&quot;,&quot;system&quot;:&quot;iabtechlab&quot;}\nActual   :{&quot;version&quot;:{&quot;empty&quot;:false,&quot;present&quot;:true},&quot;system&quot;:{&quot;empty&quot;:false,&quot;present&quot;:true}}\n</code></pre>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","jpa","spring-data-jpa","spring-data","eclipselink"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1663181574,"post_id":73719352,"comment_id":130181418,"body_markdown":"This is trivial in JPQL/SQL strings by building a string, or with criteria queries if you dynamically build the query. What you are asking though is how to do it statically with Spring generating the query for you - you cannot. You have to build the query yourself, adding in &#39;OR&#39; clauses for each pair of inputs.","body":"This is trivial in JPQL/SQL strings by building a string, or with criteria queries if you dynamically build the query. What you are asking though is how to do it statically with Spring generating the query for you - you cannot. You have to build the query yourself, adding in &#39;OR&#39; clauses for each pair of inputs."}],"answers":[{"tags":[],"owner":{"account_id":324951,"reputation":935,"user_id":6722664,"display_name":"Sagar Gandhi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663171211,"creation_date":1663171211,"answer_id":73719962,"question_id":73719352,"body_markdown":"I had same problem. I am writing the custom query using @Query to solve this problem. You can write custom where causes,\r\n\r\n      @Query(&quot;SELECT wftr FROM WorkflowActivityRequestEntity wftr WHERE wftr.status IN :status&quot;)\r\n    List&lt;WorkflowActivityRequestEntity&gt; findWorkflowActivityRequestsByStatus(\r\n            @Param(&quot;status&quot;)\r\n            List&lt;String&gt; status);\r\n\r\n    @Query(&quot;SELECT wftr FROM WorkflowActivityRequestEntity wftr WHERE wftr.owner NOT IN :owners&quot;)\r\n    List&lt;WorkflowActivityRequestEntity&gt; findWorkflowActivityRequestsNotOwnedBy(\r\n            @Param(&quot;owners&quot;)\r\n            List&lt;String&gt; owners);\r\n\r\n\r\nFor AND and OR combination you can also extend your repository interface with `JpaSpecificationExecutor`\r\n\r\nand then use Criteria builder. I referred https://www.baeldung.com/spring-data-criteria-queries while doing this in my projects.\r\n\r\nHope it helps.\r\n\r\n","title":"select rows using pair of columns with JPA (provider eclipselink) and Spring Data","body":"<p>I had same problem. I am writing the custom query using @Query to solve this problem. You can write custom where causes,</p>\n<pre><code>  @Query(&quot;SELECT wftr FROM WorkflowActivityRequestEntity wftr WHERE wftr.status IN :status&quot;)\nList&lt;WorkflowActivityRequestEntity&gt; findWorkflowActivityRequestsByStatus(\n        @Param(&quot;status&quot;)\n        List&lt;String&gt; status);\n\n@Query(&quot;SELECT wftr FROM WorkflowActivityRequestEntity wftr WHERE wftr.owner NOT IN :owners&quot;)\nList&lt;WorkflowActivityRequestEntity&gt; findWorkflowActivityRequestsNotOwnedBy(\n        @Param(&quot;owners&quot;)\n        List&lt;String&gt; owners);\n</code></pre>\n<p>For AND and OR combination you can also extend your repository interface with <code>JpaSpecificationExecutor</code></p>\n<p>and then use Criteria builder. I referred <a href=\"https://www.baeldung.com/spring-data-criteria-queries\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-data-criteria-queries</a> while doing this in my projects.</p>\n<p>Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":52517,"reputation":6279,"user_id":156973,"display_name":"izogfif"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689947383,"creation_date":1689947383,"answer_id":76738587,"question_id":73719352,"body_markdown":"Try this:\r\n\r\nCreate an `@Embeddable` class to hold your `col1` and `col2`:\r\n\r\n```lang-java\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Embeddable;\r\nimport java.io.Serializable;\r\nimport lombok.AccessLevel;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.EqualsAndHashCode;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\nimport lombok.ToString;\r\n\r\n@Embeddable\r\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\r\n@AllArgsConstructor\r\n@Getter\r\n@Setter(AccessLevel.PROTECTED)\r\n@EqualsAndHashCode\r\n@ToString\r\npublic class ColWrapper implements Serializable {\r\n  private @Column(name = &quot;col1&quot;) Integer col1;\r\n  private @Column(name = &quot;col2&quot;) Integer col2;\r\n}\r\n\r\n```\r\n\r\nAdd a field of this type in your entity:\r\n\r\n```lang-java\r\nimport jakarta.persistence.AttributeOverride;\r\nimport jakarta.persistence.AttributeOverrides;\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\nimport java.io.Serializable;\r\nimport lombok.AccessLevel;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\n\r\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\r\n@Getter\r\n// Fields should not be modifiable from outside, you can add\r\n// @Setter(AccessLevel.PUBLIC) on those fields that should be modifiable\r\n@Setter(AccessLevel.PACKAGE)\r\n@Table(name = &quot;t1&quot;)\r\n@Entity\r\npublic class T1Entity implements Serializable {\r\n  // Using &quot;strategy = GenerationType.IDENTITY&quot; to prevent Hibernate from \r\n  // creating columns in database upon initialization.\r\n  // Integer is used instead of int here and below to distinguish between\r\n  // uninitialized field and field that has value of 0.\r\n  private @Id @GeneratedValue(strategy = GenerationType.IDENTITY) Integer id;\r\n  private @Column Integer col1;\r\n  private @Column Integer col2;\r\n\r\n  // Needed only to add &quot;updatable=false&quot; and &quot;insertable=false&quot;\r\n  // on @Column annotations for ColWrapper. If you don&#39;t want to use\r\n  // ColWrapper anywhere else, you can add &quot;updatable = false&quot; and\r\n  // &quot;insertable = false&quot; in @Column annotations in ColWrapper declaration \r\n  // and omit the entire @AttributeOverrides annotation here\r\n  @AttributeOverrides({\r\n    @AttributeOverride(\r\n        name = &quot;col1&quot;,\r\n        column = @Column(name = &quot;col1&quot;, updatable = false, insertable = false)),\r\n    @AttributeOverride(\r\n        name = &quot;col2&quot;,\r\n        column = @Column(name = &quot;col2&quot;, updatable = false, insertable = false))\r\n  })\r\n  private ColWrapper colWrapper;\r\n\r\n  public T1Entity(int id, int col1, int col2) {\r\n    setId(id);\r\n    setCol1(col1);\r\n    setCol2(col2);\r\n    // Just for consistency\r\n    setColWrapper(new ColWrapper(col1, col2));\r\n  }\r\n```\r\n\r\nSpring Data JPA Repository code:\r\n```lang-java\r\nimport java.util.List;\r\nimport lombok.NonNull;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\n\r\npublic interface T1Repository extends JpaRepository&lt;T1Entity, Long&gt; {\r\n  @NonNull\r\n  List&lt;T1Entity&gt; findByColWrapperIn(@NonNull Iterable&lt;ColWrapper&gt; pairs);\r\n}\r\n\r\n```\r\n\r\nSample service:\r\n\r\n```java-lang\r\nimport java.util.List;\r\nimport lombok.NonNull;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.transaction.annotation.Transactional;\r\n\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class T1Service {\r\n  private final @NonNull T1Repository t1Repository;\r\n\r\n  @Transactional\r\n  public void test() {\r\n    final var result =\r\n        t1Repository.findByColWrapperIn(List.of(new ColWrapper(25, 661), new ColWrapper(89, 741)));\r\n    for (var entity : result) {\r\n      System.out.println(entity.getCol1() + &quot;, &quot; + entity.getCol2());\r\n    }\r\n  }\r\n}\r\n\r\n```\r\n\r\nCalling `test()` should result in this SQL request being (newlines added by me, you can view this SQL in logs if you enable `DEBUG`-level logging for `org.hibernate.SQL` logger):\r\n```lang-sql\r\nselect\r\nt1_0.id,\r\nt1_0.col1,\r\nt1_0.col2\r\nfrom t1 t1_0\r\nwhere (t1_0.col1,t1_0.col2) in ((?,?),(?,?))\r\n```\r\n\r\nConsole output:\r\n```\r\n25, 661\r\n89, 741\r\n```\r\n\r\nAnother way is to use specifications like mentioned in [this answer](https://stackoverflow.com/a/69736182/156973).","title":"select rows using pair of columns with JPA (provider eclipselink) and Spring Data","body":"<p>Try this:</p>\n<p>Create an <code>@Embeddable</code> class to hold your <code>col1</code> and <code>col2</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.persistence.Column;\nimport jakarta.persistence.Embeddable;\nimport java.io.Serializable;\nimport lombok.AccessLevel;\nimport lombok.AllArgsConstructor;\nimport lombok.EqualsAndHashCode;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\nimport lombok.ToString;\n\n@Embeddable\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\n@AllArgsConstructor\n@Getter\n@Setter(AccessLevel.PROTECTED)\n@EqualsAndHashCode\n@ToString\npublic class ColWrapper implements Serializable {\n  private @Column(name = &quot;col1&quot;) Integer col1;\n  private @Column(name = &quot;col2&quot;) Integer col2;\n}\n\n</code></pre>\n<p>Add a field of this type in your entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.persistence.AttributeOverride;\nimport jakarta.persistence.AttributeOverrides;\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\nimport java.io.Serializable;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\n@Getter\n// Fields should not be modifiable from outside, you can add\n// @Setter(AccessLevel.PUBLIC) on those fields that should be modifiable\n@Setter(AccessLevel.PACKAGE)\n@Table(name = &quot;t1&quot;)\n@Entity\npublic class T1Entity implements Serializable {\n  // Using &quot;strategy = GenerationType.IDENTITY&quot; to prevent Hibernate from \n  // creating columns in database upon initialization.\n  // Integer is used instead of int here and below to distinguish between\n  // uninitialized field and field that has value of 0.\n  private @Id @GeneratedValue(strategy = GenerationType.IDENTITY) Integer id;\n  private @Column Integer col1;\n  private @Column Integer col2;\n\n  // Needed only to add &quot;updatable=false&quot; and &quot;insertable=false&quot;\n  // on @Column annotations for ColWrapper. If you don't want to use\n  // ColWrapper anywhere else, you can add &quot;updatable = false&quot; and\n  // &quot;insertable = false&quot; in @Column annotations in ColWrapper declaration \n  // and omit the entire @AttributeOverrides annotation here\n  @AttributeOverrides({\n    @AttributeOverride(\n        name = &quot;col1&quot;,\n        column = @Column(name = &quot;col1&quot;, updatable = false, insertable = false)),\n    @AttributeOverride(\n        name = &quot;col2&quot;,\n        column = @Column(name = &quot;col2&quot;, updatable = false, insertable = false))\n  })\n  private ColWrapper colWrapper;\n\n  public T1Entity(int id, int col1, int col2) {\n    setId(id);\n    setCol1(col1);\n    setCol2(col2);\n    // Just for consistency\n    setColWrapper(new ColWrapper(col1, col2));\n  }\n</code></pre>\n<p>Spring Data JPA Repository code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.List;\nimport lombok.NonNull;\nimport org.springframework.data.jpa.repository.JpaRepository;\n\npublic interface T1Repository extends JpaRepository&lt;T1Entity, Long&gt; {\n  @NonNull\n  List&lt;T1Entity&gt; findByColWrapperIn(@NonNull Iterable&lt;ColWrapper&gt; pairs);\n}\n\n</code></pre>\n<p>Sample service:</p>\n<pre><code>import java.util.List;\nimport lombok.NonNull;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\n@Service\n@RequiredArgsConstructor\npublic class T1Service {\n  private final @NonNull T1Repository t1Repository;\n\n  @Transactional\n  public void test() {\n    final var result =\n        t1Repository.findByColWrapperIn(List.of(new ColWrapper(25, 661), new ColWrapper(89, 741)));\n    for (var entity : result) {\n      System.out.println(entity.getCol1() + &quot;, &quot; + entity.getCol2());\n    }\n  }\n}\n\n</code></pre>\n<p>Calling <code>test()</code> should result in this SQL request being (newlines added by me, you can view this SQL in logs if you enable <code>DEBUG</code>-level logging for <code>org.hibernate.SQL</code> logger):</p>\n<pre class=\"lang-sql prettyprint-override\"><code>select\nt1_0.id,\nt1_0.col1,\nt1_0.col2\nfrom t1 t1_0\nwhere (t1_0.col1,t1_0.col2) in ((?,?),(?,?))\n</code></pre>\n<p>Console output:</p>\n<pre><code>25, 661\n89, 741\n</code></pre>\n<p>Another way is to use specifications like mentioned in <a href=\"https://stackoverflow.com/a/69736182/156973\">this answer</a>.</p>\n"}],"owner":{"account_id":6840202,"reputation":344,"user_id":5260862,"display_name":"SJ1"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":949,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689947383,"creation_date":1663168660,"question_id":73719352,"body_markdown":"I have a table like below in MSSQL - \r\n\r\n```\r\ncreate table t1 (\r\n\r\n  id   int   IDENTITY(1,1),\r\n  col1 int   not null,\r\n  col2 int   not null, \r\n  \r\n  constraint t1_UK UNIQUE (col1, col2)\r\n\r\n)\r\n```\r\n\r\nand data like below - \r\n\r\n```\r\n   id    col1     col2\r\n    1      25      661\r\n    2      25      741\r\n    3      89      661\r\n    4      89      741\r\n```\r\n\r\nhow do I select rows with id 1 and id 4 with where clause only on col1 and col2 ?\r\n\r\nEntity Def- \r\n\r\n```\r\n@Entity\r\n@Table\r\nclass T1Entity {\r\n   @Id\r\n   @GeneratedValue\r\n   private int id;\r\n\r\n   @Column\r\n   private int col1;\r\n\r\n   @Column\r\n   private int col2;\r\n\r\n   // getters, setters\r\n}\r\n```\r\n\r\nNote that assuming I have `T1EntityRepository`, I can&#39;t define a method like `findByCol1InAndCol2In(List.of(25, 89), List.of(661, 741)` as it will return all rows in sample data. \r\n\r\n\r\nI know I need something like `Select col1, col2 from t1 where (col1=25 and col2 = 661) OR (col1=89 and col2=741)` but how to do this using JPA. (also, is there a way in SQL itself without using OR of AND)\r\n\r\n","title":"select rows using pair of columns with JPA (provider eclipselink) and Spring Data","body":"<p>I have a table like below in MSSQL -</p>\n<pre><code>create table t1 (\n\n  id   int   IDENTITY(1,1),\n  col1 int   not null,\n  col2 int   not null, \n  \n  constraint t1_UK UNIQUE (col1, col2)\n\n)\n</code></pre>\n<p>and data like below -</p>\n<pre><code>   id    col1     col2\n    1      25      661\n    2      25      741\n    3      89      661\n    4      89      741\n</code></pre>\n<p>how do I select rows with id 1 and id 4 with where clause only on col1 and col2 ?</p>\n<p>Entity Def-</p>\n<pre><code>@Entity\n@Table\nclass T1Entity {\n   @Id\n   @GeneratedValue\n   private int id;\n\n   @Column\n   private int col1;\n\n   @Column\n   private int col2;\n\n   // getters, setters\n}\n</code></pre>\n<p>Note that assuming I have <code>T1EntityRepository</code>, I can't define a method like <code>findByCol1InAndCol2In(List.of(25, 89), List.of(661, 741)</code> as it will return all rows in sample data.</p>\n<p>I know I need something like <code>Select col1, col2 from t1 where (col1=25 and col2 = 661) OR (col1=89 and col2=741)</code> but how to do this using JPA. (also, is there a way in SQL itself without using OR of AND)</p>\n"},{"tags":["java","schedule","optaplanner","timefold"],"comments":[{"owner":{"account_id":14879486,"reputation":964,"user_id":10744614,"display_name":"Radovan Synek"},"score":0,"creation_date":1690182727,"post_id":76738562,"comment_id":135312148,"body_markdown":"Could you please clarify why both the `start` and `duration` are planning variables? I would expect that the `RoutineInstance`  comes with a fixed duration (e.g. average duration or worst case duration per routine type) and the planning variable is only its `start`.\nAs for the solver running infinitely, have you tried turning on `debug` (shows steps) and then also `trace` (shows evaluated moves) logging?","body":"Could you please clarify why both the <code>start</code> and <code>duration</code> are planning variables? I would expect that the <code>RoutineInstance</code>  comes with a fixed duration (e.g. average duration or worst case duration per routine type) and the planning variable is only its <code>start</code>. As for the solver running infinitely, have you tried turning on <code>debug</code> (shows steps) and then also <code>trace</code> (shows evaluated moves) logging?"},{"owner":{"account_id":10241648,"reputation":11,"user_id":7558886,"display_name":"Luca K"},"score":0,"creation_date":1690291085,"post_id":76738562,"comment_id":135330464,"body_markdown":"@RadovanSynek certainly, as opposed to how a routine may be defined in other cases, in my application I want the duration to be flexible, depending on how busy the schedule is - e.g. imagine a routine &quot;Yoga&quot; with min duration 30mins, max 2hrs. If there&#39;s enough space in the schedule it should schedule e.g. a 2hrs or 1,5hrs session whereas if the schedule is already busy, it would maybe fit in at least a 30 mins session.","body":"@RadovanSynek certainly, as opposed to how a routine may be defined in other cases, in my application I want the duration to be flexible, depending on how busy the schedule is - e.g. imagine a routine &quot;Yoga&quot; with min duration 30mins, max 2hrs. If there&#39;s enough space in the schedule it should schedule e.g. a 2hrs or 1,5hrs session whereas if the schedule is already busy, it would maybe fit in at least a 30 mins session."},{"owner":{"account_id":10241648,"reputation":11,"user_id":7558886,"display_name":"Luca K"},"score":0,"creation_date":1690291090,"post_id":76738562,"comment_id":135330468,"body_markdown":"I have definitely looked at the debug logs but can&#39;t really identify any indication for what I&#39;m doing wrong - attached for [solution 1](https://gist.github.com/lucatk/decab81a53981afdd50599528372ce56#file-log_solution1-txt) and [solution 2](https://gist.github.com/lucatk/decab81a53981afdd50599528372ce56#file-log_solution2-txt)","body":"I have definitely looked at the debug logs but can&#39;t really identify any indication for what I&#39;m doing wrong - attached for <a href=\"https://gist.github.com/lucatk/decab81a53981afdd50599528372ce56#file-log_solution1-txt\" rel=\"nofollow noreferrer\">solution 1</a> and <a href=\"https://gist.github.com/lucatk/decab81a53981afdd50599528372ce56#file-log_solution2-txt\" rel=\"nofollow noreferrer\">solution 2</a>"},{"owner":{"account_id":10241648,"reputation":11,"user_id":7558886,"display_name":"Luca K"},"score":0,"creation_date":1690403068,"post_id":76738562,"comment_id":135350521,"body_markdown":"I&#39;ve now configured a cartesianProductMoveSelector to make start and duration changes in one step. Again - if I use sorted selection, what happens is that it only cycles the initial values in the moves, never proceeding - see this [log](https://gist.github.com/lucatk/c28984b71fdb91bb66e0732d7f284b51)","body":"I&#39;ve now configured a cartesianProductMoveSelector to make start and duration changes in one step. Again - if I use sorted selection, what happens is that it only cycles the initial values in the moves, never proceeding - see this <a href=\"https://gist.github.com/lucatk/c28984b71fdb91bb66e0732d7f284b51\" rel=\"nofollow noreferrer\">log</a>"}],"owner":{"account_id":10241648,"reputation":11,"user_id":7558886,"display_name":"Luca K"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689947131,"creation_date":1689947131,"question_id":76738562,"body_markdown":"First of all, sorry for this long ass question, but I am trying to include all relevant facts for getting accurate help with my configuration. If yet I am missing something, I&#39;m happy to clarify!\r\n\r\nI’m trying to use Timefold to schedule user-created routines into a calendar repeatedly, avoiding clashes with existing fixed events in the calendar.\r\n\r\nThe fixed events have set `start` and `end` dates and are problem facts.\r\n\r\nThe routines to be scheduled are supposed to be somewhat flexible so we can create a schedule even if the calendar is already quite full with fixed events. For this, the routine configurations have the problem facts `minDuration` and `maxDuration`, and given `timeRanges` in which they can be scheduled, e.g. `Monday 12-5pm`, `Tuesday 9-3pm`, `Friday 12-9pm`. Nonetheless this doesn&#39;t mean the routine should be scheduled every Monday, Tuesday and Friday during these times, but rather once a week in between any one of the `timeRanges`.\r\nTherefore what I want to solve for are `start` and `duration`/`end` (though I discovered I can model the constraints more easily if I use duration) problem variables for a list of `routines` (planning entities).\r\n\r\nThe value range providers I use are bound on the entities, as they differ based on the routine configuration. The `start` VRP is a `CompositeCountableValueRange` joining all start timestamps of the time ranges.\r\nThe `duration` VRP creates a Long VR between `minDuration` and `maxDuration`. Both valueRangeProviders have a 5 minute increment, because I don&#39;t want routines to start at e.g. 11:38 and don&#39;t need minute granularity.\r\n\r\nI have setup a hard penalty for partially scheduled routines (only start OR duration set), hard overlap penalties between routines and fixedEvents and between two routines (RoutineInstance::getEnd is a simple helper that adds `duration` to `start`):\r\n```java\r\nprivate Constraint fixedEventRoutineOverlap(ConstraintFactory constraintFactory) {\r\n  return constraintFactory.forEach(FixedEvent.class)\r\n        .join(\r\n                RoutineInstance.class,\r\n                Joiners.overlapping(\r\n                  FixedEvent::getStart,\r\n                  FixedEvent::getEnd,\r\n                  RoutineInstance::getStart,\r\n                  RoutineInstance::getEnd\r\n                ))\r\n        .penalize(HardSoftLongScore.ONE_HARD)\r\n        .asConstraint(&quot;FixedEvent-Routine overlap&quot;);\r\n}\r\n\r\nprivate Constraint routinesOverlap(ConstraintFactory constraintFactory) {\r\n  return constraintFactory.forEach(RoutineInstance.class)\r\n        .join(\r\n                RoutineInstance.class,\r\n                Joiners.overlapping(\r\n                  RoutineInstance::getStart,\r\n                  RoutineInstance::getEnd\r\n                ),\r\n                Joiners.filtering((a, b) -&gt; a.getConfiguration().getId() != b.getConfiguration().getId() || a.getInstanceIndex() != b.getInstanceIndex())\r\n          ).penalize(HardSoftLongScore.ONE_HARD)\r\n          .asConstraint(&quot;Routines overlap&quot;);\r\n}\r\n```\r\n\r\n... and soft constraints maximizing the count of scheduled routines and the routine durations.\r\n```java\r\nprivate Constraint maximizeRoutinesScheduled(ConstraintFactory constraintFactory) {\r\n  return constraintFactory.forEach(RoutineInstance.class)\r\n          .filter(RoutineInstance::isScheduled)\r\n          .reward(HardSoftLongScore.ONE_SOFT)\r\n          .asConstraint(&quot;Maximize Routines scheduled&quot;);\r\n}\r\n\r\nprivate Constraint maximizeRoutineDurations(ConstraintFactory constraintFactory) {\r\n  return constraintFactory.forEach(RoutineInstance.class)\r\n          .filter(RoutineInstance::isScheduled)\r\n          .reward(HardSoftLongScore.ONE_SOFT)\r\n          .asConstraint(&quot;Maximize Routine durations&quot;);\r\n}\r\n```\r\n\r\nFor now, I&#39;m just testing with a simple setup of 3 fixed events and one routine configuration:\r\n```java\r\nRoutineConfiguration routine1 = new RoutineConfiguration(UUID.randomUUID(), 1, Duration.ofMinutes(30), Duration.ofHours(2), 2, List.of(\r\n        new TimeRange(LocalDateTime.of(2023, 7, 4, 9, 0), LocalDateTime.of(2023, 7, 4, 18, 0)),\r\n        new TimeRange(LocalDateTime.of(2023, 7, 5, 9, 0), LocalDateTime.of(2023, 7, 5, 18, 0))\r\n));\r\n```\r\nJust running this with the default optimization settings yields me a result, however it is not optimal (I expect one instance at 11-12:30 4/7/23, the other at 9:00-11:00 5/7/23):\r\n```text\r\nSolved schedule: Schedule{fixedEvents=[FixedEvent{start=2023-07-04T10:00, end=2023-07-04T11:00}, FixedEvent{start=2023-07-04T12:30, end=2023-07-04T16:30}, FixedEvent{start=2023-07-05T12:00, end=2023-07-05T18:00}], routineInstances=[RoutineInstance{configurationId=&#39;43b28b84-9785-4904-b77d-1cb52a8cae4a&#39;, instanceIndex=0, start=2023-07-05T09:55, duration=7200}, RoutineInstance{configurationId=&#39;43b28b84-9785-4904-b77d-1cb52a8cae4a&#39;, instanceIndex=1, start=2023-07-04T16:45, duration=3000}], score=0hard/10202soft}\r\nExplanation: Explanation of score (0hard/10202soft):\r\n    Constraint match totals:\r\n        2soft: constraint (Maximize Routines scheduled) has 2 matches:\r\n            1soft: justifications ([RoutineInstance{configurationId=&#39;43b28b84-9785-4904-b77d-1cb52a8cae4a&#39;, instanceIndex=0, start=2023-07-05T09:55, duration=7200}])\r\n            1soft: justifications ([RoutineInstance{configurationId=&#39;43b28b84-9785-4904-b77d-1cb52a8cae4a&#39;, instanceIndex=1, start=2023-07-04T16:45, duration=3000}])\r\n        10200soft: constraint (Maximize Routine durations) has 2 matches:\r\n            3000soft: justifications ([RoutineInstance{configurationId=&#39;43b28b84-9785-4904-b77d-1cb52a8cae4a&#39;, instanceIndex=1, start=2023-07-04T16:45, duration=3000}])\r\n            7200soft: justifications ([RoutineInstance{configurationId=&#39;43b28b84-9785-4904-b77d-1cb52a8cae4a&#39;, instanceIndex=0, start=2023-07-05T09:55, duration=7200}])\r\n    Indictments:\r\n        3001soft: indicted object (RoutineInstance{configurationId=&#39;43b28b84-9785-4904-b77d-1cb52a8cae4a&#39;, instanceIndex=1, start=2023-07-04T16:45, duration=3000}) has 2 matches:\r\n            1soft: constraint (Maximize Routines scheduled)\r\n            3000soft: constraint (Maximize Routine durations)\r\n        7201soft: indicted object (RoutineInstance{configurationId=&#39;43b28b84-9785-4904-b77d-1cb52a8cae4a&#39;, instanceIndex=0, start=2023-07-05T09:55, duration=7200}) has 2 matches:\r\n            1soft: constraint (Maximize Routines scheduled)\r\n            7200soft: constraint (Maximize Routine durations)\r\n\r\n```\r\n\r\nI get a result reliably, however I assume it just finds it randomly, hence the random start times.\r\n\r\nOne solution I tried, was adding a soft constraint to minimize start times:\r\n```java\r\nprivate Constraint minimizeRoutineStartTimes(ConstraintFactory constraintFactory) {\r\n    return constraintFactory.forEach(RoutineInstance.class)\r\n            .filter(RoutineInstance::isScheduled)\r\n            .penalizeLong(HardSoftLongScore.ONE_SOFT, debugConstraint(&quot;Minimize Routine start times SOFT-&quot;, r -&gt; {\r\n              if (r.getConfiguration().getEarliestPossibleStart() == null) return 0;\r\n              return ChronoUnit.SECONDS.between(r.getConfiguration().getEarliestPossibleStart(), r.getStart());\r\n            }))\r\n            .asConstraint(&quot;Minimize Routine start times&quot;);\r\n}\r\n```\r\nThe other one, was using sorted valueSelectors for start and duration (since this would mean - by my interpretation - that the solver would first try the lowest start time, highest duration, 2nd lowest start time, 2nd highest duration and so on).\r\nUsing this solver configuration:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;solver xmlns=&quot;https://timefold.ai/xsd/solver&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xsi:schemaLocation=&quot;https://timefold.ai/xsd/solver https://timefold.ai/xsd/solver/solver.xsd&quot;&gt;\r\n    &lt;solutionClass&gt;org.lucatk.tempus.scheduler.Schedule&lt;/solutionClass&gt;\r\n    &lt;entityClass&gt;org.lucatk.tempus.domain.RoutineInstance&lt;/entityClass&gt;\r\n\r\n    &lt;scoreDirectorFactory&gt;\r\n        &lt;constraintProviderClass&gt;org.lucatk.tempus.scheduler.ScheduleConstraintProvider&lt;/constraintProviderClass&gt;\r\n    &lt;/scoreDirectorFactory&gt;\r\n\r\n    &lt;termination&gt;\r\n        &lt;secondsSpentLimit&gt;60&lt;/secondsSpentLimit&gt;\r\n    &lt;/termination&gt;\r\n\r\n    &lt;constructionHeuristic&gt;\r\n        &lt;queuedEntityPlacer&gt;\r\n            &lt;unionMoveSelector&gt;\r\n                &lt;changeMoveSelector&gt;\r\n                    &lt;entitySelector&gt;\r\n                        &lt;entityClass&gt;org.lucatk.tempus.domain.RoutineInstance&lt;/entityClass&gt;\r\n                    &lt;/entitySelector&gt;\r\n                    &lt;valueSelector variableName=&quot;start&quot;&gt;\r\n                        &lt;cacheType&gt;STEP&lt;/cacheType&gt;\r\n                        &lt;selectionOrder&gt;SORTED&lt;/selectionOrder&gt;\r\n                        &lt;sorterComparatorClass&gt;org.lucatk.tempus.scheduler.EarliestStartComparator&lt;/sorterComparatorClass&gt;\r\n                    &lt;/valueSelector&gt;\r\n                &lt;/changeMoveSelector&gt;\r\n                &lt;changeMoveSelector&gt;\r\n                    &lt;entitySelector&gt;\r\n                        &lt;entityClass&gt;org.lucatk.tempus.domain.RoutineInstance&lt;/entityClass&gt;\r\n                    &lt;/entitySelector&gt;\r\n                    &lt;valueSelector variableName=&quot;duration&quot;&gt;\r\n                        &lt;cacheType&gt;STEP&lt;/cacheType&gt;\r\n                        &lt;selectionOrder&gt;SORTED&lt;/selectionOrder&gt;\r\n                        &lt;sorterComparatorClass&gt;org.lucatk.tempus.scheduler.LongestDurationComparator&lt;/sorterComparatorClass&gt;\r\n                    &lt;/valueSelector&gt;\r\n                &lt;/changeMoveSelector&gt;\r\n            &lt;/unionMoveSelector&gt;\r\n        &lt;/queuedEntityPlacer&gt;\r\n    &lt;/constructionHeuristic&gt;\r\n\r\n    &lt;localSearch&gt;\r\n        &lt;unionMoveSelector&gt;\r\n            &lt;changeMoveSelector&gt;\r\n                &lt;entitySelector&gt;\r\n                    &lt;entityClass&gt;org.lucatk.tempus.domain.RoutineInstance&lt;/entityClass&gt;\r\n                &lt;/entitySelector&gt;\r\n                &lt;valueSelector variableName=&quot;start&quot;&gt;\r\n                    &lt;cacheType&gt;STEP&lt;/cacheType&gt;\r\n                    &lt;selectionOrder&gt;SORTED&lt;/selectionOrder&gt;\r\n                    &lt;sorterComparatorClass&gt;org.lucatk.tempus.scheduler.EarliestStartComparator&lt;/sorterComparatorClass&gt;\r\n                &lt;/valueSelector&gt;\r\n            &lt;/changeMoveSelector&gt;\r\n            &lt;changeMoveSelector&gt;\r\n                &lt;entitySelector&gt;\r\n                    &lt;entityClass&gt;org.lucatk.tempus.domain.RoutineInstance&lt;/entityClass&gt;\r\n                &lt;/entitySelector&gt;\r\n                &lt;valueSelector variableName=&quot;duration&quot;&gt;\r\n                    &lt;cacheType&gt;STEP&lt;/cacheType&gt;\r\n                    &lt;selectionOrder&gt;SORTED&lt;/selectionOrder&gt;\r\n                    &lt;sorterComparatorClass&gt;org.lucatk.tempus.scheduler.LongestDurationComparator&lt;/sorterComparatorClass&gt;\r\n                &lt;/valueSelector&gt;\r\n            &lt;/changeMoveSelector&gt;\r\n        &lt;/unionMoveSelector&gt;\r\n    &lt;/localSearch&gt;\r\n&lt;/solver&gt;\r\n```\r\n\r\nHowever, both approaches just result in the solver running infinitely.\r\nWith the minimization constraint, I can&#39;t really identify what it&#39;s doing (just random steps), however with the valueSelector approach, it seems like it&#39;s always cycling the first two values of the ranges instead of &quot;remembering&quot; the value didn&#39;t provide a solution.\r\n\r\nSo, my problem is, I set up the solver to the best of my abilities, but I am not able to pinpoint what issues my configuration could have so as to not reach a valid solution.\r\n","title":"Configuration issues when generating schedule of flexible routines without overlapping other events, when optimizing on specific constraints","body":"<p>First of all, sorry for this long ass question, but I am trying to include all relevant facts for getting accurate help with my configuration. If yet I am missing something, I'm happy to clarify!</p>\n<p>I’m trying to use Timefold to schedule user-created routines into a calendar repeatedly, avoiding clashes with existing fixed events in the calendar.</p>\n<p>The fixed events have set <code>start</code> and <code>end</code> dates and are problem facts.</p>\n<p>The routines to be scheduled are supposed to be somewhat flexible so we can create a schedule even if the calendar is already quite full with fixed events. For this, the routine configurations have the problem facts <code>minDuration</code> and <code>maxDuration</code>, and given <code>timeRanges</code> in which they can be scheduled, e.g. <code>Monday 12-5pm</code>, <code>Tuesday 9-3pm</code>, <code>Friday 12-9pm</code>. Nonetheless this doesn't mean the routine should be scheduled every Monday, Tuesday and Friday during these times, but rather once a week in between any one of the <code>timeRanges</code>.\nTherefore what I want to solve for are <code>start</code> and <code>duration</code>/<code>end</code> (though I discovered I can model the constraints more easily if I use duration) problem variables for a list of <code>routines</code> (planning entities).</p>\n<p>The value range providers I use are bound on the entities, as they differ based on the routine configuration. The <code>start</code> VRP is a <code>CompositeCountableValueRange</code> joining all start timestamps of the time ranges.\nThe <code>duration</code> VRP creates a Long VR between <code>minDuration</code> and <code>maxDuration</code>. Both valueRangeProviders have a 5 minute increment, because I don't want routines to start at e.g. 11:38 and don't need minute granularity.</p>\n<p>I have setup a hard penalty for partially scheduled routines (only start OR duration set), hard overlap penalties between routines and fixedEvents and between two routines (RoutineInstance::getEnd is a simple helper that adds <code>duration</code> to <code>start</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Constraint fixedEventRoutineOverlap(ConstraintFactory constraintFactory) {\n  return constraintFactory.forEach(FixedEvent.class)\n        .join(\n                RoutineInstance.class,\n                Joiners.overlapping(\n                  FixedEvent::getStart,\n                  FixedEvent::getEnd,\n                  RoutineInstance::getStart,\n                  RoutineInstance::getEnd\n                ))\n        .penalize(HardSoftLongScore.ONE_HARD)\n        .asConstraint(&quot;FixedEvent-Routine overlap&quot;);\n}\n\nprivate Constraint routinesOverlap(ConstraintFactory constraintFactory) {\n  return constraintFactory.forEach(RoutineInstance.class)\n        .join(\n                RoutineInstance.class,\n                Joiners.overlapping(\n                  RoutineInstance::getStart,\n                  RoutineInstance::getEnd\n                ),\n                Joiners.filtering((a, b) -&gt; a.getConfiguration().getId() != b.getConfiguration().getId() || a.getInstanceIndex() != b.getInstanceIndex())\n          ).penalize(HardSoftLongScore.ONE_HARD)\n          .asConstraint(&quot;Routines overlap&quot;);\n}\n</code></pre>\n<p>... and soft constraints maximizing the count of scheduled routines and the routine durations.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Constraint maximizeRoutinesScheduled(ConstraintFactory constraintFactory) {\n  return constraintFactory.forEach(RoutineInstance.class)\n          .filter(RoutineInstance::isScheduled)\n          .reward(HardSoftLongScore.ONE_SOFT)\n          .asConstraint(&quot;Maximize Routines scheduled&quot;);\n}\n\nprivate Constraint maximizeRoutineDurations(ConstraintFactory constraintFactory) {\n  return constraintFactory.forEach(RoutineInstance.class)\n          .filter(RoutineInstance::isScheduled)\n          .reward(HardSoftLongScore.ONE_SOFT)\n          .asConstraint(&quot;Maximize Routine durations&quot;);\n}\n</code></pre>\n<p>For now, I'm just testing with a simple setup of 3 fixed events and one routine configuration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>RoutineConfiguration routine1 = new RoutineConfiguration(UUID.randomUUID(), 1, Duration.ofMinutes(30), Duration.ofHours(2), 2, List.of(\n        new TimeRange(LocalDateTime.of(2023, 7, 4, 9, 0), LocalDateTime.of(2023, 7, 4, 18, 0)),\n        new TimeRange(LocalDateTime.of(2023, 7, 5, 9, 0), LocalDateTime.of(2023, 7, 5, 18, 0))\n));\n</code></pre>\n<p>Just running this with the default optimization settings yields me a result, however it is not optimal (I expect one instance at 11-12:30 4/7/23, the other at 9:00-11:00 5/7/23):</p>\n<pre><code>Solved schedule: Schedule{fixedEvents=[FixedEvent{start=2023-07-04T10:00, end=2023-07-04T11:00}, FixedEvent{start=2023-07-04T12:30, end=2023-07-04T16:30}, FixedEvent{start=2023-07-05T12:00, end=2023-07-05T18:00}], routineInstances=[RoutineInstance{configurationId='43b28b84-9785-4904-b77d-1cb52a8cae4a', instanceIndex=0, start=2023-07-05T09:55, duration=7200}, RoutineInstance{configurationId='43b28b84-9785-4904-b77d-1cb52a8cae4a', instanceIndex=1, start=2023-07-04T16:45, duration=3000}], score=0hard/10202soft}\nExplanation: Explanation of score (0hard/10202soft):\n    Constraint match totals:\n        2soft: constraint (Maximize Routines scheduled) has 2 matches:\n            1soft: justifications ([RoutineInstance{configurationId='43b28b84-9785-4904-b77d-1cb52a8cae4a', instanceIndex=0, start=2023-07-05T09:55, duration=7200}])\n            1soft: justifications ([RoutineInstance{configurationId='43b28b84-9785-4904-b77d-1cb52a8cae4a', instanceIndex=1, start=2023-07-04T16:45, duration=3000}])\n        10200soft: constraint (Maximize Routine durations) has 2 matches:\n            3000soft: justifications ([RoutineInstance{configurationId='43b28b84-9785-4904-b77d-1cb52a8cae4a', instanceIndex=1, start=2023-07-04T16:45, duration=3000}])\n            7200soft: justifications ([RoutineInstance{configurationId='43b28b84-9785-4904-b77d-1cb52a8cae4a', instanceIndex=0, start=2023-07-05T09:55, duration=7200}])\n    Indictments:\n        3001soft: indicted object (RoutineInstance{configurationId='43b28b84-9785-4904-b77d-1cb52a8cae4a', instanceIndex=1, start=2023-07-04T16:45, duration=3000}) has 2 matches:\n            1soft: constraint (Maximize Routines scheduled)\n            3000soft: constraint (Maximize Routine durations)\n        7201soft: indicted object (RoutineInstance{configurationId='43b28b84-9785-4904-b77d-1cb52a8cae4a', instanceIndex=0, start=2023-07-05T09:55, duration=7200}) has 2 matches:\n            1soft: constraint (Maximize Routines scheduled)\n            7200soft: constraint (Maximize Routine durations)\n\n</code></pre>\n<p>I get a result reliably, however I assume it just finds it randomly, hence the random start times.</p>\n<p>One solution I tried, was adding a soft constraint to minimize start times:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Constraint minimizeRoutineStartTimes(ConstraintFactory constraintFactory) {\n    return constraintFactory.forEach(RoutineInstance.class)\n            .filter(RoutineInstance::isScheduled)\n            .penalizeLong(HardSoftLongScore.ONE_SOFT, debugConstraint(&quot;Minimize Routine start times SOFT-&quot;, r -&gt; {\n              if (r.getConfiguration().getEarliestPossibleStart() == null) return 0;\n              return ChronoUnit.SECONDS.between(r.getConfiguration().getEarliestPossibleStart(), r.getStart());\n            }))\n            .asConstraint(&quot;Minimize Routine start times&quot;);\n}\n</code></pre>\n<p>The other one, was using sorted valueSelectors for start and duration (since this would mean - by my interpretation - that the solver would first try the lowest start time, highest duration, 2nd lowest start time, 2nd highest duration and so on).\nUsing this solver configuration:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;solver xmlns=&quot;https://timefold.ai/xsd/solver&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n        xsi:schemaLocation=&quot;https://timefold.ai/xsd/solver https://timefold.ai/xsd/solver/solver.xsd&quot;&gt;\n    &lt;solutionClass&gt;org.lucatk.tempus.scheduler.Schedule&lt;/solutionClass&gt;\n    &lt;entityClass&gt;org.lucatk.tempus.domain.RoutineInstance&lt;/entityClass&gt;\n\n    &lt;scoreDirectorFactory&gt;\n        &lt;constraintProviderClass&gt;org.lucatk.tempus.scheduler.ScheduleConstraintProvider&lt;/constraintProviderClass&gt;\n    &lt;/scoreDirectorFactory&gt;\n\n    &lt;termination&gt;\n        &lt;secondsSpentLimit&gt;60&lt;/secondsSpentLimit&gt;\n    &lt;/termination&gt;\n\n    &lt;constructionHeuristic&gt;\n        &lt;queuedEntityPlacer&gt;\n            &lt;unionMoveSelector&gt;\n                &lt;changeMoveSelector&gt;\n                    &lt;entitySelector&gt;\n                        &lt;entityClass&gt;org.lucatk.tempus.domain.RoutineInstance&lt;/entityClass&gt;\n                    &lt;/entitySelector&gt;\n                    &lt;valueSelector variableName=&quot;start&quot;&gt;\n                        &lt;cacheType&gt;STEP&lt;/cacheType&gt;\n                        &lt;selectionOrder&gt;SORTED&lt;/selectionOrder&gt;\n                        &lt;sorterComparatorClass&gt;org.lucatk.tempus.scheduler.EarliestStartComparator&lt;/sorterComparatorClass&gt;\n                    &lt;/valueSelector&gt;\n                &lt;/changeMoveSelector&gt;\n                &lt;changeMoveSelector&gt;\n                    &lt;entitySelector&gt;\n                        &lt;entityClass&gt;org.lucatk.tempus.domain.RoutineInstance&lt;/entityClass&gt;\n                    &lt;/entitySelector&gt;\n                    &lt;valueSelector variableName=&quot;duration&quot;&gt;\n                        &lt;cacheType&gt;STEP&lt;/cacheType&gt;\n                        &lt;selectionOrder&gt;SORTED&lt;/selectionOrder&gt;\n                        &lt;sorterComparatorClass&gt;org.lucatk.tempus.scheduler.LongestDurationComparator&lt;/sorterComparatorClass&gt;\n                    &lt;/valueSelector&gt;\n                &lt;/changeMoveSelector&gt;\n            &lt;/unionMoveSelector&gt;\n        &lt;/queuedEntityPlacer&gt;\n    &lt;/constructionHeuristic&gt;\n\n    &lt;localSearch&gt;\n        &lt;unionMoveSelector&gt;\n            &lt;changeMoveSelector&gt;\n                &lt;entitySelector&gt;\n                    &lt;entityClass&gt;org.lucatk.tempus.domain.RoutineInstance&lt;/entityClass&gt;\n                &lt;/entitySelector&gt;\n                &lt;valueSelector variableName=&quot;start&quot;&gt;\n                    &lt;cacheType&gt;STEP&lt;/cacheType&gt;\n                    &lt;selectionOrder&gt;SORTED&lt;/selectionOrder&gt;\n                    &lt;sorterComparatorClass&gt;org.lucatk.tempus.scheduler.EarliestStartComparator&lt;/sorterComparatorClass&gt;\n                &lt;/valueSelector&gt;\n            &lt;/changeMoveSelector&gt;\n            &lt;changeMoveSelector&gt;\n                &lt;entitySelector&gt;\n                    &lt;entityClass&gt;org.lucatk.tempus.domain.RoutineInstance&lt;/entityClass&gt;\n                &lt;/entitySelector&gt;\n                &lt;valueSelector variableName=&quot;duration&quot;&gt;\n                    &lt;cacheType&gt;STEP&lt;/cacheType&gt;\n                    &lt;selectionOrder&gt;SORTED&lt;/selectionOrder&gt;\n                    &lt;sorterComparatorClass&gt;org.lucatk.tempus.scheduler.LongestDurationComparator&lt;/sorterComparatorClass&gt;\n                &lt;/valueSelector&gt;\n            &lt;/changeMoveSelector&gt;\n        &lt;/unionMoveSelector&gt;\n    &lt;/localSearch&gt;\n&lt;/solver&gt;\n</code></pre>\n<p>However, both approaches just result in the solver running infinitely.\nWith the minimization constraint, I can't really identify what it's doing (just random steps), however with the valueSelector approach, it seems like it's always cycling the first two values of the ranges instead of &quot;remembering&quot; the value didn't provide a solution.</p>\n<p>So, my problem is, I set up the solver to the best of my abilities, but I am not able to pinpoint what issues my configuration could have so as to not reach a valid solution.</p>\n"},{"tags":["java","docker","jvm","bamboo"],"comments":[{"owner":{"account_id":8840348,"reputation":305,"user_id":6878796,"display_name":"Paul"},"score":0,"creation_date":1689948483,"post_id":76738558,"comment_id":135289337,"body_markdown":"The error is not very readable, but it looks like it&#39;s the same as this one https://community.atlassian.com/t5/Bamboo-questions/FATAL-ERROR-Bamboo-Remote-Agent-is-loading-constently/qaq-p/1041828 In your stacktrace you have `Caused by: java.net.UnknownHostException: bamboosrv`","body":"The error is not very readable, but it looks like it&#39;s the same as this one <a href=\"https://community.atlassian.com/t5/Bamboo-questions/FATAL-ERROR-Bamboo-Remote-Agent-is-loading-constently/qaq-p/1041828\" rel=\"nofollow noreferrer\">community.atlassian.com/t5/Bamboo-questions/&hellip;</a> In your stacktrace you have <code>Caused by: java.net.UnknownHostException: bamboosrv</code>"}],"owner":{"account_id":21993592,"reputation":41,"user_id":16266520,"display_name":"ykursatkara"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":194,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689947104,"creation_date":1689947104,"question_id":76738558,"body_markdown":"I am trying to run the Bamboo agent in the newly set up server. However, when I start running it, it keeps repeating the same things over and over again. And at the end of all, it says &#39;JVM exited unexpectedly.&#39; Below, I am providing the log output.\r\n\r\n    \r\n\r\n&gt; INFO   | jvm 1    | 2023/07/21 14:10:57 | 2023-07-21 14:10:57,474 INFO [AgentRunnerThread] [AgentRegistrationBean] Current agent remote definition: prometaubuntu Remote agent on host prometaubuntu\r\nINFO   | jvm 1    | 2023/07/21 14:10:57 | 2023-07-21 14:10:57,489 INFO [AgentRunnerThread] [PerforceManager] Could not find system variable. If you wish to use perforce please set the location as a capability.\r\nINFO   | jvm 1    | 2023/07/21 14:10:58 | 2023-07-21 14:10:58,853 INFO [AgentRunnerThread] [AgentRegistrationBean] Registering agent on the server,\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | 2023-07-21 14:15:14,149 ERROR [ActiveMQ Task-1] [FailoverTransport] Failed to connect to [tcp://bamboosrv:54663?wireFormat.maxInactivityDuration=300000] after: 10 attempt(s)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | 2023-07-21 14:15:14,161 INFO [ActiveMQ Connection Executor: unconnected] [PooledConnectionFactory] Expiring connection ActiveMQConnection {id=ID:prometaubuntu-46739-1689937858912-1:1,clientId=ID:prometaubuntu-46739-1689937858912-0:1,started=false} on IOException: bamboosrv\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | 2023-07-21 14:15:14,171 WARN [AgentRunnerThread] [RemoteAgent$1] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;agentRegistrationBean&#39;: Invocation of init method failed; nested exception is org.springframework.remoting.RemoteAccessException: Could not access JMS invoker queue [queue://com.atlassian.bamboo.registrationQueue]; nested exception is javax.jms.IllegalStateException: javax.jms.JMSException: bamboosrv\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | 2023-07-21 14:15:14,174 INFO [AgentRunnerThread] [SVNClientManagerFactory] Destroying SVNClientManagerFactories...\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | 2023-07-21 14:15:14,183 INFO [AgentRunnerThread] [QuartzScheduler] Scheduler scheduler_$_NON_CLUSTERED shutting down.\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | 2023-07-21 14:15:14,184 INFO [AgentRunnerThread] [QuartzScheduler] Scheduler scheduler_$_NON_CLUSTERED paused.\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | 2023-07-21 14:15:14,185 INFO [AgentRunnerThread] [QuartzScheduler] Scheduler scheduler_$_NON_CLUSTERED shutdown complete.\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Exiting due to fatal exception.\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | java.lang.reflect.InvocationTargetException\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat java.lang.reflect.Method.invoke(Method.java:498)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat com.atlassian.bamboo.agent.bootstrap.AgentRunner.run(AgentRunner.java:26)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat java.lang.Thread.run(Thread.java:750)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;agentRegistrationBean&#39;: Invocation of init method failed; nested exception is org.springframework.remoting.RemoteAccessException: Could not access JMS invoker queue [queue://com.atlassian.bamboo.registrationQueue]; nested exception is javax.jms.IllegalStateException: javax.jms.JMSException: bamboosrv\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:139)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:414)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1763)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:847)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:144)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:95)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat com.atlassian.bamboo.v2.build.agent.remote.RemoteAgent$1.&lt;init&gt;(RemoteAgent.java:241)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat com.atlassian.bamboo.v2.build.agent.remote.RemoteAgent.initApplicationContext(RemoteAgent.java:241)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat com.atlassian.bamboo.v2.build.agent.remote.RemoteAgent.start(RemoteAgent.java:97)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \t... 6 more\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: org.springframework.remoting.RemoteAccessException: Could not access JMS invoker queue [queue://com.atlassian.bamboo.registrationQueue]; nested exception is javax.jms.IllegalStateException: javax.jms.JMSException: bamboosrv\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.jms.remoting.JmsInvokerClientInterceptor.convertJmsInvokerAccessException(JmsInvokerClientInterceptor.java:432)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.jms.remoting.JmsInvokerClientInterceptor.invoke(JmsInvokerClientInterceptor.java:207)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat com.sun.proxy.$Proxy22.registerAgent(Unknown Source)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat com.atlassian.bamboo.v2.build.agent.remote.AgentRegistrationBean.registerAgent(AgentRegistrationBean.java:52)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat java.lang.reflect.Method.invoke(Method.java:498)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:363)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:307)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:136)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \t... 22 more\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: javax.jms.IllegalStateException: javax.jms.JMSException: bamboosrv\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:162)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.jms.remoting.JmsInvokerClientInterceptor.createSession(JmsInvokerClientInterceptor.java:281)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.jms.remoting.JmsInvokerClientInterceptor.executeRequest(JmsInvokerClientInterceptor.java:250)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.jms.remoting.JmsInvokerClientInterceptor.invoke(JmsInvokerClientInterceptor.java:204)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \t... 33 more\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: javax.jms.JMSException: bamboosrv\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:72)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1421)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1486)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:329)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.jms.pool.ConnectionPool.makeSession(ConnectionPool.java:112)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:82)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:78)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1073)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:348)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:271)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:144)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \t... 37 more\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: java.net.UnknownHostException: bamboosrv\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:184)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat java.net.Socket.connect(Socket.java:607)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.transport.tcp.TcpTransport.connect(TcpTransport.java:525)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.transport.tcp.TcpTransport.doStart(TcpTransport.java:488)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.transport.AbstractInactivityMonitor.start(AbstractInactivityMonitor.java:169)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.transport.InactivityMonitor.start(InactivityMonitor.java:52)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.transport.WireFormatNegotiator.start(WireFormatNegotiator.java:72)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.transport.failover.FailoverTransport.doReconnect(FailoverTransport.java:1017)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.transport.failover.FailoverTransport$2.iterate(FailoverTransport.java:148)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:133)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:48)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \t... 1 more\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | 2023-07-21 14:15:14,226 FATAL [AgentRunnerThread] [AgentBootstrap] Exiting due to fatal exception.\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | java.lang.reflect.InvocationTargetException\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat java.lang.reflect.Method.invoke(Method.java:498)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat com.atlassian.bamboo.agent.bootstrap.AgentRunner.run(AgentRunner.java:26)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat java.lang.Thread.run(Thread.java:750)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;agentRegistrationBean&#39;: Invocation of init method failed; nested exception is org.springframework.remoting.RemoteAccessException: Could not access JMS invoker queue [queue://com.atlassian.bamboo.registrationQueue]; nested exception is javax.jms.IllegalStateException: javax.jms.JMSException: bamboosrv\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:139)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:414)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1763)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:847)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:144)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:95)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat com.atlassian.bamboo.v2.build.agent.remote.RemoteAgent$1.&lt;init&gt;(RemoteAgent.java:241)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat com.atlassian.bamboo.v2.build.agent.remote.RemoteAgent.initApplicationContext(RemoteAgent.java:241)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat com.atlassian.bamboo.v2.build.agent.remote.RemoteAgent.start(RemoteAgent.java:97)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \t... 6 more\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: org.springframework.remoting.RemoteAccessException: Could not access JMS invoker queue [queue://com.atlassian.bamboo.registrationQueue]; nested exception is javax.jms.IllegalStateException: javax.jms.JMSException: bamboosrv\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.jms.remoting.JmsInvokerClientInterceptor.convertJmsInvokerAccessException(JmsInvokerClientInterceptor.java:432)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.jms.remoting.JmsInvokerClientInterceptor.invoke(JmsInvokerClientInterceptor.java:207)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat com.sun.proxy.$Proxy22.registerAgent(Unknown Source)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat com.atlassian.bamboo.v2.build.agent.remote.AgentRegistrationBean.registerAgent(AgentRegistrationBean.java:52)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat java.lang.reflect.Method.invoke(Method.java:498)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:363)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:307)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:136)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \t... 22 more\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: javax.jms.IllegalStateException: javax.jms.JMSException: bamboosrv\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:162)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.jms.remoting.JmsInvokerClientInterceptor.createSession(JmsInvokerClientInterceptor.java:281)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.jms.remoting.JmsInvokerClientInterceptor.executeRequest(JmsInvokerClientInterceptor.java:250)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.springframework.jms.remoting.JmsInvokerClientInterceptor.invoke(JmsInvokerClientInterceptor.java:204)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \t... 33 more\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: javax.jms.JMSException: bamboosrv\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:72)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1421)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1486)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:329)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.jms.pool.ConnectionPool.makeSession(ConnectionPool.java:112)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:82)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:78)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1073)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:348)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:271)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:144)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \t... 37 more\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: java.net.UnknownHostException: bamboosrv\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:184)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat java.net.Socket.connect(Socket.java:607)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.transport.tcp.TcpTransport.connect(TcpTransport.java:525)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.transport.tcp.TcpTransport.doStart(TcpTransport.java:488)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.transport.AbstractInactivityMonitor.start(AbstractInactivityMonitor.java:169)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.transport.InactivityMonitor.start(InactivityMonitor.java:52)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.transport.WireFormatNegotiator.start(WireFormatNegotiator.java:72)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.transport.failover.FailoverTransport.doReconnect(FailoverTransport.java:1017)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.transport.failover.FailoverTransport$2.iterate(FailoverTransport.java:148)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:133)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:48)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\nINFO   | jvm 1    | 2023/07/21 14:15:14 | \t... 1 more\r\nERROR  | wrapper  | 2023/07/21 14:15:14 | JVM exited unexpectedly.\r\nSTATUS | wrapper  | 2023/07/21 14:15:20 | JVM process is gone.","title":"Bamboo agent JVM exited unexpectedly","body":"<p>I am trying to run the Bamboo agent in the newly set up server. However, when I start running it, it keeps repeating the same things over and over again. And at the end of all, it says 'JVM exited unexpectedly.' Below, I am providing the log output.</p>\n<blockquote>\n<p>INFO   | jvm 1    | 2023/07/21 14:10:57 | 2023-07-21 14:10:57,474 INFO [AgentRunnerThread] [AgentRegistrationBean] Current agent remote definition: prometaubuntu Remote agent on host prometaubuntu\nINFO   | jvm 1    | 2023/07/21 14:10:57 | 2023-07-21 14:10:57,489 INFO [AgentRunnerThread] [PerforceManager] Could not find system variable. If you wish to use perforce please set the location as a capability.\nINFO   | jvm 1    | 2023/07/21 14:10:58 | 2023-07-21 14:10:58,853 INFO [AgentRunnerThread] [AgentRegistrationBean] Registering agent on the server,\nINFO   | jvm 1    | 2023/07/21 14:15:14 | 2023-07-21 14:15:14,149 ERROR [ActiveMQ Task-1] [FailoverTransport] Failed to connect to [tcp://bamboosrv:54663?wireFormat.maxInactivityDuration=300000] after: 10 attempt(s)\nINFO   | jvm 1    | 2023/07/21 14:15:14 | 2023-07-21 14:15:14,161 INFO [ActiveMQ Connection Executor: unconnected] [PooledConnectionFactory] Expiring connection ActiveMQConnection {id=ID:prometaubuntu-46739-1689937858912-1:1,clientId=ID:prometaubuntu-46739-1689937858912-0:1,started=false} on IOException: bamboosrv\nINFO   | jvm 1    | 2023/07/21 14:15:14 | 2023-07-21 14:15:14,171 WARN [AgentRunnerThread] [RemoteAgent$1] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'agentRegistrationBean': Invocation of init method failed; nested exception is org.springframework.remoting.RemoteAccessException: Could not access JMS invoker queue [queue://com.atlassian.bamboo.registrationQueue]; nested exception is javax.jms.IllegalStateException: javax.jms.JMSException: bamboosrv\nINFO   | jvm 1    | 2023/07/21 14:15:14 | 2023-07-21 14:15:14,174 INFO [AgentRunnerThread] [SVNClientManagerFactory] Destroying SVNClientManagerFactories...\nINFO   | jvm 1    | 2023/07/21 14:15:14 | 2023-07-21 14:15:14,183 INFO [AgentRunnerThread] [QuartzScheduler] Scheduler scheduler_$<em>NON_CLUSTERED shutting down.\nINFO   | jvm 1    | 2023/07/21 14:15:14 | 2023-07-21 14:15:14,184 INFO [AgentRunnerThread] [QuartzScheduler] Scheduler scheduler</em>$<em>NON_CLUSTERED paused.\nINFO   | jvm 1    | 2023/07/21 14:15:14 | 2023-07-21 14:15:14,185 INFO [AgentRunnerThread] [QuartzScheduler] Scheduler scheduler</em>$_NON_CLUSTERED shutdown complete.\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Exiting due to fatal exception.\nINFO   | jvm 1    | 2023/07/21 14:15:14 | java.lang.reflect.InvocationTargetException\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at java.lang.reflect.Method.invoke(Method.java:498)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at com.atlassian.bamboo.agent.bootstrap.AgentRunner.run(AgentRunner.java:26)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at java.lang.Thread.run(Thread.java:750)\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'agentRegistrationBean': Invocation of init method failed; nested exception is org.springframework.remoting.RemoteAccessException: Could not access JMS invoker queue [queue://com.atlassian.bamboo.registrationQueue]; nested exception is javax.jms.IllegalStateException: javax.jms.JMSException: bamboosrv\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:139)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:414)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1763)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:847)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.context.support.ClassPathXmlApplicationContext.(ClassPathXmlApplicationContext.java:144)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.context.support.ClassPathXmlApplicationContext.(ClassPathXmlApplicationContext.java:95)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at com.atlassian.bamboo.v2.build.agent.remote.RemoteAgent$1.(RemoteAgent.java:241)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at com.atlassian.bamboo.v2.build.agent.remote.RemoteAgent.initApplicationContext(RemoteAgent.java:241)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at com.atlassian.bamboo.v2.build.agent.remote.RemoteAgent.start(RemoteAgent.java:97)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   ... 6 more\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: org.springframework.remoting.RemoteAccessException: Could not access JMS invoker queue [queue://com.atlassian.bamboo.registrationQueue]; nested exception is javax.jms.IllegalStateException: javax.jms.JMSException: bamboosrv\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.jms.remoting.JmsInvokerClientInterceptor.convertJmsInvokerAccessException(JmsInvokerClientInterceptor.java:432)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.jms.remoting.JmsInvokerClientInterceptor.invoke(JmsInvokerClientInterceptor.java:207)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at com.sun.proxy.$Proxy22.registerAgent(Unknown Source)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at com.atlassian.bamboo.v2.build.agent.remote.AgentRegistrationBean.registerAgent(AgentRegistrationBean.java:52)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at java.lang.reflect.Method.invoke(Method.java:498)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:363)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:307)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:136)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   ... 22 more\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: javax.jms.IllegalStateException: javax.jms.JMSException: bamboosrv\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:162)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.jms.remoting.JmsInvokerClientInterceptor.createSession(JmsInvokerClientInterceptor.java:281)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.jms.remoting.JmsInvokerClientInterceptor.executeRequest(JmsInvokerClientInterceptor.java:250)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.jms.remoting.JmsInvokerClientInterceptor.invoke(JmsInvokerClientInterceptor.java:204)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   ... 33 more\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: javax.jms.JMSException: bamboosrv\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:72)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1421)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1486)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:329)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.jms.pool.ConnectionPool.makeSession(ConnectionPool.java:112)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:82)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:78)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1073)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:348)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:271)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:144)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   ... 37 more\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: java.net.UnknownHostException: bamboosrv\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:184)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at java.net.Socket.connect(Socket.java:607)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.transport.tcp.TcpTransport.connect(TcpTransport.java:525)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.transport.tcp.TcpTransport.doStart(TcpTransport.java:488)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.transport.AbstractInactivityMonitor.start(AbstractInactivityMonitor.java:169)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.transport.InactivityMonitor.start(InactivityMonitor.java:52)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.transport.WireFormatNegotiator.start(WireFormatNegotiator.java:72)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.transport.failover.FailoverTransport.doReconnect(FailoverTransport.java:1017)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.transport.failover.FailoverTransport$2.iterate(FailoverTransport.java:148)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:133)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:48)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   ... 1 more\nINFO   | jvm 1    | 2023/07/21 14:15:14 | 2023-07-21 14:15:14,226 FATAL [AgentRunnerThread] [AgentBootstrap] Exiting due to fatal exception.\nINFO   | jvm 1    | 2023/07/21 14:15:14 | java.lang.reflect.InvocationTargetException\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at java.lang.reflect.Method.invoke(Method.java:498)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at com.atlassian.bamboo.agent.bootstrap.AgentRunner.run(AgentRunner.java:26)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at java.lang.Thread.run(Thread.java:750)\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'agentRegistrationBean': Invocation of init method failed; nested exception is org.springframework.remoting.RemoteAccessException: Could not access JMS invoker queue [queue://com.atlassian.bamboo.registrationQueue]; nested exception is javax.jms.IllegalStateException: javax.jms.JMSException: bamboosrv\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:139)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:414)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1763)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:847)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.context.support.ClassPathXmlApplicationContext.(ClassPathXmlApplicationContext.java:144)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.context.support.ClassPathXmlApplicationContext.(ClassPathXmlApplicationContext.java:95)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at com.atlassian.bamboo.v2.build.agent.remote.RemoteAgent$1.(RemoteAgent.java:241)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at com.atlassian.bamboo.v2.build.agent.remote.RemoteAgent.initApplicationContext(RemoteAgent.java:241)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at com.atlassian.bamboo.v2.build.agent.remote.RemoteAgent.start(RemoteAgent.java:97)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   ... 6 more\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: org.springframework.remoting.RemoteAccessException: Could not access JMS invoker queue [queue://com.atlassian.bamboo.registrationQueue]; nested exception is javax.jms.IllegalStateException: javax.jms.JMSException: bamboosrv\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.jms.remoting.JmsInvokerClientInterceptor.convertJmsInvokerAccessException(JmsInvokerClientInterceptor.java:432)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.jms.remoting.JmsInvokerClientInterceptor.invoke(JmsInvokerClientInterceptor.java:207)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at com.sun.proxy.$Proxy22.registerAgent(Unknown Source)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at com.atlassian.bamboo.v2.build.agent.remote.AgentRegistrationBean.registerAgent(AgentRegistrationBean.java:52)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at java.lang.reflect.Method.invoke(Method.java:498)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:363)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:307)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:136)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   ... 22 more\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: javax.jms.IllegalStateException: javax.jms.JMSException: bamboosrv\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:162)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.jms.remoting.JmsInvokerClientInterceptor.createSession(JmsInvokerClientInterceptor.java:281)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.jms.remoting.JmsInvokerClientInterceptor.executeRequest(JmsInvokerClientInterceptor.java:250)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.springframework.jms.remoting.JmsInvokerClientInterceptor.invoke(JmsInvokerClientInterceptor.java:204)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   ... 33 more\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: javax.jms.JMSException: bamboosrv\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:72)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1421)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1486)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:329)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.jms.pool.ConnectionPool.makeSession(ConnectionPool.java:112)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:82)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:78)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1073)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:348)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:271)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:144)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   ... 37 more\nINFO   | jvm 1    | 2023/07/21 14:15:14 | Caused by: java.net.UnknownHostException: bamboosrv\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:184)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at java.net.Socket.connect(Socket.java:607)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.transport.tcp.TcpTransport.connect(TcpTransport.java:525)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.transport.tcp.TcpTransport.doStart(TcpTransport.java:488)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.transport.AbstractInactivityMonitor.start(AbstractInactivityMonitor.java:169)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.transport.InactivityMonitor.start(InactivityMonitor.java:52)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.transport.WireFormatNegotiator.start(WireFormatNegotiator.java:72)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.transport.failover.FailoverTransport.doReconnect(FailoverTransport.java:1017)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.transport.failover.FailoverTransport$2.iterate(FailoverTransport.java:148)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:133)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:48)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\nINFO   | jvm 1    | 2023/07/21 14:15:14 |   ... 1 more\nERROR  | wrapper  | 2023/07/21 14:15:14 | JVM exited unexpectedly.\nSTATUS | wrapper  | 2023/07/21 14:15:20 | JVM process is gone.</p>\n</blockquote>\n"},{"tags":["java","mongodb","spring-data"],"comments":[{"owner":{"account_id":2843470,"reputation":4620,"user_id":2442526,"display_name":"xtratic"},"score":0,"creation_date":1566479878,"post_id":57610243,"comment_id":101675833,"body_markdown":"My guess is that the UserDocument has a definition requiring certain fields to make a key or id but those are not present. The solution may be to check those values are set on the UserDocument","body":"My guess is that the UserDocument has a definition requiring certain fields to make a key or id but those are not present. The solution may be to check those values are set on the UserDocument"},{"owner":{"account_id":1760367,"reputation":4807,"user_id":1607660,"accept_rate":70,"display_name":"FazoM"},"score":0,"creation_date":1566480694,"post_id":57610243,"comment_id":101676357,"body_markdown":"Id is autogenerated, I will update question","body":"Id is autogenerated, I will update question"},{"owner":{"account_id":2843470,"reputation":4620,"user_id":2442526,"display_name":"xtratic"},"score":0,"creation_date":1566481913,"post_id":57610243,"comment_id":101677076,"body_markdown":"Perhaps make sure you have a public getter/setter for your id, also possibly annotate it with  `@GeneratedValue(...)`","body":"Perhaps make sure you have a public getter/setter for your id, also possibly annotate it with  <code>@GeneratedValue(...)</code>"}],"answers":[{"tags":[],"owner":{"account_id":1760367,"reputation":4807,"user_id":1607660,"accept_rate":70,"display_name":"FazoM"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1566484256,"creation_date":1566484256,"answer_id":57611686,"question_id":57610243,"body_markdown":"For anyone that is struggling with this problem - in my case it was problem with `mapstruct` `Mapper` that as a side effect was populating fields in super class:\r\n\r\n    import org.springframework.data.annotation.CreatedDate;\r\n    import org.springframework.data.annotation.LastModifiedDate;\r\n    import org.springframework.data.annotation.Version;\r\n\r\n    @Data\r\n    @NoArgsConstructor(access = AccessLevel.PROTECTED)\r\n    @AllArgsConstructor(access = AccessLevel.PROTECTED)\r\n    @Accessors(chain = true)\r\n    @SuperBuilder\r\n    public abstract class BaseDocument&lt;ID extends Serializable&gt; implements Persistable&lt;ID&gt; {\r\n    \r\n      @Version\r\n      private Long revision;\r\n    \r\n      @CreatedDate\r\n      private Instant createdDateTime;\r\n    \r\n      @LastModifiedDate\r\n      private Instant lastModifiedDateTime;\r\n    \r\n      @Override\r\n      public boolean isNew() {\r\n        return isNull(createdDateTime);\r\n      }\r\n    }\r\n\r\nSo make sure these fields are `null` when you are saving a new entity!","title":"Could not obtain identifier from","body":"<p>For anyone that is struggling with this problem - in my case it was problem with <code>mapstruct</code> <code>Mapper</code> that as a side effect was populating fields in super class:</p>\n\n<pre><code>import org.springframework.data.annotation.CreatedDate;\nimport org.springframework.data.annotation.LastModifiedDate;\nimport org.springframework.data.annotation.Version;\n\n@Data\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\n@AllArgsConstructor(access = AccessLevel.PROTECTED)\n@Accessors(chain = true)\n@SuperBuilder\npublic abstract class BaseDocument&lt;ID extends Serializable&gt; implements Persistable&lt;ID&gt; {\n\n  @Version\n  private Long revision;\n\n  @CreatedDate\n  private Instant createdDateTime;\n\n  @LastModifiedDate\n  private Instant lastModifiedDateTime;\n\n  @Override\n  public boolean isNew() {\n    return isNull(createdDateTime);\n  }\n}\n</code></pre>\n\n<p>So make sure these fields are <code>null</code> when you are saving a new entity!</p>\n"},{"tags":[],"owner":{"account_id":3253983,"reputation":1481,"user_id":2743585,"display_name":"wi2ard"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1609272277,"creation_date":1609272277,"answer_id":65498073,"question_id":57610243,"body_markdown":"I struggled with this too. In my case, the problem was the `@Version` field in the object I was trying to save was set to 0. After I set it to null I didn&#39;t have this anymore. \r\nI noticed the methods in the trace getQueryForVersion, doSaveVersioned...\r\n\r\n```\r\njava.lang.IllegalStateException: Could not obtain identifier from .....\r\n\tat org.springframework.data.mapping.TargetAwareIdentifierAccessor.getRequiredIdentifier(TargetAwareIdentifierAccessor.java:48)\r\n\tat org.springframework.data.mongodb.core.EntityOperations$MappedEntity.getId(EntityOperations.java:527)\r\n\tat org.springframework.data.mongodb.core.EntityOperations$MappedEntity.getQueryForVersion(EntityOperations.java:556)\r\n\tat org.springframework.data.mongodb.core.MongoTemplate.doSaveVersioned(MongoTemplate.java:1383)\r\n\tat org.springframework.data.mongodb.core.MongoTemplate.save(MongoTemplate.java:1370)\r\n\tat org.springframework.data.mongodb.repository.support.SimpleMongoRepository.save(SimpleMongoRepository.java:88)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n```","title":"Could not obtain identifier from","body":"<p>I struggled with this too. In my case, the problem was the <code>@Version</code> field in the object I was trying to save was set to 0. After I set it to null I didn't have this anymore.\nI noticed the methods in the trace getQueryForVersion, doSaveVersioned...</p>\n<pre><code>java.lang.IllegalStateException: Could not obtain identifier from .....\n    at org.springframework.data.mapping.TargetAwareIdentifierAccessor.getRequiredIdentifier(TargetAwareIdentifierAccessor.java:48)\n    at org.springframework.data.mongodb.core.EntityOperations$MappedEntity.getId(EntityOperations.java:527)\n    at org.springframework.data.mongodb.core.EntityOperations$MappedEntity.getQueryForVersion(EntityOperations.java:556)\n    at org.springframework.data.mongodb.core.MongoTemplate.doSaveVersioned(MongoTemplate.java:1383)\n    at org.springframework.data.mongodb.core.MongoTemplate.save(MongoTemplate.java:1370)\n    at org.springframework.data.mongodb.repository.support.SimpleMongoRepository.save(SimpleMongoRepository.java:88)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13161401,"reputation":333,"user_id":9506781,"display_name":"Oskarro"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689946956,"creation_date":1689946956,"answer_id":76738539,"question_id":57610243,"body_markdown":"The problem most often occurs when you are using a Mongo database inside Spring application and you are trying to save (or overwrite) a document whose mandatory value is empty.\r\n\r\nIt is worth paying attention to the type of error that appears in the logs and check these top lines:\r\n\r\n    java.lang.IllegalStateException: Could not obtain identifier from XXX\r\n    at org.springframework.data.mapping.TargetAwareIdentifierAccessor.getRequiredIdentifier(TargetAwareIdentifierAccessor.java:48)\r\n    at org.springframework.data.mongodb.core.EntityOperations$MappedEntity.getId(EntityOperations.java:527)\r\n    at org.springframework.data.mongodb.core.EntityOperations$MappedEntity.getQueryForVersion(EntityOperations.java:556)\r\n    at org.springframework.data.mongodb.core.MongoTemplate.doSaveVersioned(MongoTemplate.java:1383)\r\n    at org.springframework.data.mongodb.core.MongoTemplate.save(MongoTemplate.java:1370)\r\n\r\nThe save method, instead of making a direct save to the database, makes an additional series of calls inside the spring mongo data library.\r\n\r\nThe **doSaveVersioned()** method catches our eye in particular. Inside this function, our service (unwittingly for us) tries to find an already existing record based on the ID to be able to verify and update the version. This of course causes an error, because such a document does not yet exist in the mongo database.\r\n\r\nThis app behavior is because one of your entities must have **@Version** annotation for one of the fields, for example:\r\n\r\n    public class YoursEntity {\r\n\r\n       protected String id;\r\n\r\n       protected String lastUpdateBy;\r\n\r\n       protected Instant lastUpdateOn;\r\n\r\n       protected String name;\r\n\r\n       @Version\r\n       protected Long version;\r\n    }\r\n\r\nTo fix this, you can do one of several things:\r\n- get rid of the **@Version** annotation\r\n- set the required field as null each time before saving\r\n\r\n      yoursEntity.setId(null);\r\n      yoursEntityRepo.save(yoursEntity);\r\n\r\n- when passing data in the request body, do not include this field (e.g. in json) and add the following annotation above the class:\r\n\r\n      @JsonInclude(JsonInclude.Include.NON_NULL)\r\n      public class YoursEntity {}\r\n\r\n","title":"Could not obtain identifier from","body":"<p>The problem most often occurs when you are using a Mongo database inside Spring application and you are trying to save (or overwrite) a document whose mandatory value is empty.</p>\n<p>It is worth paying attention to the type of error that appears in the logs and check these top lines:</p>\n<pre><code>java.lang.IllegalStateException: Could not obtain identifier from XXX\nat org.springframework.data.mapping.TargetAwareIdentifierAccessor.getRequiredIdentifier(TargetAwareIdentifierAccessor.java:48)\nat org.springframework.data.mongodb.core.EntityOperations$MappedEntity.getId(EntityOperations.java:527)\nat org.springframework.data.mongodb.core.EntityOperations$MappedEntity.getQueryForVersion(EntityOperations.java:556)\nat org.springframework.data.mongodb.core.MongoTemplate.doSaveVersioned(MongoTemplate.java:1383)\nat org.springframework.data.mongodb.core.MongoTemplate.save(MongoTemplate.java:1370)\n</code></pre>\n<p>The save method, instead of making a direct save to the database, makes an additional series of calls inside the spring mongo data library.</p>\n<p>The <strong>doSaveVersioned()</strong> method catches our eye in particular. Inside this function, our service (unwittingly for us) tries to find an already existing record based on the ID to be able to verify and update the version. This of course causes an error, because such a document does not yet exist in the mongo database.</p>\n<p>This app behavior is because one of your entities must have <strong>@Version</strong> annotation for one of the fields, for example:</p>\n<pre><code>public class YoursEntity {\n\n   protected String id;\n\n   protected String lastUpdateBy;\n\n   protected Instant lastUpdateOn;\n\n   protected String name;\n\n   @Version\n   protected Long version;\n}\n</code></pre>\n<p>To fix this, you can do one of several things:</p>\n<ul>\n<li><p>get rid of the <strong>@Version</strong> annotation</p>\n</li>\n<li><p>set the required field as null each time before saving</p>\n<pre><code>yoursEntity.setId(null);\nyoursEntityRepo.save(yoursEntity);\n</code></pre>\n</li>\n<li><p>when passing data in the request body, do not include this field (e.g. in json) and add the following annotation above the class:</p>\n<pre><code>@JsonInclude(JsonInclude.Include.NON_NULL)\npublic class YoursEntity {}\n</code></pre>\n</li>\n</ul>\n"}],"owner":{"account_id":1760367,"reputation":4807,"user_id":1607660,"accept_rate":70,"display_name":"FazoM"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4293,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1689946956,"creation_date":1566479750,"question_id":57610243,"body_markdown":"I am getting following problem when trying to save an Entity into `MongoDB` database.\r\n\r\nI am using `Spring` `CrudRepository`\r\n\r\nAn my code looks as follow:\r\n\r\n    UserDocument user = processUser();\r\n    userRepository.save(user);\r\n\r\nThis is the error I am getting:\r\n\r\n    java.lang.IllegalStateException: Could not obtain identifier from UserDocument(id=null, ownerId=..., ...)!\r\n    \tat o.s.d.m.TargetAwareIdentifierAccessor.getRequiredIdentifier(TargetAwareIdentifierAccessor.java:47)\r\n    \tat o.s.d.m.c.EntityOperations$MappedEntity.getId(EntityOperations.java:466)\r\n    \t... 53 frames excluded\r\n\r\nUserDocument class:\r\n\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Data;\r\n    import lombok.EqualsAndHashCode;\r\n    import lombok.NoArgsConstructor;\r\n    import lombok.experimental.Accessors;\r\n    import lombok.experimental.SuperBuilder;\r\n    import org.bson.types.ObjectId;\r\n    import org.springframework.data.annotation.Id;\r\n    import org.springframework.data.mongodb.core.index.CompoundIndex;\r\n    import org.springframework.data.mongodb.core.index.CompoundIndexes;\r\n    import org.springframework.data.mongodb.core.mapping.Document;\r\n\r\n    @Data\r\n    @EqualsAndHashCode(callSuper = true)\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Accessors(chain = true)\r\n    @SuperBuilder\r\n    @Document(collection = UserDocument.COLLECTION)\r\n    public class UserDocument extends BaseDocument&lt;ObjectId&gt; {\r\n    \r\n      public static final String COLLECTION = &quot;users&quot;;\r\n    \r\n      @Id\r\n      private ObjectId id;\r\n\r\n     .....\r\n    }","title":"Could not obtain identifier from","body":"<p>I am getting following problem when trying to save an Entity into <code>MongoDB</code> database.</p>\n\n<p>I am using <code>Spring</code> <code>CrudRepository</code></p>\n\n<p>An my code looks as follow:</p>\n\n<pre><code>UserDocument user = processUser();\nuserRepository.save(user);\n</code></pre>\n\n<p>This is the error I am getting:</p>\n\n<pre><code>java.lang.IllegalStateException: Could not obtain identifier from UserDocument(id=null, ownerId=..., ...)!\n    at o.s.d.m.TargetAwareIdentifierAccessor.getRequiredIdentifier(TargetAwareIdentifierAccessor.java:47)\n    at o.s.d.m.c.EntityOperations$MappedEntity.getId(EntityOperations.java:466)\n    ... 53 frames excluded\n</code></pre>\n\n<p>UserDocument class:</p>\n\n<pre><code>import lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\nimport lombok.NoArgsConstructor;\nimport lombok.experimental.Accessors;\nimport lombok.experimental.SuperBuilder;\nimport org.bson.types.ObjectId;\nimport org.springframework.data.annotation.Id;\nimport org.springframework.data.mongodb.core.index.CompoundIndex;\nimport org.springframework.data.mongodb.core.index.CompoundIndexes;\nimport org.springframework.data.mongodb.core.mapping.Document;\n\n@Data\n@EqualsAndHashCode(callSuper = true)\n@NoArgsConstructor\n@AllArgsConstructor\n@Accessors(chain = true)\n@SuperBuilder\n@Document(collection = UserDocument.COLLECTION)\npublic class UserDocument extends BaseDocument&lt;ObjectId&gt; {\n\n  public static final String COLLECTION = \"users\";\n\n  @Id\n  private ObjectId id;\n\n .....\n}\n</code></pre>\n"},{"tags":["java","fileoutputstream","bytearrayoutputstream"],"comments":[{"owner":{"account_id":18256279,"reputation":659,"user_id":13290159,"display_name":"0x150"},"score":0,"creation_date":1682405729,"post_id":76098334,"comment_id":134205575,"body_markdown":"If you need to store a file that big in memory, it&#39;s probably time to rethink your program&#39;s structure.","body":"If you need to store a file that big in memory, it&#39;s probably time to rethink your program&#39;s structure."},{"owner":{"display_name":"user13121564"},"score":0,"creation_date":1682408987,"post_id":76098334,"comment_id":134206265,"body_markdown":"I am not storing file in memory. I am adding 3 files to one output stream which is creating/appending it to the final file in azure storage account. But it overflows in between to file is never creates the file.","body":"I am not storing file in memory. I am adding 3 files to one output stream which is creating/appending it to the final file in azure storage account. But it overflows in between to file is never creates the file."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1682409074,"post_id":76098334,"comment_id":134206283,"body_markdown":"Please update the question to explain what you are doing.  Edit the question.","body":"Please update the question to explain what you are doing.  Edit the question."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1682409127,"post_id":76098334,"comment_id":134206294,"body_markdown":"&quot;I am not storing file in memory. &quot; Yes you are. Otherwise you wouldn&#39;t need a byte array output stream at all. And you can&#39;t describe using more than 2^31 bytes as &#39;memory efficient&#39;. There is never any reason for buffers this size.","body":"&quot;I am not storing file in memory. &quot; Yes you are. Otherwise you wouldn&#39;t need a byte array output stream at all. And you can&#39;t describe using more than 2^31 bytes as &#39;memory efficient&#39;. There is never any reason for buffers this size."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1682413760,"post_id":76098334,"comment_id":134207400,"body_markdown":"If you want to send three files to one outputstream, then you can open a file, use its `transferTo` method to send it to the outputstream, then open the next file, send it to the outputstream and then the last file and send it to the outputstream. Unless there is something you&#39;re not telling us, you really don&#39;t need to load all three files into memory to transfer them to an outputstream.","body":"If you want to send three files to one outputstream, then you can open a file, use its <code>transferTo</code> method to send it to the outputstream, then open the next file, send it to the outputstream and then the last file and send it to the outputstream. Unless there is something you&#39;re not telling us, you really don&#39;t need to load all three files into memory to transfer them to an outputstream."},{"owner":{"display_name":"user13121564"},"score":0,"creation_date":1682414714,"post_id":76098334,"comment_id":134207630,"body_markdown":"@StephenC  I have updated the question but it doesn&#39;t really affect the inital question. Purpose of this is to pass a file to output stream which creates block size greater than Integer max.","body":"@StephenC  I have updated the question but it doesn&#39;t really affect the inital question. Purpose of this is to pass a file to output stream which creates block size greater than Integer max."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1682416186,"post_id":76098334,"comment_id":134207979,"body_markdown":"No, that&#39;s not the purpose. The purpose is just the part about &#39;pass a file to output stream&#39;. The part about &#39;which creates block size greater than Integer max&#39; is just your misconceived idea about what a solution would look like. Lose it and your problem disappears.","body":"No, that&#39;s not the purpose. The purpose is just the part about &#39;pass a file to output stream&#39;. The part about &#39;which creates block size greater than Integer max&#39; is just your misconceived idea about what a solution would look like. Lose it and your problem disappears."},{"owner":{"display_name":"user13121564"},"score":0,"creation_date":1682416834,"post_id":76098334,"comment_id":134208143,"body_markdown":"@user207421 Can you please suggest a solution? I might be wrong in explaining but I&#39;m trying my best here. Like my comment in the answer below :\n&quot;I am reading 3 sub files created from a larger file and writing it to a file in azure storage.To write a file to a file in azure storage account, I don&#39;t know what other than Output Stream I can use. I was also wondering if there is anything else which uses Long as input to create block size. &quot;. If I should lose the idea of passing it to outputstream, Can you suggest what else can I use in this senario","body":"@user207421 Can you please suggest a solution? I might be wrong in explaining but I&#39;m trying my best here. Like my comment in the answer below : &quot;I am reading 3 sub files created from a larger file and writing it to a file in azure storage.To write a file to a file in azure storage account, I don&#39;t know what other than Output Stream I can use. I was also wondering if there is anything else which uses Long as input to create block size. &quot;. If I should lose the idea of passing it to outputstream, Can you suggest what else can I use in this senario"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1682417036,"post_id":76098334,"comment_id":134208193,"body_markdown":"So your question is about how to write to a file in Azure storage. Not about huge byte array output streams. What output stream are you *presently* using? and what makes you think you need a different one? and what does &#39;us[ing] `Long` as input to create block size&#39; have to do with anything? All you have to do is adopt the `transferTo()` suggestion above with the successive input streams. I don&#39;t know why you haven&#39;t tried it already. You need to exhibit some *relevant* code here.","body":"So your question is about how to write to a file in Azure storage. Not about huge byte array output streams. What output stream are you <i>presently</i> using? and what makes you think you need a different one? and what does &#39;us[ing] <code>Long</code> as input to create block size&#39; have to do with anything? All you have to do is adopt the <code>transferTo()</code> suggestion above with the successive input streams. I don&#39;t know why you haven&#39;t tried it already. You need to exhibit some <i>relevant</i> code here."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1689947181,"post_id":76098334,"comment_id":135289058,"body_markdown":"The classes mentioned in this question don&#39;t appear to be part of the standard java API.  Are they Azure, Spring?  Please update the tags to reflect the third party platform.","body":"The classes mentioned in this question don&#39;t appear to be part of the standard java API.  Are they Azure, Spring?  Please update the tags to reflect the third party platform."}],"answers":[{"comments":[{"owner":{"display_name":"user13121564"},"score":0,"creation_date":1682416501,"post_id":76098767,"comment_id":134208058,"body_markdown":"I am reading 3 sub files created from a larger file and writing it to a file in azure storage.To write a file to a file in azure storage account, I don&#39;t know what other than Output Stream I can use. I was also wondering if there is anything else which uses Long as input to create block size.","body":"I am reading 3 sub files created from a larger file and writing it to a file in azure storage.To write a file to a file in azure storage account, I don&#39;t know what other than Output Stream I can use. I was also wondering if there is anything else which uses Long as input to create block size."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1682417503,"post_id":76098767,"comment_id":134208297,"body_markdown":"That wouldn&#39;t work in Java.  Arrays are limited by the language to 2^31 - 1 elements.","body":"That wouldn&#39;t work in Java.  Arrays are limited by the language to 2^31 - 1 elements."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1682417822,"post_id":76098767,"comment_id":134208362,"body_markdown":"What kind of Azure storage?  Blob? Queue?  File?  DataLake?","body":"What kind of Azure storage?  Blob? Queue?  File?  DataLake?"},{"owner":{"display_name":"user13121564"},"score":0,"creation_date":1682418635,"post_id":76098767,"comment_id":134208527,"body_markdown":"from blob to file","body":"from blob to file"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1682420154,"post_id":76098767,"comment_id":134208839,"body_markdown":"Well you should probably be opening a `BlobOutputStream`.  Take a look at https://stackoverflow.com/questions/40748705 for some example code.","body":"Well you should probably be opening a <code>BlobOutputStream</code>.  Take a look at <a href=\"https://stackoverflow.com/questions/40748705\">stackoverflow.com/questions/40748705</a> for some example code."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1682420252,"post_id":76098767,"comment_id":134208858,"body_markdown":"Alternatively, you should be able to use a Java SE `PipesInputStream` / `PipedOutputStream` pair.","body":"Alternatively, you should be able to use a Java SE <code>PipesInputStream</code> / <code>PipedOutputStream</code> pair."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1682496944,"post_id":76098767,"comment_id":134223664,"body_markdown":"I agree about the blob, but the piped streams don&#39;t really get you anywhere at all here, just another pointless thread and another pointless set of I/O operations. They&#39;re just a toy really. I used them once in about 1997, never again.","body":"I agree about the blob, but the piped streams don&#39;t really get you anywhere at all here, just another pointless thread and another pointless set of I/O operations. They&#39;re just a toy really. I used them once in about 1997, never again."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682411838,"creation_date":1682408942,"answer_id":76098767,"question_id":76098334,"body_markdown":"`FastByteArrayOutputStream` will not work for your use-case.  While it uses a `Deque&lt;byte[]&gt;` internally, that is just an optimization to reduce the amount of copying.  If you look at the source code, you will see that there are a number of places that limit the size to the maximum size of a `byte[]` ... which is 2^31 - 1 bytes; i.e. 2GB - 1.\r\n\r\n&gt; I&#39;ve got a file greater than max size ...\r\n\r\nPossible solutions:\r\n\r\n  1.  If you are outputting the file, write the data directly to the file or socket.  There is no obvious reason to write to use a `ByteArrayOutputStream` variant for this.  It won&#39;t improve performance!\r\n\r\n  2.  Take the source code for `FastByteArrayOutputStream` and modify it for your own purposes.  However, you will run into the problem that the `getByteArray` and `unsafeGetByteArray` methods are unimplementable for 2GB and larger content.  And similar issues.\r\n\r\nThere may be other solutions, but it is hard to say.  You don&#39;t explain what you are actually doing.\r\n\r\n","title":"Memory efficient FastByteArrayOutputStream with minCapacity greater than max size of Integer i.e 2147483647","body":"<p><code>FastByteArrayOutputStream</code> will not work for your use-case.  While it uses a <code>Deque&lt;byte[]&gt;</code> internally, that is just an optimization to reduce the amount of copying.  If you look at the source code, you will see that there are a number of places that limit the size to the maximum size of a <code>byte[]</code> ... which is 2^31 - 1 bytes; i.e. 2GB - 1.</p>\n<blockquote>\n<p>I've got a file greater than max size ...</p>\n</blockquote>\n<p>Possible solutions:</p>\n<ol>\n<li><p>If you are outputting the file, write the data directly to the file or socket.  There is no obvious reason to write to use a <code>ByteArrayOutputStream</code> variant for this.  It won't improve performance!</p>\n</li>\n<li><p>Take the source code for <code>FastByteArrayOutputStream</code> and modify it for your own purposes.  However, you will run into the problem that the <code>getByteArray</code> and <code>unsafeGetByteArray</code> methods are unimplementable for 2GB and larger content.  And similar issues.</p>\n</li>\n</ol>\n<p>There may be other solutions, but it is hard to say.  You don't explain what you are actually doing.</p>\n"}],"owner":{"display_name":"user13121564"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":188,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1689945516,"creation_date":1682405577,"question_id":76098334,"body_markdown":"FastByteArrayOutputStream has a write function which has addBuffer which accepts minCapacity in integer and allocates next block size as next power of 2 of minCapacity. So, block size keeps increasing in order to accomodate the file in buffer.\r\n\r\nI have a file greater than max size, (Internally diving it to 3 files, pushing them to outputstream an finally creating it a file in azure storage) so while writing it to buffer the minCapacity goes over max integer value of 2147483647 and starts assigning block size in signed integer -2147483648, which is invalid and gives exception as in the image attached. \r\n","title":"Memory efficient FastByteArrayOutputStream with minCapacity greater than max size of Integer i.e 2147483647","body":"<p>FastByteArrayOutputStream has a write function which has addBuffer which accepts minCapacity in integer and allocates next block size as next power of 2 of minCapacity. So, block size keeps increasing in order to accomodate the file in buffer.</p>\n<p>I have a file greater than max size, (Internally diving it to 3 files, pushing them to outputstream an finally creating it a file in azure storage) so while writing it to buffer the minCapacity goes over max integer value of 2147483647 and starts assigning block size in signed integer -2147483648, which is invalid and gives exception as in the image attached.</p>\n"},{"tags":["java","ios","appium"],"comments":[{"owner":{"account_id":969227,"reputation":1332,"user_id":992094,"accept_rate":43,"display_name":"Gaurav"},"score":0,"creation_date":1439821423,"post_id":32048031,"comment_id":52004712,"body_markdown":"Make sure only one instance of appium server is running on your machine. Close all the appium server, start the server and try again.","body":"Make sure only one instance of appium server is running on your machine. Close all the appium server, start the server and try again."}],"answers":[{"comments":[{"owner":{"account_id":392515,"reputation":1697,"user_id":753827,"accept_rate":85,"display_name":"Dominik"},"score":2,"creation_date":1490715068,"post_id":32077464,"comment_id":73231044,"body_markdown":"I used &quot;--session-override true&quot; but that didn&#39;t work. Same error.","body":"I used &quot;--session-override true&quot; but that didn&#39;t work. Same error."}],"tags":[],"owner":{"account_id":1448286,"reputation":2682,"user_id":1366056,"accept_rate":83,"display_name":"Shambu"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1439914184,"creation_date":1439914184,"answer_id":32077464,"question_id":32048031,"body_markdown":"This happens because the previous session wasn&#39;t shutdown properly and it happens when there is exception thrown in your test. Restart the appium server and try it , it should resolve the issue.\r\n\r\nAlternatively if you starting appium as node process, you can give option `&#39;--session-override true&#39;` and this would avoid this problem","title":"org.openqa.selenium.SessionNotCreatedException: A new session could not be created. (Original error: Requested a new session but one was in progress)","body":"<p>This happens because the previous session wasn't shutdown properly and it happens when there is exception thrown in your test. Restart the appium server and try it , it should resolve the issue.</p>\n\n<p>Alternatively if you starting appium as node process, you can give option <code>'--session-override true'</code> and this would avoid this problem</p>\n"},{"comments":[{"owner":{"account_id":3093474,"reputation":128,"user_id":2619145,"accept_rate":38,"display_name":"Taylan Derinbay"},"score":5,"creation_date":1473231148,"post_id":34876357,"comment_id":66055071,"body_markdown":"What&#39;s the meaning of this?\n\ncapabilities.setCapability(&quot;no&quot;,true);","body":"What&#39;s the meaning of this?  capabilities.setCapability(&quot;no&quot;,true);"}],"tags":[],"owner":{"account_id":5122312,"reputation":719,"user_id":4105475,"accept_rate":100,"display_name":"Humble_PrOgRaMeR"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1453205737,"creation_date":1453205015,"answer_id":34876357,"question_id":32048031,"body_markdown":"The following is working for me. I am testing by connecting Android device. Please make changes as per your need and apply, this should work now.\r\n\r\n            DesiredCapabilities capabilities = new DesiredCapabilities().android();\r\n\t\t\tcapabilities.setCapability(&quot;no&quot;,true);\r\n\t\t\tcapabilities.setCapability(&quot;newCommandTimeout&quot;, 100000);\r\n\t\t\tcapabilities.setCapability(&quot;noReset&quot;, true);\r\n\t\t\tcapabilities.setCapability(CapabilityType.BROWSER_NAME, &quot;&quot;);\r\n\t\t\tcapabilities.setCapability(CapabilityType.VERSION, &quot;4.4.2&quot;);\r\n\t\t\tcapabilities.setCapability(&quot;deviceName&quot;, &quot;Galaxy nexus&quot;);\r\n\t\t\tcapabilities.setCapability(&quot;app&quot;, application.getAbsolutePath());\r\n\t\t\tcapabilities.setCapability(&quot;automationName&quot;, &quot;selendroid&quot;);\r\n\t\t\tcapabilities.setCapability(&quot;noRest&quot;, true);\r\n\t\t\tdriver = new AndroidDriver&lt;MobileElement&gt;(new URL(&quot;http://127.0.0.1:4723/wd/hub&quot;), capabilities);\r\n\t\t\t\r\n\r\n\r\n","title":"org.openqa.selenium.SessionNotCreatedException: A new session could not be created. (Original error: Requested a new session but one was in progress)","body":"<p>The following is working for me. I am testing by connecting Android device. Please make changes as per your need and apply, this should work now.</p>\n\n<pre><code>        DesiredCapabilities capabilities = new DesiredCapabilities().android();\n        capabilities.setCapability(\"no\",true);\n        capabilities.setCapability(\"newCommandTimeout\", 100000);\n        capabilities.setCapability(\"noReset\", true);\n        capabilities.setCapability(CapabilityType.BROWSER_NAME, \"\");\n        capabilities.setCapability(CapabilityType.VERSION, \"4.4.2\");\n        capabilities.setCapability(\"deviceName\", \"Galaxy nexus\");\n        capabilities.setCapability(\"app\", application.getAbsolutePath());\n        capabilities.setCapability(\"automationName\", \"selendroid\");\n        capabilities.setCapability(\"noRest\", true);\n        driver = new AndroidDriver&lt;MobileElement&gt;(new URL(\"http://127.0.0.1:4723/wd/hub\"), capabilities);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5009268,"reputation":353,"user_id":4025989,"display_name":"Gloria Rampur"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1481715372,"creation_date":1481715372,"answer_id":41141596,"question_id":32048031,"body_markdown":"Adding the deviceName in the capabilities helped.\r\nIn the appium logs I could figure out the missing thing.","title":"org.openqa.selenium.SessionNotCreatedException: A new session could not be created. (Original error: Requested a new session but one was in progress)","body":"<p>Adding the deviceName in the capabilities helped.\nIn the appium logs I could figure out the missing thing.</p>\n"},{"tags":[],"owner":{"account_id":100473,"reputation":3456,"user_id":270835,"accept_rate":80,"display_name":"Tarun"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1484143710,"creation_date":1484143710,"answer_id":41593079,"question_id":32048031,"body_markdown":"If on appium app then select `Override Existing Sessions` checkbox under Settings - \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8PvBT.png","title":"org.openqa.selenium.SessionNotCreatedException: A new session could not be created. (Original error: Requested a new session but one was in progress)","body":"<p>If on appium app then select <code>Override Existing Sessions</code> checkbox under Settings - </p>\n\n<p><a href=\"https://i.stack.imgur.com/8PvBT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8PvBT.png\" alt=\"enter image description here\"></a></p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1631776270,"post_id":69203676,"comment_id":122314236,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-ask).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/69203676/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-ask\">in the help center</a>."}],"tags":[],"owner":{"account_id":22767721,"reputation":1,"user_id":16925540,"display_name":"Fayaz"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631775325,"creation_date":1631775325,"answer_id":69203676,"question_id":32048031,"body_markdown":"Kill running servers in the task manager like appium , basically end the task of cmd.","title":"org.openqa.selenium.SessionNotCreatedException: A new session could not be created. (Original error: Requested a new session but one was in progress)","body":"<p>Kill running servers in the task manager like appium , basically end the task of cmd.</p>\n"},{"tags":[],"owner":{"account_id":4905500,"reputation":46,"user_id":3952356,"display_name":"Aakash Jaiswal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649995723,"creation_date":1649995723,"answer_id":71879973,"question_id":32048031,"body_markdown":"The easiest way that I found was stop the Appium server, Quit it wait for some seconds and again start it and run your script. If needed can do with emulator as well","title":"org.openqa.selenium.SessionNotCreatedException: A new session could not be created. (Original error: Requested a new session but one was in progress)","body":"<p>The easiest way that I found was stop the Appium server, Quit it wait for some seconds and again start it and run your script. If needed can do with emulator as well</p>\n"},{"tags":[],"owner":{"account_id":29032933,"reputation":1,"user_id":22239432,"display_name":"Yogesh Prakash Shinde"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689945488,"creation_date":1689663958,"answer_id":76710252,"question_id":32048031,"body_markdown":"I have faced the same error many time. By following simple below steps I was able to fix the issue.\r\n\r\n1. Restart eclipse\r\n2. Close your emulator and android studio\r\n3. Quit `appium` on terminal\r\n4. Start the android studio \r\n5. Delete the device and crate new device\r\n6. Now launch the emulator and run the script\r\n","title":"org.openqa.selenium.SessionNotCreatedException: A new session could not be created. (Original error: Requested a new session but one was in progress)","body":"<p>I have faced the same error many time. By following simple below steps I was able to fix the issue.</p>\n<ol>\n<li>Restart eclipse</li>\n<li>Close your emulator and android studio</li>\n<li>Quit <code>appium</code> on terminal</li>\n<li>Start the android studio</li>\n<li>Delete the device and crate new device</li>\n<li>Now launch the emulator and run the script</li>\n</ol>\n"}],"owner":{"account_id":4921899,"reputation":55,"user_id":3964266,"display_name":"amitav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70739,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":32077464,"answer_count":7,"score":5,"last_activity_date":1689945488,"creation_date":1439807143,"question_id":32048031,"body_markdown":"I am using Appium 1.4.8 for iOS . I have build the code in simulator using xcode and successfully able to launch the server as well as Appium Inspector. But while running my code it is throwing the below error.\r\n\r\nMy capabilities are \r\n@BeforeMethod\r\npublic void setUp() throws MalformedURLException{\r\n\t\r\n\t\r\n\tDesiredCapabilities capabilities = new DesiredCapabilities();\r\n\tcapabilities.setCapability(&quot;appium-version&quot;, &quot;1.0&quot;);\r\n\tcapabilities.setCapability(&quot;platformName&quot;, &quot;iOS&quot;);\r\n\tcapabilities.setCapability(&quot;platformVersion&quot;, &quot;8.4&quot;);\r\n\tcapabilities.setCapability(&quot;deviceName&quot;, &quot;iPad 2&quot;);\r\n\tcapabilities.setCapability(&quot;app&quot;, &quot;/Users/arunhs/Desktop/AppiumReq/SRC/build/Debug-iphonesimulator/ComplianceWire.app&quot;);\r\n\tdriver = new AppiumDriver(new URL(&quot;http://127.0.0.1:4723/wd/hub&quot;), capabilities);\r\n\tdriver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);\r\n\t\r\n\t\r\n}\r\n\r\n    Error is: \r\n    FAILED CONFIGURATION: @BeforeMethod setUp\r\n    org.openqa.selenium.SessionNotCreatedException: A new session could not be created. (Original error: Requested a new session but one was in progress) (WARNING: The server did not provide any stacktrace information)\r\n    Command duration or timeout: 447 milliseconds\r\n    Build info: version: &#39;2.47.1&#39;, revision: &#39;411b314&#39;, time: &#39;2015-07-30 03:03:16&#39;\r\n    System info: host: &#39;N/A&#39;, ip: &#39;N/A&#39;, os.name: &#39;Mac OS X&#39;, os.arch: &#39;x86_64&#39;, os.version: &#39;10.10.4&#39;, java.version: &#39;1.7.0_79&#39;\r\n    Driver info: io.appium.java_client.AppiumDriver\r\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\r\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\r\n    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:206)\r\n    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:158)\r\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:595)\r\n    at io.appium.java_client.AppiumDriver.execute(AppiumDriver.java:88)\r\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:242)\r\n    at org.openqa.selenium.remote.RemoteWebDriver.(RemoteWebDriver.java:128)\r\n    at org.openqa.selenium.remote.RemoteWebDriver.(RemoteWebDriver.java:155)\r\n    at io.appium.java_client.AppiumDriver.(AppiumDriver.java:44)\r\n    at com.selenium.test.DriverScript.setUp(DriverScript.java:68)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke(Method.java:606)\r\n    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:85)\r\n    at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:515)\r\n    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:213)\r\n    at org.testng.internal.Invoker.invokeMethod(Invoker.java:590)\r\n    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:834)\r\n    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1142)\r\n    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:124)\r\n    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:108)\r\n    at org.testng.TestRunner.privateRun(TestRunner.java:771)\r\n    at org.testng.TestRunner.run(TestRunner.java:621)\r\n    at org.testng.SuiteRunner.runTest(SuiteRunner.java:357)\r\n    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:352)\r\n    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:310)\r\n    at org.testng.SuiteRunner.run(SuiteRunner.java:259)\r\n    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)\r\n    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)\r\n    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1176)\r\n    at org.testng.TestNG.runSuitesLocally(TestNG.java:1101)\r\n    at org.testng.TestNG.run(TestNG.java:1009)\r\n    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)\r\n    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)\r\n    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175)","title":"org.openqa.selenium.SessionNotCreatedException: A new session could not be created. (Original error: Requested a new session but one was in progress)","body":"<p>I am using Appium 1.4.8 for iOS . I have build the code in simulator using xcode and successfully able to launch the server as well as Appium Inspector. But while running my code it is throwing the below error.</p>\n\n<p>My capabilities are \n@BeforeMethod\npublic void setUp() throws MalformedURLException{</p>\n\n<pre><code>DesiredCapabilities capabilities = new DesiredCapabilities();\ncapabilities.setCapability(\"appium-version\", \"1.0\");\ncapabilities.setCapability(\"platformName\", \"iOS\");\ncapabilities.setCapability(\"platformVersion\", \"8.4\");\ncapabilities.setCapability(\"deviceName\", \"iPad 2\");\ncapabilities.setCapability(\"app\", \"/Users/arunhs/Desktop/AppiumReq/SRC/build/Debug-iphonesimulator/ComplianceWire.app\");\ndriver = new AppiumDriver(new URL(\"http://127.0.0.1:4723/wd/hub\"), capabilities);\ndriver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);\n</code></pre>\n\n<p>}</p>\n\n<pre><code>Error is: \nFAILED CONFIGURATION: @BeforeMethod setUp\norg.openqa.selenium.SessionNotCreatedException: A new session could not be created. (Original error: Requested a new session but one was in progress) (WARNING: The server did not provide any stacktrace information)\nCommand duration or timeout: 447 milliseconds\nBuild info: version: '2.47.1', revision: '411b314', time: '2015-07-30 03:03:16'\nSystem info: host: 'N/A', ip: 'N/A', os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.10.4', java.version: '1.7.0_79'\nDriver info: io.appium.java_client.AppiumDriver\nat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\nat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.lang.reflect.Constructor.newInstance(Constructor.java:526)\nat org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:206)\nat org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:158)\nat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:595)\nat io.appium.java_client.AppiumDriver.execute(AppiumDriver.java:88)\nat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:242)\nat org.openqa.selenium.remote.RemoteWebDriver.(RemoteWebDriver.java:128)\nat org.openqa.selenium.remote.RemoteWebDriver.(RemoteWebDriver.java:155)\nat io.appium.java_client.AppiumDriver.(AppiumDriver.java:44)\nat com.selenium.test.DriverScript.setUp(DriverScript.java:68)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:606)\nat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:85)\nat org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:515)\nat org.testng.internal.Invoker.invokeConfigurations(Invoker.java:213)\nat org.testng.internal.Invoker.invokeMethod(Invoker.java:590)\nat org.testng.internal.Invoker.invokeTestMethod(Invoker.java:834)\nat org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1142)\nat org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:124)\nat org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:108)\nat org.testng.TestRunner.privateRun(TestRunner.java:771)\nat org.testng.TestRunner.run(TestRunner.java:621)\nat org.testng.SuiteRunner.runTest(SuiteRunner.java:357)\nat org.testng.SuiteRunner.runSequentially(SuiteRunner.java:352)\nat org.testng.SuiteRunner.privateRun(SuiteRunner.java:310)\nat org.testng.SuiteRunner.run(SuiteRunner.java:259)\nat org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)\nat org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)\nat org.testng.TestNG.runSuitesSequentially(TestNG.java:1176)\nat org.testng.TestNG.runSuitesLocally(TestNG.java:1101)\nat org.testng.TestNG.run(TestNG.java:1009)\nat org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)\nat org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)\nat org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175)\n</code></pre>\n"},{"tags":["java","exception","apache-kafka"],"comments":[{"owner":{"account_id":174366,"reputation":12158,"user_id":403682,"accept_rate":95,"display_name":"Kenny Cason"},"score":0,"creation_date":1434039176,"post_id":22756144,"comment_id":49621948,"body_markdown":"You happen to find a solution to this? It&#39;s been a small burden for an auditing app I&#39;m working on.","body":"You happen to find a solution to this? It&#39;s been a small burden for an auditing app I&#39;m working on."}],"answers":[{"comments":[{"owner":{"account_id":17198,"reputation":5232,"user_id":38249,"accept_rate":67,"display_name":"James Bloomer"},"score":2,"creation_date":1431523245,"post_id":22792400,"comment_id":48535990,"body_markdown":"The KafkaProducer swallows the errors as pivovarit said. See https://github.com/apache/kafka/blob/7130da90a9ee9e6fb4beb2a2a6ab05c06c9bfac4/clients/src/main/java/org/apache/kafka/clients/producer/internals/Sender.java#L124","body":"The KafkaProducer swallows the errors as pivovarit said. See <a href=\"https://github.com/apache/kafka/blob/7130da90a9ee9e6fb4beb2a2a6ab05c06c9bfac4/clients/src/main/java/org/apache/kafka/clients/producer/internals/Sender.java#L124\" rel=\"nofollow noreferrer\">github.com/apache/kafka/blob/&hellip;</a>"},{"owner":{"account_id":17198,"reputation":5232,"user_id":38249,"accept_rate":67,"display_name":"James Bloomer"},"score":0,"creation_date":1431523693,"post_id":22792400,"comment_id":48536338,"body_markdown":"Or rather https://github.com/apache/kafka/blob/0.8.2/clients/src/main/java/org/apache/kafka/common/network/Selector.java#L276 for the exact error.","body":"Or rather <a href=\"https://github.com/apache/kafka/blob/0.8.2/clients/src/main/java/org/apache/kafka/common/network/Selector.java#L276\" rel=\"nofollow noreferrer\">github.com/apache/kafka/blob/0.8.2/clients/src/main/java/org&zwnj;&#8203;/&hellip;</a> for the exact error."}],"tags":[],"owner":{"account_id":3224137,"reputation":8035,"user_id":2720864,"accept_rate":43,"display_name":"user2720864"},"comment_count":2,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1396372056,"creation_date":1396372056,"answer_id":22792400,"question_id":22756144,"body_markdown":"I think the one thing you could do is to use a try/catch to log all `Throwable` in your producer code.","title":"How can I handle IOException when Kafka is down?","body":"<p>I think the one thing you could do is to use a try/catch to log all <code>Throwable</code> in your producer code.</p>\n"},{"comments":[{"owner":{"account_id":227595,"reputation":761,"user_id":489363,"display_name":"Peter Davis"},"score":1,"creation_date":1460346664,"post_id":36488344,"comment_id":60681222,"body_markdown":"I&#39;m sure it wasn&#39;t: callbacks and futures were [added](http://www.confluent.io/blog/whats-coming-in-apache-kafka-0-8-2/) in the &quot;new&quot; producer client in December 2014.  But now we have an answer!","body":"I&#39;m sure it wasn&#39;t: callbacks and futures were <a href=\"http://www.confluent.io/blog/whats-coming-in-apache-kafka-0-8-2/\" rel=\"nofollow noreferrer\">added</a> in the &quot;new&quot; producer client in December 2014.  But now we have an answer!"}],"tags":[],"owner":{"account_id":227595,"reputation":761,"user_id":489363,"display_name":"Peter Davis"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1460068225,"creation_date":1460068225,"answer_id":36488344,"question_id":22756144,"body_markdown":"Call `get()` on the future returned by [Producer.send(...)](https://kafka.apache.org/090/javadoc/org/apache/kafka/clients/producer/KafkaProducer.html#send(org.apache.kafka.clients.producer.ProducerRecord)), or if you don&#39;t want to block your code, pass a [callback](https://kafka.apache.org/090/javadoc/org/apache/kafka/clients/producer/KafkaProducer.html#send(org.apache.kafka.clients.producer.ProducerRecord,%20org.apache.kafka.clients.producer.Callback)).\r\n\r\n```try {\r\n  producer.send(new ProducerRecord(&quot;mytopic&quot;, key, value))\r\n     .get(); // block until acknowledged\r\n} catch(Exception e) {\r\n  // handle message wasn&#39;t acknowledged\r\n}\r\n```","title":"How can I handle IOException when Kafka is down?","body":"<p>Call <code>get()</code> on the future returned by <a href=\"https://kafka.apache.org/090/javadoc/org/apache/kafka/clients/producer/KafkaProducer.html#send(org.apache.kafka.clients.producer.ProducerRecord)\" rel=\"noreferrer\">Producer.send(...)</a>, or if you don't want to block your code, pass a <a href=\"https://kafka.apache.org/090/javadoc/org/apache/kafka/clients/producer/KafkaProducer.html#send(org.apache.kafka.clients.producer.ProducerRecord,%20org.apache.kafka.clients.producer.Callback)\" rel=\"noreferrer\">callback</a>.</p>\n\n<p><code>try {\n  producer.send(new ProducerRecord(\"mytopic\", key, value))\n     .get(); // block until acknowledged\n} catch(Exception e) {\n  // handle message wasn't acknowledged\n}\n</code></p>\n"}],"owner":{"account_id":2570598,"reputation":13282,"user_id":2229438,"accept_rate":94,"display_name":"Grzegorz Piwowarek"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4502,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":36488344,"answer_count":2,"score":14,"last_activity_date":1689945185,"creation_date":1396252084,"question_id":22756144,"body_markdown":"I am trying to publish message, and Apache Kafka is down.\r\nHow should I handle an emergency situation like this?\r\n\r\nKafkaProducer::send() method doesn&#39;t throw any exceptions that could be handled. Producer swallows them and logs errors instead, so I get flooded with messages like this, and everything hangs until Kafka gets connected again.\r\n\r\n    2014-03-31 09:38:23.752 ERROR o.a.kafka.common.network.Selector - Error in I/O: \r\n    java.net.ConnectException: Connection refused\r\n\t    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) ~[na:1.7.0_51]\r\n\t    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739) ~[na:1.7.0_51]\r\n\t    at org.apache.kafka.common.network.Selector.poll(Selector.java:205) ~[kafka-clients-0.8.1.jar:na]\r\n\t    at org.apache.kafka.clients.producer.internals.Sender.run(Sender.java:212) [kafka-clients-0.8.1.jar:na]\r\n\t    at org.apache.kafka.clients.producer.internals.Sender.run(Sender.java:150) [kafka-clients-0.8.1.jar:na]\r\n\t    at java.lang.Thread.run(Thread.java:744) [na:1.7.0_51]\r\n\r\n","title":"How can I handle IOException when Kafka is down?","body":"<p>I am trying to publish message, and Apache Kafka is down.\nHow should I handle an emergency situation like this?</p>\n\n<p>KafkaProducer::send() method doesn't throw any exceptions that could be handled. Producer swallows them and logs errors instead, so I get flooded with messages like this, and everything hangs until Kafka gets connected again.</p>\n\n<pre><code>2014-03-31 09:38:23.752 ERROR o.a.kafka.common.network.Selector - Error in I/O: \njava.net.ConnectException: Connection refused\n    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) ~[na:1.7.0_51]\n    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739) ~[na:1.7.0_51]\n    at org.apache.kafka.common.network.Selector.poll(Selector.java:205) ~[kafka-clients-0.8.1.jar:na]\n    at org.apache.kafka.clients.producer.internals.Sender.run(Sender.java:212) [kafka-clients-0.8.1.jar:na]\n    at org.apache.kafka.clients.producer.internals.Sender.run(Sender.java:150) [kafka-clients-0.8.1.jar:na]\n    at java.lang.Thread.run(Thread.java:744) [na:1.7.0_51]\n</code></pre>\n"},{"tags":["java","velocity"],"answers":[{"tags":[],"owner":{"account_id":302948,"reputation":12414,"user_id":611600,"accept_rate":86,"display_name":"Ali"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1429793739,"creation_date":1312903145,"answer_id":6998572,"question_id":6998412,"body_markdown":"You could just create 2 methods `getName()` and `getname()`\r\nthen when you use `${s_attribute.name}` velocity will use `getname()` and when you use `${s_attribute.Name}` velocity will use the `getName()` method.\r\n\r\n**From the [Velocity guide][1]:**\r\n\r\n&gt; Property Lookup Rules \r\n&gt; \r\n&gt; As was mentioned earlier, properties often refer to methods of the\r\n&gt; parent object. Velocity is quite clever when figuring out which method\r\n&gt; corresponds to a requested property. It tries out different\r\n&gt; alternatives based on several established naming conventions. The\r\n&gt; exact lookup sequence depends on whether or not the property name\r\n&gt; starts with an upper-case letter. For lower-case names, such as\r\n&gt; $customer.address, the sequence is\r\n\r\n&gt;     getaddress()\r\n    getAddress()\r\n    get(&quot;address&quot;)\r\n    isAddress()\r\n    \r\n&gt; For upper-case property names like $customer.Address, it is slightly different:\r\n\r\n&gt;     getAddress()\r\n    getaddress()\r\n    get(&quot;Address&quot;)\r\n    isAddress()\r\n\r\n\r\nWhat i&#39;m suggesting is that you handle it in your object on the backend.\r\n\r\n\r\n  [1]: https://velocity.apache.org/engine/devel/user-guide.html#propertylookuprules","title":"Velocity string function","body":"<p>You could just create 2 methods <code>getName()</code> and <code>getname()</code>\nthen when you use <code>${s_attribute.name}</code> velocity will use <code>getname()</code> and when you use <code>${s_attribute.Name}</code> velocity will use the <code>getName()</code> method.</p>\n\n<p><strong>From the <a href=\"https://velocity.apache.org/engine/devel/user-guide.html#propertylookuprules\" rel=\"nofollow\">Velocity guide</a>:</strong></p>\n\n<blockquote>\n  <p>Property Lookup Rules </p>\n  \n  <p>As was mentioned earlier, properties often refer to methods of the\n  parent object. Velocity is quite clever when figuring out which method\n  corresponds to a requested property. It tries out different\n  alternatives based on several established naming conventions. The\n  exact lookup sequence depends on whether or not the property name\n  starts with an upper-case letter. For lower-case names, such as\n  $customer.address, the sequence is</p>\n\n<pre><code>getaddress()\ngetAddress()\nget(\"address\")\nisAddress()\n</code></pre>\n  \n  <p>For upper-case property names like $customer.Address, it is slightly different:</p>\n\n<pre><code>getAddress()\ngetaddress()\nget(\"Address\")\nisAddress()\n</code></pre>\n</blockquote>\n\n<p>What i'm suggesting is that you handle it in your object on the backend.</p>\n"},{"comments":[{"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"score":0,"creation_date":1312903267,"post_id":6998581,"comment_id":8354073,"body_markdown":"I hope you meant `toUpperCase` and `toLowerCase`?","body":"I hope you meant <code>toUpperCase</code> and <code>toLowerCase</code>?"},{"owner":{"account_id":302948,"reputation":12414,"user_id":611600,"accept_rate":86,"display_name":"Ali"},"score":0,"creation_date":1312903355,"post_id":6998581,"comment_id":8354100,"body_markdown":"Yes, in this case the same macro would have to be applied twice once for the first character and once for the rest of the string. Personally this being the presentation layer I would avoid it. Also, on the second string doing `toLowerCase` is a bad idea, what if your validable is called customerName, you would want the method produced to be getCustomerName and not getCustomername.","body":"Yes, in this case the same macro would have to be applied twice once for the first character and once for the rest of the string. Personally this being the presentation layer I would avoid it. Also, on the second string doing <code>toLowerCase</code> is a bad idea, what if your validable is called customerName, you would want the method produced to be getCustomerName and not getCustomername."},{"owner":{"account_id":171452,"reputation":7936,"user_id":398885,"display_name":"d-live"},"score":0,"creation_date":1312903994,"post_id":6998581,"comment_id":8354330,"body_markdown":"@adarshr Oppa yes.. I did meant toUpperCase()/toLowerCase() - wast doing any java since last year!! - but yes you get the idea.","body":"@adarshr Oppa yes.. I did meant toUpperCase()/toLowerCase() - wast doing any java since last year!! - but yes you get the idea."},{"owner":{"account_id":171452,"reputation":7936,"user_id":398885,"display_name":"d-live"},"score":0,"creation_date":1312904364,"post_id":6998581,"comment_id":8354458,"body_markdown":"@Ali - Yes I agree to some extent - You can have all sorts of formatting inconcistencies in incoming text - for that you may need to write a utility function somewhere and invoke it to generate properly formatted names/variables etc. What I wanted to highlight here is that Velocity supports calling standard methods on objects just like you would do in java. So $myObj.value would be same as $myObj.getValue() if that method is defined on myObj&#39;s class.","body":"@Ali - Yes I agree to some extent - You can have all sorts of formatting inconcistencies in incoming text - for that you may need to write a utility function somewhere and invoke it to generate properly formatted names/variables etc. What I wanted to highlight here is that Velocity supports calling standard methods on objects just like you would do in java. So $myObj.value would be same as $myObj.getValue() if that method is defined on myObj&#39;s class."},{"owner":{"account_id":428656,"reputation":1458,"user_id":811120,"display_name":"Vincent Pazeller"},"score":0,"creation_date":1585900607,"post_id":6998581,"comment_id":107931999,"body_markdown":"I think the `toLowerCase()` might be removed to take profit of the velocity&#39;s case handling. I.e.  `$s_attribute.name.substring(0,1).toUpperCase()` and `$s_attribute.name.substring(1)`","body":"I think the <code>toLowerCase()</code> might be removed to take profit of the velocity&#39;s case handling. I.e.  <code>$s_attribute.name.substring(0,1).toUpperCase()</code> and <code>$s_attribute.name.substring(1)</code>"}],"tags":[],"owner":{"account_id":171452,"reputation":7936,"user_id":398885,"display_name":"d-live"},"comment_count":5,"down_vote_count":0,"up_vote_count":43,"is_accepted":true,"score":43,"last_activity_date":1312904271,"creation_date":1312903188,"answer_id":6998581,"question_id":6998412,"body_markdown":"You can invoke standard java methods on these objects. If `s_attribute.name` is type String you can directly use `$s_attribute.name.toUpperCase()` or for your specific case use `$s_attribute.name.substring(0,1).toUpperCase()` and `$s_attribute.name.substring(1).toLowerCase()`","title":"Velocity string function","body":"<p>You can invoke standard java methods on these objects. If <code>s_attribute.name</code> is type String you can directly use <code>$s_attribute.name.toUpperCase()</code> or for your specific case use <code>$s_attribute.name.substring(0,1).toUpperCase()</code> and <code>$s_attribute.name.substring(1).toLowerCase()</code></p>\n"},{"comments":[{"owner":{"account_id":302948,"reputation":12414,"user_id":611600,"accept_rate":86,"display_name":"Ali"},"score":0,"creation_date":1312903603,"post_id":6998616,"comment_id":8354204,"body_markdown":"Oh sweet! I saw capitalize in the API but figured it was for formatting text on the backend. This usage makes sense as well!","body":"Oh sweet! I saw capitalize in the API but figured it was for formatting text on the backend. This usage makes sense as well!"},{"owner":{"account_id":171785,"reputation":2011,"user_id":399435,"accept_rate":89,"display_name":"Karthic Raghupathi"},"score":1,"creation_date":1344142453,"post_id":6998616,"comment_id":15702518,"body_markdown":"This `${display.capitalize(...)}` did not work for me. My output has `${display.capitalize(...)}`. Do I need to do something extra for DisplayTool to kick in? I&#39;m using straight up vanilla velocity 1.7","body":"This <code>${display.capitalize(...)}</code> did not work for me. My output has <code>${display.capitalize(...)}</code>. Do I need to do something extra for DisplayTool to kick in? I&#39;m using straight up vanilla velocity 1.7"},{"owner":{"account_id":1218609,"reputation":1017,"user_id":1185709,"accept_rate":71,"display_name":"AJD"},"score":3,"creation_date":1387516919,"post_id":6998616,"comment_id":30998157,"body_markdown":"@KarthicRaghupathi DisplayTool is in a separate dependency called velocity-tools.  \nMake sure to include it and then add a DisplayTool to your VelocityContext.  \nvc.put(&quot;display&quot;,new DisplayTool());","body":"@KarthicRaghupathi DisplayTool is in a separate dependency called velocity-tools.   Make sure to include it and then add a DisplayTool to your VelocityContext.   vc.put(&quot;display&quot;,new DisplayTool());"}],"tags":[],"owner":{"account_id":10611,"reputation":110117,"user_id":20128,"accept_rate":73,"display_name":"serg"},"comment_count":3,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1689945074,"creation_date":1312903331,"answer_id":6998616,"question_id":6998412,"body_markdown":"There is `capitalize()` method in [`DisplayTool`][1]. In the template you can do:\r\n\r\n\tget${display.capitalize($s_attribute.name)}()\r\n\r\nYou will need the extra dependency on the classpath:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.velocity.tools&lt;/groupId&gt;\r\n        &lt;artifactId&gt;velocity-tools-generic&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd you need to add a the `display` instance to the context\r\n\r\n        VelocityContext context = new VelocityContext();\r\n        context.put(&quot;display&quot;, new DisplayTool());\r\n\r\n  [1]: https://velocity.apache.org/tools/3.1/apidocs/org/apache/velocity/tools/generic/DisplayTool.html#capitalize-java.lang.Object-","title":"Velocity string function","body":"<p>There is <code>capitalize()</code> method in <a href=\"https://velocity.apache.org/tools/3.1/apidocs/org/apache/velocity/tools/generic/DisplayTool.html#capitalize-java.lang.Object-\" rel=\"nofollow noreferrer\"><code>DisplayTool</code></a>. In the template you can do:</p>\n<pre><code>get${display.capitalize($s_attribute.name)}()\n</code></pre>\n<p>You will need the extra dependency on the classpath:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.velocity.tools&lt;/groupId&gt;\n    &lt;artifactId&gt;velocity-tools-generic&lt;/artifactId&gt;\n    &lt;version&gt;3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And you need to add a the <code>display</code> instance to the context</p>\n<pre><code>    VelocityContext context = new VelocityContext();\n    context.put(&quot;display&quot;, new DisplayTool());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":425470,"reputation":3295,"user_id":806094,"accept_rate":39,"display_name":"Mattijs"},"score":2,"creation_date":1621220304,"post_id":34919228,"comment_id":119420626,"body_markdown":"Is there any way to do this in the VTL templates for AWS Appsync? I have no clue how to import a Class in the vtl template to call these string functions. I just want to call a capitalise function instead of writing one myself.","body":"Is there any way to do this in the VTL templates for AWS Appsync? I have no clue how to import a Class in the vtl template to call these string functions. I just want to call a capitalise function instead of writing one myself."}],"tags":[],"owner":{"account_id":6543678,"reputation":3232,"user_id":5060325,"display_name":"naimdjon"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1453366695,"creation_date":1453366695,"answer_id":34919228,"question_id":6998412,"body_markdown":"If you are using `commons-lang` you can use the `StringUtils` class: \r\n\r\n    context.put(&quot;StringUtils&quot;, org.apache.commons.lang3.StringUtils.class);\r\n\r\nThen in your template:\r\n\r\n    ...\r\n    return  get$StringUtils.capitalize(s_attribute.name)();\r\n    ...","title":"Velocity string function","body":"<p>If you are using <code>commons-lang</code> you can use the <code>StringUtils</code> class: </p>\n\n<pre><code>context.put(\"StringUtils\", org.apache.commons.lang3.StringUtils.class);\n</code></pre>\n\n<p>Then in your template:</p>\n\n<pre><code>...\nreturn  get$StringUtils.capitalize(s_attribute.name)();\n...\n</code></pre>\n"}],"owner":{"account_id":427992,"reputation":383,"user_id":810037,"display_name":"Yiming"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60782,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"accepted_answer_id":6998581,"answer_count":4,"score":34,"last_activity_date":1689945074,"creation_date":1312902456,"question_id":6998412,"body_markdown":"I just start using Java Velocity. \r\nNow I want to create a java class template. \r\n\r\n    package $app.package_namespace\r\n    public class ${app.name}Station\r\n\r\n    {\r\n    \t#foreach($s_attribute in $app.station)\r\n    \t     $s_attribute.type $s_attribute.name,\r\n    \t#end\r\n    \tpublic $app.name Station(#foreach($s_attribute in $app.station)\r\n\t                                 $s_attribute.type $s_attribute.name;\r\n\t                             #end)\r\n\t{\r\n\t\t#foreach($s_attribute in $app.station)\r\n\t\t      $s_attribute.name=$s_attribute.name;\r\n\t\t#end\r\n\t}\r\n\t#foreach($s_attribute in $app.station)\r\n\t\tpublic ${s_attribute.type} get${s_attribute.name}()\r\n\t\t{\r\n\t\t\treturn  get${s_attribute.name}();\r\n\t\t}\r\n\t#end\r\n    }\r\n\r\n\r\n    \r\n\r\nThe problem is s_attribute.name first character is lowercase. When I create getter and setter function for attributes. I need change first character to uppercase. \r\n\r\nDid anyone know how to do it?","title":"Velocity string function","body":"<p>I just start using Java Velocity. \nNow I want to create a java class template. </p>\n\n<pre><code>package $app.package_namespace\npublic class ${app.name}Station\n\n{\n    #foreach($s_attribute in $app.station)\n         $s_attribute.type $s_attribute.name,\n    #end\n    public $app.name Station(#foreach($s_attribute in $app.station)\n                                 $s_attribute.type $s_attribute.name;\n                             #end)\n{\n    #foreach($s_attribute in $app.station)\n          $s_attribute.name=$s_attribute.name;\n    #end\n}\n#foreach($s_attribute in $app.station)\n    public ${s_attribute.type} get${s_attribute.name}()\n    {\n        return  get${s_attribute.name}();\n    }\n#end\n}\n</code></pre>\n\n<p>The problem is s_attribute.name first character is lowercase. When I create getter and setter function for attributes. I need change first character to uppercase. </p>\n\n<p>Did anyone know how to do it?</p>\n"},{"tags":["java","libgdx","game-physics"],"answers":[{"tags":[],"owner":{"account_id":4322016,"reputation":36,"user_id":3529898,"display_name":"Tony Immanuvel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689945048,"creation_date":1689646794,"answer_id":76709152,"question_id":76697270,"body_markdown":"X velocity should be based on the pull the ball experiences along X axis.  \r\nY Velocity should be the pull the ball experiences along Y axis.\r\n\r\n   xPull = ballRestPositionX - ballPulledPositionX\r\n   yPull = ballRestPositionY - ballPulledPositionY\r\n \r\n    Xvelocity = xPull * powerFactor * -1. \r\n    Yvelocity = yPull * powerFactor * -1. \r\n\r\n(power factor 3 should let the ball travel 3 times more in the direction if time is 1 sec)\r\n\r\nI don&#39;t think, sin(Q) or Cos(Q) are required at this point of time.\r\n\r\n\r\nThis way you can calculate the peak only after time (t).\r\n\r\ntime T is proportional to the length of pull. Longer one pulls, more time it will travel.\r\n\r\n    timeOfTravlel = SQRT(Xpull^2 + yPull^2) * someFactor.\r\n\r\nSo destination peak will be \r\n\r\n    ballNewX = ballPulledPositionX + timeOfTravel * xVelocity\r\n    ballNewY = ballPulledPositionY + timeOfTravel * yVelocity\r\n\r\nFor trajectory, apply some gravity. Break time into slices. Reduce velocity against gravity in each time slice and as we move in time velocity becomes closer to gravity and touches ground. That will be giving you trajectory.\r\n\r\nTypically calculations should be out of render method, ideally at `ClickEvent` or Time based update events.","title":"What am I doing wrongly in calculating the projection of a ball (java and libgdx)","body":"<p>X velocity should be based on the pull the ball experiences along X axis.<br />\nY Velocity should be the pull the ball experiences along Y axis.</p>\n<p>xPull = ballRestPositionX - ballPulledPositionX\nyPull = ballRestPositionY - ballPulledPositionY</p>\n<pre><code>Xvelocity = xPull * powerFactor * -1. \nYvelocity = yPull * powerFactor * -1. \n</code></pre>\n<p>(power factor 3 should let the ball travel 3 times more in the direction if time is 1 sec)</p>\n<p>I don't think, sin(Q) or Cos(Q) are required at this point of time.</p>\n<p>This way you can calculate the peak only after time (t).</p>\n<p>time T is proportional to the length of pull. Longer one pulls, more time it will travel.</p>\n<pre><code>timeOfTravlel = SQRT(Xpull^2 + yPull^2) * someFactor.\n</code></pre>\n<p>So destination peak will be</p>\n<pre><code>ballNewX = ballPulledPositionX + timeOfTravel * xVelocity\nballNewY = ballPulledPositionY + timeOfTravel * yVelocity\n</code></pre>\n<p>For trajectory, apply some gravity. Break time into slices. Reduce velocity against gravity in each time slice and as we move in time velocity becomes closer to gravity and touches ground. That will be giving you trajectory.</p>\n<p>Typically calculations should be out of render method, ideally at <code>ClickEvent</code> or Time based update events.</p>\n"}],"owner":{"account_id":26991848,"reputation":62,"user_id":20554626,"display_name":"sammy medawar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76709152,"answer_count":1,"score":0,"last_activity_date":1689945048,"creation_date":1689495068,"question_id":76697270,"body_markdown":"I am working on an Angry Birds-like game where the user can drag a ball to launch it in the opposite direction with power proportional to the duration of the drag. However, I&#39;m encountering two problems. Firstly, the ball doesn&#39;t go in the opposite direction of the drag motion. Secondly, the new x position of the ball doesn&#39;t seem correct; it appears to be too close to the initial point. I am currently setting the new y position to always be 0 for testing purposes. Please note that I only want to teleport the ball to its new position and will handle the trajectory later.\r\nThis is the concerned code:\r\n\r\n\r\n      `      private void renderGame() {\r\n        batch.begin();\r\n        batch.draw(background, 0, 0, Gdx.graphics.getWidth(), Gdx.graphics.getHeight());\r\n        if (inputProcessor.isShotCompleted()) {\r\n            /// Calculate the new ball position based on the shot parameters\r\n            float power = inputProcessor.getPower();\r\n            float angle = inputProcessor.getAngle();\r\n            float initialBallX = inputProcessor.getBallX();\r\n            float initialBallY = inputProcessor.getBallY();\r\n            // Calculate the initial velocity components\r\n            float velocityX = power * BALL_SPEED * MathUtils.cos(angle);\r\n            float velocityY = power * BALL_SPEED * MathUtils.sin(angle);\r\n            // Calculate the time of flight\r\n            float time = (2 * power * MathUtils.sin(angle)) / 9.8f;\r\n            // Calculate the new ball position\r\n            float newBallX = initialBallX + (velocityX * time);\r\n            float newBallY = 0;\r\n            // Update the ball&#39;s position\r\n            inputProcessor.setBallX(newBallX);\r\n            inputProcessor.setBallY(newBallY);\r\n            ballX = newBallX;\r\n            ballY = newBallY;\r\n            // Reset shot completion flag\r\n            inputProcessor.isShotCompleted = false;\r\n        }\r\n        else{\r\n            // Draw the ball at its current position with rotation\r\n            float ballX = inputProcessor.getBallX();\r\n            float ballY = inputProcessor.getBallY();\r\n        }\r\n        // Update the rotation angle of the ball\r\n        rotationAngle = (rotationAngle + Gdx.graphics.getDeltaTime() * 100) % 360;\r\n        batch.draw(playerCharacter, ballX - BALL_RADIUS, ballY - BALL_RADIUS,\r\n                BALL_RADIUS, BALL_RADIUS, BALL_RADIUS * 2,\r\n                BALL_RADIUS * 2, 1, 1, rotationAngle);\r\n        batch.end();\r\n    }`\r\n\r\n\r\nHeres the link to my code I have a problem with posting it on stackoverflow with format errors:\r\nhttps://pastebin.com/WMRB229i\r\n[![Initial Position of ball](https://i.stack.imgur.com/x8IwM.png)](https://i.stack.imgur.com/x8IwM.png)\r\n[![The trajectory I want to change the ball to (blue dashes) and the strength of the drag (white line)](https://i.stack.imgur.com/xxVSt.png)](https://i.stack.imgur.com/xxVSt.png)\r\n[![Final Position of ball](https://i.stack.imgur.com/ljctH.png)](https://i.stack.imgur.com/ljctH.png)\r\n\r\n\r\nEdit: In general, it seems to be going in the same direction as the white line even though it should be the opposite. Additionally, rather than throwing the ball, it just acts like it shoots it down directly even though I shot it up\r\n","title":"What am I doing wrongly in calculating the projection of a ball (java and libgdx)","body":"<p>I am working on an Angry Birds-like game where the user can drag a ball to launch it in the opposite direction with power proportional to the duration of the drag. However, I'm encountering two problems. Firstly, the ball doesn't go in the opposite direction of the drag motion. Secondly, the new x position of the ball doesn't seem correct; it appears to be too close to the initial point. I am currently setting the new y position to always be 0 for testing purposes. Please note that I only want to teleport the ball to its new position and will handle the trajectory later.\nThis is the concerned code:</p>\n<pre><code>  `      private void renderGame() {\n    batch.begin();\n    batch.draw(background, 0, 0, Gdx.graphics.getWidth(), Gdx.graphics.getHeight());\n    if (inputProcessor.isShotCompleted()) {\n        /// Calculate the new ball position based on the shot parameters\n        float power = inputProcessor.getPower();\n        float angle = inputProcessor.getAngle();\n        float initialBallX = inputProcessor.getBallX();\n        float initialBallY = inputProcessor.getBallY();\n        // Calculate the initial velocity components\n        float velocityX = power * BALL_SPEED * MathUtils.cos(angle);\n        float velocityY = power * BALL_SPEED * MathUtils.sin(angle);\n        // Calculate the time of flight\n        float time = (2 * power * MathUtils.sin(angle)) / 9.8f;\n        // Calculate the new ball position\n        float newBallX = initialBallX + (velocityX * time);\n        float newBallY = 0;\n        // Update the ball's position\n        inputProcessor.setBallX(newBallX);\n        inputProcessor.setBallY(newBallY);\n        ballX = newBallX;\n        ballY = newBallY;\n        // Reset shot completion flag\n        inputProcessor.isShotCompleted = false;\n    }\n    else{\n        // Draw the ball at its current position with rotation\n        float ballX = inputProcessor.getBallX();\n        float ballY = inputProcessor.getBallY();\n    }\n    // Update the rotation angle of the ball\n    rotationAngle = (rotationAngle + Gdx.graphics.getDeltaTime() * 100) % 360;\n    batch.draw(playerCharacter, ballX - BALL_RADIUS, ballY - BALL_RADIUS,\n            BALL_RADIUS, BALL_RADIUS, BALL_RADIUS * 2,\n            BALL_RADIUS * 2, 1, 1, rotationAngle);\n    batch.end();\n}`\n</code></pre>\n<p>Heres the link to my code I have a problem with posting it on stackoverflow with format errors:\n<a href=\"https://pastebin.com/WMRB229i\" rel=\"nofollow noreferrer\">https://pastebin.com/WMRB229i</a>\n<a href=\"https://i.stack.imgur.com/x8IwM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x8IwM.png\" alt=\"Initial Position of ball\" /></a>\n<a href=\"https://i.stack.imgur.com/xxVSt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xxVSt.png\" alt=\"The trajectory I want to change the ball to (blue dashes) and the strength of the drag (white line)\" /></a>\n<a href=\"https://i.stack.imgur.com/ljctH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ljctH.png\" alt=\"Final Position of ball\" /></a></p>\n<p>Edit: In general, it seems to be going in the same direction as the white line even though it should be the opposite. Additionally, rather than throwing the ball, it just acts like it shoots it down directly even though I shot it up</p>\n"},{"tags":["java","android-studio","runtime-permissions"],"owner":{"account_id":1608382,"reputation":767,"user_id":1487979,"accept_rate":68,"display_name":"Luigino"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689944739,"creation_date":1689944739,"question_id":76738278,"body_markdown":"I have this simple code: \r\n\r\n    public class MainActivity externds AppCompatActivity {\r\n    \r\n        final String[] PERMISSIONS = {\r\n                Manifest.permission.ACCESS_FINE_LOCATION,\r\n                Manifest.permission.BLUETOOTH_CONNECT\r\n        };\r\n    \r\n        private ActivityResultLauncher&lt;String[]&gt; permission = registerForActivityResult(\r\n                new ActivityResultContracts.RequestMultiplePermissions(),\r\n                isGranted -&gt; { System.out.println(&quot;PERMISSIONS - &quot; + isGranted ); } \r\n        );\r\n    \t\r\n    \t@Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n    \r\n            getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);\r\n            binding = ActivityMainBinding.inflate(getLayoutInflater());\r\n            setContentView(binding.getRoot());\r\n    \r\n    \t\tpermission.launch(PERMISSIONS);\r\n    \r\n    \t\tbinding.fab.setOnClickListener(new View.OnClickListener() { .... });\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\nas I read somewhere about `registerForActivityResult` (due the old `onRequestPermissionsResult` is deprecated...) it should wait until user has completed grant/refuse permissions requests but in my debug it looks like it doesn&#39;t wait....shall I have missed something when I am threatening `isGranted` variable? Thanks in advance! Cheers! :-)","title":"Java - shouldn&#39;t registerForActivityResult wait until permissions request are done?","body":"<p>I have this simple code:</p>\n<pre><code>public class MainActivity externds AppCompatActivity {\n\n    final String[] PERMISSIONS = {\n            Manifest.permission.ACCESS_FINE_LOCATION,\n            Manifest.permission.BLUETOOTH_CONNECT\n    };\n\n    private ActivityResultLauncher&lt;String[]&gt; permission = registerForActivityResult(\n            new ActivityResultContracts.RequestMultiplePermissions(),\n            isGranted -&gt; { System.out.println(&quot;PERMISSIONS - &quot; + isGranted ); } \n    );\n    \n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\n        setContentView(binding.getRoot());\n\n        permission.launch(PERMISSIONS);\n\n        binding.fab.setOnClickListener(new View.OnClickListener() { .... });\n        \n    }\n}\n</code></pre>\n<p>as I read somewhere about <code>registerForActivityResult</code> (due the old <code>onRequestPermissionsResult</code> is deprecated...) it should wait until user has completed grant/refuse permissions requests but in my debug it looks like it doesn't wait....shall I have missed something when I am threatening <code>isGranted</code> variable? Thanks in advance! Cheers! :-)</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9165235,"reputation":15414,"user_id":6815131,"display_name":"Joe C"},"score":0,"creation_date":1479053583,"post_id":40574892,"comment_id":68387242,"body_markdown":"Have you captured what was sent with a tool like Wireshark to confirm that the header is actually absent?","body":"Have you captured what was sent with a tool like Wireshark to confirm that the header is actually absent?"}],"answers":[{"comments":[{"owner":{"account_id":3783541,"reputation":183,"user_id":3142267,"display_name":"Hello-World"},"score":1,"creation_date":1489453327,"post_id":40576153,"comment_id":72667295,"body_markdown":"Hey Mari! What did you do to make it work? I tried the same (and many different things for 10 hours), but it does not work :(","body":"Hey Mari! What did you do to make it work? I tried the same (and many different things for 10 hours), but it does not work :("},{"owner":{"account_id":3783541,"reputation":183,"user_id":3142267,"display_name":"Hello-World"},"score":2,"creation_date":1489508317,"post_id":40576153,"comment_id":72696894,"body_markdown":"Finally I found the solution: http://stackoverflow.com/questions/39937240/android-post-request-not-working","body":"Finally I found the solution: <a href=\"http://stackoverflow.com/questions/39937240/android-post-request-not-working\" title=\"android post request not working\">stackoverflow.com/questions/39937240/&hellip;</a>"},{"owner":{"account_id":5734928,"reputation":537,"user_id":4529404,"display_name":"dreua"},"score":0,"creation_date":1514462834,"post_id":40576153,"comment_id":82982584,"body_markdown":"Can someone explain the `&quot;charset&quot;, &quot;utf-8&quot;` part to me? I think this might be wrong as it should be part of the Content-Type header and not a header by itself.","body":"Can someone explain the <code>&quot;charset&quot;, &quot;utf-8&quot;</code> part to me? I think this might be wrong as it should be part of the Content-Type header and not a header by itself."},{"owner":{"account_id":11403483,"reputation":4554,"user_id":8359705,"display_name":"Mohammad Zeeshan"},"score":0,"creation_date":1631014315,"post_id":40576153,"comment_id":122104119,"body_markdown":"how to i send this way using retrofit any idea #Navoneel Talukdar","body":"how to i send this way using retrofit any idea #Navoneel Talukdar"},{"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"score":0,"creation_date":1665253911,"post_id":40576153,"comment_id":130658659,"body_markdown":"Faced issue where different format was been send by the server","body":"Faced issue where different format was been send by the server"}],"tags":[],"owner":{"account_id":2111260,"reputation":4443,"user_id":5651109,"accept_rate":75,"display_name":"Navoneel Talukdar"},"comment_count":5,"down_vote_count":1,"up_vote_count":121,"is_accepted":true,"score":120,"last_activity_date":1501735566,"creation_date":1479054697,"answer_id":40576153,"question_id":40574892,"body_markdown":"As you set `application/x-www-form-urlencoded` as content type so data sent must be like this format.\r\n\r\n    String urlParameters  = &quot;param1=data1&amp;param2=data2&amp;param3=data3&quot;;\r\n\r\nSending part now is quite straightforward.\r\n\r\n    byte[] postData = urlParameters.getBytes( StandardCharsets.UTF_8 );\r\n    int postDataLength = postData.length;\r\n    String request = &quot;&lt;Url here&gt;&quot;;\r\n    URL url = new URL( request );\r\n    HttpURLConnection conn= (HttpURLConnection) url.openConnection();           \r\n    conn.setDoOutput(true);\r\n    conn.setInstanceFollowRedirects(false);\r\n    conn.setRequestMethod(&quot;POST&quot;);\r\n    conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;); \r\n    conn.setRequestProperty(&quot;charset&quot;, &quot;utf-8&quot;);\r\n    conn.setRequestProperty(&quot;Content-Length&quot;, Integer.toString(postDataLength ));\r\n    conn.setUseCaches(false);\r\n    try(DataOutputStream wr = new DataOutputStream(conn.getOutputStream())) {\r\n       wr.write( postData );\r\n    }\r\n\r\nOr you can create a generic method to build key value pattern which is required for `application/x-www-form-urlencoded`.\r\n\r\n    private String getDataString(HashMap&lt;String, String&gt; params) throws UnsupportedEncodingException{\r\n        StringBuilder result = new StringBuilder();\r\n        boolean first = true;\r\n        for(Map.Entry&lt;String, String&gt; entry : params.entrySet()){\r\n            if (first)\r\n                first = false;\r\n            else\r\n                result.append(&quot;&amp;&quot;);    \r\n            result.append(URLEncoder.encode(entry.getKey(), &quot;UTF-8&quot;));\r\n            result.append(&quot;=&quot;);\r\n            result.append(URLEncoder.encode(entry.getValue(), &quot;UTF-8&quot;));\r\n        }    \r\n        return result.toString();\r\n    }\r\n\r\n","title":"How to send post request with x-www-form-urlencoded body","body":"<p>As you set <code>application/x-www-form-urlencoded</code> as content type so data sent must be like this format.</p>\n\n<pre><code>String urlParameters  = \"param1=data1&amp;param2=data2&amp;param3=data3\";\n</code></pre>\n\n<p>Sending part now is quite straightforward.</p>\n\n<pre><code>byte[] postData = urlParameters.getBytes( StandardCharsets.UTF_8 );\nint postDataLength = postData.length;\nString request = \"&lt;Url here&gt;\";\nURL url = new URL( request );\nHttpURLConnection conn= (HttpURLConnection) url.openConnection();           \nconn.setDoOutput(true);\nconn.setInstanceFollowRedirects(false);\nconn.setRequestMethod(\"POST\");\nconn.setRequestProperty(\"Content-Type\", \"application/x-www-form-urlencoded\"); \nconn.setRequestProperty(\"charset\", \"utf-8\");\nconn.setRequestProperty(\"Content-Length\", Integer.toString(postDataLength ));\nconn.setUseCaches(false);\ntry(DataOutputStream wr = new DataOutputStream(conn.getOutputStream())) {\n   wr.write( postData );\n}\n</code></pre>\n\n<p>Or you can create a generic method to build key value pattern which is required for <code>application/x-www-form-urlencoded</code>.</p>\n\n<pre><code>private String getDataString(HashMap&lt;String, String&gt; params) throws UnsupportedEncodingException{\n    StringBuilder result = new StringBuilder();\n    boolean first = true;\n    for(Map.Entry&lt;String, String&gt; entry : params.entrySet()){\n        if (first)\n            first = false;\n        else\n            result.append(\"&amp;\");    \n        result.append(URLEncoder.encode(entry.getKey(), \"UTF-8\"));\n        result.append(\"=\");\n        result.append(URLEncoder.encode(entry.getValue(), \"UTF-8\"));\n    }    \n    return result.toString();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1667353183,"post_id":45541862,"comment_id":131146026,"body_markdown":"I like this solution, but I don&#39;t see why we need a LinkedMultiValueMap instead of just a Map.","body":"I like this solution, but I don&#39;t see why we need a LinkedMultiValueMap instead of just a Map."}],"tags":[],"owner":{"account_id":5003993,"reputation":1317,"user_id":4022159,"accept_rate":50,"display_name":"Nutan"},"comment_count":1,"down_vote_count":1,"up_vote_count":39,"is_accepted":false,"score":38,"last_activity_date":1502176021,"creation_date":1502092254,"answer_id":45541862,"question_id":40574892,"body_markdown":"For `HttpEntity`, the below answer works\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.setContentType(MediaType.APPLICATION_FORM_URLENCODED);\r\n    \r\n    MultiValueMap&lt;String, String&gt; map= new LinkedMultiValueMap&lt;String, String&gt;();\r\n    map.add(&quot;email&quot;, &quot;first.last@example.com&quot;);\r\n    \r\n    HttpEntity&lt;MultiValueMap&lt;String, String&gt;&gt; request = new HttpEntity&lt;MultiValueMap&lt;String, String&gt;&gt;(map, headers);\r\n    \r\n    ResponseEntity&lt;String&gt; response = restTemplate.postForEntity( url, request , String.class );\r\n\r\nFor reference:\r\nhttps://stackoverflow.com/questions/38372422/how-to-post-form-data-with-spring-resttemplate","title":"How to send post request with x-www-form-urlencoded body","body":"<p>For <code>HttpEntity</code>, the below answer works</p>\n\n<pre><code>HttpHeaders headers = new HttpHeaders();\nheaders.setContentType(MediaType.APPLICATION_FORM_URLENCODED);\n\nMultiValueMap&lt;String, String&gt; map= new LinkedMultiValueMap&lt;String, String&gt;();\nmap.add(\"email\", \"first.last@example.com\");\n\nHttpEntity&lt;MultiValueMap&lt;String, String&gt;&gt; request = new HttpEntity&lt;MultiValueMap&lt;String, String&gt;&gt;(map, headers);\n\nResponseEntity&lt;String&gt; response = restTemplate.postForEntity( url, request , String.class );\n</code></pre>\n\n<p>For reference:\n<a href=\"https://stackoverflow.com/questions/38372422/how-to-post-form-data-with-spring-resttemplate\">How to POST form data with Spring RestTemplate?</a></p>\n"},{"comments":[{"owner":{"account_id":4910,"reputation":9204,"user_id":7616,"accept_rate":75,"display_name":"shyam"},"score":1,"creation_date":1611151790,"post_id":65810532,"comment_id":116358570,"body_markdown":"Add some context to your answer and restrict yourself to posting the exact code snippet eg. in your case the `httpWebRequest.Headers[&quot;ContentType&quot;]` so, that it is easier to follow","body":"Add some context to your answer and restrict yourself to posting the exact code snippet eg. in your case the <code>httpWebRequest.Headers[&quot;ContentType&quot;]</code> so, that it is easier to follow"}],"tags":[],"owner":{"account_id":18829289,"reputation":1,"user_id":13733478,"display_name":"Mohsen Miri"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611149416,"creation_date":1611149416,"answer_id":65810532,"question_id":40574892,"body_markdown":"    string urlParameters = &quot;param1=value1&amp;param2=value2&quot;;\r\n    string _endPointName = &quot;your url post api&quot;;\r\n    \r\n    var httpWebRequest = (HttpWebRequest)WebRequest.Create(_endPointName);\r\n    \r\n    httpWebRequest.ContentType = &quot;application/x-www-form-urlencoded&quot;;\r\n    httpWebRequest.Method = &quot;POST&quot;;\r\n    httpWebRequest.Headers[&quot;ContentType&quot;] = &quot;application/x-www-form-urlencoded&quot;;\r\n    \r\n    System.Net.ServicePointManager.ServerCertificateValidationCallback +=\r\n                                                      (se, cert, chain, sslerror) =&gt;\r\n                                                      {\r\n                                                          return true;\r\n                                                      };\r\n    \r\n    \r\n    using (var streamWriter = new StreamWriter(httpWebRequest.GetRequestStream()))\r\n                    {\r\n                        streamWriter.Write(urlParameters);\r\n                        streamWriter.Flush();\r\n                        streamWriter.Close();\r\n                    }\r\n    var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();\r\n    \r\n    using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))\r\n                    {\r\n                        var result = streamReader.ReadToEnd();\r\n                    }","title":"How to send post request with x-www-form-urlencoded body","body":"<pre><code>string urlParameters = &quot;param1=value1&amp;param2=value2&quot;;\nstring _endPointName = &quot;your url post api&quot;;\n\nvar httpWebRequest = (HttpWebRequest)WebRequest.Create(_endPointName);\n\nhttpWebRequest.ContentType = &quot;application/x-www-form-urlencoded&quot;;\nhttpWebRequest.Method = &quot;POST&quot;;\nhttpWebRequest.Headers[&quot;ContentType&quot;] = &quot;application/x-www-form-urlencoded&quot;;\n\nSystem.Net.ServicePointManager.ServerCertificateValidationCallback +=\n                                                  (se, cert, chain, sslerror) =&gt;\n                                                  {\n                                                      return true;\n                                                  };\n\n\nusing (var streamWriter = new StreamWriter(httpWebRequest.GetRequestStream()))\n                {\n                    streamWriter.Write(urlParameters);\n                    streamWriter.Flush();\n                    streamWriter.Close();\n                }\nvar httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();\n\nusing (var streamReader = new StreamReader(httpResponse.GetResponseStream()))\n                {\n                    var result = streamReader.ReadToEnd();\n                }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":111410,"reputation":8252,"user_id":294317,"accept_rate":69,"display_name":"Nathan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646859299,"creation_date":1646859299,"answer_id":71415884,"question_id":40574892,"body_markdown":"Building off of [Navoneel&#39;s answer][1], I like to use [StreamEx&#39;s][2] [EntryStream][3].\r\n\r\nHere is Naveoneel&#39;s method re-written.\r\n\r\n```java\r\nprivate String getDataString(HashMap&lt;String, String&gt; params)\r\n{\r\n   return EntryStream.\r\n      of(data).\r\n      mapKeys(key -&gt; URLEncoder.encode(key, StandardCharsets.UTF_8)).        // Encode the keys\r\n      mapValues(value -&gt; URLEncoder.encode(value, StandardCharsets.UTF_8)).  // Encode the values\r\n      join(&quot;=&quot;).                                                             // Create a key=value\r\n      joining(&quot;&amp;&quot;);                                                          // Assemble into key1=value1&amp;key2=value2...\r\n}\r\n```\r\n\r\n  [1]: https://stackoverflow.com/a/40576153/294317\r\n  [2]: https://github.com/amaembo/streamex\r\n  [3]: https://amaembo.github.io/streamex/javadoc/one/util/streamex/EntryStream.html","title":"How to send post request with x-www-form-urlencoded body","body":"<p>Building off of <a href=\"https://stackoverflow.com/a/40576153/294317\">Navoneel's answer</a>, I like to use <a href=\"https://github.com/amaembo/streamex\" rel=\"nofollow noreferrer\">StreamEx's</a> <a href=\"https://amaembo.github.io/streamex/javadoc/one/util/streamex/EntryStream.html\" rel=\"nofollow noreferrer\">EntryStream</a>.</p>\n<p>Here is Naveoneel's method re-written.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private String getDataString(HashMap&lt;String, String&gt; params)\n{\n   return EntryStream.\n      of(data).\n      mapKeys(key -&gt; URLEncoder.encode(key, StandardCharsets.UTF_8)).        // Encode the keys\n      mapValues(value -&gt; URLEncoder.encode(value, StandardCharsets.UTF_8)).  // Encode the values\n      join(&quot;=&quot;).                                                             // Create a key=value\n      joining(&quot;&amp;&quot;);                                                          // Assemble into key1=value1&amp;key2=value2...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1106279,"reputation":9834,"user_id":1097600,"accept_rate":80,"display_name":"Sorter"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651397650,"creation_date":1651397650,"answer_id":72075557,"question_id":40574892,"body_markdown":"### Use Java 11 HttpClient\r\n\r\n&gt; The HTTP Client was added in Java 11. It can be used to request HTTP resources over the network. It supports HTTP/1.1 and HTTP/2, both synchronous and asynchronous programming models, handles request and response bodies as reactive-streams, and follows the familiar builder pattern.\r\n\r\nhttps://openjdk.java.net/groups/net/httpclient/intro.html\r\n\r\n```java\r\nHttpClient client = HttpClient.newHttpClient();;\r\nHttpRequest request = HttpRequest.newBuilder()\r\n        .uri(new URI(targetUrl))\r\n        .POST(urlParameters)\r\n        .headers(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;)\r\n        .build();\r\nHttpResponse&lt;String&gt; response = client.send(request, HttpResponse.BodyHandlers.ofString());\r\n```","title":"How to send post request with x-www-form-urlencoded body","body":"<h3>Use Java 11 HttpClient</h3>\n<blockquote>\n<p>The HTTP Client was added in Java 11. It can be used to request HTTP resources over the network. It supports HTTP/1.1 and HTTP/2, both synchronous and asynchronous programming models, handles request and response bodies as reactive-streams, and follows the familiar builder pattern.</p>\n</blockquote>\n<p><a href=\"https://openjdk.java.net/groups/net/httpclient/intro.html\" rel=\"nofollow noreferrer\">https://openjdk.java.net/groups/net/httpclient/intro.html</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>HttpClient client = HttpClient.newHttpClient();;\nHttpRequest request = HttpRequest.newBuilder()\n        .uri(new URI(targetUrl))\n        .POST(urlParameters)\n        .headers(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;)\n        .build();\nHttpResponse&lt;String&gt; response = client.send(request, HttpResponse.BodyHandlers.ofString());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1376570,"reputation":427,"user_id":1310469,"accept_rate":44,"display_name":"malkoto1"},"score":1,"creation_date":1676580950,"post_id":74011255,"comment_id":133171245,"body_markdown":"If you are reading this - you are close. Just scroll to the bottom.","body":"If you are reading this - you are close. Just scroll to the bottom."}],"tags":[],"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1665385599,"creation_date":1665385599,"answer_id":74011255,"question_id":40574892,"body_markdown":"# Problem with the Response!\r\nI had a similar issue when I was sending the request of media type `application/x-www-form-urlencoded` from Postman I was receiving a correct response.\r\n\r\nHowever, when sending the request using code, I was receiving jargon somewhat like:\r\n\r\n```\r\n�-�YO�`:ur���g�\r\n.n��l���u)�i�h3J%Gl�?����k  \r\n\r\n```\r\n\r\n---\r\n#### What I tried: \r\nOut of frustration for multiple days tried all the possible solutions from changing character sets to changing header values to code changes and whatnot.\r\n\r\n---\r\n\r\n# Solution lies in Postman.\r\n\r\n[![Code Generation][1]][1]\r\n\r\n\r\n## Select Java-OkHttp\r\n\r\n[![enter image description here][2]][2]\r\n\r\nCopy the code and paste it into IDE.\r\n\r\nThat&#39;s it.\r\n\r\nReference for HttpOk:\r\nhttps://www.vogella.com/tutorials/JavaLibrary-OkHttp/article.html\r\n\r\n  [1]: https://i.stack.imgur.com/03ohB.png\r\n  [2]: https://i.stack.imgur.com/7yx4Y.png","title":"How to send post request with x-www-form-urlencoded body","body":"<h1>Problem with the Response!</h1>\n<p>I had a similar issue when I was sending the request of media type <code>application/x-www-form-urlencoded</code> from Postman I was receiving a correct response.</p>\n<p>However, when sending the request using code, I was receiving jargon somewhat like:</p>\n<pre><code>�-�YO�`:ur���g�\n.n��l���u)�i�h3J%Gl�?����k  \n\n</code></pre>\n<hr />\n<h4>What I tried:</h4>\n<p>Out of frustration for multiple days tried all the possible solutions from changing character sets to changing header values to code changes and whatnot.</p>\n<hr />\n<h1>Solution lies in Postman.</h1>\n<p><a href=\"https://i.stack.imgur.com/03ohB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/03ohB.png\" alt=\"Code Generation\" /></a></p>\n<h2>Select Java-OkHttp</h2>\n<p><a href=\"https://i.stack.imgur.com/7yx4Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7yx4Y.png\" alt=\"enter image description here\" /></a></p>\n<p>Copy the code and paste it into IDE.</p>\n<p>That's it.</p>\n<p>Reference for HttpOk:\n<a href=\"https://www.vogella.com/tutorials/JavaLibrary-OkHttp/article.html\" rel=\"nofollow noreferrer\">https://www.vogella.com/tutorials/JavaLibrary-OkHttp/article.html</a></p>\n"},{"tags":[],"owner":{"account_id":20739013,"reputation":1,"user_id":15237082,"display_name":"gabriel vieira do nascimento"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689943563,"creation_date":1689943563,"answer_id":76738145,"question_id":40574892,"body_markdown":"\r\n    HttpClient httpClient = HttpClientBuilder.create().build();\r\n    HttpPost httpPost = new HttpPost(uri);\r\n    httpPost.setHeader(&quot;Content-type&quot;, &quot;application/x-www-form-urlencoded&quot;); // Alterado para x-www-form-urlencoded\r\n\r\n    HttpResponse response;\r\n\r\n    List&lt;NameValuePair&gt; params = new ArrayList&lt;&gt;();\r\n    params.add(new BasicNameValuePair(&quot;email&quot;, usuario));\r\n    params.add(new BasicNameValuePair(&quot;password&quot;, senha));\r\n    params.add(new BasicNameValuePair(&quot;tenantId&quot;, tenantId));\r\n\r\n    UrlEncodedFormEntity urlEncodedFormEntity = new UrlEncodedFormEntity(params);\r\n\r\n    httpPost.getRequestLine();\r\n    httpPost.setEntity(urlEncodedFormEntity);\r\n\r\n    MainActivity.logMainRequest(&quot;UriRequest:&quot; + uri);\r\n    MainActivity.logMainRequest(&quot;JsonRequest:&quot; + params);\r\n\r\n    response = httpClient.execute(httpPost);","title":"How to send post request with x-www-form-urlencoded body","body":"<pre><code>HttpClient httpClient = HttpClientBuilder.create().build();\nHttpPost httpPost = new HttpPost(uri);\nhttpPost.setHeader(&quot;Content-type&quot;, &quot;application/x-www-form-urlencoded&quot;); // Alterado para x-www-form-urlencoded\n\nHttpResponse response;\n\nList&lt;NameValuePair&gt; params = new ArrayList&lt;&gt;();\nparams.add(new BasicNameValuePair(&quot;email&quot;, usuario));\nparams.add(new BasicNameValuePair(&quot;password&quot;, senha));\nparams.add(new BasicNameValuePair(&quot;tenantId&quot;, tenantId));\n\nUrlEncodedFormEntity urlEncodedFormEntity = new UrlEncodedFormEntity(params);\n\nhttpPost.getRequestLine();\nhttpPost.setEntity(urlEncodedFormEntity);\n\nMainActivity.logMainRequest(&quot;UriRequest:&quot; + uri);\nMainActivity.logMainRequest(&quot;JsonRequest:&quot; + params);\n\nresponse = httpClient.execute(httpPost);\n</code></pre>\n"}],"owner":{"account_id":8704382,"reputation":953,"user_id":6514477,"display_name":"mari"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":292746,"favorite_count":0,"down_vote_count":2,"up_vote_count":95,"accepted_answer_id":40576153,"answer_count":7,"score":93,"last_activity_date":1689943563,"creation_date":1479047070,"question_id":40574892,"body_markdown":"![Request in postman][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/azap0.png\r\n\r\nHow in java, can I send a request with `x-www-form-urlencoded header`. I don&#39;t understand how to send a body with a key-value, like in the above screenshot.\r\n\r\nI have tried this code:\r\n\r\n    String urlParameters =\r\n      cafedra_name+ data_to_send;\r\n    URL url;\r\n        HttpURLConnection connection = null;  \r\n        try {\r\n          //Create connection\r\n          url = new URL(targetURL);\r\n          connection = (HttpURLConnection)url.openConnection();\r\n          connection.setRequestMethod(&quot;POST&quot;);\r\n          connection.setRequestProperty(&quot;Content-Type&quot;, \r\n               &quot;application/x-www-form-urlencoded&quot;);\r\n    \t\t\t\r\n          connection.setRequestProperty(&quot;Content-Length&quot;, &quot;&quot; + \r\n                   Integer.toString(urlParameters.getBytes().length));\r\n          connection.setRequestProperty(&quot;Content-Language&quot;, &quot;en-US&quot;);  \r\n    \t\t\t\r\n          connection.setUseCaches (false);\r\n          connection.setDoInput(true);\r\n          connection.setDoOutput(true);\r\n    \r\n          //Send request\r\n          DataOutputStream wr = new DataOutputStream (\r\n                      connection.getOutputStream ());\r\n          wr.writeBytes (urlParameters);\r\n          wr.flush ();\r\n          wr.close ();\r\n\r\nBut in the response, I don&#39;t receive the correct data.","title":"How to send post request with x-www-form-urlencoded body","body":"<p><img src=\"https://i.stack.imgur.com/azap0.png\" alt=\"Request in postman\"></p>\n\n<p>How in java, can I send a request with <code>x-www-form-urlencoded header</code>. I don't understand how to send a body with a key-value, like in the above screenshot.</p>\n\n<p>I have tried this code:</p>\n\n<pre><code>String urlParameters =\n  cafedra_name+ data_to_send;\nURL url;\n    HttpURLConnection connection = null;  \n    try {\n      //Create connection\n      url = new URL(targetURL);\n      connection = (HttpURLConnection)url.openConnection();\n      connection.setRequestMethod(\"POST\");\n      connection.setRequestProperty(\"Content-Type\", \n           \"application/x-www-form-urlencoded\");\n\n      connection.setRequestProperty(\"Content-Length\", \"\" + \n               Integer.toString(urlParameters.getBytes().length));\n      connection.setRequestProperty(\"Content-Language\", \"en-US\");  \n\n      connection.setUseCaches (false);\n      connection.setDoInput(true);\n      connection.setDoOutput(true);\n\n      //Send request\n      DataOutputStream wr = new DataOutputStream (\n                  connection.getOutputStream ());\n      wr.writeBytes (urlParameters);\n      wr.flush ();\n      wr.close ();\n</code></pre>\n\n<p>But in the response, I don't receive the correct data.</p>\n"},{"tags":["java","excel","spring-boot","jxls"],"answers":[{"tags":[],"owner":{"account_id":23702888,"reputation":11,"user_id":17725834,"display_name":"Abhishek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689942204,"creation_date":1689942204,"answer_id":76737973,"question_id":76737413,"body_markdown":"I have found the solution. In my service class, I need to add this line of code before reading the excel to avoid the `org.jxls.reader.XLSDataReadException` exception: `ReaderConfig.getInstance().setSkipErrors(true);`. With this adjustment, the code will read the empty cell and return 0 without any issues.","title":"How do I handle empty cells while reading Excel with org.jxls in Spring Boot?","body":"<p>I have found the solution. In my service class, I need to add this line of code before reading the excel to avoid the <code>org.jxls.reader.XLSDataReadException</code> exception: <code>ReaderConfig.getInstance().setSkipErrors(true);</code>. With this adjustment, the code will read the empty cell and return 0 without any issues.</p>\n"}],"owner":{"account_id":23702888,"reputation":11,"user_id":17725834,"display_name":"Abhishek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689942508,"creation_date":1689937622,"question_id":76737413,"body_markdown":"I am using the org.jxls library in a Spring Boot project to read an Excel file. The reading process is working fine, but when it encounters an empty cell, it throws an org.jxls.reader.XLSDataReadException exception. I would like to skip reading the empty cell and continue with the next cell.\r\n\r\nHere is my XML configuration file.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;\r\n    &lt;workbook&gt;\r\n        &lt;worksheet name=&quot;Sheet1&quot;&gt;\r\n            &lt;section startRow=&quot;0&quot; endRow=&quot;0&quot; /&gt;\r\n            &lt;loop startRow=&quot;1&quot; endRow=&quot;1&quot; items=&quot;estimations&quot; var=&quot;estimation&quot;\r\n                varType=&quot;com.osi.exceljxls.entities.Estimation&quot;&gt;\r\n                &lt;section startRow=&quot;1&quot; endRow=&quot;1&quot;&gt;\r\n                    &lt;mapping row=&quot;1&quot; col=&quot;0&quot;&gt;estimation.role&lt;/mapping&gt;\r\n                    &lt;mapping row=&quot;1&quot; col=&quot;1&quot;&gt;estimation.noOfResources&lt;/mapping&gt;\r\n                    &lt;mapping row=&quot;1&quot; col=&quot;3&quot;&gt;estimation.projectLocation&lt;/mapping&gt;\r\n                    &lt;!-- Other mappings --&gt;\r\n                    &lt;!-- ... --&gt;\r\n                    &lt;cellcheck offset=&quot;0&quot; evaluator=&quot;org.jxls.common.cell.reader.IsEmptyCellCheck&quot; /&gt;\r\n                &lt;/section&gt;\r\n                &lt;loopbreakcondition&gt;\r\n                    &lt;rowcheck offset=&quot;0&quot;&gt;\r\n                        &lt;cellcheck offset=&quot;0&quot; /&gt;\r\n                    &lt;/rowcheck&gt;\r\n                &lt;/loopbreakcondition&gt;\r\n            &lt;/loop&gt;\r\n          &lt;/worksheet&gt;\r\n      &lt;/workbook&gt;\r\n\r\nI have already tried adding the `&lt;cellcheck /&gt;` tag as shown above, but it doesn&#39;t seem to be working.\r\n\r\nI also considered handling the exception, but I am unsure how to proceed in that case.\r\n\r\nI would appreciate any insights or suggestions on how to skip reading empty cells or how to handle the XLSDataReadException when an empty cell is encountered. Thank you in advance!\r\n\r\n","title":"How do I handle empty cells while reading Excel with org.jxls in Spring Boot?","body":"<p>I am using the org.jxls library in a Spring Boot project to read an Excel file. The reading process is working fine, but when it encounters an empty cell, it throws an org.jxls.reader.XLSDataReadException exception. I would like to skip reading the empty cell and continue with the next cell.</p>\n<p>Here is my XML configuration file.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;\n&lt;workbook&gt;\n    &lt;worksheet name=&quot;Sheet1&quot;&gt;\n        &lt;section startRow=&quot;0&quot; endRow=&quot;0&quot; /&gt;\n        &lt;loop startRow=&quot;1&quot; endRow=&quot;1&quot; items=&quot;estimations&quot; var=&quot;estimation&quot;\n            varType=&quot;com.osi.exceljxls.entities.Estimation&quot;&gt;\n            &lt;section startRow=&quot;1&quot; endRow=&quot;1&quot;&gt;\n                &lt;mapping row=&quot;1&quot; col=&quot;0&quot;&gt;estimation.role&lt;/mapping&gt;\n                &lt;mapping row=&quot;1&quot; col=&quot;1&quot;&gt;estimation.noOfResources&lt;/mapping&gt;\n                &lt;mapping row=&quot;1&quot; col=&quot;3&quot;&gt;estimation.projectLocation&lt;/mapping&gt;\n                &lt;!-- Other mappings --&gt;\n                &lt;!-- ... --&gt;\n                &lt;cellcheck offset=&quot;0&quot; evaluator=&quot;org.jxls.common.cell.reader.IsEmptyCellCheck&quot; /&gt;\n            &lt;/section&gt;\n            &lt;loopbreakcondition&gt;\n                &lt;rowcheck offset=&quot;0&quot;&gt;\n                    &lt;cellcheck offset=&quot;0&quot; /&gt;\n                &lt;/rowcheck&gt;\n            &lt;/loopbreakcondition&gt;\n        &lt;/loop&gt;\n      &lt;/worksheet&gt;\n  &lt;/workbook&gt;\n</code></pre>\n<p>I have already tried adding the <code>&lt;cellcheck /&gt;</code> tag as shown above, but it doesn't seem to be working.</p>\n<p>I also considered handling the exception, but I am unsure how to proceed in that case.</p>\n<p>I would appreciate any insights or suggestions on how to skip reading empty cells or how to handle the XLSDataReadException when an empty cell is encountered. Thank you in advance!</p>\n"},{"tags":["java","sonarqube"],"owner":{"account_id":17161389,"reputation":1,"user_id":12425000,"display_name":"TrustThisRobot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689942310,"creation_date":1689942310,"question_id":76737987,"body_markdown":"So, i am trying to write a custom rule for sonarqube that it rise an isuess if it detect an REGEX that i pass them,\r\n\r\n\r\n```\r\npublic class AvoidHardCodedUsers extends IssuableSubscriptionVisitor implements JavaFileScanner {\r\nprivate static final String PATTERN = &quot;ESOP\\\\d{7}&quot;;\r\n\r\n@Override\r\npublic List&lt;Tree.Kind&gt; nodesToVisit() {\r\nreturn Arrays.asList(Tree.Kind.STRING_LITERAL);\r\n}\r\n\r\n@Override\r\npublic void visitNode(Tree tree) {\r\nLiteralTree literalTree = (LiteralTree) tree;\r\nString literalValue = literalTree.value();\r\nif (literalValue.matches(PATTERN)) {\r\ncontext.reportIssue(this, literalTree, String.format(&quot;Avoid using hard coded user in code @%s&quot;));\r\n}\r\n}\r\n\r\n}\r\n```\r\n\r\n\r\nOn the test file of the plugin i put some error like the pattern, but the error messaje says there are not test failure, \r\n\r\n\r\n\r\nI pass every type of String into the test class to match that pattern, but nothing taking the pattern as error.","title":"Sonarqube custom rule giving back not failed test","body":"<p>So, i am trying to write a custom rule for sonarqube that it rise an isuess if it detect an REGEX that i pass them,</p>\n<pre><code>public class AvoidHardCodedUsers extends IssuableSubscriptionVisitor implements JavaFileScanner {\nprivate static final String PATTERN = &quot;ESOP\\\\d{7}&quot;;\n\n@Override\npublic List&lt;Tree.Kind&gt; nodesToVisit() {\nreturn Arrays.asList(Tree.Kind.STRING_LITERAL);\n}\n\n@Override\npublic void visitNode(Tree tree) {\nLiteralTree literalTree = (LiteralTree) tree;\nString literalValue = literalTree.value();\nif (literalValue.matches(PATTERN)) {\ncontext.reportIssue(this, literalTree, String.format(&quot;Avoid using hard coded user in code @%s&quot;));\n}\n}\n\n}\n</code></pre>\n<p>On the test file of the plugin i put some error like the pattern, but the error messaje says there are not test failure,</p>\n<p>I pass every type of String into the test class to match that pattern, but nothing taking the pattern as error.</p>\n"},{"tags":["java","reactjs","cookies","jax-rs","cookie-httponly"],"comments":[{"owner":{"account_id":174208,"reputation":5254,"user_id":403425,"accept_rate":71,"display_name":"Kevin Renskers"},"score":0,"creation_date":1635448569,"post_id":64747157,"comment_id":123308423,"body_markdown":"I&#39;m having the exact same problem! Logging in and setting a HttpOnly cookie works just fine, but removing that cookie when logging out is impossible? Can&#39;t set it to an empty value, changing the max-age to 0 doesn&#39;t help either. Have you managed to solve it?","body":"I&#39;m having the exact same problem! Logging in and setting a HttpOnly cookie works just fine, but removing that cookie when logging out is impossible? Can&#39;t set it to an empty value, changing the max-age to 0 doesn&#39;t help either. Have you managed to solve it?"}],"answers":[{"comments":[{"owner":{"account_id":18150538,"reputation":159,"user_id":13203322,"display_name":"BaraKanske"},"score":0,"creation_date":1604929810,"post_id":64748656,"comment_id":114488991,"body_markdown":"Exactly! However, as far as I can understand, the only way to achieve this is to overwrite the first cookie with a new one that will expire immediately. The problem is that this does not work for me, since the cookie is not saved or overwritten, and I&#39;m not sure why that is.","body":"Exactly! However, as far as I can understand, the only way to achieve this is to overwrite the first cookie with a new one that will expire immediately. The problem is that this does not work for me, since the cookie is not saved or overwritten, and I&#39;m not sure why that is."},{"owner":{"account_id":19705290,"reputation":954,"user_id":14427125,"display_name":"Ntshembo Hlongwane"},"score":0,"creation_date":1604930609,"post_id":64748656,"comment_id":114489387,"body_markdown":"You can read through the example I once gave on someone requiring server-side session https://stackoverflow.com/questions/64683813/how-to-access-http-cookie-in-node-js-jwt/64684397#64684397 the sessions are all saved in mongoStore so you can easy handle things like that and that&#39;s how I handle express-sessions","body":"You can read through the example I once gave on someone requiring server-side session <a href=\"https://stackoverflow.com/questions/64683813/how-to-access-http-cookie-in-node-js-jwt/64684397#64684397\" title=\"how to access http cookie in node js jwt\">stackoverflow.com/questions/64683813/&hellip;</a> the sessions are all saved in mongoStore so you can easy handle things like that and that&#39;s how I handle express-sessions"},{"owner":{"account_id":3581640,"reputation":158,"user_id":2989718,"display_name":"Simon"},"score":0,"creation_date":1631043143,"post_id":64748656,"comment_id":122116082,"body_markdown":"@NtshemboHlongwane If we are to overwrite HttpOnly cookie on the server, what would be a workaround if the server is not currently available (e.g. due to a network issue on the client) but the user intention was to logout?","body":"@NtshemboHlongwane If we are to overwrite HttpOnly cookie on the server, what would be a workaround if the server is not currently available (e.g. due to a network issue on the client) but the user intention was to logout?"}],"tags":[],"owner":{"account_id":19705290,"reputation":954,"user_id":14427125,"display_name":"Ntshembo Hlongwane"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604912817,"creation_date":1604912817,"answer_id":64748656,"question_id":64747157,"body_markdown":"From what you are saying is your are using httpOnly cookie so you have to understand one thing is that from the client-side you wont achieve that because then that then would defeat the purpose of having an httpOnly cookie than that would have just been the same as having a regular cookie.\r\n\r\n- So now your solution to get rid of the cookie when a user logs out is on your back-end where I am to believe the cookie was made is where you want want to delete that specific cookie. ","title":"How do I delete a HttpOnly Cookie on the client?","body":"<p>From what you are saying is your are using httpOnly cookie so you have to understand one thing is that from the client-side you wont achieve that because then that then would defeat the purpose of having an httpOnly cookie than that would have just been the same as having a regular cookie.</p>\n<ul>\n<li>So now your solution to get rid of the cookie when a user logs out is on your back-end where I am to believe the cookie was made is where you want want to delete that specific cookie.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2632663,"reputation":387,"user_id":2278206,"display_name":"psq"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689942307,"creation_date":1689942307,"answer_id":76737985,"question_id":64747157,"body_markdown":"From [MDN][1]:\r\n\r\n&gt; Max-Age=\\&lt;number&gt;\r\n&gt;\r\n&gt; Indicates the number of seconds until the cookie expires. A zero or negative number will expire the cookie immediately. If both Expires and Max-Age are set, Max-Age has precedence.\r\n\r\nMake sure that other attributes (i.e. `Path`) are set correctly: if the client&#39;s cookie is set with `Path=/`, the server should set that same value before sending the cookie. Same goes for the other attributes.\r\n\r\nThis is how I have done it, in Go:\r\n```lang-go\r\n// Taken from the handler that logs users in:\r\nsession_id := generateRandomString()\r\ncookie := &amp;http.Cookie{\r\n\tName:     &quot;session&quot;,\r\n\tValue:    session_id,\r\n\tMaxAge:   int(time.Hour.Seconds()),\r\n\tSecure:   r.TLS != nil, // r is the typical *http.Request\r\n\tHttpOnly: true,\r\n\tSameSite: http.SameSiteStrictMode,\r\n\tPath:     &quot;/&quot;,\r\n}\r\nhttp.SetCookie(w, cookie)\r\n```\r\n```lang-go\r\n// Taken from the handler that logs users out:\r\ncookie, err := r.Cookie(&quot;session&quot;)\r\nif err != nil {\r\n\thttp.Error(w, &quot;cookie not found&quot;, http.StatusUnauthorized)\r\n\treturn\r\n}\r\n// Here goes the logic to log out the user.\r\n// Once that is done, it is time to send an expired cookie back:\r\nnewCookie := &amp;http.Cookie{\r\n\tName:     &quot;session&quot;,\r\n\tValue:    cookie.Value,\r\n\tMaxAge:   -1,\r\n\tSecure:   r.TLS != nil,\r\n\tHttpOnly: true,\r\n\tSameSite: http.SameSiteStrictMode,\r\n\tPath:     &quot;/&quot;,\r\n}\r\nhttp.SetCookie(w, newCookie)\r\n```\r\n\r\nFrom Go&#39;s source code for type `Cookie`:\r\n\r\n```lang-go\r\n// MaxAge=0 means no &#39;Max-Age&#39; attribute specified.\r\n// MaxAge&lt;0 means delete cookie now, equivalently &#39;Max-Age: 0&#39;\r\n```\r\n\r\n\r\n  [1]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie","title":"How do I delete a HttpOnly Cookie on the client?","body":"<p>From <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie\" rel=\"nofollow noreferrer\">MDN</a>:</p>\n<blockquote>\n<p>Max-Age=&lt;number&gt;</p>\n<p>Indicates the number of seconds until the cookie expires. A zero or negative number will expire the cookie immediately. If both Expires and Max-Age are set, Max-Age has precedence.</p>\n</blockquote>\n<p>Make sure that other attributes (i.e. <code>Path</code>) are set correctly: if the client's cookie is set with <code>Path=/</code>, the server should set that same value before sending the cookie. Same goes for the other attributes.</p>\n<p>This is how I have done it, in Go:</p>\n<pre class=\"lang-go prettyprint-override\"><code>// Taken from the handler that logs users in:\nsession_id := generateRandomString()\ncookie := &amp;http.Cookie{\n    Name:     &quot;session&quot;,\n    Value:    session_id,\n    MaxAge:   int(time.Hour.Seconds()),\n    Secure:   r.TLS != nil, // r is the typical *http.Request\n    HttpOnly: true,\n    SameSite: http.SameSiteStrictMode,\n    Path:     &quot;/&quot;,\n}\nhttp.SetCookie(w, cookie)\n</code></pre>\n<pre class=\"lang-go prettyprint-override\"><code>// Taken from the handler that logs users out:\ncookie, err := r.Cookie(&quot;session&quot;)\nif err != nil {\n    http.Error(w, &quot;cookie not found&quot;, http.StatusUnauthorized)\n    return\n}\n// Here goes the logic to log out the user.\n// Once that is done, it is time to send an expired cookie back:\nnewCookie := &amp;http.Cookie{\n    Name:     &quot;session&quot;,\n    Value:    cookie.Value,\n    MaxAge:   -1,\n    Secure:   r.TLS != nil,\n    HttpOnly: true,\n    SameSite: http.SameSiteStrictMode,\n    Path:     &quot;/&quot;,\n}\nhttp.SetCookie(w, newCookie)\n</code></pre>\n<p>From Go's source code for type <code>Cookie</code>:</p>\n<pre class=\"lang-go prettyprint-override\"><code>// MaxAge=0 means no 'Max-Age' attribute specified.\n// MaxAge&lt;0 means delete cookie now, equivalently 'Max-Age: 0'\n</code></pre>\n"}],"owner":{"account_id":18150538,"reputation":159,"user_id":13203322,"display_name":"BaraKanske"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2952,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689942307,"creation_date":1604905778,"question_id":64747157,"body_markdown":"I have a website that, when a user logs in, creates an Access token which is stored in memory and a Refresh token that is stored in an HttpOnly cookie. When a user logs out I want to delete the HttpOnly cookie. however, since it&#39;s HttpOnly I am not able to do this with JavaScript, so instead my plan is to send another cookie from the server that is expired and overwrite the valid cookie. Unfortunately, for some reason, this does not work. \r\n\r\nThis is how I create the cookie in the first place:\r\n````\r\n String refreshToken = issueRefreshToken(username);\r\n long currentDate = Calendar.getInstance().getTimeInMillis();\r\n Date expDate = new Date(currentDate + 60 * 24 * 7 * ONE_MINUTE_IN_MILLIS);\r\n\r\n NewCookie newCookie = new NewCookie(&quot;RefreshCookie&quot;,\r\n                    refreshToken,\r\n                    &quot;/&quot;,\r\n                    null,\r\n                    NewCookie.DEFAULT_VERSION,\r\n                    &quot;Comment&quot;,\r\n                    60 * 60 * 24 * 7,\r\n                    expDate,\r\n                    false,\r\n                    true);\r\n\r\n            // Return the token  on the response\r\n return Response.ok(accessToken).cookie(newCookie).header(&quot;Access-Control-Allow-Credentials&quot;, true).build();\r\n\r\n````\r\nThis works as intended and creates a Refresh cookie that is valid for one week. \r\n\r\nI have another endpoint (/logout) that creates another cookie, which is suppose to overwrite the first one. \r\n\r\n`````\r\n @POST\r\n public Response logout(){\r\n        NewCookie logoutCookie = new NewCookie(\r\n                &quot;RefreshCookie&quot;,\r\n                null,\r\n                &quot;/&quot;,\r\n                null,\r\n                NewCookie.DEFAULT_VERSION,\r\n                &quot;&quot;,\r\n                0,\r\n                new Date(),\r\n                false,\r\n                true);\r\n        return Response.ok().cookie(logoutCookie).header(&quot;Access-Control-Allow-Credentials&quot;, true).build();\r\n    }\r\n`````\r\nThis cookie does not even get saved to the frontend when the first client is not set. I have tried to send it from a subpath of where the first cookie is set, with no luck. Is there something that I&#39;m missing here? Is this the wrong way to do it?","title":"How do I delete a HttpOnly Cookie on the client?","body":"<p>I have a website that, when a user logs in, creates an Access token which is stored in memory and a Refresh token that is stored in an HttpOnly cookie. When a user logs out I want to delete the HttpOnly cookie. however, since it's HttpOnly I am not able to do this with JavaScript, so instead my plan is to send another cookie from the server that is expired and overwrite the valid cookie. Unfortunately, for some reason, this does not work.</p>\n<p>This is how I create the cookie in the first place:</p>\n<pre><code> String refreshToken = issueRefreshToken(username);\n long currentDate = Calendar.getInstance().getTimeInMillis();\n Date expDate = new Date(currentDate + 60 * 24 * 7 * ONE_MINUTE_IN_MILLIS);\n\n NewCookie newCookie = new NewCookie(&quot;RefreshCookie&quot;,\n                    refreshToken,\n                    &quot;/&quot;,\n                    null,\n                    NewCookie.DEFAULT_VERSION,\n                    &quot;Comment&quot;,\n                    60 * 60 * 24 * 7,\n                    expDate,\n                    false,\n                    true);\n\n            // Return the token  on the response\n return Response.ok(accessToken).cookie(newCookie).header(&quot;Access-Control-Allow-Credentials&quot;, true).build();\n\n</code></pre>\n<p>This works as intended and creates a Refresh cookie that is valid for one week.</p>\n<p>I have another endpoint (/logout) that creates another cookie, which is suppose to overwrite the first one.</p>\n<pre><code> @POST\n public Response logout(){\n        NewCookie logoutCookie = new NewCookie(\n                &quot;RefreshCookie&quot;,\n                null,\n                &quot;/&quot;,\n                null,\n                NewCookie.DEFAULT_VERSION,\n                &quot;&quot;,\n                0,\n                new Date(),\n                false,\n                true);\n        return Response.ok().cookie(logoutCookie).header(&quot;Access-Control-Allow-Credentials&quot;, true).build();\n    }\n</code></pre>\n<p>This cookie does not even get saved to the frontend when the first client is not set. I have tried to send it from a subpath of where the first cookie is set, with no luck. Is there something that I'm missing here? Is this the wrong way to do it?</p>\n"},{"tags":["java","eclipse","qr-code","zxing"],"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1689945196,"post_id":76737922,"comment_id":135288645,"body_markdown":"You did not import the right libraries. `com.google` is not from `javafx`. It&#39;s from some google library, hence why the package name includes `google`.","body":"You did not import the right libraries. <code>com.google</code> is not from <code>javafx</code>. It&#39;s from some google library, hence why the package name includes <code>google</code>."},{"owner":{"account_id":29063733,"reputation":1,"user_id":22263807,"display_name":"kfpcraft"},"score":0,"creation_date":1690034705,"post_id":76737922,"comment_id":135298188,"body_markdown":"So I cannot use the library in my JavaFX project... I&#39;m going to have to find another way to implement the QR code scanner and generator.","body":"So I cannot use the library in my JavaFX project... I&#39;m going to have to find another way to implement the QR code scanner and generator."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1690041965,"post_id":76737922,"comment_id":135299133,"body_markdown":"Of course you can. just add the dependency to the project&#39;s dependency list.","body":"Of course you can. just add the dependency to the project&#39;s dependency list."},{"owner":{"account_id":29063733,"reputation":1,"user_id":22263807,"display_name":"kfpcraft"},"score":0,"creation_date":1690616377,"post_id":76737922,"comment_id":135380918,"body_markdown":"How do I &quot;add the dependency&quot; to the project&#39;s dependency list? I am using a JavaFXML in an Eclipse IDE. I already added the Jar files to the project&#39;s Java Build Path.","body":"How do I &quot;add the dependency&quot; to the project&#39;s dependency list? I am using a JavaFXML in an Eclipse IDE. I already added the Jar files to the project&#39;s Java Build Path."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1690638985,"post_id":76737922,"comment_id":135383245,"body_markdown":"In your gradle or maven build description file. Adding the jars to the build path _will_ get rid of those errors, so double check that you really did that.","body":"In your gradle or maven build description file. Adding the jars to the build path <i>will</i> get rid of those errors, so double check that you really did that."}],"owner":{"account_id":29063733,"reputation":1,"user_id":22263807,"display_name":"kfpcraft"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689942074,"creation_date":1689941747,"question_id":76737922,"body_markdown":"I am trying to implement a QR code generator and scanner in a desktop application written in Java from the Eclipse IDE. I am following this tutorial: [Java code to Generate QR Code and Read QR Code using Camera https://www.youtube.com/watch?v=oBibVwgi09g&amp;t=193s](https://www.youtube.com/watch?v=oBibVwgi09g&amp;t=193s)\r\n\r\nHere is my code for generating the QR code:\r\n\r\n```\r\npackage application;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.util.Map;\r\n\r\nimport com.google.zxing.BarcodeFormat;\r\nimport com.google.zxing.MultiFormatWriter;\r\nimport com.google.zxing.WriterException;\r\nimport com.google.zxing.client.j2se.MatrixToImageWriter;\r\nimport com.google.zxing.common.BitMatrix;\r\n\r\npublic class QRGenerator {\r\n    \r\n    public void generateQRcode(String data, String path, String charset, Map map, int h, int w) throws WriterException, IOException {\r\n        BitMatrix matrix = new MultiFormatWriter().encode(new String(data.getBytes(charset), charset), BarcodeFormat.QR_CODE, w, h);\r\n        MatrixToImageWriter.writeToFile(matrix, path.substring(path.lastIndexOf(&#39;.&#39;) + 1), new File(path));\r\n    } \r\n    \r\n}\r\n\r\n```\r\n\r\nI already imported the Jar Libraries into Eclipse using this other tutorial: [How to Import or Add Jar Libraries in Eclipse https://www.youtube.com/watch?v=zWTzZ4sNAFw] (https://www.youtube.com/watch?v=zWTzZ4sNAFw)\r\n\r\nThis is what my project folder looks like. The project name is Splogurt_OOP_MiniProject.\r\n[Jar files are imported into the project](https://i.stack.imgur.com/Kwho6.png)\r\n\r\nThe code should have no errors, but there are sqwiggly red lines under text like `com.google.zxing`, `com.google.zxing.client.j2se`, `com.google.zxing.common` and a few other parts of the code.\r\n\r\nThe errors say things like &quot;The package from com.google.zxing is not accessible.&quot;\r\n\r\n[Screenshot of my QR generator code.](https://i.stack.imgur.com/mYhjR.png)\r\n\r\nI already deleted and re-made my module-info.java file to try and fix this:\r\n\r\n```\r\nmodule Splogurt_OOP_MiniProject {\r\n    exports application;\r\n\r\n    requires javafx.base;\r\n    requires javafx.controls;\r\n    requires javafx.fxml;\r\n    requires javafx.graphics;\r\n    requires javase;\r\n    \r\n    opens application to javafx.graphics, javafx.fxml;\r\n    \r\n    requires Webcam;\r\n}\r\n```\r\n\r\nHow do I solve these errors?","title":"Eclipse IDE: The package com.google.zxing is not accessible, despite importing the right libraries","body":"<p>I am trying to implement a QR code generator and scanner in a desktop application written in Java from the Eclipse IDE. I am following this tutorial: <a href=\"https://www.youtube.com/watch?v=oBibVwgi09g&amp;t=193s\" rel=\"nofollow noreferrer\">Java code to Generate QR Code and Read QR Code using Camera https://www.youtube.com/watch?v=oBibVwgi09g&amp;t=193s</a></p>\n<p>Here is my code for generating the QR code:</p>\n<pre><code>package application;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.Map;\n\nimport com.google.zxing.BarcodeFormat;\nimport com.google.zxing.MultiFormatWriter;\nimport com.google.zxing.WriterException;\nimport com.google.zxing.client.j2se.MatrixToImageWriter;\nimport com.google.zxing.common.BitMatrix;\n\npublic class QRGenerator {\n    \n    public void generateQRcode(String data, String path, String charset, Map map, int h, int w) throws WriterException, IOException {\n        BitMatrix matrix = new MultiFormatWriter().encode(new String(data.getBytes(charset), charset), BarcodeFormat.QR_CODE, w, h);\n        MatrixToImageWriter.writeToFile(matrix, path.substring(path.lastIndexOf('.') + 1), new File(path));\n    } \n    \n}\n\n</code></pre>\n<p>I already imported the Jar Libraries into Eclipse using this other tutorial: [How to Import or Add Jar Libraries in Eclipse https://www.youtube.com/watch?v=zWTzZ4sNAFw] (<a href=\"https://www.youtube.com/watch?v=zWTzZ4sNAFw\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=zWTzZ4sNAFw</a>)</p>\n<p>This is what my project folder looks like. The project name is Splogurt_OOP_MiniProject.\n<a href=\"https://i.stack.imgur.com/Kwho6.png\" rel=\"nofollow noreferrer\">Jar files are imported into the project</a></p>\n<p>The code should have no errors, but there are sqwiggly red lines under text like <code>com.google.zxing</code>, <code>com.google.zxing.client.j2se</code>, <code>com.google.zxing.common</code> and a few other parts of the code.</p>\n<p>The errors say things like &quot;The package from com.google.zxing is not accessible.&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/mYhjR.png\" rel=\"nofollow noreferrer\">Screenshot of my QR generator code.</a></p>\n<p>I already deleted and re-made my module-info.java file to try and fix this:</p>\n<pre><code>module Splogurt_OOP_MiniProject {\n    exports application;\n\n    requires javafx.base;\n    requires javafx.controls;\n    requires javafx.fxml;\n    requires javafx.graphics;\n    requires javase;\n    \n    opens application to javafx.graphics, javafx.fxml;\n    \n    requires Webcam;\n}\n</code></pre>\n<p>How do I solve these errors?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-cloud-contract"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1689888107,"post_id":76731711,"comment_id":135281053,"body_markdown":"i am suspecting the following but i cant test it out currently. according to https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-contract-stub-runner/4.0.3 stub-runner has an optional dependency on `spring-boot-starter-web` when you have both, spring-web and spring-webflux on the classpath the spring boot application will favor spring-web and start up a `non-reactive` spring application. In a spring-web application `HttpSecurity` is used and not `ServerHttpSecurity` hence you application crashes because it is started as a regular spring-web app.","body":"i am suspecting the following but i cant test it out currently. according to <a href=\"https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-contract-stub-runner/4.0.3\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.springframework.cloud/&hellip;</a> stub-runner has an optional dependency on <code>spring-boot-starter-web</code> when you have both, spring-web and spring-webflux on the classpath the spring boot application will favor spring-web and start up a <code>non-reactive</code> spring application. In a spring-web application <code>HttpSecurity</code> is used and not <code>ServerHttpSecurity</code> hence you application crashes because it is started as a regular spring-web app."},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1689888421,"post_id":76731711,"comment_id":135281091,"body_markdown":"if you could get a dependency tree printed and check if you have spring-web on the classpath it will confirm my theory. And if so you need to either exclude that optional library, or you can force your application to be started as a reactive application this is pointed out here https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#web.reactive.webflux about mid way down in the tip box. So by forcing you add `SpringApplication.setWebApplicationType(WebApplicationType.REACTIVE)` in the main function. Im only writing this as a comment because i cant confirm this.","body":"if you could get a dependency tree printed and check if you have spring-web on the classpath it will confirm my theory. And if so you need to either exclude that optional library, or you can force your application to be started as a reactive application this is pointed out here <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#web.reactive.webflux\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/htmlsingle&zwnj;&#8203;/&hellip;</a> about mid way down in the tip box. So by forcing you add <code>SpringApplication.setWebApplicationType(WebApplicationType.R&zwnj;&#8203;EACTIVE)</code> in the main function. Im only writing this as a comment because i cant confirm this."},{"owner":{"account_id":13349282,"reputation":322,"user_id":9635150,"display_name":"Favna"},"score":0,"creation_date":1689922410,"post_id":76731711,"comment_id":135284345,"body_markdown":"@Toerktumlare I have added it to the GitHub repo (content adds way too many characters for a SO post) https://github.com/favna/congenial-fishstick/blob/main/dependencies.txt","body":"@Toerktumlare I have added it to the GitHub repo (content adds way too many characters for a SO post) <a href=\"https://github.com/favna/congenial-fishstick/blob/main/dependencies.txt\" rel=\"nofollow noreferrer\">github.com/favna/congenial-fishstick/blob/main/dependencies.&zwnj;&#8203;txt</a>"},{"owner":{"account_id":13349282,"reputation":322,"user_id":9635150,"display_name":"Favna"},"score":0,"creation_date":1689923179,"post_id":76731711,"comment_id":135284471,"body_markdown":"As per your suggestion I changed the main function to this:\n```java\n\tpublic static void main(String[] args) {\n\t\tSpringApplication app = new SpringApplication(DemoApplication.class);\n\t\tapp.setWebApplicationType(WebApplicationType.REACTIVE);\n\t\tapp.run(args);\n\t}\n```\nBut to no avail, sadly.","body":"As per your suggestion I changed the main function to this: <code>java \tpublic static void main(String[] args) { \t\tSpringApplication app = new SpringApplication(DemoApplication.class); \t\tapp.setWebApplicationType(WebApplicationType.REACTIVE); \t\tapp.run(args); \t} </code> But to no avail, sadly."},{"owner":{"account_id":13349282,"reputation":322,"user_id":9635150,"display_name":"Favna"},"score":0,"creation_date":1689934823,"post_id":76731711,"comment_id":135286609,"body_markdown":"Been doing a lot more digging over the past couple of hours and it turns out that if I downgrade `spring-cloud-starter-contract-verifier` and `spring-cloud-starter-contract-stub-runner` to 3.1.8 (latest release on 3.x) the tests do pass. Sadly I am currently unable to find any form of changelog of breaking changes for v4.x so I&#39;m currently having a hard time validating why this would be.","body":"Been doing a lot more digging over the past couple of hours and it turns out that if I downgrade <code>spring-cloud-starter-contract-verifier</code> and <code>spring-cloud-starter-contract-stub-runner</code> to 3.1.8 (latest release on 3.x) the tests do pass. Sadly I am currently unable to find any form of changelog of breaking changes for v4.x so I&#39;m currently having a hard time validating why this would be."},{"owner":{"account_id":13349282,"reputation":322,"user_id":9635150,"display_name":"Favna"},"score":0,"creation_date":1689940202,"post_id":76731711,"comment_id":135287600,"body_markdown":"Another update to the above, I retract that downgrade. It breaks lots of other stuff. Transitive dependencies with groovy, and even when fixing that it breaks runtime things. I also found another SO post that very explicitly stated that for Spring Boot 3, you need Spring Cloud Contract 4. So still no dice.","body":"Another update to the above, I retract that downgrade. It breaks lots of other stuff. Transitive dependencies with groovy, and even when fixing that it breaks runtime things. I also found another SO post that very explicitly stated that for Spring Boot 3, you need Spring Cloud Contract 4. So still no dice."},{"owner":{"account_id":13349282,"reputation":322,"user_id":9635150,"display_name":"Favna"},"score":0,"creation_date":1690275932,"post_id":76731711,"comment_id":135327148,"body_markdown":"@Toerktumlare hey I just wanted to check if you could review the updated information again as I am still stuck?","body":"@Toerktumlare hey I just wanted to check if you could review the updated information again as I am still stuck?"}],"owner":{"account_id":13349282,"reputation":322,"user_id":9635150,"display_name":"Favna"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689941767,"creation_date":1689868838,"question_id":76731711,"body_markdown":"First of all, I will start by saying that I created a small project where this issue can be reproduced: https://github.com/favna/congenial-fishstick. Following I will more-or-less assume that the code in the repo is looked at.\r\n\r\n---\r\n\r\nI am currently in the process of updating many of our microservices from Java 11 to 17, and part of that upgrade is going from Spring 2 to Spring 3 and Spring Cloud Contract 2 to 4. After much digging I have noticed that adding `org.springframework.cloud:spring-cloud-starter-contract-stub-runner:4.0.3` as a dependency to a project causes even the most basic boot unit test such as:\r\n```java\r\npackage com.example.demo;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\r\n\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest()\r\nclass DemoApplicationTest {\r\n\t@Test\r\n\tvoid bootTest() {\r\n\t\t// EMPTY\r\n\t}\r\n}\r\n```\r\nwhich for all intents and purposes is identical to the official sample from Spring Security: https://github.com/spring-projects/spring-security-samples/blob/main/reactive/webflux/java/hello-security-explicit/src/test/java/example/HelloSecurityTests.java, except that it checks even less than the sample does.\r\n\r\nThe error it is giving is:\r\n```\r\njava.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@62b09715 testClass = com.example.demo.DemoApplicationTest, locations = [], classes = [com.example.demo.DemoApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = [&quot;org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true&quot;], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6986bbaf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2eee3069, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@13d9b21f, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@93cf163, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@25bfcafd, org.springframework.boot.test.context.SpringBootTestAnnotation@80d32d79], resourceBasePath = &quot;src/main/webapp&quot;, contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:143)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)\r\n\tat org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)\r\n\tat org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:110)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:90)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:85)\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n\tat jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\r\n\tat org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;springSecurityWebFilterChain&#39; defined in class path resource [com/example/demo/config/SecurityConfig.class]: Unsatisfied dependency expressed through method &#39;springSecurityWebFilterChain&#39; parameter 0: No qualifying bean of type &#39;org.springframework.security.config.web.server.ServerHttpSecurity&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\tat app//org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\r\n\tat app//org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:550)\r\n\tat app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)\r\n\tat app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)\r\n\tat app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)\r\n\tat app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)\r\n\tat app//org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n\tat app//org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat app//org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n\tat app//org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)\r\n\tat app//org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:941)\r\n\tat app//org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)\r\n\tat app//org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\r\n\tat app//org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)\r\n\tat app//org.springframework.boot.SpringApplication.run(SpringApplication.java:312)\r\n\tat app//org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\r\n\tat app//org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n\tat app//org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n\tat app//org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1406)\r\n\tat app//org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)\r\n\tat app//org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\r\n\tat app//org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\r\n\tat app//org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:187)\r\n\tat app//org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:119)\r\n\t... 86 more\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.security.config.web.server.ServerHttpSecurity&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1824)\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1383)\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)\r\n\tat app//org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)\r\n\tat app//org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\r\n\t... 110 more\r\n```\r\n\r\nI am absolutely stumped as to why this issue is coming up, and using the Spring Cloud Contract Stub runner is an essential part of the microservices that we develop in the project I am working on.\r\n\r\nIn short the conditions that need to be met for this error to pop up:\r\n1. Have a dependency of `org.springframework.cloud:spring-cloud-starter-contract-stub-runner:4.0.3`\r\n2. Have a test that uses the `@SpringBootTest` annotation\r\n3. Use Spring Security with a webflux configuration.\r\n\r\nWhat I have tried so far is (that is still relevant to the repro linked above anyway):\r\n1. Adding `@EnableWebFluxSecurity` to the `SecurityConfig` class.\r\n2. Making the `springSecurityWebFilterChain` bean method explicitly public\r\n3. Going through all the dependencies (multiple times by now) and ensuring each is on their latest version (as seen on Maven Central)\r\n\r\nI have tried many other things but those were in the microservices being updated and aren&#39;t relevant to the little bit of code that remains in the repro.\r\n\r\nEdit: As per requested in the comments I have added a dependencies tree as generated by `./gradlew -q dependencies &gt; dependencies.txt`: https://github.com/favna/congenial-fishstick/blob/main/dependencies.txt\r\n\r\nEdit 2: I have also made a Gradle Build Scan available: https://scans.gradle.com/s/h2uzcanvhk7fk","title":"Adding Spring Cloud Contract Stubrunner dependency causes Spring Security `ServerHttpSecurity` to not be autowire-able when running JUnit 5 tests","body":"<p>First of all, I will start by saying that I created a small project where this issue can be reproduced: <a href=\"https://github.com/favna/congenial-fishstick\" rel=\"nofollow noreferrer\">https://github.com/favna/congenial-fishstick</a>. Following I will more-or-less assume that the code in the repo is looked at.</p>\n<hr />\n<p>I am currently in the process of updating many of our microservices from Java 11 to 17, and part of that upgrade is going from Spring 2 to Spring 3 and Spring Cloud Contract 2 to 4. After much digging I have noticed that adding <code>org.springframework.cloud:spring-cloud-starter-contract-stub-runner:4.0.3</code> as a dependency to a project causes even the most basic boot unit test such as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\n\n@ExtendWith(SpringExtension.class)\n@SpringBootTest()\nclass DemoApplicationTest {\n    @Test\n    void bootTest() {\n        // EMPTY\n    }\n}\n</code></pre>\n<p>which for all intents and purposes is identical to the official sample from Spring Security: <a href=\"https://github.com/spring-projects/spring-security-samples/blob/main/reactive/webflux/java/hello-security-explicit/src/test/java/example/HelloSecurityTests.java\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-security-samples/blob/main/reactive/webflux/java/hello-security-explicit/src/test/java/example/HelloSecurityTests.java</a>, except that it checks even less than the sample does.</p>\n<p>The error it is giving is:</p>\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@62b09715 testClass = com.example.demo.DemoApplicationTest, locations = [], classes = [com.example.demo.DemoApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = [&quot;org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true&quot;], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6986bbaf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2eee3069, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@13d9b21f, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@93cf163, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@25bfcafd, org.springframework.boot.test.context.SpringBootTestAnnotation@80d32d79], resourceBasePath = &quot;src/main/webapp&quot;, contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:143)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)\n    at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)\n    at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)\n    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\n    at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\n    at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)\n    at java.base/java.util.Optional.orElseGet(Optional.java:364)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)\n    at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:110)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:90)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:85)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\n    at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\n    at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\n    at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityWebFilterChain' defined in class path resource [com/example/demo/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityWebFilterChain' parameter 0: No qualifying bean of type 'org.springframework.security.config.web.server.ServerHttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n    at app//org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\n    at app//org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:550)\n    at app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)\n    at app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)\n    at app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)\n    at app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)\n    at app//org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at app//org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at app//org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at app//org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)\n    at app//org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:941)\n    at app//org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)\n    at app//org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\n    at app//org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)\n    at app//org.springframework.boot.SpringApplication.run(SpringApplication.java:312)\n    at app//org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\n    at app//org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\n    at app//org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\n    at app//org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1406)\n    at app//org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)\n    at app//org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\n    at app//org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\n    at app//org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:187)\n    at app//org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:119)\n    ... 86 more\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.web.server.ServerHttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1824)\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1383)\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)\n    at app//org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)\n    at app//org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\n    ... 110 more\n</code></pre>\n<p>I am absolutely stumped as to why this issue is coming up, and using the Spring Cloud Contract Stub runner is an essential part of the microservices that we develop in the project I am working on.</p>\n<p>In short the conditions that need to be met for this error to pop up:</p>\n<ol>\n<li>Have a dependency of <code>org.springframework.cloud:spring-cloud-starter-contract-stub-runner:4.0.3</code></li>\n<li>Have a test that uses the <code>@SpringBootTest</code> annotation</li>\n<li>Use Spring Security with a webflux configuration.</li>\n</ol>\n<p>What I have tried so far is (that is still relevant to the repro linked above anyway):</p>\n<ol>\n<li>Adding <code>@EnableWebFluxSecurity</code> to the <code>SecurityConfig</code> class.</li>\n<li>Making the <code>springSecurityWebFilterChain</code> bean method explicitly public</li>\n<li>Going through all the dependencies (multiple times by now) and ensuring each is on their latest version (as seen on Maven Central)</li>\n</ol>\n<p>I have tried many other things but those were in the microservices being updated and aren't relevant to the little bit of code that remains in the repro.</p>\n<p>Edit: As per requested in the comments I have added a dependencies tree as generated by <code>./gradlew -q dependencies &gt; dependencies.txt</code>: <a href=\"https://github.com/favna/congenial-fishstick/blob/main/dependencies.txt\" rel=\"nofollow noreferrer\">https://github.com/favna/congenial-fishstick/blob/main/dependencies.txt</a></p>\n<p>Edit 2: I have also made a Gradle Build Scan available: <a href=\"https://scans.gradle.com/s/h2uzcanvhk7fk\" rel=\"nofollow noreferrer\">https://scans.gradle.com/s/h2uzcanvhk7fk</a></p>\n"},{"tags":["java","logback","slf4j","osgi-bundle"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689605082,"post_id":76705573,"comment_id":135233409,"body_markdown":"That class seems to migrate between `classic` and `core`. Try `core`","body":"That class seems to migrate between <code>classic</code> and <code>core</code>. Try <code>core</code>"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1689605133,"post_id":76705573,"comment_id":135233429,"body_markdown":"https://github.com/qos-ch/logback-db","body":"<a href=\"https://github.com/qos-ch/logback-db\" rel=\"nofollow noreferrer\">github.com/qos-ch/logback-db</a>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689605674,"post_id":76705573,"comment_id":135233542,"body_markdown":"https://mvnrepository.com/artifact/ch.qos.logback.db/logback-classic-db","body":"<a href=\"https://mvnrepository.com/artifact/ch.qos.logback.db/logback-classic-db\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/ch.qos.logback.db/logback-classic&zwnj;&#8203;-db</a>"},{"owner":{"account_id":3523773,"reputation":87,"user_id":2945440,"display_name":"skrenato"},"score":0,"creation_date":1689606037,"post_id":76705573,"comment_id":135233631,"body_markdown":"`osgi-log` (bundle for handling log) already has the dependency `implementation group: &#39;ch.qos.logback&#39;, name: &#39;logback-classic-db&#39;, version: &#39;1.2.11.1&#39;` set. Maybe I should highlight it","body":"<code>osgi-log</code> (bundle for handling log) already has the dependency <code>implementation group: &#39;ch.qos.logback&#39;, name: &#39;logback-classic-db&#39;, version: &#39;1.2.11.1&#39;</code> set. Maybe I should highlight it"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689610435,"post_id":76705573,"comment_id":135234578,"body_markdown":"Oops, so you do ;) I must confess I don&#39;t use Gradle, but needless to say that you&#39;ve got a *runtime* dependency problem. Maybe that class is not getting into what is executed","body":"Oops, so you do ;) I must confess I don&#39;t use Gradle, but needless to say that you&#39;ve got a <i>runtime</i> dependency problem. Maybe that class is not getting into what is executed"}],"owner":{"account_id":3523773,"reputation":87,"user_id":2945440,"display_name":"skrenato"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689941096,"creation_date":1689604872,"question_id":76705573,"body_markdown":"I&#39;ve been trying to apply configuration of a [DBAppender][1] in my OSGi application and I keep getting the following error:\r\n\r\n```java\r\n10:12:59,285 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [DB]\r\n10:12:59,285 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.classic.db.DBAppender]\r\n10:12:59,285 |-ERROR in ch.qos.logback.core.model.processor.AppenderModelHandler - Could not create an Appender of type [ch.qos.logback.classic.db.DBAppender]. ch.qos.logback.core.util.DynamicClassLoadingException: Failed to instantiate type ch.qos.logback.classic.db.DBAppender\r\n        at ch.qos.logback.core.util.DynamicClassLoadingException: Failed to instantiate type ch.qos.logback.classic.db.DBAppender\r\n        at      at ch.qos.logback.core.util.OptionHelper.instantiateByClassNameAndParameter(OptionHelper.java:69)\r\n        at      at ch.qos.logback.core.util.OptionHelper.instantiateByClassName(OptionHelper.java:44)\r\n        at      at ch.qos.logback.core.util.OptionHelper.instantiateByClassName(OptionHelper.java:33)\r\n        at      at ch.qos.logback.core.model.processor.AppenderModelHandler.handle(AppenderModelHandler.java:67)\r\n        at      at ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:241)\r\n        at      at ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:253)\r\n        at      at ch.qos.logback.core.model.processor.DefaultProcessor.traversalLoop(DefaultProcessor.java:90)\r\n        at      at ch.qos.logback.core.model.processor.DefaultProcessor.process(DefaultProcessor.java:106)\r\n        at      at ch.qos.logback.core.joran.GenericXMLConfigurator.processModel(GenericXMLConfigurator.java:200)\r\n        at      at ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:166)\r\n        at      at ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:122)\r\n        at      at ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:65)\r\n        at      at ch.qos.logback.classic.util.DefaultJoranConfigurator.configureByResource(DefaultJoranConfigurator.java:53)\r\n        at      at ch.qos.logback.classic.util.DefaultJoranConfigurator.configure(DefaultJoranConfigurator.java:34)\r\n        at      at ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:98)\r\n        at      at ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:77)\r\n        at      at ch.qos.logback.classic.spi.LogbackServiceProvider.initializeLoggerContext(LogbackServiceProvider.java:50)\r\n        at      at ch.qos.logback.classic.spi.LogbackServiceProvider.initialize(LogbackServiceProvider.java:41)\r\n        at      at org.slf4j.LoggerFactory.bind(LoggerFactory.java:183)\r\n        at      at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:170)\r\n        at      at org.slf4j.LoggerFactory.getProvider(LoggerFactory.java:453)\r\n        at      at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:439)\r\n        at      at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:388)\r\n        at      at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:414)\r\n        at      at prodist.robot.equinox.Application.&lt;clinit&gt;(Application.java:37)\r\n        at      at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n        at      at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n        at      at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n        at      at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n        at      at java.lang.Class.newInstance(Class.java:442)\r\n        at      at org.eclipse.equinox.internal.ds.model.ServiceComponent.createInstance(ServiceComponent.java:493)\r\n        at      at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.createInstance(ServiceComponentProp.java:270)\r\n        at      at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.build(ServiceComponentProp.java:331)\r\n        at      at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponent(InstanceProcess.java:620)\r\n        at      at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponents(InstanceProcess.java:197)\r\n        at      at org.eclipse.equinox.internal.ds.Resolver.buildNewlySatisfied(Resolver.java:473)\r\n        at      at org.eclipse.equinox.internal.ds.Resolver.enableComponents(Resolver.java:217)\r\n        at      at org.eclipse.equinox.internal.ds.SCRManager.performWork(SCRManager.java:816)\r\n        at      at org.eclipse.equinox.internal.ds.SCRManager$QueuedJob.dispatch(SCRManager.java:783)\r\n        at      at org.eclipse.equinox.internal.ds.WorkThread.run(WorkThread.java:89)\r\n        at      at org.eclipse.equinox.internal.util.impl.tpt.threadpool.Executor.run(Executor.java:70)\r\nCaused by: java.lang.ClassNotFoundException: ch.qos.logback.classic.db.DBAppender cannot be found by ch.qos.logback.classic_1.3.5\r\n        at      at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)\r\n        at      at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:372)\r\n        at      at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:364)\r\n        at      at org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:161)\r\n        at      at java.lang.ClassLoader.loadClass(ClassLoader.java:352)\r\n        at      at ch.qos.logback.core.util.OptionHelper.instantiateByClassNameAndParameter(OptionHelper.java:56)\r\n        at      ... 40 common frames omitted\r\n```\r\n\r\nI&#39;ve implemented an gradle module (`osgi-log`) to handle log only. This is his configuration:\r\n\r\n```groovy\r\ngroup &#39;project&#39;\r\nversion &#39;1.0.0&#39;\r\n\r\ndependencies {\r\n    api group: &#39;org.slf4j&#39;, name: &#39;slf4j-api&#39;, version: &#39;2.0.5&#39;\r\n\r\n    implementation group: &#39;ch.qos.logback&#39;, name: &#39;logback-classic&#39;, version: &#39;1.3.5&#39;\r\n    implementation group: &#39;ch.qos.logback&#39;, name: &#39;logback-core&#39;, version: &#39;1.3.5&#39;\r\n    implementation group: &#39;ch.qos.logback.db&#39;, name: &#39;logback-classic-db&#39;, version: &#39;1.2.11.1&#39;\r\n    implementation group: &#39;mysql&#39;, name: &#39;mysql-connector-java&#39;, version: &#39;8.0.33&#39;\r\n    implementation group: &#39;org.ow2.asm&#39;, name: &#39;asm&#39;, version: &#39;5.2&#39;\r\n    implementation group: &#39;org.ow2.asm&#39;, name: &#39;asm-commons&#39;, version: &#39;5.2&#39;\r\n    implementation group: &#39;org.ow2.asm&#39;, name: &#39;asm-util&#39;, version: &#39;5.2&#39;\r\n    implementation group: &#39;org.apache.aries.spifly&#39;, name: &#39;org.apache.aries.spifly.dynamic.bundle&#39;, version: &#39;1.3.5&#39;\r\n}\r\n```\r\n\r\nIn general, to use log in other bundles, I set a dependency like this:\r\n\r\n```\r\ndependencies {\r\n    implementation group: &#39;project&#39;, name: &#39;osgi-log&#39;\r\n}\r\n```\r\n\r\nNot sure if worth mentioning, but I&#39;m trying to work local - meaning both application and database are installed and running under localhost. I&#39;m using `mysql v.8.0.33`.\r\n\r\nAnd finally this is my logback configuration:\r\n\r\n```\r\n  &lt;appender name=&quot;DB&quot; class=&quot;ch.qos.logback.classic.db.DBAppender&quot;&gt;\r\n    &lt;connectionSource class=&quot;ch.qos.logback.core.db.DriverManagerConnectionSource&quot;&gt;\r\n      &lt;driverClass&gt;com.mysql.jdbc.Driver&lt;/driverClass&gt;\r\n      &lt;url&gt;jdbc:mysql://127.0.0.1:3306/osgi_app&lt;/url&gt;\r\n      &lt;user&gt;osgi_app&lt;/user&gt;\r\n      &lt;password&gt;osgi_app&lt;/password&gt;\r\n    &lt;/connectionSource&gt;\r\n  &lt;/appender&gt;\r\n```\r\n\r\nI really don&#39;t understand why `BundleLoader` is struggling to find the `DBAppender` class.\r\nJust a disclaimer that I don&#39;t fully understand this environment, osgi, bundle and logback-classic working under slf4j.\r\n\r\n  [1]: https://logback.qos.ch/manual/appenders.html#DBAppender","title":"OSGI: java.lang.ClassNotFoundException: ch.qos.logback.classic.db.DBAppender cannot be found by ch.qos.logback.classic_1.3.5","body":"<p>I've been trying to apply configuration of a <a href=\"https://logback.qos.ch/manual/appenders.html#DBAppender\" rel=\"nofollow noreferrer\">DBAppender</a> in my OSGi application and I keep getting the following error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>10:12:59,285 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [DB]\n10:12:59,285 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.classic.db.DBAppender]\n10:12:59,285 |-ERROR in ch.qos.logback.core.model.processor.AppenderModelHandler - Could not create an Appender of type [ch.qos.logback.classic.db.DBAppender]. ch.qos.logback.core.util.DynamicClassLoadingException: Failed to instantiate type ch.qos.logback.classic.db.DBAppender\n        at ch.qos.logback.core.util.DynamicClassLoadingException: Failed to instantiate type ch.qos.logback.classic.db.DBAppender\n        at      at ch.qos.logback.core.util.OptionHelper.instantiateByClassNameAndParameter(OptionHelper.java:69)\n        at      at ch.qos.logback.core.util.OptionHelper.instantiateByClassName(OptionHelper.java:44)\n        at      at ch.qos.logback.core.util.OptionHelper.instantiateByClassName(OptionHelper.java:33)\n        at      at ch.qos.logback.core.model.processor.AppenderModelHandler.handle(AppenderModelHandler.java:67)\n        at      at ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:241)\n        at      at ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:253)\n        at      at ch.qos.logback.core.model.processor.DefaultProcessor.traversalLoop(DefaultProcessor.java:90)\n        at      at ch.qos.logback.core.model.processor.DefaultProcessor.process(DefaultProcessor.java:106)\n        at      at ch.qos.logback.core.joran.GenericXMLConfigurator.processModel(GenericXMLConfigurator.java:200)\n        at      at ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:166)\n        at      at ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:122)\n        at      at ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:65)\n        at      at ch.qos.logback.classic.util.DefaultJoranConfigurator.configureByResource(DefaultJoranConfigurator.java:53)\n        at      at ch.qos.logback.classic.util.DefaultJoranConfigurator.configure(DefaultJoranConfigurator.java:34)\n        at      at ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:98)\n        at      at ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:77)\n        at      at ch.qos.logback.classic.spi.LogbackServiceProvider.initializeLoggerContext(LogbackServiceProvider.java:50)\n        at      at ch.qos.logback.classic.spi.LogbackServiceProvider.initialize(LogbackServiceProvider.java:41)\n        at      at org.slf4j.LoggerFactory.bind(LoggerFactory.java:183)\n        at      at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:170)\n        at      at org.slf4j.LoggerFactory.getProvider(LoggerFactory.java:453)\n        at      at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:439)\n        at      at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:388)\n        at      at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:414)\n        at      at prodist.robot.equinox.Application.&lt;clinit&gt;(Application.java:37)\n        at      at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at      at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n        at      at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at      at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n        at      at java.lang.Class.newInstance(Class.java:442)\n        at      at org.eclipse.equinox.internal.ds.model.ServiceComponent.createInstance(ServiceComponent.java:493)\n        at      at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.createInstance(ServiceComponentProp.java:270)\n        at      at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.build(ServiceComponentProp.java:331)\n        at      at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponent(InstanceProcess.java:620)\n        at      at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponents(InstanceProcess.java:197)\n        at      at org.eclipse.equinox.internal.ds.Resolver.buildNewlySatisfied(Resolver.java:473)\n        at      at org.eclipse.equinox.internal.ds.Resolver.enableComponents(Resolver.java:217)\n        at      at org.eclipse.equinox.internal.ds.SCRManager.performWork(SCRManager.java:816)\n        at      at org.eclipse.equinox.internal.ds.SCRManager$QueuedJob.dispatch(SCRManager.java:783)\n        at      at org.eclipse.equinox.internal.ds.WorkThread.run(WorkThread.java:89)\n        at      at org.eclipse.equinox.internal.util.impl.tpt.threadpool.Executor.run(Executor.java:70)\nCaused by: java.lang.ClassNotFoundException: ch.qos.logback.classic.db.DBAppender cannot be found by ch.qos.logback.classic_1.3.5\n        at      at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)\n        at      at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:372)\n        at      at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:364)\n        at      at org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:161)\n        at      at java.lang.ClassLoader.loadClass(ClassLoader.java:352)\n        at      at ch.qos.logback.core.util.OptionHelper.instantiateByClassNameAndParameter(OptionHelper.java:56)\n        at      ... 40 common frames omitted\n</code></pre>\n<p>I've implemented an gradle module (<code>osgi-log</code>) to handle log only. This is his configuration:</p>\n<pre><code>group 'project'\nversion '1.0.0'\n\ndependencies {\n    api group: 'org.slf4j', name: 'slf4j-api', version: '2.0.5'\n\n    implementation group: 'ch.qos.logback', name: 'logback-classic', version: '1.3.5'\n    implementation group: 'ch.qos.logback', name: 'logback-core', version: '1.3.5'\n    implementation group: 'ch.qos.logback.db', name: 'logback-classic-db', version: '1.2.11.1'\n    implementation group: 'mysql', name: 'mysql-connector-java', version: '8.0.33'\n    implementation group: 'org.ow2.asm', name: 'asm', version: '5.2'\n    implementation group: 'org.ow2.asm', name: 'asm-commons', version: '5.2'\n    implementation group: 'org.ow2.asm', name: 'asm-util', version: '5.2'\n    implementation group: 'org.apache.aries.spifly', name: 'org.apache.aries.spifly.dynamic.bundle', version: '1.3.5'\n}\n</code></pre>\n<p>In general, to use log in other bundles, I set a dependency like this:</p>\n<pre><code>dependencies {\n    implementation group: 'project', name: 'osgi-log'\n}\n</code></pre>\n<p>Not sure if worth mentioning, but I'm trying to work local - meaning both application and database are installed and running under localhost. I'm using <code>mysql v.8.0.33</code>.</p>\n<p>And finally this is my logback configuration:</p>\n<pre><code>  &lt;appender name=&quot;DB&quot; class=&quot;ch.qos.logback.classic.db.DBAppender&quot;&gt;\n    &lt;connectionSource class=&quot;ch.qos.logback.core.db.DriverManagerConnectionSource&quot;&gt;\n      &lt;driverClass&gt;com.mysql.jdbc.Driver&lt;/driverClass&gt;\n      &lt;url&gt;jdbc:mysql://127.0.0.1:3306/osgi_app&lt;/url&gt;\n      &lt;user&gt;osgi_app&lt;/user&gt;\n      &lt;password&gt;osgi_app&lt;/password&gt;\n    &lt;/connectionSource&gt;\n  &lt;/appender&gt;\n</code></pre>\n<p>I really don't understand why <code>BundleLoader</code> is struggling to find the <code>DBAppender</code> class.\nJust a disclaimer that I don't fully understand this environment, osgi, bundle and logback-classic working under slf4j.</p>\n"},{"tags":["java","mysql","spring-boot","error-handling","breakpoints"],"comments":[{"owner":{"account_id":15102634,"reputation":338,"user_id":10899197,"display_name":"Tr1monster"},"score":1,"creation_date":1689941289,"post_id":76737512,"comment_id":135287805,"body_markdown":"There is a blank space in front of your PW. I&#39;m not sure if this cause your trouble.","body":"There is a blank space in front of your PW. I&#39;m not sure if this cause your trouble."}],"owner":{"account_id":28422388,"reputation":35,"user_id":21744271,"display_name":"Anonymous"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689940193,"creation_date":1689938445,"question_id":76737512,"body_markdown":"I am creating a Spring Boot application using the mysql database dependency however I am getting the error:\r\n`java.sql.SQLException: Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: YES)`\r\n\r\n\r\nI have included my pom.xml and application.properties files below:\r\n\r\n**application.properties**\r\n\r\n```\r\nspring.datasource.url=jdbc:mysql://localhost:3306/AssignmentSubApp_DB\r\nspring.datasource.username=root\r\nspring.datasource.password= password123\r\n\r\nspring.jpa.database-platform=org.hibernate.dialect.MySQLDialect\r\nspring.jpa.show-sql=true\r\n#spring.jpa.hibernate.ddl-auto=update\r\n```\r\nThe above are my application.properties settings that I have selected are above, and I am not too sure if these are the reasons for the error. I have tried changing, however, the error remained.\r\n\r\n**pom.xml**\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.AssignmentApp&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;AssignmentSubmission&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;name&gt;AssignmentSubmission&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n","title":"Error: Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: YES) using mysql in Spring Boot","body":"<p>I am creating a Spring Boot application using the mysql database dependency however I am getting the error:\n<code>java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)</code></p>\n<p>I have included my pom.xml and application.properties files below:</p>\n<p><strong>application.properties</strong></p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/AssignmentSubApp_DB\nspring.datasource.username=root\nspring.datasource.password= password123\n\nspring.jpa.database-platform=org.hibernate.dialect.MySQLDialect\nspring.jpa.show-sql=true\n#spring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p>The above are my application.properties settings that I have selected are above, and I am not too sure if these are the reasons for the error. I have tried changing, however, the error remained.</p>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.AssignmentApp&lt;/groupId&gt;\n    &lt;artifactId&gt;AssignmentSubmission&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;AssignmentSubmission&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n"},{"tags":["java","windows","swing","java-17","swingutilities"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1689779253,"post_id":76722326,"comment_id":135262448,"body_markdown":"You could write a wrapper method that checks for a secondary display and divides the X and Y by the scaling factor (percentage divided by 100).  As an example, 300 / 1.5 (150%) equals 200.","body":"You could write a wrapper method that checks for a secondary display and divides the X and Y by the scaling factor (percentage divided by 100).  As an example, 300 / 1.5 (150%) equals 200."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1689861710,"post_id":76722326,"comment_id":135275690,"body_markdown":"You wrote in your question: _`MouseInfo.getPointerInfo().getLocation();` delivers also the wrong location._ Pardon me, but how do you know that it is the wrong location? Maybe you could post a [mcve] so that I can see if it occurs on my computer as well?","body":"You wrote in your question: <i><code>MouseInfo.getPointerInfo().getLocation();</code> delivers also the wrong location.</i> Pardon me, but how do you know that it is the wrong location? Maybe you could post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so that I can see if it occurs on my computer as well?"}],"owner":{"account_id":8321153,"reputation":19,"user_id":6252809,"display_name":"Ben Janus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689939989,"creation_date":1689776430,"question_id":76722326,"body_markdown":"I want to call `SwingUtilities.convertPointToScreen(clickPoint, component)` but i want a result where the windows scaling is NOT taken into account.\r\n\r\nWhen the click occurs on the primary screen the point is correct, but if the click was made on the second screen the coordinates are wrong because now the windows scaling is taken into account.\r\n\r\nI tried to calculate the scaling out (with AffineTransform.inverseTransform()) but this seems wrong that i need to manually calculate around.\r\n\r\n`MouseInfo.getPointerInfo().getLocation();` delivers also the wrong location.\r\n\r\nThe whole problem occurs since i switched from java 11 to java 17.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QSJOs.png","title":"Can SwingUtilities.getLocationOnScreen() ignore windows scaling?","body":"<p>I want to call <code>SwingUtilities.convertPointToScreen(clickPoint, component)</code> but i want a result where the windows scaling is NOT taken into account.</p>\n<p>When the click occurs on the primary screen the point is correct, but if the click was made on the second screen the coordinates are wrong because now the windows scaling is taken into account.</p>\n<p>I tried to calculate the scaling out (with AffineTransform.inverseTransform()) but this seems wrong that i need to manually calculate around.</p>\n<p><code>MouseInfo.getPointerInfo().getLocation();</code> delivers also the wrong location.</p>\n<p>The whole problem occurs since i switched from java 11 to java 17.</p>\n<p><a href=\"https://i.stack.imgur.com/QSJOs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QSJOs.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","jvm","language-lawyer","java-bytecode-asm","jvm-bytecode"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1689918073,"post_id":76735066,"comment_id":135283688,"body_markdown":"The quotation describes what the bytecode verifier does for its own purposes. Not what you can put into a bytecode instruction stream.","body":"The quotation describes what the bytecode verifier does for its own purposes. Not what you can put into a bytecode instruction stream."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1689920923,"post_id":76735066,"comment_id":135284088,"body_markdown":"Your bytecode fails at &quot;[Verification by type checking](https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-4.html#jvms-4.10.1)&quot;. I think it violated some of the rules there, regarding whether two frames are assignable. The bytecode verifier section is rather irrelevant.","body":"Your bytecode fails at &quot;<a href=\"https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-4.html#jvms-4.10.1\" rel=\"nofollow noreferrer\">Verification by type checking</a>&quot;. I think it violated some of the rules there, regarding whether two frames are assignable. The bytecode verifier section is rather irrelevant."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1689935091,"post_id":76735066,"comment_id":135286661,"body_markdown":"@Sweeper this code intentionally creates a class file for Java&#160;5, which must be verified by type checking, as there are no frames.","body":"@Sweeper this code intentionally creates a class file for Java 5, which must be verified by type checking, as there are no frames."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1689936041,"post_id":76735066,"comment_id":135286855,"body_markdown":"@Holger Oh I missed that detail! Looking at the old specs, there aren&#39;t even prolog rules for each instruction. I&#39;m now extremely confused as to how old JVMs did type-checking.","body":"@Holger Oh I missed that detail! Looking at the old specs, there aren&#39;t even prolog rules for each instruction. I&#39;m now extremely confused as to how old JVMs did type-checking."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1689940558,"post_id":76735066,"comment_id":135287671,"body_markdown":"@Sweeper actually, I don’t think that these Prolog rules add anything useful. The JVM’s verifier surely isn’t implemented in Prolog and neither is the target audience of the JVM specification expected to be fluent in reading Prolog. Most people will still use the textual information between the Prolog snippets, which is not so much different to the situation with the old verification rules.","body":"@Sweeper actually, I don’t think that these Prolog rules add anything useful. The JVM’s verifier surely isn’t implemented in Prolog and neither is the target audience of the JVM specification expected to be fluent in reading Prolog. Most people will still use the textual information between the Prolog snippets, which is not so much different to the situation with the old verification rules."}],"answers":[{"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1689944559,"post_id":76737675,"comment_id":135288523,"body_markdown":"I tried to use an `arraylength` instruction instead of `areturn`, but that did yield an error too. In any case, I did file a [bug report](https://bugs.openjdk.org/browse/JDK-8312508).","body":"I tried to use an <code>arraylength</code> instruction instead of <code>areturn</code>, but that did yield an error too. In any case, I did file a <a href=\"https://bugs.openjdk.org/browse/JDK-8312508\" rel=\"nofollow noreferrer\">bug report</a>."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1689946109,"post_id":76737675,"comment_id":135288845,"body_markdown":"That’s consistent. Since the verification type system does not have an “array of unknown type”, it must be either `Object[]`, then all operations expecting `Object[]` should work, or it’s not an array at all (i.e. `Object`) and `arraylength` must fail as well. Filing a bug report was a good idea, it’s interesting whether the original motivation for this change can be reconstructed.","body":"That’s consistent. Since the verification type system does not have an “array of unknown type”, it must be either <code>Object[]</code>, then all operations expecting <code>Object[]</code> should work, or it’s not an array at all (i.e. <code>Object</code>) and <code>arraylength</code> must fail as well. Filing a bug report was a good idea, it’s interesting whether the original motivation for this change can be reconstructed."}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689939783,"creation_date":1689939783,"answer_id":76737675,"question_id":76735066,"body_markdown":"Java&#160;7’s JVM specification [looked like]:\r\n\r\n&gt; To merge two operand stacks, the number of values on each stack must be identical. The types of values on the stacks must also be identical, except that differently typed `reference` values may appear at corresponding places on the two stacks. In this case, the merged operand stack contains a `reference` to an instance of the first common superclass of the two types. Such a `reference` type always exists because the type `Object` is a superclass of all class and interface types. If the operand stacks cannot be merged, verification of the method fails.\r\n\r\nwhich is pretty straight-forward and does not contain any special rules for array types. Since this rule requires consulting the JLS anyway regarding the common superclass of the two reference types, we can [do that for arrays too], to find the, e.g. `Integer[]` and `Long[]` have the common superclass `Number[]`, but `int[]`’s direct superclass is `Object` and it’s assignable to `Cloneable` and `Serializable` but not `Object[]`.\r\n\r\nThen, the specification was [changed with Java&#160;8] (Note that this part about arrays is the only change in the “Verification by Type Inference” section).\r\n\r\nSince then, it reads as you already cited:\r\n\r\n&gt; If corresponding values are both array reference types, then their dimensions are examined. If the array types have the same dimensions, then the merged value is a `reference` to an instance of an array type which is first common supertype of both array types.\r\n\r\nSo far so as-before. It could stop here, instead of contradicting itself in the subsequent part:\r\n\r\n&gt; (If either or both of the array types has a primitive element type, then `Object` is used as the element type instead.)\r\n\r\nKeep in mind that there is no extra rule for the case that both types are the same. So if we take this insertion at face value, it even implies that merging `int[]` and `int[]` has to result in `Object[]` because “either or both of the array types has a primitive element type”.\r\n\r\nThis is easy to disprove\r\n\r\n```java\r\nint[] array = Math.random() &gt; 0.5? new int[5]: new int[10];\r\nSystem.out.println(array[3]);\r\n```\r\n\r\nworks with all Java versions and does not cause problems like “`iaload` used with the (merged) type `Object[]`”.\r\n\r\nI’m also skipping the part about the different dimensions and obvious examples. \r\n\r\n&gt; …\r\n&gt; Even `int[]` and `String[]` can be merged; the result is `Object[]`, because `Object` is used instead of `int` when computing the first common supertype.\r\n\r\nThis is a special situation. This time, it’s not a problematic wording or a too complex matter leading to misinterpretation, here, the author explicitly states that it is meant that way and the way it’s meant is just … as wrong as an information can be.\r\n\r\nIt even violates common sense.\r\n\r\nYou already wrote “*I did never expect this to work in the first place*” and how should it? What should the JVM do in the subsequent code if it really allowed an `int[]` to pass as `Object[]`?\r\n\r\nThere is no part in the specification explaining how the JVM should deal with it and whatever way it should be treated, it would require drastic changes to the implementation.\r\n\r\nOne option would be to produce errors when later code tries to access the `int[]` array as `Object[]`. Of course, it makes no sense to change the JVM to allow something, just to forbid the result at other places.\r\n\r\nThe other option would be to implement an autoboxing feature at JVM level. Considering the amount of work for such a change, it would be a weird approach, to implement such a feature and only enable it when uncommon bytecode with an outdated class file version merges two differently typed arrays on two code paths.\r\n\r\nLikewise, it would be a strange approach to insert such a statement in the specification, just to add another rule somewhere else explaining why it doesn’t work. So I don’t think you’re missing something; I don’t expect to find such a statement anywhere. This obviously wrong statement shouldn’t exist in the first place.\r\n\r\n[looked like]: https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.10.2.2-300\r\n[do that for arrays too]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.10.3\r\n[changed with Java&#160;8]: https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.10.2.2-300","title":"Merging int[] and String[] should result in Object[]","body":"<p>Java 7’s JVM specification <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.10.2.2-300\" rel=\"nofollow noreferrer\">looked like</a>:</p>\n<blockquote>\n<p>To merge two operand stacks, the number of values on each stack must be identical. The types of values on the stacks must also be identical, except that differently typed <code>reference</code> values may appear at corresponding places on the two stacks. In this case, the merged operand stack contains a <code>reference</code> to an instance of the first common superclass of the two types. Such a <code>reference</code> type always exists because the type <code>Object</code> is a superclass of all class and interface types. If the operand stacks cannot be merged, verification of the method fails.</p>\n</blockquote>\n<p>which is pretty straight-forward and does not contain any special rules for array types. Since this rule requires consulting the JLS anyway regarding the common superclass of the two reference types, we can <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.10.3\" rel=\"nofollow noreferrer\">do that for arrays too</a>, to find the, e.g. <code>Integer[]</code> and <code>Long[]</code> have the common superclass <code>Number[]</code>, but <code>int[]</code>’s direct superclass is <code>Object</code> and it’s assignable to <code>Cloneable</code> and <code>Serializable</code> but not <code>Object[]</code>.</p>\n<p>Then, the specification was <a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.10.2.2-300\" rel=\"nofollow noreferrer\">changed with Java 8</a> (Note that this part about arrays is the only change in the “Verification by Type Inference” section).</p>\n<p>Since then, it reads as you already cited:</p>\n<blockquote>\n<p>If corresponding values are both array reference types, then their dimensions are examined. If the array types have the same dimensions, then the merged value is a <code>reference</code> to an instance of an array type which is first common supertype of both array types.</p>\n</blockquote>\n<p>So far so as-before. It could stop here, instead of contradicting itself in the subsequent part:</p>\n<blockquote>\n<p>(If either or both of the array types has a primitive element type, then <code>Object</code> is used as the element type instead.)</p>\n</blockquote>\n<p>Keep in mind that there is no extra rule for the case that both types are the same. So if we take this insertion at face value, it even implies that merging <code>int[]</code> and <code>int[]</code> has to result in <code>Object[]</code> because “either or both of the array types has a primitive element type”.</p>\n<p>This is easy to disprove</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] array = Math.random() &gt; 0.5? new int[5]: new int[10];\nSystem.out.println(array[3]);\n</code></pre>\n<p>works with all Java versions and does not cause problems like “<code>iaload</code> used with the (merged) type <code>Object[]</code>”.</p>\n<p>I’m also skipping the part about the different dimensions and obvious examples.</p>\n<blockquote>\n<p>…\nEven <code>int[]</code> and <code>String[]</code> can be merged; the result is <code>Object[]</code>, because <code>Object</code> is used instead of <code>int</code> when computing the first common supertype.</p>\n</blockquote>\n<p>This is a special situation. This time, it’s not a problematic wording or a too complex matter leading to misinterpretation, here, the author explicitly states that it is meant that way and the way it’s meant is just … as wrong as an information can be.</p>\n<p>It even violates common sense.</p>\n<p>You already wrote “<em>I did never expect this to work in the first place</em>” and how should it? What should the JVM do in the subsequent code if it really allowed an <code>int[]</code> to pass as <code>Object[]</code>?</p>\n<p>There is no part in the specification explaining how the JVM should deal with it and whatever way it should be treated, it would require drastic changes to the implementation.</p>\n<p>One option would be to produce errors when later code tries to access the <code>int[]</code> array as <code>Object[]</code>. Of course, it makes no sense to change the JVM to allow something, just to forbid the result at other places.</p>\n<p>The other option would be to implement an autoboxing feature at JVM level. Considering the amount of work for such a change, it would be a weird approach, to implement such a feature and only enable it when uncommon bytecode with an outdated class file version merges two differently typed arrays on two code paths.</p>\n<p>Likewise, it would be a strange approach to insert such a statement in the specification, just to add another rule somewhere else explaining why it doesn’t work. So I don’t think you’re missing something; I don’t expect to find such a statement anywhere. This obviously wrong statement shouldn’t exist in the first place.</p>\n"}],"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76737675,"answer_count":1,"score":2,"last_activity_date":1689939783,"creation_date":1689912645,"question_id":76735066,"body_markdown":"After carefully reading [JVMS &#167;4.10.2.2](https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-4.html#jvms-4.10.2.2-300), I noticed the following paragraph:\r\n\r\n&gt;  If corresponding values are both array reference types, then their dimensions are examined. If the array types have the same dimensions, then the merged value is a reference to an instance of an array type which is first common supertype of both array types. (If either or both of the array types has a primitive element type, then Object is used as the element type instead.) [...]\r\n&gt; \r\n&gt; [...] **Even int[] and String[] can be merged; the result is Object[]**, because Object is used instead of int when computing the first common supertype. \r\n\r\n`int[]` should not be a subtype of `Object[]`, so this is interesting, let&#39;s test this:\r\n\r\n```java\r\npackage test.se17;\r\n\r\nimport org.objectweb.asm.ClassWriter;\r\nimport org.objectweb.asm.Label;\r\nimport org.objectweb.asm.MethodVisitor;\r\nimport static org.objectweb.asm.Opcodes.*;\r\n\r\nimport java.lang.invoke.MethodHandles;\r\n\r\npublic class CastArrayDump {\r\n    \r\n    public static byte[] dump() throws Exception {\r\n        \r\n        ClassWriter classWriter = new ClassWriter(0);\r\n        MethodVisitor methodVisitor;\r\n        \r\n        classWriter.visit(V1_5, ACC_PUBLIC | ACC_SUPER, &quot;test/se17/CastArray&quot;, null,\r\n                &quot;java/lang/Object&quot;, null);\r\n        \r\n        {\r\n            methodVisitor = classWriter.visitMethod(ACC_PUBLIC | ACC_STATIC, &quot;cast&quot;,\r\n                    &quot;(Ljava/lang/Object;)[Ljava/lang/Object;&quot;, null, null);\r\n            methodVisitor.visitCode();\r\n            Label end = new Label();\r\n            methodVisitor.visitVarInsn(ALOAD, 0);\r\n            methodVisitor.visitTypeInsn(INSTANCEOF, &quot;[I&quot;);\r\n            Label notint = new Label();\r\n            methodVisitor.visitJumpInsn(IFEQ, notint);\r\n            methodVisitor.visitVarInsn(ALOAD, 0);\r\n            methodVisitor.visitTypeInsn(CHECKCAST, &quot;[I&quot;);\r\n            methodVisitor.visitJumpInsn(GOTO, end);\r\n            methodVisitor.visitLabel(notint);\r\n            methodVisitor.visitVarInsn(ALOAD, 0);\r\n            methodVisitor.visitTypeInsn(INSTANCEOF, &quot;[Ljava/lang/String;&quot;);\r\n            Label notobj = new Label();\r\n            methodVisitor.visitJumpInsn(IFEQ, notobj);\r\n            methodVisitor.visitVarInsn(ALOAD, 0);\r\n            methodVisitor.visitTypeInsn(CHECKCAST, &quot;[Ljava/lang/String;&quot;);\r\n            methodVisitor.visitJumpInsn(GOTO, end);\r\n            methodVisitor.visitLabel(notobj);\r\n            methodVisitor.visitMethodInsn(INVOKESTATIC, &quot;test/se17/CastArray&quot;,\r\n                    &quot;newIllegalArgumentException&quot;, &quot;()Ljava/lang/IllegalArgumentException;&quot;, false);\r\n            methodVisitor.visitInsn(ATHROW);\r\n            methodVisitor.visitLabel(end);\r\n            methodVisitor.visitInsn(ARETURN);\r\n            methodVisitor.visitMaxs(2, 2);\r\n            methodVisitor.visitEnd();\r\n        }\r\n        {\r\n            methodVisitor =\r\n                    classWriter.visitMethod(ACC_PRIVATE | ACC_STATIC, &quot;newIllegalArgumentException&quot;,\r\n                            &quot;()Ljava/lang/IllegalArgumentException;&quot;, null, null);\r\n            methodVisitor.visitCode();\r\n            Label label0 = new Label();\r\n            methodVisitor.visitTypeInsn(NEW, &quot;java/lang/IllegalArgumentException&quot;);\r\n            methodVisitor.visitInsn(DUP);\r\n            methodVisitor.visitMethodInsn(INVOKESPECIAL, &quot;java/lang/IllegalArgumentException&quot;,\r\n                    &quot;&lt;init&gt;&quot;, &quot;()V&quot;, false);\r\n            methodVisitor.visitInsn(ARETURN);\r\n            methodVisitor.visitMaxs(2, 0);\r\n            methodVisitor.visitEnd();\r\n        }\r\n        classWriter.visitEnd();\r\n        \r\n        return classWriter.toByteArray();\r\n    }\r\n    \r\n    public static void main(String[] args) throws IllegalAccessException, Exception {\r\n        MethodHandles.lookup().defineClass(dump());\r\n        test();\r\n    }\r\n    \r\n    private static void test() {\r\n        System.out.println(CastArray.cast(new String[0]));\r\n    }\r\n}\r\n```\r\nNote that `CastArrayDump` is compiled against a stub `CastArray` with a `cast` method that has the same signature.\r\n\r\nWhen running this code I get the following exception:\r\n\r\n&lt;pre&gt;\r\nException in thread &quot;main&quot; java.lang.VerifyError: (class: test/se17/CastArray, method: cast signature: (Ljava/lang/Object;)[Ljava/lang/Object;) Wrong return type in function\r\n\tat java.base/java.lang.ClassLoader.defineClass0(Native Method)\r\n\tat java.base/java.lang.System$2.defineClass(System.java:2307)\r\n\tat java.base/java.lang.invoke.MethodHandles$Lookup$ClassDefiner.defineClass(MethodHandles.java:2439)\r\n\tat java.base/java.lang.invoke.MethodHandles$Lookup$ClassDefiner.defineClass(MethodHandles.java:2416)\r\n\tat java.base/java.lang.invoke.MethodHandles$Lookup.defineClass(MethodHandles.java:1843)\r\n\tat test.se17/test.se17.CastArrayDump.main(CastArrayDump.java:69)\r\n&lt;/pre&gt;\r\n\r\nIn the `cast`, the control flow merges with the `end` label.  \r\nOn the stack we have either a `String[]` or a `int[]` - which should be merged into `Object[]`.  \r\n\r\n&gt;  An areturn instruction is type safe iff the enclosing method has a declared return type, ReturnType, that is a reference type, and one can validly pop a type matching ReturnType off the incoming operand stack.\r\n\r\nNow, there should be a `Object[]` on the stack, because we just merged into that.  \r\nBut for some reason, this is not the case, and we get &quot;Wrong return type in function&quot;.\r\n\r\nSo, I must be missing something in the JVMS that forbids this.  \r\n**Where in the JVMS does it state that this does not work?**\r\n\r\n(*To be clear: I did never expect this to work in the first place*)","title":"Merging int[] and String[] should result in Object[]","body":"<p>After carefully reading <a href=\"https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-4.html#jvms-4.10.2.2-300\" rel=\"nofollow noreferrer\">JVMS §4.10.2.2</a>, I noticed the following paragraph:</p>\n<blockquote>\n<p>If corresponding values are both array reference types, then their dimensions are examined. If the array types have the same dimensions, then the merged value is a reference to an instance of an array type which is first common supertype of both array types. (If either or both of the array types has a primitive element type, then Object is used as the element type instead.) [...]</p>\n<p>[...] <strong>Even int[] and String[] can be merged; the result is Object[]</strong>, because Object is used instead of int when computing the first common supertype.</p>\n</blockquote>\n<p><code>int[]</code> should not be a subtype of <code>Object[]</code>, so this is interesting, let's test this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package test.se17;\n\nimport org.objectweb.asm.ClassWriter;\nimport org.objectweb.asm.Label;\nimport org.objectweb.asm.MethodVisitor;\nimport static org.objectweb.asm.Opcodes.*;\n\nimport java.lang.invoke.MethodHandles;\n\npublic class CastArrayDump {\n    \n    public static byte[] dump() throws Exception {\n        \n        ClassWriter classWriter = new ClassWriter(0);\n        MethodVisitor methodVisitor;\n        \n        classWriter.visit(V1_5, ACC_PUBLIC | ACC_SUPER, &quot;test/se17/CastArray&quot;, null,\n                &quot;java/lang/Object&quot;, null);\n        \n        {\n            methodVisitor = classWriter.visitMethod(ACC_PUBLIC | ACC_STATIC, &quot;cast&quot;,\n                    &quot;(Ljava/lang/Object;)[Ljava/lang/Object;&quot;, null, null);\n            methodVisitor.visitCode();\n            Label end = new Label();\n            methodVisitor.visitVarInsn(ALOAD, 0);\n            methodVisitor.visitTypeInsn(INSTANCEOF, &quot;[I&quot;);\n            Label notint = new Label();\n            methodVisitor.visitJumpInsn(IFEQ, notint);\n            methodVisitor.visitVarInsn(ALOAD, 0);\n            methodVisitor.visitTypeInsn(CHECKCAST, &quot;[I&quot;);\n            methodVisitor.visitJumpInsn(GOTO, end);\n            methodVisitor.visitLabel(notint);\n            methodVisitor.visitVarInsn(ALOAD, 0);\n            methodVisitor.visitTypeInsn(INSTANCEOF, &quot;[Ljava/lang/String;&quot;);\n            Label notobj = new Label();\n            methodVisitor.visitJumpInsn(IFEQ, notobj);\n            methodVisitor.visitVarInsn(ALOAD, 0);\n            methodVisitor.visitTypeInsn(CHECKCAST, &quot;[Ljava/lang/String;&quot;);\n            methodVisitor.visitJumpInsn(GOTO, end);\n            methodVisitor.visitLabel(notobj);\n            methodVisitor.visitMethodInsn(INVOKESTATIC, &quot;test/se17/CastArray&quot;,\n                    &quot;newIllegalArgumentException&quot;, &quot;()Ljava/lang/IllegalArgumentException;&quot;, false);\n            methodVisitor.visitInsn(ATHROW);\n            methodVisitor.visitLabel(end);\n            methodVisitor.visitInsn(ARETURN);\n            methodVisitor.visitMaxs(2, 2);\n            methodVisitor.visitEnd();\n        }\n        {\n            methodVisitor =\n                    classWriter.visitMethod(ACC_PRIVATE | ACC_STATIC, &quot;newIllegalArgumentException&quot;,\n                            &quot;()Ljava/lang/IllegalArgumentException;&quot;, null, null);\n            methodVisitor.visitCode();\n            Label label0 = new Label();\n            methodVisitor.visitTypeInsn(NEW, &quot;java/lang/IllegalArgumentException&quot;);\n            methodVisitor.visitInsn(DUP);\n            methodVisitor.visitMethodInsn(INVOKESPECIAL, &quot;java/lang/IllegalArgumentException&quot;,\n                    &quot;&lt;init&gt;&quot;, &quot;()V&quot;, false);\n            methodVisitor.visitInsn(ARETURN);\n            methodVisitor.visitMaxs(2, 0);\n            methodVisitor.visitEnd();\n        }\n        classWriter.visitEnd();\n        \n        return classWriter.toByteArray();\n    }\n    \n    public static void main(String[] args) throws IllegalAccessException, Exception {\n        MethodHandles.lookup().defineClass(dump());\n        test();\n    }\n    \n    private static void test() {\n        System.out.println(CastArray.cast(new String[0]));\n    }\n}\n</code></pre>\n<p>Note that <code>CastArrayDump</code> is compiled against a stub <code>CastArray</code> with a <code>cast</code> method that has the same signature.</p>\n<p>When running this code I get the following exception:</p>\n<pre>\nException in thread \"main\" java.lang.VerifyError: (class: test/se17/CastArray, method: cast signature: (Ljava/lang/Object;)[Ljava/lang/Object;) Wrong return type in function\n    at java.base/java.lang.ClassLoader.defineClass0(Native Method)\n    at java.base/java.lang.System$2.defineClass(System.java:2307)\n    at java.base/java.lang.invoke.MethodHandles$Lookup$ClassDefiner.defineClass(MethodHandles.java:2439)\n    at java.base/java.lang.invoke.MethodHandles$Lookup$ClassDefiner.defineClass(MethodHandles.java:2416)\n    at java.base/java.lang.invoke.MethodHandles$Lookup.defineClass(MethodHandles.java:1843)\n    at test.se17/test.se17.CastArrayDump.main(CastArrayDump.java:69)\n</pre>\n<p>In the <code>cast</code>, the control flow merges with the <code>end</code> label.<br />\nOn the stack we have either a <code>String[]</code> or a <code>int[]</code> - which should be merged into <code>Object[]</code>.</p>\n<blockquote>\n<p>An areturn instruction is type safe iff the enclosing method has a declared return type, ReturnType, that is a reference type, and one can validly pop a type matching ReturnType off the incoming operand stack.</p>\n</blockquote>\n<p>Now, there should be a <code>Object[]</code> on the stack, because we just merged into that.<br />\nBut for some reason, this is not the case, and we get &quot;Wrong return type in function&quot;.</p>\n<p>So, I must be missing something in the JVMS that forbids this.<br />\n<strong>Where in the JVMS does it state that this does not work?</strong></p>\n<p>(<em>To be clear: I did never expect this to work in the first place</em>)</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689939479,"post_id":76737610,"comment_id":135287459,"body_markdown":"Yes, reading as a byte[] is fine. Directly reading from the request&#39;s `InputStream` would be even better. I&#39;m not sure why Jackson claims differently: The same logic as for the output applies: Why construct an intermediate?","body":"Yes, reading as a byte[] is fine. Directly reading from the request&#39;s <code>InputStream</code> would be even better. I&#39;m not sure why Jackson claims differently: The same logic as for the output applies: Why construct an intermediate?"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689939542,"post_id":76737610,"comment_id":135287474,"body_markdown":"As for using the correct String encoding, you&#39;ll need to account for that anyway. Having Jackson convert the bytes to String or doing it yourself doesn&#39;t matter. As long as you&#39;re using the correct encoding (probably UTF-8), you&#39;ll be fine.","body":"As for using the correct String encoding, you&#39;ll need to account for that anyway. Having Jackson convert the bytes to String or doing it yourself doesn&#39;t matter. As long as you&#39;re using the correct encoding (probably UTF-8), you&#39;ll be fine."},{"owner":{"account_id":19425488,"reputation":57,"user_id":14207055,"display_name":"shibel"},"score":0,"creation_date":1689939887,"post_id":76737610,"comment_id":135287544,"body_markdown":"@Jorn Thank you. Can you please add this as an answer and clarify the following: &quot;Yes, reading as a byte[] is fine.&quot; - is it better than reading from `String` though?","body":"@Jorn Thank you. Can you please add this as an answer and clarify the following: &quot;Yes, reading as a byte[] is fine.&quot; - is it better than reading from <code>String</code> though?"}],"owner":{"account_id":19425488,"reputation":57,"user_id":14207055,"display_name":"shibel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689939253,"creation_date":1689939253,"question_id":76737610,"body_markdown":"From [Jackson&#39;s best practices section][1]:\r\n\r\n&gt; Input: byte[] is best if you have it; InputStream second best; followed by Reader -- and in every case, do NOT try reading input into a String!\r\n\r\n&gt; Output: OutputStream is best; Writer second best; and calling writeValueAsString() is the least efficient (why construct an intermediate String?)\r\n\r\nI currently work on an app (Dropwizard) that reads a relatively big HTTP response every minute, in this fashion:\r\n\r\n```Java\r\nHttpRequest request = httpBuilder.build();\r\nHttpResponse&lt;String&gt; responseresponse = httpClient.send(request, HttpResponse.BodyHandlers.ofString());\r\nMyDeserializedClass deserResponse = objMapper.readValue(response.body(), MyDeserializedClass.class);\r\n```\r\n\r\nIf I understand things correctly, it&#39;d be much more beneficial to read the HTTP response and have Jackson deserialize the `byte[]` instead of `String`, like so:\r\n\r\n```Java\r\nHttpRequest request = httpBuilder.build();\r\n// Notice: BodyHandlers.ofByteArray()\r\nHttpResponse&lt;byte[]&gt; responseresponse = httpClient.send(request, HttpResponse.BodyHandlers.ofByteArray());\r\nMyDeserializedClass deserResponse = objMapper.readValue(response.body(), MyDeserializedClass.class);\r\n```\r\n\r\n- This should be more efficient memory-wise, correct?\r\n\r\nHowever, I&#39;ve read about some limitations regarding byte-arrays and non-ASCII characters, and with my lack of knowledge I&#39;m concerned that reading the response as `byte[]` instead of `String` will result in accented characters getting malformed? On the other hand, nowhere do I see the encoding of the response being specified when reading as `String`, so I guess it&#39;s safe to read the response in this manner? (and, the response is originally a `bytearray[]` when coming in if I understand correctly)\r\n\r\n\r\n  [1]: https://github.com/FasterXML/jackson-docs/wiki/Presentation:-Jackson-Performance","title":"Java Jackson deserialization efficiency: is it safe to an HTTP response as byte-array?","body":"<p>From <a href=\"https://github.com/FasterXML/jackson-docs/wiki/Presentation:-Jackson-Performance\" rel=\"nofollow noreferrer\">Jackson's best practices section</a>:</p>\n<blockquote>\n<p>Input: byte[] is best if you have it; InputStream second best; followed by Reader -- and in every case, do NOT try reading input into a String!</p>\n</blockquote>\n<blockquote>\n<p>Output: OutputStream is best; Writer second best; and calling writeValueAsString() is the least efficient (why construct an intermediate String?)</p>\n</blockquote>\n<p>I currently work on an app (Dropwizard) that reads a relatively big HTTP response every minute, in this fashion:</p>\n<pre><code>HttpRequest request = httpBuilder.build();\nHttpResponse&lt;String&gt; responseresponse = httpClient.send(request, HttpResponse.BodyHandlers.ofString());\nMyDeserializedClass deserResponse = objMapper.readValue(response.body(), MyDeserializedClass.class);\n</code></pre>\n<p>If I understand things correctly, it'd be much more beneficial to read the HTTP response and have Jackson deserialize the <code>byte[]</code> instead of <code>String</code>, like so:</p>\n<pre><code>HttpRequest request = httpBuilder.build();\n// Notice: BodyHandlers.ofByteArray()\nHttpResponse&lt;byte[]&gt; responseresponse = httpClient.send(request, HttpResponse.BodyHandlers.ofByteArray());\nMyDeserializedClass deserResponse = objMapper.readValue(response.body(), MyDeserializedClass.class);\n</code></pre>\n<ul>\n<li>This should be more efficient memory-wise, correct?</li>\n</ul>\n<p>However, I've read about some limitations regarding byte-arrays and non-ASCII characters, and with my lack of knowledge I'm concerned that reading the response as <code>byte[]</code> instead of <code>String</code> will result in accented characters getting malformed? On the other hand, nowhere do I see the encoding of the response being specified when reading as <code>String</code>, so I guess it's safe to read the response in this manner? (and, the response is originally a <code>bytearray[]</code> when coming in if I understand correctly)</p>\n"},{"tags":["java","json","objectmapper"],"answers":[{"comments":[{"owner":{"account_id":14860210,"reputation":61,"user_id":10731303,"display_name":"Zhazgul"},"score":0,"creation_date":1689936534,"post_id":76737260,"comment_id":135286943,"body_markdown":"But I don&#39;t have permission to change `Person` class.","body":"But I don&#39;t have permission to change <code>Person</code> class."},{"owner":{"account_id":4224566,"reputation":1,"user_id":3458376,"display_name":"trusted12001"},"score":0,"creation_date":1689937316,"post_id":76737260,"comment_id":135287074,"body_markdown":"If you don&#39;t have permission to modify the `Person` class, you can use a custom deserializer to achieve the desired conversion from the JSON with uppercased field names to the existing `Person` class.\n\nHere&#39;s how you can implement a custom deserializer using Jackson:","body":"If you don&#39;t have permission to modify the <code>Person</code> class, you can use a custom deserializer to achieve the desired conversion from the JSON with uppercased field names to the existing <code>Person</code> class.  Here&#39;s how you can implement a custom deserializer using Jackson:"}],"tags":[],"owner":{"account_id":4224566,"reputation":1,"user_id":3458376,"display_name":"trusted12001"},"comment_count":2,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1689936170,"creation_date":1689936170,"answer_id":76737260,"question_id":76737214,"body_markdown":"To convert the JSON with uppercased field names to the desired Java class, you can use the `@JsonProperty` annotation from Jackson library. Here&#39;s how you can modify your `Person` class and ObjectMapper configuration to achieve the conversion:\r\n\r\n1. Modify the `Person` class to use the `@JsonProperty` annotation:\r\n\r\n```java\r\npublic class Person {\r\n    @JsonProperty(&quot;PersonId&quot;)\r\n    private String personId;\r\n    \r\n    @JsonProperty(&quot;Name&quot;)\r\n    private String name;\r\n    \r\n    @JsonProperty(&quot;Surname&quot;)\r\n    private String surname;\r\n    \r\n    @JsonProperty(&quot;age&quot;)\r\n    private int age;\r\n\r\n    // Getters and setters...\r\n}\r\n```\r\n\r\n2. Remove the custom `LowerCaseStrategy` from your ObjectMapper configuration since the field names in your JSON are already in lowercase.\r\n\r\n```java\r\n@Bean\r\npublic ObjectMapper objectMapper() {\r\n    return new ObjectMapper();\r\n}\r\n```\r\n\r\nNow, when you deserialize the JSON using the updated ObjectMapper, it will correctly map the fields with uppercased names to the corresponding fields in the `Person` class.\r\n\r\nFor example:\r\n\r\n```java\r\nString jsonString = &quot;{\\&quot;Person\\&quot;:{\\&quot;PersonId\\&quot;:122,\\&quot;Name\\&quot;:\\&quot;John\\&quot;,\\&quot;Surname\\&quot;:\\&quot;Doe\\&quot;,\\&quot;age\\&quot;:2}}&quot;;\r\n\r\nObjectMapper objectMapper = new ObjectMapper();\r\nPerson person = objectMapper.readValue(jsonString, Person.class);\r\n\r\nSystem.out.println(person.getPersonId()); // Output: 122\r\nSystem.out.println(person.getName()); // Output: John\r\nSystem.out.println(person.getSurname()); // Output: Doe\r\nSystem.out.println(person.getAge()); // Output: 2\r\n```\r\n\r\nWith these changes, the JSON with uppercased field names will be correctly converted to the Java `Person` object.","title":"How can I convert json with uppercased field names to object?","body":"<p>To convert the JSON with uppercased field names to the desired Java class, you can use the <code>@JsonProperty</code> annotation from Jackson library. Here's how you can modify your <code>Person</code> class and ObjectMapper configuration to achieve the conversion:</p>\n<ol>\n<li>Modify the <code>Person</code> class to use the <code>@JsonProperty</code> annotation:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public class Person {\n    @JsonProperty(&quot;PersonId&quot;)\n    private String personId;\n    \n    @JsonProperty(&quot;Name&quot;)\n    private String name;\n    \n    @JsonProperty(&quot;Surname&quot;)\n    private String surname;\n    \n    @JsonProperty(&quot;age&quot;)\n    private int age;\n\n    // Getters and setters...\n}\n</code></pre>\n<ol start=\"2\">\n<li>Remove the custom <code>LowerCaseStrategy</code> from your ObjectMapper configuration since the field names in your JSON are already in lowercase.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic ObjectMapper objectMapper() {\n    return new ObjectMapper();\n}\n</code></pre>\n<p>Now, when you deserialize the JSON using the updated ObjectMapper, it will correctly map the fields with uppercased names to the corresponding fields in the <code>Person</code> class.</p>\n<p>For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String jsonString = &quot;{\\&quot;Person\\&quot;:{\\&quot;PersonId\\&quot;:122,\\&quot;Name\\&quot;:\\&quot;John\\&quot;,\\&quot;Surname\\&quot;:\\&quot;Doe\\&quot;,\\&quot;age\\&quot;:2}}&quot;;\n\nObjectMapper objectMapper = new ObjectMapper();\nPerson person = objectMapper.readValue(jsonString, Person.class);\n\nSystem.out.println(person.getPersonId()); // Output: 122\nSystem.out.println(person.getName()); // Output: John\nSystem.out.println(person.getSurname()); // Output: Doe\nSystem.out.println(person.getAge()); // Output: 2\n</code></pre>\n<p>With these changes, the JSON with uppercased field names will be correctly converted to the Java <code>Person</code> object.</p>\n"},{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689936731,"creation_date":1689936731,"answer_id":76737316,"question_id":76737214,"body_markdown":"You are almost there. The one error you made, is the direction in which the PropertyNamingStrategy applies: You are converting *from* Java name, *to* JSON name, not the other way around. So, this should work:\r\n\r\n```\r\n        @Override\r\n        public String translate(String input) {\r\n            char[] chars = input.toCharArray();\r\n            chars[0] = Character.toUpperCase(chars[0]); // upper!\r\n            return new String(chars);\r\n        }\r\n```\r\n\r\nAlso, Jackson has `PropertyNamingStrategies.UPPER_CAMEL_CASE` which should do the thing you need without implementing your own.","title":"How can I convert json with uppercased field names to object?","body":"<p>You are almost there. The one error you made, is the direction in which the PropertyNamingStrategy applies: You are converting <em>from</em> Java name, <em>to</em> JSON name, not the other way around. So, this should work:</p>\n<pre><code>        @Override\n        public String translate(String input) {\n            char[] chars = input.toCharArray();\n            chars[0] = Character.toUpperCase(chars[0]); // upper!\n            return new String(chars);\n        }\n</code></pre>\n<p>Also, Jackson has <code>PropertyNamingStrategies.UPPER_CAMEL_CASE</code> which should do the thing you need without implementing your own.</p>\n"}],"owner":{"account_id":14860210,"reputation":61,"user_id":10731303,"display_name":"Zhazgul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689939050,"creation_date":1689935746,"question_id":76737214,"body_markdown":"I have json \r\n```\r\n{\r\n    &quot;Person&quot;: {\r\n        &quot;PersonId&quot;: 122,\r\n        &quot;Name&quot;: &quot;John&quot;,\r\n        &quot;Surname&quot;: &quot;Doe&quot;,\r\n        &quot;age&quot;: 2\r\n    }\r\n}\r\n```\r\n\r\nI want to convert it to Java class\r\n\r\n```\r\n    public class Person {\r\n        private String personId;\r\n        private String name;\r\n        private String surname;\r\n        private int age;\r\n        \r\n        //getters,setters...\r\n    }\r\n```\r\n\r\n\r\nWhat I already have tried is \r\n\r\n```\r\n\r\n    @Bean\r\n    ObjectMapper objectMapper() {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        mapper.setPropertyNamingStrategy(new LowerCaseStrategy());\r\n        return mapper;\r\n    }\r\n\r\n    public static class LowerCaseStrategy extends PropertyNamingStrategy.PropertyNamingStrategyBase {\r\n        @Override\r\n        public String translate(String input) {\r\n            char[] chars = input.toCharArray();\r\n            chars[0] = Character.toLowerCase(chars[0]);\r\n            return new String(chars);\r\n        }\r\n    }\r\n```\r\nBut it did not help.\r\n\r\nDoes anyone have an idea how this can be solved?\r\n\r\n\r\nupd: I don&#39;t have permission to change `Person` class.","title":"How can I convert json with uppercased field names to object?","body":"<p>I have json</p>\n<pre><code>{\n    &quot;Person&quot;: {\n        &quot;PersonId&quot;: 122,\n        &quot;Name&quot;: &quot;John&quot;,\n        &quot;Surname&quot;: &quot;Doe&quot;,\n        &quot;age&quot;: 2\n    }\n}\n</code></pre>\n<p>I want to convert it to Java class</p>\n<pre><code>    public class Person {\n        private String personId;\n        private String name;\n        private String surname;\n        private int age;\n        \n        //getters,setters...\n    }\n</code></pre>\n<p>What I already have tried is</p>\n<pre><code>\n    @Bean\n    ObjectMapper objectMapper() {\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.setPropertyNamingStrategy(new LowerCaseStrategy());\n        return mapper;\n    }\n\n    public static class LowerCaseStrategy extends PropertyNamingStrategy.PropertyNamingStrategyBase {\n        @Override\n        public String translate(String input) {\n            char[] chars = input.toCharArray();\n            chars[0] = Character.toLowerCase(chars[0]);\n            return new String(chars);\n        }\n    }\n</code></pre>\n<p>But it did not help.</p>\n<p>Does anyone have an idea how this can be solved?</p>\n<p>upd: I don't have permission to change <code>Person</code> class.</p>\n"},{"tags":["java","android","multithreading","android-studio"],"answers":[{"comments":[{"owner":{"account_id":7419981,"reputation":2083,"user_id":5644761,"display_name":"JakeB"},"score":3,"creation_date":1689933337,"post_id":76736901,"comment_id":135286321,"body_markdown":"You haven&#39;t explained what you are doing.","body":"You haven&#39;t explained what you are doing."},{"owner":{"account_id":11529522,"reputation":4397,"user_id":8448886,"accept_rate":90,"display_name":"Abhishek kumar"},"score":0,"creation_date":1689933981,"post_id":76736901,"comment_id":135286469,"body_markdown":"@JakeB sure, I will explain","body":"@JakeB sure, I will explain"}],"tags":[],"owner":{"account_id":11529522,"reputation":4397,"user_id":8448886,"accept_rate":90,"display_name":"Abhishek kumar"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1689938686,"creation_date":1689933126,"answer_id":76736901,"question_id":76736850,"body_markdown":"\r\nHere, I have created a method named `blinkCall()` that have `Handler()`, I have defined 1 sec to blink the `textview`.\r\n\r\nTry to use below code:\r\n\r\nCode:\r\n\r\n    private void blinkCall() {\r\n        final Handler handler = new Handler();\r\n            new Thread(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    int timeToBlink = 1000;\r\n                    try {\r\n                        Thread.sleep(timeToBlink);\r\n                    } catch (Exception e) {\r\n                    }\r\n                    handler.post(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n    \r\n                            if (textView.getText().toString().equals(&quot;&quot;)) {\r\n                                textView.setText(&quot;Abhishek&quot;);\r\n                            } else {\r\n                                textView.setText(&quot;&quot;);\r\n                            }\r\n                            blinkCall();\r\n                        }\r\n                    });\r\n                }\r\n            }).start();\r\n    }","title":"Why does my Thread interrupt whole Android application?","body":"<p>Here, I have created a method named <code>blinkCall()</code> that have <code>Handler()</code>, I have defined 1 sec to blink the <code>textview</code>.</p>\n<p>Try to use below code:</p>\n<p>Code:</p>\n<pre><code>private void blinkCall() {\n    final Handler handler = new Handler();\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                int timeToBlink = 1000;\n                try {\n                    Thread.sleep(timeToBlink);\n                } catch (Exception e) {\n                }\n                handler.post(new Runnable() {\n                    @Override\n                    public void run() {\n\n                        if (textView.getText().toString().equals(&quot;&quot;)) {\n                            textView.setText(&quot;Abhishek&quot;);\n                        } else {\n                            textView.setText(&quot;&quot;);\n                        }\n                        blinkCall();\n                    }\n                });\n            }\n        }).start();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24303543,"reputation":876,"user_id":21163959,"display_name":"ObscureCookie"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689934632,"creation_date":1689934632,"answer_id":76737096,"question_id":76736850,"body_markdown":"In android, manipulating views from other threads than the main thread throws an exception.\r\n\r\nYou need to make a handler for the main thread.\r\n\r\n\r\n    private final Handler mainHandler = new Handler(getMainLooper());\r\n\r\n\r\nand post runnables to it.\r\n\r\n        Thread blinkThread = new Thread() {\r\n            @Override\r\n            public void run() {\r\n                for (int i = 0; i &lt; 10; i++) {\r\n                    // the main thread will handle this\r\n                    mainHandler.post(() -&gt; lastletter.setVisibility(View.VISIBLE));\r\n                    \r\n                    try {\r\n                        sleep(500);\r\n                    } catch (InterruptedException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n\r\n                    mainHandler.post(() -&gt; lastletter.setVisibility(View.INVISIBLE));\r\n                    \r\n                    try {\r\n                        sleep(500);\r\n                    } catch (InterruptedException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                }\r\n            }\r\n        };","title":"Why does my Thread interrupt whole Android application?","body":"<p>In android, manipulating views from other threads than the main thread throws an exception.</p>\n<p>You need to make a handler for the main thread.</p>\n<pre><code>private final Handler mainHandler = new Handler(getMainLooper());\n</code></pre>\n<p>and post runnables to it.</p>\n<pre><code>    Thread blinkThread = new Thread() {\n        @Override\n        public void run() {\n            for (int i = 0; i &lt; 10; i++) {\n                // the main thread will handle this\n                mainHandler.post(() -&gt; lastletter.setVisibility(View.VISIBLE));\n                \n                try {\n                    sleep(500);\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n\n                mainHandler.post(() -&gt; lastletter.setVisibility(View.INVISIBLE));\n                \n                try {\n                    sleep(500);\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        }\n    };\n</code></pre>\n"}],"owner":{"account_id":15570900,"reputation":61,"user_id":11233380,"display_name":"Matteo Passaro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76736901,"answer_count":2,"score":1,"last_activity_date":1689938686,"creation_date":1689932720,"question_id":76736850,"body_markdown":"I&#39;m trying to make a TextView blink while the user is in the Main Activity.\r\n&lt;br&gt;&lt;br&gt;\r\nI created a new thread but what happens is that the TextView&#39;s visibility turns on, than off and then the app closes itself with Android saying that the app stopped working. &lt;br&gt; \r\nSeems like the for loop executes ones and then the whole application is interrupted.\r\n\r\nHere&#39;s a code snippet\r\n\r\n```\r\n    Thread blinkThread = new Thread(){\r\n        @Override\r\n        public void run() {\r\n            for(int i = 0; i &lt; 10; i++){\r\n                lastletter.setVisibility(VISIBLE);\r\n                try {\r\n                    sleep(500);\r\n                } catch (InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n                lastletter.setVisibility(View.INVISIBLE);\r\n                try {\r\n                    sleep(500);\r\n                } catch (InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        }\r\n    };\r\n```\r\n\r\nThe code above code is inside the MainActivity class.\r\nThe thread starts in the onCreate() method, I basically wrote `blinkThread.start()`\r\n","title":"Why does my Thread interrupt whole Android application?","body":"<p>I'm trying to make a TextView blink while the user is in the Main Activity.\n<br><br>\nI created a new thread but what happens is that the TextView's visibility turns on, than off and then the app closes itself with Android saying that the app stopped working. <br>\nSeems like the for loop executes ones and then the whole application is interrupted.</p>\n<p>Here's a code snippet</p>\n<pre><code>    Thread blinkThread = new Thread(){\n        @Override\n        public void run() {\n            for(int i = 0; i &lt; 10; i++){\n                lastletter.setVisibility(VISIBLE);\n                try {\n                    sleep(500);\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n                lastletter.setVisibility(View.INVISIBLE);\n                try {\n                    sleep(500);\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        }\n    };\n</code></pre>\n<p>The code above code is inside the MainActivity class.\nThe thread starts in the onCreate() method, I basically wrote <code>blinkThread.start()</code></p>\n"},{"tags":["java","hibernate","jpa","jakarta-ee","seam"],"comments":[{"owner":{"account_id":43546,"reputation":33497,"user_id":127359,"accept_rate":85,"display_name":"Arthur Ronald"},"score":0,"creation_date":1287081015,"post_id":3935394,"comment_id":4201087,"body_markdown":"@stacker Let me know: Have you deployed a datasource whose global jndi address is **jdbc/appDatasource** ???","body":"@stacker Let me know: Have you deployed a datasource whose global jndi address is <b>jdbc/appDatasource</b> ???"},{"owner":{"account_id":87016,"reputation":68348,"user_id":241590,"accept_rate":99,"display_name":"stacker"},"score":0,"creation_date":1287085313,"post_id":3935394,"comment_id":4201814,"body_markdown":"@Arthur thanks for your response. Yes, I tried several JNDI names after the error occurred. I suppose it gets the persistenceUnits name &quot;pu&quot; wrong  since it isn&#39;t complaining about the datasource.","body":"@Arthur thanks for your response. Yes, I tried several JNDI names after the error occurred. I suppose it gets the persistenceUnits name &quot;pu&quot; wrong  since it isn&#39;t complaining about the datasource."},{"owner":{"account_id":43546,"reputation":33497,"user_id":127359,"accept_rate":85,"display_name":"Arthur Ronald"},"score":0,"creation_date":1287090049,"post_id":3935394,"comment_id":4202629,"body_markdown":"@stacker I need additional info: post how your app is built ( As shown here: http://stackoverflow.com/questions/2453746/2459795#2459795 ) Try to use SeamTest (Take a look at Seam **examples** directory - There are a lot of tests).","body":"@stacker I need additional info: post how your app is built ( As shown here: <a href=\"http://stackoverflow.com/questions/2453746/2459795#2459795\">stackoverflow.com/questions/2453746/2459795#2459795</a> ) Try to use SeamTest (Take a look at Seam <b>examples</b> directory - There are a lot of tests)."},{"owner":{"account_id":43546,"reputation":33497,"user_id":127359,"accept_rate":85,"display_name":"Arthur Ronald"},"score":0,"creation_date":1287090323,"post_id":3935394,"comment_id":4202682,"body_markdown":"@stacker How to set up a connection pool in JBoss: **1&#176;** Copy your database&#39;s JDBC JAR file to $JBOSS_HOME/server/default/lib **2&#176;** JBoss includes example database connection-pool files in the directory $JBOSS_HOME/docs/examples/jca. **The name of each file ends in -ds.xml** For instance, oracle-ds.xml. Copy your Target database **-ds.xml** file to $JBOSS_HOME/service/default/deploy and set up your datasource As follows","body":"@stacker How to set up a connection pool in JBoss: <b>1&#176;</b> Copy your database&#39;s JDBC JAR file to $JBOSS_HOME/server/default/lib <b>2&#176;</b> JBoss includes example database connection-pool files in the directory $JBOSS_HOME/docs/examples/jca. <b>The name of each file ends in -ds.xml</b> For instance, oracle-ds.xml. Copy your Target database <b>-ds.xml</b> file to $JBOSS_HOME/service/default/deploy and set up your datasource As follows"},{"owner":{"account_id":43546,"reputation":33497,"user_id":127359,"accept_rate":85,"display_name":"Arthur Ronald"},"score":0,"creation_date":1287090477,"post_id":3935394,"comment_id":4202711,"body_markdown":"&lt;datasources&gt;\n  &lt;local-tx-datasource&gt;\n    &lt;jndi-name&gt;OracleDS&lt;/jndi-name&gt;\n\t\t&lt;connection-url&gt;jdbc:oracle:thin:@localhost:1521:app&lt;/connection-url&gt;\n\t\t&lt;driver-class&gt;oracle.jdbc.driver.OracleDriver&lt;/driver-class&gt;\n\t\t&lt;user-name&gt;scott&lt;/user-name&gt;\n    &lt;password&gt;tiger&lt;/password&gt;\n  &lt;/local-tx-datasource&gt;\n&lt;/datasources&gt;","body":"&lt;datasources&gt;   &lt;local-tx-datasource&gt;     &lt;jndi-name&gt;OracleDS&lt;/jndi-name&gt; \t\t&lt;connection-url&gt;jdbc:oracle:thin:@localhost:1521:app&lt;/conn&zwnj;&#8203;ection-url&gt; \t\t&lt;driver-class&gt;oracle.jdbc.driver.OracleDriver&lt;/driver-clas&zwnj;&#8203;s&gt; \t\t&lt;user-name&gt;scott&lt;/user-name&gt;     &lt;password&gt;tiger&lt;/password&gt;   &lt;/local-tx-datasource&gt; &lt;/datasources&gt;"},{"owner":{"account_id":43546,"reputation":33497,"user_id":127359,"accept_rate":85,"display_name":"Arthur Ronald"},"score":0,"creation_date":1287090552,"post_id":3935394,"comment_id":4202731,"body_markdown":"For the example above, JBoss will create a global jndi datasource called **java:/OracleDS**","body":"For the example above, JBoss will create a global jndi datasource called <b>java:/OracleDS</b>"}],"answers":[{"comments":[{"owner":{"account_id":87016,"reputation":68348,"user_id":241590,"accept_rate":99,"display_name":"stacker"},"score":0,"creation_date":1287258452,"post_id":3949950,"comment_id":4219786,"body_markdown":"Thank you Pascal, I will try that ASAP","body":"Thank you Pascal, I will try that ASAP"},{"owner":{"account_id":53428,"reputation":8315,"user_id":159679,"accept_rate":64,"display_name":"Alex"},"score":2,"creation_date":1329243606,"post_id":3949950,"comment_id":11703192,"body_markdown":"And what&#39;s the solution for javax.persistence/EclipseLink?","body":"And what&#39;s the solution for javax.persistence/EclipseLink?"},{"owner":{"account_id":492994,"reputation":3705,"user_id":1271412,"accept_rate":78,"display_name":"petertc"},"score":0,"creation_date":1402326592,"post_id":3949950,"comment_id":37217403,"body_markdown":"I cannot archive this with hibernate 4.3.5. Many exceptions, e.g., java.lang.UnsupportedOperationException: The application must supply JDBC connections, Connection cannot be null when &#39;hibernate.dialect&#39; not set occurred. Besides, I cannot find this property in the least hibernate document: http://docs.jboss.org/hibernate/orm/4.3/manual/en-US/html_single/ I finally use the solution here: http://stackoverflow.com/questions/4548353/externalize-credentials-from-persistence-xml-in-j2se-app","body":"I cannot archive this with hibernate 4.3.5. Many exceptions, e.g., java.lang.UnsupportedOperationException: The application must supply JDBC connections, Connection cannot be null when &#39;hibernate.dialect&#39; not set occurred. Besides, I cannot find this property in the least hibernate document: <a href=\"http://docs.jboss.org/hibernate/orm/4.3/manual/en-US/html_single/\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/orm/4.3/manual/en-US/html_single</a> I finally use the solution here: <a href=\"http://stackoverflow.com/questions/4548353/externalize-credentials-from-persistence-xml-in-j2se-app\" title=\"externalize credentials from persistence xml in j2se app\">stackoverflow.com/questions/4548353/&hellip;</a>"}],"tags":[],"owner":{"account_id":26957,"reputation":564381,"user_id":70604,"display_name":"Pascal Thivent"},"comment_count":3,"down_vote_count":1,"up_vote_count":11,"is_accepted":true,"score":10,"last_activity_date":1287250012,"creation_date":1287250012,"answer_id":3949950,"question_id":3935394,"body_markdown":"As an alternative to your current approach and since you&#39;re using Hibernate, you could use Hibernate to configure JPA by declaring a `hibernate.cfg.xml` file using the `hibernate.ejb.cfgfile` property, like this: \r\n\r\n    &lt;persistence&gt;\r\n     &lt;persistence-unit name=&quot;manager1&quot; transaction-type=&quot;JTA&quot;&gt;\r\n        &lt;jta-data-source&gt;java:/DefaultDS&lt;/jta-data-source&gt;\r\n        &lt;properties&gt;\r\n           &lt;property name=&quot;hibernate.ejb.cfgfile&quot; value=&quot;/hibernate.cfg.xml&quot;/&gt;\r\n        &lt;/properties&gt;\r\n     &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\nMy understanding is that the `hibernate.cfg.xml` is just supposed to be on the classpath (so it could be outside the packaged archive).\r\n\r\n### References\r\n\r\n- Hibernate Entity Manager Reference Guide\r\n - [Table 2.1. Hibernate Entity Manager specific properties][1] \r\n\r\n\r\n  [1]: http://docs.jboss.org/hibernate/stable/entitymanager/reference/en/html_single/#d0e708","title":"How to externalize properties from JPAs persistence.xml?","body":"<p>As an alternative to your current approach and since you're using Hibernate, you could use Hibernate to configure JPA by declaring a <code>hibernate.cfg.xml</code> file using the <code>hibernate.ejb.cfgfile</code> property, like this: </p>\n\n<pre><code>&lt;persistence&gt;\n &lt;persistence-unit name=\"manager1\" transaction-type=\"JTA\"&gt;\n    &lt;jta-data-source&gt;java:/DefaultDS&lt;/jta-data-source&gt;\n    &lt;properties&gt;\n       &lt;property name=\"hibernate.ejb.cfgfile\" value=\"/hibernate.cfg.xml\"/&gt;\n    &lt;/properties&gt;\n &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n\n<p>My understanding is that the <code>hibernate.cfg.xml</code> is just supposed to be on the classpath (so it could be outside the packaged archive).</p>\n\n<h3>References</h3>\n\n<ul>\n<li>Hibernate Entity Manager Reference Guide\n\n<ul>\n<li><a href=\"http://docs.jboss.org/hibernate/stable/entitymanager/reference/en/html_single/#d0e708\" rel=\"noreferrer\">Table 2.1. Hibernate Entity Manager specific properties</a> </li>\n</ul></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":53428,"reputation":8315,"user_id":159679,"accept_rate":64,"display_name":"Alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1329290757,"creation_date":1329290757,"answer_id":9289412,"question_id":3935394,"body_markdown":"Just found a an alleged way for EclipseLink users. There is &quot;**eclipselink.persistencexml**&quot; which has a default value of \r\n\r\n    public static final String ECLIPSELINK_PERSISTENCE_XML_DEFAULT = &quot;META-INF/persistence.xml&quot;;\r\n    \r\nbut it can&#39;t be overridden although the docs say it can be...\r\n\r\n    /**\r\n     * The &lt;code&gt;&quot;eclipselink.persistencexml&quot;&lt;/code&gt; property specifies the full\r\n     * resource name to look for the persistence XML files in. If not specified\r\n     * the default value defined by {@link #ECLIPSELINK_PERSISTENCE_XML_DEFAULT}\r\n     * will be used.\r\n     * &lt;p&gt;\r\n     * IMPORTANT: For now this property is used for the canonical model\r\n     * generator but it can later be used as a system property for customizing\r\n     * weaving and application bootstrap usage.\r\n     * &lt;p&gt;\r\n     * This property is only used by EclipseLink when it is locating the\r\n     * configuration file. When used within an EJB/Spring container in container\r\n     * managed mode the locating and reading of this file is done by the\r\n     * container and will not use this configuration.\r\n     */","title":"How to externalize properties from JPAs persistence.xml?","body":"<p>Just found a an alleged way for EclipseLink users. There is \"<strong>eclipselink.persistencexml</strong>\" which has a default value of </p>\n\n<pre><code>public static final String ECLIPSELINK_PERSISTENCE_XML_DEFAULT = \"META-INF/persistence.xml\";\n</code></pre>\n\n<p>but it can't be overridden although the docs say it can be...</p>\n\n<pre><code>/**\n * The &lt;code&gt;\"eclipselink.persistencexml\"&lt;/code&gt; property specifies the full\n * resource name to look for the persistence XML files in. If not specified\n * the default value defined by {@link #ECLIPSELINK_PERSISTENCE_XML_DEFAULT}\n * will be used.\n * &lt;p&gt;\n * IMPORTANT: For now this property is used for the canonical model\n * generator but it can later be used as a system property for customizing\n * weaving and application bootstrap usage.\n * &lt;p&gt;\n * This property is only used by EclipseLink when it is locating the\n * configuration file. When used within an EJB/Spring container in container\n * managed mode the locating and reading of this file is done by the\n * container and will not use this configuration.\n */\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3605220,"reputation":11,"user_id":3007532,"display_name":"user3007532"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1384841738,"creation_date":1384841738,"answer_id":20064501,"question_id":3935394,"body_markdown":"I used this mechanism, seems to work for most of the properties, had issues with non-jta-data-source.\r\n\r\nhttp://www.eclipse.org/eclipselink/api/2.4/index.html?org/eclipse/persistence/config/PersistenceUnitProperties.html","title":"How to externalize properties from JPAs persistence.xml?","body":"<p>I used this mechanism, seems to work for most of the properties, had issues with non-jta-data-source.</p>\n\n<p><a href=\"http://www.eclipse.org/eclipselink/api/2.4/index.html?org/eclipse/persistence/config/PersistenceUnitProperties.html\" rel=\"nofollow\">http://www.eclipse.org/eclipselink/api/2.4/index.html?org/eclipse/persistence/config/PersistenceUnitProperties.html</a></p>\n"},{"tags":[],"owner":{"account_id":7038768,"reputation":429,"user_id":5391873,"accept_rate":17,"display_name":"Rajesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455188013,"creation_date":1455188013,"answer_id":35337346,"question_id":3935394,"body_markdown":"If you are using Spring to manage and inject entity manager, then it is possible to implement org.springframework.orm.jpa.persistenceunit.PersistenceUnitPostProcessor and pass on external properties. I could successfully externalize all properties from persistence.xml using this.","title":"How to externalize properties from JPAs persistence.xml?","body":"<p>If you are using Spring to manage and inject entity manager, then it is possible to implement org.springframework.orm.jpa.persistenceunit.PersistenceUnitPostProcessor and pass on external properties. I could successfully externalize all properties from persistence.xml using this.</p>\n"},{"tags":[],"owner":{"account_id":13669548,"reputation":149,"user_id":9862502,"display_name":"Mayur Jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689938517,"creation_date":1689938517,"answer_id":76737518,"question_id":3935394,"body_markdown":"    **persistence.xml**\r\n                \r\n                &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n                &lt;persistence version=&quot;2.2&quot;\r\n                \txmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\r\n                \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                \txsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;&gt;\r\n                \t&lt;persistence-unit name=&quot;jsf-maven-project&quot;&gt;\r\n                \t    &lt;properties&gt;\r\n                \t       &lt;property name=&quot;hibernate.ejb.cfgfile&quot; value=&quot;/hibernate.cfg.xml&quot;/&gt;\r\n                \t    &lt;/properties&gt;\r\n                    &lt;/persistence-unit&gt;\r\n                &lt;/persistence&gt;\r\n               \r\n    **hibernate.cfg.xml**\r\n                &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n            &lt;!DOCTYPE hibernate-configuration PUBLIC \r\n              &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; \r\n              &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n              &lt;hibernate-configuration&gt;\r\n                &lt;session-factory&gt;\r\n                  &lt;property name=&quot;connection.driver_class&quot;&gt;org.postgresql.Driver&lt;/property&gt;\r\n                  &lt;property name=&quot;connection.url&quot;&gt;jdbc:postgresql://localhost:5432/testdb&lt;/property&gt;\r\n                  &lt;property name=&quot;connection.username&quot;&gt;postgres&lt;/property&gt;\r\n                  &lt;property name=&quot;connection.password&quot;&gt;Test@123&lt;/property&gt;\r\n                  &lt;property name=&quot;connection.pool_size&quot;&gt;10&lt;/property&gt;\r\n                  &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/property&gt;\r\n                  &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\r\n                  &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n                  &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\r\n                  &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n                  &lt;!-- mapping  class=&quot;com.sample.Book&quot; / --&gt;\r\n              &lt;/session-factory&gt;\r\n            &lt;/hibernate-configuration&gt;\r\n        \r\n    **HibernateUtil.java**\r\n                public static EntityManager getEntityManager() {\r\n                \t\tif (entityManagerFactory == null) {\r\n                \t\t\tentityManagerFactory = Persistence.createEntityManagerFactory(&quot;jsf-maven-project&quot;);\r\n                \t\t}\r\n                \t\treturn entityManagerFactory.createEntityManager();\r\n                \t}\r\n                \r\nI was createing JSF project with hibernate JPA and this solution worked for me. ","title":"How to externalize properties from JPAs persistence.xml?","body":"<pre><code>**persistence.xml**\n            \n            &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n            &lt;persistence version=&quot;2.2&quot;\n                xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\n                xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n                xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;&gt;\n                &lt;persistence-unit name=&quot;jsf-maven-project&quot;&gt;\n                    &lt;properties&gt;\n                       &lt;property name=&quot;hibernate.ejb.cfgfile&quot; value=&quot;/hibernate.cfg.xml&quot;/&gt;\n                    &lt;/properties&gt;\n                &lt;/persistence-unit&gt;\n            &lt;/persistence&gt;\n           \n**hibernate.cfg.xml**\n            &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n        &lt;!DOCTYPE hibernate-configuration PUBLIC \n          &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; \n          &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n          &lt;hibernate-configuration&gt;\n            &lt;session-factory&gt;\n              &lt;property name=&quot;connection.driver_class&quot;&gt;org.postgresql.Driver&lt;/property&gt;\n              &lt;property name=&quot;connection.url&quot;&gt;jdbc:postgresql://localhost:5432/testdb&lt;/property&gt;\n              &lt;property name=&quot;connection.username&quot;&gt;postgres&lt;/property&gt;\n              &lt;property name=&quot;connection.password&quot;&gt;Test@123&lt;/property&gt;\n              &lt;property name=&quot;connection.pool_size&quot;&gt;10&lt;/property&gt;\n              &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/property&gt;\n              &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\n              &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n              &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\n              &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n              &lt;!-- mapping  class=&quot;com.sample.Book&quot; / --&gt;\n          &lt;/session-factory&gt;\n        &lt;/hibernate-configuration&gt;\n    \n**HibernateUtil.java**\n            public static EntityManager getEntityManager() {\n                    if (entityManagerFactory == null) {\n                        entityManagerFactory = Persistence.createEntityManagerFactory(&quot;jsf-maven-project&quot;);\n                    }\n                    return entityManagerFactory.createEntityManager();\n                }\n            \n</code></pre>\n<p>I was createing JSF project with hibernate JPA and this solution worked for me.</p>\n"}],"owner":{"account_id":87016,"reputation":68348,"user_id":241590,"accept_rate":99,"display_name":"stacker"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29705,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":3949950,"answer_count":5,"score":24,"last_activity_date":1689938517,"creation_date":1287073768,"question_id":3935394,"body_markdown":"I would like to put some of the hibernate configuration in a property file to make it editable without build and deploy.\r\n\r\nI tried to solve my problem by following the instructions from https://stackoverflow.com/questions/1989672/create-entity-manager-without-persistence-xml \r\n\r\napp.properties:\r\n\r\n    hibernate.show_sql=true \r\n    hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n    hibernate.hbm2ddl.auto=validate \r\n    hibernate.show_sql=true\r\n    hibernate.format_sql=true\r\n    hibernate.default_schema=myschema\r\n\r\npersistence.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!-- Persistence deployment descriptor for dev profile --&gt;\r\n    &lt;persistence xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot; \r\n                 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                 xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd&quot; \r\n                 version=&quot;1.0&quot;&gt;\r\n                 \r\n       &lt;persistence-unit name=&quot;pu&quot;&gt;\r\n          &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\r\n          &lt;jta-data-source&gt;jdbc/appDatasource&lt;/jta-data-source&gt;\r\n          &lt;properties&gt;\r\n             &lt;property name=&quot;jboss.entity.manager.factory.jndi.name&quot; value=&quot;java:/appEntityManagerFactory&quot;/&gt;\r\n          &lt;/properties&gt;\r\n       &lt;/persistence-unit&gt;\r\n        \r\n    &lt;/persistence&gt;\r\n\r\n\r\n\r\nIn the initialization code the application executes the following sequence, (which finds the properties),\r\n\r\n    Properties props = new Properties();\r\n    InputStream is = ClassLoader.getSystemResourceAsStream( &quot;app.properties&quot; );\r\n    props.load( is );\r\n    Persistence.createEntityManagerFactory( &quot;pu&quot;, props );\r\n\r\n\r\n\r\nbut fails with the error message:\r\n\r\n     INFO  [SessionFactoryImpl] building session factory\r\n     INFO  [SessionFactoryObjectFactory] Not binding factory to JNDI, no JNDI name configured\r\n    ERROR [STDERR] javax.persistence.PersistenceException: [PersistenceUnit: pu] Unable to build EntityManagerFactory\r\n\r\nDoes anyone have an idea what could be wrong with my configuration?\r\n\r\nVersions: JBoss 4.3\r\nSeam: 2.1.2 \r\n\r\nEDIT:\r\n\r\nJBoss JNDI enlists &quot;pu&quot; as persistence unit:\r\n\r\n    persistence.units:ear=app.ear,jar=app.jar,unitName=pu (class: org.hibernate.impl.SessionFactoryImpl)\r\n\r\n","title":"How to externalize properties from JPAs persistence.xml?","body":"<p>I would like to put some of the hibernate configuration in a property file to make it editable without build and deploy.</p>\n\n<p>I tried to solve my problem by following the instructions from <a href=\"https://stackoverflow.com/questions/1989672/create-entity-manager-without-persistence-xml\">Create JPA EntityManager without persistence.xml configuration file</a> </p>\n\n<p>app.properties:</p>\n\n<pre><code>hibernate.show_sql=true \nhibernate.dialect=org.hibernate.dialect.MySQLDialect\nhibernate.hbm2ddl.auto=validate \nhibernate.show_sql=true\nhibernate.format_sql=true\nhibernate.default_schema=myschema\n</code></pre>\n\n<p>persistence.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!-- Persistence deployment descriptor for dev profile --&gt;\n&lt;persistence xmlns=\"http://java.sun.com/xml/ns/persistence\" \n             xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n             xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd\" \n             version=\"1.0\"&gt;\n\n   &lt;persistence-unit name=\"pu\"&gt;\n      &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\n      &lt;jta-data-source&gt;jdbc/appDatasource&lt;/jta-data-source&gt;\n      &lt;properties&gt;\n         &lt;property name=\"jboss.entity.manager.factory.jndi.name\" value=\"java:/appEntityManagerFactory\"/&gt;\n      &lt;/properties&gt;\n   &lt;/persistence-unit&gt;\n\n&lt;/persistence&gt;\n</code></pre>\n\n<p>In the initialization code the application executes the following sequence, (which finds the properties),</p>\n\n<pre><code>Properties props = new Properties();\nInputStream is = ClassLoader.getSystemResourceAsStream( \"app.properties\" );\nprops.load( is );\nPersistence.createEntityManagerFactory( \"pu\", props );\n</code></pre>\n\n<p>but fails with the error message:</p>\n\n<pre><code> INFO  [SessionFactoryImpl] building session factory\n INFO  [SessionFactoryObjectFactory] Not binding factory to JNDI, no JNDI name configured\nERROR [STDERR] javax.persistence.PersistenceException: [PersistenceUnit: pu] Unable to build EntityManagerFactory\n</code></pre>\n\n<p>Does anyone have an idea what could be wrong with my configuration?</p>\n\n<p>Versions: JBoss 4.3\nSeam: 2.1.2 </p>\n\n<p>EDIT:</p>\n\n<p>JBoss JNDI enlists \"pu\" as persistence unit:</p>\n\n<pre><code>persistence.units:ear=app.ear,jar=app.jar,unitName=pu (class: org.hibernate.impl.SessionFactoryImpl)\n</code></pre>\n"},{"tags":["java","executorservice","threadpoolexecutor"],"comments":[{"owner":{"account_id":1077457,"reputation":8074,"user_id":1075282,"display_name":"Renat"},"score":0,"creation_date":1689938253,"post_id":76737469,"comment_id":135287248,"body_markdown":"For exact number you probably need to implement manual counting, https://stackoverflow.com/questions/7271541/threadpoolexecutors-getactivecount","body":"For exact number you probably need to implement manual counting, <a href=\"https://stackoverflow.com/questions/7271541/threadpoolexecutors-getactivecount\" title=\"threadpoolexecutors getactivecount\">stackoverflow.com/questions/7271541/&hellip;</a>"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1689944038,"post_id":76737469,"comment_id":135288428,"body_markdown":"It can never be guaranteed to be exact, because tasks could be started or stopped concurrently with reading the value.","body":"It can never be guaranteed to be exact, because tasks could be started or stopped concurrently with reading the value."}],"owner":{"account_id":17841845,"reputation":1,"user_id":12959566,"display_name":"Stream_Cipher"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689938019,"creation_date":1689938019,"question_id":76737469,"body_markdown":"i have read the documentation its mentioned that this method \r\n\r\n`((ThreadPoolExecutor) executorService).getActiveCount();`\r\n\r\n returns approximate  number of threads that are actively executing tasks.\r\ncan anyone suggest in which practical scenario this method will return incorrect count?\r\nthe reason why i asked this question is in my spring-boot app one of the UT case is dependent on this method and that ut cases is failing once in while specifically on Jenkins server.\r\n\r\n\r\n```\r\nExecutorService executorService = Executors.newFixedThreadPool(10);\r\nSynchronousQueue&lt;Integer&gt; queue = new SynchronousQueue&lt;&gt;();\r\nfor(int i = 0;i&lt;10;i++){\r\n            executorService.submit(() -&gt; {\r\n                queue.put(1);\r\n                return null;\r\n            });\r\n        }\r\n```\r\nwhat i am expecting is when i call this method `((ThreadPoolExecutor) executorService).getActiveCount();` it should not return 10 (number of running thread) instead it should return some other value may be 9 or 8 .. ","title":"ExecutorService.getActiveCount return approximate number of active threads","body":"<p>i have read the documentation its mentioned that this method</p>\n<p><code>((ThreadPoolExecutor) executorService).getActiveCount();</code></p>\n<p>returns approximate  number of threads that are actively executing tasks.\ncan anyone suggest in which practical scenario this method will return incorrect count?\nthe reason why i asked this question is in my spring-boot app one of the UT case is dependent on this method and that ut cases is failing once in while specifically on Jenkins server.</p>\n<pre><code>ExecutorService executorService = Executors.newFixedThreadPool(10);\nSynchronousQueue&lt;Integer&gt; queue = new SynchronousQueue&lt;&gt;();\nfor(int i = 0;i&lt;10;i++){\n            executorService.submit(() -&gt; {\n                queue.put(1);\n                return null;\n            });\n        }\n</code></pre>\n<p>what i am expecting is when i call this method <code>((ThreadPoolExecutor) executorService).getActiveCount();</code> it should not return 10 (number of running thread) instead it should return some other value may be 9 or 8 ..</p>\n"},{"tags":["java","junit4"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689937738,"post_id":76737424,"comment_id":135287151,"body_markdown":"Does this answer your question? [Multiple RunWith Statements in jUnit](https://stackoverflow.com/questions/24431427/multiple-runwith-statements-in-junit)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/24431427/multiple-runwith-statements-in-junit\">Multiple RunWith Statements in jUnit</a>"}],"owner":{"account_id":21482511,"reputation":3,"user_id":15829656,"display_name":"jijesh vu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689937696,"creation_date":1689937696,"question_id":76737424,"body_markdown":"How can i add the multiple @RunWith or there are any other alternative available. I must use the Parameterized.class with other class which i cannnot exclude\r\n\r\n    @RunWith(ScenarioStepRunner.class)\r\n    @RunWith(Parameterized.class)\r\n    public class Test{\r\n    \r\n    \r\n    }","title":"Junit4 how add multiple classes for @RunWith annotation","body":"<p>How can i add the multiple @RunWith or there are any other alternative available. I must use the Parameterized.class with other class which i cannnot exclude</p>\n<pre><code>@RunWith(ScenarioStepRunner.class)\n@RunWith(Parameterized.class)\npublic class Test{\n\n\n}\n</code></pre>\n"},{"tags":["java","java-17","java-module","module-path"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689961040,"post_id":76737390,"comment_id":135291733,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1690198930,"post_id":76737390,"comment_id":135315395,"body_markdown":"Maybe [this Q&amp;A](https://stackoverflow.com/q/76733809/2711488) helps which has been opened a few hours after yours.","body":"Maybe <a href=\"https://stackoverflow.com/q/76733809/2711488\">this Q&amp;A</a> helps which has been opened a few hours after yours."}],"owner":{"account_id":13913514,"reputation":1,"user_id":10046020,"display_name":"Syndrome"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689937404,"creation_date":1689937404,"question_id":76737390,"body_markdown":"I have a Java-Swing-Application with a small, self-written application-debugger (let&#39;s call it AID) attached. With AID you can execute code, inspect objects and look at the ui-hierarchy inside the application.\r\n\r\nWhen running the app with java 17 or higher, the module-system gives the usual errors like \r\n&quot;`InaccessibleObjectException: ... module java.desktop does not &quot;opens java.swing.border&quot; to unnamed module ...`&quot;. I am aware of the &quot;`-add-opens ...`&quot;-argument and already tried it. Unfortunately I would have to open *a lot of* modules/packages for my debugger to work properly because I do not know which packages are accessed. \r\n\r\nI would be ok with making AID a standalone-module if that helps with the solution, but is there a way to open up *all* modules/packages to a specific module (like my AID-module)?\r\n\r\n","title":"Is there a way to open all modules to a specific modules?","body":"<p>I have a Java-Swing-Application with a small, self-written application-debugger (let's call it AID) attached. With AID you can execute code, inspect objects and look at the ui-hierarchy inside the application.</p>\n<p>When running the app with java 17 or higher, the module-system gives the usual errors like\n&quot;<code>InaccessibleObjectException: ... module java.desktop does not &quot;opens java.swing.border&quot; to unnamed module ...</code>&quot;. I am aware of the &quot;<code>-add-opens ...</code>&quot;-argument and already tried it. Unfortunately I would have to open <em>a lot of</em> modules/packages for my debugger to work properly because I do not know which packages are accessed.</p>\n<p>I would be ok with making AID a standalone-module if that helps with the solution, but is there a way to open up <em>all</em> modules/packages to a specific module (like my AID-module)?</p>\n"},{"tags":["java","vaadin","vaadin-flow","vaadin-grid","vaadin23"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1689936162,"post_id":76736522,"comment_id":135286884,"body_markdown":"The event that triggers the dialogs could be triggered by either paint() repaint() update() or a more deliberate implementation of &quot;event&quot; such as &quot;focus&quot; , component layer level change , a mouse click event , or a click added to an actionevent.","body":"The event that triggers the dialogs could be triggered by either paint() repaint() update() or a more deliberate implementation of &quot;event&quot; such as &quot;focus&quot; , component layer level change , a mouse click event , or a click added to an actionevent."},{"owner":{"account_id":19662820,"reputation":169,"user_id":14393923,"display_name":"Miłosz Bąbliński"},"score":0,"creation_date":1689936975,"post_id":76736522,"comment_id":135287017,"body_markdown":"I checked in debug that for my example each time is fired action from ValueProvider in addComponentColumn","body":"I checked in debug that for my example each time is fired action from ValueProvider in addComponentColumn"},{"owner":{"account_id":295383,"reputation":4686,"user_id":599765,"accept_rate":22,"display_name":"Andr&#233; Schild"},"score":0,"creation_date":1690055354,"post_id":76736522,"comment_id":135300701,"body_markdown":"When you add columns, then the grid must recalculate col width and content, so it has to repaint.\nUsually you add all columns first and then bind the data to the grid","body":"When you add columns, then the grid must recalculate col width and content, so it has to repaint. Usually you add all columns first and then bind the data to the grid"},{"owner":{"account_id":19662820,"reputation":169,"user_id":14393923,"display_name":"Miłosz Bąbliński"},"score":0,"creation_date":1690192049,"post_id":76736522,"comment_id":135314038,"body_markdown":"but im not doing anything with other grids after they are created, i&#39;m just refreshing page by F5 o routing to another page and then every previously created grid that are not even visible at this moment are refreshing like in my example. If i&#39;m in tab &quot;Grid2&quot; and i press F5 then both ValueProviders( Grid1 and Grid2) are fired even that tab with Grid1 isnet even shown right now","body":"but im not doing anything with other grids after they are created, i&#39;m just refreshing page by F5 o routing to another page and then every previously created grid that are not even visible at this moment are refreshing like in my example. If i&#39;m in tab &quot;Grid2&quot; and i press F5 then both ValueProviders( Grid1 and Grid2) are fired even that tab with Grid1 isnet even shown right now"}],"owner":{"account_id":19662820,"reputation":169,"user_id":14393923,"display_name":"Miłosz Bąbliński"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689937327,"creation_date":1689929774,"question_id":76736522,"body_markdown":"I found out a strange behavior of the grid component. I have app with multiple tabs in each tab can be multiple grids, sometimes i handle some errors by showing dialog in addColumn method. \r\nI found out that every created grid are refreshing each time i change UI (by navigating or F5) I have PreserveOnRefresh annotation. So even grids from other tabs that are not visible right now are refreshing and showing me again some dialogs that are implemented in addColumn method in another grid.\r\nI have application where users can add new tabs with a lots of grids so after some time they are refreshing a lot of data after each navigation or F5 pressing. \r\nBelow I&#39;m adding code example:\r\n\r\n        @Route(&quot;test&quot;)\r\n    @PreserveOnRefresh\r\n    public class Test extends Div {\r\n        public Test(){\r\n    \r\n            Grid&lt;String&gt; grid1 = new Grid();\r\n            List&lt;String&gt; grid1List = new ArrayList&lt;&gt;();\r\n            grid1List.add(&quot;grid1Element&quot;);\r\n            grid1.setItems(grid1List);\r\n            grid1.addComponentColumn(item -&gt; {\r\n                Dialog grid1D = new Dialog(new SpanTrans(&quot;Grid1 Dialog&quot;));\r\n                grid1D.open();\r\n                return new SpanTrans(item);\r\n            });\r\n    \r\n            Grid&lt;String&gt; grid2 = new Grid();\r\n            List&lt;String&gt; grid2List = new ArrayList&lt;&gt;();\r\n            grid2List.add(&quot;grid2Element&quot;);\r\n            grid2.setItems(grid2List);\r\n            grid2.addComponentColumn(item -&gt; {\r\n                Dialog grid2D = new Dialog(new SpanTrans(&quot;Grid2 Dialog&quot;));\r\n                grid2D.open();\r\n                return new SpanTrans(item);\r\n            });\r\n            TabSheet tabs = new TabSheet();\r\n            tabs.add(&quot;Grid1&quot;,grid1);\r\n            tabs.add(&quot;Grid2&quot;,grid2);\r\n    \r\n            add(tabs);\r\n        }\r\n    }\r\n\r\nSo when i every time i enter each tab the dialog for grid inside this tab is shown. Why isi t hapenning every time  shouldnt it be only for the first time until i&#39;m send refresh request from my code if i would like to? And after F5/Refreshing Page both dialogs for both tabs are shown.\r\n\r\nI want to refresh grids only when i&#39;m executing refresh from code and not doing it for every created grid whenever UI will change.\r\nI&#39;m using Vaadin 23.3.15","title":"Vaadin 23 all grids refreshing after changing UI","body":"<p>I found out a strange behavior of the grid component. I have app with multiple tabs in each tab can be multiple grids, sometimes i handle some errors by showing dialog in addColumn method.\nI found out that every created grid are refreshing each time i change UI (by navigating or F5) I have PreserveOnRefresh annotation. So even grids from other tabs that are not visible right now are refreshing and showing me again some dialogs that are implemented in addColumn method in another grid.\nI have application where users can add new tabs with a lots of grids so after some time they are refreshing a lot of data after each navigation or F5 pressing.\nBelow I'm adding code example:</p>\n<pre><code>    @Route(&quot;test&quot;)\n@PreserveOnRefresh\npublic class Test extends Div {\n    public Test(){\n\n        Grid&lt;String&gt; grid1 = new Grid();\n        List&lt;String&gt; grid1List = new ArrayList&lt;&gt;();\n        grid1List.add(&quot;grid1Element&quot;);\n        grid1.setItems(grid1List);\n        grid1.addComponentColumn(item -&gt; {\n            Dialog grid1D = new Dialog(new SpanTrans(&quot;Grid1 Dialog&quot;));\n            grid1D.open();\n            return new SpanTrans(item);\n        });\n\n        Grid&lt;String&gt; grid2 = new Grid();\n        List&lt;String&gt; grid2List = new ArrayList&lt;&gt;();\n        grid2List.add(&quot;grid2Element&quot;);\n        grid2.setItems(grid2List);\n        grid2.addComponentColumn(item -&gt; {\n            Dialog grid2D = new Dialog(new SpanTrans(&quot;Grid2 Dialog&quot;));\n            grid2D.open();\n            return new SpanTrans(item);\n        });\n        TabSheet tabs = new TabSheet();\n        tabs.add(&quot;Grid1&quot;,grid1);\n        tabs.add(&quot;Grid2&quot;,grid2);\n\n        add(tabs);\n    }\n}\n</code></pre>\n<p>So when i every time i enter each tab the dialog for grid inside this tab is shown. Why isi t hapenning every time  shouldnt it be only for the first time until i'm send refresh request from my code if i would like to? And after F5/Refreshing Page both dialogs for both tabs are shown.</p>\n<p>I want to refresh grids only when i'm executing refresh from code and not doing it for every created grid whenever UI will change.\nI'm using Vaadin 23.3.15</p>\n"},{"tags":["java","eclipse","maven"],"comments":[{"owner":{"account_id":28827923,"reputation":1,"user_id":22078940,"display_name":"Vinay Mundhe"},"score":0,"creation_date":1689941631,"post_id":76737256,"comment_id":135287882,"body_markdown":"@SamuelMarchant I&#39;m just learning everything. Can you pls tell me how to do that exactly?","body":"@SamuelMarchant I&#39;m just learning everything. Can you pls tell me how to do that exactly?"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1689944386,"post_id":76737256,"comment_id":135288493,"body_markdown":"If this isn&#39;t the current release, 2023-06, where this is solved, go get the current release.","body":"If this isn&#39;t the current release, 2023-06, where this is solved, go get the current release."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1689988785,"post_id":76737256,"comment_id":135294725,"body_markdown":"Sorry, that was a stupid way I said that , you need to check you imported the IBM jar containing that class into your project, and then compiled your project to a .war , then deploy to the Tomcat server in its &quot;webapps&quot; folder.","body":"Sorry, that was a stupid way I said that , you need to check you imported the IBM jar containing that class into your project, and then compiled your project to a .war , then deploy to the Tomcat server in its &quot;webapps&quot; folder."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1689989037,"post_id":76737256,"comment_id":135294734,"body_markdown":"Note that Tomcat 9 and older versions servlet and framework API in the server use javax library name on imports but Tomcat 10 and newer use jakarta name in imports of classes, However, SE Core classes remain their actual naming for package imports into code.","body":"Note that Tomcat 9 and older versions servlet and framework API in the server use javax library name on imports but Tomcat 10 and newer use jakarta name in imports of classes, However, SE Core classes remain their actual naming for package imports into code."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1689989733,"post_id":76737256,"comment_id":135294761,"body_markdown":"Take a look at this &quot;The Directory Structure of the WAR file&quot;  https://www.middlewareinventory.com/blog/sample-web-application-war-file-download/      in the image it shows inside the &quot;WEB-INF/classes&quot; folder tree example the folder &quot;com&quot; , that folder is &quot;typically&quot; (a typical)  top folder name of the contents of a jar library that is added to a web project, of it is fine for all the jar files to use such a name or tree names the same , only .class file must be unique names when unloaded into use","body":"Take a look at this &quot;The Directory Structure of the WAR file&quot;  <a href=\"https://www.middlewareinventory.com/blog/sample-web-application-war-file-download/\" rel=\"nofollow noreferrer\">middlewareinventory.com/blog/&hellip;</a>      in the image it shows inside the &quot;WEB-INF/classes&quot; folder tree example the folder &quot;com&quot; , that folder is &quot;typically&quot; (a typical)  top folder name of the contents of a jar library that is added to a web project, of it is fine for all the jar files to use such a name or tree names the same , only .class file must be unique names when unloaded into use"}],"owner":{"account_id":28827923,"reputation":1,"user_id":22078940,"display_name":"Vinay Mundhe"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689936132,"creation_date":1689936132,"question_id":76737256,"body_markdown":"I&#39;m creating a maven web project with tomcat server. But the web.xml and index.jsp file are not opening up. Here&#39;s a screenshot of the error. \r\n\r\nThe error: Failed to create the part&#39;s controls -\r\njava.lang.NoClassDefFoundError: com/ibm/icu/util/StringTokenizer [The image shows what I see after clicking on index.jsp file](https://i.stack.imgur.com/e9Ga4.png) \r\n\r\nI have already tried re-starting workspace. Also, went to File Associations from preferences and set .jsp and java to deafualt. This was suggested in some other stackoverflow link. ","title":"Creating a maven web project with tomcat server. The web.xml and index.jsp file are not opening up: It says Failed to create the part&#39;s controls","body":"<p>I'm creating a maven web project with tomcat server. But the web.xml and index.jsp file are not opening up. Here's a screenshot of the error.</p>\n<p>The error: Failed to create the part's controls -\njava.lang.NoClassDefFoundError: com/ibm/icu/util/StringTokenizer <a href=\"https://i.stack.imgur.com/e9Ga4.png\" rel=\"nofollow noreferrer\">The image shows what I see after clicking on index.jsp file</a></p>\n<p>I have already tried re-starting workspace. Also, went to File Associations from preferences and set .jsp and java to deafualt. This was suggested in some other stackoverflow link.</p>\n"},{"tags":["java","spring","spring-boot","java-17"],"comments":[{"owner":{"account_id":321634,"reputation":596,"user_id":2860981,"display_name":"MK Tan"},"score":0,"creation_date":1689952348,"post_id":76737208,"comment_id":135290169,"body_markdown":"are you migrate from jdk 8 to jdk 17 as well?","body":"are you migrate from jdk 8 to jdk 17 as well?"},{"owner":{"account_id":26715547,"reputation":3,"user_id":20320200,"display_name":"Levent Kaya"},"score":0,"creation_date":1689954275,"post_id":76737208,"comment_id":135290539,"body_markdown":"Yes, i am migreating my jdk level too","body":"Yes, i am migreating my jdk level too"}],"owner":{"account_id":26715547,"reputation":3,"user_id":20320200,"display_name":"Levent Kaya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689935619,"creation_date":1689935619,"question_id":76737208,"body_markdown":"I have migrated an application running Spring Boot 2.7 to Spring Boot 3.1.2. After making the necessary security arrangements, I was able to build and run it without any problems. But when I tried to login with Bearer token, I got `java.lang.ClassNotFoundException: javax.xml.bind.DatatypeConverter` error. I didn&#39;t have such a problem when using Spring Boot 2.7.\r\n\r\nHere was the one that gave the error:\r\n\r\n    public String generateAccessToken(User user) {\r\n        List&lt;String&gt; roleNames = user.getRoles().stream()\r\n            .map(Role::getRoleType)\r\n            .map(Enum::name)\r\n            .toList();\r\n    \r\n        return Jwts.builder()\r\n            .setSubject(String.format(&quot;%s,%s&quot;, user.getId(), user.getEmail()))\r\n            .claim(&quot;roles&quot;, roleNames)\r\n            .setIssuedAt(new Date())\r\n            .setExpiration(new Date(System.currentTimeMillis() + jwtExpireDate))\r\n            .signWith(SignatureAlgorithm.HS512, jwtSecret)\r\n            .compact();\r\n      }\r\n\r\nI have overcome this problem by adding\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nto my pom file and now my project is running. But I am not sure that this is the most effective and correct way to deal with this problem. I would appreciate it if you could share your views on this subject\r\n","title":"Spring Boot Migration javax.xml.bind.DatatypeConverter Error","body":"<p>I have migrated an application running Spring Boot 2.7 to Spring Boot 3.1.2. After making the necessary security arrangements, I was able to build and run it without any problems. But when I tried to login with Bearer token, I got <code>java.lang.ClassNotFoundException: javax.xml.bind.DatatypeConverter</code> error. I didn't have such a problem when using Spring Boot 2.7.</p>\n<p>Here was the one that gave the error:</p>\n<pre><code>public String generateAccessToken(User user) {\n    List&lt;String&gt; roleNames = user.getRoles().stream()\n        .map(Role::getRoleType)\n        .map(Enum::name)\n        .toList();\n\n    return Jwts.builder()\n        .setSubject(String.format(&quot;%s,%s&quot;, user.getId(), user.getEmail()))\n        .claim(&quot;roles&quot;, roleNames)\n        .setIssuedAt(new Date())\n        .setExpiration(new Date(System.currentTimeMillis() + jwtExpireDate))\n        .signWith(SignatureAlgorithm.HS512, jwtSecret)\n        .compact();\n  }\n</code></pre>\n<p>I have overcome this problem by adding</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n    &lt;version&gt;2.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>to my pom file and now my project is running. But I am not sure that this is the most effective and correct way to deal with this problem. I would appreciate it if you could share your views on this subject</p>\n"},{"tags":["java","javafx","audio","url-scheme","unsupportedoperation"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1689895130,"post_id":76733812,"comment_id":135281732,"body_markdown":"Audio plays just fine for me on Windows 10 build 19045 using Zulu 20.0.2—with and without JavaFX included—and either JavaFX 20.0.2 or JavaFX 21-ea+24. [Zulu 18 doesn&#39;t seem to be available any more](https://www.azul.com/downloads/#zulu).","body":"Audio plays just fine for me on Windows 10 build 19045 using Zulu 20.0.2—with and without JavaFX included—and either JavaFX 20.0.2 or JavaFX 21-ea+24. <a href=\"https://www.azul.com/downloads/#zulu\" rel=\"nofollow noreferrer\">Zulu 18 doesn&#39;t seem to be available any more</a>."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1689896495,"post_id":76733812,"comment_id":135281841,"body_markdown":"There appears to be something strange in your setup, or at least something I don&#39;t understand in the description and error message.  You mention that you *&quot;made sure that the sound file is actually included in .jar in the correct path&quot;*.  But the error message is `Unsupported protocol &quot;file&quot;`.  Resources in a jar file are accessed via the `jar` protocol, not the `file` protocol. I don&#39;t know what the cause is.","body":"There appears to be something strange in your setup, or at least something I don&#39;t understand in the description and error message.  You mention that you <i>&quot;made sure that the sound file is actually included in .jar in the correct path&quot;</i>.  But the error message is <code>Unsupported protocol &quot;file&quot;</code>.  Resources in a jar file are accessed via the <code>jar</code> protocol, not the <code>file</code> protocol. I don&#39;t know what the cause is."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1689896663,"post_id":76733812,"comment_id":135281864,"body_markdown":"You example app is playing the audio app, without either starting the JavaFX runtime explicitly or launching a JavaFX application, which will implicitly start the JavaFX runtime.  I don&#39;t know if playing audio with JavaFX media is supported if the JavaFX runtime is not running (I wouldn&#39;t try it).","body":"You example app is playing the audio app, without either starting the JavaFX runtime explicitly or launching a JavaFX application, which will implicitly start the JavaFX runtime.  I don&#39;t know if playing audio with JavaFX media is supported if the JavaFX runtime is not running (I wouldn&#39;t try it)."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1689912392,"post_id":76733812,"comment_id":135283120,"body_markdown":"Use a debugger with a breakpoint on [`NativeMediaManager.canPlayProtocol`](https://github.com/openjdk/jfx/blob/600cee70a2f6f907a53f7183315e6d7f79b291d6/modules/javafx.media/src/main/java/com/sun/media/jfxmediaimpl/NativeMediaManager.java#L264) and see which protocols it can actually play on your system.","body":"Use a debugger with a breakpoint on <a href=\"https://github.com/openjdk/jfx/blob/600cee70a2f6f907a53f7183315e6d7f79b291d6/modules/javafx.media/src/main/java/com/sun/media/jfxmediaimpl/NativeMediaManager.java#L264\" rel=\"nofollow noreferrer\"><code>NativeMediaManager.canPlayProtocol</code></a> and see which protocols it can actually play on your system."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1689913457,"post_id":76733812,"comment_id":135283214,"body_markdown":"@jewelsea &quot;_I don&#39;t know if playing audio with JavaFX media is supported if the JavaFX runtime is not running_&quot; -- It worked for me, but yes, I would not rely on that.","body":"@jewelsea &quot;<i>I don&#39;t know if playing audio with JavaFX media is supported if the JavaFX runtime is not running</i>&quot; -- It worked for me, but yes, I would not rely on that."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1689925563,"post_id":76733812,"comment_id":135284909,"body_markdown":"It&#39;s definitely getting confused about the type of resource but as @jewelsea says, you are initializing the FX environment in the wrong way so that won&#39;t help. If it&#39;s any use I can post a link to a working version. I say *working* but actually the main thread doesn&#39;t complete for me, which suggests that *I* have something slightly wrong","body":"It&#39;s definitely getting confused about the type of resource but as @jewelsea says, you are initializing the FX environment in the wrong way so that won&#39;t help. If it&#39;s any use I can post a link to a working version. I say <i>working</i> but actually the main thread doesn&#39;t complete for me, which suggests that <i>I</i> have something slightly wrong"},{"owner":{"account_id":19836578,"reputation":31,"user_id":22260806,"display_name":"kofiy"},"score":0,"creation_date":1689927155,"post_id":76733812,"comment_id":135285200,"body_markdown":"@jewelsea It&#39;s actually `jar:file:/`","body":"@jewelsea It&#39;s actually <code>jar:file:&#47;</code>"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1689930193,"post_id":76733812,"comment_id":135285725,"body_markdown":"The error message I quoted does not say `jar:file:`, but maybe that doesn’t matter.  What protocols were reported as supported when performed the requested debugging?  Calling JavaFX methods from the awt thread and without starting the runtime is inadvisable IMO.","body":"The error message I quoted does not say <code>jar:file:</code>, but maybe that doesn’t matter.  What protocols were reported as supported when performed the requested debugging?  Calling JavaFX methods from the awt thread and without starting the runtime is inadvisable IMO."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1689930359,"post_id":76733812,"comment_id":135285759,"body_markdown":"@g00se Interesting. Playing the `AudioClip` the same way as the OP, I had to add a call to `Thread.sleep` to _stop_ the main thread from exiting too early (which led to the JVM exiting too early). Apparently, trying to use an `AudioClip` outside a JavaFX application leads to unexpected behavior, which is honestly not surprising.","body":"@g00se Interesting. Playing the <code>AudioClip</code> the same way as the OP, I had to add a call to <code>Thread.sleep</code> to <i>stop</i> the main thread from exiting too early (which led to the JVM exiting too early). Apparently, trying to use an <code>AudioClip</code> outside a JavaFX application leads to unexpected behavior, which is honestly not surprising."},{"owner":{"account_id":19836578,"reputation":31,"user_id":22260806,"display_name":"kofiy"},"score":0,"creation_date":1689930687,"post_id":76733812,"comment_id":135285823,"body_markdown":"@Slaw My the original project is basically separate application so there was no need to Thread.sleep(), and I still get the UnsuportedProtocol &quot;file&quot;/UnsatisfiedLinkError: no glib-lite (based on if the .jar is built on my windows machine or on linux github workspace)","body":"@Slaw My the original project is basically separate application so there was no need to Thread.sleep(), and I still get the UnsuportedProtocol &quot;file&quot;/UnsatisfiedLinkError: no glib-lite (based on if the .jar is built on my windows machine or on linux github workspace)"},{"owner":{"account_id":19836578,"reputation":31,"user_id":22260806,"display_name":"kofiy"},"score":0,"creation_date":1689930731,"post_id":76733812,"comment_id":135285828,"body_markdown":"Even though I reinstalled jdk","body":"Even though I reinstalled jdk"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1689930785,"post_id":76733812,"comment_id":135285838,"body_markdown":"JavaFX jars from Maven central include native components for the detected OS, CPU and architecture, including the streaming components.    When you init the runtime, it extracts these from the jar to a cache directory it places in the native library load path.  If you don’t init it, it won’t be done.  The JavaFX SDK jars are different and include the native components as separate files shipped in the sdk lib dir.  jmods and images built by jlink from jmods include the native libs in the mod or image files, which, unlike jars have a built-in mechanism for native code resolution.","body":"JavaFX jars from Maven central include native components for the detected OS, CPU and architecture, including the streaming components.    When you init the runtime, it extracts these from the jar to a cache directory it places in the native library load path.  If you don’t init it, it won’t be done.  The JavaFX SDK jars are different and include the native components as separate files shipped in the sdk lib dir.  jmods and images built by jlink from jmods include the native libs in the mod or image files, which, unlike jars have a built-in mechanism for native code resolution."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1689930841,"post_id":76733812,"comment_id":135285846,"body_markdown":"@kofiy That stack trace and the presence of the `AWT-EventQueue-0` thread indicate you&#39;re using AWT or Swing as the UI framework, but then trying to use JavaFX to play audio. Mixing UI frameworks like this is not recommended. But if you must, then you have to manage which UI thread is executing certain code appropriately. First, initialize the JavaFX platform (there are a few ways to do this). Then make sure any interaction with the `AudioClip` occurs on the _JavaFX Application Thread_, not the EDT.","body":"@kofiy That stack trace and the presence of the <code>AWT-EventQueue-0</code> thread indicate you&#39;re using AWT or Swing as the UI framework, but then trying to use JavaFX to play audio. Mixing UI frameworks like this is not recommended. But if you must, then you have to manage which UI thread is executing certain code appropriately. First, initialize the JavaFX platform (there are a few ways to do this). Then make sure any interaction with the <code>AudioClip</code> occurs on the <i>JavaFX Application Thread</i>, not the EDT."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1689931210,"post_id":76733812,"comment_id":135285918,"body_markdown":"Your issue is no native streaming library on the Java native library path (because you did not correctly package the app and start the JavaFX runtime).  You use maven JavaFX dependencies and don’t init the runtime, so native libraries are not extracted from the JavaFX jars.  When the native libraries can’t be found, the Java code can’t play media usng any protocol, hence the unsupported protocol exception, which is a symptom and not a cause of your problem.","body":"Your issue is no native streaming library on the Java native library path (because you did not correctly package the app and start the JavaFX runtime).  You use maven JavaFX dependencies and don’t init the runtime, so native libraries are not extracted from the JavaFX jars.  When the native libraries can’t be found, the Java code can’t play media usng any protocol, hence the unsupported protocol exception, which is a symptom and not a cause of your problem."},{"owner":{"account_id":19836578,"reputation":31,"user_id":22260806,"display_name":"kofiy"},"score":0,"creation_date":1689931507,"post_id":76733812,"comment_id":135285974,"body_markdown":"@jewelsea The supported protocols are: `file`, `http`, `https`, `jrt`, `resource` (sorry for the wait)","body":"@jewelsea The supported protocols are: <code>file</code>, <code>http</code>, <code>https</code>, <code>jrt</code>, <code>resource</code> (sorry for the wait)"},{"owner":{"account_id":19836578,"reputation":31,"user_id":22260806,"display_name":"kofiy"},"score":0,"creation_date":1689931671,"post_id":76733812,"comment_id":135286004,"body_markdown":"@jewelsea Oh thanks, got it. (Still kind off weird that it works for other people, and that error is different based on if the .jar was build on windows or linux)","body":"@jewelsea Oh thanks, got it. (Still kind off weird that it works for other people, and that error is different based on if the .jar was build on windows or linux)"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1689931858,"post_id":76733812,"comment_id":135286035,"body_markdown":"Probably the issue wasn’t replicable by others because they had a different configuration whch placed JavaFX native libraries on the Java native library path.  For example, they had initialized the JavaFX environment for another project sometime in the past, which created a cached JavaFX native library directory on their system that was reused when they tried to replicate your issue.","body":"Probably the issue wasn’t replicable by others because they had a different configuration whch placed JavaFX native libraries on the Java native library path.  For example, they had initialized the JavaFX environment for another project sometime in the past, which created a cached JavaFX native library directory on their system that was reused when they tried to replicate your issue."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1689931875,"post_id":76733812,"comment_id":135286042,"body_markdown":"Yes, the JavaFX, is misused. My FX knowledge is almost non-existent, but fwiw I&#39;ll append the code I&#39;m using to my &#39;answer&#39;. It plays but misbehaves in that the app doesn&#39;t exit properly. It could be that it&#39;s being inited as per gui but *without* a gui that&#39;s the problem","body":"Yes, the JavaFX, is misused. My FX knowledge is almost non-existent, but fwiw I&#39;ll append the code I&#39;m using to my &#39;answer&#39;. It plays but misbehaves in that the app doesn&#39;t exit properly. It could be that it&#39;s being inited as per gui but <i>without</i> a gui that&#39;s the problem"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689932154,"post_id":76733812,"comment_id":135286097,"body_markdown":"[JavaFX creates an application thread for running the application start method, processing input events, and running animation timelines.](https://docs.oracle.com/javase/8/javafx/api/javafx/application/Application.html). Not quite sure if the same thread that runs the start method runs the audio clip or not ...","body":"<a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/application/Application.html\" rel=\"nofollow noreferrer\">JavaFX creates an application thread for running the application start method, processing input events, and running animation timelines.</a>. Not quite sure if the same thread that runs the start method runs the audio clip or not ..."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1689932316,"post_id":76733812,"comment_id":135286131,"body_markdown":"The maven jars are implicitly classified dependencies.  By default maven will only require the jar with native code matching the build system.  The jars are not portable from windows to Linux.  If you want jars as dependencies for different platforms you need to include them as classified dependencies for all target platforms, [like this](https://stackoverflow.com/questions/52653836/maven-shade-javafx-runtime-components-are-missing).  Though linking jmods into a target image for a given platform using jlink is probably preferred.","body":"The maven jars are implicitly classified dependencies.  By default maven will only require the jar with native code matching the build system.  The jars are not portable from windows to Linux.  If you want jars as dependencies for different platforms you need to include them as classified dependencies for all target platforms, <a href=\"https://stackoverflow.com/questions/52653836/maven-shade-javafx-runtime-components-are-missing\">like this</a>.  Though linking jmods into a target image for a given platform using jlink is probably preferred."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1689932537,"post_id":76733812,"comment_id":135286180,"body_markdown":"@g00se media and JavaFX threads are different.  See the [Threads section of the JavaFX architecture documentation](https://docs.oracle.com/javase/8/javafx/get-started-tutorial/jfx-architecture.htm#A1107438).","body":"@g00se media and JavaFX threads are different.  See the <a href=\"https://docs.oracle.com/javase/8/javafx/get-started-tutorial/jfx-architecture.htm#A1107438\" rel=\"nofollow noreferrer\">Threads section of the JavaFX architecture documentation</a>."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1689933500,"post_id":76733812,"comment_id":135286361,"body_markdown":"@g00se The JavaFX runtime has a lifecycle for startup and shutdown documented in the `Application` javadoc.  When the JavaFX runtime is shutdown (`Platform.exit()` is one way), it will call stop on the application to release resources, then it will stop the JavaFX application, render and media threads. The code in the question does not do this, hence your shutdown issues.","body":"@g00se The JavaFX runtime has a lifecycle for startup and shutdown documented in the <code>Application</code> javadoc.  When the JavaFX runtime is shutdown (<code>Platform.exit()</code> is one way), it will call stop on the application to release resources, then it will stop the JavaFX application, render and media threads. The code in the question does not do this, hence your shutdown issues."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1689934194,"post_id":76733812,"comment_id":135286514,"body_markdown":"Summary, problems so far: Ran JavaFX from classpath not module path, called JavaFX code from AWT thread, did not initialize the JavaFX runtime,  did not shutdown the JavaFX runtime. did not include native components for required target platforms; native components were not placed on the Java library path due to incorrectly packaging and using the JavaFX system, tried to execute jar by double click using obsolete and incompatible Java 8 runtime, used jar built in git workspace that won’t match the target runtime architecture:","body":"Summary, problems so far: Ran JavaFX from classpath not module path, called JavaFX code from AWT thread, did not initialize the JavaFX runtime,  did not shutdown the JavaFX runtime. did not include native components for required target platforms; native components were not placed on the Java library path due to incorrectly packaging and using the JavaFX system, tried to execute jar by double click using obsolete and incompatible Java 8 runtime, used jar built in git workspace that won’t match the target runtime architecture:"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689935355,"post_id":76733812,"comment_id":135286715,"body_markdown":"*The code in the question does not do this, hence your shutdown issues.* @jewelsea If I call `Platform.exit()` the app stops without playing the file, which is why it&#39;s commented out","body":"<i>The code in the question does not do this, hence your shutdown issues.</i> @jewelsea If I call <code>Platform.exit()</code> the app stops without playing the file, which is why it&#39;s commented out"}],"answers":[{"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1689902827,"post_id":76734039,"comment_id":135282363,"body_markdown":"Interestingly, after `jlink`, the scheme is `jrt:/…`","body":"Interestingly, after <code>jlink</code>, the scheme is <code>jrt:&#47;…</code>"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1689911770,"post_id":76734039,"comment_id":135283063,"body_markdown":"@trashgod [`jrt:/`](https://openjdk.org/jeps/220) scheme is discussed in the section &quot;New URI scheme for naming stored modules, classes, and resources&quot; under &quot;JEP 220: Modular Run-Time Images&quot;.","body":"@trashgod <a href=\"https://openjdk.org/jeps/220\" rel=\"nofollow noreferrer\"><code>jrt:&#47;</code></a> scheme is discussed in the section &quot;New URI scheme for naming stored modules, classes, and resources&quot; under &quot;JEP 220: Modular Run-Time Images&quot;."},{"owner":{"account_id":19836578,"reputation":31,"user_id":22260806,"display_name":"kofiy"},"score":0,"creation_date":1689926038,"post_id":76734039,"comment_id":135285002,"body_markdown":"I get `jar:file:/C:/Users/Kofiy/test.jar!/sound/ambience/testSound.mp3`, what looks pretty much the same except for differences between Windows and Linux.","body":"I get <code>jar:file:&#47;C:&#47;Users&#47;Kofiy&#47;test.jar!&#47;sound&#47;ambience&#47;testSound.&zwnj;&#8203;mp3</code>, what looks pretty much the same except for differences between Windows and Linux."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1689926168,"post_id":76734039,"comment_id":135285019,"body_markdown":"That&#39;s what you want if running from jar","body":"That&#39;s what you want if running from jar"}],"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1689931936,"creation_date":1689891470,"answer_id":76734039,"question_id":76733812,"body_markdown":"This is not an answer but I&#39;m putting this out there to show you what happens for me. In both cases the sound plays and I use your `toExternalForm` to print to stdout. When running it from the jar:\r\n```\r\ngoose@t410:/tmp/sound$ java -cp /tmp/sound/target/sound-1.0-SNAPSHOT.jar fx.sound.App\r\njar:file:/tmp/sound/target/sound-1.0-SNAPSHOT.jar!/sound/ambience/testSound.mp3\r\n```\r\nthen with Maven:\r\n```\r\ngoose@t410:/tmp/sound$ mvnt javafx:run\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] -----------------------&lt; com.technojeeves:sound &gt;-----------------------\r\n[INFO] Building sound 1.0-SNAPSHOT\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] \r\n[INFO] &gt;&gt;&gt; javafx-maven-plugin:0.0.6:run (default-cli) &gt; process-classes @ sound &gt;&gt;&gt;\r\n[INFO] \r\n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ sound ---\r\n[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n[INFO] Copying 1 resource\r\n[INFO] \r\n[INFO] --- maven-compiler-plugin:3.8.0:compile (default-compile) @ sound ---\r\n[INFO] Nothing to compile - all classes are up to date\r\n[INFO] \r\n[INFO] &lt;&lt;&lt; javafx-maven-plugin:0.0.6:run (default-cli) &lt; process-classes @ sound &lt;&lt;&lt;\r\n[INFO] \r\n[INFO] \r\n[INFO] --- javafx-maven-plugin:0.0.6:run (default-cli) @ sound ---\r\n[INFO] Toolchain in javafx-maven-plugin null\r\n[WARNING] Module name not found in &lt;mainClass&gt;. Module name will be assumed from module-info.java\r\nfile:/tmp/sound/target/classes/sound/ambience/testSound.mp3\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  7.320 s\r\n[INFO] Finished at: 2023-07-20T23:13:32+01:00\r\n[INFO] ------------------------------------------------------------------------\r\ngoose@t410:/tmp/sound$ \r\n```\r\nCode used to run the clip:\r\n\r\n```\r\npackage main;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.application.Platform;\r\nimport javafx.stage.Stage;\r\nimport javafx.scene.media.AudioClip;\r\n\r\npublic class Main extends Application {\r\n    @Override\r\n    public void start(Stage stage) {\r\n        AudioClip clip = new AudioClip(Main.class.getResource(&quot;/sound/ambience/testSound.mp3&quot;).toExternalForm());\r\n        System.out.println(Main.class.getResource(&quot;/sound/ambience/testSound.mp3&quot;).toExternalForm());\r\n        clip.play();\r\n        //Platform.exit();\r\n    }\r\n\r\n\r\n    public static void main(String[] args) {\r\n        launch();\r\n    }\r\n\r\n}\r\n```","title":"JavaFX problem with playing audio: Unsupported protocol &quot;file&quot;","body":"<p>This is not an answer but I'm putting this out there to show you what happens for me. In both cases the sound plays and I use your <code>toExternalForm</code> to print to stdout. When running it from the jar:</p>\n<pre><code>goose@t410:/tmp/sound$ java -cp /tmp/sound/target/sound-1.0-SNAPSHOT.jar fx.sound.App\njar:file:/tmp/sound/target/sound-1.0-SNAPSHOT.jar!/sound/ambience/testSound.mp3\n</code></pre>\n<p>then with Maven:</p>\n<pre><code>goose@t410:/tmp/sound$ mvnt javafx:run\n[INFO] Scanning for projects...\n[INFO] \n[INFO] -----------------------&lt; com.technojeeves:sound &gt;-----------------------\n[INFO] Building sound 1.0-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] &gt;&gt;&gt; javafx-maven-plugin:0.0.6:run (default-cli) &gt; process-classes @ sound &gt;&gt;&gt;\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ sound ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Copying 1 resource\n[INFO] \n[INFO] --- maven-compiler-plugin:3.8.0:compile (default-compile) @ sound ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO] \n[INFO] &lt;&lt;&lt; javafx-maven-plugin:0.0.6:run (default-cli) &lt; process-classes @ sound &lt;&lt;&lt;\n[INFO] \n[INFO] \n[INFO] --- javafx-maven-plugin:0.0.6:run (default-cli) @ sound ---\n[INFO] Toolchain in javafx-maven-plugin null\n[WARNING] Module name not found in &lt;mainClass&gt;. Module name will be assumed from module-info.java\nfile:/tmp/sound/target/classes/sound/ambience/testSound.mp3\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  7.320 s\n[INFO] Finished at: 2023-07-20T23:13:32+01:00\n[INFO] ------------------------------------------------------------------------\ngoose@t410:/tmp/sound$ \n</code></pre>\n<p>Code used to run the clip:</p>\n<pre><code>package main;\n\nimport javafx.application.Application;\nimport javafx.application.Platform;\nimport javafx.stage.Stage;\nimport javafx.scene.media.AudioClip;\n\npublic class Main extends Application {\n    @Override\n    public void start(Stage stage) {\n        AudioClip clip = new AudioClip(Main.class.getResource(&quot;/sound/ambience/testSound.mp3&quot;).toExternalForm());\n        System.out.println(Main.class.getResource(&quot;/sound/ambience/testSound.mp3&quot;).toExternalForm());\n        clip.play();\n        //Platform.exit();\n    }\n\n\n    public static void main(String[] args) {\n        launch();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19836578,"reputation":31,"user_id":22260806,"display_name":"kofiy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689935490,"creation_date":1689935490,"answer_id":76737197,"question_id":76733812,"body_markdown":"In the end issue was in fact with JavaFX not being initialized.\r\n\r\nAs a simple test workaround I created very simple JavaFX app that just starts the actual JavaX application. \r\n\r\n\r\n\r\n(Although in the future I will probably rewrite a big piece of the code to avoid this VERY BAD workaround. (But at least it works for now...))","title":"JavaFX problem with playing audio: Unsupported protocol &quot;file&quot;","body":"<p>In the end issue was in fact with JavaFX not being initialized.</p>\n<p>As a simple test workaround I created very simple JavaFX app that just starts the actual JavaX application.</p>\n<p>(Although in the future I will probably rewrite a big piece of the code to avoid this VERY BAD workaround. (But at least it works for now...))</p>\n"}],"owner":{"account_id":19836578,"reputation":31,"user_id":22260806,"display_name":"kofiy"},"comment_count":24,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1689935490,"creation_date":1689888520,"question_id":76733812,"body_markdown":"I&#39;m trying to use javafx.scene.media.AudioClip to play audio included with .jar file, but I&#39;m constantly getting hit with this error:\r\n```java\r\nException in thread &quot;main&quot; java.lang.UnsupportedOperationException: Unsupported protocol &quot;file&quot;\r\n        at com.sun.media.jfxmedia.locator.Locator.&lt;init&gt;(Locator.java:241)\r\n        at com.sun.media.jfxmediaimpl.NativeMediaAudioClip.&lt;init&gt;(NativeMediaAudioClip.java:53)\r\n        at com.sun.media.jfxmediaimpl.NativeMediaAudioClip.load(NativeMediaAudioClip.java:63)\r\n        at com.sun.media.jfxmediaimpl.AudioClipProvider.load(AudioClipProvider.java:66)\r\n        at com.sun.media.jfxmedia.AudioClip.load(AudioClip.java:135)\r\n        at javafx.scene.media.AudioClip.&lt;init&gt;(AudioClip.java:83)\r\n        at main.Main.main(Main.java:77)\r\n```\r\n\r\n\r\nI simplified my code as much as possible, omitting abstractions and additional methods to make sure that the error is actually in the AudioClip:\r\n\r\n```java\r\npackage main;\r\n\r\nimport javafx.scene.media.AudioClip;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        AudioClip clip = new AudioClip(Main.class.getResource(&quot;/sound/ambience/testSound.mp3&quot;).toExternalForm());\r\n        clip.play();\r\n    }\r\n}\r\n```\r\n(I also tried using .toString() instead of toExternalForm())\r\n\r\nI made sure that the sound file is actually included in .jar in the correct path. For example this way of playing audio via JavaX AudioInputStream and Clip works just fine:\r\n```java\r\n    public static void main(String[] args) throws LineUnavailableException, IOException, UnsupportedAudioFileException, InterruptedException {\r\n        AudioInputStream ais = AudioSystem.getAudioInputStream(Main.class.getResource(&quot;/sound/ambience/randomScare.wav&quot;));\r\n        Clip clip = AudioSystem.getClip();\r\n        clip.open(ais);\r\n        ais.close();\r\n\r\n        clip.start();\r\n        Thread.sleep()\r\n    }\r\n``` \r\n(But I can&#39;t use this in final product, as it supports only uncompressed .wav format)\r\n\r\nI have no idea what could be causing that problem, as even [official javadoc](https://docs.oracle.com/javafx/2/api/javafx/scene/media/AudioClip.html#AudioClip(java.lang.String)) states:\r\n&gt; `source` - URL string from which to load the audio clip. This can be an HTTP, file or **jar source**.\r\n\r\n\r\nSome more information that possibly can help with finding solution:\r\nI&#39;m using `org.openjfx:javafx-media`, version `21-ea+24` from maven central repository (and I also tried switching back to version `20.0.1`):\r\n```xml\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\r\n            &lt;version&gt;21-ea+24&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nMaven project is setup with java version 1.17:\r\n```xml\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;1.17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.17&lt;/maven.compiler.target&gt;\r\n        &lt;exec.mainClass&gt;main.Main&lt;/exec.mainClass&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    &lt;/properties&gt;\r\n```\r\nAnd I run it using Zulu 18 (`Zulu18.32+13-CA (build 18.0.2.1+1)`) on Windows 10 (`Build 19044`)\r\n\r\nI will appreciate any help (and hope that I&#39;ve given all needed information).\r\n\r\n**Update:** I tried running the .jar build with github workspaces (that .jar worked just fine for my friend), and got different error:\r\n```java\r\nException in thread &quot;AWT-EventQueue-0&quot; java.lang.UnsatisfiedLinkError: no glib-lite in java.library.path: C:\\Program Files\\Zulu\\zulu-18\\bin;C:\\Windows\\Sun\\Java\\bin;C:\\Windows\\system32;C:\\Windows;C:\\Program Files\\Zulu\\zulu-18\\bin\\;C:\\Program Files\\Zulu\\zulu-19\\bin\\;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Program Files\\Common Files\\Oracle\\Java\\javapath;C:\\ProgramData\\Oracle\\Java\\jdk-16.0.1;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files\\Common Files\\Autodesk Shared\\;C:\\Program Files\\dotnet\\;C:\\Program Files\\spwn\\;C:\\Program Files\\Kotlin\\kotlinc_1_6_10;C:\\Program Files\\Kotlin\\kotlinc_1_6_10\\bin;C:\\Program Files\\Kotlin\\konaco_1_6_10;C:\\Program Files\\Kotlin\\konaco_1_6_10\\bin;C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\ffmpeg\\bin;C:\\Program Files\\Git\\cmd;C:\\Program Files\\PuTTY\\;C:\\Program Files\\NVIDIA Corporation\\NVIDIA NvDLISR;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Python\\Python310\\Scripts\\;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Python\\Python310\\;C:\\Users\\Kofiy\\AppData\\Local\\Microsoft\\WindowsApps;C:\\jdk-16.0.1\\bin;C:\\jdk-16.0.1\\bin\\;C:\\jdk-16.0.1\\bin\\javac.exe;C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2021.1.2\\bin;C:\\Users\\Kofiy\\AppData\\Local\\GitHubDesktop\\bin;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Program Files\\JetBrains\\PyCharm Community Edition 2021.3.2\\bin;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Python\\Python310;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Python\\Python310\\Scripts;C:\\Users\\Kofiy\\.dotnet\\tools;.\r\n        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2434)\r\n        at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:848)\r\n        at java.base/java.lang.System.loadLibrary(System.java:2015)\r\n        at com.sun.glass.utils.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:168)\r\n        at com.sun.glass.utils.NativeLibLoader.loadLibrary(NativeLibLoader.java:56)\r\n        at com.sun.media.jfxmediaimpl.NativeMediaManager.lambda$new$0(NativeMediaManager.java:111)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\r\n        at com.sun.media.jfxmediaimpl.NativeMediaManager.&lt;init&gt;(NativeMediaManager.java:108)\r\n        at com.sun.media.jfxmediaimpl.NativeMediaManager$NativeMediaManagerInitializer.&lt;clinit&gt;(NativeMediaManager.java:78)\r\n        at com.sun.media.jfxmediaimpl.NativeMediaManager.getDefaultInstance(NativeMediaManager.java:90)\r\n        at com.sun.media.jfxmedia.MediaManager.canPlayProtocol(MediaManager.java:78)\r\n        at com.sun.media.jfxmedia.locator.Locator.&lt;init&gt;(Locator.java:240)\r\n        at com.sun.media.jfxmediaimpl.NativeMediaAudioClip.&lt;init&gt;(NativeMediaAudioClip.java:53)\r\n        at com.sun.media.jfxmediaimpl.NativeMediaAudioClip.load(NativeMediaAudioClip.java:63)\r\n        at com.sun.media.jfxmediaimpl.AudioClipProvider.load(AudioClipProvider.java:66)\r\n        at com.sun.media.jfxmedia.AudioClip.load(AudioClip.java:135)\r\n        at javafx.scene.media.AudioClip.&lt;init&gt;(AudioClip.java:83)\r\n        at main.Sound.playMP3(Sound.java:222)\r\n        at main.GamePanel.startGame(GamePanel.java:1624)\r\n        at main.KeyHandler.keyPressed(KeyHandler.java:126)\r\n        at java.desktop/java.awt.Component.processKeyEvent(Component.java:6574)\r\n        at java.desktop/javax.swing.JComponent.processKeyEvent(JComponent.java:2905)\r\n        at java.desktop/java.awt.Component.processEvent(Component.java:6393)\r\n        at java.desktop/java.awt.Container.processEvent(Container.java:2266)\r\n        at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4991)\r\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\r\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4823)\r\n        at java.desktop/java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1952)\r\n        at java.desktop/java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:883)\r\n        at java.desktop/java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:1146)\r\n        at java.desktop/java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:1020)\r\n        at java.desktop/java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:848)\r\n        at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4872)\r\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\r\n        at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\r\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4823)\r\n        at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:775)\r\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)\r\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:97)\r\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:747)\r\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n        at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:744)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n        at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n```\r\n(((*The error in now in AWT-EventQueue-0 because it&#39;s full version of the project and not mine simplified code that I wrote earlier*)))\r\n\r\nAnd I also tried running .jar with doubleclicking on it, and both .jar built on my system via IntelJ IDEA and .jar built on GitHub workspaces showed this error:\r\n[![Error: A JNI error has occurred, please check your installation and try again][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mzN3U.png\r\n**PS:** This JNI visual error actually appears whenever I double click on **any .jar**, what&#39;s also very strange \r\n**PS 2:** The JNI visual error is because I messed up and had Java 1.8 as default JRE\r\n\r\n***So it does in fact look like the problem with my installation, so I will just try reinstalling JDK, verifying system files etc.***","title":"JavaFX problem with playing audio: Unsupported protocol &quot;file&quot;","body":"<p>I'm trying to use javafx.scene.media.AudioClip to play audio included with .jar file, but I'm constantly getting hit with this error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException: Unsupported protocol &quot;file&quot;\n        at com.sun.media.jfxmedia.locator.Locator.&lt;init&gt;(Locator.java:241)\n        at com.sun.media.jfxmediaimpl.NativeMediaAudioClip.&lt;init&gt;(NativeMediaAudioClip.java:53)\n        at com.sun.media.jfxmediaimpl.NativeMediaAudioClip.load(NativeMediaAudioClip.java:63)\n        at com.sun.media.jfxmediaimpl.AudioClipProvider.load(AudioClipProvider.java:66)\n        at com.sun.media.jfxmedia.AudioClip.load(AudioClip.java:135)\n        at javafx.scene.media.AudioClip.&lt;init&gt;(AudioClip.java:83)\n        at main.Main.main(Main.java:77)\n</code></pre>\n<p>I simplified my code as much as possible, omitting abstractions and additional methods to make sure that the error is actually in the AudioClip:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package main;\n\nimport javafx.scene.media.AudioClip;\n\npublic class Main {\n    public static void main(String[] args) {\n        AudioClip clip = new AudioClip(Main.class.getResource(&quot;/sound/ambience/testSound.mp3&quot;).toExternalForm());\n        clip.play();\n    }\n}\n</code></pre>\n<p>(I also tried using .toString() instead of toExternalForm())</p>\n<p>I made sure that the sound file is actually included in .jar in the correct path. For example this way of playing audio via JavaX AudioInputStream and Clip works just fine:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main(String[] args) throws LineUnavailableException, IOException, UnsupportedAudioFileException, InterruptedException {\n        AudioInputStream ais = AudioSystem.getAudioInputStream(Main.class.getResource(&quot;/sound/ambience/randomScare.wav&quot;));\n        Clip clip = AudioSystem.getClip();\n        clip.open(ais);\n        ais.close();\n\n        clip.start();\n        Thread.sleep()\n    }\n</code></pre>\n<p>(But I can't use this in final product, as it supports only uncompressed .wav format)</p>\n<p>I have no idea what could be causing that problem, as even <a href=\"https://docs.oracle.com/javafx/2/api/javafx/scene/media/AudioClip.html#AudioClip(java.lang.String)\" rel=\"nofollow noreferrer\">official javadoc</a> states:</p>\n<blockquote>\n<p><code>source</code> - URL string from which to load the audio clip. This can be an HTTP, file or <strong>jar source</strong>.</p>\n</blockquote>\n<p>Some more information that possibly can help with finding solution:\nI'm using <code>org.openjfx:javafx-media</code>, version <code>21-ea+24</code> from maven central repository (and I also tried switching back to version <code>20.0.1</code>):</p>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\n            &lt;version&gt;21-ea+24&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Maven project is setup with java version 1.17:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;1.17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.17&lt;/maven.compiler.target&gt;\n        &lt;exec.mainClass&gt;main.Main&lt;/exec.mainClass&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;/properties&gt;\n</code></pre>\n<p>And I run it using Zulu 18 (<code>Zulu18.32+13-CA (build 18.0.2.1+1)</code>) on Windows 10 (<code>Build 19044</code>)</p>\n<p>I will appreciate any help (and hope that I've given all needed information).</p>\n<p><strong>Update:</strong> I tried running the .jar build with github workspaces (that .jar worked just fine for my friend), and got different error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.UnsatisfiedLinkError: no glib-lite in java.library.path: C:\\Program Files\\Zulu\\zulu-18\\bin;C:\\Windows\\Sun\\Java\\bin;C:\\Windows\\system32;C:\\Windows;C:\\Program Files\\Zulu\\zulu-18\\bin\\;C:\\Program Files\\Zulu\\zulu-19\\bin\\;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Program Files\\Common Files\\Oracle\\Java\\javapath;C:\\ProgramData\\Oracle\\Java\\jdk-16.0.1;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files\\Common Files\\Autodesk Shared\\;C:\\Program Files\\dotnet\\;C:\\Program Files\\spwn\\;C:\\Program Files\\Kotlin\\kotlinc_1_6_10;C:\\Program Files\\Kotlin\\kotlinc_1_6_10\\bin;C:\\Program Files\\Kotlin\\konaco_1_6_10;C:\\Program Files\\Kotlin\\konaco_1_6_10\\bin;C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\ffmpeg\\bin;C:\\Program Files\\Git\\cmd;C:\\Program Files\\PuTTY\\;C:\\Program Files\\NVIDIA Corporation\\NVIDIA NvDLISR;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Python\\Python310\\Scripts\\;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Python\\Python310\\;C:\\Users\\Kofiy\\AppData\\Local\\Microsoft\\WindowsApps;C:\\jdk-16.0.1\\bin;C:\\jdk-16.0.1\\bin\\;C:\\jdk-16.0.1\\bin\\javac.exe;C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2021.1.2\\bin;C:\\Users\\Kofiy\\AppData\\Local\\GitHubDesktop\\bin;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Program Files\\JetBrains\\PyCharm Community Edition 2021.3.2\\bin;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Python\\Python310;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Python\\Python310\\Scripts;C:\\Users\\Kofiy\\.dotnet\\tools;.\n        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2434)\n        at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:848)\n        at java.base/java.lang.System.loadLibrary(System.java:2015)\n        at com.sun.glass.utils.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:168)\n        at com.sun.glass.utils.NativeLibLoader.loadLibrary(NativeLibLoader.java:56)\n        at com.sun.media.jfxmediaimpl.NativeMediaManager.lambda$new$0(NativeMediaManager.java:111)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\n        at com.sun.media.jfxmediaimpl.NativeMediaManager.&lt;init&gt;(NativeMediaManager.java:108)\n        at com.sun.media.jfxmediaimpl.NativeMediaManager$NativeMediaManagerInitializer.&lt;clinit&gt;(NativeMediaManager.java:78)\n        at com.sun.media.jfxmediaimpl.NativeMediaManager.getDefaultInstance(NativeMediaManager.java:90)\n        at com.sun.media.jfxmedia.MediaManager.canPlayProtocol(MediaManager.java:78)\n        at com.sun.media.jfxmedia.locator.Locator.&lt;init&gt;(Locator.java:240)\n        at com.sun.media.jfxmediaimpl.NativeMediaAudioClip.&lt;init&gt;(NativeMediaAudioClip.java:53)\n        at com.sun.media.jfxmediaimpl.NativeMediaAudioClip.load(NativeMediaAudioClip.java:63)\n        at com.sun.media.jfxmediaimpl.AudioClipProvider.load(AudioClipProvider.java:66)\n        at com.sun.media.jfxmedia.AudioClip.load(AudioClip.java:135)\n        at javafx.scene.media.AudioClip.&lt;init&gt;(AudioClip.java:83)\n        at main.Sound.playMP3(Sound.java:222)\n        at main.GamePanel.startGame(GamePanel.java:1624)\n        at main.KeyHandler.keyPressed(KeyHandler.java:126)\n        at java.desktop/java.awt.Component.processKeyEvent(Component.java:6574)\n        at java.desktop/javax.swing.JComponent.processKeyEvent(JComponent.java:2905)\n        at java.desktop/java.awt.Component.processEvent(Component.java:6393)\n        at java.desktop/java.awt.Container.processEvent(Container.java:2266)\n        at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4991)\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4823)\n        at java.desktop/java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1952)\n        at java.desktop/java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:883)\n        at java.desktop/java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:1146)\n        at java.desktop/java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:1020)\n        at java.desktop/java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:848)\n        at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4872)\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\n        at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4823)\n        at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:775)\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:97)\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:747)\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n        at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:744)\n        at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n        at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n</code></pre>\n<p>(((<em>The error in now in AWT-EventQueue-0 because it's full version of the project and not mine simplified code that I wrote earlier</em>)))</p>\n<p>And I also tried running .jar with doubleclicking on it, and both .jar built on my system via IntelJ IDEA and .jar built on GitHub workspaces showed this error:\n<a href=\"https://i.stack.imgur.com/mzN3U.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mzN3U.png\" alt=\"Error: A JNI error has occurred, please check your installation and try again\" /></a></p>\n<p><strong>PS:</strong> This JNI visual error actually appears whenever I double click on <strong>any .jar</strong>, what's also very strange\n<strong>PS 2:</strong> The JNI visual error is because I messed up and had Java 1.8 as default JRE</p>\n<p><em><strong>So it does in fact look like the problem with my installation, so I will just try reinstalling JDK, verifying system files etc.</strong></em></p>\n"},{"tags":["java","hibernate","jpa","spring-boot","h2"],"comments":[{"owner":{"account_id":3795830,"reputation":6437,"user_id":3150948,"accept_rate":70,"display_name":"Amer Qarabsa"},"score":0,"creation_date":1500982747,"post_id":45302132,"comment_id":77565592,"body_markdown":"select * from game returns nothing means there is no data, not there is not table","body":"select * from game returns nothing means there is no data, not there is not table"},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1500982838,"post_id":45302132,"comment_id":77565646,"body_markdown":"how is there no data if the parameters are binded? the table isn&#39;t there because Hibernate refuses to create it, since something&#39;s not right in the data.","body":"how is there no data if the parameters are binded? the table isn&#39;t there because Hibernate refuses to create it, since something&#39;s not right in the data."},{"owner":{"account_id":3795830,"reputation":6437,"user_id":3150948,"accept_rate":70,"display_name":"Amer Qarabsa"},"score":0,"creation_date":1500982922,"post_id":45302132,"comment_id":77565709,"body_markdown":"can you share your package structure?","body":"can you share your package structure?"},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1500983052,"post_id":45302132,"comment_id":77565813,"body_markdown":"sure: http://i.imgur.com/3hMQEUT.png","body":"sure: <a href=\"http://i.imgur.com/3hMQEUT.png\" rel=\"nofollow noreferrer\">i.imgur.com/3hMQEUT.png</a>"},{"owner":{"account_id":10734404,"reputation":1062,"user_id":7899430,"accept_rate":50,"display_name":"PySaad"},"score":0,"creation_date":1500983073,"post_id":45302132,"comment_id":77565829,"body_markdown":"Add dialect property and use create not update. I know update should create the table but at least give a try","body":"Add dialect property and use create not update. I know update should create the table but at least give a try"},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1500983359,"post_id":45302132,"comment_id":77566034,"body_markdown":"like that? spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.hibernate.ddl-auto = create","body":"like that? spring.jpa.database-platform=org.hibernate.dialect.H2Dialect spring.jpa.hibernate.ddl-auto = create"},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1500983369,"post_id":45302132,"comment_id":77566047,"body_markdown":"didn&#39;t make a difference, eh","body":"didn&#39;t make a difference, eh"},{"owner":{"account_id":39327,"reputation":1213,"user_id":113359,"display_name":"mikemil"},"score":0,"creation_date":1523112509,"post_id":45302132,"comment_id":86430555,"body_markdown":"Found this while looking at something similiar - not sure if this was resolved but I had problems setting the database name and couldn&#39;t see the tables, but if I looked in testdb for the in-memory database, I found my tables and data.","body":"Found this while looking at something similiar - not sure if this was resolved but I had problems setting the database name and couldn&#39;t see the tables, but if I looked in testdb for the in-memory database, I found my tables and data."},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1523260960,"post_id":45302132,"comment_id":86470015,"body_markdown":"it was resolved, thanks to the answer and comments below my post","body":"it was resolved, thanks to the answer and comments below my post"}],"answers":[{"comments":[{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1500983959,"post_id":45302489,"comment_id":77566518,"body_markdown":"2017-07-25 13:58:41.311 ERROR 10690 --- [  restartedMain] o.a.tomcat.jdbc.pool.ConnectionPool      : Unable to create initial connections of pool.\n\norg.h2.jdbc.JdbcSQLException: Connection is broken: &quot;java.net.ConnectException: Connection refused (Connection refused): localhost&quot; [90067-193]","body":"2017-07-25 13:58:41.311 ERROR 10690 --- [  restartedMain] o.a.tomcat.jdbc.pool.ConnectionPool      : Unable to create initial connections of pool.  org.h2.jdbc.JdbcSQLException: Connection is broken: &quot;java.net.ConnectException: Connection refused (Connection refused): localhost&quot; [90067-193]"},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1500983983,"post_id":45302489,"comment_id":77566538,"body_markdown":"/~/test is because I&#39;m testing the db under localhost:8080/test?","body":"/~/test is because I&#39;m testing the db under localhost:8080/test?"},{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":0,"creation_date":1500984105,"post_id":45302489,"comment_id":77566627,"body_markdown":"No it doesn&#39;t. I think that you have an already opened connection. Try to kill Spring Boot processes that are executing. And try again.","body":"No it doesn&#39;t. I think that you have an already opened connection. Try to kill Spring Boot processes that are executing. And try again."},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1500984208,"post_id":45302489,"comment_id":77566728,"body_markdown":"I&#39;ve stopped my app in IntelliJ and killed Tomcat in Terminal - still errors with &#39;connection refused&#39;, though.","body":"I&#39;ve stopped my app in IntelliJ and killed Tomcat in Terminal - still errors with &#39;connection refused&#39;, though."},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":1,"creation_date":1500984586,"post_id":45302489,"comment_id":77567055,"body_markdown":"I switched to the following: spring.datasource.url=jdbc:h2:file:~/h2/test","body":"I switched to the following: spring.datasource.url=jdbc:h2:file:~/h2/test"},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1500984602,"post_id":45302489,"comment_id":77567072,"body_markdown":"With the result:\n2017-07-25 14:08:42.511 DEBUG 11125 --- [  restartedMain] org.hibernate.SQL                        : create table game (id bigint not null, aggregated_rating double, cloudinary_id varchar(255), height integer, url varchar(255), width integer, first_release_date bigint, name varchar(255), storyline varchar(4000), primary key (id))\nHibernate: create table game (id bigint not null, aggregated_rating double, cloudinary_id varchar(255), height integer, url varchar(255), width integer, first_release_date bigint, name varchar(255), storyline varchar(4000), primary key (id))","body":"With the result: 2017-07-25 14:08:42.511 DEBUG 11125 --- [  restartedMain] org.hibernate.SQL                        : create table game (id bigint not null, aggregated_rating double, cloudinary_id varchar(255), height integer, url varchar(255), width integer, first_release_date bigint, name varchar(255), storyline varchar(4000), primary key (id)) Hibernate: create table game (id bigint not null, aggregated_rating double, cloudinary_id varchar(255), height integer, url varchar(255), width integer, first_release_date bigint, name varchar(255), storyline varchar(4000), primary key (id))"},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1500984626,"post_id":45302489,"comment_id":77567097,"body_markdown":"It looks promising, but I&#39;m still not able to access the table. Maybe lower-case is the problem now?","body":"It looks promising, but I&#39;m still not able to access the table. Maybe lower-case is the problem now?"},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1500985463,"post_id":45302489,"comment_id":77567821,"body_markdown":"after switching to file? the same, SELECT * FROM GAME returns me: SELECT * FROM GAME; Table &quot;GAME&quot; not found; SQL statement: SELECT * FROM GAME [42102-193] 42S02/42102 (Help)","body":"after switching to file? the same, SELECT * FROM GAME returns me: SELECT * FROM GAME; Table &quot;GAME&quot; not found; SQL statement: SELECT * FROM GAME [42102-193] 42S02/42102 (Help)"},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":2,"creation_date":1500986341,"post_id":45302489,"comment_id":77568560,"body_markdown":"turns out I had to log in to H2 with the same URL as specified in application.properties - everything&#39;s working, thanks a lot!","body":"turns out I had to log in to H2 with the same URL as specified in application.properties - everything&#39;s working, thanks a lot!"},{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":2,"creation_date":1500986510,"post_id":45302489,"comment_id":77568709,"body_markdown":"With the same URL, it is of course much better :) You are welcome.","body":"With the same URL, it is of course much better :) You are welcome."}],"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":10,"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1544964806,"creation_date":1500983593,"answer_id":45302489,"question_id":45302132,"body_markdown":"&gt; It looks like data is binded to parameters, but in H2 console SELECT *\r\n&gt; FROM GAME returns me nothing. The table doesn&#39;t exist.\r\n\r\nYou are using an `in-memory` instance of H2 :\r\n\r\n    spring.datasource.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1\r\n\r\nIn this mode, you cannot see the content of the changes from another client that which one that started the  `in-memory` database.&lt;br&gt;\r\nTo see the changes from other clients, you have to use the TCP mode.&lt;br&gt;\r\n\r\nYou have two solutions :\r\n\r\n- using a file to persist the instance of H2.\r\n\r\n&gt; **Where are the Database Files Stored?**\r\n&gt; \r\n&gt; When using database URLs like jdbc:h2:~/test, the database is stored\r\n&gt; in the user directory. For Windows, this is usually C:\\Documents and\r\n&gt; Settings\\&lt;userName&gt; or C:\\Users\\&lt;userName&gt;. If the base directory is\r\n&gt; not set (as in jdbc:h2:./test), the database files are stored in the\r\n&gt; directory where the application is started (the current working\r\n&gt; directory). When using the H2 Console application from the start menu,\r\n&gt; this is &lt;Installation Directory&gt;/bin. The base directory can be set in\r\n&gt; the database URL. A fixed or relative path can be used. When using the\r\n&gt; URL jdbc:h2:file:./data/sample, the database is stored in the\r\n&gt; directory data (relative to the current working directory). The\r\n&gt; directory is created automatically if it does not yet exist. It is\r\n&gt; also possible to use the fully qualified directory name (and for\r\n&gt; Windows, drive name). Example: jdbc:h2:file:C:/data/test\r\n\r\n\r\n- keeping to use an in-memory instance but using the TCP mode.\r\n\r\nReplace :\r\n\r\n    spring.datasource.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1\r\n\r\nby :\r\n\r\n    spring.datasource.url=jdbc:h2:tcp://localhost/~/test\r\n\r\n\r\nGenerally, I switch to this mode during JPA entity unit testing when I really want to know which was inserted in the database.&lt;br&gt;\r\n\r\nFrom [the official documentation][1] :\r\n\r\n\r\n&gt; **In-Memory Databases**\r\n&gt; \r\n&gt; For certain use cases (for example: rapid prototyping, testing, high\r\n&gt; performance operations, read-only databases), it may not be required\r\n&gt; to persist data, or persist changes to the data. This database\r\n&gt; supports the in-memory mode, where the data is not persisted.\r\n&gt;...\r\n\r\n&gt; In some cases, only one connection to a in-memory database is\r\n&gt; required. This means the database to be opened is private. In this\r\n&gt; case, the database URL is jdbc:h2:mem: Opening two connections within\r\n&gt; the same virtual machine means opening two different (private)\r\n&gt; databases.\r\n&gt; \r\n&gt; Sometimes multiple connections to the same in-memory database are\r\n&gt; required. In this case, the database URL must include a name. Example:\r\n&gt; jdbc:h2:mem:db1. Accessing the same database using this URL only works\r\n&gt; within the same virtual machine and class loader environment.\r\n&gt; \r\n\r\n&gt; **To access an in-memory database from another process or from another\r\n&gt; computer, you need to start a TCP server in the same process as the\r\n&gt; in-memory database was created. The other processes then need to\r\n&gt; access the database over TCP/IP or TLS, using a database URL such as:\r\n&gt; jdbc:h2:tcp://localhost/mem:db1.**\r\n\r\n\r\n----------\r\n\r\n\r\n**Alternative to standalone H2 Console : using the H2 console accessible from the Spring Boot application**    \r\n\r\nIndeed the H2 database provides a browser-based console that [Spring Boot can\r\nauto-configure for you][2]. The console is auto-configured when these\r\nconditions are met :\r\n\r\n&gt; \r\n&gt; - You are developing a servlet-based web application.\r\n&gt; - com.h2database:h2 is on the classpath.\r\n&gt; - You are using Spring Boot’s developer tools.\r\n\r\nSo it means that will be accessible only in dev. What generally you want.  \r\n\r\nBy default, the console is available at `/h2-console`.  \r\nSet the `spring.h2.console.path` property to change that.\r\n\r\n\r\n  [1]: http://www.h2database.com/html/features.html\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-sql.html#boot-features-sql-h2-console","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<blockquote>\n  <p>It looks like data is binded to parameters, but in H2 console SELECT *\n  FROM GAME returns me nothing. The table doesn't exist.</p>\n</blockquote>\n\n<p>You are using an <code>in-memory</code> instance of H2 :</p>\n\n<pre><code>spring.datasource.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1\n</code></pre>\n\n<p>In this mode, you cannot see the content of the changes from another client that which one that started the  <code>in-memory</code> database.<br>\nTo see the changes from other clients, you have to use the TCP mode.<br></p>\n\n<p>You have two solutions :</p>\n\n<ul>\n<li>using a file to persist the instance of H2.</li>\n</ul>\n\n<blockquote>\n  <p><strong>Where are the Database Files Stored?</strong></p>\n  \n  <p>When using database URLs like jdbc:h2:~/test, the database is stored\n  in the user directory. For Windows, this is usually C:\\Documents and\n  Settings\\ or C:\\Users\\. If the base directory is\n  not set (as in jdbc:h2:./test), the database files are stored in the\n  directory where the application is started (the current working\n  directory). When using the H2 Console application from the start menu,\n  this is /bin. The base directory can be set in\n  the database URL. A fixed or relative path can be used. When using the\n  URL jdbc:h2:file:./data/sample, the database is stored in the\n  directory data (relative to the current working directory). The\n  directory is created automatically if it does not yet exist. It is\n  also possible to use the fully qualified directory name (and for\n  Windows, drive name). Example: jdbc:h2:file:C:/data/test</p>\n</blockquote>\n\n<ul>\n<li>keeping to use an in-memory instance but using the TCP mode.</li>\n</ul>\n\n<p>Replace :</p>\n\n<pre><code>spring.datasource.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1\n</code></pre>\n\n<p>by :</p>\n\n<pre><code>spring.datasource.url=jdbc:h2:tcp://localhost/~/test\n</code></pre>\n\n<p>Generally, I switch to this mode during JPA entity unit testing when I really want to know which was inserted in the database.<br></p>\n\n<p>From <a href=\"http://www.h2database.com/html/features.html\" rel=\"noreferrer\">the official documentation</a> :</p>\n\n<blockquote>\n  <p><strong>In-Memory Databases</strong></p>\n  \n  <p>For certain use cases (for example: rapid prototyping, testing, high\n  performance operations, read-only databases), it may not be required\n  to persist data, or persist changes to the data. This database\n  supports the in-memory mode, where the data is not persisted.\n  ...</p>\n  \n  <p>In some cases, only one connection to a in-memory database is\n  required. This means the database to be opened is private. In this\n  case, the database URL is jdbc:h2:mem: Opening two connections within\n  the same virtual machine means opening two different (private)\n  databases.</p>\n  \n  <p>Sometimes multiple connections to the same in-memory database are\n  required. In this case, the database URL must include a name. Example:\n  jdbc:h2:mem:db1. Accessing the same database using this URL only works\n  within the same virtual machine and class loader environment.</p>\n  \n  <p><strong>To access an in-memory database from another process or from another\n  computer, you need to start a TCP server in the same process as the\n  in-memory database was created. The other processes then need to\n  access the database over TCP/IP or TLS, using a database URL such as:\n  jdbc:h2:tcp://localhost/mem:db1.</strong></p>\n</blockquote>\n\n<hr>\n\n<p><strong>Alternative to standalone H2 Console : using the H2 console accessible from the Spring Boot application</strong>    </p>\n\n<p>Indeed the H2 database provides a browser-based console that <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-sql.html#boot-features-sql-h2-console\" rel=\"noreferrer\">Spring Boot can\nauto-configure for you</a>. The console is auto-configured when these\nconditions are met :</p>\n\n<blockquote>\n  <ul>\n  <li>You are developing a servlet-based web application.</li>\n  <li>com.h2database:h2 is on the classpath.</li>\n  <li>You are using Spring Boot’s developer tools.</li>\n  </ul>\n</blockquote>\n\n<p>So it means that will be accessible only in dev. What generally you want.  </p>\n\n<p>By default, the console is available at <code>/h2-console</code>.<br>\nSet the <code>spring.h2.console.path</code> property to change that.</p>\n"},{"comments":[{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1524674256,"post_id":49998098,"comment_id":87070815,"body_markdown":"The problem was solved already, year ago (like I&#39;ve written in the comments to the accepted answer back then). Thanks for your help nevertheless.","body":"The problem was solved already, year ago (like I&#39;ve written in the comments to the accepted answer back then). Thanks for your help nevertheless."},{"owner":{"account_id":126486,"reputation":4659,"user_id":323015,"accept_rate":43,"display_name":"subhashis"},"score":9,"creation_date":1540036586,"post_id":49998098,"comment_id":92721508,"body_markdown":"VapeKop, People add answers after the problem was solved because of change in versions and several other reason. So a new post may help some one else.","body":"VapeKop, People add answers after the problem was solved because of change in versions and several other reason. So a new post may help some one else."}],"tags":[],"owner":{"account_id":6967899,"reputation":1320,"user_id":5345215,"display_name":"Ashlin Karkada"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1524562226,"creation_date":1524562226,"answer_id":49998098,"question_id":45302132,"body_markdown":"Check if you main class(Spring boot application class) is able to scan the entities defined. This usually happens when the entities are in a different package than that of the main class.","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>Check if you main class(Spring boot application class) is able to scan the entities defined. This usually happens when the entities are in a different package than that of the main class.</p>\n"},{"tags":[],"owner":{"account_id":1373820,"reputation":1589,"user_id":1308236,"accept_rate":79,"display_name":"Dev M"},"comment_count":0,"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1532172438,"creation_date":1532172438,"answer_id":51455582,"question_id":45302132,"body_markdown":"Just go to the H2 console for example at: http://localhost:9090/h2-console/\r\nand In the JDBC URL field, type **jdbc:h2:mem:testdb** to configure the connection to the testdb database in RAM.","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>Just go to the H2 console for example at: <a href=\"http://localhost:9090/h2-console/\" rel=\"noreferrer\">http://localhost:9090/h2-console/</a>\nand In the JDBC URL field, type <strong>jdbc:h2:mem:testdb</strong> to configure the connection to the testdb database in RAM.</p>\n"},{"comments":[{"owner":{"account_id":6484127,"reputation":9361,"user_id":5020253,"accept_rate":88,"display_name":"SDekov"},"score":0,"creation_date":1646243745,"post_id":60195141,"comment_id":126077234,"body_markdown":"Had to scroll way too far down for that. Thanks!","body":"Had to scroll way too far down for that. Thanks!"}],"tags":[],"owner":{"account_id":17749239,"reputation":131,"user_id":12887824,"display_name":"Avinash Pratap Singh"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1581536433,"creation_date":1581533648,"answer_id":60195141,"question_id":45302132,"body_markdown":"Putting this line: `spring.jpa.hibernate.ddl-auto = update` in your application.properties file start population data in in-memory database and in file based database for H2 data-base.Hope this helps anyone.","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>Putting this line: <code>spring.jpa.hibernate.ddl-auto = update</code> in your application.properties file start population data in in-memory database and in file based database for H2 data-base.Hope this helps anyone.</p>\n"},{"tags":[],"owner":{"account_id":18065529,"reputation":41,"user_id":13131528,"display_name":"Ganesh Gope"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1585262752,"creation_date":1585255220,"answer_id":60875766,"question_id":45302132,"body_markdown":"use `@EntityScan(&quot;com.db.jpasample.entity&quot;)`\r\n     \r\n    @SpringBootApplication\r\n    @EntityScan(&quot;com.db.jpasample.entity&quot;)\r\n    public class GsoftApplication {\r\n      \r\n   \t  public static void main(String[] args) {\r\n      \tSpringApplication.run(GsoftApplication.class, args);\r\n      }\r\n      \r\n    }\r\n\r\n\r\n----------\r\n\r\n\r\napplication.properties\r\n\r\n    server.port = 9090\r\n    spring.h2.console.enabled=true\r\n    spring.datasource.platform=h2\r\n    spring.datasource.url=jdbc:h2:mem:socialdb;DB_CLOSE_DELAY=-1\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\n    spring.jpa.hibernate.ddl-auto = create\r\n\r\n","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>use <code>@EntityScan(\"com.db.jpasample.entity\")</code></p>\n\n<pre><code>@SpringBootApplication\n@EntityScan(\"com.db.jpasample.entity\")\npublic class GsoftApplication {\n\n  public static void main(String[] args) {\n    SpringApplication.run(GsoftApplication.class, args);\n  }\n\n}\n</code></pre>\n\n<hr>\n\n<p>application.properties</p>\n\n<pre><code>server.port = 9090\nspring.h2.console.enabled=true\nspring.datasource.platform=h2\nspring.datasource.url=jdbc:h2:mem:socialdb;DB_CLOSE_DELAY=-1\nspring.datasource.driverClassName=org.h2.Driver\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.hibernate.ddl-auto = create\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14053388,"reputation":33,"user_id":10151486,"display_name":"Shubham Kature"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627324990,"creation_date":1627305624,"answer_id":68530638,"question_id":45302132,"body_markdown":"In the `application.properties` file, try to use `spring.jpa.defer-datasource-initialization=true`.\r\n\r\n","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>In the <code>application.properties</code> file, try to use <code>spring.jpa.defer-datasource-initialization=true</code>.</p>\n"},{"tags":[],"owner":{"account_id":18537481,"reputation":1557,"user_id":13506812,"display_name":"abhinav kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634817493,"creation_date":1634817493,"answer_id":69661572,"question_id":45302132,"body_markdown":"Same problem i faced and i added below changes to resolve it,\r\n\r\ni added below version for H2 dependencies in **pom.xml**\r\n\r\n \r\n\r\n        &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.4.193&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n\r\nAnd added below configuration in **application.properties** file\r\n\r\n    spring.h2.console.enabled=true\r\n    spring.datasource.platform=h2\r\n    spring.datasource.driverClassName = org.h2.Driver\r\n    spring.datasource.url=jdbc:h2:file:~/test;\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=\r\n","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>Same problem i faced and i added below changes to resolve it,</p>\n<p>i added below version for H2 dependencies in <strong>pom.xml</strong></p>\n<pre><code>    &lt;dependency&gt;\n    &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n    &lt;artifactId&gt;h2&lt;/artifactId&gt;\n    &lt;version&gt;1.4.193&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>And added below configuration in <strong>application.properties</strong> file</p>\n<pre><code>spring.h2.console.enabled=true\nspring.datasource.platform=h2\nspring.datasource.driverClassName = org.h2.Driver\nspring.datasource.url=jdbc:h2:file:~/test;\nspring.datasource.username=sa\nspring.datasource.password=\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7795885,"reputation":23,"user_id":5896989,"display_name":"Nitin Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642519853,"creation_date":1642519853,"answer_id":70758228,"question_id":45302132,"body_markdown":"The DataSource Initialization feature for SQL Script has been redesigned in **[Spring Boot 2.5][1]**.\r\n## \r\n\r\n\r\n----------\r\n\r\n\r\n ##\r\nBy default, **data.sql** scripts are now run before Hibernate is initialized. This aligns the behavior of basic script-based initialization with that of Flyway and Liquibase. If you want to use **data.sql** to populate a schema created by Hibernate, set **spring.jpa.defer-datasource-initialization** to **true**. While mixing database initialization technologies is not recommended, this will also allow you to use a **schema.sql** script to build upon a Hibernate-created schema before it’s populated via **data.sql**.\r\n\r\nReference:\r\n\r\n[Spring Boot 2.5 Release Notes][1]\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.5-Release-Notes","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>The DataSource Initialization feature for SQL Script has been redesigned in <strong><a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.5-Release-Notes\" rel=\"nofollow noreferrer\">Spring Boot 2.5</a></strong>.</p>\n<h2></h2>\n<hr />\n<h2></h2>\n<p>By default, <strong>data.sql</strong> scripts are now run before Hibernate is initialized. This aligns the behavior of basic script-based initialization with that of Flyway and Liquibase. If you want to use <strong>data.sql</strong> to populate a schema created by Hibernate, set <strong>spring.jpa.defer-datasource-initialization</strong> to <strong>true</strong>. While mixing database initialization technologies is not recommended, this will also allow you to use a <strong>schema.sql</strong> script to build upon a Hibernate-created schema before it’s populated via <strong>data.sql</strong>.</p>\n<p>Reference:</p>\n<p><a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.5-Release-Notes\" rel=\"nofollow noreferrer\">Spring Boot 2.5 Release Notes</a></p>\n"},{"tags":[],"owner":{"account_id":14640622,"reputation":1728,"user_id":10573307,"display_name":"Aayush Bhattacharya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652512846,"creation_date":1652512846,"answer_id":72238151,"question_id":45302132,"body_markdown":"Missing ddl script\r\n==\r\ni was also facing the same but it seemed i didnt added the ddl part\r\n\r\n    spring.h2.console.enabled=true\r\n    spring.datasource.url=jdbc:h2:~/test\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=   //empty as i didnt has password in h2\r\n    spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\n    spring.jpa.hibernate.ddl-auto = create //add this to create table first time then use &#39;update&#39;","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<h1>Missing ddl script</h1>\n<p>i was also facing the same but it seemed i didnt added the ddl part</p>\n<pre><code>spring.h2.console.enabled=true\nspring.datasource.url=jdbc:h2:~/test\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=   //empty as i didnt has password in h2\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.hibernate.ddl-auto = create //add this to create table first time then use 'update'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25153425,"reputation":41,"user_id":18998510,"display_name":"wromma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661253193,"creation_date":1661253193,"answer_id":73457697,"question_id":45302132,"body_markdown":"It should work with your &lt;b&gt;in-memory&lt;/b&gt; instance of H2\r\nif you load the data and call all operations within the same JVM session.\r\n\r\nIt has a lot to do with the design of the connection.\r\n\r\nPlease check both these:\r\n - the url to setup the connection\r\n - the validation and export of schema DDL to the database with the good\r\n   choice of the parameter of hibernate.hbm2ddl.auto\r\n\r\nOne has to act on these two parameters, it could require some time.\r\n\r\n[More options for in memory db][1].\r\n\r\n\r\n  [1]: https://h2database.com/html/features.html#in_memory_databases","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>It should work with your <b>in-memory</b> instance of H2\nif you load the data and call all operations within the same JVM session.</p>\n<p>It has a lot to do with the design of the connection.</p>\n<p>Please check both these:</p>\n<ul>\n<li>the url to setup the connection</li>\n<li>the validation and export of schema DDL to the database with the good\nchoice of the parameter of hibernate.hbm2ddl.auto</li>\n</ul>\n<p>One has to act on these two parameters, it could require some time.</p>\n<p><a href=\"https://h2database.com/html/features.html#in_memory_databases\" rel=\"nofollow noreferrer\">More options for in memory db</a>.</p>\n"},{"tags":[],"owner":{"account_id":2396304,"reputation":164,"user_id":2095034,"display_name":"Ishmael Mavor Raines"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689935299,"creation_date":1689932247,"answer_id":76736787,"question_id":45302132,"body_markdown":"May not be the best answer but u might want to use @Column (name = &quot;\\\\&quot;WIDTH\\\\&quot;&quot;)  and force usage of reserved words. Im using file instead of memory,\r\n\r\n    #Allow viewing H2 database via web browser e.g. &quot;http://localhost:8085/testdb&quot;\r\n    spring.h2.console.enabled=true\r\n    spring.h2.console.path=/testdb\r\n\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=\r\n    #First create an empty file &quot;testdb.mv.db&quot; in the file system that will act as the database storage. Check database error for location\r\n    spring.datasource.url=jdbc:h2:file:~/testdb;\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\n    spring.jpa.hibernate.ddl-auto=create    \r\n\r\n\r\nIf using a file storage use jdbc:h2:file:~/testdb or jdbc:h2:~/testdb\r\nbut jdbc:h2:mem:testdb will not connect.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Z91uK.png","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>May not be the best answer but u might want to use @Column (name = &quot;\\&quot;WIDTH\\&quot;&quot;)  and force usage of reserved words. Im using file instead of memory,</p>\n<pre><code>#Allow viewing H2 database via web browser e.g. &quot;http://localhost:8085/testdb&quot;\nspring.h2.console.enabled=true\nspring.h2.console.path=/testdb\n\nspring.datasource.username=sa\nspring.datasource.password=\n#First create an empty file &quot;testdb.mv.db&quot; in the file system that will act as the database storage. Check database error for location\nspring.datasource.url=jdbc:h2:file:~/testdb;\nspring.datasource.driverClassName=org.h2.Driver\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.hibernate.ddl-auto=create    \n</code></pre>\n<p>If using a file storage use jdbc:h2:file:~/testdb or jdbc:h2:~/testdb\nbut jdbc:h2:mem:testdb will not connect.</p>\n<p><a href=\"https://i.stack.imgur.com/Z91uK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z91uK.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94750,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":45302489,"answer_count":11,"score":21,"last_activity_date":1689935299,"creation_date":1500982644,"question_id":45302132,"body_markdown":"I want to keep some data in H2 database by making a CRUD repository, using Hibernate.\r\n\r\nI can&#39;t get the database to store my entries whatsoever. Currently, I&#39;m trying to achieve that during updating the db by making a sample entry. Entry is looking good in the logs, but table is not created/updated/generated.\r\n\r\n**Why Hibernate is not unable to create a table in this case?** (if the problem lies in structure of my data)\r\n\r\nHere&#39;s my Entity, **Game.java** class (I&#39;ve tried without @Column annotations, no difference. Id is not auto-generated, I need to be able to enter my own ID everytime):\r\n\r\n    @Entity\r\n    @Table(name = &quot;GAME&quot;)\r\n    public class Game {\r\n    \r\n        @Id\r\n        @Column (name = &quot;ID&quot;)\r\n        private long id;\r\n    \r\n        @Column (name = &quot;NAME&quot;)\r\n        private String name;\r\n    \r\n        @Column(name = &quot;STORYLINE&quot;, length = 4000)\r\n        private String storyline;\r\n    \r\n        @Column(name = &quot;AGGREGATED_RATING&quot;)\r\n        @JsonProperty(&quot;aggregated_rating&quot;)\r\n        private double aggregatedRating;\r\n    \r\n        @Column(name = &quot;FIRST_RELEASE_DATE&quot;)\r\n        @JsonProperty(&quot;first_release_date&quot;)\r\n        private long firstReleaseDate;\r\n    \r\n        @Embedded\r\n        private Cover cover;\r\n    \r\n        public Game(){\r\n    \r\n        }\r\n    \r\n        public Game(long id, String name, String storyline, double aggregatedRating, long firstReleaseDate, Cover cover) {\r\n            this.id = id;\r\n            this.name = name;\r\n            this.storyline = storyline;\r\n            this.aggregatedRating = aggregatedRating;\r\n            this.firstReleaseDate = firstReleaseDate;\r\n            this.cover = cover;\r\n        }\r\n    \r\n        public long getId() {\r\n            return id;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public String getStoryline() {\r\n            return storyline;\r\n        }\r\n    \r\n        public double getAggregatedRating() {\r\n            return aggregatedRating;\r\n        }\r\n    \r\n        public long getFirstReleaseDate() {\r\n            return firstReleaseDate;\r\n        }\r\n    \r\n        public Cover getCover() {\r\n            return cover;\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nAnd here&#39;s **Cover.java** class:\r\n\r\n    @Embeddable\r\n    public class Cover {\r\n    \r\n        @Column (name = &quot;URL&quot;)\r\n        private String url;\r\n        @JsonProperty(&quot;cloudinary_id&quot;)\r\n        @Column (name = &quot;CLOUDINARY_ID&quot;)\r\n        private String cloudinaryId;\r\n        @Column (name = &quot;WIDTH&quot;)\r\n        private Integer width;\r\n        @Column (name = &quot;HEIGHT&quot;)\r\n        private Integer height;\r\n    \r\n        public Cover(){\r\n        }\r\n    \r\n        public Cover(String url, String cloudinaryId, Integer width, Integer height) {\r\n            this.url = url;\r\n            this.cloudinaryId = cloudinaryId;\r\n            this.width = width;\r\n            this.height = height;\r\n    }\r\n    \r\n        public String getUrl() {\r\n            return url;\r\n        }\r\n    \r\n        public String getCloudinaryId() {\r\n            return cloudinaryId;\r\n        }\r\n    \r\n        public Integer getWidth() {\r\n            return width;\r\n        }\r\n    \r\n        public Integer getHeight() {\r\n            return height;\r\n        }\r\n    \r\n    }\r\n\r\nI configured H2 database here, in **application.properties** file:\r\n\r\n    spring.h2.console.enabled=true\r\n    spring.h2.console.path=/h2_console\r\n    spring.datasource.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.jpa.hibernate.ddl-auto = update\r\n    spring.jpa.show-sql=true\r\n    logging.level.org.hibernate.SQL=DEBUG\r\n    logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\r\n\r\n**Repository** is configured like this:\r\n\r\n    import org.springframework.data.repository.CrudRepository;\r\n    \r\n    import java.util.List;\r\n    \r\n    public interface GameRepository extends CrudRepository&lt;Game, Long&gt; {\r\n        List&lt;Game&gt; findAllByName(String name);\r\n    }\r\n\r\nI test my repository by going under localhost:8080/test, where a sample entry should be inserted into table:\r\n\r\n    @RequestMapping(&quot;/test&quot;)\r\n    public String saveSth(){\r\n        gameRepository.save(new Game(127, &quot;Assassin&#39;s Creed II&quot;, &quot;The lineage continues as this new chapter introduces Ezio, inheritor of the talents and creed of the Assassins. His family murdered by rival families, Ezio resolves to learn the ancient art of the Assassin in order to seek revenge. He will not do so alone though, allying with historical figures such as philosopher and writer Niccol&#242; Machiavelli. You will also be able to master the art of the assassin with all new weapons and instruments created by the renowned inventor and genius of the Renaissance, Leonardo Da Vinci himself.&quot;, 90.25, 1258416000000L, new Cover(&quot;//images.igdb.com/igdb/image/upload/t_thumb/doczeiofd1ckpapdhqs7.jpg&quot;, &quot;doczeiofd1ckpapdhqs7&quot;, 1000, 1426)));\r\n        return &quot;success&quot;;\r\n    }\r\n\r\nI get the following log:\r\n\r\n    2017-07-25 13:09:58.873 DEBUG 9442 --- [nio-8080-exec-1] org.hibernate.SQL                        : select game0_.id as id1_0_0_, game0_.aggregated_rating as aggregat2_0_0_, game0_.cloudinary_id as cloudina3_0_0_, game0_.height as height4_0_0_, game0_.url as url5_0_0_, game0_.width as width6_0_0_, game0_.first_release_date as first_re7_0_0_, game0_.name as name8_0_0_, game0_.storyline as storylin9_0_0_ from game game0_ where game0_.id=?\r\n    Hibernate: select game0_.id as id1_0_0_, game0_.aggregated_rating as aggregat2_0_0_, game0_.cloudinary_id as cloudina3_0_0_, game0_.height as height4_0_0_, game0_.url as url5_0_0_, game0_.width as width6_0_0_, game0_.first_release_date as first_re7_0_0_, game0_.name as name8_0_0_, game0_.storyline as storylin9_0_0_ from game game0_ where game0_.id=?\r\n    2017-07-25 13:09:58.875 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [127]\r\n    2017-07-25 13:09:58.894 DEBUG 9442 --- [nio-8080-exec-1] org.hibernate.SQL                        : insert into game (aggregated_rating, cloudinary_id, height, url, width, first_release_date, name, storyline, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n    Hibernate: insert into game (aggregated_rating, cloudinary_id, height, url, width, first_release_date, name, storyline, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n    2017-07-25 13:09:58.895 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [DOUBLE] - [90.25]\r\n    2017-07-25 13:09:58.896 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [VARCHAR] - [doczeiofd1ckpapdhqs7]\r\n    2017-07-25 13:09:58.896 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [3] as [INTEGER] - [1426]\r\n    2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [4] as [VARCHAR] - [//images.igdb.com/igdb/image/upload/t_thumb/doczeiofd1ckpapdhqs7.jpg]\r\n    2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [5] as [INTEGER] - [1000]\r\n    2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [6] as [BIGINT] - [1258416000000]\r\n    2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [7] as [VARCHAR] - [Assassin&#39;s Creed II]\r\n    2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [8] as [VARCHAR] - [The lineage continues as this new chapter introduces Ezio, inheritor of the talents and creed of the Assassins. His family murdered by rival families, Ezio resolves to learn the ancient art of the Assassin in order to seek revenge. He will not do so alone though, allying with historical figures such as philosopher and writer Niccol&#242; Machiavelli. You will also be able to master the art of the assassin with all new weapons and instruments created by the renowned inventor and genius of the Renaissance, Leonardo Da Vinci himself.]\r\n    2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [9] as [BIGINT] - [127]\r\n\r\nIt looks like data is binded to parameters, but in H2 console **SELECT * FROM GAME** returns me:\r\n     SELECT * FROM GAME;\r\n    Table &quot;GAME&quot; not found; SQL statement:\r\n    SELECT * FROM GAME [42102-193] 42S02/42102 (Help)\r\n\r\nI&#39;ve tried other H2 modes such as create-drop or create, but no success. What worries me is that, I can&#39;t even get the database to create an empty table with the correct rows, ready for entries.\r\n\r\nI think that something&#39;s wrong either with my Entity or missing from my GameRepository configuration, but I have no more ideas to fix this error.\r\n\r\nI want to achieve what&#39;s here:\r\nhttp://javasampleapproach.com/spring-framework/spring-boot/integrate-h2-database-springboot-spring-jpa-embedded-mode\r\nAnd here:\r\nhttp://www.simplecodestuffs.com/value-object-entity-object-in-hibernate-mapping/\r\n\r\n\r\nAlso, I&#39;ve tried this set of tutorials for a change:\r\nhttps://springframework.guru/using-the-h2-database-console-in-spring-boot-with-spring-security/\r\nhttps://springframework.guru/spring-boot-web-application-part-3-spring-data-jpa/\r\n\r\nBut no luck so far.\r\n","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>I want to keep some data in H2 database by making a CRUD repository, using Hibernate.</p>\n\n<p>I can't get the database to store my entries whatsoever. Currently, I'm trying to achieve that during updating the db by making a sample entry. Entry is looking good in the logs, but table is not created/updated/generated.</p>\n\n<p><strong>Why Hibernate is not unable to create a table in this case?</strong> (if the problem lies in structure of my data)</p>\n\n<p>Here's my Entity, <strong>Game.java</strong> class (I've tried without @Column annotations, no difference. Id is not auto-generated, I need to be able to enter my own ID everytime):</p>\n\n<pre><code>@Entity\n@Table(name = \"GAME\")\npublic class Game {\n\n    @Id\n    @Column (name = \"ID\")\n    private long id;\n\n    @Column (name = \"NAME\")\n    private String name;\n\n    @Column(name = \"STORYLINE\", length = 4000)\n    private String storyline;\n\n    @Column(name = \"AGGREGATED_RATING\")\n    @JsonProperty(\"aggregated_rating\")\n    private double aggregatedRating;\n\n    @Column(name = \"FIRST_RELEASE_DATE\")\n    @JsonProperty(\"first_release_date\")\n    private long firstReleaseDate;\n\n    @Embedded\n    private Cover cover;\n\n    public Game(){\n\n    }\n\n    public Game(long id, String name, String storyline, double aggregatedRating, long firstReleaseDate, Cover cover) {\n        this.id = id;\n        this.name = name;\n        this.storyline = storyline;\n        this.aggregatedRating = aggregatedRating;\n        this.firstReleaseDate = firstReleaseDate;\n        this.cover = cover;\n    }\n\n    public long getId() {\n        return id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public String getStoryline() {\n        return storyline;\n    }\n\n    public double getAggregatedRating() {\n        return aggregatedRating;\n    }\n\n    public long getFirstReleaseDate() {\n        return firstReleaseDate;\n    }\n\n    public Cover getCover() {\n        return cover;\n    }\n\n\n}\n</code></pre>\n\n<p>And here's <strong>Cover.java</strong> class:</p>\n\n<pre><code>@Embeddable\npublic class Cover {\n\n    @Column (name = \"URL\")\n    private String url;\n    @JsonProperty(\"cloudinary_id\")\n    @Column (name = \"CLOUDINARY_ID\")\n    private String cloudinaryId;\n    @Column (name = \"WIDTH\")\n    private Integer width;\n    @Column (name = \"HEIGHT\")\n    private Integer height;\n\n    public Cover(){\n    }\n\n    public Cover(String url, String cloudinaryId, Integer width, Integer height) {\n        this.url = url;\n        this.cloudinaryId = cloudinaryId;\n        this.width = width;\n        this.height = height;\n}\n\n    public String getUrl() {\n        return url;\n    }\n\n    public String getCloudinaryId() {\n        return cloudinaryId;\n    }\n\n    public Integer getWidth() {\n        return width;\n    }\n\n    public Integer getHeight() {\n        return height;\n    }\n\n}\n</code></pre>\n\n<p>I configured H2 database here, in <strong>application.properties</strong> file:</p>\n\n<pre><code>spring.h2.console.enabled=true\nspring.h2.console.path=/h2_console\nspring.datasource.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1\nspring.datasource.username=sa\nspring.datasource.password=\nspring.datasource.driverClassName=org.h2.Driver\nspring.jpa.hibernate.ddl-auto = update\nspring.jpa.show-sql=true\nlogging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\n</code></pre>\n\n<p><strong>Repository</strong> is configured like this:</p>\n\n<pre><code>import org.springframework.data.repository.CrudRepository;\n\nimport java.util.List;\n\npublic interface GameRepository extends CrudRepository&lt;Game, Long&gt; {\n    List&lt;Game&gt; findAllByName(String name);\n}\n</code></pre>\n\n<p>I test my repository by going under localhost:8080/test, where a sample entry should be inserted into table:</p>\n\n<pre><code>@RequestMapping(\"/test\")\npublic String saveSth(){\n    gameRepository.save(new Game(127, \"Assassin's Creed II\", \"The lineage continues as this new chapter introduces Ezio, inheritor of the talents and creed of the Assassins. His family murdered by rival families, Ezio resolves to learn the ancient art of the Assassin in order to seek revenge. He will not do so alone though, allying with historical figures such as philosopher and writer Niccolò Machiavelli. You will also be able to master the art of the assassin with all new weapons and instruments created by the renowned inventor and genius of the Renaissance, Leonardo Da Vinci himself.\", 90.25, 1258416000000L, new Cover(\"//images.igdb.com/igdb/image/upload/t_thumb/doczeiofd1ckpapdhqs7.jpg\", \"doczeiofd1ckpapdhqs7\", 1000, 1426)));\n    return \"success\";\n}\n</code></pre>\n\n<p>I get the following log:</p>\n\n<pre><code>2017-07-25 13:09:58.873 DEBUG 9442 --- [nio-8080-exec-1] org.hibernate.SQL                        : select game0_.id as id1_0_0_, game0_.aggregated_rating as aggregat2_0_0_, game0_.cloudinary_id as cloudina3_0_0_, game0_.height as height4_0_0_, game0_.url as url5_0_0_, game0_.width as width6_0_0_, game0_.first_release_date as first_re7_0_0_, game0_.name as name8_0_0_, game0_.storyline as storylin9_0_0_ from game game0_ where game0_.id=?\nHibernate: select game0_.id as id1_0_0_, game0_.aggregated_rating as aggregat2_0_0_, game0_.cloudinary_id as cloudina3_0_0_, game0_.height as height4_0_0_, game0_.url as url5_0_0_, game0_.width as width6_0_0_, game0_.first_release_date as first_re7_0_0_, game0_.name as name8_0_0_, game0_.storyline as storylin9_0_0_ from game game0_ where game0_.id=?\n2017-07-25 13:09:58.875 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [127]\n2017-07-25 13:09:58.894 DEBUG 9442 --- [nio-8080-exec-1] org.hibernate.SQL                        : insert into game (aggregated_rating, cloudinary_id, height, url, width, first_release_date, name, storyline, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)\nHibernate: insert into game (aggregated_rating, cloudinary_id, height, url, width, first_release_date, name, storyline, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)\n2017-07-25 13:09:58.895 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [DOUBLE] - [90.25]\n2017-07-25 13:09:58.896 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [VARCHAR] - [doczeiofd1ckpapdhqs7]\n2017-07-25 13:09:58.896 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [3] as [INTEGER] - [1426]\n2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [4] as [VARCHAR] - [//images.igdb.com/igdb/image/upload/t_thumb/doczeiofd1ckpapdhqs7.jpg]\n2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [5] as [INTEGER] - [1000]\n2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [6] as [BIGINT] - [1258416000000]\n2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [7] as [VARCHAR] - [Assassin's Creed II]\n2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [8] as [VARCHAR] - [The lineage continues as this new chapter introduces Ezio, inheritor of the talents and creed of the Assassins. His family murdered by rival families, Ezio resolves to learn the ancient art of the Assassin in order to seek revenge. He will not do so alone though, allying with historical figures such as philosopher and writer Niccolò Machiavelli. You will also be able to master the art of the assassin with all new weapons and instruments created by the renowned inventor and genius of the Renaissance, Leonardo Da Vinci himself.]\n2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [9] as [BIGINT] - [127]\n</code></pre>\n\n<p>It looks like data is binded to parameters, but in H2 console <strong>SELECT * FROM GAME</strong> returns me:\n     SELECT * FROM GAME;\n    Table \"GAME\" not found; SQL statement:\n    SELECT * FROM GAME [42102-193] 42S02/42102 (Help)</p>\n\n<p>I've tried other H2 modes such as create-drop or create, but no success. What worries me is that, I can't even get the database to create an empty table with the correct rows, ready for entries.</p>\n\n<p>I think that something's wrong either with my Entity or missing from my GameRepository configuration, but I have no more ideas to fix this error.</p>\n\n<p>I want to achieve what's here:\n<a href=\"http://javasampleapproach.com/spring-framework/spring-boot/integrate-h2-database-springboot-spring-jpa-embedded-mode\" rel=\"noreferrer\">http://javasampleapproach.com/spring-framework/spring-boot/integrate-h2-database-springboot-spring-jpa-embedded-mode</a>\nAnd here:\n<a href=\"http://www.simplecodestuffs.com/value-object-entity-object-in-hibernate-mapping/\" rel=\"noreferrer\">http://www.simplecodestuffs.com/value-object-entity-object-in-hibernate-mapping/</a></p>\n\n<p>Also, I've tried this set of tutorials for a change:\n<a href=\"https://springframework.guru/using-the-h2-database-console-in-spring-boot-with-spring-security/\" rel=\"noreferrer\">https://springframework.guru/using-the-h2-database-console-in-spring-boot-with-spring-security/</a>\n<a href=\"https://springframework.guru/spring-boot-web-application-part-3-spring-data-jpa/\" rel=\"noreferrer\">https://springframework.guru/spring-boot-web-application-part-3-spring-data-jpa/</a></p>\n\n<p>But no luck so far.</p>\n"},{"tags":["java","ssl","jetty","apache-nifi","tls1.2"],"comments":[{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":0,"creation_date":1609085511,"post_id":65461182,"comment_id":115744284,"body_markdown":"set `org.apache.nifi.web.security` logger to DEBUG in logback.xml to have more info on keystore init.  do you have your keystore without a password?","body":"set <code>org.apache.nifi.web.security</code> logger to DEBUG in logback.xml to have more info on keystore init.  do you have your keystore without a password?"},{"owner":{"account_id":739104,"reputation":4630,"user_id":703236,"display_name":"Adam"},"score":0,"creation_date":1609086219,"post_id":65461182,"comment_id":115744497,"body_markdown":"Thanks I will try changing the logging. The keystore must have always had a password but I&#39;ve tried both ways with specifying it and not specifying it. It seems even the key tool can read it without specifying a password.","body":"Thanks I will try changing the logging. The keystore must have always had a password but I&#39;ve tried both ways with specifying it and not specifying it. It seems even the key tool can read it without specifying a password."}],"answers":[{"comments":[{"owner":{"account_id":5751280,"reputation":1640,"user_id":4540883,"accept_rate":64,"display_name":"Diego Velez"},"score":1,"creation_date":1687890645,"post_id":71293163,"comment_id":134999644,"body_markdown":"Adding to this, also make sure remote input secure is false `nifi.remote.input.secure=false`","body":"Adding to this, also make sure remote input secure is false <code>nifi.remote.input.secure=false</code>"}],"tags":[],"owner":{"account_id":11542680,"reputation":306,"user_id":8457815,"display_name":"ruakn"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1646041979,"creation_date":1646041979,"answer_id":71293163,"question_id":65461182,"body_markdown":"If user is trying to setup unsecure nifi cluster, and encounters the above error, then remove all the values as below:\r\n\r\n    nifi.security.keystore= \r\n    nifi.security.keystoreType= \r\n    nifi.security.keystorePasswd= \r\n    nifi.security.keyPasswd= \r\n    nifi.security.truststore= \r\n    nifi.security.truststoreType= \r\n    nifi.security.truststorePasswd=\r\n\r\nRestart the cluster, and you will be able to continue.\r\n\r\n(From NiFi 1.15.3, secure cluster is created without user has to manually enter these values and create certs for the same using nifi-toolkit or via organisation)","title":"Apache NiFi Unable to start the flow controller because the TLS configuration was invalid: The keystore properties are not valid","body":"<p>If user is trying to setup unsecure nifi cluster, and encounters the above error, then remove all the values as below:</p>\n<pre><code>nifi.security.keystore= \nnifi.security.keystoreType= \nnifi.security.keystorePasswd= \nnifi.security.keyPasswd= \nnifi.security.truststore= \nnifi.security.truststoreType= \nnifi.security.truststorePasswd=\n</code></pre>\n<p>Restart the cluster, and you will be able to continue.</p>\n<p>(From NiFi 1.15.3, secure cluster is created without user has to manually enter these values and create certs for the same using nifi-toolkit or via organisation)</p>\n"},{"tags":[],"owner":{"account_id":4723232,"reputation":870,"user_id":4214037,"accept_rate":91,"display_name":"32cupo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689934743,"creation_date":1689934743,"answer_id":76737103,"question_id":65461182,"body_markdown":"I experienced the same issue during configuration of NiFi cluster. The first node was running, but other nodes were unable to start with given error. I compared all properties, checked file existency, checked if passwords are set correct without any progress. \r\n\r\nFinally I found out, that file permissions for keystore.jks and trustore.jks are different between servers and they weren&#39;t readable by nifi user. It started working after fixing permission:\r\n\r\n```\r\nchmod +r keystore.jks truststore.jks\r\n```\r\n","title":"Apache NiFi Unable to start the flow controller because the TLS configuration was invalid: The keystore properties are not valid","body":"<p>I experienced the same issue during configuration of NiFi cluster. The first node was running, but other nodes were unable to start with given error. I compared all properties, checked file existency, checked if passwords are set correct without any progress.</p>\n<p>Finally I found out, that file permissions for keystore.jks and trustore.jks are different between servers and they weren't readable by nifi user. It started working after fixing permission:</p>\n<pre><code>chmod +r keystore.jks truststore.jks\n</code></pre>\n"}],"owner":{"account_id":739104,"reputation":4630,"user_id":703236,"display_name":"Adam"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7749,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":71293163,"answer_count":2,"score":7,"last_activity_date":1689934743,"creation_date":1609021001,"question_id":65461182,"body_markdown":"I am attempting to upgrade to Apache NiFi from 1.9.2 to 1.12.1 and no matter how I tweak the properties file, I keep getting errors about TLS. I was running just fine before the upgrade. I was able to use the keytool to open the jks files and output the keys inside of them. The upgrade added the truststore, truststoreType, and truststorePasswd lines but removing them, filling them out, etc. does nothing to change the result. If anyone knows some definitive steps resolve this (commands to run, etc.) it would be much appreciated.\r\n\r\n**nifi.properties:**\r\n\r\nThe `keystore.jks` and `truststore.jks` files are both in the `conf` folder.\r\n\r\n    nifi.security.keystore=keystore.jks\r\n    nifi.security.keystoreType=JKS\r\n    nifi.security.keystorePasswd=\r\n    nifi.security.keyPasswd=\r\n    nifi.security.truststore=truststore.jks\r\n    nifi.security.truststoreType=JKS\r\n    nifi.security.truststorePasswd=\r\n    nifi.security.user.authorizer=managed-authorizer\r\n    nifi.security.allow.anonymous.authentication=false\r\n    nifi.security.user.login.identity.provider=\r\n    nifi.security.ocsp.responder.url=\r\n    nifi.security.ocsp.responder.certificate=\r\n\r\n**nifi-app.log:**\r\n\r\n    2020-12-26 17:00:03,600 INFO [main] org.apache.nifi.NiFi Launching NiFi...\r\n    &lt;&lt;&lt;&lt;  REMOVED SOME UNECESSARY LINES DUE TO STACKOVERFLOW CHAR LIMITS  &gt;&gt;&gt;&gt;\r\n    2020-12-26 17:00:20,415 INFO [main] org.eclipse.jetty.server.Server jetty-9.4.26.v20200117; built: 2020-01-17T12:35:33.676Z; git: 7b38981d25d14afb4a12ff1f2596756144edf695; jvm 1.8.0_102-b14\r\n    2020-12-26 17:00:20,789 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=124ms\r\n    2020-12-26 17:00:20,894 INFO [main] org.eclipse.jetty.server.session DefaultSessionIdManager workerName=node0\r\n    2020-12-26 17:00:20,895 INFO [main] org.eclipse.jetty.server.session No SessionScavenger set, using defaults\r\n    2020-12-26 17:00:20,896 INFO [main] org.eclipse.jetty.server.session node0 Scavenging every 600000ms\r\n    2020-12-26 17:00:20,935 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@55634720{nifi-standard-content-viewer,/nifi-standard-content-viewer-1.12.1,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-standard-content-viewer-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\extensions\\nifi-standard-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-standard-content-viewer-1.12.1.war}\r\n    2020-12-26 17:00:21,847 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=426ms\r\n    2020-12-26 17:00:21,900 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@4b0d79fc{/nifi-jolt-transform-json-ui-1.12.1,/nifi-jolt-transform-json-ui-1.12.1,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-jolt-transform-json-ui-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\extensions\\nifi-standard-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-jolt-transform-json-ui-1.12.1.war}\r\n    2020-12-26 17:00:23,283 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=464ms\r\n    2020-12-26 17:00:23,315 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@4c1909a3{/nifi-update-attribute-ui-1.12.1,/nifi-update-attribute-ui-1.12.1,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-update-attribute-ui-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\extensions\\nifi-update-attribute-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-update-attribute-ui-1.12.1.war}\r\n    2020-12-26 17:00:24,404 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=187ms\r\n    2020-12-26 17:00:24,408 INFO [main] o.e.j.s.handler.ContextHandler._nifi No Spring WebApplicationInitializer types detected on classpath\r\n    2020-12-26 17:00:24,453 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@428640fa{nifi,/nifi,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-ui-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-ui-1.12.1.war}\r\n    2020-12-26 17:00:25,057 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=402ms\r\n    2020-12-26 17:00:25,058 INFO [main] o.e.j.s.handler.ContextHandler._nifi_api No Spring WebApplicationInitializer types detected on classpath\r\n    2020-12-26 17:00:25,108 INFO [main] o.e.j.s.handler.ContextHandler._nifi_api Initializing Spring root WebApplicationContext\r\n    2020-12-26 17:00:27,144 INFO [main] org.apache.nifi.security.kms.CryptoUtils Determined default nifi.properties path to be &#39;D:\\Projects\\NIFI~1.SER\\nifi\\.\\conf\\nifi.properties&#39;\r\n    2020-12-26 17:00:27,145 INFO [main] o.a.nifi.properties.NiFiPropertiesLoader Loaded 166 properties from D:\\Projects\\NIFI~1.SER\\nifi\\.\\conf\\nifi.properties\r\n    2020-12-26 17:00:28,952 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded 141 properties from system properties and environment variables\r\n    2020-12-26 17:00:28,954 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded 8 properties from &#39;..\\custom\\variable-registry.properties&#39;\r\n    2020-12-26 17:00:28,954 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded a total of 149 properties.  Including precedence overrides effective accessible registry key size is 149\r\n    2020-12-26 17:00:28,989 WARN [main] o.a.nifi.security.util.SslContextFactory Some keystore properties are populated (keystore.jks, null, null, JKS) but not valid\r\n    2020-12-26 17:00:28,990 ERROR [main] o.apache.nifi.controller.FlowController Unable to start the flow controller because the TLS configuration was invalid: The keystore properties are not valid\r\n    2020-12-26 17:00:28,992 WARN [main] org.eclipse.jetty.webapp.WebAppContext Failed startup of context o.e.j.w.WebAppContext@d9345cd{nifi-api,/nifi-api,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-api-1.12.1.war/webapp/,UNAVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-api-1.12.1.war}\r\n    org.apache.nifi.web.NiFiCoreException: Unable to start Flow Controller.\r\n    \tat org.apache.nifi.web.contextlistener.ApplicationStartupContextListener.contextInitialized(ApplicationStartupContextListener.java:88)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:930)\r\n    \tat org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:553)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:889)\r\n    \tat org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:356)\r\n    \tat org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1445)\r\n    \tat org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1409)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:822)\r\n    \tat org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:275)\r\n    \tat org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:524)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.server.handler.gzip.GzipHandler.doStart(GzipHandler.java:425)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.server.Server.start(Server.java:407)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.server.Server.doStart(Server.java:371)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.apache.nifi.web.server.JettyServer.start(JettyServer.java:1052)\r\n    \tat org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:158)\r\n    \tat org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:72)\r\n    \tat org.apache.nifi.NiFi.main(NiFi.java:301)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flowService&#39;: FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flowController&#39;: FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Flow controller TLS configuration is invalid\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:185)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1086)\r\n    \tat org.apache.nifi.web.contextlistener.ApplicationStartupContextListener.contextInitialized(ApplicationStartupContextListener.java:55)\r\n    \t... 37 common frames omitted\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flowController&#39;: FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Flow controller TLS configuration is invalid\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:185)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1086)\r\n    \tat org.apache.nifi.spring.StandardFlowServiceFactoryBean.getObject(StandardFlowServiceFactoryBean.java:48)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)\r\n    \t... 43 common frames omitted\r\n    Caused by: java.lang.IllegalStateException: Flow controller TLS configuration is invalid\r\n    \tat org.apache.nifi.controller.FlowController.&lt;init&gt;(FlowController.java:476)\r\n    \tat org.apache.nifi.controller.FlowController.createStandaloneInstance(FlowController.java:388)\r\n    \tat org.apache.nifi.spring.FlowControllerFactoryBean.getObject(FlowControllerFactoryBean.java:80)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)\r\n    \t... 50 common frames omitted\r\n    Caused by: org.apache.nifi.security.util.TlsException: The keystore properties are not valid\r\n    \tat org.apache.nifi.security.util.SslContextFactory.getKeyManagers(SslContextFactory.java:161)\r\n    \tat org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:88)\r\n    \tat org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:55)\r\n    \tat org.apache.nifi.controller.FlowController.&lt;init&gt;(FlowController.java:473)\r\n    \t... 53 common frames omitted\r\n    2020-12-26 17:00:29,259 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=63ms\r\n    2020-12-26 17:00:29,260 INFO [main] o.e.j.s.h.C._nifi_content_viewer No Spring WebApplicationInitializer types detected on classpath\r\n    2020-12-26 17:00:29,280 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@2d710f1a{nifi-content-viewer,/nifi-content-viewer,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-content-viewer-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-content-viewer-1.12.1.war}\r\n    2020-12-26 17:00:29,313 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=9ms\r\n    2020-12-26 17:00:29,315 WARN [main] o.e.j.webapp.StandardDescriptorProcessor Duplicate mapping from / to default\r\n    2020-12-26 17:00:29,315 INFO [main] o.e.j.s.h.ContextHandler._nifi_docs No Spring WebApplicationInitializer types detected on classpath\r\n    2020-12-26 17:00:29,335 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@29215f06{nifi-docs,/nifi-docs,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-docs-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-docs-1.12.1.war}\r\n    2020-12-26 17:00:29,361 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=6ms\r\n    2020-12-26 17:00:29,363 INFO [main] o.e.j.server.handler.ContextHandler._ No Spring WebApplicationInitializer types detected on classpath\r\n    2020-12-26 17:00:29,379 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@59505b48{nifi-error,/,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-error-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-error-1.12.1.war}\r\n    2020-12-26 17:00:29,399 INFO [main] o.eclipse.jetty.server.AbstractConnector Started ServerConnector@1018bde2{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}\r\n    2020-12-26 17:00:29,400 INFO [main] org.eclipse.jetty.server.Server Started @26147ms\r\n    2020-12-26 17:00:29,400 WARN [main] org.apache.nifi.web.server.JettyServer Failed to start web server... shutting down.\r\n    org.apache.nifi.web.NiFiCoreException: Unable to start Flow Controller.\r\n    \tat org.apache.nifi.web.contextlistener.ApplicationStartupContextListener.contextInitialized(ApplicationStartupContextListener.java:88)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:930)\r\n    \tat org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:553)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:889)\r\n    \tat org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:356)\r\n    \tat org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1445)\r\n    \tat org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1409)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:822)\r\n    \tat org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:275)\r\n    \tat org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:524)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.server.handler.gzip.GzipHandler.doStart(GzipHandler.java:425)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.server.Server.start(Server.java:407)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.server.Server.doStart(Server.java:371)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.apache.nifi.web.server.JettyServer.start(JettyServer.java:1052)\r\n    \tat org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:158)\r\n    \tat org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:72)\r\n    \tat org.apache.nifi.NiFi.main(NiFi.java:301)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flowService&#39;: FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flowController&#39;: FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Flow controller TLS configuration is invalid\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:185)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1086)\r\n    \tat org.apache.nifi.web.contextlistener.ApplicationStartupContextListener.contextInitialized(ApplicationStartupContextListener.java:55)\r\n    \t... 37 common frames omitted\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flowController&#39;: FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Flow controller TLS configuration is invalid\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:185)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1086)\r\n    \tat org.apache.nifi.spring.StandardFlowServiceFactoryBean.getObject(StandardFlowServiceFactoryBean.java:48)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)\r\n    \t... 43 common frames omitted\r\n    Caused by: java.lang.IllegalStateException: Flow controller TLS configuration is invalid\r\n    \tat org.apache.nifi.controller.FlowController.&lt;init&gt;(FlowController.java:476)\r\n    \tat org.apache.nifi.controller.FlowController.createStandaloneInstance(FlowController.java:388)\r\n    \tat org.apache.nifi.spring.FlowControllerFactoryBean.getObject(FlowControllerFactoryBean.java:80)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)\r\n    \t... 50 common frames omitted\r\n    Caused by: org.apache.nifi.security.util.TlsException: The keystore properties are not valid\r\n    \tat org.apache.nifi.security.util.SslContextFactory.getKeyManagers(SslContextFactory.java:161)\r\n    \tat org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:88)\r\n    \tat org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:55)\r\n    \tat org.apache.nifi.controller.FlowController.&lt;init&gt;(FlowController.java:473)\r\n    \t... 53 common frames omitted\r\n    2020-12-26 17:00:29,401 INFO [Thread-1] org.apache.nifi.NiFi Initiating shutdown of Jetty web server...\r\n    2020-12-26 17:00:29,405 INFO [Thread-1] o.eclipse.jetty.server.AbstractConnector Stopped ServerConnector@1018bde2{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}\r\n    2020-12-26 17:00:29,405 INFO [Thread-1] org.eclipse.jetty.server.session node0 Stopped scavenging\r\n\r\n**These lines are particularly interesting:**\r\n\r\n    2020-12-26 17:00:28,989 WARN [main] o.a.nifi.security.util.SslContextFactory Some keystore properties are populated (keystore.jks, null, null, JKS) but not valid\r\n    2020-12-26 17:00:28,990 ERROR [main] o.apache.nifi.controller.FlowController Unable to start the flow controller because the TLS configuration was invalid: The keystore properties are not valid","title":"Apache NiFi Unable to start the flow controller because the TLS configuration was invalid: The keystore properties are not valid","body":"<p>I am attempting to upgrade to Apache NiFi from 1.9.2 to 1.12.1 and no matter how I tweak the properties file, I keep getting errors about TLS. I was running just fine before the upgrade. I was able to use the keytool to open the jks files and output the keys inside of them. The upgrade added the truststore, truststoreType, and truststorePasswd lines but removing them, filling them out, etc. does nothing to change the result. If anyone knows some definitive steps resolve this (commands to run, etc.) it would be much appreciated.</p>\n<p><strong>nifi.properties:</strong></p>\n<p>The <code>keystore.jks</code> and <code>truststore.jks</code> files are both in the <code>conf</code> folder.</p>\n<pre><code>nifi.security.keystore=keystore.jks\nnifi.security.keystoreType=JKS\nnifi.security.keystorePasswd=\nnifi.security.keyPasswd=\nnifi.security.truststore=truststore.jks\nnifi.security.truststoreType=JKS\nnifi.security.truststorePasswd=\nnifi.security.user.authorizer=managed-authorizer\nnifi.security.allow.anonymous.authentication=false\nnifi.security.user.login.identity.provider=\nnifi.security.ocsp.responder.url=\nnifi.security.ocsp.responder.certificate=\n</code></pre>\n<p><strong>nifi-app.log:</strong></p>\n<pre><code>2020-12-26 17:00:03,600 INFO [main] org.apache.nifi.NiFi Launching NiFi...\n&lt;&lt;&lt;&lt;  REMOVED SOME UNECESSARY LINES DUE TO STACKOVERFLOW CHAR LIMITS  &gt;&gt;&gt;&gt;\n2020-12-26 17:00:20,415 INFO [main] org.eclipse.jetty.server.Server jetty-9.4.26.v20200117; built: 2020-01-17T12:35:33.676Z; git: 7b38981d25d14afb4a12ff1f2596756144edf695; jvm 1.8.0_102-b14\n2020-12-26 17:00:20,789 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=124ms\n2020-12-26 17:00:20,894 INFO [main] org.eclipse.jetty.server.session DefaultSessionIdManager workerName=node0\n2020-12-26 17:00:20,895 INFO [main] org.eclipse.jetty.server.session No SessionScavenger set, using defaults\n2020-12-26 17:00:20,896 INFO [main] org.eclipse.jetty.server.session node0 Scavenging every 600000ms\n2020-12-26 17:00:20,935 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@55634720{nifi-standard-content-viewer,/nifi-standard-content-viewer-1.12.1,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-standard-content-viewer-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\extensions\\nifi-standard-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-standard-content-viewer-1.12.1.war}\n2020-12-26 17:00:21,847 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=426ms\n2020-12-26 17:00:21,900 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@4b0d79fc{/nifi-jolt-transform-json-ui-1.12.1,/nifi-jolt-transform-json-ui-1.12.1,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-jolt-transform-json-ui-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\extensions\\nifi-standard-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-jolt-transform-json-ui-1.12.1.war}\n2020-12-26 17:00:23,283 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=464ms\n2020-12-26 17:00:23,315 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@4c1909a3{/nifi-update-attribute-ui-1.12.1,/nifi-update-attribute-ui-1.12.1,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-update-attribute-ui-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\extensions\\nifi-update-attribute-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-update-attribute-ui-1.12.1.war}\n2020-12-26 17:00:24,404 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=187ms\n2020-12-26 17:00:24,408 INFO [main] o.e.j.s.handler.ContextHandler._nifi No Spring WebApplicationInitializer types detected on classpath\n2020-12-26 17:00:24,453 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@428640fa{nifi,/nifi,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-ui-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-ui-1.12.1.war}\n2020-12-26 17:00:25,057 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=402ms\n2020-12-26 17:00:25,058 INFO [main] o.e.j.s.handler.ContextHandler._nifi_api No Spring WebApplicationInitializer types detected on classpath\n2020-12-26 17:00:25,108 INFO [main] o.e.j.s.handler.ContextHandler._nifi_api Initializing Spring root WebApplicationContext\n2020-12-26 17:00:27,144 INFO [main] org.apache.nifi.security.kms.CryptoUtils Determined default nifi.properties path to be 'D:\\Projects\\NIFI~1.SER\\nifi\\.\\conf\\nifi.properties'\n2020-12-26 17:00:27,145 INFO [main] o.a.nifi.properties.NiFiPropertiesLoader Loaded 166 properties from D:\\Projects\\NIFI~1.SER\\nifi\\.\\conf\\nifi.properties\n2020-12-26 17:00:28,952 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded 141 properties from system properties and environment variables\n2020-12-26 17:00:28,954 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded 8 properties from '..\\custom\\variable-registry.properties'\n2020-12-26 17:00:28,954 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded a total of 149 properties.  Including precedence overrides effective accessible registry key size is 149\n2020-12-26 17:00:28,989 WARN [main] o.a.nifi.security.util.SslContextFactory Some keystore properties are populated (keystore.jks, null, null, JKS) but not valid\n2020-12-26 17:00:28,990 ERROR [main] o.apache.nifi.controller.FlowController Unable to start the flow controller because the TLS configuration was invalid: The keystore properties are not valid\n2020-12-26 17:00:28,992 WARN [main] org.eclipse.jetty.webapp.WebAppContext Failed startup of context o.e.j.w.WebAppContext@d9345cd{nifi-api,/nifi-api,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-api-1.12.1.war/webapp/,UNAVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-api-1.12.1.war}\norg.apache.nifi.web.NiFiCoreException: Unable to start Flow Controller.\n    at org.apache.nifi.web.contextlistener.ApplicationStartupContextListener.contextInitialized(ApplicationStartupContextListener.java:88)\n    at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:930)\n    at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:553)\n    at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:889)\n    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:356)\n    at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1445)\n    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1409)\n    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:822)\n    at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:275)\n    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:524)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.server.handler.gzip.GzipHandler.doStart(GzipHandler.java:425)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.server.Server.start(Server.java:407)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.server.Server.doStart(Server.java:371)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.apache.nifi.web.server.JettyServer.start(JettyServer.java:1052)\n    at org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:158)\n    at org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:72)\n    at org.apache.nifi.NiFi.main(NiFi.java:301)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowService': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowController': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Flow controller TLS configuration is invalid\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:185)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1086)\n    at org.apache.nifi.web.contextlistener.ApplicationStartupContextListener.contextInitialized(ApplicationStartupContextListener.java:55)\n    ... 37 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowController': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Flow controller TLS configuration is invalid\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:185)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1086)\n    at org.apache.nifi.spring.StandardFlowServiceFactoryBean.getObject(StandardFlowServiceFactoryBean.java:48)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)\n    ... 43 common frames omitted\nCaused by: java.lang.IllegalStateException: Flow controller TLS configuration is invalid\n    at org.apache.nifi.controller.FlowController.&lt;init&gt;(FlowController.java:476)\n    at org.apache.nifi.controller.FlowController.createStandaloneInstance(FlowController.java:388)\n    at org.apache.nifi.spring.FlowControllerFactoryBean.getObject(FlowControllerFactoryBean.java:80)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)\n    ... 50 common frames omitted\nCaused by: org.apache.nifi.security.util.TlsException: The keystore properties are not valid\n    at org.apache.nifi.security.util.SslContextFactory.getKeyManagers(SslContextFactory.java:161)\n    at org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:88)\n    at org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:55)\n    at org.apache.nifi.controller.FlowController.&lt;init&gt;(FlowController.java:473)\n    ... 53 common frames omitted\n2020-12-26 17:00:29,259 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=63ms\n2020-12-26 17:00:29,260 INFO [main] o.e.j.s.h.C._nifi_content_viewer No Spring WebApplicationInitializer types detected on classpath\n2020-12-26 17:00:29,280 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@2d710f1a{nifi-content-viewer,/nifi-content-viewer,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-content-viewer-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-content-viewer-1.12.1.war}\n2020-12-26 17:00:29,313 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=9ms\n2020-12-26 17:00:29,315 WARN [main] o.e.j.webapp.StandardDescriptorProcessor Duplicate mapping from / to default\n2020-12-26 17:00:29,315 INFO [main] o.e.j.s.h.ContextHandler._nifi_docs No Spring WebApplicationInitializer types detected on classpath\n2020-12-26 17:00:29,335 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@29215f06{nifi-docs,/nifi-docs,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-docs-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-docs-1.12.1.war}\n2020-12-26 17:00:29,361 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=6ms\n2020-12-26 17:00:29,363 INFO [main] o.e.j.server.handler.ContextHandler._ No Spring WebApplicationInitializer types detected on classpath\n2020-12-26 17:00:29,379 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@59505b48{nifi-error,/,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-error-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-error-1.12.1.war}\n2020-12-26 17:00:29,399 INFO [main] o.eclipse.jetty.server.AbstractConnector Started ServerConnector@1018bde2{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}\n2020-12-26 17:00:29,400 INFO [main] org.eclipse.jetty.server.Server Started @26147ms\n2020-12-26 17:00:29,400 WARN [main] org.apache.nifi.web.server.JettyServer Failed to start web server... shutting down.\norg.apache.nifi.web.NiFiCoreException: Unable to start Flow Controller.\n    at org.apache.nifi.web.contextlistener.ApplicationStartupContextListener.contextInitialized(ApplicationStartupContextListener.java:88)\n    at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:930)\n    at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:553)\n    at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:889)\n    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:356)\n    at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1445)\n    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1409)\n    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:822)\n    at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:275)\n    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:524)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.server.handler.gzip.GzipHandler.doStart(GzipHandler.java:425)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.server.Server.start(Server.java:407)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.server.Server.doStart(Server.java:371)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.apache.nifi.web.server.JettyServer.start(JettyServer.java:1052)\n    at org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:158)\n    at org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:72)\n    at org.apache.nifi.NiFi.main(NiFi.java:301)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowService': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowController': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Flow controller TLS configuration is invalid\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:185)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1086)\n    at org.apache.nifi.web.contextlistener.ApplicationStartupContextListener.contextInitialized(ApplicationStartupContextListener.java:55)\n    ... 37 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowController': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Flow controller TLS configuration is invalid\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:185)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1086)\n    at org.apache.nifi.spring.StandardFlowServiceFactoryBean.getObject(StandardFlowServiceFactoryBean.java:48)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)\n    ... 43 common frames omitted\nCaused by: java.lang.IllegalStateException: Flow controller TLS configuration is invalid\n    at org.apache.nifi.controller.FlowController.&lt;init&gt;(FlowController.java:476)\n    at org.apache.nifi.controller.FlowController.createStandaloneInstance(FlowController.java:388)\n    at org.apache.nifi.spring.FlowControllerFactoryBean.getObject(FlowControllerFactoryBean.java:80)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)\n    ... 50 common frames omitted\nCaused by: org.apache.nifi.security.util.TlsException: The keystore properties are not valid\n    at org.apache.nifi.security.util.SslContextFactory.getKeyManagers(SslContextFactory.java:161)\n    at org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:88)\n    at org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:55)\n    at org.apache.nifi.controller.FlowController.&lt;init&gt;(FlowController.java:473)\n    ... 53 common frames omitted\n2020-12-26 17:00:29,401 INFO [Thread-1] org.apache.nifi.NiFi Initiating shutdown of Jetty web server...\n2020-12-26 17:00:29,405 INFO [Thread-1] o.eclipse.jetty.server.AbstractConnector Stopped ServerConnector@1018bde2{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}\n2020-12-26 17:00:29,405 INFO [Thread-1] org.eclipse.jetty.server.session node0 Stopped scavenging\n</code></pre>\n<p><strong>These lines are particularly interesting:</strong></p>\n<pre><code>2020-12-26 17:00:28,989 WARN [main] o.a.nifi.security.util.SslContextFactory Some keystore properties are populated (keystore.jks, null, null, JKS) but not valid\n2020-12-26 17:00:28,990 ERROR [main] o.apache.nifi.controller.FlowController Unable to start the flow controller because the TLS configuration was invalid: The keystore properties are not valid\n</code></pre>\n"},{"tags":["java","angular","spring-boot","spring-security","jwt"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1689950938,"post_id":76737077,"comment_id":135289884,"body_markdown":"using jwt tokens as sessions is very insecure.","body":"using jwt tokens as sessions is very insecure."}],"owner":{"account_id":25838033,"reputation":9,"user_id":19574119,"display_name":"TSH"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689934476,"creation_date":1689934476,"question_id":76737077,"body_markdown":"I have implemented Spring Security with JWT into my application and I am using Angular served by Springboot 3; same origin. However, I am encountering some issue after I deploy my application to railway. I encounter JwtTokenMissingException claiming that no jwt token is found in my request header even on my landing page though I did not set the requirement for jwt authentication on the landing page. I set up the code such that requests hitting the server matching url /api/public/ can access without any authentication. Even if I add url &quot;/&quot;, it doesnt work. \r\n\r\nWhen I ng build Angular, it generates index.html file and visual studio code flagged out an error in the line onload=&quot;this.media=&amp;apos;all&amp;apos;&quot; claiming expression required. So I changed it manually to onload=&quot;this.media=&#39;all&#39;;&quot;. But I dont think this is the issue. Either way also did not resolve the issue that I am facing.\r\n\r\nEverything works well in local environment with the same code but not in production. Thus, I am seeking help to find out what is the issue. \r\n\r\nMy railway domain is https://tfipminiproject-production.up.railway.app/\r\n\r\nThe following codes below show snippets of the error I encounter in my deploy log and also snippets of my code which might be causing the issue. \r\nHope to seek all your help! Thank you!\r\n\r\n```\r\nSnippets of Error in Deploy Log:\r\nERROR 1 --- [nio-7055-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: miniProject.server.exception.JwtTokenMissingException: No JWT token found in the request headers] with root cause\r\n﻿miniProject.server.exception.JwtTokenMissingException: No JWT token found in the request headers\r\n﻿at miniProject.server.security.jwt.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:43) ~[classes!/:0.0.1-SNAPSHOT]\r\n﻿at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.9.jar!/:6.0.9]\r\n﻿at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.0.jar!/:6.1.0]\r\n﻿at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.0.jar!/:6.1.0]\r\n﻿at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.0.jar!/:6.1.0]\r\n﻿at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.0.jar!/:6.1.0]\r\n﻿at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.0.jar!/:6.1.0]\r\n﻿at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.0.jar!/:6.1.0]\r\n```\r\n\r\n```\r\npublic class JwtAuthenticationFilter extends OncePerRequestFilter{\r\n   \r\n   @Autowired\r\nprivate JwtUtil jwtUtil;\r\n \r\n@Autowired\r\nprivate UserAuthService userAuthService;\r\n \r\n   @Override\r\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\nthrows ServletException, IOException {\r\n \r\nString header = request.getHeader(&quot;Authorization&quot;);\r\n \r\nif (header == null || !header.startsWith(&quot;Bearer&quot;)) {\r\nthrow new JwtTokenMissingException(&quot;No JWT token found in the request headers&quot;);\r\n}\r\n \r\nString token = header.substring(7);\r\n \r\n// Optional - verification\r\njwtUtil.validateToken(token);\r\n \r\nUserVo userVo = jwtUtil.getUserDataFromToken(token);\r\n \r\nUserDetails userDetails = userAuthService.loadUserByUsername(userVo.getUsername());\r\n \r\nUsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\r\nuserDetails, null, userDetails.getAuthorities());\r\n \r\n       //create an Authentication object with the AuthenticationToken\r\nusernamePasswordAuthenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n \r\nif (SecurityContextHolder.getContext().getAuthentication() == null) {\r\nSecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n}\r\n \r\nfilterChain.doFilter(request, response);\r\n}\r\n}\r\n```\r\n```\r\n@Configuration\r\n@EnableMethodSecurity\r\npublic class WebSecurityConfig {\r\n   \r\n   @Autowired\r\nprivate UserAuthService userAuthService;\r\n \r\n   @Autowired\r\nprivate ApiAuthenticationEntryPoint authenticationEntryPoint;\r\n \r\n   @Bean\r\n   public JwtAuthenticationFilter authenticationJwtTokenFilter() {\r\n       return new JwtAuthenticationFilter();\r\n   }\r\n \r\n   @Bean\r\n   public WebSecurityCustomizer webSecurityCustomizer() {\r\n   return (web) -&gt; web.ignoring().requestMatchers(&quot;/api/public/**&quot;);\r\n   }\r\n \r\n \r\n   @Bean\r\n   public DaoAuthenticationProvider authenticationProvider() {\r\n     DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n      \r\n     authProvider.setUserDetailsService(userAuthService);\r\n     authProvider.setPasswordEncoder(passwordEncoder());\r\n  \r\n     return authProvider;\r\n   }\r\n \r\n \r\n    @Bean\r\n   public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n   http.csrf(csrf -&gt; csrf.disable())\r\n       .exceptionHandling(exception -&gt; exception.authenticationEntryPoint(authenticationEntryPoint))\r\n       .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n       .authorizeHttpRequests(auth -&gt; auth.requestMatchers(&quot;/api/public/**&quot;).permitAll()\r\n       .anyRequest().authenticated());\r\n \r\n       http.authenticationProvider(authenticationProvider());\r\n       \r\n       http.addFilterBefore(authenticationJwtTokenFilter(),   UsernamePasswordAuthenticationFilter.class);\r\n       return http.build();\r\n   }\r\n \r\n       @Bean\r\npublic RegistrationBean jwtAuthFilterRegister(JwtAuthenticationFilter filter) {\r\nFilterRegistrationBean&lt;JwtAuthenticationFilter&gt; registrationBean = new FilterRegistrationBean&lt;&gt;(filter);\r\nregistrationBean.setEnabled(false);\r\nreturn registrationBean;\r\n}\r\n \r\n \r\n   @Bean\r\n   public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfiguration) throws Exception {\r\n       return authConfiguration.getAuthenticationManager();\r\n   }\r\n \r\n   @Bean\r\npublic PasswordEncoder passwordEncoder() {\r\nreturn new BCryptPasswordEncoder();\r\n}\r\n}\r\n```\r\n\r\n","title":"JWT Authentication Error after Deploying to Railway","body":"<p>I have implemented Spring Security with JWT into my application and I am using Angular served by Springboot 3; same origin. However, I am encountering some issue after I deploy my application to railway. I encounter JwtTokenMissingException claiming that no jwt token is found in my request header even on my landing page though I did not set the requirement for jwt authentication on the landing page. I set up the code such that requests hitting the server matching url /api/public/ can access without any authentication. Even if I add url &quot;/&quot;, it doesnt work.</p>\n<p>When I ng build Angular, it generates index.html file and visual studio code flagged out an error in the line onload=&quot;this.media='all'&quot; claiming expression required. So I changed it manually to onload=&quot;this.media='all';&quot;. But I dont think this is the issue. Either way also did not resolve the issue that I am facing.</p>\n<p>Everything works well in local environment with the same code but not in production. Thus, I am seeking help to find out what is the issue.</p>\n<p>My railway domain is <a href=\"https://tfipminiproject-production.up.railway.app/\" rel=\"nofollow noreferrer\">https://tfipminiproject-production.up.railway.app/</a></p>\n<p>The following codes below show snippets of the error I encounter in my deploy log and also snippets of my code which might be causing the issue.\nHope to seek all your help! Thank you!</p>\n<pre><code>Snippets of Error in Deploy Log:\nERROR 1 --- [nio-7055-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: miniProject.server.exception.JwtTokenMissingException: No JWT token found in the request headers] with root cause\n﻿miniProject.server.exception.JwtTokenMissingException: No JWT token found in the request headers\n﻿at miniProject.server.security.jwt.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:43) ~[classes!/:0.0.1-SNAPSHOT]\n﻿at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.9.jar!/:6.0.9]\n﻿at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.0.jar!/:6.1.0]\n﻿at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.0.jar!/:6.1.0]\n﻿at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.0.jar!/:6.1.0]\n﻿at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.0.jar!/:6.1.0]\n﻿at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.0.jar!/:6.1.0]\n﻿at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.0.jar!/:6.1.0]\n</code></pre>\n<pre><code>public class JwtAuthenticationFilter extends OncePerRequestFilter{\n   \n   @Autowired\nprivate JwtUtil jwtUtil;\n \n@Autowired\nprivate UserAuthService userAuthService;\n \n   @Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\nthrows ServletException, IOException {\n \nString header = request.getHeader(&quot;Authorization&quot;);\n \nif (header == null || !header.startsWith(&quot;Bearer&quot;)) {\nthrow new JwtTokenMissingException(&quot;No JWT token found in the request headers&quot;);\n}\n \nString token = header.substring(7);\n \n// Optional - verification\njwtUtil.validateToken(token);\n \nUserVo userVo = jwtUtil.getUserDataFromToken(token);\n \nUserDetails userDetails = userAuthService.loadUserByUsername(userVo.getUsername());\n \nUsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\nuserDetails, null, userDetails.getAuthorities());\n \n       //create an Authentication object with the AuthenticationToken\nusernamePasswordAuthenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n \nif (SecurityContextHolder.getContext().getAuthentication() == null) {\nSecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n}\n \nfilterChain.doFilter(request, response);\n}\n}\n</code></pre>\n<pre><code>@Configuration\n@EnableMethodSecurity\npublic class WebSecurityConfig {\n   \n   @Autowired\nprivate UserAuthService userAuthService;\n \n   @Autowired\nprivate ApiAuthenticationEntryPoint authenticationEntryPoint;\n \n   @Bean\n   public JwtAuthenticationFilter authenticationJwtTokenFilter() {\n       return new JwtAuthenticationFilter();\n   }\n \n   @Bean\n   public WebSecurityCustomizer webSecurityCustomizer() {\n   return (web) -&gt; web.ignoring().requestMatchers(&quot;/api/public/**&quot;);\n   }\n \n \n   @Bean\n   public DaoAuthenticationProvider authenticationProvider() {\n     DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n      \n     authProvider.setUserDetailsService(userAuthService);\n     authProvider.setPasswordEncoder(passwordEncoder());\n  \n     return authProvider;\n   }\n \n \n    @Bean\n   public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n   http.csrf(csrf -&gt; csrf.disable())\n       .exceptionHandling(exception -&gt; exception.authenticationEntryPoint(authenticationEntryPoint))\n       .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n       .authorizeHttpRequests(auth -&gt; auth.requestMatchers(&quot;/api/public/**&quot;).permitAll()\n       .anyRequest().authenticated());\n \n       http.authenticationProvider(authenticationProvider());\n       \n       http.addFilterBefore(authenticationJwtTokenFilter(),   UsernamePasswordAuthenticationFilter.class);\n       return http.build();\n   }\n \n       @Bean\npublic RegistrationBean jwtAuthFilterRegister(JwtAuthenticationFilter filter) {\nFilterRegistrationBean&lt;JwtAuthenticationFilter&gt; registrationBean = new FilterRegistrationBean&lt;&gt;(filter);\nregistrationBean.setEnabled(false);\nreturn registrationBean;\n}\n \n \n   @Bean\n   public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfiguration) throws Exception {\n       return authConfiguration.getAuthenticationManager();\n   }\n \n   @Bean\npublic PasswordEncoder passwordEncoder() {\nreturn new BCryptPasswordEncoder();\n}\n}\n</code></pre>\n"},{"tags":["java","regex","replace","regex-group"],"comments":[{"owner":{"account_id":7745,"reputation":189765,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":13,"creation_date":1244837535,"post_id":988655,"comment_id":797397,"body_markdown":"Can you clarify your question, like maybe give the expected output for that input?","body":"Can you clarify your question, like maybe give the expected output for that input?"}],"answers":[{"comments":[{"owner":{"account_id":4226501,"reputation":13504,"user_id":3459910,"accept_rate":73,"display_name":"winklerrr"},"score":12,"creation_date":1440498835,"post_id":988778,"comment_id":52287518,"body_markdown":"Would have been nice if you would have posted an example output","body":"Would have been nice if you would have posted an example output"},{"owner":{"account_id":286409,"reputation":584,"user_id":585650,"accept_rate":75,"display_name":"Hugo Zaragoza"},"score":7,"creation_date":1451857852,"post_id":988778,"comment_id":56909181,"body_markdown":"This works on the first match, but wont work if there are many groups and you are iterating over them with a while(m.find())","body":"This works on the first match, but wont work if there are many groups and you are iterating over them with a while(m.find())"},{"owner":{"account_id":3887069,"reputation":325,"user_id":4998958,"display_name":"FireLight"},"score":2,"creation_date":1497172054,"post_id":988778,"comment_id":75958644,"body_markdown":"I Agree with Hugo, this is a terrible way to implement the solution... Why on Earth is this the accepted answer and not acdcjunior&#39;s answer - which is the perfect solution: small amount of code, high cohesion and low coupling, much less chance (if not no chance) of unwanted side effects... *sigh*...","body":"I Agree with Hugo, this is a terrible way to implement the solution... Why on Earth is this the accepted answer and not acdcjunior&#39;s answer - which is the perfect solution: small amount of code, high cohesion and low coupling, much less chance (if not no chance) of unwanted side effects... <i>sigh</i>..."},{"owner":{"account_id":6160770,"reputation":1423,"user_id":4802448,"accept_rate":100,"display_name":"Daniel Eisenreich"},"score":0,"creation_date":1515576604,"post_id":988778,"comment_id":83348002,"body_markdown":"This answer is currently not valid. The `m.replaceFirst(&quot;number $2$1&quot;);` should be `m.replaceFirst(&quot;number $3$1&quot;);`","body":"This answer is currently not valid. The <code>m.replaceFirst(&quot;number $2$1&quot;);</code> should be <code>m.replaceFirst(&quot;number $3$1&quot;);</code>"},{"owner":{"account_id":929289,"reputation":1192,"user_id":959470,"accept_rate":38,"display_name":"desgraci"},"score":0,"creation_date":1632810931,"post_id":988778,"comment_id":122586606,"body_markdown":"this is answering the first group, not the OP quesiton &quot;if I can replace only groups&quot; unlike @acdcjunior &#39;s response","body":"this is answering the first group, not the OP quesiton &quot;if I can replace only groups&quot; unlike @acdcjunior &#39;s response"},{"owner":{"account_id":4849033,"reputation":2680,"user_id":3979731,"accept_rate":50,"display_name":"Piotr Boho"},"score":1,"creation_date":1693583927,"post_id":988778,"comment_id":135784981,"body_markdown":"if we want the output proposed in this answer &quot;number example input 6&quot;\nto avoid confusion with a group nr $n, you can name groups  e.g. start, middle, end:\n```Pattern p = Pattern.compile(&quot;(?&lt;start&gt;\\\\d)(?&lt;middle&gt;.*)(?&lt;end&gt;\\\\d)&quot;);```\nthen refer:\n```m.replaceFirst(&quot;number${middle}${start}&quot;);```","body":"if we want the output proposed in this answer &quot;number example input 6&quot; to avoid confusion with a group nr $n, you can name groups  e.g. start, middle, end: <code>Pattern p = Pattern.compile(&quot;(?&lt;start&gt;\\\\d)(?&lt;middle&gt;.*)(?&lt;end&gt;\\\\d)&quot;);</code> then refer: <code>m.replaceFirst(&quot;number${middle}${start}&quot;);</code>"}],"tags":[],"owner":{"account_id":29775,"reputation":12605,"user_id":80714,"accept_rate":91,"display_name":"Chadwick"},"comment_count":6,"down_vote_count":4,"up_vote_count":164,"is_accepted":true,"score":160,"last_activity_date":1676485641,"creation_date":1244837108,"answer_id":988778,"question_id":988655,"body_markdown":"Use `$n` (where n is a digit) to refer to captured subsequences in [`replaceFirst(...)`][1]. I&#39;m assuming you wanted to replace the first group with the literal string *&quot;number&quot;* and the second group with the value of the first group.\r\n\r\n    Pattern p = Pattern.compile(&quot;(\\\\d)(.*)(\\\\d)&quot;);\r\n    String input = &quot;6 example input 4&quot;;\r\n    Matcher m = p.matcher(input);\r\n    if (m.find()) {\r\n        // replace first number with &quot;number&quot; and second number with the first\r\n        // the added group (&quot;(.*)&quot; which is $2) captures unmodified text to include it in the result\r\n        String output = m.replaceFirst(&quot;number$2$1&quot;); // &quot;number example input 6&quot;\r\n    }\r\n\r\nConsider `(\\D+)` for the second group instead of `(.*)`.  `*` is a greedy matcher, and will at first consume the last digit. The matcher will then have to backtrack when it realizes the final `(\\d)` has nothing to match, before it can match to the final digit.\r\n\r\n**Edit**\r\n\r\nYears later, this still gets votes, and the comments and edits (which broke the answer) show there is still confusion on what the question meant. I&#39;ve fixed it, and added the much needed example output.\r\n\r\nThe edits to the replacement (some thought `$2` should not be used) actually broke the answer. Though the continued votes shows the answer hits the key point - Use `$n` references within `replaceFirst(...)` to reuse captured values - the edits lost the fact that unmodified text needs to be captured as well, and used in  the replacement so that &quot;*only groups (not all pattern)*&quot;.\r\n\r\nThe question, and thus this answer, is not concerned with iterating. This is intentionally an [MRE][2].\r\n\r\n\r\n[1]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#replaceFirst%28java.lang.String%29\r\n[2]: https://stackoverflow.com/help/minimal-reproducible-example  ","title":"Can I replace groups in Java regex?","body":"<p>Use <code>$n</code> (where n is a digit) to refer to captured subsequences in <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#replaceFirst%28java.lang.String%29\" rel=\"noreferrer\"><code>replaceFirst(...)</code></a>. I'm assuming you wanted to replace the first group with the literal string <em>&quot;number&quot;</em> and the second group with the value of the first group.</p>\n<pre><code>Pattern p = Pattern.compile(&quot;(\\\\d)(.*)(\\\\d)&quot;);\nString input = &quot;6 example input 4&quot;;\nMatcher m = p.matcher(input);\nif (m.find()) {\n    // replace first number with &quot;number&quot; and second number with the first\n    // the added group (&quot;(.*)&quot; which is $2) captures unmodified text to include it in the result\n    String output = m.replaceFirst(&quot;number$2$1&quot;); // &quot;number example input 6&quot;\n}\n</code></pre>\n<p>Consider <code>(\\D+)</code> for the second group instead of <code>(.*)</code>.  <code>*</code> is a greedy matcher, and will at first consume the last digit. The matcher will then have to backtrack when it realizes the final <code>(\\d)</code> has nothing to match, before it can match to the final digit.</p>\n<p><strong>Edit</strong></p>\n<p>Years later, this still gets votes, and the comments and edits (which broke the answer) show there is still confusion on what the question meant. I've fixed it, and added the much needed example output.</p>\n<p>The edits to the replacement (some thought <code>$2</code> should not be used) actually broke the answer. Though the continued votes shows the answer hits the key point - Use <code>$n</code> references within <code>replaceFirst(...)</code> to reuse captured values - the edits lost the fact that unmodified text needs to be captured as well, and used in  the replacement so that &quot;<em>only groups (not all pattern)</em>&quot;.</p>\n<p>The question, and thus this answer, is not concerned with iterating. This is intentionally an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MRE</a>.</p>\n"},{"tags":[],"owner":{"account_id":149776,"reputation":71,"user_id":362517,"display_name":"ydanneg"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1276092832,"creation_date":1276092832,"answer_id":3006657,"question_id":988655,"body_markdown":"You can use matcher.start() and matcher.end() methods to get the group positions. So using this positions you can easily replace any text.","title":"Can I replace groups in Java regex?","body":"<p>You can use matcher.start() and matcher.end() methods to get the group positions. So using this positions you can easily replace any text.</p>\n"},{"comments":[{"owner":{"account_id":3887069,"reputation":325,"user_id":4998958,"display_name":"FireLight"},"score":2,"creation_date":1497172162,"post_id":20999446,"comment_id":75958662,"body_markdown":"This really should be the accepted answer it&#39;s the most complete and &quot;ready to go&quot; solution without introducing a level of coupling to the accompanying code. Although I would recommend changing the method names of one of those. At first glance it looks like a recursive call in the first method.","body":"This really should be the accepted answer it&#39;s the most complete and &quot;ready to go&quot; solution without introducing a level of coupling to the accompanying code. Although I would recommend changing the method names of one of those. At first glance it looks like a recursive call in the first method."},{"owner":{"account_id":3887069,"reputation":325,"user_id":4998958,"display_name":"FireLight"},"score":0,"creation_date":1497174970,"post_id":20999446,"comment_id":75959319,"body_markdown":"Missed edit opportunity. Take back the part about the recursive call, didn&#39;t analyse the code properly. The overloads work well together","body":"Missed edit opportunity. Take back the part about the recursive call, didn&#39;t analyse the code properly. The overloads work well together"},{"owner":{"account_id":7172249,"reputation":8197,"user_id":5479362,"accept_rate":48,"display_name":"9ilsdx 9rvj 0lo"},"score":0,"creation_date":1604062359,"post_id":20999446,"comment_id":114239380,"body_markdown":"This solution out-of-the-box is fit only to replace single occurence and one group, and because of copying of the full string with each replace would be highly suboptimal for any other purpose. But it&#39;s a good starting point. A pity Java hat a lot of nonsense, but is lacking basic string manipulation facilities.","body":"This solution out-of-the-box is fit only to replace single occurence and one group, and because of copying of the full string with each replace would be highly suboptimal for any other purpose. But it&#39;s a good starting point. A pity Java hat a lot of nonsense, but is lacking basic string manipulation facilities."}],"tags":[],"owner":{"account_id":2077773,"reputation":133288,"user_id":1850609,"display_name":"acdcjunior"},"comment_count":3,"down_vote_count":2,"up_vote_count":76,"is_accepted":false,"score":74,"last_activity_date":1389194030,"creation_date":1389194030,"answer_id":20999446,"question_id":988655,"body_markdown":"You could use [`Matcher#start(group)`][1] and [`Matcher#end(group)`][2] to build a generic replacement method:\r\n\r\n\tpublic static String replaceGroup(String regex, String source, int groupToReplace, String replacement) {\r\n\t\treturn replaceGroup(regex, source, groupToReplace, 1, replacement);\r\n\t}\r\n\t\r\n\tpublic static String replaceGroup(String regex, String source, int groupToReplace, int groupOccurrence, String replacement) {\r\n\t\tMatcher m = Pattern.compile(regex).matcher(source);\r\n\t\tfor (int i = 0; i &lt; groupOccurrence; i++)\r\n\t\t\tif (!m.find()) return source; // pattern not met, may also throw an exception here\r\n\t\treturn new StringBuilder(source).replace(m.start(groupToReplace), m.end(groupToReplace), replacement).toString();\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// replace with &quot;%&quot; what was matched by group 1 \r\n\t\t// input: aaa123ccc\r\n\t\t// output: %123ccc\r\n\t    System.out.println(replaceGroup(&quot;([a-z]+)([0-9]+)([a-z]+)&quot;, &quot;aaa123ccc&quot;, 1, &quot;%&quot;));\r\n\t\t\r\n\t\t// replace with &quot;!!!&quot; what was matched the 4th time by the group 2\r\n\t\t// input: a1b2c3d4e5\r\n\t\t// output: a1b2c3d!!!e5\r\n\t\tSystem.out.println(replaceGroup(&quot;([a-z])(\\\\d)&quot;, &quot;a1b2c3d4e5&quot;, 2, 4, &quot;!!!&quot;));\r\n\t}\r\n\r\nCheck **[online demo here][3]**.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#start%28int%29\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#end%28int%29\r\n  [3]: http://ideone.com/qVTMqm","title":"Can I replace groups in Java regex?","body":"<p>You could use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#start%28int%29\"><code>Matcher#start(group)</code></a> and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#end%28int%29\"><code>Matcher#end(group)</code></a> to build a generic replacement method:</p>\n\n<pre><code>public static String replaceGroup(String regex, String source, int groupToReplace, String replacement) {\n    return replaceGroup(regex, source, groupToReplace, 1, replacement);\n}\n\npublic static String replaceGroup(String regex, String source, int groupToReplace, int groupOccurrence, String replacement) {\n    Matcher m = Pattern.compile(regex).matcher(source);\n    for (int i = 0; i &lt; groupOccurrence; i++)\n        if (!m.find()) return source; // pattern not met, may also throw an exception here\n    return new StringBuilder(source).replace(m.start(groupToReplace), m.end(groupToReplace), replacement).toString();\n}\n\npublic static void main(String[] args) {\n    // replace with \"%\" what was matched by group 1 \n    // input: aaa123ccc\n    // output: %123ccc\n    System.out.println(replaceGroup(\"([a-z]+)([0-9]+)([a-z]+)\", \"aaa123ccc\", 1, \"%\"));\n\n    // replace with \"!!!\" what was matched the 4th time by the group 2\n    // input: a1b2c3d4e5\n    // output: a1b2c3d!!!e5\n    System.out.println(replaceGroup(\"([a-z])(\\\\d)\", \"a1b2c3d4e5\", 2, 4, \"!!!\"));\n}\n</code></pre>\n\n<p>Check <strong><a href=\"http://ideone.com/qVTMqm\">online demo here</a></strong>.</p>\n"},{"tags":[],"owner":{"account_id":5705055,"reputation":1872,"user_id":4508899,"accept_rate":75,"display_name":"Jonas_Hess"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1516697331,"creation_date":1516695609,"answer_id":48397045,"question_id":988655,"body_markdown":"Here is a different solution, that also allows the replacement of a single group in multiple matches.\r\nIt uses stacks to reverse the execution order, so the string operation can be safely executed.\r\n\r\n\tprivate static void demo () {\r\n\t\t\r\n\t\tfinal String sourceString = &quot;hello world!&quot;;\r\n\t\t\r\n\t\tfinal String regex = &quot;(hello) (world)(!)&quot;;\r\n\t\tfinal Pattern pattern = Pattern.compile(regex);\r\n\t\t\r\n\t\tString result = replaceTextOfMatchGroup(sourceString, pattern, 2, world -&gt; world.toUpperCase());\r\n\t\tSystem.out.println(result);  // output: hello WORLD!\r\n\t}\r\n\t\r\n\tpublic static String replaceTextOfMatchGroup(String sourceString, Pattern pattern, int groupToReplace, Function&lt;String,String&gt; replaceStrategy) {\r\n\t\tStack&lt;Integer&gt; startPositions = new Stack&lt;&gt;();\r\n\t\tStack&lt;Integer&gt; endPositions = new Stack&lt;&gt;();\r\n\t\tMatcher matcher = pattern.matcher(sourceString);\r\n\t\t\r\n\t\twhile (matcher.find()) {\r\n\t\t\tstartPositions.push(matcher.start(groupToReplace));\r\n\t\t\tendPositions.push(matcher.end(groupToReplace));\r\n\t\t}\r\n\t\tStringBuilder sb = new StringBuilder(sourceString);\r\n\t\twhile (! startPositions.isEmpty()) {\r\n\t\t\tint start = startPositions.pop();\r\n\t\t\tint end = endPositions.pop();\r\n            if (start &gt;= 0 &amp;&amp; end &gt;= 0) {\r\n\t\t\t    sb.replace(start, end, replaceStrategy.apply(sourceString.substring(start, end)));\r\n\t\t    }\r\n        }\r\n\t\treturn sb.toString();\t\t\r\n\t}","title":"Can I replace groups in Java regex?","body":"<p>Here is a different solution, that also allows the replacement of a single group in multiple matches.\nIt uses stacks to reverse the execution order, so the string operation can be safely executed.</p>\n\n<pre><code>private static void demo () {\n\n    final String sourceString = \"hello world!\";\n\n    final String regex = \"(hello) (world)(!)\";\n    final Pattern pattern = Pattern.compile(regex);\n\n    String result = replaceTextOfMatchGroup(sourceString, pattern, 2, world -&gt; world.toUpperCase());\n    System.out.println(result);  // output: hello WORLD!\n}\n\npublic static String replaceTextOfMatchGroup(String sourceString, Pattern pattern, int groupToReplace, Function&lt;String,String&gt; replaceStrategy) {\n    Stack&lt;Integer&gt; startPositions = new Stack&lt;&gt;();\n    Stack&lt;Integer&gt; endPositions = new Stack&lt;&gt;();\n    Matcher matcher = pattern.matcher(sourceString);\n\n    while (matcher.find()) {\n        startPositions.push(matcher.start(groupToReplace));\n        endPositions.push(matcher.end(groupToReplace));\n    }\n    StringBuilder sb = new StringBuilder(sourceString);\n    while (! startPositions.isEmpty()) {\n        int start = startPositions.pop();\n        int end = endPositions.pop();\n        if (start &gt;= 0 &amp;&amp; end &gt;= 0) {\n            sb.replace(start, end, replaceStrategy.apply(sourceString.substring(start, end)));\n        }\n    }\n    return sb.toString();       \n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":2,"creation_date":1519806846,"post_id":49024941,"comment_id":85054786,"body_markdown":"The non-capturing groups are unnecessary; `\\d(.*)\\d` will suffice.","body":"The non-capturing groups are unnecessary; <code>\\d(.*)\\d</code> will suffice."},{"owner":{"account_id":12404879,"reputation":337,"user_id":9841338,"display_name":"Alexis"},"score":3,"creation_date":1557937385,"post_id":49024941,"comment_id":98936932,"body_markdown":"I don&#39;t understand the `$11` here. Why 11 ?","body":"I don&#39;t understand the <code>$11</code> here. Why 11 ?"},{"owner":{"account_id":12436458,"reputation":668,"user_id":9056664,"display_name":"Yaro"},"score":1,"creation_date":1558259743,"post_id":49024941,"comment_id":99034994,"body_markdown":"@Alexis -  This is a java regex quirk: if group 11 has not been set, java interprets $11 as $1 followed by 1.","body":"@Alexis -  This is a java regex quirk: if group 11 has not been set, java interprets $11 as $1 followed by 1."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1664641654,"post_id":49024941,"comment_id":130520468,"body_markdown":"Won&#39;t this approach result in the regular expression being compiled over and over again, with each use? Is there a similar approach using a precompiled `Pattern`?","body":"Won&#39;t this approach result in the regular expression being compiled over and over again, with each use? Is there a similar approach using a precompiled <code>Pattern</code>?"}],"tags":[],"owner":{"account_id":12436458,"reputation":668,"user_id":9056664,"display_name":"Yaro"},"comment_count":4,"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1521455498,"creation_date":1519806122,"answer_id":49024941,"question_id":988655,"body_markdown":"Sorry to beat a dead horse, but it is kind-of weird that no-one pointed this out - &quot;Yes you can, but this is the opposite of how you use capturing groups in real life&quot;.\r\n\r\nIf you use Regex the way it is meant to be used, the solution is as simple as this:\r\n\r\n    &quot;6 example input 4&quot;.replaceAll(&quot;(?:\\\\d)(.*)(?:\\\\d)&quot;, &quot;number$11&quot;);\r\n\r\nOr as rightfully pointed out by shmosel below,\r\n\r\n    &quot;6 example input 4&quot;.replaceAll(&quot;\\d(.*)\\d&quot;, &quot;number$11&quot;);\r\n\r\n...since in your regex there is no good reason to group the decimals at all. \r\n\r\nYou don&#39;t usually use *capturing* groups on the parts of the string you want to *discard*, you use them on the part of the string you want to *keep*.\r\n\r\nIf you really want groups that you want to replace, what you probably want instead is a templating engine (e.g. moustache, ejs, StringTemplate, ...).\r\n\r\n\r\n----------\r\n\r\n\r\nAs an aside for the curious, even non-capturing groups in regexes are just there for the case that the regex engine needs them to recognize and skip variable text. For example, in\r\n\r\n    (?:abc)*(capture me)(?:bcd)*\r\n\r\nyou need them if your input can look either like &quot;abcabc**capture me**bcdbcd&quot; or &quot;abc**capture me**bcd&quot; or even just &quot;capture me&quot;.\r\n\r\nOr to put it the other way around: if the text is always the same, and you don&#39;t capture it, there is no reason to use groups at all.","title":"Can I replace groups in Java regex?","body":"<p>Sorry to beat a dead horse, but it is kind-of weird that no-one pointed this out - \"Yes you can, but this is the opposite of how you use capturing groups in real life\".</p>\n\n<p>If you use Regex the way it is meant to be used, the solution is as simple as this:</p>\n\n<pre><code>\"6 example input 4\".replaceAll(\"(?:\\\\d)(.*)(?:\\\\d)\", \"number$11\");\n</code></pre>\n\n<p>Or as rightfully pointed out by shmosel below,</p>\n\n<pre><code>\"6 example input 4\".replaceAll(\"\\d(.*)\\d\", \"number$11\");\n</code></pre>\n\n<p>...since in your regex there is no good reason to group the decimals at all. </p>\n\n<p>You don't usually use <em>capturing</em> groups on the parts of the string you want to <em>discard</em>, you use them on the part of the string you want to <em>keep</em>.</p>\n\n<p>If you really want groups that you want to replace, what you probably want instead is a templating engine (e.g. moustache, ejs, StringTemplate, ...).</p>\n\n<hr>\n\n<p>As an aside for the curious, even non-capturing groups in regexes are just there for the case that the regex engine needs them to recognize and skip variable text. For example, in</p>\n\n<pre><code>(?:abc)*(capture me)(?:bcd)*\n</code></pre>\n\n<p>you need them if your input can look either like \"abcabc<strong>capture me</strong>bcdbcd\" or \"abc<strong>capture me</strong>bcd\" or even just \"capture me\".</p>\n\n<p>Or to put it the other way around: if the text is always the same, and you don't capture it, there is no reason to use groups at all.</p>\n"},{"tags":[],"owner":{"account_id":2578068,"reputation":41,"user_id":2235323,"display_name":"whimmy"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1542958941,"creation_date":1542880187,"answer_id":53428097,"question_id":988655,"body_markdown":"replace the password fields from the input:\r\n\r\n    {&quot;_csrf&quot;:[&quot;9d90c85f-ac73-4b15-ad08-ebaa3fa4a005&quot;],&quot;originPassword&quot;:[&quot;uaas&quot;],&quot;newPassword&quot;:[&quot;uaas&quot;],&quot;confirmPassword&quot;:[&quot;uaas&quot;]}\r\n\r\n\r\n\r\n      private static final Pattern PATTERN = Pattern.compile(&quot;.*?password.*?\\&quot;:\\\\[\\&quot;(.*?)\\&quot;\\\\](,\\&quot;|}$)&quot;, Pattern.CASE_INSENSITIVE);\r\n    \r\n      private static String replacePassword(String input, String replacement) {\r\n        Matcher m = PATTERN.matcher(input);\r\n        StringBuffer sb = new StringBuffer();\r\n        while (m.find()) {\r\n          Matcher m2 = PATTERN.matcher(m.group(0));\r\n          if (m2.find()) {\r\n            StringBuilder stringBuilder = new StringBuilder(m2.group(0));\r\n            String result = stringBuilder.replace(m2.start(1), m2.end(1), replacement).toString();\r\n            m.appendReplacement(sb, result);\r\n          }\r\n        }\r\n        m.appendTail(sb);\r\n        return sb.toString();\r\n      }\r\n    \r\n      @Test\r\n      public void test1() {\r\n        String input = &quot;{\\&quot;_csrf\\&quot;:[\\&quot;9d90c85f-ac73-4b15-ad08-ebaa3fa4a005\\&quot;],\\&quot;originPassword\\&quot;:[\\&quot;123\\&quot;],\\&quot;newPassword\\&quot;:[\\&quot;456\\&quot;],\\&quot;confirmPassword\\&quot;:[\\&quot;456\\&quot;]}&quot;;\r\n        String expected = &quot;{\\&quot;_csrf\\&quot;:[\\&quot;9d90c85f-ac73-4b15-ad08-ebaa3fa4a005\\&quot;],\\&quot;originPassword\\&quot;:[\\&quot;**\\&quot;],\\&quot;newPassword\\&quot;:[\\&quot;**\\&quot;],\\&quot;confirmPassword\\&quot;:[\\&quot;**\\&quot;]}&quot;;\r\n        Assert.assertEquals(expected, replacePassword(input, &quot;**&quot;));\r\n      }","title":"Can I replace groups in Java regex?","body":"<p>replace the password fields from the input:</p>\n\n<pre><code>{\"_csrf\":[\"9d90c85f-ac73-4b15-ad08-ebaa3fa4a005\"],\"originPassword\":[\"uaas\"],\"newPassword\":[\"uaas\"],\"confirmPassword\":[\"uaas\"]}\n\n\n\n  private static final Pattern PATTERN = Pattern.compile(\".*?password.*?\\\":\\\\[\\\"(.*?)\\\"\\\\](,\\\"|}$)\", Pattern.CASE_INSENSITIVE);\n\n  private static String replacePassword(String input, String replacement) {\n    Matcher m = PATTERN.matcher(input);\n    StringBuffer sb = new StringBuffer();\n    while (m.find()) {\n      Matcher m2 = PATTERN.matcher(m.group(0));\n      if (m2.find()) {\n        StringBuilder stringBuilder = new StringBuilder(m2.group(0));\n        String result = stringBuilder.replace(m2.start(1), m2.end(1), replacement).toString();\n        m.appendReplacement(sb, result);\n      }\n    }\n    m.appendTail(sb);\n    return sb.toString();\n  }\n\n  @Test\n  public void test1() {\n    String input = \"{\\\"_csrf\\\":[\\\"9d90c85f-ac73-4b15-ad08-ebaa3fa4a005\\\"],\\\"originPassword\\\":[\\\"123\\\"],\\\"newPassword\\\":[\\\"456\\\"],\\\"confirmPassword\\\":[\\\"456\\\"]}\";\n    String expected = \"{\\\"_csrf\\\":[\\\"9d90c85f-ac73-4b15-ad08-ebaa3fa4a005\\\"],\\\"originPassword\\\":[\\\"**\\\"],\\\"newPassword\\\":[\\\"**\\\"],\\\"confirmPassword\\\":[\\\"**\\\"]}\";\n    Assert.assertEquals(expected, replacePassword(input, \"**\"));\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1750956,"reputation":414,"user_id":1600055,"accept_rate":50,"display_name":"Maciek Murawski"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689934164,"creation_date":1689934164,"answer_id":76737036,"question_id":988655,"body_markdown":"Since Java 9 you can use `Matcher.replaceAll`.\r\nThe usage is as follows:\r\n```java\r\nPattern p = Pattern.compile(&quot;(\\\\d)(.*)(\\\\d)&quot;);\r\nString input = &quot;6 example input 4&quot;;\r\nMatcher matcher = p.matcher(input);\r\nString output = matcher.replaceAll(matchResult -&gt; &quot;%s%s%s&quot;.formatted(&quot;number&quot;, matchResult.group(2), matchResult.group(1) ));\r\n```\r\n`output` should be equal to `number example input 6`\r\n\r\n`matchResult.group(0)` is the whole pattern, so groups are indexed from `1`","title":"Can I replace groups in Java regex?","body":"<p>Since Java 9 you can use <code>Matcher.replaceAll</code>.\nThe usage is as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Pattern p = Pattern.compile(&quot;(\\\\d)(.*)(\\\\d)&quot;);\nString input = &quot;6 example input 4&quot;;\nMatcher matcher = p.matcher(input);\nString output = matcher.replaceAll(matchResult -&gt; &quot;%s%s%s&quot;.formatted(&quot;number&quot;, matchResult.group(2), matchResult.group(1) ));\n</code></pre>\n<p><code>output</code> should be equal to <code>number example input 6</code></p>\n<p><code>matchResult.group(0)</code> is the whole pattern, so groups are indexed from <code>1</code></p>\n"}],"owner":{"account_id":32313,"reputation":1311,"user_id":89534,"accept_rate":91,"display_name":"wokena"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":168060,"favorite_count":0,"down_vote_count":0,"up_vote_count":132,"accepted_answer_id":988778,"answer_count":7,"score":132,"last_activity_date":1689934164,"creation_date":1244835558,"question_id":988655,"body_markdown":"I have this code, and I want to know, if I can replace only groups (not all pattern) in Java regex.\r\nCode:\r\n\r\n     //...\r\n     Pattern p = Pattern.compile(&quot;(\\\\d).*(\\\\d)&quot;);\r\n        String input = &quot;6 example input 4&quot;;\r\n        Matcher m = p.matcher(input);\r\n        if (m.find()) {\r\n\r\n            //Now I want replace group one ( (\\\\d) ) with number \r\n           //and group two (too (\\\\d) ) with 1, but I don&#39;t know how.\r\n\r\n        }\r\n     \r\n\r\n","title":"Can I replace groups in Java regex?","body":"<p>I have this code, and I want to know, if I can replace only groups (not all pattern) in Java regex.\nCode:</p>\n\n<pre><code> //...\n Pattern p = Pattern.compile(\"(\\\\d).*(\\\\d)\");\n    String input = \"6 example input 4\";\n    Matcher m = p.matcher(input);\n    if (m.find()) {\n\n        //Now I want replace group one ( (\\\\d) ) with number \n       //and group two (too (\\\\d) ) with 1, but I don't know how.\n\n    }\n</code></pre>\n"},{"tags":["java","sockets","user-interface","server","client"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689935836,"post_id":76736907,"comment_id":135286811,"body_markdown":"Are you going to be *writing* data *at runtime*? That&#39;s important, as then the target is not a resource, but a data file and must be treated as a file in the file system, probably in an app directory off `${user.home}`","body":"Are you going to be <i>writing</i> data <i>at runtime</i>? That&#39;s important, as then the target is not a resource, but a data file and must be treated as a file in the file system, probably in an app directory off <code>${user.home}</code>"},{"owner":{"account_id":26662523,"reputation":37,"user_id":20275134,"display_name":"Kaja S."},"score":0,"creation_date":1689936921,"post_id":76736907,"comment_id":135287004,"body_markdown":"Yes the data is written into the files at runtime.. So I can&#39;t have a resources package then? What do you mean by user.home?","body":"Yes the data is written into the files at runtime.. So I can&#39;t have a resources package then? What do you mean by user.home?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689939377,"post_id":76736907,"comment_id":135287444,"body_markdown":"No you can&#39;t. You want `mkdir &quot;%USERPROFILE%\\.EShop\\data&quot;` from cmd.exe. Put your data files in there","body":"No you can&#39;t. You want <code>mkdir &quot;%USERPROFILE%\\.EShop\\data&quot;</code> from cmd.exe. Put your data files in there"},{"owner":{"account_id":26662523,"reputation":37,"user_id":20275134,"display_name":"Kaja S."},"score":0,"creation_date":1690127691,"post_id":76736907,"comment_id":135306875,"body_markdown":"I honestly have to say I am not quite sure If I got that. \nSo I have to go into the cmd and enter &quot;mkdir &quot;%USERPROFILE%\\.EShop\\data&quot; there. \n\nBut where in intellij do I have to put the files?","body":"I honestly have to say I am not quite sure If I got that.  So I have to go into the cmd and enter &quot;mkdir &quot;%USERPROFILE%\\.EShop\\data&quot; there.   But where in intellij do I have to put the files?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690127890,"post_id":76736907,"comment_id":135306892,"body_markdown":"Yes. You don&#39;t put the files anywhere to do with IntelliJ. But you can drag them into the correct location which you&#39;ll see if you follow that command with `explorer &quot;%USERPROFILE%\\.EShop\\data&quot;`","body":"Yes. You don&#39;t put the files anywhere to do with IntelliJ. But you can drag them into the correct location which you&#39;ll see if you follow that command with <code>explorer &quot;%USERPROFILE%\\.EShop\\data&quot;</code>"}],"owner":{"account_id":26662523,"reputation":37,"user_id":20275134,"display_name":"Kaja S."},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689934091,"creation_date":1689933160,"question_id":76736907,"body_markdown":"I have a question about package structure and reading and writing into files.\r\n\r\nI am coding an eshop to learn java and now implented data exchange via sockets. \r\n\r\nSince I am not using a data bank I am using .txt-files to write articles, new customers etc. into it.\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI now wanted to place the txt files into the server module in a package named &quot;ressources&quot;. But then the compiler always said he couldn&#39;t find the files. \r\nI then named him the exact path to the &quot;ressources&quot; package and the reading worked. \r\n\r\n\tpublic void openForReading(String dataSource) throws FileNotFoundException {\r\n\t\t//New code\r\n\t\tInputStream is = this.getClass().getResourceAsStream(&quot;/&quot; + dataSource);\r\n\t\tInputStreamReader isr = new InputStreamReader(is);\r\n\t\treader = new BufferedReader(isr);\r\n\r\n\t\t//old code, compiler said he couldn&#39;t find the file\r\n\t\t//reader = new BufferedReader(new FileReader(dataSource));\r\n\t}\r\n\r\nBut when I registered a new customer and wrote him into the files he created a new file in the project directory instead of refreshing the file on the server in the package &quot;ressources&quot;. \r\nI could fix that too with this code. but now he only refreshes the files in the directory &quot;out&quot;.\r\n\r\n\tpublic void openForWriting(String dataSource) throws IOException {\r\n\t\t//New code\r\n\t\tURL url = this.getClass().getResource(&quot;/&quot; + dataSource);\t\t\r\n\t\tFile file = new File(url.getPath());\r\n\t    writer = new PrintWriter(new BufferedWriter(new FileWriter(file)));\r\n\r\n\t\t//old code, not working - creates new file\r\n\t\t//writer = new PrintWriter(new BufferedWriter(new FileWriter(dataSource)));\r\n\t}\r\n\r\nIs there a way to refresh the files on the server and in the directory out?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uXPdq.png\r\n  [2]: https://i.stack.imgur.com/cMgsB.png\r\n  [3]: https://i.stack.imgur.com/w77tw.png","title":"Eshop with sockets - file reading/writing problem","body":"<p>I have a question about package structure and reading and writing into files.</p>\n<p>I am coding an eshop to learn java and now implented data exchange via sockets.</p>\n<p>Since I am not using a data bank I am using .txt-files to write articles, new customers etc. into it.\n<a href=\"https://i.stack.imgur.com/uXPdq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uXPdq.png\" alt=\"enter image description here\" /></a></p>\n<p>I now wanted to place the txt files into the server module in a package named &quot;ressources&quot;. But then the compiler always said he couldn't find the files.\nI then named him the exact path to the &quot;ressources&quot; package and the reading worked.</p>\n<pre><code>public void openForReading(String dataSource) throws FileNotFoundException {\n    //New code\n    InputStream is = this.getClass().getResourceAsStream(&quot;/&quot; + dataSource);\n    InputStreamReader isr = new InputStreamReader(is);\n    reader = new BufferedReader(isr);\n\n    //old code, compiler said he couldn't find the file\n    //reader = new BufferedReader(new FileReader(dataSource));\n}\n</code></pre>\n<p>But when I registered a new customer and wrote him into the files he created a new file in the project directory instead of refreshing the file on the server in the package &quot;ressources&quot;.\nI could fix that too with this code. but now he only refreshes the files in the directory &quot;out&quot;.</p>\n<pre><code>public void openForWriting(String dataSource) throws IOException {\n    //New code\n    URL url = this.getClass().getResource(&quot;/&quot; + dataSource);        \n    File file = new File(url.getPath());\n    writer = new PrintWriter(new BufferedWriter(new FileWriter(file)));\n\n    //old code, not working - creates new file\n    //writer = new PrintWriter(new BufferedWriter(new FileWriter(dataSource)));\n}\n</code></pre>\n<p>Is there a way to refresh the files on the server and in the directory out?</p>\n"},{"tags":["java","apache-spark","apache-kafka"],"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":1,"creation_date":1689934490,"post_id":76737020,"comment_id":135286557,"body_markdown":"It&#39;s never a good idea to use `printStackTrace` in your exception handler except for throwaway example code. Just let the exception escape the method. Then you&#39;ll see the stack trace in your log. As you have it now, there is a stack trace printed _somewhere_ (or possibly nowhere), but it&#39;s not in the log.","body":"It&#39;s never a good idea to use <code>printStackTrace</code> in your exception handler except for throwaway example code. Just let the exception escape the method. Then you&#39;ll see the stack trace in your log. As you have it now, there is a stack trace printed <i>somewhere</i> (or possibly nowhere), but it&#39;s not in the log."},{"owner":{"account_id":18423089,"reputation":171,"user_id":13420196,"display_name":"Niko Konovalov"},"score":1,"creation_date":1689936563,"post_id":76737020,"comment_id":135286948,"body_markdown":"Thanks, it help a lot, I saw the error printing out after removing it, was missing configuration, and the Scala version incorrect","body":"Thanks, it help a lot, I saw the error printing out after removing it, was missing configuration, and the Scala version incorrect"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":2,"creation_date":1689944874,"post_id":76737020,"comment_id":135288579,"body_markdown":"FWIW, you don&#39;t really need Spark to read and average a CSV file. Just open the file with a regular CSV library and iterate over it. Or at the very least, you should use Spark Kafka consumer rather than use plain Kafka client API","body":"FWIW, you don&#39;t really need Spark to read and average a CSV file. Just open the file with a regular CSV library and iterate over it. Or at the very least, you should use Spark Kafka consumer rather than use plain Kafka client API"},{"owner":{"account_id":18423089,"reputation":171,"user_id":13420196,"display_name":"Niko Konovalov"},"score":0,"creation_date":1690118183,"post_id":76737020,"comment_id":135305615,"body_markdown":"@OneCricketeer I gave the average as a small example because it was not the root of my problem, the real usage is heavy (creating market data from the futures market order book log)","body":"@OneCricketeer I gave the average as a small example because it was not the root of my problem, the real usage is heavy (creating market data from the futures market order book log)"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1690153330,"post_id":76737020,"comment_id":135309628,"body_markdown":"Still, if you&#39;re only reading a local file on disk, you won&#39;t need Spark... It is outputting data, but in the Spark UI, in the executor logs... You&#39;re looking at logs of the driver app","body":"Still, if you&#39;re only reading a local file on disk, you won&#39;t need Spark... It is outputting data, but in the Spark UI, in the executor logs... You&#39;re looking at logs of the driver app"}],"owner":{"account_id":18423089,"reputation":171,"user_id":13420196,"display_name":"Niko Konovalov"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689934057,"creation_date":1689934057,"question_id":76737020,"body_markdown":"I&#39;m currently building a backend application using a microservice architecture.\r\nOne of my services is an apache spark job runner which uses Apache Spark &amp; Kafka to receive a message with a date range and extract some data from a CSV file in that date range.\r\n\r\nThis is the full code of my service, I&#39;ve put everything into the main and changes the `processMarketDataRequest` method to something more simple like getting the avg price for all the logs in the CSV file for simplicity reasons (so please overlook the unused variable `request`):\r\n\r\n```java\r\npackage com.samurai.lab.sparkjobservice;\r\n\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport org.apache.kafka.clients.consumer.ConsumerRecord;\r\nimport org.apache.kafka.clients.consumer.ConsumerRecords;\r\nimport org.apache.kafka.clients.consumer.KafkaConsumer;\r\nimport org.apache.kafka.common.serialization.StringDeserializer;\r\nimport org.apache.spark.sql.Dataset;\r\nimport org.apache.spark.sql.Row;\r\nimport org.apache.spark.sql.SparkSession;\r\n\r\nimport java.io.IOException;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Paths;\r\nimport java.time.Duration;\r\nimport java.util.Collections;\r\nimport java.util.Properties;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class App2 {\r\n\r\n    private static final ObjectMapper mapper = new ObjectMapper();\r\n    private static final String KAFKA_BROKERS = &quot;localhost:9092&quot;;\r\n    private static final String KAFKA_GROUP = &quot;sparkGroup&quot;;\r\n    private static final String KAFKA_TOPIC = &quot;marketDataRequests&quot;;\r\n    private static final String MARKETDATA_CSV_PATH = &quot;C:/Users/USER/Desktop/TickData/data-12-01-until-12-03-year-2020/fake.csv&quot;;\r\n\r\n    public static void main(String[] args) {\r\n        ExecutorService executor = Executors.newSingleThreadExecutor();\r\n        executor.submit(App2::consume);\r\n    }\r\n\r\n    private static void consume() {\r\n        try (KafkaConsumer&lt;String, String&gt; consumer = createKafkaConsumer()) {\r\n            consumer.subscribe(Collections.singletonList(KAFKA_TOPIC));\r\n\r\n            while (true) {\r\n                ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofMillis(100));\r\n                for (ConsumerRecord&lt;String, String&gt; record : records) {\r\n                    processRecord(record);\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private static KafkaConsumer&lt;String, String&gt; createKafkaConsumer() {\r\n        Properties props = new Properties();\r\n        props.put(&quot;bootstrap.servers&quot;, KAFKA_BROKERS);\r\n        props.put(&quot;group.id&quot;, KAFKA_GROUP);\r\n        props.put(&quot;key.deserializer&quot;, StringDeserializer.class.getName());\r\n        props.put(&quot;value.deserializer&quot;, StringDeserializer.class.getName());\r\n        return new KafkaConsumer&lt;&gt;(props);\r\n    }\r\n\r\n    private static void processRecord(ConsumerRecord&lt;String, String&gt; record) {\r\n            try {\r\n                String jsonMessage = record.value();\r\n                JsonNode rootNode = mapper.readTree(jsonMessage);\r\n\r\n                processMarketDataRequest(rootNode);\r\n            } catch (IOException e) {\r\n                System.out.println(&quot;Error while processing record: &quot; + e.getMessage());\r\n                e.printStackTrace();\r\n            }\r\n    }\r\n\r\n    private static void processMarketDataRequest(JsonNode request) {\r\n        // Create a Spark session\r\n        SparkSession spark = SparkSession.builder()\r\n                .appName(&quot;ClientModeExample&quot;)\r\n                .master(&quot;local[*]&quot;)\r\n                .getOrCreate();\r\n\r\n        // Check if file exists\r\n        if (!Files.exists(Paths.get(MARKETDATA_CSV_PATH))) {\r\n            System.err.println(&quot;File does not exist: &quot; + MARKETDATA_CSV_PATH);\r\n            return;\r\n        }\r\n\r\n        // Read CSV into a DataFrame\r\n        Dataset&lt;Row&gt; df = spark.read().option(&quot;header&quot;, &quot;true&quot;).csv(MARKETDATA_CSV_PATH);\r\n\r\n        // Convert the Price column to double\r\n        Dataset&lt;Row&gt; dfDouble = df.withColumn(&quot;Price&quot;, df.col(&quot;Price&quot;).cast(&quot;double&quot;));\r\n\r\n        // Calculate the average price\r\n        Dataset&lt;Row&gt; avgPrice = dfDouble.agg(org.apache.spark.sql.functions.avg(&quot;Price&quot;).alias(&quot;average_price&quot;));\r\n\r\n        // Print the average price\r\n        avgPrice.show();\r\n\r\n        // Stop the Spark session\r\n        spark.stop();\r\n    }\r\n}\r\n```\r\n\r\n\r\nThis is the full log details from the console:\r\n```console\r\nSLF4J: Class path contains multiple SLF4J providers.\r\nSLF4J: Found provider [org.apache.logging.slf4j.SLF4JServiceProvider@620b29e6]\r\nSLF4J: Found provider [org.slf4j.simple.SimpleServiceProvider@121ff335]\r\nSLF4J: See https://www.slf4j.org/codes.html#multiple_bindings for an explanation.\r\nSLF4J: Actual provider is of type [org.apache.logging.slf4j.SLF4JServiceProvider@620b29e6]\r\nUsing Spark&#39;s default log4j profile: org/apache/spark/log4j2-defaults.properties\r\n23/07/21 13:00:36 INFO SparkContext: Running Spark version 3.4.1\r\n23/07/21 13:00:37 INFO ResourceUtils: ==============================================================\r\n23/07/21 13:00:37 INFO ResourceUtils: No custom resources configured for spark.driver.\r\n23/07/21 13:00:37 INFO ResourceUtils: ==============================================================\r\n23/07/21 13:00:37 INFO SparkContext: Submitted application: ClientModeExample\r\n23/07/21 13:00:37 INFO ResourceProfile: Default ResourceProfile created, executor resources: Map(cores -&gt; name: cores, amount: 1, script: , vendor: , memory -&gt; name: memory, amount: 1024, script: , vendor: , offHeap -&gt; name: offHeap, amount: 0, script: , vendor: ), task resources: Map(cpus -&gt; name: cpus, amount: 1.0)\r\n23/07/21 13:00:37 INFO ResourceProfile: Limiting resource is cpu\r\n23/07/21 13:00:37 INFO ResourceProfileManager: Added ResourceProfile id: 0\r\n23/07/21 13:00:37 INFO SecurityManager: Changing view acls to: USER\r\n23/07/21 13:00:37 INFO SecurityManager: Changing modify acls to: USER\r\n23/07/21 13:00:37 INFO SecurityManager: Changing view acls groups to: \r\n23/07/21 13:00:37 INFO SecurityManager: Changing modify acls groups to: \r\n23/07/21 13:00:37 INFO SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users with view permissions: USER; groups with view permissions: EMPTY; users with modify permissions: USER; groups with modify permissions: EMPTY\r\n23/07/21 13:00:37 INFO Utils: Successfully started service &#39;sparkDriver&#39; on port 5396.\r\n23/07/21 13:00:37 INFO SparkEnv: Registering MapOutputTracker\r\n23/07/21 13:00:37 INFO SparkEnv: Registering BlockManagerMaster\r\n23/07/21 13:00:37 INFO BlockManagerMasterEndpoint: Using org.apache.spark.storage.DefaultTopologyMapper for getting topology information\r\n23/07/21 13:00:37 INFO BlockManagerMasterEndpoint: BlockManagerMasterEndpoint up\r\n23/07/21 13:00:37 INFO ConsumerCoordinator: [Consumer clientId=consumer-sparkGroup-1, groupId=sparkGroup] Revoke previously assigned partitions marketDataRequests-0\r\n23/07/21 13:00:37 INFO ConsumerCoordinator: [Consumer clientId=consumer-sparkGroup-1, groupId=sparkGroup] Member consumer-sparkGroup-1-89cbdb45-88a1-4d93-9817-26920020efe5 sending LeaveGroup request to coordinator DESKTOP-SCGERG2.lan:9092 (id: 2147483647 rack: null) due to the consumer is being closed\r\n23/07/21 13:00:37 INFO ConsumerCoordinator: [Consumer clientId=consumer-sparkGroup-1, groupId=sparkGroup] Resetting generation and member id due to: consumer pro-actively leaving the group\r\n23/07/21 13:00:37 INFO ConsumerCoordinator: [Consumer clientId=consumer-sparkGroup-1, groupId=sparkGroup] Request joining group due to: consumer pro-actively leaving the group\r\n23/07/21 13:00:37 INFO Metrics: Metrics scheduler closed\r\n23/07/21 13:00:37 INFO Metrics: Closing reporter org.apache.kafka.common.metrics.JmxReporter\r\n23/07/21 13:00:37 INFO Metrics: Metrics reporters closed\r\n23/07/21 13:00:37 INFO AppInfoParser: App info kafka.consumer for consumer-sparkGroup-1 unregistered\r\n\r\nProcess finished with exit code 0\r\n```\r\n\r\nSo basically as you can see I&#39;m experiencing a silent shutdown of the process, nothing in the log output indicates an error it simply closes and I&#39;m trying to understand why?\r\n\r\nAny insights on how can I find the error or fix this issue would be welcomed.\r\n\r\nHere is the pom.xml for reference:\r\n```xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.samurai.lab&lt;/groupId&gt;\r\n        &lt;artifactId&gt;samurai-lab&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;artifactId&gt;spark-job-service&lt;/artifactId&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;name&gt;spark-job-service&lt;/name&gt;\r\n    &lt;url&gt;https://maven.apache.org&lt;/url&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;apache-spark.version&gt;3.4.1&lt;/apache-spark.version&gt;\r\n        &lt;apache-kafka.version&gt;3.5.0&lt;/apache-kafka.version&gt;\r\n        &lt;extraJavaTestArgs&gt;\r\n            -XX:+IgnoreUnrecognizedVMOptions\r\n            --add-opens=java.base/java.lang=ALL-UNNAMED\r\n            --add-opens=java.base/java.lang.invoke=ALL-UNNAMED\r\n            --add-opens=java.base/java.lang.reflect=ALL-UNNAMED\r\n            --add-opens=java.base/java.io=ALL-UNNAMED\r\n            --add-opens=java.base/java.net=ALL-UNNAMED\r\n            --add-opens=java.base/java.nio=ALL-UNNAMED\r\n            --add-opens=java.base/java.util=ALL-UNNAMED\r\n            --add-opens=java.base/java.util.concurrent=ALL-UNNAMED\r\n            --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED\r\n            --add-opens=java.base/sun.nio.ch=ALL-UNNAMED\r\n            --add-opens=java.base/sun.nio.cs=ALL-UNNAMED\r\n            --add-opens=java.base/sun.security.action=ALL-UNNAMED\r\n            --add-opens=java.base/sun.util.calendar=ALL-UNNAMED\r\n            -Djdk.reflect.useDirectMethodHandle=false\r\n        &lt;/extraJavaTestArgs&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spark-core_2.13&lt;/artifactId&gt;\r\n            &lt;version&gt;${apache-spark.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spark-sql_2.13&lt;/artifactId&gt;\r\n            &lt;version&gt;${apache-spark.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\r\n            &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\r\n            &lt;version&gt;${apache-kafka.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mongodb.spark&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mongo-spark-connector_2.12&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.11.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;17&lt;/source&gt;\r\n                    &lt;target&gt;17&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n``` \r\n\r\n","title":"Silent shutdown reading CSV file","body":"<p>I'm currently building a backend application using a microservice architecture.\nOne of my services is an apache spark job runner which uses Apache Spark &amp; Kafka to receive a message with a date range and extract some data from a CSV file in that date range.</p>\n<p>This is the full code of my service, I've put everything into the main and changes the <code>processMarketDataRequest</code> method to something more simple like getting the avg price for all the logs in the CSV file for simplicity reasons (so please overlook the unused variable <code>request</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.samurai.lab.sparkjobservice;\n\nimport com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.apache.kafka.clients.consumer.ConsumerRecord;\nimport org.apache.kafka.clients.consumer.ConsumerRecords;\nimport org.apache.kafka.clients.consumer.KafkaConsumer;\nimport org.apache.kafka.common.serialization.StringDeserializer;\nimport org.apache.spark.sql.Dataset;\nimport org.apache.spark.sql.Row;\nimport org.apache.spark.sql.SparkSession;\n\nimport java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.time.Duration;\nimport java.util.Collections;\nimport java.util.Properties;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class App2 {\n\n    private static final ObjectMapper mapper = new ObjectMapper();\n    private static final String KAFKA_BROKERS = &quot;localhost:9092&quot;;\n    private static final String KAFKA_GROUP = &quot;sparkGroup&quot;;\n    private static final String KAFKA_TOPIC = &quot;marketDataRequests&quot;;\n    private static final String MARKETDATA_CSV_PATH = &quot;C:/Users/USER/Desktop/TickData/data-12-01-until-12-03-year-2020/fake.csv&quot;;\n\n    public static void main(String[] args) {\n        ExecutorService executor = Executors.newSingleThreadExecutor();\n        executor.submit(App2::consume);\n    }\n\n    private static void consume() {\n        try (KafkaConsumer&lt;String, String&gt; consumer = createKafkaConsumer()) {\n            consumer.subscribe(Collections.singletonList(KAFKA_TOPIC));\n\n            while (true) {\n                ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofMillis(100));\n                for (ConsumerRecord&lt;String, String&gt; record : records) {\n                    processRecord(record);\n                }\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private static KafkaConsumer&lt;String, String&gt; createKafkaConsumer() {\n        Properties props = new Properties();\n        props.put(&quot;bootstrap.servers&quot;, KAFKA_BROKERS);\n        props.put(&quot;group.id&quot;, KAFKA_GROUP);\n        props.put(&quot;key.deserializer&quot;, StringDeserializer.class.getName());\n        props.put(&quot;value.deserializer&quot;, StringDeserializer.class.getName());\n        return new KafkaConsumer&lt;&gt;(props);\n    }\n\n    private static void processRecord(ConsumerRecord&lt;String, String&gt; record) {\n            try {\n                String jsonMessage = record.value();\n                JsonNode rootNode = mapper.readTree(jsonMessage);\n\n                processMarketDataRequest(rootNode);\n            } catch (IOException e) {\n                System.out.println(&quot;Error while processing record: &quot; + e.getMessage());\n                e.printStackTrace();\n            }\n    }\n\n    private static void processMarketDataRequest(JsonNode request) {\n        // Create a Spark session\n        SparkSession spark = SparkSession.builder()\n                .appName(&quot;ClientModeExample&quot;)\n                .master(&quot;local[*]&quot;)\n                .getOrCreate();\n\n        // Check if file exists\n        if (!Files.exists(Paths.get(MARKETDATA_CSV_PATH))) {\n            System.err.println(&quot;File does not exist: &quot; + MARKETDATA_CSV_PATH);\n            return;\n        }\n\n        // Read CSV into a DataFrame\n        Dataset&lt;Row&gt; df = spark.read().option(&quot;header&quot;, &quot;true&quot;).csv(MARKETDATA_CSV_PATH);\n\n        // Convert the Price column to double\n        Dataset&lt;Row&gt; dfDouble = df.withColumn(&quot;Price&quot;, df.col(&quot;Price&quot;).cast(&quot;double&quot;));\n\n        // Calculate the average price\n        Dataset&lt;Row&gt; avgPrice = dfDouble.agg(org.apache.spark.sql.functions.avg(&quot;Price&quot;).alias(&quot;average_price&quot;));\n\n        // Print the average price\n        avgPrice.show();\n\n        // Stop the Spark session\n        spark.stop();\n    }\n}\n</code></pre>\n<p>This is the full log details from the console:</p>\n<pre><code>SLF4J: Class path contains multiple SLF4J providers.\nSLF4J: Found provider [org.apache.logging.slf4j.SLF4JServiceProvider@620b29e6]\nSLF4J: Found provider [org.slf4j.simple.SimpleServiceProvider@121ff335]\nSLF4J: See https://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual provider is of type [org.apache.logging.slf4j.SLF4JServiceProvider@620b29e6]\nUsing Spark's default log4j profile: org/apache/spark/log4j2-defaults.properties\n23/07/21 13:00:36 INFO SparkContext: Running Spark version 3.4.1\n23/07/21 13:00:37 INFO ResourceUtils: ==============================================================\n23/07/21 13:00:37 INFO ResourceUtils: No custom resources configured for spark.driver.\n23/07/21 13:00:37 INFO ResourceUtils: ==============================================================\n23/07/21 13:00:37 INFO SparkContext: Submitted application: ClientModeExample\n23/07/21 13:00:37 INFO ResourceProfile: Default ResourceProfile created, executor resources: Map(cores -&gt; name: cores, amount: 1, script: , vendor: , memory -&gt; name: memory, amount: 1024, script: , vendor: , offHeap -&gt; name: offHeap, amount: 0, script: , vendor: ), task resources: Map(cpus -&gt; name: cpus, amount: 1.0)\n23/07/21 13:00:37 INFO ResourceProfile: Limiting resource is cpu\n23/07/21 13:00:37 INFO ResourceProfileManager: Added ResourceProfile id: 0\n23/07/21 13:00:37 INFO SecurityManager: Changing view acls to: USER\n23/07/21 13:00:37 INFO SecurityManager: Changing modify acls to: USER\n23/07/21 13:00:37 INFO SecurityManager: Changing view acls groups to: \n23/07/21 13:00:37 INFO SecurityManager: Changing modify acls groups to: \n23/07/21 13:00:37 INFO SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users with view permissions: USER; groups with view permissions: EMPTY; users with modify permissions: USER; groups with modify permissions: EMPTY\n23/07/21 13:00:37 INFO Utils: Successfully started service 'sparkDriver' on port 5396.\n23/07/21 13:00:37 INFO SparkEnv: Registering MapOutputTracker\n23/07/21 13:00:37 INFO SparkEnv: Registering BlockManagerMaster\n23/07/21 13:00:37 INFO BlockManagerMasterEndpoint: Using org.apache.spark.storage.DefaultTopologyMapper for getting topology information\n23/07/21 13:00:37 INFO BlockManagerMasterEndpoint: BlockManagerMasterEndpoint up\n23/07/21 13:00:37 INFO ConsumerCoordinator: [Consumer clientId=consumer-sparkGroup-1, groupId=sparkGroup] Revoke previously assigned partitions marketDataRequests-0\n23/07/21 13:00:37 INFO ConsumerCoordinator: [Consumer clientId=consumer-sparkGroup-1, groupId=sparkGroup] Member consumer-sparkGroup-1-89cbdb45-88a1-4d93-9817-26920020efe5 sending LeaveGroup request to coordinator DESKTOP-SCGERG2.lan:9092 (id: 2147483647 rack: null) due to the consumer is being closed\n23/07/21 13:00:37 INFO ConsumerCoordinator: [Consumer clientId=consumer-sparkGroup-1, groupId=sparkGroup] Resetting generation and member id due to: consumer pro-actively leaving the group\n23/07/21 13:00:37 INFO ConsumerCoordinator: [Consumer clientId=consumer-sparkGroup-1, groupId=sparkGroup] Request joining group due to: consumer pro-actively leaving the group\n23/07/21 13:00:37 INFO Metrics: Metrics scheduler closed\n23/07/21 13:00:37 INFO Metrics: Closing reporter org.apache.kafka.common.metrics.JmxReporter\n23/07/21 13:00:37 INFO Metrics: Metrics reporters closed\n23/07/21 13:00:37 INFO AppInfoParser: App info kafka.consumer for consumer-sparkGroup-1 unregistered\n\nProcess finished with exit code 0\n</code></pre>\n<p>So basically as you can see I'm experiencing a silent shutdown of the process, nothing in the log output indicates an error it simply closes and I'm trying to understand why?</p>\n<p>Any insights on how can I find the error or fix this issue would be welcomed.</p>\n<p>Here is the pom.xml for reference:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;com.samurai.lab&lt;/groupId&gt;\n        &lt;artifactId&gt;samurai-lab&lt;/artifactId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;artifactId&gt;spark-job-service&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;spark-job-service&lt;/name&gt;\n    &lt;url&gt;https://maven.apache.org&lt;/url&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;apache-spark.version&gt;3.4.1&lt;/apache-spark.version&gt;\n        &lt;apache-kafka.version&gt;3.5.0&lt;/apache-kafka.version&gt;\n        &lt;extraJavaTestArgs&gt;\n            -XX:+IgnoreUnrecognizedVMOptions\n            --add-opens=java.base/java.lang=ALL-UNNAMED\n            --add-opens=java.base/java.lang.invoke=ALL-UNNAMED\n            --add-opens=java.base/java.lang.reflect=ALL-UNNAMED\n            --add-opens=java.base/java.io=ALL-UNNAMED\n            --add-opens=java.base/java.net=ALL-UNNAMED\n            --add-opens=java.base/java.nio=ALL-UNNAMED\n            --add-opens=java.base/java.util=ALL-UNNAMED\n            --add-opens=java.base/java.util.concurrent=ALL-UNNAMED\n            --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED\n            --add-opens=java.base/sun.nio.ch=ALL-UNNAMED\n            --add-opens=java.base/sun.nio.cs=ALL-UNNAMED\n            --add-opens=java.base/sun.security.action=ALL-UNNAMED\n            --add-opens=java.base/sun.util.calendar=ALL-UNNAMED\n            -Djdk.reflect.useDirectMethodHandle=false\n        &lt;/extraJavaTestArgs&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n            &lt;artifactId&gt;spark-core_2.13&lt;/artifactId&gt;\n            &lt;version&gt;${apache-spark.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n            &lt;artifactId&gt;spark-sql_2.13&lt;/artifactId&gt;\n            &lt;version&gt;${apache-spark.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\n            &lt;version&gt;${apache-kafka.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n            &lt;version&gt;2.0.7&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mongodb.spark&lt;/groupId&gt;\n            &lt;artifactId&gt;mongo-spark-connector_2.12&lt;/artifactId&gt;\n            &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.11.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;17&lt;/source&gt;\n                    &lt;target&gt;17&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","ssl","weblogic"],"comments":[{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":4,"creation_date":1353417458,"post_id":13470998,"comment_id":18432613,"body_markdown":"Do you realise that ignoring certificate (and host name) verification opens the connections to potential MITM attacks? There seems to be a flaw in your (administrative) security procedures if you have to ignore certificate errors. In addition, you should look at the Certicom TLS options, since you&#39;re visibly not using the default JSSE provider.","body":"Do you realise that ignoring certificate (and host name) verification opens the connections to potential MITM attacks? There seems to be a flaw in your (administrative) security procedures if you have to ignore certificate errors. In addition, you should look at the Certicom TLS options, since you&#39;re visibly not using the default JSSE provider."},{"owner":{"account_id":41689,"reputation":25007,"user_id":121260,"accept_rate":75,"display_name":"Eric Darchis"},"score":0,"creation_date":1353435289,"post_id":13470998,"comment_id":18441780,"body_markdown":"I am well aware of MITM attacks. In fact, if somebody is able to perform a MITM attack on that network, we have much bigger problems than him intercepting the communication. At first, I was considering a step in the software where we retrieve the certificate and if validated by the user, store it for further use. This is however a bigger challenge than the small problem I&#39;m trying to address. I&#39;ll have a look at Certicom TLS options.","body":"I am well aware of MITM attacks. In fact, if somebody is able to perform a MITM attack on that network, we have much bigger problems than him intercepting the communication. At first, I was considering a step in the software where we retrieve the certificate and if validated by the user, store it for further use. This is however a bigger challenge than the small problem I&#39;m trying to address. I&#39;ll have a look at Certicom TLS options."},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":2,"creation_date":1353442104,"post_id":13470998,"comment_id":18444831,"body_markdown":"WebLogic has done horrible, horrible things with SSL, and I pity you for having to try to deal with it. They don&#39;t follow Java standards have have their own screwed up and broken way of messing everything up.","body":"WebLogic has done horrible, horrible things with SSL, and I pity you for having to try to deal with it. They don&#39;t follow Java standards have have their own screwed up and broken way of messing everything up."},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":1,"creation_date":1353603453,"post_id":13470998,"comment_id":18503935,"body_markdown":"You&#39;re sufficiently concerned that there may be someone in a position to eavesdrop, but you&#39;re also assuming that they won&#39;t be able to alter the traffic (MITM). If you&#39;re worried about the former, I&#39;m not sure I&#39;d make this assumption about the latter. (If you really just want to protect against eavesdropping, but not MITM, it might be better to use anonymous cipher suites instead, without certificate.)","body":"You&#39;re sufficiently concerned that there may be someone in a position to eavesdrop, but you&#39;re also assuming that they won&#39;t be able to alter the traffic (MITM). If you&#39;re worried about the former, I&#39;m not sure I&#39;d make this assumption about the latter. (If you really just want to protect against eavesdropping, but not MITM, it might be better to use anonymous cipher suites instead, without certificate.)"},{"owner":{"account_id":41689,"reputation":25007,"user_id":121260,"accept_rate":75,"display_name":"Eric Darchis"},"score":0,"creation_date":1353928432,"post_id":13470998,"comment_id":18582648,"body_markdown":"@Bruno you misunderstood me. I don&#39;t care about eavesdropping. At all. There are much more important communications going on unencrypted on the same network. So if some one is able to place a MITM there, he won&#39;t even need to go that far to get the juicy bits of data. That&#39;s why I don&#39;t care about this SSL certificate.","body":"@Bruno you misunderstood me. I don&#39;t care about eavesdropping. At all. There are much more important communications going on unencrypted on the same network. So if some one is able to place a MITM there, he won&#39;t even need to go that far to get the juicy bits of data. That&#39;s why I don&#39;t care about this SSL certificate."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1382650862,"post_id":13470998,"comment_id":29054586,"body_markdown":"So why use SSL at all? Why not use plaintext? Via an HTTP: URL?","body":"So why use SSL at all? Why not use plaintext? Via an HTTP: URL?"},{"owner":{"account_id":41689,"reputation":25007,"user_id":121260,"accept_rate":75,"display_name":"Eric Darchis"},"score":0,"creation_date":1382900834,"post_id":13470998,"comment_id":29129786,"body_markdown":"@EJP I was accessing a legacy system that imposed HTTPS on some operations and HTTP on others. The actual data was in HTTP. Since then, we ported that app to JBoss and at install-time, we ask the admin to validate the certificate and then only accept this one. On Weblogic, we try to generate a trustStore and let the sysadmin manually configures/import/adapt his stores. Inconvenient but no choice.","body":"@EJP I was accessing a legacy system that imposed HTTPS on some operations and HTTP on others. The actual data was in HTTP. Since then, we ported that app to JBoss and at install-time, we ask the admin to validate the certificate and then only accept this one. On Weblogic, we try to generate a trustStore and let the sysadmin manually configures/import/adapt his stores. Inconvenient but no choice."}],"answers":[{"comments":[{"owner":{"account_id":41689,"reputation":25007,"user_id":121260,"accept_rate":75,"display_name":"Eric Darchis"},"score":0,"creation_date":1353928797,"post_id":13483271,"comment_id":18582810,"body_markdown":"By the way, I just discovered the HostnameVerifier could not be customized either and is failing with &quot;javax.net.ssl.SSLKeyException: [Security:090504]Certificate chain received from intranet.company.com - x.x.x.x failed hostname verification check. Certificate contained *.company.com but check expected intranet.company.com&quot;. Weblogic, I hate you. I really do.","body":"By the way, I just discovered the HostnameVerifier could not be customized either and is failing with &quot;javax.net.ssl.SSLKeyException: [Security:090504]Certificate chain received from intranet.company.com - x.x.x.x failed hostname verification check. Certificate contained *.company.com but check expected intranet.company.com&quot;. Weblogic, I hate you. I really do."}],"tags":[],"owner":{"account_id":41689,"reputation":25007,"user_id":121260,"accept_rate":75,"display_name":"Eric Darchis"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1353597581,"creation_date":1353450321,"answer_id":13483271,"question_id":13470998,"body_markdown":"There is in fact nothing wrong with the code above. The problem seems to lie with Weblogic and this Certicom TLS module. When I look at the _server_ options, _SSL_ and _Advanced_ I see that I can specify a custom HostnameVerifier (SSLMBean.HostnameVerifier) but the only element suggesting the ability to interfere with Certificate validation is deprecated.\r\n\r\nI tried the above code outside of Weblogic and it worked beautifully (fixed the HostnameVerifier in the post though).\r\n\r\nThen I tried to add &quot;-DUseSunHttpHandler=true&quot; to the Weblogic parameters as suggested by ipolevoy in &lt;a href=&quot;https://stackoverflow.com/questions/7109550/handshake-failure-alert-received&quot;&gt;this other question&lt;/a&gt;. It started working.\r\n\r\nThat being said, switching the HTTP handler on an Oracle Service Bus server seems a bit risky. There might well be side-effects that come back to bite me in a few weeks time...\r\n\r\nI also attempted to define my own trustStore and point it to a jssecacert that contained the required key. It was also ignored by Weblogic because it has its own setting of the trustStore for each server. So I&#39;m resorting to ask the administrator to manually import the required keys or point Weblogic to my own store.","title":"Ignoring SSL validation in Java","body":"<p>There is in fact nothing wrong with the code above. The problem seems to lie with Weblogic and this Certicom TLS module. When I look at the <em>server</em> options, <em>SSL</em> and <em>Advanced</em> I see that I can specify a custom HostnameVerifier (SSLMBean.HostnameVerifier) but the only element suggesting the ability to interfere with Certificate validation is deprecated.</p>\n\n<p>I tried the above code outside of Weblogic and it worked beautifully (fixed the HostnameVerifier in the post though).</p>\n\n<p>Then I tried to add \"-DUseSunHttpHandler=true\" to the Weblogic parameters as suggested by ipolevoy in <a href=\"https://stackoverflow.com/questions/7109550/handshake-failure-alert-received\">this other question</a>. It started working.</p>\n\n<p>That being said, switching the HTTP handler on an Oracle Service Bus server seems a bit risky. There might well be side-effects that come back to bite me in a few weeks time...</p>\n\n<p>I also attempted to define my own trustStore and point it to a jssecacert that contained the required key. It was also ignored by Weblogic because it has its own setting of the trustStore for each server. So I'm resorting to ask the administrator to manually import the required keys or point Weblogic to my own store.</p>\n"},{"tags":[],"owner":{"account_id":4569909,"reputation":1,"user_id":3709860,"display_name":"Ajunne"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401949907,"creation_date":1401949907,"answer_id":24053127,"question_id":13470998,"body_markdown":"Actually, this is a know bug in Weblogic versions below 10.3.5, for which there is a patch available from Oracle. Please see document 1474989.1 in My Oracle Support for details.\r\n\r\nThe fix above is a non-recommended (but supported) workaround by Oracle, which will work, but is not the preferred solution.\r\n\r\nThe preferred solution is to download the patch mentioned in the Oracle article, and replace the SSL hostname verifier with the new one which is also part of Weblogic 10.3.5 and above. If you wish to remain compliant with Oracle in terms of support, this is the way to go.","title":"Ignoring SSL validation in Java","body":"<p>Actually, this is a know bug in Weblogic versions below 10.3.5, for which there is a patch available from Oracle. Please see document 1474989.1 in My Oracle Support for details.</p>\n\n<p>The fix above is a non-recommended (but supported) workaround by Oracle, which will work, but is not the preferred solution.</p>\n\n<p>The preferred solution is to download the patch mentioned in the Oracle article, and replace the SSL hostname verifier with the new one which is also part of Weblogic 10.3.5 and above. If you wish to remain compliant with Oracle in terms of support, this is the way to go.</p>\n"}],"owner":{"account_id":41689,"reputation":25007,"user_id":121260,"accept_rate":75,"display_name":"Eric Darchis"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15147,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"accepted_answer_id":13483271,"answer_count":2,"score":11,"last_activity_date":1689933143,"creation_date":1353406574,"question_id":13470998,"body_markdown":"I have to call an HTTP service hosted on web server with an invalid SSL certificate. In dev, I&#39;m importing the certificate with _keytool_ but the certificate will be different on each client install, so I can&#39;t just bundle it.\r\n\r\nForeword: I **DO** know that skipping SSL validation is really ugly. In this specific case, I would not even need SSL and all other communications in the system are over simple HTTP. So I really don&#39;t care about MITM attacks or such. An attacker would not need to go as far as to break SSL because there is no SSL for the data. This is support for a legacy system over which I have no control.\r\n\r\nI&#39;m using `HttpURLConnection` with an `SSLSocketFactory` that has a `NaiveTrustManager` and a `NaiveHostnameVerifier`. This works on some self-signed servers I tried but not on the customer&#39;s site. The error I&#39;m getting is:\r\n\r\n    javax.net.ssl.SSLKeyException: [Security:090477]Certificate chain received from xxxxxxxxxx was not trusted causing SSL handshake failure.\r\n        at com.certicom.tls.interfaceimpl.TLSConnectionImpl.fireException(Unknown Source)\r\n        at com.certicom.tls.interfaceimpl.TLSConnectionImpl.fireAlertSent(Unknown Source)\r\n        at com.certicom.tls.record.handshake.HandshakeHandler.fireAlert(Unknown Source)\r\n        at com.certicom.tls.record.handshake.HandshakeHandler.fireAlert(Unknown Source)\r\n        at com.certicom.tls.record.handshake.ClientStateReceivedServerHello.handle(Unknown Source)\r\n        at com.certicom.tls.record.handshake.HandshakeHandler.handleHandshakeMessage(Unknown Source)\r\n        at com.certicom.tls.record.handshake.HandshakeHandler.handleHandshakeMessages(Unknown Source)\r\n        at com.certicom.tls.record.MessageInterpreter.interpretContent(Unknown Source)\r\n        at com.certicom.tls.record.MessageInterpreter.decryptMessage(Unknown Source)\r\n        at com.certicom.tls.record.ReadHandler.processRecord(Unknown Source)\r\n        at com.certicom.tls.record.ReadHandler.readRecord(Unknown Source)\r\n        at com.certicom.tls.record.ReadHandler.readUntilHandshakeComplete(Unknown Source)\r\n        at com.certicom.tls.interfaceimpl.TLSConnectionImpl.completeHandshake(Unknown Source)\r\n        at com.certicom.tls.record.WriteHandler.write(Unknown Source)\r\n        at com.certicom.io.OutputSSLIOStreamWrapper.write(Unknown Source)\r\n        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\r\n        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)\r\n        at java.io.FilterOutputStream.flush(FilterOutputStream.java:123)\r\n        at weblogic.net.http.HttpURLConnection.writeRequests(HttpURLConnection.java:154)\r\n        at weblogic.net.http.HttpURLConnection.getInputStream(HttpURLConnection.java:358)\r\n        at weblogic.net.http.SOAPHttpsURLConnection.getInputStream(SOAPHttpsURLConnection.java:37)\r\n        at weblogic.net.http.HttpURLConnection.getResponseCode(HttpURLConnection.java:947)\r\n        at (my own code)\r\n\r\nMy `SimpleSocketFactory` looks like:\r\n\r\n    public static final SSLSocketFactory getSocketFactory()\r\n    {\r\n        if ( sslSocketFactory == null ) {\r\n            try {\r\n                // get ssl context\r\n                SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n\r\n                // Create a trust manager that does not validate certificate chains\r\n                TrustManager[] trustAllCerts = new TrustManager[]{\r\n                    new NaiveTrustManager() {\r\n                        public java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n                            log.debug(&quot;getAcceptedIssuers&quot;);\r\n                            return new java.security.cert.X509Certificate[0];\r\n                        }\r\n                        public void checkClientTrusted(\r\n                            java.security.cert.X509Certificate[] certs, String authType) {\r\n                            log.debug(&quot;checkClientTrusted&quot;);\r\n                        }\r\n                        public void checkServerTrusted(\r\n                            java.security.cert.X509Certificate[] certs, String authType) {\r\n                            log.debug(&quot;checkServerTrusted&quot;);\r\n                        }\r\n                    }\r\n                };\r\n\r\n                sc.init(null, trustAllCerts, new java.security.SecureRandom());\r\n                // EDIT: fixed the following line that was redeclaring SSLSocketFactory sslSocketFactory, returning null every time. Same result though.\r\n                sslSocketFactory = sc.getSocketFactory();\r\n\r\n                HttpsURLConnection.setDefaultSSLSocketFactory(sslSocketFactory);\r\n                // EDIT: The following line has no effect\r\n                //HttpsURLConnection.setDefaultHostnameVerifier(new NaiveHostNameVerifier());\r\n\r\n            } catch (KeyManagementException e) {\r\n                log.error (&quot;No SSL algorithm support: &quot; + e.getMessage(), e);\r\n            } catch (NoSuchAlgorithmException e) {\r\n                log.error (&quot;Exception when setting up the Naive key management.&quot;, e);\r\n            }\r\n        }\r\n        return sslSocketFactory;\r\n    }\r\n\r\nThe `NaiveHostnameVerifier` has a way to limit the valid hosts but it&#39;s left null, so basically accepting anything:\r\n\r\n    public class NaiveHostnameVerifier implements HostnameVerifier {\r\n        String[] patterns;\r\n    \r\n        public NaiveHostnameVerifier () {\r\n            this.patterns=null;\r\n        }\r\n    \r\n        public NaiveHostnameVerifier (String[] patterns) {\r\n            this.patterns = patterns;\r\n        }\r\n    \r\n        public boolean verify(String urlHostName,SSLSession session) {\r\n            if (patterns==null || patterns.length==0) {\r\n                return true;\r\n            } else {\r\n                for (String pattern : patterns) {\r\n                    if (urlHostName.matches(pattern)) {\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\nThe usage is like this:\r\n\r\n        try {\r\n            conn = (HttpURLConnection)url.openConnection();\r\n            if (conn instanceof HttpsURLConnection) {\r\n                    ((HttpsURLConnection)conn).setSSLSocketFactory(SimpleSSLSocketFactory.getSocketFactory());\r\n                    // EDIT: added this line, the HV has to be set on connection, not on the factory.\r\n                    ((HttpsURLConnection)conn).setHostnameVerifier(new NaiveHostnameVerifier());\r\n            }\r\n            conn.setDoInput(true);\r\n            conn.setDoOutput(true);\r\n            conn.setRequestMethod(&quot;POST&quot;);\r\n            conn.setRequestProperty(&quot;Content-type&quot;,&quot;application/x-www-form-urlencoded&quot;);\r\n            conn.connect();\r\n\r\n\t\t\tStringBuffer sbContent = new StringBuffer();\r\n\t\t\t// (snip)\r\n\t\t\tDataOutputStream stream = new DataOutputStream(conn.getOutputStream ());\r\n\t\t\tstream.writeBytes(sbContent.toString());\r\n\t\t\tstream.flush();\r\n\t\t\tstream.close();\r\n        } catch (ClassCastException e) {\r\n            log.error(&quot;The URL does not seem to point to a HTTP connection&quot;);\r\n            return null;\r\n        } catch (IOException e) {\r\n            log.error(&quot;Error accessing the requested URL&quot;, e);\r\n            return null;\r\n        }\r\n\r\n\r\nWhen I&#39;m searching on the error message, most people just import the certificate in their store but again, I can&#39;t really do that because I don&#39;t know which certificate it&#39;ll be. My only alternative if this doesn&#39;t work is to make a tool that can download the certificate and add it in an easier way that cryptic command lines but I&#39;d rather let my Java code just ignore the invalid certificate.\r\n\r\nAny idea ?","title":"Ignoring SSL validation in Java","body":"<p>I have to call an HTTP service hosted on web server with an invalid SSL certificate. In dev, I'm importing the certificate with <em>keytool</em> but the certificate will be different on each client install, so I can't just bundle it.</p>\n\n<p>Foreword: I <strong>DO</strong> know that skipping SSL validation is really ugly. In this specific case, I would not even need SSL and all other communications in the system are over simple HTTP. So I really don't care about MITM attacks or such. An attacker would not need to go as far as to break SSL because there is no SSL for the data. This is support for a legacy system over which I have no control.</p>\n\n<p>I'm using <code>HttpURLConnection</code> with an <code>SSLSocketFactory</code> that has a <code>NaiveTrustManager</code> and a <code>NaiveHostnameVerifier</code>. This works on some self-signed servers I tried but not on the customer's site. The error I'm getting is:</p>\n\n<pre><code>javax.net.ssl.SSLKeyException: [Security:090477]Certificate chain received from xxxxxxxxxx was not trusted causing SSL handshake failure.\n    at com.certicom.tls.interfaceimpl.TLSConnectionImpl.fireException(Unknown Source)\n    at com.certicom.tls.interfaceimpl.TLSConnectionImpl.fireAlertSent(Unknown Source)\n    at com.certicom.tls.record.handshake.HandshakeHandler.fireAlert(Unknown Source)\n    at com.certicom.tls.record.handshake.HandshakeHandler.fireAlert(Unknown Source)\n    at com.certicom.tls.record.handshake.ClientStateReceivedServerHello.handle(Unknown Source)\n    at com.certicom.tls.record.handshake.HandshakeHandler.handleHandshakeMessage(Unknown Source)\n    at com.certicom.tls.record.handshake.HandshakeHandler.handleHandshakeMessages(Unknown Source)\n    at com.certicom.tls.record.MessageInterpreter.interpretContent(Unknown Source)\n    at com.certicom.tls.record.MessageInterpreter.decryptMessage(Unknown Source)\n    at com.certicom.tls.record.ReadHandler.processRecord(Unknown Source)\n    at com.certicom.tls.record.ReadHandler.readRecord(Unknown Source)\n    at com.certicom.tls.record.ReadHandler.readUntilHandshakeComplete(Unknown Source)\n    at com.certicom.tls.interfaceimpl.TLSConnectionImpl.completeHandshake(Unknown Source)\n    at com.certicom.tls.record.WriteHandler.write(Unknown Source)\n    at com.certicom.io.OutputSSLIOStreamWrapper.write(Unknown Source)\n    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\n    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)\n    at java.io.FilterOutputStream.flush(FilterOutputStream.java:123)\n    at weblogic.net.http.HttpURLConnection.writeRequests(HttpURLConnection.java:154)\n    at weblogic.net.http.HttpURLConnection.getInputStream(HttpURLConnection.java:358)\n    at weblogic.net.http.SOAPHttpsURLConnection.getInputStream(SOAPHttpsURLConnection.java:37)\n    at weblogic.net.http.HttpURLConnection.getResponseCode(HttpURLConnection.java:947)\n    at (my own code)\n</code></pre>\n\n<p>My <code>SimpleSocketFactory</code> looks like:</p>\n\n<pre><code>public static final SSLSocketFactory getSocketFactory()\n{\n    if ( sslSocketFactory == null ) {\n        try {\n            // get ssl context\n            SSLContext sc = SSLContext.getInstance(\"SSL\");\n\n            // Create a trust manager that does not validate certificate chains\n            TrustManager[] trustAllCerts = new TrustManager[]{\n                new NaiveTrustManager() {\n                    public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n                        log.debug(\"getAcceptedIssuers\");\n                        return new java.security.cert.X509Certificate[0];\n                    }\n                    public void checkClientTrusted(\n                        java.security.cert.X509Certificate[] certs, String authType) {\n                        log.debug(\"checkClientTrusted\");\n                    }\n                    public void checkServerTrusted(\n                        java.security.cert.X509Certificate[] certs, String authType) {\n                        log.debug(\"checkServerTrusted\");\n                    }\n                }\n            };\n\n            sc.init(null, trustAllCerts, new java.security.SecureRandom());\n            // EDIT: fixed the following line that was redeclaring SSLSocketFactory sslSocketFactory, returning null every time. Same result though.\n            sslSocketFactory = sc.getSocketFactory();\n\n            HttpsURLConnection.setDefaultSSLSocketFactory(sslSocketFactory);\n            // EDIT: The following line has no effect\n            //HttpsURLConnection.setDefaultHostnameVerifier(new NaiveHostNameVerifier());\n\n        } catch (KeyManagementException e) {\n            log.error (\"No SSL algorithm support: \" + e.getMessage(), e);\n        } catch (NoSuchAlgorithmException e) {\n            log.error (\"Exception when setting up the Naive key management.\", e);\n        }\n    }\n    return sslSocketFactory;\n}\n</code></pre>\n\n<p>The <code>NaiveHostnameVerifier</code> has a way to limit the valid hosts but it's left null, so basically accepting anything:</p>\n\n<pre><code>public class NaiveHostnameVerifier implements HostnameVerifier {\n    String[] patterns;\n\n    public NaiveHostnameVerifier () {\n        this.patterns=null;\n    }\n\n    public NaiveHostnameVerifier (String[] patterns) {\n        this.patterns = patterns;\n    }\n\n    public boolean verify(String urlHostName,SSLSession session) {\n        if (patterns==null || patterns.length==0) {\n            return true;\n        } else {\n            for (String pattern : patterns) {\n                if (urlHostName.matches(pattern)) {\n                    return true;\n                }\n            }\n            return false;\n        }\n    }\n}\n</code></pre>\n\n<p>The usage is like this:</p>\n\n<pre><code>    try {\n        conn = (HttpURLConnection)url.openConnection();\n        if (conn instanceof HttpsURLConnection) {\n                ((HttpsURLConnection)conn).setSSLSocketFactory(SimpleSSLSocketFactory.getSocketFactory());\n                // EDIT: added this line, the HV has to be set on connection, not on the factory.\n                ((HttpsURLConnection)conn).setHostnameVerifier(new NaiveHostnameVerifier());\n        }\n        conn.setDoInput(true);\n        conn.setDoOutput(true);\n        conn.setRequestMethod(\"POST\");\n        conn.setRequestProperty(\"Content-type\",\"application/x-www-form-urlencoded\");\n        conn.connect();\n\n        StringBuffer sbContent = new StringBuffer();\n        // (snip)\n        DataOutputStream stream = new DataOutputStream(conn.getOutputStream ());\n        stream.writeBytes(sbContent.toString());\n        stream.flush();\n        stream.close();\n    } catch (ClassCastException e) {\n        log.error(\"The URL does not seem to point to a HTTP connection\");\n        return null;\n    } catch (IOException e) {\n        log.error(\"Error accessing the requested URL\", e);\n        return null;\n    }\n</code></pre>\n\n<p>When I'm searching on the error message, most people just import the certificate in their store but again, I can't really do that because I don't know which certificate it'll be. My only alternative if this doesn't work is to make a tool that can download the certificate and add it in an easier way that cryptic command lines but I'd rather let my Java code just ignore the invalid certificate.</p>\n\n<p>Any idea ?</p>\n"},{"tags":["java","junit","controller","mockito","spring-boot-test"],"comments":[{"owner":{"account_id":106565,"reputation":18790,"user_id":283837,"accept_rate":70,"display_name":"Simeon Leyzerzon"},"score":0,"creation_date":1581283548,"post_id":53051236,"comment_id":106370065,"body_markdown":"Did you figure it out?","body":"Did you figure it out?"}],"answers":[{"tags":[],"owner":{"account_id":5590946,"reputation":3040,"user_id":4430183,"display_name":"Emre Savcı"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540964426,"creation_date":1540964426,"answer_id":53076972,"question_id":53051236,"body_markdown":"Try to change \r\n\r\n    public ResponseEntity&lt;String&gt; insertString(String str)\r\n\r\nto\r\n\r\n\r\n    public ResponseEntity&lt;String&gt; insertString(@RequestBody String str)\r\n\r\nI&#39;ve run the test with above code and it passed.\r\n\r\n","title":"Issue with responseEntity . MockMvc.Perform() gives 200 status code even if the ResponseEntity.HttpStatus is 201","body":"<p>Try to change </p>\n\n<pre><code>public ResponseEntity&lt;String&gt; insertString(String str)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>public ResponseEntity&lt;String&gt; insertString(@RequestBody String str)\n</code></pre>\n\n<p>I've run the test with above code and it passed.</p>\n"}],"owner":{"account_id":8682185,"reputation":157,"user_id":6497689,"display_name":"Rohan RM"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1729,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1689933127,"creation_date":1540835720,"question_id":53051236,"body_markdown":"Im trying to mock a controller&#39;s post method. I want it to return status code 201(CREATED) . But it gives Status Code 200.\r\nGiven below is the code\r\nThis is my controller Class        \r\n\r\n    package com.example.demo;\r\n    \r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    public @RestController\r\n    class SomeController{\r\n    \t\r\n    \t@PostMapping(&quot;/insertString&quot;)\r\n    \tpublic ResponseEntity&lt;String&gt; insertString(String str) {\r\n    \t\treturn new ResponseEntity&lt;&gt;(new String(&quot;monster&quot;),HttpStatus.CREATED);\r\n    \t}\r\n    }\r\n\r\nThis is my junit test Suit\r\n\r\n    package com.example.demo;\r\n\r\n    import static org.junit.Assert.*;\r\n    import static org.mockito.Mockito.when;\r\n    import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\r\n    import static org.mockito.Mockito.anyString;\r\n\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.mockito.Mockito.*;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\r\n    import org.springframework.boot.test.mock.mockito.MockBean;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.test.context.junit4.SpringRunner;\r\n    import org.springframework.test.web.servlet.MockMvc;\r\n    import org.springframework.test.web.servlet.MvcResult;\r\n    import org.springframework.test.web.servlet.RequestBuilder;\r\n    import org.springframework.test.web.servlet.request.MockMvcRequestBuilders;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RestController;   \r\n\r\n    @RunWith(SpringRunner.class)\r\n    @WebMvcTest(SomeController.class)\r\n    public class TestClass {\r\n\r\n\t@Autowired\r\n\tprivate MockMvc mockMvc;\r\n\t\r\n\t@MockBean\r\n\tprivate SomeController someController;\r\n\t\r\n\t@Test\r\n\tpublic void test() throws Exception {\r\n\t\t\r\n\t\tResponseEntity&lt;String&gt; entity = new ResponseEntity&lt;&gt;(HttpStatus.CREATED);\r\n\t\t\r\n\t\twhen(someController.insertString(anyString())).thenReturn(entity);\r\n\t\t\r\n\t\tRequestBuilder requestBuilder = MockMvcRequestBuilders\r\n\t\t\t\t.post(&quot;/insertString&quot;)\r\n\t\t\t\t.accept(MediaType.APPLICATION_JSON)\r\n\t\t\t\t.content(&quot;monkey&quot;)\r\n\t\t\t\t.contentType(MediaType.APPLICATION_JSON);\r\n\t\t\r\n\t\tMvcResult result = mockMvc.perform(requestBuilder)\r\n\t\t\t\t.andExpect(status().isCreated())\r\n\t\t\t\t.andReturn();\r\n\t\tSystem.out.println(result.getResponse().getContentAsString());\r\n\t}\r\n\r\n}\r\n\r\nThe errorim getting is\r\n\r\njava.lang.AssertionErrror:Status expected:&lt;201&gt; but was:&lt;200&gt;\r\n\r\n\r\nThough i have mentioned the status as HttpStatus.CREATED in the RequestEntity object, Why am i getting 200.\r\nPlease if someone can help\r\n\r\n\r\n\r\n\r\n","title":"Issue with responseEntity . MockMvc.Perform() gives 200 status code even if the ResponseEntity.HttpStatus is 201","body":"<p>Im trying to mock a controller's post method. I want it to return status code 201(CREATED) . But it gives Status Code 200.\nGiven below is the code\nThis is my controller Class        </p>\n\n<pre><code>package com.example.demo;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\npublic @RestController\nclass SomeController{\n\n    @PostMapping(\"/insertString\")\n    public ResponseEntity&lt;String&gt; insertString(String str) {\n        return new ResponseEntity&lt;&gt;(new String(\"monster\"),HttpStatus.CREATED);\n    }\n}\n</code></pre>\n\n<p>This is my junit test Suit</p>\n\n<pre><code>package com.example.demo;\n\nimport static org.junit.Assert.*;\nimport static org.mockito.Mockito.when;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\nimport static org.mockito.Mockito.anyString;\n\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mockito.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.test.context.junit4.SpringRunner;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.springframework.test.web.servlet.MvcResult;\nimport org.springframework.test.web.servlet.RequestBuilder;\nimport org.springframework.test.web.servlet.request.MockMvcRequestBuilders;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RestController;   \n\n@RunWith(SpringRunner.class)\n@WebMvcTest(SomeController.class)\npublic class TestClass {\n\n@Autowired\nprivate MockMvc mockMvc;\n\n@MockBean\nprivate SomeController someController;\n\n@Test\npublic void test() throws Exception {\n\n    ResponseEntity&lt;String&gt; entity = new ResponseEntity&lt;&gt;(HttpStatus.CREATED);\n\n    when(someController.insertString(anyString())).thenReturn(entity);\n\n    RequestBuilder requestBuilder = MockMvcRequestBuilders\n            .post(\"/insertString\")\n            .accept(MediaType.APPLICATION_JSON)\n            .content(\"monkey\")\n            .contentType(MediaType.APPLICATION_JSON);\n\n    MvcResult result = mockMvc.perform(requestBuilder)\n            .andExpect(status().isCreated())\n            .andReturn();\n    System.out.println(result.getResponse().getContentAsString());\n}\n</code></pre>\n\n<p>}</p>\n\n<p>The errorim getting is</p>\n\n<p>java.lang.AssertionErrror:Status expected:&lt;201> but was:&lt;200></p>\n\n<p>Though i have mentioned the status as HttpStatus.CREATED in the RequestEntity object, Why am i getting 200.\nPlease if someone can help</p>\n"},{"tags":["java","spring-boot","unit-testing","mockito","junit5"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1689157644,"post_id":76669547,"comment_id":135172654,"body_markdown":"Take care of java naming conventions. Names should be camelCase not snake_case.","body":"Take care of java naming conventions. Names should be camelCase not snake_case."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1689157814,"post_id":76669547,"comment_id":135172686,"body_markdown":"The method in utilsclass should not be called at all, because the class which are calling it should be a mock.","body":"The method in utilsclass should not be called at all, because the class which are calling it should be a mock."},{"owner":{"account_id":9134977,"reputation":121,"user_id":6794989,"display_name":"Ramji"},"score":0,"creation_date":1689161319,"post_id":76669547,"comment_id":135173445,"body_markdown":"Noted the point on java naming conventions. And on the mock, I was using `thenCallRealMethod` since the serviceClass was straight forward conversions only.","body":"Noted the point on java naming conventions. And on the mock, I was using <code>thenCallRealMethod</code> since the serviceClass was straight forward conversions only."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1689168031,"post_id":76669547,"comment_id":135175056,"body_markdown":"I think you have to `spy` `serviceClass` if you want to inject mocks","body":"I think you have to <code>spy</code> <code>serviceClass</code> if you want to inject mocks"},{"owner":{"account_id":19935722,"reputation":214,"user_id":14608443,"display_name":"IveGotCodeButImNotACoder"},"score":0,"creation_date":1689179234,"post_id":76669547,"comment_id":135177893,"body_markdown":"can you add access modifiers please to each variable","body":"can you add access modifiers please to each variable"}],"answers":[{"comments":[{"owner":{"account_id":348658,"reputation":2994,"user_id":683482,"accept_rate":77,"display_name":"Jeff Bootsholz"},"score":0,"creation_date":1689475817,"post_id":76675213,"comment_id":135218136,"body_markdown":"You should give definition between annotations and related dependencies used.","body":"You should give definition between annotations and related dependencies used."}],"tags":[],"owner":{"account_id":11459881,"reputation":1,"user_id":8399833,"display_name":"Ibrahim AbdElJalil"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689208566,"creation_date":1689208566,"answer_id":76675213,"question_id":76669547,"body_markdown":"Replace @InjectMocks to @Mock in case you call the service directly from your testcase as @InjectMocks mock the whole class with null values\r\n","title":"How to create/mock a class thats already mocked in Mockito unit tests","body":"<p>Replace @InjectMocks to @Mock in case you call the service directly from your testcase as @InjectMocks mock the whole class with null values</p>\n"},{"tags":[],"owner":{"account_id":9134977,"reputation":121,"user_id":6794989,"display_name":"Ramji"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689932876,"creation_date":1689932876,"answer_id":76736868,"question_id":76669547,"body_markdown":"After searching and reading through some documents I understood that its possible to mock only the immediate class calls while doing the mocks unit tests.\r\n\r\nAlso the right way was to test only the `FileService` by mocking the `ServiceClass` using `when(..).thenReturn(..);` and testing the other methods in the `ServiceClass` and the `UtilsClass` by creating separate test classes like `ServiceClassTest` &amp; `UtilsClassTest` and individually unit test by asserting only the values/conversions that were implemented in the block. ","title":"How to create/mock a class thats already mocked in Mockito unit tests","body":"<p>After searching and reading through some documents I understood that its possible to mock only the immediate class calls while doing the mocks unit tests.</p>\n<p>Also the right way was to test only the <code>FileService</code> by mocking the <code>ServiceClass</code> using <code>when(..).thenReturn(..);</code> and testing the other methods in the <code>ServiceClass</code> and the <code>UtilsClass</code> by creating separate test classes like <code>ServiceClassTest</code> &amp; <code>UtilsClassTest</code> and individually unit test by asserting only the values/conversions that were implemented in the block.</p>\n"}],"owner":{"account_id":9134977,"reputation":121,"user_id":6794989,"display_name":"Ramji"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689932911,"creation_date":1689157384,"question_id":76669547,"body_markdown":"I have a class FileService that needs some unit tests to be run.\r\n\r\n```\r\nClass FileService {\r\n    @Autowired\r\n    ServiceClass serviceClass;\r\n\r\n    method_class_FileService() {\r\n         serviceClass.method_service_class();\r\n    }\r\n}\r\n\r\nClass ServiceClass {\r\n     @Autowired\r\n     UtilsClass utilsClass;\r\n\r\n     method_service_class() {\r\n           utilsClass.method();\r\n     }\r\n}\r\n\r\nClass UtilsClass {\r\n     method() {\r\n     // Some implementation\r\n     }\r\n}\r\n\r\n```\r\n\r\nMockito test case\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\npublic class FileServiceImplTest {\r\n     @InjectMocks\r\n     FileService fileService;\r\n     \r\n     @Mock\r\n     ServiceClass serviceClass;\r\n\r\n     @Mock\r\n     UtilsClass utilsClass;\r\n     \r\n     @Test\r\n     public void testMethod_class_FileService() {\r\n          when(serviceClass.method_service_class()).thenCallRealMethod();\r\n          when(utilsClass.method_service_class()).thenCallRealMethod();\r\n          fileService.method_class_FileService();\r\n          //Assertions\r\n     }\r\n}\r\n```\r\n\r\nWhen the `fileService.method_class_FileService()` is called, it throws NullPointerException while calling the `utilsClass.method_service_class()`\r\n\r\n\r\n\r\n\r\n     \r\n\r\nTried to mock the objects which did not work. \r\nTried to use thenCallRealMethod which also did not work.","title":"How to create/mock a class thats already mocked in Mockito unit tests","body":"<p>I have a class FileService that needs some unit tests to be run.</p>\n<pre><code>Class FileService {\n    @Autowired\n    ServiceClass serviceClass;\n\n    method_class_FileService() {\n         serviceClass.method_service_class();\n    }\n}\n\nClass ServiceClass {\n     @Autowired\n     UtilsClass utilsClass;\n\n     method_service_class() {\n           utilsClass.method();\n     }\n}\n\nClass UtilsClass {\n     method() {\n     // Some implementation\n     }\n}\n\n</code></pre>\n<p>Mockito test case</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class FileServiceImplTest {\n     @InjectMocks\n     FileService fileService;\n     \n     @Mock\n     ServiceClass serviceClass;\n\n     @Mock\n     UtilsClass utilsClass;\n     \n     @Test\n     public void testMethod_class_FileService() {\n          when(serviceClass.method_service_class()).thenCallRealMethod();\n          when(utilsClass.method_service_class()).thenCallRealMethod();\n          fileService.method_class_FileService();\n          //Assertions\n     }\n}\n</code></pre>\n<p>When the <code>fileService.method_class_FileService()</code> is called, it throws NullPointerException while calling the <code>utilsClass.method_service_class()</code></p>\n<p>Tried to mock the objects which did not work.\nTried to use thenCallRealMethod which also did not work.</p>\n"},{"tags":["java","spring","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":166382,"reputation":2080,"user_id":390462,"display_name":"BendaThierry.com"},"score":0,"creation_date":1689675938,"post_id":76710492,"comment_id":135244167,"body_markdown":"@PostRemove is &quot;in transaction&quot; so be careful.\nExample: https://stackoverflow.com/a/38870659/390462","body":"@PostRemove is &quot;in transaction&quot; so be careful. Example: <a href=\"https://stackoverflow.com/a/38870659/390462\">stackoverflow.com/a/38870659/390462</a>"},{"owner":{"account_id":6506515,"reputation":1641,"user_id":5035525,"accept_rate":69,"display_name":"Ramanujan R"},"score":0,"creation_date":1689684288,"post_id":76710492,"comment_id":135245997,"body_markdown":"@BendaThierry.com Yes `@PostRemove` is in transaction. I&#39;m wondering why the second record is not updated then!","body":"@BendaThierry.com Yes <code>@PostRemove</code> is in transaction. I&#39;m wondering why the second record is not updated then!"},{"owner":{"account_id":166382,"reputation":2080,"user_id":390462,"display_name":"BendaThierry.com"},"score":0,"creation_date":1689932289,"post_id":76710492,"comment_id":135286128,"body_markdown":"Simply because your transaction is closed before triggering this `@PostRemove` code. You&#39;ll find it.","body":"Simply because your transaction is closed before triggering this <code>@PostRemove</code> code. You&#39;ll find it."}],"answers":[{"comments":[{"owner":{"account_id":6506515,"reputation":1641,"user_id":5035525,"accept_rate":69,"display_name":"Ramanujan R"},"score":1,"creation_date":1690113638,"post_id":76736835,"comment_id":135305108,"body_markdown":"I don&#39;t think the transaction is closed, otherwise, it would have returned an error. Here, it is not updating the record `second` even if the `@PostRemove` is executed without any error.\nI tried this after making the function with `@DeleteMapping` transactional, but still the same behaviour.\nI agree with you that we should not call repository methods inside controller. My actual project don&#39;t. Here I am using a sample for simplicity.","body":"I don&#39;t think the transaction is closed, otherwise, it would have returned an error. Here, it is not updating the record <code>second</code> even if the <code>@PostRemove</code> is executed without any error. I tried this after making the function with <code>@DeleteMapping</code> transactional, but still the same behaviour. I agree with you that we should not call repository methods inside controller. My actual project don&#39;t. Here I am using a sample for simplicity."},{"owner":{"account_id":166382,"reputation":2080,"user_id":390462,"display_name":"BendaThierry.com"},"score":0,"creation_date":1690202381,"post_id":76736835,"comment_id":135316193,"body_markdown":"Using \n`@Transactional(propagation = Propagation.REQUIRED, readOnly = false)` may help, maybe ?","body":"Using  <code>@Transactional(propagation = Propagation.REQUIRED, readOnly = false)</code> may help, maybe ?"},{"owner":{"account_id":166382,"reputation":2080,"user_id":390462,"display_name":"BendaThierry.com"},"score":0,"creation_date":1690202972,"post_id":76736835,"comment_id":135316345,"body_markdown":"Maybe that is related to your `transient` field not saved by default in database. So JPA events are not supported by this kind of qualifier type.","body":"Maybe that is related to your <code>transient</code> field not saved by default in database. So JPA events are not supported by this kind of qualifier type."},{"owner":{"account_id":166382,"reputation":2080,"user_id":390462,"display_name":"BendaThierry.com"},"score":0,"creation_date":1690203124,"post_id":76736835,"comment_id":135316375,"body_markdown":"Maybe it is related to `@RestController` and `@JsonIgnore` on that field. So your backend don&#39;t care about it and cannot manage it.","body":"Maybe it is related to <code>@RestController</code> and <code>@JsonIgnore</code> on that field. So your backend don&#39;t care about it and cannot manage it."}],"tags":[],"owner":{"account_id":166382,"reputation":2080,"user_id":390462,"display_name":"BendaThierry.com"},"comment_count":4,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689932634,"creation_date":1689932634,"answer_id":76736835,"question_id":76710492,"body_markdown":"Adding `@Transactional` annotation above any method involved in database operations in your (micro)services ensure you are staying inside a current database transaction.\r\n\r\nPlease stop using repositories in the controllers layer. It&#39;s a very bad way to develop things for your application.\r\n\r\nDisable OpenSessionInView property to optimize things around your database queries.\r\n\r\n\r\n","title":"Executing repository method inside Spring Data Jpa @PostRemove is not working","body":"<p>Adding <code>@Transactional</code> annotation above any method involved in database operations in your (micro)services ensure you are staying inside a current database transaction.</p>\n<p>Please stop using repositories in the controllers layer. It's a very bad way to develop things for your application.</p>\n<p>Disable OpenSessionInView property to optimize things around your database queries.</p>\n"}],"owner":{"account_id":6506515,"reputation":1641,"user_id":5035525,"accept_rate":69,"display_name":"Ramanujan R"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689932634,"creation_date":1689665963,"question_id":76710492,"body_markdown":"I have two entities `First` and `Second`. There are `@PreRemove` and `PostRemove` implementations for `First`. The `preRemove()` creates a record in `Second` and caches the result to a transient property `First.second`. This is working. I want the `postRemove` to update the same record, which is not working. It is not updating the record.\r\n\r\n    @Entity\r\n    @Getter@Setter@NoArgsConstructor@AllArgsConstructor\r\n    public class Second {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;id&quot;, nullable = false)\r\n        private Long id;\r\n    \r\n        private String prop;\r\n    }\r\n\r\n\r\n    @Entity\r\n    @Getter@Setter@NoArgsConstructor@AllArgsConstructor\r\n    public class First {\r\n\r\n      @Id\r\n      @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n      @Column(name = &quot;id&quot;)\r\n      private Long id;\r\n\r\n      private String prop;\r\n\r\n      @Transient@JsonIgnore\r\n      private Second second;\r\n\r\n      @PreRemove\r\n      public void preRemove() {\r\n          second = MyBeanUtils.getBean(SecondRepository.class).save(new Second());\r\n      }\r\n\r\n      @PostRemove\r\n      public void postRemove() {\r\n          second.setProp(&quot;after remove&quot;);\r\n          MyBeanUtils.getBean(SecondRepository.class).save(second);\r\n      }\r\n\r\n    }\r\n\r\nController and Repository codes\r\n\r\n    @Repository\r\n    public interface FirstRepository extends JpaRepository&lt;First, Long&gt; {\r\n    }\r\n    @Repository\r\n    public interface SecondRepository extends JpaRepository&lt;Second, Long&gt; {\r\n    }\r\n    @RestController\r\n    @RequiredArgsConstructor\r\n    public class DemoController {\r\n    \r\n        private final FirstRepository repository;\r\n    \r\n        @PostMapping(&quot;/first&quot;)\r\n        public First postBo3(@RequestBody First bo3) {\r\n            return repository.save(bo3);\r\n        }\r\n    \r\n        @DeleteMapping(&quot;/first/{id}&quot;)\r\n        void postBo3(@PathVariable long id) {\r\n            repository.deleteById(id);\r\n        }\r\n    \r\n    }\r\n\r\nWhen I put a break point on the line `second.setProp(&quot;after remove&quot;);` in the `postRemove()`, it shows the field `second` does have an ID, because it is the cached instance after `save()`.\r\n\r\nWith `spring.jpa.show-sql=true`, these are the queries logged. Can&#39;t see any update query and the record is not updated in the database too. Please suggest a reason for this and a workaround.\r\n\r\n    Hibernate: select first0_.id as id1_0_0_, first0_.prop as prop2_0_0_ from first first0_ where first0_.id=?\r\n    Hibernate: insert into second (prop) values (?)\r\n    Hibernate: delete from first where id=?","title":"Executing repository method inside Spring Data Jpa @PostRemove is not working","body":"<p>I have two entities <code>First</code> and <code>Second</code>. There are <code>@PreRemove</code> and <code>PostRemove</code> implementations for <code>First</code>. The <code>preRemove()</code> creates a record in <code>Second</code> and caches the result to a transient property <code>First.second</code>. This is working. I want the <code>postRemove</code> to update the same record, which is not working. It is not updating the record.</p>\n<pre><code>@Entity\n@Getter@Setter@NoArgsConstructor@AllArgsConstructor\npublic class Second {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n\n    private String prop;\n}\n\n\n@Entity\n@Getter@Setter@NoArgsConstructor@AllArgsConstructor\npublic class First {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  @Column(name = &quot;id&quot;)\n  private Long id;\n\n  private String prop;\n\n  @Transient@JsonIgnore\n  private Second second;\n\n  @PreRemove\n  public void preRemove() {\n      second = MyBeanUtils.getBean(SecondRepository.class).save(new Second());\n  }\n\n  @PostRemove\n  public void postRemove() {\n      second.setProp(&quot;after remove&quot;);\n      MyBeanUtils.getBean(SecondRepository.class).save(second);\n  }\n\n}\n</code></pre>\n<p>Controller and Repository codes</p>\n<pre><code>@Repository\npublic interface FirstRepository extends JpaRepository&lt;First, Long&gt; {\n}\n@Repository\npublic interface SecondRepository extends JpaRepository&lt;Second, Long&gt; {\n}\n@RestController\n@RequiredArgsConstructor\npublic class DemoController {\n\n    private final FirstRepository repository;\n\n    @PostMapping(&quot;/first&quot;)\n    public First postBo3(@RequestBody First bo3) {\n        return repository.save(bo3);\n    }\n\n    @DeleteMapping(&quot;/first/{id}&quot;)\n    void postBo3(@PathVariable long id) {\n        repository.deleteById(id);\n    }\n\n}\n</code></pre>\n<p>When I put a break point on the line <code>second.setProp(&quot;after remove&quot;);</code> in the <code>postRemove()</code>, it shows the field <code>second</code> does have an ID, because it is the cached instance after <code>save()</code>.</p>\n<p>With <code>spring.jpa.show-sql=true</code>, these are the queries logged. Can't see any update query and the record is not updated in the database too. Please suggest a reason for this and a workaround.</p>\n<pre><code>Hibernate: select first0_.id as id1_0_0_, first0_.prop as prop2_0_0_ from first first0_ where first0_.id=?\nHibernate: insert into second (prop) values (?)\nHibernate: delete from first where id=?\n</code></pre>\n"},{"tags":["java","visual-studio-code","error-messaging"],"answers":[{"tags":[],"owner":{"account_id":24435058,"reputation":6292,"user_id":18359438,"display_name":"MingJie-MSFT"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1651565696,"creation_date":1651565696,"answer_id":72096525,"question_id":72064275,"body_markdown":"The method of opening file is wrong. The problem is that a single file cannot be recognized as a project. The correct way to open a java file is to open folder first and then the file.\r\n\r\n","title":"Java Error Vs code: (class_Name).java is a non-project file, only syntax errors are reported","body":"<p>The method of opening file is wrong. The problem is that a single file cannot be recognized as a project. The correct way to open a java file is to open folder first and then the file.</p>\n"},{"tags":[],"owner":{"account_id":18459141,"reputation":351,"user_id":13447096,"display_name":"Suchint "},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689932422,"creation_date":1689932422,"answer_id":76736806,"question_id":72064275,"body_markdown":"You need to right-click on the parent folder of the file you are working on in your current workspace and then click on &quot;Add Folder To Java Source Path&quot;\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2QVem.png","title":"Java Error Vs code: (class_Name).java is a non-project file, only syntax errors are reported","body":"<p>You need to right-click on the parent folder of the file you are working on in your current workspace and then click on &quot;Add Folder To Java Source Path&quot;\n<a href=\"https://i.stack.imgur.com/2QVem.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2QVem.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":23539402,"reputation":49,"user_id":17583849,"display_name":"Abdelrahmane Khaldi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5335,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":72096525,"answer_count":2,"score":0,"last_activity_date":1689932422,"creation_date":1651271576,"question_id":72064275,"body_markdown":"this error keeps showing while I run any java program on vs code, the program gets executed with no problem but the error keeps showing","title":"Java Error Vs code: (class_Name).java is a non-project file, only syntax errors are reported","body":"<p>this error keeps showing while I run any java program on vs code, the program gets executed with no problem but the error keeps showing</p>\n"},{"tags":["java","amazon-web-services","amazon-ec2","ec2-api-tools"],"comments":[{"owner":{"account_id":8623,"reputation":34484,"user_id":15625,"accept_rate":65,"display_name":"bortzmeyer"},"score":0,"creation_date":1318516250,"post_id":7652247,"comment_id":9440416,"body_markdown":"Do note there is a similar question for the shell users http://stackoverflow.com/questions/2644742/getting-id-of-an-instance-newly-launched-with-ec2-api-tools and the answer is the same, you have to poll (test repeatedly).","body":"Do note there is a similar question for the shell users <a href=\"http://stackoverflow.com/questions/2644742/getting-id-of-an-instance-newly-launched-with-ec2-api-tools\" title=\"getting id of an instance newly launched with ec2 api tools\">stackoverflow.com/questions/2644742/&hellip;</a> and the answer is the same, you have to poll (test repeatedly)."}],"answers":[{"comments":[{"owner":{"account_id":245126,"reputation":2810,"user_id":518445,"accept_rate":83,"display_name":"kanap008"},"score":0,"creation_date":1317796698,"post_id":7655176,"comment_id":9304379,"body_markdown":"thanks @Jonners. I was able to make it work. Thanks for your help.","body":"thanks @Jonners. I was able to make it work. Thanks for your help."}],"tags":[],"owner":{"account_id":83310,"reputation":9796,"user_id":233653,"accept_rate":100,"display_name":"Eight-Bit Guru"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1317770883,"creation_date":1317770883,"answer_id":7655176,"question_id":7652247,"body_markdown":"There is no event model or other signal raised by the SDK to tell you when an EC2 object changes state - the only way to find out is to issue a DescribeXXXXXXXX call on the object on a repeated basis, say once every 30 seconds, until the state field changes.\r\n\r\nThere&#39;s a finite minimum time for the call to execute and respond, so you need to find an interval that doesn&#39;t fire requests before the prior one has completed. Or simply wait for the response, and then wait another &#39;n&#39; seconds before re-issuing the call. You also don&#39;t want to spam the AWS API with rapid requests, even if they&#39;re timed between responses. In my controller application, I set the interval at 30 seconds, issue the request, wait for the response, and then subtract the elapsed time from the interval and sleep that long. In a multithreaded model, I can thereby track state changes on many objects simultaneously without swamping either my local CPU or the API.\r\n\r\nOnce the change of state has been detected (and assuming the new state is whet you expect - don&#39;t forget to handle failure modes) you can get a wide variety of descriptive information, including public DNS address (in the case of instance objects) from the structure returned in the API response object.","title":"EC2 Java Api Wait till Ec2 Instance gets created.","body":"<p>There is no event model or other signal raised by the SDK to tell you when an EC2 object changes state - the only way to find out is to issue a DescribeXXXXXXXX call on the object on a repeated basis, say once every 30 seconds, until the state field changes.</p>\n\n<p>There's a finite minimum time for the call to execute and respond, so you need to find an interval that doesn't fire requests before the prior one has completed. Or simply wait for the response, and then wait another 'n' seconds before re-issuing the call. You also don't want to spam the AWS API with rapid requests, even if they're timed between responses. In my controller application, I set the interval at 30 seconds, issue the request, wait for the response, and then subtract the elapsed time from the interval and sleep that long. In a multithreaded model, I can thereby track state changes on many objects simultaneously without swamping either my local CPU or the API.</p>\n\n<p>Once the change of state has been detected (and assuming the new state is whet you expect - don't forget to handle failure modes) you can get a wide variety of descriptive information, including public DNS address (in the case of instance objects) from the structure returned in the API response object.</p>\n"},{"tags":[],"owner":{"account_id":34729,"reputation":747,"user_id":98177,"accept_rate":67,"display_name":"Dennis"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1465165833,"creation_date":1465165833,"answer_id":37647430,"question_id":7652247,"body_markdown":"Actually, you can POLL to find out the status of an instance. Here is some Bash code to do that, just adapt it to JAVA. You MAY have a similar command in the Java SDK so that you don&#39;t have to do an execution of Bash from Java. The command &#39;ec2-describe-instances&#39; comes from the [Amazon AWS CLI][1]. I would start out the function or method to wait for running state to test if instance is &#39;pending&#39;, and fail if it is not starting or &#39;pending&#39;. Then record the time, and give it a max of let&#39;s say 3 minutes, and just keep polling for &#39;running&#39; status in a loop, checking for the 3 minute limit. Return to the calling point whichever comes first, &#39;not started&#39;,&#39;startup time exceeded&#39;, or &#39;running&#39;.\r\n\r\n        setInstanceStatus () {\r\n      instanceStatus=`ec2-describe-instances $INSTANCE_ID -C $CERTIFICATE_FILE -K $PRIVATE_KEY --region $REGION -U $AWS_URL`\r\n    \r\n      is_pending=&quot;`echo $instanceStatus|grep -c &quot; pending &quot;`&quot;\r\n      is_running=&quot;`echo $instanceStatus|grep -c &quot; running &quot;`&quot;\r\n      is_shutting_down=&quot;`echo $instanceStatus|grep -c &quot; shutting-down &quot;`&quot;\r\n      is_terminated=&quot;`echo $instanceStatus|grep -c &quot; terminated &quot;`&quot;\r\n      is_stopping=&quot;`echo $instanceStatus|grep -c &quot; stopping &quot;`&quot;\r\n      is_stopped=&quot;`echo $instanceStatus|grep -c &quot; stopped &quot;`&quot;\r\n    \r\n      if   [ &quot;$is_pending&quot; -eq &quot;1&quot; ]; then\r\n        status=&quot;pending&quot;\r\n      elif [  &quot;$is_running&quot; -eq &quot;1&quot; ]; then\r\n        status=&quot;running&quot;\r\n      elif [  &quot;$is_shutting_down&quot; -eq &quot;1&quot; ]; then\r\n        status=&quot;shutting-down&quot;\r\n      elif [  &quot;$is_terminated&quot; -eq &quot;1&quot; ]; then\r\n        status=&quot;terminated&quot;\r\n      elif [  &quot;$is_stopping&quot; -eq &quot;1&quot; ]; then\r\n        status=&quot;stopping&quot;\r\n      elif [  &quot;$is_stopped&quot; -eq &quot;1&quot; ]; then\r\n        status=&quot;stopped&quot;\r\n      else\r\n        status=&quot;bad-instance-state&quot;\r\n      fi\r\n    }\r\n\r\n  [1]: http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-DescribeInstances.html\r\n\r\n","title":"EC2 Java Api Wait till Ec2 Instance gets created.","body":"<p>Actually, you can POLL to find out the status of an instance. Here is some Bash code to do that, just adapt it to JAVA. You MAY have a similar command in the Java SDK so that you don't have to do an execution of Bash from Java. The command 'ec2-describe-instances' comes from the <a href=\"http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-DescribeInstances.html\" rel=\"nofollow\">Amazon AWS CLI</a>. I would start out the function or method to wait for running state to test if instance is 'pending', and fail if it is not starting or 'pending'. Then record the time, and give it a max of let's say 3 minutes, and just keep polling for 'running' status in a loop, checking for the 3 minute limit. Return to the calling point whichever comes first, 'not started','startup time exceeded', or 'running'.</p>\n\n<pre><code>    setInstanceStatus () {\n  instanceStatus=`ec2-describe-instances $INSTANCE_ID -C $CERTIFICATE_FILE -K $PRIVATE_KEY --region $REGION -U $AWS_URL`\n\n  is_pending=\"`echo $instanceStatus|grep -c \" pending \"`\"\n  is_running=\"`echo $instanceStatus|grep -c \" running \"`\"\n  is_shutting_down=\"`echo $instanceStatus|grep -c \" shutting-down \"`\"\n  is_terminated=\"`echo $instanceStatus|grep -c \" terminated \"`\"\n  is_stopping=\"`echo $instanceStatus|grep -c \" stopping \"`\"\n  is_stopped=\"`echo $instanceStatus|grep -c \" stopped \"`\"\n\n  if   [ \"$is_pending\" -eq \"1\" ]; then\n    status=\"pending\"\n  elif [  \"$is_running\" -eq \"1\" ]; then\n    status=\"running\"\n  elif [  \"$is_shutting_down\" -eq \"1\" ]; then\n    status=\"shutting-down\"\n  elif [  \"$is_terminated\" -eq \"1\" ]; then\n    status=\"terminated\"\n  elif [  \"$is_stopping\" -eq \"1\" ]; then\n    status=\"stopping\"\n  elif [  \"$is_stopped\" -eq \"1\" ]; then\n    status=\"stopped\"\n  else\n    status=\"bad-instance-state\"\n  fi\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1712951,"reputation":3348,"user_id":1570601,"accept_rate":50,"display_name":"JRun"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689932341,"creation_date":1689932341,"answer_id":76736795,"question_id":7652247,"body_markdown":"This is what I&#39;m doing. If there&#39;s a more elegant way to do it I would love to see it.\r\n\r\n    \t\tCallable&lt;String&gt; getInstanceMetadata = () -&gt; {\r\n\t\t\t  Instance instance = null;\r\n\t\t\t  while (null == instance) {\r\n\t\t\t\t// Describe the instance to check its state\r\n\t\t\t\tThread.sleep(10 * 1000);\r\n\t\t\t\t//Each reservation is a representation of a request that may be tens of nodes.\r\n\t\t\t\tList&lt;Reservation&gt; reservations = ec2.describeInstances().getReservations();\r\n\t\t\t\t//create a stream of instances from all reservations\r\n\t\t\t\tStream&lt;Instance&gt; instancesStream = reservations.stream().flatMap(reservation -&gt; reservation.getInstances().stream());\r\n\t\t\t\t//filter the stream to find the instance with the instanceId\r\n\t\t\t\tinstance = instancesStream.filter(i -&gt; i.getInstanceId().equals(instanceId)).findFirst().orElse(null);\r\n\t\t\t}\r\n\r\n\t\t\tString publicIp = instance.getPublicIpAddress();\r\n\t\t\tassert instance.getInstanceId() == instanceId;\r\n\r\n\t\t\tlog.debug(&quot;Successfully created ec2 node {} with public IP {}&quot;, instance.getInstanceId(), publicIp);\r\n            return instance.getInstanceId()\r\n\t\t};\r\n\r\n\t\tTimeLimiter timeLimiter = SimpleTimeLimiter.create(Executors.newSingleThreadExecutor());","title":"EC2 Java Api Wait till Ec2 Instance gets created.","body":"<p>This is what I'm doing. If there's a more elegant way to do it I would love to see it.</p>\n<pre><code>        Callable&lt;String&gt; getInstanceMetadata = () -&gt; {\n          Instance instance = null;\n          while (null == instance) {\n            // Describe the instance to check its state\n            Thread.sleep(10 * 1000);\n            //Each reservation is a representation of a request that may be tens of nodes.\n            List&lt;Reservation&gt; reservations = ec2.describeInstances().getReservations();\n            //create a stream of instances from all reservations\n            Stream&lt;Instance&gt; instancesStream = reservations.stream().flatMap(reservation -&gt; reservation.getInstances().stream());\n            //filter the stream to find the instance with the instanceId\n            instance = instancesStream.filter(i -&gt; i.getInstanceId().equals(instanceId)).findFirst().orElse(null);\n        }\n\n        String publicIp = instance.getPublicIpAddress();\n        assert instance.getInstanceId() == instanceId;\n\n        log.debug(&quot;Successfully created ec2 node {} with public IP {}&quot;, instance.getInstanceId(), publicIp);\n        return instance.getInstanceId()\n    };\n\n    TimeLimiter timeLimiter = SimpleTimeLimiter.create(Executors.newSingleThreadExecutor());\n</code></pre>\n"}],"owner":{"account_id":245126,"reputation":2810,"user_id":518445,"accept_rate":83,"display_name":"kanap008"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3253,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":7655176,"answer_count":3,"score":9,"last_activity_date":1689932341,"creation_date":1317752078,"question_id":7652247,"body_markdown":"I have just started using Amazon EC2 API in Java. \r\n\r\nI have created instances using ec2.runInstances(runInstancesRequest);\r\n\r\nBut it will take some time for the instance to get launched (typically 1-2 mins).\r\nI need to get the public DNS of the machine via Java EC2 API.\r\n\r\nHow do I know when the instances change from &quot;pending&quot; state to &quot;processed&quot; state, and How can I get the public DNS of the EC2 instance through the EC2 API.\r\n\r\nThanks in advance.\r\nKanna","title":"EC2 Java Api Wait till Ec2 Instance gets created.","body":"<p>I have just started using Amazon EC2 API in Java. </p>\n\n<p>I have created instances using ec2.runInstances(runInstancesRequest);</p>\n\n<p>But it will take some time for the instance to get launched (typically 1-2 mins).\nI need to get the public DNS of the machine via Java EC2 API.</p>\n\n<p>How do I know when the instances change from \"pending\" state to \"processed\" state, and How can I get the public DNS of the EC2 instance through the EC2 API.</p>\n\n<p>Thanks in advance.\nKanna</p>\n"},{"tags":["java","servlets","request"],"comments":[{"owner":{"account_id":226074,"reputation":4120,"user_id":486920,"accept_rate":75,"display_name":"ch4nd4n"},"score":0,"creation_date":1358340509,"post_id":14358776,"comment_id":19963375,"body_markdown":"What exactly is the plan to monitor the server call? If this can be delayed job or typical post action analysis job why not use Logger?","body":"What exactly is the plan to monitor the server call? If this can be delayed job or typical post action analysis job why not use Logger?"},{"owner":{"account_id":1073910,"reputation":6049,"user_id":1072484,"accept_rate":71,"display_name":"Peter Wooster"},"score":2,"creation_date":1358340535,"post_id":14358776,"comment_id":19963385,"body_markdown":"and have you determined that those Date instances are costing a lot of cpu time per request?  I suspect it&#39;s a tiny fraction of the socket i/o time.","body":"and have you determined that those Date instances are costing a lot of cpu time per request?  I suspect it&#39;s a tiny fraction of the socket i/o time."},{"owner":{"account_id":226074,"reputation":4120,"user_id":486920,"accept_rate":75,"display_name":"ch4nd4n"},"score":1,"creation_date":1358340644,"post_id":14358776,"comment_id":19963455,"body_markdown":"Exactly, I suspect, creation of 50 to 60 data object is not a big toll on CPU or Memory.","body":"Exactly, I suspect, creation of 50 to 60 data object is not a big toll on CPU or Memory."},{"owner":{"account_id":396855,"reputation":15238,"user_id":760656,"display_name":"Ramesh PVK"},"score":0,"creation_date":1358343019,"post_id":14358776,"comment_id":19964736,"body_markdown":"First of all, what is that you are trying to achieve. Log the time in some log file.","body":"First of all, what is that you are trying to achieve. Log the time in some log file."}],"answers":[{"comments":[{"owner":{"account_id":226074,"reputation":4120,"user_id":486920,"accept_rate":75,"display_name":"ch4nd4n"},"score":0,"creation_date":1358340800,"post_id":14358884,"comment_id":19963537,"body_markdown":"I suspect `getDateHeader` utilizes `Date` class to return `long` value. So I don&#39;t think its any different.","body":"I suspect <code>getDateHeader</code> utilizes <code>Date</code> class to return <code>long</code> value. So I don&#39;t think its any different."}],"tags":[],"owner":{"account_id":1932421,"reputation":72673,"user_id":1741542,"accept_rate":75,"display_name":"Olaf Dietsche"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1689932146,"creation_date":1358340564,"answer_id":14358884,"question_id":14358776,"body_markdown":"[HttpServletRequest.getDateHeader](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getDateHeader%28java.lang.String%29) gives you a timestamp as a `long` value.\r\n\r\nAlthough this is from the request header and *not* the received time, it might work since it provides milliseconds since the epoch.\r\n\r\nYou can also look into [Filter](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html), which allows you to \r\n\r\n&gt; Examples that have been identified for this design are:  \r\n1. Authentication Filters  \r\n2. *Logging and Auditing Filters*  \r\n...\r\n\r\n[Event Listeners](http://docs.oracle.com/cd/B15904_01/web.1012/b14017/filters.htm#i1000654) might be another facility, where you can hook into the processing of a servlet.\r\n\r\nBack to your question:\r\n\r\nServletActionContext.getRequest() -&gt; HttpServletRequest.getSession() -&gt; \r\n[HttpSession.getLastAccessedTime](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#getLastAccessedTime%28%29)\r\n\r\n&gt; Returns the last time the client sent a request associated with this session, as the number of milliseconds since midnight January 1, 1970 GMT, and marked by the time the container received the request.\r\n","title":"Request receive timestamp w/o application layer code","body":"<p><a href=\"http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getDateHeader%28java.lang.String%29\" rel=\"nofollow noreferrer\">HttpServletRequest.getDateHeader</a> gives you a timestamp as a <code>long</code> value.</p>\n<p>Although this is from the request header and <em>not</em> the received time, it might work since it provides milliseconds since the epoch.</p>\n<p>You can also look into <a href=\"http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html\" rel=\"nofollow noreferrer\">Filter</a>, which allows you to</p>\n<blockquote>\n<p>Examples that have been identified for this design are:</p>\n</blockquote>\n<ol>\n<li>Authentication Filters</li>\n<li><em>Logging and Auditing Filters</em><br />\n...</li>\n</ol>\n<p><a href=\"http://docs.oracle.com/cd/B15904_01/web.1012/b14017/filters.htm#i1000654\" rel=\"nofollow noreferrer\">Event Listeners</a> might be another facility, where you can hook into the processing of a servlet.</p>\n<p>Back to your question:</p>\n<p>ServletActionContext.getRequest() -&gt; HttpServletRequest.getSession() -&gt;\n<a href=\"http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#getLastAccessedTime%28%29\" rel=\"nofollow noreferrer\">HttpSession.getLastAccessedTime</a></p>\n<blockquote>\n<p>Returns the last time the client sent a request associated with this session, as the number of milliseconds since midnight January 1, 1970 GMT, and marked by the time the container received the request.</p>\n</blockquote>\n"}],"owner":{"account_id":955813,"reputation":417,"user_id":1117189,"accept_rate":35,"display_name":"Zohaib"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5378,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689932146,"creation_date":1358340254,"question_id":14358776,"body_markdown":"I want to basically monitor the server calls on java side. So is there any way I can directly obtain the timestamp when request was received .\r\n\r\nIn other words,I do not want to explicitly make Date Objects and find out the timestamp. Rather I am interested if there&#39;s any timestamp parameter utility provided with Request Object.\r\n\r\nSomething provided by ServletActionContext.getRequest() or any available solution without the need to code to create Date() objects and find out.\r\n\r\nThe reason I am saying is I have around 50-60 server calls and may be even more in future in my application so each time i need code in application layer rather use this ready-made facility.\r\n","title":"Request receive timestamp w/o application layer code","body":"<p>I want to basically monitor the server calls on java side. So is there any way I can directly obtain the timestamp when request was received .</p>\n\n<p>In other words,I do not want to explicitly make Date Objects and find out the timestamp. Rather I am interested if there's any timestamp parameter utility provided with Request Object.</p>\n\n<p>Something provided by ServletActionContext.getRequest() or any available solution without the need to code to create Date() objects and find out.</p>\n\n<p>The reason I am saying is I have around 50-60 server calls and may be even more in future in my application so each time i need code in application layer rather use this ready-made facility.</p>\n"},{"tags":["java","android","gecko","geckoview"],"answers":[{"tags":[],"owner":{"account_id":11639319,"reputation":1404,"user_id":8524395,"accept_rate":82,"display_name":"Mario"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689931973,"creation_date":1689931545,"answer_id":76736712,"question_id":76734508,"body_markdown":"I finally managed to figure it out, leaving the answer here for anyone else who needs it :)\r\n\r\nSo basically it seems that GeckoView already has some sort of handling for new tab/window creations, you just have to override `onNewSession` in your `GeckoSession.NavigationDelegate` class to load the new session (tab) into your GeckoView view.\r\n\r\nSo this did it for me\r\n```java\r\n@Override\r\npublic GeckoResult&lt;GeckoSession&gt; onNewSession(GeckoSession session, String uri) {\r\n    GeckoSession newSession = new GeckoSession();\r\n    [your GeckoView instance].setSession(newSession);\r\n\r\n    return GeckoResult.fromValue(newSession);\r\n}\r\n```\r\n\r\nIt seems that the `return GeckoResult.fromValue(newSession)` line is like telling GeckoView &quot;Yeah! we&#39;ve created a new session and here it is, please load the new tab  data onto it&quot;\r\n\r\nNote that this will work only for the first attempt to open a new tab/window, then if you try to open another new tab from the first new tab it may stop working. That&#39;s because we have to apply our `GeckoSession.NavigationDelegate` class to the newly creation session(s) as well. Something like this will do\r\n```java\r\nnewSession.setNavigationDelegate([your NavigationDelegate class here]);\r\n```\r\n\r\n---\r\n\r\nThanks to https://github.com/mozilla/gecko-dev/blob/241cba7e1f351ddd8a70a8ca05eeb78bca038b75/mobile/android/geckoview_example/src/main/java/org/mozilla/geckoview_example/GeckoViewActivity.java#L2181 and https://github.com/mozilla/geckoview/issues/142#issuecomment-654211899 for helping me with this\r\n\r\nAlso it&#39;s safe to not use `onLoadRequest` for this purpose anymore (it&#39;s actually better to remove it if you&#39;re still using it to handle new tabs)","title":"How to handle any new tab/window creations in GeckoView properly?","body":"<p>I finally managed to figure it out, leaving the answer here for anyone else who needs it :)</p>\n<p>So basically it seems that GeckoView already has some sort of handling for new tab/window creations, you just have to override <code>onNewSession</code> in your <code>GeckoSession.NavigationDelegate</code> class to load the new session (tab) into your GeckoView view.</p>\n<p>So this did it for me</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic GeckoResult&lt;GeckoSession&gt; onNewSession(GeckoSession session, String uri) {\n    GeckoSession newSession = new GeckoSession();\n    [your GeckoView instance].setSession(newSession);\n\n    return GeckoResult.fromValue(newSession);\n}\n</code></pre>\n<p>It seems that the <code>return GeckoResult.fromValue(newSession)</code> line is like telling GeckoView &quot;Yeah! we've created a new session and here it is, please load the new tab  data onto it&quot;</p>\n<p>Note that this will work only for the first attempt to open a new tab/window, then if you try to open another new tab from the first new tab it may stop working. That's because we have to apply our <code>GeckoSession.NavigationDelegate</code> class to the newly creation session(s) as well. Something like this will do</p>\n<pre class=\"lang-java prettyprint-override\"><code>newSession.setNavigationDelegate([your NavigationDelegate class here]);\n</code></pre>\n<hr />\n<p>Thanks to <a href=\"https://github.com/mozilla/gecko-dev/blob/241cba7e1f351ddd8a70a8ca05eeb78bca038b75/mobile/android/geckoview_example/src/main/java/org/mozilla/geckoview_example/GeckoViewActivity.java#L2181\" rel=\"nofollow noreferrer\">https://github.com/mozilla/gecko-dev/blob/241cba7e1f351ddd8a70a8ca05eeb78bca038b75/mobile/android/geckoview_example/src/main/java/org/mozilla/geckoview_example/GeckoViewActivity.java#L2181</a> and <a href=\"https://github.com/mozilla/geckoview/issues/142#issuecomment-654211899\" rel=\"nofollow noreferrer\">https://github.com/mozilla/geckoview/issues/142#issuecomment-654211899</a> for helping me with this</p>\n<p>Also it's safe to not use <code>onLoadRequest</code> for this purpose anymore (it's actually better to remove it if you're still using it to handle new tabs)</p>\n"}],"owner":{"account_id":11639319,"reputation":1404,"user_id":8524395,"accept_rate":82,"display_name":"Mario"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76736712,"answer_count":1,"score":0,"last_activity_date":1689931973,"creation_date":1689901217,"question_id":76734508,"body_markdown":"So I&#39;ve been trying to power my app using the Mozilla GeckoView package instead of the Google WebView one, and one issue that I am trying to get through is the way new tab or new window creations are handled.\r\n\r\nI looked up the lovely internet about it and all I could find is https://stackoverflow.com/a/76157635/8524395\r\n\r\nWhich by the way is a great example that works fine, However it doesn&#39;t work for example if we do like this:\r\n\r\n```html\r\n&lt;form action=&quot;&quot; method=&quot;post&quot; target=&quot;_blank&quot;&gt;\r\n    &lt;input type=&quot;submit&quot; name&quot;sbtn&quot; value=&quot;submit&quot; /&gt;\r\n&lt;/form&gt;\r\n```\r\nIn the above HTML code we are submitting a form in a new tab. how can I handle this in my GeckoView session? I searched enough for a way to handle this scenario but all the results were very restrictive.\r\n\r\nCan we maybe get the submitted form data and create the request manually then send the result page to the GeckoView view? Any ideas on how can this be done, or how does Firefox for Android do it?\r\n\r\nAny feedback will be much appreciated :)","title":"How to handle any new tab/window creations in GeckoView properly?","body":"<p>So I've been trying to power my app using the Mozilla GeckoView package instead of the Google WebView one, and one issue that I am trying to get through is the way new tab or new window creations are handled.</p>\n<p>I looked up the lovely internet about it and all I could find is <a href=\"https://stackoverflow.com/a/76157635/8524395\">https://stackoverflow.com/a/76157635/8524395</a></p>\n<p>Which by the way is a great example that works fine, However it doesn't work for example if we do like this:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;form action=&quot;&quot; method=&quot;post&quot; target=&quot;_blank&quot;&gt;\n    &lt;input type=&quot;submit&quot; name&quot;sbtn&quot; value=&quot;submit&quot; /&gt;\n&lt;/form&gt;\n</code></pre>\n<p>In the above HTML code we are submitting a form in a new tab. how can I handle this in my GeckoView session? I searched enough for a way to handle this scenario but all the results were very restrictive.</p>\n<p>Can we maybe get the submitted form data and create the request manually then send the result page to the GeckoView view? Any ideas on how can this be done, or how does Firefox for Android do it?</p>\n<p>Any feedback will be much appreciated :)</p>\n"},{"tags":["java","spring","maven"],"comments":[{"owner":{"account_id":4862517,"reputation":1544,"user_id":3921725,"display_name":"Alex Roig"},"score":1,"creation_date":1498211892,"post_id":44718345,"comment_id":76419126,"body_markdown":"Seems like this class has been removed from SpringBoot 2.x but some dependencies require SpringBoot 1.x. If you don&#39;t require any specific feature of SpringBoot 2, please specify the 1.5.3 version in the POM instead of LATEST.","body":"Seems like this class has been removed from SpringBoot 2.x but some dependencies require SpringBoot 1.x. If you don&#39;t require any specific feature of SpringBoot 2, please specify the 1.5.3 version in the POM instead of LATEST."},{"owner":{"account_id":4862517,"reputation":1544,"user_id":3921725,"display_name":"Alex Roig"},"score":0,"creation_date":1498211899,"post_id":44718345,"comment_id":76419134,"body_markdown":"Related issue: https://stackoverflow.com/questions/44031949/spring-boot-2-0-0-m1-where-is-the-package-org-springframework-bind","body":"Related issue: <a href=\"https://stackoverflow.com/questions/44031949/spring-boot-2-0-0-m1-where-is-the-package-org-springframework-bind\" title=\"spring boot 2 0 0 m1 where is the package org springframework bind\">stackoverflow.com/questions/44031949/&hellip;</a>"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":7,"creation_date":1498212640,"post_id":44718345,"comment_id":76419610,"body_markdown":"Using LATEST is a very bad idea to manage your dependencies. Use an explicit version.","body":"Using LATEST is a very bad idea to manage your dependencies. Use an explicit version."},{"owner":{"account_id":9849441,"reputation":1502,"user_id":7295936,"accept_rate":38,"display_name":"FrozzenFinger"},"score":0,"creation_date":1498217982,"post_id":44718345,"comment_id":76423105,"body_markdown":"@AlexRoig thw it worked but i have an other error that i never had before :  java.lang.NoClassDefFoundError: Could not initialize class com.fasterxml.jackson.databind.SerializationConfig it will be solved by adding the corresponding dependency but i never used jackson before and it was working perfectly can you explain why ?","body":"@AlexRoig thw it worked but i have an other error that i never had before :  java.lang.NoClassDefFoundError: Could not initialize class com.fasterxml.jackson.databind.SerializationConfig it will be solved by adding the corresponding dependency but i never used jackson before and it was working perfectly can you explain why ?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1498222892,"post_id":44718345,"comment_id":76426344,"body_markdown":"Where on earth is Spring 5 coming from?! As stated don&#39;t use LATEST you probably overriding/messing with dependencies in one of your other modules, don&#39;t. You want to use Spring Boot then let boot manage the dependencies for you.","body":"Where on earth is Spring 5 coming from?! As stated don&#39;t use LATEST you probably overriding/messing with dependencies in one of your other modules, don&#39;t. You want to use Spring Boot then let boot manage the dependencies for you."},{"owner":{"account_id":9849441,"reputation":1502,"user_id":7295936,"accept_rate":38,"display_name":"FrozzenFinger"},"score":0,"creation_date":1498223566,"post_id":44718345,"comment_id":76426821,"body_markdown":"@M.Deinum i removed all the latest !","body":"@M.Deinum i removed all the latest !"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1498223678,"post_id":44718345,"comment_id":76426906,"body_markdown":"In this one but you have 4 child projects. Also make sure you don&#39;t have mixed versions of spring boot, have a `spring.version` property etc.","body":"In this one but you have 4 child projects. Also make sure you don&#39;t have mixed versions of spring boot, have a <code>spring.version</code> property etc."},{"owner":{"account_id":9849441,"reputation":1502,"user_id":7295936,"accept_rate":38,"display_name":"FrozzenFinger"},"score":0,"creation_date":1498224600,"post_id":44718345,"comment_id":76427543,"body_markdown":"@M.Deinum yeah thx i&#39;ve found in an other child a redefinition of spring dependency ! I&#39;ve some thing now i can&#39;t launch the app two times in a raw it says that the local host 8080 is already in use i have to close eclipse and launch again maybe you know why ?","body":"@M.Deinum yeah thx i&#39;ve found in an other child a redefinition of spring dependency ! I&#39;ve some thing now i can&#39;t launch the app two times in a raw it says that the local host 8080 is already in use i have to close eclipse and launch again maybe you know why ?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1498224877,"post_id":44718345,"comment_id":76427727,"body_markdown":"Because you cannot have 2 processes on the same port.","body":"Because you cannot have 2 processes on the same port."},{"owner":{"account_id":9849441,"reputation":1502,"user_id":7295936,"accept_rate":38,"display_name":"FrozzenFinger"},"score":0,"creation_date":1498225158,"post_id":44718345,"comment_id":76427911,"body_markdown":"and you know how to stop or kill the process automatically after executing the app ?","body":"and you know how to stop or kill the process automatically after executing the app ?"},{"owner":{"account_id":1553846,"reputation":375,"user_id":1445585,"accept_rate":80,"display_name":"Meadowlark Bradsher"},"score":0,"creation_date":1646441047,"post_id":44718345,"comment_id":126131484,"body_markdown":"What is the original problem statement here?","body":"What is the original problem statement here?"}],"answers":[{"comments":[{"owner":{"account_id":3291432,"reputation":2052,"user_id":2769667,"accept_rate":80,"display_name":"bovino Marcelo Bezerra"},"score":0,"creation_date":1525986810,"post_id":48566390,"comment_id":87579716,"body_markdown":"i was trying to use jackson-databind 2.7.1 with spboot 2.0.2 in a kotlin project and had the same problem, upgrading to 2.9.4 as you suggested solved the problem, thanks :-)","body":"i was trying to use jackson-databind 2.7.1 with spboot 2.0.2 in a kotlin project and had the same problem, upgrading to 2.9.4 as you suggested solved the problem, thanks :-)"},{"owner":{"account_id":192003,"reputation":30422,"user_id":432903,"accept_rate":64,"display_name":"prayagupa"},"score":4,"creation_date":1561518694,"post_id":48566390,"comment_id":100085739,"body_markdown":"for people using aws-sdk, exclude `&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;` and add newer version as in above answer","body":"for people using aws-sdk, exclude <code>&lt;groupId&gt;com.fasterxml.jackson.core&lt;&#47;groupId&gt;</code> and add newer version as in above answer"},{"owner":{"account_id":2714662,"reputation":53,"user_id":2342297,"display_name":"VIJAYKUMAR SUBRAMANI"},"score":0,"creation_date":1580218562,"post_id":48566390,"comment_id":106019665,"body_markdown":"I am getting the issue in 2.10.0 jackson since I am trying to upgrade to 2.10.0. Also, my internal dependencies are using lower versions of jackson.","body":"I am getting the issue in 2.10.0 jackson since I am trying to upgrade to 2.10.0. Also, my internal dependencies are using lower versions of jackson."},{"owner":{"account_id":4020772,"reputation":1000,"user_id":3311216,"accept_rate":40,"display_name":"ASH"},"score":0,"creation_date":1611665308,"post_id":48566390,"comment_id":116518788,"body_markdown":"You may also need \n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.version}&lt;/version&gt;\n        &lt;/dependency&gt;","body":"You may also need          &lt;dependency&gt;             &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;             &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;             &lt;version&gt;${jackson.version}&lt;/version&gt;         &lt;/dependency&gt;          &lt;dependency&gt;             &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;             &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;             &lt;version&gt;${jackson.version}&lt;/version&gt;         &lt;/dependency&gt;"},{"owner":{"account_id":14496530,"reputation":135,"user_id":10470910,"display_name":"Hanh Nguyen"},"score":0,"creation_date":1634121721,"post_id":48566390,"comment_id":122939399,"body_markdown":"@prayagupd do you mean delete the  &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; line?","body":"@prayagupd do you mean delete the  &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; line?"}],"tags":[],"owner":{"account_id":1848023,"reputation":3458,"user_id":1841143,"accept_rate":78,"display_name":"Haozhe Xie"},"comment_count":5,"down_vote_count":1,"up_vote_count":179,"is_accepted":true,"score":178,"last_activity_date":1517499125,"creation_date":1517499125,"answer_id":48566390,"question_id":44718345,"body_markdown":"Try to use the latest `com.fasterxml.jackson.core/jackson-databind`.\r\nI upgraded it to `2.9.4` and it works now.\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n        &lt;version&gt;2.9.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>Try to use the latest <code>com.fasterxml.jackson.core/jackson-databind</code>.\nI upgraded it to <code>2.9.4</code> and it works now.</p>\n\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.9.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3153911,"reputation":765,"user_id":2666708,"display_name":"Prateek Bhuwania"},"score":0,"creation_date":1589476659,"post_id":51418031,"comment_id":109317124,"body_markdown":"rm -rf ~/.m2/repository/com/fasterxml/\nworked for me on linux","body":"rm -rf ~/.m2/repository/com/fasterxml/ worked for me on linux"}],"tags":[],"owner":{"account_id":3333666,"reputation":2544,"user_id":2801909,"accept_rate":33,"display_name":"Vijay Nandwana"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1531989514,"creation_date":1531989514,"answer_id":51418031,"question_id":44718345,"body_markdown":"If issue remains even after updating dependency version, then delete everything present under  \r\n C:\\Users\\\\[your_username]\\\\.m2\\repository\\com\\fasterxml\r\n\r\nAnd, make sure following dependencies are present:\r\n\r\n                &lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    \t\t\t&lt;/dependency&gt;","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>If issue remains even after updating dependency version, then delete everything present under<br>\n C:\\Users\\[your_username]\\.m2\\repository\\com\\fasterxml</p>\n\n<p>And, make sure following dependencies are present:</p>\n\n<pre><code>            &lt;dependency&gt;\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n                &lt;version&gt;${jackson.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n                &lt;version&gt;${jackson.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n                &lt;version&gt;${jackson.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7510628,"reputation":1734,"user_id":5705686,"display_name":"dolan"},"score":0,"creation_date":1536431474,"post_id":52238084,"comment_id":91425030,"body_markdown":"It would add clarity if you explained why updating this dependency would fix the issue.","body":"It would add clarity if you explained why updating this dependency would fix the issue."},{"owner":{"account_id":10872990,"reputation":1661,"user_id":7994269,"display_name":"Jorge Santos Neill"},"score":1,"creation_date":1536432186,"post_id":52238084,"comment_id":91425201,"body_markdown":"Yes Dolan, The issue was solved replacing the dependency in POM file, Im using Spring MVC v. 5.0.6.RELEASE, the jackson.core library doesnt has a required method to use the last version of Spring MVC","body":"Yes Dolan, The issue was solved replacing the dependency in POM file, Im using Spring MVC v. 5.0.6.RELEASE, the jackson.core library doesnt has a required method to use the last version of Spring MVC"}],"tags":[],"owner":{"account_id":10872990,"reputation":1661,"user_id":7994269,"display_name":"Jorge Santos Neill"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536430255,"creation_date":1536430255,"answer_id":52238084,"question_id":44718345,"body_markdown":"Replace the dependency in the POM.xml file\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nBy the dependency\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.9.4&lt;/version&gt;\r\n        &lt;/dependency&gt;","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>Replace the dependency in the POM.xml file</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n  &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n  &lt;version&gt;2.2.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>By the dependency</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.9.4&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3442780,"reputation":4961,"user_id":2884309,"accept_rate":73,"display_name":"Ivan Aracki"},"score":0,"creation_date":1539804306,"post_id":52861824,"comment_id":92638843,"body_markdown":"It would be better answered if you provide some XML code with proper maven dependencies versions...","body":"It would be better answered if you provide some XML code with proper maven dependencies versions..."},{"owner":{"account_id":5040816,"reputation":2569,"user_id":4048278,"accept_rate":67,"display_name":"AryanJ-NYC"},"score":0,"creation_date":1553531069,"post_id":52861824,"comment_id":97409483,"body_markdown":"I was getting a similar error and this fix worked for me. Thanks!","body":"I was getting a similar error and this fix worked for me. Thanks!"}],"tags":[],"owner":{"account_id":14531023,"reputation":193,"user_id":10495955,"display_name":"Krishna Chaitanya V"},"comment_count":2,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1539805946,"creation_date":1539802618,"answer_id":52861824,"question_id":44718345,"body_markdown":"Use all the jackson dependencies(databind,core, annotations, scala(if you are using spark and scala)) with the same version.. and upgrade the versions to the latest releases..\r\n\r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-module-scala_2.11&lt;/artifactId&gt;\r\n                &lt;version&gt;2.9.4&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.9.4&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.9.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;2.9.4&lt;/version&gt;\r\n    \r\n            &lt;/dependency&gt;\r\nNote: Use Scala dependency only if you are working with scala. Otherwise it is not needed.","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>Use all the jackson dependencies(databind,core, annotations, scala(if you are using spark and scala)) with the same version.. and upgrade the versions to the latest releases..</p>\n\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-module-scala_2.11&lt;/artifactId&gt;\n            &lt;version&gt;2.9.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.9.4&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n        &lt;version&gt;2.9.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n        &lt;version&gt;2.9.4&lt;/version&gt;\n\n        &lt;/dependency&gt;\n</code></pre>\n\n<p>Note: Use Scala dependency only if you are working with scala. Otherwise it is not needed.</p>\n"},{"tags":[],"owner":{"account_id":16921011,"reputation":2463,"user_id":12237837,"display_name":"Aditya Rewari"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1572297686,"creation_date":1572297686,"answer_id":58598578,"question_id":44718345,"body_markdown":"Worked by lowering the spring boot starter parent to 1.5.13\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.5.13.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>Worked by lowering the spring boot starter parent to 1.5.13</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;1.5.13.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8652819,"reputation":1174,"user_id":6477946,"display_name":"Rajneesh Shukla"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1593004530,"creation_date":1593004530,"answer_id":62555969,"question_id":44718345,"body_markdown":"I also have the same error. I have updated the jackson library version and error has gone.\r\n\r\n    &lt;!-- Jackson to convert Java object to Json --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.9.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.9.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n\r\nand also check your data classes that have you created getters and setters for all the properties.\r\n\r\n","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>I also have the same error. I have updated the jackson library version and error has gone.</p>\n<pre><code>&lt;!-- Jackson to convert Java object to Json --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.9.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n            &lt;version&gt;2.9.4&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>and also check your data classes that have you created getters and setters for all the properties.</p>\n"},{"tags":[],"owner":{"account_id":2839356,"reputation":2154,"user_id":2439249,"display_name":"ozeray"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635929183,"creation_date":1635929183,"answer_id":69821929,"question_id":44718345,"body_markdown":"This problem seems to be solved in latest versions of Spring Boot. If you are still facing it, there is a strong possibility that same Jackson artifacts are defined in other libraries you use, thereby transitively causing conflicts in your application.","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>This problem seems to be solved in latest versions of Spring Boot. If you are still facing it, there is a strong possibility that same Jackson artifacts are defined in other libraries you use, thereby transitively causing conflicts in your application.</p>\n"},{"tags":[],"owner":{"account_id":11389854,"reputation":6022,"user_id":8370915,"display_name":"invzbl3"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661214241,"creation_date":1661214241,"answer_id":73452184,"question_id":44718345,"body_markdown":"I&#39;ve reproduced the same issue:\r\n\r\n    java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException\r\n\r\nwith dependencies like:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nand:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.8.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nTo fix it you can use these versions of dependencies:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nor:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.12.1&lt;/version&gt;\r\n        &lt;/dependency&gt; ","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>I've reproduced the same issue:</p>\n<pre><code>java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException\n</code></pre>\n<p>with dependencies like:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.5.2&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>and:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.8.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>To fix it you can use these versions of dependencies:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n        &lt;version&gt;2.10.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.10.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>or:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n        &lt;version&gt;2.12.1&lt;/version&gt;\n    &lt;/dependency&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":16856943,"reputation":57,"user_id":12188660,"display_name":"mitesh keswani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689931970,"creation_date":1689931970,"answer_id":76736756,"question_id":44718345,"body_markdown":"I got 2 main differences that caused issues when I compared my working configuration dependency tree with new configuration dependency tree for jackson..\r\nTo get Dependency tree::(look for differences and get to solution)\r\nmvn dependency:tree\r\n\r\nWhat worked for me after comparing differences::\r\n1. updated child dependency of jackson-bind -&gt; jackson-core and jackson-annotations\r\n2. Excluded jackson-module-jaxb-annotations from org.glassfish.jersey.media and included new version dependency for same.","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>I got 2 main differences that caused issues when I compared my working configuration dependency tree with new configuration dependency tree for jackson..\nTo get Dependency tree::(look for differences and get to solution)\nmvn dependency:tree</p>\n<p>What worked for me after comparing differences::</p>\n<ol>\n<li>updated child dependency of jackson-bind -&gt; jackson-core and jackson-annotations</li>\n<li>Excluded jackson-module-jaxb-annotations from org.glassfish.jersey.media and included new version dependency for same.</li>\n</ol>\n"}],"owner":{"account_id":9849441,"reputation":1502,"user_id":7295936,"accept_rate":38,"display_name":"FrozzenFinger"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":243742,"favorite_count":0,"down_vote_count":2,"up_vote_count":100,"accepted_answer_id":48566390,"answer_count":9,"score":98,"last_activity_date":1689931970,"creation_date":1498211348,"question_id":44718345,"body_markdown":"I have updated my dependecies like you said in your comment and i have this now :\r\n\r\n\r\n    org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:137) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:536) ~[spring-context-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:370) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:314) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1162) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1151) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat com.o2xp.ats.accountManager.test.App.main(App.java:42) [classes/:na]\r\n    Caused by: org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\r\n    \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.initialize(TomcatEmbeddedServletContainer.java:123) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.&lt;init&gt;(TomcatEmbeddedServletContainer.java:84) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getTomcatEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:554) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:179) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.createEmbeddedServletContainer(EmbeddedWebApplicationContext.java:164) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:134) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \t... 8 common frames omitted\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;httpPutFormContentFilter&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter]: Factory method &#39;httpPutFormContentFilter&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:586) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1262) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1110) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:305) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:233) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:303) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:234) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:182) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:177) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:159) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.&lt;init&gt;(ServletContextInitializerBeans.java:80) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.getServletContextInitializerBeans(EmbeddedWebApplicationContext.java:241) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.selfInitialize(EmbeddedWebApplicationContext.java:228) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.access$000(EmbeddedWebApplicationContext.java:89) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext$1.onStartup(EmbeddedWebApplicationContext.java:213) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:55) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5196) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1419) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1409) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[na:1.8.0_131]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_131]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_131]\r\n    \tat java.lang.Thread.run(Thread.java:748) ~[na:1.8.0_131]\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter]: Factory method &#39;httpPutFormContentFilter&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:182) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:575) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \t... 26 common frames omitted\r\n    Caused by: java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException\r\n    \tat org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter.&lt;init&gt;(AllEncompassingFormHttpMessageConverter.java:67) ~[spring-web-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.web.filter.HttpPutFormContentFilter.&lt;init&gt;(HttpPutFormContentFilter.java:63) ~[spring-web-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter.&lt;init&gt;(OrderedHttpPutFormContentFilter.java:29) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration.httpPutFormContentFilter(WebMvcAutoConfiguration.java:149) ~[spring-boot-autoconfigure-1.5.4.RELEASE.jar:1.5.4.RELEASE]\r\n    \tat org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d0610338.CGLIB$httpPutFormContentFilter$1(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.4.RELEASE.jar:1.5.4.RELEASE]\r\n    \tat org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d0610338$$FastClassBySpringCGLIB$$3e6bfe4d.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.4.RELEASE.jar:1.5.4.RELEASE]\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) ~[spring-core-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:359) ~[spring-context-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d0610338.httpPutFormContentFilter(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.4.RELEASE.jar:1.5.4.RELEASE]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_131]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_131]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_131]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_131]\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:155) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \t... 27 common frames omitted\r\n    Caused by: java.lang.ClassNotFoundException: com.fasterxml.jackson.databind.exc.InvalidDefinitionException\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:381) ~[na:1.8.0_131]\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_131]\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335) ~[na:1.8.0_131]\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[na:1.8.0_131]\r\n    \t... 41 common frames omitted\r\n\r\nAnd ther is my new pom : \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n       &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.8&lt;/source&gt;\r\n                        &lt;target&gt;1.8&lt;/target&gt;   \r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n               &lt;plugin&gt;\r\n                  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  \r\n                  &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n               &lt;/plugin&gt;\r\n           &lt;/plugins&gt;\r\n       &lt;/build&gt;\r\n      &lt;packaging&gt;pom&lt;/packaging&gt;\r\n      &lt;groupId&gt;com.o2xp&lt;/groupId&gt;\r\n      &lt;artifactId&gt;ats-impl&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;ats-impl&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n      &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n      &lt;/properties&gt;\r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n        \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        \t&lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n          &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n          &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n        \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\r\n        \t&lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n        \t&lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n        \t&lt;version&gt;1.1.0.Final&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n        \t&lt;groupId&gt;io.github.jhipster&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;jhipster&lt;/artifactId&gt;\r\n        \t&lt;version&gt;1.1.6&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n       &lt;repositories&gt;\r\n            &lt;repository&gt;\r\n                &lt;id&gt;spring-releases&lt;/id&gt;\r\n                &lt;name&gt;Spring Releases&lt;/name&gt;\r\n                &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;\r\n            &lt;/repository&gt;\r\n            &lt;repository&gt;\r\n                &lt;id&gt;org.jboss.repository.releases&lt;/id&gt;\r\n                &lt;name&gt;JBoss Maven Release Repository&lt;/name&gt;\r\n                &lt;url&gt;https://repository.jboss.org/nexus/content/repositories/releases&lt;/url&gt;\r\n            &lt;/repository&gt;\r\n            &lt;repository&gt;\r\n            \t&lt;id&gt;spring-milestone&lt;/id&gt;\r\n            \t&lt;name&gt;Spring Milestone Repository&lt;/name&gt;\r\n            \t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n            &lt;/repository&gt;\r\n        &lt;/repositories&gt;\r\n    \r\n        &lt;pluginRepositories&gt;\r\n            &lt;pluginRepository&gt;\r\n                &lt;id&gt;spring-releases&lt;/id&gt;\r\n                &lt;name&gt;Spring Releases&lt;/name&gt;\r\n                &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;\r\n            &lt;/pluginRepository&gt;\r\n        &lt;/pluginRepositories&gt;\r\n      &lt;modules&gt;\r\n        &lt;module&gt;ats-application-context&lt;/module&gt;\r\n        &lt;module&gt;ats-notice-manager&lt;/module&gt;\r\n        &lt;module&gt;ats-common&lt;/module&gt;\r\n        &lt;module&gt;ats-accountManager&lt;/module&gt;\r\n      &lt;/modules&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\ni have to precise that i never used jackson and it was working verry well. Maybe it&#39;s cause auf spring 5 ?","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>I have updated my dependecies like you said in your comment and i have this now :</p>\n\n<pre><code>org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:137) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:536) ~[spring-context-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:370) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:314) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1162) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1151) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at com.o2xp.ats.accountManager.test.App.main(App.java:42) [classes/:na]\nCaused by: org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.initialize(TomcatEmbeddedServletContainer.java:123) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.&lt;init&gt;(TomcatEmbeddedServletContainer.java:84) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getTomcatEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:554) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:179) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.createEmbeddedServletContainer(EmbeddedWebApplicationContext.java:164) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:134) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    ... 8 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'httpPutFormContentFilter' defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter]: Factory method 'httpPutFormContentFilter' threw exception; nested exception is java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:586) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1262) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1110) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:305) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:233) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:303) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:234) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:182) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:177) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:159) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.&lt;init&gt;(ServletContextInitializerBeans.java:80) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.getServletContextInitializerBeans(EmbeddedWebApplicationContext.java:241) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.selfInitialize(EmbeddedWebApplicationContext.java:228) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.access$000(EmbeddedWebApplicationContext.java:89) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext$1.onStartup(EmbeddedWebApplicationContext.java:213) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:55) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5196) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1419) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1409) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[na:1.8.0_131]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_131]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_131]\n    at java.lang.Thread.run(Thread.java:748) ~[na:1.8.0_131]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter]: Factory method 'httpPutFormContentFilter' threw exception; nested exception is java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:182) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:575) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    ... 26 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException\n    at org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter.&lt;init&gt;(AllEncompassingFormHttpMessageConverter.java:67) ~[spring-web-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.web.filter.HttpPutFormContentFilter.&lt;init&gt;(HttpPutFormContentFilter.java:63) ~[spring-web-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter.&lt;init&gt;(OrderedHttpPutFormContentFilter.java:29) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration.httpPutFormContentFilter(WebMvcAutoConfiguration.java:149) ~[spring-boot-autoconfigure-1.5.4.RELEASE.jar:1.5.4.RELEASE]\n    at org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d0610338.CGLIB$httpPutFormContentFilter$1(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.4.RELEASE.jar:1.5.4.RELEASE]\n    at org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d0610338$$FastClassBySpringCGLIB$$3e6bfe4d.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.4.RELEASE.jar:1.5.4.RELEASE]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) ~[spring-core-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:359) ~[spring-context-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d0610338.httpPutFormContentFilter(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.4.RELEASE.jar:1.5.4.RELEASE]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_131]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_131]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_131]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_131]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:155) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    ... 27 common frames omitted\nCaused by: java.lang.ClassNotFoundException: com.fasterxml.jackson.databind.exc.InvalidDefinitionException\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381) ~[na:1.8.0_131]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_131]\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335) ~[na:1.8.0_131]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[na:1.8.0_131]\n    ... 41 common frames omitted\n</code></pre>\n\n<p>And ther is my new pom : </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n   &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;   \n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n           &lt;plugin&gt;\n              &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  \n              &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n           &lt;/plugin&gt;\n       &lt;/plugins&gt;\n   &lt;/build&gt;\n  &lt;packaging&gt;pom&lt;/packaging&gt;\n  &lt;groupId&gt;com.o2xp&lt;/groupId&gt;\n  &lt;artifactId&gt;ats-impl&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;ats-impl&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n      &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\n        &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n        &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n        &lt;version&gt;1.1.0.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.github.jhipster&lt;/groupId&gt;\n        &lt;artifactId&gt;jhipster&lt;/artifactId&gt;\n        &lt;version&gt;1.1.6&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n   &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-releases&lt;/id&gt;\n            &lt;name&gt;Spring Releases&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;org.jboss.repository.releases&lt;/id&gt;\n            &lt;name&gt;JBoss Maven Release Repository&lt;/name&gt;\n            &lt;url&gt;https://repository.jboss.org/nexus/content/repositories/releases&lt;/url&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestone&lt;/id&gt;\n            &lt;name&gt;Spring Milestone Repository&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-releases&lt;/id&gt;\n            &lt;name&gt;Spring Releases&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n  &lt;modules&gt;\n    &lt;module&gt;ats-application-context&lt;/module&gt;\n    &lt;module&gt;ats-notice-manager&lt;/module&gt;\n    &lt;module&gt;ats-common&lt;/module&gt;\n    &lt;module&gt;ats-accountManager&lt;/module&gt;\n  &lt;/modules&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>i have to precise that i never used jackson and it was working verry well. Maybe it's cause auf spring 5 ?</p>\n"},{"tags":["java","spring","intellij-idea","keycloak"],"owner":{"account_id":25602430,"reputation":1,"user_id":19377189,"display_name":"Aji Codi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689931910,"creation_date":1689764860,"question_id":76720653,"body_markdown":"After requesting the endpoint: `http://localhost:8083/microservice1/home`, once the *client credentials flow* chapter implemented of [this video][1], I get the following answer:\r\n```\r\nLogin ith OAuth 2.0\r\n```\r\ninstead of the expected one [from here][2]\r\nI tried to debug via Intellij, and run the request, but I don&#39;t know why It doesn&#39;t stop in breakpoints\r\n\r\n  [1]: https://www.youtube.com/watch?v=t9O99l4gjAc\r\n  [2]: https://github.com/onepseudoxy/spring-security-oauth2-keycloak-demo\r\n\r\n","title":"Unexpected response after requesting home page spring + keycloak app","body":"<p>After requesting the endpoint: <code>http://localhost:8083/microservice1/home</code>, once the <em>client credentials flow</em> chapter implemented of <a href=\"https://www.youtube.com/watch?v=t9O99l4gjAc\" rel=\"nofollow noreferrer\">this video</a>, I get the following answer:</p>\n<pre><code>Login ith OAuth 2.0\n</code></pre>\n<p>instead of the expected one <a href=\"https://github.com/onepseudoxy/spring-security-oauth2-keycloak-demo\" rel=\"nofollow noreferrer\">from here</a>\nI tried to debug via Intellij, and run the request, but I don't know why It doesn't stop in breakpoints</p>\n"},{"tags":["java","multithreading","selenium","automated-tests","thread-local"],"answers":[{"comments":[{"owner":{"account_id":4777108,"reputation":89,"user_id":3859913,"display_name":"Oasis001"},"score":0,"creation_date":1609690461,"post_id":65541795,"comment_id":115895689,"body_markdown":"M.P.Korstanje,Thanks a lot for the answer. It&#39;s really useful.","body":"M.P.Korstanje,Thanks a lot for the answer. It&#39;s really useful."},{"owner":{"account_id":108647,"reputation":341,"user_id":288271,"display_name":"Scott Deagan"},"score":0,"creation_date":1689897429,"post_id":65541795,"comment_id":135281918,"body_markdown":"Should the `getDriver()` method be static?","body":"Should the <code>getDriver()</code> method be static?"},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1689931521,"post_id":65541795,"comment_id":135285977,"body_markdown":"It should not be. Thx. Fixed.","body":"It should not be. Thx. Fixed."}],"tags":[],"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"comment_count":3,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1689931480,"creation_date":1609607203,"answer_id":65541795,"question_id":65541200,"body_markdown":"It depends.\r\n\r\nWhen using a static field, there is only a single instance of that field in the JVM. It refers to one specific address in memory. Unlike the field of an object which refers to a field of a specific object and for each object there is a unique address in memory for that field.\r\n\r\nWhen using a `ThreadLocal` each thread has its own instance of the variable.\r\n\r\nSo by using `static WebDriver driver` you have exactly one webdriver for all tests and all threads. By using `static ThreadLocal&lt;WebDriver&gt; driver` you have exactly one  webdriver for each thread, effectively sharing the webdriver between scenarios that are executed on that thread.\r\n\r\nWhen executing tests in parallel there are multiple threads executing scenarios so a single webdriver would be a problem. Scenarios running in parallel would make the webdriver do different things at the same time or they&#39;d have to wait for the webdriver to be available, making them effectively run serially again.\r\n\r\nSo if a webdriver is to be shared between scenarios and if those scenarios run in parallel you have to use a `ThreadLocal`.\r\n\r\nHowever it appears that are unfamiliar with programming concurrent systems. So you may want to consider a different approach. Rather then sharing the webdriver between scenarios, consider starting a new webdriver in each scenario instead. This is much safer and from a test perspective much cleaner because each scenario starts without any state from the previous scenario.\r\n\r\nThis means you now have the problem of sharing information between steps. You were using a static field to share to share the webdriver. But you can&#39;t use use static fields because there are now multiple threads running.\r\n\r\nTo solve this problem Cucumber supports dependency injection. The easiest to use is probably [cucumber-pico][1]. When using dependency injection cucumber will instantiate each step definition class for each scenario with a isolated set of dependencies.\r\n\r\n```xml\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n        &lt;artifactId&gt;cucumber-picocontainer&lt;/artifactId&gt;\r\n        &lt;version&gt;${cucumber.version}&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\nSo for example when your step definitions depend on a `WebDriverFactory`, cucumber will instantiate a `WebDriverFactory` for you and instantiate both `StepDefinition` and `OtherStepDefinition` with the same factory. \r\n\r\n\r\n```java\r\npublic class StepDefinition {\r\n\r\n    private final WebDriverFactory webdriverFactory;\r\n\r\n    public StepDefinitions(WebDriverFactory webdriverFactory) {\r\n        this.webdriverFactory = webdriverFactory;\r\n    }\r\n\r\n    @Given(&quot;I do a thing with a webdriver&quot;)\r\n    public void useTheWebDriver() {\r\n        // get the webdriver from the factory and use it\r\n    }\r\n\r\n}\r\n\r\npublic class OtherStepDefinition {\r\n\r\n    private final WebDriverFactory webdriverFactory; // Same instance as in StepDefinition\r\n\r\n    public OtherStepDefinition(WebDriverFactory webdriverFactory) {\r\n        this.webdriverFactory = webdriverFactory; \r\n    }\r\n\r\n    @Given(&quot;I do another thing with a webdriver&quot;)\r\n    public void useTheWebDriver() {\r\n        // get the webdriver from the factory and use it\r\n    }\r\n\r\n}\r\n```\r\n\r\nThen in the web driver factory you keep a reference to the webdriver for use in both step definitions.\r\n\r\n```\r\npublic class WebDriverFactory implements Startable {\r\n\r\n    private WebDriver driver;\r\n\r\n    public setDriver(String browser) {\r\n        // create the web driver here \r\n    }\r\n\r\n    public WebDriver getDriver(){\r\n        return driver;\r\n    }\r\n\r\n    public void start() { \r\n      // do nothing\r\n    } \r\n    \r\n    public void stop() { \r\n       // stop web driver if it was created\r\n    } \r\n}\r\n```\r\n\r\n\r\n  [1]: https://github.com/cucumber/cucumber-jvm/tree/main/picocontainer","title":"Is ThreadLocal required for automation framework that uses Cucumber, Jmeter and FailSafe?","body":"<p>It depends.</p>\n<p>When using a static field, there is only a single instance of that field in the JVM. It refers to one specific address in memory. Unlike the field of an object which refers to a field of a specific object and for each object there is a unique address in memory for that field.</p>\n<p>When using a <code>ThreadLocal</code> each thread has its own instance of the variable.</p>\n<p>So by using <code>static WebDriver driver</code> you have exactly one webdriver for all tests and all threads. By using <code>static ThreadLocal&lt;WebDriver&gt; driver</code> you have exactly one  webdriver for each thread, effectively sharing the webdriver between scenarios that are executed on that thread.</p>\n<p>When executing tests in parallel there are multiple threads executing scenarios so a single webdriver would be a problem. Scenarios running in parallel would make the webdriver do different things at the same time or they'd have to wait for the webdriver to be available, making them effectively run serially again.</p>\n<p>So if a webdriver is to be shared between scenarios and if those scenarios run in parallel you have to use a <code>ThreadLocal</code>.</p>\n<p>However it appears that are unfamiliar with programming concurrent systems. So you may want to consider a different approach. Rather then sharing the webdriver between scenarios, consider starting a new webdriver in each scenario instead. This is much safer and from a test perspective much cleaner because each scenario starts without any state from the previous scenario.</p>\n<p>This means you now have the problem of sharing information between steps. You were using a static field to share to share the webdriver. But you can't use use static fields because there are now multiple threads running.</p>\n<p>To solve this problem Cucumber supports dependency injection. The easiest to use is probably <a href=\"https://github.com/cucumber/cucumber-jvm/tree/main/picocontainer\" rel=\"nofollow noreferrer\">cucumber-pico</a>. When using dependency injection cucumber will instantiate each step definition class for each scenario with a isolated set of dependencies.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;dependency&gt;\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-picocontainer&lt;/artifactId&gt;\n        &lt;version&gt;${cucumber.version}&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>So for example when your step definitions depend on a <code>WebDriverFactory</code>, cucumber will instantiate a <code>WebDriverFactory</code> for you and instantiate both <code>StepDefinition</code> and <code>OtherStepDefinition</code> with the same factory.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class StepDefinition {\n\n    private final WebDriverFactory webdriverFactory;\n\n    public StepDefinitions(WebDriverFactory webdriverFactory) {\n        this.webdriverFactory = webdriverFactory;\n    }\n\n    @Given(&quot;I do a thing with a webdriver&quot;)\n    public void useTheWebDriver() {\n        // get the webdriver from the factory and use it\n    }\n\n}\n\npublic class OtherStepDefinition {\n\n    private final WebDriverFactory webdriverFactory; // Same instance as in StepDefinition\n\n    public OtherStepDefinition(WebDriverFactory webdriverFactory) {\n        this.webdriverFactory = webdriverFactory; \n    }\n\n    @Given(&quot;I do another thing with a webdriver&quot;)\n    public void useTheWebDriver() {\n        // get the webdriver from the factory and use it\n    }\n\n}\n</code></pre>\n<p>Then in the web driver factory you keep a reference to the webdriver for use in both step definitions.</p>\n<pre><code>public class WebDriverFactory implements Startable {\n\n    private WebDriver driver;\n\n    public setDriver(String browser) {\n        // create the web driver here \n    }\n\n    public WebDriver getDriver(){\n        return driver;\n    }\n\n    public void start() { \n      // do nothing\n    } \n    \n    public void stop() { \n       // stop web driver if it was created\n    } \n}\n</code></pre>\n"}],"owner":{"account_id":4777108,"reputation":89,"user_id":3859913,"display_name":"Oasis001"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2025,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":65541795,"answer_count":1,"score":4,"last_activity_date":1689931480,"creation_date":1609603495,"question_id":65541200,"body_markdown":"Sorry if this question sounds silly.\r\nWe are developing an automation framework that would use Java,Cucumber, Junit and Failsafe suite etc.\r\nThere&#39;s been a suggestion to use ThreadLocal. But I am bit confused as why we need to use ThreadLocal when Junit runs the cucumber features in its own threads..\r\n\r\nThe suggestion was to use ThreadLocal as shown below;-\r\n\r\n\r\n    public class WebDriverFactory {\r\n    \r\n        private static ThreadLocal&lt;WebDriver&gt; driver = new ThreadLocal&lt;&gt;();\r\n    \r\n        public static synchronized void setDriver(String browser) {\r\n    \r\n            switch (browser) {\r\n                case &quot;chrome&quot;:\r\n                    driver = ThreadLocal.withInitial(() -&gt; {\r\n                        WebDriverManager.chromedriver().setup();\r\n                        return new ChromeDriver(BrowserOptions.getChromeOptions());\r\n                    });\r\n            \r\n                    break;\r\n               \r\n                default:\r\n                    throw new IllegalStateException(&quot;Unexpected value: &quot; + browser);\r\n            }\r\n        }\r\n  \r\n        public static synchronized WebDriver getDriver(){\r\n            return driver.get();\r\n        }\r\n\r\n\r\nCan anyone confirm if this is really required to run tests parallelly.? Also, is &#39;synchronized&#39; required when using ThreadLocal?","title":"Is ThreadLocal required for automation framework that uses Cucumber, Jmeter and FailSafe?","body":"<p>Sorry if this question sounds silly.\nWe are developing an automation framework that would use Java,Cucumber, Junit and Failsafe suite etc.\nThere's been a suggestion to use ThreadLocal. But I am bit confused as why we need to use ThreadLocal when Junit runs the cucumber features in its own threads..</p>\n<p>The suggestion was to use ThreadLocal as shown below;-</p>\n<pre><code>public class WebDriverFactory {\n\n    private static ThreadLocal&lt;WebDriver&gt; driver = new ThreadLocal&lt;&gt;();\n\n    public static synchronized void setDriver(String browser) {\n\n        switch (browser) {\n            case &quot;chrome&quot;:\n                driver = ThreadLocal.withInitial(() -&gt; {\n                    WebDriverManager.chromedriver().setup();\n                    return new ChromeDriver(BrowserOptions.getChromeOptions());\n                });\n        \n                break;\n           \n            default:\n                throw new IllegalStateException(&quot;Unexpected value: &quot; + browser);\n        }\n    }\n\n    public static synchronized WebDriver getDriver(){\n        return driver.get();\n    }\n</code></pre>\n<p>Can anyone confirm if this is really required to run tests parallelly.? Also, is 'synchronized' required when using ThreadLocal?</p>\n"},{"tags":["java","mysql","hibernate","mysql-8.0"],"answers":[{"tags":[],"owner":{"account_id":40939,"reputation":41535,"user_id":118846,"display_name":"Mikko Maunu"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1557069455,"creation_date":1557069455,"answer_id":55993485,"question_id":55991050,"body_markdown":"According pom.xml you are currently using Hibernate 5.2.12. From [5.2 Javadocs][1] one can see that it does not have `MySQL8Dialect`. \r\n\r\n[MySQL8Dialect][2] was introduced in Hibernate 5.3 (see [Javadoc][2]). Problem can be solved by updating to Hibernate to [5.3][3] or to [5.4][4].\r\n\r\nIf updating Hibernate is not an option, then one must create custom dialect. That can be as easy as simply copying `MySQL8Dialect.java` from newer version to your code base and referencing it from persistence.xml. Potentially minor modifications are necessary.\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/5.2/javadocs/\r\n  [2]: https://docs.jboss.org/hibernate/orm/5.3/javadocs/org/hibernate/dialect/MySQL8Dialect.html\r\n  [3]: https://hibernate.org/orm/releases/5.3/\r\n  [4]: https://hibernate.org/orm/releases/5.4/","title":"How fix &quot;org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.MySQL8Dialect]&quot;?","body":"<p>According pom.xml you are currently using Hibernate 5.2.12. From <a href=\"https://docs.jboss.org/hibernate/orm/5.2/javadocs/\" rel=\"nofollow noreferrer\">5.2 Javadocs</a> one can see that it does not have <code>MySQL8Dialect</code>. </p>\n\n<p><a href=\"https://docs.jboss.org/hibernate/orm/5.3/javadocs/org/hibernate/dialect/MySQL8Dialect.html\" rel=\"nofollow noreferrer\">MySQL8Dialect</a> was introduced in Hibernate 5.3 (see <a href=\"https://docs.jboss.org/hibernate/orm/5.3/javadocs/org/hibernate/dialect/MySQL8Dialect.html\" rel=\"nofollow noreferrer\">Javadoc</a>). Problem can be solved by updating to Hibernate to <a href=\"https://hibernate.org/orm/releases/5.3/\" rel=\"nofollow noreferrer\">5.3</a> or to <a href=\"https://hibernate.org/orm/releases/5.4/\" rel=\"nofollow noreferrer\">5.4</a>.</p>\n\n<p>If updating Hibernate is not an option, then one must create custom dialect. That can be as easy as simply copying <code>MySQL8Dialect.java</code> from newer version to your code base and referencing it from persistence.xml. Potentially minor modifications are necessary.</p>\n"},{"tags":[],"owner":{"account_id":24323906,"reputation":128,"user_id":18263761,"display_name":"ilia"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1666380317,"creation_date":1666380317,"answer_id":74158365,"question_id":55991050,"body_markdown":"\r\n[![S][1]][1]\r\n\r\nBasically  if you use spring boot, you don&#39;t need to define Dialect on the properties file because boot will automatically define itself\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ulkki.png\r\n  [2]: https://i.stack.imgur.com/7meF9.png","title":"How fix &quot;org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.MySQL8Dialect]&quot;?","body":"<p><a href=\"https://i.stack.imgur.com/ulkki.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ulkki.png\" alt=\"S\" /></a></p>\n<p>Basically  if you use spring boot, you don't need to define Dialect on the properties file because boot will automatically define itself</p>\n<p><a href=\"https://i.stack.imgur.com/7meF9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7meF9.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":6833305,"reputation":3084,"user_id":5256337,"display_name":"Lova Chittumuri"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689931264,"creation_date":1689931264,"answer_id":76736679,"question_id":55991050,"body_markdown":"&gt; please provide the new mysql 8 dialect to resolve this\r\n&gt; issue.\r\n\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect","title":"How fix &quot;org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.MySQL8Dialect]&quot;?","body":"<blockquote>\n<p>please provide the new mysql 8 dialect to resolve this\nissue.</p>\n</blockquote>\n<pre><code>spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect\n</code></pre>\n"}],"owner":{"account_id":11336250,"reputation":47,"user_id":8312008,"display_name":"Ruslan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10241,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":55993485,"answer_count":3,"score":2,"last_activity_date":1689931264,"creation_date":1557052333,"question_id":55991050,"body_markdown":"I received an exception when starting the application:\r\n\r\n    Caused by: org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.MySQL8Dialect] as strategy [org.hibernate.dialect.Dialect]\r\n\tat org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.selectStrategyImplementor(StrategySelectorImpl.java:126)\r\n\r\nI am using MySQL 8.0.\r\n  \r\npom.xml:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n        &lt;version&gt;5.2.12.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n        &lt;version&gt;8.0.15&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\nhibernate.cfg.xml:\r\n\r\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL8Dialect&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost/botdb?serverTimezone=UTC&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;root&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;password&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.useSSL&quot;&gt;false&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.enable_lazy_load_no_trans&quot;&gt;true&lt;/property&gt;","title":"How fix &quot;org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.MySQL8Dialect]&quot;?","body":"<p>I received an exception when starting the application:</p>\n\n<pre><code>Caused by: org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.MySQL8Dialect] as strategy [org.hibernate.dialect.Dialect]\nat org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.selectStrategyImplementor(StrategySelectorImpl.java:126)\n</code></pre>\n\n<p>I am using MySQL 8.0.</p>\n\n<p>pom.xml:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n    &lt;version&gt;5.2.12.Final&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n    &lt;version&gt;8.0.15&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>hibernate.cfg.xml:</p>\n\n<pre><code>    &lt;property name=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL8Dialect&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.driver_class\"&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.url\"&gt;jdbc:mysql://localhost/botdb?serverTimezone=UTC&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.username\"&gt;root&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.password\"&gt;password&lt;/property&gt;\n    &lt;property name=\"hibernate.show_sql\"&gt;true&lt;/property&gt;\n    &lt;property name=\"hibernate.hbm2ddl.auto\"&gt;update&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.useSSL\"&gt;false&lt;/property&gt;\n    &lt;property name=\"hibernate.enable_lazy_load_no_trans\"&gt;true&lt;/property&gt;\n</code></pre>\n"},{"tags":["java","jexl"],"comments":[{"owner":{"account_id":16557887,"reputation":29,"user_id":11964569,"display_name":"Luc Taylor"},"score":0,"creation_date":1689802893,"post_id":76725359,"comment_id":135267046,"body_markdown":"Probability that the last ten bits flip from changing the last bit is with the rotation is much worse without the rotation","body":"Probability that the last ten bits flip from changing the last bit is with the rotation is much worse without the rotation"},{"owner":{"account_id":16557887,"reputation":29,"user_id":11964569,"display_name":"Luc Taylor"},"score":0,"creation_date":1689872255,"post_id":76725359,"comment_id":135278197,"body_markdown":"Gave up. Changed it.\n```\nboolean wasNegative = (state &lt; 0);\n state &amp;= 9223372036854775807L;\n long last7 = state &amp; 127;\n state &gt;&gt;= 7;\n state += last7 &lt;&lt; 56;\n if(wasNegative)\n {\n state = -state;\n }\n```\n\nand this in JEXL\n\n```\nif(state&lt;0)\n{\n state = state &amp; 9223372036854775807L;\n last7 = state &amp; 127;\n state = state / 128;\n state = state + last7 * 72057594037927936L;\n state = -state;\n}\nelse\n{\n state = state &amp; 9223372036854775807L;\n last7 = state &amp; 127;\n state = state / 128;\n state = state + last7 * 72057594037927936L;\n}\n\nreturn state + 0;\n```","body":"Gave up. Changed it. ``` boolean wasNegative = (state &lt; 0);  state &amp;= 9223372036854775807L;  long last7 = state &amp; 127;  state &gt;&gt;= 7;  state += last7 &lt;&lt; 56;  if(wasNegative)  {  state = -state;  } ```  and this in JEXL  ``` if(state&lt;0) {  state = state &amp; 9223372036854775807L;  last7 = state &amp; 127;  state = state / 128;  state = state + last7 * 72057594037927936L;  state = -state; } else {  state = state &amp; 9223372036854775807L;  last7 = state &amp; 127;  state = state / 128;  state = state + last7 * 72057594037927936L; }  return state + 0; ```"}],"answers":[{"tags":[],"owner":{"account_id":11845668,"reputation":187,"user_id":8668250,"display_name":"henrib"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689931250,"creation_date":1689931250,"answer_id":76736678,"question_id":76725359,"body_markdown":"I&#39;d recommend using JEXL 3.3 instead which does implement the bitshift operators. The following example works in 3.3:\r\n\r\n    \r\n    long hashState(long state) {\r\n        return (state &lt;&lt; 7) | (state &gt;&gt;&gt; (64 - 7));\r\n    }\r\n    @Test\r\n    public void testSOHash() {\r\n        String src =&quot;state -&gt;  (state &lt;&lt; 7) | (state &gt;&gt;&gt; (64 - 7))&quot;;\r\n        final JexlEngine jexl = new JexlBuilder().create();\r\n        JexlScript script = jexl.createScript(src);\r\n        Object result;\r\n        long[] checks = new long[]{33, 89, 345678990, -23233, -169, 0};\r\n        for(long arg : checks) {\r\n            result = script.execute(null, arg);\r\n            Assert.assertTrue(result instanceof Number);\r\n            long nresult = ((Number) result).longValue();\r\n            Assert.assertEquals(&quot;checking &quot; + arg, hashState(arg), nresult);\r\n        }\r\n    }","title":"JEXL2.1 Circular Bit Shift To Mirror Java","body":"<p>I'd recommend using JEXL 3.3 instead which does implement the bitshift operators. The following example works in 3.3:</p>\n<pre><code>long hashState(long state) {\n    return (state &lt;&lt; 7) | (state &gt;&gt;&gt; (64 - 7));\n}\n@Test\npublic void testSOHash() {\n    String src =&quot;state -&gt;  (state &lt;&lt; 7) | (state &gt;&gt;&gt; (64 - 7))&quot;;\n    final JexlEngine jexl = new JexlBuilder().create();\n    JexlScript script = jexl.createScript(src);\n    Object result;\n    long[] checks = new long[]{33, 89, 345678990, -23233, -169, 0};\n    for(long arg : checks) {\n        result = script.execute(null, arg);\n        Assert.assertTrue(result instanceof Number);\n        long nresult = ((Number) result).longValue();\n        Assert.assertEquals(&quot;checking &quot; + arg, hashState(arg), nresult);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16557887,"reputation":29,"user_id":11964569,"display_name":"Luc Taylor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76736678,"answer_count":1,"score":0,"last_activity_date":1689931250,"creation_date":1689802825,"question_id":76725359,"body_markdown":"I wrote a hashing function that takes a 64 bit integer in, and outputs a 64 bit integer out in JAVA and translated it to JEXL 2.1\r\n\r\nI need it to return the same results in both, but am not too picky about how it works\r\n\r\nEverything was fine until this line\r\n\r\nstate = (state &lt;&lt; 7) | (state &gt;&gt;&gt; (64 - 7)); // couldn&#39;t get bit shift to work in JEXL\r\n\r\nI cannot replicate this behavior in in JEXL2.1   Bit shift doesn&#39;t seem to exist at all, I tried to replicate with multiplication and division and was getting odd off by 1 errors.\r\n\r\nBy the way.. I&#39;m open to changing the java as long as it basically does the same thing.","title":"JEXL2.1 Circular Bit Shift To Mirror Java","body":"<p>I wrote a hashing function that takes a 64 bit integer in, and outputs a 64 bit integer out in JAVA and translated it to JEXL 2.1</p>\n<p>I need it to return the same results in both, but am not too picky about how it works</p>\n<p>Everything was fine until this line</p>\n<p>state = (state &lt;&lt; 7) | (state &gt;&gt;&gt; (64 - 7)); // couldn't get bit shift to work in JEXL</p>\n<p>I cannot replicate this behavior in in JEXL2.1   Bit shift doesn't seem to exist at all, I tried to replicate with multiplication and division and was getting odd off by 1 errors.</p>\n<p>By the way.. I'm open to changing the java as long as it basically does the same thing.</p>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":36208,"reputation":240326,"user_id":103154,"display_name":"axtavt"},"score":4,"creation_date":1406704370,"post_id":25030576,"comment_id":38928153,"body_markdown":"See http://stackoverflow.com/questions/3793791/final-method-mocking","body":"See <a href=\"http://stackoverflow.com/questions/3793791/final-method-mocking\">stackoverflow.com/questions/3793791/final-method-mocking</a>"},{"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"score":0,"creation_date":1406704684,"post_id":25030576,"comment_id":38928310,"body_markdown":"My bad, I missed that getString is final. Feel free to add your comment as an answer in order you get the credits.","body":"My bad, I missed that getString is final. Feel free to add your comment as an answer in order you get the credits."},{"owner":{"account_id":900361,"reputation":801,"user_id":936670,"display_name":"Aleksei Egorov"},"score":0,"creation_date":1462531579,"post_id":25030576,"comment_id":61685874,"body_markdown":"You may consider introducing one more bean - let&#39;s say `Messages`. It will have initialization block (locale setup, `getBundle` call) and `get(String key, String ... args)`. Next use through out your application calls to `Messages` instead of `ResourceBundle` coupling. And finally you may mock `Messages` in unit tests without any difficulties.","body":"You may consider introducing one more bean - let&#39;s say <code>Messages</code>. It will have initialization block (locale setup, <code>getBundle</code> call) and <code>get(String key, String ... args)</code>. Next use through out your application calls to <code>Messages</code> instead of <code>ResourceBundle</code> coupling. And finally you may mock <code>Messages</code> in unit tests without any difficulties."},{"owner":{"account_id":1058660,"reputation":1737,"user_id":1060779,"accept_rate":77,"display_name":"maxivis"},"score":1,"creation_date":1496085888,"post_id":25030576,"comment_id":75506780,"body_markdown":"I&#39;ve found another option, https://stackoverflow.com/a/10816819/1060779 just adding the messages_xx_XX.properties in src/test/resources and it worked.","body":"I&#39;ve found another option, <a href=\"https://stackoverflow.com/a/10816819/1060779\">stackoverflow.com/a/10816819/1060779</a> just adding the messages_xx_XX.properties in src/test/resources and it worked."},{"owner":{"account_id":404573,"reputation":7556,"user_id":772981,"accept_rate":46,"display_name":"Jarekczek"},"score":0,"creation_date":1532418217,"post_id":25030576,"comment_id":89954848,"body_markdown":"Another question being a kind of duplicate: https://stackoverflow.com/q/18377160/772981. Also contains an answer &quot;no need to mock&quot;.","body":"Another question being a kind of duplicate: <a href=\"https://stackoverflow.com/q/18377160/772981\">stackoverflow.com/q/18377160/772981</a>. Also contains an answer &quot;no need to mock&quot;."}],"answers":[{"tags":[],"owner":{"account_id":2337137,"reputation":127,"user_id":2049200,"accept_rate":43,"display_name":"user2049200"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1414013121,"creation_date":1414012818,"answer_id":26517338,"question_id":25030576,"body_markdown":"You&#39;ll find an example of solution below :\r\n\r\n\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest({ ResourceBundle.class })\r\n    public class ResourceBundleTest {\r\n    \r\n    \t@Test\r\n    \tpublic void getStringByPowerMock() throws Exception {   \r\n    \t\tResourceBundle resourceBundle = PowerMockito.mock(ResourceBundle.class);\r\n    \t\tMockito.when(resourceBundle.getString(Mockito.anyString())).thenReturn(&quot;Hello world....&quot;);\r\n    \t\tSystem.out.println(resourceBundle.getString(&quot;keyword&quot;));\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n","title":"How to mock ResourceBundle.getString()?","body":"<p>You'll find an example of solution below :</p>\n\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest({ ResourceBundle.class })\npublic class ResourceBundleTest {\n\n    @Test\n    public void getStringByPowerMock() throws Exception {   \n        ResourceBundle resourceBundle = PowerMockito.mock(ResourceBundle.class);\n        Mockito.when(resourceBundle.getString(Mockito.anyString())).thenReturn(\"Hello world....\");\n        System.out.println(resourceBundle.getString(\"keyword\"));\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":109571,"reputation":4085,"user_id":290254,"display_name":"Julius Musseau"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1424980387,"creation_date":1424980387,"answer_id":28751526,"question_id":25030576,"body_markdown":"I figured out a way to mock ResourceBundle by subclassing ResourceBundle.Control.  My answer is here:\r\n\r\nhttps://stackoverflow.com/a/28640458/290254\r\n\r\nI prefer to avoid the dynamic bytecode rewriting (to remove final) of PowerMock, JMockit and friends, since Jacoco and other things seem to hate it.","title":"How to mock ResourceBundle.getString()?","body":"<p>I figured out a way to mock ResourceBundle by subclassing ResourceBundle.Control.  My answer is here:</p>\n\n<p><a href=\"https://stackoverflow.com/a/28640458/290254\">https://stackoverflow.com/a/28640458/290254</a></p>\n\n<p>I prefer to avoid the dynamic bytecode rewriting (to remove final) of PowerMock, JMockit and friends, since Jacoco and other things seem to hate it.</p>\n"},{"tags":[],"owner":{"account_id":64856,"reputation":29696,"user_id":191246,"accept_rate":77,"display_name":"ccpizza"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1651135024,"creation_date":1427277790,"answer_id":29252590,"question_id":25030576,"body_markdown":"Instead of mocking you can create a dummy ResourceBundle implementation, and then pass it as an argument to `.thenReturn(resourceBundle)`:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n        import java.util.ResourceBundle;\r\n\r\n        ResourceBundle dummyResourceBundle = new ResourceBundle() {\r\n            @Override\r\n            protected Object handleGetObject(String key) {\r\n                return &quot;fake_translated_value&quot;;\r\n            }\r\n\r\n            @Override\r\n            public Enumeration&lt;String&gt; getKeys() {\r\n                return Collections.emptyEnumeration();\r\n            }\r\n        };\r\n\r\n        // Example usage\r\n        when(request.getResourceBundle(any(Locale.class))).thenReturn(dummyResourceBundle)\r\n\r\nIf you need the actual keys and values, then you&#39;ll need to provide an implementation for `getKeys()`, e.g. a hashmap for storage and key lookup.","title":"How to mock ResourceBundle.getString()?","body":"<p>Instead of mocking you can create a dummy ResourceBundle implementation, and then pass it as an argument to <code>.thenReturn(resourceBundle)</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    import java.util.ResourceBundle;\n\n    ResourceBundle dummyResourceBundle = new ResourceBundle() {\n        @Override\n        protected Object handleGetObject(String key) {\n            return &quot;fake_translated_value&quot;;\n        }\n\n        @Override\n        public Enumeration&lt;String&gt; getKeys() {\n            return Collections.emptyEnumeration();\n        }\n    };\n\n    // Example usage\n    when(request.getResourceBundle(any(Locale.class))).thenReturn(dummyResourceBundle)\n</code></pre>\n<p>If you need the actual keys and values, then you'll need to provide an implementation for <code>getKeys()</code>, e.g. a hashmap for storage and key lookup.</p>\n"},{"tags":[],"owner":{"account_id":2987511,"reputation":3024,"user_id":5772982,"display_name":"Kumar Abhishek"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1515925150,"creation_date":1515925150,"answer_id":48248581,"question_id":25030576,"body_markdown":"@Powermockito did not worked as ResourceBundle.class have static final methods which were not easy to mock.\r\n\r\nI tried.\r\n\r\nIn the Main Class extract your method inside another public method, and then overide it with implementaion.\r\n\r\nHere ReviewEChannelApplicationMBean is my Controller, where i overrriden the getBundle.\r\n\r\n    ReviewEChannelApplicationMBean = spy(new ReviewEChannelApplicationMBean(){\r\n                @Override\r\n                public ResourceBundle getBundle(FacesContext fcContext) {\r\n                    return TestDataBuilder.getResourceBundle();\r\n                }\r\n            });\r\n    \r\n//This Class i my TestDataBuilder using ListResourceBundle\r\n\r\n    public class TestDataBuilder {\r\n    \tpublic static ResourceBundle getResourceBundle() {\r\n    \t\t\treturn new ListResourceBundle(){\r\n    \r\n    \t\t\t\t@Override\r\n    \t\t\t\tprotected Object[][] getContents() {\r\n    \t\t\t\t\treturn contents;\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\tprivate Object[][] contents = {\r\n    \t\t\t\t\t\t{&quot;test1&quot;,&quot;01&quot;},\r\n    \t\t\t\t\t\t{&quot;test2&quot;,&quot;01&quot;},\r\n    \t\t\t\t\t\t{&quot;test3&quot;,&quot;01&quot;},\r\n    \t\t\t\t\t\t{&quot;test4&quot;,&quot;01&quot;}\r\n    \t\t\t\t};\r\n    \t\t\t};\r\n    \r\n    \t\t}\r\n    }","title":"How to mock ResourceBundle.getString()?","body":"<p>@Powermockito did not worked as ResourceBundle.class have static final methods which were not easy to mock.</p>\n\n<p>I tried.</p>\n\n<p>In the Main Class extract your method inside another public method, and then overide it with implementaion.</p>\n\n<p>Here ReviewEChannelApplicationMBean is my Controller, where i overrriden the getBundle.</p>\n\n<pre><code>ReviewEChannelApplicationMBean = spy(new ReviewEChannelApplicationMBean(){\n            @Override\n            public ResourceBundle getBundle(FacesContext fcContext) {\n                return TestDataBuilder.getResourceBundle();\n            }\n        });\n</code></pre>\n\n<p>//This Class i my TestDataBuilder using ListResourceBundle</p>\n\n<pre><code>public class TestDataBuilder {\n    public static ResourceBundle getResourceBundle() {\n            return new ListResourceBundle(){\n\n                @Override\n                protected Object[][] getContents() {\n                    return contents;\n                }\n\n                private Object[][] contents = {\n                        {\"test1\",\"01\"},\n                        {\"test2\",\"01\"},\n                        {\"test3\",\"01\"},\n                        {\"test4\",\"01\"}\n                };\n            };\n\n        }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29062781,"reputation":1,"user_id":22263067,"display_name":"Aleksandr Zholud"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689931056,"creation_date":1689931056,"answer_id":76736657,"question_id":25030576,"body_markdown":"If You want mock such a situation:\r\n\r\n    ResourceBundle messages = ResourceBundle.getBundle(&quot;messages&quot;);\r\n    var msg = messages.getString(&quot;company.wizard.field.IsEnabledFromToReqDto.isNull&quot;);\r\n\r\nU should use the next **working** variant:\r\n\r\n    @Test\r\n    void testMethodName() {\r\n            //normally mock static\r\n            try (MockedStatic&lt;ResourceBundle&gt; contextMock = mockStatic(ResourceBundle.class)) {\r\n                //mock an object of mocked static\r\n                ResourceBundle messages = mock(ResourceBundle.class);\r\n                contextMock.when(() -&gt; ResourceBundle.getBundle(&quot;messages&quot;)).thenReturn(messages);\r\n                when(messages.getString(anyString())).thenReturn(&quot;Error message&quot;); //or your own mock for messages\r\n    \r\n                //... your test...\r\n                //... your verifying...\r\n            }\r\n        }","title":"How to mock ResourceBundle.getString()?","body":"<p>If You want mock such a situation:</p>\n<pre><code>ResourceBundle messages = ResourceBundle.getBundle(&quot;messages&quot;);\nvar msg = messages.getString(&quot;company.wizard.field.IsEnabledFromToReqDto.isNull&quot;);\n</code></pre>\n<p>U should use the next <strong>working</strong> variant:</p>\n<pre><code>@Test\nvoid testMethodName() {\n        //normally mock static\n        try (MockedStatic&lt;ResourceBundle&gt; contextMock = mockStatic(ResourceBundle.class)) {\n            //mock an object of mocked static\n            ResourceBundle messages = mock(ResourceBundle.class);\n            contextMock.when(() -&gt; ResourceBundle.getBundle(&quot;messages&quot;)).thenReturn(messages);\n            when(messages.getString(anyString())).thenReturn(&quot;Error message&quot;); //or your own mock for messages\n\n            //... your test...\n            //... your verifying...\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17432,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":29252590,"answer_count":5,"score":17,"last_activity_date":1689931056,"creation_date":1406703710,"question_id":25030576,"body_markdown":"I&#39;m failing to mock `ResourceBundle.getString()`.\r\n\r\nThis is my code:\r\n\r\n    ResourceBundle schemaBundle = Mockito.mock(ResourceBundle.class);\r\n    Mockito.when(schemaBundle.getString(&quot;testKey_testPropertyName_ect&quot;)).thenReturn(&quot;testString1&quot;);\r\n\r\nThis gives the following exception on the second line:\r\n\r\n    java.util.MissingResourceException: Can&#39;t find resource for bundle $java.util.ResourceBundle$$EnhancerByMockitoWithCGLIB$$9e259f03, key testKey_testPropertyName_ect\r\n    \tat java.util.ResourceBundle.getObject(ResourceBundle.java:374)\r\n    \tat java.util.ResourceBundle.getString(ResourceBundle.java:334)\r\n    \tat com.foo.bar.resource.PropertyResourceTest.testGet(PropertyResourceTest.java:104)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:597)\r\n    \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)\r\n    \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\r\n    \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)\r\n    \tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\r\n    \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\r\n    \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)\r\n    \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\r\n    \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\r\n    \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\r\n    \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\r\n    \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\r\n    \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\r\n    \tat org.junit.runners.ParentRunner.run(ParentRunner.java:236)\r\n    \tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\r\n    \tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\r\n\r\nTo me this looks as if `schemaBundle` isn&#39;t mocked at all. But the debuger clearly shows, that the instance is wrapped by mockito.\r\n\r\nI also tried with\r\n\r\n    Mockito.doReturn(&quot;testString1&quot;).when(schemaBundle).getString(&quot;testKey_testPropertyName_ect&quot;);\r\n\r\nbut this returns the same exception.\r\n\r\nAny idea what&#39;s wrong?\r\n\r\n","title":"How to mock ResourceBundle.getString()?","body":"<p>I'm failing to mock <code>ResourceBundle.getString()</code>.</p>\n\n<p>This is my code:</p>\n\n<pre><code>ResourceBundle schemaBundle = Mockito.mock(ResourceBundle.class);\nMockito.when(schemaBundle.getString(\"testKey_testPropertyName_ect\")).thenReturn(\"testString1\");\n</code></pre>\n\n<p>This gives the following exception on the second line:</p>\n\n<pre><code>java.util.MissingResourceException: Can't find resource for bundle $java.util.ResourceBundle$$EnhancerByMockitoWithCGLIB$$9e259f03, key testKey_testPropertyName_ect\n    at java.util.ResourceBundle.getObject(ResourceBundle.java:374)\n    at java.util.ResourceBundle.getString(ResourceBundle.java:334)\n    at com.foo.bar.resource.PropertyResourceTest.testGet(PropertyResourceTest.java:104)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\n</code></pre>\n\n<p>To me this looks as if <code>schemaBundle</code> isn't mocked at all. But the debuger clearly shows, that the instance is wrapped by mockito.</p>\n\n<p>I also tried with</p>\n\n<pre><code>Mockito.doReturn(\"testString1\").when(schemaBundle).getString(\"testKey_testPropertyName_ect\");\n</code></pre>\n\n<p>but this returns the same exception.</p>\n\n<p>Any idea what's wrong?</p>\n"},{"tags":["java","json","spring-boot","jackson"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1688744769,"post_id":76638351,"comment_id":135119524,"body_markdown":"&quot;The problem is that this JSON can&#39;t be parsed by other clients.&quot; The JSON you&#39;ve shown us is absolutely valid, assuming it genuinely contains a backslash followed by n. Rather than show us the code producing the valid JSON, please provide the code that fails to deserialize it - using hard-coded JSON in a [mcve].","body":"&quot;The problem is that this JSON can&#39;t be parsed by other clients.&quot; The JSON you&#39;ve shown us is absolutely valid, assuming it genuinely contains a backslash followed by n. Rather than show us the code producing the valid JSON, please provide the code that fails to deserialize it - using hard-coded JSON in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":9483990,"reputation":123,"user_id":7050893,"display_name":"lbodevan"},"score":0,"creation_date":1688855643,"post_id":76638351,"comment_id":135130601,"body_markdown":"Hi @JonSkeet, it is my understanding that \\n is a control character that represents new line. The escaped version of it would be \\\\n, but I could be wrong. At least this what I was expecting to get in the response from Spring. \nIt seems like it is also what Jackson expects as it returns “Illegal unquoted character ((CTRL-CHAR, code 10)): has to be escaped using backslash to be included in string value” when trying to parse that JSON with it.","body":"Hi @JonSkeet, it is my understanding that \\n is a control character that represents new line. The escaped version of it would be \\\\n, but I could be wrong. At least this what I was expecting to get in the response from Spring.  It seems like it is also what Jackson expects as it returns “Illegal unquoted character ((CTRL-CHAR, code 10)): has to be escaped using backslash to be included in string value” when trying to parse that JSON with it."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1688886794,"post_id":76638351,"comment_id":135132338,"body_markdown":"Yes, you&#39;re wrong. the escaped version of the control character is just `\\n`. `\\\\n` represents a backslash followed by n, that&#39;s all. It&#39;s really, really important to distinguish between &quot;the characters in the string&quot; and &quot;the text in a string literal&quot; (which itself uses escaping). A *string literal* representing a JSON string would use `\\\\n` because the JSON itself contains a backslash followed by an `n` - but you shouldn&#39;t see a double backslash in the JSON itself Again, you should really provide a [mcve] of parsing a hard-coded JSON string.","body":"Yes, you&#39;re wrong. the escaped version of the control character is just <code>\\n</code>. <code>\\\\n</code> represents a backslash followed by n, that&#39;s all. It&#39;s really, really important to distinguish between &quot;the characters in the string&quot; and &quot;the text in a string literal&quot; (which itself uses escaping). A <i>string literal</i> representing a JSON string would use <code>\\\\n</code> because the JSON itself contains a backslash followed by an <code>n</code> - but you shouldn&#39;t see a double backslash in the JSON itself Again, you should really provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of parsing a hard-coded JSON string."},{"owner":{"account_id":9483990,"reputation":123,"user_id":7050893,"display_name":"lbodevan"},"score":0,"creation_date":1688973268,"post_id":76638351,"comment_id":135141349,"body_markdown":"Hi @JonSkeet, I updated the code example with the parsing of the JSON generated by Jackson.\n\nSo when you say:\n&quot;A string literal representing a JSON string would use `\\\\n` because the JSON itself contains a backslash followed by an `n` - but you shouldn&#39;t see a double backslash in the JSON itself&quot;\nMy difficulty to understand here is that why Jackson expects `\\\\n` but returns `\\n`?\n\nIf I try to serialize an object with the string `Example of \\n JSON` in other languages, it returns in fact `Example of \\\\n JSON`. So, what is missing on my code to have the same behaviour with Jackson?","body":"Hi @JonSkeet, I updated the code example with the parsing of the JSON generated by Jackson.  So when you say: &quot;A string literal representing a JSON string would use <code>\\\\n</code> because the JSON itself contains a backslash followed by an <code>n</code> - but you shouldn&#39;t see a double backslash in the JSON itself&quot; My difficulty to understand here is that why Jackson expects <code>\\\\n</code> but returns <code>\\n</code>?  If I try to serialize an object with the string <code>Example of \\n JSON</code> in other languages, it returns in fact <code>Example of \\\\n JSON</code>. So, what is missing on my code to have the same behaviour with Jackson?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1688973873,"post_id":76638351,"comment_id":135141476,"body_markdown":"This code is broken: `objectMapper.readValue(&quot;{\\&quot;title\\&quot; : \\&quot;Example of \\n JSON\\&quot;}&quot;, Demo.class)`. That is not the same as the JSON you&#39;ve shown after &quot;returns the following JSON&quot;. Your string literal contains a line break; the JSON you&#39;ve shown contains a backslash followed by an n. Print both of those to the console with `System.out` and you&#39;ll see the difference. I&#39;m sure that Jackson doesn&#39;t expect a `\\n` in the actual JSON - but if you want to represent the JSON *as a string literal* then you do indeed need `\\\\n`. But print that to the console - you won&#39;t see the double backslash.","body":"This code is broken: <code>objectMapper.readValue(&quot;{\\&quot;title\\&quot; : \\&quot;Example of \\n JSON\\&quot;}&quot;, Demo.class)</code>. That is not the same as the JSON you&#39;ve shown after &quot;returns the following JSON&quot;. Your string literal contains a line break; the JSON you&#39;ve shown contains a backslash followed by an n. Print both of those to the console with <code>System.out</code> and you&#39;ll see the difference. I&#39;m sure that Jackson doesn&#39;t expect a <code>\\n</code> in the actual JSON - but if you want to represent the JSON <i>as a string literal</i> then you do indeed need <code>\\\\n</code>. But print that to the console - you won&#39;t see the double backslash."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1688973927,"post_id":76638351,"comment_id":135141486,"body_markdown":"(To highlight what I&#39;m saying about the JSON not being the same - note how in your string literal you&#39;re escaping all the double quotes, but those *aren&#39;t* escaped in the three-line JSON you&#39;ve shown. In other words, you&#39;ve been inconsistent about how you&#39;ve converted the JSON into a string literal.)","body":"(To highlight what I&#39;m saying about the JSON not being the same - note how in your string literal you&#39;re escaping all the double quotes, but those <i>aren&#39;t</i> escaped in the three-line JSON you&#39;ve shown. In other words, you&#39;ve been inconsistent about how you&#39;ve converted the JSON into a string literal.)"},{"owner":{"account_id":9483990,"reputation":123,"user_id":7050893,"display_name":"lbodevan"},"score":0,"creation_date":1688975225,"post_id":76638351,"comment_id":135141778,"body_markdown":"Hi @JonSkeet, I appreciate you are trying to help but I think we are going off track here. The three-line JSON in the question is just formatted so people can read it better. Sorry if that confused you, the raw format would be `{&quot;title&quot;:&quot;Example of \\n JSON&quot;}`. \nBut just to try what you suggested, I tried:\n```\nSystem.out.println(&quot;Original object: &quot; + demo.getTitle());\nSystem.out.println(&quot;Example of incoming JSON: {\\&quot;title\\&quot; : \\&quot;Example of \\n JSON\\&quot;&quot;);\n```\n\nAnd the result is:\n```Original object: Example of\n JSON\nExample of incoming JSON: {&quot;title&quot; : &quot;Example of\n JSON&quot;```","body":"Hi @JonSkeet, I appreciate you are trying to help but I think we are going off track here. The three-line JSON in the question is just formatted so people can read it better. Sorry if that confused you, the raw format would be <code>{&quot;title&quot;:&quot;Example of \\n JSON&quot;}</code>.  But just to try what you suggested, I tried: ``` System.out.println(&quot;Original object: &quot; + demo.getTitle()); System.out.println(&quot;Example of incoming JSON: {\\&quot;title\\&quot; : \\&quot;Example of \\n JSON\\&quot;&quot;); ```  And the result is: <code>Original object: Example of  JSON Example of incoming JSON: {&quot;title&quot; : &quot;Example of  JSON&quot;</code>"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1688975618,"post_id":76638351,"comment_id":135141861,"body_markdown":"I don&#39;t think this *is* off track. I think the cause of the whole problem is you getting confused between the actual content of a string, and its string literal representation (and potentially the representation as shown in the debugger). However, it looks like I&#39;m not able to communicate that clearly, so I&#39;ll step away from this question now. Best of luck (no sarcasm intended) getting it resolved.","body":"I don&#39;t think this <i>is</i> off track. I think the cause of the whole problem is you getting confused between the actual content of a string, and its string literal representation (and potentially the representation as shown in the debugger). However, it looks like I&#39;m not able to communicate that clearly, so I&#39;ll step away from this question now. Best of luck (no sarcasm intended) getting it resolved."},{"owner":{"account_id":9483990,"reputation":123,"user_id":7050893,"display_name":"lbodevan"},"score":0,"creation_date":1688976399,"post_id":76638351,"comment_id":135142029,"body_markdown":"No problem @JonSkeet, it is probably lack of understanding on my side and wrong expectation towards Jackson. I don&#39;t see any difference in the `System.out`, but thanks for the help! If I find the reason or what I&#39;m doing wrong, I will update here in the future.","body":"No problem @JonSkeet, it is probably lack of understanding on my side and wrong expectation towards Jackson. I don&#39;t see any difference in the <code>System.out</code>, but thanks for the help! If I find the reason or what I&#39;m doing wrong, I will update here in the future."}],"answers":[{"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1688745352,"post_id":76638463,"comment_id":135119633,"body_markdown":"The JSON in the question *already* escapes the new line character...","body":"The JSON in the question <i>already</i> escapes the new line character..."},{"owner":{"account_id":9483990,"reputation":123,"user_id":7050893,"display_name":"lbodevan"},"score":0,"creation_date":1688856195,"post_id":76638463,"comment_id":135130646,"body_markdown":"Hi @JonSkeet, isn’t the escaped version of \\n actually \\\\n? I have this assumption because Jackson says \\n isn’t escaped. And because I’ve seen a second backslash added when dealing with \\n in JSON strings, for example in Python and JavaScript. I am not an expert on the topic, perhaps I have the wrong expectation based on past experiences with different languages.","body":"Hi @JonSkeet, isn’t the escaped version of \\n actually \\\\n? I have this assumption because Jackson says \\n isn’t escaped. And because I’ve seen a second backslash added when dealing with \\n in JSON strings, for example in Python and JavaScript. I am not an expert on the topic, perhaps I have the wrong expectation based on past experiences with different languages."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1688886657,"post_id":76638463,"comment_id":135132325,"body_markdown":"@lbodevan: Your original text doesn&#39;t contain `\\n` though - it contains a linefeed. You&#39;d only see two backslashes if you wanted to represent an *actual backslash* followed by n. The text in `Demo` as created by `return new Demo(&quot;Example of \\n JSON&quot;);` doesn&#39;t contain any backslashes.","body":"@lbodevan: Your original text doesn&#39;t contain <code>\\n</code> though - it contains a linefeed. You&#39;d only see two backslashes if you wanted to represent an <i>actual backslash</i> followed by n. The text in <code>Demo</code> as created by <code>return new Demo(&quot;Example of \\n JSON&quot;);</code> doesn&#39;t contain any backslashes."},{"owner":{"account_id":9483990,"reputation":123,"user_id":7050893,"display_name":"lbodevan"},"score":0,"creation_date":1688989752,"post_id":76638463,"comment_id":135144791,"body_markdown":"Hi @zargham-irtza, thanks a lot for the response. I tried that and actually doesn&#39;t compile. `customizer.customize(objectMapper);` fails to compile because it expects a `Jackson2ObjectMapperBuilder`. I managed to make it compile anyway, to try the feature `ESCAPE_NON_ASCII` but it didn&#39;t help.","body":"Hi @zargham-irtza, thanks a lot for the response. I tried that and actually doesn&#39;t compile. <code>customizer.customize(objectMapper);</code> fails to compile because it expects a <code>Jackson2ObjectMapperBuilder</code>. I managed to make it compile anyway, to try the feature <code>ESCAPE_NON_ASCII</code> but it didn&#39;t help."},{"owner":{"account_id":16352934,"reputation":16788,"user_id":11810933,"display_name":"NotTheDr01ds"},"score":0,"creation_date":1689905153,"post_id":76638463,"comment_id":135282558,"body_markdown":"Welcome back to Stack Overflow, Zargham irtza.\n\nIt looks like it&#39;s been a while since you&#39;ve posted and may not be aware of the latest policies since your answer appears likely to have been entirely or partially written by AI (e.g., ChatGPT). As a heads-up, [posting of AI-generated content is not permitted on Stack Overflow](//meta.stackoverflow.com/q/421831).\n\nIf you used an AI tool to assist with any answer, I would encourage you to delete it.\n\nWe do hope you&#39;ll stick around and continue to be a valuable part of our community by posting *your own* quality content. Thanks!","body":"Welcome back to Stack Overflow, Zargham irtza.  It looks like it&#39;s been a while since you&#39;ve posted and may not be aware of the latest policies since your answer appears likely to have been entirely or partially written by AI (e.g., ChatGPT). As a heads-up, <a href=\"//meta.stackoverflow.com/q/421831\">posting of AI-generated content is not permitted on Stack Overflow</a>.  If you used an AI tool to assist with any answer, I would encourage you to delete it.  We do hope you&#39;ll stick around and continue to be a valuable part of our community by posting <i>your own</i> quality content. Thanks!"},{"owner":{"account_id":16352934,"reputation":16788,"user_id":11810933,"display_name":"NotTheDr01ds"},"score":1,"creation_date":1689905159,"post_id":76638463,"comment_id":135282560,"body_markdown":"**Readers should review this answer carefully and critically, as AI-generated information often contains fundamental errors and misinformation.** If you observe quality issues and/or have reason to believe that this answer was generated by AI, please leave feedback accordingly.","body":"<b>Readers should review this answer carefully and critically, as AI-generated information often contains fundamental errors and misinformation.</b> If you observe quality issues and/or have reason to believe that this answer was generated by AI, please leave feedback accordingly."}],"tags":[],"owner":{"account_id":6734194,"reputation":75,"user_id":5189512,"accept_rate":57,"display_name":"Zargham irtza"},"comment_count":6,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1688745193,"creation_date":1688745193,"answer_id":76638463,"question_id":76638351,"body_markdown":"To escape characters like \\n and \\t in a JSON response by default using Spring Boot and Jackson, you can configure the ObjectMapper used by Jackson to enable the JsonGenerator.Feature.ESCAPE_NON_ASCII feature. This feature escapes non-ASCII characters using Unicode escape sequences, which includes characters like \\n and \\t.\r\n\r\nHere&#39;s how you can do it:\r\n\r\nCreate a configuration class to customize the Jackson ObjectMapper:\r\n\r\n\r\nimport com.fasterxml.jackson.core.JsonGenerator;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport org.springframework.boot.autoconfigure.jackson.Jackson2ObjectMapperBuilderCustomizer;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class JacksonConfig {\r\n\r\n    @Bean\r\n    public Jackson2ObjectMapperBuilderCustomizer jsonCustomizer() {\r\n        return builder -&gt; {\r\n            builder.featuresToEnable(JsonGenerator.Feature.ESCAPE_NON_ASCII);\r\n            // Add any other Jackson customization if needed\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    public ObjectMapper objectMapper(Jackson2ObjectMapperBuilderCustomizer customizer) {\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        customizer.customize(objectMapper);\r\n        return objectMapper;\r\n    }\r\n}\r\n\r\n\r\nIn the above configuration class, we define a bean for Jackson2ObjectMapperBuilderCustomizer that enables the JsonGenerator.Feature.ESCAPE_NON_ASCII feature.\r\n\r\nWe also define a bean for the ObjectMapper itself, where we apply the customizer to configure the ObjectMapper instance.\r\n\r\nWith the above configuration in place, Spring Boot will use the customized ObjectMapper to serialize JSON responses. The \\n and \\t characters (along with other non-ASCII characters) will be escaped with Unicode escape sequences.\r\n\r\nNote: Ensure that you have Jackson dependencies already configured in your Spring Boot project.\r\n\r\nThat&#39;s it! Now your JSON responses should include escaped characters like \\n and \\t by default.","title":"How to escape characters like \\n and \\t in a JSON response by default using Spring Boot and Jackson","body":"<p>To escape characters like \\n and \\t in a JSON response by default using Spring Boot and Jackson, you can configure the ObjectMapper used by Jackson to enable the JsonGenerator.Feature.ESCAPE_NON_ASCII feature. This feature escapes non-ASCII characters using Unicode escape sequences, which includes characters like \\n and \\t.</p>\n<p>Here's how you can do it:</p>\n<p>Create a configuration class to customize the Jackson ObjectMapper:</p>\n<p>import com.fasterxml.jackson.core.JsonGenerator;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.springframework.boot.autoconfigure.jackson.Jackson2ObjectMapperBuilderCustomizer;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;</p>\n<p>@Configuration\npublic class JacksonConfig {</p>\n<pre><code>@Bean\npublic Jackson2ObjectMapperBuilderCustomizer jsonCustomizer() {\n    return builder -&gt; {\n        builder.featuresToEnable(JsonGenerator.Feature.ESCAPE_NON_ASCII);\n        // Add any other Jackson customization if needed\n    };\n}\n\n@Bean\npublic ObjectMapper objectMapper(Jackson2ObjectMapperBuilderCustomizer customizer) {\n    ObjectMapper objectMapper = new ObjectMapper();\n    customizer.customize(objectMapper);\n    return objectMapper;\n}\n</code></pre>\n<p>}</p>\n<p>In the above configuration class, we define a bean for Jackson2ObjectMapperBuilderCustomizer that enables the JsonGenerator.Feature.ESCAPE_NON_ASCII feature.</p>\n<p>We also define a bean for the ObjectMapper itself, where we apply the customizer to configure the ObjectMapper instance.</p>\n<p>With the above configuration in place, Spring Boot will use the customized ObjectMapper to serialize JSON responses. The \\n and \\t characters (along with other non-ASCII characters) will be escaped with Unicode escape sequences.</p>\n<p>Note: Ensure that you have Jackson dependencies already configured in your Spring Boot project.</p>\n<p>That's it! Now your JSON responses should include escaped characters like \\n and \\t by default.</p>\n"}],"owner":{"account_id":9483990,"reputation":123,"user_id":7050893,"display_name":"lbodevan"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":855,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689930785,"creation_date":1688744338,"question_id":76638351,"body_markdown":"I&#39;m having problems to return a JSON with escaped characters from a Spring Boot application (version 2.7.13).\r\n\r\nThe `/demo` endpoint in the following example code:\r\n\r\n```java\r\npackage com.example.invalidjson.demo;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@SpringBootApplication\r\npublic class DemoApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(DemoApplication.class, args);\r\n    }\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/&quot;)\r\n    public class DemoController {\r\n        @GetMapping(path = &quot;/demo&quot;)\r\n        Demo getExample() {\r\n            Demo demo = new Demo();\r\n            demo.setTitle(&quot;Example of \\n JSON&quot;);\r\n\r\n            return demo;\r\n        }\r\n\r\n        @GetMapping(path = &quot;/read&quot;)\r\n        void readExample() {\r\n            try {\r\n                ObjectMapper objectMapper = new ObjectMapper();\r\n                Demo demo = objectMapper.readValue(&quot;{\\&quot;title\\&quot; : \\&quot;Example of \\n JSON\\&quot;}&quot;, Demo.class);\r\n\r\n                System.out.println(&quot;Reading succeeded: &quot; + demo.getTitle());\r\n            } catch (JsonProcessingException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static class Demo {\r\n        private String title;\r\n\r\n        public String getTitle() {\r\n            return title;\r\n        }\r\n\r\n        public void setTitle(String title) {\r\n            this.title = title;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nreturns the following JSON:\r\n\r\n```json\r\n{&quot;title&quot;:&quot;Example of \\n JSON&quot;}\r\n```\r\n\r\nThe problem is that this JSON can&#39;t be parsed by other clients. Even Jackson fails to read it. The `/read` endpoint throws the following exception:\r\n\r\n```lang-none\r\ncom.fasterxml.jackson.core.JsonParseException: Illegal unquoted character ((CTRL-CHAR, code 10)): has to be escaped using backslash to be included in string value\r\n at [Source: (String)&quot;{&quot;title&quot; : &quot;Example of\r\n JSON&quot;}&quot;; line: 1, column: 25]\r\n    at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2391) ~[jackson-core-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:735) ~[jackson-core-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.core.base.ParserBase._throwUnquotedSpace(ParserBase.java:1110) ~[jackson-core-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._finishString2(ReaderBasedJsonParser.java:2155) ~[jackson-core-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._finishString(ReaderBasedJsonParser.java:2126) ~[jackson-core-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.getText(ReaderBasedJsonParser.java:320) ~[jackson-core-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:41) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:11) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:129) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:314) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:177) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4674) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3629) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3597) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.example.invalidjson.demo.DemoApplication$DemoController.readExample(DemoApplication.java:34) ~[classes/:na]\r\n...\r\n```\r\n\r\nIt was my understanding that [Jackson](https://github.com/FasterXML/jackson), as the default JSON parser of Spring Boot, would automatically escape characters like `\\n` and `\\t` as per the [documentation](http://fasterxml.github.io/jackson-core/javadoc/2.10/com/fasterxml/jackson/core/json/JsonReadFeature.html#ALLOW_BACKSLASH_ESCAPING_ANY_CHARACTER), or maybe I didn&#39;t understand the documentation so well.\r\n\r\nI&#39;ve see some options using `JacksonConfiguration` like:\r\n\r\n```java\r\npackage com.example.invalidjson.demo;\r\n\r\nimport com.fasterxml.jackson.core.JsonGenerator;\r\nimport com.fasterxml.jackson.databind.JsonSerializer;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.databind.SerializerProvider;\r\nimport com.fasterxml.jackson.databind.module.SimpleModule;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\nimport java.io.IOException;\r\n\r\n@Configuration\r\npublic class JacksonConfiguration {\r\n    @Bean\r\n    public ObjectMapper objectMapper() {\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n        JsonSerializer&lt;String&gt; stringJsonSerializer = new JsonSerializer&lt;String&gt;() {\r\n            @Override\r\n            public void serialize(String value, JsonGenerator generator, SerializerProvider serializers) throws IOException {\r\n                generator.writeString(value.replace(&quot;\\n&quot;, &quot;\\\\n&quot;));\r\n            }\r\n        };\r\n\r\n        SimpleModule simpleModule = new SimpleModule();\r\n        simpleModule.addSerializer(String.class, stringJsonSerializer);\r\n\r\n        objectMapper.registerModule(simpleModule);\r\n        return objectMapper;\r\n    }\r\n}\r\n```\r\n\r\nIsn&#39;t there a different way to handle that?\r\n\r\nAnd the underlying question is: Why is Jackson generating a JSON that not even itself can read?\r\n\r\n","title":"How to escape characters like \\n and \\t in a JSON response by default using Spring Boot and Jackson","body":"<p>I'm having problems to return a JSON with escaped characters from a Spring Boot application (version 2.7.13).</p>\n<p>The <code>/demo</code> endpoint in the following example code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.invalidjson.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n    @RestController\n    @RequestMapping(&quot;/&quot;)\n    public class DemoController {\n        @GetMapping(path = &quot;/demo&quot;)\n        Demo getExample() {\n            Demo demo = new Demo();\n            demo.setTitle(&quot;Example of \\n JSON&quot;);\n\n            return demo;\n        }\n\n        @GetMapping(path = &quot;/read&quot;)\n        void readExample() {\n            try {\n                ObjectMapper objectMapper = new ObjectMapper();\n                Demo demo = objectMapper.readValue(&quot;{\\&quot;title\\&quot; : \\&quot;Example of \\n JSON\\&quot;}&quot;, Demo.class);\n\n                System.out.println(&quot;Reading succeeded: &quot; + demo.getTitle());\n            } catch (JsonProcessingException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }\n\n    public static class Demo {\n        private String title;\n\n        public String getTitle() {\n            return title;\n        }\n\n        public void setTitle(String title) {\n            this.title = title;\n        }\n    }\n}\n</code></pre>\n<p>returns the following JSON:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{&quot;title&quot;:&quot;Example of \\n JSON&quot;}\n</code></pre>\n<p>The problem is that this JSON can't be parsed by other clients. Even Jackson fails to read it. The <code>/read</code> endpoint throws the following exception:</p>\n<pre class=\"lang-none prettyprint-override\"><code>com.fasterxml.jackson.core.JsonParseException: Illegal unquoted character ((CTRL-CHAR, code 10)): has to be escaped using backslash to be included in string value\n at [Source: (String)&quot;{&quot;title&quot; : &quot;Example of\n JSON&quot;}&quot;; line: 1, column: 25]\n    at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2391) ~[jackson-core-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:735) ~[jackson-core-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.core.base.ParserBase._throwUnquotedSpace(ParserBase.java:1110) ~[jackson-core-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._finishString2(ReaderBasedJsonParser.java:2155) ~[jackson-core-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._finishString(ReaderBasedJsonParser.java:2126) ~[jackson-core-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.getText(ReaderBasedJsonParser.java:320) ~[jackson-core-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:41) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:11) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:129) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:314) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:177) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4674) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3629) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3597) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.example.invalidjson.demo.DemoApplication$DemoController.readExample(DemoApplication.java:34) ~[classes/:na]\n...\n</code></pre>\n<p>It was my understanding that <a href=\"https://github.com/FasterXML/jackson\" rel=\"nofollow noreferrer\">Jackson</a>, as the default JSON parser of Spring Boot, would automatically escape characters like <code>\\n</code> and <code>\\t</code> as per the <a href=\"http://fasterxml.github.io/jackson-core/javadoc/2.10/com/fasterxml/jackson/core/json/JsonReadFeature.html#ALLOW_BACKSLASH_ESCAPING_ANY_CHARACTER\" rel=\"nofollow noreferrer\">documentation</a>, or maybe I didn't understand the documentation so well.</p>\n<p>I've see some options using <code>JacksonConfiguration</code> like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.invalidjson.demo;\n\nimport com.fasterxml.jackson.core.JsonGenerator;\nimport com.fasterxml.jackson.databind.JsonSerializer;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializerProvider;\nimport com.fasterxml.jackson.databind.module.SimpleModule;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport java.io.IOException;\n\n@Configuration\npublic class JacksonConfiguration {\n    @Bean\n    public ObjectMapper objectMapper() {\n        ObjectMapper objectMapper = new ObjectMapper();\n\n        JsonSerializer&lt;String&gt; stringJsonSerializer = new JsonSerializer&lt;String&gt;() {\n            @Override\n            public void serialize(String value, JsonGenerator generator, SerializerProvider serializers) throws IOException {\n                generator.writeString(value.replace(&quot;\\n&quot;, &quot;\\\\n&quot;));\n            }\n        };\n\n        SimpleModule simpleModule = new SimpleModule();\n        simpleModule.addSerializer(String.class, stringJsonSerializer);\n\n        objectMapper.registerModule(simpleModule);\n        return objectMapper;\n    }\n}\n</code></pre>\n<p>Isn't there a different way to handle that?</p>\n<p>And the underlying question is: Why is Jackson generating a JSON that not even itself can read?</p>\n"},{"tags":["java","spring-boot","next.js"],"answers":[{"tags":[],"owner":{"account_id":20296591,"reputation":1,"user_id":14886991,"display_name":"Ian Lau"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640232928,"creation_date":1640232928,"answer_id":70457601,"question_id":70091462,"body_markdown":"Next.js is written in Javascript, Spring Boot is written in Java, they cannot be run together. However, after you run them in different ports, you can use a reverse proxy (e.g. Nginx) to stick them together under the same port but different endpoints (for example map Next.js to / and Spring Boot to /api)","title":"Can we have Springboot jar + NextJs running on same port as a packaged Jar","body":"<p>Next.js is written in Javascript, Spring Boot is written in Java, they cannot be run together. However, after you run them in different ports, you can use a reverse proxy (e.g. Nginx) to stick them together under the same port but different endpoints (for example map Next.js to / and Spring Boot to /api)</p>\n"},{"tags":[],"owner":{"account_id":16478744,"reputation":150,"user_id":11905991,"display_name":"Man Man Yu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689929841,"creation_date":1689929841,"answer_id":76736525,"question_id":70091462,"body_markdown":"Yes you can !\r\n\r\nCheck the answer over here:\r\n\r\nhttps://stackoverflow.com/questions/71333551/how-do-i-serve-the-nextjs-application-from-spring-boot-application\r\n\r\n\r\nyou need to modify the api link inside the nextjs (frontend)\r\nfrom http://xxxxx to /xxx,","title":"Can we have Springboot jar + NextJs running on same port as a packaged Jar","body":"<p>Yes you can !</p>\n<p>Check the answer over here:</p>\n<p><a href=\"https://stackoverflow.com/questions/71333551/how-do-i-serve-the-nextjs-application-from-spring-boot-application\">How do I serve the NextJs application from spring boot application?</a></p>\n<p>you need to modify the api link inside the nextjs (frontend)\nfrom http://xxxxx to /xxx,</p>\n"}],"owner":{"account_id":23436978,"reputation":21,"user_id":17494956,"display_name":"anubhav verman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":601,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1689929841,"creation_date":1637734402,"question_id":70091462,"body_markdown":"Ideally NextJs code runs on a different port 3000. Can we have NextJS code clubbed in Springboot executable Jar /WAR (embedded Tomcat) which runs on default port 8080, and make the clubbed application jar/war run on single port?\r\n\r\nJust want to highlight, React JS can be clubbed with Springboot , whereas NextJS I am no sure. ","title":"Can we have Springboot jar + NextJs running on same port as a packaged Jar","body":"<p>Ideally NextJs code runs on a different port 3000. Can we have NextJS code clubbed in Springboot executable Jar /WAR (embedded Tomcat) which runs on default port 8080, and make the clubbed application jar/war run on single port?</p>\n<p>Just want to highlight, React JS can be clubbed with Springboot , whereas NextJS I am no sure.</p>\n"},{"tags":["java","compilation"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":5,"creation_date":1689923413,"post_id":76735816,"comment_id":135284514,"body_markdown":"Are you aware of [De Morgan&#39;s Laws](https://en.wikipedia.org/wiki/De_Morgan%27s_laws)? If you do, what kind of answer are you expecting here?","body":"Are you aware of <a href=\"https://en.wikipedia.org/wiki/De_Morgan%27s_laws\" rel=\"nofollow noreferrer\">De Morgan&#39;s Laws</a>? If you do, what kind of answer are you expecting here?"}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1689923495,"creation_date":1689923495,"answer_id":76735850,"question_id":76735816,"body_markdown":"It didn&#39;t just change OR to AND, it changed `A || B` to `!(!A &amp;&amp; !B)`, which is a standard Boolean logic substitution. Note that the outer `not` was done by swapping around the `if` and `else` blocks.\r\n\r\nI would assume this is a compiler optimization. Don&#39;t worry about it.","title":"Why does JVM convert an `OR` to `AND`?","body":"<p>It didn't just change OR to AND, it changed <code>A || B</code> to <code>!(!A &amp;&amp; !B)</code>, which is a standard Boolean logic substitution. Note that the outer <code>not</code> was done by swapping around the <code>if</code> and <code>else</code> blocks.</p>\n<p>I would assume this is a compiler optimization. Don't worry about it.</p>\n"},{"tags":[],"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689929682,"creation_date":1689929682,"answer_id":76736507,"question_id":76735816,"body_markdown":"Keep in mind this:\r\n\r\n - If you think that your logic is better then a code that was revied and tested by hundreds, then you are wrong\r\n - If you think there is a bug in an open-source code then think twice, highly possible that you are wrong\r\n\r\n\r\n**Lets suppose this:**\r\n\r\n    A: currentValue.toString().matches(EPOCH_PATTERN.pattern()\r\n    B: currentValue instanceof Long\r\n\r\n\r\n**Your code**\r\n\r\n    A = 0 and B = 1 ---&gt; 0 || 1 = 1 ---&gt; setValue(Long...)\r\n    A = 1 and B = 0 ---&gt; same case\r\n    A = 1 and B = 1 ---&gt; same case\r\n    A = 0 and B = 0 ---&gt; 0 || 0 = 0 ---&gt; setValue(currentValue)\r\n\r\n\r\n**JVM code**\r\n\r\n    A = 0 and B = 1 ---&gt; !0 &amp;&amp; !1 ---&gt; 1 &amp;&amp; 0 = 0 ---&gt; setValue(Long...)\r\n    A = 1 and B = 0 ---&gt; !1 &amp;&amp; !0 ---&gt; same case\r\n    A = 1 and B = 1 ---&gt; !1 &amp;&amp; !1 ---&gt; same case\r\n    A = 0 and B = 0 ---&gt; !0 &amp;&amp; !0 ---&gt; 1 &amp;&amp; 1 = 1 --&gt; setValue(currentValue)\r\n\r\n\r\n","title":"Why does JVM convert an `OR` to `AND`?","body":"<p>Keep in mind this:</p>\n<ul>\n<li>If you think that your logic is better then a code that was revied and tested by hundreds, then you are wrong</li>\n<li>If you think there is a bug in an open-source code then think twice, highly possible that you are wrong</li>\n</ul>\n<p><strong>Lets suppose this:</strong></p>\n<pre><code>A: currentValue.toString().matches(EPOCH_PATTERN.pattern()\nB: currentValue instanceof Long\n</code></pre>\n<p><strong>Your code</strong></p>\n<pre><code>A = 0 and B = 1 ---&gt; 0 || 1 = 1 ---&gt; setValue(Long...)\nA = 1 and B = 0 ---&gt; same case\nA = 1 and B = 1 ---&gt; same case\nA = 0 and B = 0 ---&gt; 0 || 0 = 0 ---&gt; setValue(currentValue)\n</code></pre>\n<p><strong>JVM code</strong></p>\n<pre><code>A = 0 and B = 1 ---&gt; !0 &amp;&amp; !1 ---&gt; 1 &amp;&amp; 0 = 0 ---&gt; setValue(Long...)\nA = 1 and B = 0 ---&gt; !1 &amp;&amp; !0 ---&gt; same case\nA = 1 and B = 1 ---&gt; !1 &amp;&amp; !1 ---&gt; same case\nA = 0 and B = 0 ---&gt; !0 &amp;&amp; !0 ---&gt; 1 &amp;&amp; 1 = 1 --&gt; setValue(currentValue)\n</code></pre>\n"}],"owner":{"account_id":8191273,"reputation":163,"user_id":7800452,"display_name":"Deepak Gopal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":7,"up_vote_count":0,"closed_date":1689932100,"accepted_answer_id":76736507,"answer_count":2,"score":-7,"last_activity_date":1689929682,"creation_date":1689923230,"question_id":76735816,"body_markdown":"I am checking if an `object` is having an epoch pattern or is of type `Long`. So I wrote this in Java 8:\r\n```      \r\nif(currentValue.toString().matches(EPOCH_PATTERN.pattern()) || \r\ncurrentValue instanceof Long) \r\n        this.setValue(Long.valueOf(currentValue.toString()));\r\n      else\r\n        this.setValue(currentValue);\r\n```\r\n\r\nand JVM compiled it to \r\n```\r\nif (!currentValue.toString().matches(EPOCH_PATTERN.pattern()) &amp;&amp; \r\n!(currentValue instanceof Long)) {\r\n                this.setValue(currentValue);\r\n            } else {\r\n                this.setValue(Long.valueOf(currentValue.toString()));\r\n            }\r\n```\r\n\r\nThis is definitely not what I expected when I wrote the code.\r\nHow does `OR` get changed to `AND`. Am I making a fundamental mistake here?","title":"Why does JVM convert an `OR` to `AND`?","body":"<p>I am checking if an <code>object</code> is having an epoch pattern or is of type <code>Long</code>. So I wrote this in Java 8:</p>\n<pre><code>if(currentValue.toString().matches(EPOCH_PATTERN.pattern()) || \ncurrentValue instanceof Long) \n        this.setValue(Long.valueOf(currentValue.toString()));\n      else\n        this.setValue(currentValue);\n</code></pre>\n<p>and JVM compiled it to</p>\n<pre><code>if (!currentValue.toString().matches(EPOCH_PATTERN.pattern()) &amp;&amp; \n!(currentValue instanceof Long)) {\n                this.setValue(currentValue);\n            } else {\n                this.setValue(Long.valueOf(currentValue.toString()));\n            }\n</code></pre>\n<p>This is definitely not what I expected when I wrote the code.\nHow does <code>OR</code> get changed to <code>AND</code>. Am I making a fundamental mistake here?</p>\n"},{"tags":["java","spring","hibernate","kotlin","jpa"],"answers":[{"comments":[{"owner":{"account_id":4640755,"reputation":11089,"user_id":3935035,"accept_rate":86,"display_name":"four-eyes"},"score":0,"creation_date":1689676018,"post_id":76711753,"comment_id":135244181,"body_markdown":"This does not handle numbers in column names. When there is something like `price_year_2023_eur` it does convert it into `price_year2023eur`. This is why I wrote my own one. Why can&#39;t I use my selfwritten one?","body":"This does not handle numbers in column names. When there is something like <code>price_year_2023_eur</code> it does convert it into <code>price_year2023eur</code>. This is why I wrote my own one. Why can&#39;t I use my selfwritten one?"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1689680858,"post_id":76711753,"comment_id":135245207,"body_markdown":"@four-eyes I&#39;ve updated my answer. Please not that your property name was wrong","body":"@four-eyes I&#39;ve updated my answer. Please not that your property name was wrong"},{"owner":{"account_id":4640755,"reputation":11089,"user_id":3935035,"accept_rate":86,"display_name":"four-eyes"},"score":0,"creation_date":1689740672,"post_id":76711753,"comment_id":135254456,"body_markdown":"I am still getting the same error...","body":"I am still getting the same error..."},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1689756405,"post_id":76711753,"comment_id":135256837,"body_markdown":"Your CustomPhysicalNamingStrategy does not implement PhysicalNamingStrategy !","body":"Your CustomPhysicalNamingStrategy does not implement PhysicalNamingStrategy !"},{"owner":{"account_id":4640755,"reputation":11089,"user_id":3935035,"accept_rate":86,"display_name":"four-eyes"},"score":0,"creation_date":1689764254,"post_id":76711753,"comment_id":135258525,"body_markdown":"That is correct, however, it is still not working. When I try this `@Column(name =&quot;year_2022_green&quot;) var year2022Green: String = &quot;&quot;;` it works... Can hibernate not work with numbers in column names with a `CustomPhysicalNamingStrategy` or `CamelCaseToUnderscoresNamingStrategy`?","body":"That is correct, however, it is still not working. When I try this <code>@Column(name =&quot;year_2022_green&quot;) var year2022Green: String = &quot;&quot;;</code> it works... Can hibernate not work with numbers in column names with a <code>CustomPhysicalNamingStrategy</code> or <code>CamelCaseToUnderscoresNamingStrategy</code>?"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1689771645,"post_id":76711753,"comment_id":135260329,"body_markdown":"Numbers are not considered as upper or lower case and therefore nothing happens","body":"Numbers are not considered as upper or lower case and therefore nothing happens"},{"owner":{"account_id":4640755,"reputation":11089,"user_id":3935035,"accept_rate":86,"display_name":"four-eyes"},"score":0,"creation_date":1689843202,"post_id":76711753,"comment_id":135271680,"body_markdown":"I accounted for that in my custom `convertToSnakeCase()`","body":"I accounted for that in my custom <code>convertToSnakeCase()</code>"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1689843807,"post_id":76711753,"comment_id":135271785,"body_markdown":"Have you tried to debug your naming strategy?","body":"Have you tried to debug your naming strategy?"},{"owner":{"account_id":4640755,"reputation":11089,"user_id":3935035,"accept_rate":86,"display_name":"four-eyes"},"score":0,"creation_date":1689929398,"post_id":76711753,"comment_id":135285600,"body_markdown":"I answered the question.","body":"I answered the question."}],"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"comment_count":9,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689756439,"creation_date":1689675534,"answer_id":76711753,"question_id":76711733,"body_markdown":"If you want to have the conversion from camelCase to snake_case you have to set this:\r\n\r\n    spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy\r\n\r\nOr if you want to use your own:\r\n\r\n    spring.jpa.hibernate.physical_naming_strategy=org....utils.CustomPhysicalNamingStrategy\r\n\r\n**Please not that there is spring.jpa before hibernate...**\r\n\r\nAnd finally `CustomPhysicalNamingStrategy` MUST implement `PhysicalNamingStrategy` from Hibernate.","title":"Hibernate Field Naming with Spring Boot","body":"<p>If you want to have the conversion from camelCase to snake_case you have to set this:</p>\n<pre><code>spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy\n</code></pre>\n<p>Or if you want to use your own:</p>\n<pre><code>spring.jpa.hibernate.physical_naming_strategy=org....utils.CustomPhysicalNamingStrategy\n</code></pre>\n<p><strong>Please not that there is spring.jpa before hibernate...</strong></p>\n<p>And finally <code>CustomPhysicalNamingStrategy</code> MUST implement <code>PhysicalNamingStrategy</code> from Hibernate.</p>\n"},{"comments":[{"owner":{"account_id":4640755,"reputation":11089,"user_id":3935035,"accept_rate":86,"display_name":"four-eyes"},"score":0,"creation_date":1689676252,"post_id":76711847,"comment_id":135244231,"body_markdown":"I do not want to set this for every column... I want to set it once globally!","body":"I do not want to set this for every column... I want to set it once globally!"}],"tags":[],"owner":{"account_id":26647805,"reputation":11,"user_id":20262528,"display_name":"Akash"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689676233,"creation_date":1689676233,"answer_id":76711847,"question_id":76711733,"body_markdown":"If you are working with hibernate, Then you can use `name` attribute of `@Column` annotation just like you did in `@Table`. e.g.\r\n\r\n    @Column(name = &quot;year_2022_green&quot;)\r\n    var year2022Green: String = &quot;&quot;;\r\n\r\n","title":"Hibernate Field Naming with Spring Boot","body":"<p>If you are working with hibernate, Then you can use <code>name</code> attribute of <code>@Column</code> annotation just like you did in <code>@Table</code>. e.g.</p>\n<pre><code>@Column(name = &quot;year_2022_green&quot;)\nvar year2022Green: String = &quot;&quot;;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4640755,"reputation":11089,"user_id":3935035,"accept_rate":86,"display_name":"four-eyes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689929390,"creation_date":1689929390,"answer_id":76736481,"question_id":76711733,"body_markdown":"There are two problems. With Spring boot 3 and Hibernate 6, `application.properties` must look like this\r\n\r\n    spring.jpa.hibernate.naming.physical-strategy=&lt;path&gt;.CustomPhysicalNamingStrategy\r\n\r\n\r\nNote that *physical-strategy* uses a `CustomPhysicalNamingStrategy` and not the shipped `CamelCaseToUnderscoresNamingStrategy` ","title":"Hibernate Field Naming with Spring Boot","body":"<p>There are two problems. With Spring boot 3 and Hibernate 6, <code>application.properties</code> must look like this</p>\n<pre><code>spring.jpa.hibernate.naming.physical-strategy=&lt;path&gt;.CustomPhysicalNamingStrategy\n</code></pre>\n<p>Note that <em>physical-strategy</em> uses a <code>CustomPhysicalNamingStrategy</code> and not the shipped <code>CamelCaseToUnderscoresNamingStrategy</code></p>\n"}],"owner":{"account_id":4640755,"reputation":11089,"user_id":3935035,"accept_rate":86,"display_name":"four-eyes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76736481,"answer_count":3,"score":0,"last_activity_date":1689929390,"creation_date":1689675357,"question_id":76711733,"body_markdown":"In my table I have columns with the following names `price_year_2023_eur `, `date_added`, `yet_another_column_2`, ....\r\nOn the `kotlin` side I want to be able to use `camelCase` column names. Because of that I am trying to convert the column names.\r\n\r\n\r\n```\r\n// kotlin\r\n@Entity\r\n@Table(name = &quot;foo&quot;)\r\nclass Project(\r\n    @Column var priceYear2023Eur : String = &quot;&quot;,\r\n    @Column var dateAdded: Int = 1,\r\n    @Column var name: String = &quot;&quot;,\r\n    @Column var yetAnotherColumn2: Double = 0.0,\r\n)\r\n```\r\n\r\nI created a class (based on [this][1]) in which I extend the `convertToSnakeCase()` to include numbers.\r\n\r\n\r\n```\r\n\r\nclass CustomPhysicalNamingStrategy {\r\n    fun toPhysicalCatalogName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\r\n        return convertToSnakeCase(identifier)\r\n    }\r\n\r\n    fun toPhysicalColumnName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\r\n        return convertToSnakeCase(identifier)\r\n    }\r\n\r\n    fun toPhysicalSchemaName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\r\n        return convertToSnakeCase(identifier)\r\n    }\r\n\r\n    fun toPhysicalSequenceName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\r\n        return convertToSnakeCase(identifier)\r\n    }\r\n\r\n    fun toPhysicalTableName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\r\n        return convertToSnakeCase(identifier)\r\n    }\r\n\r\n    private fun convertToSnakeCase(identifier: Identifier): Identifier? {\r\n        val regexCamelCase = &quot;([a-z])([A-Z])&quot;.toRegex()\r\n        val regexNumber = &quot;&quot;&quot;([a-zA-Z])(\\d)&quot;&quot;&quot;.toRegex()\r\n        val replacement = &quot;$1_$2&quot;\r\n        val newNameLetters: String = identifier.text\r\n            .replace(regexCamelCase, replacement)\r\n            .lowercase()\r\n        val newNameNumbers: String = newNameLetters\r\n            .replace(regexNumber, replacement)\r\n            .lowercase()\r\n        return Identifier.toIdentifier(newNameNumbers)\r\n    }\r\n}\r\n\r\n```\r\n\r\nThis class I added to the `application.properties` files like this\r\n\r\n    hibernate.physical_naming_strategy=org....utils.CustomPhysicalNamingStrategy\r\n\r\n\r\nHowever, I am getting\r\n\r\n&gt; org.postgresql.util.PSQLException: ERROR: column p1_0.price_year2023eur does not exist\r\n  Hinweis: Perhaps you meant to reference the column &quot;p1_0.price_year_2023_eur&quot;.\r\n\r\nSomething is not working with the conversion, and I am unsure why. \r\n\r\n\r\n  [1]: https://www.baeldung.com/hibernate-naming-strategy#physical_name","title":"Hibernate Field Naming with Spring Boot","body":"<p>In my table I have columns with the following names <code>price_year_2023_eur </code>, <code>date_added</code>, <code>yet_another_column_2</code>, ....\nOn the <code>kotlin</code> side I want to be able to use <code>camelCase</code> column names. Because of that I am trying to convert the column names.</p>\n<pre><code>// kotlin\n@Entity\n@Table(name = &quot;foo&quot;)\nclass Project(\n    @Column var priceYear2023Eur : String = &quot;&quot;,\n    @Column var dateAdded: Int = 1,\n    @Column var name: String = &quot;&quot;,\n    @Column var yetAnotherColumn2: Double = 0.0,\n)\n</code></pre>\n<p>I created a class (based on <a href=\"https://www.baeldung.com/hibernate-naming-strategy#physical_name\" rel=\"nofollow noreferrer\">this</a>) in which I extend the <code>convertToSnakeCase()</code> to include numbers.</p>\n<pre><code>\nclass CustomPhysicalNamingStrategy {\n    fun toPhysicalCatalogName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\n        return convertToSnakeCase(identifier)\n    }\n\n    fun toPhysicalColumnName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\n        return convertToSnakeCase(identifier)\n    }\n\n    fun toPhysicalSchemaName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\n        return convertToSnakeCase(identifier)\n    }\n\n    fun toPhysicalSequenceName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\n        return convertToSnakeCase(identifier)\n    }\n\n    fun toPhysicalTableName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\n        return convertToSnakeCase(identifier)\n    }\n\n    private fun convertToSnakeCase(identifier: Identifier): Identifier? {\n        val regexCamelCase = &quot;([a-z])([A-Z])&quot;.toRegex()\n        val regexNumber = &quot;&quot;&quot;([a-zA-Z])(\\d)&quot;&quot;&quot;.toRegex()\n        val replacement = &quot;$1_$2&quot;\n        val newNameLetters: String = identifier.text\n            .replace(regexCamelCase, replacement)\n            .lowercase()\n        val newNameNumbers: String = newNameLetters\n            .replace(regexNumber, replacement)\n            .lowercase()\n        return Identifier.toIdentifier(newNameNumbers)\n    }\n}\n\n</code></pre>\n<p>This class I added to the <code>application.properties</code> files like this</p>\n<pre><code>hibernate.physical_naming_strategy=org....utils.CustomPhysicalNamingStrategy\n</code></pre>\n<p>However, I am getting</p>\n<blockquote>\n<p>org.postgresql.util.PSQLException: ERROR: column p1_0.price_year2023eur does not exist\nHinweis: Perhaps you meant to reference the column &quot;p1_0.price_year_2023_eur&quot;.</p>\n</blockquote>\n<p>Something is not working with the conversion, and I am unsure why.</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":526476,"reputation":27861,"user_id":1790644,"accept_rate":80,"display_name":"Matt Clark"},"score":3,"creation_date":1689912676,"post_id":76735055,"comment_id":135283144,"body_markdown":"I am guessing that you probably named your class _String.java_","body":"I am guessing that you probably named your class <i>String.java</i>"},{"owner":{"account_id":8958875,"reputation":3265,"user_id":6682274,"accept_rate":25,"display_name":"Sudhir Ojha"},"score":0,"creation_date":1689912680,"post_id":76735055,"comment_id":135283145,"body_markdown":"Use `sc.next()` or `sc.nextLine()`","body":"Use <code>sc.next()</code> or <code>sc.nextLine()</code>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1689912756,"post_id":76735055,"comment_id":135283151,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":29034010,"reputation":1,"user_id":22240319,"display_name":"Krishna Yadav"},"score":0,"creation_date":1689913671,"post_id":76735055,"comment_id":135283232,"body_markdown":"I tried by  using  sc.next() , sc.nextLine(), also tried by casting method but the error was same","body":"I tried by  using  sc.next() , sc.nextLine(), also tried by casting method but the error was same"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":2,"creation_date":1689920338,"post_id":76735055,"comment_id":135284005,"body_markdown":"Show your code. There is something else going on here but there is no way of knowing what without looking at your runnable code.","body":"Show your code. There is something else going on here but there is no way of knowing what without looking at your runnable code."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689922281,"post_id":76735055,"comment_id":135284324,"body_markdown":"@KrishnaYadav Did you see the comment from @MattClark?","body":"@KrishnaYadav Did you see the comment from @MattClark?"}],"answers":[{"tags":[],"owner":{"account_id":526476,"reputation":27861,"user_id":1790644,"accept_rate":80,"display_name":"Matt Clark"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689929297,"creation_date":1689929297,"answer_id":76736472,"question_id":76735055,"body_markdown":"I assume that you named you class `String`.\r\n\r\n**Don&#39;t do that.**\r\n\r\nI mean, you can. But try to not reuse names of core objects.\r\n\r\nI used Eclipse to verify and was able to reproduce a very similar message.\r\n\r\n    public class String {\r\n    \r\n    \tpublic void main(String[] args) {\r\n    \r\n    \t\tScanner sc = new Scanner(System.in);\r\n    \t\tString s = sc.nextLine();\r\n    \t\t//         /\\\r\n    \t\t// Type mismatch: cannot convert from java.lang.String to String\r\n    \t}\r\n    }\r\n\r\nIf you _really_ want to name you class _String_, you will need to fully qualify any reference to _java.lang.string_. The below will work, but you should really just change the name of your class.\r\n\r\n    java.lang.String s = sc.nextLine();\r\n","title":"how solve this problem so that I can store the string value to this variable","body":"<p>I assume that you named you class <code>String</code>.</p>\n<p><strong>Don't do that.</strong></p>\n<p>I mean, you can. But try to not reuse names of core objects.</p>\n<p>I used Eclipse to verify and was able to reproduce a very similar message.</p>\n<pre><code>public class String {\n\n    public void main(String[] args) {\n\n        Scanner sc = new Scanner(System.in);\n        String s = sc.nextLine();\n        //         /\\\n        // Type mismatch: cannot convert from java.lang.String to String\n    }\n}\n</code></pre>\n<p>If you <em>really</em> want to name you class <em>String</em>, you will need to fully qualify any reference to <em>java.lang.string</em>. The below will work, but you should really just change the name of your class.</p>\n<pre><code>java.lang.String s = sc.nextLine();\n</code></pre>\n"}],"owner":{"account_id":29034010,"reputation":1,"user_id":22240319,"display_name":"Krishna Yadav"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1689929297,"creation_date":1689912466,"question_id":76735055,"body_markdown":"String.java:8: error: incompatible types: java.lang.String cannot be converted to String\r\n    lastname = sc.next();\r\n\r\n\r\nI tried to store the string value to variable lastname but it is showing error that the variable is in compatible to store string value ","title":"how solve this problem so that I can store the string value to this variable","body":"<p>String.java:8: error: incompatible types: java.lang.String cannot be converted to String\nlastname = sc.next();</p>\n<p>I tried to store the string value to variable lastname but it is showing error that the variable is in compatible to store string value</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1689905938,"post_id":76734735,"comment_id":135282622,"body_markdown":"Can you show a [mcve]? Give a complete program that reproduces your problem, and state what you expected it to do instead of what it currently does.","body":"Can you show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? Give a complete program that reproduces your problem, and state what you expected it to do instead of what it currently does."}],"answers":[{"tags":[],"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689906427,"creation_date":1689906427,"answer_id":76734769,"question_id":76734735,"body_markdown":"&gt; The value of String one was not what was most recently set by the setter method, even though it was intialized to always be equal to whatever is returned by the get method.\r\n\r\nYou&#39;re misundertanding the &quot;equal&quot; operator. `String one = n.getPhraseX();` does _not_ mean &quot;assign `one` to always reference the value returned by `getPhraseX()`&quot;. It means &quot;_copy_ the _current_ value of `n.getPhraseX()` over to `one`&quot;.\r\n\r\nSo regardless of what you do with the setter for &quot;phrase x&quot;, &quot;one&quot; will continue to hold the value it was assigned.\r\n\r\nTry searching for tutorials and examples for &quot;Java assignment&quot; and &quot;Java copy by value&quot;.","title":"Assigning a method from an instantiated object to a variable","body":"<blockquote>\n<p>The value of String one was not what was most recently set by the setter method, even though it was intialized to always be equal to whatever is returned by the get method.</p>\n</blockquote>\n<p>You're misundertanding the &quot;equal&quot; operator. <code>String one = n.getPhraseX();</code> does <em>not</em> mean &quot;assign <code>one</code> to always reference the value returned by <code>getPhraseX()</code>&quot;. It means &quot;<em>copy</em> the <em>current</em> value of <code>n.getPhraseX()</code> over to <code>one</code>&quot;.</p>\n<p>So regardless of what you do with the setter for &quot;phrase x&quot;, &quot;one&quot; will continue to hold the value it was assigned.</p>\n<p>Try searching for tutorials and examples for &quot;Java assignment&quot; and &quot;Java copy by value&quot;.</p>\n"},{"tags":[],"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689929054,"creation_date":1689929054,"answer_id":76736451,"question_id":76734735,"body_markdown":"If you want to be able to do: \r\n\r\n    System.out.println(&quot;This is what PhraseX says: &quot; + one);\r\n\r\n... without explicitly recalling the function to update the value: \r\n\r\n    System.out.println(&quot;This is what PhraseX says: &quot; + n.getPhraseX());\r\n\r\n... then you could define the variable `one` as being a `Supplier&lt;String&gt;` instead: \r\n\r\n    Supplier&lt;String&gt; one = new Supplier&lt;&gt;() {\r\n        @Override\r\n        public String get() {\r\n            return n.getPhraseX();\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return get();\r\n        }\r\n    };\r\n\r\nLike that, when you print `one` inside `System.out.println`, the `toString()` method will be called and that method will invoke the `get()` of the supplier in order to recompute the value.\r\n\r\nIt changes nothing in terms of performance (you still need to invoke the function each time to recompute the value) but it allows you to keep the code &quot;clean&quot; while delegating the task of recomputing the value to the supplier instead of calling it each time. \r\n\r\nHowever, the option of writing directly: \r\n\r\n    System.out.println(&quot;This is what PhraseX says: &quot; + n.getPhraseX());\r\n\r\n... doesn&#39;t seem that bad either. ","title":"Assigning a method from an instantiated object to a variable","body":"<p>If you want to be able to do:</p>\n<pre><code>System.out.println(&quot;This is what PhraseX says: &quot; + one);\n</code></pre>\n<p>... without explicitly recalling the function to update the value:</p>\n<pre><code>System.out.println(&quot;This is what PhraseX says: &quot; + n.getPhraseX());\n</code></pre>\n<p>... then you could define the variable <code>one</code> as being a <code>Supplier&lt;String&gt;</code> instead:</p>\n<pre><code>Supplier&lt;String&gt; one = new Supplier&lt;&gt;() {\n    @Override\n    public String get() {\n        return n.getPhraseX();\n    }\n\n    @Override\n    public String toString() {\n        return get();\n    }\n};\n</code></pre>\n<p>Like that, when you print <code>one</code> inside <code>System.out.println</code>, the <code>toString()</code> method will be called and that method will invoke the <code>get()</code> of the supplier in order to recompute the value.</p>\n<p>It changes nothing in terms of performance (you still need to invoke the function each time to recompute the value) but it allows you to keep the code &quot;clean&quot; while delegating the task of recomputing the value to the supplier instead of calling it each time.</p>\n<p>However, the option of writing directly:</p>\n<pre><code>System.out.println(&quot;This is what PhraseX says: &quot; + n.getPhraseX());\n</code></pre>\n<p>... doesn't seem that bad either.</p>\n"}],"owner":{"account_id":29060214,"reputation":3,"user_id":22261081,"display_name":"droid"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76734769,"answer_count":2,"score":0,"last_activity_date":1689929054,"creation_date":1689905670,"question_id":76734735,"body_markdown":"Just to give an example, the beginning of the code I&#39;m working on is similar to what&#39;s below. I have created an object of the N class.\r\n\r\n```\r\nclass Main {\r\n  public static void main(String[] args) {\r\n    N n = new N();\r\n    String one = n.getPhraseX(); \r\n    String two;\r\n    String three;\r\n```\r\n\r\nLets say we have a method in the created class that looks like this:\r\n\r\n```\r\npublic String getPhraseX()\r\nreturn PhraseX;\r\n```\r\n\r\nWhen I assign this method to a variable from the Main class, String one as shown:\r\n\r\n```\r\nString one = n.getPhraseX();\r\n```\r\n\r\nI can&#39;t get a correct value from it without always declaring:\r\n\r\n```\r\none = n.getPhraseX();\r\n```\r\n\r\nafter changing PhraseX&#39;s value through a setter.\r\n\r\nIf I were to change the value of PhraseX through a setter, I cannot afterwards just call upon the method like this:\r\n\r\n```\r\nn.getPhraseX();\r\n```\r\n\r\nand get an updated value. It would give me an outdated value. I have to use one = n.getPhraseX();\r\n\r\nI tested this through:\r\n\r\n```\r\nSystem.out.println(&quot;This is what PhraseX says: &quot; + one);\r\n```\r\n\r\nin the line directly after the get method.\r\n\r\nThe value of String one was not what was most recently set by the setter method, even though it was intialized to always be equal to whatever is returned by the get method.\r\n\r\nI would like to know the specifics as to why this is the case, why the value of the String one isn&#39;t updating upon calling of the method alone.\r\n\r\nI tried exactly as shown above, as well as moving the positioning of the intialized String in the code, as well as trying to tweak the get and set methods.","title":"Assigning a method from an instantiated object to a variable","body":"<p>Just to give an example, the beginning of the code I'm working on is similar to what's below. I have created an object of the N class.</p>\n<pre><code>class Main {\n  public static void main(String[] args) {\n    N n = new N();\n    String one = n.getPhraseX(); \n    String two;\n    String three;\n</code></pre>\n<p>Lets say we have a method in the created class that looks like this:</p>\n<pre><code>public String getPhraseX()\nreturn PhraseX;\n</code></pre>\n<p>When I assign this method to a variable from the Main class, String one as shown:</p>\n<pre><code>String one = n.getPhraseX();\n</code></pre>\n<p>I can't get a correct value from it without always declaring:</p>\n<pre><code>one = n.getPhraseX();\n</code></pre>\n<p>after changing PhraseX's value through a setter.</p>\n<p>If I were to change the value of PhraseX through a setter, I cannot afterwards just call upon the method like this:</p>\n<pre><code>n.getPhraseX();\n</code></pre>\n<p>and get an updated value. It would give me an outdated value. I have to use one = n.getPhraseX();</p>\n<p>I tested this through:</p>\n<pre><code>System.out.println(&quot;This is what PhraseX says: &quot; + one);\n</code></pre>\n<p>in the line directly after the get method.</p>\n<p>The value of String one was not what was most recently set by the setter method, even though it was intialized to always be equal to whatever is returned by the get method.</p>\n<p>I would like to know the specifics as to why this is the case, why the value of the String one isn't updating upon calling of the method alone.</p>\n<p>I tried exactly as shown above, as well as moving the positioning of the intialized String in the code, as well as trying to tweak the get and set methods.</p>\n"},{"tags":["java","jdbc","keycloak"],"answers":[{"tags":[],"owner":{"account_id":23991445,"reputation":46,"user_id":17977545,"display_name":"Amir Mohammad"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681413502,"creation_date":1681413502,"answer_id":76009083,"question_id":76007973,"body_markdown":"This happens when there is no database server running at the specified URL.\r\n\r\n&gt; By default, the server uses the dev-file database. This is the default database that the server will use to persist data and only exists for development use-cases.\r\n\r\nCheck [this][1] guide for configuring a database for Keycloak and make sure if you are connecting to a remote database Keycloak has access to the remote system.\r\n\r\n\r\n  [1]: https://www.keycloak.org/server/db","title":"Error in starting Keycloak dev environment server","body":"<p>This happens when there is no database server running at the specified URL.</p>\n<blockquote>\n<p>By default, the server uses the dev-file database. This is the default database that the server will use to persist data and only exists for development use-cases.</p>\n</blockquote>\n<p>Check <a href=\"https://www.keycloak.org/server/db\" rel=\"nofollow noreferrer\">this</a> guide for configuring a database for Keycloak and make sure if you are connecting to a remote database Keycloak has access to the remote system.</p>\n"},{"tags":[],"owner":{"account_id":5799456,"reputation":75,"user_id":4574091,"display_name":"Kuppusamy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689928753,"creation_date":1689928753,"answer_id":76736414,"question_id":76007973,"body_markdown":"Encountered the same error and it seems Keycloak cannot get the default number of connections of 5 to set up the pool and in my mysql DB not sure what was the issue but managed to get Keycloak up and running by setting the following three values as 1:\r\n\r\nKC_DB_POOL_INITIAL_SIZE, KC_DB_POOL_MIN_SIZE and KC_DB_POOL_MAX_SIZE","title":"Error in starting Keycloak dev environment server","body":"<p>Encountered the same error and it seems Keycloak cannot get the default number of connections of 5 to set up the pool and in my mysql DB not sure what was the issue but managed to get Keycloak up and running by setting the following three values as 1:</p>\n<p>KC_DB_POOL_INITIAL_SIZE, KC_DB_POOL_MIN_SIZE and KC_DB_POOL_MAX_SIZE</p>\n"}],"owner":{"account_id":23327984,"reputation":1,"user_id":17404841,"display_name":"Abhipransh Pratap"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5032,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689928753,"creation_date":1681404626,"question_id":76007973,"body_markdown":"I&#39;ve already set the path variables but still getting this error.\r\nKeycloak-21.0.2\r\n\r\n\r\n```\r\nC:\\Program Files\\keycloak-21.0.2\\bin&gt;kc.bat start-dev\r\n2023-04-13 21:58:58,216 INFO  [org.keycloak.quarkus.runtime.hostname.DefaultHostnameProvider] (main) Hostname settings: Base URL: &lt;unset&gt;, Hostname: &lt;request&gt;, Strict HTTPS: false, Path: &lt;request&gt;, Strict BackChannel: false, Admin URL: &lt;unset&gt;, Admin: &lt;request&gt;, Port: -1, Proxied: false\r\n2023-04-13 21:59:01,941 WARN  [io.quarkus.agroal.runtime.DataSources] (main) Datasource &lt;default&gt; enables XA but transaction recovery is not enabled. Please enable transaction recovery by setting quarkus.transaction-manager.enable-recovery=true, otherwise data may be lost if the application is terminated abruptly\r\n2023-04-13 21:59:06,112 WARN  [org.infinispan.CONFIG] (keycloak-cache-init) ISPN000569: Unable to persist Infinispan internal caches as no global state enabled\r\n2023-04-13 21:59:06,241 WARN  [org.infinispan.PERSISTENCE] (keycloak-cache-init) ISPN000554: jboss-marshalling is deprecated and planned for removal\r\n2023-04-13 21:59:06,264 INFO  [org.infinispan.CONTAINER] (keycloak-cache-init) ISPN000556: Starting user marshaller &#39;org.infinispan.jboss.marshalling.core.JBossUserMarshaller&#39;\r\n2023-04-13 21:59:07,756 WARN  [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator] (JPA Startup Thread: keycloak-default) HHH000342: Could not obtain connection to query metadata: java.sql.SQLException: Acquisition timeout while waiting for new connection\r\n        at io.agroal.pool.ConnectionPool.handlerFromSharedCache(ConnectionPool.java:321)\r\n        at io.agroal.pool.ConnectionPool.getConnection(ConnectionPool.java:249)\r\n        at io.agroal.pool.DataSource.getConnection(DataSource.java:86)\r\n        at io.quarkus.hibernate.orm.runtime.customized.QuarkusConnectionProvider.getConnection(QuarkusConnectionProvider.java:23)\r\n        at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:181)\r\n        at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68)\r\n        at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\r\n        at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\r\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)\r\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237)\r\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n        at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:51)\r\n        at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:107)\r\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\r\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n        at org.hibernate.boot.internal.SessionFactoryOptionsBuilder.&lt;init&gt;(SessionFactoryOptionsBuilder.java:272)\r\n        at io.quarkus.hibernate.orm.runtime.recording.PrevalidatedQuarkusMetadata.buildSessionFactoryOptionsBuilder(PrevalidatedQuarkusMetadata.java:68)\r\n        at io.quarkus.hibernate.orm.runtime.boot.FastBootEntityManagerFactoryBuilder.build(FastBootEntityManagerFactoryBuilder.java:72)\r\n        at io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.createEntityManagerFactory(FastBootHibernatePersistenceProvider.java:72)\r\n        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:80)\r\n        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:55)\r\n        at io.quarkus.hibernate.orm.runtime.JPAConfig$LazyPersistenceUnit.get(JPAConfig.java:165)\r\n        at io.quarkus.hibernate.orm.runtime.JPAConfig$1.run(JPAConfig.java:66)\r\n        at java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: java.util.concurrent.TimeoutException\r\n        at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:204)\r\n        at io.agroal.pool.ConnectionPool.handlerFromSharedCache(ConnectionPool.java:298)\r\n        ... 23 more\r\n\r\n2023-04-13 21:59:14,212 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Failed to start server in (development) mode\r\n2023-04-13 21:59:14,212 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Failed to obtain JDBC connection\r\n2023-04-13 21:59:14,214 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Acquisition timeout while waiting for new connection\r\n2023-04-13 21:59:14,214 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) For more details run the same command passing the &#39;--verbose&#39; option. Also you can use &#39;--help&#39; to see the details about the usage of the particular command.\r\n```\r\n\r\nI was trying to open the dev server of Keycloak but in trun keep getting this instead.","title":"Error in starting Keycloak dev environment server","body":"<p>I've already set the path variables but still getting this error.\nKeycloak-21.0.2</p>\n<pre><code>C:\\Program Files\\keycloak-21.0.2\\bin&gt;kc.bat start-dev\n2023-04-13 21:58:58,216 INFO  [org.keycloak.quarkus.runtime.hostname.DefaultHostnameProvider] (main) Hostname settings: Base URL: &lt;unset&gt;, Hostname: &lt;request&gt;, Strict HTTPS: false, Path: &lt;request&gt;, Strict BackChannel: false, Admin URL: &lt;unset&gt;, Admin: &lt;request&gt;, Port: -1, Proxied: false\n2023-04-13 21:59:01,941 WARN  [io.quarkus.agroal.runtime.DataSources] (main) Datasource &lt;default&gt; enables XA but transaction recovery is not enabled. Please enable transaction recovery by setting quarkus.transaction-manager.enable-recovery=true, otherwise data may be lost if the application is terminated abruptly\n2023-04-13 21:59:06,112 WARN  [org.infinispan.CONFIG] (keycloak-cache-init) ISPN000569: Unable to persist Infinispan internal caches as no global state enabled\n2023-04-13 21:59:06,241 WARN  [org.infinispan.PERSISTENCE] (keycloak-cache-init) ISPN000554: jboss-marshalling is deprecated and planned for removal\n2023-04-13 21:59:06,264 INFO  [org.infinispan.CONTAINER] (keycloak-cache-init) ISPN000556: Starting user marshaller 'org.infinispan.jboss.marshalling.core.JBossUserMarshaller'\n2023-04-13 21:59:07,756 WARN  [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator] (JPA Startup Thread: keycloak-default) HHH000342: Could not obtain connection to query metadata: java.sql.SQLException: Acquisition timeout while waiting for new connection\n        at io.agroal.pool.ConnectionPool.handlerFromSharedCache(ConnectionPool.java:321)\n        at io.agroal.pool.ConnectionPool.getConnection(ConnectionPool.java:249)\n        at io.agroal.pool.DataSource.getConnection(DataSource.java:86)\n        at io.quarkus.hibernate.orm.runtime.customized.QuarkusConnectionProvider.getConnection(QuarkusConnectionProvider.java:23)\n        at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:181)\n        at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68)\n        at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\n        at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237)\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n        at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:51)\n        at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:107)\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n        at org.hibernate.boot.internal.SessionFactoryOptionsBuilder.&lt;init&gt;(SessionFactoryOptionsBuilder.java:272)\n        at io.quarkus.hibernate.orm.runtime.recording.PrevalidatedQuarkusMetadata.buildSessionFactoryOptionsBuilder(PrevalidatedQuarkusMetadata.java:68)\n        at io.quarkus.hibernate.orm.runtime.boot.FastBootEntityManagerFactoryBuilder.build(FastBootEntityManagerFactoryBuilder.java:72)\n        at io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.createEntityManagerFactory(FastBootHibernatePersistenceProvider.java:72)\n        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:80)\n        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:55)\n        at io.quarkus.hibernate.orm.runtime.JPAConfig$LazyPersistenceUnit.get(JPAConfig.java:165)\n        at io.quarkus.hibernate.orm.runtime.JPAConfig$1.run(JPAConfig.java:66)\n        at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.util.concurrent.TimeoutException\n        at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:204)\n        at io.agroal.pool.ConnectionPool.handlerFromSharedCache(ConnectionPool.java:298)\n        ... 23 more\n\n2023-04-13 21:59:14,212 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Failed to start server in (development) mode\n2023-04-13 21:59:14,212 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Failed to obtain JDBC connection\n2023-04-13 21:59:14,214 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Acquisition timeout while waiting for new connection\n2023-04-13 21:59:14,214 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) For more details run the same command passing the '--verbose' option. Also you can use '--help' to see the details about the usage of the particular command.\n</code></pre>\n<p>I was trying to open the dev server of Keycloak but in trun keep getting this instead.</p>\n"},{"tags":["java","neo4j","spring-data-neo4j","neo4j-ogm"],"answers":[{"tags":[],"owner":{"account_id":16156328,"reputation":21,"user_id":11663480,"display_name":"Vladyslav Mysiura"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689928656,"creation_date":1689927920,"answer_id":76736318,"question_id":76614144,"body_markdown":"I found out what caused this problem. It was the call of this asynchronous method:\r\n\r\n```java\r\nemailService.sendPayoutCreatedEmailAsync(employmentId, payout, userDetails); // fire-and-forget\r\n```\r\n\r\nThe method above is called just after the `addEmploymentPayout` one.\r\n\r\nThis is a definition of this method which is called another non-ansync method - `sendPayoutCreatedEmail` (this method has calls to repository methods):\r\n\r\n```java\r\n@Override\r\npublic CompletableFuture&lt;Void&gt; sendPayoutCreatedEmailAsync(String employmentId, EmploymentPayoutDTO payout, InfotempUserDetails userDetails) {\r\n\r\n\tvar future = CompletableFuture.runAsync(() -&gt; {\r\n\t    this.sendPayoutCreatedEmail(employmentId, payout, userDetails);\r\n\t});\r\n\r\n\treturn future;\r\n}\r\n```\r\n\r\n### SOLUTION:\r\n\r\nIt works (don&#39;t know how, but it does) if you change the asynchronous method call to a call from a new thread. Like this:\r\n\r\n```java\r\nnew Thread(() -&gt; {\r\n\temailService.sendPayoutCreatedEmail(employmentId, payout, userDetails);\r\n}).start();\r\n```\r\n","title":"Why I&#39;m getting &#39;Error mapping GraphModel&#39; error with neo4j OGM","body":"<p>I found out what caused this problem. It was the call of this asynchronous method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>emailService.sendPayoutCreatedEmailAsync(employmentId, payout, userDetails); // fire-and-forget\n</code></pre>\n<p>The method above is called just after the <code>addEmploymentPayout</code> one.</p>\n<p>This is a definition of this method which is called another non-ansync method - <code>sendPayoutCreatedEmail</code> (this method has calls to repository methods):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic CompletableFuture&lt;Void&gt; sendPayoutCreatedEmailAsync(String employmentId, EmploymentPayoutDTO payout, InfotempUserDetails userDetails) {\n\n    var future = CompletableFuture.runAsync(() -&gt; {\n        this.sendPayoutCreatedEmail(employmentId, payout, userDetails);\n    });\n\n    return future;\n}\n</code></pre>\n<h3>SOLUTION:</h3>\n<p>It works (don't know how, but it does) if you change the asynchronous method call to a call from a new thread. Like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>new Thread(() -&gt; {\n    emailService.sendPayoutCreatedEmail(employmentId, payout, userDetails);\n}).start();\n</code></pre>\n"}],"owner":{"account_id":16156328,"reputation":21,"user_id":11663480,"display_name":"Vladyslav Mysiura"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76736318,"answer_count":1,"score":0,"last_activity_date":1689928656,"creation_date":1688485133,"question_id":76614144,"body_markdown":"# Inputs:\r\n\r\n1. I am using a server cluster structure with 1 LEADER and 2 FOLLOWERS.\r\n2. Nodes structure\r\n   [![node structure](https://i.stack.imgur.com/wWFTr.png)](https://i.stack.imgur.com/wWFTr.png)\r\n\r\nSave Payout method:\r\n\r\n```java\r\n@Override\r\n@UseBookmark\r\n@Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRED)\r\npublic void addEmploymentPayout(EmploymentPayoutDTO payoutDto, String employmentId) {\r\n    try {\r\n        // Map\r\n        var payout = dozerMapper.map(payoutDto, EmploymentPayout.class);\r\n\r\n        // Save\r\n        var employment = profileService.findEmploymentByUuid(employmentId);\r\n\r\n        var container = employmentPayoutContainerRepository.getContainerIfExist(employmentId)\r\n                                                           .orElse(new EmploymentPayoutContainer());\r\n        container.setEmployment(employment);\r\n\r\n        var payouts = Optional.ofNullable(container.getEmploymentPayouts())\r\n                              .orElse(new ArrayList&lt;&gt;());\r\n        payouts.add(payout);\r\n        container.setEmploymentPayouts(payouts);\r\n        employmentPayoutContainerRepository.save(container);\r\n\r\n        // employmentPayout.setEmploymentPayoutContainer(container);\r\n        // employmentPayoutRepository.save(payout);\r\n        // employmentPayoutRepository.save(employmentPayout, 2);\r\n    } catch (Exception e) {\r\n        LOG.error(ExceptionUtils.getStackTrace(e));\r\n    }\r\n}\r\n```\r\n\r\nMethod `getAllPureEmploymentsByProfileId`:\r\n```java\r\n@Query(&quot;MATCH (p:Profile) WHERE p.uuid=$profileId &quot;\r\n\t+ &quot;MATCH (p)-[:HAS_PROFILE_EMPLOYMENT_CONTAINER]-&gt;(pec:ProfileEmploymentContainer) &quot;\r\n\t+ &quot;MATCH path = (pec)-[:USES_PROFILE_EMPLOYMENT]-(pe:ProfileEmployment) RETURN pec, path&quot;)\r\nProfileEmploymentContainer getAllPureEmploymentsByProfileId( @Param(&quot;profileId&quot;) String profileId);\r\n```\r\n\r\n# Description\r\n\r\nAfter saving (adding) a new `EmploymentPayout` (`addEmploymentPayout`), when I try to load all or part of the path (`getAllPureEmploymentsByProfileId`), I get this error. But the error disappears after restarting the server.\r\nCan you help me understand what I am doing wrong? Thanks a lot!\r\n\r\nError:\r\n\r\n```log\r\norg.springframework.dao.InvalidDataAccessApiUsageException: Error mapping GraphModel; nested exception is org.neo4j.ogm.exception.core.MappingException: Error mapping GraphModel\r\n\tat org.springframework.data.neo4j.transaction.SessionFactoryUtils.convertOgmAccessException(SessionFactoryUtils.java:125)\r\n\tat org.springframework.data.neo4j.repository.support.Neo4jPersistenceExceptionTranslator.translateExceptionIfPossible(Neo4jPersistenceExceptionTranslator.java:31)\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\r\n\tat com.sun.proxy.$Proxy128.getAllPureEmploymentsByProfileId(Unknown Source)\r\n\tat com.infotemp.neo4j.service.impl.ProfileServiceImpl.getEmploymentsForUser(ProfileServiceImpl.java:7410)\r\n\tat com.infotemp.neo4j.service.impl.ProfileServiceImpl$$FastClassBySpringCGLIB$$9ac11082.invoke(&lt;generated&gt;)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)\r\n\tat com.infotemp.neo4j.service.impl.ProfileServiceImpl$$EnhancerBySpringCGLIB$$56efb754.getEmploymentsForUser(&lt;generated&gt;)\r\n\tat com.infotemp.neo4j.service.impl.VacationCompensationAccountServiceImpl.getProfileEmployments(VacationCompensationAccountServiceImpl.java:536)\r\n\tat com.infotemp.neo4j.service.impl.VacationCompensationAccountServiceImpl.getCurrentEmployment(VacationCompensationAccountServiceImpl.java:73)\r\n\tat com.infotemp.neo4j.service.impl.VacationCompensationAccountServiceImpl$$FastClassBySpringCGLIB$$18090ab5.invoke(&lt;generated&gt;)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)\r\n\tat com.infotemp.neo4j.service.impl.VacationCompensationAccountServiceImpl$$EnhancerBySpringCGLIB$$5ea6899a.getCurrentEmployment(&lt;generated&gt;)\r\n\tat com.infotemp.controller.ProfileController.getVacationCompansation(ProfileController.java:2096)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter.doFilter(OAuth2AuthenticationProcessingFilter.java:182)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: org.neo4j.ogm.exception.core.MappingException: Error mapping GraphModel\r\n\tat org.neo4j.ogm.context.GraphEntityMapper.mapContentOf(GraphEntityMapper.java:164)\r\n\tat org.neo4j.ogm.context.GraphEntityMapper.lambda$map$2(GraphEntityMapper.java:115)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.neo4j.ogm.context.GraphEntityMapper.map(GraphEntityMapper.java:117)\r\n\tat org.neo4j.ogm.context.GraphRowModelMapper.map(GraphRowModelMapper.java:60)\r\n\tat org.neo4j.ogm.session.delegates.ExecuteQueriesDelegate.lambda$executeAndMap$1(ExecuteQueriesDelegate.java:165)\r\n\tat org.neo4j.ogm.session.Neo4jSession.doInTransaction(Neo4jSession.java:590)\r\n\tat org.neo4j.ogm.session.Neo4jSession.doInTransaction(Neo4jSession.java:564)\r\n\tat org.neo4j.ogm.session.delegates.ExecuteQueriesDelegate.executeAndMap(ExecuteQueriesDelegate.java:150)\r\n\tat org.neo4j.ogm.session.delegates.ExecuteQueriesDelegate.query(ExecuteQueriesDelegate.java:117)\r\n\tat org.neo4j.ogm.session.Neo4jSession.query(Neo4jSession.java:425)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282)\r\n\tat org.springframework.data.neo4j.transaction.SharedSessionCreator$SharedSessionInvocationHandler.lambda$invoke$1(SharedSessionCreator.java:121)\r\n\tat org.springframework.data.neo4j.transaction.SharedSessionCreator$SharedSessionInvocationHandler.invokeInTransaction(SharedSessionCreator.java:159)\r\n\tat org.springframework.data.neo4j.transaction.SharedSessionCreator$SharedSessionInvocationHandler.invoke(SharedSessionCreator.java:123)\r\n\tat com.sun.proxy.$Proxy89.query(Unknown Source)\r\n\tat org.springframework.data.neo4j.repository.query.GraphQueryExecution$SingleEntityExecution.execute(GraphQueryExecution.java:68)\r\n\tat org.springframework.data.neo4j.repository.query.GraphRepositoryQuery.doExecute(GraphRepositoryQuery.java:76)\r\n\tat org.springframework.data.neo4j.repository.query.AbstractGraphRepositoryQuery.execute(AbstractGraphRepositoryQuery.java:57)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor$QueryMethodInvoker.invoke(QueryExecutorMethodInterceptor.java:195)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:152)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:130)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\t... 120 more\r\nCaused by: java.lang.NullPointerException\r\n\tat org.neo4j.ogm.session.Utils.coerceTypes(Utils.java:79)\r\n\tat org.neo4j.ogm.metadata.FieldInfo.write(FieldInfo.java:449)\r\n\tat org.neo4j.ogm.context.GraphEntityMapper.createRelationshipEntity(GraphEntityMapper.java:419)\r\n\tat org.neo4j.ogm.context.GraphEntityMapper.mapRelationshipEntity(GraphEntityMapper.java:354)\r\n\tat org.neo4j.ogm.context.GraphEntityMapper.mapRelationships(GraphEntityMapper.java:330)\r\n\tat org.neo4j.ogm.context.GraphEntityMapper.mapContentOf(GraphEntityMapper.java:158)\r\n\t... 150 more\r\n```\r\n\r\n\r\nI tried to add these annotations but it didn&#39;t help:\r\n\r\n - `@UseBookmark`\r\n - `@Transactional(rollbackFor = Exception.class,\r\n   propagation = Propagation.REQUIRED)`\r\n\r\n**UPD**\r\n\r\nI don&#39;t have that problem with standalone (no clusters) Neoj4 server.","title":"Why I&#39;m getting &#39;Error mapping GraphModel&#39; error with neo4j OGM","body":"<h1>Inputs:</h1>\n<ol>\n<li>I am using a server cluster structure with 1 LEADER and 2 FOLLOWERS.</li>\n<li>Nodes structure\n<a href=\"https://i.stack.imgur.com/wWFTr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wWFTr.png\" alt=\"node structure\" /></a></li>\n</ol>\n<p>Save Payout method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n@UseBookmark\n@Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRED)\npublic void addEmploymentPayout(EmploymentPayoutDTO payoutDto, String employmentId) {\n    try {\n        // Map\n        var payout = dozerMapper.map(payoutDto, EmploymentPayout.class);\n\n        // Save\n        var employment = profileService.findEmploymentByUuid(employmentId);\n\n        var container = employmentPayoutContainerRepository.getContainerIfExist(employmentId)\n                                                           .orElse(new EmploymentPayoutContainer());\n        container.setEmployment(employment);\n\n        var payouts = Optional.ofNullable(container.getEmploymentPayouts())\n                              .orElse(new ArrayList&lt;&gt;());\n        payouts.add(payout);\n        container.setEmploymentPayouts(payouts);\n        employmentPayoutContainerRepository.save(container);\n\n        // employmentPayout.setEmploymentPayoutContainer(container);\n        // employmentPayoutRepository.save(payout);\n        // employmentPayoutRepository.save(employmentPayout, 2);\n    } catch (Exception e) {\n        LOG.error(ExceptionUtils.getStackTrace(e));\n    }\n}\n</code></pre>\n<p>Method <code>getAllPureEmploymentsByProfileId</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(&quot;MATCH (p:Profile) WHERE p.uuid=$profileId &quot;\n    + &quot;MATCH (p)-[:HAS_PROFILE_EMPLOYMENT_CONTAINER]-&gt;(pec:ProfileEmploymentContainer) &quot;\n    + &quot;MATCH path = (pec)-[:USES_PROFILE_EMPLOYMENT]-(pe:ProfileEmployment) RETURN pec, path&quot;)\nProfileEmploymentContainer getAllPureEmploymentsByProfileId( @Param(&quot;profileId&quot;) String profileId);\n</code></pre>\n<h1>Description</h1>\n<p>After saving (adding) a new <code>EmploymentPayout</code> (<code>addEmploymentPayout</code>), when I try to load all or part of the path (<code>getAllPureEmploymentsByProfileId</code>), I get this error. But the error disappears after restarting the server.\nCan you help me understand what I am doing wrong? Thanks a lot!</p>\n<p>Error:</p>\n<pre><code>org.springframework.dao.InvalidDataAccessApiUsageException: Error mapping GraphModel; nested exception is org.neo4j.ogm.exception.core.MappingException: Error mapping GraphModel\n    at org.springframework.data.neo4j.transaction.SessionFactoryUtils.convertOgmAccessException(SessionFactoryUtils.java:125)\n    at org.springframework.data.neo4j.repository.support.Neo4jPersistenceExceptionTranslator.translateExceptionIfPossible(Neo4jPersistenceExceptionTranslator.java:31)\n    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\n    at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\n    at com.sun.proxy.$Proxy128.getAllPureEmploymentsByProfileId(Unknown Source)\n    at com.infotemp.neo4j.service.impl.ProfileServiceImpl.getEmploymentsForUser(ProfileServiceImpl.java:7410)\n    at com.infotemp.neo4j.service.impl.ProfileServiceImpl$$FastClassBySpringCGLIB$$9ac11082.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)\n    at com.infotemp.neo4j.service.impl.ProfileServiceImpl$$EnhancerBySpringCGLIB$$56efb754.getEmploymentsForUser(&lt;generated&gt;)\n    at com.infotemp.neo4j.service.impl.VacationCompensationAccountServiceImpl.getProfileEmployments(VacationCompensationAccountServiceImpl.java:536)\n    at com.infotemp.neo4j.service.impl.VacationCompensationAccountServiceImpl.getCurrentEmployment(VacationCompensationAccountServiceImpl.java:73)\n    at com.infotemp.neo4j.service.impl.VacationCompensationAccountServiceImpl$$FastClassBySpringCGLIB$$18090ab5.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)\n    at com.infotemp.neo4j.service.impl.VacationCompensationAccountServiceImpl$$EnhancerBySpringCGLIB$$5ea6899a.getCurrentEmployment(&lt;generated&gt;)\n    at com.infotemp.controller.ProfileController.getVacationCompansation(ProfileController.java:2096)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter.doFilter(OAuth2AuthenticationProcessingFilter.java:182)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:829)\nCaused by: org.neo4j.ogm.exception.core.MappingException: Error mapping GraphModel\n    at org.neo4j.ogm.context.GraphEntityMapper.mapContentOf(GraphEntityMapper.java:164)\n    at org.neo4j.ogm.context.GraphEntityMapper.lambda$map$2(GraphEntityMapper.java:115)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.neo4j.ogm.context.GraphEntityMapper.map(GraphEntityMapper.java:117)\n    at org.neo4j.ogm.context.GraphRowModelMapper.map(GraphRowModelMapper.java:60)\n    at org.neo4j.ogm.session.delegates.ExecuteQueriesDelegate.lambda$executeAndMap$1(ExecuteQueriesDelegate.java:165)\n    at org.neo4j.ogm.session.Neo4jSession.doInTransaction(Neo4jSession.java:590)\n    at org.neo4j.ogm.session.Neo4jSession.doInTransaction(Neo4jSession.java:564)\n    at org.neo4j.ogm.session.delegates.ExecuteQueriesDelegate.executeAndMap(ExecuteQueriesDelegate.java:150)\n    at org.neo4j.ogm.session.delegates.ExecuteQueriesDelegate.query(ExecuteQueriesDelegate.java:117)\n    at org.neo4j.ogm.session.Neo4jSession.query(Neo4jSession.java:425)\n    at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282)\n    at org.springframework.data.neo4j.transaction.SharedSessionCreator$SharedSessionInvocationHandler.lambda$invoke$1(SharedSessionCreator.java:121)\n    at org.springframework.data.neo4j.transaction.SharedSessionCreator$SharedSessionInvocationHandler.invokeInTransaction(SharedSessionCreator.java:159)\n    at org.springframework.data.neo4j.transaction.SharedSessionCreator$SharedSessionInvocationHandler.invoke(SharedSessionCreator.java:123)\n    at com.sun.proxy.$Proxy89.query(Unknown Source)\n    at org.springframework.data.neo4j.repository.query.GraphQueryExecution$SingleEntityExecution.execute(GraphQueryExecution.java:68)\n    at org.springframework.data.neo4j.repository.query.GraphRepositoryQuery.doExecute(GraphRepositoryQuery.java:76)\n    at org.springframework.data.neo4j.repository.query.AbstractGraphRepositoryQuery.execute(AbstractGraphRepositoryQuery.java:57)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor$QueryMethodInvoker.invoke(QueryExecutorMethodInterceptor.java:195)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:152)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:130)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\n    ... 120 more\nCaused by: java.lang.NullPointerException\n    at org.neo4j.ogm.session.Utils.coerceTypes(Utils.java:79)\n    at org.neo4j.ogm.metadata.FieldInfo.write(FieldInfo.java:449)\n    at org.neo4j.ogm.context.GraphEntityMapper.createRelationshipEntity(GraphEntityMapper.java:419)\n    at org.neo4j.ogm.context.GraphEntityMapper.mapRelationshipEntity(GraphEntityMapper.java:354)\n    at org.neo4j.ogm.context.GraphEntityMapper.mapRelationships(GraphEntityMapper.java:330)\n    at org.neo4j.ogm.context.GraphEntityMapper.mapContentOf(GraphEntityMapper.java:158)\n    ... 150 more\n</code></pre>\n<p>I tried to add these annotations but it didn't help:</p>\n<ul>\n<li><code>@UseBookmark</code></li>\n<li><code>@Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRED)</code></li>\n</ul>\n<p><strong>UPD</strong></p>\n<p>I don't have that problem with standalone (no clusters) Neoj4 server.</p>\n"},{"tags":["java","string","stringbuilder"],"comments":[{"owner":{"account_id":2571824,"reputation":302,"user_id":2230348,"display_name":"Omar Zaarour"},"score":3,"creation_date":1507821939,"post_id":46713326,"comment_id":80373168,"body_markdown":"The line before the last is useless, you should assign that back to a string.So basically line 6 and 8 are doing exactly the same. If you want to test you theory, do System.out.println(s.ToString()).\n\nThat being said, the println function is doing it for you in both cases, so basically, println behind the scenes, takes the value of your string builder which is a string and print it.","body":"The line before the last is useless, you should assign that back to a string.So basically line 6 and 8 are doing exactly the same. If you want to test you theory, do System.out.println(s.ToString()).  That being said, the println function is doing it for you in both cases, so basically, println behind the scenes, takes the value of your string builder which is a string and print it."}],"answers":[{"tags":[],"owner":{"account_id":8737108,"reputation":30927,"user_id":6535399,"display_name":"bartonjs"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1507822074,"creation_date":1507822074,"answer_id":46713458,"question_id":46713326,"body_markdown":"There&#39;s nothing different between line 6 and line 8.\r\n\r\n[PrintStream.println(Object)](https://docs.oracle.com/javase/8/docs/api/java/io/PrintStream.html#println-java.lang.Object-) calls [string.valueOf(Object)](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#valueOf(java.lang.Object)) which calls the object&#39;s `toString()` method, and that gets printed.\r\n\r\n`System.out.println(s)` and `System.out.println(s.toString())` have the same output (unless `s` is `null`, in which case the latter throws an exception).\r\n\r\nThe reason you call `s.toString()` directly is to get the current &quot;built&quot; value from the StringBuilder as a `string` so you can pass it on to other code which expects a `string`.  If the code you want to call takes a `StringBuilder` you could just pass `s`, but then the called code has the ability to modify your value (they can&#39;t with `string` because it is an immutable data type).","title":"Why do we need to use toString method with StringBuilder?","body":"<p>There's nothing different between line 6 and line 8.</p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/PrintStream.html#println-java.lang.Object-\" rel=\"noreferrer\">PrintStream.println(Object)</a> calls <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#valueOf(java.lang.Object)\" rel=\"noreferrer\">string.valueOf(Object)</a> which calls the object's <code>toString()</code> method, and that gets printed.</p>\n\n<p><code>System.out.println(s)</code> and <code>System.out.println(s.toString())</code> have the same output (unless <code>s</code> is <code>null</code>, in which case the latter throws an exception).</p>\n\n<p>The reason you call <code>s.toString()</code> directly is to get the current \"built\" value from the StringBuilder as a <code>string</code> so you can pass it on to other code which expects a <code>string</code>.  If the code you want to call takes a <code>StringBuilder</code> you could just pass <code>s</code>, but then the called code has the ability to modify your value (they can't with <code>string</code> because it is an immutable data type).</p>\n"},{"comments":[{"owner":{"account_id":8737108,"reputation":30927,"user_id":6535399,"display_name":"bartonjs"},"score":0,"creation_date":1507822205,"post_id":46713477,"comment_id":80373334,"body_markdown":"Line 6 doesn&#39;t print an array of characters.  It prints an object... by calling its toString method.","body":"Line 6 doesn&#39;t print an array of characters.  It prints an object... by calling its toString method."},{"owner":{"account_id":6703345,"reputation":61,"user_id":5169174,"display_name":"Micktommyord"},"score":0,"creation_date":1507822272,"post_id":46713477,"comment_id":80373380,"body_markdown":"Yes, I had that in my head, and then read you post cheers for the reminder. I upvoted you answer too, as it&#39;s better than mine.","body":"Yes, I had that in my head, and then read you post cheers for the reminder. I upvoted you answer too, as it&#39;s better than mine."}],"tags":[],"owner":{"account_id":6703345,"reputation":61,"user_id":5169174,"display_name":"Micktommyord"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507822130,"creation_date":1507822130,"answer_id":46713477,"question_id":46713326,"body_markdown":"System.out.println can print out arrays of chars (line6)\r\ns.toString() is used to actually place the stringbuilder contents into a string. in your code you are not setting it to a string variable so nothing will happen... so on line8 the array of chars is printed again from the contents of your string builder.\r\n\r\nif you add\r\nstring str = s.toString();\r\nSystem.out.println(str);\r\n\r\nthen the string will print the string variable made from the stringbuilder.\r\n\r\n","title":"Why do we need to use toString method with StringBuilder?","body":"<p>System.out.println can print out arrays of chars (line6)\ns.toString() is used to actually place the stringbuilder contents into a string. in your code you are not setting it to a string variable so nothing will happen... so on line8 the array of chars is printed again from the contents of your string builder.</p>\n\n<p>if you add\nstring str = s.toString();\nSystem.out.println(str);</p>\n\n<p>then the string will print the string variable made from the stringbuilder.</p>\n"},{"tags":[],"owner":{"account_id":12868075,"reputation":31,"user_id":9307605,"display_name":"Dharani Manickavasagam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548456070,"creation_date":1548456070,"answer_id":54373750,"question_id":46713326,"body_markdown":"StringBuilder needs toString() to convert the mutable sequence of characters to String. \r\n\r\nSo technically, to return a StringBuilder obj from a method returning String, you have to convert the StringBuilder to String using toString().\r\n\r\nYou can also sysout a StringBuilder obj without the method toString() to get the values directly","title":"Why do we need to use toString method with StringBuilder?","body":"<p>StringBuilder needs toString() to convert the mutable sequence of characters to String. </p>\n\n<p>So technically, to return a StringBuilder obj from a method returning String, you have to convert the StringBuilder to String using toString().</p>\n\n<p>You can also sysout a StringBuilder obj without the method toString() to get the values directly</p>\n"}],"owner":{"account_id":11750498,"reputation":55,"user_id":8599883,"accept_rate":80,"display_name":"Mahesh Gupta"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2681,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":46713458,"answer_count":3,"score":1,"last_activity_date":1689928627,"creation_date":1507821707,"question_id":46713326,"body_markdown":"What is the difference between line 6 and line 8?\r\n\r\nThey both print the same string. Why do we need to use toString with StringBuilder?\r\n\r\n    StringBuilder s = new StringBuilder(&quot;hello&quot;); // Line 1\r\n    System.out.println(s); // Line 2\r\n\r\n    s.append(&quot;hi&quot;); // Line 3\r\n    System.out.println(s);\r\n\r\n    s.append(&quot;okk&quot;);\r\n    System.out.println(s); // Line 6\r\n\r\n    s.toString();\r\n    System.out.println(s); // Line 8\r\n\r\n","title":"Why do we need to use toString method with StringBuilder?","body":"<p>What is the difference between line 6 and line 8?</p>\n<p>They both print the same string. Why do we need to use toString with StringBuilder?</p>\n<pre><code>StringBuilder s = new StringBuilder(&quot;hello&quot;); // Line 1\nSystem.out.println(s); // Line 2\n\ns.append(&quot;hi&quot;); // Line 3\nSystem.out.println(s);\n\ns.append(&quot;okk&quot;);\nSystem.out.println(s); // Line 6\n\ns.toString();\nSystem.out.println(s); // Line 8\n</code></pre>\n"},{"tags":["java","maven","native","modular","jlink"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689609721,"post_id":76706172,"comment_id":135234443,"body_markdown":"Please post the shell script you mentioned","body":"Please post the shell script you mentioned"},{"owner":{"account_id":7506712,"reputation":11,"user_id":5702995,"display_name":"Maurizio M. Gavioli"},"score":0,"creation_date":1689612746,"post_id":76706172,"comment_id":135235103,"body_markdown":"@g00se : thanks for the reply; the script is the default one, generated by the pug-in; it is mostly the same for all the apps I have jlink-ed. Anyway, for completeness, I have added it to the question.","body":"@g00se : thanks for the reply; the script is the default one, generated by the pug-in; it is mostly the same for all the apps I have jlink-ed. Anyway, for completeness, I have added it to the question."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689613143,"post_id":76706172,"comment_id":135235189,"body_markdown":"But how is that script getting invoked? What parameters are being passed?","body":"But how is that script getting invoked? What parameters are being passed?"},{"owner":{"account_id":7506712,"reputation":11,"user_id":5702995,"display_name":"Maurizio M. Gavioli"},"score":0,"creation_date":1689623279,"post_id":76706172,"comment_id":135237151,"body_markdown":"None; the application (at least in its current state) needs (or knows) no parameter. Note that any parameter passed to the JVM after the `-m ...&quot; parameter (the &quot;$@&quot; at the end of the last script line) is ignored by the JVM itself and passed directly to the application.","body":"None; the application (at least in its current state) needs (or knows) no parameter. Note that any parameter passed to the JVM after the `-m ...&quot; parameter (the &quot;$@&quot; at the end of the last script line) is ignored by the JVM itself and passed directly to the application."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689623625,"post_id":76706172,"comment_id":135237200,"body_markdown":"I think you might try to intepolate `-Djava.library.path=foo`","body":"I think you might try to intepolate <code>-Djava.library.path=foo</code>"},{"owner":{"account_id":7506712,"reputation":11,"user_id":5702995,"display_name":"Maurizio M. Gavioli"},"score":0,"creation_date":1689677507,"post_id":76706172,"comment_id":135244497,"body_markdown":"Well, there is no physical path to the these libraries: they are within the `bin/modules` binary file, which is packed by jlink and added to the module and to the class path. This is the whole point of the jlink (and of the Maven jlink plug-in which is essentially a higher-level interface to it): to prepare a bunch of files containing EVERYTHING (and as far as possible ONLY) what it is needed to run the application (including a minimal Java executable), so that copying the pack to another machine (of a compatible platform, of course) you get a runnable application with no other prerequisites.","body":"Well, there is no physical path to the these libraries: they are within the <code>bin&#47;modules</code> binary file, which is packed by jlink and added to the module and to the class path. This is the whole point of the jlink (and of the Maven jlink plug-in which is essentially a higher-level interface to it): to prepare a bunch of files containing EVERYTHING (and as far as possible ONLY) what it is needed to run the application (including a minimal Java executable), so that copying the pack to another machine (of a compatible platform, of course) you get a runnable application with no other prerequisites."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689682170,"post_id":76706172,"comment_id":135245505,"body_markdown":"Yes, I know that&#39;s the general theory. Clearly that&#39;s not happened in this case, as what would normally be a shared library has *not* been linked properly, so I was suggesting that as a temporary workaround. Is it possible for us to get to the whole project?","body":"Yes, I know that&#39;s the general theory. Clearly that&#39;s not happened in this case, as what would normally be a shared library has <i>not</i> been linked properly, so I was suggesting that as a temporary workaround. Is it possible for us to get to the whole project?"},{"owner":{"account_id":7506712,"reputation":11,"user_id":5702995,"display_name":"Maurizio M. Gavioli"},"score":0,"creation_date":1689685666,"post_id":76706172,"comment_id":135246333,"body_markdown":"The whole project is quite large; I&#39;ll try to put together a minimal project and rephrase the question.","body":"The whole project is quite large; I&#39;ll try to put together a minimal project and rephrase the question."}],"answers":[{"tags":[],"owner":{"account_id":7506712,"reputation":11,"user_id":5702995,"display_name":"Maurizio M. Gavioli"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689928625,"creation_date":1689928625,"answer_id":76736397,"question_id":76706172,"body_markdown":"I am far from sure this is the best solution, as it is rather cumbersome, but it is the only one I found so far, it works (mostly) and may be useful to someone else too. I want to thank SPASI in [the LWJGL forum][1], who greatly helped me in finding it.\r\n\r\n1) **Add native libraries modules** to `module-info.java`: this ensures that the libraries will be found within the runnable image generated by the jlink pug-in. In practice, add to `module-info.java` one line like\r\n```\r\nrequires transitive org.lwjgl.natives;\r\n```\r\nfor each native library.\r\n\r\n2) Unfortunately, both Eclipse and the Maven compiler seem unable to locate these modules within the local Maven repo `.m2`. The solution is three-fold:\r\n\r\n2a) **Copy the dependencies** from the repo to a local folder, for instance `target/modules` using the `copy-dependencies` goal of the Maven dependency plug-in; this must be done **before** the Maven compile phase (I use the `generate-resources` phase), for instance:\r\n```\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.6.0&lt;/version&gt;\r\n\t&lt;configuration&gt;\r\n\t\t&lt;outputDirectory&gt;${project.build.directory}/modules&lt;/outputDirectory&gt;\r\n\t\t&lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\r\n\t\t&lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;\r\n\t\t&lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\r\n\t&lt;/configuration&gt;\r\n\t&lt;executions&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t\t&lt;id&gt;copy-dependencies&lt;/id&gt;\r\n\t\t\t&lt;phase&gt;generate-resources&lt;/phase&gt;\r\n\t\t\t&lt;goals&gt;\r\n\t\t\t\t&lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n\t\t\t&lt;/goals&gt;\r\n\t\t&lt;/execution&gt;\r\n\t&lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\n2b) **Maven compiler plug-in**: point this plug-in to the folder where the dependencies have been copied, adding this directive to the plug-in configuration:\r\n```\r\n&lt;compilerArgs&gt;\r\n\t&lt;arg&gt;--module-path&lt;/arg&gt;\r\n\t&lt;arg&gt;${project.build.directory}/modules&lt;/arg&gt;\r\n&lt;/compilerArgs&gt;\r\n```\r\n\r\n2c) **Maven jlink plug-in**: point this plug-in also to the same folder, adding the following directive to the plug-in configuration:\r\n```\r\n&lt;modulePaths&gt;\r\n\t&lt;modulePath&gt;${project.build.directory}/modules&lt;/modulePath&gt;\r\n&lt;/modulePaths&gt;\r\n```\r\n\r\nNow, Maven should correctly compile the project and jlink a runnable application.\r\n\r\n3) **Eclipse** (and perhaps other Java IDE&#39;s too): this leaves unsolved the issue with Eclipse not resolving the native library modules added to the `module-info.java` in step 1.\r\n\r\nThis precludes building the project from within Eclipse, which I find very useful at least for debugging. Maybe this can be solved for the libraries whose JAR&#39;s are already modular (but I do not know how), but surely it **cannot** be solved for the JAR&#39;s which are NOT modular and have to be modularised (for instance with the org.moditect:moditect-maven-plugin): their modules simply do not exist in any well-known location and are generated out-of-source (this happen to me with the `io.github.spair:imgui-java-natives-&lt;platform&gt;` which is not modular and is often used with openGL / Vulkan projects).\r\n\r\nAs I use Maven only via command line, I work-around this preparing (our of the Java source and parallel to the main project `pom.xml`) 2 versions of the `module-info.java`, one without and one with the added modules.\r\n\r\nNormally the project `module-info.java` is kept equal to the first, shorter, version; when I have to launch a Maven build, a small shell script overwrites `module-info` with the extended version, run the required `mvn` command(s) and finally overwrites `module-info.java` back with the &#39;normal&#39; version. Not really fool-proof, but usable.\r\n\r\n\r\n  [1]: http://forum.lwjgl.org/index.php?topic=7271.0","title":"Maven jlink plugin: native libraries not found when running the resulting image","body":"<p>I am far from sure this is the best solution, as it is rather cumbersome, but it is the only one I found so far, it works (mostly) and may be useful to someone else too. I want to thank SPASI in <a href=\"http://forum.lwjgl.org/index.php?topic=7271.0\" rel=\"nofollow noreferrer\">the LWJGL forum</a>, who greatly helped me in finding it.</p>\n<ol>\n<li><strong>Add native libraries modules</strong> to <code>module-info.java</code>: this ensures that the libraries will be found within the runnable image generated by the jlink pug-in. In practice, add to <code>module-info.java</code> one line like</li>\n</ol>\n<pre><code>requires transitive org.lwjgl.natives;\n</code></pre>\n<p>for each native library.</p>\n<ol start=\"2\">\n<li>Unfortunately, both Eclipse and the Maven compiler seem unable to locate these modules within the local Maven repo <code>.m2</code>. The solution is three-fold:</li>\n</ol>\n<p>2a) <strong>Copy the dependencies</strong> from the repo to a local folder, for instance <code>target/modules</code> using the <code>copy-dependencies</code> goal of the Maven dependency plug-in; this must be done <strong>before</strong> the Maven compile phase (I use the <code>generate-resources</code> phase), for instance:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.6.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;outputDirectory&gt;${project.build.directory}/modules&lt;/outputDirectory&gt;\n        &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\n        &lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;\n        &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;copy-dependencies&lt;/id&gt;\n            &lt;phase&gt;generate-resources&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>2b) <strong>Maven compiler plug-in</strong>: point this plug-in to the folder where the dependencies have been copied, adding this directive to the plug-in configuration:</p>\n<pre><code>&lt;compilerArgs&gt;\n    &lt;arg&gt;--module-path&lt;/arg&gt;\n    &lt;arg&gt;${project.build.directory}/modules&lt;/arg&gt;\n&lt;/compilerArgs&gt;\n</code></pre>\n<p>2c) <strong>Maven jlink plug-in</strong>: point this plug-in also to the same folder, adding the following directive to the plug-in configuration:</p>\n<pre><code>&lt;modulePaths&gt;\n    &lt;modulePath&gt;${project.build.directory}/modules&lt;/modulePath&gt;\n&lt;/modulePaths&gt;\n</code></pre>\n<p>Now, Maven should correctly compile the project and jlink a runnable application.</p>\n<ol start=\"3\">\n<li><strong>Eclipse</strong> (and perhaps other Java IDE's too): this leaves unsolved the issue with Eclipse not resolving the native library modules added to the <code>module-info.java</code> in step 1.</li>\n</ol>\n<p>This precludes building the project from within Eclipse, which I find very useful at least for debugging. Maybe this can be solved for the libraries whose JAR's are already modular (but I do not know how), but surely it <strong>cannot</strong> be solved for the JAR's which are NOT modular and have to be modularised (for instance with the org.moditect:moditect-maven-plugin): their modules simply do not exist in any well-known location and are generated out-of-source (this happen to me with the <code>io.github.spair:imgui-java-natives-&lt;platform&gt;</code> which is not modular and is often used with openGL / Vulkan projects).</p>\n<p>As I use Maven only via command line, I work-around this preparing (our of the Java source and parallel to the main project <code>pom.xml</code>) 2 versions of the <code>module-info.java</code>, one without and one with the added modules.</p>\n<p>Normally the project <code>module-info.java</code> is kept equal to the first, shorter, version; when I have to launch a Maven build, a small shell script overwrites <code>module-info</code> with the extended version, run the required <code>mvn</code> command(s) and finally overwrites <code>module-info.java</code> back with the 'normal' version. Not really fool-proof, but usable.</p>\n"}],"owner":{"account_id":7506712,"reputation":11,"user_id":5702995,"display_name":"Maurizio M. Gavioli"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76736397,"answer_count":1,"score":0,"last_activity_date":1689928625,"creation_date":1689609081,"question_id":76706172,"body_markdown":"Context: Linux Mint 21.1, Java Adoptium 17.0.7 JDK, Maven 3.6.3.\r\n\r\nMy modular application uses LWJGL (and then its native libraries); using the Maven jlink plug-in I generate a Java image. During generation, the jlink plug-in prints the following:\r\n```\r\n[INFO] --- maven-jlink-plugin:3.1.0:jlink (default-cli) @ treni ---\r\nINFO]  -&gt; module: org.lwjgl.stb ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-stb/3.3.2/lwjgl-stb-3.3.2.jar )\r\n[INFO]  -&gt; module: org.slf4j ( /home/mmg/.m2/repository/org/slf4j/slf4j-api/2.0.7/slf4j-api-2.0.7.jar )\r\n[INFO]  -&gt; module: imgui.natives.linux ( /home/mmg/.m2/repository/io/github/spair/imgui-java-natives-linux/1.86.10/imgui-java-natives-linux-1.86.10.jar )\r\n[INFO]  -&gt; module: org.lwjgl ( /home/mmg/.m2/repository/org/lwjgl/lwjgl/3.3.2/lwjgl-3.3.2.jar )\r\n[INFO]  -&gt; module: imgui.binding ( /home/mmg/.m2/repository/io/github/spair/imgui-java-binding/1.86.10/imgui-java-binding-1.86.10.jar )\r\n[INFO]  -&gt; module: org.lwjgl.stb.natives ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-stb/3.3.2/lwjgl-stb-3.3.2-natives-linux.jar )\r\n[INFO]  -&gt; module: org.lwjgl.glfw ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-glfw/3.3.2/lwjgl-glfw-3.3.2.jar )\r\n[INFO]  -&gt; module: org.joml ( /home/mmg/.m2/repository/org/joml/joml/1.10.5/joml-1.10.5.jar )\r\n[INFO]  -&gt; module: org.lwjgl.opengl ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-opengl/3.3.2/lwjgl-opengl-3.3.2.jar )\r\n[INFO]  -&gt; module: org.slf4j.jul ( /home/mmg/.m2/repository/org/slf4j/slf4j-jdk14/2.0.7/slf4j-jdk14-2.0.7.jar )\r\n[INFO]  -&gt; module: org.lwjgl.opengl.natives ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-opengl/3.3.2/lwjgl-opengl-3.3.2-natives-linux.jar )\r\n[INFO]  -&gt; module: org.lwjgl.natives ( /home/mmg/.m2/repository/org/lwjgl/lwjgl/3.3.2/lwjgl-3.3.2-natives-linux.jar )\r\n[INFO]  -&gt; module: com.vistamaresoft.treni ( /home/mmg/Documents/projects/Eclipse_workspaces/Treni/treni/target/classes )\r\n[INFO]  -&gt; module: org.lwjgl.glfw.natives ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-glfw/3.3.2/lwjgl-glfw-3.3.2-natives-linux.jar )\r\n[INFO] Building zip: /home/mmg/Documents/projects/Eclipse_workspaces/Treni/treni/target/treni-0.0.1.zip\r\n\r\n```\r\nwhich shows that the plug-in knows about all the required native library JAR&#39;s.\r\n\r\nI expected the resulting application to be able to locate the (evidently included, see below) native libraries, but it seems it is not, at leat without additional hits I have no idea how to give it (and I could not find described anywhere). In fact, when I run the generate shell script, I receive the error:\r\n\r\n`Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: Failed to locate library: liblwjgl.so`\r\n\r\nNote that the required library is contained in the `lwjgl-3.3.2-natives-linux.jar` referenced by the `pom.xml` dependencies via the appropriate profile (see below for the `pom.xml` contents).\r\n\r\nThe shell script is the default one generated by the jlink plug-in (the same for all my jlink-ed apps, only the module/main_class changes from one to another); anyway for completeness, this is its contents:\r\n```\r\n#!/bin/sh\r\nJLINK_VM_OPTIONS=\r\nDIR=`dirname $0`\r\n$DIR/java $JLINK_VM_OPTIONS -m com.vistamaresoft.treni/com.vistamaresoft.treni.Main &quot;$@&quot;\r\n```\r\n\r\nThe generated image DOES contain the native libraries: I tried generating an image WITHOUT the native dependencies and the result is shorter roughly of the same size of those JAR&#39;s. The difference, as expected, is in the resulting `lib/modules` file. So, this file presumably does contain the needed library/ies, but the executable(s) are not able to retrieve them?\r\n\r\nI have Googled and &#39;stackoverflow-ed&#39; for a whole day and I found nothing: any suggestion, help, hint about what it is happening is welcome.\r\n\r\nThis is the (slightly shortened for brevity) `pom.xml`;\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n&lt;!-- Several descriptive tags removed for brevity --&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n\t\t&lt;target.name&gt;treni&lt;/target.name&gt;\r\n\t\t&lt;!-- Versions --&gt;\r\n\t\t&lt;project.version&gt;0.0.1&lt;/project.version&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;joml.version&gt;1.10.5&lt;/joml.version&gt;\r\n\t\t&lt;joml-primitives.version&gt;1.10.4&lt;/joml-primitives.version&gt;\r\n\t\t&lt;lwjgl.version&gt;3.3.2&lt;/lwjgl.version&gt;\r\n\t\t&lt;imgui-java.version&gt;1.86.10&lt;/imgui-java.version&gt;\r\n\t\t&lt;exec-maven-plugin.version&gt;3.0.0&lt;/exec-maven-plugin.version&gt;\r\n\t\t&lt;maven-compiler-plugin.version&gt;3.11.0&lt;/maven-compiler-plugin.version&gt;\r\n\t\t&lt;maven-dependency-plugin.version&gt;3.6.0&lt;/maven-dependency-plugin.version&gt;\r\n\t\t&lt;maven-jar-plugin.version&gt;3.3.0&lt;/maven-jar-plugin.version&gt;\r\n\t\t&lt;maven-jlink-plugin.version&gt;3.1.0&lt;/maven-jlink-plugin.version&gt;\r\n\t\t&lt;maven-resources-plugin.version&gt;3.3.1&lt;/maven-resources-plugin.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;profiles&gt;\r\n\t\t&lt;profile&gt;\r\n\t\t\t&lt;id&gt;lwjgl-natives-linux-amd64&lt;/id&gt;\r\n\t\t\t&lt;activation&gt;\r\n\t\t\t\t&lt;os&gt;\r\n\t\t\t\t\t&lt;family&gt;unix&lt;/family&gt;\r\n\t\t\t\t\t&lt;arch&gt;amd64&lt;/arch&gt;\r\n\t\t\t\t&lt;/os&gt;\r\n\t\t\t&lt;/activation&gt;\r\n\t\t\t&lt;properties&gt;\r\n\t\t\t\t&lt;lwjgl.natives&gt;natives-linux&lt;/lwjgl.natives&gt;\r\n\t\t\t\t&lt;imgui.native&gt;natives-linux&lt;/imgui.native&gt;\r\n\t\t\t\t&lt;imgui.native.module&gt;linux&lt;/imgui.native.module&gt;\r\n\t\t\t&lt;/properties&gt;\r\n\t\t&lt;/profile&gt;\r\n\t\t&lt;!-- Windows and MacOs profiles removed for brevity --&gt;\r\n\t&lt;/profiles&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lwjgl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lwjgl.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lwjgl-glfw&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lwjgl.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lwjgl-opengl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lwjgl.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lwjgl-stb&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lwjgl.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.7&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.7&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.joml&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;joml&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${joml.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.spair&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;imgui-java-binding&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${imgui-java.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n&lt;!-- Natives --&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lwjgl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lwjgl.version}&lt;/version&gt;\r\n\t\t\t&lt;classifier&gt;${lwjgl.natives}&lt;/classifier&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lwjgl-glfw&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lwjgl.version}&lt;/version&gt;\r\n\t\t\t&lt;classifier&gt;${lwjgl.natives}&lt;/classifier&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lwjgl-opengl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lwjgl.version}&lt;/version&gt;\r\n\t\t\t&lt;classifier&gt;${lwjgl.natives}&lt;/classifier&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lwjgl-stb&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lwjgl.version}&lt;/version&gt;\r\n\t\t\t&lt;classifier&gt;${lwjgl.natives}&lt;/classifier&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.spair&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;imgui-java-${imgui.native}&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${imgui-java.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;pluginManagement&gt;\r\n\t\t\t&lt;plugins&gt;\r\n\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\r\n\t\t\t\t\t&lt;configuration&gt; &lt;!--\r\n\t\t\t\t\t\t&lt;release&gt;S${java.version}&lt;/release&gt; --&gt;\r\n\t\t\t\t\t\t&lt;source&gt;${java.version}&lt;/source&gt;\r\n\t\t\t\t\t\t&lt;target&gt;${java.version}&lt;/target&gt;\r\n\t\t\t\t\t\t&lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;archive&gt;\r\n\t\t\t\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t\t\t\t&lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n\t\t\t\t\t\t\t\t&lt;mainClass&gt;com.vistamaresoft.treni.Main&lt;/mainClass&gt;\r\n\t\t\t\t\t\t\t&lt;/manifest&gt;\r\n\t\t\t\t\t\t&lt;/archive&gt;\r\n\t\t\t\t\t\t&lt;outputDirectory&gt;${project.build.directory}/${target.name}&lt;/outputDirectory&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;3.5.0&lt;/version&gt;\r\n\t\t\t\t\t&lt;!-- run with `mvn javadoc:javadoc` --&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;reportOutputDirectory&gt;${project.basedir}/doc&lt;/reportOutputDirectory&gt;\r\n\t\t\t\t\t\t&lt;show&gt;public&lt;/show&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.moditect&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;moditect-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;1.0.0.Final&lt;/version&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;outputDirectory&gt;${project.build.directory}/modules&lt;/outputDirectory&gt;\r\n\t\t\t\t\t\t\t&lt;overwriteExistingFiles&gt;true&lt;/overwriteExistingFiles&gt;\r\n\t\t\t\t\t\t\t&lt;modules&gt;\r\n\t\t\t\t\t\t\t\t&lt;module&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;artifact&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;groupId&gt;io.github.spair&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;artifactId&gt;imgui-java-binding&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;version&gt;${imgui-java.version}&lt;/version&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/artifact&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;moduleInfoFile&gt;${project.basedir}/src/main/moduleInfos/imgui.binding.module-info.java&lt;/moduleInfoFile&gt;\r\n\t\t\t\t\t\t\t\t&lt;/module&gt;\r\n\r\n\t\t\t\t\t\t\t\t&lt;module&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;artifact&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;groupId&gt;io.github.spair&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;artifactId&gt;imgui-java-${imgui.native}&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;version&gt;${imgui-java.version}&lt;/version&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/artifact&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;moduleInfoFile&gt;${project.basedir}/src/main/moduleInfos/imgui.natives.${imgui.native.module}.module-info.java&lt;/moduleInfoFile&gt;\r\n\t\t\t\t\t\t\t\t&lt;/module&gt;\r\n\t\t\t\t\t\t\t&lt;/modules&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-jlink-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;${maven-jlink-plugin.version}&lt;/version&gt;\r\n\t\t\t\t\t&lt;!-- run with `mvn jlink:jlink` separately from `mvn package` as combining both into `mvn package jlink:jlink` raises an error --&gt;\r\n\t\t\t\t\t&lt;extensions&gt;true&lt;/extensions&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;!-- Module paths overriding the Mavem local repo path for non-modular JAR, modularised with moditect-maven-plugin --&gt;\r\n\t\t\t\t\t\t&lt;modulePaths&gt;\r\n\t\t\t\t\t\t\t&lt;modulePath&gt;${project.build.directory}/modules/imgui-java-binding-${imgui-java.version}.jar&lt;/modulePath&gt;\r\n\t\t\t\t\t\t\t&lt;modulePath&gt;${project.build.directory}/modules/imgui-java-natives-${imgui.native.module}-${imgui-java.version}.jar&lt;/modulePath&gt;\r\n\t\t\t\t\t\t&lt;/modulePaths&gt;\r\n\t\t\t\t\t\t&lt;compress&gt;2&lt;/compress&gt;\r\n\t\t\t\t\t\t&lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\r\n\t\t\t\t\t\t&lt;noManPages&gt;true&lt;/noManPages&gt;\r\n\t\t\t\t\t\t&lt;stripDebug&gt;true&lt;/stripDebug&gt;\r\n\t\t\t\t\t\t&lt;launcher&gt;treni=com.vistamaresoft.treni/com.vistamaresoft.treni.Main&lt;/launcher&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;/plugins&gt;\r\n\t\t&lt;/pluginManagement&gt;\r\n\r\n\t\t&lt;!-- PLUG-IN EXECUTIONS --&gt;\r\n\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.moditect&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;moditect-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;add-module-infos&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;generate-resources&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t&lt;goal&gt;add-module-info&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\nAnd this is the `module-info.java` of the app (currently in a single module):\r\n```\r\nmodule com.vistamaresoft.treni\r\n{\r\n\texports\t\t\t\tcom.vistamaresoft.treni;\r\n\texports\t\t\t\tcom.vistamaresoft.treni.engine;\r\n\texports\t\t\t\tcom.vistamaresoft.treni.engine.elements;\r\n\texports\t\t\t\tcom.vistamaresoft.treni.objectviewer;\r\n\texports\t\t\t\tcom.vistamaresoft.treni.sim;\r\n\r\n\trequires\t\t\timgui.binding;\r\n\trequires transitive\torg.joml;\r\n\trequires\t\t\torg.lwjgl;\r\n\trequires\t\t\torg.lwjgl.glfw;\r\n\trequires\t\t\torg.lwjgl.opengl;\r\n\trequires\t\t\torg.lwjgl.stb;\r\n\trequires transitive\torg.slf4j;\r\n\trequires java.prefs;\r\n\trequires java.base;\r\n\trequires java.logging;\r\n}\r\n```\r\n","title":"Maven jlink plugin: native libraries not found when running the resulting image","body":"<p>Context: Linux Mint 21.1, Java Adoptium 17.0.7 JDK, Maven 3.6.3.</p>\n<p>My modular application uses LWJGL (and then its native libraries); using the Maven jlink plug-in I generate a Java image. During generation, the jlink plug-in prints the following:</p>\n<pre><code>[INFO] --- maven-jlink-plugin:3.1.0:jlink (default-cli) @ treni ---\nINFO]  -&gt; module: org.lwjgl.stb ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-stb/3.3.2/lwjgl-stb-3.3.2.jar )\n[INFO]  -&gt; module: org.slf4j ( /home/mmg/.m2/repository/org/slf4j/slf4j-api/2.0.7/slf4j-api-2.0.7.jar )\n[INFO]  -&gt; module: imgui.natives.linux ( /home/mmg/.m2/repository/io/github/spair/imgui-java-natives-linux/1.86.10/imgui-java-natives-linux-1.86.10.jar )\n[INFO]  -&gt; module: org.lwjgl ( /home/mmg/.m2/repository/org/lwjgl/lwjgl/3.3.2/lwjgl-3.3.2.jar )\n[INFO]  -&gt; module: imgui.binding ( /home/mmg/.m2/repository/io/github/spair/imgui-java-binding/1.86.10/imgui-java-binding-1.86.10.jar )\n[INFO]  -&gt; module: org.lwjgl.stb.natives ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-stb/3.3.2/lwjgl-stb-3.3.2-natives-linux.jar )\n[INFO]  -&gt; module: org.lwjgl.glfw ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-glfw/3.3.2/lwjgl-glfw-3.3.2.jar )\n[INFO]  -&gt; module: org.joml ( /home/mmg/.m2/repository/org/joml/joml/1.10.5/joml-1.10.5.jar )\n[INFO]  -&gt; module: org.lwjgl.opengl ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-opengl/3.3.2/lwjgl-opengl-3.3.2.jar )\n[INFO]  -&gt; module: org.slf4j.jul ( /home/mmg/.m2/repository/org/slf4j/slf4j-jdk14/2.0.7/slf4j-jdk14-2.0.7.jar )\n[INFO]  -&gt; module: org.lwjgl.opengl.natives ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-opengl/3.3.2/lwjgl-opengl-3.3.2-natives-linux.jar )\n[INFO]  -&gt; module: org.lwjgl.natives ( /home/mmg/.m2/repository/org/lwjgl/lwjgl/3.3.2/lwjgl-3.3.2-natives-linux.jar )\n[INFO]  -&gt; module: com.vistamaresoft.treni ( /home/mmg/Documents/projects/Eclipse_workspaces/Treni/treni/target/classes )\n[INFO]  -&gt; module: org.lwjgl.glfw.natives ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-glfw/3.3.2/lwjgl-glfw-3.3.2-natives-linux.jar )\n[INFO] Building zip: /home/mmg/Documents/projects/Eclipse_workspaces/Treni/treni/target/treni-0.0.1.zip\n\n</code></pre>\n<p>which shows that the plug-in knows about all the required native library JAR's.</p>\n<p>I expected the resulting application to be able to locate the (evidently included, see below) native libraries, but it seems it is not, at leat without additional hits I have no idea how to give it (and I could not find described anywhere). In fact, when I run the generate shell script, I receive the error:</p>\n<p><code>Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: Failed to locate library: liblwjgl.so</code></p>\n<p>Note that the required library is contained in the <code>lwjgl-3.3.2-natives-linux.jar</code> referenced by the <code>pom.xml</code> dependencies via the appropriate profile (see below for the <code>pom.xml</code> contents).</p>\n<p>The shell script is the default one generated by the jlink plug-in (the same for all my jlink-ed apps, only the module/main_class changes from one to another); anyway for completeness, this is its contents:</p>\n<pre><code>#!/bin/sh\nJLINK_VM_OPTIONS=\nDIR=`dirname $0`\n$DIR/java $JLINK_VM_OPTIONS -m com.vistamaresoft.treni/com.vistamaresoft.treni.Main &quot;$@&quot;\n</code></pre>\n<p>The generated image DOES contain the native libraries: I tried generating an image WITHOUT the native dependencies and the result is shorter roughly of the same size of those JAR's. The difference, as expected, is in the resulting <code>lib/modules</code> file. So, this file presumably does contain the needed library/ies, but the executable(s) are not able to retrieve them?</p>\n<p>I have Googled and 'stackoverflow-ed' for a whole day and I found nothing: any suggestion, help, hint about what it is happening is welcome.</p>\n<p>This is the (slightly shortened for brevity) <code>pom.xml</code>;</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;!-- Several descriptive tags removed for brevity --&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;target.name&gt;treni&lt;/target.name&gt;\n        &lt;!-- Versions --&gt;\n        &lt;project.version&gt;0.0.1&lt;/project.version&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;joml.version&gt;1.10.5&lt;/joml.version&gt;\n        &lt;joml-primitives.version&gt;1.10.4&lt;/joml-primitives.version&gt;\n        &lt;lwjgl.version&gt;3.3.2&lt;/lwjgl.version&gt;\n        &lt;imgui-java.version&gt;1.86.10&lt;/imgui-java.version&gt;\n        &lt;exec-maven-plugin.version&gt;3.0.0&lt;/exec-maven-plugin.version&gt;\n        &lt;maven-compiler-plugin.version&gt;3.11.0&lt;/maven-compiler-plugin.version&gt;\n        &lt;maven-dependency-plugin.version&gt;3.6.0&lt;/maven-dependency-plugin.version&gt;\n        &lt;maven-jar-plugin.version&gt;3.3.0&lt;/maven-jar-plugin.version&gt;\n        &lt;maven-jlink-plugin.version&gt;3.1.0&lt;/maven-jlink-plugin.version&gt;\n        &lt;maven-resources-plugin.version&gt;3.3.1&lt;/maven-resources-plugin.version&gt;\n    &lt;/properties&gt;\n\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;lwjgl-natives-linux-amd64&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;os&gt;\n                    &lt;family&gt;unix&lt;/family&gt;\n                    &lt;arch&gt;amd64&lt;/arch&gt;\n                &lt;/os&gt;\n            &lt;/activation&gt;\n            &lt;properties&gt;\n                &lt;lwjgl.natives&gt;natives-linux&lt;/lwjgl.natives&gt;\n                &lt;imgui.native&gt;natives-linux&lt;/imgui.native&gt;\n                &lt;imgui.native.module&gt;linux&lt;/imgui.native.module&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n        &lt;!-- Windows and MacOs profiles removed for brevity --&gt;\n    &lt;/profiles&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl&lt;/artifactId&gt;\n            &lt;version&gt;${lwjgl.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl-glfw&lt;/artifactId&gt;\n            &lt;version&gt;${lwjgl.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl-opengl&lt;/artifactId&gt;\n            &lt;version&gt;${lwjgl.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl-stb&lt;/artifactId&gt;\n            &lt;version&gt;${lwjgl.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;\n            &lt;version&gt;2.0.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.joml&lt;/groupId&gt;\n            &lt;artifactId&gt;joml&lt;/artifactId&gt;\n            &lt;version&gt;${joml.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.spair&lt;/groupId&gt;\n            &lt;artifactId&gt;imgui-java-binding&lt;/artifactId&gt;\n            &lt;version&gt;${imgui-java.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n&lt;!-- Natives --&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl&lt;/artifactId&gt;\n            &lt;version&gt;${lwjgl.version}&lt;/version&gt;\n            &lt;classifier&gt;${lwjgl.natives}&lt;/classifier&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl-glfw&lt;/artifactId&gt;\n            &lt;version&gt;${lwjgl.version}&lt;/version&gt;\n            &lt;classifier&gt;${lwjgl.natives}&lt;/classifier&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl-opengl&lt;/artifactId&gt;\n            &lt;version&gt;${lwjgl.version}&lt;/version&gt;\n            &lt;classifier&gt;${lwjgl.natives}&lt;/classifier&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl-stb&lt;/artifactId&gt;\n            &lt;version&gt;${lwjgl.version}&lt;/version&gt;\n            &lt;classifier&gt;${lwjgl.natives}&lt;/classifier&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.spair&lt;/groupId&gt;\n            &lt;artifactId&gt;imgui-java-${imgui.native}&lt;/artifactId&gt;\n            &lt;version&gt;${imgui-java.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;pluginManagement&gt;\n            &lt;plugins&gt;\n\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\n                    &lt;configuration&gt; &lt;!--\n                        &lt;release&gt;S${java.version}&lt;/release&gt; --&gt;\n                        &lt;source&gt;${java.version}&lt;/source&gt;\n                        &lt;target&gt;${java.version}&lt;/target&gt;\n                        &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                    &lt;configuration&gt;\n                        &lt;archive&gt;\n                            &lt;manifest&gt;\n                                &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                                &lt;mainClass&gt;com.vistamaresoft.treni.Main&lt;/mainClass&gt;\n                            &lt;/manifest&gt;\n                        &lt;/archive&gt;\n                        &lt;outputDirectory&gt;${project.build.directory}/${target.name}&lt;/outputDirectory&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.5.0&lt;/version&gt;\n                    &lt;!-- run with `mvn javadoc:javadoc` --&gt;\n                    &lt;configuration&gt;\n                        &lt;reportOutputDirectory&gt;${project.basedir}/doc&lt;/reportOutputDirectory&gt;\n                        &lt;show&gt;public&lt;/show&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.moditect&lt;/groupId&gt;\n                    &lt;artifactId&gt;moditect-maven-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;1.0.0.Final&lt;/version&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;${project.build.directory}/modules&lt;/outputDirectory&gt;\n                            &lt;overwriteExistingFiles&gt;true&lt;/overwriteExistingFiles&gt;\n                            &lt;modules&gt;\n                                &lt;module&gt;\n                                    &lt;artifact&gt;\n                                        &lt;groupId&gt;io.github.spair&lt;/groupId&gt;\n                                        &lt;artifactId&gt;imgui-java-binding&lt;/artifactId&gt;\n                                        &lt;version&gt;${imgui-java.version}&lt;/version&gt;\n                                    &lt;/artifact&gt;\n                                    &lt;moduleInfoFile&gt;${project.basedir}/src/main/moduleInfos/imgui.binding.module-info.java&lt;/moduleInfoFile&gt;\n                                &lt;/module&gt;\n\n                                &lt;module&gt;\n                                    &lt;artifact&gt;\n                                        &lt;groupId&gt;io.github.spair&lt;/groupId&gt;\n                                        &lt;artifactId&gt;imgui-java-${imgui.native}&lt;/artifactId&gt;\n                                        &lt;version&gt;${imgui-java.version}&lt;/version&gt;\n                                    &lt;/artifact&gt;\n                                    &lt;moduleInfoFile&gt;${project.basedir}/src/main/moduleInfos/imgui.natives.${imgui.native.module}.module-info.java&lt;/moduleInfoFile&gt;\n                                &lt;/module&gt;\n                            &lt;/modules&gt;\n                        &lt;/configuration&gt;\n                &lt;/plugin&gt;\n\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-jlink-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;${maven-jlink-plugin.version}&lt;/version&gt;\n                    &lt;!-- run with `mvn jlink:jlink` separately from `mvn package` as combining both into `mvn package jlink:jlink` raises an error --&gt;\n                    &lt;extensions&gt;true&lt;/extensions&gt;\n                    &lt;configuration&gt;\n                        &lt;!-- Module paths overriding the Mavem local repo path for non-modular JAR, modularised with moditect-maven-plugin --&gt;\n                        &lt;modulePaths&gt;\n                            &lt;modulePath&gt;${project.build.directory}/modules/imgui-java-binding-${imgui-java.version}.jar&lt;/modulePath&gt;\n                            &lt;modulePath&gt;${project.build.directory}/modules/imgui-java-natives-${imgui.native.module}-${imgui-java.version}.jar&lt;/modulePath&gt;\n                        &lt;/modulePaths&gt;\n                        &lt;compress&gt;2&lt;/compress&gt;\n                        &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\n                        &lt;noManPages&gt;true&lt;/noManPages&gt;\n                        &lt;stripDebug&gt;true&lt;/stripDebug&gt;\n                        &lt;launcher&gt;treni=com.vistamaresoft.treni/com.vistamaresoft.treni.Main&lt;/launcher&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n\n            &lt;/plugins&gt;\n        &lt;/pluginManagement&gt;\n\n        &lt;!-- PLUG-IN EXECUTIONS --&gt;\n\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.moditect&lt;/groupId&gt;\n                &lt;artifactId&gt;moditect-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;add-module-infos&lt;/id&gt;\n                        &lt;phase&gt;generate-resources&lt;/phase&gt;\n                        &lt;goals&gt;\n                        &lt;goal&gt;add-module-info&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>And this is the <code>module-info.java</code> of the app (currently in a single module):</p>\n<pre><code>module com.vistamaresoft.treni\n{\n    exports             com.vistamaresoft.treni;\n    exports             com.vistamaresoft.treni.engine;\n    exports             com.vistamaresoft.treni.engine.elements;\n    exports             com.vistamaresoft.treni.objectviewer;\n    exports             com.vistamaresoft.treni.sim;\n\n    requires            imgui.binding;\n    requires transitive org.joml;\n    requires            org.lwjgl;\n    requires            org.lwjgl.glfw;\n    requires            org.lwjgl.opengl;\n    requires            org.lwjgl.stb;\n    requires transitive org.slf4j;\n    requires java.prefs;\n    requires java.base;\n    requires java.logging;\n}\n</code></pre>\n"},{"tags":["java","mysql","jooq"],"answers":[{"comments":[{"owner":{"account_id":1360717,"reputation":244,"user_id":1298152,"display_name":"Simbosan"},"score":0,"creation_date":1689878711,"post_id":49610034,"comment_id":135279483,"body_markdown":"at least in postgres this doesn&#39;t work.  You get a single row resultset with 0 in it which is the number of rows updated by the set command.\n\nFull answer here\nhttps://github.com/jOOQ/jOOQ/discussions/15247","body":"at least in postgres this doesn&#39;t work.  You get a single row resultset with 0 in it which is the number of rows updated by the set command.  Full answer here <a href=\"https://github.com/jOOQ/jOOQ/discussions/15247\" rel=\"nofollow noreferrer\">github.com/jOOQ/jOOQ/discussions/15247</a>"},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":1,"creation_date":1689879383,"post_id":49610034,"comment_id":135279616,"body_markdown":"@Simbosan: This question was MySQL specific","body":"@Simbosan: This question was MySQL specific"},{"owner":{"account_id":1360717,"reputation":244,"user_id":1298152,"display_name":"Simbosan"},"score":0,"creation_date":1689880243,"post_id":49610034,"comment_id":135279786,"body_markdown":"It would be interesting if it was database specific rather than how Jooq handles multiple statements.  Thanks for your post it got me 95% of the way to the solution.","body":"It would be interesting if it was database specific rather than how Jooq handles multiple statements.  Thanks for your post it got me 95% of the way to the solution."},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":1,"creation_date":1689928119,"post_id":49610034,"comment_id":135285366,"body_markdown":"@Simbosan: I&#39;ll add a link to the related question (https://stackoverflow.com/q/76540584/521799) from my answer for better discoverability.","body":"@Simbosan: I&#39;ll add a link to the related question (<a href=\"https://stackoverflow.com/q/76540584/521799\">stackoverflow.com/q/76540584/521799</a>) from my answer for better discoverability."},{"owner":{"account_id":1360717,"reputation":244,"user_id":1298152,"display_name":"Simbosan"},"score":0,"creation_date":1690026989,"post_id":49610034,"comment_id":135297336,"body_markdown":"awesome, thanks very much.","body":"awesome, thanks very much."}],"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":5,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689928184,"creation_date":1522666986,"answer_id":49610034,"question_id":49590493,"body_markdown":"As you&#39;ve noticed, jOOQ doesn&#39;t currently strictly support your syntax, so you have to make use of the plain SQL templating mechanisms offered by the jOOQ API:\r\nhttps://www.jooq.org/doc/latest/manual/sql-building/plain-sql-templating\r\n\r\nYou&#39;ve already done that correctly for the query itself. Now about initialising the variable, this is done ideally in the same JDBC statement, not in a separate statement to prevent side effects caused by jOOQ closing the JDBC connection between consecutive executions (e.g. when using a [`DataSourceConnectionProvider`][1]). So, the most straightforward way to do that with jOOQ is to use an [`ExecuteListener`][2] that prepends the initialisation SQL string to that particular statement only, e.g.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    class InitialisingVariableListener extends DefaultExecuteListener {\r\n        @Override\r\n        public void renderEnd(ExecuteContext ctx) {\r\n            ctx.sql(&quot;SET @row_number = 0;&quot; + ctx.sql());\r\n        }\r\n    }\r\n\r\nAnd hook that to your `Configuration` prior to executing the query:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    Field&lt;Integer&gt; num = DSL.field(&quot;@row_number:=@row_number +1&quot;, Integer.class);\r\n    DSLContext create = DSL.using(connection, dialect);\r\n    create.configuration().set(new InitialisingVariableListener());\r\n    create.select(AUTHOR.FIRST_NAME, AUTHOR.LAST_NAME, num)\r\n          .from(AUTHOR)\r\n          .limit(5)\r\n          .fetch();\r\n\r\nIf you&#39;re reusing the `Configuration` among several queries, you may want to prefer to call `derive()` on it to create a new `Configuration` rather than `set()`, which modifies the `Configuration` for everyone.\r\n\r\n### A note on other RDBMS\r\n\r\nThis answer was MySQL specific, where the `SET` statement does not produce any output (update counts) through JDBC. In other RDBMS (e.g. PostgreSQL), `SET` produces an update count, which might have to be skipped, see this question here for details, and workarounds:\r\n\r\n- https://stackoverflow.com/q/76540584/521799\r\n\r\n  [1]: https://www.jooq.org/javadoc/latest/org/jooq/impl/DataSourceConnectionProvider.html\r\n  [2]: https://www.jooq.org/javadoc/latest/org/jooq/ExecuteListener.html","title":"How to set a @Variable in JOOQ","body":"<p>As you've noticed, jOOQ doesn't currently strictly support your syntax, so you have to make use of the plain SQL templating mechanisms offered by the jOOQ API:\n<a href=\"https://www.jooq.org/doc/latest/manual/sql-building/plain-sql-templating\" rel=\"nofollow noreferrer\">https://www.jooq.org/doc/latest/manual/sql-building/plain-sql-templating</a></p>\n<p>You've already done that correctly for the query itself. Now about initialising the variable, this is done ideally in the same JDBC statement, not in a separate statement to prevent side effects caused by jOOQ closing the JDBC connection between consecutive executions (e.g. when using a <a href=\"https://www.jooq.org/javadoc/latest/org/jooq/impl/DataSourceConnectionProvider.html\" rel=\"nofollow noreferrer\"><code>DataSourceConnectionProvider</code></a>). So, the most straightforward way to do that with jOOQ is to use an <a href=\"https://www.jooq.org/javadoc/latest/org/jooq/ExecuteListener.html\" rel=\"nofollow noreferrer\"><code>ExecuteListener</code></a> that prepends the initialisation SQL string to that particular statement only, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class InitialisingVariableListener extends DefaultExecuteListener {\n    @Override\n    public void renderEnd(ExecuteContext ctx) {\n        ctx.sql(&quot;SET @row_number = 0;&quot; + ctx.sql());\n    }\n}\n</code></pre>\n<p>And hook that to your <code>Configuration</code> prior to executing the query:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Field&lt;Integer&gt; num = DSL.field(&quot;@row_number:=@row_number +1&quot;, Integer.class);\nDSLContext create = DSL.using(connection, dialect);\ncreate.configuration().set(new InitialisingVariableListener());\ncreate.select(AUTHOR.FIRST_NAME, AUTHOR.LAST_NAME, num)\n      .from(AUTHOR)\n      .limit(5)\n      .fetch();\n</code></pre>\n<p>If you're reusing the <code>Configuration</code> among several queries, you may want to prefer to call <code>derive()</code> on it to create a new <code>Configuration</code> rather than <code>set()</code>, which modifies the <code>Configuration</code> for everyone.</p>\n<h3>A note on other RDBMS</h3>\n<p>This answer was MySQL specific, where the <code>SET</code> statement does not produce any output (update counts) through JDBC. In other RDBMS (e.g. PostgreSQL), <code>SET</code> produces an update count, which might have to be skipped, see this question here for details, and workarounds:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/q/76540584/521799\">JOOQ: Mutli Tenancy with set session/local database variable</a></li>\n</ul>\n"}],"owner":{"account_id":2306685,"reputation":790,"user_id":2025820,"accept_rate":79,"display_name":"lumo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1097,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":49610034,"answer_count":1,"score":3,"last_activity_date":1689928184,"creation_date":1522517162,"question_id":49590493,"body_markdown":"How can i use @variables using `JOOQ`?\r\n(or is there a simpler possibility to show the line numbers? - note that i need to INSERT the selected data INTO another Table and the row_number shall always start at 0!)\r\n\r\n    SET @row_number = 0;\r\n     \r\n    SELECT \r\n        (@row_number:=@row_number + 1) AS NUM, FIRST_NAME, LAST_NAME\r\n    FROM\r\n        AUTHOR\r\n    LIMIT 5;\r\n\r\nthis is what i think the `JOOQ`code could look like...\r\n\r\n    Field&lt;Integer&gt; num = DSL.field(&quot;@row_number:=@row_number +1&quot;, Integer.class);\r\n    DSLContext create = DSL.using(connection, dialect);\r\n    create.select(AUTHOR.FIRST_NAME, AUTHOR.LAST_NAME, num)\r\n          .from(AUTHOR)\r\n          .limit(5)\r\n          .fetch();\r\n\r\n\r\ndo i need to execute that\r\n\r\n    SET @row_number = 0;\r\n\r\nwith plain `JDBC` ?\r\n\r\ni found the thing about variables and `JOOQ` here on StackOverflow - [how can we have variable in jooq][1]\r\n\r\n\nEDIT: i investigated a bit more and read that the results of this &quot;solution&quot; might change in future versions. ao i think about changing it to creating a temporary table with an pk identity (start at 0) then i have the same results but no user variable set and updates.\n\r\n  [1]: https://stackoverflow.com/questions/17318757/how-can-we-have-variable-in-jooq","title":"How to set a @Variable in JOOQ","body":"<p>How can i use @variables using <code>JOOQ</code>?\n(or is there a simpler possibility to show the line numbers? - note that i need to INSERT the selected data INTO another Table and the row_number shall always start at 0!)</p>\n\n<pre><code>SET @row_number = 0;\n\nSELECT \n    (@row_number:=@row_number + 1) AS NUM, FIRST_NAME, LAST_NAME\nFROM\n    AUTHOR\nLIMIT 5;\n</code></pre>\n\n<p>this is what i think the <code>JOOQ</code>code could look like...</p>\n\n<pre><code>Field&lt;Integer&gt; num = DSL.field(\"@row_number:=@row_number +1\", Integer.class);\nDSLContext create = DSL.using(connection, dialect);\ncreate.select(AUTHOR.FIRST_NAME, AUTHOR.LAST_NAME, num)\n      .from(AUTHOR)\n      .limit(5)\n      .fetch();\n</code></pre>\n\n<p>do i need to execute that</p>\n\n<pre><code>SET @row_number = 0;\n</code></pre>\n\n<p>with plain <code>JDBC</code> ?</p>\n\n<p>i found the thing about variables and <code>JOOQ</code> here on StackOverflow - <a href=\"https://stackoverflow.com/questions/17318757/how-can-we-have-variable-in-jooq\">how can we have variable in jooq</a></p>\n\n<p>EDIT: i investigated a bit more and read that the results of this \"solution\" might change in future versions. ao i think about changing it to creating a temporary table with an pk identity (start at 0) then i have the same results but no user variable set and updates.</p>\n"},{"tags":["java","maven"],"owner":{"account_id":123756,"reputation":4386,"user_id":318414,"accept_rate":95,"display_name":"simonalexander2005"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689928032,"creation_date":1689928032,"question_id":76736328,"body_markdown":"I used to successfully use the following in my pom:\r\n\r\n`&lt;dependency&gt;&lt;groupId&gt;net.ser1&lt;/groupId&gt;&lt;artifactId&gt;gozirra-client&lt;/artifactId&gt;&lt;version&gt;0.4.1&lt;/version&gt;&lt;/dependency&gt;`\r\n\r\nBut now I get a missing artefact error.\r\n\r\nIf I try to download manually via https://mvnrepository.com/artifact/net.ser1/gozirra-client/0.4.1 (linked to https://repo.spring.io/plugins-release/net/ser1/gozirra-client/0.4.1/gozirra-client-0.4.1.jar for the jar), this now gives a 401 because repo.spring.io have changed their policies.\r\n\r\nAre these two things related, and if so is there an alternative source I can point my pom at?","title":"gozirra-0.4.1 no longer available via maven","body":"<p>I used to successfully use the following in my pom:</p>\n<p><code>&lt;dependency&gt;&lt;groupId&gt;net.ser1&lt;/groupId&gt;&lt;artifactId&gt;gozirra-client&lt;/artifactId&gt;&lt;version&gt;0.4.1&lt;/version&gt;&lt;/dependency&gt;</code></p>\n<p>But now I get a missing artefact error.</p>\n<p>If I try to download manually via <a href=\"https://mvnrepository.com/artifact/net.ser1/gozirra-client/0.4.1\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/net.ser1/gozirra-client/0.4.1</a> (linked to <a href=\"https://repo.spring.io/plugins-release/net/ser1/gozirra-client/0.4.1/gozirra-client-0.4.1.jar\" rel=\"nofollow noreferrer\">https://repo.spring.io/plugins-release/net/ser1/gozirra-client/0.4.1/gozirra-client-0.4.1.jar</a> for the jar), this now gives a 401 because repo.spring.io have changed their policies.</p>\n<p>Are these two things related, and if so is there an alternative source I can point my pom at?</p>\n"},{"tags":["java","triggers","salesforce","apex","apex-code"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":4,"creation_date":1689926404,"post_id":76736151,"comment_id":135285052,"body_markdown":"Method names should start with a lowercase letter. By the way, that &quot;error&quot; is just a linter warning. Your code should compile and run fine like this. But even so, you should stick to the standard Java code conventions: methods and variables are `lowerCamel`, classes are `UpperCamel`.","body":"Method names should start with a lowercase letter. By the way, that &quot;error&quot; is just a linter warning. Your code should compile and run fine like this. But even so, you should stick to the standard Java code conventions: methods and variables are <code>lowerCamel</code>, classes are <code>UpperCamel</code>."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1689926764,"post_id":76736151,"comment_id":135285129,"body_markdown":"@Jorn I&#39;d say your comment would make a more than adequate answer :)","body":"@Jorn I&#39;d say your comment would make a more than adequate answer :)"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689927317,"post_id":76736151,"comment_id":135285227,"body_markdown":"What is the first character class telling you?","body":"What is the first character class telling you?"}],"answers":[{"tags":[],"owner":{"account_id":25758939,"reputation":36,"user_id":19510182,"display_name":"Sanjula Dulshan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689927779,"creation_date":1689927779,"answer_id":76736309,"question_id":76736151,"body_markdown":"The error message you&#39;re seeing indicates that the method name AmountHandlertest doesn&#39;t match the specified naming convention **[a-z][a-zA-Z0-9]***. In most programming languages, including Java, there are standard naming conventions for methods, variables, classes, etc. The naming convention mentioned in the error message follows the standard Java method naming convention, which usually starts with a lowercase letter.\r\n\r\nTo fix the error, you should rename your method to start with a lowercase letter. For example:\r\n\r\n    public static void amountHandlerTest() {\r\n    // CODE;\r\n    }\r\n","title":"Doesn&#39;t match &#39;[a-z][a-zA-Z0-9]*&#39; (rule: Code Style-MethodNamingConventions)","body":"<p>The error message you're seeing indicates that the method name AmountHandlertest doesn't match the specified naming convention <strong>[a-z][a-zA-Z0-9]</strong>*. In most programming languages, including Java, there are standard naming conventions for methods, variables, classes, etc. The naming convention mentioned in the error message follows the standard Java method naming convention, which usually starts with a lowercase letter.</p>\n<p>To fix the error, you should rename your method to start with a lowercase letter. For example:</p>\n<pre><code>public static void amountHandlerTest() {\n// CODE;\n}\n</code></pre>\n"}],"owner":{"account_id":28620028,"reputation":3,"user_id":21913331,"display_name":"Abhishek Srinivasan US"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":211,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":76736309,"answer_count":1,"score":-3,"last_activity_date":1689927779,"creation_date":1689926180,"question_id":76736151,"body_markdown":"I dont understand whats the issue here is. Please still gives the error.\r\n\r\n```\r\n public static void AmountHandlertest(){\r\n    //CODE;\r\n\r\n}\r\n```\r\n\r\n\r\nI want to run that method but shows an error saying Doesn&#39;t match &#39;[a-z][a-zA-Z0-9]*&#39; (rule: Code Style-MethodNamingConventions)","title":"Doesn&#39;t match &#39;[a-z][a-zA-Z0-9]*&#39; (rule: Code Style-MethodNamingConventions)","body":"<p>I dont understand whats the issue here is. Please still gives the error.</p>\n<pre><code> public static void AmountHandlertest(){\n    //CODE;\n\n}\n</code></pre>\n<p>I want to run that method but shows an error saying Doesn't match '[a-z][a-zA-Z0-9]*' (rule: Code Style-MethodNamingConventions)</p>\n"},{"tags":["java","spring-boot","swagger","swagger-ui","lombok"],"owner":{"account_id":394811,"reputation":1062,"user_id":757446,"accept_rate":33,"display_name":"vinodpthmn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689927682,"creation_date":1689927682,"question_id":76736302,"body_markdown":"The POST API takes a payload with couple of fields where one of them is a write only field. The class has *lombok* @Data annotation to generate setters/getters and the write only field is annotated with *@Getter(AccessLevel.NONE)*. Since lombok is used, the fields are annotated with @Schema with proper description.\r\n\r\n```Java\r\n@Data\r\npublic class Query {\r\n\r\n    @Schema(description = &quot;List of filter conditions separated by comma.&quot;)\r\n    private String filter;\r\n\r\n    @Schema(description = &quot;Desired page number (starting from 1).&quot;)\r\n    @Getter(AccessLevel.NONE)\r\n    private int page;\r\n\r\n    // other fields\r\n}\r\n```\r\n\r\nUnfortunately, the given description is ignored by Swagger, and Swagger UI is showing &quot;writeOnly: true&quot; instead of the description mentioned in the @Schema annotation of the field.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI tried the solution mentioned [here][2] by adding *lombok.config* with below line, but no luck.\r\n\r\n    lombok.copyableAnnotations += io.swagger.v3.oas.annotations.media.Schema\r\n\r\nHowever, if I add an explicit setter method with @Schema annotation (instead of mentioning at field level), it is getting honoured and Swagger generates the documentation as expected.\r\n\r\n```Java\r\n@Data\r\npublic class Query {\r\n\r\n    @Schema(description = &quot;List of filter conditions separated by comma.&quot;)\r\n    private String filter;\r\n\r\n    @Getter(AccessLevel.NONE)\r\n    private int page;\r\n\r\n    // other fields\r\n\r\n    @Schema(description = &quot;Desired page number (starting from 1).&quot;)\r\n    public void setPage(int page){\r\n        this.page = page;\r\n    }\r\n}\r\n```\r\n[![enter image description here][3]][3]\r\n\r\nI am wondering, (a) why lombok is not copying the @Schema to the setter method? (b) why Swagger generating the documentation with hardcoded &quot;writeOnly: true&quot;?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1kA5S.png\r\n  [2]: https://github.com/micronaut-projects/micronaut-openapi/issues/398\r\n  [3]: https://i.stack.imgur.com/ZWHuY.png","title":"Swagger ignoring @Schema annotation for write only fields","body":"<p>The POST API takes a payload with couple of fields where one of them is a write only field. The class has <em>lombok</em> @Data annotation to generate setters/getters and the write only field is annotated with <em>@Getter(AccessLevel.NONE)</em>. Since lombok is used, the fields are annotated with @Schema with proper description.</p>\n<pre><code>@Data\npublic class Query {\n\n    @Schema(description = &quot;List of filter conditions separated by comma.&quot;)\n    private String filter;\n\n    @Schema(description = &quot;Desired page number (starting from 1).&quot;)\n    @Getter(AccessLevel.NONE)\n    private int page;\n\n    // other fields\n}\n</code></pre>\n<p>Unfortunately, the given description is ignored by Swagger, and Swagger UI is showing &quot;writeOnly: true&quot; instead of the description mentioned in the @Schema annotation of the field.</p>\n<p><a href=\"https://i.stack.imgur.com/1kA5S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1kA5S.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried the solution mentioned <a href=\"https://github.com/micronaut-projects/micronaut-openapi/issues/398\" rel=\"nofollow noreferrer\">here</a> by adding <em>lombok.config</em> with below line, but no luck.</p>\n<pre><code>lombok.copyableAnnotations += io.swagger.v3.oas.annotations.media.Schema\n</code></pre>\n<p>However, if I add an explicit setter method with @Schema annotation (instead of mentioning at field level), it is getting honoured and Swagger generates the documentation as expected.</p>\n<pre><code>@Data\npublic class Query {\n\n    @Schema(description = &quot;List of filter conditions separated by comma.&quot;)\n    private String filter;\n\n    @Getter(AccessLevel.NONE)\n    private int page;\n\n    // other fields\n\n    @Schema(description = &quot;Desired page number (starting from 1).&quot;)\n    public void setPage(int page){\n        this.page = page;\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ZWHuY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZWHuY.png\" alt=\"enter image description here\" /></a></p>\n<p>I am wondering, (a) why lombok is not copying the @Schema to the setter method? (b) why Swagger generating the documentation with hardcoded &quot;writeOnly: true&quot;?</p>\n"},{"tags":["java","spring","spring-annotations","spring-jmx"],"answers":[{"comments":[{"owner":{"account_id":2321169,"reputation":9855,"user_id":2036867,"accept_rate":64,"display_name":"Nimrod007"},"score":0,"creation_date":1377156340,"post_id":18374059,"comment_id":26980209,"body_markdown":"the only difference is that ManagedOperation is for all methods and ManagedAttribute only for getters and setters ?","body":"the only difference is that ManagedOperation is for all methods and ManagedAttribute only for getters and setters ?"},{"owner":{"account_id":2158921,"reputation":18762,"user_id":1913537,"accept_rate":73,"display_name":"Ori Dar"},"score":1,"creation_date":1377156622,"post_id":18374059,"comment_id":26980349,"body_markdown":"See the Javadoc. ManagedOperation can be set in conjunction with ManagedOperationParameters","body":"See the Javadoc. ManagedOperation can be set in conjunction with ManagedOperationParameters"}],"tags":[],"owner":{"account_id":2158921,"reputation":18762,"user_id":1913537,"accept_rate":73,"display_name":"Ori Dar"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1377156045,"creation_date":1377156045,"answer_id":18374059,"question_id":18373970,"body_markdown":"You should use `@ManagedOperation` instead. `@ManagedAttribute` is for a getter / setter methods only.","title":"Java Spring Framework jmx managed annotation @ManagedAttribute not showing method in MBeanServerConnection/Jconsole/Visual vm/bean list","body":"<p>You should use <code>@ManagedOperation</code> instead. <code>@ManagedAttribute</code> is for a getter / setter methods only.</p>\n"},{"tags":[],"owner":{"account_id":3273973,"reputation":5801,"user_id":2756574,"accept_rate":89,"display_name":"Sebastian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689927581,"creation_date":1689924375,"answer_id":76735951,"question_id":18373970,"body_markdown":"It sounds weird, but you can fix it by just renaming `myExample` to `getMyExample`.\r\n\r\n    @ManagedAttribute\r\n    public String getMyExample() {\r\n        return exampleService.getSomething().toString();\r\n    }\r\n\r\nIt will even show up as &quot;MyExample&quot; in e.g. visualVM.","title":"Java Spring Framework jmx managed annotation @ManagedAttribute not showing method in MBeanServerConnection/Jconsole/Visual vm/bean list","body":"<p>It sounds weird, but you can fix it by just renaming <code>myExample</code> to <code>getMyExample</code>.</p>\n<pre><code>@ManagedAttribute\npublic String getMyExample() {\n    return exampleService.getSomething().toString();\n}\n</code></pre>\n<p>It will even show up as &quot;MyExample&quot; in e.g. visualVM.</p>\n"}],"owner":{"account_id":2321169,"reputation":9855,"user_id":2036867,"accept_rate":64,"display_name":"Nimrod007"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4934,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":18374059,"answer_count":2,"score":6,"last_activity_date":1689927581,"creation_date":1377155762,"question_id":18373970,"body_markdown":"Ive Added Spring annotation&#39;s to my code \r\nbut when connecting via visual vm the method &quot;myExample()&quot; isn&#39;t showing in the JMX bean list\r\n\r\nMy code : \r\n\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.jmx.export.annotation.ManagedAttribute;\r\n    import org.springframework.jmx.export.annotation.ManagedResource;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    \r\n    @Component\r\n    @ManagedResource\r\n    public class MyClass {\r\n    \r\n       @Autowired\r\n       private Example exampleService;\r\n    \r\n       @ManagedAttribute\r\n       public String myExample() {\r\n          return exampleService.getSomething().toString();\r\n       }\r\n    } \r\n\r\nany idea why this is happening ?\r\n\r\n","title":"Java Spring Framework jmx managed annotation @ManagedAttribute not showing method in MBeanServerConnection/Jconsole/Visual vm/bean list","body":"<p>Ive Added Spring annotation's to my code \nbut when connecting via visual vm the method \"myExample()\" isn't showing in the JMX bean list</p>\n\n<p>My code : </p>\n\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.jmx.export.annotation.ManagedAttribute;\nimport org.springframework.jmx.export.annotation.ManagedResource;\nimport org.springframework.stereotype.Component;\n\n\n@Component\n@ManagedResource\npublic class MyClass {\n\n   @Autowired\n   private Example exampleService;\n\n   @ManagedAttribute\n   public String myExample() {\n      return exampleService.getSomething().toString();\n   }\n} \n</code></pre>\n\n<p>any idea why this is happening ?</p>\n"},{"tags":["java","spring-boot","gradle","aws-lambda","pulumi"],"comments":[{"owner":{"account_id":1912742,"reputation":15070,"user_id":1726083,"display_name":"erik258"},"score":0,"creation_date":1689889708,"post_id":76733893,"comment_id":135281245,"body_markdown":"you should expect to run your lambda in development enviroments so you can test it locally","body":"you should expect to run your lambda in development enviroments so you can test it locally"}],"owner":{"account_id":11227019,"reputation":1057,"user_id":8236354,"accept_rate":0,"display_name":"stein korsveien"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689927076,"creation_date":1689889328,"question_id":76733893,"body_markdown":"I want to use spring boot in a aws lamda function. I have created the main class:\r\n\r\n    package com.baeldung.aws;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class Application {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(Application.class, args);\r\n        }\r\n    }\r\nThe controller class:\r\n\r\n    package com.baeldung.aws.controller;\r\n    \r\n    import java.util.List;\r\n    \r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    import com.baeldung.aws.data.User;\r\n    \r\n    @RestController\r\n    @RequestMapping(&quot;/&quot;)\r\n    public class ProfileController {\r\n    \r\n        @GetMapping(value = &quot;users&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n        public List&lt;User&gt; getUser() {\r\n            return List.of(new User(&quot;John&quot;, &quot;Doe&quot;, &quot;john.doe@baeldung.com&quot;), new User(&quot;John&quot;, &quot;Doe&quot;, &quot;john.doe-2@baeldung.com&quot;));\r\n        }\r\n    \r\n    }\r\n\r\nAnd the handler class:\r\n\r\n    package com.baeldung.aws.handler;\r\n    \r\n    import com.amazonaws.serverless.exceptions.ContainerInitializationException;\r\n    import com.amazonaws.serverless.proxy.model.AwsProxyResponse;\r\n    import com.amazonaws.serverless.proxy.model.HttpApiV2ProxyRequest;\r\n    import com.amazonaws.serverless.proxy.spring.SpringBootLambdaContainerHandler;\r\n    import com.amazonaws.services.lambda.runtime.Context;\r\n    import com.amazonaws.services.lambda.runtime.RequestHandler;\r\n    import com.baeldung.aws.Application;\r\n    \r\n    public class HttpV2LambdaHandler implements RequestHandler&lt;HttpApiV2ProxyRequest, AwsProxyResponse&gt; {\r\n        private static SpringBootLambdaContainerHandler&lt;HttpApiV2ProxyRequest, AwsProxyResponse&gt; handler;\r\n    \r\n        static {\r\n            try {\r\n                handler = SpringBootLambdaContainerHandler.getHttpApiV2ProxyHandler(Application.class);\r\n            } catch (ContainerInitializationException ex) {\r\n                throw new RuntimeException(&quot;Unable to load spring boot application&quot;, ex);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public AwsProxyResponse handleRequest(HttpApiV2ProxyRequest input, Context context) {\r\n            return handler.proxy(input, context);\r\n        }\r\n    }\r\n\r\nTo build the following Gradle script is used. \r\n\r\n    plugins {\r\n        id &#39;java&#39;\r\n        id &#39;com.github.johnrengelman.shadow&#39; version &#39;8.1.1&#39;\r\n        id &#39;org.springframework.boot&#39; version &#39;3.1.2&#39;\r\n    }\r\n    \r\n    repositories {\r\n      mavenCentral()\r\n    }\r\n    \r\n    sourceCompatibility = JavaVersion.VERSION_11\r\n    targetCompatibility = JavaVersion.VERSION_11\r\n    \r\n    dependencies {\r\n             implementation &#39;org.springframework.boot:spring-boot-starter-web:2.7.13&#39;\r\n             implementation &#39;org.springframework.boot:spring-boot-starter-validation:2.7.13&#39;\r\n             implementation &#39;com.amazonaws.serverless:aws-serverless-java-container-springboot2:1.9.3&#39;\r\n             testImplementation &#39;org.springframework.boot:spring-boot-starter-test:2.7.13&#39;\r\n    }\r\n\r\n    jar {\r\n    \t    manifest {\r\n            attributes &#39;Implementation-Title&#39;: &#39;Gradle Quickstart&#39;,\r\n                       &#39;Implementation-Version&#39;: version,\r\n                       &#39;Main-Class&#39;: &#39;com.baeldung.aws.Application&#39;\r\n              }\r\n        }\r\n        \r\n        shadowJar {\r\n                    exclude &#39;org.apache.tomcat.embed:*&#39;\r\n                   }\r\nI use the following Pulumi code to deploy the code to the aws lamda function:\r\n\r\n    import * as aws from &quot;@pulumi/aws&quot;\r\n    import * as pulumi from &quot;@pulumi/pulumi&quot;;\r\n    import  {petsExecutionRole} from &quot;./PetsExecutionRole&quot;\r\n    \r\n    const stack = pulumi.getStack()\r\n    const handler= &quot;com.baeldung.aws.handler.HttpV2LambdaHandler&quot;\r\n    \r\n    \r\n    export const petsFunction = new aws.lambda.Function(&quot;pets-function&quot;, {\r\n        code: new pulumi.asset.FileArchive(&quot;../app/build/libs/pets-all.jar&quot;),   \r\n        runtime: aws.lambda.Runtime.Java11,\r\n        handler: handler,\r\n        role: petsExecutionRole.arn,\r\n        name: stack + &#39;-&#39; +&quot;petsFunction&quot;,\r\n        memorySize: 10240,\r\n        timeout: 900,\r\n        tracingConfig:{mode:&quot;Active&quot;},\r\n        architectures:[&quot;arm64&quot;],\r\n        layers: [ &quot;arn:aws:lambda:eu-north-1:901920570463:layer:aws-otel-java-agent-arm64-ver-1-24-0:1&quot;,\r\n                  &quot;arn:aws:lambda:eu-north-1:464622532012:layer:Datadog-Extension-ARM:43&quot;], \r\n        environment: {\r\n            variables: {\r\n    \t\t\tAWS_LAMBDA_EXEC_WRAPPER: &quot;/opt/otel-handler&quot;,\r\n    \t\t\tDD_LOGS_INJECTION:&quot;true&quot;,\r\n    \t\t\tDD_SITE: &quot;datadoghq.eu&quot;,\r\n    \t\t\tDD_ENV: &quot;dev&quot;,\r\n    \t\t\tDD_API_KEY: &quot;xxxxxxx&quot;\r\n    \t\t}\r\n    \t\t\t\r\n            }\r\n    \r\n    },\r\n\r\nIf run gradle bootRun and  run  curl http://localhost:8080 I get \r\ncurl  http://localhost:8080/users\r\n\r\n[{&quot;name&quot;:&quot;John&quot;,&quot;surname&quot;:&quot;Doe&quot;,&quot;emailAddress&quot;:&quot;john.doe@baeldung.com&quot;},{&quot;name&quot;:&quot;John&quot;,&quot;surname&quot;:&quot;Doe&quot;,&quot;emailAddress&quot;:&quot;john.doe-2@baeldung.com&quot;}]%              steinko@Steins-MacBook-Pro inf % \r\n\r\n\r\nThe aws lamda function is called from a aws gateway \r\nWhen I run a curl \r\ncurl https://h1t5hu3bu8.execute-api.eu-north-1.amazonaws.com/dev/users\r\nI get following error in the Cloadwatch log\r\n\r\n\r\nError loading class com.baeldung.aws.handler.HttpV2LambdaHandler: java.lang.ExceptionInInitializerError\r\njava.lang.ExceptionInInitializerError\r\n\tat java.base/java.lang.Class.forName0(Native Method)\r\n\tat java.base/java.lang.Class.forName(Unknown Source)\r\nCaused by: java.lang.ClassCastException: class org.springframework.context.annotation.AnnotationConfigApplicationContext cannot be cast to class org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext (org.springframework.context.annotation.AnnotationConfigApplicationContext and org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext are in unnamed module of loader lambdainternal.CustomerClassLoader @4b960b5b)\r\n\tat com.amazonaws.serverless.proxy.spring.SpringBootLambdaContainerHandler.initialize(SpringBootLambdaContainerHandler.java:197)\r\n\tat com.amazonaws.serverless.proxy.InitializationWrapper.start(InitializationWrapper.java:35)\r\n\tat com.amazonaws.serverless.proxy.spring.SpringBootProxyHandlerBuilder.buildAndInitialize(SpringBootProxyHandlerBuilder.java:81)\r\n\tat com.amazonaws.serverless.proxy.spring.SpringBootLambdaContainerHandler.getHttpApiV2ProxyHandler(SpringBootLambdaContainerHandler.java:110)\r\n\tat com.baeldung.aws.handler.HttpV2LambdaHandler.&lt;clinit&gt;(HttpV2LambdaHandler.java:16)\r\n\t... 2 more\r\n\r\nHow do I fix this error ?\r\n\r\n\r\n","title":"How do I fix the error in loading handler to aws lamda function?","body":"<p>I want to use spring boot in a aws lamda function. I have created the main class:</p>\n<pre><code>package com.baeldung.aws;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n<p>The controller class:</p>\n<pre><code>package com.baeldung.aws.controller;\n\nimport java.util.List;\n\nimport org.springframework.http.MediaType;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.baeldung.aws.data.User;\n\n@RestController\n@RequestMapping(&quot;/&quot;)\npublic class ProfileController {\n\n    @GetMapping(value = &quot;users&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\n    public List&lt;User&gt; getUser() {\n        return List.of(new User(&quot;John&quot;, &quot;Doe&quot;, &quot;john.doe@baeldung.com&quot;), new User(&quot;John&quot;, &quot;Doe&quot;, &quot;john.doe-2@baeldung.com&quot;));\n    }\n\n}\n</code></pre>\n<p>And the handler class:</p>\n<pre><code>package com.baeldung.aws.handler;\n\nimport com.amazonaws.serverless.exceptions.ContainerInitializationException;\nimport com.amazonaws.serverless.proxy.model.AwsProxyResponse;\nimport com.amazonaws.serverless.proxy.model.HttpApiV2ProxyRequest;\nimport com.amazonaws.serverless.proxy.spring.SpringBootLambdaContainerHandler;\nimport com.amazonaws.services.lambda.runtime.Context;\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\nimport com.baeldung.aws.Application;\n\npublic class HttpV2LambdaHandler implements RequestHandler&lt;HttpApiV2ProxyRequest, AwsProxyResponse&gt; {\n    private static SpringBootLambdaContainerHandler&lt;HttpApiV2ProxyRequest, AwsProxyResponse&gt; handler;\n\n    static {\n        try {\n            handler = SpringBootLambdaContainerHandler.getHttpApiV2ProxyHandler(Application.class);\n        } catch (ContainerInitializationException ex) {\n            throw new RuntimeException(&quot;Unable to load spring boot application&quot;, ex);\n        }\n    }\n\n    @Override\n    public AwsProxyResponse handleRequest(HttpApiV2ProxyRequest input, Context context) {\n        return handler.proxy(input, context);\n    }\n}\n</code></pre>\n<p>To build the following Gradle script is used.</p>\n<pre><code>plugins {\n    id 'java'\n    id 'com.github.johnrengelman.shadow' version '8.1.1'\n    id 'org.springframework.boot' version '3.1.2'\n}\n\nrepositories {\n  mavenCentral()\n}\n\nsourceCompatibility = JavaVersion.VERSION_11\ntargetCompatibility = JavaVersion.VERSION_11\n\ndependencies {\n         implementation 'org.springframework.boot:spring-boot-starter-web:2.7.13'\n         implementation 'org.springframework.boot:spring-boot-starter-validation:2.7.13'\n         implementation 'com.amazonaws.serverless:aws-serverless-java-container-springboot2:1.9.3'\n         testImplementation 'org.springframework.boot:spring-boot-starter-test:2.7.13'\n}\n\njar {\n        manifest {\n        attributes 'Implementation-Title': 'Gradle Quickstart',\n                   'Implementation-Version': version,\n                   'Main-Class': 'com.baeldung.aws.Application'\n          }\n    }\n    \n    shadowJar {\n                exclude 'org.apache.tomcat.embed:*'\n               }\n</code></pre>\n<p>I use the following Pulumi code to deploy the code to the aws lamda function:</p>\n<pre><code>import * as aws from &quot;@pulumi/aws&quot;\nimport * as pulumi from &quot;@pulumi/pulumi&quot;;\nimport  {petsExecutionRole} from &quot;./PetsExecutionRole&quot;\n\nconst stack = pulumi.getStack()\nconst handler= &quot;com.baeldung.aws.handler.HttpV2LambdaHandler&quot;\n\n\nexport const petsFunction = new aws.lambda.Function(&quot;pets-function&quot;, {\n    code: new pulumi.asset.FileArchive(&quot;../app/build/libs/pets-all.jar&quot;),   \n    runtime: aws.lambda.Runtime.Java11,\n    handler: handler,\n    role: petsExecutionRole.arn,\n    name: stack + '-' +&quot;petsFunction&quot;,\n    memorySize: 10240,\n    timeout: 900,\n    tracingConfig:{mode:&quot;Active&quot;},\n    architectures:[&quot;arm64&quot;],\n    layers: [ &quot;arn:aws:lambda:eu-north-1:901920570463:layer:aws-otel-java-agent-arm64-ver-1-24-0:1&quot;,\n              &quot;arn:aws:lambda:eu-north-1:464622532012:layer:Datadog-Extension-ARM:43&quot;], \n    environment: {\n        variables: {\n            AWS_LAMBDA_EXEC_WRAPPER: &quot;/opt/otel-handler&quot;,\n            DD_LOGS_INJECTION:&quot;true&quot;,\n            DD_SITE: &quot;datadoghq.eu&quot;,\n            DD_ENV: &quot;dev&quot;,\n            DD_API_KEY: &quot;xxxxxxx&quot;\n        }\n            \n        }\n\n},\n</code></pre>\n<p>If run gradle bootRun and  run  curl http://localhost:8080 I get\ncurl  http://localhost:8080/users</p>\n<p>[{&quot;name&quot;:&quot;John&quot;,&quot;surname&quot;:&quot;Doe&quot;,&quot;emailAddress&quot;:&quot;john.doe@baeldung.com&quot;},{&quot;name&quot;:&quot;John&quot;,&quot;surname&quot;:&quot;Doe&quot;,&quot;emailAddress&quot;:&quot;john.doe-2@baeldung.com&quot;}]%              steinko@Steins-MacBook-Pro inf %</p>\n<p>The aws lamda function is called from a aws gateway\nWhen I run a curl\ncurl <a href=\"https://h1t5hu3bu8.execute-api.eu-north-1.amazonaws.com/dev/users\" rel=\"nofollow noreferrer\">https://h1t5hu3bu8.execute-api.eu-north-1.amazonaws.com/dev/users</a>\nI get following error in the Cloadwatch log</p>\n<p>Error loading class com.baeldung.aws.handler.HttpV2LambdaHandler: java.lang.ExceptionInInitializerError\njava.lang.ExceptionInInitializerError\nat java.base/java.lang.Class.forName0(Native Method)\nat java.base/java.lang.Class.forName(Unknown Source)\nCaused by: java.lang.ClassCastException: class org.springframework.context.annotation.AnnotationConfigApplicationContext cannot be cast to class org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext (org.springframework.context.annotation.AnnotationConfigApplicationContext and org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext are in unnamed module of loader lambdainternal.CustomerClassLoader @4b960b5b)\nat com.amazonaws.serverless.proxy.spring.SpringBootLambdaContainerHandler.initialize(SpringBootLambdaContainerHandler.java:197)\nat com.amazonaws.serverless.proxy.InitializationWrapper.start(InitializationWrapper.java:35)\nat com.amazonaws.serverless.proxy.spring.SpringBootProxyHandlerBuilder.buildAndInitialize(SpringBootProxyHandlerBuilder.java:81)\nat com.amazonaws.serverless.proxy.spring.SpringBootLambdaContainerHandler.getHttpApiV2ProxyHandler(SpringBootLambdaContainerHandler.java:110)\nat com.baeldung.aws.handler.HttpV2LambdaHandler.(HttpV2LambdaHandler.java:16)\n... 2 more</p>\n<p>How do I fix this error ?</p>\n"},{"tags":["java","snakeyaml"],"comments":[{"owner":{"account_id":14619534,"reputation":421,"user_id":10558670,"display_name":"MAO3J1m0Op"},"score":0,"creation_date":1568201767,"post_id":57886990,"comment_id":102198234,"body_markdown":"Where exactly is the exception thrown?","body":"Where exactly is the exception thrown?"},{"owner":{"account_id":9712403,"reputation":344,"user_id":7203814,"display_name":"Lakshman Miani"},"score":0,"creation_date":1568202236,"post_id":57886990,"comment_id":102198492,"body_markdown":"java.util.LinkedHashMap cannot be cast to com.heraizen.DataConfig$Data","body":"java.util.LinkedHashMap cannot be cast to com.heraizen.DataConfig$Data"},{"owner":{"account_id":14619534,"reputation":421,"user_id":10558670,"display_name":"MAO3J1m0Op"},"score":0,"creation_date":1568202504,"post_id":57886990,"comment_id":102198622,"body_markdown":"What line is it thrown at and what kind of exception is it?","body":"What line is it thrown at and what kind of exception is it?"}],"answers":[{"tags":[],"owner":{"account_id":14619534,"reputation":421,"user_id":10558670,"display_name":"MAO3J1m0Op"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568202417,"creation_date":1568202417,"answer_id":57888469,"question_id":57886990,"body_markdown":"Since `DataConfig` is not a subtype or supertype of `LinkedHashMap`, casting cannot be used there. I’m not familiar with yaml, but I can assume that the method `yaml.load()` returns a `LinkedHashMap` from your exception description.\r\n\r\nTry writing a static method belonging to `DataConfig` that converts a `LinkedHashMap` to a `DataConfig`:\r\n\r\n    public static DataConfig parseNew(LinkedHashMap map) {\r\n\r\n    }","title":"how to get Map&lt;String,List&lt;Data&gt;&gt; from yaml using snakeyaml","body":"<p>Since <code>DataConfig</code> is not a subtype or supertype of <code>LinkedHashMap</code>, casting cannot be used there. I’m not familiar with yaml, but I can assume that the method <code>yaml.load()</code> returns a <code>LinkedHashMap</code> from your exception description.</p>\n\n<p>Try writing a static method belonging to <code>DataConfig</code> that converts a <code>LinkedHashMap</code> to a <code>DataConfig</code>:</p>\n\n<pre><code>public static DataConfig parseNew(LinkedHashMap map) {\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":289412,"reputation":910,"user_id":590374,"display_name":"Naaooj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658306611,"creation_date":1658306611,"answer_id":73048473,"question_id":57886990,"body_markdown":"To solve this, you should add a [TypeDescription][1] to your ***Yaml*** object and manually map the type of the list of the underlying property:\r\n\r\n    yaml.addTypeDescription(new TypeDescription(DataConfig.class) {\r\n        @Override\r\n        public boolean setupPropertyType(String key, Node valueNode) {\r\n            if (&quot;heros&quot;.equals(key) &amp;&amp;  valueNode instanceof MappingNode) {\r\n                MappingNode mappingNode = (MappingNode) valueNode;\r\n                boolean listTypeDefined = false;\r\n                for (NodeTuple nodeTuple : mappingNode.getValue()) {\r\n                    if (nodeTuple.getValueNode() instanceof SequenceNode) {\r\n                        SequenceNode sequenceNode = (SequenceNode) nodeTuple.getValueNode();\r\n                        sequenceNode.setListType(Data.class);\r\n                        listTypeDefined = true;\r\n                    }\r\n                }\r\n                return listTypeDefined;\r\n            }\r\n            return super.setupPropertyType(key, valueNode);\r\n        }\r\n    });\r\n\r\nIf you do this and run your program, you should see the following output:\r\n\r\n    one h1\r\n    two h3\r\n    Test$DataConfig@6a79c292\r\n\r\nPlease note a small mistake in your example, your ***Data*** class has a property ***url*** whereas in the yaml it&#39;s ***uri***.\r\n\r\n  [1]: https://github.com/snakeyaml/snakeyaml/blob/master/src/main/java/org/yaml/snakeyaml/TypeDescription.java","title":"how to get Map&lt;String,List&lt;Data&gt;&gt; from yaml using snakeyaml","body":"<p>To solve this, you should add a <a href=\"https://github.com/snakeyaml/snakeyaml/blob/master/src/main/java/org/yaml/snakeyaml/TypeDescription.java\" rel=\"nofollow noreferrer\">TypeDescription</a> to your <em><strong>Yaml</strong></em> object and manually map the type of the list of the underlying property:</p>\n<pre><code>yaml.addTypeDescription(new TypeDescription(DataConfig.class) {\n    @Override\n    public boolean setupPropertyType(String key, Node valueNode) {\n        if (&quot;heros&quot;.equals(key) &amp;&amp;  valueNode instanceof MappingNode) {\n            MappingNode mappingNode = (MappingNode) valueNode;\n            boolean listTypeDefined = false;\n            for (NodeTuple nodeTuple : mappingNode.getValue()) {\n                if (nodeTuple.getValueNode() instanceof SequenceNode) {\n                    SequenceNode sequenceNode = (SequenceNode) nodeTuple.getValueNode();\n                    sequenceNode.setListType(Data.class);\n                    listTypeDefined = true;\n                }\n            }\n            return listTypeDefined;\n        }\n        return super.setupPropertyType(key, valueNode);\n    }\n});\n</code></pre>\n<p>If you do this and run your program, you should see the following output:</p>\n<pre><code>one h1\ntwo h3\nTest$DataConfig@6a79c292\n</code></pre>\n<p>Please note a small mistake in your example, your <em><strong>Data</strong></em> class has a property <em><strong>url</strong></em> whereas in the yaml it's <em><strong>uri</strong></em>.</p>\n"},{"tags":[],"owner":{"account_id":12151907,"reputation":2171,"user_id":8871891,"display_name":"z.x"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689926366,"creation_date":1689926366,"answer_id":76736165,"question_id":57886990,"body_markdown":"May use custom constructor \r\n\r\n```java\r\npublic class MyDataConstructor extends Constructor {\r\n    private static final String MY_DATA_CONSTRUCTOR_NAME = MyDataConstructor.class.getSimpleName();\r\n\r\n    public MyDataConstructor(LoaderOptions loadingConfig) {\r\n        super(loadingConfig);\r\n        this.rootTag = new Tag(MY_DATA_CONSTRUCTOR_NAME);\r\n    }\r\n\r\n    @Override\r\n    protected Object constructObject(Node node) {\r\n        if (MY_DATA_CONSTRUCTOR_NAME.equals(node.getTag().getValue()) &amp;&amp; node instanceof MappingNode mNode) {\r\n            return mNode.getValue().stream().collect(\r\n                    Collectors.toMap(\r\n                            t -&gt; super.constructObject(t.getKeyNode()),\r\n                            t -&gt; {\r\n                                Node child = t.getValueNode();\r\n                                if (child instanceof SequenceNode sNode) {\r\n                                    sNode.setListType(Data.class);\r\n                                }\r\n                                return super.constructObject(child);\r\n                            }\r\n                    )\r\n            );\r\n        }\r\n        return super.constructObject(node);\r\n    }\r\n\r\n    @lombok.Data\r\n    public static class Data {\r\n        private String name;\r\n        private String uri;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            Yaml yl = new Yaml(new MyDataConstructor(new LoaderOptions()));\r\n            String ylStr =\r\n                    &quot;custom-xxx:\\n&quot; +\r\n                    &quot;  - name: qwe\\n&quot; +\r\n                    &quot;    uri: wwww\\n&quot; +\r\n                    &quot;  - name: asd\\n&quot; +\r\n                    &quot;    uri: xxxx\\n&quot; +\r\n                    &quot;  - name: zxc\\n&quot; +\r\n                    &quot;    uri: rrr&quot;;\r\n            Map&lt;String, List&lt;Data&gt;&gt; my = yl.load(ylStr);\r\n\r\n            for (String key : my.keySet()){\r\n                for(Data item: my.get(key)){\r\n                    System.out.println(item.getName());\r\n                    System.out.println(item.getUri());\r\n                    System.out.println(item.getClass().getName());\r\n                }\r\n            }\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\noutput:\r\n```shell\r\n&gt; Task :MyDataConstructor.main()\r\nqwe\r\nwwww\r\nxxx.MyDataConstructor$Data\r\nasd\r\nxxxx\r\nxxx.MyDataConstructor$Data\r\nzxc\r\nrrr\r\nxxx.MyDataConstructor$Data\r\n```\r\n\r\nps:\r\n\r\n```gradle\r\ndependencies {\r\n    implementation &quot;org.yaml:snakeyaml:2.0&quot;\r\n}\r\n```\r\n\r\n&gt; ref [Constructor][1]\r\n\r\n\r\n  [1]: https://github.com/snakeyaml/snakeyaml/blob/master/src/main/java/org/yaml/snakeyaml/constructor/Constructor.java","title":"how to get Map&lt;String,List&lt;Data&gt;&gt; from yaml using snakeyaml","body":"<p>May use custom constructor</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyDataConstructor extends Constructor {\n    private static final String MY_DATA_CONSTRUCTOR_NAME = MyDataConstructor.class.getSimpleName();\n\n    public MyDataConstructor(LoaderOptions loadingConfig) {\n        super(loadingConfig);\n        this.rootTag = new Tag(MY_DATA_CONSTRUCTOR_NAME);\n    }\n\n    @Override\n    protected Object constructObject(Node node) {\n        if (MY_DATA_CONSTRUCTOR_NAME.equals(node.getTag().getValue()) &amp;&amp; node instanceof MappingNode mNode) {\n            return mNode.getValue().stream().collect(\n                    Collectors.toMap(\n                            t -&gt; super.constructObject(t.getKeyNode()),\n                            t -&gt; {\n                                Node child = t.getValueNode();\n                                if (child instanceof SequenceNode sNode) {\n                                    sNode.setListType(Data.class);\n                                }\n                                return super.constructObject(child);\n                            }\n                    )\n            );\n        }\n        return super.constructObject(node);\n    }\n\n    @lombok.Data\n    public static class Data {\n        private String name;\n        private String uri;\n    }\n\n    public static void main(String[] args) {\n        try {\n            Yaml yl = new Yaml(new MyDataConstructor(new LoaderOptions()));\n            String ylStr =\n                    &quot;custom-xxx:\\n&quot; +\n                    &quot;  - name: qwe\\n&quot; +\n                    &quot;    uri: wwww\\n&quot; +\n                    &quot;  - name: asd\\n&quot; +\n                    &quot;    uri: xxxx\\n&quot; +\n                    &quot;  - name: zxc\\n&quot; +\n                    &quot;    uri: rrr&quot;;\n            Map&lt;String, List&lt;Data&gt;&gt; my = yl.load(ylStr);\n\n            for (String key : my.keySet()){\n                for(Data item: my.get(key)){\n                    System.out.println(item.getName());\n                    System.out.println(item.getUri());\n                    System.out.println(item.getClass().getName());\n                }\n            }\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>output:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>&gt; Task :MyDataConstructor.main()\nqwe\nwwww\nxxx.MyDataConstructor$Data\nasd\nxxxx\nxxx.MyDataConstructor$Data\nzxc\nrrr\nxxx.MyDataConstructor$Data\n</code></pre>\n<p>ps:</p>\n<pre><code>dependencies {\n    implementation &quot;org.yaml:snakeyaml:2.0&quot;\n}\n</code></pre>\n<blockquote>\n<p>ref <a href=\"https://github.com/snakeyaml/snakeyaml/blob/master/src/main/java/org/yaml/snakeyaml/constructor/Constructor.java\" rel=\"nofollow noreferrer\">Constructor</a></p>\n</blockquote>\n"}],"owner":{"account_id":9712403,"reputation":344,"user_id":7203814,"display_name":"Lakshman Miani"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1584,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1689926366,"creation_date":1568197167,"question_id":57886990,"body_markdown":"trying to load data from yaml and creating the following object:\r\n\r\nProblem: Not able map yaml to Object, When I try to it is always throwing exception: java.util.LinkedHashMap cannot be cast to com.heraizen.DataConfig$Data\r\n\r\n\r\n    Map&lt;String,List&lt;Data&gt;&gt; map;\r\n\r\nCode Snippet:\r\n\r\n    public class DataConfig {\r\n\tprivate Map&lt;String, List&lt;Data&gt;&gt; heros = new HashMap&lt;String, List&lt;Data&gt;&gt;();\r\n\r\n\tpublic static class Data {\r\n\t\tprivate String name;\r\n\t\tprivate String uri;\r\n\r\n\t\tpublic String getName() {\r\n\t\t\treturn name;\r\n\t\t}\r\n\r\n\t\tpublic void setName(String name) {\r\n\t\t\tthis.name = name;\r\n\t\t}\r\n\r\n\t\tpublic String getUri() {\r\n\t\t\treturn uri;\r\n\t\t}\r\n\r\n\t\tpublic void setUri(String uri) {\r\n\t\t\tthis.uri = uri;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic String toString() {\r\n\t\t\treturn &quot;Data [name=&quot; + name + &quot;, uri=&quot; + uri + &quot;]&quot;;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic Map&lt;String, List&lt;Data&gt;&gt; getHeros() {\r\n\t\treturn heros;\r\n\t}\r\n\r\n\tpublic void setHeros(Map&lt;String, List&lt;Data&gt;&gt; heros) {\r\n\t\tthis.heros = heros;\r\n\t}\r\n\r\nYaml:\r\n\r\n \r\n\r\n  \r\n\r\n      --- \r\n     heros: \r\n       one:\r\n          \r\n         - name: h1\r\n           url: hu2\r\n         - name: h2\r\n           url: hu22\r\n      two: \r\n        - name: h3\r\n          url: hu3\r\n\r\nConstructing Object:\r\n\r\n       Yaml yaml = new Yaml(new Constructor(DataConfig.class));\r\n       \r\n       DataConfig retValue = (DataConfig) yaml.load(new FileInputStream(&quot;one.yaml&quot;));\r\n       retValue.getHeros().entrySet().forEach(ele-&gt;{\r\n    \t   System.out.println(ele.getKey()+&quot; &quot;+ele.getValue().get(0).getName());\r\n       });\r\n        System.out.println(retValue);","title":"how to get Map&lt;String,List&lt;Data&gt;&gt; from yaml using snakeyaml","body":"<p>trying to load data from yaml and creating the following object:</p>\n\n<p>Problem: Not able map yaml to Object, When I try to it is always throwing exception: java.util.LinkedHashMap cannot be cast to com.heraizen.DataConfig$Data</p>\n\n<pre><code>Map&lt;String,List&lt;Data&gt;&gt; map;\n</code></pre>\n\n<p>Code Snippet:</p>\n\n<pre><code>public class DataConfig {\nprivate Map&lt;String, List&lt;Data&gt;&gt; heros = new HashMap&lt;String, List&lt;Data&gt;&gt;();\n\npublic static class Data {\n    private String name;\n    private String uri;\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getUri() {\n        return uri;\n    }\n\n    public void setUri(String uri) {\n        this.uri = uri;\n    }\n\n    @Override\n    public String toString() {\n        return \"Data [name=\" + name + \", uri=\" + uri + \"]\";\n    }\n\n}\n\npublic Map&lt;String, List&lt;Data&gt;&gt; getHeros() {\n    return heros;\n}\n\npublic void setHeros(Map&lt;String, List&lt;Data&gt;&gt; heros) {\n    this.heros = heros;\n}\n</code></pre>\n\n<p>Yaml:</p>\n\n<pre><code>  --- \n heros: \n   one:\n\n     - name: h1\n       url: hu2\n     - name: h2\n       url: hu22\n  two: \n    - name: h3\n      url: hu3\n</code></pre>\n\n<p>Constructing Object:</p>\n\n<pre><code>   Yaml yaml = new Yaml(new Constructor(DataConfig.class));\n\n   DataConfig retValue = (DataConfig) yaml.load(new FileInputStream(\"one.yaml\"));\n   retValue.getHeros().entrySet().forEach(ele-&gt;{\n       System.out.println(ele.getKey()+\" \"+ele.getValue().get(0).getName());\n   });\n    System.out.println(retValue);\n</code></pre>\n"},{"tags":["java","vert.x","vertx-verticle","vertx-httpclient","vertx-eventbus"],"comments":[{"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"score":1,"creation_date":1590415608,"post_id":61974437,"comment_id":109663494,"body_markdown":"The first line shows: `Failed to bind on port: 8000`. Is something already bound to port 8000 on the server? It seems this was logged by the app so if more info is needed perhaps the cause should be logged too.","body":"The first line shows: <code>Failed to bind on port: 8000</code>. Is something already bound to port 8000 on the server? It seems this was logged by the app so if more info is needed perhaps the cause should be logged too."}],"owner":{"account_id":18662116,"reputation":11,"user_id":13603071,"display_name":"Alice Shunder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5057,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689926095,"creation_date":1590247952,"question_id":61974437,"body_markdown":"I was making a vertx verticle for Java. When I run it in IntelliJ it seems to start, but when I make a shadowjar and launch it on my Ubuntu server I get this:\r\n\r\n    INFO: Failed to bind on port: 8000\r\n    May 23, 2020 3:23:11 PM io.vertx.core.impl.DeploymentManager\r\n    SEVERE: Failed to start http server\r\n    io.vertx.core.impl.NoStackTraceThrowable: Failed to start http server\r\n\r\nIt used to work normally before but I can&#39;t figure out what this means.  \r\nI have been using shadowjar to deploy this for weeks before, it gives no errors in IntelliJ and this error gives zero information...","title":"How to fix io.vertx.core.impl.NoStackTraceThrowable?","body":"<p>I was making a vertx verticle for Java. When I run it in IntelliJ it seems to start, but when I make a shadowjar and launch it on my Ubuntu server I get this:</p>\n<pre><code>INFO: Failed to bind on port: 8000\nMay 23, 2020 3:23:11 PM io.vertx.core.impl.DeploymentManager\nSEVERE: Failed to start http server\nio.vertx.core.impl.NoStackTraceThrowable: Failed to start http server\n</code></pre>\n<p>It used to work normally before but I can't figure out what this means.<br />\nI have been using shadowjar to deploy this for weeks before, it gives no errors in IntelliJ and this error gives zero information...</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":7872,"page":296,"page_size":100}
