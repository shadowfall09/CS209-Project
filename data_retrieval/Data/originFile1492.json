{"items":[{"tags":["java","audio","mp3"],"answers":[{"tags":[],"owner":{"account_id":2895112,"reputation":297,"user_id":2483066,"display_name":"Matteo N."},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1371821867,"creation_date":1371458775,"answer_id":17143597,"question_id":17143464,"body_markdown":"I tried using File instead of ByteArrayInputStream and it works.\r\n\r\nConsider to change your code in something like this:\r\n\r\n    File file = new File(&quot;filename.mp3&quot;);\r\n    AudioFileFormat baseFileFormat = new MpegAudioFileReader().getAudioFileFormat(file);\r\n    Map properties = baseFileFormat.properties();\r\n    Long duration = (Long) properties.get(&quot;duration&quot;);\r\n\r\nWhich version of mp3Spi are you using?\r\n","title":"Hot to get mp3 file duration with mp3spi?","body":"<p>I tried using File instead of ByteArrayInputStream and it works.</p>\n\n<p>Consider to change your code in something like this:</p>\n\n<pre><code>File file = new File(\"filename.mp3\");\nAudioFileFormat baseFileFormat = new MpegAudioFileReader().getAudioFileFormat(file);\nMap properties = baseFileFormat.properties();\nLong duration = (Long) properties.get(\"duration\");\n</code></pre>\n\n<p>Which version of mp3Spi are you using?</p>\n"},{"tags":[],"owner":{"account_id":1517866,"reputation":309,"user_id":1418417,"accept_rate":75,"display_name":"Marius"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1648069238,"creation_date":1432048222,"answer_id":30329487,"question_id":17143464,"body_markdown":"The problem is, that `new MpegAudioFileReader().getAudioFileFormat(bais)` points to the inherited method from `TAudioFileReader`\r\n\r\nThis is how I extended the `MpegAudioFileReader` to make it work:\r\n\r\n\r\nAdded this method around line 300\r\n\r\n    public AudioFileFormat getAudioFileFormat(InputStream inputStream) throws UnsupportedAudioFileException, IOException {\r\n        return getAudioFileFormat(inputStream, inputStream.available());\r\n    }\r\n\r\n\r\nCommented this line (around 400)\r\n\r\n    //FileInputStream fis = (FileInputStream) inputStream;\r\n","title":"Hot to get mp3 file duration with mp3spi?","body":"<p>The problem is, that <code>new MpegAudioFileReader().getAudioFileFormat(bais)</code> points to the inherited method from <code>TAudioFileReader</code></p>\n<p>This is how I extended the <code>MpegAudioFileReader</code> to make it work:</p>\n<p>Added this method around line 300</p>\n<pre><code>public AudioFileFormat getAudioFileFormat(InputStream inputStream) throws UnsupportedAudioFileException, IOException {\n    return getAudioFileFormat(inputStream, inputStream.available());\n}\n</code></pre>\n<p>Commented this line (around 400)</p>\n<pre><code>//FileInputStream fis = (FileInputStream) inputStream;\n</code></pre>\n"}],"owner":{"account_id":2694832,"reputation":33,"user_id":2327194,"display_name":"LaMinifaldaWue"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1779,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":17143597,"answer_count":2,"score":1,"last_activity_date":1648069238,"creation_date":1371458368,"question_id":17143464,"body_markdown":"i want to get the duration of the following mp3file with mp3spi:\r\n\r\nhttp://www.thapps.net/recordings/troporocks.mp3\r\n\r\nI got only the following properties&lt;br&gt;\r\n\r\n    mp3.crc=false\r\n    mp3.copyright=false\r\n    mp3.padding=false\r\n    mp3.channels=2\r\n    mp3.version.mpeg=1\r\n    mp3.framerate.fps=38.28125\r\n    mp3.framesize.bytes=413\r\n    mp3.version.layer=3\r\n    mp3.frequency.hz=44100\r\n    mp3.header.pos=0\r\n    mp3.bitrate.nominal.bps=128000\r\n    mp3.vbr.scale=0\r\n    mp3.version.encoding=MPEG1L3\r\n    mp3.mode=0\r\n    mp3.vbr=false\r\n    mp3.original=true\r\n\r\nWhen using this code:\r\n\r\n    ByteArrayInputStream bais = new ByteArrayInputStream(audioFile.file); \r\n    \r\n    AudioFileFormat baseFileFormat = new MpegAudioFileReader().getAudioFileFormat(bais);\r\n\r\n    Map&lt;String, Object&gt; properties = baseFileFormat.properties();\r\n    Integer duration = (Integer) properties.get(&quot;duration&quot;);\r\n\r\nBut the duration is not available in the properties map.\r\n\r\nHow can I get the duration?\r\n\r\n","title":"Hot to get mp3 file duration with mp3spi?","body":"<p>i want to get the duration of the following mp3file with mp3spi:</p>\n\n<p><a href=\"http://www.thapps.net/recordings/troporocks.mp3\" rel=\"nofollow\">http://www.thapps.net/recordings/troporocks.mp3</a></p>\n\n<p>I got only the following properties<br></p>\n\n<pre><code>mp3.crc=false\nmp3.copyright=false\nmp3.padding=false\nmp3.channels=2\nmp3.version.mpeg=1\nmp3.framerate.fps=38.28125\nmp3.framesize.bytes=413\nmp3.version.layer=3\nmp3.frequency.hz=44100\nmp3.header.pos=0\nmp3.bitrate.nominal.bps=128000\nmp3.vbr.scale=0\nmp3.version.encoding=MPEG1L3\nmp3.mode=0\nmp3.vbr=false\nmp3.original=true\n</code></pre>\n\n<p>When using this code:</p>\n\n<pre><code>ByteArrayInputStream bais = new ByteArrayInputStream(audioFile.file); \n\nAudioFileFormat baseFileFormat = new MpegAudioFileReader().getAudioFileFormat(bais);\n\nMap&lt;String, Object&gt; properties = baseFileFormat.properties();\nInteger duration = (Integer) properties.get(\"duration\");\n</code></pre>\n\n<p>But the duration is not available in the properties map.</p>\n\n<p>How can I get the duration?</p>\n"},{"tags":["java","pom.xml","spring-cloud","netflix-eureka"],"comments":[{"owner":{"account_id":1270084,"reputation":5416,"user_id":1226605,"accept_rate":86,"display_name":"devang"},"score":4,"creation_date":1648048948,"post_id":71589688,"comment_id":126526627,"body_markdown":"Could you share the contents of your `application.properties` file. It seems you have set the property logging.level.com.netflix.eureka to a value that is incorrect. &#39;ON&#39; in not a valid value. Allowed values are `DEBUG`, `WARN`, `INFO`, `TRACE`, etc","body":"Could you share the contents of your <code>application.properties</code> file. It seems you have set the property logging.level.com.netflix.eureka to a value that is incorrect. &#39;ON&#39; in not a valid value. Allowed values are <code>DEBUG</code>, <code>WARN</code>, <code>INFO</code>, <code>TRACE</code>, etc"},{"owner":{"account_id":14339763,"reputation":61,"user_id":10358271,"display_name":"ngTouthang"},"score":0,"creation_date":1648049944,"post_id":71589688,"comment_id":126527124,"body_markdown":"spring.application.name=eureka-server\nserver.port=8761\n\n\n\n# avoid registering itself as a client\neureka.client.register-with-eureka=false\neureka.client.fetch-registry=false\n\nlogging.level.com.netflix.eureka=ON\nlogging.level.com.netflix.discovery=ON","body":"spring.application.name=eureka-server server.port=8761    # avoid registering itself as a client eureka.client.register-with-eureka=false eureka.client.fetch-registry=false  logging.level.com.netflix.eureka=ON logging.level.com.netflix.discovery=ON"},{"owner":{"account_id":14339763,"reputation":61,"user_id":10358271,"display_name":"ngTouthang"},"score":0,"creation_date":1648050856,"post_id":71589688,"comment_id":126527574,"body_markdown":"hey @samabcde  I&#39;ve added &#39;debug&#39; in place of &#39;ON&#39; and it works perfectly fine now  thanks. :)","body":"hey @samabcde  I&#39;ve added &#39;debug&#39; in place of &#39;ON&#39; and it works perfectly fine now  thanks. :)"},{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1648084775,"post_id":71589688,"comment_id":126537593,"body_markdown":"1. [devang](https://stackoverflow.com/users/1226605/devang) is the one suggesting the solution, so you may accept his answer if it helps. 2. Please put your application.properties in the question instead of comment.","body":"1. <a href=\"https://stackoverflow.com/users/1226605/devang\">devang</a> is the one suggesting the solution, so you may accept his answer if it helps. 2. Please put your application.properties in the question instead of comment."}],"answers":[{"tags":[],"owner":{"account_id":1270084,"reputation":5416,"user_id":1226605,"accept_rate":86,"display_name":"devang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1648068919,"creation_date":1648068919,"answer_id":71593945,"question_id":71589688,"body_markdown":"Could you share the contents of your application.properties file. It seems you have set the property logging.level.com.netflix.eureka to a value that is incorrect. &#39;ON&#39; in not a valid value. Allowed values are DEBUG, WARN, INFO, TRACE, etc","title":"Failed to bind properties under &#39;logging.level.com.netflix.eureka&#39; to org.springframework.boot.logging.LogLevel:","body":"<p>Could you share the contents of your application.properties file. It seems you have set the property logging.level.com.netflix.eureka to a value that is incorrect. 'ON' in not a valid value. Allowed values are DEBUG, WARN, INFO, TRACE, etc</p>\n"}],"owner":{"account_id":14339763,"reputation":61,"user_id":10358271,"display_name":"ngTouthang"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1228,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71593945,"answer_count":1,"score":1,"last_activity_date":1648068919,"creation_date":1648048535,"question_id":71589688,"body_markdown":"# Error\r\n\r\n```\r\n//Console log error\r\n2022-03-23 20:26:57.239 ERROR 18140 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nFailed to bind properties under &#39;logging.level.com.netflix.eureka&#39; to org.springframework.boot.logging.LogLevel:\r\n\r\n    Property: logging.level.com.netflix.eureka\r\n    Value: ON\r\n    Origin: class path resource [application.properties] - 10:34\r\n    Reason: failed to convert java.lang.String to org.springframework.boot.logging.LogLevel (caused by java.lang.IllegalArgumentException: No enum constant org.springframework.boot.logging.LogLevel.ON)\r\n\r\nAction:\r\n\r\nUpdate your application&#39;s configuration. The following values are valid:\r\n\r\n    DEBUG\r\n    ERROR\r\n    FATAL\r\n    INFO\r\n    OFF\r\n    TRACE\r\n    WARN\r\n\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\n# pom.xml\r\n\r\n----------\r\n```\r\n// maven and the dependencies\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.6.4&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;mang.io&lt;/groupId&gt;\r\n    &lt;artifactId&gt;eureka-server-application&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;eureka-server-application&lt;/name&gt;\r\n    &lt;description&gt;Microservice that returns a list of dogs with h2 and Eureka server&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n        &lt;spring-cloud.version&gt;2021.0.1&lt;/spring-cloud.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.4.0-b180725&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n# EurekaServerApplication The main class of the project\r\n\r\n```\r\npackage mang.io.eurekaserverapplication;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;\r\n\r\n@SpringBootApplication\r\n@EnableEurekaServer\r\npublic class EurekaServerApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(EurekaServerApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nHow can I config and run a simple spring eureka server","title":"Failed to bind properties under &#39;logging.level.com.netflix.eureka&#39; to org.springframework.boot.logging.LogLevel:","body":"<h1>Error</h1>\n<pre><code>//Console log error\n2022-03-23 20:26:57.239 ERROR 18140 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nFailed to bind properties under 'logging.level.com.netflix.eureka' to org.springframework.boot.logging.LogLevel:\n\n    Property: logging.level.com.netflix.eureka\n    Value: ON\n    Origin: class path resource [application.properties] - 10:34\n    Reason: failed to convert java.lang.String to org.springframework.boot.logging.LogLevel (caused by java.lang.IllegalArgumentException: No enum constant org.springframework.boot.logging.LogLevel.ON)\n\nAction:\n\nUpdate your application's configuration. The following values are valid:\n\n    DEBUG\n    ERROR\n    FATAL\n    INFO\n    OFF\n    TRACE\n    WARN\n\n\nProcess finished with exit code 1\n</code></pre>\n<h1>pom.xml</h1>\n<hr />\n<pre><code>// maven and the dependencies\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;mang.io&lt;/groupId&gt;\n    &lt;artifactId&gt;eureka-server-application&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;eureka-server-application&lt;/name&gt;\n    &lt;description&gt;Microservice that returns a list of dogs with h2 and Eureka server&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2021.0.1&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n                &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n                &lt;version&gt;2.4.0-b180725&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<h1>EurekaServerApplication The main class of the project</h1>\n<pre><code>package mang.io.eurekaserverapplication;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;\n\n@SpringBootApplication\n@EnableEurekaServer\npublic class EurekaServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(EurekaServerApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>How can I config and run a simple spring eureka server</p>\n"},{"tags":["java","kotlin","process"],"comments":[{"owner":{"account_id":85850,"reputation":8741,"user_id":239101,"accept_rate":57,"display_name":"David Soroko"},"score":0,"creation_date":1641889383,"post_id":70655939,"comment_id":124918664,"body_markdown":"This may be of help: https://stackoverflow.com/questions/35421699/how-to-invoke-external-command-from-within-kotlin-code/41495542","body":"This may be of help: <a href=\"https://stackoverflow.com/questions/35421699/how-to-invoke-external-command-from-within-kotlin-code/41495542\" title=\"how to invoke external command from within kotlin code\">stackoverflow.com/questions/35421699/&hellip;</a>"},{"owner":{"account_id":4308080,"reputation":1029,"user_id":3519951,"accept_rate":60,"display_name":"JM Lord"},"score":0,"creation_date":1641917023,"post_id":70655939,"comment_id":124930294,"body_markdown":"Thanks, unfortunately I had already checked that thread. According to my understanding and tests, all these answers give the logs only at the process end, which is not very good for long-running tasks.","body":"Thanks, unfortunately I had already checked that thread. According to my understanding and tests, all these answers give the logs only at the process end, which is not very good for long-running tasks."},{"owner":{"account_id":85850,"reputation":8741,"user_id":239101,"accept_rate":57,"display_name":"David Soroko"},"score":0,"creation_date":1641918973,"post_id":70655939,"comment_id":124931185,"body_markdown":"Oh, OK. Do you know if your long running tasks flush regularly?","body":"Oh, OK. Do you know if your long running tasks flush regularly?"},{"owner":{"account_id":4308080,"reputation":1029,"user_id":3519951,"accept_rate":60,"display_name":"JM Lord"},"score":0,"creation_date":1641925910,"post_id":70655939,"comment_id":124933963,"body_markdown":"Yes they do. By the way, I have implemented the above with ProcessBuilder and a coroutine; much more bulky than the original JavaScript code, but at least it works. I&#39;ll post it as an answer if nothing cleaner comes up in the next few days...","body":"Yes they do. By the way, I have implemented the above with ProcessBuilder and a coroutine; much more bulky than the original JavaScript code, but at least it works. I&#39;ll post it as an answer if nothing cleaner comes up in the next few days..."}],"answers":[{"tags":[],"owner":{"account_id":4308080,"reputation":1029,"user_id":3519951,"accept_rate":60,"display_name":"JM Lord"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648067377,"creation_date":1642108690,"answer_id":70703216,"question_id":70655939,"body_markdown":"Here is the ProcessBuilder solution, which I initially wanted to avoid. It does the job though it is bulky. Let me know if a better API is made available!\r\n\r\n    var logs:String = &quot;&quot;\r\n    runCatching {\r\n        var command:List&lt;String&gt; = listOf(&quot;command&quot;, &quot;arg&quot;)\r\n        parameters.params?.let {command += it} // dynamic args\r\n        ProcessBuilder(command)\r\n            .directory(File(scriptRoot))\r\n            .redirectOutput(ProcessBuilder.Redirect.PIPE)\r\n            .redirectErrorStream(true) // Merges stderr into stdout\r\n            .start().also { process -&gt; \r\n                withContext(Dispatchers.IO) { // More info on this context switching : https://elizarov.medium.com/blocking-threads-suspending-coroutines-d33e11bf4761\r\n                    launch {\r\n                        process.inputStream.bufferedReader().run {\r\n                            while (true) { // Breaks when readLine returns null\r\n                                readLine()?.let { line -&gt;\r\n                                    logger.trace(line) // realtime logging\r\n                                    logs += &quot;$line\\n&quot; // record\r\n                                } ?: break\r\n                            }\r\n                        }\r\n                    }\r\n        \r\n                    process.waitFor(60, TimeUnit.MINUTES)\r\n                    if(process.isAlive) {\r\n                        logs += &quot;TIMEOUT occurred&quot;.also { logger.warn(it) } + &quot;\\n&quot;\r\n                        process.destroy()\r\n                    }\r\n                }\r\n            }\r\n    }.onSuccess { process -&gt;\r\n        if(process.exitValue() == 0) {\r\n            // completed with success\r\n        } else {\r\n            // completed with failure\r\n        }\r\n        \r\n    }.onFailure { ex -&gt;\r\n        logs = ex.stackTraceToString()\r\n    }\r\n    \r\n    // Logs are available in $logs\r\n\r\n","title":"Java/Kotlin way to redirect command output to both stdout and String","body":"<p>Here is the ProcessBuilder solution, which I initially wanted to avoid. It does the job though it is bulky. Let me know if a better API is made available!</p>\n<pre><code>var logs:String = &quot;&quot;\nrunCatching {\n    var command:List&lt;String&gt; = listOf(&quot;command&quot;, &quot;arg&quot;)\n    parameters.params?.let {command += it} // dynamic args\n    ProcessBuilder(command)\n        .directory(File(scriptRoot))\n        .redirectOutput(ProcessBuilder.Redirect.PIPE)\n        .redirectErrorStream(true) // Merges stderr into stdout\n        .start().also { process -&gt; \n            withContext(Dispatchers.IO) { // More info on this context switching : https://elizarov.medium.com/blocking-threads-suspending-coroutines-d33e11bf4761\n                launch {\n                    process.inputStream.bufferedReader().run {\n                        while (true) { // Breaks when readLine returns null\n                            readLine()?.let { line -&gt;\n                                logger.trace(line) // realtime logging\n                                logs += &quot;$line\\n&quot; // record\n                            } ?: break\n                        }\n                    }\n                }\n    \n                process.waitFor(60, TimeUnit.MINUTES)\n                if(process.isAlive) {\n                    logs += &quot;TIMEOUT occurred&quot;.also { logger.warn(it) } + &quot;\\n&quot;\n                    process.destroy()\n                }\n            }\n        }\n}.onSuccess { process -&gt;\n    if(process.exitValue() == 0) {\n        // completed with success\n    } else {\n        // completed with failure\n    }\n    \n}.onFailure { ex -&gt;\n    logs = ex.stackTraceToString()\n}\n\n// Logs are available in $logs\n</code></pre>\n"}],"owner":{"account_id":4308080,"reputation":1029,"user_id":3519951,"accept_rate":60,"display_name":"JM Lord"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":752,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70703216,"answer_count":1,"score":0,"last_activity_date":1648067377,"creation_date":1641833017,"question_id":70655939,"body_markdown":"I am translating code from a NodeJS server to a Kotlin Ktor server.\r\n\r\nThe NodeJS code splits the output between a String to be handled by code, and realtime server logging :\r\n\r\n    const shellScript = exec(&quot;./myScript.sh&quot;,\r\n      (error, stdout, stderr) =&gt; {\r\n       // this happens when the script ends\r\n       // stdout and stderr contain full script output\r\n        if (error === null) {\r\n          ...\r\n        }\r\n      });\r\n\r\n    // Realtime server logging\r\n    shellScript.stdout.on(&#39;data&#39;, (data) =&gt; { console.log(data); });\r\n    shellScript.stderr.on(&#39;data&#39;, (data) =&gt; { console.error(data); });\r\n\r\nAccording to my understanding of `java.lang.ProcessBuilder`, we would need to spawn a thread (or a coroutine) to poll inputStream and errorStream in a loop and accumulate them in a volatile field.\r\n\r\nIs there a cleaner way to do this?","title":"Java/Kotlin way to redirect command output to both stdout and String","body":"<p>I am translating code from a NodeJS server to a Kotlin Ktor server.</p>\n<p>The NodeJS code splits the output between a String to be handled by code, and realtime server logging :</p>\n<pre><code>const shellScript = exec(&quot;./myScript.sh&quot;,\n  (error, stdout, stderr) =&gt; {\n   // this happens when the script ends\n   // stdout and stderr contain full script output\n    if (error === null) {\n      ...\n    }\n  });\n\n// Realtime server logging\nshellScript.stdout.on('data', (data) =&gt; { console.log(data); });\nshellScript.stderr.on('data', (data) =&gt; { console.error(data); });\n</code></pre>\n<p>According to my understanding of <code>java.lang.ProcessBuilder</code>, we would need to spawn a thread (or a coroutine) to poll inputStream and errorStream in a loop and accumulate them in a volatile field.</p>\n<p>Is there a cleaner way to do this?</p>\n"},{"tags":["java","input","null"],"comments":[{"owner":{"account_id":21825332,"reputation":1219,"user_id":16120911,"display_name":"sittsering"},"score":1,"creation_date":1648065277,"post_id":71592981,"comment_id":126532951,"body_markdown":"String is an object and is immutable.  So when assign new values, it creates new object in memory. So the `String x` holds the reference of what you are passing(i.e, `fn`) which refers to null but when `x = sc.nextLine();`, it creates a new object(string from input) in memory  and `x` now refers to that. `fn` still refers null.","body":"String is an object and is immutable.  So when assign new values, it creates new object in memory. So the <code>String x</code> holds the reference of what you are passing(i.e, <code>fn</code>) which refers to null but when <code>x = sc.nextLine();</code>, it creates a new object(string from input) in memory  and <code>x</code> now refers to that. <code>fn</code> still refers null."}],"answers":[{"tags":[],"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648064659,"creation_date":1648064659,"answer_id":71593155,"question_id":71592981,"body_markdown":"The null values are coming from `input` method which dosen&#39;t initialize values, one of the correct form will be like below\r\n\r\n    public class Fields {\r\n    Scanner sc = new Scanner(System.in);\r\n    private String fn;\r\n    private String ln;\r\n    private String em;\r\n    private String phn;\r\n    private String country;\r\n    private String city;\r\n\r\n    public Fields() {\r\n        System.out.println(&quot;\\n                    ~~~ FORM ~~~\\n&quot;);\r\n        System.out.print(&quot;First Name: &quot;);\r\n        this.fn = sc.nextLine();\r\n        System.out.print(&quot;Last Name: &quot;);\r\n        this.ln = sc.nextLine();\r\n        System.out.print(&quot;Email: &quot;);\r\n        this.em = sc.nextLine();\r\n        System.out.print(&quot;Phone number: &quot;);\r\n        this.phn = sc.nextLine();\r\n        System.out.print(&quot;Country: &quot;);\r\n        this.country = sc.nextLine();\r\n        System.out.print(&quot;City: &quot;);\r\n        this.city = sc.nextLine();\r\n    }\r\n\r\n    public void output() {\r\n        System.out.println(&quot;The user&#39;s name is: &quot; + fn + &quot; &quot; +\r\n                ln + &quot;\\nEmail: &quot; + em + &quot;\\nPhone Number: &quot; + phn + &quot;,\\nand lives in: &quot; + city + &quot;, &quot; + country);\r\n    }}\r\n\r\n\r\nMore over please respect language [conventions][1] for class naming .\r\n\r\n\r\n  [1]: https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html#:~:text=Class%20names%20should%20be%20nouns,such%20as%20URL%20or%20HTML).","title":"why is my java program printing &quot;null&quot; in output for a string when I took it as an input through a method?","body":"<p>The null values are coming from <code>input</code> method which dosen't initialize values, one of the correct form will be like below</p>\n<pre><code>public class Fields {\nScanner sc = new Scanner(System.in);\nprivate String fn;\nprivate String ln;\nprivate String em;\nprivate String phn;\nprivate String country;\nprivate String city;\n\npublic Fields() {\n    System.out.println(&quot;\\n                    ~~~ FORM ~~~\\n&quot;);\n    System.out.print(&quot;First Name: &quot;);\n    this.fn = sc.nextLine();\n    System.out.print(&quot;Last Name: &quot;);\n    this.ln = sc.nextLine();\n    System.out.print(&quot;Email: &quot;);\n    this.em = sc.nextLine();\n    System.out.print(&quot;Phone number: &quot;);\n    this.phn = sc.nextLine();\n    System.out.print(&quot;Country: &quot;);\n    this.country = sc.nextLine();\n    System.out.print(&quot;City: &quot;);\n    this.city = sc.nextLine();\n}\n\npublic void output() {\n    System.out.println(&quot;The user's name is: &quot; + fn + &quot; &quot; +\n            ln + &quot;\\nEmail: &quot; + em + &quot;\\nPhone Number: &quot; + phn + &quot;,\\nand lives in: &quot; + city + &quot;, &quot; + country);\n}}\n</code></pre>\n<p>More over please respect language [conventions][1] for class naming .</p>\n<p>[1]: <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html#:%7E:text=Class%20names%20should%20be%20nouns,such%20as%20URL%20or%20HTML\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html#:~:text=Class%20names%20should%20be%20nouns,such%20as%20URL%20or%20HTML</a>).</p>\n"},{"tags":[],"owner":{"account_id":24430599,"reputation":91,"user_id":18356893,"display_name":"Ernesto L&#243;pez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1648067229,"creation_date":1648067229,"answer_id":71593636,"question_id":71592981,"body_markdown":"The problem is on the input() method. This method receives a String parameter. But remember that parameters in java are passed by value and in particular Strings are immutable objects so when you invoke input() and pass a String variable as a parameter, this variable is copied. So the value you are modifying inside the input() method is the copy of the parameter sent. That&#39;s why the fn, ln, em, phn, country, city variables are never initialized. \r\n\r\nAn alternative implementation of input method is the following:\r\n\r\n```java\r\npublic String input(){\r\n    return sc.nextLine();\r\n}\r\n```\r\n\r\nAnd invoke it as the following example:\r\n\r\n```java\r\n:\r\nSystem.out.print(&quot;Last Name: &quot;);\r\nln = input();\r\n:\r\n```\r\n\r\nThis is just a playful example to understand how parameters are passed in java because using a method just to execute the read from de standard input seems to be unnecessary.\r\n\r\nA final comment: As a convention, Class names in java start with a capital letter.","title":"why is my java program printing &quot;null&quot; in output for a string when I took it as an input through a method?","body":"<p>The problem is on the input() method. This method receives a String parameter. But remember that parameters in java are passed by value and in particular Strings are immutable objects so when you invoke input() and pass a String variable as a parameter, this variable is copied. So the value you are modifying inside the input() method is the copy of the parameter sent. That's why the fn, ln, em, phn, country, city variables are never initialized.</p>\n<p>An alternative implementation of input method is the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String input(){\n    return sc.nextLine();\n}\n</code></pre>\n<p>And invoke it as the following example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>:\nSystem.out.print(&quot;Last Name: &quot;);\nln = input();\n:\n</code></pre>\n<p>This is just a playful example to understand how parameters are passed in java because using a method just to execute the read from de standard input seems to be unnecessary.</p>\n<p>A final comment: As a convention, Class names in java start with a capital letter.</p>\n"}],"owner":{"account_id":23989140,"reputation":13,"user_id":17975549,"display_name":"Abdul Hannan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":984,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71593636,"answer_count":2,"score":1,"last_activity_date":1648067229,"creation_date":1648063821,"question_id":71592981,"body_markdown":"    package com.company;\r\n    \r\n    import java.util.Scanner;\r\n    \r\n    class fields{\r\n        Scanner sc = new Scanner(System.in);\r\n        String fn;\r\n        String ln;\r\n        String em;\r\n        String phn;\r\n        String country;\r\n        String city;\r\n        public fields() {\r\n            System.out.println(&quot;\\n                    ~~~ FORM ~~~\\n&quot;);\r\n            System.out.print(&quot;First Name: &quot;);\r\n            input(fn);\r\n            System.out.print(&quot;Last Name: &quot;);\r\n            input(ln);\r\n            System.out.print(&quot;Email: &quot;);\r\n            input(em);\r\n            System.out.print(&quot;Phone number: &quot;);\r\n            input(phn);\r\n            System.out.print(&quot;Country: &quot;);\r\n            input(country);\r\n            System.out.print(&quot;City: &quot;);\r\n    \r\n            input(city);\r\n        }\r\n        public void input(String x){\r\n            x = sc.nextLine();\r\n        }\r\n        public void output(){\r\n            System.out.println(&quot;The user&#39;s name is: &quot; + fn + &quot; &quot; + ln + &quot;\\nEmail: &quot; + em + &quot;\\nPhone Number: &quot; + phn + &quot;,\\nand lives in: &quot; + city + &quot;, &quot; + country);\r\n        }\r\n    }\r\n    \r\n    public class Form {\r\n        public static void main(String[] args) {\r\n    \r\n            fields obj = new fields();\r\n            System.out.println(&quot;\\n                    ~~~ OUTPUT ~~~\\n&quot;);\r\n            obj.output();\r\n    \r\n        }\r\n    }\r\n    \r\n\r\nI am new to java. and I am still learning its concepts. I think it might be a problem of scopes of variable initialization. I am looking forward to being guided by anyone who can solve my problem. Thankyou","title":"why is my java program printing &quot;null&quot; in output for a string when I took it as an input through a method?","body":"<pre><code>package com.company;\n\nimport java.util.Scanner;\n\nclass fields{\n    Scanner sc = new Scanner(System.in);\n    String fn;\n    String ln;\n    String em;\n    String phn;\n    String country;\n    String city;\n    public fields() {\n        System.out.println(&quot;\\n                    ~~~ FORM ~~~\\n&quot;);\n        System.out.print(&quot;First Name: &quot;);\n        input(fn);\n        System.out.print(&quot;Last Name: &quot;);\n        input(ln);\n        System.out.print(&quot;Email: &quot;);\n        input(em);\n        System.out.print(&quot;Phone number: &quot;);\n        input(phn);\n        System.out.print(&quot;Country: &quot;);\n        input(country);\n        System.out.print(&quot;City: &quot;);\n\n        input(city);\n    }\n    public void input(String x){\n        x = sc.nextLine();\n    }\n    public void output(){\n        System.out.println(&quot;The user's name is: &quot; + fn + &quot; &quot; + ln + &quot;\\nEmail: &quot; + em + &quot;\\nPhone Number: &quot; + phn + &quot;,\\nand lives in: &quot; + city + &quot;, &quot; + country);\n    }\n}\n\npublic class Form {\n    public static void main(String[] args) {\n\n        fields obj = new fields();\n        System.out.println(&quot;\\n                    ~~~ OUTPUT ~~~\\n&quot;);\n        obj.output();\n\n    }\n}\n</code></pre>\n<p>I am new to java. and I am still learning its concepts. I think it might be a problem of scopes of variable initialization. I am looking forward to being guided by anyone who can solve my problem. Thankyou</p>\n"},{"tags":["java","motherboard"],"comments":[{"owner":{"account_id":2297089,"reputation":3607,"user_id":2018278,"accept_rate":53,"display_name":"The KNVB"},"score":0,"creation_date":1647853503,"post_id":71553767,"comment_id":126466409,"body_markdown":"Have you tried to change the `Wscript.Echo` to `WScript.StdOut.WriteLine`?","body":"Have you tried to change the <code>Wscript.Echo</code> to <code>WScript.StdOut.WriteLine</code>?"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1647854736,"post_id":71553767,"comment_id":126466844,"body_markdown":"Note that since Java 15, you could use a *text block* for the Visual Basic code, which would improve readability.","body":"Note that since Java 15, you could use a <i>text block</i> for the Visual Basic code, which would improve readability."}],"answers":[{"tags":[],"owner":{"account_id":2297089,"reputation":3607,"user_id":2018278,"accept_rate":53,"display_name":"The KNVB"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647854141,"creation_date":1647854141,"answer_id":71555191,"question_id":71553767,"body_markdown":"I found that the following code works.\r\n\r\n\tpackage ui;\r\n\r\n\timport java.io.BufferedReader;\r\n\timport java.io.File;\r\n\timport java.io.FileWriter;\r\n\timport java.io.IOException;\r\n\timport java.io.InputStreamReader;\r\n\r\n\tpublic class MB {\r\n\t\tpublic static void main(String[] args) throws IOException {\r\n\t\t\tFile file = File.createTempFile(&quot;realhowto&quot;, &quot;.vbs&quot;);\r\n\t\t\tfile.deleteOnExit();\r\n\t\t\tFileWriter fw = new java.io.FileWriter(file);\r\n\r\n\t\t\tString vbs = &quot;Set objWMIService = GetObject(\\&quot;winmgmts:\\\\\\\\.\\\\root\\\\cimv2\\&quot;)\\n&quot;\r\n\t\t\t\t\t+ &quot;Set colItems = objWMIService.ExecQuery _ \\n&quot; + &quot;   (\\&quot;Select * from Win32_BaseBoard\\&quot;) \\n&quot;\r\n\t\t\t\t\t+ &quot;For Each objItem in colItems \\n&quot; + &quot;    Wscript.StdOut.Writeline objItem.SerialNumber \\n&quot;\r\n\t\t\t\t\t+ &quot;    exit for  &#39; do the first cpu only! \\n&quot; + &quot;Next \\n&quot;;\r\n\t\t\tfw.write(vbs);\r\n\t\t\tfw.close();\r\n\t\t\tProcess p = Runtime.getRuntime().exec(&quot;cscript //NoLogo &quot; + file.getPath());\r\n\t\t\tBufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));\r\n\t\t\tString line, result = new String();\r\n\t\t\twhile ((line = input.readLine()) != null) {\r\n\t\t\t\tresult += line;\r\n\t\t\t}\r\n\t\t\tif (result.equalsIgnoreCase(&quot; &quot;)) {\r\n\t\t\t\tSystem.out.println(&quot;Result is empty&quot;);\r\n\t\t\t} else {\r\n\t\t\t\tSystem.out.println(&quot;Result :&gt;&quot; + result);\r\n\t\t\t}\r\n\t\t\tinput.close();\r\n\t\t}\r\n\t}\r\n","title":"how to get motherboard Serial Number?","body":"<p>I found that the following code works.</p>\n<pre><code>package ui;\n\nimport java.io.BufferedReader;\nimport java.io.File;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\n\npublic class MB {\n    public static void main(String[] args) throws IOException {\n        File file = File.createTempFile(&quot;realhowto&quot;, &quot;.vbs&quot;);\n        file.deleteOnExit();\n        FileWriter fw = new java.io.FileWriter(file);\n\n        String vbs = &quot;Set objWMIService = GetObject(\\&quot;winmgmts:\\\\\\\\.\\\\root\\\\cimv2\\&quot;)\\n&quot;\n                + &quot;Set colItems = objWMIService.ExecQuery _ \\n&quot; + &quot;   (\\&quot;Select * from Win32_BaseBoard\\&quot;) \\n&quot;\n                + &quot;For Each objItem in colItems \\n&quot; + &quot;    Wscript.StdOut.Writeline objItem.SerialNumber \\n&quot;\n                + &quot;    exit for  ' do the first cpu only! \\n&quot; + &quot;Next \\n&quot;;\n        fw.write(vbs);\n        fw.close();\n        Process p = Runtime.getRuntime().exec(&quot;cscript //NoLogo &quot; + file.getPath());\n        BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));\n        String line, result = new String();\n        while ((line = input.readLine()) != null) {\n            result += line;\n        }\n        if (result.equalsIgnoreCase(&quot; &quot;)) {\n            System.out.println(&quot;Result is empty&quot;);\n        } else {\n            System.out.println(&quot;Result :&gt;&quot; + result);\n        }\n        input.close();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24626631,"reputation":1,"user_id":18526287,"display_name":"zoey daisy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":249,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1648066496,"creation_date":1647845548,"question_id":71553767,"body_markdown":"For getting the [motherboard][1] serial number, I used the following code. The output is empty, however. Is there anything I can do to fix it?\r\n\r\n  \r\n\r\n    File file = File.createTempFile(&quot;realhowto&quot;,&quot;.vbs&quot;);\r\n      file.deleteOnExit();\r\n      FileWriter fw = new java.io.FileWriter(file);\r\n\r\n      String vbs =\r\n         &quot;Set objWMIService = GetObject(\\&quot;winmgmts:\\\\\\\\.\\\\root\\\\cimv2\\&quot;)\\n&quot;\r\n        + &quot;Set colItems = objWMIService.ExecQuery _ \\n&quot;\r\n        + &quot;   (\\&quot;Select * from Win32_BaseBoard\\&quot;) \\n&quot;\r\n        + &quot;For Each objItem in colItems \\n&quot;\r\n        + &quot;    Wscript.Echo objItem.SerialNumber \\n&quot;\r\n        + &quot;    exit for  &#39; do the first cpu only! \\n&quot;\r\n        + &quot;Next \\n&quot;;\r\n\r\n      fw.write(vbs);\r\n      fw.close();\r\n      Process p = Runtime.getRuntime().exec(&quot;cscript //NoLogo &quot; + file.getPath());\r\n      BufferedReader input =\r\n        new BufferedReader\r\n          (new InputStreamReader(p.getInputStream()));\r\n      String line;\r\n      while ((line = input.readLine()) != null) {\r\n         result += line;\r\n      }\r\n       if(result.equalEgnoreCase(&quot; &quot;) {\r\n           System.out.println(&quot;Result is empty&quot;); \r\n       } else {\r\n       System.out.println(&quot;Result :&gt;&quot;+result);\r\n      }\r\n      input.close();\r\n    }\r\n\r\n\r\n  [1]: https://demotherboards.com/","title":"how to get motherboard Serial Number?","body":"<p>For getting the <a href=\"https://demotherboards.com/\" rel=\"nofollow noreferrer\">motherboard</a> serial number, I used the following code. The output is empty, however. Is there anything I can do to fix it?</p>\n<pre><code>File file = File.createTempFile(&quot;realhowto&quot;,&quot;.vbs&quot;);\n  file.deleteOnExit();\n  FileWriter fw = new java.io.FileWriter(file);\n\n  String vbs =\n     &quot;Set objWMIService = GetObject(\\&quot;winmgmts:\\\\\\\\.\\\\root\\\\cimv2\\&quot;)\\n&quot;\n    + &quot;Set colItems = objWMIService.ExecQuery _ \\n&quot;\n    + &quot;   (\\&quot;Select * from Win32_BaseBoard\\&quot;) \\n&quot;\n    + &quot;For Each objItem in colItems \\n&quot;\n    + &quot;    Wscript.Echo objItem.SerialNumber \\n&quot;\n    + &quot;    exit for  ' do the first cpu only! \\n&quot;\n    + &quot;Next \\n&quot;;\n\n  fw.write(vbs);\n  fw.close();\n  Process p = Runtime.getRuntime().exec(&quot;cscript //NoLogo &quot; + file.getPath());\n  BufferedReader input =\n    new BufferedReader\n      (new InputStreamReader(p.getInputStream()));\n  String line;\n  while ((line = input.readLine()) != null) {\n     result += line;\n  }\n   if(result.equalEgnoreCase(&quot; &quot;) {\n       System.out.println(&quot;Result is empty&quot;); \n   } else {\n   System.out.println(&quot;Result :&gt;&quot;+result);\n  }\n  input.close();\n}\n</code></pre>\n"},{"tags":["java","class","instance"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":1,"creation_date":1648061988,"post_id":71592582,"comment_id":126531983,"body_markdown":"Think of a class as a blueprint, like a blueprint for a house. You can build many houses from that one blueprint. Each one of those houses is an _instance_ (object).","body":"Think of a class as a blueprint, like a blueprint for a house. You can build many houses from that one blueprint. Each one of those houses is an <i>instance</i> (object)."},{"owner":{"account_id":24664650,"reputation":1,"user_id":18560483,"display_name":"sori"},"score":0,"creation_date":1648062942,"post_id":71592582,"comment_id":126532247,"body_markdown":"@user16320675 Thank you for making me aware of this!","body":"@user16320675 Thank you for making me aware of this!"},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1648064675,"post_id":71592582,"comment_id":126532758,"body_markdown":"The Oracle tutorial [Classes and Objects](https://docs.oracle.com/javase/tutorial/java/javaOO/index.html) might be of some help.","body":"The Oracle tutorial <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/index.html\" rel=\"nofollow noreferrer\">Classes and Objects</a> might be of some help."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1648070411,"post_id":71592582,"comment_id":126534514,"body_markdown":"Post code as text in your Question, not a link to an image.","body":"Post code as text in your Question, not a link to an image."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1648070582,"post_id":71592582,"comment_id":126534573,"body_markdown":"[*Lesson: Classes and Objects*](https://docs.oracle.com/javase/tutorial/java/javaOO/index.html)","body":"<a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/index.html\" rel=\"nofollow noreferrer\"><i>Lesson: Classes and Objects</i></a>"}],"answers":[{"tags":[],"owner":{"account_id":23810835,"reputation":91,"user_id":17819649,"display_name":"IODevBlue"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648066318,"creation_date":1648066318,"answer_id":71593465,"question_id":71592582,"body_markdown":"Object Oriented Programming is an interesting aspect of programming. It is confusing at first but with time it just gets easier and easier when you begin to apply it in your codes.\r\n\r\nI&#39;d try to answer your questions.\r\n\r\n&gt; Firstly, what exactly is the use of this instance?\r\n\r\nAn instance (also called object) of a class is like an offspring of a class, so whatever is declared in the `ForMe` class can **only** be accessed by an instance (offspring) of `ForMe`. \r\n\r\nBut sometimes the `ForMe` class can say &quot;Hey, I don&#39;t want my kids to have this variable. I want it to be mine only&quot;\r\n\r\nSo `ForMe` class can declare a variable, method, inner class, inner interface as [static][1], meaning the variable, method etc is for the class and **not** for any of its objects.\r\n\r\n&gt; Why do we need to create it\r\n\r\nYou need to create an instance of a class to be able to access the properties defined in the class. For example in the `ForMe` class, the `number` int variable and the `array` int [ ] variable can **only** be accessed by an instance (offspring) of the `ForMe` class.\r\n\r\nSo you may need to do something like this to access the int[ ]:\r\n\r\n    ForMe mine = new ForMe();\r\n    int[] a = mine.array;\r\n    System.out.println(Arrays.toString(a));\r\n\r\nIt would print - [1,2,3,4,5,6,7,8,9,10]\r\n\r\nSo you need an instance of a Class to access the properties defined in that class.\r\n\r\nThis encompasses the concept of Data Encapsulation where you create a Data class (a class whose sole aim is to store data) and make all the declared variables `private`, then you define accessor and mutator methods (getters and setters) to modify and access the stored data.\r\n\r\nThese accessor and mutator methods would then **only** be available to an object (offspring) of a class.\r\n\r\n&gt;Secondly, why does it work to compile the code, considering that ForMe is not declared as public/static/etc?\r\n\r\n**NOTE**: if you do not explicitly define a visibility modifier (public, private, protected etc) on a class, then that class is given the default visibility modifier by Java which is the `package private`. This means the class is only visible and accessible to classes defined in the same package. Check this Stack overflow [post][2] for further explanations.\r\n\r\n\r\nAlright, I hope this was helpful.\r\n\r\n  [1]: https://en.m.wikipedia.org/wiki/Static_variable\r\n  [2]: https://stackoverflow.com/questions/4668922/arent-java-constructors-public-by-default","title":"Understanding class instances as a begginer","body":"<p>Object Oriented Programming is an interesting aspect of programming. It is confusing at first but with time it just gets easier and easier when you begin to apply it in your codes.</p>\n<p>I'd try to answer your questions.</p>\n<blockquote>\n<p>Firstly, what exactly is the use of this instance?</p>\n</blockquote>\n<p>An instance (also called object) of a class is like an offspring of a class, so whatever is declared in the <code>ForMe</code> class can <strong>only</strong> be accessed by an instance (offspring) of <code>ForMe</code>.</p>\n<p>But sometimes the <code>ForMe</code> class can say &quot;Hey, I don't want my kids to have this variable. I want it to be mine only&quot;</p>\n<p>So <code>ForMe</code> class can declare a variable, method, inner class, inner interface as <a href=\"https://en.m.wikipedia.org/wiki/Static_variable\" rel=\"nofollow noreferrer\">static</a>, meaning the variable, method etc is for the class and <strong>not</strong> for any of its objects.</p>\n<blockquote>\n<p>Why do we need to create it</p>\n</blockquote>\n<p>You need to create an instance of a class to be able to access the properties defined in the class. For example in the <code>ForMe</code> class, the <code>number</code> int variable and the <code>array</code> int [ ] variable can <strong>only</strong> be accessed by an instance (offspring) of the <code>ForMe</code> class.</p>\n<p>So you may need to do something like this to access the int[ ]:</p>\n<pre><code>ForMe mine = new ForMe();\nint[] a = mine.array;\nSystem.out.println(Arrays.toString(a));\n</code></pre>\n<p>It would print - [1,2,3,4,5,6,7,8,9,10]</p>\n<p>So you need an instance of a Class to access the properties defined in that class.</p>\n<p>This encompasses the concept of Data Encapsulation where you create a Data class (a class whose sole aim is to store data) and make all the declared variables <code>private</code>, then you define accessor and mutator methods (getters and setters) to modify and access the stored data.</p>\n<p>These accessor and mutator methods would then <strong>only</strong> be available to an object (offspring) of a class.</p>\n<blockquote>\n<p>Secondly, why does it work to compile the code, considering that ForMe is not declared as public/static/etc?</p>\n</blockquote>\n<p><strong>NOTE</strong>: if you do not explicitly define a visibility modifier (public, private, protected etc) on a class, then that class is given the default visibility modifier by Java which is the <code>package private</code>. This means the class is only visible and accessible to classes defined in the same package. Check this Stack overflow <a href=\"https://stackoverflow.com/questions/4668922/arent-java-constructors-public-by-default\">post</a> for further explanations.</p>\n<p>Alright, I hope this was helpful.</p>\n"}],"owner":{"account_id":24664650,"reputation":1,"user_id":18560483,"display_name":"sori"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1648070483,"answer_count":1,"score":-2,"last_activity_date":1648066318,"creation_date":1648061760,"question_id":71592582,"body_markdown":"I&#39;ve recently gotten started learning Java, and I have a question regarding a code structure that I&#39;ve found frequently in some textbooks.\r\n[This][1] is a simplified version of what I&#39;ve found, but I am mainly interested in the usage of the ForMe instance. \r\n\r\nFirstly, what exactly is the use of this instance? Why do we need to create it, and why can&#39;t we just include the code in the class body? Also, is this structure considered to be a class instance (an object)?\r\nSecondly, why does it work to compile the code, considering that ForMe is not declared as public/static/etc?\r\nI apologize if these questions are stupid, I am new to coding and I&#39;m just trying to properly understand OOP \r\n\r\n  [1]: https://i.stack.imgur.com/RbnML.png","title":"Understanding class instances as a begginer","body":"<p>I've recently gotten started learning Java, and I have a question regarding a code structure that I've found frequently in some textbooks.\n<a href=\"https://i.stack.imgur.com/RbnML.png\" rel=\"nofollow noreferrer\">This</a> is a simplified version of what I've found, but I am mainly interested in the usage of the ForMe instance.</p>\n<p>Firstly, what exactly is the use of this instance? Why do we need to create it, and why can't we just include the code in the class body? Also, is this structure considered to be a class instance (an object)?\nSecondly, why does it work to compile the code, considering that ForMe is not declared as public/static/etc?\nI apologize if these questions are stupid, I am new to coding and I'm just trying to properly understand OOP</p>\n"},{"tags":["java","mysql","jdbc"],"comments":[{"owner":{"account_id":401367,"reputation":23742,"user_id":767881,"accept_rate":14,"display_name":"Ravinder Reddy"},"score":0,"creation_date":1530773839,"post_id":51184824,"comment_id":89351904,"body_markdown":"use proper IDE for project development. example: Eclipse. Create a Web project. and IDE will generate a project folder structure. Under them you can find a `lib` folder. Keep your driver jar file inside that folder and then run your project.","body":"use proper IDE for project development. example: Eclipse. Create a Web project. and IDE will generate a project folder structure. Under them you can find a <code>lib</code> folder. Keep your driver jar file inside that folder and then run your project."},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1530773951,"post_id":51184824,"comment_id":89351990,"body_markdown":"You have to force classloader to load driver. Do as @Rugved instructed to.","body":"You have to force classloader to load driver. Do as @Rugved instructed to."},{"owner":{"account_id":401367,"reputation":23742,"user_id":767881,"accept_rate":14,"display_name":"Ravinder Reddy"},"score":0,"creation_date":1530773991,"post_id":51184824,"comment_id":89352015,"body_markdown":"[how-do-you-develop-java-servlets-using-eclipse](https://stackoverflow.com/questions/206924/how-do-you-develop-java-servlets-using-eclipse)","body":"<a href=\"https://stackoverflow.com/questions/206924/how-do-you-develop-java-servlets-using-eclipse\">how-do-you-develop-java-servlets-using-eclipse</a>"},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1530774201,"post_id":51184824,"comment_id":89352139,"body_markdown":"@Antoniossss no, you do not. You have not needed to do that for over 5 years. Why do people persist with the outdated &quot;requirements&quot;?","body":"@Antoniossss no, you do not. You have not needed to do that for over 5 years. Why do people persist with the outdated &quot;requirements&quot;?"},{"owner":{"account_id":11884699,"reputation":497,"user_id":8697412,"display_name":"Barracuda"},"score":0,"creation_date":1530774420,"post_id":51184824,"comment_id":89352275,"body_markdown":"I think,i have pretty much proper project structure.Here is a screenshot.I will try using eclipse.http://prntscr.com/k2qx0j","body":"I think,i have pretty much proper project structure.Here is a screenshot.I will try using eclipse.<a href=\"http://prntscr.com/k2qx0j\" rel=\"nofollow noreferrer\">prntscr.com/k2qx0j</a>"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1530774510,"post_id":51184824,"comment_id":89352326,"body_markdown":"@BoristheSpider good to know. For over 6 years I am not using low level jdbc connections so I may be outdated indeed.","body":"@BoristheSpider good to know. For over 6 years I am not using low level jdbc connections so I may be outdated indeed."}],"answers":[{"tags":[],"owner":{"account_id":10624064,"reputation":47,"user_id":7824234,"display_name":"Rugved Marathe"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1530773784,"creation_date":1530773784,"answer_id":51185046,"question_id":51184824,"body_markdown":"Have you tried using this line?\r\n\r\n`Class.forName(&quot;com.mysql.jdbc.Driver&quot;);// include this line in your code.\r\n`\r\n\r\nIf not try adding this line in this function.\r\n\r\n    public void establishConnection() throws SQLException {\r\n       myConnection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/app1&quot;,&quot;root&quot;,&quot;password&quot;);\r\n    }","title":"No suitable driver found for jdbc:mysql://localhost/database","body":"<p>Have you tried using this line?</p>\n\n<p><code>Class.forName(\"com.mysql.jdbc.Driver\");// include this line in your code.\n</code></p>\n\n<p>If not try adding this line in this function.</p>\n\n<pre><code>public void establishConnection() throws SQLException {\n   myConnection = DriverManager.getConnection(\"jdbc:mysql://localhost:3306/app1\",\"root\",\"password\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5010108,"reputation":1772,"user_id":4026629,"display_name":"JL_SO"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534344071,"creation_date":1534344071,"answer_id":51860907,"question_id":51184824,"body_markdown":"The only thing that solved this for me was using Class.forName\r\n\r\n\ttry {\r\n\t\tClass.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n\t} catch (ClassNotFoundException e1) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te1.printStackTrace();\r\n\t}\r\n\r\nOf course, this is supposed to have become redundant back in 1923 but having put mysql-connector jar file just about everywhere, this is the only thing that worked. ","title":"No suitable driver found for jdbc:mysql://localhost/database","body":"<p>The only thing that solved this for me was using Class.forName</p>\n\n<pre><code>try {\n    Class.forName(\"com.mysql.jdbc.Driver\");\n} catch (ClassNotFoundException e1) {\n    // TODO Auto-generated catch block\n    e1.printStackTrace();\n}\n</code></pre>\n\n<p>Of course, this is supposed to have become redundant back in 1923 but having put mysql-connector jar file just about everywhere, this is the only thing that worked. </p>\n"}],"owner":{"account_id":11884699,"reputation":497,"user_id":8697412,"display_name":"Barracuda"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7410,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1648065880,"creation_date":1530772936,"question_id":51184824,"body_markdown":"I am asking the same question,because i didn&#39;t find the answer.Here is my problem.\r\nI&#39;ve been trying to use jdbc driver to connect to mysql database.\r\nHere is my main sql handler class :\r\n\r\n    package com.arslanjava.model;\r\n    \r\n    import java.sql.*;\r\n    \r\n    public class SqlHandler {\r\n        private Connection myConnection;\r\n       // final private String serverName = &quot;localhost&quot; ;\r\n        //final private String port = &quot;3306&quot; ;\r\n        //final private String user = &quot;root&quot; ;\r\n       // final private String password = &quot;password&quot; ;\r\n    \r\n        public SqlHandler ( String username , String password , String fname , String lName ) throws SQLException {\r\n            if ( username != null  &amp;&amp; password != null &amp;&amp; fname != null &amp;&amp; lName != null ) {\r\n    \r\n                //Establish connection to the server.\r\n                this.establishConnection();\r\n    \r\n                //execute the addUser method\r\n                this.addUser(username,password,fname,lName);\r\n    \r\n                //close this connection\r\n                this.close();\r\n    \r\n    \r\n            } else {\r\n                throw new NullPointerException () ;\r\n            }\r\n        }\r\n    \r\n    \r\n        public SqlHandler()  {\r\n    \r\n        }\r\n    \r\n        public void addUser (String us , String pas , String fName , String lName ) throws SQLException {\r\n            PreparedStatement statement = myConnection.prepareStatement(&quot;INSERT INTO user_info (username, password, first_name, last_name) VALUES (?,?,?,?)&quot;);\r\n            statement.setString(1,us);\r\n            statement.setString(2,pas);\r\n            statement.setString(3,fName);\r\n            statement.setString(4,lName);\r\n            statement.executeUpdate();\r\n        }\r\n    \r\n        public void establishConnection () throws SQLException {\r\n            myConnection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/app1&quot;,&quot;root&quot;,&quot;password&quot;) ; ;\r\n        }\r\n    \r\n        public void close() {\r\n            if (myConnection != null) {\r\n                try {\r\n                    myConnection.close();\r\n                } catch (SQLException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nEverything works fine,when i use it in plain java code.For example,this works fine :\r\n\r\n    package com.arslanjava.model;\r\n    \r\n    import com.arslanjava.model.SqlHandler;\r\n    \r\n    import java.io.IOException;\r\n    import java.net.ServerSocket;\r\n    import java.sql.SQLException;\r\n    \r\n    public class Test {\r\n        public static void main(String[] args) {\r\n            SqlHandler handler = new SqlHandler() ;\r\n            try {\r\n                handler.establishConnection();\r\n                handler.close();\r\n            } catch (SQLException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\nBut,when i try to use it in my servlet classes i get an error that says :&lt;br&gt;\r\n**No suitable driver found for jdbc:mysql://localhost/name_of_my_database**.&lt;br&gt;\r\nI checked the answer in the previous question,it was saying that this was caused by 2 things:\r\n\r\n 1. Wrong url,which i checked and it was fine.(jdbc:mysql://localhost:3306/app1)\r\n 2. I didn&#39;t add jar file\r\n        in tomcat&#39;s lib folder,which i did,but i still get the same\r\n        error.(screenshots:https://prnt.sc/k2qlxa ,https://prnt.sc/k2qm1e,http://prntscr.com/k2qm5h)\r\n&lt;br&gt;\r\nAlso i added this jar file to the WEB-INF/lib folder,which ,also,didn&#39;t work.&lt;br&gt;\r\nIs there anything else i can try?Please,help me understand the problem here,because i can&#39;t fix this....\r\n\r\nHere is my servlet class :\r\n\r\n    package com.arslanjava.web;\r\n    \r\n    import com.arslanjava.model.SqlHandler;\r\n    import javax.servlet.*;\r\n    import javax.servlet.http.*;\r\n    import java.io.IOException;\r\n    import java.sql.SQLException;\r\n    \r\n    public class MyRegServlet extends HttpServlet {\r\n    \r\n        @Override\r\n        public void doPost (HttpServletRequest request , HttpServletResponse response) {\r\n            String username = request.getParameter(&quot;us&quot;) ;\r\n            String password = request.getParameter(&quot;psw&quot;) ;\r\n            String first_name = request.getParameter(&quot;fname&quot;);\r\n            String last_name = request.getParameter(&quot;lname&quot;) ;\r\n            try {\r\n                SqlHandler handler = new SqlHandler(username,password,first_name,last_name) ;\r\n            } catch (SQLException e) {\r\n                request.setAttribute(&quot;errorCode&quot;,&quot;5xx&quot;);\r\n                request.setAttribute(&quot;errorMessage&quot;,e.toString());\r\n                e.printStackTrace();\r\n                RequestDispatcher dispatcher = request.getRequestDispatcher(&quot;customErroPage.jsp&quot;) ;\r\n                try {\r\n                    dispatcher.forward(request,response);\r\n                } catch (ServletException | IOException e1) {\r\n                    e1.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    \r\n    }","title":"No suitable driver found for jdbc:mysql://localhost/database","body":"<p>I am asking the same question,because i didn't find the answer.Here is my problem.\nI've been trying to use jdbc driver to connect to mysql database.\nHere is my main sql handler class :</p>\n\n<pre><code>package com.arslanjava.model;\n\nimport java.sql.*;\n\npublic class SqlHandler {\n    private Connection myConnection;\n   // final private String serverName = \"localhost\" ;\n    //final private String port = \"3306\" ;\n    //final private String user = \"root\" ;\n   // final private String password = \"password\" ;\n\n    public SqlHandler ( String username , String password , String fname , String lName ) throws SQLException {\n        if ( username != null  &amp;&amp; password != null &amp;&amp; fname != null &amp;&amp; lName != null ) {\n\n            //Establish connection to the server.\n            this.establishConnection();\n\n            //execute the addUser method\n            this.addUser(username,password,fname,lName);\n\n            //close this connection\n            this.close();\n\n\n        } else {\n            throw new NullPointerException () ;\n        }\n    }\n\n\n    public SqlHandler()  {\n\n    }\n\n    public void addUser (String us , String pas , String fName , String lName ) throws SQLException {\n        PreparedStatement statement = myConnection.prepareStatement(\"INSERT INTO user_info (username, password, first_name, last_name) VALUES (?,?,?,?)\");\n        statement.setString(1,us);\n        statement.setString(2,pas);\n        statement.setString(3,fName);\n        statement.setString(4,lName);\n        statement.executeUpdate();\n    }\n\n    public void establishConnection () throws SQLException {\n        myConnection = DriverManager.getConnection(\"jdbc:mysql://localhost:3306/app1\",\"root\",\"password\") ; ;\n    }\n\n    public void close() {\n        if (myConnection != null) {\n            try {\n                myConnection.close();\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>Everything works fine,when i use it in plain java code.For example,this works fine :</p>\n\n<pre><code>package com.arslanjava.model;\n\nimport com.arslanjava.model.SqlHandler;\n\nimport java.io.IOException;\nimport java.net.ServerSocket;\nimport java.sql.SQLException;\n\npublic class Test {\n    public static void main(String[] args) {\n        SqlHandler handler = new SqlHandler() ;\n        try {\n            handler.establishConnection();\n            handler.close();\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n\n    }\n}\n</code></pre>\n\n<p>But,when i try to use it in my servlet classes i get an error that says :<br>\n<strong>No suitable driver found for jdbc:mysql://localhost/name_of_my_database</strong>.<br>\nI checked the answer in the previous question,it was saying that this was caused by 2 things:</p>\n\n<ol>\n<li>Wrong url,which i checked and it was fine.(jdbc:mysql://localhost:3306/app1)</li>\n<li>I didn't add jar file\n    in tomcat's lib folder,which i did,but i still get the same\n    error.(screenshots:<a href=\"https://prnt.sc/k2qlxa\" rel=\"nofollow noreferrer\">https://prnt.sc/k2qlxa</a> ,<a href=\"https://prnt.sc/k2qm1e,http://prntscr.com/k2qm5h\" rel=\"nofollow noreferrer\">https://prnt.sc/k2qm1e,http://prntscr.com/k2qm5h</a>)\n<br>\nAlso i added this jar file to the WEB-INF/lib folder,which ,also,didn't work.<br>\nIs there anything else i can try?Please,help me understand the problem here,because i can't fix this....</li>\n</ol>\n\n<p>Here is my servlet class :</p>\n\n<pre><code>package com.arslanjava.web;\n\nimport com.arslanjava.model.SqlHandler;\nimport javax.servlet.*;\nimport javax.servlet.http.*;\nimport java.io.IOException;\nimport java.sql.SQLException;\n\npublic class MyRegServlet extends HttpServlet {\n\n    @Override\n    public void doPost (HttpServletRequest request , HttpServletResponse response) {\n        String username = request.getParameter(\"us\") ;\n        String password = request.getParameter(\"psw\") ;\n        String first_name = request.getParameter(\"fname\");\n        String last_name = request.getParameter(\"lname\") ;\n        try {\n            SqlHandler handler = new SqlHandler(username,password,first_name,last_name) ;\n        } catch (SQLException e) {\n            request.setAttribute(\"errorCode\",\"5xx\");\n            request.setAttribute(\"errorMessage\",e.toString());\n            e.printStackTrace();\n            RequestDispatcher dispatcher = request.getRequestDispatcher(\"customErroPage.jsp\") ;\n            try {\n                dispatcher.forward(request,response);\n            } catch (ServletException | IOException e1) {\n                e1.printStackTrace();\n            }\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","selenium","web-scraping","htmlunit-driver"],"comments":[{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1647975007,"post_id":71572927,"comment_id":126505219,"body_markdown":"Looks like your results array is 0 size.  I would begin debugging there.  (maybe try adding a sleep before getting the array)  Btw, you shouldn&#39;t need to change the page load timeout, or cast to HTMLUnit type.  (driver should already be that type...)","body":"Looks like your results array is 0 size.  I would begin debugging there.  (maybe try adding a sleep before getting the array)  Btw, you shouldn&#39;t need to change the page load timeout, or cast to HTMLUnit type.  (driver should already be that type...)"},{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1647988281,"post_id":71572927,"comment_id":126509233,"body_markdown":"_`click on the search button`_: Which line of code?","body":"<i><code>click on the search button</code></i>: Which line of code?"},{"owner":{"account_id":7735992,"reputation":1618,"user_id":5857569,"accept_rate":72,"display_name":"Malki Mohamed"},"score":0,"creation_date":1648021885,"post_id":71572927,"comment_id":126515471,"body_markdown":"@undetectedSelenium, it&#39;s this line `((HtmlUnitDriver) driver).findElementById(&quot;btnRechercheAnnByDateTypeJur&quot;).click();`  in the first loop.","body":"@undetectedSelenium, it&#39;s this line <code>((HtmlUnitDriver) driver).findElementById(&quot;btnRechercheAnnByDateTypeJur&quot;).clic&zwnj;&#8203;k();</code>  in the first loop."}],"answers":[{"tags":[],"owner":{"account_id":20718629,"reputation":685,"user_id":15213503,"display_name":"MeT"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648065644,"creation_date":1647990544,"answer_id":71580006,"question_id":71572927,"body_markdown":"I&#39;ve checked your code and when you click it doesn&#39;t seem to load javascript properly. Javascript with htmlunit are not very friendly ;).  \r\n\r\nYou can do it easy with playwright 1.20.0 (how to set playwright  https://playwright.dev/java/docs/intro). Just add in your pom:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.microsoft.playwright&lt;/groupId&gt;\r\n            &lt;artifactId&gt;playwright&lt;/artifactId&gt;\r\n            &lt;version&gt;1.20.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\nIts works, start downloading files, but after some downloads get stacked and can not open the modal giving an error timeout for waiting this element .DownFiles.  \r\nTomorrow i will check if i can find where is the problem.  \r\n\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n\r\n        try (Playwright playwright = Playwright.create()) {\r\n            final BrowserType chromium = playwright.chromium();\r\n            //you can do it with headless mode or with open browser\r\n            final Browser browser = chromium.launch(new BrowserType\r\n                    .LaunchOptions()\r\n                    .setHeadless(false));\r\n            final Page page = browser.newPage();\r\n            page.navigate(&quot;http://www.mahakim.ma/Ar/Annonces/RechercherAnnonces/?Page=AnnoncesJudiciaires#&quot;);\r\n            ElementHandle searchButton = page.querySelector(&quot;#btnRechercheAnnByDateTypeJur&quot;);\r\n            ElementHandle tabList = page.querySelector(&quot;//ul[@role=\\&quot;tablist\\&quot; and @class=\\&quot;nav nav-pills TypeJuridiction\\&quot;]&quot;);\r\n            List&lt;ElementHandle&gt; choices = page.querySelectorAll(&quot;#TypeJuridiction .TypeJuridiction li&quot;);\r\n            //start date\r\n            page.fill(&quot;#txtDateD&quot;, &quot;14/03/2022&quot;);\r\n            //end date\r\n            page.fill(&quot;#txtDateF&quot;, &quot;21/03/2022&quot;);\r\n            page.querySelector(&quot;div[id=&#39;TypeJuridiction&#39;] li:nth-child(3)&quot;).click();\r\n            page.querySelector(&quot;#btnRechercheAnnByDateTypeJur&quot;).click();\r\n            Thread.sleep(3000);\r\n            page.querySelector(&quot;.DetailAnnonce&quot;).click();\r\n            Thread.sleep(3000);\r\n            List&lt;ElementHandle&gt; results = page.querySelectorAll(&quot;.DetailAnnonce-Plus&quot;);\r\n            for (ElementHandle item : results) {\r\n                //click for open modal\r\n                try {\r\n                    item.querySelector(&quot;.link-pointer&quot;).click();\r\n                    page.waitForSelector(&quot;.DownFiles&quot;);\r\n                } catch (Exception e) {\r\n                    System.out.println(&quot;Timeout can not open modal &quot; + item.innerHTML());\r\n                    Thread.sleep(1000);\r\n                    continue;\r\n                }\r\n                // Wait for the download to start\r\n                Download download = page.waitForDownload(() -&gt; {\r\n                    // Perform the action that initiates download\r\n                    page.click(&quot;.DownFiles&quot;);\r\n                });\r\n                // Wait for the download process to complete\r\n                Path path = download.path();\r\n                System.out.println(&quot;Downloading the file of: &quot; + path + System.lineSeparator()\r\n                        + &quot;item: &quot; + item.innerHTML());\r\n                Thread.sleep(2000);\r\n                //close modal\r\n                page.querySelector(&quot;.btn.btn-default&quot;).click();\r\n            }\r\n            System.out.println(&quot;Total downloaded files: &quot; + results.size());\r\n        }\r\n    }\r\n## Added 23/03/2022 ##\r\nSolved the problem with popup, change it to firefox(headless) and it works well.\r\n```\r\nfinal BrowserType chromium = playwright.firefox();\r\nfinal Browser browser = chromium.launch();\r\n```\r\n  ","title":"Selenium 4 HtmlUnitDriver Button not clicked","body":"<p>I've checked your code and when you click it doesn't seem to load javascript properly. Javascript with htmlunit are not very friendly ;).</p>\n<p>You can do it easy with playwright 1.20.0 (how to set playwright  <a href=\"https://playwright.dev/java/docs/intro\" rel=\"nofollow noreferrer\">https://playwright.dev/java/docs/intro</a>). Just add in your pom:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.microsoft.playwright&lt;/groupId&gt;\n        &lt;artifactId&gt;playwright&lt;/artifactId&gt;\n        &lt;version&gt;1.20.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Its works, start downloading files, but after some downloads get stacked and can not open the modal giving an error timeout for waiting this element .DownFiles.<br />\nTomorrow i will check if i can find where is the problem.</p>\n<pre><code>public static void main(String[] args) throws InterruptedException {\n\n    try (Playwright playwright = Playwright.create()) {\n        final BrowserType chromium = playwright.chromium();\n        //you can do it with headless mode or with open browser\n        final Browser browser = chromium.launch(new BrowserType\n                .LaunchOptions()\n                .setHeadless(false));\n        final Page page = browser.newPage();\n        page.navigate(&quot;http://www.mahakim.ma/Ar/Annonces/RechercherAnnonces/?Page=AnnoncesJudiciaires#&quot;);\n        ElementHandle searchButton = page.querySelector(&quot;#btnRechercheAnnByDateTypeJur&quot;);\n        ElementHandle tabList = page.querySelector(&quot;//ul[@role=\\&quot;tablist\\&quot; and @class=\\&quot;nav nav-pills TypeJuridiction\\&quot;]&quot;);\n        List&lt;ElementHandle&gt; choices = page.querySelectorAll(&quot;#TypeJuridiction .TypeJuridiction li&quot;);\n        //start date\n        page.fill(&quot;#txtDateD&quot;, &quot;14/03/2022&quot;);\n        //end date\n        page.fill(&quot;#txtDateF&quot;, &quot;21/03/2022&quot;);\n        page.querySelector(&quot;div[id='TypeJuridiction'] li:nth-child(3)&quot;).click();\n        page.querySelector(&quot;#btnRechercheAnnByDateTypeJur&quot;).click();\n        Thread.sleep(3000);\n        page.querySelector(&quot;.DetailAnnonce&quot;).click();\n        Thread.sleep(3000);\n        List&lt;ElementHandle&gt; results = page.querySelectorAll(&quot;.DetailAnnonce-Plus&quot;);\n        for (ElementHandle item : results) {\n            //click for open modal\n            try {\n                item.querySelector(&quot;.link-pointer&quot;).click();\n                page.waitForSelector(&quot;.DownFiles&quot;);\n            } catch (Exception e) {\n                System.out.println(&quot;Timeout can not open modal &quot; + item.innerHTML());\n                Thread.sleep(1000);\n                continue;\n            }\n            // Wait for the download to start\n            Download download = page.waitForDownload(() -&gt; {\n                // Perform the action that initiates download\n                page.click(&quot;.DownFiles&quot;);\n            });\n            // Wait for the download process to complete\n            Path path = download.path();\n            System.out.println(&quot;Downloading the file of: &quot; + path + System.lineSeparator()\n                    + &quot;item: &quot; + item.innerHTML());\n            Thread.sleep(2000);\n            //close modal\n            page.querySelector(&quot;.btn.btn-default&quot;).click();\n        }\n        System.out.println(&quot;Total downloaded files: &quot; + results.size());\n    }\n}\n</code></pre>\n<h2>Added 23/03/2022</h2>\n<p>Solved the problem with popup, change it to firefox(headless) and it works well.</p>\n<pre><code>final BrowserType chromium = playwright.firefox();\nfinal Browser browser = chromium.launch();\n</code></pre>\n"}],"owner":{"account_id":7735992,"reputation":1618,"user_id":5857569,"accept_rate":72,"display_name":"Malki Mohamed"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":443,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71580006,"answer_count":1,"score":0,"last_activity_date":1648065644,"creation_date":1647955859,"question_id":71572927,"body_markdown":"I&#39;m using Selenium 4 and HtmlUnitDriver with java, I have a problem with executing a form button. no error showed but I&#39;m sure that the button was not clicked according to the output console result.\r\n\r\nI add some system output to know the result of some elements :\r\n\r\nThis is my class :\r\n\r\n```\r\npackage htmldriver;\r\n\r\nimport com.gargoylesoftware.htmlunit.BrowserVersion;\r\n\r\nimport java.time.Duration;\r\nimport java.util.List;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\nimport org.openqa.selenium.*;\r\nimport org.openqa.selenium.htmlunit.HtmlUnitDriver;\r\nimport org.openqa.selenium.remote.DesiredCapabilities;\r\nimport org.openqa.selenium.support.ui.ExpectedConditions;\r\nimport org.openqa.selenium.support.ui.WebDriverWait;\r\n\r\npublic class htmlUnitYest {\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n\r\n        // turn off htmlunit warnings\r\n        java.util.logging.Logger.getLogger(&quot;com.gargoylesoftware.htmlunit&quot;).setLevel(java.util.logging.Level.OFF);\r\n        java.util.logging.Logger.getLogger(&quot;org.apache.http&quot;).setLevel(java.util.logging.Level.OFF);\r\n\r\n        WebDriver driver = new HtmlUnitDriver(BrowserVersion.CHROME, true);\r\n\r\n        driver.get(&quot;http://www.mahakim.ma/Ar/Annonces/RechercherAnnonces/?Page=AnnoncesJudiciaires#&quot;);\r\n\r\n        // This code will print the page title\r\n        System.out.println(&quot;Page title is: &quot; + driver.getTitle());\r\n\r\n        WebElement startDate = ((HtmlUnitDriver) driver).findElementById(&quot;txtDateD&quot;);\r\n        WebElement endDate = ((HtmlUnitDriver) driver).findElementById(&quot;txtDateF&quot;);\r\n        WebElement searchButton = ((HtmlUnitDriver) driver).findElementById(&quot;btnRechercheAnnByDateTypeJur&quot;);\r\n\r\n        WebElement tabList = ((HtmlUnitDriver) driver).findElementByXPath(&quot;//ul[@role=\\&quot;tablist\\&quot; and @class=\\&quot;nav nav-pills TypeJuridiction\\&quot;]&quot;);\r\n        List&lt;WebElement&gt; choices = ((HtmlUnitDriver) driver).findElementsByCssSelector(&quot;#TypeJuridiction .TypeJuridiction li&quot;);\r\n\r\n        WebElement resultTab = ((HtmlUnitDriver) driver).findElementById(&quot;Res&quot;);\r\n        WebElement resultDetails = ((HtmlUnitDriver) driver).findElementById(&quot;Res_Detail&quot;);\r\n\r\n        startDate.sendKeys(&quot;14/03/2022&quot;);\r\n        endDate.sendKeys(&quot;21/03/2022&quot;);\r\n\r\n        int position = 1;\r\n        for (WebElement choiceType : choices) {\r\n\r\n            position += 1;\r\n\r\n            if ( position &lt; 3 ) {\r\n                continue;\r\n            }\r\n\r\n            System.out.println(&quot;choiceType: &quot; + choices);\r\n            System.out.println(&quot;searchButton: &quot; + searchButton);\r\n\r\n            WebDriverWait wait = new WebDriverWait(driver,Duration.ofSeconds(20));\r\n\r\n            wait.until(ExpectedConditions.elementToBeClickable(choiceType));\r\n\r\n            ((HtmlUnitDriver) driver).findElementById(&quot;btnRechercheAnnByDateTypeJur&quot;).click();\r\n            \r\n            driver.manage().timeouts().pageLoadTimeout(Duration.ofSeconds(20));\r\n\r\n            WebElement ResDiv = ((HtmlUnitDriver) driver).findElementById(&quot;Res&quot;);\r\n\r\n            List&lt;WebElement&gt; ColsInResDiv = ((HtmlUnitDriver) driver).findElementsByClassName(&quot;col-lg-12&quot;);\r\n\r\n            System.out.println(&quot;resultTab: &quot; + ColsInResDiv);\r\n\r\n            driver.manage().timeouts().pageLoadTimeout(Duration.ofSeconds(10));\r\n\r\n            // when search button clicked this element will be exist and style of second div.col-lg-12 will become : display inline\r\n            List&lt;WebElement&gt; da = ((HtmlUnitDriver) driver).findElementsByCssSelector(&quot;#Res .DetailAnnonce&quot;);\r\n\r\n            System.out.println(&quot;da: &quot; + da);\r\n\r\n            List&lt;WebElement&gt; results = ((HtmlUnitDriver) driver).findElementsByXPath(&quot;.//a[@class=\\&quot;DetailAnnonce\\&quot;]&quot;);\r\n\r\n\r\n            for (WebElement item : results) {\r\n\r\n                System.out.println(&quot;item: &quot; + item);\r\n\r\n                WebDriverWait waitArticle = new WebDriverWait(driver,Duration.ofSeconds(20));\r\n\r\n                waitArticle.until(ExpectedConditions.elementToBeClickable((item)));\r\n                \r\n                List&lt;WebElement&gt; details = resultDetails.findElements(By.xpath(&quot;.//a[@class=\\&quot;link-pointer\\&quot;]&quot;));\r\n\r\n                for (WebElement article : details) {\r\n\r\n                    System.out.println(&quot;article: &quot; + article.toString());\r\n\r\n                    Thread.sleep(1);\r\n\r\n                    waitArticle.until(ExpectedConditions.elementToBeClickable((article)));\r\n\r\n                    WebElement downloadFile = waitArticle.until(ExpectedConditions.elementToBeClickable(((HtmlUnitDriver) driver).findElementByXPath(&quot;//a[@class=\\&quot;DownFiles\\&quot;]&quot;)));\r\n\r\n                    downloadFile.click();\r\n\r\n                    WebElement closeModel = waitArticle.until(ExpectedConditions.elementToBeClickable(((HtmlUnitDriver) driver).findElementByXPath(&quot;//div[@id=\\&quot;ModalPJ\\&quot;]//button[@data-dismiss=\\&quot;modal\\&quot;]&quot;)));\r\n\r\n                    closeModel.click();\r\n\r\n\r\n                }\r\n\r\n            }\r\n\r\n            position++;\r\n        }\r\n\r\n        // This code will print the page title\r\n        System.out.println(&quot;Page title is: &quot; + driver.getTitle());\r\n\r\n        driver.quit();\r\n    }\r\n}\r\n\r\n```\r\n\r\nThis is the output of system.out. in the console: \r\n\r\n```\r\n&quot;C:\\Program Files\\Java\\jdk1.8.0_171\\bin\\java.exe ...&quot; \r\nPage title is: محاكم\r\nchoiceType: [&lt;li role=&quot;presentation&quot; class=&quot;active&quot;&gt;, &lt;li role=&quot;presentation&quot;&gt;, &lt;li role=&quot;presentation&quot;&gt;]\r\nsearchButton: &lt;button id=&quot;btnRechercheAnnByDateTypeJur&quot; class=&quot;btn btn-primary&quot;&gt;\r\nresultTab: [&lt;div class=&quot;col-lg-12&quot;&gt;, &lt;div class=&quot;col-lg-12&quot; style=&quot;display: none;&quot;&gt;, &lt;div class=&quot;col-lg-12 well well-sm&quot; id=&quot;Res_Detail&quot;&gt;, &lt;div class=&quot;footer_sepHoriz col-lg-12&quot;&gt;]\r\nda: []\r\nchoiceType: [&lt;li role=&quot;presentation&quot; class=&quot;active&quot;&gt;, &lt;li role=&quot;presentation&quot;&gt;, &lt;li role=&quot;presentation&quot;&gt;]\r\nsearchButton: &lt;button id=&quot;btnRechercheAnnByDateTypeJur&quot; class=&quot;btn btn-primary&quot;&gt;\r\nresultTab: [&lt;div class=&quot;col-lg-12&quot;&gt;, &lt;div class=&quot;col-lg-12&quot; style=&quot;display: none;&quot;&gt;, &lt;div class=&quot;col-lg-12 well well-sm&quot; id=&quot;Res_Detail&quot;&gt;, &lt;div class=&quot;footer_sepHoriz col-lg-12&quot;&gt;]\r\nda: []\r\nPage title is: محاكم\r\n\r\nProcess finished with exit code 0\r\n```\r\nAnd this is a screenshot of the HTML page when I click on the search button manually:\r\n\r\n[![enter image description here][1]][1] \r\n\r\n\r\nPS: From the browser, when I click on the search button, it is executed via jquery like this `$(&quot;#btnRechercheAnnByDateTypeJur&quot;).click(function (e) {... }`, then an ajax script is called to get data from the server if that could help.\r\n\r\n**EDIT:**\r\n\r\nmy pom.xml file:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;webscrapping&lt;/groupId&gt;\r\n    &lt;artifactId&gt;cap&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;8&lt;/source&gt;\r\n                    &lt;target&gt;8&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n            &lt;version&gt;2.53.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/OVe9I.png","title":"Selenium 4 HtmlUnitDriver Button not clicked","body":"<p>I'm using Selenium 4 and HtmlUnitDriver with java, I have a problem with executing a form button. no error showed but I'm sure that the button was not clicked according to the output console result.</p>\n<p>I add some system output to know the result of some elements :</p>\n<p>This is my class :</p>\n<pre><code>package htmldriver;\n\nimport com.gargoylesoftware.htmlunit.BrowserVersion;\n\nimport java.time.Duration;\nimport java.util.List;\nimport java.util.concurrent.TimeUnit;\n\nimport org.openqa.selenium.*;\nimport org.openqa.selenium.htmlunit.HtmlUnitDriver;\nimport org.openqa.selenium.remote.DesiredCapabilities;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\n\npublic class htmlUnitYest {\n\n    public static void main(String[] args) throws InterruptedException {\n\n        // turn off htmlunit warnings\n        java.util.logging.Logger.getLogger(&quot;com.gargoylesoftware.htmlunit&quot;).setLevel(java.util.logging.Level.OFF);\n        java.util.logging.Logger.getLogger(&quot;org.apache.http&quot;).setLevel(java.util.logging.Level.OFF);\n\n        WebDriver driver = new HtmlUnitDriver(BrowserVersion.CHROME, true);\n\n        driver.get(&quot;http://www.mahakim.ma/Ar/Annonces/RechercherAnnonces/?Page=AnnoncesJudiciaires#&quot;);\n\n        // This code will print the page title\n        System.out.println(&quot;Page title is: &quot; + driver.getTitle());\n\n        WebElement startDate = ((HtmlUnitDriver) driver).findElementById(&quot;txtDateD&quot;);\n        WebElement endDate = ((HtmlUnitDriver) driver).findElementById(&quot;txtDateF&quot;);\n        WebElement searchButton = ((HtmlUnitDriver) driver).findElementById(&quot;btnRechercheAnnByDateTypeJur&quot;);\n\n        WebElement tabList = ((HtmlUnitDriver) driver).findElementByXPath(&quot;//ul[@role=\\&quot;tablist\\&quot; and @class=\\&quot;nav nav-pills TypeJuridiction\\&quot;]&quot;);\n        List&lt;WebElement&gt; choices = ((HtmlUnitDriver) driver).findElementsByCssSelector(&quot;#TypeJuridiction .TypeJuridiction li&quot;);\n\n        WebElement resultTab = ((HtmlUnitDriver) driver).findElementById(&quot;Res&quot;);\n        WebElement resultDetails = ((HtmlUnitDriver) driver).findElementById(&quot;Res_Detail&quot;);\n\n        startDate.sendKeys(&quot;14/03/2022&quot;);\n        endDate.sendKeys(&quot;21/03/2022&quot;);\n\n        int position = 1;\n        for (WebElement choiceType : choices) {\n\n            position += 1;\n\n            if ( position &lt; 3 ) {\n                continue;\n            }\n\n            System.out.println(&quot;choiceType: &quot; + choices);\n            System.out.println(&quot;searchButton: &quot; + searchButton);\n\n            WebDriverWait wait = new WebDriverWait(driver,Duration.ofSeconds(20));\n\n            wait.until(ExpectedConditions.elementToBeClickable(choiceType));\n\n            ((HtmlUnitDriver) driver).findElementById(&quot;btnRechercheAnnByDateTypeJur&quot;).click();\n            \n            driver.manage().timeouts().pageLoadTimeout(Duration.ofSeconds(20));\n\n            WebElement ResDiv = ((HtmlUnitDriver) driver).findElementById(&quot;Res&quot;);\n\n            List&lt;WebElement&gt; ColsInResDiv = ((HtmlUnitDriver) driver).findElementsByClassName(&quot;col-lg-12&quot;);\n\n            System.out.println(&quot;resultTab: &quot; + ColsInResDiv);\n\n            driver.manage().timeouts().pageLoadTimeout(Duration.ofSeconds(10));\n\n            // when search button clicked this element will be exist and style of second div.col-lg-12 will become : display inline\n            List&lt;WebElement&gt; da = ((HtmlUnitDriver) driver).findElementsByCssSelector(&quot;#Res .DetailAnnonce&quot;);\n\n            System.out.println(&quot;da: &quot; + da);\n\n            List&lt;WebElement&gt; results = ((HtmlUnitDriver) driver).findElementsByXPath(&quot;.//a[@class=\\&quot;DetailAnnonce\\&quot;]&quot;);\n\n\n            for (WebElement item : results) {\n\n                System.out.println(&quot;item: &quot; + item);\n\n                WebDriverWait waitArticle = new WebDriverWait(driver,Duration.ofSeconds(20));\n\n                waitArticle.until(ExpectedConditions.elementToBeClickable((item)));\n                \n                List&lt;WebElement&gt; details = resultDetails.findElements(By.xpath(&quot;.//a[@class=\\&quot;link-pointer\\&quot;]&quot;));\n\n                for (WebElement article : details) {\n\n                    System.out.println(&quot;article: &quot; + article.toString());\n\n                    Thread.sleep(1);\n\n                    waitArticle.until(ExpectedConditions.elementToBeClickable((article)));\n\n                    WebElement downloadFile = waitArticle.until(ExpectedConditions.elementToBeClickable(((HtmlUnitDriver) driver).findElementByXPath(&quot;//a[@class=\\&quot;DownFiles\\&quot;]&quot;)));\n\n                    downloadFile.click();\n\n                    WebElement closeModel = waitArticle.until(ExpectedConditions.elementToBeClickable(((HtmlUnitDriver) driver).findElementByXPath(&quot;//div[@id=\\&quot;ModalPJ\\&quot;]//button[@data-dismiss=\\&quot;modal\\&quot;]&quot;)));\n\n                    closeModel.click();\n\n\n                }\n\n            }\n\n            position++;\n        }\n\n        // This code will print the page title\n        System.out.println(&quot;Page title is: &quot; + driver.getTitle());\n\n        driver.quit();\n    }\n}\n\n</code></pre>\n<p>This is the output of system.out. in the console:</p>\n<pre><code>&quot;C:\\Program Files\\Java\\jdk1.8.0_171\\bin\\java.exe ...&quot; \nPage title is: محاكم\nchoiceType: [&lt;li role=&quot;presentation&quot; class=&quot;active&quot;&gt;, &lt;li role=&quot;presentation&quot;&gt;, &lt;li role=&quot;presentation&quot;&gt;]\nsearchButton: &lt;button id=&quot;btnRechercheAnnByDateTypeJur&quot; class=&quot;btn btn-primary&quot;&gt;\nresultTab: [&lt;div class=&quot;col-lg-12&quot;&gt;, &lt;div class=&quot;col-lg-12&quot; style=&quot;display: none;&quot;&gt;, &lt;div class=&quot;col-lg-12 well well-sm&quot; id=&quot;Res_Detail&quot;&gt;, &lt;div class=&quot;footer_sepHoriz col-lg-12&quot;&gt;]\nda: []\nchoiceType: [&lt;li role=&quot;presentation&quot; class=&quot;active&quot;&gt;, &lt;li role=&quot;presentation&quot;&gt;, &lt;li role=&quot;presentation&quot;&gt;]\nsearchButton: &lt;button id=&quot;btnRechercheAnnByDateTypeJur&quot; class=&quot;btn btn-primary&quot;&gt;\nresultTab: [&lt;div class=&quot;col-lg-12&quot;&gt;, &lt;div class=&quot;col-lg-12&quot; style=&quot;display: none;&quot;&gt;, &lt;div class=&quot;col-lg-12 well well-sm&quot; id=&quot;Res_Detail&quot;&gt;, &lt;div class=&quot;footer_sepHoriz col-lg-12&quot;&gt;]\nda: []\nPage title is: محاكم\n\nProcess finished with exit code 0\n</code></pre>\n<p>And this is a screenshot of the HTML page when I click on the search button manually:</p>\n<p><a href=\"https://i.stack.imgur.com/OVe9I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OVe9I.png\" alt=\"enter image description here\" /></a></p>\n<p>PS: From the browser, when I click on the search button, it is executed via jquery like this <code>$(&quot;#btnRechercheAnnByDateTypeJur&quot;).click(function (e) {... }</code>, then an ajax script is called to get data from the server if that could help.</p>\n<p><strong>EDIT:</strong></p>\n<p>my pom.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;webscrapping&lt;/groupId&gt;\n    &lt;artifactId&gt;cap&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;8&lt;/source&gt;\n                    &lt;target&gt;8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;2.53.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":1396150,"reputation":921,"user_id":1325855,"display_name":"Qkyrie"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1436533533,"creation_date":1436525384,"answer_id":31338917,"question_id":31336812,"body_markdown":"Looking at **org.springframework.boot.actuate.autoconfigure.EndpointAutoConfiguration**, the endpoints are provided when the beans are missing. One option would be to provide them in your own configuration class. All endpoints have the field *enabled*. You could provide all of them, setting enabled on **false**, except for the one you need.\r\n\r\n    @Configuration\r\n    public class ActuatorConfiguration {\r\n\r\n        @Autowired(required = false)\r\n        private Collection&lt;PublicMetrics&gt; publicMetrics;\r\n\r\n        @Bean\r\n        public MetricsEndpoint metricsEndpoint() {\r\n            List&lt;PublicMetrics&gt; publicMetrics = new ArrayList&lt;&gt;();\r\n            if (this.publicMetrics != null) {\r\n                publicMetrics.addAll(this.publicMetrics);\r\n            }\r\n            Collections.sort(publicMetrics,AnnotationAwareOrderComparator.INSTANCE);\r\n            MetricsEndpoint metricsEndpoint = new MetricsEndpoint(publicMetrics);\r\n            metricsEndpoint.setEnabled(false);\r\n            return metricsEndpoint;\r\n        }\r\n    }","title":"Disable spring boot actuator endpoints java config","body":"<p>Looking at <strong>org.springframework.boot.actuate.autoconfigure.EndpointAutoConfiguration</strong>, the endpoints are provided when the beans are missing. One option would be to provide them in your own configuration class. All endpoints have the field <em>enabled</em>. You could provide all of them, setting enabled on <strong>false</strong>, except for the one you need.</p>\n\n<pre><code>@Configuration\npublic class ActuatorConfiguration {\n\n    @Autowired(required = false)\n    private Collection&lt;PublicMetrics&gt; publicMetrics;\n\n    @Bean\n    public MetricsEndpoint metricsEndpoint() {\n        List&lt;PublicMetrics&gt; publicMetrics = new ArrayList&lt;&gt;();\n        if (this.publicMetrics != null) {\n            publicMetrics.addAll(this.publicMetrics);\n        }\n        Collections.sort(publicMetrics,AnnotationAwareOrderComparator.INSTANCE);\n        MetricsEndpoint metricsEndpoint = new MetricsEndpoint(publicMetrics);\n        metricsEndpoint.setEnabled(false);\n        return metricsEndpoint;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1164178,"reputation":1598,"user_id":1143126,"accept_rate":80,"display_name":"RobertG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648065595,"creation_date":1648065595,"answer_id":71593322,"question_id":31336812,"body_markdown":"I found this question, wanted to post an update from / a reference to the current docs \r\n\r\nI guess what you want to do would be something like this these days:\r\n```\r\nmanagement.endpoints.jmx.exposure.exclude=*\r\nmanagement.endpoints.web.exposure.include=health\r\n```\r\nhttps://docs.spring.io/spring-boot/docs/2.6.4/reference/htmlsingle/#actuator.endpoints.exposing","title":"Disable spring boot actuator endpoints java config","body":"<p>I found this question, wanted to post an update from / a reference to the current docs</p>\n<p>I guess what you want to do would be something like this these days:</p>\n<pre><code>management.endpoints.jmx.exposure.exclude=*\nmanagement.endpoints.web.exposure.include=health\n</code></pre>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/2.6.4/reference/htmlsingle/#actuator.endpoints.exposing\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/2.6.4/reference/htmlsingle/#actuator.endpoints.exposing</a></p>\n"}],"owner":{"account_id":157965,"reputation":3209,"user_id":376260,"accept_rate":75,"display_name":"MarcF"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17853,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":31338917,"answer_count":2,"score":13,"last_activity_date":1648065595,"creation_date":1436519389,"question_id":31336812,"body_markdown":"I woud like to disable all actuator endpoints except for the health endpoint. All docs describe how to achieve this in the resource properties:\r\n\r\n    endpoints.enabled=false\r\n    endpoints.health.enabled=true\r\n\r\nbut I have always preferred to use inline java configuration. Could someone please explain where in the application I can configure the same?","title":"Disable spring boot actuator endpoints java config","body":"<p>I woud like to disable all actuator endpoints except for the health endpoint. All docs describe how to achieve this in the resource properties:</p>\n\n<pre><code>endpoints.enabled=false\nendpoints.health.enabled=true\n</code></pre>\n\n<p>but I have always preferred to use inline java configuration. Could someone please explain where in the application I can configure the same?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2808507,"reputation":2036,"user_id":2415237,"accept_rate":93,"display_name":"Chemistpp"},"score":1,"creation_date":1648063408,"post_id":71592869,"comment_id":126532380,"body_markdown":"You should create a minimal and reproducible example of code if you cannot post your source code.   There you could clearly explain what you have tried and what you have not.  \nWhy not read the entire input as a string and split the string using ws as delimiter?\n\n`String[] inputs = totalInputAsString.split(&#39; &#39;,3)`","body":"You should create a minimal and reproducible example of code if you cannot post your source code.   There you could clearly explain what you have tried and what you have not.   Why not read the entire input as a string and split the string using ws as delimiter?  <code>String[] inputs = totalInputAsString.split(&#39; &#39;,3)</code>"},{"owner":{"account_id":1674243,"reputation":10043,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"score":1,"creation_date":1648065782,"post_id":71592869,"comment_id":126533122,"body_markdown":"Your question is really unclear and poorly formatted.","body":"Your question is really unclear and poorly formatted."},{"owner":{"account_id":2808507,"reputation":2036,"user_id":2415237,"accept_rate":93,"display_name":"Chemistpp"},"score":0,"creation_date":1648066069,"post_id":71592869,"comment_id":126533226,"body_markdown":"Seems pretty clear.  &quot;I want to allow user to enter multiple values in a single line&quot;\nWith S 2 1 as example input.","body":"Seems pretty clear.  &quot;I want to allow user to enter multiple values in a single line&quot; With S 2 1 as example input."}],"answers":[{"tags":[],"owner":{"account_id":2808507,"reputation":2036,"user_id":2415237,"accept_rate":93,"display_name":"Chemistpp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648063657,"creation_date":1648063657,"answer_id":71592952,"question_id":71592869,"body_markdown":"Read input as a string and split.\r\n\r\n    String inputs = &quot;s 2 1&quot;;\r\n    String[] splitInput = inputs.split(&quot; &quot;,3);","title":"How to read multiple values from a single line of input in Java?","body":"<p>Read input as a string and split.</p>\n<pre><code>String inputs = &quot;s 2 1&quot;;\nString[] splitInput = inputs.split(&quot; &quot;,3);\n</code></pre>\n"}],"owner":{"account_id":16668116,"reputation":11,"user_id":12046285,"display_name":"Poo Po"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1648065482,"creation_date":1648063185,"question_id":71592869,"body_markdown":"I am working on a java program and I want to allow a user to enter multiple values in a single line. \r\n\r\nit likes :\r\n\r\n    setting something in location X and y Eg.. :s x y \r\n    Enter next action: S 2 1\r\n\r\n\r\n\r\nthe s is like like setting , adding ......\r\n\r\nand the 2 1 is the location X and Y.\r\n\r\n\r\nI cannot post my source code, but I wanted to know if this is possible. thanks","title":"How to read multiple values from a single line of input in Java?","body":"<p>I am working on a java program and I want to allow a user to enter multiple values in a single line.</p>\n<p>it likes :</p>\n<pre><code>setting something in location X and y Eg.. :s x y \nEnter next action: S 2 1\n</code></pre>\n<p>the s is like like setting , adding ......</p>\n<p>and the 2 1 is the location X and Y.</p>\n<p>I cannot post my source code, but I wanted to know if this is possible. thanks</p>\n"},{"tags":["java","performance","for-loop","methods","parameter-passing"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":2,"creation_date":1648053904,"post_id":71590936,"comment_id":126528940,"body_markdown":"You can put as many for loops in a method as you need.","body":"You can put as many for loops in a method as you need."},{"owner":{"account_id":8026267,"reputation":4734,"user_id":6053084,"display_name":"Turo"},"score":1,"creation_date":1648054814,"post_id":71590936,"comment_id":126529325,"body_markdown":"Since its working code, the question would be better suited for codereview-site.\nAnd there is room for improvements, espacially when both `mBuffer.get(event_actor)` and `DQ.get(event_actor)` return `List&lt;Message&gt;`","body":"Since its working code, the question would be better suited for codereview-site. And there is room for improvements, espacially when both <code>mBuffer.get(event_actor)</code> and <code>DQ.get(event_actor)</code> return <code>List&lt;Message&gt;</code>"},{"owner":{"account_id":15777655,"reputation":1762,"user_id":11385052,"display_name":"Ryan"},"score":0,"creation_date":1648054922,"post_id":71590936,"comment_id":126529373,"body_markdown":"If the first loop returns true then the second loop never happens.  Is that what you want?","body":"If the first loop returns true then the second loop never happens.  Is that what you want?"},{"owner":{"account_id":9842590,"reputation":3,"user_id":7291176,"display_name":"Agbako"},"score":0,"creation_date":1648057415,"post_id":71590936,"comment_id":126530314,"body_markdown":"@Ryan, Yes, if the message is found in first loop the second should not happen and vice versa","body":"@Ryan, Yes, if the message is found in first loop the second should not happen and vice versa"}],"answers":[{"tags":[],"owner":{"account_id":14253684,"reputation":197,"user_id":10296608,"display_name":"John Stone"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648065021,"creation_date":1648065021,"answer_id":71593225,"question_id":71590936,"body_markdown":"*Is it alright to lump the two for loop within a single method?*\r\n\r\nSure.\r\n\r\n*Is there a better way to put the method to reflect my intention?*\r\n\r\nThe two loops are identical with the exception of the specific map that is being evaluated (DQ vs mBuffer).  You could easily do this:\r\n\r\n```java\r\npublic static boolean SetMessageToStable(int event_actor, Message msg) {\r\n    return SetMessageToStableInternal(mBuffer, event_actor, msg)\r\n        || SetMessageToStableInternal(DQ, event_actor, msg);\r\n}\r\n\r\nprivate static boolean SetMessageToStableInternal(\r\n        Map&lt;Integer, List&lt;Message&gt;&gt; map,\r\n        int event_actor,\r\n        Message msg\r\n) {\r\n    List&lt;Message&gt; msgList = map.get(event_actor);\r\n    if (msgList != null) {\r\n        for (int i = 0; i &lt; msgList.size(); i++) {\r\n            Message m = msgList.get(i);\r\n            if (m.equals(msg)) {\r\n                m.setMsg_stable(true);\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\n```","title":"Having two for loop in a single Java Method","body":"<p><em>Is it alright to lump the two for loop within a single method?</em></p>\n<p>Sure.</p>\n<p><em>Is there a better way to put the method to reflect my intention?</em></p>\n<p>The two loops are identical with the exception of the specific map that is being evaluated (DQ vs mBuffer).  You could easily do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static boolean SetMessageToStable(int event_actor, Message msg) {\n    return SetMessageToStableInternal(mBuffer, event_actor, msg)\n        || SetMessageToStableInternal(DQ, event_actor, msg);\n}\n\nprivate static boolean SetMessageToStableInternal(\n        Map&lt;Integer, List&lt;Message&gt;&gt; map,\n        int event_actor,\n        Message msg\n) {\n    List&lt;Message&gt; msgList = map.get(event_actor);\n    if (msgList != null) {\n        for (int i = 0; i &lt; msgList.size(); i++) {\n            Message m = msgList.get(i);\n            if (m.equals(msg)) {\n                m.setMsg_stable(true);\n                return true;\n            }\n        }\n    }\n    return false;\n}\n</code></pre>\n"}],"owner":{"account_id":9842590,"reputation":3,"user_id":7291176,"display_name":"Agbako"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71593225,"answer_count":1,"score":0,"last_activity_date":1648065021,"creation_date":1648053768,"question_id":71590936,"body_markdown":"I have a method shown in the code below, I have a  hashmap buffer and queue with several list in both. I want to search a particular message to set it true when it is stable; the message could be in either the buffer or queue. is it alright to lump the two for loop within a single method? or is there a better way to put the method to reflect my intention.\r\n\r\nso if the message is in the buffer, it is set to true, if not it checks the queue; if not found it returns false\r\n\r\n    public static boolean SetMessageToStable(int event_actor, Message msg) {\r\n            if (mBuffer.get(event_actor) != null) {\r\n                for (int i = 0; i &lt; mBuffer.get(event_actor).size(); i++) { // iterate the list of event actor to find matching message\r\n                    if (mBuffer.get(event_actor).get(i).equals(msg)) {\r\n                        mBuffer.get(event_actor).get(i).setMsg_stable(true); // set stable if found\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            if (DQ.get(event_actor) != null) {\r\n                for (int i = 0; i &lt; DQ.get(event_actor).size(); i++) {  // search the event actor&#39;s DQ if the message has not been found\r\n                    if (DQ.get(event_actor).get(i).equals(msg)) {\r\n                        DQ.get(event_actor).get(i).setMsg_stable(true); // set stable if found\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }","title":"Having two for loop in a single Java Method","body":"<p>I have a method shown in the code below, I have a  hashmap buffer and queue with several list in both. I want to search a particular message to set it true when it is stable; the message could be in either the buffer or queue. is it alright to lump the two for loop within a single method? or is there a better way to put the method to reflect my intention.</p>\n<p>so if the message is in the buffer, it is set to true, if not it checks the queue; if not found it returns false</p>\n<pre><code>public static boolean SetMessageToStable(int event_actor, Message msg) {\n        if (mBuffer.get(event_actor) != null) {\n            for (int i = 0; i &lt; mBuffer.get(event_actor).size(); i++) { // iterate the list of event actor to find matching message\n                if (mBuffer.get(event_actor).get(i).equals(msg)) {\n                    mBuffer.get(event_actor).get(i).setMsg_stable(true); // set stable if found\n                    return true;\n                }\n            }\n        }\n        if (DQ.get(event_actor) != null) {\n            for (int i = 0; i &lt; DQ.get(event_actor).size(); i++) {  // search the event actor's DQ if the message has not been found\n                if (DQ.get(event_actor).get(i).equals(msg)) {\n                    DQ.get(event_actor).get(i).setMsg_stable(true); // set stable if found\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n</code></pre>\n"},{"tags":["java","google-cloud-dataflow","apache-beam"],"comments":[{"owner":{"account_id":18205236,"reputation":1825,"user_id":13248738,"display_name":"ewertonvsilva"},"score":0,"creation_date":1648052090,"post_id":71586095,"comment_id":126528101,"body_markdown":"which stages are not receiving data from the previous level ?","body":"which stages are not receiving data from the previous level ?"},{"owner":{"account_id":284307,"reputation":4946,"user_id":582333,"display_name":"robertwb"},"score":0,"creation_date":1648064085,"post_id":71586095,"comment_id":126532605,"body_markdown":"Is this a duplicate of https://stackoverflow.com/questions/71586061/apache-beam-flatten-is-not-taking-data-from-others-pcollection ?","body":"Is this a duplicate of <a href=\"https://stackoverflow.com/questions/71586061/apache-beam-flatten-is-not-taking-data-from-others-pcollection\" title=\"apache beam flatten is not taking data from others pcollection\">stackoverflow.com/questions/71586061/&hellip;</a> ?"},{"owner":{"account_id":3921963,"reputation":89,"user_id":3243820,"display_name":"Amit Rai"},"score":0,"creation_date":1648107382,"post_id":71586095,"comment_id":126541475,"body_markdown":"@robertwb  yes its same","body":"@robertwb  yes its same"},{"owner":{"account_id":3921963,"reputation":89,"user_id":3243820,"display_name":"Amit Rai"},"score":0,"creation_date":1648107435,"post_id":71586095,"comment_id":126541490,"body_markdown":"@ewertonvsilva  below stage is not taking data from previous stage","body":"@ewertonvsilva  below stage is not taking data from previous stage"},{"owner":{"account_id":19863790,"reputation":1361,"user_id":14551567,"display_name":"Betjens"},"score":0,"creation_date":1649241603,"post_id":71586095,"comment_id":126824385,"body_markdown":"May I ask, what are you trying to achieve? Also what is your output collection? (based on the code it looks like `mergedPcoll` ). Before using `Flatten` up to that point `collections` have any records? . I suggest you to check [the java beam cookbook samples](https://github.com/apache/beam/tree/master/examples/java/src/main/java/org/apache/beam/examples/cookbook) and Merging PCollections topic on [apache beam design your pipeline](https://beam.apache.org/documentation/pipelines/design-your-pipeline/).","body":"May I ask, what are you trying to achieve? Also what is your output collection? (based on the code it looks like <code>mergedPcoll</code> ). Before using <code>Flatten</code> up to that point <code>collections</code> have any records? . I suggest you to check <a href=\"https://github.com/apache/beam/tree/master/examples/java/src/main/java/org/apache/beam/examples/cookbook\" rel=\"nofollow noreferrer\">the java beam cookbook samples</a> and Merging PCollections topic on <a href=\"https://beam.apache.org/documentation/pipelines/design-your-pipeline/\" rel=\"nofollow noreferrer\">apache beam design your pipeline</a>."}],"owner":{"account_id":3921963,"reputation":89,"user_id":3243820,"display_name":"Amit Rai"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":210,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1648064005,"creation_date":1648033348,"question_id":71586095,"body_markdown":"some how the pcollection of data from previous step is not flowing to next level -\r\n\r\nBelow is the code \r\n\r\n\r\n```\r\nPCollection finalPayload = daCheck.apply(\r\n     &quot;Read Alarm data from Redies&quot;,\r\n     ParDo.of(new BigQueryProcessor.RediesFinalPayload(redisInstance))\r\n        //.withOutputTags(\r\n            CommonUtil.SUZLONINOX_ALARM,\r\n            TupleTagList.of(CommonUtil.NORMAL_ALARM))\r\n        .withSideInputs(bq_row)\r\n    );\r\n    \r\nPCollectionList&lt;List&lt;MicroServiceResponse&gt;&gt; collections = \r\n    PCollectionList.of(finalPayload).and(opPCol);\r\n    \r\nPCollection&lt;List&lt;MicroServiceResponse&gt;&gt; mergedPcoll = \r\n    collections.apply(\r\n        Flatten.&lt;List&lt;MicroServiceResponse&gt;&gt;pCollections());\r\n    \r\nPCollection&lt;List&lt;MicroServiceResponse&gt;&gt; opPCol = \r\n    normalAlarmPCol.apply(\r\n        &quot;Binary Conversion&quot;,\r\n        ParDo.of(\r\n            new DoFn&lt;KV&lt;Neo4jResponse, List&lt;MicroServiceResponse&gt;&gt;, List&lt;MicroServiceResponse&gt;&gt;() {\r\n    \t\t    @ProcessElement\r\n    \t\t    public void process(ProcessContext c){ \r\n                    // logic \r\n                }\r\n             }));\r\n```\r\n\r\n\r\n","title":"apache beam Flatten in Java , The Data is not flowing to next level","body":"<p>some how the pcollection of data from previous step is not flowing to next level -</p>\n<p>Below is the code</p>\n<pre><code>PCollection finalPayload = daCheck.apply(\n     &quot;Read Alarm data from Redies&quot;,\n     ParDo.of(new BigQueryProcessor.RediesFinalPayload(redisInstance))\n        //.withOutputTags(\n            CommonUtil.SUZLONINOX_ALARM,\n            TupleTagList.of(CommonUtil.NORMAL_ALARM))\n        .withSideInputs(bq_row)\n    );\n    \nPCollectionList&lt;List&lt;MicroServiceResponse&gt;&gt; collections = \n    PCollectionList.of(finalPayload).and(opPCol);\n    \nPCollection&lt;List&lt;MicroServiceResponse&gt;&gt; mergedPcoll = \n    collections.apply(\n        Flatten.&lt;List&lt;MicroServiceResponse&gt;&gt;pCollections());\n    \nPCollection&lt;List&lt;MicroServiceResponse&gt;&gt; opPCol = \n    normalAlarmPCol.apply(\n        &quot;Binary Conversion&quot;,\n        ParDo.of(\n            new DoFn&lt;KV&lt;Neo4jResponse, List&lt;MicroServiceResponse&gt;&gt;, List&lt;MicroServiceResponse&gt;&gt;() {\n                @ProcessElement\n                public void process(ProcessContext c){ \n                    // logic \n                }\n             }));\n</code></pre>\n"},{"tags":["java","jsp","servlets"],"comments":[{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1363630231,"post_id":15483844,"comment_id":21917156,"body_markdown":"Convert the String to a URL object and then use a getter method to parse out the portion you want.","body":"Convert the String to a URL object and then use a getter method to parse out the portion you want."}],"answers":[{"tags":[],"owner":{"account_id":4812,"reputation":43757,"user_id":7426,"display_name":"Adrian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1363630290,"creation_date":1363630290,"answer_id":15483891,"question_id":15483844,"body_markdown":"It&#39;s basic string manipulation, treat it like any other string. You can use `String.indexOf/String.lastIndexOf` and `String.substring`, or you can use `String.split`, or you can use `StringTokenizer`, or you can use Regular Expressions (the most flexible option, but requires learning regex).","title":"Getting the last part of the referrer url","body":"<p>It's basic string manipulation, treat it like any other string. You can use <code>String.indexOf/String.lastIndexOf</code> and <code>String.substring</code>, or you can use <code>String.split</code>, or you can use <code>StringTokenizer</code>, or you can use Regular Expressions (the most flexible option, but requires learning regex).</p>\n"},{"tags":[],"owner":{"account_id":1781872,"reputation":14665,"user_id":1624376,"accept_rate":76,"display_name":"Aubin"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1418043246,"creation_date":1363630340,"answer_id":15483907,"question_id":15483844,"body_markdown":"Use [java.net.URL.getFile()][1]\r\n\r\n    String path = new URL( request.getHeader( &quot;referer&quot; )).getPath();\r\n    int sep = path.lastIndexOf( &#39;/&#39; );\r\n    return ( sep &lt; 0 ) ? path : path.substring( sep + 1 );\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/net/URL.html#getFile%28%29\r\n","title":"Getting the last part of the referrer url","body":"<p>Use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/net/URL.html#getFile%28%29\" rel=\"nofollow\">java.net.URL.getFile()</a></p>\n\n<pre><code>String path = new URL( request.getHeader( \"referer\" )).getPath();\nint sep = path.lastIndexOf( '/' );\nreturn ( sep &lt; 0 ) ? path : path.substring( sep + 1 );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":65096,"reputation":15637,"user_id":191797,"accept_rate":100,"display_name":"Piyush Mattoo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1363630359,"creation_date":1363630359,"answer_id":15483911,"question_id":15483844,"body_markdown":"Just get the substring after the last `/` occurence.","title":"Getting the last part of the referrer url","body":"<p>Just get the substring after the last <code>/</code> occurence.</p>\n"},{"tags":[],"owner":{"account_id":1660168,"reputation":4242,"user_id":1528610,"accept_rate":51,"display_name":"VishalDevgire"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1648063987,"creation_date":1363630492,"answer_id":15483952,"question_id":15483844,"body_markdown":"This will give you XYZ.html : \r\n\r\n    String url = &quot;http://localhost:8080/TEST/XYZ.html&quot;;\r\n    url = url.substring(url.lastIndexOf(&quot;/&quot;) + 1);","title":"Getting the last part of the referrer url","body":"<p>This will give you XYZ.html :</p>\n<pre><code>String url = &quot;http://localhost:8080/TEST/XYZ.html&quot;;\nurl = url.substring(url.lastIndexOf(&quot;/&quot;) + 1);\n</code></pre>\n"}],"owner":{"account_id":1563127,"reputation":2008,"user_id":1452542,"accept_rate":85,"display_name":"AustinT"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10891,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1430944191,"accepted_answer_id":15483952,"answer_count":4,"score":1,"last_activity_date":1648063987,"creation_date":1363630138,"question_id":15483844,"body_markdown":"&lt;br&gt;\r\nI wanted to get the last part of the referrer URL. How would be the best way to obtain this information? &lt;br&gt; \r\n&lt;br&gt;\r\n\r\n    String referrer = request.getHeader(&quot;referer&quot;);\r\nCurrently this is how I am getting the referrer URL. This is giving me the entire URL, but I only want part of the URL.\r\n\r\n\r\n&lt;br&gt;\r\n**For Example:** Requested URL: `http://localhost:8080/TEST/ABC.html` &lt;br&gt;\r\nIf this is the referrer URL, I only want the `ABC.html`. \r\n\r\nThank you for the assistance, please let me know if there are any misunderstandings to my question.","title":"Getting the last part of the referrer url","body":"<p><br>\nI wanted to get the last part of the referrer URL. How would be the best way to obtain this information? <br> \n<br></p>\n\n<pre><code>String referrer = request.getHeader(\"referer\");\n</code></pre>\n\n<p>Currently this is how I am getting the referrer URL. This is giving me the entire URL, but I only want part of the URL.</p>\n\n<p><br>\n<strong>For Example:</strong> Requested URL: <code>http://localhost:8080/TEST/ABC.html</code> <br>\nIf this is the referrer URL, I only want the <code>ABC.html</code>. </p>\n\n<p>Thank you for the assistance, please let me know if there are any misunderstandings to my question.</p>\n"},{"tags":["java","buffer","byte"],"answers":[{"tags":[],"owner":{"account_id":25027,"reputation":9018,"user_id":64044,"display_name":"Clint"},"down_vote_count":0,"up_vote_count":125,"is_accepted":true,"score":125,"last_activity_date":1397036077,"creation_date":1237503858,"answer_id":664394,"question_id":664389,"body_markdown":"Try [`ByteArrayOutputStream`][1].  You can use `write( byte[] )` and it will grow as needed.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html","title":"Byte array of unknown length in java","body":"<p>Try <a href=\"http://java.sun.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html\" rel=\"noreferrer\"><code>ByteArrayOutputStream</code></a>.  You can use <code>write( byte[] )</code> and it will grow as needed.</p>\n"},{"tags":[],"owner":{"account_id":1111321,"reputation":8799,"user_id":1101730,"accept_rate":78,"display_name":"Micer"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1380367632,"creation_date":1380367632,"answer_id":19066417,"question_id":664389,"body_markdown":"Just to extend the previous answer, you can use [ByteArrayOutputStream][1] and it&#39;s method `public void write(byte[] b, int off, int len)`, where parameters are:\n\n&gt; b - the data\n&gt;\n&gt; off - the start offset in the data\n&gt;\n&gt; len - the number of bytes to write\n\nIf you want to use it as a &quot;byte builder&quot; and insert byte by byte, you can use this:\n\n    byte byteToInsert = 100;\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    baos.write(new byte[]{byteToInsert}, 0, 1);\n    \nThen you can use `baos.toString()` method to convert the array to string. The advantage is when you need to set up encoding of input, you can simply use i.e.:\n\n    baos.toString(&quot;Windows-1250&quot;)\n\n\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html","title":"Byte array of unknown length in java","body":"<p>Just to extend the previous answer, you can use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html\" rel=\"noreferrer\">ByteArrayOutputStream</a> and it's method <code>public void write(byte[] b, int off, int len)</code>, where parameters are:</p>\n<blockquote>\n<p>b - the data</p>\n<p>off - the start offset in the data</p>\n<p>len - the number of bytes to write</p>\n</blockquote>\n<p>If you want to use it as a &quot;byte builder&quot; and insert byte by byte, you can use this:</p>\n<pre><code>byte byteToInsert = 100;\nByteArrayOutputStream baos = new ByteArrayOutputStream();\nbaos.write(new byte[]{byteToInsert}, 0, 1);\n</code></pre>\n<p>Then you can use <code>baos.toString()</code> method to convert the array to string. The advantage is when you need to set up encoding of input, you can simply use i.e.:</p>\n<pre><code>baos.toString(&quot;Windows-1250&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3432851,"reputation":1818,"user_id":2876739,"display_name":"RickHigh"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1382268677,"creation_date":1382268144,"answer_id":19476769,"question_id":664389,"body_markdown":"Let&#39;s see. There is the ByteBuffer class in Java.\r\n\r\nhttp://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html\r\n\r\n\r\nIt has bulk methods that transfer contiguous sequences of bytes from a byte array to hardware buffers. It would do the trick.\r\n\r\nIt also has absolute and relative get and put methods that read and write byte[]s and other primitives to / for the byte buffer.\r\n\r\nIt also has methods for compacting, duplicating, and slicing a byte buffer.\r\n\r\n    // Creates an empty ByteBuffer with a 1024 byte capacity\r\n    ByteBuffer buf = ByteBuffer.allocate(1024);\r\n\r\n    // Get the buffer&#39;s capacity\r\n    int capacity = buf.capacity(); // 10\r\n\r\n    buf.put((byte)0xAA); // position=0\r\n\r\n    // Set the position\r\n    buf.position(500);\r\n\r\n    buf.put((byte)0xFF);\r\n\r\n    // Read the position 501\r\n    int pos = buf.position(); \r\n\r\n    // Get remaining byte count\r\n    int remaining = buf.remaining(); (capacity - position)\r\n\r\nIt also has a bulk put to put an array, which is pretty close to the append you were asking for:\r\n\r\n    public final ByteBuffer put(byte[] src)\r\n\r\nSee:\r\nhttp://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html#put(byte[])\r\n\r\n\r\nI wrote my own little lib for manipulating byte arrays. :)\r\n\r\nYou can add them like so\r\n\r\n    byte [] a = ...\r\n    byte [] b = ...\r\n    byte [] c = ...\r\n\r\n    a = add(a, b);\r\n    a = add(a, c);\r\n\r\nthis would give you all of the contents of b, and c after the contents for a.\r\n\r\n\r\nIf you wanted to grow a by 21, you could do the following:\r\n\r\n    a = grow( letters,  21);\r\n\r\nIf you wanted to double the size of a, you could do the following:\r\n\r\n    a = grow( letters,  21);\r\n\r\n\r\n\r\nSee...\r\n\r\nhttps://github.com/RichardHightower/boon/blob/master/src/main/java/org/boon/core/primitive/Byt.java\r\n\r\n\r\n        byte[] letters =\r\n                arrayOfByte(500);\r\n\r\n        assertEquals(\r\n                500,\r\n                len(letters)\r\n        );\r\n\r\n\r\nCreate\r\n\r\n        byte[] letters =\r\n                array((byte)0, (byte)1, (byte)2, (byte)3);\r\n\r\n        assertEquals(\r\n                4,\r\n                len(letters)\r\n        );\r\n\r\nIndex\r\n\r\n\r\n        byte[] letters =\r\n                array((byte)&#39;a&#39;, (byte)&#39;b&#39;, (byte)&#39;c&#39;, (byte)&#39;d&#39;);\r\n\r\n        assertEquals(\r\n                &#39;a&#39;,\r\n                idx(letters, 0)\r\n        );\r\n\r\n\r\n        assertEquals(\r\n                &#39;d&#39;,\r\n                idx(letters, -1)\r\n        );\r\n\r\n\r\n        assertEquals(\r\n                &#39;d&#39;,\r\n                idx(letters, letters.length - 1)\r\n        );\r\n\r\n\r\n        idx(letters, 1, (byte)&#39;z&#39;);\r\n\r\n        assertEquals(\r\n                (byte)&#39;z&#39;,\r\n                idx(letters, 1)\r\n        );\r\n\r\n\r\n\r\nContains\r\n\r\n\r\n        byte[] letters =\r\n                array((byte)&#39;a&#39;,(byte) &#39;b&#39;, (byte)&#39;c&#39;, (byte)&#39;d&#39;);\r\n\r\n\r\n        assertTrue(\r\n                in((byte)&#39;a&#39;, letters)\r\n        );\r\n\r\n        assertFalse(\r\n                in((byte)&#39;z&#39;, letters)\r\n        );\r\n\r\n\r\nSlice:\r\n\r\n        byte[] letters =\r\n                array((byte)&#39;a&#39;, (byte)&#39;b&#39;, (byte)&#39;c&#39;, (byte)&#39;d&#39;);\r\n\r\n\r\n        assertArrayEquals(\r\n                array((byte)&#39;a&#39;, (byte)&#39;b&#39;),\r\n                slc(letters, 0, 2)\r\n        );\r\n\r\n        assertArrayEquals(\r\n                array((byte)&#39;b&#39;, (byte)&#39;c&#39;),\r\n                slc(letters, 1, -1)\r\n        );\r\n\r\n        //&gt;&gt;&gt; letters[2:]\r\n        //[&#39;c&#39;, &#39;d&#39;]\r\n        //&gt;&gt;&gt; letters[-2:]\r\n        //[&#39;c&#39;, &#39;d&#39;]\r\n\r\n        assertArrayEquals(\r\n                array((byte)&#39;c&#39;, (byte)&#39;d&#39;),\r\n                slc(letters, -2)\r\n        );\r\n\r\n\r\n        assertArrayEquals(\r\n                array((byte)&#39;c&#39;, (byte)&#39;d&#39;),\r\n                slc(letters, 2)\r\n        );\r\n\r\n\r\n        //&gt;&gt;&gt; letters[:-2]\r\n        //     [&#39;a&#39;, &#39;b&#39;]\r\n        assertArrayEquals(\r\n                array((byte)&#39;a&#39;, (byte)&#39;b&#39;),\r\n                slcEnd(letters, -2)\r\n        );\r\n\r\n\r\n        //&gt;&gt;&gt; letters[:-2]\r\n        //     [&#39;a&#39;, &#39;b&#39;]\r\n        assertArrayEquals(\r\n                array((byte)&#39;a&#39;,(byte) &#39;b&#39;),\r\n                slcEnd(letters, 2)\r\n        );\r\n\r\nGrow\r\n\r\n        byte[] letters =\r\n                array((byte)&#39;a&#39;, (byte)&#39;b&#39;, (byte)&#39;c&#39;, (byte)&#39;d&#39;, (byte)&#39;e&#39;);\r\n\r\n        letters = grow( letters,  21);\r\n\r\n\r\n        assertEquals(\r\n                &#39;e&#39;,\r\n                idx(letters, 4)\r\n        );\r\n\r\n\r\n        assertEquals(\r\n                &#39;a&#39;,\r\n                idx(letters, 0)\r\n        );\r\n\r\n\r\n\r\n\r\n        assertEquals(\r\n                len(letters),\r\n                26\r\n        );\r\n\r\n\r\n        assertEquals(\r\n                &#39;\\0&#39;,\r\n                idx(letters, 20)\r\n        );\r\n\r\n\r\nShrink:\r\n\r\n        letters =  shrink ( letters, 23 );\r\n\r\n        assertArrayEquals(\r\n                array((byte)&#39;a&#39;, (byte)&#39;b&#39;, (byte)&#39;c&#39;),\r\n                letters\r\n\r\n        );\r\n\r\n\r\nCopy:\r\n\r\n        assertArrayEquals(\r\n                array((byte)&#39;a&#39;, (byte)&#39;b&#39;, (byte)&#39;c&#39;, (byte)&#39;d&#39;, (byte)&#39;e&#39;),\r\n                copy(array((byte)&#39;a&#39;, (byte)&#39;b&#39;, (byte)&#39;c&#39;, (byte)&#39;d&#39;, (byte)&#39;e&#39;))\r\n\r\n        );\r\n\r\nAdd:\r\n\r\n\r\n        assertArrayEquals(\r\n                array((byte)&#39;a&#39;, (byte)&#39;b&#39;, (byte)&#39;c&#39;, (byte)&#39;d&#39;, (byte)&#39;e&#39;, (byte)&#39;f&#39;),\r\n                add(array((byte)&#39;a&#39;, (byte)&#39;b&#39;, (byte)&#39;c&#39;, (byte)&#39;d&#39;, (byte)&#39;e&#39;), (byte)&#39;f&#39;) );\r\n\r\nThe add actually adds them together by using System.arraycopy (considering Unsafe, but not yet).\r\n\r\nAdd one array to another:\r\n\r\n        assertArrayEquals(\r\n                array(     (byte)&#39;a&#39;, (byte)&#39;b&#39;, (byte)&#39;c&#39;, (byte)&#39;d&#39;, (byte)&#39;e&#39;, (byte)&#39;f&#39;),\r\n                add( array((byte)&#39;a&#39;, (byte)&#39;b&#39;, (byte)&#39;c&#39;, (byte)&#39;d&#39;), array((byte)&#39;e&#39;, (byte)&#39;f&#39;) )\r\n\r\n        );\r\n\r\nInsert:\r\n\r\n        assertArrayEquals(\r\n                array((byte)&#39;a&#39;, (byte)&#39;b&#39;, (byte)&#39;c&#39;, (byte)&#39;d&#39;, (byte)&#39;e&#39;, (byte)&#39;f&#39;, (byte)&#39;g&#39;),\r\n                insert( array((byte)&#39;a&#39;, (byte)&#39;b&#39;, (byte)&#39;d&#39;, (byte)&#39;e&#39;, (byte)&#39;f&#39;, (byte)&#39;g&#39;), 2, (byte)&#39;c&#39; )\r\n\r\n        );\r\n\r\n        assertArrayEquals(\r\n                array((byte)&#39;a&#39;, (byte)&#39;b&#39;, (byte)&#39;c&#39;, (byte)&#39;d&#39;, (byte)&#39;e&#39;, (byte)&#39;f&#39;, (byte)&#39;g&#39;),\r\n                insert( array((byte)&#39;b&#39;, (byte)&#39;c&#39;, (byte)&#39;d&#39;, (byte)&#39;e&#39;, (byte)&#39;f&#39;, (byte)&#39;g&#39;), 0, (byte)&#39;a&#39; )\r\n\r\n        );\r\n\r\n        assertArrayEquals(\r\n                array((byte)&#39;a&#39;, (byte)&#39;b&#39;, (byte)&#39;c&#39;, (byte)&#39;d&#39;, (byte)&#39;e&#39;, (byte)&#39;f&#39;, (byte)&#39;g&#39;),\r\n                insert( array((byte)&#39;a&#39;, (byte)&#39;b&#39;, (byte)&#39;c&#39;, (byte)&#39;d&#39;, (byte)&#39;e&#39;, (byte)&#39;g&#39;), 5, (byte)&#39;f&#39; )\r\n\r\n        );\r\n\r\n\r\nHere is a peek at a few of the methods:\r\n\r\n    public static byte[] grow(byte [] array, final int size) {\r\n        Objects.requireNonNull(array);\r\n\r\n        byte [] newArray  = new byte[array.length + size];\r\n        System.arraycopy(array, 0, newArray, 0, array.length);\r\n        return newArray;\r\n    }\r\n\r\n\r\n\r\n    public static byte[] grow(byte [] array) {\r\n        Objects.requireNonNull(array);\r\n\r\n        byte [] newArray  = new byte[array.length *2];\r\n        System.arraycopy(array, 0, newArray, 0, array.length);\r\n        return newArray;\r\n    }\r\n\r\n\r\n    public static byte[] shrink(byte[] array, int size) {\r\n        Objects.requireNonNull(array);\r\n\r\n        byte[] newArray = new byte[array.length - size];\r\n\r\n        System.arraycopy(array, 0, newArray, 0, array.length-size);\r\n        return newArray;\r\n    }\r\n\r\n\r\n\r\n\r\n    public static byte[] copy(byte[] array) {\r\n        Objects.requireNonNull(array);\r\n        byte[] newArray = new byte[array.length];\r\n        System.arraycopy(array, 0, newArray, 0, array.length);\r\n        return newArray;\r\n    }\r\n\r\n\r\n    public static byte[] add(byte[] array, byte v) {\r\n        Objects.requireNonNull(array);\r\n        byte[] newArray = new byte[array.length + 1];\r\n        System.arraycopy(array, 0, newArray, 0, array.length);\r\n        newArray[array.length] = v;\r\n        return newArray;\r\n    }\r\n\r\n    public static byte[] add(byte[] array, byte[] array2) {\r\n        Objects.requireNonNull(array);\r\n        byte[] newArray = new byte[array.length + array2.length];\r\n        System.arraycopy(array, 0, newArray, 0, array.length);\r\n        System.arraycopy(array2, 0, newArray, array.length, array2.length);\r\n        return newArray;\r\n    }\r\n\r\n\r\n\r\n    public static byte[] insert(final byte[] array, final int idx, final byte v) {\r\n        Objects.requireNonNull(array);\r\n\r\n        if (idx &gt;= array.length) {\r\n            return add(array, v);\r\n        }\r\n\r\n        final int index = calculateIndex(array, idx);\r\n\r\n        //Object newArray = Array.newInstance(array.getClass().getComponentType(), array.length+1);\r\n        byte [] newArray = new byte[array.length+1];\r\n\r\n        if (index != 0) {\r\n            /* Copy up to the location in the array before the index. */\r\n            /*                 src     sbegin  dst       dbegin   length of copy */\r\n            System.arraycopy( array,   0,      newArray, 0,       index );\r\n        }\r\n\r\n\r\n        boolean lastIndex = index == array.length -1;\r\n        int remainingIndex = array.length - index;\r\n\r\n        if (lastIndex ) {\r\n            /* Copy the area after the insert. Make sure we don&#39;t write over the end. */\r\n            /*                 src  sbegin   dst       dbegin     length of copy */\r\n            System.arraycopy(array, index,   newArray, index + 1, remainingIndex );\r\n\r\n        } else {\r\n            /* Copy the area after the insert.  */\r\n            /*                 src  sbegin   dst       dbegin     length of copy */\r\n            System.arraycopy(array, index,   newArray, index + 1, remainingIndex );\r\n\r\n        }\r\n\r\n        newArray[index] = v;\r\n        return  newArray;\r\n    }\r\n\r\n\r\n    public static byte[] insert(final byte[] array, final int fromIndex, final byte[] values) {\r\n        Objects.requireNonNull(array);\r\n\r\n        if (fromIndex &gt;= array.length) {\r\n            return add(array, values);\r\n        }\r\n\r\n        final int index = calculateIndex(array, fromIndex);\r\n\r\n        //Object newArray = Array.newInstance(array.getClass().getComponentType(), array.length+1);\r\n        byte [] newArray = new byte[array.length +  values.length];\r\n\r\n        if (index != 0) {\r\n            /* Copy up to the location in the array before the index. */\r\n            /*                 src     sbegin  dst       dbegin   length of copy */\r\n            System.arraycopy( array,   0,      newArray, 0,       index );\r\n        }\r\n\r\n\r\n        boolean lastIndex = index == array.length -1;\r\n\r\n        int toIndex = index + values.length;\r\n        int remainingIndex = newArray.length - toIndex;\r\n\r\n        if (lastIndex ) {\r\n            /* Copy the area after the insert. Make sure we don&#39;t write over the end. */\r\n            /*                 src  sbegin   dst       dbegin     length of copy */\r\n            System.arraycopy(array, index,   newArray, index + values.length, remainingIndex );\r\n\r\n        } else {\r\n            /* Copy the area after the insert.  */\r\n            /*                 src  sbegin   dst       dbegin     length of copy */\r\n            System.arraycopy(array, index,   newArray, index + values.length, remainingIndex );\r\n\r\n        }\r\n\r\n        for (int i = index, j=0; i &lt; toIndex; i++, j++) {\r\n            newArray[ i ] = values[ j ];\r\n        }\r\n        return  newArray;\r\n    }\r\n\r\nMore....\r\n","title":"Byte array of unknown length in java","body":"<p>Let's see. There is the ByteBuffer class in Java.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html</a></p>\n\n<p>It has bulk methods that transfer contiguous sequences of bytes from a byte array to hardware buffers. It would do the trick.</p>\n\n<p>It also has absolute and relative get and put methods that read and write byte[]s and other primitives to / for the byte buffer.</p>\n\n<p>It also has methods for compacting, duplicating, and slicing a byte buffer.</p>\n\n<pre><code>// Creates an empty ByteBuffer with a 1024 byte capacity\nByteBuffer buf = ByteBuffer.allocate(1024);\n\n// Get the buffer's capacity\nint capacity = buf.capacity(); // 10\n\nbuf.put((byte)0xAA); // position=0\n\n// Set the position\nbuf.position(500);\n\nbuf.put((byte)0xFF);\n\n// Read the position 501\nint pos = buf.position(); \n\n// Get remaining byte count\nint remaining = buf.remaining(); (capacity - position)\n</code></pre>\n\n<p>It also has a bulk put to put an array, which is pretty close to the append you were asking for:</p>\n\n<pre><code>public final ByteBuffer put(byte[] src)\n</code></pre>\n\n<p>See:\nhttp://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html#put(byte[])</p>\n\n<p>I wrote my own little lib for manipulating byte arrays. :)</p>\n\n<p>You can add them like so</p>\n\n<pre><code>byte [] a = ...\nbyte [] b = ...\nbyte [] c = ...\n\na = add(a, b);\na = add(a, c);\n</code></pre>\n\n<p>this would give you all of the contents of b, and c after the contents for a.</p>\n\n<p>If you wanted to grow a by 21, you could do the following:</p>\n\n<pre><code>a = grow( letters,  21);\n</code></pre>\n\n<p>If you wanted to double the size of a, you could do the following:</p>\n\n<pre><code>a = grow( letters,  21);\n</code></pre>\n\n<p>See...</p>\n\n<p><a href=\"https://github.com/RichardHightower/boon/blob/master/src/main/java/org/boon/core/primitive/Byt.java\" rel=\"nofollow\">https://github.com/RichardHightower/boon/blob/master/src/main/java/org/boon/core/primitive/Byt.java</a></p>\n\n<pre><code>    byte[] letters =\n            arrayOfByte(500);\n\n    assertEquals(\n            500,\n            len(letters)\n    );\n</code></pre>\n\n<p>Create</p>\n\n<pre><code>    byte[] letters =\n            array((byte)0, (byte)1, (byte)2, (byte)3);\n\n    assertEquals(\n            4,\n            len(letters)\n    );\n</code></pre>\n\n<p>Index</p>\n\n<pre><code>    byte[] letters =\n            array((byte)'a', (byte)'b', (byte)'c', (byte)'d');\n\n    assertEquals(\n            'a',\n            idx(letters, 0)\n    );\n\n\n    assertEquals(\n            'd',\n            idx(letters, -1)\n    );\n\n\n    assertEquals(\n            'd',\n            idx(letters, letters.length - 1)\n    );\n\n\n    idx(letters, 1, (byte)'z');\n\n    assertEquals(\n            (byte)'z',\n            idx(letters, 1)\n    );\n</code></pre>\n\n<p>Contains</p>\n\n<pre><code>    byte[] letters =\n            array((byte)'a',(byte) 'b', (byte)'c', (byte)'d');\n\n\n    assertTrue(\n            in((byte)'a', letters)\n    );\n\n    assertFalse(\n            in((byte)'z', letters)\n    );\n</code></pre>\n\n<p>Slice:</p>\n\n<pre><code>    byte[] letters =\n            array((byte)'a', (byte)'b', (byte)'c', (byte)'d');\n\n\n    assertArrayEquals(\n            array((byte)'a', (byte)'b'),\n            slc(letters, 0, 2)\n    );\n\n    assertArrayEquals(\n            array((byte)'b', (byte)'c'),\n            slc(letters, 1, -1)\n    );\n\n    //&gt;&gt;&gt; letters[2:]\n    //['c', 'd']\n    //&gt;&gt;&gt; letters[-2:]\n    //['c', 'd']\n\n    assertArrayEquals(\n            array((byte)'c', (byte)'d'),\n            slc(letters, -2)\n    );\n\n\n    assertArrayEquals(\n            array((byte)'c', (byte)'d'),\n            slc(letters, 2)\n    );\n\n\n    //&gt;&gt;&gt; letters[:-2]\n    //     ['a', 'b']\n    assertArrayEquals(\n            array((byte)'a', (byte)'b'),\n            slcEnd(letters, -2)\n    );\n\n\n    //&gt;&gt;&gt; letters[:-2]\n    //     ['a', 'b']\n    assertArrayEquals(\n            array((byte)'a',(byte) 'b'),\n            slcEnd(letters, 2)\n    );\n</code></pre>\n\n<p>Grow</p>\n\n<pre><code>    byte[] letters =\n            array((byte)'a', (byte)'b', (byte)'c', (byte)'d', (byte)'e');\n\n    letters = grow( letters,  21);\n\n\n    assertEquals(\n            'e',\n            idx(letters, 4)\n    );\n\n\n    assertEquals(\n            'a',\n            idx(letters, 0)\n    );\n\n\n\n\n    assertEquals(\n            len(letters),\n            26\n    );\n\n\n    assertEquals(\n            '\\0',\n            idx(letters, 20)\n    );\n</code></pre>\n\n<p>Shrink:</p>\n\n<pre><code>    letters =  shrink ( letters, 23 );\n\n    assertArrayEquals(\n            array((byte)'a', (byte)'b', (byte)'c'),\n            letters\n\n    );\n</code></pre>\n\n<p>Copy:</p>\n\n<pre><code>    assertArrayEquals(\n            array((byte)'a', (byte)'b', (byte)'c', (byte)'d', (byte)'e'),\n            copy(array((byte)'a', (byte)'b', (byte)'c', (byte)'d', (byte)'e'))\n\n    );\n</code></pre>\n\n<p>Add:</p>\n\n<pre><code>    assertArrayEquals(\n            array((byte)'a', (byte)'b', (byte)'c', (byte)'d', (byte)'e', (byte)'f'),\n            add(array((byte)'a', (byte)'b', (byte)'c', (byte)'d', (byte)'e'), (byte)'f') );\n</code></pre>\n\n<p>The add actually adds them together by using System.arraycopy (considering Unsafe, but not yet).</p>\n\n<p>Add one array to another:</p>\n\n<pre><code>    assertArrayEquals(\n            array(     (byte)'a', (byte)'b', (byte)'c', (byte)'d', (byte)'e', (byte)'f'),\n            add( array((byte)'a', (byte)'b', (byte)'c', (byte)'d'), array((byte)'e', (byte)'f') )\n\n    );\n</code></pre>\n\n<p>Insert:</p>\n\n<pre><code>    assertArrayEquals(\n            array((byte)'a', (byte)'b', (byte)'c', (byte)'d', (byte)'e', (byte)'f', (byte)'g'),\n            insert( array((byte)'a', (byte)'b', (byte)'d', (byte)'e', (byte)'f', (byte)'g'), 2, (byte)'c' )\n\n    );\n\n    assertArrayEquals(\n            array((byte)'a', (byte)'b', (byte)'c', (byte)'d', (byte)'e', (byte)'f', (byte)'g'),\n            insert( array((byte)'b', (byte)'c', (byte)'d', (byte)'e', (byte)'f', (byte)'g'), 0, (byte)'a' )\n\n    );\n\n    assertArrayEquals(\n            array((byte)'a', (byte)'b', (byte)'c', (byte)'d', (byte)'e', (byte)'f', (byte)'g'),\n            insert( array((byte)'a', (byte)'b', (byte)'c', (byte)'d', (byte)'e', (byte)'g'), 5, (byte)'f' )\n\n    );\n</code></pre>\n\n<p>Here is a peek at a few of the methods:</p>\n\n<pre><code>public static byte[] grow(byte [] array, final int size) {\n    Objects.requireNonNull(array);\n\n    byte [] newArray  = new byte[array.length + size];\n    System.arraycopy(array, 0, newArray, 0, array.length);\n    return newArray;\n}\n\n\n\npublic static byte[] grow(byte [] array) {\n    Objects.requireNonNull(array);\n\n    byte [] newArray  = new byte[array.length *2];\n    System.arraycopy(array, 0, newArray, 0, array.length);\n    return newArray;\n}\n\n\npublic static byte[] shrink(byte[] array, int size) {\n    Objects.requireNonNull(array);\n\n    byte[] newArray = new byte[array.length - size];\n\n    System.arraycopy(array, 0, newArray, 0, array.length-size);\n    return newArray;\n}\n\n\n\n\npublic static byte[] copy(byte[] array) {\n    Objects.requireNonNull(array);\n    byte[] newArray = new byte[array.length];\n    System.arraycopy(array, 0, newArray, 0, array.length);\n    return newArray;\n}\n\n\npublic static byte[] add(byte[] array, byte v) {\n    Objects.requireNonNull(array);\n    byte[] newArray = new byte[array.length + 1];\n    System.arraycopy(array, 0, newArray, 0, array.length);\n    newArray[array.length] = v;\n    return newArray;\n}\n\npublic static byte[] add(byte[] array, byte[] array2) {\n    Objects.requireNonNull(array);\n    byte[] newArray = new byte[array.length + array2.length];\n    System.arraycopy(array, 0, newArray, 0, array.length);\n    System.arraycopy(array2, 0, newArray, array.length, array2.length);\n    return newArray;\n}\n\n\n\npublic static byte[] insert(final byte[] array, final int idx, final byte v) {\n    Objects.requireNonNull(array);\n\n    if (idx &gt;= array.length) {\n        return add(array, v);\n    }\n\n    final int index = calculateIndex(array, idx);\n\n    //Object newArray = Array.newInstance(array.getClass().getComponentType(), array.length+1);\n    byte [] newArray = new byte[array.length+1];\n\n    if (index != 0) {\n        /* Copy up to the location in the array before the index. */\n        /*                 src     sbegin  dst       dbegin   length of copy */\n        System.arraycopy( array,   0,      newArray, 0,       index );\n    }\n\n\n    boolean lastIndex = index == array.length -1;\n    int remainingIndex = array.length - index;\n\n    if (lastIndex ) {\n        /* Copy the area after the insert. Make sure we don't write over the end. */\n        /*                 src  sbegin   dst       dbegin     length of copy */\n        System.arraycopy(array, index,   newArray, index + 1, remainingIndex );\n\n    } else {\n        /* Copy the area after the insert.  */\n        /*                 src  sbegin   dst       dbegin     length of copy */\n        System.arraycopy(array, index,   newArray, index + 1, remainingIndex );\n\n    }\n\n    newArray[index] = v;\n    return  newArray;\n}\n\n\npublic static byte[] insert(final byte[] array, final int fromIndex, final byte[] values) {\n    Objects.requireNonNull(array);\n\n    if (fromIndex &gt;= array.length) {\n        return add(array, values);\n    }\n\n    final int index = calculateIndex(array, fromIndex);\n\n    //Object newArray = Array.newInstance(array.getClass().getComponentType(), array.length+1);\n    byte [] newArray = new byte[array.length +  values.length];\n\n    if (index != 0) {\n        /* Copy up to the location in the array before the index. */\n        /*                 src     sbegin  dst       dbegin   length of copy */\n        System.arraycopy( array,   0,      newArray, 0,       index );\n    }\n\n\n    boolean lastIndex = index == array.length -1;\n\n    int toIndex = index + values.length;\n    int remainingIndex = newArray.length - toIndex;\n\n    if (lastIndex ) {\n        /* Copy the area after the insert. Make sure we don't write over the end. */\n        /*                 src  sbegin   dst       dbegin     length of copy */\n        System.arraycopy(array, index,   newArray, index + values.length, remainingIndex );\n\n    } else {\n        /* Copy the area after the insert.  */\n        /*                 src  sbegin   dst       dbegin     length of copy */\n        System.arraycopy(array, index,   newArray, index + values.length, remainingIndex );\n\n    }\n\n    for (int i = index, j=0; i &lt; toIndex; i++, j++) {\n        newArray[ i ] = values[ j ];\n    }\n    return  newArray;\n}\n</code></pre>\n\n<p>More....</p>\n"},{"tags":[],"owner":{"account_id":3432851,"reputation":1818,"user_id":2876739,"display_name":"RickHigh"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1382592067,"creation_date":1382592067,"answer_id":19557576,"question_id":664389,"body_markdown":"I wrote one that is really easy to use and avoids a lot of byte array buffer copying.\r\n\r\nIt has one method called add.\r\n\r\nYou can add strings, bytes, byte, long, int, double, float, short, and chars to it.\r\n\r\nThe API is easy to use and somewhat fail safe. It does not allow you to copy the buffer around and does not promote having two readers. \r\n\r\nIt has a bounds check mode and a I KNOW WHAT I AM DOING MODE with no bounds checking.\r\n\r\nThe bounds check mode auto-grows it so there is no hassle. \r\n\r\n\r\nhttps://github.com/RichardHightower/boon/wiki/Auto-Growable-Byte-Buffer-like-a-ByteBuilder\r\n\r\nHere is a complete step by step guide on how to use it. It is on github.\r\n\r\nJava Boon - Auto Growable Byte Buffer like a ByteBuilder\r\n===\r\n\r\n\r\nHave you ever wanted an easy to use buffer array that grow automatically and/or you can give it a fix size and just add stuff to it? I have. I wrote one too.\r\n\r\n\r\nLook.. I can write strings to it (it converts them to UTF-8).\r\n\r\n        ByteBuf buf = new ByteBuf();\r\n        buf.add(bytes(&quot;0123456789\\n&quot;));\r\n        buf.add(&quot;0123456789\\n&quot;);\r\n        buf.add(&quot;0123456789\\n&quot;);\r\n        buf.add(&quot;0123456789\\n&quot;);\r\n        buf.add(&quot;0123456789\\n&quot;);\r\n        buf.add(&quot;0123456END\\n&quot;);\r\n\r\n\r\n\r\nThen later I can read the String out of the buffer:\r\n\r\n\r\n        String out = new String(buf.readAndReset(), 0, buf.len());\r\n        assertEquals(66, buf.len());\r\n        assertTrue(out.endsWith(&quot;END\\n&quot;));\r\n\r\n\r\nI never have to set the size of the array. It will auto-grow as needed in an efficient manner.\r\n\r\n\r\nIf I know exactly how large my data is going to be than I can save some bounds checking by using **createExact**. \r\n\r\n\r\n        ByteBuf buf = ByteBuf.createExact(66);\r\n        buf.add(bytes(&quot;0123456789\\n&quot;));\r\n        buf.add(&quot;0123456789\\n&quot;);\r\n        buf.add(&quot;0123456789\\n&quot;);\r\n        buf.add(&quot;0123456789\\n&quot;);\r\n        buf.add(&quot;0123456789\\n&quot;);\r\n        buf.add(&quot;0123456END\\n&quot;);\r\n        assertEquals(66, buf.len());\r\n\r\n\r\nIf I use create exact, then I am saying... hey.. I know exactly how big it can grow to and it will never go over this number and if it does...you can hit me over the head with a sack of rocks!\r\n\r\nThe following hits you over the head with a sack of rocks!\r\nTHROWS AN EXCEPTION!!!!\r\n\r\n\r\n        ByteBuf buf = ByteBuf.createExact(22);\r\n        buf.add(bytes(&quot;0123456789\\n&quot;));\r\n        buf.add(&quot;0123456789\\n&quot;);\r\n        buf.add(&quot;0123456789\\n&quot;);\r\n        buf.add(&quot;0123456789\\n&quot;);\r\n        buf.add(&quot;0123456789\\n&quot;);\r\n        buf.add(&quot;0123456END\\n&quot;);\r\n\r\n\r\n**It works with doubles.**\r\n\r\n\r\n        ByteBuf buf = ByteBuf.createExact(8);\r\n\r\n        //add the double\r\n        buf.add(10.0000000000001);\r\n\r\n        byte[] bytes = buf.readAndReset();\r\n        boolean worked = true;\r\n\r\n        worked |= idxDouble(bytes, 0) == 10.0000000000001 || die(&quot;Double worked&quot;);\r\n\r\n\r\n**It works with float.**\r\n\r\n        ByteBuf buf = ByteBuf.createExact(8);\r\n\r\n        //add the float\r\n        buf.add(10.001f);\r\n\r\n        byte[] bytes = buf.readAndReset();\r\n        boolean worked = true;\r\n\r\n        worked |= buf.len() == 4 || die(&quot;Float worked&quot;);\r\n\r\n\r\n        //read the float\r\n        float flt = idxFloat(bytes, 0);\r\n\r\n        worked |= flt == 10.001f || die(&quot;Float worked&quot;);\r\n\r\n\r\n\r\n**It works with int.**\r\n\r\n        ByteBuf buf = ByteBuf.createExact(8);\r\n\r\n        //Add the int to the array\r\n        buf.add(99);\r\n\r\n        byte[] bytes = buf.readAndReset();\r\n        boolean worked = true;\r\n\r\n\r\n        //Read the int back\r\n        int value = idxInt(bytes, 0);\r\n\r\n        worked |= buf.len() == 4 || die(&quot;Int worked length = 4&quot;);\r\n        worked |= value == 99 || die(&quot;Int worked value was 99&quot;);\r\n\r\n\r\n**It works with char.**\r\n\r\n        ByteBuf buf = ByteBuf.createExact(8);\r\n\r\n        //Add the char to the array\r\n        buf.add(&#39;c&#39;);\r\n\r\n        byte[] bytes = buf.readAndReset();\r\n        boolean worked = true;\r\n\r\n\r\n        //Read the char back\r\n        int value = idxChar(bytes, 0);\r\n\r\n        worked |= buf.len() == 2 || die(&quot;char worked length = 4&quot;);\r\n        worked |= value == &#39;c&#39; || die(&quot;char worked value was &#39;c&#39;&quot;);\r\n\r\n\r\n\r\n**It works with short.**\r\n\r\n\r\n        ByteBuf buf = ByteBuf.createExact(8);\r\n\r\n        //Add the short to the array\r\n        buf.add((short)77);\r\n\r\n        byte[] bytes = buf.readAndReset();\r\n        boolean worked = true;\r\n\r\n\r\n        //Read the short back\r\n        int value = idxShort(bytes, 0);\r\n\r\n        worked |= buf.len() == 2 || die(&quot;short worked length = 2&quot;);\r\n        worked |= value == 77 || die(&quot;short worked value was 77&quot;);\r\n\r\n\r\n**It even works with bytes.**\r\n\r\n        ByteBuf buf = ByteBuf.createExact(8);\r\n\r\n        //Add the byte to the array\r\n        buf.add( (byte)33 );\r\n\r\n        byte[] bytes = buf.readAndReset();\r\n        boolean worked = true;\r\n\r\n\r\n        //Read the byte back\r\n        int value = idx(bytes, 0);\r\n\r\n        worked |= buf.len() == 1 || die(&quot;byte worked length = 1&quot;);\r\n        worked |= value == 33 || die(&quot;byte worked value was 33&quot;);\r\n\r\nYou can add all sorts of primitives to your byte array.\r\n\r\n        boolean worked = true;\r\n        ByteBuf buf = ByteBuf.create(1);\r\n\r\n        //Add the various to the array\r\n        buf.add( (byte)  1 );\r\n        buf.add( (short) 2 );\r\n        buf.add( (char)  3 );\r\n        buf.add(         4 );\r\n        buf.add( (float) 5 );\r\n        buf.add( (long)  6 );\r\n        buf.add( (double)7 );\r\n\r\n        worked |= buf.len() == 29 || die(&quot;length = 29&quot;);\r\n\r\n\r\n        byte[] bytes = buf.readAndReset();\r\n\r\n        byte myByte;\r\n        short myShort;\r\n        char myChar;\r\n        int myInt;\r\n        float myFloat;\r\n        long myLong;\r\n        double myDouble;\r\n\r\n\r\nNow we just verify that we can read everything back.\r\n\r\n        myByte    =   idx       ( bytes, 0 );\r\n        myShort   =   idxShort  ( bytes, 1 );\r\n        myChar    =   idxChar   ( bytes, 3 );\r\n        myInt     =   idxInt    ( bytes, 5 );\r\n        myFloat   =   idxFloat  ( bytes, 9 );\r\n        myLong   =    idxLong   ( bytes, 13 );\r\n        myDouble  =   idxDouble ( bytes, 21 );\r\n\r\n        worked |= myByte   == 1 || die(&quot;value was 1&quot;);\r\n        worked |= myShort  == 2 || die(&quot;value was 2&quot;);\r\n        worked |= myChar   == 3 || die(&quot;value was 3&quot;);\r\n        worked |= myInt    == 4 || die(&quot;value was 4&quot;);\r\n        worked |= myFloat  == 5 || die(&quot;value was 5&quot;);\r\n        worked |= myLong   == 6 || die(&quot;value was 6&quot;);\r\n        worked |= myDouble == 7 || die(&quot;value was 7&quot;);\r\n\r\n\r\nOnce you call \r\n\r\n     byte[] bytes = buf.readAndReset() \r\n\r\nthen you are saying that you are done with the ByteBuffer!\r\n\r\nOnce you ask for the bytes, it becomes useless as it sets the internal byte array to nothing.\r\n\r\nWhen you call readAndReset, it is giving you its buffer. Here is my internal state, you can have it, but I am going to set it to null so nobody else uses it.\r\n\r\nIt is ok. Just create another if you are sure only one instance at a time is using the buffer (byte []).\r\n\r\nYou can even use the buffer you were just using as in \r\n\r\n\r\n    ByteBuf buf2 = new ByteBuf.create(bytes); \r\n\r\n\r\nThis is because no buffer gets copied. ByteBuf writes to the buffer you give it.\r\nIf you want another copy to be given to ByteBuf then do this:\r\n\r\n\r\n    ByteBuf buf2 = new ByteBuf.create( copy(bytes) ); \r\n\r\n\r\nThis is boon after all. :) \r\n\r\nCome check out boon. You get the above class and idx, and idxInt and idxLong for free!\r\n\r\nhttps://github.com/RichardHightower/boon/","title":"Byte array of unknown length in java","body":"<p>I wrote one that is really easy to use and avoids a lot of byte array buffer copying.</p>\n\n<p>It has one method called add.</p>\n\n<p>You can add strings, bytes, byte, long, int, double, float, short, and chars to it.</p>\n\n<p>The API is easy to use and somewhat fail safe. It does not allow you to copy the buffer around and does not promote having two readers. </p>\n\n<p>It has a bounds check mode and a I KNOW WHAT I AM DOING MODE with no bounds checking.</p>\n\n<p>The bounds check mode auto-grows it so there is no hassle. </p>\n\n<p><a href=\"https://github.com/RichardHightower/boon/wiki/Auto-Growable-Byte-Buffer-like-a-ByteBuilder\" rel=\"nofollow noreferrer\">https://github.com/RichardHightower/boon/wiki/Auto-Growable-Byte-Buffer-like-a-ByteBuilder</a></p>\n\n<p>Here is a complete step by step guide on how to use it. It is on github.</p>\n\n<h1>Java Boon - Auto Growable Byte Buffer like a ByteBuilder</h1>\n\n<p>Have you ever wanted an easy to use buffer array that grow automatically and/or you can give it a fix size and just add stuff to it? I have. I wrote one too.</p>\n\n<p>Look.. I can write strings to it (it converts them to UTF-8).</p>\n\n<pre><code>    ByteBuf buf = new ByteBuf();\n    buf.add(bytes(\"0123456789\\n\"));\n    buf.add(\"0123456789\\n\");\n    buf.add(\"0123456789\\n\");\n    buf.add(\"0123456789\\n\");\n    buf.add(\"0123456789\\n\");\n    buf.add(\"0123456END\\n\");\n</code></pre>\n\n<p>Then later I can read the String out of the buffer:</p>\n\n<pre><code>    String out = new String(buf.readAndReset(), 0, buf.len());\n    assertEquals(66, buf.len());\n    assertTrue(out.endsWith(\"END\\n\"));\n</code></pre>\n\n<p>I never have to set the size of the array. It will auto-grow as needed in an efficient manner.</p>\n\n<p>If I know exactly how large my data is going to be than I can save some bounds checking by using <strong>createExact</strong>. </p>\n\n<pre><code>    ByteBuf buf = ByteBuf.createExact(66);\n    buf.add(bytes(\"0123456789\\n\"));\n    buf.add(\"0123456789\\n\");\n    buf.add(\"0123456789\\n\");\n    buf.add(\"0123456789\\n\");\n    buf.add(\"0123456789\\n\");\n    buf.add(\"0123456END\\n\");\n    assertEquals(66, buf.len());\n</code></pre>\n\n<p>If I use create exact, then I am saying... hey.. I know exactly how big it can grow to and it will never go over this number and if it does...you can hit me over the head with a sack of rocks!</p>\n\n<p>The following hits you over the head with a sack of rocks!\nTHROWS AN EXCEPTION!!!!</p>\n\n<pre><code>    ByteBuf buf = ByteBuf.createExact(22);\n    buf.add(bytes(\"0123456789\\n\"));\n    buf.add(\"0123456789\\n\");\n    buf.add(\"0123456789\\n\");\n    buf.add(\"0123456789\\n\");\n    buf.add(\"0123456789\\n\");\n    buf.add(\"0123456END\\n\");\n</code></pre>\n\n<p><strong>It works with doubles.</strong></p>\n\n<pre><code>    ByteBuf buf = ByteBuf.createExact(8);\n\n    //add the double\n    buf.add(10.0000000000001);\n\n    byte[] bytes = buf.readAndReset();\n    boolean worked = true;\n\n    worked |= idxDouble(bytes, 0) == 10.0000000000001 || die(\"Double worked\");\n</code></pre>\n\n<p><strong>It works with float.</strong></p>\n\n<pre><code>    ByteBuf buf = ByteBuf.createExact(8);\n\n    //add the float\n    buf.add(10.001f);\n\n    byte[] bytes = buf.readAndReset();\n    boolean worked = true;\n\n    worked |= buf.len() == 4 || die(\"Float worked\");\n\n\n    //read the float\n    float flt = idxFloat(bytes, 0);\n\n    worked |= flt == 10.001f || die(\"Float worked\");\n</code></pre>\n\n<p><strong>It works with int.</strong></p>\n\n<pre><code>    ByteBuf buf = ByteBuf.createExact(8);\n\n    //Add the int to the array\n    buf.add(99);\n\n    byte[] bytes = buf.readAndReset();\n    boolean worked = true;\n\n\n    //Read the int back\n    int value = idxInt(bytes, 0);\n\n    worked |= buf.len() == 4 || die(\"Int worked length = 4\");\n    worked |= value == 99 || die(\"Int worked value was 99\");\n</code></pre>\n\n<p><strong>It works with char.</strong></p>\n\n<pre><code>    ByteBuf buf = ByteBuf.createExact(8);\n\n    //Add the char to the array\n    buf.add('c');\n\n    byte[] bytes = buf.readAndReset();\n    boolean worked = true;\n\n\n    //Read the char back\n    int value = idxChar(bytes, 0);\n\n    worked |= buf.len() == 2 || die(\"char worked length = 4\");\n    worked |= value == 'c' || die(\"char worked value was 'c'\");\n</code></pre>\n\n<p><strong>It works with short.</strong></p>\n\n<pre><code>    ByteBuf buf = ByteBuf.createExact(8);\n\n    //Add the short to the array\n    buf.add((short)77);\n\n    byte[] bytes = buf.readAndReset();\n    boolean worked = true;\n\n\n    //Read the short back\n    int value = idxShort(bytes, 0);\n\n    worked |= buf.len() == 2 || die(\"short worked length = 2\");\n    worked |= value == 77 || die(\"short worked value was 77\");\n</code></pre>\n\n<p><strong>It even works with bytes.</strong></p>\n\n<pre><code>    ByteBuf buf = ByteBuf.createExact(8);\n\n    //Add the byte to the array\n    buf.add( (byte)33 );\n\n    byte[] bytes = buf.readAndReset();\n    boolean worked = true;\n\n\n    //Read the byte back\n    int value = idx(bytes, 0);\n\n    worked |= buf.len() == 1 || die(\"byte worked length = 1\");\n    worked |= value == 33 || die(\"byte worked value was 33\");\n</code></pre>\n\n<p>You can add all sorts of primitives to your byte array.</p>\n\n<pre><code>    boolean worked = true;\n    ByteBuf buf = ByteBuf.create(1);\n\n    //Add the various to the array\n    buf.add( (byte)  1 );\n    buf.add( (short) 2 );\n    buf.add( (char)  3 );\n    buf.add(         4 );\n    buf.add( (float) 5 );\n    buf.add( (long)  6 );\n    buf.add( (double)7 );\n\n    worked |= buf.len() == 29 || die(\"length = 29\");\n\n\n    byte[] bytes = buf.readAndReset();\n\n    byte myByte;\n    short myShort;\n    char myChar;\n    int myInt;\n    float myFloat;\n    long myLong;\n    double myDouble;\n</code></pre>\n\n<p>Now we just verify that we can read everything back.</p>\n\n<pre><code>    myByte    =   idx       ( bytes, 0 );\n    myShort   =   idxShort  ( bytes, 1 );\n    myChar    =   idxChar   ( bytes, 3 );\n    myInt     =   idxInt    ( bytes, 5 );\n    myFloat   =   idxFloat  ( bytes, 9 );\n    myLong   =    idxLong   ( bytes, 13 );\n    myDouble  =   idxDouble ( bytes, 21 );\n\n    worked |= myByte   == 1 || die(\"value was 1\");\n    worked |= myShort  == 2 || die(\"value was 2\");\n    worked |= myChar   == 3 || die(\"value was 3\");\n    worked |= myInt    == 4 || die(\"value was 4\");\n    worked |= myFloat  == 5 || die(\"value was 5\");\n    worked |= myLong   == 6 || die(\"value was 6\");\n    worked |= myDouble == 7 || die(\"value was 7\");\n</code></pre>\n\n<p>Once you call </p>\n\n<pre><code> byte[] bytes = buf.readAndReset() \n</code></pre>\n\n<p>then you are saying that you are done with the ByteBuffer!</p>\n\n<p>Once you ask for the bytes, it becomes useless as it sets the internal byte array to nothing.</p>\n\n<p>When you call readAndReset, it is giving you its buffer. Here is my internal state, you can have it, but I am going to set it to null so nobody else uses it.</p>\n\n<p>It is ok. Just create another if you are sure only one instance at a time is using the buffer (byte []).</p>\n\n<p>You can even use the buffer you were just using as in </p>\n\n<pre><code>ByteBuf buf2 = new ByteBuf.create(bytes); \n</code></pre>\n\n<p>This is because no buffer gets copied. ByteBuf writes to the buffer you give it.\nIf you want another copy to be given to ByteBuf then do this:</p>\n\n<pre><code>ByteBuf buf2 = new ByteBuf.create( copy(bytes) ); \n</code></pre>\n\n<p>This is boon after all. :) </p>\n\n<p>Come check out boon. You get the above class and idx, and idxInt and idxLong for free!</p>\n\n<p><a href=\"https://github.com/RichardHightower/boon/\" rel=\"nofollow noreferrer\">https://github.com/RichardHightower/boon/</a></p>\n"}],"owner":{"account_id":17315,"reputation":15891,"user_id":38663,"accept_rate":27,"display_name":"jbu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70725,"favorite_count":0,"down_vote_count":1,"up_vote_count":75,"accepted_answer_id":664394,"answer_count":4,"score":74,"last_activity_date":1648063704,"creation_date":1237503658,"question_id":664389,"body_markdown":"I am constructing an array of bytes in java and I don&#39;t know how long the array will be.  \r\n\r\nI want some tool like Java&#39;s StringBuffer that you can just call .append(byte b) or .append(byte[] buf) and have it buffer all my bytes and return to me a byte[] when I&#39;m done.  Is there a class that does for bytes what StringBuffer does for Strings?  It does not look like the ByteBuffer class is what I&#39;m looking for.\r\n\r\nAnyone have a good solution?\r\n\r\n","title":"Byte array of unknown length in java","body":"<p>I am constructing an array of bytes in java and I don't know how long the array will be.</p>\n<p>I want some tool like Java's StringBuffer that you can just call .append(byte b) or .append(byte[] buf) and have it buffer all my bytes and return to me a byte[] when I'm done.  Is there a class that does for bytes what StringBuffer does for Strings?  It does not look like the ByteBuffer class is what I'm looking for.</p>\n<p>Anyone have a good solution?</p>\n"},{"tags":["java","ejb","wildfly","jndi"],"answers":[{"tags":[],"owner":{"account_id":3877614,"reputation":181,"user_id":6951847,"display_name":"erod"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648063680,"creation_date":1648063680,"answer_id":71592956,"question_id":71589156,"body_markdown":"I&#39;m giving a response, because maybe someone else pass by same situation.\r\n\r\nActually the problem isn&#39;t in jndi configuration, I could comment all code envolved in the connection jndi and error continues, well good hints to me.\r\n\r\nThe project enviroment has dependencies of struts2 and tiles, the problem was in tiles definition, the project has several tiles.xml files one of then used wron version, I&#39;m setting same version in all files and run. \r\n\r\ntiles don&#39;t write in console in info level of logging on the server, well I had hint of tiles error by log server setting put in debug level.\r\n\r\nI hope that you will solved the issue.","title":"How to connect on widfly domain from web client to jndi app in same domain","body":"<p>I'm giving a response, because maybe someone else pass by same situation.</p>\n<p>Actually the problem isn't in jndi configuration, I could comment all code envolved in the connection jndi and error continues, well good hints to me.</p>\n<p>The project enviroment has dependencies of struts2 and tiles, the problem was in tiles definition, the project has several tiles.xml files one of then used wron version, I'm setting same version in all files and run.</p>\n<p>tiles don't write in console in info level of logging on the server, well I had hint of tiles error by log server setting put in debug level.</p>\n<p>I hope that you will solved the issue.</p>\n"}],"owner":{"account_id":3877614,"reputation":181,"user_id":6951847,"display_name":"erod"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1648063680,"creation_date":1648046435,"question_id":71589156,"body_markdown":"I&#39;m having a wildfly domain and I need connect from .war deployed client project to ear inner ejb modulo service deployed too.\r\n\r\nThis domain have two server groups, one is appWeb projects in 8080 port and second servMod in 10080 port, so.\r\n\r\nI have connection from local network with remote lookup to jndi setting.\r\n```\r\nprivate static final String JNDI = &quot;ejb:ServicesProj/ServicesP/Locator!com.mycompany.services.LocatorRemote&quot;;\r\nHashtable&lt;String,String&gt; jndiProperties = new Hashtable&lt;&gt;();\r\njndiProperties.put(Context.INITIAL_CONTEXT_FACTORY, &quot;org.wildfly.naming.client.WildFlyInitialContextFactory&quot;);\r\njndiProperties.put(Context.URL_PKG_PREFIXES, &quot;org.wildfly.naming.client.WildFlyInitialContextFactory&quot;);\r\njndiProperties.put(Context.SECURITY_PRINCIPAL, &quot;userconjndi&quot;);\r\njndiProperties.put(Context.SECURITY_CREDENTIALS, &quot;userCon.dev1&quot;);\r\njndiProperties.put(Context.PROVIDER_URL,&quot;http-remoting://devwflypilot.devcomp.dom:10080&quot;);\r\nContext ctx = new InitialContext(jndiProperties);\r\n\t\t\tObject remoto = ctx.lookup(JNDI);\r\n```\r\n\r\nDetail&#39;s came when I deployed the .war file in webapp server group to comunicate with the same setting.\r\n\r\nI don&#39;t sure if in this case is correct that I used &quot;http-remoting&quot; in the provider url and if JNDI prefix &quot;ejb:&quot;, to connect in same domain server groups to other port","title":"How to connect on widfly domain from web client to jndi app in same domain","body":"<p>I'm having a wildfly domain and I need connect from .war deployed client project to ear inner ejb modulo service deployed too.</p>\n<p>This domain have two server groups, one is appWeb projects in 8080 port and second servMod in 10080 port, so.</p>\n<p>I have connection from local network with remote lookup to jndi setting.</p>\n<pre><code>private static final String JNDI = &quot;ejb:ServicesProj/ServicesP/Locator!com.mycompany.services.LocatorRemote&quot;;\nHashtable&lt;String,String&gt; jndiProperties = new Hashtable&lt;&gt;();\njndiProperties.put(Context.INITIAL_CONTEXT_FACTORY, &quot;org.wildfly.naming.client.WildFlyInitialContextFactory&quot;);\njndiProperties.put(Context.URL_PKG_PREFIXES, &quot;org.wildfly.naming.client.WildFlyInitialContextFactory&quot;);\njndiProperties.put(Context.SECURITY_PRINCIPAL, &quot;userconjndi&quot;);\njndiProperties.put(Context.SECURITY_CREDENTIALS, &quot;userCon.dev1&quot;);\njndiProperties.put(Context.PROVIDER_URL,&quot;http-remoting://devwflypilot.devcomp.dom:10080&quot;);\nContext ctx = new InitialContext(jndiProperties);\n            Object remoto = ctx.lookup(JNDI);\n</code></pre>\n<p>Detail's came when I deployed the .war file in webapp server group to comunicate with the same setting.</p>\n<p>I don't sure if in this case is correct that I used &quot;http-remoting&quot; in the provider url and if JNDI prefix &quot;ejb:&quot;, to connect in same domain server groups to other port</p>\n"},{"tags":["java","networking","server"],"comments":[{"owner":{"account_id":4620081,"reputation":6197,"user_id":3745413,"display_name":"Ron Maupin"},"score":0,"creation_date":1648063762,"post_id":71592927,"comment_id":126532494,"body_markdown":"Is this a residential ISP contract? What are the first two octets of the address configured on the WAN router (not what a web site tells you, but what is actually configured on the router WAN interface)?","body":"Is this a residential ISP contract? What are the first two octets of the address configured on the WAN router (not what a web site tells you, but what is actually configured on the router WAN interface)?"},{"owner":{"account_id":18715810,"reputation":116,"user_id":13644859,"display_name":"TyjameTheNeko"},"score":0,"creation_date":1648064311,"post_id":71592927,"comment_id":126532664,"body_markdown":"@RonMaupin I&#39;m Sorry I have to ask. But where best to find it ? As far I&#39;m aware WAN is what sits directly &#39;above&#39; our LAN. Could I see it via tracert maybe ?","body":"@RonMaupin I&#39;m Sorry I have to ask. But where best to find it ? As far I&#39;m aware WAN is what sits directly &#39;above&#39; our LAN. Could I see it via tracert maybe ?"},{"owner":{"account_id":4620081,"reputation":6197,"user_id":3745413,"display_name":"Ron Maupin"},"score":0,"creation_date":1648064410,"post_id":71592927,"comment_id":126532694,"body_markdown":"Just log into the router to look at the addressing assigned in the router. Is this a residential network?","body":"Just log into the router to look at the addressing assigned in the router. Is this a residential network?"},{"owner":{"account_id":18715810,"reputation":116,"user_id":13644859,"display_name":"TyjameTheNeko"},"score":0,"creation_date":1648064798,"post_id":71592927,"comment_id":126532799,"body_markdown":"@RonMaupin 1) yes it is a residential contract. 2) I think there is the problem. Next to &quot;internet, ipv4&quot; it says &quot;DS-Lite-Tunnel, 1&amp;1 Internet&quot;. It doesn&#39;t display an IP","body":"@RonMaupin 1) yes it is a residential contract. 2) I think there is the problem. Next to &quot;internet, ipv4&quot; it says &quot;DS-Lite-Tunnel, 1&amp;1 Internet&quot;. It doesn&#39;t display an IP"},{"owner":{"account_id":4620081,"reputation":6197,"user_id":3745413,"display_name":"Ron Maupin"},"score":0,"creation_date":1648065036,"post_id":71592927,"comment_id":126532886,"body_markdown":"OK. A residential contract prohibits running services to the public Internet, and specifically, ISPs have long blocked mail services on residential networks for spam control. Also, you will have difficulty trying to do any such thing with DS-Lite because your WAN is really IPv6 to IPv4 on your site. You need to get a business account, or you need to use a hosted service.","body":"OK. A residential contract prohibits running services to the public Internet, and specifically, ISPs have long blocked mail services on residential networks for spam control. Also, you will have difficulty trying to do any such thing with DS-Lite because your WAN is really IPv6 to IPv4 on your site. You need to get a business account, or you need to use a hosted service."},{"owner":{"account_id":18715810,"reputation":116,"user_id":13644859,"display_name":"TyjameTheNeko"},"score":0,"creation_date":1648065916,"post_id":71592927,"comment_id":126533168,"body_markdown":"@RonMaupin Thanks for explaining :) Makes me a bit sad but well :|","body":"@RonMaupin Thanks for explaining :) Makes me a bit sad but well :|"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1648076788,"post_id":71592927,"comment_id":126536151,"body_markdown":"Firstly, there&#39;s no point being shy about your public-facing IP address - it&#39;s... public. If you&#39;re opening ports, they *will* be found by people.\nThe good news is that what you want to do might well be possible. I&#39;ve run all sort of services on domestic LANs. Your port-forwarding might not be set up properly. For instance, for it to work, your service cannot be bound to localhost that resolves to the loopback address of 127.0.0.1. It must be listening on your LAN IP address or 0.0.0.0\nWhat does https://www.whatismyip.com/ say your public address is?","body":"Firstly, there&#39;s no point being shy about your public-facing IP address - it&#39;s... public. If you&#39;re opening ports, they <i>will</i> be found by people. The good news is that what you want to do might well be possible. I&#39;ve run all sort of services on domestic LANs. Your port-forwarding might not be set up properly. For instance, for it to work, your service cannot be bound to localhost that resolves to the loopback address of 127.0.0.1. It must be listening on your LAN IP address or 0.0.0.0 What does <a href=\"https://www.whatismyip.com/\" rel=\"nofollow noreferrer\">whatismyip.com</a> say your public address is?"}],"owner":{"account_id":18715810,"reputation":116,"user_id":13644859,"display_name":"TyjameTheNeko"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1648063536,"creation_date":1648063536,"question_id":71592927,"body_markdown":"so today I&#39;ve tried to install Citadel Email server on a raspberry pi which went ok but unfortunantly I cannot reach it from outside LAN.\r\n\r\nI&#39;ve tried to pinpoint the problem and use scanner tools that look for open ports like these :https://www.whatsmyip.org/port-scanner/\r\n\r\nI&#39;ve verified that my public IP adress is the same as my domain returns. Which indeed it is.\r\n\r\nI&#39;ve checked port forwarding severel times.\r\n\r\nLast but not least I&#39;ve wrote this java code to have a really simple example: \r\n\r\n    package main;\r\n\r\n    import java.io.IOException;\r\n\r\n    public class Main {\r\n\r\n        public static void main(String... args){\r\n            try {\r\n                Server server = new Server(8080);\r\n\r\n                Client client = new Client(8080);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n    package main;\r\n\r\n    import java.io.DataInputStream;\r\n    import java.io.DataOutputStream;\r\n    import java.io.IOException;\r\n    import java.net.ServerSocket;\r\n    import java.net.Socket;\r\n\r\n    public class Server {\r\n\r\n        private boolean stop = false;\r\n\r\n        public Server(int port) throws IOException {\r\n            ServerSocket serverSocket = new ServerSocket(port);\r\n\r\n            Runnable runnable = new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    while(stop == false) {\r\n                        try {\r\n                           Socket socket = serverSocket.accept();\r\n\r\n                            DataOutputStream outputStream = new DataOutputStream(socket.getOutputStream());\r\n                            outputStream.writeUTF(&quot;Hello World!&quot;);\r\n\r\n                            DataInputStream inputStream = new DataInputStream(socket.getInputStream());\r\n                            String input = inputStream.readUTF();\r\n\r\n                            System.out.println(&quot;Client wrote: &quot; + input);\r\n\r\n                            socket.close();\r\n                        } catch (IOException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n\r\n                    try {\r\n                        serverSocket.close();\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            };\r\n\r\n            Thread thread = new Thread(runnable, &quot;server executor&quot;);\r\n            thread.start();\r\n        }\r\n\r\n        public void stop(){\r\n            this.stop = true;\r\n        }\r\n    }\r\n\r\n\r\n    package main;\r\n\r\n    import java.io.DataInputStream;\r\n    import java.io.DataOutputStream;\r\n    import java.io.IOException;\r\n    import java.net.Socket;\r\n\r\n    public class Client {\r\n\r\n        public static final String LOCALHOST = &quot;localhost&quot;;\r\n        public static final String KIRAZUKE = &quot;---&quot;;\r\n        public static final String PUBLIC_IP_4 = &quot;---&quot;;\r\n\r\n        public Client(int port)  {\r\n            try{\r\n                doTest(LOCALHOST, port);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n            try{\r\n                Thread.sleep(2500);\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n            try{\r\n                doTest(KIRAZUKE, port);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n            try{\r\n                Thread.sleep(2500);\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n            try{\r\n                doTest(PUBLIC_IP_4, port);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        private void doTest(String host, int port) throws IOException {\r\n            System.out.println(&quot;Opening to: &quot; + host);\r\n            Socket socket = new Socket(host, port);\r\n\r\n            DataOutputStream outputStream = new DataOutputStream(socket.getOutputStream());\r\n            outputStream.writeUTF(&quot;Hello dear Server ... calling from &quot; + host + &quot; ... over.&quot;);\r\n\r\n            DataInputStream inputStream = new DataInputStream(socket.getInputStream());\r\n            String string = inputStream.readUTF();\r\n\r\n            System.out.println(&quot;Response from server after &quot; + host + &quot; call: &quot; + string);\r\n        }\r\n    }\r\n\r\nSo I&#39;ve replaced the domain name and my public ip with dashes for privacy reasons. But what happens is that when using the localhost connection everything works fine the server prints the text sent by the client and vise versa. While using either the public IP or Domain name it fails due to time out.\r\n\r\nWhat could be reasons that any incoming traffic is blocked altough port forwarding is enabled for the 8080 port (and other ports that I tried) ?\r\n\r\nNote: I&#39;ve also called my ISP, according to them they &quot;don&#39;t block anything&quot;. Additionally I tried port forwarding port 3389 and tried remote desktop to my pi but that also failed.\r\n\r\nThanks in advance :)","title":"Having trouble reaching my PC (or a PI) from outside LAN","body":"<p>so today I've tried to install Citadel Email server on a raspberry pi which went ok but unfortunantly I cannot reach it from outside LAN.</p>\n<p>I've tried to pinpoint the problem and use scanner tools that look for open ports like these :<a href=\"https://www.whatsmyip.org/port-scanner/\" rel=\"nofollow noreferrer\">https://www.whatsmyip.org/port-scanner/</a></p>\n<p>I've verified that my public IP adress is the same as my domain returns. Which indeed it is.</p>\n<p>I've checked port forwarding severel times.</p>\n<p>Last but not least I've wrote this java code to have a really simple example:</p>\n<pre><code>package main;\n\nimport java.io.IOException;\n\npublic class Main {\n\n    public static void main(String... args){\n        try {\n            Server server = new Server(8080);\n\n            Client client = new Client(8080);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n\npackage main;\n\nimport java.io.DataInputStream;\nimport java.io.DataOutputStream;\nimport java.io.IOException;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class Server {\n\n    private boolean stop = false;\n\n    public Server(int port) throws IOException {\n        ServerSocket serverSocket = new ServerSocket(port);\n\n        Runnable runnable = new Runnable() {\n            @Override\n            public void run() {\n                while(stop == false) {\n                    try {\n                       Socket socket = serverSocket.accept();\n\n                        DataOutputStream outputStream = new DataOutputStream(socket.getOutputStream());\n                        outputStream.writeUTF(&quot;Hello World!&quot;);\n\n                        DataInputStream inputStream = new DataInputStream(socket.getInputStream());\n                        String input = inputStream.readUTF();\n\n                        System.out.println(&quot;Client wrote: &quot; + input);\n\n                        socket.close();\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    }\n                }\n\n                try {\n                    serverSocket.close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n        };\n\n        Thread thread = new Thread(runnable, &quot;server executor&quot;);\n        thread.start();\n    }\n\n    public void stop(){\n        this.stop = true;\n    }\n}\n\n\npackage main;\n\nimport java.io.DataInputStream;\nimport java.io.DataOutputStream;\nimport java.io.IOException;\nimport java.net.Socket;\n\npublic class Client {\n\n    public static final String LOCALHOST = &quot;localhost&quot;;\n    public static final String KIRAZUKE = &quot;---&quot;;\n    public static final String PUBLIC_IP_4 = &quot;---&quot;;\n\n    public Client(int port)  {\n        try{\n            doTest(LOCALHOST, port);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        try{\n            Thread.sleep(2500);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n        try{\n            doTest(KIRAZUKE, port);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        try{\n            Thread.sleep(2500);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n        try{\n            doTest(PUBLIC_IP_4, port);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void doTest(String host, int port) throws IOException {\n        System.out.println(&quot;Opening to: &quot; + host);\n        Socket socket = new Socket(host, port);\n\n        DataOutputStream outputStream = new DataOutputStream(socket.getOutputStream());\n        outputStream.writeUTF(&quot;Hello dear Server ... calling from &quot; + host + &quot; ... over.&quot;);\n\n        DataInputStream inputStream = new DataInputStream(socket.getInputStream());\n        String string = inputStream.readUTF();\n\n        System.out.println(&quot;Response from server after &quot; + host + &quot; call: &quot; + string);\n    }\n}\n</code></pre>\n<p>So I've replaced the domain name and my public ip with dashes for privacy reasons. But what happens is that when using the localhost connection everything works fine the server prints the text sent by the client and vise versa. While using either the public IP or Domain name it fails due to time out.</p>\n<p>What could be reasons that any incoming traffic is blocked altough port forwarding is enabled for the 8080 port (and other ports that I tried) ?</p>\n<p>Note: I've also called my ISP, according to them they &quot;don't block anything&quot;. Additionally I tried port forwarding port 3389 and tried remote desktop to my pi but that also failed.</p>\n<p>Thanks in advance :)</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1436338719,"post_id":31285467,"comment_id":50563293,"body_markdown":"Except for the name  of the person, the two snippets are identical. So I don&#39;t see how one could work and the other could not. If the goal is to associate a person with an *existing* title, you need a reference to this *existing* title, by getting it from the database somehow. You shouldn&#39;t create a new one as your code does.","body":"Except for the name  of the person, the two snippets are identical. So I don&#39;t see how one could work and the other could not. If the goal is to associate a person with an <i>existing</i> title, you need a reference to this <i>existing</i> title, by getting it from the database somehow. You shouldn&#39;t create a new one as your code does."},{"owner":{"account_id":6356962,"reputation":1,"user_id":4933890,"display_name":"Nayan Paregi"},"score":0,"creation_date":1436340695,"post_id":31285467,"comment_id":50564495,"body_markdown":"Thanks for the reply. So hibernate will not automatically detect that it&#39;s already exists and use the same? I have to manually check everytime if exists and then use it or create new one? SaveOrUpdate will not save or update the child objects?","body":"Thanks for the reply. So hibernate will not automatically detect that it&#39;s already exists and use the same? I have to manually check everytime if exists and then use it or create new one? SaveOrUpdate will not save or update the child objects?"},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1436343538,"post_id":31285467,"comment_id":50566211,"body_markdown":"No, it won&#39;t. The only thing that identifies an entity uniquely is its ID. You could very well want two identical instances of Title, differing only by their ID.","body":"No, it won&#39;t. The only thing that identifies an entity uniquely is its ID. You could very well want two identical instances of Title, differing only by their ID."}],"answers":[{"tags":[],"owner":{"account_id":3096427,"reputation":1714,"user_id":2621507,"accept_rate":31,"display_name":"Rishi Saraf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1436338851,"creation_date":1436338851,"answer_id":31285600,"question_id":31285467,"body_markdown":"First You have to define OneToMany relation in Title entity something like below\r\n\r\n    @Entity\r\n    public class Title {\r\n       @OneToMany(mappedBy=&quot;title&quot;, cascade = CascadeType.ALL,     orphanRemoval=true, fetch=FetchType.LAZY)\r\n    private List&lt;Person&gt; persons = new ArrayList&lt;Person&gt;();\r\n    }\r\n\r\nThen to add person and Title you have to add person on title persons field.\r\n\r\n\r\n    Person p=new Person();\r\n    p.setName(&quot;pqr&quot;);\r\n    Title t=new Title();\r\n    t.setTitle(&quot;Mr.&quot;);\r\n    t.addPersons(p);\r\n    p.setTitle(t);\r\n    sessionFactory.getCurrentSession().saveOrUpdate(t);\r\n\r\n","title":"Hibernate @ManyToOne violates foreign key constraint","body":"<p>First You have to define OneToMany relation in Title entity something like below</p>\n\n<pre><code>@Entity\npublic class Title {\n   @OneToMany(mappedBy=\"title\", cascade = CascadeType.ALL,     orphanRemoval=true, fetch=FetchType.LAZY)\nprivate List&lt;Person&gt; persons = new ArrayList&lt;Person&gt;();\n}\n</code></pre>\n\n<p>Then to add person and Title you have to add person on title persons field.</p>\n\n<pre><code>Person p=new Person();\np.setName(\"pqr\");\nTitle t=new Title();\nt.setTitle(\"Mr.\");\nt.addPersons(p);\np.setTitle(t);\nsessionFactory.getCurrentSession().saveOrUpdate(t);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4081117,"reputation":549,"user_id":3351588,"display_name":"Consec"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1436340108,"creation_date":1436340108,"answer_id":31286006,"question_id":31285467,"body_markdown":"You got foreign key violation because you use title as id ( primary key of entity Title). Try this:\r\n\r\n     @Entity\r\n     public class Title {\r\n\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private int titleId;\r\n    \r\n        private String title; \r\n     }","title":"Hibernate @ManyToOne violates foreign key constraint","body":"<p>You got foreign key violation because you use title as id ( primary key of entity Title). Try this:</p>\n\n<pre><code> @Entity\n public class Title {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private int titleId;\n\n    private String title; \n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6348104,"reputation":17893,"user_id":4927984,"accept_rate":80,"display_name":"Mistalis"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1436345591,"creation_date":1436345591,"answer_id":31287850,"question_id":31285467,"body_markdown":"You have an error on your definition of the person ID. You have:\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private LongId;\r\n\r\nI think it should be:\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long Id;\r\n\r\n\r\nMaybe it cames from here ? :)","title":"Hibernate @ManyToOne violates foreign key constraint","body":"<p>You have an error on your definition of the person ID. You have:</p>\n\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate LongId;\n</code></pre>\n\n<p>I think it should be:</p>\n\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate Long Id;\n</code></pre>\n\n<p>Maybe it cames from here ? :)</p>\n"},{"tags":[],"owner":{"account_id":21715214,"reputation":50,"user_id":16026348,"display_name":"Ferlorin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648063117,"creation_date":1648063117,"answer_id":71592860,"question_id":31285467,"body_markdown":"This has happened to me because I had meddled with various table names and the database was retaining old foreign key constraints (from previous test builds).\r\nTry to drop the tables from your DB and let Hibernate re-create them.","title":"Hibernate @ManyToOne violates foreign key constraint","body":"<p>This has happened to me because I had meddled with various table names and the database was retaining old foreign key constraints (from previous test builds).\nTry to drop the tables from your DB and let Hibernate re-create them.</p>\n"}],"owner":{"account_id":6356962,"reputation":1,"user_id":4933890,"display_name":"Nayan Paregi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5473,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1648063117,"creation_date":1436338391,"question_id":31285467,"body_markdown":"I have person class which contains another object Title.\r\n\r\n    public class Person {\r\n\t\r\n\tpublic Person(){\r\n\t\ttitleId=new Title();\r\n\t}\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.AUTO)\r\n\tprivate LongId;\r\n\r\n\t@ManyToOne(cascade = {CascadeType.ALL}, fetch = FetchType.EAGER,targetEntity=Title.class)\r\n    @JoinColumn(name = &quot;titleId&quot;, referencedColumnName = &quot;titleId&quot;,columnDefinition=&quot;int&quot;,nullable=false)\r\n\tprivate Title title;\r\n\t\r\n\t...\r\n\t...\r\n    }\r\n\r\n    @Entity\r\n    public class Title {\r\n\t@Generated(GenerationTime.INSERT)\r\n\t@Column(columnDefinition = &quot;serial&quot;)\r\n\tprivate int titleId;\r\n\t\r\n\t@Id\r\n\tprivate String title; }\r\n\r\n\r\nWhen I try to insert Person object with below detail.\r\n\r\n      Person p=new Person();\r\n      Title t=new Title();\r\n      t.setTitle(&quot;Mr.&quot;);\r\n      p.setName(&quot;abc&quot;);\r\n      p.setTitle(t);\r\n      sessionFactory.getCurrentSession().saveOrUpdate(p);\r\n\r\n\r\nIt&#39;s working fine and inserting title and person \r\n\r\nBut when I try to insert another person with same title, it fails\r\n\r\n    Person p=new Person();\r\n    Title t=new Title();\r\n    t.setTitle(&quot;Mr.&quot;);\r\n    p.setName(&quot;pqr&quot;);\r\n    p.setTitle(t);\r\n    sessionFactory.getCurrentSession().saveOrUpdate(p);\r\n\r\n\r\nIt&#39;s giving exception as below\r\n\r\n&gt; org.postgresql.util.PSQLException: ERROR: insert or update on table\r\n&gt; &amp;quot;person&amp;quot; violates foreign key constraint\r\n&gt; &amp;quot;fk_9s5vdsvlj3nqy8btf3u1wgvqf&amp;quot;   Detail: Key (titleid)=(0)\r\n&gt; is not present in table &amp;quot;title&amp;quot;.\r\n\r\nI can pass titleId and it will work, however there are chance that I don&#39;t have titleId available.","title":"Hibernate @ManyToOne violates foreign key constraint","body":"<p>I have person class which contains another object Title.</p>\n\n<pre><code>public class Person {\n\npublic Person(){\n    titleId=new Title();\n}\n\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate LongId;\n\n@ManyToOne(cascade = {CascadeType.ALL}, fetch = FetchType.EAGER,targetEntity=Title.class)\n@JoinColumn(name = \"titleId\", referencedColumnName = \"titleId\",columnDefinition=\"int\",nullable=false)\nprivate Title title;\n\n...\n...\n}\n\n@Entity\npublic class Title {\n@Generated(GenerationTime.INSERT)\n@Column(columnDefinition = \"serial\")\nprivate int titleId;\n\n@Id\nprivate String title; }\n</code></pre>\n\n<p>When I try to insert Person object with below detail.</p>\n\n<pre><code>  Person p=new Person();\n  Title t=new Title();\n  t.setTitle(\"Mr.\");\n  p.setName(\"abc\");\n  p.setTitle(t);\n  sessionFactory.getCurrentSession().saveOrUpdate(p);\n</code></pre>\n\n<p>It's working fine and inserting title and person </p>\n\n<p>But when I try to insert another person with same title, it fails</p>\n\n<pre><code>Person p=new Person();\nTitle t=new Title();\nt.setTitle(\"Mr.\");\np.setName(\"pqr\");\np.setTitle(t);\nsessionFactory.getCurrentSession().saveOrUpdate(p);\n</code></pre>\n\n<p>It's giving exception as below</p>\n\n<blockquote>\n  <p>org.postgresql.util.PSQLException: ERROR: insert or update on table\n  &quot;person&quot; violates foreign key constraint\n  &quot;fk_9s5vdsvlj3nqy8btf3u1wgvqf&quot;   Detail: Key (titleid)=(0)\n  is not present in table &quot;title&quot;.</p>\n</blockquote>\n\n<p>I can pass titleId and it will work, however there are chance that I don't have titleId available.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":6234997,"reputation":317,"user_id":4850588,"display_name":"developer-vivekjain"},"score":0,"creation_date":1648060951,"post_id":71592227,"comment_id":126531624,"body_markdown":"I hope this [**answer**](https://stackoverflow.com/questions/6739566/is-there-a-way-to-autowire-a-bean-that-requires-constructor-arguments)  will help you to understand","body":"I hope this <a href=\"https://stackoverflow.com/questions/6739566/is-there-a-way-to-autowire-a-bean-that-requires-constructor-arguments\"><b>answer</b></a>  will help you to understand"},{"owner":{"account_id":14666883,"reputation":1411,"user_id":10628833,"display_name":"Gustavo Ces&#225;rio"},"score":0,"creation_date":1648062130,"post_id":71592227,"comment_id":126532020,"body_markdown":"@VivekJain With this solution it doesn&#39;t look like it&#39;s possible to construct my service with a dynamic parameter for each http request made to the api.","body":"@VivekJain With this solution it doesn&#39;t look like it&#39;s possible to construct my service with a dynamic parameter for each http request made to the api."},{"owner":{"account_id":6234997,"reputation":317,"user_id":4850588,"display_name":"developer-vivekjain"},"score":0,"creation_date":1648063867,"post_id":71592227,"comment_id":126532523,"body_markdown":"try to set scope of your bean as request, I hope this should work for you.","body":"try to set scope of your bean as request, I hope this should work for you."},{"owner":{"account_id":6234997,"reputation":317,"user_id":4850588,"display_name":"developer-vivekjain"},"score":1,"creation_date":1648064253,"post_id":71592227,"comment_id":126532651,"body_markdown":"visit this [page](https://www.logicbig.com/tutorials/spring-framework/spring-web-mvc/request-scope.html)","body":"visit this <a href=\"https://www.logicbig.com/tutorials/spring-framework/spring-web-mvc/request-scope.html\" rel=\"nofollow noreferrer\">page</a>"},{"owner":{"account_id":14666883,"reputation":1411,"user_id":10628833,"display_name":"Gustavo Ces&#225;rio"},"score":0,"creation_date":1648749682,"post_id":71592227,"comment_id":126710205,"body_markdown":"@VivekJain it worked perfectly. If you want to, please edit you answer to refer to this last page you sent.","body":"@VivekJain it worked perfectly. If you want to, please edit you answer to refer to this last page you sent."}],"answers":[{"tags":[],"owner":{"account_id":6234997,"reputation":317,"user_id":4850588,"display_name":"developer-vivekjain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648062986,"creation_date":1648062138,"answer_id":71592674,"question_id":71592227,"body_markdown":"Spring allows you to inject a managed object (bean) as a dependency into another object via the @Autowired annotation.\r\n\r\nFor example, if I have a UserService that has a dependency on UserRepository, I can have the UserRepository injected using @Autowired annotation like this:\r\n\r\n*UserRepository Class*\r\n```java\r\nclass UserRepository {\r\nUserRepository () {}\r\n}\r\n```\r\n\r\n\r\n*UserService Class*\r\n```java\r\nclass UserService {\r\n\r\n@Autowired\r\nprivate UserRepository userRepository;\r\n\r\nUserService () {}\r\n\r\n}\r\n```\r\n\r\nThis is done using Field Injection. The same thing can be accomplice using Setter Injection:\r\n\r\n\r\n```java\r\nclass UserService {\r\n\r\nprivate UserRepository userRepository;\r\n\r\nUserService () {}\r\n\r\n@Autowired // Using setter injection\r\npublic void setUserRepository(\r\nUserRepository userRepository) {\r\nthis.userRepository = userRepository\r\n}\r\n\r\n}\r\n```\r\n\r\nor via Constructor Injection:\r\n\r\n```\r\nclass UserService {\r\n\r\nprivate UserRepository userRepository;\r\n\r\n@Autowired // Using constructor Injection\r\nUserService (UserRepository userRepository) {\r\nthis.userRepository = userRepository\r\n}\r\n\r\n}\r\n```","title":"Should I instantiate my Service in order to share infornation between different methods?","body":"<p>Spring allows you to inject a managed object (bean) as a dependency into another object via the @Autowired annotation.</p>\n<p>For example, if I have a UserService that has a dependency on UserRepository, I can have the UserRepository injected using @Autowired annotation like this:</p>\n<p><em>UserRepository Class</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>class UserRepository {\nUserRepository () {}\n}\n</code></pre>\n<p><em>UserService Class</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>class UserService {\n\n@Autowired\nprivate UserRepository userRepository;\n\nUserService () {}\n\n}\n</code></pre>\n<p>This is done using Field Injection. The same thing can be accomplice using Setter Injection:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class UserService {\n\nprivate UserRepository userRepository;\n\nUserService () {}\n\n@Autowired // Using setter injection\npublic void setUserRepository(\nUserRepository userRepository) {\nthis.userRepository = userRepository\n}\n\n}\n</code></pre>\n<p>or via Constructor Injection:</p>\n<pre><code>class UserService {\n\nprivate UserRepository userRepository;\n\n@Autowired // Using constructor Injection\nUserService (UserRepository userRepository) {\nthis.userRepository = userRepository\n}\n\n}\n</code></pre>\n"}],"owner":{"account_id":14666883,"reputation":1411,"user_id":10628833,"display_name":"Gustavo Ces&#225;rio"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1648062986,"creation_date":1648059919,"question_id":71592227,"body_markdown":"Currently I have an endpoint in my controller that calls different methods from my service. Each of these methods recieve a parameter called ```executionId``` that is different for every http request.\r\n\r\n```java\r\n@RestController\r\npublic class ProcedureController {\r\n\r\n    @Autowired\r\n    MyService service;\r\n\r\n    @GetMapping\r\n    public void execute(){\r\n        String executionId = ...; //randomly generated\r\n\r\n        service.executeMethodA(executionId);\r\n        service.executeMethodB(executionId);\r\n    }\r\n\r\n}\r\n\r\n```\r\n```java\r\n@Service\r\npublic class MyService {\r\n\r\n    public void executeMethodA(String executionId){\r\n        ...\r\n    }\r\n\r\n    public void executeMethodB(String executionId){\r\n        ...\r\n    }\r\n\r\n}\r\n```\r\n\r\nIt works fine but it seems very repetitive to pass ```executionId``` as a parameter to each method. So one solution that I thought was to instantiate my service with the executionId so it can hold this information and every method can access it.\r\n\r\n\r\n```javascript\r\n@RestController\r\npublic class ProcedureController {\r\n\r\n    @GetMapping\r\n    public void execute(){\r\n        String executionId = ...; //randomly generated\r\n\r\n        MyService service = new MyService(executionId);\r\n\r\n        service.executeMethodA();\r\n        service.executeMethodB();\r\n    }\r\n\r\n}\r\n\r\n```\r\n```java\r\n@Service\r\npublic class MyService {\r\n\r\n    String executionId;\r\n\r\n    public MyService(String executionId){\r\n        this.executionId = executionId;\r\n    }\r\n\r\n    public void executeMethodA(){\r\n        // Use executionId here\r\n        ...\r\n    }\r\n\r\n    public void executeMethodB(){\r\n        // Use executionId here\r\n        ...\r\n    }\r\n\r\n}\r\n```\r\n\r\nIs this solution a bad practice? If so, how can I achieve something similar?","title":"Should I instantiate my Service in order to share infornation between different methods?","body":"<p>Currently I have an endpoint in my controller that calls different methods from my service. Each of these methods recieve a parameter called <code>executionId</code> that is different for every http request.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class ProcedureController {\n\n    @Autowired\n    MyService service;\n\n    @GetMapping\n    public void execute(){\n        String executionId = ...; //randomly generated\n\n        service.executeMethodA(executionId);\n        service.executeMethodB(executionId);\n    }\n\n}\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class MyService {\n\n    public void executeMethodA(String executionId){\n        ...\n    }\n\n    public void executeMethodB(String executionId){\n        ...\n    }\n\n}\n</code></pre>\n<p>It works fine but it seems very repetitive to pass <code>executionId</code> as a parameter to each method. So one solution that I thought was to instantiate my service with the executionId so it can hold this information and every method can access it.</p>\n<pre class=\"lang-js prettyprint-override\"><code>@RestController\npublic class ProcedureController {\n\n    @GetMapping\n    public void execute(){\n        String executionId = ...; //randomly generated\n\n        MyService service = new MyService(executionId);\n\n        service.executeMethodA();\n        service.executeMethodB();\n    }\n\n}\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class MyService {\n\n    String executionId;\n\n    public MyService(String executionId){\n        this.executionId = executionId;\n    }\n\n    public void executeMethodA(){\n        // Use executionId here\n        ...\n    }\n\n    public void executeMethodB(){\n        // Use executionId here\n        ...\n    }\n\n}\n</code></pre>\n<p>Is this solution a bad practice? If so, how can I achieve something similar?</p>\n"},{"tags":["java","android","spannablestring"],"comments":[{"owner":{"account_id":11791513,"reputation":685,"user_id":9652621,"display_name":"Vishnu"},"score":1,"creation_date":1648063075,"post_id":71592815,"comment_id":126532287,"body_markdown":"I feel like `SpannableString` would suit your requirement. Also, please edit the question with your code!","body":"I feel like <code>SpannableString</code> would suit your requirement. Also, please edit the question with your code!"},{"owner":{"account_id":7581977,"reputation":1361,"user_id":5752410,"display_name":"Eitanos30"},"score":1,"creation_date":1648063280,"post_id":71592815,"comment_id":126532343,"body_markdown":"@Vishnu, i don&#39;t have code because i don&#39;t know how to get the indexes for the part of the sentence that should be replaced. I know that SpannableString can help me to color the text, but again can&#39;t find the indexes since i don&#39;t know the amount of &lt;&gt; appearances","body":"@Vishnu, i don&#39;t have code because i don&#39;t know how to get the indexes for the part of the sentence that should be replaced. I know that SpannableString can help me to color the text, but again can&#39;t find the indexes since i don&#39;t know the amount of &lt;&gt; appearances"},{"owner":{"account_id":11791513,"reputation":685,"user_id":9652621,"display_name":"Vishnu"},"score":0,"creation_date":1648098694,"post_id":71592815,"comment_id":126539529,"body_markdown":"Oh, then I think you can loop through the `String`, find the indices that matches a `&lt;`, then check for a `&gt;`, get it&#39;s index and colorize the text in-between. Continue this step till end of the `String`. I can show this in code if you can post the current code.","body":"Oh, then I think you can loop through the <code>String</code>, find the indices that matches a <code>&lt;</code>, then check for a <code>&gt;</code>, get it&#39;s index and colorize the text in-between. Continue this step till end of the <code>String</code>. I can show this in code if you can post the current code."},{"owner":{"account_id":7581977,"reputation":1361,"user_id":5752410,"display_name":"Eitanos30"},"score":1,"creation_date":1648108257,"post_id":71592815,"comment_id":126541734,"body_markdown":"@Vishnu thank you, but unfortunately I can’t write anything since it too hard for me. Thanks anyway","body":"@Vishnu thank you, but unfortunately I can’t write anything since it too hard for me. Thanks anyway"},{"owner":{"account_id":11791513,"reputation":685,"user_id":9652621,"display_name":"Vishnu"},"score":0,"creation_date":1648116706,"post_id":71592815,"comment_id":126544709,"body_markdown":"Too hard?! Okay, post some piece of code like where this is used or on which context this should be implemented etc. I&#39;ll try to make it a working solution and post it here :)","body":"Too hard?! Okay, post some piece of code like where this is used or on which context this should be implemented etc. I&#39;ll try to make it a working solution and post it here :)"},{"owner":{"account_id":7581977,"reputation":1361,"user_id":5752410,"display_name":"Eitanos30"},"score":1,"creation_date":1648125289,"post_id":71592815,"comment_id":126548016,"body_markdown":"If I will show the context I will expose my company feature. It’s a big problem for me. If you can’t help it’s ok and I am appericiate your will","body":"If I will show the context I will expose my company feature. It’s a big problem for me. If you can’t help it’s ok and I am appericiate your will"}],"owner":{"account_id":7581977,"reputation":1361,"user_id":5752410,"display_name":"Eitanos30"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1648062848,"creation_date":1648062848,"question_id":71592815,"body_markdown":"I have a **TextView** that may contain a text that number of placeholder is unknown.\r\nI need to change the color between all two pairs of &lt;&gt; (for some reason i can&#39;t add the &#39;B&#39; letter between &lt;&gt; so please consider that in every place i&#39;m writing &lt;&gt; a &#39;B&#39; is existed between the brackets.\r\nFor example, for the following string:**&quot;I &lt;am&gt; twenty &lt;&gt;years&lt;&gt; old&quot;** -&gt; the text should be with red color beside the parts between &lt;&gt; (am, years) that should be in blue color.\r\nThe problem is that i can&#39;t know how much times the &lt;&gt; pairs is existed in the String.\r\n","title":"How to change text color for parts of text that are between two placeholders?","body":"<p>I have a <strong>TextView</strong> that may contain a text that number of placeholder is unknown.\nI need to change the color between all two pairs of &lt;&gt; (for some reason i can't add the 'B' letter between &lt;&gt; so please consider that in every place i'm writing &lt;&gt; a 'B' is existed between the brackets.\nFor example, for the following string:<strong>&quot;I  twenty &lt;&gt;years&lt;&gt; old&quot;</strong> -&gt; the text should be with red color beside the parts between &lt;&gt; (am, years) that should be in blue color.\nThe problem is that i can't know how much times the &lt;&gt; pairs is existed in the String.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"score":0,"creation_date":1648062394,"post_id":71592702,"comment_id":126532091,"body_markdown":"Just use `if (result == 0) {System.out.println(&quot;Blah&quot;)}`  and add `else if` for each result similar to how you made the `caughtSpeeding` code?  You can also use a `switch` statement, but I would start with `if-else` since you are already familiar with those.","body":"Just use <code>if (result == 0) {System.out.println(&quot;Blah&quot;)}</code>  and add <code>else if</code> for each result similar to how you made the <code>caughtSpeeding</code> code?  You can also use a <code>switch</code> statement, but I would start with <code>if-else</code> since you are already familiar with those."},{"owner":{"account_id":16509210,"reputation":564,"user_id":11928455,"display_name":"Amimul Ehsan Rahi"},"score":0,"creation_date":1648062452,"post_id":71592702,"comment_id":126532106,"body_markdown":"Just go with if-else on the return value.","body":"Just go with if-else on the return value."}],"answers":[{"tags":[],"owner":{"account_id":16509210,"reputation":564,"user_id":11928455,"display_name":"Amimul Ehsan Rahi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648062788,"creation_date":1648062788,"answer_id":71592804,"question_id":71592702,"body_markdown":"You can just go with simple if-else on returned value. I am giving you an example with some minor logical improvements. \r\n\r\n```\r\nelse if (speed &gt; 65 &amp;&amp; speed &lt;= 85)\r\n                ticket = 1;\r\n``` \r\nthis line will only reach is the speed is already greater than 65. So you can do this: \r\n```\r\nelse if (speed &lt;= 85)\r\n                ticket = 1;\r\n```\r\nSimilar for this: \r\n```\r\nelse if (speed &gt; 60 &amp;&amp; speed &lt;= 80)\r\n                ticket = 1;\r\n```\r\nMake it like this: \r\n```\r\nelse if (speed &lt;= 80)\r\n                ticket = 1;\r\n```\r\n\r\nAnd finally the full code: \r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class SpeedingBool {\r\n\r\n    public static void main( String[] args ) {\r\n\r\n        Scanner input = new Scanner(System.in);\r\n\r\n        int i = caughtSpeeding(input);\r\n\r\n        String ticket;\r\n\r\n        if (i == 0)\r\n            ticket = &quot;You received no ticket&quot;;\r\n        else if (i == 1)\r\n            ticket = &quot;Return value 1 ticket&quot;;\r\n        else\r\n            ticket = &quot;You&#39;re going to jail, buddy!&quot;;\r\n\r\n        System.out.println(&quot;Your ticket is &quot; + ticket);\r\n\r\n    }\r\n\r\n    public static int caughtSpeeding( Scanner input ) {\r\n        System.out.println(&quot;How fast were you going?&quot;);\r\n        int speed = input.nextInt();\r\n        System.out.println(&quot;True or false: today is your birthday&quot;);\r\n        boolean isBirthday = input.nextBoolean();\r\n        int ticket;\r\n        if (isBirthday) {\r\n            if (speed &lt;= 65)\r\n                ticket = 0;\r\n            else if (speed &lt;= 85)\r\n                ticket = 1;\r\n            else ticket = 2;\r\n        } else {\r\n            if (speed &lt;= 60)\r\n                ticket = 0;\r\n            else if (speed &lt;= 80)\r\n                ticket = 1;\r\n            else ticket = 2;\r\n        }\r\n        return ticket;\r\n    }\r\n}\r\n\r\n```","title":"How do I make the returned integer value in this program print a message, depending on the value?","body":"<p>You can just go with simple if-else on returned value. I am giving you an example with some minor logical improvements.</p>\n<pre><code>else if (speed &gt; 65 &amp;&amp; speed &lt;= 85)\n                ticket = 1;\n</code></pre>\n<p>this line will only reach is the speed is already greater than 65. So you can do this:</p>\n<pre><code>else if (speed &lt;= 85)\n                ticket = 1;\n</code></pre>\n<p>Similar for this:</p>\n<pre><code>else if (speed &gt; 60 &amp;&amp; speed &lt;= 80)\n                ticket = 1;\n</code></pre>\n<p>Make it like this:</p>\n<pre><code>else if (speed &lt;= 80)\n                ticket = 1;\n</code></pre>\n<p>And finally the full code:</p>\n<pre><code>import java.util.Scanner;\n\npublic class SpeedingBool {\n\n    public static void main( String[] args ) {\n\n        Scanner input = new Scanner(System.in);\n\n        int i = caughtSpeeding(input);\n\n        String ticket;\n\n        if (i == 0)\n            ticket = &quot;You received no ticket&quot;;\n        else if (i == 1)\n            ticket = &quot;Return value 1 ticket&quot;;\n        else\n            ticket = &quot;You're going to jail, buddy!&quot;;\n\n        System.out.println(&quot;Your ticket is &quot; + ticket);\n\n    }\n\n    public static int caughtSpeeding( Scanner input ) {\n        System.out.println(&quot;How fast were you going?&quot;);\n        int speed = input.nextInt();\n        System.out.println(&quot;True or false: today is your birthday&quot;);\n        boolean isBirthday = input.nextBoolean();\n        int ticket;\n        if (isBirthday) {\n            if (speed &lt;= 65)\n                ticket = 0;\n            else if (speed &lt;= 85)\n                ticket = 1;\n            else ticket = 2;\n        } else {\n            if (speed &lt;= 60)\n                ticket = 0;\n            else if (speed &lt;= 80)\n                ticket = 1;\n            else ticket = 2;\n        }\n        return ticket;\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":24648290,"reputation":3,"user_id":18545676,"display_name":"Verminator25 "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71592804,"answer_count":1,"score":0,"last_activity_date":1648062788,"creation_date":1648062271,"question_id":71592702,"body_markdown":"I have semi-successfully coded this program. As it stands, it prints an integer value as a result of what you type in. The only results can be 0, 1, or 2. I am wondering how to make java display a message for each one of those 3 integer values. For instance, a returned result of 0 might make it print &quot;You received no ticket&quot;, while a result of 2 would say &quot;You&#39;re going to jail, buddy!&quot; Any tips on how I could do this?\r\n\r\nI know the answer is probably very simple; bear with me, as I am just starting out :)\r\n\r\nThanks!\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class SpeedingBool {\r\n\r\n   public static void main(String[] args) {\r\n   \r\n      Scanner input = new Scanner(System.in);\r\n      \r\n      System.out.println(&quot;Your ticket is &quot; + caughtSpeeding(input));\r\n      \r\n   }\r\n   \r\n   public static int caughtSpeeding(Scanner input) {\r\n      System.out.println(&quot;How fast were you going?&quot;);\r\n      int speed = input.nextInt();\r\n      System.out.println(&quot;True or false: today is your birthday&quot;);\r\n      boolean isBirthday = input.nextBoolean();\r\n      int ticket;\r\n      if (isBirthday) {\r\n         if (speed &lt;= 65)\r\n            ticket = 0;\r\n         else if (speed &gt; 65 &amp;&amp; speed &lt;= 85)\r\n            ticket = 1;\r\n         else ticket = 2;\r\n      }\r\n      else {\r\n         if (speed &lt;= 60)\r\n            ticket = 0;\r\n         else if (speed &gt; 60 &amp;&amp; speed &lt;= 80)\r\n            ticket = 1;\r\n         else ticket = 2;\r\n      }\r\n      return ticket;\r\n   }\r\n\r\n}\r\n```\r\n","title":"How do I make the returned integer value in this program print a message, depending on the value?","body":"<p>I have semi-successfully coded this program. As it stands, it prints an integer value as a result of what you type in. The only results can be 0, 1, or 2. I am wondering how to make java display a message for each one of those 3 integer values. For instance, a returned result of 0 might make it print &quot;You received no ticket&quot;, while a result of 2 would say &quot;You're going to jail, buddy!&quot; Any tips on how I could do this?</p>\n<p>I know the answer is probably very simple; bear with me, as I am just starting out :)</p>\n<p>Thanks!</p>\n<pre><code>import java.util.Scanner;\n\npublic class SpeedingBool {\n\n   public static void main(String[] args) {\n   \n      Scanner input = new Scanner(System.in);\n      \n      System.out.println(&quot;Your ticket is &quot; + caughtSpeeding(input));\n      \n   }\n   \n   public static int caughtSpeeding(Scanner input) {\n      System.out.println(&quot;How fast were you going?&quot;);\n      int speed = input.nextInt();\n      System.out.println(&quot;True or false: today is your birthday&quot;);\n      boolean isBirthday = input.nextBoolean();\n      int ticket;\n      if (isBirthday) {\n         if (speed &lt;= 65)\n            ticket = 0;\n         else if (speed &gt; 65 &amp;&amp; speed &lt;= 85)\n            ticket = 1;\n         else ticket = 2;\n      }\n      else {\n         if (speed &lt;= 60)\n            ticket = 0;\n         else if (speed &gt; 60 &amp;&amp; speed &lt;= 80)\n            ticket = 1;\n         else ticket = 2;\n      }\n      return ticket;\n   }\n\n}\n</code></pre>\n"},{"tags":["java","android","android-studio"],"answers":[{"tags":[],"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1648062723,"creation_date":1648062723,"answer_id":71592791,"question_id":71591275,"body_markdown":"The default `image` format is YUV_420_888 and as your buffer is only one plane (the Luminance(Y) plane ) the buffer is of pixels that are only a single `byte` in size.\r\n\r\n`copyPixelsFromBuffer` assumes that the `buffer` is in the same colour space as the bitmap, so as you set the bitmap format to ARGB_8888 then it is looking for 4 bytes per pixel not 1 byte per pixel you are giving it.\r\n\r\nI&#39;ve not used this but this [page][1] has a `ImageProxy.toBitmap` example to convert a YUV to Bitmap via a Jpeg (if you just wanted a Jpeg you could skip the last step)\r\n\r\nI&#39;ve also seen another [method][2] not via Jpeg but to directly change the colorspace of YUV to a bitmap.\r\n\r\nYou can of course change to the only other colour space ImageAnalysis supports of `ImageAnalysis.OUTPUT_IMAGE_FORMAT_RGBA_8888` which takes longer to be captured because it needs converting and is still not the right format for a Bitmap\r\n\r\n\r\n  [1]: https://heartbeat.comet.ml/image-classification-on-android-with-tensorflow-lite-and-camerax-4f72e8fdca79\r\n  [2]: https://github.com/googlecodelabs/mlkit-android/blob/master/translate/starter/app/src/main/java/com/google/mlkit/codelab/translate/util/ImageUtils.kt","title":"Capture a picture in Android, and work with it using the ImageAnalyzer","body":"<p>The default <code>image</code> format is YUV_420_888 and as your buffer is only one plane (the Luminance(Y) plane ) the buffer is of pixels that are only a single <code>byte</code> in size.</p>\n<p><code>copyPixelsFromBuffer</code> assumes that the <code>buffer</code> is in the same colour space as the bitmap, so as you set the bitmap format to ARGB_8888 then it is looking for 4 bytes per pixel not 1 byte per pixel you are giving it.</p>\n<p>I've not used this but this <a href=\"https://heartbeat.comet.ml/image-classification-on-android-with-tensorflow-lite-and-camerax-4f72e8fdca79\" rel=\"nofollow noreferrer\">page</a> has a <code>ImageProxy.toBitmap</code> example to convert a YUV to Bitmap via a Jpeg (if you just wanted a Jpeg you could skip the last step)</p>\n<p>I've also seen another <a href=\"https://github.com/googlecodelabs/mlkit-android/blob/master/translate/starter/app/src/main/java/com/google/mlkit/codelab/translate/util/ImageUtils.kt\" rel=\"nofollow noreferrer\">method</a> not via Jpeg but to directly change the colorspace of YUV to a bitmap.</p>\n<p>You can of course change to the only other colour space ImageAnalysis supports of <code>ImageAnalysis.OUTPUT_IMAGE_FORMAT_RGBA_8888</code> which takes longer to be captured because it needs converting and is still not the right format for a Bitmap</p>\n"}],"owner":{"account_id":24663349,"reputation":43,"user_id":18559348,"display_name":"GeorgeRaspberry"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":582,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71592791,"answer_count":1,"score":0,"last_activity_date":1648062723,"creation_date":1648055357,"question_id":71591275,"body_markdown":"I am trying to implement a solution that would be able to capture a picture from the phone&#39;s camera, then operate the picture (do something with it) and repeat this process N times, quickly. \r\n\r\nI have achieved this using the `imageCapture.takePicture` method, but when trying to implement the same process for N pictures, the `onCaptureSuccess` method is being called every ~500ms (on a solid Samsung device). The process of capturing and saving the picture lasts too long for me. I need it to be quicker than 500ms.\r\n\r\nI was looking to implement it using the `imageAnalyzer` class, and used code similar to this:\r\n```\r\nprivate class CameraAnalyzer implements ImageAnalysis.Analyzer {\r\n        \r\n        @Override\r\n        public void analyze(@NonNull ImageProxy image) {\r\n\r\n            ByteBuffer bb = image.getPlanes()[0].getBuffer();\r\n            byte[] buf = new byte[bb.remaining()];\r\n            bb.get(buf);\r\n            \r\n            //raw - data container\r\n            raw = buf;\r\n            //runnable - operate the picture\r\n            runnable.run();\r\n            image.close();\r\n        }\r\n    }\r\n```\r\nBut I am receiving NULL for `buf` and the picture is always empty. `bb.rewind()` did not help as well. \r\n\r\nAfter being advised that the picture is coming in RAW format, and thus need to convert it to a Bitmap, I have done it with this code: \r\n```\r\n            ImageProxy.PlaneProxy[] planes = image.getPlanes();\r\n            ByteBuffer buffer = planes[0].getBuffer();\r\n            int pixelStride = planes[0].getPixelStride();\r\n            int rowStride = planes[0].getRowStride();\r\n            int rowPadding = rowStride - pixelStride * image.getWidth();\r\n            Bitmap bitmap = Bitmap.createBitmap(image.getWidth()+rowPadding/pixelStride,\r\n                    image.getHeight(), Bitmap.Config.ARGB_8888);\r\n\r\n            bitmap.copyPixelsFromBuffer(buffer);\r\n```\r\n\r\nBut while executing the `copyPixelsFromBuffer` I am encountering this issue: \r\n\r\n```\r\nE/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.strujomeri, PID: 24466\r\n    java.lang.RuntimeException: Buffer not large enough for pixels\r\n```\r\n\r\n**How can I get the picture I want in `imageAnalyzer`, and also have it&#39;s content \r\nin `byte[]` format to do with it what I want ?**","title":"Capture a picture in Android, and work with it using the ImageAnalyzer","body":"<p>I am trying to implement a solution that would be able to capture a picture from the phone's camera, then operate the picture (do something with it) and repeat this process N times, quickly.</p>\n<p>I have achieved this using the <code>imageCapture.takePicture</code> method, but when trying to implement the same process for N pictures, the <code>onCaptureSuccess</code> method is being called every ~500ms (on a solid Samsung device). The process of capturing and saving the picture lasts too long for me. I need it to be quicker than 500ms.</p>\n<p>I was looking to implement it using the <code>imageAnalyzer</code> class, and used code similar to this:</p>\n<pre><code>private class CameraAnalyzer implements ImageAnalysis.Analyzer {\n        \n        @Override\n        public void analyze(@NonNull ImageProxy image) {\n\n            ByteBuffer bb = image.getPlanes()[0].getBuffer();\n            byte[] buf = new byte[bb.remaining()];\n            bb.get(buf);\n            \n            //raw - data container\n            raw = buf;\n            //runnable - operate the picture\n            runnable.run();\n            image.close();\n        }\n    }\n</code></pre>\n<p>But I am receiving NULL for <code>buf</code> and the picture is always empty. <code>bb.rewind()</code> did not help as well.</p>\n<p>After being advised that the picture is coming in RAW format, and thus need to convert it to a Bitmap, I have done it with this code:</p>\n<pre><code>            ImageProxy.PlaneProxy[] planes = image.getPlanes();\n            ByteBuffer buffer = planes[0].getBuffer();\n            int pixelStride = planes[0].getPixelStride();\n            int rowStride = planes[0].getRowStride();\n            int rowPadding = rowStride - pixelStride * image.getWidth();\n            Bitmap bitmap = Bitmap.createBitmap(image.getWidth()+rowPadding/pixelStride,\n                    image.getHeight(), Bitmap.Config.ARGB_8888);\n\n            bitmap.copyPixelsFromBuffer(buffer);\n</code></pre>\n<p>But while executing the <code>copyPixelsFromBuffer</code> I am encountering this issue:</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.strujomeri, PID: 24466\n    java.lang.RuntimeException: Buffer not large enough for pixels\n</code></pre>\n<p><strong>How can I get the picture I want in <code>imageAnalyzer</code>, and also have it's content\nin <code>byte[]</code> format to do with it what I want ?</strong></p>\n"},{"tags":["java","spring","spring-mvc","thymeleaf","spring-thymeleaf"],"comments":[{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":0,"creation_date":1648029135,"post_id":71584977,"comment_id":126518218,"body_markdown":"Does this answer your question? [how to access variables in thymeleaf templates using spring mvc](https://stackoverflow.com/questions/44319070/how-to-access-variables-in-thymeleaf-templates-using-spring-mvc)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/44319070/how-to-access-variables-in-thymeleaf-templates-using-spring-mvc\">how to access variables in thymeleaf templates using spring mvc</a>"},{"owner":{"account_id":17194345,"reputation":101,"user_id":12447482,"display_name":"shane_00"},"score":0,"creation_date":1648029285,"post_id":71584977,"comment_id":126518279,"body_markdown":"no, the parameter that I receive in the controller for some reason is still null","body":"no, the parameter that I receive in the controller for some reason is still null"},{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":0,"creation_date":1648029539,"post_id":71584977,"comment_id":126518371,"body_markdown":"You want to call a method from thymeleaf. I did not see that in the first comment. Check this one: https://stackoverflow.com/questions/43841458/how-to-call-a-service-method-with-thymeleaf","body":"You want to call a method from thymeleaf. I did not see that in the first comment. Check this one: <a href=\"https://stackoverflow.com/questions/43841458/how-to-call-a-service-method-with-thymeleaf\" title=\"how to call a service method with thymeleaf\">stackoverflow.com/questions/43841458/&hellip;</a>"},{"owner":{"account_id":17194345,"reputation":101,"user_id":12447482,"display_name":"shane_00"},"score":0,"creation_date":1648029830,"post_id":71584977,"comment_id":126518460,"body_markdown":"yes, the argument call is fine it works but I cant pass a parameter through it, I pass 1 to postCount(1) but inside the method I get that the value for it is null:\n&quot;java.lang.NullPointerException: null\n\tat com.example.forumproject.controllers.mvc.CategoryMvcController.getPostsCountInCategory(CategoryMvcController.java:56) &quot;","body":"yes, the argument call is fine it works but I cant pass a parameter through it, I pass 1 to postCount(1) but inside the method I get that the value for it is null: &quot;java.lang.NullPointerException: null \tat com.example.forumproject.controllers.mvc.CategoryMvcControll&zwnj;&#8203;er.getPostsCountInCa&zwnj;&#8203;tegory(CategoryMvcCo&zwnj;&#8203;ntroller.java:56) &quot;"}],"answers":[{"tags":[],"owner":{"account_id":12826119,"reputation":109,"user_id":9279083,"display_name":"Abhale Amol"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648036009,"creation_date":1648035349,"answer_id":71586526,"question_id":71584977,"body_markdown":"In Thymeleaf, you can not just call a method without object reference.\r\nYou can do something like this:\r\n\r\nJava Code:\r\n\r\n    //Make sure that, this class will be in IOC as bean\r\n    @Bean\r\n    public class PostCountHelper {\r\n    public int postCount(int count) {\r\n    //your handling logic goes here &amp; count will have value which you passed\r\n    }\r\n    }\r\n    \r\n    @Controller\r\n    public class PostCountController() {\r\n    private PostCountHelper postCountHelper;\r\n    public String loadView(Model model) {\r\n    model.put(&quot;postCountHelperReference&quot;, postCountHelper);\r\n    }\r\n    }\r\n\r\nThymeleaf Code:\r\n\r\n    &lt;p th:text=&quot;${postCountHelperReference.postCount(1)}&quot;","title":"Thymeleaf - parameter in method is always null","body":"<p>In Thymeleaf, you can not just call a method without object reference.\nYou can do something like this:</p>\n<p>Java Code:</p>\n<pre><code>//Make sure that, this class will be in IOC as bean\n@Bean\npublic class PostCountHelper {\npublic int postCount(int count) {\n//your handling logic goes here &amp; count will have value which you passed\n}\n}\n\n@Controller\npublic class PostCountController() {\nprivate PostCountHelper postCountHelper;\npublic String loadView(Model model) {\nmodel.put(&quot;postCountHelperReference&quot;, postCountHelper);\n}\n}\n</code></pre>\n<p>Thymeleaf Code:</p>\n<pre><code>&lt;p th:text=&quot;${postCountHelperReference.postCount(1)}&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5152799,"reputation":19367,"user_id":4126893,"display_name":"Metroids"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648062723,"creation_date":1648062723,"answer_id":71592790,"question_id":71584977,"body_markdown":"I suspect the problem is not in your code, but in this annotation: `@ModelAttribute(&quot;postsCount&quot;)` -- which is probably trying to put `postsCount` onto the model by calling `getPostsCountInCategory(null)` because it doesn&#39;t know what value to supply.\r\n\r\nThat being said, you really shouldn&#39;t be calling database methods in your HTML code.  There is no guarantee they&#39;ll only be called once, and you are violating the model/view/controller separation.  You should be adding the values to your model, and displaying that on your page.\r\n\r\n\t@Controller\r\n\tpublic class Controller() {\r\n\t\t@Autowired private PostCounter postCounter;\r\n\t\t\r\n\t\t$Get(&quot;category/&quot;)\r\n\t\tpublic String loadView(Model model) {\r\n\t\t\tmodel.put(&quot;postCounts&quot;, postCounter.getPostsCountInCategory(1));\r\n\t\t}\r\n\t}\r\n\r\nAnd in the HTML:\r\n\r\n    &lt;p th:text=&quot;${postsCount}&quot;&gt;&lt;/p&gt;","title":"Thymeleaf - parameter in method is always null","body":"<p>I suspect the problem is not in your code, but in this annotation: <code>@ModelAttribute(&quot;postsCount&quot;)</code> -- which is probably trying to put <code>postsCount</code> onto the model by calling <code>getPostsCountInCategory(null)</code> because it doesn't know what value to supply.</p>\n<p>That being said, you really shouldn't be calling database methods in your HTML code.  There is no guarantee they'll only be called once, and you are violating the model/view/controller separation.  You should be adding the values to your model, and displaying that on your page.</p>\n<pre><code>@Controller\npublic class Controller() {\n    @Autowired private PostCounter postCounter;\n    \n    $Get(&quot;category/&quot;)\n    public String loadView(Model model) {\n        model.put(&quot;postCounts&quot;, postCounter.getPostsCountInCategory(1));\n    }\n}\n</code></pre>\n<p>And in the HTML:</p>\n<pre><code>&lt;p th:text=&quot;${postsCount}&quot;&gt;&lt;/p&gt;\n</code></pre>\n"}],"owner":{"account_id":17194345,"reputation":101,"user_id":12447482,"display_name":"shane_00"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":298,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1648308837,"answer_count":2,"score":0,"last_activity_date":1648062723,"creation_date":1648028716,"question_id":71584977,"body_markdown":"I am new to thymeleaf and I have the following problem. I want to call a java method inside the html template but the method needs an argument but the issue is that no matter what I am passing for an argument the result is always null.\r\n\r\ncategories.html:\r\n```\r\n &lt;p th:text=&quot;${postsCount(1)}&quot;&gt;&lt;/p&gt;\r\n```\r\n\r\ncategoryController:\r\n```\r\n    @ModelAttribute(&quot;postsCount&quot;)\r\n    public int getPostsCountInCategory(Integer categoryId) {\r\n       return categoryService.getPostsCountInCategory(categoryId);\r\n    }\r\n```\r\n","title":"Thymeleaf - parameter in method is always null","body":"<p>I am new to thymeleaf and I have the following problem. I want to call a java method inside the html template but the method needs an argument but the issue is that no matter what I am passing for an argument the result is always null.</p>\n<p>categories.html:</p>\n<pre><code> &lt;p th:text=&quot;${postsCount(1)}&quot;&gt;&lt;/p&gt;\n</code></pre>\n<p>categoryController:</p>\n<pre><code>    @ModelAttribute(&quot;postsCount&quot;)\n    public int getPostsCountInCategory(Integer categoryId) {\n       return categoryService.getPostsCountInCategory(categoryId);\n    }\n</code></pre>\n"},{"tags":["java","eclipse","gradle","ide","build.gradle"],"comments":[{"owner":{"account_id":1884162,"reputation":7056,"user_id":1703730,"display_name":"Bj&#248;rn Vester"},"score":0,"creation_date":1647944618,"post_id":71563573,"comment_id":126492966,"body_markdown":"Gradle 4.4 is pretty ancient at this point, and I don&#39;t know if Eclipse still supports it. Any reason not to go for the newest release?","body":"Gradle 4.4 is pretty ancient at this point, and I don&#39;t know if Eclipse still supports it. Any reason not to go for the newest release?"}],"answers":[{"tags":[],"owner":{"account_id":24634884,"reputation":1,"user_id":18533672,"display_name":"ofekchen6"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648062723,"creation_date":1648062723,"answer_id":71592789,"question_id":71563573,"body_markdown":"I solved it! \r\nthere was a problem in the file itself, so i switched to intelliJ Idea.\r\n\r\ni opened a new gradle project, created a new Java class at the appropriate place and copied the code to there :)\r\n\r\nIntelliJ automatically chose an up to date version of gradle.","title":"Total noob-can&#39;t run gradle tasks","body":"<p>I solved it!\nthere was a problem in the file itself, so i switched to intelliJ Idea.</p>\n<p>i opened a new gradle project, created a new Java class at the appropriate place and copied the code to there :)</p>\n<p>IntelliJ automatically chose an up to date version of gradle.</p>\n"}],"owner":{"account_id":24634884,"reputation":1,"user_id":18533672,"display_name":"ofekchen6"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1648062723,"creation_date":1647893558,"question_id":71563573,"body_markdown":"i&#39;m trying to use Eclipse IDE to do an assignment but i can&#39;t run gradle tasks...\r\nit says &quot;no actions available&quot;...i&#39;m adding a picture for clarity.![enter image description here](https://i.stack.imgur.com/nFKxv.png)\r\n\r\ni&#39;ll appreciate any help!\r\n\r\np.s. the project is built for java 8, i seem to have java 13... i also have java 8 on my pc but when i type &quot;java -version&quot; in cmd it says 13\r\n\r\n**UPDATE: I switched the jre version to 1.8 in Eclipse and now there&#39;s 1 error left (see picture below)**\r\n[HERE IS THE LAST ERROR][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/L0jDN.png","title":"Total noob-can&#39;t run gradle tasks","body":"<p>i'm trying to use Eclipse IDE to do an assignment but i can't run gradle tasks...\nit says &quot;no actions available&quot;...i'm adding a picture for clarity.<img src=\"https://i.stack.imgur.com/nFKxv.png\" alt=\"enter image description here\" /></p>\n<p>i'll appreciate any help!</p>\n<p>p.s. the project is built for java 8, i seem to have java 13... i also have java 8 on my pc but when i type &quot;java -version&quot; in cmd it says 13</p>\n<p><strong>UPDATE: I switched the jre version to 1.8 in Eclipse and now there's 1 error left (see picture below)</strong>\n<a href=\"https://i.stack.imgur.com/L0jDN.png\" rel=\"nofollow noreferrer\">HERE IS THE LAST ERROR</a></p>\n"},{"tags":["java","json","mongodb","csv"],"comments":[{"owner":{"account_id":3175948,"reputation":74316,"user_id":2683814,"accept_rate":100,"display_name":"s7vr"},"score":0,"creation_date":1519949766,"post_id":49060563,"comment_id":85126611,"body_markdown":"Are you trying to insert the entire csv file as a single array document in mongodb ? Document.parse is designed to work with single document not arrays.","body":"Are you trying to insert the entire csv file as a single array document in mongodb ? Document.parse is designed to work with single document not arrays."},{"owner":{"account_id":7503782,"reputation":1490,"user_id":5701102,"accept_rate":72,"display_name":"Rose"},"score":0,"creation_date":1519949830,"post_id":49060563,"comment_id":85126629,"body_markdown":"@Veeram Yes. Is that not a right way to do?","body":"@Veeram Yes. Is that not a right way to do?"},{"owner":{"account_id":3175948,"reputation":74316,"user_id":2683814,"accept_rate":100,"display_name":"s7vr"},"score":0,"creation_date":1519949860,"post_id":49060563,"comment_id":85126633,"body_markdown":"It depends what you wanting to do with it. Take a look at this [answer](https://stackoverflow.com/questions/34436952/json-parse-equivalent-in-mongo-driver-3-x-for-java). It may help you.","body":"It depends what you wanting to do with it. Take a look at this <a href=\"https://stackoverflow.com/questions/34436952/json-parse-equivalent-in-mongo-driver-3-x-for-java\">answer</a>. It may help you."},{"owner":{"account_id":7503782,"reputation":1490,"user_id":5701102,"accept_rate":72,"display_name":"Rose"},"score":0,"creation_date":1519950166,"post_id":49060563,"comment_id":85126720,"body_markdown":"@Veeram Basically, I want to store it in MongoDB collection and then later access the collection from another java application and get values like for a particular query, get its type,url and description.","body":"@Veeram Basically, I want to store it in MongoDB collection and then later access the collection from another java application and get values like for a particular query, get its type,url and description."},{"owner":{"account_id":3175948,"reputation":74316,"user_id":2683814,"accept_rate":100,"display_name":"s7vr"},"score":0,"creation_date":1519950196,"post_id":49060563,"comment_id":85126727,"body_markdown":"Okay then you should save them as separate documents.","body":"Okay then you should save them as separate documents."},{"owner":{"account_id":7503782,"reputation":1490,"user_id":5701102,"accept_rate":72,"display_name":"Rose"},"score":0,"creation_date":1520383395,"post_id":49060563,"comment_id":85290257,"body_markdown":"@Veeram Hi Veeram. Can you help me with this https://stackoverflow.com/questions/49139226/java-how-to-insert-a-hashmap-into-mongodb ? I couldn&#39;t find anything about this online. Most of the answer are from the older version of MongoDB","body":"@Veeram Hi Veeram. Can you help me with this <a href=\"https://stackoverflow.com/questions/49139226/java-how-to-insert-a-hashmap-into-mongodb\" title=\"java how to insert a hashmap into mongodb\">stackoverflow.com/questions/49139226/&hellip;</a> ? I couldn&#39;t find anything about this online. Most of the answer are from the older version of MongoDB"}],"answers":[{"tags":[],"owner":{"account_id":3175948,"reputation":74316,"user_id":2683814,"accept_rate":100,"display_name":"s7vr"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1519956383,"creation_date":1519950336,"answer_id":49060906,"question_id":49060563,"body_markdown":"There is no direct conversion from json array to Document. Document.parse works with single document and is the reason for error.\r\n\r\nYou can update your method to remove the intermediate CreateJSON object and ObjectMapper and directly map the csv line to Document and collect them as List&lt;Document&gt;.\r\n\r\nMove the below method to main class as static method and use InsertMany to insert all document.\r\n\r\n \r\nMain method.\r\n\r\n    public class Main {\r\n\r\n    public static void main(String[] args) throws FileNotFoundException, IOException {\r\n        ConnectMongoDB mongo = new ConnectMongoDB();\r\n        mongo.connectToMongoDB(createJsonFromCSV());\r\n    }\r\n\r\n    public static List&lt;Document&gt; createJsonFromCSV() throws IOException {\r\n        String csvFile = &quot;C:\\\\Projects\\\\frontKeymatch_default_frontend.csv&quot;;\r\n        List&lt;Document&gt; createObjects = null;\r\n        Pattern pattern = Pattern.compile(&quot;,&quot;);\r\n        try (BufferedReader in = new BufferedReader(new FileReader(csvFile));){\r\n              createObjects = in.lines().map(line -&gt;{\r\n                 String[] x = pattern.split(line);\r\n                 return new Document(&quot;query&quot;,x[0]).append(&quot;type&quot;, x[1]) //append other fields\r\n              }).collect(Collectors.toList());\r\n           }\r\n         return createObjects;\r\n        }\r\n    }\r\n\r\n    public class ConnectMongoDB{\r\n        public void connectToMongoDB(List&lt;Document&gt; docs) throws IOException {\r\n        MongoClient mongo = new MongoClient( &quot;localhost&quot; ,27017);\r\n        mongo.getDatabase(&quot;db&quot;).getCollection(&quot;collection&quot;).insertMany(docs);\r\n        System.out.println(&quot;success&quot;);\r\n       }\r\n    }   \r\n\r\n\r\n\r\n","title":"Java: Error while inserting json array into MongoDB","body":"<p>There is no direct conversion from json array to Document. Document.parse works with single document and is the reason for error.</p>\n\n<p>You can update your method to remove the intermediate CreateJSON object and ObjectMapper and directly map the csv line to Document and collect them as List.</p>\n\n<p>Move the below method to main class as static method and use InsertMany to insert all document.</p>\n\n<p>Main method.</p>\n\n<pre><code>public class Main {\n\npublic static void main(String[] args) throws FileNotFoundException, IOException {\n    ConnectMongoDB mongo = new ConnectMongoDB();\n    mongo.connectToMongoDB(createJsonFromCSV());\n}\n\npublic static List&lt;Document&gt; createJsonFromCSV() throws IOException {\n    String csvFile = \"C:\\\\Projects\\\\frontKeymatch_default_frontend.csv\";\n    List&lt;Document&gt; createObjects = null;\n    Pattern pattern = Pattern.compile(\",\");\n    try (BufferedReader in = new BufferedReader(new FileReader(csvFile));){\n          createObjects = in.lines().map(line -&gt;{\n             String[] x = pattern.split(line);\n             return new Document(\"query\",x[0]).append(\"type\", x[1]) //append other fields\n          }).collect(Collectors.toList());\n       }\n     return createObjects;\n    }\n}\n\npublic class ConnectMongoDB{\n    public void connectToMongoDB(List&lt;Document&gt; docs) throws IOException {\n    MongoClient mongo = new MongoClient( \"localhost\" ,27017);\n    mongo.getDatabase(\"db\").getCollection(\"collection\").insertMany(docs);\n    System.out.println(\"success\");\n   }\n}   \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2360496,"reputation":7506,"user_id":2067264,"accept_rate":67,"display_name":"Drunken Daddy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648062155,"creation_date":1648062155,"answer_id":71592681,"question_id":49060563,"body_markdown":"In my case, I missed the curly brackets around group pipline in my MongoRepository i.e. I wrote\r\n\r\n    @Aggregation(pipeline = {\r\n            &quot;$group: { _id: { $dateToString: { date: &#39;$createdDate&#39;, format: &#39;%Y-%m&#39; } }, count: { $sum: 1 } }&quot;\r\n    })\r\n    AggregationResults&lt;SubmissionCount&gt; getSubmissionsCountPerMonth();\r\n\r\ninstead of\r\n\r\n    @Aggregation(pipeline = {\r\n            &quot;{ $group: { _id: { $dateToString: { date: &#39;$createdDate&#39;, format: &#39;%Y-%m&#39; } }, count: { $sum: 1 } } }&quot;\r\n    })\r\n    AggregationResults&lt;SubmissionCount&gt; getSubmissionsCountPerMonth();\r\n\r\n\r\n\r\n","title":"Java: Error while inserting json array into MongoDB","body":"<p>In my case, I missed the curly brackets around group pipline in my MongoRepository i.e. I wrote</p>\n<pre><code>@Aggregation(pipeline = {\n        &quot;$group: { _id: { $dateToString: { date: '$createdDate', format: '%Y-%m' } }, count: { $sum: 1 } }&quot;\n})\nAggregationResults&lt;SubmissionCount&gt; getSubmissionsCountPerMonth();\n</code></pre>\n<p>instead of</p>\n<pre><code>@Aggregation(pipeline = {\n        &quot;{ $group: { _id: { $dateToString: { date: '$createdDate', format: '%Y-%m' } }, count: { $sum: 1 } } }&quot;\n})\nAggregationResults&lt;SubmissionCount&gt; getSubmissionsCountPerMonth();\n</code></pre>\n"}],"owner":{"account_id":7503782,"reputation":1490,"user_id":5701102,"accept_rate":72,"display_name":"Rose"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6583,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49060906,"answer_count":2,"score":1,"last_activity_date":1648062155,"creation_date":1519947765,"question_id":49060563,"body_markdown":"I am working on inserting a CSV file into MongoDB. First I am converting my CSV into Json formatted array (Reference: https://dzone.com/articles/how-to-convert-csv-to-json-in-java) and then trying to upload it into MongoDB, but facing the below error(**readStartDocument can only be called when CurrentBSONType is DOCUMENT, not when CurrentBSONType is ARRAY.**):\r\n\r\n    Exception in thread &quot;main&quot; org.bson.BsonInvalidOperationException: readStartDocument can only be called when CurrentBSONType is DOCUMENT, not when CurrentBSONType is ARRAY.\r\n    \tat org.bson.AbstractBsonReader.verifyBSONType(AbstractBsonReader.java:692)\r\n    \tat org.bson.AbstractBsonReader.checkPreconditions(AbstractBsonReader.java:724)\r\n    \tat org.bson.AbstractBsonReader.readStartDocument(AbstractBsonReader.java:452)\r\n    \tat org.bson.codecs.DocumentCodec.decode(DocumentCodec.java:148)\r\n    \tat org.bson.codecs.DocumentCodec.decode(DocumentCodec.java:45)\r\n    \tat org.bson.Document.parse(Document.java:105)\r\n    \tat org.bson.Document.parse(Document.java:90)\r\n    \tat com.ucm.json.ConnectMongoDB.connectToMongoDB(ConnectMongoDB.java:52)\r\n    \tat com.ucm.json.Main.main(Main.java:15)\r\n\r\nMy JSON string(result) looks like below:\r\n\r\n    [ {\r\n      &quot;query&quot; : &quot;ecn&quot;,\r\n      &quot;type&quot; : &quot;KeywordMatch&quot;,\r\n      &quot;url&quot; : &quot;http://insidedell.com/ecn&quot;,\r\n      &quot;description&quot; : &quot;ECN&quot;\r\n    }, {\r\n      &quot;query&quot; : &quot;product marketing&quot;,\r\n      &quot;type&quot; : &quot;PhraseMatch&quot;,\r\n      &quot;url&quot; : &quot;http://dellemc.com/product&quot;,\r\n      &quot;description&quot; : &quot;Products&quot;\r\n    }, {\r\n      &quot;query&quot; : &quot;jive&quot;,\r\n      &quot;type&quot; : &quot;ExactMatch&quot;,\r\n      &quot;url&quot; : &quot;http://test.com/jive&quot;,\r\n      &quot;description&quot; : &quot;Jive test&quot;\r\n    } ]\r\nBelow is my code:\r\n**Step 1**: Convert CSV into JSON format string array\r\n\r\n    public class CreateJSON {\r\n    \r\n    \tpublic String query;\r\n    \tpublic String type;\r\n    \tpublic String url;\r\n    \tpublic String description; \r\n    \tString result ;\r\n    \tpublic CreateJSON() {\r\n    \t\t\r\n    \t}\r\n    \tpublic CreateJSON(String query,String type,String url,String description) {\r\n    \t\tthis.query = query;\r\n    \t\tthis.type = type;\r\n    \t\tthis.url = url;\r\n    \t\tthis.description = description;\r\n    \t\t\r\n    \t}\r\n    \r\n    \tpublic String createJsonFromCSV() throws IOException{\r\n    \t\tString csvFile = &quot;C:\\\\Projects\\\\frontKeymatch_default_frontend.csv&quot;;\r\n    \t\t\r\n    \t\tList&lt;CreateJSON&gt; createObjects = null;\r\n    \t\tPattern pattern = Pattern.compile(&quot;,&quot;);\r\n    \t\ttry (BufferedReader in = new BufferedReader(new FileReader(csvFile));){\r\n    \t\t\t\r\n    \t\t\tcreateObjects = in.lines().map(line -&gt;{\r\n    \t\t\t\tString[] x = pattern.split(line);\r\n    \t\t\t\treturn new CreateJSON(x[0],x[1],x[2],x[3]);\r\n    \r\n    \t\t\t}).collect(Collectors.toList());\r\n    \t\t\t\r\n    \t\t\t\r\n    \t\t\t ObjectMapper mapper = new ObjectMapper();\r\n    \t\t\t mapper.enable(SerializationFeature.INDENT_OUTPUT);\r\n    \t\t\t result =  mapper.writeValueAsString(createObjects);\r\n    \r\n    \t\t} \r\n    \t\t return result;\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\n**Step 2)** Connect to MongoDB and insert the data\r\n\r\n    public class ConnectMongoDB{\r\n        public void connectToMongoDB(String resultFromCSV) throws JsonGenerationException, JsonMappingException, IOException {\r\n        \t\t\r\n        MongoClient mongo = new MongoClient( &quot;localhost&quot; ,27017);\r\n        Document doc = Document.parse(resultFromCSV);\r\n        \t\t\r\n        \t\tmongo.getDatabase(&quot;db&quot;).getCollection(&quot;collection&quot;).insertOne(doc);\r\n        \t\t\r\n        \t\tSystem.out.println(&quot;success&quot;);\r\n        \t\t\r\n        \t}\r\n       } \t\r\n\r\n**Step 3:** My main method:\r\n\r\n    public class Main {\r\n    \r\n    \tpublic static void main(String[] args) throws FileNotFoundException, IOException {\r\n    \r\n    \t\tCreateJSON upload = new CreateJSON();\r\n    \t\tConnectMongoDB mongo = new ConnectMongoDB();\r\n    \t\tmongo.connectToMongoDB(upload.createJsonFromCSV());\r\n    \t}\r\n    \r\n    }\r\n\r\nAny help is appreciated. Thanks","title":"Java: Error while inserting json array into MongoDB","body":"<p>I am working on inserting a CSV file into MongoDB. First I am converting my CSV into Json formatted array (Reference: <a href=\"https://dzone.com/articles/how-to-convert-csv-to-json-in-java\" rel=\"nofollow noreferrer\">https://dzone.com/articles/how-to-convert-csv-to-json-in-java</a>) and then trying to upload it into MongoDB, but facing the below error(<strong>readStartDocument can only be called when CurrentBSONType is DOCUMENT, not when CurrentBSONType is ARRAY.</strong>):</p>\n\n<pre><code>Exception in thread \"main\" org.bson.BsonInvalidOperationException: readStartDocument can only be called when CurrentBSONType is DOCUMENT, not when CurrentBSONType is ARRAY.\n    at org.bson.AbstractBsonReader.verifyBSONType(AbstractBsonReader.java:692)\n    at org.bson.AbstractBsonReader.checkPreconditions(AbstractBsonReader.java:724)\n    at org.bson.AbstractBsonReader.readStartDocument(AbstractBsonReader.java:452)\n    at org.bson.codecs.DocumentCodec.decode(DocumentCodec.java:148)\n    at org.bson.codecs.DocumentCodec.decode(DocumentCodec.java:45)\n    at org.bson.Document.parse(Document.java:105)\n    at org.bson.Document.parse(Document.java:90)\n    at com.ucm.json.ConnectMongoDB.connectToMongoDB(ConnectMongoDB.java:52)\n    at com.ucm.json.Main.main(Main.java:15)\n</code></pre>\n\n<p>My JSON string(result) looks like below:</p>\n\n<pre><code>[ {\n  \"query\" : \"ecn\",\n  \"type\" : \"KeywordMatch\",\n  \"url\" : \"http://insidedell.com/ecn\",\n  \"description\" : \"ECN\"\n}, {\n  \"query\" : \"product marketing\",\n  \"type\" : \"PhraseMatch\",\n  \"url\" : \"http://dellemc.com/product\",\n  \"description\" : \"Products\"\n}, {\n  \"query\" : \"jive\",\n  \"type\" : \"ExactMatch\",\n  \"url\" : \"http://test.com/jive\",\n  \"description\" : \"Jive test\"\n} ]\n</code></pre>\n\n<p>Below is my code:\n<strong>Step 1</strong>: Convert CSV into JSON format string array</p>\n\n<pre><code>public class CreateJSON {\n\n    public String query;\n    public String type;\n    public String url;\n    public String description; \n    String result ;\n    public CreateJSON() {\n\n    }\n    public CreateJSON(String query,String type,String url,String description) {\n        this.query = query;\n        this.type = type;\n        this.url = url;\n        this.description = description;\n\n    }\n\n    public String createJsonFromCSV() throws IOException{\n        String csvFile = \"C:\\\\Projects\\\\frontKeymatch_default_frontend.csv\";\n\n        List&lt;CreateJSON&gt; createObjects = null;\n        Pattern pattern = Pattern.compile(\",\");\n        try (BufferedReader in = new BufferedReader(new FileReader(csvFile));){\n\n            createObjects = in.lines().map(line -&gt;{\n                String[] x = pattern.split(line);\n                return new CreateJSON(x[0],x[1],x[2],x[3]);\n\n            }).collect(Collectors.toList());\n\n\n             ObjectMapper mapper = new ObjectMapper();\n             mapper.enable(SerializationFeature.INDENT_OUTPUT);\n             result =  mapper.writeValueAsString(createObjects);\n\n        } \n         return result;\n\n    }\n}\n</code></pre>\n\n<p><strong>Step 2)</strong> Connect to MongoDB and insert the data</p>\n\n<pre><code>public class ConnectMongoDB{\n    public void connectToMongoDB(String resultFromCSV) throws JsonGenerationException, JsonMappingException, IOException {\n\n    MongoClient mongo = new MongoClient( \"localhost\" ,27017);\n    Document doc = Document.parse(resultFromCSV);\n\n            mongo.getDatabase(\"db\").getCollection(\"collection\").insertOne(doc);\n\n            System.out.println(\"success\");\n\n        }\n   }    \n</code></pre>\n\n<p><strong>Step 3:</strong> My main method:</p>\n\n<pre><code>public class Main {\n\n    public static void main(String[] args) throws FileNotFoundException, IOException {\n\n        CreateJSON upload = new CreateJSON();\n        ConnectMongoDB mongo = new ConnectMongoDB();\n        mongo.connectToMongoDB(upload.createJsonFromCSV());\n    }\n\n}\n</code></pre>\n\n<p>Any help is appreciated. Thanks</p>\n"},{"tags":["java","for-loop"],"comments":[{"owner":{"account_id":16509210,"reputation":564,"user_id":11928455,"display_name":"Amimul Ehsan Rahi"},"score":0,"creation_date":1648060641,"post_id":71592038,"comment_id":126531536,"body_markdown":"can you share the full question? I think only partial question is here.","body":"can you share the full question? I think only partial question is here."}],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648061589,"creation_date":1648061589,"answer_id":71592547,"question_id":71592038,"body_markdown":"You may compute the row index, then it&#39;s easy to get the number ranges\r\n\r\n\r\n    for (int i = width; i &gt;= 1; i -= 2) {\r\n        int row_idx = (width - i) / 2;\r\n        for (int j = 1; j &lt;= i; j++) {\r\n            System.out.print(&quot; &quot;);\r\n        }\r\n        for (int j = i; j &lt;= i + row_idx; j++) {\r\n            System.out.print(j + &quot; &quot;);\r\n        }\r\n        for (int j = i - 1 + row_idx; j &gt;= i; j--) {\r\n            System.out.print(j + &quot; &quot;);\r\n        }\r\n        System.out.println();\r\n    }\r\n\r\n","title":"Java Number Pyramid","body":"<p>You may compute the row index, then it's easy to get the number ranges</p>\n<pre><code>for (int i = width; i &gt;= 1; i -= 2) {\n    int row_idx = (width - i) / 2;\n    for (int j = 1; j &lt;= i; j++) {\n        System.out.print(&quot; &quot;);\n    }\n    for (int j = i; j &lt;= i + row_idx; j++) {\n        System.out.print(j + &quot; &quot;);\n    }\n    for (int j = i - 1 + row_idx; j &gt;= i; j--) {\n        System.out.print(j + &quot; &quot;);\n    }\n    System.out.println();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16509210,"reputation":564,"user_id":11928455,"display_name":"Amimul Ehsan Rahi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648061993,"creation_date":1648061993,"answer_id":71592644,"question_id":71592038,"body_markdown":"You just need to count the level. You can do this by adding additional count variable. Lets take an example: \r\n \r\n\r\n 1. On level 0 you just print 7 and count is 0. \r\n 2. On level 1 count is 1. So you need to only print from i&#39;s current value + count amount on left and right. But since we counted 1 extra on left so a value will be less on right. \r\n\r\n\r\n.........\r\nAnd code will go on like this. \r\n\r\nSee code for better explanation:\r\n```\r\npublic static void main( String[] args ) {\r\n\r\n        Scanner myScan = new Scanner(System.in);\r\n\r\n        System.out.print(&quot;Enter mountain width: &quot;);\r\n\r\n        int width = myScan.nextInt();\r\n\r\n        System.out.println(&quot;Here is your mountain &quot;);\r\n\r\n        myScan.close();\r\n\r\n        System.out.println();\r\n\r\n        int counter = 0;\r\n\r\n        for (int i = width; i &gt;= 1; i = i - 2) {\r\n\r\n            for (int j = 1; j &lt;= i; j++) {\r\n                System.out.print(&quot; &quot;);\r\n            }\r\n\r\n            for (int j = i; j &lt;= width - counter; j++) {\r\n                System.out.print(j + &quot; &quot;);\r\n            }\r\n\r\n            for (int j = width - 1 - counter; j &gt;= i; j--) {\r\n                System.out.print(j + &quot; &quot;);\r\n            }\r\n\r\n            System.out.println();\r\n\r\n            counter++;\r\n        }\r\n    }\r\n```\r\n\r\nI just changed a little bit on your code to make it work. Cheers mate !","title":"Java Number Pyramid","body":"<p>You just need to count the level. You can do this by adding additional count variable. Lets take an example:</p>\n<ol>\n<li>On level 0 you just print 7 and count is 0.</li>\n<li>On level 1 count is 1. So you need to only print from i's current value + count amount on left and right. But since we counted 1 extra on left so a value will be less on right.</li>\n</ol>\n<p>.........\nAnd code will go on like this.</p>\n<p>See code for better explanation:</p>\n<pre><code>public static void main( String[] args ) {\n\n        Scanner myScan = new Scanner(System.in);\n\n        System.out.print(&quot;Enter mountain width: &quot;);\n\n        int width = myScan.nextInt();\n\n        System.out.println(&quot;Here is your mountain &quot;);\n\n        myScan.close();\n\n        System.out.println();\n\n        int counter = 0;\n\n        for (int i = width; i &gt;= 1; i = i - 2) {\n\n            for (int j = 1; j &lt;= i; j++) {\n                System.out.print(&quot; &quot;);\n            }\n\n            for (int j = i; j &lt;= width - counter; j++) {\n                System.out.print(j + &quot; &quot;);\n            }\n\n            for (int j = width - 1 - counter; j &gt;= i; j--) {\n                System.out.print(j + &quot; &quot;);\n            }\n\n            System.out.println();\n\n            counter++;\n        }\n    }\n</code></pre>\n<p>I just changed a little bit on your code to make it work. Cheers mate !</p>\n"}],"owner":{"account_id":19688102,"reputation":3,"user_id":14441387,"display_name":"ba4pple"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71592547,"answer_count":2,"score":0,"last_activity_date":1648061993,"creation_date":1648058941,"question_id":71592038,"body_markdown":"I want to create a number pyramid like this,\r\n\r\n          7\r\n        5 6 5\r\n      3 4 5 4 3 \r\n    1 2 3 4 3 2 1\r\n\r\nbut I couldn&#39;t create it. I pasted my code and its output is like this,\r\n\r\n                7\r\n            5 6 7 6 5\r\n        3 4 5 6 7 6 5 4 3\r\n    1 2 3 4 5 6 7 6 5 4 3 2 1\r\n\r\nWhat should I do to fix this ? Is my code totally wrong or litte changes are enough ?\r\n\r\n```\r\nimport java.util.Scanner;\r\npublic class App {\r\n    public static void main(String[] args){\r\n\r\n        Scanner myScan = new Scanner(System.in);\r\n        System.out.print(&quot;Enter mountain width: &quot;);\r\n        int width = myScan.nextInt();\r\n        System.out.println(&quot;Here is your mountain &quot;);\r\n        myScan.close();\r\n        System.out.println();\r\n\r\n        for (int i = width; i &gt;= 1; i=i-2)\r\n        {\r\n            for (int j = 1; j &lt;= i*2; j++)\r\n            {\r\n                System.out.print(&quot; &quot;);\r\n            }\r\n \r\n            for (int j = i; j &lt;= width; j++)          \r\n            {\r\n                System.out.print(j+&quot; &quot;);\r\n            }\r\n \r\n            for (int j = width-1; j &gt;= i; j--)\r\n            {               \r\n                System.out.print(j+&quot; &quot;);            \r\n            }\r\n\r\n            System.out.println();\r\n        }\r\n\r\n    }\r\n}\r\n```","title":"Java Number Pyramid","body":"<p>I want to create a number pyramid like this,</p>\n<pre><code>      7\n    5 6 5\n  3 4 5 4 3 \n1 2 3 4 3 2 1\n</code></pre>\n<p>but I couldn't create it. I pasted my code and its output is like this,</p>\n<pre><code>            7\n        5 6 7 6 5\n    3 4 5 6 7 6 5 4 3\n1 2 3 4 5 6 7 6 5 4 3 2 1\n</code></pre>\n<p>What should I do to fix this ? Is my code totally wrong or litte changes are enough ?</p>\n<pre><code>import java.util.Scanner;\npublic class App {\n    public static void main(String[] args){\n\n        Scanner myScan = new Scanner(System.in);\n        System.out.print(&quot;Enter mountain width: &quot;);\n        int width = myScan.nextInt();\n        System.out.println(&quot;Here is your mountain &quot;);\n        myScan.close();\n        System.out.println();\n\n        for (int i = width; i &gt;= 1; i=i-2)\n        {\n            for (int j = 1; j &lt;= i*2; j++)\n            {\n                System.out.print(&quot; &quot;);\n            }\n \n            for (int j = i; j &lt;= width; j++)          \n            {\n                System.out.print(j+&quot; &quot;);\n            }\n \n            for (int j = width-1; j &gt;= i; j--)\n            {               \n                System.out.print(j+&quot; &quot;);            \n            }\n\n            System.out.println();\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["java","kotlin","generics"],"comments":[{"owner":{"account_id":12411897,"reputation":8867,"user_id":12191177,"display_name":"IR42"},"score":0,"creation_date":1648052385,"post_id":71590109,"comment_id":126528209,"body_markdown":"It should be `override fun findById(id: Int): Mono&lt;SomeClass&gt; { ...` in AbstractRepository","body":"It should be <code>override fun findById(id: Int): Mono&lt;SomeClass&gt; { ...</code> in AbstractRepository"},{"owner":{"account_id":13336571,"reputation":493,"user_id":9626243,"display_name":"Vitaliy Tsirkunov"},"score":0,"creation_date":1648060101,"post_id":71590109,"comment_id":126531341,"body_markdown":"Thank you. I have corrected the text.","body":"Thank you. I have corrected the text."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1648061404,"post_id":71590109,"comment_id":126531782,"body_markdown":"That correction may, in fact, fix your issue.  Does it?","body":"That correction may, in fact, fix your issue.  Does it?"},{"owner":{"account_id":13336571,"reputation":493,"user_id":9626243,"display_name":"Vitaliy Tsirkunov"},"score":0,"creation_date":1648064951,"post_id":71590109,"comment_id":126532859,"body_markdown":"No. There was just a mistake I had made when I tried to simplify the code for the question.","body":"No. There was just a mistake I had made when I tried to simplify the code for the question."}],"answers":[{"tags":[],"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648061869,"creation_date":1648061869,"answer_id":71592613,"question_id":71590109,"body_markdown":"You can override and call through to the super-class implementation that is using the unboxed `int`:\r\n\r\n```lang-java\r\npublic class SomeRepository extends AbstractRepository {\r\n    \r\n    @NotNull\r\n    public Mono&lt;SomeClass&gt; findById(@NotNull Integer id) {\r\n        return findById(id.intValue());\r\n    }\r\n    \r\n}\r\n```","title":"How to extend Generic Kotlin class in Java?","body":"<p>You can override and call through to the super-class implementation that is using the unboxed <code>int</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SomeRepository extends AbstractRepository {\n    \n    @NotNull\n    public Mono&lt;SomeClass&gt; findById(@NotNull Integer id) {\n        return findById(id.intValue());\n    }\n    \n}\n</code></pre>\n"}],"owner":{"account_id":13336571,"reputation":493,"user_id":9626243,"display_name":"Vitaliy Tsirkunov"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1648061869,"creation_date":1648050231,"question_id":71590109,"body_markdown":"In Kotlin I have a generic interface:\r\n\r\n    interface Repository&lt;I : Comparable&lt;I&gt;&gt; {\r\n        fun findById(id: I): Mono&lt;SomeClass&gt;\r\n    }\r\n\r\nAnd there is an abstract class which defines the method.\r\n\r\n    abstract class AbstractRepository: Repository&lt;Int&gt; {\r\n        override fun findById(id: Int): Mono&lt;SomeClass&gt; {\r\n           ...\r\n        }\r\n    }\r\n\r\nThen I want to extend this class in Java:\r\n\r\n    public class SomeRepository extends AbstractRepository {}\r\n\r\nThis causes the compilation error saying that SomeRepository is not abstract and does not override abstract method findById(Integer) in Repository. I understand that this is because the AbstractRepository and Repository signatures for the method are different. But how to solve the problem?","title":"How to extend Generic Kotlin class in Java?","body":"<p>In Kotlin I have a generic interface:</p>\n<pre><code>interface Repository&lt;I : Comparable&lt;I&gt;&gt; {\n    fun findById(id: I): Mono&lt;SomeClass&gt;\n}\n</code></pre>\n<p>And there is an abstract class which defines the method.</p>\n<pre><code>abstract class AbstractRepository: Repository&lt;Int&gt; {\n    override fun findById(id: Int): Mono&lt;SomeClass&gt; {\n       ...\n    }\n}\n</code></pre>\n<p>Then I want to extend this class in Java:</p>\n<pre><code>public class SomeRepository extends AbstractRepository {}\n</code></pre>\n<p>This causes the compilation error saying that SomeRepository is not abstract and does not override abstract method findById(Integer) in Repository. I understand that this is because the AbstractRepository and Repository signatures for the method are different. But how to solve the problem?</p>\n"},{"tags":["java","maven","jar","pom.xml","jacoco"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1648062771,"post_id":71592587,"comment_id":126532197,"body_markdown":"Why are you changing the defaults like `&lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;        &lt;testSourceDirectory&gt;src/test&lt;/testSourceDirectory&gt;` that does not make sense... keep the conventions. If you have unit tests why don&#39;t you have classes in `src/main/java`?","body":"Why are you changing the defaults like <code>&lt;sourceDirectory&gt;src&lt;&#47;sourceDirectory&gt;        &lt;testSourceDirectory&gt;src&#47;test&lt;&#47;testSourceDirectory&gt;</code> that does not make sense... keep the conventions. If you have unit tests why don&#39;t you have classes in <code>src&#47;main&#47;java</code>?"},{"owner":{"account_id":16836810,"reputation":63,"user_id":12173257,"display_name":"lilith"},"score":0,"creation_date":1648109309,"post_id":71592587,"comment_id":126542047,"body_markdown":"@khmarbaise cause the classes I want to test are in a jar file","body":"@khmarbaise cause the classes I want to test are in a jar file"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1648109410,"post_id":71592587,"comment_id":126542081,"body_markdown":"Why? Unit tests belong to the module they are in... As I wrote. Production code `src/main/java` unit tests `src/test/java` makes things easier...","body":"Why? Unit tests belong to the module they are in... As I wrote. Production code <code>src&#47;main&#47;java</code> unit tests <code>src&#47;test&#47;java</code> makes things easier..."}],"owner":{"account_id":16836810,"reputation":63,"user_id":12173257,"display_name":"lilith"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":447,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1648061775,"creation_date":1648061775,"question_id":71592587,"body_markdown":"I am trying to get the coverage of a few test cases related to an open source project of which I got the jar file. \r\n\r\nI&#39;m using maven as automatic build tool and the jacoco plugin for maven to get the coverage of the tests on the project. \r\n\r\nWhat I would like to achieve is the same output that I can get with the command:\r\n\r\n``` \r\n-jar jacococli.jar report jacoco.exec \\\r\n                       --classfiles &lt;project.jar&gt; \\\r\n                       --sourcefiles &lt;myTestsDirectory&gt; \\\r\n                       --html &lt;jacocoReportsDirectory&gt; \\\r\n                       --xml &lt;jacocoReportsDirectory&gt;coverageFile.xml \\\r\n                       --csv &lt;jacocoReportsDirectory&gt;coverageFile.csv\r\n``` \r\n\r\nWhen I run this from the commandline I can retrieve the report for the coverage computed on the whole project (the jar). \r\n\r\nI don&#39;t know how to insert this command (or something that can get me the same output) in the pom. I tried to put it in the surefire plugin argLine (with the -javaagent command) but this got me nowhere.\r\n\r\nThis is where I got so far:\r\n\r\n``` \r\n&lt;build&gt;\r\n        &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\r\n        &lt;testSourceDirectory&gt;src/test&lt;/testSourceDirectory&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.8.7&lt;/version&gt;\r\n\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;prepare-agent&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                       &lt;/goals&gt;\r\n                   &lt;/execution&gt;\r\n                   &lt;execution&gt;\r\n                       &lt;id&gt;report&lt;/id&gt;\r\n                       &lt;phase&gt;prepare-package&lt;/phase&gt;\r\n                       &lt;goals&gt;\r\n                           &lt;goal&gt;report&lt;/goal&gt;\r\n                       &lt;/goals&gt;\r\n                   &lt;/execution&gt;\r\n                   &lt;execution&gt;\r\n                       &lt;id&gt;post-unit-test&lt;/id&gt;\r\n                       &lt;phase&gt;test&lt;/phase&gt;\r\n                       &lt;goals&gt;\r\n                           &lt;goal&gt;report&lt;/goal&gt;\r\n                       &lt;/goals&gt;\r\n                       &lt;configuration&gt;\r\n                           &lt;dataFile&gt;target/coverage-reports/jacoco.exec&lt;/dataFile&gt;\r\n                           &lt;outputDirectory&gt;target/coverage-reports/jacoco-reports&lt;/outputDirectory&gt;\r\n                     &lt;/configuration&gt;\r\n                   &lt;/execution&gt;\r\n               &lt;/executions&gt;\r\n           &lt;/plugin&gt;\r\n           &lt;plugin&gt;\r\n               &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n               &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n               &lt;version&gt;3.0.0-M4&lt;/version&gt;\r\n               &lt;configuration&gt;\r\n                   &lt;argLine&gt;\r\n                       -javaagent:lib/jacocoagent.jar=destfile=target/coverage-reports/jacoco.exec\r\n                   &lt;/argLine&gt;\r\n                   &lt;reportsDirectory&gt;target/coverage-reports/surefire-reports&lt;/reportsDirectory&gt;\r\n               &lt;/configuration&gt;\r\n           &lt;/plugin&gt;\r\n       &lt;/plugins&gt;\r\n   &lt;/build&gt;\r\n``` \r\n\r\nGiving the whole src directory as the sourceDirectory gets my test cases as the target of the coverage computation and I don&#39;t want that.\r\n\r\n**Note: there are no java classes in src to which the tests are targeted, so there&#39;s no need to put that as sourceDirectory. I assume this has to point to the jar somehow.**","title":"JaCoCo tests run on a jar file from pom.xml","body":"<p>I am trying to get the coverage of a few test cases related to an open source project of which I got the jar file.</p>\n<p>I'm using maven as automatic build tool and the jacoco plugin for maven to get the coverage of the tests on the project.</p>\n<p>What I would like to achieve is the same output that I can get with the command:</p>\n<pre><code>-jar jacococli.jar report jacoco.exec \\\n                       --classfiles &lt;project.jar&gt; \\\n                       --sourcefiles &lt;myTestsDirectory&gt; \\\n                       --html &lt;jacocoReportsDirectory&gt; \\\n                       --xml &lt;jacocoReportsDirectory&gt;coverageFile.xml \\\n                       --csv &lt;jacocoReportsDirectory&gt;coverageFile.csv\n</code></pre>\n<p>When I run this from the commandline I can retrieve the report for the coverage computed on the whole project (the jar).</p>\n<p>I don't know how to insert this command (or something that can get me the same output) in the pom. I tried to put it in the surefire plugin argLine (with the -javaagent command) but this got me nowhere.</p>\n<p>This is where I got so far:</p>\n<pre><code>&lt;build&gt;\n        &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\n        &lt;testSourceDirectory&gt;src/test&lt;/testSourceDirectory&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.8.7&lt;/version&gt;\n\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;prepare-agent&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                       &lt;/goals&gt;\n                   &lt;/execution&gt;\n                   &lt;execution&gt;\n                       &lt;id&gt;report&lt;/id&gt;\n                       &lt;phase&gt;prepare-package&lt;/phase&gt;\n                       &lt;goals&gt;\n                           &lt;goal&gt;report&lt;/goal&gt;\n                       &lt;/goals&gt;\n                   &lt;/execution&gt;\n                   &lt;execution&gt;\n                       &lt;id&gt;post-unit-test&lt;/id&gt;\n                       &lt;phase&gt;test&lt;/phase&gt;\n                       &lt;goals&gt;\n                           &lt;goal&gt;report&lt;/goal&gt;\n                       &lt;/goals&gt;\n                       &lt;configuration&gt;\n                           &lt;dataFile&gt;target/coverage-reports/jacoco.exec&lt;/dataFile&gt;\n                           &lt;outputDirectory&gt;target/coverage-reports/jacoco-reports&lt;/outputDirectory&gt;\n                     &lt;/configuration&gt;\n                   &lt;/execution&gt;\n               &lt;/executions&gt;\n           &lt;/plugin&gt;\n           &lt;plugin&gt;\n               &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n               &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n               &lt;version&gt;3.0.0-M4&lt;/version&gt;\n               &lt;configuration&gt;\n                   &lt;argLine&gt;\n                       -javaagent:lib/jacocoagent.jar=destfile=target/coverage-reports/jacoco.exec\n                   &lt;/argLine&gt;\n                   &lt;reportsDirectory&gt;target/coverage-reports/surefire-reports&lt;/reportsDirectory&gt;\n               &lt;/configuration&gt;\n           &lt;/plugin&gt;\n       &lt;/plugins&gt;\n   &lt;/build&gt;\n</code></pre>\n<p>Giving the whole src directory as the sourceDirectory gets my test cases as the target of the coverage computation and I don't want that.</p>\n<p><strong>Note: there are no java classes in src to which the tests are targeted, so there's no need to put that as sourceDirectory. I assume this has to point to the jar somehow.</strong></p>\n"},{"tags":["java","spring-boot","unit-testing","junit","rest-assured"],"answers":[{"tags":[],"owner":{"account_id":9949128,"reputation":1376,"user_id":8286276,"accept_rate":77,"display_name":"Pelicer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1648061722,"creation_date":1648061722,"answer_id":71592571,"question_id":71592351,"body_markdown":"I found out that standaloneSetup has an overload that takes an MockMvcBuilder as argument. I could accomplish the customArgumentResolver with the following:\r\n\r\n    @BeforeEach\r\n        public void setup() {\r\n            RestAssuredMockMvc.standaloneSetup(MockMvcBuilders.standaloneSetup(controller).setCustomArgumentResolvers(new PageableHandlerMethodArgumentResolver())\r\n                    .setControllerAdvice(new NotificationItemControllerAdvice()));\r\n        }","title":"RestAssuredMvc cannot resolve Pageable","body":"<p>I found out that standaloneSetup has an overload that takes an MockMvcBuilder as argument. I could accomplish the customArgumentResolver with the following:</p>\n<pre><code>@BeforeEach\n    public void setup() {\n        RestAssuredMockMvc.standaloneSetup(MockMvcBuilders.standaloneSetup(controller).setCustomArgumentResolvers(new PageableHandlerMethodArgumentResolver())\n                .setControllerAdvice(new NotificationItemControllerAdvice()));\n    }\n</code></pre>\n"}],"owner":{"account_id":9949128,"reputation":1376,"user_id":8286276,"accept_rate":77,"display_name":"Pelicer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":366,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71592571,"answer_count":1,"score":0,"last_activity_date":1648061722,"creation_date":1648060643,"question_id":71592351,"body_markdown":"I&#39;m using RestAssured in my tests, in which I also mock the service layers. In order to do so, I had to change my test setup from `webAppContextSetup` to `standAloneSetup`. This way, I&#39;m able to create an instance of my controller and `@InjectMock` the mocked services into it.\r\n\r\n**Code:**\r\n\r\n    @BeforeEach\r\n    public void setup() {\r\n        RestAssuredMockMvc.standaloneSetup(controller); -&gt; Brakes test\r\n        RestAssuredMockMvc.webAppContextSetup(webApplicationContext); -&gt; Works fine\r\n    }\r\n\r\nThe test is the following:\r\n\r\n    Mockito.when(findService.findUnreadNotificationItems(Mockito.any(), Mockito.any(), Mockito.any()))\r\n                    .thenReturn(new PageImpl&lt;&gt;(List.of(generateDummyNotificationItemWithId())) {\r\n                    });\r\n    \r\n            final String response = given()\r\n                    .queryParam(&quot;page&quot;, &quot;0&quot;)\r\n                    .queryParam(&quot;size&quot;, &quot;10&quot;)\r\n                    .contentType(ContentType.JSON)\r\n                    .log().all()\r\n                    .when()\r\n                    .get(&quot;/notification/{groupName}/{userName}&quot;, &quot;subacquiring_viewers&quot;, &quot;John.Doe&quot;)\r\n                    .then()\r\n                    .log().all()\r\n                    .assertThat()\r\n                    .statusCode(HttpStatus.OK.value())\r\n                    .extract().asString();\r\n\r\nAnd the endpoint:\r\n\r\n    public Page&lt;NotificationItemResponse&gt; findUnreadNotifications(@PageableDefault(size = DEFAULT_PAGE_SIZE) final Pageable pageable,\r\n                @PathVariable final String groupName, @PathVariable final String userName)\r\n\r\nWhen I use the `standAloneSetup` I get the error: \r\n\r\n    No primary or single unique constructor found for interface org.springframework.data.domain.Pageable\r\n\r\nI&#39;ve seen a very similar question with good answers [here][1], but RestAssuredMvc does not have any resolvers, or at least I found nothing on it searching the web. **Can anyone help me resolve Pageables using RestAssuredMvc&#39;s standAloneSetup?**\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/22174665/isolated-controller-test-cant-instantiate-pageable","title":"RestAssuredMvc cannot resolve Pageable","body":"<p>I'm using RestAssured in my tests, in which I also mock the service layers. In order to do so, I had to change my test setup from <code>webAppContextSetup</code> to <code>standAloneSetup</code>. This way, I'm able to create an instance of my controller and <code>@InjectMock</code> the mocked services into it.</p>\n<p><strong>Code:</strong></p>\n<pre><code>@BeforeEach\npublic void setup() {\n    RestAssuredMockMvc.standaloneSetup(controller); -&gt; Brakes test\n    RestAssuredMockMvc.webAppContextSetup(webApplicationContext); -&gt; Works fine\n}\n</code></pre>\n<p>The test is the following:</p>\n<pre><code>Mockito.when(findService.findUnreadNotificationItems(Mockito.any(), Mockito.any(), Mockito.any()))\n                .thenReturn(new PageImpl&lt;&gt;(List.of(generateDummyNotificationItemWithId())) {\n                });\n\n        final String response = given()\n                .queryParam(&quot;page&quot;, &quot;0&quot;)\n                .queryParam(&quot;size&quot;, &quot;10&quot;)\n                .contentType(ContentType.JSON)\n                .log().all()\n                .when()\n                .get(&quot;/notification/{groupName}/{userName}&quot;, &quot;subacquiring_viewers&quot;, &quot;John.Doe&quot;)\n                .then()\n                .log().all()\n                .assertThat()\n                .statusCode(HttpStatus.OK.value())\n                .extract().asString();\n</code></pre>\n<p>And the endpoint:</p>\n<pre><code>public Page&lt;NotificationItemResponse&gt; findUnreadNotifications(@PageableDefault(size = DEFAULT_PAGE_SIZE) final Pageable pageable,\n            @PathVariable final String groupName, @PathVariable final String userName)\n</code></pre>\n<p>When I use the <code>standAloneSetup</code> I get the error:</p>\n<pre><code>No primary or single unique constructor found for interface org.springframework.data.domain.Pageable\n</code></pre>\n<p>I've seen a very similar question with good answers <a href=\"https://stackoverflow.com/questions/22174665/isolated-controller-test-cant-instantiate-pageable\">here</a>, but RestAssuredMvc does not have any resolvers, or at least I found nothing on it searching the web. <strong>Can anyone help me resolve Pageables using RestAssuredMvc's standAloneSetup?</strong></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6331293,"reputation":1295,"user_id":4916156,"accept_rate":50,"display_name":"DDovzhenko"},"score":1,"creation_date":1648059768,"post_id":71592180,"comment_id":126531220,"body_markdown":"Create a Map&lt;String, List&lt;Integer&gt;&gt; and parse file line by line.","body":"Create a Map&lt;String, List&lt;Integer&gt;&gt; and parse file line by line."},{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":3,"creation_date":1648059792,"post_id":71592180,"comment_id":126531227,"body_markdown":"Can you demonstrate *any* effort at solving this yourself?","body":"Can you demonstrate <i>any</i> effort at solving this yourself?"},{"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":1,"creation_date":1648059964,"post_id":71592180,"comment_id":126531285,"body_markdown":"You&#39;ll easily find &quot;how to read file line by line&quot;, You&#39;ll easily find &quot;how to split  a line&quot;, You&#39;ll easily find &quot;how to add pair ti hashmap&quot;, so where is the issue ? :)","body":"You&#39;ll easily find &quot;how to read file line by line&quot;, You&#39;ll easily find &quot;how to split  a line&quot;, You&#39;ll easily find &quot;how to add pair ti hashmap&quot;, so where is the issue ? :)"}],"answers":[{"tags":[],"owner":{"account_id":15777655,"reputation":1762,"user_id":11385052,"display_name":"Ryan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1648061552,"creation_date":1648061552,"answer_id":71592537,"question_id":71592180,"body_markdown":"Sure, first create a class to hold the numerical values, this is usually called a Tuple.\r\n\r\n    public class Tuple&lt;T, R&gt; {\r\n\t    private T valueA;\r\n\t    private R valueB;\r\n\t\r\n\t    public Tuple(T value1, R value2) {\r\n\t\t    valueA = value1;\r\n\t\t    valueB = value2;\r\n\t    }\r\n\r\n\t    public T getValueA() {\r\n\t\t    return valueA;\r\n\t    }\r\n\r\n\t    public R getValueB() {\r\n\t\t    return valueB;\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public String toString() {\r\n\t\t    return &quot;Tuple [valueA=&quot; + valueA + &quot;, valueB=&quot; + valueB + &quot;]&quot;;\r\n\t    }\r\n    }\r\n\r\nThen read your file and place into the map.\r\n\r\n    public static void main(String[] args) {\r\n\t\tMap&lt;String, Tuple&lt;Integer, Integer&gt;&gt; map = new HashMap&lt;&gt;();\r\n\t\t\r\n\t\ttry(BufferedReader reader = new BufferedReader(new FileReader(&quot;/your/file/location&quot;))) {\r\n\t\t\tString line = reader.readLine();\r\n\t\t\twhile (line != null) {\r\n\t\t\t\tString [] values = line.split(&quot;\\\\s&quot;);\r\n\t\t\t\tmap.put(values[0], new Tuple&lt;Integer, Integer&gt;(Integer.valueOf(values[1]), Integer.valueOf(values[2])));\r\n\t\t\t}\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n    }","title":"Adding elements to a HashMap Java","body":"<p>Sure, first create a class to hold the numerical values, this is usually called a Tuple.</p>\n<pre><code>public class Tuple&lt;T, R&gt; {\n    private T valueA;\n    private R valueB;\n\n    public Tuple(T value1, R value2) {\n        valueA = value1;\n        valueB = value2;\n    }\n\n    public T getValueA() {\n        return valueA;\n    }\n\n    public R getValueB() {\n        return valueB;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Tuple [valueA=&quot; + valueA + &quot;, valueB=&quot; + valueB + &quot;]&quot;;\n    }\n}\n</code></pre>\n<p>Then read your file and place into the map.</p>\n<pre><code>public static void main(String[] args) {\n    Map&lt;String, Tuple&lt;Integer, Integer&gt;&gt; map = new HashMap&lt;&gt;();\n    \n    try(BufferedReader reader = new BufferedReader(new FileReader(&quot;/your/file/location&quot;))) {\n        String line = reader.readLine();\n        while (line != null) {\n            String [] values = line.split(&quot;\\\\s&quot;);\n            map.put(values[0], new Tuple&lt;Integer, Integer&gt;(Integer.valueOf(values[1]), Integer.valueOf(values[2])));\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":21628246,"reputation":9,"user_id":15952264,"display_name":"Mohammed Hamdoon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1648107814,"accepted_answer_id":71592537,"answer_count":1,"score":-3,"last_activity_date":1648061552,"creation_date":1648059618,"question_id":71592180,"body_markdown":"I have a file which has names and numbers.\r\n\r\nThe file looks as follows : \r\n\r\n - Adam 250 321 \r\n - John 120 431\r\n - Alex 200 200\r\n - Iris 121 221\r\n\r\nis it possible to read from the file the elements in which the name is the key for numbers in the HashMap ?\r\n\r\nfor example Adam is the key for 250 and 321.\r\n\r\nIf possible could you please show me how it can be done ?\r\n\r\n\r\n","title":"Adding elements to a HashMap Java","body":"<p>I have a file which has names and numbers.</p>\n<p>The file looks as follows :</p>\n<ul>\n<li>Adam 250 321</li>\n<li>John 120 431</li>\n<li>Alex 200 200</li>\n<li>Iris 121 221</li>\n</ul>\n<p>is it possible to read from the file the elements in which the name is the key for numbers in the HashMap ?</p>\n<p>for example Adam is the key for 250 and 321.</p>\n<p>If possible could you please show me how it can be done ?</p>\n"},{"tags":["java","string"],"answers":[{"tags":[],"owner":{"account_id":30940,"reputation":243131,"user_id":84651,"accept_rate":75,"display_name":"Justin Niessner"},"down_vote_count":1,"up_vote_count":518,"is_accepted":true,"score":517,"last_activity_date":1318648107,"creation_date":1318646039,"answer_id":7775373,"question_id":7775364,"body_markdown":"You could easily use [`String.replace()`][1]:\r\n\r\n    String helloWorld = &quot;Hello World!&quot;;\r\n    String hellWrld = helloWorld.replace(&quot;o&quot;,&quot;&quot;);\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29","title":"How can I remove a substring from a given String?","body":"<p>You could easily use <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29\" rel=\"noreferrer\"><code>String.replace()</code></a>:</p>\n\n<pre><code>String helloWorld = \"Hello World!\";\nString hellWrld = helloWorld.replace(\"o\",\"\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":204659,"reputation":37539,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1415989257,"creation_date":1318646044,"answer_id":7775374,"question_id":7775364,"body_markdown":"Check out [Apache StringUtils](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html):\r\n\r\n&gt;  - `static String  replace(String text, String searchString, String replacement)` Replaces all occurrences of a String within another\r\n&gt; String.\r\n&gt;  - `static String  replace(String text, String searchString, String replacement, int max)` Replaces a String with another String inside a\r\n&gt; larger String, for the first max values of the search String.\r\n&gt;  - `static String  replaceChars(String str, char searchChar, char replaceChar)` Replaces all occurrences of a character in a String with\r\n&gt; another.\r\n&gt;  - `static String  replaceChars(String str, String searchChars, String replaceChars)` Replaces multiple characters in a String in one go.\r\n&gt;  - `static String  replaceEach(String text, String[] searchList, String[] replacementList)` Replaces all occurrences of Strings within\r\n&gt; another String.\r\n&gt;  - `static String  replaceEachRepeatedly(String text, String[] searchList, String[] replacementList)` Replaces all occurrences of\r\n&gt; Strings within another String.\r\n&gt;  - `static String  replaceOnce(String text, String searchString, String replacement)` Replaces a String with another String inside a\r\n&gt; larger String, once.\r\n&gt;  - `static String  replacePattern(String source, String regex, String replacement)` Replaces each substring of the source String that\r\n&gt; matches the given regular expression with the given replacement using\r\n&gt; the Pattern.DOTALL option.","title":"How can I remove a substring from a given String?","body":"<p>Check out <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html\" rel=\"noreferrer\">Apache StringUtils</a>:</p>\n\n<blockquote>\n  <ul>\n  <li><code>static String  replace(String text, String searchString, String replacement)</code> Replaces all occurrences of a String within another\n  String.</li>\n  <li><code>static String  replace(String text, String searchString, String replacement, int max)</code> Replaces a String with another String inside a\n  larger String, for the first max values of the search String.</li>\n  <li><code>static String  replaceChars(String str, char searchChar, char replaceChar)</code> Replaces all occurrences of a character in a String with\n  another.</li>\n  <li><code>static String  replaceChars(String str, String searchChars, String replaceChars)</code> Replaces multiple characters in a String in one go.</li>\n  <li><code>static String  replaceEach(String text, String[] searchList, String[] replacementList)</code> Replaces all occurrences of Strings within\n  another String.</li>\n  <li><code>static String  replaceEachRepeatedly(String text, String[] searchList, String[] replacementList)</code> Replaces all occurrences of\n  Strings within another String.</li>\n  <li><code>static String  replaceOnce(String text, String searchString, String replacement)</code> Replaces a String with another String inside a\n  larger String, once.</li>\n  <li><code>static String  replacePattern(String source, String regex, String replacement)</code> Replaces each substring of the source String that\n  matches the given regular expression with the given replacement using\n  the Pattern.DOTALL option.</li>\n  </ul>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":476048,"reputation":7235,"user_id":886749,"accept_rate":77,"display_name":"Cory Kendall"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1318646125,"creation_date":1318646125,"answer_id":7775381,"question_id":7775364,"body_markdown":"    replace(&#39;regex&#39;, &#39;replacement&#39;);\r\n    replaceAll(&#39;regex&#39;, &#39;replacement&#39;);\r\n\r\nIn your example,\r\n\r\n    String hi = &quot;Hello World!&quot;\r\n    String no_o = hi.replaceAll(&quot;o&quot;, &quot;&quot;);","title":"How can I remove a substring from a given String?","body":"<pre><code>replace('regex', 'replacement');\nreplaceAll('regex', 'replacement');\n</code></pre>\n\n<p>In your example,</p>\n\n<pre><code>String hi = \"Hello World!\"\nString no_o = hi.replaceAll(\"o\", \"\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":48120,"reputation":93879,"user_id":142822,"display_name":"KV Prajapati"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1616765764,"creation_date":1318646976,"answer_id":7775444,"question_id":7775364,"body_markdown":"You should have to look at `StringBuilder/StringBuffer` which allow you to delete, insert, replace char(s) at specified [offset][1].\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html","title":"How can I remove a substring from a given String?","body":"<p>You should have to look at <code>StringBuilder/StringBuffer</code> which allow you to delete, insert, replace char(s) at specified <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html\" rel=\"nofollow noreferrer\">offset</a>.</p>\n"},{"tags":[],"owner":{"account_id":117125,"reputation":13617,"user_id":306855,"accept_rate":73,"display_name":"Emil"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1318650570,"creation_date":1318650570,"answer_id":7775616,"question_id":7775364,"body_markdown":"You can also use [guava&#39;s][1] [CharMatcher.removeFrom][2] function.\r\n\r\n**Example:**\r\n\r\n     String s = CharMatcher.is(&#39;a&#39;).removeFrom(&quot;bazaar&quot;);\r\n\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/\r\n  [2]: http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/base/CharMatcher.html#removeFrom%28java.lang.CharSequence%29","title":"How can I remove a substring from a given String?","body":"<p>You can also use <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"nofollow\">guava's</a> <a href=\"http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/base/CharMatcher.html#removeFrom%28java.lang.CharSequence%29\" rel=\"nofollow\">CharMatcher.removeFrom</a> function.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code> String s = CharMatcher.is('a').removeFrom(\"bazaar\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2674369,"reputation":119,"user_id":2311091,"display_name":"Magdi"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1391086653,"creation_date":1391086653,"answer_id":21457217,"question_id":7775364,"body_markdown":"You can use StringBuffer \r\n\r\n    StringBuffer text = new StringBuffer(&quot;Hello World&quot;);\r\n    text.replace( StartIndex ,EndIndex ,String);\r\n    ","title":"How can I remove a substring from a given String?","body":"<p>You can use StringBuffer </p>\n\n<pre><code>StringBuffer text = new StringBuffer(\"Hello World\");\ntext.replace( StartIndex ,EndIndex ,String);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5763632,"reputation":2744,"user_id":4549220,"accept_rate":80,"display_name":"Md Tariqul Islam"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1508819553,"creation_date":1442127494,"answer_id":32547129,"question_id":7775364,"body_markdown":"This works good for me.\r\n\r\n    String hi = &quot;Hello World!&quot;\r\n    String no_o = hi.replaceAll(&quot;o&quot;, &quot;&quot;);\r\n\r\nor you can use \r\n\r\n  \r\n\r\n    String no_o = hi.replace(&quot;o&quot;, &quot;&quot;);\r\n\r\n","title":"How can I remove a substring from a given String?","body":"<p>This works good for me.</p>\n\n<pre><code>String hi = \"Hello World!\"\nString no_o = hi.replaceAll(\"o\", \"\");\n</code></pre>\n\n<p>or you can use </p>\n\n<pre><code>String no_o = hi.replace(\"o\", \"\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1758529,"reputation":3000,"user_id":1606208,"accept_rate":100,"display_name":"Sean"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1553168487,"creation_date":1473300433,"answer_id":39381522,"question_id":7775364,"body_markdown":"    private static void replaceChar() {\r\n        String str = &quot;hello world&quot;;\r\n        final String[] res = Arrays.stream(str.split(&quot;&quot;))\r\n                .filter(s -&gt; !s.equalsIgnoreCase(&quot;o&quot;))\r\n                .toArray(String[]::new);\r\n        System.out.println(String.join(&quot;&quot;, res));\r\n    }\r\n\r\nIn case you have some complicated logic to filter the char, just another way instead of `replace()`.","title":"How can I remove a substring from a given String?","body":"<pre><code>private static void replaceChar() {\n    String str = \"hello world\";\n    final String[] res = Arrays.stream(str.split(\"\"))\n            .filter(s -&gt; !s.equalsIgnoreCase(\"o\"))\n            .toArray(String[]::new);\n    System.out.println(String.join(\"\", res));\n}\n</code></pre>\n\n<p>In case you have some complicated logic to filter the char, just another way instead of <code>replace()</code>.</p>\n"},{"tags":[],"owner":{"account_id":6119232,"reputation":3692,"user_id":4773290,"accept_rate":86,"display_name":"Pratik Patil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1541139177,"creation_date":1541139177,"answer_id":53113480,"question_id":7775364,"body_markdown":"Here is the implementation to delete all the substrings from the given string\r\n\r\n    public static String deleteAll(String str, String pattern)\r\n    {\r\n    \tfor(int index = isSubstring(str, pattern); index != -1; index = isSubstring(str, pattern))\r\n    \t\tstr = deleteSubstring(str, pattern, index);\r\n    \r\n    \treturn str;\r\n    }\r\n    \r\n    public static String deleteSubstring(String str, String pattern, int index)\r\n    {\r\n        int start_index = index;\r\n        int end_index = start_index + pattern.length() - 1;\r\n        int dest_index = 0;\r\n        char[] result = new char[str.length()];\r\n\r\n\r\n        for(int i = 0; i&lt; str.length() - 1; i++)\r\n            if(i &lt; start_index || i &gt; end_index)\r\n                result[dest_index++] = str.charAt(i);\r\n\r\n        return new String(result, 0, dest_index + 1);\r\n    }\r\n\r\nThe implementation of isSubstring() method is [here][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/53113110/4773290","title":"How can I remove a substring from a given String?","body":"<p>Here is the implementation to delete all the substrings from the given string</p>\n\n<pre><code>public static String deleteAll(String str, String pattern)\n{\n    for(int index = isSubstring(str, pattern); index != -1; index = isSubstring(str, pattern))\n        str = deleteSubstring(str, pattern, index);\n\n    return str;\n}\n\npublic static String deleteSubstring(String str, String pattern, int index)\n{\n    int start_index = index;\n    int end_index = start_index + pattern.length() - 1;\n    int dest_index = 0;\n    char[] result = new char[str.length()];\n\n\n    for(int i = 0; i&lt; str.length() - 1; i++)\n        if(i &lt; start_index || i &gt; end_index)\n            result[dest_index++] = str.charAt(i);\n\n    return new String(result, 0, dest_index + 1);\n}\n</code></pre>\n\n<p>The implementation of isSubstring() method is <a href=\"https://stackoverflow.com/a/53113110/4773290\">here</a></p>\n"},{"tags":[],"owner":{"account_id":2080963,"reputation":71,"user_id":1852960,"display_name":"OneSix"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1541165118,"creation_date":1541165118,"answer_id":53119424,"question_id":7775364,"body_markdown":"    replaceAll(String regex, String replacement)\r\n\r\nAbove method will help to get the answer.\r\n\r\n    String check = &quot;Hello World&quot;;\r\n    check = check.replaceAll(&quot;o&quot;,&quot;&quot;);\r\n\r\n","title":"How can I remove a substring from a given String?","body":"<pre><code>replaceAll(String regex, String replacement)\n</code></pre>\n\n<p>Above method will help to get the answer.</p>\n\n<pre><code>String check = \"Hello World\";\ncheck = check.replaceAll(\"o\",\"\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9444920,"reputation":327,"user_id":7024043,"accept_rate":50,"display_name":"Debashish Dwivedi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1558528392,"creation_date":1558528392,"answer_id":56256914,"question_id":7775364,"body_markdown":"You can use Substring also for replacing with existing string:\r\n\r\n    var str = &quot;abc awwwa&quot;;\r\n    var Index = str.indexOf(&#39;awwwa&#39;);\r\n    str = str.substring(0, Index);","title":"How can I remove a substring from a given String?","body":"<p>You can use Substring also for replacing with existing string:</p>\n\n<pre><code>var str = \"abc awwwa\";\nvar Index = str.indexOf('awwwa');\nstr = str.substring(0, Index);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4000875,"reputation":470,"user_id":3296948,"display_name":"Harsh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1564574606,"creation_date":1564574606,"answer_id":57290329,"question_id":7775364,"body_markdown":"If you know the start and end index you may use this\r\n\r\n    string = string.substring(0, start_index) + string.substring(end_index, string.length());","title":"How can I remove a substring from a given String?","body":"<p>If you know the start and end index you may use this</p>\n\n<pre><code>string = string.substring(0, start_index) + string.substring(end_index, string.length());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6297127,"reputation":4015,"user_id":15187338,"display_name":"sajeewaI-"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647458186,"creation_date":1647458186,"answer_id":71503096,"question_id":7775364,"body_markdown":"You can use\r\n\r\n\r\n\r\n    String helloWorld = &quot;Hello World&quot;;\r\n    String target = &quot;e&quot;;\r\n    String replacement = &quot;&quot;;\r\n    String replacedString = helloWorld.replace(target, replacement);\r\n\r\n    The answer is = Hllo World\r\n\r\n\r\nor you can use regex\r\n\r\n    String original = &quot;Java is one of best languages. OOP can be used in Java&quot;;\r\n    String regexTarget = &quot;\\\\bJava\\\\b&quot;;\r\n    String replacedWord = original.replaceAll(regexTarget, &quot;Python&quot;);\r\n\r\n    The answer is = Python is one of best languages. OOP can be used in Python\r\n\r\n","title":"How can I remove a substring from a given String?","body":"<p>You can use</p>\n<pre><code>String helloWorld = &quot;Hello World&quot;;\nString target = &quot;e&quot;;\nString replacement = &quot;&quot;;\nString replacedString = helloWorld.replace(target, replacement);\n\nThe answer is = Hllo World\n</code></pre>\n<p>or you can use regex</p>\n<pre><code>String original = &quot;Java is one of best languages. OOP can be used in Java&quot;;\nString regexTarget = &quot;\\\\bJava\\\\b&quot;;\nString replacedWord = original.replaceAll(regexTarget, &quot;Python&quot;);\n\nThe answer is = Python is one of best languages. OOP can be used in Python\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15213774,"reputation":396,"user_id":10977681,"display_name":"Tom Carmi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648061382,"creation_date":1648061382,"answer_id":71592506,"question_id":7775364,"body_markdown":"In addition to @DwB answer, you can also use [StringUtils][1] `remove`:\r\n\r\n    String hello = &quot;hello world&quot;;\r\n    String hellYeah = StringUtils.remove(hello, &quot;o&quot;);\r\n\r\nor `removeIgnoreCase`:\r\n\r\n    String hello = &quot;hellO world&quot;;\r\n    String hellYeah = StringUtils.remove(hello, &quot;o&quot;);\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html","title":"How can I remove a substring from a given String?","body":"<p>In addition to @DwB answer, you can also use <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html\" rel=\"nofollow noreferrer\">StringUtils</a> <code>remove</code>:</p>\n<pre><code>String hello = &quot;hello world&quot;;\nString hellYeah = StringUtils.remove(hello, &quot;o&quot;);\n</code></pre>\n<p>or <code>removeIgnoreCase</code>:</p>\n<pre><code>String hello = &quot;hellO world&quot;;\nString hellYeah = StringUtils.remove(hello, &quot;o&quot;);\n</code></pre>\n"}],"owner":{"account_id":377695,"reputation":14682,"user_id":729995,"accept_rate":78,"display_name":"Belgi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":848198,"favorite_count":0,"down_vote_count":0,"up_vote_count":267,"accepted_answer_id":7775373,"answer_count":14,"score":267,"last_activity_date":1648061382,"creation_date":1318645903,"question_id":7775364,"body_markdown":"Is there an easy way to remove substring from a given `String` in Java? \r\n\r\nExample: `&quot;Hello World!&quot;`, removing `&quot;o&quot;` → `&quot;Hell Wrld!&quot;`","title":"How can I remove a substring from a given String?","body":"<p>Is there an easy way to remove substring from a given <code>String</code> in Java? </p>\n\n<p>Example: <code>\"Hello World!\"</code>, removing <code>\"o\"</code> → <code>\"Hell Wrld!\"</code></p>\n"},{"tags":["java","java-time"],"comments":[{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":0,"creation_date":1472141855,"post_id":39150071,"comment_id":65643775,"body_markdown":"Why don&#39;t you want to use a formatter builder?","body":"Why don&#39;t you want to use a formatter builder?"},{"owner":{"display_name":"user177800"},"score":0,"creation_date":1472142231,"post_id":39150071,"comment_id":65644012,"body_markdown":"Have you tried step debugging through to see what the difference is?","body":"Have you tried step debugging through to see what the difference is?"},{"owner":{"account_id":234026,"reputation":7237,"user_id":499922,"accept_rate":90,"display_name":"billc.cn"},"score":0,"creation_date":1472142643,"post_id":39150071,"comment_id":65644290,"body_markdown":"@Tunaki Because this is a simple case that old tools like `SimpleDateFormat` supports and the behaviour seems rather like a bug...","body":"@Tunaki Because this is a simple case that old tools like <code>SimpleDateFormat</code> supports and the behaviour seems rather like a bug..."},{"owner":{"display_name":"user177800"},"score":0,"creation_date":1472144092,"post_id":39150071,"comment_id":65645127,"body_markdown":"`SimpleDateFormat` fails the same way as well, because they both rely on `DateTimeFormatter` and it is where the bug is.","body":"<code>SimpleDateFormat</code> fails the same way as well, because they both rely on <code>DateTimeFormatter</code> and it is where the bug is."},{"owner":{"account_id":234026,"reputation":7237,"user_id":499922,"accept_rate":90,"display_name":"billc.cn"},"score":0,"creation_date":1472144804,"post_id":39150071,"comment_id":65645539,"body_markdown":"@Tunaki It turns out the case is buggy in the builder as well... See the second bug link.","body":"@Tunaki It turns out the case is buggy in the builder as well... See the second bug link."},{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":0,"creation_date":1472372428,"post_id":39150071,"comment_id":65719285,"body_markdown":"@JarrodRoberson No, `SimpleDateFormat` does not fail the same way. It is an independent implementation which does NOT rely on `DateTimeFormatter`. Just study the old source code of `SimpleDateFormat`. Both implementations fail for different internal reasons. I would not qualify it as a bug. It is simply a missing feature in both libraries.","body":"@JarrodRoberson No, <code>SimpleDateFormat</code> does not fail the same way. It is an independent implementation which does NOT rely on <code>DateTimeFormatter</code>. Just study the old source code of <code>SimpleDateFormat</code>. Both implementations fail for different internal reasons. I would not qualify it as a bug. It is simply a missing feature in both libraries."}],"answers":[{"tags":[],"owner":{"display_name":"user177800"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1472144275,"creation_date":1472142963,"answer_id":39150530,"question_id":39150071,"body_markdown":"###There is a bug in the `DateTimePrinterParser`:\r\n\r\nI step debugged all the way through it, apparently you can not have digits as literals. Similar test codes proves this if you step debug all the way through to the `DateTimeFormatterBuilder.parse()` method you can see what it is doing wrong.\r\n\r\nApparently the `Value(YearOfEra,4,19,EXCEEDS_PAD)` parser consumes the `00` where they stop if those are **not** digits because it is looking for a number `4` to `19` digits long. The `DateTimeFormatter` that is embedded in the `DateTimeParseContext` is wrong.\r\n\r\nIf you put a non-digit character literal like `xx` it works, digit literals don&#39;t.\r\n\r\n###Both of these fail:\r\n\r\n    final SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyyMM&#39;00&#39;&quot;);\r\n    System.out.println(sdf.parse(&quot;20150100&quot;));\r\n\r\n&gt; Exception in thread &quot;main&quot; java.text.ParseException: Unparseable date:\r\n&gt; &quot;20150100&quot; \tat java.text.DateFormat.parse(DateFormat.java:366)\r\n\r\n    final DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(&quot;yyyyMM&#39;00&#39;&quot;);\r\n    System.out.println(dateTimeFormatter.parse(&quot;20150100&quot;, YearMonth::from));\r\n\r\n&gt; Exception in thread &quot;main&quot; java.time.format.DateTimeParseException:\r\n&gt; Text &#39;20150100&#39; could not be parsed at index 0 \tat\r\n&gt; java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:1949)\r\n&gt; \tat\r\n&gt; java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1851)\r\n\r\n###Both of these succeed:\r\n\r\n    final SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyyMM&#39;xx&#39;&quot;);\r\n    System.out.println(sdf.parse(&quot;201501xx&quot;));\r\n\r\n&gt; Thu Jan 01 00:00:00 EST 2015\r\n\r\n    final DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(&quot;yyyyMM&#39;xx&#39;&quot;);\r\n    System.out.println(dateTimeFormatter.parse(&quot;201501xx&quot;, YearMonth::from));\r\n\r\n&gt; 2015-01","title":"DateTimeFormatter pattern with liternal and no separator does not work","body":"<h3>There is a bug in the <code>DateTimePrinterParser</code>:</h3>\n\n<p>I step debugged all the way through it, apparently you can not have digits as literals. Similar test codes proves this if you step debug all the way through to the <code>DateTimeFormatterBuilder.parse()</code> method you can see what it is doing wrong.</p>\n\n<p>Apparently the <code>Value(YearOfEra,4,19,EXCEEDS_PAD)</code> parser consumes the <code>00</code> where they stop if those are <strong>not</strong> digits because it is looking for a number <code>4</code> to <code>19</code> digits long. The <code>DateTimeFormatter</code> that is embedded in the <code>DateTimeParseContext</code> is wrong.</p>\n\n<p>If you put a non-digit character literal like <code>xx</code> it works, digit literals don't.</p>\n\n<h3>Both of these fail:</h3>\n\n<pre><code>final SimpleDateFormat sdf = new SimpleDateFormat(\"yyyyMM'00'\");\nSystem.out.println(sdf.parse(\"20150100\"));\n</code></pre>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.text.ParseException: Unparseable date:\n  \"20150100\"    at java.text.DateFormat.parse(DateFormat.java:366)</p>\n</blockquote>\n\n<pre><code>final DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(\"yyyyMM'00'\");\nSystem.out.println(dateTimeFormatter.parse(\"20150100\", YearMonth::from));\n</code></pre>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.time.format.DateTimeParseException:\n  Text '20150100' could not be parsed at index 0    at\n  java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:1949)\n    at\n  java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1851)</p>\n</blockquote>\n\n<h3>Both of these succeed:</h3>\n\n<pre><code>final SimpleDateFormat sdf = new SimpleDateFormat(\"yyyyMM'xx'\");\nSystem.out.println(sdf.parse(\"201501xx\"));\n</code></pre>\n\n<blockquote>\n  <p>Thu Jan 01 00:00:00 EST 2015</p>\n</blockquote>\n\n<pre><code>final DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(\"yyyyMM'xx'\");\nSystem.out.println(dateTimeFormatter.parse(\"201501xx\", YearMonth::from));\n</code></pre>\n\n<blockquote>\n  <p>2015-01</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472362632,"creation_date":1472362632,"answer_id":39188325,"question_id":39150071,"body_markdown":"If you don&#39;t mind to use a 3rd-party-library then you might try my library [Time4J][1] whose newest version v4.18 can do what you wish:\r\n\r\n    import net.time4j.Month;\r\n    import net.time4j.range.CalendarMonth;\r\n    import net.time4j.format.expert.ChronoFormatter;\r\n    import net.time4j.format.expert.PatternType;\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.junit.runners.JUnit4;\r\n    \r\n    import java.text.ParseException;\r\n    import java.util.Locale;\r\n    \r\n    import static org.hamcrest.CoreMatchers.is;\r\n    import static org.junit.Assert.assertThat;\r\n\r\n    @RunWith(JUnit4.class)\r\n    public class CalendarMonthTest {\r\n        @Test\r\n        public void parse2() throws ParseException {\r\n          assertThat(\r\n            ChronoFormatter.ofPattern(\r\n                &quot;yyyyMM&#39;00&#39;&quot;,\r\n                PatternType.CLDR,\r\n                Locale.ROOT,\r\n                CalendarMonth.chronology()\r\n            ).parse(&quot;20150100&quot;),\r\n            is(CalendarMonth.of(2015, Month.JANUARY)));\r\n        }\r\n    }\r\n\r\nBy the way, the links to the JDK-bug-log are not really related to your problem. Those issues only describe problems when applying adjacent digit parsing in context of fractional seconds. While that problem will be fixed with Java-9, your problem will not. Maybe you wish to open a new issue there? But I doubt that Oracle will treat it as bug. It is rather a new feature not supported until now by any library distributed by Oracle. Literals with (leading) digits are not expected in JSR-310 (aka java.time-package) to take part into adjacent-value-parsing (and in `SimpleDateFormat` also not).\r\n\r\nSide note: Time4J is not just an answer to this detail (digit literals) but generally offers better performance in parsing and can be used in parallel with JSR-310 due to a lot of conversion methods. For example: To achieve an instance of `YearMonth`, just call `calendarMonth.toTemporalAccessor()` on the parsed result.\r\n\r\n\r\n  [1]: https://github.com/MenoData/Time4J","title":"DateTimeFormatter pattern with liternal and no separator does not work","body":"<p>If you don't mind to use a 3rd-party-library then you might try my library <a href=\"https://github.com/MenoData/Time4J\" rel=\"nofollow\">Time4J</a> whose newest version v4.18 can do what you wish:</p>\n\n<pre><code>import net.time4j.Month;\nimport net.time4j.range.CalendarMonth;\nimport net.time4j.format.expert.ChronoFormatter;\nimport net.time4j.format.expert.PatternType;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.junit.runners.JUnit4;\n\nimport java.text.ParseException;\nimport java.util.Locale;\n\nimport static org.hamcrest.CoreMatchers.is;\nimport static org.junit.Assert.assertThat;\n\n@RunWith(JUnit4.class)\npublic class CalendarMonthTest {\n    @Test\n    public void parse2() throws ParseException {\n      assertThat(\n        ChronoFormatter.ofPattern(\n            \"yyyyMM'00'\",\n            PatternType.CLDR,\n            Locale.ROOT,\n            CalendarMonth.chronology()\n        ).parse(\"20150100\"),\n        is(CalendarMonth.of(2015, Month.JANUARY)));\n    }\n}\n</code></pre>\n\n<p>By the way, the links to the JDK-bug-log are not really related to your problem. Those issues only describe problems when applying adjacent digit parsing in context of fractional seconds. While that problem will be fixed with Java-9, your problem will not. Maybe you wish to open a new issue there? But I doubt that Oracle will treat it as bug. It is rather a new feature not supported until now by any library distributed by Oracle. Literals with (leading) digits are not expected in JSR-310 (aka java.time-package) to take part into adjacent-value-parsing (and in <code>SimpleDateFormat</code> also not).</p>\n\n<p>Side note: Time4J is not just an answer to this detail (digit literals) but generally offers better performance in parsing and can be used in parallel with JSR-310 due to a lot of conversion methods. For example: To achieve an instance of <code>YearMonth</code>, just call <code>calendarMonth.toTemporalAccessor()</code> on the parsed result.</p>\n"},{"tags":[],"owner":{"account_id":2594865,"reputation":395,"user_id":2248785,"display_name":"user2248785"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648061168,"creation_date":1648061168,"answer_id":71592458,"question_id":39150071,"body_markdown":"As an addendum to user177800&#39;s answer, you can use this form instead:\r\n\r\n```java\r\nvar formatter = new DateTimeFormatterBuilder()\r\n    .appendValue(ChronoField.YEAR, 4)\r\n    .appendValue(ChronoField.MONTH_OF_YEAR, 2)\r\n    .appendLiteral(&quot;00&quot;)\r\n    .toFormatter();\r\nYearMonth.parse(&quot;20220200&quot;, formatter);\r\n```\r\n\r\nAll part of `java.time`.","title":"DateTimeFormatter pattern with liternal and no separator does not work","body":"<p>As an addendum to user177800's answer, you can use this form instead:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var formatter = new DateTimeFormatterBuilder()\n    .appendValue(ChronoField.YEAR, 4)\n    .appendValue(ChronoField.MONTH_OF_YEAR, 2)\n    .appendLiteral(&quot;00&quot;)\n    .toFormatter();\nYearMonth.parse(&quot;20220200&quot;, formatter);\n</code></pre>\n<p>All part of <code>java.time</code>.</p>\n"}],"owner":{"account_id":234026,"reputation":7237,"user_id":499922,"accept_rate":90,"display_name":"billc.cn"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1424,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"accepted_answer_id":39150530,"answer_count":3,"score":7,"last_activity_date":1648061168,"creation_date":1472141445,"question_id":39150071,"body_markdown":"The parser generated by `DateTimeFormatter.ofPattern` exhibits the following interesting behaviour which is preventing me from writing a pattern to parse a string like `20150100`:\r\n\r\n    System.out.println(DateTimeFormatter.ofPattern(&quot;yyyyMM&quot;).parse(&quot;201501&quot;, YearMonth::from)); // works\r\n    System.out.println(DateTimeFormatter.ofPattern(&quot;yyyyMM&#39;aa&#39;&quot;).parse(&quot;201501aa&quot;, YearMonth::from)); // works\r\n    System.out.println(DateTimeFormatter.ofPattern(&quot;yyyyMM&#39;00&#39;&quot;).parse(&quot;20150100&quot;, YearMonth::from));\r\n    // java.time.format.DateTimeParseException: Text &#39;20150100&#39; could not be parsed at index 0\r\n\r\nI debuged the code, it seems the problem is caused by the year field parsing beyond the end of the string (max width for three y&#39;s and more is always 19). However, I don&#39;t understand how it could work for the pattern without the `&#39;00&#39;` literal at the end.\r\n\r\nIs there any way to fix this withing having to use a formatter builder?\r\n\r\nEdit:\r\n\r\nSince Jarrod below confirmed it&#39;s buggy, I did more googling and finally found the bug reports:\r\n\r\nhttp://bugs.java.com/bugdatabase/view_bug.do?bug_id=8031085\r\n\r\nhttp://bugs.java.com/bugdatabase/view_bug.do?bug_id=8032491\r\n\r\nBoth are only fixed in Java 9 though......","title":"DateTimeFormatter pattern with liternal and no separator does not work","body":"<p>The parser generated by <code>DateTimeFormatter.ofPattern</code> exhibits the following interesting behaviour which is preventing me from writing a pattern to parse a string like <code>20150100</code>:</p>\n\n<pre><code>System.out.println(DateTimeFormatter.ofPattern(\"yyyyMM\").parse(\"201501\", YearMonth::from)); // works\nSystem.out.println(DateTimeFormatter.ofPattern(\"yyyyMM'aa'\").parse(\"201501aa\", YearMonth::from)); // works\nSystem.out.println(DateTimeFormatter.ofPattern(\"yyyyMM'00'\").parse(\"20150100\", YearMonth::from));\n// java.time.format.DateTimeParseException: Text '20150100' could not be parsed at index 0\n</code></pre>\n\n<p>I debuged the code, it seems the problem is caused by the year field parsing beyond the end of the string (max width for three y's and more is always 19). However, I don't understand how it could work for the pattern without the <code>'00'</code> literal at the end.</p>\n\n<p>Is there any way to fix this withing having to use a formatter builder?</p>\n\n<p>Edit:</p>\n\n<p>Since Jarrod below confirmed it's buggy, I did more googling and finally found the bug reports:</p>\n\n<p><a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=8031085\" rel=\"noreferrer\">http://bugs.java.com/bugdatabase/view_bug.do?bug_id=8031085</a></p>\n\n<p><a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=8032491\" rel=\"noreferrer\">http://bugs.java.com/bugdatabase/view_bug.do?bug_id=8032491</a></p>\n\n<p>Both are only fixed in Java 9 though......</p>\n"},{"tags":["java","linux","bash","networking","osgi"],"comments":[{"owner":{"account_id":6463673,"reputation":11680,"user_id":5008284,"display_name":"meuh"},"score":0,"creation_date":1442513543,"post_id":32636432,"comment_id":53122974,"body_markdown":"try adding `-t` option to `nc` to make it do telnet negociation.","body":"try adding <code>-t</code> option to <code>nc</code> to make it do telnet negociation."},{"owner":{"account_id":1383225,"reputation":1976,"user_id":1315787,"accept_rate":61,"display_name":"VeryNiceArgumentException"},"score":0,"creation_date":1442513730,"post_id":32636432,"comment_id":53123083,"body_markdown":"I&#39;ve already tried meuh. It didn&#39;t make any difference.","body":"I&#39;ve already tried meuh. It didn&#39;t make any difference."},{"owner":{"account_id":6463673,"reputation":11680,"user_id":5008284,"display_name":"meuh"},"score":0,"creation_date":1442516162,"post_id":32636432,"comment_id":53124454,"body_markdown":"perhaps it is using a different character encoding to before.  pipe some of the `nc` output through `cat -v` and edit your post to show what you are getting.","body":"perhaps it is using a different character encoding to before.  pipe some of the <code>nc</code> output through <code>cat -v</code> and edit your post to show what you are getting."},{"owner":{"account_id":1383225,"reputation":1976,"user_id":1315787,"accept_rate":61,"display_name":"VeryNiceArgumentException"},"score":0,"creation_date":1442583006,"post_id":32636432,"comment_id":53153089,"body_markdown":"done meuh! I got: M-^?M-{^AM-^?M-{^CM-^?M-}^_M-^?M-}^X","body":"done meuh! I got: M-^?M-{^AM-^?M-{^CM-^?M-}^_M-^?M-}^X"},{"owner":{"account_id":6463673,"reputation":11680,"user_id":5008284,"display_name":"meuh"},"score":0,"creation_date":1442599039,"post_id":32636432,"comment_id":53162788,"body_markdown":"Well that&#39;s unexpected. It looks a bit like telnet negociation, but \nnot enough. It might be better in hex (`nc -x /tmp/x`), when I would expect some\n3 byte commands like `ff fd 03 ff fb 18`. Don&#39;t you have telnet\non the linux to try? And with `nc -t` do you get anything different?","body":"Well that&#39;s unexpected. It looks a bit like telnet negociation, but  not enough. It might be better in hex (<code>nc -x &#47;tmp&#47;x</code>), when I would expect some 3 byte commands like <code>ff fd 03 ff fb 18</code>. Don&#39;t you have telnet on the linux to try? And with <code>nc -t</code> do you get anything different?"},{"owner":{"account_id":1383225,"reputation":1976,"user_id":1315787,"accept_rate":61,"display_name":"VeryNiceArgumentException"},"score":0,"creation_date":1442841877,"post_id":32636432,"comment_id":53235897,"body_markdown":"Hexa results added. With or without -t parameter the results are the same. I don&#39;t have telnet command, but I&#39;ve tried using a java class that connects through telnet and it worked fine.","body":"Hexa results added. With or without -t parameter the results are the same. I don&#39;t have telnet command, but I&#39;ve tried using a java class that connects through telnet and it worked fine."},{"owner":{"account_id":4611,"reputation":989,"user_id":7003,"accept_rate":70,"display_name":"bgee"},"score":0,"creation_date":1456391643,"post_id":32636432,"comment_id":58927825,"body_markdown":"I have the same issues on windows :(","body":"I have the same issues on windows :("},{"owner":{"account_id":1383225,"reputation":1976,"user_id":1315787,"accept_rate":61,"display_name":"VeryNiceArgumentException"},"score":0,"creation_date":1456402601,"post_id":32636432,"comment_id":58935543,"body_markdown":"I stopped searching for a solution at that time because I needed a quick solution, and then I created a java class to do the work. And it still doing the work so far :)","body":"I stopped searching for a solution at that time because I needed a quick solution, and then I created a java class to do the work. And it still doing the work so far :)"}],"answers":[{"tags":[],"owner":{"account_id":16831881,"reputation":144,"user_id":12536878,"display_name":"gabor.zed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648060713,"creation_date":1648060713,"answer_id":71592379,"question_id":32636432,"body_markdown":"Try `netcat -t`\r\nfrom the manual:\r\n```\r\n-t           enable telnet negotiation\r\n```\r\nor try expect:\r\nhttps://stackoverflow.com/questions/11250564/how-to-automate-telnet-session-using-expect","title":"Telnet vs Netcat - OSGI Console","body":"<p>Try <code>netcat -t</code>\nfrom the manual:</p>\n<pre><code>-t           enable telnet negotiation\n</code></pre>\n<p>or try expect:\n<a href=\"https://stackoverflow.com/questions/11250564/how-to-automate-telnet-session-using-expect\">How to automate telnet session using Expect?</a></p>\n"}],"owner":{"account_id":1383225,"reputation":1976,"user_id":1315787,"accept_rate":61,"display_name":"VeryNiceArgumentException"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":786,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1648060713,"creation_date":1442510833,"question_id":32636432,"body_markdown":"I&#39;m facing an issue where I have an OSGI console listening on port 55555, and a bash script that connects on such console using netcat (e.g.: echo &quot;ss&quot; | nc localhost 55555), to get the plugin list running on it.\r\n\r\nFrom the time I&#39;ve updated OSGI files to a new version, netcat has started received weird characters instead of the interactive console it used to receive. But, if I connect using windows Telnet (connecting on OSGI Console remotely), everything works fine just like before updating the OSGI files.\r\n\r\nDoes someone knows what telnet does that netcat doesn&#39;t when connects on that OSGI console?\r\n\r\nAs requested, below you can see how I executed both commands, windows em linux, and its returns:\r\n\r\n    c:/telnet server1 55555\r\n    osgi&gt;_\r\n    \r\n    user@server1: nc localhost 55555\r\n    &#255;&#251;&#255;&#251;&#255;&#253;&#255;&#253;ss\r\n\r\n    Piping through a cat -v: \r\n    user@server1: nc localhost 55555 | cat -v\r\n    M-^?M-{^AM-^?M-{^CM-^?M-}^_M-^?M-}^X\r\n\r\n    Getting an hexadecimal return:     \r\n    user@server1: nc -x hexa.log -t localhost 55555\r\n    user@server1: cat hexa.log\r\n    [0000]   FF FB 01 FF FB 03 FF FD   1F FF FD 18  ........ ....","title":"Telnet vs Netcat - OSGI Console","body":"<p>I'm facing an issue where I have an OSGI console listening on port 55555, and a bash script that connects on such console using netcat (e.g.: echo \"ss\" | nc localhost 55555), to get the plugin list running on it.</p>\n\n<p>From the time I've updated OSGI files to a new version, netcat has started received weird characters instead of the interactive console it used to receive. But, if I connect using windows Telnet (connecting on OSGI Console remotely), everything works fine just like before updating the OSGI files.</p>\n\n<p>Does someone knows what telnet does that netcat doesn't when connects on that OSGI console?</p>\n\n<p>As requested, below you can see how I executed both commands, windows em linux, and its returns:</p>\n\n<pre><code>c:/telnet server1 55555\nosgi&gt;_\n\nuser@server1: nc localhost 55555\nÿûÿûÿýÿýss\n\nPiping through a cat -v: \nuser@server1: nc localhost 55555 | cat -v\nM-^?M-{^AM-^?M-{^CM-^?M-}^_M-^?M-}^X\n\nGetting an hexadecimal return:     \nuser@server1: nc -x hexa.log -t localhost 55555\nuser@server1: cat hexa.log\n[0000]   FF FB 01 FF FB 03 FF FD   1F FF FD 18  ........ ....\n</code></pre>\n"},{"tags":["java","android","junit","mockito"],"comments":[{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":1,"creation_date":1648064364,"post_id":71592370,"comment_id":126532680,"body_markdown":"Are you aware that JUnit insantiates new instance of your test class for each test? Think how this influences your static field TSipController.controller.","body":"Are you aware that JUnit insantiates new instance of your test class for each test? Think how this influences your static field TSipController.controller."},{"owner":{"account_id":3730075,"reputation":466,"user_id":3102768,"display_name":"Zeeshan Saiyed"},"score":1,"creation_date":1648125064,"post_id":71592370,"comment_id":126547927,"body_markdown":"@Lesiak Thanks, Issue resolved.","body":"@Lesiak Thanks, Issue resolved."}],"owner":{"account_id":3730075,"reputation":466,"user_id":3102768,"display_name":"Zeeshan Saiyed"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":574,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1648060699,"creation_date":1648060699,"question_id":71592370,"body_markdown":" - Actually I tried different ways but test case is getting failed every time, i&#39;m not sure what i&#39;m doing wrong.\r\n\r\n - I look through all the similar questions &amp; tried all the ways but still not able to get most of it.\r\n\r\n - However I still get the below error. I have also attached code for reference.\r\n\r\n    ```Wanted but not invoked:\r\n    eventListener.onLogin();\r\n    -&gt; at com.plivo.endpoint.login.TEndpointLoginTest.t2_endpoint_login_success_test(TEndpointLoginTest.java:65)\r\n\r\n    Actually, there were zero interactions with this mock.\r\n\r\n**TEndpointLoginTest.java**\r\n```\r\n@RunWith(MockitoJUnitRunner.class)\r\n@FixMethodOrder(MethodSorters.NAME_ASCENDING)\r\npublic class TEndpointLoginTest {\r\n\r\n    @Mock\r\n    private TEventListener eventListener;\r\n\r\n    private TEndpoint endpoint;\r\n\r\n    @BeforeClass\r\n    public static void create() {\r\n    }\r\n\r\n    @Before\r\n    public void setUp() {\r\n        MockitoAnnotations.openMocks(this);\r\n        if (endpoint == null) {\r\n            endpoint = TEndpoint.newInstance(eventListener);\r\n        }\r\n    }\r\n\r\n    @Test\r\n    public void t1_endpoint_isInitialized_test() {\r\n        assertThat(endpoint).isNotNull();\r\n    }\r\n\r\n    // Login\r\n    @Test\r\n    public void t2_endpoint_login_success_test() {\r\n        endpoint.login(1);\r\n        verify(eventListener, timeout(1200)).onLogin();\r\n    }\r\n\r\n}\r\n```\r\n\r\n**TEndpoint.java**\r\n```\r\npublic class TEndpoint {\r\n    protected TEventListener eventListener;\r\n    private TSipController sipController;\r\n\r\n    public TEndpoint(TEventListener listener) {\r\n        this.eventListener = listener;\r\n        initLib();\r\n    }\r\n\r\n    public static TEndpoint newInstance(TEventListener eventListener) {\r\n        TEndpoint endpoint = new TEndpoint(eventListener);\r\n        return endpoint;\r\n    }\r\n\r\n    private void initLib() {\r\n        sipController = TSipController.getInstance(this);\r\n    }\r\n\r\n    public void login(int flag) {\r\n        if (flag == 1) {\r\n            sipController.fireLogin();\r\n        } else {\r\n            sipController.fireLogOut();\r\n        }\r\n    }\r\n}\r\n```\r\n**TSipController.java**\r\n```\r\npublic class TSipController {\r\n    private static TSipController controller;\r\n    private final TEventListener eventListener;\r\n    private final TEndpoint endpoint;\r\n\r\n    public static TSipController getInstance(TEndpoint endpoint) {\r\n        if (controller == null) {\r\n            controller = new TSipController(endpoint);\r\n        }\r\n        return controller;\r\n    }\r\n\r\n    private TSipController(TEndpoint endpoint) {\r\n        this.eventListener = endpoint.eventListener;\r\n        this.endpoint = endpoint;\r\n    }\r\n\r\n    public void fireLogin(){\r\n        new Handler(Looper.getMainLooper()).postDelayed(eventListener::onLogin, 1000);\r\n    }\r\n\r\n    public void fireLogOut(){\r\n        new Handler(Looper.getMainLooper()).postDelayed(eventListener::onLogOut, 1000);\r\n    }\r\n}\r\n```\r\n**TEventListener.java**\r\n```\r\npublic interface TEventListener {\r\n    void onLogin();\r\n    void onLogOut();\r\n}\r\n```","title":"Mockito : Actually, there were zero interactions with this mock","body":"<ul>\n<li><p>Actually I tried different ways but test case is getting failed every time, i'm not sure what i'm doing wrong.</p>\n</li>\n<li><p>I look through all the similar questions &amp; tried all the ways but still not able to get most of it.</p>\n</li>\n<li><p>However I still get the below error. I have also attached code for reference.</p>\n<pre><code>eventListener.onLogin();\n-&gt; at com.plivo.endpoint.login.TEndpointLoginTest.t2_endpoint_login_success_test(TEndpointLoginTest.java:65)\n\nActually, there were zero interactions with this mock.\n\n</code></pre>\n</li>\n</ul>\n<p><strong>TEndpointLoginTest.java</strong></p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\n@FixMethodOrder(MethodSorters.NAME_ASCENDING)\npublic class TEndpointLoginTest {\n\n    @Mock\n    private TEventListener eventListener;\n\n    private TEndpoint endpoint;\n\n    @BeforeClass\n    public static void create() {\n    }\n\n    @Before\n    public void setUp() {\n        MockitoAnnotations.openMocks(this);\n        if (endpoint == null) {\n            endpoint = TEndpoint.newInstance(eventListener);\n        }\n    }\n\n    @Test\n    public void t1_endpoint_isInitialized_test() {\n        assertThat(endpoint).isNotNull();\n    }\n\n    // Login\n    @Test\n    public void t2_endpoint_login_success_test() {\n        endpoint.login(1);\n        verify(eventListener, timeout(1200)).onLogin();\n    }\n\n}\n</code></pre>\n<p><strong>TEndpoint.java</strong></p>\n<pre><code>public class TEndpoint {\n    protected TEventListener eventListener;\n    private TSipController sipController;\n\n    public TEndpoint(TEventListener listener) {\n        this.eventListener = listener;\n        initLib();\n    }\n\n    public static TEndpoint newInstance(TEventListener eventListener) {\n        TEndpoint endpoint = new TEndpoint(eventListener);\n        return endpoint;\n    }\n\n    private void initLib() {\n        sipController = TSipController.getInstance(this);\n    }\n\n    public void login(int flag) {\n        if (flag == 1) {\n            sipController.fireLogin();\n        } else {\n            sipController.fireLogOut();\n        }\n    }\n}\n</code></pre>\n<p><strong>TSipController.java</strong></p>\n<pre><code>public class TSipController {\n    private static TSipController controller;\n    private final TEventListener eventListener;\n    private final TEndpoint endpoint;\n\n    public static TSipController getInstance(TEndpoint endpoint) {\n        if (controller == null) {\n            controller = new TSipController(endpoint);\n        }\n        return controller;\n    }\n\n    private TSipController(TEndpoint endpoint) {\n        this.eventListener = endpoint.eventListener;\n        this.endpoint = endpoint;\n    }\n\n    public void fireLogin(){\n        new Handler(Looper.getMainLooper()).postDelayed(eventListener::onLogin, 1000);\n    }\n\n    public void fireLogOut(){\n        new Handler(Looper.getMainLooper()).postDelayed(eventListener::onLogOut, 1000);\n    }\n}\n</code></pre>\n<p><strong>TEventListener.java</strong></p>\n<pre><code>public interface TEventListener {\n    void onLogin();\n    void onLogOut();\n}\n</code></pre>\n"},{"tags":["java","mysql","database","spring-boot","database-design"],"comments":[{"owner":{"account_id":9744358,"reputation":39903,"user_id":10138734,"display_name":"Akina"},"score":0,"creation_date":1648030287,"post_id":71584918,"comment_id":126518633,"body_markdown":"You must store referencing identifier for the closest table in adjacency chain only. I.e. store only `Integer _classId;` in Student, and remove `Integer academyId;` and `Integer majorId;`. You shouldn&#39;t store `personCount` at all, count the amount of persons with according query when you need in it.","body":"You must store referencing identifier for the closest table in adjacency chain only. I.e. store only <code>Integer _classId;</code> in Student, and remove <code>Integer academyId;</code> and <code>Integer majorId;</code>. You shouldn&#39;t store <code>personCount</code> at all, count the amount of persons with according query when you need in it."},{"owner":{"account_id":24656209,"reputation":1,"user_id":18552860,"display_name":"Ice_Wift"},"score":0,"creation_date":1648033925,"post_id":71584918,"comment_id":126520115,"body_markdown":"Thanks for your answer, your advice is a good solution to solve the storage pressure of the database.       But also, this structure will do many link between `academy`,`major`,`class`,`student` when i try to query the personCount of a academy.       Should I keep the column of `_classId`,`academyId`,`majorId` in Table `student` to reduce the link?","body":"Thanks for your answer, your advice is a good solution to solve the storage pressure of the database.       But also, this structure will do many link between <code>academy</code>,<code>major</code>,<code>class</code>,<code>student</code> when i try to query the personCount of a academy.       Should I keep the column of <code>_classId</code>,<code>academyId</code>,<code>majorId</code> in Table <code>student</code> to reduce the link?"}],"answers":[{"tags":[],"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1648060614,"creation_date":1648060614,"answer_id":71592343,"question_id":71584918,"body_markdown":"Plan A:  Use `TRIGGER ... ON INSERT ...`\r\n\r\nPlan B:  Explicitly write `UPDATEs` to bump the counters.\r\n\r\nPlan C:  Encapsulate Plan B into Stored Procedures.\r\n\r\nPlan D:  Don&#39;t keep the counts in the tables, but recompute them when needed.  (This is the purist way -- &quot;thou shalt not have redundant info&quot;.)  For a thousand students, I doubt if there is much &quot;pressure&quot;.  For a million students, performance is likely to be poor.  In that case, what you have (tables with `personCount`) is essentially [_Summary Tables_](http://mysql.rjweb.org/doc.php/summarytables)","title":"How to optimize The Table inserted A record that cause Other Tables which directly count( or recurse count) The Tables record nums update in Java?","body":"<p>Plan A:  Use <code>TRIGGER ... ON INSERT ...</code></p>\n<p>Plan B:  Explicitly write <code>UPDATEs</code> to bump the counters.</p>\n<p>Plan C:  Encapsulate Plan B into Stored Procedures.</p>\n<p>Plan D:  Don't keep the counts in the tables, but recompute them when needed.  (This is the purist way -- &quot;thou shalt not have redundant info&quot;.)  For a thousand students, I doubt if there is much &quot;pressure&quot;.  For a million students, performance is likely to be poor.  In that case, what you have (tables with <code>personCount</code>) is essentially <a href=\"http://mysql.rjweb.org/doc.php/summarytables\" rel=\"nofollow noreferrer\"><em>Summary Tables</em></a></p>\n"}],"owner":{"account_id":24656209,"reputation":1,"user_id":18552860,"display_name":"Ice_Wift"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":71592343,"answer_count":1,"score":-2,"last_activity_date":1648060614,"creation_date":1648028385,"question_id":71584918,"body_markdown":"Here is a model, We have\r\n\r\nAcademy--Major--Class--Student\r\n\r\nA student only belong to A class\r\n\r\nA class only belong to A major\r\n\r\nA major only belong to A academy\r\n\r\n```java\r\n\r\nclass Academy {\r\n    String name;\r\n    Integer personCount;\r\n}\r\n\r\nclass Major {\r\n    String name;\r\n    Integer academyId;\r\n    Integer personCount;\r\n}\r\n\r\nclass _Class {\r\n    String name;\r\n    Integer majorId;\r\n    Integer personCount;\r\n}\r\n\r\nclass Student {\r\n    Long id;\r\n    String name;\r\n    Integer academyId;\r\n    Integer majorId;\r\n    Integer _classId;\r\n}\r\n```\r\n\r\nso, for each entity , there is a table map to it\r\nnow, we insert a record to Table `student`\r\n\r\nwhen the record has saved, the Table `class` has to update its record (the student belong), set person_count = person_count + 1\r\n\r\nafter it has done, the Table `major` also has to update its record (the updated record belong), set person_count = person_count + 1\r\n\r\nalso, The table `academy` still has to do update like `major` and `class`\r\n\r\nis there a better sloution to reduce the database write times? or a better table structure?\r\n\r\nI&#39;m still think of it, it do pressed the database of write\r\n\r\nthe limit of student records will below 100,000.\r\n\r\nbut in a specific time it will do high frequent inserts\r\n\r\nI expected a fast response solution","title":"How to optimize The Table inserted A record that cause Other Tables which directly count( or recurse count) The Tables record nums update in Java?","body":"<p>Here is a model, We have</p>\n<p>Academy--Major--Class--Student</p>\n<p>A student only belong to A class</p>\n<p>A class only belong to A major</p>\n<p>A major only belong to A academy</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nclass Academy {\n    String name;\n    Integer personCount;\n}\n\nclass Major {\n    String name;\n    Integer academyId;\n    Integer personCount;\n}\n\nclass _Class {\n    String name;\n    Integer majorId;\n    Integer personCount;\n}\n\nclass Student {\n    Long id;\n    String name;\n    Integer academyId;\n    Integer majorId;\n    Integer _classId;\n}\n</code></pre>\n<p>so, for each entity , there is a table map to it\nnow, we insert a record to Table <code>student</code></p>\n<p>when the record has saved, the Table <code>class</code> has to update its record (the student belong), set person_count = person_count + 1</p>\n<p>after it has done, the Table <code>major</code> also has to update its record (the updated record belong), set person_count = person_count + 1</p>\n<p>also, The table <code>academy</code> still has to do update like <code>major</code> and <code>class</code></p>\n<p>is there a better sloution to reduce the database write times? or a better table structure?</p>\n<p>I'm still think of it, it do pressed the database of write</p>\n<p>the limit of student records will below 100,000.</p>\n<p>but in a specific time it will do high frequent inserts</p>\n<p>I expected a fast response solution</p>\n"},{"tags":["java","hibernate","sqlite"],"answers":[{"tags":[],"owner":{"account_id":16772840,"reputation":63,"user_id":13023390,"display_name":"Osolemio44"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1587551192,"creation_date":1587551192,"answer_id":61362815,"question_id":60914651,"body_markdown":"After searching for few days, i found that you can use SQLite with Hibernate 5 if you create your own dialect. You also can try to use someone else dialect wich may be risky or outdated. Check this [link][1] for more info.\r\nFor the moment, hibernate do not support oficially SQLite. Maybe in the future that will change.\r\nIf you are searching for an embedded database, you can use [H2][2] wich is supported by Hibernate and seems to be recommended by them.\r\nYou also have HSQLDB or Apache Derby.\r\n\r\n\r\n  [1]: http://www.javaboss.it/en/hibernate-e-sqlite/\r\n  [2]: https://www.h2database.com/html/main.html","title":"SQLite dialect into Hibernate-Maven project","body":"<p>After searching for few days, i found that you can use SQLite with Hibernate 5 if you create your own dialect. You also can try to use someone else dialect wich may be risky or outdated. Check this <a href=\"http://www.javaboss.it/en/hibernate-e-sqlite/\" rel=\"nofollow noreferrer\">link</a> for more info.\nFor the moment, hibernate do not support oficially SQLite. Maybe in the future that will change.\nIf you are searching for an embedded database, you can use <a href=\"https://www.h2database.com/html/main.html\" rel=\"nofollow noreferrer\">H2</a> wich is supported by Hibernate and seems to be recommended by them.\nYou also have HSQLDB or Apache Derby.</p>\n"}],"owner":{"account_id":16772840,"reputation":63,"user_id":13023390,"display_name":"Osolemio44"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2802,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":61362815,"answer_count":1,"score":1,"last_activity_date":1648060460,"creation_date":1585486729,"question_id":60914651,"body_markdown":"i am a java student and i have to do a small project. I have to use Maven and Hibernate ( no Spring frameworks). I use IntelliJ as IDE. The thing is that my teacher recomended me to use SQLite as RDBMS because its very simple, 1 file and there is no need to implement a server inside my app. ( i have no idea to do the last point). \r\nThe problem is that when i try to do the &quot;hibernate.cfg.xml &quot; i have no way to configure it because of the lack of information. Seems there is no dialect supported from Hibernate and the info i could find on internet is outdated. Any idea on how i can configure it? Do i really need to use another RDBMS ?\r\nthere is a picture of my [project structure][1]\r\n\r\nthis is my hibernate.cfg.xml:\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE hibernate-configuration PUBLIC &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n    &lt;hibernate-configuration&gt;\r\n        &lt;session-factory&gt;\r\n            &lt;property name=&quot;connection.driver_class&quot;&gt;org.sqlite.JDBC&lt;/property&gt;\r\n            &lt;property name=&quot;connection.url&quot;&gt;jdbc:sqlite://db/appiculturedb.sqlite3&lt;/property&gt;\r\n            &lt;property name=&quot;connection.username&quot;&gt;&lt;/property&gt;\r\n            &lt;property name=&quot;connection.password&quot;&gt;&lt;/property&gt;\r\n            &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.SQLiteDialect&lt;/property&gt;\r\n            &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\r\n    \r\n            &lt;!--        maping with xml--&gt;\r\n            &lt;mapping resource=&quot;Bodega.hbm.xml&quot; /&gt;\r\n    \r\n            &lt;!--        maping with anotations--&gt;\r\n            &lt;!--        &lt;mapping class=&quot;com.stephane.Bodega&quot; /&gt;     --&gt;\r\n    \r\n        &lt;/session-factory&gt;\r\n    &lt;/hibernate-configuration&gt;\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dsi9F.png\r\n\r\n","title":"SQLite dialect into Hibernate-Maven project","body":"<p>i am a java student and i have to do a small project. I have to use Maven and Hibernate ( no Spring frameworks). I use IntelliJ as IDE. The thing is that my teacher recomended me to use SQLite as RDBMS because its very simple, 1 file and there is no need to implement a server inside my app. ( i have no idea to do the last point). \nThe problem is that when i try to do the \"hibernate.cfg.xml \" i have no way to configure it because of the lack of information. Seems there is no dialect supported from Hibernate and the info i could find on internet is outdated. Any idea on how i can configure it? Do i really need to use another RDBMS ?\nthere is a picture of my <a href=\"https://i.stack.imgur.com/dsi9F.png\" rel=\"nofollow noreferrer\">project structure</a></p>\n\n<p>this is my hibernate.cfg.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC \"-//Hibernate/Hibernate Configuration DTD 3.0//EN\" \"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd\"&gt;\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;property name=\"connection.driver_class\"&gt;org.sqlite.JDBC&lt;/property&gt;\n        &lt;property name=\"connection.url\"&gt;jdbc:sqlite://db/appiculturedb.sqlite3&lt;/property&gt;\n        &lt;property name=\"connection.username\"&gt;&lt;/property&gt;\n        &lt;property name=\"connection.password\"&gt;&lt;/property&gt;\n        &lt;property name=\"dialect\"&gt;org.hibernate.dialect.SQLiteDialect&lt;/property&gt;\n        &lt;property name=\"hibernate.show_sql\"&gt;true&lt;/property&gt;\n\n        &lt;!--        maping with xml--&gt;\n        &lt;mapping resource=\"Bodega.hbm.xml\" /&gt;\n\n        &lt;!--        maping with anotations--&gt;\n        &lt;!--        &lt;mapping class=\"com.stephane.Bodega\" /&gt;     --&gt;\n\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n"},{"tags":["python","java","encryption","groovy"],"answers":[{"tags":[],"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648060300,"creation_date":1647939771,"answer_id":71569379,"question_id":71566559,"body_markdown":"The Python code uses [sealed boxes][1], the Java/Groovy code does not, so the two are not compatible.\r\n\r\nSince the generated ciphertexts are not deterministic, a direct comparison is not possible. A reasonable test is to decrypt the ciphertexts of both codes using the *same* code.&lt;br&gt;\r\nThe following Python code uses the posted code for encryption and then performs decryption with the supplemented code. This code will be used to test the Java code later:\r\n\r\n```py\r\nfrom base64 import b64encode, b64decode\r\nfrom nacl import encoding, public\r\n\r\ndef encrypt(public_key: str, secret_value: str) -&gt; str:\r\n  &quot;&quot;&quot;Encrypt a Unicode string using the public key.&quot;&quot;&quot;\r\n  public_key = public.PublicKey(public_key.encode(&quot;utf-8&quot;), encoding.Base64Encoder())\r\n  sealed_box = public.SealedBox(public_key)\r\n  encrypted = sealed_box.encrypt(secret_value.encode(&quot;utf-8&quot;))\r\n  return b64encode(encrypted).decode(&quot;utf-8&quot;)\r\n\r\npkB64 = &#39;xBC9lTyWdE/6EObv5NjryMbIvrviOzzPA+5XyM0QcHE=&#39;\r\nskB64 = &#39;0b9867Pq6sEdnxYM1ZscOhiMpruKn1Xg3xxB+wUF5eI=&#39;\r\n\r\n# Encryption\r\nencrypted = encrypt(pkB64, &#39;test&#39;)\r\n\r\n# Decryption\r\nsecret_key = public.PrivateKey(skB64.encode(&quot;utf-8&quot;), encoding.Base64Encoder())\r\nunseal_box = public.SealedBox(secret_key)\r\nplaintext = unseal_box.decrypt(b64decode(encrypted))\r\nprint(plaintext.decode(&#39;utf-8&#39;)) # test\r\n```\r\n\r\n-----------\r\n\r\nSealed boxes don&#39;t seem to be supported by [salty-coffee][2] (at least I haven&#39;t found a way). Therefore, and because I don&#39;t know of any *pure* Java library that supports sealed boxes, I use [lazysodium][3] (which is also a wrapper over the Libsodium library, though) to demonstrate the migration. For other libraries (even pure Java libraries, if there are any), this should be largely analogous:\r\n\r\n```java\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.util.Base64;\r\nimport java.util.HexFormat;\r\n\r\nimport com.goterl.lazysodium.LazySodiumJava;\r\nimport com.goterl.lazysodium.SodiumJava;\r\nimport com.goterl.lazysodium.utils.Key;\r\nimport com.goterl.lazysodium.utils.KeyPair;\r\n\r\n....\r\n\r\nSodiumJava sodium = new SodiumJava();\r\nLazySodiumJava lazySodium = new LazySodiumJava(sodium, StandardCharsets.UTF_8);\r\n\r\nKey secretKey = Key.fromBase64String(&quot;0b9867Pq6sEdnxYM1ZscOhiMpruKn1Xg3xxB+wUF5eI=&quot;);\r\nKey publicKey = Key.fromBase64String(&quot;xBC9lTyWdE/6EObv5NjryMbIvrviOzzPA+5XyM0QcHE=&quot;);\r\n\r\n// Encryption\r\nKeyPair keyPair = new KeyPair(publicKey, secretKey);\r\nString ciphertext = lazySodium.cryptoBoxSealEasy(&quot;test&quot;, publicKey);\r\nSystem.out.println(Base64.getEncoder().encodeToString(HexFormat.of().parseHex(ciphertext)));\r\n\r\n// Decryption\r\nString decrypted = lazySodium.cryptoBoxSealOpenEasy(ciphertext, keyPair);\r\nSystem.out.println(decrypted);\r\n```\r\n\r\nIf a ciphertext generated with this code is used as ciphertext in the Python code, it can be successfully decrypted, which shows that the encryption of both codes is functionally identical.\r\n\r\n---------------\r\n\r\n**Edit:**\r\n\r\nAs an alternative to another library, salty-coffee can be extended to support sealed boxes. \r\n\r\nIf the sender uses a sealed box, basically the following happens:\r\n1. first, an ephemeral key pair is generated: `ephemSK`, `ephemPK`.\r\n2. let `PK` be the public key of the receiver. A 24 bytes nonce is determined as follows: `nonce = Blake2b(ephemPK || PK)`\r\n3. an encryption is performed with *CryptoBox* using `ephemSK` as secret key, `PK` as public key and the previously generated `nonce`.\r\n4. `CryptoBox` returns the concatenation of ciphertext and the 16 bytes MAC. `ephemPK` is prepended to the ciphertext. The concatenation of these 3 parts is the result of the sealed box.\r\n\r\nsalty-coffee provides all Libsodium functionalities needed for the implementation except Blake2b. For this you can use e.g. Bouncycastle.\r\n\r\nA possible implmentation is:\r\n\r\n```java\r\nimport software.pando.crypto.nacl.*;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.security.KeyPair;\r\nimport java.util.Base64;\r\nimport org.bouncycastle.crypto.digests.Blake2bDigest;\r\n\r\n...\r\n\r\nbyte[] plaintext = &quot;The quick brown fox jumps over the lazy dog&quot;.getBytes(StandardCharsets.UTF_8);\r\n  \r\n// Sender&#39;s secret key SK, receiver&#39;s public key PK \r\nbyte[] SK = Base64.getDecoder().decode(&quot;0b9867Pq6sEdnxYM1ZscOhiMpruKn1Xg3xxB+wUF5eI=&quot;);\r\nbyte[] PK = Base64.getDecoder().decode(&quot;xBC9lTyWdE/6EObv5NjryMbIvrviOzzPA+5XyM0QcHE=&quot;);\t\r\n\r\n// Create an ephemeral keypair: ephemSK, ephemPK\r\nKeyPair ephemKeyPair = CryptoBox.keyPair();\r\nbyte[] ephemSK_pkcs8 = ephemKeyPair.getPrivate().getEncoded();\r\nbyte[] ephemPK_x509 = ephemKeyPair.getPublic().getEncoded();\r\nbyte[] ephemSK = getRawKey(ephemSK_pkcs8);\r\nbyte[] ephemPK = getRawKey(ephemPK_x509);\r\n\r\n// Create the nonce = Blake2b(ephemeralPK || PK))\r\nbyte[] noncematerial = new byte[64];\r\nSystem.arraycopy(ephemPK, 0, noncematerial, 0, ephemPK.length);\r\nSystem.arraycopy(PK, 0, noncematerial, ephemPK.length, PK.length);\t\r\nbyte[] nonce = new byte[24];\r\nBlake2bDigest dig = new Blake2bDigest(null, nonce.length, null, null);\r\ndig.update(noncematerial, 0, noncematerial.length);\r\ndig.doFinal(nonce, 0);\r\n\r\n// Encrypt with CryptoBox using ephemSK, PK and the nonce\r\nCryptoBox cryptobox = CryptoBox.encrypt(CryptoBox.privateKey(ephemSK), CryptoBox.publicKey(PK), nonce, plaintext);\r\nbyte[] ciphertextMAC = cryptobox.getCiphertextWithTag();\r\n\r\n// Prepend ephemPK\r\nbyte[] secretBoxSealed = new byte[ephemPK.length + ciphertextMAC.length];\r\nSystem.arraycopy(ephemPK, 0, secretBoxSealed, 0, ephemPK.length);\r\nSystem.arraycopy(ciphertextMAC, 0, secretBoxSealed, ephemPK.length, ciphertextMAC.length);\r\nString secretBoxSealedB64 = Base64.getEncoder().encodeToString(secretBoxSealed);\r\nSystem.out.println(secretBoxSealedB64);\t\r\n```\r\n\r\nwith: \r\n\r\n```java\r\n// The raw keys are the last 32 bytes in PKCS#8 and X.509 formatted keys respectively.\r\nprivate static byte[] getRawKey(byte[] key) {\r\n\tbyte[] result = new byte[32];\r\n\tSystem.arraycopy(key, key.length - result.length, result, 0, result.length);\r\n\treturn result;\r\n}\r\n```\r\n\r\nA ciphertext created with this code can be successfully decrypted by the Python code above, proving the compatability.\r\n\r\n[1]: https://libsodium.gitbook.io/doc/public-key_cryptography/sealed_boxes\r\n[2]: https://github.com/NeilMadden/salty-coffee\r\n[3]: https://github.com/terl/lazysodium-java","title":"Why does this Java NaCl encryption not work with GitHub Actions Secrets","body":"<p>The Python code uses <a href=\"https://libsodium.gitbook.io/doc/public-key_cryptography/sealed_boxes\" rel=\"nofollow noreferrer\">sealed boxes</a>, the Java/Groovy code does not, so the two are not compatible.</p>\n<p>Since the generated ciphertexts are not deterministic, a direct comparison is not possible. A reasonable test is to decrypt the ciphertexts of both codes using the <em>same</em> code.<br>\nThe following Python code uses the posted code for encryption and then performs decryption with the supplemented code. This code will be used to test the Java code later:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from base64 import b64encode, b64decode\nfrom nacl import encoding, public\n\ndef encrypt(public_key: str, secret_value: str) -&gt; str:\n  &quot;&quot;&quot;Encrypt a Unicode string using the public key.&quot;&quot;&quot;\n  public_key = public.PublicKey(public_key.encode(&quot;utf-8&quot;), encoding.Base64Encoder())\n  sealed_box = public.SealedBox(public_key)\n  encrypted = sealed_box.encrypt(secret_value.encode(&quot;utf-8&quot;))\n  return b64encode(encrypted).decode(&quot;utf-8&quot;)\n\npkB64 = 'xBC9lTyWdE/6EObv5NjryMbIvrviOzzPA+5XyM0QcHE='\nskB64 = '0b9867Pq6sEdnxYM1ZscOhiMpruKn1Xg3xxB+wUF5eI='\n\n# Encryption\nencrypted = encrypt(pkB64, 'test')\n\n# Decryption\nsecret_key = public.PrivateKey(skB64.encode(&quot;utf-8&quot;), encoding.Base64Encoder())\nunseal_box = public.SealedBox(secret_key)\nplaintext = unseal_box.decrypt(b64decode(encrypted))\nprint(plaintext.decode('utf-8')) # test\n</code></pre>\n<hr />\n<p>Sealed boxes don't seem to be supported by <a href=\"https://github.com/NeilMadden/salty-coffee\" rel=\"nofollow noreferrer\">salty-coffee</a> (at least I haven't found a way). Therefore, and because I don't know of any <em>pure</em> Java library that supports sealed boxes, I use <a href=\"https://github.com/terl/lazysodium-java\" rel=\"nofollow noreferrer\">lazysodium</a> (which is also a wrapper over the Libsodium library, though) to demonstrate the migration. For other libraries (even pure Java libraries, if there are any), this should be largely analogous:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.nio.charset.StandardCharsets;\nimport java.util.Base64;\nimport java.util.HexFormat;\n\nimport com.goterl.lazysodium.LazySodiumJava;\nimport com.goterl.lazysodium.SodiumJava;\nimport com.goterl.lazysodium.utils.Key;\nimport com.goterl.lazysodium.utils.KeyPair;\n\n....\n\nSodiumJava sodium = new SodiumJava();\nLazySodiumJava lazySodium = new LazySodiumJava(sodium, StandardCharsets.UTF_8);\n\nKey secretKey = Key.fromBase64String(&quot;0b9867Pq6sEdnxYM1ZscOhiMpruKn1Xg3xxB+wUF5eI=&quot;);\nKey publicKey = Key.fromBase64String(&quot;xBC9lTyWdE/6EObv5NjryMbIvrviOzzPA+5XyM0QcHE=&quot;);\n\n// Encryption\nKeyPair keyPair = new KeyPair(publicKey, secretKey);\nString ciphertext = lazySodium.cryptoBoxSealEasy(&quot;test&quot;, publicKey);\nSystem.out.println(Base64.getEncoder().encodeToString(HexFormat.of().parseHex(ciphertext)));\n\n// Decryption\nString decrypted = lazySodium.cryptoBoxSealOpenEasy(ciphertext, keyPair);\nSystem.out.println(decrypted);\n</code></pre>\n<p>If a ciphertext generated with this code is used as ciphertext in the Python code, it can be successfully decrypted, which shows that the encryption of both codes is functionally identical.</p>\n<hr />\n<p><strong>Edit:</strong></p>\n<p>As an alternative to another library, salty-coffee can be extended to support sealed boxes.</p>\n<p>If the sender uses a sealed box, basically the following happens:</p>\n<ol>\n<li>first, an ephemeral key pair is generated: <code>ephemSK</code>, <code>ephemPK</code>.</li>\n<li>let <code>PK</code> be the public key of the receiver. A 24 bytes nonce is determined as follows: <code>nonce = Blake2b(ephemPK || PK)</code></li>\n<li>an encryption is performed with <em>CryptoBox</em> using <code>ephemSK</code> as secret key, <code>PK</code> as public key and the previously generated <code>nonce</code>.</li>\n<li><code>CryptoBox</code> returns the concatenation of ciphertext and the 16 bytes MAC. <code>ephemPK</code> is prepended to the ciphertext. The concatenation of these 3 parts is the result of the sealed box.</li>\n</ol>\n<p>salty-coffee provides all Libsodium functionalities needed for the implementation except Blake2b. For this you can use e.g. Bouncycastle.</p>\n<p>A possible implmentation is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import software.pando.crypto.nacl.*;\nimport java.nio.charset.StandardCharsets;\nimport java.security.KeyPair;\nimport java.util.Base64;\nimport org.bouncycastle.crypto.digests.Blake2bDigest;\n\n...\n\nbyte[] plaintext = &quot;The quick brown fox jumps over the lazy dog&quot;.getBytes(StandardCharsets.UTF_8);\n  \n// Sender's secret key SK, receiver's public key PK \nbyte[] SK = Base64.getDecoder().decode(&quot;0b9867Pq6sEdnxYM1ZscOhiMpruKn1Xg3xxB+wUF5eI=&quot;);\nbyte[] PK = Base64.getDecoder().decode(&quot;xBC9lTyWdE/6EObv5NjryMbIvrviOzzPA+5XyM0QcHE=&quot;); \n\n// Create an ephemeral keypair: ephemSK, ephemPK\nKeyPair ephemKeyPair = CryptoBox.keyPair();\nbyte[] ephemSK_pkcs8 = ephemKeyPair.getPrivate().getEncoded();\nbyte[] ephemPK_x509 = ephemKeyPair.getPublic().getEncoded();\nbyte[] ephemSK = getRawKey(ephemSK_pkcs8);\nbyte[] ephemPK = getRawKey(ephemPK_x509);\n\n// Create the nonce = Blake2b(ephemeralPK || PK))\nbyte[] noncematerial = new byte[64];\nSystem.arraycopy(ephemPK, 0, noncematerial, 0, ephemPK.length);\nSystem.arraycopy(PK, 0, noncematerial, ephemPK.length, PK.length);  \nbyte[] nonce = new byte[24];\nBlake2bDigest dig = new Blake2bDigest(null, nonce.length, null, null);\ndig.update(noncematerial, 0, noncematerial.length);\ndig.doFinal(nonce, 0);\n\n// Encrypt with CryptoBox using ephemSK, PK and the nonce\nCryptoBox cryptobox = CryptoBox.encrypt(CryptoBox.privateKey(ephemSK), CryptoBox.publicKey(PK), nonce, plaintext);\nbyte[] ciphertextMAC = cryptobox.getCiphertextWithTag();\n\n// Prepend ephemPK\nbyte[] secretBoxSealed = new byte[ephemPK.length + ciphertextMAC.length];\nSystem.arraycopy(ephemPK, 0, secretBoxSealed, 0, ephemPK.length);\nSystem.arraycopy(ciphertextMAC, 0, secretBoxSealed, ephemPK.length, ciphertextMAC.length);\nString secretBoxSealedB64 = Base64.getEncoder().encodeToString(secretBoxSealed);\nSystem.out.println(secretBoxSealedB64); \n</code></pre>\n<p>with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// The raw keys are the last 32 bytes in PKCS#8 and X.509 formatted keys respectively.\nprivate static byte[] getRawKey(byte[] key) {\n    byte[] result = new byte[32];\n    System.arraycopy(key, key.length - result.length, result, 0, result.length);\n    return result;\n}\n</code></pre>\n<p>A ciphertext created with this code can be successfully decrypted by the Python code above, proving the compatability.</p>\n"}],"owner":{"account_id":52728,"reputation":15838,"user_id":157605,"accept_rate":76,"display_name":"Phyxx"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":511,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71569379,"answer_count":1,"score":1,"last_activity_date":1648060300,"creation_date":1647919135,"question_id":71566559,"body_markdown":"I&#39;m attempting to write a Java app that creates secrets in a GitHub repo to be consumed by GitHub Actions. There are many SodiumLib wrappers available, but they generally wrap up the native C library. I was looking for a pure Java implementation.\r\n\r\nhttps://github.com/NeilMadden/salty-coffee appears to be what I need, and it does appear that the library will create encrypted string. The Groovy script below takes a key and input value, and generates an encrypted value:\r\n\r\n```\r\n@Grab(group=&#39;software.pando.crypto&#39;, module=&#39;salty-coffee&#39;, version=&#39;1.0.4&#39;)\r\n@Grab(group=&#39;org.apache.commons&#39;, module=&#39;commons-lang3&#39;, version=&#39;3.12.0&#39;)\r\n@Grab(group=&#39;commons-codec&#39;, module=&#39;commons-codec&#39;, version=&#39;1.15&#39;)\r\n\r\nimport software.pando.crypto.nacl.*\r\nimport org.apache.commons.lang3.*\r\nimport java.util.*\r\nimport org.apache.commons.codec.binary.Base64\r\nimport java.security.*\r\nimport java.nio.charset.*\r\n\r\ndef base64 = new Base64(3)\r\n\r\ndef key = base64.decode(args[0])\r\ndef value = StringUtils.defaultIfEmpty(args[1], &quot;&quot;)\r\n\r\nprintln &quot;Encrypting &quot; + value\r\n\r\ndef keyPair = CryptoBox.keyPair();\r\ndef githubPublicKey = CryptoBox.publicKey(key)\r\n\r\ndef box = CryptoBox.encrypt(keyPair.getPrivate(), githubPublicKey, value)\r\n\t\r\ndef out = new ByteArrayOutputStream()\r\nbox.writeTo(out);\r\nout.flush();\r\n\r\ndef encryptedValue = new String(base64.encode(out.toByteArray()))\r\n\r\nprintln encryptedValue\r\n```\r\n\r\nFor example:\r\n\r\n```\r\ngroovy encrypt.groovy 2Sg8iYjAxxmI2LvUXpJjkYrMxURPc8r+dB7TJyvvcCU= test\r\n```\r\n\r\nThe problem is that the generated value is ignored when it is used to create a new [GitHub API secret][1]. You attempt to create the secret, and the HTTP requests works ok, but the secret is empty when you use it in a workflow.\r\n\r\nSecrets created from this Python script that generates encrypted values works fine however, so I know I am making the correct HTTP calls and using the correct keys to generate a GitHub secret:\r\n\r\n```\r\nfrom base64 import b64encode\r\nfrom nacl import encoding, public\r\nimport sys\r\n\r\ndef encrypt(public_key: str, secret_value: str) -&gt; str:\r\n  &quot;&quot;&quot;Encrypt a Unicode string using the public key.&quot;&quot;&quot;\r\n  public_key = public.PublicKey(public_key.encode(&quot;utf-8&quot;), encoding.Base64Encoder())\r\n  sealed_box = public.SealedBox(public_key)\r\n  encrypted = sealed_box.encrypt(secret_value.encode(&quot;utf-8&quot;))\r\n  return b64encode(encrypted).decode(&quot;utf-8&quot;)\r\n  \r\nprint(encrypt(sys.argv[1], sys.argv[2]))\r\n```\r\n\r\nWhat am I doing wrong with the Java (or Groovy) example?\r\n\r\n  [1]: https://docs.github.com/en/rest/reference/actions#create-or-update-a-repository-secret","title":"Why does this Java NaCl encryption not work with GitHub Actions Secrets","body":"<p>I'm attempting to write a Java app that creates secrets in a GitHub repo to be consumed by GitHub Actions. There are many SodiumLib wrappers available, but they generally wrap up the native C library. I was looking for a pure Java implementation.</p>\n<p><a href=\"https://github.com/NeilMadden/salty-coffee\" rel=\"nofollow noreferrer\">https://github.com/NeilMadden/salty-coffee</a> appears to be what I need, and it does appear that the library will create encrypted string. The Groovy script below takes a key and input value, and generates an encrypted value:</p>\n<pre><code>@Grab(group='software.pando.crypto', module='salty-coffee', version='1.0.4')\n@Grab(group='org.apache.commons', module='commons-lang3', version='3.12.0')\n@Grab(group='commons-codec', module='commons-codec', version='1.15')\n\nimport software.pando.crypto.nacl.*\nimport org.apache.commons.lang3.*\nimport java.util.*\nimport org.apache.commons.codec.binary.Base64\nimport java.security.*\nimport java.nio.charset.*\n\ndef base64 = new Base64(3)\n\ndef key = base64.decode(args[0])\ndef value = StringUtils.defaultIfEmpty(args[1], &quot;&quot;)\n\nprintln &quot;Encrypting &quot; + value\n\ndef keyPair = CryptoBox.keyPair();\ndef githubPublicKey = CryptoBox.publicKey(key)\n\ndef box = CryptoBox.encrypt(keyPair.getPrivate(), githubPublicKey, value)\n    \ndef out = new ByteArrayOutputStream()\nbox.writeTo(out);\nout.flush();\n\ndef encryptedValue = new String(base64.encode(out.toByteArray()))\n\nprintln encryptedValue\n</code></pre>\n<p>For example:</p>\n<pre><code>groovy encrypt.groovy 2Sg8iYjAxxmI2LvUXpJjkYrMxURPc8r+dB7TJyvvcCU= test\n</code></pre>\n<p>The problem is that the generated value is ignored when it is used to create a new <a href=\"https://docs.github.com/en/rest/reference/actions#create-or-update-a-repository-secret\" rel=\"nofollow noreferrer\">GitHub API secret</a>. You attempt to create the secret, and the HTTP requests works ok, but the secret is empty when you use it in a workflow.</p>\n<p>Secrets created from this Python script that generates encrypted values works fine however, so I know I am making the correct HTTP calls and using the correct keys to generate a GitHub secret:</p>\n<pre><code>from base64 import b64encode\nfrom nacl import encoding, public\nimport sys\n\ndef encrypt(public_key: str, secret_value: str) -&gt; str:\n  &quot;&quot;&quot;Encrypt a Unicode string using the public key.&quot;&quot;&quot;\n  public_key = public.PublicKey(public_key.encode(&quot;utf-8&quot;), encoding.Base64Encoder())\n  sealed_box = public.SealedBox(public_key)\n  encrypted = sealed_box.encrypt(secret_value.encode(&quot;utf-8&quot;))\n  return b64encode(encrypted).decode(&quot;utf-8&quot;)\n  \nprint(encrypt(sys.argv[1], sys.argv[2]))\n</code></pre>\n<p>What am I doing wrong with the Java (or Groovy) example?</p>\n"},{"tags":["java","foreach","java-stream"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1648107519,"post_id":71589884,"comment_id":126541516,"body_markdown":"`Iterator&lt;String&gt; it = list.stream() .filter(s -&gt; s.length() &gt; 3) .iterator(); if(it.hasNext()) { g.writeArrayFieldStart(&quot;arr&quot;); it.forEachRemaining(g::writeString); g.writeEndArray();}`","body":"<code>Iterator&lt;String&gt; it = list.stream() .filter(s -&gt; s.length() &gt; 3) .iterator(); if(it.hasNext()) { g.writeArrayFieldStart(&quot;arr&quot;); it.forEachRemaining(g::writeString); g.writeEndArray();}</code>"}],"answers":[{"tags":[],"owner":{"account_id":14179476,"reputation":2663,"user_id":10243634,"display_name":"Oboe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648053524,"creation_date":1648049945,"answer_id":71590035,"question_id":71589884,"body_markdown":"You can use `anyMatch()` and `Collectors.joining()` with prefix and suffix:\r\n\r\n    private static String NEW_LINE = System.lineSeparator();\r\n    \r\n    public static void print(List&lt;String&gt; list) {\r\n        String str = list.stream().anyMatch(s -&gt; s.length() &gt; 3) \r\n            ? list.stream().filter(s -&gt; s.length() &gt; 3)\r\n                    .collect(Collectors.joining(NEW_LINE, \r\n                            &quot;before&quot; + NEW_LINE, NEW_LINE + &quot;after&quot;))\r\n            : &quot;&quot;;\r\n        System.out.println(str);\r\n    }\r\n\r\nAs an alternative approach, you can reduce the `stream` using `StringBuilder` as identity. Then, if the `StringBuilder` isn&#39;t empty, you can insert `&quot;before&quot;` and append `&quot;after&quot;`. This approach performs only one terminal operation.\r\n\r\n    public static void print(List&lt;String&gt; list) {\r\n        StringBuilder sb = list.stream()\r\n                .filter(str -&gt; str.length() &gt; 3)\r\n                .reduce(new StringBuilder(), \r\n                        (s, str) -&gt; s.append(str).append(NEW_LINE), \r\n                        StringBuilder::append);\r\n        if (!sb.isEmpty()) {\r\n            sb.insert(0, NEW_LINE).insert(0, &quot;before&quot;)\r\n                .append(&quot;after&quot;);\r\n        }\r\n        \r\n        System.out.println(sb.toString());\r\n    }\r\n\r\nTest:\r\n\r\n    List&lt;String&gt; list = Arrays.asList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;);\r\n\r\n    print(list);\r\n\r\nOutput:\r\n\r\n    before\r\n    three\r\n    four\r\n    after\r\n","title":"Perform actions with streaming api before/after foreach","body":"<p>You can use <code>anyMatch()</code> and <code>Collectors.joining()</code> with prefix and suffix:</p>\n<pre><code>private static String NEW_LINE = System.lineSeparator();\n\npublic static void print(List&lt;String&gt; list) {\n    String str = list.stream().anyMatch(s -&gt; s.length() &gt; 3) \n        ? list.stream().filter(s -&gt; s.length() &gt; 3)\n                .collect(Collectors.joining(NEW_LINE, \n                        &quot;before&quot; + NEW_LINE, NEW_LINE + &quot;after&quot;))\n        : &quot;&quot;;\n    System.out.println(str);\n}\n</code></pre>\n<p>As an alternative approach, you can reduce the <code>stream</code> using <code>StringBuilder</code> as identity. Then, if the <code>StringBuilder</code> isn't empty, you can insert <code>&quot;before&quot;</code> and append <code>&quot;after&quot;</code>. This approach performs only one terminal operation.</p>\n<pre><code>public static void print(List&lt;String&gt; list) {\n    StringBuilder sb = list.stream()\n            .filter(str -&gt; str.length() &gt; 3)\n            .reduce(new StringBuilder(), \n                    (s, str) -&gt; s.append(str).append(NEW_LINE), \n                    StringBuilder::append);\n    if (!sb.isEmpty()) {\n        sb.insert(0, NEW_LINE).insert(0, &quot;before&quot;)\n            .append(&quot;after&quot;);\n    }\n    \n    System.out.println(sb.toString());\n}\n</code></pre>\n<p>Test:</p>\n<pre><code>List&lt;String&gt; list = Arrays.asList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;);\n\nprint(list);\n</code></pre>\n<p>Output:</p>\n<pre><code>before\nthree\nfour\nafter\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648060258,"creation_date":1648060258,"answer_id":71592282,"question_id":71589884,"body_markdown":"I would use [Stream.concat](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/stream/Stream.html#concat(java.util.stream.Stream,java.util.stream.Stream)) for this:\r\n\r\n    Stream.concat(\r\n        Stream.of(&quot;before&quot;),\r\n        Stream.concat(\r\n            list.stream().filter(s -&gt; s.length() &gt; 3),\r\n            Stream.of(&quot;after&quot;)))\r\n                .forEach(System.out::println);\r\n\r\nYou might find it more readable split the logic into separate statements:\r\n\r\n    Stream&lt;String&gt; stream = list.stream().filter(s -&gt; s.length() &gt; 3);\r\n    stream = Stream.concat(Stream.of(&quot;before&quot;), stream);\r\n    stream = Stream.concat(stream, Stream.of(&quot;after&quot;));\r\n    stream.forEach(System.out::println);\r\n","title":"Perform actions with streaming api before/after foreach","body":"<p>I would use <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/stream/Stream.html#concat(java.util.stream.Stream,java.util.stream.Stream)\" rel=\"nofollow noreferrer\">Stream.concat</a> for this:</p>\n<pre><code>Stream.concat(\n    Stream.of(&quot;before&quot;),\n    Stream.concat(\n        list.stream().filter(s -&gt; s.length() &gt; 3),\n        Stream.of(&quot;after&quot;)))\n            .forEach(System.out::println);\n</code></pre>\n<p>You might find it more readable split the logic into separate statements:</p>\n<pre><code>Stream&lt;String&gt; stream = list.stream().filter(s -&gt; s.length() &gt; 3);\nstream = Stream.concat(Stream.of(&quot;before&quot;), stream);\nstream = Stream.concat(stream, Stream.of(&quot;after&quot;));\nstream.forEach(System.out::println);\n</code></pre>\n"}],"owner":{"account_id":321061,"reputation":827,"user_id":2751039,"accept_rate":86,"display_name":"Matt"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":320,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1648060258,"creation_date":1648049359,"question_id":71589884,"body_markdown":"Here&#39;s the non-stream code that I want to reproduce using *only* the streaming api if possible:\r\n\r\n    List&lt;String&gt; list = Arrays.asList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;);\r\n    list.removeIf(s -&gt; s.length() &lt;= 3);\r\n    \r\n    if (!list.isEmpty()) {\r\n        System.out.println(&quot;before&quot;);\r\n        for (String elem : list) {\r\n            System.out.println(elem);\r\n        }\r\n        System.out.println(&quot;after&quot;);\r\n    }\r\n\r\nOf course simple iteration is easy with a stream:\r\n\r\n    List&lt;String&gt; list = Arrays.asList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;);\r\n    list.stream()\r\n            .filter(s -&gt; s.length() &gt; 3)\r\n            .forEach(System.out::println);\r\n\r\nBut I need to add the &quot;before&quot; and &quot;after&quot; lines only if the stream is not empty after filtering. Is this possible in one statement or do I need to `collect`?\r\n\r\nThis hardly seems like a better solution...\r\n\r\n    List&lt;String&gt; list = Arrays.asList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;);\r\n    List&lt;String&gt; filtered = list.stream()\r\n            .filter(s -&gt; s.length() &gt; 3)\r\n            .collect(Collectors.toList());\r\n    if (!filtered.isEmpty()) {\r\n        System.out.println(&quot;before&quot;);\r\n        filtered.stream().forEach(System.out::println);\r\n        System.out.println(&quot;after&quot;);\r\n    }\r\n\r\n**Update:** The examples above with Strings are too simple. I actually need to write a json array if the filtered list is not empty. I cannot write an empty array.\r\n\r\n    private void writeJsonArray(JsonGenerator g, List&lt;String&gt; list) {\r\n        list.removeIf(s -&gt; s.length() &lt;= 3);\r\n        \r\n        if (!list.isEmpty()) {\r\n            g.writeArrayFieldStart(&quot;arr&quot;);\r\n            for (String elem : list) {\r\n                g.writeString(elem);\r\n            }\r\n            g.writeEndArray();\r\n        }\r\n    }\r\n","title":"Perform actions with streaming api before/after foreach","body":"<p>Here's the non-stream code that I want to reproduce using <em>only</em> the streaming api if possible:</p>\n<pre><code>List&lt;String&gt; list = Arrays.asList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;);\nlist.removeIf(s -&gt; s.length() &lt;= 3);\n\nif (!list.isEmpty()) {\n    System.out.println(&quot;before&quot;);\n    for (String elem : list) {\n        System.out.println(elem);\n    }\n    System.out.println(&quot;after&quot;);\n}\n</code></pre>\n<p>Of course simple iteration is easy with a stream:</p>\n<pre><code>List&lt;String&gt; list = Arrays.asList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;);\nlist.stream()\n        .filter(s -&gt; s.length() &gt; 3)\n        .forEach(System.out::println);\n</code></pre>\n<p>But I need to add the &quot;before&quot; and &quot;after&quot; lines only if the stream is not empty after filtering. Is this possible in one statement or do I need to <code>collect</code>?</p>\n<p>This hardly seems like a better solution...</p>\n<pre><code>List&lt;String&gt; list = Arrays.asList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;);\nList&lt;String&gt; filtered = list.stream()\n        .filter(s -&gt; s.length() &gt; 3)\n        .collect(Collectors.toList());\nif (!filtered.isEmpty()) {\n    System.out.println(&quot;before&quot;);\n    filtered.stream().forEach(System.out::println);\n    System.out.println(&quot;after&quot;);\n}\n</code></pre>\n<p><strong>Update:</strong> The examples above with Strings are too simple. I actually need to write a json array if the filtered list is not empty. I cannot write an empty array.</p>\n<pre><code>private void writeJsonArray(JsonGenerator g, List&lt;String&gt; list) {\n    list.removeIf(s -&gt; s.length() &lt;= 3);\n    \n    if (!list.isEmpty()) {\n        g.writeArrayFieldStart(&quot;arr&quot;);\n        for (String elem : list) {\n            g.writeString(elem);\n        }\n        g.writeEndArray();\n    }\n}\n</code></pre>\n"},{"tags":["java","class","oop","constructor"],"comments":[{"owner":{"account_id":19737131,"reputation":1,"user_id":14451359,"display_name":"sleepyshaman"},"score":0,"creation_date":1602702870,"post_id":64360069,"comment_id":113807567,"body_markdown":"Course c = new Course() // The constructor Course() is undefined","body":"Course c = new Course() // The constructor Course() is undefined"},{"owner":{"account_id":1394089,"reputation":40460,"user_id":1424875,"accept_rate":86,"display_name":"nanofarad"},"score":2,"creation_date":1602702950,"post_id":64360069,"comment_id":113807594,"body_markdown":"You defined a constructor that takes a course code, day, student count, capacity, and average grade as parameters. Just like with any method call, you now need to pass some values to the constructor to match the signature you defined.","body":"You defined a constructor that takes a course code, day, student count, capacity, and average grade as parameters. Just like with any method call, you now need to pass some values to the constructor to match the signature you defined."},{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":2,"creation_date":1602702963,"post_id":64360069,"comment_id":113807597,"body_markdown":"Java only generates a default constructor for you if you don&#39;t define any others. See: https://softwareengineering.stackexchange.com/questions/257938/why-is-there-no-default-constructor-generated-if-you-define-an-explicit-construc","body":"Java only generates a default constructor for you if you don&#39;t define any others. See: <a href=\"https://softwareengineering.stackexchange.com/questions/257938/why-is-there-no-default-constructor-generated-if-you-define-an-explicit-construc\" title=\"why is there no default constructor generated if you define an explicit construc\">softwareengineering.stackexchange.com/questions/257938/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1602703095,"creation_date":1602703095,"answer_id":64360150,"question_id":64360069,"body_markdown":"Now that you&#39;ve defined a constructor, you need to call it with all the arguments it specifies.\r\n\r\n    Course c = new Course(\r\n      &quot;CMSC-101&quot;,\r\n      &quot;Wednesday&quot;,\r\n      /* student count */ 20,\r\n      /* capacity */ 25,\r\n      /* average grade */ 4.0);","title":"Hello, in Java, i was a bit confused about the calling constructors into objects in main method. Here below is the example of it","body":"<p>Now that you've defined a constructor, you need to call it with all the arguments it specifies.</p>\n<pre><code>Course c = new Course(\n  &quot;CMSC-101&quot;,\n  &quot;Wednesday&quot;,\n  /* student count */ 20,\n  /* capacity */ 25,\n  /* average grade */ 4.0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1625750,"reputation":5627,"user_id":1501345,"accept_rate":60,"display_name":"Amit Kumar Lal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602703407,"creation_date":1602703257,"answer_id":64360180,"question_id":64360069,"body_markdown":"    Course c = new Course();\r\nby writing above line in main method you&#39;re invoking a default constructor i.e. no params passed as an argument, in this case the fields are initialized of there default values.\r\n\r\nwhereas in your code\r\n\r\n    public Course(String CourseCode, String day, int StudentCount, int Capacity, double averageGrade){\r\n    this.CourseCode=CourseCode;\r\n    \r\n    this.day = day;\r\n    \r\n    this.StudentCount =StudentCount;\r\n    \r\n    this.Capacity = Capacity;\r\n    \r\n    this.averageGrade =averageGrade; \r\n    }\r\n\r\nis a Parametrized contsructor i.e. your passing some values (Parameter) and your setting some state of your variables using that.\r\n\r\nin main method encounter compilation issues because it won&#39;t find a default constructor on your class\r\n\r\n**solution** \r\n\r\neither pass Param like\r\n\r\n    Course c = Course(&quot;ABC&quot;, &quot;Monday&quot;, 23, 40, 2.30);\r\n\r\nor create a default constructor (Both the constructors can exist in your class)\r\n","title":"Hello, in Java, i was a bit confused about the calling constructors into objects in main method. Here below is the example of it","body":"<pre><code>Course c = new Course();\n</code></pre>\n<p>by writing above line in main method you're invoking a default constructor i.e. no params passed as an argument, in this case the fields are initialized of there default values.</p>\n<p>whereas in your code</p>\n<pre><code>public Course(String CourseCode, String day, int StudentCount, int Capacity, double averageGrade){\nthis.CourseCode=CourseCode;\n\nthis.day = day;\n\nthis.StudentCount =StudentCount;\n\nthis.Capacity = Capacity;\n\nthis.averageGrade =averageGrade; \n}\n</code></pre>\n<p>is a Parametrized contsructor i.e. your passing some values (Parameter) and your setting some state of your variables using that.</p>\n<p>in main method encounter compilation issues because it won't find a default constructor on your class</p>\n<p><strong>solution</strong></p>\n<p>either pass Param like</p>\n<pre><code>Course c = Course(&quot;ABC&quot;, &quot;Monday&quot;, 23, 40, 2.30);\n</code></pre>\n<p>or create a default constructor (Both the constructors can exist in your class)</p>\n"},{"tags":[],"owner":{"account_id":6234997,"reputation":317,"user_id":4850588,"display_name":"developer-vivekjain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648060181,"creation_date":1602703460,"answer_id":64360224,"question_id":64360069,"body_markdown":"Because you are creating Parameterized constructor and it&#39;s replacing default constructor of your class, and while you are creating object you are not passing any argument.\r\n\r\nThere are two way to solve this problem.\r\n\r\n1. Create one non parameterized constructor in your class along with your parameterized constructor.\r\n\r\n```java\r\n    public Course{\r\n        public Course(){}\r\n    }\r\n```\r\n2. While creating object pass argument within constructor.\r\n```java\r\n    public Course{\r\n       Course c = new Course(&quot;CourseCode&quot;, &quot;Monday&quot;, 10, 100, 90.5);\r\n    }\r\n```\r\n    ","title":"Hello, in Java, i was a bit confused about the calling constructors into objects in main method. Here below is the example of it","body":"<p>Because you are creating Parameterized constructor and it's replacing default constructor of your class, and while you are creating object you are not passing any argument.</p>\n<p>There are two way to solve this problem.</p>\n<ol>\n<li>Create one non parameterized constructor in your class along with your parameterized constructor.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    public Course{\n        public Course(){}\n    }\n</code></pre>\n<ol start=\"2\">\n<li>While creating object pass argument within constructor.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    public Course{\n       Course c = new Course(&quot;CourseCode&quot;, &quot;Monday&quot;, 10, 100, 90.5);\n    }\n</code></pre>\n"}],"owner":{"account_id":19737131,"reputation":1,"user_id":14451359,"display_name":"sleepyshaman"},"comment_count":3,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1602703386,"answer_count":3,"score":-4,"last_activity_date":1648060181,"creation_date":1602702796,"question_id":64360069,"body_markdown":"When i am trying to create an Course object in main method, eclipse says that &quot;The constructor Course() is undefined&quot; i dont know why it occurs.\r\n\r\nHere is my Course class and its constructions;\r\n\r\n```\r\npublic class Course{\r\n\t\r\nprivate String CourseCode;\r\n\r\nprivate String day;\r\n\r\nprivate int StudentCount;\r\n\r\nprivate int Capacity;\r\n\r\nprivate double averageGrade;\r\n\r\n\r\npublic Course(String CourseCode, String day, int StudentCount, int Capacity, double averageGrade){\r\nthis.CourseCode=CourseCode;\r\n\r\nthis.day = day;\r\n\r\nthis.StudentCount =StudentCount;\r\n\r\nthis.Capacity = Capacity;\r\n\r\nthis.averageGrade =averageGrade; \r\n}\r\n```\r\n\r\nAnd the main method that trying to create an object called Course;\r\n\r\n```\r\nCourse c = new Course();\r\n```\r\n\r\n\r\n","title":"Hello, in Java, i was a bit confused about the calling constructors into objects in main method. Here below is the example of it","body":"<p>When i am trying to create an Course object in main method, eclipse says that &quot;The constructor Course() is undefined&quot; i dont know why it occurs.</p>\n<p>Here is my Course class and its constructions;</p>\n<pre><code>public class Course{\n    \nprivate String CourseCode;\n\nprivate String day;\n\nprivate int StudentCount;\n\nprivate int Capacity;\n\nprivate double averageGrade;\n\n\npublic Course(String CourseCode, String day, int StudentCount, int Capacity, double averageGrade){\nthis.CourseCode=CourseCode;\n\nthis.day = day;\n\nthis.StudentCount =StudentCount;\n\nthis.Capacity = Capacity;\n\nthis.averageGrade =averageGrade; \n}\n</code></pre>\n<p>And the main method that trying to create an object called Course;</p>\n<pre><code>Course c = new Course();\n</code></pre>\n"},{"tags":["java","spring-boot","docker"],"comments":[{"owner":{"account_id":11434115,"reputation":2221,"user_id":8382028,"display_name":"ViaTech"},"score":0,"creation_date":1648059407,"post_id":71591947,"comment_id":126531068,"body_markdown":"I&#39;m sorry I&#39;m not completely familiar with how spring-boot works, but you do copy dependencies into your image...one solution I have used on a server is to map local directories as volumes and more or less used Git to hold the code docker runs from. In my situation it removed quite a bit of size and allowed me to host the docker image publicly without worry of code being looked at","body":"I&#39;m sorry I&#39;m not completely familiar with how spring-boot works, but you do copy dependencies into your image...one solution I have used on a server is to map local directories as volumes and more or less used Git to hold the code docker runs from. In my situation it removed quite a bit of size and allowed me to host the docker image publicly without worry of code being looked at"}],"answers":[{"tags":[],"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648059037,"creation_date":1648059037,"answer_id":71592058,"question_id":71591947,"body_markdown":"One simple solution could be to use the 11-jre image for runtime (`eclipse-temurin:11-jre`). This would save around 100 MB. Everything else seems to be related to your application (given that the `11` image is around 220 MB in size).","title":"How to reduce docker image size for java apps without alpine?","body":"<p>One simple solution could be to use the 11-jre image for runtime (<code>eclipse-temurin:11-jre</code>). This would save around 100 MB. Everything else seems to be related to your application (given that the <code>11</code> image is around 220 MB in size).</p>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":835,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1648060098,"creation_date":1648058409,"question_id":71591947,"body_markdown":"I have an image build upon a `eclipse-temurin:11`, which runs fine, but results in &gt;600mb for a simple `spring-boot` hello world webapp.\r\n\r\nQuestion: is my dockerfile wrong, or how could I reduce image size, **without** having to switch on an alpine/musslibc?\r\n\r\n    # syntax=docker/dockerfile:1\r\n    FROM maven:3.8.4-eclipse-temurin-11 as build\r\n    WORKDIR application\r\n    \r\n    COPY pom.xml .\r\n    RUN mvn dependency:go-offline\r\n    \r\n    COPY src src\r\n    RUN mvn package\r\n    \r\n    RUN cp /application/target/*.jar application.jar\r\n    RUN java -Djarmode=layertools -jar application.jar extract\r\n    \r\n    FROM eclipse-temurin:11\r\n    WORKDIR application\r\n    COPY --from=build application/dependencies/ ./\r\n    COPY --from=build application/spring-boot-loader/ ./\r\n    COPY --from=build application/snapshot-dependencies/ ./\r\n    COPY --from=build application/application/ ./\r\n    \r\n    ENTRYPOINT [&quot;java&quot;, &quot;org.springframework.boot.loader.JarLauncher&quot;]\r\n\r\nMaybe anybody sees a problem regarding the image layer sizes?\r\n\r\n    ~$ docker history myimage:latest \r\n    IMAGE          CREATED             CREATED BY                                      SIZE      COMMENT\r\n    e628830c54bf   About an hour ago   /bin/sh -c #(nop)  ENTRYPOINT [&quot;java&quot; &quot;org.s…   0B        \r\n    87d052d04e27   About an hour ago   /bin/sh -c #(nop) COPY dir:5d09192487cc563d9…   13.8kB    \r\n    8c34a91b2cfb   About an hour ago   /bin/sh -c #(nop) COPY dir:8b993266a653e9e77…   0B        \r\n    d4e71b50b4da   About an hour ago   /bin/sh -c #(nop) COPY dir:8b86bf42f46c065b7…   252kB     \r\n    fbc788f64a4a   About an hour ago   /bin/sh -c #(nop) COPY dir:961713675a0647292…   26.4MB    \r\n    fa2564232f74   2 hours ago         /bin/sh -c #(nop) WORKDIR /application          0B        \r\n    3dbb3240fc1f   4 days ago          /bin/sh -c #(nop)  CMD [&quot;jshell&quot;]               0B        \r\n    &lt;missing&gt;      4 days ago          /bin/sh -c echo Verifying install ...     &amp;&amp;…   0B        \r\n    &lt;missing&gt;      4 days ago          /bin/sh -c #(nop)  ENV JAVA_HOME=/opt/java/o…   0B        \r\n    &lt;missing&gt;      4 days ago          /bin/sh -c set -eux;     ARCH=&quot;$(dpkg --prin…   322MB     \r\n    &lt;missing&gt;      4 days ago          /bin/sh -c #(nop)  ENV JAVA_VERSION=jdk-11.0…   0B        \r\n    &lt;missing&gt;      4 days ago          /bin/sh -c apt-get update     &amp;&amp; DEBIAN_FRON…   43.2MB    \r\n    &lt;missing&gt;      4 days ago          /bin/sh -c #(nop)  ENV LANG=en_US.UTF-8 LANG…   0B        \r\n    &lt;missing&gt;      5 days ago          /bin/sh -c #(nop)  CMD [&quot;bash&quot;]                 0B        \r\n    &lt;missing&gt;      5 days ago          /bin/sh -c #(nop) ADD file:1d3b09cf9e041d608…   72.8MB    \r\n\r\nThe problem seems to be the layer with 322mb, where the full `jdk` is downloaded into the container:\r\n\r\n&gt; &lt;missing&gt;                                                             \r\n&gt; 4 days ago          /bin/sh -c set -eux;     ARCH=&quot;$(dpkg\r\n&gt; --print-architecture)&quot;;     case &quot;${ARCH}&quot; in        aarch64|arm64)          ESUM=&#39;79572f5172c6a040591d34632f98a20ed148702bbce2f57649e8ac01c0d2e3db&#39;;\r\n&gt; BINARY_URL=&#39;https://github.com/adoptium/temurin11-binaries/releases/download/jdk-11.0.14.1%2B1/OpenJDK11U-jdk_aarch64_linux_hotspot_11.0.14.1_1.tar.gz&#39;;          ;;        armhf|arm)         \r\n&gt; ESUM=&#39;f4d53a1753cdde830d7872c6a1279df441f3f9aeb5d5037a568b3a392ebce9c2&#39;;\r\n&gt; BINARY_URL=&#39;https://github.com/adoptium/temurin11-binaries/releases/download/jdk-11.0.14.1%2B1/OpenJDK11U-jdk_arm_linux_hotspot_11.0.14.1_1.tar.gz&#39;;\r\n&gt; ;;        ppc64el|powerpc:common64)         \r\n&gt; ESUM=&#39;9750e11721282a9afd18a07743f19c699b2b71ce20d02f3f0a906088b9ae6d9a&#39;;\r\n&gt; BINARY_URL=&#39;https://github.com/adoptium/temurin11-binaries/releases/download/jdk-11.0.14.1%2B1/OpenJDK11U-jdk_ppc64le_linux_hotspot_11.0.14.1_1.tar.gz&#39;;          ;;        s390x|s390:64-bit)         \r\n&gt; ESUM=&#39;79a27a4dc23dff38a5c21e5ba9b7efcf0aa5e14ace1a3b19bec53e255c487521&#39;;\r\n&gt; BINARY_URL=&#39;https://github.com/adoptium/temurin11-binaries/releases/download/jdk-11.0.14.1%2B1/OpenJDK11U-jdk_s390x_linux_hotspot_11.0.14.1_1.tar.gz&#39;;          ;;        amd64|i386:x86-64)         \r\n&gt; ESUM=&#39;43fb84f8063ad9bf6b6d694a67b8f64c8827552b920ec5ce794dfe5602edffe7&#39;;\r\n&gt; BINARY_URL=&#39;https://github.com/adoptium/temurin11-binaries/releases/download/jdk-11.0.14.1%2B1/OpenJDK11U-jdk_x64_linux_hotspot_11.0.14.1_1.tar.gz&#39;;\r\n&gt; ;;        *)          echo &quot;Unsupported arch: ${ARCH}&quot;;          exit\r\n&gt; 1;          ;;     esac;     curl -LfsSo /tmp/openjdk.tar.gz\r\n&gt; ${BINARY_URL};     echo &quot;${ESUM} */tmp/openjdk.tar.gz&quot; | sha256sum -c\r\n&gt; -;     mkdir -p /opt/java/openjdk;     cd /opt/java/openjdk;     tar -xf /tmp/openjdk.tar.gz --strip-components=1;     rm -rf /tmp/openjdk.tar.gz;   322MB\r\n\r\nHow could I reduce the java layer here?","title":"How to reduce docker image size for java apps without alpine?","body":"<p>I have an image build upon a <code>eclipse-temurin:11</code>, which runs fine, but results in &gt;600mb for a simple <code>spring-boot</code> hello world webapp.</p>\n<p>Question: is my dockerfile wrong, or how could I reduce image size, <strong>without</strong> having to switch on an alpine/musslibc?</p>\n<pre><code># syntax=docker/dockerfile:1\nFROM maven:3.8.4-eclipse-temurin-11 as build\nWORKDIR application\n\nCOPY pom.xml .\nRUN mvn dependency:go-offline\n\nCOPY src src\nRUN mvn package\n\nRUN cp /application/target/*.jar application.jar\nRUN java -Djarmode=layertools -jar application.jar extract\n\nFROM eclipse-temurin:11\nWORKDIR application\nCOPY --from=build application/dependencies/ ./\nCOPY --from=build application/spring-boot-loader/ ./\nCOPY --from=build application/snapshot-dependencies/ ./\nCOPY --from=build application/application/ ./\n\nENTRYPOINT [&quot;java&quot;, &quot;org.springframework.boot.loader.JarLauncher&quot;]\n</code></pre>\n<p>Maybe anybody sees a problem regarding the image layer sizes?</p>\n<pre><code>~$ docker history myimage:latest \nIMAGE          CREATED             CREATED BY                                      SIZE      COMMENT\ne628830c54bf   About an hour ago   /bin/sh -c #(nop)  ENTRYPOINT [&quot;java&quot; &quot;org.s…   0B        \n87d052d04e27   About an hour ago   /bin/sh -c #(nop) COPY dir:5d09192487cc563d9…   13.8kB    \n8c34a91b2cfb   About an hour ago   /bin/sh -c #(nop) COPY dir:8b993266a653e9e77…   0B        \nd4e71b50b4da   About an hour ago   /bin/sh -c #(nop) COPY dir:8b86bf42f46c065b7…   252kB     \nfbc788f64a4a   About an hour ago   /bin/sh -c #(nop) COPY dir:961713675a0647292…   26.4MB    \nfa2564232f74   2 hours ago         /bin/sh -c #(nop) WORKDIR /application          0B        \n3dbb3240fc1f   4 days ago          /bin/sh -c #(nop)  CMD [&quot;jshell&quot;]               0B        \n&lt;missing&gt;      4 days ago          /bin/sh -c echo Verifying install ...     &amp;&amp;…   0B        \n&lt;missing&gt;      4 days ago          /bin/sh -c #(nop)  ENV JAVA_HOME=/opt/java/o…   0B        \n&lt;missing&gt;      4 days ago          /bin/sh -c set -eux;     ARCH=&quot;$(dpkg --prin…   322MB     \n&lt;missing&gt;      4 days ago          /bin/sh -c #(nop)  ENV JAVA_VERSION=jdk-11.0…   0B        \n&lt;missing&gt;      4 days ago          /bin/sh -c apt-get update     &amp;&amp; DEBIAN_FRON…   43.2MB    \n&lt;missing&gt;      4 days ago          /bin/sh -c #(nop)  ENV LANG=en_US.UTF-8 LANG…   0B        \n&lt;missing&gt;      5 days ago          /bin/sh -c #(nop)  CMD [&quot;bash&quot;]                 0B        \n&lt;missing&gt;      5 days ago          /bin/sh -c #(nop) ADD file:1d3b09cf9e041d608…   72.8MB    \n</code></pre>\n<p>The problem seems to be the layer with 322mb, where the full <code>jdk</code> is downloaded into the container:</p>\n<blockquote>\n                                                             \n4 days ago          /bin/sh -c set -eux;     ARCH=\"$(dpkg\n--print-architecture)\";     case \"${ARCH}\" in        aarch64|arm64)          ESUM='79572f5172c6a040591d34632f98a20ed148702bbce2f57649e8ac01c0d2e3db';\nBINARY_URL='https://github.com/adoptium/temurin11-binaries/releases/download/jdk-11.0.14.1%2B1/OpenJDK11U-jdk_aarch64_linux_hotspot_11.0.14.1_1.tar.gz';          ;;        armhf|arm)         \nESUM='f4d53a1753cdde830d7872c6a1279df441f3f9aeb5d5037a568b3a392ebce9c2';\nBINARY_URL='https://github.com/adoptium/temurin11-binaries/releases/download/jdk-11.0.14.1%2B1/OpenJDK11U-jdk_arm_linux_hotspot_11.0.14.1_1.tar.gz';\n;;        ppc64el|powerpc:common64)         \nESUM='9750e11721282a9afd18a07743f19c699b2b71ce20d02f3f0a906088b9ae6d9a';\nBINARY_URL='https://github.com/adoptium/temurin11-binaries/releases/download/jdk-11.0.14.1%2B1/OpenJDK11U-jdk_ppc64le_linux_hotspot_11.0.14.1_1.tar.gz';          ;;        s390x|s390:64-bit)         \nESUM='79a27a4dc23dff38a5c21e5ba9b7efcf0aa5e14ace1a3b19bec53e255c487521';\nBINARY_URL='https://github.com/adoptium/temurin11-binaries/releases/download/jdk-11.0.14.1%2B1/OpenJDK11U-jdk_s390x_linux_hotspot_11.0.14.1_1.tar.gz';          ;;        amd64|i386:x86-64)         \nESUM='43fb84f8063ad9bf6b6d694a67b8f64c8827552b920ec5ce794dfe5602edffe7';\nBINARY_URL='https://github.com/adoptium/temurin11-binaries/releases/download/jdk-11.0.14.1%2B1/OpenJDK11U-jdk_x64_linux_hotspot_11.0.14.1_1.tar.gz';\n;;        *)          echo \"Unsupported arch: ${ARCH}\";          exit\n1;          ;;     esac;     curl -LfsSo /tmp/openjdk.tar.gz\n${BINARY_URL};     echo \"${ESUM} */tmp/openjdk.tar.gz\" | sha256sum -c\n-;     mkdir -p /opt/java/openjdk;     cd /opt/java/openjdk;     tar -xf /tmp/openjdk.tar.gz --strip-components=1;     rm -rf /tmp/openjdk.tar.gz;   322MB\n</blockquote>\n<p>How could I reduce the java layer here?</p>\n"},{"tags":["java","class","reflection","dynamic","load"],"answers":[{"tags":[],"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"down_vote_count":0,"up_vote_count":110,"is_accepted":true,"score":110,"last_activity_date":1546343784,"creation_date":1307045736,"answer_id":6219855,"question_id":6219829,"body_markdown":"I believe it&#39;s a `ClassLoader` you&#39;re after.\r\n\r\nI suggest you start by looking at the example below which loads class files that are not on the class path.\r\n\r\n    // Create a File object on the root of the directory containing the class file\r\n    File file = new File(&quot;c:\\\\myclasses\\\\&quot;);\r\n    \r\n    try {\r\n        // Convert File to a URL\r\n        URL url = file.toURI().toURL();          // file:/c:/myclasses/\r\n        URL[] urls = new URL[]{url};\r\n    \r\n        // Create a new class loader with the directory\r\n        ClassLoader cl = new URLClassLoader(urls);\r\n    \r\n        // Load in the class; MyClass.class should be located in\r\n        // the directory file:/c:/myclasses/com/mycompany\r\n        Class cls = cl.loadClass(&quot;com.mycompany.MyClass&quot;);\r\n    } catch (MalformedURLException e) {\r\n    } catch (ClassNotFoundException e) {\r\n    }\r\n\r\n","title":"Method to dynamically load java class files","body":"<p>I believe it's a <code>ClassLoader</code> you're after.</p>\n\n<p>I suggest you start by looking at the example below which loads class files that are not on the class path.</p>\n\n<pre><code>// Create a File object on the root of the directory containing the class file\nFile file = new File(\"c:\\\\myclasses\\\\\");\n\ntry {\n    // Convert File to a URL\n    URL url = file.toURI().toURL();          // file:/c:/myclasses/\n    URL[] urls = new URL[]{url};\n\n    // Create a new class loader with the directory\n    ClassLoader cl = new URLClassLoader(urls);\n\n    // Load in the class; MyClass.class should be located in\n    // the directory file:/c:/myclasses/com/mycompany\n    Class cls = cl.loadClass(\"com.mycompany.MyClass\");\n} catch (MalformedURLException e) {\n} catch (ClassNotFoundException e) {\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":3,"up_vote_count":5,"is_accepted":false,"score":2,"last_activity_date":1307046245,"creation_date":1307046245,"answer_id":6219945,"question_id":6219829,"body_markdown":"If you add a directory to your class path, you can add classes after the application starts and those classes can be loaded as soon as they have been written to the directory.","title":"Method to dynamically load java class files","body":"<p>If you add a directory to your class path, you can add classes after the application starts and those classes can be loaded as soon as they have been written to the directory.</p>\n"},{"tags":[],"owner":{"account_id":1387308,"reputation":733,"user_id":1319039,"display_name":"d2k2"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1648060044,"creation_date":1333932547,"answer_id":10067805,"question_id":6219829,"body_markdown":"    Class myclass = ClassLoader.getSystemClassLoader().loadClass(&quot;package.MyClass&quot;);\r\n\r\nor\r\n\r\n    Class myclass  = Class.forName(&quot;package.MyClass&quot;);\r\nor loading the class from different folder which is not in the classpath:\r\n\r\n    File f = new File(&quot;C:/dir&quot;);\r\n    URL[] cp = {f.toURI().toURL()};\r\n    URLClassLoader urlcl = new URLClassLoader(cp);\r\n    Class myclass  = urlcl.loadClass(&quot;package.MyClass&quot;);\r\n\r\nFor further usage of the loaded Class you can use Reflection if the loaded Class is not in your classpath and you can not import and cast it. For example if you want to call a **static** method with the name &quot;main&quot;:\r\n\r\n    Method m = myclass.getMethod(&quot;main&quot;, String[].class);\r\n    String[] args = new String[0];\r\n    m.invoke(null, args);  // invoke the method","title":"Method to dynamically load java class files","body":"<pre><code>Class myclass = ClassLoader.getSystemClassLoader().loadClass(&quot;package.MyClass&quot;);\n</code></pre>\n<p>or</p>\n<pre><code>Class myclass  = Class.forName(&quot;package.MyClass&quot;);\n</code></pre>\n<p>or loading the class from different folder which is not in the classpath:</p>\n<pre><code>File f = new File(&quot;C:/dir&quot;);\nURL[] cp = {f.toURI().toURL()};\nURLClassLoader urlcl = new URLClassLoader(cp);\nClass myclass  = urlcl.loadClass(&quot;package.MyClass&quot;);\n</code></pre>\n<p>For further usage of the loaded Class you can use Reflection if the loaded Class is not in your classpath and you can not import and cast it. For example if you want to call a <strong>static</strong> method with the name &quot;main&quot;:</p>\n<pre><code>Method m = myclass.getMethod(&quot;main&quot;, String[].class);\nString[] args = new String[0];\nm.invoke(null, args);  // invoke the method\n</code></pre>\n"}],"owner":{"account_id":403740,"reputation":12504,"user_id":771665,"accept_rate":84,"display_name":"MirroredFate"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85423,"favorite_count":0,"down_vote_count":0,"up_vote_count":56,"accepted_answer_id":6219855,"answer_count":3,"score":56,"last_activity_date":1648060044,"creation_date":1307045595,"question_id":6219829,"body_markdown":"What would be a good way to dynamically load java class files so that a program compiled into a jar can read all the class files in a directory and use them, and how can one write the files so that they have the necessary package name in relation to the jar?","title":"Method to dynamically load java class files","body":"<p>What would be a good way to dynamically load java class files so that a program compiled into a jar can read all the class files in a directory and use them, and how can one write the files so that they have the necessary package name in relation to the jar?</p>\n"},{"tags":["java","spring-boot","unit-testing","mockito"],"owner":{"account_id":9987860,"reputation":167,"user_id":7388363,"display_name":"elvintaghizade14"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1648059898,"creation_date":1648059501,"question_id":71592154,"body_markdown":"## Hi. I have a service and a util classes as follows:\r\n\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    public class DeviceService {\r\n        private final DeviceUtil deviceUtil;\r\n    \r\n        public String getAllDevicesDeviceType(DeviceType deviceType){\r\n            final String appIdByDeviceType = deviceUtil.getAppIdByDeviceType(deviceType);\r\n            // ... actually I return smth different, but for simplicity just returning appIdByDeviceType \r\n            return appIdByDeviceType;\r\n        }\r\n    }\r\n\r\n    @Component\r\n    public class DeviceUtil {\r\n        private final String androidAppId;\r\n    \r\n        public DeviceUtil(ApplicationProperties applicationProperties) {\r\n            ApplicationProperties.DeviceClient client = applicationProperties.getDeviceClient();\r\n            androidAppId = client.getAndroidAppId();\r\n        }\r\n    \r\n        public String getAppIdByDeviceType(DeviceType deviceType) {\r\n            if (deviceType == DeviceType.ANDROID) return androidAppId;\r\n            throw InvalidInputException.of(ErrorCode.PARAMETER_INVALID, ErrorMessage.DEVICE_TYPE_INVALID);\r\n        }\r\n    \r\n    }\r\n\r\nIn &lt;code&gt;ApplicationProperties&lt;/code&gt; class I am getting static data from &lt;code&gt;application.yml&lt;/code&gt; file. While running project, all are ok. But when I wrote a test for &lt;code&gt;DeviceUtil&lt;/code&gt; class as follows:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class DeviceUtilTest {\r\n    \r\n        @Spy\r\n        private ApplicationProperties applicationProperties;\r\n    \r\n        @InjectMocks\r\n        private DeviceUtil deviceUtil;\r\n    \r\n    \r\n        @Test\r\n        void getAppIdByDeviceType_Should_ReturnSuccess() {\r\n            String actualResult = deviceUtil.getAppIdByDeviceType(DeviceType.ANDROID);\r\n            assertNotNull(actualResult);\r\n            // assertThat(actualResult).isEqualTo(APP_ID);\r\n        }\r\n    }\r\n\r\nTest failed with foloowing description:\r\n\r\n    expected: not null\r\n    org.opentest4j.AssertionFailedError: expected: not &lt;null&gt;\r\n\r\nHow can I solve the issue? Thanks in advance.","title":"AssertionFailedError while Testing Component with Configuration via Properties","body":"<h2>Hi. I have a service and a util classes as follows:</h2>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class DeviceService {\n    private final DeviceUtil deviceUtil;\n\n    public String getAllDevicesDeviceType(DeviceType deviceType){\n        final String appIdByDeviceType = deviceUtil.getAppIdByDeviceType(deviceType);\n        // ... actually I return smth different, but for simplicity just returning appIdByDeviceType \n        return appIdByDeviceType;\n    }\n}\n\n@Component\npublic class DeviceUtil {\n    private final String androidAppId;\n\n    public DeviceUtil(ApplicationProperties applicationProperties) {\n        ApplicationProperties.DeviceClient client = applicationProperties.getDeviceClient();\n        androidAppId = client.getAndroidAppId();\n    }\n\n    public String getAppIdByDeviceType(DeviceType deviceType) {\n        if (deviceType == DeviceType.ANDROID) return androidAppId;\n        throw InvalidInputException.of(ErrorCode.PARAMETER_INVALID, ErrorMessage.DEVICE_TYPE_INVALID);\n    }\n\n}\n</code></pre>\n<p>In <code>ApplicationProperties</code> class I am getting static data from <code>application.yml</code> file. While running project, all are ok. But when I wrote a test for <code>DeviceUtil</code> class as follows:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass DeviceUtilTest {\n\n    @Spy\n    private ApplicationProperties applicationProperties;\n\n    @InjectMocks\n    private DeviceUtil deviceUtil;\n\n\n    @Test\n    void getAppIdByDeviceType_Should_ReturnSuccess() {\n        String actualResult = deviceUtil.getAppIdByDeviceType(DeviceType.ANDROID);\n        assertNotNull(actualResult);\n        // assertThat(actualResult).isEqualTo(APP_ID);\n    }\n}\n</code></pre>\n<p>Test failed with foloowing description:</p>\n<pre><code>expected: not null\norg.opentest4j.AssertionFailedError: expected: not &lt;null&gt;\n</code></pre>\n<p>How can I solve the issue? Thanks in advance.</p>\n"},{"tags":["java"],"comments":[{"owner":{"display_name":"user17034852"},"score":0,"creation_date":1648058406,"post_id":71591903,"comment_id":126530682,"body_markdown":"Do you want the new printed counter to replace the text of the previous one? So after 5 loops, the console will just show 4 instead of 01234?","body":"Do you want the new printed counter to replace the text of the previous one? So after 5 loops, the console will just show 4 instead of 01234?"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1648058410,"post_id":71591903,"comment_id":126530685,"body_markdown":"You can use a console library that suports curses-like functionality, or print backspaces over the previous contents manually.","body":"You can use a console library that suports curses-like functionality, or print backspaces over the previous contents manually."},{"owner":{"account_id":17801740,"reputation":5,"user_id":12928347,"display_name":"Ahmed Redwan"},"score":0,"creation_date":1648058620,"post_id":71591903,"comment_id":126530756,"body_markdown":"That is exactly what i want, sorry that the output is not being shown because i&#39;m new in stack overflow     \n@coopikoop","body":"That is exactly what i want, sorry that the output is not being shown because i&#39;m new in stack overflow      @coopikoop"},{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":0,"creation_date":1648058717,"post_id":71591903,"comment_id":126530794,"body_markdown":"Does this answer your question? [Write to same location in a console window with java](https://stackoverflow.com/questions/5859588/write-to-same-location-in-a-console-window-with-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/5859588/write-to-same-location-in-a-console-window-with-java\">Write to same location in a console window with java</a>"},{"owner":{"account_id":8666367,"reputation":9194,"user_id":6486738,"accept_rate":100,"display_name":"Ted Klein Bergman"},"score":0,"creation_date":1648058864,"post_id":71591903,"comment_id":126530873,"body_markdown":"@AhmedRedwan Don&#39;t post expected output in images. Post it as formatted text.","body":"@AhmedRedwan Don&#39;t post expected output in images. Post it as formatted text."},{"owner":{"account_id":17801740,"reputation":5,"user_id":12928347,"display_name":"Ahmed Redwan"},"score":0,"creation_date":1648059075,"post_id":71591903,"comment_id":126530954,"body_markdown":"@TedKleinBergman       done","body":"@TedKleinBergman       done"}],"answers":[{"tags":[],"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648059113,"creation_date":1648059113,"answer_id":71592071,"question_id":71591903,"body_markdown":"You can achieve that by replacing your \r\n\r\n    System.out.print(counter );\r\n\r\nBy\r\n\r\n    System.out.printf(&quot;%s&quot;, &quot;\\u0008\\u0008\\u0008\\u0008&quot; + counter );\r\n\r\n**\\u0008** is Backspace.","title":"How can i print on the same line in java?","body":"<p>You can achieve that by replacing your</p>\n<pre><code>System.out.print(counter );\n</code></pre>\n<p>By</p>\n<pre><code>System.out.printf(&quot;%s&quot;, &quot;\\u0008\\u0008\\u0008\\u0008&quot; + counter );\n</code></pre>\n<p><strong>\\u0008</strong> is Backspace.</p>\n"}],"owner":{"account_id":17801740,"reputation":5,"user_id":12928347,"display_name":"Ahmed Redwan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1648059546,"creation_date":1648058178,"question_id":71591903,"body_markdown":"I&#39;m using threads in java to print a counter and increase it every one second. I want the counter to be printed on the previous counter value, but what is actually happening is that the counter is being printed in a new place. How can I do that?\r\n\r\nHere is the code and the output in Netbeans:\r\n```\r\npackage threads;\r\n\r\npublic class Threads extends Thread {\r\n\r\n    public static int counter = 0;\r\n    \r\n    static synchronized void incrementCounter() {\r\n          System.out.print(counter );\r\n          counter++;\r\n     }\r\n\r\n     @Override\r\n     public void run() {\r\n          while(counter&lt;1000){\r\n               incrementCounter();              \r\n              try {\r\n                  sleep(1000);\r\n              } catch (InterruptedException ex) {\r\n\r\n              }\r\n          }\r\n     }\r\n\r\n     public static void main(String[] args) {\r\n          Threads te = new Threads();         \r\n          te.start();\r\n     } \r\n}\r\n```\r\nThis is the output:\r\n\r\n    012345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061...","title":"How can i print on the same line in java?","body":"<p>I'm using threads in java to print a counter and increase it every one second. I want the counter to be printed on the previous counter value, but what is actually happening is that the counter is being printed in a new place. How can I do that?</p>\n<p>Here is the code and the output in Netbeans:</p>\n<pre><code>package threads;\n\npublic class Threads extends Thread {\n\n    public static int counter = 0;\n    \n    static synchronized void incrementCounter() {\n          System.out.print(counter );\n          counter++;\n     }\n\n     @Override\n     public void run() {\n          while(counter&lt;1000){\n               incrementCounter();              \n              try {\n                  sleep(1000);\n              } catch (InterruptedException ex) {\n\n              }\n          }\n     }\n\n     public static void main(String[] args) {\n          Threads te = new Threads();         \n          te.start();\n     } \n}\n</code></pre>\n<p>This is the output:</p>\n<pre><code>012345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061...\n</code></pre>\n"},{"tags":["java","spring","libraries"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1648054187,"post_id":71590792,"comment_id":126529057,"body_markdown":"I wonder if [*MapStruct*](https://mapstruct.org/) library might help you? (I’ve not used it)","body":"I wonder if <a href=\"https://mapstruct.org/\" rel=\"nofollow noreferrer\"><i>MapStruct</i></a> library might help you? (I’ve not used it)"}],"answers":[{"tags":[],"owner":{"account_id":6186964,"reputation":7558,"user_id":6245827,"display_name":"oowekyala"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1648054042,"creation_date":1648054042,"answer_id":71591006,"question_id":71590792,"body_markdown":"Here&#39;s a solution that uses lambdas to reify the setters:\r\n\r\n```\r\nMap&lt;String, Object&gt; updateRequest = //provided\r\nMyObject obj = //provided\r\n\r\nMap&lt;String, BiConsumer&lt;MyObject, Object&gt;&gt; keyToSetter =\r\n  Map.of(\r\n    &quot;numberOfItems&quot;, (o, v) -&gt; o.setQuantity((Integer) v)\r\n    // ...\r\n  );\r\n\r\nupdateRequest.forEach((k, v) -&gt; keyToSetter.get(k).accept(obj, v));\r\n\r\n\r\n","title":"Get from map, set in object using setter, but for too many fields?","body":"<p>Here's a solution that uses lambdas to reify the setters:</p>\n<pre><code>Map&lt;String, Object&gt; updateRequest = //provided\nMyObject obj = //provided\n\nMap&lt;String, BiConsumer&lt;MyObject, Object&gt;&gt; keyToSetter =\n  Map.of(\n    &quot;numberOfItems&quot;, (o, v) -&gt; o.setQuantity((Integer) v)\n    // ...\n  );\n\nupdateRequest.forEach((k, v) -&gt; keyToSetter.get(k).accept(obj, v));\n\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6939776,"reputation":80,"user_id":5326546,"display_name":"SharifS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648059126,"creation_date":1648059126,"answer_id":71592076,"question_id":71590792,"body_markdown":"You can convert your existing myObject instance to a map using [ObjectMapper][1] and then merge the two maps. Finally you just have to convert the map to MyObject.\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    Map&lt;String,Object&gt; myObjectMap = mapper.convertValue(obj, HashMap.class);\r\n    inputMap.forEach((k,v)-&gt; myObjectMap.merge(k,v, (v1,v2)-&gt; v2));\r\n    MyObject resultObject = mapper.convertValue(myObjectMap , MyObject.class);\r\nNotice the remapping function used above. It only sets value from the inputMap. If no value found for a key, it will keep the value in myObjectMap.\r\n\r\n\r\n  [1]: https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html","title":"Get from map, set in object using setter, but for too many fields?","body":"<p>You can convert your existing myObject instance to a map using <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html\" rel=\"nofollow noreferrer\">ObjectMapper</a> and then merge the two maps. Finally you just have to convert the map to MyObject.</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nMap&lt;String,Object&gt; myObjectMap = mapper.convertValue(obj, HashMap.class);\ninputMap.forEach((k,v)-&gt; myObjectMap.merge(k,v, (v1,v2)-&gt; v2));\nMyObject resultObject = mapper.convertValue(myObjectMap , MyObject.class);\n</code></pre>\n<p>Notice the remapping function used above. It only sets value from the inputMap. If no value found for a key, it will keep the value in myObjectMap.</p>\n"}],"owner":{"account_id":14128988,"reputation":637,"user_id":10207432,"display_name":"Tameem Khan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":545,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":71592076,"answer_count":2,"score":0,"last_activity_date":1648059126,"creation_date":1648053155,"question_id":71590792,"body_markdown":"Problem\r\n----\r\nConsider a Pojo class with a lot of fields. A HashMap is given. Get element from map and set in object (Update operation).\r\nFollowing should be considered:\r\n - The key name in HashMap and corresponding target field name are not exactly same (see example)\r\n - If a key is not present in map, don&#39;t update corresponding field\r\n - If key is present, update corresponding field (including updating with null)\r\n - Do not worry about ClassCastException, map values will be provided with appropriate class type, always.\r\n\r\n\r\nExample:\r\n----\r\n\r\nMap and Pojo correspondence:\r\n\r\nkey in HashMap  - &gt; field name in Object\r\n\r\n - numberOfItems   -&gt; quantity\r\n - paidAmount      -&gt; price\r\n - adrLine1        -&gt; house\r\n - adrLine2        -&gt; road\r\n - adrLine3        -&gt; area\r\n - adrLine4        -&gt; city\r\n - ...and 100s more\r\n\r\nPojo class:\r\n\r\n    private static class MyObject{\r\n        private Integer quantity;\r\n        private Double price;\r\n        private String house;\r\n        private String road;\r\n        private String area;\r\n        private String city;\r\n        ...\r\n\r\n        //getter-setters\r\n\r\n    }\r\n\r\nA good old plain approach can be: \r\n\r\n    private void someMethod(Map&lt;String, Object&gt; updateRequest, MyObject obj){\r\n        if(updateRequest.containsKey(&quot;numberOfItems&quot;)){\r\n            obj.setQuantity((Integer) updateRequest.get(&quot;numberOfItems&quot;));\r\n        }\r\n        if(updateRequest.containsKey(&quot;paidAmount&quot;)){\r\n            obj.setPrice((Double) updateRequest.get(&quot;paidAmount&quot;));\r\n        }\r\n        if(updateRequest.containsKey(&quot;adrLine1&quot;)){\r\n            obj.setHouse((String) updateRequest.get(&quot;adrLine1&quot;));\r\n        }\r\n        if(updateRequest.containsKey(&quot;adrLine2&quot;)){\r\n            obj.setRoad((String) updateRequest.get(&quot;adrLine2&quot;));\r\n        }\r\n        if(updateRequest.containsKey(&quot;adrLine3&quot;)){\r\n            obj.setArea((String) updateRequest.get(&quot;adrLine3&quot;));\r\n        }\r\n        if(updateRequest.containsKey(&quot;adrLine4&quot;)){\r\n            obj.setCity((String) updateRequest.get(&quot;adrLine4&quot;));\r\n        }\r\n        ...\r\n    }\r\n\r\nBut as you can see, this is neither efficient to code, nor comes with a good maintainability.\r\n\r\nSomething like this would be perfect:\r\n\r\n    Map&lt;String, Object&gt; updateRequest = //provided\r\n    MyObject obj = //provided\r\n\r\n    List.of(\r\n            Pair.of(&quot;numberOfItems&quot;, &quot;quantity&quot;),\r\n            Pair.of(&quot;paidAmount&quot;, &quot;price&quot;),\r\n            Pair.of(&quot;adrLine1&quot;, &quot;house&quot;),\r\n            Pair.of(&quot;adrLine2&quot;, &quot;road&quot;),\r\n            Pair.of(&quot;adrLine3&quot;, &quot;area&quot;),\r\n            Pair.of(&quot;adrLine4&quot;, &quot;city&quot;)\r\n    ).stream()\r\n    .filter(queryPair -&gt; updateRequest.ContainsKey(queryPair.getKey()))\r\n    .forEach(queryPair -&gt; obj. set ?? programmatically set field name ?? (updateRequest.get(queryPair.getKey())));\r\n\r\nAlso feel free to suggest any *popular* external library that already does this.","title":"Get from map, set in object using setter, but for too many fields?","body":"<h2>Problem</h2>\n<p>Consider a Pojo class with a lot of fields. A HashMap is given. Get element from map and set in object (Update operation).\nFollowing should be considered:</p>\n<ul>\n<li>The key name in HashMap and corresponding target field name are not exactly same (see example)</li>\n<li>If a key is not present in map, don't update corresponding field</li>\n<li>If key is present, update corresponding field (including updating with null)</li>\n<li>Do not worry about ClassCastException, map values will be provided with appropriate class type, always.</li>\n</ul>\n<h2>Example:</h2>\n<p>Map and Pojo correspondence:</p>\n<p>key in HashMap  - &gt; field name in Object</p>\n<ul>\n<li>numberOfItems   -&gt; quantity</li>\n<li>paidAmount      -&gt; price</li>\n<li>adrLine1        -&gt; house</li>\n<li>adrLine2        -&gt; road</li>\n<li>adrLine3        -&gt; area</li>\n<li>adrLine4        -&gt; city</li>\n<li>...and 100s more</li>\n</ul>\n<p>Pojo class:</p>\n<pre><code>private static class MyObject{\n    private Integer quantity;\n    private Double price;\n    private String house;\n    private String road;\n    private String area;\n    private String city;\n    ...\n\n    //getter-setters\n\n}\n</code></pre>\n<p>A good old plain approach can be:</p>\n<pre><code>private void someMethod(Map&lt;String, Object&gt; updateRequest, MyObject obj){\n    if(updateRequest.containsKey(&quot;numberOfItems&quot;)){\n        obj.setQuantity((Integer) updateRequest.get(&quot;numberOfItems&quot;));\n    }\n    if(updateRequest.containsKey(&quot;paidAmount&quot;)){\n        obj.setPrice((Double) updateRequest.get(&quot;paidAmount&quot;));\n    }\n    if(updateRequest.containsKey(&quot;adrLine1&quot;)){\n        obj.setHouse((String) updateRequest.get(&quot;adrLine1&quot;));\n    }\n    if(updateRequest.containsKey(&quot;adrLine2&quot;)){\n        obj.setRoad((String) updateRequest.get(&quot;adrLine2&quot;));\n    }\n    if(updateRequest.containsKey(&quot;adrLine3&quot;)){\n        obj.setArea((String) updateRequest.get(&quot;adrLine3&quot;));\n    }\n    if(updateRequest.containsKey(&quot;adrLine4&quot;)){\n        obj.setCity((String) updateRequest.get(&quot;adrLine4&quot;));\n    }\n    ...\n}\n</code></pre>\n<p>But as you can see, this is neither efficient to code, nor comes with a good maintainability.</p>\n<p>Something like this would be perfect:</p>\n<pre><code>Map&lt;String, Object&gt; updateRequest = //provided\nMyObject obj = //provided\n\nList.of(\n        Pair.of(&quot;numberOfItems&quot;, &quot;quantity&quot;),\n        Pair.of(&quot;paidAmount&quot;, &quot;price&quot;),\n        Pair.of(&quot;adrLine1&quot;, &quot;house&quot;),\n        Pair.of(&quot;adrLine2&quot;, &quot;road&quot;),\n        Pair.of(&quot;adrLine3&quot;, &quot;area&quot;),\n        Pair.of(&quot;adrLine4&quot;, &quot;city&quot;)\n).stream()\n.filter(queryPair -&gt; updateRequest.ContainsKey(queryPair.getKey()))\n.forEach(queryPair -&gt; obj. set ?? programmatically set field name ?? (updateRequest.get(queryPair.getKey())));\n</code></pre>\n<p>Also feel free to suggest any <em>popular</em> external library that already does this.</p>\n"},{"tags":["java","json","jolt"],"answers":[{"tags":[],"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647973996,"creation_date":1647973996,"answer_id":71577269,"question_id":71576417,"body_markdown":"You can use following **shift** transformation specs\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: { //represents top level object&#39;s key name(&quot;sample&quot;)\r\n        &quot;*&quot;: { //represents both &quot;numbers&quot; and &quot;extra&quot;\r\n          &quot;*&quot;: {\r\n            &quot;id*&quot;: &quot;&amp;2[&amp;1].&amp;&quot;, // all keys starting with &quot;id&quot;, and their values(&quot;.&amp;&quot;) nested under common key and sub-key pairs such as &quot;numbers[0]&quot;, &quot;numbers[1]&quot;, &quot;extra[0]&quot;\r\n            &quot;levels|plans&quot;: {\r\n              &quot;id*&quot;: &quot;&amp;3[&amp;2].&amp;&quot;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  {\r\n   // remove object key names while adding extra attribute &quot;success&quot;\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;#true&quot;: &quot;success&quot;,\r\n      &quot;*&quot;: {\r\n        &quot;*&quot;: &quot;numbers&quot;\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\n\r\nthe ***demo*** is on the site **http://jolt-demo.appspot.com/** :\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fJBJh.jpg","title":"Jolt transformation to append a json to existing array","body":"<p>You can use following <strong>shift</strong> transformation specs</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: { //represents top level object's key name(&quot;sample&quot;)\n        &quot;*&quot;: { //represents both &quot;numbers&quot; and &quot;extra&quot;\n          &quot;*&quot;: {\n            &quot;id*&quot;: &quot;&amp;2[&amp;1].&amp;&quot;, // all keys starting with &quot;id&quot;, and their values(&quot;.&amp;&quot;) nested under common key and sub-key pairs such as &quot;numbers[0]&quot;, &quot;numbers[1]&quot;, &quot;extra[0]&quot;\n            &quot;levels|plans&quot;: {\n              &quot;id*&quot;: &quot;&amp;3[&amp;2].&amp;&quot;\n            }\n          }\n        }\n      }\n    }\n  },\n  {\n   // remove object key names while adding extra attribute &quot;success&quot;\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;#true&quot;: &quot;success&quot;,\n      &quot;*&quot;: {\n        &quot;*&quot;: &quot;numbers&quot;\n      }\n    }\n  }\n]\n</code></pre>\n<p>the <em><strong>demo</strong></em> is on the site <strong><a href=\"http://jolt-demo.appspot.com/\" rel=\"nofollow noreferrer\">http://jolt-demo.appspot.com/</a></strong> :</p>\n<p><a href=\"https://i.stack.imgur.com/fJBJh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fJBJh.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":14546187,"reputation":970,"user_id":10506380,"display_name":"Aditya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":408,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1648059122,"creation_date":1647969907,"question_id":71576417,"body_markdown":"[![Success Response Case][1]][1]\r\n\r\n[![Failure Response Case][2]][2]\r\n\r\nI have a written a jolt transformation to transform an API response.\r\n\r\nThe Input is \r\n```json\r\n{\r\n  &quot;sample&quot;: {\r\n    &quot;numbers&quot;: [\r\n      {\r\n        &quot;id1&quot;: &quot;number1&quot;,\r\n        &quot;id2&quot;: &quot;1&quot;,\r\n        &quot;levels&quot;: {\r\n          &quot;id3&quot;: &quot;level3&quot;\r\n        }\r\n      },\r\n      {\r\n        &quot;id1&quot;: &quot;number2&quot;,\r\n        &quot;id2&quot;: &quot;2&quot;,\r\n        &quot;levels&quot;: {\r\n          &quot;id3&quot;: &quot;level-test&quot;\r\n        }\r\n      }\r\n    ],\r\n    &quot;extra&quot;: [\r\n      {\r\n        &quot;id1&quot;: &quot;extra1&quot;,\r\n        &quot;id2&quot;: &quot;extra2&quot;,\r\n        &quot;plans&quot;: {\r\n          &quot;id3&quot;: &quot;first-plan&quot;,\r\n          &quot;unit&quot;: &quot;2&quot;\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n\r\nFor Failure scenario input is\r\n\r\n    {\r\n    &quot;code&quot;: &quot;NOT_VALID&quot;,\r\n    &quot;message&quot;: &quot;Invalid Request&quot;,\r\n    &quot;httpStatus&quot;: &quot;400&quot;\r\n    }\r\n\r\n```\r\nThe jolt transformation is \r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;sample&quot;: {\r\n        &quot;numbers&quot;: {\r\n          &quot;*&quot;: {\r\n            &quot;id1&quot;: &quot;numbers[&amp;1].id1&quot;,\r\n            &quot;id2&quot;: &quot;numbers[&amp;1].id2&quot;,\r\n            &quot;levels&quot;: {\r\n              &quot;id3&quot;: &quot;numbers[&amp;2].id3&quot;\r\n            }\r\n          }\r\n        },\r\n        &quot;#true&quot;: &quot;success&quot;\r\n      },\r\n      &quot;message&quot;: &quot;errorMessage&quot;,\r\n      &quot;code&quot;: {\r\n        &quot;#false&quot;: &quot;success&quot;\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\nThe expected Output is \r\n```json\r\n{\r\n  &quot;success&quot;: &quot;true&quot;,\r\n  &quot;numbers&quot;: [\r\n    {\r\n      &quot;id1&quot;: &quot;number1&quot;,\r\n      &quot;id2&quot;: &quot;1&quot;,\r\n      &quot;id3&quot;: &quot;level3&quot;\r\n    },\r\n    {\r\n      &quot;id1&quot;: &quot;number2&quot;,\r\n      &quot;id2&quot;: &quot;2&quot;,\r\n      &quot;id3&quot;: &quot;level-test&quot;\r\n    },\r\n    {\r\n      &quot;id1&quot;: &quot;extra1&quot;,\r\n      &quot;id2&quot;: &quot;extra2&quot;,\r\n      &quot;id3&quot;: &quot;first-plan&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\nThe output which I am able to get right now is \r\n```json\r\n{\r\n  &quot;success&quot;: &quot;true&quot;,\r\n  &quot;numbers&quot;: [\r\n    {\r\n      &quot;id1&quot;: &quot;number1&quot;,\r\n      &quot;id2&quot;: &quot;1&quot;,\r\n      &quot;id3&quot;: &quot;level3&quot;\r\n    },\r\n    {\r\n      &quot;id1&quot;: &quot;number2&quot;,\r\n      &quot;id2&quot;: &quot;2&quot;,\r\n      &quot;id3&quot;: &quot;level-test&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\nI am not able to figure out how extra array fields (id1, id2, plans.id3) will be appended to numbers array after all the elements of that array are transversed.\r\n\r\n\r\nThe Desired failure response should be\r\n\r\n    {\r\n    &quot;errorMessage&quot;: &quot;Invalid Request&quot;,\r\n    &quot;success&quot;: &quot;false&quot;\r\n    }\r\n\r\nAny Idea how it can be achieved.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HzLSx.jpg\r\n  [2]: https://i.stack.imgur.com/6jVOD.png","title":"Jolt transformation to append a json to existing array","body":"<p><a href=\"https://i.stack.imgur.com/HzLSx.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HzLSx.jpg\" alt=\"Success Response Case\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/6jVOD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6jVOD.png\" alt=\"Failure Response Case\" /></a></p>\n<p>I have a written a jolt transformation to transform an API response.</p>\n<p>The Input is</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;sample&quot;: {\n    &quot;numbers&quot;: [\n      {\n        &quot;id1&quot;: &quot;number1&quot;,\n        &quot;id2&quot;: &quot;1&quot;,\n        &quot;levels&quot;: {\n          &quot;id3&quot;: &quot;level3&quot;\n        }\n      },\n      {\n        &quot;id1&quot;: &quot;number2&quot;,\n        &quot;id2&quot;: &quot;2&quot;,\n        &quot;levels&quot;: {\n          &quot;id3&quot;: &quot;level-test&quot;\n        }\n      }\n    ],\n    &quot;extra&quot;: [\n      {\n        &quot;id1&quot;: &quot;extra1&quot;,\n        &quot;id2&quot;: &quot;extra2&quot;,\n        &quot;plans&quot;: {\n          &quot;id3&quot;: &quot;first-plan&quot;,\n          &quot;unit&quot;: &quot;2&quot;\n        }\n      }\n    ]\n  }\n}\n\nFor Failure scenario input is\n\n    {\n    &quot;code&quot;: &quot;NOT_VALID&quot;,\n    &quot;message&quot;: &quot;Invalid Request&quot;,\n    &quot;httpStatus&quot;: &quot;400&quot;\n    }\n\n</code></pre>\n<p>The jolt transformation is</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;sample&quot;: {\n        &quot;numbers&quot;: {\n          &quot;*&quot;: {\n            &quot;id1&quot;: &quot;numbers[&amp;1].id1&quot;,\n            &quot;id2&quot;: &quot;numbers[&amp;1].id2&quot;,\n            &quot;levels&quot;: {\n              &quot;id3&quot;: &quot;numbers[&amp;2].id3&quot;\n            }\n          }\n        },\n        &quot;#true&quot;: &quot;success&quot;\n      },\n      &quot;message&quot;: &quot;errorMessage&quot;,\n      &quot;code&quot;: {\n        &quot;#false&quot;: &quot;success&quot;\n      }\n    }\n  }\n]\n</code></pre>\n<p>The expected Output is</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;success&quot;: &quot;true&quot;,\n  &quot;numbers&quot;: [\n    {\n      &quot;id1&quot;: &quot;number1&quot;,\n      &quot;id2&quot;: &quot;1&quot;,\n      &quot;id3&quot;: &quot;level3&quot;\n    },\n    {\n      &quot;id1&quot;: &quot;number2&quot;,\n      &quot;id2&quot;: &quot;2&quot;,\n      &quot;id3&quot;: &quot;level-test&quot;\n    },\n    {\n      &quot;id1&quot;: &quot;extra1&quot;,\n      &quot;id2&quot;: &quot;extra2&quot;,\n      &quot;id3&quot;: &quot;first-plan&quot;\n    }\n  ]\n}\n</code></pre>\n<p>The output which I am able to get right now is</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;success&quot;: &quot;true&quot;,\n  &quot;numbers&quot;: [\n    {\n      &quot;id1&quot;: &quot;number1&quot;,\n      &quot;id2&quot;: &quot;1&quot;,\n      &quot;id3&quot;: &quot;level3&quot;\n    },\n    {\n      &quot;id1&quot;: &quot;number2&quot;,\n      &quot;id2&quot;: &quot;2&quot;,\n      &quot;id3&quot;: &quot;level-test&quot;\n    }\n  ]\n}\n</code></pre>\n<p>I am not able to figure out how extra array fields (id1, id2, plans.id3) will be appended to numbers array after all the elements of that array are transversed.</p>\n<p>The Desired failure response should be</p>\n<pre><code>{\n&quot;errorMessage&quot;: &quot;Invalid Request&quot;,\n&quot;success&quot;: &quot;false&quot;\n}\n</code></pre>\n<p>Any Idea how it can be achieved.</p>\n"},{"tags":["java","lucene"],"answers":[{"tags":[],"owner":{"account_id":4463947,"reputation":885,"user_id":3632059,"display_name":"PVR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464461086,"creation_date":1464418137,"answer_id":37496099,"question_id":37495639,"body_markdown":"Try `PhraseQuery` as follow:\r\n\r\n    BooleanQuery mainQuery= new BooleanQuery();\t\r\n    String searchTerm=&quot;config migration from asa5505 8.2 to asa5516&quot;;\r\n    String strArray[]= searchTerm.split(&quot; &quot;);\r\n    for(int index=0;index&lt;strArray.length;index++)\r\n    {\r\n    \tPhraseQuery query1 = new PhraseQuery();\r\n    \t query1.add(new Term(&quot;TITLE&quot;,strArray[index]));\r\n    \t mainQuery.add(query1,BooleanClause.Occur.MUST);\r\n    }\r\n\r\nAnd then execute the `mainQuery`.\r\n\r\n\t\r\n\r\nCheck out [this][1] thread of stackoverflow, It may help you to use `PhraseQuery` for exact search.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5527868/exact-phrase-search-using-lucene","title":"How to match exact text in Lucene search?","body":"<p>Try <code>PhraseQuery</code> as follow:</p>\n\n<pre><code>BooleanQuery mainQuery= new BooleanQuery(); \nString searchTerm=\"config migration from asa5505 8.2 to asa5516\";\nString strArray[]= searchTerm.split(\" \");\nfor(int index=0;index&lt;strArray.length;index++)\n{\n    PhraseQuery query1 = new PhraseQuery();\n     query1.add(new Term(\"TITLE\",strArray[index]));\n     mainQuery.add(query1,BooleanClause.Occur.MUST);\n}\n</code></pre>\n\n<p>And then execute the <code>mainQuery</code>.</p>\n\n<p>Check out <a href=\"https://stackoverflow.com/questions/5527868/exact-phrase-search-using-lucene\">this</a> thread of stackoverflow, It may help you to use <code>PhraseQuery</code> for exact search.</p>\n"},{"tags":[],"owner":{"account_id":1787149,"reputation":32983,"user_id":1628375,"display_name":"femtoRgon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1464464691,"creation_date":1464431435,"answer_id":37497907,"question_id":37495639,"body_markdown":"PVR is correct, that using a phrase query is probably the right solution here, but they missed on how to use the `PhraseQuery` class.  You are already using `QueryParser` though, so just use the query parser syntax by enclosing you search text in quotes:\r\n\r\n    Query query = queryParser.parse(&quot;TITLE:\\&quot;Config migration from ASA5505 8.2 to ASA5516\\&quot;&quot;);\r\n\r\n-------------------\r\n\r\nBased on your update, you are using a different analyzer at index-time and query-time.  `SimpleAnalyzer` and `StandardAnalyzer` don&#39;t do the same things.  Unless you have a very good reason to do otherwise, you should analyze the same way when indexing and querying.  \r\n\r\nSo, change the analyzer in your indexing code to `StandardAnalyzer` (or vice-versa, use `SimpleAnalyzer` when querying), and you should see better results.","title":"How to match exact text in Lucene search?","body":"<p>PVR is correct, that using a phrase query is probably the right solution here, but they missed on how to use the <code>PhraseQuery</code> class.  You are already using <code>QueryParser</code> though, so just use the query parser syntax by enclosing you search text in quotes:</p>\n\n<pre><code>Query query = queryParser.parse(\"TITLE:\\\"Config migration from ASA5505 8.2 to ASA5516\\\"\");\n</code></pre>\n\n<hr>\n\n<p>Based on your update, you are using a different analyzer at index-time and query-time.  <code>SimpleAnalyzer</code> and <code>StandardAnalyzer</code> don't do the same things.  Unless you have a very good reason to do otherwise, you should analyze the same way when indexing and querying.  </p>\n\n<p>So, change the analyzer in your indexing code to <code>StandardAnalyzer</code> (or vice-versa, use <code>SimpleAnalyzer</code> when querying), and you should see better results.</p>\n"},{"tags":[],"owner":{"account_id":4463947,"reputation":885,"user_id":3632059,"display_name":"PVR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464459845,"creation_date":1464459398,"answer_id":37502386,"question_id":37495639,"body_markdown":"Here is what i have written for you which works perfectly:\r\n\r\nUSE: `queryParser.parse(&quot;\\&quot;Config migration from ASA5505 8.2 to ASA5516\\&quot;&quot;);`\r\n\r\n\r\n1. To create indexes\r\n\r\n    \r\n    \tpublic static void main(String[] args) \r\n    \t{\r\n    \t\t\r\n    \t\tIndexWriter writer = getIndexWriter();\r\n    \t\tDocument doc = new Document();\r\n    \t\tDocument doc1 = new Document();\r\n    \t\tDocument doc2 = new Document();\r\n    \t\tdoc.add(new Field(&quot;TITLE&quot;, &quot;Config migration from ASA5505 8.2 to ASA5516&quot;,Field.Store.YES,Field.Index.ANALYZED));\r\n    \t\tdoc1.add(new Field(&quot;TITLE&quot;, &quot;Firewall  migration from ASA5585 to ASA5555&quot;,Field.Store.YES,Field.Index.ANALYZED));\r\n    \t\tdoc2.add(new Field(&quot;TITLE&quot;, &quot;Firewall  migration from ASA5585 to ASA5555&quot;,Field.Store.YES,Field.Index.ANALYZED));\r\n    \t\ttry \r\n    \t\t{\r\n    \t\t\twriter.addDocument(doc);\r\n    \t\t\twriter.addDocument(doc1);\r\n    \t\t\twriter.addDocument(doc2);\r\n    \t\t\twriter.close();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic static IndexWriter getIndexWriter()\r\n    \t{\r\n    \t\tIndexWriter indexWriter=null;\r\n    \t\t\r\n    \t\ttry \r\n    \t\t{\r\n    \t\tFile file=new File(&quot;D://index//&quot;);\r\n    \t\tif(!file.exists())\r\n    \t\t\tfile.mkdir();\r\n    \t\tIndexWriterConfig conf=new IndexWriterConfig(Version.LUCENE_34, new StandardAnalyzer(Version.LUCENE_34));\r\n    \t\tDirectory directory=FSDirectory.open(file);\r\n    \t\tindexWriter=new IndexWriter(directory, conf);\r\n    \t\t} catch (IOException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\treturn indexWriter;\r\n    \t}\r\n    }\r\n\r\n2.To search string\r\n\r\n    \tpublic static void main(String[] args) \r\n    \t{\r\n    \t\t\r\n    \tIndexReader reader=getIndexReader();\r\n    \t\r\n    \tIndexSearcher searcher = new IndexSearcher(reader);\r\n    \r\n    \tQueryParser parser = new QueryParser(Version.LUCENE_34, &quot;TITLE&quot; ,new StandardAnalyzer(Version.LUCENE_34));\r\n    \r\n    \tQuery query;\r\n    \ttry \r\n    \t{\r\n    \tquery = parser.parse(&quot;\\&quot;Config migration from ASA5505 8.2 to ASA5516\\&quot;&quot;);\r\n    \t\r\n    \tTopDocs hits = searcher.search(query,3);\r\n    \r\n    \tScoreDoc[] document = hits.scoreDocs;\r\n    \tint i=0;\r\n    \tfor(i=0;i&lt;document.length;i++)\r\n    \t{\r\n    \t\tDocument doc = searcher.doc(i);\r\n    \r\n    \t\tSystem.out.println(&quot;TITLE=&quot; + doc.get(&quot;TITLE&quot;));\r\n    \t}\r\n    \t\tsearcher.close();\r\n    \t\r\n    \t} \r\n    \tcatch (Exception e) \r\n    \t{\r\n    \t\t// TODO Auto-generated catch block\r\n    \t\te.printStackTrace();\r\n    \t} \r\n    \t\t    }\r\n    \r\n    public static IndexReader getIndexReader()\r\n    {\r\n    \tIndexReader reader=null;\r\n    \t \r\n    \tDirectory dir;\r\n    \ttry \r\n    \t{\r\n    \t\tdir = FSDirectory.open(new File(&quot;D://index//&quot;));\r\n    \t\treader=IndexReader.open(dir);\r\n    \t} catch (IOException e) \r\n    \t{\r\n    \t\t// TODO Auto-generated catch block\r\n    \t\te.printStackTrace();\r\n    \t}\r\n    \t\r\n    \treturn reader;\r\n    }\t","title":"How to match exact text in Lucene search?","body":"<p>Here is what i have written for you which works perfectly:</p>\n\n<p>USE: <code>queryParser.parse(\"\\\"Config migration from ASA5505 8.2 to ASA5516\\\"\");</code></p>\n\n<ol>\n<li><p>To create indexes</p>\n\n<pre><code>public static void main(String[] args) \n{\n\n    IndexWriter writer = getIndexWriter();\n    Document doc = new Document();\n    Document doc1 = new Document();\n    Document doc2 = new Document();\n    doc.add(new Field(\"TITLE\", \"Config migration from ASA5505 8.2 to ASA5516\",Field.Store.YES,Field.Index.ANALYZED));\n    doc1.add(new Field(\"TITLE\", \"Firewall  migration from ASA5585 to ASA5555\",Field.Store.YES,Field.Index.ANALYZED));\n    doc2.add(new Field(\"TITLE\", \"Firewall  migration from ASA5585 to ASA5555\",Field.Store.YES,Field.Index.ANALYZED));\n    try \n    {\n        writer.addDocument(doc);\n        writer.addDocument(doc1);\n        writer.addDocument(doc2);\n        writer.close();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n}\n\npublic static IndexWriter getIndexWriter()\n{\n    IndexWriter indexWriter=null;\n\n    try \n    {\n    File file=new File(\"D://index//\");\n    if(!file.exists())\n        file.mkdir();\n    IndexWriterConfig conf=new IndexWriterConfig(Version.LUCENE_34, new StandardAnalyzer(Version.LUCENE_34));\n    Directory directory=FSDirectory.open(file);\n    indexWriter=new IndexWriter(directory, conf);\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n    return indexWriter;\n}\n</code></pre>\n\n<p>}</p></li>\n</ol>\n\n<p>2.To search string</p>\n\n<pre><code>    public static void main(String[] args) \n    {\n\n    IndexReader reader=getIndexReader();\n\n    IndexSearcher searcher = new IndexSearcher(reader);\n\n    QueryParser parser = new QueryParser(Version.LUCENE_34, \"TITLE\" ,new StandardAnalyzer(Version.LUCENE_34));\n\n    Query query;\n    try \n    {\n    query = parser.parse(\"\\\"Config migration from ASA5505 8.2 to ASA5516\\\"\");\n\n    TopDocs hits = searcher.search(query,3);\n\n    ScoreDoc[] document = hits.scoreDocs;\n    int i=0;\n    for(i=0;i&lt;document.length;i++)\n    {\n        Document doc = searcher.doc(i);\n\n        System.out.println(\"TITLE=\" + doc.get(\"TITLE\"));\n    }\n        searcher.close();\n\n    } \n    catch (Exception e) \n    {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } \n            }\n\npublic static IndexReader getIndexReader()\n{\n    IndexReader reader=null;\n\n    Directory dir;\n    try \n    {\n        dir = FSDirectory.open(new File(\"D://index//\"));\n        reader=IndexReader.open(dir);\n    } catch (IOException e) \n    {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n\n    return reader;\n}   \n</code></pre>\n"}],"owner":{"account_id":4624460,"reputation":3440,"user_id":3748666,"accept_rate":63,"display_name":"Santosh Hegde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16211,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1648058655,"creation_date":1464414230,"question_id":37495639,"body_markdown":"Im trying to match a text **Config migration from ASA5505 8.2 to ASA5516** in column **TITLE**.\r\n\r\nMy program looks like this.\r\n\r\n    Directory directory = FSDirectory.open(indexDir);\r\n    \r\n    MultiFieldQueryParser queryParser = new MultiFieldQueryParser(Version.LUCENE_35,new String[] {&quot;TITLE&quot;}, new StandardAnalyzer(Version.LUCENE_35));        \r\n    IndexReader reader = IndexReader.open(directory);\r\n    IndexSearcher searcher = new IndexSearcher(reader);       \r\n    queryParser.setPhraseSlop(0);\r\n    queryParser.setLowercaseExpandedTerms(true);\r\n    Query query = queryParser.parse(&quot;TITLE:Config migration from ASA5505 8.2 to ASA5516&quot;);\r\n    System.out.println(queryStr);\r\n    TopDocs topDocs = searcher.search(query,100);\r\n    System.out.println(topDocs.totalHits);\r\n    ScoreDoc[] hits = topDocs.scoreDocs;\r\n    System.out.println(hits.length + &quot; Record(s) Found&quot;);\r\n    for (int i = 0; i &lt; hits.length; i++) {\r\n        int docId = hits[i].doc;\r\n        Document d = searcher.doc(docId);\r\n        System.out.println(&quot;\\&quot;Title :\\&quot; &quot; +d.get(&quot;TITLE&quot;) );\r\n    }\r\n\r\n\r\nBut its returning \r\n\r\n    &quot;Title :&quot; Config migration from ASA5505 8.2 to ASA5516\r\n    &quot;Title :&quot; Firewall  migration from ASA5585 to  ASA5555\r\n    &quot;Title :&quot; Firewall  migration from ASA5585 to  ASA5555\r\n\r\nSecond 2 results are not expected.So what modification required to match exact text **Config migration from ASA5505 8.2 to ASA5516**\r\n\r\n\r\n\r\nAnd my indexing function looks like this\r\n\r\n\r\n    public class Lucene {\r\n\tpublic static final String INDEX_DIR = &quot;./Lucene&quot;;\r\n\tprivate static final String JDBC_DRIVER = &quot;oracle.jdbc.OracleDriver&quot;;\r\n\tprivate static final String CONNECTION_URL = &quot;jdbc:oracle:thin:xxxxxxx&quot;\r\n\t\r\n\tprivate static final String USER_NAME = &quot;localhost&quot;;\r\n\tprivate static final String PASSWORD = &quot;localhost&quot;;\r\n\tprivate static final String QUERY = &quot;select * from TITLE_TABLE&quot;;\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\tFile indexDir = new File(INDEX_DIR);\r\n\t\tLucene indexer = new Lucene();\r\n\t\ttry {\r\n\t\t\tDate start = new Date();\r\n\t\t\tClass.forName(JDBC_DRIVER).newInstance();\r\n\t\t\tConnection conn = DriverManager.getConnection(CONNECTION_URL, USER_NAME, PASSWORD);\r\n\t\t\tSimpleAnalyzer analyzer = new SimpleAnalyzer(Version.LUCENE_35);\r\n\t\t\tIndexWriterConfig indexWriterConfig = new IndexWriterConfig(Version.LUCENE_35, analyzer);\r\n\t\t\tIndexWriter indexWriter = new IndexWriter(FSDirectory.open(indexDir), indexWriterConfig);\r\n\t\t\tSystem.out.println(&quot;Indexing to directory &#39;&quot; + indexDir + &quot;&#39;...&quot;);\r\n\t\t\tint indexedDocumentCount = indexer.indexDocs(indexWriter, conn);\r\n\t\t\tindexWriter.close();\r\n\t\t\tSystem.out.println(indexedDocumentCount + &quot; records have been indexed successfully&quot;);\r\n\t\t\tSystem.out.println(&quot;Total Time:&quot; + (new Date().getTime() - start.getTime()) / (1000));\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n\tint indexDocs(IndexWriter writer, Connection conn) throws Exception {\r\n\t\tString sql = QUERY;\r\n\t\tStatement stmt = conn.createStatement();\r\n\t\tstmt.setFetchSize(100000);\r\n\t\tResultSet rs = stmt.executeQuery(sql);\r\n\t\tint i = 0;\r\n\t\twhile (rs.next()) {\r\n\t\t\tSystem.out.println(&quot;Addind Doc No:&quot; + i);\r\n\t\t\tDocument d = new Document();\r\n\t\t\tSystem.out.println(rs.getString(&quot;TITLE&quot;));\r\n\t\t\td.add(new Field(&quot;TITLE&quot;, rs.getString(&quot;TITLE&quot;), Field.Store.YES, Field.Index.ANALYZED));\r\n\t\t\td.add(new Field(&quot;NAME&quot;, rs.getString(&quot;NAME&quot;), Field.Store.YES, Field.Index.ANALYZED));\r\n\t\t\twriter.addDocument(d);\r\n\t\t\ti++;\r\n\t\t}\r\n\t\treturn i;\r\n\t}\r\n    }","title":"How to match exact text in Lucene search?","body":"<p>Im trying to match a text <strong>Config migration from ASA5505 8.2 to ASA5516</strong> in column <strong>TITLE</strong>.</p>\n\n<p>My program looks like this.</p>\n\n<pre><code>Directory directory = FSDirectory.open(indexDir);\n\nMultiFieldQueryParser queryParser = new MultiFieldQueryParser(Version.LUCENE_35,new String[] {\"TITLE\"}, new StandardAnalyzer(Version.LUCENE_35));        \nIndexReader reader = IndexReader.open(directory);\nIndexSearcher searcher = new IndexSearcher(reader);       \nqueryParser.setPhraseSlop(0);\nqueryParser.setLowercaseExpandedTerms(true);\nQuery query = queryParser.parse(\"TITLE:Config migration from ASA5505 8.2 to ASA5516\");\nSystem.out.println(queryStr);\nTopDocs topDocs = searcher.search(query,100);\nSystem.out.println(topDocs.totalHits);\nScoreDoc[] hits = topDocs.scoreDocs;\nSystem.out.println(hits.length + \" Record(s) Found\");\nfor (int i = 0; i &lt; hits.length; i++) {\n    int docId = hits[i].doc;\n    Document d = searcher.doc(docId);\n    System.out.println(\"\\\"Title :\\\" \" +d.get(\"TITLE\") );\n}\n</code></pre>\n\n<p>But its returning </p>\n\n<pre><code>\"Title :\" Config migration from ASA5505 8.2 to ASA5516\n\"Title :\" Firewall  migration from ASA5585 to  ASA5555\n\"Title :\" Firewall  migration from ASA5585 to  ASA5555\n</code></pre>\n\n<p>Second 2 results are not expected.So what modification required to match exact text <strong>Config migration from ASA5505 8.2 to ASA5516</strong></p>\n\n<p>And my indexing function looks like this</p>\n\n<pre><code>public class Lucene {\npublic static final String INDEX_DIR = \"./Lucene\";\nprivate static final String JDBC_DRIVER = \"oracle.jdbc.OracleDriver\";\nprivate static final String CONNECTION_URL = \"jdbc:oracle:thin:xxxxxxx\"\n\nprivate static final String USER_NAME = \"localhost\";\nprivate static final String PASSWORD = \"localhost\";\nprivate static final String QUERY = \"select * from TITLE_TABLE\";\n\npublic static void main(String[] args) throws Exception {\n    File indexDir = new File(INDEX_DIR);\n    Lucene indexer = new Lucene();\n    try {\n        Date start = new Date();\n        Class.forName(JDBC_DRIVER).newInstance();\n        Connection conn = DriverManager.getConnection(CONNECTION_URL, USER_NAME, PASSWORD);\n        SimpleAnalyzer analyzer = new SimpleAnalyzer(Version.LUCENE_35);\n        IndexWriterConfig indexWriterConfig = new IndexWriterConfig(Version.LUCENE_35, analyzer);\n        IndexWriter indexWriter = new IndexWriter(FSDirectory.open(indexDir), indexWriterConfig);\n        System.out.println(\"Indexing to directory '\" + indexDir + \"'...\");\n        int indexedDocumentCount = indexer.indexDocs(indexWriter, conn);\n        indexWriter.close();\n        System.out.println(indexedDocumentCount + \" records have been indexed successfully\");\n        System.out.println(\"Total Time:\" + (new Date().getTime() - start.getTime()) / (1000));\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n\nint indexDocs(IndexWriter writer, Connection conn) throws Exception {\n    String sql = QUERY;\n    Statement stmt = conn.createStatement();\n    stmt.setFetchSize(100000);\n    ResultSet rs = stmt.executeQuery(sql);\n    int i = 0;\n    while (rs.next()) {\n        System.out.println(\"Addind Doc No:\" + i);\n        Document d = new Document();\n        System.out.println(rs.getString(\"TITLE\"));\n        d.add(new Field(\"TITLE\", rs.getString(\"TITLE\"), Field.Store.YES, Field.Index.ANALYZED));\n        d.add(new Field(\"NAME\", rs.getString(\"NAME\"), Field.Store.YES, Field.Index.ANALYZED));\n        writer.addDocument(d);\n        i++;\n    }\n    return i;\n}\n}\n</code></pre>\n"},{"tags":["java","json"],"answers":[{"tags":[],"owner":{"account_id":24663973,"reputation":16,"user_id":18559901,"display_name":"Itso"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1648057626,"creation_date":1648057626,"answer_id":71591798,"question_id":71591564,"body_markdown":"For your first question, you can use data model like a `Map&lt;String, Set&gt;` where the key is the JSON key and the Set will take all your JSON values. Duplicates will be ignored as that&#39;s how the Set data model works. Then, simply iterate through your JSON objects and their properties and populate your Map. \r\n\r\nFor your second question, you can use `Map&lt;String, Map&lt;String, Integer&gt;`. As you iterate simply get (or create, if not found) record from the first map using the JSON key, and then get (or create, if not found) the record from the inner map by the JSON property value. Increment the Integer by 1 in the record existed, otherwise use value 1. ","title":"Find unique values in list of JSON objects","body":"<p>For your first question, you can use data model like a <code>Map&lt;String, Set&gt;</code> where the key is the JSON key and the Set will take all your JSON values. Duplicates will be ignored as that's how the Set data model works. Then, simply iterate through your JSON objects and their properties and populate your Map.</p>\n<p>For your second question, you can use <code>Map&lt;String, Map&lt;String, Integer&gt;</code>. As you iterate simply get (or create, if not found) record from the first map using the JSON key, and then get (or create, if not found) the record from the inner map by the JSON property value. Increment the Integer by 1 in the record existed, otherwise use value 1.</p>\n"}],"owner":{"display_name":"user16148657"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1119,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":71591798,"answer_count":1,"score":-1,"last_activity_date":1648057626,"creation_date":1648056585,"question_id":71591564,"body_markdown":"Say I have a list of JSON Objects, like so:\r\n\r\n    List&lt;JSONObject&gt; listOfJSON Objects = new ArrayList&lt;&gt;();\r\n\r\n    {\r\n        &quot;key1&quot;: apple\r\n        &quot;key2&quot;: banana\r\n        &quot;key3&quot;: orange\r\n    }\r\n    {\r\n        &quot;key1&quot;: melon\r\n        &quot;key2&quot;: banana\r\n        &quot;key3&quot;: orange\r\n    }    \r\n    {\r\n        &quot;key1&quot;: apple\r\n        &quot;key2&quot;: grape\r\n        &quot;key3&quot;: strawberry\r\n    }\r\n\r\nAll the keys in each JSON Object in the list will be the exact same, in the same order even. I need to find each of the unique values and map it to each key so the end result will be:\r\n\r\n    {\r\n        &quot;key1&quot;: [apple, melon]\r\n        &quot;key2&quot;: [banana, grape]\r\n        &quot;key3&quot;: [strawberry, orange]\r\n    }\r\n\r\nAnd if possible, I&#39;d like to append the count for each at the end of each one so ideal result would be:\r\n\r\n    {\r\n        &quot;key1&quot;: [apple (2), melon (1)]\r\n        &quot;key2&quot;: [banana (2), grape (1)]\r\n        &quot;key3&quot;: [strawberry (1), orange (2)]\r\n    }\r\n\r\n","title":"Find unique values in list of JSON objects","body":"<p>Say I have a list of JSON Objects, like so:</p>\n<pre><code>List&lt;JSONObject&gt; listOfJSON Objects = new ArrayList&lt;&gt;();\n\n{\n    &quot;key1&quot;: apple\n    &quot;key2&quot;: banana\n    &quot;key3&quot;: orange\n}\n{\n    &quot;key1&quot;: melon\n    &quot;key2&quot;: banana\n    &quot;key3&quot;: orange\n}    \n{\n    &quot;key1&quot;: apple\n    &quot;key2&quot;: grape\n    &quot;key3&quot;: strawberry\n}\n</code></pre>\n<p>All the keys in each JSON Object in the list will be the exact same, in the same order even. I need to find each of the unique values and map it to each key so the end result will be:</p>\n<pre><code>{\n    &quot;key1&quot;: [apple, melon]\n    &quot;key2&quot;: [banana, grape]\n    &quot;key3&quot;: [strawberry, orange]\n}\n</code></pre>\n<p>And if possible, I'd like to append the count for each at the end of each one so ideal result would be:</p>\n<pre><code>{\n    &quot;key1&quot;: [apple (2), melon (1)]\n    &quot;key2&quot;: [banana (2), grape (1)]\n    &quot;key3&quot;: [strawberry (1), orange (2)]\n}\n</code></pre>\n"},{"tags":["java","inheritance","polymorphism"],"answers":[{"tags":[],"owner":{"account_id":15777655,"reputation":1762,"user_id":11385052,"display_name":"Ryan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1648055963,"creation_date":1648055963,"answer_id":71591418,"question_id":71591299,"body_markdown":"Because &#39;a&#39; is referenced as an Animal.  As far as the code is concerned, it only has direct access to the methods defined by Animal.  Your third line works because you&#39;re explicitly casting it as a Tiger thereby changing the context and giving it access to Tiger methods so long as there isn&#39;t a ClassCastException.\r\n\r\nThe way such a class should be designed is to make Animal an abstract class and then give it an abstract &quot;speak&quot; method something like:\r\n\r\n     public abstract class Animal {\r\n         public abstract void speak();\r\n     }\r\n\r\nthen in your Tiger class\r\n\r\n    public class Tiger extends Animal {\r\n        public void speak() {\r\n           System.out.println(&quot;Roar.&quot;);\r\n        }\r\n    }\r\n\r\n\r\nThen you can call\r\n\r\n    Animal a = new Tiger();\r\n    a.speak();\r\n\r\nThen you could also create a dog\r\n\r\n    public class Dog extends Animal {\r\n        public void speak() {\r\n           System.out.println(&quot;Woof.&quot;);\r\n        }\r\n    }\r\n\r\n    Animal a = new Dog();\r\n    a.speak();","title":"I can&#39;t explain why a method call on a polymorphic object will not compile","body":"<p>Because 'a' is referenced as an Animal.  As far as the code is concerned, it only has direct access to the methods defined by Animal.  Your third line works because you're explicitly casting it as a Tiger thereby changing the context and giving it access to Tiger methods so long as there isn't a ClassCastException.</p>\n<p>The way such a class should be designed is to make Animal an abstract class and then give it an abstract &quot;speak&quot; method something like:</p>\n<pre><code> public abstract class Animal {\n     public abstract void speak();\n }\n</code></pre>\n<p>then in your Tiger class</p>\n<pre><code>public class Tiger extends Animal {\n    public void speak() {\n       System.out.println(&quot;Roar.&quot;);\n    }\n}\n</code></pre>\n<p>Then you can call</p>\n<pre><code>Animal a = new Tiger();\na.speak();\n</code></pre>\n<p>Then you could also create a dog</p>\n<pre><code>public class Dog extends Animal {\n    public void speak() {\n       System.out.println(&quot;Woof.&quot;);\n    }\n}\n\nAnimal a = new Dog();\na.speak();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648057191,"creation_date":1648057191,"answer_id":71591691,"question_id":71591299,"body_markdown":"There are a number of questions like this on SO and the answer is always that Java considers the static type to be `Animal` so calls to methods of `Tiger` will not compile, but I think it might be useful to say a little more about *why*.\r\n\r\nConsider:\r\n\r\n    Animal a = new Tiger();\r\n    a.roar();\r\n\r\nIt is very easy to see that while `a` is declared as an `Animal`, it can only refer to a `Tiger` at the point of the call to `roar()`. But consider a more complex example:\r\n\r\n    Animal a = new Tiger();\r\n    // . . .\r\n    if (zoo.getType() == ZooType.TROPICAL) {\r\n        a = new Toucan();\r\n    }\r\n    for (Condition c : getMeteorologicalConditions()) {\r\n        // . . .\r\n        if (season == Seasons.WINTER) {\r\n            a = new Penguin();\r\n        }\r\n        // . . .\r\n    }\r\n    // . . .\r\n    a.roar();\r\n\r\nIs it safe to call `roar()` here? When is it safe? Can the compiler prove, statically, at compile time, that `a` will always be a `Tiger`? Maybe somehow it can be shown that this code will never be called for a tropical zoo, or in the winter (at least if there are any applicable meteorological conditions; otherwise, the loop would execute zero times and winter wouldn&#39;t matter). But can you imagine the complexity of proving that?\r\n\r\nThe compiler doesn&#39;t even try. When you tell it `a` is an `Animal`, it says, &quot;Okay, it can hold any type of Animal.&quot; And it only permits you to call methods that are valid for *all* animals.","title":"I can&#39;t explain why a method call on a polymorphic object will not compile","body":"<p>There are a number of questions like this on SO and the answer is always that Java considers the static type to be <code>Animal</code> so calls to methods of <code>Tiger</code> will not compile, but I think it might be useful to say a little more about <em>why</em>.</p>\n<p>Consider:</p>\n<pre><code>Animal a = new Tiger();\na.roar();\n</code></pre>\n<p>It is very easy to see that while <code>a</code> is declared as an <code>Animal</code>, it can only refer to a <code>Tiger</code> at the point of the call to <code>roar()</code>. But consider a more complex example:</p>\n<pre><code>Animal a = new Tiger();\n// . . .\nif (zoo.getType() == ZooType.TROPICAL) {\n    a = new Toucan();\n}\nfor (Condition c : getMeteorologicalConditions()) {\n    // . . .\n    if (season == Seasons.WINTER) {\n        a = new Penguin();\n    }\n    // . . .\n}\n// . . .\na.roar();\n</code></pre>\n<p>Is it safe to call <code>roar()</code> here? When is it safe? Can the compiler prove, statically, at compile time, that <code>a</code> will always be a <code>Tiger</code>? Maybe somehow it can be shown that this code will never be called for a tropical zoo, or in the winter (at least if there are any applicable meteorological conditions; otherwise, the loop would execute zero times and winter wouldn't matter). But can you imagine the complexity of proving that?</p>\n<p>The compiler doesn't even try. When you tell it <code>a</code> is an <code>Animal</code>, it says, &quot;Okay, it can hold any type of Animal.&quot; And it only permits you to call methods that are valid for <em>all</em> animals.</p>\n"}],"owner":{"account_id":24663386,"reputation":3,"user_id":18559382,"display_name":"gpatblount"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1069,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71591691,"answer_count":2,"score":0,"last_activity_date":1648057191,"creation_date":1648055462,"question_id":71591299,"body_markdown":"I know the answer to the problem below is statement 1 and 3. But I can&#39;t explain why statement number 2 would not work. Could someone please enlighten me? Thanks.\r\n\r\nConsider the following class definitions.\r\n\r\n```\r\npublic class Animal\r\n{\r\n    public void eat()\r\n    { /* implementation not shown */ }\r\n    // constructors and other methods not shown\r\n}\r\n\r\npublic class Tiger extends Animal\r\n{\r\n    public void roar()\r\n    { /* implementation not shown */ }\r\n    // constructors and other methods not shown\r\n}\r\n```\r\n\r\nAssume that the following declaration appears in a client class.\r\n\r\n     Animal a = new Tiger();\r\n\r\nWhich of the following statements would compile without error?\r\n\r\nI. a.eat();\r\n\r\nII. a.roar();\r\n\r\nIII. ((Tiger) a).roar();\r\n\r\nI&#39;m assuming that instantiating &#39;a&#39; as a new Tiger() would allow &#39;a&#39; to access the roar() method. But I&#39;m obviously wrong. I think I&#39;m not understanding the polymorphic nature of the problem well.","title":"I can&#39;t explain why a method call on a polymorphic object will not compile","body":"<p>I know the answer to the problem below is statement 1 and 3. But I can't explain why statement number 2 would not work. Could someone please enlighten me? Thanks.</p>\n<p>Consider the following class definitions.</p>\n<pre><code>public class Animal\n{\n    public void eat()\n    { /* implementation not shown */ }\n    // constructors and other methods not shown\n}\n\npublic class Tiger extends Animal\n{\n    public void roar()\n    { /* implementation not shown */ }\n    // constructors and other methods not shown\n}\n</code></pre>\n<p>Assume that the following declaration appears in a client class.</p>\n<pre><code> Animal a = new Tiger();\n</code></pre>\n<p>Which of the following statements would compile without error?</p>\n<p>I. a.eat();</p>\n<p>II. a.roar();</p>\n<p>III. ((Tiger) a).roar();</p>\n<p>I'm assuming that instantiating 'a' as a new Tiger() would allow 'a' to access the roar() method. But I'm obviously wrong. I think I'm not understanding the polymorphic nature of the problem well.</p>\n"},{"tags":["java","apache-camel","spring-camel"],"answers":[{"tags":[],"owner":{"account_id":11698990,"reputation":27,"user_id":13394859,"display_name":"Guillermo Contreras Gomez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648057175,"creation_date":1648057175,"answer_id":71591686,"question_id":71591283,"body_markdown":"The solution is to remove the headers except the ones you need.\r\n  \r\n\r\n    &lt;removeHeaders pattern=&quot;*&quot; excludePattern=&quot;mail&quot; /&gt;\r\n\r\nbefore \r\n\r\n    &lt;setHeader name=&quot;Content-Type&quot;&gt;&lt;constant&gt;application/json&lt;/constant&gt;&lt;/setHeader&gt;","title":"consume external api from apache camel XML","body":"<p>The solution is to remove the headers except the ones you need.</p>\n<pre><code>&lt;removeHeaders pattern=&quot;*&quot; excludePattern=&quot;mail&quot; /&gt;\n</code></pre>\n<p>before</p>\n<pre><code>&lt;setHeader name=&quot;Content-Type&quot;&gt;&lt;constant&gt;application/json&lt;/constant&gt;&lt;/setHeader&gt;\n</code></pre>\n"}],"owner":{"account_id":11698990,"reputation":27,"user_id":13394859,"display_name":"Guillermo Contreras Gomez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1648057175,"creation_date":1648055395,"question_id":71591283,"body_markdown":"I have a service with apache camel that must verify an email and it is this:\r\n\r\n    http://localhost:8017/camel/v1/common-validations/email/mymail@gmail.com\r\n\r\nThis service calls an api that is on another server and the url is this:\r\n\r\n    http://services/api/Validations/ValidarMail\r\n\r\nWhen I consume this api, it returns the following error:\r\n\r\n    [Exception: java.lang.IllegalArgumentException: Invalid uri: /camel/v1/common-\r\n    validations/email/mymail@gmail.com/v1/common-validations/email/mymail@gmail.com.If you are\r\n    forwarding/bridging http endpoints, then enable the bridgeEndpoint option on the endpoint:\r\n    http://services/api/Validations/ValidarMail]\r\n\r\n  \r\n\r\nIt&#39;s like repeating part of the route:\r\n\r\n    Invalid uri: /camel/v1/common-validations/email/mymail@gmail.com/v1/common-validations/email/mymail@gmail.com\r\n\r\nbridgeEndpoint must be false because otherwise it adds /camel/v1/common-validations/email/mymail@gmail.com to http://services/api/Validations/ValidarMail and it would look like this\r\nhttp://servicios/api/Validaciones/ValidarCorreo/camel/v1/validaciones-comunes/email/micoreo@gmail.com\r\n\r\nPart of the code I use is the following:\r\n\r\n\r\n           &lt;rest path=&quot;/v1/validaciones-comunes/email&quot;&gt;\r\n            &lt;get uri=&quot;/{correo}&quot; produces=&quot;application/json&quot;  outType=&quot;Boolean&quot;&gt;\r\n                &lt;to uri=&quot;direct:validaEmail&quot; /&gt;\r\n            &lt;/get&gt;\r\n        &lt;/rest&gt;\r\n        &lt;route id=&quot;validaEmail&quot; streamCache=&quot;true&quot; &gt;\r\n            &lt;from uri=&quot;direct:validaEmail&quot;/&gt;\r\n            \r\n             &lt;log loggingLevel=&quot;INFO&quot; message=&quot;|*****===&gt;ResponseBody: ${body}&quot;/&gt;\r\n                &lt;log loggingLevel=&quot;INFO&quot; message=&quot;|*****===&gt;ResponseHeaders.email: ${in.headers.correo}&quot;/&gt;\r\n            &lt;doTry&gt;               \r\n                &lt;setHeader name=&quot;Content-Type&quot;&gt;&lt;constant&gt;application/json&lt;/constant&gt;&lt;/setHeader&gt;\r\n                &lt;setHeader name=&quot;CamelHttpMethod&quot;&gt;&lt;constant&gt;POST&lt;/constant&gt;&lt;/setHeader&gt;\r\n                &lt;setBody&gt;&lt;simple&gt;${in.headers.correo}&lt;/simple&gt;&lt;/setBody&gt;\r\n                &lt;toD uri=&quot;http://servicios/api/Validaciones/ValidarCorreo/&quot; /&gt;\r\n                 &lt;setBody&gt;&lt;simple&gt;${body}&lt;/simple&gt;&lt;/setBody&gt;\r\n                &lt;doCatch&gt;\r\n                    &lt;exception&gt;java.lang.Exception&lt;/exception&gt;\r\n                    &lt;log logName=&quot;cl.backend&quot; loggingLevel=&quot;ERROR&quot; message=&quot;Excepcion: ${exception}&quot; /&gt;\r\n                     &lt;setBody&gt;&lt;simple&gt;${exception}&lt;/simple&gt;&lt;/setBody&gt;\r\n                &lt;/doCatch&gt;\r\n\r\n            &lt;/doTry&gt;\r\n        &lt;/route&gt;\r\n\r\nIf you could help me identify the problem I would greatly appreciate it.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vktZ6.png","title":"consume external api from apache camel XML","body":"<p>I have a service with apache camel that must verify an email and it is this:</p>\n<pre><code>http://localhost:8017/camel/v1/common-validations/email/mymail@gmail.com\n</code></pre>\n<p>This service calls an api that is on another server and the url is this:</p>\n<pre><code>http://services/api/Validations/ValidarMail\n</code></pre>\n<p>When I consume this api, it returns the following error:</p>\n<pre><code>[Exception: java.lang.IllegalArgumentException: Invalid uri: /camel/v1/common-\nvalidations/email/mymail@gmail.com/v1/common-validations/email/mymail@gmail.com.If you are\nforwarding/bridging http endpoints, then enable the bridgeEndpoint option on the endpoint:\nhttp://services/api/Validations/ValidarMail]\n</code></pre>\n<p>It's like repeating part of the route:</p>\n<pre><code>Invalid uri: /camel/v1/common-validations/email/mymail@gmail.com/v1/common-validations/email/mymail@gmail.com\n</code></pre>\n<p>bridgeEndpoint must be false because otherwise it adds /camel/v1/common-validations/email/mymail@gmail.com to http://services/api/Validations/ValidarMail and it would look like this\nhttp://servicios/api/Validaciones/ValidarCorreo/camel/v1/validaciones-comunes/email/micoreo@gmail.com</p>\n<p>Part of the code I use is the following:</p>\n<pre><code>       &lt;rest path=&quot;/v1/validaciones-comunes/email&quot;&gt;\n        &lt;get uri=&quot;/{correo}&quot; produces=&quot;application/json&quot;  outType=&quot;Boolean&quot;&gt;\n            &lt;to uri=&quot;direct:validaEmail&quot; /&gt;\n        &lt;/get&gt;\n    &lt;/rest&gt;\n    &lt;route id=&quot;validaEmail&quot; streamCache=&quot;true&quot; &gt;\n        &lt;from uri=&quot;direct:validaEmail&quot;/&gt;\n        \n         &lt;log loggingLevel=&quot;INFO&quot; message=&quot;|*****===&gt;ResponseBody: ${body}&quot;/&gt;\n            &lt;log loggingLevel=&quot;INFO&quot; message=&quot;|*****===&gt;ResponseHeaders.email: ${in.headers.correo}&quot;/&gt;\n        &lt;doTry&gt;               \n            &lt;setHeader name=&quot;Content-Type&quot;&gt;&lt;constant&gt;application/json&lt;/constant&gt;&lt;/setHeader&gt;\n            &lt;setHeader name=&quot;CamelHttpMethod&quot;&gt;&lt;constant&gt;POST&lt;/constant&gt;&lt;/setHeader&gt;\n            &lt;setBody&gt;&lt;simple&gt;${in.headers.correo}&lt;/simple&gt;&lt;/setBody&gt;\n            &lt;toD uri=&quot;http://servicios/api/Validaciones/ValidarCorreo/&quot; /&gt;\n             &lt;setBody&gt;&lt;simple&gt;${body}&lt;/simple&gt;&lt;/setBody&gt;\n            &lt;doCatch&gt;\n                &lt;exception&gt;java.lang.Exception&lt;/exception&gt;\n                &lt;log logName=&quot;cl.backend&quot; loggingLevel=&quot;ERROR&quot; message=&quot;Excepcion: ${exception}&quot; /&gt;\n                 &lt;setBody&gt;&lt;simple&gt;${exception}&lt;/simple&gt;&lt;/setBody&gt;\n            &lt;/doCatch&gt;\n\n        &lt;/doTry&gt;\n    &lt;/route&gt;\n</code></pre>\n<p>If you could help me identify the problem I would greatly appreciate it.</p>\n"},{"tags":["java","unit-testing","spring-boot"],"comments":[{"owner":{"account_id":5715909,"reputation":15062,"user_id":4516110,"accept_rate":81,"display_name":"Mehraj Malik"},"score":0,"creation_date":1515155624,"post_id":48113464,"comment_id":83203137,"body_markdown":"Please add your `SampleClass`.","body":"Please add your <code>SampleClass</code>."},{"owner":{"account_id":5493520,"reputation":9833,"user_id":4365460,"accept_rate":90,"display_name":"Roland Weisleder"},"score":2,"creation_date":1515155876,"post_id":48113464,"comment_id":83203290,"body_markdown":"Methods annotated with `@Bean` should return an object, namely the new Spring Bean.","body":"Methods annotated with <code>@Bean</code> should return an object, namely the new Spring Bean."},{"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"score":0,"creation_date":1515171004,"post_id":48113464,"comment_id":83212162,"body_markdown":"Spring injects your autowired beans. If you don&#39;t run with the spring runner there&#39;s nothing there to inject things so the members remain at their default values (null). Please show more of the exception when you run with spring. It&#39;s likely a classpath or property-not-found fail as the root cause.","body":"Spring injects your autowired beans. If you don&#39;t run with the spring runner there&#39;s nothing there to inject things so the members remain at their default values (null). Please show more of the exception when you run with spring. It&#39;s likely a classpath or property-not-found fail as the root cause."}],"answers":[{"tags":[],"owner":{"account_id":5858163,"reputation":1059,"user_id":4614788,"accept_rate":96,"display_name":"Glenn Van Schil"},"down_vote_count":8,"up_vote_count":4,"is_accepted":false,"score":-4,"last_activity_date":1515157243,"creation_date":1515156582,"answer_id":48114012,"question_id":48113464,"body_markdown":"It&#39;s best to keep Spring **out** of your [**unit**](https://stackoverflow.com/a/281841/4614788) tests as much as possible. Instead of Autowiring  your bean just create them as a regular object\r\n\r\n    OtherSampleClass otherSampleClass = mock(OtherSampleClass.class);\r\n    SampleClass sampleClass = new SampleClass(otherSampleClass);\r\n\r\nBut for this you need to use the Constructor injection instead of Field Injection which improves testability. \r\n\r\nReplace this\r\n\r\n    @Autowired\r\n    private OtherSampleClass sampleBean;\r\n\r\nWith this\r\n\r\n    private OtherSampleClass sampleBean;\r\n    \r\n    @Autowired\r\n    public SampleClass(OtherSampleClass sampleBean){\r\n        this.sampleBean = sampleBean;\r\n    }\r\n\r\nTake a look at [this](https://stackoverflow.com/a/46709383/4614788) answer for an other code example","title":"@Autowired Bean is NULL in Spring Boot Unit Test","body":"<p>It's best to keep Spring <strong>out</strong> of your <a href=\"https://stackoverflow.com/a/281841/4614788\"><strong>unit</strong></a> tests as much as possible. Instead of Autowiring  your bean just create them as a regular object</p>\n\n<pre><code>OtherSampleClass otherSampleClass = mock(OtherSampleClass.class);\nSampleClass sampleClass = new SampleClass(otherSampleClass);\n</code></pre>\n\n<p>But for this you need to use the Constructor injection instead of Field Injection which improves testability. </p>\n\n<p>Replace this</p>\n\n<pre><code>@Autowired\nprivate OtherSampleClass sampleBean;\n</code></pre>\n\n<p>With this</p>\n\n<pre><code>private OtherSampleClass sampleBean;\n\n@Autowired\npublic SampleClass(OtherSampleClass sampleBean){\n    this.sampleBean = sampleBean;\n}\n</code></pre>\n\n<p>Take a look at <a href=\"https://stackoverflow.com/a/46709383/4614788\">this</a> answer for an other code example</p>\n"},{"tags":[],"owner":{"account_id":4851847,"reputation":625,"user_id":3913948,"accept_rate":100,"display_name":"AdamIJK"},"down_vote_count":5,"up_vote_count":0,"is_accepted":false,"score":-5,"last_activity_date":1515157611,"creation_date":1515157611,"answer_id":48114279,"question_id":48113464,"body_markdown":"No need to inject (`@Autowired  private SampleClass sampleClass;`) your actual class which you are testing, and remove SpringBootTest annotation,&lt;br&gt; SpringBootTest annotation used for integration test cases.&lt;br&gt;\r\nfind the following code will help you.\r\n\r\n    @RunWith(SpringRunner.class)\r\n    public class SampleTest(){\r\n   \r\n      private SampleClass sampleClass;","title":"@Autowired Bean is NULL in Spring Boot Unit Test","body":"<p>No need to inject (<code>@Autowired  private SampleClass sampleClass;</code>) your actual class which you are testing, and remove SpringBootTest annotation,<br> SpringBootTest annotation used for integration test cases.<br>\nfind the following code will help you.</p>\n\n<pre><code>@RunWith(SpringRunner.class)\npublic class SampleTest(){\n\n  private SampleClass sampleClass;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3454239,"reputation":3653,"user_id":2893073,"accept_rate":67,"display_name":"Eddy"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1576133195,"creation_date":1576133195,"answer_id":59299103,"question_id":48113464,"body_markdown":"The following config works for me.\r\n\r\nFile: `build.gradle`\r\n\r\n    testCompile(&quot;junit:junit:4.12&quot;)\r\n    testCompile(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\r\n\r\nFile: `MYServiceTest.java`\r\n\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    import org.springframework.test.context.ActiveProfiles;\r\n    import org.springframework.test.context.junit4.SpringRunner;\r\n    \r\n    @SpringBootTest(classes = Application.class,\r\n        webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n    @ActiveProfiles(&quot;test&quot;)\r\n    @RunWith(SpringRunner.class)\r\n    public class MYServiceTest {\r\n    \r\n        @Autowired\r\n        private MYService myService;\r\n    \r\n        @Test\r\n        public void test_method() {\r\n            myService.run();\r\n        }\r\n    }","title":"@Autowired Bean is NULL in Spring Boot Unit Test","body":"<p>The following config works for me.</p>\n\n<p>File: <code>build.gradle</code></p>\n\n<pre><code>testCompile(\"junit:junit:4.12\")\ntestCompile(\"org.springframework.boot:spring-boot-starter-test\")\n</code></pre>\n\n<p>File: <code>MYServiceTest.java</code></p>\n\n<pre><code>import org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.ActiveProfiles;\nimport org.springframework.test.context.junit4.SpringRunner;\n\n@SpringBootTest(classes = Application.class,\n    webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@ActiveProfiles(\"test\")\n@RunWith(SpringRunner.class)\npublic class MYServiceTest {\n\n    @Autowired\n    private MYService myService;\n\n    @Test\n    public void test_method() {\n        myService.run();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":7270869,"reputation":359,"user_id":5543991,"accept_rate":33,"display_name":"alwaysStuckJava"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49723,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"answer_count":3,"score":29,"last_activity_date":1648057066,"creation_date":1515154560,"question_id":48113464,"body_markdown":"I am new to `JUnit` and automated testing and really want to get into automating my tests. This is a Spring Boot application. I have used Java Based Annotation style instead of XML based configuration.\r\n\r\nI have a test class in which I&#39;d like to test a method which retrieves a response based on a users&#39; input.\r\n\r\nTesting class:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n    public class SampleTest(){\r\n    \r\n      @Autowired\r\n      private SampleClass sampleClass;\r\n      \r\n      @Test\r\n      public void testInput(){\r\n      \r\n      String sampleInput = &quot;hi&quot;;\r\n      \r\n      String actualResponse = sampleClass.retrieveResponse(sampleInput);\r\n      \r\n      assertEquals(&quot;You typed hi&quot;, actualResponse);\r\n      \r\n      }\r\n    }\r\n\r\nInside my &quot;SampleClass&quot; I have autowired a bean like this. \r\n\r\n    @Autowired\r\n    private OtherSampleClass sampleBean;\r\n\r\nInside my &quot;OtherSampleClass&quot; I have annotated a method like so: \r\n    \r\n    @Bean(name = &quot;sampleBean&quot;)\r\n    public void someMethod(){\r\n    ....\r\n    }\r\n\r\n\r\nThe issue I&#39;m having is when I try to run the test without the `@RunWith` and `@SpringBootTest` annotations when I try to run the test my variables annotated `@Autowired` are null. And when I try to run the test with those annotations RunWith &amp; SpringBootTest then I get an \r\n\r\n&gt; IllegalStateException caused by BeanCreationException: Error creating\r\n&gt; bean with name &quot;sampleBean&quot; AND failure to load application context\r\n&gt; caused by BeanInstantiationException.\r\n\r\nThe code works &#39;properly&#39; when I try to use it as a user would so I can always test this way but I think automated tests would be good for the longevity of the program. \r\n\r\nI have used the [Spring Boot Testing Docs][1] to assist me in this.\r\n\r\n    \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html","title":"@Autowired Bean is NULL in Spring Boot Unit Test","body":"<p>I am new to <code>JUnit</code> and automated testing and really want to get into automating my tests. This is a Spring Boot application. I have used Java Based Annotation style instead of XML based configuration.</p>\n\n<p>I have a test class in which I'd like to test a method which retrieves a response based on a users' input.</p>\n\n<p>Testing class:</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class SampleTest(){\n\n  @Autowired\n  private SampleClass sampleClass;\n\n  @Test\n  public void testInput(){\n\n  String sampleInput = \"hi\";\n\n  String actualResponse = sampleClass.retrieveResponse(sampleInput);\n\n  assertEquals(\"You typed hi\", actualResponse);\n\n  }\n}\n</code></pre>\n\n<p>Inside my \"SampleClass\" I have autowired a bean like this. </p>\n\n<pre><code>@Autowired\nprivate OtherSampleClass sampleBean;\n</code></pre>\n\n<p>Inside my \"OtherSampleClass\" I have annotated a method like so: </p>\n\n<pre><code>@Bean(name = \"sampleBean\")\npublic void someMethod(){\n....\n}\n</code></pre>\n\n<p>The issue I'm having is when I try to run the test without the <code>@RunWith</code> and <code>@SpringBootTest</code> annotations when I try to run the test my variables annotated <code>@Autowired</code> are null. And when I try to run the test with those annotations RunWith &amp; SpringBootTest then I get an </p>\n\n<blockquote>\n  <p>IllegalStateException caused by BeanCreationException: Error creating\n  bean with name \"sampleBean\" AND failure to load application context\n  caused by BeanInstantiationException.</p>\n</blockquote>\n\n<p>The code works 'properly' when I try to use it as a user would so I can always test this way but I think automated tests would be good for the longevity of the program. </p>\n\n<p>I have used the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html\" rel=\"noreferrer\">Spring Boot Testing Docs</a> to assist me in this.</p>\n"},{"tags":["java","matrix"],"answers":[{"tags":[],"owner":{"account_id":5734600,"reputation":3267,"user_id":4529168,"display_name":"jiwopene"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1648056972,"creation_date":1648056972,"answer_id":71591646,"question_id":71591410,"body_markdown":"First, store the “matrix” (actually a two-dimensional array) in a variable:\r\n\r\n    String[][] texts = { { &quot;Ora&quot;, &quot;Giorno 1&quot;, … }, … };\r\n\r\nAnd then, you can use it in a for loop:\r\n\r\n```\r\nfor (int x = 1; x &lt; 8; x++) {\r\n    for (int y = 1; y &lt; texts.length; y++) {\r\n        texts[y][x] = &quot;Your Text Here&quot;;\r\n    }\r\n}\r\n```\r\n\r\nAnd finally, you can pass it to the method as an argument:\r\n\r\n    new DefaultTableModel(texts, new String[] { … }) { … };","title":"How can I fill an object matrix","body":"<p>First, store the “matrix” (actually a two-dimensional array) in a variable:</p>\n<pre><code>String[][] texts = { { &quot;Ora&quot;, &quot;Giorno 1&quot;, … }, … };\n</code></pre>\n<p>And then, you can use it in a for loop:</p>\n<pre><code>for (int x = 1; x &lt; 8; x++) {\n    for (int y = 1; y &lt; texts.length; y++) {\n        texts[y][x] = &quot;Your Text Here&quot;;\n    }\n}\n</code></pre>\n<p>And finally, you can pass it to the method as an argument:</p>\n<pre><code>new DefaultTableModel(texts, new String[] { … }) { … };\n</code></pre>\n"}],"owner":{"account_id":24659302,"reputation":3,"user_id":18555685,"display_name":"ALESSANDRO CACCIOLA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71591646,"answer_count":1,"score":0,"last_activity_date":1648056972,"creation_date":1648055926,"question_id":71591410,"body_markdown":"I have an object matrix, and I have to fill it with string. How can I do this? Let me explain well, I have declared a matrix of objects of fixed size, now I have to fill it through for loops, how can I access the cells of the matrix. I put the code of matrix down. Sorry but is in Italian. Giorno = day, ore = Hour\r\n\r\n```java\r\ntabMedie = new JTable();\r\ntabMedie.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);\r\ntabMedie.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 10));\r\ntabMedie.setModel(new DefaultTableModel(\r\n\tnew Object[][] {\r\n\t\t{&quot;Orari&quot;, &quot;Giorno 1&quot;, &quot;Giorno 2&quot;, &quot;Giorno 3&quot;, &quot;Giorno 4&quot;, &quot;Giorno 5&quot;, &quot;Giorno 6&quot;, &quot;Giorno 7&quot;},\r\n\t\t{&quot;1&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;2&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;3&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;4&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;5&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;6&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;7&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;8&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;9&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;10&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;11&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;12&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;13&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;14&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;15&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;16&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;17&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;18&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;19&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;20&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;21&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;22&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;23&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t\t{&quot;24&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\r\n\t},\r\n\tnew String[] {\r\n\t\t&quot;Ore&quot;, &quot;Giorno 1&quot;, &quot;Giorno 2&quot;, &quot;Giorno 3&quot;, &quot;Giorno 4&quot;, &quot;Giorno 5&quot;, &quot;Giorno 6&quot;, &quot;Giorno 7&quot;\r\n\t}\r\n) {\r\n\tClass[] columnTypes = new Class[] {\r\n\t\tString.class, String.class, String.class, String.class, String.class, String.class, String.class, String.class\r\n\t};\r\n\tpublic Class getColumnClass(int columnIndex) {\r\n\t\treturn columnTypes[columnIndex];\r\n\t}\r\n\tboolean[] columnEditables = new boolean[] {\r\n\t\ttrue, false, false, false, true, true, true, true\r\n\t};\r\n\tpublic boolean isCellEditable(int row, int column) {\r\n\t\treturn columnEditables[column];\r\n\t}\r\n});\r\ntabMedie.getColumnModel().getColumn(0).setResizable(false);\r\ntabMedie.getColumnModel().getColumn(1).setResizable(false);\r\ntabMedie.getColumnModel().getColumn(2).setResizable(false);\r\ntabMedie.getColumnModel().getColumn(3).setResizable(false);\r\ntabMedie.getColumnModel().getColumn(4).setResizable(false);\r\ntabMedie.getColumnModel().getColumn(5).setResizable(false);\r\ntabMedie.getColumnModel().getColumn(6).setResizable(false);\r\ntabMedie.getColumnModel().getColumn(7).setResizable(false);\r\ntabMedie.setBounds(503, 36, 662, 401);\r\nfrmTemperature.getContentPane().add(tabMedie);\r\n```","title":"How can I fill an object matrix","body":"<p>I have an object matrix, and I have to fill it with string. How can I do this? Let me explain well, I have declared a matrix of objects of fixed size, now I have to fill it through for loops, how can I access the cells of the matrix. I put the code of matrix down. Sorry but is in Italian. Giorno = day, ore = Hour</p>\n<pre class=\"lang-java prettyprint-override\"><code>tabMedie = new JTable();\ntabMedie.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);\ntabMedie.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 10));\ntabMedie.setModel(new DefaultTableModel(\n    new Object[][] {\n        {&quot;Orari&quot;, &quot;Giorno 1&quot;, &quot;Giorno 2&quot;, &quot;Giorno 3&quot;, &quot;Giorno 4&quot;, &quot;Giorno 5&quot;, &quot;Giorno 6&quot;, &quot;Giorno 7&quot;},\n        {&quot;1&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;2&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;3&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;4&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;5&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;6&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;7&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;8&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;9&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;10&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;11&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;12&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;13&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;14&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;15&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;16&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;17&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;18&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;19&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;20&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;21&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;22&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;23&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n        {&quot;24&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;},\n    },\n    new String[] {\n        &quot;Ore&quot;, &quot;Giorno 1&quot;, &quot;Giorno 2&quot;, &quot;Giorno 3&quot;, &quot;Giorno 4&quot;, &quot;Giorno 5&quot;, &quot;Giorno 6&quot;, &quot;Giorno 7&quot;\n    }\n) {\n    Class[] columnTypes = new Class[] {\n        String.class, String.class, String.class, String.class, String.class, String.class, String.class, String.class\n    };\n    public Class getColumnClass(int columnIndex) {\n        return columnTypes[columnIndex];\n    }\n    boolean[] columnEditables = new boolean[] {\n        true, false, false, false, true, true, true, true\n    };\n    public boolean isCellEditable(int row, int column) {\n        return columnEditables[column];\n    }\n});\ntabMedie.getColumnModel().getColumn(0).setResizable(false);\ntabMedie.getColumnModel().getColumn(1).setResizable(false);\ntabMedie.getColumnModel().getColumn(2).setResizable(false);\ntabMedie.getColumnModel().getColumn(3).setResizable(false);\ntabMedie.getColumnModel().getColumn(4).setResizable(false);\ntabMedie.getColumnModel().getColumn(5).setResizable(false);\ntabMedie.getColumnModel().getColumn(6).setResizable(false);\ntabMedie.getColumnModel().getColumn(7).setResizable(false);\ntabMedie.setBounds(503, 36, 662, 401);\nfrmTemperature.getContentPane().add(tabMedie);\n</code></pre>\n"},{"tags":["java","post","mulesoft","amazon-mws","mule4"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1647955959,"post_id":71572001,"comment_id":126497218,"body_markdown":"Hi @Muhammed. You should include in your question the actual error details you are experiencing. Kindly read https://stackoverflow.com/help/how-to-ask for more tips on how to improve your question.\nI see that you are doing this is Java code, so there is no Mule Runtime dependencies here, it is a pure Java and Amazon question. Any reasons not to use Mule HTTP Request connector? \nNote that the product is Mule, not MuleSoft. MuleSoft is the company&#39;s name. Please share the version of Mule used to execute the project in Studio, and the version of the Java module.","body":"Hi @Muhammed. You should include in your question the actual error details you are experiencing. Kindly read <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> for more tips on how to improve your question. I see that you are doing this is Java code, so there is no Mule Runtime dependencies here, it is a pure Java and Amazon question. Any reasons not to use Mule HTTP Request connector?  Note that the product is Mule, not MuleSoft. MuleSoft is the company&#39;s name. Please share the version of Mule used to execute the project in Studio, and the version of the Java module."}],"answers":[{"tags":[],"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647956330,"creation_date":1647956330,"answer_id":71573048,"question_id":71572001,"body_markdown":"Since you are apparently executing in some release of Mule 4, you could build the same URL using DataWeave builtin functions. \r\n\r\nFor example the [HMACWith()][1] function will create the signature in one step.\r\n\r\nUnless you have hard requirements to implement this in Java, you can just use the [HTTP Request][2] operation you can just add the query parameters you build in DataWeave expressions and it will take care of encoding and all the implementation details of performing the HTTP request.\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.mulesoft.com/dataweave/2.4/dw-crypto-functions-hmacwith\r\n  [2]: https://docs.mulesoft.com/http-connector/1.6/http-request-ref","title":"How to post a request to Amazon MWS / GetMatchingProductForId","body":"<p>Since you are apparently executing in some release of Mule 4, you could build the same URL using DataWeave builtin functions.</p>\n<p>For example the <a href=\"https://docs.mulesoft.com/dataweave/2.4/dw-crypto-functions-hmacwith\" rel=\"nofollow noreferrer\">HMACWith()</a> function will create the signature in one step.</p>\n<p>Unless you have hard requirements to implement this in Java, you can just use the <a href=\"https://docs.mulesoft.com/http-connector/1.6/http-request-ref\" rel=\"nofollow noreferrer\">HTTP Request</a> operation you can just add the query parameters you build in DataWeave expressions and it will take care of encoding and all the implementation details of performing the HTTP request.</p>\n"}],"owner":{"account_id":24644063,"reputation":1,"user_id":18541929,"display_name":"Muhammed SARIKAYA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1648056853,"creation_date":1647951770,"question_id":71572001,"body_markdown":"I want to get the details (Price, sorting ...) of the products that I have been querying for a long time from amazon. But I was only able to generate the following answer with the following koc. The problems I encountered are as follows;\r\n\r\n  1- I am getting timestamp error.\r\n\r\n  2- **I was unable to POST the message below.**\r\n\r\n\r\nCan you help me with these two issues?\r\n\r\nNote: I am using Anypoint Studio 7.11.1. I can post the answer in java with https reqeuest connector.\r\n\r\nJava Code:\r\n\r\n\r\npackage com.amazonservices.mws.products;\r\n\r\n    import java.io.UnsupportedEncodingException;\r\n    import java.net.URI;\r\n    import java.net.URISyntaxException;\r\n    import java.net.URLEncoder;\r\n    import java.security.InvalidKeyException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.SignatureException;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.HashMap;\r\n    import java.util.Iterator;\r\n    import java.util.Map;\r\n    import java.util.Map.Entry;\r\n    import java.util.TreeMap;\r\n    import javax.crypto.Mac;\r\n    import javax.crypto.spec.SecretKeySpec;\r\n    import org.apache.commons.codec.binary.Base64;\r\n    import java.util.TimeZone;\r\n    import java.util.Date;\r\n    \r\n    public class signature {\r\n        private static final String CHARACTER_ENCODING = &quot;UTF-8&quot;;\r\n        final static String ALGORITHM = &quot;HmacSHA256&quot;;\r\n      \r\n        \r\n        public static void main() throws Exception {\r\n            String secretKey = &quot;***&quot;;\r\n            String serviceUrl = &quot;https://mws.amazonservices.com/&quot;;\r\n    \r\n            SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&#39;Z&#39;&quot;);\r\n            df.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n            Date date = new Date();  \r\n            String timestamp = df.format(date); \r\n            \r\n            HashMap&lt;String, String&gt; parameters = new HashMap&lt;String,String&gt;();\r\n    \r\n            parameters.put(&quot;AWSAccessKeyId&quot;, urlEncode(&quot;***&quot;));\r\n            parameters.put(&quot;Action&quot;, urlEncode(&quot;GetMatchingProductForId&quot;));\r\n    \t\tparameters.put(&quot;IdList.Id.1&quot;, urlEncode(&quot;9781933988665&quot;));\r\n    \t\tparameters.put(&quot;IdType&quot;, urlEncode(&quot;EAN&quot;));\r\n            parameters.put(&quot;SellerId&quot;, urlEncode(&quot;***&quot;));\r\n            parameters.put(&quot;SignatureMethod&quot;, urlEncode(ALGORITHM));\r\n            parameters.put(&quot;SignatureVersion&quot;, urlEncode(&quot;2&quot;));\r\n            parameters.put(&quot;Timestamp&quot;, urlEncode(timestamp));\r\n            parameters.put(&quot;Version&quot;, urlEncode(&quot;2011-10-01&quot;));\r\n    \r\n    \r\n            String formattedParameters = calculateStringToSignV2(parameters,\r\n                serviceUrl);\r\n    \r\n            String signature = sign(formattedParameters, secretKey);\r\n    \r\n            // Add signature to the parameters and display final results\r\n            parameters.put(&quot;Signature&quot;, urlEncode(signature));      \r\n            \r\n            System.out.println(calculateStringToSignV2(parameters,\r\n                serviceUrl));\r\n        }\r\n    \r\n    \r\n        private static String calculateStringToSignV2(\r\n            Map&lt;String, String&gt; parameters, String serviceUrl)\r\n                throws SignatureException, URISyntaxException {\r\n            // Sort the parameters alphabetically by storing\r\n            // in TreeMap structure\r\n            Map&lt;String, String&gt; sorted = new TreeMap&lt;String, String&gt;();\r\n            sorted.putAll(parameters);\r\n    \r\n            // Set endpoint value\r\n            URI endpoint = new URI(serviceUrl.toLowerCase());\r\n    \r\n            // Create flattened (String) representation\r\n            StringBuilder data = new StringBuilder();\r\n            //data.append(&quot;POST\\n&quot;);\r\n            data.append(endpoint.getHost());\r\n            data.append(&quot;\\n/Products/2011-10-01&quot;);\r\n            data.append(&quot;\\n&quot;);\r\n    \r\n            Iterator&lt;Entry&lt;String, String&gt;&gt; pairs =\r\n              sorted.entrySet().iterator();\r\n            while (pairs.hasNext()) {\r\n                Map.Entry&lt;String, String&gt; pair = pairs.next();\r\n                if (pair.getValue() != null) {\r\n                    data.append( pair.getKey() + &quot;=&quot; + pair.getValue());\r\n                }\r\n                else {\r\n                    data.append( pair.getKey() + &quot;=&quot;);\r\n                }\r\n    \r\n                // Delimit parameters with ampersand (&amp;)\r\n                if (pairs.hasNext()) {\r\n                    data.append( &quot;&amp;&quot;);\r\n                }\r\n            }\r\n    \r\n            return data.toString();\r\n        }\r\n    \r\n        /*\r\n         * Sign the text with the given secret key and convert to base64\r\n         */\r\n        private static String sign(String data, String secretKey)\r\n                throws NoSuchAlgorithmException, InvalidKeyException,\r\n                       IllegalStateException, UnsupportedEncodingException {\r\n            Mac mac = Mac.getInstance(ALGORITHM);\r\n            mac.init(new SecretKeySpec(secretKey.getBytes(CHARACTER_ENCODING),\r\n                ALGORITHM));\r\n            byte[] signature = mac.doFinal(data.getBytes(CHARACTER_ENCODING));\r\n            String signatureBase64 = new String(Base64.encodeBase64(signature),\r\n                CHARACTER_ENCODING);\r\n            return new String(signatureBase64);\r\n        }\r\n    \r\n        private static String urlEncode(String rawValue) {\r\n            String value = (rawValue == null) ? &quot;&quot; : rawValue;\r\n            String encoded = null;\r\n    \r\n            try {\r\n                encoded = URLEncoder.encode(value, CHARACTER_ENCODING)\r\n                    .replace(&quot;+&quot;, &quot;%20&quot;)\r\n                    .replace(&quot;*&quot;, &quot;%2A&quot;)\r\n                    .replace(&quot;%7E&quot;,&quot;~&quot;);                ;\r\n            } catch (UnsupportedEncodingException e) {\r\n                System.err.println(&quot;Unknown encoding: &quot; + CHARACTER_ENCODING);\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            return encoded;\r\n        }\r\n      }\r\n\r\nCode Output:\r\n\r\nAWSAccessKeyId=***&amp;Action=GetMatchingProductForId&amp;SellerId=***&amp;Signature=ehjKNnTB5vhrOW3J1yWSz2T7c%3D&amp;SignatureMethod=HmacSHA256&amp;SignatureVersion=2&amp;SubmittedFromDate=2013-05-01T12%3A00%3A00Z&amp;Timestamp=2013-05-02T16%3A00%3A00Z&amp;Version=2011-10-01\r\n\r\n\r\nMulesoft **Version: 7.11.1**\r\n\r\nApplication XML Detail:\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;mule xmlns:http=&quot;http://www.mulesoft.org/schema/mule/http&quot; xmlns:ee=&quot;http://www.mulesoft.org/schema/mule/ee/core&quot;\r\n    \txmlns=&quot;http://www.mulesoft.org/schema/mule/core&quot;\r\n    \txmlns:doc=&quot;http://www.mulesoft.org/schema/mule/documentation&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd\r\n    http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd\r\n    http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd&quot;&gt;\r\n    \t&lt;flow name=&quot;awsFlow&quot; doc:id=&quot;eeb85ef5-48cb-4c41-94ba-0e97a0765021&quot; &gt;\r\n    \t\t&lt;scheduler doc:name=&quot;Scheduler&quot; doc:id=&quot;f21548f8-1a12-4efa-adf8-27988ac587c5&quot; &gt;\r\n    \t\t\t&lt;scheduling-strategy &gt;\r\n    \t\t\t\t&lt;fixed-frequency /&gt;\r\n    \t\t\t&lt;/scheduling-strategy&gt;\r\n    \t\t&lt;/scheduler&gt;\r\n    \t\t&lt;ee:transform doc:name=&quot;Timestamp&quot; doc:id=&quot;457efcd6-1388-49fe-88a8-f3d781d17593&quot; &gt;\r\n    \t\t\t&lt;ee:message &gt;\r\n    \t\t\t&lt;/ee:message&gt;\r\n    \t\t\t&lt;ee:variables &gt;\r\n    \t\t\t\t&lt;ee:set-variable variableName=&quot;requestmws&quot; &gt;&lt;![CDATA[%dw 2.0\r\n    output application/json\r\n    fun getFormattedDate()=(now() &gt;&gt; &quot;UTC&quot;) as String {format: &quot;YYYY-MM-dd&quot;} ++ &quot;T&quot; ++ (now() &gt;&gt; &quot;UTC&quot;) as String {format: &quot;HH:mm:ss&quot;} ++ &quot;Z&quot;\r\n    ---\r\n    {\r\n        myDate:&quot;mws.amazonservices.com/Products/2011-10-01?AWSAccessKeyId=AKIAI56GX43PIHX4C7XA&amp;Action=GetMatchingProductForId&amp;IdList.Id.1=9781933988665&amp;IdType=EAN&amp;MarketplaceId=ATVPDKIKX0DER&amp;SellerId=A28MSXET37R4N7&amp;SignatureMethod=HmacSHA256&amp;SignatureVersion=2&amp;Version=2011-10-01&amp;Timestamp=&quot; ++ getFormattedDate() replace (&#39;:&#39;) with (&#39;%3A&#39;)\r\n    }]]&gt;&lt;/ee:set-variable&gt;\r\n    \t\t\t&lt;/ee:variables&gt;\r\n    \t\t&lt;/ee:transform&gt;\r\n    \t\t&lt;ee:transform doc:name=&quot;Transform Message&quot; doc:id=&quot;5b556411-1a0a-4d31-b536-48245baf3e0e&quot; &gt;\r\n    \t\t\t&lt;ee:message &gt;\r\n    \t\t\t&lt;/ee:message&gt;\r\n    \t\t\t&lt;ee:variables &gt;\r\n    \t\t\t\t&lt;ee:set-variable variableName=&quot;signature&quot; &gt;&lt;![CDATA[%dw 2.0\r\n    import dw::Crypto\r\n    output application/json\r\n    ---\r\n    { &quot;HMACWith&quot; : Crypto::HMACWith(&quot;c4AL2hA6TQQ+vhiAti7OHQI10g7Q9bvOzVHfHOEn&quot; as Binary, vars.requestmws.myDate as Binary, &quot;HmacSHA256&quot;) }]]&gt;&lt;/ee:set-variable&gt;\r\n    \t\t\t&lt;/ee:variables&gt;\r\n    \t\t&lt;/ee:transform&gt;\r\n    \t\t&lt;ee:transform doc:name=&quot;Transform Message&quot; doc:id=&quot;ef709e54-4f12-4db8-9088-9ccb203fda07&quot;&gt;\r\n    \t\t\t&lt;ee:message&gt;\r\n    \t\t\t\t&lt;ee:set-payload&gt;&lt;![CDATA[%dw 2.0\r\n    output application/java\r\n    ---\r\n    {\r\n    \tb : vars.requestmws.myDate ++ &quot;&amp;Signature=&quot; ++ vars.signature.HMACWith\r\n    }]]&gt;&lt;/ee:set-payload&gt;\r\n    \t\t\t&lt;/ee:message&gt;\r\n    \t\t&lt;/ee:transform&gt;\r\n    \t\t&lt;http:request method=&quot;POST&quot; doc:name=&quot;Request&quot; doc:id=&quot;9301bca2-067f-48a1-badc-4dd6c03a288d&quot; url=&#39;#[&quot;https://&quot; ++ payload.b]&#39;&gt;\r\n    \t\t\t&lt;http:headers &gt;&lt;![CDATA[#[output application/java\r\n    ---\r\n    {\r\n    \t&quot;User-Agent&quot; : &quot;Java/1.8.0_201&quot;,\r\n    \t&quot;Content-Type&quot; : &quot;text/xml&quot;\r\n    }]]]&gt;&lt;/http:headers&gt;\r\n    \t\t&lt;/http:request&gt;\r\n    \t\t&lt;error-handler &gt;\r\n    \t\t\t&lt;on-error-continue enableNotifications=&quot;true&quot; logException=&quot;true&quot; doc:name=&quot;On Error Continue&quot; doc:id=&quot;27be6630-7439-43c9-86b5-c53c6693f0c7&quot; type=&quot;ANY&quot;&gt;\r\n    \t\t\t\t&lt;logger level=&quot;INFO&quot; doc:name=&quot;Logger&quot; doc:id=&quot;077e3a7c-902a-48bc-aa8d-6a18af941487&quot; message=&quot;#[message]&quot;/&gt;\r\n    \t\t\t&lt;/on-error-continue&gt;\r\n    \t\t&lt;/error-handler&gt;\r\n    \t&lt;/flow&gt;\r\n    &lt;/mule&gt;\r\n\r\nThanks.\r\n\r\n\r\n\r\n","title":"How to post a request to Amazon MWS / GetMatchingProductForId","body":"<p>I want to get the details (Price, sorting ...) of the products that I have been querying for a long time from amazon. But I was only able to generate the following answer with the following koc. The problems I encountered are as follows;</p>\n<p>1- I am getting timestamp error.</p>\n<p>2- <strong>I was unable to POST the message below.</strong></p>\n<p>Can you help me with these two issues?</p>\n<p>Note: I am using Anypoint Studio 7.11.1. I can post the answer in java with https reqeuest connector.</p>\n<p>Java Code:</p>\n<p>package com.amazonservices.mws.products;</p>\n<pre><code>import java.io.UnsupportedEncodingException;\nimport java.net.URI;\nimport java.net.URISyntaxException;\nimport java.net.URLEncoder;\nimport java.security.InvalidKeyException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.SignatureException;\nimport java.text.SimpleDateFormat;\nimport java.util.HashMap;\nimport java.util.Iterator;\nimport java.util.Map;\nimport java.util.Map.Entry;\nimport java.util.TreeMap;\nimport javax.crypto.Mac;\nimport javax.crypto.spec.SecretKeySpec;\nimport org.apache.commons.codec.binary.Base64;\nimport java.util.TimeZone;\nimport java.util.Date;\n\npublic class signature {\n    private static final String CHARACTER_ENCODING = &quot;UTF-8&quot;;\n    final static String ALGORITHM = &quot;HmacSHA256&quot;;\n  \n    \n    public static void main() throws Exception {\n        String secretKey = &quot;***&quot;;\n        String serviceUrl = &quot;https://mws.amazonservices.com/&quot;;\n\n        SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss'Z'&quot;);\n        df.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\n        Date date = new Date();  \n        String timestamp = df.format(date); \n        \n        HashMap&lt;String, String&gt; parameters = new HashMap&lt;String,String&gt;();\n\n        parameters.put(&quot;AWSAccessKeyId&quot;, urlEncode(&quot;***&quot;));\n        parameters.put(&quot;Action&quot;, urlEncode(&quot;GetMatchingProductForId&quot;));\n        parameters.put(&quot;IdList.Id.1&quot;, urlEncode(&quot;9781933988665&quot;));\n        parameters.put(&quot;IdType&quot;, urlEncode(&quot;EAN&quot;));\n        parameters.put(&quot;SellerId&quot;, urlEncode(&quot;***&quot;));\n        parameters.put(&quot;SignatureMethod&quot;, urlEncode(ALGORITHM));\n        parameters.put(&quot;SignatureVersion&quot;, urlEncode(&quot;2&quot;));\n        parameters.put(&quot;Timestamp&quot;, urlEncode(timestamp));\n        parameters.put(&quot;Version&quot;, urlEncode(&quot;2011-10-01&quot;));\n\n\n        String formattedParameters = calculateStringToSignV2(parameters,\n            serviceUrl);\n\n        String signature = sign(formattedParameters, secretKey);\n\n        // Add signature to the parameters and display final results\n        parameters.put(&quot;Signature&quot;, urlEncode(signature));      \n        \n        System.out.println(calculateStringToSignV2(parameters,\n            serviceUrl));\n    }\n\n\n    private static String calculateStringToSignV2(\n        Map&lt;String, String&gt; parameters, String serviceUrl)\n            throws SignatureException, URISyntaxException {\n        // Sort the parameters alphabetically by storing\n        // in TreeMap structure\n        Map&lt;String, String&gt; sorted = new TreeMap&lt;String, String&gt;();\n        sorted.putAll(parameters);\n\n        // Set endpoint value\n        URI endpoint = new URI(serviceUrl.toLowerCase());\n\n        // Create flattened (String) representation\n        StringBuilder data = new StringBuilder();\n        //data.append(&quot;POST\\n&quot;);\n        data.append(endpoint.getHost());\n        data.append(&quot;\\n/Products/2011-10-01&quot;);\n        data.append(&quot;\\n&quot;);\n\n        Iterator&lt;Entry&lt;String, String&gt;&gt; pairs =\n          sorted.entrySet().iterator();\n        while (pairs.hasNext()) {\n            Map.Entry&lt;String, String&gt; pair = pairs.next();\n            if (pair.getValue() != null) {\n                data.append( pair.getKey() + &quot;=&quot; + pair.getValue());\n            }\n            else {\n                data.append( pair.getKey() + &quot;=&quot;);\n            }\n\n            // Delimit parameters with ampersand (&amp;)\n            if (pairs.hasNext()) {\n                data.append( &quot;&amp;&quot;);\n            }\n        }\n\n        return data.toString();\n    }\n\n    /*\n     * Sign the text with the given secret key and convert to base64\n     */\n    private static String sign(String data, String secretKey)\n            throws NoSuchAlgorithmException, InvalidKeyException,\n                   IllegalStateException, UnsupportedEncodingException {\n        Mac mac = Mac.getInstance(ALGORITHM);\n        mac.init(new SecretKeySpec(secretKey.getBytes(CHARACTER_ENCODING),\n            ALGORITHM));\n        byte[] signature = mac.doFinal(data.getBytes(CHARACTER_ENCODING));\n        String signatureBase64 = new String(Base64.encodeBase64(signature),\n            CHARACTER_ENCODING);\n        return new String(signatureBase64);\n    }\n\n    private static String urlEncode(String rawValue) {\n        String value = (rawValue == null) ? &quot;&quot; : rawValue;\n        String encoded = null;\n\n        try {\n            encoded = URLEncoder.encode(value, CHARACTER_ENCODING)\n                .replace(&quot;+&quot;, &quot;%20&quot;)\n                .replace(&quot;*&quot;, &quot;%2A&quot;)\n                .replace(&quot;%7E&quot;,&quot;~&quot;);                ;\n        } catch (UnsupportedEncodingException e) {\n            System.err.println(&quot;Unknown encoding: &quot; + CHARACTER_ENCODING);\n            e.printStackTrace();\n        }\n\n        return encoded;\n    }\n  }\n</code></pre>\n<p>Code Output:</p>\n<p>AWSAccessKeyId=<em><strong>&amp;Action=GetMatchingProductForId&amp;SellerId=</strong></em>&amp;Signature=ehjKNnTB5vhrOW3J1yWSz2T7c%3D&amp;SignatureMethod=HmacSHA256&amp;SignatureVersion=2&amp;SubmittedFromDate=2013-05-01T12%3A00%3A00Z&amp;Timestamp=2013-05-02T16%3A00%3A00Z&amp;Version=2011-10-01</p>\n<p>Mulesoft <strong>Version: 7.11.1</strong></p>\n<p>Application XML Detail:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;mule xmlns:http=&quot;http://www.mulesoft.org/schema/mule/http&quot; xmlns:ee=&quot;http://www.mulesoft.org/schema/mule/ee/core&quot;\n    xmlns=&quot;http://www.mulesoft.org/schema/mule/core&quot;\n    xmlns:doc=&quot;http://www.mulesoft.org/schema/mule/documentation&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd\nhttp://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd\nhttp://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd&quot;&gt;\n    &lt;flow name=&quot;awsFlow&quot; doc:id=&quot;eeb85ef5-48cb-4c41-94ba-0e97a0765021&quot; &gt;\n        &lt;scheduler doc:name=&quot;Scheduler&quot; doc:id=&quot;f21548f8-1a12-4efa-adf8-27988ac587c5&quot; &gt;\n            &lt;scheduling-strategy &gt;\n                &lt;fixed-frequency /&gt;\n            &lt;/scheduling-strategy&gt;\n        &lt;/scheduler&gt;\n        &lt;ee:transform doc:name=&quot;Timestamp&quot; doc:id=&quot;457efcd6-1388-49fe-88a8-f3d781d17593&quot; &gt;\n            &lt;ee:message &gt;\n            &lt;/ee:message&gt;\n            &lt;ee:variables &gt;\n                &lt;ee:set-variable variableName=&quot;requestmws&quot; &gt;&lt;![CDATA[%dw 2.0\noutput application/json\nfun getFormattedDate()=(now() &gt;&gt; &quot;UTC&quot;) as String {format: &quot;YYYY-MM-dd&quot;} ++ &quot;T&quot; ++ (now() &gt;&gt; &quot;UTC&quot;) as String {format: &quot;HH:mm:ss&quot;} ++ &quot;Z&quot;\n---\n{\n    myDate:&quot;mws.amazonservices.com/Products/2011-10-01?AWSAccessKeyId=AKIAI56GX43PIHX4C7XA&amp;Action=GetMatchingProductForId&amp;IdList.Id.1=9781933988665&amp;IdType=EAN&amp;MarketplaceId=ATVPDKIKX0DER&amp;SellerId=A28MSXET37R4N7&amp;SignatureMethod=HmacSHA256&amp;SignatureVersion=2&amp;Version=2011-10-01&amp;Timestamp=&quot; ++ getFormattedDate() replace (':') with ('%3A')\n}]]&gt;&lt;/ee:set-variable&gt;\n            &lt;/ee:variables&gt;\n        &lt;/ee:transform&gt;\n        &lt;ee:transform doc:name=&quot;Transform Message&quot; doc:id=&quot;5b556411-1a0a-4d31-b536-48245baf3e0e&quot; &gt;\n            &lt;ee:message &gt;\n            &lt;/ee:message&gt;\n            &lt;ee:variables &gt;\n                &lt;ee:set-variable variableName=&quot;signature&quot; &gt;&lt;![CDATA[%dw 2.0\nimport dw::Crypto\noutput application/json\n---\n{ &quot;HMACWith&quot; : Crypto::HMACWith(&quot;c4AL2hA6TQQ+vhiAti7OHQI10g7Q9bvOzVHfHOEn&quot; as Binary, vars.requestmws.myDate as Binary, &quot;HmacSHA256&quot;) }]]&gt;&lt;/ee:set-variable&gt;\n            &lt;/ee:variables&gt;\n        &lt;/ee:transform&gt;\n        &lt;ee:transform doc:name=&quot;Transform Message&quot; doc:id=&quot;ef709e54-4f12-4db8-9088-9ccb203fda07&quot;&gt;\n            &lt;ee:message&gt;\n                &lt;ee:set-payload&gt;&lt;![CDATA[%dw 2.0\noutput application/java\n---\n{\n    b : vars.requestmws.myDate ++ &quot;&amp;Signature=&quot; ++ vars.signature.HMACWith\n}]]&gt;&lt;/ee:set-payload&gt;\n            &lt;/ee:message&gt;\n        &lt;/ee:transform&gt;\n        &lt;http:request method=&quot;POST&quot; doc:name=&quot;Request&quot; doc:id=&quot;9301bca2-067f-48a1-badc-4dd6c03a288d&quot; url='#[&quot;https://&quot; ++ payload.b]'&gt;\n            &lt;http:headers &gt;&lt;![CDATA[#[output application/java\n---\n{\n    &quot;User-Agent&quot; : &quot;Java/1.8.0_201&quot;,\n    &quot;Content-Type&quot; : &quot;text/xml&quot;\n}]]]&gt;&lt;/http:headers&gt;\n        &lt;/http:request&gt;\n        &lt;error-handler &gt;\n            &lt;on-error-continue enableNotifications=&quot;true&quot; logException=&quot;true&quot; doc:name=&quot;On Error Continue&quot; doc:id=&quot;27be6630-7439-43c9-86b5-c53c6693f0c7&quot; type=&quot;ANY&quot;&gt;\n                &lt;logger level=&quot;INFO&quot; doc:name=&quot;Logger&quot; doc:id=&quot;077e3a7c-902a-48bc-aa8d-6a18af941487&quot; message=&quot;#[message]&quot;/&gt;\n            &lt;/on-error-continue&gt;\n        &lt;/error-handler&gt;\n    &lt;/flow&gt;\n&lt;/mule&gt;\n</code></pre>\n<p>Thanks.</p>\n"},{"tags":["java","spring","junit"],"comments":[{"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"score":0,"creation_date":1373662509,"post_id":17623694,"comment_id":25657164,"body_markdown":"Is `MyDao` included in the scan path?","body":"Is <code>MyDao</code> included in the scan path?"},{"owner":{"account_id":353069,"reputation":7200,"user_id":690553,"accept_rate":76,"display_name":"Amir Pashazadeh"},"score":0,"creation_date":1373663693,"post_id":17623694,"comment_id":25657641,"body_markdown":"What about `&lt;context:annotation-drivern/&gt;`? Do you have it your XMLs?","body":"What about <code>&lt;context:annotation-drivern&#47;&gt;</code>? Do you have it your XMLs?"},{"owner":{"account_id":2119667,"reputation":7639,"user_id":1883212,"accept_rate":14,"display_name":"user1883212"},"score":0,"creation_date":1373664934,"post_id":17623694,"comment_id":25658110,"body_markdown":"I have &lt;tx:annotation-driven /&gt; that is from this namespace  xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;","body":"I have &lt;tx:annotation-driven /&gt; that is from this namespace  xmlns:tx=&quot;<a href=\"http://www.springframework.org/schema/tx\" rel=\"nofollow noreferrer\">springframework.org/schema/tx</a>&quot;"},{"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"score":0,"creation_date":1667554997,"post_id":17623694,"comment_id":131198511,"body_markdown":"See https://stackoverflow.com/questions/21878714, https://stackoverflow.com/questions/56712707","body":"See <a href=\"https://stackoverflow.com/questions/21878714\">stackoverflow.com/questions/21878714</a>, <a href=\"https://stackoverflow.com/questions/56712707\">stackoverflow.com/questions/56712707</a>"}],"answers":[{"tags":[],"owner":{"account_id":2126404,"reputation":4829,"user_id":1888440,"accept_rate":67,"display_name":"robert_difalco"},"down_vote_count":2,"up_vote_count":45,"is_accepted":false,"score":43,"last_activity_date":1373662709,"creation_date":1373662709,"answer_id":17623922,"question_id":17623694,"body_markdown":"Add something like this to your root unit test class:\r\n\r\n    @RunWith( SpringJUnit4ClassRunner.class )\r\n    @ContextConfiguration\r\n\r\nThis will use the XML in your default path. If you need to specify a non-default path then you can supply a locations property to the ContextConfiguration annotation.\r\n\r\nhttp://static.springsource.org/spring/docs/2.5.6/reference/testing.html","title":"Spring not autowiring in unit tests with JUnit","body":"<p>Add something like this to your root unit test class:</p>\n\n<pre><code>@RunWith( SpringJUnit4ClassRunner.class )\n@ContextConfiguration\n</code></pre>\n\n<p>This will use the XML in your default path. If you need to specify a non-default path then you can supply a locations property to the ContextConfiguration annotation.</p>\n\n<p><a href=\"http://static.springsource.org/spring/docs/2.5.6/reference/testing.html\">http://static.springsource.org/spring/docs/2.5.6/reference/testing.html</a></p>\n"},{"tags":[],"owner":{"account_id":84846,"reputation":5030,"user_id":236936,"accept_rate":67,"display_name":"TrueDub"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1373662731,"creation_date":1373662731,"answer_id":17623926,"question_id":17623694,"body_markdown":"You need to add annotations to the Junit class, telling it to use the SpringJunitRunner. The ones you want are:\r\n\r\n    @ContextConfiguration(&quot;/test-context.xml&quot;)\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n\r\nThis tells Junit to use the test-context.xml file in same directory as your test. This file should be similar to the real context.xml you&#39;re using for spring, but pointing to test resources, naturally.","title":"Spring not autowiring in unit tests with JUnit","body":"<p>You need to add annotations to the Junit class, telling it to use the SpringJunitRunner. The ones you want are:</p>\n\n<pre><code>@ContextConfiguration(\"/test-context.xml\")\n@RunWith(SpringJUnit4ClassRunner.class)\n</code></pre>\n\n<p>This tells Junit to use the test-context.xml file in same directory as your test. This file should be similar to the real context.xml you're using for spring, but pointing to test resources, naturally.</p>\n"},{"tags":[],"owner":{"account_id":199370,"reputation":19629,"user_id":444639,"accept_rate":84,"display_name":"Rylander"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1373900617,"creation_date":1373667733,"answer_id":17624916,"question_id":17623694,"body_markdown":"You need to use the Spring JUnit runner in order to wire in Spring beans from your context. The code below assumes that you have a application context called `testContest.xml` available on the test classpath.\r\n\r\n\r\n    import org.hibernate.SessionFactory;\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.test.context.ContextConfiguration;\r\n    import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;\r\n    import org.springframework.transaction.annotation.Transactional;\r\n\r\n    import java.sql.SQLException;\r\n\r\n    import static org.hamcrest.MatcherAssert.assertThat;\r\n    import static org.hamcrest.Matchers.startsWith;\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @ContextConfiguration(locations = {&quot;classpath*:**/testContext.xml&quot;})\r\n    @Transactional\r\n    public class someDaoTest {\r\n\r\n        @Autowired\r\n        protected SessionFactory sessionFactory;\r\n\r\n        @Test\r\n        public void testDBSourceIsCorrect() throws SQLException {\r\n            String databaseProductName = sessionFactory.getCurrentSession()\r\n                    .connection()\r\n                    .getMetaData()\r\n                    .getDatabaseProductName();\r\n            assertThat(&quot;Test container is pointing at the wrong DB.&quot;, databaseProductName, startsWith(&quot;HSQL&quot;));\r\n        }\r\n    }\r\n\r\n**Note:** This works with *Spring 2.5.2* and *Hibernate 3.6.5*\r\n","title":"Spring not autowiring in unit tests with JUnit","body":"<p>You need to use the Spring JUnit runner in order to wire in Spring beans from your context. The code below assumes that you have a application context called <code>testContest.xml</code> available on the test classpath.</p>\n\n<pre><code>import org.hibernate.SessionFactory;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.junit4.SpringJUnit4ClassRunner;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.sql.SQLException;\n\nimport static org.hamcrest.MatcherAssert.assertThat;\nimport static org.hamcrest.Matchers.startsWith;\n\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = {\"classpath*:**/testContext.xml\"})\n@Transactional\npublic class someDaoTest {\n\n    @Autowired\n    protected SessionFactory sessionFactory;\n\n    @Test\n    public void testDBSourceIsCorrect() throws SQLException {\n        String databaseProductName = sessionFactory.getCurrentSession()\n                .connection()\n                .getMetaData()\n                .getDatabaseProductName();\n        assertThat(\"Test container is pointing at the wrong DB.\", databaseProductName, startsWith(\"HSQL\"));\n    }\n}\n</code></pre>\n\n<p><strong>Note:</strong> This works with <em>Spring 2.5.2</em> and <em>Hibernate 3.6.5</em></p>\n"},{"tags":[],"owner":{"account_id":204470,"reputation":8571,"user_id":452708,"accept_rate":0,"display_name":"Abhijeet"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1470147013,"creation_date":1447924678,"answer_id":33799617,"question_id":17623694,"body_markdown":"Missing Context file location in configuration can cause this, one approach to solve this:\r\n\r\n - Specifying Context file location in ContextConfiguration \r\n\r\nlike:\r\n\r\n    @ContextConfiguration(locations = { &quot;classpath:META-INF/your-spring-context.xml&quot; })\r\n\r\nMore details\r\n\r\n    @RunWith( SpringJUnit4ClassRunner.class )\r\n    @ContextConfiguration(locations = { &quot;classpath:META-INF/your-spring-context.xml&quot; })\r\n    public class UserServiceTest extends AbstractJUnit4SpringContextTests {}\r\n\r\n   Reference:[Thanks to @Xstian][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/26056103/452708","title":"Spring not autowiring in unit tests with JUnit","body":"<p>Missing Context file location in configuration can cause this, one approach to solve this:</p>\n\n<ul>\n<li>Specifying Context file location in ContextConfiguration </li>\n</ul>\n\n<p>like:</p>\n\n<pre><code>@ContextConfiguration(locations = { \"classpath:META-INF/your-spring-context.xml\" })\n</code></pre>\n\n<p>More details</p>\n\n<pre><code>@RunWith( SpringJUnit4ClassRunner.class )\n@ContextConfiguration(locations = { \"classpath:META-INF/your-spring-context.xml\" })\npublic class UserServiceTest extends AbstractJUnit4SpringContextTests {}\n</code></pre>\n\n<p>Reference:<a href=\"https://stackoverflow.com/a/26056103/452708\">Thanks to @Xstian</a></p>\n"},{"tags":[],"owner":{"account_id":11724066,"reputation":362,"user_id":8582026,"display_name":"Mcin"},"down_vote_count":4,"up_vote_count":30,"is_accepted":false,"score":26,"last_activity_date":1547814805,"creation_date":1547812107,"answer_id":54253407,"question_id":17623694,"body_markdown":"I had same problem with Spring Boot 2.1.1 and JUnit 4  \r\njust added those annotations:\r\n\r\n    @RunWith( SpringRunner.class )\r\n    @SpringBootTest\r\n\r\nand all went well. \r\n\r\n\r\nFor Junit 5:\r\n\r\n    @ExtendWith(SpringExtension.class)\r\n\r\n[source][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/junit-5-migration","title":"Spring not autowiring in unit tests with JUnit","body":"<p>I had same problem with Spring Boot 2.1.1 and JUnit 4<br>\njust added those annotations:</p>\n\n<pre><code>@RunWith( SpringRunner.class )\n@SpringBootTest\n</code></pre>\n\n<p>and all went well. </p>\n\n<p>For Junit 5:</p>\n\n<pre><code>@ExtendWith(SpringExtension.class)\n</code></pre>\n\n<p><a href=\"https://www.baeldung.com/junit-5-migration\" rel=\"noreferrer\">source</a></p>\n"},{"tags":[],"owner":{"account_id":201896,"reputation":57765,"user_id":448625,"accept_rate":96,"display_name":"Caner"},"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1612645611,"creation_date":1612645611,"answer_id":66081982,"question_id":17623694,"body_markdown":"I&#39;m using JUnit 5 and for me the problem was that I had imported `Test` from the wrong package:\r\n\r\n    import org.junit.Test;\r\n\r\nReplacing it with the following worked for me:\r\n\r\n    import org.junit.jupiter.api.Test;","title":"Spring not autowiring in unit tests with JUnit","body":"<p>I'm using JUnit 5 and for me the problem was that I had imported <code>Test</code> from the wrong package:</p>\n<pre><code>import org.junit.Test;\n</code></pre>\n<p>Replacing it with the following worked for me:</p>\n<pre><code>import org.junit.jupiter.api.Test;\n</code></pre>\n"}],"owner":{"account_id":2119667,"reputation":7639,"user_id":1883212,"accept_rate":14,"display_name":"user1883212"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":168754,"favorite_count":0,"down_vote_count":0,"up_vote_count":78,"answer_count":6,"score":78,"last_activity_date":1648056734,"creation_date":1373661709,"question_id":17623694,"body_markdown":"I test the following DAO with JUnit:\r\n\r\n    @Repository\r\n    public class MyDao {\r\n\r\n        @Autowired\r\n        private SessionFactory sessionFactory;\r\n\r\n        // Other stuff here\r\n\r\n    }\r\n\r\nAs you can see, the sessionFactory is autowired using Spring. When I run the test, sessionFactory remains null and I get a null pointer exception.\r\n\r\n\r\nThis is the sessionFactory configuration in Spring:\r\n\r\n\t&lt;bean id=&quot;sessionFactory&quot;\r\n\t\tclass=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;&gt;\r\n\t\t&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n\t\t&lt;property name=&quot;configLocation&quot;&gt;\r\n\t\t\t&lt;value&gt;classpath:hibernate.cfg.xml&lt;/value&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;configurationClass&quot;&gt;\r\n\t\t\t&lt;value&gt;org.hibernate.cfg.AnnotationConfiguration&lt;/value&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n\t\t\t&lt;props&gt;\r\n\t\t\t\t&lt;prop key=&quot;hibernate.dialect&quot;&gt;${jdbc.dialect}&lt;/prop&gt;\r\n\t\t\t\t&lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;\r\n\t\t\t&lt;/props&gt;\r\n\t\t&lt;/property&gt;\r\n\t&lt;/bean&gt;\r\n\r\nWhat&#39;s wrong? How can I enable autowiring for unit testings too?\r\n\r\nUpdate: I don&#39;t know if it&#39;s the only way to run JUnit tests, but note that I&#39;m running it in Eclipse with right-clicking on the test file and selecting &quot;run as&quot;-&gt;&quot;JUnit test&quot;","title":"Spring not autowiring in unit tests with JUnit","body":"<p>I test the following DAO with JUnit:</p>\n\n<pre><code>@Repository\npublic class MyDao {\n\n    @Autowired\n    private SessionFactory sessionFactory;\n\n    // Other stuff here\n\n}\n</code></pre>\n\n<p>As you can see, the sessionFactory is autowired using Spring. When I run the test, sessionFactory remains null and I get a null pointer exception.</p>\n\n<p>This is the sessionFactory configuration in Spring:</p>\n\n<pre><code>&lt;bean id=\"sessionFactory\"\n    class=\"org.springframework.orm.hibernate3.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;property name=\"configLocation\"&gt;\n        &lt;value&gt;classpath:hibernate.cfg.xml&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"configurationClass\"&gt;\n        &lt;value&gt;org.hibernate.cfg.AnnotationConfiguration&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"hibernate.dialect\"&gt;${jdbc.dialect}&lt;/prop&gt;\n            &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>What's wrong? How can I enable autowiring for unit testings too?</p>\n\n<p>Update: I don't know if it's the only way to run JUnit tests, but note that I'm running it in Eclipse with right-clicking on the test file and selecting \"run as\"->\"JUnit test\"</p>\n"},{"tags":["java","c++","opengl","lwjgl"],"answers":[{"tags":[],"owner":{"account_id":6630353,"reputation":5504,"user_id":8623159,"display_name":"httpdigest"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648056685,"creation_date":1505670801,"answer_id":46267135,"question_id":46255469,"body_markdown":"The exact equivalent of your GLM code would be this Java code using JOML:\r\n\r\n```java\r\npublic Matrix4f GetModel(Vector3f pos, Vector3f rot, Vector3f scale, Matrix4f parent) {\r\n  return new Matrix4f(parent)\r\n        .translate(pos)\r\n        .scale(scale)\r\n        .rotateXYZ(rot);\r\n}\r\n```\r\n\r\nUnlike C/C++, Java does not (yet) have stack allocation built into the language itself (unless optimized by HotSpot when JIT&#39;ting the bytecode). So prefer having a &quot;dest&quot;/destination/out parameter over creating a new Matrix4f instance (or modifying the `parentTransformationMatrix` matrix like you did above, because calling `mul` will modify it and not create a new Matrix4f).\r\n\r\nSo we end up with:\r\n\r\n```java\r\npublic Matrix4f GetModel(Vector3f pos, Vector3f rot, Vector3f scale, Matrix4f parent, Matrix4f dest) {\r\n  return parent.translate(pos, dest)\r\n               .scale(scale)\r\n               .rotateXYZ(rot);\r\n}\r\n```","title":"How to go from GLM to JOML (OpenGL Mathematics Libraries)","body":"<p>The exact equivalent of your GLM code would be this Java code using JOML:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Matrix4f GetModel(Vector3f pos, Vector3f rot, Vector3f scale, Matrix4f parent) {\n  return new Matrix4f(parent)\n        .translate(pos)\n        .scale(scale)\n        .rotateXYZ(rot);\n}\n</code></pre>\n<p>Unlike C/C++, Java does not (yet) have stack allocation built into the language itself (unless optimized by HotSpot when JIT'ting the bytecode). So prefer having a &quot;dest&quot;/destination/out parameter over creating a new Matrix4f instance (or modifying the <code>parentTransformationMatrix</code> matrix like you did above, because calling <code>mul</code> will modify it and not create a new Matrix4f).</p>\n<p>So we end up with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Matrix4f GetModel(Vector3f pos, Vector3f rot, Vector3f scale, Matrix4f parent, Matrix4f dest) {\n  return parent.translate(pos, dest)\n               .scale(scale)\n               .rotateXYZ(rot);\n}\n</code></pre>\n"}],"owner":{"account_id":2082670,"reputation":591,"user_id":1854333,"accept_rate":76,"display_name":"Paiku Han"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1835,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":46267135,"answer_count":1,"score":0,"last_activity_date":1648056685,"creation_date":1505575606,"question_id":46255469,"body_markdown":"I have a code for my C++ Transform class that is supposed to give the user of the class a Model View Matrix\r\n\r\n**code-listing 1:**\r\n\r\n    glm::mat4 Transform::GetModel(glm::vec3 pos, glm::vec3 rot, glm::vec3 scale, glm::mat4 parentTransformationMatrix){\r\n        glm::mat4 posMat    = glm::translate(pos);\r\n        glm::mat4 scaleMat  = glm::scale(scale);\r\n        glm::mat4 rotX      = glm::rotate(rot.x, glm::vec3(1.0, 0.0, 0.0));\r\n        glm::mat4 rotY      = glm::rotate(rot.y, glm::vec3(0.0, 1.0, 0.0));\r\n        glm::mat4 rotZ      = glm::rotate(rot.z, glm::vec3(0.0, 0.0, 1.0));\r\n        glm::mat4 rotMat    = rotX * rotY * rotZ;\r\n    \r\n        return parentTransformationMatrix * posMat * rotMat * scaleMat;\r\n    }\r\n\r\nI made part of the code using JOML (for LWJGL3) already but I&#39;m stuck with other parts (commented)\r\n\r\n**code-listing 2:**\r\n\r\n    public Matrix4f GetModel(Vector3f pos, Vector3f rot, Vector3f scale, Matrix4f parentTransformationMatrix){\r\n        Matrix4f posMat   ;// = translate(pos);\r\n        Matrix4f scaleMat ;// = scale(scale);\r\n        Matrix4f rotX     ;// = rotate(rot.x, Vector3f(1.0, 0.0, 0.0));\r\n        Matrix4f rotY     ;// = rotate(rot.y, Vector3f(0.0, 1.0, 0.0));\r\n        Matrix4f rotZ     ;// = rotate(rot.z, Vector3f(0.0, 0.0, 1.0));\r\n        Matrix4f rotMat    = rotX.mul(rotY).mul(rotZ);\r\n\r\n        return parentTransformationMatrix.mul(posMat).mul(rotMat).mul(scaleMat);\r\n    }\r\n\r\n","title":"How to go from GLM to JOML (OpenGL Mathematics Libraries)","body":"<p>I have a code for my C++ Transform class that is supposed to give the user of the class a Model View Matrix</p>\n\n<p><strong>code-listing 1:</strong></p>\n\n<pre><code>glm::mat4 Transform::GetModel(glm::vec3 pos, glm::vec3 rot, glm::vec3 scale, glm::mat4 parentTransformationMatrix){\n    glm::mat4 posMat    = glm::translate(pos);\n    glm::mat4 scaleMat  = glm::scale(scale);\n    glm::mat4 rotX      = glm::rotate(rot.x, glm::vec3(1.0, 0.0, 0.0));\n    glm::mat4 rotY      = glm::rotate(rot.y, glm::vec3(0.0, 1.0, 0.0));\n    glm::mat4 rotZ      = glm::rotate(rot.z, glm::vec3(0.0, 0.0, 1.0));\n    glm::mat4 rotMat    = rotX * rotY * rotZ;\n\n    return parentTransformationMatrix * posMat * rotMat * scaleMat;\n}\n</code></pre>\n\n<p>I made part of the code using JOML (for LWJGL3) already but I'm stuck with other parts (commented)</p>\n\n<p><strong>code-listing 2:</strong></p>\n\n<pre><code>public Matrix4f GetModel(Vector3f pos, Vector3f rot, Vector3f scale, Matrix4f parentTransformationMatrix){\n    Matrix4f posMat   ;// = translate(pos);\n    Matrix4f scaleMat ;// = scale(scale);\n    Matrix4f rotX     ;// = rotate(rot.x, Vector3f(1.0, 0.0, 0.0));\n    Matrix4f rotY     ;// = rotate(rot.y, Vector3f(0.0, 1.0, 0.0));\n    Matrix4f rotZ     ;// = rotate(rot.z, Vector3f(0.0, 0.0, 1.0));\n    Matrix4f rotMat    = rotX.mul(rotY).mul(rotZ);\n\n    return parentTransformationMatrix.mul(posMat).mul(rotMat).mul(scaleMat);\n}\n</code></pre>\n"},{"tags":["java","annotations","lombok"],"comments":[{"owner":{"account_id":2478127,"reputation":19514,"user_id":2158288,"display_name":"ZhongYu"},"score":2,"creation_date":1446607488,"post_id":33512957,"comment_id":54809447,"body_markdown":"... maybe we should just introduce macro in java, and get over it:)","body":"... maybe we should just introduce macro in java, and get over it:)"},{"owner":{"account_id":108117,"reputation":9982,"user_id":287138,"accept_rate":82,"display_name":"Stefan Haberl"},"score":0,"creation_date":1538988395,"post_id":33512957,"comment_id":92323510,"body_markdown":"You answered your own question. Add an answer and I happily upvote it :)","body":"You answered your own question. Add an answer and I happily upvote it :)"}],"answers":[{"tags":[],"owner":{"account_id":1867377,"reputation":3480,"user_id":1690578,"accept_rate":73,"display_name":"Yurii Bondarenko"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1546288230,"creation_date":1546287882,"answer_id":53991165,"question_id":33512957,"body_markdown":"Short answer is NOT (for current version 1.18.4 - Oct 30, 2018)\r\n\r\nAccording to the thread [here](https://github.com/rzwitserloot/lombok/issues/557):\r\n\r\n&gt; This feature would require resolution in a very early stage of processing. Currently that is not possible. Possibly, since we now have the lombok configuration system, we might come up with a different solution.\r\n\r\nActually, they have several requests of the similar functionality on Lombok&#39;s [GitHub page](https://github.com/rzwitserloot/lombok/issues?utf8=%E2%9C%93&amp;q=) - non of them is implemented.\r\n\r\nPlease consider upvoting [this](https://github.com/rzwitserloot/lombok/issues/1993) feature or [this](https://github.com/rzwitserloot/lombok/issues/557) one.","title":"Is it possible to use Lombok annotations as a meta-annotation?","body":"<p>Short answer is NOT (for current version 1.18.4 - Oct 30, 2018)</p>\n\n<p>According to the thread <a href=\"https://github.com/rzwitserloot/lombok/issues/557\" rel=\"noreferrer\">here</a>:</p>\n\n<blockquote>\n  <p>This feature would require resolution in a very early stage of processing. Currently that is not possible. Possibly, since we now have the lombok configuration system, we might come up with a different solution.</p>\n</blockquote>\n\n<p>Actually, they have several requests of the similar functionality on Lombok's <a href=\"https://github.com/rzwitserloot/lombok/issues?utf8=%E2%9C%93&amp;q=\" rel=\"noreferrer\">GitHub page</a> - non of them is implemented.</p>\n\n<p>Please consider upvoting <a href=\"https://github.com/rzwitserloot/lombok/issues/1993\" rel=\"noreferrer\">this</a> feature or <a href=\"https://github.com/rzwitserloot/lombok/issues/557\" rel=\"noreferrer\">this</a> one.</p>\n"}],"owner":{"account_id":186752,"reputation":8053,"user_id":424353,"accept_rate":88,"display_name":"Bogdan Calmac"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7131,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"answer_count":1,"score":38,"last_activity_date":1648056453,"creation_date":1446605793,"question_id":33512957,"body_markdown":"I want to define my own annotation for transfer objects and include there some Lombok annotations as meta-annotations:\r\n\r\n\t@Target(ElementType.TYPE)\r\n\t@Retention(RetentionPolicy.RUNTIME)\r\n\t@Documented\r\n\t@Inherited\r\n\t@Data\r\n\t@NoArgsConstructor\r\n\t@AllArgsConstructor\r\n\tpublic @interface TransferObject {\r\n\t}\r\n\r\nThe intent is to annotate all my transfer objects with `@TransferObject` and &quot;inherit&quot; all of the above. In practice it doesn&#39;t work, classes annotated with `@TransferObject` are not processed by Lombok.\r\n\r\nIs there some way to get this working? If not, it it theoretically possible to enhance Lombok to look for meta-annotations?\r\n\r\nNote: I&#39;m on Java 8.\r\n\r\nUPDATE: It looks like there&#39;s a [feature request][1] for this on github. \r\n\r\n\r\n  [1]: https://github.com/rzwitserloot/lombok/issues/557","title":"Is it possible to use Lombok annotations as a meta-annotation?","body":"<p>I want to define my own annotation for transfer objects and include there some Lombok annotations as meta-annotations:</p>\n\n<pre><code>@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Inherited\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic @interface TransferObject {\n}\n</code></pre>\n\n<p>The intent is to annotate all my transfer objects with <code>@TransferObject</code> and \"inherit\" all of the above. In practice it doesn't work, classes annotated with <code>@TransferObject</code> are not processed by Lombok.</p>\n\n<p>Is there some way to get this working? If not, it it theoretically possible to enhance Lombok to look for meta-annotations?</p>\n\n<p>Note: I'm on Java 8.</p>\n\n<p>UPDATE: It looks like there's a <a href=\"https://github.com/rzwitserloot/lombok/issues/557\" rel=\"noreferrer\">feature request</a> for this on github. </p>\n"},{"tags":["java","image","java-console"],"comments":[{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":0,"creation_date":1643042446,"post_id":70837303,"comment_id":125229182,"body_markdown":"No.  console is for text","body":"No.  console is for text"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1643042475,"post_id":70837303,"comment_id":125229191,"body_markdown":"What &quot;console&quot;? In linux for example you theoretically could using the framebuffer. But why make your life harder when you can use a GUI?","body":"What &quot;console&quot;? In linux for example you theoretically could using the framebuffer. But why make your life harder when you can use a GUI?"},{"owner":{"account_id":23951166,"reputation":23,"user_id":17942727,"display_name":"FrederickAmpsUp"},"score":0,"creation_date":1643042482,"post_id":70837303,"comment_id":125229197,"body_markdown":"Thank you for the info, I have done Swing graphics, but want to be able to run it on SSH","body":"Thank you for the info, I have done Swing graphics, but want to be able to run it on SSH"},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":2,"creation_date":1643042515,"post_id":70837303,"comment_id":125229214,"body_markdown":"SSH is a network protocol","body":"SSH is a network protocol"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1643042580,"post_id":70837303,"comment_id":125229244,"body_markdown":"@FrederickAmpsUp there&#39;s X11 for that, then. But at that point just make the client download the code and run it or serve the picture via http(s).","body":"@FrederickAmpsUp there&#39;s X11 for that, then. But at that point just make the client download the code and run it or serve the picture via http(s)."},{"owner":{"account_id":1245628,"reputation":150,"user_id":1207155,"accept_rate":100,"display_name":"RobbingDaHood"},"score":0,"creation_date":1643046714,"post_id":70837303,"comment_id":125230857,"body_markdown":"Closest thing is ascii art: https://www.asciiart.eu/","body":"Closest thing is ascii art: <a href=\"https://www.asciiart.eu/\" rel=\"nofollow noreferrer\">asciiart.eu</a>"}],"answers":[{"tags":[],"owner":{"account_id":1749821,"reputation":205,"user_id":1599177,"accept_rate":100,"display_name":"Ghost Rider"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643047412,"creation_date":1643047412,"answer_id":70838399,"question_id":70837303,"body_markdown":"You can show an image in Java console and this is **ASCII art**.   \r\nOf course, this is not a real image as **.png* or **.jpeg* or whatever but it&#39;s still technically an image.\r\nWith colored fonts and backgrounds, you can create pretty good art. There is a very nice library on GitHub that could be found - [JColor][1].   \r\nYou can also look for the ASCII image converter library on Java (or ASCII image generator), the result is quite amazing. \r\n\r\n  [1]: https://github.com/dialex/JColor","title":"Is it possible to show an image in Java console?","body":"<p>You can show an image in Java console and this is <strong>ASCII art</strong>.<br />\nOf course, this is not a real image as *<em>.png</em> or *<em>.jpeg</em> or whatever but it's still technically an image.\nWith colored fonts and backgrounds, you can create pretty good art. There is a very nice library on GitHub that could be found - <a href=\"https://github.com/dialex/JColor\" rel=\"nofollow noreferrer\">JColor</a>.<br />\nYou can also look for the ASCII image converter library on Java (or ASCII image generator), the result is quite amazing.</p>\n"},{"tags":[],"owner":{"account_id":3769835,"reputation":964,"user_id":3132351,"display_name":"EverNight"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1643156052,"creation_date":1643156052,"answer_id":70857316,"question_id":70837303,"body_markdown":"Actually... It sort of is. \r\n\r\nYou can ouptut shell directives which determine the os to change color of succeeding text. You can also manipulate backgrounds.\r\n\r\nIt is quite limited though.\r\n\r\nNevertheless one could print a bunch of &quot;pixel&quot; characters and change their color.\r\n\r\nExample https://stackoverflow.com/questions/5762491/how-to-print-color-in-console-using-system-out-println\r\n\r\nalso....this will jot work in an IDE&#39;s console.\r\n\r\n","title":"Is it possible to show an image in Java console?","body":"<p>Actually... It sort of is.</p>\n<p>You can ouptut shell directives which determine the os to change color of succeeding text. You can also manipulate backgrounds.</p>\n<p>It is quite limited though.</p>\n<p>Nevertheless one could print a bunch of &quot;pixel&quot; characters and change their color.</p>\n<p>Example <a href=\"https://stackoverflow.com/questions/5762491/how-to-print-color-in-console-using-system-out-println\">How to print color in console using System.out.println?</a></p>\n<p>also....this will jot work in an IDE's console.</p>\n"}],"owner":{"account_id":23951166,"reputation":23,"user_id":17942727,"display_name":"FrederickAmpsUp"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1806,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":70857316,"answer_count":2,"score":-1,"last_activity_date":1648056305,"creation_date":1643042350,"question_id":70837303,"body_markdown":"I want to make a Java application that shows an image in the console, but I cannot find anything on the topic. How would I do this?","title":"Is it possible to show an image in Java console?","body":"<p>I want to make a Java application that shows an image in the console, but I cannot find anything on the topic. How would I do this?</p>\n"},{"tags":["java","sql","spring"],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648055530,"creation_date":1647983238,"answer_id":71578960,"question_id":71576458,"body_markdown":"Your date in db is a date, ot at least a string formatted like a proper date, depending on how you declared the type, which is not clear from your question. With your get request - `/traveladventures/bydate/2017`, you are sending something that looks like a year. Considering dates in your db looks like this - `04/27/2019`, `2017` definitely won&#39;t match any of them.\r\n\r\n**Edit:** The query generated from this method `List&lt;Adventure&gt; findByDate(String date);` will look for rows, whose date column is exact match of provided string. In your specific case it will return only rows, whose date is exact match for `2017`. The problem should be obvius now. In order to find anything, path variable should be in correct format - `&lt;month&gt;/&lt;day&gt;/&lt;year&gt;`, for example - `05/16/2017`. This will make correct url - `http://localhost:4001/traveladventures/bydate/05/16/2017`, which is another **problem** - you have url separatator as part of your path variable, you will probably get 404 response.\r\n\r\nSolutions:\r\n\r\n 1. Use request parameter:\r\n```\r\n@GetMapping(&quot;/bydate/{date}&quot;)\r\npublic List&lt;Adventure&gt; getByDate(@PathVariable(&quot;date&quot;) String date){\r\n  return this.adventureRepository.findByDate(date);\r\n}\r\n```\r\nUrl will look like this - `http://localhost:8080/traveladventures/bydate?date=05/16/2017`. Downside is you can only search for exact matches.\r\n\r\n 2. Change your entity: make date field of some date type. I would to stay away from `java.util.Date` and use `java.time.LocalDate`.\r\n```\r\n@Column(name = &quot;DATE&quot;)\r\nprivate LocalDate date;\r\n```\r\nThen change your date column in table to be of datatype `DATE`. Like this you can do some more complex queries - for example get adventures in year 2017.","title":"I&#39;m using Java Spring framework to map the date data from my data and my pathvariable won&#39;t get me access to any data","body":"<p>Your date in db is a date, ot at least a string formatted like a proper date, depending on how you declared the type, which is not clear from your question. With your get request - <code>/traveladventures/bydate/2017</code>, you are sending something that looks like a year. Considering dates in your db looks like this - <code>04/27/2019</code>, <code>2017</code> definitely won't match any of them.</p>\n<p><strong>Edit:</strong> The query generated from this method <code>List&lt;Adventure&gt; findByDate(String date);</code> will look for rows, whose date column is exact match of provided string. In your specific case it will return only rows, whose date is exact match for <code>2017</code>. The problem should be obvius now. In order to find anything, path variable should be in correct format - <code>&lt;month&gt;/&lt;day&gt;/&lt;year&gt;</code>, for example - <code>05/16/2017</code>. This will make correct url - <code>http://localhost:4001/traveladventures/bydate/05/16/2017</code>, which is another <strong>problem</strong> - you have url separatator as part of your path variable, you will probably get 404 response.</p>\n<p>Solutions:</p>\n<ol>\n<li>Use request parameter:</li>\n</ol>\n<pre><code>@GetMapping(&quot;/bydate/{date}&quot;)\npublic List&lt;Adventure&gt; getByDate(@PathVariable(&quot;date&quot;) String date){\n  return this.adventureRepository.findByDate(date);\n}\n</code></pre>\n<p>Url will look like this - <code>http://localhost:8080/traveladventures/bydate?date=05/16/2017</code>. Downside is you can only search for exact matches.</p>\n<ol start=\"2\">\n<li>Change your entity: make date field of some date type. I would to stay away from <code>java.util.Date</code> and use <code>java.time.LocalDate</code>.</li>\n</ol>\n<pre><code>@Column(name = &quot;DATE&quot;)\nprivate LocalDate date;\n</code></pre>\n<p>Then change your date column in table to be of datatype <code>DATE</code>. Like this you can do some more complex queries - for example get adventures in year 2017.</p>\n"}],"owner":{"account_id":16564517,"reputation":325,"user_id":11969499,"display_name":"Zachary Blumstein"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1648055530,"creation_date":1647970051,"question_id":71576458,"body_markdown":"I&#39;m using the Java Spring framework to map data from a portion of my data and my @pathvariable won&#39;t get me access to any data. all I&#39;m getting in the console is *   \r\n\r\n    Trying 127.0.0.1:4001...\r\n    * TCP_NODELAY set\r\n    * Connected to localhost (127.0.0.1) port 4001 (#0)\r\n    &gt; GET /traveladventures/bydate/2017 HTTP/1.1\r\n    &gt; Host: localhost:4001\r\n    &gt; User-Agent: curl/7.68.0\r\n    &gt; Accept: */*\r\n    &gt; \r\n    * Mark bundle as not supporting multiuse\r\n    &lt; HTTP/1.1 200 \r\n    &lt; Content-Type: application/json\r\n    &lt; Transfer-Encoding: chunked\r\n    &lt; Date: Tue, 22 Mar 2022 17:19:19 GMT\r\n    &lt; \r\n    * Connection #0 to host localhost left intact\r\n\r\nmy current code looks like such\r\n\r\n    @GetMapping(&quot;/bydate/{date}&quot;)\r\n      public List&lt;Adventure&gt; getByDate(@PathVariable(&quot;date&quot;) String date){\r\n        return this.adventureRepository.findByDate(date);\r\n      }\r\n\r\nI used this code to access my database \r\n\r\n    $ curl -v http://localhost:4001/traveladventures/bydate/2017\r\n\r\nmy interface \r\n\r\n\r\n    public interface AdventureRepository extends CrudRepository&lt;Adventure, Integer&gt; {\r\n      public List&lt;Adventure&gt; findByDate(String date);\r\n      date.substring(7,10);\r\n    }\r\n\r\nan example of my SQL data looks like so\r\n\r\n    \r\n    INSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (7, &#39;05/16/2017&#39;, &#39;Uruguay&#39;, &#39;Salto&#39;, &#39;&#39;, 43, false);\r\n    INSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (8, &#39;09/08/2016&#39;, &#39;Greece&#39;, &#39;&#195;no Li&#195;&#179;sia&#39;, &#39;&#39;, 94, true);\r\n    INSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (9, &#39;12/10/2020&#39;, &#39;Portugal&#39;, &#39;Azenhas do Mar&#39;, &#39;Lisboa&#39;, 5, false);\r\n    INSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (11, &#39;07/03/2020&#39;, &#39;China&#39;, &#39;Chishui&#39;, &#39;&#39;, 9, true);\r\n    INSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (10, &#39;06/22/2019&#39;, &#39;Albania&#39;, &#39;Helmas&#39;, &#39;&#39;, 7, true);\r\n    INSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (13, &#39;12/06/2016&#39;, &#39;France&#39;, &#39;Alen&#195;&#167;on&#39;, &#39;Basse-Normandie&#39;, 44, false);\r\n    INSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (12, &#39;01/06/2020&#39;, &#39;France&#39;, &#39;Quimper&#39;, &#39;Bretagne&#39;, 77, true);\r\n    INSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (14, &#39;04/01/2018&#39;, &#39;Japan&#39;, &#39;Ushiku&#39;, &#39;&#39;, 13, true);\r\n    INSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (15, &#39;04/28/2021&#39;, &#39;Mexico&#39;, &#39;Fovissste&#39;, &#39;Chihuahua&#39;, 26, true);\r\n    INSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (16, &#39;09/21/2017&#39;, &#39;China&#39;, &#39;Xiaojin&#39;, &#39;&#39;, 7, false);\r\n    INSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (17, &#39;08/31/2019&#39;, &#39;Syria&#39;, &#39;Kh&#196;n Shaykh&#197;&#171;n&#39;, &#39;&#39;, 4, false);\r\n    INSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (18, &#39;12/25/2020&#39;, &#39;Argentina&#39;, &#39;Zapala&#39;, &#39;&#39;, 54, false);\r\n    INSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (19, &#39;04/25/2016&#39;, &#39;Philippines&#39;, &#39;Unidad&#39;, &#39;&#39;, 72, false);","title":"I&#39;m using Java Spring framework to map the date data from my data and my pathvariable won&#39;t get me access to any data","body":"<p>I'm using the Java Spring framework to map data from a portion of my data and my @pathvariable won't get me access to any data. all I'm getting in the console is *</p>\n<pre><code>Trying 127.0.0.1:4001...\n* TCP_NODELAY set\n* Connected to localhost (127.0.0.1) port 4001 (#0)\n&gt; GET /traveladventures/bydate/2017 HTTP/1.1\n&gt; Host: localhost:4001\n&gt; User-Agent: curl/7.68.0\n&gt; Accept: */*\n&gt; \n* Mark bundle as not supporting multiuse\n&lt; HTTP/1.1 200 \n&lt; Content-Type: application/json\n&lt; Transfer-Encoding: chunked\n&lt; Date: Tue, 22 Mar 2022 17:19:19 GMT\n&lt; \n* Connection #0 to host localhost left intact\n</code></pre>\n<p>my current code looks like such</p>\n<pre><code>@GetMapping(&quot;/bydate/{date}&quot;)\n  public List&lt;Adventure&gt; getByDate(@PathVariable(&quot;date&quot;) String date){\n    return this.adventureRepository.findByDate(date);\n  }\n</code></pre>\n<p>I used this code to access my database</p>\n<pre><code>$ curl -v http://localhost:4001/traveladventures/bydate/2017\n</code></pre>\n<p>my interface</p>\n<pre><code>public interface AdventureRepository extends CrudRepository&lt;Adventure, Integer&gt; {\n  public List&lt;Adventure&gt; findByDate(String date);\n  date.substring(7,10);\n}\n</code></pre>\n<p>an example of my SQL data looks like so</p>\n<pre><code>INSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (7, '05/16/2017', 'Uruguay', 'Salto', '', 43, false);\nINSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (8, '09/08/2016', 'Greece', 'Ãno LiÃ³sia', '', 94, true);\nINSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (9, '12/10/2020', 'Portugal', 'Azenhas do Mar', 'Lisboa', 5, false);\nINSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (11, '07/03/2020', 'China', 'Chishui', '', 9, true);\nINSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (10, '06/22/2019', 'Albania', 'Helmas', '', 7, true);\nINSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (13, '12/06/2016', 'France', 'AlenÃ§on', 'Basse-Normandie', 44, false);\nINSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (12, '01/06/2020', 'France', 'Quimper', 'Bretagne', 77, true);\nINSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (14, '04/01/2018', 'Japan', 'Ushiku', '', 13, true);\nINSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (15, '04/28/2021', 'Mexico', 'Fovissste', 'Chihuahua', 26, true);\nINSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (16, '09/21/2017', 'China', 'Xiaojin', '', 7, false);\nINSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (17, '08/31/2019', 'Syria', 'KhÄn ShaykhÅ«n', '', 4, false);\nINSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (18, '12/25/2020', 'Argentina', 'Zapala', '', 54, false);\nINSERT INTO ADVENTURES (ID, DATE, COUNTRY, CITY, STATE, NUM_PHOTOS, BLOG_COMPLETED) VALUES (19, '04/25/2016', 'Philippines', 'Unidad', '', 72, false);\n</code></pre>\n"},{"tags":["java","apache-camel"],"answers":[{"tags":[],"owner":{"account_id":2269593,"reputation":43907,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1648055385,"creation_date":1648055385,"answer_id":71591281,"question_id":71589032,"body_markdown":"There are several ways to create a `CamelContext` depending on how you want to launch Camel (Standalone, Spring Boot, Quarkus, CDI...).\r\n\r\nAssuming that you want to launch Camel in standalone mode, you can create it using [`DefaultCamelContext`][1].\r\n\r\nLike in the next basic example:\r\n\r\n```\r\npublic final class CamelBasic {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        // create a CamelContext\r\n        try (CamelContext camel = new DefaultCamelContext()) {\r\n\r\n            // add routes which can be inlined as anonymous inner class\r\n            // (to keep all code in a single java file for this basic example)\r\n            camel.addRoutes(createBasicRoute());\r\n\r\n            // start is not blocking\r\n            camel.start();\r\n\r\n            // so run for 10 seconds\r\n            Thread.sleep(10_000);\r\n        }\r\n    }\r\n\r\n    static RouteBuilder createBasicRoute() {\r\n        return new RouteBuilder() {\r\n            @Override\r\n            public void configure() {\r\n                from(&quot;timer:foo&quot;)\r\n                        .log(&quot;Hello Camel&quot;);\r\n            }\r\n        };\r\n    }\r\n}\r\n````\r\n\r\nSource: https://github.com/apache/camel-examples/tree/main/examples/basic\r\n\r\n  [1]: https://javadoc.io/static/org.apache.camel/camel-core-engine/3.0.0/org/apache/camel/impl/DefaultCamelContext.html","title":"Java Apache Camel - Create a CamelContext object","body":"<p>There are several ways to create a <code>CamelContext</code> depending on how you want to launch Camel (Standalone, Spring Boot, Quarkus, CDI...).</p>\n<p>Assuming that you want to launch Camel in standalone mode, you can create it using <a href=\"https://javadoc.io/static/org.apache.camel/camel-core-engine/3.0.0/org/apache/camel/impl/DefaultCamelContext.html\" rel=\"nofollow noreferrer\"><code>DefaultCamelContext</code></a>.</p>\n<p>Like in the next basic example:</p>\n<pre><code>public final class CamelBasic {\n\n    public static void main(String[] args) throws Exception {\n        // create a CamelContext\n        try (CamelContext camel = new DefaultCamelContext()) {\n\n            // add routes which can be inlined as anonymous inner class\n            // (to keep all code in a single java file for this basic example)\n            camel.addRoutes(createBasicRoute());\n\n            // start is not blocking\n            camel.start();\n\n            // so run for 10 seconds\n            Thread.sleep(10_000);\n        }\n    }\n\n    static RouteBuilder createBasicRoute() {\n        return new RouteBuilder() {\n            @Override\n            public void configure() {\n                from(&quot;timer:foo&quot;)\n                        .log(&quot;Hello Camel&quot;);\n            }\n        };\n    }\n}\n</code></pre>\n<p>Source: <a href=\"https://github.com/apache/camel-examples/tree/main/examples/basic\" rel=\"nofollow noreferrer\">https://github.com/apache/camel-examples/tree/main/examples/basic</a></p>\n"}],"owner":{"account_id":18210444,"reputation":184,"user_id":13253079,"display_name":"theerrormagnet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":554,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71591281,"answer_count":1,"score":0,"last_activity_date":1648055385,"creation_date":1648045957,"question_id":71589032,"body_markdown":"The documentation in the &quot;Getting Started&quot; section says the following:&lt;br&gt;\r\n&quot;1. Create a CamelContext object.&quot;&lt;br&gt;\r\nhttps://camel.apache.org/manual/book-getting-started.html#BookGettingStarted-CamelContext\r\n\r\nI tried it like this:\r\n```\r\nimport org.apache.camel.CamelContext;\r\nimport org.apache.camel.builder.RouteBuilder;\r\nimport org.apache.camel.main.Main;\r\nimport org.apache.camel.model.dataformat.JsonLibrary;\r\n\r\npublic class CamelDemoMainClass {\r\n    public static void main(String[] args) throws Exception {\r\n        CamelContext camelContext = new CamelContext();\r\n    }\r\n}\r\n```\r\nBut the language server in VS Code says the following:&lt;br&gt;\r\n&quot;Cannot instantiate the type CamelContext&quot;\r\n\r\nAnd I also tried using `DefaultCamelContext` instead of `CamelContext` because I have seen it in some other project, but with the same result.","title":"Java Apache Camel - Create a CamelContext object","body":"<p>The documentation in the &quot;Getting Started&quot; section says the following:<br>\n&quot;1. Create a CamelContext object.&quot;<br>\n<a href=\"https://camel.apache.org/manual/book-getting-started.html#BookGettingStarted-CamelContext\" rel=\"nofollow noreferrer\">https://camel.apache.org/manual/book-getting-started.html#BookGettingStarted-CamelContext</a></p>\n<p>I tried it like this:</p>\n<pre><code>import org.apache.camel.CamelContext;\nimport org.apache.camel.builder.RouteBuilder;\nimport org.apache.camel.main.Main;\nimport org.apache.camel.model.dataformat.JsonLibrary;\n\npublic class CamelDemoMainClass {\n    public static void main(String[] args) throws Exception {\n        CamelContext camelContext = new CamelContext();\n    }\n}\n</code></pre>\n<p>But the language server in VS Code says the following:<br>\n&quot;Cannot instantiate the type CamelContext&quot;</p>\n<p>And I also tried using <code>DefaultCamelContext</code> instead of <code>CamelContext</code> because I have seen it in some other project, but with the same result.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8958875,"reputation":3265,"user_id":6682274,"accept_rate":25,"display_name":"Sudhir Ojha"},"score":0,"creation_date":1648042761,"post_id":71588174,"comment_id":126523679,"body_markdown":"What you have tried till now ?","body":"What you have tried till now ?"},{"owner":{"account_id":23065836,"reputation":27,"user_id":17180282,"display_name":"cli ash"},"score":0,"creation_date":1648043452,"post_id":71588174,"comment_id":126524026,"body_markdown":"@SudhirOjha I use stream to first group the elements into Map&lt;Integer, List&lt;Log&gt;&gt; by hour, and then use stream to group the grouped list into Map&lt;Integer, Map&lt;String, List&lt;Log&gt;&gt;&gt; by platform form, and finally use the stream to calculate the sum in the List&lt;Log&gt; after these groupings. It&#39;s a stupid way, but I don&#39;t know how to do it better","body":"@SudhirOjha I use stream to first group the elements into Map&lt;Integer, List&lt;Log&gt;&gt; by hour, and then use stream to group the grouped list into Map&lt;Integer, Map&lt;String, List&lt;Log&gt;&gt;&gt; by platform form, and finally use the stream to calculate the sum in the List&lt;Log&gt; after these groupings. It&#39;s a stupid way, but I don&#39;t know how to do it better"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648050780,"creation_date":1648050189,"answer_id":71590095,"question_id":71588174,"body_markdown":"I would use a loop and make use of [Map.computeIfAbsent](https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/Map.html#computeIfAbsent(K,java.util.function.Function)) and [Map.merge](https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)).  `ComputeIfAbsent` will determine if an entry is available for the given key. If so, it will return the value for that entry, otherwise it will create an `entry` with the `supplied key and value` and return that `value`. In this case, the value is another `map`. So the first time the hour is added. But it also returns the map just created for that hour. So another `computeIfAbsent` can be appended and the process repeated to get the `platform` map.\r\n\r\n`Map.merge` is similar except that it will take a key, a value, and a merge function. If the value is not present for the key, the supplied value will be used.  Otherwise, the merge function will be used to apply the new value to the map, merging with the existing one. In this case, the desired function is to add them so `Integer::sum` is used for this process.\r\n\r\nI ran this for `100_000` copies of the supplied test data and it took about a second to run.\r\n \r\nHere is some data\r\n```\r\nLocalDateTime ldt = LocalDateTime.now();\r\nList&lt;Log&gt; list = new ArrayList&lt;&gt;(List.of(\r\n\t\tnew Log(&quot;platform1&quot;, ldt.plusHours(1), 66, 77, 33),\r\n\t\tnew Log(&quot;platform1&quot;, ldt.plusHours(1), 66, 77, 33),\r\n\t\tnew Log(&quot;platform2&quot;, ldt.plusHours(1), 13, 5, 64),\r\n\t\tnew Log(&quot;platform2&quot;, ldt.plusHours(2), 64, 47, 98),\r\n\t\tnew Log(&quot;platform7&quot;, ldt.plusHours(2), 0, 3, 21),\r\n\t\tnew Log(&quot;platform7&quot;, ldt.plusHours(2), 10, 15, 44)));\r\n```\r\nAnd here is the process.\r\n\r\n- first create Map to hold the results.\r\n```\r\n\r\nMap&lt;Integer, Map&lt;String, Map&lt;String, Integer&gt;&gt;&gt; result =\r\n\t\tnew HashMap&lt;&gt;();\r\n```\r\nNow loop thru the list of logs and create the maps as you need them, summing up the values as you go.\r\n```\r\nfor (Log log : list) {\r\n\tMap&lt;String, Integer&gt; platformMap = result\r\n\t\t\t.computeIfAbsent(log.getGMTCreate().getHour(),\r\n\t\t\t\t\tv -&gt; new HashMap&lt;&gt;())\r\n\t\t\t.computeIfAbsent(log.getPlatform(),\r\n\t\t\t\t\tv -&gt; new HashMap&lt;&gt;());\r\n\tplatformMap.merge(&quot;callbackTotal&quot;, log.getCallbackCount(),\r\n\t\t\tInteger::sum);\r\n\tplatformMap.merge(&quot;dispatcherTotal&quot;,\r\n\t\t\tlog.getDispatcherCount(), Integer::sum);\r\n\tplatformMap.merge(&quot;enlistTotal&quot;, log.getEnlistCount(),\r\n\t\t\tInteger::sum);\r\n}\r\n```\r\nPrint the results.\r\n```\r\n\r\nresult.forEach((k, v) -&gt; {\r\n\tSystem.out.println(k);\r\n\tv.forEach((kk, vv) -&gt; {\r\n\t\tSystem.out.println(&quot;  &quot; + kk);\r\n\t\tvv.entrySet().forEach(\r\n\t\t\t\te -&gt; System.out.println(&quot;          &quot; + e));\r\n\t});\r\n});\r\n```\r\nprints\r\n```\r\n12\r\n  platform2\r\n          callbackTotal=64\r\n          enlistTotal=13\r\n          dispatcherTotal=5\r\n  platform1\r\n          callbackTotal=66\r\n          enlistTotal=132\r\n          dispatcherTotal=154\r\n13\r\n  platform2\r\n          callbackTotal=98\r\n          enlistTotal=64\r\n          dispatcherTotal=47\r\n  platform7\r\n          callbackTotal=65\r\n          enlistTotal=10\r\n          dispatcherTotal=18","title":"Calculate and classify the data in the collection list in java","body":"<p>I would use a loop and make use of <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/Map.html#computeIfAbsent(K,java.util.function.Function)\" rel=\"nofollow noreferrer\">Map.computeIfAbsent</a> and <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\">Map.merge</a>.  <code>ComputeIfAbsent</code> will determine if an entry is available for the given key. If so, it will return the value for that entry, otherwise it will create an <code>entry</code> with the <code>supplied key and value</code> and return that <code>value</code>. In this case, the value is another <code>map</code>. So the first time the hour is added. But it also returns the map just created for that hour. So another <code>computeIfAbsent</code> can be appended and the process repeated to get the <code>platform</code> map.</p>\n<p><code>Map.merge</code> is similar except that it will take a key, a value, and a merge function. If the value is not present for the key, the supplied value will be used.  Otherwise, the merge function will be used to apply the new value to the map, merging with the existing one. In this case, the desired function is to add them so <code>Integer::sum</code> is used for this process.</p>\n<p>I ran this for <code>100_000</code> copies of the supplied test data and it took about a second to run.</p>\n<p>Here is some data</p>\n<pre><code>LocalDateTime ldt = LocalDateTime.now();\nList&lt;Log&gt; list = new ArrayList&lt;&gt;(List.of(\n        new Log(&quot;platform1&quot;, ldt.plusHours(1), 66, 77, 33),\n        new Log(&quot;platform1&quot;, ldt.plusHours(1), 66, 77, 33),\n        new Log(&quot;platform2&quot;, ldt.plusHours(1), 13, 5, 64),\n        new Log(&quot;platform2&quot;, ldt.plusHours(2), 64, 47, 98),\n        new Log(&quot;platform7&quot;, ldt.plusHours(2), 0, 3, 21),\n        new Log(&quot;platform7&quot;, ldt.plusHours(2), 10, 15, 44)));\n</code></pre>\n<p>And here is the process.</p>\n<ul>\n<li>first create Map to hold the results.</li>\n</ul>\n<pre><code>\nMap&lt;Integer, Map&lt;String, Map&lt;String, Integer&gt;&gt;&gt; result =\n        new HashMap&lt;&gt;();\n</code></pre>\n<p>Now loop thru the list of logs and create the maps as you need them, summing up the values as you go.</p>\n<pre><code>for (Log log : list) {\n    Map&lt;String, Integer&gt; platformMap = result\n            .computeIfAbsent(log.getGMTCreate().getHour(),\n                    v -&gt; new HashMap&lt;&gt;())\n            .computeIfAbsent(log.getPlatform(),\n                    v -&gt; new HashMap&lt;&gt;());\n    platformMap.merge(&quot;callbackTotal&quot;, log.getCallbackCount(),\n            Integer::sum);\n    platformMap.merge(&quot;dispatcherTotal&quot;,\n            log.getDispatcherCount(), Integer::sum);\n    platformMap.merge(&quot;enlistTotal&quot;, log.getEnlistCount(),\n            Integer::sum);\n}\n</code></pre>\n<p>Print the results.</p>\n<pre><code>\nresult.forEach((k, v) -&gt; {\n    System.out.println(k);\n    v.forEach((kk, vv) -&gt; {\n        System.out.println(&quot;  &quot; + kk);\n        vv.entrySet().forEach(\n                e -&gt; System.out.println(&quot;          &quot; + e));\n    });\n});\n</code></pre>\n<p>prints</p>\n<pre><code>12\n  platform2\n          callbackTotal=64\n          enlistTotal=13\n          dispatcherTotal=5\n  platform1\n          callbackTotal=66\n          enlistTotal=132\n          dispatcherTotal=154\n13\n  platform2\n          callbackTotal=98\n          enlistTotal=64\n          dispatcherTotal=47\n  platform7\n          callbackTotal=65\n          enlistTotal=10\n          dispatcherTotal=18\n</code></pre>\n"},{"tags":[],"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1648055144,"creation_date":1648055144,"answer_id":71591229,"question_id":71588174,"body_markdown":"You can do it all in one stream by using groupingBy with a downstream collector and a mutable reduction with collect. You need a helper class to sum the values:\r\n\r\n    public class Total {\r\n        private int enlistCount = 0;\r\n        private int dispatcherCount = 0;\r\n        private int callbackCount = 0;\r\n        \r\n        public Total addLog(Log log) {\r\n            this.enlistCount += log.enlistCount();\r\n            this.dispatcherCount += log.dispatcherCount();\r\n            this.callbackCount += log.callbackCount();\r\n            return this;\r\n        }\r\n        \r\n        public Total add(Total that) {\r\n            this.enlistCount += that.enlistCount;\r\n            this.dispatcherCount += that.dispatcherCount;\r\n            this.callbackCount += that.callbackCount;\r\n            return this;\r\n        }\r\n    \r\n        public Map&lt;String, Integer&gt; toMap() {\r\n            Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\r\n            map.put(&quot;enlistTotal&quot;, enlistCount);\r\n            map.put(&quot;dispatcherTotal&quot;, dispatcherCount);\r\n            map.put(&quot;callbackTotal&quot;, callbackCount);\r\n            return map;\r\n        }\r\n        \r\n        @Override\r\n        public String toString() {\r\n            return String.format(&quot;%d %d %d&quot;, enlistCount, dispatcherCount, callbackCount);\r\n        }\r\n    }\r\n\r\nThen the stream, grouping, and collection looks like this:\r\n\r\n    logs.stream().collect(Collectors.groupingBy(Log::getPlatform,\r\n        Collectors.groupingBy(log -&gt; log.getGmtCreate().getHour(),\r\n            Collector.of(Total::new, Total::addLog, Total::add, Total::toMap))))\r\n\r\nTo break that down, there&#39;s a groupingBy on the platform, and inside that a groupingBy on the hour of the day. Then all the log entries are summed by a collector which does a mutable reduction:\r\n\r\n    Collector.of(Total::new, Total::addLog, Total::add, Total::toMap)\r\n\r\nThis collector uses a supplier that provides a new Total with zeros for the counts, an accumulator that adds each Log&#39;s counts to the Total, a combiner that knows how to sum two Totals (this would only be used in a parallel scenario), and finally a finishing function that transforms the Total object to a `Map&lt;String, Integer&gt;`.","title":"Calculate and classify the data in the collection list in java","body":"<p>You can do it all in one stream by using groupingBy with a downstream collector and a mutable reduction with collect. You need a helper class to sum the values:</p>\n<pre><code>public class Total {\n    private int enlistCount = 0;\n    private int dispatcherCount = 0;\n    private int callbackCount = 0;\n    \n    public Total addLog(Log log) {\n        this.enlistCount += log.enlistCount();\n        this.dispatcherCount += log.dispatcherCount();\n        this.callbackCount += log.callbackCount();\n        return this;\n    }\n    \n    public Total add(Total that) {\n        this.enlistCount += that.enlistCount;\n        this.dispatcherCount += that.dispatcherCount;\n        this.callbackCount += that.callbackCount;\n        return this;\n    }\n\n    public Map&lt;String, Integer&gt; toMap() {\n        Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\n        map.put(&quot;enlistTotal&quot;, enlistCount);\n        map.put(&quot;dispatcherTotal&quot;, dispatcherCount);\n        map.put(&quot;callbackTotal&quot;, callbackCount);\n        return map;\n    }\n    \n    @Override\n    public String toString() {\n        return String.format(&quot;%d %d %d&quot;, enlistCount, dispatcherCount, callbackCount);\n    }\n}\n</code></pre>\n<p>Then the stream, grouping, and collection looks like this:</p>\n<pre><code>logs.stream().collect(Collectors.groupingBy(Log::getPlatform,\n    Collectors.groupingBy(log -&gt; log.getGmtCreate().getHour(),\n        Collector.of(Total::new, Total::addLog, Total::add, Total::toMap))))\n</code></pre>\n<p>To break that down, there's a groupingBy on the platform, and inside that a groupingBy on the hour of the day. Then all the log entries are summed by a collector which does a mutable reduction:</p>\n<pre><code>Collector.of(Total::new, Total::addLog, Total::add, Total::toMap)\n</code></pre>\n<p>This collector uses a supplier that provides a new Total with zeros for the counts, an accumulator that adds each Log's counts to the Total, a combiner that knows how to sum two Totals (this would only be used in a parallel scenario), and finally a finishing function that transforms the Total object to a <code>Map&lt;String, Integer&gt;</code>.</p>\n"}],"owner":{"account_id":23065836,"reputation":27,"user_id":17180282,"display_name":"cli ash"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71591229,"answer_count":2,"score":1,"last_activity_date":1648055144,"creation_date":1648042559,"question_id":71588174,"body_markdown":"There are the following entity classes:\r\n```java\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Data\r\nclass Log {\r\n    private String platform;\r\n    private LocalDateTime gmtCreate;\r\n    private Integer enlistCount;\r\n    private Integer dispatcherCount;\r\n    private Integer callbackCount;\r\n}\r\n\r\n```\r\nNow, I have a list of 10,000 Log entity classes. I want to achieve the following effect. Group the data according to the gmtCreate field by each hour. At the same time, in each group, group by the platform field. Finally, , find the sum of the individual values ​​(enlistCount, dispatcherCount, callbackCount) in these groups. The result looks like this:\r\n```java\r\nMap&lt;Integer, Map&lt;String, Map&lt;String, Integer&gt;&gt;&gt; result = new HashMap&lt;&gt;();\r\n/*\r\n\r\n{\r\n    &quot;23&quot;: {\r\n        &quot;platform1&quot;: {\r\n            &quot;callbackTotal&quot;: 66,\r\n            &quot;dispatcherTotal&quot;: 77,\r\n            &quot;enlistTotal&quot;: 33\r\n        },\r\n        &quot;platform2&quot;: {\r\n            &quot;callbackTotal&quot;: 13,\r\n            &quot;dispatcherTotal&quot;: 5,\r\n            &quot;enlistTotal&quot;: 64\r\n        }\r\n    },\r\n    &quot;24&quot;: {\r\n        &quot;platform2&quot;: {\r\n            &quot;callbackTotal&quot;: 64,\r\n            &quot;dispatcherTotal&quot;: 47,\r\n            &quot;enlistTotal&quot;: 98\r\n        },\r\n        &quot;platform7&quot;: {\r\n            &quot;callbackTotal&quot;: 0,\r\n            &quot;dispatcherTotal&quot;: 3,\r\n            &quot;enlistTotal&quot;: 21\r\n        }\r\n    }\r\n}\r\n*/\r\n\r\n```\r\nThe way I can think of is to use the stream to traverse and group multiple times, but I am worried that the efficiency is very low. Is there any efficient way to do it?","title":"Calculate and classify the data in the collection list in java","body":"<p>There are the following entity classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NoArgsConstructor\n@AllArgsConstructor\n@Data\nclass Log {\n    private String platform;\n    private LocalDateTime gmtCreate;\n    private Integer enlistCount;\n    private Integer dispatcherCount;\n    private Integer callbackCount;\n}\n\n</code></pre>\n<p>Now, I have a list of 10,000 Log entity classes. I want to achieve the following effect. Group the data according to the gmtCreate field by each hour. At the same time, in each group, group by the platform field. Finally, , find the sum of the individual values ​​(enlistCount, dispatcherCount, callbackCount) in these groups. The result looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Integer, Map&lt;String, Map&lt;String, Integer&gt;&gt;&gt; result = new HashMap&lt;&gt;();\n/*\n\n{\n    &quot;23&quot;: {\n        &quot;platform1&quot;: {\n            &quot;callbackTotal&quot;: 66,\n            &quot;dispatcherTotal&quot;: 77,\n            &quot;enlistTotal&quot;: 33\n        },\n        &quot;platform2&quot;: {\n            &quot;callbackTotal&quot;: 13,\n            &quot;dispatcherTotal&quot;: 5,\n            &quot;enlistTotal&quot;: 64\n        }\n    },\n    &quot;24&quot;: {\n        &quot;platform2&quot;: {\n            &quot;callbackTotal&quot;: 64,\n            &quot;dispatcherTotal&quot;: 47,\n            &quot;enlistTotal&quot;: 98\n        },\n        &quot;platform7&quot;: {\n            &quot;callbackTotal&quot;: 0,\n            &quot;dispatcherTotal&quot;: 3,\n            &quot;enlistTotal&quot;: 21\n        }\n    }\n}\n*/\n\n</code></pre>\n<p>The way I can think of is to use the stream to traverse and group multiple times, but I am worried that the efficiency is very low. Is there any efficient way to do it?</p>\n"},{"tags":["java","json","spring-boot","rest","response"],"comments":[{"owner":{"account_id":19442387,"reputation":39,"user_id":14220554,"display_name":"Art"},"score":0,"creation_date":1648119245,"post_id":71590834,"comment_id":126545718,"body_markdown":"Continued post is here where I solve the mapping of json with pojo&#39;s - https://stackoverflow.com/questions/71598876/consuming-external-api-and-converting-from-json-string-to-bean-doesnt-initializ/","body":"Continued post is here where I solve the mapping of json with pojo&#39;s - <a href=\"https://stackoverflow.com/questions/71598876/consuming-external-api-and-converting-from-json-string-to-bean-doesnt-initializ/\" title=\"consuming external api and converting from json string to bean doesnt initializ\">stackoverflow.com/questions/71598876/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1968635,"reputation":21509,"user_id":1768226,"accept_rate":80,"display_name":"shazin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648054025,"creation_date":1648054025,"answer_id":71591003,"question_id":71590834,"body_markdown":"You can use Jackson Json Serializer\r\n\r\n    RomaniaData romaniaData = new ObjectMapper().readValue(responseString, RomaniaData.class);","title":"How do I convert/consume an external REST API response body from json/string to bean - I&#39;m using Spring Boot-Maven","body":"<p>You can use Jackson Json Serializer</p>\n<pre><code>RomaniaData romaniaData = new ObjectMapper().readValue(responseString, RomaniaData.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1648055133,"creation_date":1648055133,"answer_id":71591224,"question_id":71590834,"body_markdown":"In order to convert your JSON string into your `RomaniaData` you can use Jackson library, and in particular [ObjectMapper][1] class and its method [readValue()][2]. If your Json has some unknown properties you can ignore them as described [Jackson Unmarshalling JSON with Unknown Properties][3].\r\nAlso you can use an Open-source library MgntUtils that provides class [JsonUtils][4] which is a wrapper over Jackson library anyway. With that class parsing your Json String would look like this:\r\n\r\n    RomaniaData romaniaData = null;\r\n    try {\r\n          romaniaData = JsonUtils.readObjectFromJsonString(jsonString, RomaniaData.class);\r\n        }\r\n    } catch (IOException e) {\r\n       ...\r\n    }\r\n\r\n The Maven artifacts for MgntUtils library could be found [here][5], and library as a jar along with Javadoc and source code could be found on Github [here][6]\r\n\r\n\r\n  [1]: https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html\r\n  [2]: https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html#readValue(java.lang.String,%20java.lang.Class)\r\n  [3]: https://www.baeldung.com/jackson-deserialize-json-unknown-properties\r\n  [4]: http://michaelgantman.github.io/Mgnt/docs/com/mgnt/utils/JsonUtils.html\r\n  [5]: https://search.maven.org/artifact/com.github.michaelgantman/MgntUtils\r\n  [6]: https://github.com/michaelgantman/Mgnt/releases","title":"How do I convert/consume an external REST API response body from json/string to bean - I&#39;m using Spring Boot-Maven","body":"<p>In order to convert your JSON string into your <code>RomaniaData</code> you can use Jackson library, and in particular <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html\" rel=\"nofollow noreferrer\">ObjectMapper</a> class and its method <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html#readValue(java.lang.String,%20java.lang.Class)\" rel=\"nofollow noreferrer\">readValue()</a>. If your Json has some unknown properties you can ignore them as described <a href=\"https://www.baeldung.com/jackson-deserialize-json-unknown-properties\" rel=\"nofollow noreferrer\">Jackson Unmarshalling JSON with Unknown Properties</a>.\nAlso you can use an Open-source library MgntUtils that provides class <a href=\"http://michaelgantman.github.io/Mgnt/docs/com/mgnt/utils/JsonUtils.html\" rel=\"nofollow noreferrer\">JsonUtils</a> which is a wrapper over Jackson library anyway. With that class parsing your Json String would look like this:</p>\n<pre><code>RomaniaData romaniaData = null;\ntry {\n      romaniaData = JsonUtils.readObjectFromJsonString(jsonString, RomaniaData.class);\n    }\n} catch (IOException e) {\n   ...\n}\n</code></pre>\n<p>The Maven artifacts for MgntUtils library could be found <a href=\"https://search.maven.org/artifact/com.github.michaelgantman/MgntUtils\" rel=\"nofollow noreferrer\">here</a>, and library as a jar along with Javadoc and source code could be found on Github <a href=\"https://github.com/michaelgantman/Mgnt/releases\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":19442387,"reputation":39,"user_id":14220554,"display_name":"Art"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5458,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71591224,"answer_count":2,"score":0,"last_activity_date":1648055133,"creation_date":1648053322,"question_id":71590834,"body_markdown":"I&#39;m trying to build a simple web app which sends a request to x-rapid api to retrieve information about covid cases in a country.\r\n\r\nI am using Spring Boot Maven project and, in the RestController, I don&#39;t know how to take the response from the external API, turn it into a bean which I can later use its properties to have them displayed in a thymeleaf generated table on the html homepage.\r\n\r\nThis is the body of the response:\r\n{&quot;get&quot;:&quot;statistics&quot;,&quot;parameters&quot;:{&quot;country&quot;:&quot;romania&quot;},&quot;errors&quot;:[],&quot;results&quot;:1,&quot;response&quot;:[{&quot;continent&quot;:&quot;Europe&quot;,&quot;country&quot;:&quot;Romania&quot;,&quot;population&quot;:19017233,&quot;cases&quot;:{&quot;new&quot;:&quot;+4521&quot;,&quot;active&quot;:156487,&quot;critical&quot;:431,&quot;recovered&quot;:2606660,&quot;1M_pop&quot;:&quot;148704&quot;,&quot;total&quot;:2827936},&quot;deaths&quot;:{&quot;new&quot;:&quot;+35&quot;,&quot;1M_pop&quot;:&quot;3407&quot;,&quot;total&quot;:64789},&quot;tests&quot;:{&quot;1M_pop&quot;:&quot;1149360&quot;,&quot;total&quot;:21857638},&quot;day&quot;:&quot;2022-03-23&quot;,&quot;time&quot;:&quot;2022-03-23T16:15:03+00:00&quot;}]}\r\n\r\n```\r\n@RestController\r\npublic class CovidTrackerRestController {\r\n\t\r\n\t@Autowired\r\n\tprivate RestTemplate restTemplate;\r\n\t\r\n//RomaniaData class has been created to take in the relevant json properties and ignore the rest\r\n//I want to use spring boot to call the setters of this class and populate them with the relevant\r\n//json properties\r\n//I&#39;m thinking of later persisting this data to a mysql database\r\n\t@Autowired\r\n\tprivate RomaniaData romaniaData;\r\n\r\n\t@GetMapping(&quot;/hello&quot;)\r\n\tpublic String showCovidInformation() {\r\n\t\t\r\n\t\t// connect to a covid database\r\n\t\t\t\t\t\t\r\n\t\tHttpRequest request = HttpRequest.newBuilder()\r\n\t\t\t\t.uri(URI.create(&quot;https://covid-193.p.rapidapi.com/statistics?country=romania&quot;))\r\n\t\t\t\t.header(&quot;X-RapidAPI-Host&quot;, &quot;covid-193.p.rapidapi.com&quot;)\r\n\t\t\t\t.header(&quot;X-RapidAPI-Key&quot;, &quot;mykey&quot;)\r\n\t\t\t\t.method(&quot;GET&quot;, HttpRequest.BodyPublishers.noBody())\r\n\t\t\t\t.build();\r\n\t\tHttpResponse&lt;String&gt; response = null;\r\n\t\t\r\n\t\ttry {\r\n\t\t\tresponse = HttpClient.newHttpClient().send(request, HttpResponse.BodyHandlers.ofString());\r\n\t\t} catch (IOException | InterruptedException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t//System.out.println(response.body());\r\n\t\t\r\n\t\t//I need to transform the response from the X-RapidAPI from Json to Java Object to send it to my thymeleaf html page \r\n\t\t// to be displayed in a table.\r\n\t\t\r\n\t\t// get the information\r\n\t\tString responseString = response.body();\r\n\t\t\r\n\t\t// format the information\r\n\t\tSystem.out.println(response.body());\r\n\t\t\t\t\r\n\t\t\r\n\t\t// send the information to html page\r\n\t\treturn &quot;/tracker&quot;;\r\n\t}\r\n\t\r\n\tprivate HttpHeaders getHeaders() {\r\n\t\tHttpHeaders httpHeaders = new HttpHeaders();\r\n\t\thttpHeaders.setContentType(MediaType.APPLICATION_JSON);\r\n\t\thttpHeaders.add(&quot;covid-193.p.rapidapi.com&quot;, &quot;mykey&quot;);\r\n\t\treturn httpHeaders;\r\n\t}\r\n```\r\n\r\nHow do I transform the responseString into a RomaniaData object? ","title":"How do I convert/consume an external REST API response body from json/string to bean - I&#39;m using Spring Boot-Maven","body":"<p>I'm trying to build a simple web app which sends a request to x-rapid api to retrieve information about covid cases in a country.</p>\n<p>I am using Spring Boot Maven project and, in the RestController, I don't know how to take the response from the external API, turn it into a bean which I can later use its properties to have them displayed in a thymeleaf generated table on the html homepage.</p>\n<p>This is the body of the response:\n{&quot;get&quot;:&quot;statistics&quot;,&quot;parameters&quot;:{&quot;country&quot;:&quot;romania&quot;},&quot;errors&quot;:[],&quot;results&quot;:1,&quot;response&quot;:[{&quot;continent&quot;:&quot;Europe&quot;,&quot;country&quot;:&quot;Romania&quot;,&quot;population&quot;:19017233,&quot;cases&quot;:{&quot;new&quot;:&quot;+4521&quot;,&quot;active&quot;:156487,&quot;critical&quot;:431,&quot;recovered&quot;:2606660,&quot;1M_pop&quot;:&quot;148704&quot;,&quot;total&quot;:2827936},&quot;deaths&quot;:{&quot;new&quot;:&quot;+35&quot;,&quot;1M_pop&quot;:&quot;3407&quot;,&quot;total&quot;:64789},&quot;tests&quot;:{&quot;1M_pop&quot;:&quot;1149360&quot;,&quot;total&quot;:21857638},&quot;day&quot;:&quot;2022-03-23&quot;,&quot;time&quot;:&quot;2022-03-23T16:15:03+00:00&quot;}]}</p>\n<pre><code>@RestController\npublic class CovidTrackerRestController {\n    \n    @Autowired\n    private RestTemplate restTemplate;\n    \n//RomaniaData class has been created to take in the relevant json properties and ignore the rest\n//I want to use spring boot to call the setters of this class and populate them with the relevant\n//json properties\n//I'm thinking of later persisting this data to a mysql database\n    @Autowired\n    private RomaniaData romaniaData;\n\n    @GetMapping(&quot;/hello&quot;)\n    public String showCovidInformation() {\n        \n        // connect to a covid database\n                        \n        HttpRequest request = HttpRequest.newBuilder()\n                .uri(URI.create(&quot;https://covid-193.p.rapidapi.com/statistics?country=romania&quot;))\n                .header(&quot;X-RapidAPI-Host&quot;, &quot;covid-193.p.rapidapi.com&quot;)\n                .header(&quot;X-RapidAPI-Key&quot;, &quot;mykey&quot;)\n                .method(&quot;GET&quot;, HttpRequest.BodyPublishers.noBody())\n                .build();\n        HttpResponse&lt;String&gt; response = null;\n        \n        try {\n            response = HttpClient.newHttpClient().send(request, HttpResponse.BodyHandlers.ofString());\n        } catch (IOException | InterruptedException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        //System.out.println(response.body());\n        \n        //I need to transform the response from the X-RapidAPI from Json to Java Object to send it to my thymeleaf html page \n        // to be displayed in a table.\n        \n        // get the information\n        String responseString = response.body();\n        \n        // format the information\n        System.out.println(response.body());\n                \n        \n        // send the information to html page\n        return &quot;/tracker&quot;;\n    }\n    \n    private HttpHeaders getHeaders() {\n        HttpHeaders httpHeaders = new HttpHeaders();\n        httpHeaders.setContentType(MediaType.APPLICATION_JSON);\n        httpHeaders.add(&quot;covid-193.p.rapidapi.com&quot;, &quot;mykey&quot;);\n        return httpHeaders;\n    }\n</code></pre>\n<p>How do I transform the responseString into a RomaniaData object?</p>\n"},{"tags":["java","ethereum","web3-java"],"answers":[{"tags":[],"owner":{"account_id":223484,"reputation":61166,"user_id":482717,"accept_rate":66,"display_name":"Paul Verest"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1630031930,"creation_date":1630031930,"answer_id":68947417,"question_id":68933870,"body_markdown":"This seems to be connectivity issue, once ensured that it can connect to blockchain node, the issue is gone.","title":"WARN org.web3j.protocol.core.filters.Filter.reinstallFilter(153) -The filter has not been found. Filter id:","body":"<p>This seems to be connectivity issue, once ensured that it can connect to blockchain node, the issue is gone.</p>\n"}],"owner":{"account_id":223484,"reputation":61166,"user_id":482717,"accept_rate":66,"display_name":"Paul Verest"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1010,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1648054919,"creation_date":1629961033,"question_id":68933870,"body_markdown":"Related Docs:  \r\n- Filters and Flowables http://docs.web3j.io/4.8.7/getting_started/pub_sub/\r\n- Filters and Events http://docs.web3j.io/4.8.7/advanced/filters_and_events/\r\n- Events https://docs.soliditylang.org/en/develop/contracts.html#events\r\n\r\nI am trying to implement reading blockchain events using web3j (v4.8.7)\r\n\r\n```java\r\n/*\r\n */\r\n@Slf4j\r\n@Component\r\npublic class ContractEventSubscriber {\r\n\r\n    @Autowired\r\n    Web3j web3j;\r\n\r\n\r\n    @PostConstruct\r\n    public void init() {\r\n        log.info(&quot;Initializing...&quot;);\r\n        web3j.blockFlowable(false).subscribe(\r\n                block -&gt; {\r\n                    log.info(&quot;New block {}&quot;, block);\r\n                }, error -&gt; {\r\n                    log.error(&quot;Event error: {}&quot;, error, error); //!\r\n                });\r\n\r\n        log.info(&quot;Initialized.&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nand this init already fails,\r\nwith warning `The filter has not been found` as if something was missing or got lost:\r\n\r\n\r\n```\r\n2021-08-26 14:40:23,723 [main] INFO  com.xcompany.web3j.ContractEventSubscriber.init(43) -Initializing...\r\n2021-08-26 14:40:25,134 [pool-2-thread-1] WARN  org.web3j.protocol.core.filters.Filter.reinstallFilter(153) -The filter has not been found. Filter id: 330683721788227458774458119455366581270\r\nLogging initialized using &#39;class org.apache.ibatis.logging.stdout.StdOutImpl&#39; adapter.\r\n2021-08-26 14:40:25,420 [pool-2-thread-1] ERROR org.web3j.protocol.core.filters.Filter.lambda$run$0(97) -Error sending request\r\norg.web3j.protocol.core.filters.FilterException: Error sending request\r\n\tat org.web3j.protocol.core.filters.Filter.throwException(Filter.java:194)\r\n\tat org.web3j.protocol.core.filters.Filter.run(Filter.java:104)\r\n\tat org.web3j.protocol.core.filters.Filter.reinstallFilter(Filter.java:155)\r\n\tat org.web3j.protocol.core.filters.Filter.pollFilter(Filter.java:137)\r\n\tat org.web3j.protocol.core.filters.Filter.lambda$run$0(Filter.java:92)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: java.io.InterruptedIOException: interrupted\r\n\tat okio.Timeout.throwIfReached(Timeout.kt:98)\r\n\tat okio.OutputStreamSink.write(Okio.kt:53)\r\n\tat okio.AsyncTimeout$sink$1.write(AsyncTimeout.kt:103)\r\n\tat okio.RealBufferedSink.flush(RealBufferedSink.kt:247)\r\n\tat okhttp3.internal.http1.Http1ExchangeCodec.finishRequest(Http1ExchangeCodec.kt:158)\r\n\tat okhttp3.internal.connection.Exchange.finishRequest(Exchange.kt:90)\r\n\tat okhttp3.internal.http.CallServerInterceptor.intercept(CallServerInterceptor.kt:76)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:112)\r\n\tat okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:37)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:112)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:87)\r\n\tat okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:82)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:112)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:87)\r\n\tat okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:84)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:112)\r\n\tat okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:71)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:112)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:87)\r\n\tat com.huobi.pool.hedging.strategy.contract.config.RetryInterceptor.intercept(RetryInterceptor.java:25)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:112)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:87)\r\n\tat okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.kt:194)\r\n\tat okhttp3.RealCall.execute(RealCall.kt:67)\r\n\tat org.web3j.protocol.http.HttpService.performIO(HttpService.java:165)\r\n\tat org.web3j.protocol.Service.send(Service.java:48)\r\n\tat org.web3j.protocol.core.Request.send(Request.java:87)\r\n\tat org.web3j.protocol.core.filters.BlockFilter.sendRequest(BlockFilter.java:34)\r\n\tat org.web3j.protocol.core.filters.Filter.run(Filter.java:59)\r\n\t... 10 common frames omitted\r\n\r\n```\r\n\r\n","title":"WARN org.web3j.protocol.core.filters.Filter.reinstallFilter(153) -The filter has not been found. Filter id:","body":"<p>Related Docs:</p>\n<ul>\n<li>Filters and Flowables <a href=\"http://docs.web3j.io/4.8.7/getting_started/pub_sub/\" rel=\"nofollow noreferrer\">http://docs.web3j.io/4.8.7/getting_started/pub_sub/</a></li>\n<li>Filters and Events <a href=\"http://docs.web3j.io/4.8.7/advanced/filters_and_events/\" rel=\"nofollow noreferrer\">http://docs.web3j.io/4.8.7/advanced/filters_and_events/</a></li>\n<li>Events <a href=\"https://docs.soliditylang.org/en/develop/contracts.html#events\" rel=\"nofollow noreferrer\">https://docs.soliditylang.org/en/develop/contracts.html#events</a></li>\n</ul>\n<p>I am trying to implement reading blockchain events using web3j (v4.8.7)</p>\n<pre class=\"lang-java prettyprint-override\"><code>/*\n */\n@Slf4j\n@Component\npublic class ContractEventSubscriber {\n\n    @Autowired\n    Web3j web3j;\n\n\n    @PostConstruct\n    public void init() {\n        log.info(&quot;Initializing...&quot;);\n        web3j.blockFlowable(false).subscribe(\n                block -&gt; {\n                    log.info(&quot;New block {}&quot;, block);\n                }, error -&gt; {\n                    log.error(&quot;Event error: {}&quot;, error, error); //!\n                });\n\n        log.info(&quot;Initialized.&quot;);\n    }\n\n}\n</code></pre>\n<p>and this init already fails,\nwith warning <code>The filter has not been found</code> as if something was missing or got lost:</p>\n<pre><code>2021-08-26 14:40:23,723 [main] INFO  com.xcompany.web3j.ContractEventSubscriber.init(43) -Initializing...\n2021-08-26 14:40:25,134 [pool-2-thread-1] WARN  org.web3j.protocol.core.filters.Filter.reinstallFilter(153) -The filter has not been found. Filter id: 330683721788227458774458119455366581270\nLogging initialized using 'class org.apache.ibatis.logging.stdout.StdOutImpl' adapter.\n2021-08-26 14:40:25,420 [pool-2-thread-1] ERROR org.web3j.protocol.core.filters.Filter.lambda$run$0(97) -Error sending request\norg.web3j.protocol.core.filters.FilterException: Error sending request\n    at org.web3j.protocol.core.filters.Filter.throwException(Filter.java:194)\n    at org.web3j.protocol.core.filters.Filter.run(Filter.java:104)\n    at org.web3j.protocol.core.filters.Filter.reinstallFilter(Filter.java:155)\n    at org.web3j.protocol.core.filters.Filter.pollFilter(Filter.java:137)\n    at org.web3j.protocol.core.filters.Filter.lambda$run$0(Filter.java:92)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.io.InterruptedIOException: interrupted\n    at okio.Timeout.throwIfReached(Timeout.kt:98)\n    at okio.OutputStreamSink.write(Okio.kt:53)\n    at okio.AsyncTimeout$sink$1.write(AsyncTimeout.kt:103)\n    at okio.RealBufferedSink.flush(RealBufferedSink.kt:247)\n    at okhttp3.internal.http1.Http1ExchangeCodec.finishRequest(Http1ExchangeCodec.kt:158)\n    at okhttp3.internal.connection.Exchange.finishRequest(Exchange.kt:90)\n    at okhttp3.internal.http.CallServerInterceptor.intercept(CallServerInterceptor.kt:76)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:112)\n    at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:37)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:112)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:87)\n    at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:82)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:112)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:87)\n    at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:84)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:112)\n    at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:71)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:112)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:87)\n    at com.huobi.pool.hedging.strategy.contract.config.RetryInterceptor.intercept(RetryInterceptor.java:25)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:112)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:87)\n    at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.kt:194)\n    at okhttp3.RealCall.execute(RealCall.kt:67)\n    at org.web3j.protocol.http.HttpService.performIO(HttpService.java:165)\n    at org.web3j.protocol.Service.send(Service.java:48)\n    at org.web3j.protocol.core.Request.send(Request.java:87)\n    at org.web3j.protocol.core.filters.BlockFilter.sendRequest(BlockFilter.java:34)\n    at org.web3j.protocol.core.filters.Filter.run(Filter.java:59)\n    ... 10 common frames omitted\n\n</code></pre>\n"},{"tags":["java","eclipse","annotation-processing"],"comments":[{"owner":{"account_id":70734,"reputation":14669,"user_id":204845,"accept_rate":68,"display_name":"Arne Deutsch"},"score":0,"creation_date":1384611481,"post_id":18102444,"comment_id":29810608,"body_markdown":"Yes, it seems it is not implemented. Anyone a workaround?","body":"Yes, it seems it is not implemented. Anyone a workaround?"},{"owner":{"account_id":1969083,"reputation":6498,"user_id":1768565,"display_name":"Jurgen Vinju"},"score":1,"creation_date":1429270501,"post_id":18102444,"comment_id":47532087,"body_markdown":"Did you every solve this one? I&#39;ve a similar problem: http://stackoverflow.com/questions/29658252/how-to-obtain-the-right-javafilemanager-in-a-java-annotation-processor","body":"Did you every solve this one? I&#39;ve a similar problem: <a href=\"http://stackoverflow.com/questions/29658252/how-to-obtain-the-right-javafilemanager-in-a-java-annotation-processor\" title=\"how to obtain the right javafilemanager in a java annotation processor\">stackoverflow.com/questions/29658252/&hellip;</a>"},{"owner":{"account_id":8857003,"reputation":418,"user_id":6614435,"display_name":"J&#252;rgen"},"score":0,"creation_date":1472769301,"post_id":18102444,"comment_id":65898104,"body_markdown":"More important than the source location is the location in your output folder. Did you check that the file is also in output/META-INF/resource-bundle? How do you build? What is your output folder and which path do you specify when loading the bundle?","body":"More important than the source location is the location in your output folder. Did you check that the file is also in output/META-INF/resource-bundle? How do you build? What is your output folder and which path do you specify when loading the bundle?"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1500791080,"post_id":18102444,"comment_id":77487570,"body_markdown":"Why not `MyProject/src/main/java/my/package/MyInterfaces.java.`?","body":"Why not <code>MyProject&#47;src&#47;main&#47;java&#47;my&#47;package&#47;MyInterfaces.java.</code>?"}],"answers":[{"tags":[],"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1478213841,"creation_date":1478213841,"answer_id":40412610,"question_id":18102444,"body_markdown":"&gt; My problem is that the properties files are not available via the classloader of the processor or via `Filer.getResource(...)`.\r\n\r\nI&#39;m not sure I&#39;m understanding your problem.  But maybe something here will help.\r\n\r\n&gt; How can I make the source or classpath of this project available to the processor, so that I can load the properties files ?\r\n\r\nYou need to add the `src/main/resources` as a &quot;source folder&quot; in Eclipse.  First select `Configure Build Path` in Eclipse on your Java project.  Then choose the `Source` tab and click on `Add Folder`.  You should be able to select the `src/main/resources` folder and click `Ok`.  You should now see the `src/main/resources` in the Source Folders list.\r\n\r\nIf you look into your `target/classes` directory, you should see all of the files from the resources directory in there which lets you know that they were copied into the classpath correctly.\r\n\r\n    # files in the src main resources\r\n    &gt; ls src/main/resources/x/y/z\r\n    jgroups_udp.xml\r\n    # should compile into target/classes\r\n    &gt; ls target/classes/x/y/z\r\n    jgroups_udp.xml org\r\n    # and should show up in the jar\r\n    &gt; -tvf target/project.jar \r\n       0 Thu Nov 03 18:50:00 EDT 2016 META-INF/\r\n     135 Thu Nov 03 18:49:58 EDT 2016 META-INF/MANIFEST.MF\r\n     ...\r\n    3036 Thu Nov 03 18:49:36 EDT 2016 x/y/z/jgroups_udp.xml\r\n\r\nThen in your code you can reference the file by doing the following.  This will load the file from the top of the classpath.  If it is in a subdir then you lead with:\r\n\r\n\tInputStream stream =\r\n        getClass().getClassLoader().getResourceAsStream(&quot;x/y/z/jgroups_udp.xml&quot;);\r\n\r\nBtw, if you _were_ using maven, you would add something like the following to you `pom.xml`:\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;resources&gt;\r\n\t\t\t&lt;resource&gt;\r\n\t\t\t\t&lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n\t\t\t&lt;/resource&gt;\r\n\t\t&lt;/resources&gt;\r\n\t&lt;/build&gt;\r\n","title":"Cannot load resources in Annotation Processor (Not on classpath)","body":"<blockquote>\n  <p>My problem is that the properties files are not available via the classloader of the processor or via <code>Filer.getResource(...)</code>.</p>\n</blockquote>\n\n<p>I'm not sure I'm understanding your problem.  But maybe something here will help.</p>\n\n<blockquote>\n  <p>How can I make the source or classpath of this project available to the processor, so that I can load the properties files ?</p>\n</blockquote>\n\n<p>You need to add the <code>src/main/resources</code> as a \"source folder\" in Eclipse.  First select <code>Configure Build Path</code> in Eclipse on your Java project.  Then choose the <code>Source</code> tab and click on <code>Add Folder</code>.  You should be able to select the <code>src/main/resources</code> folder and click <code>Ok</code>.  You should now see the <code>src/main/resources</code> in the Source Folders list.</p>\n\n<p>If you look into your <code>target/classes</code> directory, you should see all of the files from the resources directory in there which lets you know that they were copied into the classpath correctly.</p>\n\n<pre><code># files in the src main resources\n&gt; ls src/main/resources/x/y/z\njgroups_udp.xml\n# should compile into target/classes\n&gt; ls target/classes/x/y/z\njgroups_udp.xml org\n# and should show up in the jar\n&gt; -tvf target/project.jar \n   0 Thu Nov 03 18:50:00 EDT 2016 META-INF/\n 135 Thu Nov 03 18:49:58 EDT 2016 META-INF/MANIFEST.MF\n ...\n3036 Thu Nov 03 18:49:36 EDT 2016 x/y/z/jgroups_udp.xml\n</code></pre>\n\n<p>Then in your code you can reference the file by doing the following.  This will load the file from the top of the classpath.  If it is in a subdir then you lead with:</p>\n\n<pre><code>InputStream stream =\n    getClass().getClassLoader().getResourceAsStream(\"x/y/z/jgroups_udp.xml\");\n</code></pre>\n\n<p>Btw, if you <em>were</em> using maven, you would add something like the following to you <code>pom.xml</code>:</p>\n\n<pre><code>&lt;build&gt;\n    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10536322,"reputation":131,"user_id":7764094,"display_name":"cookie_monster"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1504812451,"creation_date":1504812451,"answer_id":46103752,"question_id":18102444,"body_markdown":"As a workaround you could try to add the classpath you need to use via a command line argument -Xboothclasspath/a:path, the /a will append the value in path to the boot class path.  You would need to add this as a command line option to the actual annotation processing run so in Eclipse that would be:\r\nRight click project, select properties, Java Compiler, Annotation Processing, click New in the table and add key -Xbootclasspath/a and the path to add as value.  I&#39;m afraid I haven&#39;t tried this for annotation processing but it&#39;s worth a try!","title":"Cannot load resources in Annotation Processor (Not on classpath)","body":"<p>As a workaround you could try to add the classpath you need to use via a command line argument -Xboothclasspath/a:path, the /a will append the value in path to the boot class path.  You would need to add this as a command line option to the actual annotation processing run so in Eclipse that would be:\nRight click project, select properties, Java Compiler, Annotation Processing, click New in the table and add key -Xbootclasspath/a and the path to add as value.  I'm afraid I haven't tried this for annotation processing but it's worth a try!</p>\n"},{"tags":[],"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1648054531,"creation_date":1557060238,"answer_id":55992061,"question_id":18102444,"body_markdown":"The issue is the ClassLoader that is bound to the current thread (`Thread.currentThread().getContextClassLoader()`) is not a URLClassLoader when `Processor#process` is called. It appears to be a restricted class loader that does not allowing loading resources. This happens with javac, eclipse compiler, maven compiler, etc.\r\n\r\nLuckily your processor class will have an appropriate ClassLoader bound to it (ie `getClass().getClassLoader()`).\r\n\r\nThe problem is most utilities expect the correct ClassLoader to be bound to the thread (most notably the ServiceLoader and ResourceBundles).\r\n\r\nThus there is a work around. When your Processor executes you can rebind the ClassLoader to the current thread:\r\n\r\n\t@Override\r\n\tpublic boolean process(\r\n\t\t\tSet&lt;? extends TypeElement&gt; annotations,\r\n\t\t\tRoundEnvironment roundEnv) {\r\n\r\n\t\tThread.currentThread().setContextClassLoader(getClass().getClassLoader());\r\n        //...\r\n    }\r\n\r\n**EDIT:**\r\n\r\nI have feeling a large amount of people are having the problem of resources that are in `src/main/resources` with Eclipse not loading them using the annotation processor `Filer` (throws an exception).\r\n\r\nAnd indeed it is a well known issue that Eclipse will not load `target/classes` resources. The classpath hack I showed above may or may not work and was more for other libraries being used by the processor (as in they are already compiled with the resources).\r\n\r\nThe solution (if it could be called that) is to load the files like they are normal files. This requires guessing [the project structure with some hacks](https://stackoverflow.com/a/37678539/318174).\r\n\r\nOR\r\n\r\nYou can tell Eclipse users just to put the resources in `src/main/java`.\r\n\r\n\r\n\r\n","title":"Cannot load resources in Annotation Processor (Not on classpath)","body":"<p>The issue is the ClassLoader that is bound to the current thread (<code>Thread.currentThread().getContextClassLoader()</code>) is not a URLClassLoader when <code>Processor#process</code> is called. It appears to be a restricted class loader that does not allowing loading resources. This happens with javac, eclipse compiler, maven compiler, etc.</p>\n<p>Luckily your processor class will have an appropriate ClassLoader bound to it (ie <code>getClass().getClassLoader()</code>).</p>\n<p>The problem is most utilities expect the correct ClassLoader to be bound to the thread (most notably the ServiceLoader and ResourceBundles).</p>\n<p>Thus there is a work around. When your Processor executes you can rebind the ClassLoader to the current thread:</p>\n<pre><code>@Override\npublic boolean process(\n        Set&lt;? extends TypeElement&gt; annotations,\n        RoundEnvironment roundEnv) {\n\n    Thread.currentThread().setContextClassLoader(getClass().getClassLoader());\n    //...\n}\n</code></pre>\n<p><strong>EDIT:</strong></p>\n<p>I have feeling a large amount of people are having the problem of resources that are in <code>src/main/resources</code> with Eclipse not loading them using the annotation processor <code>Filer</code> (throws an exception).</p>\n<p>And indeed it is a well known issue that Eclipse will not load <code>target/classes</code> resources. The classpath hack I showed above may or may not work and was more for other libraries being used by the processor (as in they are already compiled with the resources).</p>\n<p>The solution (if it could be called that) is to load the files like they are normal files. This requires guessing <a href=\"https://stackoverflow.com/a/37678539/318174\">the project structure with some hacks</a>.</p>\n<p>OR</p>\n<p>You can tell Eclipse users just to put the resources in <code>src/main/java</code>.</p>\n"}],"owner":{"account_id":544304,"reputation":209,"user_id":913709,"display_name":"CCHET"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3699,"favorite_count":0,"down_vote_count":1,"up_vote_count":21,"answer_count":3,"score":20,"last_activity_date":1648054531,"creation_date":1375875588,"question_id":18102444,"body_markdown":"I have an annotation processor which shall generate a enumeration with the keys defined by getter methods of an interface.\r\n\r\nThe interface resides in \r\n\r\n&gt;MyProject/src/main/java/my.package.MyInterfaces.java.\r\n\r\nI want to validate the properties files which reside in `MyProject/src/main/resources/META-INF/resource-bundle/` if they do contain the keys defined in the generated enum.\r\n\r\nMy problem is that the properties files are not available via the classloader of the processor or via Filer.getResource(...).\r\n\r\n- How can I make the source or classpath of this project available to the processor, so that I can load the properties files ?\r\n\r\n- Now I have only the resources within the jar where the processor resides available.\r\nI did try to define -classpath and/or -sourcepath via eclipse Project/Properties/Java compiler/Annotation processing/Processor options but it did not work out.\r\n\r\nHas anyone faced an issue like this, and can anyone give me a clue as to how I can make the resources available for the processor?\r\n\r\nI do have the maven structure but do not use maven, because of old dependencies within the application. So maven is now not an option for me.\r\n\r\n&gt;Eclipse 3.6 Helios\r\nSeems that `StandardLocation.SOURCE_PATH` and `StandardLocation.CLASS_PATH` are not implemented in Filer#getResource(), so writing generated source or class files to `SOURCE_PATH` or `CLASS_PATH` seems not be possible, also accessing any files on `SOURCE_PATH` and `CLASS_PATH`*\r\n \r\nThanks.","title":"Cannot load resources in Annotation Processor (Not on classpath)","body":"<p>I have an annotation processor which shall generate a enumeration with the keys defined by getter methods of an interface.</p>\n\n<p>The interface resides in </p>\n\n<blockquote>\n  <p>MyProject/src/main/java/my.package.MyInterfaces.java.</p>\n</blockquote>\n\n<p>I want to validate the properties files which reside in <code>MyProject/src/main/resources/META-INF/resource-bundle/</code> if they do contain the keys defined in the generated enum.</p>\n\n<p>My problem is that the properties files are not available via the classloader of the processor or via Filer.getResource(...).</p>\n\n<ul>\n<li><p>How can I make the source or classpath of this project available to the processor, so that I can load the properties files ?</p></li>\n<li><p>Now I have only the resources within the jar where the processor resides available.\nI did try to define -classpath and/or -sourcepath via eclipse Project/Properties/Java compiler/Annotation processing/Processor options but it did not work out.</p></li>\n</ul>\n\n<p>Has anyone faced an issue like this, and can anyone give me a clue as to how I can make the resources available for the processor?</p>\n\n<p>I do have the maven structure but do not use maven, because of old dependencies within the application. So maven is now not an option for me.</p>\n\n<blockquote>\n  <p>Eclipse 3.6 Helios\n  Seems that <code>StandardLocation.SOURCE_PATH</code> and <code>StandardLocation.CLASS_PATH</code> are not implemented in Filer#getResource(), so writing generated source or class files to <code>SOURCE_PATH</code> or <code>CLASS_PATH</code> seems not be possible, also accessing any files on <code>SOURCE_PATH</code> and <code>CLASS_PATH</code>*</p>\n</blockquote>\n\n<p>Thanks.</p>\n"},{"tags":["java","android","android-recyclerview"],"owner":{"account_id":7761740,"reputation":361,"user_id":5874272,"accept_rate":29,"display_name":"gojic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1648054394,"creation_date":1648054394,"question_id":71591075,"body_markdown":"OK,i have ScrollView with multiply recyclerview-s.When user click on some item on my list that item expand itself with some more info. The problem is that although it does expand correctly, my root view(in my case ScrollView) does not follow that expansion automatically ,so i need to scroll manually to see expanded item.So i used `scrollView.fullScroll(View.FOCUS_DOWN)` in onClick in my recyclerview.And it works fine but after this line of code is triggered every other click on some other recycelerView it scroll down although that recyclerview does not have fullScroll(). \r\n\r\nI tried to use `scrollTo()`,`smoothScrollTo` etc.I dont use ExpandableRecyclerView but ***cachapa/ExpandableLayout*** and in this [thread][1] developer said that it is rather the parent View &quot;issue&quot;.Also tried solution from the same thread but problem persist.\r\n\r\nSo my question is how to stop triggering fullScroll(View.FOCUS_DOWN) when i click on other recuclerviews items.\r\n\r\nmy code: \r\n\r\n    `  animaton.setOnClickListener(v -&gt; {\r\n    \r\n                    notifyDataSetChanged();\r\n                    //some stuff\r\n    \r\n                        scrollView.post(new Runnable() {\r\n                            public void run() {\r\n                                scrollView.fullScroll(View.FOCUS_DOWN);\r\n                            }\r\n                        });\r\n                });`\r\n\r\n  [1]: https://github.com/cachapa/ExpandableLayout/issues/13","title":"scrollView.fullScroll(View.FOCUS_DOWN); always is triggered","body":"<p>OK,i have ScrollView with multiply recyclerview-s.When user click on some item on my list that item expand itself with some more info. The problem is that although it does expand correctly, my root view(in my case ScrollView) does not follow that expansion automatically ,so i need to scroll manually to see expanded item.So i used <code>scrollView.fullScroll(View.FOCUS_DOWN)</code> in onClick in my recyclerview.And it works fine but after this line of code is triggered every other click on some other recycelerView it scroll down although that recyclerview does not have fullScroll().</p>\n<p>I tried to use <code>scrollTo()</code>,<code>smoothScrollTo</code> etc.I dont use ExpandableRecyclerView but <em><strong>cachapa/ExpandableLayout</strong></em> and in this <a href=\"https://github.com/cachapa/ExpandableLayout/issues/13\" rel=\"nofollow noreferrer\">thread</a> developer said that it is rather the parent View &quot;issue&quot;.Also tried solution from the same thread but problem persist.</p>\n<p>So my question is how to stop triggering fullScroll(View.FOCUS_DOWN) when i click on other recuclerviews items.</p>\n<p>my code:</p>\n<pre><code>`  animaton.setOnClickListener(v -&gt; {\n\n                notifyDataSetChanged();\n                //some stuff\n\n                    scrollView.post(new Runnable() {\n                        public void run() {\n                            scrollView.fullScroll(View.FOCUS_DOWN);\n                        }\n                    });\n            });`\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1648048137,"post_id":71589569,"comment_id":126526257,"body_markdown":"Hint: what would you expect to happen if the next line of code was `list.add(5.5);`?","body":"Hint: what would you expect to happen if the next line of code was <code>list.add(5.5);</code>?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1648048154,"creation_date":1648048154,"answer_id":71589602,"question_id":71589569,"body_markdown":"No; generics are __invariant__. Meaning, only the type itself will do. That&#39;s because... it just has to be. Imagine it worked like you wanted:\r\n\r\n```\r\nList&lt;Integer&gt; ints = new ArrayList&lt;Integer&gt;();\r\nList&lt;Number&gt; list = ints;\r\nlist.add(new Double(5.5));\r\nInteger i = ints.get(0);\r\n```\r\n\r\nGo through it line by line. That code ends up trying to put a Double object in an Integer reference, which is just broken.\r\n\r\nYou can opt into covariance:\r\n\r\n```\r\nList&lt;? extends Number&gt; list = new ArrayList&lt;Integer&gt;();\r\n```\r\n\r\nworks just fine. However, you can&#39;t call `.add()` on such a list.\r\n","title":"create a List object and get compiler error in java","body":"<p>No; generics are <strong>invariant</strong>. Meaning, only the type itself will do. That's because... it just has to be. Imagine it worked like you wanted:</p>\n<pre><code>List&lt;Integer&gt; ints = new ArrayList&lt;Integer&gt;();\nList&lt;Number&gt; list = ints;\nlist.add(new Double(5.5));\nInteger i = ints.get(0);\n</code></pre>\n<p>Go through it line by line. That code ends up trying to put a Double object in an Integer reference, which is just broken.</p>\n<p>You can opt into covariance:</p>\n<pre><code>List&lt;? extends Number&gt; list = new ArrayList&lt;Integer&gt;();\n</code></pre>\n<p>works just fine. However, you can't call <code>.add()</code> on such a list.</p>\n"},{"tags":[],"owner":{"account_id":24147270,"reputation":34,"user_id":18112648,"display_name":"Collin Short"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1648048443,"creation_date":1648048443,"answer_id":71589669,"question_id":71589569,"body_markdown":"Could you give me the compiler error you are getting? I believe that you will either have to switch the List to an Integer or if the Number object is an Extension of the Integer class, you should be able to change the Integer to number and have the same features.\r\n```\r\nList&lt;Number&gt; list = new ArrayList&lt;Number&gt;();\r\n```\r\nI am not sure what you are trying to do but this has worked for me in the past, this way the ArrayList should behave just as the Number Class is defined.","title":"create a List object and get compiler error in java","body":"<p>Could you give me the compiler error you are getting? I believe that you will either have to switch the List to an Integer or if the Number object is an Extension of the Integer class, you should be able to change the Integer to number and have the same features.</p>\n<pre><code>List&lt;Number&gt; list = new ArrayList&lt;Number&gt;();\n</code></pre>\n<p>I am not sure what you are trying to do but this has worked for me in the past, this way the ArrayList should behave just as the Number Class is defined.</p>\n"},{"tags":[],"owner":{"account_id":13269545,"reputation":84,"user_id":9581080,"display_name":"Akshita Chawla"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648054393,"creation_date":1648054393,"answer_id":71591074,"question_id":71589569,"body_markdown":"It won&#39;t work.\r\n\r\nGeneric types in Java is that the type information for type parameters is discarded by the compiler after the compilation of code is done; therefore this type information is not available at run time. This process is called type erasure.\r\n\r\nEither you will have to use the same datatype in both places\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n\r\n    List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\nOr use wildcards(?)\r\n\r\nIn wildcards you can use covariance\r\n1) Covariance : ? extends T\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n\r\n     List&lt;? extends Number&gt; list = new ArrayList&lt;Integer&gt;();\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n\r\nOfficial Doc for reference : https://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html","title":"create a List object and get compiler error in java","body":"<p>It won't work.</p>\n<p>Generic types in Java is that the type information for type parameters is discarded by the compiler after the compilation of code is done; therefore this type information is not available at run time. This process is called type erasure.</p>\n<p>Either you will have to use the same datatype in both places</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Or use wildcards(?)</p>\n<p>In wildcards you can use covariance</p>\n<ol>\n<li>Covariance : ? extends T</li>\n</ol>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code> List&lt;? extends Number&gt; list = new ArrayList&lt;Integer&gt;();</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Official Doc for reference : <a href=\"https://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html</a></p>\n"}],"owner":{"account_id":19004691,"reputation":33,"user_id":13871638,"display_name":"gur123"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1648054393,"creation_date":1648048035,"question_id":71589569,"body_markdown":"```\r\nList&lt;Number&gt; list = new ArrayList&lt;Integer&gt;();\r\n```\r\n\r\nI am trying to create this object but I get a compiler error,\r\nbut I does not make sense because Integer extend Number, so it should work.","title":"create a List object and get compiler error in java","body":"<pre><code>List&lt;Number&gt; list = new ArrayList&lt;Integer&gt;();\n</code></pre>\n<p>I am trying to create this object but I get a compiler error,\nbut I does not make sense because Integer extend Number, so it should work.</p>\n"},{"tags":["java","android","sqlite","android-sqlite","android-cursor"],"comments":[{"owner":{"account_id":6696437,"reputation":2557,"user_id":5164318,"display_name":"emandt"},"score":0,"creation_date":1648050669,"post_id":71590179,"comment_id":126527497,"body_markdown":"And where is the Error when it crashes? How can we help you without know the Error? The most probable is that some Field in Database is NULL or there aren&#39;t 5 fields in that table.","body":"And where is the Error when it crashes? How can we help you without know the Error? The most probable is that some Field in Database is NULL or there aren&#39;t 5 fields in that table."},{"owner":{"account_id":17183073,"reputation":380,"user_id":12438210,"display_name":"lance2k"},"score":0,"creation_date":1648053947,"post_id":71590179,"comment_id":126528961,"body_markdown":"I&#39;m sorry, just new to android studio and I can&#39;t find the error message. It just restart the application when I use search button. But the app is still running on android studio.","body":"I&#39;m sorry, just new to android studio and I can&#39;t find the error message. It just restart the application when I use search button. But the app is still running on android studio."}],"answers":[{"tags":[],"owner":{"account_id":14535244,"reputation":161554,"user_id":10498828,"display_name":"forpas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648053219,"creation_date":1648052888,"answer_id":71590734,"question_id":71590179,"body_markdown":"You are missing a call to the method `moveToFirst()` before you retrieve the values of the columns:\r\n\r\n    res.moveToFirst();\r\n    prodId.setText(&quot;Product ID: &quot;+res.getString(0));\r\n    ................................................\r\n\r\nbecause the cursor&#39;s index is initially positioned before the 1st row of the results.&lt;br/&gt;\r\n\r\nOr, instead of using `getCount()` to check if the cursor returned any rows use `moveToFirst()`:\r\n\r\n    if (!res.moveToFirst()) {\r\n        Toast.makeText(RUDActivity.this, &quot;Product ID Not Found&quot;, Toast.LENGTH_SHORT).show();\r\n    } else {\r\n        prodId.setText(&quot;Product ID: &quot;+res.getString(0));\r\n        ................................................\r\n    }","title":"Searching from sqlite database and displaying record in EditText causes crash/restart, what went wrong?","body":"<p>You are missing a call to the method <code>moveToFirst()</code> before you retrieve the values of the columns:</p>\n<pre><code>res.moveToFirst();\nprodId.setText(&quot;Product ID: &quot;+res.getString(0));\n................................................\n</code></pre>\n<p>because the cursor's index is initially positioned before the 1st row of the results.<br/></p>\n<p>Or, instead of using <code>getCount()</code> to check if the cursor returned any rows use <code>moveToFirst()</code>:</p>\n<pre><code>if (!res.moveToFirst()) {\n    Toast.makeText(RUDActivity.this, &quot;Product ID Not Found&quot;, Toast.LENGTH_SHORT).show();\n} else {\n    prodId.setText(&quot;Product ID: &quot;+res.getString(0));\n    ................................................\n}\n</code></pre>\n"}],"owner":{"account_id":17183073,"reputation":380,"user_id":12438210,"display_name":"lance2k"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71590734,"answer_count":1,"score":1,"last_activity_date":1648054349,"creation_date":1648050468,"question_id":71590179,"body_markdown":"I have a crud app project in android studio. I have done insert, update, delete and view all. The only one I&#39;m having error with is the search function. The search code looks good to me, so it would be great if you can help me find my mistake. Thank you!\r\n\r\nThe table is created this way:\r\n\r\n        public void onCreate(SQLiteDatabase DB) {\r\n        DB.execSQL(&quot;create Table ProdDetails(id INTEGER primary key, name TEXT, description TEXT, price NUMERIC, quantity INTEGER)&quot;);\r\n    }\r\n\r\nThe search method, accepts input from EditText which was converted to int:\r\n\r\n        public Cursor searchData (int id)\r\n    {\r\n        SQLiteDatabase DB = this.getWritableDatabase();\r\n        Cursor cursor = DB.rawQuery(&quot;Select * from ProdDetails where id = ?&quot;, new String[]{String.valueOf(id)});\r\n        return cursor;\r\n    }\r\n\r\nThe Main class: \r\n\r\n    public class RUDActivity extends AppCompatActivity {\r\n    EditText prodId, name, description, price, quantity;\r\n    Button update, delete, view, search;\r\n    DBHelper DB;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_retrieve);\r\n        prodId = (EditText) findViewById(R.id.prodId);\r\n        name = (EditText) findViewById(R.id.name);\r\n        description = (EditText) findViewById(R.id.description);\r\n        price = (EditText) findViewById(R.id.price);\r\n        quantity = (EditText) findViewById(R.id.quantity);\r\n        search = findViewById(R.id.btnSearch);\r\n        DB = new DBHelper(this);\r\n\r\n        search.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                int prodTXT = Integer.parseInt(prodId.getText().toString());\r\n                Cursor res = DB.searchData(prodTXT);\r\n                if(res.getCount()==0){\r\n                    Toast.makeText(RUDActivity.this, &quot;Product ID Not Found&quot;, Toast.LENGTH_SHORT).show();\r\n                    return;\r\n                }\r\n\r\n                // app crash/restart after this line, am I doing this wrong?\r\n\r\n                prodId.setText(&quot;Product ID: &quot;+res.getString(0));\r\n                name.setText(&quot;Name: &quot;+res.getString(1));\r\n                description.setText(&quot;Description: &quot;+res.getString(2));\r\n                price.setText(&quot;Price: &quot;+res.getString(3));\r\n                quantity.setText(&quot;Quantity: &quot;+res.getString(4));\r\n\r\n            }\r\n        });\r\n    }\r\n    }\r\n\r\nWhen I search prodId that does not exist it would show toast message &quot;Product ID Not Found&quot; and the app won&#39;t crash/restart. But if I search a prodId that does exist the app will crash.","title":"Searching from sqlite database and displaying record in EditText causes crash/restart, what went wrong?","body":"<p>I have a crud app project in android studio. I have done insert, update, delete and view all. The only one I'm having error with is the search function. The search code looks good to me, so it would be great if you can help me find my mistake. Thank you!</p>\n<p>The table is created this way:</p>\n<pre><code>    public void onCreate(SQLiteDatabase DB) {\n    DB.execSQL(&quot;create Table ProdDetails(id INTEGER primary key, name TEXT, description TEXT, price NUMERIC, quantity INTEGER)&quot;);\n}\n</code></pre>\n<p>The search method, accepts input from EditText which was converted to int:</p>\n<pre><code>    public Cursor searchData (int id)\n{\n    SQLiteDatabase DB = this.getWritableDatabase();\n    Cursor cursor = DB.rawQuery(&quot;Select * from ProdDetails where id = ?&quot;, new String[]{String.valueOf(id)});\n    return cursor;\n}\n</code></pre>\n<p>The Main class:</p>\n<pre><code>public class RUDActivity extends AppCompatActivity {\nEditText prodId, name, description, price, quantity;\nButton update, delete, view, search;\nDBHelper DB;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_retrieve);\n    prodId = (EditText) findViewById(R.id.prodId);\n    name = (EditText) findViewById(R.id.name);\n    description = (EditText) findViewById(R.id.description);\n    price = (EditText) findViewById(R.id.price);\n    quantity = (EditText) findViewById(R.id.quantity);\n    search = findViewById(R.id.btnSearch);\n    DB = new DBHelper(this);\n\n    search.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            int prodTXT = Integer.parseInt(prodId.getText().toString());\n            Cursor res = DB.searchData(prodTXT);\n            if(res.getCount()==0){\n                Toast.makeText(RUDActivity.this, &quot;Product ID Not Found&quot;, Toast.LENGTH_SHORT).show();\n                return;\n            }\n\n            // app crash/restart after this line, am I doing this wrong?\n\n            prodId.setText(&quot;Product ID: &quot;+res.getString(0));\n            name.setText(&quot;Name: &quot;+res.getString(1));\n            description.setText(&quot;Description: &quot;+res.getString(2));\n            price.setText(&quot;Price: &quot;+res.getString(3));\n            quantity.setText(&quot;Quantity: &quot;+res.getString(4));\n\n        }\n    });\n}\n}\n</code></pre>\n<p>When I search prodId that does not exist it would show toast message &quot;Product ID Not Found&quot; and the app won't crash/restart. But if I search a prodId that does exist the app will crash.</p>\n"},{"tags":["java","grails","maven","jar","dependencies"],"comments":[{"owner":{"account_id":155716,"reputation":3560,"user_id":372550,"accept_rate":100,"display_name":"chrislatimer"},"score":1,"creation_date":1340742781,"post_id":11215351,"comment_id":14727688,"body_markdown":"That&#39;s really weird because any of those options should work...  You didn&#39;t happen to compile the classes in your JAR with a newer version of Java than you&#39;re running Grails with did you?  I ran into a similar problem with a PostgreSQL driver jar one time and that was the cause.","body":"That&#39;s really weird because any of those options should work...  You didn&#39;t happen to compile the classes in your JAR with a newer version of Java than you&#39;re running Grails with did you?  I ran into a similar problem with a PostgreSQL driver jar one time and that was the cause."},{"owner":{"account_id":64432,"reputation":65199,"user_id":190201,"accept_rate":83,"display_name":"ataylor"},"score":3,"creation_date":1340742853,"post_id":11215351,"comment_id":14727723,"body_markdown":"Can you verify the jar file contains the missing classes with `jar tf lib.jar | grep mypackage.MyClass`?","body":"Can you verify the jar file contains the missing classes with <code>jar tf lib.jar | grep mypackage.MyClass</code>?"},{"owner":{"account_id":10891,"reputation":30989,"user_id":20770,"accept_rate":74,"display_name":"cdeszaq"},"score":2,"creation_date":1340742980,"post_id":11215351,"comment_id":14727776,"body_markdown":"I&#39;ve been caught by something like this in the past... I had forgotten to `import` the classes I was using.","body":"I&#39;ve been caught by something like this in the past... I had forgotten to <code>import</code> the classes I was using."}],"answers":[{"tags":[],"owner":{"account_id":62398,"reputation":15301,"user_id":185432,"accept_rate":63,"display_name":"Marco"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1340744899,"creation_date":1340744899,"answer_id":11215950,"question_id":11215351,"body_markdown":"Putting the jar in the lib folder should do the trick. We are using the same approach currently without problems.","title":"How to add Java JAR files to Grails project?","body":"<p>Putting the jar in the lib folder should do the trick. We are using the same approach currently without problems.</p>\n"},{"tags":[],"owner":{"account_id":2860674,"reputation":2162,"user_id":2456013,"accept_rate":73,"display_name":"HLP"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1407245084,"creation_date":1407245084,"answer_id":25139969,"question_id":11215351,"body_markdown":"Adding the jar to the &quot;lib&quot; folder wasn&#39;t enough for me. I had to run:\r\n\r\n    grails compile --refresh-dependencies\r\n\r\nAfter what it worked.","title":"How to add Java JAR files to Grails project?","body":"<p>Adding the jar to the \"lib\" folder wasn't enough for me. I had to run:</p>\n\n<pre><code>grails compile --refresh-dependencies\n</code></pre>\n\n<p>After what it worked.</p>\n"},{"tags":[],"owner":{"account_id":931075,"reputation":975,"user_id":960954,"accept_rate":56,"display_name":"Yash Agarwal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1449059682,"creation_date":1449059682,"answer_id":34042902,"question_id":11215351,"body_markdown":"Grails refresh-dependency, clean etc. didn&#39;t work for me. What worked for me was exiting Grails daemon and starting Grails again.","title":"How to add Java JAR files to Grails project?","body":"<p>Grails refresh-dependency, clean etc. didn't work for me. What worked for me was exiting Grails daemon and starting Grails again.</p>\n"},{"tags":[],"owner":{"account_id":1260099,"reputation":18217,"user_id":1218618,"accept_rate":100,"display_name":"albciff"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1648054319,"creation_date":1461150842,"answer_id":36742073,"question_id":11215351,"body_markdown":"If *Grails* by default don&#39;t take the local *.jar* libraries located in `&lt;GRAILS-APP-DIR&gt;/lib` (seems that with *Grails 3.X* the `/lib` folder default configuration is removed) the easy way to enforce it is modifying `build.gradle` to add a local directory dependency for it. \r\n\r\nFor almost all cases is of course better to use the *maven* repos, however it&#39;s possible to have some `db-vendor-drivers` or other libraries which aren&#39;t in a public repo. To do so for this libraries modify the `&lt;GRAILS-APP-DIR&gt;/build.gradle` and add something like:\r\n\r\n    dependencies {\r\n        ...\r\n    \tcompile fileTree(dir: &#39;./lib&#39;, include: [&#39;*.jar&#39;])\r\n        ...\r\n    }\r\n\r\nIf you want you can use another directory (not `/lib`) since you&#39;re specifying it. Of course use the correct scope (for example for `db-vendor-drivers` which probably already are in your application container class path the scope in gradle will be `runtime` instead of `compile`).\r\n\r\n**UPDATE**\r\n\r\nStarting from gradle 7.0 use of `compile` and `runtime` are removed. Insted you can use `compileOnly`, `runtimeOnly` or `implementation` depending if you want to put the dependency only in the complie classpath, runtime classpath or on both, in gradle 7.0 and above you can use :\r\n\r\n    dependencies {\r\n        ...\r\n    \timplementation fileTree(dir: &#39;./lib&#39;, include: [&#39;*.jar&#39;])\r\n        ...\r\n    }","title":"How to add Java JAR files to Grails project?","body":"<p>If <em>Grails</em> by default don't take the local <em>.jar</em> libraries located in <code>&lt;GRAILS-APP-DIR&gt;/lib</code> (seems that with <em>Grails 3.X</em> the <code>/lib</code> folder default configuration is removed) the easy way to enforce it is modifying <code>build.gradle</code> to add a local directory dependency for it.</p>\n<p>For almost all cases is of course better to use the <em>maven</em> repos, however it's possible to have some <code>db-vendor-drivers</code> or other libraries which aren't in a public repo. To do so for this libraries modify the <code>&lt;GRAILS-APP-DIR&gt;/build.gradle</code> and add something like:</p>\n<pre><code>dependencies {\n    ...\n    compile fileTree(dir: './lib', include: ['*.jar'])\n    ...\n}\n</code></pre>\n<p>If you want you can use another directory (not <code>/lib</code>) since you're specifying it. Of course use the correct scope (for example for <code>db-vendor-drivers</code> which probably already are in your application container class path the scope in gradle will be <code>runtime</code> instead of <code>compile</code>).</p>\n<p><strong>UPDATE</strong></p>\n<p>Starting from gradle 7.0 use of <code>compile</code> and <code>runtime</code> are removed. Insted you can use <code>compileOnly</code>, <code>runtimeOnly</code> or <code>implementation</code> depending if you want to put the dependency only in the complie classpath, runtime classpath or on both, in gradle 7.0 and above you can use :</p>\n<pre><code>dependencies {\n    ...\n    implementation fileTree(dir: './lib', include: ['*.jar'])\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":30276,"reputation":58107,"user_id":82474,"accept_rate":81,"display_name":"Eric Wilson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25714,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":11215950,"answer_count":4,"score":16,"last_activity_date":1648054319,"creation_date":1340742153,"question_id":11215351,"body_markdown":"I have a few Java/Maven projects that I want to use in a Grails 2.0.4 project. I have tried various approaches, such as:\r\n\r\n 1. Installing the JAR files in my local maven repository, and executing `grails install-dependency com.foo:my-project:0.0.1-SNAPSHOT`\r\n 2. Copying the JAR files into the `lib` folder of grails.\r\n 3. Adding `compile com.foo:my-project:0.0.1-SNAPSHOT` to the dependencies section of `BuildConfig.groovy`\r\n 4. Uncommenting `mavenLocal()` and passing `/home/me/.m2/repository`\r\n\r\nI may have tried a few other things, such as superstitiously throwing in a `grails clean` whenever convenient. In every case `grails compile` yields the following result: compilation fails, unable to resolve every reference to any of the classes in either of the JARs.\r\n\r\nAny idea what I&#39;m missing?","title":"How to add Java JAR files to Grails project?","body":"<p>I have a few Java/Maven projects that I want to use in a Grails 2.0.4 project. I have tried various approaches, such as:</p>\n\n<ol>\n<li>Installing the JAR files in my local maven repository, and executing <code>grails install-dependency com.foo:my-project:0.0.1-SNAPSHOT</code></li>\n<li>Copying the JAR files into the <code>lib</code> folder of grails.</li>\n<li>Adding <code>compile com.foo:my-project:0.0.1-SNAPSHOT</code> to the dependencies section of <code>BuildConfig.groovy</code></li>\n<li>Uncommenting <code>mavenLocal()</code> and passing <code>/home/me/.m2/repository</code></li>\n</ol>\n\n<p>I may have tried a few other things, such as superstitiously throwing in a <code>grails clean</code> whenever convenient. In every case <code>grails compile</code> yields the following result: compilation fails, unable to resolve every reference to any of the classes in either of the JARs.</p>\n\n<p>Any idea what I'm missing?</p>\n"},{"tags":["java","junit","mocking","mockito"],"answers":[{"tags":[],"owner":{"account_id":1623456,"reputation":473,"user_id":1499558,"display_name":"Alex Bishop"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1410006007,"creation_date":1410006007,"answer_id":25700175,"question_id":25700059,"body_markdown":"An `ArgumentCaptor` probably is the best way to do what you want.\r\n\r\nHowever, it seems that you don’t actually care about the order of the files in the `List`. Therefore, have you considered changing `ClassB` so that it takes an unordered collection (like a `Set`) instead?","title":"Mockito; verify method was called with list, ignore order of elements in list","body":"<p>An <code>ArgumentCaptor</code> probably is the best way to do what you want.</p>\n\n<p>However, it seems that you don’t actually care about the order of the files in the <code>List</code>. Therefore, have you considered changing <code>ClassB</code> so that it takes an unordered collection (like a <code>Set</code>) instead?</p>\n"},{"tags":[],"owner":{"account_id":77350,"reputation":40747,"user_id":220834,"accept_rate":50,"display_name":"Don Roby"},"down_vote_count":1,"up_vote_count":22,"is_accepted":true,"score":21,"last_activity_date":1410011648,"creation_date":1410011648,"answer_id":25700998,"question_id":25700059,"body_markdown":"As noted in another answer, if you don&#39;t care about the order, you might do best to change the interface so it doesn&#39;t care about the order.\r\n\r\nIf order matters in the code but not in a specific test, you can use the `ArgumentCaptor` as you did.  It clutters the code a bit.\r\n\r\nIf this is something you might do in multiple tests, you might do better to use appropriate [Mockito Matchers][1] or [Hamcrest Matchers][2], or roll your own (if you don&#39;t find one that fills the need).  A hamcrest matcher might be best as it can be used in other contexts besides mockito.\r\n\r\nFor this example you could create a hamcrest matcher as follows:\r\n\r\n    import org.hamcrest.BaseMatcher;\r\n    import org.hamcrest.Description;\r\n    import org.hamcrest.Matcher;\r\n    \r\n    import java.util.Collections;\r\n    import java.util.HashSet;\r\n    import java.util.List;\r\n    import java.util.Set;\r\n\r\n    public class MyMatchers {\r\n        public  static &lt;T&gt; Matcher&lt;List&lt;T&gt;&gt; sameAsSet(final List&lt;T&gt; expectedList) {\r\n            return new BaseMatcher&lt;List&lt;T&gt;&gt;(){\r\n                @Override\r\n                public boolean matches(Object o) {\r\n                    List&lt;T&gt; actualList = Collections.EMPTY_LIST;\r\n                    try {\r\n                        actualList = (List&lt;T&gt;) o;\r\n                    }\r\n                    catch (ClassCastException e) {\r\n                        return false;\r\n                    }\r\n                    Set&lt;T&gt; expectedSet = new HashSet&lt;T&gt;(expectedList);\r\n                    Set&lt;T&gt; actualSet = new HashSet&lt;T&gt;(actualList);\r\n                    return actualSet.equals(expectedSet);\r\n                }\r\n    \r\n                @Override\r\n                public void describeTo(Description description) {\r\n                    description.appendText(&quot;should contain all and only elements of &quot;).appendValue(expectedList);\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n\r\nAnd then the verify code becomes:\r\n\r\n    verify(mockClassB).sendEvent(argThat(MyMatchers.sameAsSet(expectedFileList)));\r\n\r\nIf you instead created a mockito matcher, you wouldn&#39;t need the `argThat`, which basically wraps a hamcrest matcher in a mockito matcher.\r\n\r\nThis moves the logic of sorting or converting to set out of your test and makes it reusable.\r\n\r\n\r\n  [1]: http://docs.mockito.googlecode.com/hg/latest/org/mockito/Matchers.html\r\n  [2]: http://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/Matchers.html","title":"Mockito; verify method was called with list, ignore order of elements in list","body":"<p>As noted in another answer, if you don't care about the order, you might do best to change the interface so it doesn't care about the order.</p>\n\n<p>If order matters in the code but not in a specific test, you can use the <code>ArgumentCaptor</code> as you did.  It clutters the code a bit.</p>\n\n<p>If this is something you might do in multiple tests, you might do better to use appropriate <a href=\"http://docs.mockito.googlecode.com/hg/latest/org/mockito/Matchers.html\">Mockito Matchers</a> or <a href=\"http://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/Matchers.html\">Hamcrest Matchers</a>, or roll your own (if you don't find one that fills the need).  A hamcrest matcher might be best as it can be used in other contexts besides mockito.</p>\n\n<p>For this example you could create a hamcrest matcher as follows:</p>\n\n<pre><code>import org.hamcrest.BaseMatcher;\nimport org.hamcrest.Description;\nimport org.hamcrest.Matcher;\n\nimport java.util.Collections;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Set;\n\npublic class MyMatchers {\n    public  static &lt;T&gt; Matcher&lt;List&lt;T&gt;&gt; sameAsSet(final List&lt;T&gt; expectedList) {\n        return new BaseMatcher&lt;List&lt;T&gt;&gt;(){\n            @Override\n            public boolean matches(Object o) {\n                List&lt;T&gt; actualList = Collections.EMPTY_LIST;\n                try {\n                    actualList = (List&lt;T&gt;) o;\n                }\n                catch (ClassCastException e) {\n                    return false;\n                }\n                Set&lt;T&gt; expectedSet = new HashSet&lt;T&gt;(expectedList);\n                Set&lt;T&gt; actualSet = new HashSet&lt;T&gt;(actualList);\n                return actualSet.equals(expectedSet);\n            }\n\n            @Override\n            public void describeTo(Description description) {\n                description.appendText(\"should contain all and only elements of \").appendValue(expectedList);\n            }\n        };\n    }\n}\n</code></pre>\n\n<p>And then the verify code becomes:</p>\n\n<pre><code>verify(mockClassB).sendEvent(argThat(MyMatchers.sameAsSet(expectedFileList)));\n</code></pre>\n\n<p>If you instead created a mockito matcher, you wouldn't need the <code>argThat</code>, which basically wraps a hamcrest matcher in a mockito matcher.</p>\n\n<p>This moves the logic of sorting or converting to set out of your test and makes it reusable.</p>\n"},{"tags":[],"owner":{"account_id":6712,"reputation":2127,"user_id":11411,"accept_rate":50,"display_name":"Chei"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1572857256,"creation_date":1572857256,"answer_id":58689831,"question_id":25700059,"body_markdown":"You can use an ArgumentCaptor and then Hamcrest&#39;s Matchers.containsInAnyOrder() for assertion like this:\r\n\r\n    ArgumentCaptor&lt;List&gt; argument = ArgumentCaptor.forClass(List.class);\r\n    verify(mockClassB).method(argument.capture());\r\n    List&lt;String&gt; value = argument.getValue();\r\n    assertThat(value, containsInAnyOrder(&quot;expected&quot;, &quot;values&quot;);\r\n","title":"Mockito; verify method was called with list, ignore order of elements in list","body":"<p>You can use an ArgumentCaptor and then Hamcrest's Matchers.containsInAnyOrder() for assertion like this:</p>\n\n<pre><code>ArgumentCaptor&lt;List&gt; argument = ArgumentCaptor.forClass(List.class);\nverify(mockClassB).method(argument.capture());\nList&lt;String&gt; value = argument.getValue();\nassertThat(value, containsInAnyOrder(\"expected\", \"values\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":935077,"reputation":6785,"user_id":964145,"accept_rate":70,"display_name":"Cristian"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1648054233,"creation_date":1641479569,"answer_id":70608726,"question_id":25700059,"body_markdown":"A one-liner using `argThat` which compares the two lists as sets:\r\n\r\n```java\r\nverify(mock).method(argThat(list -&gt; new HashSet&lt;&gt;(expected).equals(new HashSet&lt;&gt;(list))));\r\n```","title":"Mockito; verify method was called with list, ignore order of elements in list","body":"<p>A one-liner using <code>argThat</code> which compares the two lists as sets:</p>\n<pre class=\"lang-java prettyprint-override\"><code>verify(mock).method(argThat(list -&gt; new HashSet&lt;&gt;(expected).equals(new HashSet&lt;&gt;(list))));\n</code></pre>\n"}],"owner":{"account_id":1524681,"reputation":489,"user_id":1423416,"accept_rate":83,"display_name":"Dace"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30770,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":25700998,"answer_count":4,"score":30,"last_activity_date":1648054233,"creation_date":1410005271,"question_id":25700059,"body_markdown":"I have a class (ClassA) that get the files in a directory. It scans the given directory for files matching a regex. For each matching file, it adds a File Object to a list. \r\nOnce the directory is processed, it passes the List of Files to another Class (ClassB) for processing\r\n\r\nI am writing unit tests for ClassA, so am mocking ClassB using Mockito, and injecting it into ClassA.\r\nI then want to verify in different scenarios the contents of the list that is passed to ClassB (ie my mock)\r\n\r\nI&#39;ve stripped back the code to the following\r\n\r\n    public class ClassA implements Runnable {\r\n\r\n        private final ClassB classB;\r\n\r\n        public ClassA(final ClassB classB) {\r\n            this.classB = classB;\r\n        }\r\n\r\n        public List&lt;File&gt; getFilesFromDirectories() {\r\n            final List&lt;File&gt; newFileList = new ArrayList&lt;File&gt;();\r\n            //        ...\r\n            return newFileList;\r\n        }\r\n\r\n        public void run() {\r\n            final List&lt;File&gt; fileList = getFilesFromDirectories();\r\n\r\n            if (fileList.isEmpty()) {\r\n                //Log Message\r\n            } else {\r\n                classB.sendEvent(fileList);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nThe test class looks like this\r\n\r\n        @RunWith(MockitoJUnitRunner.class)\r\n        public class AppTest {\r\n\r\n        @Rule\r\n        public TemporaryFolder folder = new TemporaryFolder();\r\n\r\n        @Mock\r\n        private ClassB mockClassB;\r\n\r\n        private File testFileOne;\r\n\r\n        private File testFileTwo;\r\n\r\n        private File testFileThree;\r\n\r\n        @Before\r\n        public void setup() throws IOException {\r\n            testFileOne = folder.newFile(&quot;testFileA.txt&quot;);\r\n            testFileTwo = folder.newFile(&quot;testFileB.txt&quot;);\r\n            testFileThree = folder.newFile(&quot;testFileC.txt&quot;);\r\n        }\r\n\r\n        @Test\r\n        public void run_secondFileCollectorRun_shouldNotProcessSameFilesAgainBecauseofDotLastFile() throws Exception {\r\n            final ClassA objUndertest = new ClassA(mockClassB);\r\n\r\n            final List&lt;File&gt; expectedFileList = createSortedExpectedFileList(testFileOne, testFileTwo, testFileThree);\r\n            objUndertest.run();\r\n\r\n            verify(mockClassB).sendEvent(expectedFileList);\r\n        }\r\n\r\n        private List&lt;File&gt; createSortedExpectedFileList(final File... files) {\r\n            final List&lt;File&gt; expectedFileList = new ArrayList&lt;File&gt;();\r\n            for (final File file : files) {\r\n                expectedFileList.add(file);\r\n            }\r\n            Collections.sort(expectedFileList);\r\n            return expectedFileList;\r\n        }\r\n    }\r\n\r\nThe problem is that this test works perfectly fine on windows, but fails on Linux. The reason being that on windows, the order that ClassA list the files matches the expectedList, so the line\r\n\r\n    verify(mockClassB).sendEvent(expectedFileList);\r\n\r\nis causing the problem expecetdFileList = {FileA, FileB, FileC} on Windows, whereas on Linux it will be {FileC, FileB, FileA}, so the verify fails.\r\n\r\nThe question is, how do I get around this in Mockito. Is there any way of saying, I expect this method to be be called with this parameter, but I don&#39;t care about the order of the contents of the list.\r\n\r\nI do have a solution, I just don&#39;t like it, I would rather have a cleaner, easier to read solution.\r\n\r\nI can use an ArgumentCaptor to get the actual value passed into the mock, then can sort it, and compare it to my expected values.\r\n\r\n        final ArgumentCaptor&lt;List&gt; argument = ArgumentCaptor.forClass(List.class);\r\n        verify(mockClassB).method(argument.capture());\r\n        Collections.sort(expected);\r\n        final List&lt;String&gt; value = argument.getValue();\r\n        Collections.sort(value);\r\n        assertEquals(expecetdFileList, value);\r\n","title":"Mockito; verify method was called with list, ignore order of elements in list","body":"<p>I have a class (ClassA) that get the files in a directory. It scans the given directory for files matching a regex. For each matching file, it adds a File Object to a list. \nOnce the directory is processed, it passes the List of Files to another Class (ClassB) for processing</p>\n\n<p>I am writing unit tests for ClassA, so am mocking ClassB using Mockito, and injecting it into ClassA.\nI then want to verify in different scenarios the contents of the list that is passed to ClassB (ie my mock)</p>\n\n<p>I've stripped back the code to the following</p>\n\n<pre><code>public class ClassA implements Runnable {\n\n    private final ClassB classB;\n\n    public ClassA(final ClassB classB) {\n        this.classB = classB;\n    }\n\n    public List&lt;File&gt; getFilesFromDirectories() {\n        final List&lt;File&gt; newFileList = new ArrayList&lt;File&gt;();\n        //        ...\n        return newFileList;\n    }\n\n    public void run() {\n        final List&lt;File&gt; fileList = getFilesFromDirectories();\n\n        if (fileList.isEmpty()) {\n            //Log Message\n        } else {\n            classB.sendEvent(fileList);\n        }\n    }\n}\n</code></pre>\n\n<p>The test class looks like this</p>\n\n<pre><code>    @RunWith(MockitoJUnitRunner.class)\n    public class AppTest {\n\n    @Rule\n    public TemporaryFolder folder = new TemporaryFolder();\n\n    @Mock\n    private ClassB mockClassB;\n\n    private File testFileOne;\n\n    private File testFileTwo;\n\n    private File testFileThree;\n\n    @Before\n    public void setup() throws IOException {\n        testFileOne = folder.newFile(\"testFileA.txt\");\n        testFileTwo = folder.newFile(\"testFileB.txt\");\n        testFileThree = folder.newFile(\"testFileC.txt\");\n    }\n\n    @Test\n    public void run_secondFileCollectorRun_shouldNotProcessSameFilesAgainBecauseofDotLastFile() throws Exception {\n        final ClassA objUndertest = new ClassA(mockClassB);\n\n        final List&lt;File&gt; expectedFileList = createSortedExpectedFileList(testFileOne, testFileTwo, testFileThree);\n        objUndertest.run();\n\n        verify(mockClassB).sendEvent(expectedFileList);\n    }\n\n    private List&lt;File&gt; createSortedExpectedFileList(final File... files) {\n        final List&lt;File&gt; expectedFileList = new ArrayList&lt;File&gt;();\n        for (final File file : files) {\n            expectedFileList.add(file);\n        }\n        Collections.sort(expectedFileList);\n        return expectedFileList;\n    }\n}\n</code></pre>\n\n<p>The problem is that this test works perfectly fine on windows, but fails on Linux. The reason being that on windows, the order that ClassA list the files matches the expectedList, so the line</p>\n\n<pre><code>verify(mockClassB).sendEvent(expectedFileList);\n</code></pre>\n\n<p>is causing the problem expecetdFileList = {FileA, FileB, FileC} on Windows, whereas on Linux it will be {FileC, FileB, FileA}, so the verify fails.</p>\n\n<p>The question is, how do I get around this in Mockito. Is there any way of saying, I expect this method to be be called with this parameter, but I don't care about the order of the contents of the list.</p>\n\n<p>I do have a solution, I just don't like it, I would rather have a cleaner, easier to read solution.</p>\n\n<p>I can use an ArgumentCaptor to get the actual value passed into the mock, then can sort it, and compare it to my expected values.</p>\n\n<pre><code>    final ArgumentCaptor&lt;List&gt; argument = ArgumentCaptor.forClass(List.class);\n    verify(mockClassB).method(argument.capture());\n    Collections.sort(expected);\n    final List&lt;String&gt; value = argument.getValue();\n    Collections.sort(value);\n    assertEquals(expecetdFileList, value);\n</code></pre>\n"},{"tags":["java","list","testing","mockito"],"comments":[{"owner":{"account_id":22750553,"reputation":321,"user_id":17236065,"display_name":"Pedro Luiz"},"score":1,"creation_date":1647827047,"post_id":71551813,"comment_id":126461448,"body_markdown":"Could you post your current attempt ? It is better for us when trying to test it... for example, providing the Bird class, test class that you are creating those mocks and etc...","body":"Could you post your current attempt ? It is better for us when trying to test it... for example, providing the Bird class, test class that you are creating those mocks and etc..."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1647827398,"post_id":71551813,"comment_id":126461497,"body_markdown":"Yes, it&#39;s possible.  How are you creating your list?  How are you adding the mocks to the list?  Please show some code.","body":"Yes, it&#39;s possible.  How are you creating your list?  How are you adding the mocks to the list?  Please show some code."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1647828756,"post_id":71551813,"comment_id":126461713,"body_markdown":"If you need to create many mocks of the same type you may want to use `mock(Bird.class)` in a loop, instead of annotations.","body":"If you need to create many mocks of the same type you may want to use <code>mock(Bird.class)</code> in a loop, instead of annotations."},{"owner":{"account_id":24624180,"reputation":1,"user_id":18524076,"display_name":"saarantras"},"score":0,"creation_date":1647890309,"post_id":71551813,"comment_id":126480617,"body_markdown":"@PedroLuiz You can think of the Bird class has a getChirp method only, I have added the test up to the point it fails.","body":"@PedroLuiz You can think of the Bird class has a getChirp method only, I have added the test up to the point it fails."},{"owner":{"account_id":24624180,"reputation":1,"user_id":18524076,"display_name":"saarantras"},"score":0,"creation_date":1647890345,"post_id":71551813,"comment_id":126480624,"body_markdown":"@DawoodibnKareem The implementations are now partly added in the edit.","body":"@DawoodibnKareem The implementations are now partly added in the edit."},{"owner":{"account_id":24624180,"reputation":1,"user_id":18524076,"display_name":"saarantras"},"score":0,"creation_date":1647890445,"post_id":71551813,"comment_id":126480661,"body_markdown":"@tgdavies I need to assign different chirps to each of these mock objects and assert some other stuff using these differently assigned chirps. When I create in a loop, I believe it doesn&#39;t do what I want to do.","body":"@tgdavies I need to assign different chirps to each of these mock objects and assert some other stuff using these differently assigned chirps. When I create in a loop, I believe it doesn&#39;t do what I want to do."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1647893405,"post_id":71551813,"comment_id":126481513,"body_markdown":"What runner are you using for the test? Is it Mockito-aware? Anyway, you can just remove `bird1-10` and put `birds.add(mock(Bird.class));` in your loop just before your `when`.","body":"What runner are you using for the test? Is it Mockito-aware? Anyway, you can just remove <code>bird1-10</code> and put <code>birds.add(mock(Bird.class));</code> in your loop just before your <code>when</code>."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1647898200,"post_id":71551813,"comment_id":126482878,"body_markdown":"How are you initialising your mocks? - There are a few options, like calling `mock` explicitly, calling `initMocks`, using an appropriate test runner, or using a JUnit rule.  There are advantages and disadvantages to each.  But you need to pick one of these, or you won&#39;t have any mocks.","body":"How are you initialising your mocks? - There are a few options, like calling <code>mock</code> explicitly, calling <code>initMocks</code>, using an appropriate test runner, or using a JUnit rule.  There are advantages and disadvantages to each.  But you need to pick one of these, or you won&#39;t have any mocks."}],"answers":[{"tags":[],"owner":{"account_id":24624180,"reputation":1,"user_id":18524076,"display_name":"saarantras"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647961096,"creation_date":1647961096,"answer_id":71574288,"question_id":71551813,"body_markdown":"I was basically thinking that adding @Mock was enough for initializing, but apparently I was wrong. Editing the code as\r\n\r\n    @Mock Bird bird1=mock(Bird.class)\r\n\r\nfixed my problem. Thanks to kind helpers!","title":"Adding a Mock Object to a List","body":"<p>I was basically thinking that adding @Mock was enough for initializing, but apparently I was wrong. Editing the code as</p>\n<pre><code>@Mock Bird bird1=mock(Bird.class)\n</code></pre>\n<p>fixed my problem. Thanks to kind helpers!</p>\n"},{"tags":[],"owner":{"account_id":22750553,"reputation":321,"user_id":17236065,"display_name":"Pedro Luiz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648053927,"creation_date":1648053927,"answer_id":71590969,"question_id":71551813,"body_markdown":"Even though @saarantras answered that he solved his problem, I wanted to point it out that \r\n\r\n    @Mock Bird bird1=mock(Bird.class)\r\n\r\nIs not the recommended usage @Mock and Mockito.mock(). \r\n\r\n**@Mock**\r\n\r\n    @Mock Bird bird1\r\n\r\n**Mockito.mock()**\r\n\r\n    Bird bird1=mock(Bird.class)\r\n\r\n&gt; Mockito.mock() method and @Mock annotation are doing slightly the\r\n&gt; same, which is defining a mock object in unit tests. However, there\r\n&gt; are some differences.\r\n\r\nI&#39;m not going into those differences, but you can have a look at \r\n\r\n[Mockito.mock() vs @Mock vs @MockBean][1]\r\n\r\nOne thing that makes that NullPointerException happen is forgetting to add\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    public class BirdTest {\r\n\r\n    @Mock Bird bird1;\r\n    @Mock Bird bird2;\r\n    @Mock Bird bird3;\r\n    @Mock Bird bird4;\r\n    @Mock Bird bird5;\r\n    @Mock Bird bird6;\r\n    @Mock Bird bird7;\r\n    @Mock Bird bird8;\r\n    @Mock Bird bird9;\r\n    @Mock Bird bird10;\r\n\r\nAt you test class level, wich isn&#39;t required when using **Mockito.mock()**\r\n\r\n  [1]: https://www.baeldung.com/java-spring-mockito-mock-mockbean","title":"Adding a Mock Object to a List","body":"<p>Even though @saarantras answered that he solved his problem, I wanted to point it out that</p>\n<pre><code>@Mock Bird bird1=mock(Bird.class)\n</code></pre>\n<p>Is not the recommended usage @Mock and Mockito.mock().</p>\n<p><strong>@Mock</strong></p>\n<pre><code>@Mock Bird bird1\n</code></pre>\n<p><strong>Mockito.mock()</strong></p>\n<pre><code>Bird bird1=mock(Bird.class)\n</code></pre>\n<blockquote>\n<p>Mockito.mock() method and @Mock annotation are doing slightly the\nsame, which is defining a mock object in unit tests. However, there\nare some differences.</p>\n</blockquote>\n<p>I'm not going into those differences, but you can have a look at</p>\n<p><a href=\"https://www.baeldung.com/java-spring-mockito-mock-mockbean\" rel=\"nofollow noreferrer\">Mockito.mock() vs @Mock vs @MockBean</a></p>\n<p>One thing that makes that NullPointerException happen is forgetting to add</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class BirdTest {\n\n@Mock Bird bird1;\n@Mock Bird bird2;\n@Mock Bird bird3;\n@Mock Bird bird4;\n@Mock Bird bird5;\n@Mock Bird bird6;\n@Mock Bird bird7;\n@Mock Bird bird8;\n@Mock Bird bird9;\n@Mock Bird bird10;\n</code></pre>\n<p>At you test class level, wich isn't required when using <strong>Mockito.mock()</strong></p>\n"}],"owner":{"account_id":24624180,"reputation":1,"user_id":18524076,"display_name":"saarantras"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":580,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1648053927,"creation_date":1647824115,"question_id":71551813,"body_markdown":"Currently I am trying create 10 mock objects of the same class for a test using Mockito in Java;\r\n\r\n    @Mock Bird bird1;\r\n    \r\n    @Mock Bird bird2;\r\n    \r\n    ...\r\n    \r\n    @Mock Bird bird10;\r\n\r\nand I try to put these mock objects in a list since I will need to access them in a for loop to write their `when-thenReturns` and some other stuff like assigning all of these birds a name. However, when I try to do this it gives me a `NullPointerException`. It kind of makes sense that it gives that error, however I desperately try to find a way around for this and access these 10 mocks from some kind of a list or iterable. Is that possible?\r\n\r\nEdit: \r\nSince @dawood-ibn-karem @pedro-luiz @tgdavies has asked for some more code, let me give it.\r\n\r\n    protected ArrayList&lt;Bird&gt; birds = new ArrayList&lt;&gt;();\r\n    \r\n      @Test\r\n      public void testBirds() {\r\n        // Arrange\r\n        birdsListSetter();\r\n    \r\n        for (int i = 0; i &lt; 10; i++) {\r\n          String voice= VoiceFixture.newRandomChirp();\r\n          when(birds.get(i).getChirp()).thenReturn(voice);            \r\n          }\r\n        }\r\n        // there some other stuff after this but the error occurs up here\r\n      }\r\n    \r\n      public void birdsListSetter() {\r\n        birds.add(bird1);\r\n        birds.add(bird2);\r\n        birds.add(bird3);\r\n        birds.add(bird4);\r\n        birds.add(bird5);\r\n        birds.add(bird6);\r\n        birds.add(bird7);\r\n        birds.add(bird8);\r\n        birds.add(bird9);\r\n        birds.add(bird10);\r\n      }\r\n\r\nWhen I run the test, it fails at the first when-thenReturn saying that \r\n\r\n    NullPointerException: Cannot invoke &quot;Bird.getChirp()&quot; because the return value of &quot;java.util.ArrayList.get(int)&quot; is null\r\n\r\n\r\n","title":"Adding a Mock Object to a List","body":"<p>Currently I am trying create 10 mock objects of the same class for a test using Mockito in Java;</p>\n<pre><code>@Mock Bird bird1;\n\n@Mock Bird bird2;\n\n...\n\n@Mock Bird bird10;\n</code></pre>\n<p>and I try to put these mock objects in a list since I will need to access them in a for loop to write their <code>when-thenReturns</code> and some other stuff like assigning all of these birds a name. However, when I try to do this it gives me a <code>NullPointerException</code>. It kind of makes sense that it gives that error, however I desperately try to find a way around for this and access these 10 mocks from some kind of a list or iterable. Is that possible?</p>\n<p>Edit:\nSince @dawood-ibn-karem @pedro-luiz @tgdavies has asked for some more code, let me give it.</p>\n<pre><code>protected ArrayList&lt;Bird&gt; birds = new ArrayList&lt;&gt;();\n\n  @Test\n  public void testBirds() {\n    // Arrange\n    birdsListSetter();\n\n    for (int i = 0; i &lt; 10; i++) {\n      String voice= VoiceFixture.newRandomChirp();\n      when(birds.get(i).getChirp()).thenReturn(voice);            \n      }\n    }\n    // there some other stuff after this but the error occurs up here\n  }\n\n  public void birdsListSetter() {\n    birds.add(bird1);\n    birds.add(bird2);\n    birds.add(bird3);\n    birds.add(bird4);\n    birds.add(bird5);\n    birds.add(bird6);\n    birds.add(bird7);\n    birds.add(bird8);\n    birds.add(bird9);\n    birds.add(bird10);\n  }\n</code></pre>\n<p>When I run the test, it fails at the first when-thenReturn saying that</p>\n<pre><code>NullPointerException: Cannot invoke &quot;Bird.getChirp()&quot; because the return value of &quot;java.util.ArrayList.get(int)&quot; is null\n</code></pre>\n"},{"tags":["java","spring","jboss","ldap"],"answers":[{"tags":[],"owner":{"account_id":21354075,"reputation":31,"user_id":15723261,"display_name":"alex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1648053626,"creation_date":1648053626,"answer_id":71590903,"question_id":71229287,"body_markdown":"The spring security dependency adds additional security on top of my LDAP authentication. I removed the dependency and it worked.","title":"Container based LDAP authentication with Jboss and Spring boot","body":"<p>The spring security dependency adds additional security on top of my LDAP authentication. I removed the dependency and it worked.</p>\n"}],"owner":{"account_id":21354075,"reputation":31,"user_id":15723261,"display_name":"alex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":358,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71590903,"answer_count":1,"score":0,"last_activity_date":1648053626,"creation_date":1645570142,"question_id":71229287,"body_markdown":"I&#39;ve a simple API that returns a string. My objective is to secure my API using LDAP authentication. I&#39;ve my LDAP configured in my JBoss EAP 7.1 under the security-domain. I&#39;ve defined my security constraint in the web.xml and the corresponding security-domain in my jboss-web.xml This is my first shot to integrate LDAP with REST API. Not sure what went wrong, but when I hit my API from browser, it keeps prompting for credentials 3 times and then gives below error.\r\n\r\n    Whitelabel Error Page\r\n    This application has no explicit mapping for /error, so you are seeing this as a fallback.\r\n\r\n    Tue Feb 22 13:42:54 EST 2022\r\n    There was an unexpected error (type=Unauthorized, status=401).\r\n    Full authentication is required to access this resource \r\n\r\nIf I hit from postman, it gives similar error in json format...\r\n\r\n    {\r\n    &quot;timestamp&quot;: 1645553512290,\r\n    &quot;status&quot;: 401,\r\n    &quot;error&quot;: &quot;Unauthorized&quot;,\r\n    &quot;message&quot;: &quot;Bad credentials&quot;,\r\n    &quot;path&quot;: &quot;/SecureAPI/mypath&quot;\r\n    }\r\n\r\nweb.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app version=&quot;3.0&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;\r\n     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;&gt;\r\n       &lt;security-constraint&gt;\r\n        &lt;web-resource-collection&gt;\r\n          &lt;web-resource-name&gt;WebServiceSecurity&lt;/web-resource-name&gt;\r\n          &lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n          &lt;http-method&gt;GET&lt;/http-method&gt;     \r\n        &lt;/web-resource-collection&gt;\r\n        &lt;auth-constraint&gt;\r\n          &lt;role-name&gt;ROLE_ADMIN&lt;/role-name&gt;\r\n        &lt;/auth-constraint&gt;\r\n        &lt;user-data-constraint&gt;\r\n          &lt;transport-guarantee&gt;NONE&lt;/transport-guarantee&gt;\r\n        &lt;/user-data-constraint&gt;\r\n      &lt;/security-constraint&gt;\r\n      &lt;security-role&gt;\r\n        &lt;role-name&gt;ROLE_ADMIN&lt;/role-name&gt;\r\n      &lt;/security-role&gt;\r\n      &lt;login-config&gt;\r\n        &lt;auth-method&gt;BASIC&lt;/auth-method&gt;\r\n        &lt;realm-name&gt;basic ldap realm&lt;/realm-name&gt;\r\n      &lt;/login-config&gt; \r\n    &lt;/web-app&gt;\r\n\r\njboss-web.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;jboss-web xmlns=&quot;http://www.jboss.com/xml/ns/javaee&quot;\r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n       xsi:schemaLocation=&quot;\r\n          http://www.jboss.com/xml/ns/javaee\r\n          http://www.jboss.org/j2ee/schema/jboss-web_5_2.xsd&quot;&gt;\r\n      &lt;context-root&gt;SecureAPI&lt;/context-root&gt;    \r\n      &lt;security-domain&gt;java:/jaas/ldapLogin&lt;/security-domain&gt;\r\n    &lt;/jboss-web&gt; \r\n\r\nAPI\r\n\r\n    @RestController\r\n    public class SecuredController {\r\n    \t\r\n    \t@GetMapping(&quot;/mypath&quot;)\r\n    \tpublic String sayHi() {\r\n    \t\treturn &quot;This API is Secured&quot;;\r\n    \t}\r\n    \r\n    }\r\n\r\nstandalone-full-ha.xml configuration:\r\n\r\n    &lt;security-domain name=&quot;ldapLogin&quot;&gt;\r\n                        &lt;authentication&gt;\r\n                            &lt;login-module code=&quot;org.jboss.security.auth.spi.LdapLoginModule&quot; flag=&quot;required&quot;&gt;\r\n                                &lt;module-option name=&quot;java.naming.factory.initial&quot; value=&quot;com.sun.jndi.ldap.LdapCtxFactory&quot;/&gt;\r\n                                &lt;module-option name=&quot;java.naming.provider.url&quot; value=&quot;ldaps://&lt;ldapserver&gt;:&lt;port&gt;&quot;/&gt;\r\n                                &lt;module-option name=&quot;java.naming.security.authentication&quot; value=&quot;simple&quot;/&gt;\r\n                                &lt;module-option name=&quot;principalDNPrefix&quot; value=&quot;uid=&quot;/&gt;\r\n                                &lt;module-option name=&quot;principalDNSuffix&quot; value=&quot;,ou=users,dc=bcn,dc=com&quot;/&gt;\r\n                                &lt;module-option name=&quot;rolesCtxDN&quot; value=&quot;ou=groups,dc=bcn,dc=com&quot;/&gt;\r\n                                &lt;module-option name=&quot;uidAttributeID&quot; value=&quot;uniqueMember&quot;/&gt;\r\n                                &lt;module-option name=&quot;matchOnUserDN&quot; value=&quot;true&quot;/&gt;\r\n                                &lt;module-option name=&quot;roleAttributeID&quot; value=&quot;cn&quot;/&gt;\r\n                                &lt;module-option name=&quot;roleAttributeIsDN&quot; value=&quot;false&quot;/&gt;\r\n                                &lt;module-option name=&quot;unauthenticatedIdentity&quot; value=&quot;guest&quot;/&gt;\r\n                            &lt;/login-module&gt;\r\n                        &lt;/authentication&gt;\r\n                    &lt;/security-domain&gt;\r\n\r\nMy dependencies in pom.xml are:\r\n\r\n    &lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.0.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n\r\nMy question is, why the API prompts for credentials multiple times when accessed from browser? I confirm there is nothing wrong with the credentials that are given. Also, the json response suggests some unhandled exception. Not sure, where it is coming from. Any suggestions would be helpful.\r\n\r\nThe same configuration worked for SOAP based services. For REST, its not working. Does it make difference?","title":"Container based LDAP authentication with Jboss and Spring boot","body":"<p>I've a simple API that returns a string. My objective is to secure my API using LDAP authentication. I've my LDAP configured in my JBoss EAP 7.1 under the security-domain. I've defined my security constraint in the web.xml and the corresponding security-domain in my jboss-web.xml This is my first shot to integrate LDAP with REST API. Not sure what went wrong, but when I hit my API from browser, it keeps prompting for credentials 3 times and then gives below error.</p>\n<pre><code>Whitelabel Error Page\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\n\nTue Feb 22 13:42:54 EST 2022\nThere was an unexpected error (type=Unauthorized, status=401).\nFull authentication is required to access this resource \n</code></pre>\n<p>If I hit from postman, it gives similar error in json format...</p>\n<pre><code>{\n&quot;timestamp&quot;: 1645553512290,\n&quot;status&quot;: 401,\n&quot;error&quot;: &quot;Unauthorized&quot;,\n&quot;message&quot;: &quot;Bad credentials&quot;,\n&quot;path&quot;: &quot;/SecureAPI/mypath&quot;\n}\n</code></pre>\n<p>web.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app version=&quot;3.0&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;\n xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;&gt;\n   &lt;security-constraint&gt;\n    &lt;web-resource-collection&gt;\n      &lt;web-resource-name&gt;WebServiceSecurity&lt;/web-resource-name&gt;\n      &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n      &lt;http-method&gt;GET&lt;/http-method&gt;     \n    &lt;/web-resource-collection&gt;\n    &lt;auth-constraint&gt;\n      &lt;role-name&gt;ROLE_ADMIN&lt;/role-name&gt;\n    &lt;/auth-constraint&gt;\n    &lt;user-data-constraint&gt;\n      &lt;transport-guarantee&gt;NONE&lt;/transport-guarantee&gt;\n    &lt;/user-data-constraint&gt;\n  &lt;/security-constraint&gt;\n  &lt;security-role&gt;\n    &lt;role-name&gt;ROLE_ADMIN&lt;/role-name&gt;\n  &lt;/security-role&gt;\n  &lt;login-config&gt;\n    &lt;auth-method&gt;BASIC&lt;/auth-method&gt;\n    &lt;realm-name&gt;basic ldap realm&lt;/realm-name&gt;\n  &lt;/login-config&gt; \n&lt;/web-app&gt;\n</code></pre>\n<p>jboss-web.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;jboss-web xmlns=&quot;http://www.jboss.com/xml/ns/javaee&quot;\n   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n   xsi:schemaLocation=&quot;\n      http://www.jboss.com/xml/ns/javaee\n      http://www.jboss.org/j2ee/schema/jboss-web_5_2.xsd&quot;&gt;\n  &lt;context-root&gt;SecureAPI&lt;/context-root&gt;    \n  &lt;security-domain&gt;java:/jaas/ldapLogin&lt;/security-domain&gt;\n&lt;/jboss-web&gt; \n</code></pre>\n<p>API</p>\n<pre><code>@RestController\npublic class SecuredController {\n    \n    @GetMapping(&quot;/mypath&quot;)\n    public String sayHi() {\n        return &quot;This API is Secured&quot;;\n    }\n\n}\n</code></pre>\n<p>standalone-full-ha.xml configuration:</p>\n<pre><code>&lt;security-domain name=&quot;ldapLogin&quot;&gt;\n                    &lt;authentication&gt;\n                        &lt;login-module code=&quot;org.jboss.security.auth.spi.LdapLoginModule&quot; flag=&quot;required&quot;&gt;\n                            &lt;module-option name=&quot;java.naming.factory.initial&quot; value=&quot;com.sun.jndi.ldap.LdapCtxFactory&quot;/&gt;\n                            &lt;module-option name=&quot;java.naming.provider.url&quot; value=&quot;ldaps://&lt;ldapserver&gt;:&lt;port&gt;&quot;/&gt;\n                            &lt;module-option name=&quot;java.naming.security.authentication&quot; value=&quot;simple&quot;/&gt;\n                            &lt;module-option name=&quot;principalDNPrefix&quot; value=&quot;uid=&quot;/&gt;\n                            &lt;module-option name=&quot;principalDNSuffix&quot; value=&quot;,ou=users,dc=bcn,dc=com&quot;/&gt;\n                            &lt;module-option name=&quot;rolesCtxDN&quot; value=&quot;ou=groups,dc=bcn,dc=com&quot;/&gt;\n                            &lt;module-option name=&quot;uidAttributeID&quot; value=&quot;uniqueMember&quot;/&gt;\n                            &lt;module-option name=&quot;matchOnUserDN&quot; value=&quot;true&quot;/&gt;\n                            &lt;module-option name=&quot;roleAttributeID&quot; value=&quot;cn&quot;/&gt;\n                            &lt;module-option name=&quot;roleAttributeIsDN&quot; value=&quot;false&quot;/&gt;\n                            &lt;module-option name=&quot;unauthenticatedIdentity&quot; value=&quot;guest&quot;/&gt;\n                        &lt;/login-module&gt;\n                    &lt;/authentication&gt;\n                &lt;/security-domain&gt;\n</code></pre>\n<p>My dependencies in pom.xml are:</p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>My question is, why the API prompts for credentials multiple times when accessed from browser? I confirm there is nothing wrong with the credentials that are given. Also, the json response suggests some unhandled exception. Not sure, where it is coming from. Any suggestions would be helpful.</p>\n<p>The same configuration worked for SOAP based services. For REST, its not working. Does it make difference?</p>\n"},{"tags":["java","lambda"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":1,"creation_date":1647511900,"post_id":71510500,"comment_id":126391743,"body_markdown":"`String::length` is an instance method of String. It requires an instance of String to run, which you are providing. `ExpressionHelper::lengthHelper` is an instance method of ExpressionHelper. It requires an instance of ExpressionHelper to run, which you are not providing.","body":"<code>String::length</code> is an instance method of String. It requires an instance of String to run, which you are providing. <code>ExpressionHelper::lengthHelper</code> is an instance method of ExpressionHelper. It requires an instance of ExpressionHelper to run, which you are not providing."},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1647513577,"post_id":71510500,"comment_id":126392319,"body_markdown":"@user16320675 – When you rephrase the question and looking onto the issue from a different angle, you may be right. But the topic itself is confusing enough for a rookie that I think we should answer the question as it was asked.","body":"@user16320675 – When you rephrase the question and looking onto the issue from a different angle, you may be right. But the topic itself is confusing enough for a rookie that I think we should answer the question as it was asked."}],"answers":[{"tags":[],"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1647512239,"creation_date":1647512239,"answer_id":71510609,"question_id":71510500,"body_markdown":"`String::length` is an instance method of String. It requires an instance of String to run, which you are providing, because you are passing elements of `lines1` to it.\r\n\r\n`ExpressionHelper::lengthHelper` is an instance method of ExpressionHelper. In addition to the explicit `String line` argument, it requires an instance of ExpressionHelper to run, which you are not providing.\r\n\r\nIf you made `lengthHelper` a static method in ExpressionHelper, then you would be able to call it without an instance of ExpressionHelper.","title":"Using links to static and non-static methods with interface","body":"<p><code>String::length</code> is an instance method of String. It requires an instance of String to run, which you are providing, because you are passing elements of <code>lines1</code> to it.</p>\n<p><code>ExpressionHelper::lengthHelper</code> is an instance method of ExpressionHelper. In addition to the explicit <code>String line</code> argument, it requires an instance of ExpressionHelper to run, which you are not providing.</p>\n<p>If you made <code>lengthHelper</code> a static method in ExpressionHelper, then you would be able to call it without an instance of ExpressionHelper.</p>\n"},{"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647512960,"creation_date":1647512960,"answer_id":71510768,"question_id":71510500,"body_markdown":"In addition to [the answer from khelwood][1]:\r\n\r\nIf you change your code like this:\r\n\r\n```Java\r\npublic static void main( String[] args ) \r\n{\r\n    final var expressionHelper = new ExpressionHelper();\r\n    String[] lines1 = {&quot;H&quot;, &quot;HH&quot;, &quot;HHH&quot;};\r\n    System.out.println(sum( lines1, String::length ) );\r\n    System.out.println(sum( lines1, s -&gt; s.length() ) );\r\n    System.out.println(sum( lines1, ExpressionHelper::lengthHelper) ); //wrong\r\n    System.out.println(sum( lines1, expressionHelper::lengthHelper) );\r\n}\r\n\r\n```\r\n\r\nit works also with `ExpressionHelper::lengthHelper` (although I should write better `ExpressionHelper.lengthHelper()` or `ExpressionHelper#lengthHelper` to avoid further confusion …)\r\n\r\nYes, I know, in this context it is nasty to name the variable same as the class, only having the first letter as lower case: it does not support readability.\r\n\r\nBut now `expressionHelper` is that instance of `ExpressionHelper` that @khelwood mentioned as missing in their answer.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/71510609/1554195","title":"Using links to static and non-static methods with interface","body":"<p>In addition to <a href=\"https://stackoverflow.com/a/71510609/1554195\">the answer from khelwood</a>:</p>\n<p>If you change your code like this:</p>\n<pre><code>public static void main( String[] args ) \n{\n    final var expressionHelper = new ExpressionHelper();\n    String[] lines1 = {&quot;H&quot;, &quot;HH&quot;, &quot;HHH&quot;};\n    System.out.println(sum( lines1, String::length ) );\n    System.out.println(sum( lines1, s -&gt; s.length() ) );\n    System.out.println(sum( lines1, ExpressionHelper::lengthHelper) ); //wrong\n    System.out.println(sum( lines1, expressionHelper::lengthHelper) );\n}\n\n</code></pre>\n<p>it works also with <code>ExpressionHelper::lengthHelper</code> (although I should write better <code>ExpressionHelper.lengthHelper()</code> or <code>ExpressionHelper#lengthHelper</code> to avoid further confusion …)</p>\n<p>Yes, I know, in this context it is nasty to name the variable same as the class, only having the first letter as lower case: it does not support readability.</p>\n<p>But now <code>expressionHelper</code> is that instance of <code>ExpressionHelper</code> that @khelwood mentioned as missing in their answer.</p>\n"}],"owner":{"account_id":24588094,"reputation":21,"user_id":18492344,"display_name":"Zorger"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":71510609,"answer_count":2,"score":0,"last_activity_date":1648053557,"creation_date":1647511742,"question_id":71510500,"body_markdown":"Why I can call **non-static** method `length()` from class `String`, but I can&#39;t call **non-static** method `lengthHelper( String line )` from my class `ExpressionHelper`?\r\n\r\n```Java\r\npublic static void main(String[] args) {\r\n\r\n    String[] lines1 = {&quot;H&quot;, &quot;HH&quot;, &quot;HHH&quot;};\r\n    System.out.println(sum(lines1, String::length));\r\n    System.out.println(sum(lines1, s -&gt; s.length()));\r\n    System.out.println(sum(lines1, ExpressionHelper::lengthHelper)); //wrong\r\n}\r\n\r\ninterface Expression {\r\n    int length(String line);\r\n}\r\n\r\nstatic class ExpressionHelper {\r\n\r\n    int lengthHelper(String line) {\r\n        return line.length();\r\n    }\r\n}\r\n\r\nprivate static int sum(String[] lines, Expression func) {\r\n    int result = 0;\r\n    for (String i : lines) {\r\n        result += func.length(i);\r\n    }\r\n    return result;\r\n}\r\n```\r\n","title":"Using links to static and non-static methods with interface","body":"<p>Why I can call <strong>non-static</strong> method <code>length()</code> from class <code>String</code>, but I can't call <strong>non-static</strong> method <code>lengthHelper( String line )</code> from my class <code>ExpressionHelper</code>?</p>\n<pre><code>public static void main(String[] args) {\n\n    String[] lines1 = {&quot;H&quot;, &quot;HH&quot;, &quot;HHH&quot;};\n    System.out.println(sum(lines1, String::length));\n    System.out.println(sum(lines1, s -&gt; s.length()));\n    System.out.println(sum(lines1, ExpressionHelper::lengthHelper)); //wrong\n}\n\ninterface Expression {\n    int length(String line);\n}\n\nstatic class ExpressionHelper {\n\n    int lengthHelper(String line) {\n        return line.length();\n    }\n}\n\nprivate static int sum(String[] lines, Expression func) {\n    int result = 0;\n    for (String i : lines) {\n        result += func.length(i);\n    }\n    return result;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","jpa","repository","crud-repository"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1648057284,"post_id":71590848,"comment_id":126530262,"body_markdown":"Specifications are not a Repository interface. See https://reflectoring.io/spring-data-specifications/","body":"Specifications are not a Repository interface. See <a href=\"https://reflectoring.io/spring-data-specifications/\" rel=\"nofollow noreferrer\">reflectoring.io/spring-data-specifications</a>"},{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1648120311,"post_id":71590848,"comment_id":126546135,"body_markdown":"Then @Chris, what is the use of extending the above-mentioned interfaces.","body":"Then @Chris, what is the use of extending the above-mentioned interfaces."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1648134368,"post_id":71590848,"comment_id":126552197,"body_markdown":"Check out the methods within it and decide for yourself the value; JpaSpecificationExecutor adds search functionality, while CrudRepository and JpaRepository add save/search type methods. Why Spring didn&#39;t have one extend the other is a question for Spring, not StackOverFlow, but likely done as away to allow adding the behaviour to any repos - to pick and choose which to apply this to independently.","body":"Check out the methods within it and decide for yourself the value; JpaSpecificationExecutor adds search functionality, while CrudRepository and JpaRepository add save/search type methods. Why Spring didn&#39;t have one extend the other is a question for Spring, not StackOverFlow, but likely done as away to allow adding the behaviour to any repos - to pick and choose which to apply this to independently."}],"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":759,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1648053381,"creation_date":1648053381,"question_id":71590848,"body_markdown":"we were facing issues while starting our Spring Boot Application. We added a new API with a Controller, a Service class, and two Repository classes for two tables. This is the master table repository\r\n\r\n    import org.springframework.data.jpa.repository.JpaSpecificationExecutor;\r\n    import org.springframework.stereotype.Repository;    \r\n    import com.sixdee.wallet.core.domain.PromoTicketMaster;\r\n    \r\n    @Repository\r\n    public interface PromoTicketMasterRepo extends JpaSpecificationExecutor&lt;PromoTicketMaster&gt; {\r\n    \r\n    }\r\n\r\nWe had a look at this answer [What is difference between CrudRepository and JpaRepository interfaces in Spring Data JPA?][1] before creating this Repo as it was used for Pagination methods as well. It said that **Because of the inheritance mentioned above, JpaRepository will have all the functions of CrudRepository and PagingAndSortingRepository** . But the application didn&#39;t start with this Repo configuration and the console showed this error. The autowiring was fine.\r\n\r\n    *************************** APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Field promoTicketMasterRepo in com.sixdee.wallet.core.service.impl.PromoTicketServiceImpl required a bean of type &#39;com.sixdee.wallet.core.repository.PromoTicketMasterRepo&#39; that could not be found.\r\n    \r\n    The injection point has the following annotations:\r\n    \t- @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider defining a bean of type &#39;com.sixdee.wallet.core.repository.PromoTicketMasterRepo&#39; in your configuration.\r\n\r\nThen we changed the Repo like this and the application was started.\r\n\r\n    import org.springframework.data.jpa.repository.JpaSpecificationExecutor;\r\n    import org.springframework.data.repository.CrudRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    import com.sixdee.wallet.core.domain.PromoTicketMaster;\r\n    \r\n    @Repository\r\n    public interface PromoTicketMasterRepo extends JpaSpecificationExecutor&lt;PromoTicketMaster&gt;, CrudRepository&lt;PromoTicketMaster, String&gt; {\r\n    \r\n    }\r\n\r\nWhat was wrong with the first approach\r\n\r\n  [1]: https://stackoverflow.com/a/14025100/7218656","title":"Repository implementing just the JpaSpecificationExecutor causes error while starting Spring boot application","body":"<p>we were facing issues while starting our Spring Boot Application. We added a new API with a Controller, a Service class, and two Repository classes for two tables. This is the master table repository</p>\n<pre><code>import org.springframework.data.jpa.repository.JpaSpecificationExecutor;\nimport org.springframework.stereotype.Repository;    \nimport com.sixdee.wallet.core.domain.PromoTicketMaster;\n\n@Repository\npublic interface PromoTicketMasterRepo extends JpaSpecificationExecutor&lt;PromoTicketMaster&gt; {\n\n}\n</code></pre>\n<p>We had a look at this answer <a href=\"https://stackoverflow.com/a/14025100/7218656\">What is difference between CrudRepository and JpaRepository interfaces in Spring Data JPA?</a> before creating this Repo as it was used for Pagination methods as well. It said that <strong>Because of the inheritance mentioned above, JpaRepository will have all the functions of CrudRepository and PagingAndSortingRepository</strong> . But the application didn't start with this Repo configuration and the console showed this error. The autowiring was fine.</p>\n<pre><code>*************************** APPLICATION FAILED TO START\n***************************\n\nDescription:\n\nField promoTicketMasterRepo in com.sixdee.wallet.core.service.impl.PromoTicketServiceImpl required a bean of type 'com.sixdee.wallet.core.repository.PromoTicketMasterRepo' that could not be found.\n\nThe injection point has the following annotations:\n    - @org.springframework.beans.factory.annotation.Autowired(required=true)\n\n\nAction:\n\nConsider defining a bean of type 'com.sixdee.wallet.core.repository.PromoTicketMasterRepo' in your configuration.\n</code></pre>\n<p>Then we changed the Repo like this and the application was started.</p>\n<pre><code>import org.springframework.data.jpa.repository.JpaSpecificationExecutor;\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\n\nimport com.sixdee.wallet.core.domain.PromoTicketMaster;\n\n@Repository\npublic interface PromoTicketMasterRepo extends JpaSpecificationExecutor&lt;PromoTicketMaster&gt;, CrudRepository&lt;PromoTicketMaster, String&gt; {\n\n}\n</code></pre>\n<p>What was wrong with the first approach</p>\n"},{"tags":["java","wildfly","keycloak"],"answers":[{"tags":[],"owner":{"account_id":3170027,"reputation":73,"user_id":2679230,"display_name":"deryoman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1626949311,"creation_date":1626940175,"answer_id":68481057,"question_id":68199153,"body_markdown":"As discussed here https://keycloak.discourse.group/t/how-to-configure-storageprovidertimeout/9171, there are currently no possibilties to configure this property.\r\n\r\nThere is an open issue to address this problem: https://issues.redhat.com/browse/KEYCLOAK-18856\r\n\r\nAs a temporarily quick and dirty workaround you can set the value at runtime via reflections in e.g. your custom UserStorageProvier implementation:\r\n\r\n    public class CustomUserStorageProviderFactory implements UserStorageProviderFactory&lt;CustomUserStorageProvider&gt; {\r\n\r\n    @Override\r\n    public void onCreate(KeycloakSession session, RealmModel realm, ComponentModel model) {\r\n        UserProvider userProvider = session.userStorageManager();\r\n\r\n        try {\r\n            Field field = userProvider.getClass().getSuperclass().getDeclaredField(&quot;STORAGE_PROVIDER_DEFAULT_TIMEOUT&quot;);\r\n            field.setAccessible(true);\r\n            Field modifiers = field.getClass().getDeclaredField(&quot;modifiers&quot;);\r\n            modifiers.setAccessible(true);\r\n            modifiers.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\r\n            field.set(userProvider, 5000L);\r\n        } catch (NoSuchFieldException | IllegalAccessException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n\r\n","title":"Is there a way to configure the storageProviderTimeout in Keycloak?","body":"<p>As discussed here <a href=\"https://keycloak.discourse.group/t/how-to-configure-storageprovidertimeout/9171\" rel=\"nofollow noreferrer\">https://keycloak.discourse.group/t/how-to-configure-storageprovidertimeout/9171</a>, there are currently no possibilties to configure this property.</p>\n<p>There is an open issue to address this problem: <a href=\"https://issues.redhat.com/browse/KEYCLOAK-18856\" rel=\"nofollow noreferrer\">https://issues.redhat.com/browse/KEYCLOAK-18856</a></p>\n<p>As a temporarily quick and dirty workaround you can set the value at runtime via reflections in e.g. your custom UserStorageProvier implementation:</p>\n<pre><code>public class CustomUserStorageProviderFactory implements UserStorageProviderFactory&lt;CustomUserStorageProvider&gt; {\n\n@Override\npublic void onCreate(KeycloakSession session, RealmModel realm, ComponentModel model) {\n    UserProvider userProvider = session.userStorageManager();\n\n    try {\n        Field field = userProvider.getClass().getSuperclass().getDeclaredField(&quot;STORAGE_PROVIDER_DEFAULT_TIMEOUT&quot;);\n        field.setAccessible(true);\n        Field modifiers = field.getClass().getDeclaredField(&quot;modifiers&quot;);\n        modifiers.setAccessible(true);\n        modifiers.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\n        field.set(userProvider, 5000L);\n    } catch (NoSuchFieldException | IllegalAccessException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":3804065,"reputation":3440,"user_id":3157154,"display_name":"Boomer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1648052862,"creation_date":1648052862,"answer_id":71590724,"question_id":68199153,"body_markdown":"In Keycloak/Quarkus (v17.0.0) you can specify parameter *spi-user-storage-provider-timeout* in the **keycloak.conf** file.\r\n\r\nExample (10 seconds):\r\n``spi-user-storage-provider-timeout=10000``","title":"Is there a way to configure the storageProviderTimeout in Keycloak?","body":"<p>In Keycloak/Quarkus (v17.0.0) you can specify parameter <em>spi-user-storage-provider-timeout</em> in the <strong>keycloak.conf</strong> file.</p>\n<p>Example (10 seconds):\n<code>spi-user-storage-provider-timeout=10000</code></p>\n"}],"owner":{"account_id":10371233,"reputation":67,"user_id":7648867,"display_name":"Steven Hovland"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1077,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":68481057,"answer_count":2,"score":3,"last_activity_date":1648052862,"creation_date":1625073825,"question_id":68199153,"body_markdown":"I have developed an implementation of the [User Storage SPI][1] that calls an API in a legacy system to migrate users. I need to configure my own value for `storageProviderTimeout` as there is a remote chance that it will take longer than the default 3 seconds to get a response. I have already configured the `socket-timeout-millis` to be more than the default 5 seconds before timing out, but this does not help as the `storageProviderTimeout` has a default of 3 seconds. Upon looking at the Keycloak source code, specifically `AbstractStorageManager.java` there is a mention of this value being configurable:\r\n\r\n```\r\n    /**\r\n     * Timeouts are used as time boundary for obtaining models from an external storage. Default value is set\r\n     * to 3000 milliseconds and it&#39;s configurable.\r\n     */\r\n    private static final Long STORAGE_PROVIDER_DEFAULT_TIMEOUT = 3000L;\r\n```\r\n\r\nThe function to read the configured value looks like this:\r\n\r\n```\r\n    protected Long getStorageProviderTimeout() {\r\n        if (storageProviderTimeout == null) {\r\n            storageProviderTimeout = Config.scope(configScope).getLong(&quot;storageProviderTimeout&quot;, STORAGE_PROVIDER_DEFAULT_TIMEOUT);\r\n        }\r\n        return storageProviderTimeout;\r\n    }\r\n```\r\n\r\nWhen the `UserStorageManager` instance is created (which extends `AbstractUserManager` the constructor instantiates the superclass with this code:\r\n\r\n```\r\n    public UserStorageManager(KeycloakSession session) {\r\n        super(session, UserStorageProviderFactory.class, UserStorageProvider.class,\r\n                UserStorageProviderModel::new, &quot;user&quot;);\r\n    }\r\n```\r\n\r\nwhere `&quot;user&quot;` is what later gets passed to `Config.scope()` in the `getStorageProviderTimeout()` function.\r\n\r\nWhat I&#39;ve tried so far is manually adding the tag `&lt;user&gt;` in `standalone-ha.xml` at the same level as the `&lt;theme&gt;` tag, like this:\r\n\r\n```\r\n\t\t\t&lt;user&gt;\r\n\t\t\t    &lt;storageProviderTimeout&gt;10000&lt;/storageProviderTimeout&gt;\r\n\t\t\t&lt;/user&gt;\r\n```\r\n\r\nbut upon booting Keycloak, I get this error:\r\n\r\n```\r\n10:55:59,730 ERROR [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0055: Caught exception during boot: org.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0085: Failed to parse configuration\r\n        at org.jboss.as.controller@15.0.1.Final//org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:143)\r\n        at org.jboss.as.server@15.0.1.Final//org.jboss.as.server.ServerService.boot(ServerService.java:403)\r\n        at org.jboss.as.controller@15.0.1.Final//org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:416)\r\n        at java.base/java.lang.Thread.run(Thread.java:834)\r\nCaused by: javax.xml.stream.XMLStreamException: Unknown keycloak-server subsystem tag: user\r\n```\r\n\r\nI hope someone can shed some light on this for me as it feels like I&#39;m missing something obvious. Thanks in advance!\r\n\r\n\r\n  [1]: https://www.keycloak.org/docs/latest/server_development/index.html#_user-storage-spi","title":"Is there a way to configure the storageProviderTimeout in Keycloak?","body":"<p>I have developed an implementation of the <a href=\"https://www.keycloak.org/docs/latest/server_development/index.html#_user-storage-spi\" rel=\"nofollow noreferrer\">User Storage SPI</a> that calls an API in a legacy system to migrate users. I need to configure my own value for <code>storageProviderTimeout</code> as there is a remote chance that it will take longer than the default 3 seconds to get a response. I have already configured the <code>socket-timeout-millis</code> to be more than the default 5 seconds before timing out, but this does not help as the <code>storageProviderTimeout</code> has a default of 3 seconds. Upon looking at the Keycloak source code, specifically <code>AbstractStorageManager.java</code> there is a mention of this value being configurable:</p>\n<pre><code>    /**\n     * Timeouts are used as time boundary for obtaining models from an external storage. Default value is set\n     * to 3000 milliseconds and it's configurable.\n     */\n    private static final Long STORAGE_PROVIDER_DEFAULT_TIMEOUT = 3000L;\n</code></pre>\n<p>The function to read the configured value looks like this:</p>\n<pre><code>    protected Long getStorageProviderTimeout() {\n        if (storageProviderTimeout == null) {\n            storageProviderTimeout = Config.scope(configScope).getLong(&quot;storageProviderTimeout&quot;, STORAGE_PROVIDER_DEFAULT_TIMEOUT);\n        }\n        return storageProviderTimeout;\n    }\n</code></pre>\n<p>When the <code>UserStorageManager</code> instance is created (which extends <code>AbstractUserManager</code> the constructor instantiates the superclass with this code:</p>\n<pre><code>    public UserStorageManager(KeycloakSession session) {\n        super(session, UserStorageProviderFactory.class, UserStorageProvider.class,\n                UserStorageProviderModel::new, &quot;user&quot;);\n    }\n</code></pre>\n<p>where <code>&quot;user&quot;</code> is what later gets passed to <code>Config.scope()</code> in the <code>getStorageProviderTimeout()</code> function.</p>\n<p>What I've tried so far is manually adding the tag <code>&lt;user&gt;</code> in <code>standalone-ha.xml</code> at the same level as the <code>&lt;theme&gt;</code> tag, like this:</p>\n<pre><code>            &lt;user&gt;\n                &lt;storageProviderTimeout&gt;10000&lt;/storageProviderTimeout&gt;\n            &lt;/user&gt;\n</code></pre>\n<p>but upon booting Keycloak, I get this error:</p>\n<pre><code>10:55:59,730 ERROR [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0055: Caught exception during boot: org.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0085: Failed to parse configuration\n        at org.jboss.as.controller@15.0.1.Final//org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:143)\n        at org.jboss.as.server@15.0.1.Final//org.jboss.as.server.ServerService.boot(ServerService.java:403)\n        at org.jboss.as.controller@15.0.1.Final//org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:416)\n        at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: javax.xml.stream.XMLStreamException: Unknown keycloak-server subsystem tag: user\n</code></pre>\n<p>I hope someone can shed some light on this for me as it feels like I'm missing something obvious. Thanks in advance!</p>\n"},{"tags":["java","spring","spring-boot","yaml"],"comments":[{"owner":{"account_id":4218279,"reputation":1719,"user_id":3453727,"display_name":"Alex Chernyshev"},"score":0,"creation_date":1606160027,"post_id":64974595,"comment_id":114872300,"body_markdown":"Thats simply because &#39;null&#39; in YAML file undestood as &#39;null&#39; string, not null value. To get what you want just remove value at all and then use null as default value in EL: @Value(&quot;${my-property:null}&quot;)","body":"Thats simply because &#39;null&#39; in YAML file undestood as &#39;null&#39; string, not null value. To get what you want just remove value at all and then use null as default value in EL: @Value(&quot;${my-property:null}&quot;)"}],"answers":[{"tags":[],"owner":{"account_id":10591094,"reputation":144,"user_id":7801638,"accept_rate":0,"display_name":"Co ti"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606157995,"creation_date":1606157995,"answer_id":64974688,"question_id":64974595,"body_markdown":"Try to use instead of `$` use this `#`.\r\nOr try this `@Value(&quot;${&lt;my-property&gt;}&quot;)`","title":"Spring Boot YAML: set null property value","body":"<p>Try to use instead of <code>$</code> use this <code>#</code>.\nOr try this <code>@Value(&quot;${&lt;my-property&gt;}&quot;)</code></p>\n"},{"tags":[],"owner":{"account_id":3210091,"reputation":5835,"user_id":2710256,"accept_rate":46,"display_name":"breakline"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639480180,"creation_date":1639480180,"answer_id":70347891,"question_id":64974595,"body_markdown":"You can&#39;t, but this is not because YAML. YAML supports null as per:\r\n\r\nhttps://stackoverflow.com/questions/34089496/empty-field-in-yaml\r\n\r\nThis is because of a Spring processor class, which turns &quot;null&quot; values into empty strings, see here:\r\n\r\nhttps://github.com/spring-projects/spring-framework/issues/19986","title":"Spring Boot YAML: set null property value","body":"<p>You can't, but this is not because YAML. YAML supports null as per:</p>\n<p><a href=\"https://stackoverflow.com/questions/34089496/empty-field-in-yaml\">Empty field in yaml</a></p>\n<p>This is because of a Spring processor class, which turns &quot;null&quot; values into empty strings, see here:</p>\n<p><a href=\"https://github.com/spring-projects/spring-framework/issues/19986\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-framework/issues/19986</a></p>\n"},{"tags":[],"owner":{"account_id":3019314,"reputation":510,"user_id":2560718,"display_name":"Turzo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648052827,"creation_date":1648052429,"answer_id":71590626,"question_id":64974595,"body_markdown":"I had a similar use case, and had to go through quite a bit of trial and error. \r\n\r\nThe following two-step solution worked for me\r\n\r\n1. Don&#39;t define `my-property` in the YAML file. This way Spring cannot (annoyingly) inject a *stringified* value  like `&quot;&quot;` or `&quot;~&quot;` or `&quot;null&quot;`, and will be forced to look for a default value.\r\n\r\n2. Use `#{null}` as the default value. This is an SpEL expression that evaluates to `null`.\r\n\r\nIn your example, it will be \r\n```\r\n@Value(&quot;${my-property:#{null}}&quot;)\r\nprivate String myProperty;\r\n```\r\nBe careful not to mess up with the curly brackets.","title":"Spring Boot YAML: set null property value","body":"<p>I had a similar use case, and had to go through quite a bit of trial and error.</p>\n<p>The following two-step solution worked for me</p>\n<ol>\n<li><p>Don't define <code>my-property</code> in the YAML file. This way Spring cannot (annoyingly) inject a <em>stringified</em> value  like <code>&quot;&quot;</code> or <code>&quot;~&quot;</code> or <code>&quot;null&quot;</code>, and will be forced to look for a default value.</p>\n</li>\n<li><p>Use <code>#{null}</code> as the default value. This is an SpEL expression that evaluates to <code>null</code>.</p>\n</li>\n</ol>\n<p>In your example, it will be</p>\n<pre><code>@Value(&quot;${my-property:#{null}}&quot;)\nprivate String myProperty;\n</code></pre>\n<p>Be careful not to mess up with the curly brackets.</p>\n"}],"owner":{"account_id":2876792,"reputation":1939,"user_id":2468620,"accept_rate":56,"display_name":"Jardo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6656,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1648052827,"creation_date":1606157629,"question_id":64974595,"body_markdown":"I&#39;m having trouble setting `null` as a property value.\r\n\r\nThis is how the value is defined in YAML file:\r\n\r\n    my-property: null\r\n\r\nThis is how I inject it in code:\r\n\r\n    @Value(&quot;${my-property}&quot;)\r\n    private String myProperty;\r\n\r\nFor some reason, Spring keeps injecting an empty string (&quot;&quot;) instead of `null`. Am I missing something or is this an error in Spring?","title":"Spring Boot YAML: set null property value","body":"<p>I'm having trouble setting <code>null</code> as a property value.</p>\n<p>This is how the value is defined in YAML file:</p>\n<pre><code>my-property: null\n</code></pre>\n<p>This is how I inject it in code:</p>\n<pre><code>@Value(&quot;${my-property}&quot;)\nprivate String myProperty;\n</code></pre>\n<p>For some reason, Spring keeps injecting an empty string (&quot;&quot;) instead of <code>null</code>. Am I missing something or is this an error in Spring?</p>\n"},{"tags":["java","groovy","jmeter"],"comments":[{"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"score":0,"creation_date":1648045034,"post_id":71588213,"comment_id":126524838,"body_markdown":"I need to transform a binary object `eФзв~G]јХЕЫ\\e\\/А` to another binary object `8ЭЏWпP2†ЧV%DЙ„C@/ќЋ NІЦЭ$‹u&lt;’&#174;ЗY&amp;[`, please help","body":"I need to transform a binary object <code>eФзв~G]јХЕЫ\\e\\&#47;А</code> to another binary object <code>8ЭЏWпP2†ЧV%DЙ„C@&#47;ќЋ NІЦЭ$‹u&lt;’&#174;ЗY&amp;[</code>, please help"},{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1648050028,"post_id":71588213,"comment_id":126527182,"body_markdown":"The log `3: 0 :  Extra` tell you that the `Extra:` is only split to 1 element array, as you  can&#39;t see `3: 1` on next line. Hence will cause error when calling `lstColSpltData[1]`. Try using [split(&#39;:&#39;, 2)](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#split(java.lang.String,int)) to ensure there are 2 elements in array or check the array size is 2 before accessing 2nd element.","body":"The log <code>3: 0 :  Extra</code> tell you that the <code>Extra:</code> is only split to 1 element array, as you  can&#39;t see <code>3: 1</code> on next line. Hence will cause error when calling <code>lstColSpltData[1]</code>. Try using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#split(java.lang.String,int)\" rel=\"nofollow noreferrer\">split(&#39;:&#39;, 2)</a> to ensure there are 2 elements in array or check the array size is 2 before accessing 2nd element."},{"owner":{"account_id":24224848,"reputation":3,"user_id":18179506,"display_name":"DEVIL FF"},"score":0,"creation_date":1648122414,"post_id":71588213,"comment_id":126546874,"body_markdown":"@samabcde  The split(&#39;:&#39;, 2)  stmt did the trick. Thank you.","body":"@samabcde  The split(&#39;:&#39;, 2)  stmt did the trick. Thank you."}],"owner":{"account_id":24224848,"reputation":3,"user_id":18179506,"display_name":"DEVIL FF"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1648052741,"creation_date":1648042762,"question_id":71588213,"body_markdown":"Objective : I am receiving Table data structure in the form of &quot;class java.util.ArrayListobj&quot;, I would like to transform into Map (Col Name, Data Type) for later use in generating insert statement \r\n\r\n    Input \r\n    ArrayList data = [&#39;[Field:pack_id, Type:int(9), Null:NO, Extra:, Default:null, Key:PRI]&#39;, \r\n    \t\t\t\t\t\t&#39;[Field:locn, Type:mediumint(5), Null:NO, Extra:, Default:null, Key:PRI]&#39;] \r\n    Required Output: \r\n    Map =[Field:pack_id, Type:int(9), Null:NO, Extra:, Default:null, Key:PRI]\r\n\r\nI am receiving error:\r\n\r\n&gt; javax.script.ScriptException: java.lang.ArrayIndexOutOfBoundsException: 1.....&quot;\r\n\r\nwhere am I going wrong?\r\n\r\n\r\nHere is my code:\r\n\r\n\r\n        ArrayList data = [&#39;[Field:pack_id, Type:int(9), Null:NO, Extra:, Default:null, Key:PRI]&#39;, \r\n            \t\t\t\t\t\t&#39;[Field:locn, Type:mediumint(5),Null:NO,Extra:,Default:null,Key:PRI]&#39;]\t\t\r\n            \r\n            def lstStrColRec = []\r\n            \t\t\r\n            data.each{\r\n            \t\t\t\t\r\n            \tlog.info(&quot;$it&quot;)\r\n            \tlstStrColRec.add(&quot;$it&quot;);\r\n            \t}\r\n            \r\n            log.info(&quot; Column Records List Size :&quot; + lstStrColRec.size())\r\n            lstStrColRec.eachWithIndex{it,i -&gt; log.info(&quot;$i : $it&quot;)}\r\n            \t\t\t\r\n            for(i=0; i&lt;lstStrColRec.size(); i++)\r\n            \t{\r\n            \t\t\t\t\r\n            \t// Split Column Record data into Columns details by splitting on &quot;,&quot;\r\n            \tdef lstStrRecColData =[]\r\n            \tlog.info(lstStrColRec.getAt(i))\r\n            \tlstStrRecColData = lstStrColRec.getAt(i).split(&#39;,&#39;)\r\n            \tdef mapCol =[:]\r\n            \tlog.info(&quot;No of Columns in a Record :&quot; + lstStrRecColData.size())\r\n            \t\t\t\t\t\r\n            \t\tfor (j=0; j&lt;lstStrRecColData.size();j++)\r\n            \t\t\t{\r\n            \t\t\tdef lstColSpltData =[]\r\n            \t\t\tlstColSpltData = lstStrRecColData.getAt(j).split(&#39;:&#39;)\r\n            \t\t\tlstColSpltData.eachWithIndex {it,i -&gt; log.info(j +&quot;: &quot; +  &quot;$i : $it&quot;)}\r\n            \r\n            \t\t\tif(lstColSpltData[1] !=&quot;&quot;)\r\n            \t\t\t\tmapCol.put(lstColSpltData[0], lstColSpltData[1])\r\n            \t\t\telse\r\n            \t\t\t\tmapCol.put(lstColSpltData[0], Null)\r\n            \t\t}\r\n            }\r\n    \r\nOutput and error: \r\n    \r\n    2022-03-23 18:36:46,671 INFO o.a.j.e.J.JSR223 PostProcessor: [Field:pack_id, Type:int(9), Null:NO, Extra:, Default:null, Key:PRI]\r\n    2022-03-23 18:36:46,671 INFO o.a.j.e.J.JSR223 PostProcessor: [Field:locn, Type:mediumint(5), Null:NO, Extra:, Default:null, Key:PRI]\r\n    2022-03-23 18:36:46,671 INFO o.a.j.e.J.JSR223 PostProcessor:  Column Records List Size :2\r\n    2022-03-23 18:36:46,672 INFO o.a.j.e.J.JSR223 PostProcessor: 0 : [Field:pack_id, Type:int(9), Null:NO, Extra:, Default:null, Key:PRI]\r\n    2022-03-23 18:36:46,672 INFO o.a.j.e.J.JSR223 PostProcessor: 1 : [Field:locn, Type:mediumint(5), Null:NO, Extra:, Default:null, Key:PRI]\r\n    2022-03-23 18:36:46,673 INFO o.a.j.e.J.JSR223 PostProcessor: [Field:pack_id, Type:int(9), Null:NO, Extra:, Default:null, Key:PRI]\r\n    2022-03-23 18:36:46,673 INFO o.a.j.e.J.JSR223 PostProcessor: No of Columns in a Record :6\r\n    2022-03-23 18:36:46,674 INFO o.a.j.e.J.JSR223 PostProcessor: 0: 0 : [Field\r\n    2022-03-23 18:36:46,674 INFO o.a.j.e.J.JSR223 PostProcessor: 0: 1 : pack_id\r\n    2022-03-23 18:36:46,674 INFO o.a.j.e.J.JSR223 PostProcessor: 1: 0 :  Type\r\n    2022-03-23 18:36:46,674 INFO o.a.j.e.J.JSR223 PostProcessor: 1: 1 : int(9)\r\n    2022-03-23 18:36:46,674 INFO o.a.j.e.J.JSR223 PostProcessor: 2: 0 :  Null\r\n    2022-03-23 18:36:46,674 INFO o.a.j.e.J.JSR223 PostProcessor: 2: 1 : NO\r\n    2022-03-23 18:36:46,674 INFO o.a.j.e.J.JSR223 PostProcessor: 3: 0 :  Extra\r\n    2022-03-23 18:36:46,674 ERROR o.a.j.e.JSR223PostProcessor: Problem in JSR223 script, JSR223 PostProcessor\r\n    javax.script.ScriptException: java.lang.ArrayIndexOutOfBoundsException: 1\r\n    \tat org.codehaus.groovy.jsr223.GroovyScriptEngineImpl.eval(GroovyScriptEngineImpl.java:320) ~[groovy-jsr223-3.0.7.jar:3.0.7]\r\n    \tat org.codehaus.groovy.jsr223.GroovyCompiledScript.eval(GroovyCompiledScript.java:71) ~[groovy-jsr223-3.0.7.jar:3.0.7]\r\n    \tat javax.script.CompiledScript.eval(Unknown Source) ~[?:1.8.0_111]\r\n    \tat org.apache.jmeter.util.JSR223TestElement.processFileOrScript(JSR223TestElement.java:217) ~[ApacheJMeter_core.jar:5.4.3]\r\n    \tat org.apache.jmeter.extractor.JSR223PostProcessor.process(JSR223PostProcessor.java:45) [ApacheJMeter_components.jar:5.4.3]\r\n    \tat org.apache.jmeter.threads.JMeterThread.runPostProcessors(JMeterThread.java:955) [ApacheJMeter_core.jar:5.4.3]\r\n    \tat org.apache.jmeter.threads.JMeterThread.executeSamplePackage(JMeterThread.java:573) [ApacheJMeter_core.jar:5.4.3]\r\n    \tat org.apache.jmeter.threads.JMeterThread.processSampler(JMeterThread.java:489) [ApacheJMeter_core.jar:5.4.3]\r\n    \tat org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:256) [ApacheJMeter_core.jar:5.4.3]\r\n    \tat java.lang.Thread.run(Unknown Source) [?:1.8.0_111]\r\n    Caused by: java.lang.ArrayIndexOutOfBoundsException: 1\r\n    \tat org.codehaus.groovy.runtime.dgmimpl.arrays.ObjectArrayGetAtMetaMethod$MyPojoMetaMethodSite.call(ObjectArrayGetAtMetaMethod.java:60) ~[groovy-3.0.7.jar:3.0.7]\r\n    \tat Script91.run(Script91.groovy:113) ~[?:?]\r\n    \tat org.codehaus.groovy.jsr223.GroovyScriptEngineImpl.eval(GroovyScriptEngineImpl.java:317) ~[groovy-jsr223-3.0.7.jar:3.0.7]\r\n    \t... 9 more\r\n    2022-03-23 18:36:46,675 INFO o.a.j.t.JMeterThread: Thread is done: Data Sync - Thread Group 1-1\r\n    2022-03-23 18:36:46,675 INFO o.a.j.t.JMeterThread: Thread finished: Data Sync - Thread Group 1-1\r\n    2022-03-23 18:36:46,676 INFO o.a.j.e.StandardJMeterEngine: Notifying test listeners of end of test\r\n    2022-03-23 18:36:46,678 INFO o.a.j.g.u.JMeterMenuBar: setRunning(false, *local*)\r\n\r\n\r\n","title":"While Transforming Table structure columns into a Map object getting &quot;javax.script.ScriptException: java.lang.ArrayIndexOutOfBoundsException: 1&quot;","body":"<p>Objective : I am receiving Table data structure in the form of &quot;class java.util.ArrayListobj&quot;, I would like to transform into Map (Col Name, Data Type) for later use in generating insert statement</p>\n<pre><code>Input \nArrayList data = ['[Field:pack_id, Type:int(9), Null:NO, Extra:, Default:null, Key:PRI]', \n                        '[Field:locn, Type:mediumint(5), Null:NO, Extra:, Default:null, Key:PRI]'] \nRequired Output: \nMap =[Field:pack_id, Type:int(9), Null:NO, Extra:, Default:null, Key:PRI]\n</code></pre>\n<p>I am receiving error:</p>\n<blockquote>\n<p>javax.script.ScriptException: java.lang.ArrayIndexOutOfBoundsException: 1.....&quot;</p>\n</blockquote>\n<p>where am I going wrong?</p>\n<p>Here is my code:</p>\n<pre><code>    ArrayList data = ['[Field:pack_id, Type:int(9), Null:NO, Extra:, Default:null, Key:PRI]', \n                                '[Field:locn, Type:mediumint(5),Null:NO,Extra:,Default:null,Key:PRI]']      \n        \n        def lstStrColRec = []\n                \n        data.each{\n                        \n            log.info(&quot;$it&quot;)\n            lstStrColRec.add(&quot;$it&quot;);\n            }\n        \n        log.info(&quot; Column Records List Size :&quot; + lstStrColRec.size())\n        lstStrColRec.eachWithIndex{it,i -&gt; log.info(&quot;$i : $it&quot;)}\n                    \n        for(i=0; i&lt;lstStrColRec.size(); i++)\n            {\n                        \n            // Split Column Record data into Columns details by splitting on &quot;,&quot;\n            def lstStrRecColData =[]\n            log.info(lstStrColRec.getAt(i))\n            lstStrRecColData = lstStrColRec.getAt(i).split(',')\n            def mapCol =[:]\n            log.info(&quot;No of Columns in a Record :&quot; + lstStrRecColData.size())\n                            \n                for (j=0; j&lt;lstStrRecColData.size();j++)\n                    {\n                    def lstColSpltData =[]\n                    lstColSpltData = lstStrRecColData.getAt(j).split(':')\n                    lstColSpltData.eachWithIndex {it,i -&gt; log.info(j +&quot;: &quot; +  &quot;$i : $it&quot;)}\n        \n                    if(lstColSpltData[1] !=&quot;&quot;)\n                        mapCol.put(lstColSpltData[0], lstColSpltData[1])\n                    else\n                        mapCol.put(lstColSpltData[0], Null)\n                }\n        }\n</code></pre>\n<p>Output and error:</p>\n<pre><code>2022-03-23 18:36:46,671 INFO o.a.j.e.J.JSR223 PostProcessor: [Field:pack_id, Type:int(9), Null:NO, Extra:, Default:null, Key:PRI]\n2022-03-23 18:36:46,671 INFO o.a.j.e.J.JSR223 PostProcessor: [Field:locn, Type:mediumint(5), Null:NO, Extra:, Default:null, Key:PRI]\n2022-03-23 18:36:46,671 INFO o.a.j.e.J.JSR223 PostProcessor:  Column Records List Size :2\n2022-03-23 18:36:46,672 INFO o.a.j.e.J.JSR223 PostProcessor: 0 : [Field:pack_id, Type:int(9), Null:NO, Extra:, Default:null, Key:PRI]\n2022-03-23 18:36:46,672 INFO o.a.j.e.J.JSR223 PostProcessor: 1 : [Field:locn, Type:mediumint(5), Null:NO, Extra:, Default:null, Key:PRI]\n2022-03-23 18:36:46,673 INFO o.a.j.e.J.JSR223 PostProcessor: [Field:pack_id, Type:int(9), Null:NO, Extra:, Default:null, Key:PRI]\n2022-03-23 18:36:46,673 INFO o.a.j.e.J.JSR223 PostProcessor: No of Columns in a Record :6\n2022-03-23 18:36:46,674 INFO o.a.j.e.J.JSR223 PostProcessor: 0: 0 : [Field\n2022-03-23 18:36:46,674 INFO o.a.j.e.J.JSR223 PostProcessor: 0: 1 : pack_id\n2022-03-23 18:36:46,674 INFO o.a.j.e.J.JSR223 PostProcessor: 1: 0 :  Type\n2022-03-23 18:36:46,674 INFO o.a.j.e.J.JSR223 PostProcessor: 1: 1 : int(9)\n2022-03-23 18:36:46,674 INFO o.a.j.e.J.JSR223 PostProcessor: 2: 0 :  Null\n2022-03-23 18:36:46,674 INFO o.a.j.e.J.JSR223 PostProcessor: 2: 1 : NO\n2022-03-23 18:36:46,674 INFO o.a.j.e.J.JSR223 PostProcessor: 3: 0 :  Extra\n2022-03-23 18:36:46,674 ERROR o.a.j.e.JSR223PostProcessor: Problem in JSR223 script, JSR223 PostProcessor\njavax.script.ScriptException: java.lang.ArrayIndexOutOfBoundsException: 1\n    at org.codehaus.groovy.jsr223.GroovyScriptEngineImpl.eval(GroovyScriptEngineImpl.java:320) ~[groovy-jsr223-3.0.7.jar:3.0.7]\n    at org.codehaus.groovy.jsr223.GroovyCompiledScript.eval(GroovyCompiledScript.java:71) ~[groovy-jsr223-3.0.7.jar:3.0.7]\n    at javax.script.CompiledScript.eval(Unknown Source) ~[?:1.8.0_111]\n    at org.apache.jmeter.util.JSR223TestElement.processFileOrScript(JSR223TestElement.java:217) ~[ApacheJMeter_core.jar:5.4.3]\n    at org.apache.jmeter.extractor.JSR223PostProcessor.process(JSR223PostProcessor.java:45) [ApacheJMeter_components.jar:5.4.3]\n    at org.apache.jmeter.threads.JMeterThread.runPostProcessors(JMeterThread.java:955) [ApacheJMeter_core.jar:5.4.3]\n    at org.apache.jmeter.threads.JMeterThread.executeSamplePackage(JMeterThread.java:573) [ApacheJMeter_core.jar:5.4.3]\n    at org.apache.jmeter.threads.JMeterThread.processSampler(JMeterThread.java:489) [ApacheJMeter_core.jar:5.4.3]\n    at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:256) [ApacheJMeter_core.jar:5.4.3]\n    at java.lang.Thread.run(Unknown Source) [?:1.8.0_111]\nCaused by: java.lang.ArrayIndexOutOfBoundsException: 1\n    at org.codehaus.groovy.runtime.dgmimpl.arrays.ObjectArrayGetAtMetaMethod$MyPojoMetaMethodSite.call(ObjectArrayGetAtMetaMethod.java:60) ~[groovy-3.0.7.jar:3.0.7]\n    at Script91.run(Script91.groovy:113) ~[?:?]\n    at org.codehaus.groovy.jsr223.GroovyScriptEngineImpl.eval(GroovyScriptEngineImpl.java:317) ~[groovy-jsr223-3.0.7.jar:3.0.7]\n    ... 9 more\n2022-03-23 18:36:46,675 INFO o.a.j.t.JMeterThread: Thread is done: Data Sync - Thread Group 1-1\n2022-03-23 18:36:46,675 INFO o.a.j.t.JMeterThread: Thread finished: Data Sync - Thread Group 1-1\n2022-03-23 18:36:46,676 INFO o.a.j.e.StandardJMeterEngine: Notifying test listeners of end of test\n2022-03-23 18:36:46,678 INFO o.a.j.g.u.JMeterMenuBar: setRunning(false, *local*)\n</code></pre>\n"},{"tags":["java","azure","azure-functions"],"comments":[{"owner":{"account_id":12644990,"reputation":17422,"user_id":9191057,"display_name":"Jerry Liu"},"score":0,"creation_date":1529053099,"post_id":49214214,"comment_id":88745969,"body_markdown":"Possible duplicate of [Why are the Level.FINE logging messages not showing?](https://stackoverflow.com/questions/6315699/why-are-the-level-fine-logging-messages-not-showing)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/6315699/why-are-the-level-fine-logging-messages-not-showing\">Why are the Level.FINE logging messages not showing?</a>"}],"answers":[{"tags":[],"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1648052682,"creation_date":1648052682,"answer_id":71590688,"question_id":49214214,"body_markdown":"I don&#39;t know the actual answer, but here are 2 ideas:\r\n\r\n 1.  Create a `src/main/resources/application.properties` with this content:\r\n\r\n    logging.level.com.azure.cosmos=DEBUG\r\n\r\n 2.  IN your `host.json`, put this:\r\n\r\n    &quot;tracing&quot;:\r\n    {\r\n      &quot;consoleLevel&quot;: &quot;verbose&quot;\r\n    }\r\n\r\nNeither one of those worked for me, but I think I am on the right track.\r\n\r\nI use Lombok for logging config, and you should too.","title":"How to change logging level for azure-functions-maven-plugin?","body":"<p>I don't know the actual answer, but here are 2 ideas:</p>\n<ol>\n<li>Create a <code>src/main/resources/application.properties</code> with this content:</li>\n</ol>\n<pre><code>logging.level.com.azure.cosmos=DEBUG\n</code></pre>\n<ol start=\"2\">\n<li>IN your <code>host.json</code>, put this:</li>\n</ol>\n<pre><code>&quot;tracing&quot;:\n{\n  &quot;consoleLevel&quot;: &quot;verbose&quot;\n}\n</code></pre>\n<p>Neither one of those worked for me, but I think I am on the right track.</p>\n<p>I use Lombok for logging config, and you should too.</p>\n"}],"owner":{"account_id":291702,"reputation":989,"user_id":1232197,"accept_rate":73,"display_name":"anton1980"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":842,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1648052682,"creation_date":1520717342,"question_id":49214214,"body_markdown":"I have developed an Azure Function and I run it locally with with &quot;mvn azure-functions:run&quot; command. How do I change the console log level? It appears to be INFO, and prints something like this: \r\n\r\n    [3/10/18 9:26:38 PM] Generating 1 job function(s)\r\n    [3/10/18 9:26:38 PM] Starting Host (HostId=pollux-1571256755, Version=2.0.11587.0, ProcessId=18280, Debug=False, ConsecutiveErrors=0, StartupCount=2, FunctionsExtensionVersion=)\r\n    [3/10/18 9:26:38 PM] Found the following functions:\r\n    [3/10/18 9:26:38 PM] Host.Functions.post\r\n    [3/10/18 9:26:38 PM]\r\n    [3/10/18 9:26:38 PM] Job host started\r\n    info: Worker.Java.aa343152-8252-4f5b-88bf-664d1f8e0c3e[0]\r\n          Listening for transport dt_socket at address: 5005\r\n    info: Worker.Java.aa343152-8252-4f5b-88bf-664d1f8e0c3e[0]\r\n          Microsoft Azure Functions Java Runtime [build 1.0.0-beta-3]\r\n    info: Worker.Java.aa343152-8252-4f5b-88bf-664d1f8e0c3e[0]\r\n          [INFO] {MessageHandler.handle}: Message generated by &quot;StartStream.Builder&quot;\r\n    info: Worker.Java.aa343152-8252-4f5b-88bf-664d1f8e0c3e[0]\r\n          Worker initialized\r\n    info: Worker.Java.aa343152-8252-4f5b-88bf-664d1f8e0c3e[0]\r\n          &quot;post&quot; loaded (ID: 7e6b5aa1-d8d9-496b-ba34-ba12d562e8af, Reflection:   &quot;C:\\git\\codestrong-a2\\jscraper-azure-poster\\target\\azure-functions\\jscraper-azure-poster-20180310145647740\\jscraper-azure-poster-0.0.1-SNAPSHOT.jar&quot;::&quot;biz.codestrong.azure.AzureQueuePoster.post&quot;)\r\n\r\nBut I need it to be DEBUG or lower. In my function code, I have a line like this:\r\n\r\n    context.getLogger().log(Level.FINE, &quot;Created queue client &quot; + queueClient);\r\n\r\nThis line never prints as it is. \r\n","title":"How to change logging level for azure-functions-maven-plugin?","body":"<p>I have developed an Azure Function and I run it locally with with \"mvn azure-functions:run\" command. How do I change the console log level? It appears to be INFO, and prints something like this: </p>\n\n<pre><code>[3/10/18 9:26:38 PM] Generating 1 job function(s)\n[3/10/18 9:26:38 PM] Starting Host (HostId=pollux-1571256755, Version=2.0.11587.0, ProcessId=18280, Debug=False, ConsecutiveErrors=0, StartupCount=2, FunctionsExtensionVersion=)\n[3/10/18 9:26:38 PM] Found the following functions:\n[3/10/18 9:26:38 PM] Host.Functions.post\n[3/10/18 9:26:38 PM]\n[3/10/18 9:26:38 PM] Job host started\ninfo: Worker.Java.aa343152-8252-4f5b-88bf-664d1f8e0c3e[0]\n      Listening for transport dt_socket at address: 5005\ninfo: Worker.Java.aa343152-8252-4f5b-88bf-664d1f8e0c3e[0]\n      Microsoft Azure Functions Java Runtime [build 1.0.0-beta-3]\ninfo: Worker.Java.aa343152-8252-4f5b-88bf-664d1f8e0c3e[0]\n      [INFO] {MessageHandler.handle}: Message generated by \"StartStream.Builder\"\ninfo: Worker.Java.aa343152-8252-4f5b-88bf-664d1f8e0c3e[0]\n      Worker initialized\ninfo: Worker.Java.aa343152-8252-4f5b-88bf-664d1f8e0c3e[0]\n      \"post\" loaded (ID: 7e6b5aa1-d8d9-496b-ba34-ba12d562e8af, Reflection:   \"C:\\git\\codestrong-a2\\jscraper-azure-poster\\target\\azure-functions\\jscraper-azure-poster-20180310145647740\\jscraper-azure-poster-0.0.1-SNAPSHOT.jar\"::\"biz.codestrong.azure.AzureQueuePoster.post\")\n</code></pre>\n\n<p>But I need it to be DEBUG or lower. In my function code, I have a line like this:</p>\n\n<pre><code>context.getLogger().log(Level.FINE, \"Created queue client \" + queueClient);\n</code></pre>\n\n<p>This line never prints as it is. </p>\n"},{"tags":["java","arrays","loops","for-loop"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1648044929,"post_id":71588743,"comment_id":126524781,"body_markdown":"you don&#39;t need that variable index. Once you found your match, just return the index. &quot;This is obviously wrong.&quot; Why is it wrong? What&#39;s wrong with it?","body":"you don&#39;t need that variable index. Once you found your match, just return the index. &quot;This is obviously wrong.&quot; Why is it wrong? What&#39;s wrong with it?"},{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":4,"creation_date":1648045028,"post_id":71588743,"comment_id":126524835,"body_markdown":"Why do you think your code is wrong? Because it prints `0` (which is the correct solution)?","body":"Why do you think your code is wrong? Because it prints <code>0</code> (which is the correct solution)?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":4,"creation_date":1648045029,"post_id":71588743,"comment_id":126524836,"body_markdown":"One thing that is wrong, is that your method doesn&#39;t return anything. It should return the index, not just print something.","body":"One thing that is wrong, is that your method doesn&#39;t return anything. It should return the index, not just print something."},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1648045092,"post_id":71588743,"comment_id":126524865,"body_markdown":"Your method does not &quot;return&quot; anything it currently just prints. If you need a method that returns then reading [Differences between System.out.println() and return in Java](https://stackoverflow.com/questions/25456472/differences-between-system-out-println-and-return-in-java) might be a good idea.","body":"Your method does not &quot;return&quot; anything it currently just prints. If you need a method that returns then reading <a href=\"https://stackoverflow.com/questions/25456472/differences-between-system-out-println-and-return-in-java\">Differences between System.out.println() and return in Java</a> might be a good idea."},{"owner":{"account_id":4279913,"reputation":3623,"user_id":3499626,"accept_rate":89,"display_name":"jhamon"},"score":1,"creation_date":1648045101,"post_id":71588743,"comment_id":126524869,"body_markdown":"Please explain why you think this is &quot;obviously wrong&quot;","body":"Please explain why you think this is &quot;obviously wrong&quot;"}],"answers":[{"tags":[],"owner":{"account_id":14048235,"reputation":11,"user_id":10147819,"display_name":"Shruti Chakraborty"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1648045431,"creation_date":1648045431,"answer_id":71588900,"question_id":71588743,"body_markdown":"This will through compilation error as `int index;` is not initialized. Once initialized, else part would become redundant. Rest would work and deliver you the expected output.","title":"Method that takes an int array and a value and returns the index of that value in the array","body":"<p>This will through compilation error as <code>int index;</code> is not initialized. Once initialized, else part would become redundant. Rest would work and deliver you the expected output.</p>\n"},{"tags":[],"owner":{"account_id":17870426,"reputation":1,"user_id":12981849,"display_name":"Saeed Gooda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648046306,"creation_date":1648046306,"answer_id":71589123,"question_id":71588743,"body_markdown":"The problem is that you didn&#39;t initialize the variable (index):\r\n\r\n    int index = -1;\r\n\r\n--------------------------------------------------------------------------------\r\n\r\nbut you should think at another way as follows:\r\n\r\n1 - read what you want to do\r\n\r\n2- You need to make a function that return the index of a specific value of array\r\n\r\n3- Define the return type of the function ==&gt; you need to return the index then the function return type is int\r\n\r\n4- Define the parameters ==&gt; you have 2 parameters : array and the value\r\n\r\n5- You should return the index of value or -1 if it doesn&#39;t exist then you will initialize the index = -1\r\n\r\n6- Code will be as follows:\r\n\r\n\r\n    public class Exercise6\r\n    {\r\n        public static int linearSearch(int[] a, int n){  \r\n            int index = -1;      \r\n\r\n            for (int i = 0; i &lt; a.length; i++){\r\n                if (a[i] == n){\r\n                    index = i;\r\n                    break;\r\n                }\r\n            }\r\n            return index;\r\n        }\r\n\r\n\t    public static void main(String[] args) {\r\n\t\t    int[] a = {3, 6, 70, 3, 7, 9};\r\n            System.out.println(linearSearch(a, 7));\r\n\t    }\r\n    }\r\n\r\n----------------------------------------------------------------------------------\r\n\r\nThink before Coding\r\n\r\nAll the best\r\n\r\n    ","title":"Method that takes an int array and a value and returns the index of that value in the array","body":"<p>The problem is that you didn't initialize the variable (index):</p>\n<pre><code>int index = -1;\n</code></pre>\n<hr />\n<p>but you should think at another way as follows:</p>\n<p>1 - read what you want to do</p>\n<p>2- You need to make a function that return the index of a specific value of array</p>\n<p>3- Define the return type of the function ==&gt; you need to return the index then the function return type is int</p>\n<p>4- Define the parameters ==&gt; you have 2 parameters : array and the value</p>\n<p>5- You should return the index of value or -1 if it doesn't exist then you will initialize the index = -1</p>\n<p>6- Code will be as follows:</p>\n<pre><code>public class Exercise6\n{\n    public static int linearSearch(int[] a, int n){  \n        int index = -1;      \n\n        for (int i = 0; i &lt; a.length; i++){\n            if (a[i] == n){\n                index = i;\n                break;\n            }\n        }\n        return index;\n    }\n\n    public static void main(String[] args) {\n        int[] a = {3, 6, 70, 3, 7, 9};\n        System.out.println(linearSearch(a, 7));\n    }\n}\n</code></pre>\n<hr />\n<p>Think before Coding</p>\n<p>All the best</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1648052361,"creation_date":1648051919,"answer_id":71590509,"question_id":71588743,"body_markdown":"There are several problems.\r\n\r\n- you want to return a value so you need to show that in the method by having a return type of `int` and not `void`.\r\n\r\n- you don&#39;t need an index variable, you already have one in your for loop `(i)` so use that.\r\n- As you iterate over the loop, as soon as you find the value, just do a `return i;` to return the index. You do not need any `break` statements in your method.\r\n- you don&#39;t need to keep assigning `-1` to index so get rid of the `else clause` (remember you don&#39;t even need `index`).\r\n- if you finish the loop the value must not be there so just `return -1;`.\r\n- and lastly since you are returning a value, you need to assign it when you call the method.  So do `int ret = linearSearch(a, 3);`. Then print the value.\r\n","title":"Method that takes an int array and a value and returns the index of that value in the array","body":"<p>There are several problems.</p>\n<ul>\n<li><p>you want to return a value so you need to show that in the method by having a return type of <code>int</code> and not <code>void</code>.</p>\n</li>\n<li><p>you don't need an index variable, you already have one in your for loop <code>(i)</code> so use that.</p>\n</li>\n<li><p>As you iterate over the loop, as soon as you find the value, just do a <code>return i;</code> to return the index. You do not need any <code>break</code> statements in your method.</p>\n</li>\n<li><p>you don't need to keep assigning <code>-1</code> to index so get rid of the <code>else clause</code> (remember you don't even need <code>index</code>).</p>\n</li>\n<li><p>if you finish the loop the value must not be there so just <code>return -1;</code>.</p>\n</li>\n<li><p>and lastly since you are returning a value, you need to assign it when you call the method.  So do <code>int ret = linearSearch(a, 3);</code>. Then print the value.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":24546205,"reputation":25,"user_id":18456026,"display_name":"Charbel Nicolas"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1496,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":71590509,"answer_count":3,"score":-1,"last_activity_date":1648052361,"creation_date":1648044861,"question_id":71588743,"body_markdown":"I&#39;ve spent like an hour trying to figure this one out and I couldn&#39;t. This is an exercise for a Java elective course I am taking and I could use some help.\r\n\r\n&gt; Write a method linearSearch() that takes an array of integers, and an\r\n&gt; integer value. It should then return the index of the value inside the\r\n&gt; array  (by using a for loop to traverse the elements one  by one in\r\n&gt; order). If the value is not found, -1 should be returned. If more than\r\n&gt; one value is found, the first occurrence should be returned. Write a\r\n&gt; program to test your method.\r\n\r\nSo this is what I tried doing.\r\n```java\r\npublic class Exercise6 {\r\n    public static void main(String [] args) {\r\n        int[] a = {3, 6, 70, 3, 7, 9};\r\n        linearSearch(a, 3);\r\n        \r\n    }\r\n\r\n    public static void linearSearch(int[] a, int n){  \r\n        int index;      \r\n\r\n        for (int i = 0; i &lt; a.length; i++){\r\n            if (a[i] == n){\r\n                index = i;\r\n                break;\r\n            }\r\n            else {\r\n                index = -1;\r\n            }\r\n        }\r\n        System.out.print(index);\r\n    }\r\n}\r\n```\r\n\r\nBut this is obviously wrong. Could you please point me in the right direction? I don&#39;t necessarily want you to give me the answer, just give me an idea about the steps.\r\n\r\n\r\n","title":"Method that takes an int array and a value and returns the index of that value in the array","body":"<p>I've spent like an hour trying to figure this one out and I couldn't. This is an exercise for a Java elective course I am taking and I could use some help.</p>\n<blockquote>\n<p>Write a method linearSearch() that takes an array of integers, and an\ninteger value. It should then return the index of the value inside the\narray  (by using a for loop to traverse the elements one  by one in\norder). If the value is not found, -1 should be returned. If more than\none value is found, the first occurrence should be returned. Write a\nprogram to test your method.</p>\n</blockquote>\n<p>So this is what I tried doing.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Exercise6 {\n    public static void main(String [] args) {\n        int[] a = {3, 6, 70, 3, 7, 9};\n        linearSearch(a, 3);\n        \n    }\n\n    public static void linearSearch(int[] a, int n){  \n        int index;      \n\n        for (int i = 0; i &lt; a.length; i++){\n            if (a[i] == n){\n                index = i;\n                break;\n            }\n            else {\n                index = -1;\n            }\n        }\n        System.out.print(index);\n    }\n}\n</code></pre>\n<p>But this is obviously wrong. Could you please point me in the right direction? I don't necessarily want you to give me the answer, just give me an idea about the steps.</p>\n"},{"tags":["java","maven","github","jenkins","sonar-runner"],"answers":[{"tags":[],"owner":{"account_id":10301257,"reputation":64,"user_id":7599941,"display_name":"Kyle Scott"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1504621963,"creation_date":1504621963,"answer_id":46057540,"question_id":45404161,"body_markdown":"It looks like your mvn sonar command is missing the GitHub oauth token parameter as noted in the [sonar documentation][1]. This [GitHub article][2] will step you through how to generate this token. Once it is generated, you can add it to your command (i.e. -Dsonar.github.oauth=**your token**). \r\n\r\n\r\n  [1]: https://docs.sonarqube.org/display/PLUG/GitHub+Plugin\r\n  [2]: https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/","title":"launch a sonar analysis for the code of a pullRequest with Jenkinsfile and maven","body":"<p>It looks like your mvn sonar command is missing the GitHub oauth token parameter as noted in the <a href=\"https://docs.sonarqube.org/display/PLUG/GitHub+Plugin\" rel=\"nofollow noreferrer\">sonar documentation</a>. This <a href=\"https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/\" rel=\"nofollow noreferrer\">GitHub article</a> will step you through how to generate this token. Once it is generated, you can add it to your command (i.e. -Dsonar.github.oauth=<strong>your token</strong>). </p>\n"},{"tags":[],"owner":{"account_id":1544346,"reputation":117,"user_id":1438245,"display_name":"MortusUK"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1529067598,"creation_date":1529067135,"answer_id":50876035,"question_id":45404161,"body_markdown":"As you haven&#39;t received an answer in 10 months i am going to help where i can Here is my working example for GitLab but you should be able to change this as the plugins are similar (https://wiki.jenkins.io/display/JENKINS/GitHub+Plugin#GitHubPlugin-Settingcommitstatus):\r\n\r\n\t#!groovy\r\n\r\n\tpipeline {\r\n\t\toptions {\r\n\t\t\tbuildDiscarder(\r\n\t\t\t\tlogRotator(artifactDaysToKeepStr: &#39;21&#39;, artifactNumToKeepStr: &#39;4&#39;, daysToKeepStr: &#39;21&#39;, numToKeepStr: &#39;4&#39;)\r\n\t\t\t)\r\n\t\t\tgitLabConnection(&#39;GitLab&#39;)\r\n\t\t}\r\n\r\n\t\tagent any\r\n\t\ttools {\r\n\t\t\tmaven &#39;Default Maven&#39;\r\n\t\t\tjdk &#39;DefaultJDK&#39;\r\n\t\t}\r\n\r\n\t\tstages {\r\n\t\t\tstage(&#39;Build&#39;) {\r\n\t\t\t\tsteps {\r\n\t\t\t\t\tsh &quot;mvn clean install -U&quot;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tstage(&#39;Source Code Analysis&#39;) {\r\n\t\t\t\tsteps {\r\n\t\t\t\t\twithMaven() {\r\n\t\t\t\t\t\tsh &quot;mvn &quot; +\r\n\t\t\t\t\t\t\t&quot;-Dsonar.branch=&#39;${env.BRANCH_NAME}&#39; &quot; +\r\n\t\t\t\t\t\t\t&quot;-Dsonar.analysis.mode=preview &quot; +\r\n\t\t\t\t\t\t\t&quot;-Dsonar.gitlab.commit_sha=\\$(git log --pretty=format:%H origin/master..&#39;${env.BRANCH_NAME}&#39; | tr &#39;\\\\n&#39; &#39;,&#39;) &quot; +\r\n\t\t\t\t\t\t\t&quot;-Dsonar.gitlab.ref_name=&#39;${env.BRANCH_NAME}&#39; &quot; +\r\n\t\t\t\t\t\t\t&quot;sonar:sonar&quot;\r\n\t\t\t\t\t}\r\n\t\t\t\t\twithMaven() {\r\n\t\t\t\t\t\tsh &quot;mvn -Dsonar.branch=&#39;${env.BRANCH_NAME}&#39; sonar:sonar&quot;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpost {\r\n\t\t\tsuccess {\r\n\t\t\t\techo &#39;posting success to GitLab&#39;\r\n\t\t\t\tupdateGitlabCommitStatus(name: &#39;jenkins-build&#39;, state: &#39;success&#39;)\r\n\t\t\t}\r\n\t\t\tfailure {\r\n\t\t\t\techo &#39;posting failure to GitLab&#39;\r\n\t\t\t\tupdateGitlabCommitStatus(name: &#39;jenkins-build&#39;, state: &#39;failed&#39;)\r\n\t\t\t}\r\n\t\t\talways {\r\n\t\t\t\tdeleteDir()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nThis includes various bits but covers what you are trying to do, the sonar analysis occurs in two parts preview (which comments on the commit and these comments are transferred to a merge request when opened) and then a normal analysis afterwords\r\n\r\nWithin the project pom i also have defined:\r\n\r\n\t&lt;sonar.gitlab.project_id&gt;${gitlab.project_id}&lt;/sonar.gitlab.project_id&gt;\r\n\t&lt;sonar.gitlab.unique_issue_per_inline&gt;true&lt;/sonar.gitlab.unique_issue_per_inline&gt;\r\n\t&lt;sonar.gitlab.user_token&gt;GITLAB_USER_TOKEN&lt;/sonar.gitlab.user_token&gt;\r\n\t&lt;sonar.gitlab.url&gt;${git.hostname.url}&lt;/sonar.gitlab.url&gt;\r\n\r\nIf you add these and replace the missing bits i believe this will solve your issue.\r\n\r\nEdit:\r\nI believe you need the following options for github instead of the GitLab one:\r\n\r\n\t-Dsonar.analysis.mode=preview \\\r\n\t-Dsonar.github.pullRequest=$PULL_REQUEST_ID \\\r\n\t-Dsonar.github.repository=myOrganisation/myProject \\\r\n\t-Dsonar.github.oauth=$GITHUB_ACCESS_TOKEN \\\r\n\t-Dsonar.host.url=https://server/sonarqube \\\r\n\t-Dsonar.login=$SONARQUBE_ACCESS_TOKEN","title":"launch a sonar analysis for the code of a pullRequest with Jenkinsfile and maven","body":"<p>As you haven't received an answer in 10 months i am going to help where i can Here is my working example for GitLab but you should be able to change this as the plugins are similar (<a href=\"https://wiki.jenkins.io/display/JENKINS/GitHub+Plugin#GitHubPlugin-Settingcommitstatus\" rel=\"nofollow noreferrer\">https://wiki.jenkins.io/display/JENKINS/GitHub+Plugin#GitHubPlugin-Settingcommitstatus</a>):</p>\n\n<pre><code>#!groovy\n\npipeline {\n    options {\n        buildDiscarder(\n            logRotator(artifactDaysToKeepStr: '21', artifactNumToKeepStr: '4', daysToKeepStr: '21', numToKeepStr: '4')\n        )\n        gitLabConnection('GitLab')\n    }\n\n    agent any\n    tools {\n        maven 'Default Maven'\n        jdk 'DefaultJDK'\n    }\n\n    stages {\n        stage('Build') {\n            steps {\n                sh \"mvn clean install -U\"\n            }\n        }\n\n        stage('Source Code Analysis') {\n            steps {\n                withMaven() {\n                    sh \"mvn \" +\n                        \"-Dsonar.branch='${env.BRANCH_NAME}' \" +\n                        \"-Dsonar.analysis.mode=preview \" +\n                        \"-Dsonar.gitlab.commit_sha=\\$(git log --pretty=format:%H origin/master..'${env.BRANCH_NAME}' | tr '\\\\n' ',') \" +\n                        \"-Dsonar.gitlab.ref_name='${env.BRANCH_NAME}' \" +\n                        \"sonar:sonar\"\n                }\n                withMaven() {\n                    sh \"mvn -Dsonar.branch='${env.BRANCH_NAME}' sonar:sonar\"\n                }\n            }\n        }\n    }\n\n    post {\n        success {\n            echo 'posting success to GitLab'\n            updateGitlabCommitStatus(name: 'jenkins-build', state: 'success')\n        }\n        failure {\n            echo 'posting failure to GitLab'\n            updateGitlabCommitStatus(name: 'jenkins-build', state: 'failed')\n        }\n        always {\n            deleteDir()\n        }\n    }\n}\n</code></pre>\n\n<p>This includes various bits but covers what you are trying to do, the sonar analysis occurs in two parts preview (which comments on the commit and these comments are transferred to a merge request when opened) and then a normal analysis afterwords</p>\n\n<p>Within the project pom i also have defined:</p>\n\n<pre><code>&lt;sonar.gitlab.project_id&gt;${gitlab.project_id}&lt;/sonar.gitlab.project_id&gt;\n&lt;sonar.gitlab.unique_issue_per_inline&gt;true&lt;/sonar.gitlab.unique_issue_per_inline&gt;\n&lt;sonar.gitlab.user_token&gt;GITLAB_USER_TOKEN&lt;/sonar.gitlab.user_token&gt;\n&lt;sonar.gitlab.url&gt;${git.hostname.url}&lt;/sonar.gitlab.url&gt;\n</code></pre>\n\n<p>If you add these and replace the missing bits i believe this will solve your issue.</p>\n\n<p>Edit:\nI believe you need the following options for github instead of the GitLab one:</p>\n\n<pre><code>-Dsonar.analysis.mode=preview \\\n-Dsonar.github.pullRequest=$PULL_REQUEST_ID \\\n-Dsonar.github.repository=myOrganisation/myProject \\\n-Dsonar.github.oauth=$GITHUB_ACCESS_TOKEN \\\n-Dsonar.host.url=https://server/sonarqube \\\n-Dsonar.login=$SONARQUBE_ACCESS_TOKEN\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3296491,"reputation":1949,"user_id":2773646,"display_name":"Derek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648052289,"creation_date":1648052289,"answer_id":71590592,"question_id":45404161,"body_markdown":"I had several GitHub projects that needed to add Sonar scans.  So, I took a slightly more generic approach to the execution of the scan by getting the org and repo from the URL.  This allows for both main branch and pull request branch scans. NOTE: This requires that the Jenkins server have the plugin installed for GitHub Branch Source to expose the CHANGE_* environment variables.\r\n\r\n    void runSonarScanner() {\r\n        def changeUrl = env.GIT_URL.split(&quot;/&quot;)\r\n        def org = changeUrl[3]\r\n        def repo = changeUrl[4].substring(0, changeUrl[4].length() - 4)\r\n        if (env.CHANGE_ID != null) {\r\n            sh &quot;mvn -B sonar:sonar \\\r\n                -Dsonar.projectKey=${org}_${repo} \\\r\n                -Dsonar.pullrequest.provider=GitHub \\\r\n                -Dsonar.pullrequest.github.repository=${org}/${repo} \\\r\n                -Dsonar.pullrequest.key=${env.CHANGE_ID} \\\r\n                -Dsonar.pullrequest.branch=${env.CHANGE_BRANCH} \\\r\n                -Dsonar.pullrequest.base=${env.CHANGE_TARGET}&quot;\r\n        } else {\r\n           sh &quot;mvn -B sonar:sonar \\\r\n               -Dsonar.projectKey=${org}_${repo} \\\r\n               -Dsonar.branch.name=${env.BRANCH_NAME}&quot;\r\n        }\r\n    }\r\n\r\n \r\nThe above groovy definition can be used in the Jenkinsfile like:\r\n\r\n    stage (&#39;Analyze&#39;) {\r\n        when {\r\n            anyOf {\r\n                changeRequest()\r\n                branch &quot;main&quot;\r\n            }\r\n        }\r\n        tools {\r\n            maven &#39;maven-3.6.0&#39;\r\n            jdk &#39;jdk11&#39;\r\n        }\r\n        steps {\r\n            withSonarQubeEnv(&#39;MySonar&#39;) {\r\n                runSonarScanner()\r\n            }\r\n        }\r\n    }\r\nThis requires that the SonarQube Scanner Server plugin to be installed and configured with a &quot;MySonar&quot; ID in Jenkins-&gt;Configuration under Sonar servers.","title":"launch a sonar analysis for the code of a pullRequest with Jenkinsfile and maven","body":"<p>I had several GitHub projects that needed to add Sonar scans.  So, I took a slightly more generic approach to the execution of the scan by getting the org and repo from the URL.  This allows for both main branch and pull request branch scans. NOTE: This requires that the Jenkins server have the plugin installed for GitHub Branch Source to expose the CHANGE_* environment variables.</p>\n<pre><code>void runSonarScanner() {\n    def changeUrl = env.GIT_URL.split(&quot;/&quot;)\n    def org = changeUrl[3]\n    def repo = changeUrl[4].substring(0, changeUrl[4].length() - 4)\n    if (env.CHANGE_ID != null) {\n        sh &quot;mvn -B sonar:sonar \\\n            -Dsonar.projectKey=${org}_${repo} \\\n            -Dsonar.pullrequest.provider=GitHub \\\n            -Dsonar.pullrequest.github.repository=${org}/${repo} \\\n            -Dsonar.pullrequest.key=${env.CHANGE_ID} \\\n            -Dsonar.pullrequest.branch=${env.CHANGE_BRANCH} \\\n            -Dsonar.pullrequest.base=${env.CHANGE_TARGET}&quot;\n    } else {\n       sh &quot;mvn -B sonar:sonar \\\n           -Dsonar.projectKey=${org}_${repo} \\\n           -Dsonar.branch.name=${env.BRANCH_NAME}&quot;\n    }\n}\n</code></pre>\n<p>The above groovy definition can be used in the Jenkinsfile like:</p>\n<pre><code>stage ('Analyze') {\n    when {\n        anyOf {\n            changeRequest()\n            branch &quot;main&quot;\n        }\n    }\n    tools {\n        maven 'maven-3.6.0'\n        jdk 'jdk11'\n    }\n    steps {\n        withSonarQubeEnv('MySonar') {\n            runSonarScanner()\n        }\n    }\n}\n</code></pre>\n<p>This requires that the SonarQube Scanner Server plugin to be installed and configured with a &quot;MySonar&quot; ID in Jenkins-&gt;Configuration under Sonar servers.</p>\n"}],"owner":{"account_id":3019275,"reputation":4542,"user_id":2560685,"accept_rate":70,"display_name":"sab"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2420,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":3,"score":13,"last_activity_date":1648052289,"creation_date":1501444980,"question_id":45404161,"body_markdown":"Currently on my project, each pull-Request on the organization-repository are build automatically by `Jenkins`, as specified in a jenkinsfile.\r\nWhen the build end, a message in send by `Jenkins` to github with the status of the build of this project.\r\n\r\nI want to send a `Sonar` analyse to the conversation of the pull-request, but only for the file/code who have been updated by the pull request.\r\n\r\n\r\n\r\n\r\ninfo for the bounty:\r\n\r\n - It need to use a jenkinsFile (adding a full jenkinsfile in your response will be appreciate)\r\n - the result should appear in the pullRequest page of github only for the code updated by the pullRequest.\r\n","title":"launch a sonar analysis for the code of a pullRequest with Jenkinsfile and maven","body":"<p>Currently on my project, each pull-Request on the organization-repository are build automatically by <code>Jenkins</code>, as specified in a jenkinsfile.\nWhen the build end, a message in send by <code>Jenkins</code> to github with the status of the build of this project.</p>\n\n<p>I want to send a <code>Sonar</code> analyse to the conversation of the pull-request, but only for the file/code who have been updated by the pull request.</p>\n\n<p>info for the bounty:</p>\n\n<ul>\n<li>It need to use a jenkinsFile (adding a full jenkinsfile in your response will be appreciate)</li>\n<li>the result should appear in the pullRequest page of github only for the code updated by the pullRequest.</li>\n</ul>\n"},{"tags":["java","spring","maven"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1648043363,"post_id":71588089,"comment_id":126523971,"body_markdown":"Is the `gradle.properties` file one you would commit to source control? If so, that&#39;s not a good place to store the API key. Spring Boot&#39;s `application.properties` can take values from the environment. How do you run your SB application? Is it managed by something like `OpenShift`?","body":"Is the <code>gradle.properties</code> file one you would commit to source control? If so, that&#39;s not a good place to store the API key. Spring Boot&#39;s <code>application.properties</code> can take values from the environment. How do you run your SB application? Is it managed by something like <code>OpenShift</code>?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1648043394,"post_id":71588089,"comment_id":126523993,"body_markdown":"As already mentioned checkin in is a bad idea...better using things like vault etc. ?","body":"As already mentioned checkin in is a bad idea...better using things like vault etc. ?"},{"owner":{"account_id":10759610,"reputation":12628,"user_id":7916438,"display_name":"tevemadar"},"score":0,"creation_date":1648043497,"post_id":71588089,"comment_id":126524052,"body_markdown":"I&#39;m not an expert on this, but such files usually go into source control, like GitHub, and thus I wouldn&#39;t put sensitive content in there. An everything-agnostic way is putting them into environment variables and reading via `System.getenv()`, https://docs.oracle.com/javase/tutorial/essential/environment/env.html","body":"I&#39;m not an expert on this, but such files usually go into source control, like GitHub, and thus I wouldn&#39;t put sensitive content in there. An everything-agnostic way is putting them into environment variables and reading via <code>System.getenv()</code>, <a href=\"https://docs.oracle.com/javase/tutorial/essential/environment/env.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/environment/env.ht&zwnj;&#8203;ml</a>"},{"owner":{"account_id":24660786,"reputation":21,"user_id":18557023,"display_name":"papasvenska"},"score":0,"creation_date":1648043696,"post_id":71588089,"comment_id":126524179,"body_markdown":"Its just a quick local webapp test which I want to put to github without exposing the keys.","body":"Its just a quick local webapp test which I want to put to github without exposing the keys."},{"owner":{"account_id":7529235,"reputation":1142,"user_id":5718106,"display_name":"Sibin Muhammed"},"score":0,"creation_date":1648203563,"post_id":71588089,"comment_id":126570325,"body_markdown":"Try JASYPT- https://www.baeldung.com/spring-boot-jasypt\nor Vault - https://stackoverflow.com/questions/60723956/securely-storing-secrets-of-a-spring-boot-application-in-hashicorp-vault","body":"Try JASYPT- <a href=\"https://www.baeldung.com/spring-boot-jasypt\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-jasypt</a> or Vault - <a href=\"https://stackoverflow.com/questions/60723956/securely-storing-secrets-of-a-spring-boot-application-in-hashicorp-vault\" title=\"securely storing secrets of a spring boot application in hashicorp vault\">stackoverflow.com/questions/60723956/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":22750553,"reputation":321,"user_id":17236065,"display_name":"Pedro Luiz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648051904,"creation_date":1648051904,"answer_id":71590504,"question_id":71588089,"body_markdown":"You can configure your api key to don&#39;t be pushed to your git remote repository, and then use it on your project using the **@Value** annotation.\r\n\r\nYou can configure the file containing your api key as &quot;**application-dev.properties**&quot; so it can&#39;t be pushed to the remote repository.\r\n\r\n\r\n&gt; .gitignore\r\n\r\n    application-dev.properties\r\n\r\nIt can be created under\r\n\r\n**/resources/application-dev.properties**\r\n\r\nYou can define your api key there\r\n\r\n&gt; application-dev.properties\r\n\r\n    apiKey=your_key\r\n\r\nAnd then in some class that you want to use it\r\n\r\n&gt; SomeClass.java\r\n\r\n    public class SomeClass {\r\n\r\n        @Value(&quot;${apiKey}&quot;)\r\n        private String apiKey;\r\n\r\n    }\r\n\r\nThen you can use this variable apiKey as your **api key**, hiding the actual value. \r\n","title":"How do you hide API Key when using Spring boot with Maven?","body":"<p>You can configure your api key to don't be pushed to your git remote repository, and then use it on your project using the <strong>@Value</strong> annotation.</p>\n<p>You can configure the file containing your api key as &quot;<strong>application-dev.properties</strong>&quot; so it can't be pushed to the remote repository.</p>\n<blockquote>\n<p>.gitignore</p>\n</blockquote>\n<pre><code>application-dev.properties\n</code></pre>\n<p>It can be created under</p>\n<p><strong>/resources/application-dev.properties</strong></p>\n<p>You can define your api key there</p>\n<blockquote>\n<p>application-dev.properties</p>\n</blockquote>\n<pre><code>apiKey=your_key\n</code></pre>\n<p>And then in some class that you want to use it</p>\n<blockquote>\n<p>SomeClass.java</p>\n</blockquote>\n<pre><code>public class SomeClass {\n\n    @Value(&quot;${apiKey}&quot;)\n    private String apiKey;\n\n}\n</code></pre>\n<p>Then you can use this variable apiKey as your <strong>api key</strong>, hiding the actual value.</p>\n"}],"owner":{"account_id":24660786,"reputation":21,"user_id":18557023,"display_name":"papasvenska"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3262,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71590504,"answer_count":1,"score":2,"last_activity_date":1648051904,"creation_date":1648042110,"question_id":71588089,"body_markdown":"I have seen examples with Gradle, where API key is stored in `gradle.properties` file.\r\nAfter that modifying the `build.gradle` file and then using a variable for it in Java app.\r\n\r\nHow can I do something similar in a Maven Project?\r\n","title":"How do you hide API Key when using Spring boot with Maven?","body":"<p>I have seen examples with Gradle, where API key is stored in <code>gradle.properties</code> file.\nAfter that modifying the <code>build.gradle</code> file and then using a variable for it in Java app.</p>\n<p>How can I do something similar in a Maven Project?</p>\n"},{"tags":["java","jsf","arraylist","oracle-adf","jdeveloper"],"answers":[{"tags":[],"owner":{"account_id":1652896,"reputation":2486,"user_id":1523120,"display_name":"Timo Hahn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648051864,"creation_date":1648051864,"answer_id":71590491,"question_id":71587753,"body_markdown":"From your code, it looks like the ResultMatching bean is in request scope:\r\n\r\n    value=&quot;#{ResultMatching.Results}&quot;\r\n\r\nIf you want to access the bean in view scope the EL should be \r\n\r\n    value=&quot;#{viewScope.ResultMatching.Results}&quot;\r\nYou have to change the EL for every occurrence of ResultMatching in all EL. Make sure that the bean is defined in viewScope in your task flow.","title":"Java ArrayList becomes empty between two user interactions?","body":"<p>From your code, it looks like the ResultMatching bean is in request scope:</p>\n<pre><code>value=&quot;#{ResultMatching.Results}&quot;\n</code></pre>\n<p>If you want to access the bean in view scope the EL should be</p>\n<pre><code>value=&quot;#{viewScope.ResultMatching.Results}&quot;\n</code></pre>\n<p>You have to change the EL for every occurrence of ResultMatching in all EL. Make sure that the bean is defined in viewScope in your task flow.</p>\n"}],"owner":{"account_id":10325130,"reputation":535,"user_id":7616822,"accept_rate":50,"display_name":"procra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71590491,"answer_count":1,"score":0,"last_activity_date":1648051864,"creation_date":1648040707,"question_id":71587753,"body_markdown":"I&#39;m working on an ADF fusion application with JDeveloper that runs on a Weblogic Server 12c.\r\n\r\nThe application contains a JSF page that has amongst others a fileInput, a table and a button. After the user uploads a file, it gets parsed and the results are shown in the table as intended. The next step for the user is to click on a button to save the parsed results to the DB (via backing bean).\r\n\r\nThese are the mentioned elements in the JSF-document:\r\n\r\n    &lt;af:inputFile label=&quot;file&quot; \r\n                  id=&quot;if1&quot;\r\n                  valueChangeListener=&quot;#{ResultMatching.valueChangeListener}&quot;\r\n                  binding=&quot;#{ResultMatching.bindingInputFileCSV}&quot;/&gt;\r\n\r\n    &lt;af:button text=&quot;upload&quot; \r\n               id=&quot;b1&quot;\r\n               action=&quot;#{ResultMatching.readFile}&quot;\r\n               binding=&quot;#{ResultMatching.bindingButtonReadFile}&quot;/&gt;    \r\n\r\n    &lt;af:table var=&quot;row&quot; \r\n              rowBandingInterval=&quot;0&quot; \r\n              id=&quot;t3&quot;\r\n              value=&quot;#{ResultMatching.Results}&quot;\r\n              binding=&quot;#{ResultMatching.bindingTableResults}&quot;\r\n              fetchSize=&quot;32&quot; \r\n              width=&quot;800&quot;                        \r\n              partialTriggers=&quot;::b1 ::b21&quot;&gt;\r\n        &lt;!--column definitions--&gt; \r\n    &lt;/af:table&gt;\r\n\r\n    &lt;af:button id=&quot;b21&quot;\r\n               text=&quot;save&quot;\r\n               action=&quot;#{ResultMatching.saveResults}&quot;/&gt;\r\n\r\nThese are the coherent methods in the backing bean `ResultMatching.java`:\r\n\r\n    private ArrayList&lt;Result&gt; Results= new ArrayList&lt;Result&gt;();\r\n    private RichTable bindingTableResults;\r\n\r\n    public void readFile() {\r\n                \r\n        Results.clear();\r\n                        \r\n        if (fileInputStream != null) {\r\n            for (HashMap&lt;String, String&gt; dataSet : FileHandler.parseCFFile(fileInputStream)) {          \r\n                Result r = new Result(&quot;values from the dataSet&quot;);\r\n                Results.add(r);\r\n            }\r\n            matchResults();\r\n        } else {\r\n            String msg = &quot;No file was selected for upload&quot;;\r\n            FacesContext.getCurrentInstance().addMessage(\r\n                null, new FacesMessage(FacesMessage.SEVERITY_INFO,msg, msg));\r\n        }\r\n    }\r\n\r\n    private void matchResults() {\r\n        \r\n        //very complicated matching logic\r\n\r\n        bindingTableResults.setValue(Results);\r\n        AdfFacesContextImpl.getCurrentInstance().addPartialTarget(bindingTableResults);\r\n        System.out.println(Results.size()); //prints the correct amount of results like in the file\r\n    }\r\n\r\n    public void saveResults() {\r\n        if (Results.isEmpty()) {\r\n            System.out.println(&quot;Results is empty!&quot;);\r\n            return;\r\n            //here is where I end up\r\n            //i did no other GUI interaction meanwhile\r\n            //neither has the getter nor setter of Results been called\r\n            //why is it suddenly empty? Where are my objects???\r\n        }\r\n        for(Result r : Results){\r\n            //as Results is empty this loop always gets skipped\r\n            //and so does the actual update statement\r\n        }\r\n    }\r\n\r\nThe bean is view-scoped. Any ideas where my results went? Thank you in advance!","title":"Java ArrayList becomes empty between two user interactions?","body":"<p>I'm working on an ADF fusion application with JDeveloper that runs on a Weblogic Server 12c.</p>\n<p>The application contains a JSF page that has amongst others a fileInput, a table and a button. After the user uploads a file, it gets parsed and the results are shown in the table as intended. The next step for the user is to click on a button to save the parsed results to the DB (via backing bean).</p>\n<p>These are the mentioned elements in the JSF-document:</p>\n<pre><code>&lt;af:inputFile label=&quot;file&quot; \n              id=&quot;if1&quot;\n              valueChangeListener=&quot;#{ResultMatching.valueChangeListener}&quot;\n              binding=&quot;#{ResultMatching.bindingInputFileCSV}&quot;/&gt;\n\n&lt;af:button text=&quot;upload&quot; \n           id=&quot;b1&quot;\n           action=&quot;#{ResultMatching.readFile}&quot;\n           binding=&quot;#{ResultMatching.bindingButtonReadFile}&quot;/&gt;    \n\n&lt;af:table var=&quot;row&quot; \n          rowBandingInterval=&quot;0&quot; \n          id=&quot;t3&quot;\n          value=&quot;#{ResultMatching.Results}&quot;\n          binding=&quot;#{ResultMatching.bindingTableResults}&quot;\n          fetchSize=&quot;32&quot; \n          width=&quot;800&quot;                        \n          partialTriggers=&quot;::b1 ::b21&quot;&gt;\n    &lt;!--column definitions--&gt; \n&lt;/af:table&gt;\n\n&lt;af:button id=&quot;b21&quot;\n           text=&quot;save&quot;\n           action=&quot;#{ResultMatching.saveResults}&quot;/&gt;\n</code></pre>\n<p>These are the coherent methods in the backing bean <code>ResultMatching.java</code>:</p>\n<pre><code>private ArrayList&lt;Result&gt; Results= new ArrayList&lt;Result&gt;();\nprivate RichTable bindingTableResults;\n\npublic void readFile() {\n            \n    Results.clear();\n                    \n    if (fileInputStream != null) {\n        for (HashMap&lt;String, String&gt; dataSet : FileHandler.parseCFFile(fileInputStream)) {          \n            Result r = new Result(&quot;values from the dataSet&quot;);\n            Results.add(r);\n        }\n        matchResults();\n    } else {\n        String msg = &quot;No file was selected for upload&quot;;\n        FacesContext.getCurrentInstance().addMessage(\n            null, new FacesMessage(FacesMessage.SEVERITY_INFO,msg, msg));\n    }\n}\n\nprivate void matchResults() {\n    \n    //very complicated matching logic\n\n    bindingTableResults.setValue(Results);\n    AdfFacesContextImpl.getCurrentInstance().addPartialTarget(bindingTableResults);\n    System.out.println(Results.size()); //prints the correct amount of results like in the file\n}\n\npublic void saveResults() {\n    if (Results.isEmpty()) {\n        System.out.println(&quot;Results is empty!&quot;);\n        return;\n        //here is where I end up\n        //i did no other GUI interaction meanwhile\n        //neither has the getter nor setter of Results been called\n        //why is it suddenly empty? Where are my objects???\n    }\n    for(Result r : Results){\n        //as Results is empty this loop always gets skipped\n        //and so does the actual update statement\n    }\n}\n</code></pre>\n<p>The bean is view-scoped. Any ideas where my results went? Thank you in advance!</p>\n"},{"tags":["java","concurrency","deadlock","reentrantlock"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1648049330,"post_id":71589854,"comment_id":126526823,"body_markdown":"Never compare the result of `compareTo` to anything other than 0. The only guarantees on its result are less than zero, zero, or greater than zero.","body":"Never compare the result of <code>compareTo</code> to anything other than 0. The only guarantees on its result are less than zero, zero, or greater than zero."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1648049393,"post_id":71589854,"comment_id":126526857,"body_markdown":"Also, your conditions are not complementary: `&lt;` is not the complement of `&gt;`.","body":"Also, your conditions are not complementary: <code>&lt;</code> is not the complement of <code>&gt;</code>."},{"owner":{"account_id":2185706,"reputation":473,"user_id":1934168,"accept_rate":16,"display_name":"Hilmi Yamcı"},"score":0,"creation_date":1648049439,"post_id":71589854,"comment_id":126526881,"body_markdown":"just saw it, it should be 0, my mistake,","body":"just saw it, it should be 0, my mistake,"},{"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":1,"creation_date":1648049492,"post_id":71589854,"comment_id":126526908,"body_markdown":"Also expression to determine firstLock is wrong. It compares t&#39;s ID to itself.","body":"Also expression to determine firstLock is wrong. It compares t&#39;s ID to itself."},{"owner":{"account_id":223457,"reputation":4755,"user_id":482682,"accept_rate":95,"display_name":"Lrrr"},"score":0,"creation_date":1648049589,"post_id":71589854,"comment_id":126526953,"body_markdown":"It is really a strange code, I don&#39;t think it works if you change `1` to `0`","body":"It is really a strange code, I don&#39;t think it works if you change <code>1</code> to <code>0</code>"},{"owner":{"account_id":223457,"reputation":4755,"user_id":482682,"accept_rate":95,"display_name":"Lrrr"},"score":0,"creation_date":1648049640,"post_id":71589854,"comment_id":126526972,"body_markdown":"where did you initialize `s` and `t`?","body":"where did you initialize <code>s</code> and <code>t</code>?"},{"owner":{"account_id":2185706,"reputation":473,"user_id":1934168,"accept_rate":16,"display_name":"Hilmi Yamcı"},"score":0,"creation_date":1648049682,"post_id":71589854,"comment_id":126526995,"body_markdown":"Suppose that it&#39;s coming for somewhere else, for simplicity I have added null.","body":"Suppose that it&#39;s coming for somewhere else, for simplicity I have added null."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1648049793,"post_id":71589854,"comment_id":126527044,"body_markdown":"@HilmiYamcı you could declare them as method parameters instead.","body":"@HilmiYamcı you could declare them as method parameters instead."},{"owner":{"account_id":2185706,"reputation":473,"user_id":1934168,"accept_rate":16,"display_name":"Hilmi Yamcı"},"score":0,"creation_date":1648049816,"post_id":71589854,"comment_id":126527058,"body_markdown":"do you have any suggestions for locking mechanism ? @AndyTurner","body":"do you have any suggestions for locking mechanism ? @AndyTurner"},{"owner":{"account_id":2185706,"reputation":473,"user_id":1934168,"accept_rate":16,"display_name":"Hilmi Yamcı"},"score":0,"creation_date":1648049833,"post_id":71589854,"comment_id":126527073,"body_markdown":"sorry I&#39;m correcting it right now @AndyTurner","body":"sorry I&#39;m correcting it right now @AndyTurner"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1648112139,"post_id":71589854,"comment_id":126543079,"body_markdown":"`wait()` only releases the lock of the object the method was invoked on. So it will wait while still holding the target’s lock. This can lead to a deadlock. But even when this doesn’t cause a deadlock, there’s the problem that you’re invoking `source.notifyAll()` where you actually need `target.notifyAll()`, as only transferring money *to* an account can raise it above zero (which is the condition other threads may be waiting for).","body":"<code>wait()</code> only releases the lock of the object the method was invoked on. So it will wait while still holding the target’s lock. This can lead to a deadlock. But even when this doesn’t cause a deadlock, there’s the problem that you’re invoking <code>source.notifyAll()</code> where you actually need <code>target.notifyAll()</code>, as only transferring money <i>to</i> an account can raise it above zero (which is the condition other threads may be waiting for)."}],"owner":{"account_id":2185706,"reputation":473,"user_id":1934168,"accept_rate":16,"display_name":"Hilmi Yamcı"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1648051498,"creation_date":1648049230,"question_id":71589854,"body_markdown":"I need to implement some basic money transfer logic between accounts.\r\nFor the transfer being consistent, I take advantage of syncronization lock.\r\n\r\nThis is Account object:\r\n```\r\nclass Account {\r\n\tUUID id;\r\n\tdouble balance;\r\n}\r\n```\r\n\r\nThis is inside transfer worker class:\r\n\r\n```\r\n\tpublic void transfer(Account source, Account target) throws InterruptedException {\r\n\t\tObject firstLock = target.id.compareTo(source.id)  &gt; 0 ? target : source;\r\n\t\tObject secondLock = target.id.compareTo(source.id)  &lt; 0 ? target : source;\r\n\t\tsynchronized (firstLock) {\r\n\t\t\tsynchronized (secondLock) {\r\n\t\t\t\t// Money tranfer logic\r\n\t\t\t}\t\r\n\t\t}\r\n\t}\r\n```\r\n\r\nMy question is if source accunt doesn&#39;t have enough funds I&#39;m planning to wait that thread until it got funds from other operations. For this one I have waited() for source account. But it ended up with deadlock because target account locks is still on my threds. how can I achive that one ? Can you show me proper way to accomplish this problem ?\r\n\r\nThis is what I&#39;m trying to postpone money transfer for source accounts which doesn&#39;t have \r\n```\t\t\r\n\tpublic void transfer(Account source, Account target) throws InterruptedException {\r\n\t\tObject firstLock = target.id.compareTo(source.id)  &gt; 0 ? target : source;\r\n\t\tObject secondLock = target.id.compareTo(source.id)  &lt; 0 ? target : source;\r\n\t\tsynchronized (firstLock) {\r\n\t\t\tsynchronized (secondLock) {\r\n\t\t\t\twhile(source.balance &lt;= 0 ) {\r\n\t\t\t\t\tsource.wait();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Money tranfer logic\r\n\t\t\t\t\r\n\t\t\t\tsource.notifyAll();\r\n\t\t\t}\t\r\n\t\t}\r\n\t}\r\n```\r\n\r\nThanks.","title":"Java Syncronization on two objects results in dead lock","body":"<p>I need to implement some basic money transfer logic between accounts.\nFor the transfer being consistent, I take advantage of syncronization lock.</p>\n<p>This is Account object:</p>\n<pre><code>class Account {\n    UUID id;\n    double balance;\n}\n</code></pre>\n<p>This is inside transfer worker class:</p>\n<pre><code>    public void transfer(Account source, Account target) throws InterruptedException {\n        Object firstLock = target.id.compareTo(source.id)  &gt; 0 ? target : source;\n        Object secondLock = target.id.compareTo(source.id)  &lt; 0 ? target : source;\n        synchronized (firstLock) {\n            synchronized (secondLock) {\n                // Money tranfer logic\n            }   \n        }\n    }\n</code></pre>\n<p>My question is if source accunt doesn't have enough funds I'm planning to wait that thread until it got funds from other operations. For this one I have waited() for source account. But it ended up with deadlock because target account locks is still on my threds. how can I achive that one ? Can you show me proper way to accomplish this problem ?</p>\n<p>This is what I'm trying to postpone money transfer for source accounts which doesn't have</p>\n<pre><code>    public void transfer(Account source, Account target) throws InterruptedException {\n        Object firstLock = target.id.compareTo(source.id)  &gt; 0 ? target : source;\n        Object secondLock = target.id.compareTo(source.id)  &lt; 0 ? target : source;\n        synchronized (firstLock) {\n            synchronized (secondLock) {\n                while(source.balance &lt;= 0 ) {\n                    source.wait();\n                }\n                \n                // Money tranfer logic\n                \n                source.notifyAll();\n            }   \n        }\n    }\n</code></pre>\n<p>Thanks.</p>\n"},{"tags":["java","kotlin","events","project-reactor"],"comments":[{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":1,"creation_date":1647877182,"post_id":71560144,"comment_id":126475799,"body_markdown":"is `.orElse` called on an `Optional`? If yes you could use `.orElseGet { logger.log(&quot;whatever&quot;); Mono.emplt() }`","body":"is <code>.orElse</code> called on an <code>Optional</code>? If yes you could use <code>.orElseGet { logger.log(&quot;whatever&quot;); Mono.emplt() }</code>"},{"owner":{"account_id":15974771,"reputation":1023,"user_id":11527968,"display_name":"Jimmy"},"score":0,"creation_date":1647879155,"post_id":71560144,"comment_id":126476607,"body_markdown":"Thanks @Lino for your quick response. Will try in this way.","body":"Thanks @Lino for your quick response. Will try in this way."}],"answers":[{"tags":[],"owner":{"account_id":23110408,"reputation":6937,"user_id":17218429,"display_name":"lukas.j"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1647886916,"creation_date":1647877782,"answer_id":71560385,"question_id":71560144,"body_markdown":"Since _map {...}_ always returns a List, you could use _.ifEmpty()_.\r\n\r\nThis would be the case for a non-empty list:\r\n\r\n    val list = listOf(&quot;a&quot;, &quot;b&quot;)\r\n    \r\n    val result = list\r\n      .map { it }\r\n      .ifEmpty { \r\n        println(&quot;empty&quot;)   // will be skipped\r\n        emptyList()        // will be skipped\r\n      }\r\n    \r\n    println(result)   // Output: [a, b]\r\n\r\nAnd if the list is empty the same code would produce this:\r\n\r\n    val list = emptyList&lt;String&gt;()\r\n    \r\n    val result = list\r\n      .map { it }\r\n      .ifEmpty { \r\n        println(&quot;empty&quot;)   // Output: empty\r\n        emptyList() \r\n      }\r\n    \r\n    println(result)   // Output: []\r\n\r\n","title":"How can we place a logger statement inside an orElse() block?","body":"<p>Since <em>map {...}</em> always returns a List, you could use <em>.ifEmpty()</em>.</p>\n<p>This would be the case for a non-empty list:</p>\n<pre><code>val list = listOf(&quot;a&quot;, &quot;b&quot;)\n\nval result = list\n  .map { it }\n  .ifEmpty { \n    println(&quot;empty&quot;)   // will be skipped\n    emptyList()        // will be skipped\n  }\n\nprintln(result)   // Output: [a, b]\n</code></pre>\n<p>And if the list is empty the same code would produce this:</p>\n<pre><code>val list = emptyList&lt;String&gt;()\n\nval result = list\n  .map { it }\n  .ifEmpty { \n    println(&quot;empty&quot;)   // Output: empty\n    emptyList() \n  }\n\nprintln(result)   // Output: []\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20928711,"reputation":3225,"user_id":15375588,"display_name":"Karsten Gabriel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647982229,"creation_date":1647977091,"answer_id":71577848,"question_id":71560144,"body_markdown":"You can use `Mono.defer` to log and create the empty `Mono`:\r\n```\r\n...orElse(Mono.defer{ \r\n   /* log here */\r\n   Mono.empty()\r\n})\r\n```\r\nOr, if it is okay that the logging is evaluated at the time of the `orElse` statement, you could just use `also`:\r\n```\r\n...orElse(Mono.empty().also { /* log here */ })\r\n```\r\nMoreover, if it is `Optional.orElse` you are using, you could just switch to `orElseGet`: \r\n```\r\n...orElseGet { \r\n   /* log here */\r\n   Mono.empty()\r\n}\r\n```","title":"How can we place a logger statement inside an orElse() block?","body":"<p>You can use <code>Mono.defer</code> to log and create the empty <code>Mono</code>:</p>\n<pre><code>...orElse(Mono.defer{ \n   /* log here */\n   Mono.empty()\n})\n</code></pre>\n<p>Or, if it is okay that the logging is evaluated at the time of the <code>orElse</code> statement, you could just use <code>also</code>:</p>\n<pre><code>...orElse(Mono.empty().also { /* log here */ })\n</code></pre>\n<p>Moreover, if it is <code>Optional.orElse</code> you are using, you could just switch to <code>orElseGet</code>:</p>\n<pre><code>...orElseGet { \n   /* log here */\n   Mono.empty()\n}\n</code></pre>\n"}],"owner":{"account_id":15974771,"reputation":1023,"user_id":11527968,"display_name":"Jimmy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":195,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1648051247,"creation_date":1647876726,"question_id":71560144,"body_markdown":"I have the following function that returns a `Mono`.\r\n```\r\n    fun performEvent(type: String, event: MyEvent, relId: UUID): Mono&lt;MyBaseEvent&gt;{\r\n        return processorById.getOrDefault(type,null)!!.handleTask(event,relId)\r\n           .map{\r\n              kTamplate.send(getResultMessage(it))\r\n              Mono.just(it)\r\n            }.orElse(Mono.empty())  // a logger is required for orElse case\r\n        \r\n    }\r\n```\r\nIs there a way to add a logging statement inside the `orElse` at the end? \r\n","title":"How can we place a logger statement inside an orElse() block?","body":"<p>I have the following function that returns a <code>Mono</code>.</p>\n<pre><code>    fun performEvent(type: String, event: MyEvent, relId: UUID): Mono&lt;MyBaseEvent&gt;{\n        return processorById.getOrDefault(type,null)!!.handleTask(event,relId)\n           .map{\n              kTamplate.send(getResultMessage(it))\n              Mono.just(it)\n            }.orElse(Mono.empty())  // a logger is required for orElse case\n        \n    }\n</code></pre>\n<p>Is there a way to add a logging statement inside the <code>orElse</code> at the end?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1647840799,"post_id":71553167,"comment_id":126463370,"body_markdown":"What do you intend `args[]` to mean?","body":"What do you intend <code>args[]</code> to mean?"},{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":0,"creation_date":1647840915,"post_id":71553167,"comment_id":126463395,"body_markdown":"`args[]` is a valid variable name. `args` is an String array. I would advise you to learn variables and arrays in java.","body":"<code>args[]</code> is a valid variable name. <code>args</code> is an String array. I would advise you to learn variables and arrays in java."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1647841080,"post_id":71553167,"comment_id":126463419,"body_markdown":"An array is not an integer value which is what `parseInt` method expects. But, even if you do something like `args[0]` you probably didn&#39;t even pass any command-line arguments when you ran the class. SO, you will end up with another error.","body":"An array is not an integer value which is what <code>parseInt</code> method expects. But, even if you do something like <code>args[0]</code> you probably didn&#39;t even pass any command-line arguments when you ran the class. SO, you will end up with another error."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1647846251,"post_id":71553167,"comment_id":126464346,"body_markdown":"@KarthikeyanVaithilingam: No, `args[]` isn&#39;t a valid variable name. `args` is a valid variable name, which is permitted to be declared in a declaration such as `String args []`... the name is still `args` though.","body":"@KarthikeyanVaithilingam: No, <code>args[]</code> isn&#39;t a valid variable name. <code>args</code> is a valid variable name, which is permitted to be declared in a declaration such as <code>String args []</code>... the name is still <code>args</code> though."},{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":1,"creation_date":1647847481,"post_id":71553167,"comment_id":126464652,"body_markdown":"@JonSkeet yes it was not i missed a &quot;not&quot; i meant &quot;not valid&quot;","body":"@JonSkeet yes it was not i missed a &quot;not&quot; i meant &quot;not valid&quot;"}],"answers":[{"tags":[],"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647842372,"creation_date":1647842047,"answer_id":71553308,"question_id":71553167,"body_markdown":"In order to use `args[]`, you need to pass a command-line argument when you run the class. For example, if you are running from command prompt, you will need to do something like this:\r\n```\r\njava CommandLine 100\r\n```\r\nIn your code, you could do something like this\r\n```\r\nclass CommandLine {\r\n    public static void main (String args[]) {\r\n        int num = Integer.parseInt (args[0]) ;\r\n        if (num&gt;=100)\r\n        { \r\n            System.out.println(&quot;You entered &quot;);\r\n        } else {\r\n            System.out.println(&quot;Number is less than 100&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nWhich will result in displaying `You entered 100` on the console. If you are running from an IDE like Eclipse, you will need to set up the command-line argument through the &quot;*Run Configurations*&quot; menu. Then, you enter (space-separated) arguments in the &quot;*Program arguments*&quot; text area.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nIn IntelliJ, you do the same through the &quot;*Modify run configuration*&quot; menu\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe argument array `args[]` in a class&#39; main method is built by the JVM. It is a string of command-line arguments that are passed to the executed class.  The JVM parses out the command line instruction and will gather any and all values after the class name and will create that `args` array. If you pass nothing to the program, then the array will be empty.\r\n\r\nAn command-line instruction like \r\n```\r\njava MyClass Hello World Welcome to Java\r\n```\r\nbuilds a `String` array with 5 values.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0Q4u5.png\r\n  [2]: https://i.stack.imgur.com/5bK8Q.png","title":".class expected (Newbie on java)","body":"<p>In order to use <code>args[]</code>, you need to pass a command-line argument when you run the class. For example, if you are running from command prompt, you will need to do something like this:</p>\n<pre><code>java CommandLine 100\n</code></pre>\n<p>In your code, you could do something like this</p>\n<pre><code>class CommandLine {\n    public static void main (String args[]) {\n        int num = Integer.parseInt (args[0]) ;\n        if (num&gt;=100)\n        { \n            System.out.println(&quot;You entered &quot;);\n        } else {\n            System.out.println(&quot;Number is less than 100&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Which will result in displaying <code>You entered 100</code> on the console. If you are running from an IDE like Eclipse, you will need to set up the command-line argument through the &quot;<em>Run Configurations</em>&quot; menu. Then, you enter (space-separated) arguments in the &quot;<em>Program arguments</em>&quot; text area.</p>\n<p><a href=\"https://i.stack.imgur.com/5bK8Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5bK8Q.png\" alt=\"enter image description here\" /></a></p>\n<p>In IntelliJ, you do the same through the &quot;<em>Modify run configuration</em>&quot; menu</p>\n<p><a href=\"https://i.stack.imgur.com/0Q4u5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0Q4u5.png\" alt=\"enter image description here\" /></a></p>\n<p>The argument array <code>args[]</code> in a class' main method is built by the JVM. It is a string of command-line arguments that are passed to the executed class.  The JVM parses out the command line instruction and will gather any and all values after the class name and will create that <code>args</code> array. If you pass nothing to the program, then the array will be empty.</p>\n<p>An command-line instruction like</p>\n<pre><code>java MyClass Hello World Welcome to Java\n</code></pre>\n<p>builds a <code>String</code> array with 5 values.</p>\n"}],"owner":{"account_id":23057335,"reputation":1,"user_id":17173200,"display_name":"Megat Irfan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1647843993,"answer_count":1,"score":-1,"last_activity_date":1648051037,"creation_date":1647840674,"question_id":71553167,"body_markdown":"\r\nI don&#39;t know why this cannot run, the error on &quot;num = Integer.parseInt (args[]) ;&quot;\r\n\r\n\r\n```\r\nclass CommandLine {\r\n    public static void main (String args [])\r\n    {\r\n        int num ;\r\n        num = Integer.parseInt (args[]) ;\r\n        if (num&gt;=100)\r\n        { \r\n        } else {\r\n            System.out.println(&quot;Number is less than 100&quot;);\r\n        }\r\n    }\r\n}\r\n```","title":".class expected (Newbie on java)","body":"<p>I don't know why this cannot run, the error on &quot;num = Integer.parseInt (args[]) ;&quot;</p>\n<pre><code>class CommandLine {\n    public static void main (String args [])\n    {\n        int num ;\n        num = Integer.parseInt (args[]) ;\n        if (num&gt;=100)\n        { \n        } else {\n            System.out.println(&quot;Number is less than 100&quot;);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-data-mongodb"],"answers":[{"tags":[],"owner":{"account_id":5043640,"reputation":788,"user_id":4050313,"display_name":"Jayesh Choudhary"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648050989,"creation_date":1648050989,"answer_id":71590299,"question_id":71589825,"body_markdown":"just by declaring Mockbean for UserRepository in this line:\r\n\r\n    @MockBean\r\n    private UserRepository userRepository;\r\n\r\nIt won&#39;t work. You need to add following piece of code before `mockMvc.perform()`.\r\n\r\n    Mockito.when(userRepository.findUserByEmail(Mockito.anyString)).thenReturn(new User());\r\n\r\nThis will mock the **findUserByEmail** method and it will not return null.\r\n","title":"@WithUserDetails failing because username not found","body":"<p>just by declaring Mockbean for UserRepository in this line:</p>\n<pre><code>@MockBean\nprivate UserRepository userRepository;\n</code></pre>\n<p>It won't work. You need to add following piece of code before <code>mockMvc.perform()</code>.</p>\n<pre><code>Mockito.when(userRepository.findUserByEmail(Mockito.anyString)).thenReturn(new User());\n</code></pre>\n<p>This will mock the <strong>findUserByEmail</strong> method and it will not return null.</p>\n"}],"owner":{"account_id":3066334,"reputation":103,"user_id":2597935,"display_name":"Leighton"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":741,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71590299,"answer_count":1,"score":0,"last_activity_date":1648050989,"creation_date":1648049088,"question_id":71589825,"body_markdown":"I am trying to make a test for my `AuthController.java` but it keeps failing saying that the username is not found. I have narrowed this problem down to the line in `UserService.java` that checks if `foundUser == null`.\r\n\r\nHere is my `AuthControllerTests.java`\r\n```\r\npackage dev.tdwl.controller;\r\n\r\nimport dev.tdwl.repository.CategoryListsRepository;\r\nimport dev.tdwl.repository.UserRepository;\r\nimport dev.tdwl.security.jwt.JwtUtils;\r\nimport dev.tdwl.services.UserService;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.boot.test.mock.mockito.MockBean;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.test.context.support.WithUserDetails;\r\nimport org.springframework.test.web.servlet.MockMvc;\r\n\r\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;\r\nimport static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;\r\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\r\n\r\n@SpringBootTest(classes = {AuthController.class, UserService.class})\r\n@AutoConfigureMockMvc\r\npublic class AuthControllerTests {\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @MockBean\r\n    private PasswordEncoder encoder;\r\n\r\n    @MockBean\r\n    private JwtUtils jwtUtils;\r\n\r\n    @MockBean\r\n    private AuthenticationManager authenticationManager;\r\n\r\n    @MockBean\r\n    private CategoryListsRepository categoryRepo;\r\n\r\n    @MockBean\r\n    private UserRepository userRepository;\r\n\r\n    @Test\r\n    @WithUserDetails(value = &quot;testuser&quot;, userDetailsServiceBeanName = &quot;userService&quot;)\r\n    void testAuthenticationCheckValid() {\r\n        try {\r\n            mockMvc.perform(get(&quot;/auth/check&quot;)).andExpect(status().isOk()).andDo(print());\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd my `AuthController.java`\r\n```\r\npackage dev.tdwl.controller;\r\n\r\n\r\nimport com.mongodb.MongoException;\r\nimport dev.tdwl.model.AuthenticationRequest;\r\nimport dev.tdwl.model.CategoryLists;\r\nimport dev.tdwl.model.JwtResponse;\r\nimport dev.tdwl.model.User;\r\nimport dev.tdwl.repository.CategoryListsRepository;\r\nimport dev.tdwl.repository.UserRepository;\r\nimport dev.tdwl.security.jwt.JwtUtils;\r\nimport dev.tdwl.services.UserDetailsImpl;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.dao.DuplicateKeyException;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.Authentication;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport java.util.Collections;\r\n\r\n@RestController\r\npublic class AuthController {\r\n\r\n    private CategoryListsRepository categoryRepo;\r\n    private UserRepository userRepo;\r\n    private AuthenticationManager authenticationManager;\r\n    private PasswordEncoder encoder;\r\n    private JwtUtils jwtUtils;\r\n\r\n    @Autowired\r\n    public AuthController(UserRepository repository, AuthenticationManager authenticationManager, PasswordEncoder encoder, JwtUtils jwtUtils, CategoryListsRepository categoryRepo) {\r\n        this.authenticationManager = authenticationManager;\r\n        this.userRepo = repository;\r\n        this.encoder = encoder;\r\n        this.jwtUtils = jwtUtils;\r\n        this.categoryRepo = categoryRepo;\r\n    }\r\n\r\n    @GetMapping(&quot;/auth/check&quot;)\r\n    public ResponseEntity&lt;?&gt; verifyLogin() {\r\n        UserDetailsImpl userDetails = (UserDetailsImpl) SecurityContextHolder.getContext().getAuthentication().getPrincipal();\r\n\r\n        if (userDetails.getId() == null) {\r\n            return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();\r\n        }\r\n\r\n        return ResponseEntity.ok(userDetails);\r\n    }\r\n\r\n    @PostMapping(&quot;/auth/login&quot;)\r\n    public ResponseEntity&lt;?&gt; login(@RequestBody AuthenticationRequest authenticationRequest) {\r\n        Authentication authentication = authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(authenticationRequest.getEmail(), authenticationRequest.getPassword()));\r\n        SecurityContextHolder.getContext().setAuthentication(authentication);\r\n        String jwt = jwtUtils.generateJwtToken(authentication);\r\n\r\n        UserDetailsImpl user = (UserDetailsImpl) authentication.getPrincipal();\r\n        return ResponseEntity.ok(new JwtResponse(jwt, user.getUsername(), user.getId()));\r\n    }\r\n\r\n    @PostMapping(&quot;/auth/signup&quot;)\r\n    public ResponseEntity&lt;?&gt; authenticateClient(@RequestBody AuthenticationRequest authenticationRequest) {\r\n        String email = authenticationRequest.getEmail();\r\n        String password = authenticationRequest.getPassword();\r\n\r\n        User newUser = new User(email, encoder.encode(password));\r\n\r\n        try {\r\n            userRepo.save(newUser);\r\n            CategoryLists newList = new CategoryLists(newUser.getId(), Collections.emptyList());\r\n            categoryRepo.save(newList);\r\n        } catch (DuplicateKeyException | MongoException e) {\r\n            return ResponseEntity.status(HttpStatus.CONFLICT).build();\r\n        }\r\n\r\n        return ResponseEntity.ok(&quot;User registered successfully!&quot;);\r\n    }\r\n}\r\n\r\n```\r\n\r\nand my `UserService.java`\r\n```\r\npackage dev.tdwl.services;\r\n\r\nimport dev.tdwl.model.User;\r\nimport dev.tdwl.repository.UserRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\npublic class UserService implements UserDetailsService {\r\n\r\n    private final UserRepository userRepository;\r\n\r\n    @Autowired\r\n    public UserService(UserRepository userRepository) {\r\n        this.userRepository = userRepository;\r\n    }\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        User foundUser = userRepository.findUserByEmail(username);\r\n        if (foundUser == null) throw new UsernameNotFoundException(&quot;User not found.&quot;);\r\n\r\n        return UserDetailsImpl.build(foundUser);\r\n    }\r\n}\r\n```\r\n\r\nThe line this is failing on is in `UserService.java` where it tries to findUserByEmail, because userRepository is mocked it just returns null and throws the username not found exception. If I remove the Mock, then my test fails because it couldn&#39;t find the UserRepository bean required for the constructor in `AuthController`\r\n\r\nAny ideas on how to do this correctly?\r\n\r\n","title":"@WithUserDetails failing because username not found","body":"<p>I am trying to make a test for my <code>AuthController.java</code> but it keeps failing saying that the username is not found. I have narrowed this problem down to the line in <code>UserService.java</code> that checks if <code>foundUser == null</code>.</p>\n<p>Here is my <code>AuthControllerTests.java</code></p>\n<pre><code>package dev.tdwl.controller;\n\nimport dev.tdwl.repository.CategoryListsRepository;\nimport dev.tdwl.repository.UserRepository;\nimport dev.tdwl.security.jwt.JwtUtils;\nimport dev.tdwl.services.UserService;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.test.context.support.WithUserDetails;\nimport org.springframework.test.web.servlet.MockMvc;\n\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;\nimport static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\n\n@SpringBootTest(classes = {AuthController.class, UserService.class})\n@AutoConfigureMockMvc\npublic class AuthControllerTests {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @MockBean\n    private PasswordEncoder encoder;\n\n    @MockBean\n    private JwtUtils jwtUtils;\n\n    @MockBean\n    private AuthenticationManager authenticationManager;\n\n    @MockBean\n    private CategoryListsRepository categoryRepo;\n\n    @MockBean\n    private UserRepository userRepository;\n\n    @Test\n    @WithUserDetails(value = &quot;testuser&quot;, userDetailsServiceBeanName = &quot;userService&quot;)\n    void testAuthenticationCheckValid() {\n        try {\n            mockMvc.perform(get(&quot;/auth/check&quot;)).andExpect(status().isOk()).andDo(print());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>And my <code>AuthController.java</code></p>\n<pre><code>package dev.tdwl.controller;\n\n\nimport com.mongodb.MongoException;\nimport dev.tdwl.model.AuthenticationRequest;\nimport dev.tdwl.model.CategoryLists;\nimport dev.tdwl.model.JwtResponse;\nimport dev.tdwl.model.User;\nimport dev.tdwl.repository.CategoryListsRepository;\nimport dev.tdwl.repository.UserRepository;\nimport dev.tdwl.security.jwt.JwtUtils;\nimport dev.tdwl.services.UserDetailsImpl;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.dao.DuplicateKeyException;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.Collections;\n\n@RestController\npublic class AuthController {\n\n    private CategoryListsRepository categoryRepo;\n    private UserRepository userRepo;\n    private AuthenticationManager authenticationManager;\n    private PasswordEncoder encoder;\n    private JwtUtils jwtUtils;\n\n    @Autowired\n    public AuthController(UserRepository repository, AuthenticationManager authenticationManager, PasswordEncoder encoder, JwtUtils jwtUtils, CategoryListsRepository categoryRepo) {\n        this.authenticationManager = authenticationManager;\n        this.userRepo = repository;\n        this.encoder = encoder;\n        this.jwtUtils = jwtUtils;\n        this.categoryRepo = categoryRepo;\n    }\n\n    @GetMapping(&quot;/auth/check&quot;)\n    public ResponseEntity&lt;?&gt; verifyLogin() {\n        UserDetailsImpl userDetails = (UserDetailsImpl) SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n\n        if (userDetails.getId() == null) {\n            return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();\n        }\n\n        return ResponseEntity.ok(userDetails);\n    }\n\n    @PostMapping(&quot;/auth/login&quot;)\n    public ResponseEntity&lt;?&gt; login(@RequestBody AuthenticationRequest authenticationRequest) {\n        Authentication authentication = authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(authenticationRequest.getEmail(), authenticationRequest.getPassword()));\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n        String jwt = jwtUtils.generateJwtToken(authentication);\n\n        UserDetailsImpl user = (UserDetailsImpl) authentication.getPrincipal();\n        return ResponseEntity.ok(new JwtResponse(jwt, user.getUsername(), user.getId()));\n    }\n\n    @PostMapping(&quot;/auth/signup&quot;)\n    public ResponseEntity&lt;?&gt; authenticateClient(@RequestBody AuthenticationRequest authenticationRequest) {\n        String email = authenticationRequest.getEmail();\n        String password = authenticationRequest.getPassword();\n\n        User newUser = new User(email, encoder.encode(password));\n\n        try {\n            userRepo.save(newUser);\n            CategoryLists newList = new CategoryLists(newUser.getId(), Collections.emptyList());\n            categoryRepo.save(newList);\n        } catch (DuplicateKeyException | MongoException e) {\n            return ResponseEntity.status(HttpStatus.CONFLICT).build();\n        }\n\n        return ResponseEntity.ok(&quot;User registered successfully!&quot;);\n    }\n}\n\n</code></pre>\n<p>and my <code>UserService.java</code></p>\n<pre><code>package dev.tdwl.services;\n\nimport dev.tdwl.model.User;\nimport dev.tdwl.repository.UserRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class UserService implements UserDetailsService {\n\n    private final UserRepository userRepository;\n\n    @Autowired\n    public UserService(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        User foundUser = userRepository.findUserByEmail(username);\n        if (foundUser == null) throw new UsernameNotFoundException(&quot;User not found.&quot;);\n\n        return UserDetailsImpl.build(foundUser);\n    }\n}\n</code></pre>\n<p>The line this is failing on is in <code>UserService.java</code> where it tries to findUserByEmail, because userRepository is mocked it just returns null and throws the username not found exception. If I remove the Mock, then my test fails because it couldn't find the UserRepository bean required for the constructor in <code>AuthController</code></p>\n<p>Any ideas on how to do this correctly?</p>\n"},{"tags":["java","google-my-business-api","google-my-business"],"comments":[{"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"score":0,"creation_date":1648047995,"post_id":71589547,"comment_id":126526200,"body_markdown":"the error detail: {\n  &quot;code&quot; : 400,\n  &quot;details&quot; : [ {\n    &quot;@type&quot; : &quot;type.googleapis.com/google.rpc.BadRequest&quot;\n  } ],\n  &quot;errors&quot; : [ {\n    &quot;domain&quot; : &quot;global&quot;,\n    &quot;message&quot; : &quot;Request contains an invalid argument.&quot;,\n    &quot;reason&quot; : &quot;badRequest&quot;\n  } ],\n  &quot;message&quot; : &quot;Request contains an invalid argument.&quot;,\n  &quot;status&quot; : &quot;INVALID_ARGUMENT&quot;\n}","body":"the error detail: {   &quot;code&quot; : 400,   &quot;details&quot; : [ {     &quot;@type&quot; : &quot;type.googleapis.com/google.rpc.BadRequest&quot;   } ],   &quot;errors&quot; : [ {     &quot;domain&quot; : &quot;global&quot;,     &quot;message&quot; : &quot;Request contains an invalid argument.&quot;,     &quot;reason&quot; : &quot;badRequest&quot;   } ],   &quot;message&quot; : &quot;Request contains an invalid argument.&quot;,   &quot;status&quot; : &quot;INVALID_ARGUMENT&quot; }"},{"owner":{"account_id":3238786,"reputation":1473,"user_id":3062971,"accept_rate":86,"display_name":"vpgcloud"},"score":0,"creation_date":1648049592,"post_id":71589547,"comment_id":126526954,"body_markdown":"Could you try issuing the request via the OAuth playground (https://developers.google.com/my-business/content/basic-setup#make-simple-http-request)? The Java client libary currently does not offer the detailed error information that the API would actually return.","body":"Could you try issuing the request via the OAuth playground (<a href=\"https://developers.google.com/my-business/content/basic-setup#make-simple-http-request\" rel=\"nofollow noreferrer\">developers.google.com/my-business/content/&hellip;</a>)? The Java client libary currently does not offer the detailed error information that the API would actually return."},{"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"score":0,"creation_date":1648050277,"post_id":71589547,"comment_id":126527313,"body_markdown":"@vpriesner thanks a million , the error is &quot;fieldViolations&quot;: [\n          {\n            &quot;field&quot;: &quot;read_mask&quot;, \n            &quot;description&quot;: &quot;Field is required&quot;\n          } but what are all possible read_mask?","body":"@vpriesner thanks a million , the error is &quot;fieldViolations&quot;: [           {             &quot;field&quot;: &quot;read_mask&quot;,              &quot;description&quot;: &quot;Field is required&quot;           } but what are all possible read_mask?"},{"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"score":0,"creation_date":1648050498,"post_id":71589547,"comment_id":126527410,"body_markdown":"Ok I understood,  just like locations list. \t\t\t\t\t\tString readMask=&quot;storeCode,regularHours,name,languageCode,title,phoneNumbers,categories,storefrontAddress,websiteUri,regularHours,specialHours,serviceArea,labels,adWordsLocationExtensions,latlng,openInfo,metadata,profile,relationshipData,moreHours&quot;;","body":"Ok I understood,  just like locations list. \t\t\t\t\t\tString readMask=&quot;storeCode,regularHours,name,languageCode,title,pho&zwnj;&#8203;neNumbers,categories&zwnj;&#8203;,storefrontAddress,w&zwnj;&#8203;ebsiteUri,regularHou&zwnj;&#8203;rs,specialHours,serv&zwnj;&#8203;iceArea,labels,adWor&zwnj;&#8203;dsLocationExtensions&zwnj;&#8203;,latlng,openInfo,met&zwnj;&#8203;adata,profile,relati&zwnj;&#8203;onshipData,moreHours&zwnj;&#8203;&quot;;"}],"answers":[{"tags":[],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648050705,"creation_date":1648050705,"answer_id":71590237,"question_id":71589547,"body_markdown":"Thanks to @Vprienser I found out the read_mask is obligatory.\r\n ```\r\nString readMask=&quot;storeCode,regularHours,name,languageCode,title,phoneNumbers,categories,storefrontAddress,websiteUri,regularHours,specialHours,serviceArea,labels,adWordsLocationExtensions,latlng,openInfo,metadata,profile,relationshipData,moreHours&quot;;\r\n\r\n    try { \r\n         MyBusinessBusinessInformation.Locations.GetGoogleUpdated updateList=mybusiness.locations()\r\n    \t\t\t\t\t\t\t\t.getGoogleUpdated(locationName).setReadMask(readMask);\r\n    \t\t\t\t\t\t\t \r\n          GoogleUpdatedLocation response = updateList.execute();\r\n    \t\t\t\t\t\t\r\n    \t if(response!=null &amp;&amp; !response.isEmpty()) {\r\n    \t\t\tSystem.out.println(response.toString());\r\n    \t\t}\r\n    }catch (Exceptions e){\r\n     System.out.println(e);\r\n    }","title":"how to get google-updated version of the specified location in mybusinessbusinessinformation.googleapis using java","body":"<p>Thanks to @Vprienser I found out the read_mask is obligatory.</p>\n<pre><code>String readMask=&quot;storeCode,regularHours,name,languageCode,title,phoneNumbers,categories,storefrontAddress,websiteUri,regularHours,specialHours,serviceArea,labels,adWordsLocationExtensions,latlng,openInfo,metadata,profile,relationshipData,moreHours&quot;;\n\n   try { \n        MyBusinessBusinessInformation.Locations.GetGoogleUpdated updateList=mybusiness.locations()\n                                   .getGoogleUpdated(locationName).setReadMask(readMask);\n                                \n         GoogleUpdatedLocation response = updateList.execute();\n                           \n        if(response!=null &amp;&amp; !response.isEmpty()) {\n               System.out.println(response.toString());\n           }\n   }catch (Exceptions e){\n    System.out.println(e);\n   }\n</code></pre>\n"}],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":515,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71590237,"answer_count":1,"score":0,"last_activity_date":1648050705,"creation_date":1648047946,"question_id":71589547,"body_markdown":"Suppose mybusiness is an initializer of type MyBusinessBusinessInformation which also takes care of credentials, and locationName is a String which refers to the specific location and its format is locations/XXXXXXX.\r\n  [ I am using this link][1]\r\n\r\n ``` \r\n    try {\r\n\r\n          MyBusinessBusinessInformation.Locations.GetGoogleUpdated updateList=mybusiness.locations().getGoogleUpdated(locationName);\t\t\t\t\t \r\n            GoogleUpdatedLocation response = updateList.execute();\r\n           if(response!=null &amp;&amp; !response.isEmpty()) {\r\n    \t\t\t\t\t\t\tSystem.out.println(response.toString());\r\n    \t\t\t\t\t\t}\r\n    }catch(Exception e){\r\n      System.out.println(e);\r\n    }\r\n``` \r\nThe error is\r\n&gt; com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request\r\n\r\n\r\nThank you in advance.\t\t\t\t\t\t\r\n\r\n\r\n  [1]: https://developers.google.com/my-business/reference/businessinformation/rest/v1/locations/getGoogleUpdated","title":"how to get google-updated version of the specified location in mybusinessbusinessinformation.googleapis using java","body":"<p>Suppose mybusiness is an initializer of type MyBusinessBusinessInformation which also takes care of credentials, and locationName is a String which refers to the specific location and its format is locations/XXXXXXX.\n<a href=\"https://developers.google.com/my-business/reference/businessinformation/rest/v1/locations/getGoogleUpdated\" rel=\"nofollow noreferrer\"> I am using this link</a></p>\n<pre><code>   try {\n\n         MyBusinessBusinessInformation.Locations.GetGoogleUpdated updateList=mybusiness.locations().getGoogleUpdated(locationName);                     \n           GoogleUpdatedLocation response = updateList.execute();\n          if(response!=null &amp;&amp; !response.isEmpty()) {\n                               System.out.println(response.toString());\n                           }\n   }catch(Exception e){\n     System.out.println(e);\n   }\n</code></pre>\n<p>The error is</p>\n<blockquote>\n<p>com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request</p>\n</blockquote>\n<p>Thank you in advance.</p>\n"},{"tags":["java","class","methods"],"answers":[{"tags":[],"owner":{"account_id":14893279,"reputation":372,"user_id":10754328,"display_name":"Mario Khoury"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648050693,"creation_date":1648050693,"answer_id":71590234,"question_id":71590131,"body_markdown":"I will take this exemple:\r\n\r\n     public static void arrYear(String name) {\r\n      y+=1;\r\n      years = new int[y];\r\n      years[(y-1)] = name.getYear(); //same error\r\n    }\r\n\r\nYou are trying to use the method getYear on the variable name and the name is a String and not a Movie Object\r\nYou could just replace the argument from String to Movie like that:\r\n\r\n\r\n     public static void arrYear(Movie name) {\r\n      y+=1;\r\n      years = new int[y];\r\n      years[(y-1)] = name.getYear(); //same error\r\n    }\r\n\r\nand it should work for all your functions\r\n","title":"Error trying to call parts of a class in a method Java","body":"<p>I will take this exemple:</p>\n<pre><code> public static void arrYear(String name) {\n  y+=1;\n  years = new int[y];\n  years[(y-1)] = name.getYear(); //same error\n}\n</code></pre>\n<p>You are trying to use the method getYear on the variable name and the name is a String and not a Movie Object\nYou could just replace the argument from String to Movie like that:</p>\n<pre><code> public static void arrYear(Movie name) {\n  y+=1;\n  years = new int[y];\n  years[(y-1)] = name.getYear(); //same error\n}\n</code></pre>\n<p>and it should work for all your functions</p>\n"}],"owner":{"account_id":23563803,"reputation":9,"user_id":17604832,"display_name":"Pendragonz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71590234,"answer_count":1,"score":0,"last_activity_date":1648050693,"creation_date":1648050341,"question_id":71590131,"body_markdown":"I am this close to finally completing this assignment, but I&#39;ve hit a roadblock. For some reason I can&#39;t get call aspects of the class in my methods. Does anyone have a way of doing this that works? I&#39;ve put comments next to the three parts I&#39;m referring to. I do not know what is causing these errors, and Im grateful for any help.\r\n\r\n```\r\npublic class Main\r\n{\r\n  public static int w = -1;\r\n  public static int x = 0;\r\n  public static int y = 0;\r\n  public static int z = 0;\r\n  public static String[] names;\r\n  public static int[] years;\r\n  public static String[] studios;\r\n    public static class Movie{\r\n    // instance variables\r\n    private int year;\r\n    private String title;\r\n    private String studio;\r\n    private int placement;\r\n    // Constructor for objects of class Movie\r\n    Movie(String title, int year, String studio)\r\n    {\r\n        // initialize instance variables\r\n        this.title = title;\r\n        this.year = year;\r\n        this.studio = studio;\r\n    }\r\n\r\n    public String getTitle()\r\n    {\r\n        return title;\r\n    }\r\n    \r\n    public void setTitle(String title)\r\n    {\r\n        this.title = title;\r\n    }\r\n    public void setPlacement() {\r\n      w+=1;\r\n      this.placement = w;\r\n    }\r\n      public int getPlacement() {\r\n        return placement;\r\n      }\r\n    public String getStudio()\r\n    {\r\n        return studio;\r\n    }\r\n    \r\n    public void setStudio(String studio)\r\n    {\r\n        this.studio = studio;\r\n    }\r\n    \r\n    public int getYear()\r\n    {\r\n        return year;\r\n    }\r\n   \r\n    public void setYear(int year)\r\n    {\r\n        this.year = year;\r\n    }\r\n   \r\n    public String toString()\r\n    {\r\n        String str = String.format(&quot;%-30s %4d   %-20s&quot;, title, year, studio);\r\n        return str;\r\n    }\r\n    }\r\n    \r\n    public static void arrNames(String name) {\r\n      x+=1;\r\n      names = new String[x];\r\n      names[(x-1)] = name.getTitle(); //error here, why can&#39;t I just use getTitle()?\r\n    }\r\n    public static void arrYear(String name) {\r\n      y+=1;\r\n      years = new int[y];\r\n      years[(y-1)] = name.getYear(); //same error\r\n    }\r\n    public static void arrStudio(String name) {\r\n      z+=1;\r\n      studios = new String[z];\r\n      studios[z-1] = name.getStudio(); //same error\r\n    }\r\n  public static void setGroup(String name) {\r\n      arrNames(name);\r\n      arrYear(name);\r\n      arrStudio(name);\r\n    }\r\n    public static void getGroups(String name) {\r\n      int a = x;\r\n      int b = y;\r\n      int c = z;\r\n      int d = 0;\r\n      int e = 0;\r\n      int f = 0;\r\n      System.out.println(&quot;Names Category:  &quot;);\r\n      while (a &gt; 0) {\r\n        System.out.print(names[d] + &quot;  &quot;);\r\n        d+=1;\r\n        a-=1;\r\n        }\r\n      System.out.println(&quot;Years Category:  &quot;);\r\n      while (b &gt; 0) {\r\n        System.out.print(years[e] + &quot;  &quot;);\r\n        e+=1;\r\n        b-=1;\r\n      }\r\n      System.out.println(&quot;Studios Category:  &quot;);\r\n      while (c &gt; 0) {\r\n        System.out.print(studios[f] + &quot;  &quot;);\r\n        f+=1;\r\n        c-=1;\r\n      }\r\n    \r\n  public static void main(String[] args) {\r\n    Movie nemo = new Movie(&quot;Finding Nemo&quot;,2003,&quot;Pixar&quot;);\r\n    setGroup(nemo.getTitle());\r\n    }\r\n}\r\n\r\n```","title":"Error trying to call parts of a class in a method Java","body":"<p>I am this close to finally completing this assignment, but I've hit a roadblock. For some reason I can't get call aspects of the class in my methods. Does anyone have a way of doing this that works? I've put comments next to the three parts I'm referring to. I do not know what is causing these errors, and Im grateful for any help.</p>\n<pre><code>public class Main\n{\n  public static int w = -1;\n  public static int x = 0;\n  public static int y = 0;\n  public static int z = 0;\n  public static String[] names;\n  public static int[] years;\n  public static String[] studios;\n    public static class Movie{\n    // instance variables\n    private int year;\n    private String title;\n    private String studio;\n    private int placement;\n    // Constructor for objects of class Movie\n    Movie(String title, int year, String studio)\n    {\n        // initialize instance variables\n        this.title = title;\n        this.year = year;\n        this.studio = studio;\n    }\n\n    public String getTitle()\n    {\n        return title;\n    }\n    \n    public void setTitle(String title)\n    {\n        this.title = title;\n    }\n    public void setPlacement() {\n      w+=1;\n      this.placement = w;\n    }\n      public int getPlacement() {\n        return placement;\n      }\n    public String getStudio()\n    {\n        return studio;\n    }\n    \n    public void setStudio(String studio)\n    {\n        this.studio = studio;\n    }\n    \n    public int getYear()\n    {\n        return year;\n    }\n   \n    public void setYear(int year)\n    {\n        this.year = year;\n    }\n   \n    public String toString()\n    {\n        String str = String.format(&quot;%-30s %4d   %-20s&quot;, title, year, studio);\n        return str;\n    }\n    }\n    \n    public static void arrNames(String name) {\n      x+=1;\n      names = new String[x];\n      names[(x-1)] = name.getTitle(); //error here, why can't I just use getTitle()?\n    }\n    public static void arrYear(String name) {\n      y+=1;\n      years = new int[y];\n      years[(y-1)] = name.getYear(); //same error\n    }\n    public static void arrStudio(String name) {\n      z+=1;\n      studios = new String[z];\n      studios[z-1] = name.getStudio(); //same error\n    }\n  public static void setGroup(String name) {\n      arrNames(name);\n      arrYear(name);\n      arrStudio(name);\n    }\n    public static void getGroups(String name) {\n      int a = x;\n      int b = y;\n      int c = z;\n      int d = 0;\n      int e = 0;\n      int f = 0;\n      System.out.println(&quot;Names Category:  &quot;);\n      while (a &gt; 0) {\n        System.out.print(names[d] + &quot;  &quot;);\n        d+=1;\n        a-=1;\n        }\n      System.out.println(&quot;Years Category:  &quot;);\n      while (b &gt; 0) {\n        System.out.print(years[e] + &quot;  &quot;);\n        e+=1;\n        b-=1;\n      }\n      System.out.println(&quot;Studios Category:  &quot;);\n      while (c &gt; 0) {\n        System.out.print(studios[f] + &quot;  &quot;);\n        f+=1;\n        c-=1;\n      }\n    \n  public static void main(String[] args) {\n    Movie nemo = new Movie(&quot;Finding Nemo&quot;,2003,&quot;Pixar&quot;);\n    setGroup(nemo.getTitle());\n    }\n}\n\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":2000334,"reputation":7336,"user_id":1791546,"accept_rate":68,"display_name":"Shridutt Kothari"},"score":2,"creation_date":1648011701,"post_id":71582005,"comment_id":126513147,"body_markdown":"Your question is not clear, pls can you elaborate more like what do you need in output?","body":"Your question is not clear, pls can you elaborate more like what do you need in output?"}],"answers":[{"tags":[],"owner":{"account_id":18485634,"reputation":2328,"user_id":13466689,"display_name":"Faheem azaz Bhanej"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648050624,"creation_date":1648012649,"answer_id":71582149,"question_id":71582005,"body_markdown":"You have to print your 2D array outside `outer loop` but you print this 2D array result outside `inner loop`. After that you have to remove `bracket` and `comma` through java [**replace()**][1] method.\r\n\r\nHere down is modified code:\r\n```\r\nimport java.util.*;\r\npublic class Main\r\n{\r\n\tpublic static void main(String[] args) {\r\n\t\tfinal int rows = 20;\r\n        final int columns = 20;\r\n        String board[][] = new String[rows][columns];\r\n        \r\n        // OUTER LOOP\r\n        for (int i = 0; i &lt; rows; i++) {\r\n            // INNER LOOP\r\n            for (int j = 0; j &lt; columns; j++) {\r\n                board[i][j] = &quot;.&quot;;\r\n            }\r\n        }\r\n        System.out.print(Arrays.deepToString(board).replace(&quot;],&quot;, &quot;\\n&quot;)\r\n                                                .replace(&quot;,&quot;, &quot;&quot;)\r\n                                                .replace(&quot;[[&quot;, &quot; &quot;)\r\n                                                .replace(&quot;[&quot;, &quot;&quot;)\r\n                                                .replace(&quot;]]&quot;, &quot;&quot;));\r\n\t}\r\n}\r\n```\r\n\r\n  [1]: https://www.w3schools.com/java/ref_string_replace.asp","title":"How can I print a two-dimensional array of characters in Java, to create a 20x20 grid?","body":"<p>You have to print your 2D array outside <code>outer loop</code> but you print this 2D array result outside <code>inner loop</code>. After that you have to remove <code>bracket</code> and <code>comma</code> through java <a href=\"https://www.w3schools.com/java/ref_string_replace.asp\" rel=\"nofollow noreferrer\"><strong>replace()</strong></a> method.</p>\n<p>Here down is modified code:</p>\n<pre><code>import java.util.*;\npublic class Main\n{\n    public static void main(String[] args) {\n        final int rows = 20;\n        final int columns = 20;\n        String board[][] = new String[rows][columns];\n        \n        // OUTER LOOP\n        for (int i = 0; i &lt; rows; i++) {\n            // INNER LOOP\n            for (int j = 0; j &lt; columns; j++) {\n                board[i][j] = &quot;.&quot;;\n            }\n        }\n        System.out.print(Arrays.deepToString(board).replace(&quot;],&quot;, &quot;\\n&quot;)\n                                                .replace(&quot;,&quot;, &quot;&quot;)\n                                                .replace(&quot;[[&quot;, &quot; &quot;)\n                                                .replace(&quot;[&quot;, &quot;&quot;)\n                                                .replace(&quot;]]&quot;, &quot;&quot;));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1648013705,"creation_date":1648013705,"answer_id":71582275,"question_id":71582005,"body_markdown":"Put the two together?...\r\n\r\n      public static void main(String[] args) {       \r\n        final int rows = 20;\r\n        final int columns = 20;\r\n        String board[][] = new String[rows][columns];\r\n    \r\n        for (int row = 0; row &lt; board.length; row++) {\r\n          for (int col = 0; col &lt; board[row].length; col++) {\r\n            board[row][col] = &quot;.&quot;;\r\n          }\r\n        }\r\n    \r\n        display2Darray(board);\r\n      }\r\n    \r\n      public static void display2Darray(String[][] arr) {\r\n        for (int row = 0; row &lt; arr.length; row++) {\r\n          for (int col = 0; col &lt; arr[row].length; col++) {\r\n            System.out.print(arr[row][col]);\r\n          }\r\n          System.out.println();\r\n        }\r\n      }\r\n\r\n","title":"How can I print a two-dimensional array of characters in Java, to create a 20x20 grid?","body":"<p>Put the two together?...</p>\n<pre><code>  public static void main(String[] args) {       \n    final int rows = 20;\n    final int columns = 20;\n    String board[][] = new String[rows][columns];\n\n    for (int row = 0; row &lt; board.length; row++) {\n      for (int col = 0; col &lt; board[row].length; col++) {\n        board[row][col] = &quot;.&quot;;\n      }\n    }\n\n    display2Darray(board);\n  }\n\n  public static void display2Darray(String[][] arr) {\n    for (int row = 0; row &lt; arr.length; row++) {\n      for (int col = 0; col &lt; arr[row].length; col++) {\n        System.out.print(arr[row][col]);\n      }\n      System.out.println();\n    }\n  }\n</code></pre>\n"}],"owner":{"account_id":23582896,"reputation":121,"user_id":17621695,"display_name":"RaymondNoodle"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":320,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71582149,"answer_count":2,"score":1,"last_activity_date":1648050624,"creation_date":1648011374,"question_id":71582005,"body_markdown":"I am trying to print a 2d array of periods in Java, however, I can not get the formatting correctly. I am able to create a similar layout NOT using a 2d array. However, I will need to be working with a 2d array to finish the project. I have tried using `Arrays.deepToString();` but did not find it useful. \r\n\r\nMy goal is to have a 20x20 grid of periods like this:\r\n** Without the S and the X \r\n[![enter image description here][1]][1]\r\n\r\n\r\nMy way without using a 2d array: \r\n```\r\nfor (int i = 20; i &gt;= 1; i--) {\r\n            for(int j = 1; j &lt;= 20; j++) {\r\n                    System.out.print(&quot; .&quot;);\r\n            }\r\n            System.out.print(&quot;\\n&quot;);\r\n        }\r\n```\r\n\r\nMy try using a 2d array: \r\n```\r\nfinal int rows = 20;\r\nfinal int columns = 20;\r\n\r\nfor (int i = 0; i &lt; rows; i++) {\r\n     for (int j = 0; j &lt; columns; j++) {\r\n              board[i][j] = &quot;.&quot;;\r\n     }\r\n     System.out.println(Arrays.deepToString(board));\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/X6YUG.png","title":"How can I print a two-dimensional array of characters in Java, to create a 20x20 grid?","body":"<p>I am trying to print a 2d array of periods in Java, however, I can not get the formatting correctly. I am able to create a similar layout NOT using a 2d array. However, I will need to be working with a 2d array to finish the project. I have tried using <code>Arrays.deepToString();</code> but did not find it useful.</p>\n<p>My goal is to have a 20x20 grid of periods like this:\n** Without the S and the X\n<a href=\"https://i.stack.imgur.com/X6YUG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X6YUG.png\" alt=\"enter image description here\" /></a></p>\n<p>My way without using a 2d array:</p>\n<pre><code>for (int i = 20; i &gt;= 1; i--) {\n            for(int j = 1; j &lt;= 20; j++) {\n                    System.out.print(&quot; .&quot;);\n            }\n            System.out.print(&quot;\\n&quot;);\n        }\n</code></pre>\n<p>My try using a 2d array:</p>\n<pre><code>final int rows = 20;\nfinal int columns = 20;\n\nfor (int i = 0; i &lt; rows; i++) {\n     for (int j = 0; j &lt; columns; j++) {\n              board[i][j] = &quot;.&quot;;\n     }\n     System.out.println(Arrays.deepToString(board));\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","unit-testing","spring-test"],"answers":[{"tags":[],"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648050563,"creation_date":1648050563,"answer_id":71590205,"question_id":71585189,"body_markdown":"Not sure about the ports issue, but the way we managed to make the coverage pass was to separate the tests into two classes, as in:\r\n\r\n```\r\n@SpringBootTest\r\n@ActiveProfiles(resolver = TestActiveProfileResolver.class)\r\nclass ApplicationTest extends BaseIntegrationTest {\r\n\r\n    @Autowired\r\n    private OAuthController controller;\r\n\r\n    @Test\r\n    void contextLoads() {\r\n        assertNotNull(controller);\r\n    }\r\n}\r\n```\r\n\r\nAnd\r\n\r\n```\r\n@ActiveProfiles(resolver = TestActiveProfileResolver.class)\r\nclass MainMethodCoverageTest extends BaseIntegrationTest {\r\n\r\n    @Test\r\n    public void main() {\r\n        Application.main(new String[]{});\r\n    }\r\n}\r\n```","title":"Application.main() to load context and start app but under a different port for tests within Spring Boot","body":"<p>Not sure about the ports issue, but the way we managed to make the coverage pass was to separate the tests into two classes, as in:</p>\n<pre><code>@SpringBootTest\n@ActiveProfiles(resolver = TestActiveProfileResolver.class)\nclass ApplicationTest extends BaseIntegrationTest {\n\n    @Autowired\n    private OAuthController controller;\n\n    @Test\n    void contextLoads() {\n        assertNotNull(controller);\n    }\n}\n</code></pre>\n<p>And</p>\n<pre><code>@ActiveProfiles(resolver = TestActiveProfileResolver.class)\nclass MainMethodCoverageTest extends BaseIntegrationTest {\n\n    @Test\n    public void main() {\n        Application.main(new String[]{});\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1648050563,"creation_date":1648029567,"question_id":71585189,"body_markdown":"I have Sonarqube complaining we&#39;re missing coverage for the application class, even though we already have something like.\r\n\r\n    @SpringBootTest(webEnvironment=SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n    @ActiveProfiles(resolver = TestActiveProfileResolver.class)\r\n    class ApplicationTests extends BaseIntegrationTest {\r\n\r\n    @Autowired\r\n    private OAuthController controller;\r\n\r\n    @Test\r\n    void contextLoads() {\r\n        assertNotNull(controller);\r\n    }\r\n\r\n    }\r\n\r\nWhere BaseIntegrationTest start our testContainers.\r\n\r\nSo we&#39;ve added:\r\n\r\n```\r\n@Test\r\npublic void main() {\r\n   Application.main(new String[]{&quot;--spring.port=8081&quot;,});\r\n}\r\n```\r\nWhich works for the coverage, but it will fail if the application is already running on our port 8080. Reason why we&#39;ve adding the `&quot;--spring.port=8081&quot;` piece as well as \r\n```(webEnvironment= SpringBootTest.WebEnvironment.RANDOM_PORT)```, to see if that would force the app to start under another port perhaps, but that won&#39;t do.\r\n\r\nThe other option I thought of was perhaps having a specific application.yml file under the test folder that points to a different port, but copying everything from our main application.yml file. Not sure if this is the best approach though as that file is quite big and constantly changing.\r\n\r\nThank you.","title":"Application.main() to load context and start app but under a different port for tests within Spring Boot","body":"<p>I have Sonarqube complaining we're missing coverage for the application class, even though we already have something like.</p>\n<pre><code>@SpringBootTest(webEnvironment=SpringBootTest.WebEnvironment.RANDOM_PORT)\n@ActiveProfiles(resolver = TestActiveProfileResolver.class)\nclass ApplicationTests extends BaseIntegrationTest {\n\n@Autowired\nprivate OAuthController controller;\n\n@Test\nvoid contextLoads() {\n    assertNotNull(controller);\n}\n\n}\n</code></pre>\n<p>Where BaseIntegrationTest start our testContainers.</p>\n<p>So we've added:</p>\n<pre><code>@Test\npublic void main() {\n   Application.main(new String[]{&quot;--spring.port=8081&quot;,});\n}\n</code></pre>\n<p>Which works for the coverage, but it will fail if the application is already running on our port 8080. Reason why we've adding the <code>&quot;--spring.port=8081&quot;</code> piece as well as\n<code>(webEnvironment= SpringBootTest.WebEnvironment.RANDOM_PORT)</code>, to see if that would force the app to start under another port perhaps, but that won't do.</p>\n<p>The other option I thought of was perhaps having a specific application.yml file under the test folder that points to a different port, but copying everything from our main application.yml file. Not sure if this is the best approach though as that file is quite big and constantly changing.</p>\n<p>Thank you.</p>\n"},{"tags":["java","android","android-studio","kotlin"],"answers":[{"tags":[],"owner":{"account_id":1919838,"reputation":28264,"user_id":1731626,"display_name":"Sergio"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1642860131,"creation_date":1642851596,"answer_id":70812431,"question_id":70812266,"body_markdown":"In **Java** it will look something like this:\r\n\r\n    BottomSheetBehavior&lt;FrameLayout&gt; behavior = BottomSheetBehavior.from(bottomsheet);\r\n    behavior.setPeekHeight(200);\r\n    behavior.setState(BottomSheetBehavior.STATE_COLLAPSED);","title":"How to do i convert the piece of kotlin code in java?","body":"<p>In <strong>Java</strong> it will look something like this:</p>\n<pre><code>BottomSheetBehavior&lt;FrameLayout&gt; behavior = BottomSheetBehavior.from(bottomsheet);\nbehavior.setPeekHeight(200);\nbehavior.setState(BottomSheetBehavior.STATE_COLLAPSED);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22227241,"reputation":107,"user_id":16589374,"display_name":"Raushan Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642852699,"creation_date":1642852699,"answer_id":70812551,"question_id":70812266,"body_markdown":"Your question is not clear Actually, what help do you want? \r\nBut as per my understanding, you should search your project on other sources in java if you find, well and good, or else try to know the basic semantics and syntax of kotlin and follow the same resource, code in kotlin &amp; convert into Java.\r\n.\r\n\r\n**Steps to convert kotlin into java:**\r\n\r\n\r\n**Step-1:**   Open the Kotlin Class/File which is to be converted into Java.\r\n\r\n\r\n**Step-2:** **Navigate to Tools Menu**\r\n     \r\n From the topmost toolbar of the Android Studio, select Tools and then navigate to Kotlin &gt; Show Kotlin Bytecode. It will open a window at the right-hand side that will contain the line by line bytecode for the Kotlin file. \r\n[![enter image description here][1]][1]\r\n\r\nStep-3:  **Decompile Code**\r\n In the bytecode window, checkbox the option “JVM 8 target” and click on Decompile. The Android Studio will generate the Java equivalent code for the Kotlin file.\r\n[![enter image description here][2]][2]\r\n\r\nI hope this may be helpful in the last case.\r\n\r\n  [1]: https://i.stack.imgur.com/AnCSS.png\r\n  [2]: https://i.stack.imgur.com/ixKWI.png","title":"How to do i convert the piece of kotlin code in java?","body":"<p>Your question is not clear Actually, what help do you want?\nBut as per my understanding, you should search your project on other sources in java if you find, well and good, or else try to know the basic semantics and syntax of kotlin and follow the same resource, code in kotlin &amp; convert into Java.\n.</p>\n<p><strong>Steps to convert kotlin into java:</strong></p>\n<p><strong>Step-1:</strong>   Open the Kotlin Class/File which is to be converted into Java.</p>\n<p><strong>Step-2:</strong> <strong>Navigate to Tools Menu</strong></p>\n<p>From the topmost toolbar of the Android Studio, select Tools and then navigate to Kotlin &gt; Show Kotlin Bytecode. It will open a window at the right-hand side that will contain the line by line bytecode for the Kotlin file.\n<a href=\"https://i.stack.imgur.com/AnCSS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AnCSS.png\" alt=\"enter image description here\" /></a></p>\n<p>Step-3:  <strong>Decompile Code</strong>\nIn the bytecode window, checkbox the option “JVM 8 target” and click on Decompile. The Android Studio will generate the Java equivalent code for the Kotlin file.\n<a href=\"https://i.stack.imgur.com/ixKWI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ixKWI.png\" alt=\"enter image description here\" /></a></p>\n<p>I hope this may be helpful in the last case.</p>\n"},{"tags":[],"owner":{"account_id":24491899,"reputation":1,"user_id":18408870,"display_name":"Khalid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648049795,"creation_date":1647867026,"answer_id":71557912,"question_id":70812266,"body_markdown":"1. Open your Kotlin project in the IntelliJ IDEA / Android Studio.\r\n2. Then navigate to Tools &gt; Kotlin &gt; Show Kotlin Bytecode.\r\n3. You will get the bytecode of your Kotin file.\r\n4. Now click on the Decompile button to get your Java code from the bytecode.\r\n\r\nhttps://blog.mindorks.com/how-to-convert-a-kotlin-source-file-to-a-java-source-file","title":"How to do i convert the piece of kotlin code in java?","body":"<ol>\n<li>Open your Kotlin project in the IntelliJ IDEA / Android Studio.</li>\n<li>Then navigate to Tools &gt; Kotlin &gt; Show Kotlin Bytecode.</li>\n<li>You will get the bytecode of your Kotin file.</li>\n<li>Now click on the Decompile button to get your Java code from the bytecode.</li>\n</ol>\n<p><a href=\"https://blog.mindorks.com/how-to-convert-a-kotlin-source-file-to-a-java-source-file\" rel=\"nofollow noreferrer\">https://blog.mindorks.com/how-to-convert-a-kotlin-source-file-to-a-java-source-file</a></p>\n"}],"owner":{"account_id":20753948,"reputation":1,"user_id":15240786,"display_name":"Anik Chakraborty"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1246,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":3,"score":-2,"last_activity_date":1648049795,"creation_date":1642850353,"question_id":70812266,"body_markdown":"*Hello Developers , I am trying to build a bottomsheet in android studio by the help of a YouTube video. But in the video the youtuber use kotlin and I don&#39;t know kotlin. I have already complete the layout part but I stucked in the code section.*\r\n\r\n**For the video click here**\r\nOr Use this link https://www.youtube.com/watch?v=3vMtHKniOqI&amp;t=250s&amp;ab_channel=DroidUI\r\n\r\n------------------------------------------------------------------------\r\n\r\n    bottomsheetbehavior.from(bottomsheet).apply{ \r\n    peekheight=200 \r\n    this.state.bottomsheetbehavior.state_collapsed }","title":"How to do i convert the piece of kotlin code in java?","body":"<p><em>Hello Developers , I am trying to build a bottomsheet in android studio by the help of a YouTube video. But in the video the youtuber use kotlin and I don't know kotlin. I have already complete the layout part but I stucked in the code section.</em></p>\n<p><strong>For the video click here</strong>\nOr Use this link <a href=\"https://www.youtube.com/watch?v=3vMtHKniOqI&amp;t=250s&amp;ab_channel=DroidUI\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=3vMtHKniOqI&amp;t=250s&amp;ab_channel=DroidUI</a></p>\n<hr />\n<pre><code>bottomsheetbehavior.from(bottomsheet).apply{ \npeekheight=200 \nthis.state.bottomsheetbehavior.state_collapsed }\n</code></pre>\n"},{"tags":["java","kotlin"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1648046807,"post_id":71589202,"comment_id":126525672,"body_markdown":"check what might trigger this: rejected due to project ID settings error message. Debug the living crap out of that service.","body":"check what might trigger this: rejected due to project ID settings error message. Debug the living crap out of that service."},{"owner":{"account_id":4279913,"reputation":3623,"user_id":3499626,"accept_rate":89,"display_name":"jhamon"},"score":1,"creation_date":1648046888,"post_id":71589202,"comment_id":126525713,"body_markdown":"https://ethereum.stackexchange.com/questions/79215/project-id-is-required","body":"<a href=\"https://ethereum.stackexchange.com/questions/79215/project-id-is-required\" title=\"project id is required\">ethereum.stackexchange.com/questions/79215/&hellip;</a>"},{"owner":{"account_id":23358250,"reputation":774,"user_id":17430910,"display_name":"Vaishnav Kanhirathingal"},"score":0,"creation_date":1648097798,"post_id":71589202,"comment_id":126539400,"body_markdown":"@Stultuske Currently, I am able to make calls which don&#39;t require a gas fees. But, anything other than that isn&#39;t working. I can&#39;t even gat the account balance back. Any idea what this might be caused by?","body":"@Stultuske Currently, I am able to make calls which don&#39;t require a gas fees. But, anything other than that isn&#39;t working. I can&#39;t even gat the account balance back. Any idea what this might be caused by?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1648107968,"post_id":71589202,"comment_id":126541651,"body_markdown":"based on the code and configuration you don&#39;t show? no. I&#39;ve never used ethereum, so I don&#39;t know it&#39;s behavior by heart, neither. You have noticed that the stacktrace doesn&#39;t actually mention any of your classes? So, this is likely an error in a library you use or service you call. You&#39;ll need to check into that.","body":"based on the code and configuration you don&#39;t show? no. I&#39;ve never used ethereum, so I don&#39;t know it&#39;s behavior by heart, neither. You have noticed that the stacktrace doesn&#39;t actually mention any of your classes? So, this is likely an error in a library you use or service you call. You&#39;ll need to check into that."},{"owner":{"account_id":23358250,"reputation":774,"user_id":17430910,"display_name":"Vaishnav Kanhirathingal"},"score":0,"creation_date":1648108185,"post_id":71589202,"comment_id":126541709,"body_markdown":"@Stultuske https://stackoverflow.com/questions/71598624/smart-contracts-we3j-account-balance-zero-while-making-a-transaction-to-a-co Sorry for not adding enough details. But this one should have everything to run on your machine without requiring any work.","body":"@Stultuske <a href=\"https://stackoverflow.com/questions/71598624/smart-contracts-we3j-account-balance-zero-while-making-a-transaction-to-a-co\" title=\"smart contracts we3j account balance zero while making a transaction to a co\">stackoverflow.com/questions/71598624/&hellip;</a> Sorry for not adding enough details. But this one should have everything to run on your machine without requiring any work."}],"owner":{"account_id":23358250,"reputation":774,"user_id":17430910,"display_name":"Vaishnav Kanhirathingal"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":175,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1648049230,"creation_date":1648046581,"question_id":71589202,"body_markdown":"The below code interacts with a smart contract and requires gas fees. The problem is that the transaction is failing. It&#39;s probably a beginner error I&#39;m making. Because my other functions are working fine. I&#39;m talking about the ones that don&#39;t make changes to the contract. I have posted the code and the logs. If something important is missing, just comment on it and I&#39;ll add it.\r\n&lt;br&gt;Code -\r\n\r\n    fun test() {\r\n        val function = Function(\r\n            functionRegisterVote,\r\n            listOf&lt;Type&lt;*&gt;&gt;(Uint256(3)),\r\n            emptyList()\r\n        )\r\n        val txData = FunctionEncoder.encode(function)\r\n        val txManager = RawTransactionManager(web3j, Credentials.create(USER_PRIVATE_KEY))\r\n        //Error thrown at below line\r\n        val txHash = txManager.sendTransaction(\r\n            this.requestCurrentGasPrice(), DefaultGasProvider.GAS_LIMIT, CONTRACT_ADDRESS, txData,\r\n            BigInteger.ZERO\r\n        ).transactionHash\r\n        val receiptProcessor = PollingTransactionReceiptProcessor(\r\n            web3j, TransactionManager.DEFAULT_POLLING_FREQUENCY,\r\n            TransactionManager.DEFAULT_POLLING_ATTEMPTS_PER_TX_HASH\r\n        )\r\n        val txReceipt = receiptProcessor.waitForTransactionReceipt(txHash)\r\n        Log.d(TAG, &quot;transaction receipt = \\ngas used = ${txReceipt.gasUsed}&quot;)\r\n    }\r\n\r\nLog - \r\n\r\n\r\n    2022-03-23 19:57:16.771 27224-27374/com.kenetic.blockchainvs W/System.err: org.web3j.protocol.exceptions.ClientConnectionException: Invalid response received: 403; {&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:1,&quot;error&quot;:{&quot;code&quot;:-32002,&quot;message&quot;:&quot;rejected due to project ID settings&quot;}}\r\n    2022-03-23 19:57:16.773 27224-27374/com.kenetic.blockchainvs W/System.err:     at org.web3j.protocol.http.HttpService.performIO(HttpService.java:178)\r\n    2022-03-23 19:57:16.774 27224-27374/com.kenetic.blockchainvs W/System.err:     at org.web3j.protocol.Service.send(Service.java:48)\r\n    2022-03-23 19:57:16.774 27224-27374/com.kenetic.blockchainvs W/System.err:     at org.web3j.protocol.core.Request.send(Request.java:87)\r\n    2022-03-23 19:57:16.774 27224-27374/com.kenetic.blockchainvs W/System.err:     at org.web3j.tx.RawTransactionManager.getNonce(RawTransactionManager.java:97)\r\n    2022-03-23 19:57:16.775 27224-27374/com.kenetic.blockchainvs W/System.err:     at org.web3j.tx.RawTransactionManager.sendTransaction(RawTransactionManager.java:120)\r\n    2022-03-23 19:57:16.775 27224-27374/com.kenetic.blockchainvs W/System.err:     at org.web3j.tx.TransactionManager.sendTransaction(TransactionManager.java:125)\r\n    2022-03-23 19:57:16.775 27224-27374/com.kenetic.blockchainvs W/System.err:     at com.kenetic.blockchainvs.block_connector.contract.contract_interface.VoteContractAccessor.test(VoteContractAccessor.kt:127)\r\n    2022-03-23 19:57:16.775 27224-27374/com.kenetic.blockchainvs W/System.err:     at com.kenetic.blockchainvs.block_connector.contract.contract_interface.VoteContractDelegate.testingFunction(VoteContractDelegate.kt:114)\r\n    2022-03-23 19:57:16.776 27224-27374/com.kenetic.blockchainvs W/System.err:     at com.kenetic.blockchainvs.ui.ContractScreenFragment$applyBinding$1$6$1.invokeSuspend(ContractScreenFragment.kt:112)\r\n    2022-03-23 19:57:16.776 27224-27374/com.kenetic.blockchainvs W/System.err:     at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\r\n    2022-03-23 19:57:16.776 27224-27374/com.kenetic.blockchainvs W/System.err:     at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\r\n    2022-03-23 19:57:16.777 27224-27374/com.kenetic.blockchainvs W/System.err:     at kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:571)\r\n    2022-03-23 19:57:16.777 27224-27374/com.kenetic.blockchainvs W/System.err:     at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:750)\r\n    2022-03-23 19:57:16.778 27224-27374/com.kenetic.blockchainvs W/System.err:     at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:678)\r\n    2022-03-23 19:57:16.778 27224-27374/com.kenetic.blockchainvs W/System.err:     at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:665)\r\n\r\n","title":"Can&#39;t call smart contract functions which require gas fees","body":"<p>The below code interacts with a smart contract and requires gas fees. The problem is that the transaction is failing. It's probably a beginner error I'm making. Because my other functions are working fine. I'm talking about the ones that don't make changes to the contract. I have posted the code and the logs. If something important is missing, just comment on it and I'll add it.\n<br>Code -</p>\n<pre><code>fun test() {\n    val function = Function(\n        functionRegisterVote,\n        listOf&lt;Type&lt;*&gt;&gt;(Uint256(3)),\n        emptyList()\n    )\n    val txData = FunctionEncoder.encode(function)\n    val txManager = RawTransactionManager(web3j, Credentials.create(USER_PRIVATE_KEY))\n    //Error thrown at below line\n    val txHash = txManager.sendTransaction(\n        this.requestCurrentGasPrice(), DefaultGasProvider.GAS_LIMIT, CONTRACT_ADDRESS, txData,\n        BigInteger.ZERO\n    ).transactionHash\n    val receiptProcessor = PollingTransactionReceiptProcessor(\n        web3j, TransactionManager.DEFAULT_POLLING_FREQUENCY,\n        TransactionManager.DEFAULT_POLLING_ATTEMPTS_PER_TX_HASH\n    )\n    val txReceipt = receiptProcessor.waitForTransactionReceipt(txHash)\n    Log.d(TAG, &quot;transaction receipt = \\ngas used = ${txReceipt.gasUsed}&quot;)\n}\n</code></pre>\n<p>Log -</p>\n<pre><code>2022-03-23 19:57:16.771 27224-27374/com.kenetic.blockchainvs W/System.err: org.web3j.protocol.exceptions.ClientConnectionException: Invalid response received: 403; {&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:1,&quot;error&quot;:{&quot;code&quot;:-32002,&quot;message&quot;:&quot;rejected due to project ID settings&quot;}}\n2022-03-23 19:57:16.773 27224-27374/com.kenetic.blockchainvs W/System.err:     at org.web3j.protocol.http.HttpService.performIO(HttpService.java:178)\n2022-03-23 19:57:16.774 27224-27374/com.kenetic.blockchainvs W/System.err:     at org.web3j.protocol.Service.send(Service.java:48)\n2022-03-23 19:57:16.774 27224-27374/com.kenetic.blockchainvs W/System.err:     at org.web3j.protocol.core.Request.send(Request.java:87)\n2022-03-23 19:57:16.774 27224-27374/com.kenetic.blockchainvs W/System.err:     at org.web3j.tx.RawTransactionManager.getNonce(RawTransactionManager.java:97)\n2022-03-23 19:57:16.775 27224-27374/com.kenetic.blockchainvs W/System.err:     at org.web3j.tx.RawTransactionManager.sendTransaction(RawTransactionManager.java:120)\n2022-03-23 19:57:16.775 27224-27374/com.kenetic.blockchainvs W/System.err:     at org.web3j.tx.TransactionManager.sendTransaction(TransactionManager.java:125)\n2022-03-23 19:57:16.775 27224-27374/com.kenetic.blockchainvs W/System.err:     at com.kenetic.blockchainvs.block_connector.contract.contract_interface.VoteContractAccessor.test(VoteContractAccessor.kt:127)\n2022-03-23 19:57:16.775 27224-27374/com.kenetic.blockchainvs W/System.err:     at com.kenetic.blockchainvs.block_connector.contract.contract_interface.VoteContractDelegate.testingFunction(VoteContractDelegate.kt:114)\n2022-03-23 19:57:16.776 27224-27374/com.kenetic.blockchainvs W/System.err:     at com.kenetic.blockchainvs.ui.ContractScreenFragment$applyBinding$1$6$1.invokeSuspend(ContractScreenFragment.kt:112)\n2022-03-23 19:57:16.776 27224-27374/com.kenetic.blockchainvs W/System.err:     at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n2022-03-23 19:57:16.776 27224-27374/com.kenetic.blockchainvs W/System.err:     at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\n2022-03-23 19:57:16.777 27224-27374/com.kenetic.blockchainvs W/System.err:     at kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:571)\n2022-03-23 19:57:16.777 27224-27374/com.kenetic.blockchainvs W/System.err:     at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:750)\n2022-03-23 19:57:16.778 27224-27374/com.kenetic.blockchainvs W/System.err:     at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:678)\n2022-03-23 19:57:16.778 27224-27374/com.kenetic.blockchainvs W/System.err:     at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:665)\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","spring-security","spring-boot"],"comments":[{"owner":{"account_id":153165,"reputation":5541,"user_id":368220,"accept_rate":57,"display_name":"Martijn"},"score":0,"creation_date":1462963530,"post_id":32566520,"comment_id":61856115,"body_markdown":"&quot;So, probably moving the creation of RoleHierarchy Bean to a separate Configuration file will solve the problem.&quot; This solved it for me!","body":"&quot;So, probably moving the creation of RoleHierarchy Bean to a separate Configuration file will solve the problem.&quot; This solved it for me!"}],"answers":[{"tags":[],"owner":{"account_id":24645405,"reputation":31,"user_id":18543115,"display_name":"humbleCraftman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648049184,"creation_date":1648049184,"answer_id":71589846,"question_id":32566520,"body_markdown":"Using spring boot, I just injected a RoleHierarchy and things work fine. No configuration made. Just injected a bean of type RoleHierarchy.\r\n\r\n    @Component\r\n    public class CustomRoleHierarchy {\r\n        @Bean\r\n        public RoleHierarchy roleHierarchy() {\r\n            RoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\r\n            roleHierarchy.setHierarchy(&quot;ROLE_ADMIN &gt; ROLE_STAFF &gt; ROLE_USER&quot;);\r\n            return roleHierarchy;\r\n        }\r\n    }\r\n\r\nMy config (nothing about roleHierarchy)\r\n\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    public class ResourceServerConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                .csrf(AbstractHttpConfigurer::disable)\r\n                .authorizeRequests(authorize -&gt; authorize\r\n                        .antMatchers(HttpMethod.POST, &quot;/api/v1/tokens&quot;).permitAll()\r\n                        .anyRequest().authenticated()\r\n                ).oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\r\n                    .oauth2ResourceServer()\r\n                    .jwt()\r\n                    .jwtAuthenticationConverter(jwtAuthenticationConverter());\r\n        }\r\n    \r\n        private JwtAuthenticationConverter jwtAuthenticationConverter() {\r\n            JwtGrantedAuthoritiesConverter jwtGrantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\r\n            jwtGrantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;role&quot;);\r\n            jwtGrantedAuthoritiesConverter.setAuthorityPrefix(&quot;ROLE_&quot;);\r\n            JwtAuthenticationConverter jwtAuthenticationConverter = new JwtAuthenticationConverter();\r\n            jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter);\r\n            return jwtAuthenticationConverter;\r\n        }\r\n    }","title":"Custom RoleHierarchy not working with Method Security in Spring Boot Web Application","body":"<p>Using spring boot, I just injected a RoleHierarchy and things work fine. No configuration made. Just injected a bean of type RoleHierarchy.</p>\n<pre><code>@Component\npublic class CustomRoleHierarchy {\n    @Bean\n    public RoleHierarchy roleHierarchy() {\n        RoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\n        roleHierarchy.setHierarchy(&quot;ROLE_ADMIN &gt; ROLE_STAFF &gt; ROLE_USER&quot;);\n        return roleHierarchy;\n    }\n}\n</code></pre>\n<p>My config (nothing about roleHierarchy)</p>\n<pre><code>@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class ResourceServerConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n            .csrf(AbstractHttpConfigurer::disable)\n            .authorizeRequests(authorize -&gt; authorize\n                    .antMatchers(HttpMethod.POST, &quot;/api/v1/tokens&quot;).permitAll()\n                    .anyRequest().authenticated()\n            ).oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\n                .oauth2ResourceServer()\n                .jwt()\n                .jwtAuthenticationConverter(jwtAuthenticationConverter());\n    }\n\n    private JwtAuthenticationConverter jwtAuthenticationConverter() {\n        JwtGrantedAuthoritiesConverter jwtGrantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\n        jwtGrantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;role&quot;);\n        jwtGrantedAuthoritiesConverter.setAuthorityPrefix(&quot;ROLE_&quot;);\n        JwtAuthenticationConverter jwtAuthenticationConverter = new JwtAuthenticationConverter();\n        jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter);\n        return jwtAuthenticationConverter;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1563718,"reputation":882,"user_id":1452974,"accept_rate":57,"display_name":"de_xtr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1672,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1648049184,"creation_date":1442238567,"question_id":32566520,"body_markdown":"I am creating a custom role hierarchy and trying to use it with both web based security and method level security. This is a Spring Boot Web Application.\r\n\r\nMy configuration files :\r\n\r\n    @SpringBootApplication\r\n    @EnableGlobalMethodSecurity(securedEnabled=true,prePostEnabled=true)\r\n    public class Application {\r\n\r\n      public static void main(String[] args) {\r\n            SpringApplication.run(Application.class, args);\r\n      }\r\n    }\r\n\r\nSecurityConfig : \r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Autowired\r\n\tprivate UserDetailsService userDetailsService;\r\n\t\r\n\t@Autowired\r\n\tApplicationContext applicationContext;\r\n\r\n    @Override\r\n\tpublic void configure(WebSecurity web) throws Exception {\r\n\t\tweb\r\n\t\t\t.ignoring()\r\n\t\t\t\t.antMatchers(&quot;/resources/**&quot;);\r\n    }\r\n    @Override\r\n\tprotected void configure(HttpSecurity http) throws Exception {\r\n\t\thttp.csrf().disable()\r\n\t\t\t.formLogin()\r\n\t\t\t\t.loginPage(&quot;/signin.html&quot;)\r\n\t\t\t\t.loginProcessingUrl(&quot;/signin/authenticate&quot;)\r\n\t\t\t\t.failureUrl(&quot;/signin?param.error=bad_credentials&quot;)\r\n\t\t\t.and()\r\n\t\t\t\t.logout()\r\n\t\t\t\t\t.logoutUrl(&quot;/signout&quot;)\r\n\t\t\t\t\t.deleteCookies(&quot;JSESSIONID&quot;)\r\n\t\t\t.and()\r\n\t\t\t\t.authorizeRequests()\r\n\t\t\t\t\t.expressionHandler(webExpressionHandler())\r\n\t\t\t\t\t.antMatchers(&quot;/signin**&quot;,&quot;/user/**&quot;,&quot;/admin/**&quot;, &quot;/favicon.ico&quot;, &quot;/resources/**&quot;, &quot;/auth/**&quot;, &quot;/signin/**&quot;, &quot;/signup/**&quot;).permitAll()\r\n\t\t\t\t\t.antMatchers(&quot;/doc/**&quot;).hasRole(&quot;MOD&quot;).anyRequest().authenticated()\r\n\t\t\t.and()\r\n\t\t\t\t.apply(springSocialConfigurer())\t\t\r\n\t\t\t.and()\r\n\t\t\t\t.rememberMe();\r\n\t}\r\n    //Some more code for Spring Social integration\r\n    @Bean\r\n\tpublic RoleHierarchy roleHierarchy() {\r\n\t\tRoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\r\n\t\troleHierarchy.setHierarchy(&quot;ROLE_ADMIN &gt; ROLE_MOD &gt; ROLE_USER &gt; ROLE_GUEST&quot;);\r\n\t\treturn roleHierarchy;\r\n\t}\r\n\t\r\n    private SecurityExpressionHandler&lt;FilterInvocation&gt; webExpressionHandler() {\r\n        DefaultWebSecurityExpressionHandler defaultWebSecurityExpressionHandler = new DefaultWebSecurityExpressionHandler();\r\n        defaultWebSecurityExpressionHandler.setApplicationContext(applicationContext);\r\n        defaultWebSecurityExpressionHandler.setRoleHierarchy(roleHierarchy());\r\n        return defaultWebSecurityExpressionHandler;\r\n    }\r\n\t\r\n\t@Bean\r\n\tpublic RoleHierarchyVoter roleHierarchyVoter() {\r\n\t  return new RoleHierarchyVoter(roleHierarchy());\r\n\t}\r\n\r\nGlobalMethodSecurityConfig\r\n\r\n    @Configuration\r\n    public class GlobalMethodSecurityConfig extends GlobalMethodSecurityConfiguration {\r\n\r\n\t@Autowired\r\n\tprivate RoleHierarchy roleHierarchy;\r\n\t@Autowired\r\n\tApplicationContext applicationContext; \r\n\r\n\t@Override\r\n\tprotected MethodSecurityExpressionHandler createExpressionHandler() {\r\n\t\tSystem.out.println(&quot;Method Security configured&quot;);\r\n\t\tDefaultMethodSecurityExpressionHandler expressionHandler = new DefaultMethodSecurityExpressionHandler();\r\n\t\texpressionHandler.setApplicationContext(applicationContext);\r\n\t\texpressionHandler.setRoleHierarchy(roleHierarchy);\r\n\t\treturn expressionHandler;\r\n\t}\r\n}\r\n\r\nNow, I noticed the method createExpressionHandler() never gets called. That is probably because I have put the annotation @EnableGlobalMethodSecurity in the Application class ?\r\nIf I put the annotation on the GlobalMethodSecurityConfig class, then the method gets called, but I get an exception when I run the program, which says :\r\n\r\n    Exception in thread &quot;main&quot; org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;defaultServletHandlerMapping&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerMapping]: Factory method &#39;defaultServletHandlerMapping&#39; threw exception; nested exception is java.lang.IllegalArgumentException: A ServletContext is required to configure default servlet handling\r\n\r\nI am unable to figure out what is it that I am doing wrong here. Please help.\r\n\r\n\r\nEDIT 1-------------\r\n\r\nOkay, I think I have some idea, what is going on. Spring Security filters need to be configured quite early. So, probably moving the creation of RoleHierarchy Bean to a separate Configuration file will solve the problem. I just did that and I&#39;m able to compile and run the code successfully.I have autowired RoleHierarchy in the other Configuration classes. The custom role, ROLE_MOD works too. However, the issue is not solved yet.\r\n\r\nSince ROLE_MOD is above ROLE_USER in the hierarchy, shouldn&#39;t a user having ROLE_MOD be eligible to access a method having access for a ROLE_USER ?\r\n\r\n    @PreAuthorize(&quot;hasRole(&#39;ROLE_USER&#39;)&quot;)\r\n\r\nThis does not work for a user with ROLE_MOD, and I get an AccessDeniedException. I wonder if this is the correct way of configuring custom role-hierarchy at all. Please help me.\r\n\r\nEDIT 2-------------\r\n\r\nOkay, I made a little change to the way I was defining the custom role hierarchy.\r\nI changed it to :\r\n\r\n    roleHierarchy.setHierarchy(&quot;ROLE_ADMIN &gt; ROLE_MOD and ROLE_MOD &gt; ROLE_USER and ROLE_USER &gt; ROLE_GUEST&quot;);\r\n\r\nNow everything works! Thanks for giving me a space for thinking out loud!\r\n    ","title":"Custom RoleHierarchy not working with Method Security in Spring Boot Web Application","body":"<p>I am creating a custom role hierarchy and trying to use it with both web based security and method level security. This is a Spring Boot Web Application.</p>\n\n<p>My configuration files :</p>\n\n<pre><code>@SpringBootApplication\n@EnableGlobalMethodSecurity(securedEnabled=true,prePostEnabled=true)\npublic class Application {\n\n  public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n  }\n}\n</code></pre>\n\n<p>SecurityConfig : </p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n@Autowired\nprivate UserDetailsService userDetailsService;\n\n@Autowired\nApplicationContext applicationContext;\n\n@Override\npublic void configure(WebSecurity web) throws Exception {\n    web\n        .ignoring()\n            .antMatchers(\"/resources/**\");\n}\n@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http.csrf().disable()\n        .formLogin()\n            .loginPage(\"/signin.html\")\n            .loginProcessingUrl(\"/signin/authenticate\")\n            .failureUrl(\"/signin?param.error=bad_credentials\")\n        .and()\n            .logout()\n                .logoutUrl(\"/signout\")\n                .deleteCookies(\"JSESSIONID\")\n        .and()\n            .authorizeRequests()\n                .expressionHandler(webExpressionHandler())\n                .antMatchers(\"/signin**\",\"/user/**\",\"/admin/**\", \"/favicon.ico\", \"/resources/**\", \"/auth/**\", \"/signin/**\", \"/signup/**\").permitAll()\n                .antMatchers(\"/doc/**\").hasRole(\"MOD\").anyRequest().authenticated()\n        .and()\n            .apply(springSocialConfigurer())        \n        .and()\n            .rememberMe();\n}\n//Some more code for Spring Social integration\n@Bean\npublic RoleHierarchy roleHierarchy() {\n    RoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\n    roleHierarchy.setHierarchy(\"ROLE_ADMIN &gt; ROLE_MOD &gt; ROLE_USER &gt; ROLE_GUEST\");\n    return roleHierarchy;\n}\n\nprivate SecurityExpressionHandler&lt;FilterInvocation&gt; webExpressionHandler() {\n    DefaultWebSecurityExpressionHandler defaultWebSecurityExpressionHandler = new DefaultWebSecurityExpressionHandler();\n    defaultWebSecurityExpressionHandler.setApplicationContext(applicationContext);\n    defaultWebSecurityExpressionHandler.setRoleHierarchy(roleHierarchy());\n    return defaultWebSecurityExpressionHandler;\n}\n\n@Bean\npublic RoleHierarchyVoter roleHierarchyVoter() {\n  return new RoleHierarchyVoter(roleHierarchy());\n}\n</code></pre>\n\n<p>GlobalMethodSecurityConfig</p>\n\n<pre><code>@Configuration\npublic class GlobalMethodSecurityConfig extends GlobalMethodSecurityConfiguration {\n\n@Autowired\nprivate RoleHierarchy roleHierarchy;\n@Autowired\nApplicationContext applicationContext; \n\n@Override\nprotected MethodSecurityExpressionHandler createExpressionHandler() {\n    System.out.println(\"Method Security configured\");\n    DefaultMethodSecurityExpressionHandler expressionHandler = new DefaultMethodSecurityExpressionHandler();\n    expressionHandler.setApplicationContext(applicationContext);\n    expressionHandler.setRoleHierarchy(roleHierarchy);\n    return expressionHandler;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Now, I noticed the method createExpressionHandler() never gets called. That is probably because I have put the annotation @EnableGlobalMethodSecurity in the Application class ?\nIf I put the annotation on the GlobalMethodSecurityConfig class, then the method gets called, but I get an exception when I run the program, which says :</p>\n\n<pre><code>Exception in thread \"main\" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'defaultServletHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerMapping]: Factory method 'defaultServletHandlerMapping' threw exception; nested exception is java.lang.IllegalArgumentException: A ServletContext is required to configure default servlet handling\n</code></pre>\n\n<p>I am unable to figure out what is it that I am doing wrong here. Please help.</p>\n\n<p>EDIT 1-------------</p>\n\n<p>Okay, I think I have some idea, what is going on. Spring Security filters need to be configured quite early. So, probably moving the creation of RoleHierarchy Bean to a separate Configuration file will solve the problem. I just did that and I'm able to compile and run the code successfully.I have autowired RoleHierarchy in the other Configuration classes. The custom role, ROLE_MOD works too. However, the issue is not solved yet.</p>\n\n<p>Since ROLE_MOD is above ROLE_USER in the hierarchy, shouldn't a user having ROLE_MOD be eligible to access a method having access for a ROLE_USER ?</p>\n\n<pre><code>@PreAuthorize(\"hasRole('ROLE_USER')\")\n</code></pre>\n\n<p>This does not work for a user with ROLE_MOD, and I get an AccessDeniedException. I wonder if this is the correct way of configuring custom role-hierarchy at all. Please help me.</p>\n\n<p>EDIT 2-------------</p>\n\n<p>Okay, I made a little change to the way I was defining the custom role hierarchy.\nI changed it to :</p>\n\n<pre><code>roleHierarchy.setHierarchy(\"ROLE_ADMIN &gt; ROLE_MOD and ROLE_MOD &gt; ROLE_USER and ROLE_USER &gt; ROLE_GUEST\");\n</code></pre>\n\n<p>Now everything works! Thanks for giving me a space for thinking out loud!</p>\n"},{"tags":["java","angular"],"comments":[{"owner":{"account_id":2781281,"reputation":2399,"user_id":2393789,"accept_rate":62,"display_name":"onetwo12"},"score":0,"creation_date":1648050386,"post_id":71589648,"comment_id":126527364,"body_markdown":"I think this guy is doing something similar https://stackoverflow.com/questions/71589565/sseemitter-complete-when-refresh-the-page-in-browser","body":"I think this guy is doing something similar <a href=\"https://stackoverflow.com/questions/71589565/sseemitter-complete-when-refresh-the-page-in-browser\" title=\"sseemitter complete when refresh the page in browser\">stackoverflow.com/questions/71589565/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2258060,"reputation":3689,"user_id":1988798,"accept_rate":83,"display_name":"Gaurav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1648048947,"creation_date":1648048947,"answer_id":71589795,"question_id":71589648,"body_markdown":"You got to create an end point for this. \r\nA RESTful application only interacts with front end via end points only.\r\n\r\nBy the way, I am also assuming that your application would also be sending API  calls to perform action. These actions themselves can print additional informaation like - User X shooped for product Y, so you don&#39;t always have to log via front end.\r\n\r\nTLDR: Yes. An end point is required. Though you can buffer them at front end, send it one go.","title":"Send info from Angular to Java to use LOGGER.info for logging purposes","body":"<p>You got to create an end point for this.\nA RESTful application only interacts with front end via end points only.</p>\n<p>By the way, I am also assuming that your application would also be sending API  calls to perform action. These actions themselves can print additional informaation like - User X shooped for product Y, so you don't always have to log via front end.</p>\n<p>TLDR: Yes. An end point is required. Though you can buffer them at front end, send it one go.</p>\n"}],"owner":{"account_id":898926,"reputation":355,"user_id":935578,"accept_rate":74,"display_name":"crunch"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71589795,"answer_count":1,"score":0,"last_activity_date":1648048947,"creation_date":1648048323,"question_id":71589648,"body_markdown":"At first I had hoped to skate by, by using a console.log(); in the ui, but as I suspected, I don&#39;t think our logging, even though the UI is a service, will catch it.\r\n\r\nI&#39;m searching, not finding a way to do this, short of possibly an npm library like ngx-logger, but unclear if that will work, or just creating an entire new endpoint for this express purpose, so thought I&#39;d ask first:\r\n\r\nI need to send some info from a button click in Angular (9, if it makes a difference) to Java to use it in a LOGGER.info for logging purposes - is there an easy way of doing this, or do I need to create an endpoint, etc..?","title":"Send info from Angular to Java to use LOGGER.info for logging purposes","body":"<p>At first I had hoped to skate by, by using a console.log(); in the ui, but as I suspected, I don't think our logging, even though the UI is a service, will catch it.</p>\n<p>I'm searching, not finding a way to do this, short of possibly an npm library like ngx-logger, but unclear if that will work, or just creating an entire new endpoint for this express purpose, so thought I'd ask first:</p>\n<p>I need to send some info from a button click in Angular (9, if it makes a difference) to Java to use it in a LOGGER.info for logging purposes - is there an easy way of doing this, or do I need to create an endpoint, etc..?</p>\n"},{"tags":["java","junit","mocking","mockito"],"answers":[{"tags":[],"owner":{"account_id":4425261,"reputation":632,"user_id":3603906,"display_name":"artie"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1514962124,"creation_date":1514962124,"answer_id":48072531,"question_id":48070184,"body_markdown":"There are couple of options instead of creating new instance of A inside of `run`:\r\n\r\n 1. Pass instance of A in the constructor, like\r\n\r\n        class B {\r\n            private A a;\r\n            B(A a) {\r\n                this.a = a;\r\n            }\r\n            void run() {\r\n                a.test(&quot;something&quot;);\r\n            }\r\n        }\r\n\r\n So your test code will change to\r\n\r\n        B b = new B(mockA);\r\n        b.run();\r\n\r\n 2. Create setter method:\r\n\r\n        class B {\r\n            private A a;\r\n            void setA(A a) {\r\n                this.a = a;\r\n            }\r\n            void run() {\r\n                a.test(&quot;something&quot;);\r\n            }\r\n        }\r\n\r\n So your test code will change to\r\n\r\n        B b = new B();\r\n        b.setA(mockA);\r\n        b.run();\r\n\r\nUsually second method is preferred.","title":"How to use mock object to replace the original object in internal code section?","body":"<p>There are couple of options instead of creating new instance of A inside of <code>run</code>:</p>\n\n<ol>\n<li><p>Pass instance of A in the constructor, like</p>\n\n<pre><code>class B {\n    private A a;\n    B(A a) {\n        this.a = a;\n    }\n    void run() {\n        a.test(\"something\");\n    }\n}\n</code></pre>\n\n<p>So your test code will change to</p>\n\n<pre><code>B b = new B(mockA);\nb.run();\n</code></pre></li>\n<li><p>Create setter method:</p>\n\n<pre><code>class B {\n    private A a;\n    void setA(A a) {\n        this.a = a;\n    }\n    void run() {\n        a.test(\"something\");\n    }\n}\n</code></pre>\n\n<p>So your test code will change to</p>\n\n<pre><code>B b = new B();\nb.setA(mockA);\nb.run();\n</code></pre></li>\n</ol>\n\n<p>Usually second method is preferred.</p>\n"}],"owner":{"account_id":10848427,"reputation":13,"user_id":7977079,"display_name":"chrisstaryu8"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2774,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":48072531,"answer_count":1,"score":0,"last_activity_date":1648048798,"creation_date":1514944441,"question_id":48070184,"body_markdown":"I met this problem when I tried to execute some JUnit mockito tests.\r\n\r\nTo make it easy to understand my question, I will provide an example below:\r\n\r\n\r\n    Class A {\r\n       public String test(String para1) {\r\n           //...do whatever stuff\r\n           return para1;\r\n       }\r\n    }\r\n    \r\n    Class B {\r\n       public void run() {\r\n           A a = new A();\r\n           String result = a.test(&quot;test&quot;);\r\n           System.out.println(result);\r\n       }\r\n    }\r\n    \r\n    when(mockA.test(anyString()).thenReturn(&quot;mockResult&quot;);\r\n    \r\n    A mockA = mock(A.class);\r\n    \r\n    //Instead of doing mockA.test(), I do the following:\r\n    B b = new B();\r\n    b.run();\r\n\r\nThe question is, **how can I replace the &quot;a&quot; object in B&#39;s run() method with the &quot;mockA&quot; object?** This way I can start the code execution from b.run() and also utilize the mock object inside of the code execution process.\r\n\r\nAny help would be greatly appreciated! :P\r\n","title":"How to use mock object to replace the original object in internal code section?","body":"<p>I met this problem when I tried to execute some JUnit mockito tests.</p>\n\n<p>To make it easy to understand my question, I will provide an example below:</p>\n\n<pre><code>Class A {\n   public String test(String para1) {\n       //...do whatever stuff\n       return para1;\n   }\n}\n\nClass B {\n   public void run() {\n       A a = new A();\n       String result = a.test(\"test\");\n       System.out.println(result);\n   }\n}\n\nwhen(mockA.test(anyString()).thenReturn(\"mockResult\");\n\nA mockA = mock(A.class);\n\n//Instead of doing mockA.test(), I do the following:\nB b = new B();\nb.run();\n</code></pre>\n\n<p>The question is, <strong>how can I replace the \"a\" object in B's run() method with the \"mockA\" object?</strong> This way I can start the code execution from b.run() and also utilize the mock object inside of the code execution process.</p>\n\n<p>Any help would be greatly appreciated! :P</p>\n"},{"tags":["java","micronaut","graalvm"],"answers":[{"tags":[],"owner":{"account_id":2600552,"reputation":426,"user_id":2253088,"display_name":"Martin Jes Rasmussen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648048791,"creation_date":1647600572,"answer_id":71525904,"question_id":71008037,"body_markdown":"I know this question has been asked a while ago, but after having spent some hours figuring out the solution to a very similar problem, I thought I&#39;d share the solution here.\r\n\r\nI found that apparently the graal compiler throws any private fields away, thus throwing an error saying something like:\r\n\r\n    Caused by: java.lang.NoSuchFieldError: No field &#39;value1&#39; found for type: com.example.ConferenceConfig\r\n\r\nThe solution that worked for me, was to annotate the classes in question with @ReflectiveAccess.\r\n\r\nHowever other solutions also work; use constructor injection or configure src/main/graal/reflect.json\r\n\r\n    @Factory\r\n    public class ConferenceConfig {\r\n        private final String value1;\r\n    \r\n        public ConferenceConfig(@Value(&quot;${my.value1}&quot;) final String value1) {\r\n            this.value1 = value1;\r\n        }\r\n    \r\n        @Context\r\n        public ConferenceConfigBean confBean() {\r\n            return new ConferenceConfigBean(value1);\r\n        }\r\n    \r\n        public record ConferenceConfigBean(String value) {\r\n            public String getValue() {\r\n                return value;\r\n            }\r\n        }\r\n    }\r\n\r\nThis also works for records:\r\n\r\n        @Singleton\r\n        public record ConferenceService(@Value(&quot;${my.value1}&quot;) String value1) {\r\n        \r\n            private static final List&lt;Conference&gt; CONFERENCES = Arrays.asList(\r\n                    new Conference(&quot;Greach&quot;),\r\n                    new Conference(&quot;GR8Conf EU&quot;),\r\n                    new Conference(&quot;Micronaut Summit&quot;),\r\n                    new Conference(&quot;Devoxx Belgium&quot;),\r\n                    new Conference(&quot;Oracle Code One&quot;),\r\n                    new Conference(&quot;CommitConf&quot;),\r\n                    new Conference(&quot;Codemotion Madrid&quot;)\r\n            );\r\n        public Conference randomConf() {\r\n            return CONFERENCES.get(new Random().nextInt(CONFERENCES.size()));\r\n        }\r\n    \r\n        public String getV1() {\r\n            return value1;\r\n        }\r\n    }\r\n\r\nAnother ","title":"Micronaut native image ignores properties","body":"<p>I know this question has been asked a while ago, but after having spent some hours figuring out the solution to a very similar problem, I thought I'd share the solution here.</p>\n<p>I found that apparently the graal compiler throws any private fields away, thus throwing an error saying something like:</p>\n<pre><code>Caused by: java.lang.NoSuchFieldError: No field 'value1' found for type: com.example.ConferenceConfig\n</code></pre>\n<p>The solution that worked for me, was to annotate the classes in question with @ReflectiveAccess.</p>\n<p>However other solutions also work; use constructor injection or configure src/main/graal/reflect.json</p>\n<pre><code>@Factory\npublic class ConferenceConfig {\n    private final String value1;\n\n    public ConferenceConfig(@Value(&quot;${my.value1}&quot;) final String value1) {\n        this.value1 = value1;\n    }\n\n    @Context\n    public ConferenceConfigBean confBean() {\n        return new ConferenceConfigBean(value1);\n    }\n\n    public record ConferenceConfigBean(String value) {\n        public String getValue() {\n            return value;\n        }\n    }\n}\n</code></pre>\n<p>This also works for records:</p>\n<pre><code>    @Singleton\n    public record ConferenceService(@Value(&quot;${my.value1}&quot;) String value1) {\n    \n        private static final List&lt;Conference&gt; CONFERENCES = Arrays.asList(\n                new Conference(&quot;Greach&quot;),\n                new Conference(&quot;GR8Conf EU&quot;),\n                new Conference(&quot;Micronaut Summit&quot;),\n                new Conference(&quot;Devoxx Belgium&quot;),\n                new Conference(&quot;Oracle Code One&quot;),\n                new Conference(&quot;CommitConf&quot;),\n                new Conference(&quot;Codemotion Madrid&quot;)\n        );\n    public Conference randomConf() {\n        return CONFERENCES.get(new Random().nextInt(CONFERENCES.size()));\n    }\n\n    public String getV1() {\n        return value1;\n    }\n}\n</code></pre>\n<p>Another</p>\n"}],"owner":{"account_id":3509735,"reputation":979,"user_id":2970627,"accept_rate":35,"display_name":"Alex Bondar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":396,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1648048791,"creation_date":1644156875,"question_id":71008037,"body_markdown":"I am trying to build graalvm native image of my micronaut application. I see the werid issue that some of the properties from application.yaml are ignored, though when I run the app via \r\n\r\n&gt; ./gradlew run\r\n\r\nall works fine. \r\n\r\nHere is my yaml\r\n\r\n    micronaut:\r\n      application:\r\n        name: phonebook\r\n      caches:\r\n        phonebook:\r\n          charset: UTF-8\r\n      router:\r\n        static-resources:\r\n          swagger:\r\n            paths: classpath:META-INF/swagger\r\n            mapping: /swagger/**\r\n          swagger-ui:\r\n            paths: classpath:META-INF/swagger/views/swagger-ui\r\n            mapping: /doc/**\r\n    \r\n    endpoints:\r\n      caches:\r\n        enabled: true\r\n        # sensitive: false\r\n      env:\r\n        enabled: true\r\n       # sensitive: false\r\n    \r\n    fauna:\r\n      secret: &#39;${FAUNA_KEY}&#39;\r\n      endpoint: https://db.eu.fauna.com:443\r\n\r\nHere is how I read the properties in the class\r\n \r\n\r\n    @Value(&quot;${fauna.secret}&quot;)\r\n      private String faunaKey;\r\n    \r\n    @Value(&quot;${fauna.endpoint}&quot;)\r\n      private String faunaEndpoint;\r\n\r\nWhat could cause an issue?","title":"Micronaut native image ignores properties","body":"<p>I am trying to build graalvm native image of my micronaut application. I see the werid issue that some of the properties from application.yaml are ignored, though when I run the app via</p>\n<blockquote>\n<p>./gradlew run</p>\n</blockquote>\n<p>all works fine.</p>\n<p>Here is my yaml</p>\n<pre><code>micronaut:\n  application:\n    name: phonebook\n  caches:\n    phonebook:\n      charset: UTF-8\n  router:\n    static-resources:\n      swagger:\n        paths: classpath:META-INF/swagger\n        mapping: /swagger/**\n      swagger-ui:\n        paths: classpath:META-INF/swagger/views/swagger-ui\n        mapping: /doc/**\n\nendpoints:\n  caches:\n    enabled: true\n    # sensitive: false\n  env:\n    enabled: true\n   # sensitive: false\n\nfauna:\n  secret: '${FAUNA_KEY}'\n  endpoint: https://db.eu.fauna.com:443\n</code></pre>\n<p>Here is how I read the properties in the class</p>\n<pre><code>@Value(&quot;${fauna.secret}&quot;)\n  private String faunaKey;\n\n@Value(&quot;${fauna.endpoint}&quot;)\n  private String faunaEndpoint;\n</code></pre>\n<p>What could cause an issue?</p>\n"},{"tags":["java","arrays","string","char","println"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":3,"creation_date":1648048345,"post_id":71589614,"comment_id":126526354,"body_markdown":"About the `char[]`, here&#39;s why:https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/PrintStream.html#print(char%5B%5D)","body":"About the <code>char[]</code>, here&#39;s why:<a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/PrintStream.html#print(char%5B%5D)\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/17/docs/api/java.base/jav&zwnj;&#8203;a/io/&hellip;</a>"},{"owner":{"account_id":9544477,"reputation":174,"user_id":7091142,"display_name":"Komiii"},"score":0,"creation_date":1648048387,"post_id":71589614,"comment_id":126526374,"body_markdown":"This answer from Duncan Jones might be useful: https://stackoverflow.com/questions/29140402/how-do-i-print-my-java-object-without-getting-sometype2f92e0f4","body":"This answer from Duncan Jones might be useful: <a href=\"https://stackoverflow.com/questions/29140402/how-do-i-print-my-java-object-without-getting-sometype2f92e0f4\" title=\"how do i print my java object without getting sometype2f92e0f4\">stackoverflow.com/questions/29140402/&hellip;</a>"}],"owner":{"account_id":24661788,"reputation":1,"user_id":18557927,"display_name":"Unmesh Ahire"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1648049087,"answer_count":0,"score":0,"last_activity_date":1648048263,"creation_date":1648048213,"question_id":71589614,"body_markdown":"Currently, I&#39;m learning arrays in JAVA. when I was trying to print reference variable of Primitive and non-primitive data types, I was getting usual results (as I have thought I will get) but when I tried to print the reference variable of &#39;Char&#39; Datatype, I got characters back as a string result. can someone please explain why does it work like that? and plus if you know why the reference variable of string data type also gives different output as compared to others?\r\n\r\n    int[] arr1 = {1,2,3,4,5};\r\n    System.out.println(arr1); // Output : [I@e9e54c2\r\n    \r\n    char[] arr2 = {&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;,&#39;e&#39;};\r\n    System.out.println(arr2); // Output : abcde\r\n    \r\n    String[] arr3 = {&quot;Luke&quot;, &quot;Phill&quot;,&quot;Alex&quot;};\r\n    System.out.println(arr3); // Output : [Ljava.lang.String;@6d311334","title":"Why does printing statement returns string result while printing array reference variable of Char datatype in JAVA?","body":"<p>Currently, I'm learning arrays in JAVA. when I was trying to print reference variable of Primitive and non-primitive data types, I was getting usual results (as I have thought I will get) but when I tried to print the reference variable of 'Char' Datatype, I got characters back as a string result. can someone please explain why does it work like that? and plus if you know why the reference variable of string data type also gives different output as compared to others?</p>\n<pre><code>int[] arr1 = {1,2,3,4,5};\nSystem.out.println(arr1); // Output : [I@e9e54c2\n\nchar[] arr2 = {'a','b','c','d','e'};\nSystem.out.println(arr2); // Output : abcde\n\nString[] arr3 = {&quot;Luke&quot;, &quot;Phill&quot;,&quot;Alex&quot;};\nSystem.out.println(arr3); // Output : [Ljava.lang.String;@6d311334\n</code></pre>\n"},{"tags":["java","tomcat","garbage-collection","jvm"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":2,"creation_date":1648048273,"post_id":71589457,"comment_id":126526324,"body_markdown":"I don&#39;t think anybody can answer this with no details whatsoever.","body":"I don&#39;t think anybody can answer this with no details whatsoever."},{"owner":{"account_id":593875,"reputation":20383,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":0,"creation_date":1648147027,"post_id":71589457,"comment_id":126557296,"body_markdown":"Take a thread dump of the process while it&#39;s &quot;paused&quot;. The thread dump will tell you exactly what is happening at that time. You say you checked it; what did it say? All threads waiting for new requests? When you say &quot;pause&quot;, what _exactly_ do you mean? The response doesn&#39;t come back to the client? Hourglass cursor on the server? What kind of request? Simple GET? AJAX?","body":"Take a thread dump of the process while it&#39;s &quot;paused&quot;. The thread dump will tell you exactly what is happening at that time. You say you checked it; what did it say? All threads waiting for new requests? When you say &quot;pause&quot;, what <i>exactly</i> do you mean? The response doesn&#39;t come back to the client? Hourglass cursor on the server? What kind of request? Simple GET? AJAX?"}],"owner":{"account_id":24661944,"reputation":11,"user_id":18558069,"display_name":"Chayan Porwal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1648047555,"creation_date":1648047555,"question_id":71589457,"body_markdown":"Tomcat 8 pause for few minutes. Tomcat is not serving any request and response.\r\nWe have checked logs but not found any thing.\r\n\r\nAfter some time it will automatically started working.\r\n\r\nWe have checked logs but not found any thing.\r\nChecked thread dump but not found any thing.\r\n\r\nWe want to know the root cause of the issue and solution.","title":"Tomcat 8 pause while serving the request","body":"<p>Tomcat 8 pause for few minutes. Tomcat is not serving any request and response.\nWe have checked logs but not found any thing.</p>\n<p>After some time it will automatically started working.</p>\n<p>We have checked logs but not found any thing.\nChecked thread dump but not found any thing.</p>\n<p>We want to know the root cause of the issue and solution.</p>\n"},{"tags":["python","java","execution"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1648047420,"post_id":71589397,"comment_id":126525962,"body_markdown":"HINT: `cmd` is an array. You are currently passing **one** (**1**) `String` instead of an array. There are simpler ways to invoke (a) python (b) an external process `ProcessBuilder`","body":"HINT: <code>cmd</code> is an array. You are currently passing <b>one</b> (<b>1</b>) <code>String</code> instead of an array. There are simpler ways to invoke (a) python (b) an external process <code>ProcessBuilder</code>"},{"owner":{"account_id":963516,"reputation":10188,"user_id":987358,"accept_rate":40,"display_name":"Michael Butscher"},"score":0,"creation_date":1648047520,"post_id":71589397,"comment_id":126526004,"body_markdown":"Have you tried to call the Python script directly from command line?","body":"Have you tried to call the Python script directly from command line?"},{"owner":{"account_id":24661879,"reputation":1,"user_id":18558010,"display_name":"johnny wilkinson"},"score":0,"creation_date":1648048032,"post_id":71589397,"comment_id":126526216,"body_markdown":"finally i will not use cmd.","body":"finally i will not use cmd."},{"owner":{"account_id":24661879,"reputation":1,"user_id":18558010,"display_name":"johnny wilkinson"},"score":0,"creation_date":1648048054,"post_id":71589397,"comment_id":126526224,"body_markdown":"how can i call the python script directly from command line ?","body":"how can i call the python script directly from command line ?"}],"owner":{"account_id":24661879,"reputation":1,"user_id":18558010,"display_name":"johnny wilkinson"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1648047304,"creation_date":1648047304,"question_id":71589397,"body_markdown":"I&#39;m trying to integrate a python script in java. I want my java program to be able to execute my python script\r\n\r\nI tried to code a class named PythonCaller made to execute a test python script\r\n\r\n```\r\npackage pythontest;\r\n\r\nimport java.io.*;\r\npublic class PythonCaller {\r\n\r\n\tpublic static void main(String[] args) throws IOException{\r\n\t\t// TODO Auto-generated method stub\r\n\t\t\t// set up the command and parameter\r\n\t\t\tString pythonScriptPath = &quot;D:\\\\Programmes\\\\test.py&quot;;\r\n\t\t\tString[] cmd = new String[2];\r\n\t\t\tcmd[0] = &quot;D:\\\\Programmes\\\\python.exe&quot;; // check version of installed python: python -V\r\n\t\t\tcmd[1] = pythonScriptPath;\r\n\t\t\t \r\n\t\t\t// create runtime to execute external command\r\n\t\r\n\t\t\tProcess pr = Runtime.getRuntime().exec(&quot;python D:/Documents/T&#233;l&#233;com/Programmation/workspace python/test.py&quot;);\r\n\t\t\tSystem.out.println(&quot;adhi&quot;);\r\n\t\t\t// retrieve output from python script\r\n\t\t\tBufferedReader bfr = new BufferedReader(new InputStreamReader(pr.getInputStream()));\r\n\t\t\tSystem.out.println(bfr.readLine());\r\n\t\t\tString line = &quot;&quot;;\r\n\t\t\ttry {\r\n\t\t\t\twhile((line = bfr.readLine()) != null) {\r\n\r\n\t\t\t// display each output line form python script\r\n\t\t\tSystem.out.println(line);\r\n\t\t\tSystem.out.println(&quot;daiuh&quot;);\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t\t\tcatch(IOException e) {\r\n\t\t\t\t\tSystem.out.println(&quot;Exception in reading output&quot; + e.toString());\r\n\t\t\t\t}\r\n\t\t\t\r\n\t}\r\n\t}\r\n```\r\n\r\nWhen i execute it, it appears that bfr.readLine() returns null\r\n\r\nHere is the script in test.py :\r\n\r\n```\r\nprint(&quot;aiujadh&quot;)\r\nprint(&quot;f&quot;)\r\n```\r\n\r\nwhat i dont understand is that i did tests with the exact same code before, and it worked. I changed it because it failed to read the lines that were not &quot;prints&quot;. Then i moved back to the working code, and it doesnt work anymore. I looked at similar topics on the internet, and i do not understand why my code doesn&#39;t work.\r\nCan somebody try to explain me pls ?","title":"How can i execute a python script using java?","body":"<p>I'm trying to integrate a python script in java. I want my java program to be able to execute my python script</p>\n<p>I tried to code a class named PythonCaller made to execute a test python script</p>\n<pre><code>package pythontest;\n\nimport java.io.*;\npublic class PythonCaller {\n\n    public static void main(String[] args) throws IOException{\n        // TODO Auto-generated method stub\n            // set up the command and parameter\n            String pythonScriptPath = &quot;D:\\\\Programmes\\\\test.py&quot;;\n            String[] cmd = new String[2];\n            cmd[0] = &quot;D:\\\\Programmes\\\\python.exe&quot;; // check version of installed python: python -V\n            cmd[1] = pythonScriptPath;\n             \n            // create runtime to execute external command\n    \n            Process pr = Runtime.getRuntime().exec(&quot;python D:/Documents/Télécom/Programmation/workspace python/test.py&quot;);\n            System.out.println(&quot;adhi&quot;);\n            // retrieve output from python script\n            BufferedReader bfr = new BufferedReader(new InputStreamReader(pr.getInputStream()));\n            System.out.println(bfr.readLine());\n            String line = &quot;&quot;;\n            try {\n                while((line = bfr.readLine()) != null) {\n\n            // display each output line form python script\n            System.out.println(line);\n            System.out.println(&quot;daiuh&quot;);\n            }\n            }\n                catch(IOException e) {\n                    System.out.println(&quot;Exception in reading output&quot; + e.toString());\n                }\n            \n    }\n    }\n</code></pre>\n<p>When i execute it, it appears that bfr.readLine() returns null</p>\n<p>Here is the script in test.py :</p>\n<pre><code>print(&quot;aiujadh&quot;)\nprint(&quot;f&quot;)\n</code></pre>\n<p>what i dont understand is that i did tests with the exact same code before, and it worked. I changed it because it failed to read the lines that were not &quot;prints&quot;. Then i moved back to the working code, and it doesnt work anymore. I looked at similar topics on the internet, and i do not understand why my code doesn't work.\nCan somebody try to explain me pls ?</p>\n"},{"tags":["java","spring-websocket","activemq-artemis","sockjs"],"comments":[{"owner":{"account_id":10233123,"reputation":158,"user_id":7553069,"display_name":"Deng"},"score":0,"creation_date":1646285204,"post_id":71332227,"comment_id":126086699,"body_markdown":"I didn&#39;t inspect my network, I used localhost, not any WAN or LAN. did localhost also have this problem?","body":"I didn&#39;t inspect my network, I used localhost, not any WAN or LAN. did localhost also have this problem?"},{"owner":{"account_id":10233123,"reputation":158,"user_id":7553069,"display_name":"Deng"},"score":0,"creation_date":1646379362,"post_id":71332227,"comment_id":126112964,"body_markdown":"I set the log level to trace and the server exactly don&#39;t receive the heartbeat from the client in 20s (the heartbeat is 10s at a time) then the MQ broke the connection. So, maybe it&#39;s the problem of the client, maybe the CPU spikes, this may need more tests to find the problem","body":"I set the log level to trace and the server exactly don&#39;t receive the heartbeat from the client in 20s (the heartbeat is 10s at a time) then the MQ broke the connection. So, maybe it&#39;s the problem of the client, maybe the CPU spikes, this may need more tests to find the problem"},{"owner":{"account_id":10233123,"reputation":158,"user_id":7553069,"display_name":"Deng"},"score":0,"creation_date":1646380967,"post_id":71332227,"comment_id":126113410,"body_markdown":"In my opinion, since the client cannot guarantee a continuous and stable heartbeat, the server is responsible for sending the heartbeat to MQ. The client only needs to keep the connection but does not need to send a heartbeat to ensure whether it is online. After a certain period, the server initiates an initiative to ask whether the client is available  If the client disconnects, the server stops sending heartbeat messages using the connection information.","body":"In my opinion, since the client cannot guarantee a continuous and stable heartbeat, the server is responsible for sending the heartbeat to MQ. The client only needs to keep the connection but does not need to send a heartbeat to ensure whether it is online. After a certain period, the server initiates an initiative to ask whether the client is available  If the client disconnects, the server stops sending heartbeat messages using the connection information."},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1688749068,"post_id":71332227,"comment_id":135120363,"body_markdown":"Did my answer address your question? If so, please mark it as correct to help other folks who have this same question in the future. Thanks!","body":"Did my answer address your question? If so, please mark it as correct to help other folks who have this same question in the future. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646413981,"creation_date":1646413981,"answer_id":71354901,"question_id":71332227,"body_markdown":"Your opinion does not conform to the STOMP specification. If the client cannot guarantee a heart-beat according to the value it sends in the `heart-beat` header of the `CONNECT` frame then it should send a **different value**. In your case you&#39;re sending `10000` for the client heart-beat. Therefore, the broker will expect heart-beats from the client based on this value, and if it doesn&#39;t receive those heart-beats then it will disconnect that client. If you don&#39;t want the client to send heart-beats then you should send `0`, e.g. `heart-beat:0,10000`.\r\n\r\nAlso, the broker reports that it closed the client&#39;s connection after &quot;20,000ms&quot; because by default it will multiple the client heart-beat value by `2` (e.g. `10000 * 2 = 20000`). It does this because the [STOMP specification][1] recommends incorporating a margin for timing errors:\r\n\r\n&gt; because of timing inaccuracies, the receiver SHOULD be tolerant and take into account an error margin\r\n\r\n\r\n  [1]: https://stomp.github.io/stomp-specification-1.2.html#Heart-beating","title":"Spring Boot STOMP lost connection after a few minutes","body":"<p>Your opinion does not conform to the STOMP specification. If the client cannot guarantee a heart-beat according to the value it sends in the <code>heart-beat</code> header of the <code>CONNECT</code> frame then it should send a <strong>different value</strong>. In your case you're sending <code>10000</code> for the client heart-beat. Therefore, the broker will expect heart-beats from the client based on this value, and if it doesn't receive those heart-beats then it will disconnect that client. If you don't want the client to send heart-beats then you should send <code>0</code>, e.g. <code>heart-beat:0,10000</code>.</p>\n<p>Also, the broker reports that it closed the client's connection after &quot;20,000ms&quot; because by default it will multiple the client heart-beat value by <code>2</code> (e.g. <code>10000 * 2 = 20000</code>). It does this because the <a href=\"https://stomp.github.io/stomp-specification-1.2.html#Heart-beating\" rel=\"nofollow noreferrer\">STOMP specification</a> recommends incorporating a margin for timing errors:</p>\n<blockquote>\n<p>because of timing inaccuracies, the receiver SHOULD be tolerant and take into account an error margin</p>\n</blockquote>\n"}],"owner":{"account_id":10233123,"reputation":158,"user_id":7553069,"display_name":"Deng"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2948,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1648047261,"creation_date":1646282517,"question_id":71332227,"body_markdown":"I am using ActiveMQ Artemis, SockJS, StompJS, Spring Boot STOMP. \r\nWhen establishing the connection the client sends heart-beat info:\r\n```\r\n&lt;&lt;&lt; CONNECTED\r\nversion:1.1\r\nsession:1913360c\r\nserver:ActiveMQ-Artemis/2.20.0 ActiveMQ Artemis Messaging Engine\r\nheart-beat:10000,10000\r\nuser-name:qqq\r\n```\r\nThe heartbeat is normal, but after several minutes the connection is closed by ActiveMQ. Here&#39;s the corresponding logs:\r\n```\r\n2022-03-03 09:30:09,718 WARN  [org.apache.activemq.artemis.core.protocol.stomp] AMQ332069: Sent ERROR frame to STOMP client /127.0.0.1:1432: AMQ229014: Did not receive data from /127.0.0.1:1432 within the 20,000ms connection TTL. The connection will now be closed.\r\n2022-03-03 09:30:09,719 WARN  [org.apache.activemq.artemis.core.server] AMQ222067: Connection failure has been detected: AMQ229014: Did not receive data from /127.0.0.1:1432 within the 20,000ms connection TTL. The connection will now be closed. [code=CONNECTION_TIMEDOUT]\r\n2022-03-03 09:30:09,719 WARN  [org.apache.activemq.artemis.core.server] AMQ222061: Client connection failed, clearing up resources for session aa0cdab7-9a90-11ec-8b3d-6c02e05f997e\r\n2022-03-03 09:30:09,725 WARN  [org.apache.activemq.artemis.core.server] AMQ222107: Cleared up resources for session aa0cdab7-9a90-11ec-8b3d-6c02e05f997e\r\n2022-03-03 09:58:45,120 WARN  [org.apache.activemq.artemis.core.protocol.stomp] AMQ332069: Sent ERROR frame to STOMP client /127.0.0.1:1922: AMQ229014: Did not receive data from /127.0.0.1:1922 within the 20,000ms connection TTL. The connection will now be closed.\r\n2022-03-03 09:58:45,122 WARN  [org.apache.activemq.artemis.core.server] AMQ222067: Connection failure has been detected: AMQ229014: Did not receive data from /127.0.0.1:1922 within the 20,000ms connection TTL. The connection will now be closed. [code=CONNECTION_TIMEDOUT]\r\n2022-03-03 09:58:45,122 WARN  [org.apache.activemq.artemis.core.server] AMQ222061: Client connection failed, clearing up resources for session d2309f42-9a91-11ec-8b3d-6c02e05f997e\r\n2022-03-03 09:58:45,125 WARN  [org.apache.activemq.artemis.core.server] AMQ222107: Cleared up resources for session d2309f42-9a91-11ec-8b3d-6c02e05f997e\r\n2022-03-03 10:14:16,758 WARN  [org.apache.activemq.artemis.core.protocol.stomp] AMQ332069: Sent ERROR frame to STOMP client /127.0.0.1:4003: AMQ229014: Did not receive data from /127.0.0.1:4003 within the 20,000ms connection TTL. The connection will now be closed.\r\n2022-03-03 10:14:16,759 WARN  [org.apache.activemq.artemis.core.server] AMQ222067: Connection failure has been detected: AMQ229014: Did not receive data from /127.0.0.1:4003 within the 20,000ms connection TTL. The connection will now be closed. [code=CONNECTION_TIMEDOUT]\r\n2022-03-03 10:14:16,759 WARN  [org.apache.activemq.artemis.core.server] AMQ222061: Client connection failed, clearing up resources for session 939d58fd-9a95-11ec-8b3d-6c02e05f997e\r\n2022-03-03 10:14:16,763 WARN  [org.apache.activemq.artemis.core.server] AMQ222107: Cleared up resources for session 939d58fd-9a95-11ec-8b3d-6c02e05f997e\r\n2022-03-03 10:14:53,112 WARN  [org.apache.activemq.artemis.core.protocol.stomp] AMQ332069: Sent ERROR frame to STOMP client null: null\r\n2022-03-03 10:14:53,113 WARN  [org.apache.activemq.artemis.core.server] AMQ222067: Connection failure has been detected: null [code=REMOTE_DISCONNECT]\r\n2022-03-03 10:14:53,123 WARN  [org.apache.activemq.artemis.core.protocol.stomp] AMQ332069: Sent ERROR frame to STOMP client null: null\r\n2022-03-03 10:14:53,123 WARN  [org.apache.activemq.artemis.core.server] AMQ222067: Connection failure has been detected: null [code=REMOTE_DISCONNECT]\r\n2022-03-03 10:21:34,506 WARN  [org.apache.activemq.artemis.core.protocol.stomp] AMQ332069: Sent ERROR frame to STOMP client /127.0.0.1:5140: AMQ229014: Did not receive data from /127.0.0.1:5140 within the 20,000ms connection TTL. The connection will now be closed.\r\n2022-03-03 10:21:34,506 WARN  [org.apache.activemq.artemis.core.server] AMQ222067: Connection failure has been detected: AMQ229014: Did not receive data from /127.0.0.1:5140 within the 20,000ms connection TTL. The connection will now be closed. [code=CONNECTION_TIMEDOUT]\r\n2022-03-03 10:21:34,507 WARN  [org.apache.activemq.artemis.core.server] AMQ222061: Client connection failed, clearing up resources for session ce63aa1a-9a97-11ec-8b3d-6c02e05f997e\r\n2022-03-03 10:21:34,510 WARN  [org.apache.activemq.artemis.core.server] AMQ222107: Cleared up resources for session ce63aa1a-9a97-11ec-8b3d-6c02e05f997e\r\n2022-03-03 11:21:29,133 WARN  [org.apache.activemq.artemis.core.protocol.stomp] AMQ332069: Sent ERROR frame to STOMP client /127.0.0.1:5582: AMQ229014: Did not receive data from /127.0.0.1:5582 within the 20,000ms connection TTL. The connection will now be closed.\r\n2022-03-03 11:21:29,134 WARN  [org.apache.activemq.artemis.core.server] AMQ222067: Connection failure has been detected: AMQ229014: Did not receive data from /127.0.0.1:5582 within the 20,000ms connection TTL. The connection will now be closed. [code=CONNECTION_TIMEDOUT]\r\n2022-03-03 11:21:29,134 WARN  [org.apache.activemq.artemis.core.server] AMQ222061: Client connection failed, clearing up resources for session d1631205-9a98-11ec-8b3d-6c02e05f997e\r\n2022-03-03 11:21:29,137 WARN  [org.apache.activemq.artemis.core.server] AMQ222107: Cleared up resources for session d1631205-9a98-11ec-8b3d-6c02e05f997e\r\n```\r\nI tried several times, Refresh immediately when the last connection is lost. It&#39;s look stranger, sometimes the connection can hold half an hour, sometimes just a few minutes.\r\n\r\n\r\njava code:\r\n```java\r\n    @Override\r\n    protected void configureStompEndpoints(StompEndpointRegistry registry) {\r\n        registry.addEndpoint(&quot;/ws&quot;).withSockJS();\r\n    }\r\n\r\n    @Override\r\n    public void configureMessageBroker(MessageBrokerRegistry registry) {\r\n        //registry.enableSimpleBroker(&quot;/queue/&quot;, &quot;/topic/&quot;, &quot;/exchange/&quot;);\r\n        registry.enableStompBrokerRelay(&quot;/queue/&quot;, &quot;/topic/&quot;, &quot;/exchange/&quot;)\r\n                .setSystemHeartbeatSendInterval(20000)\r\n                .setSystemHeartbeatReceiveInterval(20000)\r\n                .setTaskScheduler(heartBeatScheduler())\r\n                \r\n                .setRelayHost(&quot;127.0.0.1&quot;)\r\n                .setRelayPort(61613)\r\n                .setClientLogin(&quot;mirana&quot;)\r\n                .setClientPasscode(&quot;mirana&quot;)\r\n                .setSystemLogin(&quot;mirana&quot;)\r\n                .setSystemPasscode(&quot;mirana&quot;);\r\n        registry.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n    }\r\n\r\n\r\n  \r\n    @Bean\r\n    @Primary\r\n    public UserDestinationResolver destinationResolver(SimpUserRegistry simpUserRegistry){\r\n        return new DefaultUserDestinationResolver(simpUserRegistry){\r\n            @Override\r\n            public String getTargetDestination(String sourceDestination, String actualDestination,\r\n                    String sessionId, @Nullable String user){\r\n                return actualDestination + &quot;-user-&quot; + user;\r\n            }\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    public TaskScheduler heartBeatScheduler() {\r\n        return new ThreadPoolTaskScheduler();\r\n    }\r\n```\r\n`server.js`:\r\n```javascript\r\nimport Stomp from &#39;stompjs&#39;\r\nimport Sockjs from &#39;sockjs-client&#39;\r\n\r\nvar stompClient;\r\n\r\nexport function init(url){\r\n    stompClient = Stomp.over(new Sockjs(url))\r\n}\r\n\r\n\r\nexport function connect(successCallback, errorCallback){\r\n    stompClient.connect({}, function(frame){\r\n        successCallback(frame)\r\n    }, function(frame){\r\n        errorCallback(frame)\r\n    })\r\n}\r\n\r\n\r\nexport function subscribe(destination, callback){\r\n    stompClient.subscribe(destination, message =&gt; callback(message))\r\n}\r\n\r\nexport function send(destination, headers, object){\r\n    stompClient.send(destination,headers,object)\r\n}\r\n```\r\n`client.js`\r\n```javascript\r\nserver.init(&#39;http://localhost:9999/ws?type=1&amp;id=321feead21313fesa&#39;)\r\n    server.connect(frame =&gt;{\r\n      console.log(frame)\r\n      server.subscribe(&#39;/topic/chat.typing&#39;, message =&gt; {\r\n        console.log(&quot;chat.type&quot;+message)\r\n      })\r\n      server.subscribe(&#39;/topic/chat.message&#39;, message =&gt; {\r\n        console.log(&quot;chat.message&quot;+message)\r\n      })\r\n    }, frame =&gt;{\r\n      console.log(frame)\r\n    })\r\n}\r\n```\r\n\r\nWhy are the lost connection intervals different? I am very confused.\r\n\r\nI used localhost, not any WAN or LAN.\r\n\r\nI set the log level to `TRACE` and the server doesn&#39;t receive the heart-beat from the client in 20s (the heartbeat is 10s at a time) then the broker closed the connection. So maybe it&#39;s the problem of the client. Maybe there&#39;s CPU spikes. This may need more tests to find the problem.\r\n\r\n\r\nI try to inspect the client, and when the connection loses the status code is 1002, which means ` an endpoint is terminating the connection due to a protocol error`.\r\nDoes anybody know how to solve this problem.","title":"Spring Boot STOMP lost connection after a few minutes","body":"<p>I am using ActiveMQ Artemis, SockJS, StompJS, Spring Boot STOMP.\nWhen establishing the connection the client sends heart-beat info:</p>\n<pre><code>&lt;&lt;&lt; CONNECTED\nversion:1.1\nsession:1913360c\nserver:ActiveMQ-Artemis/2.20.0 ActiveMQ Artemis Messaging Engine\nheart-beat:10000,10000\nuser-name:qqq\n</code></pre>\n<p>The heartbeat is normal, but after several minutes the connection is closed by ActiveMQ. Here's the corresponding logs:</p>\n<pre><code>2022-03-03 09:30:09,718 WARN  [org.apache.activemq.artemis.core.protocol.stomp] AMQ332069: Sent ERROR frame to STOMP client /127.0.0.1:1432: AMQ229014: Did not receive data from /127.0.0.1:1432 within the 20,000ms connection TTL. The connection will now be closed.\n2022-03-03 09:30:09,719 WARN  [org.apache.activemq.artemis.core.server] AMQ222067: Connection failure has been detected: AMQ229014: Did not receive data from /127.0.0.1:1432 within the 20,000ms connection TTL. The connection will now be closed. [code=CONNECTION_TIMEDOUT]\n2022-03-03 09:30:09,719 WARN  [org.apache.activemq.artemis.core.server] AMQ222061: Client connection failed, clearing up resources for session aa0cdab7-9a90-11ec-8b3d-6c02e05f997e\n2022-03-03 09:30:09,725 WARN  [org.apache.activemq.artemis.core.server] AMQ222107: Cleared up resources for session aa0cdab7-9a90-11ec-8b3d-6c02e05f997e\n2022-03-03 09:58:45,120 WARN  [org.apache.activemq.artemis.core.protocol.stomp] AMQ332069: Sent ERROR frame to STOMP client /127.0.0.1:1922: AMQ229014: Did not receive data from /127.0.0.1:1922 within the 20,000ms connection TTL. The connection will now be closed.\n2022-03-03 09:58:45,122 WARN  [org.apache.activemq.artemis.core.server] AMQ222067: Connection failure has been detected: AMQ229014: Did not receive data from /127.0.0.1:1922 within the 20,000ms connection TTL. The connection will now be closed. [code=CONNECTION_TIMEDOUT]\n2022-03-03 09:58:45,122 WARN  [org.apache.activemq.artemis.core.server] AMQ222061: Client connection failed, clearing up resources for session d2309f42-9a91-11ec-8b3d-6c02e05f997e\n2022-03-03 09:58:45,125 WARN  [org.apache.activemq.artemis.core.server] AMQ222107: Cleared up resources for session d2309f42-9a91-11ec-8b3d-6c02e05f997e\n2022-03-03 10:14:16,758 WARN  [org.apache.activemq.artemis.core.protocol.stomp] AMQ332069: Sent ERROR frame to STOMP client /127.0.0.1:4003: AMQ229014: Did not receive data from /127.0.0.1:4003 within the 20,000ms connection TTL. The connection will now be closed.\n2022-03-03 10:14:16,759 WARN  [org.apache.activemq.artemis.core.server] AMQ222067: Connection failure has been detected: AMQ229014: Did not receive data from /127.0.0.1:4003 within the 20,000ms connection TTL. The connection will now be closed. [code=CONNECTION_TIMEDOUT]\n2022-03-03 10:14:16,759 WARN  [org.apache.activemq.artemis.core.server] AMQ222061: Client connection failed, clearing up resources for session 939d58fd-9a95-11ec-8b3d-6c02e05f997e\n2022-03-03 10:14:16,763 WARN  [org.apache.activemq.artemis.core.server] AMQ222107: Cleared up resources for session 939d58fd-9a95-11ec-8b3d-6c02e05f997e\n2022-03-03 10:14:53,112 WARN  [org.apache.activemq.artemis.core.protocol.stomp] AMQ332069: Sent ERROR frame to STOMP client null: null\n2022-03-03 10:14:53,113 WARN  [org.apache.activemq.artemis.core.server] AMQ222067: Connection failure has been detected: null [code=REMOTE_DISCONNECT]\n2022-03-03 10:14:53,123 WARN  [org.apache.activemq.artemis.core.protocol.stomp] AMQ332069: Sent ERROR frame to STOMP client null: null\n2022-03-03 10:14:53,123 WARN  [org.apache.activemq.artemis.core.server] AMQ222067: Connection failure has been detected: null [code=REMOTE_DISCONNECT]\n2022-03-03 10:21:34,506 WARN  [org.apache.activemq.artemis.core.protocol.stomp] AMQ332069: Sent ERROR frame to STOMP client /127.0.0.1:5140: AMQ229014: Did not receive data from /127.0.0.1:5140 within the 20,000ms connection TTL. The connection will now be closed.\n2022-03-03 10:21:34,506 WARN  [org.apache.activemq.artemis.core.server] AMQ222067: Connection failure has been detected: AMQ229014: Did not receive data from /127.0.0.1:5140 within the 20,000ms connection TTL. The connection will now be closed. [code=CONNECTION_TIMEDOUT]\n2022-03-03 10:21:34,507 WARN  [org.apache.activemq.artemis.core.server] AMQ222061: Client connection failed, clearing up resources for session ce63aa1a-9a97-11ec-8b3d-6c02e05f997e\n2022-03-03 10:21:34,510 WARN  [org.apache.activemq.artemis.core.server] AMQ222107: Cleared up resources for session ce63aa1a-9a97-11ec-8b3d-6c02e05f997e\n2022-03-03 11:21:29,133 WARN  [org.apache.activemq.artemis.core.protocol.stomp] AMQ332069: Sent ERROR frame to STOMP client /127.0.0.1:5582: AMQ229014: Did not receive data from /127.0.0.1:5582 within the 20,000ms connection TTL. The connection will now be closed.\n2022-03-03 11:21:29,134 WARN  [org.apache.activemq.artemis.core.server] AMQ222067: Connection failure has been detected: AMQ229014: Did not receive data from /127.0.0.1:5582 within the 20,000ms connection TTL. The connection will now be closed. [code=CONNECTION_TIMEDOUT]\n2022-03-03 11:21:29,134 WARN  [org.apache.activemq.artemis.core.server] AMQ222061: Client connection failed, clearing up resources for session d1631205-9a98-11ec-8b3d-6c02e05f997e\n2022-03-03 11:21:29,137 WARN  [org.apache.activemq.artemis.core.server] AMQ222107: Cleared up resources for session d1631205-9a98-11ec-8b3d-6c02e05f997e\n</code></pre>\n<p>I tried several times, Refresh immediately when the last connection is lost. It's look stranger, sometimes the connection can hold half an hour, sometimes just a few minutes.</p>\n<p>java code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    protected void configureStompEndpoints(StompEndpointRegistry registry) {\n        registry.addEndpoint(&quot;/ws&quot;).withSockJS();\n    }\n\n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry registry) {\n        //registry.enableSimpleBroker(&quot;/queue/&quot;, &quot;/topic/&quot;, &quot;/exchange/&quot;);\n        registry.enableStompBrokerRelay(&quot;/queue/&quot;, &quot;/topic/&quot;, &quot;/exchange/&quot;)\n                .setSystemHeartbeatSendInterval(20000)\n                .setSystemHeartbeatReceiveInterval(20000)\n                .setTaskScheduler(heartBeatScheduler())\n                \n                .setRelayHost(&quot;127.0.0.1&quot;)\n                .setRelayPort(61613)\n                .setClientLogin(&quot;mirana&quot;)\n                .setClientPasscode(&quot;mirana&quot;)\n                .setSystemLogin(&quot;mirana&quot;)\n                .setSystemPasscode(&quot;mirana&quot;);\n        registry.setApplicationDestinationPrefixes(&quot;/app&quot;);\n    }\n\n\n  \n    @Bean\n    @Primary\n    public UserDestinationResolver destinationResolver(SimpUserRegistry simpUserRegistry){\n        return new DefaultUserDestinationResolver(simpUserRegistry){\n            @Override\n            public String getTargetDestination(String sourceDestination, String actualDestination,\n                    String sessionId, @Nullable String user){\n                return actualDestination + &quot;-user-&quot; + user;\n            }\n        };\n    }\n\n    @Bean\n    public TaskScheduler heartBeatScheduler() {\n        return new ThreadPoolTaskScheduler();\n    }\n</code></pre>\n<p><code>server.js</code>:</p>\n<pre class=\"lang-js prettyprint-override\"><code>import Stomp from 'stompjs'\nimport Sockjs from 'sockjs-client'\n\nvar stompClient;\n\nexport function init(url){\n    stompClient = Stomp.over(new Sockjs(url))\n}\n\n\nexport function connect(successCallback, errorCallback){\n    stompClient.connect({}, function(frame){\n        successCallback(frame)\n    }, function(frame){\n        errorCallback(frame)\n    })\n}\n\n\nexport function subscribe(destination, callback){\n    stompClient.subscribe(destination, message =&gt; callback(message))\n}\n\nexport function send(destination, headers, object){\n    stompClient.send(destination,headers,object)\n}\n</code></pre>\n<p><code>client.js</code></p>\n<pre class=\"lang-js prettyprint-override\"><code>server.init('http://localhost:9999/ws?type=1&amp;id=321feead21313fesa')\n    server.connect(frame =&gt;{\n      console.log(frame)\n      server.subscribe('/topic/chat.typing', message =&gt; {\n        console.log(&quot;chat.type&quot;+message)\n      })\n      server.subscribe('/topic/chat.message', message =&gt; {\n        console.log(&quot;chat.message&quot;+message)\n      })\n    }, frame =&gt;{\n      console.log(frame)\n    })\n}\n</code></pre>\n<p>Why are the lost connection intervals different? I am very confused.</p>\n<p>I used localhost, not any WAN or LAN.</p>\n<p>I set the log level to <code>TRACE</code> and the server doesn't receive the heart-beat from the client in 20s (the heartbeat is 10s at a time) then the broker closed the connection. So maybe it's the problem of the client. Maybe there's CPU spikes. This may need more tests to find the problem.</p>\n<p>I try to inspect the client, and when the connection loses the status code is 1002, which means <code> an endpoint is terminating the connection due to a protocol error</code>.\nDoes anybody know how to solve this problem.</p>\n"},{"tags":["java","android","ussd"],"comments":[{"owner":{"account_id":1972221,"reputation":16711,"user_id":1770868,"accept_rate":95,"display_name":"Ahmad Aghazadeh"},"score":0,"creation_date":1478782910,"post_id":40528151,"comment_id":68296636,"body_markdown":"Hi read this post http://stackoverflow.com/a/37339004/1770868","body":"Hi read this post <a href=\"http://stackoverflow.com/a/37339004/1770868\">stackoverflow.com/a/37339004/1770868</a>"},{"owner":{"account_id":2091175,"reputation":3923,"user_id":1860982,"accept_rate":52,"display_name":"Tosin Onikute"},"score":0,"creation_date":1478783569,"post_id":40528151,"comment_id":68297033,"body_markdown":"@AhmadAghazadeh, thanks but when i tried implementing that earlier, I got an error saying &quot; cannot find IExtendedNetworkService.Stub &quot; , Pointing to &quot;Stub&quot; for reasons which i&#39;m not sure. because i followed the steps","body":"@AhmadAghazadeh, thanks but when i tried implementing that earlier, I got an error saying &quot; cannot find IExtendedNetworkService.Stub &quot; , Pointing to &quot;Stub&quot; for reasons which i&#39;m not sure. because i followed the steps"},{"owner":{"account_id":2091175,"reputation":3923,"user_id":1860982,"accept_rate":52,"display_name":"Tosin Onikute"},"score":0,"creation_date":1478783686,"post_id":40528151,"comment_id":68297107,"body_markdown":"@AhmadAghazadeh Please, have you tried running that answer recently? , because it doesn&#39;t work for me.","body":"@AhmadAghazadeh Please, have you tried running that answer recently? , because it doesn&#39;t work for me."},{"owner":{"account_id":1972221,"reputation":16711,"user_id":1770868,"accept_rate":95,"display_name":"Ahmad Aghazadeh"},"score":0,"creation_date":1478784179,"post_id":40528151,"comment_id":68297400,"body_markdown":"try it: &lt;service android:name=&quot;full path&quot; android:enabled=&quot;true&quot;&gt;&lt;/service&gt;","body":"try it: &lt;service android:name=&quot;full path&quot; android:enabled=&quot;true&quot;&gt;&lt;/service&gt;"},{"owner":{"account_id":2091175,"reputation":3923,"user_id":1860982,"accept_rate":52,"display_name":"Tosin Onikute"},"score":0,"creation_date":1478788834,"post_id":40528151,"comment_id":68300377,"body_markdown":"@AhmadAghazadeh what is suppose to be the EXTRA_ACTION_USSD in your code ?","body":"@AhmadAghazadeh what is suppose to be the EXTRA_ACTION_USSD in your code ?"},{"owner":{"account_id":1342983,"reputation":396,"user_id":1284291,"display_name":"davkutalek"},"score":0,"creation_date":1589821190,"post_id":40528151,"comment_id":109439461,"body_markdown":"@AhmadAghazadeh that method was depreciated by Google in Android 4.3 for security reasons","body":"@AhmadAghazadeh that method was depreciated by Google in Android 4.3 for security reasons"}],"answers":[{"tags":[],"owner":{"account_id":7421064,"reputation":1,"user_id":5645391,"display_name":"Denis Wane"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1501576510,"creation_date":1501576510,"answer_id":45432824,"question_id":40528151,"body_markdown":"After the launch, change the settings manually\r\n\r\nSetting-&gt;Accessibility Setting -&gt; You can see a option &#39;your app name&#39;. Turn it on. (This has to be done from as a part of application flow(not manual))","title":"android read USSD response","body":"<p>After the launch, change the settings manually</p>\n\n<p>Setting->Accessibility Setting -> You can see a option 'your app name'. Turn it on. (This has to be done from as a part of application flow(not manual))</p>\n"},{"tags":[],"owner":{"account_id":23538671,"reputation":1,"user_id":17583225,"display_name":"Pridesoft ITsolutions"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638690744,"creation_date":1638688711,"answer_id":70232218,"question_id":40528151,"body_markdown":"instead of using broadcast receiver use these two lines of code in \r\n \r\nadd this code in MainActivity\r\n\r\n    public static void setTextViewToModify(String  Text) {\r\n            textView.setText(Text);}\r\n\r\nand add this in service class with in onAccessibityEvent\r\n\r\n    MainActivity.setTextViewToModify(text);\r\n\r\n","title":"android read USSD response","body":"<p>instead of using broadcast receiver use these two lines of code in</p>\n<p>add this code in MainActivity</p>\n<pre><code>public static void setTextViewToModify(String  Text) {\n        textView.setText(Text);}\n</code></pre>\n<p>and add this in service class with in onAccessibityEvent</p>\n<pre><code>MainActivity.setTextViewToModify(text);\n</code></pre>\n"}],"owner":{"account_id":2091175,"reputation":3923,"user_id":1860982,"accept_rate":52,"display_name":"Tosin Onikute"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3641,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1648047224,"creation_date":1478782447,"question_id":40528151,"body_markdown":"I&#39;m trying to read USSD response to get Sim balance amount etc, and I&#39;m having issues, I have been reading many questions related to that on Stackoverflow, nothing has worked so far. Except for this that came close: [https://stackoverflow.com/questions/22057625/prevent-ussd-dialog-and-read-ussd-response/34132708#34132708][1]. by @HenBoy331\r\n\r\nBut i&#39;m still having issues with it. My broadcast receiver doesn&#39;t get called too. I&#39;m using 4.4.2\r\n\r\n\r\n\r\nBut it shows nothing. I can&#39;t seem to parse the message and get the balance.\r\n\r\nI have a `MainActivity` to make the phone call, `ReceiverActivity` to implement broadcast receiver, `USSDService` class to get the USSD response.\r\n\r\nMainActivity.java\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            startService(new Intent(this, USSDService.class));\r\n            dailNumber(&quot;100&quot;);\r\n    \r\n        }\r\n    \r\n        private void dailNumber(String code) {\r\n            String ussdCode = &quot;*&quot; + code + Uri.encode(&quot;#&quot;);\r\n            startActivity(new Intent(&quot;android.intent.action.CALL&quot;, Uri.parse(&quot;tel:&quot; + ussdCode)));\r\n        }\r\n    }\r\n\r\n\r\nRecieverActivity.java\r\n\r\n\r\n    public class RecieverActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            IntentFilter filter = new IntentFilter(&quot;com.times.ussd.action.REFRESH&quot;);\r\n            this.registerReceiver(new Receiver(), filter);\r\n        }\r\n    \r\n        public class Receiver extends BroadcastReceiver {\r\n    \r\n            private String TAG = &quot;XXXX&quot;;\r\n    \r\n            @Override\r\n            public void onReceive(Context context, Intent intent) {\r\n    \r\n                String message = intent.getStringExtra(&quot;message&quot;);\r\n                Log.i(TAG, &quot;Got message: &quot; + message);\r\n    \r\n            }\r\n    \r\n        }\r\n    \r\n    }\r\n\r\n\r\nUSSDService.java\r\n\r\n\r\n    public class USSDService extends AccessibilityService {\r\n        \r\n            public String TAG = &quot;XXXX&quot;;\r\n        \r\n            @Override\r\n            public void onAccessibilityEvent(AccessibilityEvent event) {\r\n                Log.d(TAG, &quot;onAccessibilityEvent&quot;);\r\n        \r\n                AccessibilityNodeInfo source = event.getSource();\r\n            /* if (event.getEventType() == AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED &amp;&amp; !event.getClassName().equals(&quot;android.app.AlertDialog&quot;)) { // android.app.AlertDialog is the standard but not for all phones  */\r\n                if (event.getEventType() == AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED &amp;&amp; !String.valueOf(event.getClassName()).contains(&quot;AlertDialog&quot;)) {\r\n                    return;\r\n                }\r\n                if(event.getEventType() == AccessibilityEvent.TYPE_WINDOW_CONTENT_CHANGED &amp;&amp; (source == null || !source.getClassName().equals(&quot;android.widget.TextView&quot;))) {\r\n                    return;\r\n                }\r\n                if(event.getEventType() == AccessibilityEvent.TYPE_WINDOW_CONTENT_CHANGED &amp;&amp; TextUtils.isEmpty(source.getText())) {\r\n                    return;\r\n                }\r\n        \r\n                List&lt;CharSequence&gt; eventText;\r\n        \r\n                if(event.getEventType() == AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED) {\r\n                    eventText = event.getText();\r\n                } else {\r\n                    eventText = Collections.singletonList(source.getText());\r\n                }\r\n        \r\n                String text = processUSSDText(eventText);\r\n        \r\n                if( TextUtils.isEmpty(text) ) return;\r\n        \r\n                // Close dialog\r\n                performGlobalAction(GLOBAL_ACTION_BACK); // This works on 4.1+ only\r\n        \r\n                Log.d(TAG, text);\r\n        \r\n                // Handle USSD response here\r\n                Intent intent = new Intent(&quot;com.times.ussd.action.REFRESH&quot;);\r\n                intent.putExtra(&quot;message&quot;, text);\r\n                sendBroadcast(intent);\r\n        \r\n            }\r\n        \r\n            private String processUSSDText(List&lt;CharSequence&gt; eventText) {\r\n                for (CharSequence s : eventText) {\r\n                    String text = String.valueOf(s);\r\n                    // Return text if text is the expected ussd response\r\n                    if( true ) {\r\n                        return text;\r\n                    }\r\n                }\r\n                return null;\r\n            }\r\n        \r\n            @Override\r\n            public void onInterrupt() {\r\n            }\r\n        \r\n            @Override\r\n            protected void onServiceConnected() {\r\n                super.onServiceConnected();\r\n                Log.d(TAG, &quot;onServiceConnected&quot;);\r\n                AccessibilityServiceInfo info = new AccessibilityServiceInfo();\r\n                info.flags = AccessibilityServiceInfo.DEFAULT;\r\n                info.packageNames = new String[]{&quot;com.android.phone&quot;};\r\n                info.eventTypes = AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED | AccessibilityEvent.TYPE_WINDOW_CONTENT_CHANGED;\r\n                info.feedbackType = AccessibilityServiceInfo.FEEDBACK_GENERIC;\r\n                setServiceInfo(info);\r\n            }\r\n        }\r\n\r\nAndroidManifest\r\n\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        package=&quot;com.dialussd&quot;&gt;\r\n    \r\n        &lt;uses-permission android:name=&quot;android.permission.CALL_PHONE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\r\n    \r\n    \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:supportsRtl=&quot;true&quot;\r\n            android:theme=&quot;@style/AppTheme&quot;&gt;\r\n            &lt;activity android:name=&quot;.MainActivity&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n    \r\n    \r\n            &lt;service\r\n                android:name=&quot;.services.USSDService&quot;\r\n                android:enabled=&quot;true&quot;\r\n                android:exported=&quot;true&quot;\r\n                android:permission=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.accessibilityservice.AccessibilityService&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n                &lt;meta-data android:name=&quot;android.accessibilityservice&quot;\r\n                    android:resource=&quot;@xml/config_service&quot; /&gt;\r\n            &lt;/service&gt;\r\n    \r\n            &lt;receiver android:name=&quot;.RecieverActivity$Receiver&quot; &gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/receiver&gt;\r\n    \r\n    \r\n    \r\n        &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;\r\n\r\nPlease, is there any way i&#39;m implementing this wrongly, Or perhaps there is a new way to get USSD responses which works?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/22057625/prevent-ussd-dialog-and-read-ussd-response/34132708#34132708","title":"android read USSD response","body":"<p>I'm trying to read USSD response to get Sim balance amount etc, and I'm having issues, I have been reading many questions related to that on Stackoverflow, nothing has worked so far. Except for this that came close: <a href=\"https://stackoverflow.com/questions/22057625/prevent-ussd-dialog-and-read-ussd-response/34132708#34132708\">Prevent USSD dialog and read USSD response?</a>. by @HenBoy331</p>\n\n<p>But i'm still having issues with it. My broadcast receiver doesn't get called too. I'm using 4.4.2</p>\n\n<p>But it shows nothing. I can't seem to parse the message and get the balance.</p>\n\n<p>I have a <code>MainActivity</code> to make the phone call, <code>ReceiverActivity</code> to implement broadcast receiver, <code>USSDService</code> class to get the USSD response.</p>\n\n<p>MainActivity.java</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        startService(new Intent(this, USSDService.class));\n        dailNumber(\"100\");\n\n    }\n\n    private void dailNumber(String code) {\n        String ussdCode = \"*\" + code + Uri.encode(\"#\");\n        startActivity(new Intent(\"android.intent.action.CALL\", Uri.parse(\"tel:\" + ussdCode)));\n    }\n}\n</code></pre>\n\n<p>RecieverActivity.java</p>\n\n<pre><code>public class RecieverActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        IntentFilter filter = new IntentFilter(\"com.times.ussd.action.REFRESH\");\n        this.registerReceiver(new Receiver(), filter);\n    }\n\n    public class Receiver extends BroadcastReceiver {\n\n        private String TAG = \"XXXX\";\n\n        @Override\n        public void onReceive(Context context, Intent intent) {\n\n            String message = intent.getStringExtra(\"message\");\n            Log.i(TAG, \"Got message: \" + message);\n\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>USSDService.java</p>\n\n<pre><code>public class USSDService extends AccessibilityService {\n\n        public String TAG = \"XXXX\";\n\n        @Override\n        public void onAccessibilityEvent(AccessibilityEvent event) {\n            Log.d(TAG, \"onAccessibilityEvent\");\n\n            AccessibilityNodeInfo source = event.getSource();\n        /* if (event.getEventType() == AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED &amp;&amp; !event.getClassName().equals(\"android.app.AlertDialog\")) { // android.app.AlertDialog is the standard but not for all phones  */\n            if (event.getEventType() == AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED &amp;&amp; !String.valueOf(event.getClassName()).contains(\"AlertDialog\")) {\n                return;\n            }\n            if(event.getEventType() == AccessibilityEvent.TYPE_WINDOW_CONTENT_CHANGED &amp;&amp; (source == null || !source.getClassName().equals(\"android.widget.TextView\"))) {\n                return;\n            }\n            if(event.getEventType() == AccessibilityEvent.TYPE_WINDOW_CONTENT_CHANGED &amp;&amp; TextUtils.isEmpty(source.getText())) {\n                return;\n            }\n\n            List&lt;CharSequence&gt; eventText;\n\n            if(event.getEventType() == AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED) {\n                eventText = event.getText();\n            } else {\n                eventText = Collections.singletonList(source.getText());\n            }\n\n            String text = processUSSDText(eventText);\n\n            if( TextUtils.isEmpty(text) ) return;\n\n            // Close dialog\n            performGlobalAction(GLOBAL_ACTION_BACK); // This works on 4.1+ only\n\n            Log.d(TAG, text);\n\n            // Handle USSD response here\n            Intent intent = new Intent(\"com.times.ussd.action.REFRESH\");\n            intent.putExtra(\"message\", text);\n            sendBroadcast(intent);\n\n        }\n\n        private String processUSSDText(List&lt;CharSequence&gt; eventText) {\n            for (CharSequence s : eventText) {\n                String text = String.valueOf(s);\n                // Return text if text is the expected ussd response\n                if( true ) {\n                    return text;\n                }\n            }\n            return null;\n        }\n\n        @Override\n        public void onInterrupt() {\n        }\n\n        @Override\n        protected void onServiceConnected() {\n            super.onServiceConnected();\n            Log.d(TAG, \"onServiceConnected\");\n            AccessibilityServiceInfo info = new AccessibilityServiceInfo();\n            info.flags = AccessibilityServiceInfo.DEFAULT;\n            info.packageNames = new String[]{\"com.android.phone\"};\n            info.eventTypes = AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED | AccessibilityEvent.TYPE_WINDOW_CONTENT_CHANGED;\n            info.feedbackType = AccessibilityServiceInfo.FEEDBACK_GENERIC;\n            setServiceInfo(info);\n        }\n    }\n</code></pre>\n\n<p>AndroidManifest</p>\n\n<pre><code>&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.dialussd\"&gt;\n\n    &lt;uses-permission android:name=\"android.permission.CALL_PHONE\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.RECEIVE_BOOT_COMPLETED\" /&gt;\n\n\n    &lt;application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\"&gt;\n        &lt;activity android:name=\".MainActivity\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n\n        &lt;service\n            android:name=\".services.USSDService\"\n            android:enabled=\"true\"\n            android:exported=\"true\"\n            android:permission=\"android.permission.BIND_ACCESSIBILITY_SERVICE\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.accessibilityservice.AccessibilityService\" /&gt;\n            &lt;/intent-filter&gt;\n            &lt;meta-data android:name=\"android.accessibilityservice\"\n                android:resource=\"@xml/config_service\" /&gt;\n        &lt;/service&gt;\n\n        &lt;receiver android:name=\".RecieverActivity$Receiver\" &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.BOOT_COMPLETED\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n\n\n\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n\n<p>Please, is there any way i'm implementing this wrongly, Or perhaps there is a new way to get USSD responses which works?</p>\n"},{"tags":["java","angular","spring","post","put"],"answers":[{"tags":[],"owner":{"account_id":6206196,"reputation":4298,"user_id":4834117,"accept_rate":56,"display_name":"Tonio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648045598,"creation_date":1648045598,"answer_id":71588941,"question_id":71588903,"body_markdown":"Are you subscribing to this call on the FE ? the angular HttpClient returns an `Observable`, if you are not subscribing, i.e. if you are not doing something like this:\r\n\r\n```javascript \r\ngetUsers().subscribe((data) =&gt; {\r\n  console.log(&#39;whatever&#39;);\r\n})\r\n```\r\n\r\nThe http request will never be send, that&#39;s how observable works, they only get &quot;executed&quot; when someone is &quot;listening&quot;\r\n","title":"Simple put request Angular--&gt;Java/spring not working","body":"<p>Are you subscribing to this call on the FE ? the angular HttpClient returns an <code>Observable</code>, if you are not subscribing, i.e. if you are not doing something like this:</p>\n<pre class=\"lang-js prettyprint-override\"><code>getUsers().subscribe((data) =&gt; {\n  console.log('whatever');\n})\n</code></pre>\n<p>The http request will never be send, that's how observable works, they only get &quot;executed&quot; when someone is &quot;listening&quot;</p>\n"},{"tags":[],"owner":{"account_id":21011157,"reputation":5561,"user_id":15439733,"display_name":"Joosep Parts"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648047010,"creation_date":1648046620,"answer_id":71589217,"question_id":71588903,"body_markdown":"Seeing how you try to pass `id` as pathVariable your endpoint should also accept it as such. For that refactor your endpoint. Frontend looks fine.\r\n\r\n```java\r\n@PutMapping(&quot;/api/users/{id}&quot;)\r\npublic Employee changeStatus(@PathVariable Long id) \r\n{ \r\n       Employee newEmployee = userRepository.getById(id); \r\n       newEmployee.setStatus(&quot;Checked&quot;); \r\n       return userRepository.save(newEmployee); \r\n}\r\n```\r\nRemove one extra `id` from url.\r\n```javascript\r\npublic changeStatus(id: number): Observable&lt;any&gt; \r\n{ \r\n    const url = this.apiServerUrl + /users/ + id;\r\n    return this.http.put&lt;any&gt;(url);\r\n} \r\n```\r\nOtherwise try to get rid of `any` types and use strong typing - that&#39;s the benefit TypeScript gives us.","title":"Simple put request Angular--&gt;Java/spring not working","body":"<p>Seeing how you try to pass <code>id</code> as pathVariable your endpoint should also accept it as such. For that refactor your endpoint. Frontend looks fine.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PutMapping(&quot;/api/users/{id}&quot;)\npublic Employee changeStatus(@PathVariable Long id) \n{ \n       Employee newEmployee = userRepository.getById(id); \n       newEmployee.setStatus(&quot;Checked&quot;); \n       return userRepository.save(newEmployee); \n}\n</code></pre>\n<p>Remove one extra <code>id</code> from url.</p>\n<pre class=\"lang-js prettyprint-override\"><code>public changeStatus(id: number): Observable&lt;any&gt; \n{ \n    const url = this.apiServerUrl + /users/ + id;\n    return this.http.put&lt;any&gt;(url);\n} \n</code></pre>\n<p>Otherwise try to get rid of <code>any</code> types and use strong typing - that's the benefit TypeScript gives us.</p>\n"}],"owner":{"account_id":17954940,"reputation":1,"user_id":13047231,"display_name":"Chispas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1648047010,"creation_date":1648045438,"question_id":71588903,"body_markdown":"I have an objects in java backend that i want to change status property on:\r\n\r\n    @Entity \r\n    public class Employee { \r\n        @Id @GeneratedValue long id; \r\n        private  String name; \r\n        private  String status;\r\n}\r\n\r\nI want to set the property status to &quot;Checked&quot; for a targeted object chosen with id with this putmapping:\r\n\r\n    @PutMapping(&quot;/api/users/id&quot;) \r\n    public Employee changeStatus(@RequestParam Long id) \r\n    { \r\n           Employee newEmployee = userRepository.getById(id); \r\n           newEmployee.setStatus(&quot;Checked&quot;); \r\n           return userRepository.save(newEmployee); \r\n    }\r\n\r\nI want to do it from my frontend through :\r\n\r\n    public changeStatus(id: number): Observable&lt;any&gt; \r\n    { \r\n        return this.http.put&lt;any&gt;(${this.apiServerUrl}/users/id, id) \r\n    } \r\n\r\nNothing happens in backend, no errors or anything shows up. What am i missing? I suspect i do something wrong in the frontend call, but i cant figure it out.\r\n\r\nBackend-frontend connections seems to work because i can get all data from my backend and see it in frontend with theese two endpoints\r\n\r\nBackend:\r\n\r\n    @RequestMapping(&quot;/api/users&quot;) public List&lt;Employee&gt; getUsers() \r\n    { \r\n         return (List&lt;Employee&gt;) userRepository.findAll(); \r\n    } \r\n\r\nFrontend:\r\n\r\n    public getUsers(): Observable&lt;any&gt;\r\n    { \r\n        return this.http.get&lt;any&gt;(${this.apiServerUrl}/users) \r\n    } \r\n\r\nThanks in advance!","title":"Simple put request Angular--&gt;Java/spring not working","body":"<p>I have an objects in java backend that i want to change status property on:</p>\n<pre><code>@Entity \npublic class Employee { \n    @Id @GeneratedValue long id; \n    private  String name; \n    private  String status;\n</code></pre>\n<p>}</p>\n<p>I want to set the property status to &quot;Checked&quot; for a targeted object chosen with id with this putmapping:</p>\n<pre><code>@PutMapping(&quot;/api/users/id&quot;) \npublic Employee changeStatus(@RequestParam Long id) \n{ \n       Employee newEmployee = userRepository.getById(id); \n       newEmployee.setStatus(&quot;Checked&quot;); \n       return userRepository.save(newEmployee); \n}\n</code></pre>\n<p>I want to do it from my frontend through :</p>\n<pre><code>public changeStatus(id: number): Observable&lt;any&gt; \n{ \n    return this.http.put&lt;any&gt;(${this.apiServerUrl}/users/id, id) \n} \n</code></pre>\n<p>Nothing happens in backend, no errors or anything shows up. What am i missing? I suspect i do something wrong in the frontend call, but i cant figure it out.</p>\n<p>Backend-frontend connections seems to work because i can get all data from my backend and see it in frontend with theese two endpoints</p>\n<p>Backend:</p>\n<pre><code>@RequestMapping(&quot;/api/users&quot;) public List&lt;Employee&gt; getUsers() \n{ \n     return (List&lt;Employee&gt;) userRepository.findAll(); \n} \n</code></pre>\n<p>Frontend:</p>\n<pre><code>public getUsers(): Observable&lt;any&gt;\n{ \n    return this.http.get&lt;any&gt;(${this.apiServerUrl}/users) \n} \n</code></pre>\n<p>Thanks in advance!</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":160350,"reputation":11421,"user_id":380338,"display_name":"Neil Stockton"},"score":0,"creation_date":1452261171,"post_id":34676217,"comment_id":57102478,"body_markdown":"I have used a converter for a List field with DataNucleus JPA and it tracks changes to the list and persists them. So looks like your provider doesn&#39;t support that","body":"I have used a converter for a List field with DataNucleus JPA and it tracks changes to the list and persists them. So looks like your provider doesn&#39;t support that"},{"owner":{"account_id":1714975,"reputation":20238,"user_id":1572269,"accept_rate":43,"display_name":"Naros"},"score":0,"creation_date":1452274487,"post_id":34676217,"comment_id":57111670,"body_markdown":"Despite how you may have initially `saved` the data, if it is read back in and parsed out as A, C, B and you never add or remove elements from the list, Hibernate hasn&#39;t detected the state having been changed, thus not dirty, despite how it may be stored in the actual DB.  What we need to see is both your serialize and deserialize methods to confirm it isn&#39;t just a deserialization problem as to why your load has A,C,B instead of A,B,C.","body":"Despite how you may have initially <code>saved</code> the data, if it is read back in and parsed out as A, C, B and you never add or remove elements from the list, Hibernate hasn&#39;t detected the state having been changed, thus not dirty, despite how it may be stored in the actual DB.  What we need to see is both your serialize and deserialize methods to confirm it isn&#39;t just a deserialization problem as to why your load has A,C,B instead of A,B,C."},{"owner":{"account_id":1661225,"reputation":308,"user_id":1529492,"accept_rate":50,"display_name":"Martin Metz"},"score":0,"creation_date":1452503297,"post_id":34676217,"comment_id":57180969,"body_markdown":"Hello Naros, in my unit test I add and remove elements, see the sample code. It contains a &quot;loaded.getSampleList().remove(1);&quot; and &quot;loaded.getSampleList().add(moveObj);&quot;.\nThe serialization/deserialization is done using the gson library, calling Gson#toJSon(Object) and Gson#fromJson(String, Type). But my expectation was that hibernate does always call the convertToDatabaseColumn() and compares the strings or maybe compares the original objects. But it seems that Hibernate is simply ignoring changes with converter data.","body":"Hello Naros, in my unit test I add and remove elements, see the sample code. It contains a &quot;loaded.getSampleList().remove(1);&quot; and &quot;loaded.getSampleList().add(moveObj);&quot;. The serialization/deserialization is done using the gson library, calling Gson#toJSon(Object) and Gson#fromJson(String, Type). But my expectation was that hibernate does always call the convertToDatabaseColumn() and compares the strings or maybe compares the original objects. But it seems that Hibernate is simply ignoring changes with converter data."},{"owner":{"account_id":1661225,"reputation":308,"user_id":1529492,"accept_rate":50,"display_name":"Martin Metz"},"score":0,"creation_date":1452676772,"post_id":34676217,"comment_id":57270411,"body_markdown":"UPDATE: The mostly same test code works within an Arquilian test! But not within JSE unit test! But another, very similar test case still fails, even as a JEE test. I&#39;m still searching the differences!","body":"UPDATE: The mostly same test code works within an Arquilian test! But not within JSE unit test! But another, very similar test case still fails, even as a JEE test. I&#39;m still searching the differences!"},{"owner":{"account_id":1661225,"reputation":308,"user_id":1529492,"accept_rate":50,"display_name":"Martin Metz"},"score":0,"creation_date":1452695494,"post_id":34676217,"comment_id":57283370,"body_markdown":"UPDATE: In JEE: If I modify a detached object (loaded by older transaction) and make an entitiyManager.merge() afterwards, all works fine! But if I load the object and modify it within one transaction, the changes in the JSON serialization are not detected! Looks like a Hibernate bug to me!","body":"UPDATE: In JEE: If I modify a detached object (loaded by older transaction) and make an entitiyManager.merge() afterwards, all works fine! But if I load the object and modify it within one transaction, the changes in the JSON serialization are not detected! Looks like a Hibernate bug to me!"},{"owner":{"account_id":10719092,"reputation":215,"user_id":7888743,"display_name":"Ilya Berdzenishvili"},"score":0,"creation_date":1593201828,"post_id":34676217,"comment_id":110707456,"body_markdown":"Are there any updates regarding this topic? I mean, some kind of best practice or smth else","body":"Are there any updates regarding this topic? I mean, some kind of best practice or smth else"},{"owner":{"account_id":1661225,"reputation":308,"user_id":1529492,"accept_rate":50,"display_name":"Martin Metz"},"score":0,"creation_date":1593594640,"post_id":34676217,"comment_id":110833106,"body_markdown":"I did no longer check the issue. My solution, was not to use the @Converter but specific code for Hibernate.","body":"I did no longer check the issue. My solution, was not to use the @Converter but specific code for Hibernate."}],"answers":[{"tags":[],"owner":{"account_id":2601471,"reputation":1111,"user_id":2253719,"display_name":"Wilfredo Pomier"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1478663594,"creation_date":1478663594,"answer_id":40499981,"question_id":34676217,"body_markdown":"I know it&#39;s an old question, but...\r\n\r\nI&#39;ve had the same problem with Hibernate+@Converter once. \r\nAfter a while, I realized that&#39;s because Hibernate doesn&#39;t know when the left side of `AttributeConverter&lt;left,right&gt;` gets dirty (maybe some other JPA implementations do), that&#39;s why it never calls `convertToDatabaseColumn()` and therefore never updates the database.\r\n\r\nTo work around this issue, you must set the entity&#39;s property to a fresh new instance (a `clone()` would do the trick).\r\n\r\n    EntitySample entity=new EntitySample();\r\n    entity.getSampleList().add(new SampleObject(&quot;A&quot;));\r\n    entity.getSampleList().add(new SampleObject(&quot;B&quot;));\r\n    entity.getSampleList().add(new SampleObject(&quot;C&quot;));\r\n    entity.setName(&quot;init&quot;);\r\n    startTransaction();\r\n    getEM().persist(entity);\r\n    commitTransaction();\r\n    \r\n    // change the order to A, C, B:\r\n    getEM().clear();\r\n    startTransaction();  // &lt;-- Transaction should start here\r\n    EntitySample loaded=getEM().find(...);\r\n    List&lt;SampleObject&gt; list = loaded.getSampleList();\r\n    SampleObject moveObj = list.remove(1);\r\n    list.add(moveObj);\r\n    loaded.setSampleList(list.clone()); // &lt;-- Workaround\r\n    \r\n    // getEM().merge(loaded); // &lt;-- &#39;loaded&#39; already is an entity!\r\n    commitTransaction();\r\n\r\nHere `clone()` returns a shallow copy of the `List` instance.  (The instances of `SampleObject` themselves are not copied.)\r\n\r\nTo avoid this you have to create a new Hibernate Type (leaving pure JPA aside), but that&#39;s not related to the main question.\r\n","title":"Data lost because of JPA AttributeConverter?","body":"<p>I know it's an old question, but...</p>\n\n<p>I've had the same problem with Hibernate+@Converter once. \nAfter a while, I realized that's because Hibernate doesn't know when the left side of <code>AttributeConverter&lt;left,right&gt;</code> gets dirty (maybe some other JPA implementations do), that's why it never calls <code>convertToDatabaseColumn()</code> and therefore never updates the database.</p>\n\n<p>To work around this issue, you must set the entity's property to a fresh new instance (a <code>clone()</code> would do the trick).</p>\n\n<pre><code>EntitySample entity=new EntitySample();\nentity.getSampleList().add(new SampleObject(\"A\"));\nentity.getSampleList().add(new SampleObject(\"B\"));\nentity.getSampleList().add(new SampleObject(\"C\"));\nentity.setName(\"init\");\nstartTransaction();\ngetEM().persist(entity);\ncommitTransaction();\n\n// change the order to A, C, B:\ngetEM().clear();\nstartTransaction();  // &lt;-- Transaction should start here\nEntitySample loaded=getEM().find(...);\nList&lt;SampleObject&gt; list = loaded.getSampleList();\nSampleObject moveObj = list.remove(1);\nlist.add(moveObj);\nloaded.setSampleList(list.clone()); // &lt;-- Workaround\n\n// getEM().merge(loaded); // &lt;-- 'loaded' already is an entity!\ncommitTransaction();\n</code></pre>\n\n<p>Here <code>clone()</code> returns a shallow copy of the <code>List</code> instance.  (The instances of <code>SampleObject</code> themselves are not copied.)</p>\n\n<p>To avoid this you have to create a new Hibernate Type (leaving pure JPA aside), but that's not related to the main question.</p>\n"},{"tags":[],"owner":{"account_id":24661815,"reputation":11,"user_id":18557952,"display_name":"Simon Mennig"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648046889,"creation_date":1648046889,"answer_id":71589282,"question_id":34676217,"body_markdown":"For EclipseLink the `@Mutable` annotation should work. This cause EclipseLink to your equals implementation, in order to determine if the object has changed. \r\n\r\nEclipseLink docu:\r\nhttps://www.eclipse.org/eclipselink/documentation/2.6/jpa/extensions/annotations_ref.htm#CHDIFIJF \r\n\r\n```\r\n  @Convert(converter=ConverterSample.class)\r\n  @Mutable\r\n  private List&lt;SampleObject&gt; sampleList=new ArrayList&lt;&gt;();\r\n```","title":"Data lost because of JPA AttributeConverter?","body":"<p>For EclipseLink the <code>@Mutable</code> annotation should work. This cause EclipseLink to your equals implementation, in order to determine if the object has changed.</p>\n<p>EclipseLink docu:\n<a href=\"https://www.eclipse.org/eclipselink/documentation/2.6/jpa/extensions/annotations_ref.htm#CHDIFIJF\" rel=\"nofollow noreferrer\">https://www.eclipse.org/eclipselink/documentation/2.6/jpa/extensions/annotations_ref.htm#CHDIFIJF</a></p>\n<pre><code>  @Convert(converter=ConverterSample.class)\n  @Mutable\n  private List&lt;SampleObject&gt; sampleList=new ArrayList&lt;&gt;();\n</code></pre>\n"}],"owner":{"account_id":1661225,"reputation":308,"user_id":1529492,"accept_rate":50,"display_name":"Martin Metz"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2188,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1648046889,"creation_date":1452253116,"question_id":34676217,"body_markdown":"I use JPA to persist my data to the database. In detail I use Hibernate 4.3.5 as JPA implementation.\r\nBecause of performance and keeping the table structure simple, I don not map directly 1:1 from objects to tables but some list of data I only keep as objects but do not create entity classes for. Instead of this, I serialize the object structure as JSON to the DB. This serialization/deserialization is done with @Converter and works mostly nice.\r\n\r\nSimplified Code:\r\n\r\n    @Entity\r\n    public class EntitySample {\r\n      ...\r\n      @Convert(converter=ConverterSample.class)\r\n      private List&lt;SampleObject&gt; sampleList=new ArrayList&lt;&gt;();\r\n    \r\n      private String name;\r\n    \r\n      public List&lt;SampleObject&gt; getSampleList() {\r\n        return sampleList;\r\n      }\r\n    \r\n      public void setName(String newName) {\r\n        name=newName;\r\n      }\r\n      ...\r\n    }\r\n\r\n    @Converter\r\n    public class ConverterSample implements AttributeConverter&lt;List,String&gt; {\r\n    \r\n      @Override\r\n      public String convertToDatabaseColumn(List data) {\r\n        return serializeToJSON(data);\r\n      }\r\n    \r\n      @Override\r\n      public List convertToEntityAttribute(String data) {\r\n        return deserializeFromJSON(data);\r\n      }\r\n    \r\n      ...\r\n    }\r\n\r\nAs told, it is mostly working!\r\nI detected the following problem in a unit test:\r\n\r\n    // create a new entity object with list A, B, C:\r\n    EntitySample entity=new EntitySample();\r\n    entity.getSampleList().add(new SampleObject(&quot;A&quot;));\r\n    entity.getSampleList().add(new SampleObject(&quot;B&quot;));\r\n    entity.getSampleList().add(new SampleObject(&quot;C&quot;));\r\n    entity.setName(&quot;init&quot;);\r\n    startTransaction();\r\n    getEM().persist(entity);\r\n    commitTransaction();\r\n    \r\n    // change the order to A, C, B:\r\n    getEM().clear();\r\n    EntitySample loaded=getEM().find(...); // just reload from DB\r\n    SampleObject moveObj=loaded.getSampleList().remove(1);\r\n    loaded.getSampleList().add(moveObj);\r\n    // loaded.setName(&quot;changed&quot;); // all works with this change, but not without!\r\n    \r\n    startTransaction();\r\n    getEM().merge(loaded);\r\n    commitTransaction();\r\n\r\nWith the upper code, an object with a JSON list with elements A, B, C is written to DB. After this the object is loaded back again and the order of the list elements is changed to A, C, B. But now saving the object does NOT change data data in the database! For me it looks like, that Hibernate does not detect that anything has changed! My converter code convertToDatabaseColumn() is not called for the merge.\r\nbut as soon as I also change the name (commented line above), all works fine. Now the loaded object seems to be detected as changed and therefore also the conversion is called and the JSON string is stored to DB.\r\n\r\nDoes anybody know this bug or knows a workaround? Or is it my bug in the end?","title":"Data lost because of JPA AttributeConverter?","body":"<p>I use JPA to persist my data to the database. In detail I use Hibernate 4.3.5 as JPA implementation.\nBecause of performance and keeping the table structure simple, I don not map directly 1:1 from objects to tables but some list of data I only keep as objects but do not create entity classes for. Instead of this, I serialize the object structure as JSON to the DB. This serialization/deserialization is done with @Converter and works mostly nice.</p>\n\n<p>Simplified Code:</p>\n\n<pre><code>@Entity\npublic class EntitySample {\n  ...\n  @Convert(converter=ConverterSample.class)\n  private List&lt;SampleObject&gt; sampleList=new ArrayList&lt;&gt;();\n\n  private String name;\n\n  public List&lt;SampleObject&gt; getSampleList() {\n    return sampleList;\n  }\n\n  public void setName(String newName) {\n    name=newName;\n  }\n  ...\n}\n\n@Converter\npublic class ConverterSample implements AttributeConverter&lt;List,String&gt; {\n\n  @Override\n  public String convertToDatabaseColumn(List data) {\n    return serializeToJSON(data);\n  }\n\n  @Override\n  public List convertToEntityAttribute(String data) {\n    return deserializeFromJSON(data);\n  }\n\n  ...\n}\n</code></pre>\n\n<p>As told, it is mostly working!\nI detected the following problem in a unit test:</p>\n\n<pre><code>// create a new entity object with list A, B, C:\nEntitySample entity=new EntitySample();\nentity.getSampleList().add(new SampleObject(\"A\"));\nentity.getSampleList().add(new SampleObject(\"B\"));\nentity.getSampleList().add(new SampleObject(\"C\"));\nentity.setName(\"init\");\nstartTransaction();\ngetEM().persist(entity);\ncommitTransaction();\n\n// change the order to A, C, B:\ngetEM().clear();\nEntitySample loaded=getEM().find(...); // just reload from DB\nSampleObject moveObj=loaded.getSampleList().remove(1);\nloaded.getSampleList().add(moveObj);\n// loaded.setName(\"changed\"); // all works with this change, but not without!\n\nstartTransaction();\ngetEM().merge(loaded);\ncommitTransaction();\n</code></pre>\n\n<p>With the upper code, an object with a JSON list with elements A, B, C is written to DB. After this the object is loaded back again and the order of the list elements is changed to A, C, B. But now saving the object does NOT change data data in the database! For me it looks like, that Hibernate does not detect that anything has changed! My converter code convertToDatabaseColumn() is not called for the merge.\nbut as soon as I also change the name (commented line above), all works fine. Now the loaded object seems to be detected as changed and therefore also the conversion is called and the JSON string is stored to DB.</p>\n\n<p>Does anybody know this bug or knows a workaround? Or is it my bug in the end?</p>\n"},{"tags":["java","docker","kubernetes","containers","flags"],"answers":[{"tags":[],"owner":{"account_id":4915498,"reputation":958,"user_id":3959535,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1538139344,"creation_date":1538139344,"answer_id":52555836,"question_id":52555036,"body_markdown":"The -Xmx flag overwrites the -XX:+UseCGroupMemoryLimitForHeap flag.\r\n\r\nThe flag -XX:+UseCGroupMemoryLimitForHeap lets the JVM detect what the max heap size in a container should be.\r\n\r\nThe -Xmx flag set the max heap size to a fixed size.\r\n\r\nTo answer your example, the JVM would reserve 2500M heap space. There will be some additional memory usage for non-heap and jvm stuff.\r\n\r\nTo further tune your memory usage in a container you could use the -XX:MaxRAMFraction flag. \r\nSee this article: https://blog.csanchez.org/2017/05/31/running-a-jvm-in-a-container-without-getting-killed/","title":"Do java flags Xms and Xmx overwrite flag XX:+UseCGroupMemoryLimitForHeap?","body":"<p>The -Xmx flag overwrites the -XX:+UseCGroupMemoryLimitForHeap flag.</p>\n\n<p>The flag -XX:+UseCGroupMemoryLimitForHeap lets the JVM detect what the max heap size in a container should be.</p>\n\n<p>The -Xmx flag set the max heap size to a fixed size.</p>\n\n<p>To answer your example, the JVM would reserve 2500M heap space. There will be some additional memory usage for non-heap and jvm stuff.</p>\n\n<p>To further tune your memory usage in a container you could use the -XX:MaxRAMFraction flag. \nSee this article: <a href=\"https://blog.csanchez.org/2017/05/31/running-a-jvm-in-a-container-without-getting-killed/\" rel=\"noreferrer\">https://blog.csanchez.org/2017/05/31/running-a-jvm-in-a-container-without-getting-killed/</a></p>\n"},{"tags":[],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1538142750,"creation_date":1538142750,"answer_id":52556887,"question_id":52555036,"body_markdown":"Think about it this way, *before* that `UseCGroupMemoryLimitForHeap` was added, you could specify `Xmx` with a value larger than what your pod had (it would look only on the host memory, not the pod itself), eventually being killed. By default that was 1/4 of the memory if not specified. This happens because heap is calculated like:\r\n\r\n\r\n    heap = memory / MaxRAMFraction\r\n\r\nAnd running:\r\n\r\n    java -XX:+PrintFlagsFinal | grep MaxRAMFraction\r\n\r\nwould reveal that `MaxRAMFraction = 4`. \r\n\r\nNow that `UseCGroupMemoryLimitForHeap` was added, you can tell how much heap *from the pod* itself will be taken. By default, that is still 1/4; but you can adjust that via `MaxRAMFraction`, of course.\r\n\r\nIf you specify both arguments, `Xms` wins. always. And 1) this is pretty logic (as `UseCGroupMemoryLimitForHeap` is more specific than `Xmx`) 2) this is exactly proven by my experiments just now. No matter the order in which they are specified, `Xmx` always wins.","title":"Do java flags Xms and Xmx overwrite flag XX:+UseCGroupMemoryLimitForHeap?","body":"<p>Think about it this way, <em>before</em> that <code>UseCGroupMemoryLimitForHeap</code> was added, you could specify <code>Xmx</code> with a value larger than what your pod had (it would look only on the host memory, not the pod itself), eventually being killed. By default that was 1/4 of the memory if not specified. This happens because heap is calculated like:</p>\n\n<pre><code>heap = memory / MaxRAMFraction\n</code></pre>\n\n<p>And running:</p>\n\n<pre><code>java -XX:+PrintFlagsFinal | grep MaxRAMFraction\n</code></pre>\n\n<p>would reveal that <code>MaxRAMFraction = 4</code>. </p>\n\n<p>Now that <code>UseCGroupMemoryLimitForHeap</code> was added, you can tell how much heap <em>from the pod</em> itself will be taken. By default, that is still 1/4; but you can adjust that via <code>MaxRAMFraction</code>, of course.</p>\n\n<p>If you specify both arguments, <code>Xms</code> wins. always. And 1) this is pretty logic (as <code>UseCGroupMemoryLimitForHeap</code> is more specific than <code>Xmx</code>) 2) this is exactly proven by my experiments just now. No matter the order in which they are specified, <code>Xmx</code> always wins.</p>\n"},{"tags":[],"owner":{"account_id":55404,"reputation":1970,"user_id":165927,"accept_rate":67,"display_name":"MosheElisha"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1648046437,"creation_date":1648046437,"answer_id":71589158,"question_id":52555036,"body_markdown":"If you are running Java 8 update 191 or later, or Java 10, 11,12, 13 etc. you **must NOT** use the `UseCGroupMemoryLimitForHeap` option. Instead you should use the `UseContainerSupport` that is activated by default.\r\n\r\nYou can then control the memory with the following options, `InitialRAMPercentage`, `MaxRAMPercentage` and `MinRAMPercentage`. \r\n\r\nSee https://merikan.com/2019/04/jvm-in-a-container/","title":"Do java flags Xms and Xmx overwrite flag XX:+UseCGroupMemoryLimitForHeap?","body":"<p>If you are running Java 8 update 191 or later, or Java 10, 11,12, 13 etc. you <strong>must NOT</strong> use the <code>UseCGroupMemoryLimitForHeap</code> option. Instead you should use the <code>UseContainerSupport</code> that is activated by default.</p>\n<p>You can then control the memory with the following options, <code>InitialRAMPercentage</code>, <code>MaxRAMPercentage</code> and <code>MinRAMPercentage</code>.</p>\n<p>See <a href=\"https://merikan.com/2019/04/jvm-in-a-container/\" rel=\"nofollow noreferrer\">https://merikan.com/2019/04/jvm-in-a-container/</a></p>\n"}],"owner":{"account_id":5767825,"reputation":445,"user_id":4552188,"display_name":"Dimitrios"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22727,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":52555836,"answer_count":3,"score":13,"last_activity_date":1648046437,"creation_date":1538136678,"question_id":52555036,"body_markdown":"I&#39;m running a containerized java application in Kubernetes.\r\n\r\nIn order to make the jvm reserve memory according to the container specifications, the flags ```-XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap  ``` must be set.\r\n\r\nIf both those flags are set along with Xms and Xmx flags, what would the behavior of the jvm be? Do one flag overwrite the other?  \r\n\r\nFor example, if we had ``` java -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -Xms -Xms2500M -Xmx2500M -jar myjar.jar ```\r\nin a pod with container limits 4Gi for requests and 4Gi for responses, in a host machine that has 128Gi memory, how much memory would the JVM reserve?","title":"Do java flags Xms and Xmx overwrite flag XX:+UseCGroupMemoryLimitForHeap?","body":"<p>I'm running a containerized java application in Kubernetes.</p>\n\n<p>In order to make the jvm reserve memory according to the container specifications, the flags <code>-XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap</code> must be set.</p>\n\n<p>If both those flags are set along with Xms and Xmx flags, what would the behavior of the jvm be? Do one flag overwrite the other?  </p>\n\n<p>For example, if we had <code>java -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -Xms -Xms2500M -Xmx2500M -jar myjar.jar</code>\nin a pod with container limits 4Gi for requests and 4Gi for responses, in a host machine that has 128Gi memory, how much memory would the JVM reserve?</p>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":8500,"page":1492,"page_size":100}
