{"items":[{"tags":["java","spring-webflux","project-reactor"],"comments":[{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1700861405,"post_id":77539883,"comment_id":136708541,"body_markdown":"In general it runs them in parallel (i.e., subscribe to all at the same time), but you may use `subscribeOn` to make sure it doesn&#39;t do everything in the current subscription thread. `boundedElastic` is a right choice for IO","body":"In general it runs them in parallel (i.e., subscribe to all at the same time), but you may use <code>subscribeOn</code> to make sure it doesn&#39;t do everything in the current subscription thread. <code>boundedElastic</code> is a right choice for IO"},{"owner":{"account_id":4552102,"reputation":175,"user_id":3696953,"display_name":"duppydodah"},"score":0,"creation_date":1700890665,"post_id":77539883,"comment_id":136710348,"body_markdown":"@IgorArtamonov If I am wanting to run them in parallel then, there is no need to use `subscribeOn` since, that would more so be if I want certain calls to be subscribed at different points in time correct ?","body":"@IgorArtamonov If I am wanting to run them in parallel then, there is no need to use <code>subscribeOn</code> since, that would more so be if I want certain calls to be subscribed at different points in time correct ?"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":1,"creation_date":1700926722,"post_id":77539883,"comment_id":136713025,"body_markdown":"Some _Publishers_ may execute too many operations, if not everything, during the subscription itself. I.e., it takes a bit longer to subscribe. So without `subscribeOn` you will subscribe to them one by one in the same thread. Not a big problem maybe if the publishers are actually use their own thread for publishing. Latter is not always the case, and some may continue the processing in the same thread as they received the subscription command, which forces the following _subscription_ calls to wait for the current one. With `subscribeOn` you always switch to a new thread to avoid that","body":"Some <i>Publishers</i> may execute too many operations, if not everything, during the subscription itself. I.e., it takes a bit longer to subscribe. So without <code>subscribeOn</code> you will subscribe to them one by one in the same thread. Not a big problem maybe if the publishers are actually use their own thread for publishing. Latter is not always the case, and some may continue the processing in the same thread as they received the subscription command, which forces the following <i>subscription</i> calls to wait for the current one. With <code>subscribeOn</code> you always switch to a new thread to avoid that"}],"owner":{"account_id":4552102,"reputation":175,"user_id":3696953,"display_name":"duppydodah"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700778552,"creation_date":1700778552,"question_id":77539883,"body_markdown":"I am trying to confirm 2 things.\r\n\r\nOne, that zipping a collection of Monos or Fluxes will in fact run blocking-type calls such as hitting API endpoints, DB calls, or other network-related calls in a non-blocking context in parallel.\r\n\r\n```\r\nMono&lt;A&gt; a = myDatabaseCall();\r\nMono&lt;B&gt; b = myAPICall();\r\nMono&lt;C&gt; c = myBlockingCall();\r\n\r\n// Code I would like to be executed in parallel (at the same time)\r\nMono.zip(a, b, c)\r\n```\r\n\r\nTwo, how to run a parallel call when the return type of 1 call is `Mono&lt;Void&gt;` &amp; for the other calls are non-void.\r\n\r\n```\r\nMono&lt;A&gt; a = myDatabaseCall();\r\nMono&lt;Void&gt; b = notifySystem();\r\n\r\n// How would you run in parallel since, Mono.zip doesn&#39;t support Void? Use Flux.zip?\r\nMono.zip(a, b)\r\n```\r\n\r\nAlso, I am not super familiar the methods `fromCallable()` or `subscribeOn` &amp; I was curious to know if anyone knew if this scenario would be a use case for them?\r\n\r\n```\r\nMono.fromCallable(() -&gt; myDatabaseCall())\r\n    .subscribeOn(Schedulers.boundedElastic());  // or Schedulers.parallel() ?\r\n```","title":"Project Reactor - Does Mono/Flux Zip method run code in parallel &amp; how to handle Void return type?","body":"<p>I am trying to confirm 2 things.</p>\n<p>One, that zipping a collection of Monos or Fluxes will in fact run blocking-type calls such as hitting API endpoints, DB calls, or other network-related calls in a non-blocking context in parallel.</p>\n<pre><code>Mono&lt;A&gt; a = myDatabaseCall();\nMono&lt;B&gt; b = myAPICall();\nMono&lt;C&gt; c = myBlockingCall();\n\n// Code I would like to be executed in parallel (at the same time)\nMono.zip(a, b, c)\n</code></pre>\n<p>Two, how to run a parallel call when the return type of 1 call is <code>Mono&lt;Void&gt;</code> &amp; for the other calls are non-void.</p>\n<pre><code>Mono&lt;A&gt; a = myDatabaseCall();\nMono&lt;Void&gt; b = notifySystem();\n\n// How would you run in parallel since, Mono.zip doesn't support Void? Use Flux.zip?\nMono.zip(a, b)\n</code></pre>\n<p>Also, I am not super familiar the methods <code>fromCallable()</code> or <code>subscribeOn</code> &amp; I was curious to know if anyone knew if this scenario would be a use case for them?</p>\n<pre><code>Mono.fromCallable(() -&gt; myDatabaseCall())\n    .subscribeOn(Schedulers.boundedElastic());  // or Schedulers.parallel() ?\n</code></pre>\n"},{"tags":["java","amazon-web-services","spring-boot","aws-lambda","spring-cloud"],"owner":{"account_id":22346686,"reputation":1,"user_id":16565559,"display_name":"Kofi Boateng"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700778440,"creation_date":1700778440,"question_id":77539876,"body_markdown":"In the past I have created AWS Lambdas using Spring Cloud Function and everything worked fine. I believe I used Spring Boot 3.0.0 and used Java 11. Now I am currently using Spring 3.1.6 and Java 17 to create a sample function and I cannot seem to get it to work like before. Below, I will show what my Pom file looks like as well. I even added a MANIFEST.MF in the correct file structure, and I am still not getting the function to be called. Since the last time I created the working function, it has only been roughly 8 months. Has there been any significant changes In how to invoke the function?\r\n\r\n\r\n\r\n\r\n\r\n\r\nAWS Handler portion (How you used to invoke the function within AWS)\r\norg.springframework.cloud.function.adapter.aws.FunctionInvoker::handleRequest\r\n\r\nFile Structure\r\n\r\n```\r\npackage com.example.demo;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.annotation.Bean;\r\n\r\nimport java.util.function.Function;\r\n\r\n@SpringBootApplication\r\npublic class DemoApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(DemoApplication.class, args);\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic Function&lt;String,String&gt; capitalize(){return String::toUpperCase;}\r\n\r\n}\r\n```\r\n\r\nPOM\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.6&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2022.0.4&lt;/spring-cloud.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-function-context&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-function-adapter-aws&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;mainClass&gt;com.example.demo.DemoApplication&lt;/mainClass&gt;\r\n\t\t\t\t\t&lt;image&gt;\r\n\t\t\t\t\t\t&lt;builder&gt;paketobuildpacks/builder-jammy-base:latest&lt;/builder&gt;\r\n\t\t\t\t\t&lt;/image&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.5.0&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\r\n\t\t\t\t\t&lt;shadedArtifactAttached&gt;true&lt;/shadedArtifactAttached&gt;\r\n\t\t\t\t\t&lt;shadedClassifierName&gt;aws&lt;/shadedClassifierName&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n","title":"Spring Cloud and AWS Lambda: Issue with MAIN_CLASS not being found","body":"<p>In the past I have created AWS Lambdas using Spring Cloud Function and everything worked fine. I believe I used Spring Boot 3.0.0 and used Java 11. Now I am currently using Spring 3.1.6 and Java 17 to create a sample function and I cannot seem to get it to work like before. Below, I will show what my Pom file looks like as well. I even added a MANIFEST.MF in the correct file structure, and I am still not getting the function to be called. Since the last time I created the working function, it has only been roughly 8 months. Has there been any significant changes In how to invoke the function?</p>\n<p>AWS Handler portion (How you used to invoke the function within AWS)\norg.springframework.cloud.function.adapter.aws.FunctionInvoker::handleRequest</p>\n<p>File Structure</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.Bean;\n\nimport java.util.function.Function;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n    @Bean\n    public Function&lt;String,String&gt; capitalize(){return String::toUpperCase;}\n\n}\n</code></pre>\n<p>POM</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.6&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2022.0.4&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-function-context&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-function-adapter-aws&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;com.example.demo.DemoApplication&lt;/mainClass&gt;\n                    &lt;image&gt;\n                        &lt;builder&gt;paketobuildpacks/builder-jammy-base:latest&lt;/builder&gt;\n                    &lt;/image&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.5.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\n                    &lt;shadedArtifactAttached&gt;true&lt;/shadedArtifactAttached&gt;\n                    &lt;shadedClassifierName&gt;aws&lt;/shadedClassifierName&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["javascript","java","import"],"comments":[{"owner":{"account_id":270764,"reputation":4103,"user_id":560902,"accept_rate":80,"display_name":"Jochen Bedersdorfer"},"score":0,"creation_date":1444014457,"post_id":32940676,"comment_id":53706712,"body_markdown":"Maybe the data is in JSON format (there is no &#39;javascript&#39; data format)","body":"Maybe the data is in JSON format (there is no &#39;javascript&#39; data format)"},{"owner":{"account_id":7055664,"reputation":73,"user_id":5403579,"accept_rate":67,"display_name":"Infinitylsx"},"score":0,"creation_date":1444016860,"post_id":32940676,"comment_id":53707235,"body_markdown":"@Jochen_Bedersdorfer yeh I had a feeling I would just sound dumb. I have no idea what else to call it. My question is CAN I use that in java or is that not possible?","body":"@Jochen_Bedersdorfer yeh I had a feeling I would just sound dumb. I have no idea what else to call it. My question is CAN I use that in java or is that not possible?"},{"owner":{"account_id":5934440,"reputation":1281,"user_id":4667934,"display_name":"LinkBerest"},"score":0,"creation_date":1444017696,"post_id":32940676,"comment_id":53707418,"body_markdown":"[how to parse json in java](https://stackoverflow.com/questions/2591098/how-to-parse-json-in-java)","body":"<a href=\"https://stackoverflow.com/questions/2591098/how-to-parse-json-in-java\">how to parse json in java</a>"}],"answers":[{"tags":[],"owner":{"account_id":5373668,"reputation":243,"user_id":4281350,"accept_rate":100,"display_name":"OsYYYY"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1444017674,"creation_date":1444017674,"answer_id":32941077,"question_id":32940676,"body_markdown":"In Automatical way,\r\n\r\nWhen you get json data from steam api in js/web page, you could pass the data using ajax to java web application controller by RESTful API to comsume/handle that data in java program. You could search &quot;java spring web application&quot; for your starting point\r\n\r\n[http://docs.spring.io/docs/Spring-MVC-step-by-step/part1.html#step1.8][1]\r\n\r\nIn manual way,\r\n\r\nYou could just copy the result json string into java normal program to transform into Map/List object by some parsing function or library(e.g. gson) for further computation. \r\n\r\n[https://stackoverflow.com/questions/32823746/java-code-to-convert-json-into-text-in-key-value-pair/][2]\r\n\r\n\r\n  [1]: http://docs.spring.io/docs/Spring-MVC-step-by-step/part1.html#step1.8\r\n  [2]: https://stackoverflow.com/questions/32823746/java-code-to-convert-json-into-text-in-key-value-pair/","title":"Use Javascript API in a Java program","body":"<p>In Automatical way,</p>\n\n<p>When you get json data from steam api in js/web page, you could pass the data using ajax to java web application controller by RESTful API to comsume/handle that data in java program. You could search \"java spring web application\" for your starting point</p>\n\n<p><a href=\"http://docs.spring.io/docs/Spring-MVC-step-by-step/part1.html#step1.8\" rel=\"nofollow noreferrer\">http://docs.spring.io/docs/Spring-MVC-step-by-step/part1.html#step1.8</a></p>\n\n<p>In manual way,</p>\n\n<p>You could just copy the result json string into java normal program to transform into Map/List object by some parsing function or library(e.g. gson) for further computation. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/32823746/java-code-to-convert-json-into-text-in-key-value-pair/\">java code to convert json into text in key value pair</a></p>\n"}],"owner":{"account_id":7055664,"reputation":73,"user_id":5403579,"accept_rate":67,"display_name":"Infinitylsx"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":271,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700778247,"creation_date":1444014085,"question_id":32940676,"body_markdown":"I was looking to add data to my program based off of the steam market API that I have found [here][1] but I am unsure how to use this data as I believe it is in JavaScript. Is it possible to do so or is this not do-able?\r\n\r\n\r\n  [1]: https://www.npmjs.com/package/csgo-market#getsingleknifeprice-knife-skin-wear-stattrak-callback","title":"Use Javascript API in a Java program","body":"<p>I was looking to add data to my program based off of the steam market API that I have found <a href=\"https://www.npmjs.com/package/csgo-market#getsingleknifeprice-knife-skin-wear-stattrak-callback\" rel=\"nofollow noreferrer\">here</a> but I am unsure how to use this data as I believe it is in JavaScript. Is it possible to do so or is this not do-able?</p>\n"},{"tags":["java","docker","ubuntu","centos"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1700763296,"post_id":77538941,"comment_id":136696974,"body_markdown":"Please **do not** post images of code, data, error messages, etc. Copy or type the text into the question. Please reserve the use of images for diagrams or demonstrating rendering bugs, things that are impossible to describe accurately via text. Code or sample data in images can&#39;t be copied and pasted in order to search about a problem or reproduce it. For more details read the Meta FAQ entry [Why not upload images of code/errors when asking a question?](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557)","body":"Please <b>do not</b> post images of code, data, error messages, etc. Copy or type the text into the question. Please reserve the use of images for diagrams or demonstrating rendering bugs, things that are impossible to describe accurately via text. Code or sample data in images can&#39;t be copied and pasted in order to search about a problem or reproduce it. For more details read the Meta FAQ entry <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">Why not upload images of code/errors when asking a question?</a>"}],"owner":{"account_id":29660181,"reputation":1,"user_id":22731915,"display_name":"Tyler Pearson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1700768600,"answer_count":0,"score":-1,"last_activity_date":1700777093,"creation_date":1700762861,"question_id":77538941,"body_markdown":"I am in a class learning about docker right now. I am trying to create and run my first docker image, which is a CentOS container that installs java and runs a jar file. Here is my dockerfile:[Dockerfile](https://i.stack.imgur.com/XW10W.png)\r\n\r\nWhenever I run the image, the container immediately shuts down. When I check the logs, I get an error stating that this version of the Java Runtime only recognizes class file versions up to 52.0. Here is the log: [Logs](https://i.stack.imgur.com/iQK7u.png)\r\n\r\nAt first I thought that my JDK on my Ubuntu system which is running docker was the problem. I tried uninstalling, reinstalling, and updating the java on my Ubuntu system, but this didn&#39;t change anything. Then I realized that I was probably installing an outdated JDK for CentOS in my Dockerfile. That is when I added the &quot;RUN yum -y update&quot; line before installing java. This also did not change anything. I am very new to both linux and docker, and I don&#39;t really know what else to try from here. \r\n\r\nI understand that I need to make sure the JDK matches with what the java program is configured for. I am mostly hoping someone can tell me how to do that within my *Dockerfile* so that my CentOS container is running the correct JDK.","title":"Running docker image fails: This version of the Java Runtime only recognizes class file versions up to 52.0","body":"<p>I am in a class learning about docker right now. I am trying to create and run my first docker image, which is a CentOS container that installs java and runs a jar file. Here is my dockerfile:<a href=\"https://i.stack.imgur.com/XW10W.png\" rel=\"nofollow noreferrer\">Dockerfile</a></p>\n<p>Whenever I run the image, the container immediately shuts down. When I check the logs, I get an error stating that this version of the Java Runtime only recognizes class file versions up to 52.0. Here is the log: <a href=\"https://i.stack.imgur.com/iQK7u.png\" rel=\"nofollow noreferrer\">Logs</a></p>\n<p>At first I thought that my JDK on my Ubuntu system which is running docker was the problem. I tried uninstalling, reinstalling, and updating the java on my Ubuntu system, but this didn't change anything. Then I realized that I was probably installing an outdated JDK for CentOS in my Dockerfile. That is when I added the &quot;RUN yum -y update&quot; line before installing java. This also did not change anything. I am very new to both linux and docker, and I don't really know what else to try from here.</p>\n<p>I understand that I need to make sure the JDK matches with what the java program is configured for. I am mostly hoping someone can tell me how to do that within my <em>Dockerfile</em> so that my CentOS container is running the correct JDK.</p>\n"},{"tags":["java","ldap","jndi"],"comments":[{"owner":{"account_id":4254130,"reputation":13758,"user_id":3480246,"display_name":"Jan"},"score":0,"creation_date":1496033701,"post_id":44234817,"comment_id":75479313,"body_markdown":"Did you test with secure connection ldaps://...?","body":"Did you test with secure connection ldaps://...?"},{"owner":{"account_id":6912362,"reputation":11,"user_id":5307738,"display_name":"MinSub so"},"score":0,"creation_date":1496036416,"post_id":44234817,"comment_id":75480117,"body_markdown":"no i don&#39;t. because almost 2017.04 LDAP was fine. client login error dose not occured. why should i use LDAPS? @Jan","body":"no i don&#39;t. because almost 2017.04 LDAP was fine. client login error dose not occured. why should i use LDAPS? @Jan"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1656372940,"post_id":44234817,"comment_id":128551413,"body_markdown":"We would need to know what LDAP server you are using and all relevant configuration information. But why aren&#39;t you using LDAPS? That&#39;s the easy solution.","body":"We would need to know what LDAP server you are using and all relevant configuration information. But why aren&#39;t you using LDAPS? That&#39;s the easy solution."}],"answers":[{"comments":[{"owner":{"account_id":6912362,"reputation":11,"user_id":5307738,"display_name":"MinSub so"},"score":0,"creation_date":1496651866,"post_id":44240351,"comment_id":75731069,"body_markdown":"hmm. @jwilleke thank you. but this is not helpful for me.","body":"hmm. @jwilleke thank you. but this is not helpful for me."},{"owner":{"account_id":6912362,"reputation":11,"user_id":5307738,"display_name":"MinSub so"},"score":0,"creation_date":1496652054,"post_id":44240351,"comment_id":75731201,"body_markdown":"because, i&#39;m able to connect success LDAP auth and sometimes the same connection giving connection refusing errors. if i use LDAP url use cluster.com( this cluster clusting a.com, b.com, c.com ... and so on), sometimes LDAP response LDAP error code 8. but if i use a.clusteredLdap.com, sometimes LDAP response connection refuesed.","body":"because, i&#39;m able to connect success LDAP auth and sometimes the same connection giving connection refusing errors. if i use LDAP url use cluster.com( this cluster clusting a.com, b.com, c.com ... and so on), sometimes LDAP response LDAP error code 8. but if i use a.clusteredLdap.com, sometimes LDAP response connection refuesed."}],"tags":[],"owner":{"account_id":31959,"reputation":10608,"user_id":88122,"accept_rate":0,"display_name":"jwilleke"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1496054010,"creation_date":1496054010,"answer_id":44240351,"question_id":44234817,"body_markdown":"These errors indicate your LDAP server is set to Require Signing.\r\n\r\nIf you connect using SSL, then the data signing is not required.4\r\n\r\nIf you were able to make an successful bind, then I would &quot;guess&quot; the server you first connected to does NOT have signing enabled and you are being referred to a Domain Controller that has signing enabled.\r\n\r\nSee:\r\n[https://support.microsoft.com/en-us/help/2545140/fast-esp-unable-to-use-active-directory-accounts-for-authentication-login-fails-with-ldaperr-dsid-0c0901fc][1]\r\n\r\n\r\n  [1]: https://support.microsoft.com/en-us/help/2545140/fast-esp-unable-to-use-active-directory-accounts-for-authentication-login-fails-with-ldaperr-dsid-0c0901fc","title":"LDAP error code 8 for some users but not others","body":"<p>These errors indicate your LDAP server is set to Require Signing.</p>\n\n<p>If you connect using SSL, then the data signing is not required.4</p>\n\n<p>If you were able to make an successful bind, then I would \"guess\" the server you first connected to does NOT have signing enabled and you are being referred to a Domain Controller that has signing enabled.</p>\n\n<p>See:\n<a href=\"https://support.microsoft.com/en-us/help/2545140/fast-esp-unable-to-use-active-directory-accounts-for-authentication-login-fails-with-ldaperr-dsid-0c0901fc\" rel=\"nofollow noreferrer\">https://support.microsoft.com/en-us/help/2545140/fast-esp-unable-to-use-active-directory-accounts-for-authentication-login-fails-with-ldaperr-dsid-0c0901fc</a></p>\n"}],"owner":{"account_id":6912362,"reputation":11,"user_id":5307738,"display_name":"MinSub so"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8659,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700777015,"creation_date":1496033558,"question_id":44234817,"body_markdown":"I have a some problems.\r\n\r\nListed Error:\r\n\r\n    LDAP error code 8\r\n\r\nServer log:\r\n\r\n\tjavax.naming.AuthenticationNotSupportedException: [LDAP: error code 8 - 00002028: LdapErr: DSID-0C090202, comment: The server requires binds to turn on integrity checking if SSL\\TLS are not already active on the connection, data 0, v2580 ]\r\n\t\r\nProblem action(?):\r\n\r\n- client to login request to server. and server send request to LDAP. Some people can login successfully, but for other some people login failed:\r\n\r\n    LDAP response error code 8\r\n\r\nServer log got [javax.naming.AuthenticationNotSupportedException: [LDAP: error code 8 - 00002028: LdapErr: DSID-0C090202, comment: The server requires binds to turn on integrity checking if SSL\\TLS are not already active on the connection, data 0, v2580 ]]\r\n\t\t\r\nBut I am using LDAP. no LDAPS.\r\n\t\t\r\n- Some people said check under `KRDOM01 : HKEY_LOCAL_MACHINE \\ SYSTEM \\ CurrentControlSet \\ Services \\ NTDS \\ Parameters \\ LDAPServerIntegrity = 1`\r\n\t\t\r\nbut my setting is already `LDAPServerIntegrity = 1`\r\n\t\t\r\nMy code:\r\n\r\n\t\tHashtable&lt;String, Object&gt; env = new Hashtable&lt;String, Object&gt;();\r\n\t\tenv.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\r\n\t\tenv.put(Context.PROVIDER_URL, &quot;ldap://&quot;+host+&quot;:&quot;+port);\r\n\t\tenv.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\r\n\t\tenv.put(Context.SECURITY_PRINCIPAL, principal);\r\n\t\tenv.put(Context.SECURITY_CREDENTIALS, pwd);\r\n\t\r\n\t\r\n\t\t\r\nWhy can some people login ok, but some people got fail?\r\n\t","title":"LDAP error code 8 for some users but not others","body":"<p>I have a some problems.</p>\n<p>Listed Error:</p>\n<pre><code>LDAP error code 8\n</code></pre>\n<p>Server log:</p>\n<pre><code>javax.naming.AuthenticationNotSupportedException: [LDAP: error code 8 - 00002028: LdapErr: DSID-0C090202, comment: The server requires binds to turn on integrity checking if SSL\\TLS are not already active on the connection, data 0, v2580 ]\n</code></pre>\n<p>Problem action(?):</p>\n<ul>\n<li><p>client to login request to server. and server send request to LDAP. Some people can login successfully, but for other some people login failed:</p>\n<p>LDAP response error code 8</p>\n</li>\n</ul>\n<p>Server log got [javax.naming.AuthenticationNotSupportedException: [LDAP: error code 8 - 00002028: LdapErr: DSID-0C090202, comment: The server requires binds to turn on integrity checking if SSL\\TLS are not already active on the connection, data 0, v2580 ]]</p>\n<p>But I am using LDAP. no LDAPS.</p>\n<ul>\n<li>Some people said check under <code>KRDOM01 : HKEY_LOCAL_MACHINE \\ SYSTEM \\ CurrentControlSet \\ Services \\ NTDS \\ Parameters \\ LDAPServerIntegrity = 1</code></li>\n</ul>\n<p>but my setting is already <code>LDAPServerIntegrity = 1</code></p>\n<p>My code:</p>\n<pre><code>    Hashtable&lt;String, Object&gt; env = new Hashtable&lt;String, Object&gt;();\n    env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\n    env.put(Context.PROVIDER_URL, &quot;ldap://&quot;+host+&quot;:&quot;+port);\n    env.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\n    env.put(Context.SECURITY_PRINCIPAL, principal);\n    env.put(Context.SECURITY_CREDENTIALS, pwd);\n\n\n    \n</code></pre>\n<p>Why can some people login ok, but some people got fail?</p>\n"},{"tags":["java","amazon-web-services","cloud9"],"answers":[{"tags":[],"owner":{"account_id":3079150,"reputation":31,"user_id":2607798,"display_name":"Sotir Sotirov"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1700777013,"creation_date":1587882648,"answer_id":61436691,"question_id":61363005,"body_markdown":"EDIT:\r\nRecently they added Enhanced support for Java SE 11. There is many specifics though. This is the URL with the documentation about the &quot;Enhanced support for Java development&quot; : https://docs.aws.amazon.com/cloud9/latest/user-guide/enhanced-java.html\r\n\r\n\r\nOriginal Answer:\r\nCloud9 doesn&#39;t support debug for all languages. Java debugging is not supported. Here is a full list with languages support level in Cloud9:\r\nhttps://docs.aws.amazon.com/cloud9/latest/user-guide/language-support.html","title":"How can i debug a simple java file in AWS Cloud9?","body":"<p>EDIT:\nRecently they added Enhanced support for Java SE 11. There is many specifics though. This is the URL with the documentation about the &quot;Enhanced support for Java development&quot; : <a href=\"https://docs.aws.amazon.com/cloud9/latest/user-guide/enhanced-java.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/cloud9/latest/user-guide/enhanced-java.html</a></p>\n<p>Original Answer:\nCloud9 doesn't support debug for all languages. Java debugging is not supported. Here is a full list with languages support level in Cloud9:\n<a href=\"https://docs.aws.amazon.com/cloud9/latest/user-guide/language-support.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/cloud9/latest/user-guide/language-support.html</a></p>\n"}],"owner":{"account_id":11867147,"reputation":15,"user_id":8684370,"display_name":"elliot_m"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":867,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700777013,"creation_date":1587551749,"question_id":61363005,"body_markdown":"I have to debug a simple java file, i set the breakpoint, tap the bug icon and run but it doesn’t stop on breakpoint and only run the file.","title":"How can i debug a simple java file in AWS Cloud9?","body":"<p>I have to debug a simple java file, i set the breakpoint, tap the bug icon and run but it doesn’t stop on breakpoint and only run the file.</p>\n"},{"tags":["java","recursion"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":5,"creation_date":1700771145,"post_id":77539389,"comment_id":136697955,"body_markdown":"Why would ChatGPT be able to tell you what to do? It&#39;s not a teaching tool, It doesn&#39;t know what code is, all it knows is how to write what seems like a convincing story with _zero guarantee_ that the story is actually based on facts. Also, nowhere in the question does it ask you to use recursion, so can you explain why you decided to use recursion to solve this problem?","body":"Why would ChatGPT be able to tell you what to do? It&#39;s not a teaching tool, It doesn&#39;t know what code is, all it knows is how to write what seems like a convincing story with <i>zero guarantee</i> that the story is actually based on facts. Also, nowhere in the question does it ask you to use recursion, so can you explain why you decided to use recursion to solve this problem?"},{"owner":{"account_id":29934105,"reputation":1,"user_id":22940284,"display_name":"AdHass"},"score":0,"creation_date":1700771671,"post_id":77539389,"comment_id":136698029,"body_markdown":"i searched up problems on leetcode with the tag recursion and it was up there. I know that it can be solved easily without recursion but i want to train myself to think in a recursive way. Can you maybe recommend me somewhere else where i can train to get better at recursion ? because all of the problems i found can be solved easily wihtout using it and it just complicates it.","body":"i searched up problems on leetcode with the tag recursion and it was up there. I know that it can be solved easily without recursion but i want to train myself to think in a recursive way. Can you maybe recommend me somewhere else where i can train to get better at recursion ? because all of the problems i found can be solved easily wihtout using it and it just complicates it."},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1700771869,"post_id":77539389,"comment_id":136698049,"body_markdown":"I am guessing that L and W must be integers, but this is nowhere mentioned in your questions. The thing is, if they don&#39;t have to be integers, the problem is trivial.","body":"I am guessing that L and W must be integers, but this is nowhere mentioned in your questions. The thing is, if they don&#39;t have to be integers, the problem is trivial."},{"owner":{"account_id":12817783,"reputation":373,"user_id":14045674,"display_name":"Jore"},"score":0,"creation_date":1700772583,"post_id":77539389,"comment_id":136698125,"body_markdown":"@AdHass if you want problems that **require recursion**, i know some good ones i enjoyed solving. Try creating an algorithm to **print all the possible combinations of given letters**, **converting numbers to words and vice versa**, also visit **dcoder.com &gt; challenges &gt; hard**","body":"@AdHass if you want problems that <b>require recursion</b>, i know some good ones i enjoyed solving. Try creating an algorithm to <b>print all the possible combinations of given letters</b>, <b>converting numbers to words and vice versa</b>, also visit <b>dcoder.com &gt; challenges &gt; hard</b>"},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":1,"creation_date":1700772814,"post_id":77539389,"comment_id":136698150,"body_markdown":"This problem is not suitable for recursion. You would kill the stack for larger inputs.","body":"This problem is not suitable for recursion. You would kill the stack for larger inputs."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1700773548,"post_id":77539389,"comment_id":136698209,"body_markdown":"I don&#39;t understand the problem. Could you, please, edit the question to show one or more examples?","body":"I don&#39;t understand the problem. Could you, please, edit the question to show one or more examples?"},{"owner":{"account_id":29934105,"reputation":1,"user_id":22940284,"display_name":"AdHass"},"score":0,"creation_date":1700782261,"post_id":77539389,"comment_id":136698952,"body_markdown":"@OldDogProgrammer here you go mate https://leetcode.com/problems/construct-the-rectangle/description/\nI actually managed to find what was wrong with the code it was just something to do with the parenthesis and in the base condition i missed another condition :). Thank you!","body":"@OldDogProgrammer here you go mate <a href=\"https://leetcode.com/problems/construct-the-rectangle/description/\" rel=\"nofollow noreferrer\">leetcode.com/problems/construct-the-rectangle/description</a> I actually managed to find what was wrong with the code it was just something to do with the parenthesis and in the base condition i missed another condition :). Thank you!"},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1700782615,"post_id":77539389,"comment_id":136698972,"body_markdown":"If you solved your problem, either write up an answer, or if it was &quot;obvious&quot; in retrospect, just delete the question again.","body":"If you solved your problem, either write up an answer, or if it was &quot;obvious&quot; in retrospect, just delete the question again."},{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1700785475,"post_id":77539389,"comment_id":136699161,"body_markdown":"`Math.round(W);` does nothing.  Also, there is no solution whenever A is a prime number (Other than a 1 pixel wide page of height L).  This is a simple iteration problem, and using recursion is completely inappropriate.  To paraphrase [Jamie Zawinski](http://www.jwz.org/), _&quot;Some people, when confronted with a problem, think_ “I know, I&#39;ll use recursion.”  _Now they have two problems.&quot;_","body":"<code>Math.round(W);</code> does nothing.  Also, there is no solution whenever A is a prime number (Other than a 1 pixel wide page of height L).  This is a simple iteration problem, and using recursion is completely inappropriate.  To paraphrase <a href=\"http://www.jwz.org/\" rel=\"nofollow noreferrer\">Jamie Zawinski</a>, <i>&quot;Some people, when confronted with a problem, think</i> “I know, I&#39;ll use recursion.”  <i>Now they have two problems.&quot;</i>"}],"answers":[{"comments":[{"owner":{"account_id":29934105,"reputation":1,"user_id":22940284,"display_name":"AdHass"},"score":0,"creation_date":1700782107,"post_id":77539771,"comment_id":136698945,"body_markdown":"Thank you for the response man and for the advice. It is actually not my homework i am just trying to get better at reursion using leetcode haha. The problem with the parethesis you mentioned is what was wrong added to another problem in the base conditino which should be if ((L*W==a)||(L==a) ) instead of just if(L*W==a). Thank you!!","body":"Thank you for the response man and for the advice. It is actually not my homework i am just trying to get better at reursion using leetcode haha. The problem with the parethesis you mentioned is what was wrong added to another problem in the base conditino which should be if ((L<i>W==a)||(L==a) ) instead of just if(L</i>W==a). Thank you!!"}],"tags":[],"owner":{"account_id":27259982,"reputation":36,"user_id":20782957,"display_name":"bunicu2k4"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700776097,"creation_date":1700776097,"answer_id":77539771,"question_id":77539389,"body_markdown":"In your homework, a = L*W, which means that W = a/L. If you try the next iteration with the next length L+1, it results that the next W should be a/(L+1). The error is that in your code the next W is a / L + 1.\r\n\r\n*when i put the code in chatgpt*\r\n\r\nIf I were you I would not put the code in chatgpt just yet. If this is your homework then your goal is to learn from it. When you are able to verify everything that chatgpt tells you back, then maybe it will be useful to you.\r\nYou are correct, W can never be bigger than L. They start from equal values, and then L only increases while W remains the same or decreases.\r\n\r\n","title":"Trouble understanding what&#39;s wrong with my recursion","body":"<p>In your homework, a = L*W, which means that W = a/L. If you try the next iteration with the next length L+1, it results that the next W should be a/(L+1). The error is that in your code the next W is a / L + 1.</p>\n<p><em>when i put the code in chatgpt</em></p>\n<p>If I were you I would not put the code in chatgpt just yet. If this is your homework then your goal is to learn from it. When you are able to verify everything that chatgpt tells you back, then maybe it will be useful to you.\nYou are correct, W can never be bigger than L. They start from equal values, and then L only increases while W remains the same or decreases.</p>\n"},{"comments":[{"owner":{"account_id":29934105,"reputation":1,"user_id":22940284,"display_name":"AdHass"},"score":0,"creation_date":1700781939,"post_id":77539803,"comment_id":136698935,"body_markdown":"Thank you for the comment. I actually managed to find the error. it was as you said a stack overflow and it was because the base condition did not have  another condition with the L*W==a which is (L*W==a)||(a==L) and in the recursion call it needed parenthesis that were not there for the a/(L+1)","body":"Thank you for the comment. I actually managed to find the error. it was as you said a stack overflow and it was because the base condition did not have  another condition with the L<i>W==a which is (L</i>W==a)||(a==L) and in the recursion call it needed parenthesis that were not there for the a/(L+1)"},{"owner":{"account_id":12817783,"reputation":373,"user_id":14045674,"display_name":"Jore"},"score":0,"creation_date":1700797656,"post_id":77539803,"comment_id":136699949,"body_markdown":"@AdHass You should also know that recursion is more resource intensive and is slower than a loop. Although it may not be significant in small programs, this causes major performance issues in large programs and should be avoided where possible.","body":"@AdHass You should also know that recursion is more resource intensive and is slower than a loop. Although it may not be significant in small programs, this causes major performance issues in large programs and should be avoided where possible."},{"owner":{"account_id":29934105,"reputation":1,"user_id":22940284,"display_name":"AdHass"},"score":0,"creation_date":1700815213,"post_id":77539803,"comment_id":136701758,"body_markdown":"Thank you for the heads up. I know that i can be solved easily iteratively but i am trying to get better at recursion and this was one of the problems witht he recursion tag in leetcode even though it is not the best solution","body":"Thank you for the heads up. I know that i can be solved easily iteratively but i am trying to get better at recursion and this was one of the problems witht he recursion tag in leetcode even though it is not the best solution"}],"tags":[],"owner":{"account_id":12817783,"reputation":373,"user_id":14045674,"display_name":"Jore"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700776749,"creation_date":1700776749,"answer_id":77539803,"question_id":77539389,"body_markdown":"**PROBLEM**\r\n\r\nThe problem with this recursion is that it runs infinitely (never stops) and this causes a **stack overflow error**.\r\n\r\nThe reason why the error is at line **19**:\r\n\r\n```java\r\nreturn (Calcul(a, L + 1, a / L + 1));\r\n```\r\n\r\nis because it&#39;s the line that makes the recursive call. (calls `Calcul`)\r\n\r\n**WHY IS THE RECURSION RUNNING INFINITELY**\r\n\r\nThis is because the only condition that terminates the recursion never gets fulfilled.\r\n\r\n```java\r\nif (L * W == a )\r\n```\r\n\r\nso more calls to `return (Calcul(a, L + 1, a / L + 1));` just continue getting made.\r\n\r\n**SOLUTION**\r\n\r\nI am not sure if the required values of **L and W** don&#39;t need to contain decimals, but I shall use integers like you did.\r\n\r\nWhat we need is to find the multiples of the area with the least difference. For example, when area is `20`. L and W will be `5x4` respectively.\r\n\r\n```java\r\nimport java.util.Arrays;\r\n\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.out.println(Arrays.toString(getLandW(20)));\r\n\t}\r\n\r\n\tpublic static int[] getLandW(int area) {\r\n\t\tint LandW[] = new int[2], difference = Integer.MAX_VALUE;\r\n\r\n\t\tfor (int factor = area, otherFactor, diff; factor &gt; 0; factor--)\r\n\r\n            // Stop when we find a factor\r\n\t\t\tif ((area % factor) == 0) {\r\n\t\t\t\totherFactor = area / factor;\r\n\t\t\t\tdiff = Math.abs(factor - otherFactor);\r\n\r\n                // When the difference of the factors\r\n                // is less than current\r\n\t\t\t\tif (diff &lt; difference) {\r\n\t\t\t\t\tdifference = diff;\r\n\t\t\t\t\tLandW[0] = factor;\r\n\t\t\t\t\tLandW[1] = otherFactor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\treturn LandW;\r\n\t}\r\n}\r\n```\r\n\r\nThis problem did not require recursion to be solved, but if you are up for recursion challenges, here are some.\r\n\r\nMake a program to:\r\n\r\n 1. Print all the possible combinations of letters in a given word.\r\n 2. Convert numbers to words [ [My solution](https://github.com/jorexdeveloper/JavaUtils/blob/root/ScientificCalculator/code/jorex/programs/ntw/NumberToWord.java) ].\r\n\r\nFind more [here](https://code.dcoder.tech/challenges/).","title":"Trouble understanding what&#39;s wrong with my recursion","body":"<p><strong>PROBLEM</strong></p>\n<p>The problem with this recursion is that it runs infinitely (never stops) and this causes a <strong>stack overflow error</strong>.</p>\n<p>The reason why the error is at line <strong>19</strong>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>return (Calcul(a, L + 1, a / L + 1));\n</code></pre>\n<p>is because it's the line that makes the recursive call. (calls <code>Calcul</code>)</p>\n<p><strong>WHY IS THE RECURSION RUNNING INFINITELY</strong></p>\n<p>This is because the only condition that terminates the recursion never gets fulfilled.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (L * W == a )\n</code></pre>\n<p>so more calls to <code>return (Calcul(a, L + 1, a / L + 1));</code> just continue getting made.</p>\n<p><strong>SOLUTION</strong></p>\n<p>I am not sure if the required values of <strong>L and W</strong> don't need to contain decimals, but I shall use integers like you did.</p>\n<p>What we need is to find the multiples of the area with the least difference. For example, when area is <code>20</code>. L and W will be <code>5x4</code> respectively.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\n\npublic class Main {\n    public static void main(String[] args) {\n        System.out.println(Arrays.toString(getLandW(20)));\n    }\n\n    public static int[] getLandW(int area) {\n        int LandW[] = new int[2], difference = Integer.MAX_VALUE;\n\n        for (int factor = area, otherFactor, diff; factor &gt; 0; factor--)\n\n            // Stop when we find a factor\n            if ((area % factor) == 0) {\n                otherFactor = area / factor;\n                diff = Math.abs(factor - otherFactor);\n\n                // When the difference of the factors\n                // is less than current\n                if (diff &lt; difference) {\n                    difference = diff;\n                    LandW[0] = factor;\n                    LandW[1] = otherFactor;\n                }\n            }\n\n        return LandW;\n    }\n}\n</code></pre>\n<p>This problem did not require recursion to be solved, but if you are up for recursion challenges, here are some.</p>\n<p>Make a program to:</p>\n<ol>\n<li>Print all the possible combinations of letters in a given word.</li>\n<li>Convert numbers to words [ <a href=\"https://github.com/jorexdeveloper/JavaUtils/blob/root/ScientificCalculator/code/jorex/programs/ntw/NumberToWord.java\" rel=\"nofollow noreferrer\">My solution</a> ].</li>\n</ol>\n<p>Find more <a href=\"https://code.dcoder.tech/challenges/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":29934105,"reputation":1,"user_id":22940284,"display_name":"AdHass"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1700776749,"creation_date":1700769853,"question_id":77539389,"body_markdown":"My homework task:\r\n\r\nA web developer needs to know how to design a web page&#39;s size. So, given a specific rectangular web page’s area, your job by now is to design a rectangular web page, whose length L and width W satisfy the following requirements:\r\n\r\n- The area of the rectangular web page you designed must equal to the given target area.\r\n- The width W should not be larger than the length L, which means L &gt;= W.\r\n- The difference between length L and width W should be as small as possible.\r\n- Return an array [L, W] where L and W are the length and width of the web page you designed in sequence.\r\n\r\n\r\nIt says that there is problem in the recursion in the last line and i cannot understand it. Also when i put the code in chatgpt it says that i have to put the L&gt;W condition but i do not see why it is necessary in this code because it can never be bigger than L no ?\r\n\r\n```java\r\nimport java.util.Arrays;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        System.out.println(Arrays.toString(constructRectangle(20)));\r\n    }\r\n\r\n    public static int[] constructRectangle(int a) {\r\n        int L = (int) Math.round(Math.sqrt(a));\r\n        int W = (int) Math.round(Math.sqrt(a));\r\n        return Calcul(a, L, W);\r\n    }\r\n\r\n    public static int[] Calcul(int a,int L, int W){\r\n        Math.round(W);\r\n        if (L * W == a ){\r\n            return (new int[]{L,W});\r\n        }\r\n        return (Calcul(a, L + 1, a / L + 1));\r\n    }\r\n}\r\n```\r\n","title":"Trouble understanding what&#39;s wrong with my recursion","body":"<p>My homework task:</p>\n<p>A web developer needs to know how to design a web page's size. So, given a specific rectangular web page’s area, your job by now is to design a rectangular web page, whose length L and width W satisfy the following requirements:</p>\n<ul>\n<li>The area of the rectangular web page you designed must equal to the given target area.</li>\n<li>The width W should not be larger than the length L, which means L &gt;= W.</li>\n<li>The difference between length L and width W should be as small as possible.</li>\n<li>Return an array [L, W] where L and W are the length and width of the web page you designed in sequence.</li>\n</ul>\n<p>It says that there is problem in the recursion in the last line and i cannot understand it. Also when i put the code in chatgpt it says that i have to put the L&gt;W condition but i do not see why it is necessary in this code because it can never be bigger than L no ?</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\n\npublic class Main {\n    public static void main(String[] args) {\n        System.out.println(Arrays.toString(constructRectangle(20)));\n    }\n\n    public static int[] constructRectangle(int a) {\n        int L = (int) Math.round(Math.sqrt(a));\n        int W = (int) Math.round(Math.sqrt(a));\n        return Calcul(a, L, W);\n    }\n\n    public static int[] Calcul(int a,int L, int W){\n        Math.round(W);\n        if (L * W == a ){\n            return (new int[]{L,W});\n        }\n        return (Calcul(a, L + 1, a / L + 1));\n    }\n}\n</code></pre>\n"},{"tags":["java","class","methods","subclass"],"answers":[{"tags":[],"owner":{"account_id":23128584,"reputation":85,"user_id":17234028,"display_name":"Daniel Hern&#225;ndez"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700776376,"creation_date":1700776376,"answer_id":77539786,"question_id":77539370,"body_markdown":"You can either:\r\n\r\n - Make your &#39;Pergunta&#39; class abstract and create a method called &#39;calcularPontuacao&#39;\r\n\r\n```\r\npublic abstract class Pergunta {\r\n    public abstract int calcularPontuacao(); \r\n}\r\n```\r\nAnd then Override it on your child methods\r\n\r\n```\r\npublic class PerguntaArtes extends Pergunta{\r\n    @Override\r\n    public int calcularPontuacao() {\r\n        return pontosPergunta * 10;\r\n    }\r\n}\r\n\r\npublic class PerguntaScience extends Pergunta{\r\n    @Override\r\n    public int calcularPontuacao() {\r\n        return pontosPergunta * 20;\r\n    }\r\n}\r\n```\r\n\r\n - Create an interface with your method called &#39;calcularPontuacao&#39;\r\n\r\n```\r\npublic interface PuntuationRegister {\r\n    int calcularPontucao();\r\n}\r\n\r\npublic class PerguntaArtes implements PuntuationRegister{\r\n    @Override\r\n    public int calcularPontuacao() {\r\n        return pontosPergunta * 10;\r\n    }\r\n}\r\n```\r\n\r\nAlso I advice you to use .equalsIgnoreCase OR an enum for this part `if (pergunta.getArea().equals(&quot;PerguntaArtes&quot;))`\r\n","title":"How to call a method from a subclass?","body":"<p>You can either:</p>\n<ul>\n<li>Make your 'Pergunta' class abstract and create a method called 'calcularPontuacao'</li>\n</ul>\n<pre><code>public abstract class Pergunta {\n    public abstract int calcularPontuacao(); \n}\n</code></pre>\n<p>And then Override it on your child methods</p>\n<pre><code>public class PerguntaArtes extends Pergunta{\n    @Override\n    public int calcularPontuacao() {\n        return pontosPergunta * 10;\n    }\n}\n\npublic class PerguntaScience extends Pergunta{\n    @Override\n    public int calcularPontuacao() {\n        return pontosPergunta * 20;\n    }\n}\n</code></pre>\n<ul>\n<li>Create an interface with your method called 'calcularPontuacao'</li>\n</ul>\n<pre><code>public interface PuntuationRegister {\n    int calcularPontucao();\n}\n\npublic class PerguntaArtes implements PuntuationRegister{\n    @Override\n    public int calcularPontuacao() {\n        return pontosPergunta * 10;\n    }\n}\n</code></pre>\n<p>Also I advice you to use .equalsIgnoreCase OR an enum for this part <code>if (pergunta.getArea().equals(&quot;PerguntaArtes&quot;))</code></p>\n"}],"owner":{"account_id":29977998,"reputation":1,"user_id":22973742,"display_name":"Comicas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700776376,"creation_date":1700769570,"question_id":77539370,"body_markdown":"So I have this project where a I have a certain question, and if we answer it correctly is gives a certain amount of points that varies depending on the theme of the question. I have a class named Pergunta(Question) with subclasses of different themes like PerguntasArtes(ArtQuestions) and I want to write a method in each subclass to do the points calculation.\r\n\r\n```\r\n\r\npublic class Pergunta {\r\n    private String area;\r\n    private String pergunta;\r\n    private ArrayList&lt;String&gt; opcoes;\r\n    private String respostaCorreta;\r\n    private String dificuldade;\r\n    protected int pontosPergunta;\r\n\r\n    public Pergunta(String area, String pergunta, ArrayList&lt;String&gt; opcoes, String respostaCorreta, String dificuldade, int pontosPergunta) {\r\n        this.area = area;\r\n        this.pergunta = pergunta;\r\n        this.opcoes = opcoes;\r\n        this.respostaCorreta = respostaCorreta;\r\n        this.dificuldade = dificuldade;\r\n        this.pontosPergunta = pontosPergunta;\r\n\r\n    }\r\n\r\n    public static Pergunta readFromFile(String filename) {\r\n        try (BufferedReader br = new BufferedReader(new FileReader(filename))) {\r\n            String line;\r\n            while ((line = br.readLine()) != null) {\r\n                String[] parts = line.split(&quot;-&quot;);\r\n                String area = parts[0];\r\n                String dificuldade = parts[1];\r\n                String pergunta = parts[2];\r\n                ArrayList&lt;String&gt; opcoes = new ArrayList&lt;&gt;(Arrays.asList(parts[3].split(&quot;,&quot;)));\r\n                String respostaCorreta = parts[4];\r\n                int pontosPergunta = Integer.parseInt(parts[5]);\r\n                return new Pergunta(area, pergunta, opcoes, respostaCorreta, dificuldade, pontosPergunta);\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public String getPergunta() {\r\n        return pergunta;\r\n    }\r\n\r\n    public ArrayList&lt;String&gt; getOpcoes() {\r\n        return opcoes;\r\n    }\r\n\r\n    public void setArea(String area){\r\n        this.area=area;\r\n    }\r\n    public String getArea(){\r\n        return this.area;\r\n    }\r\n```\r\n\r\n\r\n```\r\npublic class PerguntaArtes extends Pergunta {\r\n    public PerguntaArtes(String area, String pergunta, ArrayList&lt;String&gt; opcoes, String respostaCorreta, String dificuldade, int pontosPergunta) {\r\n        super(area, pergunta, opcoes, respostaCorreta, dificuldade, pontosPergunta);\r\n    }\r\n\r\n    public int calcularPontuacao(){\r\n        return pontosPergunta * 10;\r\n    }\r\n}\r\n```\r\n\r\n\r\nthe following method is to check I an answer is right or not and I needed it to call the method from the subclass\r\n```\r\nprivate void checkAnswer(String selectedOption, String respostaCorreta, Pergunta pergunta){\r\n        if (selectedOption.equals(respostaCorreta)){\r\n            if (pergunta.getArea().equals(&quot;PerguntaArtes&quot;)){\r\n                PerguntaArtes PerguntaArtes = (PerguntaArtes) pergunta;\r\n                score += PerguntaArtes.calcularPontuacao();\r\n            }\r\n            if (pergunta.getArea().equals(&quot;PerguntaCiencias&quot;)){\r\n                score += 20;\r\n            }\r\n            if (pergunta.getArea().equals(&quot;PerguntaDesporto&quot;)){\r\n                score += 20;\r\n            }\r\n            questionnumber += 1;\r\n            if (questionnumber &lt;= 5){\r\n                displayQuestion(questionnumber);\r\n            }\r\n            else {\r\n                endGame();\r\n            }\r\n        }\r\n        else {\r\n            questionnumber += 1;\r\n            if (questionnumber &lt;= 5){\r\n                displayQuestion(questionnumber);\r\n            }\r\n            else {\r\n                endGame();\r\n            }\r\n        }\r\n    }\r\n```\r\nIn this case it gives me the following error:\r\n\r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.ClassCastException: class Pergunta cannot be cast to class PerguntaArtes (Pergunta and PerguntaArtes are in unnamed module of loader &#39;app&#39;)\r\n            at Screen.checkAnswer(Screen.java:164)\r\n            at Screen$2.actionPerformed(Screen.java:142)\r\n            at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)\r\n            at java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2313)\r\n            at java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:405)\r\n            at java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\r\n            at java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\r\n            at java.desktop/java.awt.Component.processMouseEvent(Component.java:6626)\r\n            at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3389)\r\n            at java.desktop/java.awt.Component.processEvent(Component.java:6391)\r\n            at java.desktop/java.awt.Container.processEvent(Container.java:2266)\r\n            at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:5001)\r\n            at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\r\n            at java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\r\n            at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)\r\n            at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)\r\n            at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)\r\n            at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)\r\n            at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\r\n            at java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\r\n            at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:775)\r\n            at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)\r\n            at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)\r\n            at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n            at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n            at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:97)\r\n            at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:747)\r\n            at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)\r\n            at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n            at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n            at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:744)\r\n            at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n            at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n            at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n            at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n            at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n            at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n\r\nI also tried other ways and couldn&#39;t find any solution.\r\nI also can&#39;t use instanceof or class.getName() because I am penalized if I use it.\r\nCan you guys help me?","title":"How to call a method from a subclass?","body":"<p>So I have this project where a I have a certain question, and if we answer it correctly is gives a certain amount of points that varies depending on the theme of the question. I have a class named Pergunta(Question) with subclasses of different themes like PerguntasArtes(ArtQuestions) and I want to write a method in each subclass to do the points calculation.</p>\n<pre><code>\npublic class Pergunta {\n    private String area;\n    private String pergunta;\n    private ArrayList&lt;String&gt; opcoes;\n    private String respostaCorreta;\n    private String dificuldade;\n    protected int pontosPergunta;\n\n    public Pergunta(String area, String pergunta, ArrayList&lt;String&gt; opcoes, String respostaCorreta, String dificuldade, int pontosPergunta) {\n        this.area = area;\n        this.pergunta = pergunta;\n        this.opcoes = opcoes;\n        this.respostaCorreta = respostaCorreta;\n        this.dificuldade = dificuldade;\n        this.pontosPergunta = pontosPergunta;\n\n    }\n\n    public static Pergunta readFromFile(String filename) {\n        try (BufferedReader br = new BufferedReader(new FileReader(filename))) {\n            String line;\n            while ((line = br.readLine()) != null) {\n                String[] parts = line.split(&quot;-&quot;);\n                String area = parts[0];\n                String dificuldade = parts[1];\n                String pergunta = parts[2];\n                ArrayList&lt;String&gt; opcoes = new ArrayList&lt;&gt;(Arrays.asList(parts[3].split(&quot;,&quot;)));\n                String respostaCorreta = parts[4];\n                int pontosPergunta = Integer.parseInt(parts[5]);\n                return new Pergunta(area, pergunta, opcoes, respostaCorreta, dificuldade, pontosPergunta);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n    public String getPergunta() {\n        return pergunta;\n    }\n\n    public ArrayList&lt;String&gt; getOpcoes() {\n        return opcoes;\n    }\n\n    public void setArea(String area){\n        this.area=area;\n    }\n    public String getArea(){\n        return this.area;\n    }\n</code></pre>\n<pre><code>public class PerguntaArtes extends Pergunta {\n    public PerguntaArtes(String area, String pergunta, ArrayList&lt;String&gt; opcoes, String respostaCorreta, String dificuldade, int pontosPergunta) {\n        super(area, pergunta, opcoes, respostaCorreta, dificuldade, pontosPergunta);\n    }\n\n    public int calcularPontuacao(){\n        return pontosPergunta * 10;\n    }\n}\n</code></pre>\n<p>the following method is to check I an answer is right or not and I needed it to call the method from the subclass</p>\n<pre><code>private void checkAnswer(String selectedOption, String respostaCorreta, Pergunta pergunta){\n        if (selectedOption.equals(respostaCorreta)){\n            if (pergunta.getArea().equals(&quot;PerguntaArtes&quot;)){\n                PerguntaArtes PerguntaArtes = (PerguntaArtes) pergunta;\n                score += PerguntaArtes.calcularPontuacao();\n            }\n            if (pergunta.getArea().equals(&quot;PerguntaCiencias&quot;)){\n                score += 20;\n            }\n            if (pergunta.getArea().equals(&quot;PerguntaDesporto&quot;)){\n                score += 20;\n            }\n            questionnumber += 1;\n            if (questionnumber &lt;= 5){\n                displayQuestion(questionnumber);\n            }\n            else {\n                endGame();\n            }\n        }\n        else {\n            questionnumber += 1;\n            if (questionnumber &lt;= 5){\n                displayQuestion(questionnumber);\n            }\n            else {\n                endGame();\n            }\n        }\n    }\n</code></pre>\n<p>In this case it gives me the following error:</p>\n<pre><code>Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.ClassCastException: class Pergunta cannot be cast to class PerguntaArtes (Pergunta and PerguntaArtes are in unnamed module of loader 'app')\n        at Screen.checkAnswer(Screen.java:164)\n        at Screen$2.actionPerformed(Screen.java:142)\n        at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)\n        at java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2313)\n        at java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:405)\n        at java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\n        at java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\n        at java.desktop/java.awt.Component.processMouseEvent(Component.java:6626)\n        at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3389)\n        at java.desktop/java.awt.Component.processEvent(Component.java:6391)\n        at java.desktop/java.awt.Container.processEvent(Container.java:2266)\n        at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:5001)\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\n        at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)\n        at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)\n        at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)\n        at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\n        at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:775)\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:97)\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:747)\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n        at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:744)\n        at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n        at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n</code></pre>\n<p>I also tried other ways and couldn't find any solution.\nI also can't use instanceof or class.getName() because I am penalized if I use it.\nCan you guys help me?</p>\n"},{"tags":["java","spring-boot","modelmapper"],"owner":{"account_id":25300723,"reputation":23,"user_id":19124997,"display_name":"zerfer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700775921,"creation_date":1700775372,"question_id":77539723,"body_markdown":"**after mapping  i have a Entitytwo.id  = null knowing thats it present on The BDTO .Other field are mapped correctly not included in entity code and they are mapped automatically this only for this associated field \r\n  object** \r\n**I have the entity like :**\r\n``` \r\npublic class EntityOne implements Serializable {\r\n\tprivate BigDecimal id;\r\n\tprivate EntityTwo entityTwo;    \r\n}\r\n\r\n```\r\n**and Entity1BDTO :** \r\n\r\n```\r\npublic class EntityOneBDTO implements Serializable {\r\n    private BigDecimal id;\r\n    private BigDecimal entityTwo;  // Its EntityTwo.id   \r\n}\r\n```\r\n\r\nMy mapper Class : \r\n\r\n```\r\npublic class EntityOneBDTO ToEntityOne extends PropertyMap&lt;EntityOneBDTO , EntityOne &gt;{\r\n\t\r\n    \r\n\r\n\t@Override\r\n\tprotected void configure() {\r\n\t\t\r\n        map().setId(source.getId());\r\n\t\t\r\n\t\r\n        map().getEntityTwo().setId(source.getEntityTwo());\r\n\r\n\t\tskip().setgetEntityTwo(null);  // to skip other field of object\r\n\r\n```\r\n\r\nit returns with the error \r\n\r\n```\r\n1) Failed to set value &#39;1&#39; on model.EntityOne.setEntityTwo() // i want to set it to EntityOne.EntityTwo.id\r\n\r\n```\r\n\r\nThank you in advance ","title":"Java Springboot : Mapping BDTO to entity using modelMapper","body":"<p><strong>after mapping  i have a Entitytwo.id  = null knowing thats it present on The BDTO .Other field are mapped correctly not included in entity code and they are mapped automatically this only for this associated field\nobject</strong>\n<strong>I have the entity like :</strong></p>\n<pre><code>public class EntityOne implements Serializable {\n    private BigDecimal id;\n    private EntityTwo entityTwo;    \n}\n\n</code></pre>\n<p><strong>and Entity1BDTO :</strong></p>\n<pre><code>public class EntityOneBDTO implements Serializable {\n    private BigDecimal id;\n    private BigDecimal entityTwo;  // Its EntityTwo.id   \n}\n</code></pre>\n<p>My mapper Class :</p>\n<pre><code>public class EntityOneBDTO ToEntityOne extends PropertyMap&lt;EntityOneBDTO , EntityOne &gt;{\n    \n    \n\n    @Override\n    protected void configure() {\n        \n        map().setId(source.getId());\n        \n    \n        map().getEntityTwo().setId(source.getEntityTwo());\n\n        skip().setgetEntityTwo(null);  // to skip other field of object\n\n</code></pre>\n<p>it returns with the error</p>\n<pre><code>1) Failed to set value '1' on model.EntityOne.setEntityTwo() // i want to set it to EntityOne.EntityTwo.id\n\n</code></pre>\n<p>Thank you in advance</p>\n"},{"tags":["java","hibernate","audit"],"comments":[{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1416490288,"post_id":27040439,"comment_id":42600906,"body_markdown":"revid is not enver, revid is auditions.","body":"revid is not enver, revid is auditions."}],"answers":[{"comments":[{"owner":{"account_id":2366927,"reputation":1802,"user_id":2072444,"accept_rate":41,"display_name":"rishi"},"score":1,"creation_date":1416554527,"post_id":27040910,"comment_id":42628105,"body_markdown":"Here I am talking about the &quot;rev&quot; column in audit tables. These tables(Schema) are automatically generated by hibernate envers. We have not created the schema so we cant remove the uniqueness constraint. I suspect that it is envers that recognize it as one insert statement where as multiple inserts have been called.","body":"Here I am talking about the &quot;rev&quot; column in audit tables. These tables(Schema) are automatically generated by hibernate envers. We have not created the schema so we cant remove the uniqueness constraint. I suspect that it is envers that recognize it as one insert statement where as multiple inserts have been called."},{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1416561311,"post_id":27040910,"comment_id":42630676,"body_markdown":"Maybe this is a bug, what database are you using? What type is the database-column rev_id in the audited tables?","body":"Maybe this is a bug, what database are you using? What type is the database-column rev_id in the audited tables?"},{"owner":{"account_id":2366927,"reputation":1802,"user_id":2072444,"accept_rate":41,"display_name":"rishi"},"score":0,"creation_date":1416564718,"post_id":27040910,"comment_id":42632559,"body_markdown":"We are using Oracle 11g. &quot;rev&quot; column is of &quot;number&quot; datatype.","body":"We are using Oracle 11g. &quot;rev&quot; column is of &quot;number&quot; datatype."},{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1417181992,"post_id":27040910,"comment_id":42865969,"body_markdown":"@rishi Again: Hibernate Envers will not create the Schema, Hibernate Auditions does it!","body":"@rishi Again: Hibernate Envers will not create the Schema, Hibernate Auditions does it!"},{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1417182257,"post_id":27040910,"comment_id":42866118,"body_markdown":"@rishi Indeed its a bug, please report it to Hibernate! As you can see in http://docs.jboss.org/envers/docs/#schema the `Address_AUD` and the `Person_AUD` has their `REV` not unique!","body":"@rishi Indeed its a bug, please report it to Hibernate! As you can see in <a href=\"http://docs.jboss.org/envers/docs/#schema\" rel=\"nofollow noreferrer\">docs.jboss.org/envers/docs/#schema</a> the <code>Address_AUD</code> and the <code>Person_AUD</code> has their <code>REV</code> not unique!"}],"tags":[],"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1416561354,"creation_date":1416490365,"answer_id":27040910,"question_id":27040439,"body_markdown":"A revid always span modifications in multiple tables!\r\n\r\nYes, the inserts are called at the end of the transaction, but: If you use optimistic transaction isolation, a transaction can read the uncommitted state of another transactions that are currently active but not yet committed.\r\n\r\nIf you become a integrityconstraintsviolation the column `rev_id` is unfortunatelly configured &quot;unique&quot;. This is a wrong database schema! Correct the schema by removing the Uniqueness of the column `rev_id`!\r\n\r\nThe `rev_id`-Column in the global-hibernate-relationtable **must** be unique because it is a Primary-Key! (the global-hibernate-relationtable usually contains also a timestamp).","title":"hibernate auditions generating same rev id in for multiple insert in one table","body":"<p>A revid always span modifications in multiple tables!</p>\n\n<p>Yes, the inserts are called at the end of the transaction, but: If you use optimistic transaction isolation, a transaction can read the uncommitted state of another transactions that are currently active but not yet committed.</p>\n\n<p>If you become a integrityconstraintsviolation the column <code>rev_id</code> is unfortunatelly configured \"unique\". This is a wrong database schema! Correct the schema by removing the Uniqueness of the column <code>rev_id</code>!</p>\n\n<p>The <code>rev_id</code>-Column in the global-hibernate-relationtable <strong>must</strong> be unique because it is a Primary-Key! (the global-hibernate-relationtable usually contains also a timestamp).</p>\n"},{"tags":[],"owner":{"account_id":8894632,"reputation":63,"user_id":6640121,"display_name":"Raba_Ababa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700775230,"creation_date":1700775230,"answer_id":77539719,"question_id":27040439,"body_markdown":"Not sure if still you have this issue :). In my case I had same problem, and solution was to setting on audit table composite primary key on &quot;rev&quot; and &quot;id&quot; columns. \r\nBelow example Liquibase script:\r\n```\r\n&lt;addPrimaryKey\r\n    columnNames=&quot;id, rev&quot;\r\n    constraintName=&quot;t_order_aud_pk&quot;\r\n    tableName=&quot;t_order_aud&quot;/&gt;\r\n```","title":"hibernate auditions generating same rev id in for multiple insert in one table","body":"<p>Not sure if still you have this issue :). In my case I had same problem, and solution was to setting on audit table composite primary key on &quot;rev&quot; and &quot;id&quot; columns.\nBelow example Liquibase script:</p>\n<pre><code>&lt;addPrimaryKey\n    columnNames=&quot;id, rev&quot;\n    constraintName=&quot;t_order_aud_pk&quot;\n    tableName=&quot;t_order_aud&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":2366927,"reputation":1802,"user_id":2072444,"accept_rate":41,"display_name":"rishi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1091,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1700775230,"creation_date":1416488906,"question_id":27040439,"body_markdown":"I am using hibernate auditions with hibernate version 3.5. while it is working fine when I try to insert single record in one table in one transation but the problem is when a &quot;BATCH&quot; runs \r\nand it inserts multiple records in one table in single transation then **single** &quot;rev id&quot; is being generated for audit tables which causes &quot;integrityconstraintsviolation&quot;. \r\n  \r\n As it is the normal behavior of hibernate that all the insert queries are fired at the end of tansaction(When it flushes) but at this time only one query is being fired for &quot;rev id&quot; generation. \r\n \r\n     select hibernate_sequence.nextval from dual;\r\n\r\nKindly tell me whether is it a bug in audit or i am missing something ??\r\nThanks in advance \r\n","title":"hibernate auditions generating same rev id in for multiple insert in one table","body":"<p>I am using hibernate auditions with hibernate version 3.5. while it is working fine when I try to insert single record in one table in one transation but the problem is when a \"BATCH\" runs \nand it inserts multiple records in one table in single transation then <strong>single</strong> \"rev id\" is being generated for audit tables which causes \"integrityconstraintsviolation\". </p>\n\n<p>As it is the normal behavior of hibernate that all the insert queries are fired at the end of tansaction(When it flushes) but at this time only one query is being fired for \"rev id\" generation. </p>\n\n<pre><code> select hibernate_sequence.nextval from dual;\n</code></pre>\n\n<p>Kindly tell me whether is it a bug in audit or i am missing something ??\nThanks in advance </p>\n"},{"tags":["java","java-8","socketexception"],"answers":[{"comments":[{"owner":{"account_id":499572,"reputation":35,"user_id":3534408,"display_name":"kalpesh"},"score":0,"creation_date":1443568070,"post_id":32855083,"comment_id":53544017,"body_markdown":"I tired your server program, but I did not get any exception. I even tried modifying it like this\n\n\n\n`public class AnotherServer {\n\n\tpublic static void main(String[] args) throws Exception {\n\n\t\ttry {\n\t\t\tServerSocket ss = new ServerSocket(9999);\n\t\t\tSocket s = ss.accept();\n\t\t\tInputStream i = s.getInputStream();\n\t\t\ti.read();\n\t\t} catch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t\tSystem.out.println(&quot; THE EXCEPTION &quot; + e.getStackTrace());\n\n\t\t}\n\n\t}\n\n}`\n\nBut still I am not able to get the exception. I am using mac and java8 incase if that helps","body":"I tired your server program, but I did not get any exception. I even tried modifying it like this    <code>public class AnotherServer {  \tpublic static void main(String[] args) throws Exception {  \t\ttry { \t\t\tServerSocket ss = new ServerSocket(9999); \t\t\tSocket s = ss.accept(); \t\t\tInputStream i = s.getInputStream(); \t\t\ti.read(); \t\t} catch (Exception e) { \t\t\te.printStackTrace(); \t\t\tSystem.out.println(&quot; THE EXCEPTION &quot; + e.getStackTrace());  \t\t}  \t}  }</code>  But still I am not able to get the exception. I am using mac and java8 incase if that helps"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":4,"creation_date":1443571133,"post_id":32855083,"comment_id":53544876,"body_markdown":"This is platform-dependent. Windows behaves like this. I don&#39;t think Unix does.","body":"This is platform-dependent. Windows behaves like this. I don&#39;t think Unix does."},{"owner":{"account_id":499572,"reputation":35,"user_id":3534408,"display_name":"kalpesh"},"score":0,"creation_date":1443636319,"post_id":32855083,"comment_id":53577312,"body_markdown":"Here is what I tried \n\n1.    Server program running on Mac , Client program running on Windows then I run @Evgeniy Dorofeev&#39;s program I could see the connection reset exception on Mac.\n\n2.    I run Server program on Windows, and Client program on Mac, I do not see the connection Reset Exception. \n\nI think I am just going to try another scenario on Linux to double check if any connection reset exception comes. But I think exception coming is platform dependent.","body":"Here is what I tried   1.    Server program running on Mac , Client program running on Windows then I run @Evgeniy Dorofeev&#39;s program I could see the connection reset exception on Mac.  2.    I run Server program on Windows, and Client program on Mac, I do not see the connection Reset Exception.   I think I am just going to try another scenario on Linux to double check if any connection reset exception comes. But I think exception coming is platform dependent."}],"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1443567467,"creation_date":1443567467,"answer_id":32855083,"question_id":32854951,"body_markdown":"This works for me:\r\n\r\n    class Server {\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tServerSocket ss = new ServerSocket(9999);\r\n    \t\tSocket s = ss.accept();\r\n    \t\tInputStream i = s.getInputStream();\r\n    \t\ti.read();\r\n    \t}\r\n    }\r\n\r\nclient connects and disconnects without closing socket\r\n\r\n    class Client {\r\n    \t\r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tSocket s = new Socket(&quot;localhost&quot;, 9999);\r\n    \t}\r\n    }\r\n\r\nthis results in exception on server\r\n\r\n    Exception in thread &quot;main&quot; java.net.SocketException: Connection reset\r\n    \tat java.net.SocketInputStream.read(Unknown Source)\r\n    \tat java.net.SocketInputStream.read(Unknown Source)\r\n    \tat java.net.SocketInputStream.read(Unknown Source)\r\n    \tat net.Server.main(Server.java:13)\r\n\r\n\r\n","title":"How to reproduce &quot;java.net.SocketException.Connection reset&quot;?","body":"<p>This works for me:</p>\n\n<pre><code>class Server {\n\n    public static void main(String[] args) throws Exception {\n        ServerSocket ss = new ServerSocket(9999);\n        Socket s = ss.accept();\n        InputStream i = s.getInputStream();\n        i.read();\n    }\n}\n</code></pre>\n\n<p>client connects and disconnects without closing socket</p>\n\n<pre><code>class Client {\n\n    public static void main(String[] args) throws Exception {\n        Socket s = new Socket(\"localhost\", 9999);\n    }\n}\n</code></pre>\n\n<p>this results in exception on server</p>\n\n<pre><code>Exception in thread \"main\" java.net.SocketException: Connection reset\n    at java.net.SocketInputStream.read(Unknown Source)\n    at java.net.SocketInputStream.read(Unknown Source)\n    at java.net.SocketInputStream.read(Unknown Source)\n    at net.Server.main(Server.java:13)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1443571211,"creation_date":1443571211,"answer_id":32855649,"question_id":32854951,"body_markdown":"There are several ways. I won&#39;t post one of them as it is too much abused, but the simple ways to produce it are:\r\n\r\n1. Close a socket immediately you acquire it, without reading anything. This works if the sender is sending to you rather than reading from you.\r\n2. If you know the sender has sent something, close the socket without reading it in any way.","title":"How to reproduce &quot;java.net.SocketException.Connection reset&quot;?","body":"<p>There are several ways. I won't post one of them as it is too much abused, but the simple ways to produce it are:</p>\n\n<ol>\n<li>Close a socket immediately you acquire it, without reading anything. This works if the sender is sending to you rather than reading from you.</li>\n<li>If you know the sender has sent something, close the socket without reading it in any way.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":38146,"reputation":1653,"user_id":109318,"accept_rate":50,"display_name":"Asaf Mesika"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1569933276,"creation_date":1449348923,"answer_id":34110755,"question_id":32854951,"body_markdown":"None of the answers above worked for me reliably both on Mac and Linux. \r\nAfter a lot of Googling, I ended with this [article][1] explaining how to do it. Just to be clear: I was trying to reproduce the connection reset from the client side, i.e. &quot;Connection reset by peer&quot;. \r\n\r\nI tried bringing up a process which run netcat, and abruptly killing the process - that only worked on Mac. \r\n\r\nI tried socket.close from another thread, same thread - nothing worked.\r\n\r\nSimply, all those methods didn&#39;t cause the client to send RST to the server, which causes the exception (reset by peer).\r\n\r\nThe following worked: \r\n\r\n - Setup any server - in my case Netty (their getting started Discard server will do).\r\n - Use the following client code:\r\n```\r\nfinal Socket socket = new Socket(&quot;localhost&quot;, port);;\r\nsocket.setSoLinger(true, 0);\r\nfinal OutputStream outputStream = socket.getOutputStream();\r\nfor (int i=0; i &lt;= 500; i++) {\r\n    outputStream.write(&#39;a&#39;);\r\n}\r\noutputStream.write(&#39;\\n&#39;);\r\noutputStream.flush();\r\nsocket.close();\r\n\r\nThread.sleep(2000);\r\n```\r\n    \r\nThe soLinger() was the magic trick. According to the Oracle article cited above, when you call socket.close() it sends a RST to the other side, instead of sending FIN and then waiting for the other side to finish reading what ever was sent until the FIN - i.e. force close.\r\n\r\nIt took me 1 day of work to find this out, so I hope it will save you time on your work.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/net/articles/connection_release.html","title":"How to reproduce &quot;java.net.SocketException.Connection reset&quot;?","body":"<p>None of the answers above worked for me reliably both on Mac and Linux. \nAfter a lot of Googling, I ended with this <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/net/articles/connection_release.html\" rel=\"nofollow noreferrer\">article</a> explaining how to do it. Just to be clear: I was trying to reproduce the connection reset from the client side, i.e. \"Connection reset by peer\". </p>\n\n<p>I tried bringing up a process which run netcat, and abruptly killing the process - that only worked on Mac. </p>\n\n<p>I tried socket.close from another thread, same thread - nothing worked.</p>\n\n<p>Simply, all those methods didn't cause the client to send RST to the server, which causes the exception (reset by peer).</p>\n\n<p>The following worked: </p>\n\n<ul>\n<li>Setup any server - in my case Netty (their getting started Discard server will do).</li>\n<li>Use the following client code:</li>\n</ul>\n\n<pre><code>final Socket socket = new Socket(\"localhost\", port);;\nsocket.setSoLinger(true, 0);\nfinal OutputStream outputStream = socket.getOutputStream();\nfor (int i=0; i &lt;= 500; i++) {\n    outputStream.write('a');\n}\noutputStream.write('\\n');\noutputStream.flush();\nsocket.close();\n\nThread.sleep(2000);\n</code></pre>\n\n<p>The soLinger() was the magic trick. According to the Oracle article cited above, when you call socket.close() it sends a RST to the other side, instead of sending FIN and then waiting for the other side to finish reading what ever was sent until the FIN - i.e. force close.</p>\n\n<p>It took me 1 day of work to find this out, so I hope it will save you time on your work.</p>\n"},{"tags":[],"owner":{"account_id":118444,"reputation":20516,"user_id":309483,"accept_rate":88,"display_name":"Janus Troelsen"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1622993174,"creation_date":1622993174,"answer_id":67860766,"question_id":32854951,"body_markdown":"Instead of provoking this exception using Java client code, I found it easier to just write a short Python script:\r\n\r\n    import struct, socket\r\n    s = socket.socket(socket.AF_INET6)\r\n    s.connect((&quot;::1&quot;, 8000))\r\n    s.setsockopt(socket.SOL_SOCKET, socket.SO_LINGER, struct.pack(&#39;ii&#39;, 1, 0))\r\n    s.close() # provokes Connection Reset at host\r\n\r\n","title":"How to reproduce &quot;java.net.SocketException.Connection reset&quot;?","body":"<p>Instead of provoking this exception using Java client code, I found it easier to just write a short Python script:</p>\n<pre><code>import struct, socket\ns = socket.socket(socket.AF_INET6)\ns.connect((&quot;::1&quot;, 8000))\ns.setsockopt(socket.SOL_SOCKET, socket.SO_LINGER, struct.pack('ii', 1, 0))\ns.close() # provokes Connection Reset at host\n</code></pre>\n"},{"tags":[],"owner":{"account_id":219006,"reputation":4141,"user_id":475635,"accept_rate":63,"display_name":"Francesco Marchioni"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700774953,"creation_date":1700774953,"answer_id":77539705,"question_id":32854951,"body_markdown":"I managed to reproduce it, by setting the soLinger to true and waiting for one second before closing the connection:\r\n\r\n    import java.io.IOException;\r\n    import java.net.ServerSocket;\r\n    import java.net.Socket;\r\n    \r\n    public class TCPServer {\r\n        public static void main(String[] args) {\r\n            final int PORT = 5500;\r\n    \r\n            try (ServerSocket serverSocket = new ServerSocket(PORT)) {\r\n                System.out.println(&quot;Server listening on port &quot; + PORT);\r\n    \r\n                while (true) {\r\n                    Socket clientSocket = serverSocket.accept();\r\n                    System.out.println(&quot;New client from &quot; + clientSocket.getInetAddress() + &quot;:&quot; + clientSocket.getPort());\r\n                    Thread.sleep(1000); // Sleep for 1 second\r\n                    clientSocket.setSoLinger(true, 0);\r\n                    clientSocket.close();\r\n                }\r\n    \r\n            } catch (IOException | InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\nFound this solution in this article: [Troubleshooting java.net.SocketException Connection reset][1]\r\n\r\n\r\n  [1]: https://www.mastertheboss.com/java/how-to-solve-the-error-java-net-socketexception-connection-reset/","title":"How to reproduce &quot;java.net.SocketException.Connection reset&quot;?","body":"<p>I managed to reproduce it, by setting the soLinger to true and waiting for one second before closing the connection:</p>\n<pre><code>import java.io.IOException;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class TCPServer {\n    public static void main(String[] args) {\n        final int PORT = 5500;\n\n        try (ServerSocket serverSocket = new ServerSocket(PORT)) {\n            System.out.println(&quot;Server listening on port &quot; + PORT);\n\n            while (true) {\n                Socket clientSocket = serverSocket.accept();\n                System.out.println(&quot;New client from &quot; + clientSocket.getInetAddress() + &quot;:&quot; + clientSocket.getPort());\n                Thread.sleep(1000); // Sleep for 1 second\n                clientSocket.setSoLinger(true, 0);\n                clientSocket.close();\n            }\n\n        } catch (IOException | InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Found this solution in this article: <a href=\"https://www.mastertheboss.com/java/how-to-solve-the-error-java-net-socketexception-connection-reset/\" rel=\"nofollow noreferrer\">Troubleshooting java.net.SocketException Connection reset</a></p>\n"}],"owner":{"account_id":499572,"reputation":35,"user_id":3534408,"display_name":"kalpesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8684,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":32855083,"answer_count":5,"score":3,"last_activity_date":1700774953,"creation_date":1443566619,"question_id":32854951,"body_markdown":"I am trying to reproduce &quot;java.net.SocketException.Connection reset&quot; exception. \r\n\r\nWanted to know if there is any program available which could help me simulate it. I tried following Server and client programs to see if I could simulate but I am not able to get any exception. I am using java8.\r\n\r\nServer Code-\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.net.ServerSocket;\r\n    import java.net.Socket;\r\n    import java.net.SocketException;\r\n    import java.net.SocketTimeoutException;\r\n    \r\n    \r\n    public class SimpleServerApp {\r\n    \t\r\n    \tpublic static void main(String[] args) throws InterruptedException {\r\n    \r\n    \t\tnew Thread(new SimpleServer()).start();\r\n    \r\n    \t}\r\n    \r\n    \tstatic class SimpleServer implements Runnable {\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void run() {\r\n    \r\n    \t\t\tServerSocket serverSocket = null;\r\n    \r\n    \t\t\ttry {\r\n    \t\t\t\tserverSocket = new ServerSocket(3333);\r\n    \t\t\t\tserverSocket.setSoTimeout(0);\r\n    \t\t\t\t\r\n    \t\t\t\t//serverSocket.\r\n    \t\t\t\twhile (true) {\r\n    \t\t\t\t\ttry {\r\n    \t\t\t\t\t\tSocket clientSocket = serverSocket.accept();\r\n    \r\n    \t\t\t\t\t\tBufferedReader inputReader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\r\n    \r\n    \t\t\t\t\t\tSystem.out.println(&quot;Client said :&quot;+ inputReader.readLine());\r\n    \r\n    \t\t\t\t\t} catch (SocketTimeoutException e) {\r\n    \t\t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t}catch (Exception e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t\tSystem.out.println(&quot; EXCEPTION &quot; + e.getStackTrace());\r\n    \t\t\t}/*catch (IOException e1) {\r\n    \t\t\t\te1.printStackTrace();\r\n    \t\t\t}*/ /*finally {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tif (serverSocket != null) {\r\n    \t\t\t\t\t\tserverSocket.close();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t} catch (IOException e) {\r\n    \t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t}\r\n    \t\t\t}*/\r\n    \r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n\r\nClient Code - \r\n\r\n\r\n    import java.io.IOException;\r\n    import java.io.PrintWriter;\r\n    import java.net.Socket;\r\n    import java.net.SocketException;\r\n    import java.net.UnknownHostException;\r\n    \r\n    \r\n    public class SimpleClientApp {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tnew Thread(new SimpleClient()).start();\r\n    \r\n    \t}\r\n    \t\r\n    \tstatic class SimpleClient implements Runnable {\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void run() {\r\n    \r\n    \t\t\tSocket socket = null;\r\n    \t\t\ttry {\r\n    \r\n    \t\t\t\tsocket = new Socket(&quot;localhost&quot;, 3333);\r\n    \t\t\t\t\r\n    \r\n    \t\t\t\tPrintWriter outWriter = new PrintWriter(socket.getOutputStream(), true);\r\n    \t\t\t\t\r\n    \t\t\t\tSystem.out.println(&quot;Wait&quot;);\r\n    \r\n    \t\t\t\tThread.sleep(20000);\r\n    \t\t\t\t//System.exit(0);\r\n    \t\t\t\t//throw new Exception(&quot;Random exception&quot;);\r\n    \t\t\t\t//socket.close();\r\n    \t\t\t\t\r\n    \t\t\t\toutWriter.println(&quot;Hello Mr. Server!&quot;);\r\n    \t\r\n    \t\t\t}catch (SocketException e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}catch (InterruptedException e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t} catch (UnknownHostException e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t} catch (IOException e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t} catch (Exception e) {\r\n    \t\t\t\t// TODO Auto-generated catch block\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t} /*finally {\r\n    \r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tif (socket != null)\r\n    \t\t\t\t\t\tsocket.close();\r\n    \t\t\t\t} catch (IOException e) {\r\n    \r\n    \t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    */\t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nScenario 1. \r\n\r\n - Start the server program locally.  \r\n - Start the Client program locally.\r\n - Close the client program abruptly (Ctrl C) - I just get output on\r\n   Server program &quot;Client said :null&quot;\r\n\r\nScenario 2.\r\n\r\n- Start the Server program Locally.\r\n- Start the client program locally.\r\n- Client is connected to server, Then while client program is waiting close the server program abruptly. Still no exception.\r\n\r\n\r\nCan some tell me some way I could produce the connection reset exception, With working sample code.  \r\n","title":"How to reproduce &quot;java.net.SocketException.Connection reset&quot;?","body":"<p>I am trying to reproduce \"java.net.SocketException.Connection reset\" exception. </p>\n\n<p>Wanted to know if there is any program available which could help me simulate it. I tried following Server and client programs to see if I could simulate but I am not able to get any exception. I am using java8.</p>\n\n<p>Server Code-</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.net.SocketException;\nimport java.net.SocketTimeoutException;\n\n\npublic class SimpleServerApp {\n\n    public static void main(String[] args) throws InterruptedException {\n\n        new Thread(new SimpleServer()).start();\n\n    }\n\n    static class SimpleServer implements Runnable {\n\n        @Override\n        public void run() {\n\n            ServerSocket serverSocket = null;\n\n            try {\n                serverSocket = new ServerSocket(3333);\n                serverSocket.setSoTimeout(0);\n\n                //serverSocket.\n                while (true) {\n                    try {\n                        Socket clientSocket = serverSocket.accept();\n\n                        BufferedReader inputReader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n\n                        System.out.println(\"Client said :\"+ inputReader.readLine());\n\n                    } catch (SocketTimeoutException e) {\n                        e.printStackTrace();\n                    }\n                }\n\n            }catch (Exception e) {\n                e.printStackTrace();\n                System.out.println(\" EXCEPTION \" + e.getStackTrace());\n            }/*catch (IOException e1) {\n                e1.printStackTrace();\n            }*/ /*finally {\n                try {\n                    if (serverSocket != null) {\n                        serverSocket.close();\n                    }\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }*/\n\n        }\n\n    }\n}\n</code></pre>\n\n<p>Client Code - </p>\n\n<pre><code>import java.io.IOException;\nimport java.io.PrintWriter;\nimport java.net.Socket;\nimport java.net.SocketException;\nimport java.net.UnknownHostException;\n\n\npublic class SimpleClientApp {\n\n    public static void main(String[] args) {\n\n        new Thread(new SimpleClient()).start();\n\n    }\n\n    static class SimpleClient implements Runnable {\n\n        @Override\n        public void run() {\n\n            Socket socket = null;\n            try {\n\n                socket = new Socket(\"localhost\", 3333);\n\n\n                PrintWriter outWriter = new PrintWriter(socket.getOutputStream(), true);\n\n                System.out.println(\"Wait\");\n\n                Thread.sleep(20000);\n                //System.exit(0);\n                //throw new Exception(\"Random exception\");\n                //socket.close();\n\n                outWriter.println(\"Hello Mr. Server!\");\n\n            }catch (SocketException e) {\n                e.printStackTrace();\n            }catch (InterruptedException e) {\n                e.printStackTrace();\n            } catch (UnknownHostException e) {\n                e.printStackTrace();\n            } catch (IOException e) {\n                e.printStackTrace();\n            } catch (Exception e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            } /*finally {\n\n                try {\n                    if (socket != null)\n                        socket.close();\n                } catch (IOException e) {\n\n                    e.printStackTrace();\n                }\n\n\n            }\n*/      }\n\n    }\n\n}\n</code></pre>\n\n<p>Scenario 1. </p>\n\n<ul>\n<li>Start the server program locally.  </li>\n<li>Start the Client program locally.</li>\n<li>Close the client program abruptly (Ctrl C) - I just get output on\nServer program \"Client said :null\"</li>\n</ul>\n\n<p>Scenario 2.</p>\n\n<ul>\n<li>Start the Server program Locally.</li>\n<li>Start the client program locally.</li>\n<li>Client is connected to server, Then while client program is waiting close the server program abruptly. Still no exception.</li>\n</ul>\n\n<p>Can some tell me some way I could produce the connection reset exception, With working sample code.  </p>\n"},{"tags":["java","spring","rest","servlets","mapping"],"answers":[{"comments":[{"owner":{"account_id":1159821,"reputation":1128,"user_id":1139581,"accept_rate":62,"display_name":"moretti.fabio"},"score":0,"creation_date":1648230572,"post_id":71620728,"comment_id":126580314,"body_markdown":"Thanks, that interesting, but what if I want to access the template path inside a FilterBean, inside the doFilter(ServletRequest request, ServletResponse response, FilterChain chain) method? Is there any possibility?","body":"Thanks, that interesting, but what if I want to access the template path inside a FilterBean, inside the doFilter(ServletRequest request, ServletResponse response, FilterChain chain) method? Is there any possibility?"},{"owner":{"account_id":2790829,"reputation":1050,"user_id":2401094,"display_name":"Binu George"},"score":0,"creation_date":1648513638,"post_id":71620728,"comment_id":126638030,"body_markdown":"@moretti.fabio updated my answer","body":"@moretti.fabio updated my answer"}],"tags":[],"owner":{"account_id":2790829,"reputation":1050,"user_id":2401094,"display_name":"Binu George"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1648513578,"creation_date":1648228244,"answer_id":71620728,"question_id":71617146,"body_markdown":"Updating the answer to use `GenericFilterBean.doFilter` as per the question asked.\r\nYou can do this by adding a finally clause. This is needed since you need to do `chain.doFilter(request, response)` first before calling `request.getAttribute` because the attribute is not set until later in the lifecycle of the request. So if you are trying to do some operations based on incoming uri template, subclassing **GenericFilterBean** may not be the right choice here since you need to call chain.doFilter first. \r\n\r\n     public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n            try {\r\n                //Do something\r\n                chain.doFilter(request, response);\r\n            } finally {\r\n             String pathTemplate = (String) \r\n    request.getAttribute(HandlerMapping.BEST_MATCHING_PATTERN_ATTRIBUTE);\r\n             System.out.println(&quot;Incoming Request path Template from Generic Filter : &quot; + pathTemplate);\r\n    }\r\n\r\n\r\n    }\r\n**Alternate options:**\r\n\r\nAssuming that you are using spring web here.\r\nYou can define an `HandlerInterceptor` and register it with `InterceptorRegistry`.\r\n\r\n    @Component\r\n    public class LogPathTemplateInterceptor\r\n            implements HandlerInterceptor {\r\n        @Override\r\n        public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object object) throws Exception {\r\n            String pathTemplate = (String)request.getAttribute(HandlerMapping.BEST_MATCHING_PATTERN_ATTRIBUTE);\r\n            System.out.println(&quot;Incoming Request path Template : &quot; + pathTemplate);\r\n            return true;\r\n        }\r\n    }\r\n\r\nAfter defining this, register it with InterceptorRegistry. See how the path pattern added to the interceptor.\r\n\r\n    @Configuration\r\n    public class InterceptorConfig implements WebMvcConfigurer {\r\n        @Autowired\r\n        private LogPathTemplateInterceptor logInterceptor;\r\n        @Override\r\n        public void addInterceptors(InterceptorRegistry registry) {\r\n            registry.addInterceptor(logInterceptor)\r\n                    .addPathPatterns(&quot;/variables/**&quot;);\r\n        }\r\n    }\r\n\r\nThis should log the request template path instead of path with variables.","title":"Spring filter: obtain servlet url-pattern","body":"<p>Updating the answer to use <code>GenericFilterBean.doFilter</code> as per the question asked.\nYou can do this by adding a finally clause. This is needed since you need to do <code>chain.doFilter(request, response)</code> first before calling <code>request.getAttribute</code> because the attribute is not set until later in the lifecycle of the request. So if you are trying to do some operations based on incoming uri template, subclassing <strong>GenericFilterBean</strong> may not be the right choice here since you need to call chain.doFilter first.</p>\n<pre><code> public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        try {\n            //Do something\n            chain.doFilter(request, response);\n        } finally {\n         String pathTemplate = (String) \nrequest.getAttribute(HandlerMapping.BEST_MATCHING_PATTERN_ATTRIBUTE);\n         System.out.println(&quot;Incoming Request path Template from Generic Filter : &quot; + pathTemplate);\n}\n\n\n}\n</code></pre>\n<p><strong>Alternate options:</strong></p>\n<p>Assuming that you are using spring web here.\nYou can define an <code>HandlerInterceptor</code> and register it with <code>InterceptorRegistry</code>.</p>\n<pre><code>@Component\npublic class LogPathTemplateInterceptor\n        implements HandlerInterceptor {\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object object) throws Exception {\n        String pathTemplate = (String)request.getAttribute(HandlerMapping.BEST_MATCHING_PATTERN_ATTRIBUTE);\n        System.out.println(&quot;Incoming Request path Template : &quot; + pathTemplate);\n        return true;\n    }\n}\n</code></pre>\n<p>After defining this, register it with InterceptorRegistry. See how the path pattern added to the interceptor.</p>\n<pre><code>@Configuration\npublic class InterceptorConfig implements WebMvcConfigurer {\n    @Autowired\n    private LogPathTemplateInterceptor logInterceptor;\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(logInterceptor)\n                .addPathPatterns(&quot;/variables/**&quot;);\n    }\n}\n</code></pre>\n<p>This should log the request template path instead of path with variables.</p>\n"},{"comments":[{"owner":{"account_id":1159821,"reputation":1128,"user_id":1139581,"accept_rate":62,"display_name":"moretti.fabio"},"score":0,"creation_date":1648231368,"post_id":71621202,"comment_id":126580562,"body_markdown":"I&#39;ve tried something like that but I&#39;m not sure it&#39;s ok to do a chain.doFilter() inside for example an authentication or authorization filter, and if I omit that part most of the attributes are null. maybe I&#39;m wrong and it&#39;s ok?","body":"I&#39;ve tried something like that but I&#39;m not sure it&#39;s ok to do a chain.doFilter() inside for example an authentication or authorization filter, and if I omit that part most of the attributes are null. maybe I&#39;m wrong and it&#39;s ok?"},{"owner":{"account_id":7529235,"reputation":1142,"user_id":5718106,"display_name":"Sibin Muhammed"},"score":0,"creation_date":1648232826,"post_id":71621202,"comment_id":126581020,"body_markdown":"If possible can you add your security/logging filters?","body":"If possible can you add your security/logging filters?"},{"owner":{"account_id":1159821,"reputation":1128,"user_id":1139581,"accept_rate":62,"display_name":"moretti.fabio"},"score":0,"creation_date":1648234993,"post_id":71621202,"comment_id":126581619,"body_markdown":"I&#39;ve edited my question with a filter example","body":"I&#39;ve edited my question with a filter example"},{"owner":{"account_id":7529235,"reputation":1142,"user_id":5718106,"display_name":"Sibin Muhammed"},"score":0,"creation_date":1648261592,"post_id":71621202,"comment_id":126586665,"body_markdown":"getAttribute value will be null if you are trying to call before doFilter.","body":"getAttribute value will be null if you are trying to call before doFilter."},{"owner":{"account_id":7529235,"reputation":1142,"user_id":5718106,"display_name":"Sibin Muhammed"},"score":0,"creation_date":1648270576,"post_id":71621202,"comment_id":126587504,"body_markdown":"Also using Java reflection API I added one solution with the help of @Bean. Beans that are singleton-scoped and set to be pre-instantiated (the default) are created when the container is created.","body":"Also using Java reflection API I added one solution with the help of @Bean. Beans that are singleton-scoped and set to be pre-instantiated (the default) are created when the container is created."},{"owner":{"account_id":1159821,"reputation":1128,"user_id":1139581,"accept_rate":62,"display_name":"moretti.fabio"},"score":1,"creation_date":1648577587,"post_id":71621202,"comment_id":126658388,"body_markdown":"Your solution put me on the right path, I&#39;ve endend creating a custom authorization filter with a `Set&lt;RequestMappingInfo&gt; patterns`,that gets populated in the `ContextRefreshedEvent`, so when I&#39;m in the filter I can iterate over the RequestMappingInfo and use `getMatchingCondition(HttpRequest)` to get which mapping will be used and then `getPatternsCondition` to access the pattern","body":"Your solution put me on the right path, I&#39;ve endend creating a custom authorization filter with a <code>Set&lt;RequestMappingInfo&gt; patterns</code>,that gets populated in the <code>ContextRefreshedEvent</code>, so when I&#39;m in the filter I can iterate over the RequestMappingInfo and use <code>getMatchingCondition(HttpRequest)</code> to get which mapping will be used and then <code>getPatternsCondition</code> to access the pattern"}],"tags":[],"owner":{"account_id":7529235,"reputation":1142,"user_id":5718106,"display_name":"Sibin Muhammed"},"comment_count":6,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1700773137,"creation_date":1648230703,"answer_id":71621202,"question_id":71617146,"body_markdown":"## 1. Solution using  Servlet filter(after Filter doFilter) ## Here, Not recommending this solution.\r\nFilters intercept requests before they reach the DispatcherServlet, making them ideal for coarse-grained tasks such as:\r\n\r\n - Authentication\r\n - Logging and auditing\r\n - Image and data compression\r\n - Any functionality we want to be decoupled from Spring MVC\r\n\r\n**Note*** Do the **doFilter** first before trying to do the call to **getAttribute**\r\n\r\n**Your Controller**\r\n\r\n    @RequestMapping(path = &quot;/user&quot;)\r\n    @RestController\r\n    public class ConfigUserController {\r\n    \r\n    \t@GetMapping(path = &quot;/variables/&quot;)\r\n    \tpublic ResponseEntity&lt;List&lt;Variable&gt;&gt; getAllVariables() {\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@GetMapping(path = &quot;/variables/{name}&quot;)\r\n    \tpublic ResponseEntity&lt;Variable&gt; getVariableByName(@PathVariable(&quot;name&quot;) String name) {\r\n    \t\treturn new ResponseEntity&lt;Variable&gt;(new Variable(name), HttpStatus.OK);\r\n    \t}\r\n    \r\n    \t@PutMapping(path = &quot;/variables/{name}/{value}&quot;)\r\n    \tpublic ResponseEntity&lt;Variable&gt; setVariableByName() {\r\n    \t\treturn null;\r\n    \t}\r\n    }\r\n\r\n**Custom Filter** \r\n\r\n    @Component\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    public class CustomFilter implements Filter {\r\n    \r\n    \t@Override\r\n    \tpublic void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\r\n    \t\t\tthrows IOException, ServletException {\r\n    \t\t// TODO\r\n    \t\ttry {\r\n    \t\t\tchain.doFilter(request, response);\r\n    \t\t} catch (Exception e) {\r\n    \t\t} finally {\r\n    \t\t\tString pattern = (String) request.getAttribute(HandlerMapping.BEST_MATCHING_PATTERN_ATTRIBUTE);\r\n    \t\t\tSystem.out.println(&quot;Request template is, &quot; + pattern);\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n**O/P:**\r\n\r\n     Request template is, /user/variables/{name}\r\n\r\n**Note*** Do the chain.doFilter first before trying to do the call to getAttribute\r\n\r\n\r\n----------\r\n## 2. Solution using Interceptor ##\r\n \r\n\r\nHandlerIntercepors intercepts requests between the DispatcherServlet and our Controllers. This is done within the Spring MVC framework, providing access to the Handler and ModelAndView objects.\r\n\r\n**Custom Interceptor**\r\n\r\n    @Component\r\n    public class LoggerInterceptor implements HandlerInterceptor {\r\n    \r\n    \t@Override\r\n    \tpublic void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object object, Exception arg3)\r\n    \t\t\tthrows Exception {\r\n    \r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void postHandle(HttpServletRequest request, HttpServletResponse response, Object object, ModelAndView model)\r\n    \t\t\tthrows Exception {\r\n    \r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object object) throws Exception {\r\n    \t\tString path = (String) request.getAttribute(HandlerMapping.BEST_MATCHING_PATTERN_ATTRIBUTE);\r\n    \t\tSystem.out.println(&quot;path : &quot; + path);\r\n    \t\treturn true;\r\n    \t}}\r\n\r\n**Register it with InterceptorRegistry**\r\n\r\n    @Component\r\n    public class CustomServiceInterceptorAppConfig implements WebMvcConfigurer {\r\n       @Autowired\r\n       LoggerInterceptor loggerInterceptor;\r\n    \r\n       @Override\r\n       public void addInterceptors(InterceptorRegistry registry) {\r\n          registry.addInterceptor(loggerInterceptor);\r\n       }\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n## 3. Solution using  Java Reflection API. ##\r\nBeans that are singleton-scoped and set to be pre-instantiated (the default) are created when the container is created. It&#39;s a one time process, you don&#39;t worry about the performance.\r\n\r\nYou may pre-scan all @RequestMapping,@GetMapping, @PostMApping etc.. annotations, keep it and then in the filter match the pattern to get the desired result.\r\n\r\nHere is the sample \r\n\r\n**Bean**\r\n\r\n    @Component\r\n    public class Config {\r\n    \r\n    \tpublic List&lt;String&gt; getPatterns() throws ClassNotFoundException {\r\n    \r\n    \t\tList&lt;String&gt; str = new ArrayList&lt;String&gt;();\r\n    \t\tClass clazz = Class.forName(&quot;com.example.demo.controller.ConfigUserController&quot;); // or list of controllers,\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// //you can iterate that\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// list\r\n    \t\tfor (Method method : clazz.getMethods()) {\r\n    \t\t\tfor (Annotation annotation : method.getDeclaredAnnotations()) {\r\n    \t\t\t\tif (annotation.toString().contains(&quot;GetMapping&quot;)) {\r\n    \t\t\t\t\tstr.add(annotation.toString());\r\n    \t\t\t\t\tSystem.out.println(&quot;Annotation is...&quot; + annotation.toString());\r\n    \t\t\t\t}\r\n    \t\t\t\tif (annotation.toString().contains(&quot;PutMapping&quot;)) {\r\n    \t\t\t\t\tstr.add(annotation.toString());\r\n    \t\t\t\t\tSystem.out.println(&quot;Annotation is...&quot; + annotation.toString());\r\n    \t\t\t\t}\r\n    \t\t\t\tif (annotation.toString().contains(&quot;PostMapping&quot;)) {\r\n    \t\t\t\t\tstr.add(annotation.toString());\r\n    \t\t\t\t\tSystem.out.println(&quot;Annotation is...&quot; + annotation.toString());\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\treturn str;\r\n    \r\n    \t}\r\n\r\n**Custom Filter**\r\n\r\n    @Component\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    public class CustomFilter implements Filter {\r\n    \t@Autowired\r\n    \tConfig con;\r\n    \t@Override\r\n    \tpublic void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\r\n    \t\t\tthrows IOException, ServletException {\r\n    \t\t// TODO\r\n    \t\ttry {\r\n                //filter match the pattern to get the desired result\r\n    \t\t\tSystem.out.println(con.getPatterns());\r\n    \t\t} catch (ClassNotFoundException e) {\r\n    \t\t\t\r\n    \t\t}\r\n    \t\tchain.doFilter(request, response);\r\n    \t}\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3sYFm.png","title":"Spring filter: obtain servlet url-pattern","body":"<h2>1. Solution using  Servlet filter(after Filter doFilter) ## Here, Not recommending this solution.</h2>\n<p>Filters intercept requests before they reach the DispatcherServlet, making them ideal for coarse-grained tasks such as:</p>\n<ul>\n<li>Authentication</li>\n<li>Logging and auditing</li>\n<li>Image and data compression</li>\n<li>Any functionality we want to be decoupled from Spring MVC</li>\n</ul>\n<p><strong>Note</strong>* Do the <strong>doFilter</strong> first before trying to do the call to <strong>getAttribute</strong></p>\n<p><strong>Your Controller</strong></p>\n<pre><code>@RequestMapping(path = &quot;/user&quot;)\n@RestController\npublic class ConfigUserController {\n\n    @GetMapping(path = &quot;/variables/&quot;)\n    public ResponseEntity&lt;List&lt;Variable&gt;&gt; getAllVariables() {\n        return null;\n    }\n\n    @GetMapping(path = &quot;/variables/{name}&quot;)\n    public ResponseEntity&lt;Variable&gt; getVariableByName(@PathVariable(&quot;name&quot;) String name) {\n        return new ResponseEntity&lt;Variable&gt;(new Variable(name), HttpStatus.OK);\n    }\n\n    @PutMapping(path = &quot;/variables/{name}/{value}&quot;)\n    public ResponseEntity&lt;Variable&gt; setVariableByName() {\n        return null;\n    }\n}\n</code></pre>\n<p><strong>Custom Filter</strong></p>\n<pre><code>@Component\n@Order(Ordered.HIGHEST_PRECEDENCE)\npublic class CustomFilter implements Filter {\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n            throws IOException, ServletException {\n        // TODO\n        try {\n            chain.doFilter(request, response);\n        } catch (Exception e) {\n        } finally {\n            String pattern = (String) request.getAttribute(HandlerMapping.BEST_MATCHING_PATTERN_ATTRIBUTE);\n            System.out.println(&quot;Request template is, &quot; + pattern);\n        }\n    }\n\n}\n</code></pre>\n<p><strong>O/P:</strong></p>\n<pre><code> Request template is, /user/variables/{name}\n</code></pre>\n<p><strong>Note</strong>* Do the chain.doFilter first before trying to do the call to getAttribute</p>\n<hr />\n<h2>2. Solution using Interceptor</h2>\n<p>HandlerIntercepors intercepts requests between the DispatcherServlet and our Controllers. This is done within the Spring MVC framework, providing access to the Handler and ModelAndView objects.</p>\n<p><strong>Custom Interceptor</strong></p>\n<pre><code>@Component\npublic class LoggerInterceptor implements HandlerInterceptor {\n\n    @Override\n    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object object, Exception arg3)\n            throws Exception {\n\n    }\n\n    @Override\n    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object object, ModelAndView model)\n            throws Exception {\n\n    }\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object object) throws Exception {\n        String path = (String) request.getAttribute(HandlerMapping.BEST_MATCHING_PATTERN_ATTRIBUTE);\n        System.out.println(&quot;path : &quot; + path);\n        return true;\n    }}\n</code></pre>\n<p><strong>Register it with InterceptorRegistry</strong></p>\n<pre><code>@Component\npublic class CustomServiceInterceptorAppConfig implements WebMvcConfigurer {\n   @Autowired\n   LoggerInterceptor loggerInterceptor;\n\n   @Override\n   public void addInterceptors(InterceptorRegistry registry) {\n      registry.addInterceptor(loggerInterceptor);\n   }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/3sYFm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3sYFm.png\" alt=\"enter image description here\" /></a></p>\n<h2>3. Solution using  Java Reflection API.</h2>\n<p>Beans that are singleton-scoped and set to be pre-instantiated (the default) are created when the container is created. It's a one time process, you don't worry about the performance.</p>\n<p>You may pre-scan all @RequestMapping,@GetMapping, @PostMApping etc.. annotations, keep it and then in the filter match the pattern to get the desired result.</p>\n<p>Here is the sample</p>\n<p><strong>Bean</strong></p>\n<pre><code>@Component\npublic class Config {\n\n    public List&lt;String&gt; getPatterns() throws ClassNotFoundException {\n\n        List&lt;String&gt; str = new ArrayList&lt;String&gt;();\n        Class clazz = Class.forName(&quot;com.example.demo.controller.ConfigUserController&quot;); // or list of controllers,\n                                                                                            // //you can iterate that\n                                                                                            // list\n        for (Method method : clazz.getMethods()) {\n            for (Annotation annotation : method.getDeclaredAnnotations()) {\n                if (annotation.toString().contains(&quot;GetMapping&quot;)) {\n                    str.add(annotation.toString());\n                    System.out.println(&quot;Annotation is...&quot; + annotation.toString());\n                }\n                if (annotation.toString().contains(&quot;PutMapping&quot;)) {\n                    str.add(annotation.toString());\n                    System.out.println(&quot;Annotation is...&quot; + annotation.toString());\n                }\n                if (annotation.toString().contains(&quot;PostMapping&quot;)) {\n                    str.add(annotation.toString());\n                    System.out.println(&quot;Annotation is...&quot; + annotation.toString());\n                }\n            }\n        }\n\n        return str;\n\n    }\n</code></pre>\n<p><strong>Custom Filter</strong></p>\n<pre><code>@Component\n@Order(Ordered.HIGHEST_PRECEDENCE)\npublic class CustomFilter implements Filter {\n    @Autowired\n    Config con;\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n            throws IOException, ServletException {\n        // TODO\n        try {\n            //filter match the pattern to get the desired result\n            System.out.println(con.getPatterns());\n        } catch (ClassNotFoundException e) {\n            \n        }\n        chain.doFilter(request, response);\n    }\n</code></pre>\n"}],"owner":{"account_id":1159821,"reputation":1128,"user_id":1139581,"accept_rate":62,"display_name":"moretti.fabio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2512,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1700773137,"creation_date":1648211949,"question_id":71617146,"body_markdown":"Imagine I have defined these REST endpoints:\r\n```\r\n@RequestMapping(path = &quot;/user&quot;)\r\n@RestController\r\npublic class ConfigUserController {\r\n\r\n\t[...]\r\n\t\r\n    @GetMapping(path = &quot;/variables/&quot;)\r\n    public ResponseEntity&lt;List&lt;Variable&gt;&gt; getAllVariables(...)\r\n\t\t[...]\r\n    }\r\n\t\r\n    @GetMapping(path = &quot;/variables/{name}&quot;)\r\n    public ResponseEntity&lt;Variable&gt; getVariableByName(...)\r\n\t\t[...]\r\n    }\r\n\t\r\n    @PutMapping(path = &quot;/variables/{name}/{value}&quot;)\r\n    public ResponseEntity&lt;Variable&gt; setVariableByName(...)\r\n\t\t[...]\r\n    }\r\n}\r\n```\r\nI&#39;ve defined two filter (logging and authorization), inside the filters I want to get the url-patter which matched current request. Using the example above:\r\n- if the request was a GET to /variables, I want &quot;/variables&quot;\r\n- if the request was a GET to /variables/myfancyname, I want &quot;/variables/{name}&quot;\r\n- if the request was a PUT to /variables/myfancyname/myvalue, I want &quot;/variables/{name}/{value}&quot;\r\n\r\nBasically what I need is to get the path defined in the mapping annotation inside the doFilter(ServletRequest request, ServletResponse response, FilterChain chain) method of my filters.\r\n\r\nIdeally I want to have do the possibility to access the url-pattern value in my filter like this:\r\n```\r\n@Component\r\n@Order(3)\r\npublic class MyAuthorizationRequestFilter extends GenericFilterBean {\r\n\t[...]\r\n\tpublic void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n\t\t// here I get the value\r\n\t\tString urlPattern = request.useSomeMethod().toGetUrlPattern();\r\n\t\t[...]\r\n\t\tboolean auth = false;\r\n\t\t// here I do stuff\r\n\t\t[...]\r\n\t\t// finally let&#39;s see if the user is authorized\r\n\t\tif (auth) {\r\n\t\t\tchain.doFilter(request, responde);\r\n\t\t} else {\r\n\t\t\tthrow SomeAuthorizationError();\r\n\t\t}\r\n\t}\r\n\t[...]\r\n}\r\n```\r\nI&#39;ve been searching but I wasn&#39;t able to find a working solution.\r\n\r\nIf it&#39;s possible I prefer not to scan for collections or web.xml files (which I don&#39;t have), nor using reflections, because the code will be executed every time the filter get triggered and I don&#39;t want to affect performance.\r\n\r\nLinks or suggestions are welcome.\r\n\r\nEDIT: added details, addes filter example cose","title":"Spring filter: obtain servlet url-pattern","body":"<p>Imagine I have defined these REST endpoints:</p>\n<pre><code>@RequestMapping(path = &quot;/user&quot;)\n@RestController\npublic class ConfigUserController {\n\n    [...]\n    \n    @GetMapping(path = &quot;/variables/&quot;)\n    public ResponseEntity&lt;List&lt;Variable&gt;&gt; getAllVariables(...)\n        [...]\n    }\n    \n    @GetMapping(path = &quot;/variables/{name}&quot;)\n    public ResponseEntity&lt;Variable&gt; getVariableByName(...)\n        [...]\n    }\n    \n    @PutMapping(path = &quot;/variables/{name}/{value}&quot;)\n    public ResponseEntity&lt;Variable&gt; setVariableByName(...)\n        [...]\n    }\n}\n</code></pre>\n<p>I've defined two filter (logging and authorization), inside the filters I want to get the url-patter which matched current request. Using the example above:</p>\n<ul>\n<li>if the request was a GET to /variables, I want &quot;/variables&quot;</li>\n<li>if the request was a GET to /variables/myfancyname, I want &quot;/variables/{name}&quot;</li>\n<li>if the request was a PUT to /variables/myfancyname/myvalue, I want &quot;/variables/{name}/{value}&quot;</li>\n</ul>\n<p>Basically what I need is to get the path defined in the mapping annotation inside the doFilter(ServletRequest request, ServletResponse response, FilterChain chain) method of my filters.</p>\n<p>Ideally I want to have do the possibility to access the url-pattern value in my filter like this:</p>\n<pre><code>@Component\n@Order(3)\npublic class MyAuthorizationRequestFilter extends GenericFilterBean {\n    [...]\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        // here I get the value\n        String urlPattern = request.useSomeMethod().toGetUrlPattern();\n        [...]\n        boolean auth = false;\n        // here I do stuff\n        [...]\n        // finally let's see if the user is authorized\n        if (auth) {\n            chain.doFilter(request, responde);\n        } else {\n            throw SomeAuthorizationError();\n        }\n    }\n    [...]\n}\n</code></pre>\n<p>I've been searching but I wasn't able to find a working solution.</p>\n<p>If it's possible I prefer not to scan for collections or web.xml files (which I don't have), nor using reflections, because the code will be executed every time the filter get triggered and I don't want to affect performance.</p>\n<p>Links or suggestions are welcome.</p>\n<p>EDIT: added details, addes filter example cose</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1700770534,"post_id":77539380,"comment_id":136697881,"body_markdown":"The question is unclear. How is the class used? Where are those variables defined? Please provide a [minimal reproducible example](http://stackoverflow.com/help/minimal-reproducible-example).","body":"The question is unclear. How is the class used? Where are those variables defined? Please provide a <a href=\"http://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":14796931,"reputation":389,"user_id":10686345,"display_name":"Ayush Goyal"},"score":0,"creation_date":1700771011,"post_id":77539380,"comment_id":136697941,"body_markdown":"This is kind of configuration class. Earlier those variables values we were reading from properties or constant file but now we have to pass while executing/running the jar.","body":"This is kind of configuration class. Earlier those variables values we were reading from properties or constant file but now we have to pass while executing/running the jar."},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1700771364,"post_id":77539380,"comment_id":136697988,"body_markdown":"Does this answer your question? [Java Command line arguments](https://stackoverflow.com/questions/716153/java-command-line-arguments) (guessing. Your question is pretty unclear.)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/716153/java-command-line-arguments\">Java Command line arguments</a> (guessing. Your question is pretty unclear.)"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1700771692,"post_id":77539380,"comment_id":136698033,"body_markdown":"Pass them how? How are they defined?","body":"Pass them how? How are they defined?"},{"owner":{"account_id":14796931,"reputation":389,"user_id":10686345,"display_name":"Ayush Goyal"},"score":0,"creation_date":1700771878,"post_id":77539380,"comment_id":136698051,"body_markdown":"@S&#246;ren - How can i set &#39;baseUrl&#39; &amp; &#39;VENDOR_SERVICE_API&#39; parameters value in VendorServiceWrapper.java class from main method ? I can&#39;t pass the values by creating the object of VendorServiceWrapper class in main class.","body":"@S&#246;ren - How can i set &#39;baseUrl&#39; &amp; &#39;VENDOR_SERVICE_API&#39; parameters value in VendorServiceWrapper.java class from main method ? I can&#39;t pass the values by creating the object of VendorServiceWrapper class in main class."},{"owner":{"account_id":14796931,"reputation":389,"user_id":10686345,"display_name":"Ayush Goyal"},"score":0,"creation_date":1700772402,"post_id":77539380,"comment_id":136698099,"body_markdown":"@aled - It&#39;s like - in general, we read values from application.properties file using &#39;@Value&#39; annotation for a particular parameter. Now, we are not allowed to use &#39;@Value&#39; annotation to read the value. now the ask is to pass those variables values while running the jar -  now, my question is how can we define &amp; set the values of those variables which we are passing while executing the jar.","body":"@aled - It&#39;s like - in general, we read values from application.properties file using &#39;@Value&#39; annotation for a particular parameter. Now, we are not allowed to use &#39;@Value&#39; annotation to read the value. now the ask is to pass those variables values while running the jar -  now, my question is how can we define &amp; set the values of those variables which we are passing while executing the jar."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1700780056,"post_id":77539380,"comment_id":136698797,"body_markdown":"That should be all part of the question, including where are those &quot;parameters&quot; declared. You haven&#39;t give us any details.","body":"That should be all part of the question, including where are those &quot;parameters&quot; declared. You haven&#39;t give us any details."}],"answers":[{"comments":[{"owner":{"account_id":14796931,"reputation":389,"user_id":10686345,"display_name":"Ayush Goyal"},"score":0,"creation_date":1700773462,"post_id":77539506,"comment_id":136698206,"body_markdown":"thanks for comment. How can we achieve this via CLI?","body":"thanks for comment. How can we achieve this via CLI?"},{"owner":{"account_id":29846055,"reputation":36,"user_id":22873114,"display_name":"Vignesh V"},"score":0,"creation_date":1700775793,"post_id":77539506,"comment_id":136698413,"body_markdown":"What do you mean by cli here? Is it an IDE like intellij / eclipse. If yes, use the maven compiler to generate the jar and run jar from terminal. There are ways to set java opts on the IDE.","body":"What do you mean by cli here? Is it an IDE like intellij / eclipse. If yes, use the maven compiler to generate the jar and run jar from terminal. There are ways to set java opts on the IDE."}],"tags":[],"owner":{"account_id":29846055,"reputation":36,"user_id":22873114,"display_name":"Vignesh V"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700772751,"creation_date":1700771550,"answer_id":77539506,"question_id":77539380,"body_markdown":"You can use Java opts for this. You can update the properties in application.properties when we run the jar. \r\n\r\nFor spring boot applications you can define properties in your application.properties\r\n\r\n    application.vendor.baseurl = default_url/\r\n    application.vendor.VENDOR_SERVICE_API = default_api\r\n\r\nNow in the class that you have written add two variable\r\n\r\n    @Value(&quot;${application.vendor.baseurl}&quot;)\r\n    private String baseUrl;\r\n    @Value(&quot;${application.vendor.VENDOR_SERVICE_API}&quot;)\r\n    private String VENDOR_SERVICE_API;\r\n\r\nNow use these variable in your code. \r\n\r\nWhen you run the jar, you can override those values like this:\r\n\r\n    java -jar -Dapplication.vendor.baseurl=new_url -Dapplication.vendor.VENDOR_SERVICE_API=new_api {jar_name}.jar\r\n","title":"How can i set parameters/arguments to the overriden method (non-static) of a class while running the jar?","body":"<p>You can use Java opts for this. You can update the properties in application.properties when we run the jar.</p>\n<p>For spring boot applications you can define properties in your application.properties</p>\n<pre><code>application.vendor.baseurl = default_url/\napplication.vendor.VENDOR_SERVICE_API = default_api\n</code></pre>\n<p>Now in the class that you have written add two variable</p>\n<pre><code>@Value(&quot;${application.vendor.baseurl}&quot;)\nprivate String baseUrl;\n@Value(&quot;${application.vendor.VENDOR_SERVICE_API}&quot;)\nprivate String VENDOR_SERVICE_API;\n</code></pre>\n<p>Now use these variable in your code.</p>\n<p>When you run the jar, you can override those values like this:</p>\n<pre><code>java -jar -Dapplication.vendor.baseurl=new_url -Dapplication.vendor.VENDOR_SERVICE_API=new_api {jar_name}.jar\n</code></pre>\n"}],"owner":{"account_id":14796931,"reputation":389,"user_id":10686345,"display_name":"Ayush Goyal"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700772751,"creation_date":1700769724,"question_id":77539380,"body_markdown":"    I have below class in my maven based application:\r\n    \r\n    public class VendorServiceWrapper implements Wrapper{\r\n      \r\n    @Override\r\n    public String getVendorDetails(String vendorNumber, String vendorType){\r\n      StringBuilder url = new StringBuilder();\r\n      url.append(baseUrl).append(VENDOR_SERVICE_API);\r\n      --\r\n      \r\n    }\r\n    \r\n    }\r\n    \r\n    I want to pass the value of these two parameters &#39;baseUrl&#39; &amp; &#39;VENDOR_SERVICE_API&#39; while running the jar. How can i set ? Please help!!\r\n\r\n\r\nNote: These variables are like static or constant means values will not be changed once it is passed while running the jar\r\n\r\nPlease comment in case of any clarification required.","title":"How can i set parameters/arguments to the overriden method (non-static) of a class while running the jar?","body":"<pre><code>I have below class in my maven based application:\n\npublic class VendorServiceWrapper implements Wrapper{\n  \n@Override\npublic String getVendorDetails(String vendorNumber, String vendorType){\n  StringBuilder url = new StringBuilder();\n  url.append(baseUrl).append(VENDOR_SERVICE_API);\n  --\n  \n}\n\n}\n\nI want to pass the value of these two parameters 'baseUrl' &amp; 'VENDOR_SERVICE_API' while running the jar. How can i set ? Please help!!\n</code></pre>\n<p>Note: These variables are like static or constant means values will not be changed once it is passed while running the jar</p>\n<p>Please comment in case of any clarification required.</p>\n"},{"tags":["java","db2","spring-jdbc","spring-transactions","select-for-update"],"owner":{"account_id":1577314,"reputation":167,"user_id":1502017,"accept_rate":20,"display_name":"Arunabh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700772621,"creation_date":1700772621,"question_id":77539571,"body_markdown":"Is Spring Transaction management needed if the SQL query running on Db2 database itself has the isolation level and locks specified. \r\n\r\nFor example, I have the following java method which has two SQL queries running on Db2 database. Queries are run using Spring jdbc template.\r\n\r\n    public List&lt;String&gt; method1(){\r\n       //Runs query: select col1,col2 from mytable where col3=x for update with RS use and keep update locks\r\n       //Runs SQL query: update mytable set col3=y where col1= &lt;value fetched from above&gt;\r\n      return col2\r\n    }\r\n\r\nDoes this method need @Transactional annotation when the query is Select For Update With RS use and keep update locks.\r\n\r\nThe table mytable here has a list of jobs to be picked up by multiple instances of the same application and I want to avoid a single row being picked by two instances. \r\nHence the keywords &quot;with RS use and keep update locks&quot;.\r\n\r\nSo there are two questions:\r\n1) Is @Transactional needed on the method?\r\n2) Select for update with RS use and keep update locks - Is this going to make sure that a single record is not going to be picked up by multiple instances. Can there be deadlocks and if yes, how to avoid it?\r\n\r\nThanks.","title":"Does Select For update query in Db2 need Spring&#39;s @Transactional annotation","body":"<p>Is Spring Transaction management needed if the SQL query running on Db2 database itself has the isolation level and locks specified.</p>\n<p>For example, I have the following java method which has two SQL queries running on Db2 database. Queries are run using Spring jdbc template.</p>\n<pre><code>public List&lt;String&gt; method1(){\n   //Runs query: select col1,col2 from mytable where col3=x for update with RS use and keep update locks\n   //Runs SQL query: update mytable set col3=y where col1= &lt;value fetched from above&gt;\n  return col2\n}\n</code></pre>\n<p>Does this method need @Transactional annotation when the query is Select For Update With RS use and keep update locks.</p>\n<p>The table mytable here has a list of jobs to be picked up by multiple instances of the same application and I want to avoid a single row being picked by two instances.\nHence the keywords &quot;with RS use and keep update locks&quot;.</p>\n<p>So there are two questions:</p>\n<ol>\n<li>Is @Transactional needed on the method?</li>\n<li>Select for update with RS use and keep update locks - Is this going to make sure that a single record is not going to be picked up by multiple instances. Can there be deadlocks and if yes, how to avoid it?</li>\n</ol>\n<p>Thanks.</p>\n"},{"tags":["java","spring","spring-test","spring-test-mvc"],"comments":[{"owner":{"account_id":165479,"reputation":30126,"user_id":388980,"display_name":"Sam Brannen"},"score":0,"creation_date":1473509949,"post_id":25065849,"comment_id":66175875,"body_markdown":"Just a friendly note that if you find one of the answers to your question acceptable, feel free to [accept it](http://stackoverflow.com/help/accepted-answer) if you want to.","body":"Just a friendly note that if you find one of the answers to your question acceptable, feel free to <a href=\"http://stackoverflow.com/help/accepted-answer\">accept it</a> if you want to."}],"answers":[{"tags":[],"owner":{"account_id":165479,"reputation":30126,"user_id":388980,"display_name":"Sam Brannen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1407013363,"creation_date":1407013363,"answer_id":25099385,"question_id":25065849,"body_markdown":"&gt; is there any mechanism in place to make this happen?\r\n\r\nNo, there is no such mechanism that supports this style of configuration.\r\n\r\nCustom _composed annotations_ can be used **instead of** the actual annotations, **not in conjunction with** the actual annotations. This is true across the core Spring Framework (with the exception of perhaps `@Profile` and `@Conditional`).\r\n\r\nIn other words, you can&#39;t declare `@ContextConfiguration` and another annotation that is meta-annotated with `@ContextConfiguration` (e.g., your `@BaseSpringTest`) on the same class. If you do, you&#39;ll find that Spring only finds one of those declarations.\r\n\r\nHowever, if you introduce a base class you can achieve your goal (albeit with the requirement to extend that base class):\r\n\r\n    @BaseSpringTest\r\n    public abstract class AbstractBaseTests extends AbstractTestNGSpringContextTests {\r\n        // ...\r\n    }\r\n\r\n    @ContextConfiguration(locations = {&quot;/web/WEB-INF/spring-extension.xml&quot; }, name = &quot;parent&quot;)\r\n    public class MyTest extends AbstractBaseTests {\r\n        // ...\r\n    }\r\n\r\nOf course, if you&#39;re going the &#39;base class&#39; route, the custom composed annotation is perhaps not as useful to you.\r\n\r\nRegards,\r\n\r\nSam (author of the Spring TestContext Framework)","title":"Overriding ContextHierarchy and ContextConfiguration from a meta-annotation","body":"<blockquote>\n  <p>is there any mechanism in place to make this happen?</p>\n</blockquote>\n\n<p>No, there is no such mechanism that supports this style of configuration.</p>\n\n<p>Custom <em>composed annotations</em> can be used <strong>instead of</strong> the actual annotations, <strong>not in conjunction with</strong> the actual annotations. This is true across the core Spring Framework (with the exception of perhaps <code>@Profile</code> and <code>@Conditional</code>).</p>\n\n<p>In other words, you can't declare <code>@ContextConfiguration</code> and another annotation that is meta-annotated with <code>@ContextConfiguration</code> (e.g., your <code>@BaseSpringTest</code>) on the same class. If you do, you'll find that Spring only finds one of those declarations.</p>\n\n<p>However, if you introduce a base class you can achieve your goal (albeit with the requirement to extend that base class):</p>\n\n<pre><code>@BaseSpringTest\npublic abstract class AbstractBaseTests extends AbstractTestNGSpringContextTests {\n    // ...\n}\n\n@ContextConfiguration(locations = {\"/web/WEB-INF/spring-extension.xml\" }, name = \"parent\")\npublic class MyTest extends AbstractBaseTests {\n    // ...\n}\n</code></pre>\n\n<p>Of course, if you're going the 'base class' route, the custom composed annotation is perhaps not as useful to you.</p>\n\n<p>Regards,</p>\n\n<p>Sam (author of the Spring TestContext Framework)</p>\n"},{"tags":[],"owner":{"account_id":4791885,"reputation":1200,"user_id":3870855,"display_name":"heisbrandon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700771952,"creation_date":1700769350,"answer_id":77539355,"question_id":25065849,"body_markdown":"This should be possible by overriding the [TestContextBootstrapper][1] and supplying an updated [MergedContextConfiguration][2] that copies the initial configuration and adds the extra locations from the annotation.\r\n\r\nHere is a sample:\r\n\r\n    @WebAppConfiguration\r\n    @ContextHierarchy({\r\n            @ContextConfiguration(locations = {&quot;/web/WEB-INF/spring.xml&quot; }, name = &quot;parent&quot;),\r\n            @ContextConfiguration(&quot;/web/WEB-INF/spring-servlet.xml&quot;)\r\n    })\r\n    @Target(ElementType.TYPE)\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @BootstrapWith(BaseSpringTest.BaseSpringTestBootstrapper.class)\r\n    public @interface BaseSpringTest {\r\n        class BaseSpringTestBootstrapper extends DefaultTestContextBootstrapper {\r\n            @Override\r\n            public TestContext buildTestContext() {\r\n                MergedContextConfiguration config = buildMergedContextConfiguration();\r\n    \r\n                Set&lt;String&gt; locations = new HashSet&lt;&gt;();\r\n                Collections.addAll(locations, config.getLocations());\r\n    \r\n                locations.add(&quot;/web/WEB-INF/spring.xml&quot;);\r\n                locations.add(&quot;/web/WEB-INF/spring-servlet.xml&quot;);\r\n    \r\n                MergedContextConfiguration mergedConfig = new MergedContextConfiguration(\r\n                        config.getTestClass(), locations.toArray(new String[0]), config.getClasses(),\r\n                        config.getContextInitializerClasses(), config.getActiveProfiles(), config.getPropertySourceLocations(),\r\n                        config.getPropertySourceProperties(), config.getContextCustomizers(),\r\n                        config.getContextLoader(), getCacheAwareContextLoaderDelegate(), config.getParent()\r\n    \r\n                );\r\n                \r\n                return new DefaultTestContext(getBootstrapContext().getTestClass(), mergedConfig, getCacheAwareContextLoaderDelegate());\r\n            }\r\n        }\r\n    }\r\n\r\n \r\nIt might be necessary to construct the configuration differently for @ContextHierarchy, but it should be possible with modifications to the above example.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/TestContextBootstrapper.html\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/MergedContextConfiguration.html","title":"Overriding ContextHierarchy and ContextConfiguration from a meta-annotation","body":"<p>This should be possible by overriding the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/TestContextBootstrapper.html\" rel=\"nofollow noreferrer\">TestContextBootstrapper</a> and supplying an updated <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/MergedContextConfiguration.html\" rel=\"nofollow noreferrer\">MergedContextConfiguration</a> that copies the initial configuration and adds the extra locations from the annotation.</p>\n<p>Here is a sample:</p>\n<pre><code>@WebAppConfiguration\n@ContextHierarchy({\n        @ContextConfiguration(locations = {&quot;/web/WEB-INF/spring.xml&quot; }, name = &quot;parent&quot;),\n        @ContextConfiguration(&quot;/web/WEB-INF/spring-servlet.xml&quot;)\n})\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@BootstrapWith(BaseSpringTest.BaseSpringTestBootstrapper.class)\npublic @interface BaseSpringTest {\n    class BaseSpringTestBootstrapper extends DefaultTestContextBootstrapper {\n        @Override\n        public TestContext buildTestContext() {\n            MergedContextConfiguration config = buildMergedContextConfiguration();\n\n            Set&lt;String&gt; locations = new HashSet&lt;&gt;();\n            Collections.addAll(locations, config.getLocations());\n\n            locations.add(&quot;/web/WEB-INF/spring.xml&quot;);\n            locations.add(&quot;/web/WEB-INF/spring-servlet.xml&quot;);\n\n            MergedContextConfiguration mergedConfig = new MergedContextConfiguration(\n                    config.getTestClass(), locations.toArray(new String[0]), config.getClasses(),\n                    config.getContextInitializerClasses(), config.getActiveProfiles(), config.getPropertySourceLocations(),\n                    config.getPropertySourceProperties(), config.getContextCustomizers(),\n                    config.getContextLoader(), getCacheAwareContextLoaderDelegate(), config.getParent()\n\n            );\n            \n            return new DefaultTestContext(getBootstrapContext().getTestClass(), mergedConfig, getCacheAwareContextLoaderDelegate());\n        }\n    }\n}\n</code></pre>\n<p>It might be necessary to construct the configuration differently for @ContextHierarchy, but it should be possible with modifications to the above example.</p>\n"}],"owner":{"account_id":1300246,"reputation":888,"user_id":1314068,"accept_rate":100,"display_name":"David E"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1498,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":25099385,"answer_count":2,"score":0,"last_activity_date":1700771952,"creation_date":1406829513,"question_id":25065849,"body_markdown":"We have test classes using a meta-annotation:\r\n\r\n    @WebAppConfiguration\r\n    @ContextHierarchy({\r\n        @ContextConfiguration(locations = {&quot;/web/WEB-INF/spring.xml&quot; }, name = &quot;parent&quot;),\r\n        @ContextConfiguration(&quot;/web/WEB-INF/spring-servlet.xml&quot;)\r\n    })\r\n    @Target(ElementType.TYPE)\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface BaseSpringTest {\r\n    }\r\n\r\nBut would like to be able to override, or append to elements of the hierarchy from the test class itself, eg:\r\n\r\n    @BaseSpringTest\r\n    @ContextConfiguration(locations = {&quot;/web/WEB-INF/spring-extension.xml&quot; }, name = &quot;parent&quot;)\r\n    public class MyTest extends AbstractTestNGSpringContextTests {\r\n        ...\r\n    }\r\n\r\nThis hasn&#39;t worked for us so far... is there any mechanism in place to make this happen?  I found https://jira.spring.io/browse/SPR-11038, but I don&#39;t think that is quite the fix for this type of situation.\r\n\r\nThanks!","title":"Overriding ContextHierarchy and ContextConfiguration from a meta-annotation","body":"<p>We have test classes using a meta-annotation:</p>\n\n<pre><code>@WebAppConfiguration\n@ContextHierarchy({\n    @ContextConfiguration(locations = {\"/web/WEB-INF/spring.xml\" }, name = \"parent\"),\n    @ContextConfiguration(\"/web/WEB-INF/spring-servlet.xml\")\n})\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface BaseSpringTest {\n}\n</code></pre>\n\n<p>But would like to be able to override, or append to elements of the hierarchy from the test class itself, eg:</p>\n\n<pre><code>@BaseSpringTest\n@ContextConfiguration(locations = {\"/web/WEB-INF/spring-extension.xml\" }, name = \"parent\")\npublic class MyTest extends AbstractTestNGSpringContextTests {\n    ...\n}\n</code></pre>\n\n<p>This hasn't worked for us so far... is there any mechanism in place to make this happen?  I found <a href=\"https://jira.spring.io/browse/SPR-11038\" rel=\"nofollow\">https://jira.spring.io/browse/SPR-11038</a>, but I don't think that is quite the fix for this type of situation.</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","string","visual-studio-code"],"comments":[{"owner":{"account_id":24435058,"reputation":6292,"user_id":18359438,"display_name":"MingJie-MSFT"},"score":0,"creation_date":1700789761,"post_id":77539501,"comment_id":136699473,"body_markdown":"This error usually occurs when you&#39;re using a Java version that&#39;s lower than Java 9. What version of java are you using?","body":"This error usually occurs when you&#39;re using a Java version that&#39;s lower than Java 9. What version of java are you using?"},{"owner":{"account_id":15396644,"reputation":25775,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1700814531,"post_id":77539501,"comment_id":136701639,"body_markdown":"exactly what JDK are you using and what version of it? how did you configure intellisense?","body":"exactly what JDK are you using and what version of it? how did you configure intellisense?"},{"owner":{"account_id":29977901,"reputation":1,"user_id":22973676,"display_name":"DrunkMicrowave"},"score":0,"creation_date":1700852789,"post_id":77539501,"comment_id":136707559,"body_markdown":"@starball\nI&#39;m currently using Java 8 and I checked for updates and there aren&#39;t any (Update 391 to be specific) I don&#39;t know how my intellisense is supposed to be configured since I don&#39;t remember touching settings related to that, at all. I&#39;m using Docker to run Java if that helps clarify anything.","body":"@starball I&#39;m currently using Java 8 and I checked for updates and there aren&#39;t any (Update 391 to be specific) I don&#39;t know how my intellisense is supposed to be configured since I don&#39;t remember touching settings related to that, at all. I&#39;m using Docker to run Java if that helps clarify anything."}],"owner":{"account_id":29977901,"reputation":1,"user_id":22973676,"display_name":"DrunkMicrowave"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700771432,"creation_date":1700771432,"question_id":77539501,"body_markdown":"I&#39;m currently making a project and this error pops up on the first line of VS Code whenever I use lines such as this:\r\n\r\n\r\n```\r\nreturn &quot;UserProfile{&quot; +\r\n                &quot;userName=&#39;&quot; + playerName + &#39;\\&#39;&#39; +\r\n                &quot;, numKalahGamesPlayed=&quot; + kalahPlayed +\r\n                &quot;, numAyoGamesPlayed=&quot; + ayoPlayed +\r\n                &quot;, numKalahGamesWon=&quot; + kalahGamesWon +\r\n                &quot;, numAyoGamesWon=&quot; + ayoGamesWon +\r\n                &#39;}&#39;;\r\n```\r\n\r\nThis error always pops up and doesn&#39;t go away until I use something other than the &#39;+&#39; key in System.out.println messages. \r\n\r\nThis error just appears and doesn&#39;t affect the functionality of the code and doesn&#39;t stop me from doing &quot;gradle build&quot; but is annoying to look at.\r\n\r\nMy program is in Java and I&#39;ve already refreshed/restarted VS Code and I&#39;ve clean the Java lang workspace multiple times but nothing works. I know that StringBuilder works and I know how to use it but it&#39;s much easier to use System.out.println();\r\n\r\nCan anyone help me fix this problem?","title":"&quot;java.lang.invoke.StringConcatFactory cannot be resolved.&quot; recurring error in VS Code","body":"<p>I'm currently making a project and this error pops up on the first line of VS Code whenever I use lines such as this:</p>\n<pre><code>return &quot;UserProfile{&quot; +\n                &quot;userName='&quot; + playerName + '\\'' +\n                &quot;, numKalahGamesPlayed=&quot; + kalahPlayed +\n                &quot;, numAyoGamesPlayed=&quot; + ayoPlayed +\n                &quot;, numKalahGamesWon=&quot; + kalahGamesWon +\n                &quot;, numAyoGamesWon=&quot; + ayoGamesWon +\n                '}';\n</code></pre>\n<p>This error always pops up and doesn't go away until I use something other than the '+' key in System.out.println messages.</p>\n<p>This error just appears and doesn't affect the functionality of the code and doesn't stop me from doing &quot;gradle build&quot; but is annoying to look at.</p>\n<p>My program is in Java and I've already refreshed/restarted VS Code and I've clean the Java lang workspace multiple times but nothing works. I know that StringBuilder works and I know how to use it but it's much easier to use System.out.println();</p>\n<p>Can anyone help me fix this problem?</p>\n"},{"tags":["java","arrays","generics"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1700340937,"post_id":77508671,"comment_id":136643503,"body_markdown":"Yes, you simply keep the `Object[]` as-is (without the cast to T[]), as you&#39;ll have to cast at the site that you access the elements of the array anyhow (where those generic types likely reside). Basically, your class should encapsulate all of the mucking with generified arrays. Realistically, you&#39;d be better off using a collection instead of an array, which already does this for you (e.g. `ArrayList`). For a more concrete answer, provide a more concrete example (e.g what you&#39;re actually doing).","body":"Yes, you simply keep the <code>Object[]</code> as-is (without the cast to T[]), as you&#39;ll have to cast at the site that you access the elements of the array anyhow (where those generic types likely reside). Basically, your class should encapsulate all of the mucking with generified arrays. Realistically, you&#39;d be better off using a collection instead of an array, which already does this for you (e.g. <code>ArrayList</code>). For a more concrete answer, provide a more concrete example (e.g what you&#39;re actually doing)."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700341392,"creation_date":1700341392,"answer_id":77508708,"question_id":77508671,"body_markdown":"What you want is impossible. There is a simple fix though. Simply use a `List&lt;A&lt;U1, U2&gt;&gt;`, this is better in all ways, and works great.\r\n\r\n------\r\n\r\nIf you need to hear why what you want simply cannot be done _and_ is a bad idea even if somehow you could, let me try to expand:\r\n\r\n&gt; If we want to create an array with generic type T, we could do something like:\r\n\r\nThis is incorrect. You&#39;re not creating a new array with generic type T. That is not possible. You&#39;re creating a new array with component type Object, and then using an uglycast to assign it to a variable of type T[] which is a lie: You&#39;ve merely convinced the compiler to abolish its usual type checking and treat an array that isn&#39;t `T[]`, as if it was, when it isn&#39;t. This __will__ cause problems down the road.\r\n\r\nTrivial example:\r\n\r\n```\r\nclass Test {\r\n  static String[] makeRealStringArray() {\r\n    return new String[10];\r\n  }\r\n\r\n  static &lt;T&gt; T[] makeFakeStringArray() {\r\n    return (T[]) new Object[10];\r\n  }\r\n\r\n  public static void main(String[] args) {\r\n    Object[] x = makeFakeStringArray();\r\n    x[5] = 10; // assign integer\r\n    x = makeRealStringArray();\r\n    x[5] = 20;\r\n  }\r\n}\r\n```\r\n\r\nThis gets you an ArrayStoreException __on the last line__ - the fake string array method managed to produce an array that doesn&#39;t do this. Also, trivially, `x.getClass().getComponentType()` returns `Object.class` for the fake string array and `String.class` for the real one.\r\n\r\nHence, it is simply incorrect to say that you &#39;made&#39; an array of type T there. You didn&#39;t. You&#39;ve managed to convince the compiler to _treat_ an array of component type Object as if it was a String array when it isn&#39;t.\r\n\r\n&gt;  I am trying to create an array of type A&lt;U1, U2&gt;[]. So my code looks like:\r\n\r\nAnd as you found out, that&#39;s one of the limitations.\r\n\r\n__You can&#39;t do what you want to do__. arrays are primitive, obsolete constructs you shouldn&#39;t be using. There is an exception, for now, for primitive component types (`byte[]` - you can use those). There is no benefit to them here. Use, instead, a `List&lt;A&lt;U1, U2&gt;&gt;` which works just fine.\r\n\r\nIn the end, generics are figments of the compilers imagination (they aren&#39;t reified - an instance of, say, a `j.u.List` simply does not know which component type it was created with), but have a sound typing system (you can&#39;t make impossible assignments without the compiler warnings you about it).\r\n\r\nArrays, in contrast, are reified - an array knows what its component type is, but its type system is unsound. You can get runtime-only ArrayStoreExceptions with no warnings.\r\n\r\nSaid somewhat differently, generics is entirely `javac` managing your types for you, and arrays are mostly ignored by javac and instead are &#39;protected&#39; by `java` - the VM. These concepts are incompatible, so, __generics and arrays do not mix__. &quot;But, I want to mix them!&quot; - no, you don&#39;t, and, even if you somehow do, that is immaterial, because you can&#39;t.","title":"Java Array with generic types in a class","body":"<p>What you want is impossible. There is a simple fix though. Simply use a <code>List&lt;A&lt;U1, U2&gt;&gt;</code>, this is better in all ways, and works great.</p>\n<hr />\n<p>If you need to hear why what you want simply cannot be done <em>and</em> is a bad idea even if somehow you could, let me try to expand:</p>\n<blockquote>\n<p>If we want to create an array with generic type T, we could do something like:</p>\n</blockquote>\n<p>This is incorrect. You're not creating a new array with generic type T. That is not possible. You're creating a new array with component type Object, and then using an uglycast to assign it to a variable of type T[] which is a lie: You've merely convinced the compiler to abolish its usual type checking and treat an array that isn't <code>T[]</code>, as if it was, when it isn't. This <strong>will</strong> cause problems down the road.</p>\n<p>Trivial example:</p>\n<pre><code>class Test {\n  static String[] makeRealStringArray() {\n    return new String[10];\n  }\n\n  static &lt;T&gt; T[] makeFakeStringArray() {\n    return (T[]) new Object[10];\n  }\n\n  public static void main(String[] args) {\n    Object[] x = makeFakeStringArray();\n    x[5] = 10; // assign integer\n    x = makeRealStringArray();\n    x[5] = 20;\n  }\n}\n</code></pre>\n<p>This gets you an ArrayStoreException <strong>on the last line</strong> - the fake string array method managed to produce an array that doesn't do this. Also, trivially, <code>x.getClass().getComponentType()</code> returns <code>Object.class</code> for the fake string array and <code>String.class</code> for the real one.</p>\n<p>Hence, it is simply incorrect to say that you 'made' an array of type T there. You didn't. You've managed to convince the compiler to <em>treat</em> an array of component type Object as if it was a String array when it isn't.</p>\n<blockquote>\n<p>I am trying to create an array of type A&lt;U1, U2&gt;[]. So my code looks like:</p>\n</blockquote>\n<p>And as you found out, that's one of the limitations.</p>\n<p><strong>You can't do what you want to do</strong>. arrays are primitive, obsolete constructs you shouldn't be using. There is an exception, for now, for primitive component types (<code>byte[]</code> - you can use those). There is no benefit to them here. Use, instead, a <code>List&lt;A&lt;U1, U2&gt;&gt;</code> which works just fine.</p>\n<p>In the end, generics are figments of the compilers imagination (they aren't reified - an instance of, say, a <code>j.u.List</code> simply does not know which component type it was created with), but have a sound typing system (you can't make impossible assignments without the compiler warnings you about it).</p>\n<p>Arrays, in contrast, are reified - an array knows what its component type is, but its type system is unsound. You can get runtime-only ArrayStoreExceptions with no warnings.</p>\n<p>Said somewhat differently, generics is entirely <code>javac</code> managing your types for you, and arrays are mostly ignored by javac and instead are 'protected' by <code>java</code> - the VM. These concepts are incompatible, so, <strong>generics and arrays do not mix</strong>. &quot;But, I want to mix them!&quot; - no, you don't, and, even if you somehow do, that is immaterial, because you can't.</p>\n"},{"tags":[],"owner":{"account_id":31622,"reputation":120351,"user_id":86989,"display_name":"newacct"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700769396,"creation_date":1700769396,"answer_id":77539357,"question_id":77508671,"body_markdown":"The reason why `(T[]) new Object[size]` doesn&#39;t throw an exception is that, probably, you are doing this in a generic context where the type variable `T` is unbounded, so its erasure is `Object`. So after type erasure, you are casting an object whose real runtime class is `Object[]`, to `Object[]`, which obviously does not fail.\r\n\r\nThe reason why `(A&lt;U1, U2&gt;[]) new Object[size]` throws an exception is that the erasure of `A&lt;U1, U2&gt;` is `A`, so after type erasure, you are casting an object whose real runtime class is `Object[]`, to `A[]`, which fails because `Object[]` is not a subclass of `A[]`.\r\n\r\nIf you had instead created the array with a type that is the erasure of the type you are casting it to, like the following, it won&#39;t throw an exception:\r\n\r\n    A&lt;U1, U2&gt;[] arr = (A&lt;U1, U2&gt;[]) new A[size];\r\n\r\nor\r\n\r\n    A&lt;U1, U2&gt;[] arr = new A[size];\r\n\r\n(Of course, there are other things you need to be careful about with arrays of generic types. That&#39;s why you get an unchecked warning.)","title":"Java Array with generic types in a class","body":"<p>The reason why <code>(T[]) new Object[size]</code> doesn't throw an exception is that, probably, you are doing this in a generic context where the type variable <code>T</code> is unbounded, so its erasure is <code>Object</code>. So after type erasure, you are casting an object whose real runtime class is <code>Object[]</code>, to <code>Object[]</code>, which obviously does not fail.</p>\n<p>The reason why <code>(A&lt;U1, U2&gt;[]) new Object[size]</code> throws an exception is that the erasure of <code>A&lt;U1, U2&gt;</code> is <code>A</code>, so after type erasure, you are casting an object whose real runtime class is <code>Object[]</code>, to <code>A[]</code>, which fails because <code>Object[]</code> is not a subclass of <code>A[]</code>.</p>\n<p>If you had instead created the array with a type that is the erasure of the type you are casting it to, like the following, it won't throw an exception:</p>\n<pre><code>A&lt;U1, U2&gt;[] arr = (A&lt;U1, U2&gt;[]) new A[size];\n</code></pre>\n<p>or</p>\n<pre><code>A&lt;U1, U2&gt;[] arr = new A[size];\n</code></pre>\n<p>(Of course, there are other things you need to be careful about with arrays of generic types. That's why you get an unchecked warning.)</p>\n"}],"owner":{"account_id":26584785,"reputation":173,"user_id":20697793,"display_name":"Andrew Baker"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1700769396,"creation_date":1700340652,"question_id":77508671,"body_markdown":"I know Java is particularly weird with Generic arrays, but I ran into a new problem with this:\r\n\r\nIf we want to create an array with generic type `T`, we could do something like:\r\n\r\n```java\r\nT[] arr = (T[]) new Object[size];\r\n```\r\n\r\nBut I have a class, A, that itself accepts generic parameters\r\n\r\n```java\r\nclass A&lt;T1, T2&gt; {}\r\n```\r\n\r\nand another class that accepts its own generic parameters:\r\n\r\n```java\r\nclass B&lt;U1, U2&gt; {}\r\n```\r\n\r\nInside the `B` class, I am trying to create an array of type `A&lt;U1, U2&gt;[]`. So my code looks like:\r\n\r\n```java\r\nA&lt;U1, U2&gt;[] arr = (A&lt;U1, U2&gt;[]) new Object[size];\r\n```\r\n\r\nBut this isn&#39;t working. It is actually causing a runtime exception:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.ClassCastException: class [Ljava.lang.Object; cannot be cast to class [A; ([Ljava.lang.Object; is in module java.base of loader &#39;bootstrap&#39;; [A; is in unnamed module of loader &#39;app&#39;)\r\n\r\nIs there a fix?","title":"Java Array with generic types in a class","body":"<p>I know Java is particularly weird with Generic arrays, but I ran into a new problem with this:</p>\n<p>If we want to create an array with generic type <code>T</code>, we could do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>T[] arr = (T[]) new Object[size];\n</code></pre>\n<p>But I have a class, A, that itself accepts generic parameters</p>\n<pre class=\"lang-java prettyprint-override\"><code>class A&lt;T1, T2&gt; {}\n</code></pre>\n<p>and another class that accepts its own generic parameters:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class B&lt;U1, U2&gt; {}\n</code></pre>\n<p>Inside the <code>B</code> class, I am trying to create an array of type <code>A&lt;U1, U2&gt;[]</code>. So my code looks like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>A&lt;U1, U2&gt;[] arr = (A&lt;U1, U2&gt;[]) new Object[size];\n</code></pre>\n<p>But this isn't working. It is actually causing a runtime exception:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.ClassCastException: class [Ljava.lang.Object; cannot be cast to class [A; ([Ljava.lang.Object; is in module java.base of loader 'bootstrap'; [A; is in unnamed module of loader 'app')</p>\n</blockquote>\n<p>Is there a fix?</p>\n"},{"tags":["java","android","dialog","android-alertdialog"],"comments":[{"owner":{"account_id":1238981,"reputation":132436,"user_id":1202025,"accept_rate":80,"display_name":"ρяσѕρєя K"},"score":0,"creation_date":1448294344,"post_id":33874705,"comment_id":55514097,"body_markdown":"For changing color of text need to create custom Adapter with layout then pass it to setAdapter method","body":"For changing color of text need to create custom Adapter with layout then pass it to setAdapter method"}],"answers":[{"comments":[{"owner":{"account_id":5871618,"reputation":2305,"user_id":4623782,"accept_rate":100,"display_name":"Raymond"},"score":0,"creation_date":1448295221,"post_id":33875464,"comment_id":55514692,"body_markdown":"Creating an adapter is overkill for this in my opinion. I&#39;m looking for an easier solution.","body":"Creating an adapter is overkill for this in my opinion. I&#39;m looking for an easier solution."},{"owner":{"account_id":5871618,"reputation":2305,"user_id":4623782,"accept_rate":100,"display_name":"Raymond"},"score":0,"creation_date":1448531952,"post_id":33875464,"comment_id":55630941,"body_markdown":"As disappointed as I am, I&#39;m gonna mark this as correct, as it seems there is no other way.","body":"As disappointed as I am, I&#39;m gonna mark this as correct, as it seems there is no other way."}],"tags":[],"owner":{"account_id":6617309,"reputation":132,"user_id":5110107,"display_name":"Metro Polinet"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1448294875,"creation_date":1448294875,"answer_id":33875464,"question_id":33874705,"body_markdown":" you need to create custom dialog like this:\r\n\r\n    Dialog d =new Dialog(context);\r\n    d.setContentView(R.layout.dialog); \r\n    ListView l=((ListView )d.findViewById(R.id.list));\r\n\r\nsee this link [https://stackoverflow.com/questions/17914714/android-executing-a-custom-listview-in-a-custom-dialog-properly][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/17914714/android-executing-a-custom-listview-in-a-custom-dialog-properly","title":"Android - Set TextColor ListItem on an AlertDialog with list programatically","body":"<p>you need to create custom dialog like this:</p>\n\n<pre><code>Dialog d =new Dialog(context);\nd.setContentView(R.layout.dialog); \nListView l=((ListView )d.findViewById(R.id.list));\n</code></pre>\n\n<p>see this link <a href=\"https://stackoverflow.com/questions/17914714/android-executing-a-custom-listview-in-a-custom-dialog-properly\">Android - Executing a custom listview in a custom dialog properly</a></p>\n"},{"tags":[],"owner":{"account_id":5821529,"reputation":51,"user_id":6266501,"display_name":"Nurlan Shukurov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1540887730,"creation_date":1540887730,"answer_id":53060061,"question_id":33874705,"body_markdown":"create new theme in styles.xml \r\n\r\n    &lt;style name=&quot;MyDialogTheme&quot; parent=&quot;Theme.AppCompat.Light.Dialog.Alert&quot;&gt;\r\n        &lt;item name=&quot;android:background&quot;&gt;@color/alertDialogDark&lt;/item&gt;\r\n        &lt;item name=&quot;android:textColor&quot;&gt;@android:color/white&lt;/item&gt;\r\n        &lt;item name=&quot;colorAccent&quot;&gt;@android:color/white&lt;/item&gt;\r\n        &lt;item name=&quot;android:textColorAlertDialogListItem&quot;&gt;@android:color/white&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\nyou need to change android:textColorAlertDialogListItem to whatever color you like\r\n\r\nAnd in code write this\r\n\r\n    AlertDialog.Builder orderByBuilder = new AlertDialog.Builder(MainActivity.this, R.style.MyDialogTheme);\r\n                ","title":"Android - Set TextColor ListItem on an AlertDialog with list programatically","body":"<p>create new theme in styles.xml </p>\n\n<pre><code>&lt;style name=\"MyDialogTheme\" parent=\"Theme.AppCompat.Light.Dialog.Alert\"&gt;\n    &lt;item name=\"android:background\"&gt;@color/alertDialogDark&lt;/item&gt;\n    &lt;item name=\"android:textColor\"&gt;@android:color/white&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@android:color/white&lt;/item&gt;\n    &lt;item name=\"android:textColorAlertDialogListItem\"&gt;@android:color/white&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>you need to change android:textColorAlertDialogListItem to whatever color you like</p>\n\n<p>And in code write this</p>\n\n<pre><code>AlertDialog.Builder orderByBuilder = new AlertDialog.Builder(MainActivity.this, R.style.MyDialogTheme);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1496502,"reputation":3708,"user_id":1402301,"accept_rate":68,"display_name":"coolcool1994"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700768947,"creation_date":1700767702,"answer_id":77539254,"question_id":33874705,"body_markdown":"I know this is created a long time ago, but I had the same problem and by looking into the AlertController class I found there is a way to set a viewAdapter (so you don&#39;t have to create a ListView yourself as the current accepted answer in 11/2023 suggests).\r\n\r\n[![enter image description here][1]][1]\r\n\r\n(Check out Close Ties app which is a messaging app for Close Ties at closeties.com)\r\n\r\n      \r\n\r\n         val builder = AlertDialog.Builder(activity)\r\n         // instead of setItems use setAdapter\r\n         builder.setAdapter(ColorListAdapter(colorAlertItemsList, colorsList, WeakReference(this)), DialogInterface.OnClickListener { dialog, which -&gt;\r\n             if (which == 0) {\r\n             }\r\n         })\r\n\r\nCreating a ListAdapter subclass is easy like:\r\n\r\n    class ColorListAdapter(val display_text_list: MutableList&lt;String&gt;,\r\n                                   val color_list: MutableList&lt;Int&gt;,\r\n                                   private val messagingDetailFragment: WeakReference&lt;MessagingDetailFragment&gt;\r\n    ) :\r\n        ListAdapter {\r\n    \r\n        override fun isEmpty(): Boolean {\r\n            return display_text_list.size == 0\r\n        }\r\n        override fun getView(position: Int, view: View?, viewGroup: ViewGroup?): View {\r\n            val rootView: ConstraintLayout;\r\n            if (view == null) {\r\n                rootView = LayoutInflater.from(messagingDetailFragment.get()!!.activity as AppCompatActivity)\r\n                    .inflate(R.layout.fragment_messaging_detail_color_alert_dialog_cell, null) as ConstraintLayout\r\n            } else {\r\n                rootView = view as ConstraintLayout\r\n            }\r\n            val textView = rootView.findViewById&lt;AppCompatButton&gt;(R.id.textView)\r\n            textView.text = display_text_list[position];\r\n            textView.setTextColor(color_list[position])\r\n            return rootView;\r\n        }\r\n    \r\n        override fun registerDataSetObserver(p0: DataSetObserver?) {\r\n        }\r\n    \r\n        override fun getItemViewType(position: Int): Int {\r\n            return 0\r\n        }\r\n    \r\n        override fun getItem(p0: Int): Any {\r\n            return display_text_list[p0]\r\n        }\r\n    \r\n        override fun getViewTypeCount(): Int {\r\n            return 1;\r\n        }\r\n    \r\n        override fun isEnabled(p0: Int): Boolean {\r\n            return true\r\n        }\r\n    \r\n        override fun getItemId(position: Int): Long = position.toLong()\r\n    \r\n        override fun hasStableIds(): Boolean {\r\n            return true\r\n        }\r\n    \r\n        override fun areAllItemsEnabled(): Boolean {\r\n            return true\r\n        }\r\n    \r\n        override fun unregisterDataSetObserver(p0: DataSetObserver?) {\r\n        }\r\n    \r\n        override fun getCount(): Int {\r\n            return display_text_list.size\r\n        }\r\n    }\r\n\r\n\r\nAnd the xml for the view could be like:\r\n\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:background=&quot;@color/white&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n        &lt;androidx.appcompat.widget.AppCompatButton\r\n            style=&quot;?android:attr/borderlessButtonStyle&quot;\r\n            android:id=&quot;@+id/textView&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;60dp&quot;\r\n            android:text=&quot;Retry&quot;\r\n            android:textColor=&quot;@color/tintColor&quot;\r\n            android:background=&quot;@drawable/selected_bottom_sheet_button_background_line&quot;\r\n            android:textSize=&quot;20.5sp&quot;\r\n            android:textAllCaps=&quot;false&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;/&gt;\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mBX3Qm.png","title":"Android - Set TextColor ListItem on an AlertDialog with list programatically","body":"<p>I know this is created a long time ago, but I had the same problem and by looking into the AlertController class I found there is a way to set a viewAdapter (so you don't have to create a ListView yourself as the current accepted answer in 11/2023 suggests).</p>\n<p><a href=\"https://i.stack.imgur.com/mBX3Qm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mBX3Qm.png\" alt=\"enter image description here\" /></a></p>\n<p>(Check out Close Ties app which is a messaging app for Close Ties at closeties.com)</p>\n<pre><code>     val builder = AlertDialog.Builder(activity)\n     // instead of setItems use setAdapter\n     builder.setAdapter(ColorListAdapter(colorAlertItemsList, colorsList, WeakReference(this)), DialogInterface.OnClickListener { dialog, which -&gt;\n         if (which == 0) {\n         }\n     })\n</code></pre>\n<p>Creating a ListAdapter subclass is easy like:</p>\n<pre><code>class ColorListAdapter(val display_text_list: MutableList&lt;String&gt;,\n                               val color_list: MutableList&lt;Int&gt;,\n                               private val messagingDetailFragment: WeakReference&lt;MessagingDetailFragment&gt;\n) :\n    ListAdapter {\n\n    override fun isEmpty(): Boolean {\n        return display_text_list.size == 0\n    }\n    override fun getView(position: Int, view: View?, viewGroup: ViewGroup?): View {\n        val rootView: ConstraintLayout;\n        if (view == null) {\n            rootView = LayoutInflater.from(messagingDetailFragment.get()!!.activity as AppCompatActivity)\n                .inflate(R.layout.fragment_messaging_detail_color_alert_dialog_cell, null) as ConstraintLayout\n        } else {\n            rootView = view as ConstraintLayout\n        }\n        val textView = rootView.findViewById&lt;AppCompatButton&gt;(R.id.textView)\n        textView.text = display_text_list[position];\n        textView.setTextColor(color_list[position])\n        return rootView;\n    }\n\n    override fun registerDataSetObserver(p0: DataSetObserver?) {\n    }\n\n    override fun getItemViewType(position: Int): Int {\n        return 0\n    }\n\n    override fun getItem(p0: Int): Any {\n        return display_text_list[p0]\n    }\n\n    override fun getViewTypeCount(): Int {\n        return 1;\n    }\n\n    override fun isEnabled(p0: Int): Boolean {\n        return true\n    }\n\n    override fun getItemId(position: Int): Long = position.toLong()\n\n    override fun hasStableIds(): Boolean {\n        return true\n    }\n\n    override fun areAllItemsEnabled(): Boolean {\n        return true\n    }\n\n    override fun unregisterDataSetObserver(p0: DataSetObserver?) {\n    }\n\n    override fun getCount(): Int {\n        return display_text_list.size\n    }\n}\n</code></pre>\n<p>And the xml for the view could be like:</p>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:background=&quot;@color/white&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n    &lt;androidx.appcompat.widget.AppCompatButton\n        style=&quot;?android:attr/borderlessButtonStyle&quot;\n        android:id=&quot;@+id/textView&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;60dp&quot;\n        android:text=&quot;Retry&quot;\n        android:textColor=&quot;@color/tintColor&quot;\n        android:background=&quot;@drawable/selected_bottom_sheet_button_background_line&quot;\n        android:textSize=&quot;20.5sp&quot;\n        android:textAllCaps=&quot;false&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;/&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"}],"owner":{"account_id":5871618,"reputation":2305,"user_id":4623782,"accept_rate":100,"display_name":"Raymond"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1500,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":33875464,"answer_count":3,"score":2,"last_activity_date":1700768947,"creation_date":1448292578,"question_id":33874705,"body_markdown":"I have an AlertDialog where a user must choose between several options. The default color scheme for this is white text on a darkgrey background. In the App users can configure their own color which are suppose to match with white. Changing the background to white isn&#39;t the issue, but I cannot set the textcolor of the items.\r\n\r\nI was looking for something like `dialog.getItems.setTextColor([usercolor]);`, but I haven&#39;t found a solution for it. Below my code for building the dialog. \r\n    \r\n        tvRekening.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    AlertDialog.Builder builder = new AlertDialog.Builder(a);\r\n                    builder.setTitle(&quot;Title&quot;)\r\n                            .setItems(values, new DialogInterface.OnClickListener() {\r\n    \r\n                                public void onClick(DialogInterface dialog, int which) {\r\n                                    // The &#39;which&#39; argument contains the index position\r\n                                    // of the selected item\r\n                                    setRekeningView(which);\r\n                                }\r\n                            });\r\n                    AlertDialog dialog = builder.create();\r\n                    dialog.getWindow().setBackgroundDrawable(new ColorDrawable(ContextCompat.getColor(a, R.color.white)));\r\n                    dialog.show();\r\n                }\r\n            });\r\n\r\nTo further illustrate the issue:\r\n\r\n\r\nThe default color scheme:\r\nhttps://i.stack.imgur.com/nMKAA.png\r\n\r\nChanging the background color to white makes the text unreadable (because it&#39;s still white).\r\nhttps://i.stack.imgur.com/PEABc.png\r\n\r\n\r\nEDIT:\r\nI understand I can create a custom adapter for this. But creating an Adapter only for editing the text color of the items seems a bit of an overkill. If someone knows a solution without going through the trouble of creating an adapter, it would be appreciated. If not i&#39;ll close the question in a while.","title":"Android - Set TextColor ListItem on an AlertDialog with list programatically","body":"<p>I have an AlertDialog where a user must choose between several options. The default color scheme for this is white text on a darkgrey background. In the App users can configure their own color which are suppose to match with white. Changing the background to white isn't the issue, but I cannot set the textcolor of the items.</p>\n\n<p>I was looking for something like <code>dialog.getItems.setTextColor([usercolor]);</code>, but I haven't found a solution for it. Below my code for building the dialog. </p>\n\n<pre><code>    tvRekening.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                AlertDialog.Builder builder = new AlertDialog.Builder(a);\n                builder.setTitle(\"Title\")\n                        .setItems(values, new DialogInterface.OnClickListener() {\n\n                            public void onClick(DialogInterface dialog, int which) {\n                                // The 'which' argument contains the index position\n                                // of the selected item\n                                setRekeningView(which);\n                            }\n                        });\n                AlertDialog dialog = builder.create();\n                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(ContextCompat.getColor(a, R.color.white)));\n                dialog.show();\n            }\n        });\n</code></pre>\n\n<p>To further illustrate the issue:</p>\n\n<p>The default color scheme:\n<a href=\"https://i.stack.imgur.com/nMKAA.png\" rel=\"nofollow\">https://i.stack.imgur.com/nMKAA.png</a></p>\n\n<p>Changing the background color to white makes the text unreadable (because it's still white).\n<a href=\"https://i.stack.imgur.com/PEABc.png\" rel=\"nofollow\">https://i.stack.imgur.com/PEABc.png</a></p>\n\n<p>EDIT:\nI understand I can create a custom adapter for this. But creating an Adapter only for editing the text color of the items seems a bit of an overkill. If someone knows a solution without going through the trouble of creating an adapter, it would be appreciated. If not i'll close the question in a while.</p>\n"},{"tags":["java","jasper-reports"],"owner":{"account_id":20563284,"reputation":31,"user_id":15093299,"display_name":"テンカサン"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700768920,"creation_date":1700715229,"question_id":77534429,"body_markdown":"Spring boot version: 3.1.5\r\nJava version: 21\r\nJasper version: 6.20.0 or 6.20.6\r\n\r\nI am trying to convert the .jrPrint file to PDF and PDFA by using Jasper and these are my dependencies in my pom.xml\r\n\r\n    &lt;dependencies&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;jasperreports&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;6.20.6&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nand setEncoding Method isn&#39;t available to use. Perhaps it doesn&#39;t exist. And I tried to use JRPdfExporter and set its parameter, so the JRExporterParameter is deprecated.\r\n\r\n    JRPdfExporter exporter = new JRPdfExporter();\r\n            exporter.setExporterInput(new SimpleExporterInput(jasperPrint));\r\n            exporter.setExporterOutput(\r\n                    new SimpleOutputStreamExporterOutput(new FileOutputStream(new File(pdfOutputPath))));\r\n\r\n    Map&lt;JRExporterParameter, Object&gt; parameters = new HashMap&lt;&gt;();\r\n    parameters.put(&quot;net.sf.jasperreports.export.character.encoding&quot;, &quot;UTF-8&quot;);\r\n    exporter.setParameters(parameters);\r\n\r\n\r\n\r\n","title":"How to set charactor encoding to UTF-8 in Jasper version 6.20.0 or 6.20.6 in Java Spring boot","body":"<p>Spring boot version: 3.1.5\nJava version: 21\nJasper version: 6.20.0 or 6.20.6</p>\n<p>I am trying to convert the .jrPrint file to PDF and PDFA by using Jasper and these are my dependencies in my pom.xml</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;\n        &lt;artifactId&gt;jasperreports&lt;/artifactId&gt;\n        &lt;version&gt;6.20.6&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>and setEncoding Method isn't available to use. Perhaps it doesn't exist. And I tried to use JRPdfExporter and set its parameter, so the JRExporterParameter is deprecated.</p>\n<pre><code>JRPdfExporter exporter = new JRPdfExporter();\n        exporter.setExporterInput(new SimpleExporterInput(jasperPrint));\n        exporter.setExporterOutput(\n                new SimpleOutputStreamExporterOutput(new FileOutputStream(new File(pdfOutputPath))));\n\nMap&lt;JRExporterParameter, Object&gt; parameters = new HashMap&lt;&gt;();\nparameters.put(&quot;net.sf.jasperreports.export.character.encoding&quot;, &quot;UTF-8&quot;);\nexporter.setParameters(parameters);\n</code></pre>\n"},{"tags":["java","session","prometheus"],"answers":[{"comments":[{"owner":{"account_id":1432415,"reputation":10687,"user_id":1354537,"accept_rate":83,"display_name":"Marged"},"score":0,"creation_date":1500404867,"post_id":45174232,"comment_id":77318595,"body_markdown":"Understood, but is there no concept to remove a Gauge ? I have another scenario where I need to gather statistics for browsers which I will express using a label. I would prefer not having to set them simply to zero.","body":"Understood, but is there no concept to remove a Gauge ? I have another scenario where I need to gather statistics for browsers which I will express using a label. I would prefer not having to set them simply to zero."},{"owner":{"account_id":30623,"reputation":32240,"user_id":83591,"display_name":"brian-brazil"},"score":0,"creation_date":1500416971,"post_id":45174232,"comment_id":77324797,"body_markdown":"There is a way, but it&#39;s only really there for unitesting. That&#39;s also a use case for which Prometheus is not suited, for event logging you want something like the ELK stack.","body":"There is a way, but it&#39;s only really there for unitesting. That&#39;s also a use case for which Prometheus is not suited, for event logging you want something like the ELK stack."},{"owner":{"account_id":1432415,"reputation":10687,"user_id":1354537,"accept_rate":83,"display_name":"Marged"},"score":0,"creation_date":1500445223,"post_id":45174232,"comment_id":77332706,"body_markdown":"I am still trying to figure out if my other scenario is a good fit for Prometheus or not. I clearly understood the timestamp part, I will change this. Can you tell me some (more) specific reasons why my approach for the sessions is not suited for Prometheus ? Is it because of the huge number of possible `internal_key`s that will go into the thousands although there can&#39;t be more than 1000 sessions at one time ? I can create another question for my second scenario, if you prefer this just give me a sign","body":"I am still trying to figure out if my other scenario is a good fit for Prometheus or not. I clearly understood the timestamp part, I will change this. Can you tell me some (more) specific reasons why my approach for the sessions is not suited for Prometheus ? Is it because of the huge number of possible <code>internal_key</code>s that will go into the thousands although there can&#39;t be more than 1000 sessions at one time ? I can create another question for my second scenario, if you prefer this just give me a sign"},{"owner":{"account_id":30623,"reputation":32240,"user_id":83591,"display_name":"brian-brazil"},"score":0,"creation_date":1500457924,"post_id":45174232,"comment_id":77341276,"body_markdown":"The number of sessions is one reason, but also what they represent. Prometheus metrics you might extract out of that would be the total number of sessions, oldest session or average session ago.","body":"The number of sessions is one reason, but also what they represent. Prometheus metrics you might extract out of that would be the total number of sessions, oldest session or average session ago."},{"owner":{"account_id":1432415,"reputation":10687,"user_id":1354537,"accept_rate":83,"display_name":"Marged"},"score":0,"creation_date":1500492620,"post_id":45174232,"comment_id":77366041,"body_markdown":"I added another question which describes my scenario. I think it is different from what we already discussed. I would like to hear your opinion because I do not yet have a sense of where I hit the &quot;critical mass&quot; for Prometheus -&gt; https://stackoverflow.com/questions/45199443/best-practice-for-storing-up-front-unknown-but-limited-in-amount-gauges","body":"I added another question which describes my scenario. I think it is different from what we already discussed. I would like to hear your opinion because I do not yet have a sense of where I hit the &quot;critical mass&quot; for Prometheus -&gt; <a href=\"https://stackoverflow.com/questions/45199443/best-practice-for-storing-up-front-unknown-but-limited-in-amount-gauges\" title=\"best practice for storing up front unknown but limited in amount gauges\">stackoverflow.com/questions/45199443/&hellip;</a>"},{"owner":{"account_id":75275,"reputation":18170,"user_id":215969,"accept_rate":94,"display_name":"Ilia Choly"},"score":5,"creation_date":1612805937,"post_id":45174232,"comment_id":116876090,"body_markdown":"How is &quot;there is a way but I&#39;m not telling&quot; the accepted answer?","body":"How is &quot;there is a way but I&#39;m not telling&quot; the accepted answer?"}],"tags":[],"owner":{"account_id":30623,"reputation":32240,"user_id":83591,"display_name":"brian-brazil"},"comment_count":6,"down_vote_count":2,"up_vote_count":4,"is_accepted":true,"score":2,"last_activity_date":1500401602,"creation_date":1500401602,"answer_id":45174232,"question_id":45172765,"body_markdown":"This sort of per-request handling is not suited to a metric system like Prometheus. This would be considered profiling, for which something more custom would be in order.\r\n\r\nIt&#39;s also recommend to export the timestamp for this sort of thing, not how long ago it was. This is resilient to the thing updating the time no longer updating, and you can do the subtraction from `time()` on the Prometheus end.","title":"How to remove no longer valid Gauges","body":"<p>This sort of per-request handling is not suited to a metric system like Prometheus. This would be considered profiling, for which something more custom would be in order.</p>\n\n<p>It's also recommend to export the timestamp for this sort of thing, not how long ago it was. This is resilient to the thing updating the time no longer updating, and you can do the subtraction from <code>time()</code> on the Prometheus end.</p>\n"},{"tags":[],"owner":{"account_id":75275,"reputation":18170,"user_id":215969,"accept_rate":94,"display_name":"Ilia Choly"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1612806783,"creation_date":1612806467,"answer_id":66106697,"question_id":45172765,"body_markdown":"The `Gauge` class has a `remove` method which has the same signature as the `labels` method. For your specific example, removing the metrics associated with that gauge would look like this\r\n\r\n    sessionInactivity.remove(internalKey, externalKey, browser);\r\n\r\n\r\nThe client library [documentation][1] states:\r\n\r\n&gt; Metrics with labels SHOULD support a remove() method with the same\r\n&gt; signature as labels() that will remove a Child from the metric no\r\n&gt; longer exporting it, and a clear() method that removes all Children\r\n&gt; from the metric. These invalidate caching of Children.\r\n\r\n\r\n  [1]: https://prometheus.io/docs/instrumenting/writing_clientlibs/#labels","title":"How to remove no longer valid Gauges","body":"<p>The <code>Gauge</code> class has a <code>remove</code> method which has the same signature as the <code>labels</code> method. For your specific example, removing the metrics associated with that gauge would look like this</p>\n<pre><code>sessionInactivity.remove(internalKey, externalKey, browser);\n</code></pre>\n<p>The client library <a href=\"https://prometheus.io/docs/instrumenting/writing_clientlibs/#labels\" rel=\"nofollow noreferrer\">documentation</a> states:</p>\n<blockquote>\n<p>Metrics with labels SHOULD support a remove() method with the same\nsignature as labels() that will remove a Child from the metric no\nlonger exporting it, and a clear() method that removes all Children\nfrom the metric. These invalidate caching of Children.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":14036429,"reputation":315,"user_id":10138996,"display_name":"pascalre"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1645095704,"creation_date":1645095704,"answer_id":71156904,"question_id":45172765,"body_markdown":"Since you are registrating the gauge, you need to remove the gauges which are expired from the registry.\r\n\r\n    protected MeterRegistry registry;\r\n\r\n      ...\r\n      static final Gauge sessionInactivity = Gauge.build()\r\n        .name(&quot;sessions_inactivity_duration&quot;)\r\n        .labelNames(&quot;internal_key&quot;, &quot;external_key&quot;, &quot;browser&quot;)\r\n        .help(&quot;Number of milliseconds a certain session has been inactive&quot;)\r\n        .register(registry); // use registry\r\n    \r\n      ...\r\n      // remove expired gauges from registry\r\n      registry.remove(sessionInactivity);\r\n","title":"How to remove no longer valid Gauges","body":"<p>Since you are registrating the gauge, you need to remove the gauges which are expired from the registry.</p>\n<pre><code>protected MeterRegistry registry;\n\n  ...\n  static final Gauge sessionInactivity = Gauge.build()\n    .name(&quot;sessions_inactivity_duration&quot;)\n    .labelNames(&quot;internal_key&quot;, &quot;external_key&quot;, &quot;browser&quot;)\n    .help(&quot;Number of milliseconds a certain session has been inactive&quot;)\n    .register(registry); // use registry\n\n  ...\n  // remove expired gauges from registry\n  registry.remove(sessionInactivity);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17446251,"reputation":121,"user_id":12647239,"display_name":"Lucas Lombardi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700768567,"creation_date":1700768567,"answer_id":77539314,"question_id":45172765,"body_markdown":"I was trying to find a solution for this:\r\n\r\n```\r\nmetric{version=&quot;1.0.0&quot;,} 1.0\r\nmetric{version=&quot;1.0.1&quot;,} 1.0\r\n```\r\nI needed to remove the old metric if exists.\r\n```java\r\nGauge gauge = Gauge.builder(fildName, myModelClassObject, MyModelClass::getFieldValue)\r\n        .tags(tags)\r\n        .strongReference(true)\r\n        .register(Metrics.globalRegistry);\r\n```\r\n\r\nSolved saving it on a `Map&lt;String, ObjectWithTagsAndGauge&gt;` and when comes a different event I remove the other one before send the new metric with:\r\n```java\r\n//if map contains key\r\nObjectWithTagsAndGauge obj = map.get(key);\r\n//my conditions with tags\r\nMetrics.globalRegistry.remove(obj.getGauge()); // get the Gauge object to be removed\r\n```\r\n\r\nHope it helps","title":"How to remove no longer valid Gauges","body":"<p>I was trying to find a solution for this:</p>\n<pre><code>metric{version=&quot;1.0.0&quot;,} 1.0\nmetric{version=&quot;1.0.1&quot;,} 1.0\n</code></pre>\n<p>I needed to remove the old metric if exists.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Gauge gauge = Gauge.builder(fildName, myModelClassObject, MyModelClass::getFieldValue)\n        .tags(tags)\n        .strongReference(true)\n        .register(Metrics.globalRegistry);\n</code></pre>\n<p>Solved saving it on a <code>Map&lt;String, ObjectWithTagsAndGauge&gt;</code> and when comes a different event I remove the other one before send the new metric with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//if map contains key\nObjectWithTagsAndGauge obj = map.get(key);\n//my conditions with tags\nMetrics.globalRegistry.remove(obj.getGauge()); // get the Gauge object to be removed\n</code></pre>\n<p>Hope it helps</p>\n"}],"owner":{"account_id":1432415,"reputation":10687,"user_id":1354537,"accept_rate":83,"display_name":"Marged"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8073,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":45174232,"answer_count":4,"score":9,"last_activity_date":1700768567,"creation_date":1500396468,"question_id":45172765,"body_markdown":"I use the Prometheus Java Client to export session information of my application. We want to show how long sessions have been idle.\r\n\r\nThe problem is that we have a maximum of 1000 sessions and sessions are removed after a certain period. Unfortunately they do not disappear from Prometheus:\r\n\r\n[![Current and expired sessions][1]][1]\r\n\r\nMy code looks like this:\r\n\r\n\r\n    static final Gauge sessionInactivity = Gauge.build()\r\n        .name(&quot;sessions_inactivity_duration&quot;)\r\n        .labelNames(&quot;internal_key&quot;, &quot;external_key&quot;, &quot;browser&quot;)\r\n        .help(&quot;Number of milliseconds a certain session has been inactive&quot;)\r\n        .register();\r\n\r\n    sessionInactivity.labels(internalKey, externalKey, browser).set(inactivityTime);\r\n\r\nI tried to do `sessionInactivity.clear()` during scrapes but obviously this does not empty the content of the Gauge.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/G78Kr.png","title":"How to remove no longer valid Gauges","body":"<p>I use the Prometheus Java Client to export session information of my application. We want to show how long sessions have been idle.</p>\n\n<p>The problem is that we have a maximum of 1000 sessions and sessions are removed after a certain period. Unfortunately they do not disappear from Prometheus:</p>\n\n<p><a href=\"https://i.stack.imgur.com/G78Kr.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/G78Kr.png\" alt=\"Current and expired sessions\"></a></p>\n\n<p>My code looks like this:</p>\n\n<pre><code>static final Gauge sessionInactivity = Gauge.build()\n    .name(\"sessions_inactivity_duration\")\n    .labelNames(\"internal_key\", \"external_key\", \"browser\")\n    .help(\"Number of milliseconds a certain session has been inactive\")\n    .register();\n\nsessionInactivity.labels(internalKey, externalKey, browser).set(inactivityTime);\n</code></pre>\n\n<p>I tried to do <code>sessionInactivity.clear()</code> during scrapes but obviously this does not empty the content of the Gauge.</p>\n"},{"tags":["java","android","kotlin","ssl","okhttp"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1700778134,"post_id":77539258,"comment_id":136698638,"body_markdown":"Check the server using https://www.ssllabs.com/ssltest/ It will reveal if something is wrong with the used certificate or the certificate chain.","body":"Check the server using <a href=\"https://www.ssllabs.com/ssltest/\" rel=\"nofollow noreferrer\">ssllabs.com/ssltest</a> It will reveal if something is wrong with the used certificate or the certificate chain."}],"owner":{"account_id":10465788,"reputation":12056,"user_id":7715250,"accept_rate":74,"display_name":"J. Doe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1700768331,"creation_date":1700767775,"question_id":77539258,"body_markdown":"I am trying to migrate from the horrible `DownloadManager` api to `OkHttpClient` api but I am running into a weird connection issue I never saw with `DownloadManager`. Download files from https://testfiledownload.com/ worked without problems using `OkHttpClient` thought, so I am not sure what the problem with my url is from CloudFront. This is my code:\r\n\r\n    val client = OkHttpClient()\r\n    val request = Request.Builder().url(&quot;https://d3d5vfmrt0s3c6.cloudfront.net/notification/ffc888ca-69d6-48f7-8225-58b3a5010f9c?Expires=1701371587&amp;Signature=Lx4lwBHnWEwtnAeKPzFq15nRMsU2hUXXTQ1OjlDDsSBjA5hhxx~0eQocaB37QXPUnoF8uYWNcz~fYliUSRFl2rsx70iAgAb45SNwh5MDqEIhAwQ1oDlU3l5etxflzqHMHY7KewS3mw1y1osS~Jg7eOCOazKUl3CL1C0iBY6eTxa85MWlcTkocfKgm2TlwNtV~Epdlj1vEA1XSK3TWLLHUP6NnBX2W1lLxZLudZfL-JWFDQvA2peON7OiHRQ~okF28xHumVlQr0Ao7-DRBwAW9xn3k8jIbfca-kUhe8otnBOXVh~lMwf3HZ04SwKpTY8txHRzBRjtQkezPym9MvGfaw__&amp;Key-Pair-Id=K1SS0UK0I5H897&quot;).build()\r\n    val response = client.newCall(request).execute().body.bytes()\r\n\r\nThe url downloads the file perfectly in my browser, but the code fails with this stacktrace. Any ideas?\r\n\r\n\r\n    FATAL EXCEPTION: pool-20-thread-1\r\n    Process: com.myappapp.myapp, PID: 13514\r\n    java.net.ConnectException: Failed to connect to d3d5vfmrt0s3c6.cloudfront.net/[2600:9000:20b4:e00:3:24f0:f980:21]:443\r\n    \tat okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:256)\r\n    \tat okhttp3.internal.connection.ConnectPlan.connectTcp(ConnectPlan.kt:128)\r\n    \tat okhttp3.internal.connection.FastFallbackExchangeFinder$launchTcpConnect$1.runOnce(FastFallbackExchangeFinder.kt:138)\r\n    \tat java.lang.Thread.run(Thread.java:1012)\r\n    \tSuppressed: javax.net.ssl.SSLHandshakeException: Chain validation failed\r\n    \t\tat com.android.org.conscrypt.SSLUtils.toSSLHandshakeException(SSLUtils.java:356)\r\n    \t\r\n    \t\tat okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:32)\r\n    \t\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n    \t\tat okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:95)\r\n    \t\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n    \t\tat okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:84)\r\n    \t\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n    \t\tat okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:65)\r\n    \t\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n    \t\tat okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:205)\r\n    \t\tat okhttp3.internal.connection.RealCall.execute(RealCall.kt:158)\r\n    \t\tat com.myappapp.myapp.MediaDownloaderKt.downloadFile(MediaDownloader.kt:49)\r\n    \t\tat com.myappapp.myapp.myappFirebaseMessagingService.onMessageReceived$lambda$0(FirebaseMessagingService.kt:112)\r\n    \t\tat com.myappapp.myapp.myappFirebaseMessagingService.$r8$lambda$Jl38Qg36Z_B--LnezsL88ZwrYUo(Unknown Source:0)\r\n    \t\tat com.myappapp.myapp.myappFirebaseMessagingService$$ExternalSyntheticLambda0.run(Unknown Source:4)\r\n    \t\t... 3 more\r\n    \tCaused by: java.security.cert.CertificateException: Chain validation failed\r\n    \t\tat com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:719)\r\n    \t\tat com.android.org.conscrypt.TrustManagerImpl.checkTrustedRecursive(TrustManagerImpl.java:549)\r\n    \t\r\n    \t\tat com.android.org.conscrypt.NativeCrypto.ENGINE_SSL_read_direct(Native Method)\r\n    \t\tat com.android.org.conscrypt.NativeSsl.readDirectByteBuffer(NativeSsl.java:569)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngine.readPlaintextDataDirect(ConscryptEngine.java:1095)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngine.readPlaintextData(ConscryptEngine.java:1079)\r\n    \t\t... 28 more\r\n    \tCaused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\r\n    \t\tat sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:135)\r\n    \t\tat sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:222)\r\n    \t\tat sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:140)\r\n    \t\tat sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:79)\r\n    \t\tat java.security.cert.CertPathValidator.validate(CertPathValidator.java:309)\r\n    \t\tat com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:715)\r\n    \t\t... 45 more\r\n    \tCaused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\r\n    \t\tat sun.security.provider.certpath.OCSPResponse.verify(OCSPResponse.java:619)\r\n    \r\n    \t\t... 50 more\r\n    \tSuppressed: java.net.ConnectException: Failed to connect to d3d5vfmrt0s3c6.cloudfront.net/[2600:9000:20b4:5400:3:24f0:f980:21]:443\r\n    \t\t... 9 more\r\n    \tCaused by: java.net.ConnectException: failed to connect to d3d5vfmrt0s3c6.cloudfront.net/2600:9000:20b4:5400:3:24f0:f980:21 (port 443) from /fec0::f6d:85d6:8b53:7299 (port 41924) after 10000ms: isConnected failed: EHOSTUNREACH (No route to host)\r\n    \t\tat libcore.io.IoBridge.isConnected(IoBridge.java:347)\r\n    \r\n    \t\tat okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:254)\r\n    \t\t... 8 more\r\n    \tCaused by: android.system.ErrnoException: isConnected failed: EHOSTUNREACH (No route to host)\r\n    \t\tat libcore.io.IoBridge.isConnected(IoBridge.java:334)\r\n    \t\t... 18 more\r\n    \tSuppressed: javax.net.ssl.SSLHandshakeException: Chain validation failed\r\n    \t\tat com.android.org.conscrypt.SSLUtils.toSSLHandshakeException(SSLUtils.java:356)\r\n    \r\n    \t\tat com.myappapp.myapp.MediaDownloaderKt.downloadFile(MediaDownloader.kt:49)\r\n    \t\tat com.myappapp.myapp.myappFirebaseMessagingService.onMessageReceived$lambda$0(FirebaseMessagingService.kt:112)\r\n    \t\tat com.myappapp.myapp.myappFirebaseMessagingService.$r8$lambda$Jl38Qg36Z_B--LnezsL88ZwrYUo(Unknown Source:0)\r\n    \t\tat com.myappapp.myapp.myappFirebaseMessagingService$$ExternalSyntheticLambda0.run(Unknown Source:4)\r\n    \t\t... 3 more\r\n    \tCaused by: java.security.cert.CertificateException: Chain validation failed\r\n    \t\tat com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:719)\r\n    \t\r\n    \t\tat com.android.org.conscrypt.ConscryptEngine.readPlaintextDataDirect(ConscryptEngine.java:1095)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngine.readPlaintextData(ConscryptEngine.java:1079)\r\n    \t\t... 28 more\r\n    \tCaused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\r\n    \t\tat sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:135)\r\n    \t\tat sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:222)\r\n    \t\tat sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:140)\r\n    \t\tat sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:79)\r\n    \t\tat java.security.cert.CertPathValidator.validate(CertPathValidator.java:309)\r\n    \t\tat com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:715)\r\n    \t\t... 45 more\r\n    \tCaused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\r\n    \t\tat sun.security.provider.certpath.OCSPResponse.verify(OCSPResponse.java:619)\r\n    \t\tat sun.security.provider.certpath.RevocationChecker.checkOCSP(RevocationChecker.java:709)\r\n    \t\tat sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:363)\r\n    \t\tat sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:337)\r\n    \t\tat sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:125)\r\n    \t\t... 50 more\r\n    \tSuppressed: java.net.ConnectException: Failed to connect to d3d5vfmrt0s3c6.cloudfront.net/[2600:9000:20b4:8800:3:24f0:f980:21]:443\r\n    \t\t... 9 more\r\n    \tCaused by: java.net.ConnectException: failed to connect to d3d5vfmrt0s3c6.cloudfront.net/2600:9000:20b4:8800:3:24f0:f980:21 (port 443) from /fec0::f6d:85d6:8b53:7299 (port 47678) after 10000ms: isConnected failed: EHOSTUNREACH (No route to host)\r\n    \t\tat libcore.io.IoBridge.isConnected(IoBridge.java:347)\r\n    \t\tat libcore.io.IoBridge.connectErrno(IoBridge.java:237)\r\n    \t\tat libcore.io.IoBridge.connect(IoBridge.java:179)\r\n    \t\tat java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:142)\r\n    \t\tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:390)\r\n    \t\tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:230)\r\n    \t\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:212)\r\n    \t\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\r\n    \t\tat java.net.Socket.connect(Socket.java:646)\r\n    \t\tat okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\r\n    \t\tat okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:254)\r\n    \t\t... 8 more\r\n    \tCaused by: android.system.ErrnoException: isConnected failed: EHOSTUNREACH (No route to host)\r\n    \t\tat libcore.io.IoBridge.isConnected(IoBridge.java:334)\r\n    \t\t... 18 more\r\n    \tSuppressed: javax.net.ssl.SSLHandshakeException: Chain validation failed\r\n    \t\tat com.android.org.conscrypt.SSLUtils.toSSLHandshakeException(SSLUtils.java:356)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngine.convertException(ConscryptEngine.java:1134)\r\n    \t\t\r\n    \t\tat okhttp3.internal.connection.RealCall.execute(RealCall.kt:158)\r\n    \t\tat com.myappapp.myapp.MediaDownloaderKt.downloadFile(MediaDownloader.kt:49)\r\n    \t\tat com.myappapp.myapp.myappFirebaseMessagingService.onMessageReceived$lambda$0(FirebaseMessagingService.kt:112)\r\n    \t\tat com.myappapp.myapp.myappFirebaseMessagingService.$r8$lambda$Jl38Qg36Z_B--LnezsL88ZwrYUo(Unknown Source:0)\r\n    \t\tat com.myappapp.myapp.myappFirebaseMessagingService$$ExternalSyntheticLambda0.run(Unknown Source:4)\r\n    \t\t... 3 more\r\n    \tCaused by: java.security.cert.CertificateException: Chain validation failed\r\n    \t\tat com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:719)\r\n    \t\r\n    \t\tat com.android.org.conscrypt.ConscryptEngine.readPlaintextDataDirect(ConscryptEngine.java:1095)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngine.readPlaintextData(ConscryptEngine.java:1079)\r\n    \t\t... 28 more\r\n    \tCaused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\r\n    \t\tat sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:135)\r\n    \t\tat sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:222)\r\n    \t\tat sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:140)\r\n    \t\tat sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:79)\r\n    \t\tat java.security.cert.CertPathValidator.validate(CertPathValidator.java:309)\r\n    \t\tat com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:715)\r\n    \t\t... 45 more\r\n    \tCaused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\r\n    \t\tat sun.security.provider.certpath.OCSPResponse.verify(OCSPResponse.java:619)\r\n    \t\tat sun.security.provider.certpath.RevocationChecker.checkOCSP(RevocationChecker.java:709)\r\n    \t\tat sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:363)\r\n    \t\tat sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:337)\r\n    \t\tat sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:125)\r\n    \t\t... 50 more\r\n    \tSuppressed: java.net.ConnectException: Failed to connect to d3d5vfmrt0s3c6.cloudfront.net/[2600:9000:20b4:6600:3:24f0:f980:21]:443\r\n    \t\t... 9 more\r\n    \tCaused by: java.net.ConnectException: failed to connect to d3d5vfmrt0s3c6.cloudfront.net/2600:9000:20b4:6600:3:24f0:f980:21 (port 443) from /fec0::f6d:85d6:8b53:7299 (port 48548) after 10000ms: isConnected failed: EHOSTUNREACH (No route to host)\r\n    \t\tat libcore.io.IoBridge.isConnected(IoBridge.java:347)\r\n    \t\tat libcore.io.IoBridge.connectErrno(IoBridge.java:237)\r\n    \t\tat libcore.io.IoBridge.connect(IoBridge.java:179)\r\n    \t\tat java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:142)\r\n    \t\tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:390)\r\n    \t\tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:230)\r\n    \t\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:212)\r\n    \t\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\r\n    \t\tat java.net.Socket.connect(Socket.java:646)\r\n    \t\tat okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\r\n    \t\tat okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:254)\r\n    \t\t... 8 more\r\n    \tCaused by: android.system.ErrnoException: isConnected failed: EHOSTUNREACH (No route to host)\r\n    \t\tat libcore.io.IoBridge.isConnected(IoBridge.java:334)\r\n    \t\t... 18 more\r\n    \tSuppressed: javax.net.ssl.SSLHandshakeException: Chain validation failed\r\n    \t\tat com.android.org.conscrypt.SSLUtils.toSSLHandshakeException(SSLUtils.java:356)\r\n    \t\r\n    \t\tat okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:65)\r\n    \t\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n    \t\tat okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:205)\r\n    \t\tat okhttp3.internal.connection.RealCall.execute(RealCall.kt:158)\r\n    \t\tat com.myappapp.myapp.MediaDownloaderKt.downloadFile(MediaDownloader.kt:49)\r\n    \t\tat com.myappapp.myapp.myappFirebaseMessagingService.onMessageReceived$lambda$0(FirebaseMessagingService.kt:112)\r\n    \t\tat com.myappapp.myapp.myappFirebaseMessagingService.$r8$lambda$Jl38Qg36Z_B--LnezsL88ZwrYUo(Unknown Source:0)\r\n    \t\tat com.myappapp.myapp.myappFirebaseMessagingService$$ExternalSyntheticLambda0.run(Unknown Source:4)\r\n    \t\t... 3 more\r\n    \tCaused by: java.security.cert.CertificateException: Chain validation failed\r\n    \t\tat com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:719)\r\n    \t\tat com.android.org.conscrypt.TrustManagerImpl.checkTrustedRecursive(TrustManagerImpl.java:549)\r\n    \t\r\n    \t\tat android.security.net.config.NetworkSecurityTrustManager.checkServerTrusted(NetworkSecurityTrustManager.java:94)\r\n    \t\tat android.security.net.config.RootTrustManager.checkServerTrusted(RootTrustManager.java:90)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngineSocket$2.checkServerTrusted(ConscryptEngineSocket.java:163)\r\n    \t\tat com.android.org.conscrypt.Platform.checkServerTrusted(Platform.java:260)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngine.verifyCertificateChain(ConscryptEngine.java:1638)\r\n    \t\tat com.android.org.conscrypt.NativeCrypto.ENGINE_SSL_read_direct(Native Method)\r\n    \t\tat com.android.org.conscrypt.NativeSsl.readDirectByteBuffer(NativeSsl.java:569)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngine.readPlaintextDataDirect(ConscryptEngine.java:1095)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngine.readPlaintextData(ConscryptEngine.java:1079)\r\n    \t\t... 28 more\r\n    \tCaused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\r\n    \t\tat sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:135)\r\n    \t\tat sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:222)\r\n    \t\tat sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:140)\r\n    \t\tat sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:79)\r\n    \t\tat java.security.cert.CertPathValidator.validate(CertPathValidator.java:309)\r\n    \t\tat com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:715)\r\n    \t\t... 45 more\r\n    \tCaused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\r\n    \t\tat sun.security.provider.certpath.OCSPResponse.verify(OCSPResponse.java:619)\r\n    \t\tat sun.security.provider.certpath.RevocationChecker.checkOCSP(RevocationChecker.java:709)\r\n    \t\tat sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:363)\r\n    \t\tat sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:337)\r\n    \t\tat sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:125)\r\n    \t\t... 50 more\r\n    \tSuppressed: java.net.ConnectException: Failed to connect to d3d5vfmrt0s3c6.cloudfront.net/[2600:9000:20b4:7a00:3:24f0:f980:21]:443\r\n    \t\t... 9 more\r\n    \tCaused by: java.net.ConnectException: failed to connect to d3d5vfmrt0s3c6.cloudfront.net/2600:9000:20b4:7a00:3:24f0:f980:21 (port 443) from /fec0::f6d:85d6:8b53:7299 (port 42166) after 10000ms: isConnected failed: EHOSTUNREACH (No route to host)\r\n    \t\tat libcore.io.IoBridge.isConnected(IoBridge.java:347)\r\n    \t\tat libcore.io.IoBridge.connectErrno(IoBridge.java:237)\r\n    \t\tat libcore.io.IoBridge.connect(IoBridge.java:179)\r\n    \t\tat java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:142)\r\n    \t\tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:390)\r\n    \t\tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:230)\r\n    \t\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:212)\r\n    \t\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\r\n    \t\tat java.net.Socket.connect(Socket.java:646)\r\n    \t\tat okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\r\n    \t\tat okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:254)\r\n    \t\t... 8 more\r\n    \tCaused by: android.system.ErrnoException: isConnected failed: EHOSTUNREACH (No route to host)\r\n    \t\tat libcore.io.IoBridge.isConnected(IoBridge.java:334)\r\n    \t\t... 18 more\r\n    \tSuppressed: java.net.ConnectException: Failed to connect to d3d5vfmrt0s3c6.cloudfront.net/[2600:9000:20b4:ec00:3:24f0:f980:21]:443\r\n    \t\t... 9 more\r\n    \tCaused by: java.net.ConnectException: failed to connect to d3d5vfmrt0s3c6.cloudfront.net/2600:9000:20b4:ec00:3:24f0:f980:21 (port 443) from /fec0::f6d:85d6:8b53:7299 (port 50870) after 10000ms: isConnected failed: EHOSTUNREACH (No route to host)\r\n    \t\tat libcore.io.IoBridge.isConnected(IoBridge.java:347)\r\n    \t\tat libcore.io.IoBridge.connectErrno(IoBridge.java:237)\r\n    \t\tat libcore.io.IoBridge.connect(IoBridge.java:179)\r\n    \t\tat java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:142)\r\n    \t\tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:390)\r\n    \t\tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:230)\r\n    \t\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:212)\r\n    \t\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\r\n    \t\tat java.net.Socket.connect(Socket.java:646)\r\n    \t\tat okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\r\n    \t\tat okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:254)\r\n    \t\t... 8 more\r\n    \tCaused by: android.system.ErrnoException: isConnected failed: EHOSTUNREACH (No route to host)\r\n    \t\tat libcore.io.IoBridge.isConnected(IoBridge.java:334)\r\n    \t\t... 18 more\r\n    \tSuppressed: java.net.ConnectException: Failed to connect to d3d5vfmrt0s3c6.cloudfront.net/[2600:9000:20b4:bc00:3:24f0:f980:21]:443\r\n    \t\t... 9 more\r\n    \tCaused by: java.net.ConnectException: failed to connect to d3d5vfmrt0s3c6.cloudfront.net/2600:9000:20b4:bc00:3:24f0:f980:21 (port 443) from /fec0::f6d:85d6:8b53:7299 (port 57768) after 10000ms: isConnected failed: EHOSTUNREACH (No route to host)\r\n    \t\tat libcore.io.IoBridge.isConnected(IoBridge.java:347)\r\n    \t\tat libcore.io.IoBridge.connectErrno(IoBridge.java:237)\r\n    \t\tat libcore.io.IoBridge.connect(IoBridge.java:179)\r\n    \t\tat java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:142)\r\n    \t\tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:390)\r\n    \t\tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:230)\r\n    \t\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:212)\r\n    \t\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\r\n    \t\tat java.net.Socket.connect(Socket.java:646)\r\n    \t\tat okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\r\n    \t\tat okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:254)\r\n    \t\t... 8 more\r\n    \tCaused by: android.system.ErrnoException: isConnected failed: EHOSTUNREACH (No route to host)\r\n    \t\tat libcore.io.IoBridge.isConnected(IoBridge.java:334)\r\n    \t\t... 18 more\r\n    \tSuppressed: java.net.ConnectException: Failed to connect to d3d5vfmrt0s3c6.cloudfront.net/[2600:9000:20b4:c000:3:24f0:f980:21]:443\r\n    \t\t... 9 more\r\n    \tCaused by: java.net.ConnectException: failed to connect to d3d5vfmrt0s3c6.cloudfront.net/2600:9000:20b4:c000:3:24f0:f980:21 (port 443) from /fec0::f6d:85d6:8b53:7299 (port 51634) after 10000ms: isConnected failed: EHOSTUNREACH (No route to host)\r\n    \t\tat libcore.io.IoBridge.isConnected(IoBridge.java:347)\r\n    \t\tat libcore.io.IoBridge.connectErrno(IoBridge.java:237)\r\n    \t\tat libcore.io.IoBridge.connect(IoBridge.java:179)\r\n    \t\tat java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:142)\r\n    \t\tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:390)\r\n    \t\tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:230)\r\n    \t\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:212)\r\n    \t\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\r\n    \t\tat java.net.Socket.connect(Socket.java:646)\r\n    \t\tat okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\r\n    \t\tat okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:254)\r\n    \t\t... 8 more\r\n    \tCaused by: android.system.ErrnoException: isConnected failed: EHOSTUNREACH (No route to host)\r\n    \t\tat libcore.io.IoBridge.isConnected(IoBridge.java:334)\r\n    \t\t... 18 more\r\n    Caused by: java.net.ConnectException: failed to connect to d3d5vfmrt0s3c6.cloudfront.net/2600:9000:20b4:e00:3:24f0:f980:21 (port 443) from /fec0::f6d:85d6:8b53:7299 (port 56396) after 10000ms: isConnected failed: EHOSTUNREACH (No route to host)\r\n    \tat libcore.io.IoBridge.isConnected(IoBridge.java:347)\r\n    \tat libcore.io.IoBridge.connectErrno(IoBridge.java:237)\r\n    \tat libcore.io.IoBridge.connect(IoBridge.java:179)\r\n    \tat java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:142)\r\n    \tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:390)\r\n    \tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:230)\r\n    \tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:212)\r\n    \tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\r\n    \tat java.net.Socket.connect(Socket.java:646)\r\n    \tat okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\r\n    \tat okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:254)\r\n    \t... 8 more\r\n    Caused by: android.system.ErrnoException: isConnected failed: EHOSTUNREACH (No route to host)\r\n    \tat libcore.io.IoBridge.isConnected(IoBridge.java:334)\r\n    \t... 18 more","title":"Downloading file with OkHttpClient fails from downloading CloudFront URL","body":"<p>I am trying to migrate from the horrible <code>DownloadManager</code> api to <code>OkHttpClient</code> api but I am running into a weird connection issue I never saw with <code>DownloadManager</code>. Download files from <a href=\"https://testfiledownload.com/\" rel=\"nofollow noreferrer\">https://testfiledownload.com/</a> worked without problems using <code>OkHttpClient</code> thought, so I am not sure what the problem with my url is from CloudFront. This is my code:</p>\n<pre><code>val client = OkHttpClient()\nval request = Request.Builder().url(&quot;https://d3d5vfmrt0s3c6.cloudfront.net/notification/ffc888ca-69d6-48f7-8225-58b3a5010f9c?Expires=1701371587&amp;Signature=Lx4lwBHnWEwtnAeKPzFq15nRMsU2hUXXTQ1OjlDDsSBjA5hhxx~0eQocaB37QXPUnoF8uYWNcz~fYliUSRFl2rsx70iAgAb45SNwh5MDqEIhAwQ1oDlU3l5etxflzqHMHY7KewS3mw1y1osS~Jg7eOCOazKUl3CL1C0iBY6eTxa85MWlcTkocfKgm2TlwNtV~Epdlj1vEA1XSK3TWLLHUP6NnBX2W1lLxZLudZfL-JWFDQvA2peON7OiHRQ~okF28xHumVlQr0Ao7-DRBwAW9xn3k8jIbfca-kUhe8otnBOXVh~lMwf3HZ04SwKpTY8txHRzBRjtQkezPym9MvGfaw__&amp;Key-Pair-Id=K1SS0UK0I5H897&quot;).build()\nval response = client.newCall(request).execute().body.bytes()\n</code></pre>\n<p>The url downloads the file perfectly in my browser, but the code fails with this stacktrace. Any ideas?</p>\n<pre><code>FATAL EXCEPTION: pool-20-thread-1\nProcess: com.myappapp.myapp, PID: 13514\njava.net.ConnectException: Failed to connect to d3d5vfmrt0s3c6.cloudfront.net/[2600:9000:20b4:e00:3:24f0:f980:21]:443\n    at okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:256)\n    at okhttp3.internal.connection.ConnectPlan.connectTcp(ConnectPlan.kt:128)\n    at okhttp3.internal.connection.FastFallbackExchangeFinder$launchTcpConnect$1.runOnce(FastFallbackExchangeFinder.kt:138)\n    at java.lang.Thread.run(Thread.java:1012)\n    Suppressed: javax.net.ssl.SSLHandshakeException: Chain validation failed\n        at com.android.org.conscrypt.SSLUtils.toSSLHandshakeException(SSLUtils.java:356)\n    \n        at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:32)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n        at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:95)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n        at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:84)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n        at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:65)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n        at okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:205)\n        at okhttp3.internal.connection.RealCall.execute(RealCall.kt:158)\n        at com.myappapp.myapp.MediaDownloaderKt.downloadFile(MediaDownloader.kt:49)\n        at com.myappapp.myapp.myappFirebaseMessagingService.onMessageReceived$lambda$0(FirebaseMessagingService.kt:112)\n        at com.myappapp.myapp.myappFirebaseMessagingService.$r8$lambda$Jl38Qg36Z_B--LnezsL88ZwrYUo(Unknown Source:0)\n        at com.myappapp.myapp.myappFirebaseMessagingService$$ExternalSyntheticLambda0.run(Unknown Source:4)\n        ... 3 more\n    Caused by: java.security.cert.CertificateException: Chain validation failed\n        at com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:719)\n        at com.android.org.conscrypt.TrustManagerImpl.checkTrustedRecursive(TrustManagerImpl.java:549)\n    \n        at com.android.org.conscrypt.NativeCrypto.ENGINE_SSL_read_direct(Native Method)\n        at com.android.org.conscrypt.NativeSsl.readDirectByteBuffer(NativeSsl.java:569)\n        at com.android.org.conscrypt.ConscryptEngine.readPlaintextDataDirect(ConscryptEngine.java:1095)\n        at com.android.org.conscrypt.ConscryptEngine.readPlaintextData(ConscryptEngine.java:1079)\n        ... 28 more\n    Caused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\n        at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:135)\n        at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:222)\n        at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:140)\n        at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:79)\n        at java.security.cert.CertPathValidator.validate(CertPathValidator.java:309)\n        at com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:715)\n        ... 45 more\n    Caused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\n        at sun.security.provider.certpath.OCSPResponse.verify(OCSPResponse.java:619)\n\n        ... 50 more\n    Suppressed: java.net.ConnectException: Failed to connect to d3d5vfmrt0s3c6.cloudfront.net/[2600:9000:20b4:5400:3:24f0:f980:21]:443\n        ... 9 more\n    Caused by: java.net.ConnectException: failed to connect to d3d5vfmrt0s3c6.cloudfront.net/2600:9000:20b4:5400:3:24f0:f980:21 (port 443) from /fec0::f6d:85d6:8b53:7299 (port 41924) after 10000ms: isConnected failed: EHOSTUNREACH (No route to host)\n        at libcore.io.IoBridge.isConnected(IoBridge.java:347)\n\n        at okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:254)\n        ... 8 more\n    Caused by: android.system.ErrnoException: isConnected failed: EHOSTUNREACH (No route to host)\n        at libcore.io.IoBridge.isConnected(IoBridge.java:334)\n        ... 18 more\n    Suppressed: javax.net.ssl.SSLHandshakeException: Chain validation failed\n        at com.android.org.conscrypt.SSLUtils.toSSLHandshakeException(SSLUtils.java:356)\n\n        at com.myappapp.myapp.MediaDownloaderKt.downloadFile(MediaDownloader.kt:49)\n        at com.myappapp.myapp.myappFirebaseMessagingService.onMessageReceived$lambda$0(FirebaseMessagingService.kt:112)\n        at com.myappapp.myapp.myappFirebaseMessagingService.$r8$lambda$Jl38Qg36Z_B--LnezsL88ZwrYUo(Unknown Source:0)\n        at com.myappapp.myapp.myappFirebaseMessagingService$$ExternalSyntheticLambda0.run(Unknown Source:4)\n        ... 3 more\n    Caused by: java.security.cert.CertificateException: Chain validation failed\n        at com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:719)\n    \n        at com.android.org.conscrypt.ConscryptEngine.readPlaintextDataDirect(ConscryptEngine.java:1095)\n        at com.android.org.conscrypt.ConscryptEngine.readPlaintextData(ConscryptEngine.java:1079)\n        ... 28 more\n    Caused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\n        at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:135)\n        at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:222)\n        at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:140)\n        at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:79)\n        at java.security.cert.CertPathValidator.validate(CertPathValidator.java:309)\n        at com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:715)\n        ... 45 more\n    Caused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\n        at sun.security.provider.certpath.OCSPResponse.verify(OCSPResponse.java:619)\n        at sun.security.provider.certpath.RevocationChecker.checkOCSP(RevocationChecker.java:709)\n        at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:363)\n        at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:337)\n        at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:125)\n        ... 50 more\n    Suppressed: java.net.ConnectException: Failed to connect to d3d5vfmrt0s3c6.cloudfront.net/[2600:9000:20b4:8800:3:24f0:f980:21]:443\n        ... 9 more\n    Caused by: java.net.ConnectException: failed to connect to d3d5vfmrt0s3c6.cloudfront.net/2600:9000:20b4:8800:3:24f0:f980:21 (port 443) from /fec0::f6d:85d6:8b53:7299 (port 47678) after 10000ms: isConnected failed: EHOSTUNREACH (No route to host)\n        at libcore.io.IoBridge.isConnected(IoBridge.java:347)\n        at libcore.io.IoBridge.connectErrno(IoBridge.java:237)\n        at libcore.io.IoBridge.connect(IoBridge.java:179)\n        at java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:142)\n        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:390)\n        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:230)\n        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:212)\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\n        at java.net.Socket.connect(Socket.java:646)\n        at okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\n        at okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:254)\n        ... 8 more\n    Caused by: android.system.ErrnoException: isConnected failed: EHOSTUNREACH (No route to host)\n        at libcore.io.IoBridge.isConnected(IoBridge.java:334)\n        ... 18 more\n    Suppressed: javax.net.ssl.SSLHandshakeException: Chain validation failed\n        at com.android.org.conscrypt.SSLUtils.toSSLHandshakeException(SSLUtils.java:356)\n        at com.android.org.conscrypt.ConscryptEngine.convertException(ConscryptEngine.java:1134)\n        \n        at okhttp3.internal.connection.RealCall.execute(RealCall.kt:158)\n        at com.myappapp.myapp.MediaDownloaderKt.downloadFile(MediaDownloader.kt:49)\n        at com.myappapp.myapp.myappFirebaseMessagingService.onMessageReceived$lambda$0(FirebaseMessagingService.kt:112)\n        at com.myappapp.myapp.myappFirebaseMessagingService.$r8$lambda$Jl38Qg36Z_B--LnezsL88ZwrYUo(Unknown Source:0)\n        at com.myappapp.myapp.myappFirebaseMessagingService$$ExternalSyntheticLambda0.run(Unknown Source:4)\n        ... 3 more\n    Caused by: java.security.cert.CertificateException: Chain validation failed\n        at com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:719)\n    \n        at com.android.org.conscrypt.ConscryptEngine.readPlaintextDataDirect(ConscryptEngine.java:1095)\n        at com.android.org.conscrypt.ConscryptEngine.readPlaintextData(ConscryptEngine.java:1079)\n        ... 28 more\n    Caused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\n        at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:135)\n        at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:222)\n        at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:140)\n        at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:79)\n        at java.security.cert.CertPathValidator.validate(CertPathValidator.java:309)\n        at com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:715)\n        ... 45 more\n    Caused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\n        at sun.security.provider.certpath.OCSPResponse.verify(OCSPResponse.java:619)\n        at sun.security.provider.certpath.RevocationChecker.checkOCSP(RevocationChecker.java:709)\n        at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:363)\n        at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:337)\n        at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:125)\n        ... 50 more\n    Suppressed: java.net.ConnectException: Failed to connect to d3d5vfmrt0s3c6.cloudfront.net/[2600:9000:20b4:6600:3:24f0:f980:21]:443\n        ... 9 more\n    Caused by: java.net.ConnectException: failed to connect to d3d5vfmrt0s3c6.cloudfront.net/2600:9000:20b4:6600:3:24f0:f980:21 (port 443) from /fec0::f6d:85d6:8b53:7299 (port 48548) after 10000ms: isConnected failed: EHOSTUNREACH (No route to host)\n        at libcore.io.IoBridge.isConnected(IoBridge.java:347)\n        at libcore.io.IoBridge.connectErrno(IoBridge.java:237)\n        at libcore.io.IoBridge.connect(IoBridge.java:179)\n        at java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:142)\n        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:390)\n        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:230)\n        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:212)\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\n        at java.net.Socket.connect(Socket.java:646)\n        at okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\n        at okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:254)\n        ... 8 more\n    Caused by: android.system.ErrnoException: isConnected failed: EHOSTUNREACH (No route to host)\n        at libcore.io.IoBridge.isConnected(IoBridge.java:334)\n        ... 18 more\n    Suppressed: javax.net.ssl.SSLHandshakeException: Chain validation failed\n        at com.android.org.conscrypt.SSLUtils.toSSLHandshakeException(SSLUtils.java:356)\n    \n        at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:65)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n        at okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:205)\n        at okhttp3.internal.connection.RealCall.execute(RealCall.kt:158)\n        at com.myappapp.myapp.MediaDownloaderKt.downloadFile(MediaDownloader.kt:49)\n        at com.myappapp.myapp.myappFirebaseMessagingService.onMessageReceived$lambda$0(FirebaseMessagingService.kt:112)\n        at com.myappapp.myapp.myappFirebaseMessagingService.$r8$lambda$Jl38Qg36Z_B--LnezsL88ZwrYUo(Unknown Source:0)\n        at com.myappapp.myapp.myappFirebaseMessagingService$$ExternalSyntheticLambda0.run(Unknown Source:4)\n        ... 3 more\n    Caused by: java.security.cert.CertificateException: Chain validation failed\n        at com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:719)\n        at com.android.org.conscrypt.TrustManagerImpl.checkTrustedRecursive(TrustManagerImpl.java:549)\n    \n        at android.security.net.config.NetworkSecurityTrustManager.checkServerTrusted(NetworkSecurityTrustManager.java:94)\n        at android.security.net.config.RootTrustManager.checkServerTrusted(RootTrustManager.java:90)\n        at com.android.org.conscrypt.ConscryptEngineSocket$2.checkServerTrusted(ConscryptEngineSocket.java:163)\n        at com.android.org.conscrypt.Platform.checkServerTrusted(Platform.java:260)\n        at com.android.org.conscrypt.ConscryptEngine.verifyCertificateChain(ConscryptEngine.java:1638)\n        at com.android.org.conscrypt.NativeCrypto.ENGINE_SSL_read_direct(Native Method)\n        at com.android.org.conscrypt.NativeSsl.readDirectByteBuffer(NativeSsl.java:569)\n        at com.android.org.conscrypt.ConscryptEngine.readPlaintextDataDirect(ConscryptEngine.java:1095)\n        at com.android.org.conscrypt.ConscryptEngine.readPlaintextData(ConscryptEngine.java:1079)\n        ... 28 more\n    Caused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\n        at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:135)\n        at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:222)\n        at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:140)\n        at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:79)\n        at java.security.cert.CertPathValidator.validate(CertPathValidator.java:309)\n        at com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:715)\n        ... 45 more\n    Caused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\n        at sun.security.provider.certpath.OCSPResponse.verify(OCSPResponse.java:619)\n        at sun.security.provider.certpath.RevocationChecker.checkOCSP(RevocationChecker.java:709)\n        at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:363)\n        at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:337)\n        at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:125)\n        ... 50 more\n    Suppressed: java.net.ConnectException: Failed to connect to d3d5vfmrt0s3c6.cloudfront.net/[2600:9000:20b4:7a00:3:24f0:f980:21]:443\n        ... 9 more\n    Caused by: java.net.ConnectException: failed to connect to d3d5vfmrt0s3c6.cloudfront.net/2600:9000:20b4:7a00:3:24f0:f980:21 (port 443) from /fec0::f6d:85d6:8b53:7299 (port 42166) after 10000ms: isConnected failed: EHOSTUNREACH (No route to host)\n        at libcore.io.IoBridge.isConnected(IoBridge.java:347)\n        at libcore.io.IoBridge.connectErrno(IoBridge.java:237)\n        at libcore.io.IoBridge.connect(IoBridge.java:179)\n        at java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:142)\n        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:390)\n        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:230)\n        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:212)\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\n        at java.net.Socket.connect(Socket.java:646)\n        at okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\n        at okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:254)\n        ... 8 more\n    Caused by: android.system.ErrnoException: isConnected failed: EHOSTUNREACH (No route to host)\n        at libcore.io.IoBridge.isConnected(IoBridge.java:334)\n        ... 18 more\n    Suppressed: java.net.ConnectException: Failed to connect to d3d5vfmrt0s3c6.cloudfront.net/[2600:9000:20b4:ec00:3:24f0:f980:21]:443\n        ... 9 more\n    Caused by: java.net.ConnectException: failed to connect to d3d5vfmrt0s3c6.cloudfront.net/2600:9000:20b4:ec00:3:24f0:f980:21 (port 443) from /fec0::f6d:85d6:8b53:7299 (port 50870) after 10000ms: isConnected failed: EHOSTUNREACH (No route to host)\n        at libcore.io.IoBridge.isConnected(IoBridge.java:347)\n        at libcore.io.IoBridge.connectErrno(IoBridge.java:237)\n        at libcore.io.IoBridge.connect(IoBridge.java:179)\n        at java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:142)\n        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:390)\n        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:230)\n        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:212)\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\n        at java.net.Socket.connect(Socket.java:646)\n        at okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\n        at okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:254)\n        ... 8 more\n    Caused by: android.system.ErrnoException: isConnected failed: EHOSTUNREACH (No route to host)\n        at libcore.io.IoBridge.isConnected(IoBridge.java:334)\n        ... 18 more\n    Suppressed: java.net.ConnectException: Failed to connect to d3d5vfmrt0s3c6.cloudfront.net/[2600:9000:20b4:bc00:3:24f0:f980:21]:443\n        ... 9 more\n    Caused by: java.net.ConnectException: failed to connect to d3d5vfmrt0s3c6.cloudfront.net/2600:9000:20b4:bc00:3:24f0:f980:21 (port 443) from /fec0::f6d:85d6:8b53:7299 (port 57768) after 10000ms: isConnected failed: EHOSTUNREACH (No route to host)\n        at libcore.io.IoBridge.isConnected(IoBridge.java:347)\n        at libcore.io.IoBridge.connectErrno(IoBridge.java:237)\n        at libcore.io.IoBridge.connect(IoBridge.java:179)\n        at java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:142)\n        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:390)\n        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:230)\n        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:212)\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\n        at java.net.Socket.connect(Socket.java:646)\n        at okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\n        at okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:254)\n        ... 8 more\n    Caused by: android.system.ErrnoException: isConnected failed: EHOSTUNREACH (No route to host)\n        at libcore.io.IoBridge.isConnected(IoBridge.java:334)\n        ... 18 more\n    Suppressed: java.net.ConnectException: Failed to connect to d3d5vfmrt0s3c6.cloudfront.net/[2600:9000:20b4:c000:3:24f0:f980:21]:443\n        ... 9 more\n    Caused by: java.net.ConnectException: failed to connect to d3d5vfmrt0s3c6.cloudfront.net/2600:9000:20b4:c000:3:24f0:f980:21 (port 443) from /fec0::f6d:85d6:8b53:7299 (port 51634) after 10000ms: isConnected failed: EHOSTUNREACH (No route to host)\n        at libcore.io.IoBridge.isConnected(IoBridge.java:347)\n        at libcore.io.IoBridge.connectErrno(IoBridge.java:237)\n        at libcore.io.IoBridge.connect(IoBridge.java:179)\n        at java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:142)\n        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:390)\n        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:230)\n        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:212)\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\n        at java.net.Socket.connect(Socket.java:646)\n        at okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\n        at okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:254)\n        ... 8 more\n    Caused by: android.system.ErrnoException: isConnected failed: EHOSTUNREACH (No route to host)\n        at libcore.io.IoBridge.isConnected(IoBridge.java:334)\n        ... 18 more\nCaused by: java.net.ConnectException: failed to connect to d3d5vfmrt0s3c6.cloudfront.net/2600:9000:20b4:e00:3:24f0:f980:21 (port 443) from /fec0::f6d:85d6:8b53:7299 (port 56396) after 10000ms: isConnected failed: EHOSTUNREACH (No route to host)\n    at libcore.io.IoBridge.isConnected(IoBridge.java:347)\n    at libcore.io.IoBridge.connectErrno(IoBridge.java:237)\n    at libcore.io.IoBridge.connect(IoBridge.java:179)\n    at java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:142)\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:390)\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:230)\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:212)\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\n    at java.net.Socket.connect(Socket.java:646)\n    at okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\n    at okhttp3.internal.connection.ConnectPlan.connectSocket(ConnectPlan.kt:254)\n    ... 8 more\nCaused by: android.system.ErrnoException: isConnected failed: EHOSTUNREACH (No route to host)\n    at libcore.io.IoBridge.isConnected(IoBridge.java:334)\n    ... 18 more\n</code></pre>\n"},{"tags":["java","spring","jwt","spring-webflux","spring-webclient"],"comments":[{"owner":{"account_id":1327199,"reputation":587,"user_id":1271788,"display_name":"xYan"},"score":1,"creation_date":1668426806,"post_id":71620124,"comment_id":131394424,"body_markdown":"In the AuthService you are autowiring the WebClient and in the WebClient the AuthService. How did you solve the circular dependency exception? Cheers.","body":"In the AuthService you are autowiring the WebClient and in the WebClient the AuthService. How did you solve the circular dependency exception? Cheers."},{"owner":{"account_id":12140438,"reputation":495,"user_id":8864483,"display_name":"Kamil"},"score":0,"creation_date":1668702151,"post_id":71620124,"comment_id":131475518,"body_markdown":"@xYan there is no circular dependency as in `AuthService` I autowire `WebClient` but `AuthService` is autowired within  `CustomWebClientConfig`, not `WebClient`. \n\n\nSo it&#39;s like: `WebClient` -&gt;  `AuthService` -&gt; `CustomWebClientConfig`","body":"@xYan there is no circular dependency as in <code>AuthService</code> I autowire <code>WebClient</code> but <code>AuthService</code> is autowired within  <code>CustomWebClientConfig</code>, not <code>WebClient</code>.    So it&#39;s like: <code>WebClient</code> -&gt;  <code>AuthService</code> -&gt; <code>CustomWebClientConfig</code>"},{"owner":{"account_id":1327199,"reputation":587,"user_id":1271788,"display_name":"xYan"},"score":1,"creation_date":1668702689,"post_id":71620124,"comment_id":131475722,"body_markdown":"That&#39;s what you get when you don&#39;t read everything. Yes sure there is no circullar, sorry for my neglect.","body":"That&#39;s what you get when you don&#39;t read everything. Yes sure there is no circullar, sorry for my neglect."}],"answers":[{"comments":[{"owner":{"account_id":12140438,"reputation":495,"user_id":8864483,"display_name":"Kamil"},"score":1,"creation_date":1648238817,"post_id":71622039,"comment_id":126582646,"body_markdown":"This is what I did before you replied. Anyway, I will accept your answer. Thank you :)","body":"This is what I did before you replied. Anyway, I will accept your answer. Thank you :)"},{"owner":{"account_id":979189,"reputation":725,"user_id":1866010,"accept_rate":67,"display_name":"Calabacin"},"score":0,"creation_date":1700676519,"post_id":71622039,"comment_id":136684998,"body_markdown":"I tried this, but authService.getToken() has to be synchronous in order for this to work. If your getToken method uses block() or any of its variants (e.g. blockOptional) then this will fail with an error: block() is blocking, which is not supported in thread reactor-http-epoll","body":"I tried this, but authService.getToken() has to be synchronous in order for this to work. If your getToken method uses block() or any of its variants (e.g. blockOptional) then this will fail with an error: block() is blocking, which is not supported in thread reactor-http-epoll"},{"owner":{"account_id":11253290,"reputation":1289,"user_id":9167731,"display_name":"Semyon Kirekov"},"score":0,"creation_date":1700767548,"post_id":71622039,"comment_id":136697548,"body_markdown":"@Calabacin it is also possible even if `AuthService.getToken` returns `Mono&lt;String&gt;`. I updated my answer with example","body":"@Calabacin it is also possible even if <code>AuthService.getToken</code> returns <code>Mono&lt;String&gt;</code>. I updated my answer with example"}],"tags":[],"owner":{"account_id":11253290,"reputation":1289,"user_id":9167731,"display_name":"Semyon Kirekov"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1700767505,"creation_date":1648235626,"answer_id":71622039,"question_id":71620124,"body_markdown":"You can declare a custom `WebClient` with [filter](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/reactive/function/client/ExchangeFilterFunction.html) that is applied on each request.\r\n\r\n```java\r\n@Configuration\r\npublic class CustomWebClientConfig {\r\n\r\n    private final AuthService authService;\r\n\r\n    @Autowired\r\n    public CustomWebClientConfig(AuthService authService) {\r\n        this.authService = authService;\r\n    }  \r\n  \r\n    @Bean(&quot;myCustomWebClient&quot;)\r\n    WebClient webClient() {\r\n        return WebClient.builder()\r\n                .filter(ExchangeFilterFunction.ofRequestProcessor(\r\n                    (ClientRequest request) -&gt; Mono.just(\r\n                        ClientRequest.from(request)\r\n                            .header(&quot;Access-Token&quot;, authService.getToken())\r\n                            .build()\r\n                    )\r\n                ))\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\n## EDIT\r\n\r\nIf `AuthService` also return `Mono&lt;String&gt;` as a token, then code will look a bit different.\r\n\r\n```java\r\n@Configuration\r\npublic class CustomWebClientConfig {\r\n\r\n    private final AuthService authService;\r\n\r\n    @Autowired\r\n    public CustomWebClientConfig(AuthService authService) {\r\n        this.authService = authService;\r\n    }  \r\n  \r\n    @Bean(&quot;myCustomWebClient&quot;)\r\n    WebClient webClient() {\r\n        return WebClient.builder()\r\n                .filter(ExchangeFilterFunction.ofRequestProcessor(\r\n                    (ClientRequest request) -&gt; {\r\n                        Mono&lt;String&gt; tokenMono =  authService.getToken();\r\n                        return tokenMono\r\n                                  .map(token -&gt; ClientRequest.from(request).header(&quot;Access-Token&quot;, token).build())\r\n                    }\r\n                ))\r\n                .build();\r\n    }\r\n}\r\n```","title":"How to handle token refreshing in Spring Webflux WebClient","body":"<p>You can declare a custom <code>WebClient</code> with <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/reactive/function/client/ExchangeFilterFunction.html\" rel=\"nofollow noreferrer\">filter</a> that is applied on each request.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class CustomWebClientConfig {\n\n    private final AuthService authService;\n\n    @Autowired\n    public CustomWebClientConfig(AuthService authService) {\n        this.authService = authService;\n    }  \n  \n    @Bean(&quot;myCustomWebClient&quot;)\n    WebClient webClient() {\n        return WebClient.builder()\n                .filter(ExchangeFilterFunction.ofRequestProcessor(\n                    (ClientRequest request) -&gt; Mono.just(\n                        ClientRequest.from(request)\n                            .header(&quot;Access-Token&quot;, authService.getToken())\n                            .build()\n                    )\n                ))\n                .build();\n    }\n}\n</code></pre>\n<h2>EDIT</h2>\n<p>If <code>AuthService</code> also return <code>Mono&lt;String&gt;</code> as a token, then code will look a bit different.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class CustomWebClientConfig {\n\n    private final AuthService authService;\n\n    @Autowired\n    public CustomWebClientConfig(AuthService authService) {\n        this.authService = authService;\n    }  \n  \n    @Bean(&quot;myCustomWebClient&quot;)\n    WebClient webClient() {\n        return WebClient.builder()\n                .filter(ExchangeFilterFunction.ofRequestProcessor(\n                    (ClientRequest request) -&gt; {\n                        Mono&lt;String&gt; tokenMono =  authService.getToken();\n                        return tokenMono\n                                  .map(token -&gt; ClientRequest.from(request).header(&quot;Access-Token&quot;, token).build())\n                    }\n                ))\n                .build();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":12140438,"reputation":495,"user_id":8864483,"display_name":"Kamil"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4585,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71622039,"answer_count":1,"score":1,"last_activity_date":1700767505,"creation_date":1648225231,"question_id":71620124,"body_markdown":"I want to create some authentication service to be used for `WebClient`, so it automatically refresh the token when needed:\r\n\r\n    @Service\r\n    public class AuthService {\r\n    \r\n        private String token;\r\n\r\n        private final WebClient webClient;\r\n\r\n        private final Map&lt;String, String&gt; bodyValues;\r\n    \r\n        @Autowired\r\n        public AuthService(WebClient webClient) {\r\n            this.webClient = webClient;\r\n            this.bodyValues = new HashMap&lt;&gt;();\r\n            this.bodyValues.put(&quot;user&quot;, &quot;myUser&quot;);\r\n            this.bodyValues.put(&quot;password&quot;, &quot;somePassword&quot;);\r\n        }\r\n    \r\n        public String getToken() {\r\n            if (this.token == null || this.isExpired(this.token) {\r\n                this.refreshToken();\r\n            } \r\n            return this.token;\r\n        }\r\n    \r\n    \r\n        private void refreshToken() {\r\n            this.token = webClient.post()\r\n                    .uri(&quot;authEndpointPath&quot;)\r\n                    .contentType(MediaType.APPLICATION_JSON)\r\n                    .body(BodyInserters.fromValue(bodyValues))\r\n                    .retrieve()\r\n                    .bodyToMono(String.class)\r\n                    .block();\r\n        }\r\n    \r\n        private boolean isExpired() {\r\n            //implementation\r\n        }\r\n    }\r\n\r\nIt gets the token correctly when it is expired. Is there a way to use it **ONLY ONCE**, without injecting it to other services? I was thinking about defining the `Bean` which uses `authService.getToken()` method:\r\n\r\n\r\n    @Configuration\r\n    public class CustomWebClientConfig {\r\n    \r\n        private final AuthService authService;\r\n    \r\n        @Autowired\r\n        public CustomWebClientConfig(AuthService authService) {\r\n            this.authService = authService;\r\n        }  \r\n      \r\n        @Bean(&quot;myCustomWebClient&quot;)\r\n        WebClient webClient() {\r\n            return WebClient.builder()\r\n                    .defaultHeader(&quot;Access-Token&quot;, authService.getToken())\r\n                    .build()\r\n        }\r\n    }\r\n\r\n\r\nBut obviously it will get the token only once at Application startup. Is there a way to inject it somehow or to intercept all of the webclient request and add the token then?","title":"How to handle token refreshing in Spring Webflux WebClient","body":"<p>I want to create some authentication service to be used for <code>WebClient</code>, so it automatically refresh the token when needed:</p>\n<pre><code>@Service\npublic class AuthService {\n\n    private String token;\n\n    private final WebClient webClient;\n\n    private final Map&lt;String, String&gt; bodyValues;\n\n    @Autowired\n    public AuthService(WebClient webClient) {\n        this.webClient = webClient;\n        this.bodyValues = new HashMap&lt;&gt;();\n        this.bodyValues.put(&quot;user&quot;, &quot;myUser&quot;);\n        this.bodyValues.put(&quot;password&quot;, &quot;somePassword&quot;);\n    }\n\n    public String getToken() {\n        if (this.token == null || this.isExpired(this.token) {\n            this.refreshToken();\n        } \n        return this.token;\n    }\n\n\n    private void refreshToken() {\n        this.token = webClient.post()\n                .uri(&quot;authEndpointPath&quot;)\n                .contentType(MediaType.APPLICATION_JSON)\n                .body(BodyInserters.fromValue(bodyValues))\n                .retrieve()\n                .bodyToMono(String.class)\n                .block();\n    }\n\n    private boolean isExpired() {\n        //implementation\n    }\n}\n</code></pre>\n<p>It gets the token correctly when it is expired. Is there a way to use it <strong>ONLY ONCE</strong>, without injecting it to other services? I was thinking about defining the <code>Bean</code> which uses <code>authService.getToken()</code> method:</p>\n<pre><code>@Configuration\npublic class CustomWebClientConfig {\n\n    private final AuthService authService;\n\n    @Autowired\n    public CustomWebClientConfig(AuthService authService) {\n        this.authService = authService;\n    }  \n  \n    @Bean(&quot;myCustomWebClient&quot;)\n    WebClient webClient() {\n        return WebClient.builder()\n                .defaultHeader(&quot;Access-Token&quot;, authService.getToken())\n                .build()\n    }\n}\n</code></pre>\n<p>But obviously it will get the token only once at Application startup. Is there a way to inject it somehow or to intercept all of the webclient request and add the token then?</p>\n"},{"tags":["java","maven","post","dao"],"comments":[{"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"score":0,"creation_date":1700710038,"post_id":77533811,"comment_id":136688710,"body_markdown":"Where is your code to convert the JSON into the Java class `Cliente` and the `Cliente` class code which you are using in the `create` method? What is the definition of the date field in the database?","body":"Where is your code to convert the JSON into the Java class <code>Cliente</code> and the <code>Cliente</code> class code which you are using in the <code>create</code> method? What is the definition of the date field in the database?"}],"owner":{"account_id":29747253,"reputation":1,"user_id":22797985,"display_name":"Matheus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700767359,"creation_date":1700700352,"question_id":77533811,"body_markdown":"I&#39;m not able to get a successful post with the JSON above because of the date. \r\n\r\n    {\r\n      &quot;NM_CLIENTE&quot;: &quot;John Doe&quot;,\r\n      &quot;ML_CLIENTE&quot;: &quot;john.doe@example.com&quot;,\r\n      &quot;NR_CPF&quot;: &quot;123.456.789-01&quot;,\r\n      &quot;DT_NASCIMENTO&quot;: &quot;10-10-1990&quot;,\r\n      &quot;GN_CLIENTE&quot;: &quot;M&quot;,\r\n      &quot;NR_CELULAR&quot;: &quot;987654321&quot;,\r\n      &quot;NR_CEP&quot;: &quot;54321-678&quot;,\r\n      &quot;ST_ALERGIA&quot;: &quot;N&quot;,\r\n      &quot;DS_ALERGIA&quot;: null,\r\n      &quot;ST_MEDICAMENTOS&quot;: &quot;N&quot;,\r\n      &quot;DS_MEDICAMENTOS&quot;: null\r\n    }\r\n\r\nMeanwhile, when I try to insert by SQL, it&#39;s ok. Like this:\r\n\r\n    INSERT INTO t_cliente \r\n        (nm_cliente, ml_cliente, nr_cpf, dt_nascimento, gn_cliente, nr_celular, nr_cep, st_alergia, ds_alergia, st_medicamentos, ds_medicamentos)\r\n    VALUES (&#39;Jo&#227;o Silva&#39;, &#39;joao@email.com&#39;, &#39;111.111.111-11&#39;, TO_DATE(&#39;01-01-1990&#39;, &#39;DD-MM-YYYY&#39;), &#39;M&#39;, &#39;999999999&#39;, &#39;12345-678&#39;, &#39;N&#39;, NULL, &#39;N&#39;, NULL);\r\n\r\n\r\nHere&#39;s my DAO Class. \r\n\r\n    public void create(Cliente cliente) throws SQLException, ClassNotFoundException {\r\n        classForName();\r\n        try (Connection con = DriverManager.getConnection(URL, USER, PASS)) {\r\n            String sql = &quot;INSERT INTO T_CLIENTE (NM_CLIENTE, ML_CLIENTE, NR_CPF, DT_NASCIMENTO, GN_CLIENTE, NR_CELULAR, NR_CEP, ST_ALERGIA, DS_ALERGIA, ST_MEDICAMENTOS, DS_MEDICAMENTOS) VALUES (?, ?, ?, TO_DATE(?, &#39;DD-MM-YYYY&#39;), ?, ?, ?, ?, ?, ?, ?)&quot;;\r\n            try (PreparedStatement instrucao = con.prepareStatement(sql)) {\r\n                instrucao.setString(1, cliente.getNomeCliente());\r\n                instrucao.setString(2, cliente.getEmailCliente());\r\n                instrucao.setString(3, cliente.getCpf());\r\n                instrucao.setString(4, cliente.getDataNascimento().toString());\r\n                instrucao.setString(5, String.valueOf(cliente.getGeneroCliente()));\r\n                instrucao.setString(6, cliente.getNumeroCelular());\r\n                instrucao.setString(7, cliente.getCep());\r\n                instrucao.setString(8, String.valueOf(cliente.getPossuiAlergia()));\r\n                instrucao.setString(9, cliente.getDescricaoAlergia());\r\n                instrucao.setString(10, String.valueOf(cliente.getUtilizaMedicamentos()));\r\n                instrucao.setString(11, cliente.getDescricaoMedicamentos());\r\n                instrucao.executeUpdate();\r\n          \r\n            }\r\n        } \r\n    } \r\n\r\n","title":"How to send DATE in Rest API in Post Method/Maven Project?","body":"<p>I'm not able to get a successful post with the JSON above because of the date.</p>\n<pre><code>{\n  &quot;NM_CLIENTE&quot;: &quot;John Doe&quot;,\n  &quot;ML_CLIENTE&quot;: &quot;john.doe@example.com&quot;,\n  &quot;NR_CPF&quot;: &quot;123.456.789-01&quot;,\n  &quot;DT_NASCIMENTO&quot;: &quot;10-10-1990&quot;,\n  &quot;GN_CLIENTE&quot;: &quot;M&quot;,\n  &quot;NR_CELULAR&quot;: &quot;987654321&quot;,\n  &quot;NR_CEP&quot;: &quot;54321-678&quot;,\n  &quot;ST_ALERGIA&quot;: &quot;N&quot;,\n  &quot;DS_ALERGIA&quot;: null,\n  &quot;ST_MEDICAMENTOS&quot;: &quot;N&quot;,\n  &quot;DS_MEDICAMENTOS&quot;: null\n}\n</code></pre>\n<p>Meanwhile, when I try to insert by SQL, it's ok. Like this:</p>\n<pre><code>INSERT INTO t_cliente \n    (nm_cliente, ml_cliente, nr_cpf, dt_nascimento, gn_cliente, nr_celular, nr_cep, st_alergia, ds_alergia, st_medicamentos, ds_medicamentos)\nVALUES ('João Silva', 'joao@email.com', '111.111.111-11', TO_DATE('01-01-1990', 'DD-MM-YYYY'), 'M', '999999999', '12345-678', 'N', NULL, 'N', NULL);\n</code></pre>\n<p>Here's my DAO Class.</p>\n<pre><code>public void create(Cliente cliente) throws SQLException, ClassNotFoundException {\n    classForName();\n    try (Connection con = DriverManager.getConnection(URL, USER, PASS)) {\n        String sql = &quot;INSERT INTO T_CLIENTE (NM_CLIENTE, ML_CLIENTE, NR_CPF, DT_NASCIMENTO, GN_CLIENTE, NR_CELULAR, NR_CEP, ST_ALERGIA, DS_ALERGIA, ST_MEDICAMENTOS, DS_MEDICAMENTOS) VALUES (?, ?, ?, TO_DATE(?, 'DD-MM-YYYY'), ?, ?, ?, ?, ?, ?, ?)&quot;;\n        try (PreparedStatement instrucao = con.prepareStatement(sql)) {\n            instrucao.setString(1, cliente.getNomeCliente());\n            instrucao.setString(2, cliente.getEmailCliente());\n            instrucao.setString(3, cliente.getCpf());\n            instrucao.setString(4, cliente.getDataNascimento().toString());\n            instrucao.setString(5, String.valueOf(cliente.getGeneroCliente()));\n            instrucao.setString(6, cliente.getNumeroCelular());\n            instrucao.setString(7, cliente.getCep());\n            instrucao.setString(8, String.valueOf(cliente.getPossuiAlergia()));\n            instrucao.setString(9, cliente.getDescricaoAlergia());\n            instrucao.setString(10, String.valueOf(cliente.getUtilizaMedicamentos()));\n            instrucao.setString(11, cliente.getDescricaoMedicamentos());\n            instrucao.executeUpdate();\n      \n        }\n    } \n} \n</code></pre>\n"},{"tags":["java","spring-boot","model-view-controller"],"owner":{"account_id":29977716,"reputation":1,"user_id":22973521,"display_name":"Lucas Dutra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700766921,"creation_date":1700765902,"question_id":77539144,"body_markdown":"Is there any improved way to JPA these, and how these MVC architecture would fit in API rest? I&#39;d like to understand the difference about it, like how could I turn it into an API rest?\r\n\r\n\r\nController\r\n```\r\n@Controller\r\n@RequestMapping(&quot;/autor&quot;)\r\npublic class AutorController {\r\n    @Autowired\r\n    private AutorRepository autorRepository;\r\n    @GetMapping\r\n    public ModelAndView all(){\r\n\r\n       ModelAndView view = new ModelAndView(&quot;lista-autor&quot;);\r\n       view.addObject(&quot;autores&quot;,autorRepository.findAll());\r\n       return view;\r\n\r\n    }\r\n\r\n\r\n    @GetMapping(&quot;/novo&quot;)\r\n    public ModelAndView newAutor(){\r\n        ModelAndView view = new ModelAndView(&quot;form-autor&quot;);\r\n        view.addObject(&quot;autor&quot;, new Autor());\r\n        return view;\r\n    }\r\n\r\n    @PostMapping\r\n    public String  create(Autor novoAutor){\r\n        autorRepository.save(novoAutor);\r\n        return &quot;redirect:/autor&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/delete/{id}&quot;)\r\n    public String delete(@PathVariable(&quot;id&quot;) Long id){\r\n        autorRepository.deleteById(id);\r\n        return &quot;redirect:/autor&quot;;\r\n    }\r\n}\r\n```\r\n\r\nModel\r\n```\r\n@Entity\r\n@Table(name = &quot;ES_AUTOR&quot;)\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Data\r\npublic class Autor {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    private String nome;\r\n    private Integer anoNascimento;\r\n\r\n\r\n}\r\n```\r\nrepository\r\n```\r\n@Repository\r\npublic interface AutorRepository extends JpaRepository&lt;Autor, Long&gt; {\r\n}\r\n```\r\n\r\n\r\n\r\nunderstand the difference between MVC and API rest.","title":"Spring performance","body":"<p>Is there any improved way to JPA these, and how these MVC architecture would fit in API rest? I'd like to understand the difference about it, like how could I turn it into an API rest?</p>\n<p>Controller</p>\n<pre><code>@Controller\n@RequestMapping(&quot;/autor&quot;)\npublic class AutorController {\n    @Autowired\n    private AutorRepository autorRepository;\n    @GetMapping\n    public ModelAndView all(){\n\n       ModelAndView view = new ModelAndView(&quot;lista-autor&quot;);\n       view.addObject(&quot;autores&quot;,autorRepository.findAll());\n       return view;\n\n    }\n\n\n    @GetMapping(&quot;/novo&quot;)\n    public ModelAndView newAutor(){\n        ModelAndView view = new ModelAndView(&quot;form-autor&quot;);\n        view.addObject(&quot;autor&quot;, new Autor());\n        return view;\n    }\n\n    @PostMapping\n    public String  create(Autor novoAutor){\n        autorRepository.save(novoAutor);\n        return &quot;redirect:/autor&quot;;\n    }\n\n    @GetMapping(&quot;/delete/{id}&quot;)\n    public String delete(@PathVariable(&quot;id&quot;) Long id){\n        autorRepository.deleteById(id);\n        return &quot;redirect:/autor&quot;;\n    }\n}\n</code></pre>\n<p>Model</p>\n<pre><code>@Entity\n@Table(name = &quot;ES_AUTOR&quot;)\n@AllArgsConstructor\n@NoArgsConstructor\n@Data\npublic class Autor {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String nome;\n    private Integer anoNascimento;\n\n\n}\n</code></pre>\n<p>repository</p>\n<pre><code>@Repository\npublic interface AutorRepository extends JpaRepository&lt;Autor, Long&gt; {\n}\n</code></pre>\n<p>understand the difference between MVC and API rest.</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"answers":[{"comments":[{"owner":{"account_id":16791411,"reputation":45,"user_id":12138973,"display_name":"Andrew"},"score":0,"creation_date":1700767705,"post_id":77538535,"comment_id":136697570,"body_markdown":"Thanks for such a detailed answer! I forgot to mention that i don&#39;t have a role role model at all, i only need to be able to know current user id in those services.\nMy auth service is connected directly to keycloak, it is stateful and sets an jsession cookie at the code evaluation endpoint (default behavior?). Then i wanted to use that same cookie to access all my other services. My &quot;gateway&quot; is currently an nginx proxy. But i don&#39;t quite understand why my other services supposed to be stateless? Does it have some security implications and i should not share sessions to other services?","body":"Thanks for such a detailed answer! I forgot to mention that i don&#39;t have a role role model at all, i only need to be able to know current user id in those services. My auth service is connected directly to keycloak, it is stateful and sets an jsession cookie at the code evaluation endpoint (default behavior?). Then i wanted to use that same cookie to access all my other services. My &quot;gateway&quot; is currently an nginx proxy. But i don&#39;t quite understand why my other services supposed to be stateless? Does it have some security implications and i should not share sessions to other services?"},{"owner":{"account_id":16791411,"reputation":45,"user_id":12138973,"display_name":"Andrew"},"score":0,"creation_date":1700768063,"post_id":77538535,"comment_id":136697603,"body_markdown":"Spring oauth2 security&#39;s default session seems to store jwt token, i can definitely switch my nginx instance to a spring gateway, share session to it from an auth service and then swap cookie to a jwt token during routing, however to me it seems like an additional overhead in something that supposed to just wire my apps together? I don&#39;t store any sensitive data inside my session nor cookie, to me it seems secure enough? My frontend app is not decided yet, but it&#39;s probably gonna be React, and i would much prefer to send cookie rather than store jwt token on client","body":"Spring oauth2 security&#39;s default session seems to store jwt token, i can definitely switch my nginx instance to a spring gateway, share session to it from an auth service and then swap cookie to a jwt token during routing, however to me it seems like an additional overhead in something that supposed to just wire my apps together? I don&#39;t store any sensitive data inside my session nor cookie, to me it seems secure enough? My frontend app is not decided yet, but it&#39;s probably gonna be React, and i would much prefer to send cookie rather than store jwt token on client"},{"owner":{"account_id":16791411,"reputation":45,"user_id":12138973,"display_name":"Andrew"},"score":0,"creation_date":1700769382,"post_id":77538535,"comment_id":136697758,"body_markdown":"Also the terms are a bit confusing (for me), my auth service is an spring security app, not a keycloak. I think you call it a resource server. But i don&#39;t quite get why resource server should be stateless, because every call to it would require it to go to keycloak. And in that case at least for me sharing sessions from that resource server to other clients (microservices) seems like a decent decision perfomance and security wise. If my clients would cache these tokens anyway (to not take these laps everytime) it sounds like a waste since they would duplicate that data anyway","body":"Also the terms are a bit confusing (for me), my auth service is an spring security app, not a keycloak. I think you call it a resource server. But i don&#39;t quite get why resource server should be stateless, because every call to it would require it to go to keycloak. And in that case at least for me sharing sessions from that resource server to other clients (microservices) seems like a decent decision perfomance and security wise. If my clients would cache these tokens anyway (to not take these laps everytime) it sounds like a waste since they would duplicate that data anyway"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1700770133,"post_id":77538535,"comment_id":136697824,"body_markdown":"Read the [OAuth2 essentials](https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#oauth_essentials) intro to my tutorials for the wording (already linked in the answer). A resource server is an application which expect a `Bearer` access-token in `Authorization` header (most frequently a JWT, which saves the call to the authorization server). Resource servers are generally stateless because it make it 1st class citizen in a world where fault tolerance and upscaling matters (you don&#39;t care to which instance a request is routed).","body":"Read the <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#oauth_essentials\" rel=\"nofollow noreferrer\">OAuth2 essentials</a> intro to my tutorials for the wording (already linked in the answer). A resource server is an application which expect a <code>Bearer</code> access-token in <code>Authorization</code> header (most frequently a JWT, which saves the call to the authorization server). Resource servers are generally stateless because it make it 1st class citizen in a world where fault tolerance and upscaling matters (you don&#39;t care to which instance a request is routed)."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1700770421,"post_id":77538535,"comment_id":136697867,"body_markdown":"Because of the token it expect in the request, resource servers are queried by OAuth2 clients. React apps are unsafe OAuth2 clients (&quot;public&quot;). You are right to intend authorizing the requests from react with sessions. See the BFF tutorial I linked to use spring-cloud-gateway instead of your NGINX gateway.","body":"Because of the token it expect in the request, resource servers are queried by OAuth2 clients. React apps are unsafe OAuth2 clients (&quot;public&quot;). You are right to intend authorizing the requests from react with sessions. See the BFF tutorial I linked to use spring-cloud-gateway instead of your NGINX gateway."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1700770621,"post_id":77538535,"comment_id":136697890,"body_markdown":"Last, your access control rules being role based or not doesn&#39;t change a thing: this rules should be tested and it should be implemented with the rest of the business rules (in resource servers, a.k.a. REST API micro-services).","body":"Last, your access control rules being role based or not doesn&#39;t change a thing: this rules should be tested and it should be implemented with the rest of the business rules (in resource servers, a.k.a. REST API micro-services)."},{"owner":{"account_id":16791411,"reputation":45,"user_id":12138973,"display_name":"Andrew"},"score":0,"creation_date":1700816714,"post_id":77538535,"comment_id":136702009,"body_markdown":"Thanks again, i replicated that bff example and it seems to suit my case. One thing that boggles my mind is that every service that needs current user information needs to be oauth resource service, and my &quot;auth&quot; service that i used before (oauth2Login and sets cookies) is now merged in my gateway app, is that a common thing? Seems like too much responsibility for something that just proxies my routes","body":"Thanks again, i replicated that bff example and it seems to suit my case. One thing that boggles my mind is that every service that needs current user information needs to be oauth resource service, and my &quot;auth&quot; service that i used before (oauth2Login and sets cookies) is now merged in my gateway app, is that a common thing? Seems like too much responsibility for something that just proxies my routes"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1700843027,"post_id":77538535,"comment_id":136706307,"body_markdown":"In addition to routing requests, the BFF stores tokens in users sessions and replaces session cookies with a token in authorization header. Handling some headers is a very common task for a gateway and isn&#39;t &quot;too much&quot;. There is no need for resource servers to call  the BFF to get user data: it is carried by JWTs already.","body":"In addition to routing requests, the BFF stores tokens in users sessions and replaces session cookies with a token in authorization header. Handling some headers is a very common task for a gateway and isn&#39;t &quot;too much&quot;. There is no need for resource servers to call  the BFF to get user data: it is carried by JWTs already."}],"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700766914,"creation_date":1700758200,"answer_id":77538535,"question_id":77534808,"body_markdown":"Option 3 is almost the way I&#39;d go: you should keep resources access control on the resources servers which is responsible for keeping it. This resource servers know about the resource internal and business rules. Also, it&#39;s pretty easy to [test access control rules][1] on resource servers.\r\n\r\nAs you pointed out in your edit, if access tokens are JWTs, then resource servers do not need a round trip to the authorization server for each request. A request from resource server to authorization server is required only to fetch tokens public signing key (at startup and each time it is rotated). Tokens are then validated locally by the resource server, with this key.\r\n\r\nOAuth2 is thought to work as follow:\r\n- OAuth2 authorisation server have state (user authentication status)\r\n- OAuth2 clients have state (store tokens)\r\n- OAuth2 resource server can (should?) be stateless (receive token with each request)\r\n\r\nThe sessions on authorization server and client(s) are different things and the authorization server should not share its sessions with other actors (but you could use spring-session to share session between clients).\r\n\r\n[Latest recommendations][2] are to use only &quot;private&quot; OAuth2 clients, which means **clients running on server you trust** (no, the OAuth2 client should not be a single page or mobile application).\r\n\r\nFor single page (Angular, React, Vue, ...) and mobile applications, Spring Security team encourages the use of the BFF pattern. I wrote a [tutorial for that][3] using `spring-cloud-gateway` with the `TokenRelay=` filter.\r\n\r\nIf you are using a server-side rendering engine (Thymeleaf, JSF, ...), then the MVC application can be configured as confidential client and directly send requests (authorized with access tokens) to resource servers. I wrote [another tutorial for that][4]. In this tutorial, the resource server and client are merged in a single application but, as the [security requirements are very different][5], each has its own `SecurityFilterChain` bean.\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/tree/master#unit-tests\r\n  [2]: https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390\r\n  [3]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff\r\n  [4]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_ui\r\n  [5]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#oauth_essentials","title":"Handling Spring Security Oauth2 on a multiple services","body":"<p>Option 3 is almost the way I'd go: you should keep resources access control on the resources servers which is responsible for keeping it. This resource servers know about the resource internal and business rules. Also, it's pretty easy to <a href=\"https://github.com/ch4mpy/spring-addons/tree/master#unit-tests\" rel=\"nofollow noreferrer\">test access control rules</a> on resource servers.</p>\n<p>As you pointed out in your edit, if access tokens are JWTs, then resource servers do not need a round trip to the authorization server for each request. A request from resource server to authorization server is required only to fetch tokens public signing key (at startup and each time it is rotated). Tokens are then validated locally by the resource server, with this key.</p>\n<p>OAuth2 is thought to work as follow:</p>\n<ul>\n<li>OAuth2 authorisation server have state (user authentication status)</li>\n<li>OAuth2 clients have state (store tokens)</li>\n<li>OAuth2 resource server can (should?) be stateless (receive token with each request)</li>\n</ul>\n<p>The sessions on authorization server and client(s) are different things and the authorization server should not share its sessions with other actors (but you could use spring-session to share session between clients).</p>\n<p><a href=\"https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390\" rel=\"nofollow noreferrer\">Latest recommendations</a> are to use only &quot;private&quot; OAuth2 clients, which means <strong>clients running on server you trust</strong> (no, the OAuth2 client should not be a single page or mobile application).</p>\n<p>For single page (Angular, React, Vue, ...) and mobile applications, Spring Security team encourages the use of the BFF pattern. I wrote a <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff\" rel=\"nofollow noreferrer\">tutorial for that</a> using <code>spring-cloud-gateway</code> with the <code>TokenRelay=</code> filter.</p>\n<p>If you are using a server-side rendering engine (Thymeleaf, JSF, ...), then the MVC application can be configured as confidential client and directly send requests (authorized with access tokens) to resource servers. I wrote <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_ui\" rel=\"nofollow noreferrer\">another tutorial for that</a>. In this tutorial, the resource server and client are merged in a single application but, as the <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#oauth_essentials\" rel=\"nofollow noreferrer\">security requirements are very different</a>, each has its own <code>SecurityFilterChain</code> bean.</p>\n"}],"owner":{"account_id":16791411,"reputation":45,"user_id":12138973,"display_name":"Andrew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1701009974,"accepted_answer_id":77538535,"answer_count":1,"score":0,"last_activity_date":1700766914,"creation_date":1700722003,"question_id":77534808,"body_markdown":"I have an auth service that uses oauth2 along with keycloak. Then i have 2 different services that both need to know which user is accessing them (directly). Right now i have these options:\r\n\r\n1) Auth service sets a jsession cookie by default. So it is stateful. I haven&#39;t found a way to make it fully stateless as it needs to save the code from oauth2. I will extract jwt token from it and set it as another cookie. Then i will set my other 2 services as stateless and call them using Bearer token. That works. I found this to be slower, as on every call my services will verify the token with keycloak. I also won&#39;t be able to make calls to auth service using Bearer token as it expects cookie-based session.\r\n\r\n2) I share my session via redis for every service that i need to. That way i can access all of my services (on same domain) without any need for setting my headers. I can also make internal calls to other services using that same cookie sent from client. And i found it to be much faster. However im not aware of consequences that may lead to.\r\n3) Make other services stateless, dont use security in them, route all my requests through gateway, gateway will convert my session cookie into jwt internally, services will simply decode jwt&#39;s as they are always signed by keycloak already since its routed through gateway.\r\n\r\nI was wondering what is a common scenario for you guys? Is it a common practice to share sessions? And what scenario is preferable?","title":"Handling Spring Security Oauth2 on a multiple services","body":"<p>I have an auth service that uses oauth2 along with keycloak. Then i have 2 different services that both need to know which user is accessing them (directly). Right now i have these options:</p>\n<ol>\n<li><p>Auth service sets a jsession cookie by default. So it is stateful. I haven't found a way to make it fully stateless as it needs to save the code from oauth2. I will extract jwt token from it and set it as another cookie. Then i will set my other 2 services as stateless and call them using Bearer token. That works. I found this to be slower, as on every call my services will verify the token with keycloak. I also won't be able to make calls to auth service using Bearer token as it expects cookie-based session.</p>\n</li>\n<li><p>I share my session via redis for every service that i need to. That way i can access all of my services (on same domain) without any need for setting my headers. I can also make internal calls to other services using that same cookie sent from client. And i found it to be much faster. However im not aware of consequences that may lead to.</p>\n</li>\n<li><p>Make other services stateless, dont use security in them, route all my requests through gateway, gateway will convert my session cookie into jwt internally, services will simply decode jwt's as they are always signed by keycloak already since its routed through gateway.</p>\n</li>\n</ol>\n<p>I was wondering what is a common scenario for you guys? Is it a common practice to share sessions? And what scenario is preferable?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":7,"creation_date":1700757774,"post_id":77538455,"comment_id":136696150,"body_markdown":"Note the `E24` in the first number, this means the real decimal point is 24 places right of the dot you can see (the number is * 10&#178;⁴). Even if you succeed in rounding that thing to two decimal places, it will have no visible effect on the number displayed.","body":"Note the <code>E24</code> in the first number, this means the real decimal point is 24 places right of the dot you can see (the number is * 10&#178;⁴). Even if you succeed in rounding that thing to two decimal places, it will have no visible effect on the number displayed."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1700757923,"post_id":77538455,"comment_id":136696174,"body_markdown":"@teapot418 Depends on the method used. For example `System.out.printf(&quot;%.3g&quot;, num);` will print 9.79e+24","body":"@teapot418 Depends on the method used. For example <code>System.out.printf(&quot;%.3g&quot;, num);</code> will print 9.79e+24"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1700757969,"post_id":77538455,"comment_id":136696178,"body_markdown":"OP, why do you expect 9.80? If anything, rounding would result in 9.79e24, not 9.80, nor 9.80e24.","body":"OP, why do you expect 9.80? If anything, rounding would result in 9.79e24, not 9.80, nor 9.80e24."},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":1,"creation_date":1700758014,"post_id":77538455,"comment_id":136696183,"body_markdown":"@MarkRotteveel that won&#39;t change 1234.567 to 1234.57 which is OP&#39;s second example. It&#39;s not entirely clear what they want.","body":"@MarkRotteveel that won&#39;t change 1234.567 to 1234.57 which is OP&#39;s second example. It&#39;s not entirely clear what they want."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1700758138,"post_id":77538455,"comment_id":136696216,"body_markdown":"*I&#39;ve been trying trying to round this number to two decimal places, but I&#39;ve had no luck:* What&#39;s your particular reason for decreasing the accuracy of the number?","body":"<i>I&#39;ve been trying trying to round this number to two decimal places, but I&#39;ve had no luck:</i> What&#39;s your particular reason for decreasing the accuracy of the number?"},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1700758244,"post_id":77538455,"comment_id":136696231,"body_markdown":"Rounding to two decimal places is what you have. On the other hand rounding to two significant digits would turn the first number into 9.8e24, the second number to 1200. Which one do you want?","body":"Rounding to two decimal places is what you have. On the other hand rounding to two significant digits would turn the first number into 9.8e24, the second number to 1200. Which one do you want?"},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1700758398,"post_id":77538455,"comment_id":136696254,"body_markdown":"@teapot418 Then why the result is 9.223372036854776E16?","body":"@teapot418 Then why the result is 9.223372036854776E16?"},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":1,"creation_date":1700758618,"post_id":77538455,"comment_id":136696304,"body_markdown":"Ok, that&#39;s a good question: [Math.round](https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#round-double-) returns the closest `long` to the argument. You have exceeded the range of `long`, so this method is broken.","body":"Ok, that&#39;s a good question: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#round-double-\" rel=\"nofollow noreferrer\">Math.round</a> returns the closest <code>long</code> to the argument. You have exceeded the range of <code>long</code>, so this method is broken."},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1700758682,"post_id":77538455,"comment_id":136696322,"body_markdown":"@teapot418 Makes total sense, totally forgot about the overflow, thanks","body":"@teapot418 Makes total sense, totally forgot about the overflow, thanks"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1700758695,"post_id":77538455,"comment_id":136696326,"body_markdown":"So, what do you want? `9.79E24` or what?  Please edit the question.","body":"So, what do you want? <code>9.79E24</code> or what?  Please edit the question."},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":2,"creation_date":1700758728,"post_id":77538455,"comment_id":136696334,"body_markdown":"I think OP is not clear about what E24 means in this context.","body":"I think OP is not clear about what E24 means in this context."},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1700758737,"post_id":77538455,"comment_id":136696337,"body_markdown":"You can simulate round using `Math.floor(number+0.5)` or something.","body":"You can simulate round using <code>Math.floor(number+0.5)</code> or something."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1700758996,"post_id":77538455,"comment_id":136696377,"body_markdown":"Usually, the only time it makes sense to decrease the precision of a floating point value is at presentation time, when you&#39;d do something like `String presentationValue = String.format(&quot;%.2f&quot;, num);`. If you want a different method of rounding, including types such as up, down, ceiling, floor, half_up, half_down, half_even, unnecessary then use `BigDecimal`","body":"Usually, the only time it makes sense to decrease the precision of a floating point value is at presentation time, when you&#39;d do something like <code>String presentationValue = String.format(&quot;%.2f&quot;, num);</code>. If you want a different method of rounding, including types such as up, down, ceiling, floor, half_up, half_down, half_even, unnecessary then use <code>BigDecimal</code>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1700759201,"post_id":77538455,"comment_id":136696413,"body_markdown":"@teapot418 Adding 0.5 won&#39;t make a difference for a number this large.","body":"@teapot418 Adding 0.5 won&#39;t make a difference for a number this large."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1700780994,"post_id":77538455,"comment_id":136698869,"body_markdown":"_&quot;... I&#39;ve been trying trying to round this number to two decimal places ...&quot;_, the value is _9,792,117,207,541,878,000,000,000_.","body":"<i>&quot;... I&#39;ve been trying trying to round this number to two decimal places ...&quot;</i>, the value is <i>9,792,117,207,541,878,000,000,000</i>."}],"answers":[{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":5,"creation_date":1700758451,"post_id":77538529,"comment_id":136696266,"body_markdown":"You just repeat the code shown in the question, and say why it doesn&#39;t work, but you don&#39;t actually answer the question.","body":"You just repeat the code shown in the question, and say why it doesn&#39;t work, but you don&#39;t actually answer the question."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1700767017,"post_id":77538529,"comment_id":136697480,"body_markdown":"@MarkRotteveel There *is* no answer to the question. It can’t be done.","body":"@MarkRotteveel There <i>is</i> no answer to the question. It can’t be done."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1700812030,"post_id":77538529,"comment_id":136701262,"body_markdown":"@user207421 It can be done with a lot of work, but there is no simple solution.","body":"@user207421 It can be done with a lot of work, but there is no simple solution."}],"tags":[],"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"comment_count":3,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1700758161,"creation_date":1700758161,"answer_id":77538529,"question_id":77538455,"body_markdown":"The  number **9.792117207541878E24** is basically &lt;math&gt;9.792117207541878 * 10&lt;sup&gt;E24&lt;/sup&gt; &lt;/math&gt;\r\n\r\n```java\r\ndouble num = 9.792117207541878E24;\r\ndouble roundedNum = Math.round(num*100)/100.0;\r\n```\r\n\r\nRound() rounds the fraction part but it doesn&#39;t have any when you will evaluate 9.792117207541878 * 10&lt;sup&gt;E24&lt;/sup&gt; \r\n\r\n&gt; The round() method rounds the specified value to the closest int or\r\n&gt; long value and returns it. That is, 3.87 is rounded to 4 and 3.24 is\r\n&gt; rounded to 3.\r\n\r\nYou can read more here: https://www.programiz.com/java-programming/library/math/round\r\n ","title":"round double with e in it","body":"<p>The  number <strong>9.792117207541878E24</strong> is basically 9.792117207541878 * 10<sup>E24</sup> </p>\n<pre class=\"lang-java prettyprint-override\"><code>double num = 9.792117207541878E24;\ndouble roundedNum = Math.round(num*100)/100.0;\n</code></pre>\n<p>Round() rounds the fraction part but it doesn't have any when you will evaluate 9.792117207541878 * 10<sup>E24</sup></p>\n<blockquote>\n<p>The round() method rounds the specified value to the closest int or\nlong value and returns it. That is, 3.87 is rounded to 4 and 3.24 is\nrounded to 3.</p>\n</blockquote>\n<p>You can read more here: <a href=\"https://www.programiz.com/java-programming/library/math/round\" rel=\"nofollow noreferrer\">https://www.programiz.com/java-programming/library/math/round</a></p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1700763626,"creation_date":1700763626,"answer_id":77538998,"question_id":77538455,"body_markdown":"&gt; For some reason, I can round this using the same method:\r\n\r\nNo, you can&#39;t. That&#39;s not how doubles work. You need to understand what doubles _are_ to do this stuff.\r\n\r\n## What doubles _are_.\r\n\r\nTake out a small piece of paper. Then take a pen.\r\n\r\nNow write me down, __exactly__, the value in decimal notation of how many kilos of peas you take, when I tell you to open a 1 kg bag of peas, and take precisely one third of it out.\r\n\r\nYou&#39;ll find that this task is, in fact, mathematically, __utterly impossible__. You&#39;ll write down 0.333333, and then you run out of space.\r\n\r\nHowever, if I do the same thing but I ask you to take one fifth of the peas, you&#39;ll be able to do it no problem: `0.2` goes on your piece of paper and voila.\r\n\r\nThis is kinda obvious, mathematically: There&#39;s a finite amount of numbers you can express within the confines of a small piece of paper, but there are an infinite amount of numbers between 0 and 1, let alone between - and + infinity, which is what `double` __oversimplified__ says it can represent.\r\n\r\n__This introduces the idea of blessed numbers__: _Some_ numbers can be expressed perfectly on your piece of paper (such as one fifth), but some numbers cannot.\r\n\r\n## What are you talking about? I _want_ to round!\r\n\r\nAh, but, you&#39;re rounding in base 10 - decimal. Computers store stuff in base 2 - binary.\r\n\r\nThe reason &#39;one third&#39; isn&#39;t blessed, but &#39;one fifth&#39; is blessed, is that decimal is a 10-based system. 5 fits &#39;nicely&#39; in 10, so it&#39;s doable. 3 does not fit nicely into 10, so it isn&#39;t.\r\n\r\nThis explains why 8 does work (8 is, broken down into prime factors, 2 times 2 times 2, and 2 fits nicely in 10, so this works), and why 7 doesn&#39;t (one seventh is also not something you can write down __precisely__ on a piece of paper). 14 wouldn&#39;t work either (breaks down to 2 times 7), 60 doesn&#39;t (60 is `5*3*2*2` - if the breakdown contains any prime that doesn&#39;t &quot;fit&quot; in 10, i.e. anything except 2 or 5, you can&#39;t do it).\r\n\r\nBinary is even more restrictive: The only factor is 2. So any number whose divider breaks down to factors of only 2 &#39;works&#39; and is __perfectly__ representable as a double, __but everything else simply isnt__.\r\n\r\n## You&#39;re joking\r\n\r\nNo. Run this code. I strongly suggest you actually do it to really internalize this bizarre aspect of doubles:\r\n\r\n```\r\npublic void proofOfWeirdness() {\r\n  double v = 0.0;\r\n  for (int i = 0; i &lt; 10; i++) v += 0.1;\r\n  System.out.println(v == 1.0);\r\n}\r\n```\r\n\r\nThis prints `true`, right? 10 * 0.1 is.. obviously 1.0, so of course it would.\r\n\r\n__Run it__. It prints `false`! - because one tenth, perfectly writable in our decimal system (it&#39;s `1/(2*5)`, and 2 and 5 are the &#39;safe&#39; divisor primes), __it isn&#39;t perfect in `double` math__, because only 2 is a &#39;safe&#39; divisor in binary. And the tiny litle error introduced is enough to make this `false`.\r\n\r\nIt&#39;s identical to me asking you to write one third on a note, and then do it two more times, and then me asking you to add up the numbers on your 3 notes. You won&#39;t tell me 1. No, if you did it right, you&#39;ll tell me it sums to 0.9999999. Which isn&#39;t, quite, 1.0.\r\n\r\n## So.... ?\r\n\r\nThat means &#39;Math.round(double * 100) / 100` __is hogwash__. No, it doesn&#39;t. The number you end up with is NOT exactly 9.80. That&#39;s not a blessed number in double parlance.\r\n\r\nSo why does it __seem__ to work?\r\n\r\nBecause almost all doubles (all but those who so happen to hit a &#39;blessed&#39; number) look like total garbage if you were to print their exact value. You&#39;d end up with _a lot_ of 5.999999999999999999999875 instead of 6es, and that&#39;s annoying, so:\r\n\r\n__`System.out.println` out of the box does some very basic rounding__. And that makes it _seem_ like your `Math.round(x * 100) / 100` code works. It only &#39;works&#39; when that exceedingly basic rounding gets lucky, so to speak. And it only does that for quite small numbers.\r\n\r\n## e24.. oof you&#39;re really out there now - DANGER, HERE BE DRAGONS\r\n\r\ndoubles use 64-bit for storage, which means by fundamental mathematical properties, that there can be only at most `2^64` blessed numbers. Sure, &#39;one third&#39; did not fit on your little note. But writing out a 24-digit humongous number _also_ does not fit on a tiny piece of paper. The same applies to doubles. This is so large, it doesn&#39;t really fit. Doubles are a little smarter than that, but note that 2^64 is 1.8e19 more or less (a 19-digit number). So how can doubles seemingly store 10e24?\r\n\r\nWell, those blessed numbers aren&#39;t equally distributed along the number line. The gaps between blessed numbers increases as you move away from 1.\r\n\r\nAround 2^52 (4.5e15), __the gap between representable (blessed) doubles is larger than 1__. In other words, not every integer value is even representable. Let&#39;s try it!\r\n\r\n```\r\ndouble v = Math.pow(2, 56) + 1000;\r\ndouble w = v + 1.0;\r\nSystem.out.println(w == v);\r\n```\r\n\r\nThis should, obviously, print `false`, right? We&#39;re asking if some number is equal to that same number + 1 which obviosuly can&#39;t possibly be true.\r\n\r\n__But, that prints `true`__. Because all double math silently rounds to the nearest blessed number.\r\n\r\n\r\nHence, _here be dragons_. The number you&#39;re seeing is quite rounded. Of course, in `1.245e24` notation, that&#39;s the same as `1245000000000000000000000` - we&#39;re only looking at the most significant digits.\r\n\r\n## Okay, so how DO I round this thing?\r\n\r\nAs I said, you can&#39;t - not in `double` math. But what you _can_ do, is print it rounded. That&#39;s no problem, and presumably what you want. We have a tool for that in java, string format (and `printf` is just a special form of that, that prints it instead of giving you a string):\r\n\r\n```\r\ndouble v = 1.23456789e24 + 10000000;\r\nSystem.out.println(&quot;NOT ROUNDED: &quot; + v);\r\nSystem.out.println(&quot;BETTER: &quot; + String.format(&quot;%.4g&quot;, v));\r\n```\r\n\r\nThe `g` means: Round to 4 digits after the decimal point, and use scientific notation (that `e` thing). You can&#39;t not use scientific notation here - as explained above, only the first ~15 or so digits have any hope of being accurate, the remaining digits are arbitrary rounding noise.\r\n\r\n## I need perfection though!\r\n\r\nWell, you can have that - look at the API of [`BigDecimal`](https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html). But, a few caveats:\r\n\r\n* BigDecimal is hundreds of times slower.\r\n* BDs take more and more memory to be able to represent without error.\r\n* You still can&#39;t ask a BD to calculate one divided by three, because it&#39;d take infinite memory. Hence, you can&#39;t divide BDs unless you get lucky (it&#39;s decimal-based, so, only divide by stuff that breaks down in prime factors of only twos and fives), or you tell BD to round.\r\n\r\n## A note about currencies\r\n\r\nBecause of those tiny errors, __do not__ use doubles to represent currencies. Use `long`, storing atomic units (so, satoshis for bitcoin, yen for yen, cents for dollars and euros, and so on).","title":"round double with e in it","body":"<blockquote>\n<p>For some reason, I can round this using the same method:</p>\n</blockquote>\n<p>No, you can't. That's not how doubles work. You need to understand what doubles <em>are</em> to do this stuff.</p>\n<h2>What doubles <em>are</em>.</h2>\n<p>Take out a small piece of paper. Then take a pen.</p>\n<p>Now write me down, <strong>exactly</strong>, the value in decimal notation of how many kilos of peas you take, when I tell you to open a 1 kg bag of peas, and take precisely one third of it out.</p>\n<p>You'll find that this task is, in fact, mathematically, <strong>utterly impossible</strong>. You'll write down 0.333333, and then you run out of space.</p>\n<p>However, if I do the same thing but I ask you to take one fifth of the peas, you'll be able to do it no problem: <code>0.2</code> goes on your piece of paper and voila.</p>\n<p>This is kinda obvious, mathematically: There's a finite amount of numbers you can express within the confines of a small piece of paper, but there are an infinite amount of numbers between 0 and 1, let alone between - and + infinity, which is what <code>double</code> <strong>oversimplified</strong> says it can represent.</p>\n<p><strong>This introduces the idea of blessed numbers</strong>: <em>Some</em> numbers can be expressed perfectly on your piece of paper (such as one fifth), but some numbers cannot.</p>\n<h2>What are you talking about? I <em>want</em> to round!</h2>\n<p>Ah, but, you're rounding in base 10 - decimal. Computers store stuff in base 2 - binary.</p>\n<p>The reason 'one third' isn't blessed, but 'one fifth' is blessed, is that decimal is a 10-based system. 5 fits 'nicely' in 10, so it's doable. 3 does not fit nicely into 10, so it isn't.</p>\n<p>This explains why 8 does work (8 is, broken down into prime factors, 2 times 2 times 2, and 2 fits nicely in 10, so this works), and why 7 doesn't (one seventh is also not something you can write down <strong>precisely</strong> on a piece of paper). 14 wouldn't work either (breaks down to 2 times 7), 60 doesn't (60 is <code>5*3*2*2</code> - if the breakdown contains any prime that doesn't &quot;fit&quot; in 10, i.e. anything except 2 or 5, you can't do it).</p>\n<p>Binary is even more restrictive: The only factor is 2. So any number whose divider breaks down to factors of only 2 'works' and is <strong>perfectly</strong> representable as a double, <strong>but everything else simply isnt</strong>.</p>\n<h2>You're joking</h2>\n<p>No. Run this code. I strongly suggest you actually do it to really internalize this bizarre aspect of doubles:</p>\n<pre><code>public void proofOfWeirdness() {\n  double v = 0.0;\n  for (int i = 0; i &lt; 10; i++) v += 0.1;\n  System.out.println(v == 1.0);\n}\n</code></pre>\n<p>This prints <code>true</code>, right? 10 * 0.1 is.. obviously 1.0, so of course it would.</p>\n<p><strong>Run it</strong>. It prints <code>false</code>! - because one tenth, perfectly writable in our decimal system (it's <code>1/(2*5)</code>, and 2 and 5 are the 'safe' divisor primes), <strong>it isn't perfect in <code>double</code> math</strong>, because only 2 is a 'safe' divisor in binary. And the tiny litle error introduced is enough to make this <code>false</code>.</p>\n<p>It's identical to me asking you to write one third on a note, and then do it two more times, and then me asking you to add up the numbers on your 3 notes. You won't tell me 1. No, if you did it right, you'll tell me it sums to 0.9999999. Which isn't, quite, 1.0.</p>\n<h2>So.... ?</h2>\n<p>That means 'Math.round(double * 100) / 100` <strong>is hogwash</strong>. No, it doesn't. The number you end up with is NOT exactly 9.80. That's not a blessed number in double parlance.</p>\n<p>So why does it <strong>seem</strong> to work?</p>\n<p>Because almost all doubles (all but those who so happen to hit a 'blessed' number) look like total garbage if you were to print their exact value. You'd end up with <em>a lot</em> of 5.999999999999999999999875 instead of 6es, and that's annoying, so:</p>\n<p><strong><code>System.out.println</code> out of the box does some very basic rounding</strong>. And that makes it <em>seem</em> like your <code>Math.round(x * 100) / 100</code> code works. It only 'works' when that exceedingly basic rounding gets lucky, so to speak. And it only does that for quite small numbers.</p>\n<h2>e24.. oof you're really out there now - DANGER, HERE BE DRAGONS</h2>\n<p>doubles use 64-bit for storage, which means by fundamental mathematical properties, that there can be only at most <code>2^64</code> blessed numbers. Sure, 'one third' did not fit on your little note. But writing out a 24-digit humongous number <em>also</em> does not fit on a tiny piece of paper. The same applies to doubles. This is so large, it doesn't really fit. Doubles are a little smarter than that, but note that 2^64 is 1.8e19 more or less (a 19-digit number). So how can doubles seemingly store 10e24?</p>\n<p>Well, those blessed numbers aren't equally distributed along the number line. The gaps between blessed numbers increases as you move away from 1.</p>\n<p>Around 2^52 (4.5e15), <strong>the gap between representable (blessed) doubles is larger than 1</strong>. In other words, not every integer value is even representable. Let's try it!</p>\n<pre><code>double v = Math.pow(2, 56) + 1000;\ndouble w = v + 1.0;\nSystem.out.println(w == v);\n</code></pre>\n<p>This should, obviously, print <code>false</code>, right? We're asking if some number is equal to that same number + 1 which obviosuly can't possibly be true.</p>\n<p><strong>But, that prints <code>true</code></strong>. Because all double math silently rounds to the nearest blessed number.</p>\n<p>Hence, <em>here be dragons</em>. The number you're seeing is quite rounded. Of course, in <code>1.245e24</code> notation, that's the same as <code>1245000000000000000000000</code> - we're only looking at the most significant digits.</p>\n<h2>Okay, so how DO I round this thing?</h2>\n<p>As I said, you can't - not in <code>double</code> math. But what you <em>can</em> do, is print it rounded. That's no problem, and presumably what you want. We have a tool for that in java, string format (and <code>printf</code> is just a special form of that, that prints it instead of giving you a string):</p>\n<pre><code>double v = 1.23456789e24 + 10000000;\nSystem.out.println(&quot;NOT ROUNDED: &quot; + v);\nSystem.out.println(&quot;BETTER: &quot; + String.format(&quot;%.4g&quot;, v));\n</code></pre>\n<p>The <code>g</code> means: Round to 4 digits after the decimal point, and use scientific notation (that <code>e</code> thing). You can't not use scientific notation here - as explained above, only the first ~15 or so digits have any hope of being accurate, the remaining digits are arbitrary rounding noise.</p>\n<h2>I need perfection though!</h2>\n<p>Well, you can have that - look at the API of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\"><code>BigDecimal</code></a>. But, a few caveats:</p>\n<ul>\n<li>BigDecimal is hundreds of times slower.</li>\n<li>BDs take more and more memory to be able to represent without error.</li>\n<li>You still can't ask a BD to calculate one divided by three, because it'd take infinite memory. Hence, you can't divide BDs unless you get lucky (it's decimal-based, so, only divide by stuff that breaks down in prime factors of only twos and fives), or you tell BD to round.</li>\n</ul>\n<h2>A note about currencies</h2>\n<p>Because of those tiny errors, <strong>do not</strong> use doubles to represent currencies. Use <code>long</code>, storing atomic units (so, satoshis for bitcoin, yen for yen, cents for dollars and euros, and so on).</p>\n"},{"tags":[],"owner":{"account_id":971196,"reputation":24175,"user_id":993742,"display_name":"isnot2bad"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700766260,"creation_date":1700765398,"answer_id":77539108,"question_id":77538455,"body_markdown":"### The Problem\r\n\r\nThe double value you want to round is actually really huge. Written in plain decimal notation: `9792117207541878000000000.0`\r\n\r\n(As you can see, it is already a number without decimals. So rounding it to two decimal digits should not do any change.)\r\n\r\nHowever, the JavaDoc of `long Math.round(double value)` says:\r\n\r\n&gt; Returns the closest **long** to the argument, with ties rounding up.\r\n\r\nIn your case, the double value is by far larger than the largest possible long value, which is `Long.MAX_VALUE`, or `9223372036854775807`. So the result of `Math.round(num * 100)` is the closest `long` value, i.e. `Long.MAX_VALUE`.\r\n\r\nIf you now divide this result (`Long.MAX_VALUE`) by `100.0`, you get `92233720368547758.07`, or in scientific notation:\r\n**`9.223372036854776E16`**.\r\n\r\n### Possible solution\r\n\r\nAvoid the conversion to *long* by using another rounding method offered by the `Math` class: `double Math.rint(double value)`:\r\n\r\n&gt; Returns the double value that is closest in value to the argument and is equal to a mathematical integer.\r\n\r\nSo this computes the correct value:\r\n\r\n```java\r\ndouble num = 9.792117207541878E24;\r\ndouble roundedNum = Math.rint(num * 100.0d) / 100.0d;\r\nSystem.out.println(roundedNum); // 9.792117207541878E24\r\n```\r\n\r\nHowever, you might still get into (other) troubles, as the double data type is not able to store such large numbers with a precision at decimal digit level. For details see the [answer of rzwitserloot][1].\r\n\r\nSo I also suggest to use `BigDecimal` in case such precision is really required:\r\n\r\n```\r\nBigDecimal num = new BigDecimal(&quot;9.792117207541878E24&quot;);\r\nBigDecimal roundedNum = num.setScale(2, RoundingMode.HALF_UP);\r\nSystem.out.println(roundedNum.toPlainString()); // 9792117207541878000000000.00\r\n```\r\n\r\n\r\n[1]: https://stackoverflow.com/a/77538998/993742","title":"round double with e in it","body":"<h3>The Problem</h3>\n<p>The double value you want to round is actually really huge. Written in plain decimal notation: <code>9792117207541878000000000.0</code></p>\n<p>(As you can see, it is already a number without decimals. So rounding it to two decimal digits should not do any change.)</p>\n<p>However, the JavaDoc of <code>long Math.round(double value)</code> says:</p>\n<blockquote>\n<p>Returns the closest <strong>long</strong> to the argument, with ties rounding up.</p>\n</blockquote>\n<p>In your case, the double value is by far larger than the largest possible long value, which is <code>Long.MAX_VALUE</code>, or <code>9223372036854775807</code>. So the result of <code>Math.round(num * 100)</code> is the closest <code>long</code> value, i.e. <code>Long.MAX_VALUE</code>.</p>\n<p>If you now divide this result (<code>Long.MAX_VALUE</code>) by <code>100.0</code>, you get <code>92233720368547758.07</code>, or in scientific notation:\n<strong><code>9.223372036854776E16</code></strong>.</p>\n<h3>Possible solution</h3>\n<p>Avoid the conversion to <em>long</em> by using another rounding method offered by the <code>Math</code> class: <code>double Math.rint(double value)</code>:</p>\n<blockquote>\n<p>Returns the double value that is closest in value to the argument and is equal to a mathematical integer.</p>\n</blockquote>\n<p>So this computes the correct value:</p>\n<pre class=\"lang-java prettyprint-override\"><code>double num = 9.792117207541878E24;\ndouble roundedNum = Math.rint(num * 100.0d) / 100.0d;\nSystem.out.println(roundedNum); // 9.792117207541878E24\n</code></pre>\n<p>However, you might still get into (other) troubles, as the double data type is not able to store such large numbers with a precision at decimal digit level. For details see the <a href=\"https://stackoverflow.com/a/77538998/993742\">answer of rzwitserloot</a>.</p>\n<p>So I also suggest to use <code>BigDecimal</code> in case such precision is really required:</p>\n<pre><code>BigDecimal num = new BigDecimal(&quot;9.792117207541878E24&quot;);\nBigDecimal roundedNum = num.setScale(2, RoundingMode.HALF_UP);\nSystem.out.println(roundedNum.toPlainString()); // 9792117207541878000000000.00\n</code></pre>\n"}],"owner":{"account_id":22426503,"reputation":127,"user_id":16633028,"display_name":"cindicate"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":3,"up_vote_count":3,"closed_date":1700766891,"answer_count":3,"score":0,"last_activity_date":1700766260,"creation_date":1700757459,"question_id":77538455,"body_markdown":"I&#39;ve been trying trying to round this number to two decimal places, but I&#39;ve had no luck:\r\n\r\n    double num = 9.792117207541878E24;\r\n    double roundedNum = Math.round(num*100)/100.0;\r\n    System.out.println(roundedNum); // it gives &#39;9.223372036854776E16&#39; not what I want\r\n\r\nFor some reason, I can round this using the same method:\r\n\r\n    double num = 1234.567;\r\n    double roundedNum = Math.round(num*100)/100.0;\r\n    System.out.println(roundedNum);\r\n\r\nit gives me \r\n\r\n    1234.57\r\nbut I can&#39;t do the same with the first block of code. Is there a way I can get 9.80 using a similar method, I don&#39;t want to use DecimalFormat because I have not learned that yet in class.","title":"round double with e in it","body":"<p>I've been trying trying to round this number to two decimal places, but I've had no luck:</p>\n<pre><code>double num = 9.792117207541878E24;\ndouble roundedNum = Math.round(num*100)/100.0;\nSystem.out.println(roundedNum); // it gives '9.223372036854776E16' not what I want\n</code></pre>\n<p>For some reason, I can round this using the same method:</p>\n<pre><code>double num = 1234.567;\ndouble roundedNum = Math.round(num*100)/100.0;\nSystem.out.println(roundedNum);\n</code></pre>\n<p>it gives me</p>\n<pre><code>1234.57\n</code></pre>\n<p>but I can't do the same with the first block of code. Is there a way I can get 9.80 using a similar method, I don't want to use DecimalFormat because I have not learned that yet in class.</p>\n"},{"tags":["java","mysql","tomcat","jdbc"],"comments":[{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":1,"creation_date":1700729694,"post_id":77535376,"comment_id":136690925,"body_markdown":"How many connections do you have in your pool, and how many of them are busy - e.g. never returned?","body":"How many connections do you have in your pool, and how many of them are busy - e.g. never returned?"},{"owner":{"account_id":25930939,"reputation":336,"user_id":19652021,"display_name":"hariharan baskaran"},"score":0,"creation_date":1700731085,"post_id":77535376,"comment_id":136691185,"body_markdown":"how can i check that?","body":"how can i check that?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1700732059,"post_id":77535376,"comment_id":136691397,"body_markdown":"Which pool are you using? Seems like an unhelpful error message","body":"Which pool are you using? Seems like an unhelpful error message"},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":0,"creation_date":1700733295,"post_id":77535376,"comment_id":136691657,"body_markdown":"instead of going one-by-one: Check my answer. If you need more details, please edit your question with a [mcve] - please check [ask]: Currently you&#39;re providing nothing more than an error message, which doesn&#39;t make this a good and answerable question (though I&#39;ve tried).","body":"instead of going one-by-one: Check my answer. If you need more details, please edit your question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> - please check <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>: Currently you&#39;re providing nothing more than an error message, which doesn&#39;t make this a good and answerable question (though I&#39;ve tried)."},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":0,"creation_date":1700754169,"post_id":77535376,"comment_id":136695506,"body_markdown":"Does this answer your question? [com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure](https://stackoverflow.com/q/2983248/13447). I can&#39;t vote to close as duplicate, because I&#39;ve already voted to close for a lack of information (see comments on my answer), but Revision 3 of the question suggests a different cause than revisions 1 and 2.","body":"Does this answer your question? <a href=\"https://stackoverflow.com/q/2983248/13447\">com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure</a>. I can&#39;t vote to close as duplicate, because I&#39;ve already voted to close for a lack of information (see comments on my answer), but Revision 3 of the question suggests a different cause than revisions 1 and 2."},{"owner":{"account_id":25930939,"reputation":336,"user_id":19652021,"display_name":"hariharan baskaran"},"score":0,"creation_date":1700765394,"post_id":77535376,"comment_id":136697269,"body_markdown":"Thank you @OlafKock, i have finally found the root problem posted the answer,Appology for not sharing much detail as it is a third party app while having access to only log files, And as i have seen some questions like this(configuration problems) i thought i could use stack overflow and i dont know i coulldnt ask anything out of core programing like this one.","body":"Thank you @OlafKock, i have finally found the root problem posted the answer,Appology for not sharing much detail as it is a third party app while having access to only log files, And as i have seen some questions like this(configuration problems) i thought i could use stack overflow and i dont know i coulldnt ask anything out of core programing like this one."}],"answers":[{"comments":[{"owner":{"account_id":25930939,"reputation":336,"user_id":19652021,"display_name":"hariharan baskaran"},"score":0,"creation_date":1700734124,"post_id":77535724,"comment_id":136691811,"body_markdown":"have shared the file there is no key named max_connection","body":"have shared the file there is no key named max_connection"},{"owner":{"account_id":25930939,"reputation":336,"user_id":19652021,"display_name":"hariharan baskaran"},"score":0,"creation_date":1700748654,"post_id":77535724,"comment_id":136694483,"body_markdown":"even though increased the problem stil the same","body":"even though increased the problem stil the same"}],"tags":[],"owner":{"account_id":11040168,"reputation":35,"user_id":8108436,"accept_rate":75,"display_name":"rabbishakir"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700731991,"creation_date":1700731991,"answer_id":77535724,"question_id":77535376,"body_markdown":"Check **max_connections** in the MySQL configuration file. It manages the number of simultaneous connections according to the demands of your application.","title":"Mysql getting disconnected from application during populating","body":"<p>Check <strong>max_connections</strong> in the MySQL configuration file. It manages the number of simultaneous connections according to the demands of your application.</p>\n"},{"comments":[{"owner":{"account_id":25930939,"reputation":336,"user_id":19652021,"display_name":"hariharan baskaran"},"score":0,"creation_date":1700733312,"post_id":77535872,"comment_id":136691659,"body_markdown":"how can i get the configuration details?","body":"how can i get the configuration details?"},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":0,"creation_date":1700733640,"post_id":77535872,"comment_id":136691724,"body_markdown":"It&#39;s _your_ system, you should know, no? And I would recommend that you&#39;d rather look at code eating connections like candy, rather than provide more candy (which would require configuration). That being said, there are several candidate places for the configuration, `tomcat/conf` is one place to look at, but it might be elsewhere. If necessary, you would need to get help to provide the necessary details to get an answer here - Stackoverflow is not a consulting service, but a Q&amp;A site for programming-related questions. And it looks like you have a programming issue - but I still see no [mcve].","body":"It&#39;s <i>your</i> system, you should know, no? And I would recommend that you&#39;d rather look at code eating connections like candy, rather than provide more candy (which would require configuration). That being said, there are several candidate places for the configuration, <code>tomcat&#47;conf</code> is one place to look at, but it might be elsewhere. If necessary, you would need to get help to provide the necessary details to get an answer here - Stackoverflow is not a consulting service, but a Q&amp;A site for programming-related questions. And it looks like you have a programming issue - but I still see no <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":25930939,"reputation":336,"user_id":19652021,"display_name":"hariharan baskaran"},"score":0,"creation_date":1700734099,"post_id":77535872,"comment_id":136691808,"body_markdown":"thank you for your response there is no keys regarding maximum connection pool as i have edited the question with my.cnf file","body":"thank you for your response there is no keys regarding maximum connection pool as i have edited the question with my.cnf file"},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":0,"creation_date":1700734669,"post_id":77535872,"comment_id":136691926,"body_markdown":"The connection _pool_ would be configured on the Tomcat side. And: it _might not_ be configured, so that run it with default values that you wouldn&#39;t find anywhere in your tomcat&#39;s configuration. Inspect your code.","body":"The connection <i>pool</i> would be configured on the Tomcat side. And: it <i>might not</i> be configured, so that run it with default values that you wouldn&#39;t find anywhere in your tomcat&#39;s configuration. Inspect your code."},{"owner":{"account_id":25930939,"reputation":336,"user_id":19652021,"display_name":"hariharan baskaran"},"score":0,"creation_date":1700748627,"post_id":77535872,"comment_id":136694478,"body_markdown":"lemme give a situation even though the code is clean using single instance of connection what if i use multiple application on mysql for example i can use my application and an DBeaver instance connected to mysql at the same time.. in that case too the problem occurs, what if i connect more application for analysisi what should be done in that case?","body":"lemme give a situation even though the code is clean using single instance of connection what if i use multiple application on mysql for example i can use my application and an DBeaver instance connected to mysql at the same time.. in that case too the problem occurs, what if i connect more application for analysisi what should be done in that case?"},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":0,"creation_date":1700753880,"post_id":77535872,"comment_id":136695462,"body_markdown":"_If_ your code is indeed clean, you&#39;re on the wrong site: Stackoverflow is about programming issues, not about server maintenance. Now that you also added the &quot;Communication Link Failure&quot; information to the question, _and_ claim your code is clean (without providing any code or details), the question seems to be either off-topic for not being programming related, or to be closed for lack of a [mcve] (see [ask] and [help/on-topic])","body":"<i>If</i> your code is indeed clean, you&#39;re on the wrong site: Stackoverflow is about programming issues, not about server maintenance. Now that you also added the &quot;Communication Link Failure&quot; information to the question, <i>and</i> claim your code is clean (without providing any code or details), the question seems to be either off-topic for not being programming related, or to be closed for lack of a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help/on-topic\">help center</a>)"}],"tags":[],"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700733195,"creation_date":1700733195,"answer_id":77535872,"question_id":77535376,"body_markdown":"A connection pool provides you with a certain (configured, maximum) number of connections to the database. \r\n\r\nThe assumption is: When you&#39;re done with a connection, you&#39;re going to return it to the pool. This might be done implicitly by the garbage collector, but for a long running process, there&#39;s no guarantee that the garbage collector ever runs during your routine. \r\n\r\nIf your code uses the connections up like candy and never returns them (typically through `connection.close()`), or uses new connections for each operation rather than reusing a single connection, you&#39;re able to quickly exhaust the connection pool. This is called &quot;resource leaking&quot;.\r\n\r\nRaising the number of available connections (as suggested in the other answer) _might_ help you _right now_, but will fail again, a bit later, when your routine populates the database with more data, if those routines still chew up connections. \r\n\r\nAs you neither provide configuration details nor code, that&#39;s as much answer as can be given. ","title":"Mysql getting disconnected from application during populating","body":"<p>A connection pool provides you with a certain (configured, maximum) number of connections to the database.</p>\n<p>The assumption is: When you're done with a connection, you're going to return it to the pool. This might be done implicitly by the garbage collector, but for a long running process, there's no guarantee that the garbage collector ever runs during your routine.</p>\n<p>If your code uses the connections up like candy and never returns them (typically through <code>connection.close()</code>), or uses new connections for each operation rather than reusing a single connection, you're able to quickly exhaust the connection pool. This is called &quot;resource leaking&quot;.</p>\n<p>Raising the number of available connections (as suggested in the other answer) <em>might</em> help you <em>right now</em>, but will fail again, a bit later, when your routine populates the database with more data, if those routines still chew up connections.</p>\n<p>As you neither provide configuration details nor code, that's as much answer as can be given.</p>\n"},{"tags":[],"owner":{"account_id":25930939,"reputation":336,"user_id":19652021,"display_name":"hariharan baskaran"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700765364,"creation_date":1700765364,"answer_id":77539105,"question_id":77535376,"body_markdown":"After some long struggle and research fond the problem, the solutions from above, to increase max_connections and others dosnt worked out for me, sorry i couldnt share the code or any other info its a 3rd party application i had only access to the log files. So comming to the problem the problem was partly with my mac.\r\n\r\nThere is this parameter called ```table_open_cache``` and is related to ```max_connections```. For example, for 200 concurrent running connections, we should specify a table cache size of at lease **200 * N**, where **N** is the maximum number of tables per join in any of the queries which we execute. We must also reserve some file descriptors for temporary tables and files\r\n\r\n\r\nWhere the problem occured for me is my OS (i.e MAC) couldnt handle all the number of open file descriptors implied by the ```table_open_cache``` settings or the default specified in **my.cnf**. In my case the default ```table_open_cache``` is set too high, MYSQL ran out of file descriptors and exhibited symptoms such as refusing connections or failing to perform queries. thats why the sudden connection loss during populating.\r\n\r\n**SOLUTION** : I reduced my ```table_open_cache``` variable to a lower value like **400** in my.cnf file and restarted mysql server once and the problem is solved.","title":"Mysql getting disconnected from application during populating","body":"<p>After some long struggle and research fond the problem, the solutions from above, to increase max_connections and others dosnt worked out for me, sorry i couldnt share the code or any other info its a 3rd party application i had only access to the log files. So comming to the problem the problem was partly with my mac.</p>\n<p>There is this parameter called <code>table_open_cache</code> and is related to <code>max_connections</code>. For example, for 200 concurrent running connections, we should specify a table cache size of at lease <strong>200 * N</strong>, where <strong>N</strong> is the maximum number of tables per join in any of the queries which we execute. We must also reserve some file descriptors for temporary tables and files</p>\n<p>Where the problem occured for me is my OS (i.e MAC) couldnt handle all the number of open file descriptors implied by the <code>table_open_cache</code> settings or the default specified in <strong>my.cnf</strong>. In my case the default <code>table_open_cache</code> is set too high, MYSQL ran out of file descriptors and exhibited symptoms such as refusing connections or failing to perform queries. thats why the sudden connection loss during populating.</p>\n<p><strong>SOLUTION</strong> : I reduced my <code>table_open_cache</code> variable to a lower value like <strong>400</strong> in my.cnf file and restarted mysql server once and the problem is solved.</p>\n"}],"owner":{"account_id":25930939,"reputation":336,"user_id":19652021,"display_name":"hariharan baskaran"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":3,"score":0,"last_activity_date":1700765364,"creation_date":1700728493,"question_id":77535376,"body_markdown":"Recently i got mac m1\r\ni am running a product which uses mysql@5.7 installed through homebrew, the data from the product is connected successfully to mysql and started populating but nearing the end of population there is a connection problem with mysql and shows exception during getconnection from pool am using mac m1 and mysql5.6\r\n\r\nthe error is as follows\r\n\r\njava.sql.SQLException: java.lang.Exception: Exception during getConnection from pool Exception occurred during get connection from datasource\r\nCaused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure\r\n\r\nThis dosnt occur at product startup but during 80% of population.\r\n\r\nconfig file my.cnf\r\n```\r\n# Default Homebrew MySQL server config\r\n[mysqld]\r\n# Only allow connections from localhost\r\nbind-address = 127.0.0.1\r\n```","title":"Mysql getting disconnected from application during populating","body":"<p>Recently i got mac m1\ni am running a product which uses mysql@5.7 installed through homebrew, the data from the product is connected successfully to mysql and started populating but nearing the end of population there is a connection problem with mysql and shows exception during getconnection from pool am using mac m1 and mysql5.6</p>\n<p>the error is as follows</p>\n<p>java.sql.SQLException: java.lang.Exception: Exception during getConnection from pool Exception occurred during get connection from datasource\nCaused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure</p>\n<p>This dosnt occur at product startup but during 80% of population.</p>\n<p>config file my.cnf</p>\n<pre><code># Default Homebrew MySQL server config\n[mysqld]\n# Only allow connections from localhost\nbind-address = 127.0.0.1\n</code></pre>\n"},{"tags":["java","spring-boot","elasticsearch"],"owner":{"account_id":13376026,"reputation":61,"user_id":9652891,"display_name":"Leva dev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700765249,"creation_date":1700765249,"question_id":77539097,"body_markdown":"I have built the springboot project 2.6v with elasticsearch, I have an index named employee, this employee have 4 fields, firsname, lastname, section and salary, section is enum.\r\nI am using RestHighLevelClient to interact with elasticsearch. when I use it to perform get operation it works fine, but when I use it as create doc, by the following code:\r\n```\r\npublic Map&lt;String,String&gt; save(Employee employee) throws IOException {\r\n    IndexRequest request = new IndexRequest(&quot;employees&quot;);\r\n    String jsonString = objectMapper().writeValueAsString(employee);\r\n    request.source(jsonString, XContentType.JSON);\r\n    restHighLevelClient.index(request, RequestOptions.DEFAULT);\r\n    return Map.of(&quot;ack&quot;,&quot;true&quot;);\r\n}\r\n```\r\n it throws the following exception\r\n```\r\njava.io.IOException: Unable to parse response body for Response{requestLine=POST /logs/_doc?timeout=1m HTTP/1.1, host=http://127.0.0.1:9200, response=HTTP/1.1 201 Created}\r\n\tat org.elasticsearch.client.RestHighLevelClient.internalPerformRequest(RestHighLevelClient.java:1751) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\r\n\tat org.elasticsearch.client.RestHighLevelClient.performRequest(RestHighLevelClient.java:1702) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\r\n\tat org.elasticsearch.client.RestHighLevelClient.performRequestAndParseEntity(RestHighLevelClient.java:1672) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\r\n\tat org.elasticsearch.client.RestHighLevelClient.index(RestHighLevelClient.java:1029) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\r\n\tat io.arabot.elasticseach.service.LogService.save(LogService.java:115) ~[classes/:na]\r\n\tat io.arabot.elasticseach.controllers.LogController.createLog(LogController.java:41) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.16.jar:5.3.16]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.16.jar:5.3.16]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.16.jar:5.3.16]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.58.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.16.jar:5.3.16]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.58.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.58.jar:9.0.58]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.16.jar:5.3.16]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.16.jar:5.3.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.16.jar:5.3.16]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.16.jar:5.3.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.16.jar:5.3.16]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.16.jar:5.3.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\nCaused by: java.lang.NullPointerException: null\r\n\tat java.base/java.util.Objects.requireNonNull(Objects.java:209) ~[na:na]\r\n\tat org.elasticsearch.action.DocWriteResponse.&lt;init&gt;(DocWriteResponse.java:116) ~[elasticsearch-7.15.2.jar:7.15.2]\r\n\tat org.elasticsearch.action.index.IndexResponse.&lt;init&gt;(IndexResponse.java:43) ~[elasticsearch-7.15.2.jar:7.15.2]\r\n\tat org.elasticsearch.action.index.IndexResponse.&lt;init&gt;(IndexResponse.java:28) ~[elasticsearch-7.15.2.jar:7.15.2]\r\n\tat org.elasticsearch.action.index.IndexResponse$Builder.build(IndexResponse.java:96) ~[elasticsearch-7.15.2.jar:7.15.2]\r\n\tat org.elasticsearch.action.index.IndexResponse.fromXContent(IndexResponse.java:78) ~[elasticsearch-7.15.2.jar:7.15.2]\r\n\tat org.elasticsearch.client.RestHighLevelClient.parseEntity(RestHighLevelClient.java:2011) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\r\n\tat org.elasticsearch.client.RestHighLevelClient.lambda$performRequestAndParseEntity$8(RestHighLevelClient.java:1673) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\r\n\tat org.elasticsearch.client.RestHighLevelClient.internalPerformRequest(RestHighLevelClient.java:1749) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\r\n\t... 55 common frames omitted\r\n\r\n```","title":"How to save document in elasticsearch by springboot app","body":"<p>I have built the springboot project 2.6v with elasticsearch, I have an index named employee, this employee have 4 fields, firsname, lastname, section and salary, section is enum.\nI am using RestHighLevelClient to interact with elasticsearch. when I use it to perform get operation it works fine, but when I use it as create doc, by the following code:</p>\n<pre><code>public Map&lt;String,String&gt; save(Employee employee) throws IOException {\n    IndexRequest request = new IndexRequest(&quot;employees&quot;);\n    String jsonString = objectMapper().writeValueAsString(employee);\n    request.source(jsonString, XContentType.JSON);\n    restHighLevelClient.index(request, RequestOptions.DEFAULT);\n    return Map.of(&quot;ack&quot;,&quot;true&quot;);\n}\n</code></pre>\n<p>it throws the following exception</p>\n<pre><code>java.io.IOException: Unable to parse response body for Response{requestLine=POST /logs/_doc?timeout=1m HTTP/1.1, host=http://127.0.0.1:9200, response=HTTP/1.1 201 Created}\n    at org.elasticsearch.client.RestHighLevelClient.internalPerformRequest(RestHighLevelClient.java:1751) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\n    at org.elasticsearch.client.RestHighLevelClient.performRequest(RestHighLevelClient.java:1702) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\n    at org.elasticsearch.client.RestHighLevelClient.performRequestAndParseEntity(RestHighLevelClient.java:1672) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\n    at org.elasticsearch.client.RestHighLevelClient.index(RestHighLevelClient.java:1029) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\n    at io.arabot.elasticseach.service.LogService.save(LogService.java:115) ~[classes/:na]\n    at io.arabot.elasticseach.controllers.LogController.createLog(LogController.java:41) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.16.jar:5.3.16]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.16.jar:5.3.16]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.16.jar:5.3.16]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.16.jar:5.3.16]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.16.jar:5.3.16]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.16.jar:5.3.16]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.16.jar:5.3.16]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.16.jar:5.3.16]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.16.jar:5.3.16]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.16.jar:5.3.16]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.58.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.16.jar:5.3.16]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.58.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.58.jar:9.0.58]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.16.jar:5.3.16]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.16.jar:5.3.16]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.16.jar:5.3.16]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.16.jar:5.3.16]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.16.jar:5.3.16]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.16.jar:5.3.16]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.58.jar:9.0.58]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\nCaused by: java.lang.NullPointerException: null\n    at java.base/java.util.Objects.requireNonNull(Objects.java:209) ~[na:na]\n    at org.elasticsearch.action.DocWriteResponse.&lt;init&gt;(DocWriteResponse.java:116) ~[elasticsearch-7.15.2.jar:7.15.2]\n    at org.elasticsearch.action.index.IndexResponse.&lt;init&gt;(IndexResponse.java:43) ~[elasticsearch-7.15.2.jar:7.15.2]\n    at org.elasticsearch.action.index.IndexResponse.&lt;init&gt;(IndexResponse.java:28) ~[elasticsearch-7.15.2.jar:7.15.2]\n    at org.elasticsearch.action.index.IndexResponse$Builder.build(IndexResponse.java:96) ~[elasticsearch-7.15.2.jar:7.15.2]\n    at org.elasticsearch.action.index.IndexResponse.fromXContent(IndexResponse.java:78) ~[elasticsearch-7.15.2.jar:7.15.2]\n    at org.elasticsearch.client.RestHighLevelClient.parseEntity(RestHighLevelClient.java:2011) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\n    at org.elasticsearch.client.RestHighLevelClient.lambda$performRequestAndParseEntity$8(RestHighLevelClient.java:1673) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\n    at org.elasticsearch.client.RestHighLevelClient.internalPerformRequest(RestHighLevelClient.java:1749) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\n    ... 55 common frames omitted\n\n</code></pre>\n"},{"tags":["java","java-io","intellij-14"],"owner":{"account_id":26934922,"reputation":15,"user_id":20506688,"display_name":"Nicolas_Arias3142"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1700767069,"answer_count":0,"score":0,"last_activity_date":1700765071,"creation_date":1700765071,"question_id":77539085,"body_markdown":"I want to let the user input the file name, and be able to read through that file. I then get the error that the file is not found. The file is in the same module, and I want it to work without having to specify the absolute path.\r\nI am using Intellij. \r\n\r\n\r\n\r\nThis is what I want, but I get a FileNotFoundException.\r\n```\r\nFile dataFile = new File(&quot;lottacash.csv&quot;);\r\n```\r\nThis is the way I got it to work.\r\n\r\n```\r\nFile dataFile = new File(&quot;C:\\\\FolderWithModuels\\\\ModuelProject\\\\&quot;+ &quot;lottacash.csv&quot;);\r\n```\r\n","title":"Creating a file object only works when I use an absolute path","body":"<p>I want to let the user input the file name, and be able to read through that file. I then get the error that the file is not found. The file is in the same module, and I want it to work without having to specify the absolute path.\nI am using Intellij.</p>\n<p>This is what I want, but I get a FileNotFoundException.</p>\n<pre><code>File dataFile = new File(&quot;lottacash.csv&quot;);\n</code></pre>\n<p>This is the way I got it to work.</p>\n<pre><code>File dataFile = new File(&quot;C:\\\\FolderWithModuels\\\\ModuelProject\\\\&quot;+ &quot;lottacash.csv&quot;);\n</code></pre>\n"},{"tags":["java","spring","spring-boot","thymeleaf"],"comments":[{"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"score":0,"creation_date":1645006194,"post_id":71139586,"comment_id":125753530,"body_markdown":"you probably loose your modal values on redirect. I don&#39;t remember exactly how it is in thymleaf but I am guessing it doesnt persist between requests","body":"you probably loose your modal values on redirect. I don&#39;t remember exactly how it is in thymleaf but I am guessing it doesnt persist between requests"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1645006233,"post_id":71139586,"comment_id":125753552,"body_markdown":"Don&#39;t add the `order` to the model, it is already part of it.","body":"Don&#39;t add the <code>order</code> to the model, it is already part of it."},{"owner":{"display_name":"user16722881"},"score":0,"creation_date":1645006333,"post_id":71139586,"comment_id":125753591,"body_markdown":"@JAsgarov the problem is that I am not redirecting, I trigger my bindingresults to fail with an empty field and it just does what is stated in the first if - returns the page filled with modal attributes.","body":"@JAsgarov the problem is that I am not redirecting, I trigger my bindingresults to fail with an empty field and it just does what is stated in the first if - returns the page filled with modal attributes."},{"owner":{"display_name":"user16722881"},"score":0,"creation_date":1645007337,"post_id":71139586,"comment_id":125753993,"body_markdown":"@M.Deinum thank you, it seems like this has something to do with adding new Order. The problem is that I have a form with `th:object=&quot;${order}&quot;` and it gives me an exception \n` Caused by: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;order&#39; available as request attribute`\nIf I don&#39;t add it","body":"@M.Deinum thank you, it seems like this has something to do with adding new Order. The problem is that I have a form with <code>th:object=&quot;${order}&quot;</code> and it gives me an exception  ` Caused by: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;order&#39; available as request attribute` If I don&#39;t add it"},{"owner":{"display_name":"user16722881"},"score":0,"creation_date":1645007525,"post_id":71139586,"comment_id":125754055,"body_markdown":"@M.Deinum the exception was fixed. God bless you!","body":"@M.Deinum the exception was fixed. God bless you!"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1645007823,"post_id":71139586,"comment_id":125754155,"body_markdown":"Due to the binding it is added automatically, you are replacing it with a new version which then invalidates the binding results as that was for a different object instance.","body":"Due to the binding it is added automatically, you are replacing it with a new version which then invalidates the binding results as that was for a different object instance."}],"answers":[{"tags":[],"owner":{"account_id":1813529,"reputation":1409,"user_id":1649124,"accept_rate":75,"display_name":"Peopleware"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700764732,"creation_date":1700764732,"answer_id":77539063,"question_id":71139586,"body_markdown":"The very same problem bothered me for a while and the solution is within the comments. So I&#39;d like to highlight it as an explicit fix.\r\n\r\nUser [M. Deinum][1] [wrote][2]:\r\n\r\n&gt; Don&#39;t add the order to the model, it is already part of it\r\n\r\nand\r\n\r\n&gt; Due to the binding it is added automatically, you are replacing it with a new version which then invalidates the binding results as that was for a different object instance\r\n\r\nIn my case I initialize a couple of model attributes and wrote a method to do this for both the `Get-` and the `PostMapping`. I did not realize that in the `Post` case it overrides the already given model attribute.\r\n\r\nThanks to the eyes of an experienced Spring user!\r\n\r\n  [1]: https://stackoverflow.com/users/2696260/m-deinum\r\n  [2]: https://stackoverflow.com/questions/71139586/bindingresult-does-not-work-thymeleaf-cant-see-it#comment125753552_71139586","title":"BindingResult does not work, thymeleaf can&#39;t see it","body":"<p>The very same problem bothered me for a while and the solution is within the comments. So I'd like to highlight it as an explicit fix.</p>\n<p>User <a href=\"https://stackoverflow.com/users/2696260/m-deinum\">M. Deinum</a> <a href=\"https://stackoverflow.com/questions/71139586/bindingresult-does-not-work-thymeleaf-cant-see-it#comment125753552_71139586\">wrote</a>:</p>\n<blockquote>\n<p>Don't add the order to the model, it is already part of it</p>\n</blockquote>\n<p>and</p>\n<blockquote>\n<p>Due to the binding it is added automatically, you are replacing it with a new version which then invalidates the binding results as that was for a different object instance</p>\n</blockquote>\n<p>In my case I initialize a couple of model attributes and wrote a method to do this for both the <code>Get-</code> and the <code>PostMapping</code>. I did not realize that in the <code>Post</code> case it overrides the already given model attribute.</p>\n<p>Thanks to the eyes of an experienced Spring user!</p>\n"}],"owner":{"display_name":"user16722881"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":568,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700764732,"creation_date":1645005250,"question_id":71139586,"body_markdown":"I have this method\r\n\r\n        @PostMapping\r\n    public String saveOrder(@Valid @ModelAttribute OrderCreationDto order,\r\n                            BindingResult bindingResult,\r\n                            @AuthenticationPrincipal AuthenticatedUser authenticatedUser,\r\n                            Model model) {\r\n        System.out.println(&quot;BINDING &quot; + bindingResult);\r\n\r\n        if (bindingResult.hasErrors()) {\r\n            fillMenuModelWithData(model);\r\n            return &quot;menu&quot;;\r\n        }\r\n\r\n\r\n        try {\r\n            orderService.saveOrder(order, authenticatedUser);\r\n        } catch (InsufficientFundsException e) {\r\n            log.debug(e.toString());\r\n            fillMenuModelWithData(model);\r\n            return &quot;menu&quot;;\r\n        }\r\n        return &quot;redirect:/orders/history&quot;;\r\n    }\r\n\r\nAnd this helper method just to fill models with needed attributes\r\n\r\n        private void fillMenuModelWithData(Model model) {\r\n        model.addAttribute(&quot;sortField&quot;, DEFAULT_SORT_FIELD);\r\n        model.addAttribute(&quot;sortDir&quot;, DEFAULT_SORT_DIR);\r\n        model.addAttribute(&quot;filterCategory&quot;, DEFAULT_CATEGRY);\r\n        model.addAttribute(&quot;pageSize&quot;, DEFAULT_PAGE_SIZE);\r\n        model.addAttribute(&quot;filterCategory&quot;, DEFAULT_CATEGRY);\r\n        model.addAttribute(&quot;order&quot;, new OrderCreationDto());\r\n        model.addAttribute(&quot;dishList&quot;, dishService.findAllDishesSorted(\r\n                DEFAULT_SORT_FIELD, DEFAULT_SORT_DIR));\r\n    }\r\n\r\nAs you can see, I print to console with `System.out.println` my BindingResult and it looks like this.\r\n\r\n&gt; BINDING org.springframework.validation.BeanPropertyBindingResult: 2\r\n&gt; errors \r\n\r\n&gt; Field error in object &#39;orderCreationDto&#39; on field &#39;address&#39;:\r\n&gt; rejected value [ ]; codes\r\n&gt; [NotBlank.orderCreationDto.address,NotBlank.address,NotBlank.java.lang.String,NotBlank];\r\n&gt; arguments\r\n&gt; [org.springframework.context.support.DefaultMessageSourceResolvable:\r\n&gt; codes [orderCreationDto.address,address]; arguments []; default\r\n&gt; message [address]]; default message [Address cannot be empty]\r\n&gt; \r\n&gt; Field error in object &#39;orderCreationDto&#39; on field &#39;dishIdQuantityMap&#39;:\r\n&gt; rejected value [{752=0, 952=0}]; codes\r\n&gt; [HasOrder.orderCreationDto.dishIdQuantityMap,HasOrder.dishIdQuantityMap,HasOrder.java.util.Map,HasOrder];\r\n&gt; arguments\r\n&gt; [org.springframework.context.support.DefaultMessageSourceResolvable:\r\n&gt; codes [orderCreationDto.dishIdQuantityMap,dishIdQuantityMap];\r\n&gt; arguments []; default message [dishIdQuantityMap]]; default message\r\n&gt; [Order does not contain any Dishes]\r\n\r\n\r\nSeems like everything ok, let&#39;s see if we have any erros on `menu` page.\r\n\r\n                   &lt;p th:text=&quot;${#fields.errors()}&quot;&gt;&lt;/p&gt;\r\n                &lt;p th:text=&quot;${#fields.hasAnyErrors()}&quot;&gt;&lt;/p&gt;\r\n\r\nAnd we see nothing\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ytk2M.png\r\nI&#39;ve tried to debug this on my own for the whole night, need your help a lot!\r\n\r\n\r\n\r\nUPD:\r\n\r\n\r\nHere is the error I get skip adding new Order in Post method   \r\n\r\n     Caused by: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;order&#39; available as request attribute\r\n\r\n","title":"BindingResult does not work, thymeleaf can&#39;t see it","body":"<p>I have this method</p>\n<pre><code>    @PostMapping\npublic String saveOrder(@Valid @ModelAttribute OrderCreationDto order,\n                        BindingResult bindingResult,\n                        @AuthenticationPrincipal AuthenticatedUser authenticatedUser,\n                        Model model) {\n    System.out.println(&quot;BINDING &quot; + bindingResult);\n\n    if (bindingResult.hasErrors()) {\n        fillMenuModelWithData(model);\n        return &quot;menu&quot;;\n    }\n\n\n    try {\n        orderService.saveOrder(order, authenticatedUser);\n    } catch (InsufficientFundsException e) {\n        log.debug(e.toString());\n        fillMenuModelWithData(model);\n        return &quot;menu&quot;;\n    }\n    return &quot;redirect:/orders/history&quot;;\n}\n</code></pre>\n<p>And this helper method just to fill models with needed attributes</p>\n<pre><code>    private void fillMenuModelWithData(Model model) {\n    model.addAttribute(&quot;sortField&quot;, DEFAULT_SORT_FIELD);\n    model.addAttribute(&quot;sortDir&quot;, DEFAULT_SORT_DIR);\n    model.addAttribute(&quot;filterCategory&quot;, DEFAULT_CATEGRY);\n    model.addAttribute(&quot;pageSize&quot;, DEFAULT_PAGE_SIZE);\n    model.addAttribute(&quot;filterCategory&quot;, DEFAULT_CATEGRY);\n    model.addAttribute(&quot;order&quot;, new OrderCreationDto());\n    model.addAttribute(&quot;dishList&quot;, dishService.findAllDishesSorted(\n            DEFAULT_SORT_FIELD, DEFAULT_SORT_DIR));\n}\n</code></pre>\n<p>As you can see, I print to console with <code>System.out.println</code> my BindingResult and it looks like this.</p>\n<blockquote>\n<p>BINDING org.springframework.validation.BeanPropertyBindingResult: 2\nerrors</p>\n</blockquote>\n<blockquote>\n<p>Field error in object 'orderCreationDto' on field 'address':\nrejected value [ ]; codes\n[NotBlank.orderCreationDto.address,NotBlank.address,NotBlank.java.lang.String,NotBlank];\narguments\n[org.springframework.context.support.DefaultMessageSourceResolvable:\ncodes [orderCreationDto.address,address]; arguments []; default\nmessage [address]]; default message [Address cannot be empty]</p>\n<p>Field error in object 'orderCreationDto' on field 'dishIdQuantityMap':\nrejected value [{752=0, 952=0}]; codes\n[HasOrder.orderCreationDto.dishIdQuantityMap,HasOrder.dishIdQuantityMap,HasOrder.java.util.Map,HasOrder];\narguments\n[org.springframework.context.support.DefaultMessageSourceResolvable:\ncodes [orderCreationDto.dishIdQuantityMap,dishIdQuantityMap];\narguments []; default message [dishIdQuantityMap]]; default message\n[Order does not contain any Dishes]</p>\n</blockquote>\n<p>Seems like everything ok, let's see if we have any erros on <code>menu</code> page.</p>\n<pre><code>               &lt;p th:text=&quot;${#fields.errors()}&quot;&gt;&lt;/p&gt;\n            &lt;p th:text=&quot;${#fields.hasAnyErrors()}&quot;&gt;&lt;/p&gt;\n</code></pre>\n<p>And we see nothing</p>\n<p><a href=\"https://i.stack.imgur.com/ytk2M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ytk2M.png\" alt=\"enter image description here\" /></a></p>\n<p>I've tried to debug this on my own for the whole night, need your help a lot!</p>\n<p>UPD:</p>\n<p>Here is the error I get skip adding new Order in Post method</p>\n<pre><code> Caused by: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'order' available as request attribute\n</code></pre>\n"},{"tags":["java","opencv","image-processing"],"answers":[{"comments":[{"owner":{"account_id":1606260,"reputation":170,"user_id":1486312,"accept_rate":50,"display_name":"shadee"},"score":0,"creation_date":1402482366,"post_id":24127841,"comment_id":37286889,"body_markdown":"Does this automatically update the original image :( I tried this but nothing will change in original image it will only update the submat that we extract from the original ..\nAny way thank you for the help","body":"Does this automatically update the original image :( I tried this but nothing will change in original image it will only update the submat that we extract from the original .. Any way thank you for the help"},{"owner":{"account_id":3487243,"reputation":971,"user_id":2917835,"accept_rate":79,"display_name":"medloh"},"score":0,"creation_date":1402507644,"post_id":24127841,"comment_id":37303376,"body_markdown":"It should update the original.  Are you sure you aren&#39;t first making a copy of the submat and then copying to the copy?","body":"It should update the original.  Are you sure you aren&#39;t first making a copy of the submat and then copying to the copy?"},{"owner":{"account_id":1606260,"reputation":170,"user_id":1486312,"accept_rate":50,"display_name":"shadee"},"score":0,"creation_date":1402639138,"post_id":24127841,"comment_id":37359183,"body_markdown":"I just wrote a small method using Java to update a part of an image. Is it because of Java?  \nHere is my method  \n  `public void ChangeImage(Mat src, Mat small, Rect roi){\n\t\t\n        Mat subView =src.submat(roi);  \t\t\n       small.copyTo(subView);  \n       Highgui.imwrite(&quot;combined-image.png&quot;, src);  \n\t} `","body":"I just wrote a small method using Java to update a part of an image. Is it because of Java?   Here is my method     <code>public void ChangeImage(Mat src, Mat small, Rect roi){ \t\t         Mat subView =src.submat(roi);  \t\t        small.copyTo(subView);          Highgui.imwrite(&quot;combined-image.png&quot;, src);   \t} </code>"},{"owner":{"account_id":3487243,"reputation":971,"user_id":2917835,"accept_rate":79,"display_name":"medloh"},"score":0,"creation_date":1402934343,"post_id":24127841,"comment_id":37453115,"body_markdown":"Your code works for me on OpenCV 2.4.9.  Are you sure you&#39;re setting the right values for Rect roi?  Here&#39;s how I created roi in my test:       Rect rect = new Rect(20, 20, small.cols(), small.rows());  Not sure how much Java you&#39;ve done, but I&#39;d also suggest using Java conventions and naming your methods in lowercase:  changeImage(...)","body":"Your code works for me on OpenCV 2.4.9.  Are you sure you&#39;re setting the right values for Rect roi?  Here&#39;s how I created roi in my test:       Rect rect = new Rect(20, 20, small.cols(), small.rows());  Not sure how much Java you&#39;ve done, but I&#39;d also suggest using Java conventions and naming your methods in lowercase:  changeImage(...)"},{"owner":{"account_id":2835471,"reputation":19608,"user_id":2436175,"accept_rate":81,"display_name":"Antonio"},"score":0,"creation_date":1428672272,"post_id":24127841,"comment_id":47274860,"body_markdown":"Sorry, I did some wrong editing and rolled it back, I had missed this was Java, that has no operator overloading :)","body":"Sorry, I did some wrong editing and rolled it back, I had missed this was Java, that has no operator overloading :)"},{"owner":{"account_id":2718491,"reputation":459,"user_id":2345297,"accept_rate":68,"display_name":"Matwosk"},"score":0,"creation_date":1462133043,"post_id":24127841,"comment_id":61498198,"body_markdown":"I had a huge troubles with small.copyTo(large, mask); I think there is  some bug in openCV 2.4.12. However small.copy(mask); works like charm!!!","body":"I had a huge troubles with small.copyTo(large, mask); I think there is  some bug in openCV 2.4.12. However small.copy(mask); works like charm!!!"}],"tags":[],"owner":{"account_id":3487243,"reputation":971,"user_id":2917835,"accept_rate":79,"display_name":"medloh"},"comment_count":6,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1428672233,"creation_date":1402343331,"answer_id":24127841,"question_id":24127138,"body_markdown":"Here&#39;s a way, not claiming its the best way.  \r\n\r\n    Mat m = ... // your smaller mat\r\n    Mat submat= matOrig.submat(new Rect(x,y, m.cols(), m.rows()) );\r\n    m.copyTo(submat);\r\n\r\nThat should work assuming m doesn&#39;t go out of bounds inside matOrig.  When you get a submat, it is still linked to its source Mat.\r\n","title":"How to replace a rectangular region of Mat image","body":"<p>Here's a way, not claiming its the best way.  </p>\n\n<pre><code>Mat m = ... // your smaller mat\nMat submat= matOrig.submat(new Rect(x,y, m.cols(), m.rows()) );\nm.copyTo(submat);\n</code></pre>\n\n<p>That should work assuming m doesn't go out of bounds inside matOrig.  When you get a submat, it is still linked to its source Mat.</p>\n"},{"tags":[],"owner":{"account_id":14559403,"reputation":1,"user_id":10515925,"display_name":"Siyan Ding"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1541436488,"creation_date":1541435064,"answer_id":53158328,"question_id":24127138,"body_markdown":" This is my code:\r\n \r\n    Mat m = new Mat(originalImg,new Rect(x,y,w, h));\r\n    double[] size = {w, h};\r\n    Imgproc.resize(logo,logo,new Size(size));// make sure your logo is the same size with your roi\r\n    Imgproc.cvtColor(logo, logo, Imgproc.COLOR_RGBA2RGB);//make sure your logo has the same channel with your dst img\r\n    congrats.copyTo(m);","title":"How to replace a rectangular region of Mat image","body":"<p>This is my code:</p>\n\n<pre><code>Mat m = new Mat(originalImg,new Rect(x,y,w, h));\ndouble[] size = {w, h};\nImgproc.resize(logo,logo,new Size(size));// make sure your logo is the same size with your roi\nImgproc.cvtColor(logo, logo, Imgproc.COLOR_RGBA2RGB);//make sure your logo has the same channel with your dst img\ncongrats.copyTo(m);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":426556,"reputation":934,"user_id":807828,"accept_rate":93,"display_name":"vextorspace"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700764561,"creation_date":1700764561,"answer_id":77539055,"question_id":24127138,"body_markdown":"Here is my kotlin code for this:\r\n\r\n    \r\n        val shifted = Mat.zeros(image.size(), image.type())\r\n        val copiedSize = Size(image.width() - abs(pixelOffset.x), image.height() - abs(pixelOffset.y))\r\n\r\n        val fromStartPoint = Point()\r\n        val toStartPoint = pixelOffset.clone()\r\n\r\n        val fromRect = Rect(fromStartPoint, copiedSize)\r\n        val toRect = Rect(toStartPoint, copiedSize)\r\n        image.submat(fromRect).copyTo(shifted.submat(toRect))\r\n        return shifted","title":"How to replace a rectangular region of Mat image","body":"<p>Here is my kotlin code for this:</p>\n<pre><code>    val shifted = Mat.zeros(image.size(), image.type())\n    val copiedSize = Size(image.width() - abs(pixelOffset.x), image.height() - abs(pixelOffset.y))\n\n    val fromStartPoint = Point()\n    val toStartPoint = pixelOffset.clone()\n\n    val fromRect = Rect(fromStartPoint, copiedSize)\n    val toRect = Rect(toStartPoint, copiedSize)\n    image.submat(fromRect).copyTo(shifted.submat(toRect))\n    return shifted\n</code></pre>\n"}],"owner":{"account_id":1606260,"reputation":170,"user_id":1486312,"accept_rate":50,"display_name":"shadee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4982,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1700764561,"creation_date":1402340674,"question_id":24127138,"body_markdown":"I am working with opencv image processing library. I just want to replace rectangular region(smaller than the original image) of my original Mat image with another small image. I couldn&#39;t find a direction to do this\r\n\r\nCan anybody help me please. Thanks in advance\r\n","title":"How to replace a rectangular region of Mat image","body":"<p>I am working with opencv image processing library. I just want to replace rectangular region(smaller than the original image) of my original Mat image with another small image. I couldn't find a direction to do this</p>\n\n<p>Can anybody help me please. Thanks in advance</p>\n"},{"tags":["java","java-17"],"answers":[{"comments":[{"owner":{"account_id":24503923,"reputation":47,"user_id":18419195,"display_name":"StarMcSnow"},"score":0,"creation_date":1701257341,"post_id":77538254,"comment_id":136752513,"body_markdown":"Thank you for input, buy I cant change ClassB, ClassC","body":"Thank you for input, buy I cant change ClassB, ClassC"}],"tags":[],"owner":{"account_id":1023013,"reputation":16655,"user_id":1032890,"accept_rate":100,"display_name":"GeertPt"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700755465,"creation_date":1700755465,"answer_id":77538254,"question_id":77538165,"body_markdown":"That&#39;s what interfaces are for, no?\r\n\r\n    public interface Dated {\r\n      LocalDate getDate();\r\n    } \r\n\r\n    public class ClassB implements Dated {\r\n      ...\r\n    }\r\n\r\n    public class ClassC implements Dated {\r\n      ...\r\n    }\r\n\r\nAnd for the setter, you can use `instanceOf`.\r\n\r\n    public void mapClassBToClassA(List&lt;? extends Dated&gt; b, List&lt;ClassA&gt; a){\r\n       Comparator&lt;Dated&gt; sortFunc = Comparator.comparing(Dated::getDate);\r\n       Collections.sort(b, sortFunc);\r\n       for (ClassA aObj : a){\r\n          LocalDate dateA = aObj.getDate();\r\n          Dated datedToUse = null;\r\n          for (Dated bObj : b){\r\n             LocalDate dateB = bObj.getDate();\r\n             if (dateB.isAfter(dateA)){\r\n                break;\r\n             }\r\n             else {\r\n                datedToUse = bObj; \r\n             } \r\n          }\r\n          if (datedToUse instanceOf ClassB bObjToUse) {\r\n             aObj.setClassB(bObjToUse);\r\n          }\r\n          else if (datedToUse instanceOf ClassC cObjToUse) {\r\n             aObj.setClassC(cObjToUse);\r\n          }\r\n       }\r\n    }","title":"How to make these two methods one?","body":"<p>That's what interfaces are for, no?</p>\n<pre><code>public interface Dated {\n  LocalDate getDate();\n} \n\npublic class ClassB implements Dated {\n  ...\n}\n\npublic class ClassC implements Dated {\n  ...\n}\n</code></pre>\n<p>And for the setter, you can use <code>instanceOf</code>.</p>\n<pre><code>public void mapClassBToClassA(List&lt;? extends Dated&gt; b, List&lt;ClassA&gt; a){\n   Comparator&lt;Dated&gt; sortFunc = Comparator.comparing(Dated::getDate);\n   Collections.sort(b, sortFunc);\n   for (ClassA aObj : a){\n      LocalDate dateA = aObj.getDate();\n      Dated datedToUse = null;\n      for (Dated bObj : b){\n         LocalDate dateB = bObj.getDate();\n         if (dateB.isAfter(dateA)){\n            break;\n         }\n         else {\n            datedToUse = bObj; \n         } \n      }\n      if (datedToUse instanceOf ClassB bObjToUse) {\n         aObj.setClassB(bObjToUse);\n      }\n      else if (datedToUse instanceOf ClassC cObjToUse) {\n         aObj.setClassC(cObjToUse);\n      }\n   }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1700764635,"post_id":77539052,"comment_id":136697184,"body_markdown":"You&#39;ll get N log(N) complexity because that&#39;s the complexity of sorting.","body":"You&#39;ll get N log(N) complexity because that&#39;s the complexity of sorting."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1700764875,"post_id":77539052,"comment_id":136697209,"body_markdown":"Storing the Bs and Cs in a `TreeMap` and then calling `floorEntry` will give N log(N) as well. First N log(N) to create the `TreeMap`, then N (loop over A) times log(N) (getting the floor entry) for finding the matching B or C instance. `floorEntry` will be useful here because it returns the entry with the largest key that&#39;s not larger than the input - just what the current loop is finding.","body":"Storing the Bs and Cs in a <code>TreeMap</code> and then calling <code>floorEntry</code> will give N log(N) as well. First N log(N) to create the <code>TreeMap</code>, then N (loop over A) times log(N) (getting the floor entry) for finding the matching B or C instance. <code>floorEntry</code> will be useful here because it returns the entry with the largest key that&#39;s not larger than the input - just what the current loop is finding."},{"owner":{"account_id":17353823,"reputation":67,"user_id":12571723,"display_name":"Talavera316"},"score":0,"creation_date":1700864441,"post_id":77539052,"comment_id":136708775,"body_markdown":"@RobSpoor\nI think your calculation of the (time) complexity for the presented algorithm (+ sorting &amp;&amp; delooping on list B) is wrong. \n\nThe error is in the &quot;Delta&quot; - input increase.  \nYou calculated the complexity only for A list, but that is not the total increment of the input as the input for the algorithm is A and B. \nIf you calculate the complexity for &quot;Deltas&quot; A and B you will see that sorting A and delooping B is always better than TreeMap&#39;s floorEntry.","body":"@RobSpoor I think your calculation of the (time) complexity for the presented algorithm (+ sorting &amp;&amp; delooping on list B) is wrong.   The error is in the &quot;Delta&quot; - input increase.   You calculated the complexity only for A list, but that is not the total increment of the input as the input for the algorithm is A and B.  If you calculate the complexity for &quot;Deltas&quot; A and B you will see that sorting A and delooping B is always better than TreeMap&#39;s floorEntry."},{"owner":{"account_id":17353823,"reputation":67,"user_id":12571723,"display_name":"Talavera316"},"score":0,"creation_date":1700870372,"post_id":77539052,"comment_id":136709149,"body_markdown":"@RobSpoor If you are not convinced with &quot;Delta&quot;-based complexity proof let me present such a reasoning:  For sorting (me) and creating TreeMap (you) we both need  &quot;n log n&quot; complexity. So far we are set. But later - my algorithm is linear, I need 2 pointers to iterate the 2 tables only once. I have no best, no average, no worst cases. And what you have? In the best case you have what I have i.e. your floorEntry gets at the first fetch in the tree, but in the avg and worst cases deeper tree levels must be visited: n log n.   So your algorithm meets mine only in the best case.","body":"@RobSpoor If you are not convinced with &quot;Delta&quot;-based complexity proof let me present such a reasoning:  For sorting (me) and creating TreeMap (you) we both need  &quot;n log n&quot; complexity. So far we are set. But later - my algorithm is linear, I need 2 pointers to iterate the 2 tables only once. I have no best, no average, no worst cases. And what you have? In the best case you have what I have i.e. your floorEntry gets at the first fetch in the tree, but in the avg and worst cases deeper tree levels must be visited: n log n.   So your algorithm meets mine only in the best case."},{"owner":{"account_id":17353823,"reputation":67,"user_id":12571723,"display_name":"Talavera316"},"score":0,"creation_date":1700871337,"post_id":77539052,"comment_id":136709236,"body_markdown":"Notabene the best case is absolutely trivial - the median date of the B list must be the closest date &quot;after&quot; for all A dates.","body":"Notabene the best case is absolutely trivial - the median date of the B list must be the closest date &quot;after&quot; for all A dates."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1701085577,"post_id":77539052,"comment_id":136727108,"body_markdown":"Sorting a list or using a `TreeMap` both have the same time complexity but this demonstrates that time complexity is not the complete answer. Sorting an `ArrayList` with the reference implementation has a best case of *n* while populating a `TreeMap` is always *n log n*. Then, `TreeMap` creates a node object for each element behind the scenes, which has to be initialized and traversed unlike the flat array of an `ArrayList`. But note that you can simply replace the inner loop with `Collections.binarySearch` to get rid of the quadratic time complexity, without sorting the other list.","body":"Sorting a list or using a <code>TreeMap</code> both have the same time complexity but this demonstrates that time complexity is not the complete answer. Sorting an <code>ArrayList</code> with the reference implementation has a best case of <i>n</i> while populating a <code>TreeMap</code> is always <i>n log n</i>. Then, <code>TreeMap</code> creates a node object for each element behind the scenes, which has to be initialized and traversed unlike the flat array of an <code>ArrayList</code>. But note that you can simply replace the inner loop with <code>Collections.binarySearch</code> to get rid of the quadratic time complexity, without sorting the other list."},{"owner":{"account_id":17353823,"reputation":67,"user_id":12571723,"display_name":"Talavera316"},"score":0,"creation_date":1701180662,"post_id":77539052,"comment_id":136741383,"body_markdown":"@Holger \nCollections.binarySearch makes no sense, because to use it you must have the B list sorted.\nBut if you have the B list sorted you can just keep track of the pointers of both sorted lists: A nad B going forward, no binary search is needed.  BTW binarySearch is n log n, the same complexity like creating balanced binary tree.","body":"@Holger  Collections.binarySearch makes no sense, because to use it you must have the B list sorted. But if you have the B list sorted you can just keep track of the pointers of both sorted lists: A nad B going forward, no binary search is needed.  BTW binarySearch is n log n, the same complexity like creating balanced binary tree."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1701188427,"post_id":77539052,"comment_id":136743026,"body_markdown":"@Talavera316 the B list *is* already sorted in the original code, unlike list A. So you can replace the inner loop with binary search without the need to touch anything else, most notably without adding a sort operation for list A. I didn’t dismiss your idea, but it’s a significant change while it’s not predictable whether it will pay off—too little information about the real case has been given. Both alternatives get rid of the quadratic time complexity that’s all that can be said.","body":"@Talavera316 the B list <i>is</i> already sorted in the original code, unlike list A. So you can replace the inner loop with binary search without the need to touch anything else, most notably without adding a sort operation for list A. I didn’t dismiss your idea, but it’s a significant change while it’s not predictable whether it will pay off—too little information about the real case has been given. Both alternatives get rid of the quadratic time complexity that’s all that can be said."}],"tags":[],"owner":{"account_id":17353823,"reputation":67,"user_id":12571723,"display_name":"Talavera316"},"comment_count":8,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1700764543,"creation_date":1700764543,"answer_id":77539052,"question_id":77538165,"body_markdown":"If you are interested in performance, first of all you should also sort the A (the second) list.\r\n\r\nWhen you find the closest younger (dateToUse) in the B list (the first list) then for the next item from A list you can start the B list looping from that point. \r\n\r\nSorting both lists you will get N (linear) complexity instead of N^2 that you have now.  \r\n","title":"How to make these two methods one?","body":"<p>If you are interested in performance, first of all you should also sort the A (the second) list.</p>\n<p>When you find the closest younger (dateToUse) in the B list (the first list) then for the next item from A list you can start the B list looping from that point.</p>\n<p>Sorting both lists you will get N (linear) complexity instead of N^2 that you have now.</p>\n"},{"comments":[{"owner":{"account_id":17353823,"reputation":67,"user_id":12571723,"display_name":"Talavera316"},"score":0,"creation_date":1700871834,"post_id":77539054,"comment_id":136709268,"body_markdown":"Greet&#39;s base &quot;Dated&quot; interface solution is nice, but yours is more elegant imo. Extracting the 2 functions to be parameters makes it really flexible.","body":"Greet&#39;s base &quot;Dated&quot; interface solution is nice, but yours is more elegant imo. Extracting the 2 functions to be parameters makes it really flexible."},{"owner":{"account_id":24503923,"reputation":47,"user_id":18419195,"display_name":"StarMcSnow"},"score":0,"creation_date":1701257190,"post_id":77539054,"comment_id":136752481,"body_markdown":"Thank you!!!! This is great!\nI cant add a common interface.","body":"Thank you!!!! This is great! I cant add a common interface."}],"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1700764555,"creation_date":1700764555,"answer_id":77539054,"question_id":77538165,"body_markdown":"If you can&#39;t add a common interface to these classes you can add some functions to the method parameters:\r\n```java\r\npublic &lt;T&gt; void mapClassToClassA(List&lt;T&gt; t, List&lt;ClassA&gt; a,\r\n                                 Function&lt;T, LocalDate&gt; dateGetter,\r\n                                 BiConsumer&lt;ClassA, T&gt; setter) {\r\n\r\n    Comparator&lt;T&gt; sortFunc = Comparator.comparing(dateGetter);\r\n    Collections.sort(t, sortFunc);\r\n    for (ClassA aObj : a) {\r\n        LocalDate dateA = aObj.getDate();\r\n        T tToUse = null;\r\n        for (T tObj : t){\r\n            LocalDate dateT = dateGetter.apply(tObj);\r\n            if (dateT.isAfter(dateA)){\r\n                break;\r\n            }\r\n            tToUse = tObj; \r\n        }\r\n        setter.accept(aObj, tObjToUse);\r\n    }\r\n}\r\n```\r\nCall as follows:\r\n```java\r\nmapClassToClassA(b, a, ClassB::getDate, ClassA::setClassB);\r\nmapClassToClassA(c, a, ClassC::getDate, ClassA::setClassC);\r\n```","title":"How to make these two methods one?","body":"<p>If you can't add a common interface to these classes you can add some functions to the method parameters:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public &lt;T&gt; void mapClassToClassA(List&lt;T&gt; t, List&lt;ClassA&gt; a,\n                                 Function&lt;T, LocalDate&gt; dateGetter,\n                                 BiConsumer&lt;ClassA, T&gt; setter) {\n\n    Comparator&lt;T&gt; sortFunc = Comparator.comparing(dateGetter);\n    Collections.sort(t, sortFunc);\n    for (ClassA aObj : a) {\n        LocalDate dateA = aObj.getDate();\n        T tToUse = null;\n        for (T tObj : t){\n            LocalDate dateT = dateGetter.apply(tObj);\n            if (dateT.isAfter(dateA)){\n                break;\n            }\n            tToUse = tObj; \n        }\n        setter.accept(aObj, tObjToUse);\n    }\n}\n</code></pre>\n<p>Call as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>mapClassToClassA(b, a, ClassB::getDate, ClassA::setClassB);\nmapClassToClassA(c, a, ClassC::getDate, ClassA::setClassC);\n</code></pre>\n"}],"owner":{"account_id":24503923,"reputation":47,"user_id":18419195,"display_name":"StarMcSnow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77539054,"answer_count":3,"score":2,"last_activity_date":1700764555,"creation_date":1700754585,"question_id":77538165,"body_markdown":"I have two methods that are very similar. So I want to reduce this to one method, but I don&#39;t know how to do it.\r\n\r\nUsed like this:\r\n```\r\nmapClassBToClassA(&quot;a list o ClassB objs&quot;, &quot;a list of ClassA objs&quot;);\r\nmapClassCToClassA(&quot;a list o ClassC objs&quot;, &quot;a list of ClassA objs&quot;);\r\n```\r\nI want to change to:\r\n```\r\nmapClassToClassA(&quot;a list o ClassB objs&quot;, &quot;a list of ClassA objs&quot;);\r\nmapClassToClassA(&quot;a list o ClassC objs&quot;, &quot;a list of ClassA objs&quot;);\r\n```\r\n\r\nMethod ONE B =&gt; A\r\n```\r\npublic void mapClassBToClassA(List&lt;ClassB&gt; b, List&lt;ClassA&gt; a){\r\n   Comparator&lt;ClassB&gt; sortFunc = Comparator.comparing(ClassB::getDate);\r\n   Collections.sort(b, sortFunc);\r\n   for (ClassA aObj : a){\r\n      LocalDate dateA = aObj.getDate();\r\n      ClassB bObjToUse = null;\r\n      for (ClassB bObj : b){\r\n         LocalDate dateB = bObj.getDate();\r\n         if (dateB.isAfter(dateA)){\r\n            break;\r\n         }\r\n         else {\r\n            bObjToUse = bObj; \r\n         } \r\n      }\r\n      if (bObjToUse != null){\r\n         aObj.setClassB(bObjToUse);\r\n      }\r\n   }\r\n}\r\n```\r\nMethod TWO C =&gt; A\r\n```\r\npublic void mapClassCToClassA(List&lt;ClassC&gt; c, List&lt;ClassA&gt; a){\r\n   Comparator&lt;ClassC&gt; sortFunc = Comparator.comparing(ClassC::getDate);\r\n   Collections.sort(c, sortFunc);\r\n   for (ClassA aObj : a){\r\n      LocalDate dateA = aObj.getDate();\r\n      ClassC cObjToUse = null;\r\n      for (ClassC cObj : c){\r\n         LocalDate dateC = cObj.getDate();\r\n         if (dateC.isAfter(dateA)){\r\n            break;\r\n         }\r\n         else {\r\n            cObjToUse = cObj; \r\n         } \r\n      }\r\n      if (cObjToUse != null){\r\n         aObj.setClassC(cObjToUse);\r\n      }\r\n   }\r\n}\r\n```\r\nI want to make some thing like:\r\n\r\n```\r\npublic void mapClassToClassA(List&lt; **xx** &gt; t, List&lt;ClassA&gt; a){\r\n   Comparator&lt; **xx** &gt; sortFunc = Comparator.comparing( **xx** ::getDate);\r\n   Collections.sort( t , sortFunc);\r\n   for (ClassA aObj : a){\r\n      LocalDate dateA = aObj.getDate();\r\n      **xx** objToUse = null;\r\n      for (**xx** obj : t){\r\n         LocalDate dateT = obj.getDate();\r\n         if (dateT.isAfter(dateA)){\r\n            break;\r\n         }\r\n         else {\r\n            objToUse = bObj; \r\n         } \r\n      }\r\n      if (objToUse != null){\r\n         aObj.setClassXXX(objToUse);\r\n      }\r\n   }\r\n}\r\n```\r\nI tried using generics \r\n```\r\npublic &lt;T&gt; void mapToArende(List&lt;T&gt; t, List&lt;ClassA&gt; a){\r\n        ...\r\n           T objToUse = null;\r\n```\r\n\r\nbut that way:\r\n- I can&#39;t do the comparator, since this does not work\r\n  ```\r\n  Comparator.comparing(T::getFromdat);\r\n  ```\r\n           \r\n- And not the call to obj.getDate(), here I found a solution using reflection, but people recommend not to do that. But it works. How should I do instead?\r\n  ```\r\n  Method m = obj.getClass().getMethod(&quot;getDate&quot;);\r\n  LocalDate dateT = (LocalDate) m.invoke(obj);\r\n  ```\r\n\r\n- I can&#39;t figure out how to make the call to aObj.setClassXXX() as the method name is different for classB &amp; classC \r\n\r\nI read about lambdas but have some trouble seeing how to do with those.","title":"How to make these two methods one?","body":"<p>I have two methods that are very similar. So I want to reduce this to one method, but I don't know how to do it.</p>\n<p>Used like this:</p>\n<pre><code>mapClassBToClassA(&quot;a list o ClassB objs&quot;, &quot;a list of ClassA objs&quot;);\nmapClassCToClassA(&quot;a list o ClassC objs&quot;, &quot;a list of ClassA objs&quot;);\n</code></pre>\n<p>I want to change to:</p>\n<pre><code>mapClassToClassA(&quot;a list o ClassB objs&quot;, &quot;a list of ClassA objs&quot;);\nmapClassToClassA(&quot;a list o ClassC objs&quot;, &quot;a list of ClassA objs&quot;);\n</code></pre>\n<p>Method ONE B =&gt; A</p>\n<pre><code>public void mapClassBToClassA(List&lt;ClassB&gt; b, List&lt;ClassA&gt; a){\n   Comparator&lt;ClassB&gt; sortFunc = Comparator.comparing(ClassB::getDate);\n   Collections.sort(b, sortFunc);\n   for (ClassA aObj : a){\n      LocalDate dateA = aObj.getDate();\n      ClassB bObjToUse = null;\n      for (ClassB bObj : b){\n         LocalDate dateB = bObj.getDate();\n         if (dateB.isAfter(dateA)){\n            break;\n         }\n         else {\n            bObjToUse = bObj; \n         } \n      }\n      if (bObjToUse != null){\n         aObj.setClassB(bObjToUse);\n      }\n   }\n}\n</code></pre>\n<p>Method TWO C =&gt; A</p>\n<pre><code>public void mapClassCToClassA(List&lt;ClassC&gt; c, List&lt;ClassA&gt; a){\n   Comparator&lt;ClassC&gt; sortFunc = Comparator.comparing(ClassC::getDate);\n   Collections.sort(c, sortFunc);\n   for (ClassA aObj : a){\n      LocalDate dateA = aObj.getDate();\n      ClassC cObjToUse = null;\n      for (ClassC cObj : c){\n         LocalDate dateC = cObj.getDate();\n         if (dateC.isAfter(dateA)){\n            break;\n         }\n         else {\n            cObjToUse = cObj; \n         } \n      }\n      if (cObjToUse != null){\n         aObj.setClassC(cObjToUse);\n      }\n   }\n}\n</code></pre>\n<p>I want to make some thing like:</p>\n<pre><code>public void mapClassToClassA(List&lt; **xx** &gt; t, List&lt;ClassA&gt; a){\n   Comparator&lt; **xx** &gt; sortFunc = Comparator.comparing( **xx** ::getDate);\n   Collections.sort( t , sortFunc);\n   for (ClassA aObj : a){\n      LocalDate dateA = aObj.getDate();\n      **xx** objToUse = null;\n      for (**xx** obj : t){\n         LocalDate dateT = obj.getDate();\n         if (dateT.isAfter(dateA)){\n            break;\n         }\n         else {\n            objToUse = bObj; \n         } \n      }\n      if (objToUse != null){\n         aObj.setClassXXX(objToUse);\n      }\n   }\n}\n</code></pre>\n<p>I tried using generics</p>\n<pre><code>public &lt;T&gt; void mapToArende(List&lt;T&gt; t, List&lt;ClassA&gt; a){\n        ...\n           T objToUse = null;\n</code></pre>\n<p>but that way:</p>\n<ul>\n<li><p>I can't do the comparator, since this does not work</p>\n<pre><code>Comparator.comparing(T::getFromdat);\n</code></pre>\n</li>\n<li><p>And not the call to obj.getDate(), here I found a solution using reflection, but people recommend not to do that. But it works. How should I do instead?</p>\n<pre><code>Method m = obj.getClass().getMethod(&quot;getDate&quot;);\nLocalDate dateT = (LocalDate) m.invoke(obj);\n</code></pre>\n</li>\n<li><p>I can't figure out how to make the call to aObj.setClassXXX() as the method name is different for classB &amp; classC</p>\n</li>\n</ul>\n<p>I read about lambdas but have some trouble seeing how to do with those.</p>\n"},{"tags":["java","android","google-maps","google-maps-android-api-2"],"comments":[{"owner":{"account_id":29776118,"reputation":269,"user_id":22820043,"display_name":"Cloverleaf"},"score":3,"creation_date":1700771651,"post_id":77539053,"comment_id":136698028,"body_markdown":"I have never heard of such a possibility (a) or (b). But you can solve the problem this way: Calculate the distance to the tip location for all **clickable** markers and choose the one with the shortest distance. If this distance is shorter than an accuracy tolerance, consider the corresponding marker as clicked.","body":"I have never heard of such a possibility (a) or (b). But you can solve the problem this way: Calculate the distance to the tip location for all <b>clickable</b> markers and choose the one with the shortest distance. If this distance is shorter than an accuracy tolerance, consider the corresponding marker as clicked."},{"owner":{"account_id":1601476,"reputation":547,"user_id":1482428,"accept_rate":18,"display_name":"Henrik Berg"},"score":0,"creation_date":1700993420,"post_id":77539053,"comment_id":136717874,"body_markdown":"Thanks for the suggestion, I ended up implementing something along those lines.","body":"Thanks for the suggestion, I ended up implementing something along those lines."}],"owner":{"account_id":1601476,"reputation":547,"user_id":1482428,"accept_rate":18,"display_name":"Henrik Berg"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1700764545,"creation_date":1700764545,"question_id":77539053,"body_markdown":"I am developing an Android app with a google map, which contain various markers. Some of these markers should be clickable, and it works nicely, using the `setOnMarkerClickListener` method on the `GoogleMap`-object. However, this does not allow me to select which markers are clickable. Of course, in the event handler, I can differentiate between the different markers, to see if the app should take any action or not. But if there are two markers partially overlapping each other in the map, the event handler will still only be called once for each click, alternating (it seems) between the two markers if I click several times.\r\n\r\nConsequently, the user will sometimes have to click several times in order to interact with the marker, this makes the app feel very unresponsive.\r\n\r\nIs there a way to either (a) tell the Google Maps API that a given marker (or set of markers) should not be clickable, or, maybe better, to (b) tell the API to fire the click event for EVERY marker clicked at once, rather than just one of them each time?","title":"How can I make only some markers clickable in Google map for Android?","body":"<p>I am developing an Android app with a google map, which contain various markers. Some of these markers should be clickable, and it works nicely, using the <code>setOnMarkerClickListener</code> method on the <code>GoogleMap</code>-object. However, this does not allow me to select which markers are clickable. Of course, in the event handler, I can differentiate between the different markers, to see if the app should take any action or not. But if there are two markers partially overlapping each other in the map, the event handler will still only be called once for each click, alternating (it seems) between the two markers if I click several times.</p>\n<p>Consequently, the user will sometimes have to click several times in order to interact with the marker, this makes the app feel very unresponsive.</p>\n<p>Is there a way to either (a) tell the Google Maps API that a given marker (or set of markers) should not be clickable, or, maybe better, to (b) tell the API to fire the click event for EVERY marker clicked at once, rather than just one of them each time?</p>\n"},{"tags":["java","swing","jframe","java-native-interface","jna"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1700779405,"post_id":77539045,"comment_id":136698741,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1700780612,"post_id":77539045,"comment_id":136698840,"body_markdown":"What is desktop peek?  Do you mean &quot;show desktop&quot;?","body":"What is desktop peek?  Do you mean &quot;show desktop&quot;?"},{"owner":{"account_id":23811671,"reputation":21,"user_id":17820402,"display_name":"Also Grinding For Reputation"},"score":0,"creation_date":1700803950,"post_id":77539045,"comment_id":136700362,"body_markdown":"@GilbertLeBlanc yea but when u just hover over it.","body":"@GilbertLeBlanc yea but when u just hover over it."}],"owner":{"account_id":23811671,"reputation":21,"user_id":17820402,"display_name":"Also Grinding For Reputation"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1700764517,"creation_date":1700764488,"question_id":77539045,"body_markdown":"Since I use Rainmeter I noticed that it does not get hidden when using desktop peek. I was wondering if I could achieve something similar in Java using maybe JNA or JNI (Other libraries work fine too until it works).\r\n\r\nI spent quite a few hours researching but could not find the answer to this question anywhere, and in general do not know where to start.","title":"Windows - How can I prevent a JFrame from being hidden in desktop peek","body":"<p>Since I use Rainmeter I noticed that it does not get hidden when using desktop peek. I was wondering if I could achieve something similar in Java using maybe JNA or JNI (Other libraries work fine too until it works).</p>\n<p>I spent quite a few hours researching but could not find the answer to this question anywhere, and in general do not know where to start.</p>\n"},{"tags":["java","list","queue","stack","jgroups"],"answers":[{"comments":[{"owner":{"account_id":29374491,"reputation":5,"user_id":22506381,"display_name":"RWorker"},"score":0,"creation_date":1700771557,"post_id":77539018,"comment_id":136698016,"body_markdown":"But where do I put the breakpoint? I can&#39;t tell because most of the code has no brackets.","body":"But where do I put the breakpoint? I can&#39;t tell because most of the code has no brackets."},{"owner":{"account_id":250292,"reputation":436,"user_id":526910,"display_name":"lbarowski"},"score":0,"creation_date":1700784167,"post_id":77539018,"comment_id":136699087,"body_markdown":"Wherever you want the debugger to stop. I&#39;d suggest the &quot;if (token.length() == 0)&quot; line for a start, since that will be just before each token is processed.\n\nSometimes print statements and/or stack dumps are a good way to debug. This is a situation where a debugger and jumping/stepping through the code will be the fastest and easiest way by far. It seems you are not familiar with using a debugger. This is a good problem to start learning with.","body":"Wherever you want the debugger to stop. I&#39;d suggest the &quot;if (token.length() == 0)&quot; line for a start, since that will be just before each token is processed.  Sometimes print statements and/or stack dumps are a good way to debug. This is a situation where a debugger and jumping/stepping through the code will be the fastest and easiest way by far. It seems you are not familiar with using a debugger. This is a good problem to start learning with."},{"owner":{"account_id":29374491,"reputation":5,"user_id":22506381,"display_name":"RWorker"},"score":0,"creation_date":1700796719,"post_id":77539018,"comment_id":136699900,"body_markdown":"Um, how I do put a break point... This is my first time using the jgrasp canvas debug... I usually do the running and debugging without the canvas.","body":"Um, how I do put a break point... This is my first time using the jgrasp canvas debug... I usually do the running and debugging without the canvas."},{"owner":{"account_id":250292,"reputation":436,"user_id":526910,"display_name":"lbarowski"},"score":0,"creation_date":1700813145,"post_id":77539018,"comment_id":136701438,"body_markdown":"You can just debug in the normal way and set a breakpoint in the normal way - by clicking in the margin or right clicking and &quot;Breakpoints&quot; &gt; &quot;Toggle Breakpoint&quot;. A &quot;run in canvas&quot; is just a normal debug that also launches a canvas and automatically stops at the program entry point. No matter how you start the debugger, you can still use a canvas (or more than one) or individual viewers in the same way.","body":"You can just debug in the normal way and set a breakpoint in the normal way - by clicking in the margin or right clicking and &quot;Breakpoints&quot; &gt; &quot;Toggle Breakpoint&quot;. A &quot;run in canvas&quot; is just a normal debug that also launches a canvas and automatically stops at the program entry point. No matter how you start the debugger, you can still use a canvas (or more than one) or individual viewers in the same way."},{"owner":{"account_id":29374491,"reputation":5,"user_id":22506381,"display_name":"RWorker"},"score":0,"creation_date":1701097666,"post_id":77539018,"comment_id":136729453,"body_markdown":"Oh, yeah I just realized that I missed that &#39;^&#39; in the *, /, and % method. Thanks for your help.","body":"Oh, yeah I just realized that I missed that &#39;^&#39; in the *, /, and % method. Thanks for your help."}],"tags":[],"owner":{"account_id":250292,"reputation":436,"user_id":526910,"display_name":"lbarowski"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700763996,"creation_date":1700763996,"answer_id":77539018,"question_id":77527118,"body_markdown":"You&#39;re close.\r\n\r\nI see you&#39;re using jGRASP, and debugging these kinds of problems is what it is made for. Set a breakpoint at the first statement inside the main loop (the &quot;if&quot; statement) and debug. From the &quot;Variables&quot; tab, drag out the operator and operand stacks and drop them anywhere. This will pop up &quot;viewers&quot; so that you can watch the stacks as they fill up and empty. You can also open a canvas and drag both variables there for convenience as shown in the image below (you can save the canvas for later reuse, unlike individual viewers). Hit &quot;resume&quot; on the debugger repeatedly and watch the stacks along with the &quot;token&quot; variable (which you could also drag onto a canvas for convenience) which at that point in the code will be the &quot;next&quot; token to be processed. Compare what is happening on the stacks to what should be happening based on precedence, like (349 % (23 ^ 2)) + ((4 ^ 4) % 5). When you spot the operator that causes the problem, quit and restart the debugger, resume until the problem point, then use the debugger &quot;step&quot; and/or &quot;step in&quot; button to go line-by-line until you see the cause.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BAqWt.png","title":"Is there a way to solve or fix the codes of my Exercise20_23.java for Revel?","body":"<p>You're close.</p>\n<p>I see you're using jGRASP, and debugging these kinds of problems is what it is made for. Set a breakpoint at the first statement inside the main loop (the &quot;if&quot; statement) and debug. From the &quot;Variables&quot; tab, drag out the operator and operand stacks and drop them anywhere. This will pop up &quot;viewers&quot; so that you can watch the stacks as they fill up and empty. You can also open a canvas and drag both variables there for convenience as shown in the image below (you can save the canvas for later reuse, unlike individual viewers). Hit &quot;resume&quot; on the debugger repeatedly and watch the stacks along with the &quot;token&quot; variable (which you could also drag onto a canvas for convenience) which at that point in the code will be the &quot;next&quot; token to be processed. Compare what is happening on the stacks to what should be happening based on precedence, like (349 % (23 ^ 2)) + ((4 ^ 4) % 5). When you spot the operator that causes the problem, quit and restart the debugger, resume until the problem point, then use the debugger &quot;step&quot; and/or &quot;step in&quot; button to go line-by-line until you see the cause.</p>\n<p><a href=\"https://i.stack.imgur.com/BAqWt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BAqWt.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29374491,"reputation":5,"user_id":22506381,"display_name":"RWorker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77539018,"answer_count":1,"score":0,"last_activity_date":1700763996,"creation_date":1700622510,"question_id":77527118,"body_markdown":"I&#39;m trying to make that Exercise20_23.java work but it is not working.\r\n\r\nI tried this;\r\n\r\n```\r\nimport java.util.*;\r\n\r\npublic class Exercise20_23 {\r\n   public static void main(String[] args) {\r\n      Scanner scanner = new Scanner(System.in);\r\n      System.out.print(&quot;Enter an expression: &quot;);\r\n      String expression = scanner.nextLine();\r\n      \r\n      try {\r\n         System.out.println(expression + &quot; = &quot; + evaluateExpression(expression));\r\n      }\r\n      catch (Exception ex) {\r\n         System.out.println(&quot;Wrong expression: &quot; + expression);\r\n      }\r\n   }\r\n     \r\n   /** Evaluate an expression */\r\n   public static int evaluateExpression(String expression) {\r\n      // Create operandStack to store operands\r\n      Stack&lt;Integer&gt; operandStack = new Stack&lt;&gt;();\r\n    \r\n      // Create operatorStack to store operators\r\n      Stack&lt;Character&gt; operatorStack = new Stack&lt;&gt;();\r\n    \r\n      // Insert blanks around (, ), +, -, /, *, ^, and %\r\n      expression = insertBlanks(expression);\r\n   \r\n      // Extract operands and operators\r\n      String[] tokens = expression.split(&quot; &quot;);\r\n   \r\n      // Phase 1: Scan tokens\r\n      for (String token: tokens) {\r\n         if (token.length() == 0) // Blank space\r\n            continue; // Back to the for loop to extract the next token\r\n         else if (token.charAt(0) == &#39;+&#39; || token.charAt(0) == &#39;-&#39;) {\r\n            // Process all +, -, *, /, ^. % in the top of the operator stack \r\n            while (!operatorStack.isEmpty() &amp;&amp;\r\n               (operatorStack.peek() == &#39;+&#39; || \r\n                operatorStack.peek() == &#39;-&#39; ||\r\n                operatorStack.peek() == &#39;*&#39; ||\r\n                operatorStack.peek() == &#39;/&#39; ||\r\n                operatorStack.peek() == &#39;^&#39; ||\r\n                operatorStack.peek() == &#39;%&#39;)) {\r\n               processAnOperator(operandStack, operatorStack);\r\n            }\r\n         \r\n            // Push the + or - operator into the operator stack\r\n            operatorStack.push(token.charAt(0));\r\n         }\r\n         else if (token.charAt(0) == &#39;*&#39; || token.charAt(0) == &#39;/&#39; || token.charAt(0) == &#39;%&#39;) {\r\n            // Process all *, /, % in the top of the operator stack \r\n            while (!operatorStack.isEmpty() &amp;&amp;\r\n               (operatorStack.peek() == &#39;*&#39; ||\r\n                operatorStack.peek() == &#39;/&#39; ||\r\n                operatorStack.peek() == &#39;%&#39; )) {\r\n               processAnOperator(operandStack, operatorStack);\r\n            }\r\n         \r\n            // Push the *, /, or % operator into the operator stack\r\n            operatorStack.push(token.charAt(0));\r\n         }\r\n         else if (token.charAt(0) == &#39;^&#39;) {\r\n            // Process all ^ in the top of the operator stack \r\n            while (!operatorStack.isEmpty() &amp;&amp;\r\n               (operatorStack.peek() == &#39;^&#39;)) {\r\n               processAnOperator(operandStack, operatorStack);\r\n            }\r\n         \r\n            // Push the ^ operator into the operator stack\r\n            operatorStack.push(token.charAt(0));\r\n         }\r\n         else if (token.trim().charAt(0) == &#39;(&#39;) {\r\n            operatorStack.push(&#39;(&#39;); // Push &#39;(&#39; to stack\r\n         }\r\n         else if (token.trim().charAt(0) == &#39;)&#39;) {\r\n            // Process all the operators in the stack until seeing &#39;(&#39;\r\n            while (operatorStack.peek() != &#39;(&#39;) {\r\n               processAnOperator(operandStack, operatorStack);\r\n            }\r\n            \r\n            operatorStack.pop(); // Pop the &#39;(&#39; symbol from the stack\r\n         }\r\n         else { // An operand scanned\r\n            // Push an operand to the stack\r\n            operandStack.push(Integer.valueOf(token));\r\n         }\r\n      }\r\n   \r\n      // Phase 2: Process all the remaining operators in the stack \r\n      while (!operatorStack.isEmpty()) {\r\n         processAnOperator(operandStack, operatorStack);\r\n      }\r\n   \r\n      // Return the result\r\n      return operandStack.pop();\r\n   }\r\n\r\n   /** Process one operator: Take an operator from operatorStack and\r\n    *  apply it on the operands in the operandStack */\r\n   public static void processAnOperator(Stack&lt;Integer&gt; operandStack, Stack&lt;Character&gt; operatorStack) {\r\n      char op = operatorStack.pop();\r\n      int op1 = operandStack.pop();\r\n      int op2 = operandStack.pop();\r\n      if (op == &#39;+&#39;) \r\n         operandStack.push(op2 + op1);\r\n      else if (op == &#39;-&#39;) \r\n         operandStack.push(op2 - op1);\r\n      else if (op == &#39;*&#39;) \r\n         operandStack.push(op2 * op1);\r\n      else if (op == &#39;/&#39;) \r\n         operandStack.push(op2 / op1);\r\n      else if (op == &#39;^&#39;) \r\n         operandStack.push((int)Math.pow(op2, op1));\r\n      else if (op == &#39;%&#39;) \r\n         operandStack.push(op2 % op1);\r\n   }\r\n   \r\n   public static String insertBlanks(String s) {\r\n      String result = &quot;&quot;;\r\n      \r\n      for (int i = 0; i &lt; s.length(); i++) {\r\n         if (s.charAt(i) == &#39;(&#39; || s.charAt(i) == &#39;)&#39; || \r\n              s.charAt(i) == &#39;+&#39; || s.charAt(i) == &#39;-&#39; ||\r\n              s.charAt(i) == &#39;*&#39; || s.charAt(i) == &#39;/&#39; ||\r\n              s.charAt(i) == &#39;^&#39; || s.charAt(i) == &#39;%&#39;)\r\n            result += &quot; &quot; + s.charAt(i) + &quot; &quot;;\r\n         else\r\n            result += s.charAt(i);\r\n      }\r\n      \r\n      return result;\r\n   }\r\n   \r\n   /*\r\n   OUTPUT:\r\n       \r\n   ----jGRASP exec: java --module-path C:\\Users\\rmeri\\Downloads\\openjfx-19_windows-x64_bin-sdk\\javafx-sdk-19\\lib --add-modules=javafx.controls Exercise20_23\r\n  Enter an expression: (5 * 2 ^ 3 + 2 * 3 % 2) * 4\r\n  (5 * 2 ^ 3 + 2 * 3 % 2) * 4 = 160\r\n  \r\n   ----jGRASP: operation complete.\r\n  \r\n   ----jGRASP exec: java --module-path C:\\Users\\rmeri\\Downloads\\openjfx-19_windows-x64_bin-sdk\\javafx-sdk-19\\lib --add-modules=javafx.controls Exercise20_23\r\n  Enter an expression: 349 % 23 ^ 2 + 4 ^ 4 % 5\r\n  349 % 23 ^ 2 + 4 ^ 4 % 5 = 605\r\n  \r\n   ----jGRASP: operation complete.\r\n  \r\n   \r\n   */\r\n}\r\n```\r\n\r\nAnd I tried this;\r\n\r\n\r\n```\r\nimport java.util.*;\r\n\r\npublic class Exercise20_23 {\r\n  public static void main(String[] args) {\r\n    Scanner scanner = new Scanner(System.in);\r\n    System.out.print(&quot;Enter an expression: &quot;);\r\n    String expression = scanner.nextLine();\r\n    String temp = expression;\r\n    \r\n    try {\r\n      System.out.println(expression + &quot; = &quot; + evaluateExpression(expression));\r\n    }\r\n    catch (Exception ex) {\r\n      System.out.println(&quot;Wrong expression: &quot; + temp);\r\n    }\r\n  }\r\n    \r\n  /** Evaluate an expression */\r\n  public static int evaluateExpression(String expression) {\r\n    // Create operandStack to store operands\r\n    Stack&lt;Integer&gt; operandStack = new Stack&lt;&gt;();\r\n  \r\n    // Create operatorStack to store operators\r\n    Stack&lt;Character&gt; operatorStack = new Stack&lt;&gt;();\r\n  \r\n    // Insert blanks around (, ), +, -, /, *, ^, and %\r\n    expression = insertBlanks(expression);\r\n\r\n    // Extract operands and operators\r\n    String[] tokens = expression.split(&quot; &quot;);\r\n\r\n    // Phase 1: Scan tokens\r\n    for (String token: tokens) {\r\n      if (token.length() == 0) // Blank space\r\n        continue; // Back to the for loop to extract the next token\r\n      else if (token.charAt(0) == &#39;+&#39; || token.charAt(0) == &#39;-&#39;) {\r\n        // Process all +, -, *, /, ^. % in the top of the operator stack \r\n        while (!operatorStack.isEmpty() &amp;&amp;\r\n          (operatorStack.peek() == &#39;+&#39; || \r\n           operatorStack.peek() == &#39;-&#39; ||\r\n           operatorStack.peek() == &#39;*&#39; ||\r\n           operatorStack.peek() == &#39;/&#39; ||\r\n           operatorStack.peek() == &#39;^&#39; ||\r\n           operatorStack.peek() == &#39;%&#39;)) {\r\n          processAnOperator(operandStack, operatorStack);\r\n        }\r\n\r\n        // Push the + or - operator into the operator stack\r\n        operatorStack.push(token.charAt(0));\r\n      }\r\n      else if (token.charAt(0) == &#39;*&#39; || token.charAt(0) == &#39;/&#39; || token.charAt(0) == &#39;%&#39;) {\r\n        // Process all *, /, % in the top of the operator stack \r\n        while (!operatorStack.isEmpty() &amp;&amp;\r\n          (operatorStack.peek() == &#39;*&#39; ||\r\n           operatorStack.peek() == &#39;/&#39; ||\r\n           operatorStack.peek() == &#39;%&#39; )) {\r\n          processAnOperator(operandStack, operatorStack);\r\n        }\r\n\r\n        // Push the *, /, or % operator into the operator stack\r\n        operatorStack.push(token.charAt(0));\r\n      }\r\n      else if (token.charAt(0) == &#39;^&#39;) {\r\n        // Process all ^ in the top of the operator stack \r\n        while (!operatorStack.isEmpty() &amp;&amp;\r\n          (operatorStack.peek() == &#39;^&#39;)) {\r\n          processAnOperator(operandStack, operatorStack);\r\n        }\r\n\r\n        // Push the ^ operator into the operator stack\r\n        operatorStack.push(token.charAt(0));\r\n      }\r\n      else if (token.trim().charAt(0) == &#39;(&#39;) {\r\n        operatorStack.push(&#39;(&#39;); // Push &#39;(&#39; to stack\r\n      }\r\n      else if (token.trim().charAt(0) == &#39;)&#39;) {\r\n        // Process all the operators in the stack until seeing &#39;(&#39;\r\n        while (operatorStack.peek() != &#39;(&#39;) {\r\n          processAnOperator(operandStack, operatorStack);\r\n        }\r\n        \r\n        operatorStack.pop(); // Pop the &#39;(&#39; symbol from the stack\r\n      }\r\n      else { // An operand scanned\r\n        // Push an operand to the stack\r\n        operandStack.push(Integer.valueOf(token));\r\n      }\r\n    }\r\n\r\n    // Phase 2: Process all the remaining operators in the stack \r\n    while (!operatorStack.isEmpty()) {\r\n      processAnOperator(operandStack, operatorStack);\r\n    }\r\n\r\n    // Return the result\r\n    return operandStack.pop();\r\n  }\r\n\r\n  /** Process one operator: Take an operator from operatorStack and\r\n   *  apply it on the operands in the operandStack */\r\n  public static void processAnOperator(Stack&lt;Integer&gt; operandStack, Stack&lt;Character&gt; operatorStack) {\r\n    char op = operatorStack.pop();\r\n    int op1 = operandStack.pop();\r\n    int op2 = operandStack.pop();\r\n    if (op == &#39;+&#39;) \r\n      operandStack.push(op2 + op1);\r\n    else if (op == &#39;-&#39;) \r\n      operandStack.push(op2 - op1);\r\n    else if (op == &#39;*&#39;) \r\n      operandStack.push(op2 * op1);\r\n    else if (op == &#39;/&#39;) \r\n      operandStack.push(op2 / op1);\r\n    else if (op == &#39;^&#39;) \r\n      operandStack.push((int)Math.pow(op2, op1));\r\n    else if (op == &#39;%&#39;) \r\n      operandStack.push(op2 % op1);\r\n    else if (op != &#39;(&#39; || op != &#39;)&#39;) {\r\n    if (op == &#39;%&#39;) \r\n      operandStack.push(op2 % op1);\r\n    else if (op == &#39;^&#39;) \r\n      operandStack.push((int)Math.pow(op2, op1));\r\n    else if (op == &#39;+&#39;) \r\n      operandStack.push(op2 + op1);\r\n    else if (op == &#39;-&#39;) \r\n      operandStack.push(op2 - op1);\r\n    else if (op == &#39;*&#39;) \r\n      operandStack.push(op2 * op1);\r\n    else if (op == &#39;/&#39;) \r\n      operandStack.push(op2 / op1);\r\n   }\r\n  }\r\n  \r\n  public static String insertBlanks(String s) {\r\n    String result = &quot;&quot;;\r\n    \r\n    for (int i = 0; i &lt; s.length(); i++) {\r\n      if (s.charAt(i) == &#39;(&#39; || s.charAt(i) == &#39;)&#39; || \r\n          s.charAt(i) == &#39;+&#39; || s.charAt(i) == &#39;-&#39; ||\r\n          s.charAt(i) == &#39;*&#39; || s.charAt(i) == &#39;/&#39; ||\r\n          s.charAt(i) == &#39;^&#39; || s.charAt(i) == &#39;%&#39;)\r\n        result += &quot; &quot; + s.charAt(i) + &quot; &quot;;\r\n      else\r\n        result += s.charAt(i);\r\n    }\r\n    \r\n    return result;\r\n  }\r\n  \r\n  /*\r\n  OUTPUT:\r\n  \r\n  ----jGRASP exec: java --module-path C:\\Users\\rmeri\\Downloads\\openjfx-19_windows-x64_bin-sdk\\javafx-sdk-19\\lib --add-modules=javafx.controls Exercise20_23\r\n Enter an expression: (5 * 2 ^ 3 + 2 * 3 % 2) * 4\r\n (5 * 2 ^ 3 + 2 * 3 % 2) * 4 = 160\r\n \r\n  ----jGRASP: operation complete.\r\n \r\n  ----jGRASP exec: java --module-path C:\\Users\\rmeri\\Downloads\\openjfx-19_windows-x64_bin-sdk\\javafx-sdk-19\\lib --add-modules=javafx.controls Exercise20_23\r\n Enter an expression: 349 % 23 ^ 2 + 4 ^ 4 % 5\r\n 349 % 23 ^ 2 + 4 ^ 4 % 5 = 605\r\n \r\n  ----jGRASP: operation complete.\r\n \r\n  */\r\n}\r\n```\r\n\r\n\r\n\r\nBut both codes didn&#39;t the result I&#39;m looking for, according to this link[Please click the link here to see the correct output](https://i.stack.imgur.com/Jk2hu.png)]\r\n(https://i.stack.imgur.com/Jk2hu.png)\r\n\r\nI&#39;m trying to modify the Evaluate Expression into adding &#39;^&#39;, &#39;%&#39; chars for operators so I can complete the revel project but I don&#39;t know what else to I need to do, so if anyone can tell me what&#39;s wrong with both of those codes above, I will really appreciate it.\r\n","title":"Is there a way to solve or fix the codes of my Exercise20_23.java for Revel?","body":"<p>I'm trying to make that Exercise20_23.java work but it is not working.</p>\n<p>I tried this;</p>\n<pre><code>import java.util.*;\n\npublic class Exercise20_23 {\n   public static void main(String[] args) {\n      Scanner scanner = new Scanner(System.in);\n      System.out.print(&quot;Enter an expression: &quot;);\n      String expression = scanner.nextLine();\n      \n      try {\n         System.out.println(expression + &quot; = &quot; + evaluateExpression(expression));\n      }\n      catch (Exception ex) {\n         System.out.println(&quot;Wrong expression: &quot; + expression);\n      }\n   }\n     \n   /** Evaluate an expression */\n   public static int evaluateExpression(String expression) {\n      // Create operandStack to store operands\n      Stack&lt;Integer&gt; operandStack = new Stack&lt;&gt;();\n    \n      // Create operatorStack to store operators\n      Stack&lt;Character&gt; operatorStack = new Stack&lt;&gt;();\n    \n      // Insert blanks around (, ), +, -, /, *, ^, and %\n      expression = insertBlanks(expression);\n   \n      // Extract operands and operators\n      String[] tokens = expression.split(&quot; &quot;);\n   \n      // Phase 1: Scan tokens\n      for (String token: tokens) {\n         if (token.length() == 0) // Blank space\n            continue; // Back to the for loop to extract the next token\n         else if (token.charAt(0) == '+' || token.charAt(0) == '-') {\n            // Process all +, -, *, /, ^. % in the top of the operator stack \n            while (!operatorStack.isEmpty() &amp;&amp;\n               (operatorStack.peek() == '+' || \n                operatorStack.peek() == '-' ||\n                operatorStack.peek() == '*' ||\n                operatorStack.peek() == '/' ||\n                operatorStack.peek() == '^' ||\n                operatorStack.peek() == '%')) {\n               processAnOperator(operandStack, operatorStack);\n            }\n         \n            // Push the + or - operator into the operator stack\n            operatorStack.push(token.charAt(0));\n         }\n         else if (token.charAt(0) == '*' || token.charAt(0) == '/' || token.charAt(0) == '%') {\n            // Process all *, /, % in the top of the operator stack \n            while (!operatorStack.isEmpty() &amp;&amp;\n               (operatorStack.peek() == '*' ||\n                operatorStack.peek() == '/' ||\n                operatorStack.peek() == '%' )) {\n               processAnOperator(operandStack, operatorStack);\n            }\n         \n            // Push the *, /, or % operator into the operator stack\n            operatorStack.push(token.charAt(0));\n         }\n         else if (token.charAt(0) == '^') {\n            // Process all ^ in the top of the operator stack \n            while (!operatorStack.isEmpty() &amp;&amp;\n               (operatorStack.peek() == '^')) {\n               processAnOperator(operandStack, operatorStack);\n            }\n         \n            // Push the ^ operator into the operator stack\n            operatorStack.push(token.charAt(0));\n         }\n         else if (token.trim().charAt(0) == '(') {\n            operatorStack.push('('); // Push '(' to stack\n         }\n         else if (token.trim().charAt(0) == ')') {\n            // Process all the operators in the stack until seeing '('\n            while (operatorStack.peek() != '(') {\n               processAnOperator(operandStack, operatorStack);\n            }\n            \n            operatorStack.pop(); // Pop the '(' symbol from the stack\n         }\n         else { // An operand scanned\n            // Push an operand to the stack\n            operandStack.push(Integer.valueOf(token));\n         }\n      }\n   \n      // Phase 2: Process all the remaining operators in the stack \n      while (!operatorStack.isEmpty()) {\n         processAnOperator(operandStack, operatorStack);\n      }\n   \n      // Return the result\n      return operandStack.pop();\n   }\n\n   /** Process one operator: Take an operator from operatorStack and\n    *  apply it on the operands in the operandStack */\n   public static void processAnOperator(Stack&lt;Integer&gt; operandStack, Stack&lt;Character&gt; operatorStack) {\n      char op = operatorStack.pop();\n      int op1 = operandStack.pop();\n      int op2 = operandStack.pop();\n      if (op == '+') \n         operandStack.push(op2 + op1);\n      else if (op == '-') \n         operandStack.push(op2 - op1);\n      else if (op == '*') \n         operandStack.push(op2 * op1);\n      else if (op == '/') \n         operandStack.push(op2 / op1);\n      else if (op == '^') \n         operandStack.push((int)Math.pow(op2, op1));\n      else if (op == '%') \n         operandStack.push(op2 % op1);\n   }\n   \n   public static String insertBlanks(String s) {\n      String result = &quot;&quot;;\n      \n      for (int i = 0; i &lt; s.length(); i++) {\n         if (s.charAt(i) == '(' || s.charAt(i) == ')' || \n              s.charAt(i) == '+' || s.charAt(i) == '-' ||\n              s.charAt(i) == '*' || s.charAt(i) == '/' ||\n              s.charAt(i) == '^' || s.charAt(i) == '%')\n            result += &quot; &quot; + s.charAt(i) + &quot; &quot;;\n         else\n            result += s.charAt(i);\n      }\n      \n      return result;\n   }\n   \n   /*\n   OUTPUT:\n       \n   ----jGRASP exec: java --module-path C:\\Users\\rmeri\\Downloads\\openjfx-19_windows-x64_bin-sdk\\javafx-sdk-19\\lib --add-modules=javafx.controls Exercise20_23\n  Enter an expression: (5 * 2 ^ 3 + 2 * 3 % 2) * 4\n  (5 * 2 ^ 3 + 2 * 3 % 2) * 4 = 160\n  \n   ----jGRASP: operation complete.\n  \n   ----jGRASP exec: java --module-path C:\\Users\\rmeri\\Downloads\\openjfx-19_windows-x64_bin-sdk\\javafx-sdk-19\\lib --add-modules=javafx.controls Exercise20_23\n  Enter an expression: 349 % 23 ^ 2 + 4 ^ 4 % 5\n  349 % 23 ^ 2 + 4 ^ 4 % 5 = 605\n  \n   ----jGRASP: operation complete.\n  \n   \n   */\n}\n</code></pre>\n<p>And I tried this;</p>\n<pre><code>import java.util.*;\n\npublic class Exercise20_23 {\n  public static void main(String[] args) {\n    Scanner scanner = new Scanner(System.in);\n    System.out.print(&quot;Enter an expression: &quot;);\n    String expression = scanner.nextLine();\n    String temp = expression;\n    \n    try {\n      System.out.println(expression + &quot; = &quot; + evaluateExpression(expression));\n    }\n    catch (Exception ex) {\n      System.out.println(&quot;Wrong expression: &quot; + temp);\n    }\n  }\n    \n  /** Evaluate an expression */\n  public static int evaluateExpression(String expression) {\n    // Create operandStack to store operands\n    Stack&lt;Integer&gt; operandStack = new Stack&lt;&gt;();\n  \n    // Create operatorStack to store operators\n    Stack&lt;Character&gt; operatorStack = new Stack&lt;&gt;();\n  \n    // Insert blanks around (, ), +, -, /, *, ^, and %\n    expression = insertBlanks(expression);\n\n    // Extract operands and operators\n    String[] tokens = expression.split(&quot; &quot;);\n\n    // Phase 1: Scan tokens\n    for (String token: tokens) {\n      if (token.length() == 0) // Blank space\n        continue; // Back to the for loop to extract the next token\n      else if (token.charAt(0) == '+' || token.charAt(0) == '-') {\n        // Process all +, -, *, /, ^. % in the top of the operator stack \n        while (!operatorStack.isEmpty() &amp;&amp;\n          (operatorStack.peek() == '+' || \n           operatorStack.peek() == '-' ||\n           operatorStack.peek() == '*' ||\n           operatorStack.peek() == '/' ||\n           operatorStack.peek() == '^' ||\n           operatorStack.peek() == '%')) {\n          processAnOperator(operandStack, operatorStack);\n        }\n\n        // Push the + or - operator into the operator stack\n        operatorStack.push(token.charAt(0));\n      }\n      else if (token.charAt(0) == '*' || token.charAt(0) == '/' || token.charAt(0) == '%') {\n        // Process all *, /, % in the top of the operator stack \n        while (!operatorStack.isEmpty() &amp;&amp;\n          (operatorStack.peek() == '*' ||\n           operatorStack.peek() == '/' ||\n           operatorStack.peek() == '%' )) {\n          processAnOperator(operandStack, operatorStack);\n        }\n\n        // Push the *, /, or % operator into the operator stack\n        operatorStack.push(token.charAt(0));\n      }\n      else if (token.charAt(0) == '^') {\n        // Process all ^ in the top of the operator stack \n        while (!operatorStack.isEmpty() &amp;&amp;\n          (operatorStack.peek() == '^')) {\n          processAnOperator(operandStack, operatorStack);\n        }\n\n        // Push the ^ operator into the operator stack\n        operatorStack.push(token.charAt(0));\n      }\n      else if (token.trim().charAt(0) == '(') {\n        operatorStack.push('('); // Push '(' to stack\n      }\n      else if (token.trim().charAt(0) == ')') {\n        // Process all the operators in the stack until seeing '('\n        while (operatorStack.peek() != '(') {\n          processAnOperator(operandStack, operatorStack);\n        }\n        \n        operatorStack.pop(); // Pop the '(' symbol from the stack\n      }\n      else { // An operand scanned\n        // Push an operand to the stack\n        operandStack.push(Integer.valueOf(token));\n      }\n    }\n\n    // Phase 2: Process all the remaining operators in the stack \n    while (!operatorStack.isEmpty()) {\n      processAnOperator(operandStack, operatorStack);\n    }\n\n    // Return the result\n    return operandStack.pop();\n  }\n\n  /** Process one operator: Take an operator from operatorStack and\n   *  apply it on the operands in the operandStack */\n  public static void processAnOperator(Stack&lt;Integer&gt; operandStack, Stack&lt;Character&gt; operatorStack) {\n    char op = operatorStack.pop();\n    int op1 = operandStack.pop();\n    int op2 = operandStack.pop();\n    if (op == '+') \n      operandStack.push(op2 + op1);\n    else if (op == '-') \n      operandStack.push(op2 - op1);\n    else if (op == '*') \n      operandStack.push(op2 * op1);\n    else if (op == '/') \n      operandStack.push(op2 / op1);\n    else if (op == '^') \n      operandStack.push((int)Math.pow(op2, op1));\n    else if (op == '%') \n      operandStack.push(op2 % op1);\n    else if (op != '(' || op != ')') {\n    if (op == '%') \n      operandStack.push(op2 % op1);\n    else if (op == '^') \n      operandStack.push((int)Math.pow(op2, op1));\n    else if (op == '+') \n      operandStack.push(op2 + op1);\n    else if (op == '-') \n      operandStack.push(op2 - op1);\n    else if (op == '*') \n      operandStack.push(op2 * op1);\n    else if (op == '/') \n      operandStack.push(op2 / op1);\n   }\n  }\n  \n  public static String insertBlanks(String s) {\n    String result = &quot;&quot;;\n    \n    for (int i = 0; i &lt; s.length(); i++) {\n      if (s.charAt(i) == '(' || s.charAt(i) == ')' || \n          s.charAt(i) == '+' || s.charAt(i) == '-' ||\n          s.charAt(i) == '*' || s.charAt(i) == '/' ||\n          s.charAt(i) == '^' || s.charAt(i) == '%')\n        result += &quot; &quot; + s.charAt(i) + &quot; &quot;;\n      else\n        result += s.charAt(i);\n    }\n    \n    return result;\n  }\n  \n  /*\n  OUTPUT:\n  \n  ----jGRASP exec: java --module-path C:\\Users\\rmeri\\Downloads\\openjfx-19_windows-x64_bin-sdk\\javafx-sdk-19\\lib --add-modules=javafx.controls Exercise20_23\n Enter an expression: (5 * 2 ^ 3 + 2 * 3 % 2) * 4\n (5 * 2 ^ 3 + 2 * 3 % 2) * 4 = 160\n \n  ----jGRASP: operation complete.\n \n  ----jGRASP exec: java --module-path C:\\Users\\rmeri\\Downloads\\openjfx-19_windows-x64_bin-sdk\\javafx-sdk-19\\lib --add-modules=javafx.controls Exercise20_23\n Enter an expression: 349 % 23 ^ 2 + 4 ^ 4 % 5\n 349 % 23 ^ 2 + 4 ^ 4 % 5 = 605\n \n  ----jGRASP: operation complete.\n \n  */\n}\n</code></pre>\n<p>But both codes didn't the result I'm looking for, according to this link<a href=\"https://i.stack.imgur.com/Jk2hu.png\" rel=\"nofollow noreferrer\">Please click the link here to see the correct output</a>]\n(<a href=\"https://i.stack.imgur.com/Jk2hu.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/Jk2hu.png</a>)</p>\n<p>I'm trying to modify the Evaluate Expression into adding '^', '%' chars for operators so I can complete the revel project but I don't know what else to I need to do, so if anyone can tell me what's wrong with both of those codes above, I will really appreciate it.</p>\n"},{"tags":["java","c#","programming-languages","covariance","contravariance"],"comments":[{"owner":{"account_id":15562,"reputation":125316,"user_id":33006,"accept_rate":88,"display_name":"Martin v. L&#246;wis"},"score":0,"creation_date":1248245757,"post_id":1163465,"comment_id":98337765,"body_markdown":"[http://en.wikipedia.org/wiki/Covariance_and_contravariance\\_(computer\\_science)](http://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science))","body":"<a href=\"http://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)\" rel=\"nofollow noreferrer\">http://en.wikipedia.org/wiki/Covariance_and_contravariance_(&zwnj;&#8203;computer_science)</a>"},{"owner":{"account_id":44745,"reputation":4729,"user_id":131458,"accept_rate":100,"display_name":"Andy_Vulhop"},"score":10,"creation_date":1248280728,"post_id":1163465,"comment_id":985885,"body_markdown":"I smell a homework question.","body":"I smell a homework question."},{"owner":{"account_id":335069,"reputation":70765,"user_id":661933,"accept_rate":94,"display_name":"nawfal"},"score":1,"creation_date":1404725763,"post_id":1163465,"comment_id":38128434,"body_markdown":"possible duplicate of [C# : Is Variance (Covariance / Contravariance) another word for Polymorphism?](http://stackoverflow.com/questions/1078423/c-sharp-is-variance-covariance-contravariance-another-word-for-polymorphis)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/1078423/c-sharp-is-variance-covariance-contravariance-another-word-for-polymorphis\">C# : Is Variance (Covariance / Contravariance) another word for Polymorphism?</a>"}],"answers":[{"comments":[{"owner":{"account_id":38725,"reputation":100233,"user_id":111335,"accept_rate":75,"display_name":"Pavel Minaev"},"score":0,"creation_date":1248248934,"post_id":1163491,"comment_id":982961,"body_markdown":"Good definition, but it misses the fact that not only types can be treated as co/contravariant. For example, Java `List&lt;T&gt;` isn&#39;t either, but Java wildcards let you treat in either covariant or contravariant fashion at point of use (rather than declaration) - of course, restricting the set of operations on the type to those that are actually covariant and contravariant for it.","body":"Good definition, but it misses the fact that not only types can be treated as co/contravariant. For example, Java <code>List&lt;T&gt;</code> isn&#39;t either, but Java wildcards let you treat in either covariant or contravariant fashion at point of use (rather than declaration) - of course, restricting the set of operations on the type to those that are actually covariant and contravariant for it."},{"owner":{"account_id":9178,"reputation":133593,"user_id":16853,"accept_rate":90,"display_name":"oxbow_lakes"},"score":1,"creation_date":1248272951,"post_id":1163491,"comment_id":984944,"body_markdown":"I believe that `List&lt;? extends Fruit&gt;` is a kind of *existential type*: i.e. `List[T] forSome T &lt;: Fruit` - the *forSome T &lt;: Fruit* is itself a type in this instance. Java is still not covariant in this type though. For example a method accepting a `List&lt;? extends Fruit&gt;` would not accept `List&lt;? extends Fruit&gt;`","body":"I believe that <code>List&lt;? extends Fruit&gt;</code> is a kind of <i>existential type</i>: i.e. <code>List[T] forSome T &lt;: Fruit</code> - the <i>forSome T &lt;: Fruit</i> is itself a type in this instance. Java is still not covariant in this type though. For example a method accepting a <code>List&lt;? extends Fruit&gt;</code> would not accept <code>List&lt;? extends Fruit&gt;</code>"},{"owner":{"account_id":7473091,"reputation":610,"user_id":5708812,"display_name":"llf"},"score":0,"creation_date":1546569960,"post_id":1163491,"comment_id":94901101,"body_markdown":"OTOH, `S &lt;= T iff List[T] &lt;= List[S]` with respect to the `add` operation, since we can `add` things of type `S` to a `List[T]` if `S &lt;= T`. So lists are contravariant with respect to the `add` operation.","body":"OTOH, <code>S &lt;= T iff List[T] &lt;= List[S]</code> with respect to the <code>add</code> operation, since we can <code>add</code> things of type <code>S</code> to a <code>List[T]</code> if <code>S &lt;= T</code>. So lists are contravariant with respect to the <code>add</code> operation."},{"owner":{"account_id":1275298,"reputation":3439,"user_id":1230694,"accept_rate":80,"display_name":"berimbolo"},"score":0,"creation_date":1631221620,"post_id":1163491,"comment_id":122171917,"body_markdown":"I would have found it very useful if you had expanded your answer to demonstrate contravariance using fruit. I feel like after reading it I understand covariance but still don&#39;t understand contravariance.","body":"I would have found it very useful if you had expanded your answer to demonstrate contravariance using fruit. I feel like after reading it I understand covariance but still don&#39;t understand contravariance."}],"tags":[],"owner":{"account_id":9178,"reputation":133593,"user_id":16853,"accept_rate":90,"display_name":"oxbow_lakes"},"comment_count":4,"down_vote_count":2,"up_vote_count":34,"is_accepted":true,"score":32,"last_activity_date":1297248800,"creation_date":1248245796,"answer_id":1163491,"question_id":1163465,"body_markdown":"*Covariance* is pretty simple and best thought of from the perspective of some collection class `List`. We can *parameterize* the `List` class with some type parameter `T`. That is, our list contains elements of type `T` for some `T`. List would be covariant if \n\n  &gt; S is a subtype of T iff List[S] is a subtype of List[T]\n\n(Where I&#39;m using the mathematical definition *iff* to mean *if and only if*.)\n\nThat is, a `List[Apple]` **is a** `List[Fruit]`. If there is some routine which accepts a `List[Fruit]` as a parameter, and I have a `List[Apple]`, then I can pass this in as a valid parameter.\n\n    def something(l: List[Fruit]) {\n        l.add(new Pear())\n    }\n\nIf our collection class `List` is mutable, then covariance makes no sense because we might assume that our routine could add some other fruit (which was not an apple) as above. Hence we should only like *immutable* collection classes to be covariant!\n","title":"What is the difference between covariance and contra-variance in programming languages?","body":"<p><em>Covariance</em> is pretty simple and best thought of from the perspective of some collection class <code>List</code>. We can <em>parameterize</em> the <code>List</code> class with some type parameter <code>T</code>. That is, our list contains elements of type <code>T</code> for some <code>T</code>. List would be covariant if</p>\n<blockquote>\n<p>S is a subtype of T iff List[S] is a subtype of List[T]</p>\n</blockquote>\n<p>(Where I'm using the mathematical definition <em>iff</em> to mean <em>if and only if</em>.)</p>\n<p>That is, a <code>List[Apple]</code> <strong>is a</strong> <code>List[Fruit]</code>. If there is some routine which accepts a <code>List[Fruit]</code> as a parameter, and I have a <code>List[Apple]</code>, then I can pass this in as a valid parameter.</p>\n<pre><code>def something(l: List[Fruit]) {\n    l.add(new Pear())\n}\n</code></pre>\n<p>If our collection class <code>List</code> is mutable, then covariance makes no sense because we might assume that our routine could add some other fruit (which was not an apple) as above. Hence we should only like <em>immutable</em> collection classes to be covariant!</p>\n"},{"tags":[],"owner":{"account_id":200982,"reputation":97519,"user_id":447156,"accept_rate":99,"display_name":"Soner G&#246;n&#252;l"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1700763672,"creation_date":1311855346,"answer_id":6858799,"question_id":1163465,"body_markdown":"There is a distinction being made between ***covariance*** and ***contravariance***. &lt;br/&gt;\r\nVery roughly, an operation is covariant if it preserves the ordering of types, and contravariant if it **reverses** this order. \r\n\r\nThe ordering itself is meant to represent more general types as larger than more specific types. &lt;br/&gt;\r\nHere&#39;s one example of a situation where C# supports covariance. First, this is an array of objects:\r\n\r\n\tvar objects = new object[3];\r\n\tobjects[0] = new object();\r\n\tobjects[1] = &quot;Just a string&quot;;\r\n\tobjects[2] = 10;\r\n\r\nOf course it is possible to insert different values into the array because in the end they all derive from `System.Object` in .Net framework. In other words, `System.Object` is a very general or **large** type. Now here&#39;s a spot where covariance is supported: \r\n&lt;br/&gt;***assigning a value of a smaller type to a variable of a larger type*** \r\n\r\n\tvar strings = new string[] { &quot;one&quot;, &quot;two&quot;, &quot;three&quot; };\r\n\tobjects = strings;\r\n\r\nThe variable objects, which is of type `object[]`, can store a value that is in fact of type `string[]`. \r\n\r\nThink about it — to a point, it&#39;s what you expect, but then again it isn&#39;t. After all, while `string` derives from `object`, `string[]` **DOES NOT** derive from `object[]`. The language support for covariance in this example makes the assignment possible anyway, which is something you&#39;ll find in many cases. *Variance* is a feature that makes the language work more intuitively. \r\n\r\nThe considerations around these topics are extremely complicated. For instance, based on the preceding code, here are two scenarios that will result in errors. \r\n\r\n\t// Runtime exception here - the array is still of type string[],\r\n\t// ints can&#39;t be inserted\r\n\tobjects[2]=10;\r\n\r\n\t// Compiler error here - covariance support in this scenario only\r\n\t// covers reference types, and int is a value type\r\n\tvar ints = new int[] { 1, 2, 3 };\r\n\tobjects = ints;\r\n    \r\nAn example for the workings of contravariance is a bit more complicated. Imagine these \r\ntwo classes: \r\n\r\n\tpublic partial class Person: IPerson \r\n    {\r\n\t\tpublic Person() \r\n        {\r\n\t\t}\r\n\t}\r\n\r\n\tpublic partial class Woman: Person\r\n    {\r\n\t\tpublic Woman()\r\n        {\r\n\t\t}\r\n\t}\r\n\r\n`Woman` is derived from `Person`, obviously. Now consider you have these two functions: \r\n\r\n\tstatic void WorkWithPerson(Person person)\r\n    {\r\n\t}\r\n\r\n\tstatic void WorkWithWoman(Woman woman)\r\n    {\r\n\t}\r\n\r\nOne of the functions does something(it doesn&#39;t matter what) with a `Woman`, the other is more general and can work with any type derived from `Person`. On the `Woman` side of things, you now also have these:\r\n\r\n\tdelegate void AcceptWomanDelegate(Woman person);\r\n\r\n\tstatic void DoWork(Woman woman, AcceptWomanDelegate acceptWoman)\r\n    {\r\n\t\tacceptWoman(woman);\r\n\t}\r\n\r\n`DoWork` is a function that can take a `Woman` and a reference to a function that also takes a `Woman`, and then it passes the instance of `Woman` to the delegate. Consider the *polymorphism* of the elements you have here. `Person` is *larger* than `Woman`, and `WorkWithPerson` is *larger* than `WorkWithWoman`. \r\n`WorkWithPerson` is also considered *larger* than `AcceptWomanDelegate` for the purpose of variance.\r\n\r\nFinally, you have these three lines of code:\r\n\r\n\tvar woman = new Woman();\r\n\tDoWork(woman, WorkWithWoman);\r\n\tDoWork(woman, WorkWithPerson);\r\n\r\nA `Woman` instance is created. Then DoWork is called, passing in the `Woman` instance as well as a reference to the `WorkWithWoman` method. The latter is obviously compatible with the delegate type `AcceptWomanDelegate` — one parameter of type `Woman`, no return type. \r\nThe third line is a bit odd, though. The method `WorkWithPerson` takes a `Person` as parameter, not a `Woman`, as required by `AcceptWomanDelegate`. Nevertheless, `WorkWithPerson` is compatible with the delegate type. ***Contravariance*** makes it possible, so in the case of delegates the larger type `WorkWithPerson` can be stored in a variable of the smaller type `AcceptWomanDelegate`. Once more it&#39;s the intuitive thing: ***if `WorkWithPerson` can work with any `Person`, passing in a `Woman` can&#39;t be wrong***, right?\r\n\r\nBy now, you may be wondering how all this relates to generics. The answer is that variance can be applied to generics as well. The preceding example used `object` and `string` arrays. Here the code uses generic lists instead of the arrays:\r\n\r\n\tvar objectList = new List&lt;object&gt;();\r\n\tvar stringList = new List&lt;string&gt;();\r\n\tobjectList = stringList;\r\n\r\nIf you try this out, you will find that this is not a supported scenario in C#. In C# version 4.0 as well as .Net framework 4.0, variance support in generics has been cleaned up, and it is now possible to use the new keywords ***in*** and ***out*** with generic type parameters. They can define and restrict the direction of data flow for a particular type parameter, allowing variance to work. But in the case of `List&lt;T&gt;`, the data of type `T` flows in both directions — there are methods on the type `List&lt;T&gt;` that return `T` values, and others that receive such values.\r\n\r\nThe point of these directional restrictions is **to allow variance where it makes sense**, but to **prevent problems** like the runtime error mentioned in one of the previous array examples. When type parameters are correctly decorated with *in* or *out*, the compiler can check, and allow or disallow, its variance at ***compile time***. Microsoft has gone to the effort of adding these keywords to many standard interfaces in .Net framework, like `IEnumerable&lt;T&gt;`: \r\n\r\n\tpublic interface IEnumerable&lt;out T&gt;: IEnumerable\r\n    {\r\n\t\t// ...\r\n\t}\r\n\r\nFor this interface, the data flow of type `T` objects is clear: ***they can only ever be retrieved from methods supported by this interface, not passed into them***. As a result, it is possible to construct an example similar to the `List&lt;T&gt;` attempt described previously, but using `IEnumerable&lt;T&gt;` :\r\n\r\n\tIEnumerable&lt;object&gt; objectSequence = new List&lt;object&gt;();\r\n\tIEnumerable&lt;string&gt; stringSequence = new List&lt;string&gt;();\r\n\tobjectSequence = stringSequence;\r\n\r\nThis code is acceptable to the C# compiler since version 4.0 because `IEnumerable&lt;T&gt;` is covariant due to the *out* specifier on the type parameter `T`. \r\n\r\nWhen working with generic types, it is important to be aware of variance and the way the compiler is applying various kinds of trickery in order to make your code work the way you expect it to. \r\n\r\nThere&#39;s more to know about variance than is covered in this chapter, but this shall suffice to make all further code understandable.\r\n\r\nRef: \r\n\r\n* [`PROFESSIONAL Functional Programming in C#`](http://www.amazon.com/Functional-Programming-Techniques-Projects-Programmer/dp/0470744588)\r\n","title":"What is the difference between covariance and contra-variance in programming languages?","body":"<p>There is a distinction being made between <em><strong>covariance</strong></em> and <em><strong>contravariance</strong></em>. <br/>\nVery roughly, an operation is covariant if it preserves the ordering of types, and contravariant if it <strong>reverses</strong> this order.</p>\n<p>The ordering itself is meant to represent more general types as larger than more specific types. <br/>\nHere's one example of a situation where C# supports covariance. First, this is an array of objects:</p>\n<pre><code>var objects = new object[3];\nobjects[0] = new object();\nobjects[1] = &quot;Just a string&quot;;\nobjects[2] = 10;\n</code></pre>\n<p>Of course it is possible to insert different values into the array because in the end they all derive from <code>System.Object</code> in .Net framework. In other words, <code>System.Object</code> is a very general or <strong>large</strong> type. Now here's a spot where covariance is supported:\n<br/><em><strong>assigning a value of a smaller type to a variable of a larger type</strong></em></p>\n<pre><code>var strings = new string[] { &quot;one&quot;, &quot;two&quot;, &quot;three&quot; };\nobjects = strings;\n</code></pre>\n<p>The variable objects, which is of type <code>object[]</code>, can store a value that is in fact of type <code>string[]</code>.</p>\n<p>Think about it — to a point, it's what you expect, but then again it isn't. After all, while <code>string</code> derives from <code>object</code>, <code>string[]</code> <strong>DOES NOT</strong> derive from <code>object[]</code>. The language support for covariance in this example makes the assignment possible anyway, which is something you'll find in many cases. <em>Variance</em> is a feature that makes the language work more intuitively.</p>\n<p>The considerations around these topics are extremely complicated. For instance, based on the preceding code, here are two scenarios that will result in errors.</p>\n<pre><code>// Runtime exception here - the array is still of type string[],\n// ints can't be inserted\nobjects[2]=10;\n\n// Compiler error here - covariance support in this scenario only\n// covers reference types, and int is a value type\nvar ints = new int[] { 1, 2, 3 };\nobjects = ints;\n</code></pre>\n<p>An example for the workings of contravariance is a bit more complicated. Imagine these\ntwo classes:</p>\n<pre><code>public partial class Person: IPerson \n{\n    public Person() \n    {\n    }\n}\n\npublic partial class Woman: Person\n{\n    public Woman()\n    {\n    }\n}\n</code></pre>\n<p><code>Woman</code> is derived from <code>Person</code>, obviously. Now consider you have these two functions:</p>\n<pre><code>static void WorkWithPerson(Person person)\n{\n}\n\nstatic void WorkWithWoman(Woman woman)\n{\n}\n</code></pre>\n<p>One of the functions does something(it doesn't matter what) with a <code>Woman</code>, the other is more general and can work with any type derived from <code>Person</code>. On the <code>Woman</code> side of things, you now also have these:</p>\n<pre><code>delegate void AcceptWomanDelegate(Woman person);\n\nstatic void DoWork(Woman woman, AcceptWomanDelegate acceptWoman)\n{\n    acceptWoman(woman);\n}\n</code></pre>\n<p><code>DoWork</code> is a function that can take a <code>Woman</code> and a reference to a function that also takes a <code>Woman</code>, and then it passes the instance of <code>Woman</code> to the delegate. Consider the <em>polymorphism</em> of the elements you have here. <code>Person</code> is <em>larger</em> than <code>Woman</code>, and <code>WorkWithPerson</code> is <em>larger</em> than <code>WorkWithWoman</code>.\n<code>WorkWithPerson</code> is also considered <em>larger</em> than <code>AcceptWomanDelegate</code> for the purpose of variance.</p>\n<p>Finally, you have these three lines of code:</p>\n<pre><code>var woman = new Woman();\nDoWork(woman, WorkWithWoman);\nDoWork(woman, WorkWithPerson);\n</code></pre>\n<p>A <code>Woman</code> instance is created. Then DoWork is called, passing in the <code>Woman</code> instance as well as a reference to the <code>WorkWithWoman</code> method. The latter is obviously compatible with the delegate type <code>AcceptWomanDelegate</code> — one parameter of type <code>Woman</code>, no return type.\nThe third line is a bit odd, though. The method <code>WorkWithPerson</code> takes a <code>Person</code> as parameter, not a <code>Woman</code>, as required by <code>AcceptWomanDelegate</code>. Nevertheless, <code>WorkWithPerson</code> is compatible with the delegate type. <em><strong>Contravariance</strong></em> makes it possible, so in the case of delegates the larger type <code>WorkWithPerson</code> can be stored in a variable of the smaller type <code>AcceptWomanDelegate</code>. Once more it's the intuitive thing: <em><strong>if <code>WorkWithPerson</code> can work with any <code>Person</code>, passing in a <code>Woman</code> can't be wrong</strong></em>, right?</p>\n<p>By now, you may be wondering how all this relates to generics. The answer is that variance can be applied to generics as well. The preceding example used <code>object</code> and <code>string</code> arrays. Here the code uses generic lists instead of the arrays:</p>\n<pre><code>var objectList = new List&lt;object&gt;();\nvar stringList = new List&lt;string&gt;();\nobjectList = stringList;\n</code></pre>\n<p>If you try this out, you will find that this is not a supported scenario in C#. In C# version 4.0 as well as .Net framework 4.0, variance support in generics has been cleaned up, and it is now possible to use the new keywords <em><strong>in</strong></em> and <em><strong>out</strong></em> with generic type parameters. They can define and restrict the direction of data flow for a particular type parameter, allowing variance to work. But in the case of <code>List&lt;T&gt;</code>, the data of type <code>T</code> flows in both directions — there are methods on the type <code>List&lt;T&gt;</code> that return <code>T</code> values, and others that receive such values.</p>\n<p>The point of these directional restrictions is <strong>to allow variance where it makes sense</strong>, but to <strong>prevent problems</strong> like the runtime error mentioned in one of the previous array examples. When type parameters are correctly decorated with <em>in</em> or <em>out</em>, the compiler can check, and allow or disallow, its variance at <em><strong>compile time</strong></em>. Microsoft has gone to the effort of adding these keywords to many standard interfaces in .Net framework, like <code>IEnumerable&lt;T&gt;</code>:</p>\n<pre><code>public interface IEnumerable&lt;out T&gt;: IEnumerable\n{\n    // ...\n}\n</code></pre>\n<p>For this interface, the data flow of type <code>T</code> objects is clear: <em><strong>they can only ever be retrieved from methods supported by this interface, not passed into them</strong></em>. As a result, it is possible to construct an example similar to the <code>List&lt;T&gt;</code> attempt described previously, but using <code>IEnumerable&lt;T&gt;</code> :</p>\n<pre><code>IEnumerable&lt;object&gt; objectSequence = new List&lt;object&gt;();\nIEnumerable&lt;string&gt; stringSequence = new List&lt;string&gt;();\nobjectSequence = stringSequence;\n</code></pre>\n<p>This code is acceptable to the C# compiler since version 4.0 because <code>IEnumerable&lt;T&gt;</code> is covariant due to the <em>out</em> specifier on the type parameter <code>T</code>.</p>\n<p>When working with generic types, it is important to be aware of variance and the way the compiler is applying various kinds of trickery in order to make your code work the way you expect it to.</p>\n<p>There's more to know about variance than is covered in this chapter, but this shall suffice to make all further code understandable.</p>\n<p>Ref:</p>\n<ul>\n<li><a href=\"https://rads.stackoverflow.com/amzn/click/com/0470744588\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\"><code>PROFESSIONAL Functional Programming in C#</code></a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1922764,"reputation":154,"user_id":1733857,"accept_rate":57,"display_name":"Skyrim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594938795,"creation_date":1351076122,"answer_id":13047778,"question_id":1163465,"body_markdown":"Both C# and the CLR allow for covariance and contra-variance of reference types when\r\nbinding a method to a delegate. Covariance means that a method can return a type that is\r\nderived from the delegate’s return type. Contra-variance means that a method can take a\r\nparameter that is a base of the delegate’s parameter type. For example, given a delegate\r\ndefined like this:\r\n\r\n    delegate Object MyCallback(FileStream s);\r\n\r\nIt is possible to construct an instance of this delegate type bound to a method that is prototyped\r\n\r\nLike this:\r\n\r\n    String SomeMethod(Stream s);\r\n\r\nHere, SomeMethod’s return type (String) is a type that is derived from the delegate’s return type (Object); this covariance is allowed. SomeMethod’s parameter type (Stream) is a type that is a base class of the delegate’s parameter type (FileStream); this contra-variance is allowed.\r\n\r\nNote that covariance and contra-variance are supported only for reference types, not for value types or for void. So, for example, I cannot bind the following method to the MyCallback delegate:\r\n\r\n    Int32 SomeOtherMethod(Stream s);\r\n\r\nEven though SomeOtherMethod’s return type (Int32) is derived from MyCallback’s return\r\ntype (Object), this form of covariance is not allowed because Int32 is a value type.\r\n\r\nObviously, the reason why value types and void cannot be used for covariance and\r\ncontra-variance is because the memory structure for these things varies, whereas the\r\nmemory structure for reference types is always a pointer. Fortunately, the C# compiler will\r\nproduce an error if you attempt to do something that is not supported.","title":"What is the difference between covariance and contra-variance in programming languages?","body":"<p>Both C# and the CLR allow for covariance and contra-variance of reference types when\nbinding a method to a delegate. Covariance means that a method can return a type that is\nderived from the delegate’s return type. Contra-variance means that a method can take a\nparameter that is a base of the delegate’s parameter type. For example, given a delegate\ndefined like this:</p>\n<pre><code>delegate Object MyCallback(FileStream s);\n</code></pre>\n<p>It is possible to construct an instance of this delegate type bound to a method that is prototyped</p>\n<p>Like this:</p>\n<pre><code>String SomeMethod(Stream s);\n</code></pre>\n<p>Here, SomeMethod’s return type (String) is a type that is derived from the delegate’s return type (Object); this covariance is allowed. SomeMethod’s parameter type (Stream) is a type that is a base class of the delegate’s parameter type (FileStream); this contra-variance is allowed.</p>\n<p>Note that covariance and contra-variance are supported only for reference types, not for value types or for void. So, for example, I cannot bind the following method to the MyCallback delegate:</p>\n<pre><code>Int32 SomeOtherMethod(Stream s);\n</code></pre>\n<p>Even though SomeOtherMethod’s return type (Int32) is derived from MyCallback’s return\ntype (Object), this form of covariance is not allowed because Int32 is a value type.</p>\n<p>Obviously, the reason why value types and void cannot be used for covariance and\ncontra-variance is because the memory structure for these things varies, whereas the\nmemory structure for reference types is always a pointer. Fortunately, the C# compiler will\nproduce an error if you attempt to do something that is not supported.</p>\n"},{"tags":[],"owner":{"account_id":6115775,"reputation":30435,"user_id":4770877,"display_name":"yoAlex5"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1658416095,"creation_date":1594026901,"answer_id":62752867,"question_id":1163465,"body_markdown":"**Variance, Covariance, Contravariance, Invariance**\r\n\r\n**Type(T)**\r\n\r\n`composite data type` - is a type which is built out of another type. For example it can be generic, container(collection), optional[&lt;sup&gt;\\[example\\]&lt;/sup&gt;][1] \r\n\r\n`method&#39;s type` - method&#39;s `parameter type`(pre-condition) and `return type`(post-condition)[&lt;sup&gt;\\[About\\]&lt;/sup&gt;][2]\r\n\r\n**Variance**\r\n\r\n`Variance` - is about assignment compatibility. It is an ability to use a `derived type` **instead of** `original type`. It is **not** `parent-child` relationship\r\n\r\n``` none\r\nX(T) - `composite data type` or `method type` X, with type T\r\n```\r\n\r\n`Covariance`(**same** subtyping direction) you are able to assign **more** `derived type` than `original type`(strives for -&gt; X(C))\r\n\r\n`X(T) covariant` or `X(T1) is covariant to X(T2)` when relation T1 to T2 is the same as X(T1) to X(T2)\r\n\r\n`Contravariance`(**opposite** subtyping direction) you are able to assign **less** `derived type` then `original type`(strives for -&gt; X(A))\r\n\r\n`X(T) contravariant` or `X(T1) is contravariant to X(T2)` when relation T1 to T2 is the same as X(T2) to X(T1)\r\n\r\n`Invariance` neither `Covariance` not `Contravariance`. There is exists also [&lt;sup&gt;\\[Class Invariant\\]&lt;/sup&gt;][3] \r\n\r\n\r\n**Examples**\r\n\r\nClass directions, pseudocode\r\n```\r\n//C -&gt; B -&gt; A\r\n\r\nclass A {}\r\nclass B: A {}\r\nclass C: B {}\r\n```\r\n\r\nReference type Array in Java is covariant\r\n``` Java\r\nA[] aArray = new A[2];\r\nB[] bArray = new B[2];\r\n\r\n//A - original type, B - more derived type\r\n//B[] is covariant to A[]\r\naArray = bArray;\r\n```\r\n\r\n``` Java\r\nclass Generic&lt;T&gt; { }\r\n\r\n//A - original type, B - more derived type\r\n//Generic&lt;B&gt; is covariant to Generic&lt;A&gt;\r\n//assign more derived type(B) than original type(A)\r\nGeneric&lt;? extends A&gt; ref = new Generic&lt;B&gt;(); //covariant\r\n\r\n//B - original type, A - less derived type\r\n//Generic&lt;B&gt; is contravariant to Generic&lt;A&gt;\r\n//assign less derived type(A) then original type(B)\r\nGeneric&lt;? super B&gt; ref = new Generic&lt;A&gt;(); //contravariant\r\n\r\n&lt;sub_type&gt; covariant/contravariant to &lt;super_type&gt;\r\n```\r\n\r\nSwift\r\n - Array\r\n - Generic\r\n - Closure\r\n\r\nSwift Array is covariance\r\n```\r\nlet array:[B] = [C()]\r\n```\r\n\r\nSwift Generic is Invariance\r\n```\r\nclass Wrapper&lt;T&gt; {\r\n    let value: T\r\n    \r\n    init(value: T) {\r\n        self.value = value\r\n    }\r\n}\r\n```\r\n\r\n```\r\nlet generic1: Wrapper&lt;A&gt; = Wrapper&lt;B&gt;(value: B()) //ERROR: Cannot assign value of type &#39;Wrapper&lt;B&gt;&#39; to type &#39;Wrapper&lt;A&gt;&#39;\r\nlet generic2: Wrapper&lt;B&gt; = Wrapper&lt;A&gt;(value: A()) //ERROR: Cannot assign value of type &#39;Wrapper&lt;A&gt;&#39; to type &#39;Wrapper&lt;B&gt;&#39;\r\n```\r\n\r\n**Swift closure**\r\n\r\nclosure’s return type is covariance\r\nclosure’s argument type is contravariance\r\n\r\n```\r\nvar foo1: (A) -&gt; C = { _ in return C() }\r\nlet foo2: (B) -&gt; B = foo1\r\n\r\ncovariance\r\n() -&gt; B = () -&gt; C\r\n\r\ncontravariance \r\n(A) -&gt; Void = (B) -&gt; Void\r\n```\r\n\r\n[\\[Liskov principle\\]][2]\r\n\r\n[\\[Java generics\\]][4]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/61232621/4770877\r\n  [2]: https://stackoverflow.com/a/64789005/4770877\r\n  [3]: https://stackoverflow.com/a/64788342/4770877\r\n  [4]: https://stackoverflow.com/a/62171149/4770877","title":"What is the difference between covariance and contra-variance in programming languages?","body":"<p><strong>Variance, Covariance, Contravariance, Invariance</strong></p>\n<p><strong>Type(T)</strong></p>\n<p><code>composite data type</code> - is a type which is built out of another type. For example it can be generic, container(collection), optional<a href=\"https://stackoverflow.com/a/61232621/4770877\"><sup>[example]</sup></a></p>\n<p><code>method's type</code> - method's <code>parameter type</code>(pre-condition) and <code>return type</code>(post-condition)<a href=\"https://stackoverflow.com/a/64789005/4770877\"><sup>[About]</sup></a></p>\n<p><strong>Variance</strong></p>\n<p><code>Variance</code> - is about assignment compatibility. It is an ability to use a <code>derived type</code> <strong>instead of</strong> <code>original type</code>. It is <strong>not</strong> <code>parent-child</code> relationship</p>\n<pre class=\"lang-none prettyprint-override\"><code>X(T) - `composite data type` or `method type` X, with type T\n</code></pre>\n<p><code>Covariance</code>(<strong>same</strong> subtyping direction) you are able to assign <strong>more</strong> <code>derived type</code> than <code>original type</code>(strives for -&gt; X(C))</p>\n<p><code>X(T) covariant</code> or <code>X(T1) is covariant to X(T2)</code> when relation T1 to T2 is the same as X(T1) to X(T2)</p>\n<p><code>Contravariance</code>(<strong>opposite</strong> subtyping direction) you are able to assign <strong>less</strong> <code>derived type</code> then <code>original type</code>(strives for -&gt; X(A))</p>\n<p><code>X(T) contravariant</code> or <code>X(T1) is contravariant to X(T2)</code> when relation T1 to T2 is the same as X(T2) to X(T1)</p>\n<p><code>Invariance</code> neither <code>Covariance</code> not <code>Contravariance</code>. There is exists also <a href=\"https://stackoverflow.com/a/64788342/4770877\"><sup>[Class Invariant]</sup></a></p>\n<p><strong>Examples</strong></p>\n<p>Class directions, pseudocode</p>\n<pre><code>//C -&gt; B -&gt; A\n\nclass A {}\nclass B: A {}\nclass C: B {}\n</code></pre>\n<p>Reference type Array in Java is covariant</p>\n<pre><code>A[] aArray = new A[2];\nB[] bArray = new B[2];\n\n//A - original type, B - more derived type\n//B[] is covariant to A[]\naArray = bArray;\n</code></pre>\n<pre><code>class Generic&lt;T&gt; { }\n\n//A - original type, B - more derived type\n//Generic&lt;B&gt; is covariant to Generic&lt;A&gt;\n//assign more derived type(B) than original type(A)\nGeneric&lt;? extends A&gt; ref = new Generic&lt;B&gt;(); //covariant\n\n//B - original type, A - less derived type\n//Generic&lt;B&gt; is contravariant to Generic&lt;A&gt;\n//assign less derived type(A) then original type(B)\nGeneric&lt;? super B&gt; ref = new Generic&lt;A&gt;(); //contravariant\n\n&lt;sub_type&gt; covariant/contravariant to &lt;super_type&gt;\n</code></pre>\n<p>Swift</p>\n<ul>\n<li>Array</li>\n<li>Generic</li>\n<li>Closure</li>\n</ul>\n<p>Swift Array is covariance</p>\n<pre><code>let array:[B] = [C()]\n</code></pre>\n<p>Swift Generic is Invariance</p>\n<pre><code>class Wrapper&lt;T&gt; {\n    let value: T\n    \n    init(value: T) {\n        self.value = value\n    }\n}\n</code></pre>\n<pre><code>let generic1: Wrapper&lt;A&gt; = Wrapper&lt;B&gt;(value: B()) //ERROR: Cannot assign value of type 'Wrapper&lt;B&gt;' to type 'Wrapper&lt;A&gt;'\nlet generic2: Wrapper&lt;B&gt; = Wrapper&lt;A&gt;(value: A()) //ERROR: Cannot assign value of type 'Wrapper&lt;A&gt;' to type 'Wrapper&lt;B&gt;'\n</code></pre>\n<p><strong>Swift closure</strong></p>\n<p>closure’s return type is covariance\nclosure’s argument type is contravariance</p>\n<pre><code>var foo1: (A) -&gt; C = { _ in return C() }\nlet foo2: (B) -&gt; B = foo1\n\ncovariance\n() -&gt; B = () -&gt; C\n\ncontravariance \n(A) -&gt; Void = (B) -&gt; Void\n</code></pre>\n<p><a href=\"https://stackoverflow.com/a/64789005/4770877\">[Liskov principle]</a></p>\n<p><a href=\"https://stackoverflow.com/a/62171149/4770877\">[Java generics]</a></p>\n"}],"owner":{"account_id":25344,"reputation":20890,"user_id":65120,"accept_rate":56,"display_name":"xdevel2000"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14051,"favorite_count":0,"down_vote_count":1,"up_vote_count":36,"closed_date":1594939393,"accepted_answer_id":1163491,"answer_count":4,"score":35,"last_activity_date":1700763672,"creation_date":1248245350,"question_id":1163465,"body_markdown":"Can anyone explain the concept of covariance and contravariance in\r\nprogramming language theory? ","title":"What is the difference between covariance and contra-variance in programming languages?","body":"<p>Can anyone explain the concept of covariance and contravariance in\nprogramming language theory?</p>\n"},{"tags":["java","loops"],"comments":[{"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"score":1,"creation_date":1700636538,"post_id":77527886,"comment_id":136677538,"body_markdown":"Does this answer your question? [What causes a java.lang.ArrayIndexOutOfBoundsException and how do I prevent it?](https://stackoverflow.com/questions/5554734/what-causes-a-java-lang-arrayindexoutofboundsexception-and-how-do-i-prevent-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/5554734/what-causes-a-java-lang-arrayindexoutofboundsexception-and-how-do-i-prevent-it\">What causes a java.lang.ArrayIndexOutOfBoundsException and how do I prevent it?</a>"},{"owner":{"account_id":6234997,"reputation":317,"user_id":4850588,"display_name":"developer-vivekjain"},"score":2,"creation_date":1700637583,"post_id":77527886,"comment_id":136677694,"body_markdown":"while you are ruining your program, are you passing the parameter ? Might be that is causing the problem.","body":"while you are ruining your program, are you passing the parameter ? Might be that is causing the problem."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":2,"creation_date":1700639027,"post_id":77527886,"comment_id":136677923,"body_markdown":"that is not an &quot;*Eclipseerror*&quot; (as mentioned in the title) but just an &quot;*ArrayIndexOutOfBoundsException*&quot; (asked very often on this site) -- that happens if you code something like `args[0]` but the array does not have that element, that is, the index is out of bounds (negative or too large). In this particular case, the array is empty (program started without any arguments)","body":"that is not an &quot;<i>Eclipseerror</i>&quot; (as mentioned in the title) but just an &quot;<i>ArrayIndexOutOfBoundsException</i>&quot; (asked very often on this site) -- that happens if you code something like <code>args[0]</code> but the array does not have that element, that is, the index is out of bounds (negative or too large). In this particular case, the array is empty (program started without any arguments)"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1700639620,"post_id":77527886,"comment_id":136678016,"body_markdown":"Does this answer your question? [String\\[\\] args parameter: java.lang.ArrayIndexOutOfBoundsException](https://stackoverflow.com/questions/19007178/string-args-parameter-java-lang-arrayindexoutofboundsexception) Alternatively, you might want to check [this question and its answers](https://stackoverflow.com/q/373328/10871900)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/19007178/string-args-parameter-java-lang-arrayindexoutofboundsexception\">String&#91;&#93; args parameter: java.lang.ArrayIndexOutOfBoundsException</a> Alternatively, you might want to check <a href=\"https://stackoverflow.com/q/373328/10871900\">this question and its answers</a>"},{"owner":{"account_id":29963799,"reputation":11,"user_id":22962818,"display_name":"scorpianwolf"},"score":0,"creation_date":1700641476,"post_id":77527886,"comment_id":136678316,"body_markdown":"what should i do for it? @user85421","body":"what should i do for it? @user85421"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1700642030,"post_id":77527886,"comment_id":136678397,"body_markdown":"1) before accessing the array, check if it has enough elements (`args.length`), printing an error message (usage) if not; and 2) provide the required arguments when starting the program","body":"1) before accessing the array, check if it has enough elements (<code>args.length</code>), printing an error message (usage) if not; and 2) provide the required arguments when starting the program"},{"owner":{"account_id":29963799,"reputation":11,"user_id":22962818,"display_name":"scorpianwolf"},"score":0,"creation_date":1700642150,"post_id":77527886,"comment_id":136678418,"body_markdown":"i did all in earliear program above. same program run in cmd working ok but not in eclipse ,whenever i run a program there is a pop up occcure  in eclipse asking again to run and then this above error occure \n@developer-vivekjain","body":"i did all in earliear program above. same program run in cmd working ok but not in eclipse ,whenever i run a program there is a pop up occcure  in eclipse asking again to run and then this above error occure  @developer-vivekjain"}],"answers":[{"tags":[],"owner":{"account_id":5941380,"reputation":4127,"user_id":4672460,"accept_rate":100,"display_name":"Selaka Nanayakkara"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700762154,"creation_date":1700762154,"answer_id":77538894,"question_id":77527886,"body_markdown":"You dont need to have String Args simple get he users input via scanner and check if it is passed or fail.\r\n\r\n&gt; Refer the below working exaple [here][1].\r\n\r\n\r\nSample code :\r\n\r\n    import java.util.Scanner;\r\n    public class Main {\r\n    \r\n        public static void main(String[] args) {\r\n            int mark =0;\r\n            \r\n            Scanner sn = new Scanner (System.in);\r\n            System.out.println (&quot;Enter the value =&quot;);\r\n            mark = sn.nextInt();\r\n      \r\n            if (mark&gt;=50) {\r\n                System.out.println(&quot;pass&quot;);\r\n            } else {\r\n                System.out.println(&quot;fail&quot;);\r\n            }   \r\n        }   \r\n    }\r\n\r\n\r\n  [1]: https://onlinegdb.com/s9ReZ4gzBV","title":"Eclipseerror while doind problem of if and else","body":"<p>You dont need to have String Args simple get he users input via scanner and check if it is passed or fail.</p>\n<blockquote>\n<p>Refer the below working exaple <a href=\"https://onlinegdb.com/s9ReZ4gzBV\" rel=\"nofollow noreferrer\">here</a>.</p>\n</blockquote>\n<p>Sample code :</p>\n<pre><code>import java.util.Scanner;\npublic class Main {\n\n    public static void main(String[] args) {\n        int mark =0;\n        \n        Scanner sn = new Scanner (System.in);\n        System.out.println (&quot;Enter the value =&quot;);\n        mark = sn.nextInt();\n  \n        if (mark&gt;=50) {\n            System.out.println(&quot;pass&quot;);\n        } else {\n            System.out.println(&quot;fail&quot;);\n        }   \n    }   \n}\n</code></pre>\n"}],"owner":{"account_id":29963799,"reputation":11,"user_id":22962818,"display_name":"scorpianwolf"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700762154,"creation_date":1700636382,"question_id":77527886,"body_markdown":"```java\r\nException in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: Index 0 out of bounds for length 0\r\n\tat newfreecode2.Main.main(Main.java:7)\r\n```\r\nthis error comes in while my code is \r\n```\r\npublic class Main {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tint mark=Integer.parseInt(args[0]); \r\n\t\tif (mark&gt;=50) {\r\n\t\t    System.out.println(&quot;pass&quot;);\r\n\t\t} else {\r\n\t\t\tSystem.out.println(&quot;fail&quot;);\r\n\t\t}\t\r\n    }\t\r\n}\r\n```\r\ni dont get what this error actually means i m new in java still learning could you help me please","title":"Eclipseerror while doind problem of if and else","body":"<pre class=\"lang-java prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: Index 0 out of bounds for length 0\n    at newfreecode2.Main.main(Main.java:7)\n</code></pre>\n<p>this error comes in while my code is</p>\n<pre><code>public class Main {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        int mark=Integer.parseInt(args[0]); \n        if (mark&gt;=50) {\n            System.out.println(&quot;pass&quot;);\n        } else {\n            System.out.println(&quot;fail&quot;);\n        }   \n    }   \n}\n</code></pre>\n<p>i dont get what this error actually means i m new in java still learning could you help me please</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":1,"creation_date":1700764442,"post_id":77538860,"comment_id":136697149,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551)","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a>"}],"owner":{"account_id":29977271,"reputation":1,"user_id":22973173,"display_name":"Ibrahim bwardy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700761812,"creation_date":1700761812,"question_id":77538860,"body_markdown":"I have this gcd calculation using the euclidean law .. then I calculate the linear combination as it shown under ... I wrote a program the finds them but I have a problem with the second part how could I print the linear combination backwards as it shown under In java (I want to sum the Coefficient of the same number)\r\n\r\nThis is the output of the program \r\n\r\n\r\n \r\n[enter image description here](https://i.stack.imgur.com/1BMUh.jpg)","title":"Gcd and linear combination (backwards) program in java with steps","body":"<p>I have this gcd calculation using the euclidean law .. then I calculate the linear combination as it shown under ... I wrote a program the finds them but I have a problem with the second part how could I print the linear combination backwards as it shown under In java (I want to sum the Coefficient of the same number)</p>\n<p>This is the output of the program</p>\n<p><a href=\"https://i.stack.imgur.com/1BMUh.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","elasticsearch","solr","lucene","opensearch"],"comments":[{"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1700764461,"post_id":77538839,"comment_id":136697152,"body_markdown":"This is the same question as https://stackoverflow.com/questions/77536560/issues-on-searching-with-stop-words. Maybe delete the other one if this one is of better quality.","body":"This is the same question as <a href=\"https://stackoverflow.com/questions/77536560/issues-on-searching-with-stop-words\" title=\"issues on searching with stop words\">stackoverflow.com/questions/77536560/&hellip;</a>. Maybe delete the other one if this one is of better quality."},{"owner":{"account_id":46578,"reputation":50301,"user_id":137650,"display_name":"MatsLindh"},"score":0,"creation_date":1700769848,"post_id":77538839,"comment_id":136697799,"body_markdown":"I&#39;m not sure how this is related to Solr?","body":"I&#39;m not sure how this is related to Solr?"}],"owner":{"account_id":29218316,"reputation":13,"user_id":22384611,"display_name":"JAY"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700761629,"creation_date":1700761629,"question_id":77538839,"body_markdown":"In Elasticsearch, when searching with a stop keyword like &quot;is,&quot; &quot;on,&quot; or &quot;the,&quot; it gets replaced with &quot;?&quot; during the search process. For instance, &quot;circular on AI&quot; becomes &quot;circular ? AI,&quot; yielding the expected result. However, undesired results such as &quot;circular of AI&quot; or &quot;circular demo AI&quot; also appear. While it&#39;s acceptable for &quot;?&quot; to be replaced by a stop word, it&#39;s problematic when replaced by any word. The desired outcome is to obtain results containing only stop words, like &quot;circular stop word AI.&quot; How can I achieve this specific behavior in Elasticsearch?\r\n\r\nWhen using Elasticsearch, a search with stop keywords like &quot;is&quot; gets replaced with &quot;?&quot; but may also yield results with arbitrary words like &quot;of&quot; or &quot;demo.&quot; To ensure results only include stop words, such as &quot;circular stop word AI,&quot; rather than any word, how can this be achieved in Elasticsearch?","title":"Stop word in elasticsearch","body":"<p>In Elasticsearch, when searching with a stop keyword like &quot;is,&quot; &quot;on,&quot; or &quot;the,&quot; it gets replaced with &quot;?&quot; during the search process. For instance, &quot;circular on AI&quot; becomes &quot;circular ? AI,&quot; yielding the expected result. However, undesired results such as &quot;circular of AI&quot; or &quot;circular demo AI&quot; also appear. While it's acceptable for &quot;?&quot; to be replaced by a stop word, it's problematic when replaced by any word. The desired outcome is to obtain results containing only stop words, like &quot;circular stop word AI.&quot; How can I achieve this specific behavior in Elasticsearch?</p>\n<p>When using Elasticsearch, a search with stop keywords like &quot;is&quot; gets replaced with &quot;?&quot; but may also yield results with arbitrary words like &quot;of&quot; or &quot;demo.&quot; To ensure results only include stop words, such as &quot;circular stop word AI,&quot; rather than any word, how can this be achieved in Elasticsearch?</p>\n"},{"tags":["java","quarkus","quarkus-reactive"],"owner":{"account_id":29963100,"reputation":11,"user_id":22962284,"display_name":"Julia Muraveva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1700761422,"creation_date":1700642215,"question_id":77528402,"body_markdown":"I&#39;m working on a reactive application using Hibernate Reactive with Panache and am trying to implement a repository-service-rest-controller architecture. \r\nHere&#39;s my rest-controller method:\r\n```\r\n@GET\r\n@Path(&quot;/translations/{language}&quot;)\r\npublic Uni&lt;List&lt;EntityTranslationTo&gt;&gt; getEntityTranslations(@PathParam(&quot;language&quot;) String langCode) {\r\n    return entityTranslationService.getAllEntityTranslationsTo(langCode);\r\n}\r\n```\r\n\r\nThis controller calls the following service method:\r\n```\r\npublic Uni&lt;List&lt;EntityTranslationTo&gt;&gt; getAllEntityTranslationsTo(String langCode) {\r\n    Uni&lt;List&lt;EntityTranslationTo&gt;&gt; entityTranslationQuery = repository.getAllEntityTranslations(langCode.toLowerCase())\r\n            .onItem().transform(translations -&gt; translations.stream()\r\n                    .map(translation -&gt; new EntityTranslationTo(translation.getEntity().getId(), translation.getTranslation()))\r\n                    .collect(Collectors.toList()));\r\n    return PanacheExceptionHandler.handleDatabaseError(entityTranslationQuery, &quot;Database connection exception&quot;);\r\n}\r\n```\r\n\r\nAnd the service, in turn, calls this repository method:\r\n```\r\npublic Uni&lt;List&lt;EntityTranslation&gt;&gt; getAllEntityTranslations(String langCode) {\r\n    Uni&lt;List&lt;EntityTranslation&gt;&gt; entityTranslationQuery = find(&quot;langCode&quot;, langCode).list();\r\n    return PanacheExceptionHandler.handleDatabaseError(entityTranslationQuery, &quot;Database connection exception&quot;);\r\n}\r\n```\r\n\r\nThis code worked flawlessly in Quarkus version 2.16.7.Final. However, after updating to 3.4.3, I&#39;m encountering this error:\r\n```\r\njava.lang.IllegalStateException: No current Mutiny.Session found\r\n- no reactive session was found in the context and the context was not marked to open a new session lazily\r\n- you might need to annotate the business method with @WithSession\r\n```\r\n\r\nThe migration guide for version 3.0 (https://github.com/quarkusio/quarkus/wiki/Migration-Guide-3.0#hibernate-reactive-panache) mentions that in some cases, the session is automatically opened on demand, especially when a Panache entity method is invoked in a JAX-RS resource method in an application with the quarkus-resteasy-reactive extension. But in other cases, it&#39;s not as clear.\r\n\r\nWhy is this happening? Both the service and the repository should be called within the JAX-RS context. If I move all the logic from the service to the controller and eliminate the service, the code works without errors. It seems that the context is somehow lost when the service is involved.\r\n\r\nIf the code is left as is and the @WithSession annotation is added to the repository method, it will also work.\r\n\r\nHas anyone faced this issue and found a solution? I couldn&#39;t find relevant examples in the official documentation.","title":"Missing @WithSession with quarkus-resteasy-reactive causes java.lang.IllegalStateException: No current Mutiny.Session found","body":"<p>I'm working on a reactive application using Hibernate Reactive with Panache and am trying to implement a repository-service-rest-controller architecture.\nHere's my rest-controller method:</p>\n<pre><code>@GET\n@Path(&quot;/translations/{language}&quot;)\npublic Uni&lt;List&lt;EntityTranslationTo&gt;&gt; getEntityTranslations(@PathParam(&quot;language&quot;) String langCode) {\n    return entityTranslationService.getAllEntityTranslationsTo(langCode);\n}\n</code></pre>\n<p>This controller calls the following service method:</p>\n<pre><code>public Uni&lt;List&lt;EntityTranslationTo&gt;&gt; getAllEntityTranslationsTo(String langCode) {\n    Uni&lt;List&lt;EntityTranslationTo&gt;&gt; entityTranslationQuery = repository.getAllEntityTranslations(langCode.toLowerCase())\n            .onItem().transform(translations -&gt; translations.stream()\n                    .map(translation -&gt; new EntityTranslationTo(translation.getEntity().getId(), translation.getTranslation()))\n                    .collect(Collectors.toList()));\n    return PanacheExceptionHandler.handleDatabaseError(entityTranslationQuery, &quot;Database connection exception&quot;);\n}\n</code></pre>\n<p>And the service, in turn, calls this repository method:</p>\n<pre><code>public Uni&lt;List&lt;EntityTranslation&gt;&gt; getAllEntityTranslations(String langCode) {\n    Uni&lt;List&lt;EntityTranslation&gt;&gt; entityTranslationQuery = find(&quot;langCode&quot;, langCode).list();\n    return PanacheExceptionHandler.handleDatabaseError(entityTranslationQuery, &quot;Database connection exception&quot;);\n}\n</code></pre>\n<p>This code worked flawlessly in Quarkus version 2.16.7.Final. However, after updating to 3.4.3, I'm encountering this error:</p>\n<pre><code>java.lang.IllegalStateException: No current Mutiny.Session found\n- no reactive session was found in the context and the context was not marked to open a new session lazily\n- you might need to annotate the business method with @WithSession\n</code></pre>\n<p>The migration guide for version 3.0 (<a href=\"https://github.com/quarkusio/quarkus/wiki/Migration-Guide-3.0#hibernate-reactive-panache\" rel=\"nofollow noreferrer\">https://github.com/quarkusio/quarkus/wiki/Migration-Guide-3.0#hibernate-reactive-panache</a>) mentions that in some cases, the session is automatically opened on demand, especially when a Panache entity method is invoked in a JAX-RS resource method in an application with the quarkus-resteasy-reactive extension. But in other cases, it's not as clear.</p>\n<p>Why is this happening? Both the service and the repository should be called within the JAX-RS context. If I move all the logic from the service to the controller and eliminate the service, the code works without errors. It seems that the context is somehow lost when the service is involved.</p>\n<p>If the code is left as is and the @WithSession annotation is added to the repository method, it will also work.</p>\n<p>Has anyone faced this issue and found a solution? I couldn't find relevant examples in the official documentation.</p>\n"},{"tags":["java","sql","database","oracle","apache-commons-dbutils"],"comments":[{"owner":{"account_id":26978029,"reputation":6997,"user_id":20542862,"display_name":"Paul W"},"score":1,"creation_date":1700767566,"post_id":77538647,"comment_id":136697551,"body_markdown":"The use of IN with 1000 parameters to do batching like this causes a lot of problems. The parse time is excessive, the memory requirements for each cursor is extremely high, parsing concurrency latches and mutexes are held longer causing issues for other sessions, and the lack of bind variables means a new cursor is needed every time. It&#39;s not scalable. We shut down any user using this methodology for this reason. The appropriate way is to loop one row at a time. If you need batch processing, array insert the IDs into a temp table and use that to drive a one-time update or merge on the status.","body":"The use of IN with 1000 parameters to do batching like this causes a lot of problems. The parse time is excessive, the memory requirements for each cursor is extremely high, parsing concurrency latches and mutexes are held longer causing issues for other sessions, and the lack of bind variables means a new cursor is needed every time. It&#39;s not scalable. We shut down any user using this methodology for this reason. The appropriate way is to loop one row at a time. If you need batch processing, array insert the IDs into a temp table and use that to drive a one-time update or merge on the status."},{"owner":{"account_id":26978029,"reputation":6997,"user_id":20542862,"display_name":"Paul W"},"score":1,"creation_date":1700767667,"post_id":77538647,"comment_id":136697562,"body_markdown":"You can also build a client array and bind it to a procedure parameter input, which then in PL/SQL loops through the array and processes each update singly. This will perform quite well because you&#39;ve taken the network out of the loop.","body":"You can also build a client array and bind it to a procedure parameter input, which then in PL/SQL loops through the array and processes each update singly. This will perform quite well because you&#39;ve taken the network out of the loop."},{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":1,"creation_date":1700789701,"post_id":77538647,"comment_id":136699463,"body_markdown":"The traditional solution is to create a [private temporary table](https://docs.oracle.com/en/database/oracle/oracle-database/18/admin/managing-tables.html#GUID-9B373086-0760-4B18-9688-BACFF07EC74B), store all the IDs in it, and then just join it with the main query. This way the query won&#39;t be limited to 1000 elements, and can have much more values than that.","body":"The traditional solution is to create a <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/18/admin/managing-tables.html#GUID-9B373086-0760-4B18-9688-BACFF07EC74B\" rel=\"nofollow noreferrer\">private temporary table</a>, store all the IDs in it, and then just join it with the main query. This way the query won&#39;t be limited to 1000 elements, and can have much more values than that."},{"owner":{"account_id":7177469,"reputation":93,"user_id":5482836,"display_name":"Sijo Kurien"},"score":0,"creation_date":1700803090,"post_id":77538647,"comment_id":136700300,"body_markdown":"Thank you for the comments. That was helpful. What would be DBUtils.QueryRunner.batch would be doing? Will it create a temporary table internally? How is its mechanism of action? Also, it is mentioned looping will help but doesnt looping a performance hit, as it has to send the single query across network all the time?","body":"Thank you for the comments. That was helpful. What would be DBUtils.QueryRunner.batch would be doing? Will it create a temporary table internally? How is its mechanism of action? Also, it is mentioned looping will help but doesnt looping a performance hit, as it has to send the single query across network all the time?"}],"owner":{"account_id":7177469,"reputation":93,"user_id":5482836,"display_name":"Sijo Kurien"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700759299,"creation_date":1700759299,"question_id":77538647,"body_markdown":"We have an application which selects rows from database based on a status, processes it and updates the status, so that it is not picked up again. \r\nWe have been using Apache DBUtils Query Runner to execute the queries and to caste the items to a bean using a bean handler.\r\n\r\nWe have been using queryRunner.update(Connection, updateQuery) by giving a query which updates based on &#39;ID&#39;s using &#39;IN&#39; clause.\r\n\r\n    UPDATE TABLE SET STATUS = &#39;P&#39; WHERE ID IN (&#39;id1&#39;, &#39;id2&#39;....);\r\n\r\nBut we realized that Oracle has a limitation of 1000 items to keep in the &#39;IN&#39; clause but we wanted to try selecting more records and update them. This is because as the fetch count increased, we noticed better performance.\r\n\r\nSo we thought of using,\r\n\r\n    public int[] batch(Connection conn,\r\n                       String sql,\r\n                       Object[][] params)\r\n                throws SQLException;\r\n\r\nand pass the &#39;ID&#39;s in the params.\r\n\r\nI would like to know the below,\r\n\r\n1. In a plain select and update, which one will perform better, \r\n         a. Low fetch count and update using IN with lesser items. (higher number of loops).\r\n         b. Higher fetch count and update using IN with higher items. (lower number of loops).\r\n2. Does `QueryRunner.batch` have the limitation of 1000 items in &#39;IN&#39; statement or does it use a different mechanism? \r\n3. Does `QueryRunner.batch` actually update one by one and end up performing worse than using &#39;IN&#39; clause?\r\n\r\nKindly help me here. Apologies for multiple questions.","title":"DbUtils Query runner usage of batch performance","body":"<p>We have an application which selects rows from database based on a status, processes it and updates the status, so that it is not picked up again.\nWe have been using Apache DBUtils Query Runner to execute the queries and to caste the items to a bean using a bean handler.</p>\n<p>We have been using queryRunner.update(Connection, updateQuery) by giving a query which updates based on 'ID's using 'IN' clause.</p>\n<pre><code>UPDATE TABLE SET STATUS = 'P' WHERE ID IN ('id1', 'id2'....);\n</code></pre>\n<p>But we realized that Oracle has a limitation of 1000 items to keep in the 'IN' clause but we wanted to try selecting more records and update them. This is because as the fetch count increased, we noticed better performance.</p>\n<p>So we thought of using,</p>\n<pre><code>public int[] batch(Connection conn,\n                   String sql,\n                   Object[][] params)\n            throws SQLException;\n</code></pre>\n<p>and pass the 'ID's in the params.</p>\n<p>I would like to know the below,</p>\n<ol>\n<li>In a plain select and update, which one will perform better,\na. Low fetch count and update using IN with lesser items. (higher number of loops).\nb. Higher fetch count and update using IN with higher items. (lower number of loops).</li>\n<li>Does <code>QueryRunner.batch</code> have the limitation of 1000 items in 'IN' statement or does it use a different mechanism?</li>\n<li>Does <code>QueryRunner.batch</code> actually update one by one and end up performing worse than using 'IN' clause?</li>\n</ol>\n<p>Kindly help me here. Apologies for multiple questions.</p>\n"},{"tags":["java","excel","apache-poi"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1700759635,"post_id":77538645,"comment_id":136696477,"body_markdown":"Are you sure you&#39;re reading the sheet you think you&#39;re reading? What happens if you print out the name of the sheet?","body":"Are you sure you&#39;re reading the sheet you think you&#39;re reading? What happens if you print out the name of the sheet?"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":2,"creation_date":1700760001,"post_id":77538645,"comment_id":136696532,"body_markdown":"`SXSSF` is not made for reading but only for writing. See https://poi.apache.org/components/spreadsheet/how-to.html#sxssf: &quot;SXSSF achieves its low memory footprint by limiting access to the rows that are within a sliding window, while XSSF gives access to all rows in the document. Older rows that are no longer in the window become inaccessible, as they are written to the disk.&quot;","body":"<code>SXSSF</code> is not made for reading but only for writing. See <a href=\"https://poi.apache.org/components/spreadsheet/how-to.html#sxssf\" rel=\"nofollow noreferrer\">poi.apache.org/components/spreadsheet/how-to.html#sxssf</a>: &quot;SXSSF achieves its low memory footprint by limiting access to the rows that are within a sliding window, while XSSF gives access to all rows in the document. Older rows that are no longer in the window become inaccessible, as they are written to the disk.&quot;"}],"owner":{"account_id":29976936,"reputation":1,"user_id":22972923,"display_name":"Radosław Poprawa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700759271,"creation_date":1700759271,"question_id":77538645,"body_markdown":"I&#39;m trying to read rows from an Excel sheet which contains 148 rows. None of these rows are empty. When I use sheet.getRow(0), the result is null. The same situation occurs with sheet.getRow(47). However, starting from sheet.getRow(48), it returns the correct value.\r\n\r\nHere is a code:\r\n\r\n```\r\npublic void resizeColumns(){\r\n        if(workbook == null){\r\n            return;\r\n        }\r\n        var numberOfSheets = workbook.getNumberOfSheets();\r\n        for (int i = 0; i &lt; numberOfSheets; i++) {\r\n            var sheet = workbook.getSheetAt(i);\r\n            if (sheet.getPhysicalNumberOfRows() &gt; 0) {\r\n                var row = sheet.getRow(sheet.getFirstRowNum());\r\n                if(row != null){\r\n                    var cellIterator = row.cellIterator();\r\n                    while (cellIterator.hasNext()) {\r\n                        var cell = cellIterator.next();\r\n                        int columnIndex = cell.getColumnIndex();\r\n                        if (sheet instanceof SXSSFSheet) {\r\n                            ((SXSSFSheet) sheet).trackColumnForAutoSizing(columnIndex);\r\n                        }\r\n                        sheet.autoSizeColumn(columnIndex);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nI&#39;m using SXSSFWorkbook\r\n\r\nproblem line:\r\n\r\n```\r\nvar row = sheet.getRow(sheet.getFristRowNum())\r\n```\r\n\r\nI was trying to debug this method and observed the behavior I described above.","title":"Apache POI: getRow() Returns null although sheet contains non-empty rows","body":"<p>I'm trying to read rows from an Excel sheet which contains 148 rows. None of these rows are empty. When I use sheet.getRow(0), the result is null. The same situation occurs with sheet.getRow(47). However, starting from sheet.getRow(48), it returns the correct value.</p>\n<p>Here is a code:</p>\n<pre><code>public void resizeColumns(){\n        if(workbook == null){\n            return;\n        }\n        var numberOfSheets = workbook.getNumberOfSheets();\n        for (int i = 0; i &lt; numberOfSheets; i++) {\n            var sheet = workbook.getSheetAt(i);\n            if (sheet.getPhysicalNumberOfRows() &gt; 0) {\n                var row = sheet.getRow(sheet.getFirstRowNum());\n                if(row != null){\n                    var cellIterator = row.cellIterator();\n                    while (cellIterator.hasNext()) {\n                        var cell = cellIterator.next();\n                        int columnIndex = cell.getColumnIndex();\n                        if (sheet instanceof SXSSFSheet) {\n                            ((SXSSFSheet) sheet).trackColumnForAutoSizing(columnIndex);\n                        }\n                        sheet.autoSizeColumn(columnIndex);\n                    }\n                }\n            }\n        }\n    }\n</code></pre>\n<p>I'm using SXSSFWorkbook</p>\n<p>problem line:</p>\n<pre><code>var row = sheet.getRow(sheet.getFristRowNum())\n</code></pre>\n<p>I was trying to debug this method and observed the behavior I described above.</p>\n"},{"tags":["java","c++","winapi","cmd"],"comments":[{"owner":{"account_id":5809836,"reputation":33195,"user_id":4581301,"display_name":"user4581301"},"score":0,"creation_date":1700613986,"post_id":77526685,"comment_id":136675604,"body_markdown":"0xC0000005 is access violation. Somebody used a resource they don&#39;t own. Usually this is marching outside an array or using an uninitialized or dangling pointer, but just about anything could trigger it.","body":"0xC0000005 is access violation. Somebody used a resource they don&#39;t own. Usually this is marching outside an array or using an uninitialized or dangling pointer, but just about anything could trigger it."},{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1700617066,"post_id":77526685,"comment_id":136675883,"body_markdown":"You&#39;ll have to examine the complete OS stack dump (not the Java stack trace) to see where in the JNR-FFI library the error occurred.  Could be you passed an incorrect parameter somewhere, or there&#39;s a bug in the library.","body":"You&#39;ll have to examine the complete OS stack dump (not the Java stack trace) to see where in the JNR-FFI library the error occurred.  Could be you passed an incorrect parameter somewhere, or there&#39;s a bug in the library."}],"answers":[{"tags":[],"owner":{"account_id":29959217,"reputation":1,"user_id":22959393,"display_name":"SX12C"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700759208,"creation_date":1700759066,"answer_id":77538627,"question_id":77526685,"body_markdown":"Somebody pointed out that the last parameter in `WriteConsoleOutputCharacterW()` should have been a Pointer to a long var instead of an int.\r\n\r\n---\r\n\r\nChanging this:\r\n`int lpNumberOfCharsWritten = 0;` in &#39;WroteCMD()&#39;\r\n\r\n\r\n---\r\nto this:\r\n`Pointer lpNumberOfCharsWritten = Runtime.getSystemRuntime().getMemoryManager().allocate( Runtime.getSystemRuntime().findType( TypeAlias.int32_t ).size() );`\r\n\r\n---\r\nfixed the issue. I was using an int as a memory address and this was trying to write to, in this case, address 0.","title":"Using JNR-FFI to output a char table to CMD screen buffer crashes","body":"<p>Somebody pointed out that the last parameter in <code>WriteConsoleOutputCharacterW()</code> should have been a Pointer to a long var instead of an int.</p>\n<hr />\n<p>Changing this:\n<code>int lpNumberOfCharsWritten = 0;</code> in 'WroteCMD()'</p>\n<hr />\n<p>to this:\n<code>Pointer lpNumberOfCharsWritten = Runtime.getSystemRuntime().getMemoryManager().allocate( Runtime.getSystemRuntime().findType( TypeAlias.int32_t ).size() );</code></p>\n<hr />\n<p>fixed the issue. I was using an int as a memory address and this was trying to write to, in this case, address 0.</p>\n"}],"owner":{"account_id":29959217,"reputation":1,"user_id":22959393,"display_name":"SX12C"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700759208,"creation_date":1700612766,"question_id":77526685,"body_markdown":"I&#39;m trying to write a library in Java that&#39;ll use C++ code to access an write directly to console screen buffer in CMD. I&#39;ve managed to print out one time, but it crashes after that with exit code `0xC0000005`\r\n\r\n\r\n\r\nI used JNR-FFI library. This code now prints out the first frame of animation, pauses on if for a second and crashes.\r\n\r\nHere&#39;s that code:\r\n\r\n```\r\nimport jnr.ffi.LibraryLoader;\r\nimport jnr.ffi.Pointer;\r\n\r\npublic class Main {\r\n\r\n    public interface Kernel32 {\r\n        Kernel32 INSTANCE = LibraryLoader.create(Kernel32.class).load(&quot;kernel32&quot;);\r\n\r\n        int GENERIC_READ = 0x80000000;\r\n        int GENERIC_WRITE = 0x40000000;\r\n        int FILE_SHARE_READ = 0x00000001;\r\n        int FILE_SHARE_WRITE = 0x00000002;\r\n        int CONSOLE_TEXTMODE_BUFFER = 1;\r\n\r\n        Pointer CreateConsoleScreenBuffer(int dwDesiredAccess, int dwShareMode, Pointer lpSecurityAttributes, int dwFlags, Pointer lpScreenBufferData);\r\n        void SetConsoleActiveScreenBuffer(Pointer hConsoleOutput);\r\n        int WriteConsoleOutputCharacterW(Pointer hConsoleOutput, char[] lpCharacter, int nLength, int dwWriteCoord, int lpNumberOfCharsWritten);\r\n    }\r\n\r\n    private static final int nScreenWidth = 240;\r\n    private static final int nScreenHeight = 135;\r\n\r\n    static Kernel32 kernel32 = Kernel32.INSTANCE;\r\n\r\n    private static Pointer hConsole = kernel32.CreateConsoleScreenBuffer(\r\n            Kernel32.GENERIC_WRITE | Kernel32.GENERIC_READ,\r\n            Kernel32.FILE_SHARE_READ | Kernel32.FILE_SHARE_WRITE,\r\n            null,\r\n            Kernel32.CONSOLE_TEXTMODE_BUFFER,\r\n            null\r\n    );\r\n\r\n    public static void writeCMD(char[] screen){\r\n        try {\r\n            if (screen.length == (nScreenWidth * nScreenHeight) + 1) {\r\n                int lpNumberOfCharsWritten = 0;\r\n                System.out.println(kernel32.WriteConsoleOutputCharacterW(hConsole, screen, (nScreenWidth * nScreenHeight) + 1, 0, lpNumberOfCharsWritten));\r\n            }\r\n        } catch (Exception t) {\r\n            t.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        kernel32.SetConsoleActiveScreenBuffer(hConsole);\r\n\r\n        char[] screen = new char[(nScreenWidth * nScreenHeight) + 1];\r\n        for (int i = 0; i &lt; screen.length - 1; i++) {\r\n            screen[i] = &#39;-&#39;;\r\n        }\r\n        screen[screen.length - 1] = &#39;\\0&#39;;\r\n\r\n        int position = 0;\r\n        while(true){\r\n            screen[position] = &#39;#&#39;;\r\n            writeCMD(screen);\r\n            screen[position] = &#39;-&#39;;\r\n            position++;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nRunning it in CMD as mentioned prints the first frame, freezes on that for a sec and crashes with no exception, but running it in IntelliJ console gave me exit code `0xc0000005&#39; and found this in event viewer:\r\n\r\n```\r\nFaulting application name: java.exe, version: 20.0.2.0, time stamp: 0x75f7bb13\r\nFaulting module name: KERNELBASE.dll, version: 10.0.22621.2715, time stamp: 0x10f6a783\r\nException code: 0xc0000005\r\nFault offset: 0x00000000000b5bdc\r\nFaulting process id: 0x0x5B98\r\nFaulting application start time: 0x0x1DA1CB1377C8871\r\nFaulting application path: C:\\Program Files\\Java\\jdk-20\\bin\\java.exe\r\nFaulting module path: C:\\Windows\\System32\\KERNELBASE.dll\r\nReport Id: 97a532d2-82fd-4b33-a399-ee74ea9e606d\r\nFaulting package full name: \r\nFaulting package-relative application ID: \r\n```\r\n\r\nTried googling it but didn&#39;t find anything I made sense of. Any help?","title":"Using JNR-FFI to output a char table to CMD screen buffer crashes","body":"<p>I'm trying to write a library in Java that'll use C++ code to access an write directly to console screen buffer in CMD. I've managed to print out one time, but it crashes after that with exit code <code>0xC0000005</code></p>\n<p>I used JNR-FFI library. This code now prints out the first frame of animation, pauses on if for a second and crashes.</p>\n<p>Here's that code:</p>\n<pre><code>import jnr.ffi.LibraryLoader;\nimport jnr.ffi.Pointer;\n\npublic class Main {\n\n    public interface Kernel32 {\n        Kernel32 INSTANCE = LibraryLoader.create(Kernel32.class).load(&quot;kernel32&quot;);\n\n        int GENERIC_READ = 0x80000000;\n        int GENERIC_WRITE = 0x40000000;\n        int FILE_SHARE_READ = 0x00000001;\n        int FILE_SHARE_WRITE = 0x00000002;\n        int CONSOLE_TEXTMODE_BUFFER = 1;\n\n        Pointer CreateConsoleScreenBuffer(int dwDesiredAccess, int dwShareMode, Pointer lpSecurityAttributes, int dwFlags, Pointer lpScreenBufferData);\n        void SetConsoleActiveScreenBuffer(Pointer hConsoleOutput);\n        int WriteConsoleOutputCharacterW(Pointer hConsoleOutput, char[] lpCharacter, int nLength, int dwWriteCoord, int lpNumberOfCharsWritten);\n    }\n\n    private static final int nScreenWidth = 240;\n    private static final int nScreenHeight = 135;\n\n    static Kernel32 kernel32 = Kernel32.INSTANCE;\n\n    private static Pointer hConsole = kernel32.CreateConsoleScreenBuffer(\n            Kernel32.GENERIC_WRITE | Kernel32.GENERIC_READ,\n            Kernel32.FILE_SHARE_READ | Kernel32.FILE_SHARE_WRITE,\n            null,\n            Kernel32.CONSOLE_TEXTMODE_BUFFER,\n            null\n    );\n\n    public static void writeCMD(char[] screen){\n        try {\n            if (screen.length == (nScreenWidth * nScreenHeight) + 1) {\n                int lpNumberOfCharsWritten = 0;\n                System.out.println(kernel32.WriteConsoleOutputCharacterW(hConsole, screen, (nScreenWidth * nScreenHeight) + 1, 0, lpNumberOfCharsWritten));\n            }\n        } catch (Exception t) {\n            t.printStackTrace();\n        }\n    }\n\n    public static void main(String[] args) {\n        kernel32.SetConsoleActiveScreenBuffer(hConsole);\n\n        char[] screen = new char[(nScreenWidth * nScreenHeight) + 1];\n        for (int i = 0; i &lt; screen.length - 1; i++) {\n            screen[i] = '-';\n        }\n        screen[screen.length - 1] = '\\0';\n\n        int position = 0;\n        while(true){\n            screen[position] = '#';\n            writeCMD(screen);\n            screen[position] = '-';\n            position++;\n        }\n    }\n}\n</code></pre>\n<p>Running it in CMD as mentioned prints the first frame, freezes on that for a sec and crashes with no exception, but running it in IntelliJ console gave me exit code `0xc0000005' and found this in event viewer:</p>\n<pre><code>Faulting application name: java.exe, version: 20.0.2.0, time stamp: 0x75f7bb13\nFaulting module name: KERNELBASE.dll, version: 10.0.22621.2715, time stamp: 0x10f6a783\nException code: 0xc0000005\nFault offset: 0x00000000000b5bdc\nFaulting process id: 0x0x5B98\nFaulting application start time: 0x0x1DA1CB1377C8871\nFaulting application path: C:\\Program Files\\Java\\jdk-20\\bin\\java.exe\nFaulting module path: C:\\Windows\\System32\\KERNELBASE.dll\nReport Id: 97a532d2-82fd-4b33-a399-ee74ea9e606d\nFaulting package full name: \nFaulting package-relative application ID: \n</code></pre>\n<p>Tried googling it but didn't find anything I made sense of. Any help?</p>\n"},{"tags":["java","selenium-webdriver","web-applications","selenide","autotest"],"owner":{"account_id":3046988,"reputation":1,"user_id":2582334,"display_name":"teem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700759019,"creation_date":1700550163,"question_id":77520866,"body_markdown":"I have a test that clicks on a button in my WEB-app and it causes opening a new page in the new browser tab. I want to make sure that it opens the expected site. URL of this new page contains generated part so I&#39;m using urlContaining() method which checks that the URL contains expected string:\r\n\r\n```\r\nlkPage.videoCheckButton.click();\r\nwebdriver().shouldHave(numberOfWindows(2));\r\nswitchTo().window(1);\r\nwebdriver().shouldHave(urlContaining(&quot;https://webinar.test.online/&quot;));\r\n```\r\n\r\nIf I run this test on my local environment, it performs with no issue.\r\nBut sometimes when I launch it on a remote machine (GitLab runner), I get strange log - test fails despite it shouldn&#39;t:\r\n&gt; webdriver should have url containing https://webinar.test.online/\r\n&gt;\r\n&gt;Actual value: https://webinar.test.online/b/m1r-7gk-gf7-jcu\r\n\r\nThat&#39;s not the first time I meet such issue. Couple of month ago I tried to write similiar test but used shouldHave(url()) instead of shouldHave(urlContaining()) (URL didn&#39;t contain generated part), so I got fail log like:\r\n&gt; webdriver should have url https://webinar.test.online/123\r\n&gt;\r\n&gt;Actual value: https://webinar.test.online/123\r\n\r\nWhat&#39;s wrong with my code or with this method?","title":"Selenide: URL check fails despite actual result is equal to expected","body":"<p>I have a test that clicks on a button in my WEB-app and it causes opening a new page in the new browser tab. I want to make sure that it opens the expected site. URL of this new page contains generated part so I'm using urlContaining() method which checks that the URL contains expected string:</p>\n<pre><code>lkPage.videoCheckButton.click();\nwebdriver().shouldHave(numberOfWindows(2));\nswitchTo().window(1);\nwebdriver().shouldHave(urlContaining(&quot;https://webinar.test.online/&quot;));\n</code></pre>\n<p>If I run this test on my local environment, it performs with no issue.\nBut sometimes when I launch it on a remote machine (GitLab runner), I get strange log - test fails despite it shouldn't:</p>\n<blockquote>\n<p>webdriver should have url containing <a href=\"https://webinar.test.online/\" rel=\"nofollow noreferrer\">https://webinar.test.online/</a></p>\n<p>Actual value: <a href=\"https://webinar.test.online/b/m1r-7gk-gf7-jcu\" rel=\"nofollow noreferrer\">https://webinar.test.online/b/m1r-7gk-gf7-jcu</a></p>\n</blockquote>\n<p>That's not the first time I meet such issue. Couple of month ago I tried to write similiar test but used shouldHave(url()) instead of shouldHave(urlContaining()) (URL didn't contain generated part), so I got fail log like:</p>\n<blockquote>\n<p>webdriver should have url <a href=\"https://webinar.test.online/123\" rel=\"nofollow noreferrer\">https://webinar.test.online/123</a></p>\n<p>Actual value: <a href=\"https://webinar.test.online/123\" rel=\"nofollow noreferrer\">https://webinar.test.online/123</a></p>\n</blockquote>\n<p>What's wrong with my code or with this method?</p>\n"},{"tags":["java","jpa","eclipselink","glassfish-3"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1700756110,"post_id":77538298,"comment_id":136695860,"body_markdown":"Please provide a [example].","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":4544346,"reputation":47,"user_id":3691373,"display_name":"fraaanz"},"score":0,"creation_date":1700758554,"post_id":77538298,"comment_id":136696285,"body_markdown":"@FedericoklezCulloca, yes I added the named query.","body":"@FedericoklezCulloca, yes I added the named query."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1700785701,"post_id":77538298,"comment_id":136699182,"body_markdown":"The error should give you more details on what it can&#39;t parse - how are you sure it is this query? If it works elsewhere, maybe check that you&#39;ve got the same classes and versions in both locations - the error states EclipseLink version 2.3.2 which is quite old.","body":"The error should give you more details on what it can&#39;t parse - how are you sure it is this query? If it works elsewhere, maybe check that you&#39;ve got the same classes and versions in both locations - the error states EclipseLink version 2.3.2 which is quite old."},{"owner":{"account_id":4544346,"reputation":47,"user_id":3691373,"display_name":"fraaanz"},"score":0,"creation_date":1700821511,"post_id":77538298,"comment_id":136702839,"body_markdown":"@Chris indeed you right this is the log where it works: Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5 and this is where it doesn&#39;t Eclipse Persistence Services - 2.3.2.v20111125-r10461.  But if I look at maven dependency they are the same, and yes the class are copied so they are almost equals","body":"@Chris indeed you right this is the log where it works: Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5 and this is where it doesn&#39;t Eclipse Persistence Services - 2.3.2.v20111125-r10461.  But if I look at maven dependency they are the same, and yes the class are copied so they are almost equals"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1700840088,"post_id":77538298,"comment_id":136705858,"body_markdown":"Maven doesn&#39;t control Glassfish internals and provided jars; I&#39;d update the jars in Glassfish if that is the version you need.","body":"Maven doesn&#39;t control Glassfish internals and provided jars; I&#39;d update the jars in Glassfish if that is the version you need."},{"owner":{"account_id":4544346,"reputation":47,"user_id":3691373,"display_name":"fraaanz"},"score":0,"creation_date":1700857309,"post_id":77538298,"comment_id":136708073,"body_markdown":"indeed I&#39; ve checked in glassfish if there is a eclipseLink jar, but din&#39;t find it: i do not know if eclipseLink is embeded in some way in glassfish, could you tell me if there is a way to understand that? thanks anyway so much","body":"indeed I&#39; ve checked in glassfish if there is a eclipseLink jar, but din&#39;t find it: i do not know if eclipseLink is embeded in some way in glassfish, could you tell me if there is a way to understand that? thanks anyway so much"}],"owner":{"account_id":4544346,"reputation":47,"user_id":3691373,"display_name":"fraaanz"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1700758480,"creation_date":1700755984,"question_id":77538298,"body_markdown":"I&#39;m going to deploy my ear file on glassfish but when i try to deploy the ear I get:\r\n\r\n`2023-11-23T10:46:59.388+0100|Severe: Exception while invoking class org.glassfish.persistence.jpa.JPADeployer prepare method\r\n2023-11-23T10:46:59.389+0100|Severe: Exception while invoking class org.glassfish.javaee.full.deployment.EarDeployer prepare method\r\n2023-11-23T10:46:59.389+0100|Severe: Exception while preparing the app\r\n2023-11-23T10:46:59.389+0100|Severe: Exception [EclipseLink-8025] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.JPQLException\r\nException Description: Syntax error parsing the query`\r\n\r\nThe query is a named query and I&#39;ve tested it with eclipseLink too, in a different project that do not use glassfish (without deploy it on an application server) and it works well;\r\n\r\n\r\n\r\n\r\n\r\n\r\nI cannot figure out what&#39;s can be wrong, if the query works well using it dirctely, why it doesn&#39;t works when it is deployed on glassfish?   \r\n\r\nthis is the named query\r\n\r\n    @Entity\r\n    @Table(name = &quot;T_EXE_PROC&quot;)\r\n    @TableGenerator(name = &quot;ExecuProcGenerator&quot;, table = &quot;T_SEQ&quot;, pkColumnName = &quot;SEQ_COL&quot;, valueColumnName = &quot;SEQ_CONTATOR&quot;, pkColumnValue = &quot;EXE_PRO_SEQUE&quot;, allocationSize = 10, initialValue = 0)\r\n    @NamedQueries({ \r\n    \r\n    \t\t@NamedQuery(name = &quot;ExeProc.findLastExecProcs&quot;, query = &quot;SELECT DISTINCT (e.procedure) FROM ExeProc e WHERE e.cdExecProcs IN ( SELECT DISTINCT (e.cdExecProcs) FROM ExeProc e, ExeStep s where s.ExecProc.cdExecProcs = e.cdExecProcs AND s.stat.cdStation=:cdStation and s.oper.ceLogin=:ceLogin) and e.statusExecProc = :statusExecProc and e.procedure.status = 1 order by e.lastModifiedStepTime DESC&quot;),\r\n    \r\n    \t\t})\r\n    public class ExeProc implements Serializable {\r\n    \t\r\n    \tprivate static final long serialVersionUID = 12348979846545312L;\r\n    \t\r\n    \t\r\n    \tpublic static final String FIND_LAST_EXEC_PROC = &quot;ExeProc.findLastExecProcs&quot;;\r\n\r\n\r\n\r\n\r\n\r\nI&#39;ve used the query in an application java (a simple java project) and it works well;\r\nthe database is MSSQL\r\n","title":"getting syntax error on a query even if the query is right for sure","body":"<p>I'm going to deploy my ear file on glassfish but when i try to deploy the ear I get:</p>\n<p><code>2023-11-23T10:46:59.388+0100|Severe: Exception while invoking class org.glassfish.persistence.jpa.JPADeployer prepare method 2023-11-23T10:46:59.389+0100|Severe: Exception while invoking class org.glassfish.javaee.full.deployment.EarDeployer prepare method 2023-11-23T10:46:59.389+0100|Severe: Exception while preparing the app 2023-11-23T10:46:59.389+0100|Severe: Exception [EclipseLink-8025] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.JPQLException Exception Description: Syntax error parsing the query</code></p>\n<p>The query is a named query and I've tested it with eclipseLink too, in a different project that do not use glassfish (without deploy it on an application server) and it works well;</p>\n<p>I cannot figure out what's can be wrong, if the query works well using it dirctely, why it doesn't works when it is deployed on glassfish?</p>\n<p>this is the named query</p>\n<pre><code>@Entity\n@Table(name = &quot;T_EXE_PROC&quot;)\n@TableGenerator(name = &quot;ExecuProcGenerator&quot;, table = &quot;T_SEQ&quot;, pkColumnName = &quot;SEQ_COL&quot;, valueColumnName = &quot;SEQ_CONTATOR&quot;, pkColumnValue = &quot;EXE_PRO_SEQUE&quot;, allocationSize = 10, initialValue = 0)\n@NamedQueries({ \n\n        @NamedQuery(name = &quot;ExeProc.findLastExecProcs&quot;, query = &quot;SELECT DISTINCT (e.procedure) FROM ExeProc e WHERE e.cdExecProcs IN ( SELECT DISTINCT (e.cdExecProcs) FROM ExeProc e, ExeStep s where s.ExecProc.cdExecProcs = e.cdExecProcs AND s.stat.cdStation=:cdStation and s.oper.ceLogin=:ceLogin) and e.statusExecProc = :statusExecProc and e.procedure.status = 1 order by e.lastModifiedStepTime DESC&quot;),\n\n        })\npublic class ExeProc implements Serializable {\n    \n    private static final long serialVersionUID = 12348979846545312L;\n    \n    \n    public static final String FIND_LAST_EXEC_PROC = &quot;ExeProc.findLastExecProcs&quot;;\n</code></pre>\n<p>I've used the query in an application java (a simple java project) and it works well;\nthe database is MSSQL</p>\n"},{"tags":["java","spring","reactive-programming"],"comments":[{"owner":{"account_id":10032454,"reputation":78,"user_id":7418420,"display_name":"ilovemilk"},"score":1,"creation_date":1574350380,"post_id":58978064,"comment_id":104210000,"body_markdown":"You can take a look at this post https://stackoverflow.com/questions/51843767/proper-way-to-create-a-flux-from-a-list-of-monos","body":"You can take a look at this post <a href=\"https://stackoverflow.com/questions/51843767/proper-way-to-create-a-flux-from-a-list-of-monos\" title=\"proper way to create a flux from a list of monos\">stackoverflow.com/questions/51843767/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":136240,"reputation":2679,"user_id":339623,"accept_rate":100,"display_name":"EtherDragon"},"score":4,"creation_date":1574355174,"post_id":58978934,"comment_id":104212898,"body_markdown":"Hi vijay, can you add a little context around your code sample?","body":"Hi vijay, can you add a little context around your code sample?"},{"owner":{"account_id":67400,"reputation":860,"user_id":197255,"accept_rate":54,"display_name":"Hubidubi"},"score":1,"creation_date":1574356189,"post_id":58978934,"comment_id":104213448,"body_markdown":"Flux&lt;CustomObject&gt; != Flux&lt;Mono&lt;CustomObject&gt;&gt;","body":"Flux&lt;CustomObject&gt; != Flux&lt;Mono&lt;CustomObject&gt;&gt;"},{"owner":{"account_id":5432934,"reputation":3099,"user_id":4323201,"accept_rate":25,"display_name":"RyanNerd"},"score":1,"creation_date":1574534447,"post_id":58978934,"comment_id":104269807,"body_markdown":"Please comment your code so the person you are trying to help can understand what the code does and how it solves their problem.","body":"Please comment your code so the person you are trying to help can understand what the code does and how it solves their problem."},{"owner":{"account_id":5432934,"reputation":3099,"user_id":4323201,"accept_rate":25,"display_name":"RyanNerd"},"score":0,"creation_date":1574534448,"post_id":58978934,"comment_id":104269809,"body_markdown":"Please comment your code so the person you are trying to help can understand what the code does and how it solves their problem.","body":"Please comment your code so the person you are trying to help can understand what the code does and how it solves their problem."},{"owner":{"account_id":14246885,"reputation":197,"user_id":10291653,"display_name":"vijay krishna"},"score":1,"creation_date":1615724880,"post_id":58978934,"comment_id":117774713,"body_markdown":"1. Mono&lt;SomeClass&gt; is basically a data item emitted (sequential) by a source at a given point of time. monoList is a collection of such Monos wherein the list contains multiple data items emitted by a downstream system &amp; added to a collection (List in this case). Similarly, there could one or more such sources emitting items sequentially which means more than one list of Mono&lt;SomeClass&gt; exists.\n\n2. Combine each one of sources to make a continuous stream of all the data items.\nConsideration: Subscribe to multiple data sources sequentially or eagerly ?\na. concat: sequential\nb. merge: eager","body":"1. Mono&lt;SomeClass&gt; is basically a data item emitted (sequential) by a source at a given point of time. monoList is a collection of such Monos wherein the list contains multiple data items emitted by a downstream system &amp; added to a collection (List in this case). Similarly, there could one or more such sources emitting items sequentially which means more than one list of Mono&lt;SomeClass&gt; exists.  2. Combine each one of sources to make a continuous stream of all the data items. Consideration: Subscribe to multiple data sources sequentially or eagerly ? a. concat: sequential b. merge: eager"}],"tags":[],"owner":{"account_id":14246885,"reputation":197,"user_id":10291653,"display_name":"vijay krishna"},"comment_count":5,"down_vote_count":1,"up_vote_count":14,"is_accepted":true,"score":13,"last_activity_date":1574526424,"creation_date":1574351784,"answer_id":58978934,"question_id":58978064,"body_markdown":"    List&lt;Mono&lt;CustomObject &gt;&gt; monoList = new ArrayList&lt;&gt;();\r\n    monoList(object);\r\n    \r\n    Flux&lt;CustomObject&gt; flux = Flux.concat(monoList);","title":"Spring Reactive List of Mono to Flux","body":"<pre><code>List&lt;Mono&lt;CustomObject &gt;&gt; monoList = new ArrayList&lt;&gt;();\nmonoList(object);\n\nFlux&lt;CustomObject&gt; flux = Flux.concat(monoList);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2243445,"reputation":1902,"user_id":1977415,"accept_rate":100,"display_name":"Pierre-Jean"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686243378,"creation_date":1686243378,"answer_id":76434132,"question_id":58978064,"body_markdown":"Just use `Flux.concat` ([Documentation here][1]):\r\n```\r\nvar yourCode = list.stream().map(element -&gt; func());\r\nvar whatyouWant = Flux.concat(yourCode);\r\n```\r\n\r\nFrom the documentation:\r\n\r\n&gt; `public static &lt;T&gt; Flux&lt;T&gt; concat(Iterable&lt;? extends Publisher&lt;? extends T&gt;&gt; sources)`\r\n&gt; \r\n&gt; Concatenate all sources provided in an Iterable, forwarding elements emitted by the sources downstream.\r\n\r\nSo basically `concat` takes an Iterable of `Publisher` (which `Mono` is) and return a `Flux` for the type you want.\r\n\r\n \r\n\r\n[1]: https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#concat-java.lang.Iterable-\r\n\r\n","title":"Spring Reactive List of Mono to Flux","body":"<p>Just use <code>Flux.concat</code> (<a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#concat-java.lang.Iterable-\" rel=\"nofollow noreferrer\">Documentation here</a>):</p>\n<pre><code>var yourCode = list.stream().map(element -&gt; func());\nvar whatyouWant = Flux.concat(yourCode);\n</code></pre>\n<p>From the documentation:</p>\n<blockquote>\n<p><code>public static &lt;T&gt; Flux&lt;T&gt; concat(Iterable&lt;? extends Publisher&lt;? extends T&gt;&gt; sources)</code></p>\n<p>Concatenate all sources provided in an Iterable, forwarding elements emitted by the sources downstream.</p>\n</blockquote>\n<p>So basically <code>concat</code> takes an Iterable of <code>Publisher</code> (which <code>Mono</code> is) and return a <code>Flux</code> for the type you want.</p>\n"},{"tags":[],"owner":{"account_id":8104679,"reputation":1650,"user_id":6106641,"accept_rate":80,"display_name":"Archmede"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700758128,"creation_date":1700684713,"answer_id":77532895,"question_id":58978064,"body_markdown":"If you have an operation that maps a `List&lt;T&gt;` to a `List&lt;Mono&lt;U&gt;&gt;` then you can convert the original `List&lt;T&gt;` into a `Flux&lt;T&gt;`, for example.\r\n\r\nInstead of:\r\n\r\n    List&lt;T&gt; entities = ArrayList&lt;&gt;();\r\n    List&lt;Mono&lt;U&gt;&gt; monos = entities.map (this::operationThatReturnsMono);\r\n\r\nYou can do something like:\r\n\r\n    List&lt;T&gt; entities = ArrayList&lt;&gt;();\r\n    Flux&lt;U&gt; flux = Flux.fromIterable(entities).flatMap(this::operationThatReturnsMono)","title":"Spring Reactive List of Mono to Flux","body":"<p>If you have an operation that maps a <code>List&lt;T&gt;</code> to a <code>List&lt;Mono&lt;U&gt;&gt;</code> then you can convert the original <code>List&lt;T&gt;</code> into a <code>Flux&lt;T&gt;</code>, for example.</p>\n<p>Instead of:</p>\n<pre><code>List&lt;T&gt; entities = ArrayList&lt;&gt;();\nList&lt;Mono&lt;U&gt;&gt; monos = entities.map (this::operationThatReturnsMono);\n</code></pre>\n<p>You can do something like:</p>\n<pre><code>List&lt;T&gt; entities = ArrayList&lt;&gt;();\nFlux&lt;U&gt; flux = Flux.fromIterable(entities).flatMap(this::operationThatReturnsMono)\n</code></pre>\n"}],"owner":{"account_id":67400,"reputation":860,"user_id":197255,"accept_rate":54,"display_name":"Hubidubi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10598,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":58978934,"answer_count":3,"score":6,"last_activity_date":1700758128,"creation_date":1574349083,"question_id":58978064,"body_markdown":"I have a \r\n\r\n```\r\nlist.stream()\r\n.map(element -&gt; func());\r\n```\r\n\r\nwhere func() returns with Mono&lt;CustomObject&gt;. What is the easiest way to convert this list of ```Mono&lt;CustomObject&gt;``` objects to ```Flux&lt;CustomObject&gt;``` and return it from the stream?\r\n\r\n\r\n","title":"Spring Reactive List of Mono to Flux","body":"<p>I have a </p>\n\n<pre><code>list.stream()\n.map(element -&gt; func());\n</code></pre>\n\n<p>where func() returns with Mono. What is the easiest way to convert this list of <code>Mono&lt;CustomObject&gt;</code> objects to <code>Flux&lt;CustomObject&gt;</code> and return it from the stream?</p>\n"},{"tags":["java","maven","pom.xml","jax-ws"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1700756769,"post_id":77537299,"comment_id":136695982,"body_markdown":"Does this answer your question? [jaxws-maven-plugin 2.2 Failure with NoSuchMethodError()](https://stackoverflow.com/questions/13841437/jaxws-maven-plugin-2-2-failure-with-nosuchmethoderror)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/13841437/jaxws-maven-plugin-2-2-failure-with-nosuchmethoderror\">jaxws-maven-plugin 2.2 Failure with NoSuchMethodError()</a>"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1700758151,"post_id":77537299,"comment_id":136696219,"body_markdown":"Was it working before? Has something been changed?","body":"Was it working before? Has something been changed?"}],"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700757559,"creation_date":1700746404,"question_id":77537299,"body_markdown":"I am launching Maven command `jaxws:wsdlgen`, but it gives me this error\r\n\r\n    [INFO] jaxws:wsgen args: [-keep, -s, &#39;C:\\Users\\ActionICT-Motti\\IdeaProjects\\DocumentsStorage_v1\\target\\generated-sources\\wsgen&#39;, -d, &#39;C:\\Users\\ActionICT-Motti\\IdeaProjects\\DocumentsStorage_v1\\target\\generated-sources\\wsdl&#39;, -encoding, UTF-8, -wsdl, -r, &#39;C:\\Users\\ActionICT-Motti\\IdeaProjects\\DocumentsStorage_v1\\target\\generated-sources\\wsdl&#39;, it.bper.ws.DocumentsStorageV1Impl, -Xnosource]\r\n    Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\r\n    \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n    \tat org.jvnet.jax_ws_commons.jaxws.Invoker.main(Invoker.java:72)\r\n    Caused by: java.lang.NoSuchMethodError: com.sun.xml.ws.util.ServiceFinder.find(Ljava/lang/Class;Ljava/util/ServiceLoader;)Lcom/sun/xml/ws/util/ServiceFinder;\r\n    \tat com.sun.tools.ws.wscompile.WsgenOptions.&lt;init&gt;(WsgenOptions.java:106)\r\n    \tat com.sun.tools.ws.wscompile.WsgenTool.&lt;init&gt;(WsgenTool.java:72)\r\n    \tat com.sun.tools.ws.wscompile.WsgenTool.&lt;init&gt;(WsgenTool.java:82)\r\n\r\nthe pom is\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;xxxx&lt;/groupId&gt;\r\n        &lt;artifactId&gt;xxxx&lt;/artifactId&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n        &lt;version&gt;1.22.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;name&gt;xxxx&lt;/name&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n            &lt;filenet.cpe.install.path&gt;X:/Program Files/IBM/FileNet/ContentEngine&lt;/filenet.cpe.install.path&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;repositories&gt;\r\n            &lt;!-- Repository per scaricare JBoss AS --&gt;\r\n            &lt;repository&gt;\r\n                &lt;id&gt;jboss-enterprise-maven-repository&lt;/id&gt;\r\n                &lt;name&gt;JBoss Enterprise Maven Repository - Early-access repository&lt;/name&gt;\r\n                &lt;url&gt;https://maven.repository.redhat.com/earlyaccess/all&lt;/url&gt;\r\n                &lt;releases&gt;\r\n                    &lt;enabled&gt;true&lt;/enabled&gt;\r\n                &lt;/releases&gt;\r\n                &lt;snapshots&gt;\r\n                    &lt;enabled&gt;false&lt;/enabled&gt;\r\n                &lt;/snapshots&gt;\r\n            &lt;/repository&gt;\r\n        &lt;/repositories&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                &lt;version&gt;1.18.26&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!-- Common libraries --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n                &lt;version&gt;3.13.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.github.tomakehurst&lt;/groupId&gt;\r\n                &lt;artifactId&gt;wiremock-standalone&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.1&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!--\r\n                 IBM Filenet libraries\r\n                 A runtime servono tutti i JAR, come da documentazione FileNet:\r\n                 - Jace.jar\r\n                 - stax-api.jar\r\n                 - xlxpScanner.jar\r\n                 - xlxpScannerUtils.jar\r\n                 - log4j.jar (la versione nel FileNet di BPER e&#39; la 1.2.14)\r\n                 ma qui riportiamo solo quelli strettamente necessari per compilare\r\n                 ed eseguire i test, perche&#39; gli altri JAR sono in WEB-INF/lib\r\n                 quindi accessibili dal class loader della web application\r\n              --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.ibm.filenet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jace&lt;/artifactId&gt;\r\n                &lt;version&gt;4.5.2&lt;/version&gt;\r\n                &lt;scope&gt;system&lt;/scope&gt;\r\n                &lt;systemPath&gt;C:/Users/ActionICT-Motti/IdeaProjects/DocumentsStorage_v1/src/main/webapp/WEB-INF/lib/Jace.jar\r\n                &lt;/systemPath&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\r\n                &lt;artifactId&gt;rt&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.3&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n                &lt;version&gt;1.2.14&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!-- Logging libraries --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n                &lt;version&gt;2.21.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!-- Test libraries --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;commons-codec&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\r\n                &lt;version&gt;1.16.0&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;junit&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n                &lt;version&gt;4.13.2&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n                &lt;version&gt;2.14.0&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;jakarta.xml.ws&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jakarta.xml.ws-api&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxws-rt&lt;/artifactId&gt;\r\n                &lt;version&gt;2.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n          &lt;!--  &lt;dependency&gt;\r\n                &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n                &lt;version&gt;4.0.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &amp;lt;!&amp;ndash; https://mvnrepository.com/artifact/jakarta.xml.bind/jakarta.xml.bind-api-parent &amp;ndash;&amp;gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jakarta.xml.bind-api-parent&lt;/artifactId&gt;\r\n                &lt;version&gt;4.0.1&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n            &lt;/dependency&gt;--&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jaxb2-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.14.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.4.0-b180830.0359&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.jws&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.jws-api&lt;/artifactId&gt;\r\n                &lt;version&gt;1.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n                &lt;version&gt;2.4.0-b180830.0438&lt;/version&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.activation&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.activation-api&lt;/artifactId&gt;\r\n                &lt;version&gt;1.2.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.activation&lt;/groupId&gt;\r\n                &lt;artifactId&gt;activation&lt;/artifactId&gt;\r\n                &lt;version&gt;1.1.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\r\n                &lt;version&gt;1.3.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/javax.xml.ws/jaxws-api --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.xml.ws&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxws-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.xml.soap&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.xml.soap-api&lt;/artifactId&gt;\r\n                &lt;version&gt;1.4.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.0.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!--&lt;dependency&gt;\r\n                &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxb-ri&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.3&lt;/version&gt;\r\n            &lt;/dependency&gt;--&gt;\r\n    \r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.2.1&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;integration-test&lt;/goal&gt;\r\n                                &lt;goal&gt;verify&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;parallel&gt;all&lt;/parallel&gt;\r\n                        &lt;useUnlimitedThreads&gt;false&lt;/useUnlimitedThreads&gt;\r\n                        &lt;threadCount&gt;6&lt;/threadCount&gt;\r\n                        &lt;perCoreThreadCount&gt;true&lt;/perCoreThreadCount&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;!--&lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-enforcer-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.4.1&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;enforce-java&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;enforce&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;rules&gt;\r\n                                    &lt;requireJavaVersion&gt;\r\n                                        &lt;message&gt;Il JDK da utilizzare dev&#39;essere 1.7&lt;/message&gt;\r\n                                        &lt;version&gt;[17,)&lt;/version&gt;\r\n                                    &lt;/requireJavaVersion&gt;\r\n                                &lt;/rules&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;--&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.5.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;11&lt;/source&gt;\r\n                        &lt;target&gt;11&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;!--&lt;plugin&gt;\r\n                    &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;jaxws-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;4.0.1&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;1&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;wsimport&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;xadditionalHeaders&gt;true&lt;/xadditionalHeaders&gt;\r\n                                &lt;executable&gt;${tool.wsimport}&lt;/executable&gt;&amp;lt;!&amp;ndash; Piu&#39; veloce nel generare i sorgenti &amp;ndash;&amp;gt;\r\n                                &lt;wsdlDirectory&gt;src/main/resources/wsdl&lt;/wsdlDirectory&gt;\r\n                                &lt;target&gt;3.0&lt;/target&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;--&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;jaxws-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.3.6&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;1&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;wsimport&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;xadditionalHeaders&gt;true&lt;/xadditionalHeaders&gt;\r\n                                &lt;executable&gt;${tool.wsimport}&lt;/executable&gt;&lt;!-- Piu&#39; veloce nel generare i sorgenti --&gt;\r\n                                &lt;wsdlDirectory&gt;src/main/resources/wsdl&lt;/wsdlDirectory&gt;\r\n                                &lt;target&gt;2.1&lt;/target&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.4.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;external.atlassian.jgitflow&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;jgitflow-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.0-m5.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;releaseBranchVersionSuffix&gt;RC&lt;/releaseBranchVersionSuffix&gt;\r\n                        &lt;noDeploy&gt;true&lt;/noDeploy&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;0.8.11&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;!-- test unitari--&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;prepare agent&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                        &lt;!-- test integrazione --&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;prepare agent integration&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;prepare-agent-integration&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;propertyName&gt;jacocoAgent&lt;/propertyName&gt;\r\n                                &lt;classDumpDir&gt;${project.build.directory}/dumpClassDir&lt;/classDumpDir&gt;\r\n                                &lt;output&gt;file&lt;/output&gt;\r\n                                &lt;append&gt;true&lt;/append&gt;\r\n                                &lt;dumpOnExit&gt;true&lt;/dumpOnExit&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;wildfly-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;4.0.0.Final&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;!--\r\n                             In produzione c&#39;e&#39; JBoss EAP 6.3 =&gt; JBoss AS 7.4.0.Final\r\n                             ma tale release non e&#39; disponibile nei repo Maven\r\n                             quindi usiamo la versione piu&#39; simile disponibile\r\n                          --&gt;\r\n                        &lt;version&gt;23.0.0.Final&lt;/version&gt;\r\n                        &lt;javaOpts&gt;\r\n                            -Xms64m\r\n                            &lt;!--                        -Xmx512m--&gt;\r\n                            &lt;!--                        -XX:MaxMetaspaceSize=256m--&gt;\r\n                            -Djava.net.preferIPv4Stack=true\r\n                            -Dorg.jboss.resolver.warning=true\r\n                            -Dsun.rmi.dgc.client.gcInterval=3600000\r\n                            -Dsun.rmi.dgc.server.gcInterval=3600000\r\n                            -Djboss.socket.binding.port-offset=100\r\n                            -Djboss.server.config.dir=${project.build.testOutputDirectory}/configuration\r\n                            &lt;!--                        ${jacocoAgent}--&gt;\r\n                            &lt;!--                        &amp;lt;!&amp;ndash;per eseguire il debug remoto rimuovere il commento dalla riga sottostante--&gt;\r\n                            &lt;!--                            -Xrunjdwp:transport=dt_socket,address=33333,server=y,suspend=y--&gt;\r\n                        &lt;/javaOpts&gt;\r\n                        &lt;port&gt;10090&lt;/port&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;start&lt;/id&gt;\r\n                            &lt;phase&gt;pre-integration-test&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;start&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;startup-timeout&gt;120&lt;/startup-timeout&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;avoid-console-logging&lt;/id&gt;\r\n                            &lt;phase&gt;pre-integration-test&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;execute-commands&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;deploy&lt;/id&gt;\r\n                            &lt;phase&gt;pre-integration-test&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;deploy&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;stop&lt;/id&gt;\r\n                            &lt;phase&gt;post-integration-test&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;undeploy&lt;/goal&gt;&lt;!-- Per eseguire &quot;mvn verify&quot; e non solo &quot;mvn clean verify&quot; --&gt;\r\n                                &lt;goal&gt;shutdown&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.1.0&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;loadProperties&lt;/id&gt;\r\n                            &lt;phase&gt;process-resources&lt;/phase&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;exportAntProperties&gt;true&lt;/exportAntProperties&gt;\r\n                                &lt;target&gt;\r\n                                    &lt;exec executable=&quot;hostname&quot; outputproperty=&quot;computer.hostname&quot;/&gt;\r\n                                    &lt;!-- Default &quot;overwrite=false&quot; =&gt; non sovrascrive l&#39;eventuale properties gia&#39; presente --&gt;\r\n                                    &lt;copy file=&quot;src/test/resources/local.properties&quot; tofile=&quot;${project.build.outputDirectory}/${computer.hostname}.properties&quot; /&gt;\r\n                                    &lt;loadproperties srcFile=&quot;${project.build.outputDirectory}/${computer.hostname}.properties&quot; /&gt;\r\n                                &lt;/target&gt;\r\n                            &lt;/configuration&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;run&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n            &lt;pluginManagement&gt;\r\n                &lt;plugins&gt;\r\n                    &lt;!--This plugin&#39;s configuration is used to store Eclipse m2e settings\r\n                        only. It has no influence on the Maven build itself. --&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.eclipse.m2e&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;lifecycle-mapping&lt;/artifactId&gt;\r\n                        &lt;version&gt;1.0.0&lt;/version&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;lifecycleMappingMetadata&gt;\r\n                                &lt;pluginExecutions&gt;\r\n                                    &lt;pluginExecution&gt;\r\n                                        &lt;pluginExecutionFilter&gt;\r\n                                            &lt;groupId&gt;org.jvnet.jax-ws-commons&lt;/groupId&gt;\r\n                                            &lt;artifactId&gt;jaxws-maven-plugin&lt;/artifactId&gt;\r\n                                            &lt;versionRange&gt;[2.3,)&lt;/versionRange&gt;\r\n                                            &lt;goals&gt;\r\n                                                &lt;goal&gt;wsimport&lt;/goal&gt;\r\n                                            &lt;/goals&gt;\r\n                                        &lt;/pluginExecutionFilter&gt;\r\n                                        &lt;action&gt;\r\n                                            &lt;execute/&gt;\r\n                                        &lt;/action&gt;\r\n                                    &lt;/pluginExecution&gt;\r\n                                &lt;/pluginExecutions&gt;\r\n                            &lt;/lifecycleMappingMetadata&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/plugin&gt;\r\n                &lt;/plugins&gt;\r\n            &lt;/pluginManagement&gt;\r\n        &lt;/build&gt;\r\n    \r\n        &lt;profiles&gt;\r\n    \r\n            &lt;profile&gt;\r\n                &lt;id&gt;Jenkins&lt;/id&gt;\r\n                &lt;build&gt;\r\n                    &lt;plugins&gt;\r\n                        &lt;!--forza l&#39;utilizzo della toolchain JDK 7 per la build --&gt;\r\n                        &lt;plugin&gt;\r\n                            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;maven-toolchains-plugin&lt;/artifactId&gt;\r\n                            &lt;version&gt;3.1.0&lt;/version&gt;\r\n                            &lt;executions&gt;\r\n                                &lt;execution&gt;\r\n                                    &lt;goals&gt;\r\n                                        &lt;goal&gt;toolchain&lt;/goal&gt;\r\n                                    &lt;/goals&gt;\r\n                                &lt;/execution&gt;\r\n                            &lt;/executions&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;toolchains&gt;\r\n                                    &lt;jdk&gt;\r\n                                        &lt;version&gt;1.7&lt;/version&gt;\r\n                                    &lt;/jdk&gt;\r\n                                &lt;/toolchains&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/plugin&gt;\r\n                        &lt;!--Il plugin di JBoss non &#232; toolchain-aware, per cui si deve forzare l&#39;esecuzione di JBoss su JDK7 --&gt;\r\n                        &lt;plugin&gt;\r\n                            &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;wildfly-maven-plugin&lt;/artifactId&gt;\r\n                            &lt;version&gt;4.2.0.Final&lt;/version&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;javaHome&gt;${jdkJenkins}&lt;/javaHome&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/plugin&gt;\r\n                    &lt;/plugins&gt;\r\n                &lt;/build&gt;\r\n                &lt;properties&gt;\r\n                    &lt;jdkJenkins&gt;/opt/java/jdk1.7.0_71&lt;/jdkJenkins&gt;\r\n                    &lt;!--disabilita il plugin enforcer (perche&#39; non e&#39; toolchain-aware e comunque non serve dal --&gt;\r\n                    &lt;!--momento che si specifica esplicitamente il JDK utilizzato tramite JDK toolchain        --&gt;\r\n                    &lt;enforcer.skip&gt;true&lt;/enforcer.skip&gt;\r\n                    &lt;!-- imposta il path di wsimport nel server Jenkins per il maven-jaxws-plugin --&gt;\r\n                    &lt;tool.wsimport&gt;${jdkJenkins}/bin/wsimport&lt;/tool.wsimport&gt;\r\n                &lt;/properties&gt;\r\n            &lt;/profile&gt;\r\n        &lt;/profiles&gt;\r\n    &lt;/project&gt;\r\n\r\nI have tried to change the version and the dependencies, but nothing works to resolve the problem.\r\n\r\nEDIT: [This][1] is similar, but is not the same method that I&#39;ve reported here. I don&#39;t understand why someone suggested it...\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/13841437/jaxws-maven-plugin-2-2-failure-with-nosuchmethoderror","title":"NoSuchMethodError: com.sun.xml.ws.util.ServiceFinder.find","body":"<p>I am launching Maven command <code>jaxws:wsdlgen</code>, but it gives me this error</p>\n<pre><code>[INFO] jaxws:wsgen args: [-keep, -s, 'C:\\Users\\ActionICT-Motti\\IdeaProjects\\DocumentsStorage_v1\\target\\generated-sources\\wsgen', -d, 'C:\\Users\\ActionICT-Motti\\IdeaProjects\\DocumentsStorage_v1\\target\\generated-sources\\wsdl', -encoding, UTF-8, -wsdl, -r, 'C:\\Users\\ActionICT-Motti\\IdeaProjects\\DocumentsStorage_v1\\target\\generated-sources\\wsdl', it.bper.ws.DocumentsStorageV1Impl, -Xnosource]\nException in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\n    at org.jvnet.jax_ws_commons.jaxws.Invoker.main(Invoker.java:72)\nCaused by: java.lang.NoSuchMethodError: com.sun.xml.ws.util.ServiceFinder.find(Ljava/lang/Class;Ljava/util/ServiceLoader;)Lcom/sun/xml/ws/util/ServiceFinder;\n    at com.sun.tools.ws.wscompile.WsgenOptions.&lt;init&gt;(WsgenOptions.java:106)\n    at com.sun.tools.ws.wscompile.WsgenTool.&lt;init&gt;(WsgenTool.java:72)\n    at com.sun.tools.ws.wscompile.WsgenTool.&lt;init&gt;(WsgenTool.java:82)\n</code></pre>\n<p>the pom is</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;xxxx&lt;/groupId&gt;\n    &lt;artifactId&gt;xxxx&lt;/artifactId&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;version&gt;1.22.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;xxxx&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;filenet.cpe.install.path&gt;X:/Program Files/IBM/FileNet/ContentEngine&lt;/filenet.cpe.install.path&gt;\n    &lt;/properties&gt;\n\n    &lt;repositories&gt;\n        &lt;!-- Repository per scaricare JBoss AS --&gt;\n        &lt;repository&gt;\n            &lt;id&gt;jboss-enterprise-maven-repository&lt;/id&gt;\n            &lt;name&gt;JBoss Enterprise Maven Repository - Early-access repository&lt;/name&gt;\n            &lt;url&gt;https://maven.repository.redhat.com/earlyaccess/all&lt;/url&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/releases&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.26&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Common libraries --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.13.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.github.tomakehurst&lt;/groupId&gt;\n            &lt;artifactId&gt;wiremock-standalone&lt;/artifactId&gt;\n            &lt;version&gt;3.0.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!--\n             IBM Filenet libraries\n             A runtime servono tutti i JAR, come da documentazione FileNet:\n             - Jace.jar\n             - stax-api.jar\n             - xlxpScanner.jar\n             - xlxpScannerUtils.jar\n             - log4j.jar (la versione nel FileNet di BPER e' la 1.2.14)\n             ma qui riportiamo solo quelli strettamente necessari per compilare\n             ed eseguire i test, perche' gli altri JAR sono in WEB-INF/lib\n             quindi accessibili dal class loader della web application\n          --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.ibm.filenet&lt;/groupId&gt;\n            &lt;artifactId&gt;jace&lt;/artifactId&gt;\n            &lt;version&gt;4.5.2&lt;/version&gt;\n            &lt;scope&gt;system&lt;/scope&gt;\n            &lt;systemPath&gt;C:/Users/ActionICT-Motti/IdeaProjects/DocumentsStorage_v1/src/main/webapp/WEB-INF/lib/Jace.jar\n            &lt;/systemPath&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\n            &lt;artifactId&gt;rt&lt;/artifactId&gt;\n            &lt;version&gt;2.3.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.14&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Logging libraries --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.21.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Test libraries --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-codec&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\n            &lt;version&gt;1.16.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.13.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.14.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.xml.ws&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.xml.ws-api&lt;/artifactId&gt;\n            &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxws-rt&lt;/artifactId&gt;\n            &lt;version&gt;2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n      &lt;!--  &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &amp;lt;!&amp;ndash; https://mvnrepository.com/artifact/jakarta.xml.bind/jakarta.xml.bind-api-parent &amp;ndash;&amp;gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.xml.bind-api-parent&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n        &lt;/dependency&gt;--&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jaxb2-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.14.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.4.0-b180830.0359&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.jws&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.jws-api&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n            &lt;version&gt;2.4.0-b180830.0438&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.activation&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.activation-api&lt;/artifactId&gt;\n            &lt;version&gt;1.2.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.activation&lt;/groupId&gt;\n            &lt;artifactId&gt;activation&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n            &lt;version&gt;1.3.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/javax.xml.ws/jaxws-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.ws&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxws-api&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.soap&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.xml.soap-api&lt;/artifactId&gt;\n            &lt;version&gt;1.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!--&lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-ri&lt;/artifactId&gt;\n            &lt;version&gt;2.3.3&lt;/version&gt;\n        &lt;/dependency&gt;--&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;integration-test&lt;/goal&gt;\n                            &lt;goal&gt;verify&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;parallel&gt;all&lt;/parallel&gt;\n                    &lt;useUnlimitedThreads&gt;false&lt;/useUnlimitedThreads&gt;\n                    &lt;threadCount&gt;6&lt;/threadCount&gt;\n                    &lt;perCoreThreadCount&gt;true&lt;/perCoreThreadCount&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;!--&lt;plugin&gt;\n                &lt;artifactId&gt;maven-enforcer-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.4.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;enforce-java&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;enforce&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;rules&gt;\n                                &lt;requireJavaVersion&gt;\n                                    &lt;message&gt;Il JDK da utilizzare dev'essere 1.7&lt;/message&gt;\n                                    &lt;version&gt;[17,)&lt;/version&gt;\n                                &lt;/requireJavaVersion&gt;\n                            &lt;/rules&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;--&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.5.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;11&lt;/source&gt;\n                    &lt;target&gt;11&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;!--&lt;plugin&gt;\n                &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\n                &lt;artifactId&gt;jaxws-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;4.0.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;1&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;wsimport&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;xadditionalHeaders&gt;true&lt;/xadditionalHeaders&gt;\n                            &lt;executable&gt;${tool.wsimport}&lt;/executable&gt;&amp;lt;!&amp;ndash; Piu' veloce nel generare i sorgenti &amp;ndash;&amp;gt;\n                            &lt;wsdlDirectory&gt;src/main/resources/wsdl&lt;/wsdlDirectory&gt;\n                            &lt;target&gt;3.0&lt;/target&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;--&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\n                &lt;artifactId&gt;jaxws-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3.6&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;1&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;wsimport&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;xadditionalHeaders&gt;true&lt;/xadditionalHeaders&gt;\n                            &lt;executable&gt;${tool.wsimport}&lt;/executable&gt;&lt;!-- Piu' veloce nel generare i sorgenti --&gt;\n                            &lt;wsdlDirectory&gt;src/main/resources/wsdl&lt;/wsdlDirectory&gt;\n                            &lt;target&gt;2.1&lt;/target&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.4.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;external.atlassian.jgitflow&lt;/groupId&gt;\n                &lt;artifactId&gt;jgitflow-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.0-m5.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;releaseBranchVersionSuffix&gt;RC&lt;/releaseBranchVersionSuffix&gt;\n                    &lt;noDeploy&gt;true&lt;/noDeploy&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.8.11&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;!-- test unitari--&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;prepare agent&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;!-- test integrazione --&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;prepare agent integration&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;prepare-agent-integration&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;propertyName&gt;jacocoAgent&lt;/propertyName&gt;\n                            &lt;classDumpDir&gt;${project.build.directory}/dumpClassDir&lt;/classDumpDir&gt;\n                            &lt;output&gt;file&lt;/output&gt;\n                            &lt;append&gt;true&lt;/append&gt;\n                            &lt;dumpOnExit&gt;true&lt;/dumpOnExit&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;wildfly-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;4.0.0.Final&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;!--\n                         In produzione c'e' JBoss EAP 6.3 =&gt; JBoss AS 7.4.0.Final\n                         ma tale release non e' disponibile nei repo Maven\n                         quindi usiamo la versione piu' simile disponibile\n                      --&gt;\n                    &lt;version&gt;23.0.0.Final&lt;/version&gt;\n                    &lt;javaOpts&gt;\n                        -Xms64m\n                        &lt;!--                        -Xmx512m--&gt;\n                        &lt;!--                        -XX:MaxMetaspaceSize=256m--&gt;\n                        -Djava.net.preferIPv4Stack=true\n                        -Dorg.jboss.resolver.warning=true\n                        -Dsun.rmi.dgc.client.gcInterval=3600000\n                        -Dsun.rmi.dgc.server.gcInterval=3600000\n                        -Djboss.socket.binding.port-offset=100\n                        -Djboss.server.config.dir=${project.build.testOutputDirectory}/configuration\n                        &lt;!--                        ${jacocoAgent}--&gt;\n                        &lt;!--                        &amp;lt;!&amp;ndash;per eseguire il debug remoto rimuovere il commento dalla riga sottostante--&gt;\n                        &lt;!--                            -Xrunjdwp:transport=dt_socket,address=33333,server=y,suspend=y--&gt;\n                    &lt;/javaOpts&gt;\n                    &lt;port&gt;10090&lt;/port&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;start&lt;/id&gt;\n                        &lt;phase&gt;pre-integration-test&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;start&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;startup-timeout&gt;120&lt;/startup-timeout&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;avoid-console-logging&lt;/id&gt;\n                        &lt;phase&gt;pre-integration-test&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;execute-commands&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;deploy&lt;/id&gt;\n                        &lt;phase&gt;pre-integration-test&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;deploy&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;stop&lt;/id&gt;\n                        &lt;phase&gt;post-integration-test&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;undeploy&lt;/goal&gt;&lt;!-- Per eseguire &quot;mvn verify&quot; e non solo &quot;mvn clean verify&quot; --&gt;\n                            &lt;goal&gt;shutdown&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;loadProperties&lt;/id&gt;\n                        &lt;phase&gt;process-resources&lt;/phase&gt;\n                        &lt;configuration&gt;\n                            &lt;exportAntProperties&gt;true&lt;/exportAntProperties&gt;\n                            &lt;target&gt;\n                                &lt;exec executable=&quot;hostname&quot; outputproperty=&quot;computer.hostname&quot;/&gt;\n                                &lt;!-- Default &quot;overwrite=false&quot; =&gt; non sovrascrive l'eventuale properties gia' presente --&gt;\n                                &lt;copy file=&quot;src/test/resources/local.properties&quot; tofile=&quot;${project.build.outputDirectory}/${computer.hostname}.properties&quot; /&gt;\n                                &lt;loadproperties srcFile=&quot;${project.build.outputDirectory}/${computer.hostname}.properties&quot; /&gt;\n                            &lt;/target&gt;\n                        &lt;/configuration&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;run&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n        &lt;pluginManagement&gt;\n            &lt;plugins&gt;\n                &lt;!--This plugin's configuration is used to store Eclipse m2e settings\n                    only. It has no influence on the Maven build itself. --&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.eclipse.m2e&lt;/groupId&gt;\n                    &lt;artifactId&gt;lifecycle-mapping&lt;/artifactId&gt;\n                    &lt;version&gt;1.0.0&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;lifecycleMappingMetadata&gt;\n                            &lt;pluginExecutions&gt;\n                                &lt;pluginExecution&gt;\n                                    &lt;pluginExecutionFilter&gt;\n                                        &lt;groupId&gt;org.jvnet.jax-ws-commons&lt;/groupId&gt;\n                                        &lt;artifactId&gt;jaxws-maven-plugin&lt;/artifactId&gt;\n                                        &lt;versionRange&gt;[2.3,)&lt;/versionRange&gt;\n                                        &lt;goals&gt;\n                                            &lt;goal&gt;wsimport&lt;/goal&gt;\n                                        &lt;/goals&gt;\n                                    &lt;/pluginExecutionFilter&gt;\n                                    &lt;action&gt;\n                                        &lt;execute/&gt;\n                                    &lt;/action&gt;\n                                &lt;/pluginExecution&gt;\n                            &lt;/pluginExecutions&gt;\n                        &lt;/lifecycleMappingMetadata&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/pluginManagement&gt;\n    &lt;/build&gt;\n\n    &lt;profiles&gt;\n\n        &lt;profile&gt;\n            &lt;id&gt;Jenkins&lt;/id&gt;\n            &lt;build&gt;\n                &lt;plugins&gt;\n                    &lt;!--forza l'utilizzo della toolchain JDK 7 per la build --&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-toolchains-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;3.1.0&lt;/version&gt;\n                        &lt;executions&gt;\n                            &lt;execution&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;toolchain&lt;/goal&gt;\n                                &lt;/goals&gt;\n                            &lt;/execution&gt;\n                        &lt;/executions&gt;\n                        &lt;configuration&gt;\n                            &lt;toolchains&gt;\n                                &lt;jdk&gt;\n                                    &lt;version&gt;1.7&lt;/version&gt;\n                                &lt;/jdk&gt;\n                            &lt;/toolchains&gt;\n                        &lt;/configuration&gt;\n                    &lt;/plugin&gt;\n                    &lt;!--Il plugin di JBoss non è toolchain-aware, per cui si deve forzare l'esecuzione di JBoss su JDK7 --&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;wildfly-maven-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;4.2.0.Final&lt;/version&gt;\n                        &lt;configuration&gt;\n                            &lt;javaHome&gt;${jdkJenkins}&lt;/javaHome&gt;\n                        &lt;/configuration&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n            &lt;properties&gt;\n                &lt;jdkJenkins&gt;/opt/java/jdk1.7.0_71&lt;/jdkJenkins&gt;\n                &lt;!--disabilita il plugin enforcer (perche' non e' toolchain-aware e comunque non serve dal --&gt;\n                &lt;!--momento che si specifica esplicitamente il JDK utilizzato tramite JDK toolchain        --&gt;\n                &lt;enforcer.skip&gt;true&lt;/enforcer.skip&gt;\n                &lt;!-- imposta il path di wsimport nel server Jenkins per il maven-jaxws-plugin --&gt;\n                &lt;tool.wsimport&gt;${jdkJenkins}/bin/wsimport&lt;/tool.wsimport&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I have tried to change the version and the dependencies, but nothing works to resolve the problem.</p>\n<p>EDIT: <a href=\"https://stackoverflow.com/questions/13841437/jaxws-maven-plugin-2-2-failure-with-nosuchmethoderror\">This</a> is similar, but is not the same method that I've reported here. I don't understand why someone suggested it...</p>\n"},{"tags":["java","recursion","arraylist","subset","pass-by-reference"],"comments":[{"owner":{"account_id":6302434,"reputation":5409,"user_id":4896651,"accept_rate":75,"display_name":"Shadov"},"score":0,"creation_date":1700663564,"post_id":77530217,"comment_id":136682345,"body_markdown":"Because of `subset.remove()`, everything is always removed, because you are using the same instance. When you create a copy it&#39;s untouched.","body":"Because of <code>subset.remove()</code>, everything is always removed, because you are using the same instance. When you create a copy it&#39;s untouched."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1700664139,"post_id":77530217,"comment_id":136682482,"body_markdown":"Because in the original version you add a reference to the same list repeatedly to `ans`. And because `ans.add()` only adds a reference all subsequent changes on `subset` are visible through all the references that you added to `ans`.","body":"Because in the original version you add a reference to the same list repeatedly to <code>ans</code>. And because <code>ans.add()</code> only adds a reference all subsequent changes on <code>subset</code> are visible through all the references that you added to <code>ans</code>."}],"owner":{"account_id":29966576,"reputation":1,"user_id":22965017,"display_name":"Sarthak Sarangi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1700664017,"answer_count":0,"score":-2,"last_activity_date":1700757550,"creation_date":1700658541,"question_id":77530217,"body_markdown":"    class Solution {\r\n        public List&lt;List&lt;Integer&gt;&gt; subsets(int[] nums) {\r\n            List&lt;List&lt;Integer&gt;&gt; ans = new ArrayList&lt;&gt;();\r\n            \r\n            generateSubsets(0, ans,new ArrayList&lt;&gt;(), nums);\r\n            return ans;\r\n        }\r\n        public void generateSubsets(int i, List&lt;List&lt;Integer&gt;&gt; ans, List&lt;Integer&gt; subset, int[] nums ){\r\n            if( i == nums.length){\r\n                ans.add(subset); // adds all empty subsets in the ans\r\n                return;\r\n            }\r\n            subset.add(nums[i]);\r\n            generateSubsets(i+1, ans, subset, nums);\r\n            subset.remove(subset.size() -1);\r\n            generateSubsets(i+1, ans, subset, nums);\r\n        }\r\n    }\r\n    int[] nums = {1,2,3};\r\n    Output = [[],[],[],[],[],[],[],[]]\r\n\r\n[Original Question](https://i.stack.imgur.com/Cl1bA.png)Why do we always have to create a new arraylist and pass the subset arraylist in the parameter to copy the values?\r\nEven if the original arraylist subset will change in each recursive call the change will happen in the original arraylist then why in the answer all the arraylists are empty?\r\n\r\nPS: We have to create a new arraylist each time and add that arraylist to the ans.[Correct answer](https://i.stack.imgur.com/6iRIC.png)\r\n[Question Link:](https://leetcode.com/problems/subsets/)\r\n\r\nTried to generate all the subsets without creating a new ArrayList each time expected it to generate all the subsets as it was passed by reference.","title":"How the List&lt;List&lt;Integer&gt;&gt; ans contains only empty subsets?","body":"<pre><code>class Solution {\n    public List&lt;List&lt;Integer&gt;&gt; subsets(int[] nums) {\n        List&lt;List&lt;Integer&gt;&gt; ans = new ArrayList&lt;&gt;();\n        \n        generateSubsets(0, ans,new ArrayList&lt;&gt;(), nums);\n        return ans;\n    }\n    public void generateSubsets(int i, List&lt;List&lt;Integer&gt;&gt; ans, List&lt;Integer&gt; subset, int[] nums ){\n        if( i == nums.length){\n            ans.add(subset); // adds all empty subsets in the ans\n            return;\n        }\n        subset.add(nums[i]);\n        generateSubsets(i+1, ans, subset, nums);\n        subset.remove(subset.size() -1);\n        generateSubsets(i+1, ans, subset, nums);\n    }\n}\nint[] nums = {1,2,3};\nOutput = [[],[],[],[],[],[],[],[]]\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Cl1bA.png\" rel=\"nofollow noreferrer\">Original Question</a>Why do we always have to create a new arraylist and pass the subset arraylist in the parameter to copy the values?\nEven if the original arraylist subset will change in each recursive call the change will happen in the original arraylist then why in the answer all the arraylists are empty?</p>\n<p>PS: We have to create a new arraylist each time and add that arraylist to the ans.<a href=\"https://i.stack.imgur.com/6iRIC.png\" rel=\"nofollow noreferrer\">Correct answer</a>\n<a href=\"https://leetcode.com/problems/subsets/\" rel=\"nofollow noreferrer\">Question Link:</a></p>\n<p>Tried to generate all the subsets without creating a new ArrayList each time expected it to generate all the subsets as it was passed by reference.</p>\n"},{"tags":["java","javafx","fxml"],"comments":[{"owner":{"account_id":5476205,"reputation":459,"user_id":4354157,"accept_rate":20,"display_name":"kamel2005"},"score":0,"creation_date":1476310313,"post_id":15149843,"comment_id":67296550,"body_markdown":"if you are using NetBeans there is a plugin which does the job.","body":"if you are using NetBeans there is a plugin which does the job."}],"answers":[{"comments":[{"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"score":0,"creation_date":1366731863,"post_id":15153287,"comment_id":23117153,"body_markdown":"@tomsontom Could you elaborate on this addon? Is it a tool or library which could be wrapped by a Maven plugin? Or will it only work in Eclipse?","body":"@tomsontom Could you elaborate on this addon? Is it a tool or library which could be wrapped by a Maven plugin? Or will it only work in Eclipse?"},{"owner":{"account_id":1051359,"reputation":5876,"user_id":1055219,"display_name":"tomsontom"},"score":0,"creation_date":1366736305,"post_id":15153287,"comment_id":23119774,"body_markdown":"The idea is to have it as a library you can integrate into your build process (not matter which tool you use, we&#39;ll most likely out of the box support ant) - because we are currently moving our codebase to eclipse.org the work has been stalled a bit but I hope we can pickup speed in 1-2 weeks.","body":"The idea is to have it as a library you can integrate into your build process (not matter which tool you use, we&#39;ll most likely out of the box support ant) - because we are currently moving our codebase to eclipse.org the work has been stalled a bit but I hope we can pickup speed in 1-2 weeks."},{"owner":{"account_id":1051359,"reputation":5876,"user_id":1055219,"display_name":"tomsontom"},"score":1,"creation_date":1375529173,"post_id":15153287,"comment_id":26377190,"body_markdown":"I&#39;ve published a first pre alpha version. See http://www.mail-archive.com/openjfx-dev@openjdk.java.net/msg01589.html","body":"I&#39;ve published a first pre alpha version. See <a href=\"http://www.mail-archive.com/openjfx-dev@openjdk.java.net/msg01589.html\" rel=\"nofollow noreferrer\">mail-archive.com/openjfx-dev@openjdk.java.net/msg01589.html</a>"}],"tags":[],"owner":{"account_id":1051359,"reputation":5876,"user_id":1055219,"display_name":"tomsontom"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1425285083,"creation_date":1362125687,"answer_id":15153287,"question_id":15149843,"body_markdown":"There isn&#39;t any support for this kind of thing. The idea is that you are using FXML to visually layout your UI and then connecting it to java using a controller class.\r\n\r\nSidenote: We at e(fx)clipse started a build addon that allows you to converter FXML-Files into Java-Files - because of performance reasons on embedded devices.","title":"How to Convert FXML to JAVA","body":"<p>There isn't any support for this kind of thing. The idea is that you are using FXML to visually layout your UI and then connecting it to java using a controller class.</p>\n\n<p>Sidenote: We at e(fx)clipse started a build addon that allows you to converter FXML-Files into Java-Files - because of performance reasons on embedded devices.</p>\n"},{"comments":[{"owner":{"account_id":7134391,"reputation":2578,"user_id":5454585,"accept_rate":72,"display_name":"Madushan Perera"},"score":0,"creation_date":1623467049,"post_id":43101837,"comment_id":120093949,"body_markdown":"Pre-Apache plugin portal is not accessible now. Can you please share a google drive link ?","body":"Pre-Apache plugin portal is not accessible now. Can you please share a google drive link ?"},{"owner":{"account_id":3731085,"reputation":9146,"user_id":3103448,"accept_rate":43,"display_name":"marc-medley"},"score":1,"creation_date":1623478730,"post_id":43101837,"comment_id":120095391,"body_markdown":"@MadushanPerera updated answer to use Archive.org link.","body":"@MadushanPerera updated answer to use Archive.org link."},{"owner":{"account_id":445792,"reputation":1039,"user_id":838444,"display_name":"Sneg"},"score":0,"creation_date":1692784386,"post_id":43101837,"comment_id":135670394,"body_markdown":"@marc-medley not a valid link again","body":"@marc-medley not a valid link again"},{"owner":{"account_id":3731085,"reputation":9146,"user_id":3103448,"accept_rate":43,"display_name":"marc-medley"},"score":0,"creation_date":1692808867,"post_id":43101837,"comment_id":135675722,"body_markdown":"At this moment, the archive.org link loaded ok. And, the 8.2 tab download occured ok. The 8.1 tab does not have an associated download.","body":"At this moment, the archive.org link loaded ok. And, the 8.2 tab download occured ok. The 8.1 tab does not have an associated download."}],"tags":[],"owner":{"account_id":3731085,"reputation":9146,"user_id":3103448,"accept_rate":43,"display_name":"marc-medley"},"comment_count":4,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1700757515,"creation_date":1490813550,"answer_id":43101837,"question_id":15149843,"body_markdown":"&gt; Is that any program to convert it?\r\n\r\nYes. Netbeans [FXML 2 JAVA Converter](https://web.archive.org/web/20210304040347/http://plugins.netbeans.org/plugin/68619/fxml-2-java-converter) _via Archive.org 2021.03.04 capture for `plugins.netbeans.org/plugin/68619/fxml-2-java-converter`_.\r\n\r\n","title":"How to Convert FXML to JAVA","body":"<blockquote>\n<p>Is that any program to convert it?</p>\n</blockquote>\n<p>Yes. Netbeans <a href=\"https://web.archive.org/web/20210304040347/http://plugins.netbeans.org/plugin/68619/fxml-2-java-converter\" rel=\"nofollow noreferrer\">FXML 2 JAVA Converter</a> <em>via Archive.org 2021.03.04 capture for <code>plugins.netbeans.org/plugin/68619/fxml-2-java-converter</code></em>.</p>\n"}],"owner":{"account_id":2397490,"reputation":109,"user_id":2096019,"accept_rate":83,"display_name":"Ken Wong"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13715,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"closed_date":1642090712,"accepted_answer_id":15153287,"answer_count":2,"score":6,"last_activity_date":1700757515,"creation_date":1362107440,"question_id":15149843,"body_markdown":"I created a .fxml file using javafx scene builder in NetBeans.\r\n\r\nHow can I convert .fxml file in NetBeans to .java?\r\nIs that any program to convert it?\r\n\r\nI am not very good in fxml so I want to use .java file to code my javafx app.","title":"How to Convert FXML to JAVA","body":"<p>I created a .fxml file using javafx scene builder in NetBeans.</p>\n<p>How can I convert .fxml file in NetBeans to .java?\nIs that any program to convert it?</p>\n<p>I am not very good in fxml so I want to use .java file to code my javafx app.</p>\n"},{"tags":["java","loops","intellij-idea","while-loop","count"],"comments":[{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":1,"creation_date":1696201444,"post_id":77212563,"comment_id":136119614,"body_markdown":"Replace `int integers = input.nextInt();` with `int integers = 1;` .  The scanner usage there is preventing the normal sequence of &quot;prompt followed by input&quot; that you have designed.  Setting it to `1` simply allows your loop to enter the first time - after that the scanner input dictates the loop.  Also maybe add a message once you exit the loop to indicate the program has finished.","body":"Replace <code>int integers = input.nextInt();</code> with <code>int integers = 1;</code> .  The scanner usage there is preventing the normal sequence of &quot;prompt followed by input&quot; that you have designed.  Setting it to <code>1</code> simply allows your loop to enter the first time - after that the scanner input dictates the loop.  Also maybe add a message once you exit the loop to indicate the program has finished."},{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":0,"creation_date":1696201863,"post_id":77212563,"comment_id":136119637,"body_markdown":"Also, I suspect your average calculation is not what is needed - if you need help with that I suggest adding some test data with expected results with your next question.","body":"Also, I suspect your average calculation is not what is needed - if you need help with that I suggest adding some test data with expected results with your next question."},{"owner":{"account_id":10341526,"reputation":284,"user_id":13157036,"display_name":"CodingNinja"},"score":0,"creation_date":1696201997,"post_id":77212563,"comment_id":136119648,"body_markdown":"you might want to make integers into an `int[]` array","body":"you might want to make integers into an <code>int[]</code> array"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1696202249,"post_id":77212563,"comment_id":136119674,"body_markdown":"By the way, a good question like this should have examples, where each example has input, actual output, and expected output.","body":"By the way, a good question like this should have examples, where each example has input, actual output, and expected output."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1696202573,"post_id":77212563,"comment_id":136119714,"body_markdown":"**1st:** Off-topic critique: You have `Enter integers ending with 0:` before `integers = input.nextInt();` inside the while loop. Why not have it also before `integers = input.nextInt();` before the `while` loop? Why not be consistent with prompting the user? **2nd:** You are throwing away the first value the user inputs. Is that what you intended?  Note there is no prompt for the user. Try running the program. If it seems to hang up, try entering a number.  **3rd** Consider using a `do { ... } while ( ... )` loop instead.","body":"<b>1st:</b> Off-topic critique: You have <code>Enter integers ending with 0:</code> before <code>integers = input.nextInt();</code> inside the while loop. Why not have it also before <code>integers = input.nextInt();</code> before the <code>while</code> loop? Why not be consistent with prompting the user? <b>2nd:</b> You are throwing away the first value the user inputs. Is that what you intended?  Note there is no prompt for the user. Try running the program. If it seems to hang up, try entering a number.  <b>3rd</b> Consider using a <code>do { ... } while ( ... )</code> loop instead."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696203207,"creation_date":1696203207,"answer_id":77212667,"question_id":77212563,"body_markdown":"Utilize a _do-while loop_, and a _boolean_.\r\n\r\nAdditionally, you can use the _[BigInteger](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigInteger.html)_ class for _positiveSum_ and _negativeSum_.\r\n\r\nHere is an example.\r\n\r\n```java\r\nimport static java.math.BigInteger.ZERO;\r\nimport java.math.BigInteger;\r\nimport java.util.Scanner;\r\n```\r\n\r\n```java\r\nScanner in = new Scanner(System.in);\r\nint i;\r\nBigInteger x, a = ZERO, b = ZERO;\r\nboolean exit = false;\r\ndo {\r\n    x = in.nextBigInteger();\r\n    i = x.compareTo(ZERO);\r\n    if (i == 0) exit = true;\r\n    else if (i &lt; 0) a = a.add(x);\r\n    else b = b.add(x);\r\n} while (!exit);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n1 2 3 -4 -5 -6 0\r\na = -15\r\nb = 6\r\n```","title":"While loop with input is not displaying any kind of prompt for input or result","body":"<p>Utilize a <em>do-while loop</em>, and a <em>boolean</em>.</p>\n<p>Additionally, you can use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigInteger.html\" rel=\"nofollow noreferrer\">BigInteger</a></em> class for <em>positiveSum</em> and <em>negativeSum</em>.</p>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static java.math.BigInteger.ZERO;\nimport java.math.BigInteger;\nimport java.util.Scanner;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner in = new Scanner(System.in);\nint i;\nBigInteger x, a = ZERO, b = ZERO;\nboolean exit = false;\ndo {\n    x = in.nextBigInteger();\n    i = x.compareTo(ZERO);\n    if (i == 0) exit = true;\n    else if (i &lt; 0) a = a.add(x);\n    else b = b.add(x);\n} while (!exit);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>1 2 3 -4 -5 -6 0\na = -15\nb = 6\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22831551,"reputation":1,"user_id":16979922,"display_name":"Larry Sizemore"},"score":0,"creation_date":1696266752,"post_id":77216079,"comment_id":136128196,"body_markdown":"Sorry! I have ADHD; sometimes the words in my head don&#39;t come out the way I want them to. Thank you for your help :).","body":"Sorry! I have ADHD; sometimes the words in my head don&#39;t come out the way I want them to. Thank you for your help :)."}],"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700757286,"creation_date":1696254869,"answer_id":77216079,"question_id":77212563,"body_markdown":"`&quot;When I do try running the program, I get a pathway to the directory in which intellij is held in my downloads folder.&quot;`\r\n\r\nI have absolutely no idea what you mean by that :/ but, it seems more like an IntelliJ setup issue rather than an actual code problem which you do have. How are you running the code to have this particular issue? Explain that in you posted question.\r\n\r\n----------\r\n\r\nBelow is an example runnable that explains how this can be done with User Input Validation (read the comments in code - The comments make the code look like quite a bit but really it isn&#39;t. You can delete them when your done with them if you like:\r\n\r\nThe only Scanner method used in the demo is the [Scanner#nextLine()](https://www.tutorialspoint.com/java/util/scanner_nextline.htm) method which I think provides better input control but that&#39;s just my opinion. To carry out User Input Validation, the demo utilizes the [String#matches()](https://www.tutorialspoint.com/java/java_string_matches.htm) method which is passed a small [Regular Expression](https://www.vogella.com/tutorials/JavaRegularExpressions/article.html) (regex): `&quot;-?\\\\d+&quot;` and this is basically what it means:\r\n\r\n - `-?` The numerical string may, or may not, start with the minus\r\n   character indicating whether or not the string value is signed\r\n   (negative if it&#39;s there) or unsigned (positive if it&#39;s not there);\r\n - `\\\\d+` The numerical string contains *one or more* numerical digits\r\n   from **0** to **9** *only*.\r\n\r\n```\r\npublic class LoopPractice {\r\n    // A variable to hold the OS dependent newline character sequence:\r\n    private final String ls = System.lineSeparator();\r\n    \r\n    // Declare a Scanner Object:\r\n    private java.util.Scanner input;\r\n\r\n    \r\n    // Application Entry Point:\r\n    public static void main(String[] args) {\r\n        /* App is opened this way to avoid the need for \r\n           statics (unless we want them):        */\r\n        new LoopPractice().startApp(args);\r\n    }\r\n    \r\n    private void startApp(String[] args) {\r\n        /* Open a keyboard input stream. Do Not close this particular stream!\r\n           The JVM will close this resource automatically when the application \r\n           closes.        */\r\n        input = new java.util.Scanner(System.in);\r\n        \r\n        // A List Interface of Integer to hold supplied unsigned (positive)integer numbers:\r\n        java.util.List&lt;Integer&gt; unsignedInts = new java.util.ArrayList&lt;&gt;();\r\n        \r\n        // A List Interface of Integer to hold supplied signed (negative) integer numbers:\r\n        java.util.List&lt;Integer&gt; signedInts = new java.util.ArrayList&lt;&gt;();\r\n        \r\n        // Will hold the actual valid integer number supplied once converted:\r\n        int intNumber;\r\n        \r\n        /* Will hold the current prompt count so the User always\r\n           knows what the numbers count is they are currently\r\n           working on:        */\r\n        int cnt = 0; \r\n        \r\n        /* This variable will actually hold the User&#39;s numerical input\r\n           and yes, it is of type String. I like to accept string input\r\n           from the User because I think it&#39;s easier to validate and \r\n           other things like &quot;(q to quit)&quot; can be added to the prompt.\r\n           There should be no need to catch Exceptions for input \r\n           validation:        */\r\n        String numString;\r\n        \r\n        /* Boolean Flag used as the condition for the outer `while` \r\n           loop. If false, we keep looping. If true, we exit the \r\n           loop:                   */\r\n        boolean quit = false;\r\n       \r\n        /* Describe what is &quot;expeted&quot; from the User. \r\n           This greatly helps the User make proper \r\n           entries:                            */\r\n        System.out.println(&quot;Enter a series of valid signed or unsigned integers.&quot; + ls\r\n                         + &quot;All the numbers you supply MUST end with 0 otherwise&quot; + ls\r\n                         + &quot;that number will be considered Invalid and you will &quot; + ls\r\n                         + &quot;need to re-enter the desired number. Entering just 0&quot; + ls\r\n                         + &quot;is Invalid as is any number that contains alpha type &quot; + ls\r\n                         + &quot;characters. The integer numbers you supply can not be&quot; + ls\r\n                         + &quot;less than the value of  -2147483648  and, can not be &quot; + ls\r\n                         + &quot;greater than the value of 2147483647:&quot; + ls);\r\n       // Keep looping while the `quit` variable holds false:\r\n        while (!quit) {\r\n            numString = &quot;&quot;; // Set `numString` to Null String (&quot;&quot;):\r\n            \r\n            /* Keep looping while the `numString` variable is \r\n               Empty (holds Null String(&quot;&quot;):            */\r\n            while (numString.isEmpty()) {\r\n                cnt++;  // Increment the prompt counter by 1\r\n                // Display the prompt to User:\r\n                System.out.print(&quot;Enter Integer #&quot; + cnt + &quot; (or q to quit): -&gt; &quot;);\r\n                \r\n                /* Get keyboard input from User. The code halts here\r\n                   and waits for the User to enter something from the \r\n                   keyboard and hit the ENTER key:                */\r\n                numString = input.nextLine().trim();\r\n                \r\n                // Is quit desired......\r\n                if (numString.equalsIgnoreCase(&quot;q&quot;)) {\r\n                    /* Yes...set the `quit` variable to boolean true \r\n                       and exit this inner loop:                */\r\n                    quit = true;\r\n                    break;\r\n                }\r\n                \r\n                // INPUT VALIDATION:\r\n                /* Is the supplied string representation of a numerical \r\n                   value a signed or unsigned integer value which contains \r\n                   a 0 on the end, is greater than Integer.MIN_VALUE (-2147483648)\r\n                   and is less than Integer.MAX_VALUE (2147483647), and \r\n                   finally, is not just 0:\r\n                */\r\n                if (!numString.matches(&quot;-?\\\\d+&quot;) || !numString.endsWith(&quot;0&quot;)\r\n                                                 || Long.parseLong(numString) &lt; Integer.MIN_VALUE\r\n                                                 || Long.parseLong(numString) &gt; Integer.MAX_VALUE\r\n                                                 || Integer.parseInt(numString) == 0) {\r\n                    // NO...Inform the User of an Invalid Entry and to try again...\r\n                    System.out.println(&quot;Invalid Numerical Entry (&quot; + numString + &quot;)! - Try again...&quot; + ls);\r\n                    // Decrement the prompt counter because of an Invalid Entry:\r\n                    cnt--; \r\n                    /* Empty the `numString` variable to ensure re-loop\r\n                       so the User can try again:             */\r\n                    numString = &quot;&quot;;\r\n                }\r\n            }\r\n            \r\n            /* If we get to this point then either `q` for quit \r\n               was entered or a VALID integer value was supplied.  */\r\n            if (quit) {\r\n                continue;\r\n            }\r\n            \r\n            // Convert the String numerical value to int:\r\n            intNumber = Integer.parseInt(numString);\r\n            \r\n            /* If the supplied integer number is greater than 0\r\n               then the value supplied is an unsigned (positive)\r\n               integer number so, add it to the `unsignedInts`\r\n               List otherwise add it to the   `signedInts` List.\r\n               We know it can&#39;t be 0 because that wouldn&#39;t have\r\n               passed validation: We used an `if` statement with \r\n               Ternary Operator for this:               */\r\n            if (intNumber &gt; 0 ? unsignedInts.add(intNumber) : signedInts.add(intNumber));\r\n        }\r\n        \r\n        /* Count the total number of Integer values the User supplied.\r\n           These values are held within the `unsignedInts` and the \r\n           `signedInts` Lists so, to find out how many VALID numbers\r\n           were entered, we sum together the size of both lists:   */\r\n        int totalNumberOfInts = (unsignedInts.size() + signedInts.size());\r\n        \r\n        /* If both Lists contain nothing then `totalNumberOfInts` would\r\n           contain 0. Chances are, the `q` for quit was supplied before \r\n           any valid integer numbers could be established so, inform the\r\n           User that there is nothing to report and return which will\r\n           effectively end the application (or the entry session):   */\r\n        if (totalNumberOfInts == 0) {\r\n            System.out.println(&quot;No Results To Show!&quot; + ls + &quot;Quiting - Bye Bye&quot;);\r\n            return;\r\n        }\r\n        \r\n        // Otherwise, report the results of the values that were entered then quit.\r\n        \r\n        // Sum the values containd within the `unsignedInts` List:\r\n        int sumOfUnsignedIntegers = unsignedInts.stream().mapToInt(Integer::intValue).sum();\r\n        \r\n        // Sum the values containd within the `signedInts` List:\r\n        int sumOfSignedIntegers = signedInts.stream().mapToInt(Integer::intValue).sum();\r\n        \r\n        // Acquire the Overall Sum of the two Lists:\r\n        int overallSum = (sumOfUnsignedIntegers + sumOfSignedIntegers);\r\n        \r\n        // Start displaying the calcualted results into the Console Window:\r\n        System.out.println();\r\n        System.out.println(&quot;The total number integers supplied was:            &quot; \r\n                            + totalNumberOfInts);\r\n        System.out.println(&quot;The number of unsigned (positive) integers is:     &quot; \r\n                            + unsignedInts.size() + &quot;  -&gt;  &quot; + unsignedInts);\r\n        System.out.println(&quot;The number of signed (negative) integers is:       &quot; \r\n                            + signedInts.size() + &quot;  -&gt;  &quot; + signedInts);\r\n        System.out.println(&quot;The total sum of unsigned integers is:             &quot; \r\n                            + sumOfUnsignedIntegers);\r\n        System.out.println(&quot;The total sum of signed (negative) integers is:    &quot; \r\n                            + sumOfSignedIntegers);\r\n        System.out.println(&quot;The overall total sum of all supplied integers is: &quot; \r\n                            + overallSum);\r\n        \r\n        // Calculate the Average (cast the int&#39;s to doubles):\r\n        double average = ((double)overallSum / (double)totalNumberOfInts);\r\n        \r\n        // Display the Average within the Console Window:\r\n        System.out.println(&quot;The overall Average is:                            &quot; \r\n                            + average);\r\n        \r\n        // Inform of Quiting:\r\n        System.out.println(ls + &quot;Quiting - Bye Bye&quot; + ls);\r\n    }   \r\n}\r\n```","title":"While loop with input is not displaying any kind of prompt for input or result","body":"<p><code>&quot;When I do try running the program, I get a pathway to the directory in which intellij is held in my downloads folder.&quot;</code></p>\n<p>I have absolutely no idea what you mean by that :/ but, it seems more like an IntelliJ setup issue rather than an actual code problem which you do have. How are you running the code to have this particular issue? Explain that in you posted question.</p>\n<hr />\n<p>Below is an example runnable that explains how this can be done with User Input Validation (read the comments in code - The comments make the code look like quite a bit but really it isn't. You can delete them when your done with them if you like:</p>\n<p>The only Scanner method used in the demo is the <a href=\"https://www.tutorialspoint.com/java/util/scanner_nextline.htm\" rel=\"nofollow noreferrer\">Scanner#nextLine()</a> method which I think provides better input control but that's just my opinion. To carry out User Input Validation, the demo utilizes the <a href=\"https://www.tutorialspoint.com/java/java_string_matches.htm\" rel=\"nofollow noreferrer\">String#matches()</a> method which is passed a small <a href=\"https://www.vogella.com/tutorials/JavaRegularExpressions/article.html\" rel=\"nofollow noreferrer\">Regular Expression</a> (regex): <code>&quot;-?\\\\d+&quot;</code> and this is basically what it means:</p>\n<ul>\n<li><code>-?</code> The numerical string may, or may not, start with the minus\ncharacter indicating whether or not the string value is signed\n(negative if it's there) or unsigned (positive if it's not there);</li>\n<li><code>\\\\d+</code> The numerical string contains <em>one or more</em> numerical digits\nfrom <strong>0</strong> to <strong>9</strong> <em>only</em>.</li>\n</ul>\n<pre><code>public class LoopPractice {\n    // A variable to hold the OS dependent newline character sequence:\n    private final String ls = System.lineSeparator();\n    \n    // Declare a Scanner Object:\n    private java.util.Scanner input;\n\n    \n    // Application Entry Point:\n    public static void main(String[] args) {\n        /* App is opened this way to avoid the need for \n           statics (unless we want them):        */\n        new LoopPractice().startApp(args);\n    }\n    \n    private void startApp(String[] args) {\n        /* Open a keyboard input stream. Do Not close this particular stream!\n           The JVM will close this resource automatically when the application \n           closes.        */\n        input = new java.util.Scanner(System.in);\n        \n        // A List Interface of Integer to hold supplied unsigned (positive)integer numbers:\n        java.util.List&lt;Integer&gt; unsignedInts = new java.util.ArrayList&lt;&gt;();\n        \n        // A List Interface of Integer to hold supplied signed (negative) integer numbers:\n        java.util.List&lt;Integer&gt; signedInts = new java.util.ArrayList&lt;&gt;();\n        \n        // Will hold the actual valid integer number supplied once converted:\n        int intNumber;\n        \n        /* Will hold the current prompt count so the User always\n           knows what the numbers count is they are currently\n           working on:        */\n        int cnt = 0; \n        \n        /* This variable will actually hold the User's numerical input\n           and yes, it is of type String. I like to accept string input\n           from the User because I think it's easier to validate and \n           other things like &quot;(q to quit)&quot; can be added to the prompt.\n           There should be no need to catch Exceptions for input \n           validation:        */\n        String numString;\n        \n        /* Boolean Flag used as the condition for the outer `while` \n           loop. If false, we keep looping. If true, we exit the \n           loop:                   */\n        boolean quit = false;\n       \n        /* Describe what is &quot;expeted&quot; from the User. \n           This greatly helps the User make proper \n           entries:                            */\n        System.out.println(&quot;Enter a series of valid signed or unsigned integers.&quot; + ls\n                         + &quot;All the numbers you supply MUST end with 0 otherwise&quot; + ls\n                         + &quot;that number will be considered Invalid and you will &quot; + ls\n                         + &quot;need to re-enter the desired number. Entering just 0&quot; + ls\n                         + &quot;is Invalid as is any number that contains alpha type &quot; + ls\n                         + &quot;characters. The integer numbers you supply can not be&quot; + ls\n                         + &quot;less than the value of  -2147483648  and, can not be &quot; + ls\n                         + &quot;greater than the value of 2147483647:&quot; + ls);\n       // Keep looping while the `quit` variable holds false:\n        while (!quit) {\n            numString = &quot;&quot;; // Set `numString` to Null String (&quot;&quot;):\n            \n            /* Keep looping while the `numString` variable is \n               Empty (holds Null String(&quot;&quot;):            */\n            while (numString.isEmpty()) {\n                cnt++;  // Increment the prompt counter by 1\n                // Display the prompt to User:\n                System.out.print(&quot;Enter Integer #&quot; + cnt + &quot; (or q to quit): -&gt; &quot;);\n                \n                /* Get keyboard input from User. The code halts here\n                   and waits for the User to enter something from the \n                   keyboard and hit the ENTER key:                */\n                numString = input.nextLine().trim();\n                \n                // Is quit desired......\n                if (numString.equalsIgnoreCase(&quot;q&quot;)) {\n                    /* Yes...set the `quit` variable to boolean true \n                       and exit this inner loop:                */\n                    quit = true;\n                    break;\n                }\n                \n                // INPUT VALIDATION:\n                /* Is the supplied string representation of a numerical \n                   value a signed or unsigned integer value which contains \n                   a 0 on the end, is greater than Integer.MIN_VALUE (-2147483648)\n                   and is less than Integer.MAX_VALUE (2147483647), and \n                   finally, is not just 0:\n                */\n                if (!numString.matches(&quot;-?\\\\d+&quot;) || !numString.endsWith(&quot;0&quot;)\n                                                 || Long.parseLong(numString) &lt; Integer.MIN_VALUE\n                                                 || Long.parseLong(numString) &gt; Integer.MAX_VALUE\n                                                 || Integer.parseInt(numString) == 0) {\n                    // NO...Inform the User of an Invalid Entry and to try again...\n                    System.out.println(&quot;Invalid Numerical Entry (&quot; + numString + &quot;)! - Try again...&quot; + ls);\n                    // Decrement the prompt counter because of an Invalid Entry:\n                    cnt--; \n                    /* Empty the `numString` variable to ensure re-loop\n                       so the User can try again:             */\n                    numString = &quot;&quot;;\n                }\n            }\n            \n            /* If we get to this point then either `q` for quit \n               was entered or a VALID integer value was supplied.  */\n            if (quit) {\n                continue;\n            }\n            \n            // Convert the String numerical value to int:\n            intNumber = Integer.parseInt(numString);\n            \n            /* If the supplied integer number is greater than 0\n               then the value supplied is an unsigned (positive)\n               integer number so, add it to the `unsignedInts`\n               List otherwise add it to the   `signedInts` List.\n               We know it can't be 0 because that wouldn't have\n               passed validation: We used an `if` statement with \n               Ternary Operator for this:               */\n            if (intNumber &gt; 0 ? unsignedInts.add(intNumber) : signedInts.add(intNumber));\n        }\n        \n        /* Count the total number of Integer values the User supplied.\n           These values are held within the `unsignedInts` and the \n           `signedInts` Lists so, to find out how many VALID numbers\n           were entered, we sum together the size of both lists:   */\n        int totalNumberOfInts = (unsignedInts.size() + signedInts.size());\n        \n        /* If both Lists contain nothing then `totalNumberOfInts` would\n           contain 0. Chances are, the `q` for quit was supplied before \n           any valid integer numbers could be established so, inform the\n           User that there is nothing to report and return which will\n           effectively end the application (or the entry session):   */\n        if (totalNumberOfInts == 0) {\n            System.out.println(&quot;No Results To Show!&quot; + ls + &quot;Quiting - Bye Bye&quot;);\n            return;\n        }\n        \n        // Otherwise, report the results of the values that were entered then quit.\n        \n        // Sum the values containd within the `unsignedInts` List:\n        int sumOfUnsignedIntegers = unsignedInts.stream().mapToInt(Integer::intValue).sum();\n        \n        // Sum the values containd within the `signedInts` List:\n        int sumOfSignedIntegers = signedInts.stream().mapToInt(Integer::intValue).sum();\n        \n        // Acquire the Overall Sum of the two Lists:\n        int overallSum = (sumOfUnsignedIntegers + sumOfSignedIntegers);\n        \n        // Start displaying the calcualted results into the Console Window:\n        System.out.println();\n        System.out.println(&quot;The total number integers supplied was:            &quot; \n                            + totalNumberOfInts);\n        System.out.println(&quot;The number of unsigned (positive) integers is:     &quot; \n                            + unsignedInts.size() + &quot;  -&gt;  &quot; + unsignedInts);\n        System.out.println(&quot;The number of signed (negative) integers is:       &quot; \n                            + signedInts.size() + &quot;  -&gt;  &quot; + signedInts);\n        System.out.println(&quot;The total sum of unsigned integers is:             &quot; \n                            + sumOfUnsignedIntegers);\n        System.out.println(&quot;The total sum of signed (negative) integers is:    &quot; \n                            + sumOfSignedIntegers);\n        System.out.println(&quot;The overall total sum of all supplied integers is: &quot; \n                            + overallSum);\n        \n        // Calculate the Average (cast the int's to doubles):\n        double average = ((double)overallSum / (double)totalNumberOfInts);\n        \n        // Display the Average within the Console Window:\n        System.out.println(&quot;The overall Average is:                            &quot; \n                            + average);\n        \n        // Inform of Quiting:\n        System.out.println(ls + &quot;Quiting - Bye Bye&quot; + ls);\n    }   \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29456424,"reputation":11,"user_id":22572198,"display_name":"Himanshu Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696258292,"creation_date":1696258099,"answer_id":77216456,"question_id":77212563,"body_markdown":"When you execute your code, it stops at \r\n\r\n&quot;int integers = input.nextInt();&quot;\r\n\r\nand expects you to provide an input before moving down the loop. You invoked nextInt() method while declaring int variable and hence the scanner is expecting an int input. That is why you see a blank after intellij directory.\r\n\r\nI adjusted your code a little bit while keeping rest of it same.I printed a statement before you declaring integers variable. So, that the first input you provide counts when you move inside the loop, once a loop is at end, we again check for new input.(Alternatively, you can go with do while loop as Reilas suggested)\r\n\r\nchanged few variable names numberOfPositive &gt; positiveEntries. . .etc. \r\n\r\n_____________________________________________________________\r\n\r\npublic static void main(String[] args) {\r\n        Scanner input = new Scanner(System.in);\r\n\r\n        int positiveSum = 0;\r\n        int negativeSum = 0;\r\n        int PositveEntries = 0;\r\n        int NegativeEntries = 0;\r\n        int totalEntries = 0;\r\n        int totalSum;\r\n        double average;\r\n\r\n\r\n\r\n        System.out.println(&quot;Enter integers ending with 0: &quot;);\r\n        int integers = input.nextInt();\r\n\r\n        while(integers != 0){\r\n\r\n\r\n\r\n            if (integers &gt; 0) {\r\n                positiveSum += integers;\r\n                PositveEntries++;\r\n                totalEntries++;\r\n                System.out.println(&quot;Sum of positive entries &quot; + positiveSum);\r\n\r\n            } else  if (integers &lt; 0) {\r\n                negativeSum += integers;\r\n                NegativeEntries++;\r\n                totalEntries++;\r\n                System.out.println(&quot;Sum of negative entries &quot; + negativeSum);\r\n            }\r\n            totalSum = positiveSum + negativeSum;\r\n            average =  totalSum / totalEntries;\r\n            System.out.println(&quot;Total sum = &quot; + totalSum + &quot;. Average = &quot;+ average);\r\n\r\n            System.out.println(&quot;Enter another sum or enter 0 to terminate&quot;);\r\n            integers = input.nextInt();\r\n        }\r\n        System.out.println(&quot;program terminated&quot;);\r\n\r\n\r\n\r\n    }","title":"While loop with input is not displaying any kind of prompt for input or result","body":"<p>When you execute your code, it stops at</p>\n<p>&quot;int integers = input.nextInt();&quot;</p>\n<p>and expects you to provide an input before moving down the loop. You invoked nextInt() method while declaring int variable and hence the scanner is expecting an int input. That is why you see a blank after intellij directory.</p>\n<p>I adjusted your code a little bit while keeping rest of it same.I printed a statement before you declaring integers variable. So, that the first input you provide counts when you move inside the loop, once a loop is at end, we again check for new input.(Alternatively, you can go with do while loop as Reilas suggested)</p>\n<p>changed few variable names numberOfPositive &gt; positiveEntries. . .etc.</p>\n<hr />\n<p>public static void main(String[] args) {\nScanner input = new Scanner(System.in);</p>\n<pre><code>    int positiveSum = 0;\n    int negativeSum = 0;\n    int PositveEntries = 0;\n    int NegativeEntries = 0;\n    int totalEntries = 0;\n    int totalSum;\n    double average;\n\n\n\n    System.out.println(&quot;Enter integers ending with 0: &quot;);\n    int integers = input.nextInt();\n\n    while(integers != 0){\n\n\n\n        if (integers &gt; 0) {\n            positiveSum += integers;\n            PositveEntries++;\n            totalEntries++;\n            System.out.println(&quot;Sum of positive entries &quot; + positiveSum);\n\n        } else  if (integers &lt; 0) {\n            negativeSum += integers;\n            NegativeEntries++;\n            totalEntries++;\n            System.out.println(&quot;Sum of negative entries &quot; + negativeSum);\n        }\n        totalSum = positiveSum + negativeSum;\n        average =  totalSum / totalEntries;\n        System.out.println(&quot;Total sum = &quot; + totalSum + &quot;. Average = &quot;+ average);\n\n        System.out.println(&quot;Enter another sum or enter 0 to terminate&quot;);\n        integers = input.nextInt();\n    }\n    System.out.println(&quot;program terminated&quot;);\n\n\n\n}\n</code></pre>\n"}],"owner":{"account_id":22831551,"reputation":1,"user_id":16979922,"display_name":"Larry Sizemore"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1700757286,"creation_date":1696200345,"question_id":77212563,"body_markdown":"I am currently writing a program as practice for class, where the user is prompted to input a series of numbers, where the input should end with 0. The program should be able to add one to the variable positive sum when it comes into contact with a positive number from the input. The program should be able to add one to the variable negative sum when it comes into contact with a negative number from the input. The program should add all of these numbers together in order to get total. The program should be able to get the average and display it as a double.\r\n\r\nWhen I do try running the program, I get a pathway to the directory in which intellij is held in my downloads folder. \r\n\r\n\r\nI&#39;m not necessarily sure what I could try differently. No error warnings are popping up in my IDE.\r\n\r\nThis is my code:\r\n\r\n`   import java.util.Scanner;\r\n\r\n    public class LoopPractice {\r\n    public static void main(String[] args) {\r\n    //create scanner object\r\n        Scanner input = new Scanner(System.in);\r\n\r\n        int positiveSum = 0;\r\n        int negativeSum = 0;\r\n        int numberOfPositive = 0;\r\n        int numberOfNegative = 0;\r\n        int totalNumbers = 0;\r\n        int integers = input.nextInt();\r\n\r\n        while(integers != 0){\r\n            System.out.println(&quot;Enter integers ending with 0: &quot;);\r\n            integers = input.nextInt();\r\n\r\n                if (integers &gt; 0) {\r\n                    positiveSum += integers;\r\n                    numberOfPositive++;\r\n                    totalNumbers++;\r\n                    System.out.println(&quot;The number of positives is &quot; + positiveSum);\r\n\r\n                } else  if (integers &lt; 0) {\r\n                    negativeSum += integers;\r\n                    numberOfNegative++;\r\n                    totalNumbers++;\r\n                    System.out.println(&quot;The number of negatives is &quot; + negativeSum);\r\n                }\r\n            double average =  (numberOfPositive + numberOfNegative) / totalNumbers;\r\n            System.out.println(&quot;The total is: &quot; + totalNumbers);\r\n                System.out.println(&quot;The average is: &quot; + average);\r\n                }\r\n            }\r\n         }\r\n\r\n`","title":"While loop with input is not displaying any kind of prompt for input or result","body":"<p>I am currently writing a program as practice for class, where the user is prompted to input a series of numbers, where the input should end with 0. The program should be able to add one to the variable positive sum when it comes into contact with a positive number from the input. The program should be able to add one to the variable negative sum when it comes into contact with a negative number from the input. The program should add all of these numbers together in order to get total. The program should be able to get the average and display it as a double.</p>\n<p>When I do try running the program, I get a pathway to the directory in which intellij is held in my downloads folder.</p>\n<p>I'm not necessarily sure what I could try differently. No error warnings are popping up in my IDE.</p>\n<p>This is my code:</p>\n<p>`   import java.util.Scanner;</p>\n<pre><code>public class LoopPractice {\npublic static void main(String[] args) {\n//create scanner object\n    Scanner input = new Scanner(System.in);\n\n    int positiveSum = 0;\n    int negativeSum = 0;\n    int numberOfPositive = 0;\n    int numberOfNegative = 0;\n    int totalNumbers = 0;\n    int integers = input.nextInt();\n\n    while(integers != 0){\n        System.out.println(&quot;Enter integers ending with 0: &quot;);\n        integers = input.nextInt();\n\n            if (integers &gt; 0) {\n                positiveSum += integers;\n                numberOfPositive++;\n                totalNumbers++;\n                System.out.println(&quot;The number of positives is &quot; + positiveSum);\n\n            } else  if (integers &lt; 0) {\n                negativeSum += integers;\n                numberOfNegative++;\n                totalNumbers++;\n                System.out.println(&quot;The number of negatives is &quot; + negativeSum);\n            }\n        double average =  (numberOfPositive + numberOfNegative) / totalNumbers;\n        System.out.println(&quot;The total is: &quot; + totalNumbers);\n            System.out.println(&quot;The average is: &quot; + average);\n            }\n        }\n     }\n</code></pre>\n<p>`</p>\n"},{"tags":["java","spring-boot","java-8","mongodb-query","microservices"],"comments":[{"owner":{"account_id":3710331,"reputation":1513,"user_id":3087839,"display_name":"Gurkan İlleez"},"score":0,"creation_date":1697614650,"post_id":77314268,"comment_id":136300467,"body_markdown":"First of all are you sure that sort is not null. Also I am pretty sure that it is simple sorting you can find in stackoverflow.","body":"First of all are you sure that sort is not null. Also I am pretty sure that it is simple sorting you can find in stackoverflow."},{"owner":{"account_id":6839241,"reputation":31,"user_id":5260160,"accept_rate":0,"display_name":"Agrawal"},"score":0,"creation_date":1697614822,"post_id":77314268,"comment_id":136300489,"body_markdown":"Yes, very obvious. It&#39;s not null. That&#39;s why I am getting 5 -&gt; 11 -&gt; 10.\nAnd actually I checked, but same results","body":"Yes, very obvious. It&#39;s not null. That&#39;s why I am getting 5 -&gt; 11 -&gt; 10. And actually I checked, but same results"},{"owner":{"account_id":3710331,"reputation":1513,"user_id":3087839,"display_name":"Gurkan İlleez"},"score":0,"creation_date":1697615568,"post_id":77314268,"comment_id":136300611,"body_markdown":"Can you send structure of document that you are using? Maybe Id is not in first layer of json","body":"Can you send structure of document that you are using? Maybe Id is not in first layer of json"},{"owner":{"account_id":6839241,"reputation":31,"user_id":5260160,"accept_rate":0,"display_name":"Agrawal"},"score":0,"creation_date":1697616327,"post_id":77314268,"comment_id":136300773,"body_markdown":"{\n  &quot;_id&quot;: &quot;5&quot;,\n “managementId”: &quot;238764827364827t367&quot;,\n &quot;source&quot;: {\n      &quot;refValue&quot;: &quot;http://cvVYqgTCOAfKG.hldhdbTbO2djQIWelGBb&quot;,\n    “type&quot;: “reference&quot;,\n    “baseType&quot;: &quot;netstats&quot;\n  },\n “type”: “netstatic”\n}","body":"{   &quot;_id&quot;: &quot;5&quot;,  “managementId”: &quot;238764827364827t367&quot;,  &quot;source&quot;: {       &quot;refValue&quot;: &quot;<a href=\"http://cvVYqgTCOAfKG.hldhdbTbO2djQIWelGBb\" rel=\"nofollow noreferrer\">cvVYqgTCOAfKG.hldhdbTbO2djQIWelGBb</a>&quot;,     “type&quot;: “reference&quot;,     “baseType&quot;: &quot;netstats&quot;   },  “type”: “netstatic” }"}],"answers":[{"comments":[{"owner":{"account_id":6839241,"reputation":31,"user_id":5260160,"accept_rate":0,"display_name":"Agrawal"},"score":0,"creation_date":1697616462,"post_id":77314470,"comment_id":136300793,"body_markdown":"But it allowed sort as a sting only in \n\nquery.with(Sort.by(Sort.Direction.DESC, sort));","body":"But it allowed sort as a sting only in   query.with(Sort.by(Sort.Direction.DESC, sort));"},{"owner":{"account_id":8884226,"reputation":514,"user_id":6633045,"display_name":"phuongnq1995"},"score":0,"creation_date":1697616899,"post_id":77314470,"comment_id":136300857,"body_markdown":"@Agrawal One option that you can consider is to create another field with Long or Integer for sorting. Example Sort.by(Sort.Direction.ASC, &quot;numbericFieldName&quot;)","body":"@Agrawal One option that you can consider is to create another field with Long or Integer for sorting. Example Sort.by(Sort.Direction.ASC, &quot;numbericFieldName&quot;)"},{"owner":{"account_id":6839241,"reputation":31,"user_id":5260160,"accept_rate":0,"display_name":"Agrawal"},"score":0,"creation_date":1697628393,"post_id":77314470,"comment_id":136303084,"body_markdown":"But the second parameter should be in string only","body":"But the second parameter should be in string only"},{"owner":{"account_id":8884226,"reputation":514,"user_id":6633045,"display_name":"phuongnq1995"},"score":0,"creation_date":1697638986,"post_id":77314470,"comment_id":136305495,"body_markdown":"Yeah, it&#39;s field name. I mean the type of field, your id has type is string so it cannot sort as numeric. Lets update your document structure. I updated my answer.","body":"Yeah, it&#39;s field name. I mean the type of field, your id has type is string so it cannot sort as numeric. Lets update your document structure. I updated my answer."},{"owner":{"account_id":8884226,"reputation":514,"user_id":6633045,"display_name":"phuongnq1995"},"score":0,"creation_date":1697681527,"post_id":77314470,"comment_id":136311439,"body_markdown":"@Agrawal is it help?","body":"@Agrawal is it help?"},{"owner":{"account_id":6839241,"reputation":31,"user_id":5260160,"accept_rate":0,"display_name":"Agrawal"},"score":0,"creation_date":1697692395,"post_id":77314470,"comment_id":136312295,"body_markdown":"Suppose I have id = string, then If I do long a = Integer.parseInt(id), then Sort.by(Sort.Direction.ASC, &quot;numbericFieldName&quot;), I again need to put this in string (String.valueOf(a)), is that way you are saying?","body":"Suppose I have id = string, then If I do long a = Integer.parseInt(id), then Sort.by(Sort.Direction.ASC, &quot;numbericFieldName&quot;), I again need to put this in string (String.valueOf(a)), is that way you are saying?"},{"owner":{"account_id":8884226,"reputation":514,"user_id":6633045,"display_name":"phuongnq1995"},"score":0,"creation_date":1697692727,"post_id":77314470,"comment_id":136312330,"body_markdown":"No @Agrawal , I&#39;m talking about document structure, until you have `{ &quot;_id&quot;: &quot;5&quot;, “numbericFieldName&quot;: 5 }` then you can sort on it. Pls check my updated comment","body":"No @Agrawal , I&#39;m talking about document structure, until you have <code>{ &quot;_id&quot;: &quot;5&quot;, “numbericFieldName&quot;: 5 }</code> then you can sort on it. Pls check my updated comment"}],"tags":[],"owner":{"account_id":8884226,"reputation":514,"user_id":6633045,"display_name":"phuongnq1995"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700757275,"creation_date":1697616141,"answer_id":77314470,"question_id":77314268,"body_markdown":"It&#39;s correct because your `id` is `String` which `&#39;10&#39; &lt; &#39;5&#39;`. To solve this issue we have 2 options:\r\n\r\n 1. Change your `id` type from `String` to `Long` or `Integer` in your document class. \r\n```\r\n{ \r\n    &quot;_id&quot;: 5 &lt;- this is a number not string\r\n    // other fields\r\n}\r\n```\r\n2. Create another field with `Long` or `Integer` in your document class for sorting. Automatic fill up this column with numeric type by your `id`. Example: setter for new column `Integer.parseInt(getId())`, and sort method will be `Sort.by(Sort.Direction.ASC, &quot;numericFieldName&quot;)`\r\n```\r\n{ \r\n    &quot;_id&quot;: &quot;5&quot;,\r\n    &quot;numericFieldName&quot;: 5 &lt;- this is a number\r\n    // other fields\r\n}\r\n```","title":"Spring MongoDB JAVA Sorting Query","body":"<p>It's correct because your <code>id</code> is <code>String</code> which <code>'10' &lt; '5'</code>. To solve this issue we have 2 options:</p>\n<ol>\n<li>Change your <code>id</code> type from <code>String</code> to <code>Long</code> or <code>Integer</code> in your document class.</li>\n</ol>\n<pre><code>{ \n    &quot;_id&quot;: 5 &lt;- this is a number not string\n    // other fields\n}\n</code></pre>\n<ol start=\"2\">\n<li>Create another field with <code>Long</code> or <code>Integer</code> in your document class for sorting. Automatic fill up this column with numeric type by your <code>id</code>. Example: setter for new column <code>Integer.parseInt(getId())</code>, and sort method will be <code>Sort.by(Sort.Direction.ASC, &quot;numericFieldName&quot;)</code></li>\n</ol>\n<pre><code>{ \n    &quot;_id&quot;: &quot;5&quot;,\n    &quot;numericFieldName&quot;: 5 &lt;- this is a number\n    // other fields\n}\n</code></pre>\n"}],"owner":{"account_id":6839241,"reputation":31,"user_id":5260160,"accept_rate":0,"display_name":"Agrawal"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700757275,"creation_date":1697614086,"question_id":77314268,"body_markdown":"I have tried with the below code to short id(string) parameter but it is not sorting correctly.\r\n\r\n    // Apply sorting \r\n       if (sort != null) {\r\n       query.with(Sort.by(Sort.Direction.DESC, sort));\r\n\r\n  **OR**\r\n\r\n    // Apply sorting\r\n    if (sort != null) {\r\n        Sort sortOptions = Sort.by(Sort.Order.desc(sort)); // Sort in descending order\r\n        query.with(sortOptions);\r\n    }\r\n\r\n**OUTPUT** :\r\n\r\n\r\nSuppose IDs are 5, 10, and 11.\r\nIt gives 5 -&gt; 11 -&gt; 10 but it should be 11, 10, 5.\r\n\r\n","title":"Spring MongoDB JAVA Sorting Query","body":"<p>I have tried with the below code to short id(string) parameter but it is not sorting correctly.</p>\n<pre><code>// Apply sorting \n   if (sort != null) {\n   query.with(Sort.by(Sort.Direction.DESC, sort));\n</code></pre>\n<p><strong>OR</strong></p>\n<pre><code>// Apply sorting\nif (sort != null) {\n    Sort sortOptions = Sort.by(Sort.Order.desc(sort)); // Sort in descending order\n    query.with(sortOptions);\n}\n</code></pre>\n<p><strong>OUTPUT</strong> :</p>\n<p>Suppose IDs are 5, 10, and 11.\nIt gives 5 -&gt; 11 -&gt; 10 but it should be 11, 10, 5.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1700555657,"post_id":77521162,"comment_id":136665943,"body_markdown":"How many numbers are there between 0 and `size`?","body":"How many numbers are there between 0 and <code>size</code>?"},{"owner":{"account_id":182974,"reputation":6286,"user_id":418066,"display_name":"Biffen"},"score":1,"creation_date":1700557458,"post_id":77521162,"comment_id":136666251,"body_markdown":"Does this answer your question? [What causes a java.lang.ArrayIndexOutOfBoundsException and how do I prevent it?](https://stackoverflow.com/questions/5554734/what-causes-a-java-lang-arrayindexoutofboundsexception-and-how-do-i-prevent-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/5554734/what-causes-a-java-lang-arrayindexoutofboundsexception-and-how-do-i-prevent-it\">What causes a java.lang.ArrayIndexOutOfBoundsException and how do I prevent it?</a>"}],"answers":[{"tags":[],"owner":{"account_id":28695489,"reputation":611,"user_id":21973805,"display_name":"Ahmed Nabil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700554670,"creation_date":1700554670,"answer_id":77521254,"question_id":77521162,"body_markdown":"for both x and j the condition should be **x &lt; num.length** and **j &lt; num.length**\r\n\r\n(not &lt;=) because arrays are 0 indexed so an array of length 5 have indexes of 0 =&gt; 4 (index &lt; 5) ","title":"Arrays going out of Bounds in java","body":"<p>for both x and j the condition should be <strong>x &lt; num.length</strong> and <strong>j &lt; num.length</strong></p>\n<p>(not &lt;=) because arrays are 0 indexed so an array of length 5 have indexes of 0 =&gt; 4 (index &lt; 5)</p>\n"},{"tags":[],"owner":{"account_id":26555431,"reputation":558,"user_id":20184128,"display_name":"berse2212"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700555587,"creation_date":1700555587,"answer_id":77521346,"question_id":77521162,"body_markdown":"Looping over an Array / List via indexed access always needs to implement the check to be\r\n\r\n    i &lt; array.length\r\n\r\nand NOT \r\n\r\n    i &lt;= array.length //Out of Bounds!\r\n\r\nImagine this array: `{1, 2, 3, 4, 5}` now the length will be `5`. But `array[5]` is out of bounds because the indices start at `0`. Thus you need to check for your index to be small than the length of the array. ","title":"Arrays going out of Bounds in java","body":"<p>Looping over an Array / List via indexed access always needs to implement the check to be</p>\n<pre><code>i &lt; array.length\n</code></pre>\n<p>and NOT</p>\n<pre><code>i &lt;= array.length //Out of Bounds!\n</code></pre>\n<p>Imagine this array: <code>{1, 2, 3, 4, 5}</code> now the length will be <code>5</code>. But <code>array[5]</code> is out of bounds because the indices start at <code>0</code>. Thus you need to check for your index to be small than the length of the array.</p>\n"},{"tags":[],"owner":{"account_id":29681914,"reputation":1,"user_id":22748368,"display_name":"Adripoblado"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700565652,"creation_date":1700555985,"answer_id":77521386,"question_id":77521162,"body_markdown":"This was answered more than once ([for example here][1])\r\n\r\nYou are exceeding array length when asking for values.\r\nYour code is asking for one more value than the array can store.\r\n\r\nJust change the \r\n```\r\nfor(int x = 0; x &lt;= num.length; x++)\r\n``` \r\nto\r\n\r\n```\r\nfor (int x = 0; x &lt; num.length; x++)\r\n```\r\n\r\nin both cases so it does not overflow your array length when reaching the end of them.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/29775607/22748368","title":"Arrays going out of Bounds in java","body":"<p>This was answered more than once (<a href=\"https://stackoverflow.com/a/29775607/22748368\">for example here</a>)</p>\n<p>You are exceeding array length when asking for values.\nYour code is asking for one more value than the array can store.</p>\n<p>Just change the</p>\n<pre><code>for(int x = 0; x &lt;= num.length; x++)\n</code></pre>\n<p>to</p>\n<pre><code>for (int x = 0; x &lt; num.length; x++)\n</code></pre>\n<p>in both cases so it does not overflow your array length when reaching the end of them.</p>\n"},{"tags":[],"owner":{"account_id":5941380,"reputation":4127,"user_id":4672460,"accept_rate":100,"display_name":"Selaka Nanayakkara"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700757160,"creation_date":1700556154,"answer_id":77521399,"question_id":77521162,"body_markdown":"This is a runtime exception in Java that occurs when you try to access an array with an illegal index. The index is either negative or greater than or equal to the size of the array. In order to fix this error in your code.\r\n\r\nChange `i &lt;= array.length` to `i &lt; array.length`\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Main\r\n    {\r\n      public static void main (String[]args)\r\n      {\r\n        Scanner sn = new Scanner (System.in);\r\n    \r\n        int size;\r\n          System.out.println (&quot;Enter the size of the array =&quot;);\r\n          size = sn.nextInt ();\r\n        int[] num = new int[size];\r\n    \r\n          System.out.println (&quot;Created a Numerical Array&quot;);\r\n    \r\n        for (int x = 0; x &lt; num.length; x++)\r\n          {\r\n    \tSystem.out.println (&quot;Enter data into the &quot; + x + &quot; index = &quot;);\r\n    \tnum[x] = sn.nextInt ();\r\n    \r\n          }\r\n        for (int j = 0; j &lt; num.length; j++)\r\n          {\r\n    \tint temp2 = j + 1;\r\n    \tSystem.out.println (temp2 + &quot; index contains= &quot; + num[j]);\r\n          }\r\n    \r\n      }\r\n    }\r\n\r\nRefer the working code [here][1]\r\n\r\n  [1]: https://onlinegdb.com/DYQ_qO3tL","title":"Arrays going out of Bounds in java","body":"<p>This is a runtime exception in Java that occurs when you try to access an array with an illegal index. The index is either negative or greater than or equal to the size of the array. In order to fix this error in your code.</p>\n<p>Change <code>i &lt;= array.length</code> to <code>i &lt; array.length</code></p>\n<pre><code>import java.util.Scanner;\n\npublic class Main\n{\n  public static void main (String[]args)\n  {\n    Scanner sn = new Scanner (System.in);\n\n    int size;\n      System.out.println (&quot;Enter the size of the array =&quot;);\n      size = sn.nextInt ();\n    int[] num = new int[size];\n\n      System.out.println (&quot;Created a Numerical Array&quot;);\n\n    for (int x = 0; x &lt; num.length; x++)\n      {\n    System.out.println (&quot;Enter data into the &quot; + x + &quot; index = &quot;);\n    num[x] = sn.nextInt ();\n\n      }\n    for (int j = 0; j &lt; num.length; j++)\n      {\n    int temp2 = j + 1;\n    System.out.println (temp2 + &quot; index contains= &quot; + num[j]);\n      }\n\n  }\n}\n</code></pre>\n<p>Refer the working code <a href=\"https://onlinegdb.com/DYQ_qO3tL\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":25538860,"reputation":35,"user_id":19325373,"display_name":"Ashitosh bendre"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":4,"score":-1,"last_activity_date":1700757169,"creation_date":1700553616,"question_id":77521162,"body_markdown":"I created a simple method which takes array size for user and enters data into array and print the array, but this code is always giving out of bounds error pls help.\r\nHere&#39;s the code.\r\n\r\n\r\n    static void arrrays()\r\n    {\r\n        Scanner sn = new Scanner(System.in);\r\n\r\n        /*\r\n            arrays = stores multiples values of similar variables\r\n\r\n            WAYS TO DECLEAR A ARRAY\r\n            1.String[] cars = new String[3];\r\n            2.String[] cars={&quot;Camaro&quot;,&quot;Corvette&quot;,&quot;Tesla&quot;};\r\n\r\n        */\r\n\r\n        int size;\r\n        System.out.println(&quot;Enter the size of the array =&quot;);\r\n        size=sn.nextInt();\r\n\r\n        int[] num= new int[size];\r\n\r\n        System.out.println(&quot;Created a Numerical Array&quot;);\r\n\r\n        for (int x=0;x&lt;=num.length;x++)\r\n        {\r\n            System.out.println(&quot;Enter data into the &quot; + x + &quot; index = &quot; );\r\n            num[x]=sn.nextInt();\r\n\r\n        }\r\n        for(int j=0;j&lt;=num.length;j++)\r\n        {\r\n            int temp2=j+1;\r\n            System.out.println(temp2 +&quot; index contains= &quot;+num[j]);\r\n        }\r\n\r\n\r\n        /*//Printing arrays\r\n        String[] cars={&quot;Camaro&quot;,&quot;Corvette&quot;,&quot;Tesla&quot;};\r\n\r\n        for(int i=0;i&lt; cars.length;i++)\r\n        {\r\n            System.out.println(cars[i]);\r\n        }*/\r\n\r\n    }\r\n\r\n","title":"Arrays going out of Bounds in java","body":"<p>I created a simple method which takes array size for user and enters data into array and print the array, but this code is always giving out of bounds error pls help.\nHere's the code.</p>\n<pre><code>static void arrrays()\n{\n    Scanner sn = new Scanner(System.in);\n\n    /*\n        arrays = stores multiples values of similar variables\n\n        WAYS TO DECLEAR A ARRAY\n        1.String[] cars = new String[3];\n        2.String[] cars={&quot;Camaro&quot;,&quot;Corvette&quot;,&quot;Tesla&quot;};\n\n    */\n\n    int size;\n    System.out.println(&quot;Enter the size of the array =&quot;);\n    size=sn.nextInt();\n\n    int[] num= new int[size];\n\n    System.out.println(&quot;Created a Numerical Array&quot;);\n\n    for (int x=0;x&lt;=num.length;x++)\n    {\n        System.out.println(&quot;Enter data into the &quot; + x + &quot; index = &quot; );\n        num[x]=sn.nextInt();\n\n    }\n    for(int j=0;j&lt;=num.length;j++)\n    {\n        int temp2=j+1;\n        System.out.println(temp2 +&quot; index contains= &quot;+num[j]);\n    }\n\n\n    /*//Printing arrays\n    String[] cars={&quot;Camaro&quot;,&quot;Corvette&quot;,&quot;Tesla&quot;};\n\n    for(int i=0;i&lt; cars.length;i++)\n    {\n        System.out.println(cars[i]);\n    }*/\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-boot-actuator"],"answers":[{"comments":[{"owner":{"account_id":9828070,"reputation":59,"user_id":7280680,"accept_rate":40,"display_name":"Nas Sim"},"score":0,"creation_date":1603470006,"post_id":64503710,"comment_id":114057042,"body_markdown":"i already did that for the info actuator, but what i need is to customise health actuator wich serve for monitoring the application","body":"i already did that for the info actuator, but what i need is to customise health actuator wich serve for monitoring the application"},{"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"score":0,"creation_date":1603470162,"post_id":64503710,"comment_id":114057086,"body_markdown":"@NasSim https://www.baeldung.com/spring-boot-actuators","body":"@NasSim <a href=\"https://www.baeldung.com/spring-boot-actuators\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-actuators</a>"}],"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603469789,"creation_date":1603469789,"answer_id":64503710,"question_id":64503501,"body_markdown":"    info:\r\n        app:\r\n            name: @project.name@\r\n            version: @project.version@\r\n        external-resources:\r\n            services:\r\n                &#39;[service.util]&#39;: ${service.util.url}\r\n                another_service: ${service.host}\r\n            database:\r\n                url: ${spring.datasource.url}\r\n                username: ${spring.datasource.username}\r\n        build:\r\n            date: @timestamp@\r\n            commit-sha: ${COMMIT_SHORT_SHA:xxx}\r\n        deployment:\r\n            date: ${DEPLOYMENT_TIME:xxx}\r\n\r\nJust put all you need under `info` section of the `application.yml`","title":"Custom health actuator properties","body":"<pre><code>info:\n    app:\n        name: @project.name@\n        version: @project.version@\n    external-resources:\n        services:\n            '[service.util]': ${service.util.url}\n            another_service: ${service.host}\n        database:\n            url: ${spring.datasource.url}\n            username: ${spring.datasource.username}\n    build:\n        date: @timestamp@\n        commit-sha: ${COMMIT_SHORT_SHA:xxx}\n    deployment:\n        date: ${DEPLOYMENT_TIME:xxx}\n</code></pre>\n<p>Just put all you need under <code>info</code> section of the <code>application.yml</code></p>\n"},{"tags":[],"owner":{"account_id":1628102,"reputation":3602,"user_id":1503163,"display_name":"Sanjay Bharwani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700757015,"creation_date":1700757015,"answer_id":77538402,"question_id":64503501,"body_markdown":"Custom properties can be added to the `/actuator/info` response by implementing `InfoContributor`\r\n\r\n    @Component\r\n    public class CustomInfoContributor implements InfoContributor {\r\n    @Override\r\n      public void contribute(Info.Builder builder) {\r\n        builder.withDetails(Map.of(&quot;custom-prop-1&quot;, &quot;custom-value-1&quot;));\r\n      }\r\n    }\r\n\r\nThis will expose a new field and value in actuator/info response.\r\nThis structure can be a complex map of map as well.\r\n\r\nfor e.g. \r\n\r\n \r\n\r\n    @Component\r\n        public class CustomInfoContributor implements InfoContributor {\r\n        @Override\r\n          public void contribute(Info.Builder builder) {\r\n            builder.withDetails(Map.of(&quot;custom-props&quot;, Map.of(&quot;custom-prop-1&quot;,&quot;custom-val-1&quot;,&quot;custom-prop-2&quot;, &quot;custom-val-2&quot;));\r\n          }\r\n        }\r\n\r\nThis will expose additional structure as below\r\n\r\n    &quot;custom-props&quot;: {\r\n    &quot;custom-prop-1&quot;: &quot;custom-val-1&quot;,\r\n    &quot;custom-prop-2&quot;:&quot;custom-val-2&quot;\r\n    }\r\n\r\n","title":"Custom health actuator properties","body":"<p>Custom properties can be added to the <code>/actuator/info</code> response by implementing <code>InfoContributor</code></p>\n<pre><code>@Component\npublic class CustomInfoContributor implements InfoContributor {\n@Override\n  public void contribute(Info.Builder builder) {\n    builder.withDetails(Map.of(&quot;custom-prop-1&quot;, &quot;custom-value-1&quot;));\n  }\n}\n</code></pre>\n<p>This will expose a new field and value in actuator/info response.\nThis structure can be a complex map of map as well.</p>\n<p>for e.g.</p>\n<pre><code>@Component\n    public class CustomInfoContributor implements InfoContributor {\n    @Override\n      public void contribute(Info.Builder builder) {\n        builder.withDetails(Map.of(&quot;custom-props&quot;, Map.of(&quot;custom-prop-1&quot;,&quot;custom-val-1&quot;,&quot;custom-prop-2&quot;, &quot;custom-val-2&quot;));\n      }\n    }\n</code></pre>\n<p>This will expose additional structure as below</p>\n<pre><code>&quot;custom-props&quot;: {\n&quot;custom-prop-1&quot;: &quot;custom-val-1&quot;,\n&quot;custom-prop-2&quot;:&quot;custom-val-2&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":9828070,"reputation":59,"user_id":7280680,"accept_rate":40,"display_name":"Nas Sim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1700757015,"creation_date":1603469031,"question_id":64503501,"body_markdown":"I&#39;m working in java **springBoot** application **v 1.5.3**\r\ni added **health actuator** and is working fine.\r\nwhat i need to do is costomise status properties and put an other **properties name** like in the picture.\r\nSo i put for example globalStatus in place of status\r\nDoes any one have an idea how it should be done\r\n\r\nthanks!\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/N84y3.png","title":"Custom health actuator properties","body":"<p>I'm working in java <strong>springBoot</strong> application <strong>v 1.5.3</strong>\ni added <strong>health actuator</strong> and is working fine.\nwhat i need to do is costomise status properties and put an other <strong>properties name</strong> like in the picture.\nSo i put for example globalStatus in place of status\nDoes any one have an idea how it should be done</p>\n<p>thanks!</p>\n<p><a href=\"https://i.stack.imgur.com/N84y3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N84y3.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","android-studio","payment-gateway","phonepe"],"comments":[{"owner":{"account_id":369824,"reputation":1540,"user_id":717417,"accept_rate":100,"display_name":"santosh-patil"},"score":0,"creation_date":1700730356,"post_id":77534388,"comment_id":136691060,"body_markdown":"Please share the error response you&#39;re getting","body":"Please share the error response you&#39;re getting"}],"owner":{"account_id":29823981,"reputation":57,"user_id":22856447,"display_name":"Mr. Programmer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1700756540,"creation_date":1700714492,"question_id":77534388,"body_markdown":"I am implementing PhonePe Payment Gateway inside my application, but its displays toast Payment Cancelled always whenever I run my application. I am using Android Studio with Java as backend. Here is my code:\r\n\r\n    private void payUsingPhonePe() throws PhonePeInitException {\r\n        String MERCHANT_ID = &quot;MERCHANTUAT&quot;;\r\n        String salt = &quot;a6334ff7-da0e-4d51-a9ce-76b97d518b1e&quot;;\r\n        String apiEndPoint = &quot;/pg/v1/pay&quot;;\r\n        PhonePe.init(Checkout.this, PhonePeEnvironment.RELEASE, MERCHANT_ID, &quot;com.igcshop.igc&quot;);\r\n        HashMap&lt;String, Object&gt; data = new HashMap&lt;&gt;();\r\n        data.put(&quot;merchantId&quot;, MERCHANT_ID);\r\n        data.put(&quot;merchantTransactionId&quot;, orderId);\r\n        data.put(&quot;merchantUserId&quot;, custID);\r\n        data.put(&quot;amount&quot;, total * 100);\r\n        data.put(&quot;mobileNumber&quot;, phone);\r\n        data.put(&quot;callbackUrl&quot;, &quot;https://webhook.site/callback-url&quot;);\r\n        HashMap&lt;String, Object&gt; paymentInstrument = new HashMap&lt;&gt;();\r\n        paymentInstrument.put(&quot;type&quot;, &quot;UPI_INTENT&quot;);\r\n        paymentInstrument.put(&quot;targetApp&quot;, &quot;com.phonepe.app&quot;);\r\n        data.put(&quot;paymentInstrument&quot;, paymentInstrument);\r\n        HashMap&lt;String, Object&gt; deviceContext = new HashMap&lt;&gt;();\r\n        deviceContext.put(&quot;deviceOS&quot;, &quot;ANDROID&quot;);\r\n        data.put(&quot;deviceContext&quot;, deviceContext);\r\n        String payloadBase64 = convertDataToBase64(data);\r\n        String checksum = generateChecksum(payloadBase64, apiEndPoint, salt);\r\n        B2BPGRequest b2BPGRequest = new B2BPGRequestBuilder()\r\n                .setData(Objects.requireNonNull(payloadBase64))\r\n                .setChecksum(Objects.requireNonNull(checksum))\r\n                .setUrl(apiEndPoint)\r\n                .build();\r\n        List&lt;UPIApplicationInfo&gt; upiApps = PhonePe.getUpiApps();\r\n        startActivityForResult(PhonePe.getImplicitIntent(this, b2BPGRequest, upiApps.toString()), 777);\r\n    }\r\n\r\n    public static String convertDataToBase64(HashMap&lt;String, Object&gt; data) {\r\n        try {\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n            String jsonString = objectMapper.writeValueAsString(data);\r\n            byte[] base64Bytes = Base64.encode(jsonString.getBytes(), Base64.DEFAULT);\r\n            return new String(base64Bytes);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public static String generateChecksum(String payloadBase64, String apiEndPoint, String salt) {\r\n        try {\r\n            String dataToHash = payloadBase64 + apiEndPoint + salt;\r\n            MessageDigest md = MessageDigest.getInstance(&quot;SHA-256&quot;);\r\n            md.update(dataToHash.getBytes());\r\n            byte[] byteData = md.digest();\r\n            StringBuilder checksumBuilder = new StringBuilder();\r\n            for (byte b : byteData) {\r\n                checksumBuilder.append(String.format(&quot;%02x&quot;, b));\r\n            }\r\n            return checksumBuilder + &quot;###1&quot;;\r\n        } catch (NoSuchAlgorithmException e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        String result = null;\r\n        if (data != null) {\r\n            result = data.getStringExtra(&quot;key_txn_result&quot;);\r\n            if (data.getExtras() != null &amp;&amp; data.getExtras().keySet().size() &gt; 0) {\r\n                Log.i(TAG, &quot;result has extras&quot;);\r\n                for (String key : data.getExtras().keySet()) {\r\n                    Log.i(TAG, key + &quot; = &quot; + data.getExtras().get(key));\r\n                }\r\n            } else {\r\n                Log.i(TAG, &quot;result has 0 extras&quot;);\r\n            }\r\n        }\r\n        if (resultCode != Activity.RESULT_CANCELED) {\r\n            Toast.makeText(this, &quot;Result: &quot; + result, Toast.LENGTH_SHORT).show();\r\n        } else {\r\n            if (requestCode == 777 &amp;&amp; data != null &amp;&amp; data.getExtras().containsKey(&quot;key_error_result&quot;))\r\n                result = data.getStringExtra(&quot;key_error_result&quot;);\r\n            Toast.makeText(this, &quot;Failed: &quot; + result, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\nPlease look the above code and let me know what could be possible reason of getting such error.","title":"PhonePe Payment Gateway Not Working Inside Java Android","body":"<p>I am implementing PhonePe Payment Gateway inside my application, but its displays toast Payment Cancelled always whenever I run my application. I am using Android Studio with Java as backend. Here is my code:</p>\n<pre><code>private void payUsingPhonePe() throws PhonePeInitException {\n    String MERCHANT_ID = &quot;MERCHANTUAT&quot;;\n    String salt = &quot;a6334ff7-da0e-4d51-a9ce-76b97d518b1e&quot;;\n    String apiEndPoint = &quot;/pg/v1/pay&quot;;\n    PhonePe.init(Checkout.this, PhonePeEnvironment.RELEASE, MERCHANT_ID, &quot;com.igcshop.igc&quot;);\n    HashMap&lt;String, Object&gt; data = new HashMap&lt;&gt;();\n    data.put(&quot;merchantId&quot;, MERCHANT_ID);\n    data.put(&quot;merchantTransactionId&quot;, orderId);\n    data.put(&quot;merchantUserId&quot;, custID);\n    data.put(&quot;amount&quot;, total * 100);\n    data.put(&quot;mobileNumber&quot;, phone);\n    data.put(&quot;callbackUrl&quot;, &quot;https://webhook.site/callback-url&quot;);\n    HashMap&lt;String, Object&gt; paymentInstrument = new HashMap&lt;&gt;();\n    paymentInstrument.put(&quot;type&quot;, &quot;UPI_INTENT&quot;);\n    paymentInstrument.put(&quot;targetApp&quot;, &quot;com.phonepe.app&quot;);\n    data.put(&quot;paymentInstrument&quot;, paymentInstrument);\n    HashMap&lt;String, Object&gt; deviceContext = new HashMap&lt;&gt;();\n    deviceContext.put(&quot;deviceOS&quot;, &quot;ANDROID&quot;);\n    data.put(&quot;deviceContext&quot;, deviceContext);\n    String payloadBase64 = convertDataToBase64(data);\n    String checksum = generateChecksum(payloadBase64, apiEndPoint, salt);\n    B2BPGRequest b2BPGRequest = new B2BPGRequestBuilder()\n            .setData(Objects.requireNonNull(payloadBase64))\n            .setChecksum(Objects.requireNonNull(checksum))\n            .setUrl(apiEndPoint)\n            .build();\n    List&lt;UPIApplicationInfo&gt; upiApps = PhonePe.getUpiApps();\n    startActivityForResult(PhonePe.getImplicitIntent(this, b2BPGRequest, upiApps.toString()), 777);\n}\n\npublic static String convertDataToBase64(HashMap&lt;String, Object&gt; data) {\n    try {\n        ObjectMapper objectMapper = new ObjectMapper();\n        String jsonString = objectMapper.writeValueAsString(data);\n        byte[] base64Bytes = Base64.encode(jsonString.getBytes(), Base64.DEFAULT);\n        return new String(base64Bytes);\n    } catch (IOException e) {\n        e.printStackTrace();\n        return null;\n    }\n}\n\npublic static String generateChecksum(String payloadBase64, String apiEndPoint, String salt) {\n    try {\n        String dataToHash = payloadBase64 + apiEndPoint + salt;\n        MessageDigest md = MessageDigest.getInstance(&quot;SHA-256&quot;);\n        md.update(dataToHash.getBytes());\n        byte[] byteData = md.digest();\n        StringBuilder checksumBuilder = new StringBuilder();\n        for (byte b : byteData) {\n            checksumBuilder.append(String.format(&quot;%02x&quot;, b));\n        }\n        return checksumBuilder + &quot;###1&quot;;\n    } catch (NoSuchAlgorithmException e) {\n        e.printStackTrace();\n        return null;\n    }\n}\n\n@Override\nprotected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    String result = null;\n    if (data != null) {\n        result = data.getStringExtra(&quot;key_txn_result&quot;);\n        if (data.getExtras() != null &amp;&amp; data.getExtras().keySet().size() &gt; 0) {\n            Log.i(TAG, &quot;result has extras&quot;);\n            for (String key : data.getExtras().keySet()) {\n                Log.i(TAG, key + &quot; = &quot; + data.getExtras().get(key));\n            }\n        } else {\n            Log.i(TAG, &quot;result has 0 extras&quot;);\n        }\n    }\n    if (resultCode != Activity.RESULT_CANCELED) {\n        Toast.makeText(this, &quot;Result: &quot; + result, Toast.LENGTH_SHORT).show();\n    } else {\n        if (requestCode == 777 &amp;&amp; data != null &amp;&amp; data.getExtras().containsKey(&quot;key_error_result&quot;))\n            result = data.getStringExtra(&quot;key_error_result&quot;);\n        Toast.makeText(this, &quot;Failed: &quot; + result, Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre>\n<p>Please look the above code and let me know what could be possible reason of getting such error.</p>\n"},{"tags":["java","spring-security","oauth-2.0","openid"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":3,"creation_date":1700757331,"post_id":77538290,"comment_id":136696077,"body_markdown":"It would help if you showed the code you currently have in your spring auth server, and what you have tried that didnt work, and what error you got when trying. Stack overflow is not a development team where you place orders on features.","body":"It would help if you showed the code you currently have in your spring auth server, and what you have tried that didnt work, and what error you got when trying. Stack overflow is not a development team where you place orders on features."}],"owner":{"account_id":17523454,"reputation":1,"user_id":12708997,"display_name":"Dilz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":0,"score":-3,"last_activity_date":1700755916,"creation_date":1700755916,"question_id":77538290,"body_markdown":"I have a Spring OAuth server and a resource server that use opaque tokens as access token. I need to customize my introspection endpoint to include authorities in it\r\n\r\nMy expectation is something\r\n\r\nfrom \r\n```\r\n{\r\n    &quot;active&quot;: true,\r\n    &quot;sub&quot;: &quot;test&quot;,\r\n    &quot;aud&quot;: [\r\n        &quot;client&quot;\r\n    ],\r\n    &quot;nbf&quot;: 1700750571,\r\n    &quot;scope&quot;: &quot;openid&quot;,\r\n    &quot;iss&quot;: &quot;http://localhost:8080&quot;,\r\n    &quot;exp&quot;: 1700836971,\r\n    &quot;iat&quot;: 1700750571,\r\n    &quot;jti&quot;: &quot;4871af52-5d28-4e08-94d1-963c4a940c15&quot;,\r\n    &quot;client_id&quot;: &quot;client&quot;,\r\n    &quot;token_type&quot;: &quot;Bearer&quot;\r\n}\r\n```\r\nto like\r\n\r\n```\r\n{\r\n    &quot;active&quot;: true,\r\n    &quot;sub&quot;: &quot;test&quot;,\r\n    &quot;aud&quot;: [\r\n        &quot;client&quot;\r\n    ],\r\n    &quot;nbf&quot;: 1700750571,\r\n    &quot;scope&quot;: &quot;openid&quot;,\r\n    &quot;iss&quot;: &quot;http://localhost:8080&quot;,\r\n    &quot;exp&quot;: 1700836971,\r\n    &quot;iat&quot;: 1700750571,\r\n    &quot;jti&quot;: &quot;4871af52-5d28-4e08-94d1-963c4a940c15&quot;,\r\n    &quot;client_id&quot;: &quot;client&quot;,\r\n    &quot;token_type&quot;: &quot;Bearer&quot;,\r\n    **&quot;Authorities&quot; : [&quot;READ&quot;,&quot;WRITE&quot;]**\r\n}\r\n```\r\n\r\nplease advice me on how to archive that","title":"How to add custom authorities to the opaque token in Spring OAuth Server","body":"<p>I have a Spring OAuth server and a resource server that use opaque tokens as access token. I need to customize my introspection endpoint to include authorities in it</p>\n<p>My expectation is something</p>\n<p>from</p>\n<pre><code>{\n    &quot;active&quot;: true,\n    &quot;sub&quot;: &quot;test&quot;,\n    &quot;aud&quot;: [\n        &quot;client&quot;\n    ],\n    &quot;nbf&quot;: 1700750571,\n    &quot;scope&quot;: &quot;openid&quot;,\n    &quot;iss&quot;: &quot;http://localhost:8080&quot;,\n    &quot;exp&quot;: 1700836971,\n    &quot;iat&quot;: 1700750571,\n    &quot;jti&quot;: &quot;4871af52-5d28-4e08-94d1-963c4a940c15&quot;,\n    &quot;client_id&quot;: &quot;client&quot;,\n    &quot;token_type&quot;: &quot;Bearer&quot;\n}\n</code></pre>\n<p>to like</p>\n<pre><code>{\n    &quot;active&quot;: true,\n    &quot;sub&quot;: &quot;test&quot;,\n    &quot;aud&quot;: [\n        &quot;client&quot;\n    ],\n    &quot;nbf&quot;: 1700750571,\n    &quot;scope&quot;: &quot;openid&quot;,\n    &quot;iss&quot;: &quot;http://localhost:8080&quot;,\n    &quot;exp&quot;: 1700836971,\n    &quot;iat&quot;: 1700750571,\n    &quot;jti&quot;: &quot;4871af52-5d28-4e08-94d1-963c4a940c15&quot;,\n    &quot;client_id&quot;: &quot;client&quot;,\n    &quot;token_type&quot;: &quot;Bearer&quot;,\n    **&quot;Authorities&quot; : [&quot;READ&quot;,&quot;WRITE&quot;]**\n}\n</code></pre>\n<p>please advice me on how to archive that</p>\n"},{"tags":["java","concurrency"],"comments":[{"owner":{"account_id":5783887,"reputation":3326,"user_id":4563745,"accept_rate":80,"display_name":"Vasiliy Vlasov"},"score":1,"creation_date":1497784278,"post_id":44614323,"comment_id":76215067,"body_markdown":"Probably this could be an example: https://stackoverflow.com/a/1084124/4563745","body":"Probably this could be an example: <a href=\"https://stackoverflow.com/a/1084124/4563745\">stackoverflow.com/a/1084124/4563745</a>"},{"owner":{"account_id":8153345,"reputation":396,"user_id":6139703,"accept_rate":75,"display_name":"agienka"},"score":0,"creation_date":1497785169,"post_id":44614323,"comment_id":76215297,"body_markdown":"Ok, this is nice use case, but I still don&#39;t understand what is wrong with such escaping reference - even if I&#39;d do ThisEscape.this.doSomething(); from within anonymous implementation, &#39;this&#39; still stays visible within ThisEscape only.","body":"Ok, this is nice use case, but I still don&#39;t understand what is wrong with such escaping reference - even if I&#39;d do ThisEscape.this.doSomething(); from within anonymous implementation, &#39;this&#39; still stays visible within ThisEscape only."},{"owner":{"account_id":123958,"reputation":109295,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"score":0,"creation_date":1497785668,"post_id":44614323,"comment_id":76215426,"body_markdown":"The event source can send events before ThisEscape constructor has finished. The events will be processed with the object in an unpredictable state.","body":"The event source can send events before ThisEscape constructor has finished. The events will be processed with the object in an unpredictable state."},{"owner":{"account_id":379763,"reputation":29886,"user_id":733345,"display_name":"Joe"},"score":0,"creation_date":1497787399,"post_id":44614323,"comment_id":76215841,"body_markdown":"Possible duplicate of [Allowing the this reference to escape](https://stackoverflow.com/questions/20474521/allowing-the-this-reference-to-escape)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/20474521/allowing-the-this-reference-to-escape\">Allowing the this reference to escape</a>"},{"owner":{"account_id":8153345,"reputation":396,"user_id":6139703,"accept_rate":75,"display_name":"agienka"},"score":0,"creation_date":1497814814,"post_id":44614323,"comment_id":76223561,"body_markdown":"I found another great explanation for the same issue: https://stackoverflow.com/questions/28676796/how-does-this-reference-to-an-outer-class-escape-through-publishing-inner-clas?rq=1","body":"I found another great explanation for the same issue: <a href=\"https://stackoverflow.com/questions/28676796/how-does-this-reference-to-an-outer-class-escape-through-publishing-inner-clas?rq=1\" title=\"how does this reference to an outer class escape through publishing inner clas\">stackoverflow.com/questions/28676796/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2533222,"reputation":4782,"user_id":2201050,"display_name":"folkol"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1497785766,"creation_date":1497785766,"answer_id":44614554,"question_id":44614323,"body_markdown":"The problem with escaping this references is that code in other threads might start interacting with the object before the constructor is finished constructing it.\r\n\r\nConsider this example:\r\n\r\n    public class ThisEscape\r\n    {\r\n        Foo foo;\r\n        public ThisEscape(EventSource source) {\r\n            source.registerListener(new EventListener()\r\n            {\r\n                public void onEvent(Event e) {\r\n                    doSomething(e);\r\n                }\r\n            });\r\n\r\n            // Possible Thread Context switch\r\n\r\n            // More important initialization\r\n            foo = new Foo();\r\n        }\r\n\r\n        public void doSomething(Event e) {\r\n            // Might throw NullPointerException, by being invoked\r\n            // through the EventListener before foo is initialized\r\n            foo.bar();\r\n        }\r\n    }\r\n\r\n","title":"Java escaping reference to &#39;this&#39;","body":"<p>The problem with escaping this references is that code in other threads might start interacting with the object before the constructor is finished constructing it.</p>\n\n<p>Consider this example:</p>\n\n<pre><code>public class ThisEscape\n{\n    Foo foo;\n    public ThisEscape(EventSource source) {\n        source.registerListener(new EventListener()\n        {\n            public void onEvent(Event e) {\n                doSomething(e);\n            }\n        });\n\n        // Possible Thread Context switch\n\n        // More important initialization\n        foo = new Foo();\n    }\n\n    public void doSomething(Event e) {\n        // Might throw NullPointerException, by being invoked\n        // through the EventListener before foo is initialized\n        foo.bar();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13259968,"reputation":25,"user_id":9574849,"display_name":"Flamer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700755664,"creation_date":1700755664,"answer_id":77538272,"question_id":44614323,"body_markdown":"I also encounter this problem.Then I lookup the [whole code from the official site][1].You will understand naturally.The whole `ThisEscape` class looks like this:\r\n\r\n```\r\npackage net.jcip.examples;\r\n\r\n/**\r\n * ThisEscape\r\n * &lt;p/&gt;\r\n * Implicitly allowing the this reference to escape\r\n *\r\n * @author Brian Goetz and Tim Peierls\r\n */\r\npublic class ThisEscape {\r\n    public ThisEscape(EventSource source) {\r\n        source.registerListener(new EventListener() {\r\n            public void onEvent(Event e) {\r\n                doSomething(e);\r\n            }\r\n        });\r\n    }\r\n\r\n    void doSomething(Event e) {\r\n    }\r\n\r\n\r\n    interface EventSource {\r\n        void registerListener(EventListener e);\r\n    }\r\n\r\n    interface EventListener {\r\n        void onEvent(Event e);\r\n    }\r\n\r\n    interface Event {\r\n    }\r\n}\r\n```\r\n\r\nNotice that the `doSomething` method is part of the `ThisEscape` class, which means that another thread could potentially access the object through the `this` reference before the object has finished constructing itself.\r\n\r\n  [1]: https://jcip.net/listings/ThisEscape.java","title":"Java escaping reference to &#39;this&#39;","body":"<p>I also encounter this problem.Then I lookup the <a href=\"https://jcip.net/listings/ThisEscape.java\" rel=\"nofollow noreferrer\">whole code from the official site</a>.You will understand naturally.The whole <code>ThisEscape</code> class looks like this:</p>\n<pre><code>package net.jcip.examples;\n\n/**\n * ThisEscape\n * &lt;p/&gt;\n * Implicitly allowing the this reference to escape\n *\n * @author Brian Goetz and Tim Peierls\n */\npublic class ThisEscape {\n    public ThisEscape(EventSource source) {\n        source.registerListener(new EventListener() {\n            public void onEvent(Event e) {\n                doSomething(e);\n            }\n        });\n    }\n\n    void doSomething(Event e) {\n    }\n\n\n    interface EventSource {\n        void registerListener(EventListener e);\n    }\n\n    interface EventListener {\n        void onEvent(Event e);\n    }\n\n    interface Event {\n    }\n}\n</code></pre>\n<p>Notice that the <code>doSomething</code> method is part of the <code>ThisEscape</code> class, which means that another thread could potentially access the object through the <code>this</code> reference before the object has finished constructing itself.</p>\n"}],"owner":{"account_id":8153345,"reputation":396,"user_id":6139703,"accept_rate":75,"display_name":"agienka"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":757,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":44614554,"answer_count":2,"score":6,"last_activity_date":1700755664,"creation_date":1497783939,"question_id":44614323,"body_markdown":"I started reading [Java Concurrency in Practice][1] and I came across the following example (this is a negative example - shows bad practice):\r\n\r\n    public class ThisEscape {\r\n        public ThisEscape(EventSource source) {\r\n            source.registerListener(new EventListener() {\r\n                public void onEvent(Event e) {\r\n                    doSomething(e);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\nThe author in the book writes:\r\n\r\n&gt; When ThisEscape publishes the EventListener, it implicitly publishes the enclosing ThisEscape instance as well, because inner class instances contain a hidden reference to the enclosing instance.\r\n\r\nWhen I think about the usage of such code, I could do something like so:\r\n\r\n    EventSource eventSource = new EventSource();\r\n    ThisEscape thisEscape = new ThisEscape(eventSource);\r\n\r\nand I can get the reference to the registered EventListener, but what does it mean that I could obtain the reference to the enclosing ThisEscape instance?\r\n\r\nCould someone give me an example of such a behaviour? What is the use case?\r\n\r\n\r\n  [1]: https://books.google.pl/books?id=EK43StEVfJIC","title":"Java escaping reference to &#39;this&#39;","body":"<p>I started reading <a href=\"https://books.google.pl/books?id=EK43StEVfJIC\" rel=\"noreferrer\">Java Concurrency in Practice</a> and I came across the following example (this is a negative example - shows bad practice):</p>\n\n<pre><code>public class ThisEscape {\n    public ThisEscape(EventSource source) {\n        source.registerListener(new EventListener() {\n            public void onEvent(Event e) {\n                doSomething(e);\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>The author in the book writes:</p>\n\n<blockquote>\n  <p>When ThisEscape publishes the EventListener, it implicitly publishes the enclosing ThisEscape instance as well, because inner class instances contain a hidden reference to the enclosing instance.</p>\n</blockquote>\n\n<p>When I think about the usage of such code, I could do something like so:</p>\n\n<pre><code>EventSource eventSource = new EventSource();\nThisEscape thisEscape = new ThisEscape(eventSource);\n</code></pre>\n\n<p>and I can get the reference to the registered EventListener, but what does it mean that I could obtain the reference to the enclosing ThisEscape instance?</p>\n\n<p>Could someone give me an example of such a behaviour? What is the use case?</p>\n"},{"tags":["java","java-11","java-http-client"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":4,"creation_date":1540478466,"post_id":52988677,"comment_id":92889249,"body_markdown":"You need to instantiate an `SSLContext` that is going to ignore the bad certs, then use that to build the connection.","body":"You need to instantiate an <code>SSLContext</code> that is going to ignore the bad certs, then use that to build the connection."}],"answers":[{"comments":[{"owner":{"account_id":4468857,"reputation":897,"user_id":3635669,"display_name":"vagran"},"score":3,"creation_date":1540497532,"post_id":52995420,"comment_id":92899205,"body_markdown":"I found the solution and updated the question. Your answer is mostly valid so I accepted it. But also note that `jdk.internal.httpclient.disableHostnameVerification` system property must be set to get rid of hostname verification exceptions, SSLParameters unfortunately do not affect this behaviour, which is either bug or some strange design decision.","body":"I found the solution and updated the question. Your answer is mostly valid so I accepted it. But also note that <code>jdk.internal.httpclient.disableHostnameVerification</code> system property must be set to get rid of hostname verification exceptions, SSLParameters unfortunately do not affect this behaviour, which is either bug or some strange design decision."},{"owner":{"account_id":1391519,"reputation":1710,"user_id":1322243,"accept_rate":66,"display_name":"liltitus27"},"score":2,"creation_date":1542381728,"post_id":52995420,"comment_id":93560348,"body_markdown":"programatically disable hostname verification before instantiating httpclient\n\n`// PREVENTS HOST VALIDATION`\n\n`final Properties props = System.getProperties();`\n\n`props.setProperty(&quot;jdk.internal.httpclient.disableHostnameVerification&quot;, Boolean.TRUE.toString());`","body":"programatically disable hostname verification before instantiating httpclient  <code>&#47;&#47; PREVENTS HOST VALIDATION</code>  <code>final Properties props = System.getProperties();</code>  <code>props.setProperty(&quot;jdk.internal.httpclient.disableHostnameVe&zwnj;&#8203;rification&quot;, Boolean.TRUE.toString());</code>"},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1597761007,"post_id":52995420,"comment_id":112235689,"body_markdown":"`jdk.internal.httpclient.disableHostnameVerification` is a system wide property - if you have _two_ clients under the same JVM: one that needs that disabled and one that needs that enabled...","body":"<code>jdk.internal.httpclient.disableHostnameVerification</code> is a system wide property - if you have <i>two</i> clients under the same JVM: one that needs that disabled and one that needs that enabled..."}],"tags":[],"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"comment_count":3,"down_vote_count":2,"up_vote_count":22,"is_accepted":true,"score":20,"last_activity_date":1542382047,"creation_date":1540490252,"answer_id":52995420,"question_id":52988677,"body_markdown":"With Java 11, as well you can do a similar effort [as mentioned in the selected answer in the link shared](https://stackoverflow.com/a/1201102/1746118) with the `HttpClient` built as:\r\n\r\n       \r\n\r\n    HttpClient httpClient = HttpClient.newBuilder()\r\n            .connectTimeout(Duration.ofMillis(&lt;timeoutInSeconds&gt; * 1000))\r\n            .sslContext(sc) // SSL context &#39;sc&#39; initialised as earlier\r\n            .sslParameters(parameters) // ssl parameters if overriden\r\n            .build();\r\n\r\nwith a sample request\r\n\r\n    HttpRequest requestBuilder = HttpRequest.newBuilder()\r\n                .uri(URI.create(&quot;https://www.example.com/getSomething&quot;))\r\n                .GET()\r\n                .build();\r\n\r\ncan be executed as:\r\n\r\n    httpClient.send(requestBuilder, HttpResponse.BodyHandlers.ofString()); // sends the request\r\n\r\n\r\n----------\r\n\r\nUpdate from comments, to disable the hostname verification, currently one can use the system property: \r\n\r\n    -Djdk.internal.httpclient.disableHostnameVerification\r\n\r\n\r\nwhich can be [set programmatically](https://stackoverflow.com/questions/52988677/allow-insecure-https-connection-for-java-jdk-11-httpclient/52995420?noredirect=1#comment93560348_52995420) as following :-\r\n\r\n    final Properties props = System.getProperties(); \r\n    props.setProperty(&quot;jdk.internal.httpclient.disableHostnameVerification&quot;, Boolean.TRUE.toString());","title":"Allow insecure HTTPS connection for Java JDK 11 HttpClient","body":"<p>With Java 11, as well you can do a similar effort <a href=\"https://stackoverflow.com/a/1201102/1746118\">as mentioned in the selected answer in the link shared</a> with the <code>HttpClient</code> built as:</p>\n\n<pre><code>HttpClient httpClient = HttpClient.newBuilder()\n        .connectTimeout(Duration.ofMillis(&lt;timeoutInSeconds&gt; * 1000))\n        .sslContext(sc) // SSL context 'sc' initialised as earlier\n        .sslParameters(parameters) // ssl parameters if overriden\n        .build();\n</code></pre>\n\n<p>with a sample request</p>\n\n<pre><code>HttpRequest requestBuilder = HttpRequest.newBuilder()\n            .uri(URI.create(\"https://www.example.com/getSomething\"))\n            .GET()\n            .build();\n</code></pre>\n\n<p>can be executed as:</p>\n\n<pre><code>httpClient.send(requestBuilder, HttpResponse.BodyHandlers.ofString()); // sends the request\n</code></pre>\n\n<hr>\n\n<p>Update from comments, to disable the hostname verification, currently one can use the system property: </p>\n\n<pre><code>-Djdk.internal.httpclient.disableHostnameVerification\n</code></pre>\n\n<p>which can be <a href=\"https://stackoverflow.com/questions/52988677/allow-insecure-https-connection-for-java-jdk-11-httpclient/52995420?noredirect=1#comment93560348_52995420\">set programmatically</a> as following :-</p>\n\n<pre><code>final Properties props = System.getProperties(); \nprops.setProperty(\"jdk.internal.httpclient.disableHostnameVerification\", Boolean.TRUE.toString());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6699714,"reputation":311,"user_id":5166651,"display_name":"louisburgh"},"comment_count":0,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1540998607,"creation_date":1540998607,"answer_id":53086587,"question_id":52988677,"body_markdown":"As suggested already you need an SSLContext which ignores the bad certificates. The exact code which obtains the SSLContext in one of the links in the question should work by basically creating a null TrustManager which doesn&#39;t look at the certs:\r\n\r\n    private static TrustManager[] trustAllCerts = new TrustManager[]{\r\n        new X509TrustManager() {\r\n            public java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n                return null;\r\n            }\r\n            public void checkClientTrusted(\r\n                java.security.cert.X509Certificate[] certs, String authType) {\r\n            }\r\n            public void checkServerTrusted(\r\n                java.security.cert.X509Certificate[] certs, String authType) {\r\n            }\r\n        }\r\n    };\r\n\r\n    public static  void main (String[] args) throws Exception {\r\n        SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n        sslContext.init(null, trustAllCerts, new SecureRandom());\r\n\r\n        HttpClient client = HttpClient.newBuilder()\r\n            .sslContext(sslContext)\r\n            .build();\r\n\r\nThe problem with the above is obviously that server authentication is disabled completely for all sites. If there were only one bad certificate then you could import it into a keystore with:\r\n\r\n    keytool -importcert -keystore keystorename -storepass pass -alias cert -file certfile\r\n\r\nand then initialize the SSLContext using an InputStream reading the keystore as follows:\r\n\r\n    char[] passphrase = ..\r\n    KeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n    ks.load(i, passphrase); // i is an InputStream reading the keystore\r\n\r\n    KeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;PKIX&quot;);\r\n    kmf.init(ks, passphrase);\r\n\r\n    TrustManagerFactory tmf = TrustManagerFactory.getInstance(&quot;PKIX&quot;);\r\n    tmf.init(ks);\r\n\r\n    sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n    sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);\r\n\r\nEither of the above solutions will work for a self-signed certificate. A third option is in the case where the server provides a valid, non self-signed certificate but for a host which does not match any of the names in the certificate it provides, then a system property  &quot;jdk.internal.httpclient.disableHostnameVerification&quot; can be set to &quot;true&quot; and this will force the certificate to be accepted in the same way that the HostnameVerifier API was used previously. Note, that in normal deployments it isn&#39;t expected that any of these mechanisms would be used, as it should be possible to automatically verify the certificate supplied by any correctly configured HTTPS server.\r\n","title":"Allow insecure HTTPS connection for Java JDK 11 HttpClient","body":"<p>As suggested already you need an SSLContext which ignores the bad certificates. The exact code which obtains the SSLContext in one of the links in the question should work by basically creating a null TrustManager which doesn't look at the certs:</p>\n\n<pre><code>private static TrustManager[] trustAllCerts = new TrustManager[]{\n    new X509TrustManager() {\n        public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n            return null;\n        }\n        public void checkClientTrusted(\n            java.security.cert.X509Certificate[] certs, String authType) {\n        }\n        public void checkServerTrusted(\n            java.security.cert.X509Certificate[] certs, String authType) {\n        }\n    }\n};\n\npublic static  void main (String[] args) throws Exception {\n    SSLContext sslContext = SSLContext.getInstance(\"TLS\");\n    sslContext.init(null, trustAllCerts, new SecureRandom());\n\n    HttpClient client = HttpClient.newBuilder()\n        .sslContext(sslContext)\n        .build();\n</code></pre>\n\n<p>The problem with the above is obviously that server authentication is disabled completely for all sites. If there were only one bad certificate then you could import it into a keystore with:</p>\n\n<pre><code>keytool -importcert -keystore keystorename -storepass pass -alias cert -file certfile\n</code></pre>\n\n<p>and then initialize the SSLContext using an InputStream reading the keystore as follows:</p>\n\n<pre><code>char[] passphrase = ..\nKeyStore ks = KeyStore.getInstance(\"PKCS12\");\nks.load(i, passphrase); // i is an InputStream reading the keystore\n\nKeyManagerFactory kmf = KeyManagerFactory.getInstance(\"PKIX\");\nkmf.init(ks, passphrase);\n\nTrustManagerFactory tmf = TrustManagerFactory.getInstance(\"PKIX\");\ntmf.init(ks);\n\nsslContext = SSLContext.getInstance(\"TLS\");\nsslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);\n</code></pre>\n\n<p>Either of the above solutions will work for a self-signed certificate. A third option is in the case where the server provides a valid, non self-signed certificate but for a host which does not match any of the names in the certificate it provides, then a system property  \"jdk.internal.httpclient.disableHostnameVerification\" can be set to \"true\" and this will force the certificate to be accepted in the same way that the HostnameVerifier API was used previously. Note, that in normal deployments it isn't expected that any of these mechanisms would be used, as it should be possible to automatically verify the certificate supplied by any correctly configured HTTPS server.</p>\n"},{"comments":[{"owner":{"account_id":2512553,"reputation":57,"user_id":2184653,"accept_rate":67,"display_name":"Krysta"},"score":1,"creation_date":1643400773,"post_id":70741993,"comment_id":125339116,"body_markdown":"This worked for me thanks!","body":"This worked for me thanks!"},{"owner":{"account_id":5211156,"reputation":376,"user_id":4167541,"display_name":"Ian Lovejoy"},"score":1,"creation_date":1653245524,"post_id":70741993,"comment_id":127798798,"body_markdown":"This should be the accepted answer IMO, much better than disabling hostname verification globally.","body":"This should be the accepted answer IMO, much better than disabling hostname verification globally."},{"owner":{"account_id":1027733,"reputation":8566,"user_id":1036670,"accept_rate":86,"display_name":"vitiral"},"score":0,"creation_date":1687447581,"post_id":70741993,"comment_id":134941258,"body_markdown":"This was the one and should definitely be the accepted answer.","body":"This was the one and should definitely be the accepted answer."}],"tags":[],"owner":{"account_id":23965940,"reputation":151,"user_id":17955445,"display_name":"Colin Chambers"},"comment_count":3,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1687447470,"creation_date":1642425311,"answer_id":70741993,"question_id":52988677,"body_markdown":"Providing an X509TrustManager that does not do certificate verification (as in the answers above) is insufficient to disable hostname verification because the implementation of SSLContext &quot;wraps&quot; the provided X509TrustManager with an X509ExtendedTrustManager if it is not an X509ExtendedTrustManager.  The wrapping &quot;Extended&quot; X509ExtendedTrustManager performs hostname verification.\r\n\r\nA way to avoid hostname verification therefore is to provide an X509ExtendedTrustManager that does not do hostname verification.  This may be done as follows:\r\n\r\n\r\n    import java.net.Socket;\r\n    import java.security.cert.X509Certificate;\r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.SSLEngine;\r\n    import javax.net.ssl.TrustManager;\r\n    import javax.net.ssl.X509ExtendedTrustManager;\r\n\r\n    SSLContext context = SSLContext.getInstance(&quot;TLS&quot;);\r\n    context.init(\r\n        null,\r\n        new TrustManager[]\r\n        {\r\n            new X509ExtendedTrustManager()\r\n            {\r\n                public X509Certificate[] getAcceptedIssuers()\r\n                {\r\n                    return null;\r\n                }\r\n\r\n                public void checkClientTrusted(\r\n                    final X509Certificate[] a_certificates,\r\n                    final String a_auth_type)\r\n                {\r\n                }\r\n\r\n                public void checkServerTrusted(\r\n                    final X509Certificate[] a_certificates,\r\n                    final String a_auth_type)\r\n                {\r\n                }\r\n                public void checkClientTrusted(\r\n                    final X509Certificate[] a_certificates,\r\n                    final String a_auth_type,\r\n                    final Socket a_socket)\r\n                {\r\n                }\r\n                public void checkServerTrusted(\r\n                    final X509Certificate[] a_certificates,\r\n                    final String a_auth_type,\r\n                    final Socket a_socket)\r\n                {\r\n                }\r\n                public void checkClientTrusted(\r\n                    final X509Certificate[] a_certificates,\r\n                    final String a_auth_type,\r\n                    final SSLEngine a_engine)\r\n                {\r\n                }\r\n                public void checkServerTrusted(\r\n                    final X509Certificate[] a_certificates,\r\n                    final String a_auth_type,\r\n                    final SSLEngine a_engine)\r\n                {\r\n                }\r\n            }\r\n        },\r\n        null);\r\n    \r\n\r\nSupply this SSLContext to the HTTPClient.Builder in the usual way (as shown in earlier answers).\r\n\r\nThis method has the benefit of applying on a per HttpClient basis (i.e. not JVM-wide).\r\n\r\n","title":"Allow insecure HTTPS connection for Java JDK 11 HttpClient","body":"<p>Providing an X509TrustManager that does not do certificate verification (as in the answers above) is insufficient to disable hostname verification because the implementation of SSLContext &quot;wraps&quot; the provided X509TrustManager with an X509ExtendedTrustManager if it is not an X509ExtendedTrustManager.  The wrapping &quot;Extended&quot; X509ExtendedTrustManager performs hostname verification.</p>\n<p>A way to avoid hostname verification therefore is to provide an X509ExtendedTrustManager that does not do hostname verification.  This may be done as follows:</p>\n<pre><code>import java.net.Socket;\nimport java.security.cert.X509Certificate;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.SSLEngine;\nimport javax.net.ssl.TrustManager;\nimport javax.net.ssl.X509ExtendedTrustManager;\n\nSSLContext context = SSLContext.getInstance(&quot;TLS&quot;);\ncontext.init(\n    null,\n    new TrustManager[]\n    {\n        new X509ExtendedTrustManager()\n        {\n            public X509Certificate[] getAcceptedIssuers()\n            {\n                return null;\n            }\n\n            public void checkClientTrusted(\n                final X509Certificate[] a_certificates,\n                final String a_auth_type)\n            {\n            }\n\n            public void checkServerTrusted(\n                final X509Certificate[] a_certificates,\n                final String a_auth_type)\n            {\n            }\n            public void checkClientTrusted(\n                final X509Certificate[] a_certificates,\n                final String a_auth_type,\n                final Socket a_socket)\n            {\n            }\n            public void checkServerTrusted(\n                final X509Certificate[] a_certificates,\n                final String a_auth_type,\n                final Socket a_socket)\n            {\n            }\n            public void checkClientTrusted(\n                final X509Certificate[] a_certificates,\n                final String a_auth_type,\n                final SSLEngine a_engine)\n            {\n            }\n            public void checkServerTrusted(\n                final X509Certificate[] a_certificates,\n                final String a_auth_type,\n                final SSLEngine a_engine)\n            {\n            }\n        }\n    },\n    null);\n</code></pre>\n<p>Supply this SSLContext to the HTTPClient.Builder in the usual way (as shown in earlier answers).</p>\n<p>This method has the benefit of applying on a per HttpClient basis (i.e. not JVM-wide).</p>\n"},{"tags":[],"owner":{"account_id":23997392,"reputation":1,"user_id":17982750,"display_name":"cc company"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694532224,"creation_date":1694485325,"answer_id":77085734,"question_id":52988677,"body_markdown":"Before request: \r\n\r\n```java\r\nSystem.setProperty(&quot;jdk.internal.httpclient.disableHostnameVerification&quot;, &quot;true&quot;);\r\n```","title":"Allow insecure HTTPS connection for Java JDK 11 HttpClient","body":"<p>Before request:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.setProperty(&quot;jdk.internal.httpclient.disableHostnameVerification&quot;, &quot;true&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1810587,"reputation":1264,"user_id":1646741,"accept_rate":75,"display_name":"Sami Korhonen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700755604,"creation_date":1700753277,"answer_id":77538035,"question_id":52988677,"body_markdown":"Be aware, all the previous answers do more than just disable hostname verification. They disable certificate verification completely.\r\n\r\nWhile these solutions work perfectly for development environments, they are not something you want to ever use in production.\r\n\r\nHere&#39;s a solution that allows you to modify certificate in a way that you think is most suitable (e.g. replace SAN with another)\r\n\r\nFirst a class that is used to wrap default TrustManager to intercept calls:\r\n\r\n    public class TrustManagers {\r\n        /**\r\n         * Create {@link TrustManager} wrapper that disables certificate hostname validation\r\n         *\r\n         * @param tm trust manager\r\n         * @param altNames alternative subject names to allow\r\n         * @return requested trustmanager\r\n         */\r\n        public static TrustManager disableHostnameValidation(\r\n                TrustManager tm, Collection&lt;X509SubjectAltName&gt; altNames) {\r\n            if (tm instanceof X509ExtendedTrustManager x509tm) {\r\n                return new X509ExtendedTrustManager() {\r\n                    @Override\r\n                    public void checkServerTrusted(X509Certificate[] chain, String authType)\r\n                            throws CertificateException {\r\n                        x509tm.checkServerTrusted(modifySAN(chain), authType);\r\n                    }\r\n    \r\n                    @Override\r\n                    public void checkServerTrusted(\r\n                            X509Certificate[] chain, String authType, Socket socket)\r\n                            throws CertificateException {\r\n                        x509tm.checkServerTrusted(modifySAN(chain), authType, socket);\r\n                    }\r\n    \r\n                    @Override\r\n                    public void checkServerTrusted(\r\n                            X509Certificate[] chain, String authType, SSLEngine engine)\r\n                            throws CertificateException {\r\n                        x509tm.checkServerTrusted(modifySAN(chain), authType, engine);\r\n                    }\r\n    \r\n                    private X509Certificate[] modifySAN(X509Certificate[] chain) {\r\n                        if (chain.length &lt; 1) {\r\n                            return chain;\r\n                        }\r\n                        var result = new X509Certificate[chain.length];\r\n                        System.arraycopy(chain, 0, result, 0, chain.length);\r\n                        result[0] = new FixedSANX509Certificate(chain[0], altNames);\r\n                        return result;\r\n                    }\r\n    \r\n                    // only delegates below\r\n                    @Override\r\n                    public X509Certificate[] getAcceptedIssuers() {\r\n                        return x509tm.getAcceptedIssuers();\r\n                    }\r\n    \r\n                    @Override\r\n                    public void checkClientTrusted(X509Certificate[] chain, String authType)\r\n                            throws CertificateException {\r\n                        x509tm.checkClientTrusted(chain, authType);\r\n                    }\r\n    \r\n                    @Override\r\n                    public void checkClientTrusted(\r\n                            X509Certificate[] chain, String authType, Socket socket)\r\n                            throws CertificateException {\r\n                        x509tm.checkClientTrusted(chain, authType, socket);\r\n                    }\r\n    \r\n                    @Override\r\n                    public void checkClientTrusted(\r\n                            X509Certificate[] chain, String authType, SSLEngine engine)\r\n                            throws CertificateException {\r\n                        x509tm.checkClientTrusted(chain, authType);\r\n                    }\r\n                };\r\n            }\r\n            return tm;\r\n        }\r\n    }\r\n\r\nThen a class that allows you to modify certificate&#39;s contents. You are likely to be interested in SANs:\r\n\r\n    /**\r\n     * X509Certificate with subject alternative names (SAN) added to list of SANs in certificate. This\r\n     * effectively bypasses hostname validation, but allows other validations\r\n     */\r\n    @AllArgsConstructor\r\n    public class FixedSANX509Certificate extends X509Certificate {\r\n        private final X509Certificate cert;\r\n        private final Collection&lt;X509SubjectAltName&gt; altNames;\r\n    \r\n        @Override\r\n        public Collection&lt;List&lt;?&gt;&gt; getSubjectAlternativeNames() throws CertificateParsingException {\r\n            return Stream.concat(\r\n                            cert.getSubjectAlternativeNames().stream(),\r\n                            altNames.stream()\r\n                                    .flatMap(\r\n                                            altName -&gt;\r\n                                                    Stream.of(\r\n                                                            List.of(\r\n                                                                    altName.type().getCode(),\r\n                                                                    altName.value()))))\r\n                    .toList();\r\n        }\r\n    \r\n        // only delegates below\r\n        @Override\r\n        public boolean hasUnsupportedCriticalExtension() {\r\n            return cert.hasUnsupportedCriticalExtension();\r\n        }\r\n    \r\n        @Override\r\n        public Set&lt;String&gt; getCriticalExtensionOIDs() {\r\n            return cert.getCriticalExtensionOIDs();\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object other) {\r\n            return cert.equals(other);\r\n        }\r\n    \r\n        @Override\r\n        public Set&lt;String&gt; getNonCriticalExtensionOIDs() {\r\n            return cert.getNonCriticalExtensionOIDs();\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            return cert.hashCode();\r\n        }\r\n    \r\n        @Override\r\n        public void checkValidity()\r\n                throws CertificateExpiredException, CertificateNotYetValidException {\r\n            cert.checkValidity();\r\n        }\r\n    \r\n        @Override\r\n        public byte[] getEncoded() throws CertificateEncodingException {\r\n            return cert.getEncoded();\r\n        }\r\n    \r\n        @Override\r\n        public void verify(PublicKey key)\r\n                throws CertificateException,\r\n                        NoSuchAlgorithmException,\r\n                        InvalidKeyException,\r\n                        NoSuchProviderException,\r\n                        SignatureException {\r\n            cert.verify(key);\r\n        }\r\n    \r\n        @Override\r\n        public void checkValidity(Date date)\r\n                throws CertificateExpiredException, CertificateNotYetValidException {\r\n            cert.checkValidity(date);\r\n        }\r\n    \r\n        @Override\r\n        public byte[] getExtensionValue(String oid) {\r\n            return cert.getExtensionValue(oid);\r\n        }\r\n    \r\n        @Override\r\n        public void verify(PublicKey key, String sigProvider)\r\n                throws CertificateException,\r\n                        NoSuchAlgorithmException,\r\n                        InvalidKeyException,\r\n                        NoSuchProviderException,\r\n                        SignatureException {\r\n            cert.verify(key, sigProvider);\r\n        }\r\n    \r\n        @Override\r\n        public int getVersion() {\r\n            return cert.getVersion();\r\n        }\r\n    \r\n        @Override\r\n        public BigInteger getSerialNumber() {\r\n            return cert.getSerialNumber();\r\n        }\r\n    \r\n        @Override\r\n        public Principal getIssuerDN() {\r\n            return cert.getIssuerDN();\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return cert.toString();\r\n        }\r\n    \r\n        @Override\r\n        public PublicKey getPublicKey() {\r\n            return cert.getPublicKey();\r\n        }\r\n    \r\n        @Override\r\n        public X500Principal getIssuerX500Principal() {\r\n            return cert.getIssuerX500Principal();\r\n        }\r\n    \r\n        @Override\r\n        public Principal getSubjectDN() {\r\n            return cert.getSubjectDN();\r\n        }\r\n    \r\n        @Override\r\n        public X500Principal getSubjectX500Principal() {\r\n            return cert.getSubjectX500Principal();\r\n        }\r\n    \r\n        @Override\r\n        public Date getNotBefore() {\r\n            return cert.getNotBefore();\r\n        }\r\n    \r\n        @Override\r\n        public Date getNotAfter() {\r\n            return cert.getNotAfter();\r\n        }\r\n    \r\n        @Override\r\n        public byte[] getTBSCertificate() throws CertificateEncodingException {\r\n            return cert.getTBSCertificate();\r\n        }\r\n    \r\n        @Override\r\n        public byte[] getSignature() {\r\n            return cert.getSignature();\r\n        }\r\n    \r\n        @Override\r\n        public String getSigAlgName() {\r\n            return cert.getSigAlgName();\r\n        }\r\n    \r\n        @Override\r\n        public String getSigAlgOID() {\r\n            return cert.getSigAlgOID();\r\n        }\r\n    \r\n        @Override\r\n        public byte[] getSigAlgParams() {\r\n            return cert.getSigAlgParams();\r\n        }\r\n    \r\n        @Override\r\n        public boolean[] getIssuerUniqueID() {\r\n            return cert.getIssuerUniqueID();\r\n        }\r\n    \r\n        @Override\r\n        public boolean[] getSubjectUniqueID() {\r\n            return cert.getSubjectUniqueID();\r\n        }\r\n    \r\n        @Override\r\n        public boolean[] getKeyUsage() {\r\n            return cert.getKeyUsage();\r\n        }\r\n    \r\n        @Override\r\n        public List&lt;String&gt; getExtendedKeyUsage() throws CertificateParsingException {\r\n            return cert.getExtendedKeyUsage();\r\n        }\r\n    \r\n        @Override\r\n        public int getBasicConstraints() {\r\n            return cert.getBasicConstraints();\r\n        }\r\n    \r\n        @Override\r\n        public Collection&lt;List&lt;?&gt;&gt; getIssuerAlternativeNames() throws CertificateParsingException {\r\n            return cert.getIssuerAlternativeNames();\r\n        }\r\n    \r\n        @Override\r\n        public void verify(PublicKey key, Provider sigProvider)\r\n                throws CertificateException,\r\n                        NoSuchAlgorithmException,\r\n                        InvalidKeyException,\r\n                        SignatureException {\r\n            cert.verify(key, sigProvider);\r\n        }\r\n    }\r\n\r\nRecord and enum classes to make configuration less painful:\r\n\r\n    public record X509SubjectAltName(X509SubjectAltType type, String value) {}\r\n\r\n    /** SAN value types. Aligns with {@link X509Certificate#getSubjectAlternativeNames} */\r\n    public enum X509SubjectAltType {\r\n        HOSTNAME(2),\r\n        IP(7);\r\n    \r\n        final int code;\r\n    \r\n        private X509SubjectAltType(int code) {\r\n            this.code = code;\r\n        }\r\n    \r\n        public int getCode() {\r\n            return code;\r\n        }\r\n    }\r\n\r\nThis would be used to create SSLContext like:\r\n\r\n    private SSLContext createSSLContext(Collection&lt;X509SubjectAltName&gt; altNames)\r\n            throws GeneralSecurityException {\r\n        var trustManagerFactory =\r\n                TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\r\n        trustManagerFactory.init((KeyStore) null);\r\n\r\n        var trustManagers =\r\n                Stream.of(trustManagerFactory.getTrustManagers())\r\n                        .map(tm -&gt; TrustManagers.disableHostnameValidation(tm, altNames))\r\n                        .toArray(TrustManager[]::new);\r\n\r\n        var sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n        sslContext.init(null, trustManagers, null);\r\n\r\n        return sslContext;\r\n    }\r\n\r\nAnd this is how you would allow connections to ip 1.2.3.4:\r\n\r\n    createSSLContext(List.of(new X509SubjectAltName(X509SubjectAltType.IP, &quot;1.2.3.4&quot;)))","title":"Allow insecure HTTPS connection for Java JDK 11 HttpClient","body":"<p>Be aware, all the previous answers do more than just disable hostname verification. They disable certificate verification completely.</p>\n<p>While these solutions work perfectly for development environments, they are not something you want to ever use in production.</p>\n<p>Here's a solution that allows you to modify certificate in a way that you think is most suitable (e.g. replace SAN with another)</p>\n<p>First a class that is used to wrap default TrustManager to intercept calls:</p>\n<pre><code>public class TrustManagers {\n    /**\n     * Create {@link TrustManager} wrapper that disables certificate hostname validation\n     *\n     * @param tm trust manager\n     * @param altNames alternative subject names to allow\n     * @return requested trustmanager\n     */\n    public static TrustManager disableHostnameValidation(\n            TrustManager tm, Collection&lt;X509SubjectAltName&gt; altNames) {\n        if (tm instanceof X509ExtendedTrustManager x509tm) {\n            return new X509ExtendedTrustManager() {\n                @Override\n                public void checkServerTrusted(X509Certificate[] chain, String authType)\n                        throws CertificateException {\n                    x509tm.checkServerTrusted(modifySAN(chain), authType);\n                }\n\n                @Override\n                public void checkServerTrusted(\n                        X509Certificate[] chain, String authType, Socket socket)\n                        throws CertificateException {\n                    x509tm.checkServerTrusted(modifySAN(chain), authType, socket);\n                }\n\n                @Override\n                public void checkServerTrusted(\n                        X509Certificate[] chain, String authType, SSLEngine engine)\n                        throws CertificateException {\n                    x509tm.checkServerTrusted(modifySAN(chain), authType, engine);\n                }\n\n                private X509Certificate[] modifySAN(X509Certificate[] chain) {\n                    if (chain.length &lt; 1) {\n                        return chain;\n                    }\n                    var result = new X509Certificate[chain.length];\n                    System.arraycopy(chain, 0, result, 0, chain.length);\n                    result[0] = new FixedSANX509Certificate(chain[0], altNames);\n                    return result;\n                }\n\n                // only delegates below\n                @Override\n                public X509Certificate[] getAcceptedIssuers() {\n                    return x509tm.getAcceptedIssuers();\n                }\n\n                @Override\n                public void checkClientTrusted(X509Certificate[] chain, String authType)\n                        throws CertificateException {\n                    x509tm.checkClientTrusted(chain, authType);\n                }\n\n                @Override\n                public void checkClientTrusted(\n                        X509Certificate[] chain, String authType, Socket socket)\n                        throws CertificateException {\n                    x509tm.checkClientTrusted(chain, authType, socket);\n                }\n\n                @Override\n                public void checkClientTrusted(\n                        X509Certificate[] chain, String authType, SSLEngine engine)\n                        throws CertificateException {\n                    x509tm.checkClientTrusted(chain, authType);\n                }\n            };\n        }\n        return tm;\n    }\n}\n</code></pre>\n<p>Then a class that allows you to modify certificate's contents. You are likely to be interested in SANs:</p>\n<pre><code>/**\n * X509Certificate with subject alternative names (SAN) added to list of SANs in certificate. This\n * effectively bypasses hostname validation, but allows other validations\n */\n@AllArgsConstructor\npublic class FixedSANX509Certificate extends X509Certificate {\n    private final X509Certificate cert;\n    private final Collection&lt;X509SubjectAltName&gt; altNames;\n\n    @Override\n    public Collection&lt;List&lt;?&gt;&gt; getSubjectAlternativeNames() throws CertificateParsingException {\n        return Stream.concat(\n                        cert.getSubjectAlternativeNames().stream(),\n                        altNames.stream()\n                                .flatMap(\n                                        altName -&gt;\n                                                Stream.of(\n                                                        List.of(\n                                                                altName.type().getCode(),\n                                                                altName.value()))))\n                .toList();\n    }\n\n    // only delegates below\n    @Override\n    public boolean hasUnsupportedCriticalExtension() {\n        return cert.hasUnsupportedCriticalExtension();\n    }\n\n    @Override\n    public Set&lt;String&gt; getCriticalExtensionOIDs() {\n        return cert.getCriticalExtensionOIDs();\n    }\n\n    @Override\n    public boolean equals(Object other) {\n        return cert.equals(other);\n    }\n\n    @Override\n    public Set&lt;String&gt; getNonCriticalExtensionOIDs() {\n        return cert.getNonCriticalExtensionOIDs();\n    }\n\n    @Override\n    public int hashCode() {\n        return cert.hashCode();\n    }\n\n    @Override\n    public void checkValidity()\n            throws CertificateExpiredException, CertificateNotYetValidException {\n        cert.checkValidity();\n    }\n\n    @Override\n    public byte[] getEncoded() throws CertificateEncodingException {\n        return cert.getEncoded();\n    }\n\n    @Override\n    public void verify(PublicKey key)\n            throws CertificateException,\n                    NoSuchAlgorithmException,\n                    InvalidKeyException,\n                    NoSuchProviderException,\n                    SignatureException {\n        cert.verify(key);\n    }\n\n    @Override\n    public void checkValidity(Date date)\n            throws CertificateExpiredException, CertificateNotYetValidException {\n        cert.checkValidity(date);\n    }\n\n    @Override\n    public byte[] getExtensionValue(String oid) {\n        return cert.getExtensionValue(oid);\n    }\n\n    @Override\n    public void verify(PublicKey key, String sigProvider)\n            throws CertificateException,\n                    NoSuchAlgorithmException,\n                    InvalidKeyException,\n                    NoSuchProviderException,\n                    SignatureException {\n        cert.verify(key, sigProvider);\n    }\n\n    @Override\n    public int getVersion() {\n        return cert.getVersion();\n    }\n\n    @Override\n    public BigInteger getSerialNumber() {\n        return cert.getSerialNumber();\n    }\n\n    @Override\n    public Principal getIssuerDN() {\n        return cert.getIssuerDN();\n    }\n\n    @Override\n    public String toString() {\n        return cert.toString();\n    }\n\n    @Override\n    public PublicKey getPublicKey() {\n        return cert.getPublicKey();\n    }\n\n    @Override\n    public X500Principal getIssuerX500Principal() {\n        return cert.getIssuerX500Principal();\n    }\n\n    @Override\n    public Principal getSubjectDN() {\n        return cert.getSubjectDN();\n    }\n\n    @Override\n    public X500Principal getSubjectX500Principal() {\n        return cert.getSubjectX500Principal();\n    }\n\n    @Override\n    public Date getNotBefore() {\n        return cert.getNotBefore();\n    }\n\n    @Override\n    public Date getNotAfter() {\n        return cert.getNotAfter();\n    }\n\n    @Override\n    public byte[] getTBSCertificate() throws CertificateEncodingException {\n        return cert.getTBSCertificate();\n    }\n\n    @Override\n    public byte[] getSignature() {\n        return cert.getSignature();\n    }\n\n    @Override\n    public String getSigAlgName() {\n        return cert.getSigAlgName();\n    }\n\n    @Override\n    public String getSigAlgOID() {\n        return cert.getSigAlgOID();\n    }\n\n    @Override\n    public byte[] getSigAlgParams() {\n        return cert.getSigAlgParams();\n    }\n\n    @Override\n    public boolean[] getIssuerUniqueID() {\n        return cert.getIssuerUniqueID();\n    }\n\n    @Override\n    public boolean[] getSubjectUniqueID() {\n        return cert.getSubjectUniqueID();\n    }\n\n    @Override\n    public boolean[] getKeyUsage() {\n        return cert.getKeyUsage();\n    }\n\n    @Override\n    public List&lt;String&gt; getExtendedKeyUsage() throws CertificateParsingException {\n        return cert.getExtendedKeyUsage();\n    }\n\n    @Override\n    public int getBasicConstraints() {\n        return cert.getBasicConstraints();\n    }\n\n    @Override\n    public Collection&lt;List&lt;?&gt;&gt; getIssuerAlternativeNames() throws CertificateParsingException {\n        return cert.getIssuerAlternativeNames();\n    }\n\n    @Override\n    public void verify(PublicKey key, Provider sigProvider)\n            throws CertificateException,\n                    NoSuchAlgorithmException,\n                    InvalidKeyException,\n                    SignatureException {\n        cert.verify(key, sigProvider);\n    }\n}\n</code></pre>\n<p>Record and enum classes to make configuration less painful:</p>\n<pre><code>public record X509SubjectAltName(X509SubjectAltType type, String value) {}\n\n/** SAN value types. Aligns with {@link X509Certificate#getSubjectAlternativeNames} */\npublic enum X509SubjectAltType {\n    HOSTNAME(2),\n    IP(7);\n\n    final int code;\n\n    private X509SubjectAltType(int code) {\n        this.code = code;\n    }\n\n    public int getCode() {\n        return code;\n    }\n}\n</code></pre>\n<p>This would be used to create SSLContext like:</p>\n<pre><code>private SSLContext createSSLContext(Collection&lt;X509SubjectAltName&gt; altNames)\n        throws GeneralSecurityException {\n    var trustManagerFactory =\n            TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n    trustManagerFactory.init((KeyStore) null);\n\n    var trustManagers =\n            Stream.of(trustManagerFactory.getTrustManagers())\n                    .map(tm -&gt; TrustManagers.disableHostnameValidation(tm, altNames))\n                    .toArray(TrustManager[]::new);\n\n    var sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n    sslContext.init(null, trustManagers, null);\n\n    return sslContext;\n}\n</code></pre>\n<p>And this is how you would allow connections to ip 1.2.3.4:</p>\n<pre><code>createSSLContext(List.of(new X509SubjectAltName(X509SubjectAltType.IP, &quot;1.2.3.4&quot;)))\n</code></pre>\n"}],"owner":{"account_id":4468857,"reputation":897,"user_id":3635669,"display_name":"vagran"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40321,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":52995420,"answer_count":5,"score":38,"last_activity_date":1700755604,"creation_date":1540468454,"question_id":52988677,"body_markdown":"Sometimes it is needed to allow insecure HTTPS connections, e.g. in some web-crawling applications which should work with any site. I used [one such solution][1] with old HttpsURLConnection API which was recently superseded by the [new HttpClient API][2] in JDK 11. What is the way to allow insecure HTTPS connections (self-signed or expired certificate) with this new API?\r\n\r\nUPD: The code I tried (in Kotlin but maps directly to Java):\r\n\r\n        val trustAllCerts = arrayOf&lt;TrustManager&gt;(object: X509TrustManager {\r\n            override fun getAcceptedIssuers(): Array&lt;X509Certificate&gt;? = null\r\n            override fun checkClientTrusted(certs: Array&lt;X509Certificate&gt;, authType: String) {}\r\n            override fun checkServerTrusted(certs: Array&lt;X509Certificate&gt;, authType: String) {}\r\n        })\r\n\r\n        val sslContext = SSLContext.getInstance(&quot;SSL&quot;)\r\n        sslContext.init(null, trustAllCerts, SecureRandom())\r\n\r\n        val sslParams = SSLParameters()\r\n        // This should prevent host validation\r\n        sslParams.endpointIdentificationAlgorithm = &quot;&quot;\r\n\r\n        httpClient = HttpClient.newBuilder()\r\n            .sslContext(sslContext)\r\n            .sslParameters(sslParams)\r\n            .build()\r\n\r\nBut on sending I have exception (trying on localhost with self-signed certificate):\r\n\r\n    java.io.IOException: No name matching localhost found\r\n\r\nUsing IP address instead of localhost gives &quot;No subject alternative names present&quot; exception.\r\n\r\nAfter some debugging of JDK I found that `sslParams` are really ignored in the place the exception is thrown and some locally created instance is used. Further debugging revealed that the only way to affect the hostname verification algorithm is setting `jdk.internal.httpclient.disableHostnameVerification` system property to true. And that&#39;s seems to be a solution. `SSLParameters` in the code above have no effect so this part can be discarded. Making it configurable only globally looks like serious design flaw in new HttpClient API.\r\n\r\n  [1]: https://stackoverflow.com/questions/1201048/allowing-java-to-use-an-untrusted-certificate-for-ssl-https-connection\r\n  [2]: https://openjdk.java.net/groups/net/httpclient/intro.html","title":"Allow insecure HTTPS connection for Java JDK 11 HttpClient","body":"<p>Sometimes it is needed to allow insecure HTTPS connections, e.g. in some web-crawling applications which should work with any site. I used <a href=\"https://stackoverflow.com/questions/1201048/allowing-java-to-use-an-untrusted-certificate-for-ssl-https-connection\">one such solution</a> with old HttpsURLConnection API which was recently superseded by the <a href=\"https://openjdk.java.net/groups/net/httpclient/intro.html\" rel=\"noreferrer\">new HttpClient API</a> in JDK 11. What is the way to allow insecure HTTPS connections (self-signed or expired certificate) with this new API?</p>\n\n<p>UPD: The code I tried (in Kotlin but maps directly to Java):</p>\n\n<pre><code>    val trustAllCerts = arrayOf&lt;TrustManager&gt;(object: X509TrustManager {\n        override fun getAcceptedIssuers(): Array&lt;X509Certificate&gt;? = null\n        override fun checkClientTrusted(certs: Array&lt;X509Certificate&gt;, authType: String) {}\n        override fun checkServerTrusted(certs: Array&lt;X509Certificate&gt;, authType: String) {}\n    })\n\n    val sslContext = SSLContext.getInstance(\"SSL\")\n    sslContext.init(null, trustAllCerts, SecureRandom())\n\n    val sslParams = SSLParameters()\n    // This should prevent host validation\n    sslParams.endpointIdentificationAlgorithm = \"\"\n\n    httpClient = HttpClient.newBuilder()\n        .sslContext(sslContext)\n        .sslParameters(sslParams)\n        .build()\n</code></pre>\n\n<p>But on sending I have exception (trying on localhost with self-signed certificate):</p>\n\n<pre><code>java.io.IOException: No name matching localhost found\n</code></pre>\n\n<p>Using IP address instead of localhost gives \"No subject alternative names present\" exception.</p>\n\n<p>After some debugging of JDK I found that <code>sslParams</code> are really ignored in the place the exception is thrown and some locally created instance is used. Further debugging revealed that the only way to affect the hostname verification algorithm is setting <code>jdk.internal.httpclient.disableHostnameVerification</code> system property to true. And that's seems to be a solution. <code>SSLParameters</code> in the code above have no effect so this part can be discarded. Making it configurable only globally looks like serious design flaw in new HttpClient API.</p>\n"},{"tags":["java","redis","jedis"],"comments":[{"owner":{"account_id":18239208,"reputation":164,"user_id":13276541,"display_name":"Ahmed Mera"},"score":0,"creation_date":1700748005,"post_id":77537450,"comment_id":136694371,"body_markdown":"Can you share the code of conection?","body":"Can you share the code of conection?"},{"owner":{"account_id":29975560,"reputation":1,"user_id":22971869,"display_name":"Mart"},"score":0,"creation_date":1700748362,"post_id":77537450,"comment_id":136694440,"body_markdown":"Jedis jedis = new Jedis(IP, port, timeout);","body":"Jedis jedis = new Jedis(IP, port, timeout);"},{"owner":{"account_id":29975560,"reputation":1,"user_id":22971869,"display_name":"Mart"},"score":0,"creation_date":1700748413,"post_id":77537450,"comment_id":136694449,"body_markdown":"jedis.auth(user,password);","body":"jedis.auth(user,password);"}],"answers":[{"comments":[{"owner":{"account_id":29975560,"reputation":1,"user_id":22971869,"display_name":"Mart"},"score":0,"creation_date":1700808712,"post_id":77538216,"comment_id":136700786,"body_markdown":"it didn&#39;t help...","body":"it didn&#39;t help..."},{"owner":{"account_id":18239208,"reputation":164,"user_id":13276541,"display_name":"Ahmed Mera"},"score":0,"creation_date":1700822112,"post_id":77538216,"comment_id":136702927,"body_markdown":"The thread is still waiting? or which error you have got?","body":"The thread is still waiting? or which error you have got?"}],"tags":[],"owner":{"account_id":18239208,"reputation":164,"user_id":13276541,"display_name":"Ahmed Mera"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700755102,"creation_date":1700755102,"answer_id":77538216,"question_id":77537450,"body_markdown":"You can set the timeout for connection and for Socket:\r\n\r\n```\r\ntry {\r\n    Jedis jedis = new Jedis(host, port); \r\n    jedis.connectTimeout(3000);// 3 seconds for connection \r\n    jedis.getClient().setSoTimeout(5000); // 5 seconds for Socket\r\n} catch (JedisConnectionException e) {\r\n    // Handle connection error\r\n} \r\n\r\n``` \r\n\r\nTry it and let me know","title":"Stop Redis serwer Threads stil waiting","body":"<p>You can set the timeout for connection and for Socket:</p>\n<pre><code>try {\n    Jedis jedis = new Jedis(host, port); \n    jedis.connectTimeout(3000);// 3 seconds for connection \n    jedis.getClient().setSoTimeout(5000); // 5 seconds for Socket\n} catch (JedisConnectionException e) {\n    // Handle connection error\n} \n\n</code></pre>\n<p>Try it and let me know</p>\n"}],"owner":{"account_id":29975560,"reputation":1,"user_id":22971869,"display_name":"Mart"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700755102,"creation_date":1700747550,"question_id":77537450,"body_markdown":"I wrote Java code that connects to Redis and performs operations. When I shut down the Redis server, the thread throws an error but doesn&#39;t terminate. It&#39;s in TIMED_WAITING status, and the thread waits indefinitely. What should I do to ensure the thread doesn&#39;t wait indefinitely for the server response? I want it to simply finish its work.\r\n\r\nI tried adding a timeout in the Jedis constructor, but it didn&#39;t work. The threads were still running.","title":"Stop Redis serwer Threads stil waiting","body":"<p>I wrote Java code that connects to Redis and performs operations. When I shut down the Redis server, the thread throws an error but doesn't terminate. It's in TIMED_WAITING status, and the thread waits indefinitely. What should I do to ensure the thread doesn't wait indefinitely for the server response? I want it to simply finish its work.</p>\n<p>I tried adding a timeout in the Jedis constructor, but it didn't work. The threads were still running.</p>\n"},{"tags":["javascript","java","spring","datatable","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":7673258,"reputation":1688,"user_id":6200354,"display_name":"atish.s"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700755042,"creation_date":1700515671,"answer_id":77518995,"question_id":77516265,"body_markdown":"The datatable is populated by javascript (jQuery) and Thymeleaf has nothing to do with it.\r\n\r\nSaying the above, you can load the `authorities` in the html page as a json array and check for the permission when constructing the rows in the datatable.\r\n\r\n    // somewhere in the html\r\n    &lt;script th:inline=&quot;javascript&quot;&gt;\r\n        // authorities as a json array\r\n        const authorities = /*[[${authorities}]]*/ &#39;&#39;;\r\n        const deleteUrl = /*[[@{drink/delete}]]*/ &#39;&#39;; // we will use this later, maybe this is resolving to the path &quot;drink/delete-drink&quot;\r\n    &lt;/script&gt;\r\n\r\n\r\nUsually the rows in the datatable result set are represented by an array of objects. If we are displaying a array of &#39;Drink&#39; objects, most probably the dataset in the response would be something like:\r\n\r\n    &quot;data&quot;: [\r\n       {\r\n          &quot;drinkId&quot; : 1,\r\n          &quot;name&quot; : &quot;Coca cola&quot;\r\n       },\r\n       {\r\n          &quot;drinkId&quot; : 2,\r\n          &quot;name&quot; : &quot;Pepsi&quot;\r\n       },\r\n       {\r\n          &quot;drinkId&quot; : 3,\r\n          &quot;name&quot; : &quot;Expresso&quot;\r\n       }\r\n    ]\r\n\r\n\r\nNow the conditional rendering is done purely with javascript, no thymeleaf here.\r\n\r\n    &quot;columns&quot;: [\r\n        // ... other columns\r\n        {\r\n            &quot;data&quot;: null,\r\n            &quot;render&quot;: function (data, type, row) {\r\n                var hasDeleteRole = authorities.includes(&#39;DELETE&#39;);\r\n    \r\n                if (hasDeleteRole) {\r\n                    // just an example of how to use the delete url and the drinkId which is unique per row\r\n                    return &#39;&lt;a href=&quot;deleteUrl + \\&#39;?id=&#39; + row.drinkId + &#39;\\&#39;&quot;/&gt;&#39;\r\n                    // after resolving the above, it should something look like this in the html &lt;a href=&quot;http://localhost/drink/delete-drink?id=3&quot;/&gt;\r\n                } else {\r\n                    return &#39;No action&#39;;\r\n                }\r\n            }\r\n        }\r\n        // ... other columns\r\n    ],\r\n","title":"How can HTML rendering be conditionally managed when integrating DataTables initialization with a Spring Boot backend API for server-side processing?","body":"<p>The datatable is populated by javascript (jQuery) and Thymeleaf has nothing to do with it.</p>\n<p>Saying the above, you can load the <code>authorities</code> in the html page as a json array and check for the permission when constructing the rows in the datatable.</p>\n<pre><code>// somewhere in the html\n&lt;script th:inline=&quot;javascript&quot;&gt;\n    // authorities as a json array\n    const authorities = /*[[${authorities}]]*/ '';\n    const deleteUrl = /*[[@{drink/delete}]]*/ ''; // we will use this later, maybe this is resolving to the path &quot;drink/delete-drink&quot;\n&lt;/script&gt;\n</code></pre>\n<p>Usually the rows in the datatable result set are represented by an array of objects. If we are displaying a array of 'Drink' objects, most probably the dataset in the response would be something like:</p>\n<pre><code>&quot;data&quot;: [\n   {\n      &quot;drinkId&quot; : 1,\n      &quot;name&quot; : &quot;Coca cola&quot;\n   },\n   {\n      &quot;drinkId&quot; : 2,\n      &quot;name&quot; : &quot;Pepsi&quot;\n   },\n   {\n      &quot;drinkId&quot; : 3,\n      &quot;name&quot; : &quot;Expresso&quot;\n   }\n]\n</code></pre>\n<p>Now the conditional rendering is done purely with javascript, no thymeleaf here.</p>\n<pre><code>&quot;columns&quot;: [\n    // ... other columns\n    {\n        &quot;data&quot;: null,\n        &quot;render&quot;: function (data, type, row) {\n            var hasDeleteRole = authorities.includes('DELETE');\n\n            if (hasDeleteRole) {\n                // just an example of how to use the delete url and the drinkId which is unique per row\n                return '&lt;a href=&quot;deleteUrl + \\'?id=' + row.drinkId + '\\'&quot;/&gt;'\n                // after resolving the above, it should something look like this in the html &lt;a href=&quot;http://localhost/drink/delete-drink?id=3&quot;/&gt;\n            } else {\n                return 'No action';\n            }\n        }\n    }\n    // ... other columns\n],\n</code></pre>\n"}],"owner":{"account_id":27490497,"reputation":93,"user_id":20975951,"display_name":"Jaiylon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1700755042,"creation_date":1700486908,"question_id":77516265,"body_markdown":"**Conditionally Rendering DataTables Actions Based on User Roles in a Spring Boot Application**\r\nI have a DataTables implementation in my Spring Boot application, and I&#39;m trying to conditionally render actions in the DataTable based on the user&#39;s roles. The DataTable includes an action column that should display edit, delete, and view buttons only if the user has the EDITOR role.\r\n\r\nHere&#39;s the Thymeleaf code for conditionally rendering the delete button:\r\n```\r\n&lt;form th:if=&quot;${#lists.contains(roles, &#39;EDITOR&#39;)}&quot; style=&quot;display:inline !important;&quot; th:action=&quot;@{/touchPoint/delete/}&quot; method=&quot;post&quot; onsubmit=&quot;return confirm(&#39;Do you really want to delete this Assignment? This action cannot be reversed.&#39;);&quot;&gt;\r\n    &lt;input type=&quot;hidden&quot; name=&quot;id&quot; th:value=&quot;*{TouchPointID}&quot;/&gt;\r\n    &lt;button class=&quot;form-command btn btn-danger btn-sm&quot; type=&quot;submit&quot;&gt;&lt;i class=&quot;fa fa-trash-o&quot;&gt;&lt;/i&gt;&lt;/button&gt;\r\n&lt;/form&gt;\r\n```\r\nIn my DataTables configuration, I&#39;m sending the user roles in the API response:\r\n```\r\n// Controller API method\r\nAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n        Collection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities();\r\n\r\n        List&lt;String&gt; authorityStrings = authorities.stream()\r\n                .map(GrantedAuthority::getAuthority)\r\n                .collect(Collectors.toList());\r\nresponse.put(&quot;authorities&quot;, authorityStrings); // places the authorities in the &#39;authorities&#39; obj\r\n```\r\n\r\nAnd here&#39;s the relevant part of my DataTables configuration, the actions columns:\r\n```\r\n&quot;columns&quot;: [\r\n    // ... other columns\r\n    {\r\n        &quot;data&quot;: null,\r\n        &quot;render&quot;: function (data, type, row) {\r\n            var authorities = json.authorities || [];\r\n            var hasEditorRole = authorities.includes(&#39;EDITOR&#39;);\r\n\r\n            if (hasEditorRole) {\r\n                return &#39;&lt;button class=&quot;edit-button&quot;&gt;Edit&lt;/button&gt;&#39;;\r\n            } else {\r\n                return &#39;No action&#39;;\r\n            }\r\n        }\r\n    }\r\n    // ... other columns\r\n],\r\n```\r\n\r\n","title":"How can HTML rendering be conditionally managed when integrating DataTables initialization with a Spring Boot backend API for server-side processing?","body":"<p><strong>Conditionally Rendering DataTables Actions Based on User Roles in a Spring Boot Application</strong>\nI have a DataTables implementation in my Spring Boot application, and I'm trying to conditionally render actions in the DataTable based on the user's roles. The DataTable includes an action column that should display edit, delete, and view buttons only if the user has the EDITOR role.</p>\n<p>Here's the Thymeleaf code for conditionally rendering the delete button:</p>\n<pre><code>&lt;form th:if=&quot;${#lists.contains(roles, 'EDITOR')}&quot; style=&quot;display:inline !important;&quot; th:action=&quot;@{/touchPoint/delete/}&quot; method=&quot;post&quot; onsubmit=&quot;return confirm('Do you really want to delete this Assignment? This action cannot be reversed.');&quot;&gt;\n    &lt;input type=&quot;hidden&quot; name=&quot;id&quot; th:value=&quot;*{TouchPointID}&quot;/&gt;\n    &lt;button class=&quot;form-command btn btn-danger btn-sm&quot; type=&quot;submit&quot;&gt;&lt;i class=&quot;fa fa-trash-o&quot;&gt;&lt;/i&gt;&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n<p>In my DataTables configuration, I'm sending the user roles in the API response:</p>\n<pre><code>// Controller API method\nAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();\n        Collection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities();\n\n        List&lt;String&gt; authorityStrings = authorities.stream()\n                .map(GrantedAuthority::getAuthority)\n                .collect(Collectors.toList());\nresponse.put(&quot;authorities&quot;, authorityStrings); // places the authorities in the 'authorities' obj\n</code></pre>\n<p>And here's the relevant part of my DataTables configuration, the actions columns:</p>\n<pre><code>&quot;columns&quot;: [\n    // ... other columns\n    {\n        &quot;data&quot;: null,\n        &quot;render&quot;: function (data, type, row) {\n            var authorities = json.authorities || [];\n            var hasEditorRole = authorities.includes('EDITOR');\n\n            if (hasEditorRole) {\n                return '&lt;button class=&quot;edit-button&quot;&gt;Edit&lt;/button&gt;';\n            } else {\n                return 'No action';\n            }\n        }\n    }\n    // ... other columns\n],\n</code></pre>\n"},{"tags":["java","spring-boot","encryption","aes","pkcs#7"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1700750120,"post_id":77537522,"comment_id":136694744,"body_markdown":"Are you aware of the Cipher input and output streams?","body":"Are you aware of the Cipher input and output streams?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1700753234,"post_id":77537522,"comment_id":136695343,"body_markdown":"Two things: a. use `org.bouncycastle.crypto.io.CipherInputStream;` (and equiv. output) b. post the input file as text *formatted as code*","body":"Two things: a. use <code>org.bouncycastle.crypto.io.CipherInputStream;</code> (and equiv. output) b. post the input file as text <i>formatted as code</i>"},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1700755063,"post_id":77537522,"comment_id":136695684,"body_markdown":"As alluded to by @user207421, you are welcome to use the BouncyCastle API but, as far as I can see, there is no advantage to using it in your code sample. By using Java builti-in cryptography, CipherInputStream and CipherOutputStream, and the File.copy() methods you can reduce all this jumble of code to just a few lines.","body":"As alluded to by @user207421, you are welcome to use the BouncyCastle API but, as far as I can see, there is no advantage to using it in your code sample. By using Java builti-in cryptography, CipherInputStream and CipherOutputStream, and the File.copy() methods you can reduce all this jumble of code to just a few lines."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1700766333,"post_id":77537522,"comment_id":136697383,"body_markdown":"@PresidentJamesK.Polk Cipher stream classes come with the JRE. I didn’t say anything about BouncyCastle and I don’t see any reason to use it here.","body":"@PresidentJamesK.Polk Cipher stream classes come with the JRE. I didn’t say anything about BouncyCastle and I don’t see any reason to use it here."}],"answers":[{"comments":[{"owner":{"account_id":16232132,"reputation":341,"user_id":11720605,"display_name":"TJ32"},"score":0,"creation_date":1700821976,"post_id":77538034,"comment_id":136702905,"body_markdown":"so what are you suggesting me to do here?","body":"so what are you suggesting me to do here?"},{"owner":{"account_id":2527500,"reputation":7300,"user_id":2196561,"display_name":"Ebbe M. Pedersen"},"score":0,"creation_date":1700841173,"post_id":77538034,"comment_id":136706044,"body_markdown":"Well, you should use the information (number of bytes) returned to you by processBytes(..)  and doFinal(..), so you know how much of your buffer have been filled. Now you just assume your buffer is filled up - but it ain&#39;t.","body":"Well, you should use the information (number of bytes) returned to you by processBytes(..)  and doFinal(..), so you know how much of your buffer have been filled. Now you just assume your buffer is filled up - but it ain&#39;t."},{"owner":{"account_id":16232132,"reputation":341,"user_id":11720605,"display_name":"TJ32"},"score":0,"creation_date":1700855286,"post_id":77538034,"comment_id":136707836,"body_markdown":"I tried to use that information but it ain&#39;t working for me ...that&#39;s why I wanted help ...may be my problem here is how to use that information properly","body":"I tried to use that information but it ain&#39;t working for me ...that&#39;s why I wanted help ...may be my problem here is how to use that information properly"},{"owner":{"account_id":27650244,"reputation":207,"user_id":21105343,"display_name":"NotARobot"},"score":0,"creation_date":1701076747,"post_id":77538034,"comment_id":136725653,"body_markdown":"@TJ32 - `getOutputSize()` generally returns a buffer that is too large (due to padding). The *actual* size of the plaintext that you store in `bytesWritten` is only determined during decryption. You just need to shorten the buffer, e.g. with `return Arrays.copyOf(output, bytesWritten);`","body":"@TJ32 - <code>getOutputSize()</code> generally returns a buffer that is too large (due to padding). The <i>actual</i> size of the plaintext that you store in <code>bytesWritten</code> is only determined during decryption. You just need to shorten the buffer, e.g. with <code>return Arrays.copyOf(output, bytesWritten);</code>"}],"tags":[],"owner":{"account_id":2527500,"reputation":7300,"user_id":2196561,"display_name":"Ebbe M. Pedersen"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700754584,"creation_date":1700753270,"answer_id":77538034,"question_id":77537522,"body_markdown":"`getOutputSize(..)` don&#39;t return what you expect:\r\n\r\n&gt;  `int\tgetOutputSize(int len)`\r\n&gt;           return the size of the output buffer required for an update plus a doFinal with an input of len bytes.\r\n\r\nThe method is used for calculate how big a message will be when encrypted .. not for decryption. \r\n\r\nYou can only see the size of the decrypted message after the padding have been removed, which happens during decryption. You actually calculate the size of the decrypted message in `bytesWritten` and then ignores the result.\r\n\r\n","title":"Null spaces getting added to decrypted D01 file while using AES-256/CBC/PKCS7PADDING","body":"<p><code>getOutputSize(..)</code> don't return what you expect:</p>\n<blockquote>\n<p><code>int getOutputSize(int len)</code>\nreturn the size of the output buffer required for an update plus a doFinal with an input of len bytes.</p>\n</blockquote>\n<p>The method is used for calculate how big a message will be when encrypted .. not for decryption.</p>\n<p>You can only see the size of the decrypted message after the padding have been removed, which happens during decryption. You actually calculate the size of the decrypted message in <code>bytesWritten</code> and then ignores the result.</p>\n"}],"owner":{"account_id":16232132,"reputation":341,"user_id":11720605,"display_name":"TJ32"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1700754584,"creation_date":1700748280,"question_id":77537522,"body_markdown":"I am using AES-256/CBC/PKCS7PADDING for encrypting a d01 file. After encrypting the file I am performing decrypting the same file for my testing but While decrypting the file extra null values are getting added to the do1 file. I am using bouncycastle library here.\r\n\r\n\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.nio.charset.StandardCharsets;\r\n    import java.nio.file.Files;\r\n    import java.security.SecureRandom;\r\n    import org.bouncycastle.crypto.BlockCipher;\r\n    import org.bouncycastle.crypto.BufferedBlockCipher;\r\n    import org.bouncycastle.crypto.CipherParameters;\r\n    import org.bouncycastle.crypto.DataLengthException;\r\n    import org.bouncycastle.crypto.InvalidCipherTextException;\r\n    import org.bouncycastle.crypto.engines.AESEngine;\r\n    import org.bouncycastle.crypto.engines.AESFastEngine;\r\n    import org.bouncycastle.crypto.modes.CBCBlockCipher;\r\n    import org.bouncycastle.crypto.paddings.BlockCipherPadding;\r\n    import org.bouncycastle.crypto.paddings.PKCS7Padding;\r\n    import org.bouncycastle.crypto.paddings.PaddedBufferedBlockCipher;\r\n    import org.bouncycastle.crypto.params.KeyParameter;\r\n    import org.bouncycastle.crypto.params.ParametersWithIV;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Component\r\n    public class CryptoUtilsV2 {\r\n    \r\n       public static byte[] iv = generateIV();\r\n      public int encryptDCRenewal(String keyText, File inputFile, File outputFile)\r\n          throws Exception {\r\n    \t//inputFile is d01 file and outfile is the d01 file to which encrypted data is written\r\n       // initialize key and iv\r\n        byte[] secretKey = keyText.getBytes(StandardCharsets.UTF_8);\r\n        FileInputStream inputStream = new FileInputStream(inputFile);\r\n        byte[] inputBytes = new byte[(int) inputFile.length()];\r\n        inputStream.read(inputBytes);\r\n        inputStream.close();\r\n        // Encrypt the message\r\n        byte[] ciphertext = encrypt(inputBytes, secretKey, iv);\r\n        FileOutputStream outputStream = new FileOutputStream(outputFile);\r\n        outputStream.write(ciphertext);\r\n        outputStream.close();\r\n        return 0;\r\n      }\r\n    \r\n      public int decryptDCRenewal(String keyText, File inputFile, File outputFile)\r\n          throws Exception {\r\n        // initialize key and iv\r\n    \t//inputFile is encrypted d01 file and outfile is the do1 file to which decrypted data is written\r\n        byte[] secretKey = keyText.getBytes(StandardCharsets.UTF_8);\r\n        FileInputStream inputStream = new FileInputStream(inputFile);\r\n        byte[] inputBytes = new byte[(int) inputFile.length()];\r\n        inputStream.read(inputBytes);\r\n        inputStream.close();\r\n        // Encrypt the message\r\n        byte[] decryptedText = decrypt(inputBytes, secretKey, iv);\r\n        FileOutputStream outputStream = new FileOutputStream(outputFile);\r\n        outputStream.write(decryptedText);\r\n        outputStream.close();\r\n        return 0;\r\n      }\r\n    \r\n      private static byte[] decrypt(byte[] ciphertext, byte[] key, byte[] iv) throws Exception {\r\n        BufferedBlockCipher cipher = createCipher(false, key, iv);\r\n        byte[] output = new byte[cipher.getOutputSize(ciphertext.length)];\r\n        int bytesWritten = cipher.processBytes(ciphertext, 0, ciphertext.length, output, 0);\r\n        bytesWritten += cipher.doFinal(output, bytesWritten);\r\n        return output;\r\n      }\r\n      private static byte[] encrypt(byte[] input, byte[] key, byte[] iv) throws Exception {\r\n        BufferedBlockCipher cipher = createCipher(true, key, iv);\r\n        byte[] output = new byte[cipher.getOutputSize(input.length)];\r\n        int bytesWritten = cipher.processBytes(input, 0, input.length, output, 0);\r\n        bytesWritten += cipher.doFinal(output, bytesWritten);\r\n        return output;\r\n      }\r\n    \r\n      private static BufferedBlockCipher createCipher(boolean forEncryption, byte[] key, byte[] iv) {\r\n        BlockCipherPadding padding = new PKCS7Padding();\r\n        BufferedBlockCipher cipher = new PaddedBufferedBlockCipher(\r\n            new CBCBlockCipher(new AESEngine()), padding);\r\n        CipherParameters params = new ParametersWithIV(new KeyParameter(key), iv);\r\n        cipher.init(forEncryption, params);\r\n        return cipher;\r\n      }\r\n      private static byte[] generateIV() {\r\n        byte[] iv = new byte[16]; // AES 256 use 16 byte IV\r\n        new SecureRandom().nextBytes(iv);\r\n        return iv;\r\n      }\r\n    }\r\n\r\n \r\n\r\nthe key value is : Qxyyywqg1UdBRpUV\r\n\r\noriginal d01 file content \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nthe decrypted d01 file content:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/W7Oi3.png\r\n  [2]: https://i.stack.imgur.com/9p6ER.png","title":"Null spaces getting added to decrypted D01 file while using AES-256/CBC/PKCS7PADDING","body":"<p>I am using AES-256/CBC/PKCS7PADDING for encrypting a d01 file. After encrypting the file I am performing decrypting the same file for my testing but While decrypting the file extra null values are getting added to the do1 file. I am using bouncycastle library here.</p>\n<pre><code>import java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.nio.charset.StandardCharsets;\nimport java.nio.file.Files;\nimport java.security.SecureRandom;\nimport org.bouncycastle.crypto.BlockCipher;\nimport org.bouncycastle.crypto.BufferedBlockCipher;\nimport org.bouncycastle.crypto.CipherParameters;\nimport org.bouncycastle.crypto.DataLengthException;\nimport org.bouncycastle.crypto.InvalidCipherTextException;\nimport org.bouncycastle.crypto.engines.AESEngine;\nimport org.bouncycastle.crypto.engines.AESFastEngine;\nimport org.bouncycastle.crypto.modes.CBCBlockCipher;\nimport org.bouncycastle.crypto.paddings.BlockCipherPadding;\nimport org.bouncycastle.crypto.paddings.PKCS7Padding;\nimport org.bouncycastle.crypto.paddings.PaddedBufferedBlockCipher;\nimport org.bouncycastle.crypto.params.KeyParameter;\nimport org.bouncycastle.crypto.params.ParametersWithIV;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class CryptoUtilsV2 {\n\n   public static byte[] iv = generateIV();\n  public int encryptDCRenewal(String keyText, File inputFile, File outputFile)\n      throws Exception {\n    //inputFile is d01 file and outfile is the d01 file to which encrypted data is written\n   // initialize key and iv\n    byte[] secretKey = keyText.getBytes(StandardCharsets.UTF_8);\n    FileInputStream inputStream = new FileInputStream(inputFile);\n    byte[] inputBytes = new byte[(int) inputFile.length()];\n    inputStream.read(inputBytes);\n    inputStream.close();\n    // Encrypt the message\n    byte[] ciphertext = encrypt(inputBytes, secretKey, iv);\n    FileOutputStream outputStream = new FileOutputStream(outputFile);\n    outputStream.write(ciphertext);\n    outputStream.close();\n    return 0;\n  }\n\n  public int decryptDCRenewal(String keyText, File inputFile, File outputFile)\n      throws Exception {\n    // initialize key and iv\n    //inputFile is encrypted d01 file and outfile is the do1 file to which decrypted data is written\n    byte[] secretKey = keyText.getBytes(StandardCharsets.UTF_8);\n    FileInputStream inputStream = new FileInputStream(inputFile);\n    byte[] inputBytes = new byte[(int) inputFile.length()];\n    inputStream.read(inputBytes);\n    inputStream.close();\n    // Encrypt the message\n    byte[] decryptedText = decrypt(inputBytes, secretKey, iv);\n    FileOutputStream outputStream = new FileOutputStream(outputFile);\n    outputStream.write(decryptedText);\n    outputStream.close();\n    return 0;\n  }\n\n  private static byte[] decrypt(byte[] ciphertext, byte[] key, byte[] iv) throws Exception {\n    BufferedBlockCipher cipher = createCipher(false, key, iv);\n    byte[] output = new byte[cipher.getOutputSize(ciphertext.length)];\n    int bytesWritten = cipher.processBytes(ciphertext, 0, ciphertext.length, output, 0);\n    bytesWritten += cipher.doFinal(output, bytesWritten);\n    return output;\n  }\n  private static byte[] encrypt(byte[] input, byte[] key, byte[] iv) throws Exception {\n    BufferedBlockCipher cipher = createCipher(true, key, iv);\n    byte[] output = new byte[cipher.getOutputSize(input.length)];\n    int bytesWritten = cipher.processBytes(input, 0, input.length, output, 0);\n    bytesWritten += cipher.doFinal(output, bytesWritten);\n    return output;\n  }\n\n  private static BufferedBlockCipher createCipher(boolean forEncryption, byte[] key, byte[] iv) {\n    BlockCipherPadding padding = new PKCS7Padding();\n    BufferedBlockCipher cipher = new PaddedBufferedBlockCipher(\n        new CBCBlockCipher(new AESEngine()), padding);\n    CipherParameters params = new ParametersWithIV(new KeyParameter(key), iv);\n    cipher.init(forEncryption, params);\n    return cipher;\n  }\n  private static byte[] generateIV() {\n    byte[] iv = new byte[16]; // AES 256 use 16 byte IV\n    new SecureRandom().nextBytes(iv);\n    return iv;\n  }\n}\n</code></pre>\n<p>the key value is : Qxyyywqg1UdBRpUV</p>\n<p>original d01 file content</p>\n<p><a href=\"https://i.stack.imgur.com/W7Oi3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W7Oi3.png\" alt=\"enter image description here\" /></a></p>\n<p>the decrypted d01 file content:</p>\n<p><a href=\"https://i.stack.imgur.com/9p6ER.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9p6ER.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","null","apache-camel","quarkus"],"answers":[{"comments":[{"owner":{"account_id":16016597,"reputation":743,"user_id":11559150,"display_name":"Cesar Justo"},"score":0,"creation_date":1700753082,"post_id":77537972,"comment_id":136695321,"body_markdown":"Thank you very much for your answer, it works for me, could you explain to me why it is necessary to apply the map(Object::toString) operation","body":"Thank you very much for your answer, it works for me, could you explain to me why it is necessary to apply the map(Object::toString) operation"},{"owner":{"account_id":8333120,"reputation":832,"user_id":12868186,"display_name":"wpnpeiris"},"score":1,"creation_date":1700753773,"post_id":77537972,"comment_id":136695444,"body_markdown":"According to the java doc here, https://javadoc.io/doc/org.apache.camel/camel-core/2.20.2/org/apache/camel/Message.html, org.apache.camel.Message.getHeader(String) returns a type of java.lang.Object, which can be nullable. So we wrap it in Optional.ofNullable(), which returns a type of Optional&lt;Object&gt;. We use the Optional.map() to map it into another type, in this case Optional&lt;String&gt;","body":"According to the java doc here, <a href=\"https://javadoc.io/doc/org.apache.camel/camel-core/2.20.2/org/apache/camel/Message.html\" rel=\"nofollow noreferrer\">javadoc.io/doc/org.apache.camel/camel-core/2.20.2/org/apache&zwnj;&#8203;/&hellip;</a>, org.apache.camel.Message.getHeader(String) returns a type of java.lang.Object, which can be nullable. So we wrap it in Optional.ofNullable(), which returns a type of Optional&lt;Object&gt;. We use the Optional.map() to map it into another type, in this case Optional&lt;String&gt;"},{"owner":{"account_id":8333120,"reputation":832,"user_id":12868186,"display_name":"wpnpeiris"},"score":1,"creation_date":1700754312,"post_id":77537972,"comment_id":136695533,"body_markdown":"I just improved the answer, hope it will help.","body":"I just improved the answer, hope it will help."}],"tags":[],"owner":{"account_id":8333120,"reputation":832,"user_id":12868186,"display_name":"wpnpeiris"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1700754282,"creation_date":1700752680,"answer_id":77537972,"question_id":77537945,"body_markdown":"According to the error log, it is , `Message.getHeader(String)` returns null.\r\n\r\nYour statement could be corrected as the following.\r\n\r\n    Optional&lt;String&gt; optionalServices= Optional.ofNullable(exchange.getIn().getHeader(&quot;services&quot;))\r\n                    .map(Object::toString)\r\n\r\nIf I explain the above in multiple steps.\r\n\r\n    Optional&lt;Object&gt; optObj = Optional.ofNullable(exchange.getIn().getHeader(&quot;services&quot;)); \r\n    Optional&lt;String&gt; optStr = optObj.map(obj -&gt; obj.toString());\r\n\r\n\r\nSo, the function (`obj -&gt; obj.toString()`) within `Optional.map()` is called only when Optional has a value.\r\n\r\n","title":"Optional null with Apache Camel to get header parameters","body":"<p>According to the error log, it is , <code>Message.getHeader(String)</code> returns null.</p>\n<p>Your statement could be corrected as the following.</p>\n<pre><code>Optional&lt;String&gt; optionalServices= Optional.ofNullable(exchange.getIn().getHeader(&quot;services&quot;))\n                .map(Object::toString)\n</code></pre>\n<p>If I explain the above in multiple steps.</p>\n<pre><code>Optional&lt;Object&gt; optObj = Optional.ofNullable(exchange.getIn().getHeader(&quot;services&quot;)); \nOptional&lt;String&gt; optStr = optObj.map(obj -&gt; obj.toString());\n</code></pre>\n<p>So, the function (<code>obj -&gt; obj.toString()</code>) within <code>Optional.map()</code> is called only when Optional has a value.</p>\n"}],"owner":{"account_id":16016597,"reputation":743,"user_id":11559150,"display_name":"Cesar Justo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77537972,"answer_count":1,"score":0,"last_activity_date":1700754282,"creation_date":1700752388,"question_id":77537945,"body_markdown":"\r\nGood morning.\r\n\r\nCurrently I am developing an API in Apache Camel in which I have to use queryParameters for the query and some parameters may be mandatory and others not, so I need to handle in case I don&#39;t send the parameter have some way to handle the nullPointerException, I was using Optional However, I don&#39;t know if I&#39;m using it incorrectly, but I&#39;m not getting the error:\r\n\r\nCurrently I am using the following line that in theory if it receives a null value, it would return an empty optional, however, I get an error:\r\n\r\n    Optional&lt;String&gt; optionalServices= Optional.ofNullable(exchange.getIn().getHeader(&quot;services&quot;).toString());\r\n\r\nException\r\n\r\n    Stacktrace\r\n    ---------------------------------------------------------------------------------------------------------------------------------------: java.lang.NullPointerException: Cannot invoke &quot;Object.toString()&quot; because the return value of &quot;org.apache.camel.Message.getHeader(String)&quot; is null\r\n    \tat org.tmve.customer.ms.processor.UserProfileProcessorQueryParamReq.process(UserProfileProcessorQueryParamReq.java:35)\r\n    \tat org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)\r\n    \tat org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392)\r\n    \tat org.apache.camel.processor.Pipeline$PipelineTask.run(Pipeline.java:104)\r\n    \tat org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181)\r\n    \tat org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)\r\n    \tat org.apache.camel.processor.Pipeline.process(Pipeline.java:165)\r\n    \tat org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392)\r\n    \tat org.apache.camel.component.platform.http.vertx.VertxPlatformHttpConsumer.lambda$handleRequest$2(VertxPlatformHttpConsumer.java:201)\r\n    \tat io.vertx.core.impl.ContextBase.lambda$null$0(ContextBase.java:137)\r\n    \tat io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:264)\r\n    \tat io.vertx.core.impl.ContextBase.lambda$executeBlocking$1(ContextBase.java:135)\r\n    \tat org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n    \tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n    \tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n    \tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n    \tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n    \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:840)\r\n\r\nThis is how I am testing from postman when it does not send the value:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIn this case, how can I handle the value of the Query Parameters if it is not sent?\r\n\r\n  [1]: https://i.stack.imgur.com/uPx5I.png","title":"Optional null with Apache Camel to get header parameters","body":"<p>Good morning.</p>\n<p>Currently I am developing an API in Apache Camel in which I have to use queryParameters for the query and some parameters may be mandatory and others not, so I need to handle in case I don't send the parameter have some way to handle the nullPointerException, I was using Optional However, I don't know if I'm using it incorrectly, but I'm not getting the error:</p>\n<p>Currently I am using the following line that in theory if it receives a null value, it would return an empty optional, however, I get an error:</p>\n<pre><code>Optional&lt;String&gt; optionalServices= Optional.ofNullable(exchange.getIn().getHeader(&quot;services&quot;).toString());\n</code></pre>\n<p>Exception</p>\n<pre><code>Stacktrace\n---------------------------------------------------------------------------------------------------------------------------------------: java.lang.NullPointerException: Cannot invoke &quot;Object.toString()&quot; because the return value of &quot;org.apache.camel.Message.getHeader(String)&quot; is null\n    at org.tmve.customer.ms.processor.UserProfileProcessorQueryParamReq.process(UserProfileProcessorQueryParamReq.java:35)\n    at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)\n    at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392)\n    at org.apache.camel.processor.Pipeline$PipelineTask.run(Pipeline.java:104)\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181)\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:165)\n    at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392)\n    at org.apache.camel.component.platform.http.vertx.VertxPlatformHttpConsumer.lambda$handleRequest$2(VertxPlatformHttpConsumer.java:201)\n    at io.vertx.core.impl.ContextBase.lambda$null$0(ContextBase.java:137)\n    at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:264)\n    at io.vertx.core.impl.ContextBase.lambda$executeBlocking$1(ContextBase.java:135)\n    at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\n    at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\n    at org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\n    at org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:840)\n</code></pre>\n<p>This is how I am testing from postman when it does not send the value:</p>\n<p><a href=\"https://i.stack.imgur.com/uPx5I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uPx5I.png\" alt=\"enter image description here\" /></a></p>\n<p>In this case, how can I handle the value of the Query Parameters if it is not sent?</p>\n"},{"tags":["java","maven","gson"],"comments":[{"owner":{"account_id":18814702,"reputation":82,"user_id":13722122,"display_name":"Seabass"},"score":0,"creation_date":1669791914,"post_id":74623316,"comment_id":131720754,"body_markdown":"The scope of the dependencies are differently configured.","body":"The scope of the dependencies are differently configured."},{"owner":{"account_id":18814702,"reputation":82,"user_id":13722122,"display_name":"Seabass"},"score":0,"creation_date":1669792361,"post_id":74623316,"comment_id":131720880,"body_markdown":"Probably, Tinify has it&#39;s GSON dependency scope set to transitive and Adobe has set GSON to provided. For good measure, you should consider providing the GSON dependency yourself.","body":"Probably, Tinify has it&#39;s GSON dependency scope set to transitive and Adobe has set GSON to provided. For good measure, you should consider providing the GSON dependency yourself."},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1670007660,"post_id":74623316,"comment_id":131780649,"body_markdown":"Apparently `aem-sdk-api` is a JAR with dependencies. Not sure if that is the cause for this specific problem, but you will for sure have more _fun_ due to this in the future. Might be good to clarify why Adobe distributes this as JAR with dependencies on Maven because that defeats the purpose of using Maven as tool for dependency management.","body":"Apparently <code>aem-sdk-api</code> is a JAR with dependencies. Not sure if that is the cause for this specific problem, but you will for sure have more <i>fun</i> due to this in the future. Might be good to clarify why Adobe distributes this as JAR with dependencies on Maven because that defeats the purpose of using Maven as tool for dependency management."}],"answers":[{"tags":[],"owner":{"account_id":1738252,"reputation":608,"user_id":1590324,"display_name":"Manu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700754030,"creation_date":1700754030,"answer_id":77538108,"question_id":74623316,"body_markdown":"I had the same issue and I fixed it by adding into the core/pom.xml file the following dependency, the scope will make available the classes that the unit test needs\r\n\r\n        &lt;dependency&gt; \r\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.1&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\nSources\r\n[Unable to create a gson object in a test class in AEM 6.4][1]\r\nand [Maven repo for the gson library][2]\r\nHope this helps\r\n\r\n\r\n  [1]: https://experienceleaguecommunities.adobe.com/t5/adobe-experience-manager/unable-to-create-a-gson-object-in-a-test-class-in-aem-6-4/m-p/272100\r\n  [2]: https://mvnrepository.com/artifact/com.google.code.gson/gson","title":"NoClassDefFoundError for junits during mvn test","body":"<p>I had the same issue and I fixed it by adding into the core/pom.xml file the following dependency, the scope will make available the classes that the unit test needs</p>\n<pre><code>    &lt;dependency&gt; \n        &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n        &lt;artifactId&gt;gson&lt;/artifactId&gt;\n        &lt;version&gt;2.10.1&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Sources\n<a href=\"https://experienceleaguecommunities.adobe.com/t5/adobe-experience-manager/unable-to-create-a-gson-object-in-a-test-class-in-aem-6-4/m-p/272100\" rel=\"nofollow noreferrer\">Unable to create a gson object in a test class in AEM 6.4</a>\nand <a href=\"https://mvnrepository.com/artifact/com.google.code.gson/gson\" rel=\"nofollow noreferrer\">Maven repo for the gson library</a>\nHope this helps</p>\n"}],"owner":{"account_id":5219511,"reputation":2533,"user_id":4173416,"accept_rate":0,"display_name":"SubSul"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700754030,"creation_date":1669786860,"question_id":74623316,"body_markdown":"I have the below two dependencies in my current setup.\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.adobe.aem&lt;/groupId&gt;\r\n    &lt;artifactId&gt;aem-sdk-api&lt;/artifactId&gt;\r\n    &lt;version&gt;${aem.sdk.api}&lt;/version&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.tinify&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tinify&lt;/artifactId&gt;\r\n    &lt;version&gt;1.6.4&lt;/version&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nAnd I have this test class which uses the gson dependency from `com.adobe.aem` package, at least that is what the IDE says\r\n\r\n[![Test class][1]][1]\r\n\r\nWhen I run tests from the IDE or do a `mvn clean install`, all the tests execute fine.\r\n\r\n----------------------------------------\r\n\r\nI have no use for the `com.tinify` package now and I remove this dependency from the pom.xml.\r\nRunning the tests from IDE (right click and execute test) works fine but when I do a `mvn clean install` or `mvn test`, I get a `NoClassDefFoundError` for the `gson` library.\r\n\r\n```\r\njava.lang.NoClassDefFoundError: com/google/gson/internal/LinkedTreeMap\r\n\tat com.......\r\n```\r\n\r\nRunning `mvn dependency:tree` with the `com.tinify` package gives me this\r\n\r\n```\r\n[INFO] +- com.tinify:tinify:jar:1.6.4:provided\r\n[INFO] |  +- com.squareup.okhttp3:okhttp:jar:3.10.0:provided\r\n[INFO] |  |  \\- com.squareup.okio:okio:jar:1.14.0:provided\r\n[INFO] |  \\- com.google.code.gson:gson:jar:2.8.5:provided\r\n```\r\n\r\nFrom this I understand, mvn uses the gson library from the `com.tinify` package and removing it is causing this exception. But the `com.adobe.aem` dependency also contains the `gson` package.\r\n\r\nHow do I get mvn to use the gson library from `com.adobe.aem` package ?\r\n\r\n  [1]: https://i.stack.imgur.com/7cAmt.png","title":"NoClassDefFoundError for junits during mvn test","body":"<p>I have the below two dependencies in my current setup.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.adobe.aem&lt;/groupId&gt;\n    &lt;artifactId&gt;aem-sdk-api&lt;/artifactId&gt;\n    &lt;version&gt;${aem.sdk.api}&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.tinify&lt;/groupId&gt;\n    &lt;artifactId&gt;tinify&lt;/artifactId&gt;\n    &lt;version&gt;1.6.4&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And I have this test class which uses the gson dependency from <code>com.adobe.aem</code> package, at least that is what the IDE says</p>\n<p><a href=\"https://i.stack.imgur.com/7cAmt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7cAmt.png\" alt=\"Test class\" /></a></p>\n<p>When I run tests from the IDE or do a <code>mvn clean install</code>, all the tests execute fine.</p>\n<hr />\n<p>I have no use for the <code>com.tinify</code> package now and I remove this dependency from the pom.xml.\nRunning the tests from IDE (right click and execute test) works fine but when I do a <code>mvn clean install</code> or <code>mvn test</code>, I get a <code>NoClassDefFoundError</code> for the <code>gson</code> library.</p>\n<pre><code>java.lang.NoClassDefFoundError: com/google/gson/internal/LinkedTreeMap\n    at com.......\n</code></pre>\n<p>Running <code>mvn dependency:tree</code> with the <code>com.tinify</code> package gives me this</p>\n<pre><code>[INFO] +- com.tinify:tinify:jar:1.6.4:provided\n[INFO] |  +- com.squareup.okhttp3:okhttp:jar:3.10.0:provided\n[INFO] |  |  \\- com.squareup.okio:okio:jar:1.14.0:provided\n[INFO] |  \\- com.google.code.gson:gson:jar:2.8.5:provided\n</code></pre>\n<p>From this I understand, mvn uses the gson library from the <code>com.tinify</code> package and removing it is causing this exception. But the <code>com.adobe.aem</code> dependency also contains the <code>gson</code> package.</p>\n<p>How do I get mvn to use the gson library from <code>com.adobe.aem</code> package ?</p>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa","java-record"],"comments":[{"owner":{"account_id":13459822,"reputation":1807,"user_id":9712270,"display_name":"magicmn"},"score":3,"creation_date":1641434694,"post_id":70601508,"comment_id":124806536,"body_markdown":"No records break multiple requirements of a classic JPA entity. Entities shouldn&#39;t be final, a no-args constructor is required and the attributes can not be final.","body":"No records break multiple requirements of a classic JPA entity. Entities shouldn&#39;t be final, a no-args constructor is required and the attributes can not be final."}],"answers":[{"comments":[{"owner":{"account_id":73432,"reputation":1895,"user_id":211453,"accept_rate":36,"display_name":"Wojtek"},"score":1,"creation_date":1687574793,"post_id":70601646,"comment_id":134960190,"body_markdown":"Is there at least any discussion around making JPA Entities compatible with Records? It would help a lot IMHO...","body":"Is there at least any discussion around making JPA Entities compatible with Records? It would help a lot IMHO..."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1699339787,"post_id":70601646,"comment_id":136515892,"body_markdown":"@Wojtek Yes, there is such discussion. See [*Jakarta EE 11: The Next Major Jakarta EE Update Is Shaping Up*](https://newsroom.eclipse.org/eclipse-newsletter/2023/august/jakarta-ee-11-next-major-jakarta-ee-update-shaping) by Ivar Grimstad, 2023-08. In Jakarta Persistence 3.2, “Java Records will be usable as an embeddable type”. And Jakarta Validation 3.1 will add support for Java Records.","body":"@Wojtek Yes, there is such discussion. See <a href=\"https://newsroom.eclipse.org/eclipse-newsletter/2023/august/jakarta-ee-11-next-major-jakarta-ee-update-shaping\" rel=\"nofollow noreferrer\"><i>Jakarta EE 11: The Next Major Jakarta EE Update Is Shaping Up</i></a> by Ivar Grimstad, 2023-08. In Jakarta Persistence 3.2, “Java Records will be usable as an embeddable type”. And Jakarta Validation 3.1 will add support for Java Records."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":2,"down_vote_count":0,"up_vote_count":35,"is_accepted":true,"score":35,"last_activity_date":1700753740,"creation_date":1641434528,"answer_id":70601646,"question_id":70601508,"body_markdown":"# tl;dr\r\n\r\nNo support currently, but likely in the future, perhaps next year, 2024.\r\n\r\n# Future\r\n\r\nAccording to [*Jakarta EE 11: The Next Major Jakarta EE Update Is Shaping Up*](https://newsroom.eclipse.org/eclipse-newsletter/2023/august/jakarta-ee-11-next-major-jakarta-ee-update-shaping) by Ivar Grimstad, 2023-08:\r\n\r\n - In [*Jakarta Persistence 3.2*][1], “Java Records will be usable as an embeddable type”. \r\n - [*Jakarta Validation 3.1*][2] will add support for Java Records.\r\n\r\n# Present\r\n\r\nSee the article, [*Using Records as Projections in JPA*](https://wkorando.github.io/sip-of-java/015.html) by Billy Korando. The following is a brief summary.\r\n\r\n## Records cannot be Entities\r\n\r\n[*Jakarta Persistence* ](https://en.wikipedia.org/wiki/Jakarta_Persistence) (*JPA*; formerly *Java Persistence API*) implementations such as [*Hibernate*](https://en.wikipedia.org/wiki/Hibernate_(framework)) depend on features either forbidden or not recommended by the [JEP 395: Records][3] spec: no-arg constructors, non-final fields, setters, etc. \r\n\r\n➥ So, no, records cannot be used as JPA `Entity`. \r\n\r\n## Other uses of records\r\n\r\nYou can use records with:\r\n\r\n - `CriteriaBuilder`\r\n - `TypedQuery`\r\n - `NativeQuery`\r\n - Mapping definition\r\n\r\nSpring data has some support as well. \r\n\r\nSee that article linked above for details, and for links to two other articles.\r\n\r\n\r\n  [1]: https://jakarta.ee/specifications/persistence/3.2/\r\n  [2]: https://jakarta.ee/specifications/bean-validation/3.1/\r\n  [3]: https://openjdk.java.net/jeps/395","title":"Can I use Java 16 record with JPA entity?","body":"<h1>tl;dr</h1>\n<p>No support currently, but likely in the future, perhaps next year, 2024.</p>\n<h1>Future</h1>\n<p>According to <a href=\"https://newsroom.eclipse.org/eclipse-newsletter/2023/august/jakarta-ee-11-next-major-jakarta-ee-update-shaping\" rel=\"nofollow noreferrer\"><em>Jakarta EE 11: The Next Major Jakarta EE Update Is Shaping Up</em></a> by Ivar Grimstad, 2023-08:</p>\n<ul>\n<li>In <a href=\"https://jakarta.ee/specifications/persistence/3.2/\" rel=\"nofollow noreferrer\"><em>Jakarta Persistence 3.2</em></a>, “Java Records will be usable as an embeddable type”.</li>\n<li><a href=\"https://jakarta.ee/specifications/bean-validation/3.1/\" rel=\"nofollow noreferrer\"><em>Jakarta Validation 3.1</em></a> will add support for Java Records.</li>\n</ul>\n<h1>Present</h1>\n<p>See the article, <a href=\"https://wkorando.github.io/sip-of-java/015.html\" rel=\"nofollow noreferrer\"><em>Using Records as Projections in JPA</em></a> by Billy Korando. The following is a brief summary.</p>\n<h2>Records cannot be Entities</h2>\n<p><a href=\"https://en.wikipedia.org/wiki/Jakarta_Persistence\" rel=\"nofollow noreferrer\"><em>Jakarta Persistence</em> </a> (<em>JPA</em>; formerly <em>Java Persistence API</em>) implementations such as <a href=\"https://en.wikipedia.org/wiki/Hibernate_(framework)\" rel=\"nofollow noreferrer\"><em>Hibernate</em></a> depend on features either forbidden or not recommended by the <a href=\"https://openjdk.java.net/jeps/395\" rel=\"nofollow noreferrer\">JEP 395: Records</a> spec: no-arg constructors, non-final fields, setters, etc.</p>\n<p>➥ So, no, records cannot be used as JPA <code>Entity</code>.</p>\n<h2>Other uses of records</h2>\n<p>You can use records with:</p>\n<ul>\n<li><code>CriteriaBuilder</code></li>\n<li><code>TypedQuery</code></li>\n<li><code>NativeQuery</code></li>\n<li>Mapping definition</li>\n</ul>\n<p>Spring data has some support as well.</p>\n<p>See that article linked above for details, and for links to two other articles.</p>\n"}],"owner":{"account_id":22260406,"reputation":353,"user_id":16491901,"display_name":"MongGu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10661,"favorite_count":0,"down_vote_count":1,"up_vote_count":25,"accepted_answer_id":70601646,"answer_count":1,"score":24,"last_activity_date":1700753740,"creation_date":1641432692,"question_id":70601508,"body_markdown":"I am trying to do something similar like below.\r\n\r\n    @Entity\r\n    @Table(name=&quot;Sample&quot;)\r\n    public record Sample(Integer id, String name) {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name=&quot;user_id&quot;)\r\n        private Integer id;\r\n    \r\n        @Column(name=&quot;username&quot;)\r\n        private String name;\r\n    \r\n    }\r\n\r\nHowever, it gives me error &quot;User declared non-static fields id are not permitted in a record&quot;\r\nand same for name field as well. \r\n\r\nIs there a way to use new java feature &quot;record&quot; with JPA annotation? \r\n","title":"Can I use Java 16 record with JPA entity?","body":"<p>I am trying to do something similar like below.</p>\n<pre><code>@Entity\n@Table(name=&quot;Sample&quot;)\npublic record Sample(Integer id, String name) {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name=&quot;user_id&quot;)\n    private Integer id;\n\n    @Column(name=&quot;username&quot;)\n    private String name;\n\n}\n</code></pre>\n<p>However, it gives me error &quot;User declared non-static fields id are not permitted in a record&quot;\nand same for name field as well.</p>\n<p>Is there a way to use new java feature &quot;record&quot; with JPA annotation?</p>\n"},{"tags":["java","spring","unit-testing","integration-testing"],"comments":[{"owner":{"account_id":451021,"reputation":181,"user_id":846668,"display_name":"Tyutyutyu"},"score":1,"creation_date":1700778402,"post_id":77538054,"comment_id":136698673,"body_markdown":"1. Upgrade the library and post a pull request. The maintainer maybe create a new release. 2. Upgrade the library and create a new custom release in-house.","body":"1. Upgrade the library and post a pull request. The maintainer maybe create a new release. 2. Upgrade the library and create a new custom release in-house."},{"owner":{"account_id":21704500,"reputation":75,"user_id":16017180,"display_name":"Joan"},"score":0,"creation_date":1700782707,"post_id":77538054,"comment_id":136698979,"body_markdown":"Good idea. I have actually overriden most of the classes, so most of the work is done. Thanks man.","body":"Good idea. I have actually overriden most of the classes, so most of the work is done. Thanks man."},{"owner":{"account_id":451021,"reputation":181,"user_id":846668,"display_name":"Tyutyutyu"},"score":1,"creation_date":1700784764,"post_id":77538054,"comment_id":136699117,"body_markdown":"If you duplicate a class (one in the original library and one in your source) with the same name and same package, it will be environment-dependent which class will be loaded by the class loader.","body":"If you duplicate a class (one in the original library and one in your source) with the same name and same package, it will be environment-dependent which class will be loaded by the class loader."},{"owner":{"account_id":21704500,"reputation":75,"user_id":16017180,"display_name":"Joan"},"score":0,"creation_date":1701697024,"post_id":77538054,"comment_id":136804049,"body_markdown":"You can post the comment as answer and I will mark it as correct. I did upgrade the library , posted the PR and now it is released in maven. Thanks a lot for reminding me. The link to the PR: https://github.com/ozimov/spring-boot-email-tools/pull/85","body":"You can post the comment as answer and I will mark it as correct. I did upgrade the library , posted the PR and now it is released in maven. Thanks a lot for reminding me. The link to the PR: <a href=\"https://github.com/ozimov/spring-boot-email-tools/pull/85\" rel=\"nofollow noreferrer\">github.com/ozimov/spring-boot-email-tools/pull/85</a>"},{"owner":{"account_id":451021,"reputation":181,"user_id":846668,"display_name":"Tyutyutyu"},"score":1,"creation_date":1701786307,"post_id":77538054,"comment_id":136816744,"body_markdown":"You solved the problem, so you can post your own solution as an answer.","body":"You solved the problem, so you can post your own solution as an answer."}],"owner":{"account_id":21704500,"reputation":75,"user_id":16017180,"display_name":"Joan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700753532,"creation_date":1700753532,"question_id":77538054,"body_markdown":"Upgrading from Spring Boot 2 to 3 brought some problems with our app. \r\nThe following Dependency \r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;it.ozimov&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-freemarker-email&lt;/artifactId&gt;\r\n            &lt;version&gt;0.6.3&lt;/version&gt; \r\n        &lt;/dependency&gt;\r\ncannot be upgraded. So I overrode the classes, and replaced all javax lines/usages with jakarta.\r\nAnd used BeanProcessor to lazyly init the bean inside the library for the Spring App as follows.\r\n\r\n        @Component\r\n      public class BeanProcessor implements BeanFactoryPostProcessor {\r\n        @Override\r\n        public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {\r\n            BeanDefinitionRegistry beanDefinitionRegistry = (BeanDefinitionRegistry) beanFactory;\r\n    \r\n            beanDefinitionRegistry\r\n                    .getBeanDefinition(&quot;defaultEmailService&quot;)\r\n                    .setLazyInit(true);\r\n    \r\n        }\r\n    }\r\n\r\nHowever, when attempting to start the Application Context inside the test files annotating it with @SpringBootTest,\r\nit gives me the following stacktrace:\r\n\r\n\r\n    java.lang.IllegalStateException: Failed to load ApplicationContext for...\r\n    Caused by: java.lang.IllegalStateException: Failed to introspect Class [it.ozimov.springboot.mail.service.defaultimpl.DefaultEmailService] from ClassLoader ....\r\n    Caused by: java.lang.ClassNotFoundException: javax.activation.DataSource\r\n\r\n**Meaning the class *DefaultEmailService*, requires the *javax.activation.DataSource* to be compiled correctly.\r\nI have overriden this bean in the main app, however, tests apparently need the whole code to compile.**\r\n\r\nAny suggestions on how to overcome this ? (instead of changing the entire library, we don&#39;t have that much time)\r\n\r\n","title":"How to solve &quot;Failed to instrospect class&quot; in Spring Testing Context?","body":"<p>Upgrading from Spring Boot 2 to 3 brought some problems with our app.\nThe following Dependency</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;it.ozimov&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-freemarker-email&lt;/artifactId&gt;\n        &lt;version&gt;0.6.3&lt;/version&gt; \n    &lt;/dependency&gt;\n</code></pre>\n<p>cannot be upgraded. So I overrode the classes, and replaced all javax lines/usages with jakarta.\nAnd used BeanProcessor to lazyly init the bean inside the library for the Spring App as follows.</p>\n<pre><code>    @Component\n  public class BeanProcessor implements BeanFactoryPostProcessor {\n    @Override\n    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {\n        BeanDefinitionRegistry beanDefinitionRegistry = (BeanDefinitionRegistry) beanFactory;\n\n        beanDefinitionRegistry\n                .getBeanDefinition(&quot;defaultEmailService&quot;)\n                .setLazyInit(true);\n\n    }\n}\n</code></pre>\n<p>However, when attempting to start the Application Context inside the test files annotating it with @SpringBootTest,\nit gives me the following stacktrace:</p>\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext for...\nCaused by: java.lang.IllegalStateException: Failed to introspect Class [it.ozimov.springboot.mail.service.defaultimpl.DefaultEmailService] from ClassLoader ....\nCaused by: java.lang.ClassNotFoundException: javax.activation.DataSource\n</code></pre>\n<p><strong>Meaning the class <em>DefaultEmailService</em>, requires the <em>javax.activation.DataSource</em> to be compiled correctly.\nI have overriden this bean in the main app, however, tests apparently need the whole code to compile.</strong></p>\n<p>Any suggestions on how to overcome this ? (instead of changing the entire library, we don't have that much time)</p>\n"},{"tags":["java","neo4j"],"answers":[{"comments":[{"owner":{"account_id":20062508,"reputation":5,"user_id":14708942,"display_name":"AES"},"score":0,"creation_date":1700397139,"post_id":77503708,"comment_id":136647006,"body_markdown":"I faced this error: ServiceUnavailable: WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: 3.\nI couldnt resolve using methods available on the internet.","body":"I faced this error: ServiceUnavailable: WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket <code>readyState</code> is: 3. I couldnt resolve using methods available on the internet."},{"owner":{"account_id":26739540,"reputation":101,"user_id":20340543,"display_name":"Podbrushkin"},"score":0,"creation_date":1700485792,"post_id":77503708,"comment_id":136656662,"body_markdown":"Make sure in webapp `BoltConnector.enabled = true`, also you can add a line with `BoltConnector.listen_address` as in gif with port explicitly specified, and in **Neo4j Browser** make sure you&#39;re choosing links of type `bolt://` and port is correct. Also you can try explicitly specifying username and password while creating db (instead of `no auth`), I remember it helped me once - under some circumstances `no auth` wasn&#39;t working and I had to switch to username+password auth.","body":"Make sure in webapp <code>BoltConnector.enabled = true</code>, also you can add a line with <code>BoltConnector.listen_address</code> as in gif with port explicitly specified, and in <b>Neo4j Browser</b> make sure you&#39;re choosing links of type <code>bolt:&#47;&#47;</code> and port is correct. Also you can try explicitly specifying username and password while creating db (instead of <code>no auth</code>), I remember it helped me once - under some circumstances <code>no auth</code> wasn&#39;t working and I had to switch to username+password auth."},{"owner":{"account_id":20062508,"reputation":5,"user_id":14708942,"display_name":"AES"},"score":0,"creation_date":1700570698,"post_id":77503708,"comment_id":136668676,"body_markdown":"thank you. I connected but I can&#39;t find my data there I also added my code image.","body":"thank you. I connected but I can&#39;t find my data there I also added my code image."},{"owner":{"account_id":26739540,"reputation":101,"user_id":20340543,"display_name":"Podbrushkin"},"score":0,"creation_date":1700571973,"post_id":77503708,"comment_id":136668904,"body_markdown":"If you&#39;re using Docker possibly you&#39;ve mounted wrong directory to `/data/`. Examine docker command and make sure in `-v $PWD/target/mydb/data:/data` part before colon there is correct path to existing db. In my case it&#39;s `./target/mydb/data` (when I&#39;m in dir with pom.xml) but in yours it would be `./target/neo4j-CyGraph-db/data`. Also please next time if you want to attach some code - attach it in form of markdown code block, not screenshot.","body":"If you&#39;re using Docker possibly you&#39;ve mounted wrong directory to <code>&#47;data&#47;</code>. Examine docker command and make sure in <code>-v $PWD&#47;target&#47;mydb&#47;data:&#47;data</code> part before colon there is correct path to existing db. In my case it&#39;s <code>.&#47;target&#47;mydb&#47;data</code> (when I&#39;m in dir with pom.xml) but in yours it would be <code>.&#47;target&#47;neo4j-CyGraph-db&#47;data</code>. Also please next time if you want to attach some code - attach it in form of markdown code block, not screenshot."},{"owner":{"account_id":20062508,"reputation":5,"user_id":14708942,"display_name":"AES"},"score":0,"creation_date":1700584588,"post_id":77503708,"comment_id":136671476,"body_markdown":"I am not using docker. Would you explain what you mean by existing DB? Should I set the directory &quot;/target/neo4j-CyGraph-db/data&quot; somewhere in neo4j? Is there anyway that I can simply dump my embedded db from java into a certain (e.g., csv) form that can be used by neo4j browser?","body":"I am not using docker. Would you explain what you mean by existing DB? Should I set the directory &quot;/target/neo4j-CyGraph-db/data&quot; somewhere in neo4j? Is there anyway that I can simply dump my embedded db from java into a certain (e.g., csv) form that can be used by neo4j browser?"},{"owner":{"account_id":26739540,"reputation":101,"user_id":20340543,"display_name":"Podbrushkin"},"score":0,"creation_date":1700597189,"post_id":77503708,"comment_id":136673661,"body_markdown":"If you&#39;re saying &quot;I can&#39;t find my data&quot; it means there is a database with some data (nodes and relationships) you&#39;ve inserted into it. I&#39;m referring to it as &quot;existing db&quot;. If you&#39;re not using docker, `/target/../data` dir is not relevant for you. Can you access your data right in your application? I.e. execute `match (n) return n` and see some nodes and rels you&#39;ve created earlier. Can you upload your app to github ot github.gists?","body":"If you&#39;re saying &quot;I can&#39;t find my data&quot; it means there is a database with some data (nodes and relationships) you&#39;ve inserted into it. I&#39;m referring to it as &quot;existing db&quot;. If you&#39;re not using docker, <code>&#47;target&#47;..&#47;data</code> dir is not relevant for you. Can you access your data right in your application? I.e. execute <code>match (n) return n</code> and see some nodes and rels you&#39;ve created earlier. Can you upload your app to github ot github.gists?"},{"owner":{"account_id":20062508,"reputation":5,"user_id":14708942,"display_name":"AES"},"score":0,"creation_date":1700736719,"post_id":77503708,"comment_id":136692370,"body_markdown":"My application shows the graph correctly. Here is the gist (https://gist.github.com/AESTheProgrammer/55c226197a31243e9f99ee091047fe1e)","body":"My application shows the graph correctly. Here is the gist (<a href=\"https://gist.github.com/AESTheProgrammer/55c226197a31243e9f99ee091047fe1e\" rel=\"nofollow noreferrer\">gist.github.com/AESTheProgrammer/&hellip;</a>)"}],"tags":[],"owner":{"account_id":26739540,"reputation":101,"user_id":20340543,"display_name":"Podbrushkin"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700753520,"creation_date":1700243597,"answer_id":77503708,"question_id":77428848,"body_markdown":"Looks like it is Neo4j Browser is that you&#39;re interested in, not Neo4j Desktop. Most straightforward way is to connect Neo4j Browser to your embedded database while your app is running. But also indeed you can export whole database to a file and import it in Neo4j Browser which is connected to some other db, preferably empty.\r\n\r\n## Connect from Neo4j Browser in Neo4j Desktop\r\n\r\nIf you have started Neo4j Embedded with these settings:\r\n```\r\n.setConfig( BoltConnector.enabled, true )`\r\n.setConfig(BoltConnector.encryption_level, BoltConnector.EncryptionLevel.DISABLED)\r\n```\r\n\r\nthen you can connect to it while application is running by pointing Neo4j Browser to localhost:7687 and `No authentication` option:\r\n\r\n[![connect to db with neo4j browser in neo4j desktop][1]][1]\r\n\r\n---\r\n\r\n## Connect from Neo4j Browser in Docker Neo4j image\r\n\r\nIf you have **Docker**, you can access database created by your application without application itself and without *Neo4j Desktop* installed.\r\n\r\nIf you are creating your embedded db like that:\r\n```\r\nDatabaseManagementService managementService = \r\n    new  DatabaseManagementServiceBuilder(new File(&quot;target/mydb&quot;).toPath())\r\n```\r\nit means database is located at `/target/mydb/` directory. It stays there even after application is stopped.\r\n\r\nYou can run a new neo4j server with this database by executing this bash command in directory with `pom.xml` once your application is stopped:\r\n```\r\nsudo docker run --rm -p 7474:7474 -p 7687:7687 -v $PWD/target/mydb/data:/data --name neo4j-1 neo4j\r\n```\r\n\r\nI am using powershell and actual commands I execute are:\r\n```\r\n$neo4jDataDir = &#39;./target/mydb/data/&#39;\r\ndocker run --name neo4j-1 --rm -v $neo4jDataDir`:/data -p 7474:7474 -p 7687:7687 -e NEO4J_AUTH=neo4j/qwertyuiop -d neo4j\r\n# Checkout what&#39;s happening:\r\ndocker logs neo4j-1\r\n# Stop server:\r\ndocker stop neo4j-1\r\n```\r\n\r\nOnce server is up and running, **Neo4j Browser** becomes available at localhost:7474 in web browser.\r\n\r\nAlso I&#39;ve noticed when you stop server, **Neo4j Browser** keeps working until you will close it&#39;s tab in web browser.\r\n\r\n## Export database and import in Neo4j Browser\r\n\r\nIf for some reason you can&#39;t connect to your database with Neo4j Browser, you can dump your db to a file and import it afterwards in Neo4j Browser which is connected to a different db, preferably empty. For this you will need external plugin Apoc.\r\n\r\n1. Add these dependencies to project:\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.neo4j.procedure&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;apoc-core&lt;/artifactId&gt;\r\n\t&lt;version&gt;${neo4j.version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.neo4j.procedure&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;apoc-common&lt;/artifactId&gt;\r\n\t&lt;version&gt;${neo4j.version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n2. Register procedure you will use:\r\n```java\r\n...\r\nGraphDatabaseService db = graphDb.database(GraphDatabaseSettings.DEFAULT_DATABASE_NAME);\r\nregisterProcedure(db,\r\n\t\tapoc.export.cypher.ExportCypher.class);\r\n...\r\npublic static void registerProcedure(GraphDatabaseService db, Class&lt;?&gt;... procedures) {\r\n\tGlobalProcedures globalProcedures = ((GraphDatabaseAPI) db).getDependencyResolver()\r\n\t\t\t.resolveDependency(GlobalProcedures.class);\r\n\tfor (Class&lt;?&gt; procedure : procedures) {\r\n\t\ttry {\r\n\t\t\tglobalProcedures.registerProcedure(procedure);\r\n\t\t\tglobalProcedures.registerFunction(procedure);\r\n\t\t\tglobalProcedures.registerAggregationFunction(procedure);\r\n\t\t} catch (KernelException e) {\r\n\t\t\tthrow new RuntimeException(&quot;while registering &quot; + procedure, e);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n3. Enable exporting to a file:\r\n```java\r\nApocConfig.apocConfig().setProperty(ApocConfig.APOC_EXPORT_FILE_ENABLED, true);\r\n```\r\n\r\n4. Execute procedure:\r\n```java\r\ntry (\r\n\tvar driver = GraphDatabase.driver(&quot;bolt://localhost:7687&quot;, AuthTokens.none());\r\n\tvar session = driver.session()) {\r\n\tvar query = &quot;&quot;&quot;\r\n\t\t\tCALL apoc.export.cypher.all(&quot;all-plain.cypher&quot;, {\r\n\t\t\t\tformat: &quot;plain&quot;,\r\n\t\t\t\tuseOptimizations: {type: &quot;UNWIND_BATCH&quot;, unwindBatchSize: 20}\r\n\t\t\t})\r\n\t\t\t&quot;&quot;&quot;;\r\n\tsession.executeRead(t -&gt; t.run(query).consume());\r\n}\r\n```\r\n\r\n5. Find a `./target/mydb/all-plain.cypher` text file with all your data in Cypher format.\r\n\r\n6. Drag and drop it to Neo4j Browser or copy-paste it&#39;s contents. \r\n\r\nFully working example of dumping database to a file can be found [in this Gist](https://gist.github.com/Podbrushkin/3f16feb9b9da22ab27ee2878c38633aa).\r\n\r\n  [1]: https://i.stack.imgur.com/PHRyl.gif","title":"Embedded database to neo4j desktop","body":"<p>Looks like it is Neo4j Browser is that you're interested in, not Neo4j Desktop. Most straightforward way is to connect Neo4j Browser to your embedded database while your app is running. But also indeed you can export whole database to a file and import it in Neo4j Browser which is connected to some other db, preferably empty.</p>\n<h2>Connect from Neo4j Browser in Neo4j Desktop</h2>\n<p>If you have started Neo4j Embedded with these settings:</p>\n<pre><code>.setConfig( BoltConnector.enabled, true )`\n.setConfig(BoltConnector.encryption_level, BoltConnector.EncryptionLevel.DISABLED)\n</code></pre>\n<p>then you can connect to it while application is running by pointing Neo4j Browser to localhost:7687 and <code>No authentication</code> option:</p>\n<p><a href=\"https://i.stack.imgur.com/PHRyl.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PHRyl.gif\" alt=\"connect to db with neo4j browser in neo4j desktop\" /></a></p>\n<hr />\n<h2>Connect from Neo4j Browser in Docker Neo4j image</h2>\n<p>If you have <strong>Docker</strong>, you can access database created by your application without application itself and without <em>Neo4j Desktop</em> installed.</p>\n<p>If you are creating your embedded db like that:</p>\n<pre><code>DatabaseManagementService managementService = \n    new  DatabaseManagementServiceBuilder(new File(&quot;target/mydb&quot;).toPath())\n</code></pre>\n<p>it means database is located at <code>/target/mydb/</code> directory. It stays there even after application is stopped.</p>\n<p>You can run a new neo4j server with this database by executing this bash command in directory with <code>pom.xml</code> once your application is stopped:</p>\n<pre><code>sudo docker run --rm -p 7474:7474 -p 7687:7687 -v $PWD/target/mydb/data:/data --name neo4j-1 neo4j\n</code></pre>\n<p>I am using powershell and actual commands I execute are:</p>\n<pre><code>$neo4jDataDir = './target/mydb/data/'\ndocker run --name neo4j-1 --rm -v $neo4jDataDir`:/data -p 7474:7474 -p 7687:7687 -e NEO4J_AUTH=neo4j/qwertyuiop -d neo4j\n# Checkout what's happening:\ndocker logs neo4j-1\n# Stop server:\ndocker stop neo4j-1\n</code></pre>\n<p>Once server is up and running, <strong>Neo4j Browser</strong> becomes available at localhost:7474 in web browser.</p>\n<p>Also I've noticed when you stop server, <strong>Neo4j Browser</strong> keeps working until you will close it's tab in web browser.</p>\n<h2>Export database and import in Neo4j Browser</h2>\n<p>If for some reason you can't connect to your database with Neo4j Browser, you can dump your db to a file and import it afterwards in Neo4j Browser which is connected to a different db, preferably empty. For this you will need external plugin Apoc.</p>\n<ol>\n<li>Add these dependencies to project:</li>\n</ol>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.neo4j.procedure&lt;/groupId&gt;\n    &lt;artifactId&gt;apoc-core&lt;/artifactId&gt;\n    &lt;version&gt;${neo4j.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.neo4j.procedure&lt;/groupId&gt;\n    &lt;artifactId&gt;apoc-common&lt;/artifactId&gt;\n    &lt;version&gt;${neo4j.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<ol start=\"2\">\n<li>Register procedure you will use:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>...\nGraphDatabaseService db = graphDb.database(GraphDatabaseSettings.DEFAULT_DATABASE_NAME);\nregisterProcedure(db,\n        apoc.export.cypher.ExportCypher.class);\n...\npublic static void registerProcedure(GraphDatabaseService db, Class&lt;?&gt;... procedures) {\n    GlobalProcedures globalProcedures = ((GraphDatabaseAPI) db).getDependencyResolver()\n            .resolveDependency(GlobalProcedures.class);\n    for (Class&lt;?&gt; procedure : procedures) {\n        try {\n            globalProcedures.registerProcedure(procedure);\n            globalProcedures.registerFunction(procedure);\n            globalProcedures.registerAggregationFunction(procedure);\n        } catch (KernelException e) {\n            throw new RuntimeException(&quot;while registering &quot; + procedure, e);\n        }\n    }\n}\n</code></pre>\n<ol start=\"3\">\n<li>Enable exporting to a file:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>ApocConfig.apocConfig().setProperty(ApocConfig.APOC_EXPORT_FILE_ENABLED, true);\n</code></pre>\n<ol start=\"4\">\n<li>Execute procedure:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>try (\n    var driver = GraphDatabase.driver(&quot;bolt://localhost:7687&quot;, AuthTokens.none());\n    var session = driver.session()) {\n    var query = &quot;&quot;&quot;\n            CALL apoc.export.cypher.all(&quot;all-plain.cypher&quot;, {\n                format: &quot;plain&quot;,\n                useOptimizations: {type: &quot;UNWIND_BATCH&quot;, unwindBatchSize: 20}\n            })\n            &quot;&quot;&quot;;\n    session.executeRead(t -&gt; t.run(query).consume());\n}\n</code></pre>\n<ol start=\"5\">\n<li><p>Find a <code>./target/mydb/all-plain.cypher</code> text file with all your data in Cypher format.</p>\n</li>\n<li><p>Drag and drop it to Neo4j Browser or copy-paste it's contents.</p>\n</li>\n</ol>\n<p>Fully working example of dumping database to a file can be found <a href=\"https://gist.github.com/Podbrushkin/3f16feb9b9da22ab27ee2878c38633aa\" rel=\"nofollow noreferrer\">in this Gist</a>.</p>\n"}],"owner":{"account_id":20062508,"reputation":5,"user_id":14708942,"display_name":"AES"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77503708,"answer_count":1,"score":0,"last_activity_date":1700753520,"creation_date":1699247159,"question_id":77428848,"body_markdown":"I&#39;m currently using `DatabaseManagementServiceBuilder` to store `neo4j` data on my local host. Is there anyway to import the data to `neo4j` desktop or any other tool for visualisation? for example by creating a `.csv` file or dumping the data.\r\n\r\nThis is how my directories look like.\r\n\r\nfirst  \r\n![first][1]\r\n\r\nsecond  \r\n![second][2]\r\n\r\nthird  \r\n![third][3]\r\n\r\nI tried to replace the `/data` directory in a `neo4j` desktop database with my own `/data` directory but it didn&#39;t work (`neo4j` desktop kept giving an error which was no surprise).\r\n\r\n\r\n[enter image description here][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QLm9Z.jpg\r\n  [2]: https://i.stack.imgur.com/3EW2r.jpg\r\n  [3]: https://i.stack.imgur.com/uU9xt.jpg\r\n\r\nthis is my code for connecting\r\n  [4]: https://i.stack.imgur.com/GkIKu.png","title":"Embedded database to neo4j desktop","body":"<p>I'm currently using <code>DatabaseManagementServiceBuilder</code> to store <code>neo4j</code> data on my local host. Is there anyway to import the data to <code>neo4j</code> desktop or any other tool for visualisation? for example by creating a <code>.csv</code> file or dumping the data.</p>\n<p>This is how my directories look like.</p>\n<p>first<br />\n<img src=\"https://i.stack.imgur.com/QLm9Z.jpg\" alt=\"first\" /></p>\n<p>second<br />\n<img src=\"https://i.stack.imgur.com/3EW2r.jpg\" alt=\"second\" /></p>\n<p>third<br />\n<img src=\"https://i.stack.imgur.com/uU9xt.jpg\" alt=\"third\" /></p>\n<p>I tried to replace the <code>/data</code> directory in a <code>neo4j</code> desktop database with my own <code>/data</code> directory but it didn't work (<code>neo4j</code> desktop kept giving an error which was no surprise).</p>\n<p>[enter image description here][4]</p>\n<p>this is my code for connecting\n[4]: <a href=\"https://i.stack.imgur.com/GkIKu.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/GkIKu.png</a></p>\n"},{"tags":["java","spring-boot","spring-data-jpa","spring-data"],"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700753303,"creation_date":1700753303,"question_id":77538037,"body_markdown":"I was reading [Spring Data documentation][1] and noticed this example:\r\n```java\r\ninterface PersonRepository extends Repository&lt;Person, UUID&gt; {\r\n\r\n  Collection&lt;NamesOnly&gt; findByLastname(String lastname);\r\n}\r\n```\r\n```java\r\ninterface NamesOnly {\r\n\r\n  String getFirstname();\r\n  String getLastname();\r\n}\r\n```\r\nIt should work with DTOs too:\r\n\r\n&gt; Another way of defining projections is by using value type DTOs (Data Transfer Objects) that hold properties for the fields that are supposed to be retrieved. These DTO types can be used in exactly the same way projection interfaces are used, except that no proxying happens and no nested projections can be applied.\r\n&gt;\r\n&gt; If the store optimizes the query execution by limiting the fields to be loaded, the fields to be loaded are determined from the parameter names of the constructor that is exposed.\r\n\r\nIt caught my attention since it can theoretically rid us of at least some of the mappers in our project. However, it couldn&#39;t be pulled off right away. An MRE:\r\n```java\r\npublic interface CardRepository extends Repository&lt;Card, UUID&gt; {\r\n    List&lt;CardIdDto&gt; findCardIdsByAccountId(UUID accountId);\r\n}\r\n```\r\n```java\r\n@Entity\r\n@Table(name = &quot;card&quot;)\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Card {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private UUID id;\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;account_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private Account account;\r\n    @Enumerated(value = EnumType.STRING)\r\n    private CardStatus status;\r\n}\r\n```\r\n```java\r\npublic enum CardStatus {\r\n    ACTIVE, NON_ACTIVE\r\n}\r\n```\r\n```java\r\n@Entity\r\n@Table(name = &quot;account&quot;)\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Account {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @Column(name = &quot;id&quot;)\r\n    private UUID id;\r\n    @OneToMany(mappedBy = &quot;account&quot;)\r\n    private List&lt;Card&gt; cards;\r\n}\r\n```\r\n```java\r\n@Getter\r\n@EqualsAndHashCode\r\n@ToString\r\n@AllArgsConstructor\r\npublic class CardIdDto {\r\n    private UUID id;\r\n}\r\n```\r\n```java\r\n@DataJpaTest\r\n@ActiveProfiles(&quot;test&quot;) // for additional logs, ddl-auto is disabled too\r\n@Sql(\r\n        executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD,\r\n        scripts = {&quot;/schema-h2.sql&quot;, &quot;/data-h2.sql&quot;}\r\n)\r\nclass CardRepositoryTest {\r\n\r\n    @Autowired\r\n    private CardRepository cardRepository;\r\n    private final static UUID ACCOUNT_ID = UUID.fromString(&quot;00000000-0000-0000-0000-000000000ac1&quot;);\r\n\r\n    @Test\r\n    void testFindIds() {\r\n        List&lt;CardIdDto&gt; cardIds = cardRepository.findCardIdsByAccountId(ACCOUNT_ID);\r\n        assertThat(cardIds).asList().hasSize(2);\r\n    }\r\n}\r\n```\r\n```sql\r\n-- schema\r\n\r\nCREATE TABLE IF NOT EXISTS PUBLIC.account\r\n(\r\n    id                        UUID           PRIMARY KEY\r\n);\r\nCREATE TABLE IF NOT EXISTS PUBLIC.card\r\n(\r\n    id                UUID             PRIMARY KEY,\r\n    account_id        UUID             NOT NULL REFERENCES account (id),\r\n    status            VARCHAR(30)      NOT NULL\r\n);\r\n```\r\n```sql\r\n-- data\r\n\r\nINSERT INTO PUBLIC.ACCOUNT\r\nVALUES (&#39;00000000-0000-0000-0000-000000000ac1&#39;);\r\n\r\nINSERT INTO PUBLIC.CARD\r\nVALUES (&#39;00000000-0000-0000-0000-0000000000c1&#39;, &#39;00000000-0000-0000-0000-000000000ac1&#39;, &#39;ACTIVE&#39;);\r\n\r\nINSERT INTO PUBLIC.CARD\r\nVALUES (&#39;00000000-0000-0000-0000-0000000000c2&#39;, &#39;00000000-0000-0000-0000-000000000ac1&#39;, &#39;ACTIVE&#39;);\r\n```\r\nThe exception message is not helpful:\r\n```\r\njava.lang.ClassCastException: class org.hibernate.hql.internal.ast.tree.SqlNode cannot be cast to class org.hibernate.hql.internal.ast.tree.FromReferenceNode (org.hibernate.hql.internal.ast.tree.SqlNode and org.hibernate.hql.internal.ast.tree.FromReferenceNode are in unnamed module of loader &#39;app&#39;)\r\n```\r\nSo I am wondering, is the trick possible in Spring Data 2 (we haven&#39;t upgraded to 3)\r\n\r\n\r\n  [1]: https://web.archive.org/web/20230929080923/https://docs.spring.io/spring-data/jpa/docs/current/reference/html/","title":"Can you have DTOs as return types of Spring Data 2 methods?","body":"<p>I was reading <a href=\"https://web.archive.org/web/20230929080923/https://docs.spring.io/spring-data/jpa/docs/current/reference/html/\" rel=\"nofollow noreferrer\">Spring Data documentation</a> and noticed this example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface PersonRepository extends Repository&lt;Person, UUID&gt; {\n\n  Collection&lt;NamesOnly&gt; findByLastname(String lastname);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>interface NamesOnly {\n\n  String getFirstname();\n  String getLastname();\n}\n</code></pre>\n<p>It should work with DTOs too:</p>\n<blockquote>\n<p>Another way of defining projections is by using value type DTOs (Data Transfer Objects) that hold properties for the fields that are supposed to be retrieved. These DTO types can be used in exactly the same way projection interfaces are used, except that no proxying happens and no nested projections can be applied.</p>\n<p>If the store optimizes the query execution by limiting the fields to be loaded, the fields to be loaded are determined from the parameter names of the constructor that is exposed.</p>\n</blockquote>\n<p>It caught my attention since it can theoretically rid us of at least some of the mappers in our project. However, it couldn't be pulled off right away. An MRE:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface CardRepository extends Repository&lt;Card, UUID&gt; {\n    List&lt;CardIdDto&gt; findCardIdsByAccountId(UUID accountId);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;card&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Card {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private UUID id;\n    @ManyToOne\n    @JoinColumn(name = &quot;account_id&quot;, referencedColumnName = &quot;id&quot;)\n    private Account account;\n    @Enumerated(value = EnumType.STRING)\n    private CardStatus status;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public enum CardStatus {\n    ACTIVE, NON_ACTIVE\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;account&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Account {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;id&quot;)\n    private UUID id;\n    @OneToMany(mappedBy = &quot;account&quot;)\n    private List&lt;Card&gt; cards;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@EqualsAndHashCode\n@ToString\n@AllArgsConstructor\npublic class CardIdDto {\n    private UUID id;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@DataJpaTest\n@ActiveProfiles(&quot;test&quot;) // for additional logs, ddl-auto is disabled too\n@Sql(\n        executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD,\n        scripts = {&quot;/schema-h2.sql&quot;, &quot;/data-h2.sql&quot;}\n)\nclass CardRepositoryTest {\n\n    @Autowired\n    private CardRepository cardRepository;\n    private final static UUID ACCOUNT_ID = UUID.fromString(&quot;00000000-0000-0000-0000-000000000ac1&quot;);\n\n    @Test\n    void testFindIds() {\n        List&lt;CardIdDto&gt; cardIds = cardRepository.findCardIdsByAccountId(ACCOUNT_ID);\n        assertThat(cardIds).asList().hasSize(2);\n    }\n}\n</code></pre>\n<pre class=\"lang-sql prettyprint-override\"><code>-- schema\n\nCREATE TABLE IF NOT EXISTS PUBLIC.account\n(\n    id                        UUID           PRIMARY KEY\n);\nCREATE TABLE IF NOT EXISTS PUBLIC.card\n(\n    id                UUID             PRIMARY KEY,\n    account_id        UUID             NOT NULL REFERENCES account (id),\n    status            VARCHAR(30)      NOT NULL\n);\n</code></pre>\n<pre class=\"lang-sql prettyprint-override\"><code>-- data\n\nINSERT INTO PUBLIC.ACCOUNT\nVALUES ('00000000-0000-0000-0000-000000000ac1');\n\nINSERT INTO PUBLIC.CARD\nVALUES ('00000000-0000-0000-0000-0000000000c1', '00000000-0000-0000-0000-000000000ac1', 'ACTIVE');\n\nINSERT INTO PUBLIC.CARD\nVALUES ('00000000-0000-0000-0000-0000000000c2', '00000000-0000-0000-0000-000000000ac1', 'ACTIVE');\n</code></pre>\n<p>The exception message is not helpful:</p>\n<pre><code>java.lang.ClassCastException: class org.hibernate.hql.internal.ast.tree.SqlNode cannot be cast to class org.hibernate.hql.internal.ast.tree.FromReferenceNode (org.hibernate.hql.internal.ast.tree.SqlNode and org.hibernate.hql.internal.ast.tree.FromReferenceNode are in unnamed module of loader 'app')\n</code></pre>\n<p>So I am wondering, is the trick possible in Spring Data 2 (we haven't upgraded to 3)</p>\n"},{"tags":["java","properties","resourcebundle"],"answers":[{"comments":[{"owner":{"account_id":1587261,"reputation":9583,"user_id":1471314,"accept_rate":43,"display_name":"roger_that"},"score":1,"creation_date":1385114913,"post_id":20142051,"comment_id":30019318,"body_markdown":"i guess when accessing from resource bundle... you require just the first name and not the extension coz I have one maven project example where I haven&#39;t mentioned the extension and then too it worked.","body":"i guess when accessing from resource bundle... you require just the first name and not the extension coz I have one maven project example where I haven&#39;t mentioned the extension and then too it worked."},{"owner":{"account_id":1587261,"reputation":9583,"user_id":1471314,"accept_rate":43,"display_name":"roger_that"},"score":2,"creation_date":1385117035,"post_id":20142051,"comment_id":30020534,"body_markdown":"Though I didn&#39;t try it, but seems to be working. Well, the above answer, using fully qualified name does the trick. And see, no extension required. :)","body":"Though I didn&#39;t try it, but seems to be working. Well, the above answer, using fully qualified name does the trick. And see, no extension required. :)"}],"tags":[],"owner":{"account_id":2370868,"reputation":8183,"user_id":2075524,"accept_rate":88,"display_name":"Ross Drew"},"comment_count":2,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1422461172,"creation_date":1385114602,"answer_id":20142051,"question_id":20142002,"body_markdown":"[ResourceBundle][1] doesn&#39;t load files?  You need to get the files into a resource first.  How about just loading into a [FileInputStream][2] then a [PropertyResourceBundle][3]\r\n\r\n       FileInputStream fis = new FileInputStream(&quot;skyscrapper.properties&quot;);\r\n       resourceBundle = new PropertyResourceBundle(fis);\r\n\r\nOr if you need the locale specific code, something like this should work\r\n\r\n    File file = new File(&quot;skyscrapper.properties&quot;);\r\n    URL[] urls = {file.toURI().toURL()};\r\n    ClassLoader loader = new URLClassLoader(urls);\r\n    ResourceBundle rb = ResourceBundle.getBundle(&quot;skyscrapper&quot;, Locale.getDefault(), loader);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html\r\n  [3]: http://docs.oracle.com/javase/7/docs/api/java/util/PropertyResourceBundle.html","title":"java.util.MissingResourceException: Can&#39;t find bundle for base name &#39;property_file name&#39;, locale en_US","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html\" rel=\"noreferrer\">ResourceBundle</a> doesn't load files?  You need to get the files into a resource first.  How about just loading into a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html\" rel=\"noreferrer\">FileInputStream</a> then a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/PropertyResourceBundle.html\" rel=\"noreferrer\">PropertyResourceBundle</a></p>\n\n<pre><code>   FileInputStream fis = new FileInputStream(\"skyscrapper.properties\");\n   resourceBundle = new PropertyResourceBundle(fis);\n</code></pre>\n\n<p>Or if you need the locale specific code, something like this should work</p>\n\n<pre><code>File file = new File(\"skyscrapper.properties\");\nURL[] urls = {file.toURI().toURL()};\nClassLoader loader = new URLClassLoader(urls);\nResourceBundle rb = ResourceBundle.getBundle(\"skyscrapper\", Locale.getDefault(), loader);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1587261,"reputation":9583,"user_id":1471314,"accept_rate":43,"display_name":"roger_that"},"score":0,"creation_date":1385117070,"post_id":20142626,"comment_id":30020554,"body_markdown":"Yes! Fully qualified name. I was trying this but was working with relative paths. This worked!","body":"Yes! Fully qualified name. I was trying this but was working with relative paths. This worked!"},{"owner":{"account_id":1317825,"reputation":12193,"user_id":1264321,"accept_rate":92,"display_name":"Stefan"},"score":0,"creation_date":1634198994,"post_id":20142626,"comment_id":122962491,"body_markdown":"How could this work, since the resource folder does not exist when the app is build?","body":"How could this work, since the resource folder does not exist when the app is build?"}],"tags":[],"owner":{"account_id":377411,"reputation":2773,"user_id":729513,"accept_rate":100,"display_name":"Bludzee"},"comment_count":2,"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1385116287,"creation_date":1385116287,"answer_id":20142626,"question_id":20142002,"body_markdown":"Try with the **fully qualified name** for the resource:&lt;br/&gt;\r\n\r\n    private static final String FILENAME = &quot;resources/skyscrapper&quot;;","title":"java.util.MissingResourceException: Can&#39;t find bundle for base name &#39;property_file name&#39;, locale en_US","body":"<p>Try with the <strong>fully qualified name</strong> for the resource:<br/></p>\n\n<pre><code>private static final String FILENAME = \"resources/skyscrapper\";\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2337675,"reputation":143,"user_id":2049626,"display_name":"Sudeep Krishnan M"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1422461272,"creation_date":1415012507,"answer_id":26712825,"question_id":20142002,"body_markdown":"Use the Resource like\r\n\r\n    ResourceBundle rb = ResourceBundle.getBundle(&quot;com//sudeep//internationalization//MyApp&quot;,locale);\r\n    or\r\n    ResourceBundle rb = ResourceBundle.getBundle(&quot;com.sudeep.internationalization.MyApp&quot;,locale);\r\n\r\nJust give the qualified path .. Its working for me!!!","title":"java.util.MissingResourceException: Can&#39;t find bundle for base name &#39;property_file name&#39;, locale en_US","body":"<p>Use the Resource like</p>\n\n<pre><code>ResourceBundle rb = ResourceBundle.getBundle(\"com//sudeep//internationalization//MyApp\",locale);\nor\nResourceBundle rb = ResourceBundle.getBundle(\"com.sudeep.internationalization.MyApp\",locale);\n</code></pre>\n\n<p>Just give the qualified path .. Its working for me!!!</p>\n"},{"tags":[],"owner":{"account_id":4941402,"reputation":2504,"user_id":3977996,"accept_rate":96,"display_name":"Alireza Alallah"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1505234091,"creation_date":1460727580,"answer_id":36648793,"question_id":20142002,"body_markdown":"You should set property file name without `.properties` extension,\r\nit works correctly for me:)","title":"java.util.MissingResourceException: Can&#39;t find bundle for base name &#39;property_file name&#39;, locale en_US","body":"<p>You should set property file name without <code>.properties</code> extension,\nit works correctly for me:)</p>\n"},{"tags":[],"owner":{"account_id":419030,"reputation":612,"user_id":795969,"display_name":"peihan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1471852514,"creation_date":1471852514,"answer_id":39074049,"question_id":20142002,"body_markdown":"I&#39;d like to share my experience of using Ant in building projects, *.properties files should be **copied explicitly**. This is because Ant will not compile *.properties files into the build working directory by default (javac just ignore *.properties). For example:\r\n\r\n\t&lt;target name=&quot;compile&quot; depends=&quot;init&quot;&gt;\r\n\t\t&lt;javac destdir=&quot;${dst}&quot; srcdir=&quot;${src}&quot; debug=&quot;on&quot; encoding=&quot;utf-8&quot; includeantruntime=&quot;false&quot;&gt;\r\n\t\t\t&lt;include name=&quot;com/example/**&quot; /&gt;\r\n\t\t\t&lt;classpath refid=&quot;libs&quot; /&gt;\r\n\t\t&lt;/javac&gt;\r\n\t\t&lt;copy todir=&quot;${dst}&quot;&gt;\r\n\t\t\t&lt;fileset dir=&quot;${src}&quot; includes=&quot;**/*.properties&quot; /&gt;\r\n\t\t&lt;/copy&gt;\r\n\t&lt;/target&gt;\r\n\r\n\t&lt;target name=&quot;jars&quot; depends=&quot;compile&quot;&gt;\r\n\t\t&lt;jar jarfile=&quot;${app_jar}&quot; basedir=&quot;${dst}&quot; includes=&quot;com/example/**/*.*&quot; /&gt;\r\n\t&lt;/target&gt;\r\n\r\n\r\nPlease notice that &#39;copy&#39; section under the &#39;compile&#39; target, it will replicate *.properties files into the build working directory. Without the &#39;copy&#39; section the jar file will not contain the properties files, then you may encounter the java.util.MissingResourceException.","title":"java.util.MissingResourceException: Can&#39;t find bundle for base name &#39;property_file name&#39;, locale en_US","body":"<p>I'd like to share my experience of using Ant in building projects, *.properties files should be <strong>copied explicitly</strong>. This is because Ant will not compile *.properties files into the build working directory by default (javac just ignore *.properties). For example:</p>\n\n<pre><code>&lt;target name=\"compile\" depends=\"init\"&gt;\n    &lt;javac destdir=\"${dst}\" srcdir=\"${src}\" debug=\"on\" encoding=\"utf-8\" includeantruntime=\"false\"&gt;\n        &lt;include name=\"com/example/**\" /&gt;\n        &lt;classpath refid=\"libs\" /&gt;\n    &lt;/javac&gt;\n    &lt;copy todir=\"${dst}\"&gt;\n        &lt;fileset dir=\"${src}\" includes=\"**/*.properties\" /&gt;\n    &lt;/copy&gt;\n&lt;/target&gt;\n\n&lt;target name=\"jars\" depends=\"compile\"&gt;\n    &lt;jar jarfile=\"${app_jar}\" basedir=\"${dst}\" includes=\"com/example/**/*.*\" /&gt;\n&lt;/target&gt;\n</code></pre>\n\n<p>Please notice that 'copy' section under the 'compile' target, it will replicate *.properties files into the build working directory. Without the 'copy' section the jar file will not contain the properties files, then you may encounter the java.util.MissingResourceException.</p>\n"},{"tags":[],"owner":{"account_id":5572329,"reputation":57,"user_id":4417101,"display_name":"TontonZition"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1479570323,"creation_date":1479570323,"answer_id":40694770,"question_id":20142002,"body_markdown":"With Eclipse and Windows:\r\n\r\nyou have to copy 2 files\r\n- xxxPROJECTxxx.properties\r\n- log4j.properties\r\nhere :  C:\\Eclipse\\CONTENER\\TOMCAT\\apache-tomcat-7\\lib","title":"java.util.MissingResourceException: Can&#39;t find bundle for base name &#39;property_file name&#39;, locale en_US","body":"<p>With Eclipse and Windows:</p>\n\n<p>you have to copy 2 files\n- xxxPROJECTxxx.properties\n- log4j.properties\nhere :  C:\\Eclipse\\CONTENER\\TOMCAT\\apache-tomcat-7\\lib</p>\n"},{"tags":[],"owner":{"account_id":7629995,"reputation":301,"user_id":5785358,"accept_rate":0,"display_name":"Etch"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1528255481,"creation_date":1528255481,"answer_id":50711813,"question_id":20142002,"body_markdown":"I have just realized that my error was caused in the naming convention of my property file. When i used xxxx.xxxx.properties i got the error: \r\n\r\njava.util.MissingResourceException: Can&#39;t find bundle for base name &#39;property_file name&#39;, locale en_US\r\n\r\nChanging it to something like xxx-xxxx.properties works like a charm. Hope i help someone!\r\n","title":"java.util.MissingResourceException: Can&#39;t find bundle for base name &#39;property_file name&#39;, locale en_US","body":"<p>I have just realized that my error was caused in the naming convention of my property file. When i used xxxx.xxxx.properties i got the error: </p>\n\n<p>java.util.MissingResourceException: Can't find bundle for base name 'property_file name', locale en_US</p>\n\n<p>Changing it to something like xxx-xxxx.properties works like a charm. Hope i help someone!</p>\n"},{"tags":[],"owner":{"account_id":14487360,"reputation":1,"user_id":10464827,"display_name":"karuthiruman karthikeyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538808608,"creation_date":1538808608,"answer_id":52676446,"question_id":20142002,"body_markdown":"just right click on the project file in eclipse and in build path select &quot;Use as source folder&quot;...It worked for me\r\n","title":"java.util.MissingResourceException: Can&#39;t find bundle for base name &#39;property_file name&#39;, locale en_US","body":"<p>just right click on the project file in eclipse and in build path select \"Use as source folder\"...It worked for me</p>\n"},{"comments":[{"owner":{"account_id":1096311,"reputation":2246,"user_id":1089841,"accept_rate":33,"display_name":"Girish"},"score":0,"creation_date":1640694706,"post_id":61097321,"comment_id":124634776,"body_markdown":"this is not working\nI have code in src/main for getBundle and the file is in src/test/resources/name.properties","body":"this is not working I have code in src/main for getBundle and the file is in src/test/resources/name.properties"}],"tags":[],"owner":{"account_id":16872570,"reputation":613,"user_id":12200765,"display_name":"Sudheer Singh"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1586342817,"creation_date":1586337729,"answer_id":61097321,"question_id":20142002,"body_markdown":"The simplest code would be like, keep your properties files into resources folder, either in src/main/resource or in src/test/resource. Then use below code to read properties files:\r\n\r\n    public class Utilities {\r\n        static {\r\n            rb1 = ResourceBundle.getBundle(&quot;fileNameWithoutExtension&quot;); \r\n                  // do not use .properties extension\r\n        }\r\n        public static String getConfigProperties(String keyString) {\r\n            return rb1.getString(keyString);\r\n        }\r\n    }","title":"java.util.MissingResourceException: Can&#39;t find bundle for base name &#39;property_file name&#39;, locale en_US","body":"<p>The simplest code would be like, keep your properties files into resources folder, either in src/main/resource or in src/test/resource. Then use below code to read properties files:</p>\n\n<pre><code>public class Utilities {\n    static {\n        rb1 = ResourceBundle.getBundle(\"fileNameWithoutExtension\"); \n              // do not use .properties extension\n    }\n    public static String getConfigProperties(String keyString) {\n        return rb1.getString(keyString);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8212780,"reputation":173,"user_id":6180243,"display_name":"iamfnizami"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632666825,"creation_date":1632666825,"answer_id":69335922,"question_id":20142002,"body_markdown":"You can try anyone with resources-\r\n\r\n    private static final String FILENAME = &quot;resources.skyscrapper&quot;;\r\n    private static final String FILENAME = &quot;resources/skyscrapper&quot;;\r\n    private static final String FILENAME = &quot;resources\\\\skyscrapper&quot;;\r\n    private static final String FILENAME = &quot;resources//skyscrapper&quot;;\r\n\r\nBy default it tries to find &#39;skyscrapper.properties&#39; file inside &#39;src&#39; but you have placed your file inside a sub-directory &#39;resources&#39; which is unreachable.\r\n\r\nIn a maven project-\r\n\r\nIt looks like- &#39;src/main/resources/skyscrapper.properties&#39; then\r\n   use-\r\n\r\n    private static final String FILENAME = &quot;skyscrapper&quot;;\r\n\r\nAnd if it looks like-\r\n   &#39;src/main/resources/prop/xyz/skyscrapper.properties&#39; then use-\r\n\r\n    private static final String FILENAME = &quot;prop/xyz/skyscrapper&quot;;\r\n    private static final String FILENAME = &quot;prop.xyz.skyscrapper&quot;;\r\n\r\nIn this case by default it tries to find &#39;skyscrapper.properties&#39; file inside &#39;src/main/resources&#39; but your file is actually inside a subdirectory of resources then you need to provide relative path otherwise you may receive exception like-\r\n\r\n    Exception in thread &quot;main&quot; java.util.MissingResourceException: Can&#39;t find bundle for base name src\\main\\resources\\prop\\xyz\\skyscrapper.","title":"java.util.MissingResourceException: Can&#39;t find bundle for base name &#39;property_file name&#39;, locale en_US","body":"<p>You can try anyone with resources-</p>\n<pre><code>private static final String FILENAME = &quot;resources.skyscrapper&quot;;\nprivate static final String FILENAME = &quot;resources/skyscrapper&quot;;\nprivate static final String FILENAME = &quot;resources\\\\skyscrapper&quot;;\nprivate static final String FILENAME = &quot;resources//skyscrapper&quot;;\n</code></pre>\n<p>By default it tries to find 'skyscrapper.properties' file inside 'src' but you have placed your file inside a sub-directory 'resources' which is unreachable.</p>\n<p>In a maven project-</p>\n<p>It looks like- 'src/main/resources/skyscrapper.properties' then\nuse-</p>\n<pre><code>private static final String FILENAME = &quot;skyscrapper&quot;;\n</code></pre>\n<p>And if it looks like-\n'src/main/resources/prop/xyz/skyscrapper.properties' then use-</p>\n<pre><code>private static final String FILENAME = &quot;prop/xyz/skyscrapper&quot;;\nprivate static final String FILENAME = &quot;prop.xyz.skyscrapper&quot;;\n</code></pre>\n<p>In this case by default it tries to find 'skyscrapper.properties' file inside 'src/main/resources' but your file is actually inside a subdirectory of resources then you need to provide relative path otherwise you may receive exception like-</p>\n<pre><code>Exception in thread &quot;main&quot; java.util.MissingResourceException: Can't find bundle for base name src\\main\\resources\\prop\\xyz\\skyscrapper.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7635211,"reputation":81,"user_id":5788964,"display_name":"Pekmezli D&#252;r&#252;m"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655808470,"creation_date":1655808470,"answer_id":72699445,"question_id":20142002,"body_markdown":"Check project build path. May be only the *.java files are included. This problem occured in my Maven project. I needed to alter my pom.xml file. \r\n\r\n    &lt;build&gt;\r\n    \t\t&lt;resources&gt;\r\n    \t\t\t&lt;resource&gt;\r\n    \t\t\t\t&lt;directory&gt;src/main/java&lt;/directory&gt;\r\n    \t\t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\r\n    \t\t\t\t&lt;includes&gt;\r\n    \t\t\t\t\t&lt;include&gt;**/*.properties&lt;/include&gt;\r\n    \t\t\t\t&lt;/includes&gt;\r\n    \t\t\t&lt;/resource&gt;\r\n    \t\t&lt;/resources&gt;\r\n    &lt;/build&gt;","title":"java.util.MissingResourceException: Can&#39;t find bundle for base name &#39;property_file name&#39;, locale en_US","body":"<p>Check project build path. May be only the *.java files are included. This problem occured in my Maven project. I needed to alter my pom.xml file.</p>\n<pre><code>&lt;build&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;src/main/java&lt;/directory&gt;\n                &lt;filtering&gt;true&lt;/filtering&gt;\n                &lt;includes&gt;\n                    &lt;include&gt;**/*.properties&lt;/include&gt;\n                &lt;/includes&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9281135,"reputation":817,"user_id":6892294,"display_name":"DocJ457"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660194670,"creation_date":1660194670,"answer_id":73315534,"question_id":20142002,"body_markdown":"if you are using maven try this: \r\n\r\n    public static Connection getConnection(){\r\n        //*******************************************************************\r\n        try(InputStream input = new FileInputStream(&quot;path to file&quot;)){\r\n            Properties prop = new Properties();\r\n            prop.load(input);\r\n            String driver = prop.getProperty(&quot;driver&quot;);\r\n            String url = prop.getProperty(&quot;url&quot;);\r\n            String user = prop.getProperty(&quot;user&quot;);\r\n            String password = prop.getProperty(&quot;password&quot;);\r\n            //Class.forName(driver);\r\n            connection = DriverManager.getConnection(url, user, password);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n\r\n        }\r\n\r\n        return connection;","title":"java.util.MissingResourceException: Can&#39;t find bundle for base name &#39;property_file name&#39;, locale en_US","body":"<p>if you are using maven try this:</p>\n<pre><code>public static Connection getConnection(){\n    //*******************************************************************\n    try(InputStream input = new FileInputStream(&quot;path to file&quot;)){\n        Properties prop = new Properties();\n        prop.load(input);\n        String driver = prop.getProperty(&quot;driver&quot;);\n        String url = prop.getProperty(&quot;url&quot;);\n        String user = prop.getProperty(&quot;user&quot;);\n        String password = prop.getProperty(&quot;password&quot;);\n        //Class.forName(driver);\n        connection = DriverManager.getConnection(url, user, password);\n    } catch (Exception e) {\n        e.printStackTrace();\n\n    }\n\n    return connection;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17363545,"reputation":21,"user_id":12579252,"display_name":"user12579252"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691971944,"creation_date":1691971069,"answer_id":76895656,"question_id":20142002,"body_markdown":"I had the same problem, but when I moved two (name. properties or name.config) files to **&quot;NetBeansProjects\\projectName\\target\\classes&quot;**, I mean locate your properties file or config file in **target\\classes** directory in your project director, because once it&#39;s compiled one copy goes there so if you put early it&#39;s working. I am using Netbean Apache IDE 14. \r\nfor you it should be in **PBSkyScraper\\build\\skyscrapper.properties** directory. ","title":"java.util.MissingResourceException: Can&#39;t find bundle for base name &#39;property_file name&#39;, locale en_US","body":"<p>I had the same problem, but when I moved two (name. properties or name.config) files to <strong>&quot;NetBeansProjects\\projectName\\target\\classes&quot;</strong>, I mean locate your properties file or config file in <strong>target\\classes</strong> directory in your project director, because once it's compiled one copy goes there so if you put early it's working. I am using Netbean Apache IDE 14.\nfor you it should be in <strong>PBSkyScraper\\build\\skyscrapper.properties</strong> directory.</p>\n"},{"tags":[],"owner":{"account_id":2043806,"reputation":4771,"user_id":2118777,"display_name":"Pipo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700753043,"creation_date":1700753043,"answer_id":77538009,"question_id":20142002,"body_markdown":"In my particular case of injected AppContext and in a @PostConstruct context I had to add `@LocalBean` for the init() method to work and find the bundle\r\n\r\n    @Singleton(name = &quot;AppContext&quot;)\r\n    @Startup\r\n    @LocalBean\r\n    public class AppContext {\r\n\r\n        @PostConstruct\r\n        public void init() {\r\n            ResourceBundle resources = ResourceBundle.getBundle(&quot;propertiesFileNameWithoutExtension&quot;);\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    @RequestScoped\r\n    class Foo {\r\n\r\n        @Inject\r\n        protected AppContext appContext;\r\n        \r\n        ...\r\n    }","title":"java.util.MissingResourceException: Can&#39;t find bundle for base name &#39;property_file name&#39;, locale en_US","body":"<p>In my particular case of injected AppContext and in a @PostConstruct context I had to add <code>@LocalBean</code> for the init() method to work and find the bundle</p>\n<pre><code>@Singleton(name = &quot;AppContext&quot;)\n@Startup\n@LocalBean\npublic class AppContext {\n\n    @PostConstruct\n    public void init() {\n        ResourceBundle resources = ResourceBundle.getBundle(&quot;propertiesFileNameWithoutExtension&quot;);\n    }\n    \n}\n\n\n@RequestScoped\nclass Foo {\n\n    @Inject\n    protected AppContext appContext;\n    \n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":1587261,"reputation":9583,"user_id":1471314,"accept_rate":43,"display_name":"roger_that"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":251402,"favorite_count":0,"down_vote_count":0,"up_vote_count":45,"accepted_answer_id":20142626,"answer_count":14,"score":45,"last_activity_date":1700753043,"creation_date":1385114481,"question_id":20142002,"body_markdown":"I am trying to create a utility class `ReadPropertyUtil.java` for reading data from property file. While my class is located under a util directory , my `skyscrapper.properties` file is placed in some other directory.\r\n\r\nBut , when i try to access the properties using `[ResourceBundle][1]`, i get exceptions, that bundle can&#39;t be loaded.\r\n\r\nBelow is the code on how I am reading the properties and also an image which shows my directory structure.\r\n\r\n**ReadPropertiesUtil.java**\r\n    \r\n    /**\r\n     * Properties file name.\r\n     */\r\n    private static final String FILENAME = &quot;skyscrapper&quot;;\r\n\r\n    /**\r\n     * Resource bundle.\r\n     */\r\n    private static ResourceBundle resourceBundle = ResourceBundle.getBundle(FILENAME);\r\n    \r\n    /**\r\n     * Method to read the property value.\r\n     * \r\n     * @param key\r\n     * @return\r\n     */\r\n    public static String getProperty(final String key) {\r\n        String str = null;\r\n        if (resourceBundle != null) {\r\n            str = resourceBundle.getString(key);\r\n                LOGGER.debug(&quot;Value found: &quot; + str + &quot; for key: &quot; + key);\r\n        } else {\r\n                LOGGER.debug(&quot;Properties file was not loaded correctly!!&quot;);\r\n        }\r\n        return str;\r\n    }\r\n\r\n**Directory Structure**\r\n\r\n![enter image description here][2]\r\n\r\n\r\n\r\nThis line is giving the error `private static ResourceBundle resourceBundle = ResourceBundle.getBundle(FILENAME);`\r\n\r\nI am unable to understand why isn&#39;t this working and what is the solution. The `src` folder is already added in build path completely.\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html\r\n  [2]: http://i.stack.imgur.com/ACdp4.png","title":"java.util.MissingResourceException: Can&#39;t find bundle for base name &#39;property_file name&#39;, locale en_US","body":"<p>I am trying to create a utility class <code>ReadPropertyUtil.java</code> for reading data from property file. While my class is located under a util directory , my <code>skyscrapper.properties</code> file is placed in some other directory.</p>\n\n<p>But , when i try to access the properties using <code>[ResourceBundle][1]</code>, i get exceptions, that bundle can't be loaded.</p>\n\n<p>Below is the code on how I am reading the properties and also an image which shows my directory structure.</p>\n\n<p><strong>ReadPropertiesUtil.java</strong></p>\n\n<pre><code>/**\n * Properties file name.\n */\nprivate static final String FILENAME = \"skyscrapper\";\n\n/**\n * Resource bundle.\n */\nprivate static ResourceBundle resourceBundle = ResourceBundle.getBundle(FILENAME);\n\n/**\n * Method to read the property value.\n * \n * @param key\n * @return\n */\npublic static String getProperty(final String key) {\n    String str = null;\n    if (resourceBundle != null) {\n        str = resourceBundle.getString(key);\n            LOGGER.debug(\"Value found: \" + str + \" for key: \" + key);\n    } else {\n            LOGGER.debug(\"Properties file was not loaded correctly!!\");\n    }\n    return str;\n}\n</code></pre>\n\n<p><strong>Directory Structure</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/ACdp4.png\" alt=\"enter image description here\"></p>\n\n<p>This line is giving the error <code>private static ResourceBundle resourceBundle = ResourceBundle.getBundle(FILENAME);</code></p>\n\n<p>I am unable to understand why isn't this working and what is the solution. The <code>src</code> folder is already added in build path completely.</p>\n"},{"tags":["java","android","android-ndk","java-native-interface"],"answers":[{"comments":[{"owner":{"account_id":124026,"reputation":5244,"user_id":318857,"accept_rate":68,"display_name":"fluffy"},"score":0,"creation_date":1416354170,"post_id":27005751,"comment_id":42541591,"body_markdown":"I&#39;m not looking for the C++ method signature, and anyway that&#39;s even more roundabout than using `javap -s`. What I want is to be able to get the JNI method signature string programmatically *from inside a running program*. I&#39;ll update my question to clarify.","body":"I&#39;m not looking for the C++ method signature, and anyway that&#39;s even more roundabout than using <code>javap -s</code>. What I want is to be able to get the JNI method signature string programmatically <i>from inside a running program</i>. I&#39;ll update my question to clarify."},{"owner":{"account_id":124026,"reputation":5244,"user_id":318857,"accept_rate":68,"display_name":"fluffy"},"score":0,"creation_date":1416354578,"post_id":27005751,"comment_id":42541728,"body_markdown":"Also, to clarify further, by &quot;JNI method signature&quot; I mean the signature used to call a Java method from JNI, not the signature used to implement a native method to make it Java-callable.","body":"Also, to clarify further, by &quot;JNI method signature&quot; I mean the signature used to call a Java method from JNI, not the signature used to implement a native method to make it Java-callable."},{"owner":{"account_id":2592553,"reputation":463,"user_id":2246932,"display_name":"Domin"},"score":0,"creation_date":1416398007,"post_id":27005751,"comment_id":42557670,"body_markdown":"I understood that you were looking for this:","body":"I understood that you were looking for this:"},{"owner":{"account_id":2592553,"reputation":463,"user_id":2246932,"display_name":"Domin"},"score":0,"creation_date":1416398342,"post_id":27005751,"comment_id":42557886,"body_markdown":"I understood that you were looking for this: `(II)Z`. This is the signature for a method that receives two integer as parameter and returns a boolean. I did not find the way to get that signature at runtime except creating my own Method parser. But javah utility creates a C header file which includes those signatures for the `native` methods declared on it.","body":"I understood that you were looking for this: <code>(II)Z</code>. This is the signature for a method that receives two integer as parameter and returns a boolean. I did not find the way to get that signature at runtime except creating my own Method parser. But javah utility creates a C header file which includes those signatures for the <code>native</code> methods declared on it."},{"owner":{"account_id":2592553,"reputation":463,"user_id":2246932,"display_name":"Domin"},"score":0,"creation_date":1416398439,"post_id":27005751,"comment_id":42557948,"body_markdown":"javah generates the following documentation for every method: `/*\n * Class:     com_foo_mypackge\n * Method:    myJniMehod\n * Signature: (II)Z\n */`","body":"javah generates the following documentation for every method: <code>&#47;*  * Class:     com_foo_mypackge  * Method:    myJniMehod  * Signature: (II)Z  *&#47;</code>"},{"owner":{"account_id":124026,"reputation":5244,"user_id":318857,"accept_rate":68,"display_name":"fluffy"},"score":0,"creation_date":1416418073,"post_id":27005751,"comment_id":42570219,"body_markdown":"Yes, but that&#39;s still not useful to me. I need to get it on-the-fly from any arbitrary Java class.","body":"Yes, but that&#39;s still not useful to me. I need to get it on-the-fly from any arbitrary Java class."}],"tags":[],"owner":{"account_id":2592553,"reputation":463,"user_id":2246932,"display_name":"Domin"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1416351463,"creation_date":1416351463,"answer_id":27005751,"question_id":27005501,"body_markdown":"I had the same problem and I don&#39;t find a &quot;clean&quot; solution.\r\n\r\nFinally, I decided to create a dummy class with same methods but declared as native.\r\nThen I use javah to create the header file and I take the signature from that header file. \r\n\r\nI know that it does not look nice... but I don&#39;t find a better option (except creating it &quot;manually&quot; based on the Method properties).\r\n","title":"How to get JNI-style signature string for a field or method?","body":"<p>I had the same problem and I don't find a \"clean\" solution.</p>\n\n<p>Finally, I decided to create a dummy class with same methods but declared as native.\nThen I use javah to create the header file and I take the signature from that header file. </p>\n\n<p>I know that it does not look nice... but I don't find a better option (except creating it \"manually\" based on the Method properties).</p>\n"},{"tags":[],"owner":{"account_id":447650,"reputation":734,"user_id":841390,"display_name":"astraujums"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700753034,"creation_date":1700753034,"answer_id":77538008,"question_id":27005501,"body_markdown":"I had a similar need and found a solution by digging through `JavapTask.java` from the [source code][1] of the `javap` tool.\r\n\r\nHere is a snippet that does what you want:\r\n\r\n``` lang-java\r\npublic class Test {\r\n    String foo(int bar) { return &quot;This is foo &quot; + bar; }\r\n\r\n    public static void main(String[] args) {\r\n        Class&lt;?&gt; c = Test.class;\r\n        java.lang.reflect.Method methods[] = c.getDeclaredMethods();\r\n        System.out.println(&quot;Class : &quot; + c.getName());\r\n        System.out.println(&quot;Number of methods : &quot; + methods.length);\r\n        for (java.lang.reflect.Method m : methods) {\r\n            java.lang.invoke.MethodType mt = java.lang.invoke.MethodType.methodType(m.getReturnType(), m.getParameterTypes());\r\n            System.out.println(m.getName() + &quot; : &quot; + mt.toMethodDescriptorString());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIt prints out the following:\r\n```\r\nClass : Test\r\nNumber of methods : 2\r\nmain : ([Ljava/lang/String;)V\r\nfoo : (I)Ljava/lang/String;\r\n```\r\n\r\n  [1]: https://github.com/openjdk/jdk/tree/3787ff8d1d8dbcaaebb9616c5bc543e2fe21a90c/src/jdk.jdeps/share/classes/com/sun/tools/javap","title":"How to get JNI-style signature string for a field or method?","body":"<p>I had a similar need and found a solution by digging through <code>JavapTask.java</code> from the <a href=\"https://github.com/openjdk/jdk/tree/3787ff8d1d8dbcaaebb9616c5bc543e2fe21a90c/src/jdk.jdeps/share/classes/com/sun/tools/javap\" rel=\"nofollow noreferrer\">source code</a> of the <code>javap</code> tool.</p>\n<p>Here is a snippet that does what you want:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Test {\n    String foo(int bar) { return &quot;This is foo &quot; + bar; }\n\n    public static void main(String[] args) {\n        Class&lt;?&gt; c = Test.class;\n        java.lang.reflect.Method methods[] = c.getDeclaredMethods();\n        System.out.println(&quot;Class : &quot; + c.getName());\n        System.out.println(&quot;Number of methods : &quot; + methods.length);\n        for (java.lang.reflect.Method m : methods) {\n            java.lang.invoke.MethodType mt = java.lang.invoke.MethodType.methodType(m.getReturnType(), m.getParameterTypes());\n            System.out.println(m.getName() + &quot; : &quot; + mt.toMethodDescriptorString());\n        }\n    }\n}\n</code></pre>\n<p>It prints out the following:</p>\n<pre><code>Class : Test\nNumber of methods : 2\nmain : ([Ljava/lang/String;)V\nfoo : (I)Ljava/lang/String;\n</code></pre>\n"}],"owner":{"account_id":124026,"reputation":5244,"user_id":318857,"accept_rate":68,"display_name":"fluffy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2284,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77538008,"answer_count":2,"score":2,"last_activity_date":1700753034,"creation_date":1416350305,"question_id":27005501,"body_markdown":"I am trying to inspect a Java class and automatically retrieve all of its methods and fields in a way that I can invoke them via JNI on Android. However, I can&#39;t figure out how to actually get the textual signature string programmatically; I know how to get it via `javap -s` from the command line but I would like to get it from within my program.\r\n\r\nThe closest I can find is using `clazz.getMethods()` to get the individual methods, and then `Method.toGenericString()` to get a human-readable string, but that string is formatted like the Java code signature (e.g. `public int someMethod(int foo, java.lang.String bar)`) when I really just want the JNI-style signature (e.g. `(ILjava/lang/String;)I`), as I will need that string to call `getMethodID()` from JNI and I already have a perfectly-good parser that parses those JNI signatures in the first place.\r\n\r\nI could just manually maintain bindings for the classes I actually care about accessing from JNI, but I&#39;d much rather just have everything handled as automatically as possible; less code is better, after all.\r\n\r\nI did find [ASM](asm.ow2.org) which provides helper methods for this, but it appears to be a bytecode generation framework and I am not sure if it will be compatible with Android.\r\n\r\nOr, in other words, given the following class:\r\n\r\n    class SomeClass {\r\n        String foo(int bar) { return &quot;This is foo &quot; + bar; }\r\n    }\r\n\r\nI want to create a class called `ClassInspector` which can do something like:\r\n\r\n    ClassInspector ci = new ClassInspector(SomeClass.class);\r\n    int n = ci.getMethodCount(); // returns 1\r\n    String name = ci.getMethodName(0); // returns &quot;foo&quot;\r\n    String sig = ci.getMethodSignature(0); // returns &quot;(I)Ljava/lang/string;&quot;\r\n\r\nWhich is to say that I want to be able to get the output of `javap -s` from within Java, so that I can call Java methods from the native side.","title":"How to get JNI-style signature string for a field or method?","body":"<p>I am trying to inspect a Java class and automatically retrieve all of its methods and fields in a way that I can invoke them via JNI on Android. However, I can't figure out how to actually get the textual signature string programmatically; I know how to get it via <code>javap -s</code> from the command line but I would like to get it from within my program.</p>\n\n<p>The closest I can find is using <code>clazz.getMethods()</code> to get the individual methods, and then <code>Method.toGenericString()</code> to get a human-readable string, but that string is formatted like the Java code signature (e.g. <code>public int someMethod(int foo, java.lang.String bar)</code>) when I really just want the JNI-style signature (e.g. <code>(ILjava/lang/String;)I</code>), as I will need that string to call <code>getMethodID()</code> from JNI and I already have a perfectly-good parser that parses those JNI signatures in the first place.</p>\n\n<p>I could just manually maintain bindings for the classes I actually care about accessing from JNI, but I'd much rather just have everything handled as automatically as possible; less code is better, after all.</p>\n\n<p>I did find ASM which provides helper methods for this, but it appears to be a bytecode generation framework and I am not sure if it will be compatible with Android.</p>\n\n<p>Or, in other words, given the following class:</p>\n\n<pre><code>class SomeClass {\n    String foo(int bar) { return \"This is foo \" + bar; }\n}\n</code></pre>\n\n<p>I want to create a class called <code>ClassInspector</code> which can do something like:</p>\n\n<pre><code>ClassInspector ci = new ClassInspector(SomeClass.class);\nint n = ci.getMethodCount(); // returns 1\nString name = ci.getMethodName(0); // returns \"foo\"\nString sig = ci.getMethodSignature(0); // returns \"(I)Ljava/lang/string;\"\n</code></pre>\n\n<p>Which is to say that I want to be able to get the output of <code>javap -s</code> from within Java, so that I can call Java methods from the native side.</p>\n"},{"tags":["java","minecraft","bukkit","spigot"],"comments":[{"owner":{"account_id":10503317,"reputation":51,"user_id":7741366,"display_name":"Cx Vercility"},"score":0,"creation_date":1700752513,"post_id":77537516,"comment_id":136695205,"body_markdown":"That would heavily depend on your definition of &quot;between&quot;. A straight line would probably yield no entity 99.9% of the time.\nIn any case, there are commands e.g to get all entities in a radius of a specific location. I&#39;d assume there are other command that take different restrictions, you&#39;ll have to google them yourselves though.","body":"That would heavily depend on your definition of &quot;between&quot;. A straight line would probably yield no entity 99.9% of the time. In any case, there are commands e.g to get all entities in a radius of a specific location. I&#39;d assume there are other command that take different restrictions, you&#39;ll have to google them yourselves though."},{"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1702066975,"post_id":77537516,"comment_id":136856158,"body_markdown":"What are you trying to achieve? Are you trying to get the closest entity to the player?","body":"What are you trying to achieve? Are you trying to get the closest entity to the player?"}],"owner":{"account_id":29975695,"reputation":1,"user_id":22971977,"display_name":"vitekform"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1700752890,"creation_date":1700748233,"question_id":77537516,"body_markdown":"```\r\nVMPlugin plugin = VMPlugin.getPlugin(VMPlugin.class);\r\nLocation target = p.getTargetBlock(null, 5).getLocation();\r\nWorld world = target.getWorld();\r\nLocation ploc = p.getLocation();\r\nEntity[] entities = //Entities between ploc and target (edit : straight line and everything up to 0.25 blocks away from it)\r\n```\r\n\r\nI tried Vector, but I don&#39;t know how to use it well.\r\n                    \r\nAlso if it is possible I would like to get only the first entity (If the EntityArray will work i will use just entities[0]).","title":"How to get every entity between two locations","body":"<pre><code>VMPlugin plugin = VMPlugin.getPlugin(VMPlugin.class);\nLocation target = p.getTargetBlock(null, 5).getLocation();\nWorld world = target.getWorld();\nLocation ploc = p.getLocation();\nEntity[] entities = //Entities between ploc and target (edit : straight line and everything up to 0.25 blocks away from it)\n</code></pre>\n<p>I tried Vector, but I don't know how to use it well.</p>\n<p>Also if it is possible I would like to get only the first entity (If the EntityArray will work i will use just entities[0]).</p>\n"},{"tags":["java","spring-boot","jackson"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1700728262,"post_id":77535330,"comment_id":136690666,"body_markdown":"Well you&#39;ve explicitly annotated the class with `@JsonFormat(shape = JsonFormat.Shape.ARRAY)`. How would you expect the field names to be expressed in an array?","body":"Well you&#39;ve explicitly annotated the class with <code>@JsonFormat(shape = JsonFormat.Shape.ARRAY)</code>. How would you expect the field names to be expressed in an array?"},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1700728368,"post_id":77535330,"comment_id":136690685,"body_markdown":"the original 3rd party API response I was tryxing to map to java objects looks exactly like my controllers response. The original 3rd party api response has no field names, but I need field names thats why I am trying to map in the first place.","body":"the original 3rd party API response I was tryxing to map to java objects looks exactly like my controllers response. The original 3rd party api response has no field names, but I need field names thats why I am trying to map in the first place."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1700728510,"post_id":77535330,"comment_id":136690719,"body_markdown":"Okay, it&#39;s really not clear from the question that you&#39;re trying to change the shape of the JSON. it would help if you&#39;d provide a *minimal* example, with the incoming JSON and the expected resulting JSON *in text* rather than as an image. I suspect you may need to have two different classes: one with an array shape and one with an object shape.","body":"Okay, it&#39;s really not clear from the question that you&#39;re trying to change the shape of the JSON. it would help if you&#39;d provide a <i>minimal</i> example, with the incoming JSON and the expected resulting JSON <i>in text</i> rather than as an image. I suspect you may need to have two different classes: one with an array shape and one with an object shape."},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1700751935,"post_id":77535330,"comment_id":136695093,"body_markdown":"what is weird for me is that basically after mapping to my pojo, logging the pojo.toString() everything looks correct. Only my RestControllers response List&lt;myPojo&gt; returns an array containing multiple arrays without field names still instead of the pojo structure.","body":"what is weird for me is that basically after mapping to my pojo, logging the pojo.toString() everything looks correct. Only my RestControllers response List&lt;myPojo&gt; returns an array containing multiple arrays without field names still instead of the pojo structure."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1700752443,"post_id":77535330,"comment_id":136695192,"body_markdown":"Well yes, because presumably `pojo.toString()` isn&#39;t taking account of the `@JsonFormat` you&#39;ve got declared, but your controller is. That doesn&#39;t surprise me at all.","body":"Well yes, because presumably <code>pojo.toString()</code> isn&#39;t taking account of the <code>@JsonFormat</code> you&#39;ve got declared, but your controller is. That doesn&#39;t surprise me at all."},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1700752604,"post_id":77535330,"comment_id":136695223,"body_markdown":"I dont understand unfortunatly","body":"I dont understand unfortunatly"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1700753020,"post_id":77535330,"comment_id":136695307,"body_markdown":"Your `Kline` class *specifically* is annotated with `@JsonFormat(shape = JsonFormat.Shape.ARRAY)`. I believe that means &quot;Hey, JSON formatter - please serialize instances of this type as arrays rather than objects.&quot; Do you understand that much? (It&#39;s likely you need that in order to parse the incoming JSON - but if you want to format outgoing JSON in a different way, my guess is you&#39;ll need a different class that doesn&#39;t have that annotation...)","body":"Your <code>Kline</code> class <i>specifically</i> is annotated with <code>@JsonFormat(shape = JsonFormat.Shape.ARRAY)</code>. I believe that means &quot;Hey, JSON formatter - please serialize instances of this type as arrays rather than objects.&quot; Do you understand that much? (It&#39;s likely you need that in order to parse the incoming JSON - but if you want to format outgoing JSON in a different way, my guess is you&#39;ll need a different class that doesn&#39;t have that annotation...)"},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1700753169,"post_id":77535330,"comment_id":136695332,"body_markdown":"Ah yes I was not too sure about that. In fact, whenever I left out that annotation I got an error trying to map the incoming JSON thats why I thought it is  correct to leave that on.  So basically I need a class like PojoResponse and map that to Pojo without array annotation?","body":"Ah yes I was not too sure about that. In fact, whenever I left out that annotation I got an error trying to map the incoming JSON thats why I thought it is  correct to leave that on.  So basically I need a class like PojoResponse and map that to Pojo without array annotation?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1700753303,"post_id":77535330,"comment_id":136695356,"body_markdown":"I don&#39;t know what you mean by PojoResponse here, but as I said 6 hours ago: &quot;I suspect you may need to have two different classes: one with an array shape and one with an object shape.&quot; Either that, or you&#39;ll need a different way of influencing the parser/formatter. I don&#39;t know the details of JSON in Java, but at least hopefully you now understand what&#39;s going on.","body":"I don&#39;t know what you mean by PojoResponse here, but as I said 6 hours ago: &quot;I suspect you may need to have two different classes: one with an array shape and one with an object shape.&quot; Either that, or you&#39;ll need a different way of influencing the parser/formatter. I don&#39;t know the details of JSON in Java, but at least hopefully you now understand what&#39;s going on."},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1700753374,"post_id":77535330,"comment_id":136695368,"body_markdown":"Yes I understand what you mean, will try to come up with a way and try out","body":"Yes I understand what you mean, will try to come up with a way and try out"}],"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700752677,"creation_date":1700727878,"question_id":77535330,"body_markdown":"I am parsing a 3rd party API Response into a custom class I made which seems to work fine. However, the JSON response from my own controller does not contain any field names of these objects. In code, the getters and setters work, but the JSON response is just an array of arrays like the original 3rd party API response I was trying to map.\r\n\r\nHere is the service method where I parse to my custom java object class\r\n\r\n        public List&lt;Kline&gt;klines(String symbol, String interval) {\r\n        try {\r\n            LinkedHashMap&lt;String, Object&gt; parameters = new LinkedHashMap&lt;&gt;();\r\n            parameters.put(&quot;symbol&quot;, symbol);\r\n            parameters.put(&quot;interval&quot;, interval);\r\n            String result = client.createMarket().klines(parameters);\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n            return objectMapper.readValue(result, new TypeReference&lt;List&lt;Kline&gt;&gt;() { });\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n    }\r\n\r\n\r\nHere is the custom class I am trying to map the original 3rd party API response to\r\n\r\n    \r\n    @GetMapping(&quot;/klines&quot;)\r\n    public List&lt;Kline&gt; klines() {\r\n        return service.klines(&quot;BTCUSDT&quot;, &quot;1h&quot;);\r\n    }\r\n\r\n[![My Controllers JSON Response - no field names][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kHe3j.png\r\n\r\n\r\nMy Pojo Class\r\n\r\n    \r\n    @Data\r\n    @JsonFormat(shape = JsonFormat.Shape.ARRAY)\r\n    @JsonPropertyOrder({ &quot;openTime&quot;, &quot;open&quot;, &quot;high&quot;, &quot;low&quot;, &quot;close&quot;, \r\n    &quot;volume&quot;, &quot;closeTime&quot;, &quot;quoteAssetVolume&quot;,\r\n        &quot;numberOfTrades&quot;, &quot;takerBuyBaseAssetVolume&quot;, \r\n    &quot;takerBuyQuoteAssetVolume&quot; })\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class Kline {\r\n\r\n    private Long openTime;\r\n\r\n    private double open;\r\n\r\n    private double high;\r\n\r\n    private double low;\r\n\r\n    private double close;\r\n\r\n    private double volume;\r\n\r\n    private Long closeTime;\r\n\r\n    private double quoteAssetVolume;\r\n\r\n    private int numberOfTrades;\r\n\r\n    private double takerBuyBaseAssetVolume;\r\n\r\n    private double takerBuyQuoteAssetVolume;\r\n\r\n    }","title":"JSON Response not holding field names of java object","body":"<p>I am parsing a 3rd party API Response into a custom class I made which seems to work fine. However, the JSON response from my own controller does not contain any field names of these objects. In code, the getters and setters work, but the JSON response is just an array of arrays like the original 3rd party API response I was trying to map.</p>\n<p>Here is the service method where I parse to my custom java object class</p>\n<pre><code>    public List&lt;Kline&gt;klines(String symbol, String interval) {\n    try {\n        LinkedHashMap&lt;String, Object&gt; parameters = new LinkedHashMap&lt;&gt;();\n        parameters.put(&quot;symbol&quot;, symbol);\n        parameters.put(&quot;interval&quot;, interval);\n        String result = client.createMarket().klines(parameters);\n        ObjectMapper objectMapper = new ObjectMapper();\n        return objectMapper.readValue(result, new TypeReference&lt;List&lt;Kline&gt;&gt;() { });\n    } catch (Exception e) {\n        e.printStackTrace();\n        return null;\n    }\n}\n</code></pre>\n<p>Here is the custom class I am trying to map the original 3rd party API response to</p>\n<pre><code>@GetMapping(&quot;/klines&quot;)\npublic List&lt;Kline&gt; klines() {\n    return service.klines(&quot;BTCUSDT&quot;, &quot;1h&quot;);\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/kHe3j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kHe3j.png\" alt=\"My Controllers JSON Response - no field names\" /></a></p>\n<p>My Pojo Class</p>\n<pre><code>@Data\n@JsonFormat(shape = JsonFormat.Shape.ARRAY)\n@JsonPropertyOrder({ &quot;openTime&quot;, &quot;open&quot;, &quot;high&quot;, &quot;low&quot;, &quot;close&quot;, \n&quot;volume&quot;, &quot;closeTime&quot;, &quot;quoteAssetVolume&quot;,\n    &quot;numberOfTrades&quot;, &quot;takerBuyBaseAssetVolume&quot;, \n&quot;takerBuyQuoteAssetVolume&quot; })\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class Kline {\n\nprivate Long openTime;\n\nprivate double open;\n\nprivate double high;\n\nprivate double low;\n\nprivate double close;\n\nprivate double volume;\n\nprivate Long closeTime;\n\nprivate double quoteAssetVolume;\n\nprivate int numberOfTrades;\n\nprivate double takerBuyBaseAssetVolume;\n\nprivate double takerBuyQuoteAssetVolume;\n\n}\n</code></pre>\n"},{"tags":["java","unit-testing","apache-kafka-streams"],"owner":{"account_id":2040244,"reputation":93,"user_id":1821635,"display_name":"paulf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700752632,"creation_date":1700752632,"question_id":77537967,"body_markdown":"It&#39;s been a year or two since I&#39;ve written Streams apps, and I see that some API cleanup has happened, notably here, that ValueTransformers have been deprecated in favor of FixedKeyProcessors. But searching around, I&#39;ve not found the magic class that would perform like the other MockProcessorContexts (used in Processor or Transformer). Am I supposed to mockito my own here? Or can I use a richer mock from the library? (I&#39;m using version 3.5.0)","title":"Where is the MockProcessorContext for unit testing FixedKeyProcessors in Kafka Streams?","body":"<p>It's been a year or two since I've written Streams apps, and I see that some API cleanup has happened, notably here, that ValueTransformers have been deprecated in favor of FixedKeyProcessors. But searching around, I've not found the magic class that would perform like the other MockProcessorContexts (used in Processor or Transformer). Am I supposed to mockito my own here? Or can I use a richer mock from the library? (I'm using version 3.5.0)</p>\n"},{"tags":["java","apache-commons-math","symja"],"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1689758736,"post_id":76719752,"comment_id":135257373,"body_markdown":"One idea might be https://products.wolframalpha.com/api (I&#39;ve never used it myself)","body":"One idea might be <a href=\"https://products.wolframalpha.com/api\" rel=\"nofollow noreferrer\">products.wolframalpha.com/api</a> (I&#39;ve never used it myself)"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1689759517,"post_id":76719752,"comment_id":135257541,"body_markdown":"Nothing native within the framework.  You can try an open sourced project; _https://github.com/yeko0990/MathSolver_.","body":"Nothing native within the framework.  You can try an open sourced project; <i><a href=\"https://github.com/yeko0990/MathSolver\" rel=\"nofollow noreferrer\">github.com/yeko0990/MathSolver</a></i>."}],"answers":[{"tags":[],"owner":{"account_id":12562,"reputation":958,"user_id":24819,"display_name":"axelclk"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1700752254,"creation_date":1700752254,"answer_id":77537930,"question_id":76719752,"body_markdown":"In [Symja][1] you can write:\r\n\r\n    import org.matheclipse.core.eval.ExprEvaluator;\r\n    import org.matheclipse.core.expression.F;\r\n    import org.matheclipse.core.interfaces.IExpr;\r\n    import org.matheclipse.core.interfaces.ISymbol;\r\n    \r\n    public class SolveExample {\r\n    \r\n      public static void main(String[] args) {\r\n    \r\n        ExprEvaluator util = new ExprEvaluator();\r\n        IExpr result = util.eval(&quot;Solve(x +(23 + 78 ) == (32112 / 432),x)&quot;);\r\n        // print: {{x-&gt;-80/3}}\r\n        System.out.println(result.toString());\r\n    \r\n        ISymbol x = F.Dummy(&#39;x&#39;);\r\n        result = util.eval(F.Solve(F.Equal(F.Plus(x, F.ZZ(23L), F.ZZ(78L)), F.QQ(32112L, 432L)), x));\r\n        // print: {{x-&gt;-80/3}}\r\n        System.out.println(result.toString());\r\n      }\r\n    }\r\n\r\n\r\n  [1]: https://github.com/axkr/symja_android_library","title":"Java Equation Evaluation","body":"<p>In <a href=\"https://github.com/axkr/symja_android_library\" rel=\"nofollow noreferrer\">Symja</a> you can write:</p>\n<pre><code>import org.matheclipse.core.eval.ExprEvaluator;\nimport org.matheclipse.core.expression.F;\nimport org.matheclipse.core.interfaces.IExpr;\nimport org.matheclipse.core.interfaces.ISymbol;\n\npublic class SolveExample {\n\n  public static void main(String[] args) {\n\n    ExprEvaluator util = new ExprEvaluator();\n    IExpr result = util.eval(&quot;Solve(x +(23 + 78 ) == (32112 / 432),x)&quot;);\n    // print: {{x-&gt;-80/3}}\n    System.out.println(result.toString());\n\n    ISymbol x = F.Dummy('x');\n    result = util.eval(F.Solve(F.Equal(F.Plus(x, F.ZZ(23L), F.ZZ(78L)), F.QQ(32112L, 432L)), x));\n    // print: {{x-&gt;-80/3}}\n    System.out.println(result.toString());\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":7183667,"reputation":333,"user_id":5486546,"display_name":"Sameesh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1700752254,"creation_date":1689758426,"question_id":76719752,"body_markdown":"I have string equation like \r\n```\r\nx +(23 + 78 ) = (32112 / 432)\r\n```\r\nand inputting this equation I need to get the value of &#39;x&#39; programmatically, also equation might be different in different times, but it will only have one variable, and I need this variable value computed. Is there any Java library available for the above requirement? if exist please provide one sample also. ","title":"Java Equation Evaluation","body":"<p>I have string equation like</p>\n<pre><code>x +(23 + 78 ) = (32112 / 432)\n</code></pre>\n<p>and inputting this equation I need to get the value of 'x' programmatically, also equation might be different in different times, but it will only have one variable, and I need this variable value computed. Is there any Java library available for the above requirement? if exist please provide one sample also.</p>\n"},{"tags":["java","hadoop","mapreduce"],"answers":[{"comments":[{"owner":{"account_id":14263385,"reputation":46,"user_id":10303384,"display_name":"Kinyanjui Karanja"},"score":0,"creation_date":1700887454,"post_id":77537916,"comment_id":136710172,"body_markdown":"I populate the set and map inside the values loop and the conditional turns true. The output is written correctly if I don&#39;t comment out the write inside the values loop, without any other change","body":"I populate the set and map inside the values loop and the conditional turns true. The output is written correctly if I don&#39;t comment out the write inside the values loop, without any other change"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1700990388,"post_id":77537916,"comment_id":136717626,"body_markdown":"In the code provided, no, you don&#39;t.  Please edit your question to include your exact code without &quot;...&quot;. Plus, unclear why you need both a map and a set. A map cannot have duplicate keys, so there&#39;s no reason to use a set to test for this","body":"In the code provided, no, you don&#39;t.  Please edit your question to include your exact code without &quot;...&quot;. Plus, unclear why you need both a map and a set. A map cannot have duplicate keys, so there&#39;s no reason to use a set to test for this"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700752144,"creation_date":1700752144,"answer_id":77537916,"question_id":77537089,"body_markdown":"Unclear what you expected since, with the code shown, the set and map are both empty and your conditional is false\r\n\r\nReducers are stateless and do not share data between all instances\r\n\r\nIterate over values, not try to use a new, empty set or map. Or add data to either, rather than write the context, then iterate them (for example, to output unique values) ","title":"My hadoop reducer writes the output to the context only if I write the original value to the context","body":"<p>Unclear what you expected since, with the code shown, the set and map are both empty and your conditional is false</p>\n<p>Reducers are stateless and do not share data between all instances</p>\n<p>Iterate over values, not try to use a new, empty set or map. Or add data to either, rather than write the context, then iterate them (for example, to output unique values)</p>\n"}],"owner":{"account_id":14263385,"reputation":46,"user_id":10303384,"display_name":"Kinyanjui Karanja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700752144,"creation_date":1700744431,"question_id":77537089,"body_markdown":"I have this code:\r\n\r\n``` java\r\n@Override\r\nprotected void reduce(Text key, Iterable&lt;Text&gt; values, Context context)\r\n                throws IOException, InterruptedException {\r\n    Set&lt;String&gt; mySet = new HashSet&lt;&gt;();\r\n    Map&lt;String, String myMap = new HashMap&lt;&gt;();\r\n    for (Text value : values) {\r\n        // context.write(key, value);\r\n        ... \r\n    }\r\n    for (String str : mySet) {\r\n        if(myMap.containsKey(str)){\r\n            outputValue.set(str + myMap.get(str));\r\n            context.write(key, outputValue);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIf I uncomment the commented line, the output is written as well as each input value. However, when I comment the line, the output is not written. What could be the issue?\r\n\r\nI only want the output to be written to context.","title":"My hadoop reducer writes the output to the context only if I write the original value to the context","body":"<p>I have this code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\nprotected void reduce(Text key, Iterable&lt;Text&gt; values, Context context)\n                throws IOException, InterruptedException {\n    Set&lt;String&gt; mySet = new HashSet&lt;&gt;();\n    Map&lt;String, String myMap = new HashMap&lt;&gt;();\n    for (Text value : values) {\n        // context.write(key, value);\n        ... \n    }\n    for (String str : mySet) {\n        if(myMap.containsKey(str)){\n            outputValue.set(str + myMap.get(str));\n            context.write(key, outputValue);\n        }\n    }\n}\n</code></pre>\n<p>If I uncomment the commented line, the output is written as well as each input value. However, when I comment the line, the output is not written. What could be the issue?</p>\n<p>I only want the output to be written to context.</p>\n"},{"tags":["java","javadoc","java-record"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1685294955,"post_id":76352287,"comment_id":134638449,"body_markdown":"I see that javadoc (in JDK 20.0.1) emits a warning when there’s no `@param` tag for constructor arguments… except in the case of record constructors.  It requires a description, but does not require `@param` tags.","body":"I see that javadoc (in JDK 20.0.1) emits a warning when there’s no <code>@param</code> tag for constructor arguments… except in the case of record constructors.  It requires a description, but does not require <code>@param</code> tags."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1685295122,"post_id":76352287,"comment_id":134638463,"body_markdown":"I forgot to mention I&#39;m using Java 17. So you say this might be fixed in Java 20+? But does this include `-Xdoclint:all`? I&#39;m not just talking about normal Javadoc. I&#39;m talking about Javadoc with linting.","body":"I forgot to mention I&#39;m using Java 17. So you say this might be fixed in Java 20+? But does this include <code>-Xdoclint:all</code>? I&#39;m not just talking about normal Javadoc. I&#39;m talking about Javadoc with linting."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1685304674,"post_id":76352287,"comment_id":134639664,"body_markdown":"Yes, with -Xdoclint:all.  It appears this behavior started with Java 19.  With Java 18, I get a warning.","body":"Yes, with -Xdoclint:all.  It appears this behavior started with Java 19.  With Java 18, I get a warning."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1685304910,"post_id":76352287,"comment_id":134639687,"body_markdown":"Oh, good news. Before I saw your last comment I sent an improvement request to OpenJDK, so perhaps they can verify not only that the warning is suppressed but that it also copies over the information (as it does by default if there is no explicit constructor given).","body":"Oh, good news. Before I saw your last comment I sent an improvement request to OpenJDK, so perhaps they can verify not only that the warning is suppressed but that it also copies over the information (as it does by default if there is no explicit constructor given)."},{"owner":{"account_id":9998366,"reputation":2256,"user_id":7395227,"accept_rate":100,"display_name":"Andreas moved to Codidact"},"score":0,"creation_date":1685304941,"post_id":76352287,"comment_id":134639690,"body_markdown":"I strongly suggest just using a @NotNull annotation, and call it a day.","body":"I strongly suggest just using a @NotNull annotation, and call it a day."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1685305012,"post_id":76352287,"comment_id":134639699,"body_markdown":"I use `@NotNull`, yes! Great advice! But I don&#39;t call it a day. Good programming calls for precondition checks, to catch bad input as soon as possible and fail fast.","body":"I use <code>@NotNull</code>, yes! Great advice! But I don&#39;t call it a day. Good programming calls for precondition checks, to catch bad input as soon as possible and fail fast."},{"owner":{"account_id":9998366,"reputation":2256,"user_id":7395227,"accept_rate":100,"display_name":"Andreas moved to Codidact"},"score":0,"creation_date":1685307245,"post_id":76352287,"comment_id":134639920,"body_markdown":"@GarretWilson If you use the Jetbrains `@Nullable` and `@NotNull`, these preconditions are inserted automatically. It makes you completely stop worrying about NPs at all. Not all of these annotations are supported for automatic insertion of checks, though.","body":"@GarretWilson If you use the Jetbrains <code>@Nullable</code> and <code>@NotNull</code>, these preconditions are inserted automatically. It makes you completely stop worrying about NPs at all. Not all of these annotations are supported for automatic insertion of checks, though."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1685308539,"post_id":76352287,"comment_id":134640038,"body_markdown":"By the way, cutting down on boilerplate is explicitly  *not* the purpose of [records](https://openjdk.org/jeps/395). The purpose is to create “classes that act as transparent carriers for immutable data … *nominal tuples*”. The improved concision is merely a pleasant side-effect.","body":"By the way, cutting down on boilerplate is explicitly  <i>not</i> the purpose of <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">records</a>. The purpose is to create “classes that act as transparent carriers for immutable data … <i>nominal tuples</i>”. The improved concision is merely a pleasant side-effect."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":6,"creation_date":1685315494,"post_id":76352287,"comment_id":134640565,"body_markdown":"&quot;If you use the Jetbrains `@Nullable` and `@NotNull`, these preconditions are inserted automatically.&quot; Andreas I believe you have to use some library or extension or Jetbrains IDE. Null checking doesn&#39;t happen automatically just by throwing in an annotation. Besides, this misses the larger point; I gave `null`-checking as an example. There are many other validation checks (e.g. &quot;argument must be a power of two&quot;) for which there are no general annotations and still require a custom constructor for validation.","body":"&quot;If you use the Jetbrains <code>@Nullable</code> and <code>@NotNull</code>, these preconditions are inserted automatically.&quot; Andreas I believe you have to use some library or extension or Jetbrains IDE. Null checking doesn&#39;t happen automatically just by throwing in an annotation. Besides, this misses the larger point; I gave <code>null</code>-checking as an example. There are many other validation checks (e.g. &quot;argument must be a power of two&quot;) for which there are no general annotations and still require a custom constructor for validation."},{"owner":{"account_id":9998366,"reputation":2256,"user_id":7395227,"accept_rate":100,"display_name":"Andreas moved to Codidact"},"score":0,"creation_date":1685456794,"post_id":76352287,"comment_id":134660636,"body_markdown":"@GarretWilson Yeah, you’re right. But for nullability, I do think the solution is not to pollute the JavaDoc with it, but annotate it, and have it managed by automated tools. Java should have been non-null by default. But yes, I did miss the point about other kinds of validation. Personally, I wouldn’t document the constructor; I’d put it in the record’s main JavaDoc, and suppress warnings about missing documentation on the constructor. The limits of permitted values is a property of the record itself, not just its constructor.","body":"@GarretWilson Yeah, you’re right. But for nullability, I do think the solution is not to pollute the JavaDoc with it, but annotate it, and have it managed by automated tools. Java should have been non-null by default. But yes, I did miss the point about other kinds of validation. Personally, I wouldn’t document the constructor; I’d put it in the record’s main JavaDoc, and suppress warnings about missing documentation on the constructor. The limits of permitted values is a property of the record itself, not just its constructor."}],"answers":[{"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1685291491,"post_id":76352472,"comment_id":134638064,"body_markdown":"The canonical constructor also might not need any Javadoc with it if it is clear what is valid and what isn&#39;t.","body":"The canonical constructor also might not need any Javadoc with it if it is clear what is valid and what isn&#39;t."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1685293595,"post_id":76352472,"comment_id":134638291,"body_markdown":"I find very few cases in the real world where there is nothing interesting to say about `name`.  In other words real examples where somewhat redundant documentation on a method is unnecessary are quite rare.  I&#39;d agree that records are a special case, and might need some adjustment to the linter tool and to conventions.","body":"I find very few cases in the real world where there is nothing interesting to say about <code>name</code>.  In other words real examples where somewhat redundant documentation on a method is unnecessary are quite rare.  I&#39;d agree that records are a special case, and might need some adjustment to the linter tool and to conventions."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1685294525,"post_id":76352472,"comment_id":134638403,"body_markdown":"&quot;Yes, javadoc will throw a small fit…&quot; And that is bad. You can say that the warnings are benign, and maybe you would be be correct. But I do not want any warnings at all. The minute you have warnings that are &quot;OK&quot; in your project, you have a thousand warnings, and there is no way to know which are &quot;OK&quot; and which are &quot;not OK&quot;. A developer is not going read each of them individually, and a new developer wouldn&#39;t know how to distinguish the two. Yet I do want to know when someone forgot to document a non-record constructor.","body":"&quot;Yes, javadoc will throw a small fit…&quot; And that is bad. You can say that the warnings are benign, and maybe you would be be correct. But I do not want any warnings at all. The minute you have warnings that are &quot;OK&quot; in your project, you have a thousand warnings, and there is no way to know which are &quot;OK&quot; and which are &quot;not OK&quot;. A developer is not going read each of them individually, and a new developer wouldn&#39;t know how to distinguish the two. Yet I do want to know when someone forgot to document a non-record constructor."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1685294797,"post_id":76352472,"comment_id":134638438,"body_markdown":"One problem here is that a record always has a constructor. If I don&#39;t add a custom record constructor, Javadoc linting provides no warning; it turns out that this is because Javadoc simply copies the record `@param` documentation by default. It seems like the core issue is that Javadoc isn&#39;t smart enough to copy the `@param` documentation over for my custom constructor (as it does for method overrides). I suppose I need to file a ticket. Does anyone know which issue tracker is best for Javadoc?","body":"One problem here is that a record always has a constructor. If I don&#39;t add a custom record constructor, Javadoc linting provides no warning; it turns out that this is because Javadoc simply copies the record <code>@param</code> documentation by default. It seems like the core issue is that Javadoc isn&#39;t smart enough to copy the <code>@param</code> documentation over for my custom constructor (as it does for method overrides). I suppose I need to file a ticket. Does anyone know which issue tracker is best for Javadoc?"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1685296322,"post_id":76352472,"comment_id":134638614,"body_markdown":"@markspace About 25% of all my public methods have no documentation needs. Picking good method names is a skill all its own. Like the core libs, I tend to do a lot of the heavy lifting in the class-level docs.","body":"@markspace About 25% of all my public methods have no documentation needs. Picking good method names is a skill all its own. Like the core libs, I tend to do a lot of the heavy lifting in the class-level docs."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1685296344,"post_id":76352472,"comment_id":134638622,"body_markdown":"@GarretWilson As I said, if you want to stick with the javadoc tool default linter tools, _boilerplate and massive DRY violations are inevitable_. Not just in your code, even in your docs. In this very case, for example: If you do what you currently do (copypaste the non-null note to both places), your docs now repeat themselves too.","body":"@GarretWilson As I said, if you want to stick with the javadoc tool default linter tools, <i>boilerplate and massive DRY violations are inevitable</i>. Not just in your code, even in your docs. In this very case, for example: If you do what you currently do (copypaste the non-null note to both places), your docs now repeat themselves too."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1685296479,"post_id":76352472,"comment_id":134638648,"body_markdown":"@GarretWilson A tool is a tool. If it is useful, keep it. If it hurts more than it helps, ditch it. Saying things like &quot;and that is bad&quot; is making all sorts of implicit assumptions (presumably, &#39;javadoc is a tool&#39;, &#39;that is a good tool&#39;, &#39;I trust its linting output&#39;), and I bet some of them are wrong. In this case, &#39;its linting output is good&#39;, is incorrect).","body":"@GarretWilson A tool is a tool. If it is useful, keep it. If it hurts more than it helps, ditch it. Saying things like &quot;and that is bad&quot; is making all sorts of implicit assumptions (presumably, &#39;javadoc is a tool&#39;, &#39;that is a good tool&#39;, &#39;I trust its linting output&#39;), and I bet some of them are wrong. In this case, &#39;its linting output is good&#39;, is incorrect)."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1685303284,"post_id":76352472,"comment_id":134639504,"body_markdown":"@rzwitserloot I didn&#39;t mean that Javadoc was a bad tool. I meant that the result of having benign warnings is bad. Javadoc is a great tool. You say, &quot;If it hurts more than it helps, ditch it.&quot; But I say, &quot;If it helps but hurts a little, improve it so that it helps more and hurts less.&quot;","body":"@rzwitserloot I didn&#39;t mean that Javadoc was a bad tool. I meant that the result of having benign warnings is bad. Javadoc is a great tool. You say, &quot;If it hurts more than it helps, ditch it.&quot; But I say, &quot;If it helps but hurts a little, improve it so that it helps more and hurts less.&quot;"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1685313747,"post_id":76352472,"comment_id":134640443,"body_markdown":"@GarretWilson What do you think could be done to improve the linter and the doc tools?  Off the top of my head, maybe add some annotations to tell those two tools that no Java doc is OK, maybe with a reason as a parameter.  Reasons: obvious with method name (simple setter/getter), documented elsewhere (method name, class doc).  Also maybe have a `@NotNull` for record constructors parameters so that explicit null checks aren&#39;t needed.","body":"@GarretWilson What do you think could be done to improve the linter and the doc tools?  Off the top of my head, maybe add some annotations to tell those two tools that no Java doc is OK, maybe with a reason as a parameter.  Reasons: obvious with method name (simple setter/getter), documented elsewhere (method name, class doc).  Also maybe have a <code>@NotNull</code> for record constructors parameters so that explicit null checks aren&#39;t needed."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1685314292,"post_id":76352472,"comment_id":134640482,"body_markdown":"@markspace presumably, what Garret would want is that missing `@param` on the constructor&#39;s javadoc get a clone of the relevant record-level `@param`, which is what happens if you don&#39;t write the constructor at all. However, _I_ would prefer a revisit of DRY violations in docs. Is it a good idea in the first place that javadoc copies documentation _at all_? A few additional tags to indicate intent would be great. Certainly a `/** @self-documenting */` would be nice. And just cool it on the linter in general. &quot;Missing `@param`&quot; is not a linter warning that should even be on.","body":"@markspace presumably, what Garret would want is that missing <code>@param</code> on the constructor&#39;s javadoc get a clone of the relevant record-level <code>@param</code>, which is what happens if you don&#39;t write the constructor at all. However, <i>I</i> would prefer a revisit of DRY violations in docs. Is it a good idea in the first place that javadoc copies documentation <i>at all</i>? A few additional tags to indicate intent would be great. Certainly a <code>&#47;** @self-documenting *&#47;</code> would be nice. And just cool it on the linter in general. &quot;Missing <code>@param</code>&quot; is not a linter warning that should even be on."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":1,"creation_date":1685314851,"post_id":76352472,"comment_id":134640520,"body_markdown":"@markspace, to answer your question, what @rzwitserloot said: &quot;… missing `@param` on the constructor&#39;s javadoc get a clone of the relevant record-level `@param` …&quot;. As pointed out, it happens already if the constructor is implicit. It&#39;s also analogous to what happens for a method `@Override`. Nothing new or revolutionary here. Just tweaking what&#39;s there to make it better. The other things @rzwitserloot mentioned are worth considering and discussing as well.","body":"@markspace, to answer your question, what @rzwitserloot said: &quot;… missing <code>@param</code> on the constructor&#39;s javadoc get a clone of the relevant record-level <code>@param</code> …&quot;. As pointed out, it happens already if the constructor is implicit. It&#39;s also analogous to what happens for a method <code>@Override</code>. Nothing new or revolutionary here. Just tweaking what&#39;s there to make it better. The other things @rzwitserloot mentioned are worth considering and discussing as well."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":11,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1685293424,"creation_date":1685291213,"answer_id":76352472,"question_id":76352287,"body_markdown":"To directly answer your question: No, there is no way to tell the javadoc tool to copy the `@param` values from the record itself to its construcor or vice versa.\r\n\r\nHowever, the nature of the question seems to go a little further than that and is opening the door to asking &#39;why were things designed this way&#39; (that&#39;s bordering on unsuitable for SO) or &#39;should I be doing things in a different way? I care in particular about avoiding boilerplate&#39; - and that one seems fair enough for Stack Overflow.\r\n\r\n## vanilla Javadoc and &#39;no boilerplate&#39; are fundamentally incompatible\r\n\r\nThat&#39;s the fundamental problem. Here is a trivial example of some code:\r\n\r\n```\r\n/**\r\n * A student at our university.\r\n *\r\n * All students have a unique student ID which consists of\r\n * 11 digits and which is assigned upon enrollment automatically.\r\n * The first 2 digits are a checksum generated just like the IBAN\r\n * algorithm does: (Explanation of that checksum algorithm here).\r\n *\r\n * And many more details about the rest of the student class here.\r\n */\r\npublic class Student {\r\n```\r\n\r\nLet&#39;s call all that stuff in the middle paragraph the &#39;ID explanation&#39;.\r\n\r\nJust including the actual student ID parts of the student class, we get this complete farce:\r\n\r\n```\r\n/**\r\n * Blabla student class.\r\n *\r\n * ID explanation.\r\n *\r\n * More about nature of student objects.\r\n */\r\npublic class Student {\r\n\r\n  /** ID explanation. */\r\n  private final long studentId;\r\n\r\n  /**\r\n   * blabla.\r\n   *\r\n   * @param studentId ID Explanation.\r\n   */\r\n  public Student(long studentId) {\r\n    ...\r\n  }\r\n\r\n  /**\r\n   * returns the ID (Explanation).\r\n   * @return the ID.\r\n   */\r\n  public long getStudentId() {\r\n    return studentId;\r\n  }\r\n\r\n  /**\r\n   * Sets the student ID. (Explanation)\r\n   *\r\n   * @param id The new student ID.\r\n   */\r\n  public void setStudentId(long id) {\r\n    this.studentId = studentId;\r\n  }\r\n}\r\n```\r\n\r\nThis code&#39;s javadoc contains the word &#39;student ID&#39; __seven__ times, and assuming you hold to the rule that you take all the linter rules used by the vanilla `javadoc` tool at face value, you can eliminate only about 2 of those (the field, because you might not adhere to the rule that private members need javadoc, and the explanation in the type itself, where it is not required you explain it. Though, this is a bit bizarre; in many ways, that&#39;s the best place to explain it).\r\n\r\nWe now get into opinion territory. However, I&#39;m going to assume you, the reader, would agree that if we have 2 goals:\r\n\r\n* Have `javadoc` emit no warnings\r\n* Write good documentation\r\n\r\nthe best effort is probably: Explain the details about the ID at the class level, and then just call it &#39;student ID&#39; with either no explanation at all, or by using `@link` or `@see` to link back to the right section in the main javadoc, getting our fancy HTML out to make some named anchors so we can link to the right section. This is by and large echoed by the javadoc on `java.*` classes which tend to do it that way.\r\n\r\nHowever, this has then reduced our complex case into the trivial, and rather stupid, scenario where we just keep repeating ourselves over and over. This:\r\n\r\n```\r\n/**\r\n * Returns the name.\r\n * @return The name.\r\n */\r\npublic String getName() { return this.name; }\r\n```\r\n\r\nIs a severe violation of DRY, and ridiculous levels of boilerplate. And yet, for &#39;properties&#39; (i.e. the use case records are designed for explicitly), this happens all the time. __even when__ there is a lot more to say about a given property (such as our &#39;student ID&#39; case with the checksum stuff), you _still_ end up here, because where else do you put all that? Surely you don&#39;t copy/paste it to 2 to 5 locations (between constructor, setter, getter,&#39;builder method&#39;, and wither).\r\n\r\nThis gets us to a simple truth, and this truth has nothing whatsoever to do with records:\r\n\r\n__The linter rules enabled by default in `javadoc` INHERENTLY demand you commit a ton of DRY violations__.\r\n\r\nNow we go to pure conjecture/opinion: That means the javadoc default configuration is simply unfit for purpose, and _nobody should ever listen to those rules_. Take em out. javadoc&#39;s default output leads one to write horrible code. Double horrible, because unit testing documentation is not possible.\r\n\r\nThis gets us to a new &#39;view&#39; on javadoc:\r\n\r\n* Disable the silly linter rules.\r\n* Make a decision about DRY _within the documentation itself_.\r\n\r\nHere&#39;s the key question you need to answer. What is better:\r\n\r\n```\r\n/**\r\n * Returns the name.\r\n *\r\n * @return The name\r\n */\r\npublic String getName() { return this.name; }\r\n```\r\n\r\nor:\r\n\r\n\r\n```\r\npublic String getName() { return this.name; }\r\n```\r\n\r\nAs in, _no javadoc __at all___. I&#39;m strongly suggesting you cozy up to the second case and get comfy with it. The biggest issue (other than the linter tool complaining about the second case!) is that a documentation reader might assume there are interesting things to say about the `getName()` method but that the author of the class file has failed to state them, whereas with the explicit javadoc the reader may surmise that, truly, this method returns &#39;the name&#39;, and from the context of what this class is about, there really isn&#39;t anything more to say.\r\n\r\nHowever, that&#39;s a false conclusion. Because of course there _could_ be quite interesting things to say about name (just like there were interesting things to say about student ID, such as about its checksum coding system), but they are said elsewhere (such as in the class-level javadoc), or have been left unsaid. Javadoc is not unit-testable, the fact that there _is_ javadoc does not mean that it is correct, nor that it is complete.\r\n\r\nHence, __there is no point to the javadoc here, at all__ - if the name of the method 100% covers what the docs ought to say about it, don&#39;t javadoc it.\r\n\r\nThis gets a little bit trickier when you have nothing to say _because it was said elsewhere_, such as at the class level. You may want to add the useless javadoc (`/** Returns the name.  @return The name */`), just so you can `{@link}` them to the right section where you expand on the details.\r\n\r\n## To the point: records and javadoc\r\n\r\nI therefore very strongly suggest you do the following:\r\n\r\n* Document everything inherent about the properties of your record __on the record&#39;s own javadoc__.\r\n* Assume the reader is smart enough to look there and simply leave anything completely unjavadocced if the record-level javadoc + the name of the thing combine to say all there is to say.\r\n\r\nWith these rules in places, _The constructor in the snippet included in this question should remain completely unjavadocced_. The record-level javadoc + the notion of &#39;this is a constructor for it&#39; completely cover what you want to say.\r\n\r\nThe one thing that you should put in the javadoc of a record constructor are notes about the construction process itself that the record-level javadoc doesn&#39;t mention. I can imagine, if you want to be ridiculously thorough, that you write this:\r\n\r\n```\r\n/**\r\n * @param foo Some foo thing; cannot be {@code null}.\r\n * @param bar Some bar thing; cannot be {@code null}.\r\n */\r\npublic record FooBar(String foo, String bar) {\r\n  /**\r\n   * @throws NullPointerException If either {@code foo} or {@code bar} is {@code null}.\r\n   */\r\n  public FooBar {\r\n    Objects.requireNonNull(foo);\r\n    Objects.requireNonNull(bar);\r\n  }\r\n}\r\n```\r\n\r\nYes, javadoc will throw a small fit: Will complain about lack of a body, and lack of `@param` values for the 2 constructor parameters. If you remove the `@throws` note (and with that, the entire javadoc), `javadoc` indeed complains that there is no javadoc.\r\n\r\nBut, it __will__ mention this constructor in the generated javadoc. It simply will not have any text beyond its signature. __Which is fine__. Or at least, either you accept that this is fine, _or_ you accept that massive boilerplate/DRY violations are unavoidable when writing javadoc, especially for &#39;properties&#39; - whether you use records to represent them, or not.\r\n","title":"Avoiding Javadoc duplication in Java records","body":"<p>To directly answer your question: No, there is no way to tell the javadoc tool to copy the <code>@param</code> values from the record itself to its construcor or vice versa.</p>\n<p>However, the nature of the question seems to go a little further than that and is opening the door to asking 'why were things designed this way' (that's bordering on unsuitable for SO) or 'should I be doing things in a different way? I care in particular about avoiding boilerplate' - and that one seems fair enough for Stack Overflow.</p>\n<h2>vanilla Javadoc and 'no boilerplate' are fundamentally incompatible</h2>\n<p>That's the fundamental problem. Here is a trivial example of some code:</p>\n<pre><code>/**\n * A student at our university.\n *\n * All students have a unique student ID which consists of\n * 11 digits and which is assigned upon enrollment automatically.\n * The first 2 digits are a checksum generated just like the IBAN\n * algorithm does: (Explanation of that checksum algorithm here).\n *\n * And many more details about the rest of the student class here.\n */\npublic class Student {\n</code></pre>\n<p>Let's call all that stuff in the middle paragraph the 'ID explanation'.</p>\n<p>Just including the actual student ID parts of the student class, we get this complete farce:</p>\n<pre><code>/**\n * Blabla student class.\n *\n * ID explanation.\n *\n * More about nature of student objects.\n */\npublic class Student {\n\n  /** ID explanation. */\n  private final long studentId;\n\n  /**\n   * blabla.\n   *\n   * @param studentId ID Explanation.\n   */\n  public Student(long studentId) {\n    ...\n  }\n\n  /**\n   * returns the ID (Explanation).\n   * @return the ID.\n   */\n  public long getStudentId() {\n    return studentId;\n  }\n\n  /**\n   * Sets the student ID. (Explanation)\n   *\n   * @param id The new student ID.\n   */\n  public void setStudentId(long id) {\n    this.studentId = studentId;\n  }\n}\n</code></pre>\n<p>This code's javadoc contains the word 'student ID' <strong>seven</strong> times, and assuming you hold to the rule that you take all the linter rules used by the vanilla <code>javadoc</code> tool at face value, you can eliminate only about 2 of those (the field, because you might not adhere to the rule that private members need javadoc, and the explanation in the type itself, where it is not required you explain it. Though, this is a bit bizarre; in many ways, that's the best place to explain it).</p>\n<p>We now get into opinion territory. However, I'm going to assume you, the reader, would agree that if we have 2 goals:</p>\n<ul>\n<li>Have <code>javadoc</code> emit no warnings</li>\n<li>Write good documentation</li>\n</ul>\n<p>the best effort is probably: Explain the details about the ID at the class level, and then just call it 'student ID' with either no explanation at all, or by using <code>@link</code> or <code>@see</code> to link back to the right section in the main javadoc, getting our fancy HTML out to make some named anchors so we can link to the right section. This is by and large echoed by the javadoc on <code>java.*</code> classes which tend to do it that way.</p>\n<p>However, this has then reduced our complex case into the trivial, and rather stupid, scenario where we just keep repeating ourselves over and over. This:</p>\n<pre><code>/**\n * Returns the name.\n * @return The name.\n */\npublic String getName() { return this.name; }\n</code></pre>\n<p>Is a severe violation of DRY, and ridiculous levels of boilerplate. And yet, for 'properties' (i.e. the use case records are designed for explicitly), this happens all the time. <strong>even when</strong> there is a lot more to say about a given property (such as our 'student ID' case with the checksum stuff), you <em>still</em> end up here, because where else do you put all that? Surely you don't copy/paste it to 2 to 5 locations (between constructor, setter, getter,'builder method', and wither).</p>\n<p>This gets us to a simple truth, and this truth has nothing whatsoever to do with records:</p>\n<p><strong>The linter rules enabled by default in <code>javadoc</code> INHERENTLY demand you commit a ton of DRY violations</strong>.</p>\n<p>Now we go to pure conjecture/opinion: That means the javadoc default configuration is simply unfit for purpose, and <em>nobody should ever listen to those rules</em>. Take em out. javadoc's default output leads one to write horrible code. Double horrible, because unit testing documentation is not possible.</p>\n<p>This gets us to a new 'view' on javadoc:</p>\n<ul>\n<li>Disable the silly linter rules.</li>\n<li>Make a decision about DRY <em>within the documentation itself</em>.</li>\n</ul>\n<p>Here's the key question you need to answer. What is better:</p>\n<pre><code>/**\n * Returns the name.\n *\n * @return The name\n */\npublic String getName() { return this.name; }\n</code></pre>\n<p>or:</p>\n<pre><code>public String getName() { return this.name; }\n</code></pre>\n<p>As in, <em>no javadoc <strong>at all</strong></em>. I'm strongly suggesting you cozy up to the second case and get comfy with it. The biggest issue (other than the linter tool complaining about the second case!) is that a documentation reader might assume there are interesting things to say about the <code>getName()</code> method but that the author of the class file has failed to state them, whereas with the explicit javadoc the reader may surmise that, truly, this method returns 'the name', and from the context of what this class is about, there really isn't anything more to say.</p>\n<p>However, that's a false conclusion. Because of course there <em>could</em> be quite interesting things to say about name (just like there were interesting things to say about student ID, such as about its checksum coding system), but they are said elsewhere (such as in the class-level javadoc), or have been left unsaid. Javadoc is not unit-testable, the fact that there <em>is</em> javadoc does not mean that it is correct, nor that it is complete.</p>\n<p>Hence, <strong>there is no point to the javadoc here, at all</strong> - if the name of the method 100% covers what the docs ought to say about it, don't javadoc it.</p>\n<p>This gets a little bit trickier when you have nothing to say <em>because it was said elsewhere</em>, such as at the class level. You may want to add the useless javadoc (<code>/** Returns the name.  @return The name */</code>), just so you can <code>{@link}</code> them to the right section where you expand on the details.</p>\n<h2>To the point: records and javadoc</h2>\n<p>I therefore very strongly suggest you do the following:</p>\n<ul>\n<li>Document everything inherent about the properties of your record <strong>on the record's own javadoc</strong>.</li>\n<li>Assume the reader is smart enough to look there and simply leave anything completely unjavadocced if the record-level javadoc + the name of the thing combine to say all there is to say.</li>\n</ul>\n<p>With these rules in places, <em>The constructor in the snippet included in this question should remain completely unjavadocced</em>. The record-level javadoc + the notion of 'this is a constructor for it' completely cover what you want to say.</p>\n<p>The one thing that you should put in the javadoc of a record constructor are notes about the construction process itself that the record-level javadoc doesn't mention. I can imagine, if you want to be ridiculously thorough, that you write this:</p>\n<pre><code>/**\n * @param foo Some foo thing; cannot be {@code null}.\n * @param bar Some bar thing; cannot be {@code null}.\n */\npublic record FooBar(String foo, String bar) {\n  /**\n   * @throws NullPointerException If either {@code foo} or {@code bar} is {@code null}.\n   */\n  public FooBar {\n    Objects.requireNonNull(foo);\n    Objects.requireNonNull(bar);\n  }\n}\n</code></pre>\n<p>Yes, javadoc will throw a small fit: Will complain about lack of a body, and lack of <code>@param</code> values for the 2 constructor parameters. If you remove the <code>@throws</code> note (and with that, the entire javadoc), <code>javadoc</code> indeed complains that there is no javadoc.</p>\n<p>But, it <strong>will</strong> mention this constructor in the generated javadoc. It simply will not have any text beyond its signature. <strong>Which is fine</strong>. Or at least, either you accept that this is fine, <em>or</em> you accept that massive boilerplate/DRY violations are unavoidable when writing javadoc, especially for 'properties' - whether you use records to represent them, or not.</p>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1686572711,"post_id":76352773,"comment_id":134812450,"body_markdown":"[This recent comment](https://bugs.openjdk.org/browse/JDK-8309252?focusedCommentId=14586946&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14586946) suggests that only the warning has been removed but the parameter documentation is not copied.","body":"<a href=\"https://bugs.openjdk.org/browse/JDK-8309252?focusedCommentId=14586946&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14586946\" rel=\"nofollow noreferrer\">This recent comment</a> suggests that only the warning has been removed but the parameter documentation is not copied."}],"tags":[],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1700752043,"creation_date":1685295636,"answer_id":76352773,"question_id":76352287,"body_markdown":"I just filed an OpenJDK improvement request for this. The request is now public at [JDK-8309252][1], although it&#39;s not clear if they have verified that the Javadoc comments are copied over to an explicit record constructor, or if the warnings have merely been removed. (I sent a follow-up query but have not yet received any reply or ticket update.)\r\n\r\nHere is an excerpt from my request:\r\n\r\n&gt; Please improve Javadoc so that if a constructor is provided for a record, for each missing `@param` Javadoc will use the `@param` provided in the record description. This is analogous to how Javadoc already copies method API documentation for a method `@Override` if no documentation is given.\r\n&gt;\r\n&gt; …\r\n&gt;\r\n&gt; An analogous situation which Javadoc (now) handles correctly is when overriding methods. A developer may leave off documentation for a method annotated with `@Override`, and Javadoc will copy over the documentation from the overridden class or interface. In this case there is no need for an `@Override` annotation, as the semantics are implicit by the context.\r\n&gt;\r\n&gt; Javadoc provides an `{@inheritDoc}` mechanism for when the developer wants to duplicate the documentation for an overridden method and then add to it. Perhaps Javadoc might provide a `{@defaultDoc}` or `{@recordDoc}` or some similar mechanism to add to the record-level documentation.\r\n&gt;\r\n&gt; Still by default, if no documentation at all is provided for a custom constructor, Javadoc should copy over the record-level `@param` documentation as it does already if no custom constructor is provided, and emit no doclint warning.\r\n\r\nIn the meantime, for a workaround, it appears (see [JDK-8275351][2]) that in Java 18 I may be able to [suppress](https://docs.oracle.com/en/java/javase/18/docs/specs/man/javadoc.html#suppressing-messages) the warnings using `@SuppressWarnings(&quot;doclint:missing&quot;)`. I have not verified this. I&#39;ll update this answer later this year when I move to Java 21 after it is released.\r\n\r\n_Update 2023-11-23:_ I have confirmed that Java 21 brings an improvement. A warning is emitted if the record fields themselves are not documented, but no warning is generated if a validating constructor is present, whether or not it has a Javadoc comment. Unfortunately as Holger mentioned, the record-level field documentation is not copied over (reflecting the unfinished state of JDK-[8309252][3]). Instead, boilerplate phrases to the effect of &quot;the value for the `foo` record component&quot; is inserted. If main documentation is provided for the validating, I still gate &quot;warning: no comment&quot;. And if I do provide a main description for the validating constructor, no field documentation is copied at all. At least the suppression of the warning is an improvement.\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=JDK-8309252\r\n  [2]: https://bugs.openjdk.org/browse/JDK-8275351\r\n  [3]: https://bugs.openjdk.org/browse/JDK-8309252","title":"Avoiding Javadoc duplication in Java records","body":"<p>I just filed an OpenJDK improvement request for this. The request is now public at <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=JDK-8309252\" rel=\"nofollow noreferrer\">JDK-8309252</a>, although it's not clear if they have verified that the Javadoc comments are copied over to an explicit record constructor, or if the warnings have merely been removed. (I sent a follow-up query but have not yet received any reply or ticket update.)</p>\n<p>Here is an excerpt from my request:</p>\n<blockquote>\n<p>Please improve Javadoc so that if a constructor is provided for a record, for each missing <code>@param</code> Javadoc will use the <code>@param</code> provided in the record description. This is analogous to how Javadoc already copies method API documentation for a method <code>@Override</code> if no documentation is given.</p>\n<p>…</p>\n<p>An analogous situation which Javadoc (now) handles correctly is when overriding methods. A developer may leave off documentation for a method annotated with <code>@Override</code>, and Javadoc will copy over the documentation from the overridden class or interface. In this case there is no need for an <code>@Override</code> annotation, as the semantics are implicit by the context.</p>\n<p>Javadoc provides an <code>{@inheritDoc}</code> mechanism for when the developer wants to duplicate the documentation for an overridden method and then add to it. Perhaps Javadoc might provide a <code>{@defaultDoc}</code> or <code>{@recordDoc}</code> or some similar mechanism to add to the record-level documentation.</p>\n<p>Still by default, if no documentation at all is provided for a custom constructor, Javadoc should copy over the record-level <code>@param</code> documentation as it does already if no custom constructor is provided, and emit no doclint warning.</p>\n</blockquote>\n<p>In the meantime, for a workaround, it appears (see <a href=\"https://bugs.openjdk.org/browse/JDK-8275351\" rel=\"nofollow noreferrer\">JDK-8275351</a>) that in Java 18 I may be able to <a href=\"https://docs.oracle.com/en/java/javase/18/docs/specs/man/javadoc.html#suppressing-messages\" rel=\"nofollow noreferrer\">suppress</a> the warnings using <code>@SuppressWarnings(&quot;doclint:missing&quot;)</code>. I have not verified this. I'll update this answer later this year when I move to Java 21 after it is released.</p>\n<p><em>Update 2023-11-23:</em> I have confirmed that Java 21 brings an improvement. A warning is emitted if the record fields themselves are not documented, but no warning is generated if a validating constructor is present, whether or not it has a Javadoc comment. Unfortunately as Holger mentioned, the record-level field documentation is not copied over (reflecting the unfinished state of JDK-<a href=\"https://bugs.openjdk.org/browse/JDK-8309252\" rel=\"nofollow noreferrer\">8309252</a>). Instead, boilerplate phrases to the effect of &quot;the value for the <code>foo</code> record component&quot; is inserted. If main documentation is provided for the validating, I still gate &quot;warning: no comment&quot;. And if I do provide a main description for the validating constructor, no field documentation is copied at all. At least the suppression of the warning is an improvement.</p>\n"}],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":267,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":76352773,"answer_count":2,"score":7,"last_activity_date":1700752043,"creation_date":1685288599,"question_id":76352287,"body_markdown":"The new Java `record` is supposed to cut down on boilerplate. I can quickly create an immutable `FooBar` class with `foo` and `bar` components without worrying about local variables, constructor value copying, and getters, like this:\r\n\r\n```java\r\n/**\r\n * Foo bar record.\r\n */\r\npublic record FooBar(String foo, String bar) {\r\n}\r\n```\r\n\r\nOf course I want to document what the record components are, so they will show up in the generated Javadocs! So I add this:\r\n\r\n```java\r\n/**\r\n * Foo bar record.\r\n * @param foo That foo thing; cannot be &lt;code&gt;null&lt;/code&gt;.\r\n * @param bar That bar thing; cannot be &lt;code&gt;null&lt;/code&gt;.\r\n */\r\npublic record FooBar(String foo, String bar) {\r\n}\r\n```\r\n\r\nThat works nicely—the record components show up in the documentation.\r\n\r\nExcept that for almost 100% of records, as a good developer of course I need to validate the `foo` and `bar` to ensure they are non-null, right? (Right.) Records allow this easily:\r\n\r\n```java\r\n/**\r\n * Foo bar record.\r\n * @param foo That foo thing; cannot be &lt;code&gt;null&lt;/code&gt;.\r\n * @param bar That bar thing; cannot be &lt;code&gt;null&lt;/code&gt;.\r\n */\r\npublic record FooBar(String foo, String bar) {\r\n\r\n  /** Constructor for argument validation and normalization. */\r\n  public FooBar {\r\n    Objects.requireNonNull(foo);\r\n    Objects.requireNonNull(bar);\r\n  }\r\n\r\n}\r\n```\r\n\r\nAnd now, since I am using `-Xdoclint:all`, I get a warning because the construct doesn&#39;t document its (implicit) parameters:\r\n\r\n```\r\n[WARNING] Javadoc Warnings\r\n[WARNING] …/FooBar.java:xx: warning: no @param for foo\r\n[WARNING] public FooBar {\r\n[WARNING] ^\r\n[WARNING] …/FooBar.java:xx: warning: no @param for bar\r\n[WARNING] public FooBar {\r\n[WARNING] ^\r\n[WARNING] 2 warnings\r\n```\r\n\r\nIf you say &quot;just turn off `-Xdoclint:all`&quot;, you&#39;re missing the point. The warning is valid, because indeed no documentation shows up for the constructor in the generated Javadocs! If there is a constructor, there should be documentation for the parameters. So I&#39;m forced to do the old copy and paste:\r\n\r\n```java\r\n/**\r\n * Foo bar record.\r\n * @param foo That foo thing; cannot be &lt;code&gt;null&lt;/code&gt;.\r\n * @param bar That bar thing; cannot be &lt;code&gt;null&lt;/code&gt;.\r\n */\r\npublic record FooBar(String foo, String bar) {\r\n\r\n  /**\r\n   * Constructor for argument validation and normalization.\r\n   * @param foo That foo thing; cannot be &lt;code&gt;null&lt;/code&gt;.\r\n   * @param bar That bar thing; cannot be &lt;code&gt;null&lt;/code&gt;.\r\n   */\r\n  public FooBar {\r\n    Objects.requireNonNull(foo);\r\n    Objects.requireNonNull(bar);\r\n  }\r\n\r\n}\r\n```\r\n\r\nWait, what happened to cutting down on boilerplate? The boilerplate seems almost as bad as before, if not worse, because now it&#39;s complete duplication. Sure, maybe the semantics are slightly different, so maybe I could tweak the wording. Maybe one should say &quot;can never be `null`&quot; and the other should say &quot;throws an exception if `null`&quot;, but really, this is not ideal.\r\n\r\nJavadoc isn&#39;t this unintelligent when I&#39;m overriding methods. If I leave off the Javadoc for a method with an `@Override` annotation, then Javadoc copies over the documentation from the overridden class or interface. And if I decide I want to tweak the documentation, I even have a `{@inheritDoc}` Javadoc tag that allows me to copy the documentation from the method I&#39;m overriding.\r\n\r\nWhat&#39;s the solution here? Is there a way I can tell Javadoc to use the main record parameter documentation for the constructor or vice versa? Is there some Javadoc tag I can use to make it happen automatically? Because the situation as-is is very far from ideal.","title":"Avoiding Javadoc duplication in Java records","body":"<p>The new Java <code>record</code> is supposed to cut down on boilerplate. I can quickly create an immutable <code>FooBar</code> class with <code>foo</code> and <code>bar</code> components without worrying about local variables, constructor value copying, and getters, like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Foo bar record.\n */\npublic record FooBar(String foo, String bar) {\n}\n</code></pre>\n<p>Of course I want to document what the record components are, so they will show up in the generated Javadocs! So I add this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Foo bar record.\n * @param foo That foo thing; cannot be &lt;code&gt;null&lt;/code&gt;.\n * @param bar That bar thing; cannot be &lt;code&gt;null&lt;/code&gt;.\n */\npublic record FooBar(String foo, String bar) {\n}\n</code></pre>\n<p>That works nicely—the record components show up in the documentation.</p>\n<p>Except that for almost 100% of records, as a good developer of course I need to validate the <code>foo</code> and <code>bar</code> to ensure they are non-null, right? (Right.) Records allow this easily:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Foo bar record.\n * @param foo That foo thing; cannot be &lt;code&gt;null&lt;/code&gt;.\n * @param bar That bar thing; cannot be &lt;code&gt;null&lt;/code&gt;.\n */\npublic record FooBar(String foo, String bar) {\n\n  /** Constructor for argument validation and normalization. */\n  public FooBar {\n    Objects.requireNonNull(foo);\n    Objects.requireNonNull(bar);\n  }\n\n}\n</code></pre>\n<p>And now, since I am using <code>-Xdoclint:all</code>, I get a warning because the construct doesn't document its (implicit) parameters:</p>\n<pre><code>[WARNING] Javadoc Warnings\n[WARNING] …/FooBar.java:xx: warning: no @param for foo\n[WARNING] public FooBar {\n[WARNING] ^\n[WARNING] …/FooBar.java:xx: warning: no @param for bar\n[WARNING] public FooBar {\n[WARNING] ^\n[WARNING] 2 warnings\n</code></pre>\n<p>If you say &quot;just turn off <code>-Xdoclint:all</code>&quot;, you're missing the point. The warning is valid, because indeed no documentation shows up for the constructor in the generated Javadocs! If there is a constructor, there should be documentation for the parameters. So I'm forced to do the old copy and paste:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Foo bar record.\n * @param foo That foo thing; cannot be &lt;code&gt;null&lt;/code&gt;.\n * @param bar That bar thing; cannot be &lt;code&gt;null&lt;/code&gt;.\n */\npublic record FooBar(String foo, String bar) {\n\n  /**\n   * Constructor for argument validation and normalization.\n   * @param foo That foo thing; cannot be &lt;code&gt;null&lt;/code&gt;.\n   * @param bar That bar thing; cannot be &lt;code&gt;null&lt;/code&gt;.\n   */\n  public FooBar {\n    Objects.requireNonNull(foo);\n    Objects.requireNonNull(bar);\n  }\n\n}\n</code></pre>\n<p>Wait, what happened to cutting down on boilerplate? The boilerplate seems almost as bad as before, if not worse, because now it's complete duplication. Sure, maybe the semantics are slightly different, so maybe I could tweak the wording. Maybe one should say &quot;can never be <code>null</code>&quot; and the other should say &quot;throws an exception if <code>null</code>&quot;, but really, this is not ideal.</p>\n<p>Javadoc isn't this unintelligent when I'm overriding methods. If I leave off the Javadoc for a method with an <code>@Override</code> annotation, then Javadoc copies over the documentation from the overridden class or interface. And if I decide I want to tweak the documentation, I even have a <code>{@inheritDoc}</code> Javadoc tag that allows me to copy the documentation from the method I'm overriding.</p>\n<p>What's the solution here? Is there a way I can tell Javadoc to use the main record parameter documentation for the constructor or vice versa? Is there some Javadoc tag I can use to make it happen automatically? Because the situation as-is is very far from ideal.</p>\n"},{"tags":["java","gradle","jvm","classloader"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1700751343,"post_id":77537803,"comment_id":136694970,"body_markdown":"The class affected is `com.whatsapp.api.domain.webhook.WebHookEvent`, which is unlikely to be a class that you compiled yourself (unless you work for Facebook/Whatsapp), but comes from a library you&#39;re using. The error means that class was compiled to target Java 17. You cannot use it on Java 8. You need to downgrade the library used to a version which was compiled targetting Java 8 or lower.","body":"The class affected is <code>com.whatsapp.api.domain.webhook.WebHookEvent</code>, which is unlikely to be a class that you compiled yourself (unless you work for Facebook/Whatsapp), but comes from a library you&#39;re using. The error means that class was compiled to target Java 17. You cannot use it on Java 8. You need to downgrade the library used to a version which was compiled targetting Java 8 or lower."},{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1700751645,"post_id":77537803,"comment_id":136695029,"body_markdown":"Is there a reason why you are still using Java 8, which is an outdated Java version? If you can, update your Java version to at least Java 17.","body":"Is there a reason why you are still using Java 8, which is an outdated Java version? If you can, update your Java version to at least Java 17."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1700753261,"post_id":77537803,"comment_id":136695349,"body_markdown":"@Jesper Although it is an older version, it is still actively supported (until 2026 by most OpenJDK derivatives, and until 2030 if you pay Oracle), so in that sense it is not outdated.","body":"@Jesper Although it is an older version, it is still actively supported (until 2026 by most OpenJDK derivatives, and until 2030 if you pay Oracle), so in that sense it is not outdated."}],"owner":{"account_id":27579851,"reputation":1,"user_id":21049290,"display_name":"Otabek Eshpo&#39;latov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1700758649,"answer_count":0,"score":-1,"last_activity_date":1700751376,"creation_date":1700751151,"question_id":77537803,"body_markdown":"```none\r\ncom/whatsapp/api/domain/webhook/WebHookEvent has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 52.0\r\n\tat java.lang.ClassLoader.defineClass1(Native Method) ~[na:1.8.0_382]\r\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:756) ~[na:1.8.0_382]\r\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) ~[na:1.8.0_382]\r\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:473) ~[na:1.8.0_382]\r\n\tat java.net.URLClassLoader.access$100(URLClassLoader.java:74) ~[na:1.8.0_382]\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:369) ~[na:1.8.0_382]\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:363) ~[na:1.8.0_382]\r\n\tat java.security.AccessController.doPrivileged(Native Method) ~[na:1.8.0_382]\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:362) ~[na:1.8.0_382]\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:418) ~[na:1.8.0_382]\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:351) ~[na:1.8.0_382]\r\n\tat java.lang.Class.forName0(Native Method) ~[na:1.8.0_382]\r\n```\r\n\r\nNo exceptions happened during compilation. \r\n\r\nMy project is in Java 8 and when I run the program after adding external library through Gradle, that&#39;s what happened. However, the class is built with 1.8.0_292jdk. How is that possible? \r\n\r\nI even cleaned caches inside .m2 and .gradle/caches but still I don&#39;t see any change.","title":"Class has been compiled by a more recent version of the Java Runtime","body":"<pre class=\"lang-none prettyprint-override\"><code>com/whatsapp/api/domain/webhook/WebHookEvent has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 52.0\n    at java.lang.ClassLoader.defineClass1(Native Method) ~[na:1.8.0_382]\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:756) ~[na:1.8.0_382]\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) ~[na:1.8.0_382]\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:473) ~[na:1.8.0_382]\n    at java.net.URLClassLoader.access$100(URLClassLoader.java:74) ~[na:1.8.0_382]\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:369) ~[na:1.8.0_382]\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:363) ~[na:1.8.0_382]\n    at java.security.AccessController.doPrivileged(Native Method) ~[na:1.8.0_382]\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:362) ~[na:1.8.0_382]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:418) ~[na:1.8.0_382]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:351) ~[na:1.8.0_382]\n    at java.lang.Class.forName0(Native Method) ~[na:1.8.0_382]\n</code></pre>\n<p>No exceptions happened during compilation.</p>\n<p>My project is in Java 8 and when I run the program after adding external library through Gradle, that's what happened. However, the class is built with 1.8.0_292jdk. How is that possible?</p>\n<p>I even cleaned caches inside .m2 and .gradle/caches but still I don't see any change.</p>\n"},{"tags":["java","android","eclipse"],"comments":[{"owner":{"account_id":2200360,"reputation":8355,"user_id":1944896,"accept_rate":80,"display_name":"TheLittleNaruto"},"score":0,"creation_date":1510251078,"post_id":47205880,"comment_id":81366636,"body_markdown":"Could you switch to Android Studio instead ? Because Eclipse is deprecated now.","body":"Could you switch to Android Studio instead ? Because Eclipse is deprecated now."}],"answers":[{"comments":[{"owner":{"account_id":6532591,"reputation":1944,"user_id":5053275,"accept_rate":53,"display_name":"user123456789"},"score":1,"creation_date":1510244562,"post_id":47205957,"comment_id":81362461,"body_markdown":"No I am not using Maven. I already tried adding a JVM which a said in my question. When I do that it causes more errors","body":"No I am not using Maven. I already tried adding a JVM which a said in my question. When I do that it causes more errors"},{"owner":{"account_id":11655101,"reputation":797,"user_id":8535087,"display_name":"Ash_s94"},"score":0,"creation_date":1510245619,"post_id":47205957,"comment_id":81363236,"body_markdown":"You can also try going into the folder where you have all your projects and delete the .metadata for Eclipse (be aware that you&#39;ll have to re-import all the projects afterwards! Also all the environment settings you&#39;ve set would also have to be redone). After it was deleted just import the project again, and hopefully it works.","body":"You can also try going into the folder where you have all your projects and delete the .metadata for Eclipse (be aware that you&#39;ll have to re-import all the projects afterwards! Also all the environment settings you&#39;ve set would also have to be redone). After it was deleted just import the project again, and hopefully it works."},{"owner":{"account_id":1198357,"reputation":1090,"user_id":1169587,"accept_rate":28,"display_name":"user1169587"},"score":1,"creation_date":1609496117,"post_id":47205957,"comment_id":115853336,"body_markdown":"&quot;To add it: Right-click on the project, Maven → Disable Maven Nature Right-click on the project, Configure → Convert to Maven Project.&quot; It fix my problem, but what is these step doing actually?","body":"&quot;To add it: Right-click on the project, Maven → Disable Maven Nature Right-click on the project, Configure → Convert to Maven Project.&quot; It fix my problem, but what is these step doing actually?"},{"owner":{"account_id":2204705,"reputation":311,"user_id":1948214,"accept_rate":75,"display_name":"keesp"},"score":0,"creation_date":1612796718,"post_id":47205957,"comment_id":116871477,"body_markdown":"Edit 1 Worked for me (in Eclipse 2020-12). Apparently the JRE library is not always updated when the build path properties are changed. My JRE got stuck on JAVA-7 (because my bundles need to work for that), but somehow the compiler compliance levels did not change the selected JRE in the library","body":"Edit 1 Worked for me (in Eclipse 2020-12). Apparently the JRE library is not always updated when the build path properties are changed. My JRE got stuck on JAVA-7 (because my bundles need to work for that), but somehow the compiler compliance levels did not change the selected JRE in the library"},{"owner":{"account_id":5245569,"reputation":111,"user_id":4209849,"display_name":"Kangqiao Zhao"},"score":0,"creation_date":1641852780,"post_id":47205957,"comment_id":124911355,"body_markdown":"Same as @keesp the Edit 1 worked for me. If Maven Build Path doesn&#39;t fix the problem try to check the properties of the project and change the Java Build Path -&gt; Library and try to use the same as Maven Build Path.","body":"Same as @keesp the Edit 1 worked for me. If Maven Build Path doesn&#39;t fix the problem try to check the properties of the project and change the Java Build Path -&gt; Library and try to use the same as Maven Build Path."}],"tags":[],"owner":{"account_id":11655101,"reputation":797,"user_id":8535087,"display_name":"Ash_s94"},"comment_count":5,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1567695610,"creation_date":1510242140,"answer_id":47205957,"question_id":47205880,"body_markdown":"Are you using Maven? If so,\r\n\r\n 1. Right-click on the project, Build Path and go to Configure Build Path\r\n 2. Click the libraries tab. If Maven dependencies are not in the list, you need to add it.\r\n 3. Close the dialog.\r\n\r\nTo add it:\r\nRight-click on the project, Maven → Disable Maven Nature\r\nRight-click on the project, Configure → Convert to Maven Project.\r\n\r\nAnd then clean\r\n\r\n**Edit 1:**\r\n\r\nIf that doesn&#39;t resolve the issue try right-clicking on your project and select properties. Select Java Build Path → Library tab. Look for a JVM. If it&#39;s not there, click to add Library and add the default JVM. If VM is there, click edit and select the default JVM. Hopefully, that works.\r\n\r\n**Edit 2:**\r\n\r\nYou can also try going into the folder where you have all your projects and delete the `.metadata` for eclipse (be aware that you&#39;ll have to re-import all the projects afterwards! Also all the environment settings you&#39;ve set would also have to be redone). After it was deleted just import the project again, and hopefully, it works.","title":"Eclipse Oxygen - The project was not built since its build path is incomplete","body":"<p>Are you using Maven? If so,</p>\n\n<ol>\n<li>Right-click on the project, Build Path and go to Configure Build Path</li>\n<li>Click the libraries tab. If Maven dependencies are not in the list, you need to add it.</li>\n<li>Close the dialog.</li>\n</ol>\n\n<p>To add it:\nRight-click on the project, Maven → Disable Maven Nature\nRight-click on the project, Configure → Convert to Maven Project.</p>\n\n<p>And then clean</p>\n\n<p><strong>Edit 1:</strong></p>\n\n<p>If that doesn't resolve the issue try right-clicking on your project and select properties. Select Java Build Path → Library tab. Look for a JVM. If it's not there, click to add Library and add the default JVM. If VM is there, click edit and select the default JVM. Hopefully, that works.</p>\n\n<p><strong>Edit 2:</strong></p>\n\n<p>You can also try going into the folder where you have all your projects and delete the <code>.metadata</code> for eclipse (be aware that you'll have to re-import all the projects afterwards! Also all the environment settings you've set would also have to be redone). After it was deleted just import the project again, and hopefully, it works.</p>\n"},{"comments":[{"owner":{"account_id":7139664,"reputation":50276,"user_id":5457853,"accept_rate":75,"display_name":"Thracian"},"score":0,"creation_date":1535880055,"post_id":47207330,"comment_id":91220998,"body_markdown":"Eclipse for Android is not supported now. You can&#39;t use Api 26+ and support libraries and some other stuff like MVVM, Room, etc. You should migrate to Android Studio. I resisted that for awhile but it became impossible to work without new libraries. You can use AS like Eclipse with workspace if you add projects as modules. I Keep 10+ separate projects in one project using modules and it gets quite easy to check out if i need some snippets from another project.","body":"Eclipse for Android is not supported now. You can&#39;t use Api 26+ and support libraries and some other stuff like MVVM, Room, etc. You should migrate to Android Studio. I resisted that for awhile but it became impossible to work without new libraries. You can use AS like Eclipse with workspace if you add projects as modules. I Keep 10+ separate projects in one project using modules and it gets quite easy to check out if i need some snippets from another project."}],"tags":[],"owner":{"account_id":7139664,"reputation":50276,"user_id":5457853,"accept_rate":75,"display_name":"Thracian"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510245969,"creation_date":1510245969,"answer_id":47207330,"question_id":47205880,"body_markdown":"I&#39;m also using Eclipse Oxygen, migrated from Mars. I faced the same error. I deleted `.metadata`, `.recommenders` folders and added projects from archive and issue is solved. I also use Android Studio but i like Eclipse much more.","title":"Eclipse Oxygen - The project was not built since its build path is incomplete","body":"<p>I'm also using Eclipse Oxygen, migrated from Mars. I faced the same error. I deleted <code>.metadata</code>, <code>.recommenders</code> folders and added projects from archive and issue is solved. I also use Android Studio but i like Eclipse much more.</p>\n"},{"comments":[{"owner":{"account_id":1212711,"reputation":2020,"user_id":1180963,"accept_rate":75,"display_name":"eduyayo"},"score":0,"creation_date":1643059374,"post_id":53241530,"comment_id":125235397,"body_markdown":"the eclipse maven plugin is obsolete... you can use it to clean *some* eclipse generated files but don&#39;t use the configuration generator because it clashes with m2e","body":"the eclipse maven plugin is obsolete... you can use it to clean <i>some</i> eclipse generated files but don&#39;t use the configuration generator because it clashes with m2e"},{"owner":{"account_id":1914566,"reputation":410,"user_id":1727416,"accept_rate":29,"display_name":"Will"},"score":1,"creation_date":1647222042,"post_id":53241530,"comment_id":126309410,"body_markdown":"Restart eclipse worked for me...","body":"Restart eclipse worked for me..."},{"owner":{"account_id":10343265,"reputation":56,"user_id":7628964,"display_name":"Haldun"},"score":1,"creation_date":1690488030,"post_id":53241530,"comment_id":135364805,"body_markdown":"This worked for me for resolving VS Code java language server problem.","body":"This worked for me for resolving VS Code java language server problem."}],"tags":[],"owner":{"account_id":2340745,"reputation":7243,"user_id":2052097,"accept_rate":85,"display_name":"z atef"},"comment_count":3,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1598588123,"creation_date":1541870668,"answer_id":53241530,"question_id":47205880,"body_markdown":"Here is what made the error disappear for me: \r\n\r\n\r\nClose eclipse, open up a terminal window and run: \r\n\r\n    $ mvn clean eclipse:clean eclipse:eclipse","title":"Eclipse Oxygen - The project was not built since its build path is incomplete","body":"<p>Here is what made the error disappear for me:</p>\n<p>Close eclipse, open up a terminal window and run:</p>\n<pre><code>$ mvn clean eclipse:clean eclipse:eclipse\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14034553,"reputation":1,"user_id":10137582,"display_name":"Thomas P."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570516422,"creation_date":1570516422,"answer_id":58281185,"question_id":47205880,"body_markdown":"At my system the Java Runtime JAR file **jrt-fs.jar** was not found because it was in the wrong directory. This file should be located in the &quot;lib&quot; subfolder. If you installed Java at &quot;C:\\Temp\\java&quot; the file should be here at C:\\Temp\\java\\lib\\jrt-fs.jar . \r\n\r\nThese are the steps to make **jrt-fs.jar** available to Eclipse:\r\n\r\n 1. Window / Preferences -&gt; the &quot;Preferences&quot; Window opens\r\n 2. Select in the left menu: Java / Installed JREs\r\n 3. Press the [Add...] Button -&gt; A window opens\r\n 4.  Select &quot;Standard VM&quot; - The window &quot;JRE Definition&quot; opens.\r\n 5.  Enter your path information:\r\n 6. JRE home = &quot;C:\\Temp\\java&quot;\r\n 7. JRE name = &quot;MyJRE&quot;\r\n 8. Select [Add External JARs...] to link the jrt-fs.jar\r\n 9. JRE system libaries: &quot;C:\\Temp\\java\\lib\\jrt-fs.jar&quot;\r\n\r\nIt worked for me with OpenJDK12 and Eclipse 2019-09 (4.13.0).\r\nEclipse reported me this error:\r\n\r\n    The project was not built since its build path is incomplete. Cannot find the class file for java.lang.Object. Fix the build path then try building this project","title":"Eclipse Oxygen - The project was not built since its build path is incomplete","body":"<p>At my system the Java Runtime JAR file <strong>jrt-fs.jar</strong> was not found because it was in the wrong directory. This file should be located in the \"lib\" subfolder. If you installed Java at \"C:\\Temp\\java\" the file should be here at C:\\Temp\\java\\lib\\jrt-fs.jar . </p>\n\n<p>These are the steps to make <strong>jrt-fs.jar</strong> available to Eclipse:</p>\n\n<ol>\n<li>Window / Preferences -> the \"Preferences\" Window opens</li>\n<li>Select in the left menu: Java / Installed JREs</li>\n<li>Press the [Add...] Button -> A window opens</li>\n<li>Select \"Standard VM\" - The window \"JRE Definition\" opens.</li>\n<li>Enter your path information:</li>\n<li>JRE home = \"C:\\Temp\\java\"</li>\n<li>JRE name = \"MyJRE\"</li>\n<li>Select [Add External JARs...] to link the jrt-fs.jar</li>\n<li>JRE system libaries: \"C:\\Temp\\java\\lib\\jrt-fs.jar\"</li>\n</ol>\n\n<p>It worked for me with OpenJDK12 and Eclipse 2019-09 (4.13.0).\nEclipse reported me this error:</p>\n\n<pre><code>The project was not built since its build path is incomplete. Cannot find the class file for java.lang.Object. Fix the build path then try building this project\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7842025,"reputation":1,"user_id":5928209,"display_name":"Abinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1577643408,"creation_date":1577643408,"answer_id":59522067,"question_id":47205880,"body_markdown":"I had faced this problem. I added the C:\\Users\\Office 2\\android-sdks\\platforms\\android-19\\android.jar to the Java Build Path&#39;s Library. And the project started to run again.\r\nThe problem occurred due to my carelessness. Yesterday night I was updating the Android SDK, and at the same time I tried to run the project,  while the SDK Manager was uncompressing the system image. The Project couldn&#39;t start and the error occurred. \r\n\r\nI tried all the methods given by others. But nothing worked. It solved when I added the android.jar to the library.\r\n\r\nI guessed it that android library is missing. not the Java, when I saw the errors only at the android methods and imports. But when I read the posts, I got confused and wasted some time trying wrong way.\r\n\r\n","title":"Eclipse Oxygen - The project was not built since its build path is incomplete","body":"<p>I had faced this problem. I added the C:\\Users\\Office 2\\android-sdks\\platforms\\android-19\\android.jar to the Java Build Path's Library. And the project started to run again.\nThe problem occurred due to my carelessness. Yesterday night I was updating the Android SDK, and at the same time I tried to run the project,  while the SDK Manager was uncompressing the system image. The Project couldn't start and the error occurred. </p>\n\n<p>I tried all the methods given by others. But nothing worked. It solved when I added the android.jar to the library.</p>\n\n<p>I guessed it that android library is missing. not the Java, when I saw the errors only at the android methods and imports. But when I read the posts, I got confused and wasted some time trying wrong way.</p>\n"},{"tags":[],"owner":{"account_id":2093262,"reputation":9491,"user_id":1862590,"display_name":"Sathiamoorthy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615877791,"creation_date":1586335772,"answer_id":61096765,"question_id":47205880,"body_markdown":"I had faced the same issue and tried different solutions, I have reinstalled my JDK 11 and restarted the machine, after that the issue gets resolved.","title":"Eclipse Oxygen - The project was not built since its build path is incomplete","body":"<p>I had faced the same issue and tried different solutions, I have reinstalled my JDK 11 and restarted the machine, after that the issue gets resolved.</p>\n"},{"tags":[],"owner":{"account_id":6069196,"reputation":59,"user_id":4738573,"display_name":"art"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661349382,"creation_date":1619044170,"answer_id":67204261,"question_id":47205880,"body_markdown":"I have similar issue when importing Spring Boot, jdk 11 (using \r\ninside docker) project to Eclipse 2019 (2021), in Ubuntu, instead when \r\nimporting to Inteelij IDEA Community or NetBeans IDEs they do \r\nnot produce the same set of after-import errors as in Eclipse. \r\nThe Spring Boot is multimodule maven projects and two child \r\nmodules give such 2 &quot;problems&quot; in appropriate problems tab:\r\n\r\n    The project was not built since its build path is incomplete. \r\n    Cannot find the class file for java.lang.Object. Fix the build \r\n    path then try building this project\r\n\r\nNext 2 errors are produced in two classes of aforementioned\r\nmaven modules:\r\n\r\n    The type java.lang.Object cannot be resolved. It is \r\n    indirectly referenced from required .class files\r\n\r\nManipulation with adding JDK 11 to submodules buildpath\r\njust leads to the thousands of problems. Also it is\r\ngot when I use Eclipse-File-Maven-Update.\r\nMoreover when I try to edit most of existing classes or add new ones\r\nI got red underline that tells\r\n\r\n    Implicit super constructor Object() is undefined for default \r\n    constructor. Must define an explicit constructor\r\n\r\n. So almost no opportunity to use Eclipse\r\neven at prebuild stage as docker-compose should run build and \r\nrun. Indeed I noted that such issue is produced just when project \r\nalso uses modules (module-info files introduced in java9).\r\nWhen I import project on jdk 8 (even not installed on \r\nsystem), or even on jdk11 without module-info files all\r\nis fine in Eclipse after import.\r\nAnother difference is that of when I use problem old no module \r\nproject the Build Path is composed with jre environment 8 and \r\nmaven dependency items, but when using\r\n&quot;module-info&quot; project the Build path contains -module path, \r\nand -classpath. So I even do not know where to add jre 11,\r\nindeed adding does not resolve issue, just make more errors.\r\nSo what is the resolution of the case??? What settings to do \r\nin Eclipse?","title":"Eclipse Oxygen - The project was not built since its build path is incomplete","body":"<p>I have similar issue when importing Spring Boot, jdk 11 (using\ninside docker) project to Eclipse 2019 (2021), in Ubuntu, instead when\nimporting to Inteelij IDEA Community or NetBeans IDEs they do\nnot produce the same set of after-import errors as in Eclipse.\nThe Spring Boot is multimodule maven projects and two child\nmodules give such 2 &quot;problems&quot; in appropriate problems tab:</p>\n<pre><code>The project was not built since its build path is incomplete. \nCannot find the class file for java.lang.Object. Fix the build \npath then try building this project\n</code></pre>\n<p>Next 2 errors are produced in two classes of aforementioned\nmaven modules:</p>\n<pre><code>The type java.lang.Object cannot be resolved. It is \nindirectly referenced from required .class files\n</code></pre>\n<p>Manipulation with adding JDK 11 to submodules buildpath\njust leads to the thousands of problems. Also it is\ngot when I use Eclipse-File-Maven-Update.\nMoreover when I try to edit most of existing classes or add new ones\nI got red underline that tells</p>\n<pre><code>Implicit super constructor Object() is undefined for default \nconstructor. Must define an explicit constructor\n</code></pre>\n<p>. So almost no opportunity to use Eclipse\neven at prebuild stage as docker-compose should run build and\nrun. Indeed I noted that such issue is produced just when project\nalso uses modules (module-info files introduced in java9).\nWhen I import project on jdk 8 (even not installed on\nsystem), or even on jdk11 without module-info files all\nis fine in Eclipse after import.\nAnother difference is that of when I use problem old no module\nproject the Build Path is composed with jre environment 8 and\nmaven dependency items, but when using\n&quot;module-info&quot; project the Build path contains -module path,\nand -classpath. So I even do not know where to add jre 11,\nindeed adding does not resolve issue, just make more errors.\nSo what is the resolution of the case??? What settings to do\nin Eclipse?</p>\n"},{"tags":[],"owner":{"account_id":1661507,"reputation":9914,"user_id":1529709,"accept_rate":100,"display_name":"zb226"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661349316,"creation_date":1661349316,"answer_id":73474451,"question_id":47205880,"body_markdown":"I got this out of the blue in a workspace that was working properly before. This problem seems to indicate that the project configuration somehow got corrupted.\r\n\r\nRestarting Eclipse didn&#39;t help, but in the same vein as the answers dealing with Maven, regenerating the Eclipse project config with:\r\n\r\n    ./gradle eclipse\r\n\r\nor\r\n\r\n    ./gradlew eclipse\r\n\r\nif you use the wrapper, solved this problem for me.\r\n","title":"Eclipse Oxygen - The project was not built since its build path is incomplete","body":"<p>I got this out of the blue in a workspace that was working properly before. This problem seems to indicate that the project configuration somehow got corrupted.</p>\n<p>Restarting Eclipse didn't help, but in the same vein as the answers dealing with Maven, regenerating the Eclipse project config with:</p>\n<pre><code>./gradle eclipse\n</code></pre>\n<p>or</p>\n<pre><code>./gradlew eclipse\n</code></pre>\n<p>if you use the wrapper, solved this problem for me.</p>\n"},{"tags":[],"owner":{"account_id":11170080,"reputation":1139,"user_id":8663316,"display_name":"Faizan Haidar Khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1666695633,"creation_date":1666695633,"answer_id":74193038,"question_id":47205880,"body_markdown":"In Eclipse, Right click Project -&gt; `Maven` -&gt; `Update Project`. It fixed errors in my project. ","title":"Eclipse Oxygen - The project was not built since its build path is incomplete","body":"<p>In Eclipse, Right click Project -&gt; <code>Maven</code> -&gt; <code>Update Project</code>. It fixed errors in my project.</p>\n"},{"tags":[],"owner":{"account_id":4306599,"reputation":3578,"user_id":3518815,"accept_rate":25,"display_name":"Kuntal Ghosh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678521978,"creation_date":1678521978,"answer_id":75703596,"question_id":47205880,"body_markdown":"Below are the steps of how I resolved the issue in my system.\r\n\r\n - Restarted eclipse\r\n - Right click on pom.xml and hit maven clean\r\n - Again right click on pom.xml and hit maven install\r\n\r\nI get build success after maven install is completed.","title":"Eclipse Oxygen - The project was not built since its build path is incomplete","body":"<p>Below are the steps of how I resolved the issue in my system.</p>\n<ul>\n<li>Restarted eclipse</li>\n<li>Right click on pom.xml and hit maven clean</li>\n<li>Again right click on pom.xml and hit maven install</li>\n</ul>\n<p>I get build success after maven install is completed.</p>\n"},{"tags":[],"owner":{"account_id":29976136,"reputation":1,"user_id":22972303,"display_name":"Akshay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700751177,"creation_date":1700751098,"answer_id":77537797,"question_id":47205880,"body_markdown":"This Helped me\r\n\r\nSteps:\r\n 1. How to resolve java build path problem in Eclipse\r\n 2. Right click the project - select build path - click configure build path\r\n 3. click the librarie tab\r\n 4. remove the jre (error jre) we need to jdk\r\n 5. click Add Library\r\n 6. select JRE system library\r\n 7. click installed jre\r\n 8. click add button : or select jdk in this window if not available the jdk click add button\r\n 9. select the jdk directory in the system\r\n 10. select jdk and apply close\r\n 11. building the project\r\n 12. check it the build path problem resolved\r\n\r\nYou Can check the link below video:- \r\nhttps://www.youtube.com/watch?v=WHjfJnpwcTQ","title":"Eclipse Oxygen - The project was not built since its build path is incomplete","body":"<p>This Helped me</p>\n<p>Steps:</p>\n<ol>\n<li>How to resolve java build path problem in Eclipse</li>\n<li>Right click the project - select build path - click configure build path</li>\n<li>click the librarie tab</li>\n<li>remove the jre (error jre) we need to jdk</li>\n<li>click Add Library</li>\n<li>select JRE system library</li>\n<li>click installed jre</li>\n<li>click add button : or select jdk in this window if not available the jdk click add button</li>\n<li>select the jdk directory in the system</li>\n<li>select jdk and apply close</li>\n<li>building the project</li>\n<li>check it the build path problem resolved</li>\n</ol>\n<p>You Can check the link below video:-\n<a href=\"https://www.youtube.com/watch?v=WHjfJnpwcTQ\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=WHjfJnpwcTQ</a></p>\n"}],"owner":{"account_id":6532591,"reputation":1944,"user_id":5053275,"accept_rate":53,"display_name":"user123456789"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107298,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"answer_count":11,"score":23,"last_activity_date":1700751177,"creation_date":1510241938,"question_id":47205880,"body_markdown":"I just installed Eclipse Oxygen and tried to open an existing project into the workbench but I get this error:\r\n\r\n&gt; The project was not built since its build path is incomplete. Cannot\r\n&gt; find the class file for java.lang.Object. Fix the build path then try\r\n&gt; building this project\r\n\r\nI tried right clicking on the project - went to Properties - Java Build Path - Libraries - Add Library - JRE System Library and selected Workbench default JRE (jre1.8.0_60).\r\n\r\nI then cleaned and rebuilt the project but it then causes more errors to come up like:\r\n\r\n    ActionBar cannot be resolved to a type\r\n    Activity cannot be resolved to a variable\r\n    AdapterView cannot be resolved to a type\r\n    ArrayAdapter cannot be resolved to a type\r\n\r\n","title":"Eclipse Oxygen - The project was not built since its build path is incomplete","body":"<p>I just installed Eclipse Oxygen and tried to open an existing project into the workbench but I get this error:</p>\n\n<blockquote>\n  <p>The project was not built since its build path is incomplete. Cannot\n  find the class file for java.lang.Object. Fix the build path then try\n  building this project</p>\n</blockquote>\n\n<p>I tried right clicking on the project - went to Properties - Java Build Path - Libraries - Add Library - JRE System Library and selected Workbench default JRE (jre1.8.0_60).</p>\n\n<p>I then cleaned and rebuilt the project but it then causes more errors to come up like:</p>\n\n<pre><code>ActionBar cannot be resolved to a type\nActivity cannot be resolved to a variable\nAdapterView cannot be resolved to a type\nArrayAdapter cannot be resolved to a type\n</code></pre>\n"},{"tags":["java","sql","spring","spring-boot","hibernate"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1700756641,"post_id":77537757,"comment_id":136695952,"body_markdown":"Please read [How to Ask](https://stackoverflow.com/help/how-to-ask). You should provide [complete error message](https://meta.stackoverflow.com/questions/359146/why-should-i-post-complete-errors-why-isnt-the-message-itself-enough)","body":"Please read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a>. You should provide <a href=\"https://meta.stackoverflow.com/questions/359146/why-should-i-post-complete-errors-why-isnt-the-message-itself-enough\">complete error message</a>"}],"owner":{"account_id":14203739,"reputation":41,"user_id":10260948,"display_name":"Ashika Jinturkar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700750683,"creation_date":1700750683,"question_id":77537757,"body_markdown":"I am trying to upload multiple files in MySQL database. I am using Multipart to achieve it. While defining the Model &#39;FileDB&#39;, I came across an issue with size of Column that stores the Attached Documents.\r\nMy requirement is the Database Column should store list of Documents I will upload i.e 120 MB of files for one record. Is it possible? How should I specify the size of column through Spring Boot\r\n\r\n```\r\npackage springboot.uploadfilesdatabase.model;\r\n\r\n\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Lob;\r\nimport jakarta.persistence.Table;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Entity\r\n@Table(name = &quot;files&quot;)\r\n@Data\r\n@Builder\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n\r\npublic class FileDB {\r\n\r\n\r\n\t  @Id\r\n\t  @GeneratedValue(strategy = GenerationType.AUTO)\r\n\t\r\n\t  private long id;\r\n\r\n\t  private String name;\r\n\t  \r\n\t  private String type;\r\n\r\n\t  @Lob\r\n\t  @Column(length = &quot;?&quot;)\r\n\t  private byte[] data;\r\n\t  \r\n\t  \r\n\t\r\n}\r\n\r\n```\r\n \r\n\r\nI tried without specifying length, but its throwing Exception That I have designed.\r\nAs per my understandings, The appropriate size is not specified during Entity Code.","title":"Size of @Lob annotation column to accept multiple large files of around 100 mb","body":"<p>I am trying to upload multiple files in MySQL database. I am using Multipart to achieve it. While defining the Model 'FileDB', I came across an issue with size of Column that stores the Attached Documents.\nMy requirement is the Database Column should store list of Documents I will upload i.e 120 MB of files for one record. Is it possible? How should I specify the size of column through Spring Boot</p>\n<pre><code>package springboot.uploadfilesdatabase.model;\n\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Lob;\nimport jakarta.persistence.Table;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Entity\n@Table(name = &quot;files&quot;)\n@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n\npublic class FileDB {\n\n\n      @Id\n      @GeneratedValue(strategy = GenerationType.AUTO)\n    \n      private long id;\n\n      private String name;\n      \n      private String type;\n\n      @Lob\n      @Column(length = &quot;?&quot;)\n      private byte[] data;\n      \n      \n    \n}\n\n</code></pre>\n<p>I tried without specifying length, but its throwing Exception That I have designed.\nAs per my understandings, The appropriate size is not specified during Entity Code.</p>\n"},{"tags":["java","json","jackson","xss"],"comments":[{"owner":{"account_id":7748730,"reputation":1941,"user_id":8027026,"display_name":"Paul Benn"},"score":1,"creation_date":1528988217,"post_id":50857625,"comment_id":88723371,"body_markdown":"Another approach could be to iterate over the object entries and individually escape each key and value - that way there is also less chance of malformed data getting passed to your JS. Since you read the OWASP guide you may want to take a look at [their anti-XSS encoder](https://github.com/OWASP/owasp-java-encoder) too.","body":"Another approach could be to iterate over the object entries and individually escape each key and value - that way there is also less chance of malformed data getting passed to your JS. Since you read the OWASP guide you may want to take a look at <a href=\"https://github.com/OWASP/owasp-java-encoder\" rel=\"nofollow noreferrer\">their anti-XSS encoder</a> too."},{"owner":{"account_id":13259,"reputation":67764,"user_id":26510,"accept_rate":99,"display_name":"Brad Parks"},"score":0,"creation_date":1529016802,"post_id":50857625,"comment_id":88736214,"body_markdown":"thanks! that&#39;s a great suggestion. I was considering it, but was hoping that owasp or someone else had wrapped up this task exactly.","body":"thanks! that&#39;s a great suggestion. I was considering it, but was hoping that owasp or someone else had wrapped up this task exactly."}],"answers":[{"tags":[],"owner":{"account_id":7748730,"reputation":1941,"user_id":8027026,"display_name":"Paul Benn"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1580456666,"creation_date":1529051716,"answer_id":50871867,"question_id":50857625,"body_markdown":"A possible approach could be to iterate over the object entries and individually escape each key and value once the node is constructed by your chosen library.\r\n\r\nFollowing my comment above, I&#39;ve implemented a simple recursive solution using both [Jackson][1] (from your question) and [GSON][2], a different library where objects are slightly easier to construct and the code is more readable. The escaping mechanism used is the [OWASP Java Encoder][3]:\r\n\r\n##Jackson\r\n\r\n    private static JsonNode clean(JsonNode node) {\r\n        if(node.isValueNode()) { // Base case - we have a Number, Boolean or String\r\n            if(JsonNodeType.STRING == node.getNodeType()) {\r\n                // Escape all String values\r\n                return JsonNodeFactory.instance.textNode(Encode.forHtml(node.asText()));\r\n            } else {\r\n                return node;\r\n            }\r\n        } else { // Recursive case - iterate over JSON object entries\r\n            ObjectNode clean = JsonNodeFactory.instance.objectNode();\r\n            for (Iterator&lt;Map.Entry&lt;String, JsonNode&gt;&gt; it = node.fields(); it.hasNext(); ) {\r\n                Map.Entry&lt;String, JsonNode&gt; entry = it.next();\r\n                // Encode the key right away and encode the value recursively\r\n                clean.set(Encode.forHtml(entry.getKey()), clean(entry.getValue()));\r\n            }\r\n            return clean;\r\n        }\r\n    }\r\n\r\n##GSON\r\n\r\n    private static JsonElement clean(JsonElement elem) {\r\n        if (elem.isJsonPrimitive()) { // Base case - we have a Number, Boolean or String\r\n            JsonPrimitive primitive = elem.getAsJsonPrimitive();\r\n            if(primitive.isString()) {\r\n                // Escape all String values\r\n                return new JsonPrimitive(Encode.forHtml(primitive.getAsString()));\r\n            } else {\r\n                return primitive;\r\n            }\r\n        } else if (elem.isJsonArray()) { // We have an array - GSON requires handling this separately\r\n\t\t\tJsonArray cleanArray = new JsonArray();\r\n\t\t\tfor(JsonElement arrayElement: elem.getAsJsonArray()) {\r\n\t\t\t\tcleanArray.add(clean(arrayElement));\r\n\t\t\t}\r\n\t\t\treturn cleanArray;\r\n\t\t} else { // Recursive case - iterate over JSON object entries\r\n            JsonObject obj = elem.getAsJsonObject();\r\n            JsonObject clean = new JsonObject();\r\n            for(Map.Entry&lt;String, JsonElement&gt; entry :  obj.entrySet()) {\r\n                // Encode the key right away and encode the value recursively\r\n                clean.add(Encode.forHtml(entry.getKey()), clean(entry.getValue()));\r\n            }\r\n            return clean;\r\n        }\r\n    }\r\n\r\nSample input (both libraries):\r\n\r\n    {\r\n        &quot;nested&quot;: {\r\n            &quot;&lt;html&gt;&quot;: &quot;&lt;script&gt;(function(){alert(&#39;xss1&#39;)})();&lt;/script&gt;&quot;\r\n        },\r\n        &quot;xss&quot;: &quot;&lt;script&gt;(function(){alert(&#39;xss2&#39;)})();&lt;/script&gt;&quot;\r\n    }\r\n\r\nSample output (both libraries):\r\n\r\n    {\r\n        &quot;nested&quot;: {\r\n            &quot;&amp;lt;html&amp;gt;&quot;: &quot;&amp;lt;script&amp;gt;(function(){alert(&amp;#39;xss1&amp;#39;)})();&amp;lt;/script&amp;gt;&quot;\r\n        },\r\n        &quot;xss&quot;: &quot;&amp;lt;script&amp;gt;(function(){alert(&amp;#39;xss2&amp;#39;)})();&amp;lt;/script&amp;gt;&quot;\r\n    }\r\n\r\n\r\n  [1]: https://github.com/FasterXML/jackson\r\n  [2]: https://github.com/google/gson\r\n  [3]: https://github.com/OWASP/owasp-java-encoder","title":"Java and XSS: How to html escape a JSON string to protect against XSS?","body":"<p>A possible approach could be to iterate over the object entries and individually escape each key and value once the node is constructed by your chosen library.</p>\n\n<p>Following my comment above, I've implemented a simple recursive solution using both <a href=\"https://github.com/FasterXML/jackson\" rel=\"noreferrer\">Jackson</a> (from your question) and <a href=\"https://github.com/google/gson\" rel=\"noreferrer\">GSON</a>, a different library where objects are slightly easier to construct and the code is more readable. The escaping mechanism used is the <a href=\"https://github.com/OWASP/owasp-java-encoder\" rel=\"noreferrer\">OWASP Java Encoder</a>:</p>\n\n<h2>Jackson</h2>\n\n<pre><code>private static JsonNode clean(JsonNode node) {\n    if(node.isValueNode()) { // Base case - we have a Number, Boolean or String\n        if(JsonNodeType.STRING == node.getNodeType()) {\n            // Escape all String values\n            return JsonNodeFactory.instance.textNode(Encode.forHtml(node.asText()));\n        } else {\n            return node;\n        }\n    } else { // Recursive case - iterate over JSON object entries\n        ObjectNode clean = JsonNodeFactory.instance.objectNode();\n        for (Iterator&lt;Map.Entry&lt;String, JsonNode&gt;&gt; it = node.fields(); it.hasNext(); ) {\n            Map.Entry&lt;String, JsonNode&gt; entry = it.next();\n            // Encode the key right away and encode the value recursively\n            clean.set(Encode.forHtml(entry.getKey()), clean(entry.getValue()));\n        }\n        return clean;\n    }\n}\n</code></pre>\n\n<h2>GSON</h2>\n\n<pre><code>private static JsonElement clean(JsonElement elem) {\n    if (elem.isJsonPrimitive()) { // Base case - we have a Number, Boolean or String\n        JsonPrimitive primitive = elem.getAsJsonPrimitive();\n        if(primitive.isString()) {\n            // Escape all String values\n            return new JsonPrimitive(Encode.forHtml(primitive.getAsString()));\n        } else {\n            return primitive;\n        }\n    } else if (elem.isJsonArray()) { // We have an array - GSON requires handling this separately\n        JsonArray cleanArray = new JsonArray();\n        for(JsonElement arrayElement: elem.getAsJsonArray()) {\n            cleanArray.add(clean(arrayElement));\n        }\n        return cleanArray;\n    } else { // Recursive case - iterate over JSON object entries\n        JsonObject obj = elem.getAsJsonObject();\n        JsonObject clean = new JsonObject();\n        for(Map.Entry&lt;String, JsonElement&gt; entry :  obj.entrySet()) {\n            // Encode the key right away and encode the value recursively\n            clean.add(Encode.forHtml(entry.getKey()), clean(entry.getValue()));\n        }\n        return clean;\n    }\n}\n</code></pre>\n\n<p>Sample input (both libraries):</p>\n\n<pre><code>{\n    \"nested\": {\n        \"&lt;html&gt;\": \"&lt;script&gt;(function(){alert('xss1')})();&lt;/script&gt;\"\n    },\n    \"xss\": \"&lt;script&gt;(function(){alert('xss2')})();&lt;/script&gt;\"\n}\n</code></pre>\n\n<p>Sample output (both libraries):</p>\n\n<pre><code>{\n    \"nested\": {\n        \"&amp;lt;html&amp;gt;\": \"&amp;lt;script&amp;gt;(function(){alert(&amp;#39;xss1&amp;#39;)})();&amp;lt;/script&amp;gt;\"\n    },\n    \"xss\": \"&amp;lt;script&amp;gt;(function(){alert(&amp;#39;xss2&amp;#39;)})();&amp;lt;/script&amp;gt;\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13259,"reputation":67764,"user_id":26510,"accept_rate":99,"display_name":"Brad Parks"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1529408174,"creation_date":1529323546,"answer_id":50909176,"question_id":50857625,"body_markdown":"I think [Paul Benn&#39;s answer](https://stackoverflow.com/a/50871867/26510) is the best approach overall, but if you don&#39;t want to iterate over the json nodes, you could consider using [Encode.forHtmlContent](https://owasp.github.io/owasp-java-encoder/encoder/apidocs/org/owasp/encoder/Encode.html#forHtmlContent-java.lang.String-), which doesn&#39;t escape quotes. I feel this is probably safe as I can&#39;t think of how introducing an additional quote into a quoted string could cause an exploit. I&#39;ll leave it to the reader to review the docs and decide for themselves!\r\n\r\n### ivy.xml\r\n\r\n    &lt;dependency org=&quot;org.owasp.encoder&quot; name=&quot;encoder&quot; rev=&quot;1.2.1&quot;/&gt;\r\n\r\nand some code to do the html encoding\r\n\r\n    private String objectToJson(Object value)\r\n    {\r\n        String result;\r\n        try\r\n        {\r\n            result = jsonWriter.writeValueAsString(value);\r\n            return Encode.forHtmlContent(result);\r\n        }\r\n        catch (JsonProcessingException e)\r\n        {\r\n            return &quot;null&quot;;\r\n        }\r\n    }\r\n\r\n","title":"Java and XSS: How to html escape a JSON string to protect against XSS?","body":"<p>I think <a href=\"https://stackoverflow.com/a/50871867/26510\">Paul Benn's answer</a> is the best approach overall, but if you don't want to iterate over the json nodes, you could consider using <a href=\"https://owasp.github.io/owasp-java-encoder/encoder/apidocs/org/owasp/encoder/Encode.html#forHtmlContent-java.lang.String-\" rel=\"nofollow noreferrer\">Encode.forHtmlContent</a>, which doesn't escape quotes. I feel this is probably safe as I can't think of how introducing an additional quote into a quoted string could cause an exploit. I'll leave it to the reader to review the docs and decide for themselves!</p>\n\n<h3>ivy.xml</h3>\n\n<pre><code>&lt;dependency org=\"org.owasp.encoder\" name=\"encoder\" rev=\"1.2.1\"/&gt;\n</code></pre>\n\n<p>and some code to do the html encoding</p>\n\n<pre><code>private String objectToJson(Object value)\n{\n    String result;\n    try\n    {\n        result = jsonWriter.writeValueAsString(value);\n        return Encode.forHtmlContent(result);\n    }\n    catch (JsonProcessingException e)\n    {\n        return \"null\";\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1370556,"reputation":1047,"user_id":1305875,"accept_rate":67,"display_name":"ABC123"},"score":0,"creation_date":1580402095,"post_id":59990125,"comment_id":106094351,"body_markdown":"You may want to describe what is new in your update.","body":"You may want to describe what is new in your update."}],"tags":[],"owner":{"account_id":12461944,"reputation":125,"user_id":9073305,"display_name":"JKRo"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1580400732,"creation_date":1580400732,"answer_id":59990125,"question_id":50857625,"body_markdown":"Updating [Paul Benn&#39;s](https://stackoverflow.com/users/8027026/paul-benn) answer of the Gson version to include json value being an array\r\n\r\n```\r\nprivate static JsonElement clean(JsonElement elem) {\r\n    if(elem.isJsonPrimitive()) { // Base case - we have a Number, Boolean or String\r\n        JsonPrimitive primitive = elem.getAsJsonPrimitive();\r\n        if(primitive.isString()) {\r\n            // Escape all String values\r\n            return new JsonPrimitive(Encode.forHtml(primitive.getAsString()));\r\n        } else {\r\n            return primitive;\r\n        }\r\n    }  else if( elem.isJsonArray()  ) { // If the object is an array  &quot;cars&quot;: [&quot;toyota&quot;, &quot;nissan&quot;, &quot;bmw&quot;]\r\n        JsonArray jsonA = elem.getAsJsonArray();\r\n        JsonArray cleanedNewArray = new JsonArray();\r\n        for(JsonElement jsonAE: jsonA) {\r\n            cleanedNewArray.add(clean(jsonAE));\r\n        }\r\n        return cleanedNewArray;\r\n    } else { // Recursive case - iterate over JSON object entries\r\n        JsonObject obj = elem.getAsJsonObject();\r\n        JsonObject clean = new JsonObject();\r\n        for(Map.Entry&lt;String, JsonElement&gt; entry :  obj.entrySet()) {\r\n            // Encode the key right away and encode the value recursively\r\n            clean.add(Encode.forHtml(entry.getKey()), clean(entry.getValue()));\r\n        }\r\n        return clean;\r\n    }\r\n}\r\n\r\n```","title":"Java and XSS: How to html escape a JSON string to protect against XSS?","body":"<p>Updating <a href=\"https://stackoverflow.com/users/8027026/paul-benn\">Paul Benn's</a> answer of the Gson version to include json value being an array</p>\n\n<pre><code>private static JsonElement clean(JsonElement elem) {\n    if(elem.isJsonPrimitive()) { // Base case - we have a Number, Boolean or String\n        JsonPrimitive primitive = elem.getAsJsonPrimitive();\n        if(primitive.isString()) {\n            // Escape all String values\n            return new JsonPrimitive(Encode.forHtml(primitive.getAsString()));\n        } else {\n            return primitive;\n        }\n    }  else if( elem.isJsonArray()  ) { // If the object is an array  \"cars\": [\"toyota\", \"nissan\", \"bmw\"]\n        JsonArray jsonA = elem.getAsJsonArray();\n        JsonArray cleanedNewArray = new JsonArray();\n        for(JsonElement jsonAE: jsonA) {\n            cleanedNewArray.add(clean(jsonAE));\n        }\n        return cleanedNewArray;\n    } else { // Recursive case - iterate over JSON object entries\n        JsonObject obj = elem.getAsJsonObject();\n        JsonObject clean = new JsonObject();\n        for(Map.Entry&lt;String, JsonElement&gt; entry :  obj.entrySet()) {\n            // Encode the key right away and encode the value recursively\n            clean.add(Encode.forHtml(entry.getKey()), clean(entry.getValue()));\n        }\n        return clean;\n    }\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9271043,"reputation":21,"user_id":6885003,"display_name":"Benji Villarreal"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1700750239,"creation_date":1604479596,"answer_id":64676721,"question_id":50857625,"body_markdown":"Adding a version of [JKRo][1] using Jackson with Esapi.\r\n\r\n    private JsonNode clean(JsonNode node, ObjectMapper mapper) {\r\n        if(node.isValueNode()) { // Base case - we have a Number, Boolean or String\r\n            if(JsonNodeType.STRING == node.getNodeType()) {\r\n                // Escape all String values\r\n                return JsonNodeFactory.instance.textNode(ESAPI.encoder().encodeForHTML(node.asText()));\r\n            } else {\r\n                return node;\r\n            }\r\n        } else if(node.isArray()) { // If the object is an array  &quot;cars&quot;: [&quot;toyota&quot;, &quot;nissan&quot;, &quot;bmw&quot;]\r\n            ArrayNode cleanedNewArray = mapper.createArrayNode();\r\n            for (final JsonNode objNode : node) {\r\n                cleanedNewArray.add(clean(objNode, mapper));\r\n            }\r\n            return cleanedNewArray;\r\n        } else { // Recursive case - iterate over JSON object entries\r\n            ObjectNode clean = JsonNodeFactory.instance.objectNode();\r\n\r\n            for (Iterator&lt;Map.Entry&lt;String, JsonNode&gt;&gt; it = node.fields(); it.hasNext(); ) {\r\n                Map.Entry&lt;String, JsonNode&gt; entry = it.next();\r\n                // Encode the key right away and encode the value recursively\r\n                clean.set(ESAPI.encoder().encodeForHTML(entry.getKey()), clean(entry.getValue(), mapper));\r\n            }\r\n            return clean;\r\n        }\r\n    }\r\n\r\nRequest Body: \r\n\r\n    {\r\n    &quot;param1&quot;: &quot;&lt;input class=&#39;btn btn-default&#39; value=&#39;0&#39; placeholder=&#39;Ingrese sus datos&#39;&gt;&lt;/input&gt;&quot;,\r\n    &quot;param3&quot;: [\r\n    {\r\n        &quot;nombre&quot; : &quot;&lt;input class=&#39;btn btn-default&#39; value=&#39;0&#39; placeholder=&#39;Ingrese sus datos&#39;&gt;&lt;/input&gt;&quot;,\r\n        &quot;apellido&quot;: &quot;&lt;script&gt;alert(&#39;Hola mundex&#39;);&lt;/script&gt;&quot;\r\n    },\r\n    {\r\n        &quot;param4&quot;: {\r\n            &quot;nombre&quot; : &quot;&lt;input class=&#39;btn btn-default&#39; value=&#39;0&#39; placeholder=&#39;Ingrese sus datos&#39;&gt;&lt;/input&gt;&quot;,\r\n            &quot;apellido&quot;: &quot;&lt;script&gt;alert(&#39;Hola mundex&#39;);&lt;/script&gt;&quot;\r\n        }\r\n    }],\r\n    &quot;param2&quot;: &quot;alert(&#39;Hola&#39;)&quot;\r\n    }\r\n\r\nResponse Body:\r\n\r\n    {\r\n    &quot;param1&quot;: &quot;&amp;lt;input class&amp;#x3d;&amp;#x27;btn btn-default&amp;#x27; value&amp;#x3d;&amp;#x27;0&amp;#x27; placeholder&amp;#x3d;&amp;#x27;Ingrese sus datos&amp;#x27;&amp;gt;&amp;lt;&amp;#x2f;input&amp;gt;&quot;,\r\n    &quot;param3&quot;: [\r\n        {\r\n            &quot;nombre&quot;: &quot;&amp;lt;input class&amp;#x3d;&amp;#x27;btn btn-default&amp;#x27; value&amp;#x3d;&amp;#x27;0&amp;#x27; placeholder&amp;#x3d;&amp;#x27;Ingrese sus datos&amp;#x27;&amp;gt;&amp;lt;&amp;#x2f;input&amp;gt;&quot;,\r\n            &quot;apellido&quot;: &quot;&amp;lt;script&amp;gt;alert&amp;#x28;&amp;#x27;Hola mundex&amp;#x27;&amp;#x29;&amp;#x3b;&amp;lt;&amp;#x2f;script&amp;gt;&quot;\r\n        },\r\n        {\r\n            &quot;param4&quot;: {\r\n                &quot;nombre&quot;: &quot;&amp;lt;input class&amp;#x3d;&amp;#x27;btn btn-default&amp;#x27; value&amp;#x3d;&amp;#x27;0&amp;#x27; placeholder&amp;#x3d;&amp;#x27;Ingrese sus datos&amp;#x27;&amp;gt;&amp;lt;&amp;#x2f;input&amp;gt;&quot;,\r\n                &quot;apellido&quot;: &quot;&amp;lt;script&amp;gt;alert&amp;#x28;&amp;#x27;Hola mundex&amp;#x27;&amp;#x29;&amp;#x3b;&amp;lt;&amp;#x2f;script&amp;gt;&quot;\r\n            }\r\n        }\r\n    ],\r\n    &quot;param2&quot;: &quot;alert&amp;#x28;&amp;#x27;Hola&amp;#x27;&amp;#x29;&quot;\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/users/9073305/jkro","title":"Java and XSS: How to html escape a JSON string to protect against XSS?","body":"<p>Adding a version of <a href=\"https://stackoverflow.com/users/9073305/jkro\">JKRo</a> using Jackson with Esapi.</p>\n<pre><code>private JsonNode clean(JsonNode node, ObjectMapper mapper) {\n    if(node.isValueNode()) { // Base case - we have a Number, Boolean or String\n        if(JsonNodeType.STRING == node.getNodeType()) {\n            // Escape all String values\n            return JsonNodeFactory.instance.textNode(ESAPI.encoder().encodeForHTML(node.asText()));\n        } else {\n            return node;\n        }\n    } else if(node.isArray()) { // If the object is an array  &quot;cars&quot;: [&quot;toyota&quot;, &quot;nissan&quot;, &quot;bmw&quot;]\n        ArrayNode cleanedNewArray = mapper.createArrayNode();\n        for (final JsonNode objNode : node) {\n            cleanedNewArray.add(clean(objNode, mapper));\n        }\n        return cleanedNewArray;\n    } else { // Recursive case - iterate over JSON object entries\n        ObjectNode clean = JsonNodeFactory.instance.objectNode();\n\n        for (Iterator&lt;Map.Entry&lt;String, JsonNode&gt;&gt; it = node.fields(); it.hasNext(); ) {\n            Map.Entry&lt;String, JsonNode&gt; entry = it.next();\n            // Encode the key right away and encode the value recursively\n            clean.set(ESAPI.encoder().encodeForHTML(entry.getKey()), clean(entry.getValue(), mapper));\n        }\n        return clean;\n    }\n}\n</code></pre>\n<p>Request Body:</p>\n<pre><code>{\n&quot;param1&quot;: &quot;&lt;input class='btn btn-default' value='0' placeholder='Ingrese sus datos'&gt;&lt;/input&gt;&quot;,\n&quot;param3&quot;: [\n{\n    &quot;nombre&quot; : &quot;&lt;input class='btn btn-default' value='0' placeholder='Ingrese sus datos'&gt;&lt;/input&gt;&quot;,\n    &quot;apellido&quot;: &quot;&lt;script&gt;alert('Hola mundex');&lt;/script&gt;&quot;\n},\n{\n    &quot;param4&quot;: {\n        &quot;nombre&quot; : &quot;&lt;input class='btn btn-default' value='0' placeholder='Ingrese sus datos'&gt;&lt;/input&gt;&quot;,\n        &quot;apellido&quot;: &quot;&lt;script&gt;alert('Hola mundex');&lt;/script&gt;&quot;\n    }\n}],\n&quot;param2&quot;: &quot;alert('Hola')&quot;\n}\n</code></pre>\n<p>Response Body:</p>\n<pre><code>{\n&quot;param1&quot;: &quot;&amp;lt;input class&amp;#x3d;&amp;#x27;btn btn-default&amp;#x27; value&amp;#x3d;&amp;#x27;0&amp;#x27; placeholder&amp;#x3d;&amp;#x27;Ingrese sus datos&amp;#x27;&amp;gt;&amp;lt;&amp;#x2f;input&amp;gt;&quot;,\n&quot;param3&quot;: [\n    {\n        &quot;nombre&quot;: &quot;&amp;lt;input class&amp;#x3d;&amp;#x27;btn btn-default&amp;#x27; value&amp;#x3d;&amp;#x27;0&amp;#x27; placeholder&amp;#x3d;&amp;#x27;Ingrese sus datos&amp;#x27;&amp;gt;&amp;lt;&amp;#x2f;input&amp;gt;&quot;,\n        &quot;apellido&quot;: &quot;&amp;lt;script&amp;gt;alert&amp;#x28;&amp;#x27;Hola mundex&amp;#x27;&amp;#x29;&amp;#x3b;&amp;lt;&amp;#x2f;script&amp;gt;&quot;\n    },\n    {\n        &quot;param4&quot;: {\n            &quot;nombre&quot;: &quot;&amp;lt;input class&amp;#x3d;&amp;#x27;btn btn-default&amp;#x27; value&amp;#x3d;&amp;#x27;0&amp;#x27; placeholder&amp;#x3d;&amp;#x27;Ingrese sus datos&amp;#x27;&amp;gt;&amp;lt;&amp;#x2f;input&amp;gt;&quot;,\n            &quot;apellido&quot;: &quot;&amp;lt;script&amp;gt;alert&amp;#x28;&amp;#x27;Hola mundex&amp;#x27;&amp;#x29;&amp;#x3b;&amp;lt;&amp;#x2f;script&amp;gt;&quot;\n        }\n    }\n],\n&quot;param2&quot;: &quot;alert&amp;#x28;&amp;#x27;Hola&amp;#x27;&amp;#x29;&quot;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6273150,"reputation":326,"user_id":4876728,"display_name":"DBE"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700750182,"creation_date":1700705074,"answer_id":77533986,"question_id":50857625,"body_markdown":"If the contents inside the variable &quot;data&quot; will be used for creating HTML markup with dangerous DOM methods (as explained in the OWASP guides) then it is okay to employ the provided answers.\r\n\r\nBut maybe you need to preserve the actual values of the json data for further processing (including its dangerous characters), then the only obvious issue in your example occurs when the json includes a closing SCRIPT tag (which breaks the browser&#39;s JavaScript parsing and may allow the inclusion of an attacker provided new script.) It will NOT be detected by Jackson!\r\n\r\nA solution using base64 encoding:\r\n\r\n```\r\nString json = jsonWriter.writeValueAsString(complexObject);\r\nString encoded = Base64.getEncoder().encodeToString(json.getBytes(&quot;UTF-8&quot;));\r\nout.write(&quot;var encodedData = &#39;&quot; + json + &quot;&#39;;&quot;);\r\nout.write(&quot;var data = JSON.parse(window.atob(encodedData));&quot;);\r\n```\r\n\r\nSee also:\r\nhttps://stackoverflow.com/questions/28288322/how-to-get-jackson-to-escape-a-script-in-output-string","title":"Java and XSS: How to html escape a JSON string to protect against XSS?","body":"<p>If the contents inside the variable &quot;data&quot; will be used for creating HTML markup with dangerous DOM methods (as explained in the OWASP guides) then it is okay to employ the provided answers.</p>\n<p>But maybe you need to preserve the actual values of the json data for further processing (including its dangerous characters), then the only obvious issue in your example occurs when the json includes a closing SCRIPT tag (which breaks the browser's JavaScript parsing and may allow the inclusion of an attacker provided new script.) It will NOT be detected by Jackson!</p>\n<p>A solution using base64 encoding:</p>\n<pre><code>String json = jsonWriter.writeValueAsString(complexObject);\nString encoded = Base64.getEncoder().encodeToString(json.getBytes(&quot;UTF-8&quot;));\nout.write(&quot;var encodedData = '&quot; + json + &quot;';&quot;);\nout.write(&quot;var data = JSON.parse(window.atob(encodedData));&quot;);\n</code></pre>\n<p>See also:\n<a href=\"https://stackoverflow.com/questions/28288322/how-to-get-jackson-to-escape-a-script-in-output-string\">How to get Jackson to escape a &lt;/script&gt; in output string?</a></p>\n"}],"owner":{"account_id":13259,"reputation":67764,"user_id":26510,"accept_rate":99,"display_name":"Brad Parks"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19019,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":50871867,"answer_count":5,"score":11,"last_activity_date":1700750239,"creation_date":1528979491,"question_id":50857625,"body_markdown":"In Java, we&#39;ve got some code that takes a complex java object and serializes it to json. It then writes that json directly to the markup of a page, in a script tag, assigning it to a variable.\r\n\r\n    // Get object as JSON using Jackson\r\n    ObjectWriter jsonWriter = new ObjectMapper().writer().withDefaultPrettyPrinter();\r\n    String json = jsonWriter.writeValueAsString(complexObject);\r\n    \r\n    // Write JSON out to page, and assign it to a javascript variable.\r\n    Writer out = environment.getOut();\r\n    out.write(&quot;var data = &quot; + json);\r\n\r\nThe complex object can have end user content in it, which could open us up to XSS attacks.\r\n\r\n**How can I get a json version of the complex java object that has each json attribute HTML escaped, to protect against XSS injection?**\r\n\r\nI&#39;ve read the [OWASP XSS Guide](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet) and the best I&#39;ve come up with so far is this, which HTML escapes the entire JSON string, then undoes the quotes, so it can be assigned to a variable in javascript. I&#39;m sure there are better ways to do this, but this seems to work. Any suggestions?\r\n\r\n\tprivate String objectToHtmlEscapedJson(Object value) {\r\n\t\ttry {\r\n\t\t\tString result = jsonWriter.writeValueAsString(value);\r\n\t\t\tresult = StringEscapeUtils.escapeHtml(result);\r\n\t\t\tresult = result.replace(&quot;&amp;quot;&quot;, &quot;\\&quot;&quot;);\r\n\t\t\treturn result;\r\n\t\t} catch (JsonProcessingException e) {\r\n\t\t\treturn &quot;null&quot;;\r\n\t\t}\r\n\t}\r\n\r\n\r\n","title":"Java and XSS: How to html escape a JSON string to protect against XSS?","body":"<p>In Java, we've got some code that takes a complex java object and serializes it to json. It then writes that json directly to the markup of a page, in a script tag, assigning it to a variable.</p>\n\n<pre><code>// Get object as JSON using Jackson\nObjectWriter jsonWriter = new ObjectMapper().writer().withDefaultPrettyPrinter();\nString json = jsonWriter.writeValueAsString(complexObject);\n\n// Write JSON out to page, and assign it to a javascript variable.\nWriter out = environment.getOut();\nout.write(\"var data = \" + json);\n</code></pre>\n\n<p>The complex object can have end user content in it, which could open us up to XSS attacks.</p>\n\n<p><strong>How can I get a json version of the complex java object that has each json attribute HTML escaped, to protect against XSS injection?</strong></p>\n\n<p>I've read the <a href=\"https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet\" rel=\"noreferrer\">OWASP XSS Guide</a> and the best I've come up with so far is this, which HTML escapes the entire JSON string, then undoes the quotes, so it can be assigned to a variable in javascript. I'm sure there are better ways to do this, but this seems to work. Any suggestions?</p>\n\n<pre><code>private String objectToHtmlEscapedJson(Object value) {\n    try {\n        String result = jsonWriter.writeValueAsString(value);\n        result = StringEscapeUtils.escapeHtml(result);\n        result = result.replace(\"&amp;quot;\", \"\\\"\");\n        return result;\n    } catch (JsonProcessingException e) {\n        return \"null\";\n    }\n}\n</code></pre>\n"},{"tags":["java","oop","generics","instance","equals"],"comments":[{"owner":{"account_id":1273420,"reputation":4594,"user_id":1229192,"accept_rate":50,"display_name":"Michal Borek"},"score":2,"creation_date":1367743965,"post_id":16382887,"comment_id":23479957,"body_markdown":"The error you have is because anyway the generic types are erased. I think the &quot;T&quot; should take care of the check of whether passed element is of the same class","body":"The error you have is because anyway the generic types are erased. I think the &quot;T&quot; should take care of the check of whether passed element is of the same class"},{"owner":{"account_id":402964,"reputation":22541,"user_id":770452,"accept_rate":49,"display_name":"David T."},"score":0,"creation_date":1367745248,"post_id":16382887,"comment_id":23480176,"body_markdown":"@MichalBorek mmm could you please elaborate a bit? i&#39;m not fully grasping. So in another class, if i do: `new SingularNode&lt;Integer&gt;(5).equals(new SingularNode&lt;Character&gt;(&#39;k&#39;));` do you happen to know where the check is happening?","body":"@MichalBorek mmm could you please elaborate a bit? i&#39;m not fully grasping. So in another class, if i do: <code>new SingularNode&lt;Integer&gt;(5).equals(new SingularNode&lt;Character&gt;(&#39;k&#39;));</code> do you happen to know where the check is happening?"},{"owner":{"account_id":1273420,"reputation":4594,"user_id":1229192,"accept_rate":50,"display_name":"Michal Borek"},"score":0,"creation_date":1367745508,"post_id":16382887,"comment_id":23480234,"body_markdown":"I added answer to put a bunch of code.","body":"I added answer to put a bunch of code."}],"answers":[{"comments":[{"owner":{"account_id":402964,"reputation":22541,"user_id":770452,"accept_rate":49,"display_name":"David T."},"score":1,"creation_date":1367745720,"post_id":16383080,"comment_id":23480281,"body_markdown":"Oh okay, i see what you mean now. thank you. For some reason, I was under wrong the impression that Java throws an `InvalidClassCast exception` or something when you try to cast `Character` with an `Integer`. but it just returns false instead of erroring. i see it now","body":"Oh okay, i see what you mean now. thank you. For some reason, I was under wrong the impression that Java throws an <code>InvalidClassCast exception</code> or something when you try to cast <code>Character</code> with an <code>Integer</code>. but it just returns false instead of erroring. i see it now"},{"owner":{"account_id":1273420,"reputation":4594,"user_id":1229192,"accept_rate":50,"display_name":"Michal Borek"},"score":1,"creation_date":1367745793,"post_id":16383080,"comment_id":23480296,"body_markdown":"Usually the first think we check in equals method is class of the other object, and all Java equals implementations do it that way.","body":"Usually the first think we check in equals method is class of the other object, and all Java equals implementations do it that way."},{"owner":{"account_id":402964,"reputation":22541,"user_id":770452,"accept_rate":49,"display_name":"David T."},"score":1,"creation_date":1367745926,"post_id":16383080,"comment_id":23480322,"body_markdown":"So in the cast `(SingularNode&lt;T&gt;)obj`, what&#39;s actually happening is that it is casting `obj` to `SingularNode`, rather than `T`. which means that the `obj.value` is actually type `T`, right?","body":"So in the cast <code>(SingularNode&lt;T&gt;)obj</code>, what&#39;s actually happening is that it is casting <code>obj</code> to <code>SingularNode</code>, rather than <code>T</code>. which means that the <code>obj.value</code> is actually type <code>T</code>, right?"},{"owner":{"account_id":1273420,"reputation":4594,"user_id":1229192,"accept_rate":50,"display_name":"Michal Borek"},"score":2,"creation_date":1367745995,"post_id":16383080,"comment_id":23480334,"body_markdown":"Yes. Precisely it is of type java.lang.Object, since after compilation generics are removed. Generics are needed only at compile time to check for type safety (this is called type erasure). So generics are not the same as templates in C++","body":"Yes. Precisely it is of type java.lang.Object, since after compilation generics are removed. Generics are needed only at compile time to check for type safety (this is called type erasure). So generics are not the same as templates in C++"}],"tags":[],"owner":{"account_id":1273420,"reputation":4594,"user_id":1229192,"accept_rate":50,"display_name":"Michal Borek"},"comment_count":4,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1457621659,"creation_date":1367745486,"answer_id":16383080,"question_id":16382887,"body_markdown":"I put answer here to put code..\r\n\r\nIn your example you have (in pseudo code) `Integer(5).equals(Char(&#39;k&#39;))` which is `false`, according to following equals implementation on `java.lang.Integer`:\r\n\r\n    public boolean equals(Object obj) {\r\n        if (obj instanceof Integer) {\r\n            return value == ((Integer)obj).intValue();\r\n        }\r\n        return false;\r\n    }\r\n\r\nGoing that way you don&#39;t have to worry about casting.","title":"How to implement &quot;equals&quot; method for generics using &quot;instanceof&quot;?","body":"<p>I put answer here to put code..</p>\n\n<p>In your example you have (in pseudo code) <code>Integer(5).equals(Char('k'))</code> which is <code>false</code>, according to following equals implementation on <code>java.lang.Integer</code>:</p>\n\n<pre><code>public boolean equals(Object obj) {\n    if (obj instanceof Integer) {\n        return value == ((Integer)obj).intValue();\n    }\n    return false;\n}\n</code></pre>\n\n<p>Going that way you don't have to worry about casting.</p>\n"},{"comments":[{"owner":{"account_id":402964,"reputation":22541,"user_id":770452,"accept_rate":49,"display_name":"David T."},"score":0,"creation_date":1367746085,"post_id":16383120,"comment_id":23480357,"body_markdown":"Thanks for the answer. Yes, that code will not give any warning because you are casting `(SingularNode&lt;?&gt;)other` up to type `?` instead of `T`. however, i&#39;d like to only use instances of type `T` in case that in the future I decide there&#39;s something special i wanted to do with type `T`. if that makes sense?","body":"Thanks for the answer. Yes, that code will not give any warning because you are casting <code>(SingularNode&lt;?&gt;)other</code> up to type <code>?</code> instead of <code>T</code>. however, i&#39;d like to only use instances of type <code>T</code> in case that in the future I decide there&#39;s something special i wanted to do with type <code>T</code>. if that makes sense?"},{"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"score":0,"creation_date":1367746493,"post_id":16383120,"comment_id":23480466,"body_markdown":"I dont think it makes sense since you cannot assume that T is anything but Object, cause it can be anything. Possibly it could be different in case of T extends Something","body":"I dont think it makes sense since you cannot assume that T is anything but Object, cause it can be anything. Possibly it could be different in case of T extends Something"},{"owner":{"account_id":402964,"reputation":22541,"user_id":770452,"accept_rate":49,"display_name":"David T."},"score":0,"creation_date":1367746766,"post_id":16383120,"comment_id":23480532,"body_markdown":"ah okay. So then actually `?` is pretty much the same as `T` here?","body":"ah okay. So then actually <code>?</code> is pretty much the same as <code>T</code> here?"},{"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"score":0,"creation_date":1367747147,"post_id":16383120,"comment_id":23480615,"body_markdown":"Yes, just gives no warn, which is IMO is better","body":"Yes, just gives no warn, which is IMO is better"},{"owner":{"account_id":31622,"reputation":120351,"user_id":86989,"display_name":"newacct"},"score":0,"creation_date":1367748990,"post_id":16383120,"comment_id":23480993,"body_markdown":"@DavidT.: but *why* do you care that `other` might be a `SingularNode&lt;SomethingElse&gt;`?","body":"@DavidT.: but <i>why</i> do you care that <code>other</code> might be a <code>SingularNode&lt;SomethingElse&gt;</code>?"},{"owner":{"account_id":402964,"reputation":22541,"user_id":770452,"accept_rate":49,"display_name":"David T."},"score":1,"creation_date":1367754988,"post_id":16383120,"comment_id":23482195,"body_markdown":"@newacct that was an error on my assumption. I had thought that in Java, bad stuff happens if the `?` is not exactly `T`; and also later if i could do something with `T`, i dont want an error because i didn&#39;t type check","body":"@newacct that was an error on my assumption. I had thought that in Java, bad stuff happens if the <code>?</code> is not exactly <code>T</code>; and also later if i could do something with <code>T</code>, i dont want an error because i didn&#39;t type check"},{"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"score":2,"creation_date":1367755734,"post_id":16383120,"comment_id":23482364,"body_markdown":"Sometimes you simply cannot avoid SuppressWarnings or using raw types. See JDK Collections.swap impl -&gt;  List l = list; in some cases even J.Bloch has to ignore generics and use raw types","body":"Sometimes you simply cannot avoid SuppressWarnings or using raw types. See JDK Collections.swap impl -&gt;  List l = list; in some cases even J.Bloch has to ignore generics and use raw types"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1367953837,"post_id":16383120,"comment_id":23556554,"body_markdown":"This solution lets the T&#39;s determine if they are equal, which is right IMHO. But change the `if (condition) return true` to `return ((SingularNode&lt;?&gt;)other).value.equals(value);`.","body":"This solution lets the T&#39;s determine if they are equal, which is right IMHO. But change the <code>if (condition) return true</code> to <code>return ((SingularNode&lt;?&gt;)other).value.equals(value);</code>."},{"owner":{"account_id":5149696,"reputation":606,"user_id":4124628,"display_name":"Mukul Anand"},"score":0,"creation_date":1593935017,"post_id":16383120,"comment_id":110945690,"body_markdown":"No return of false if object type matches but not value.\n`public boolean equals(Object other){\n    if (other instanceof SingularNode&lt;?&gt;){\n        if(this.value != null)\n             return this.value.equals(((SingleNode&lt;?&gt;) other).value);\n        else\n             return ((SingleNode&lt;?&gt;)other).value == null;\n    }\n    return false;\n}`","body":"No return of false if object type matches but not value. <code>public boolean equals(Object other){     if (other instanceof SingularNode&lt;?&gt;){         if(this.value != null)              return this.value.equals(((SingleNode&lt;?&gt;) other).value);         else              return ((SingleNode&lt;?&gt;)other).value == null;     }     return false; }</code>"}],"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"comment_count":9,"down_vote_count":1,"up_vote_count":37,"is_accepted":true,"score":36,"last_activity_date":1445886763,"creation_date":1367745837,"answer_id":16383120,"question_id":16382887,"body_markdown":"This version gives no warnings\r\n\r\n    public boolean equals(Object other){\r\n        if (other instanceof SingularNode&lt;?&gt;){\r\n            if ( ((SingularNode&lt;?&gt;)other).value.equals(value) ){\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\nAs for casting to `SingularNode&lt;T&gt;` it does not help anything, you cannot assume that `T` can be anything but `Object`. \r\n\r\nLearn more about how generics are compiled in Java at\r\n\r\n&gt; https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\r\n","title":"How to implement &quot;equals&quot; method for generics using &quot;instanceof&quot;?","body":"<p>This version gives no warnings</p>\n\n<pre><code>public boolean equals(Object other){\n    if (other instanceof SingularNode&lt;?&gt;){\n        if ( ((SingularNode&lt;?&gt;)other).value.equals(value) ){\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n\n<p>As for casting to <code>SingularNode&lt;T&gt;</code> it does not help anything, you cannot assume that <code>T</code> can be anything but <code>Object</code>. </p>\n\n<p>Learn more about how generics are compiled in Java at</p>\n\n<blockquote>\n  <p><a href=\"https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/tutorial/java/generics/erasure.html</a></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":357343,"reputation":54520,"user_id":697449,"accept_rate":82,"display_name":"Paul Bellora"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1367770125,"creation_date":1367770125,"answer_id":16386463,"question_id":16382887,"body_markdown":"[Evgeniy&#39;s solution][1] and [Michal&#39;s reasoning][2] are correct - you don&#39;t need to worry about the type of `T` here. The reason is that the [`equals`][3] method doesn&#39;t depend on generics to work correctly. Instead, it is declared by `Object` and it takes an `Object`. Thus, it&#39;s responsible for checking the runtime type of whatever was passed in.\r\n\r\nIf `this` happens to be `SingularNode&lt;String&gt;` and you compare it with a `SingularNode&lt;Integer&gt;`, then `((SingularNode&lt;?&gt;)other).value.equals(value)` is perfectly fine because calling `Integer.equals` with a `String` argument will correctly return `false`.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/16383120/697449\r\n  [2]: https://stackoverflow.com/a/16383080/697449\r\n  [3]: http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29","title":"How to implement &quot;equals&quot; method for generics using &quot;instanceof&quot;?","body":"<p><a href=\"https://stackoverflow.com/a/16383120/697449\">Evgeniy's solution</a> and <a href=\"https://stackoverflow.com/a/16383080/697449\">Michal's reasoning</a> are correct - you don't need to worry about the type of <code>T</code> here. The reason is that the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29\" rel=\"noreferrer\"><code>equals</code></a> method doesn't depend on generics to work correctly. Instead, it is declared by <code>Object</code> and it takes an <code>Object</code>. Thus, it's responsible for checking the runtime type of whatever was passed in.</p>\n\n<p>If <code>this</code> happens to be <code>SingularNode&lt;String&gt;</code> and you compare it with a <code>SingularNode&lt;Integer&gt;</code>, then <code>((SingularNode&lt;?&gt;)other).value.equals(value)</code> is perfectly fine because calling <code>Integer.equals</code> with a <code>String</code> argument will correctly return <code>false</code>.</p>\n"},{"comments":[{"owner":{"account_id":24045,"reputation":5432,"user_id":60871,"display_name":"Christopher Smith"},"score":7,"creation_date":1407374337,"post_id":19522666,"comment_id":39194026,"body_markdown":"I&#39;m confused. I see casting.","body":"I&#39;m confused. I see casting."}],"tags":[],"owner":{"account_id":910727,"reputation":670,"user_id":944663,"accept_rate":50,"display_name":"Atish Narlawar"},"comment_count":1,"down_vote_count":5,"up_vote_count":0,"is_accepted":false,"score":-5,"last_activity_date":1382457158,"creation_date":1382457158,"answer_id":19522666,"question_id":16382887,"body_markdown":"You dont need to use any casting.\r\nBest equals to implementation I see like this\r\n\r\n \r\n\r\n    @Override\r\n        public boolean equals(Object o) {\r\n            if (this == o) return true;\r\n            if (!(o instanceof VehicleModel)) return false;\r\n    \r\n            VehicleModel that = (VehicleModel) o;\r\n    \r\n            if (vehicleName != null ? !vehicleName.equals(that.vehicleName) : that.vehicleName != null)\r\n                return false;\r\n    \r\n            return true;\r\n        }","title":"How to implement &quot;equals&quot; method for generics using &quot;instanceof&quot;?","body":"<p>You dont need to use any casting.\nBest equals to implementation I see like this</p>\n\n<pre><code>@Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (!(o instanceof VehicleModel)) return false;\n\n        VehicleModel that = (VehicleModel) o;\n\n        if (vehicleName != null ? !vehicleName.equals(that.vehicleName) : that.vehicleName != null)\n            return false;\n\n        return true;\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2986490,"reputation":1381,"user_id":3897333,"display_name":"Paul Stelian"},"score":0,"creation_date":1546192931,"post_id":48465565,"comment_id":94797430,"body_markdown":"Should have posted it in a separate question. But it actually looks reasonable enough. `getClass() != o.getClass()` is equivalent to `!(o instanceof TheClass&lt;?,?,?&gt;)` or, with warnings, to `!(o instanceof TheClass)`.","body":"Should have posted it in a separate question. But it actually looks reasonable enough. <code>getClass() != o.getClass()</code> is equivalent to <code>!(o instanceof TheClass&lt;?,?,?&gt;)</code> or, with warnings, to <code>!(o instanceof TheClass)</code>."}],"tags":[],"owner":{"account_id":4872592,"reputation":865,"user_id":3928593,"accept_rate":86,"display_name":"JiangHongTiao"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1516984791,"creation_date":1516984368,"answer_id":48465565,"question_id":16382887,"body_markdown":"I have the same problem, however it is more general. I have a class where I do have 3 generic types. I do not need to store any variable of those types because this class is used for transformation. However there are stored &#39;request&#39; variables and I do use cache based on this class, so I need to implement equals() method that is based on those generics. \r\n\r\nDo you know if there is any approach how to do it without reflection? Maybe internal variable of that type.. However it&#39;s null then. \r\n\r\n\r\n    public class TheClass&lt;I, O, M&gt; {\r\n\r\n        private ClassA param1;\r\n        private ClassB param2;\r\n        private ClassC&lt;M&gt; param3;\r\n        private BiFunction&lt;ClassC&lt;M&gt;, I, Optional&lt;O&gt;&gt; mapping;\r\n        \r\n        public ClassD&lt;O, M&gt; doSomething(ClassD&lt;I, M&gt; param) {\r\n            ...\r\n        }\r\n\r\n        @Override\r\n        public boolean equals(Object o) {\r\n            if (this == o) {\r\n                return true;\r\n            }\r\n            if (o == null) {\r\n                return false;\r\n            }\r\n            if (getClass() != o.getClass()) {\r\n                return false;\r\n            }\r\n            TheClass&lt;?, ?, ?&gt; that = (TheClass&lt;?, ?, ?&gt;) o;\r\n\r\n            return Objects.equals(getParam1(), that.getParam1()) &amp;&amp;\r\n                    Objects.equals(getParam2(), that.getParam2()) &amp;&amp;\r\n                    Objects.equals(getParam3(), that.getParam3());\r\n        }\r\n    }\r\n\r\nFor a better imagination... I have set of DAO objects getting data from database. On the other hand, we do have another set of API providers that provide similar data in different format (REST, internal systems..)\r\nWe need a mapping function from one type to another. We use caching for better performance and the only man-in-the-middle is this class.","title":"How to implement &quot;equals&quot; method for generics using &quot;instanceof&quot;?","body":"<p>I have the same problem, however it is more general. I have a class where I do have 3 generic types. I do not need to store any variable of those types because this class is used for transformation. However there are stored 'request' variables and I do use cache based on this class, so I need to implement equals() method that is based on those generics. </p>\n\n<p>Do you know if there is any approach how to do it without reflection? Maybe internal variable of that type.. However it's null then. </p>\n\n<pre><code>public class TheClass&lt;I, O, M&gt; {\n\n    private ClassA param1;\n    private ClassB param2;\n    private ClassC&lt;M&gt; param3;\n    private BiFunction&lt;ClassC&lt;M&gt;, I, Optional&lt;O&gt;&gt; mapping;\n\n    public ClassD&lt;O, M&gt; doSomething(ClassD&lt;I, M&gt; param) {\n        ...\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) {\n            return true;\n        }\n        if (o == null) {\n            return false;\n        }\n        if (getClass() != o.getClass()) {\n            return false;\n        }\n        TheClass&lt;?, ?, ?&gt; that = (TheClass&lt;?, ?, ?&gt;) o;\n\n        return Objects.equals(getParam1(), that.getParam1()) &amp;&amp;\n                Objects.equals(getParam2(), that.getParam2()) &amp;&amp;\n                Objects.equals(getParam3(), that.getParam3());\n    }\n}\n</code></pre>\n\n<p>For a better imagination... I have set of DAO objects getting data from database. On the other hand, we do have another set of API providers that provide similar data in different format (REST, internal systems..)\nWe need a mapping function from one type to another. We use caching for better performance and the only man-in-the-middle is this class.</p>\n"},{"tags":[],"owner":{"account_id":2584833,"reputation":2656,"user_id":2240780,"accept_rate":78,"display_name":"Julien"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700750213,"creation_date":1700750213,"answer_id":77537702,"question_id":16382887,"body_markdown":"This is how HashMap handles it : \r\n\r\n```\r\n        public final boolean equals(Object o) {\r\n            if (o == this)\r\n                return true;\r\n\r\n            return o instanceof Map.Entry&lt;?, ?&gt; e\r\n                    &amp;&amp; Objects.equals(key, e.getKey())\r\n                    &amp;&amp; Objects.equals(value, e.getValue());\r\n        }\r\n```\r\n","title":"How to implement &quot;equals&quot; method for generics using &quot;instanceof&quot;?","body":"<p>This is how HashMap handles it :</p>\n<pre><code>        public final boolean equals(Object o) {\n            if (o == this)\n                return true;\n\n            return o instanceof Map.Entry&lt;?, ?&gt; e\n                    &amp;&amp; Objects.equals(key, e.getKey())\n                    &amp;&amp; Objects.equals(value, e.getValue());\n        }\n</code></pre>\n"}],"owner":{"account_id":402964,"reputation":22541,"user_id":770452,"accept_rate":49,"display_name":"David T."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40880,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":16383120,"answer_count":6,"score":30,"last_activity_date":1700750213,"creation_date":1367743757,"question_id":16382887,"body_markdown":"I have a class that accepts a _generic type_, and I want to override the `equals` method in a non-awkward way (i.e. something that looks clean and has minimal amount of code, but for a very general use case).\r\n\r\nRight now I have something like this:\r\n\r\n    public class SingularNode&lt;T&gt; {\r\n        private T value;\r\n\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        @Override\r\n        public boolean equals(Object other){\r\n            if(other instanceof SingularNode&lt;?&gt;){\r\n                if(((SingularNode&lt;T&gt;)other).value.equals(value)){\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\nWhich, I&#39;m guessing, is pretty flawed - I&#39;m doing a cast to `SingularNode&lt;T&gt;` on the `other` object, which could potentially _throw an error_. \r\n\r\nAnother thing is - when I do `if(other instanceof SingularNode&lt;?&gt;)` I&#39;m actually not checking exactly the right thing. I actually want to check against type `T` and not type `?`. Whenever I try to make the `?` into `T`, I get some error like:\r\n\r\n&gt; **Cannot perform instanceof check against parameterized type `SingularNode&lt;T&gt;`. Use the form `SingularNode&lt;?&gt;` instead, since further generic type information will be erased at runtime**\r\n\r\nHow can I get around this? Is there some way to do `T.class.isInstance(other);` ?\r\n\r\nI suppose there&#39;s one really ugly hack solution like this:\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public boolean isEqualTo(Class&lt;?&gt; c, Object obj){\r\n        if(c.isInstance(obj) &amp;&amp; c.isInstance(this)){\r\n            if(((SingularNode&lt;T&gt;)obj).value.equals(value)){\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\nBut that just looks really awkward with the extra method parameter, and it&#39;s also not a built-in function like `equals` is.\r\n\r\nAny one who understand generics please explain this? I&#39;m not that proficient with Java, as you can clearly see, so please explain with a tad bit more detail!","title":"How to implement &quot;equals&quot; method for generics using &quot;instanceof&quot;?","body":"<p>I have a class that accepts a <em>generic type</em>, and I want to override the <code>equals</code> method in a non-awkward way (i.e. something that looks clean and has minimal amount of code, but for a very general use case).</p>\n\n<p>Right now I have something like this:</p>\n\n<pre><code>public class SingularNode&lt;T&gt; {\n    private T value;\n\n    @SuppressWarnings(\"unchecked\")\n    @Override\n    public boolean equals(Object other){\n        if(other instanceof SingularNode&lt;?&gt;){\n            if(((SingularNode&lt;T&gt;)other).value.equals(value)){\n                return true;\n            }\n        }\n        return false;\n    }\n}\n</code></pre>\n\n<p>Which, I'm guessing, is pretty flawed - I'm doing a cast to <code>SingularNode&lt;T&gt;</code> on the <code>other</code> object, which could potentially <em>throw an error</em>. </p>\n\n<p>Another thing is - when I do <code>if(other instanceof SingularNode&lt;?&gt;)</code> I'm actually not checking exactly the right thing. I actually want to check against type <code>T</code> and not type <code>?</code>. Whenever I try to make the <code>?</code> into <code>T</code>, I get some error like:</p>\n\n<blockquote>\n  <p><strong>Cannot perform instanceof check against parameterized type <code>SingularNode&lt;T&gt;</code>. Use the form <code>SingularNode&lt;?&gt;</code> instead, since further generic type information will be erased at runtime</strong></p>\n</blockquote>\n\n<p>How can I get around this? Is there some way to do <code>T.class.isInstance(other);</code> ?</p>\n\n<p>I suppose there's one really ugly hack solution like this:</p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\npublic boolean isEqualTo(Class&lt;?&gt; c, Object obj){\n    if(c.isInstance(obj) &amp;&amp; c.isInstance(this)){\n        if(((SingularNode&lt;T&gt;)obj).value.equals(value)){\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n\n<p>But that just looks really awkward with the extra method parameter, and it's also not a built-in function like <code>equals</code> is.</p>\n\n<p>Any one who understand generics please explain this? I'm not that proficient with Java, as you can clearly see, so please explain with a tad bit more detail!</p>\n"},{"tags":["java","compression","javax.imageio","jai","image-compression"],"answers":[{"comments":[{"owner":{"account_id":30976,"reputation":8154,"user_id":84761,"accept_rate":80,"display_name":"Gnaniyar Zubair"},"score":0,"creation_date":1404634586,"post_id":24570100,"comment_id":38102894,"body_markdown":"Thanks for your detailed explanation. But when i tried this code it throws an exception like &quot;Compression not supported &quot;.... Any idea?","body":"Thanks for your detailed explanation. But when i tried this code it throws an exception like &quot;Compression not supported &quot;.... Any idea?"},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1404642633,"post_id":24570100,"comment_id":38104690,"body_markdown":"Yes. You didn&#39;t apply the if (param.canWriteCompressed()) line. And more importantly, you don&#39;t have JAI properly installed, so you are still not using CLibPNGImageWriter. Try printing the class of writer, or use a debugger to verify.","body":"Yes. You didn&#39;t apply the if (param.canWriteCompressed()) line. And more importantly, you don&#39;t have JAI properly installed, so you are still not using CLibPNGImageWriter. Try printing the class of writer, or use a debugger to verify."},{"owner":{"account_id":30976,"reputation":8154,"user_id":84761,"accept_rate":80,"display_name":"Gnaniyar Zubair"},"score":0,"creation_date":1404824435,"post_id":24570100,"comment_id":38176677,"body_markdown":"It works fine. But after compression (32 bit)output PNG image increases the size than the source image","body":"It works fine. But after compression (32 bit)output PNG image increases the size than the source image"},{"owner":{"account_id":30976,"reputation":8154,"user_id":84761,"accept_rate":80,"display_name":"Gnaniyar Zubair"},"score":0,"creation_date":1404849591,"post_id":24570100,"comment_id":38192560,"body_markdown":"it increases the size double or triple instead of decrease.","body":"it increases the size double or triple instead of decrease."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":1,"creation_date":1404888395,"post_id":24570100,"comment_id":38204346,"body_markdown":"2x-3x the size of what? Another PNG? Or a JPEG?","body":"2x-3x the size of what? Another PNG? Or a JPEG?"}],"tags":[],"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"comment_count":5,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1700750055,"creation_date":1404463296,"answer_id":24570100,"question_id":24538455,"body_markdown":"**Update**: The default `com.sun.imageio.plugins.png.PNGImageWriter` that is bundled with the JDK now supports setting and specifying the compression level, since Java 9. \r\n\r\nThere is also a [back port](https://github.com/gredler/jdk9-png-writer-backport) available, if you are still on Java 8 or older. \r\n\r\n*The rest of this answer assumes you are using an older version of Java, without the backport (don&#39;t do that! &#128521; ) .*\r\n\r\n----\r\n\r\nIt seems the default `com.sun.imageio.plugins.png.PNGImageWriter` that is bundled with the JRE does not support *setting* compression. This is kind of surprising, as the format obviously supports compression. However, the `PNGImageWriter` *always* writes compressed. \r\n\r\nYou can see from the source code that it uses:\r\n\r\n    Deflater def = new Deflater(Deflater.BEST_COMPRESSION);\r\n\r\nWhich will give you good, but slow compression. It might be good enough for you, but for some cases it might be better to use faster compression and larger files.\r\n\r\nTo fix your code, so that it would work with any format name, change the lines:\r\n \r\n    ImageWriteParam param = writer.getDefaultWriteParam();\r\n    param.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);\r\n    param.setCompressionQuality(0.5f);\r\n\r\nto:\r\n\r\n    ImageWriteParam param = writer.getDefaultWriteParam();\r\n\r\n    if (param.canWriteCompressed()) { \r\n        // NOTE: Any method named [set|get]Compression.* throws UnsupportedOperationException if false\r\n        param.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);\r\n        param.setCompressionQuality(0.5f);\r\n    }\r\n\r\nIt will still write compressed PNGs.\r\n\r\nIf you need more control over the PNG compression, like setting compression or filter used, you need to find an `ImageWriter` that supports it. As you mention JAI, I think the `CLibPNGImageWriter` that is part of `jai-imageio.jar` or `jai-imageio-tools.jar` supports setting compression. You just need to look through the `ImageWriter`s iterator, to see if you have it installed:\r\n\r\n    Iterator&lt;ImageWriter&gt;writers = ImageIO.getImageWritersByFormatName(&quot;png&quot;);\r\n    ImageWriter writer = null;\r\n        \r\n    while (writers.hasNext()) {\r\n        ImageWriter candidate = writers.next();\r\n            \r\n        if (candidate.getClass().getSimpleName().equals(&quot;CLibPNGImageWriter&quot;)) {\r\n            writer = candidate; // This is the one we want\r\n            break;\r\n        }\r\n        else if (writer == null) {\r\n            writer = candidate; // Any writer is better than no writer ;-)\r\n        }\r\n    }\r\n\r\nWith the correct `ImageWriter`, your code should work as expected.","title":"Compression of PNG using JAI (Java Advanced Imaging)","body":"<p><strong>Update</strong>: The default <code>com.sun.imageio.plugins.png.PNGImageWriter</code> that is bundled with the JDK now supports setting and specifying the compression level, since Java 9.</p>\n<p>There is also a <a href=\"https://github.com/gredler/jdk9-png-writer-backport\" rel=\"nofollow noreferrer\">back port</a> available, if you are still on Java 8 or older.</p>\n<p><em>The rest of this answer assumes you are using an older version of Java, without the backport (don't do that! 😉 ) .</em></p>\n<hr />\n<p>It seems the default <code>com.sun.imageio.plugins.png.PNGImageWriter</code> that is bundled with the JRE does not support <em>setting</em> compression. This is kind of surprising, as the format obviously supports compression. However, the <code>PNGImageWriter</code> <em>always</em> writes compressed.</p>\n<p>You can see from the source code that it uses:</p>\n<pre><code>Deflater def = new Deflater(Deflater.BEST_COMPRESSION);\n</code></pre>\n<p>Which will give you good, but slow compression. It might be good enough for you, but for some cases it might be better to use faster compression and larger files.</p>\n<p>To fix your code, so that it would work with any format name, change the lines:</p>\n<pre><code>ImageWriteParam param = writer.getDefaultWriteParam();\nparam.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);\nparam.setCompressionQuality(0.5f);\n</code></pre>\n<p>to:</p>\n<pre><code>ImageWriteParam param = writer.getDefaultWriteParam();\n\nif (param.canWriteCompressed()) { \n    // NOTE: Any method named [set|get]Compression.* throws UnsupportedOperationException if false\n    param.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);\n    param.setCompressionQuality(0.5f);\n}\n</code></pre>\n<p>It will still write compressed PNGs.</p>\n<p>If you need more control over the PNG compression, like setting compression or filter used, you need to find an <code>ImageWriter</code> that supports it. As you mention JAI, I think the <code>CLibPNGImageWriter</code> that is part of <code>jai-imageio.jar</code> or <code>jai-imageio-tools.jar</code> supports setting compression. You just need to look through the <code>ImageWriter</code>s iterator, to see if you have it installed:</p>\n<pre><code>Iterator&lt;ImageWriter&gt;writers = ImageIO.getImageWritersByFormatName(&quot;png&quot;);\nImageWriter writer = null;\n    \nwhile (writers.hasNext()) {\n    ImageWriter candidate = writers.next();\n        \n    if (candidate.getClass().getSimpleName().equals(&quot;CLibPNGImageWriter&quot;)) {\n        writer = candidate; // This is the one we want\n        break;\n    }\n    else if (writer == null) {\n        writer = candidate; // Any writer is better than no writer ;-)\n    }\n}\n</code></pre>\n<p>With the correct <code>ImageWriter</code>, your code should work as expected.</p>\n"},{"comments":[{"owner":{"account_id":1447480,"reputation":1567,"user_id":1365460,"accept_rate":51,"display_name":"Ankur Raiyani"},"score":0,"creation_date":1601704849,"post_id":25093572,"comment_id":113494216,"body_markdown":"I tried the solution but it says IllegalArgumentException: Unknown compression type! with Java 11","body":"I tried the solution but it says IllegalArgumentException: Unknown compression type! with Java 11"}],"tags":[],"owner":{"account_id":4794607,"reputation":23,"user_id":3872885,"accept_rate":50,"display_name":"byreddy"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1406971578,"creation_date":1406971578,"answer_id":25093572,"question_id":24538455,"body_markdown":"Please check that this code may work for you.\r\n   \r\n    ImageWriteParam writeParam = writer.getDefaultWriteParam();\r\n    \r\n    writeParam.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);\r\n    \t\t\r\n    writeParam.setCompressionType(&quot;PackBits&quot;);\r\n    \t\r\n    writeParam.setCompressionQuality(0.5f);\r\n\r\nThanks.","title":"Compression of PNG using JAI (Java Advanced Imaging)","body":"<p>Please check that this code may work for you.</p>\n\n<pre><code>ImageWriteParam writeParam = writer.getDefaultWriteParam();\n\nwriteParam.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);\n\nwriteParam.setCompressionType(\"PackBits\");\n\nwriteParam.setCompressionQuality(0.5f);\n</code></pre>\n\n<p>Thanks.</p>\n"}],"owner":{"account_id":30976,"reputation":8154,"user_id":84761,"accept_rate":80,"display_name":"Gnaniyar Zubair"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10591,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1700750055,"creation_date":1404325719,"question_id":24538455,"body_markdown":"I am using javax.imageio API and JAI for compressing different types of images. It works fine for JPEG using `JPEGImageWriter` and GIF using `GIFImageWriter`. But it is not supporting for PNG compression using `PNGImageWriter` which throws an exception like compression type is not set or &quot;No valid compression&quot;, etc. So I used this below `ImageWriter` for PNG. It works but image quality is too bad. \r\n\r\nCan anyone suggest how to use `PNGImageWriter` for PNG compression and which JAR contains it?\r\n\r\n    File input = new File(&quot;test.png&quot;);\r\n\r\n    InputStream is = new FileInputStream(input);\r\n    BufferedImage image = ImageIO.read(is);\r\n\t     \r\n    File compressedImageFile = new File(input.getName());\r\n\t    \r\n    OutputStream os =new FileOutputStream(compressedImageFile);\r\n\t      \r\n    Iterator&lt;ImageWriter&gt;writers = \r\n            ImageIO.getImageWritersByFormatName(&quot;jpg&quot;); // here &quot;png&quot; does not work\r\n    ImageWriter writer = (ImageWriter) writers.next();\r\n\t      \r\n    ImageOutputStream ios = ImageIO.createImageOutputStream(os);\r\n    writer.setOutput(ios);\r\n\r\n    ImageWriteParam param = writer.getDefaultWriteParam();\r\n    param.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);\r\n    param.setCompressionQuality(0.5f);\r\n\t    \r\n    writer.write(null, new IIOImage(image, null, null), param);","title":"Compression of PNG using JAI (Java Advanced Imaging)","body":"<p>I am using javax.imageio API and JAI for compressing different types of images. It works fine for JPEG using <code>JPEGImageWriter</code> and GIF using <code>GIFImageWriter</code>. But it is not supporting for PNG compression using <code>PNGImageWriter</code> which throws an exception like compression type is not set or \"No valid compression\", etc. So I used this below <code>ImageWriter</code> for PNG. It works but image quality is too bad. </p>\n\n<p>Can anyone suggest how to use <code>PNGImageWriter</code> for PNG compression and which JAR contains it?</p>\n\n<pre><code>File input = new File(\"test.png\");\n\nInputStream is = new FileInputStream(input);\nBufferedImage image = ImageIO.read(is);\n\nFile compressedImageFile = new File(input.getName());\n\nOutputStream os =new FileOutputStream(compressedImageFile);\n\nIterator&lt;ImageWriter&gt;writers = \n        ImageIO.getImageWritersByFormatName(\"jpg\"); // here \"png\" does not work\nImageWriter writer = (ImageWriter) writers.next();\n\nImageOutputStream ios = ImageIO.createImageOutputStream(os);\nwriter.setOutput(ios);\n\nImageWriteParam param = writer.getDefaultWriteParam();\nparam.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);\nparam.setCompressionQuality(0.5f);\n\nwriter.write(null, new IIOImage(image, null, null), param);\n</code></pre>\n"},{"tags":["java","vert.x","vertx-verticle"],"answers":[{"tags":[],"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695894764,"creation_date":1695894764,"answer_id":77193930,"question_id":77188452,"body_markdown":"`SchemaParser` is deprecated in favor of [`SchemaRepository`][1].\r\n\r\nFirst, create the repository:\r\n\r\n    SchemaRepository sr = SchemaRepository.create(new JsonSchemaOptions().setDraft(Draft.DRAFT7));\r\n\r\nThen use it in the `ValidationHandlerBuilder`:\r\n    \r\n    router.post(&quot;/demo&quot;)\r\n      .handler(BodyHandler.create())\r\n      .handler(ValidationHandlerBuilder.create(sr)\r\n        .body(Bodies.json(objectSchemaBuilder))\r\n        .body(Bodies.formUrlEncoded(objectSchemaBuilder))\r\n        .build())\r\n      .handler(this::greet);\r\n\r\n\r\n  [1]: https://vertx.io/docs/vertx-json-schema/java/#_schemarepository","title":"Vertx 4.4.4 SchemaParser deprecation","body":"<p><code>SchemaParser</code> is deprecated in favor of <a href=\"https://vertx.io/docs/vertx-json-schema/java/#_schemarepository\" rel=\"nofollow noreferrer\"><code>SchemaRepository</code></a>.</p>\n<p>First, create the repository:</p>\n<pre><code>SchemaRepository sr = SchemaRepository.create(new JsonSchemaOptions().setDraft(Draft.DRAFT7));\n</code></pre>\n<p>Then use it in the <code>ValidationHandlerBuilder</code>:</p>\n<pre><code>router.post(&quot;/demo&quot;)\n  .handler(BodyHandler.create())\n  .handler(ValidationHandlerBuilder.create(sr)\n    .body(Bodies.json(objectSchemaBuilder))\n    .body(Bodies.formUrlEncoded(objectSchemaBuilder))\n    .build())\n  .handler(this::greet);\n</code></pre>\n"}],"owner":{"account_id":7760897,"reputation":1420,"user_id":5873698,"accept_rate":48,"display_name":"Amar Dev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700749811,"creation_date":1695825081,"question_id":77188452,"body_markdown":"I am using vertx 4.4.4 and tried to use the following code snippet\r\n\r\n    SchemaParser parser = SchemaParser.createDraft7SchemaParser(\r\n          SchemaRouter.create(vertx, new SchemaRouterOptions()));\r\n\r\nI get a deprecation warning for `SchemaParser, SchemaRouter, SchemaRouterOptions`\r\n\r\nI tried to read through the docs to find what is the suggested approach but could not find it.\r\n\r\nI later use the ```parser``` in the following code\r\n\r\n```\r\nrouter.post(&quot;/demo&quot;)\r\n      .handler(new BodyHandlerImpl())\r\n      .handler(ValidationHandlerBuilder.create(parser)\r\n        .body(Bodies.json(objectSchemaBuilder))\r\n          .body(Bodies.formUrlEncoded(objectSchemaBuilder))\r\n        .build())\r\n      .handler(this::greet);\r\n```\r\n","title":"Vertx 4.4.4 SchemaParser deprecation","body":"<p>I am using vertx 4.4.4 and tried to use the following code snippet</p>\n<pre><code>SchemaParser parser = SchemaParser.createDraft7SchemaParser(\n      SchemaRouter.create(vertx, new SchemaRouterOptions()));\n</code></pre>\n<p>I get a deprecation warning for <code>SchemaParser, SchemaRouter, SchemaRouterOptions</code></p>\n<p>I tried to read through the docs to find what is the suggested approach but could not find it.</p>\n<p>I later use the <code>parser</code> in the following code</p>\n<pre><code>router.post(&quot;/demo&quot;)\n      .handler(new BodyHandlerImpl())\n      .handler(ValidationHandlerBuilder.create(parser)\n        .body(Bodies.json(objectSchemaBuilder))\n          .body(Bodies.formUrlEncoded(objectSchemaBuilder))\n        .build())\n      .handler(this::greet);\n</code></pre>\n"},{"tags":["java","hibernate","jpa","inheritance","criteriaquery"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1700752849,"post_id":77537629,"comment_id":136695267,"body_markdown":"Vehicle doesn&#39;t have a &quot;passengerData&quot; reference to CarriageEntity, which is what your join looks setup to handle. What you want is to &quot;treat&quot; the Vehicle root as a CarriageEntity to allow you to then join to the PassengerDataEntity passengerData &quot;cb.treat(vehicle, CarriageEntity.class).join(&quot;passengerData&quot;)&quot;. But since you are performing a join, why not just query on the CarriageEntity directly instead of VehicleEntity?","body":"Vehicle doesn&#39;t have a &quot;passengerData&quot; reference to CarriageEntity, which is what your join looks setup to handle. What you want is to &quot;treat&quot; the Vehicle root as a CarriageEntity to allow you to then join to the PassengerDataEntity passengerData &quot;cb.treat(vehicle, CarriageEntity.class).join(&quot;passengerData&quot;)&quot;. But since you are performing a join, why not just query on the CarriageEntity directly instead of VehicleEntity?"},{"owner":{"account_id":13886390,"reputation":43,"user_id":10025420,"display_name":"Marc Serret i Garcia"},"score":0,"creation_date":1700814432,"post_id":77537629,"comment_id":136701623,"body_markdown":"Thank you for your assistance, Chris. The provided example is a minified version. I have four classes that inherit from VehicleEntity, and I need to retrieve instances of all these classes using the same method simultaneously. That&#39;s why I&#39;m using the parent class (VehicleEntity) as the root. Up until now, I&#39;ve been filtering based on the fields common to all classes (the fields in VehicleEntity). However, I now need to filter based on attributes specific to the inherited classes. I&#39;m going to try the suggested solution. Thank you!","body":"Thank you for your assistance, Chris. The provided example is a minified version. I have four classes that inherit from VehicleEntity, and I need to retrieve instances of all these classes using the same method simultaneously. That&#39;s why I&#39;m using the parent class (VehicleEntity) as the root. Up until now, I&#39;ve been filtering based on the fields common to all classes (the fields in VehicleEntity). However, I now need to filter based on attributes specific to the inherited classes. I&#39;m going to try the suggested solution. Thank you!"},{"owner":{"account_id":13886390,"reputation":43,"user_id":10025420,"display_name":"Marc Serret i Garcia"},"score":0,"creation_date":1701076757,"post_id":77537629,"comment_id":136725658,"body_markdown":"Hi Chris,\n\nGenerally, your solution works fine. However, when I attempt to retrieve data using a field of an inherited class, the results of all queries are limited to only the inherited class. For example, if I filter by getting all the Wagons and then use an OR condition to retrieve the Carriages whose passenger data is X, it only retrieves CarriageEntities from the database, excluding other inherited classes from VehicleEntity. The filters without treats over the inherited classes are working fine. Do you have any ideas on how to overcome this?\n\nThank you!","body":"Hi Chris,  Generally, your solution works fine. However, when I attempt to retrieve data using a field of an inherited class, the results of all queries are limited to only the inherited class. For example, if I filter by getting all the Wagons and then use an OR condition to retrieve the Carriages whose passenger data is X, it only retrieves CarriageEntities from the database, excluding other inherited classes from VehicleEntity. The filters without treats over the inherited classes are working fine. Do you have any ideas on how to overcome this?  Thank you!"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1701096698,"post_id":77537629,"comment_id":136729248,"body_markdown":"Show what you tried, as the spec states it should work. It gives an example (section  4.4.9) &quot;WHERE TREAT(p AS LargeProject).budget &gt; 1000\n      OR TREAT(p AS SmallProject).name LIKE &#39;Persist%&#39;&quot;","body":"Show what you tried, as the spec states it should work. It gives an example (section  4.4.9) &quot;WHERE TREAT(p AS LargeProject).budget &gt; 1000       OR TREAT(p AS SmallProject).name LIKE &#39;Persist%&#39;&quot;"}],"owner":{"account_id":13886390,"reputation":43,"user_id":10025420,"display_name":"Marc Serret i Garcia"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700749356,"creation_date":1700749356,"question_id":77537629,"body_markdown":"I am facing an issue while trying to perform a join involving entities in a Hibernate Single Table Inheritance scenario. I have two entities: VehicleEntity (base class) and CarriageEntity (subclass with discriminator value &quot;CARRIAGE&quot;).\r\n\r\n```java\r\n// VehicleEntity\r\n@Entity\r\n@Table(name = &quot;vehicle&quot;)\r\n@Inheritance(strategy = InheritanceType.SINGLE_TABLE)\r\n@DiscriminatorColumn(name = &quot;vehicle_type_id&quot;, discriminatorType = DiscriminatorType.STRING)\r\npublic class VehicleEntity {\r\n    // ... (fields and annotations)\r\n}\r\n\r\n// CarriageEntity\r\n@Entity\r\n@Data\r\n@DiscriminatorValue(&quot;CARRIAGE&quot;)\r\n@EqualsAndHashCode(callSuper = true)\r\npublic class CarriageEntity extends VehicleEntity {\r\n    @OneToOne(cascade = CascadeType.ALL)\r\n    private PassengerDataEntity passengerData;\r\n}\r\n```\r\nI am attempting to join VehicleEntity with CarriageEntity using the passengerData field, which exists only in CarriageEntity. However, my current approach is resulting in the error:\r\n```\r\nUnable to locate Attribute with the given name [passengerData] on this ManagedType [es.adif.sit.reg.rollingstock.access.model.VehicleEntity]\r\n```\r\nHere&#39;s a simplified version of the code where the error is occurring:\r\n```java\r\nCriteriaQuery&lt;Tuple&gt; cQ = cb.createTupleQuery();\r\nRoot&lt;VehicleEntity&gt; vehicle = cQ.from(VehicleEntity.class);\r\nJoin&lt;VehicleEntity, CarriageEntity&gt; carriage = vehicle.join(&quot;passengerData&quot;);\r\n```\r\nI&#39;ve tried various approaches, including using treat and JoinType.LEFT, but I haven&#39;t been successful. How can I properly join VehicleEntity and CarriageEntity when the join involves a field that exists only in the subclass?\r\n\r\nAny insights or examples on how to perform this type of join correctly would be greatly appreciated. Thank you!","title":"CriteriaQuery Joining entities in Hibernate single table inheritance","body":"<p>I am facing an issue while trying to perform a join involving entities in a Hibernate Single Table Inheritance scenario. I have two entities: VehicleEntity (base class) and CarriageEntity (subclass with discriminator value &quot;CARRIAGE&quot;).</p>\n<pre class=\"lang-java prettyprint-override\"><code>// VehicleEntity\n@Entity\n@Table(name = &quot;vehicle&quot;)\n@Inheritance(strategy = InheritanceType.SINGLE_TABLE)\n@DiscriminatorColumn(name = &quot;vehicle_type_id&quot;, discriminatorType = DiscriminatorType.STRING)\npublic class VehicleEntity {\n    // ... (fields and annotations)\n}\n\n// CarriageEntity\n@Entity\n@Data\n@DiscriminatorValue(&quot;CARRIAGE&quot;)\n@EqualsAndHashCode(callSuper = true)\npublic class CarriageEntity extends VehicleEntity {\n    @OneToOne(cascade = CascadeType.ALL)\n    private PassengerDataEntity passengerData;\n}\n</code></pre>\n<p>I am attempting to join VehicleEntity with CarriageEntity using the passengerData field, which exists only in CarriageEntity. However, my current approach is resulting in the error:</p>\n<pre><code>Unable to locate Attribute with the given name [passengerData] on this ManagedType [es.adif.sit.reg.rollingstock.access.model.VehicleEntity]\n</code></pre>\n<p>Here's a simplified version of the code where the error is occurring:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CriteriaQuery&lt;Tuple&gt; cQ = cb.createTupleQuery();\nRoot&lt;VehicleEntity&gt; vehicle = cQ.from(VehicleEntity.class);\nJoin&lt;VehicleEntity, CarriageEntity&gt; carriage = vehicle.join(&quot;passengerData&quot;);\n</code></pre>\n<p>I've tried various approaches, including using treat and JoinType.LEFT, but I haven't been successful. How can I properly join VehicleEntity and CarriageEntity when the join involves a field that exists only in the subclass?</p>\n<p>Any insights or examples on how to perform this type of join correctly would be greatly appreciated. Thank you!</p>\n"},{"tags":["java","maven","open-liberty","hot-reload","hotswap"],"answers":[{"comments":[{"owner":{"account_id":109585,"reputation":8067,"user_id":290284,"accept_rate":95,"display_name":"Cui Pengfei 崔鹏飞"},"score":1,"creation_date":1700749293,"post_id":77507965,"comment_id":136694582,"body_markdown":"Thanks, I am using this one: https://plugins.jetbrains.com/plugin/14832-single-hotswap","body":"Thanks, I am using this one: <a href=\"https://plugins.jetbrains.com/plugin/14832-single-hotswap\" rel=\"nofollow noreferrer\">plugins.jetbrains.com/plugin/14832-single-hotswap</a>"}],"tags":[],"owner":{"account_id":1623729,"reputation":5200,"user_id":1499766,"accept_rate":86,"display_name":"Scott Kurz"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1700419037,"creation_date":1700328098,"answer_id":77507965,"question_id":77505568,"body_markdown":"# You can&#39;t update an application class without app restart but you can use debugger HCR\r\n\r\nThe reason you can&#39;t update an application &quot;on disk&quot; without an app restart isn&#39;t because of the Liberty Maven/Gradle plugins, but because of the Liberty runtime itself.  The application classloader doesn&#39;t allow for a new version of a single class to be swapped into a started application.\r\n\r\n(Though you can update static content like .html files without an app update).\r\n\r\n## Use Debugger Hot Code Replace (HCR) to avoid app restart \r\n\r\nIn many cases, you can leverage the debugger HCR to replace a class implementation at a &quot;lower level&quot;.  \r\n\r\nThere are limitations and only a subset of all possible changes can be successfully replaced this way, e.g. as mentioned [here](https://wiki.eclipse.org/FAQ_What_is_hot_code_replace%3F) you can generally do things like replace a method body and generally not do things like change method signatures.\r\n\r\n## Use IDE tools\r\n\r\nThough you can certainly use a Java debugger without Liberty-specific IDE tooling, for completeness, let me point you to our &quot;Liberty Tools&quot; IDE tools for the three popular editors:\r\n\r\n* [Liberty Tools for VS Code](https://marketplace.visualstudio.com/items?itemName=Open-Liberty.liberty-dev-vscode-ext)\r\n* [Liberty Tools for Intellij IDEA](https://plugins.jetbrains.com/plugin/14856-liberty-tools)\r\n* [Liberty Tools for Eclipse](https://marketplace.eclipse.org/content/liberty-tools)\r\n\r\nThere is also an older Eclipse feature, [&quot;Liberty Developer Tools&quot;](https://marketplace.eclipse.org/content/ibm-liberty-developer-tools).  For newer Maven/Gradle apps we generally recommend the newer &quot;Liberty Tools for Eclipse&quot; feature mentioned above, with support for Jakarta EE 9/10 and MicroProfile development.  That said, the app update support is a bit nicer in Liberty Developer Tools at this point in time, (as noted briefly below).\r\n\r\n## Disable application monitor updates \r\n\r\nIf you&#39;re using some sort of rapid iterative development environment, like Liberty [&quot;dev mode&quot;](https://openliberty.io/docs/latest/development-mode.html) then with the default Liberty config, the app will update upon every class update.  Application update can, depending on the app, take a significant amount of time, which is likely exactly what led you to asking this question in the first place.\r\n\r\nYou can disable this behavior by configuring an `&lt;applicationMonitor&gt;` element in your **server.xml**:\r\n\r\n```xml\r\n &lt;applicationMonitor updateTrigger=&quot;mbean&quot; ... /&gt; \r\n```\r\n\r\nAlternately, you could use &quot;disabled&quot; in place of &quot;mbean&quot; as the attribute value.\r\n\r\n### Explanation\r\n\r\nAt the moment, in **Liberty Tools** there is no special assistance for app update, so there&#39;s no difference between &quot;mbean&quot; and &quot;disabled&quot;.  In the older, &quot;Liberty Developer Tools&quot; we have some &quot;smarter&quot; function in this area and so &quot;mbean&quot; would be a better choice.\r\n\r\n\r\n\r\n\r\n","title":"Can maven open-liberty plugin hot-reload single class file without stopping and restarting the whole application?","body":"<h1>You can't update an application class without app restart but you can use debugger HCR</h1>\n<p>The reason you can't update an application &quot;on disk&quot; without an app restart isn't because of the Liberty Maven/Gradle plugins, but because of the Liberty runtime itself.  The application classloader doesn't allow for a new version of a single class to be swapped into a started application.</p>\n<p>(Though you can update static content like .html files without an app update).</p>\n<h2>Use Debugger Hot Code Replace (HCR) to avoid app restart</h2>\n<p>In many cases, you can leverage the debugger HCR to replace a class implementation at a &quot;lower level&quot;.</p>\n<p>There are limitations and only a subset of all possible changes can be successfully replaced this way, e.g. as mentioned <a href=\"https://wiki.eclipse.org/FAQ_What_is_hot_code_replace%3F\" rel=\"nofollow noreferrer\">here</a> you can generally do things like replace a method body and generally not do things like change method signatures.</p>\n<h2>Use IDE tools</h2>\n<p>Though you can certainly use a Java debugger without Liberty-specific IDE tooling, for completeness, let me point you to our &quot;Liberty Tools&quot; IDE tools for the three popular editors:</p>\n<ul>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=Open-Liberty.liberty-dev-vscode-ext\" rel=\"nofollow noreferrer\">Liberty Tools for VS Code</a></li>\n<li><a href=\"https://plugins.jetbrains.com/plugin/14856-liberty-tools\" rel=\"nofollow noreferrer\">Liberty Tools for Intellij IDEA</a></li>\n<li><a href=\"https://marketplace.eclipse.org/content/liberty-tools\" rel=\"nofollow noreferrer\">Liberty Tools for Eclipse</a></li>\n</ul>\n<p>There is also an older Eclipse feature, <a href=\"https://marketplace.eclipse.org/content/ibm-liberty-developer-tools\" rel=\"nofollow noreferrer\">&quot;Liberty Developer Tools&quot;</a>.  For newer Maven/Gradle apps we generally recommend the newer &quot;Liberty Tools for Eclipse&quot; feature mentioned above, with support for Jakarta EE 9/10 and MicroProfile development.  That said, the app update support is a bit nicer in Liberty Developer Tools at this point in time, (as noted briefly below).</p>\n<h2>Disable application monitor updates</h2>\n<p>If you're using some sort of rapid iterative development environment, like Liberty <a href=\"https://openliberty.io/docs/latest/development-mode.html\" rel=\"nofollow noreferrer\">&quot;dev mode&quot;</a> then with the default Liberty config, the app will update upon every class update.  Application update can, depending on the app, take a significant amount of time, which is likely exactly what led you to asking this question in the first place.</p>\n<p>You can disable this behavior by configuring an <code>&lt;applicationMonitor&gt;</code> element in your <strong>server.xml</strong>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;applicationMonitor updateTrigger=&quot;mbean&quot; ... /&gt; \n</code></pre>\n<p>Alternately, you could use &quot;disabled&quot; in place of &quot;mbean&quot; as the attribute value.</p>\n<h3>Explanation</h3>\n<p>At the moment, in <strong>Liberty Tools</strong> there is no special assistance for app update, so there's no difference between &quot;mbean&quot; and &quot;disabled&quot;.  In the older, &quot;Liberty Developer Tools&quot; we have some &quot;smarter&quot; function in this area and so &quot;mbean&quot; would be a better choice.</p>\n"}],"owner":{"account_id":109585,"reputation":8067,"user_id":290284,"accept_rate":95,"display_name":"Cui Pengfei 崔鹏飞"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700749325,"creation_date":1700276984,"question_id":77505568,"body_markdown":"https://github.com/eugenp/tutorials/tree/master/microservices-modules/open-liberty\r\n\r\nI am using the above code to test maven open-liberty plugin.\r\n\r\n```\r\nmvn liberty:dev\r\n```\r\ncan start the app, no problem here.\r\n\r\nThen when one jave file gets editted, it gets detected and recompiled, also good.\r\n\r\nHowever, the whole application gets stopped and restarted.\r\n\r\nCan open-liberty be configured to only hot-reload one single class file without rebooting the whole app?\r\n","title":"Can maven open-liberty plugin hot-reload single class file without stopping and restarting the whole application?","body":"<p><a href=\"https://github.com/eugenp/tutorials/tree/master/microservices-modules/open-liberty\" rel=\"nofollow noreferrer\">https://github.com/eugenp/tutorials/tree/master/microservices-modules/open-liberty</a></p>\n<p>I am using the above code to test maven open-liberty plugin.</p>\n<pre><code>mvn liberty:dev\n</code></pre>\n<p>can start the app, no problem here.</p>\n<p>Then when one jave file gets editted, it gets detected and recompiled, also good.</p>\n<p>However, the whole application gets stopped and restarted.</p>\n<p>Can open-liberty be configured to only hot-reload one single class file without rebooting the whole app?</p>\n"},{"tags":["java","maven","bitbucket"],"owner":{"account_id":1432735,"reputation":775,"user_id":1354768,"accept_rate":54,"display_name":"BlackEye"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700749218,"creation_date":1700749218,"question_id":77537622,"body_markdown":"I try upgrading one of our plugins to the new API version of Bitbucket and a transitive dependency cannot be found in any repository. Googeling didn&#39;t help yet.\r\n\r\n```[ERROR] Failed to execute goal on project bitbucket-plugin: Could not resolve dependencies for project orga:bitbucket-plugin:atlassian-plugin:3.3-SNAPSHOT: Failed to collect dependencies at com.atlassian.bitbucket.server:bitbucket-web-common:jar:8.9.5 -&gt; com.atlassian.bitbucket.server:bitbucket-spi:jar:8.9.5 -&gt; com.atlassian.plugins:atlassian-plugins-core:jar:7.1.5 -&gt; com.atlassian.plugins:atlassian-plugins-api:jar:7.1.5 -&gt; io.atlassian.fugue:fugue:jar:5.0.0: Failed to read artifact descriptor for io.atlassian.fugue:fugue:jar:5.0.0: Could not find artifact io.atlassian.fugue:fugue-parent:pom:5.0.0 in orga.public (https://organexus/content/groups/public/) -&gt; [Help 1]```\r\n\r\nThe Nexus group contains:\r\n\r\n - Maven Central\r\n - https://maven.atlassian.com/repository/public/\r\n - https://packages.atlassian.com/3rdparty/","title":"Bitbucket Server Plugin cannot be built because transitive dependency is in no repository","body":"<p>I try upgrading one of our plugins to the new API version of Bitbucket and a transitive dependency cannot be found in any repository. Googeling didn't help yet.</p>\n<p><code>[ERROR] Failed to execute goal on project bitbucket-plugin: Could not resolve dependencies for project orga:bitbucket-plugin:atlassian-plugin:3.3-SNAPSHOT: Failed to collect dependencies at com.atlassian.bitbucket.server:bitbucket-web-common:jar:8.9.5 -&gt; com.atlassian.bitbucket.server:bitbucket-spi:jar:8.9.5 -&gt; com.atlassian.plugins:atlassian-plugins-core:jar:7.1.5 -&gt; com.atlassian.plugins:atlassian-plugins-api:jar:7.1.5 -&gt; io.atlassian.fugue:fugue:jar:5.0.0: Failed to read artifact descriptor for io.atlassian.fugue:fugue:jar:5.0.0: Could not find artifact io.atlassian.fugue:fugue-parent:pom:5.0.0 in orga.public (https://organexus/content/groups/public/) -&gt; [Help 1]</code></p>\n<p>The Nexus group contains:</p>\n<ul>\n<li>Maven Central</li>\n<li><a href=\"https://maven.atlassian.com/repository/public/\" rel=\"nofollow noreferrer\">https://maven.atlassian.com/repository/public/</a></li>\n<li><a href=\"https://packages.atlassian.com/3rdparty/\" rel=\"nofollow noreferrer\">https://packages.atlassian.com/3rdparty/</a></li>\n</ul>\n"},{"tags":["java","spring-boot","hibernate"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1700739372,"post_id":77536018,"comment_id":136692843,"body_markdown":"Could you also update the question with `pom.xml` or `gradle.build`  file ?","body":"Could you also update the question with <code>pom.xml</code> or <code>gradle.build</code>  file ?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1700741613,"post_id":77536018,"comment_id":136693182,"body_markdown":"Do you by any change configure the entitymanagerfactory yourself instead of using the spring auto configured one? Also yes it needs a default constructor and the field should be marked with the `@Autowired` annotation. This is kind of enforced by the specification. If configured properly it will still ask Spring to autowire the dependencies. It doesn&#39;t need to be an `@Component`. In short you cannot opt-out of the no-args constructor as that is what it needs to have according to the specification.","body":"Do you by any change configure the entitymanagerfactory yourself instead of using the spring auto configured one? Also yes it needs a default constructor and the field should be marked with the <code>@Autowired</code> annotation. This is kind of enforced by the specification. If configured properly it will still ask Spring to autowire the dependencies. It doesn&#39;t need to be an <code>@Component</code>. In short you cannot opt-out of the no-args constructor as that is what it needs to have according to the specification."},{"owner":{"account_id":6310497,"reputation":136,"user_id":4902186,"accept_rate":62,"display_name":"Stieg"},"score":0,"creation_date":1700748581,"post_id":77536018,"comment_id":136694470,"body_markdown":"@AndreiLisa This project has got 4 pom files, it&#39;d be easier to post only what you&#39;d like to see","body":"@AndreiLisa This project has got 4 pom files, it&#39;d be easier to post only what you&#39;d like to see"},{"owner":{"account_id":6310497,"reputation":136,"user_id":4902186,"accept_rate":62,"display_name":"Stieg"},"score":0,"creation_date":1700748762,"post_id":77536018,"comment_id":136694506,"body_markdown":"@M.Deinum No, I just checked no mention of any entitymanagerfactory in the whole project.","body":"@M.Deinum No, I just checked no mention of any entitymanagerfactory in the whole project."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1700750080,"post_id":77536018,"comment_id":136694731,"body_markdown":"`mvn dependency:tree` run check if there are some `javax` dependencies","body":"<code>mvn dependency:tree</code> run check if there are some <code>javax</code> dependencies"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1700751660,"post_id":77536018,"comment_id":136695033,"body_markdown":"As mentioned in my previous comment you simply need the no-args constructor. Add an `@Autowired` field and remove the `@Component`.","body":"As mentioned in my previous comment you simply need the no-args constructor. Add an <code>@Autowired</code> field and remove the <code>@Component</code>."},{"owner":{"account_id":6310497,"reputation":136,"user_id":4902186,"accept_rate":62,"display_name":"Stieg"},"score":0,"creation_date":1700818971,"post_id":77536018,"comment_id":136702398,"body_markdown":"@M.Deinum I&#39;m just trying that, but first, I had to change the field to the f Bean type of the cunstructor I was using before. The thing is that now, it&#39;s tekking me that Cannot invoke &quot;com.tss.pago.core.validation.config.ValidationProperties.getZipcode()&quot; because &quot;this.validationProperties&quot; is null, validation properties is the new field.","body":"@M.Deinum I&#39;m just trying that, but first, I had to change the field to the f Bean type of the cunstructor I was using before. The thing is that now, it&#39;s tekking me that Cannot invoke &quot;com.tss.pago.core.validation.config.ValidationProperties.ge&zwnj;&#8203;tZipcode()&quot; because &quot;this.validationProperties&quot; is null, validation properties is the new field."},{"owner":{"account_id":6310497,"reputation":136,"user_id":4902186,"accept_rate":62,"display_name":"Stieg"},"score":0,"creation_date":1700819202,"post_id":77536018,"comment_id":136702435,"body_markdown":"@AndreiLisa no javax dependencencies in the dependency tree","body":"@AndreiLisa no javax dependencencies in the dependency tree"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1700822208,"post_id":77536018,"comment_id":136702943,"body_markdown":"It is complaining **where**... Please don&#39;t describe code but instead **show code**. What did you do to modify it? And just making your curent constructor a no-arg constructor will fail!. What you have in your constructor needs to move to the `initialize` method instead.","body":"It is complaining <b>where</b>... Please don&#39;t describe code but instead <b>show code</b>. What did you do to modify it? And just making your curent constructor a no-arg constructor will fail!. What you have in your constructor needs to move to the <code>initialize</code> method instead."},{"owner":{"account_id":6310497,"reputation":136,"user_id":4902186,"accept_rate":62,"display_name":"Stieg"},"score":0,"creation_date":1701245286,"post_id":77536018,"comment_id":136750315,"body_markdown":"@M.Deinum sorry, that comment was clearly poorly written. That said, it&#39;s hard to show code in comments due to character number constraints. I did remove the `@Component` and added `@Autowired\n    private ValidationProperties validationProperties;` as you suggested and got `Cannot invoke &quot;*.validation.config.ValidationProperties.getZipcode()&quot; because &quot;this.validationProperties&quot; is null`.  In the next comment I&#39;ll share the ValidationProperties.","body":"@M.Deinum sorry, that comment was clearly poorly written. That said, it&#39;s hard to show code in comments due to character number constraints. I did remove the <code>@Component</code> and added <code>@Autowired     private ValidationProperties validationProperties;</code> as you suggested and got <code>Cannot invoke &quot;*.validation.config.ValidationProperties.getZipcode()&quot; because &quot;this.validationProperties&quot; is null</code>.  In the next comment I&#39;ll share the ValidationProperties."},{"owner":{"account_id":6310497,"reputation":136,"user_id":4902186,"accept_rate":62,"display_name":"Stieg"},"score":0,"creation_date":1701245325,"post_id":77536018,"comment_id":136750321,"body_markdown":"`@Data\n@Configuration\n@ConfigurationProperties(prefix = &quot;validation&quot;)\npublic class ValidationProperties {\n    Map&lt;String, String&gt; zipcode;\n    Map&lt;String, String&gt; taxcode;\n}`","body":"<code>@Data @Configuration @ConfigurationProperties(prefix = &quot;validation&quot;) public class ValidationProperties {     Map&lt;String, String&gt; zipcode;     Map&lt;String, String&gt; taxcode; }</code>"}],"owner":{"account_id":6310497,"reputation":136,"user_id":4902186,"accept_rate":62,"display_name":"Stieg"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700748906,"creation_date":1700734284,"question_id":77536018,"body_markdown":"I&#39;ve been tasked to migrate to Spring Boot 3, so I&#39;m taking the oportunity to simple update to the latest version. As I expected there are some migration pains that I have been dealing with. At the moment I&#39;m stuck with the ConstraintValidators, I can&#39;t seem to find in any documentation any breaking changes but now it wants to have No Args constructors, so I checked this post https://stackoverflow.com/a/67515823/4902186 and went to a rabbit hole trying to make that work and decided against it (my unit tests got messed up and then I found a wierd behaviour that I&#39;m explaining next). \r\n\r\nFor a brief time the errors I was getting from it wanting a no arg constructor (at runtime, it would compile and run properly) but then I noticed a couple of wierd things, validations would be triggered at the end of the API call (to be honest I&#39;m unsure that was the case before but it&#39;s strange to me) and when it tried to persist (again, at the end of the call) it would do it at least twice and it&#39;d throw a SQL exception stating that you cannot duplicate primary keys. Ultimately I am trying to look elsewhere but I&#39;m unable to find anyone with this exact problem online.\r\n\r\nSo, here&#39;s an example of a validator that I&#39;m having problems with:\r\n\r\n    @Component\r\n    public class CustomerAddressValidator implements ConstraintValidator&lt;CustomerAddressValid, CustomerAddress&gt; {\r\n    \r\n        private Map&lt;CountryCode, Pattern&gt; regexPatterns;\r\n    \r\n        @Autowired\r\n        CustomerAddressValidator(ValidationProperties validationProperties) {\r\n            regexPatterns = validationProperties.getZipcode().entrySet().stream()\r\n                    .collect(Collectors.toMap(\r\n                            e1 -&gt; CountryCode.valueOf(e1.getKey().toUpperCase()),\r\n                            e2 -&gt; Pattern.compile(Optional.ofNullable(e2.getValue())\r\n                                    .orElseThrow(() -&gt; new NullPointerException(&quot;zip code validation configuration failure for country code: &quot; + e2.getKey())))));\r\n        }\r\n    \r\n        @Override\r\n        public void initialize(CustomerAddressValid constraintAnnotation) {\r\n            // Does not have a special initialization logic\r\n        }\r\n    \r\n        @Override\r\n        public boolean isValid(CustomerAddress address, ConstraintValidatorContext cxt) {\r\n            return allValid(isZipCodeValid(address, cxt),isAddressValid(address, cxt));\r\n        }\r\n    \r\n        private boolean isZipCodeValid(CustomerAddress address, ConstraintValidatorContext cxt) {\r\n            if (address == null || address.getZipCode() == null || address.getCountryCode() == null) return true;\r\n            Pattern pattern = regexPatterns.get(address.getCountryCode());\r\n            boolean isValid = pattern == null || pattern.matcher(address.getZipCode()).matches();\r\n            if (!isValid)\r\n                cxt.buildConstraintViolationWithTemplate(&quot;zip code must match with pattern: &quot; + pattern.toString())\r\n                        .addPropertyNode(&quot;zipCode&quot;)\r\n                        .addConstraintViolation();\r\n            return isValid;\r\n        }\r\n    \r\n        /**\r\n         * Validates the combination of the address fields street, houseNumber and lineOne\r\n         *\r\n         * @param address the customer address\r\n         * @param cxt     the validator context\r\n         * @return true if the address rules are valid\r\n         */\r\n        private boolean isAddressValid(CustomerAddress address, ConstraintValidatorContext cxt) {\r\n            String street = address.getStreet();\r\n            String houseNumber = address.getHouseNumber();\r\n            String lineOne = address.getLineOne();\r\n    \r\n            if ((street == null || StringUtils.isEmpty(street)) &amp;&amp; (houseNumber == null || StringUtils.isEmpty(houseNumber)) &amp;&amp; (lineOne == null || StringUtils.isEmpty(lineOne))) {\r\n                cxt.buildConstraintViolationWithTemplate(&quot;Either the fields &#39;street&#39; and &#39;houseNumber&#39; must be filled or field &#39;lineOne&#39;.&quot;)\r\n                        .addPropertyNode(&quot;lineOne&quot;)\r\n                        .addConstraintViolation();\r\n                return false;\r\n            }\r\n    \r\n    \r\n            if ((street == null || StringUtils.isEmpty(street)) &amp;&amp; (houseNumber != null &amp;&amp; !StringUtils.isEmpty(houseNumber))) {\r\n                cxt.buildConstraintViolationWithTemplate(&quot;If the field &#39;houseNumber&#39; is filled, please fill in the field &#39;street&#39;.&quot;)\r\n                        .addPropertyNode(&quot;houseNumber&quot;)\r\n                        .addConstraintViolation();\r\n                return false;\r\n            }\r\n    \r\n            if ((lineOne != null &amp;&amp; !StringUtils.isEmpty(lineOne)) &amp;&amp; (street != null &amp;&amp; !StringUtils.isEmpty(street))) {\r\n                cxt.buildConstraintViolationWithTemplate(&quot;Either the fields &#39;street&#39; and &#39;houseNumber&#39; must be filled or field &#39;lineOne&#39;.&quot;)\r\n                        .addPropertyNode(&quot;lineOne&quot;)\r\n                        .addConstraintViolation();\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    \r\n        private boolean allValid(Boolean... validations) {\r\n            return Arrays.stream(validations).allMatch(isValid -&gt; isValid);\r\n        }\r\n    }\r\n\r\n\r\n\r\nAnd here&#39;s the stack trace I get whenever I try to create a Customer, meaning I call one of the APIs using this validation:\r\n\r\n```\r\njakarta.validation.ValidationException: HV000064: Unable to instantiate ConstraintValidator: *.validation.CustomerAddressValidator.\r\n\tat org.hibernate.validator.internal.util.privilegedactions.NewInstance.run(NewInstance.java:44) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintValidatorFactoryImpl.run(ConstraintValidatorFactoryImpl.java:45) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintValidatorFactoryImpl.getInstance(ConstraintValidatorFactoryImpl.java:29) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.ClassBasedValidatorDescriptor.newInstance(ClassBasedValidatorDescriptor.java:84) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.AbstractConstraintValidatorManagerImpl.createAndInitializeValidator(AbstractConstraintValidatorManagerImpl.java:89) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintValidatorManagerImpl.getInitializedValidator(ConstraintValidatorManagerImpl.java:117) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.getInitializedConstraintValidator(ConstraintTree.java:136) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.SimpleConstraintTree.validateConstraints(SimpleConstraintTree.java:58) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:75) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.doValidateConstraint(MetaConstraint.java:130) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.metadata.core.MetaConstraint$TypeParameterValueReceiver.doValidate(MetaConstraint.java:246) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.metadata.core.MetaConstraint$TypeParameterValueReceiver.indexedValue(MetaConstraint.java:212) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.valueextraction.ListValueExtractor.extractValues(ListValueExtractor.java:28) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.valueextraction.ListValueExtractor.extractValues(ListValueExtractor.java:17) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.valueextraction.ValueExtractorHelper.extractValues(ValueExtractorHelper.java:42) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:117) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:555) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForSingleDefaultGroupElement(ValidatorImpl.java:518) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:488) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:450) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:400) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:172) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\tat org.hibernate.boot.beanvalidation.BeanValidationEventListener.validate(BeanValidationEventListener.java:128) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.beanvalidation.BeanValidationEventListener.onPreInsert(BeanValidationEventListener.java:81) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.action.internal.EntityInsertAction.preInsert(EntityInsertAction.java:215) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:98) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:635) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:502) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:364) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:55) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1375) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:108) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:303) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:244) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:518) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:367) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.query.Query.getResultList(Query.java:119) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129) ~[spring-data-jpa-3.1.5.jar:3.1.5]\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.1.5.jar:3.1.5]\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.1.5.jar:3.1.5]\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.1.5.jar:3.1.5]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136) ~[spring-data-commons-3.1.5.jar:3.1.5]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120) ~[spring-data-commons-3.1.5.jar:3.1.5]\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.1.5.jar:3.1.5]\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.1.5.jar:3.1.5]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:72) ~[spring-data-commons-3.1.5.jar:3.1.5]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.13.jar:6.0.13]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.13.jar:6.0.13]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.13.jar:6.0.13]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.0.13.jar:6.0.13]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.1.5.jar:3.1.5]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.0.13.jar:6.0.13]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244) ~[spring-aop-6.0.13.jar:6.0.13]\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy204.findAllByCustomerId(Unknown Source) ~[na:na]\r\n\tat *.JpaCustomerService.toDto(JpaCustomerService.java:295) ~[classes/:na]\r\n\tat *.JpaCustomerService.createCustomer(JpaCustomerService.java:545) ~[classes/:na]\r\n\tat *.JpaCustomerService.createCustomer(JpaCustomerService.java:516) ~[classes/:na]\r\n...\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\nCaused by: java.lang.NoSuchMethodException: *.validation.CustomerAddressValidator.&lt;init&gt;()\r\n\tat java.base/java.lang.Class.getConstructor0(Class.java:3585) ~[na:na]\r\n\tat java.base/java.lang.Class.getConstructor(Class.java:2271) ~[na:na]\r\n\tat org.hibernate.validator.internal.util.privilegedactions.NewInstance.run(NewInstance.java:41) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\r\n\t... 197 common frames omitted\r\n```\r\n\r\nI&#39;m looking for any light on this problem, why do I now appearantly need a No args constructor and how should I act on it.\r\n\r\nEdit: this is not the only validation with this problem, but also I can&#39;t say for sure that every validation is failing.","title":"ConstraintValidator after migrating from Spring boot 2.7.15 -&gt; 3.1.X","body":"<p>I've been tasked to migrate to Spring Boot 3, so I'm taking the oportunity to simple update to the latest version. As I expected there are some migration pains that I have been dealing with. At the moment I'm stuck with the ConstraintValidators, I can't seem to find in any documentation any breaking changes but now it wants to have No Args constructors, so I checked this post <a href=\"https://stackoverflow.com/a/67515823/4902186\">https://stackoverflow.com/a/67515823/4902186</a> and went to a rabbit hole trying to make that work and decided against it (my unit tests got messed up and then I found a wierd behaviour that I'm explaining next).</p>\n<p>For a brief time the errors I was getting from it wanting a no arg constructor (at runtime, it would compile and run properly) but then I noticed a couple of wierd things, validations would be triggered at the end of the API call (to be honest I'm unsure that was the case before but it's strange to me) and when it tried to persist (again, at the end of the call) it would do it at least twice and it'd throw a SQL exception stating that you cannot duplicate primary keys. Ultimately I am trying to look elsewhere but I'm unable to find anyone with this exact problem online.</p>\n<p>So, here's an example of a validator that I'm having problems with:</p>\n<pre><code>@Component\npublic class CustomerAddressValidator implements ConstraintValidator&lt;CustomerAddressValid, CustomerAddress&gt; {\n\n    private Map&lt;CountryCode, Pattern&gt; regexPatterns;\n\n    @Autowired\n    CustomerAddressValidator(ValidationProperties validationProperties) {\n        regexPatterns = validationProperties.getZipcode().entrySet().stream()\n                .collect(Collectors.toMap(\n                        e1 -&gt; CountryCode.valueOf(e1.getKey().toUpperCase()),\n                        e2 -&gt; Pattern.compile(Optional.ofNullable(e2.getValue())\n                                .orElseThrow(() -&gt; new NullPointerException(&quot;zip code validation configuration failure for country code: &quot; + e2.getKey())))));\n    }\n\n    @Override\n    public void initialize(CustomerAddressValid constraintAnnotation) {\n        // Does not have a special initialization logic\n    }\n\n    @Override\n    public boolean isValid(CustomerAddress address, ConstraintValidatorContext cxt) {\n        return allValid(isZipCodeValid(address, cxt),isAddressValid(address, cxt));\n    }\n\n    private boolean isZipCodeValid(CustomerAddress address, ConstraintValidatorContext cxt) {\n        if (address == null || address.getZipCode() == null || address.getCountryCode() == null) return true;\n        Pattern pattern = regexPatterns.get(address.getCountryCode());\n        boolean isValid = pattern == null || pattern.matcher(address.getZipCode()).matches();\n        if (!isValid)\n            cxt.buildConstraintViolationWithTemplate(&quot;zip code must match with pattern: &quot; + pattern.toString())\n                    .addPropertyNode(&quot;zipCode&quot;)\n                    .addConstraintViolation();\n        return isValid;\n    }\n\n    /**\n     * Validates the combination of the address fields street, houseNumber and lineOne\n     *\n     * @param address the customer address\n     * @param cxt     the validator context\n     * @return true if the address rules are valid\n     */\n    private boolean isAddressValid(CustomerAddress address, ConstraintValidatorContext cxt) {\n        String street = address.getStreet();\n        String houseNumber = address.getHouseNumber();\n        String lineOne = address.getLineOne();\n\n        if ((street == null || StringUtils.isEmpty(street)) &amp;&amp; (houseNumber == null || StringUtils.isEmpty(houseNumber)) &amp;&amp; (lineOne == null || StringUtils.isEmpty(lineOne))) {\n            cxt.buildConstraintViolationWithTemplate(&quot;Either the fields 'street' and 'houseNumber' must be filled or field 'lineOne'.&quot;)\n                    .addPropertyNode(&quot;lineOne&quot;)\n                    .addConstraintViolation();\n            return false;\n        }\n\n\n        if ((street == null || StringUtils.isEmpty(street)) &amp;&amp; (houseNumber != null &amp;&amp; !StringUtils.isEmpty(houseNumber))) {\n            cxt.buildConstraintViolationWithTemplate(&quot;If the field 'houseNumber' is filled, please fill in the field 'street'.&quot;)\n                    .addPropertyNode(&quot;houseNumber&quot;)\n                    .addConstraintViolation();\n            return false;\n        }\n\n        if ((lineOne != null &amp;&amp; !StringUtils.isEmpty(lineOne)) &amp;&amp; (street != null &amp;&amp; !StringUtils.isEmpty(street))) {\n            cxt.buildConstraintViolationWithTemplate(&quot;Either the fields 'street' and 'houseNumber' must be filled or field 'lineOne'.&quot;)\n                    .addPropertyNode(&quot;lineOne&quot;)\n                    .addConstraintViolation();\n            return false;\n        }\n        return true;\n    }\n\n    private boolean allValid(Boolean... validations) {\n        return Arrays.stream(validations).allMatch(isValid -&gt; isValid);\n    }\n}\n</code></pre>\n<p>And here's the stack trace I get whenever I try to create a Customer, meaning I call one of the APIs using this validation:</p>\n<pre><code>jakarta.validation.ValidationException: HV000064: Unable to instantiate ConstraintValidator: *.validation.CustomerAddressValidator.\n    at org.hibernate.validator.internal.util.privilegedactions.NewInstance.run(NewInstance.java:44) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintValidatorFactoryImpl.run(ConstraintValidatorFactoryImpl.java:45) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintValidatorFactoryImpl.getInstance(ConstraintValidatorFactoryImpl.java:29) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ClassBasedValidatorDescriptor.newInstance(ClassBasedValidatorDescriptor.java:84) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.AbstractConstraintValidatorManagerImpl.createAndInitializeValidator(AbstractConstraintValidatorManagerImpl.java:89) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintValidatorManagerImpl.getInitializedValidator(ConstraintValidatorManagerImpl.java:117) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.getInitializedConstraintValidator(ConstraintTree.java:136) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.SimpleConstraintTree.validateConstraints(SimpleConstraintTree.java:58) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:75) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.metadata.core.MetaConstraint.doValidateConstraint(MetaConstraint.java:130) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.metadata.core.MetaConstraint$TypeParameterValueReceiver.doValidate(MetaConstraint.java:246) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.metadata.core.MetaConstraint$TypeParameterValueReceiver.indexedValue(MetaConstraint.java:212) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.valueextraction.ListValueExtractor.extractValues(ListValueExtractor.java:28) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.valueextraction.ListValueExtractor.extractValues(ListValueExtractor.java:17) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.valueextraction.ValueExtractorHelper.extractValues(ValueExtractorHelper.java:42) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:117) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:555) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForSingleDefaultGroupElement(ValidatorImpl.java:518) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:488) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:450) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:400) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:172) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    at org.hibernate.boot.beanvalidation.BeanValidationEventListener.validate(BeanValidationEventListener.java:128) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.beanvalidation.BeanValidationEventListener.onPreInsert(BeanValidationEventListener.java:81) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.action.internal.EntityInsertAction.preInsert(EntityInsertAction.java:215) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:98) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:635) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:502) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:364) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:55) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1375) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:108) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:303) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:244) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:518) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:367) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.query.Query.getResultList(Query.java:119) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129) ~[spring-data-jpa-3.1.5.jar:3.1.5]\n    at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.1.5.jar:3.1.5]\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.1.5.jar:3.1.5]\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.1.5.jar:3.1.5]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136) ~[spring-data-commons-3.1.5.jar:3.1.5]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120) ~[spring-data-commons-3.1.5.jar:3.1.5]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.1.5.jar:3.1.5]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.1.5.jar:3.1.5]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]\n    at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:72) ~[spring-data-commons-3.1.5.jar:3.1.5]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.13.jar:6.0.13]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.13.jar:6.0.13]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.13.jar:6.0.13]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.0.13.jar:6.0.13]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.1.5.jar:3.1.5]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.0.13.jar:6.0.13]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244) ~[spring-aop-6.0.13.jar:6.0.13]\n    at jdk.proxy2/jdk.proxy2.$Proxy204.findAllByCustomerId(Unknown Source) ~[na:na]\n    at *.JpaCustomerService.toDto(JpaCustomerService.java:295) ~[classes/:na]\n    at *.JpaCustomerService.createCustomer(JpaCustomerService.java:545) ~[classes/:na]\n    at *.JpaCustomerService.createCustomer(JpaCustomerService.java:516) ~[classes/:na]\n...\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\nCaused by: java.lang.NoSuchMethodException: *.validation.CustomerAddressValidator.&lt;init&gt;()\n    at java.base/java.lang.Class.getConstructor0(Class.java:3585) ~[na:na]\n    at java.base/java.lang.Class.getConstructor(Class.java:2271) ~[na:na]\n    at org.hibernate.validator.internal.util.privilegedactions.NewInstance.run(NewInstance.java:41) ~[hibernate-validator-8.0.1.Final.jar:8.0.1.Final]\n    ... 197 common frames omitted\n</code></pre>\n<p>I'm looking for any light on this problem, why do I now appearantly need a No args constructor and how should I act on it.</p>\n<p>Edit: this is not the only validation with this problem, but also I can't say for sure that every validation is failing.</p>\n"},{"tags":["java","jakarta-ee","rest-client","payara","microprofile"],"owner":{"account_id":26819117,"reputation":1,"user_id":20408719,"display_name":"Silas Z"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700748604,"creation_date":1700741389,"question_id":77536759,"body_markdown":"I&#39;m encountering an issue when attempting to use RestClientBuilder in my Java code to build a client with MicroProfile. I&#39;m receiving the error message &quot;No RestClientBuilderResolver implementation found!&quot; Here&#39;s the segement that causes the issue:\r\n\r\n```\r\nMyClient myClient = RestClientBuilder.newBuilder()\r\n        .baseUri(new URI(Url))\r\n        .build(MyClient.class);\r\n```\r\nAnd here&#39;s my MyClient interface:\r\n\r\n```\r\n@Path(&quot;/root&quot;)\r\n@RegisterRestClient\r\n@ClientHeaderParam(name = &quot;x-api-key&quot;, value = MyKey)\r\npublic interface MyClient {\r\n\r\n    @POST\r\n    @Path(&quot;/endpoint1&quot;)\r\n    public MyObj getDeviceState(JsonObject body);\r\n\r\n    @POST\r\n    @Path(&quot;/endpoint2&quot;)\r\n    public MyObj getGatewayState(JsonObject body);\r\n}\r\n```\r\nI&#39;ve verified that the dependencies for the necessary are correctly included. However, despite this, I&#39;m still encountering the error mentioned above.\r\n\r\nI am using Payara 6.2023.11, jakarta ee 10 and i am using the following dependencies\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.eclipse.microprofile.rest.client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;microprofile-rest-client-api&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.eclipse.microprofile&lt;/groupId&gt;\r\n            &lt;artifactId&gt;microprofile&lt;/artifactId&gt;\r\n            &lt;version&gt;5.0&lt;/version&gt;\r\n            &lt;type&gt;pom&lt;/type&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nI tried multiple versions of them and also used them alone or together.\r\n\r\nI also have tested to use\r\n\r\n\r\n```\r\nRestClientBuilder builder = RestClientBuilderResolver.instance().newBuilder();\r\nMyClient myClient = builder\r\n                    .baseUri(new URI(URL))\r\n                    .build(MyClient.class);\r\n```\r\n\r\nand here I could go the the implementation of RestClientBuilderResolver which doesn&#39;t make sense to me.\r\n\r\nI tried to do a small side project where I did the same and it worked. Then I added all the dependencies that were on my Main project and it still worked, so it don&#39;t think there is a dependency conflict.\r\n\r\nCould someone guide me on what might be causing this issue and how I could resolve it? Any help would be greatly appreciated. Thank you!\r\n\r\n","title":"Getting &quot;No RestClientBuilderResolver implementation found!&quot; when using RestClientBuilder","body":"<p>I'm encountering an issue when attempting to use RestClientBuilder in my Java code to build a client with MicroProfile. I'm receiving the error message &quot;No RestClientBuilderResolver implementation found!&quot; Here's the segement that causes the issue:</p>\n<pre><code>MyClient myClient = RestClientBuilder.newBuilder()\n        .baseUri(new URI(Url))\n        .build(MyClient.class);\n</code></pre>\n<p>And here's my MyClient interface:</p>\n<pre><code>@Path(&quot;/root&quot;)\n@RegisterRestClient\n@ClientHeaderParam(name = &quot;x-api-key&quot;, value = MyKey)\npublic interface MyClient {\n\n    @POST\n    @Path(&quot;/endpoint1&quot;)\n    public MyObj getDeviceState(JsonObject body);\n\n    @POST\n    @Path(&quot;/endpoint2&quot;)\n    public MyObj getGatewayState(JsonObject body);\n}\n</code></pre>\n<p>I've verified that the dependencies for the necessary are correctly included. However, despite this, I'm still encountering the error mentioned above.</p>\n<p>I am using Payara 6.2023.11, jakarta ee 10 and i am using the following dependencies</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.microprofile.rest.client&lt;/groupId&gt;\n            &lt;artifactId&gt;microprofile-rest-client-api&lt;/artifactId&gt;\n            &lt;version&gt;3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.microprofile&lt;/groupId&gt;\n            &lt;artifactId&gt;microprofile&lt;/artifactId&gt;\n            &lt;version&gt;5.0&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I tried multiple versions of them and also used them alone or together.</p>\n<p>I also have tested to use</p>\n<pre><code>RestClientBuilder builder = RestClientBuilderResolver.instance().newBuilder();\nMyClient myClient = builder\n                    .baseUri(new URI(URL))\n                    .build(MyClient.class);\n</code></pre>\n<p>and here I could go the the implementation of RestClientBuilderResolver which doesn't make sense to me.</p>\n<p>I tried to do a small side project where I did the same and it worked. Then I added all the dependencies that were on my Main project and it still worked, so it don't think there is a dependency conflict.</p>\n<p>Could someone guide me on what might be causing this issue and how I could resolve it? Any help would be greatly appreciated. Thank you!</p>\n"},{"tags":["java","access-denied","smb","jcifs","failed-to-connect"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1700751625,"post_id":77537525,"comment_id":136695024,"body_markdown":"Please **do not** post images of code, data, error messages, etc. Copy or type the text into the question. Please reserve the use of images for diagrams or demonstrating rendering bugs, things that are impossible to describe accurately via text. Code or sample data in images can&#39;t be copied and pasted in order to search about a problem or reproduce it. For more details read the Meta FAQ entry [Why not upload images of code/errors when asking a question?](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557)","body":"Please <b>do not</b> post images of code, data, error messages, etc. Copy or type the text into the question. Please reserve the use of images for diagrams or demonstrating rendering bugs, things that are impossible to describe accurately via text. Code or sample data in images can&#39;t be copied and pasted in order to search about a problem or reproduce it. For more details read the Meta FAQ entry <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">Why not upload images of code/errors when asking a question?</a>"}],"owner":{"account_id":27974997,"reputation":1,"user_id":21363999,"display_name":"Kevin Heloise"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700748571,"creation_date":1700748330,"question_id":77537525,"body_markdown":"I&#39;m experiencing an issue with accessing an SMB share in both a Java application and a Node.js script. When I connect to the SMB share via CMD using a specific service account (username and password), it works flawlessly. However, when trying to access the same SMB share in my Java (using JCIFS) and Node.js applications with the same service account credentials, I encounter an &quot;Access is Denied&quot; error.\r\n\r\nHere&#39;s what I&#39;ve tried so far:\r\n- Confirmed the correctness of username, password, and domain in the Java and Node.js applications.\r\n- Checked SMB server permissions for the service account.\r\n- Increased logging level in JCIFS to gather more details, but couldn&#39;t pinpoint the issue.\r\n- Looked through JCIFS documentation for any potential misconfigurations.\r\n\r\nIt&#39;s puzzling why the access is successful via CMD but fails in both Java and Node.js. I&#39;m attaching screenshots of the error and relevant code snippets for clarity. Any insights or suggestions on what might be causing this issue and how to resolve it would be greatly appreciated.\r\n\r\nThank you!\r\n\r\n\r\n```\r\n public FichierService() {\r\n        try {\r\n            Properties smbProps = new Properties();\r\n            smbProps.put(&quot;jcifs.smb.client.username&quot;, &quot;XXXXXXXXXX&quot;); \r\n            smbProps.put(&quot;jcifs.smb.client.password&quot;, &quot;XXXXXXX&quot;);\r\n            smbProps.put(&quot;jcifs.smb.client.domain&quot;, &quot;xxxxx.com&quot;);\r\n            Configuration config = new PropertyConfiguration(smbProps);\r\n            cifsContext = new BaseContext(config);\r\n            System.out.println(&quot;CIFS context initialized&quot;);\r\n        } catch (CIFSException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public byte[] recupererFichiersZip(List&lt;Long&gt; audrosIds) throws IOException {\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        ZipOutputStream zos = new ZipOutputStream(baos);\r\n        System.out.println(&quot;Starting to process files...&quot;);\r\n        \r\n        for (Long audrosId : audrosIds) {\r\n            List&lt;Object[]&gt; resultList = repository.findFilesByIdAttach(Collections.singletonList(audrosId));\r\n            if (!resultList.isEmpty()) {\r\n                Object[] fileData = resultList.get(0);\r\n                String chemin = (String) fileData[0];\r\n                String namefile= &quot;236973_NSA_2110_H.pdf&quot;;\r\n                String smbPath = &quot;smb://srvptzxx.xxxx/Test_partage/xxxx/&quot; + namefile;\r\n\r\n                System.out.println(smbPath);\r\n\r\n                try {\r\n                    SmbFile smbFile = new SmbFile(smbPath, cifsContext);\r\n                    System.out.println(smbFile);\r\n                    if (smbFile.exists()) {\r\n                        System.out.println(&quot;File exists: &quot; + smbPath);\r\n                        SmbFileInputStream smbStream = new SmbFileInputStream(smbFile);\r\n\r\n                        ZipEntry entry = new ZipEntry(nomfich);\r\n                        zos.putNextEntry(entry);\r\n\r\n                        byte[] buffer = new byte[1024];\r\n                        int length;\r\n                        while ((length = smbStream.read(buffer)) &gt; 0) {\r\n                            zos.write(buffer, 0, length);\r\n                        }\r\n\r\n                        zos.closeEntry();\r\n                        smbStream.close();\r\n                    } else {\r\n                        System.out.println(&quot;Le fichier n&#39;existe pas ou ne peut pas &#234;tre lu : &quot; + smbPath);\r\n                    }\r\n                } catch (Exception e) {\r\n                    System.out.println(&quot;Erreur lors de l&#39;acc&#232;s au fichier : &quot; + smbPath);\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n\r\n        try {\r\n            zos.close();\r\n        } catch (IOException e) {\r\n            System.out.println(&quot;Erreur lors de la fermeture du flux ZipOutputStream.&quot;);\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return baos.toByteArray();\r\n    }\r\n```\r\nand here the log\r\n\r\n[enter image description here](https://i.stack.imgur.com/b5EXd.png)\r\n\r\n\r\nI have no more ideas to solve this problem I tried with or without domain name","title":"SMB Access Denied in Java and Node.js Despite Successful CMD Connection with Service Account","body":"<p>I'm experiencing an issue with accessing an SMB share in both a Java application and a Node.js script. When I connect to the SMB share via CMD using a specific service account (username and password), it works flawlessly. However, when trying to access the same SMB share in my Java (using JCIFS) and Node.js applications with the same service account credentials, I encounter an &quot;Access is Denied&quot; error.</p>\n<p>Here's what I've tried so far:</p>\n<ul>\n<li>Confirmed the correctness of username, password, and domain in the Java and Node.js applications.</li>\n<li>Checked SMB server permissions for the service account.</li>\n<li>Increased logging level in JCIFS to gather more details, but couldn't pinpoint the issue.</li>\n<li>Looked through JCIFS documentation for any potential misconfigurations.</li>\n</ul>\n<p>It's puzzling why the access is successful via CMD but fails in both Java and Node.js. I'm attaching screenshots of the error and relevant code snippets for clarity. Any insights or suggestions on what might be causing this issue and how to resolve it would be greatly appreciated.</p>\n<p>Thank you!</p>\n<pre><code> public FichierService() {\n        try {\n            Properties smbProps = new Properties();\n            smbProps.put(&quot;jcifs.smb.client.username&quot;, &quot;XXXXXXXXXX&quot;); \n            smbProps.put(&quot;jcifs.smb.client.password&quot;, &quot;XXXXXXX&quot;);\n            smbProps.put(&quot;jcifs.smb.client.domain&quot;, &quot;xxxxx.com&quot;);\n            Configuration config = new PropertyConfiguration(smbProps);\n            cifsContext = new BaseContext(config);\n            System.out.println(&quot;CIFS context initialized&quot;);\n        } catch (CIFSException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public byte[] recupererFichiersZip(List&lt;Long&gt; audrosIds) throws IOException {\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        ZipOutputStream zos = new ZipOutputStream(baos);\n        System.out.println(&quot;Starting to process files...&quot;);\n        \n        for (Long audrosId : audrosIds) {\n            List&lt;Object[]&gt; resultList = repository.findFilesByIdAttach(Collections.singletonList(audrosId));\n            if (!resultList.isEmpty()) {\n                Object[] fileData = resultList.get(0);\n                String chemin = (String) fileData[0];\n                String namefile= &quot;236973_NSA_2110_H.pdf&quot;;\n                String smbPath = &quot;smb://srvptzxx.xxxx/Test_partage/xxxx/&quot; + namefile;\n\n                System.out.println(smbPath);\n\n                try {\n                    SmbFile smbFile = new SmbFile(smbPath, cifsContext);\n                    System.out.println(smbFile);\n                    if (smbFile.exists()) {\n                        System.out.println(&quot;File exists: &quot; + smbPath);\n                        SmbFileInputStream smbStream = new SmbFileInputStream(smbFile);\n\n                        ZipEntry entry = new ZipEntry(nomfich);\n                        zos.putNextEntry(entry);\n\n                        byte[] buffer = new byte[1024];\n                        int length;\n                        while ((length = smbStream.read(buffer)) &gt; 0) {\n                            zos.write(buffer, 0, length);\n                        }\n\n                        zos.closeEntry();\n                        smbStream.close();\n                    } else {\n                        System.out.println(&quot;Le fichier n'existe pas ou ne peut pas être lu : &quot; + smbPath);\n                    }\n                } catch (Exception e) {\n                    System.out.println(&quot;Erreur lors de l'accès au fichier : &quot; + smbPath);\n                    e.printStackTrace();\n                }\n            }\n        }\n\n        try {\n            zos.close();\n        } catch (IOException e) {\n            System.out.println(&quot;Erreur lors de la fermeture du flux ZipOutputStream.&quot;);\n            e.printStackTrace();\n        }\n\n        return baos.toByteArray();\n    }\n</code></pre>\n<p>and here the log</p>\n<p><a href=\"https://i.stack.imgur.com/b5EXd.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I have no more ideas to solve this problem I tried with or without domain name</p>\n"},{"tags":["java","memgraph"],"comments":[{"owner":{"account_id":12635829,"reputation":176,"user_id":9185287,"display_name":"Ante Javor"},"score":0,"creation_date":1699005504,"post_id":77415578,"comment_id":136479067,"body_markdown":"Hi @simonC, can you maybe share what version of Memgraph and Java driver you are using in this case? I guess both Lab and Java driver are querying the same instance?","body":"Hi @simonC, can you maybe share what version of Memgraph and Java driver you are using in this case? I guess both Lab and Java driver are querying the same instance?"},{"owner":{"account_id":153072,"reputation":4177,"user_id":368068,"accept_rate":51,"display_name":"simonC"},"score":0,"creation_date":1699009184,"post_id":77415578,"comment_id":136479664,"body_markdown":"@AnteJavor I have updated the question with the versions we are using ... we are using bolt protocol bolt://localhost:7687","body":"@AnteJavor I have updated the question with the versions we are using ... we are using bolt protocol bolt://localhost:7687"},{"owner":{"account_id":12635829,"reputation":176,"user_id":9185287,"display_name":"Ante Javor"},"score":0,"creation_date":1699018655,"post_id":77415578,"comment_id":136481449,"body_markdown":"Hi @simonC, is &quot;MATCH (o:Noad)&quot; intentional? Do you maybe have a typo in this query? \nShould it be MATCH (o:Node)?","body":"Hi @simonC, is &quot;MATCH (o:Noad)&quot; intentional? Do you maybe have a typo in this query?  Should it be MATCH (o:Node)?"},{"owner":{"account_id":153072,"reputation":4177,"user_id":368068,"accept_rate":51,"display_name":"simonC"},"score":0,"creation_date":1699019053,"post_id":77415578,"comment_id":136481542,"body_markdown":"@AnteJavor no it is a typo","body":"@AnteJavor no it is a typo"},{"owner":{"account_id":12635829,"reputation":176,"user_id":9185287,"display_name":"Ante Javor"},"score":1,"creation_date":1699019183,"post_id":77415578,"comment_id":136481572,"body_markdown":"If that is a typo, and the lab query is correct using: MATCH (o:Node) you are probably not utilizing an index there, on label + property from the driver side. Can you check that?","body":"If that is a typo, and the lab query is correct using: MATCH (o:Node) you are probably not utilizing an index there, on label + property from the driver side. Can you check that?"},{"owner":{"account_id":153072,"reputation":4177,"user_id":368068,"accept_rate":51,"display_name":"simonC"},"score":0,"creation_date":1699263017,"post_id":77415578,"comment_id":136504871,"body_markdown":"@AnteJavor no I am using the sam query ... copy paste in the lab ... I have changed the query using WITH and UNWIND to pass the ids and it is working much faster ... but if I use the mentioned query it is very slow","body":"@AnteJavor no I am using the sam query ... copy paste in the lab ... I have changed the query using WITH and UNWIND to pass the ids and it is working much faster ... but if I use the mentioned query it is very slow"},{"owner":{"account_id":12635829,"reputation":176,"user_id":9185287,"display_name":"Ante Javor"},"score":0,"creation_date":1699530094,"post_id":77415578,"comment_id":136545016,"body_markdown":"Ok, I ran a small test of this and didn&#39;t experience the issue you mentioned.  Will spend some time and try to replicate it. Will keep you posted here.","body":"Ok, I ran a small test of this and didn&#39;t experience the issue you mentioned.  Will spend some time and try to replicate it. Will keep you posted here."},{"owner":{"account_id":12635829,"reputation":176,"user_id":9185287,"display_name":"Ante Javor"},"score":0,"creation_date":1700748001,"post_id":77415578,"comment_id":136694370,"body_markdown":"I think I have managed to find the issue with this. I have noticed that closing a session after the query took 6 seconds on Memgraph 2.12. Query execution was still quite fast in the milliseconds range. \n\nCan you measure the time passed for opening and closing a session + execution of a query? \n\nHere is what I did: https://github.com/memgraph/memgraph/issues/1450","body":"I think I have managed to find the issue with this. I have noticed that closing a session after the query took 6 seconds on Memgraph 2.12. Query execution was still quite fast in the milliseconds range.   Can you measure the time passed for opening and closing a session + execution of a query?   Here is what I did: <a href=\"https://github.com/memgraph/memgraph/issues/1450\" rel=\"nofollow noreferrer\">github.com/memgraph/memgraph/issues/1450</a>"},{"owner":{"account_id":153072,"reputation":4177,"user_id":368068,"accept_rate":51,"display_name":"simonC"},"score":0,"creation_date":1700813722,"post_id":77415578,"comment_id":136701524,"body_markdown":"but with WITH and UNWIND it works much faster ... why would the session be the cause?","body":"but with WITH and UNWIND it works much faster ... why would the session be the cause?"},{"owner":{"account_id":12635829,"reputation":176,"user_id":9185287,"display_name":"Ante Javor"},"score":0,"creation_date":1701075226,"post_id":77415578,"comment_id":136725336,"body_markdown":"Take a look at the sample code that is linked to the issue (https://github.com/memgraph/memgraph/issues/1450) query execution is very fast, and session close is much slower, it took 6 seconds at some point on 2.11. \n\nYou mentioned that the query works very fast with Lab. Lab does not use Java driver, and if query + dataset is the same in Lab and your Java code, then it is probably related to the driver. \n\nSessions seems like possible cause. \n\nHave you tried measuring passed time for opening and closing sessions + execution?","body":"Take a look at the sample code that is linked to the issue (<a href=\"https://github.com/memgraph/memgraph/issues/1450\" rel=\"nofollow noreferrer\">github.com/memgraph/memgraph/issues/1450</a>) query execution is very fast, and session close is much slower, it took 6 seconds at some point on 2.11.   You mentioned that the query works very fast with Lab. Lab does not use Java driver, and if query + dataset is the same in Lab and your Java code, then it is probably related to the driver.   Sessions seems like possible cause.   Have you tried measuring passed time for opening and closing sessions + execution?"}],"answers":[{"tags":[],"owner":{"account_id":12635829,"reputation":176,"user_id":9185287,"display_name":"Ante Javor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700748210,"creation_date":1700748210,"answer_id":77537513,"question_id":77415578,"body_markdown":"For the time being, I think this is related to potentially slow session closing with Neo4j driver, not actual query execution: https://github.com/memgraph/memgraph/issues/1450\r\n\r\n","title":"Memgraph very slow query when using neo4j java driver","body":"<p>For the time being, I think this is related to potentially slow session closing with Neo4j driver, not actual query execution: <a href=\"https://github.com/memgraph/memgraph/issues/1450\" rel=\"nofollow noreferrer\">https://github.com/memgraph/memgraph/issues/1450</a></p>\n"}],"owner":{"account_id":153072,"reputation":4177,"user_id":368068,"accept_rate":51,"display_name":"simonC"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1700748210,"creation_date":1699004196,"question_id":77415578,"body_markdown":"My setup: \r\n\r\n1.) memgraph in a docker image locally with 500k nodes inserted\r\n\r\n2.) I have a query with in clause in java using neo4j driver like \r\n\r\n    MATCH (n:SomeNode) where n.compoundKey in $ids RETURN n \r\n\r\n\r\nthis query for lets say 180 ids is executing 22sec ins java but if i execute the query  in the memgraph lab it takes 5ms \r\n\r\nIs there something specific with the java driver that I need to take care of? \r\n\r\nthe java code look like this\r\n\r\n    public List&lt;Noad&gt; getByKeys(Collection&lt;String&gt; keys) {\r\n        try (Session session = driver.session()) {\r\n            Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\r\n            params.put(&quot;ids&quot;, keys);\r\n            final String query = &quot;&quot;&quot;\r\n                    MATCH (n:SomeNode)\r\n                    WHERE n.compoundKey IN $ids\r\n                    RETURN n\r\n                    &quot;&quot;&quot;;\r\n            Result result = session.run(query, params);\r\n            .......\r\n        }\r\n    }\r\n\r\n\r\nUsing \r\n\r\nneo4j driver\r\n\r\n    org.neo4j.driver:neo4j-java-driver:5.13.0\r\n\r\nJava 21\r\n\r\nMemgraph 2.11.0 running locally in a docker\r\n\r\n\r\nsettings for the driver inside quarkus app\r\n\r\n       neo4j:\r\n        pool:\r\n          max-connection-pool-size: 50\r\n          log-leaked-sessions: true\r\n        uri: bolt://localhost:7687","title":"Memgraph very slow query when using neo4j java driver","body":"<p>My setup:</p>\n<p>1.) memgraph in a docker image locally with 500k nodes inserted</p>\n<p>2.) I have a query with in clause in java using neo4j driver like</p>\n<pre><code>MATCH (n:SomeNode) where n.compoundKey in $ids RETURN n \n</code></pre>\n<p>this query for lets say 180 ids is executing 22sec ins java but if i execute the query  in the memgraph lab it takes 5ms</p>\n<p>Is there something specific with the java driver that I need to take care of?</p>\n<p>the java code look like this</p>\n<pre><code>public List&lt;Noad&gt; getByKeys(Collection&lt;String&gt; keys) {\n    try (Session session = driver.session()) {\n        Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\n        params.put(&quot;ids&quot;, keys);\n        final String query = &quot;&quot;&quot;\n                MATCH (n:SomeNode)\n                WHERE n.compoundKey IN $ids\n                RETURN n\n                &quot;&quot;&quot;;\n        Result result = session.run(query, params);\n        .......\n    }\n}\n</code></pre>\n<p>Using</p>\n<p>neo4j driver</p>\n<pre><code>org.neo4j.driver:neo4j-java-driver:5.13.0\n</code></pre>\n<p>Java 21</p>\n<p>Memgraph 2.11.0 running locally in a docker</p>\n<p>settings for the driver inside quarkus app</p>\n<pre><code>   neo4j:\n    pool:\n      max-connection-pool-size: 50\n      log-leaked-sessions: true\n    uri: bolt://localhost:7687\n</code></pre>\n"},{"tags":["java","spring","eclipse","maven","spring-tool-suite"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1501615661,"post_id":45441725,"comment_id":77853388,"body_markdown":"You seemed to be having internet connections problems or are behind a corporate firewall / proxy...which is not correctly configured..Furthermore you pom file looks wrong it contains absolute paths...never use this...","body":"You seemed to be having internet connections problems or are behind a corporate firewall / proxy...which is not correctly configured..Furthermore you pom file looks wrong it contains absolute paths...never use this..."}],"answers":[{"comments":[{"owner":{"account_id":10225555,"reputation":35,"user_id":7548282,"accept_rate":50,"display_name":"Marco Antonio L&#243;pez B&#225;ez"},"score":0,"creation_date":1501606766,"post_id":45443266,"comment_id":77848169,"body_markdown":"sorry, poste the wrong part of the pom.xml. The pom already has that code and the settings is the same as mine, just without the username and password tags, already selected the correct settings, still with problem:(","body":"sorry, poste the wrong part of the pom.xml. The pom already has that code and the settings is the same as mine, just without the username and password tags, already selected the correct settings, still with problem:("},{"owner":{"account_id":10591336,"reputation":3484,"user_id":7801800,"display_name":"Anshul Sharma"},"score":0,"creation_date":1501606820,"post_id":45443266,"comment_id":77848203,"body_markdown":"then try to  add settings.xml into project: goto Preferences&gt;Maven&gt;User-Settings&gt;select your settings.xml and click apply and ok.","body":"then try to  add settings.xml into project: goto Preferences&gt;Maven&gt;User-Settings&gt;select your settings.xml and click apply and ok."},{"owner":{"account_id":10591336,"reputation":3484,"user_id":7801800,"display_name":"Anshul Sharma"},"score":0,"creation_date":1501607870,"post_id":45443266,"comment_id":77848848,"body_markdown":"try to delete `.m2` folder then upgrade your `&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;` version to `&lt;version&gt;2.7&lt;/version&gt;`  and update the project and run it.","body":"try to delete <code>.m2</code> folder then upgrade your <code>&lt;artifactId&gt;maven-resources-plugin&lt;&#47;artifactId&gt;</code> version to <code>&lt;version&gt;2.7&lt;&#47;version&gt;</code>  and update the project and run it."},{"owner":{"account_id":10225555,"reputation":35,"user_id":7548282,"accept_rate":50,"display_name":"Marco Antonio L&#243;pez B&#225;ez"},"score":0,"creation_date":1501608853,"post_id":45443266,"comment_id":77849430,"body_markdown":"same result, i can&#39;t see why it fails, it&#39;s a simple new Maven Project.","body":"same result, i can&#39;t see why it fails, it&#39;s a simple new Maven Project."}],"tags":[],"owner":{"account_id":10591336,"reputation":3484,"user_id":7801800,"display_name":"Anshul Sharma"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1501605381,"creation_date":1501605381,"answer_id":45443266,"question_id":45441725,"body_markdown":"you need to add `maven-resources-plugin` plugin, you can fine code below:\r\n\r\n    &lt;build&gt;\r\n            &lt;pluginManagement&gt;\r\n              &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                  &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n                  &lt;version&gt;2.7&lt;/version&gt;\r\n                &lt;/plugin&gt;           \r\n              &lt;/plugins&gt;\r\n            &lt;/pluginManagement&gt;   \r\n        &lt;/build&gt;\r\n\r\n\r\nadd below code into `settins.xml`:   \r\n    \r\n        &lt;proxy&gt;\r\n          &lt;id&gt;optional&lt;/id&gt;\r\n          &lt;active&gt;true&lt;/active&gt;\r\n          &lt;protocol&gt;http&lt;/protocol&gt;\r\n          &lt;username&gt;optional-proxyUser&lt;/username&gt;\r\n          &lt;password&gt;optional-proxyPassword&lt;/password&gt;\r\n          &lt;host&gt;proxy.host.net&lt;/host&gt;\r\n          &lt;port&gt;80&lt;/port&gt;\r\n          &lt;nonProxyHosts&gt;some.demo.com&lt;/nonProxyHosts&gt;\r\n        &lt;/proxy&gt;\r\n\r\n\r\nafter this add `settings.xml` into project: goto Preferences&gt;Maven&gt;User-Settings&gt;select your settings.xml and click apply and ok.\r\n\r\n","title":"on new Maven Project: Could not calculate build plan: Plugin org.apache.maven.plugins:maven-resources-plugin:2.6?","body":"<p>you need to add <code>maven-resources-plugin</code> plugin, you can fine code below:</p>\n\n<pre><code>&lt;build&gt;\n        &lt;pluginManagement&gt;\n          &lt;plugins&gt;\n            &lt;plugin&gt;\n              &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n              &lt;version&gt;2.7&lt;/version&gt;\n            &lt;/plugin&gt;           \n          &lt;/plugins&gt;\n        &lt;/pluginManagement&gt;   \n    &lt;/build&gt;\n</code></pre>\n\n<p>add below code into <code>settins.xml</code>:   </p>\n\n<pre><code>    &lt;proxy&gt;\n      &lt;id&gt;optional&lt;/id&gt;\n      &lt;active&gt;true&lt;/active&gt;\n      &lt;protocol&gt;http&lt;/protocol&gt;\n      &lt;username&gt;optional-proxyUser&lt;/username&gt;\n      &lt;password&gt;optional-proxyPassword&lt;/password&gt;\n      &lt;host&gt;proxy.host.net&lt;/host&gt;\n      &lt;port&gt;80&lt;/port&gt;\n      &lt;nonProxyHosts&gt;some.demo.com&lt;/nonProxyHosts&gt;\n    &lt;/proxy&gt;\n</code></pre>\n\n<p>after this add <code>settings.xml</code> into project: goto Preferences>Maven>User-Settings>select your settings.xml and click apply and ok.</p>\n"},{"tags":[],"owner":{"account_id":4558317,"reputation":41,"user_id":5586361,"display_name":"Arun S"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543484463,"creation_date":1543484463,"answer_id":53535935,"question_id":45441725,"body_markdown":"I deleted the repository folder [found here ~/.m2/repository] and after that it worked for me.","title":"on new Maven Project: Could not calculate build plan: Plugin org.apache.maven.plugins:maven-resources-plugin:2.6?","body":"<p>I deleted the repository folder [found here ~/.m2/repository] and after that it worked for me.</p>\n"}],"owner":{"account_id":10225555,"reputation":35,"user_id":7548282,"accept_rate":50,"display_name":"Marco Antonio L&#243;pez B&#225;ez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10308,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1700748185,"creation_date":1501600841,"question_id":45441725,"body_markdown":"I&#39;m using Spring Tool Suite, with embebbed maven, I get this problem creating a new Maven Project. \r\nI have tried every answer given in similar posts; cleaning repository and rebuilding, proxies in settings.xml, pointing to the correct xml, using own maven and so on, what am i doing wrong?\r\nFull description of the problem:\r\n\r\n    Could not calculate build plan: Plugin org.apache.maven.plugins:maven-\r\n    resources-plugin:2.6 or one of its dependencies could not be resolved: \r\n    Failed to read artifact descriptor for org.apache.maven.plugins:maven-\r\n    resources-plugin:jar:2.6\r\n    Plugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its \r\n    dependencies could not be resolved: Failed to read artifact descriptor for \r\n    org.apache.maven.plugins:maven-resources-plugin:jar:2.6\r\n\r\nsettins.xml\r\n\r\n    &lt;proxies&gt;&#160;\r\n    &lt;!--&#160;proxy | Specification for one proxy, to be used in connecting to the \r\n    network. | &lt;proxy&gt; &lt;id&gt;optional&lt;/id&gt; &lt;active&gt;true&lt;/active&gt; \r\n    &lt;protocol&gt;http&lt;/protocol&gt; &lt;username&gt;proxyuser&lt;/username&gt; \r\n    &lt;password&gt;proxypass&lt;/password&gt; &lt;host&gt;proxy.host.net&lt;/host&gt; &lt;port&gt;80&lt;/port&gt; \r\n    &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt; &lt;/proxy&gt;&#160;--&gt;\r\n    &lt;proxy&gt;\r\n\t    &lt;id&gt;proxy&lt;/id&gt;\r\n\t    &lt;active&gt;true&lt;/active&gt;\r\n\t    &lt;protocol&gt;http&lt;/protocol&gt;\r\n\t    &lt;host&gt;proxy-ccy.houston.hp.com&lt;/host&gt;\r\n\t    &lt;port&gt;8080&lt;/port&gt;\r\n    &lt;/proxy&gt;\r\n    &lt;proxy&gt;\r\n\t    &lt;id&gt;proxy1&lt;/id&gt;\r\n\t    &lt;active&gt;true&lt;/active&gt;\r\n\t    &lt;protocol&gt;http&lt;/protocol&gt;\r\n\t    &lt;host&gt;proxy.austin.hp.com&lt;/host&gt;\r\n\t    &lt;port&gt;8080&lt;/port&gt;\r\n    &lt;/proxy&gt;\r\n    &lt;/proxies&gt; \r\n\r\npom.xml\r\n\r\n\r\n   \r\n\r\n     &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    &lt;project xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;com.marco.arale&lt;/groupId&gt;\r\n      &lt;artifactId&gt;maven-arale&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;maven-arale&lt;/name&gt;\r\n      &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n          &lt;snapshots&gt;\r\n            &lt;enabled&gt;false&lt;/enabled&gt;\r\n          &lt;/snapshots&gt;\r\n          &lt;id&gt;central&lt;/id&gt;\r\n          &lt;name&gt;Central Repository&lt;/name&gt;\r\n          &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n      &lt;/repositories&gt;\r\n      &lt;pluginRepositories&gt;\r\n        &lt;pluginRepository&gt;\r\n          &lt;releases&gt;\r\n            &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\r\n          &lt;/releases&gt;\r\n          &lt;snapshots&gt;\r\n            &lt;enabled&gt;false&lt;/enabled&gt;\r\n          &lt;/snapshots&gt;\r\n          &lt;id&gt;central&lt;/id&gt;\r\n          &lt;name&gt;Central Repository&lt;/name&gt;\r\n          &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\r\n        &lt;/pluginRepository&gt;\r\n      &lt;/pluginRepositories&gt;\r\n      &lt;build&gt;\r\n        &lt;sourceDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\src\\main\\java&lt;/sourceDirectory&gt;\r\n        &lt;scriptSourceDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\src\\main\\scripts&lt;/scriptSourceDirectory&gt;\r\n        &lt;testSourceDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\src\\test\\java&lt;/testSourceDirectory&gt;\r\n        &lt;outputDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\target\\classes&lt;/outputDirectory&gt;\r\n        &lt;testOutputDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\target\\test-classes&lt;/testOutputDirectory&gt;\r\n        &lt;resources&gt;\r\n          &lt;resource&gt;\r\n            &lt;directory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\src\\main\\resources&lt;/directory&gt;\r\n          &lt;/resource&gt;\r\n        &lt;/resources&gt;\r\n        &lt;testResources&gt;\r\n          &lt;testResource&gt;\r\n            &lt;directory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\src\\test\\resources&lt;/directory&gt;\r\n          &lt;/testResource&gt;\r\n        &lt;/testResources&gt;\r\n        &lt;directory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-    &lt;finalName&gt;maven-arale-0.0.1-SNAPSHOT&lt;/finalName&gt;\r\n        &lt;pluginManagement&gt;arale\\target&lt;/directory&gt;\r\n          &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;1.3&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;2.2-beta-5&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;2.8&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;2.3.2&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n          &lt;/plugins&gt;\r\n        &lt;/pluginManagement&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;default-clean&lt;/id&gt;\r\n                &lt;phase&gt;clean&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;clean&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.6&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;default-testResources&lt;/id&gt;\r\n                &lt;phase&gt;process-test-resources&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;testResources&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;default-resources&lt;/id&gt;\r\n                &lt;phase&gt;process-resources&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;resources&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;default-jar&lt;/id&gt;\r\n                &lt;phase&gt;package&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;jar&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;default-compile&lt;/id&gt;\r\n                &lt;phase&gt;compile&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;compile&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;default-testCompile&lt;/id&gt;\r\n                &lt;phase&gt;test-compile&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;testCompile&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.12.4&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;default-test&lt;/id&gt;\r\n                &lt;phase&gt;test&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;test&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;default-install&lt;/id&gt;\r\n                &lt;phase&gt;install&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;install&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;default-deploy&lt;/id&gt;\r\n                &lt;phase&gt;deploy&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;deploy&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;default-site&lt;/id&gt;\r\n                &lt;phase&gt;site&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;site&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n                &lt;configuration&gt;\r\n                  &lt;outputDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\target\\site&lt;/outputDirectory&gt;\r\n                  &lt;reportPlugins&gt;\r\n                    &lt;reportPlugin&gt;\r\n                      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                      &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n                    &lt;/reportPlugin&gt;\r\n                  &lt;/reportPlugins&gt;\r\n                &lt;/configuration&gt;\r\n              &lt;/execution&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;default-deploy&lt;/id&gt;\r\n                &lt;phase&gt;site-deploy&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;deploy&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n                &lt;configuration&gt;\r\n                  &lt;outputDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\target\\site&lt;/outputDirectory&gt;\r\n                  &lt;reportPlugins&gt;\r\n                    &lt;reportPlugin&gt;\r\n                      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                      &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n                    &lt;/reportPlugin&gt;\r\n                  &lt;/reportPlugins&gt;\r\n                &lt;/configuration&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n            &lt;configuration&gt;\r\n              &lt;outputDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\target\\site&lt;/outputDirectory&gt;\r\n              &lt;reportPlugins&gt;\r\n                &lt;reportPlugin&gt;\r\n                  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                  &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n                &lt;/reportPlugin&gt;\r\n              &lt;/reportPlugins&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n      &lt;reporting&gt;\r\n        &lt;outputDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\target\\site&lt;/outputDirectory&gt;\r\n      &lt;/reporting&gt;\r\n    &lt;/project&gt;\r\n\r\n","title":"on new Maven Project: Could not calculate build plan: Plugin org.apache.maven.plugins:maven-resources-plugin:2.6?","body":"<p>I'm using Spring Tool Suite, with embebbed maven, I get this problem creating a new Maven Project. \nI have tried every answer given in similar posts; cleaning repository and rebuilding, proxies in settings.xml, pointing to the correct xml, using own maven and so on, what am i doing wrong?\nFull description of the problem:</p>\n\n<pre><code>Could not calculate build plan: Plugin org.apache.maven.plugins:maven-\nresources-plugin:2.6 or one of its dependencies could not be resolved: \nFailed to read artifact descriptor for org.apache.maven.plugins:maven-\nresources-plugin:jar:2.6\nPlugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its \ndependencies could not be resolved: Failed to read artifact descriptor for \norg.apache.maven.plugins:maven-resources-plugin:jar:2.6\n</code></pre>\n\n<p>settins.xml</p>\n\n<pre><code>&lt;proxies&gt; \n&lt;!-- proxy | Specification for one proxy, to be used in connecting to the \nnetwork. | &lt;proxy&gt; &lt;id&gt;optional&lt;/id&gt; &lt;active&gt;true&lt;/active&gt; \n&lt;protocol&gt;http&lt;/protocol&gt; &lt;username&gt;proxyuser&lt;/username&gt; \n&lt;password&gt;proxypass&lt;/password&gt; &lt;host&gt;proxy.host.net&lt;/host&gt; &lt;port&gt;80&lt;/port&gt; \n&lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt; &lt;/proxy&gt; --&gt;\n&lt;proxy&gt;\n    &lt;id&gt;proxy&lt;/id&gt;\n    &lt;active&gt;true&lt;/active&gt;\n    &lt;protocol&gt;http&lt;/protocol&gt;\n    &lt;host&gt;proxy-ccy.houston.hp.com&lt;/host&gt;\n    &lt;port&gt;8080&lt;/port&gt;\n&lt;/proxy&gt;\n&lt;proxy&gt;\n    &lt;id&gt;proxy1&lt;/id&gt;\n    &lt;active&gt;true&lt;/active&gt;\n    &lt;protocol&gt;http&lt;/protocol&gt;\n    &lt;host&gt;proxy.austin.hp.com&lt;/host&gt;\n    &lt;port&gt;8080&lt;/port&gt;\n&lt;/proxy&gt;\n&lt;/proxies&gt; \n</code></pre>\n\n<p>pom.xml</p>\n\n<pre><code> &lt;?xml version=\"1.0\"?&gt;\n&lt;project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.marco.arale&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-arale&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;maven-arale&lt;/name&gt;\n  &lt;repositories&gt;\n    &lt;repository&gt;\n      &lt;snapshots&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n      &lt;/snapshots&gt;\n      &lt;id&gt;central&lt;/id&gt;\n      &lt;name&gt;Central Repository&lt;/name&gt;\n      &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\n    &lt;/repository&gt;\n  &lt;/repositories&gt;\n  &lt;pluginRepositories&gt;\n    &lt;pluginRepository&gt;\n      &lt;releases&gt;\n        &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\n      &lt;/releases&gt;\n      &lt;snapshots&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n      &lt;/snapshots&gt;\n      &lt;id&gt;central&lt;/id&gt;\n      &lt;name&gt;Central Repository&lt;/name&gt;\n      &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\n    &lt;/pluginRepository&gt;\n  &lt;/pluginRepositories&gt;\n  &lt;build&gt;\n    &lt;sourceDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\src\\main\\java&lt;/sourceDirectory&gt;\n    &lt;scriptSourceDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\src\\main\\scripts&lt;/scriptSourceDirectory&gt;\n    &lt;testSourceDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\src\\test\\java&lt;/testSourceDirectory&gt;\n    &lt;outputDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\target\\classes&lt;/outputDirectory&gt;\n    &lt;testOutputDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\target\\test-classes&lt;/testOutputDirectory&gt;\n    &lt;resources&gt;\n      &lt;resource&gt;\n        &lt;directory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\src\\main\\resources&lt;/directory&gt;\n      &lt;/resource&gt;\n    &lt;/resources&gt;\n    &lt;testResources&gt;\n      &lt;testResource&gt;\n        &lt;directory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\src\\test\\resources&lt;/directory&gt;\n      &lt;/testResource&gt;\n    &lt;/testResources&gt;\n    &lt;directory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-    &lt;finalName&gt;maven-arale-0.0.1-SNAPSHOT&lt;/finalName&gt;\n    &lt;pluginManagement&gt;arale\\target&lt;/directory&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\n          &lt;version&gt;1.3&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.2-beta-5&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.8&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.3.2&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.5&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;default-clean&lt;/id&gt;\n            &lt;phase&gt;clean&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;clean&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.6&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;default-testResources&lt;/id&gt;\n            &lt;phase&gt;process-test-resources&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;testResources&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n          &lt;execution&gt;\n            &lt;id&gt;default-resources&lt;/id&gt;\n            &lt;phase&gt;process-resources&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;resources&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.4&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;default-jar&lt;/id&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;jar&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.1&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;default-compile&lt;/id&gt;\n            &lt;phase&gt;compile&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;compile&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n          &lt;execution&gt;\n            &lt;id&gt;default-testCompile&lt;/id&gt;\n            &lt;phase&gt;test-compile&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;testCompile&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.12.4&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;default-test&lt;/id&gt;\n            &lt;phase&gt;test&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;test&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.4&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;default-install&lt;/id&gt;\n            &lt;phase&gt;install&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;install&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.7&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;default-deploy&lt;/id&gt;\n            &lt;phase&gt;deploy&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;deploy&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.3&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;default-site&lt;/id&gt;\n            &lt;phase&gt;site&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;site&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n              &lt;outputDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\target\\site&lt;/outputDirectory&gt;\n              &lt;reportPlugins&gt;\n                &lt;reportPlugin&gt;\n                  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                  &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n                &lt;/reportPlugin&gt;\n              &lt;/reportPlugins&gt;\n            &lt;/configuration&gt;\n          &lt;/execution&gt;\n          &lt;execution&gt;\n            &lt;id&gt;default-deploy&lt;/id&gt;\n            &lt;phase&gt;site-deploy&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;deploy&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n              &lt;outputDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\target\\site&lt;/outputDirectory&gt;\n              &lt;reportPlugins&gt;\n                &lt;reportPlugin&gt;\n                  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                  &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n                &lt;/reportPlugin&gt;\n              &lt;/reportPlugins&gt;\n            &lt;/configuration&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n        &lt;configuration&gt;\n          &lt;outputDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\target\\site&lt;/outputDirectory&gt;\n          &lt;reportPlugins&gt;\n            &lt;reportPlugin&gt;\n              &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n              &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n            &lt;/reportPlugin&gt;\n          &lt;/reportPlugins&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  &lt;reporting&gt;\n    &lt;outputDirectory&gt;C:\\Users\\lopezbae\\Documents\\stsworkspace\\maven-arale\\target\\site&lt;/outputDirectory&gt;\n  &lt;/reporting&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1700745928,"post_id":77537202,"comment_id":136693992,"body_markdown":"You&#39;ve defined `Err` as being generic on types `T` and `E`. **Why** are you adding `newT` and `newE`? The problem is `E error` is not a `newE`.","body":"You&#39;ve defined <code>Err</code> as being generic on types <code>T</code> and <code>E</code>. <b>Why</b> are you adding <code>newT</code> and <code>newE</code>? The problem is <code>E error</code> is not a <code>newE</code>."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":4,"creation_date":1700745950,"post_id":77537202,"comment_id":136693999,"body_markdown":"Because `E` could be `MyCoolError` (`extends MyErrror`) and `newE` could be `MyEvenCoolerError` (`extends MyError`), but `MyEvenCoolerError` is not assignable to `MyCoolError` and vice versa","body":"Because <code>E</code> could be <code>MyCoolError</code> (<code>extends MyErrror</code>) and <code>newE</code> could be <code>MyEvenCoolerError</code> (<code>extends MyError</code>), but <code>MyEvenCoolerError</code> is not assignable to <code>MyCoolError</code> and vice versa"},{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":1,"creation_date":1700746990,"post_id":77537202,"comment_id":136694157,"body_markdown":"&quot;*Isn&#39;t both `E` and `newE` have the same bounds so they should be interchangeable?*&quot; - No, that&#39;s where it falls apart. `E` and `newE` could still be of different types, just as @knittl mentioned. For the same reason you can&#39;t interchange `String` and `Integer`, even though they both extend `Object`","body":"&quot;<i>Isn&#39;t both <code>E</code> and <code>newE</code> have the same bounds so they should be interchangeable?</i>&quot; - No, that&#39;s where it falls apart. <code>E</code> and <code>newE</code> could still be of different types, just as @knittl mentioned. For the same reason you can&#39;t interchange <code>String</code> and <code>Integer</code>, even though they both extend <code>Object</code>"}],"answers":[{"tags":[],"owner":{"account_id":8333120,"reputation":832,"user_id":12868186,"display_name":"wpnpeiris"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700746313,"creation_date":1700745956,"answer_id":77537248,"question_id":77537202,"body_markdown":"It would have the same bound if it was defined as the following\r\n\r\n    public class Err&lt;T, E extends MyError&gt; {\r\n        private final E error;\r\n    \r\n        Err(E error) {\r\n            this.error = error;\r\n        }\r\n    \r\n        public  Err&lt;T, E&gt; doSomething() {\r\n            return new Err&lt;&gt;(error);\r\n        }\r\n    }","title":"Java different generic bounds extending the same class","body":"<p>It would have the same bound if it was defined as the following</p>\n<pre><code>public class Err&lt;T, E extends MyError&gt; {\n    private final E error;\n\n    Err(E error) {\n        this.error = error;\n    }\n\n    public  Err&lt;T, E&gt; doSomething() {\n        return new Err&lt;&gt;(error);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700748116,"creation_date":1700745970,"answer_id":77537250,"question_id":77537202,"body_markdown":"The compiler (or IntelliJ) says that because the type parameters `E` and `newE` are completely separate type parameters.\r\n\r\nNote that the field `error` is of type `E`, and inside your method you are treating it as if it is of type `newE` - you get an error because those are not the same types.\r\n\r\nWhy did you declare the type parameters `newT` and `newE` on the method? You could just use the `T` and `E` that were declared on the class:\r\n\r\n    class Err&lt;T, E extends MyError&gt; {\r\n        private E error;\r\n    \r\n        Err(E error) {\r\n            this.error = error;\r\n        }\r\n    \r\n        public Err&lt;T, E&gt; doSomething() {\r\n            return new Err&lt;&gt;(error);\r\n        }\r\n    }\r\n\r\n(Note: class `Err` in your example is also missing a constructor).\r\n\r\n","title":"Java different generic bounds extending the same class","body":"<p>The compiler (or IntelliJ) says that because the type parameters <code>E</code> and <code>newE</code> are completely separate type parameters.</p>\n<p>Note that the field <code>error</code> is of type <code>E</code>, and inside your method you are treating it as if it is of type <code>newE</code> - you get an error because those are not the same types.</p>\n<p>Why did you declare the type parameters <code>newT</code> and <code>newE</code> on the method? You could just use the <code>T</code> and <code>E</code> that were declared on the class:</p>\n<pre><code>class Err&lt;T, E extends MyError&gt; {\n    private E error;\n\n    Err(E error) {\n        this.error = error;\n    }\n\n    public Err&lt;T, E&gt; doSomething() {\n        return new Err&lt;&gt;(error);\n    }\n}\n</code></pre>\n<p>(Note: class <code>Err</code> in your example is also missing a constructor).</p>\n"}],"owner":{"account_id":6122397,"reputation":492,"user_id":4775534,"accept_rate":86,"display_name":"Dmitry Zlykh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77537250,"answer_count":2,"score":0,"last_activity_date":1700748116,"creation_date":1700745506,"question_id":77537202,"body_markdown":"What is a reason behind class generic declaration and method generic argument `E extends MyError` are not considered to have the same bound?\r\n\r\n```\r\nclass Err&lt;T, E extends MyError&gt; {\r\n    private E error;\r\n\r\n    public &lt;newT, newE extends MyError&gt; Err&lt;newT, newE&gt; doSomething() {\r\n        return new Err&lt;newT, newE&gt;(error);\r\n    }\r\n}\r\n```\r\nIntelliJ says `Required type:newE, Provided:E`\r\n\r\nIsn&#39;t both `E` and `newE` have the same bounds so they should be interchangeable? Meaning `newE` return type extends `MyError` and E also extends `MyError`, so why can&#39;t I use error value if both `E` and `newE` bounds are the same (e.g. extends MyError)?\r\n\r\nHow can I keep this `X extends Y` dynamic behavior so that everything that satisfies `extends MyError` can be used to instantiate `Err` class?","title":"Java different generic bounds extending the same class","body":"<p>What is a reason behind class generic declaration and method generic argument <code>E extends MyError</code> are not considered to have the same bound?</p>\n<pre><code>class Err&lt;T, E extends MyError&gt; {\n    private E error;\n\n    public &lt;newT, newE extends MyError&gt; Err&lt;newT, newE&gt; doSomething() {\n        return new Err&lt;newT, newE&gt;(error);\n    }\n}\n</code></pre>\n<p>IntelliJ says <code>Required type:newE, Provided:E</code></p>\n<p>Isn't both <code>E</code> and <code>newE</code> have the same bounds so they should be interchangeable? Meaning <code>newE</code> return type extends <code>MyError</code> and E also extends <code>MyError</code>, so why can't I use error value if both <code>E</code> and <code>newE</code> bounds are the same (e.g. extends MyError)?</p>\n<p>How can I keep this <code>X extends Y</code> dynamic behavior so that everything that satisfies <code>extends MyError</code> can be used to instantiate <code>Err</code> class?</p>\n"},{"tags":["java","exception","transactions","error-handling"],"comments":[{"owner":{"account_id":100718,"reputation":43156,"user_id":271357,"accept_rate":83,"display_name":"dacwe"},"score":0,"creation_date":1293627192,"post_id":4554230,"comment_id":4993178,"body_markdown":"Why not rethrow the a non-checked exception like `throw new RuntimeException(e)`?","body":"Why not rethrow the a non-checked exception like <code>throw new RuntimeException(e)</code>?"},{"owner":{"account_id":52616,"reputation":1042991,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":3,"creation_date":1293627647,"post_id":4554230,"comment_id":4993244,"body_markdown":"@dacwe: -gak- If the code doesn&#39;t *handle* the checked exception, it shouldn&#39;t lie in its signature by hiding it in a runtime exception. Handle it, or declare that you&#39;re not handling it, but don&#39;t hide it.","body":"@dacwe: -gak- If the code doesn&#39;t <i>handle</i> the checked exception, it shouldn&#39;t lie in its signature by hiding it in a runtime exception. Handle it, or declare that you&#39;re not handling it, but don&#39;t hide it."},{"owner":{"account_id":100718,"reputation":43156,"user_id":271357,"accept_rate":83,"display_name":"dacwe"},"score":0,"creation_date":1293628791,"post_id":4554230,"comment_id":4993403,"body_markdown":"@T.J. Crowder: What if it is like `Integer.parseInt(..)` then? Well, I see your point - I would change the signature of the method! :)","body":"@T.J. Crowder: What if it is like <code>Integer.parseInt(..)</code> then? Well, I see your point - I would change the signature of the method! :)"}],"answers":[{"comments":[{"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"score":0,"creation_date":1293628251,"post_id":4554253,"comment_id":4993325,"body_markdown":"I&#39;m no fan on #1 because one can never be really sure which runtime exceptions will be thrown. #2 however, is more what I&#39;m looking for, despite being a bit verbose. It would be convenient if Java had a built-in mechanism to find out whether you got into a finally block normally or via an exception.","body":"I&#39;m no fan on #1 because one can never be really sure which runtime exceptions will be thrown. #2 however, is more what I&#39;m looking for, despite being a bit verbose. It would be convenient if Java had a built-in mechanism to find out whether you got into a finally block normally or via an exception."},{"owner":{"account_id":52616,"reputation":1042991,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":0,"creation_date":1293628769,"post_id":4554253,"comment_id":4993398,"body_markdown":"@Bart: Agreed about runtime exceptions, that&#39;s why I added that sentence to the end of #1 (should have been there when you read, but you may have been reading a stale page -- in any case, it&#39;s there now). Re verbosity: I usually have a function to call for silent rollback, so I don&#39;t have to write all that stuff every time. :-)","body":"@Bart: Agreed about runtime exceptions, that&#39;s why I added that sentence to the end of #1 (should have been there when you read, but you may have been reading a stale page -- in any case, it&#39;s there now). Re verbosity: I usually have a function to call for silent rollback, so I don&#39;t have to write all that stuff every time. :-)"},{"owner":{"account_id":78181,"reputation":46967,"user_id":222674,"accept_rate":97,"display_name":"Petar Minchev"},"score":0,"creation_date":1293629408,"post_id":4554253,"comment_id":4993500,"body_markdown":"In this case you will have `foo() throws SQLException`. Is it a good idea to expose `SQLException` to the upper level?","body":"In this case you will have <code>foo() throws SQLException</code>. Is it a good idea to expose <code>SQLException</code> to the upper level?"},{"owner":{"account_id":52616,"reputation":1042991,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":0,"creation_date":1293629492,"post_id":4554253,"comment_id":4993512,"body_markdown":"@Petar: It depends on what layer `foo` is in. As I said in #1, *&quot;More to the point, rethrow only the ones you&#39;re not actually handling...&quot;* Just edited to emphasize that the approaches can and frequently will be combined.","body":"@Petar: It depends on what layer <code>foo</code> is in. As I said in #1, <i>&quot;More to the point, rethrow only the ones you&#39;re not actually handling...&quot;</i> Just edited to emphasize that the approaches can and frequently will be combined."}],"tags":[],"owner":{"account_id":52616,"reputation":1042991,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"comment_count":4,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1293629563,"creation_date":1293627153,"answer_id":4554253,"question_id":4554230,"body_markdown":"At least two approaches come to mind, which are usually going to be **combined** depending on what you want `foo` to do:\r\n\r\n### 1. Catch and rethrow only the relevant exceptions\r\n\r\nThere are only so many exceptions the code in your main flow can throw (probably mostly `SqlException`s). So only catch and rethrow those, and declare that you&#39;re doing so. More to the point, rethrow only the ones you&#39;re not actually handling (in your simplified sample code, you&#39;re not handling any, but your real life code is probably more subtle).\r\n\r\nMind you, some of the exceptions may be runtime exceptions, and so you may want to combine this with the below.\r\n\r\n### 2. Don&#39;t catch the exception at all\r\n\r\nLike this:\r\n\r\n    // Signature changes to include any exceptions that really can be thrown\r\n    public void foo() throws XYZException, ABCException {\r\n     // A flag indicating that the commit succeeded\r\n     boolean done = false;\r\n\r\n     begin();\r\n     try {\r\n      // Don&#39;t have any `return` statements in here (or if you do,\r\n      // set `done` to `true` first)\r\n\r\n      ...\r\n      commit();\r\n      done = true; // Commit didn&#39;t throw an exception, we&#39;re done\r\n     } finally {\r\n      // finally clause always happens regardless\r\n      if (!done) {\r\n        // We must be processing an exception; rollback\r\n        try {\r\n          rollback();\r\n        } catch (Exception e) {\r\n          // quash it (e.g., leave this block empty), we don&#39;t want\r\n          // to mask the real exception by throwing a different one\r\n        }\r\n      }\r\n     }\r\n    }\r\n\r\nNaturally your signature needs to include any exceptions that may be thrown in the main flow, but that&#39;s what you&#39;re trying to do, if I&#39;m understanding you correctly.\r\n\r\nAgain, you may well **combine** these two approaches, because you may want to *handle* some exceptions and not others.","title":"Rethrowing checked exceptions","body":"<p>At least two approaches come to mind, which are usually going to be <strong>combined</strong> depending on what you want <code>foo</code> to do:</p>\n\n<h3>1. Catch and rethrow only the relevant exceptions</h3>\n\n<p>There are only so many exceptions the code in your main flow can throw (probably mostly <code>SqlException</code>s). So only catch and rethrow those, and declare that you're doing so. More to the point, rethrow only the ones you're not actually handling (in your simplified sample code, you're not handling any, but your real life code is probably more subtle).</p>\n\n<p>Mind you, some of the exceptions may be runtime exceptions, and so you may want to combine this with the below.</p>\n\n<h3>2. Don't catch the exception at all</h3>\n\n<p>Like this:</p>\n\n<pre><code>// Signature changes to include any exceptions that really can be thrown\npublic void foo() throws XYZException, ABCException {\n // A flag indicating that the commit succeeded\n boolean done = false;\n\n begin();\n try {\n  // Don't have any `return` statements in here (or if you do,\n  // set `done` to `true` first)\n\n  ...\n  commit();\n  done = true; // Commit didn't throw an exception, we're done\n } finally {\n  // finally clause always happens regardless\n  if (!done) {\n    // We must be processing an exception; rollback\n    try {\n      rollback();\n    } catch (Exception e) {\n      // quash it (e.g., leave this block empty), we don't want\n      // to mask the real exception by throwing a different one\n    }\n  }\n }\n}\n</code></pre>\n\n<p>Naturally your signature needs to include any exceptions that may be thrown in the main flow, but that's what you're trying to do, if I'm understanding you correctly.</p>\n\n<p>Again, you may well <strong>combine</strong> these two approaches, because you may want to <em>handle</em> some exceptions and not others.</p>\n"},{"comments":[{"owner":{"account_id":923448,"reputation":2396,"user_id":954680,"accept_rate":71,"display_name":"thermz"},"score":4,"creation_date":1396281340,"post_id":4554254,"comment_id":34707161,"body_markdown":"Why? Every exception can have a root cause: you won&#39;t lose any information, you just avoid all that &quot;checked boilerplate&quot;","body":"Why? Every exception can have a root cause: you won&#39;t lose any information, you just avoid all that &quot;checked boilerplate&quot;"}],"tags":[],"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1293627155,"creation_date":1293627155,"answer_id":4554254,"question_id":4554230,"body_markdown":"Wrap it with some RuntimeException which is unchecked. ","title":"Rethrowing checked exceptions","body":"<p>Wrap it with some RuntimeException which is unchecked. </p>\n"},{"comments":[{"owner":{"account_id":242238,"reputation":464,"user_id":513621,"accept_rate":56,"display_name":"Gerhard Presser"},"score":0,"creation_date":1293627559,"post_id":4554261,"comment_id":4993226,"body_markdown":"but for api methods the user may not allways want to catch an exception which is very unlikely to be thrown. you may rethrow checked exceptions wrapped up as unchecked exceptions and still add the throws clause to the method. so the exception is documeneted without forcing the user to catch it","body":"but for api methods the user may not allways want to catch an exception which is very unlikely to be thrown. you may rethrow checked exceptions wrapped up as unchecked exceptions and still add the throws clause to the method. so the exception is documeneted without forcing the user to catch it"}],"tags":[],"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1293627186,"creation_date":1293627186,"answer_id":4554261,"question_id":4554230,"body_markdown":"&gt;Adding that wouldn&#39;t make do the method&#39;s usability a lot of good either.\r\n\r\n**No**. It will be good at documentation, also caller will take care handling it.\r\n\r\n**Also See**\r\n\r\n - [exception-thrown-inside-catch-block-will-it-be-caught-again][1]  \r\n\r\n - [throws-or-try-catch][2]\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/143622/exception-thrown-inside-catch-block-will-it-be-caught-again\r\n  [2]: https://stackoverflow.com/questions/3203297/throws-or-try-catch","title":"Rethrowing checked exceptions","body":"<blockquote>\n  <p>Adding that wouldn't make do the method's usability a lot of good either.</p>\n</blockquote>\n\n<p><strong>No</strong>. It will be good at documentation, also caller will take care handling it.</p>\n\n<p><strong>Also See</strong></p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/143622/exception-thrown-inside-catch-block-will-it-be-caught-again\">exception-thrown-inside-catch-block-will-it-be-caught-again</a>  </p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/3203297/throws-or-try-catch\">throws-or-try-catch</a></p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1293627187,"creation_date":1293627187,"answer_id":4554262,"question_id":4554230,"body_markdown":"I&#39;d say that in this case rolling back *is* handling the exception appropriately.  It&#39;s one of the few cases where it&#39;s legitimate to catch and re-throw.\r\n\r\nSimply catching and logging an exception is not what I would consider handling.  Rather than rethrowing, in that case I&#39;d rather see checked exceptions added to the method signature and let it bubble up.\r\n","title":"Rethrowing checked exceptions","body":"<p>I'd say that in this case rolling back <em>is</em> handling the exception appropriately.  It's one of the few cases where it's legitimate to catch and re-throw.</p>\n\n<p>Simply catching and logging an exception is not what I would consider handling.  Rather than rethrowing, in that case I'd rather see checked exceptions added to the method signature and let it bubble up.</p>\n"},{"tags":[],"owner":{"account_id":242238,"reputation":464,"user_id":513621,"accept_rate":56,"display_name":"Gerhard Presser"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1293627213,"creation_date":1293627213,"answer_id":4554266,"question_id":4554230,"body_markdown":"you may throw a subclass of RuntimeException - they don&#39;t require a catch()","title":"Rethrowing checked exceptions","body":"<p>you may throw a subclass of RuntimeException - they don't require a catch()</p>\n"},{"comments":[{"owner":{"account_id":242238,"reputation":464,"user_id":513621,"accept_rate":56,"display_name":"Gerhard Presser"},"score":0,"creation_date":1293627835,"post_id":4554274,"comment_id":4993268,"body_markdown":"by using a try/catch-block you can react on the exception and e.g. roll back your transaction. rethrowing the exception afterwards is legal to notify the caller of the method that something happened. the caller may not know what to do to undo the method&#39;s work","body":"by using a try/catch-block you can react on the exception and e.g. roll back your transaction. rethrowing the exception afterwards is legal to notify the caller of the method that something happened. the caller may not know what to do to undo the method&#39;s work"},{"owner":{"account_id":222951,"reputation":5271,"user_id":481863,"accept_rate":90,"display_name":"Erhan Bagdemir"},"score":0,"creation_date":1293628032,"post_id":4554274,"comment_id":4993294,"body_markdown":"to rollback finally-block is a better place than the catch.","body":"to rollback finally-block is a better place than the catch."},{"owner":{"account_id":242238,"reputation":464,"user_id":513621,"accept_rate":56,"display_name":"Gerhard Presser"},"score":0,"creation_date":1293628490,"post_id":4554274,"comment_id":4993361,"body_markdown":"why? a catch-block is intended to react on exceptions!?","body":"why? a catch-block is intended to react on exceptions!?"},{"owner":{"account_id":222951,"reputation":5271,"user_id":481863,"accept_rate":90,"display_name":"Erhan Bagdemir"},"score":0,"creation_date":1293629560,"post_id":4554274,"comment_id":4993526,"body_markdown":"you change the need of catching of an exception with converting it from a catchable Exception to the Runtime- Exception. It can cause side-effects in libraries. How can the caller (client) of a method (foo in this case) which calls in try-catch &quot;public void begin() throws CanNotBeginException;&quot; method know that the method throws an exception if the client has no source of method and add try-catch block to handle the exception?","body":"you change the need of catching of an exception with converting it from a catchable Exception to the Runtime- Exception. It can cause side-effects in libraries. How can the caller (client) of a method (foo in this case) which calls in try-catch &quot;public void begin() throws CanNotBeginException;&quot; method know that the method throws an exception if the client has no source of method and add try-catch block to handle the exception?"}],"tags":[],"owner":{"account_id":222951,"reputation":5271,"user_id":481863,"accept_rate":90,"display_name":"Erhan Bagdemir"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1293627281,"creation_date":1293627281,"answer_id":4554274,"question_id":4554230,"body_markdown":"the key point is, why should you throw a new Exception from a catch block. \r\nif you use catch then handle your exception there in your catch. If you have to inform the caller method with an exception, then don&#39;t catch the exception with try-catch, instead, sign your method with throws and let the caller catch the e xception.\r\n\r\nor throw a RuntimeException, i find this idea less useful because of lack of readability, then you don&#39;t need to sign your method with throws.","title":"Rethrowing checked exceptions","body":"<p>the key point is, why should you throw a new Exception from a catch block. \nif you use catch then handle your exception there in your catch. If you have to inform the caller method with an exception, then don't catch the exception with try-catch, instead, sign your method with throws and let the caller catch the e xception.</p>\n\n<p>or throw a RuntimeException, i find this idea less useful because of lack of readability, then you don't need to sign your method with throws.</p>\n"},{"comments":[{"owner":{"account_id":309680,"reputation":4046,"user_id":622266,"accept_rate":60,"display_name":"Pawel Veselov"},"score":0,"creation_date":1448352142,"post_id":4555351,"comment_id":55540034,"body_markdown":"Unfortunately, in Java8 (at least), `Thread.stop()` just throws `UnsupportedOperationException`.","body":"Unfortunately, in Java8 (at least), <code>Thread.stop()</code> just throws <code>UnsupportedOperationException</code>."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1448354947,"post_id":4555351,"comment_id":55541522,"body_markdown":"@PawelVeselov it does, ironically Unsafe.rethrowException(e) is still available.","body":"@PawelVeselov it does, ironically Unsafe.rethrowException(e) is still available."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1448355079,"post_id":4555351,"comment_id":55541602,"body_markdown":"@PawelVeselov I have updated my answer for Java 8 (also works Java 5.0+)","body":"@PawelVeselov I have updated my answer for Java 8 (also works Java 5.0+)"}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":3,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1448355021,"creation_date":1293636432,"answer_id":4555351,"question_id":4554230,"body_markdown":"Since Java 8 we use\r\n\r\n    /**\r\n     * Cast a CheckedException as an unchecked one.\r\n     *\r\n     * @param throwable to cast\r\n     * @param &lt;T&gt; the type of the Throwable\r\n     * @return this method will never return a Throwable instance, it will just throw it.\r\n     * @throws T the throwable as an unchecked throwable\r\n     */\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public static &lt;T extends Throwable&gt; RuntimeException rethrow(Throwable throwable) throws T {\r\n        throw (T) throwable; // rely on vacuous cast\r\n    }\r\n\r\n---\r\n\r\nYou can rethrow a checked exception, but only by avoiding the compilers checked exception validation.\r\n\r\n    public void foo() throws MyCheckedException {\r\n     begin();\r\n     try {\r\n      ...\r\n      commit();\r\n     } catch (Exception e) {\r\n      rollback();\r\n      // same as throwing an exception without the compiler knowing.\r\n      Thread.currentThread().stop(e); \r\n     }\r\n    }\r\n\r\nBefore you use stop() you should read http://download.oracle.com/javase/6/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html\r\n\r\n&gt; Thread.currentThread().stop(e) .. is behaviorally identical to Java&#39;s throw operation, but circumvents the compiler&#39;s attempts to guarantee that the calling method has declared all of the checked exceptions that it may throw:","title":"Rethrowing checked exceptions","body":"<p>Since Java 8 we use</p>\n\n<pre><code>/**\n * Cast a CheckedException as an unchecked one.\n *\n * @param throwable to cast\n * @param &lt;T&gt; the type of the Throwable\n * @return this method will never return a Throwable instance, it will just throw it.\n * @throws T the throwable as an unchecked throwable\n */\n@SuppressWarnings(\"unchecked\")\npublic static &lt;T extends Throwable&gt; RuntimeException rethrow(Throwable throwable) throws T {\n    throw (T) throwable; // rely on vacuous cast\n}\n</code></pre>\n\n<hr>\n\n<p>You can rethrow a checked exception, but only by avoiding the compilers checked exception validation.</p>\n\n<pre><code>public void foo() throws MyCheckedException {\n begin();\n try {\n  ...\n  commit();\n } catch (Exception e) {\n  rollback();\n  // same as throwing an exception without the compiler knowing.\n  Thread.currentThread().stop(e); \n }\n}\n</code></pre>\n\n<p>Before you use stop() you should read <a href=\"http://download.oracle.com/javase/6/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html\" rel=\"noreferrer\">http://download.oracle.com/javase/6/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html</a></p>\n\n<blockquote>\n  <p>Thread.currentThread().stop(e) .. is behaviorally identical to Java's throw operation, but circumvents the compiler's attempts to guarantee that the calling method has declared all of the checked exceptions that it may throw:</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":150501,"reputation":78480,"user_id":363751,"accept_rate":35,"display_name":"supercat"},"score":0,"creation_date":1371151560,"post_id":4555718,"comment_id":24729400,"body_markdown":"The main &quot;problem&quot; with Java&#39;s checked exceptions is the lack of a concise syntax to indicate that a called method isn&#39;t expected to throw certain (or any) exceptions.  If even 25% of a method&#39;s callers would be interested in catching a particular exception, having it as a checked exception would be semantically advantageous, but for the fact that it would force a few lines of code bloat on each of the 75% of callers that weren&#39;t interested in it.  As it is, checked exceptions are more of a hindrance than a help unless 90%+ of callers will be interested.","body":"The main &quot;problem&quot; with Java&#39;s checked exceptions is the lack of a concise syntax to indicate that a called method isn&#39;t expected to throw certain (or any) exceptions.  If even 25% of a method&#39;s callers would be interested in catching a particular exception, having it as a checked exception would be semantically advantageous, but for the fact that it would force a few lines of code bloat on each of the 75% of callers that weren&#39;t interested in it.  As it is, checked exceptions are more of a hindrance than a help unless 90%+ of callers will be interested."},{"owner":{"account_id":118803,"reputation":2451,"user_id":310092,"display_name":"mezmo"},"score":0,"creation_date":1371566163,"post_id":4555718,"comment_id":24862258,"body_markdown":"I do agree with what you&#39;re saying, but I&#39;ve also had to take over code that was written with Spring and unchecked exceptions, where the original author felt it necessary to implement a lot of his business logic in unchecked exceptions, years later we&#39;re STILL finding small libraries that were used throwing exceptions we had no idea might be tripped across.","body":"I do agree with what you&#39;re saying, but I&#39;ve also had to take over code that was written with Spring and unchecked exceptions, where the original author felt it necessary to implement a lot of his business logic in unchecked exceptions, years later we&#39;re STILL finding small libraries that were used throwing exceptions we had no idea might be tripped across."},{"owner":{"account_id":150501,"reputation":78480,"user_id":363751,"accept_rate":35,"display_name":"supercat"},"score":0,"creation_date":1371567029,"post_id":4555718,"comment_id":24862848,"body_markdown":"The problem there I think is that there isn&#39;t with checked exceptions or a lack thereof, but rather with an exception hierarchy that doesn&#39;t distinguish between &quot;Method failed with no side-effects; object appears undamaged&quot; and &quot;CPU is on fire&quot;. Any exception thrown by `myDocument = SomeDocumentClass.LoadDocument(filename);` will, at minimum, have the effect that `myDocument` won&#39;t get loaded; if the caller can deal with that, it should consider itself prepared to handle all exceptions where that is the only effect/implication, whether or not it anticipated the *particular* reason for failure.","body":"The problem there I think is that there isn&#39;t with checked exceptions or a lack thereof, but rather with an exception hierarchy that doesn&#39;t distinguish between &quot;Method failed with no side-effects; object appears undamaged&quot; and &quot;CPU is on fire&quot;. Any exception thrown by <code>myDocument = SomeDocumentClass.LoadDocument(filename);</code> will, at minimum, have the effect that <code>myDocument</code> won&#39;t get loaded; if the caller can deal with that, it should consider itself prepared to handle all exceptions where that is the only effect/implication, whether or not it anticipated the <i>particular</i> reason for failure."},{"owner":{"account_id":150501,"reputation":78480,"user_id":363751,"accept_rate":35,"display_name":"supercat"},"score":0,"creation_date":1371567556,"post_id":4555718,"comment_id":24863197,"body_markdown":"Actually, what I&#39;d like to see in a language/framework would be an exception object with a virtual `IsResolved()` method.  After executing each `catch`, the system would check `IsResolved()` and--if it returned `false`, automatically rethrow the exception.  Such a thing would allow code to safely handle exceptions that weren&#39;t particularly anticipated, since exceptions would only be stifled by code that should catch them.  I&#39;d also like to see more use of `fault` blocks (which are somewhat like `catch`, except that exceptions are guaranteed to be rethrown).","body":"Actually, what I&#39;d like to see in a language/framework would be an exception object with a virtual <code>IsResolved()</code> method.  After executing each <code>catch</code>, the system would check <code>IsResolved()</code> and--if it returned <code>false</code>, automatically rethrow the exception.  Such a thing would allow code to safely handle exceptions that weren&#39;t particularly anticipated, since exceptions would only be stifled by code that should catch them.  I&#39;d also like to see more use of <code>fault</code> blocks (which are somewhat like <code>catch</code>, except that exceptions are guaranteed to be rethrown)."}],"tags":[],"owner":{"account_id":118803,"reputation":2451,"user_id":310092,"display_name":"mezmo"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1371565923,"creation_date":1293639047,"answer_id":4555718,"question_id":4554230,"body_markdown":"Here you&#39;ve chanced on one of the biggest religious schisms in the Java, ( if not wider ) , world. It boils down to those that feel, as TJ seems to, and I do too, that checked exceptions are valuable for many reasons, VS the Rod Johnson/Spring school that in the design of Java, checked exceptions were used in many instances where they shouldn&#39;t, say closing a resultset or socket, so because it was wrongly used in many cases, it makes them useless so all exceptions should be unchecked. There are many classes in the Spring framework that are very thin wrappers around standard Java objects, but convert checked exceptions to unchecked. It drives me berserk! \r\n\r\nAnyway, put me down as strongly agreeing with everything TJ has said, but know that you&#39;ll probably never find a &quot;right&quot; answer.\r\n","title":"Rethrowing checked exceptions","body":"<p>Here you've chanced on one of the biggest religious schisms in the Java, ( if not wider ) , world. It boils down to those that feel, as TJ seems to, and I do too, that checked exceptions are valuable for many reasons, VS the Rod Johnson/Spring school that in the design of Java, checked exceptions were used in many instances where they shouldn't, say closing a resultset or socket, so because it was wrongly used in many cases, it makes them useless so all exceptions should be unchecked. There are many classes in the Spring framework that are very thin wrappers around standard Java objects, but convert checked exceptions to unchecked. It drives me berserk! </p>\n\n<p>Anyway, put me down as strongly agreeing with everything TJ has said, but know that you'll probably never find a \"right\" answer.</p>\n"},{"tags":[],"owner":{"account_id":309680,"reputation":4046,"user_id":622266,"accept_rate":60,"display_name":"Pawel Veselov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1448353129,"creation_date":1448353129,"answer_id":33888522,"question_id":4554230,"body_markdown":"It&#39;s worth mentioning some advances in this area.\r\n\r\nFirst, in Java 7, it&#39;s possible to catch and throw generic exceptions, as long as what&#39;s declared inside the try block is caught or declared in the outer block. So this would compile:\r\n\r\n    void test() throws SQLException {\r\n      try { \r\n        conn.commit();\r\n      } catch (Throwable t) {\r\n        // do something\r\n        throw t;\r\n      }\r\n    }\r\n\r\nThis is well explained here : http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html\r\n\r\n----------\r\n\r\nAnother way is described here : http://blog.jooq.org/2012/09/14/throw-checked-exceptions-like-runtime-exceptions-in-java/\r\n\r\nThe reason you may want to use that has often to do with lambdas, or throwing exceptions from some generic methods. I ran into this when I wanted to replace repeating constructs of:\r\n\r\n    try {\r\n      do_operation\r\n      flag_success\r\n    } catch (Throwable e) {\r\n      flag_error\r\n      throw e;\r\n    }\r\n\r\nWith using a method of:\r\n\r\n    public static void wrapExec(RunnableT s) {\r\n        try {\r\n            s.run();\r\n            flag_success\r\n        } catch (Throwable t) {\r\n            flag_error\r\n            doThrow(t);\r\n        }\r\n    }\r\n\r\nand therefore replacing the whole try/catch block with just\r\n\r\n    wrapExec(()-&gt;{do_operation})\r\n\r\n\r\n    ","title":"Rethrowing checked exceptions","body":"<p>It's worth mentioning some advances in this area.</p>\n\n<p>First, in Java 7, it's possible to catch and throw generic exceptions, as long as what's declared inside the try block is caught or declared in the outer block. So this would compile:</p>\n\n<pre><code>void test() throws SQLException {\n  try { \n    conn.commit();\n  } catch (Throwable t) {\n    // do something\n    throw t;\n  }\n}\n</code></pre>\n\n<p>This is well explained here : <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html</a></p>\n\n<hr>\n\n<p>Another way is described here : <a href=\"http://blog.jooq.org/2012/09/14/throw-checked-exceptions-like-runtime-exceptions-in-java/\" rel=\"nofollow\">http://blog.jooq.org/2012/09/14/throw-checked-exceptions-like-runtime-exceptions-in-java/</a></p>\n\n<p>The reason you may want to use that has often to do with lambdas, or throwing exceptions from some generic methods. I ran into this when I wanted to replace repeating constructs of:</p>\n\n<pre><code>try {\n  do_operation\n  flag_success\n} catch (Throwable e) {\n  flag_error\n  throw e;\n}\n</code></pre>\n\n<p>With using a method of:</p>\n\n<pre><code>public static void wrapExec(RunnableT s) {\n    try {\n        s.run();\n        flag_success\n    } catch (Throwable t) {\n        flag_error\n        doThrow(t);\n    }\n}\n</code></pre>\n\n<p>and therefore replacing the whole try/catch block with just</p>\n\n<pre><code>wrapExec(()-&gt;{do_operation})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":153319,"reputation":2930,"user_id":368491,"display_name":"Soulman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700747505,"creation_date":1700747127,"answer_id":77537396,"question_id":4554230,"body_markdown":"If you use Java 7 or newer, you can declare the function to throw the same checked exceptions as the code in the `try` block. This change is described in detail in the section [Rethrowing Exceptions with More Inclusive Type Checking][1].\r\n\r\nIn brief, you can catch a supertype of the exception types thrown from a `try` block and then rethrow it without any extra checked exceptions. So if the code in the `try` block only throws runtime exceptions, you can still catch and rethrow `Exception` or even `Throwable` without declaring any checked exceptions.\r\n\r\n[1]: https://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html","title":"Rethrowing checked exceptions","body":"<p>If you use Java 7 or newer, you can declare the function to throw the same checked exceptions as the code in the <code>try</code> block. This change is described in detail in the section <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html\" rel=\"nofollow noreferrer\">Rethrowing Exceptions with More Inclusive Type Checking</a>.</p>\n<p>In brief, you can catch a supertype of the exception types thrown from a <code>try</code> block and then rethrow it without any extra checked exceptions. So if the code in the <code>try</code> block only throws runtime exceptions, you can still catch and rethrow <code>Exception</code> or even <code>Throwable</code> without declaring any checked exceptions.</p>\n"}],"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9668,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":4554253,"answer_count":10,"score":4,"last_activity_date":1700747505,"creation_date":1293627002,"question_id":4554230,"body_markdown":"    public void foo() {\r\n     begin();\r\n     try {\r\n      ...\r\n      commit();\r\n     } catch (Exception e) {\r\n      rollback();\r\n      throw e;\r\n     }\r\n    }\r\n\r\nIn the sample above, there is an error because `foo` has no `throws Exception`. Adding that wouldn&#39;t make do the method&#39;s usability a lot of good either.\r\n\r\nWhat&#39;s the best way to do this? How do you do something if an error occurs without really &quot;handling&quot; the error?","title":"Rethrowing checked exceptions","body":"<pre><code>public void foo() {\n begin();\n try {\n  ...\n  commit();\n } catch (Exception e) {\n  rollback();\n  throw e;\n }\n}\n</code></pre>\n\n<p>In the sample above, there is an error because <code>foo</code> has no <code>throws Exception</code>. Adding that wouldn't make do the method's usability a lot of good either.</p>\n\n<p>What's the best way to do this? How do you do something if an error occurs without really \"handling\" the error?</p>\n"},{"tags":["java","spring","spring-boot","docker","microservices"],"comments":[{"owner":{"account_id":6926363,"reputation":2155,"user_id":5317332,"display_name":"Alez"},"score":0,"creation_date":1685537000,"post_id":76329284,"comment_id":134673666,"body_markdown":"How are you running the Docker containers?","body":"How are you running the Docker containers?"},{"owner":{"account_id":7673258,"reputation":1688,"user_id":6200354,"display_name":"atish.s"},"score":0,"creation_date":1685684864,"post_id":76329284,"comment_id":134698095,"body_markdown":"The request to `auth-server` looks to be resolved correctly but `auth-server` seems to be having some issues handling the request `/auth-service/register`. Maybe verify the logs of the `auth-server` to see if there are any errors.","body":"The request to <code>auth-server</code> looks to be resolved correctly but <code>auth-server</code> seems to be having some issues handling the request <code>&#47;auth-service&#47;register</code>. Maybe verify the logs of the <code>auth-server</code> to see if there are any errors."},{"owner":{"account_id":114470,"reputation":874,"user_id":300978,"accept_rate":80,"display_name":"brohjoe"},"score":0,"creation_date":1685820552,"post_id":76329284,"comment_id":134715692,"body_markdown":"If I use Postman to connect to the auth-server at port 9898, I can reach auth-service/register just fine.  I really don&#39;t understand the problem here.","body":"If I use Postman to connect to the auth-server at port 9898, I can reach auth-service/register just fine.  I really don&#39;t understand the problem here."}],"answers":[{"comments":[{"owner":{"account_id":114470,"reputation":874,"user_id":300978,"accept_rate":80,"display_name":"brohjoe"},"score":0,"creation_date":1685632684,"post_id":76380150,"comment_id":134690621,"body_markdown":"I have eureka discovery microservice running on port 8761.","body":"I have eureka discovery microservice running on port 8761."},{"owner":{"account_id":21967042,"reputation":84,"user_id":16244113,"display_name":"mamJavad"},"score":0,"creation_date":1685789385,"post_id":76380150,"comment_id":134712432,"body_markdown":"in your configs if you are connecting to localhost:8761 it cannot register your endpoint services in eureka because your application is in own container and in its container there is not any eureka application","body":"in your configs if you are connecting to localhost:8761 it cannot register your endpoint services in eureka because your application is in own container and in its container there is not any eureka application"},{"owner":{"account_id":114470,"reputation":874,"user_id":300978,"accept_rate":80,"display_name":"brohjoe"},"score":0,"creation_date":1685838699,"post_id":76380150,"comment_id":134717139,"body_markdown":"I&#39;m looking at all of my microservices in Eureka server at localhost:8761 in the browser.","body":"I&#39;m looking at all of my microservices in Eureka server at localhost:8761 in the browser."},{"owner":{"account_id":114470,"reputation":874,"user_id":300978,"accept_rate":80,"display_name":"brohjoe"},"score":0,"creation_date":1686089923,"post_id":76380150,"comment_id":134750983,"body_markdown":"This issue is simular to https://stackoverflow.com/questions/55441792/spring-cloud-gateway-always-sends-back-http-status-503-how-to-fix-it?noredirect=1#comment134717116_55441792  I&#39;m moving on to Kubernetes where spring gateway is not needed.","body":"This issue is simular to <a href=\"https://stackoverflow.com/questions/55441792/spring-cloud-gateway-always-sends-back-http-status-503-how-to-fix-it?noredirect=1#comment134717116_55441792\" title=\"spring cloud gateway always sends back http status 503 how to fix it\">stackoverflow.com/questions/55441792/&hellip;</a>  I&#39;m moving on to Kubernetes where spring gateway is not needed."}],"tags":[],"owner":{"account_id":21967042,"reputation":84,"user_id":16244113,"display_name":"mamJavad"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685609280,"creation_date":1685609280,"answer_id":76380150,"question_id":76329284,"body_markdown":"you need to use a service discovery like netflix eureka to register your applications like auth service in this service and gateway can find auth service by name -&gt; \r\n\r\n&gt; routes:\r\n        - id: auth-service\r\n          uri: lb://auth-service\r\n          predicates:\r\n            - Path=/auth-service/**\r\n          filters:\r\n            - RewritePath=/auth-service/(?&lt;path&gt;.*), /$\\{path}\r\n\r\nI think maybe somehow if you define DNS in your docker and setting the auth service name to the auth service ip and port no need to using discovery service","title":"Spring boot 3 gateway showing 503 service_unavailable","body":"<p>you need to use a service discovery like netflix eureka to register your applications like auth service in this service and gateway can find auth service by name -&gt;</p>\n<blockquote>\n<p>routes:\n- id: auth-service\nuri: lb://auth-service\npredicates:\n- Path=/auth-service/**\nfilters:\n- RewritePath=/auth-service/(?.*), /${path}</p>\n</blockquote>\n<p>I think maybe somehow if you define DNS in your docker and setting the auth service name to the auth service ip and port no need to using discovery service</p>\n"},{"comments":[{"owner":{"account_id":114470,"reputation":874,"user_id":300978,"accept_rate":80,"display_name":"brohjoe"},"score":0,"creation_date":1685655954,"post_id":76382148,"comment_id":134695227,"body_markdown":"Tried AI as well.  Couldn&#39;t get a working solution.","body":"Tried AI as well.  Couldn&#39;t get a working solution."},{"owner":{"account_id":16352934,"reputation":16788,"user_id":11810933,"display_name":"NotTheDr01ds"},"score":0,"creation_date":1685712373,"post_id":76382148,"comment_id":134703504,"body_markdown":"As @brohjoe mentioned, this answer, along with many others you&#39;ve posted in the last few days, appears likely to have been written (entirely or partially) by AI (e.g., ChatGPT). Please be aware that [posting of AI-generated content is banned here](//meta.stackoverflow.com/q/421831). If you used an AI tool to assist with this answer, I would encourage you to delete it.","body":"As @brohjoe mentioned, this answer, along with many others you&#39;ve posted in the last few days, appears likely to have been written (entirely or partially) by AI (e.g., ChatGPT). Please be aware that <a href=\"//meta.stackoverflow.com/q/421831\">posting of AI-generated content is banned here</a>. If you used an AI tool to assist with this answer, I would encourage you to delete it."},{"owner":{"account_id":16352934,"reputation":16788,"user_id":11810933,"display_name":"NotTheDr01ds"},"score":0,"creation_date":1685712379,"post_id":76382148,"comment_id":134703505,"body_markdown":"Since it appears likely to have been written by AI, **readers should review this answer carefully and critically, as it *may* contain fundamental errors and misinformation.** If you observe quality issues and/or have reason to believe that this answer was generated by AI, please leave feedback accordingly. The moderation team can use your help to identify quality issues.","body":"Since it appears likely to have been written by AI, <b>readers should review this answer carefully and critically, as it <i>may</i> contain fundamental errors and misinformation.</b> If you observe quality issues and/or have reason to believe that this answer was generated by AI, please leave feedback accordingly. The moderation team can use your help to identify quality issues."}],"tags":[],"owner":{"account_id":17391812,"reputation":67,"user_id":12602207,"display_name":"Naveen Negi"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685624350,"creation_date":1685624350,"answer_id":76382148,"question_id":76329284,"body_markdown":"The log traces you&#39;ve shared suggest that your application is attempting to connect to a service labeled &#39;auth-service&#39;, but it can&#39;t find any instances of that service. This scenario is typically seen in microservices architectures, where services discover each other using tools like Netflix&#39;s Eureka or Kubernetes service discovery.\r\n\r\nLooking at the message &quot;No servers available for service: auth-service&quot;, it seems that the service discovery component (likely Eureka, based on your POM file) isn&#39;t able to locate any registered &#39;auth-service&#39; instances.\r\n\r\nHere&#39;s a list of potential issues that you might want to investigate:\r\n\r\n1. Confirm whether the &#39;auth-service&#39; is currently operational. If it&#39;s not, you&#39;ll need to get it running.\r\n\r\n2. If the &#39;auth-service&#39; is indeed running, ensure that it&#39;s properly registered with the service discovery component (possibly Eureka). To verify this, you can check the Eureka dashboard or inspect the logs from &#39;auth-service&#39;.\r\n\r\n3. Make sure that &#39;auth-service&#39; and the gateway are on the same network. If they aren&#39;t, network issues might prevent service discovery from functioning correctly.\r\n\r\n4. Review the &#39;auth-service&#39; configuration. It should be set up with the correct Eureka server address, and its instance name should be &#39;auth-service&#39;.\r\n\r\n5. Sometimes, the issue can be a matter of timing. One service might start and try to discover other services before they&#39;ve had a chance to register with the service discovery tool. In such a case, implementing a retry mechanism or ensuring services start in the right order might help.\r\n\r\nIf you&#39;re still experiencing issues after checking these potential problems, please share more information or context about your setup so that I can provide more targeted assistance.\r\n","title":"Spring boot 3 gateway showing 503 service_unavailable","body":"<p>The log traces you've shared suggest that your application is attempting to connect to a service labeled 'auth-service', but it can't find any instances of that service. This scenario is typically seen in microservices architectures, where services discover each other using tools like Netflix's Eureka or Kubernetes service discovery.</p>\n<p>Looking at the message &quot;No servers available for service: auth-service&quot;, it seems that the service discovery component (likely Eureka, based on your POM file) isn't able to locate any registered 'auth-service' instances.</p>\n<p>Here's a list of potential issues that you might want to investigate:</p>\n<ol>\n<li><p>Confirm whether the 'auth-service' is currently operational. If it's not, you'll need to get it running.</p>\n</li>\n<li><p>If the 'auth-service' is indeed running, ensure that it's properly registered with the service discovery component (possibly Eureka). To verify this, you can check the Eureka dashboard or inspect the logs from 'auth-service'.</p>\n</li>\n<li><p>Make sure that 'auth-service' and the gateway are on the same network. If they aren't, network issues might prevent service discovery from functioning correctly.</p>\n</li>\n<li><p>Review the 'auth-service' configuration. It should be set up with the correct Eureka server address, and its instance name should be 'auth-service'.</p>\n</li>\n<li><p>Sometimes, the issue can be a matter of timing. One service might start and try to discover other services before they've had a chance to register with the service discovery tool. In such a case, implementing a retry mechanism or ensuring services start in the right order might help.</p>\n</li>\n</ol>\n<p>If you're still experiencing issues after checking these potential problems, please share more information or context about your setup so that I can provide more targeted assistance.</p>\n"},{"comments":[{"owner":{"account_id":114470,"reputation":874,"user_id":300978,"accept_rate":80,"display_name":"brohjoe"},"score":0,"creation_date":1685680716,"post_id":76386707,"comment_id":134697632,"body_markdown":"When running services in docker containers, a port is exposed for the localhost as well as an internal docker port.","body":"When running services in docker containers, a port is exposed for the localhost as well as an internal docker port."}],"tags":[],"owner":{"account_id":25635314,"reputation":3,"user_id":19405000,"display_name":"chao"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685671481,"creation_date":1685671417,"answer_id":76386707,"question_id":76329284,"body_markdown":"according to this tip\r\n\r\n    2023-05-25T05:45:20.461939954Z 2023-05-25 05:45:20 [,] -DEBUG [afe63e91-2] Resolved [NotFoundException: 503 SERVICE_UNAVAILABLE &quot;Unable to find instance for auth-service&quot;] for HTTP POST /auth-service/register\r\n\r\nYou can try these methods\r\n1. Check your eureka, does the eureka service have the same name as the gateway route?\r\n2. Check if your docker exposes the port?\r\n3. Your gateway is running in docker, so your routing address cannot be 127.0.0.1 or localhost, but should be an ip address of an intranet or public network\r\n\r\n","title":"Spring boot 3 gateway showing 503 service_unavailable","body":"<p>according to this tip</p>\n<pre><code>2023-05-25T05:45:20.461939954Z 2023-05-25 05:45:20 [,] -DEBUG [afe63e91-2] Resolved [NotFoundException: 503 SERVICE_UNAVAILABLE &quot;Unable to find instance for auth-service&quot;] for HTTP POST /auth-service/register\n</code></pre>\n<p>You can try these methods</p>\n<ol>\n<li>Check your eureka, does the eureka service have the same name as the gateway route?</li>\n<li>Check if your docker exposes the port?</li>\n<li>Your gateway is running in docker, so your routing address cannot be 127.0.0.1 or localhost, but should be an ip address of an intranet or public network</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":20523120,"reputation":1,"user_id":16595092,"display_name":"Douglas Martinez"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1688568656,"creation_date":1688493561,"answer_id":76614949,"question_id":76329284,"body_markdown":"\r\nremove the  \r\n\r\n    - RewritePath=/auth-service/(?&lt;path&gt;.*), /$\\{path}\r\n\r\nand add a - StripPrefix=1 and you will be able to access your service\r\n\r\n\r\nor else you should redirect\r\n\r\n    RewritePath=/auth-service/( ?&lt;path&gt;. *), /oauth/token/$\\{path} \r\n\r\n/oauth/token is the default oauth url\r\n\r\n\r\nI hope to help you\r\n\r\n","title":"Spring boot 3 gateway showing 503 service_unavailable","body":"<p>remove the</p>\n<pre><code>- RewritePath=/auth-service/(?&lt;path&gt;.*), /$\\{path}\n</code></pre>\n<p>and add a - StripPrefix=1 and you will be able to access your service</p>\n<p>or else you should redirect</p>\n<pre><code>RewritePath=/auth-service/( ?&lt;path&gt;. *), /oauth/token/$\\{path} \n</code></pre>\n<p>/oauth/token is the default oauth url</p>\n<p>I hope to help you</p>\n"},{"tags":[],"owner":{"account_id":24234267,"reputation":16,"user_id":18187616,"display_name":"Giovanni Cannarile"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700747154,"creation_date":1700747154,"answer_id":77537399,"question_id":76329284,"body_markdown":"I had the same issue and I&#39;ve solved by simply adding the server context path to the service name you&#39;ve provided in your yaml. I&#39;m pretty sure that you, like me, have forgotten to insert the server context path of the authentication service.\r\nSo suppose your auth service acts at context path &quot;/auth&quot;, then you need to modify your gateway configuration like below\r\n\r\n    lb://auth-service/auth\r\n    \r\nThis happens because eureka service registers only the host (localhost in this case) and the port the service is listening to. So basically, you are sending your requests to the wrong path, that&#39;s the reason why you are getting NotFound","title":"Spring boot 3 gateway showing 503 service_unavailable","body":"<p>I had the same issue and I've solved by simply adding the server context path to the service name you've provided in your yaml. I'm pretty sure that you, like me, have forgotten to insert the server context path of the authentication service.\nSo suppose your auth service acts at context path &quot;/auth&quot;, then you need to modify your gateway configuration like below</p>\n<pre><code>lb://auth-service/auth\n</code></pre>\n<p>This happens because eureka service registers only the host (localhost in this case) and the port the service is listening to. So basically, you are sending your requests to the wrong path, that's the reason why you are getting NotFound</p>\n"}],"owner":{"account_id":114470,"reputation":874,"user_id":300978,"accept_rate":80,"display_name":"brohjoe"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1502,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":5,"score":4,"last_activity_date":1700747154,"creation_date":1684993967,"question_id":76329284,"body_markdown":"I&#39;m getting a `NotFoundException: 503 SERVICE_UNAVAILABLE` exception in the gateway-server logs.  I&#39;m running microservices in docker containers.  I have an `auth-service` microservice which handles authentication and Jwt. I can connect directly to the auth-service using Postman and register, validate and receive tokens via the auth-service&#39;s AuthController. However, using the gateway causes the 503 error.  Since the problem is with the gateway, I will highlight pertinent gateway code:\r\n\r\n***SecurityConfig***\r\n```\r\n\r\npackage com.microservices.gatewayserver.config;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.web.reactive.EnableWebFluxSecurity;\r\nimport org.springframework.security.config.web.server.ServerHttpSecurity;\r\nimport org.springframework.security.web.server.SecurityWebFilterChain;\r\n\r\n@Configuration\r\n@EnableWebFluxSecurity\r\npublic class SecurityConfig {\r\n//Configures security settings for the gateway server. Authentication uses JWT tokens\r\n//    for the pathMatchers and disables CSRF protection.\r\n    @Bean\r\n    public SecurityWebFilterChain securityWebFilterChain(ServerHttpSecurity http) {\r\n        http.authorizeExchange(exchanges -&gt; exchanges\r\n                        .pathMatchers(&quot;/login-service/**&quot;).authenticated()\r\n                        .pathMatchers(&quot;/employee-service/**&quot;).authenticated()\r\n                        .pathMatchers(&quot;/registration-service/**&quot;).authenticated()\r\n                        .pathMatchers(&quot;/auth-service/**&quot;).permitAll())\r\n                        //.pathMatchers(&quot;/actuator/**&quot;).permitAll())\r\n                .oauth2ResourceServer()\r\n                .jwt();\r\n        http.csrf().disable();\r\n        return http.build();\r\n    }\r\n\r\n}\r\n```\r\n***GatewayServerApplication***\r\n```\r\npackage com.microservices.gatewayserver;\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.cloud.client.discovery.EnableDiscoveryClient;\r\nimport org.springframework.cloud.loadbalancer.annotation.LoadBalancerClient;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\n@SpringBootApplication\r\n@EnableDiscoveryClient\r\n@LoadBalancerClient(name= &quot;auth-service&quot;)\r\npublic class GatewayServerApplication {\r\n\r\n   public static final Logger LOGGER = LoggerFactory\r\n           .getLogger(GatewayServerApplication.class);\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(GatewayServerApplication.class, args);\r\n    }\r\n\r\n```\r\n***application.yml***\r\n```\r\nserver:\r\n  port: 8097\r\n\r\nspring:\r\n  application:\r\n    name: gateway-service\r\n  output:\r\n    ansi:\r\n      enabled: always\r\n  cloud:\r\n    config:\r\n      enabled: false\r\n    gateway:\r\n      discovery:\r\n        locator:\r\n          enabled: true\r\n      routes:\r\n        - id: auth-service\r\n          uri: lb://auth-service\r\n          predicates:\r\n            - Path=/auth-service/**\r\n          filters:\r\n            - RewritePath=/auth-service/(?&lt;path&gt;.*), /$\\{path}\r\n\r\n        - id: employee-service\r\n          uri: lb://employee-service\r\n          predicates:\r\n            - Path=/employee/**\r\n          filters:\r\n            - RewritePath=/employee/(?&lt;path&gt;.*), /$\\{path}\r\n\r\n        - id: login-service\r\n          uri: lb://login-service\r\n          predicates:\r\n            - Path=/login/**\r\n          filters:\r\n            - RewritePath=/login/(?&lt;path&gt;.*), /$\\{path}\r\n\r\n        - id: registration-service\r\n          uri: lb://registration-service\r\n          predicates:\r\n            - Path=/registration/**\r\n          filters:\r\n            - RewritePath=/registration/(?&lt;path&gt;.*), /$\\{path}\r\n\r\n        - id: openapi\r\n          uri: http://localhost:${server.port}\r\n          predicates:\r\n            - Path=/v3/api-docs/**\r\n          filters:\r\n            - RewritePath=/v3/api-docs/(?&lt;path&gt;.*), /$\\{path}/v3/api-docs\r\n\r\n  main:\r\n    web-application-type: reactive\r\n\r\n  security:\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          jwk-set-uri: http://localhost:7080/realms/master/protocol/openid-connect/certs\r\neureka:\r\n  client:\r\n    serviceUrl:\r\n      defaultZone: http://discovery-service-container:8761/eureka/\r\n\r\nspringdoc:\r\n  swagger-ui:\r\n    urls:\r\n      - name: auth\r\n        url: /v3/api-docs/auth\r\n      - name: employee\r\n        url: /v3/api-docs/employee\r\n      - name: login\r\n        url: /v3/api-docs/login\r\n      - name: registration\r\n        url: /v3/api-docs/registration\r\n\r\nlogging:\r\n  pattern:\r\n    console: &quot;%d{yyyy-MM-dd HH:mm:ss} [%X{traceId:-},%X{spanId:-}] ${LOG_LEVEL_PATTERN:-%5p} %m%n&quot;\r\n  level:\r\n    springframework:\r\n      boot:\r\n        autoconfigure: DEBUG\r\n    web: DEBUG\r\n    root: DEBUG\r\n\r\n\r\n\r\n```\r\n***POM***\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.6&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;artifactId&gt;gateway-server&lt;/artifactId&gt;\r\n    &lt;version&gt;3.0.6-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n        &lt;spring-cloud.version&gt;2022.0.2&lt;/spring-cloud.version&gt;\r\n        &lt;sonar.moduleKey&gt;${project.artifactId}&lt;/sonar.moduleKey&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-loadbalancer&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;micrometer-tracing-bridge-otel&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n            &lt;artifactId&gt;opentelemetry-exporter-zipkin&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-oauth2-resource-server&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-oauth2-jose&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n                &lt;artifactId&gt;micrometer-tracing-bom&lt;/artifactId&gt;\r\n                &lt;version&gt;${micrometer-tracing.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\r\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;true&lt;/enabled&gt;\r\n            &lt;/snapshots&gt;\r\n        &lt;/repository&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;spring-milestones&lt;/id&gt;\r\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\r\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;false&lt;/enabled&gt;\r\n            &lt;/snapshots&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\n    &lt;pluginRepositories&gt;\r\n        &lt;pluginRepository&gt;\r\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\r\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;true&lt;/enabled&gt;\r\n            &lt;/snapshots&gt;\r\n        &lt;/pluginRepository&gt;\r\n        &lt;pluginRepository&gt;\r\n            &lt;id&gt;spring-milestones&lt;/id&gt;\r\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\r\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;false&lt;/enabled&gt;\r\n            &lt;/snapshots&gt;\r\n        &lt;/pluginRepository&gt;\r\n    &lt;/pluginRepositories&gt;\r\n\r\n\r\n&lt;/project&gt;\r\n```\r\n***Stacktrace***\r\n```\r\n2023-05-25 05:45:20 [,] -DEBUG Trying to match using PathMatcherServerWebExchangeMatcher{pattern=&#39;/auth-service/**&#39;, method=null}\r\n2023-05-25T05:45:20.457679873Z 2023-05-25 05:45:20 [,] -DEBUG Checking match of request : &#39;/auth-service/register&#39;; against &#39;/auth-service/**&#39;\r\n2023-05-25T05:45:20.457699175Z 2023-05-25 05:45:20 [,] -DEBUG matched\r\n2023-05-25T05:45:20.457742344Z 2023-05-25 05:45:20 [,] -DEBUG Checking authorization on &#39;/auth-service/register&#39; using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$648/0x00000008010ce248@1b9bc02\r\n2023-05-25T05:45:20.458327743Z 2023-05-25 05:45:20 [,] -DEBUG Authorization successful\r\n2023-05-25T05:45:20.459204178Z 2023-05-25 05:45:20 [,] -DEBUG Route matched: auth-service\r\n2023-05-25T05:45:20.459229258Z 2023-05-25 05:45:20 [,] -DEBUG Mapping [Exchange: POST http://localhost:8097/auth-service/register] to Route{id=&#39;auth-service&#39;, uri=lb://auth-service, order=0, predicate=Paths: [/auth-service/**], match trailing slash: true, gatewayFilters=[[[RewritePath /auth-service/(?&lt;path&gt;.*) = &#39;/${path}&#39;], order = 1]], metadata={}}\r\n2023-05-25T05:45:20.459233539Z 2023-05-25 05:45:20 [,] -DEBUG [afe63e91-2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@363dab18\r\n2023-05-25T05:45:20.459345964Z 2023-05-25 05:45:20 [,] -DEBUG Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@6a74d228}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@720653c2}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@36bc415e}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3e134896}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@2e3a5237}, order = 0], [[RewritePath /auth-service/(?&lt;path&gt;.*) = &#39;/${path}&#39;], order = 1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@349d0836}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ReactiveLoadBalancerClientFilter@301d8120}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.LoadBalancerServiceInstanceCookieFilter@6d367020}, order = 10151], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@72ba28ee}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@72458efc}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@6a714237}, order = 2147483647]]\r\n2023-05-25T05:45:20.460796164Z 2023-05-25 05:45:20 [,] - WARN No servers available for service: auth-service\r\n2023-05-25T05:45:20.461939954Z 2023-05-25 05:45:20 [,] -DEBUG [afe63e91-2] Resolved [NotFoundException: 503 SERVICE_UNAVAILABLE &quot;Unable to find instance for auth-service&quot;] for HTTP POST /auth-service/register\r\n2023-05-25T05:45:20.462477063Z 2023-05-25 05:45:20 [,] -DEBUG [afe63e91-2] Encoding [{timestamp=Thu May 25 05:45:20 GMT 2023, path=/auth-service/register, status=503, error=Service Unav (truncated)...]\r\n2023-05-25T05:45:20.467139970Z 2023-05-25 05:45:20 [,] -DEBUG [afe63e91-2, L:/172.27.0.9:8097 - R:/172.27.0.1:58344] Decreasing pending responses, now 0\r\n2023-05-25T05:45:20.468226365Z 2023-05-25 05:45:20 [,] -DEBUG [afe63e91-2] Completed 503 SERVICE_UNAVAILABLE\r\n2023-05-25T05:45:20.468294940Z 2023-05-25 05:45:20 [,] -DEBUG [afe63e91-2, L:/172.27.0.9:8097 - R:/172.27.0.1:58344] Last HTTP response frame\r\n```\r\n\r\n ","title":"Spring boot 3 gateway showing 503 service_unavailable","body":"<p>I'm getting a <code>NotFoundException: 503 SERVICE_UNAVAILABLE</code> exception in the gateway-server logs.  I'm running microservices in docker containers.  I have an <code>auth-service</code> microservice which handles authentication and Jwt. I can connect directly to the auth-service using Postman and register, validate and receive tokens via the auth-service's AuthController. However, using the gateway causes the 503 error.  Since the problem is with the gateway, I will highlight pertinent gateway code:</p>\n<p><em><strong>SecurityConfig</strong></em></p>\n<pre><code>\npackage com.microservices.gatewayserver.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.reactive.EnableWebFluxSecurity;\nimport org.springframework.security.config.web.server.ServerHttpSecurity;\nimport org.springframework.security.web.server.SecurityWebFilterChain;\n\n@Configuration\n@EnableWebFluxSecurity\npublic class SecurityConfig {\n//Configures security settings for the gateway server. Authentication uses JWT tokens\n//    for the pathMatchers and disables CSRF protection.\n    @Bean\n    public SecurityWebFilterChain securityWebFilterChain(ServerHttpSecurity http) {\n        http.authorizeExchange(exchanges -&gt; exchanges\n                        .pathMatchers(&quot;/login-service/**&quot;).authenticated()\n                        .pathMatchers(&quot;/employee-service/**&quot;).authenticated()\n                        .pathMatchers(&quot;/registration-service/**&quot;).authenticated()\n                        .pathMatchers(&quot;/auth-service/**&quot;).permitAll())\n                        //.pathMatchers(&quot;/actuator/**&quot;).permitAll())\n                .oauth2ResourceServer()\n                .jwt();\n        http.csrf().disable();\n        return http.build();\n    }\n\n}\n</code></pre>\n<p><em><strong>GatewayServerApplication</strong></em></p>\n<pre><code>package com.microservices.gatewayserver;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.client.discovery.EnableDiscoveryClient;\nimport org.springframework.cloud.loadbalancer.annotation.LoadBalancerClient;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@SpringBootApplication\n@EnableDiscoveryClient\n@LoadBalancerClient(name= &quot;auth-service&quot;)\npublic class GatewayServerApplication {\n\n   public static final Logger LOGGER = LoggerFactory\n           .getLogger(GatewayServerApplication.class);\n\n    public static void main(String[] args) {\n        SpringApplication.run(GatewayServerApplication.class, args);\n    }\n\n</code></pre>\n<p><em><strong>application.yml</strong></em></p>\n<pre><code>server:\n  port: 8097\n\nspring:\n  application:\n    name: gateway-service\n  output:\n    ansi:\n      enabled: always\n  cloud:\n    config:\n      enabled: false\n    gateway:\n      discovery:\n        locator:\n          enabled: true\n      routes:\n        - id: auth-service\n          uri: lb://auth-service\n          predicates:\n            - Path=/auth-service/**\n          filters:\n            - RewritePath=/auth-service/(?&lt;path&gt;.*), /$\\{path}\n\n        - id: employee-service\n          uri: lb://employee-service\n          predicates:\n            - Path=/employee/**\n          filters:\n            - RewritePath=/employee/(?&lt;path&gt;.*), /$\\{path}\n\n        - id: login-service\n          uri: lb://login-service\n          predicates:\n            - Path=/login/**\n          filters:\n            - RewritePath=/login/(?&lt;path&gt;.*), /$\\{path}\n\n        - id: registration-service\n          uri: lb://registration-service\n          predicates:\n            - Path=/registration/**\n          filters:\n            - RewritePath=/registration/(?&lt;path&gt;.*), /$\\{path}\n\n        - id: openapi\n          uri: http://localhost:${server.port}\n          predicates:\n            - Path=/v3/api-docs/**\n          filters:\n            - RewritePath=/v3/api-docs/(?&lt;path&gt;.*), /$\\{path}/v3/api-docs\n\n  main:\n    web-application-type: reactive\n\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          jwk-set-uri: http://localhost:7080/realms/master/protocol/openid-connect/certs\neureka:\n  client:\n    serviceUrl:\n      defaultZone: http://discovery-service-container:8761/eureka/\n\nspringdoc:\n  swagger-ui:\n    urls:\n      - name: auth\n        url: /v3/api-docs/auth\n      - name: employee\n        url: /v3/api-docs/employee\n      - name: login\n        url: /v3/api-docs/login\n      - name: registration\n        url: /v3/api-docs/registration\n\nlogging:\n  pattern:\n    console: &quot;%d{yyyy-MM-dd HH:mm:ss} [%X{traceId:-},%X{spanId:-}] ${LOG_LEVEL_PATTERN:-%5p} %m%n&quot;\n  level:\n    springframework:\n      boot:\n        autoconfigure: DEBUG\n    web: DEBUG\n    root: DEBUG\n\n\n\n</code></pre>\n<p><em><strong>POM</strong></em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.6&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;artifactId&gt;gateway-server&lt;/artifactId&gt;\n    &lt;version&gt;3.0.6-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2022.0.2&lt;/spring-cloud.version&gt;\n        &lt;sonar.moduleKey&gt;${project.artifactId}&lt;/sonar.moduleKey&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-loadbalancer&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-tracing-bridge-otel&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n            &lt;artifactId&gt;opentelemetry-exporter-zipkin&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n            &lt;version&gt;2.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-oauth2-resource-server&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-oauth2-jose&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n                &lt;artifactId&gt;micrometer-tracing-bom&lt;/artifactId&gt;\n                &lt;version&gt;${micrometer-tracing.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n\n\n&lt;/project&gt;\n</code></pre>\n<p><em><strong>Stacktrace</strong></em></p>\n<pre><code>2023-05-25 05:45:20 [,] -DEBUG Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth-service/**', method=null}\n2023-05-25T05:45:20.457679873Z 2023-05-25 05:45:20 [,] -DEBUG Checking match of request : '/auth-service/register'; against '/auth-service/**'\n2023-05-25T05:45:20.457699175Z 2023-05-25 05:45:20 [,] -DEBUG matched\n2023-05-25T05:45:20.457742344Z 2023-05-25 05:45:20 [,] -DEBUG Checking authorization on '/auth-service/register' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda$648/0x00000008010ce248@1b9bc02\n2023-05-25T05:45:20.458327743Z 2023-05-25 05:45:20 [,] -DEBUG Authorization successful\n2023-05-25T05:45:20.459204178Z 2023-05-25 05:45:20 [,] -DEBUG Route matched: auth-service\n2023-05-25T05:45:20.459229258Z 2023-05-25 05:45:20 [,] -DEBUG Mapping [Exchange: POST http://localhost:8097/auth-service/register] to Route{id='auth-service', uri=lb://auth-service, order=0, predicate=Paths: [/auth-service/**], match trailing slash: true, gatewayFilters=[[[RewritePath /auth-service/(?&lt;path&gt;.*) = '/${path}'], order = 1]], metadata={}}\n2023-05-25T05:45:20.459233539Z 2023-05-25 05:45:20 [,] -DEBUG [afe63e91-2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@363dab18\n2023-05-25T05:45:20.459345964Z 2023-05-25 05:45:20 [,] -DEBUG Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@6a74d228}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@720653c2}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@36bc415e}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3e134896}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@2e3a5237}, order = 0], [[RewritePath /auth-service/(?&lt;path&gt;.*) = '/${path}'], order = 1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@349d0836}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ReactiveLoadBalancerClientFilter@301d8120}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.LoadBalancerServiceInstanceCookieFilter@6d367020}, order = 10151], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@72ba28ee}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@72458efc}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@6a714237}, order = 2147483647]]\n2023-05-25T05:45:20.460796164Z 2023-05-25 05:45:20 [,] - WARN No servers available for service: auth-service\n2023-05-25T05:45:20.461939954Z 2023-05-25 05:45:20 [,] -DEBUG [afe63e91-2] Resolved [NotFoundException: 503 SERVICE_UNAVAILABLE &quot;Unable to find instance for auth-service&quot;] for HTTP POST /auth-service/register\n2023-05-25T05:45:20.462477063Z 2023-05-25 05:45:20 [,] -DEBUG [afe63e91-2] Encoding [{timestamp=Thu May 25 05:45:20 GMT 2023, path=/auth-service/register, status=503, error=Service Unav (truncated)...]\n2023-05-25T05:45:20.467139970Z 2023-05-25 05:45:20 [,] -DEBUG [afe63e91-2, L:/172.27.0.9:8097 - R:/172.27.0.1:58344] Decreasing pending responses, now 0\n2023-05-25T05:45:20.468226365Z 2023-05-25 05:45:20 [,] -DEBUG [afe63e91-2] Completed 503 SERVICE_UNAVAILABLE\n2023-05-25T05:45:20.468294940Z 2023-05-25 05:45:20 [,] -DEBUG [afe63e91-2, L:/172.27.0.9:8097 - R:/172.27.0.1:58344] Last HTTP response frame\n</code></pre>\n"},{"tags":["java","spring-boot","ldap"],"comments":[{"owner":{"account_id":1239958,"reputation":39024,"user_id":1202807,"display_name":"Gabriel Luci"},"score":0,"creation_date":1685450814,"post_id":76340351,"comment_id":134658999,"body_markdown":"You should be able to get the rest using [Paged Search Results](https://docs.spring.io/spring-ldap/docs/1.3.2.RELEASE/reference/html/processor.html#:~:text=5.3.%C2%A0Paged%20Search%20Results)","body":"You should be able to get the rest using <a href=\"https://docs.spring.io/spring-ldap/docs/1.3.2.RELEASE/reference/html/processor.html#:~:text=5.3.%C2%A0Paged%20Search%20Results\" rel=\"nofollow noreferrer\">Paged Search Results</a>"}],"owner":{"account_id":27831680,"reputation":83,"user_id":21249956,"display_name":"Kumar Sourav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1700746652,"creation_date":1685100339,"question_id":76340351,"body_markdown":"   \r\n\r\n     public List&lt;LdapUserDetails&gt; findLdapUsers(String filter){\r\n        List&lt;LdapUserDetails&gt; subUsers = new ArrayList&lt;&gt;();\r\n        boolean finished = true;\r\n        int count = 0;\r\n        do {try {\r\n         subUsers = ldapTemplate.search(BASE_EU, filter, new PersonAttributesMapper());\r\n             System.out.println(subUsers.size());\r\n            } catch (Exception e) {\r\n            \tSystem.out.println(&quot;Catch Error &quot;+e);\r\n                if (e instanceof CommunicationException) {\r\n                    finished = false;\r\n                }\r\n            }\r\n            if (!finished) {\r\n                count++;\r\n                if (count &gt; MAX_RETRY) {\r\n                    finished = true;\r\n                }\r\n            }\r\n        } while (!finished);\r\n        return subUsers;\r\n    }\r\n\r\nI am trying to fetch approx. 20k records from active directory but getting only 2500 records\r\nLdapSearchfilter I have used (&amp;(sAMAccountType=805306368)(!userAccountControl:1.2.840.113556.1.4.803:=512))) \r\n","title":"How to Fetch all user details from ldap using Ldaptemplate java spring boot?","body":"<pre><code> public List&lt;LdapUserDetails&gt; findLdapUsers(String filter){\n    List&lt;LdapUserDetails&gt; subUsers = new ArrayList&lt;&gt;();\n    boolean finished = true;\n    int count = 0;\n    do {try {\n     subUsers = ldapTemplate.search(BASE_EU, filter, new PersonAttributesMapper());\n         System.out.println(subUsers.size());\n        } catch (Exception e) {\n            System.out.println(&quot;Catch Error &quot;+e);\n            if (e instanceof CommunicationException) {\n                finished = false;\n            }\n        }\n        if (!finished) {\n            count++;\n            if (count &gt; MAX_RETRY) {\n                finished = true;\n            }\n        }\n    } while (!finished);\n    return subUsers;\n}\n</code></pre>\n<p>I am trying to fetch approx. 20k records from active directory but getting only 2500 records\nLdapSearchfilter I have used (&amp;(sAMAccountType=805306368)(!userAccountControl:1.2.840.113556.1.4.803:=512)))</p>\n"},{"tags":["java","spring","controller","spring-resttemplate"],"answers":[{"tags":[],"owner":{"account_id":7527661,"reputation":440,"user_id":5717198,"display_name":"Abhijay Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700744364,"creation_date":1700744364,"answer_id":77537080,"question_id":77536837,"body_markdown":"It&#39;s a bad practice to have a space in your request URI. Check this [answer](https://stackoverflow.com/questions/5442658/spaces-in-urls) on why a URL should not contain a literal space. I think the issue in your case is that the space character is being encoded twice. A space character gets URL encoded to `%20` and a `%` character is encoded to `%25`. Thus your URL gets encoded twice to `%2520`. I suspect that `builder.toUriString()` maybe encoding it once followed by another encoding in `restTemplate.exchange()`. I&#39;m not sure but it is quite likely that one of the implementations changed in Java 17 and that is why it is a terrible idea and design to have a space in your URI. I would rather have it as a query parameter that ensures the safe encoding of most characters.\r\n\r\n`http://localhost:80/v1/accounts/{accountId}?name=QA%20Analyst`\r\n\r\nA good practice for RESTful API design is that path parameters are used to identify a specific resource, while query parameters are used to sort/filter those resources. In your case, it appears that you are doing a filtering/search by name.","title":"Handling special characters in uri","body":"<p>It's a bad practice to have a space in your request URI. Check this <a href=\"https://stackoverflow.com/questions/5442658/spaces-in-urls\">answer</a> on why a URL should not contain a literal space. I think the issue in your case is that the space character is being encoded twice. A space character gets URL encoded to <code>%20</code> and a <code>%</code> character is encoded to <code>%25</code>. Thus your URL gets encoded twice to <code>%2520</code>. I suspect that <code>builder.toUriString()</code> maybe encoding it once followed by another encoding in <code>restTemplate.exchange()</code>. I'm not sure but it is quite likely that one of the implementations changed in Java 17 and that is why it is a terrible idea and design to have a space in your URI. I would rather have it as a query parameter that ensures the safe encoding of most characters.</p>\n<p><code>http://localhost:80/v1/accounts/{accountId}?name=QA%20Analyst</code></p>\n<p>A good practice for RESTful API design is that path parameters are used to identify a specific resource, while query parameters are used to sort/filter those resources. In your case, it appears that you are doing a filtering/search by name.</p>\n"},{"tags":[],"owner":{"account_id":18586978,"reputation":2220,"user_id":15000097,"display_name":"Georgii Lvov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700746130,"creation_date":1700746130,"answer_id":77537271,"question_id":77536837,"body_markdown":"It seems that `fromHttpUrl()` method encodes url and then in `RestTemplate#exchange` your url is encoded twice. \r\nSo, try this:\r\n```\r\n  String uri = UriComponentsBuilder.fromHttpUrl(&quot;http://localhost:80&quot;)\r\n                  .path(&quot;/v1/accounts/{accountId}/name/{roleName}&quot;)\r\n                  .buildAndExpand(&quot;60a362bd6b84a37effc8f5a3&quot;, &quot;QA Analyst&quot;)\r\n                  .toUriString();\r\n\r\n   System.out.println(uri); // not encoded yet: http://localhost:80/v1/accounts/60a362bd6b84a37effc8f5a3/name/QA Analyst\r\n\r\n  responseEntity = this.restTemplate.exchange(uri, HttpMethod.GET, entity, RoleResponse.class, new Object[0]);\r\n\r\n```","title":"Handling special characters in uri","body":"<p>It seems that <code>fromHttpUrl()</code> method encodes url and then in <code>RestTemplate#exchange</code> your url is encoded twice.\nSo, try this:</p>\n<pre><code>  String uri = UriComponentsBuilder.fromHttpUrl(&quot;http://localhost:80&quot;)\n                  .path(&quot;/v1/accounts/{accountId}/name/{roleName}&quot;)\n                  .buildAndExpand(&quot;60a362bd6b84a37effc8f5a3&quot;, &quot;QA Analyst&quot;)\n                  .toUriString();\n\n   System.out.println(uri); // not encoded yet: http://localhost:80/v1/accounts/60a362bd6b84a37effc8f5a3/name/QA Analyst\n\n  responseEntity = this.restTemplate.exchange(uri, HttpMethod.GET, entity, RoleResponse.class, new Object[0]);\n\n</code></pre>\n"}],"owner":{"account_id":26095047,"reputation":11,"user_id":19791278,"display_name":"Marcus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1700746130,"creation_date":1700742151,"question_id":77536837,"body_markdown":"The below mentioned is my requestUrl\r\n&quot;http://localhost:80/v1/accounts/60a362bd6b84a37effc8f5a3/name/QA Analyst&quot;\r\nI am using the following code\r\n\r\n    UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(requestUrl);\r\n    ResponseEntity&lt;RoleResponse&gt; responseEntity = null;\r\n    HttpEntity&lt;?&gt; entity = new HttpEntity(RestUtil.getHeaders(this.appSecret));\r\n\r\n    try {\r\n      responseEntity = this.restTemplate.exchange(builder.toUriString(), HttpMethod.GET, entity, RoleResponse.class, new Object[0]);\r\n    } catch (Exception var9) {\r\n      log.error(&quot;Error occurred while getting role by name for accountId {}&quot;, accountId, var9);\r\n      throw new RestClientException(&quot;rest_client_exception&quot;, &quot;Unable to get role by name for account&quot;);\r\n    }\r\n\r\nIn the service which is running on port 80 with java 8 version, I can see the following uri being hit\r\n&quot;v1/accounts/60a362bd6b84a37effc8f5a3/name/QA%2520Analyst&quot;\r\nbut this uri is being handled and can get responsecode 200.\r\nNow I migrated to java 17 and the request is throwing 400 BAD_REQUEST.\r\nWhat is the reason and how can I handle this ?\r\nThe restTemplate I am using is of   org.springframework.web.client","title":"Handling special characters in uri","body":"<p>The below mentioned is my requestUrl\n&quot;http://localhost:80/v1/accounts/60a362bd6b84a37effc8f5a3/name/QA Analyst&quot;\nI am using the following code</p>\n<pre><code>UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(requestUrl);\nResponseEntity&lt;RoleResponse&gt; responseEntity = null;\nHttpEntity&lt;?&gt; entity = new HttpEntity(RestUtil.getHeaders(this.appSecret));\n\ntry {\n  responseEntity = this.restTemplate.exchange(builder.toUriString(), HttpMethod.GET, entity, RoleResponse.class, new Object[0]);\n} catch (Exception var9) {\n  log.error(&quot;Error occurred while getting role by name for accountId {}&quot;, accountId, var9);\n  throw new RestClientException(&quot;rest_client_exception&quot;, &quot;Unable to get role by name for account&quot;);\n}\n</code></pre>\n<p>In the service which is running on port 80 with java 8 version, I can see the following uri being hit\n&quot;v1/accounts/60a362bd6b84a37effc8f5a3/name/QA%2520Analyst&quot;\nbut this uri is being handled and can get responsecode 200.\nNow I migrated to java 17 and the request is throwing 400 BAD_REQUEST.\nWhat is the reason and how can I handle this ?\nThe restTemplate I am using is of   org.springframework.web.client</p>\n"},{"tags":["java","mysql","kubernetes","keycloak","keycloak-services"],"owner":{"account_id":11519617,"reputation":103,"user_id":13722908,"display_name":"aditya_sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700745947,"creation_date":1695289869,"question_id":77149103,"body_markdown":"Context:&lt;br&gt;\r\nI am installing **keycloak** using helm chart in a kubernetes environment. This creates a single deployment and pod with other required resources in my k8s environment. The image used in the helm chart is ```quay.io/keycloak/keycloak:20.0 ``` . I am not doing any custom configuration and letting keycloak create the tables on start-up in the database (I am using MySQL). Previously I used the same keycloak chart with normal single instance oracle cloud MySQL database , where keycloak was able to create 92 tables required for its functioning. &lt;br&gt;\r\n\r\nNow when I switched to an HA(Highly available) oracle cloud MySQL instance , Then what is happening is , it is giving me this error :&lt;br&gt;\r\n\r\n``` 2023-09-21 09:26:04,394 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Failed to start server in (production) mode\r\n\r\n2023-09-21 09:26:04,394 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Failed to update database\r\n\r\n2023-09-21 09:26:04,394 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: liquibase.exception.MigrationFailedException: Migration failed for changeset META-INF/jpa-changelog-1.0.0.Final.xml::1.0.0.Final-KEYCLOAK-5461::sthorger@redhat.com:\r\n\r\n     Reason: liquibase.exception.DatabaseException: Table &#39;APPLICATION_DEFAULT_ROLES&#39; already exists [Failed SQL: (1050) CREATE TABLE keycloak.APPLICATION_DEFAULT_ROLES (APPLICATION_ID VARCHAR(36) NOT NULL, ROLE_ID VARCHAR(36) NOT NULL)]\r\n\r\n2023-09-21 09:26:04,395 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Migration failed for changeset META-INF/jpa-changelog-1.0.0.Final.xml::1.0.0.Final-KEYCLOAK-5461::sthorger@redhat.com:\r\n\r\n     Reason: liquibase.exception.DatabaseException: Table &#39;APPLICATION_DEFAULT_ROLES&#39; already exists [Failed SQL: (1050) CREATE TABLE keycloak.APPLICATION_DEFAULT_ROLES (APPLICATION_ID VARCHAR(36) NOT NULL, ROLE_ID VARCHAR(36) NOT NULL)]\r\n\r\n2023-09-21 09:26:04,395 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Table &#39;APPLICATION_DEFAULT_ROLES&#39; already exists [Failed SQL: (1050) CREATE TABLE keycloak.APPLICATION_DEFAULT_ROLES (APPLICATION_ID VARCHAR(36) NOT NULL, ROLE_ID VARCHAR(36) NOT NULL)]\r\n\r\n2023-09-21 09:26:04,395 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Table &#39;APPLICATION_DEFAULT_ROLES&#39; already exists\r\n\r\n2023-09-21 09:26:04,395 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) For more details run the same command passing the \r\n``` \r\n\r\nThe issue is I had never seen this table in the single instance DB so why would this be created now? So I checked the keycloak repo for some clues. Here are my findings:&lt;br&gt;\r\n\r\n1. link to &lt;https://github.com/search?q=repo%3Akeycloak%2Fkeycloak%20path%3A%2F%5Emodel%5C%2Fjpa%5C%2Fsrc%5C%2Fmain%5C%2Fresources%5C%2FMETA-INF%5C%2F%2F%20APPLICATION_DEFAULT_ROLES&amp;type=code&gt; with search item as &quot;APPLICATION_DEFAULT_ROLES&quot; :&lt;br&gt;\r\n\r\nhere i found that using liquibase changesets, it is creating this table, making some relations and then renaming the table to **CLIENT_DEFAULT_ROLES**. &lt;br&gt;\r\n\r\n2. link to &lt;https://github.com/search?q=repo%3Akeycloak%2Fkeycloak+path%3A%2F%5Emodel%5C%2Fjpa%5C%2Fsrc%5C%2Fmain%5C%2Fresources%5C%2FMETA-INF%5C%2F%2F+CLIENT_DEFAULT_ROLES&amp;type=code&gt; with search item as &quot;CLIENT_DEFAULT_ROLES&quot;: &lt;br&gt;\r\n\r\nhere I found that using liquibase changesets, it is modifying the CLIENT_DEFAULT_ROLES table and then dropping it in one of the changesets, so at the end it would not be visible.\r\n\r\nMy question is what made keycloak throw this error if in a single instance mysql it was working and in an HA it is giving this error?\r\n\r\n**Note**: Previously it was giving me errors (only in HA env, in single instance it works flawlessly) related to the primary key as this table if you see in the change sets does not have a primary key so previous error was: **not able to create table** . But I switched off the primary key check(I know it is not recommended and will find another way but for now just to get to the root cause of the error i allowed it) so that this table can be created. Now after creating i do not know why every time on startup it is trying to create this table even after creating this once. Also due to this, only 30 out 92 tables are created and then it fails. \r\n&lt;br&gt;\r\nPlease ask for any information required incase I missed something which can help in debugging. \r\n","title":"Keycloak CREATE TABLE APPLICATION_DEFAULT_ROLES giving already exists error","body":"<p>Context:<br>\nI am installing <strong>keycloak</strong> using helm chart in a kubernetes environment. This creates a single deployment and pod with other required resources in my k8s environment. The image used in the helm chart is <code>quay.io/keycloak/keycloak:20.0 </code> . I am not doing any custom configuration and letting keycloak create the tables on start-up in the database (I am using MySQL). Previously I used the same keycloak chart with normal single instance oracle cloud MySQL database , where keycloak was able to create 92 tables required for its functioning. <br></p>\n<p>Now when I switched to an HA(Highly available) oracle cloud MySQL instance , Then what is happening is , it is giving me this error :<br></p>\n<pre><code>\n2023-09-21 09:26:04,394 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Failed to update database\n\n2023-09-21 09:26:04,394 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: liquibase.exception.MigrationFailedException: Migration failed for changeset META-INF/jpa-changelog-1.0.0.Final.xml::1.0.0.Final-KEYCLOAK-5461::sthorger@redhat.com:\n\n     Reason: liquibase.exception.DatabaseException: Table 'APPLICATION_DEFAULT_ROLES' already exists [Failed SQL: (1050) CREATE TABLE keycloak.APPLICATION_DEFAULT_ROLES (APPLICATION_ID VARCHAR(36) NOT NULL, ROLE_ID VARCHAR(36) NOT NULL)]\n\n2023-09-21 09:26:04,395 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Migration failed for changeset META-INF/jpa-changelog-1.0.0.Final.xml::1.0.0.Final-KEYCLOAK-5461::sthorger@redhat.com:\n\n     Reason: liquibase.exception.DatabaseException: Table 'APPLICATION_DEFAULT_ROLES' already exists [Failed SQL: (1050) CREATE TABLE keycloak.APPLICATION_DEFAULT_ROLES (APPLICATION_ID VARCHAR(36) NOT NULL, ROLE_ID VARCHAR(36) NOT NULL)]\n\n2023-09-21 09:26:04,395 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Table 'APPLICATION_DEFAULT_ROLES' already exists [Failed SQL: (1050) CREATE TABLE keycloak.APPLICATION_DEFAULT_ROLES (APPLICATION_ID VARCHAR(36) NOT NULL, ROLE_ID VARCHAR(36) NOT NULL)]\n\n2023-09-21 09:26:04,395 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Table 'APPLICATION_DEFAULT_ROLES' already exists\n\n2023-09-21 09:26:04,395 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) For more details run the same command passing the \n</code></pre>\n<p>The issue is I had never seen this table in the single instance DB so why would this be created now? So I checked the keycloak repo for some clues. Here are my findings:<br></p>\n<ol>\n<li>link to <a href=\"https://github.com/search?q=repo%3Akeycloak%2Fkeycloak%20path%3A%2F%5Emodel%5C%2Fjpa%5C%2Fsrc%5C%2Fmain%5C%2Fresources%5C%2FMETA-INF%5C%2F%2F%20APPLICATION_DEFAULT_ROLES&amp;type=code\" rel=\"nofollow noreferrer\">https://github.com/search?q=repo%3Akeycloak%2Fkeycloak%20path%3A%2F%5Emodel%5C%2Fjpa%5C%2Fsrc%5C%2Fmain%5C%2Fresources%5C%2FMETA-INF%5C%2F%2F%20APPLICATION_DEFAULT_ROLES&amp;type=code</a> with search item as &quot;APPLICATION_DEFAULT_ROLES&quot; :<br></li>\n</ol>\n<p>here i found that using liquibase changesets, it is creating this table, making some relations and then renaming the table to <strong>CLIENT_DEFAULT_ROLES</strong>. <br></p>\n<ol start=\"2\">\n<li>link to <a href=\"https://github.com/search?q=repo%3Akeycloak%2Fkeycloak+path%3A%2F%5Emodel%5C%2Fjpa%5C%2Fsrc%5C%2Fmain%5C%2Fresources%5C%2FMETA-INF%5C%2F%2F+CLIENT_DEFAULT_ROLES&amp;type=code\" rel=\"nofollow noreferrer\">https://github.com/search?q=repo%3Akeycloak%2Fkeycloak+path%3A%2F%5Emodel%5C%2Fjpa%5C%2Fsrc%5C%2Fmain%5C%2Fresources%5C%2FMETA-INF%5C%2F%2F+CLIENT_DEFAULT_ROLES&amp;type=code</a> with search item as &quot;CLIENT_DEFAULT_ROLES&quot;: <br></li>\n</ol>\n<p>here I found that using liquibase changesets, it is modifying the CLIENT_DEFAULT_ROLES table and then dropping it in one of the changesets, so at the end it would not be visible.</p>\n<p>My question is what made keycloak throw this error if in a single instance mysql it was working and in an HA it is giving this error?</p>\n<p><strong>Note</strong>: Previously it was giving me errors (only in HA env, in single instance it works flawlessly) related to the primary key as this table if you see in the change sets does not have a primary key so previous error was: <strong>not able to create table</strong> . But I switched off the primary key check(I know it is not recommended and will find another way but for now just to get to the root cause of the error i allowed it) so that this table can be created. Now after creating i do not know why every time on startup it is trying to create this table even after creating this once. Also due to this, only 30 out 92 tables are created and then it fails.\n<br>\nPlease ask for any information required incase I missed something which can help in debugging.</p>\n"},{"tags":["java","design-patterns"],"comments":[{"owner":{"account_id":5501406,"reputation":4041,"user_id":4370629,"accept_rate":67,"display_name":"Spotted"},"score":0,"creation_date":1480071580,"post_id":40711727,"comment_id":68827651,"body_markdown":"Looks like an [XY Problem](http://xyproblem.info/). Why do you think you **need** to add a try/catch for every method ? Shouldn&#39;t some method only throws the exception ? Why do you think only a design pattern can solve this ? Can you provide more explicit code (insteand of `do something`) ?","body":"Looks like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY Problem</a>. Why do you think you <b>need</b> to add a try/catch for every method ? Shouldn&#39;t some method only throws the exception ? Why do you think only a design pattern can solve this ? Can you provide more explicit code (insteand of <code>do something</code>) ?"}],"answers":[{"comments":[{"owner":{"account_id":9175392,"reputation":201,"user_id":6821157,"accept_rate":14,"display_name":"Dale"},"score":0,"creation_date":1479694450,"post_id":40711783,"comment_id":68651555,"body_markdown":"every method do different thing","body":"every method do different thing"},{"owner":{"account_id":9314168,"reputation":1674,"user_id":6914992,"accept_rate":44,"display_name":"jace"},"score":0,"creation_date":1479695198,"post_id":40711783,"comment_id":68651710,"body_markdown":"if you have different methods, you can&#39;t put them in one method. unless they have something in common :) . or else do an inner exception which will just give a more try catch statement but more cleaner :)","body":"if you have different methods, you can&#39;t put them in one method. unless they have something in common :) . or else do an inner exception which will just give a more try catch statement but more cleaner :)"}],"tags":[],"owner":{"account_id":9314168,"reputation":1674,"user_id":6914992,"accept_rate":44,"display_name":"jace"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1479694077,"creation_date":1479694077,"answer_id":40711783,"question_id":40711727,"body_markdown":"If your do something have just the same values need for try catch, then you can put it this way\r\n\r\n    public class Test {\r\n        public void a() {\r\n            //do other stuffs that don&#39;t require try catch and different from b\r\n            c(); //pass some values if you need too\r\n        }\r\n\r\n        public void b() {\r\n            //do other stuffs that don&#39;t require try catch and different from a\r\n            c(); //pass some values if you need too\r\n        }\r\n\r\n        public void c() { //catch values if you pass something from a and b\r\n            try {\r\n                do something;\r\n            } catch (Exception e) {\r\n                logger.error(&quot;error happened&quot;);\r\n            }\r\n        }//put return if you like.\r\n    }\r\n\r\nbut if you have different do something and try catch value for each method, you really have to do it that way.","title":"how to deal with exceptions for every method in a class","body":"<p>If your do something have just the same values need for try catch, then you can put it this way</p>\n\n<pre><code>public class Test {\n    public void a() {\n        //do other stuffs that don't require try catch and different from b\n        c(); //pass some values if you need too\n    }\n\n    public void b() {\n        //do other stuffs that don't require try catch and different from a\n        c(); //pass some values if you need too\n    }\n\n    public void c() { //catch values if you pass something from a and b\n        try {\n            do something;\n        } catch (Exception e) {\n            logger.error(\"error happened\");\n        }\n    }//put return if you like.\n}\n</code></pre>\n\n<p>but if you have different do something and try catch value for each method, you really have to do it that way.</p>\n"},{"comments":[{"owner":{"account_id":9175392,"reputation":201,"user_id":6821157,"accept_rate":14,"display_name":"Dale"},"score":0,"creation_date":1479697701,"post_id":40712136,"comment_id":68652301,"body_markdown":"it seems you do not get my point, i need to know how to deal with exceptions for every method in a class, such as spring aop, but i do not want to use spring.","body":"it seems you do not get my point, i need to know how to deal with exceptions for every method in a class, such as spring aop, but i do not want to use spring."},{"owner":{"account_id":3167480,"reputation":766,"user_id":2677145,"display_name":"Fu Xu"},"score":0,"creation_date":1479698084,"post_id":40712136,"comment_id":68652391,"body_markdown":"I think `exceptions` will not be `Exception`, every different exception should have different catcher. And methods need only to throw it out. I don&#39;t know if this is a good  practice","body":"I think <code>exceptions</code> will not be <code>Exception</code>, every different exception should have different catcher. And methods need only to throw it out. I don&#39;t know if this is a good  practice"}],"tags":[],"owner":{"account_id":3167480,"reputation":766,"user_id":2677145,"display_name":"Fu Xu"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1479697402,"creation_date":1479697402,"answer_id":40712136,"question_id":40711727,"body_markdown":"why not try to catch the exception outside the method?\r\n\r\nyou need only to make sure what exception will throw from this method\r\n\r\neg:\r\n\r\n    Test a = new Test();\r\n\r\n    try {\r\n        a.a();\r\n        a.b();\r\n    } catch (Exception e) {\r\n        logger.error(&quot;error happened&quot;);\r\n    }","title":"how to deal with exceptions for every method in a class","body":"<p>why not try to catch the exception outside the method?</p>\n\n<p>you need only to make sure what exception will throw from this method</p>\n\n<p>eg:</p>\n\n<pre><code>Test a = new Test();\n\ntry {\n    a.a();\n    a.b();\n} catch (Exception e) {\n    logger.error(\"error happened\");\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9175392,"reputation":201,"user_id":6821157,"accept_rate":14,"display_name":"Dale"},"score":0,"creation_date":1479697983,"post_id":40712184,"comment_id":68652370,"body_markdown":"it looks good. do you know how can i do this with an annotation?","body":"it looks good. do you know how can i do this with an annotation?"}],"tags":[],"owner":{"account_id":77859,"reputation":71371,"user_id":221955,"accept_rate":88,"display_name":"Michael Anderson"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1479697780,"creation_date":1479697780,"answer_id":40712184,"question_id":40711727,"body_markdown":"You can do some of this with an &quot;Execute around&quot; idiom, but it wont save you much boilerplate. The following wont quite work - you&#39;ll need to a define `TestLambda` class. But theres a few things to watch out for. \r\n\r\n 1. `executeAround` will need variants depending on return values etc.\r\n 2. Your `TestLambda` definition needs to throw exceptions. (Which the standard Java 8 lambdas do not.)\r\n 3. It&#39;s a bad practice to just swallow exceptions.\r\n\r\n&lt;br&gt;\r\n\r\n    public static class Test {\r\n        public void a() {\r\n           executeAround( ()-&gt;{ do_something ; } );\r\n        }\r\n        public void b() {\r\n           executeAround( ()-&gt;{ do_something_else; } );\r\n        }\r\n\r\n        private void executeAround( TestLambda fn ) {\r\n           try {\r\n              fn();\r\n           } catch( Exception e) {\r\n              logger.error(&quot;error happened&quot;);\r\n           }\r\n        } \r\n     }","title":"how to deal with exceptions for every method in a class","body":"<p>You can do some of this with an \"Execute around\" idiom, but it wont save you much boilerplate. The following wont quite work - you'll need to a define <code>TestLambda</code> class. But theres a few things to watch out for. </p>\n\n<ol>\n<li><code>executeAround</code> will need variants depending on return values etc.</li>\n<li>Your <code>TestLambda</code> definition needs to throw exceptions. (Which the standard Java 8 lambdas do not.)</li>\n<li>It's a bad practice to just swallow exceptions.</li>\n</ol>\n\n<p><br></p>\n\n<pre><code>public static class Test {\n    public void a() {\n       executeAround( ()-&gt;{ do_something ; } );\n    }\n    public void b() {\n       executeAround( ()-&gt;{ do_something_else; } );\n    }\n\n    private void executeAround( TestLambda fn ) {\n       try {\n          fn();\n       } catch( Exception e) {\n          logger.error(\"error happened\");\n       }\n    } \n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2156100,"reputation":11279,"user_id":1911306,"accept_rate":83,"display_name":"Marcin Szymczak"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1480068577,"creation_date":1480068577,"answer_id":40802376,"question_id":40711727,"body_markdown":"One of practical solutions is to use frameworks such as [spring ExceptionHandler][1]\r\n\r\nEssentially you use `throws SomeException` in lower layers of your application and catch everything in top layer\r\n\r\nController:\r\n\r\n      @ExceptionHandler({SQLException.class,DataAccessException.class})\r\n      public String databaseError() {\r\n        return &quot;databaseError&quot;;\r\n      } \r\n\r\nLayers below:\r\n\r\n    public void doStufff throws SQLexception{\r\n        // do stuff which may throw exception\r\n    }\r\n\r\n  [1]: https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc","title":"how to deal with exceptions for every method in a class","body":"<p>One of practical solutions is to use frameworks such as <a href=\"https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc\" rel=\"nofollow noreferrer\">spring ExceptionHandler</a></p>\n\n<p>Essentially you use <code>throws SomeException</code> in lower layers of your application and catch everything in top layer</p>\n\n<p>Controller:</p>\n\n<pre><code>  @ExceptionHandler({SQLException.class,DataAccessException.class})\n  public String databaseError() {\n    return \"databaseError\";\n  } \n</code></pre>\n\n<p>Layers below:</p>\n\n<pre><code>public void doStufff throws SQLexception{\n    // do stuff which may throw exception\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12460630,"reputation":1,"user_id":14811316,"display_name":"skarplex"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700745832,"creation_date":1700745832,"answer_id":77537236,"question_id":40711727,"body_markdown":"You **could** use a java.lang.reflect.Proxy to solve this kind of problem but should be sure whether you really want to do this. &lt;br&gt;\r\nSince you are working with reflection here, which is much less performant and you would have to create additional classes and interfaces, this solution is only really practicable in very few use cases.\r\n\r\nFirst of all you&#39;ll need a interface to be proxied:\r\n\r\n    public interface YourInterface {\r\n        void a();\r\n        void b();\r\n    }\r\n\r\nThis interface then have to be implemented by your class:\r\n    \r\n    public class YourClass implements YourInterface {\r\n        public void a() {}\r\n        public void b() {}\r\n    }\r\n\r\nThe class which will do the common exception handling has to be an InvocationHandler. This class could be a general implementation and could be used for different target classes:\r\n\r\n    public static class ExceptionHandler implements InvocationHandler {\r\n        private final Map&lt;String, Method&gt; methods = new HashMap&lt;&gt;();\r\n    \r\n        private Object target;\r\n    \r\n        public ExceptionHandler(Object target) {\r\n            this.target = target;\r\n    \r\n            for(Method method: target.getClass().getDeclaredMethods())\r\n                this.methods.put(method.getName(), method);\r\n        }\r\n    \r\n        @Override\r\n        public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\r\n            try {\r\n                return this.methods.get(method.getName()).invoke(this.target, args);\r\n            } catch (Exception ex) {\r\n                // do common handling here\r\n            }\r\n        }\r\n    }\r\n\r\nYou could then use all this like that:\r\n\r\n    YourClass yourObj = new YourClass();\r\n\r\n    YourInterface yourProxy = (YourInterface) Proxy.newProxyInstance(\r\n                YourInterface.class.getClassLoader(), new Class[]{YourInterface.class}, new ExceptionHandler(yourObj));\r\n\r\n    yourProxy.a();\r\n\r\nAs you see your object instatioation will differ but the methods will be used as you would do it usually.  \r\nIn this case, the method is processed by the InvocationHandler, which delegates the call to your actual object. However, if an exception occurs, it first lands in the invoke method of the InvocationHandler and can be handled there.","title":"how to deal with exceptions for every method in a class","body":"<p>You <strong>could</strong> use a java.lang.reflect.Proxy to solve this kind of problem but should be sure whether you really want to do this. <br>\nSince you are working with reflection here, which is much less performant and you would have to create additional classes and interfaces, this solution is only really practicable in very few use cases.</p>\n<p>First of all you'll need a interface to be proxied:</p>\n<pre><code>public interface YourInterface {\n    void a();\n    void b();\n}\n</code></pre>\n<p>This interface then have to be implemented by your class:</p>\n<pre><code>public class YourClass implements YourInterface {\n    public void a() {}\n    public void b() {}\n}\n</code></pre>\n<p>The class which will do the common exception handling has to be an InvocationHandler. This class could be a general implementation and could be used for different target classes:</p>\n<pre><code>public static class ExceptionHandler implements InvocationHandler {\n    private final Map&lt;String, Method&gt; methods = new HashMap&lt;&gt;();\n\n    private Object target;\n\n    public ExceptionHandler(Object target) {\n        this.target = target;\n\n        for(Method method: target.getClass().getDeclaredMethods())\n            this.methods.put(method.getName(), method);\n    }\n\n    @Override\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n        try {\n            return this.methods.get(method.getName()).invoke(this.target, args);\n        } catch (Exception ex) {\n            // do common handling here\n        }\n    }\n}\n</code></pre>\n<p>You could then use all this like that:</p>\n<pre><code>YourClass yourObj = new YourClass();\n\nYourInterface yourProxy = (YourInterface) Proxy.newProxyInstance(\n            YourInterface.class.getClassLoader(), new Class[]{YourInterface.class}, new ExceptionHandler(yourObj));\n\nyourProxy.a();\n</code></pre>\n<p>As you see your object instatioation will differ but the methods will be used as you would do it usually.<br />\nIn this case, the method is processed by the InvocationHandler, which delegates the call to your actual object. However, if an exception occurs, it first lands in the invoke method of the InvocationHandler and can be handled there.</p>\n"}],"owner":{"account_id":9175392,"reputation":201,"user_id":6821157,"accept_rate":14,"display_name":"Dale"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1431,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":5,"score":2,"last_activity_date":1700745832,"creation_date":1479693505,"question_id":40711727,"body_markdown":"I hava a class, i need add try catch for every method, but it looks redundant, so i need a good way to fix it, what kind of design pattern can solve this?\r\n\r\n    public class Test {\r\n    \tpublic void a() {\r\n    \t\ttry {\r\n    \t\t\tdo something;\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tlogger.error(&quot;error happened&quot;);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic void b() {\r\n    \t\ttry {\r\n    \t\t\tdo something;\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tlogger.error(&quot;error happened&quot;);\r\n    \t\t}\r\n    \t}\r\n    }","title":"how to deal with exceptions for every method in a class","body":"<p>I hava a class, i need add try catch for every method, but it looks redundant, so i need a good way to fix it, what kind of design pattern can solve this?</p>\n\n<pre><code>public class Test {\n    public void a() {\n        try {\n            do something;\n        } catch (Exception e) {\n            logger.error(\"error happened\");\n        }\n    }\n\n    public void b() {\n        try {\n            do something;\n        } catch (Exception e) {\n            logger.error(\"error happened\");\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","hibernate"],"answers":[{"comments":[{"owner":{"account_id":2036858,"reputation":1586,"user_id":1819007,"accept_rate":68,"display_name":"sudshekhar"},"score":0,"creation_date":1497264609,"post_id":44495766,"comment_id":75988184,"body_markdown":"So shouldn&#39;t every every statistic log also have a set of corresponding query/statements that were run in that session (which would be printed to console)? Why are statistics logs printed with only `getting JDBC connection` in most cases?","body":"So shouldn&#39;t every every statistic log also have a set of corresponding query/statements that were run in that session (which would be printed to console)? Why are statistics logs printed with only <code>getting JDBC connection</code> in most cases?"},{"owner":{"account_id":4774363,"reputation":723,"user_id":3858003,"display_name":"Abass A"},"score":0,"creation_date":1497272557,"post_id":44495766,"comment_id":75993665,"body_markdown":"In fact in order to print statistics you must retrieve a statistics object from sessionFactory.\n    Statistics stats =         sessionFactory.getStatistics();\nthen you can query statistics for different objects : Session, Entity, Collection, Cache. \nRefer to [link](https://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/stat/Statistics.html) for more details.","body":"In fact in order to print statistics you must retrieve a statistics object from sessionFactory.     Statistics stats =         sessionFactory.getStatistics(); then you can query statistics for different objects : Session, Entity, Collection, Cache.  Refer to <a href=\"https://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/stat/Statistics.html\" rel=\"nofollow noreferrer\">link</a> for more details."},{"owner":{"account_id":4774363,"reputation":723,"user_id":3858003,"display_name":"Abass A"},"score":0,"creation_date":1497273240,"post_id":44495766,"comment_id":75994177,"body_markdown":"in addition to default session metrics you can log every metrics you want, it&#39;s up to you, if you want metric on a particular entity you can call for exemple:\n Statistics stats = sessionFactory.getStatistics();\n EntityStatistics es = stats.getEntityStatistics(entityName);  System.out.println(&quot;Delete: &quot; + es.getDeleteCount());","body":"in addition to default session metrics you can log every metrics you want, it&#39;s up to you, if you want metric on a particular entity you can call for exemple:  Statistics stats = sessionFactory.getStatistics();  EntityStatistics es = stats.getEntityStatistics(entityName);  System.out.println(&quot;Delete: &quot; + es.getDeleteCount());"},{"owner":{"account_id":2036858,"reputation":1586,"user_id":1819007,"accept_rate":68,"display_name":"sudshekhar"},"score":0,"creation_date":1497328205,"post_id":44495766,"comment_id":76017423,"body_markdown":"So i haven&#39;t done any of these above steps till now. Just enabled the logging and set the appropriate log level.If the number of session metrics printed is much more than the sql queries run, is this an indication that my annotations might not be correct? (Hibernate opening transactions for various function calls where they might not be needed etc)","body":"So i haven&#39;t done any of these above steps till now. Just enabled the logging and set the appropriate log level.If the number of session metrics printed is much more than the sql queries run, is this an indication that my annotations might not be correct? (Hibernate opening transactions for various function calls where they might not be needed etc)"},{"owner":{"account_id":4774363,"reputation":723,"user_id":3858003,"display_name":"Abass A"},"score":0,"creation_date":1497358879,"post_id":44495766,"comment_id":76036386,"body_markdown":"Yes you&#39;re rigth,indeed it must be an indication that something goes wrong. With [session per request](https://docs.jboss.org/hibernate/orm/4.2/devguide/en-US/html/ch02.html#session-per-request) pattern which is the most common transactionnal pattern you should have a session metrics log per request.","body":"Yes you&#39;re rigth,indeed it must be an indication that something goes wrong. With <a href=\"https://docs.jboss.org/hibernate/orm/4.2/devguide/en-US/html/ch02.html#session-per-request\" rel=\"nofollow noreferrer\">session per request</a> pattern which is the most common transactionnal pattern you should have a session metrics log per request."}],"tags":[],"owner":{"account_id":4774363,"reputation":723,"user_id":3858003,"display_name":"Abass A"},"comment_count":5,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1497259164,"creation_date":1497259164,"answer_id":44495766,"question_id":44494576,"body_markdown":"When you enable hibernate statistics you get session statistics information every time a session is closed.\r\nif you dont want this behavior you can disable it with adding of following entry in your log4j file:\r\n\r\n    log4j.logger.org.hibernate.engine.internal.StatisticalLoggingSessionEventListener=OFF","title":"When does Hibernate print statistics?","body":"<p>When you enable hibernate statistics you get session statistics information every time a session is closed.\nif you dont want this behavior you can disable it with adding of following entry in your log4j file:</p>\n\n<pre><code>log4j.logger.org.hibernate.engine.internal.StatisticalLoggingSessionEventListener=OFF\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2680207,"reputation":521,"user_id":2315724,"display_name":"Chaithu Narayana"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1525786878,"creation_date":1525786878,"answer_id":50235095,"question_id":44494576,"body_markdown":"If you don&#39;t want to get to as deep as session events, you can disable them from getting logged by using this property &quot;**hibernate.session.events.log=false**&quot;. (You may do it with your log4j configuration also, based on your needs).\r\n\r\nIt appears that since hibernate 4, if you enable &quot;**hibernate.generate_statistics**&quot;, the session events are also logged by default. But the logs will get filled up heavily as the events are logged per session. So, use when you need to analyze any performance issues locally. \r\n\r\nMore details on enabling/disabling the event logs here:\r\nhttps://hibernate.atlassian.net/browse/HHH-8793","title":"When does Hibernate print statistics?","body":"<p>If you don't want to get to as deep as session events, you can disable them from getting logged by using this property \"<strong>hibernate.session.events.log=false</strong>\". (You may do it with your log4j configuration also, based on your needs).</p>\n\n<p>It appears that since hibernate 4, if you enable \"<strong>hibernate.generate_statistics</strong>\", the session events are also logged by default. But the logs will get filled up heavily as the events are logged per session. So, use when you need to analyze any performance issues locally. </p>\n\n<p>More details on enabling/disabling the event logs here:\n<a href=\"https://hibernate.atlassian.net/browse/HHH-8793\" rel=\"noreferrer\">https://hibernate.atlassian.net/browse/HHH-8793</a></p>\n"},{"tags":[],"owner":{"account_id":8284855,"reputation":101,"user_id":6228268,"display_name":"Alexander Lu"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1590419139,"creation_date":1590419139,"answer_id":62005246,"question_id":44494576,"body_markdown":"It helped me:\r\n\r\n    spring:\r\n      jpa:\r\n        properties:\r\n          generate_statistics: false\r\n\r\nin application.yml","title":"When does Hibernate print statistics?","body":"<p>It helped me:</p>\n\n<pre><code>spring:\n  jpa:\n    properties:\n      generate_statistics: false\n</code></pre>\n\n<p>in application.yml</p>\n"},{"tags":[],"owner":{"account_id":9500256,"reputation":983,"user_id":7061661,"display_name":"P&#233;ter Veres"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1599835004,"creation_date":1599835004,"answer_id":63849196,"question_id":44494576,"body_markdown":"for **Quarkus** the relevant application.properties entry is:\r\n\r\n```\r\nquarkus.hibernate-orm.metrics.enabled = false\r\n```","title":"When does Hibernate print statistics?","body":"<p>for <strong>Quarkus</strong> the relevant application.properties entry is:</p>\n<pre><code>quarkus.hibernate-orm.metrics.enabled = false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2118041,"reputation":2108,"user_id":1881894,"accept_rate":76,"display_name":"Morez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643271312,"creation_date":1643271312,"answer_id":70875264,"question_id":44494576,"body_markdown":"I disabled it by using removing or disabling below property -\r\n\r\n`spring.jpa.properties.hibernate.generate_statistics = false`","title":"When does Hibernate print statistics?","body":"<p>I disabled it by using removing or disabling below property -</p>\n<p><code>spring.jpa.properties.hibernate.generate_statistics = false</code></p>\n"},{"tags":[],"owner":{"account_id":16458154,"reputation":113,"user_id":11889864,"display_name":"Jitendra Asawa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694430623,"creation_date":1694430623,"answer_id":77081122,"question_id":44494576,"body_markdown":"We can disable logging specifically for this class by adding a property in logback.xml or log4j.xml file:\r\n\r\n \t&lt;logger name=&quot;org.hibernate.engine.internal.StatisticalLoggingSessionEventListener&quot; level=&quot;OFF&quot;/&gt;","title":"When does Hibernate print statistics?","body":"<p>We can disable logging specifically for this class by adding a property in logback.xml or log4j.xml file:</p>\n<pre><code>&lt;logger name=&quot;org.hibernate.engine.internal.StatisticalLoggingSessionEventListener&quot; level=&quot;OFF&quot;/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3850494,"reputation":381,"user_id":3190811,"display_name":"Mojtaba Shayegh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700745353,"creation_date":1700745353,"answer_id":77537184,"question_id":44494576,"body_markdown":"You could use:\r\n\r\n    spring:\r\n      jpa:\r\n          properties:\r\n            hibernate:\r\n              generate_statistics: false\r\n\r\n","title":"When does Hibernate print statistics?","body":"<p>You could use:</p>\n<pre><code>spring:\n  jpa:\n      properties:\n        hibernate:\n          generate_statistics: false\n</code></pre>\n"}],"owner":{"account_id":2036858,"reputation":1586,"user_id":1819007,"accept_rate":68,"display_name":"sudshekhar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15582,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":44495766,"answer_count":7,"score":14,"last_activity_date":1700745353,"creation_date":1497255525,"question_id":44494576,"body_markdown":"I&#39;ve recently integrated hibernate into my webapp and am trying to see the performance impact/frequency of db calls that are happening.\r\n\r\nAfter enabling `show_sql` and `generate_statistics`, when I run the application I see the sql queries run by hibernate and also hibernate statistics. Eg:\r\n\r\n    08:04:53.724 [http-apr-8080-exec-1] INFO  o.h.e.i.StatisticalLoggingSessionEventListener - Session Metrics {\r\n    85648 nanoseconds spent acquiring 1 JDBC connections;\r\n    0 nanoseconds spent releasing 0 JDBC connections;\r\n    0 nanoseconds spent preparing 0 JDBC statements;\r\n    0 nanoseconds spent executing 0 JDBC statements;\r\n    0 nanoseconds spent executing 0 JDBC batches;\r\n    0 nanoseconds spent performing 0 L2C puts;\r\n    0 nanoseconds spent performing 0 L2C hits;\r\n    0 nanoseconds spent performing 0 L2C misses;\r\n    0 nanoseconds spent executing 0 flushes (flushing a total of 0 entities and 0 collections);\r\n    0 nanoseconds spent executing 0 partial-flushes (flushing a total of 0 entities and 0 collections)\r\n    }\r\n\r\nHowever the statistics statement gets printed multiple times per api call while the query statements are much lower in number. Also, its very rare to see a non zero value for any other metric except `acquiring 1 JDBC connections` in Statistics logs.\r\n\r\nSo when exactly does the logger run and what am I doing wrong to get so many metric logs?\r\n\r\n\r\nThanks","title":"When does Hibernate print statistics?","body":"<p>I've recently integrated hibernate into my webapp and am trying to see the performance impact/frequency of db calls that are happening.</p>\n\n<p>After enabling <code>show_sql</code> and <code>generate_statistics</code>, when I run the application I see the sql queries run by hibernate and also hibernate statistics. Eg:</p>\n\n<pre><code>08:04:53.724 [http-apr-8080-exec-1] INFO  o.h.e.i.StatisticalLoggingSessionEventListener - Session Metrics {\n85648 nanoseconds spent acquiring 1 JDBC connections;\n0 nanoseconds spent releasing 0 JDBC connections;\n0 nanoseconds spent preparing 0 JDBC statements;\n0 nanoseconds spent executing 0 JDBC statements;\n0 nanoseconds spent executing 0 JDBC batches;\n0 nanoseconds spent performing 0 L2C puts;\n0 nanoseconds spent performing 0 L2C hits;\n0 nanoseconds spent performing 0 L2C misses;\n0 nanoseconds spent executing 0 flushes (flushing a total of 0 entities and 0 collections);\n0 nanoseconds spent executing 0 partial-flushes (flushing a total of 0 entities and 0 collections)\n}\n</code></pre>\n\n<p>However the statistics statement gets printed multiple times per api call while the query statements are much lower in number. Also, its very rare to see a non zero value for any other metric except <code>acquiring 1 JDBC connections</code> in Statistics logs.</p>\n\n<p>So when exactly does the logger run and what am I doing wrong to get so many metric logs?</p>\n\n<p>Thanks</p>\n"},{"tags":["javascript","java","android","reactjs","react-native"],"answers":[{"tags":[],"owner":{"account_id":283183,"reputation":9890,"user_id":580552,"accept_rate":52,"display_name":"sebastianf182"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1508728594,"creation_date":1508728594,"answer_id":46881456,"question_id":46878638,"body_markdown":"Have you tried gradle cleanBuildCache?\r\n\r\nhttps://developer.android.com/studio/build/build-cache.html#clear_the_build_cache","title":"How to clear react-native cache?","body":"<p>Have you tried gradle cleanBuildCache?</p>\n\n<p><a href=\"https://developer.android.com/studio/build/build-cache.html#clear_the_build_cache\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/build/build-cache.html#clear_the_build_cache</a></p>\n"},{"comments":[{"owner":{"account_id":7376336,"reputation":1678,"user_id":5614800,"accept_rate":44,"display_name":"Carmine Tambascia"},"score":2,"creation_date":1564478275,"post_id":51375437,"comment_id":101034938,"body_markdown":"This seems the only way possible once got stuck with errors generated from cache that has old code. Really a pain if debugging and used some &quot;console.log&quot; in the RN code. Anyone has some more shorter solution, I mean to avoid that the RN framework use cached code?","body":"This seems the only way possible once got stuck with errors generated from cache that has old code. Really a pain if debugging and used some &quot;console.log&quot; in the RN code. Anyone has some more shorter solution, I mean to avoid that the RN framework use cached code?"},{"owner":{"account_id":1182221,"reputation":322,"user_id":2942797,"display_name":"Elizandro - SparcBR"},"score":1,"creation_date":1595803315,"post_id":51375437,"comment_id":111592972,"body_markdown":"Some considerations. 1) not always $TMPDIR variable is defined. 2)  watchman command isn&#39;t always used. You can remove that part of the command or use &#39;;&#39; instead of &#39;&amp;&amp;&#39; after it 3) the dir names might differ. Mine is /tmp/metro-cache/ , not metro-bundler-cache-something...(RN 0.62)","body":"Some considerations. 1) not always $TMPDIR variable is defined. 2)  watchman command isn&#39;t always used. You can remove that part of the command or use &#39;;&#39; instead of &#39;&amp;&amp;&#39; after it 3) the dir names might differ. Mine is /tmp/metro-cache/ , not metro-bundler-cache-something...(RN 0.62)"},{"owner":{"account_id":11123445,"reputation":234,"user_id":8165679,"display_name":"O. Borcuhin"},"score":0,"creation_date":1635415462,"post_id":51375437,"comment_id":123294322,"body_markdown":"The best solution I would say","body":"The best solution I would say"}],"tags":[],"owner":{"account_id":6289296,"reputation":2656,"user_id":4887505,"accept_rate":100,"display_name":"Vikram Biwal"},"comment_count":3,"down_vote_count":0,"up_vote_count":46,"is_accepted":false,"score":46,"last_activity_date":1550821443,"creation_date":1531812033,"answer_id":51375437,"question_id":46878638,"body_markdown":"Clearing the Cache of your React Native Project:\r\n\r\nnpm &lt; 6.0 and RN &lt; 0.50:\r\n\r\n     watchman watch-del-all &amp;&amp; rm -rf $TMPDIR/react-* &amp;&amp;\r\n     rm -rf node_modules/ &amp;&amp; npm cache clean &amp;&amp; npm install &amp;&amp; \r\n     npm start -- --reset-cache\r\n\r\nnpm &gt;= 6.0 and RN &gt;= 0.50:\r\n\r\n     watchman watch-del-all &amp;&amp; rm -rf $TMPDIR/react-native-packager-cache-* &amp;&amp;\r\n     rm -rf $TMPDIR/metro-bundler-cache-* &amp;&amp; rm -rf node_modules/ &amp;&amp; npm cache clean --force &amp;&amp;\r\n     npm install &amp;&amp; npm start -- --reset-cache\r\n\r\n\r\n","title":"How to clear react-native cache?","body":"<p>Clearing the Cache of your React Native Project:</p>\n\n<p>npm &lt; 6.0 and RN &lt; 0.50:</p>\n\n<pre><code> watchman watch-del-all &amp;&amp; rm -rf $TMPDIR/react-* &amp;&amp;\n rm -rf node_modules/ &amp;&amp; npm cache clean &amp;&amp; npm install &amp;&amp; \n npm start -- --reset-cache\n</code></pre>\n\n<p>npm >= 6.0 and RN >= 0.50:</p>\n\n<pre><code> watchman watch-del-all &amp;&amp; rm -rf $TMPDIR/react-native-packager-cache-* &amp;&amp;\n rm -rf $TMPDIR/metro-bundler-cache-* &amp;&amp; rm -rf node_modules/ &amp;&amp; npm cache clean --force &amp;&amp;\n npm install &amp;&amp; npm start -- --reset-cache\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11944756,"reputation":7873,"user_id":8740349,"display_name":"Top-Master"},"score":2,"creation_date":1560247406,"post_id":52383821,"comment_id":99663993,"body_markdown":"This helped me to fix [`Error: unknown`](https://stackoverflow.com/a/56539122/8740349)","body":"This helped me to fix <a href=\"https://stackoverflow.com/a/56539122/8740349\"><code>Error: unknown</code></a>"},{"owner":{"account_id":1508198,"reputation":377,"user_id":1411059,"display_name":"MattPark"},"score":2,"creation_date":1566498132,"post_id":52383821,"comment_id":101685199,"body_markdown":"can this be done without starting the metro bundler?","body":"can this be done without starting the metro bundler?"},{"owner":{"account_id":209889,"reputation":1,"user_id":461191,"display_name":"hakki"},"score":2,"creation_date":1580393897,"post_id":52383821,"comment_id":106089415,"body_markdown":"For better approach, before this command close metro bundler and run this.","body":"For better approach, before this command close metro bundler and run this."},{"owner":{"account_id":16277147,"reputation":1139,"user_id":11754047,"display_name":"Hardik Desai"},"score":0,"creation_date":1580540230,"post_id":52383821,"comment_id":106138701,"body_markdown":"How do i only reset catch without starting npm ?","body":"How do i only reset catch without starting npm ?"},{"owner":{"account_id":5978124,"reputation":10450,"user_id":4698242,"accept_rate":53,"display_name":"kojow7"},"score":9,"creation_date":1580614510,"post_id":52383821,"comment_id":106153372,"body_markdown":"What does the `--` do?","body":"What does the <code>--</code> do?"},{"owner":{"account_id":1182221,"reputation":322,"user_id":2942797,"display_name":"Elizandro - SparcBR"},"score":15,"creation_date":1595802343,"post_id":52383821,"comment_id":111592766,"body_markdown":"@kojow7 &#39;--&#39; separate options from arguments. Everything after -- npm won&#39;t read as option and will pass along to start script  (most unix/linux commands follow this option/argument separation convention)","body":"@kojow7 &#39;--&#39; separate options from arguments. Everything after -- npm won&#39;t read as option and will pass along to start script  (most unix/linux commands follow this option/argument separation convention)"},{"owner":{"account_id":1182221,"reputation":322,"user_id":2942797,"display_name":"Elizandro - SparcBR"},"score":0,"creation_date":1597787501,"post_id":52383821,"comment_id":112246997,"body_markdown":"I use this in package.json, in section &quot;scripts&quot;: {\n\t&quot;clear&quot;: &quot;pid=$(lsof -i :8081 -a -c node -t) &amp;&amp; kill $pid; rm -rf $TMPDIR/metro-*; npm start -- --reset-cache&quot;,","body":"I use this in package.json, in section &quot;scripts&quot;: { \t&quot;clear&quot;: &quot;pid=$(lsof -i :8081 -a -c node -t) &amp;&amp; kill $pid; rm -rf $TMPDIR/metro-*; npm start -- --reset-cache&quot;,"},{"owner":{"account_id":5501555,"reputation":165,"user_id":4370751,"display_name":"ModusPwnens"},"score":0,"creation_date":1615332224,"post_id":52383821,"comment_id":117657707,"body_markdown":"Awesome, helped me fix issue:\nhttps://github.com/software-mansion/react-native-reanimated/issues/1798","body":"Awesome, helped me fix issue: <a href=\"https://github.com/software-mansion/react-native-reanimated/issues/1798\" rel=\"nofollow noreferrer\">github.com/software-mansion/react-native-reanimated/issues/1&zwnj;&#8203;798</a>"},{"owner":{"account_id":11664183,"reputation":61,"user_id":8541386,"display_name":"Haris"},"score":0,"creation_date":1654281327,"post_id":52383821,"comment_id":128061868,"body_markdown":"it opens metro and stops there, then nothing happens","body":"it opens metro and stops there, then nothing happens"},{"owner":{"account_id":24907300,"reputation":710,"user_id":18777212,"display_name":"hayata_suenaga"},"score":0,"creation_date":1675816091,"post_id":52383821,"comment_id":133009095,"body_markdown":"Does this clean `node_modules`, `ios/build`, `ios/Pods`, and `android/build`?","body":"Does this clean <code>node_modules</code>, <code>ios&#47;build</code>, <code>ios&#47;Pods</code>, and <code>android&#47;build</code>?"}],"tags":[],"owner":{"account_id":10283972,"reputation":2070,"user_id":9798214,"display_name":"Haris Anwar"},"comment_count":10,"down_vote_count":2,"up_vote_count":181,"is_accepted":false,"score":179,"last_activity_date":1537265492,"creation_date":1537264339,"answer_id":52383821,"question_id":46878638,"body_markdown":"For React Native Init approach (without expo) use:\r\n\r\n    npm start -- --reset-cache","title":"How to clear react-native cache?","body":"<p>For React Native Init approach (without expo) use:</p>\n\n<pre><code>npm start -- --reset-cache\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1078395,"reputation":184,"user_id":1076047,"accept_rate":0,"display_name":"Abhishek Nalwaya"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1546589895,"creation_date":1546589895,"answer_id":54035288,"question_id":46878638,"body_markdown":"You can clean cache in React Native &gt;= 0.50 and npm &gt; 5 :\r\n\r\n    watchman watch-del-all &amp;&amp; \r\n    rm -rf $TMPDIR/react-native-packager-cache-* &amp;&amp;\r\n    rm -rf $TMPDIR/metro-bundler-cache-* &amp;&amp; \r\n    rm -rf node_modules/ \r\n    &amp;&amp; npm cache clean --force &amp;&amp;\r\n    npm install &amp;&amp; \r\n    npm start -- --reset-cache\r\n\r\nApart from cleaning npm cache you might need to [reset simulator or clean build][1] etc.\r\n\r\n\r\n  [1]: https://medium.com/@abhisheknalwaya/how-to-clear-react-native-cache-c435c258834e","title":"How to clear react-native cache?","body":"<p>You can clean cache in React Native >= 0.50 and npm > 5 :</p>\n\n<pre><code>watchman watch-del-all &amp;&amp; \nrm -rf $TMPDIR/react-native-packager-cache-* &amp;&amp;\nrm -rf $TMPDIR/metro-bundler-cache-* &amp;&amp; \nrm -rf node_modules/ \n&amp;&amp; npm cache clean --force &amp;&amp;\nnpm install &amp;&amp; \nnpm start -- --reset-cache\n</code></pre>\n\n<p>Apart from cleaning npm cache you might need to <a href=\"https://medium.com/@abhisheknalwaya/how-to-clear-react-native-cache-c435c258834e\" rel=\"nofollow noreferrer\">reset simulator or clean build</a> etc.</p>\n"},{"tags":[],"owner":{"account_id":4722238,"reputation":1596,"user_id":3819810,"accept_rate":42,"display_name":"Mohsin"},"comment_count":0,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1546594085,"creation_date":1546594085,"answer_id":54036153,"question_id":46878638,"body_markdown":"For those who are using expo-cli\r\n\r\n&gt; expo start -c\r\n","title":"How to clear react-native cache?","body":"<p>For those who are using expo-cli</p>\n\n<blockquote>\n  <p>expo start -c</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":50191,"reputation":7039,"user_id":149615,"accept_rate":76,"display_name":"Rob"},"score":15,"creation_date":1601912817,"post_id":56644902,"comment_id":113546922,"body_markdown":"No need to remove your yarn.lock file you&#39;ll cause all your dependencies to be updated in the process.","body":"No need to remove your yarn.lock file you&#39;ll cause all your dependencies to be updated in the process."},{"owner":{"account_id":1063836,"reputation":6001,"user_id":1064869,"accept_rate":94,"display_name":"sooper"},"score":1,"creation_date":1646411957,"post_id":56644902,"comment_id":126124108,"body_markdown":"Same with the podfile.lock, shouldn&#39;t be removed","body":"Same with the podfile.lock, shouldn&#39;t be removed"}],"tags":[],"owner":{"account_id":6616659,"reputation":1959,"user_id":5109625,"display_name":"Firoz Ahmed"},"comment_count":2,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1641452816,"creation_date":1560846802,"answer_id":56644902,"question_id":46878638,"body_markdown":"This is what works for me:\r\n\r\n    watchman watch-del-all &amp;&amp; rm -f podfile.lock &amp;&amp; rm -rf node_modules &amp;&amp; yarn &amp;&amp; yarn start --reset-cache","title":"How to clear react-native cache?","body":"<p>This is what works for me:</p>\n<pre><code>watchman watch-del-all &amp;&amp; rm -f podfile.lock &amp;&amp; rm -rf node_modules &amp;&amp; yarn &amp;&amp; yarn start --reset-cache\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9879674,"reputation":1096,"user_id":7316181,"display_name":"spacedev"},"comment_count":0,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1562584850,"creation_date":1562584850,"answer_id":56933829,"question_id":46878638,"body_markdown":"try this\r\n\r\n    react-native start --reset-cache\r\n\r\n","title":"How to clear react-native cache?","body":"<p>try this</p>\n\n<pre><code>react-native start --reset-cache\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7373604,"reputation":681,"user_id":5613054,"display_name":"Jack Wire"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564175807,"creation_date":1564175807,"answer_id":57227113,"question_id":46878638,"body_markdown":"I had a similar problem, I tried to clear all the caches possible (tried almost all the solutions above) and the only thing that worked for me was to kill the expo app and to restart it.","title":"How to clear react-native cache?","body":"<p>I had a similar problem, I tried to clear all the caches possible (tried almost all the solutions above) and the only thing that worked for me was to kill the expo app and to restart it.</p>\n"},{"tags":[],"owner":{"account_id":304520,"reputation":6057,"user_id":614065,"accept_rate":88,"display_name":"Olcay Ertaş"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1582724370,"creation_date":1582724370,"answer_id":60415243,"question_id":46878638,"body_markdown":"If you are using `WebStorm`, press configuration selection drop down button left of the run button and select edit configurations:\r\n\r\n[![edit configurations][1]][1]\r\n\r\nDouble click on `Start React Native Bundler` at bottom in `Before launch` section:\r\n\r\n[![before launch][2]][2]\r\n\r\nEnter `--reset-cache` to `Arguments` section:\r\n\r\n[![arguments][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5Ypl1.png\r\n  [2]: https://i.stack.imgur.com/13Bq3.png\r\n  [3]: https://i.stack.imgur.com/3vaAR.png","title":"How to clear react-native cache?","body":"<p>If you are using <code>WebStorm</code>, press configuration selection drop down button left of the run button and select edit configurations:</p>\n\n<p><a href=\"https://i.stack.imgur.com/5Ypl1.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5Ypl1.png\" alt=\"edit configurations\"></a></p>\n\n<p>Double click on <code>Start React Native Bundler</code> at bottom in <code>Before launch</code> section:</p>\n\n<p><a href=\"https://i.stack.imgur.com/13Bq3.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/13Bq3.png\" alt=\"before launch\"></a></p>\n\n<p>Enter <code>--reset-cache</code> to <code>Arguments</code> section:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3vaAR.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/3vaAR.png\" alt=\"arguments\"></a></p>\n"},{"comments":[{"owner":{"account_id":13408402,"reputation":2442,"user_id":9675721,"display_name":"Raphael Pinel"},"score":4,"creation_date":1620989448,"post_id":61904215,"comment_id":119366392,"body_markdown":"If I try `rm -rf /tmp/metro-*` I get `zsh: no matches found: /tmp/metro-*` I am using RN 0.64.1. Any idea?","body":"If I try <code>rm -rf &#47;tmp&#47;metro-*</code> I get <code>zsh: no matches found: &#47;tmp&#47;metro-*</code> I am using RN 0.64.1. Any idea?"},{"owner":{"account_id":14550776,"reputation":111,"user_id":10509723,"display_name":"Roman Akash"},"score":0,"creation_date":1685305064,"post_id":61904215,"comment_id":134639707,"body_markdown":"Escaping the star seems to work `rm -rf /tmp/metro-\\*`","body":"Escaping the star seems to work <code>rm -rf &#47;tmp&#47;metro-\\*</code>"}],"tags":[],"owner":{"account_id":17674896,"reputation":81,"user_id":13144771,"display_name":"Fabricio Cunha"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1589943407,"creation_date":1589942823,"answer_id":61904215,"question_id":46878638,"body_markdown":"Clearing the Cache of your React Native Project:\r\nif you are sure the module exists, try this steps:\r\n\r\n1. Clear watchman watches:\r\nnpm watchman watch-del-all\r\n2. Delete node_modules:\r\nrm -rf node_modules and run yarn install\r\n3. Reset Metro&#39;s cache:\r\nyarn start --reset-cache\r\n4. Remove the cache: rm -rf /tmp/metro-*\r\n","title":"How to clear react-native cache?","body":"<p>Clearing the Cache of your React Native Project:\nif you are sure the module exists, try this steps:</p>\n\n<ol>\n<li>Clear watchman watches:\nnpm watchman watch-del-all</li>\n<li>Delete node_modules:\nrm -rf node_modules and run yarn install</li>\n<li>Reset Metro's cache:\nyarn start --reset-cache</li>\n<li>Remove the cache: rm -rf /tmp/metro-*</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":17095092,"reputation":516,"user_id":12370254,"display_name":"Glitch_Znab"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1590115313,"creation_date":1590112239,"answer_id":61946607,"question_id":46878638,"body_markdown":"Here&#39;s a great discussion on GitHub which helped me a lot.\r\n[Clearing the Cache of your React Native Project][1] by [Jarret Moses][2]\r\n\r\nThere are solutions for 4 different instances.\r\n\r\n \r\n\r\n 1. RN &lt;0.50 -  \r\n`watchman watch-del-all &amp;&amp; rm -rf $TMPDIR/react-* &amp;&amp; rm -rf node_modules/ &amp;&amp; npm cache clean &amp;&amp; npm install &amp;&amp; npm start -- --reset-cache`\r\n\r\n 2. RN &gt;=0.50 - \r\n`watchman watch-del-all &amp;&amp; rm -rf $TMPDIR/react-native-packager-cache-* &amp;&amp; rm -rf $TMPDIR/metro-bundler-cache-* &amp;&amp; rm -rf node_modules/ &amp;&amp; npm cache clean &amp;&amp; npm install &amp;&amp; npm start -- --reset-cache`\r\n 3. NPM &gt;=5 - \r\n`watchman watch-del-all &amp;&amp; rm -rf $TMPDIR/react-* &amp;&amp; rm -rf node_modules/ &amp;&amp; npm cache verify &amp;&amp; npm install &amp;&amp; npm start -- --reset-cache`\r\n 4. Windows - \r\n`del %appdata%\\Temp\\react-native-* &amp; cd android &amp; gradlew clean &amp; cd .. &amp; del node_modules/ &amp; npm cache clean --force &amp; npm install &amp; npm start -- --reset-cache`\r\n \r\n\r\n\r\nThe solution is similar to [Vikram Biwal&#39;s Answer.][3]\r\n\r\nAnd there is a discussion below in the given link, so even if the above 4 cases don&#39;t work for you, you can scroll through and find a possible solution.\r\n\r\n\r\n  [1]: https://gist.github.com/jarretmoses/c2e4786fd342b3444f3bc6beff32098d\r\n  [2]: https://gist.github.com/jarretmoses\r\n  [3]: https://stackoverflow.com/questions/46878638/how-to-clear-react-native-cache/51375437#51375437","title":"How to clear react-native cache?","body":"<p>Here's a great discussion on GitHub which helped me a lot.\n<a href=\"https://gist.github.com/jarretmoses/c2e4786fd342b3444f3bc6beff32098d\" rel=\"noreferrer\">Clearing the Cache of your React Native Project</a> by <a href=\"https://gist.github.com/jarretmoses\" rel=\"noreferrer\">Jarret Moses</a></p>\n\n<p>There are solutions for 4 different instances.</p>\n\n<ol>\n<li><p>RN &lt;0.50 -<br>\n<code>watchman watch-del-all &amp;&amp; rm -rf $TMPDIR/react-* &amp;&amp; rm -rf node_modules/ &amp;&amp; npm cache clean &amp;&amp; npm install &amp;&amp; npm start -- --reset-cache</code></p></li>\n<li><p>RN >=0.50 - \n<code>watchman watch-del-all &amp;&amp; rm -rf $TMPDIR/react-native-packager-cache-* &amp;&amp; rm -rf $TMPDIR/metro-bundler-cache-* &amp;&amp; rm -rf node_modules/ &amp;&amp; npm cache clean &amp;&amp; npm install &amp;&amp; npm start -- --reset-cache</code></p></li>\n<li>NPM >=5 - \n<code>watchman watch-del-all &amp;&amp; rm -rf $TMPDIR/react-* &amp;&amp; rm -rf node_modules/ &amp;&amp; npm cache verify &amp;&amp; npm install &amp;&amp; npm start -- --reset-cache</code></li>\n<li>Windows - \n<code>del %appdata%\\Temp\\react-native-* &amp; cd android &amp; gradlew clean &amp; cd .. &amp; del node_modules/ &amp; npm cache clean --force &amp; npm install &amp; npm start -- --reset-cache</code></li>\n</ol>\n\n<p>The solution is similar to <a href=\"https://stackoverflow.com/questions/46878638/how-to-clear-react-native-cache/51375437#51375437\">Vikram Biwal's Answer.</a></p>\n\n<p>And there is a discussion below in the given link, so even if the above 4 cases don't work for you, you can scroll through and find a possible solution.</p>\n"},{"comments":[{"owner":{"account_id":10026300,"reputation":3068,"user_id":7414387,"display_name":"Leonard"},"score":8,"creation_date":1606126557,"post_id":62503701,"comment_id":114856185,"body_markdown":"I get &quot;error: unknown option `--reset-cache&#39;&quot; what should I do...?","body":"I get &quot;error: unknown option `--reset-cache&#39;&quot; what should I do...?"},{"owner":{"account_id":5631785,"reputation":2333,"user_id":4458531,"accept_rate":91,"display_name":"NineCattoRules"},"score":4,"creation_date":1641375707,"post_id":62503701,"comment_id":124786150,"body_markdown":"@Leonard try with `yarn cache clean`","body":"@Leonard try with <code>yarn cache clean</code>"}],"tags":[],"owner":{"account_id":11445556,"reputation":10075,"user_id":8389576,"display_name":"Balaji"},"comment_count":2,"down_vote_count":0,"up_vote_count":127,"is_accepted":false,"score":127,"last_activity_date":1592769171,"creation_date":1592769171,"answer_id":62503701,"question_id":46878638,"body_markdown":"Simplest one(react native,npm and expo )\r\n\r\nFor React Native \r\n\r\n    react-native start --reset-cache\r\n\r\nfor npm\r\n\r\n    npm start -- --reset-cache\r\n\r\nfor Expo\r\n\r\n    expo start -c","title":"How to clear react-native cache?","body":"<p>Simplest one(react native,npm and expo )</p>\n<p>For React Native</p>\n<pre><code>react-native start --reset-cache\n</code></pre>\n<p>for npm</p>\n<pre><code>npm start -- --reset-cache\n</code></pre>\n<p>for Expo</p>\n<pre><code>expo start -c\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14626015,"reputation":579,"user_id":10563344,"display_name":"Eddie Lam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600428950,"creation_date":1600428950,"answer_id":63955017,"question_id":46878638,"body_markdown":"I went into this issue today, too. The cause was kinda silly -- `vscode` auto imported something from `express-validator` and caused the bug. &lt;br&gt;\r\n&lt;br&gt;\r\nJust mentioning this in case anyone has done all the steps to clear cache/ delete modules or what not.","title":"How to clear react-native cache?","body":"<p>I went into this issue today, too. The cause was kinda silly -- <code>vscode</code> auto imported something from <code>express-validator</code> and caused the bug. <br>\n<br>\nJust mentioning this in case anyone has done all the steps to clear cache/ delete modules or what not.</p>\n"},{"comments":[{"owner":{"account_id":770275,"reputation":1079,"user_id":808870,"accept_rate":83,"display_name":"Robert Dundon"},"score":0,"creation_date":1698340155,"post_id":65677206,"comment_id":136396278,"body_markdown":"This helped on an Expo (based on React Native) project that was having problems.","body":"This helped on an Expo (based on React Native) project that was having problems."}],"tags":[],"owner":{"account_id":15541518,"reputation":13537,"user_id":11212074,"display_name":"hong developer"},"comment_count":1,"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1686163922,"creation_date":1610418306,"answer_id":65677206,"question_id":46878638,"body_markdown":"Currently, it is built using `npx`, so it needs to be updated.\r\n\r\n**Terminal** : `npx react-native start --reset-cache`\r\n\r\n**iOS** : `Xcode -&gt; Product -&gt; Clean Build Folder`\r\n\r\n**Android** : `Android Studio -&gt; Build -&gt; Clean Project`","title":"How to clear react-native cache?","body":"<p>Currently, it is built using <code>npx</code>, so it needs to be updated.</p>\n<p><strong>Terminal</strong> : <code>npx react-native start --reset-cache</code></p>\n<p><strong>iOS</strong> : <code>Xcode -&gt; Product -&gt; Clean Build Folder</code></p>\n<p><strong>Android</strong> : <code>Android Studio -&gt; Build -&gt; Clean Project</code></p>\n"},{"tags":[],"owner":{"account_id":7623557,"reputation":291,"user_id":5780831,"display_name":"mmafrar"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1619087481,"creation_date":1619087481,"answer_id":67211500,"question_id":46878638,"body_markdown":"Below commands worked for me for Android and Yarn,\r\n\r\n    cd android &amp;&amp; ./gradlew cleanBuildCache &amp;&amp; cd .. &amp;&amp;\r\n    watchman watch-del-all &amp;&amp; rm -rf node_modules/ &amp;&amp;\r\n    rm -rf $TMPDIR/react-native-packager-cache-* &amp;&amp;\r\n    rm -rf $TMPDIR/metro-bundler-cache-* &amp;&amp;  \r\n    yarn cache clean &amp;&amp; yarn install &amp;&amp; \r\n    yarn start --reset-cache","title":"How to clear react-native cache?","body":"<p>Below commands worked for me for Android and Yarn,</p>\n<pre><code>cd android &amp;&amp; ./gradlew cleanBuildCache &amp;&amp; cd .. &amp;&amp;\nwatchman watch-del-all &amp;&amp; rm -rf node_modules/ &amp;&amp;\nrm -rf $TMPDIR/react-native-packager-cache-* &amp;&amp;\nrm -rf $TMPDIR/metro-bundler-cache-* &amp;&amp;  \nyarn cache clean &amp;&amp; yarn install &amp;&amp; \nyarn start --reset-cache\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19602810,"reputation":99,"user_id":14347216,"display_name":"Code Drop"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1630439199,"creation_date":1630439199,"answer_id":69004563,"question_id":46878638,"body_markdown":"Well.. i want to share my experience about this issue: \r\n\r\nI was facing this problem, and when I opened the task manager I notice many tasks being executed, and they were linked to my project folder.\r\n\r\nSo I restarted my PC, and when it turned on, I could install all I needed, so the problem got solved itself, it worked to me, hope this help somebody...","title":"How to clear react-native cache?","body":"<p>Well.. i want to share my experience about this issue:</p>\n<p>I was facing this problem, and when I opened the task manager I notice many tasks being executed, and they were linked to my project folder.</p>\n<p>So I restarted my PC, and when it turned on, I could install all I needed, so the problem got solved itself, it worked to me, hope this help somebody...</p>\n"},{"tags":[],"owner":{"account_id":4196640,"reputation":11746,"user_id":3437900,"accept_rate":76,"display_name":"Shiva"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1637586375,"creation_date":1637586375,"answer_id":70066243,"question_id":46878638,"body_markdown":"### TO Clear cache in IOS/Xcode\r\n\r\n Delete folders in \r\n`  /Users/{YOUR_USERNAME}/Library/Developer/Xcode/DerivedData/`\r\nand try again.\r\n\r\n    rm ~/Library/Developer/Xcode/DerivedData/* ","title":"How to clear react-native cache?","body":"<h3>TO Clear cache in IOS/Xcode</h3>\n<p>Delete folders in\n<code>  /Users/{YOUR_USERNAME}/Library/Developer/Xcode/DerivedData/</code>\nand try again.</p>\n<pre><code>rm ~/Library/Developer/Xcode/DerivedData/* \n</code></pre>\n"},{"tags":[],"owner":{"account_id":15424156,"reputation":8990,"user_id":11127383,"display_name":"Daniel Danielecki"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1647246639,"creation_date":1647246639,"answer_id":71464874,"question_id":46878638,"body_markdown":"Run in your terminal: `expo prebuild --clean`","title":"How to clear react-native cache?","body":"<p>Run in your terminal: <code>expo prebuild --clean</code></p>\n"},{"tags":[],"owner":{"account_id":23888517,"reputation":301,"user_id":17888442,"display_name":"Saif Mohmd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668778728,"creation_date":1661723678,"answer_id":73522544,"question_id":46878638,"body_markdown":"For android and Npm\r\n\r\n``` cd android &amp;&amp; ./gradlew cleanBuildCache &amp;&amp; cd .. &amp;&amp;\r\nwatchman watch-del-all &amp;&amp; rm -rf node_modules/ &amp;&amp;\r\nrm -rf $TMPDIR/react-native-packager-cache-* &amp;&amp;\r\nrm -rf $TMPDIR/metro-bundler-cache-* &amp;&amp;  \r\nnpm cache clean &amp;&amp; yarn install &amp;&amp; \r\nnpm start --reset-cache","title":"How to clear react-native cache?","body":"<p>For android and Npm</p>\n<pre><code>watchman watch-del-all &amp;&amp; rm -rf node_modules/ &amp;&amp;\nrm -rf $TMPDIR/react-native-packager-cache-* &amp;&amp;\nrm -rf $TMPDIR/metro-bundler-cache-* &amp;&amp;  \nnpm cache clean &amp;&amp; yarn install &amp;&amp; \nnpm start --reset-cache\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24276306,"reputation":86,"user_id":18223566,"display_name":"Rushikesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1667307897,"creation_date":1667306834,"answer_id":74276190,"question_id":46878638,"body_markdown":"React native\r\n\r\n  \r\n\r\n     npm start -r-cache\r\nor \r\n\r\n    yarn cache clean\r\n\r\nExpo \r\n\r\n    expo start -c","title":"How to clear react-native cache?","body":"<p>React native</p>\n<pre><code> npm start -r-cache\n</code></pre>\n<p>or</p>\n<pre><code>yarn cache clean\n</code></pre>\n<p>Expo</p>\n<pre><code>expo start -c\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10491815,"reputation":26310,"user_id":7733418,"display_name":"Yunnosch"},"score":0,"creation_date":1675411665,"post_id":75332973,"comment_id":132927224,"body_markdown":"Please [edit] to make the relevant technical difference, or appreciated contibution in explanation, more obvious which this provides beyond the existing answers; because the core steps seem very similar to me. Note that linked content is not considered part of the answer post here.","body":"Please <a href=\"https://stackoverflow.com/posts/75332973/edit\">edit</a> to make the relevant technical difference, or appreciated contibution in explanation, more obvious which this provides beyond the existing answers; because the core steps seem very similar to me. Note that linked content is not considered part of the answer post here."}],"tags":[],"owner":{"account_id":25333752,"reputation":451,"user_id":19153194,"display_name":"Vaishnavi Maske"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675411495,"creation_date":1675411495,"answer_id":75332973,"question_id":46878638,"body_markdown":"npm start -- --reset-cache\r\n\r\nClean build cache \r\n\r\n\r\ncd android &amp;&amp; ./gradlew cleanBuildCache\r\n\r\nhttps://medium.com/@abhisheknalwaya/how-to-clear-react-native-cache-c435c258834e","title":"How to clear react-native cache?","body":"<p>npm start -- --reset-cache</p>\n<p>Clean build cache</p>\n<p>cd android &amp;&amp; ./gradlew cleanBuildCache</p>\n<p><a href=\"https://medium.com/@abhisheknalwaya/how-to-clear-react-native-cache-c435c258834e\" rel=\"nofollow noreferrer\">https://medium.com/@abhisheknalwaya/how-to-clear-react-native-cache-c435c258834e</a></p>\n"},{"tags":[],"owner":{"account_id":22516601,"reputation":849,"user_id":16710738,"display_name":"Deepak Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680611810,"creation_date":1680604910,"answer_id":75928396,"question_id":46878638,"body_markdown":"Consider using the below code for a clean ios build:\r\n\r\n    cd ios &amp;&amp; xcodebuild clean &amp;&amp; cd .. &amp;&amp; npm run ios\r\n\r\n","title":"How to clear react-native cache?","body":"<p>Consider using the below code for a clean ios build:</p>\n<pre><code>cd ios &amp;&amp; xcodebuild clean &amp;&amp; cd .. &amp;&amp; npm run ios\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8044443,"reputation":520,"user_id":6065048,"display_name":"Matt Fleming"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695869849,"creation_date":1695276205,"answer_id":77147544,"question_id":46878638,"body_markdown":"Here&#39;s some cache cleaning scripts to add to your package.json. It includes a &#39;secret-cache&#39; workaround to clear a cache that is missed by `react-native clean`.\r\n\r\nThey will clean all the build &amp; react-native caches, but not the package or pod caches, which is usually what you want.\r\n\r\n```js\r\n    &quot;clean:gradle&quot;: &quot;cd android &amp;&amp; ./gradlew --stop; rm -rf ~/.gradle/caches/*&quot;,\r\n    &quot;clean:android&quot;: &quot;yarn clean:secret-cache &amp;&amp; react-native clean --include android,metro,watchman&quot;,\r\n    &quot;clean:ios&quot;: &quot;yarn clean:secret-cache &amp;&amp; react-native clean --include metro,watchman &amp;&amp; cd ios &amp;&amp; xattr -w com.apple.xcode.CreatedByBuildSystem true build &amp;&amp; xcodebuild clean; cd ..&quot;,\r\n    &quot;clean:secret-cache&quot;: &quot;npx react-native start --reset-cache --projectRoot null 1&gt;/dev/null 2&gt;&amp;1 || true&quot;,\r\n```\r\n\r\nThe &#39;secret-cache&#39; script will allow your .env updates to work even if you experience the react native dotenv cache bug:\r\nhttps://github.com/goatandsheep/react-native-dotenv#cacheing\r\n\r\nAdd them to package.json then `yarn clean:ios &amp;&amp; yarn ios` or `yarn clean:android &amp;&amp; yarn android`\r\n\r\nIn some cases this may still not be enough (e.g. react-native-auth0 still caches auth0Domain). So here&#39;s the nuclear option (requires package.json updates above):\r\n\r\n```sh\r\n# Nuclear option (100% definitely clean everything) - go get a coffee or something\r\nyarn clean:secret-cache &amp;&amp; npx react-native clean-project-auto &amp;&amp; yarn clean:gradle &amp;&amp; yarn &amp;&amp; cd android &amp;&amp; ./gradlew assemble\r\n```\r\n","title":"How to clear react-native cache?","body":"<p>Here's some cache cleaning scripts to add to your package.json. It includes a 'secret-cache' workaround to clear a cache that is missed by <code>react-native clean</code>.</p>\n<p>They will clean all the build &amp; react-native caches, but not the package or pod caches, which is usually what you want.</p>\n<pre class=\"lang-js prettyprint-override\"><code>    &quot;clean:gradle&quot;: &quot;cd android &amp;&amp; ./gradlew --stop; rm -rf ~/.gradle/caches/*&quot;,\n    &quot;clean:android&quot;: &quot;yarn clean:secret-cache &amp;&amp; react-native clean --include android,metro,watchman&quot;,\n    &quot;clean:ios&quot;: &quot;yarn clean:secret-cache &amp;&amp; react-native clean --include metro,watchman &amp;&amp; cd ios &amp;&amp; xattr -w com.apple.xcode.CreatedByBuildSystem true build &amp;&amp; xcodebuild clean; cd ..&quot;,\n    &quot;clean:secret-cache&quot;: &quot;npx react-native start --reset-cache --projectRoot null 1&gt;/dev/null 2&gt;&amp;1 || true&quot;,\n</code></pre>\n<p>The 'secret-cache' script will allow your .env updates to work even if you experience the react native dotenv cache bug:\n<a href=\"https://github.com/goatandsheep/react-native-dotenv#cacheing\" rel=\"nofollow noreferrer\">https://github.com/goatandsheep/react-native-dotenv#cacheing</a></p>\n<p>Add them to package.json then <code>yarn clean:ios &amp;&amp; yarn ios</code> or <code>yarn clean:android &amp;&amp; yarn android</code></p>\n<p>In some cases this may still not be enough (e.g. react-native-auth0 still caches auth0Domain). So here's the nuclear option (requires package.json updates above):</p>\n<pre class=\"lang-bash prettyprint-override\"><code># Nuclear option (100% definitely clean everything) - go get a coffee or something\nyarn clean:secret-cache &amp;&amp; npx react-native clean-project-auto &amp;&amp; yarn clean:gradle &amp;&amp; yarn &amp;&amp; cd android &amp;&amp; ./gradlew assemble\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11682536,"reputation":956,"user_id":8553678,"display_name":"karim elsaidy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695276529,"creation_date":1695276529,"answer_id":77147570,"question_id":46878638,"body_markdown":" - android\r\n cd android &amp;&amp; ./gradlew clean\r\n - ios\r\n open xcode then choose product =&gt; clear all issue and clean build folder\r\n\r\nthen yarn start --reset-cache\r\n","title":"How to clear react-native cache?","body":"<ul>\n<li>android\ncd android &amp;&amp; ./gradlew clean</li>\n<li>ios\nopen xcode then choose product =&gt; clear all issue and clean build folder</li>\n</ul>\n<p>then yarn start --reset-cache</p>\n"},{"tags":[],"owner":{"account_id":17750035,"reputation":551,"user_id":13348408,"display_name":"Roman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700745152,"creation_date":1698059575,"answer_id":77344697,"question_id":46878638,"body_markdown":"For React Native &gt; v0.7 (without expo) use:\r\n\r\n    watchman watch-del-all\r\n    rm -rf yarn.lock package-lock.json node_modules\r\n    rm -rf android/app/build\r\n    rm ios/Pods ios/Podfile.lock\r\n    rm -rf ~/Library/Developer/Xcode/DerivedData\r\n    $TMPDIR/react-native-packager-cache-* $ rm -rf $TMPDIR/metro-bundler-cache-*\r\n    npm install &amp;&amp; cd ios &amp;&amp; pod update &amp;&amp; cd ..\r\n    cd android &amp;&amp; ./gradlew clean &amp;&amp; cd ..\r\n    npm start --reset-cache","title":"How to clear react-native cache?","body":"<p>For React Native &gt; v0.7 (without expo) use:</p>\n<pre><code>watchman watch-del-all\nrm -rf yarn.lock package-lock.json node_modules\nrm -rf android/app/build\nrm ios/Pods ios/Podfile.lock\nrm -rf ~/Library/Developer/Xcode/DerivedData\n$TMPDIR/react-native-packager-cache-* $ rm -rf $TMPDIR/metro-bundler-cache-*\nnpm install &amp;&amp; cd ios &amp;&amp; pod update &amp;&amp; cd ..\ncd android &amp;&amp; ./gradlew clean &amp;&amp; cd ..\nnpm start --reset-cache\n</code></pre>\n"}],"owner":{"account_id":5926657,"reputation":19289,"user_id":4662347,"accept_rate":72,"display_name":"Ville Miekk-oja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":584018,"favorite_count":0,"down_vote_count":0,"up_vote_count":166,"answer_count":25,"score":166,"last_activity_date":1700745152,"creation_date":1508702800,"question_id":46878638,"body_markdown":"In react-native development, there are multiple caches used when the app is built:\n\n1. React-native packager cache\n2. Emulator cache\n3. Java side cache (.gradle) folder (only in android)\n4. npm cache (if relevant?)\n\nAm I missing something also? Because I&#39;m trying to clear cache in react-native, to be able to repeat a bug that only occurs on first usage. But clearing those caches above did not help. This is on android. When the app is building, most of the rows DO NOT say UP-TO-DATE, as expected, because I cleared the cache.\n\nBut, there are still many rows where this text is printed. Like:\n\n&gt; app:preBuild UP-TO-DATE\n&gt;\n&gt; app:preDebugBuild UP-TO-DATE\n&gt;\n&gt; :app:preReleaseBuild UP-TO-DATE\n\n\nThe question is, how can I clear the whole cache related to react-native development?","title":"How to clear react-native cache?","body":"<p>In react-native development, there are multiple caches used when the app is built:</p>\n<ol>\n<li>React-native packager cache</li>\n<li>Emulator cache</li>\n<li>Java side cache (.gradle) folder (only in android)</li>\n<li>npm cache (if relevant?)</li>\n</ol>\n<p>Am I missing something also? Because I'm trying to clear cache in react-native, to be able to repeat a bug that only occurs on first usage. But clearing those caches above did not help. This is on android. When the app is building, most of the rows DO NOT say UP-TO-DATE, as expected, because I cleared the cache.</p>\n<p>But, there are still many rows where this text is printed. Like:</p>\n<blockquote>\n<p>app:preBuild UP-TO-DATE</p>\n<p>app:preDebugBuild UP-TO-DATE</p>\n<p>:app:preReleaseBuild UP-TO-DATE</p>\n</blockquote>\n<p>The question is, how can I clear the whole cache related to react-native development?</p>\n"},{"tags":["java","spring","spring-boot"],"owner":{"account_id":9885814,"reputation":1371,"user_id":7320372,"display_name":"Thomas Lang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":0,"score":-1,"last_activity_date":1700744881,"creation_date":1700744881,"question_id":77537145,"body_markdown":"I have this async code:\r\n```\r\nprivate CompletableFuture&lt;Boolean&gt; createAndMergeAndUploadOffer(OfferDto offer, Locale locale) {\r\n        return this.offerTemplatingService.prepareHtmlViewForDocument(offer, locale)\r\n                .thenApply(htmlContent -&gt; documentService.generatePdfDocumentFromHtml(htmlContent, ASSETS))\r\n                .thenCombine(CompletableFuture.supplyAsync(() -&gt; this.gbtService.readGbtDocument(locale)),\r\n                        this::mergeDocuments)\r\n                .thenCompose(result -&gt; jiraConnectorService.uploadAttachment(documentNameGenerator\r\n                        .apply(new DocumentInformation(DocumentType.OFFER,\r\n                                offer.getIssueKey(), EXTENSION)), offer.getIssueKey(), result));\r\n    }\r\n```\r\n\r\nThis does the following:\r\n\r\n - render a html offer document\r\n - generate a pdf out of this html template\r\n - fetch a pdf file from an external service\r\n - merge both pdf documents\r\n - upload the merged pdf document to a JIRA api\r\n\r\nFor this i use the following ThreadPoolTaskExecutor:\r\n\r\n```java\r\n@Bean\r\n    Executor executor() {    \r\n        ThreadPoolTaskExecutor threadPoolTaskExecutor = new ThreadPoolTaskExecutor();\r\n        threadPoolTaskExecutor.setCorePoolSize(4);\r\n        threadPoolTaskExecutor.setMaxPoolSize(4);\r\n        threadPoolTaskExecutor.setQueueCapacity(50);\r\n        // by setting core and max to the same value - we use a fixed thread pool\r\n        threadPoolTaskExecutor.setRejectedExecutionHandler(this.createRejectionHandler());\r\n        threadPoolTaskExecutor.setAllowCoreThreadTimeOut(true);\r\n        threadPoolTaskExecutor.initialize();\r\n\r\n        log.info(&quot;Using a dedicated ThreadPoolTaskExecutor bean with a core pool size of {} and a max pool size of {} ...&quot;,\r\n                threadPoolTaskExecutor.getCorePoolSize(), threadPoolTaskExecutor.getMaxPoolSize());\r\n        return new DelegatingSecurityContextAsyncTaskExecutor(threadPoolTaskExecutor);\r\n    }\r\n\r\n```\r\n\r\nWhen i run the code above (createAndMergeAndUploadOffer) i get an AsyncRequestTimeoutException ... After further investigation i became aware of the problem that the task for uploading the document via Spring&#180;s RestTemplate is somehow not submitted resulting in this above exception.\r\n\r\nPlease note:  \r\n\r\nWhen i update the ThreadPoolTaskExecutor the following:\r\n```java\r\nthreadPoolTaskExecutor.setCorePoolSize(8);\r\nthreadPoolTaskExecutor.setMaxPoolSize(8);\r\n```\r\nit works?\r\n\r\nWhat is the issue here?","title":"Thread pool stops accepting tasks","body":"<p>I have this async code:</p>\n<pre><code>private CompletableFuture&lt;Boolean&gt; createAndMergeAndUploadOffer(OfferDto offer, Locale locale) {\n        return this.offerTemplatingService.prepareHtmlViewForDocument(offer, locale)\n                .thenApply(htmlContent -&gt; documentService.generatePdfDocumentFromHtml(htmlContent, ASSETS))\n                .thenCombine(CompletableFuture.supplyAsync(() -&gt; this.gbtService.readGbtDocument(locale)),\n                        this::mergeDocuments)\n                .thenCompose(result -&gt; jiraConnectorService.uploadAttachment(documentNameGenerator\n                        .apply(new DocumentInformation(DocumentType.OFFER,\n                                offer.getIssueKey(), EXTENSION)), offer.getIssueKey(), result));\n    }\n</code></pre>\n<p>This does the following:</p>\n<ul>\n<li>render a html offer document</li>\n<li>generate a pdf out of this html template</li>\n<li>fetch a pdf file from an external service</li>\n<li>merge both pdf documents</li>\n<li>upload the merged pdf document to a JIRA api</li>\n</ul>\n<p>For this i use the following ThreadPoolTaskExecutor:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\n    Executor executor() {    \n        ThreadPoolTaskExecutor threadPoolTaskExecutor = new ThreadPoolTaskExecutor();\n        threadPoolTaskExecutor.setCorePoolSize(4);\n        threadPoolTaskExecutor.setMaxPoolSize(4);\n        threadPoolTaskExecutor.setQueueCapacity(50);\n        // by setting core and max to the same value - we use a fixed thread pool\n        threadPoolTaskExecutor.setRejectedExecutionHandler(this.createRejectionHandler());\n        threadPoolTaskExecutor.setAllowCoreThreadTimeOut(true);\n        threadPoolTaskExecutor.initialize();\n\n        log.info(&quot;Using a dedicated ThreadPoolTaskExecutor bean with a core pool size of {} and a max pool size of {} ...&quot;,\n                threadPoolTaskExecutor.getCorePoolSize(), threadPoolTaskExecutor.getMaxPoolSize());\n        return new DelegatingSecurityContextAsyncTaskExecutor(threadPoolTaskExecutor);\n    }\n\n</code></pre>\n<p>When i run the code above (createAndMergeAndUploadOffer) i get an AsyncRequestTimeoutException ... After further investigation i became aware of the problem that the task for uploading the document via Spring´s RestTemplate is somehow not submitted resulting in this above exception.</p>\n<p>Please note:</p>\n<p>When i update the ThreadPoolTaskExecutor the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>threadPoolTaskExecutor.setCorePoolSize(8);\nthreadPoolTaskExecutor.setMaxPoolSize(8);\n</code></pre>\n<p>it works?</p>\n<p>What is the issue here?</p>\n"},{"tags":["java","apache-kafka","quarkus","tibco-ems","mutiny"],"comments":[{"owner":{"account_id":3568344,"reputation":639,"user_id":2979325,"display_name":"Serkan"},"score":0,"creation_date":1700748396,"post_id":77537144,"comment_id":136694446,"body_markdown":"reactive-messaging-jms is not fully integrated with Quarkus. See also: https://github.com/quarkusio/quarkus/issues/30943","body":"reactive-messaging-jms is not fully integrated with Quarkus. See also: <a href=\"https://github.com/quarkusio/quarkus/issues/30943\" rel=\"nofollow noreferrer\">github.com/quarkusio/quarkus/issues/30943</a>"},{"owner":{"account_id":4056112,"reputation":107,"user_id":3486666,"display_name":"andrean"},"score":0,"creation_date":1701175529,"post_id":77537144,"comment_id":136740388,"body_markdown":"@Serkan, given that reactive-messaging-jms is not fully integrated with Quarkus as highlighted in the issue, is it possible to manually implement a reactive messaging system using Quarkus, Vert.x, and Mutiny? If so, could you suggest some resources or provide guidelines on how to get started?","body":"@Serkan, given that reactive-messaging-jms is not fully integrated with Quarkus as highlighted in the issue, is it possible to manually implement a reactive messaging system using Quarkus, Vert.x, and Mutiny? If so, could you suggest some resources or provide guidelines on how to get started?"},{"owner":{"account_id":3568344,"reputation":639,"user_id":2979325,"display_name":"Serkan"},"score":0,"creation_date":1701347125,"post_id":77537144,"comment_id":136765741,"body_markdown":"There is already a smallrye-reactive-jms implementation, but somehow this doesn&#39;t work with Quarkus. I think you can ask this question in their Zulip chat channel, and most probably Clement can help you with it.\n\nSee smallrye-reactive-jms:\nhttps://smallrye.io/smallrye-reactive-messaging/4.12.0/jms/jms/\n\nSee Zulip chat channel:\nhttps://quarkusio.zulipchat.com/#narrow/stream/187030-users","body":"There is already a smallrye-reactive-jms implementation, but somehow this doesn&#39;t work with Quarkus. I think you can ask this question in their Zulip chat channel, and most probably Clement can help you with it.  See smallrye-reactive-jms: <a href=\"https://smallrye.io/smallrye-reactive-messaging/4.12.0/jms/jms/\" rel=\"nofollow noreferrer\">smallrye.io/smallrye-reactive-messaging/4.12.0/jms/jms</a>  See Zulip chat channel: <a href=\"https://quarkusio.zulipchat.com/#narrow/stream/187030-users\" rel=\"nofollow noreferrer\">quarkusio.zulipchat.com/#narrow/stream/187030-users</a>"}],"owner":{"account_id":4056112,"reputation":107,"user_id":3486666,"display_name":"andrean"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700744877,"creation_date":1700744877,"question_id":77537144,"body_markdown":"I&#39;m working with a Quarkus application where I need to consume messages from Tibco EMS and then process these messages. Below is the snippet of my current implementation:\r\n\r\n    Session session = connection.createSession();\r\n    Destination destination = session.createQueue(configurationProperties.queueFlight());\r\n    MessageConsumer consumer = session.createConsumer(destination);\r\n    \r\n    consumer.setMessageListener(message -&gt; {\r\n      FlightData flightData = flightDataConverter.toFlightData(message);\r\n      // TODO: send to kafka\r\n    });\r\n\r\nThis code is part of a method that&#39;s called at the start of the Quarkus application. It successfully receives messages from Tibco EMS. However, my goal is to enhance this process by implementing a reactive approach, possibly using Mutiny.\r\n\r\nI&#39;m seeking advice on whether it&#39;s possible to refactor this code to a reactive model with Mutiny, and if so, how I might go about it. Any suggestions or examples would be greatly appreciated.\r\n\r\nThanks!","title":"Consuming message from Tibco EMS with Quarkus","body":"<p>I'm working with a Quarkus application where I need to consume messages from Tibco EMS and then process these messages. Below is the snippet of my current implementation:</p>\n<pre><code>Session session = connection.createSession();\nDestination destination = session.createQueue(configurationProperties.queueFlight());\nMessageConsumer consumer = session.createConsumer(destination);\n\nconsumer.setMessageListener(message -&gt; {\n  FlightData flightData = flightDataConverter.toFlightData(message);\n  // TODO: send to kafka\n});\n</code></pre>\n<p>This code is part of a method that's called at the start of the Quarkus application. It successfully receives messages from Tibco EMS. However, my goal is to enhance this process by implementing a reactive approach, possibly using Mutiny.</p>\n<p>I'm seeking advice on whether it's possible to refactor this code to a reactive model with Mutiny, and if so, how I might go about it. Any suggestions or examples would be greatly appreciated.</p>\n<p>Thanks!</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9876,"page":41,"page_size":100}
